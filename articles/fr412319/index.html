<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÉè üß§ ‚ù§Ô∏è S√©v√®re fait √† la main par un ing√©nieur en √©lectronique: d√©montez le PocketBook 631 Plus et √©quipez-le d'une batterie solaire ü§Ωüèº üë®üèΩ‚Äç‚öñÔ∏è ‚úâÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Je suis Artem Litvinovich, d√©veloppeur avec de nombreuses ann√©es d'exp√©rience, radio-amateur depuis l'enfance, et j'ai moi-m√™me con√ßu ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>S√©v√®re fait √† la main par un ing√©nieur en √©lectronique: d√©montez le PocketBook 631 Plus et √©quipez-le d'une batterie solaire</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pocketbook/blog/412319/">  Bonjour √† tous!  Je suis Artem Litvinovich, d√©veloppeur avec de nombreuses ann√©es d'exp√©rience, radio-amateur depuis l'enfance, et j'ai moi-m√™me con√ßu les lecteurs.  √Ä mon avis, le faire vous-m√™me selon vos besoins - c'est en tout cas plus int√©ressant et pratique que d'acheter une chose finie.  Par exemple, le m√™me lecteur.  Sur mon compte, quatre mod√®les de lecteurs assembl√©s personnellement √† partir de composants trouv√©s sur le march√© de la radio et command√©s en Chine. <br><br>  Par exemple, l'encre e est d√©crite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , elle √©tait toujours consid√©r√©e par Leonid Kaganov <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , les anciens m√©tiers sont tous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  J'imprime moi-m√™me les √©tuis sur une imprimante 3D, que j'ai √©galement con√ßue moi-m√™me.  Et lorsque vous √™tes trop paresseux pour taper, je sculpte √† partir d'√©poxy. <br><br>  L'exp√©rience, comme vous le savez, s'est accumul√©e tr√®s s√©rieusement et dans une certaine mesure unique.  Et maintenant, les gars de PocketBook se sont tourn√©s vers moi avec une proposition de faire une sorte de mod un de leurs mod√®les.  En cons√©quence, nous avons d√©cid√© d'assembler un lecteur avec une batterie solaire bas√©e sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PocketBook 631 Plus</a> , l'un des lecteurs phares de la gamme.  J'en parlerai dans un article. <br><br><img src="https://habrastorage.org/webt/ec/bv/pp/ecbvppnqtvvceryz9e5uzjcf9uo.jpeg"><br><a name="habracut"></a><br>  Je n'entrerai pas dans les d√©tails du fonctionnement de ce mod√®le d'un point de vue utilisateur.  Beaucoup ont √©crit combien de formats il prend en charge, quelles applications il a, comment fonctionne le support audio et comment ce Pocketbook parle des livres en quinze langues.  Je noterai seulement qu'en g√©n√©ral je suis d'accord avec ces affirmations - le lecteur est exp√©riment√© et vraiment sophistiqu√©. <br><br>  Ayant re√ßu le lecteur entre mes mains, je ne l'ai m√™me pas allum√© - je l'ai imm√©diatement d√©mont√©.  Par cons√©quent, nous allons commencer par examiner ce qui est en elle.  C'est plus int√©ressant pour moi.  D√©monter le lecteur est juste un, deux, trois.  C'est parti! <br><br>  Une fois - √† l'aide d'un coin en plastique, le panneau avant s'enclenche. <br><br><img src="https://habrastorage.org/webt/63/_d/ik/63_dikwuji_u5hzh19vr0rjarri.jpeg"><br><br>  Deux - le cadre de l'√©cran du panneau avant est soigneusement d√©coll√©.  Je soup√ßonne qu'il est scell√© pour compliquer l'entr√©e d'humidit√© et de poussi√®re √† l'int√©rieur √† travers l'espace.  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PocketBook 631 Plus</a> , contrairement au m√™me <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PocketBook 641 Aqua 2</a> , officiellement, la protection contre l'eau n'est pas d√©clar√©e.  N√©anmoins, les ¬´d√©buts¬ª de la protection sont pr√©sents ici.  Avec de tels √©l√©ments structurels, le jet d'humidit√© de ce mod√®le n'est probablement pas tr√®s effrayant. <br><br><img src="https://habrastorage.org/webt/i_/6s/tb/i_6stbp-s7sshaoo8u2cc7nmjke.jpeg"><br><br>  Et trois - les vis qui maintiennent le lecteur lui-m√™me dans le bo√Ætier sont desserr√©es. <br><br><img src="https://habrastorage.org/webt/fi/gn/uk/fignukbr8hrldhffxfmka6isl10.jpeg"><br><br><h2>  En quoi consiste un lecteur moderne? </h2><br>  Il peut sembler inexp√©riment√© que tout est terriblement compliqu√© ici, mais, en g√©n√©ral, l'appareil est assez simple. <br><br>  Pour simplifier, comparez avec mon lecteur fait maison, qui est √† droite. <br><br><img src="https://habrastorage.org/webt/cc/6k/xc/cc6kxchye-2re-lmmtrwguisgre.jpeg"><br><br>  Trois blocs se d√©tachent clairement sur ma planche. <br><br><ul><li>  Sch√©ma d'alimentation de l'√©cran rouge.  L'√©cran √† encre √©lectronique est contr√¥l√© √©lectrostatiquement et n√©cessite plusieurs niveaux de tension, positifs et n√©gatifs. </li><li>  Vert - contr√¥leur pour l'alimentation, la charge et la d√©charge de la batterie.  Les batteries au lithium sont charg√©es en courant continu et produisent une tension instable.  L'√©lectronique n√©cessite un 3,3V constant.  La batterie solaire produit un courant inconfortable.  En cons√©quence, vous avez besoin d'un contr√¥leur CC pour la charge, d'un convertisseur de tension pour la d√©charge et d'un limiteur de puissance pour le panneau solaire. </li><li>  Le jaune est une unit√© informatique.  Il y a un processeur, une m√©moire et un stockage de donn√©es, avec tout le cerclage. </li></ul><br>  √âtonnamment, en substance, le lecteur n'est qu'un ordinateur √©conome en √©nergie avec un √©cran sp√©cial et un logiciel de remplissage. <br><br><img src="https://habrastorage.org/webt/wb/eg/2q/wbeg2qtpl2ynflcfxwggimtgsa0.jpeg"><br><br><h2>  Jetez maintenant un ≈ìil √† l'int√©rieur du lecteur de PocketBook </h2><br>  Ici, vous pouvez voir des blocs similaires - alimentation, travailler avec l'√©cran et un ordinateur.  En outre, il existe deux autres unit√©s - un module Wi-Fi bleu et un codec audio rose.  Ce dernier est assez inhabituel - dans presque tous les lecteurs modernes avec √©crans E Ink, il n'y a pas de capacit√©s sonores.  Leur pr√©sence est l'un des "trucs" uniques du PocketBook 631 Plus. <br><br><img src="https://habrastorage.org/webt/xi/qr/2d/xiqr2dukro-mqkhg1-tb91g1t_u.jpeg"><br><br>  Examinons de plus pr√®s l'int√©rieur du lecteur PocketBook. <br><br>  Le module processeur, MCIMX6L7DVN10AB, est affich√© sur le module processeur.  Il s'agit d'un ARM Cortex-A9, monoc≈ìur, 32 bits, nominalement 1 GHz.  La chose est nettement plus puissante que ce que j'utilise.  Sans surprise, Pocketbook lit 18 formats sans conversion pr√©alable (PDF, PDF-DRM, EPUB, EPUB-DRM, DJVU, FB2, FB2.ZIP, DOC, DOCX, RTF, PRC, TCR, TXT, CHM, HTM, HTML, MOBI et ACSM), ainsi que la voix sur texte, surfe sur Internet, joue √† des jeux et sait organiser des sauts de mots.  Pour l'entretien et la mise en ≈ìuvre de tout cela, un fer appropri√© est n√©cessaire. <br><br>  √Ä droite du processeur se trouve une m√©moire, NT5CC256M16DP.  Il s'agit de DDR3, 4 Gbit / s (512 Mo). <br><br>  Derri√®re la m√©moire se trouve un slot MicroSD standard avec une carte de 8 Go, qui agit comme un stockage int√©gr√©.  Bon march√©, gai et pratique - <s>si vous le souhaitez, la m√©moire interne peut √™tre facilement √©tendue</s> (la v√©rification a montr√© que la carte est li√©e par une sorte d'identifiant mat√©riel, donc le mot "facile" est inappropri√© dans ce cas), et en cas de rencontre catastrophique du lecteur avec le firmament de la terre, la r√©cup√©ration de donn√©es ne n√©cessite qu'un lecteur de carte. <br><br>  Sur la carte, Linux ordinaire est d√©tect√©, ce qui est bien.  √Ä droite se trouve le connecteur de d√©bogage UART.  Si vous y piquez une sonde, vous voyez l'√©cran de d√©marrage U-Boot 2009.08 et un tas d'informations de d√©bogage. <br><br><img src="https://habrastorage.org/webt/qb/mo/yd/qbmoydvbjseytik74ef4dcoszcu.jpeg"><br><br>  √Ä c√¥t√© du module processeur se trouve une unit√© Wi-Fi avec un interrupteur et un faisceau.  RTL8189FTV, module tout-en-un 802.11b / g / n connect√© via le bus SDIO. <br><br>  Placer des modules pr√™ts √† l'emploi pour ce type de fonction, plut√¥t que de les souder discr√®tement sur la carte, est l'une des pratiques standard dans le d√©veloppement de l'√©lectronique. <br><br><img src="https://habrastorage.org/webt/jl/4o/3o/jl4o3o_cgrm8s30lq3ovvrxidjm.jpeg"><br><br>  De l'autre c√¥t√© se trouve le codec - un convertisseur de son du num√©rique au courant sur les √©couteurs.  ALC5640 est toujours de la m√™me soci√©t√© Realtek, il prend le son via I2S et produit un son st√©r√©o de 1,5 W par haut-parleur de 8 Ohms via un amplificateur de classe D. C'est √©galement une chose typique. <br><br><img src="https://habrastorage.org/webt/yu/qm/cx/yuqmcxjaynljjoytxrmjsgetgdi.jpeg"><br><br>  Au-dessus du son se trouve l'unit√© de contr√¥le d'√©cran. <br><br>  Le TPS65185 est un g√©n√©rateur de tension pour les √©crans √† encre √©lectronique.  NN2003, ou quelque chose de similaire avec "2" sur le dessus du marquage n'a pas pu √™tre identifi√©, mais il ressemble √† quelque chose li√© √† la puissance du r√©tro-√©clairage.  Et le zForce NN1001 est un peu comme un contr√¥leur √† √©cran tactile IR. <br><br><img src="https://habrastorage.org/webt/ei/nf/ss/einfssr3lqgoleheszta-clxqpy.jpeg"><br><br>  Enfin, l'alimentation principale.  Au centre se trouve la puce principale - RC5T619.  Il s'agit d'un contr√¥leur de puissance multifonctionnel avec convertisseurs int√©gr√©s, calcul de la consommation, chargement de la batterie, interfaces pour communiquer avec le processeur, etc. Il dispose √©galement d'une horloge en temps r√©el qui devrait fonctionner m√™me lorsque tout le reste est √©teint.  Une telle alimentation hautement int√©gr√©e joue un r√¥le important dans le fait qu'une seule charge du lecteur suffit pour environ un mois et demi d'utilisation active.  Nous allons regarder de plus pr√®s cette puce plus tard, lorsque nous attacherons un panneau solaire au lecteur. <br><br><img src="https://habrastorage.org/webt/nd/lr/d1/ndlrd1ds3zi_gxgdou5ncy3qvbw.jpeg"><br><br>  En retournant la planche, nous trouvons l'√©cran - le plus int√©ressant de ce livre. <br><br><img src="https://habrastorage.org/webt/kw/uu/xg/kwuuxgpw4lvief4nivuu4_t1kiw.jpeg"><br><br>  L'√©cran est coll√© au cadre; de ‚Äã‚Äãl'autre c√¥t√© du cadre, la batterie est coll√©e.  La planche y est viss√©e, et dans une certaine mesure l'ensemble du bo√Ætier. <br><br><img src="https://habrastorage.org/webt/vo/wx/ac/vowxacfzpsdd_bkdce3stddr1m0.jpeg"><br><br>  En quoi cet √©cran ¬´E Ink Carta¬ª de 6 pouces de derni√®re g√©n√©ration est-il diff√©rent de l'√©cran E Ink ordinaire que vous pouvez acheter au magasin? <br><br>  √Ä titre de comparaison - voici mon √©cran de 7 pouces d'une entreprise chinoise. <br><br><img src="https://habrastorage.org/webt/je/8e/jt/je8ejt4wlcciofhvwthkn6ib8wy.jpeg"><br><br>  En mettant la m√™me image sur les deux, vous pouvez imm√©diatement remarquer les diff√©rences.  Mon √©cran, bien que plus grand, a une r√©solution de seulement 480 x 800 et 120 DPI, tandis que le Pocket a une r√©solution de 1072 x 1448 et 300 DPI.  Eh bien, la qualit√© de la matrice elle-m√™me est plus √©lev√©e - en tant que fabricant majeur du premier √©chelon, PocketBook utilise des √©crans de la plus haute qualit√© - Grade A (¬´premier grade¬ª, avant rejet).  Pour les petites marques, et pour la vente sous forme de pi√®ces de rechange, il existe des √©crans de grade B avec un certain nombre (de normes acceptables) de d√©fauts. <br><br><img src="https://habrastorage.org/webt/u7/4q/ne/u74qnevu7sujcvv0kl8qngtpb7u.jpeg"><br><br>  Si vous regardez attentivement, vous pouvez voir une autre grande diff√©rence - sur l'√©cran de poche, les ¬´couleurs¬ª sont plus lisses. <br><br><img src="https://habrastorage.org/webt/co/1c/i4/co1ci4tt_p6wemfwyjqhr-pgq_8.jpeg"><br><br>  Ce n'est pas surprenant, car, contrairement au ¬´chinois¬ª en noir et blanc, l'√©cran Pocket est monochrome et prend en charge <s>50</s> 16 nuances de gris. <br><br><img src="https://habrastorage.org/webt/01/ea/sz/01easzhea0b9qdft1pox1y4fvrm.jpeg"><br><br>  En fait, cela n'est pas tant d√ª √† l'√©cran (bien que cela aussi, bien s√ªr), mais √† un circuit de commande plus sophistiqu√© que le mien.  Fondamentalement, ces deux √©crans ne sont pas tr√®s diff√©rents l'un de l'autre, et la principale diff√©rence r√©side dans la reliure. <br><br>  Examinons de plus pr√®s la technologie elle-m√™me.  Un √©cran √† encre √©lectronique est un tel verre, dont un c√¥t√© est une matrice d'√©lectrodes de contr√¥le, et de l'autre, un r√©seau de bulles avec du liquide scell√© dans du plastique transparent, dans lequel flottent des billes microscopiques.  Le blanc est positif, le noir est n√©gatif.  La matrice de commande fait tourner les billes de mani√®re √©lectrostatique, affichant ainsi l'image. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v3/68/jj/v368jjwrr_-c3thtzjuiha-hfee.jpeg"></div><br>  √Ä l'arri√®re, un tel √©cran est en miroir et le c√¢blage des signaux de commande grav√©s sur la vitre est visible. <br><br><img src="https://habrastorage.org/webt/ob/92/ty/ob92tybeaqu6jhqcs5whuz3peg4.jpeg"><br><br><img src="https://habrastorage.org/webt/hr/ef/fe/hreffeu4wizsqlf_brlxg2r33wa.jpeg"><br><br>  Si vous regardez l'√©cran √† la lumi√®re, vous pouvez voir une fine grille de contr√¥le derri√®re le bruit des capsules in√©galement appliqu√©es.  En raison de cette in√©galit√©, le r√©tro-√©clairage d'un √©cran √† encre √©lectronique est une t√¢che plut√¥t simple: si vous le mettez en surbrillance par derri√®re, il ressemblera √† une miette de verre. <br><br><img src="https://habrastorage.org/webt/oh/uk/dq/ohukdqaw2djprg1qqkk8jyvwqgo.jpeg"><br><br>  √Ä certains √©gards, il ressemble m√™me √† du papier ordinaire. <br><br><img src="https://habrastorage.org/webt/ai/xn/xu/aixnxuukm1q8ctrmtrjbmn9b3tk.jpeg"><br><br>  L'√©cran du portefeuille est √©troitement coll√© au cadre, et les tentatives de les s√©parer risquent de se terminer tristement.  Cependant, il y a un endroit sur le bord o√π vous pouvez √©galement l'√©clairer et voir une structure similaire. <br><br><img src="https://habrastorage.org/webt/_8/nw/0y/_8nw0ydgqsbyybx31amamfwj9ag.jpeg"><br><br>  Nous voyons qu'il y a un cadre noir en haut de l'√©cran, et sur le tableau en dessous, il y a un ensemble de d√©tails. <br>  Qu'est ce que c'est <br><br><img src="https://habrastorage.org/webt/bs/ip/jw/bsipjw-tuo5lcrihofwil-us-oq.jpeg"><br><br>  De plus, le cadre n'est pas simple, mais transparent en lumi√®re infrarouge!  Et les saillies ressemblent √† des lentilles.  √Ä quoi tout cela sert-il? <br><br><img src="https://habrastorage.org/webt/tf/-m/9k/tf-m9k1m8raheldckdroq3tsgqe.jpeg"><br><br>  L'√©nigme est r√©solue tr√®s simplement.  On se souvient d'un interphone ordinaire avec un clavier en fer, qui cesse √©trangement de fonctionner lorsque ses bords sont macul√©s de neige.  Sur les bords de ce clavier se trouve un ensemble de lumi√®re et de photodiodes dans lesquelles ils brillent.  En suivant l'ombre de cet √©clairage, le processeur peut comprendre le num√©ro sur lequel le doigt est apparu. <br><br><img src="https://habrastorage.org/webt/uu/hv/bf/uuhvbfkno4hvju15zeohmhwxge8.jpeg"><br><br>  Dans notre lecteur de poketbook, le design est similaire, mais plus pr√©cis.  Sur les bords se trouvent des LED infrarouges, qui cadrent la mise au point sur les photodiodes du c√¥t√© oppos√©, et en ombrant le processeur calcule l'emplacement du doigt. <br><br><img src="https://habrastorage.org/webt/vr/ai/mv/vraimvmc4ygocb1z9rgp9kwy-ag.jpeg"><br><br>  Un panneau flexible avec LED est coll√© au bas de l'√©cran avec une bande.  C'est le fameux √©clairage √† temp√©rature de lumi√®re variable.  Vous allez √† gauche - la lumi√®re devient plus froide, √† droite - il fait plus chaud.  L'id√©e est la suivante: avant d'aller au lit, il est pr√©f√©rable de lire avec un r√©tro-√©clairage chaud, gr√¢ce √† cela l'appareil visuel se d√©tend plus rapidement.  Il existe deux versions d'un tel r√©tro-√©clairage, l'une d√©velopp√©e par E Ink, l'autre une copie chinoise de celui-ci.  Une copie est pire car elle consomme environ un tiers de plus d'√©nergie.  Dans PocketBook 631 Plus est le bon, E Inca. <br><br><img src="https://habrastorage.org/webt/w5/oc/ed/w5ocedeiawtu1gtkzwgncupxcue.jpeg"><br><br><img src="https://habrastorage.org/webt/9x/v3/pb/9xv3pbwe9axrdwxoushiiactpqi.jpeg"><br>  <i>Vous allez √† droite - la lumi√®re se r√©chauffe</i> <br><br>  Comme tout ing√©nieux, le secret est simple - le r√©tro-√©clairage se compose de LED altern√©es: chaudes, froides, chaudes, froides, etc. <br><br>  La luminosit√© de chaque moiti√© est contr√¥l√©e ind√©pendamment, ce qui permet une transition en douceur du froid au chaud. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hz6IwtRFOug" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Sur cet examen de l'int√©rieur peut √™tre termin√©, remonter le lecteur et proc√©der √† la charge.  Dans des conditions normales, le livre est charg√© √† partir de l'USB standard avec un courant de 0,9A. <br><br>  C'est 4,5 W, et devrait fournir une charge compl√®te de sa batterie 1,5 A / h pendant environ une heure. <br><br><img src="https://habrastorage.org/webt/q6/t4/kx/q6t4kxmyd6_whb5b_xwfogpbvvq.jpeg"><br><br>  Alors que le courant disponible diminue, le livre continue de charger calmement jusqu'√† presque z√©ro.  Il semble que le contr√¥leur de charge pr√©sente peu d'int√©r√™t pour la norme USB, et il peut charger de n'importe quelle tension jusqu'√† la tension de la batterie elle-m√™me. <br><br><img src="https://habrastorage.org/webt/vl/nz/g6/vlnzg6blp6pznh9iv3lrg0p61-4.jpeg"><br><br>  Que se passe-t-il lors du chargement et du d√©chargement?  Nous rappelons le RC5T619, qui contr√¥le le sous-syst√®me d'alimentation.  Il s'agit d'un contr√¥leur int√©gr√© pour l'alimentation, la charge et la mesure.  Il a deux canaux d'entr√©e pour la charge et l'alimentation externe, des convertisseurs de tension int√©gr√©s, une sortie vers les sorties de batterie et de consommation, des entr√©es de capteur (par exemple, la temp√©rature de la batterie) et bien plus encore.  Tout cela est configur√© √† la fois au niveau du circuit et par programmation sur le bus I2C. <br><br>  Sur le m√™me bus, le processeur en re√ßoit des informations sur la charge restante de la batterie, sur l'√©tat de charge, sur l'heure actuelle, etc. <br><br><img src="https://habrastorage.org/webt/oc/3x/ut/oc3xutahobnx7ylr7sw_hxmhm0i.png"><br><br>  Quelle est la difficult√© de d√©terminer le niveau de charge d'une batterie au lithium?  Tu ne peux pas mesurer la tension dessus?  H√©las, sa tension est non lin√©aire, pour la plupart constante, et d√©pend fortement de la charge. <br><br><img src="https://habrastorage.org/webt/al/1d/55/al1d55ofazoolofpiwc9bitfct4.png"><br><br>  En pratique, un compteur suspendu est utilis√© pour d√©terminer le niveau de charge.  Comme un compteur √©lectrique dans un appartement, il consid√®re combien de charge a coul√© de la batterie √† la charge et de la charge √† la batterie.  C'est le seul moyen fiable pour afficher de mani√®re fiable le niveau de la batterie.  Et un tel compteur est g√©n√©ralement int√©gr√© au contr√¥leur de puissance.  Le processus de charge d'une batterie au lithium n'est pas non plus facile, contrairement, par exemple, au plomb.  Le processus de charge se compose de deux √©tapes - courant continu et tension constante.  Au premier stade, le courant est fourni, limit√© √† la valeur de s√©curit√© maximale, g√©n√©ralement √† 1 ¬∞ C (une capacit√© de batterie par heure).  Lorsque la tension de la batterie atteint sa valeur maximale (4,20 V), le deuxi√®me √©tage commence, lorsque cette tension est maintenue √† l'entr√©e et que le courant baisse.  Au final, le courant atteint un seuil inf√©rieur, g√©n√©ralement 0,1 C, et la charge s'arr√™te. <br><br>  Tout cela, encore une fois, est le contr√¥leur de puissance int√©gr√©. <br><br>  √âvidemment, pour connecter une autre source d'alimentation, vous devrez la parcourir.  Id√©alement, vous pourriez utiliser la deuxi√®me entr√©e de charge, VADP, mais il y a un petit probl√®me - elle n'est pas s√©par√©e sur la carte de notre lecteur, et le contr√¥leur est une puce BGA, un rectangle en plastique avec des billes de contact sur le c√¥t√© inf√©rieur, et acc√©der aux entr√©es VADP, essentiellement impossible. <br><br><img src="https://habrastorage.org/webt/tm/w6/7h/tmw67hoakl5xbd_9xxjol1jcups.jpeg"><br><br>  Vous devez donc vous connecter √† l'entr√©e VUSB, c'est-√†-dire au connecteur d'alimentation standard du lecteur.  Par cons√©quent, il est bon qu'il continue de se charger m√™me √† tr√®s faible tension et courant. <br><br>  Avec cette connexion, il y a quelques √©l√©ments √† consid√©rer. <br><br>  Premi√®rement, il ne devrait pas interf√©rer avec une charge normale.  Autrement dit, la circulation du courant du soleil vers la charge ou l'ordinateur n'est pas autoris√©e.  Deuxi√®mement, il ne doit pas absorber de courant pendant la charge externe.  C'est-√†-dire  Le flux de courant de charge dans le circuit du panneau solaire n'est pas autoris√©. <br><br>  La premi√®re est assez simple - nous appliquerons une tension bien inf√©rieure √† celle d'une charge ou d'un ordinateur.  Le lecteur peut en √™tre charg√©, mais la source externe ne le remarquera pas. <br><br>  Le second n'est pas non plus difficile - pour le panneau solaire, vous aurez besoin d'un contr√¥leur de point de puissance maximale, √† l'int√©rieur ou √† la sortie duquel il y aura une diode. <br><br>  De quel type de contr√¥leur s'agit-il et pourquoi est-il n√©cessaire?  Jetons un coup d'≈ìil aux panneaux solaires. <br><br>  Il existe de nombreux types de cellules solaires.  Les conventionnels, familiers √† tous les √©l√©ments en silicium avec une teinte bleu√¢tre et le c√¢blage en surface (sur la photo de gauche) sont les plus efficaces.  Leur inconv√©nient est qu'au fil du temps, ils sont d√©truits par la lumi√®re du soleil et, en dix ans, ils perdent la majeure partie de leur puissance. <br><br>  Mon livre utilise un √©l√©ment en couche mince sur du s√©l√©niure de cuivre-indium-gallium (√† droite), qui est une fois et demie moins efficace, mais plus durable. <br><br><img src="https://habrastorage.org/webt/g4/qv/5l/g4qv5le5nhazx2z18fo7wv7zhg4.jpeg"><br>  <i>Les deux panneaux sont constitu√©s de 11 √©l√©ments connect√©s en s√©rie.</i> <br><br>  La question se pose - quel panneau mettre sur notre PocketBook?  Habituellement, je suis pour la long√©vit√©, mais dans ce cas, un sentiment de beaut√©, pouss√© dans un coin √©loign√©, devait √™tre entendu, et j'ai choisi l'option √† gauche - c'est tr√®s bien un panneau en silicone typique qui s'adapte √† la biblioth√®que. <br><br><img src="https://habrastorage.org/webt/ku/yd/no/kuydno5wzaxkjtl_l0dru3avzvk.jpeg"><br><br>  La batterie solaire est une source d'√©nergie non lin√©aire.  Une simple batterie ou alimentation est g√©n√©ralement d√©crite par la loi d'Ohm - √† mesure que la r√©sistance qui leur est appliqu√©e diminue, le courant augmente et la tension baisse.  En d'autres termes, il s'agit d'une source de tension avec une r√©sistance s√©rie √©quivalente. <br><br>  Avec une batterie solaire, avec une diminution de la r√©sistance, le courant reste √† peu pr√®s constant et la tension baisse.  Ceci est plus proche de la source de courant avec une tension sup√©rieure limit√©e.  Voici, par exemple, un graphique du courant en tension pour l'un de mes grands panneaux solaires. <br><br><img src="https://habrastorage.org/webt/hl/7x/ph/hl7xph_ndkgy6pqmieyinlnxysy.jpeg"><br><br>  Si vous connectez un contr√¥leur de charge de batterie conventionnel √† une telle source, la charge tentera de tirer autant de courant que possible (ce sera une faible r√©sistance), la tension sur le panneau chutera et, avec elle, la puissance chutera - la pleine puissance n'est disponible que pr√®s du point de fonctionnement, o√π le produit du courant et de la tension est maximum. <br><br>  Pour r√©soudre ce probl√®me, le panneau solaire est g√©n√©ralement connect√© via un contr√¥leur de puissance constante.  Un convertisseur d'impulsions qui ne permet pas √† la charge d'essayer de retirer plus de puissance du panneau qu'elle ne peut en fournir √† sa tension optimale.  En fait, il convertit la caract√©ristique non lin√©aire du panneau en ohmique. <br><br>  La mise en ≈ìuvre la plus simple d'un tel contr√¥leur est un convertisseur abaisseur avec r√©troaction √©galement sur la tension d'entr√©e, et pas seulement sur la sortie. <br><br>  √Ä mesure que la r√©sistance de sortie diminue, un tel convertisseur abaisse la tension (et augmente le courant) de sorte qu'une tension constante reste √† l'entr√©e. <br><br>  Jetez un coup d'≈ìil √† un circuit de convertisseur abaisseur simple sur le contr√¥leur MC34063 PWM. <br><br><img src="https://habrastorage.org/webt/1b/xr/-u/1bxr-ujxf0tquj7icbl3v24xquw.png"><br><br>  Cette puce a une cl√© int√©gr√©e qui s'ouvre et se ferme √† une fr√©quence de dizaines de kilohertz.  Lorsqu'il est ouvert, le courant le traverse et passe par l'inductance, gagnant progressivement la tension de sortie.  Lorsqu'elle est ferm√©e, le courant traverse la diode et l'inductance (l'inductance a tendance √† r√©sister √† une variation du courant qui la traverse), perd progressivement de la tension.  La tension "triangulaire" r√©sultante est liss√©e par le condensateur de sortie pour se rapprocher de la constante. <br><br>  Plus la touche est ouverte (largeur d'impulsion), plus la tension de sortie est √©lev√©e.  Parce que  Habituellement, une tension constante est requise, √† la sortie il y a un diviseur de r√©troaction qui fournit un signal √† l'amplificateur d'erreur dans le contr√¥leur.  Cela lui permet de r√©duire la largeur d'impulsion si la tension est trop √©lev√©e, et d'augmenter quand vice versa. <br><br>  Comment faire un contr√¥leur avec une r√©tention de puissance maximale √† partir de ce circuit?  Il est n√©cessaire d'y ajouter un petit pr√©fixe. <br><br><img src="https://habrastorage.org/webt/a8/25/qd/a825qdq_zyal7w2jd3pwum7i4uk.png"><br><br>  Le transistor est ouvert lorsque la tension d'entr√©e est sup√©rieure √† la tension d√©finie, la tension de son c√¥t√© de la diode est nulle et le contr√¥leur limite la tension de sortie, comme d'habitude. <br><br>  Si la tension d'entr√©e tombe en dessous de la valeur d√©finie, le transistor commence √† se fermer et une tension proportionnelle √† l'entr√©e parvient √† la ligne de r√©troaction.  Et bloque le signal de la sortie.  Le contr√¥leur per√ßoit cela comme une tension de sortie accrue et r√©duit la longueur d'impulsion, emp√™chant ainsi la charge d'absorber trop de puissance et de baisser la tension d'entr√©e. <br><br>  Si nous testons ce circuit sur une planche √† pain, il fonctionnera plus ou moins, mais avec des caract√©ristiques assez terribles. <br><br><img src="https://habrastorage.org/webt/m9/bk/yd/m9bkydjawid79q23ihrqtwfyo30.jpeg"><br><br>  En pratique, fabriquer son propre convertisseur d'impulsions est une t√¢che ingrate et peu efficace.  Surtout sur des d√©tails aussi anciens que le MC34063. <br><br>  Par cons√©quent, nous utiliserons une pratique standard, c'est-√†-dire des modules pr√™ts √† l'emploi. <br><br>  La partie principale de notre circuit est un pr√©fixe inverseur de r√©troaction de la tension d'entr√©e.  Et il peut √™tre connect√© √† n'importe quel circuit convertisseur abaisseur standard, qui a un diviseur externe pour le retour de la tension de sortie.  En cons√©quence, nous prenons un module abaisseur typique pour plusieurs watts et lui soudons la sortie de la diode pr√©fixe. <br><br><img src="https://habrastorage.org/webt/ul/ni/sq/ulnisq2pw8t8_vjbxxy0yyrlayw.jpeg"><br><br>  Comme pr√©vu, tout fonctionne presque sans probl√®me. <br><br><img src="https://habrastorage.org/webt/rs/cc/ak/rsccaka9wov4zmu8ls1slgcr8mg.jpeg"><br><br>  Vous pouvez maintenant supprimer les pi√®ces inutiles et v√©rifier le circuit en mode tension √† courant constant, en simulant un panneau solaire. <br><br><img src="https://habrastorage.org/webt/sf/em/0a/sfem0aub-rljfepe3ozs9unhvhu.jpeg"><br>  <i>Comme vous pouvez le voir, le circuit maintient parfaitement la tension d'entr√©e minimale</i> <br><br>  Nous transf√©rons le circuit d'une maquette pratique √† une permanente, et le r√©sultat est une conception compacte et assez plate. <br><br><img src="https://habrastorage.org/webt/7z/cl/le/7zclletg6hon7og5t7_xvy_p-p0.jpeg"><br><br>  Il n'y a pas d'espace libre exc√©dentaire √† l'int√©rieur du lecteur, et le design n'est pas encore assez plat pour s'adapter entre le capot arri√®re et la carte, donc dans tous les cas vous devez tout monter de l'ext√©rieur et sacrifier le design. <br><br>  Si le livre avait √©t√© initialement con√ßu dans l'espoir d'une charge solaire, un tel probl√®me ne se serait pas pos√© - comme nous nous en souvenons, il y avait beaucoup d'espace libre sur la carte elle-m√™me. <br><br><img src="https://habrastorage.org/webt/ph/ob/me/phobmen1my1mmyk8q7eo4xdwrfk.jpeg"><br><br>  Le seul endroit plus ou moins pratique o√π vous pouvez placer le contr√¥leur est √† l'arri√®re du panneau solaire.  Il y a m√™me un cadre pointill√© qui fait allusion. <br><br><img src="https://habrastorage.org/webt/7q/kp/d7/7qkpd7kgt1e_kd6n3rwldcy1qjk.jpeg"><br><br>  Avant l'assembl√©e finale, il est logique de tout tester, mais le sombre printemps de Moscou le X-Day a obstin√©ment refus√© de coop√©rer. <br><br><img src="https://habrastorage.org/webt/1x/nf/ys/1xnfysapns41fssf_nkcdr0mdjk.jpeg"><br><br>  Je dois obtenir mon ¬´substitut solaire¬ª - un bloc de LED avec une puissance totale de 1 kW et une temp√©rature de couleur de 4000K, pr√©alablement calibr√© avec un photom√®tre.  Donne la lumi√®re du jour d'√©t√© √† une distance de 29 cm. <br><br>  La primitivit√© du syst√®me de refroidissement du mod√®le ¬´gros morceau d'aluminium¬ª conduit au fait que l'appareil peut surchauffer et br√ªler en 6 minutes, d'o√π le sort que l'imperfection des batteries modernes peut lui sauver, qui ne dure que 5 minutes. <br><br><img src="https://habrastorage.org/webt/af/ij/la/afijlaxyg-fbl5cnnzg_06fdx0e.jpeg"><br><br>  Il est difficile de croire √† quel point la lumi√®re du soleil est intense - un kilowatt de lumi√®re par m√®tre carr√©.  Ce n'est que si vous placez ces lampes √† un m√®tre les unes des autres au-dessus de la moiti√© de la plan√®te, que vous pouvez obtenir quelque chose de proche de la puissance du soleil. <br><br><img src="https://habrastorage.org/webt/1g/jw/cg/1gjwcgw3nroamb5uxmawyso7ghe.jpeg"><br><br>  En raison de l'√©clat, vous ne pouvez pas voir ce que l'appareil montre - la charge est fournie avec une puissance d'environ 0,7 W.  Ceci est proche du panneau pr√©vu - 1 W et 70% d'efficacit√© du convertisseur.  √Ä cette vitesse, le lecteur se chargera de z√©ro pendant environ 8 heures. <br><br>  En r√©alit√©, sous nos latitudes et conditions m√©t√©orologiques instables, il en faudra deux fois plus - la valeur nominale de la puissance du panneau de 1 W est donn√©e pour un ensoleillement nominal de 1000 W par m2.  Que se passe-t-il √† midi sous les tropiques, ou dans un laboratoire sous un substitut solaire. <br><br><img src="https://habrastorage.org/webt/oy/fx/rh/oyfxrhdivvkr3rzg8mzf2lswago.jpeg"><br><br>  Maintenant que le test est r√©ussi, vous pouvez enfin attacher le panneau au livre lui-m√™me. <br><br>  En raison de l'√©paisseur du transducteur, il existe un √©cart d'un demi-centim√®tre entre le panneau et le bo√Ætier.  Vous devez la fermer, vous devez donc r√©chauffer l'imprimante 3D et imprimer le cadre. <br><br><img src="https://habrastorage.org/webt/2m/nw/nv/2mnwnvkvt4evmmipp2feax3lhie.jpeg"><br><br>  Le cadre est attach√© au corps et √† l'int√©rieur, nous forons un trou pour les fils. <br><br><img src="https://habrastorage.org/webt/jm/rw/j3/jmrwj34tepjquhtmheef05ihxus.jpeg"><br><br>  Les broches du contr√¥leur sont pass√©es √† travers les trous et soud√©es √† l'entr√©e. <br><br><img src="https://habrastorage.org/webt/gz/du/dq/gzdudq9btucwr3zixot9yymsyns.jpeg"><br><br>  De toute √©vidence, un tel design ne gagnera aucun concours de beaut√© et de design.  Et dans la pratique, l'augmentation de l'√©paisseur d'un facteur 1,5 est tout √† fait perceptible - le lecteur n'est plus aussi pratique dans votre poche et ne rentre pas dans les couvertures. <br><br>  Pour que le lieu ne disparaisse pas en vain, on pourrait, par exemple, le remplir d'une batterie plus spacieuse.  Ou attachez un support articul√© sous le panneau - et il est pratique de le mettre sur la table, et le design sera plus sym√©trique.  Mais en fait, un tel √©l√©ment de conception serait plus raisonnable √† int√©grer initialement dans le lecteur, ou √† le faire comme un appareil s√©par√©.  En pla√ßant le contr√¥leur sur la carte et en faisant une d√©coupe pour le panneau dans le bo√Ætier, vous pouvez obtenir un lecteur de la m√™me √©paisseur que le mod√®le d'origine. <br><br><img src="https://habrastorage.org/webt/-d/9j/tk/-d9jtkgi9kogxr6hx5or4yep4sm.jpeg"><br><br>  En attendant, √† travers la brume des nuages, le soleil a finalement √©clos, et vous pouvez voir en direct que l'unit√© fonctionne. <br><br><img src="https://habrastorage.org/webt/uw/ro/uy/uwrouyd4w3xwtdareczgjshod5e.jpeg"><br><br>  Au total, nous pouvons conclure qu'il serait formidable pour le fabricant - la soci√©t√© PocketBook - d'adopter des panneaux solaires et pourrait un jour produire des lecteurs avec eux. <br><br>  L'encombrement de la conception locale qui en r√©sulte ne signifie pas du tout que le produit d'usine sera le m√™me - c'est comme comparer une voiture √† essence convertie en moteurs √©lectriques, avec un coffre plein de batteries et un centre de gravit√© renvers√©, avec une machine con√ßue √† l'origine comme une voiture √©lectrique. <br><br>  En termes intelligents, l'√©nergie solaire est d√©sormais √† la mode, la technologie progresse, les prix des panneaux baissent rapidement.  Et tout le monde croit que l'avenir leur appartient.  Ainsi, un lecteur avec une charge solaire int√©gr√©e peut tr√®s bien initier la mode sur les appareils mobiles avec une telle commodit√©.  Reader - un appareil √† tr√®s faible consommation d'√©nergie et, bien s√ªr, un grand bo√Ætier.  Ce qui en fait un cas d'utilisation presque optimal dans cette direction. <br><br>  Pour r√©sumer le projet lui-m√™me, la partie la plus difficile a √©t√© de faire le contr√¥leur du point de puissance maximale sur une si petite √©chelle.  C'est l'un de ces domaines o√π il n'y a pratiquement pas de modules pr√™ts √† l'emploi jusqu'√† pr√©sent, et donc chacun est pour lui-m√™me. <br><br>  La partie la plus int√©ressante pour moi a √©t√© de comprendre comment fonctionnent les lecteurs et les √©crans modernes.  La derni√®re fois (vers 2007) j'ai d√©mont√© un lecteur assez ancien, qui √©tait l'un des premiers sur le march√©, et ce n'√©tait pas beaucoup plus difficile que le mien.  La conception de l'√©cran tactile s'est r√©v√©l√©e inattendue - je n'avais jamais rencontr√© la technologie d'une grille infrarouge a√©rienne d'une telle taille et d'une telle pr√©cision, et je ne m'attendais pas √† la trouver l√†-bas.  Eh bien, les autres moments d'ing√©nierie du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PocketBook 631 Plus</a> semblaient assez logiques et r√©fl√©chis - on peut voir que le lecteur a √©t√© d√©velopp√© de bonne foi - loin du genou et pas du tout amateur. <br><br>  Telles sont les choses.  C‚Äôest tout, et j‚Äôesp√®re que vous avez appris quelque chose de nouveau aujourd‚Äôhui.  Je r√©pondrai aux questions dans les commentaires, √©cris. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr412319/">https://habr.com/ru/post/fr412319/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr412307/index.html">La phrase "Ne soyez pas m√©chant" a √©t√© supprim√©e de la pr√©face du code Google.</a></li>
<li><a href="../fr412309/index.html">La force r√©duit les sympt√¥mes de la d√©pression pas pire que l'exercice a√©robie</a></li>
<li><a href="../fr412311/index.html">Une IA form√©e √† la navigation a d√©velopp√© un syst√®me similaire √† une ¬´boussole¬ª d'un cerveau de mammif√®re</a></li>
<li><a href="../fr412313/index.html">TooWheels - fauteuil roulant avec documentation ouverte</a></li>
<li><a href="../fr412315/index.html">Le service Google Duplex fait peur avec son discours beau et correct, il n'y a pas de satisfaction</a></li>
<li><a href="../fr412323/index.html">Mon algorithme a-t-il des probl√®mes mentaux?</a></li>
<li><a href="../fr412325/index.html">Spectrum-48 contre un paquet de cigarettes, du porridge d'une hache ou ce que la vid√©o STM32F103C8T6 + peut faire (mise √† jour)</a></li>
<li><a href="../fr412327/index.html">Le point de vue du pi√©ton-math√©maticien: pourquoi nos routes sont guano</a></li>
<li><a href="../fr412329/index.html">Imprimante 3D Anet A8 avec cadre en acier</a></li>
<li><a href="../fr412331/index.html">Les assistants num√©riques ob√©issent √† des commandes inaudibles pour l'homme</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>