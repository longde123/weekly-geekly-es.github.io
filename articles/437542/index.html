<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõåüèæ üôÉ üöµüèª Hacemos una calificaci√≥n de las ciudades rusas por la calidad de la carretera. üöº üç∏ üèáüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una vez m√°s, conduciendo un autom√≥vil alrededor de mi ciudad natal y yendo alrededor de otro pozo, pens√©: ¬øexist√≠an carreteras tan "buenas" en todas p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hacemos una calificaci√≥n de las ciudades rusas por la calidad de la carretera.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437542/"><img src="https://habrastorage.org/webt/qg/pm/pf/qgpmpfivqp5xqw2c8-qvxjp4-dq.jpeg"><br><br>  Una vez m√°s, conduciendo un autom√≥vil alrededor de mi ciudad natal y yendo alrededor de otro pozo, pens√©: ¬øexist√≠an carreteras tan "buenas" en todas partes de nuestro pa√≠s y decid√≠ que deber√≠amos evaluar objetivamente la situaci√≥n con la calidad de las carreteras en nuestro pa√≠s? <br><a name="habracut"></a><br><h2>  Formalizaci√≥n de tareas </h2><br>  En Rusia, los requisitos para la calidad de las carreteras se describen en GOST R 50597-2017 ‚ÄúCarreteras y carreteras.  Requisitos para el estado operativo aceptable bajo las condiciones de garantizar la seguridad vial.  M√©todos de control ".  Este documento define los requisitos para cubrir la calzada, los bordes de las carreteras, las franjas divisorias, las aceras, las pasarelas peatonales, etc., y tambi√©n establece los tipos de da√±os. <br><br>  Dado que la tarea de determinar todos los par√°metros de las carreteras es bastante extensa, decid√≠ reducirla y centrarme solo en el problema de determinar defectos en la cobertura de la carretera.  En GOST R 50597-2017, se distinguen los siguientes defectos en el revestimiento de la carretera: <br><br><ul><li>  baches </li><li>  rompe </li><li>  reducciones </li><li>  turnos </li><li>  peines </li><li>  rastrear </li><li>  carpeta de sudoraci√≥n </li></ul><br>  Decid√≠ abordar estos defectos. <br><br><h2>  Recolecci√≥n de datos </h2><br>  ¬øD√≥nde puedo obtener fotograf√≠as que muestren secciones suficientemente grandes de la carretera, e incluso con referencia a la geolocalizaci√≥n?  La respuesta vino en pedrer√≠a: panoramas en los mapas de Yandex (o Google), sin embargo, despu√©s de un poco de b√∫squeda, encontr√© varias opciones alternativas m√°s: <br><br><ul><li>  emitir motores de b√∫squeda de im√°genes para solicitudes relevantes; </li><li>  fotos en sitios para recibir quejas (Rosyama, ciudadano enojado, Virtud, etc.) </li><li>  Opendatascience impuls√≥ un proyecto para detectar defectos en la carretera con un conjunto de datos marcado - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/sekilab/RoadDamageDetector</a> </li></ul><br>  Desafortunadamente, un an√°lisis de estas opciones mostr√≥ que no son muy adecuadas para m√≠: emitir motores de b√∫squeda tiene mucho ruido (muchas fotos que no son carreteras, varios renders, etc.), las fotos de los sitios para recibir quejas contienen solo fotos con grandes violaciones de la superficie de asfalto , hay bastantes fotos con peque√±as violaciones de cobertura y sin violaciones en estos sitios, el conjunto de datos del proyecto RoadDamageDetector se recopila en Jap√≥n y no contiene muestras con grandes violaciones de cobertura, as√≠ como carreteras sin cobertura en absoluto. <br><br>  Como las opciones alternativas no son adecuadas, utilizaremos panoramas de Yandex (exclu√≠ la opci√≥n de panorama de Google, ya que el servicio se presenta en menos ciudades de Rusia y se actualiza con menos frecuencia).  Decidi√≥ recopilar datos en ciudades con una poblaci√≥n de m√°s de 100 mil personas, as√≠ como en centros federales.  Hice una lista de nombres de ciudades: hab√≠a 176 de ellos, m√°s tarde resulta que solo 149 de ellos tienen panor√°micas.  No profundizar√© en las caracter√≠sticas del an√°lisis de mosaicos, dir√© que al final obtuve 149 carpetas (una para cada ciudad) en las que hab√≠a un total de 1.7 millones de fotos.  Por ejemplo, para Novokuznetsk, la carpeta se ve√≠a as√≠: <br><br><img src="https://habrastorage.org/webt/aw/fa/73/awfa73gw128fyrvl8au2b_brjb8.png"><br><br>  Por el n√∫mero de fotos descargadas, las ciudades se distribuyeron de la siguiente manera: <br><br><div class="spoiler">  <b class="spoiler_title">Mesa</b> <div class="spoiler_text"><table><tbody><tr><th>  Ciudad <br></th><th>  N√∫mero de fotos, piezas <br></th></tr><tr><td>  Mosc√∫ <br><br></td><td>  86048 <br><br></td></tr><tr><td>  San petersburgo <br><br></td><td>  41376 <br><br></td></tr><tr><td>  Saransk <br><br></td><td>  18880 <br><br></td></tr><tr><td>  Podolsk <br><br></td><td>  18560 <br><br></td></tr><tr><td>  Krasnogorsk <br><br></td><td>  18208 <br><br></td></tr><tr><td>  Lyubertsy <br><br></td><td>  17760 <br><br></td></tr><tr><td>  Kaliningrado <br><br></td><td>  16928 <br><br></td></tr><tr><td>  Kolomna <br><br></td><td>  16832 <br><br></td></tr><tr><td>  Mytishchi <br><br></td><td>  16192 <br><br></td></tr><tr><td>  Vladivostok <br><br></td><td>  16096 <br><br></td></tr><tr><td>  Balashikha <br><br></td><td>  15968 <br><br></td></tr><tr><td>  Petrozavodsk <br><br></td><td>  15968 <br><br></td></tr><tr><td>  Ekaterinburg <br><br></td><td>  15808 <br><br></td></tr><tr><td>  Veliky Novgorod <br><br></td><td>  15744 <br><br></td></tr><tr><td>  Naberezhnye Chelny <br><br></td><td>  15680 <br><br></td></tr><tr><td>  Krasnodar <br><br></td><td>  15520 <br><br></td></tr><tr><td>  Nizhny Novgorod <br><br></td><td>  15488 <br><br></td></tr><tr><td>  Khimki <br><br></td><td>  15296 <br><br></td></tr><tr><td>  Tula <br><br></td><td>  15296 <br><br></td></tr><tr><td>  Novosibirsk <br><br></td><td>  15264 <br><br></td></tr><tr><td>  Tver <br><br></td><td>  15200 <br><br></td></tr><tr><td>  Miass <br><br></td><td>  15104 <br><br></td></tr><tr><td>  Ivanovo <br><br></td><td>  15072 <br><br></td></tr><tr><td>  Vologda <br><br></td><td>  15008 <br><br></td></tr><tr><td>  Zhukovsky <br><br></td><td>  14976 <br><br></td></tr><tr><td>  Kostroma <br><br></td><td>  14912 <br><br></td></tr><tr><td>  Samara <br><br></td><td>  14880 <br><br></td></tr><tr><td>  Korolev <br><br></td><td>  14784 <br><br></td></tr><tr><td>  Kaluga <br><br></td><td>  14720 <br><br></td></tr><tr><td>  Cherepovets <br><br></td><td>  14720 <br><br></td></tr><tr><td>  Sebastopol <br><br></td><td>  14688 <br><br></td></tr><tr><td>  Pushkino <br><br></td><td>  14528 <br><br></td></tr><tr><td>  Yaroslavl <br><br></td><td>  14464 <br><br></td></tr><tr><td>  Ulyanovsk <br><br></td><td>  14400 <br><br></td></tr><tr><td>  Rostov del Don <br><br></td><td>  14368 <br><br></td></tr><tr><td>  Domodedovo <br><br></td><td>  14304 <br><br></td></tr><tr><td>  Kamensk-Uralsky <br><br></td><td>  14208 <br><br></td></tr><tr><td>  Pskov <br><br></td><td>  14144 <br><br></td></tr><tr><td>  Yoshkar-Ola <br><br></td><td>  14080 <br><br></td></tr><tr><td>  Kerch <br><br></td><td>  14080 <br><br></td></tr><tr><td>  Murmansk <br><br></td><td>  13920 <br><br></td></tr><tr><td>  Togliatti <br><br></td><td>  13920 <br><br></td></tr><tr><td>  Vladimir <br><br></td><td>  13792 <br><br></td></tr><tr><td>  √Åguila <br><br></td><td>  13792 <br><br></td></tr><tr><td>  Syktyvkar <br><br></td><td>  13728 <br><br></td></tr><tr><td>  Dolgoprudny <br><br></td><td>  13696 <br><br></td></tr><tr><td>  Khanty-Mansiysk <br><br></td><td>  13664 <br><br></td></tr><tr><td>  Kaz√°n <br><br></td><td>  13600 <br><br></td></tr><tr><td>  Engels <br><br></td><td>  13440 <br><br></td></tr><tr><td>  Arkhangelsk <br><br></td><td>  13280 <br><br></td></tr><tr><td>  Bryansk <br><br></td><td>  13216 <br><br></td></tr><tr><td>  Omsk <br><br></td><td>  13120 <br><br></td></tr><tr><td>  Syzran <br><br></td><td>  13088 <br><br></td></tr><tr><td>  Krasnoyarsk <br><br></td><td>  13056 <br><br></td></tr><tr><td>  Shchelkovo <br><br></td><td>  12928 <br><br></td></tr><tr><td>  Penza <br><br></td><td>  12864 <br><br></td></tr><tr><td>  Cheli√°binsk <br><br></td><td>  12768 <br><br></td></tr><tr><td>  Cheboksary <br><br></td><td>  12768 <br><br></td></tr><tr><td>  Nizhny Tagil <br><br></td><td>  12672 <br><br></td></tr><tr><td>  Stavropol <br><br></td><td>  12672 <br><br></td></tr><tr><td>  Ramenskoye <br><br></td><td>  12640 <br><br></td></tr><tr><td>  Irkutsk <br><br></td><td>  12608 <br><br></td></tr><tr><td>  Angarsk <br><br></td><td>  12608 <br><br></td></tr><tr><td>  Tyumen <br><br></td><td>  12512 <br><br></td></tr><tr><td>  Odintsovo <br><br></td><td>  12512 <br><br></td></tr><tr><td>  Ufa <br><br></td><td>  12512 <br><br></td></tr><tr><td>  Magad√°n <br><br></td><td>  12512 <br><br></td></tr><tr><td>  Perm <br><br></td><td>  12448 <br><br></td></tr><tr><td>  Kirov <br><br></td><td>  12256 <br><br></td></tr><tr><td>  Nizhnekamsk <br><br></td><td>  12224 <br><br></td></tr><tr><td>  Makhachkala <br><br></td><td>  12096 <br><br></td></tr><tr><td>  Nizhnevartovsk <br><br></td><td>  11936 <br><br></td></tr><tr><td>  Kursk <br><br></td><td>  11904 <br><br></td></tr><tr><td>  Sochi <br><br></td><td>  11872 <br><br></td></tr><tr><td>  Tambov <br><br></td><td>  11840 <br><br></td></tr><tr><td>  Pyatigorsk <br><br></td><td>  11808 <br><br></td></tr><tr><td>  Volgodonsk <br><br></td><td>  11712 <br><br></td></tr><tr><td>  Riaz√°n <br><br></td><td>  11680 <br><br></td></tr><tr><td>  Saratov <br><br></td><td>  11616 <br><br></td></tr><tr><td>  Dzerzhinsk <br><br></td><td>  11456 <br><br></td></tr><tr><td>  Orenburg <br><br></td><td>  11456 <br><br></td></tr><tr><td>  Mont√≠culo <br><br></td><td>  11424 <br><br></td></tr><tr><td>  Volgogrado <br><br></td><td>  11264 <br><br></td></tr><tr><td>  Izhevsk <br><br></td><td>  11168 <br><br></td></tr><tr><td>  Cris√≥stomo <br><br></td><td>  11136 <br><br></td></tr><tr><td>  Lipetsk <br><br></td><td>  11072 <br><br></td></tr><tr><td>  Kislovodsk <br><br></td><td>  11072 <br><br></td></tr><tr><td>  Surgut <br><br></td><td>  11040 <br><br></td></tr><tr><td>  Magnitogorsk <br><br></td><td>  10912 <br><br></td></tr><tr><td>  Smolensk <br><br></td><td>  10784 <br><br></td></tr><tr><td>  Khabarovsk <br><br></td><td>  10752 <br><br></td></tr><tr><td>  Kopeysk <br><br></td><td>  10688 <br><br></td></tr><tr><td>  Maykop <br><br></td><td>  10656 <br><br></td></tr><tr><td>  Petropavlovsk-Kamchatsky <br><br></td><td>  10624 <br><br></td></tr><tr><td>  Taganrog <br><br></td><td>  10560 <br><br></td></tr><tr><td>  Barnaul <br><br></td><td>  10528 <br><br></td></tr><tr><td>  Sergiev Posad <br><br></td><td>  10368 <br><br></td></tr><tr><td>  Elista <br><br></td><td>  10304 <br><br></td></tr><tr><td>  Sterlitamak <br><br></td><td>  9920 <br><br></td></tr><tr><td>  Simferopol <br><br></td><td>  9824 <br><br></td></tr><tr><td>  Tomsk <br><br></td><td>  9760 <br><br></td></tr><tr><td>  Orekhovo-Zuevo <br><br></td><td>  9728 <br><br></td></tr><tr><td>  Astrakhan <br><br></td><td>  9664 <br><br></td></tr><tr><td>  Evpatoria <br><br></td><td>  9568 <br><br></td></tr><tr><td>  Noginsk <br><br></td><td>  9344 <br><br></td></tr><tr><td>  Chita <br><br></td><td>  9216 <br><br></td></tr><tr><td>  Belgorod <br><br></td><td>  9120 <br><br></td></tr><tr><td>  Biysk <br><br></td><td>  8928 <br><br></td></tr><tr><td>  Rybinsk <br><br></td><td>  8896 <br><br></td></tr><tr><td>  Severodvinsk <br><br></td><td>  8832 <br><br></td></tr><tr><td>  Vor√≥nezh <br><br></td><td>  8768 <br><br></td></tr><tr><td>  Blagoveshchensk <br><br></td><td>  8672 <br><br></td></tr><tr><td>  Novorossiysk <br><br></td><td>  8608 <br><br></td></tr><tr><td>  Ulan-Ude <br><br></td><td>  8576 <br><br></td></tr><tr><td>  Serpukhov <br><br></td><td>  8320 <br><br></td></tr><tr><td>  Komsomolsk-on-Amur <br><br></td><td>  8192 <br><br></td></tr><tr><td>  Abak√°n <br><br></td><td>  8128 <br><br></td></tr><tr><td>  Norilsk <br><br></td><td>  8096 <br><br></td></tr><tr><td>  Yuzhno-Sakhalinsk <br><br></td><td>  8032 <br><br></td></tr><tr><td>  Obninsk <br><br></td><td>  7904 <br><br></td></tr><tr><td>  Essentuki <br><br></td><td>  7712 <br><br></td></tr><tr><td>  Bataysk <br><br></td><td>  7648 <br><br></td></tr><tr><td>  Volzhsky <br><br></td><td>  7584 <br><br></td></tr><tr><td>  Novocherkassk <br><br></td><td>  7488 <br><br></td></tr><tr><td>  Berdsk <br><br></td><td>  7456 <br><br></td></tr><tr><td>  Arzamas <br><br></td><td>  7424 <br><br></td></tr><tr><td>  Pervouralsk <br><br></td><td>  7392 <br><br></td></tr><tr><td>  Kemerovo <br><br></td><td>  7104 <br><br></td></tr><tr><td>  Elektrostal <br><br></td><td>  6720 <br><br></td></tr><tr><td>  Derbent <br><br></td><td>  6592 <br><br></td></tr><tr><td>  Yakutsk <br><br></td><td>  6528 <br><br></td></tr><tr><td>  Murom <br><br></td><td>  6240 <br><br></td></tr><tr><td>  Nefteyugansk <br><br></td><td>  5792 <br><br></td></tr><tr><td>  Reutov <br><br></td><td>  5696 <br><br></td></tr><tr><td>  Birobidzhan <br><br></td><td>  5440 <br><br></td></tr><tr><td>  Novokuybyshevsk <br><br></td><td>  5248 <br><br></td></tr><tr><td>  Salekhard <br><br></td><td>  5184 <br><br></td></tr><tr><td>  Novokuznetsk <br><br></td><td>  5152 <br><br></td></tr><tr><td>  Novy Urengoy <br><br></td><td>  4736 <br><br></td></tr><tr><td>  Noyabrsk <br><br></td><td>  4416 <br><br></td></tr><tr><td>  Novocheboksarsk <br><br></td><td>  4352 <br><br></td></tr><tr><td>  Yelets <br><br></td><td>  3968 <br><br></td></tr><tr><td>  Kaspiysk <br><br></td><td>  3936 <br><br></td></tr><tr><td>  Stary Oskol <br><br></td><td>  3840 <br><br></td></tr><tr><td>  Artyom <br><br></td><td>  3744 <br><br></td></tr><tr><td>  Zheleznogorsk <br><br></td><td>  3584 <br><br></td></tr><tr><td>  Salavat <br><br></td><td>  3584 <br><br></td></tr><tr><td>  Prokopyevsk <br><br></td><td>  2816 <br><br></td></tr><tr><td>  Gorno-Altaysk <br><br></td><td>  2464 <br><br></td></tr></tbody></table><br></div></div><br><h2>  Preparando un conjunto de datos para el entrenamiento </h2><br>  Y entonces, el conjunto de datos est√° ensamblado, ¬øc√≥mo ahora, al tener una foto de la secci√≥n de la carretera y los objetos que lo rodean, descubrir la calidad del asfalto que se muestra en √©l?  Decid√≠ cortar una parte de la foto que mide 350 * 244 p√≠xeles en el centro de la foto original, justo debajo del centro.  Luego reduzca la pieza cortada horizontalmente a un tama√±o de 244 p√≠xeles.  La imagen resultante (tama√±o 244 * 244) ser√° la entrada para el codificador convolucional: <br><br><img src="https://habrastorage.org/webt/ya/tt/s8/yatts8qbzq9ddnxql_cydrmfeug.png"><br><br>  Para comprender mejor con qu√© datos trato, las primeras 2000 fotos que marqu√© yo mismo, el resto de las fotos fueron marcadas por empleados de Yandex.Tolki.  Ante ellos plante√© una pregunta con la siguiente redacci√≥n. <br><br>  Indique qu√© superficie de la carretera ve en la foto: <br><br><ol><li>  Suelo / Escombros </li><li>  Adoquines, tejas, pavimento </li><li>  Rieles, v√≠as f√©rreas </li><li>  Agua, grandes charcos </li><li>  Asfalto </li><li>  No hay camino en la foto / Objetos extra√±os / La cobertura no es visible debido a los autom√≥viles </li></ol><br>  Si el artista eligi√≥ "Asphalt", aparecer√° un men√∫ que ofrece evaluar su calidad: <br><br><ol><li>  Excelente cobertura </li><li>  Grietas simples leves / baches simples poco profundos </li><li>  Grietas grandes / grietas de rejilla / baches menores simples </li><li>  Grandes baches / baches profundos / revestimiento destruido </li></ol><br>  Como mostraron las ejecuciones de prueba de las tareas, los ejecutantes de Y. Toloki no difieren en la integridad del trabajo: accidentalmente hacen clic en los campos con el mouse y consideran la tarea completada.  Tuve que agregar preguntas de control (en la tarea hab√≠a 46 fotograf√≠as, 12 de las cuales eran de control) y permitir la aceptaci√≥n tard√≠a.  Como preguntas de control, utilic√© esas im√°genes que marqu√© yo mismo.  Automatic√© la aceptaci√≥n tard√≠a: Y. Toloka le permite cargar los resultados del trabajo en un archivo CSV y cargar los resultados de la verificaci√≥n de las respuestas.  La verificaci√≥n de las respuestas funcion√≥ de la siguiente manera: si la tarea contiene m√°s del 5% de respuestas incorrectas para controlar las preguntas, entonces se considera incompleta.  Adem√°s, si el contratista indic√≥ una respuesta que es l√≥gicamente cercana a verdadera, entonces su respuesta se considera correcta. <br>  Como resultado, obtuve unas 30 mil fotos etiquetadas, que decid√≠ distribuir en tres clases para capacitaci√≥n: <br><br><ul><li>  "Bueno": fotos etiquetadas como "Asfalto: revestimiento excelente" y "Asfalto: grietas simples menores" </li><li>  "Medio" - fotos con la etiqueta "Adoquines, azulejos, pavimento", "rieles, v√≠as de ferrocarril" y "Asfalto: grietas grandes / grietas en la rejilla / baches menores" </li><li>  ‚ÄúGrande‚Äù: fotos etiquetadas como ‚ÄúSuelo / piedra triturada‚Äù, ‚ÄúAgua, charcos grandes‚Äù y ‚ÄúAsfalto: una gran cantidad de baches / baches profundos / pavimento destruido‚Äù </li><li>  Fotos etiquetadas "No hay camino en la foto / Objetos extra√±os / La cobertura no es visible debido a los autom√≥viles" hab√≠a muy pocos (22 piezas) y los exclu√≠ de trabajos posteriores </li></ul><br><h2>  Desarrollo y formaci√≥n de clasificadores. </h2><br>  Entonces, los datos se recopilan y etiquetan, procedemos al desarrollo del clasificador.  Por lo general, para las tareas de clasificaci√≥n de im√°genes, especialmente cuando se entrena en conjuntos de datos peque√±os, se usa un codificador convolucional listo para usar, a cuya salida se conecta un nuevo clasificador.  Decid√≠ usar un clasificador simple sin una capa oculta, una capa de entrada de tama√±o 128 y una capa de salida de tama√±o 3. Decid√≠ usar varias opciones preparadas formadas en ImageNet como codificadores: <br><br><ul><li>  Xception </li><li>  Resnet </li><li>  Inicio </li><li>  Vgg16 </li><li>  Densenet121 </li><li>  Mobilenet </li></ul><br>  Aqu√≠ est√° la funci√≥n que crea el modelo Keras con el codificador dado: <br><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(typeModel)</span></span></span><span class="hljs-function">:</span></span> conv_base = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(typeModel == <span class="hljs-string"><span class="hljs-string">"nasnet"</span></span>): conv_base = keras.applications.nasnet.NASNetMobile(include_top=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, input_shape=(<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), weights=<span class="hljs-string"><span class="hljs-string">'imagenet'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(typeModel == <span class="hljs-string"><span class="hljs-string">"xception"</span></span>): conv_base = keras.applications.xception.Xception(include_top=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, input_shape=(<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), weights=<span class="hljs-string"><span class="hljs-string">'imagenet'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(typeModel == <span class="hljs-string"><span class="hljs-string">"resnet"</span></span>): conv_base = keras.applications.resnet50.ResNet50(include_top=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, input_shape=(<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), weights=<span class="hljs-string"><span class="hljs-string">'imagenet'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(typeModel == <span class="hljs-string"><span class="hljs-string">"inception"</span></span>): conv_base = keras.applications.inception_v3.InceptionV3(include_top=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, input_shape=(<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), weights=<span class="hljs-string"><span class="hljs-string">'imagenet'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(typeModel == <span class="hljs-string"><span class="hljs-string">"densenet121"</span></span>): conv_base = keras.applications.densenet.DenseNet121(include_top=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, input_shape=(<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), weights=<span class="hljs-string"><span class="hljs-string">'imagenet'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(typeModel == <span class="hljs-string"><span class="hljs-string">"mobilenet"</span></span>): conv_base = keras.applications.mobilenet_v2.MobileNetV2(include_top=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, input_shape=(<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), weights=<span class="hljs-string"><span class="hljs-string">'imagenet'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(typeModel == <span class="hljs-string"><span class="hljs-string">"vgg16"</span></span>): conv_base = keras.applications.vgg16.VGG16(include_top=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, input_shape=(<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">224</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), weights=<span class="hljs-string"><span class="hljs-string">'imagenet'</span></span>) conv_base.trainable = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> model = Sequential() model.add(conv_base) model.add(Flatten()) model.add(Dense(<span class="hljs-number"><span class="hljs-number">128</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'relu'</span></span>, kernel_regularizer=regularizers.l2(<span class="hljs-number"><span class="hljs-number">0.0002</span></span>))) model.add(Dropout(<span class="hljs-number"><span class="hljs-number">0.3</span></span>)) model.add(Dense(<span class="hljs-number"><span class="hljs-number">3</span></span>, activation=<span class="hljs-string"><span class="hljs-string">'softmax'</span></span>)) model.compile(optimizer=keras.optimizers.Adam(lr=<span class="hljs-number"><span class="hljs-number">1e-4</span></span>), loss=<span class="hljs-string"><span class="hljs-string">'binary_crossentropy'</span></span>, metrics=[<span class="hljs-string"><span class="hljs-string">'accuracy'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model</code> </pre> <br>  Para el entrenamiento, utilic√© un generador con aumento (dado que las capacidades del aumento incorporado en Keras me parec√≠an insuficientes, utilic√© la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Augmentor</a> ): <br><br><ul><li>  Pendientes </li><li>  Distorsi√≥n aleatoria </li><li>  Vueltas </li><li>  Cambio de color </li><li>  Turnos </li><li>  Cambiar contraste y brillo </li><li>  Agregar ruido aleatorio </li><li>  Recortar </li></ul><br>  Despu√©s del aumento, las fotos se ve√≠an as√≠: <br><br><img src="https://habrastorage.org/webt/yc/qy/uh/ycqyuh1no4h57-or062y3epc4yy.png"><br><br>  C√≥digo generador: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_datagen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> train_dir=<span class="hljs-string"><span class="hljs-string">'~/data/train_img'</span></span> test_dir=<span class="hljs-string"><span class="hljs-string">'~/data/test_img'</span></span> testDataGen = ImageDataGenerator(rescale=<span class="hljs-number"><span class="hljs-number">1.</span></span> / <span class="hljs-number"><span class="hljs-number">255</span></span>) train_generator = datagen.flow_from_directory( train_dir, target_size=img_size, batch_size=<span class="hljs-number"><span class="hljs-number">16</span></span>, class_mode=<span class="hljs-string"><span class="hljs-string">'categorical'</span></span>) p = Augmentor.Pipeline(train_dir) p.skew(probability=<span class="hljs-number"><span class="hljs-number">0.9</span></span>) p.random_distortion(probability=<span class="hljs-number"><span class="hljs-number">0.9</span></span>,grid_width=<span class="hljs-number"><span class="hljs-number">3</span></span>,grid_height=<span class="hljs-number"><span class="hljs-number">3</span></span>,magnitude=<span class="hljs-number"><span class="hljs-number">8</span></span>) p.rotate(probability=<span class="hljs-number"><span class="hljs-number">0.9</span></span>, max_left_rotation=<span class="hljs-number"><span class="hljs-number">5</span></span>, max_right_rotation=<span class="hljs-number"><span class="hljs-number">5</span></span>) p.random_color(probability=<span class="hljs-number"><span class="hljs-number">0.7</span></span>, min_factor=<span class="hljs-number"><span class="hljs-number">0.8</span></span>, max_factor=<span class="hljs-number"><span class="hljs-number">1</span></span>) p.flip_left_right(probability=<span class="hljs-number"><span class="hljs-number">0.7</span></span>) p.random_brightness(probability=<span class="hljs-number"><span class="hljs-number">0.7</span></span>, min_factor=<span class="hljs-number"><span class="hljs-number">0.8</span></span>, max_factor=<span class="hljs-number"><span class="hljs-number">1.2</span></span>) p.random_contrast(probability=<span class="hljs-number"><span class="hljs-number">0.5</span></span>, min_factor=<span class="hljs-number"><span class="hljs-number">0.9</span></span>, max_factor=<span class="hljs-number"><span class="hljs-number">1</span></span>) p.random_erasing(probability=<span class="hljs-number"><span class="hljs-number">1</span></span>,rectangle_area=<span class="hljs-number"><span class="hljs-number">0.2</span></span>) p.crop_by_size(probability=<span class="hljs-number"><span class="hljs-number">1</span></span>, width=<span class="hljs-number"><span class="hljs-number">244</span></span>, height=<span class="hljs-number"><span class="hljs-number">244</span></span>, centre=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) train_generator = keras_generator(p,batch_size=<span class="hljs-number"><span class="hljs-number">16</span></span>) test_generator = testDataGen.flow_from_directory( test_dir, target_size=img_size, batch_size=<span class="hljs-number"><span class="hljs-number">32</span></span>, class_mode=<span class="hljs-string"><span class="hljs-string">'categorical'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (train_generator, test_generator)</code> </pre> <br>  El c√≥digo muestra que el aumento no se usa para los datos de prueba. <br><br>  Con un generador sintonizado, puede comenzar a entrenar el modelo, lo llevaremos a cabo en dos etapas: primero, solo entrene nuestro clasificador, luego todo el modelo. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evalModelstep1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(typeModel)</span></span></span><span class="hljs-function">:</span></span> K.clear_session() gc.collect() model=createModel(typeModel) traiGen,testGen=getDatagen() model.fit_generator(generator=traiGen, epochs=<span class="hljs-number"><span class="hljs-number">4</span></span>, steps_per_epoch=<span class="hljs-number"><span class="hljs-number">30000</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span>, validation_steps=len(testGen), validation_data=testGen, ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evalModelstep2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(model)</span></span></span><span class="hljs-function">:</span></span> early_stopping_callback = EarlyStopping(monitor=<span class="hljs-string"><span class="hljs-string">'val_loss'</span></span>, patience=<span class="hljs-number"><span class="hljs-number">3</span></span>) model.layers[<span class="hljs-number"><span class="hljs-number">0</span></span>].trainable=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> model.trainable=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> model.compile(optimizer=keras.optimizers.Adam(lr=<span class="hljs-number"><span class="hljs-number">1e-5</span></span>), loss=<span class="hljs-string"><span class="hljs-string">'binary_crossentropy'</span></span>, metrics=[<span class="hljs-string"><span class="hljs-string">'accuracy'</span></span>]) traiGen,testGen=getDatagen() model.fit_generator(generator=traiGen, epochs=<span class="hljs-number"><span class="hljs-number">25</span></span>, steps_per_epoch=<span class="hljs-number"><span class="hljs-number">30000</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span>, validation_steps=len(testGen), validation_data=testGen, callbacks=[early_stopping_callback] ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">full_fit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> model_names=[ <span class="hljs-string"><span class="hljs-string">"xception"</span></span>, <span class="hljs-string"><span class="hljs-string">"resnet"</span></span>, <span class="hljs-string"><span class="hljs-string">"inception"</span></span>, <span class="hljs-string"><span class="hljs-string">"vgg16"</span></span>, <span class="hljs-string"><span class="hljs-string">"densenet121"</span></span>, <span class="hljs-string"><span class="hljs-string">"mobilenet"</span></span> ] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> model_name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> model_names: print(<span class="hljs-string"><span class="hljs-string">"#########################################"</span></span>) print(<span class="hljs-string"><span class="hljs-string">"#########################################"</span></span>) print(<span class="hljs-string"><span class="hljs-string">"#########################################"</span></span>) print(model_name) print(<span class="hljs-string"><span class="hljs-string">"#########################################"</span></span>) print(<span class="hljs-string"><span class="hljs-string">"#########################################"</span></span>) print(<span class="hljs-string"><span class="hljs-string">"#########################################"</span></span>) model = evalModelstep1(model_name) model = evalModelstep2(model) model.save(<span class="hljs-string"><span class="hljs-string">"~/data/models/model_new_"</span></span>+str(model_name)+<span class="hljs-string"><span class="hljs-string">".h5"</span></span>)</code> </pre><br>  Llame a full_fit () y espere.  Estamos esperando por mucho tiempo. <br><br>  Como resultado, tendremos seis modelos entrenados, verificaremos la precisi√≥n de estos modelos en una parte separada de los datos etiquetados; Recib√≠ lo siguiente: <br><br><table><tbody><tr><td><p>  Nombre del modelo </p><br></td><td><p>  Precisi√≥n% </p><br></td></tr><tr><td><p>  Xception </p><br></td><td><p>  87,3 </p><br></td></tr><tr><td><p>  Resnet </p><br></td><td><p>  90,8 </p><br></td></tr><tr><td><p>  Inicio </p><br></td><td><p>  90,2 </p><br></td></tr><tr><td><p>  Vgg16 </p><br></td><td><p>  89,2 </p><br></td></tr><tr><td><p>  Densenet121 </p><br></td><td><p>  90,6 </p><br></td></tr><tr><td><p>  Mobilenet </p><br></td><td><p>  86,5 </p><br></td></tr></tbody></table><br>  En general, no mucho, pero con una muestra de entrenamiento tan peque√±a, uno no puede esperar m√°s.  Para aumentar ligeramente la precisi√≥n, combin√© las salidas de los modelos promediando: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_meta_model</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> model_names=[ <span class="hljs-string"><span class="hljs-string">"xception"</span></span>, <span class="hljs-string"><span class="hljs-string">"resnet"</span></span>, <span class="hljs-string"><span class="hljs-string">"inception"</span></span>, <span class="hljs-string"><span class="hljs-string">"vgg16"</span></span>, <span class="hljs-string"><span class="hljs-string">"densenet121"</span></span>, <span class="hljs-string"><span class="hljs-string">"mobilenet"</span></span> ] model_input = Input(shape=(<span class="hljs-number"><span class="hljs-number">244</span></span>,<span class="hljs-number"><span class="hljs-number">244</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)) submodels=[] i=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> model_name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> model_names: filename= <span class="hljs-string"><span class="hljs-string">"~/data/models/model_new_"</span></span>+str(model_name)+<span class="hljs-string"><span class="hljs-string">".h5"</span></span> submodel = keras.models.load_model(filename) submodel.name = model_name+<span class="hljs-string"><span class="hljs-string">"_"</span></span>+str(i) i+=<span class="hljs-number"><span class="hljs-number">1</span></span> submodels.append(submodel(model_input)) out=average(submodels) model = Model(inputs = model_input,outputs=out) model.compile(optimizer=keras.optimizers.Adam(lr=<span class="hljs-number"><span class="hljs-number">1e-4</span></span>), loss=<span class="hljs-string"><span class="hljs-string">'binary_crossentropy'</span></span>, metrics=[<span class="hljs-string"><span class="hljs-string">'accuracy'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> model</code> </pre><br>  La precisi√≥n resultante fue del 91,3%.  En este resultado, decid√≠ parar. <br><br><h2>  Usando clasificador </h2><br>  Finalmente, el clasificador est√° listo y se puede poner en acci√≥n.  Preparo los datos de entrada y ejecuto el clasificador: se ha procesado un poco m√°s de un d√≠a y 1,7 millones de fotos.  Ahora la parte divertida son los resultados.  Inmediatamente traiga las primeras y √∫ltimas diez ciudades en el n√∫mero relativo de carreteras con buena cobertura: <br><br><img src="https://habrastorage.org/webt/mf/vl/xu/mfvlxuvjesvy2leqhplfnik4mm8.png"><br><br><div class="spoiler">  <b class="spoiler_title">Mesa completa (imagen en la que se puede hacer clic)</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9d8/4fd/38c/9d84fd38c07014be4f68499489ce19bc.png"></a> <br></div></div><br><br>  Y aqu√≠ est√° la calificaci√≥n de la calidad del camino por temas federales: <br><br><img src="https://habrastorage.org/webt/ih/kq/xq/ihkqxqskkfcfib90gc68ivmxo2i.png"><br><br><div class="spoiler">  <b class="spoiler_title">Mesa completa</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/md/6j/-m/md6j-mv6jt27zsxgu8wkd2pimmy.png"><br></div></div><br>  Calificaci√≥n por distritos federales: <br><br><img src="https://habrastorage.org/webt/ro/qq/ry/roqqryu12toajz6cgeals3vzuxc.png"><br><br>  Distribuci√≥n de la calidad de la carretera en Rusia en su conjunto: <br><br><img src="https://habrastorage.org/webt/ow/rt/h1/owrth1ro6yu3svxdpwiyfedzeby.png"><br><br>  Bueno, eso es todo, todos pueden sacar conclusiones por s√≠ mismos. <br><br>  Finalmente, dar√© las mejores fotos en cada categor√≠a (que recibi√≥ el valor m√°ximo en su clase): <br><br><div class="spoiler">  <b class="spoiler_title">Imagen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/k9/yf/dl/k9yfdlmiuynquyqhoxjuowvzcsu.jpeg"><br></div></div><br><br>  PD: En los comentarios, con bastante raz√≥n se√±al√≥ la falta de estad√≠sticas sobre los a√±os de recepci√≥n de las fotograf√≠as.  Corrijo y doy una tabla: <br><table><tbody><tr><td><p>  A√±o </p><br></td><td><p>  N√∫mero de fotos, piezas </p><br></td></tr><tr><td>  2008 </td><td>  37 </td></tr><tr><td>  2009 </td><td>  13 </td></tr><tr><td>  2010 </td><td>  157030 </td></tr><tr><td>  2011 </td><td>  60724 </td></tr><tr><td>  2012 </td><td>  42387 </td></tr><tr><td>  2013 </td><td>  12148 <br><br></td></tr><tr><td>  2014 </td><td>  141021 <br><br></td></tr><tr><td>  2015 </td><td>  46143 <br><br></td></tr><tr><td>  2016 </td><td>  410385 <br><br></td></tr><tr><td>  2017 </td><td>  324279 <br><br></td></tr><tr><td>  2018 </td><td>  581961 <br><br></td></tr></tbody></table></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/437542/">https://habr.com/ru/post/437542/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../437532/index.html">La industria robomobile finalmente se est√° volviendo m√°s realista</a></li>
<li><a href="../437534/index.html">C√≥mo se implementa Retentioneering en la aplicaci√≥n en el aire</a></li>
<li><a href="../437536/index.html">Lo mejor del mundo de Angular para la semana - Digest No. 1 (18 de enero - 25 de enero)</a></li>
<li><a href="../437538/index.html">La red neuronal AlphaStar venci√≥ a los profesionales StarCraft II con un puntaje de 10‚àí1</a></li>
<li><a href="../437540/index.html">C√≥mo gestionar conflictos de equipo</a></li>
<li><a href="../437544/index.html">¬øCu√°l es la diferencia entre las pantallas de libros electr√≥nicos y los tel√©fonos inteligentes y tabletas?</a></li>
<li><a href="../437546/index.html">M√°quina Linux en un dominio de Windows AD usando sssd y krb5</a></li>
<li><a href="../437548/index.html">No solo uBlock Origin sufrir√° nuevas API en Chromium, sino tambi√©n otras extensiones</a></li>
<li><a href="../437550/index.html">Lectura de fin de semana: 10 materiales de vinilo: desde la producci√≥n hasta la escucha y el cuidado en el hogar</a></li>
<li><a href="../437552/index.html">Excursi√≥n a la producci√≥n de Promobot. Entrevista con CTO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>