<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧓🏼 👩🏼‍⚖️ 👩‍👦‍👦 Dies ist die Norm - 2: wie normale Karten gebacken werden 🎅🏾 👩🏽‍⚕️ 👸🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist der zweite Teil einer Reihe von Tutorials zu normalen Karten. Der erste Teil ist hier , aber um den zweiten Teil zu verstehen, muss er nicht ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dies ist die Norm - 2: wie normale Karten gebacken werden</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481704/">  Dies ist der zweite Teil einer Reihe von Tutorials zu normalen Karten.  Der erste Teil ist <a href="https://habr.com/ru/post/481480/">hier</a> , aber um den zweiten Teil zu verstehen, muss er nicht gelesen werden. <br><br>  Das allgemeine Prinzip beim Backen einer normalen Karte ist relativ einfach: Wir haben ein Lowpoly-Modell mit UV-Koordinaten und ein Highpoly-Modell;  Wir übertragen die normalen Informationen von HighPoly nach LowPoly.  Dank dessen reflektiert lowpoly das Licht genauso wie highpoly. <br><br>  Während dieses Vorgangs sendet das Backprogramm im Wesentlichen Strahlen aus dem Low-Poly aus, die den Normalen der Eckpunkte folgen und nach High-Poly suchen.  Dies ist der wichtigste Aspekt beim Erstellen normaler Karten, und die meisten Probleme, die beim Arbeiten mit normalen Karten auftreten, hängen damit zusammen. <br><br>  Wenn Sie die Normalen der Eckpunkte des Lowpoly-Modells nicht kontrollieren, verlieren Sie die Kontrolle über die normale Karte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4c/2ef/788/d4c2ef788f47c39a1a9af5075fee4045.jpg" alt="Bild"></div><a name="habracut"></a><br><h2>  Schlechte Korrelation von normalen Karten </h2><br>  Um die Glättung des Lowpoly-Modells zu steuern, müssen die Scheitelpunkte (um starre Kanten zu erstellen) oder die gemittelten Scheitelpunkte (um glatte Kanten zu erstellen) normal geteilt werden. <br><br>  Wie sich herausstellte, verwenden nicht alle 3D-Programme die gleichen Berechnungen, um Scheitelpunktnormalen zu mitteln.  Dies bedeutet, dass in verschiedenen 3D-Editoren das Lowpoly-Modell anders aussieht und seine Scheitelpunktnormalen leicht in unterschiedliche Richtungen weisen.  In der Regel ist dies kein großes Problem, da diese Abweichungen sehr gering sind, sich jedoch auf das Erscheinungsbild des Modells auswirken.  Diese Unterschiede werden bei der Verwendung von normalen Karten noch verstärkt, da normale Karten die Normalen von LowPoly-Modellen ändern, die in verschiedenen Programmen unterschiedlich sind. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/327/02a/ab5/32702aab582f315e26e2560cf332395b.gif" alt="Bild"></div><br>  Die 3D-Grafikindustrie arbeitet daran, dieses Problem zu beheben.  Kürzlich ist ein Standard namens Mikk Space erschienen.  Dies ist eine Methode zur Berechnung von Scheitelpunktnormalen, mit der alle 3D-Anwendungen die Scheitelpunktnormalen in allen 3D-Programmen gleich aussehen lassen können.  Es ist jedoch zu beachten, dass es bisher nicht in allen 3D-Anwendungen verwendet wird. <br><br>  Eine andere Möglichkeit, diesen Effekt zu verringern, besteht darin, sich beim Backen nicht sehr auf normale Karten zu verlassen.  Versuchen Sie, das Low-Poly-Modell eher wie ein High-Poly-Modell auszusehen, und verwenden Sie steifere Kanten auf ebenen Flächen.  In diesem Fall muss die normale Karte nicht alle Arbeiten ausführen, und kleine Abweichungen werden weniger auffällig. <br><br><h2>  Details der normalen Karte abschrägen </h2><br>  Wenn der Computer die Richtung der Normalen für die Normalen der Scheitelpunkte des Lowpoly-Modells mittelt, können große Änderungen der Oberflächenwinkel die Normalen des Lowpoly-Modells "quetschen" und sie sind nicht mehr senkrecht zur Lowpoly-Oberfläche. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterstützt kein HTML5-Video. <source src="https://i.gyazo.com/50bd7d9f5f977216b2864fbf950c901f.mp4" type="video/mp4"></video></div></div></div><br>  Da das normale Backprogramm bei der Suche nach Teilen mit hohem Polyamidanteil die normalen Richtungen mit niedrigem Polyamidanteil verwendet und diese Richtungen abgeschrägt sind, sehen sie auf der normalen Karte abgeschrägt aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf8/e98/422/bf8e98422aec69790267c3c52fdfbcef.jpg" alt="Bild"></div><br>  Dies ist ein sehr verbreitetes Problem, für das mehrere Lösungen gefunden wurden.  Es gibt keine ideale Lösung, alles hängt von der Geometrie ab. <br><br>  1. In einigen 3D-Backprogrammen besteht die Möglichkeit, diese Teile mit einer vorübergehenden Änderung der Low-Poly-Normalen erneut zu backen, so dass sie ohne Abschrägung backen.  Eine solche Option gibt es zum Beispiel in der Marmoset Toolbag.  Ein Benutzer von Reddit mit dem Spitznamen Tanagashi erklärte mir freundlicherweise, dass einige Programme wie xNormal LowPoly tessellieren können, um neue Scheitelpunkte hinzuzufügen und Normalen senkrecht zur LowPoly-Oberfläche zu erstellen, die Normalen-Map im Objektraum zu backen und sie dann basierend auf den ursprünglichen LowPoly-Normalen in Tangentenraum umzuwandeln.  Unter Verwendung der neuen normalen Karte kann das Programm Masken erstellen, um zu steuern, wo die ursprüngliche normale Karte verwendet und wo sie aus dem tessellierten Lowpoly-Modell erstellt wird. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a39/2fd/517/a392fd51788c92d06501493d0e949c2e.gif" alt="Bild"></div><br>  2. Durch Hinzufügen von Scheitelpunkten wird der Übergang zwischen den Normalen der Scheitelpunkte weniger schräg, da ein Winkel von 90 ° in mehrere kleinere Grad unterteilt wird, wodurch der zweite Übergang weniger schräg wird.  Dies erhöht natürlich die Anzahl der Polygone. Wenn Sie Geometrie hinzufügen, empfehle ich, diese Add-Ons zu verwenden, um eine interessantere Modellsilhouette zu erstellen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/375/6f2/34f/3756f234f4c52de7576959e762e96f94.jpg" alt="Bild"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/89a/841/21a89a8412a3e56f57d12a259c4773f5.jpg" alt="Bild"></div><br>  3. Trennung der Durchschnittsnormalen der Scheitelpunkte (Steifwerden der Kante / Verwendung separater Glättungsgruppen): Auf diese Weise weist jeder Scheitelpunkt mehrere Normalen auf, von denen jede senkrecht zur Lowpoly-Oberfläche verläuft.  Vergessen Sie nicht, dass ein 3D-Programm mit einer geteilten Scheitelpunktnormalen tatsächlich ein Duplikat des Scheitelpunkts erstellt, wodurch die Anzahl der Scheitelpunkte erhöht und die Leistung leicht verringert wird.  Darüber hinaus verursachen steife Rippen, wie wir später sehen werden, das Problem der „schwarzen Rippen“. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/339/67d/6a1/33967d6a1ac517cbd1429962fe35d44b.jpg" alt="Bild"></div><br>  4. Sie können die Modellnormalen ändern, um die Low-Poly-Normalen so zu biegen, dass sie senkrecht zu den High-Poly-Normalen sind.  Denken Sie daran, dass nicht alle Programme die Verwendung geänderter Normalen zulassen (in Zbrush gibt es nur Durchschnittsnormalen, OBJ-Dateien und veraltete FBX-Dateien enthalten keine speziellen Informationen zu Normalen).  Tatsächlich gibt es zwei Möglichkeiten, die Normalen zu ändern: <br><br><ul><li>  Gewichtete Normalen: Dies ist eine automatische Methode, die den durchschnittlichen Scheitelpunktnormalen ähnelt.  Die Idee ist, dass beim Mitteln der Normalen der Eckpunkte nicht alle Flächen die gleiche Stärke haben sollten: Große Flächen ziehen die Normalen der Eckpunkte stärker an sich als kleine Flächen.  Aus diesem Grund erhalten große Gesichter, die normalerweise wichtiger sind, eine bessere Detailprojektion.  Dies funktioniert besonders gut bei Highpoly-Platten. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5e/8a3/5d2/f5e8a35d20a5c86a39cafbd3b8c47fec.jpg" alt="Bild"></div></li><li>  Benutzerdefinierte Normalen: Mit den Werkzeugen des 3D-Editors können Low-Poly-Normalen gebogen werden.  Dies ist eine relativ neue Idee, für deren Implementierung es keine standardisierten Tools gibt.  Denken Sie daran, dass Biegungsnormalen an anderen Stellen des Modells sehr seltsame unerwünschte Schattierungen verursachen können. Daher wird diese Technik normalerweise mit Schrägen kombiniert.  Einige Leute nennen diese Technik "Midpoly-Modellierung". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/1be/881/1fa1be881824a7e856c436d010f60900.jpg" alt="Bild"></div></li></ul><br><h2>  Käfig / Backstrecke </h2><br>  Standardmäßig legen von einer Lowpoly-Oberfläche emittierte Strahlen eine begrenzte Entfernung zurück, so dass das Lowpoly keine normalen Informationen von entfernten Teilen des Highpoly empfängt.  Diese Distanz wird üblicherweise als "Frontal / Rear-Distanz" bezeichnet, da die Strahlen in Richtung nach innen, nach außen oder in beide Richtungen emittiert werden können.  In der folgenden Abbildung ist dieser Abstand rot dargestellt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72c/487/534/72c48753443123074b3b0170ee04e7e8.jpg" alt="Bild"></div><br>  Einige 3D-Anwendungen (wie 3ds Max) ermöglichen auch die Verwendung eines Käfigs.  Cage ist eine „Kopie“ eines Lowpoly-Modells, das so modifiziert werden kann, dass es idealerweise ein Highpoly enthält.  In einigen Fällen (nicht immer) können wir die Richtung der Strahlen ändern, ohne die Anfangsnormalen der Low-Poly-Vertices zu ändern.  Dies kann dazu beitragen, die besten Grenzfälle für das Backen zu finden und Fasen zu vermeiden.  Wir müssen uns jedoch daran erinnern, dass wir beim Backen nicht die Richtung der Scheitelpunkte der Normalen verwenden, sondern am Ende die Normalen-Map verwenden, um die wahren Lowpoly-Normalen zu ändern, sodass das Ergebnis möglicherweise seltsam aussieht. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/704/4ce/7b5/7044ce7b56b34b72f6e862383627a421.jpg" alt="Bild"></div><br><h2>  Rippnähte </h2><br>  Wie wir gesehen haben, teilt das Backprogramm die Scheitelpunktnormale zwischen zwei Flächen auf, wenn es ein Modell mit starren Kanten gibt (einige Kanten haben mehr als eine Glättungsgruppe oder einige Kanten sind als "hart" markiert).  Diese Operation hat gute und schlechte Seiten. <br><br>  Das Gute daran ist, dass die Normalen nicht gemittelt werden, sodass die Normalen weniger verzerrt sind: Die Normalen der Scheitelpunkte verlaufen vollständig senkrecht zur Lowpoly-Oberfläche.  Es kann Lowpoly auch schöner machen, wenn es Kanten in spitzen Winkeln hat, die für steife Kanten besser geeignet sind. <br><br>  Das Schlimme ist, dass es jetzt eine Lücke zwischen Normalen gibt, und dies kann bedeuten, dass wir Informationen verlieren können, wenn LowPoly eine Lücke in Normalen hat, in denen es keine HighPoly-Details bekommen kann.  Darüber hinaus können sich einige Teile der Lowpoly-Projektion schneiden und um denselben UV-Raum konkurrieren.  Beide Effekte erzeugen eine Naht entlang der Rippe, deren Sichtbarkeit vom Motor abhängt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/097/f20/b68/097f20b68dc98a4bcef6c786e031f59e.jpg" alt="Bild"></div><br>  Dies kann jedoch mit einem einfachen Trick leicht vermieden werden: Wenn zwei Gesichter durch eine harte Kante getrennt sind, müssen Sie jedes Gesicht auf einer separaten UV-Insel platzieren, wobei zwischen ihnen ein Abstand verbleibt.  Um die Auswirkung des Problems der geteilten Normalen zu verringern, versuchen Backprogramme ein wenig zusätzliche Informationen außerhalb der Eckpunkte der Normalen, aber dafür benötigen sie zusätzlichen Platz auf der Textur.  Wenn die durch eine harte Kante getrennten Flächen im UV-Bereich verbunden sind, kann diese zusätzliche Information nicht in der Textur gespeichert werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/692/cdc/849/692cdc849e49cfb24b86ecce53f73f53.jpg" alt="Bild"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cc4/f72/eb6/cc4f72eb6888c6711f16980f9d79edf4.jpg" alt="Bild"></div><br><h2>  Fazit </h2><br>  Nachdem ich das Low-Poly-Modell vorbereitet und dem High-Poly-Modell so nahe wie möglich gebracht habe, beginne ich mit dem Glätten vor dem UV.  Ich stelle die Glättung für LowPoly ein (wenn das Objekt organisch ist, beginne ich mit einem vollständig geglätteten Modell, wenn es eine feste Oberfläche hat, stelle ich den Glättungswinkel auf 30-60º ein und passe die Glättung an, bis das Ergebnis gut aussieht). <br><br>  Nachdem ich das Glätten des Modells vorbereitet habe, beginne ich mit der UV-Bearbeitung und teile alle harten Kanten in separate UV-Inseln auf (um Nähte an den Kanten zu vermeiden). <br><br>  Wenn es Fehler mit Abschrägungen gibt, füge ich zusätzliche Kanten hinzu (normalerweise mache ich Abschrägungen, um die Rundheit der Silhouette zu erhalten).  Dies funktioniert für die meisten meiner Modelle, aber ich kann Fehler mit Schrägen korrigieren, wenn ich den Marmoset Toolbag zum Backen oder meine eigenen / gewichteten Normalen verwende. <br><br>  Bei Projektionsfehlern ändere ich den Backabstand / Käfig, modifiziere das Lopoly / Highpoly so, dass sie sich besser zum Backen eignen, oder lösche normale Karten auf separaten sehr starren Teilen, zum Beispiel an den Enden von Kegeln. <br><br>  Der nächste Artikel wird eine Anleitung zum Beheben von Problemen beim Backen normaler Karten und zum Erörtern der häufigsten Probleme und Lösungen enthalten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481704/">https://habr.com/ru/post/de481704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481694/index.html">Mein Weg zur Partitionierung in PostgreSQL</a></li>
<li><a href="../de481696/index.html">Regelwächter: Dynamische Prüfungen für Go</a></li>
<li><a href="../de481698/index.html">WebRTC-Streaming in und um die virtuelle Realität</a></li>
<li><a href="../de481700/index.html">Über eine Tante</a></li>
<li><a href="../de481702/index.html">Vom Toaster bis zur Drohne. Wie ist das Internet der Dinge entstanden und warum hat es erst 30 Jahre später gefeuert?</a></li>
<li><a href="../de481706/index.html">Verlorene Quantencomputer im Rennen und ihre fatalen Fehler</a></li>
<li><a href="../de481708/index.html">Ist PocketBook so gut?</a></li>
<li><a href="../de481710/index.html">Kurz gesagt, machte die hundertjährige Blockbuster-Farbe</a></li>
<li><a href="../de481714/index.html">Warum Videospiele und Brettspiele nicht der beste Indikator für KI-Fähigkeiten sind (Interview mit dem Schöpfer von Keras)</a></li>
<li><a href="../de481716/index.html">Reaktive Programmierung, lohnt es sich, alles fallen zu lassen und dem Traum entgegen zu eilen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>