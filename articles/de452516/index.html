<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüéì ü¶à üßëüèΩ‚Äçü§ù‚Äçüßëüèª Docker-Container f√ºr die Verwaltung von HP Servern mit ILO üö∂üèº üèª üëÉüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Herkunft in russischer Sprache 

 Nun, Sie k√∂nnen sich fragen - warum sollte ich Docker-Container f√ºr einen solchen Zweck verwenden? Was ist das Probl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker-Container f√ºr die Verwaltung von HP Servern mit ILO</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452516/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><i>Herkunft in russischer Sprache</i></a> <br><br>  Nun, Sie k√∂nnen sich fragen - warum sollte ich Docker-Container f√ºr einen solchen Zweck verwenden?  Was ist das Problem, um die Weboberfl√§che der IAO aufzurufen und den Server wie gewohnt zu verwalten? <br><br>  Der gleiche Gedanke, den ich hatte, als ich ein paar alte Server hatte, die eine erneute Bereitstellung erforderten.  Die Server befinden sich auf verschiedenen Kontinenten und die einzige Schnittstelle, die ich hatte, war nur eine Webschnittstelle der IAO.  Und als ich einige manuelle Befehle √ºber die virtuelle Konsole eingeben musste, stellte ich fest, dass dies kaum m√∂glich ist. <br><br>  F√ºr verschiedene Arten von virtuellen Konsolen von Servern (sowohl HP als auch Dells) werden normalerweise Java-Webanwendungen verwendet.  Aber Firefox und Chrome unterst√ºtzen sie nicht mehr und das neueste IcedTea funktioniert sowieso nicht mit diesen alten Systemen.  Ich hatte also ein paar M√∂glichkeiten: <br><a name="habracut"></a><br><ol><li>  So installieren Sie parallel alte Versionen von Browsern und Java und versuchen, eine erforderliche Kombination auf meinem System zu finden.  Diese Option wurde herausgefiltert, da ich mein System nicht nur wegen weniger Konsolenbefehle verschmutzen m√∂chte. </li><li>  Erstellen Sie eine virtuelle Maschine mit alten Systemen, installieren Sie dort Java 6 und verwenden Sie die virtuelle Konsole wie zuvor. </li><li>  Das gleiche wie in Punkt 2, jedoch mit Container, keine virtuelle Maschine.  Da einige meiner Kollegen das gleiche Problem haben, w√ºrde ich ihnen lieber einen Bash-Befehl zum Ausf√ºhren der virtuellen Konsole √ºbergeben, anstatt die Festplatte der virtuellen Maschine, Kennw√∂rter daf√ºr usw. usw. freizugeben. </li></ol><br>  (Um ehrlich zu sein, Punkt 3 habe ich erst nach Punkt 2 gemacht). <br>  Punkt 3 werden wir heute umsetzen. <br><br>  Diese beiden Projekte haben mich haupts√§chlich inspiriert: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Docker-Basisbild-GUI</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Docker-Firefox-Java</a> </li></ol><br>  Tats√§chlich enth√§lt das erste Projekt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">docker-baseimage-gui</a> bereits alle erforderlichen Konfigurationen und Tools, um Desktop-Apps im Browser innerhalb eines Containers zu starten.  Normalerweise definieren Sie bestimmte Umgebungsvariablen und Ihre App wird √ºber einen Browser (Websocket) oder VNC zug√§nglich.  In unserem Fall beginnen wir mit Firefox und VNC, der Websocket hat nicht gut funktioniert. <br><br>  Installieren wir zun√§chst die erforderlichen Pakete: Java 6 und IcedTea: <br><br><pre><code class="plaintext hljs">RUN echo "deb http://archive.ubuntu.com/ubuntu precise main universe" &gt; /etc/apt/sources.list &amp;&amp; \ apt-get update &amp;&amp; \ apt-get -y upgrade &amp;&amp; \ apt-get -y install firefox \ nano curl \ icedtea-6-plugin \ icedtea-netx \ openjdk-6-jre \ openjdk-6-jre-headless \ tzdata-java</code> </pre> <br>  √ñffnen wir nun die Webseite der ILO-Oberfl√§che in Firefox und geben dort die Anmeldeinformationen ein.  Starten Sie Firefox: <br><br><pre> <code class="plaintext hljs">RUN bash -c 'echo "exec openbox-session &amp;" &gt;&gt; ~/.xinitrc' &amp;&amp; \ bash -c 'echo "firefox \${HILO_HOST}"&gt;&gt; ~/.xinitrc' &amp;&amp; \ bash -c 'chmod 755 ~/.xinitrc'</code> </pre> <br>  Die Variable HILO_HOST ist die URL unserer ILO-Schnittstelle, z. B. <code>https://myhp.example.com</code> . <br><br>  Zur Automatisierung f√ºgen wir die Authentifizierung hinzu.  Die ILO-Anmeldung wird √ºber eine einfache POST-Anforderung ausgef√ºhrt. Als Antwort erhalten Sie den Wert session_key und √ºbergeben diesen Wert in der GET-Anforderung.  Lassen Sie uns session_key mit curl ermitteln, wenn die Umgebungsvariablen HILO_USER und HILO_PASS definiert sind: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> HOME=/config <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> HILO_HOST=<span class="hljs-variable"><span class="hljs-variable">${HILO_HOST%%/}</span></span> SESSION_KEY=<span class="hljs-string"><span class="hljs-string">""</span></span> data=<span class="hljs-string"><span class="hljs-string">"{\"method\":\"login\",\"user_login\":\"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${HILO_USER}</span></span></span><span class="hljs-string">\",\"password\":\"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${HILO_PASS}</span></span></span><span class="hljs-string">\"}"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -n <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${HILO_USER}</span></span></span><span class="hljs-string">"</span></span> &amp;&amp; -n <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${HILO_PASS}</span></span></span><span class="hljs-string">"</span></span> ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> SESSION_KEY=$(curl -k -X POST <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${HILO_HOST}</span></span></span><span class="hljs-string">/json/login_session"</span></span> -d <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$data</span></span></span><span class="hljs-string">"</span></span> 2&gt;/dev/null | grep -Eo <span class="hljs-string"><span class="hljs-string">'"session_key":"[^"]+'</span></span> | sed <span class="hljs-string"><span class="hljs-string">'s/"session_key":"//'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"SESSION_KEY=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$SESSION_KEY</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$SESSION_KEY</span></span> &gt; /session_key</code> </pre><br>  Nachdem wir session_key in Container geschrieben haben, k√∂nnen wir den VNC-Server starten: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> x11vnc -forever -create</code> </pre><br>  Stellen Sie jetzt einfach eine Verbindung mit dem VNC-Client zu Port 5900 (oder dem, was Sie in Ihrer Auswahl definiert haben) zu localhost her und rufen Sie die virtuelle Konsole des HP Servers auf. <br><br>  Der Code befindet sich im Git-Repository <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Docker-Ilo-Client</a> . <br><br>  Vollst√§ndiger einzeiliger Befehl zum Herstellen einer Verbindung zur virtuellen ILO-Konsole: <br><br><pre> <code class="plaintext hljs">docker run -d --rm --name ilo-client -p 5900:5900 -e HILO_HOST=https://ADDRESS_OF_YOUR_HOST -e HILO_USER=SOME_USERNAME -e HILO_PASS=SOME_PASSWORD sshnaidm/docker-ilo-client</code> </pre> <br>  Dabei ist ADDRESS_OF_YOUR_HOST der Hostname von ILO, SOME_USERNAME ist Login und SOME_PASSWORD ist das Passwort f√ºr ILO. <br><br>  Als n√§chstes gehen Sie einfach mit einem beliebigen VNC-Client zur Adresse <code>vnc://localhost:5900</code> . <br>  Pull-Anfragen und Kommentare sind mehr als willkommen. <br><br>  Das √§hnliche Projekt f√ºr die Verbindung mit Dell IDRAC-Servern ist hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">docker-idrac6</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de452516/">https://habr.com/ru/post/de452516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de452494/index.html">MIMO r√§umliche Vielfalt: Alamouti, DET und andere r√§umliche Vielfalt</a></li>
<li><a href="../de452496/index.html">Was ist sonst noch in der Luft zu h√∂ren? HF-Rundfunk (DXing)</a></li>
<li><a href="../de452502/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 298 (vom 13. bis 19. Mai)</a></li>
<li><a href="../de452506/index.html">Opus √ºber Seine Majest√§t Clay. Dritter Teil - Polyurethan gegen Weltraumk√§lte</a></li>
<li><a href="../de452514/index.html">Spieldesign zum Leben erwecken. Die Wirtschaftlichkeit des Spiels (Teil II)</a></li>
<li><a href="../de452518/index.html">VMware EMPOWER 2019 - die Hauptthemen der Konferenz, die vom 20. bis 23. Mai in Lissabon stattfinden wird</a></li>
<li><a href="../de452520/index.html">Stellen Sie sich Euklids ‚ÄûElemente‚Äú in TeX vor</a></li>
<li><a href="../de452522/index.html">Acht wenig bekannte Bash-Optionen</a></li>
<li><a href="../de452524/index.html">Komprimieren Sie die APK und versuchen Sie, sie am Laufen zu halten</a></li>
<li><a href="../de452526/index.html">Mittelklasse: Warum moderne Musiker verdienen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>