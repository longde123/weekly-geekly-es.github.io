<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍂 🚗 👨🏻‍💻 Como o Tinder (ligeiramente) oculta sua localização 😔 📼 👨🏽‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este ano, você e seu amigo Steve Stevington começaram uma startup de rastreamento de usuários. A empresa é baseada no vazamento de metadados do WhatsA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como o Tinder (ligeiramente) oculta sua localização</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417877/"> Este ano, você e seu amigo Steve Stevington começaram uma startup de rastreamento de usuários.  A empresa é baseada no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vazamento de metadados</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WhatsApp que você descobriu</a> .  Vocês ainda devem aprender administração, mas ainda assim a empresa se tornou uma empresa poderosa, embora instável, com 65 estagiários e estudantes diversos, freelancers e trabalhadores não remunerados em liberdade condicional.  Você recentemente se mudou para o novo escritório do Departamento de Literatura do século XIX da Biblioteca Pública de São Francisco e tem uma reputação invejável no campo do marketing na Internet. <br><br>  Mas sob essa aparência brilhante e duvidosa esconde podridão.  Você suspeita que seu bom amigo, co-fundador e diretor executivo Steve Stevington, esteja tramando contra você.  Ele sai da biblioteca o tempo todo em momentos estranhos e em algum lugar desaparece por horas a fio.  Quando você pergunta para onde ele está indo, ele cria uma careta estranha, que ele provavelmente considera um sorriso malévolo - e diz para você não se preocupar.  Você instruiu os bibliotecários a segui-lo várias vezes, mas todos são terríveis no trabalho de campo. <br><a name="habracut"></a><br>  Você mora no Vale do Silício há algum tempo - e sabe quais atrocidades cruéis acontecem quando uma grande quantia de dinheiro e dados de usuários estão em jogo.  Steve Stevington provavelmente está tentando convencer os investidores a tirá-lo do negócio.  Você acha que Peter Thiel irá apoiá-lo, mas é difícil dizer sobre tia Martha.  Então, você precisa descobrir para onde Steve vai. <br><br>  Felizmente, ele é um ávido usuário do Tinder. <cut></cut>  O aplicativo Tinder rastreia a localização de seus usuários para permitir que casais em potencial saibam a que distância estão um do outro.  Isso permite que os usuários tomem decisões inteligentes: vale a pena dirigir 13 quilômetros para encontrar um casal com 6 ou 6,5 pontos quando tomam banho, toma sorvete na geladeira e trabalha de manhã.  Em outras palavras, Tinder sabe exatamente para onde Steve está indo.  E se você escolher a exploração certa, também descobrirá em breve. <br><br>  Para determinar a direção de suas pesquisas, você examinou relatórios de vazamentos anteriores de dados de localização para usuários do Tinder.  Havia vários deles.  Em 2013, foi descoberto que os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">servidores do Tinder enviam as coordenadas exatas de possíveis correspondências para um aplicativo móvel</a> .  Com base neles, o aplicativo calculou a distância entre os usuários, mas não exibiu as coordenadas na interface.  No entanto, um invasor pode facilmente interceptar o tráfego de rede do Tinder, verificar dados brutos e determinar a localização exata do alvo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/545/7f6/059/5457f6059c9e1af8adfaa8677d1c0e13.jpg"><br>  <i><font color="gray">Resposta da API do Tinder, incluindo localização exata</font></i> <br><br>  Tinder tentou corrigir silenciosamente a vulnerabilidade, deslocando o cálculo da distância para os servidores, em vez do aplicativo.  Depois disso, as mensagens de rede enviadas do servidor para o aplicativo continham apenas essas distâncias pré-calculadas sem locais reais.  No entanto, o Tinder enviou casualmente distâncias na forma de números não arredondados com 15 casas decimais. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/094/8f5/25b/0948f525bd667d3743b376bc7177b94c.jpg"><br>  <i><font color="gray">Resposta da API do Tinder, incluindo distância precisa</font></i> <br><br>  Essa negligência permitiu que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pesquisadores astutos determinassem novamente a localização exata dos alvos</a> usando uma exploração para trilateração.  Os pesquisadores enviaram três coordenadas falsas para o Tinder com diferentes locais de usuários.  Em cada novo local, eles perguntavam a Tinder a que distância estava o alvo.  Em seguida, três círculos foram desenhados no mapa com centros em coordenadas falsas e raios iguais às distâncias obtidas.  O ponto de interseção - as coordenadas do alvo com uma precisão de 30 metros. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ee/72c/b75/4ee72cb750081d088adff413e07194d5.jpg"><br>  <i><font color="gray">Exemplo de trilateração do Tinder</font></i> <br><br>  A equipe de segurança do Tinder olhou para essas pessoas que constantemente as faz trabalhar, suspiram e corrigem silenciosamente a vulnerabilidade.  Agora, o Tinder envia distâncias arredondadas para quilômetros para o aplicativo.  Você ainda pode usar o procedimento de trilateração indicado para determinar as coordenadas do alvo em um quilômetro ou mais.  Mas na cidade densamente povoada de São Francisco, isso não dará uma resposta, para onde vai o sorrateiro Steve Stevington. <br><br>  Na tarde de sexta-feira, uma careta de roubo reapareceu no rosto de Steve Stevington, indicando a disposição de tomar várias ações em lugares desconhecidos.  Você deve descobrir para onde ele está indo antes que seja tarde demais.  Você se trancou em sua conta - na sala de leitura da biblioteca no 4º andar.  Após quinze minutos de respiração profunda e reflexão ainda mais profunda, você tem um plano de como reanimar a exploração da trilateração Tinder e descobrir para onde o Stevenator está indo. <br><br>  Suponha que o Tinder agora calcule as distâncias exatas nos servidores, arredonde-as para o número inteiro mais próximo e envie os números arredondados para o seu telefone.  Você pode iniciar um novo ataque da mesma maneira que na trilateração.  Enviamos locais falsos do Tinder e perguntamos a que distância o alvo está.  O Tinder pode responder "8 quilômetros", o que em si é de pouca utilidade.  Mas então você pode mover um pixel para o norte, perguntando a distância a cada passo.  O servidor responderá "8 quilômetros, 8 quilômetros, 8 quilômetros, 8 quilômetros, 7 quilômetros".  Se sua suposição sobre o processo de arredondamento estiver correta, o ponto em que a resposta muda corresponde à distância exata até a meta de 7,5 quilômetros.  Se você repetir esse procedimento três vezes e desenhar três círculos, usaremos novamente a exploração de trilateração. <br><br>  Passamos para ações ativas.  Enquanto Wilson foi ao banheiro, pegue seu telefone emprestado para testes - você sabe que ele usa o Tinder, e o código de desbloqueio é visível na impressão digital na tela.  Converse com seus estagiários não remunerados em um período de teste para que eles não liguem para você nem digam nada para Wilson - e corra para o canto isolado e desabitado de seu escritório no departamento de ficção para a idade do ensino médio.  Lá você abre o Tinder nos dois telefones.  Continue passando o dedo até conseguir uma correspondência e, em seguida, escreva um script Python curto usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pynder</a> para falsificar as chamadas da API do Tinder.  Coloque Wilson no meio da Baía de São Francisco e tente determinar suas coordenadas, alterando sua localização pixel por pixel para encontrar o ponto em que a distância entre você muda de um número arredondado para outro. <br><br>  Mas algo está errado.  A noite chegou, o jantar passou e você ainda não encontrou Wilson.  Você meio que se aproxima, mas não o suficiente.  Às vezes, os círculos estão dolorosamente perto do cruzamento, mas geralmente não dão uma resposta significativa para onde Wilson está.  Você começa a se desesperar.  Neste exato momento, Steve Stevington pode assinar um novo contrato com Peter Thiel e tia Marta.  Ele já pode ter atualizado a página do LinkedIn da sua empresa, renomeado para você "Conselheiro", "Assistente" ou "Ex-CEO".  A biblioteca fecha - e você se muda para a despensa.  Wilson continua ligando, mas os estagiários de estágio não desistem.  Até um pensamento fugaz pula para dar-lhes um emprego. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd0/f57/7f6/dd0f577f6ae5e7a74a9e819fb89017cd.jpg"><br><br>  Frustrado, você dá um passo para trás e bate a cabeça na prateleira inferior.  Quando você sai de uma pilha de produtos de limpeza, está considerando a possibilidade de que as suposições possam estar erradas.  Talvez o Tinder não complete apenas as distâncias exatas.  Você toma um lanche na geladeira de um funcionário da biblioteca para ajudar no processo de pensamento.  Pare de desenhar círculos e comece a andar pelas linhas em torno da verdadeira localização de Wilson, marcando cada alteração na distância. <br><br>  Na segunda hora da noite, tudo fica claro. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f6f/bc6/1f2/f6fbc61f235072d12c5ad7601a974277.jpg"><br>  <i><font color="gray">Colocando marcas em um mapa com base nas distâncias do Tinder</font></i> <br><br>  Agora, o Tinder é tão zeloso pela privacidade dos usuários que quebra os clipes chatos da geometria convencional.  Ele abandonou Euclides.  Ele não precisa da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fórmula haversinus</a> .  Em vez disso, o Tinder usa duas inovações no cálculo da distância entre as correspondências. <br><br>  Primeiro, e mais importante, ela divide a cidade em quadrados de aproximadamente 1 milha.  Ao calcular a distância, o local de destino é ajustado ao centro do quadrado atual da grade.  Em seguida, calcula e retorna a distância aproximada entre você <i>e este local anexado</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c70/40e/ac2/c7040eac21f31af04acf613b3f0df997.jpg"><br>  <i><font color="gray">O Tinder encaixa os locais dos usuários em uma grade</font></i> <br><br>  Em segundo lugar, calcula as distâncias como se por sua fórmula única.  Para fazer isso, é tirado um mapa de distâncias aproximadas e predefinidas - e sobrepostas no centro do quadrado do alvo.  Tinder procura a localização do atacante nessa sobreposição e retorna a distância correspondente.  No cálculo normal da distância euclidiana, isso seria um conjunto de círculos concêntricos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/046/7ca/44e/0467ca44ec95e23290d311d42581e291.jpg"><br><br>  Mas Tinder parece estar usando uma sobreposição concêntrica com curvas estranhas nos cantos enquanto se afasta do alvo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a9a/9bd/a33/a9a9bda3337f9f250b28758e658af4ed.jpg"><br><br>  Entre outras coisas, isso significa que o Tinder geralmente retorna distâncias ligeiramente incorretas.  Você suspeita que o arredondamento de cantos seja necessário para corrigir distâncias <i>muito</i> incorretas a nordeste uma da outra. <br><br>  O encaixe de malha é uma inovação fundamental na abordagem do Tinder.  Isso significa que o Tinder sempre retornará a mesma distância se o alvo estiver em qualquer lugar dentro do quadrado da grade especificado.  Sua exploração trilateracional não funcionará.  E se o Tinder implementou corretamente a ligação de malha, nenhuma exploração puramente remota funcionará.  Não há como encontrar a localização de um alvo com maior precisão do que as bordas de um dos quadrados da grade (aproximadamente) 1 × 1 milha.  Mesmo essa vigilância grosseira pode fazer com que os usuários do Tinder se perguntem.  Mas, na verdade, esse é um comportamento bastante razoável para o aplicativo, cuja principal função é dizer a estranhos onde você está. <br><br>  Você realmente não sabe por que o Tinder usa uma camada tão estranha de quadrados com cantos arredondados.  Enquanto os locais dos usuários estiverem ligados a uma grade, o Tinder poderá usar a distância euclidiana normal sem arriscar a privacidade.  Talvez apenas uma nova métrica seja calculada mais rapidamente e, apesar dos preceitos de Gordon Moore, os computadores ainda são limitados.  No entanto, tudo isso leva à conclusão de que o Tinder está seguro - nesse aspecto muito restrito - e você estragou tudo. <br><br>  A biblioteca está na escuridão total, sem contar o brilho verde da Xerox.  Você está triste, mas diligentemente varre faixas.  Coloque no armário e jogue o telefone de Wilson no triturador industrial da biblioteca.  Saia pela entrada principal, roube uma bicicleta mal presa e volte para casa tristemente. <br><br>  Na manhã seguinte, Steve Stevington oferece um dos co-diretores em que ele trabalhou em sua aula secreta de cerâmica à tarde.  Isso é completamente nojento.  Seria melhor se ele lhe desse uma das duas notas de dez dólares e permanecesse no escritório.  Ele trabalhou pouco e mal, e você teve que realizar muitas reuniões e mentir muito - geralmente esse é o trabalho dele.  Mas pelo menos ele não roubou sua empresa.  Você coloca o café de Wilson em sua caneca ridícula e deseja boa saúde ao seu bom amigo. <br><br>  Quando você adormece à noite, surgem pensamentos sobre o que está acontecendo com a grade do Tinder no Pólo Norte ... <br><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Seu código deste artigo foi publicado no Github</a> .</i>  <i>Informe- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">se</a> se tiver alguma dúvida ou encontrar erros.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt417877/">https://habr.com/ru/post/pt417877/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt417867/index.html">Como avaliar a duração de um projeto de TI e quando não vale a pena fazer nada</a></li>
<li><a href="../pt417869/index.html">Como depurar o WebRTC</a></li>
<li><a href="../pt417871/index.html">Na linha de chegada do turismo suborbital</a></li>
<li><a href="../pt417873/index.html">Maneiras de criar janelas pop-up</a></li>
<li><a href="../pt417875/index.html">Saindo do SPA da toca do coelho com trilhos modernos</a></li>
<li><a href="../pt417879/index.html">Como fazer exames da Microsoft gratuitamente [por exemplo, uma competição recente]</a></li>
<li><a href="../pt417881/index.html">O resumo de materiais frescos do mundo do front-end nas últimas duas semanas n ° 323 (8 a 22 de julho de 2018)</a></li>
<li><a href="../pt417883/index.html">Criando um diálogo para escolher um toque</a></li>
<li><a href="../pt417885/index.html">Sobre M e sobre V e um pouco sobre C</a></li>
<li><a href="../pt417887/index.html">Aparelho de áudio especial: gravador de voz Stirlitz, seu verdadeiro protótipo e modelagem histórica em negrito</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>