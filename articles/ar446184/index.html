<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฝ ๐จ๐ผโโ๏ธ ๐น ุชุทุจููุงุช TDD ุนูู Spring Boot: ุตูู ุงูุงุฎุชุจุงุฑุงุช ูุงูุนูู ูุน ุงูุณูุงู ๐คค ๐ค๐ฟ โน๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูููุงูุฉ ุงูุซุงูุซุฉ ูู ุงูุณูุณูุฉ ููุฑุน ุตุบูุฑ ูู ุงูุณูุณูุฉ ุงูุฑุฆูุณูุฉ - ูุฐู ุงููุฑุฉ ุณุฃุนุฑุถ ููู ุชุนูู ููุชุจุฉ ุงุฎุชุจุงุฑ ุงูุฑุจูุน ููุชูุงูู ูููู ุชุนูู ุ ููุงุฐุง ูุญุฏุซ ุนูุฏ ุจุฏุก ุงูุงุฎุชุจุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุทุจููุงุช TDD ุนูู Spring Boot: ุตูู ุงูุงุฎุชุจุงุฑุงุช ูุงูุนูู ูุน ุงูุณูุงู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446184/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ุงูููุงูุฉ ุงูุซุงูุซุฉ ูู ุงูุณูุณูุฉ ููุฑุน ุตุบูุฑ ูู ุงูุณูุณูุฉ ุงูุฑุฆูุณูุฉ - ูุฐู ุงููุฑุฉ ุณุฃุนุฑุถ ููู ุชุนูู ููุชุจุฉ ุงุฎุชุจุงุฑ ุงูุฑุจูุน ููุชูุงูู ูููู ุชุนูู ุ ููุงุฐุง ูุญุฏุซ ุนูุฏ ุจุฏุก ุงูุงุฎุชุจุงุฑ ูููู ููููู ุถุจุท ุงูุชุทุจูู ูุจูุฆุชู ููุงุฎุชุจุงุฑ. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ููุฏ ุทููุจ ููู ูุชุงุจุฉ ูุฐุง ุงูููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุชุนููู</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">Hixon10</a> ุญูู ููููุฉ ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุญููููุฉ ุ ูุซู Postgres ุ ูู ุงุฎุชุจุงุฑ ุงูุชูุงูู.  ุงูุชุฑุญ ูุคูู ุงูุชุนููู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุฎุชุจุงุฑ ุงูุฑุจูุน ุงููุถูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุถูู ุจูู</a> ุงูููุชุจุงุช.  ููุฏ ุฃุถูุช ุจุงููุนู ููุฑุฉ ููุซุงู ููุงุณุชุฎุฏุงู ูู ุงูููุฏ ุ ููููู ููุฑุช ูู ุฐูู.  ุจุทุจูุนุฉ ุงูุญุงู ุ ูุนุฏ ุงุณุชุฎุฏุงู ููุชุจุฉ ุฌุงูุฒุฉ ุฃูุฑูุง ุฌูุฏูุง ูุฌูุฏูุง ุ ูููู ุฅุฐุง ูุงู ุงููุฏู ูู <em>ููู ููููุฉ ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช</em> ูุชุทุจูู Spring ุ ูุณูููู ูู ุงููููุฏ ุฃูุซุฑ ุนุฑุถ ููููุฉ ุชูููุฐ ููุณ ุงููุธููุฉ ุจููุณู.  ุฃููุงู ุ ูุฐุง ุณุจุจ ูุฌูู ููุญุฏูุซ ุนู ูุง ุชุญุช ุบุทุงุก <strong>ุงุฎุชุจุงุฑ ุงูุฑุจูุน</strong> .  ูุซุงููุงู ุ ุฃุนุชูุฏ ุฃูู ูุง ููููู ุงูุงุนุชูุงุฏ ุนูู ููุชุจุงุช ุงูุทุฑู ุงูุซุงูุซ ุ ุฅุฐุง ููุช ูุง ุชููู ููู ูุชู ุชุฑุชูุจูุง ุจุงูุฏุงุฎู ุ ูุฅู ูุฐุง ูุคุฏู ููุท ุฅูู ุชุนุฒูุฒ ุฃุณุทูุฑุฉ "ุณุญุฑ" ุงูุชูููููุฌูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุฐู ุงููุฑุฉ ูู ุชููู ููุงู ููุฒุฉ ูููุณุชุฎุฏู ุ ูููู ุณุชููู ููุงู ูุดููุฉ ูุฌุจ ุญููุง - <em>ุฃุฑูุฏ ุจุฏุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญููููุฉ ุนูู ูููุฐ ุนุดูุงุฆู ูุชูุตูู ุงูุชุทุจูู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุคูุชุฉ ูุฐู ุชููุงุฆููุง ุ ูุจุนุฏ ุงูุงุฎุชุจุงุฑุงุช ุ ุฃููู ูุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช.</em> </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ุ ููุง ุฌุฑุช ุงูุนุงุฏุฉ ุ ูุธุฑูุฉ ุตุบูุฑุฉ.  ููุฃุดุฎุงุต ุงูุฐูู ููุณูุง ุนูู ุฏุฑุงูุฉ ุจููุงููู bin ุ ูุงูุณูุงู ุ ูุงูุชูููู ุ ุฃูุตู ุจูุนุฑูุฉ ููุนุดุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ููุงูุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุงูุจ ุงูุนูุณู ูู Spring / Habr</a> . </p><br><h1 id="spring-test" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุฑุจูุน </h1><br><p style=";text-align:right;direction:rtl">  Spring Test ูู ุฅุญุฏู ุงูููุชุจุงุช ุงููุชุถููุฉ ูู Spring Framework ุ ูู ุงููุงูุน ุ ูู ูุง ูู ููุถุญ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณู ุงููุซุงุฆู</a> ุญูู ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุชุนูู ุจู.  ุงูููุงู ุงูุฃุฑุจุน ุงูุฑุฆูุณูุฉ ุงูุชู ุชุญููุง ุงูููุชุจุฉ ูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฏุงุฑุฉ ุญุงููุงุช IoC ุงูุฑุจูุน ูุงูุชุฎุฒูู ุงููุคูุช ุจูู ุงูุงุฎุชุจุงุฑุงุช </li><li style=";text-align:right;direction:rtl">  ุชูููุฑ ุญูู ุงูุชุจุนูุฉ ููุฆุงุช ุงูุงุฎุชุจุงุฑ </li><li style=";text-align:right;direction:rtl">  ุชูููุฑ ุฅุฏุงุฑุฉ ุงููุนุงููุงุช ุงูููุงุณุจุฉ ูุงุฎุชุจุงุฑุงุช ุงูุชูุงูู </li><li style=";text-align:right;direction:rtl">  ุชูููุฑ ูุฌููุนุฉ ูู ุงููุฆุงุช ุงูุฃุณุงุณูุฉ ููุณุงุนุฏุฉ ุงููุทูุฑ ุนูู ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู </li></ul><br><p style=";text-align:right;direction:rtl">  ุฃูุตู ุจุดุฏุฉ ุจูุฑุงุกุฉ ุงููุซุงุฆู ุงูุฑุณููุฉ ุ ููู ุชููู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ุงููููุฏุฉ ูุงูุดููุฉ.  ููุง ุณุฃูุฏู ูู ุถุบุทูุง ุณุฑูุนูุง ูุจุนุถ ุงููุตุงุฆุญ ุงูุนูููุฉ ุงููููุฏุฉ ุงูุชู ูุฌุจ ูุถุนูุง ูู ุงูุงุนุชุจุงุฑ. </p><br><h1 id="zhiznennyy-cikl-testa" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุฏูุฑุฉ ุงูุญูุงุฉ </h1><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/si/oq/ed/sioqedpwtepmojxgj2fqzcyy-d0.jpeg"><br>  ุชุจุฏู ุฏูุฑุฉ ุญูุงุฉ ุงูุงุฎุชุจุงุฑ ููุง ููู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <code>SpringRunner</code> ููุญู ุฅุทุงุฑ ุงูุงุฎุชุจุงุฑ ( <code>SpringRunner</code> ูู JUnit 4 ู <code>SpringExtension</code> ูู JUnit 5) Test Context Bootstrapper </li><li style=";text-align:right;direction:rtl">  ููุดุฆ Boostrapper <code>TestContext</code> - ุงููุฆุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุชุฎุฒู ุงูุญุงูุฉ ุงูุญุงููุฉ ููุงุฎุชุจุงุฑ ูุงูุชุทุจูู </li><li style=";text-align:right;direction:rtl">  <code>TestContext</code> ุจุฅุนุฏุงุฏ <code>TestContext</code> ูุฎุชููุฉ (ูุซู ุจุฏุก ุงููุนุงููุงุช ูุจู ุงูุงุฎุชุจุงุฑ ุซู ุงูุนูุฏุฉ ุฅูู ุงูุญุงูุฉ ุงูุณุงุจูุฉ) ุ ููุถุฎ ุงูุชุจุนูุงุช ูู ูุฆุงุช ุงูุงุฎุชุจุงุฑ (ุฌููุน ุญููู <code>@Autowired</code> ูู ูุฆุงุช ุงูุงุฎุชุจุงุฑ) ููููู ุจุฅูุดุงุก ุณูุงูุงุช </li><li style=";text-align:right;direction:rtl">  ูุชู ุฅูุดุงุก ุณูุงู ุจุงุณุชุฎุฏุงู <em>Context Loader</em> - ูุฃุฎุฐ ุงูุชูููู ุงูุฃุณุงุณู ููุชุทุจูู ููุฏูุฌู ูุน ุชูููู ุงูุงุฎุชุจุงุฑ (ุงูุฎุตุงุฆุต ุงููุชุฑุงูุจุฉ ุ ุงููููุงุช ุงูุดุฎุตูุฉ ุ ุงูุตูุงุฏูู ุ ุฃุฏูุงุช ุงูุชููุฆุฉ ุ ุฅูุฎ) </li><li style=";text-align:right;direction:rtl">  ูุชู ุชุฎุฒูู ุงูุณูุงู ูุคูุชูุง ุจุงุณุชุฎุฏุงู ููุชุงุญ ูุฑูุจ ูุตู ุงูุชุทุจูู ุจุงููุงูู - ูุฌููุนุฉ ูู ุงูุตูุงุฏูู ุ ุงูุฎุตุงุฆุต ุ ุฅูุฎ. </li><li style=";text-align:right;direction:rtl">  ูุนูู ุงูุงุฎุชุจุงุฑ </li></ol><br><blockquote style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ูุชู ุฅุฌุฑุงุก ุฌููุน ุงูุฃุนูุงู ุงููุงุณูุฉ ูุฅุฏุงุฑุฉ ุงูุงุฎุชุจุงุฑุงุช ุ ุนู ุทุฑูู <code>spring-test</code> <code>Spring Boot Test</code> ุ ููุถูู <code>Spring Boot Test</code> ุจุฏูุฑู ุ ุนุฏุฉ ูุฆุงุช ูุณุงุนุฏุฉ ุ ูุซู <code>@DataJpaTest</code> ู <code>@SpringBootTest</code> ุ ุฃุฏูุงุช ูุณุงุนุฏุฉ ูููุฏุฉ ูุซู <code>TestPropertyValues</code> ูุชุบููุฑ ุฎุตุงุฆุต ุงูุณูุงู ุฏููุงูููููุง.  ููุง ูุณูุญ ูู ุจุชุดุบูู ุงูุชุทุจูู <code>@MockBean</code> ููุจ ุญูููู ุ ุฃู ูุจูุฆุฉ ููููุฉ (ุฏูู ุงููุตูู ุนุจุฑ HTTP) ุ ููุง ุฃูู ููุงุณุจ ููุณุญ ููููุงุช ุงููุธุงู ุจุงุณุชุฎุฏุงู <code>@MockBean</code> ุ ุฅูุฎ. </blockquote><br><h1 id="keshirovanie-konteksta" style=";text-align:right;direction:rtl">  ุณูุงู ุงูุชุฎุฒูู ุงููุคูุช </h1><br><p style=";text-align:right;direction:rtl">  ููุนู ุฃุญุฏ ุงูููุถูุนุงุช ุงูุบุงูุถุฉ ููุบุงูุฉ ูู ุงุฎุชุจุงุฑ ุงูุชูุงูู ุงูุฐู ูุซูุฑ ุงูุนุฏูุฏ ูู ุงูุฃุณุฆูุฉ ูุงูููุงููู ุงูุฎุงุทุฆุฉ ูู <strong>ุงูุชุฎุฒูู ุงููุคูุช ููุณูุงู</strong> (ุงูุธุฑ ุงูููุฑุฉ 5 ุฃุนูุงู) ุจูู ุงูุงุฎุชุจุงุฑุงุช ูุชุฃุซูุฑูุง ุนูู ุณุฑุนุฉ ุงูุงุฎุชุจุงุฑุงุช.  ุชุนููู ูุชูุฑุฑ ุฃุณูุน ุฃู ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู "ุจุทูุฆุฉ" ู "ุชุดุบูู ุงูุชุทุจูู ููู ุงุฎุชุจุงุฑ."  ูุฐูู ุ ูุฅููู ูุฑูุถูู - ููู ููุณ ููู ุงุฎุชุจุงุฑ.  ุณูุชู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ูู ุณูุงู (ูุซู ูุซูู ุงูุชุทุจูู) ุฅูู ุงูุญุฏ ุงูุฃูุตู ุ ุฃู  ุฅุฐุง ุงุณุชุฎุฏูุช 10 ุงุฎุชุจุงุฑุงุช ููุณ ุชูููู ุงูุชุทุจูู ุ ูุณูุจุฏุฃ ุงูุชุทุจูู ูุฑุฉ ูุงุญุฏุฉ ูุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงูุนุดุฑุฉ.  ูุงุฐุง ูุนูู "ููุณ ุงูุชูููู" ููุชุทุจููุ  ุจุงููุณุจุฉ ูู Spring Test ุ ููุฐุง ูุนูู ุฃู ูุฌููุนุฉ ุงููุงุตูููุง ููุฆุงุช ุงูุชูููู ูุงููููุงุช ุงูุชุนุฑูู ูุงูุฎุตุงุฆุต ุ ููุง ุฅูู ุฐูู ุ ูู ุชุชุบูุฑ.  ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุนูู ูุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฃู ูุฐูู ุงูุงุฎุชุจุงุฑูู ุณูุณุชุฎุฏูุงู ููุณ ุงูุณูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ActiveProfiles</span></span>(<span class="hljs-string"><span class="hljs-string">"test"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@TestPropertySource</span></span>(<span class="hljs-string"><span class="hljs-string">"foo=bar"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FirstTest</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ActiveProfiles</span></span>(<span class="hljs-string"><span class="hljs-string">"test"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@TestPropertySource</span></span>(<span class="hljs-string"><span class="hljs-string">"foo=bar"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SecondTest</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ููุชุตุฑ ุนุฏุฏ ุงูุณูุงูุงุช ุงูููุฌูุฏุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนูู 32 - ุจุงูุฅุถุงูุฉ ุฅูู ูุจุฏุฃ LRSU ุ ุณูุชู ุญุฐู ุฃุญุฏูุง ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. </blockquote><p style=";text-align:right;direction:rtl">  ูุง ุงูุฐู ูููู ุฃู ูููุน ุงุฎุชุจุงุฑ ุงูุฑุจูุน ูู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุณูุงู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฅูุดุงุก ูุงุญุฏุฉ ุฌุฏูุฏุฉุ </p><br><p style=";text-align:right;direction:rtl">  <strong>DirtiesContext</strong> <br>  ุงูุฎูุงุฑ ุงูุฃุณูู ูู ุฅุฐุง ุชู ูุถุน ุนูุงูุฉ ุนูู ุงูุงุฎุชุจุงุฑ ูุน ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุ ููู ูุชู ุชุฎุฒูู ุงูุณูุงู ูุคูุชูุง.  ูุฏ ูููู ุฐูู ูููุฏูุง ุฅุฐุง ุบูุฑ ุงูุงุฎุชุจุงุฑ ุญุงูุฉ ุงูุชุทุจูู ูุชุฑูุฏ "ุฅุนุงุฏุฉ ุชุนูููู". </p><br><p style=";text-align:right;direction:rtl">  <strong>MockBean</strong> <br>  ุฅูู ุฎูุงุฑ ุบูุฑ ูุงุถุญ ููุบุงูุฉ ุ ุญุชู ุฃูู ุชู ุชูุฏููู ุจุดูู ูููุตู -MockBean ูุณุชุจุฏู ุงูุญุจุฉ ุงูุญููููุฉ ูู ุงูุณูุงู ุจุณุฎุฑูุฉ ูููู ุงุฎุชุจุงุฑูุง ูู ุฎูุงู Mockito (ูู ุงูููุงูุงุช ุงูุชุงููุฉ ุณูู ุฃุนุฑุถ ููููุฉ ุงุณุชุฎุฏุงููุง).  ุงูููุทุฉ ุงูุฃุณุงุณูุฉ ูู ุฃู ูุฐุง ุงูุชุนููู ุงูุชูุถูุญู <em>ูุบูุฑ ูุฌููุนุฉ ุงููุงุตูููุง</em> ูู ุงูุชุทุจูู ูููุฑุถ ุงุฎุชุจุงุฑ ุงูุฑุจูุน ูุฅูุดุงุก ุณูุงู ุฌุฏูุฏ.  ุฅุฐุง ุฃุฎุฐูุง ุงููุซุงู ุงูุณุงุจู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุณูุชู ุจุงููุนู ุฅูุดุงุก ุณูุงููู ููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ActiveProfiles</span></span>(<span class="hljs-string"><span class="hljs-string">"test"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@TestPropertySource</span></span>(<span class="hljs-string"><span class="hljs-string">"foo=bar"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FirstTest</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@SpringBootTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ActiveProfiles</span></span>(<span class="hljs-string"><span class="hljs-string">"test"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@TestPropertySource</span></span>(<span class="hljs-string"><span class="hljs-string">"foo=bar"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SecondTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@MockBean</span></span> CakeFinder cakeFinderMock; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>TestPropertySource</strong> <br>  ุฃู ุชุบููุฑ ุฎุงุตูุฉ ูุบูุฑ ุชููุงุฆูุง ููุชุงุญ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุชู ุฅูุดุงุก ุณูุงู ุฌุฏูุฏ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ActiveProfiles</strong> <br>  ุณูุคุซุฑ ุชุบููุฑ ูููุงุช ุงูุชุนุฑูู ุงููุดุทุฉ ุฃูุถูุง ุนูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. </p><br><p style=";text-align:right;direction:rtl">  <strong>ContextConfiguration</strong> <br>  ูุจุงูุทุจุน ุ ูุฅู ุฃู ุชุบููุฑ ุงูุชูููู ุณูุฎูู ุณูุงู ุฌุฏูุฏ. </p><br><h1 id="zapuskaem-bazu" style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงููุงุนุฏุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุญุชู ุงูุขู ูุน ูู ูุฐู ุงููุนุฑูุฉ ุณูุญุงูู <del>  ุฎูุน </del>  ููู ููู ูุฃูู ููููู ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ูุง ุชูุฌุฏ ุฅุฌุงุจุฉ ูุงุญุฏุฉ ุตุญูุญุฉ ููุง ุ ููู ุชุนุชูุฏ ุนูู ุงููุชุทูุจุงุช ุ ูููู ููููู ุงูุชูููุฑ ูู ุฎูุงุฑูู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุดุบูู ูุฑุฉ ูุงุญุฏุฉ ูุจู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูู ุงูุตู. </li><li style=";text-align:right;direction:rtl">  ูู ุจุชุดุบูู ูุณุฎุฉ ุนุดูุงุฆูุฉ ููุงุนุฏุฉ ุจูุงูุงุช ูููุตูุฉ ููู ุณูุงู ุชู ุชุฎุฒููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช (ูุญุชูู ุฃู ูููู ุฃูุซุฑ ูู ูุฆุฉ ูุงุญุฏุฉ). </li></ol><br><p style=";text-align:right;direction:rtl">  ุญุณุจ ุงููุชุทูุจุงุช ุ ููููู ุงุฎุชูุงุฑ ุฃู ุฎูุงุฑ.  ุฅุฐุง ูุงูุช Postgres ูู ุญุงูุชู ุชุจุฏุฃ ุจุณุฑุนุฉ ูุณุจูุฉ ููุงู ุงูุฎูุงุฑ ุงูุซุงูู ููุงุณุจูุง ุ ููุฏ ูููู ุงูุฎูุงุฑ ุงูุฃูู ููุงุณุจูุง ูุดูุก ุฃูุซุฑ ุตุนูุจุฉ. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุง ูุฑุชุจุท ุงูุฎูุงุฑ ุงูุฃูู ุจุงูุฑุจูุน ุ ุจู ูุฑุชุจุท ุจุฅุทุงุฑ ุงุฎุชุจุงุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุฅูุดุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุญู ูู JUnit 5</a> . </blockquote><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจุชุฌููุน ูู ุงููุนุฑูุฉ ุญูู ููุชุจุฉ ุงูุงุฎุชุจุงุฑ ูุงูุณูุงูุงุช ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ูุฅู ุงููููุฉ ุชุชูุฎุต ูููุง ููู: <em>ุนูุฏ ุฅูุดุงุก ุณูุงู ุชุทุจูู ุฌุฏูุฏ ุ ุณุชุญุชุงุฌ ุฅูู ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู ูููุฐ ุนุดูุงุฆู ูููู ุจูุงูุงุช ุงูุงุชุตุงู ุฅูู ุงูุณูุงู</em> . </p><br><p style=";text-align:right;direction:rtl">  ูุงุฌูุฉ <code>ApplicationContextInitializer</code> ูู ุงููุณุคููุฉ ุนู ุชูููุฐ ุงูุฅุฌุฑุงุกุงุช ูุน ุงูุณูุงู ูุจู ุงูุจุฏุก ูู Spring. </p><br><h1 id="applicationcontextinitializer" style=";text-align:right;direction:rtl">  ApplicationContextInitializer </h1><br><p style=";text-align:right;direction:rtl">  ุชุญุชูู ุงููุงุฌูุฉ ุนูู ุทุฑููุฉ <code>initialize</code> ูุงุญุฏุฉ ููุท ุ ูุงูุชู ูุชู ุชูููุฐูุง ูุจู "ุจุฏุก" ุงูุณูุงู (ุฃู ูุจู ุฃู ูุชู ุงุณุชุฏุนุงุก ุทุฑููุฉ <code>refresh</code> ) ูุชุณูุญ ูู ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุงูุณูุงู - ุฅุถุงูุฉ ุณูุงู ุ ุฎุตุงุฆุต. </p><br><p style=";text-align:right;direction:rtl">  ูู ุญุงูุชู ุ ูุจุฏู ุงููุตู ูุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmbeddedPostgresInitializer</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationContextInitializer</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GenericApplicationContext</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GenericApplicationContext applicationContext)</span></span></span><span class="hljs-function"> </span></span>{ EmbeddedPostgres postgres = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EmbeddedPostgres(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { String url = postgres.start(); TestPropertyValues values = TestPropertyValues.of( <span class="hljs-string"><span class="hljs-string">"spring.test.database.replace=none"</span></span>, <span class="hljs-string"><span class="hljs-string">"spring.datasource.url="</span></span> + url, <span class="hljs-string"><span class="hljs-string">"spring.datasource.driver-class-name=org.postgresql.Driver"</span></span>, <span class="hljs-string"><span class="hljs-string">"spring.jpa.hibernate.ddl-auto=create"</span></span>); values.applyTo(applicationContext); applicationContext.registerBean(EmbeddedPostgres.class, () -&gt; postgres, beanDefinition -&gt; beanDefinition.setDestroyMethodName(<span class="hljs-string"><span class="hljs-string">"stop"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(e); } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃูู ูุง ูุญุฏุซ ููุง ูู ุฅุทูุงู Postgres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุถูู ูู</a> ุงูููุชุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฏูุฌุฉ</a> ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">yandex-qatools / postgresql</a> .  ุจุนุฏ ุฐูู ุ ูุชู ุฅูุดุงุก ูุฌููุนุฉ ูู ุงูุฎุตุงุฆุต - ุนููุงู URL ูู JDBC ูููุงุนุฏุฉ ุงูุชู ุชู ุฅุทูุงููุง ุญุฏูุซูุง ูููุน ุจุฑูุงูุฌ ุงูุชุดุบูู ูุณููู ุงูุฅุณุจุงุช ูููุธุงู (ุงูุฅูุดุงุก ุชููุงุฆููุง).  ุดูุก ูุงุญุฏ ุบูุฑ ูุงุถุญ ูู <code>spring.test.database.replace=none</code> - ูุฐุง ูุง ููููู DataJpaTest ูุนุฏู ูุญุงููุฉ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุถููุฉ ุ ูุซู H2 ุ ูููุณ ูุงุณุชุจุฏุงู ุญุงููุฉ ูุตุฏุฑ ุงูุจูุงูุงุช (ูุนูู ูุฐุง). </p><br><p style=";text-align:right;direction:rtl">  ูุงูููุทุฉ ุงููููุฉ ุงูุฃุฎุฑู ูู <code>application.registerBean(โฆ)</code> .  ุจุดูู ุนุงู ุ ูุง ูููู ุจุงูุทุจุน ุชุณุฌูู ูุฐู ุงูุญุจุฉ - ุฅุฐุง ูู ููู ุฃุญุฏ ุจุงุณุชุฎุฏุงููุง ูู ุงูุชุทุจูู ุ ููู ุชููู ููุงู ุญุงุฌุฉ ุฎุงุตุฉ ุฅูููุง.  ููุฒู ุงูุชุณุฌูู ููุท ูุชุญุฏูุฏ ุทุฑููุฉ ุงูุชุฏููุฑ ุงูุชู ุณูุชุตู ุจูุง Spring ุนูุฏ ุฅุชูุงู ุงูุณูุงู ุ ููู ูุฐู ุงูุญุงูุฉ ุ <code>postgres.stop()</code> ูุฐู ุงูุทุฑููุฉ <code>postgres.stop()</code> ูุชููู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุจุดูู ุนุงู ุ ูุฐุง ูู ุดูุก ุ ุงูุชูู ุงูุณุญุฑ ุ ุฅู ูุฌุฏ.  ุงูุขู ุณุฃููู ุจุชุณุฌูู ุงูููููุฆ ูู ุณูุงู ุงุฎุชุจุงุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@DataJpaTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ContextConfiguration</span></span>(initializers = EmbeddedPostgresInitializer.class) ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃู ุญุชู ููุฑุงุญุฉ ุ ููููู ุฅูุดุงุก ุงูุชุนููู ุงูุชูุถูุญู ุงูุฎุงุต ุจู ุ ูุฃููุง ูุญุจ ุฌููุนูุง ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ! </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>(ElementType.TYPE) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-meta"><span class="hljs-meta">@DataJpaTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ContextConfiguration</span></span>(initializers = EmbeddedPostgresInitializer.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> EmbeddedPostgresTest { }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฃู ุงุฎุชุจุงุฑ ูุดุฑูุญ ุจูุงุณุทุฉ <code>@EmbeddedPostgrestTest</code> ุณูุจุฏุฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู ูููุฐ ุนุดูุงุฆู ูุจุงุณู ุนุดูุงุฆู ุ ูู ุจุชูููู Spring ููุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฐู ูุฅููุงูู ูู ููุงูุฉ ุงูุงุฎุชุจุงุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@EmbeddedPostgresTest</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JpaCakeFinderTestWithEmbeddedPostgres</span></span></span><span class="hljs-class"> </span></span>{ ... }</code> </pre> <br><h1 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><p style=";text-align:right;direction:rtl">  ุฃุฑุฏุช ุฃู ุฃูุถุญ ุฃูู ูุง ููุฌุฏ ุณุญุฑ ุบุงูุถ ูู Spring ุ ูููุงู ุงููุซูุฑ ูู ุงูุขููุงุช ุงูุฏุงุฎููุฉ "ุงูุฐููุฉ" ูุงููุฑูุฉ ุ ููู ูุน ูุนุฑูุชูู ููููู ุงูุชุญูู ุงููุงูู ูู ุงูุงุฎุชุจุงุฑุงุช ูุงูุชุทุจูู ููุณู.  ุจุดูู ุนุงู ุ ูู ุงููุดุฑูุนุงุช ุงููุชุงููุฉ ุ ูุง ุฃุญูุฒ ุงูุฌููุน ุนูู ูุชุงุจุฉ ุฃุณุงููุจูู ููุตูููู ูุฅุนุฏุงุฏ ุจูุฆุฉ ุชูุงูู ููุงุฎุชุจุงุฑุงุช ุ ุฅุฐุง ูุงู ููุงู ุญู ุฌุงูุฒ ุ ูููููู ุงูููุงู ุจุฐูู.  ุนูู ุงูุฑุบู ูู ุฃู ุงูุทุฑููุฉ ุจุฃููููุง ุชุชููู ูู 5 ุณุทูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุฅู ุณุญุจ ุงูุชุจุนูุฉ ุฅูู ุงููุดุฑูุน ุ ูุฎุงุตุฉ ุนุฏู ููู ุงูุชูููุฐ ุ ูุฏ ูููู ุบูุฑ ุถุฑูุฑู. </p><br><h1 id="ssylki-na-ostalnye-stati-serii" style=";text-align:right;direction:rtl">  ุฑูุงุจุท ูููุงูุงุช ุฃุฎุฑู ูู ุงูุณูุณูุฉ </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุฉ ุจูุงุก ูุฑู ูู ุชุทุจููุงุช ุชุทููุฑ ุฌุฐุน ุฃู ูุญุฑููุง ุงุฎุชุจุงุฑ ุนูู ุงูุชูููุฏ ุงูุฑุจูุน</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุทุจููุงุช TDD ุนูู Spring Spring: ุงูุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar446184/">https://habr.com/ru/post/ar446184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar446166/index.html">ุจุณูุท sprintf ASN1 ุงูุชุฑููุฒ</a></li>
<li><a href="../ar446172/index.html">ุญุฏ ุงูุฑุณุงุฆู API VK - ูุง ูุฌุจ ุงูููุงู ุจู</a></li>
<li><a href="../ar446174/index.html">Yandex.Alice ู Telegram ุจูุช ูู PHP ูุน ูุธููุฉ ูุงุญุฏุฉ</a></li>
<li><a href="../ar446176/index.html">ุงูุชุนุฑู ุนูู ุฏุจุงุจุงุช ูู ุฏูู ุงูููุฏูู ุจุงุณุชุฎุฏุงู ุฃุณุงููุจ ุงูุชุนูู ุงูุขูู (+2 ุฃุดุฑุทุฉ ุงูููุฏูู ุนูู ููุตุงุช Elbrus ู Baikal)</a></li>
<li><a href="../ar446180/index.html">ูุงู MongoDB ูู ุงูุฎูุงุฑ ุงูุตุญูุญ ุนูู ุงูุฅุทูุงูุ</a></li>
<li><a href="../ar446186/index.html">ููู ุญุงูู ุฅูููู ูุณู ุชุฏููุฑ ุงููุฎุจุฑ ูู ุตููู ุชุณูุง ุ ููุงุฐุง ุฌุงุก ููู</a></li>
<li><a href="../ar446190/index.html">ูุธุงู ุงูุชุดุบูู ุงูุขูู ููููุฒู. ุฎูู ุตูุฑุฉ ูุธุงู ุงูุชุดุบูู</a></li>
<li><a href="../ar446192/index.html">ูุณุฎุฉ ุงุญุชูุงุทูุฉ ููุชุงุฑูุฎ: ุณุจุนุฉ ูุฎุชุฑุนูู ุฑุจูุง ูู ุชุณูุนูุง ุจูู</a></li>
<li><a href="../ar446194/index.html">ุบูุทุฉ ุฌุฏูุฏุฉ ุฃู ุชุญุฑูู ูุชุงุฉ ุงูุฑูุจูุช ูุฑูุงูุฉ ุงูุฎูุงู ุงูุนููู</a></li>
<li><a href="../ar446196/index.html">ุชูุฏูู 3CX V16 ูุน ุงููุทุนุฉ ุงูุงุชุตุงูุงุช ุงููููุน</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>