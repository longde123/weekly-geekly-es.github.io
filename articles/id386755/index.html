<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîú üéûÔ∏è üôãüèø Arloji lain atau saat itu memalukan bagi mikrokontroler üë®üèΩ‚Äçüöí üë®‚Äçüë®‚Äçüëß‚Äçüë¶ üöº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di sekolah ia menyukai mikroelektronika, pergi ke klub radio, mengumpulkan beberapa perangkat sederhana. Kemudian universitas, bekerja, menikah dan sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arloji lain atau saat itu memalukan bagi mikrokontroler</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386755/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sekolah ia menyukai mikroelektronika, pergi ke klub radio, mengumpulkan beberapa perangkat sederhana. Kemudian universitas, bekerja, menikah dan sangat jarang mengingat hobinya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan munculnya Internet di rumah saya, saya menemukan rincian tentang mikrokontroler, melihat harga, dan ingin mengumpulkan sesuatu di AVR atau STM. Saya membaca kembali banyak forum dan pilihan proyek pada mikrokontroler, tetapi semuanya adalah sesuatu yang salah, dan saya tidak dapat memahami apa yang salah. Tampaknya menjadi hal yang menarik: pemutar musik yang memutar file dari kartu memori, atau jam alarm dengan termometer, tetapi ada banyak lagi, tetapi perasaan yang saya inginkan ini tidak muncul ...</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menemukan beberapa artikel tentang jam tangan pada indikator debit gas dari seri IN dan sejenisnya, memori masa kanak-kanak muncul seperti di toko saya melihat angka-angka pada timbangan, dan mereka terpisah di sana dalam bentuk kabel tipis dan salah satunya bersinar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diputuskan - saya akan melakukan jam. Indikator pelepasan gas beroperasi pada tegangan sekitar 180 volt, jadi untuk koordinasi dengan controller, chip k155id1 paling sering digunakan - satu-satunya chip tegangan tinggi, decoder biner-desimal. Untuk mendapatkan tegangan tinggi, sebagian besar proyek juga menggunakan chip PWM khusus. Dan di banyak proyek, ada juga jam waktu nyata dalam bentuk chip terpisah atau perakitan jadi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Membaca deskripsi di situs web toko untuk Atmega8 yang sederhana, saya membayangkan bahwa ada konverter analog-ke-digital dan modulasi lebar-pulsa, antarmuka serial, dll., Dan mereka paling sering digunakan hanya untuk menjalankan program jam, bahkan decoder untuk indikator dipasang secara eksternal. Itu memalukan bagi mikrokontroler, itu sangat "kuat" dan mereka tidak membiarkannya berbalik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasilnya, melewati sirkuit, saya segera mulai menggambar papan sirkuit tercetak di SprintLayout dan yang ini lahir dalam beberapa minggu: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/575/67d/346/57567d346ce59e10447344b42c6a8db5.jpg" alt="Gambar dari album foto E1.ru"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di satu papan semuanya dengan kekuatan, di sisi lain hanya indikator:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/9ec/e65/24d/9ece6524d04cb8283cc7f404cf9a1821.jpg" alt="Gambar dari album foto E1.ru"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mikrokontroler atmega8 dalam proyek ini menggunakan ketiga pengatur waktu, salah satunya bekerja secara sinkron dari kuarsa jam eksternal. </font><font style="vertical-align: inherit;">Pengontrol itu sendiri beroperasi pada frekuensi 8 megahertz dari rantai RC internal. </font><font style="vertical-align: inherit;">PWM digunakan untuk menghasilkan tegangan tinggi dalam booster converter, dan tegangan dikontrol oleh input analog, dan siklus kerja disesuaikan jika perlu. </font><font style="vertical-align: inherit;">Nah, 28 kaki sudah cukup untuk menerangi empat indikator IN 12, dan beberapa bola lampu lainnya masih ada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Begini tampilannya ketika dirakit: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/9f2/7e0/8c5/9f27e08c5dfd62d8078a008bdd51a601.jpg" alt="Gambar dari album foto E1.ru"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan menyala: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0bb/aa3/77f/0bbaa377f805420d5577c48a88ffd005.jpg" alt="Gambar dari album foto E1.ru"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa fungsi pengontrol tentu tetap tidak digunakan, tetapi tidak begitu mengganggu ketika tidak ada PWM dan RTC yang terpisah di dekatnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BB menambahkan bagian dari skema, dicat dengan proteus, pasangan itu menjadi sulit: Saya </font></font><br>
<img src="https://habrastorage.org/files/c4a/499/7a4/c4a4997a4ae146e79c1956d803d5a68d.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mengambil skema utama </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari sini</font></font></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode proyek SI</font></font></b><div class="spoiler_text">#define F_CPU 8000000UL<br>
<br>
#include &lt;avr/io.h&gt;<br>
 #include &lt;avr/interrupt.h&gt;<br>
 #include &lt;util/delay.h&gt;<br>
<br>
//  <br>
<br>
void init_pwm (void)<br>
 {<br>
 // <br>
DDRB=0xFF; //OC1A,OC1B,OC2 ‚Äî  <br>
TCCR1A=(1&lt;&lt;COM1B1)|(1&lt;&lt;WGM10)|(1&lt;&lt;WGM11); //  OC1A<br>
 TCCR1B=(1&lt;&lt;CS10)|(1&lt;&lt;WGM12)|(1&lt;&lt;WGM13); //  OC1B<br>
<br>
//   <br>
OCR1A=250;<br>
 OCR1B=215; // 0  200/170  250/215<br>
 }<br>
<br>
volatile unsigned char second, minute, hour, h, m;<br>
 int voltage_ADC, dimm;<br>
 //    2<br>
 ISR (TIMER2_OVF_vect)<br>
 {<br>
 if(second++ &gt;= 59)<br>
 {<br>
 second = 0;<br>
 minute++;<br>
 }<br>
 if(minute &gt; 59)<br>
 {<br>
 minute = 0;<br>
 hour++;<br>
 }<br>
 if(hour &gt; 23)<br>
 hour = 0;<br>
<br>
//set_time(hour,minute,second); //    <br>
}<br>
<br>
ISR (TIMER0_OVF_vect)<br>
 {<br>
<br>
PORTC |= (1 &lt;&lt; PC2);<br>
<br>
}<br>
<br>
ISR (ADC_vect)//    <br>
{<br>
voltage_ADC = ADCW;//   <br>
<br>
if(voltage_ADC&lt;260 &amp;&amp; OCR1A&lt;300){OCR1A++;OCR1B=OCR1A-dimm;}<br>
 if(voltage_ADC&gt;260 &amp;&amp; OCR1A&gt;170){OCR1A--;OCR1B=OCR1A-dimm;}<br>
<br>
ADCSR |= (1&lt;&lt;ADSC);//  <br>
}<br>
<br>
// <br>
<br>
int main(void)<br>
 {<br>
 unsigned char r;<br>
 unsigned char mode;<br>
 init_pwm(); //  <br>
PORTD=0x00; //    D  0,      D<br>
 DDRD=0xFF; //  D  ,       5<br>
PORTC = 0b00000000; DDRC = 0b11101111;<br>
<br>
TIMSK &amp;= ~(1 &lt;&lt; OCIE2)|(1 &lt;&lt; TOIE2); //    T2<br>
 ASSR |= (1 &lt;&lt; AS2); //    T2<br>
 TCNT2 = 0; //   <br>
TCCR2 |= (1 &lt;&lt; CS22)|(0 &lt;&lt; CS21)|(1 &lt;&lt; CS20); //   128-(32768/128 = 256 /c)<br>
 TIMSK |= (1 &lt;&lt; TOIE2); //     2<br>
<br>
TCCR0|=(0&lt;&lt;CS02)|(1&lt;&lt;CS00);<br>
 //TIMSK |= (1 &lt;&lt; TOIE0); //     2<br>
<br>
//ads<br>
 ADMUX|= (1&lt;&lt;REFS0)|(1&lt;&lt;REFS1)|(1&lt;&lt;MUX2); // <br>
//ADCSRA|=(1&lt;&lt;ADEN)|(1&lt;&lt;ADFR)|(1&lt;&lt;ADIE)|(1&lt;&lt;ADPS1)|(1&lt;&lt;ADPS0);<br>
 ADCSRA |= (1&lt;&lt;ADEN) | (1&lt;&lt;ADSC) | (1&lt;&lt;ADIE) | (1&lt;&lt;ADPS2) | (1&lt;&lt;ADPS1) | (1&lt;&lt;ADPS0);<br>
 sei(); //   <br>
<br>
hour = 23; //   <br>
minute = 13;<br>
 second = 23;<br>
<br>
mode=1;<br>
<br>
while (1) // <br>
{<br>
 /* <br>
PORTD |= (1 &lt;&lt; PD1); //   1<br>
 PORTD &amp;= ~ (1 &lt;&lt; PD1); //   1<br>
 */<br>
 dimm=35;<br>
 PORTC &amp;= ~ (1 &lt;&lt; PC2);<br>
 if(mode==1){m=minute; h=hour;}<br>
 if(mode==2){m=second; h=minute;}<br>
 if(mode==3){m=voltage_ADC%100; h=voltage_ADC/100;}; <br>
<br>
for (r=0;r&lt;4;r++) <br>
 {<br>
 if(r==1)<br>
 {<br>
 PORTC |= (1 &lt;&lt; PC3);// <br>
if (m/10==0) PORTD |= (1 &lt;&lt; PD3);//0<br>
 if (m/10==1) PORTD |= (1 &lt;&lt; PD2);//1<br>
 if (m/10==2) PORTB |= (1 &lt;&lt; PB1);//2<br>
 if (m/10==3) PORTB |= (1 &lt;&lt; PB3);//3<br>
 if (m/10==4) PORTB |= (1 &lt;&lt; PB4);//4<br>
 if (m/10==5) PORTD |= (1 &lt;&lt; PD5);//5<br>
 if (m/10==6) PORTD |= (1 &lt;&lt; PD6);//6<br>
 if (m/10==7) PORTD |= (1 &lt;&lt; PD7);//7<br>
 if (m/10==8) PORTB |= (1 &lt;&lt; PB0);//8<br>
 if (m/10==9) PORTD |= (1 &lt;&lt; PD4);//9<br>
<br>
}<br>
<br>
if(r==0)<br>
 {<br>
 PORTC |= (1 &lt;&lt; PC5);// <br>
if (m%10==0) PORTD |= (1 &lt;&lt; PD3);//0<br>
 if (m%10==1) PORTD |= (1 &lt;&lt; PD2);//1<br>
 if (m%10==2) PORTB |= (1 &lt;&lt; PB1);//2<br>
 if (m%10==3) PORTB |= (1 &lt;&lt; PB3);//3<br>
 if (m%10==4) PORTB |= (1 &lt;&lt; PB4);//4<br>
 if (m%10==5) PORTD |= (1 &lt;&lt; PD5);//5<br>
 if (m%10==6) PORTD |= (1 &lt;&lt; PD6);//6<br>
 if (m%10==7) PORTD |= (1 &lt;&lt; PD7);//7<br>
 if (m%10==8) PORTB |= (1 &lt;&lt; PB0);//8<br>
 if (m%10==9) PORTD |= (1 &lt;&lt; PD4);//9<br>
 }<br>
<br>
if(r==2)<br>
 {<br>
 PORTD |= (1 &lt;&lt; PD1);// <br>
if (h/10==0) PORTD |= (1 &lt;&lt; PD3);//0<br>
 if (h/10==1) PORTD |= (1 &lt;&lt; PD2);//1<br>
 if (h/10==2) PORTB |= (1 &lt;&lt; PB1);//2<br>
 if (h/10==3) PORTB |= (1 &lt;&lt; PB3);//3<br>
 if (h/10==4) PORTB |= (1 &lt;&lt; PB4);//4<br>
 if (h/10==5) PORTD |= (1 &lt;&lt; PD5);//5<br>
 if (h/10==6) PORTD |= (1 &lt;&lt; PD6);//6<br>
 if (h/10==7) PORTD |= (1 &lt;&lt; PD7);//7<br>
 if (h/10==8) PORTB |= (1 &lt;&lt; PB0);//8<br>
 if (h/10==9) PORTD |= (1 &lt;&lt; PD4);//9<br>
<br>
}<br>
<br>
if(r==3)<br>
<br>
{<br>
 PORTD |= (1 &lt;&lt; PD0);// <br>
if (h%10==0) PORTD |= (1 &lt;&lt; PD3);//0<br>
 if (h%10==1) PORTD |= (1 &lt;&lt; PD2);//1<br>
 if (h%10==2) PORTB |= (1 &lt;&lt; PB1);//2<br>
 if (h%10==3) PORTB |= (1 &lt;&lt; PB3);//3<br>
 if (h%10==4) PORTB |= (1 &lt;&lt; PB4);//4<br>
 if (h%10==5) PORTD |= (1 &lt;&lt; PD5);//5<br>
 if (h%10==6) PORTD |= (1 &lt;&lt; PD6);//6<br>
 if (h%10==7) PORTD |= (1 &lt;&lt; PD7);//7<br>
 if (h%10==8) PORTB |= (1 &lt;&lt; PB0);//8<br>
 if (h%10==9) PORTD |= (1 &lt;&lt; PD4);//9<br>
 }<br>
<br>
_delay_ms(3);<br>
 PORTC &amp;= ~ (1 &lt;&lt; PC3); <br>
 PORTC &amp;= ~ (1 &lt;&lt; PC1);<br>
 PORTC &amp;= ~ (1 &lt;&lt; PC5);<br>
 PORTD &amp;= ~ (1 &lt;&lt; PD1); <br>
 PORTB=0x00;PORTC=0x00;PORTD=0x00;<br>
 _delay_ms(1);<br>
 }<br>
<br>
}<br>
 } <br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id386755/">https://habr.com/ru/post/id386755/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id386741/index.html">Bandara Prancis bangun karena kegagalan Windows 3.1, sistem operasi 1992</a></li>
<li><a href="../id386743/index.html">Deteksi langsung pertama gelombang gravitasi dibahas</a></li>
<li><a href="../id386747/index.html">Di abu radioaktif atau di roket</a></li>
<li><a href="../id386749/index.html">Kecuali GoPro. Siapa lagi yang membuat kamera aksi</a></li>
<li><a href="../id386751/index.html">Apakah 8 core, 13 megapiksel, 5,5 inci AMOLED dan $ 90? - Ini adalah UMi ROMA</a></li>
<li><a href="../id386757/index.html">Mengapa Dronk.ru menempatkan tautan rujukan pada hub?</a></li>
<li><a href="../id386759/index.html">$ 400 suspensi 3-axis DSLR</a></li>
<li><a href="../id386761/index.html">Orang dan robot: 4 titik kontak</a></li>
<li><a href="../id386763/index.html">Robot Jerman memukuli orang untuk belajar tidak membunuh mereka</a></li>
<li><a href="../id386765/index.html">Windows berusia 30 tahun</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>