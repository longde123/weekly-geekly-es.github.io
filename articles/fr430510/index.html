<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§ ğŸ•‹ ğŸ’± Comment Ã©crire du code que tout le monde comprendra? ğŸ‘¨ğŸ¿â€ğŸš€ ğŸ“’ ğŸœ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="D'un traducteur: Nous avons publiÃ© un article de Camil Lelonek pour vous sur la signification de la lisibilitÃ© du code et de Â«l'empathie des programme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment Ã©crire du code que tout le monde comprendra?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/430510/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5d/6f5/3cf/d5d6f53cf53a8dcce56ead2c2483b284.png"></div><br>  <b>D'un traducteur: Nous avons</b> publiÃ© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un article de</a> Camil Lelonek pour vous sur la signification de la lisibilitÃ© du code et de Â«l'empathie des programmeursÂ». <br><br>  Vous Ãªtes-vous dÃ©jÃ  demandÃ© qui verrait votre code?  Cela peut-il Ãªtre difficile pour les autres?  J'ai essayÃ© de dÃ©terminer sa lisibilitÃ© ?? <br><blockquote>  Â«Tout imbÃ©cile peut Ã©crire du code que la machine comprend.  Mais seuls les bons programmeurs Ã©crivent du code que les gens comprennent aussi Â», explique Martin Fowler. </blockquote>  De temps en temps, quand je vois des extraits de code, je perds confiance en l'existence de l'empathie chez les programmeurs.  Vous devez comprendre de quoi je parle - parce que chacun de nous est tombÃ© sur du code qui a Ã©tÃ© Ã©crit terriblement et qui Ã©tait pratiquement illisible. <br><a name="habracut"></a><blockquote>  <b>Skillbox recommande:</b> Cours pratique de deux ans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Je suis un dÃ©veloppeur Web PRO</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"</a> <br><br>  <b>Nous vous rappelons:</b> <i>pour tous les lecteurs de Â«HabrÂ» - une remise de 10 000 roubles lors de l'inscription Ã  un cours Skillbox en utilisant le code promo Â«HabrÂ».</i> </blockquote>  J'ai rÃ©cemment vu quelque chose comme Ã§a: <br><br><pre><code class="java hljs">defmodule Util.<span class="hljs-function"><span class="hljs-function">Combinators </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">then</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a, b)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function"> fn data -&gt; b.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a.(data)</span></span></span><span class="hljs-function">) end end def a ~&gt; b, </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">do</span></span></span><span class="hljs-function">: a |&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">then</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b)</span></span></span><span class="hljs-function"> end</span></span></code> </pre> <br>  En principe, tout va bien ici: peut-Ãªtre que quelqu'un a juste un fantasme ou que l'auteur du code a une solide formation mathÃ©matique.  Je ne voulais pas rÃ©Ã©crire ce code, mais inconsciemment, il me semblait que quelque chose n'allait pas ici.  Â«Il doit y avoir un moyen de l'amÃ©liorer, de le formuler diffÃ©remment.  Je vais voir comment tout fonctionne. "Je le pensais.  Assez rapidement, j'ai trouvÃ© ceci: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Util.{Reset, Combinators} # ... conn = conn!() Benchee.run( # ... time: <span class="hljs-number"><span class="hljs-number">40</span></span>, warmup: <span class="hljs-number"><span class="hljs-number">10</span></span>, inputs: inputs, before_scenario: do_reset!(conn) ~&gt; init, formatter_options: %{console: %{extended_statistics: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>}} )</code> </pre> <br>  Hmmm, il semble que non seulement ~&gt; soit importÃ©, mais aussi les fonctions conn! / 0 et do_reset! / 1.  Ok, jetons un Å“il au module de rÃ©initialisation: <br><br><pre> <code class="java hljs">defmodule Util.Reset <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> alias EventStore.{Config, Storage.Initializer} def conn! <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> {:ok, conn} = Config.parsed() |&gt; Config.default_postgrex_opts() |&gt; Postgrex.start_link() conn end def do_reset!(conn) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> fn data -&gt; Initializer.reset!(conn) data end end end</code> </pre> <br>  En ce qui concerne conn!, Il existe plusieurs faÃ§ons de rendre ce site plus facile.  NÃ©anmoins, l'arrÃªt Ã  ce stade n'a aucun sens.  Je prÃ©fÃ¨re me concentrer sur do_reset! / 1.  Cette fonction renvoie une fonction qui renvoie un argument et effectue une rÃ©initialisation pour l'initialiseur;  et le nom lui-mÃªme est assez compliquÃ©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bb/61a/11d/8bb61a11daa14a5df65cea9042198039.jpg"><br><br>  J'ai dÃ©cidÃ© de dÃ©sosser le code.  Selon la documentation de Benchee, before_scenario prend l'entrÃ©e de script comme argument.  La valeur de retour devient l'entrÃ©e pour les Ã©tapes suivantes.  Voici ce que l'auteur a probablement voulu dire: <br><br><ul><li>  Initialisation d'une connexion Postgrex. </li><li>  RÃ©initialisez EventStore. </li><li>  Utiliser des valeurs d'entrÃ©e comme Ã©lÃ©ments de configuration (parler du nombre de comptes). </li><li>  PrÃ©parer les donnÃ©es pour les tests (c'est-Ã -dire crÃ©er des utilisateurs et entrer dans l'application). </li><li>  Utilisation de repÃ¨res. </li></ul><br>  En gÃ©nÃ©ral, tout est clair, un tel code est facile Ã  Ã©crire.  Je note qu'en refactorisant je ne montrerai ni ne modifierai la fonction init, ce n'est pas trÃ¨s important ici. <br><br>  La premiÃ¨re Ã©tape consiste Ã  utiliser explicitement l'alias au lieu d'importations implicites.  Je n'ai jamais aimÃ© les fonctionnalitÃ©s Â«magiquesÂ» qui apparaissent dans mon code, mÃªme si Ecto.Query rend les requÃªtes Ã©lÃ©gantes.  Maintenant, notre module de connexion ressemble Ã  ceci: <br><br><pre> <code class="java hljs">defmodule Benchmarks.Util.Connection <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> alias EventStore.{Config, Storage.Initializer} def init! <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> with {:ok, conn} = Config.parsed() |&gt; Config.default_postgrex_opts() |&gt; Postgrex.start_link() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> conn end end def reset!(conn), <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: Initializer.reset!(conn) end</code> </pre> <br>  Ensuite, j'ai dÃ©cidÃ© d'Ã©crire un Â«crochetÂ», comme suggÃ©rÃ© dans la documentation: <br><br>  <i>before_scenario: fn entrÃ©es -&gt; entrÃ©es fin</i> <br><br>  Il ne reste plus qu'Ã  prÃ©parer les donnÃ©es.  Le rÃ©sultat final est le suivant: <br><br><pre> <code class="java hljs">alias Benchmarks.Util.Connection conn = Connection.init!() # ... Benchee.run( inputs: inputs, before_scenario: fn inputs -&gt; Connection.reset!(conn) init.(inputs) end, formatter_options: %{console: %{extended_statistics: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>}} ) Connection.reset!(conn)</code> </pre> <br>  Ce code est-il parfait?  Probablement pas encore.  Mais est-ce plus facile Ã  comprendre?  Je l'espÃ¨re.  Cela pourrait-il Ãªtre fait tout de suite?  Certainement oui. <br><br><h3>  Quel est le problÃ¨me? </h3><br>  Lorsque j'ai proposÃ© une solution Ã  l'auteur, j'ai entendu: Â«CoolÂ».  Cependant, je ne m'attendais pas Ã  plus. <br><br>  Le problÃ¨me est que le code principal a fonctionnÃ©.  La seule chose qui m'a amenÃ© Ã  penser au besoin de refactoring Ã©tait la structure trop complexe du code et sa faible lisibilitÃ©. <br><br>  Pour convaincre d'autres dÃ©veloppeurs de rendre leur code lisible, vous avez besoin de quelque chose de convaincant.  Et l'argument "J'ai dÃ©cidÃ© de refaire votre code, car il est obscur", ne sera pas acceptÃ©, la rÃ©ponse est "signifie que vous Ãªtes juste un mauvais dÃ©veloppeur, que puis-je faire Â¯ \ _ (ãƒ„) _ / Â¯." <br><br><img src="https://habrastorage.org/getpro/habr/post_images/46c/3ba/d64/46c3bad6448f8d6549b6c65cb7401023.png"><br><br><h3>  Il s'agit d'un problÃ¨me de (non) gestion </h3><br>  Personne n'est surpris que l'entreprise attende des rÃ©sultats des employÃ©s.  Et le plus tÃ´t ils seront reÃ§us, mieux ce sera.  Les gestionnaires Ã©valuent gÃ©nÃ©ralement le logiciel et sa rÃ©daction en termes de dÃ©lais, de budget, de vitesse.  Je ne dis pas que c'est mauvais, j'essaie juste d'expliquer pourquoi il n'y a pas de code de trop haute qualitÃ© qui "fonctionne juste".  Le fait est que les managers ne sont pas trÃ¨s intÃ©ressÃ©s par la beautÃ© et la lisibilitÃ©, ils ont besoin de ventes, de faibles coÃ»ts et de rÃ©sultats rapides. <br><br>  Lorsque les programmeurs sont pressÃ©s, ils cherchent une issue.  Le plus souvent, la solution est de crÃ©er un Â«code de travailÂ» dans lequel il peut y avoir un tas de Â«bÃ©quillesÂ».  Il est crÃ©Ã© sans penser que le code doit Ãªtre maintenu Ã  l'avenir.  Et un code Ã©lÃ©gant est trÃ¨s difficile Ã  Ã©crire rapidement.  Peu importe l'expÃ©rience du programmeur, lorsque le travail est effectuÃ© sous la pression du temps, personne ne pense Ã  la beautÃ©. <br><br>  Cette situation ne peut Ãªtre rÃ©solue qu'en convaincant les gestionnaires qu'un mauvais code (bien que fonctionnel) menace d'augmenter le coÃ»t de sa maintenance dans un avenir proche.  Correction de bugs et ajout de nouvelles fonctionnalitÃ©s, rÃ©vision, rÃ©daction de documentation technique - dans le cas d'un code de mauvaise qualitÃ©, tout cela prend beaucoup plus de temps que dans une situation oÃ¹ il est Ã©lÃ©gant et rationnel. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c84/b49/aab/c84b49aab74743e407730cd8168c2f0c.jpg"><br><br><h3>  Le rÃ´le important de l'empathie </h3><br>  Si vous dÃ©veloppez un logiciel, vous comprenez qu'il est destinÃ© Ã  d'autres personnes et que le dÃ©veloppement s'effectue en Ã©quipe.  Et l'empathie est trÃ¨s importante ici. <br><br>  Votre code est une forme de communication particuliÃ¨re.  Dans le processus de dÃ©veloppement de l'architecture des futurs logiciels, vous devez penser Ã  ceux qui interagiront avec votre code. <br><br>  Â«L'empathie des programmeursÂ» aide Ã  crÃ©er un code plus propre et plus rationnel, mÃªme lorsque les dÃ©lais sont Ã©puisÃ©s, et que le gestionnaire Â«Ã©craseÂ» constamment.  Cela aide Ã  comprendre ce que c'est que d'analyser le code illisible de quelqu'un d'autre, ce qui est extrÃªmement difficile Ã  comprendre. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/722/337/549/72233754963b16f39a4a9aaf80e8f43b.gif"><br><br><h3>  En conclusion </h3><br>  J'ai rÃ©cemment Ã©crit du code sur Elixir: <br><br><pre> <code class="erlang hljs">result = calculate_results() Connection.close(conn) result</code> </pre> <br>  J'ai ensuite pensÃ© Ã  une mÃ©thode de tap Ruby qui vous permet de rÃ©Ã©crire ce code: <br><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate_result</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do</span></span></span><span class="hljs-function"> C</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onnection</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(conn)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre> <br>  Ã€ mon humble avis, il serait prÃ©fÃ©rable de le faire sans le rÃ©sultat variable intermÃ©diaire.  J'ai rÃ©flÃ©chi Ã  la faÃ§on dont cela pourrait Ãªtre fait et suis arrivÃ© Ã  la conclusion suivante: <br><br><pre> <code class="erlang hljs">with result = calculate_results(), Connection.close(conn), do: result</code> </pre> <br>  Le rÃ©sultat sera le mÃªme.  Mais l'utilisation de avec peut causer des problÃ¨mes Ã  quelqu'un qui Ã©tudie ce code, car dans le cas habituel, avec est utilisÃ© diffÃ©remment. <br><br>  J'ai donc dÃ©cidÃ© de tout laisser tel quel, pour ne pas m'amÃ©liorer au dÃ©triment des autres.  Je vous demande de faire de mÃªme, sans compliquer le code au-delÃ  de toute mesure.  Avant d'introduire une fonction ou une variable exotique, n'oubliez pas que vos collÃ¨gues peuvent tout simplement ne pas les comprendre dans une revue. <br><br>  En gÃ©nÃ©ral, je recommande d'utiliser le principe suivant: "Lorsque vous Ã©crivez VOTRE code, pensez Ã  AUTRE." <br><blockquote><ul><li>  Cours en ligne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Profession frontend-developer"</a> </li><li>  Cours pratique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Mobile Developer PRO"</a> . </li><li>  Cours pratique annuel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"DÃ©veloppeur PHP de 0 Ã  PRO"</a> . </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430510/">https://habr.com/ru/post/fr430510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430500/index.html">Ã‰viter le chaos de la base de connaissances d'entreprise: notre expÃ©rience Confluence</a></li>
<li><a href="../fr430502/index.html">Test de charge avec le criquet</a></li>
<li><a href="../fr430504/index.html">MÃ©thodes de pensÃ©e junior et rationnelle</a></li>
<li><a href="../fr430506/index.html">Art sombre de la rÃ©surrection: comment rÃ©cupÃ©rer des donnÃ©es Ã  partir de supports endommagÃ©s</a></li>
<li><a href="../fr430508/index.html">DevOps: qu'est-ce que c'est vraiment</a></li>
<li><a href="../fr430512/index.html">Comment vivent les pigistes: ne travaillez pas avec des clients omniscients et laissez-vous tergiverser</a></li>
<li><a href="../fr430514/index.html">Blockchain Charity - DataArt remporte le hackathon du sommet de la blockchain de Malte</a></li>
<li><a href="../fr430518/index.html">Comment rendre le cadre de la Terre du Milieu: L'Ombre du Mordor</a></li>
<li><a href="../fr430520/index.html">PrÃ©sentation de Spring Data MongoDB</a></li>
<li><a href="../fr430522/index.html">Avez-vous besoin d'une culture d'entreprise en informatique? Confession du chef de marque du studio Krasnodar Plarium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>