<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô•Ô∏è üôå üéûÔ∏è Casa inteligente sobre ruedas ... Alice ‚õ≥Ô∏è üì† ‚ôãÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Actualmente, pude darme cuenta de una de las capacidades de un hogar inteligente, a saber, el control de voz completo de la luz a trav√©s del serv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Casa inteligente sobre ruedas ... Alice</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483922/">  Hola  Actualmente, pude darme cuenta de una de las capacidades de un hogar inteligente, a saber, el control de voz completo de la luz a trav√©s del servicio Yandex de Alice, en particular a trav√©s de la estaci√≥n Yandex de columna inteligente y Alice en el tel√©fono.  Pero todo tambi√©n funcionar√° en cualquier dispositivo en el que est√© instalado.  La instalaci√≥n de la luz se basa en 4 controladores RGBWW MiLight FUT039 y el controlador WiFi MiLight ibox2 (que extrae 4 zonas de control), los controladores MiLight (3 piezas) est√°n configurados en paralelo y funcionan como control de respaldo en ausencia de Internet, pero casi no tienen relaci√≥n con el control por voz, por lo tanto, no los tendremos en cuenta. <br><br>  ¬øCu√°l es la diferencia entre esta implementaci√≥n?  El circuito de control es simple de implementar, no requiere ninguna habilidad de programaci√≥n y cuesta el costo de un altavoz inteligente y una microcomputadora Raspberry 3, el software para la microcomputadora es completamente gratuito.  Y no necesita conectar los dispositivos que controla a los servidores de los fabricantes.  Se necesita Internet para los servicios de Alice y Yandex, y debe escupirlo en el puerto 443. <br><a name="habracut"></a><br>  Brevemente describir√© c√≥mo llegu√© a esto.  Inicialmente, la luz fue controlada por los controladores MiLight FUT039 a trav√©s de controles remotos colgados en los puntos m√°s convenientes del apartamento, luego compr√© el controlador iBox2, despu√©s de lo cual pude controlar la luz tambi√©n desde el tel√©fono.  Pronto, siguiendo el consejo de un colega, adquir√≠ una estaci√≥n Yandex-mini muy inteligente, realmente me gust√≥ la oportunidad de establecer una alarma por voz, establecer recordatorios y otras cosas insignificantes.  Despu√©s de eso, result√≥ que la columna puede administrar dispositivos inteligentes, incluso a trav√©s de cuentas en los sitios web de los fabricantes. <br><br>  Despu√©s de leer la informaci√≥n sobre c√≥mo funciona el control a trav√©s de paquetes de cuentas, surgi√≥ la idea de que de alguna manera puede dar comandos directamente a dispositivos inteligentes a trav√©s de Wi-Fi, porque de alguna manera el tel√©fono pudo controlar la luz a trav√©s de Wi-Fi.  En realidad, todo result√≥ ser un poco diferente, tuve que palear y descartar muchas opciones rotas como transferir la salida de scripts en python o pkhp a trav√©s de un m√≥dulo de radio, pero como resultado todo result√≥. <br><br>  Inmediatamente dar√© art√≠culos con enlaces en funci√≥n de los cuales se implement√≥ y describir√© un poco lo que tom√© de all√≠.  Lo m√°s interesante es que cada art√≠culo dio su direcci√≥n en la gesti√≥n de dispositivos, pero el efecto fue combinar estas caracter√≠sticas. <br><br>  Entonces <br><br><h4>  1. <a href="https://habr.com/ru/post/412261/">"Alice, enciende la luz"</a> </h4><br>  El primer art√≠culo, pero no el principal.  Lo principal que tom√© de aqu√≠ es informaci√≥n sobre la existencia de Openhab2, la instalaci√≥n y conexi√≥n del controlador iBox2 a √©l.  Despu√©s de instalar el hub abierto, pude controlar la luz tambi√©n desde la computadora.  Lo m√°s b√°sico son los primeros 3 cap√≠tulos, luego, en mi opini√≥n, las tonter√≠as fueron.  Pido disculpas al autor, pero lo es.  Conectar m√°s recursos externos izquierdos (Internet) para configurar la comunicaci√≥n m√°s alg√∫n tipo de "hechizos m√°gicos" es un fracaso. <br><br><h4>  2. <a href="https://habr.com/ru/post/465537/">"Yandex: una casa inteligente para adultos"</a> </h4><br>  Este art√≠culo es b√°sico y vinculante.  Fue aqu√≠ donde me di cuenta de d√≥nde moverme y c√≥mo implementar todo.  El autor ofrece un esquema general de interacci√≥n entre dispositivos y servicios, adem√°s de que desmonta claramente el sistema de comandos y dispositivos en YandexUD.  Y lo m√°s importante es el complemento <a href="https://habr.com/ru/users/munrexio/" class="user_link">yandex2mqtt</a> escrito por el autor <a href="https://habr.com/ru/users/munrexio/" class="user_link">Munrexio</a> ( <a href="https://sprut.ai/client/plugins/instruction/1821" rel="nofollow">https://sprut.ai/client/plugins/instruction/1821</a> ), sin el cual nada hubiera funcionado.  En resumen, lo que obtuve de aqu√≠: el complemento yandex2mqtt, la idea de usar un servidor MQTT para transferir estados y comandos, el sistema de trabajar con YandexUnnyDom y Yandex.Dialogs mediante el uso de certificados de autorizaci√≥n y registro de habilidades.  Tom√≥ todo hasta la cabeza de Node-Red.  Adem√°s, los detalles asociados con el uso del controlador Wiren Board por parte del autor, es decir  Leer es principalmente para comprensi√≥n general.  En mi caso, el m√≥dulo principal es OpenHub, que admite la administraci√≥n de dispositivos, y el complemento yandex2mqtt y el servidor MQTT son los elementos de conexi√≥n con los servicios de Yandex. <br><br>  Informacion adicional: <br><br><h4>  3. Raspberry Pi: configuraci√≥n / prueba del agente y el cliente Mosquitto en Raspberry Pi </h4><br>  ¬øQu√© es MQTT y por qu√© se necesita en IIoT?  Descripci√≥n del protocolo MQTT <a href="http://wikihandbk.com/wiki/Raspberry_Pi:%25D0%259D%25D0%25B0%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B9%25D0%25BA%25D0%25B0/%25D0%25A2%25D0%25B5%25D1%2581%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B1%25D1%2580%25D0%25BE%25D0%25BA%25D0%25B5%25D1%2580%25D0%25B0_%25D0%25B8_%25D0%25BA%25D0%25BB%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B0_Mosquitto_%25D0%25BD%25D0%25B0_Raspberry_Pi" rel="nofollow">http://wikihandbk.com/wiki/Raspberry_Pi:%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0% B0 /% D0% A2% D0% B5% D1% 81% D1% 82% D0% B8% D1% 80% D0% BE% D0% B2% D0% B0% D0% BD% D0% B8% D0% B5_ % D0% B1% D1% 80% D0% BE% D0% BA% D0% B5% D1% 80% D0% B0_% D0% B8_% D0% BA% D0% BB% D0% B8% D0% B5% D0 % BD% D1% 82% D0% B0_Mosquitto_% D0% BD% D0% B0_Raspberry_Pi # .D0.A2.D0.B5.D1.81.D1.82.D0.B8.D1.80.D0.BE.D0. B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B1.D1.80.D0.BE.D0.BA.D0.B5.D1.80.D0.B0_.D0.B8_. D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D0.B0_Mosquitto_.D0.BD.D0.B0_Raspberry_Pi.5B1.5D</a> - parte de la aplicaci√≥n, instalaci√≥n y trabajo en la l√≠nea de comando para controles de salud <br>  <a href="https://ipc2u.ru/articles/prostye-resheniya/chto-takoe-mqtt/" rel="nofollow">https://ipc2u.ru/articles/prostye-resheniya/chto-takoe-mqtt/</a> - una comprensi√≥n general del protocolo <br><br><h4>  4. <a href="https://dialogs.yandex.ru/developer/" rel="nofollow">https://dialogs.yandex.ru/developer/</a> , <a href="https://dialogs.yandex.ru/developer/skills/" rel="nofollow">https://dialogs.yandex.ru/developer/skills/</a> plataforma de di√°logo para crear y probar habilidades </h4><br>  La instalaci√≥n y la configuraci√≥n se describen en detalle en los art√≠culos originales, por lo que solo le dar√© el procedimiento.  En un futuro cercano, publicar√© la imagen de Raspbian con un sistema de trabajo, por supuesto, cambiar√© mis contrase√±as y eliminar√© los certificados de trabajo, las instrucciones para crearlas est√°n en los art√≠culos, y luego, a medida que pase el tiempo, volver√© a subir el sistema a una nueva imagen y escribir√© las instrucciones para los elementos con los comandos de instalaci√≥n y ajustes  Debo decir de inmediato que hay mucho exceso en la imagen, trat√© de controlar a Milight en ella a trav√©s del m√≥dulo de radio RF24 y los scripts de Python que encontr√© en el github.  Pero no funcion√≥ un solo m√©todo, as√≠ que obtuve un puntaje en ellos, pero no limpi√© el sistema. <br><br>  Vamos  Configuramos raspban light, naturalmente actualizado, configuramos y configuramos mosquitos (los art√≠culos describen las configuraciones con acceso por usuario y contrase√±a), reenv√≠an los puertos en el enrutador, luego bajo el art√≠culo "hogar inteligente por adulto" registramos el dominio para recibir certificados y obtener certificados.  Instalamos el complemento yandex2mqtt, lo configuramos, le asignamos certificados, inicios de sesi√≥n y contrase√±as, editamos dispositivos y temas mqtt.  Nos registramos en Yandex.oAuth, obtenemos tokens para nuestro dominio all√≠ y nos registramos en YandexUD, donde prescribimos el acceso y todo lo dem√°s.  Despu√©s de la aprobaci√≥n exitosa del borrador por parte del moderador, puede ver los dispositivos desde el complemento yandex2mqtt en el tel√©fono en la aplicaci√≥n Yandex o en la computadora en el servicio <a href="https://dialogs.yandex.ru/developer/skills/" rel="nofollow">https://dialogs.yandex.ru/developer/skills/</a> en el borrador en la pesta√±a Prueba. <br><br>  Ahora establecemos y configuramos el centro abierto del art√≠culo "Alice, enciende la luz", tambi√©n puedes encontrar un art√≠culo sobre c√≥mo configurar el centro abierto en otros recursos.  Despu√©s de agregar, configurar y verificar los dispositivos MiLIght, los dispositivos mqtt ( <a href="https://robot-on.ru/articles/prostaya-rabota-s-mqtt-v-openhab-2" rel="nofollow">https://robot-on.ru/articles/prostaya-rabota-s-mqtt-v-openhab-2</a> ), los canales y las direcciones de temas se configuran en el hub abierto.  Seg√∫n tengo entendido, los dispositivos en el complemento yandex2mqtt reciben comandos de los servicios de Yandex y los convierten a verdadero / falso (0/1, respectivamente) o al nivel actual en porcentaje con un paso personalizado.  El complemento env√≠a estos datos a los temas, es decir, es el editor, y el openhub, como suscrito a los temas, toma valores de los temas correspondientes y los env√≠a a elementos de conmutaci√≥n en los dispositivos registrados en √©l, como resultado de lo cual los dispositivos est√°n controlados. <br><br>  Como cualquier negocio que se hace por primera vez, hay varios matices. <br><br><ol><li>  Pude instalar un openhub en mi microcomputadora en funcionamiento, incluso si ten√≠a que patearlo.  Pero no pudo volver a instalarlo en una nueva imagen limpia, y la soluci√≥n que apareci√≥ la √∫ltima vez no ayud√≥.  Error (HTTP ERROR 404 Problema al acceder / inicio / √≠ndice. Motivo: no encontrado).  Tenlo en cuenta.  Pero como opci√≥n, openhub tambi√©n se puede instalar en una computadora para realizar pruebas. </li><li>  El certificado de dominio para letsencrypt.org se emite por tres meses.  No me he molestado en obtener otro certificado m√°s largo </li><li>  Un borrador de la habilidad en <a href="https://dialogs.yandex.ru/developer/" rel="nofollow">https://dialogs.yandex.ru/developer/</a> pas√≥ con √©xito la moderaci√≥n, pero a√∫n no ha podido publicarlo.  Error (errores de validaci√≥n: - URL de punto final: error al implementar el protocolo de inicio inteligente: user_unlink: no encontrado).  Hasta que descubr√≠ cu√°l es el problema.  Esto no impide que el sistema funcione, pero no recuerdo si hay restricciones en la duraci√≥n de la habilidad no publicada. </li><li>  Encontr√≥ un error: result√≥ que en las fuentes yandex2mqtt en el archivo app.js en la l√≠nea "app.post ('/ provider // v1.0 / user / unlink', routes.user.unlink);" es oblicuo adicional.  Corregido en mi microordenador: la publicaci√≥n fue exitosa. </li><li>  Tambi√©n arregl√© la secci√≥n de cambio de canal para el dispositivo "TV" en config.js, el original no funcionaba </li></ol><br>  Y, por √∫ltimo, las perspectivas de este grupo de hub abierto, plug-in y mosquito.  OpenHub es el n√∫cleo del sistema y puede controlar una gran cantidad de dispositivos (y esto no es cien piezas de hierro), y no solo la luz.  Ahora estoy filmando Gnusmas TV para control de voz.  Como tal gesti√≥n ya funciona, probablemente pueda copiar todo lo que est√° all√≠ en la misma Alice, puede imaginarlo usted mismo.  Por cierto, hay un par de observaciones de hoy.  Descubr√≠ que la luz de la casa se puede controlar desde cualquier lugar donde haya Internet para Alice, por ejemplo, desde un tel√©fono del otro extremo de la ciudad e incluso se puede controlar a trav√©s de una c√°mara dom√©stica.  Y dado que la lista de comandos para controlar el dispositivo ya est√° registrada en la habilidad, adem√°s de que los comandos de voz se reconocen y se convierten en texto, no puede quejarse al tel√©fono "Alice, apaga la luz en el dormitorio", sino simplemente escribe "Apaga la luz en el dormitorio" y funcionar√° <br><br>  Bueno, el video en s√≠: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/76LgHWx07rs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a href="https://habr.com/ru/post/483922/">https://habr.com/ru/post/483922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../483912/index.html">¬øQu√© hay de nuevo en YouTrack en 2020?</a></li>
<li><a href="../483914/index.html">Te invitamos a DINS JavaScript EVENING: hablamos sobre el dise√±o de API y resolvemos problemas usando tipos de datos algebraicos</a></li>
<li><a href="../483916/index.html">DJI no ha podido parchear las aplicaciones DJI Fly para Android 10 desde hace un mes</a></li>
<li><a href="../483918/index.html">Entrenamiento corporativo: los l√≠deres ense√±an a los l√≠deres</a></li>
<li><a href="../483920/index.html">Caos de dependencia de Python</a></li>
<li><a href="../483926/index.html">Three.js y geometr√≠a</a></li>
<li><a href="../483930/index.html">6 proyectos de desarrollo web de GitHub que vale la pena ver</a></li>
<li><a href="../483934/index.html">Permisos de archivos de Linux</a></li>
<li><a href="../483936/index.html">Conferencia de desarrollo de juegos</a></li>
<li><a href="../483938/index.html">Nakamichi: sobre los dioses de la era del cassette y los tiempos en que el sol naciente brillaba m√°s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>