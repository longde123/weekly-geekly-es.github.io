<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💮 🛤️ 🌽 Buka webinar: "SSH / NC / Socat: tips & trik" 💪🏾 🧕🏼 🗒️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari baik untuk semua! 

 Minggu depan kami meluncurkan grup Administrator Linux berikutnya, sehubungan dengan itu kami mengadakan sejumlah acara. Sal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Buka webinar: "SSH / NC / Socat: tips & trik"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/437114/">  Hari baik untuk semua! <br><br>  Minggu depan kami meluncurkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">grup Administrator Linux</a> berikutnya, sehubungan dengan itu kami mengadakan sejumlah acara.  Salah satunya adalah pelajaran terbuka tentang topik "SSH / NC / Socat: tips &amp; trik".  Di atasnya kita ingat apa ssh, sejarah dan misinya.  Kami memeriksa berbagai opsi untuk penggunaannya: remote, penerusan port lokal, salinan aman, proxy kaus kaki, proxy terbalik.  Kami benar-benar mencoba utilitas nc dan socat di lab virtual. <br><br>  Webinar ini dilakukan oleh administrator sistem berpengalaman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Vladimir Drozdetsky</a> , pengembang infrastruktur di letundra.com, exposcan.ru, crispmessenger.com. <br><br>  Kami memberi Anda uraian terperinci tentang peristiwa masa lalu. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/n7jxFK9SMsk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>  <b>Ingat Apa itu SSH</b> <br><br>  SSH (Secure Shell) adalah "secure shell", protokol jaringan tingkat aplikasi.  Ini memungkinkan Anda untuk mengontrol sistem operasi dan koneksi TCP dari jarak jauh (misalnya, untuk mentransfer file).  Dalam fungsinya, SSH mirip dengan protokol Telnet dan rlogin, namun berbeda dari protokol karena mengenkripsi semua lalu lintas, termasuk kata sandi yang dikirimkan.  Spesifikasi protokol SSH-2 terkandung dalam RFC 4251. <br><br>  Mari kita lihat berbagai kegunaan SSH, baik standar maupun non-standar.  Stand berikut akan membantu kami dalam hal ini: <br><br><img src="https://habrastorage.org/webt/mi/d9/2a/mid92ankvqf8pgggjz7orphgps4.png"><br><br>  Stand menghadirkan empat mesin virtual yang ada di belakang firewall.  Kami akan melakukan semua tindakan dari mesin Node-1. <br><br>  <b>Membuat Kunci SSH</b> <b><br></b> <br>  Untuk menggunakan kunci SSH, Anda harus membuatnya terlebih dahulu.  Untuk ini, utilitas khusus cocok, yang mutlak dalam distribusi Linux: <br><br><pre><code class="plaintext hljs">ssh-keygen -t RSA -N otuslinux -f ~/.ssh/otus</code> </pre> <br><ul><li>  -t - algoritma enkripsi mana yang digunakan; </li><li>  -N - kunci enkripsi (argumen yang nyaman jika Anda perlu membuat kunci tanpa enkripsi dan respons terhadap berbagai permintaan ssh-keygen); </li><li>  -f - di mana file untuk menyimpan kunci. </li></ul><br>  <b>Pengaturan SSH ssh-server</b> <br><br>  Untuk pekerjaan lebih lanjut, Anda perlu mengedit file / etc / ssh / sshd_config dan restart server ssh.  Di sini Anda harus memperhatikan opsi-opsi berikut: <br><br>  <code>RSAAuthentication yes</code> (apakah otentikasi RSA diizinkan); <br>  <code>PubkeyAuthentication yes</code> (apakah otentikasi dengan kunci diizinkan); <br>  <code>AuthorizedKeysFile %h/.ssh/authorized_keys</code> (path ke bagian publik dari kunci); <br>  <code>PasswordAuthentication yes</code> (apakah otentikasi diizinkan). <br><br>  Untuk menyalin kunci ke server, lanjutkan sebagai berikut: <br><br>  <code>ssh-copy-id -i /path/to/pub/key user@server</code> (salin bagian publik dari kunci ke server jarak jauh, kunci publik akan disalin di sepanjang jalan ke file% h / .ssh / official_keys) <br><br>  Agar tidak memasukkan kunci enkripsi lagi setiap kali saat menghubungkan ke server jarak jauh, kita dapat menggunakan ssh-agent.  Untuk melakukan ini: <br><br>  <code>eval $(ssh-agent -s)</code> (eval adalah bagian dari POSIX. Antarmukanya juga bisa berupa shell. Kunci dalam agen akan disimpan dalam bentuk yang didekripsi). <br><br>  <code>ssh-add ~/.ssh/our_private_key</code> (Tambahkan kunci pribadi). <br><br>  Dalam hal ini: <br><br><ul><li>  -i - menunjukkan lokasi kunci publik; </li><li>  pengguna - nama pengguna pada server jarak jauh; </li><li>  server - ip atau dns dari server target. </li></ul><br>  Untuk kemudahan menghubungkan ke server jauh, kita dapat menggambarkan parameter koneksi dalam file konfigurasi ssh, yang terletak di path ~ / .ssh / config <br><br>  Dengan demikian, kita mendapatkan file konfigurasi SSH berikut: <br><br><pre> <code class="bash hljs">Host myserver HostName ip/hostname Port 22/??? User username IdentityFile ~/.ssh/id_rsa</code> </pre> <br>  Semuanya sederhana di sini: <br><br><ul><li>  Tuan rumah - nama koneksi kami; </li><li>  HostName - nama server; </li><li>  Port - ssh port </li><li>  Pengguna - nama pengguna; </li><li>  IdentityFile - kunci ssh. </li></ul><br>  <b>SSH SCP</b> <br><br>  Mari kita lanjutkan.  Cara termudah untuk menggunakan SSH adalah menyalin file dari satu mesin ke remote.  Untuk melakukan ini, gunakan utilitas SCP (Secure Copy Protocol).  Dengan menggunakannya, Anda dapat menyalin direktori atau file dari server lokal ke server jarak jauh, atau sebaliknya: <br><br>  <code>scp test.txt username@server:/some/directory</code> (Menyalin file dari server lokal ke server jarak jauh). <br>  <code>scp username@server:test.txt /some/directory</code> (Menyalin file dari server jauh ke yang lokal). <br>  <code>scp -r dir_name username@server:/some/directory</code> (Menyalin folder dari server lokal ke remote). <br><br>  Di sini: <br><br><ul><li>  nama pengguna - nama pengguna; </li><li>  server - alamat server; </li><li>  / some / server - direktori tempat kita menyalin; </li><li>  dir_name - nama folder; </li><li>  -r - gunakan secara rekursif. </li></ul><br>  <b>Terowongan SSH, proksi</b> <br><br>  Sekarang mari kita lihat opsi penerusan port dengan remote ke mesin lokal.  Ambil contoh klasik sebagai contoh, yaitu banyak ketika kita memiliki "penjaga keamanan jahat" dan satu server dengan aplikasi web, port ssh dan https mencari ke dunia, dan kami benar-benar ingin terhubung ke server MySQL. <br><br>  Jadi: <br><br>  <code>ssh -f -N -L 9906:127.0.0.1:3306 user@server</code> (Hanya kasus kami dengan MySQL) <br><br>  Akibatnya, kita dapat terhubung ke port lokal 9906 dengan klien mysql dan sampai ke server "keamanan" kami. <br><br>  <code>ssh -D 8080 -q -C -N -f servername</code> (Proxying traffic melalui SOCKS melalui port 8080) <br><br>  Dengan perintah ini, kami membuat server proxy socks5 menggunakan ssh.  Untuk memeriksa kinerjanya, kita dapat menggunakan perintah berikut: <br><br><pre> <code class="plaintext hljs">curl -x socks5h://server-with-proxy:8080 https://test.domain</code> </pre><br>  Contoh klasik dari penerusan port menggunakan ssh adalah ketika server yang ingin Anda sambungkan berada di belakang nat.  Perintah berikut akan membantu kami terhubung ke server seperti itu: <br><br>  <code>ssh -f -N -R 2255:localhost:22 username@servername</code> (meneruskan dari server jauh ke server lokal). <br><br>  Pada server jarak jauh, port 2255 akan terbuka, yang akan dialihkan ke port 22 dari server kami untuk nat.  Untuk terhubung ke server seperti itu, kita dapat menggunakan perintah: <br><br><pre> <code class="plaintext hljs">ssh -p 2255 username@localhost</code> </pre><br>  Harap dicatat bahwa: <br><br><ul><li>  -f - kirim ssh ke latar belakang; </li><li>  -N - jangan menjalankan perintah pada remote host; </li><li>  -L - meneruskan port lokal (port lokal: mesin lokal: port jarak jauh); </li><li>  -R - port pada mesin jarak jauh; </li><li>  -q - mode diam; </li><li>  -D - mendefinisikan perutean dinamis lokal port level aplikasi; </li><li>  -C - permintaan untuk kompresi data. </li></ul><br>  <b>Netcat (nc)</b> <br><br>  Perhentian kami berikutnya adalah Netcat, utilitas Unix yang memungkinkan Anda membuat koneksi TCP dan UDP, menerima data dari sana, dan mentransfernya.  Terlepas dari kegunaan dan kesederhanaannya, utilitas ini tidak termasuk dalam standar apa pun dan tidak disertakan dengan kit distribusi apa pun.  Oleh karena itu, harus dipasang dengan tangan. <br><br>  Salah satu fitur menarik dari Netcat (nc) adalah kemampuan untuk memindai port: <br><br>  <code>nc -vn ipaddress 22</code> (pemindaian port tunggal); <br>  <code>nc -v ipaddress 10-55</code> (pemindaian jangkauan port); <br>  <code>nc -l 4444</code> (buka dan dengarkan port 4444); <br>  <code>nc servername 4444</code> (kami terhubung ke server pada port yang diinginkan). <br><br>  Setelah membuka port dan menghubungkannya, kami mendapatkan ruang obrolan jaringan kecil =). <br><br>  Selanjutnya, kami mempertimbangkan kemungkinan mentransfer file menggunakan utilitas nc.  Untuk melakukan ini, perintah berikut akan membantu kami: <br><br> <code>cat test_file | pv -b | nc -l 4444</code>  <code>cat test_file | pv -b | nc -l 4444</code> (buka port dan transfer file ke dalamnya melalui pipa, utilitas pv dengan switch -b digunakan untuk menampilkan progres transfer file dalam byte). <br><br> <code>nc servername 4444 | pv -b &gt; filename</code>  <code>nc servername 4444 | pv -b &gt; filename</code> (kami terhubung ke server untuk menerima file, pv -b digunakan dengan cara yang sama). <br><br>  Kami dapat menyulitkan pipa kami dengan menambahkan pengarsipan file dengan cepat: <br><br> <code>tar -czf - /path/to/ | pv -b | nc -l 4444</code>  <code>tar -czf - /path/to/ | pv -b | nc -l 4444</code> (folder pengarsipan dengan cepat dan mengirim); <br>  n <code>c servername 4444 | pv -b &gt; file.tar.gz</code>  <code>c servername 4444 | pv -b &gt; file.tar.gz</code> (dapatkan arsip terkirim). <br><br>  Fitur yang tidak terlalu jelas dari nc adalah membuat server http saja. <br><br><pre> <code class="plaintext hljs">while true; do nc -lp 80 &lt; index.html; done</code> </pre> <br>  Harap dicatat bahwa untuk menggunakan port 80, Anda harus memiliki hak akses root. <br><br>  Perhatikan juga bahwa: <br><br><ul><li>  -l - menunjukkan mode operasi mendengarkan; </li><li>  -n - jangan gunakan permintaan DNS; </li><li>  -v - keluaran verbose. </li></ul><br>  <b>Socat</b> <br><br>  Ini juga merupakan utilitas yang berguna yang memungkinkan Anda untuk membuat koneksi TCP antara mesin, port forward, dll. Ia bekerja berdasarkan prinsip Netcat: ia membuka dua koneksi dua arah, dapat mentransfer data, stream, dll. Namun, ia memiliki satu fitur menarik.  Misalnya, menggunakan Socat, kita dapat memetakan port COM ke port TCP, dll. <br><br>  Contoh pekerjaan sosial: <br><br>  <code>socat -u FILE:file_name TCP-LISTEN:5778,reuseaddr</code> # send file; <br> <code>socat -u TCP:192.168.1.48:5778 STDOUT | pv -r &gt; file_name</code>  <code>socat -u TCP:192.168.1.48:5778 STDOUT | pv -r &gt; file_name</code> # get file; <br>  <code>socat TCP-LISTEN:80,fork TCP:ubuntunode-4:80</code> # mengalihkan port server jarak jauh ke port lokal; <br>  <code>socat TCP-LISTEN:1234,reuseaddr EXEC:/bin/bash</code> # Buka remote shell =); <br>  <code>socat - TCP:server_with_remote_shell:1234</code> # Sambungkan ke shell remote dari server jauh. <br><br>  Dekripsi kecil: <br><br><ul><li>  -u - penggunaan mode searah; </li><li>  FILE - menunjukkan bahwa kami menggunakan file; </li><li>  TCP-LISTEN - dengarkan port tcp; </li><li>  reuseaddr - memungkinkan soket lain untuk berkomunikasi dengan alamat yang sama, bahkan jika digunakan; </li><li>  garpu - setelah koneksi dibuat, saluran diproses dalam proses anak; </li><li>  TCP adalah jenis koneksi. </li></ul><br>  <b>Haruskah saya menonton versi video sekarang?</b> <br><br>  Tentu saja ya, karena dalam uraian semuanya disajikan secara abstrak.  Selain itu, topik dalam webinar dijelaskan secara lebih rinci, ditambah beberapa di antaranya memberikan contoh tambahan dan opsi implementasi.  Jadi, jika Anda tertarik dengan topik ini, lihat pelajaran terbuka secara penuh dan ulangi semua langkah untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Vladimir Drozdetsky</a> untuk asimilasi maksimum materi.  Dan jangan lupa untuk meninggalkan komentar Anda. <br><br>  Kami, pada gilirannya, tidak mengucapkan selamat tinggal dan mengundang Anda ke kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Administrator Linux</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id437114/">https://habr.com/ru/post/id437114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id437104/index.html">Introscope: baik, unit pengujian sangat malas</a></li>
<li><a href="../id437106/index.html">IT di zona .it</a></li>
<li><a href="../id437108/index.html">Sebagian besar teks di Internet ditulis oleh orang gila.</a></li>
<li><a href="../id437110/index.html">Nanomaterial mengubah dunia kita, dan kita masih belum memiliki prosedur untuk memeriksa keamanannya</a></li>
<li><a href="../id437112/index.html">DMA: Mitos dan Realita</a></li>
<li><a href="../id437116/index.html">AWS, MongoDB, dan realitas ekonomi open source</a></li>
<li><a href="../id437118/index.html">AI dan 2048. Bagian 1: Metode Monte Carlo</a></li>
<li><a href="../id437120/index.html">Kursi kantor Korea: Sensasi Keajaiban Harachair</a></li>
<li><a href="../id437122/index.html">Memberi nama benda</a></li>
<li><a href="../id437124/index.html">Cara mudah untuk menambahkan banyak bahasa ke situs Anda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>