<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍👩‍👦‍👦 👨🏿‍🎨 👩🏼‍🌾 Menjinakkan protokol kepercayaan - OAuth otentikasi dengan InterSystems IRIS 🉐 🎅🏼 🍘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bagaimana memungkinkan komputer saling mempercayai ketidakhadiran Anda, sambil menjaga keamanan dan privasi? 



 - Martini kering. Dalam gelas besar....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menjinakkan protokol kepercayaan - OAuth otentikasi dengan InterSystems IRIS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/466699/">  <b>Bagaimana memungkinkan komputer saling mempercayai ketidakhadiran Anda, sambil menjaga keamanan dan privasi?</b> <br><br><img src="https://habrastorage.org/webt/wn/au/eu/wnaueun6knwbjc4anclcexjbfwi.jpeg"><br><br>  - Martini kering.  Dalam gelas besar. <br>  - Oui, tuan.  [Ya, Monsieur (Fr.)] <br>  "Sebentar, tidak semua."  Tiga jari Gordon, satu vodka, setengah jari Kina Lyklet.  Kocok dengan baik dalam shaker, dan kemudian masukkan sepotong besar lemon.  Apakah kamu ingat? <br><br>  Jan Fleming, Casino Royale, 1953 <br><br><h2>  Bagian 1. OAuth 2.0 dan OpenID Connect Stories </h2><br>  Universal dan, tampaknya, hari ini di abad ke-21, sekelompok delegasi akses terbuka dan protokol otentikasi favorit semua orang disebut OAuth + OIDC.  Lebih baik untuk penggunaan massal, mereka belum membuat apa pun.  Mereka sangat populer dengan vendor front-end karena mereka berjalan di atas protokol HTTP (S) dan menggunakan wadah JWT ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">JSON Web Token</a> ).  OpenID Connect menggunakan OAuth untuk pekerjaannya atau, dengan kata lain, OIDC adalah pembungkus untuk OAuth. <br><br>  OpenID - standar terbuka untuk otentikasi dan pembuatan sistem identifikasi digital bukanlah hal baru bagi pengembang.  Tahun ini, dia berusia 14 tahun.  Dalam versi ketiga saat ini, nama lengkapnya adalah OpenID Connect atau lebih pendek dari OIDC.  Ini populer baik dalam pengembangan web dan seluler, dan dalam sistem perusahaan. <br><a name="habracut"></a><br>  Rekannya, Standar Delegasi Akses Terbuka OAuth, berusia 12 tahun.  Dan 9 tahun sejak standar RFC 5849 yang sesuai muncul. Kami akan mengandalkan versi modern dari protokol OAuth 2.0 dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 6749</a> saat ini.  Ingatlah bahwa OAuth 2.0 tidak kompatibel dengan pendahulunya OAuth 1.0. <br><blockquote> OAuth - protokol terbuka (skema, transportasi) untuk mendelegasikan akses, yang memungkinkan menyediakan akses terbatas kepada pihak ketiga ke sumber daya yang dilindungi pengguna tanpa perlu mentransfer ke mereka (pihak ketiga) login dan kata sandi RFC 6749 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">oauth.net</a> adalah situs web OAuth terkemuka yang diselenggarakan oleh Aaron Parecki <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">oauth.com</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tutorial</a> OAuth dan Lingkungan Uji <br><br>  Open ID Connect (OIDC) adalah standar terbuka untuk sistem identifikasi terdesentralisasi yang memungkinkan pengguna untuk membuat satu akun untuk identifikasi pada berbagai sumber daya Internet yang tidak terkait menggunakan layanan pihak ketiga, menggunakan pesan OAuth dan wadah JWT untuk komunikasi yang aman. <br></blockquote>  Sebenarnya, OAuth bukan protokol, tetapi seperangkat aturan (skema) untuk memisahkan dan mentransfer operasi identifikasi pengguna ke server tepercaya saat menerapkan arsitektur pembatasan akses kontrol dalam sistem perangkat lunak. <br><br>  Dan, perhatian, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OAuth tidak bisa mengatakan apa-apa tentang pengguna tertentu</a> !  Baik siapa dia, atau di mana dia sekarang, atau bahkan apakah dia bekerja di depan komputer sekarang atau tidak.  Tetapi kemudian memungkinkan untuk berinteraksi dengan sistem tanpa campur tangan pengguna, menggunakan token akses yang sudah dikeluarkan.  Ini poin penting. <br><blockquote>  Ini mungkin berguna: <br><br><ul><li>  OAuth menggabungkan dengan sempurna dengan penggunaan bahasa deskripsi akses atribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">XACML</a> </li><li>  OAuth juga mengandalkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Akses yang Dikelola Pengguna</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UMA</a> ) </li></ul><br>  Penggunaan bersama OAuth + OIDC + UMA memungkinkan penerapan sistem identifikasi dan kontrol akses yang aman (Identity and Access Management - IdM, IAM) di berbagai area subjek, misalnya: <br><br><ul><li>  menggunakan profil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">HEART</a> (Health Relationship Trust) dari data pribadi pasien dalam kedokteran </li><li>  pada platform identifikasi pelanggan CIAM (Identitas Konsumen dan Akses) untuk perusahaan manufaktur dan perdagangan </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">personalisasi sertifikat digital perangkat pintar</a> dalam sistem IoT (Internet of Things) </li></ul></blockquote><img src="https://habrastorage.org/webt/pf/dt/vf/pfdtvf4d6obgfiom0tizekdsjis.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Venn Baru Untuk Kontrol Akses Untuk Ekonomi API</a> <br><br>  Yang terpenting, jangan menyimpan data pribadi di tempat yang sama dengan sistem lainnya.  Pisahkan otentikasi dan otorisasi secara fisik.  Dan bahkan lebih baik - berikan semua identifikasi secara pribadi kepada orang tersebut dan jangan pernah menyimpannya bersama Anda.  Percayai pemilik perangkat. <br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apple mengatakan</a> apa yang disimpan data pribadi Rusia di Rusia.  Ini adalah nama, alamat, email, nomor telepon.  Tapi Pesan, foto, dll. Orang-orang itu sendiri mempercayai cloud iCloud (yang bukan di Rusia). <br></blockquote><h2>  Bagian 2. Main pendek "Kepercayaan dan Otentikasi" </h2><br>  Jadi, kami memutuskan bahwa tidak aman untuk menyimpan data pribadi pengguna terkasih baik dalam aplikasi kami, maupun dalam penyimpanan tunggal bersama dengan database yang berfungsi.  Artinya, mereka telah memilih wali amanat yang dapat diandalkan yang akan memberikan layanan ini kepada kami.  Maka, ketika Yang Mulia Pengguna muncul, maka kami menyediakan dialog berikut. <br><br>  Aktor: <br><br><ul><li>  Pengguna </li><li>  Aplikasi Klien </li><li>  Layanan Identitas </li><li>  Server Sumber Daya </li></ul><br>  Tindakan terjadi di browser di komputer pengguna.  Semua karakter telah lama akrab satu sama lain.  Pengguna memiliki akun pribadi di Layanan Identitas.  Aplikasi Klien memiliki kontrak yang ditandatangani dan ditandatangani dengan Layanan Identifikasi dan antarmuka timbal balik.  Server Sumber Daya mempercayai Layanan Identitas dalam masalah mengeluarkan kunci akses untuk setiap penderita yang dapat diidentifikasi. <br><br>  Pengguna (P): (dengan meluncurkan aplikasi klien berbasis web) Aplikasi Klien yang terhormat, saya membutuhkan "sumber daya ini". <br>  Aplikasi klien (K): Pengguna yang terhormat, pertama-tama berikan kunci untuk "sumber daya ini".  Tanpa kunci, akses ke "sumber daya ini" ditutup. <br>  P: Saya tidak punya kunci seperti itu. <br>  K: Maka saya akan sementara waktu mengalihkan Anda ke layanan identifikasi yang dengannya kami memiliki perjanjian untuk mengeluarkan kunci ke Server Sumber Daya.  (mengalihkan P. ke layanan identifikasi) <br>  Layanan Identifikasi (I): Pengguna yang terhormat, tolong beri tahu saya siapa Anda dan kunci apa yang Anda butuhkan? <br>  P: Saya, Pengguna Pengguna Ytsuken, kata sandinya seperti ini dan itu, saya ingin mendapatkan akses ke "sumber daya ini". <br>  Dan: Terima kasih, kawan Jtsuken.  Otentikasi berhasil dan identifikasi Anda diverifikasi.  Ini adalah kunci untuk "sumber daya ini" (P. pengalihan kembali ke K.) <br>  P: Klien, saya membawakan Anda kunci ke "sumber daya" yang saya butuhkan. <br>  K: Pengguna terima kasih.  Kuncinya benar.  Inilah "sumber daya" yang Anda minta. <br><br>  Tirai.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Simfoni pembuka Richard Strauss</a> dari film "Space Odyssey of 2001" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diputar</a> <br><br><h2>  Bagian 3. Layanan otorisasi nyata </h2><br>  Sekarang mari kita mulai bisnis.  Kami memiliki tiga tugas dalam agenda: untuk menunjuk karakter, mempersiapkan panggung dan memainkan permainan.  Dan semuanya diputuskan sekaligus pada platform IRIS InterSystems.  Tapi ini tidak perlu, Anda dapat merakit desain dari platform yang berbeda atas kebijakan Anda.  Misalnya, dalam kombinasi ini: OAuth Keycloak server + OAuth client dan sumber daya OAuth di IRIS.  Dengan kata lain: <br><br><ol><li>  Konfigurasikan dan luncurkan server OAuth dengan registrasi klien demo kami. </li><li>  Siapkan klien demo OAuth dengan menghubungkannya ke server OAuth dan sumber daya web. </li><li>  Kembangkan aplikasi klien yang dapat menggunakan OAuth.  Anda dapat menggunakan Java, Python, C #, NodeJS.  Berikut ini adalah contoh kode aplikasi dalam ObjectScript. </li></ol><br><blockquote>  Situs web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komunitas pengembang</a> memiliki instruksi terperinci oleh Daniel Kutak dalam tiga bagian dengan contoh penggunaan OAuth dalam IRIS untuk berbagai aplikasi berdasarkan CSP ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagian 1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagian 2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagian 3</a> ). </blockquote>  Ada banyak pengaturan di OAuth.  Karena itu, tulis sendiri daftar periksa - ini adalah aplikasi yang paling benar untuk mereka.  Contoh dan kosong di bawah. <br><blockquote>  Di mana mendapatkan IRIS InterSystems yang sudah jadi untuk sampel?  Setidaknya ada dua opsi yang tersedia untuk semua orang: <br><br>  Dapatkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">server cloud IRIS</a> yang sudah disiapkan sebelumnya pada platform pelatihan Layanan Pembelajaran InterSystems di bagian Lab Pembelajaran InterSystems. <br><br>  Pasang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">wadah buruh pelabuhan yang sudah jadi</a> .  Baca selengkapnya di artikel - instruksi langkah demi langkah untuk pemula <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Meluncurkan IRIS Menggunakan</a> pengembang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Docker</a> atau, yang lebih suka video, instruksi screencast dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mengembangkan Solusi dengan Antar Sistem IRIS Menggunakan Docker dan VSCode</a> </blockquote><h3>  1-1 Mengkonfigurasi Server OAuth </h3><br>  Kami masuk ke portal manajemen IRIS dan pilih bagian: <br><br>  Administrasi Sistem &gt;&gt; Keamanan &gt;&gt; OAuth 2.0 &gt;&gt; Server <br><br>  Selanjutnya, dalam setiap paragraf, akan ada nama untuk baris pengaturan dan, melalui titik dua, contoh atau penjelasan, jika perlu. <br><br><img src="https://habrastorage.org/webt/9g/k4/by/9gk4bywq0a0dkkkprpu5wbnempo.png"><br><br>  <b>Tab Pengaturan Umum:</b> <br>  Deskripsi: opsional, misalnya, jadi "Server otorisasi" <br>  Titik akhir generator (selanjutnya disebut CTG) adalah nama host: nama DNS server Anda <br>  Jenis izin yang didukung (pilih setidaknya satu): <br>  Kode Otorisasi <br>  Tersirat <br>  Kredensial: sumber daya, pemilik, kata sandi <br>  Kredensial pelanggan <br>  Konfigurasi SSL / TLS: oauthserver <br><br>  <b>Tab izin:</b> <br>  tambahkan volume yang didukung: mis. scope1 dan scope2 <br><br>  <b>Tab interval:</b> <br>  Interval Kunci Akses: 3600 <br>  Interval Kode Otorisasi: 60 <br>  Perbarui Interval Kunci: 86400 <br>  Interval Sesi Interupsi: 86400 <br>  Periode Validitas Kunci Klien: 0 <br><br>  <b>Tab Pengaturan JWT:</b> <br>  Algoritma Input: RS512 <br>  Algoritma Manajemen Kunci: RSA-OAEP <br>  Algoritma Enkripsi Konten: A256CBC-HS512 <br><br>  <b>Menyesuaikan tab:</b> <br>  Identifikasi kelas:% OAuth2.Server.Authenticate <br>  Periksa kelas pengguna:% OAuth2.Server.Validate <br>  Kelas Layanan Sesi: OAuth2.Server.Session <br>  Hasilkan kelas kunci:% OAuth2.Server.JWT <br>  Namespace Kustomisasi:% SYS <br>  Peran penyesuaian (pilih setidaknya satu):% DB_IRISSYS dan% Manager <br><br>  Simpan. <br><br><h3>  1-2 Daftarkan klien di server OAuth </h3><br><img src="https://habrastorage.org/webt/ae/gu/pz/aegupzlmpoucnqfa4vu-f2gcgq0.png"><br><br>  Tombol Deskripsi Pelanggan &gt;&gt; Tombol Buat Deskripsi Pelanggan: <br><br>  <b>Tab Pengaturan Umum:</b> <br>  Nama: KLIEN <br>  Deskripsi: sewenang-wenang <br>  Jenis Klien: Rahasia <br>  Redirect URLs: Alamat titik balik di aplikasi kami setelah otentikasi <br>  Jenis Izin yang Didukung <br>  Kode Otorisasi: ya <br>  Tersirat <br>  Kredensial: sumber daya, pemilik, kata sandi <br>  Kredensial pelanggan <br>  Otorisasi JWT <br>  Jenis Jawaban yang Didukung <br>  kode <br>  id_token <br>  kunci id_token <br>  token <br>  Jenis Otorisasi: Sederhana <br><br>  <b>Tab Kredensial Klien:</b> Diisi Secara Otomatis <br><br>  <b>Tab Informasi Klien:</b> <br>  URL peluncuran: <br>  Layar masuk <br>  Nama pelanggan <br>  URL logo <br>  URL Halaman Beranda Klien <br>  URL kebijakan <br>  Ketentuan URL Layanan <br><br><h3>  2-1 Mengonfigurasi pengikatan pada klien server OAuth </h3><br>  Administrasi Sistem &gt;&gt; Keamanan &gt;&gt; OAuth 2.0 &gt;&gt; Klien <br><br><img src="https://habrastorage.org/webt/xq/hu/3r/xqhu3rquzsfni1tsfgwtfkhzvew.png"><br><br>  Buat deskripsi server: <br>  Titik akhir generator: ambil dari parameter server umum, lihat di atas <br>  Konfigurasi SSL / TLS: pilih dari daftar pra-konfigurasi <br><br>  Isi dari kolom yang tersisa akan diunduh secara otomatis dari server, tetapi Anda juga dapat mengonfigurasinya secara manual: <br><br>  Server otorisasi <br>  Titik Akhir Otorisasi: CTG + / otorisasi <br>  Titik Akhir Kunci: CTG + / token <br>  Informasi Pengguna Endpoint: CTG + / userinfo <br>  Titik akhir diagnosis mandiri utama: CTG + / pencabutan <br>  Titik akhir pencabutan kunci: CTG + / introspeksi <br>  Pengaturan Token Web JSON (JWT) <br>  Sumber lain selain pendaftaran dinamis: pilih JWKS dari URL <br>  URL: CTG + / jwks <br><br><img src="https://habrastorage.org/webt/ic/7e/x4/ic7ex4khfgskgdqf_jpsdivgj_o.png"><br><br>  Dari daftar ini, misalnya, dapat dilihat (scopes_supported dan claim_supported) bahwa server dapat memberikan klien OAuth informasi berbeda tentang pengguna.  Dan perlu diperhatikan bahwa saat mengimplementasikan aplikasi Anda, Anda perlu bertanya kepada pengguna data apa yang siap ia bagikan.  Selanjutnya, dalam contoh kita, kita hanya akan dimintai izin oleh scope1. <br><br>  Simpan. <br><br>  Jika ada kesalahan yang menunjukkan SSL, maka pergi ke pengaturan: <br>  Administrasi Sistem &gt;&gt; Keamanan &gt;&gt; Konfigurasi SSL / TSL <br><br><h3>  2-2 Mengkonfigurasi Klien OAuth </h3><br>  Administrasi Sistem &gt;&gt; Keamanan &gt;&gt; OAuth 2.0 &gt;&gt; Klien &gt;&gt; Konfigurasi Klien &gt;&gt; Buat Konfigurasi Klien <br><br><img src="https://habrastorage.org/webt/kd/e_/4w/kde_4wyvqd60yomyyudfzdotu_q.png"><br><br>  <b>Tab umum:</b> <br>  Nama Aplikasi: klien demo <br>  Nama Klien: klien demo <br>  Keterangan: opsional <br>  Diaktifkan: Ya <br>  Jenis Klien: Rahasia <br>  Konfigurasi SSL / TCL: oauthclient <br>  URL pengalihan klien: Nama DNS server Anda <br>  Jenis Izin yang Diperlukan <br>  Kode Otorisasi: ya <br>  Tersirat <br>  Kredensial: sumber daya, pemilik, kata sandi <br>  Kredensial pelanggan <br>  Otorisasi JWT <br>  Jenis Otorisasi: Sederhana <br><br>  <b>Tab Informasi Klien:</b> <br>  Layar masuk <br>  URL logo <br>  URL Halaman Beranda Klien <br>  URL kebijakan <br>  Ketentuan URL Layanan <br>  Volume default: kami ambil dari yang ditentukan sebelumnya di server, misalnya, scope1 <br>  Alamat email kontak (dipisahkan dengan koma) <br>  Usia default maksimum (dalam detik) <br><br>  <b>Tab Pengaturan JWT:</b> <br>  Pengaturan Token Web JSON (JWT) <br>  Membuat Pengaturan JWT dari Kredensial X509 <br>  Algoritma IDToken <br>  Penandatanganan: RS256 <br>  Enkripsi: A256CBC <br>  Kunci: RSA-OAEP <br>  Algoritma Userinfo <br>  Algoritma Token Akses <br>  Algoritma Permintaan <br><br>  <b>Tab Kredensial Klien:</b> <br>  Id  klien: dari yang dikeluarkan saat pendaftaran klien di server (lihat di atas) <br>  ID pelanggan dikeluarkan <br>  Rahasia klien: dari yang dikeluarkan saat mendaftarkan klien di server (lihat di atas) <br>  Rahasia klien kedaluwarsa <br>  Registrasi Pelanggan URI <br><br>  Simpan. <br><br><h2>  Bagian 4. Kode </h2><br>  Mari kita buat aplikasi web minimalis dengan otorisasi OAuth dan REST. <br><blockquote>  Ketika bekerja, OAuth bergantung pada kenyataan bahwa saluran komunikasi antara peserta dalam interaksi (server, klien, aplikasi web, browser pengguna, server sumber daya) entah bagaimana dilindungi.  Paling sering, peran ini dimainkan oleh SSL / TLS.  Tetapi OAuth juga akan bekerja pada saluran yang tidak aman.  Sebagai contoh, server Keycloak, secara default, menggunakan protokol HTTP dan berjalan tanpa perlindungan.  Ini menyederhanakan pengembangan dan debugging selama pengembangan.  Dengan penggunaan nyata layanan OAuth, perlindungan saluran harus benar-benar diaktifkan - ini dicatat dalam dokumentasi Keycloak.  InterSystems Pengembang IRIS mengambil pendekatan yang lebih ketat untuk OAuth - SSL / TSL diperlukan.  Satu-satunya penyederhanaan adalah bahwa Anda dapat menggunakan sertifikat yang ditandatangani sendiri atau menggunakan layanan PKI yang dibangun ke IRIS (Administrasi Sistem &gt;&gt; Keamanan &gt;&gt; Sistem Kunci Publik). </blockquote>  Otorisasi pengguna diperiksa dengan indikasi eksplisit dari dua parameter - nama aplikasi Anda dan volume yang didukung oleh server OAuth dan di klien OAuth (ruang lingkup - Saya ingin tahu bagaimana cara menyebutkannya dengan benar dalam bahasa Rusia?): <br><br><pre><code class="plaintext hljs">Parameter OAUTH2APPNAME = "OAuthClient"; set isAuthorized = ##class(%SYS.OAuth2.AccessToken).IsAuthorized( ..#OAUTH2APPNAME, .sessionId, "scope1", .accessToken, .idtoken, .responseProperties, .error)</code> </pre> <br>  Dengan tidak adanya otorisasi, kami sedang menyiapkan tautan ke permintaan untuk identifikasi pengguna dan mendapatkan izin darinya untuk bekerja dengan aplikasi kami.  Di sini kita perlu menunjukkan tidak hanya nama aplikasi dan volume yang diminta (lingkup) yang terdaftar di server OAuth dan di klien OAuth, tetapi juga tautan balik ke titik mana aplikasi web harus mengembalikan pengguna. <br><br><pre> <code class="plaintext hljs">Parameter OAUTH2CLIENTREDIRECTURI = "https://52773b-76230063.labs.learning.intersystems.com/oauthclient/" set url = ##class(%SYS.OAuth2.Authorization).GetAuthorizationCodeEndpoint( ..#OAUTH2APPNAME, "scope1", ..#OAUTH2CLIENTREDIRECTURI, .properties, .isAuthorized, .sc)</code> </pre><br>  Kami menggunakan layanan otentikasi IRIS bawaan dan, oleh karena itu, kami mendaftarkan pengguna di server IRIS OAuth.  Sebagai contoh, cukup untuk menetapkan pengguna hanya nama pengguna dan kata sandi, Anda tidak perlu membuat pengaturan lain di akun. <br><br>  Saat mentransfer pengguna menggunakan tautan yang diterima, server akan melakukan prosedur identifikasi pengguna dan meminta izin darinya untuk beroperasi dengan kredensial di aplikasi web, dan juga menyimpan hasilnya di OAuth2.Server.Session global di area% SYS: <br><br><img src="https://habrastorage.org/webt/dj/ih/ve/djihveewmoifbr9knths77mq-vi.png"><br><br><img src="https://habrastorage.org/webt/jb/ib/qz/jbibqzzejdf-gzo03bfcxdlkjjg.png"><br><br>  3. Tunjukkan data pengguna yang sah.  Setelah berhasil menyelesaikan prosedur, kami memiliki, misalnya, token akses.  Mari kita mendapatkannya: <br><br><pre> <code class="plaintext hljs">set valid = ##class(%SYS.OAuth2.Validation).ValidateJWT( .#OAUTH2APPNAME, accessToken, "scope1", .aud, .JWTJsonObject, .securityParameters, .sc )</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Kode kerja penuh dari contoh bekerja dengan OAuth:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Class OAuthClient.REST Extends %CSP.REST { Parameter OAUTH2APPNAME = "OAuthClient"; Parameter OAUTH2CLIENTREDIRECTURI = "https://52773b-76230063.labs.learning.intersystems.com/oauthclient/"; // to keep sessionId Parameter UseSession As Integer = 1; XData UrlMap [ XMLNamespace = "http://www.intersystems.com/urlmap" ] { &lt;Routes&gt; &lt;Route Method="GET" Url = "/" Call = "Do" /&gt; &lt;/Routes&gt; } ClassMethod Do() As %Status { // Check for accessToken set isAuthorized = ##class(%SYS.OAuth2.AccessToken).IsAuthorized( ..#OAUTH2APPNAME, .sessionId, "scope1", .accessToken, .idtoken, .responseProperties, .error) // to show accessToken if isAuthorized { set valid = ##class(%SYS.OAuth2.Validation).ValidateJWT( ..#OAUTH2APPNAME, accessToken, "scope1", .aud, .JWTJsonObject, .securityParameters, .sc ) &amp;html&lt; Hello!&lt;br&gt; &gt; w "You access token = ", JWTJsonObject.%ToJSON() &amp;html&lt; &lt;/html&gt; &gt; quit $$$OK } // perform the process of user and client identification and get accessToken set url = ##class(%SYS.OAuth2.Authorization).GetAuthorizationCodeEndpoint( ..#OAUTH2APPNAME, "scope1", ..#OAUTH2CLIENTREDIRECTURI, .properties, .isAuthorized, .sc) if $$$ISERR(sc) { w "error handling here" quit $$$OK } // url magic correction: change slashes in the query parameter to its code set urlBase = $PIECE(url, "?") set urlQuery = $PIECE(url, "?", 2) set urlQuery = $REPLACE(urlQuery, "/", "%2F") set url = urlBase _ "?" _ urlQuery &amp;html&lt; &lt;html&gt; &lt;h1&gt;  IRIS   OAuth2&lt;/h1&gt; &lt;a href = "#(url)#"&gt;  &lt;b&gt;IRIS&lt;/b&gt;&lt;/a&gt; &lt;/html&gt; &gt; quit $$$OK } }</code> </pre><br></div></div><br>  Jika perlu, aktifkan pesan debug yang diperluas pada server OAuth dan klien OAuth.  Pesan ditulis ke ISCLOG global di area% SYS.  Ketik terminal IRIS Anda (atau instal dan gunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terminal web</a> ): <br><br><pre> <code class="plaintext hljs">set ^%ISCLOG = 5 set ^%ISCLOG("Category", "OAuth2") = 5 set ^%ISCLOG("Category", "OAuth2Server") = 5</code> </pre><br>  Lihat dokumentasi IRIS <a href="">Menggunakan OAuth 2.0 dan OpenID Connect untuk informasi lebih lanjut</a> . <br><br>  Kesimpulan: <br><br><ol><li>  OAuth membantu layanan yang terpisah secara fisik dan geografis dengan kredensial pengguna dan database "yang berfungsi".  Dan, dengan demikian, memperkuat perlindungan data identifikasi dan, jika perlu, mematuhi persyaratan undang-undang tentang perlindungan data pribadi berbagai negara. </li><li>  Dengan menggunakan OAuth, pengguna dapat diberi kesempatan untuk bekerja dengan aman dari banyak perangkat pada saat yang bersamaan dan "menyinari" data pribadinya secara minimal ke berbagai layanan dan aplikasi.  Selain tidak mengambil informasi "berlebihan" tentang pengguna di layanan mereka, yaitu untuk melakukan pemrosesan data yang direpersonalisasikan dalam layanan mereka. </li><li>  Saat menggunakan InterSystems IRIS, Anda memiliki satu set lengkap alat yang siap pakai untuk menguji dan menggunakan layanan OAuth dan OIDC, keduanya berdiri sendiri dan bekerja sama dengan produk perangkat lunak pihak ketiga. </li></ol><br><blockquote>  Industri apa yang paling umum menggunakan platform IRIS InterSystems? <br>  Untuk otomatisasi kesehatan, di sektor keuangan, untuk proyek-proyek e-government, logistik, ritel, dan banyak industri lainnya. <br><br>  Jika Anda tertarik pada tugas-tugas otomatisasi kesehatan, maka perhatikan standar FHIR.  InterSystems IRIS for Health (versi khusus dari platform IRIS InterSystems) memiliki dukungan untuk standar FHIR untuk integrasi dan pengembangan aplikasi </blockquote>  Seperti yang Anda lihat di atas, semua fitur OAuth mudah diakses dan sepenuhnya siap digunakan.  Jika perlu, Anda dapat mengganti kelas handler dan antarmuka pengguna dengan kelas Anda sendiri.  Pengaturan server dan klien OAuth dapat dibuat dari file konfigurasi, alih-alih menggunakan portal manajemen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id466699/">https://habr.com/ru/post/id466699/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id466685/index.html">Melihat uang</a></li>
<li><a href="../id466689/index.html">Cara membuat kelas karakter di MMO Action seluler</a></li>
<li><a href="../id466691/index.html">Jadi semua RAML atau OAS (Swagger) yang sama?</a></li>
<li><a href="../id466693/index.html">Jika Anda masuk bukan di IT</a></li>
<li><a href="../id466697/index.html">Monad di Erlang</a></li>
<li><a href="../id466701/index.html">Let's Encrypt melayani hampir 30% domain</a></li>
<li><a href="../id466705/index.html">Vivaldi Beta untuk Android - Browser Asli</a></li>
<li><a href="../id466709/index.html">Mengembangkan OS seperti Unix monolitik - Perpustakaan C (2)</a></li>
<li><a href="../id466711/index.html">Kerentanan DaOffice diizinkan untuk menghapus pengguna mana pun dari jejaring sosial</a></li>
<li><a href="../id466713/index.html">Apakah mungkin dalam 1C untuk tidak mengamati teknologi komponen eksternal? Atau Bagaimana cara memberi selamat kepada kolega menggunakan 1C?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>