<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏂🏾 👨🏾‍🎨 👨‍👨‍👧‍👦 Rust für Webentwickler - schneller Start und schneller Flug 🕦 ✌🏽 🧗🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Heute möchte ich meine Erfahrungen mit dem Erlernen der Sprache und der schnellen Implementierung eines Netzwerkprojekts mit hoher A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rust für Webentwickler - schneller Start und schneller Flug</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bitrix/blog/477342/">  Hallo allerseits!  Heute möchte ich meine Erfahrungen mit dem Erlernen der Sprache und der schnellen Implementierung eines Netzwerkprojekts mit hoher Auslastung unter Verwendung der so beliebten und beliebten jetzt nicht blockierenden asynchronen Netzwerkverbindungen in der neuen, schönen, eleganten und sehr effektiven Sprache Rust teilen. <br>  Ich werde in diesem Beitrag besonderen Wert auf eine schnelle und klare Erklärung der Fähigkeiten der Sprache und Plattform für Spezialisten legen, die über umfangreiche Erfahrung in der Webentwicklung verfügen, weil ich es selbst bin.  Es besteht ein Missverständnis, dass die Eintrittskurve in Rust sehr, sehr steil ist.  Aber ich werde zeigen, dass dies bei weitem nicht der Fall ist.  Kaffee einschenken und losfahren! <br><a name="habracut"></a><br><h3>  Eine kurze Geschichte der Programmierwerte </h3><br>  Damit das Material gut im Kopf und im Herzen liegt, ist es schön, sich kurz daran zu erinnern, was die Leute in den letzten 50 Jahren beim Programmieren wollten und was sie letztendlich gemacht haben.  Keine Beleidigung, nur persönliche subjektive Meinung und Holivar, unterstützt durch 20 Jahre Entwicklungserfahrung. <br><br><h4>  Low-Level-Sprachen: C, C ++ </h4><br>  Es ist klar, dass Sie das Programm sofort in Form von Zahlen auf Maschinencodes schreiben können und viele haben es auf dem ZX Spectrum, BK0010-01 und auf dem PC getan - der Code ist sehr schnell :-) Aber wir sind Menschen, viele Informationen passen nicht in unsere Köpfe, wir sind abgelenkt und deshalb Selbst die Erfindung des Assemblers hat nicht viel gebracht - Code auf einem so niedrigen Niveau ist sehr selten und sehr genau geschrieben, und wenn Sie keine Treiber, Mikrocontroller oder trickreiche eingebettete Systeme entwickeln, ist dies im Leben höchstwahrscheinlich nicht nützlich. <br><img src="https://habrastorage.org/webt/gs/zf/28/gszf28trxey6oz6aag_dgh4u_lu.jpeg"><br><br>  In den frühen 70er Jahren erfand Bell Labs die C-Sprache, die dank der lakonischen Syntax und sehr "billigen" Abstraktionen Wurzeln schlug und fast zu einem "portablen Assembler" wurde.  Es ist klar, dass Sie, wenn Sie eine Tonsur einnehmen, 10 Jahre lang in C Nächten schreiben, kein Fleisch essen, beten und sich nicht von sozialen Netzwerken und dem fairen Sex ablenken lassen, sehr nützliche und schnelle Programme schreiben können, wie <a href="https://www.gnu.org/">GNU</a> beredt bezeugt, exzellente produktive Spiele, Geliebte, aber nicht alternative Qualität von Windows, und viele weitere Beispiele können angeführt werden. <br>  Aber die Kehrseite der Medaille macht sich ständig bemerkbar - es wurden regelmäßig Sicherheitslöcher geöffnet (eine ganze Branche für "Löcher in der Software" wurde geschaffen), verursacht durch Löcher im Konzept der C-Sprache selbst - der Compiler ist wie ein unverantwortlicher Bulle, mit unglaublicher Kraft, intensivem Orgasmus und kurzem Gedächtnis.  Jegliche Fahrlässigkeit - und Sie können das Programm nicht einfach fallen lassen (einen Nullzeiger dereferenzieren, den Zeiger doppelt freigeben, das Array verlassen), sondern die Daten unwiderruflich ruinieren und es nicht lange bemerken, bis die Clients mit dem Aufrufen beginnen und wenn es zu spät ist („undefiniertes Verhalten“, anders) von Compiler zu Compiler). <br><br>  Björn Straustrup verwirrte die Situation in den frühen achtziger Jahren nur weiter und fügte OOP-Fähigkeiten zu C hinzu. Trotz seiner großen Beliebtheit wird C ++ im Allgemeinen als eine Reihe von Programmierexperimenten mit unterschiedlichen Erfolgsergebnissen angesehen, einschließlich  tödlich.  Manchmal scheint es sogar so, als hätte C ++ von Anfang an keinen Sinn gehabt, oder es ging allmählich verloren, was zu einem Haufen von objektiv komplizierten und widersprüchlichen Konzepten führte, die mit jedem neuen Standard immer mehr werden.  Trotz des hervorragenden Ziels von „Null-Kosten-Abstraktionen“, die es Ihnen ermöglichen, schnellen Code zu erhalten, um eine zuverlässige Lösung wie in C zu erstellen, sind die folgenden Bedingungen erforderlich: <br><ul><li>  erfahrene, vom Wort "sehr" Team (jahrelange Praxis, "Mönche" der Programmierung) </li><li>  guter statischer Code Analyzer </li><li>  Testabteilung (im Code kann ein verantwortungsloser Compiler Lücken hinterlassen, die sich lange bemerkbar machen können) </li><li>  Von allen Teammitgliedern vereinbarte Anforderungen, die sorgfältig überwacht werden (unformatierte Zeiger, strenge Kapselung, strengste Disziplin für das Benennen von Variablen, Initialisieren von Objekten usw. werden nicht verwendet) </li></ul><br><br>  Es ist klar, dass die Einhaltung dieser Anforderungen, insbesondere im Kontext eines wachsenden Geschäftsbedarfs für einen „Code, der ohne plötzliche Überraschungen funktioniert“, sehr teuer ist.  Der Code in solchen Projekten ist lange geschrieben, er muss lange und sorgfältig getestet werden, aber manchmal war es ohne C / C ++ vor der Erfindung von Rust wirklich schwierig. <br><br>  Noch einmal eine Zusammenfassung von C / C ++ - wir haben einen mächtigen, aber "unverantwortlichen" Compiler mit "aktuellen Abstraktionen", was dem Entwickler sehr wenig hilft.  Dadurch werden alle Probleme auf die Schultern des Programmierers übertragen.  Wenn mindestens ein Programmierer im Team keine Erfahrung hat, nicht sehr vorsichtig ist und nicht alle Feinheiten des Compilers kennt (in der Tat kennt niemand alle Feinheiten und Benutzer finden sie später) - warten Sie auf den Fehler.  Aber dann funktioniert das Programm schnell und wahrscheinlich richtig :-) Dies brachte natürlich einen ganzen Markt von „Krücken“ hervor - statischen Analysatoren, die, wie sich herausstellte, vom Kunden bezahlt werden sollten.  Die Frage stellt sich: Könnte es nicht möglich sein, einen strengeren und sichereren Compiler zu schreiben, der dem Entwickler hilft und Programme ohne Überraschungen und Sicherheitslücken hervorbringt? <br><br><h4>  Java, C #, Kotlin </h4><br>  Die Situation mit offen gesagt schwacher Kontrolle über „unbestimmtes Verhalten“ und sehr hohen Anforderungen an Entwickler in C / C ++ führte zu dem Wunsch, eine sichere Entwicklungsumgebung zu schaffen, einschließlich  für das Internet, zugänglich für die meisten Ankömmlinge.  In den späten 90ern erschien Java. <br>  Im Prinzip konnte jetzt jeder mit einem anderen Schulungsniveau alles und jedes schreiben, und es funktionierte und wurde nicht in das Programm aufgenommen - es gab keine Sicherheitslücken auf niedriger Ebene und keine spontanen Abstürze (fast, aber sie wurden bereits durch Fehler verursacht in einer virtuellen Maschine und zentral fixiert).  Es gab nur logische „Lücken“ oder versteckten langsamen Code (geboren aus Unkenntnis der Algorithmen, dem Konzept der algorithmischen Kosten und Verlangsamung bei steigendem Datenvolumen), der bereits nicht so beängstigend war und es Ihnen ermöglicht, Programme schnell zu erstellen und, falls erforderlich, kleine Teile mit einem qualifizierten C / C-Team neu zu schreiben C ++. <br>  Die interessanten und wertvollen Dinge, die die Java-Welt gebracht hat, sind die folgenden: <br><ul><li>  Der Code wird einmal für eine virtuelle Maschine geschrieben, die auf allen Architekturen (Windows, Linux, Mac) funktioniert. </li><li>  der Entwickler verwaltet den Speicher nicht mehr direkt, wie in C / C ++ - dies wird an die Schultern des "Garbage Collector" weitergegeben;  Dies beseitigt das Risiko von undefiniertem Verhalten, diskreter Datenbeschädigung und potenziellen Sicherheitslücken auf niedriger Ebene </li><li>  Der Code wird im laufenden Betrieb kompiliert (Just_In_Time-Kompilierung), weil  Es ist bekannt, dass nur ein kleiner Teil aktiv und häufig im Programm ausgeführt wird. Daher macht es keinen Sinn, alles zu kompilieren </li><li>  Es wurde einfacher, effizienten Multithread-Code zu schreiben  Das Speichermodell wurde streng spezifiziert (viel früher als in C ++), aber darüber hinaus wurden nicht alle Probleme mit der "logischen Zuverlässigkeit mehrerer Threads" behoben (Deadlocks zum Beispiel oder Datenrassen waren noch möglich). </li></ul><br><br>  Das Aufkommen einer so freundlichen Plattform ermöglichte es natürlich, viele nützliche und nutzlose Programme zu schreiben, die das Unternehmen sofort nutzte.  Die Unterstützung der Abwärtskompatibilität in Java seit mindestens 15 Jahren hat die Technologie in der Unternehmenswelt so beliebt gemacht. <br><br>  Ja, ich habe auch Analogien zu alkoholfreien Bier- und Gummifrauen. <br><br>  Bei weitem nicht sofort traten jedoch die folgenden Probleme in Java auf: <br><ul><li>  Aufgrund der logischen „Lücke“ im Typensystem, die von C / C ++ geerbt wurde, gelangte der Typ „Null“ nach Java, was bis heute viele Probleme verursacht und ständig zu Abstürzen von „nicht sehr erfahrenen“ Programmierern führt Ich kenne keinen <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html">optionalen</a> Typ und interessiere mich nicht für Monaden aus der funktionalen Programmierung </li><li>  Java-Projekte, die manchmal etwas langsamer arbeiten, erfordern um ein Vielfaches mehr RAM als C / C ++, das der Garbage Collector benötigt (wir haben mehrere Projekte, die Dutzende oder Hunderte von Gigabyte RAM verbrauchen).  Dies ist oft kein direktes Problem  RAM-Preise fallen, aber das "Sediment blieb" </li><li>  Trotz der JIT-Kompilierung und der großen Investitionen in die Beschleunigung des Garbage Collectors (von denen viele regelmäßig neu auftauchen und ständig sagen: "Probiere einen neuen GC aus, es ist viel besser") arbeiten einige hochgeladene Java-Projekte seit 20 Jahren mit regelmäßigen Pausen für mehrere Sekunden. die in keiner Weise entfernt werden können (es gibt eine erzwungene Müllabfuhr, und wie Schrauben im GC nicht verdrehen, hat der Müllsammler einfach keine Zeit, alles zu säubern, auch wenn er parallel arbeitet und sogar mehr Ressourcen verschlingt als das Programm selbst) </li><li>  Es ist bekannt, dass Java-GUI-Anwendungen manchmal einfrieren und langsamer werden und Ärger bei den Benutzern auslösen, da dieselbe Garbage Collection besteht und keine Hoffnung besteht und nicht erwartet wird </li><li>  Die Syntax der Sprache ist sehr ausführlich und überflüssig (Sie müssen die Wörter "public static functon" schreiben und dann lesen, anstatt "pub fn" oder "def"), was manchmal dazu zwingt, sich die Finger an den Nägeln zu brechen und objektive Schmerzen und Blutungen aus den Augen zu verursachen </li><li>  Ein starker Rückgang der Anforderungen an das Niveau der Entwicklerqualifikationen und eine ausreichend niedrige Einstiegskurve führten zu einer Menge „seltsamer Frische“ -Code, der sich mein ganzes Leben lang mit einem unvergesslichen Gestank bemerkbar machte </li></ul><br><br>  Nach dem Lesen sollte klar sein, dass nicht alles in Java geschrieben werden kann, es wird eher langsam geschrieben, dann wird es regelmäßig langsamer und hängt sich für eine Sekunde unter Last auf, manchmal wird viel RAM "gefressen" (in der Regel wird mindestens die Hälfte des RAMs auf dem Server verbraucht), produktive Spiele Sie werden es auch nicht können, aber einige Teile der Geschäftslogik, die keine besonderen Anforderungen an die Leistung und den Arbeitsspeicher stellen, insbesondere Multithread-Logik, sind durchaus möglich und nützlich, und daher sehen wir eine solche Beliebtheit der Technologie in der Unternehmenswelt.  Und wir selbst nutzen Java regelmäßig und aktiv für die Dienste des Unternehmens. <br><br><h4>  C #, Scala, Kotlin </h4><br>  „Und wann geht es um Rust?“ - Moment mal, du brauchst etwas mehr Vorbereitung, um diese süße Persimone zu essen.  Wenn Sie nicht über die Funktionen anderer Technologien sprechen, werden Sie nicht verstehen, warum Rust aufgetaucht ist und warum es so <a href="https://www.rust-lang.org/production">beliebt und gefragt ist</a> . <br><br>  Um Java besser und fortschrittlicher zu machen, entwickelte Microsoft in der Person des Autors TurboPascal / Delphi am Anfang der Null C # und das Konzept von .NET.  Nach Ansicht vieler angesehener Experten und in den Raucherzimmern von Entwicklern ist „C #“ objektiv sexueller als Java, obwohl es natürlich bisher trotz Mono mit allen Zuflüssen und Konsequenzen eng mit Microsoft verbunden ist :-) <br><br>  Scala ist zweifellos ein großer Schritt nach vorne  Die Sprache erwies sich natürlich als wissenschaftlich abstrus und raffiniert und nahm viele nützliche und nutzlose Dinge aus der Welt der funktionalen Programmierung.  Aber irgendetwas ist mit Popularität irgendwie nicht ganz klar.  Allerdings ist <a href="https://ru.wikipedia.org/wiki/Apache_Spark">Apache Spark</a> wirklich gut und beliebt, nichts zu sagen. <br><br>  Kotlin ist beliebt, weil  macht Java für Anfänger effizienter und einfacher, insbesondere auf mobilen Plattformen, die keine Zeit haben, sich ernsthaft mit Programmierung zu befassen :-) <br><br>  Das Hauptproblem in C # (auf der .NET-Plattform) sowie in Scala, Kotlin und in anderen JVM-Sprachen blieb jedoch bestehen.  Garbage Collector, Carl, schafft eine spürbare Last auf dem Server und stoppt die Ausführung des Codes für Sekunden unter Last und mit hohen RAM-Anforderungen!  Und wie viele weitere Sprachen mit einem Garbage Collector und einer JIT-Kompilierung werden nicht auftauchen, diese Probleme werden bestehen bleiben und es gibt noch keine Hoffnung, auch theoretisch. <br><br><h4>  Scripting </h4><br>  "Aber was ist mit PHP?"  Ja, jetzt lass uns über Scripting sprechen.  Es scheint, warum ist er?  Gegen Ende der 80er Jahre stellte sich heraus, dass Sie ein Skript schreiben können, wenn Sie ein Problem schnell mit Code lösen müssen, der nicht unbedingt superschnell und sicher ist, ohne undefiniertes Verhalten und Lücken auf niedriger Ebene.  Skripte wurden zuvor in bash, perl, awk geschrieben, aber es stellte sich heraus, dass Sie in Python große, große Skripte schreiben können, insbesondere wissenschaftliche, und das seit Jahren! <br><br>  Lua fand seine Nische in Gamedev und Machine Learning ( <a href="http://torch.ch/">Torch</a> ), JavaScript - in der Webentwicklung sowohl auf der Browserseite als auch auf der <a href="https://ru.wikipedia.org/wiki/Node.js">Serverseite</a> (jeder weiß, dass die <a href="https://www.rust-lang.org/static/pdfs/Rust-npm-Whitepaper.pdf">Autorisierung in der "npm" -Infrastruktur von</a> Node.js von Node.js und Node.js umgeschrieben wird Golang auf Rost?).  Python - beim maschinellen Lernen und bei der Datenanalyse sowie bei der Skripterstellung.  Und PHP - meistert perfekt Serveraufgaben für die Webentwicklung. <br><img src="https://habrastorage.org/webt/sj/eg/0e/sjeg0ebs9dgz9eb42wsglwralv8.jpeg"><br><br>  Die Vorteile von Scripting liegen auf der Hand: <br><ul><li>  Sicherer, effizienter Code ohne undefiniertes Verhalten und Sicherheitslücken auf niedriger Ebene unter Verwendung gängiger Algorithmen und Datenstrukturen (Listen, Wörterbücher, Warteschlangen) wird in wenigen Minuten erstellt </li><li>  Ein sehr schneller Start und eine sanfte Einstiegskurve.  Es dauert mehrere Tage, um ein nützliches Python-Skript zu entwickeln und zu schreiben, die Logik von nginx durch Skripterstellung in Lua zu ändern oder die Integration von Online-Shops in PHP durchzuführen </li><li>  Wenn Sie Skripte diszipliniert, unter Einhaltung von CodeStyle und so streng wie möglich schreiben, können Sie schnell komplexe Probleme lösen und große Softwareprodukte erstellen: eine große Anzahl wissenschaftlicher Bibliotheken in Python, Geschäfts- und Website-Managementsysteme in PHP, neuronale Netzwerkplattform Torch in LuaJit, Game Scripting in a very berühmte und beliebte Spiele usw. </li><li>  Einige Arten der Multithread-Programmierung, bei denen E / A der Engpass ist, werden in Python ziemlich effizient gelöst.  Durch die Verwendung der neuesten Python-Funktionen mit Zukünften wie „async / await“ ist es sogar noch einfacher, die Probleme bei der Verarbeitung einer großen Anzahl von Netzwerk-Sockets zu lösen </li><li>  Sehr elegant wurde die Aufgabe der asynchronen Verarbeitung einer großen Anzahl von Sockets, auch ohne Multithreading, in Node.js "out of the box" gelöst </li><li>  Erstellen Sie Webseiten, verwenden Sie zahlreiche Unix-Bibliotheken, gehen Sie in die Datenbank und nutzen Sie PHP und darauf basierende Produkte einfach und bequem </li><li>  Unter Python, PHP und JavaScript ist es sehr praktisch, Hypothesen zu testen und Prototypen in Stunden und nicht Monaten zu erstellen </li><li>  Für die Analyse und Datenverarbeitung ist es traditionell sehr praktisch, Python / R in Verbindung mit einer großen Anzahl hochwertiger Bibliotheken (Pandas, Scikit-Learn, Seaborn, Matplotlib ...) zu verwenden. </li></ul><br><br>  Sie können jedoch die möglichen Nachteile von Skripten nicht kennen: <br><ul><li>  Eine niedrige Einstiegsstufe und eine sehr schnelle Scripting-Geschwindigkeit führen bei unzureichender Kontrolle über Entwickler manchmal zu einer Unmenge ineffizienter und schwer zu wartender Codes auf jeder Plattform </li><li>  Das Fehlen eines Compilers, eines Typensystems und einer statischen Typisierung erfordert eine dynamische Überprüfung der Parameter, die an Funktionen und Methoden für Typen übergeben werden, sowie eine qualitativ hochwertige Codeabdeckung mit Autotests.  Andernfalls kann eine Änderung des Codes das Programm beschädigen, und der Client und nicht der Entwickler wird als erster davon erfahren (ja, ich kenne TypeScript, aber das sind Krücken und tote Umschläge). </li><li>  Objektiv und offensichtlich können Sie in Sprachen ohne statische Typisierung und Kompilierung, in denen viele Dinge zur Laufzeit passieren, nicht zahlreiche Optimierungen verwenden. In einigen Aufgaben arbeiten Skripte daher um Größenordnungen langsamer und verbrauchen ein Vielfaches an Ressourcen.  Trotz der Versuche, die JIT-Kompilierung in Python (pypy), PHP (hhvm), JavaScript (Übersetzung in Maschinencode, wow, Node.js v8) und LuaJIT zu implementieren, sollten wir uns nichts vormachen: All dies sieht nach schwach effizienten Krücken aus.  Der Grund ist, und es muss ein für allemal verstanden werden, dass Skripte aufgrund der absichtlich schwachen Typisierung von Sprachen kaum jemals eine effektive Laufzeit schreiben können, die sich der Geschwindigkeit von viel stärker typisiertem Java / C # annähert. </li><li>  Und in Python scheint es aufgrund der GIL nie ein effizientes Multithreading wie in Java / C # zu geben </li></ul><br><br>  Seitdem jedoch  in den meisten Geschäftsanwendungen, einschließlich  Site-Management-Systeme, CRM usw.  Da der größte Teil der Code-Ausführungszeit für Abfragen an die Datenbank aufgewendet wird, wird der Vorteil von jit Java / C # durch die Geschwindigkeit des Schreibens von Lösungen in PHP / Python / JavaScript deutlich. Für die Erstellung von Webanwendungen wähle ich 10 bis 20 Zeilen in PHP als 10.000 aus Zeichenfolgen und eine Reihe von Innereien in Java / Spring.  Und PHP7 irgendwie übertaktet, so dass es schneller läuft als Python3 ;-) <br><br>  Welche Schlussfolgerung kann hier gezogen werden?  Es ist nicht notwendig, alle Probleme zu lösen, wie es jetzt populär ist, nur durch Skripten. In einigen Fällen ist es sinnvoll, ein anderes, besser geeignetes Werkzeug zu verwenden, wenn es gute Gründe dafür gibt: <br><ul><li>  Sehr hohe Netzwerklasten und "extremes" Multithreading, Tausende - Zehntausende von Netzwerk-Sockets usw. </li><li>  Einschränkung der Verwendung von RAM und Hardware </li><li>  intensive Datenverarbeitung und -verarbeitung, Matrizen mit Millionen von Entitäten, GPUs (obwohl Python / Numpy / Pandas hier helfen können) </li></ul><br><br>  Oft praktizieren wir im Unternehmen diesen Ansatz: <br><ul><li>  Treffen Sie schnell eine Entscheidung in PHP / Python / JavaScript / Node.js, starten Sie den Kampf und beginnen Sie, Kundenprobleme zu lösen </li><li>  Wir bieten Funktionen, Möglichkeiten und verbessern Services </li><li>  In seltenen Fällen werden erfahrungsgemäß, in der Regel frühestens nach einigen Jahren, einige der bereits funktionsstabilen Dienste in C / C ++ / Java / Golang / Rust umgeschrieben </li></ul><br>  Daher ist es in der Regel besser, mit dem Schreiben von Skripten zu beginnen, einen Kampf zu beginnen und dann, wenn Sie es direkt benötigen, andere Werkzeuge aufzunehmen, und dies geschieht normalerweise reibungslos und ohne Risiken. <br><br><h4>  Funktionale Programmierung, Lisp, Haskell, F # </h4><br>  Viele kommen für die gesamte Karriere eines Entwicklers nie hierher, aber vergebens.  Es ist äußerst hilfreich zu verstehen, warum die FP (funktionale Programmierung) aufgetaucht ist und warum sie in einigen Bereichen so beliebt ist. <br><br>  Ich erkläre es einfach.  In der Mathematik gibt es ein so unlösbares Problem wie das <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B5%25D0%25BC%25D0%25B0_%25D0%25BE%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B8">"Halteproblem"</a> .  Wenn Sie es in sehr einfachen Worten und nicht streng formulieren, aber es ist klar, dann können Sie keinen Algorithmus finden, der beweist, dass das Programm fehlerfrei funktioniert.  Warum?  Denn anfangs wurde aggressiv und zwingend programmiert mit: <br><ul><li>  veränderbare Variablen </li><li>  Zyklen mit Bedingungen </li><li>  Nebenwirkungen </li></ul><br>  Und sie begannen Fehler zu machen.  Wir sehen dies jetzt und beobachten eine große Anzahl von Fehlern sowohl im Web als auch in Desktop- und Mobilanwendungen.  Und unabhängig davon, wie Sie den Code mit Autotests abdecken, lecken weiterhin Fehler, verteilen sich auf dem Boden und kichern. <br>  Um diesen Albtraum des Einbruchs von fehlerhafter und gnadenloser Software zu stoppen, <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2581%25D0%25BF">tauchten</a> in den späten 50er Jahren eine Richtung der funktionalen Programmierung und der <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2581%25D0%25BF">Lisp-Sprache auf</a> .  Jetzt repräsentiert diese Sprachfamilie <a href="https://ru.wikipedia.org/wiki/Haskell">Haskell</a> mehr oder weniger angemessen. <br><br>  Trotz der Tatsache, dass eine große Anzahl möglicher Fehler im Code tatsächlich beseitigt wird, aufgrund von: <br><ul><li>  <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25B5%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D1%2582%25D0%25B8%25D0%25BF_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585">algebraische Datentypen</a> und Mustervergleich auf ihnen </li><li>  das Fehlen von Zyklen (nur durch Rekursion) und veränderlichen Variablen innerhalb der Reichweite eines ausgestreckten Arms (Krücken, wie man das umgehen kann, sind natürlich <a href="https://wiki.haskell.org/Mutable_variable">zu finden</a> ) </li><li>  Sehr strenge statische Eingabe und gleichzeitig sehr komfortable automatische Ausgabe von <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%258B%25D0%25B2%25D0%25BE%25D0%25B4_%25D1%2582%25D0%25B8%25D0%25BF%25D0%25BE%25D0%25B2">Hindley-Milner-</a> Typen </li><li>  sehr leistungsfähige Funktionen, mit der Unterteilung in "rein" und "mit Nebenwirkungen", mit der Möglichkeit der <a href="https://wiki.haskell.org/Currying">teilweisen Verwendung</a> </li><li>  sichere Unterstützung für die gleichzeitige Programmierung </li><li>  Unterstützung für Kombinatoren durch Monaden für alle Gelegenheiten (mehr dazu in der Sektion Rust) </li></ul><br><br> Haskell       «» —     ,  ,  ,             : <a href="https://en.wikipedia.org/wiki/Category_theory"> </a> .    Haskell    «»,      ,    ,    ,        .          Haskell    . <br><br> , ,      —  Haskell ,  ,  ,              Java/C#. <br><br>    ,     . Haskell  ,   , ,     ,      .  ,          «»   —  Haskell    . <br><br><h4>  «C/C++» — Golang, D </h4><br>  ,    ,      C/C++ (,         Forth). <a href="https://losst.ru/pochemu-linus-torvalds-ne-lyubit-c"> </a>    C++  ,       ,         <a href="https://wiki.dlang.org/Language_History_and_Future">   D</a> (   —    ,     ). <br><br> ,       -    /C++    c  <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D1%2583%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2580%25D0%25B5%25D1%2581%25D1%2583%25D1%2580%25D1%2581%25D0%25B0_%25D0%25B5%25D1%2581%25D1%2582%25D1%258C_%25D0%25B8%25D0%25BD%25D0%25B8%25D1%2586%25D0%25B8%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">RAII</a>     ,      .     2009   Google   <a href="https://en.wikipedia.org/wiki/Go_(programming_language)">Golang</a> . <br>     ,  Golang         , , ,       . Golang         Java/C# (     )  ,  <a href="https://stackoverflow.com/questions/7823725/what-kind-of-garbage-collection-does-go-use"> </a> …  ,   Golang: <br><ul><li>    «green threads» ( ),       python </li><li>    ,  ,  (,  Docker ) :-) </li></ul><br>       .   Node.js  python  . <br><br> , Golang        , Google vs Sun/Oracle,   ,   ,  ,    :-) ,   «  Java/C#»         ,       —    .  Docker  Golang         .      Golang —            Java/C#,     ,   . <br><img src="https://habrastorage.org/webt/m7/1e/sc/m71escomzu8jtn2z-xrre4vyq5g.jpeg"><br><br>     , , <a href="https://oxozle.com/2017/05/10/sravnenie-arc-i-garbage-collector/">Swift</a> , c « »     .       macOS. <br><br><h3>   — Rust! </h3><br>    ,      ,   40-50      , ,         ,   «zero-cost» , , -  -  :-)     , ,    (Java/C#),   ,    (C/C++),   -,         —  .         ,     ? <br><br>  — .  , , ,     50      ,    2010   Mozilla Research.   ,    : <br><ul><li>  «zero-cost»  ( C/C++    ), ..       ,   ,   ------ <a href="https://doc.rust-lang.org/stable/book/ch13-00-functional-features.html"></a>  «  » (,   ,       ) </li><li>     <a href="https://doc.rust-lang.org/stable/cargo/">cargo</a> ,        </li><li>       (* —     ):    ,     —        «   »,    , , ,    </li><li>   ,   ,                 (  ,      ,         GC , -  runtime,     ) </li><li>         -,   Null (!),                 </li><li>     Haskell  pattern-matching  ,                Enumeration (Golang, ,       ) </li><li>           (   Java,   ) </li><li>        ( Golang   —  ;  Java/C#/Erlang  ..    ,    ) </li><li> <a href="https://doc.rust-lang.org/stable/book/ch19-06-macros.html"></a>    ,      (   C/C++) </li></ul><br><br> ,   ,    -.    ?  !      ,       50 . , , «»    ,                ,  . <br><br> Rust    «» , ,        Haskell   . <br>  Rust    , , , Java :-) —  Nulls,     pattern-matching  ,    generics  traits     .      .    ,    ,         , «  Haskell»,     . <br><br>      . <br><br><h4>       ? </h4><br>  Und so!       , «» («ownership»)       .     «  » ( «lifetime»,   Rust book,    ),  <a href="https://doc.rust-lang.org/stable/book/ch04-01-what-is-ownership.html">  </a> (   ,    ). <br>     /,            .     /,             . <br>            C++,   -  move-.    ,       rust   ,      . <br><br><h4>   zero-cost ? </h4><br>       ,      traits,    .   , ,   Golang.        , , -     pattern-matching,      (    Golang,  ).  /         .        :         .      <a href="https://doc.rust-lang.org/stable/book/ch04-02-references-and-borrowing.html"></a> («borrowing»).      ,      (  «read-write locks»,  ).  , ,        ,        ,    . <br>           <a href="https://doc.rust-lang.org/stable/book/ch04-03-slices.html">slice</a> ,  , , .    —   « » , ,            ;   ,           . <br><br><h4>     </h4><br>       : <br><ul><li>  ,  <a href="https://doc.rust-lang.org/stable/book/ch03-01-variables-and-mutability.html">   </a> </li><li>     (   ,      <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">  </a> ) </li><li>      ,   ---,    <a href="https://doc.rust-lang.org/stable/book/ch13-04-performance.html">  </a> </li><li>   ,       ,    ,          </li></ul><br><br>   ,           ( ,  )     <a href="https://en.wikipedia.org/wiki/Substructural_type_system"> </a>      … .                 / ,    C/C++      .       . <br><br><h4>   </h4><br>               ,      - ,     -    .  -  ,    .       Sync/Send,    ,       :  ,   , ,   . <br><br>         ,         ,       1-2         futures  <a href="https://tokio.rs/">  </a> .   ,   Node.js  python  async/await,      ,          .    ,    ? <br><br><h4>  unit    </h4><br> ,         unit           . <a href="https://doc.rust-lang.org/stable/book/ch11-00-testing.html">    </a>   . <br><br><h4>    — cargo </h4><br>    Java, «Maven   <a href="https://doc.rust-lang.org/stable/cargo/">cargo</a> »     ,     :  ,    . , ,   ,   . <br><br><h4> Heap   </h4><br>  ,        ,           heap. ,    ,       ( )  «  » ( «lifetime»).    ,     <a href="https://doc.rust-lang.org/stable/book/ch15-00-smart-pointers.html"> </a> ( Swift).     ,     —  ,    heap              .    —         ,      . <br><br><h4>      </h4><br>    ,     , ,         . ,    (2   )      , , ,      ,   <a href="https://tokio.rs/">   </a> , <a href="https://rust-lang-nursery.github.io/rust-cookbook/cli/arguments.html"></a>       <a href="https://lib.rs/crates/rusoto_sqs">AmazonWebServices</a>    c tls/ssl,            . <br> ,  , ,  ,      , -   .        <a href="https://doc.rust-lang.org/stable/book/ch10-03-lifetime-syntax.html">«  » ( «lifetimes»)</a>   . <br> ,            .    IntelliJ <a href="https://intellij-rust.github.io/">   rust</a> ,        .      Notepad++ —          . <br><br><h4>     Rust </h4><br><ul><li> Verstehen Sie, dass Sie wirklich sehr schnellen Systemcode schreiben müssen, der unter hoher Last arbeitet und nur ein Minimum an Ressourcen verbraucht und keinen Overhead wie einen Garbage Collector verursacht.  Wenn nicht, schreiben Sie ein Skript in python / PHP / Node.js und kehren nach 2-3 Jahren zur Aufgabe zurück (in 97% der Fälle müssen Sie nicht zurückkehren). </li><li>  Hab keine Angst vor Rust.  Das Hauptmerkmal der Sprache ist ein sehr intelligenter und mathematisch strenger Compiler, der KEINEN gefährlichen und falschen Code VERPASST.  Durch Ausprobieren und Vermeiden scharfer Ecken lernen Sie, wie man mit dem Compiler streng und sicher programmiert :-) </li><li>  Lerne die Sprache mit einem " <a href="https://doc.rust-lang.org/stable/book/title-page.html">Rust-Buch</a> ".  Ein wunderschönes, sexy Buch, das einfach zu lesen ist und Spaß macht.  Aber es ist besser, es zweimal zu lesen und alle Beispiele "aufzulösen". </li><li>  Das " <a href="https://rust-lang-nursery.github.io/rust-cookbook/">Rust Kochbuch</a> " hilft <a href="https://rust-lang-nursery.github.io/rust-cookbook/">sehr</a> .  Es ist auch wünschenswert, es zu "lösen" und zu sehen, wie der Code funktioniert, um es zu fühlen. </li><li>  Es gibt Literatur über Rust für fortgeschrittene Benutzer wie <a href="https://doc.rust-lang.org/stable/nomicon/">Rustonimicon</a> , aber ich empfehle nicht, <a href="https://doc.rust-lang.org/stable/nomicon/">sich</a> unnötig mit wirklich komplizierten technischen Dingen zu beschäftigen. </li></ul><br><img src="https://habrastorage.org/webt/o7/tb/h4/o7tbh4gcbhpj467i9pkm7muais4.jpeg"><br><br>  Verstehen Sie noch einmal - um die Technologie zu beherrschen, müssen Sie damit beginnen, Code zu schreiben, der für das Unternehmen nützlich ist.  Der Rust-Compiler ist so schlau, dass er Garantien gibt (in der Tat ist es sehr wichtig, dass der C ++ - Compiler nicht weiß, wie man das macht) und keinen gefährlichen / speicherbeschädigten Code kompiliert. Experimentieren Sie also so viel Sie wollen - und Sie werden den Code schnell und sicher bekommen und noch besser werden Sie mit der Programmierung beginnen: ) <br><br><h4>  Details zur Projektimplementierung </h4><br>  Ich werde ein kleines Detail des Projekts enthüllen.  Amazon SQS verschüttet Hunderte von Datenpaketen pro Sekunde.  Die Warteschlange wird gelesen, lokal von den Mitarbeitern analysiert, jede Nachricht wird vom Broker verarbeitet und auf einen anderen externen Server umgeleitet.  Es gibt mehrere externe Server.  Anfänglich wurde die Lösung per Skript implementiert: Das Skript, das einen Prozess im Betriebssystem aufnimmt, Nachrichten liest, verarbeitet und über das Netzwerk versendet.  Auf mehreren leistungsstarken Eisenservern (8 Kerne, 16 GB RAM) wurden Hunderte von Skripten gestartet (auf jedem!), Die gleichzeitig aus SQS lesen, Daten verarbeiten und senden.  Einfach, zuverlässig, aber die Eisenaufnahme begann zu stören.  Die Eisenkosten stiegen ständig. <br><br>  Rust verwendete hauptsächlich Standardbibliotheken und Module aus Fracht: <br><ul><li>  rusoto_sqs - für die Arbeit mit Amazon Web Services stehen keine Fragen zur Verfügung </li><li>  rustls - für tls, inkl.  Interaktionen mit TLS-Diensten von Google, Apple und der Verwendung von Client-Zertifikaten </li><li>  signal-hook - um kill abzufangen und die Transaktion zum Senden von Daten zu beenden </li><li>  Futures, Tokio-Rustls - „faule“, asynchrone Multithread-Arbeit mit Netzwerk-TLS-Sockets, ua Node.js </li><li>  clap - Parsen von Kommandozeilenargumenten </li><li>  serde_json - json formation, hier nichts interessantes </li></ul><br><br>  Leider war es nicht ohne die Verwendung von "unsicheren" Blöcken und "std :: mem :: transmute" - die Standardbibliothek konnte keine Werkzeuge zum Parsen von Binärdaten in Bäumen finden. <br><br>  Die Hauptsache, wenn Sie es so nennen können, "plugging" geschah in der Kompilierung - Bibliotheken wurden unter CentOS6 nicht kompiliert, weil der "veraltete Assembler" in binutils vorhanden war, aber es gab keine Probleme unter CentOS7. <br><br>  Der allgemeine Eindruck ist, dass die Entwicklung auf Rust eher einer „strengen Skripterstellung“ als einer Systemprogrammierung ähnelt, nicht viel länger als eine Skripterstellung oder eine Webentwicklung, sowohl in Bezug auf Ressourcen als auch in Bezug auf Tests.  In diesem Fall eine strikte statische Kompilierung, das Fehlen eines Garbage Collectors und algebraische Datentypen. <br><br>  Das allgemeine Gefühl ist sehr positiv.  Anstelle von mehreren Eisenservern (8 Kerne, 16 GB RAM) wurde das Problem durch einen Prozess (mit Dutzenden von Threads) gelöst, der nicht mehr als 5 GB RAM beansprucht und eine kaum merkliche Belastung der Kerne mit Datenverkehr im Bereich von 0,5 bis 1 Gigabit verursacht . <br><br><h3>  Fazit </h3><br>  Nun, das endete mit einem langen, aber hoffentlich inspirierenden und nützlichen Beitrag über effektive Technologie.  Jetzt kennen Sie ein anderes Tool und können es bei Bedarf sicherer verwenden.  Wir haben die Geschichte der Entwicklung von Programmiersprachen, ihre Fähigkeiten und Funktionen durchgesehen und haben möglicherweise die richtigen Schlussfolgerungen gezogen oder werden diese ziehen.  Viel Glück bei deinen Projekten und gute, nein, gute Laune! <br><br>  PS: <br>  * - Ja, ich hätte es fast vergessen.  Natürlich müssen Sie über den unsicheren Block sprechen.  In diesem Block können Sie: <ul><li>  Dinge zu programmieren, die nicht in gewöhnlichen "rohen" Zeigern für Rostdereferenzierung verfügbar sind, und einige potentiell gefährlichere Dinge zu tun, die manchmal bei der Systemprogrammierung erforderlich sind.  Aber alles ist nicht so beängstigend: </li><li>  unsichere Blöcke sind sichtbar und es gibt entweder überhaupt keine oder der verantwortliche Code ist in ihnen konzentriert </li><li>  Die Roststandardbibliothek wurde gründlich getestet, was bedeutet, dass unsichere Blöcke darin funktionieren </li><li>  Beliebte Bibliotheken in Ladung werden ebenfalls gründlich getestet (alles ist für Einheits- und Integrationstests in Rost eingebaut) und können daher sicher mitgenommen und verwendet werden </li></ul><br>  Das heißt  Im "unsicheren" Block können Sie sich nicht an willkürlichen Ausschweifungen beteiligen, die in C verfügbar sind - sondern nur bei <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">genau bestimmten</a> Arten gefährlicher Aktivitäten.  Deshalb kannst und solltest du ruhig schlafen :-) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de477342/">https://habr.com/ru/post/de477342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de477326/index.html">Einfachheit Hickey</a></li>
<li><a href="../de477328/index.html">Gründe für die Einführung des statischen Code-Analysators PVS-Studio in den Entwicklungsprozess</a></li>
<li><a href="../de477332/index.html">Hackney Pipeline: Hackathon zum Markieren von Daten von Ozon, Yandex.Tolki und Netologiya</a></li>
<li><a href="../de477336/index.html">Serverloses Rechnen basierend auf OpenWhisk, Teil 1</a></li>
<li><a href="../de477338/index.html">OWASP Treffen Moskau (Russland) 12/19 CFP</a></li>
<li><a href="../de477344/index.html">JIRA: Regeln für die zeitnahe Erstellung leckerer Software. TLDR 1: Grenzen der Möglichkeiten</a></li>
<li><a href="../de477348/index.html">Habr Weekly # 28 / In der Öffentlichkeit zu sprechen ist nicht beängstigend, Starship explodierte, Tesla zeigte CYBRTRCK, Peregrine Falcon hackte</a></li>
<li><a href="../de477350/index.html">Erste Anwendung (Avalanche - Application Framework für Java)</a></li>
<li><a href="../de477352/index.html">Lizenzen für Websites und Internetdienste in China</a></li>
<li><a href="../de477354/index.html">Fragen zum Vorstellungsgespräch - vom Kandidaten bis zum Arbeitgeber</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>