<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåÑ ‚ú≥Ô∏è üßíüèæ Engenharia do Caos: a arte da destrui√ß√£o intencional. Parte 1 ü§§ üèø üö£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota perev. : Temos o prazer de compartilhar a tradu√ß√£o do maravilhoso material do evangelista s√™nior de tecnologia da AWS - Adrian Hornsby. Em palavr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Engenharia do Caos: a arte da destrui√ß√£o intencional. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/460367/">  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: Temos o prazer de compartilhar a tradu√ß√£o do maravilhoso material do evangelista s√™nior de tecnologia da AWS - Adrian Hornsby.</i>  <i>Em palavras simples, ele explica a import√¢ncia de experimentos projetados para mitigar as conseq√º√™ncias de falhas nos sistemas de TI.</i>  <i>Voc√™ provavelmente j√° ouviu falar sobre o Chaos Monkey (ou at√© usou solu√ß√µes semelhantes)?</i>  <i>Hoje, abordagens para a cria√ß√£o de tais ferramentas e sua implementa√ß√£o em um contexto mais amplo s√£o realizadas como parte de uma atividade chamada engenharia do caos.</i>  <i>Leia mais sobre isso neste artigo.</i> <br><br><img src="https://habrastorage.org/webt/uh/qj/br/uhqjbr3b4vpo01apyt-0r8kgojg.jpeg"><br><br><blockquote>  "Mas por tr√°s de toda essa beleza est√° o caos e a loucura."  - curtimento de paredes </blockquote><br>  <b>Bombeiros</b> .  Esses especialistas altamente qualificados arriscam suas vidas todos os dias, combatendo o fogo.  Voc√™ sabia que antes de se tornar bombeiro, voc√™ precisa passar pelo menos 600 horas em treinamento?  E este √© apenas o come√ßo.  Segundo relatos, os bombeiros treinam at√© 80% do seu tempo de trabalho. <br><br><h2>  Porque </h2><a name="habracut"></a><br>  Quando um bombeiro luta contra o fogo real, ele precisa de <b>intui√ß√£o</b> adequada.  Para desenvolv√™-lo, voc√™ precisa treinar hora ap√≥s hora, dia ap√≥s dia.  Como se costuma dizer, a pr√°tica faz maravilhas. <br><br><blockquote>  ‚ÄúParece que eles penetram na pr√≥pria ess√™ncia do fogo;  tais an√°logos do Dr. Phil para a chama ".  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Combate a inc√™ndios florestais com computadores e intui√ß√£o</a> </blockquote><br>  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: Phillip Calvin "Phil" McGraw √© um psic√≥logo, escritor e apresentador do popular programa de televis√£o "Doctor Phil", no qual o apresentador oferece aos participantes solu√ß√µes para seus problemas.</i> <br><br><h3>  Era uma vez em Seattle </h3><br>  No in√≠cio dos anos 2000, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jesse Robbins</a> , que ocupava uma posi√ß√£o oficial na Amazon com o nome oficial de <b>Master of Disaster</b> , criou e liderou o programa GameDay.  Foi baseado em sua experi√™ncia como bombeiro.  O GameDay foi projetado para testar, educar e preparar v√°rios sistemas, software e pessoas da Amazon para poss√≠veis situa√ß√µes de crise. <br><br>  Assim como os bombeiros desenvolvem intui√ß√£o para combater inc√™ndios, Jesse estava prestes a ajudar sua equipe a desenvolver intui√ß√£o para combater eventos catastr√≥ficos em larga escala. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zoz0ZjfrQ9s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>"GameDay: Criando resili√™ncia atrav√©s da destrui√ß√£o" - Jesse Robbins</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O GameDay</a> foi projetado para aumentar a resili√™ncia do site de varejo da Amazon, introduzindo deliberadamente erros em sistemas de miss√£o cr√≠tica. <br><br>  A GameDay come√ßou com uma s√©rie de an√∫ncios para toda a empresa de que um alarme de treinamento foi planejado - √†s vezes em larga escala, por exemplo, desativando um data center inteiro.  Os detalhes sobre o desligamento planejado foram m√≠nimos e a equipe recebeu v√°rios meses para se preparar.  O principal objetivo do exerc√≠cio era verificar se os funcion√°rios podem lidar com a crise local e eliminar rapidamente suas conseq√º√™ncias. <br><br>  Durante esses exerc√≠cios, ferramentas e processos especiais, como monitoramento, alertas e chamadas urgentes, foram usados ‚Äã‚Äãpara analisar e identificar erros nos procedimentos de resposta a incidentes.  Como se viu, o GameDay revela perfeitamente os problemas arquitet√¥nicos cl√°ssicos.  √Äs vezes, tamb√©m era poss√≠vel detectar os chamados "defeitos ocultos" - problemas manifestados devido √†s especificidades do incidente.  Por exemplo, os sistemas de gerenciamento de incidentes cr√≠ticos para o processo de recupera√ß√£o falharam devido a efeitos colaterais inesperados causados ‚Äã‚Äãpor um problema causado pelo homem. <br><br>  √Ä medida que a empresa crescia, o raio te√≥rico de derrota do GameDay se expandia.  No final, esses exerc√≠cios pararam: o dano potencial √† empresa se tornaria muito grande se algo desse errado.  Desde ent√£o, o programa degenerou em uma s√©rie de experimentos de neg√≥cios d√≠spares e sem impacto para o treinamento de pessoal em situa√ß√µes de crise.  N√£o vou entrar em detalhes dos experimentos neste artigo, mas farei isso no futuro.  Desta vez, quero discutir a importante ideia subjacente ao GameDay: <i>engenharia de resili√™ncia</i> , tamb√©m conhecida como <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">engenharia do caos</a></i> . <br><br><h2>  Ascens√£o do macaco </h2><br>  Voc√™ provavelmente j√° ouviu falar da Netflix, o provedor de conte√∫do de v√≠deo on-line.  A Netflix come√ßou a mudar de seu pr√≥prio data center para a AWS Cloud em agosto de 2008.  Essa etapa foi causada por s√©rios danos ao banco de dados, devido ao atraso na entrega do DVD por tr√™s dias (sim, o Netflix come√ßou enviando filmes por correio normal).  A migra√ß√£o para a nuvem foi associada √† necessidade de suportar cargas de streaming muito mais altas, bem como ao desejo de abandonar a arquitetura monol√≠tica e migrar para microsservi√ßos f√°ceis de dimensionar, dependendo do n√∫mero de usu√°rios e do tamanho da equipe de engenharia.  A parte do usu√°rio do servi√ßo de streaming foi transferida para a AWS primeiro, entre 2010 e 2011, seguida pela TI corporativa e todas as outras estruturas.  O data center da Netflix foi fechado em 2016.  A empresa mede a acessibilidade como uma raz√£o entre o n√∫mero de tentativas bem-sucedidas de lan√ßar um filme e o n√∫mero total, e n√£o como uma simples compara√ß√£o de tempo de atividade e tempo de inatividade, e tenta atingir uma figura de 0,9999 em cada regi√£o trimestralmente (geralmente √© bem-sucedido).  A arquitetura global da Netflix abrange tr√™s regi√µes da AWS.  Assim, em caso de problemas em uma das regi√µes, a empresa pode redirecionar usu√°rios para outras. <br><br>  Repito uma das minhas cita√ß√µes favoritas: <br><br><blockquote>  ‚ÄúO fracasso √© inevit√°vel;  eventualmente, qualquer sistema falhar√° com o tempo. ‚Äù  - Werner Vogels </blockquote><br>  De fato, falhas em sistemas distribu√≠dos, especialmente em larga escala, s√£o inevit√°veis, mesmo na nuvem.  No entanto, a nuvem da AWS e suas primitivas de redund√¢ncia - em particular, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">princ√≠pio de v√°rias zonas de acesso</a> nas quais ela √© constru√≠da - permitem que qualquer pessoa crie servi√ßos altamente confi√°veis. <br><br>  Usando os princ√≠pios de redund√¢ncia e <i>degrada√ß√£o graciosa</i> , a Netflix <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conseguiu sobreviver a falhas</a> sem afetar os usu√°rios finais. <br><br>  Desde o in√≠cio, a Netflix aderiu aos princ√≠pios arquitet√¥nicos mais rigorosos.  Um dos primeiros aplicativos implantados na AWS foi o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Monkey</a> - para oferecer suporte a microsservi√ßos sem estado de escala autom√°tica.  Em outras palavras, qualquer inst√¢ncia pode ser parada e substitu√≠da automaticamente sem nenhuma perda de estado.  O Caos Monkey garante que ningu√©m viole esse princ√≠pio. <br><br>  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: A prop√≥sito, para Kubernetes, existe um an√°logo chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kube-monkey</a> , cujo desenvolvimento parece ter parado em mar√ßo deste ano.</i> <br><br>  A Netflix possui mais uma regra, que prev√™ a distribui√ß√£o de cada servi√ßo em tr√™s zonas de disponibilidade.  Ele deve continuar funcionando se apenas dois deles estiverem dispon√≠veis.  Para garantir que essa regra seja cumprida, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Gorilla</a> desativa as zonas de disponibilidade.  Mais globalmente, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Kong</a> pode desativar toda a regi√£o da AWS para confirmar que todos os usu√°rios do Netflix podem ser atendidos em qualquer uma das tr√™s regi√µes.  E eles fazem esses testes em larga escala a cada poucas semanas na produ√ß√£o para garantir que nada escapa √† aten√ß√£o. <br><br>  Por fim, a Netflix tamb√©m desenvolveu as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ferramentas Chaos Testing</a> mais focadas para ajudar a detectar problemas com microsservi√ßos e arquitetura de armazenamento.  Voc√™ pode aprender mais sobre essas t√©cnicas no livro Chaos Engineering, que recomendo a qualquer pessoa interessada neste t√≥pico. <br><br><blockquote>  "Conduzindo experimentos regularmente que imitam interrup√ß√µes regionais, conseguimos identificar v√°rias falhas sist√™micas e elimin√°-las em um est√°gio inicial".  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Blog da Netflix</a> </blockquote><br>  Hoje, os princ√≠pios da engenharia do caos s√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">formalizados</a> ;  eles recebem a seguinte defini√ß√£o: <br><br><blockquote>  ‚ÄúA engenharia do caos √© uma abordagem que envolve a realiza√ß√£o de experimentos em um sistema de produ√ß√£o para garantir sua capacidade de suportar v√°rias interfer√™ncias que ocorrem durante a opera√ß√£o.‚Äù  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">principiosofchaos.org</a> </blockquote><br>  No entanto, em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">discurso na AWS re: Invent 2018</a> sobre engenharia do caos, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adrian Cockcroft</a> , ex-criador da arquitetura em nuvem da Netflix, que ajudou a empresa a mudar totalmente para a infraestrutura em nuvem, introduziu uma defini√ß√£o alternativa de engenharia do caos.  Na minha opini√£o, √© mais preciso e bem estabelecido: <br><br><blockquote>  "A engenharia do caos √© um experimento projetado para mitigar as consequ√™ncias de falhas." </blockquote><br>  De fato, sabemos que as falhas acontecem o tempo todo.  Com a resposta certa, eles n√£o devem afetar os usu√°rios finais.  O principal objetivo da engenharia do caos √© detectar problemas que n√£o foram resolvidos adequadamente. <br><br><h2>  Pr√©-requisitos para criar o caos </h2><br>  Antes de iniciar a engenharia do caos, certifique-se de fazer todo o trabalho necess√°rio para garantir a sustentabilidade em todos os n√≠veis da organiza√ß√£o.  Criar sistemas tolerantes a falhas n√£o √© apenas um software.  Come√ßa no n√≠vel da <b>infraestrutura</b> , estende-se √† <b>rede e aos dados</b> , afeta a estrutura dos <b>aplicativos</b> e, finalmente, abrange <b>pessoas e cultura</b> .  No passado, escrevi muito sobre modelos de estabilidade e falhas ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ) e n√£o vou me concentrar nisso agora, mas n√£o posso ficar sem um pequeno lembrete. <br><br><img src="https://habrastorage.org/webt/nb/ee/vm/nbeevmrl7-is1bbf_gp6_yl58w0.png"><br>  <i>Alguns elementos obrigat√≥rios antes de introduzir o caos no sistema (a lista n√£o √© completa)</i> <br><br><h2>  Etapas da Engenharia do Caos </h2><br>  √â importante entender que a ess√™ncia da engenharia do caos <b>N√ÉO</b> √© soltar os macacos e destru√≠-los em sequ√™ncia, sem nenhum objetivo.  O objetivo desta disciplina √© destruir alguns elementos do sistema em um ambiente controlado por meio de experimentos bem planejados para verificar se o seu aplicativo pode suportar condi√ß√µes turbulentas. <br><br>  Para fazer isso, voc√™ deve seguir o processo claramente definido e formalizado mostrado na figura abaixo.  Com ele, voc√™ pode passar da compreens√£o do estado estacion√°rio do seu sistema para a formula√ß√£o de uma hip√≥tese, testando-a e, finalmente, analisando a experi√™ncia adquirida durante o experimento e aumentando a estabilidade do pr√≥prio sistema. <br><br><img src="https://habrastorage.org/webt/zb/hn/75/zbhn758zl-ucujjyraxolrfufik.png"><br>  <i>Etapas da Engenharia do Caos</i> <br><br><h3>  1. Condi√ß√£o est√°vel </h3><br>  Um dos elementos mais importantes da engenharia do caos √© entender o comportamento de um sistema em condi√ß√µes normais. <br><br>  <b>Porque</b>  √â simples: ap√≥s a introdu√ß√£o de falha artificial, voc√™ deve garantir que o sistema retorne a um estado est√°vel bem estudado e que o experimento n√£o interfira mais com seu comportamento normal. <br><br>  O ponto principal aqui √© que voc√™ precisa se concentrar n√£o nos atributos internos do sistema (processador, mem√≥ria, etc.), mas monitorar os sinais de sa√≠da mensur√°veis ‚Äã‚Äãque conectam o desempenho √† experi√™ncia do usu√°rio.  Para que esses sinais de sa√≠da estejam em um estado est√°vel, o comportamento observado do sistema deve ter um padr√£o previs√≠vel, mas sofrer altera√ß√µes significativas quando ocorrer um mau funcionamento no sistema. <br><br>  Tendo em mente a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">defini√ß√£o de engenharia do caos</a> proposta acima por Adrian Cockcroft, esse estado est√°vel muda quando uma falha fora de controle causa um problema inesperado e sinaliza que o experimento do caos deve ser interrompido. <br><br>  Como exemplo de condi√ß√µes est√°veis, citemos a experi√™ncia na Amaz√¥nia.  A empresa usa o n√∫mero de pedidos como uma das m√©tricas de uma condi√ß√£o est√°vel e por boas raz√µes.  Em 2007, Greg Linden, que trabalhou anteriormente na Amazon, falou sobre como, como parte de um experimento usando o m√©todo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">teste A / B, ele</a> tentou diminuir o tempo de carregamento de p√°ginas no site em incrementos de 100 ms e descobriu que at√© pequenos atrasos resultam em a uma queda s√©ria na receita.  Com um aumento no tempo de carregamento de 100 ms, o n√∫mero de pedidos (e, portanto, de vendas) diminuiu 1%.  √â por isso que o n√∫mero de pedidos √© um excelente candidato para m√©tricas est√°veis. <br><br>  A Netflix usa uma m√©trica do lado do servidor associada ao in√≠cio da reprodu√ß√£o - o n√∫mero de cliques no bot√£o reproduzir.  Eles notaram uma regularidade no comportamento do indicador SPS (partidas por segundo) e suas flutua√ß√µes significativas em caso de falhas no sistema.  A m√©trica √© chamada "Pulso da Netflix" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pulso da Netflix</a> ). <br><br>  O n√∫mero de pedidos no caso da Amazon e Netflix Pulse s√£o excelentes bar√¥metros de estabilidade, pois combinam a experi√™ncia do usu√°rio e as m√©tricas operacionais em um √∫nico indicador mensur√°vel e altamente previs√≠vel. <br><br><h3>  Me√ßa, me√ßa e me√ßa novamente </h3><br>  N√£o √© necess√°rio dizer que, se voc√™ n√£o conseguir registrar adequadamente o desempenho do sistema, n√£o poder√° monitorar as altera√ß√µes em um estado est√°vel (ou mesmo detect√°-las).  Preste aten√ß√£o especial √† remo√ß√£o de todos os par√¢metros / indicadores da rede, hardware e finaliza√ß√£o com o aplicativo e as pessoas.  Desenhe gr√°ficos dessas medidas, mesmo que elas n√£o mudem com o tempo.  Voc√™ ficar√° surpreso ao descobrir correla√ß√µes que n√£o conhecia. <br><br><blockquote>  "Torne o mais f√°cil poss√≠vel para os engenheiros o acesso aos dados que eles podem contar ou traduzir em forma gr√°fica."  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ian Malpass</a> </blockquote><br><h3>  2. Hip√≥tese </h3><br>  Tendo lidado com um estado est√°vel, podemos prosseguir na formula√ß√£o de uma hip√≥tese. <br><br><img src="https://habrastorage.org/webt/p-/yw/a0/p-ywa0-dwwea4oemigua1bpd9va.png"><br><br><ul><li>  <i>E se o mecanismo de recomenda√ß√£o parar?</i> </li><li>  <i>E se o balanceador de carga cair?</i> </li><li>  <i>E se o cache cair?</i> </li><li>  <i>E se o atraso aumentar em 300 ms?</i> </li><li>  <i>E se a base principal falhar?</i> </li></ul><br>  Obviamente, apenas uma hip√≥tese deve ser escolhida e n√£o √© necess√°rio complic√°-la desnecessariamente.  Comece pequeno.  Eu gosto de come√ßar com a hip√≥tese da equipe.  Voc√™ j√° ouviu falar do <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fator √¥nibus</a></i> ?  O fator de barramento √© uma medida de risco associada ao fato de que o conhecimento n√£o √© distribu√≠do igualmente entre os membros da equipe.  Permite calcular o n√∫mero m√≠nimo de participantes, ap√≥s uma s√∫bita perda do qual o projeto ser√° interrompido devido √† falta de conhecimento ou experi√™ncia. <br><br>  Muitas empresas t√™m especialistas t√©cnicos cujo desaparecimento repentino ("atropelado por um √¥nibus") ter√° um efeito devastador no projeto e na equipe.  Identifique essas pessoas e conduza experimentos de caos com a participa√ß√£o deles: por exemplo, pegue computadores deles e envie-os para casa por um dia e observe os resultados (geralmente ca√≥ticos). <br><br><h3>  Torne o problema comum a todos! </h3><br>  Envolva <b>toda a equipe</b> no desenvolvimento de uma hip√≥tese.  Permita que todos participem do brainstorming: propriet√°rio do produto, gerente t√©cnico, desenvolvedores de back-end e front-end, designers, arquitetos etc.  Todos que est√£o de uma forma ou de outra conectados ao produto. <br><br>  Antes de tudo, pe√ßa a todos que escrevam sua pr√≥pria resposta √† pergunta "E se ...?"  em um peda√ßo de papel.  Voc√™ ver√° que, na maioria dos casos, todos ter√£o sua pr√≥pria resposta e entender√° que alguma parte da equipe ainda n√£o pensou em um problema assim. <br><br>  Pare neste momento e discuta por que os membros da equipe t√™m uma vis√£o diferente do comportamento do produto no caso de "E se ...?".  Volte √†s suas especifica√ß√µes e certifique-se de que todos entendam corretamente o poss√≠vel desenvolvimento de eventos. <br><br>  Tomemos, por exemplo, o site de varejo da Amazon mencionado.  E se o servi√ßo Comprar por categoria parar de carregar na p√°gina principal? <br><br><img src="https://habrastorage.org/webt/f-/of/9c/f-of9cpyyrannahwk9ugxqls-to.png"><br><br>  Devo retornar um erro 404?  Vale a pena carregar a p√°gina, deixando um espa√ßo vazio como na imagem abaixo? <br><br><img src="https://habrastorage.org/webt/ro/_g/n6/ro_gn60gi0zh7zklnx1n50gnrbc.png"><br><br>  Vale a pena sacrificar parte da funcionalidade e, por exemplo, deixar a p√°gina expandir e ocultar o erro? <br><br><img src="https://habrastorage.org/webt/pe/4q/hc/pe4qhcavxucjgivsfpaujibieki.png"><br><br>  E isso √© apenas no lado da interface do usu√°rio.  O que deve acontecer no back-end?  Os alertas devem ser enviados?  Um servi√ßo com falha deve continuar recebendo solicita√ß√µes sempre que o usu√°rio carrega a p√°gina inicial ou o back-end deve cort√°-lo completamente? <br><br>  <b>E o √∫ltimo.</b>  <b>Por favor, n√£o formule uma hip√≥tese, que √© sabida antecipadamente que ela partir√° lenha!</b>  <b>Fa√ßa experi√™ncias com partes do sistema que, na sua opini√£o, s√£o est√°veis ‚Äã‚Äã- em √∫ltima an√°lise, esse √© o objetivo do experimento.</b> <br><br><h3>  3. Projete e execute um experimento </h3><br><ul><li>  Escolha uma hip√≥tese; </li><li>  Defina o escopo do experimento; </li><li>  Definir os indicadores relacionados a serem medidos; </li><li>  Notifique a organiza√ß√£o. </li></ul><br>  Hoje, muitas pessoas, assim como o site de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">princ√≠pios</a> do caos, est√£o promovendo a id√©ia de engenharia do caos na produ√ß√£o.  Embora esse seja o objetivo final, a maioria das organiza√ß√µes tem medo dessa abordagem, portanto voc√™ n√£o deve come√ßar com ela. <br><br>  Para mim, a engenharia do caos n√£o √© apenas a destrui√ß√£o de v√°rios elementos dos sistemas de produ√ß√£o.  Esta √© uma jornada.  Uma jornada ao mundo do conhecimento, indissoci√°vel de atividades como a destrui√ß√£o de sistemas em um ambiente controlado - qualquer ambiente, seja um ambiente de desenvolvimento local, beta, estadiamento ou prod.  Destrui√ß√£o atrav√©s de experimentos bem projetados para criar confian√ßa na capacidade do seu aplicativo de tolerar condi√ß√µes turbulentas.  ‚Äú <b>Construir confian√ßa</b> ‚Äù √© um ponto-chave nesse caso, pois √© um precursor das mudan√ßas culturais necess√°rias para a implementa√ß√£o bem-sucedida da engenharia do caos e a pr√°tica de melhorar a confiabilidade da sua empresa. <br><br>  Honestamente, a maioria das equipes aprender√° muito quebrando coisas mesmo em um ambiente de n√£o produ√ß√£o.  Apenas tente fazer com que o <code>docker stop database</code> em seu ambiente local e veja se voc√™ consegue lidar com esse problema sem consequ√™ncias.  Alta probabilidade de que n√£o. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/JlLSz_hJQ1c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Parada de banco de dados - exemplo</i> <br><br>  Comece pequeno e gradualmente construa confian√ßa dentro de sua equipe e organiza√ß√£o.  Voc√™ ser√° informado de que "o tr√°fego real de produ√ß√£o √© a √∫nica maneira de capturar com seguran√ßa o comportamento do sistema".  Ou√ßa, sorria e continue fazendo lentamente o que est√° fazendo.  A pior coisa que voc√™ pode fazer √© aplicar a engenharia do caos √† produ√ß√£o e falhar miseravelmente.  Depois disso, ningu√©m confiar√° em voc√™, e voc√™ ser√° for√ßado a esquecer os ‚Äúmacacos do caos‚Äù para sempre. <br><br>  Ganhe credibilidade primeiro.  Mostre √†s organiza√ß√µes e colegas que voc√™ sabe o que est√° fazendo.  Torne-se um bombeiro e aprenda sobre a chama o m√°ximo poss√≠vel antes de come√ßar a treinar com fogo ativo.  Ganhe credibilidade.  Lembra da <b>hist√≥ria da tartaruga e da lebre</b> ?  A corrida √© sempre ganha por uma lenta e paciente. <br><br>  Um dos pontos mais importantes durante o experimento √© entender o <b>raio</b> potencial <b>de dano causado</b> pelo mau funcionamento inserido e minimiz√°-lo.  Fa√ßa a si mesmo as seguintes perguntas: <br><br><ul><li>  Quantos clientes ser√£o afetados pelo experimento? </li><li>  Que funcionalidade sofrer√°? </li><li>  Quais lugares ser√£o afetados? </li></ul><br>  Pense em um "bot√£o de parada de emerg√™ncia" ou em uma maneira de encerrar imediatamente um experimento e retornar a um estado est√°vel o mais r√°pido poss√≠vel.  Eu gosto de realizar experi√™ncias usando o chamado.  Lan√ßamentos "Can√°rias".  Essa t√©cnica reduz o risco de falha ao iniciar novas vers√µes de um aplicativo em produ√ß√£o, implementando gradualmente as altera√ß√µes em um pequeno subconjunto de usu√°rios e depois espalhando-as lentamente por toda a infraestrutura e todos os usu√°rios.  Adoro lan√ßamentos de can√°rios simplesmente porque eles satisfazem o princ√≠pio de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">infraestrutura fixa</a> , e o experimento em si √© bem f√°cil de parar. <br><br><img src="https://habrastorage.org/webt/33/q0/qv/33q0qvqcmu2dq3ghnn_8uegkmd0.png"><br>  <i>Um exemplo de distribui√ß√£o de can√°rios baseada em DNS para experimentos de caos</i> <br><br>  Tenha cuidado com experimentos que alteram o estado do aplicativo (cache ou banco de dados) ou aqueles que n√£o podem ser revertidos (facilmente ou em princ√≠pio). <br><br>  √â curioso que Adrian Cockcroft me disse que um dos motivos pelos quais a Netflix come√ßou a usar os bancos de dados NoSQL foi a falta de esquemas de altera√ß√µes ou revers√µes neles, portanto, √© muito mais f√°cil atualizar gradualmente ou corrigir registros individuais com dados (ou seja, eles s√£o mais amig√°vel √† engenharia do caos). <br><br><h3>  4. Observe e aprenda </h3><br>  Para aprender algo novo e monitorar o progresso do experimento, voc√™ deve poder acompanhar o desempenho do sistema.  Como mencionado anteriormente, preste muita aten√ß√£o a todos os tipos de m√©tricas e par√¢metros!  Quantifique os resultados e sempre - sempre!  - Anote o tempo at√© os primeiros sinais de um problema aparecerem.  Na minha hist√≥ria, aconteceu v√°rias vezes que os sistemas de aviso se recusaram e o primeiro a relatar o problema aos clientes no Twitter ... acredite, voc√™ n√£o vai querer estar nessa situa√ß√£o, ent√£o use experimentos de caos para verificar seus sistemas de monitoramento e aviso. <br><br><ul><li>  Hora de descobrir? </li><li>  Hora de alertar e iniciar uma a√ß√£o ativa? </li><li>  Hora de aviso p√∫blico? </li><li>  Tempo para perda parcial de funcionalidade? </li><li>  A dura√ß√£o do per√≠odo de autocura? </li><li>  Tempo para recupera√ß√£o total ou parcial? </li><li>  Hora de terminar a crise e voltar a um estado est√°vel? </li></ul><br>  Lembre-se de que n√£o h√° uma causa isolada isolada de falha.  Os acidentes graves s√£o sempre o resultado de v√°rias pequenas falhas que se acumulam e levam a uma crise em larga escala. <br><br>  <b>Fa√ßa uma an√°lise post-mortem detalhada para cada experimento!</b> <br><br>  Na AWS, prestamos muita aten√ß√£o na an√°lise de falhas detectadas e no entendimento das causas que as levaram a evitar problemas semelhantes no futuro.  Todas as conclus√µes e resultados do experimento est√£o resumidos em um documento chamado Corre√ß√£o de Erros (COE).  O COE nos permite aprender com nossos erros, sejam falhas de tecnologia, processo ou mesmo organiza√ß√£o.  Usamos esse mecanismo para eliminar as causas principais de falhas e desenvolvimento cont√≠nuo. <br><br>  A chave para o sucesso nesse processo √© a abertura e a transpar√™ncia em rela√ß√£o ao que deu errado.  Um dos princ√≠pios mais importantes ao escrever um bom COE √© ser imparcial e evitar mencionar pessoas espec√≠ficas.  Isso geralmente √© dif√≠cil em um ambiente que n√£o incentiva esse comportamento e n√£o permite falhas.  A Amazon usa uma cole√ß√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Princ√≠pios</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lideran√ßa</a> para promover esse comportamento - por exemplo, <b>autocr√≠tica, uma abordagem anal√≠tica, comprometimento com os mais altos padr√µes e responsabilidade</b> s√£o componentes essenciais do processo de COE e excel√™ncia operacional em geral. <br><br>  O relat√≥rio do COE possui cinco se√ß√µes principais: <br><br><ol><li>  <b>O que aconteceu (ordem cronol√≥gica)?</b> </li><li>  <b>Qual foi o impacto nos clientes?</b> </li><li>  <b>Por que o erro aconteceu?</b>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cinco "por qu√™?"</a> ) </li><li>  <b>O que aprendemos?</b> </li><li>  <b>Como evitar isso no futuro?</b> </li></ol><br>  √â mais dif√≠cil responder a essas perguntas do que parece √† primeira vista, pois voc√™ precisa se certificar de que todo momento incompreens√≠vel / desconhecido seja cuidadosamente estudado. <br><br>  Para transformar o mecanismo do COE em um processo completo, realizamos constantemente verifica√ß√µes na forma de reuni√µes semanais com uma an√°lise obrigat√≥ria das m√©tricas operacionais.  Al√©m disso, os principais especialistas t√©cnicos conduzem an√°lises de m√©tricas semanais com toda a equipe da AWS. <br><br><h3>  5. Corrija e melhore! </h3><br>  A principal li√ß√£o aqui √© <b>, em primeiro lugar, eliminar os problemas identificados durante as experi√™ncias do caos, atribuindo-lhes uma prioridade mais alta do que o desenvolvimento de novas fun√ß√µes</b> .  Envolva a alta ger√™ncia nesse processo e apresente a ele que a solu√ß√£o dos problemas atuais √© muito mais importante do que o desenvolvimento de novas funcionalidades. <br><br>  Certa vez, com a ajuda de um experimento de caos, ajudei um cliente a identificar problemas cr√≠ticos de estabilidade, mas devido √† press√£o do departamento de vendas, a prioridade da corre√ß√£o foi reduzida e todos os esfor√ßos foram direcionados para a introdu√ß√£o de uma coisa nova que √© "extremamente importante" para os clientes.  Duas semanas depois, um per√≠odo de inatividade de 16 horas obrigou a empresa a enfrentar os mesmos problemas que identificamos durante o experimento do caos.  Somente as perdas foram muito maiores. <br><br><h2>  Os benef√≠cios da engenharia do caos </h2><br>  Existem muitas vantagens.  Vou destacar dois, na minha opini√£o, os mais importantes: <br><br>  Em primeiro lugar, a engenharia do caos ajuda a resolver problemas desconhecidos no sistema e corrigi-los antes que levem √† falha de produ√ß√£o, digamos, √†s 3 da manh√£ de domingo.  Ou seja, <b>aumenta a resist√™ncia a colis√µes e, de fato, a qualidade do sono</b> . <br><br>  Em segundo lugar, experimentos de caos realizados com efici√™ncia sempre causam mudan√ßas mais extensas (principalmente culturais) do que o previsto.  Talvez o mais importante deles seja a evolu√ß√£o natural para uma <b>cultura " <i>n√£o culpada"</i></b> , quando a pergunta "Por que voc√™ fez isso?"  se transforma em "Como podemos evitar isso no futuro?".  Como resultado, a equipe se torna mais feliz, mais eficiente, mais interessada e bem-sucedida.  <b>E isso √© maravilhoso!</b> <br><br>  Sobre isso, a primeira parte chega ao fim.  Espero que tenham gostado.  Escreva cr√≠ticas, compartilhe opini√µes ou bata palmas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Medium</a> .  Na pr√≥xima parte, examinarei ferramentas e t√©cnicas para introduzir falhas no sistema.  At√© tchau! <br><br>  Para aqueles que desejam se familiarizar com a segunda parte, ofere√ßo minha apresenta√ß√£o sobre o t√≥pico da engenharia do caos na NDC em Oslo.  Nele, falo sobre muitas das minhas ferramentas favoritas: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/w_Y6C0QgmL0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  PS do tradutor </h2><br>  <s>A segunda parte do artigo em ingl√™s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">j√° apareceu</a> e a traduziremos tamb√©m se percebermos interesse suficiente dos leitores do Habr√© por esse material - coment√°rios relevantes sobre o artigo s√£o bem-vindos!</s>  <b>ATUALIZADO</b> (3 de setembro): Tamb√©m √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">publicada</a> uma tradu√ß√£o da segunda parte. <br><br>  <b>ATUALIZADO</b> (19 de dezembro): a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o da terceira parte</a> ficou dispon√≠vel. <br><br>  Leia tamb√©m em nosso blog: <br><br><ul><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Engenharia do caos: a arte da destrui√ß√£o intencional.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> ‚Äù <i>(como a engenharia do caos contribui para mudan√ßas culturais positivas nas organiza√ß√µes)</i> ; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Engenharia do caos: a arte da destrui√ß√£o intencional.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> ‚Äù <i>(pr√°tica de engenharia do caos com introdu√ß√£o de falhas e ferramentas existentes para isso)</i> ; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como √© fornecida a alta disponibilidade no Kubernetes</a> ‚Äù; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Monitoramento e Kubernetes (revis√£o e reportagem em v√≠deo)</a> ‚Äù; </li><li>  ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Experimentos com o kube-proxy e a inacessibilidade do host no Kubernetes</a> .‚Äù </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460367/">https://habr.com/ru/post/pt460367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460355/index.html">Salvar o afogamento √© o nosso neg√≥cio: como lidar com a desmotiva√ß√£o da equipe</a></li>
<li><a href="../pt460359/index.html">Young Game Designer 2 Course: Balanceando Progress√£o e Din√¢mica sem Matem√°tica</a></li>
<li><a href="../pt460361/index.html">√ìtimas perguntas frequentes sobre seguran√ßa cibern√©tica de sistemas de informa√ß√µes m√©dicas</a></li>
<li><a href="../pt460363/index.html">7 fatores ausentes na abordagem 12 Factor App</a></li>
<li><a href="../pt460365/index.html">Rastreio distribu√≠do: fizemos tudo errado</a></li>
<li><a href="../pt460373/index.html">P√°ginas sob o cap√¥ Turbo: arquitetura da tecnologia de download r√°pido de p√°ginas da Web</a></li>
<li><a href="../pt460375/index.html">Livro "Aprendizado de m√°quina para neg√≥cios e marketing"</a></li>
<li><a href="../pt460377/index.html">Usando o Liquibase para gerenciar a estrutura do banco de dados em um aplicativo Spring Boot. Parte 1</a></li>
<li><a href="../pt460381/index.html">O que √© assertividade e por que √© necess√°rio</a></li>
<li><a href="../pt460383/index.html">As transi√ß√µes de tela em Legend of Zelda usam os recursos n√£o documentados do NES</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>