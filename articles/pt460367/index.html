<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌄 ✳️ 🧒🏾 Engenharia do Caos: a arte da destruição intencional. Parte 1 🤤 🏿 🚣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota perev. : Temos o prazer de compartilhar a tradução do maravilhoso material do evangelista sênior de tecnologia da AWS - Adrian Hornsby. Em palavr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Engenharia do Caos: a arte da destruição intencional. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/460367/">  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: Temos o prazer de compartilhar a tradução do maravilhoso material do evangelista sênior de tecnologia da AWS - Adrian Hornsby.</i>  <i>Em palavras simples, ele explica a importância de experimentos projetados para mitigar as conseqüências de falhas nos sistemas de TI.</i>  <i>Você provavelmente já ouviu falar sobre o Chaos Monkey (ou até usou soluções semelhantes)?</i>  <i>Hoje, abordagens para a criação de tais ferramentas e sua implementação em um contexto mais amplo são realizadas como parte de uma atividade chamada engenharia do caos.</i>  <i>Leia mais sobre isso neste artigo.</i> <br><br><img src="https://habrastorage.org/webt/uh/qj/br/uhqjbr3b4vpo01apyt-0r8kgojg.jpeg"><br><br><blockquote>  "Mas por trás de toda essa beleza está o caos e a loucura."  - curtimento de paredes </blockquote><br>  <b>Bombeiros</b> .  Esses especialistas altamente qualificados arriscam suas vidas todos os dias, combatendo o fogo.  Você sabia que antes de se tornar bombeiro, você precisa passar pelo menos 600 horas em treinamento?  E este é apenas o começo.  Segundo relatos, os bombeiros treinam até 80% do seu tempo de trabalho. <br><br><h2>  Porque </h2><a name="habracut"></a><br>  Quando um bombeiro luta contra o fogo real, ele precisa de <b>intuição</b> adequada.  Para desenvolvê-lo, você precisa treinar hora após hora, dia após dia.  Como se costuma dizer, a prática faz maravilhas. <br><br><blockquote>  “Parece que eles penetram na própria essência do fogo;  tais análogos do Dr. Phil para a chama ".  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Combate a incêndios florestais com computadores e intuição</a> </blockquote><br>  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: Phillip Calvin "Phil" McGraw é um psicólogo, escritor e apresentador do popular programa de televisão "Doctor Phil", no qual o apresentador oferece aos participantes soluções para seus problemas.</i> <br><br><h3>  Era uma vez em Seattle </h3><br>  No início dos anos 2000, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jesse Robbins</a> , que ocupava uma posição oficial na Amazon com o nome oficial de <b>Master of Disaster</b> , criou e liderou o programa GameDay.  Foi baseado em sua experiência como bombeiro.  O GameDay foi projetado para testar, educar e preparar vários sistemas, software e pessoas da Amazon para possíveis situações de crise. <br><br>  Assim como os bombeiros desenvolvem intuição para combater incêndios, Jesse estava prestes a ajudar sua equipe a desenvolver intuição para combater eventos catastróficos em larga escala. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zoz0ZjfrQ9s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>"GameDay: Criando resiliência através da destruição" - Jesse Robbins</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O GameDay</a> foi projetado para aumentar a resiliência do site de varejo da Amazon, introduzindo deliberadamente erros em sistemas de missão crítica. <br><br>  A GameDay começou com uma série de anúncios para toda a empresa de que um alarme de treinamento foi planejado - às vezes em larga escala, por exemplo, desativando um data center inteiro.  Os detalhes sobre o desligamento planejado foram mínimos e a equipe recebeu vários meses para se preparar.  O principal objetivo do exercício era verificar se os funcionários podem lidar com a crise local e eliminar rapidamente suas conseqüências. <br><br>  Durante esses exercícios, ferramentas e processos especiais, como monitoramento, alertas e chamadas urgentes, foram usados ​​para analisar e identificar erros nos procedimentos de resposta a incidentes.  Como se viu, o GameDay revela perfeitamente os problemas arquitetônicos clássicos.  Às vezes, também era possível detectar os chamados "defeitos ocultos" - problemas manifestados devido às especificidades do incidente.  Por exemplo, os sistemas de gerenciamento de incidentes críticos para o processo de recuperação falharam devido a efeitos colaterais inesperados causados ​​por um problema causado pelo homem. <br><br>  À medida que a empresa crescia, o raio teórico de derrota do GameDay se expandia.  No final, esses exercícios pararam: o dano potencial à empresa se tornaria muito grande se algo desse errado.  Desde então, o programa degenerou em uma série de experimentos de negócios díspares e sem impacto para o treinamento de pessoal em situações de crise.  Não vou entrar em detalhes dos experimentos neste artigo, mas farei isso no futuro.  Desta vez, quero discutir a importante ideia subjacente ao GameDay: <i>engenharia de resiliência</i> , também conhecida como <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">engenharia do caos</a></i> . <br><br><h2>  Ascensão do macaco </h2><br>  Você provavelmente já ouviu falar da Netflix, o provedor de conteúdo de vídeo on-line.  A Netflix começou a mudar de seu próprio data center para a AWS Cloud em agosto de 2008.  Essa etapa foi causada por sérios danos ao banco de dados, devido ao atraso na entrega do DVD por três dias (sim, o Netflix começou enviando filmes por correio normal).  A migração para a nuvem foi associada à necessidade de suportar cargas de streaming muito mais altas, bem como ao desejo de abandonar a arquitetura monolítica e migrar para microsserviços fáceis de dimensionar, dependendo do número de usuários e do tamanho da equipe de engenharia.  A parte do usuário do serviço de streaming foi transferida para a AWS primeiro, entre 2010 e 2011, seguida pela TI corporativa e todas as outras estruturas.  O data center da Netflix foi fechado em 2016.  A empresa mede a acessibilidade como uma razão entre o número de tentativas bem-sucedidas de lançar um filme e o número total, e não como uma simples comparação de tempo de atividade e tempo de inatividade, e tenta atingir uma figura de 0,9999 em cada região trimestralmente (geralmente é bem-sucedido).  A arquitetura global da Netflix abrange três regiões da AWS.  Assim, em caso de problemas em uma das regiões, a empresa pode redirecionar usuários para outras. <br><br>  Repito uma das minhas citações favoritas: <br><br><blockquote>  “O fracasso é inevitável;  eventualmente, qualquer sistema falhará com o tempo. ”  - Werner Vogels </blockquote><br>  De fato, falhas em sistemas distribuídos, especialmente em larga escala, são inevitáveis, mesmo na nuvem.  No entanto, a nuvem da AWS e suas primitivas de redundância - em particular, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">princípio de várias zonas de acesso</a> nas quais ela é construída - permitem que qualquer pessoa crie serviços altamente confiáveis. <br><br>  Usando os princípios de redundância e <i>degradação graciosa</i> , a Netflix <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conseguiu sobreviver a falhas</a> sem afetar os usuários finais. <br><br>  Desde o início, a Netflix aderiu aos princípios arquitetônicos mais rigorosos.  Um dos primeiros aplicativos implantados na AWS foi o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Monkey</a> - para oferecer suporte a microsserviços sem estado de escala automática.  Em outras palavras, qualquer instância pode ser parada e substituída automaticamente sem nenhuma perda de estado.  O Caos Monkey garante que ninguém viole esse princípio. <br><br>  <i><b>Nota</b></i>  <i><b>perev.</b></i>  <i>: A propósito, para Kubernetes, existe um análogo chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kube-monkey</a> , cujo desenvolvimento parece ter parado em março deste ano.</i> <br><br>  A Netflix possui mais uma regra, que prevê a distribuição de cada serviço em três zonas de disponibilidade.  Ele deve continuar funcionando se apenas dois deles estiverem disponíveis.  Para garantir que essa regra seja cumprida, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Gorilla</a> desativa as zonas de disponibilidade.  Mais globalmente, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Kong</a> pode desativar toda a região da AWS para confirmar que todos os usuários do Netflix podem ser atendidos em qualquer uma das três regiões.  E eles fazem esses testes em larga escala a cada poucas semanas na produção para garantir que nada escapa à atenção. <br><br>  Por fim, a Netflix também desenvolveu as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ferramentas Chaos Testing</a> mais focadas para ajudar a detectar problemas com microsserviços e arquitetura de armazenamento.  Você pode aprender mais sobre essas técnicas no livro Chaos Engineering, que recomendo a qualquer pessoa interessada neste tópico. <br><br><blockquote>  "Conduzindo experimentos regularmente que imitam interrupções regionais, conseguimos identificar várias falhas sistêmicas e eliminá-las em um estágio inicial".  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Blog da Netflix</a> </blockquote><br>  Hoje, os princípios da engenharia do caos são <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">formalizados</a> ;  eles recebem a seguinte definição: <br><br><blockquote>  “A engenharia do caos é uma abordagem que envolve a realização de experimentos em um sistema de produção para garantir sua capacidade de suportar várias interferências que ocorrem durante a operação.”  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">principiosofchaos.org</a> </blockquote><br>  No entanto, em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">discurso na AWS re: Invent 2018</a> sobre engenharia do caos, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adrian Cockcroft</a> , ex-criador da arquitetura em nuvem da Netflix, que ajudou a empresa a mudar totalmente para a infraestrutura em nuvem, introduziu uma definição alternativa de engenharia do caos.  Na minha opinião, é mais preciso e bem estabelecido: <br><br><blockquote>  "A engenharia do caos é um experimento projetado para mitigar as consequências de falhas." </blockquote><br>  De fato, sabemos que as falhas acontecem o tempo todo.  Com a resposta certa, eles não devem afetar os usuários finais.  O principal objetivo da engenharia do caos é detectar problemas que não foram resolvidos adequadamente. <br><br><h2>  Pré-requisitos para criar o caos </h2><br>  Antes de iniciar a engenharia do caos, certifique-se de fazer todo o trabalho necessário para garantir a sustentabilidade em todos os níveis da organização.  Criar sistemas tolerantes a falhas não é apenas um software.  Começa no nível da <b>infraestrutura</b> , estende-se à <b>rede e aos dados</b> , afeta a estrutura dos <b>aplicativos</b> e, finalmente, abrange <b>pessoas e cultura</b> .  No passado, escrevi muito sobre modelos de estabilidade e falhas ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ) e não vou me concentrar nisso agora, mas não posso ficar sem um pequeno lembrete. <br><br><img src="https://habrastorage.org/webt/nb/ee/vm/nbeevmrl7-is1bbf_gp6_yl58w0.png"><br>  <i>Alguns elementos obrigatórios antes de introduzir o caos no sistema (a lista não é completa)</i> <br><br><h2>  Etapas da Engenharia do Caos </h2><br>  É importante entender que a essência da engenharia do caos <b>NÃO</b> é soltar os macacos e destruí-los em sequência, sem nenhum objetivo.  O objetivo desta disciplina é destruir alguns elementos do sistema em um ambiente controlado por meio de experimentos bem planejados para verificar se o seu aplicativo pode suportar condições turbulentas. <br><br>  Para fazer isso, você deve seguir o processo claramente definido e formalizado mostrado na figura abaixo.  Com ele, você pode passar da compreensão do estado estacionário do seu sistema para a formulação de uma hipótese, testando-a e, finalmente, analisando a experiência adquirida durante o experimento e aumentando a estabilidade do próprio sistema. <br><br><img src="https://habrastorage.org/webt/zb/hn/75/zbhn758zl-ucujjyraxolrfufik.png"><br>  <i>Etapas da Engenharia do Caos</i> <br><br><h3>  1. Condição estável </h3><br>  Um dos elementos mais importantes da engenharia do caos é entender o comportamento de um sistema em condições normais. <br><br>  <b>Porque</b>  É simples: após a introdução de falha artificial, você deve garantir que o sistema retorne a um estado estável bem estudado e que o experimento não interfira mais com seu comportamento normal. <br><br>  O ponto principal aqui é que você precisa se concentrar não nos atributos internos do sistema (processador, memória, etc.), mas monitorar os sinais de saída mensuráveis ​​que conectam o desempenho à experiência do usuário.  Para que esses sinais de saída estejam em um estado estável, o comportamento observado do sistema deve ter um padrão previsível, mas sofrer alterações significativas quando ocorrer um mau funcionamento no sistema. <br><br>  Tendo em mente a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">definição de engenharia do caos</a> proposta acima por Adrian Cockcroft, esse estado estável muda quando uma falha fora de controle causa um problema inesperado e sinaliza que o experimento do caos deve ser interrompido. <br><br>  Como exemplo de condições estáveis, citemos a experiência na Amazônia.  A empresa usa o número de pedidos como uma das métricas de uma condição estável e por boas razões.  Em 2007, Greg Linden, que trabalhou anteriormente na Amazon, falou sobre como, como parte de um experimento usando o método de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">teste A / B, ele</a> tentou diminuir o tempo de carregamento de páginas no site em incrementos de 100 ms e descobriu que até pequenos atrasos resultam em a uma queda séria na receita.  Com um aumento no tempo de carregamento de 100 ms, o número de pedidos (e, portanto, de vendas) diminuiu 1%.  É por isso que o número de pedidos é um excelente candidato para métricas estáveis. <br><br>  A Netflix usa uma métrica do lado do servidor associada ao início da reprodução - o número de cliques no botão reproduzir.  Eles notaram uma regularidade no comportamento do indicador SPS (partidas por segundo) e suas flutuações significativas em caso de falhas no sistema.  A métrica é chamada "Pulso da Netflix" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pulso da Netflix</a> ). <br><br>  O número de pedidos no caso da Amazon e Netflix Pulse são excelentes barômetros de estabilidade, pois combinam a experiência do usuário e as métricas operacionais em um único indicador mensurável e altamente previsível. <br><br><h3>  Meça, meça e meça novamente </h3><br>  Não é necessário dizer que, se você não conseguir registrar adequadamente o desempenho do sistema, não poderá monitorar as alterações em um estado estável (ou mesmo detectá-las).  Preste atenção especial à remoção de todos os parâmetros / indicadores da rede, hardware e finalização com o aplicativo e as pessoas.  Desenhe gráficos dessas medidas, mesmo que elas não mudem com o tempo.  Você ficará surpreso ao descobrir correlações que não conhecia. <br><br><blockquote>  "Torne o mais fácil possível para os engenheiros o acesso aos dados que eles podem contar ou traduzir em forma gráfica."  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ian Malpass</a> </blockquote><br><h3>  2. Hipótese </h3><br>  Tendo lidado com um estado estável, podemos prosseguir na formulação de uma hipótese. <br><br><img src="https://habrastorage.org/webt/p-/yw/a0/p-ywa0-dwwea4oemigua1bpd9va.png"><br><br><ul><li>  <i>E se o mecanismo de recomendação parar?</i> </li><li>  <i>E se o balanceador de carga cair?</i> </li><li>  <i>E se o cache cair?</i> </li><li>  <i>E se o atraso aumentar em 300 ms?</i> </li><li>  <i>E se a base principal falhar?</i> </li></ul><br>  Obviamente, apenas uma hipótese deve ser escolhida e não é necessário complicá-la desnecessariamente.  Comece pequeno.  Eu gosto de começar com a hipótese da equipe.  Você já ouviu falar do <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fator ônibus</a></i> ?  O fator de barramento é uma medida de risco associada ao fato de que o conhecimento não é distribuído igualmente entre os membros da equipe.  Permite calcular o número mínimo de participantes, após uma súbita perda do qual o projeto será interrompido devido à falta de conhecimento ou experiência. <br><br>  Muitas empresas têm especialistas técnicos cujo desaparecimento repentino ("atropelado por um ônibus") terá um efeito devastador no projeto e na equipe.  Identifique essas pessoas e conduza experimentos de caos com a participação deles: por exemplo, pegue computadores deles e envie-os para casa por um dia e observe os resultados (geralmente caóticos). <br><br><h3>  Torne o problema comum a todos! </h3><br>  Envolva <b>toda a equipe</b> no desenvolvimento de uma hipótese.  Permita que todos participem do brainstorming: proprietário do produto, gerente técnico, desenvolvedores de back-end e front-end, designers, arquitetos etc.  Todos que estão de uma forma ou de outra conectados ao produto. <br><br>  Antes de tudo, peça a todos que escrevam sua própria resposta à pergunta "E se ...?"  em um pedaço de papel.  Você verá que, na maioria dos casos, todos terão sua própria resposta e entenderá que alguma parte da equipe ainda não pensou em um problema assim. <br><br>  Pare neste momento e discuta por que os membros da equipe têm uma visão diferente do comportamento do produto no caso de "E se ...?".  Volte às suas especificações e certifique-se de que todos entendam corretamente o possível desenvolvimento de eventos. <br><br>  Tomemos, por exemplo, o site de varejo da Amazon mencionado.  E se o serviço Comprar por categoria parar de carregar na página principal? <br><br><img src="https://habrastorage.org/webt/f-/of/9c/f-of9cpyyrannahwk9ugxqls-to.png"><br><br>  Devo retornar um erro 404?  Vale a pena carregar a página, deixando um espaço vazio como na imagem abaixo? <br><br><img src="https://habrastorage.org/webt/ro/_g/n6/ro_gn60gi0zh7zklnx1n50gnrbc.png"><br><br>  Vale a pena sacrificar parte da funcionalidade e, por exemplo, deixar a página expandir e ocultar o erro? <br><br><img src="https://habrastorage.org/webt/pe/4q/hc/pe4qhcavxucjgivsfpaujibieki.png"><br><br>  E isso é apenas no lado da interface do usuário.  O que deve acontecer no back-end?  Os alertas devem ser enviados?  Um serviço com falha deve continuar recebendo solicitações sempre que o usuário carrega a página inicial ou o back-end deve cortá-lo completamente? <br><br>  <b>E o último.</b>  <b>Por favor, não formule uma hipótese, que é sabida antecipadamente que ela partirá lenha!</b>  <b>Faça experiências com partes do sistema que, na sua opinião, são estáveis ​​- em última análise, esse é o objetivo do experimento.</b> <br><br><h3>  3. Projete e execute um experimento </h3><br><ul><li>  Escolha uma hipótese; </li><li>  Defina o escopo do experimento; </li><li>  Definir os indicadores relacionados a serem medidos; </li><li>  Notifique a organização. </li></ul><br>  Hoje, muitas pessoas, assim como o site de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">princípios</a> do caos, estão promovendo a idéia de engenharia do caos na produção.  Embora esse seja o objetivo final, a maioria das organizações tem medo dessa abordagem, portanto você não deve começar com ela. <br><br>  Para mim, a engenharia do caos não é apenas a destruição de vários elementos dos sistemas de produção.  Esta é uma jornada.  Uma jornada ao mundo do conhecimento, indissociável de atividades como a destruição de sistemas em um ambiente controlado - qualquer ambiente, seja um ambiente de desenvolvimento local, beta, estadiamento ou prod.  Destruição através de experimentos bem projetados para criar confiança na capacidade do seu aplicativo de tolerar condições turbulentas.  “ <b>Construir confiança</b> ” é um ponto-chave nesse caso, pois é um precursor das mudanças culturais necessárias para a implementação bem-sucedida da engenharia do caos e a prática de melhorar a confiabilidade da sua empresa. <br><br>  Honestamente, a maioria das equipes aprenderá muito quebrando coisas mesmo em um ambiente de não produção.  Apenas tente fazer com que o <code>docker stop database</code> em seu ambiente local e veja se você consegue lidar com esse problema sem consequências.  Alta probabilidade de que não. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/JlLSz_hJQ1c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Parada de banco de dados - exemplo</i> <br><br>  Comece pequeno e gradualmente construa confiança dentro de sua equipe e organização.  Você será informado de que "o tráfego real de produção é a única maneira de capturar com segurança o comportamento do sistema".  Ouça, sorria e continue fazendo lentamente o que está fazendo.  A pior coisa que você pode fazer é aplicar a engenharia do caos à produção e falhar miseravelmente.  Depois disso, ninguém confiará em você, e você será forçado a esquecer os “macacos do caos” para sempre. <br><br>  Ganhe credibilidade primeiro.  Mostre às organizações e colegas que você sabe o que está fazendo.  Torne-se um bombeiro e aprenda sobre a chama o máximo possível antes de começar a treinar com fogo ativo.  Ganhe credibilidade.  Lembra da <b>história da tartaruga e da lebre</b> ?  A corrida é sempre ganha por uma lenta e paciente. <br><br>  Um dos pontos mais importantes durante o experimento é entender o <b>raio</b> potencial <b>de dano causado</b> pelo mau funcionamento inserido e minimizá-lo.  Faça a si mesmo as seguintes perguntas: <br><br><ul><li>  Quantos clientes serão afetados pelo experimento? </li><li>  Que funcionalidade sofrerá? </li><li>  Quais lugares serão afetados? </li></ul><br>  Pense em um "botão de parada de emergência" ou em uma maneira de encerrar imediatamente um experimento e retornar a um estado estável o mais rápido possível.  Eu gosto de realizar experiências usando o chamado.  Lançamentos "Canárias".  Essa técnica reduz o risco de falha ao iniciar novas versões de um aplicativo em produção, implementando gradualmente as alterações em um pequeno subconjunto de usuários e depois espalhando-as lentamente por toda a infraestrutura e todos os usuários.  Adoro lançamentos de canários simplesmente porque eles satisfazem o princípio de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">infraestrutura fixa</a> , e o experimento em si é bem fácil de parar. <br><br><img src="https://habrastorage.org/webt/33/q0/qv/33q0qvqcmu2dq3ghnn_8uegkmd0.png"><br>  <i>Um exemplo de distribuição de canários baseada em DNS para experimentos de caos</i> <br><br>  Tenha cuidado com experimentos que alteram o estado do aplicativo (cache ou banco de dados) ou aqueles que não podem ser revertidos (facilmente ou em princípio). <br><br>  É curioso que Adrian Cockcroft me disse que um dos motivos pelos quais a Netflix começou a usar os bancos de dados NoSQL foi a falta de esquemas de alterações ou reversões neles, portanto, é muito mais fácil atualizar gradualmente ou corrigir registros individuais com dados (ou seja, eles são mais amigável à engenharia do caos). <br><br><h3>  4. Observe e aprenda </h3><br>  Para aprender algo novo e monitorar o progresso do experimento, você deve poder acompanhar o desempenho do sistema.  Como mencionado anteriormente, preste muita atenção a todos os tipos de métricas e parâmetros!  Quantifique os resultados e sempre - sempre!  - Anote o tempo até os primeiros sinais de um problema aparecerem.  Na minha história, aconteceu várias vezes que os sistemas de aviso se recusaram e o primeiro a relatar o problema aos clientes no Twitter ... acredite, você não vai querer estar nessa situação, então use experimentos de caos para verificar seus sistemas de monitoramento e aviso. <br><br><ul><li>  Hora de descobrir? </li><li>  Hora de alertar e iniciar uma ação ativa? </li><li>  Hora de aviso público? </li><li>  Tempo para perda parcial de funcionalidade? </li><li>  A duração do período de autocura? </li><li>  Tempo para recuperação total ou parcial? </li><li>  Hora de terminar a crise e voltar a um estado estável? </li></ul><br>  Lembre-se de que não há uma causa isolada isolada de falha.  Os acidentes graves são sempre o resultado de várias pequenas falhas que se acumulam e levam a uma crise em larga escala. <br><br>  <b>Faça uma análise post-mortem detalhada para cada experimento!</b> <br><br>  Na AWS, prestamos muita atenção na análise de falhas detectadas e no entendimento das causas que as levaram a evitar problemas semelhantes no futuro.  Todas as conclusões e resultados do experimento estão resumidos em um documento chamado Correção de Erros (COE).  O COE nos permite aprender com nossos erros, sejam falhas de tecnologia, processo ou mesmo organização.  Usamos esse mecanismo para eliminar as causas principais de falhas e desenvolvimento contínuo. <br><br>  A chave para o sucesso nesse processo é a abertura e a transparência em relação ao que deu errado.  Um dos princípios mais importantes ao escrever um bom COE é ser imparcial e evitar mencionar pessoas específicas.  Isso geralmente é difícil em um ambiente que não incentiva esse comportamento e não permite falhas.  A Amazon usa uma coleção de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Princípios</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Liderança</a> para promover esse comportamento - por exemplo, <b>autocrítica, uma abordagem analítica, comprometimento com os mais altos padrões e responsabilidade</b> são componentes essenciais do processo de COE e excelência operacional em geral. <br><br>  O relatório do COE possui cinco seções principais: <br><br><ol><li>  <b>O que aconteceu (ordem cronológica)?</b> </li><li>  <b>Qual foi o impacto nos clientes?</b> </li><li>  <b>Por que o erro aconteceu?</b>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cinco "por quê?"</a> ) </li><li>  <b>O que aprendemos?</b> </li><li>  <b>Como evitar isso no futuro?</b> </li></ol><br>  É mais difícil responder a essas perguntas do que parece à primeira vista, pois você precisa se certificar de que todo momento incompreensível / desconhecido seja cuidadosamente estudado. <br><br>  Para transformar o mecanismo do COE em um processo completo, realizamos constantemente verificações na forma de reuniões semanais com uma análise obrigatória das métricas operacionais.  Além disso, os principais especialistas técnicos conduzem análises de métricas semanais com toda a equipe da AWS. <br><br><h3>  5. Corrija e melhore! </h3><br>  A principal lição aqui é <b>, em primeiro lugar, eliminar os problemas identificados durante as experiências do caos, atribuindo-lhes uma prioridade mais alta do que o desenvolvimento de novas funções</b> .  Envolva a alta gerência nesse processo e apresente a ele que a solução dos problemas atuais é muito mais importante do que o desenvolvimento de novas funcionalidades. <br><br>  Certa vez, com a ajuda de um experimento de caos, ajudei um cliente a identificar problemas críticos de estabilidade, mas devido à pressão do departamento de vendas, a prioridade da correção foi reduzida e todos os esforços foram direcionados para a introdução de uma coisa nova que é "extremamente importante" para os clientes.  Duas semanas depois, um período de inatividade de 16 horas obrigou a empresa a enfrentar os mesmos problemas que identificamos durante o experimento do caos.  Somente as perdas foram muito maiores. <br><br><h2>  Os benefícios da engenharia do caos </h2><br>  Existem muitas vantagens.  Vou destacar dois, na minha opinião, os mais importantes: <br><br>  Em primeiro lugar, a engenharia do caos ajuda a resolver problemas desconhecidos no sistema e corrigi-los antes que levem à falha de produção, digamos, às 3 da manhã de domingo.  Ou seja, <b>aumenta a resistência a colisões e, de fato, a qualidade do sono</b> . <br><br>  Em segundo lugar, experimentos de caos realizados com eficiência sempre causam mudanças mais extensas (principalmente culturais) do que o previsto.  Talvez o mais importante deles seja a evolução natural para uma <b>cultura " <i>não culpada"</i></b> , quando a pergunta "Por que você fez isso?"  se transforma em "Como podemos evitar isso no futuro?".  Como resultado, a equipe se torna mais feliz, mais eficiente, mais interessada e bem-sucedida.  <b>E isso é maravilhoso!</b> <br><br>  Sobre isso, a primeira parte chega ao fim.  Espero que tenham gostado.  Escreva críticas, compartilhe opiniões ou bata palmas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Medium</a> .  Na próxima parte, examinarei ferramentas e técnicas para introduzir falhas no sistema.  Até tchau! <br><br>  Para aqueles que desejam se familiarizar com a segunda parte, ofereço minha apresentação sobre o tópico da engenharia do caos na NDC em Oslo.  Nele, falo sobre muitas das minhas ferramentas favoritas: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/w_Y6C0QgmL0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  PS do tradutor </h2><br>  <s>A segunda parte do artigo em inglês <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">já apareceu</a> e a traduziremos também se percebermos interesse suficiente dos leitores do Habré por esse material - comentários relevantes sobre o artigo são bem-vindos!</s>  <b>ATUALIZADO</b> (3 de setembro): Também é <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">publicada</a> uma tradução da segunda parte. <br><br>  <b>ATUALIZADO</b> (19 de dezembro): a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradução da terceira parte</a> ficou disponível. <br><br>  Leia também em nosso blog: <br><br><ul><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Engenharia do caos: a arte da destruição intencional.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> ” <i>(como a engenharia do caos contribui para mudanças culturais positivas nas organizações)</i> ; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Engenharia do caos: a arte da destruição intencional.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> ” <i>(prática de engenharia do caos com introdução de falhas e ferramentas existentes para isso)</i> ; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como é fornecida a alta disponibilidade no Kubernetes</a> ”; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Monitoramento e Kubernetes (revisão e reportagem em vídeo)</a> ”; </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Experimentos com o kube-proxy e a inacessibilidade do host no Kubernetes</a> .” </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460367/">https://habr.com/ru/post/pt460367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460355/index.html">Salvar o afogamento é o nosso negócio: como lidar com a desmotivação da equipe</a></li>
<li><a href="../pt460359/index.html">Young Game Designer 2 Course: Balanceando Progressão e Dinâmica sem Matemática</a></li>
<li><a href="../pt460361/index.html">Ótimas perguntas frequentes sobre segurança cibernética de sistemas de informações médicas</a></li>
<li><a href="../pt460363/index.html">7 fatores ausentes na abordagem 12 Factor App</a></li>
<li><a href="../pt460365/index.html">Rastreio distribuído: fizemos tudo errado</a></li>
<li><a href="../pt460373/index.html">Páginas sob o capô Turbo: arquitetura da tecnologia de download rápido de páginas da Web</a></li>
<li><a href="../pt460375/index.html">Livro "Aprendizado de máquina para negócios e marketing"</a></li>
<li><a href="../pt460377/index.html">Usando o Liquibase para gerenciar a estrutura do banco de dados em um aplicativo Spring Boot. Parte 1</a></li>
<li><a href="../pt460381/index.html">O que é assertividade e por que é necessário</a></li>
<li><a href="../pt460383/index.html">As transições de tela em Legend of Zelda usam os recursos não documentados do NES</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>