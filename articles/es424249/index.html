<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüåæ üêæ üë®üèæ‚Äçüé® Materiales de la reuni√≥n #RuPostgres - videos, presentaciones, an√°lisis de cuestionarios y reportaje fotogr√°fico üßö üë∏üèª üë≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El 15 de septiembre, se realiz√≥ una reuni√≥n en Avito, donde hablamos sobre el escalado de aplicaciones en PostgreSQL. Hoy quiero compartir materiales ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Materiales de la reuni√≥n #RuPostgres - videos, presentaciones, an√°lisis de cuestionarios y reportaje fotogr√°fico</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/424249/"><p>  El 15 de septiembre, se realiz√≥ una reuni√≥n en Avito, donde hablamos sobre el escalado de aplicaciones en PostgreSQL.  Hoy quiero compartir materiales de √©l: videos, presentaciones de oradores, fotos de espect√°culos.  Adem√°s, debajo del corte, publico una discusi√≥n de las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">preguntas del</a> cuestionario que realizamos aqu√≠ en Habr√©, antes del mitap.  Y hablo sobre mis impresiones de la reuni√≥n. </p><br><p><img src="https://habrastorage.org/webt/tq/w8/ff/tqw8ffbp5stottfooubdrhw_yje.jpeg"></p><a name="habracut"></a><br><h1 id="doklady">  Informes </h1><br><h3 id="raspredelennye-tranzakcii-i-puteshestviya-vo-vremeni-stas-kelvich-postgres-professional">  Transacciones distribuidas y viajes en el tiempo.  Stas Kelvich, profesional de Postgres </h3><br><p>  Stas habl√≥ sobre transacciones distribuidas y viajes en el tiempo. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/DFLEkWi-vRc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n</a> </p><br><p>  Comentarios: </p><br><blockquote>  ¬°Stas y su equipo hicieron un excelente trabajo!  Espero que su decisi√≥n sea aprobada por la comunidad y veremos esta soluci√≥n en la nueva versi√≥n de Postgres. </blockquote><br><h3 id="masshtabirovanie-prilozheniya-na-postgresql-v-avito-tips-and-tricks-konstantin-evteev-avito">  Escalar una aplicaci√≥n en PostgreSQL en Avito: consejos y trucos.  Konstantin Evteev, Avito </h3><br><p>  Hice una presentaci√≥n sobre escalar una aplicaci√≥n en PostgreSQL en Avito y compart√≠ nuestros consejos y trucos. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/78UNk0UfrRg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n</a> </p><br><p>  Comentarios: </p><br><blockquote>  Un enfoque interesante: en el que Kostantin explic√≥ de manera muy interesante e inteligible qu√© problemas puede encontrar al trabajar con datos en una arquitectura de microservicio, y tambi√©n sugiri√≥ soluciones para escalar IP.  Saga es recordada :) </blockquote><br><h3 id="logicheskaya-replikaciya-i-urovni-izolyacii-tranzakciy-postgresql-mihail-tyurin">  Replicaci√≥n l√≥gica y niveles de aislamiento de transacciones PostgreSQL.  Mikhail Tyurin </h3><br><p>  Michael prepar√≥ un informe sobre replicaci√≥n l√≥gica y niveles de aislamiento de transacciones PostgreSQL. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5i07k-uvxXY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n</a> </p><br><p>  Comentarios: </p><br><blockquote>  Michael destac√≥ los momentos sutiles de las transacciones, que est√°n lejos de ser visibles de inmediato, no solo para los principiantes.  Todo el mundo necesita saber sobre esto. </blockquote><br><h3 id="ozo--asinhronnaya-tipobezopasnaya-header-only-biblioteka-klient-postgresql-dlya-c17-sergey-handrikov-yandeks">  OZO es una biblioteca de cliente PostgreSQL as√≠ncrona de tipo seguro con encabezado solo para C ++ 17.  Sergey Handrikov, Yandex </h3><br><p> Sergey le cont√≥ a la audiencia c√≥mo se organiza OZO, la biblioteca de cliente PostgreSQL as√≠ncrona con encabezado seguro solo para C ++ 17, e invitada a contribuir. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/7Kq_sNSuolw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n</a> </p><br><p>  Comentarios: </p><br><blockquote>  El autor, en mi opini√≥n, logr√≥ revelar r√°pidamente los problemas en las bibliotecas existentes y las soluciones en las nuevas bibliotecas de C ++ en poco tiempo.  Por lo tanto, me alegrar√° si estas bibliotecas se desarrollan en c√≥digo abierto, las cosas m√°s b√°sicas ya est√°n implementadas, lo que no puede dejar de alegrarse. </blockquote><br><h1 id="otvety-na-voprosy-viktoriny">  Respuestas a las preguntas del cuestionario. </h1><br><p>  Antes de la reuni√≥n, lo invitamos a responder preguntas sobre Postgres.  Hoy quiero mostrar las respuestas correctas.  Est√°n debajo de los spoilers (por si acaso). </p><br><p>  <strong>Hay una tabla vac√≠a sin registros de usuarios ("UserId" int, "balance" int).</strong>  <strong>¬øQu√© devolver√° como resultado de la consulta?</strong> </p><br><pre><code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> ins <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">users</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> gs, gs * <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> generate_series(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) gs <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> gs%<span class="hljs-number"><span class="hljs-number">2</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">users</span></span>;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">La respuesta</b> <div class="spoiler_text"><p>  Nada </p></div></div><br><p>  <strong>Lo que devolver√° la solicitud</strong> <code>select * from users where UserId = 10;</code>  <strong>al acceder a la tabla de usuarios despu√©s de completar el trabajo anterior?</strong> </p><br><div class="spoiler">  <b class="spoiler_title">La respuesta</b> <div class="spoiler_text"><p>  ERROR: la columna "userid" no existe. </p></div></div><br><p>  <strong>Definido por Enum CREATE TYPE status AS ENUM ('wait', 'init', 'run', 'stop');</strong>  <strong>¬øQu√© comando puede eliminar el valor de 'init'?</strong> </p><br><div class="spoiler">  <b class="spoiler_title">La respuesta</b> <div class="spoiler_text"><p>  No hay una forma est√°ndar de eliminar un valor de enum. </p></div></div><br><p>  <strong>¬øC√≥mo puedo obtener una lista de funciones en PostgreSQL?</strong> </p><br><div class="spoiler">  <b class="spoiler_title">La respuesta</b> <div class="spoiler_text"><p>  seleccione * De pg_proc; </p></div></div><br><p>  <strong>¬øQu√© devolver√° como resultado de la consulta?</strong> </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>::<span class="hljs-type"><span class="hljs-type">smallint</span></span>::<span class="hljs-type"><span class="hljs-type">boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>::<span class="hljs-type"><span class="hljs-type">bigint</span></span> &gt; <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">La respuesta</b> <div class="spoiler_text"><p>  ERROR: no se puede convertir el tipo smallint a boolean. </p></div></div><br><p>  <strong>El desarrollador junior Vasya recibi√≥ instrucciones de escribir una consulta que muestre todas las entradas de la tabla <code>parent</code> para las cuales no hay entradas en la tabla <code>child</code> .</strong> </p><br><p>  <strong>Esquema de datos:</strong> </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> (parent_id <span class="hljs-built_in"><span class="hljs-built_in">serial</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>, payload <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">child</span></span> (child_id <span class="hljs-built_in"><span class="hljs-built_in">serial</span></span> primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>, parent_id <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unique</span></span> <span class="hljs-keyword"><span class="hljs-keyword">references</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> (parent_id));</code> </pre> <br><p>  <strong>Vasya se esforz√≥ mucho y no quiso enfrentar la suciedad, por lo que se le ocurrieron ocho consultas diferentes para resolver el problema:</strong> </p><br><pre> <code class="hljs cs">-- <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> not </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exists</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">where</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id = p.parent_id</span></span></span><span class="hljs-function">)</span></span>; -- <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">not</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">array[p.parent_id] &amp;&amp; array(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c</span></span></span><span class="hljs-function">))</span></span>; -- <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> distinct p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p full </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">join</span></span></span><span class="hljs-function"> child c </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c.parent_id = p.parent_id</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> c.parent_id </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">is</span></span></span><span class="hljs-function"> </span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-literal">null</span></span></span></span>; -- <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.payload <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> parent p <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p.<span class="hljs-function"><span class="hljs-function">parent_id not </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c</span></span></span><span class="hljs-function">)</span></span>; -- <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p left </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">join</span></span></span><span class="hljs-function"> child c </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c.parent_id = p.parent_id</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> c.parent_id </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">is</span></span></span><span class="hljs-function"> </span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-literal">null</span></span></span></span>; -- <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-function"><span class="hljs-function">with w_child_with_parents </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">as</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c.parent_id, ( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count(*</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> c.parent_id</span></span> = p.parent_id) = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> parent_exists <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> child c) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.payload <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> parent p <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p.<span class="hljs-function"><span class="hljs-function">parent_id </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pc.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w_child_with_parents pc </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">where</span></span></span></span><span class="hljs-function"><span class="hljs-params"> not pc.parent_exists</span></span></span><span class="hljs-function">)</span></span>; -- <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.<span class="hljs-function"><span class="hljs-function">payload </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> parent p full </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">join</span></span></span><span class="hljs-function"> child c </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c.parent_id = p.parent_id</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">group</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">by</span></span></span><span class="hljs-function"> p.parent_id, p.payload having </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">)</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; -- <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> p.parent_id, p.payload <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> parent p <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p.<span class="hljs-function"><span class="hljs-function">parent_id </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> p2.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parent p2 except all </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">select</span></span></span></span><span class="hljs-function"><span class="hljs-params"> c2.parent_id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params"> child c2</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p>  <strong>Vasya te present√≥ sus opciones para que pudieras ayudarlo a elegir la mejor.</strong>  <strong>Afirma que todas las consultas funcionan de la misma manera: las tablas se colocan en la memoria y la diferencia en el rendimiento no es significativa (o incluso invisible).</strong>  <strong>Sin embargo, usted, como desarrollador m√°s experimentado, ha notado que quiz√°s no todas las solicitudes resuelven la tarea.</strong>  <strong>Enumere las consultas que no resuelven la tarea (y explique por qu√©).</strong> </p><br><div class="spoiler">  <b class="spoiler_title">Respuesta corta</b> <div class="spoiler_text"><p>  Las tareas 2, 3 y 5 no resuelven este problema (en algunos casos, tambi√©n solicitan 1). </p></div></div><br><div class="spoiler">  <b class="spoiler_title">La respuesta al resultado del experimento.</b> <div class="spoiler_text"><h3 id="testovye-dannye">  Datos de prueba: </h3><br><p>  La "incorrecci√≥n" del comportamiento se manifiesta cuando hay registros en la tabla secundaria con parent_id es nulo. </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> (parent_id, payload) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 1'</span></span>), (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 2'</span></span>), (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 3'</span></span>), (<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 4'</span></span>), (<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'payload 5'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">child</span></span> (child_id, parent_id) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>), (<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>);</code> </pre> <br><h3 id="na-privedennyh-testovyh-dannyh">  En los datos de prueba dados </h3><br><ul><li>  La consulta 1, dependiendo de si la extensi√≥n intarray est√° instalada, puede o no funcionar. </li><li>  La consulta 2 devuelve una cadena adicional (nula, nula). </li><li>  Las consultas 3 y 5 devuelven un conjunto de resultados vac√≠o. </li></ul><br><h3 id="interpretaciya-rezultatov-eksperimenta">  Interpretaci√≥n de resultados experimentales. </h3><br><p>  Solicitud 1: en caso de que la extensi√≥n intarray est√© instalada en la base de datos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.postgresql.org/docs/current/static/intarray.html</a> ), la solicitud se bloquea con el error "ERROR: la matriz no debe contener valores nulos".  Este comportamiento se debe al hecho de que la extensi√≥n anula los operadores est√°ndar y cambia el comportamiento de las matrices que contienen elementos nulos. </p><br><p>  La documentaci√≥n dice lo siguiente: </p><br><blockquote>  Los operadores &amp;&amp;, @&gt; y &lt;@ son equivalentes a los operadores integrados de PostgreSQL con los mismos nombres, excepto que funcionan solo en matrices enteras que no contienen valores nulos, mientras que los operadores integrados funcionan para cualquier tipo de matriz.  Esta restricci√≥n los hace m√°s r√°pidos que los operadores integrados en muchos casos. </blockquote><p>  Solicitud 2: debido a la uni√≥n completa, como resultado aparece una cadena adicional (nula, nula). </p><br><p>  Solicitud 3: devuelve un conjunto de resultados vac√≠o debido al hecho de que el conjunto formado por la subconsulta tiene elementos nulos. </p><br><p>  Documentaci√≥n ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.postgresql.org/docs/current/static/functions-subquery.html#FUNCTIONS-SUBQUERY-NOTIN</a> ): </p><br><blockquote>  Tenga en cuenta que si la expresi√≥n de la izquierda produce un valor nulo, o si no hay valores iguales de la derecha y al menos una fila de la derecha produce un valor nulo, el resultado de la construcci√≥n NOT IN ser√° nulo, no verdadero.  Esto est√° de acuerdo con las reglas normales de SQL para combinaciones booleanas de valores nulos. </blockquote><p>  Consulta 5: devuelve un conjunto de resultados vac√≠o porque se llama a la secci√≥n w_child_with_parents, las tablas child y parent_id est√°n vac√≠as o no se reflejan en absoluto en la secci√≥n. </p></div></div><br><p>  Todas las preguntas del cuestionario fueron respondidas correctamente por tres participantes.  Entregamos uno al premio en la reuni√≥n, dos juegos m√°s de recuerdos fueron enviados por correo. </p><br><p><img src="https://habrastorage.org/webt/jd/3f/20/jd3f207khh7jg6oy9lg0cm_rul8.jpeg"></p><br><h1 id="posleslovie">  Ep√≠logo </h1><br><p>  M√°s de cien personas vinieron a la reuni√≥n.  Fue muy agradable conocer a tal audiencia.  Seg√∫n una encuesta, m√°s del 60% de los hu√©spedes de mitap tienen experiencia trabajando con bases de datos durante m√°s de cinco a√±os.  Y es muy agradable cuando los informes reciben una reacci√≥n tan viva de la audiencia: </p><br><p><img src="https://habrastorage.org/webt/lu/gd/6e/lugd6eme6c-_m6f1vunleyq58ys.jpeg"></p><br><p>  Al margen de las reuniones, se habl√≥ mucho sobre PostgreSQL como una herramienta cada vez m√°s com√∫n.  Realmente lo es  Aprovechar√© esta oportunidad para decir que en Avito planeamos expandir el equipo de DBA, y si est√°s interesado en tareas ambiciosas en un proyecto grande, mira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la vacante en Mi C√≠rculo</a> o escr√≠beme. </p><br><p><img src="https://habrastorage.org/webt/1y/2x/dm/1y2xdm33_9kqv36tu2rdplca27w.jpeg"></p><br><p>  En conclusi√≥n, quiero agradecer a los colegas de Yandex, Postgres Professional y, por supuesto, Avito por los maravillosos informes que escuchamos.  Gracias a los invitados que vinieron a nosotros este s√°bado d√≠a y a los espectadores en vivo.  Y, por supuesto, la comunidad #RuPostgres por su confianza. </p><br><p>  Lista de reproducci√≥n con todos los informes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br>  Publicamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">reportajes fotogr√°ficos en Facebook</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">VKontakte</a> . </p><br><p><img src="https://habrastorage.org/webt/ve/lb/ja/velbjat75n66wq_-rgvbeois4pg.jpeg"></p><br><p>  Hasta pronto! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424249/">https://habr.com/ru/post/es424249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424239/index.html">Seminarios de oto√±o de IBM: Contenedores, Visi√≥n por computadora, Transformaci√≥n digital</a></li>
<li><a href="../es424241/index.html">Imprime tu mundo</a></li>
<li><a href="../es424243/index.html">5 maneras f√°ciles de mejorar la comunicaci√≥n con los clientes</a></li>
<li><a href="../es424245/index.html">Escribir un cliente de Telegram es f√°cil</a></li>
<li><a href="../es424247/index.html">KotlinConf 2018 Live - vea la transmisi√≥n del 4 al 5 de octubre</a></li>
<li><a href="../es424251/index.html">Consideramos estad√≠sticas sobre experimentos en hh.ru</a></li>
<li><a href="../es424255/index.html">C√≥mo usar el an√°lisis est√°tico correctamente</a></li>
<li><a href="../es424257/index.html">Mapas de hex√°gono en Unity: partes 1-3</a></li>
<li><a href="../es424259/index.html">Semana de la seguridad 36: Telnet deber√≠a estar cerrado</a></li>
<li><a href="../es424261/index.html">C√≥mo resolver cualquier problema de programaci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>