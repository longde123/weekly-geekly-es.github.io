<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçß ü§í „äôÔ∏è G√©n√©ration d'ic√¥nes multi-plateformes multi-marques avec Sketch et un script Node.js - Partie # 1 üöá üõ¥ ü§¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR 
 √Ä l'aide d'un script de construction personnalis√© dans Node JS, il est possible de manipuler une s√©rie de fichiers Sketch, puis, √† l'aide d'u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©n√©ration d'ic√¥nes multi-plateformes multi-marques avec Sketch et un script Node.js - Partie # 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/441040/"><img src="https://habrastorage.org/webt/r_/wy/rc/r_wyrcezx76z5i0-1_zuktooxzy.jpeg"><br><br><h4>  TL; DR </h4><br>  √Ä l'aide d'un script de construction personnalis√© dans Node JS, il est possible de manipuler une s√©rie de fichiers Sketch, puis, √† l'aide d'un outil Sketch interne, d'exporter automatiquement leurs actifs, pour g√©n√©rer plusieurs biblioth√®ques d'ic√¥nes, pour plusieurs plates-formes et diff√©rentes marques, qui prennent en charge la dynamique colorisation des actifs via des jetons de conception, et √©galement test AB des actifs via la convention de d√©nomination.  Peasy facile :) <br><hr><br>  Eh bien, en fait, ce n'est pas si simple, mais cela peut certainement √™tre fait.  Ce message est une explication d√©taill√©e de la fa√ßon dont nous l'avons fait et de ce que nous avons d√©couvert en cours de route. <br><br><h2>  Le probl√®me que nous essayions de r√©soudre </h2><br>  Chez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Badoo,</a> nous construisons une application de rencontres.  En fait, plusieurs applications de rencontres.  Pour plusieurs plateformes ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iOS</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Android</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Web mobile, Web de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bureau</a> ), √† travers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plusieurs √©quipes</a> . <br><br>  Nous utilisons des centaines d'ic√¥nes dans nos applications.  Certains d'entre eux sont les m√™mes dans diff√©rentes applications, certains sont tr√®s sp√©cifiques aux marques que les applications refl√®tent.  Les ic√¥nes √©voluent en permanence, en phase avec l'√©volution du design.  Parfois, de nouvelles ic√¥nes sont ajout√©es, tandis que d'autres sont mises √† jour et d'autres encore supprim√©es (bien qu'elles restent souvent dans la base de code). <br><a name="habracut"></a><br>  Notre √©quipe de conception con√ßoit et entretient les ic√¥nes, et jusqu'√† pr√©sent, la seule fa√ßon pour elles de fournir les actifs appropri√©s aux diff√©rentes √©quipes, plates-formes et applications, √©tait de les envoyer par e-mail, chat ou dropbox.  Non seulement cela prend du temps, mais c'est presque toujours sujet aux erreurs.  En fait, nous avons constat√© que des erreurs se produisaient √† chaque fois (nous sommes humains!): Les ic√¥nes seraient mises √† jour sur une plate-forme mais pas sur une autre;  ou les ic√¥nes seraient manquantes ou au format ou √† la taille incorrects.  Donc, il y avait un va-et-vient constant entre les concepteurs et les d√©veloppeurs;  les d√©veloppeurs exportaient les ic√¥nes directement √† partir du fichier Sketch, et les ic√¥nes √©taient ajout√©es √† la base de code, mais sans v√©rifier si des ic√¥nes similaires existaient d√©j√† (et √©taient disponibles pour une r√©utilisation).  Je suis s√ªr que vous savez de quoi je parle. <br><br>  Chez Badoo, nous avons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®me de conception, appel√© Cosmos</a> , et nous avons r√©cemment introduit une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que de jetons de conception</a> sur plusieurs plates-formes (Web mobile, Android et iOS) √† la fois pour notre application principale et ses marques blanches.  Essentiellement, nous sommes maintenant en mesure de communiquer les d√©cisions de conception (comme la bordure d'un bouton, la couleur d'arri√®re-plan d'une page de fonctionnalit√© particuli√®re, la taille de police de l'en-t√™te 1 ou la dur√©e d'une animation pour une fen√™tre contextuelle) √† l'aide de valeurs de conception √©l√©mentaires, tous trait√©s et livr√©s automatiquement √† toutes les applications et √† toutes les plates-formes consommant ces jetons de conception dans leurs applications. <br><br>  La fa√ßon dont nous sommes maintenant en mesure de transformer une id√©e de design, comme par exemple un changement de couleur, en un vrai code en production, en quelques clics et presque jamais, a vraiment impressionn√© les chefs de produit et les designers. <br><br>  Donc, leur prochaine question (et demande) √©tait: pouvez-vous faire quelque chose de similaire pour les actifs?  Et notre r√©ponse a √©t√©: oui, nous le pouvons (probablement)! <br><br>  C'√©tait tout un acte de foi √† l'√©poque, je dois l'admettre.  Nous avions quelques id√©es sur la fa√ßon de le faire, mais nous ne savions pas du tout si c'√©tait techniquement faisable, avec toutes les restrictions que nous appliquons.  Nous avons convenu de commencer avec un projet MVP, mais √† la fin, tout s'√©tait si bien pass√© qu'il est devenu notre produit final, avec toutes les fonctionnalit√©s n√©cessaires. <br><br><h2>  Les exigences </h2><br>  Les exigences du MVP √©taient tr√®s claires: cr√©er un pipeline pouvant prendre un fichier Sketch et exporter toutes les ic√¥nes incluses dans le fichier, dans diff√©rents formats, pour diff√©rentes plates-formes, chaque ic√¥ne pouvant √™tre utilis√©e dans les tests AB. <br><br>  Cela est compliqu√© car, dans nos produits, une ic√¥ne peut avoir de nombreuses couleurs et / ou formes diff√©rentes pour diff√©rentes marques / √©tiquettes blanches (bien que la base de code de l'application soit la m√™me, ainsi que le nom de l'ic√¥ne). <br><br>  Regardez certaines des ic√¥nes utilis√©es dans nos applications et vous remarquerez que certaines sont identiques, certaines sont tr√®s similaires les unes aux autres mais pour quelques d√©tails, tandis que d'autres sont assez diff√©rentes, tant dans leurs formes que dans leurs couleurs: <br><br><img src="https://habrastorage.org/webt/kf/ms/bq/kfmsbqu2vyjyvtbweq5wg5v0gyo.png"><br>  <i>Une comparaison de l'ic√¥ne pour les diff√©rentes marques</i> <br><br>  Maintenant, les couleurs utilis√©es dans les ic√¥nes ne sont pas seulement des couleurs unies, mais correspondent aux couleurs exactes indiqu√©es dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jetons de conception</a> pour cette marque et ses caract√©ristiques sp√©cifiques: <br><br><img src="https://habrastorage.org/webt/n1/hv/f6/n1hvf6nlzo7ixqzlgji79jrn9bc.png"><br>  <i>Comparaison des couleurs entre diff√©rentes marques.</i>  <i>Les valeurs de couleur sont sp√©cifi√©es en tant que jetons de conception.</i> <br><br>  Ainsi, notre objectif avec ce nouveau pipeline d'actifs n'√©tait pas seulement d'automatiser le processus de g√©n√©ration et de livraison des ic√¥nes, pour toutes les diff√©rentes plateformes et marques, mais plut√¥t de pouvoir colorer "dynamiquement" les ic√¥nes en fonction de la marque / blanc -label. <br><br><h2>  Sketch et sketchtool </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sketch</a> est le principal outil de conception utilis√© par notre √©quipe de conception.  M√™me si nous avons envisag√© d'autres options ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Figma</a> , principalement), nous savions que Sketch √©tait le format des fichiers source que nous allions utiliser pour ce projet (simplement parce que c'est l'outil que nos concepteurs ma√Ætrisent le mieux, et c'est le format des fichiers dans lesquels les ic√¥nes / ressources existantes sont utilis√©es, entre autres raisons). <br><br>  Le fait est qu'au d√©but du projet, nous n'√©tions m√™me pas s√ªrs des formats finaux attendus par les plateformes.  Dans notre esprit, le processus allait √™tre assez basique comme celui-ci: exporter les ic√¥nes au format SVG √† partir du fichier Sketch puis consommer les fichiers SVG dans Mobile Web et Android, et pour iOS trouver une biblioth√®que qui peut convertir des SVG en PDF.  Et c'est tout.  C'√©tait le plan lorsque nous avons commenc√©, bien que nous ne sachions pas si cela fonctionnerait, ni √† propos des inconnues inconnues que nous pourrions rencontrer (d'o√π le MVP pour voir si c'√©tait m√™me faisable et, si oui, combien d'efforts cela pourrait impliquer. ) <br><br>  Je ne sais pas si vous avez d√©j√† travaill√© avec des "convertisseurs PDF" mais d'apr√®s mon exp√©rience, ils sont g√©n√©ralement p√©nibles.  Ils font "presque" le travail, mais jamais au 100% dont vous avez vraiment besoin.  Donc, au fond de mon esprit, je sentais que nous empruntions un chemin dangereux. <br><br>  Sketch a une fa√ßon d'exporter des actifs qui est √† peu pr√®s parfaite, je n'ai jamais eu de probl√®me avec √ßa (que ce soit SVG, PDF ou d'autres formats).  Je voulais donc voir s'il y avait d'autres fa√ßons d'interagir avec Sketch, d'utiliser son moteur pour exporter des actifs directement via Sketch, peut-√™tre de mani√®re programmatique (je me demandais √©galement si un plugin personnalis√© pouvait √™tre construit, bien que cela aurait signifi√© beaucoup de travail pour moi, pas seulement parce que je n'ai aucune exp√©rience dans ce domaine!). <br><br>  Je savais qu'en interne, Sketch n'est plus qu'un fichier zip (si vous renommez un fichier <i>.sketch</i> en <i>.zip</i> , double-cliquez pour le d√©compresser et ouvrez le dossier r√©sultant, vous voyez une liste de fichiers JSON et un bitmap utilis√© comme aper√ßu): <br><br><img src="https://habrastorage.org/webt/-b/nj/0d/-bnj0dj_0fsxjlucie9cmvlojjy.png"><br>  <i>Structure interne d'un fichier d'esquisse, une fois non compress√©</i> <br><br>  J'ai donc commenc√© √† explorer les diff√©rents fichiers JSON, en essayant de comprendre les connexions et les d√©pendances entre eux. <br><br>  J'ai r√©alis√© qu'en quelque sorte, malgr√© les fichiers JSON profond√©ment imbriqu√©s (et assez volumineux!), Les relations entre les diff√©rentes entit√©s √† l'int√©rieur de leurs objets ne sont pas trop compliqu√©es: vous avez des pages, des plans de travail et des calques;  √† l'int√©rieur des couches, vous avez les chemins, et vous pouvez avoir des styles partag√©s entre eux;  chacune de ces entit√©s a un ID unique qui est utilis√© pour conserver une r√©f√©rence entre les diff√©rents fichiers;  et tous les objets "page" sont enregistr√©s dans des fichiers JSON, stock√©s dans un sous-dossier appel√© <i>pages</i> , avec l'ID de la page utilis√© comme nom du fichier. <br><br>  Une d√©couverte importante que j'ai faite, au cours de cette exploration, a √©t√© que <b>les noms des calques, des pages et des styles ne sont que des √©tiquettes et peuvent √™tre modifi√©s √† tout moment, sans compromettre le fonctionnement interne du fichier Sketch.</b>  Ce qui compte, c'est l'ID unique qui leur est attribu√©, et cela n'est jamais expos√© √† l'utilisateur final (bien qu'il puisse √™tre lu et r√©f√©renc√© dans les fichiers JSON).  Voici un exemple de l'apparence de l'ID unique d'un style: <br><br><pre><code class="plaintext hljs">{ "_class": "sharedStyle", "do_objectID": "49BA4E98-8D63-435C-81D9-E2F6CDB63136", "name": "name-of/the-style", "value": {     "_class": "style",     "endMarkerType": 0,     "fills": [         {             "_class": "fill",             "isEnabled": true,             "color": {                 "_class": "color",                 "alpha": 1,                 "blue": 0.7176470588235294,                 "green": 0.4627450980392159,                 "red": 0             },             "fillType": 0,             "noiseIndex": 0,             "noiseIntensity": 0,             "patternFillType": 1,             "patternTileScale": 1         }     ],     "miterLimit": 10,     "startMarkerType": 0,     "windingRule": 1 } }</code> </pre> <br>  Cela m'a donn√© une id√©e: que nous pourrions peut-√™tre utiliser des conventions sp√©cifiques sur les noms des plans de travail et des pages, pour d√©clarer une sorte de m√©ta-informations sur les relations entre les diff√©rents actifs, et les utiliser par programme au moment de la construction. <br><br><h2>  Sketchtool </h2><br>  √Ä ce stade, √† la fin des explorations initiales, le plan √©tait pass√© de <i>¬´exportons les ic√¥nes en SVG puis convertissons-les¬ª</i> en <i>¬´construisons un plugin qui, dans Sketch, nous permet d'exporter directement les ic√¥nes dans leur version finale format "</i> .  Mais m√™me alors, le plan √©tait encore tr√®s flou (et la faisabilit√© technique √©tait encore incertaine). <br><br>  C'est pendant que je regardais les plugins existants, en particulier leur code source, pour voir si et comment ils pouvaient interagir avec les API d'exportation Sketch, que je suis tomb√© sur un outil dont je n'avais jamais entendu parler auparavant: Sketchtool. <br><br>  Sketchtool est un outil Sketch officiel (officiel comme dans: d√©velopp√© par Bohemian Coding), qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">selon la documentation</a> : <br><blockquote>  ... est un utilitaire de ligne de commande fourni avec Sketch, qui vous permet d'effectuer certaines op√©rations avec des documents Sketch, comme les inspecter ou exporter des actifs.  Il vous permet √©galement de contr√¥ler Sketch √† partir de la ligne de commande pour effectuer certaines actions (comme ex√©cuter des plugins, par exemple). </blockquote><br>  Accrochez-vous ... un <b>utilitaire de ligne de commande</b> pour effectuer des op√©rations telles que l' <b>exportation d'actifs</b> ?  Juste ce que je cherchais!  De plus, √©tant un outil officiel, il n'y aurait pas de probl√®mes de versions, d'obsolescence, de maintenance, etc. <br><br>  J'ai commenc√© √† l'examiner imm√©diatement et √† lire la documentation, qui progressivement sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une seule page</a> du site Web Sketch (je n'ai trouv√© pratiquement aucune autre ressource ou page √† ce sujet, il est donc compr√©hensible que je n'en ai jamais entendu parler √ßa) <br><br>  Sketchtool est fourni directement avec Sketch, et vous pouvez le trouver dans Sketch √† ce chemin: <code>Sketch.app/Contents/Resources/sketchtool/</code> <br><br>  Lorsque vous le lancez dans votre CLI avec la commande: <br> <code>$ /Applications/Sketch.app/Contents/Resources/sketchtool/bin/sketchtool</code> <br> <br>  c'est la sortie que vous voyez sur votre terminal (je l'ai un peu simplifi√©e): <br><br><pre> <code class="plaintext hljs">Usage: sketchtool &lt;command&gt; [&lt;args&gt;] [--formats=&lt;string&gt;] [--use-id-for-name{=YES|NO}] [--export-page-as-fallback{=YES|NO}] [--serial{=YES|NO}] [--context=&lt;string&gt;] [--application=&lt;path&gt;] [--without-activating{=YES|NO}] [--item=&lt;string&gt;] [--items=&lt;string&gt;] [--safemode{=YES|NO} | --no-safemode | -S {&lt;YES|NO&gt;}] [--max-size=&lt;float&gt; | -m &lt;float&gt;] [--background=&lt;string&gt; | -g &lt;string&gt;] [--compression=&lt;float&gt; | -c &lt;float&gt;] [--new-instance{=YES|NO}] [--reveal{=YES|NO}] [--timeout=&lt;float&gt;] [--include-symbols{=YES|NO}] [--bounds=&lt;rectangle&gt;] [--outputJSON=&lt;path&gt;] [--filename=&lt;string&gt;] [--wait-for-exit{=YES|NO}] [--scales=&lt;path&gt;] [--overwriting{=YES|NO}] [--group-contents-only{=YES|NO}] [--trimmed{=YES|NO}] [--help] [--progressive{=YES|NO}] [--save-for-web{=YES|NO}] [--output=&lt;path&gt;] Commands: dump               Dump out the structure of a document as JSON. export artboards  Export one or more artboards export layers     Export one or more layers export pages      Export an area from one or more pages export preview    Export a preview image for a document export slices     Export one or more slices help              Show this help message. list artboards    List information on the document's artboards. list formats      List the supported export formats. list layers       List information on all of the document's layers. list pages        List information on the document's pages. list slices       List information on the document's slices. metadata          List the metadata for a document. run               Run a command from a plugin, inside Sketch. show              Show the location of the various sketch folders. See 'sketchtool help &lt;command&gt;' for more information on a specific command.</code> </pre> <br><br>  Comme vous pouvez le voir, l'outil a quatre fonctions principales: <b>lire / sauvegarder</b> les m√©tadonn√©es des fichiers internes JSON;  pour <b>lister</b> les entit√©s dans un fichier;  <b>exporter</b> ces entit√©s;  et pour <b>ex√©cuter</b> une commande expos√©e par un plugin.  De plus, chaque commande dispose de nombreuses <b>options</b> .  Dans le cas de la commande d'exportation, presque toutes les options que vous trouvez dans le <b>panneau d'exportation</b> sont √©galement disponibles via la ligne de commande de Sketchtool: <br><br><img src="https://habrastorage.org/webt/cl/nh/it/clnhitk3ewuz1sj6meowk4suons.png"><br>  <i>Panneau "Exporter" dans Sketch, avec les options disponibles</i> <br><br>  Cela signifie que Sketch peut √™tre utilis√© directement comme "moteur" d'exportation via <i>sketchtool</i> , sans avoir besoin de convertisseurs externes (de SVG en PNG ou PDF, par exemple).  Gros probl√®me! <br><br>  Un test rapide utilisant <i>sketchtool</i> et un simple fichier Sketch avec quelques ic√¥nes √† l'int√©rieur, a confirm√© toutes les suppositions initiales: en utilisant simplement cet outil simple, nous pouvons √©viter √† la fois d'utiliser des exportateurs tiers et de construire nos propres exportateurs personnalis√©s: Sketch fait tout! <br><br><h2>  Le ou les fichiers d'esquisse </h2><br>  Une fois que nous avons su que Sketch √©tait l'outil que nous allions utiliser, √† la fois pour stocker et exporter les ic√¥nes, il √©tait temps de collecter les ic√¥nes utilis√©es dans nos applications dans un fichier Sketch. <br><br>  Au d√©part, nous n'avions pr√©vu de travailler qu'avec un ensemble limit√© d'ic√¥nes, celles du projet MVP, mais nous nous sommes vite rendu compte qu'il aurait √©t√© pr√©f√©rable de les collecter toutes en m√™me temps, pour pouvoir d√©tecter imm√©diatement les doublons, les incoh√©rences, les omissions, etc. <br><br>  Nos concepteurs ont fait un travail incroyable et en quelques jours seulement, une grande partie des ressources utilis√©es dans leurs fichiers Sketch a √©t√© collect√©e et organis√©e en un seul fichier.  √Ä ce stade, le fichier Sketch ressemblait √† ceci: <br><br><img src="https://habrastorage.org/webt/h4/pc/ns/h4pcns4_q86k56t8njsfxarz7no.png"><br>  <i>Vue d'ensemble du fichier Sketch contenant les ic√¥nes utilis√©es dans notre application.</i> <br><br>  Dans le fichier, chaque ic√¥ne a son propre plan de travail, nomm√© avec le nom souhait√© de l'ic√¥ne (qui sera ensuite utilis√© par Sketch comme nom de fichier lors de l'exportation des actifs). <br><br>  Tous les chemins sont convertis en contours et les chemins combin√©s (g√©n√©ralement sous forme d' <i>union</i> ou de <i>soustraction</i> ) sont aplatis en une seule forme.  Cela garantit que les actifs g√©n√©r√©s conservent l'apparence visuelle parfaite qu'ils ont dans le fichier source et une compatibilit√© optimale avec les diff√©rentes plates-formes. <br><br><img src="https://habrastorage.org/webt/ja/zt/im/jaztimwxbkymkadbp3gzjc5pwv8.png"><br><br>  <i>Exemple de la fa√ßon dont les ic√¥nes (et leurs calques) sont organis√©es dans le fichier Sketch d'actifs.</i>  <i>Le fond rose clair appliqu√© aux plans de travail cr√©e un contraste visuel avec les zones blanches.</i> <br><br><h2>  Coloration dynamique des ic√¥nes avec des styles partag√©s (et des jetons de conception) </h2><br>  Une fois que nous avons rassembl√© les ic√¥nes, l'√©tape suivante consistait √† leur appliquer les bonnes couleurs.  Ce que nous avons fait, c'est cr√©er un ensemble de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">styles partag√©s</a> pr√©d√©finis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans Sketch</a> , avec des noms qui correspondent √† ceux des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jetons de conception</a> utilis√©s dans notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®me de conception,</a> puis les utiliser pour appliquer des couleurs aux ic√¥nes. <br><br>  Voici comment un style est appliqu√© √† un calque: <br><br><img src="https://habrastorage.org/webt/xv/bd/27/xvbd27jn62ynxnuk77svb2ozsh4.png"><br>  <i>Calque dans Sketch avec un style pr√©d√©fini (couleur de remplissage).</i> <br><br>  Et voici comment les styles sont d√©clar√©s puis appliqu√©s √† un √©l√©ment: <br><br><img src="https://habrastorage.org/webt/av/xq/ks/avxqksf8lmzji7mt_3tv0hi4j4s.png"><br>  <i>Comment nous avons d√©cid√© d'organiser les styles dans Sketch</i> <br><br>  La convention de d√©nomination est tr√®s importante ici.  Les concepteurs peuvent organiser les styles dans n'importe quel sous-dossier, √† condition que le nom du style lui-m√™me corresponde au nom du jeton de conception correspondant pour cette couleur.  C'est le cas, il peut donc √™tre r√©f√©renc√© par programme par le script de construction plus tard. <br><br><h2>  Pages et noms de plan de travail utilis√©s pour les tests AB </h2><br><br>  √Ä ce stade, il √©tait temps de comprendre comment s'assurer que les concepteurs seraient en mesure d'effectuer des tests AB sur les ic√¥nes.  Encore une fois, nous avons finalement d√©cid√© de nous appuyer sur les conventions de nommage (grand fan de KISS ici). <br><br>  Dans ce cas, nous avons utilis√© les <b>noms de page</b> pour d√©tecter quand un ensemble d'ic√¥nes √©tait un test / exp√©rience AB (en utilisant " <b>XP_"</b> comme pr√©fixe) et les <b>noms de plan de travail</b> pour d√©tecter √† quel actif le test AB faisait r√©f√©rence, et ses diff√©rentes variantes ( entre crochets). <br><br><img src="https://habrastorage.org/webt/xs/3c/ww/xs3cwws-nva55cjjxv9xcgrnvok.png"><br>  <i>Comment la convention de d√©nomination sur les pages et les plans de travail est utilis√©e pour "d√©clarer" un test AB.</i>  <i>Remarque: les ic√¥nes ne sont que des exemples cr√©√©s sp√©cialement √† des fins de test, ce ne sont pas de vraies ic√¥nes utilis√©es dans un produit</i> :) <br><br>  Les noms utilis√©s pour les tests et les options ne sont pas des noms g√©n√©riques: ils doivent correspondre aux <i>identifiants de nom unique</i> attribu√©s aux exp√©riences / options dans notre outil interne de partage d'utilisateurs.  De cette fa√ßon, les actifs peuvent ensuite √™tre correctement associ√©s au bon groupe d'utilisateurs de test AB. <br><br><h2>  Plusieurs fichiers pour plusieurs marques </h2><br>  La derni√®re pi√®ce du puzzle √©tait: comment pouvons-nous prendre en charge diff√©rentes formes de la m√™me ic√¥ne, pour diff√©rentes marques? <br><br><img src="https://habrastorage.org/webt/7n/df/uc/7ndfuclyp3csinhkyrp2cufmjq4.png"><br><br>  C'√©tait <b>une exigence tr√®s importante pour les chefs de produit</b> , et nous avions diff√©rentes options √† utiliser.  Au d√©but, nous avons pens√© utiliser diff√©rentes pages dans le m√™me fichier Sketch, avec des noms de page diff√©rents pour chaque marque;  mais nous nous sommes vite rendu compte que cela rendrait beaucoup plus complexe et plus difficile pour les concepteurs de synchroniser les ic√¥nes entre les diff√©rentes marques.  Nous avons donc conclu que la solution consistait √† avoir plusieurs fichiers: un <b>fichier "commun"</b> , o√π nous stockions toutes les ic√¥nes identiques pour les diff√©rentes marques, et <b>des fichiers sp√©cifiques √† la marque</b> pour les ic√¥nes qui <b>rempla√ßaient</b> les ic√¥nes "de base" dans le commun. fichier. <br><br><img src="https://habrastorage.org/webt/vo/sq/sv/vosqsvsu_ozoqve04etypteipku.png"><br><br>  √Ä ce stade, les fichiers Sketch √©taient pr√™ts.  Nous √©tions pr√™ts √† commencer √† √©crire du code. <br><br>  <i>√Ä suivre.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441040/">https://habr.com/ru/post/fr441040/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441028/index.html">Comment les chercheurs d√©couvrent les bases de donn√©es ouvertes MongoDB et Elasticsearch</a></li>
<li><a href="../fr441030/index.html">D√©tection des attaques Web avec un autoencodeur Seq2Seq</a></li>
<li><a href="../fr441032/index.html">KeeBee Cr√©er son propre clavier USB √† partir de z√©ro</a></li>
<li><a href="../fr441034/index.html">6 points de croissance de conversion ou comment augmenter la confiance en utilisant un t√©l√©phone sur le site</a></li>
<li><a href="../fr441036/index.html">Comment donner et recevoir des commentaires si vous √™tes moineau-sociophobus</a></li>
<li><a href="../fr441042/index.html">G√©n√©ration d'ic√¥nes multi-plateformes multi-marques avec Sketch et un script Node.js - Partie # 2</a></li>
<li><a href="../fr441044/index.html">L'histoire de la fa√ßon dont nous avons chang√© l'ic√¥ne PVS-Studio</a></li>
<li><a href="../fr441046/index.html">L'histoire de la fa√ßon dont nous avons chang√© l'ic√¥ne PVS-Studio</a></li>
<li><a href="../fr441048/index.html">Bureau pro agressif</a></li>
<li><a href="../fr441050/index.html">Fabriquer une cam√©ra thermique DIY bas√©e sur un Raspberry Pi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>