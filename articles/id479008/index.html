<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🔧 🆎 ✨ Cara memasak RTSP di situs web Anda pada tahun 2020, atau mengapa babi hutan tidak akan memiliki kesempatan untuk melarikan diri 🥠 👩🏾‍⚖️ 👉🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="RTSP adalah protokol pensinyalan sederhana yang tidak dapat mereka gantikan dengan apa pun selama bertahun-tahun, dan harus diakui bahwa mereka tidak ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara memasak RTSP di situs web Anda pada tahun 2020, atau mengapa babi hutan tidak akan memiliki kesempatan untuk melarikan diri</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flashphoner/blog/479008/"><p><img src="https://habrastorage.org/webt/0o/qj/i7/0oqji7xkok-ssze_oqdnr2kmfcg.jpeg"></p><br><p>  RTSP adalah protokol pensinyalan sederhana yang tidak dapat mereka gantikan dengan apa pun selama bertahun-tahun, dan harus diakui bahwa mereka tidak berusaha sangat keras. </p><br><p>  Misalnya, kami memiliki kamera IP yang mendukung RTSP.  Siapa pun yang pernah menguji lalu lintas dengan kabel Sharkwire akan memberi tahu Anda bahwa pertama-tama ada DESCRIBE, lalu MAIN, lalu lalu lintas mulai dituangkan langsung melalui RTP atau dibungkus dalam saluran TCP misalnya. </p><a name="habracut"></a><br><p>  Skema khas membangun koneksi RTSP terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/webt/yi/i9/kw/yii9kwulxpxxz1dywpppxqdy0ko.png"></p><br><p>  Dapat dibayangkan bahwa dukungan protokol RTSP tidak diperlukan untuk browser dan sebanyak penggunaan roda kelima, oleh karena itu browser tidak terburu-buru untuk mengimplementasikannya dalam skala besar, dan itu hampir tidak akan pernah terjadi.  Di sisi lain, browser dapat membuat koneksi TCP langsung, dan itu akan menyelesaikan tugas, tetapi sekarang ia menghadapi masalah keamanan: apakah Anda pernah melihat browser yang akan memungkinkan skrip untuk menggunakan protokol transport secara langsung? </p><br><p>  Tetapi orang-orang menuntut streaming tersedia di "browser apa pun tanpa menginstal perangkat lunak tambahan", dan para pemula pemula menulis di situs web mereka, "Anda tidak perlu menginstal apa pun, itu akan berfungsi di semua browser di luar kotak", ketika mereka ingin menunjukkan aliran dari kamera IP. </p><br><p>  Pada artikel ini kita akan mengeksplorasi bagaimana ini bisa dicapai.  Dan karena tahun yang akan datang berisi angka bulat, mari kita tambahkan beberapa topik ke artikel kami dan menempelkan label dengan 2020 untuk itu, terutama karena itu benar-benar begitu. </p><br><p>  Jadi, teknologi tampilan video mana yang harus dilupakan pada tahun 2020?  Itu Flash di browser.  Itu sudah mati.  Itu tidak ada lagi, hapus dari daftar. </p><br><h3 id="three-useful-methods">  Tiga metode yang bermanfaat </h3><br><p>  Alat yang memungkinkan Anda menonton streaming video di peramban hari ini adalah: </p><br><ol><li>  WebRTC </li><li>  Hl </li><li>  Websocket + MSE </li></ol><br><h4 id="what-is-wrong-with-webrtc">  Apa yang salah dengan WebRTC </h4><br><p>  Dalam dua kata: ini intensif sumber daya dan rumit. </p><br><p>  Anda akan melambaikannya, "Apa yang Anda maksud dengan sumber daya intensif?", Karena CPU saat ini kuat, memori murah, jadi apa masalahnya?  Yah, pertama-tama, ini adalah enkripsi wajib semua lalu lintas walaupun Anda tidak membutuhkannya.  Kedua, WebRTC adalah koneksi dua arah yang rumit dan pertukaran umpan balik peer-to-peer tentang kualitas saluran (peer-to-server, dalam hal ini): pada setiap saat waktu ada bitrate dihitung, packet loss terdeteksi, keputusan tentang pengalihan mereka diambil, dan sinkronisasi audio-ke-video dihitung sehubungan dengan semua itu, yang disebut lipsync, yang membuat bibir pembicara bertepatan dengan kata-kata mereka.  Semua perhitungan ini, serta lalu lintas masuk di server, mengalokasikan dan membebaskan gigabytes RAM secara real time, dan jika ada yang salah, server 256-gigabyte dengan CPU 48-core akan berputar dengan mudah meskipun semua gigaherz, nanometer, dan DDR 10 di papan. </p><br><p>  Jadi, ini semacam berburu tupai dengan rudal Iskander.  Yang perlu kita singkirkan hanyalah aliran RTSP, lalu tampilkan, dan yang dikatakan WebRTC adalah, "Ya, ayolah, tetapi Anda harus membayarnya." </p><br><h4 id="why-webrtc-is-good">  Mengapa WebRTC bagus </h4><br><p>  Latensi.  Sangat rendah.  Jika Anda siap mengorbankan kinerja dan kompleksitas untuk latensi rendah, WebRTC adalah varian yang paling cocok untuk Anda. </p><br><h4 id="why-hls-is-good">  Mengapa HLS itu baik </h4><br><p>  Dengan dua kata: itu bisa bekerja di mana saja </p><br><p>  HLS adalah off-roader lambat di dunia menampilkan konten langsung.  Ini dapat bekerja di mana saja karena dua hal: transportasi HTTP dan perlindungan Apple.  Memang, protokol HTTP ada di mana-mana, saya bisa merasakan keberadaannya bahkan ketika saya sedang menulis baris-baris ini.  Jadi, di mana pun Anda berada dan tablet kuno apa yang Anda gunakan untuk menjelajahi internet, HLS (HTTP Live Streaming) akan mendatangi Anda dan mengirimkan video ke layar Anda dengan cukup pasti. </p><br><p>  Semuanya cukup baik, tapi ... </p><br><h4 id="why-hls-is-bad">  Mengapa HLS itu buruk </h4><br><p>  Latensi.  Ada, misalnya, proyek pengawasan video situs konstruksi.  Sebuah fasilitas sedang dibangun selama bertahun-tahun, dan selama waktu itu kamera yang buruk merekam video dari lokasi konstruksi siang dan malam, 24/7.  Ini adalah contoh situasi di mana latensi rendah tidak diperlukan. </p><br><p>  Contoh lain adalah babi hutan.  Babi hutan nyata.  Petani Ohio menderita dari serangan babi hutan yang memakan tanaman dan menginjak-injaknya seperti belalang, karena itu menimbulkan ancaman bagi kesejahteraan keuangan pertanian.  Para startupper yang giat telah meluncurkan sistem pengawasan video dari kamera RTSP yang memantau lapangan secara real time dan memicu jebakan ketika para penyusup menyerang.  Dalam hal ini latensi rendah sangat penting, dan jika HLS digunakan (dengan latensi 15 detik), babi hutan akan lari sebelum perangkap diaktifkan. </p><br><p><img src="https://habrastorage.org/webt/g4/ha/iw/g4haiwkwu7jqrhh65c804phjt-q.jpeg"></p><br><p>  Berikut ini satu contoh lagi: presentasi video di mana seseorang mendemonstrasikan suatu produk kepada Anda dan mengharapkan respons yang cepat.  Dalam hal latensi tinggi, mereka akan menunjukkan produk kepada Anda di kamera, kemudian bertanya, "Jadi, bagaimana Anda menyukainya?", Dan itu akan mencapai Anda hanya dalam 15 detik.  Dalam 15 detik, sinyal dapat melakukan perjalanan ke Bulan dan kembali 12 kali.  Tidak, kami tidak ingin latensi seperti itu.  Ini lebih seperti video pra-rekam daripada Live.  Tetapi video yang sudah direkam sebelumnya, karena beginilah cara HLS bekerja: ia merekam sebagian video pada disk atau ke memori server, dan pemain mengunduh bagian yang direkam.  Ini adalah cara kerja HTTP Live yang bukan Live sama sekali. </p><br><p>  Mengapa itu terjadi?  Kehadiran global protokol HTTP dan kesederhanaannya menghasilkan kelesuan karena HTTP pada awalnya tidak dimaksudkan untuk mengunduh dan menampilkan ribuan fragmen video besar (segmen HLS) dengan cepat.  Mereka tentu saja diunduh dan dimainkan dengan kualitas tinggi, tetapi sangat lambat: dibutuhkan 15 detik atau lebih bagi mereka untuk diunduh, disangga, dan diterjemahkan. </p><br><p>  Harus dicatat di sini bahwa Apple mengumumkan HLS Low Latency pada musim gugur 2019, tetapi itu sudah cerita yang berbeda.  Mari kita lihat hasil mereka lebih rinci nanti.  Dan sekarang kami juga memiliki MSE dalam stok. </p><br><h4 id="why-mse-is-good">  Mengapa MSE itu baik? </h4><br><p>  Media Source Extension adalah dukungan asli untuk memutar video paket di browser.  Ini bisa disebut pemain asli untuk H.264 dan AAC, yang Anda dapat memberi makan segmen video, dan yang tidak terikat dengan protokol transport, tidak seperti HLS.  Untuk alasan ini, Anda dapat memilih transportasi melalui protokol Websockets.  Dengan kata lain, segmen tidak akan diunduh menggunakan teknologi Request-Response (HTTP) kuno lagi tetapi mengalir dengan cepat melalui koneksi Websockets yang hampir merupakan saluran TCP langsung.  Ini sangat membantu dalam hal mengurangi penundaan yang dapat menjadi serendah 3-5 detik.  Latensi seperti itu tidak fantastis tetapi cocok untuk sebagian besar proyek yang tidak memerlukan waktu nyata yang sulit.  Kompleksitas dan intensitas sumber daya juga relatif rendah karena saluran TCP dibuka, dan segmen HLS yang hampir sama menuangkannya, yang dikumpulkan oleh pemain dan dikirim untuk dimainkan. </p><br><h4 id="why-mse-is-bad">  Mengapa MSE itu buruk </h4><br><p>  Itu tidak bisa bekerja di mana-mana.  Sama seperti dengan WebRTC, penetrasi ke browser lebih rendah.  iPhone (iOS) memiliki sejarah kegagalan yang luar biasa untuk memainkan MSE, yang membuat MSE hampir tidak cocok sebagai satu-satunya solusi untuk startup. <br>  Ini sepenuhnya tersedia di browser berikut: Edge, Firefox, Chrome, Safari, Browser Android, Opera Mobile, Chrome untuk Android, Firefox untuk Android, UC Browser untuk Android. </p><br><p><img src="https://habrastorage.org/webt/xt/oq/wn/xtoqwnjdoosqb6fhopu9rvoxsxy.png"></p><br><p>  Dukungan terbatas untuk MSE muncul di iOS Safari beberapa waktu yang lalu, dimulai dengan iOS 13. </p><br><p><img src="https://habrastorage.org/webt/fl/wd/-n/flwd-nksnux1tlprjriupeajyvm.png"></p><br><h3 id="rtsp-leg">  Kaki RTSP </h3><br><p>  Kami telah membahas pengiriman di server video&gt; arah browser.  Selain itu, Anda juga membutuhkan dua hal ini: </p><br><p>  1) Untuk mengirimkan video Anda dari kamera IP ke server. <br>  2) Untuk mengkonversi video menjadi salah satu format / protokol yang dijelaskan di atas. </p><br><p>  Di sinilah sisi server masuk. </p><br><p>  Ta-dah ... Bertemu <a href="https://flashphoner.com/">Web Call Server 5</a> (atau sekadar WCS untuk teman).  Seseorang harus menerima lalu lintas RTSP, meng-de-paketkan video dengan benar, mengubahnya menjadi WebRTC, HLS atau MSE, lebih disukai tanpa terlalu dikompresi oleh transcoder, dan mengirimkannya ke browser dalam bentuk yang rapi, tidak rusak dengan artefak dan membeku. </p><br><p>  Tugasnya tidak rumit pada pandangan pertama, tetapi mungkin ada begitu banyak jebakan tersembunyi, kamera Cina, dan nuansa konversi yang ada di belakangnya sehingga benar-benar mengerikan.  Sebenarnya tidak mungkin tanpa peretasan, tetapi ini berfungsi, dan berfungsi dengan baik.  Dalam produksi. </p><br><h4 id="the-delivery-scheme">  Skema pengiriman </h4><br><p>  Sebagai hasilnya, skema lengkap pengiriman konten RTSP dengan konversi pada server perantara mulai terbentuk. </p><br><p><img src="https://habrastorage.org/webt/jm/7e/oj/jm7eojlfeztudqtrwzjebgu4t9e.png"></p><br><p>  Salah satu pertanyaan yang paling sering diajukan dari rekan-rekan India kami adalah, “Apakah mungkin?  Secara langsung, tanpa server? ".  Tidak, tidak;  Anda akan memerlukan sisi server yang akan melakukan pekerjaan.  Di cloud, di perangkat keras, di corei7 di balkon Anda, tetapi Anda tidak bisa melakukannya tanpanya. </p><br><h4 id="lets-get-back-to-our-year-2020">  Mari kita kembali ke tahun 2020 kita </h4><br><p>  Jadi, inilah resep untuk memasak RTSP di browser Anda: </p><br><ol><li>  <a href="">Ambil WCS baru (Server Panggilan Web)</a> . </li><li>  Tambahkan WebRTC, HLS atau MSE secukupnya. </li><li><p>  Sajikan di halaman web. </p><br><p>  Nikmati makananmu! </p><br></li></ol><br><h3 id="no-this-isnt-all-yet">  Tidak, ini belum semuanya. </h3><br><p>  Neuron yang bertanya pasti ingin menanyakan pertanyaan ini, "Bagaimana?  Sungguh, <a href="https://flashphoner.com/embedding-html5-rtsp-player-into-a-web-page/">bagaimana ini bisa dilakukan</a> ?  Seperti apa nantinya di browser? ” </p><br><p>  Kami ingin menyampaikan kepada Anda pemutar WebRTC minimalis yang dirakit sebagai upaya meja dapur. </p><br><p>  1) Hubungkan skrip API utama flashphoner.js dan skrip my_player.js, yang akan kita buat sedikit kemudian, ke halaman web. </p><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../../../../flashphoner.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">my_player.js</span></span></span><span class="hljs-tag">"&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  2) Inisialisasi API di badan halaman web </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"init_api()"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  3) Tambahkan div, yang akan berfungsi sebagai wadah untuk video, ke halaman.  Tetapkan ukuran dan batas untuk itu. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myVideo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width:320px;height:240px;border: solid 1px"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  4) Tambahkan tombol Play, klik yang akan menginisialisasi koneksi ke server dan mulai memutar video </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"connect()"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PLAY"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br><p>  5) Sekarang mari kita buat skrip my_player.js yang akan berisi kode utama pemain kami.  Jelaskan konstanta dan variabel </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> SESSION_STATUS = Flashphoner.constants.SESSION_STATUS; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> STREAM_STATUS = Flashphoner.constants.STREAM_STATUS; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> session;</code> </pre> <br><p>  6) Inisialisasi API ketika halaman HTML dimuat </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_api</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"init api"</span></span>); Flashphoner.init({ }); }</code> </pre> <br><p>  7) Hubungkan ke server WCS melalui WebSocket.  Agar semuanya berfungsi dengan benar, ganti "wss: //demo.flashphoner.com" dengan alamat WCS Anda </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ session = Flashphoner.createSession({<span class="hljs-attr"><span class="hljs-attr">urlServer</span></span>: <span class="hljs-string"><span class="hljs-string">"wss://demo.flashphoner.com"</span></span>}).on(SESSION_STATUS.ESTABLISHED, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">session</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"connection established"</span></span>); playStream(session); }); }</code> </pre> <br><p>  8) Setelah itu, kirimkan dua parameter berikut, "nama" dan "tampilan", di mana "nama" adalah URL RTSP dari aliran yang sedang diputar, dan "tampilan" adalah elemen dari myVideo di mana pemain kami akan dipasang.  Tetapkan URL aliran Anda di sini juga, bukan milik kami. </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playStream</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> options = {<span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">"rtsp://b1.dnsdojo.com:1935/live/sys2.stream"</span></span>,<span class="hljs-attr"><span class="hljs-attr">display</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"myVideo"</span></span>)}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stream = session.createStream(options).on(STREAM_STATUS.PLAYING, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stream</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"playing"</span></span>); }); stream.play(); }</code> </pre> <br><p>  Simpan file dan coba luncurkan pemain.  Apakah streaming RTSP Anda diputar? </p><br><p>  Ketika kami <a href="https://flashphoner.com/testing-rtsp-html5-player/">mengujinya</a> , yang ini dimainkan: rtsp: //b1.dnsdojo.com: 1935 / live / sys2.stream. </p><br><p>  Dan seperti inilah tampilannya: </p><br><p>  Pemain sebelum tombol Play diklik </p><br><p><img src="https://habrastorage.org/webt/pe/ej/6n/peej6nfw2lthkmmnsrypojl6bzq.png"></p><br><p>  Pemain dengan video diluncurkan </p><br><p><img src="https://habrastorage.org/webt/w3/h8/yo/w3h8yozn6madl2tolxx_xg3yljs.png"></p><br><p>  Tidak ada banyak kode sama sekali: </p><br><p>  HTML </p><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../../../../flashphoner.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">my_player.js</span></span></span><span class="hljs-tag">"&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"init_api()"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myVideo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width:320px;height:240px;border: solid 1px"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"connect()"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PLAY"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Javascript </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//Status constants var SESSION_STATUS = Flashphoner.constants.SESSION_STATUS; var STREAM_STATUS = Flashphoner.constants.STREAM_STATUS; //Websocket session var session; //Init Flashphoner API on page load function init_api() { console.log("init api"); Flashphoner.init({ }); } //Connect to WCS server over websockets function connect() { session = Flashphoner.createSession({urlServer: "wss://demo.flashphoner.com"}).on(SESSION_STATUS.ESTABLISHED, function(session){ console.log("connection established"); playStream(session); }); } //Playing stream with given name and mount the stream into myVideo div element function playStream() { var options = {"rtsp://b1.dnsdojo.com:1935/live/sys2.stream",display:document.getElementById("myVideo")}; var stream = session.createStream(options).on(STREAM_STATUS.PLAYING, function(stream) { console.log("playing"); }); stream.play(); }</span></span></code> </pre> <br><p>  demo.flashphoner.com digunakan sebagai sisi server.  Kode lengkap dari contoh tersedia di bawah ini, di bagian bawah halaman yang berisi tautan. <br>  Selamat menikmati streaming! </p><br><h3 id="links">  Tautan </h3><br><p>  <a href="https://github.com/flashphoner/flashphoner_client/tree/wcs_api-2.0/examples/demo/streaming/player">Kode pemain di github</a> </p><br><p>  <a href="https://flashphoner.com/ip-camera-streaming-via-rtsp-for-webrtc-and-websocket-browsers/">Integrasi pemain RTSP ke halaman web atau aplikasi seluler</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479008/">https://habr.com/ru/post/id479008/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id478998/index.html">Mengapa kita selalu ingin melihat rasio emas? Mencoba (tidak berhasil) analisis evolusioner menggunakan jaringan saraf C ++</a></li>
<li><a href="../id479000/index.html">Paralel Magang Ketika Anda Berusia 14 Tahun</a></li>
<li><a href="../id479002/index.html">Gamifikasi proses bisnis. Bagaimana cara kerjanya?</a></li>
<li><a href="../id479004/index.html">Apakah mungkin melindungi diri dari perekrut yang mengganggu?</a></li>
<li><a href="../id479006/index.html">The Chronicles of Book Hunger II</a></li>
<li><a href="../id479012/index.html">SviMik: "Ada dua pendapat yang bertentangan tentang ini di OSM"</a></li>
<li><a href="../id479016/index.html">5 langkah untuk melindungi rahasia dagang</a></li>
<li><a href="../id479018/index.html">Docker untuk front-end. Bagian 2. Apa kamu?</a></li>
<li><a href="../id479020/index.html">Kisah bagaimana Google Play mencoret sepuluh tahun pekerjaan saya dalam satu jam</a></li>
<li><a href="../id479022/index.html">Smart TV Samsung, LG, Vizio dan TCL setiap detik mengambil "sidik jari" layar dan mengirim ke server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>