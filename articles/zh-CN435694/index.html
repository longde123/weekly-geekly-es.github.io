<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ’ ğŸ–Šï¸ ğŸ“ æˆ‘ä»¬å¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆä¼˜åŒ–äº†ç”¨äºæ¸…ç†Linuxå†…æ ¸ä¸­SLABç¼“å­˜çš„ç®—æ³• ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦ ğŸ‘†ğŸ½ ğŸ—»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å®¹å™¨çš„æ—¥ç›Šæ™®åŠåŠå…¶ä¸æ§åˆ¶ç»„çš„ç»“åˆä½¿ç”¨æ˜¾ç¤ºå‡ºä¸¥é‡çš„å¯ä¼¸ç¼©æ€§é—®é¢˜ï¼Œè¿™å¯¼è‡´å¤§å‹è®¡ç®—æœºçš„æ€§èƒ½æ˜¾ç€ä¸‹é™ã€‚ é—®é¢˜åœ¨äºï¼ŒSLABé«˜é€Ÿç¼“å­˜çš„æ—è·¯æ—¶é—´äºŒæ¬¡å–å†³äºå®¹å™¨çš„æ•°é‡ï¼Œå¹¶ä¸”åœ¨çŸ­æ—¶é—´å†…å¤§é‡æ¶ˆè€—å†…å­˜çš„æ´»åŠ¨ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ç¹å¿™çš„å¾ªç¯ï¼Œä»è€Œæ¶ˆè€—100ï¼…çš„å¤„ç†å™¨æ—¶é—´ã€‚ ä»Šå¤©ï¼Œæˆ‘æƒ³å‘Šè¯‰æ‚¨ï¼Œæˆ‘ä»¬å¦‚ä½•é€šè¿‡æ›´æ”¹ä½¿ç”¨memcgæ§åˆ¶ç»„çš„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬å¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆä¼˜åŒ–äº†ç”¨äºæ¸…ç†Linuxå†…æ ¸ä¸­SLABç¼“å­˜çš„ç®—æ³•</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/virtuozzo/blog/435694/"> å®¹å™¨çš„æ—¥ç›Šæ™®åŠåŠå…¶ä¸æ§åˆ¶ç»„çš„ç»“åˆä½¿ç”¨æ˜¾ç¤ºå‡ºä¸¥é‡çš„å¯ä¼¸ç¼©æ€§é—®é¢˜ï¼Œè¿™å¯¼è‡´å¤§å‹è®¡ç®—æœºçš„æ€§èƒ½æ˜¾ç€ä¸‹é™ã€‚ é—®é¢˜åœ¨äºï¼ŒSLABé«˜é€Ÿç¼“å­˜çš„æ—è·¯æ—¶é—´äºŒæ¬¡å–å†³äºå®¹å™¨çš„æ•°é‡ï¼Œå¹¶ä¸”åœ¨çŸ­æ—¶é—´å†…å¤§é‡æ¶ˆè€—å†…å­˜çš„æ´»åŠ¨ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ç¹å¿™çš„å¾ªç¯ï¼Œä»è€Œæ¶ˆè€—100ï¼…çš„å¤„ç†å™¨æ—¶é—´ã€‚ ä»Šå¤©ï¼Œæˆ‘æƒ³å‘Šè¯‰æ‚¨ï¼Œæˆ‘ä»¬å¦‚ä½•é€šè¿‡æ›´æ”¹ä½¿ç”¨memcgæ§åˆ¶ç»„çš„è®¡è´¹ç®—æ³•æ¥ä½¿ç”¨SLABç¼“å­˜å¯¹è±¡å¹¶ä¼˜åŒ–shrink_slabï¼ˆï¼‰å‡½æ•°æ¥è§£å†³æ­¤é—®é¢˜ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99b/7f3/83b/99b7f383beadeec2c814a6792e507b6c.jpg" alt="è®°å¿†æ¸…ç†"><br><a name="habracut"></a><br> ä¸ºä»€ä¹ˆä¼šå‡ºç°å†…æ ¸ä¸­çš„è¿›ç¨‹ä¼˜åŒ–é—®é¢˜ï¼Ÿ ä¸€åˆ‡å§‹äºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šæˆ‘ä»¬çš„ä¸€ä½å®¢æˆ·ç§¯æä½¿ç”¨å®¹å™¨å’Œå†…å­˜æ§åˆ¶ç»„ï¼ˆmemcgï¼‰ï¼Œå¼•èµ·äº†äººä»¬å¯¹ä¸æ—¶å‡ºç°çš„å¤„ç†å™¨èµ„æºæ¶ˆè€—é«˜å³°çš„å…³æ³¨ã€‚ æ­£å¸¸çš„ç³»ç»Ÿè´Ÿè½½çº¦ä¸º50ï¼…ï¼Œåœ¨é«˜å³°æ—¶é—´å ç”¨äº†100ï¼…çš„å¤„ç†å™¨æ—¶é—´ï¼Œå‡ ä¹æ‰€æœ‰çš„è´Ÿè½½éƒ½è¢«å†…æ ¸æ¶ˆè€—äº†ï¼ˆç³»ç»Ÿæ—¶é—´ï¼‰ã€‚ <br> è¯¥èŠ‚ç‚¹æœ¬èº«æ˜¯å¤šç”¨æˆ·çš„ï¼Œå¹¶åœ¨å…¶ä¸Šå¯åŠ¨äº†å¤§çº¦200ä¸ªOpenVZå®¹å™¨ã€‚ åˆ†æè¡¨æ˜ï¼Œå¤§é‡ç”¨æˆ·åˆ›å»ºäº†åµŒå¥—çš„Dockerå®¹å™¨å’Œå†…å­˜æ§åˆ¶ç»„çš„å¤šçº§å±‚æ¬¡ç»“æ„ã€‚ æ¯ä¸ªç”¨æˆ·çº§åˆ«çš„é¡¶çº§å®¹å™¨åŒ…å«å¤§çº¦20ä¸ªå®‰è£…ç‚¹å’Œsystemdåˆ›å»ºçš„20ä¸ªæ§åˆ¶å†…å­˜ç»„ï¼ˆmemcgï¼‰ã€‚ æ­¤å¤–ï¼Œä¸Šè¿°Dockerè¿˜åˆ›å»ºäº†æŒ‚è½½ç‚¹å’Œæ§åˆ¶ç»„ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œè¯¥èŠ‚ç‚¹çš„è´Ÿè½½å¾ˆé‡ï¼Œå¹¶ä¸”å…¶è´Ÿè½½è¦æ¯”æˆ‘ä»¬æ‰€æœ‰å…¶ä»–å®¢æˆ·çš„å¹³å‡è´Ÿè½½å¼ºå¾—å¤šã€‚ æˆ‘ä»¬æœ‰å…´è¶£æ‰¾å‡ºå‡ºç°è¿™äº›å³°å€¼çš„åŸå› ï¼Œå› ä¸ºåœ¨ä¸é‚£ä¹ˆå¿™ç¢Œçš„æœºå™¨ä¸Šä¹Ÿå¯èƒ½å‡ºç°ç›¸åŒçš„é—®é¢˜ï¼Œè€Œè¿™åœ¨æœºå™¨ä¸Šå‡ ä¹ä¸æ˜æ˜¾ï¼ˆä¾‹å¦‚ï¼Œåœ¨5ï¼…çš„ç³»ç»Ÿæ—¶é—´æä¾›å³°å€¼ï¼Œè¿™ä¼šé™ä½æ€§èƒ½ï¼‰ã€‚ <br><br> é€šè¿‡æ“çºµæ€§èƒ½ï¼Œæˆ‘è®¾æ³•èµ¶ä¸Šäº†é¡¶å³°å¹¶æ¶ˆé™¤äº†è¶³è¿¹ã€‚ äº‹å®è¯æ˜ï¼Œå¤„ç†å™¨çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½ç”¨äºæ¸…é™¤SLABç¼“å­˜ï¼Œå³è¶…çº§å—ç¼“å­˜ï¼š <br><br><pre><code class="markdown hljs"><span class="hljs-bullet"><span class="hljs-bullet">- </span></span>100,00% 0,00% kswapd0 [kernel.vmlinux] [k] kthread - 99,31% balance<span class="hljs-emphasis"><span class="hljs-emphasis">_pgdat - 82,11% shrink_</span></span>zone - 61,69% shrink<span class="hljs-emphasis"><span class="hljs-emphasis">_slab - 58,29% super_</span></span>cache<span class="hljs-emphasis"><span class="hljs-emphasis">_count + 54,56% list_</span></span>lru<span class="hljs-emphasis"><span class="hljs-emphasis">_count_</span></span>one</code> </pre> <br><br> åœ¨è¿™é‡Œæœ‰å¿…è¦å¯¹æ­¤é—®é¢˜è¿›è¡Œè§£é‡Šå’Œè¯¦ç»†ä»‹ç»ã€‚ æ¯ä¸ªäººéƒ½çŸ¥é“å†…æ ¸ä¼šåœ¨æœ€ç»ˆé‡Šæ”¾å†…å­˜ä¹‹å‰å…ˆç¼“å­˜ä¸€æ®µæ—¶é—´ã€‚ å†…æ ¸å……åˆ†åˆ©ç”¨äº†è¿™ä¸€åŸç†ã€‚ ä¾‹å¦‚ï¼Œé¡µé¢ç¼“å­˜åŒ…å«ä¸æ–‡ä»¶ç›¸å…³çš„æ•°æ®é¡µé¢ï¼Œè¿™åœ¨è¯»å–æ—¶æå¤§åœ°åŠ å¿«äº†å¯¹å…¶çš„é‡å¤è®¿é—®ï¼ˆå› ä¸ºæ‚¨æ— éœ€å†æ¬¡è®¿é—®ç£ç›˜ï¼‰ã€‚ åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œé—®é¢˜å‡ºç°åœ¨ä¸¤ä¸ªLRUåˆ—è¡¨ï¼ˆs_dentry_lruå’Œs_inode_lruï¼‰ä¸­åŒ…å«çš„è¶…çº§å—å…ƒæ•°æ®ç¼“å­˜ä¸­ã€‚ <br><br>  <b>LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰</b> <b><br></b> <br>  struct lru_listæŒ‡å‘ä¸€ä¸ªé“¾æ¥åˆ—è¡¨æ•°ç»„ï¼Œæ¯ä¸ªæ´»åŠ¨çš„memcgå¯¹åº”äºæ­¤æ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆlist_lru_oneï¼‰ã€‚ å½“æŸä¸ªå†…æ ¸ä¸å†ä½¿ç”¨æŸä¸ªSLABå¯¹è±¡æ—¶ï¼Œå†…æ ¸ä¼šå°†å…¶æ·»åŠ åˆ°æ•°ç»„çš„é“¾è¡¨ä¹‹ä¸€ï¼ˆå–å†³äºè¯¥å¯¹è±¡æ‰€å±çš„memcgï¼Œæˆ–å¤§è‡´æ¥è¯´ï¼Œå–å†³äºåˆ›å»ºè¯¥å¯¹è±¡æ—¶ä½¿ç”¨çš„è¿›ç¨‹å±äºå“ªä¸ªmemcgï¼‰ã€‚ æ•°ç»„æœ¬èº«æè¿°å¦‚ä¸‹ï¼ˆlru_list ::èŠ‚ç‚¹:: memcg_lrusï¼‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru_memcg</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rcu_head</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rcu</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* array of per cgroup lists, indexed by memcg_cache_id */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru_one</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lru</span></span></span><span class="hljs-class">[0];</span></span> <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru_one</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_head</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* may become negative during memcg reparenting */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> nr_items; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> };</code> </pre><br>  lru [0]è¡¨ç¤ºä¸IDä¸º0çš„memcgç›¸å…³çš„å¯¹è±¡åˆ—è¡¨ï¼› <br>  lru [1]è¡¨ç¤ºä¸IDä¸º1çš„memcgç›¸å…³çš„å¯¹è±¡åˆ—è¡¨ï¼› <br>  ... <br>  lru [n]è¡¨ç¤ºä¸IDä¸ºnçš„memcgç›¸å…³çš„å¯¹è±¡åˆ—è¡¨ï¼› <br><br>  LRUåˆ—è¡¨s_dentry_lruå’Œs_inode_lruå‡ºç°åœ¨æˆ‘ä»¬çš„é—®é¢˜ä¸­ï¼Œå¹¶ä¸”é¡¾åæ€ä¹‰ï¼Œå®ƒä»¬åŒ…å«æœªä½¿ç”¨çš„dentryå’Œinodeæ–‡ä»¶ç³»ç»Ÿå¯¹è±¡ã€‚ <br> å°†æ¥ï¼Œå¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æˆ–ç‰¹å®šçš„memcgï¼Œåˆ™æœ€ç»ˆå°†é‡Šæ”¾æŸäº›åˆ—è¡¨é¡¹ï¼Œå¹¶ä½¿ç”¨ç§°ä¸ºæ”¶ç¼©å™¨çš„ç‰¹æ®Šæœºåˆ¶æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ <br><br>  <b>æ”¶ç¼©æœº</b> <b><br></b> <br> å½“å†…æ ¸éœ€è¦åˆ†é…å†…å­˜é¡µé¢ï¼Œä½†NUMAèŠ‚ç‚¹æˆ–ç³»ç»Ÿä¸Šæ²¡æœ‰å¯ç”¨å†…å­˜æ—¶ï¼Œä¾¿å¼€å§‹äº†æ¸…ç†å®ƒçš„æœºåˆ¶ã€‚ ä»–æ­£è¯•å›¾æŠ›å‡ºæˆ–ä¸¢å¼ƒä¸€å®šæ•°é‡çš„ç£ç›˜ï¼š1ï¼‰é¡µé¢ç¼“å­˜ä¸­æ–‡ä»¶å†…å®¹çš„é¡µé¢ï¼›  2ï¼‰ä¸äº¤æ¢ä¸­çš„åŒ¿åå†…å­˜ç›¸å…³çš„é¡µé¢ï¼Œä»¥åŠ3ï¼‰ç¼“å­˜çš„SLABå¯¹è±¡ï¼ˆæˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ä¸å®ƒä»¬æœ‰å…³ï¼‰ã€‚ <br><br> ä¸¢å¼ƒéƒ¨åˆ†ç¼“å­˜çš„SLABå¯¹è±¡ä¸ä¼šç›´æ¥å½±å“é¡µé¢çš„é‡Šæ”¾ï¼šé€šå¸¸ï¼Œå®ƒä»¬çš„å¤§å°æ¯”é¡µé¢å¤§å°å°å¾—å¤šï¼Œå¹¶ä¸”ä¸€ä¸ªé¡µé¢åŒ…å«æ•°ç™¾ä¸ªå¯¹è±¡ã€‚ é‡Šæ”¾éƒ¨åˆ†å¯¹è±¡åï¼ŒSLABé¡µé¢ä¸­å°†å‡ºç°å¯ç”¨çš„å†…å­˜é—´éš™ï¼Œå¯ç”¨äºåˆ›å»ºå…¶ä»–SLABå¯¹è±¡ã€‚ è¯¥ç®—æ³•è¢«å†…æ ¸æœ‰æ„æ¥å—ï¼šå®ƒç®€å•ä¸”éå¸¸æœ‰æ•ˆã€‚ æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥åœ¨do_shrink_slabï¼ˆï¼‰å‡½æ•°ä¸­æŸ¥çœ‹ç”¨äºé€‰æ‹©è¦æ¸…æ´—çš„å¯¹è±¡çš„ä¸€éƒ¨åˆ†çš„å…¬å¼ã€‚ <br><br> æ­¤å‡½æ•°æ‰§è¡Œå®é™…çš„éƒ¨åˆ†å¯¹è±¡æ¸…ç†ï¼Œå¹¶ä»¥ç»“æ„æ”¶ç¼©å™¨ä¸­ä¼ é€’ç»™å®ƒçš„æè¿°ä¸ºæŒ‡å¯¼ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_shrink_slab</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct shrink_control *shrinkctl, struct shrinker *shrinker, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> priority)</span></span></span><span class="hljs-function"> </span></span>{ â€¦ <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> freeable = shrinker-&gt;count_objects(shrinker, shrinkctl); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (freeable == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; total_scan = _(freeable); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (total_scan &gt;= batch_size) { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> ret = shrinker-&gt;scan_objects(shrinker, shrinkctl); total_scan -= shrinkctl-&gt;nr_scanned; } ... }</code> </pre> <br> å…³äºæ”¶ç¼©å™¨è¶…çº§å—ï¼Œè¿™äº›åŠŸèƒ½çš„å®ç°å¦‚ä¸‹ã€‚ æ¯ä¸ªè¶…çº§å—éƒ½ç»´æŠ¤è‡ªå·±çš„s_dentry_lruå’Œs_inode_lruä¸ä¹‹ç›¸å…³çš„æœªä½¿ç”¨å¯¹è±¡çš„åˆ—è¡¨ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">super_block</span></span></span><span class="hljs-class"> {</span></span> ... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shrinker</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_shrink</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* per-sb shrinker handle */</span></span> ... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_dentry_lru</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list_lru</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">s_inode_lru</span></span></span><span class="hljs-class">;</span></span> â€¦ };</code> </pre> <br><br>  .count_objectsæ–¹æ³•è¿”å›å¯¹è±¡æ•°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">super_cache_count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct shrinker *shrink, struct shrink_control *sc)</span></span></span><span class="hljs-function"> </span></span>{ total_objects += list_lru_shrink_count(&amp;sb-&gt;s_dentry_lru, sc); total_objects += list_lru_shrink_count(&amp;sb-&gt;s_inode_lru, sc); <span class="hljs-comment"><span class="hljs-comment">/*     ) */</span></span> total_objects = vfs_pressure_ratio(total_objects); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> total_objects; }</code> </pre> <br><br>  .scan_objectsæ–¹æ³•å®é™…ä¸Šé‡Šæ”¾å¯¹è±¡ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">super_cache_scan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct shrinker *shrink, struct shrink_control *sc)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*     s_dentry_lru */</span></span> prune_dcache_sb(sb, sc); <span class="hljs-comment"><span class="hljs-comment">/*     s_inode_lru */</span></span> prune_icache_sb(sb, sc); }</code> </pre> <br> è¦é‡Šæ”¾çš„å¯¹è±¡æ•°åœ¨scå‚æ•°ä¸­ä¼ é€’ã€‚ å¦å¤–ï¼Œåœ¨é‚£é‡Œæ˜¾ç¤ºäº†memcgï¼Œå…¶å¯¹è±¡åº”è¯¥ä»LRUä¸­æŠ›å‡ºï¼š <br><br><pre> <b><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shrink_control</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nid; <span class="hljs-comment"><span class="hljs-comment">/* ID NUMA  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> nr_to_scan; <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mem_cgroup</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">memcg</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* memcg */</span></span> };</code></b> </pre><br> å› æ­¤ï¼Œprune_dcache_sbï¼ˆï¼‰ä»æ•°ç»„struct list_lru_memcg :: lru []ä¸­é€‰æ‹©ä¸€ä¸ªé“¾è¡¨ï¼Œå¹¶å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚  Prune_icache_sbï¼ˆï¼‰çš„ä½œç”¨ç›¸åŒã€‚ <br><br>  <b>æ—§çš„æ”¶ç¼©å™¨æ—è·¯ç®—æ³•</b> <b><br></b> <br> ä½¿ç”¨æ ‡å‡†æ–¹æ³•æ—¶ï¼Œå†…å­˜ä¸è¶³æ—¶ä¼šä»SLABä¸­â€œå¼¹å‡ºâ€å¯¹è±¡ <br>  sc-&gt; target_mem_cgroupçš„å‘ç”Ÿæƒ…å†µå¦‚ä¸‹ï¼š <br><br><pre> <code class="cpp hljs">shrink_node() { â€¦ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mem_cgroup</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">root</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sc</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">target_mem_cgroup</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      sc-&gt;target_mem_cgroup  */</span></span> memcg = mem_cgroup_iter(root, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, &amp;reclaim); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { â€¦ shrink_slab(memcg, ...); â€¦ } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((memcg = mem_cgroup_iter(root, memcg, &amp;reclaim))); ... }</code> </pre><br> æˆ‘ä»¬éå†æ‰€æœ‰å­memcgï¼Œå¹¶ä¸ºæ¯ä¸ªå­ä¾‹ç¨‹è°ƒç”¨rinke_slabï¼ˆï¼‰ã€‚ æ¥ä¸‹æ¥ï¼Œåœ¨rinkle_slabï¼ˆï¼‰å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éå†æ‰€æœ‰æ”¶ç¼©å™¨ï¼Œå¹¶ä¸ºæ¯ä¸ªæ”¶ç¼©å™¨è°ƒç”¨do_shrink_slabï¼ˆï¼‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shrink_slab</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">gfp_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gfp_mask, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nid, struct mem_cgroup *memcg, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> priority)</span></span></span><span class="hljs-function"> </span></span>{ list_for_each_entry(shrinker, &amp;shrinker_list, <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>) { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shrink_control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sc</span></span></span><span class="hljs-class"> = {</span></span> .nid = nid, .memcg = memcg, }; ret = do_shrink_slab(&amp;sc, shrinker, ...); } }</code> </pre><br> å›æƒ³ä¸€ä¸‹ï¼Œå¯¹äºæ¯ä¸ªè¶…çº§å—ï¼Œå…¶è‡ªå·±çš„æ”¶ç¼©å™¨å°†æ·»åŠ åˆ°æ­¤åˆ—è¡¨ä¸­ã€‚ è®©æˆ‘ä»¬è®¡ç®—ä¸€ä¸‹200ä¸ªå®¹å™¨ï¼ˆæ¯ä¸ªå®¹å™¨20ä¸ªmemcgå’Œ20ä¸ªæŒ‚è½½ç‚¹ï¼‰çš„æƒ…å†µä¸‹do_shrink_slabï¼ˆï¼‰ä¼šè¢«è°ƒç”¨å¤šå°‘æ¬¡ã€‚ æ€»å…±ï¼Œæˆ‘ä»¬æœ‰200 * 20ä¸ªå®‰è£…ç‚¹å’Œ200 * 20ä¸ªæ§åˆ¶ç»„ã€‚ å¦‚æœæœ€é¡¶å±‚çš„memcgä¸­æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæˆ‘ä»¬å°†è¢«è¿«ç»•è¿‡å…¶æ‰€æœ‰çš„å­memcgï¼ˆå³ï¼Œä¸€èˆ¬æƒ…å†µä¸‹çš„æ‰€æœ‰å†…å®¹ï¼‰ï¼Œå¹¶ä¸”å¯¹äºå®ƒä»¬ä¸­çš„æ¯ä¸ªmemcgï¼Œéƒ½è¦ä»rinker_listä¸­è°ƒç”¨æ¯ä¸ªæ”¶ç¼©å™¨ã€‚ å› æ­¤ï¼Œå†…æ ¸å°†å¯¹do_shrink_slabï¼ˆï¼‰å‡½æ•°è¿›è¡Œ200 * 20 * 200 * 20 = 16000000çš„è°ƒç”¨ã€‚ <br><br> è€Œä¸”ï¼Œå¯¹è¯¥å‡½æ•°çš„ç»å¤§å¤šæ•°è°ƒç”¨å°†æ˜¯æ— ç”¨çš„ï¼šå®¹å™¨é€šå¸¸ç›¸äº’éš”ç¦»ï¼Œå¹¶ä¸”CT1å°†ä½¿ç”¨åœ¨CT2ä¸­åˆ›å»ºçš„super_block2çš„å¯èƒ½æ€§é€šå¸¸è¾ƒä½ã€‚ æˆ–è€…ï¼Œæ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœmemcg1æ˜¯CT1ä¸­çš„ä¸€ä¸ªæ§åˆ¶ç»„ï¼Œé‚£ä¹ˆsuper_block2-&gt; s_dentry_lru-&gt; node-&gt; memcg_lrus-&gt; lru [memcg1_id]æ•°ç»„çš„å¯¹åº”å…ƒç´ å°†æ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œä¸ºå®ƒè°ƒç”¨do_shrink_slabï¼ˆï¼‰æ²¡æœ‰æ„ä¹‰ã€‚ <br><br> å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„bashè„šæœ¬å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œå»ºæ¨¡ï¼ˆæ­¤å¤„ä½¿ç”¨äº†æ¥è‡ªè¡¥ä¸é›†çš„æ•°æ®ï¼Œè¯¥æ•°æ®éšåä¼ é€’ç»™å†…æ ¸ï¼‰ï¼š <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$echo</span></span> 1 &gt; /sys/fs/cgroup/memory/memory.use_hierarchy <span class="hljs-variable"><span class="hljs-variable">$mkdir</span></span> /sys/fs/cgroup/memory/ct <span class="hljs-variable"><span class="hljs-variable">$echo</span></span> 4000M &gt; /sys/fs/cgroup/memory/ct/memory.kmem.limit_in_bytes <span class="hljs-variable"><span class="hljs-variable">$for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> `seq 0 4000`; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> mkdir /sys/fs/cgroup/memory/ct/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> $$ &gt; /sys/fs/cgroup/memory/ct/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>/cgroup.procs; mkdir -ps/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>; mount -t tmpfs <span class="hljs-variable"><span class="hljs-variable">$is</span></span>/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>; touch s/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>/file; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br> è®©æˆ‘ä»¬çœ‹çœ‹å¦‚æœè¿ç»­è°ƒç”¨ç¼“å­˜é‡ç½®è¿‡ç¨‹5æ¬¡ä¼šå‘ç”Ÿä»€ä¹ˆï¼š <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$time</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 3 &gt; /proc/sys/vm/drop_caches</code> </pre> <br> ç¬¬ä¸€æ¬¡è¿­ä»£æŒç»­14ç§’ï¼Œå› ä¸ºç¼“å­˜çš„å¯¹è±¡ç¡®å®åœ¨å†…å­˜ä¸­ï¼š <i>0.00ç”¨æˆ·13.78ç³»ç»Ÿ<b>0ï¼š13.78ä½¿ç”¨äº†</b> 99ï¼…çš„CPUã€‚</i> <br> å°½ç®¡æ²¡æœ‰æ›´å¤šå¯¹è±¡ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡è¿­ä»£éœ€è¦5ç§’ï¼š <i>0.00user 5.59system <b>0ï¼š05.60ç»è¿‡</b> 99ï¼…çš„CPUã€‚</i> <br> ç¬¬ä¸‰æ¬¡è¿­ä»£è€—æ—¶5ç§’ï¼š <i>0.00user 5.48ç³»ç»Ÿ<b>0ï¼š05.48ç»è¿‡</b> 99ï¼…CPU</i> <br> ç¬¬å››æ¬¡è¿­ä»£è€—æ—¶8ç§’ï¼š <i>0.00ç”¨æˆ·8.35ç³»ç»Ÿ<b>0ï¼š08.35å·²ä½¿ç”¨</b> 99ï¼…CPU</i> <br> ç¬¬äº”æ¬¡è¿­ä»£è€—æ—¶8ç§’ï¼š <i>0.00ç”¨æˆ·8.34ç³»ç»Ÿ<b>0ï¼š08.35å·²ä½¿ç”¨</b> 99ï¼…CPU</i> <br><br> æ˜¾è€Œæ˜“è§ï¼Œé¦™è‰æ ¸æ‰€ä½¿ç”¨çš„æ”¶ç¼©æ—è·¯ç®—æ³•ä¸æ˜¯æœ€ä½³çš„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œæ›´æ”¹ä»¥æ›´å¥½åœ°å®ç°å¯ä¼¸ç¼©æ€§ã€‚ <br><br>  <b>æ–°çš„æ”¶ç¼©ç»•è¿‡ç®—æ³•</b> <b><br></b> <br> é€šè¿‡æ–°ç®—æ³•ï¼Œæˆ‘æƒ³è¦å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š <br><br><ol><li> è®©ä»–æ‘†è„±æ—§çš„ç¼ºç‚¹ </li><li> ä¸è¦æ·»åŠ æ–°çš„é”ã€‚ ä»…åœ¨æœ‰æ„ä¹‰æ—¶ï¼ˆå³s_dentry_lruæ•°ç»„æˆ–s_inode_lruæ•°ç»„ä¸­çš„å¯¹åº”é“¾è¡¨ä¸ä¸ºç©ºï¼‰è°ƒç”¨do_shrink_slabï¼ˆï¼‰ï¼Œä½†ä¸è¦ç›´æ¥è®¿é—®é“¾è¡¨å­˜å‚¨å™¨ã€‚ </li></ol><br> æ˜¾ç„¶ï¼Œè¿™åªèƒ½ç”±å¼‚æ„æ”¶ç¼©å™¨ä¹‹ä¸Šçš„æ–°æ•°æ®ç»“æ„æ¥æä¾›ï¼ˆä¸ä»…æœ‰è¶…çº§å—çš„æ”¶ç¼©å™¨ï¼Œè¿˜æœ‰æœ¬æ–‡æœªä»‹ç»çš„å…¶ä»–æ•°æ®å¯¹è±¡çš„æ”¶ç¼©å™¨ã€‚è¯»è€…å¯ä»¥é€šè¿‡æœç´¢å…³é”®å­—prealloc_shrinkerï¼ˆï¼‰æ¥ç†Ÿæ‚‰å®ƒä»¬ã€‚åœ¨å†…æ ¸ä»£ç ä¸­ï¼‰ã€‚ æ–°çš„æ•°æ®ç»“æ„åº”å…è®¸å¯¹ä¸¤ç§çŠ¶æ€è¿›è¡Œç¼–ç ï¼šâ€œè°ƒç”¨do_shrink_slabï¼ˆï¼‰æœ‰æ„ä¹‰â€å’Œâ€œè°ƒç”¨do_shrink_slabï¼ˆï¼‰æ¯«æ— æ„ä¹‰â€ã€‚ <br><br>  IDAç±»å‹æ•°æ®ç»“æ„è¢«æ‹’ç»ï¼Œå› ä¸º ä»–ä»¬åœ¨è‡ªå·±å†…éƒ¨ä½¿ç”¨é”ã€‚ ä½å­—æ®µçš„æ•°æ®ç»“æ„å®Œå…¨é€‚åˆæ­¤è§’è‰²ï¼šå®ƒå…è®¸åŸå­ä¿®é¥°å•ä¸ªä½ï¼Œå¹¶ä¸”ä¸å†…å­˜å±éšœç»“åˆä½¿ç”¨ï¼Œæ‚¨å¯ä»¥æ„å»ºæœ‰æ•ˆçš„ç®—æ³•è€Œæ— éœ€ä½¿ç”¨é”ã€‚ <br><br> æ¯ä¸ªæ”¶ç¼©å™¨éƒ½æœ‰è‡ªå·±çš„å”¯ä¸€IDï¼ˆshrinker :: idï¼‰ï¼Œæ¯ä¸ªmemcgéƒ½æœ‰ä¸€ä¸ªä½å›¾ï¼Œè¯¥ä½å›¾èƒ½å¤ŸåŒ…å«å½“å‰æ³¨å†Œçš„æœ€å¤§IDã€‚ å½“ç¬¬ä¸€ä¸ªå…ƒç´ æ·»åŠ åˆ°s_dentry_lru-&gt;èŠ‚ç‚¹-&gt; memcg_lrus-&gt; lru [memcg_id]åˆ—è¡¨ä¸­æ—¶ï¼Œç›¸åº”çš„memcgä½å›¾å°†è®¾ç½®ä¸º1ä½ï¼Œå…¶æ•°å­—ä¸ºrinker-&gt; idã€‚ ä¸s_inode_idç›¸åŒã€‚ <br><br> ç°åœ¨ï¼Œå¯ä»¥ä¼˜åŒ–shrink_slabï¼ˆï¼‰ä¸­çš„å¾ªç¯ä»¥ä»…ç»•è¿‡å¿…è¦çš„æ”¶ç¼©å™¨ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shrink_slab</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ â€¦ for_each_set_bit(i, <span class="hljs-built_in"><span class="hljs-built_in">map</span></span>, shrinker_nr_max) { â€¦ shrinker = idr_find(&amp;shrinker_idr, i); â€¦ do_shrink_slab(&amp;sc, shrinker, priority); â€¦ } }</code> </pre><br>  ï¼ˆå½“æ”¶ç¼©å™¨è¿›å…¥çŠ¶æ€æ—¶ï¼Œä¹Ÿå°†æ‰§è¡Œä½æ¸…ç†ã€‚â€œè°ƒç”¨do_shrink_slabï¼ˆï¼‰æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§Github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æäº¤</a> ã€‚ <br><br> å¦‚æœé‡å¤ç¼“å­˜é‡ç½®æµ‹è¯•ï¼Œåˆ™ä½¿ç”¨æ–°ç®—æ³•å°†æ˜¾ç¤ºå‡ºæ˜æ˜¾æ›´å¥½çš„ç»“æœï¼š <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$time</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 3 &gt; /proc/sys/vm/drop_caches</code> </pre> <br> ç¬¬ä¸€æ¬¡è¿­ä»£ï¼š <i>0.00user 1.10ç³»ç»Ÿ<b>0ï¼š01.10å·²ä½¿ç”¨</b> 99ï¼…CPU</i> <i><br></i> ç¬¬äºŒæ¬¡è¿­ä»£ï¼š <i>0.00user 0.00system <b>0ï¼š00.01ç»è¿‡</b> 64ï¼…CPU</i> <i><br></i> ç¬¬ä¸‰æ¬¡è¿­ä»£ï¼š <i>0.00user 0.01system <b>0ï¼š00.01ç»è¿‡</b> 82ï¼…CPU</i> <i><br></i> ç¬¬å››æ¬¡è¿­ä»£ï¼š <i>0.00user 0.00system <b>0ï¼š00.01ç»è¿‡</b> 64ï¼…CPU</i> <i><br></i> ç¬¬äº”æ¬¡è¿­ä»£ï¼š <i>0.00user 0.01system <b>0ï¼š00.01ç»è¿‡</b> 82ï¼…CPU</i> <br> ç¬¬äºŒæ¬¡åˆ°ç¬¬äº”æ¬¡è¿­ä»£çš„æŒç»­æ—¶é—´ä¸º0.01ç§’ï¼Œ <b>æ¯”ä»¥å‰å¿«548å€ã€‚</b> <br><br> ç”±äºåœ¨è®¡ç®—æœºä¸Šå†…å­˜ä¸è¶³æ—¶éƒ½ä¼šå‘ç”Ÿç±»ä¼¼çš„é‡ç½®ç¼“å­˜çš„æ“ä½œï¼Œå› æ­¤è¿™ç§ä¼˜åŒ–å¯ä»¥æ˜¾ç€æ”¹å–„å…·æœ‰å¤§é‡å®¹å™¨å’Œå†…å­˜æ§åˆ¶ç»„çš„è®¡ç®—æœºçš„æ“ä½œã€‚ é¦™è‰æ ¸å·²æ¥å—<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ç»„è¡¥ä¸</a> ï¼ˆ17ä¸ªï¼‰ï¼Œæ‚¨å¯ä»¥ä»4.19ç‰ˆå¼€å§‹åœ¨æ­¤å¤„æ‰¾åˆ°å®ƒã€‚ <br><br> åœ¨å®¡æŸ¥è¡¥ä¸çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä½Googleå‘˜å·¥å‡ºç°äº†ï¼Œäº‹å®è¯æ˜ä»–ä»¬ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ã€‚ å› æ­¤ï¼Œåœ¨ä¸åŒç±»å‹çš„è´Ÿè½½ä¸Šè¿›ä¸€æ­¥æµ‹è¯•äº†è¡¥ä¸ã€‚ <br> ç»“æœï¼Œè¡¥ä¸é›†ä»ç¬¬9æ¬¡è¿­ä»£å¼€å§‹é‡‡ç”¨ï¼› å®ƒè¿›å…¥é¦™è‰æ ¸å¿ƒå¤§çº¦éœ€è¦4ä¸ªæœˆçš„æ—¶é—´ã€‚ ä¹Ÿæ˜¯ä»Šå¤©ï¼Œè¡¥ä¸é›†åŒ…å«åœ¨æˆ‘ä»¬è‡ªå·±çš„Virtuozzo 7å†…æ ¸ä¸­ï¼Œä»ç‰ˆæœ¬vz7.71.9å¼€å§‹ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN435694/">https://habr.com/ru/post/zh-CN435694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN435684/index.html">æ©¡æ ‘å²­å›½å®¶å®éªŒå®¤è§£å†³äº†ç©ºé—´è®¾å¤‡å¼€å‘å•†çš„ä¸»è¦é—®é¢˜ï¼š: 238ç¼ºä¹</a></li>
<li><a href="../zh-CN435686/index.html">Pavel Durovæ¸…ç®—Telegram Messenger LLP</a></li>
<li><a href="../zh-CN435688/index.html">Flutterå®¢æˆ·ç«¯æœåŠ¡å™¨åº”ç”¨ç¤ºä¾‹</a></li>
<li><a href="../zh-CN435690/index.html">[GraphQLæœ‰ä»€ä¹ˆé—®é¢˜] ...ä»¥åŠå¦‚ä½•å¤„ç†</a></li>
<li><a href="../zh-CN435692/index.html">Y Combinatorï¼šâ€œèµ·åˆï¼Œä¸€äº›æœ€å¤§çš„ç§‘æŠ€å…¬å¸çœ‹èµ·æ¥åƒç©å…·â€</a></li>
<li><a href="../zh-CN435696/index.html">ä¸Šå¤ï¼š1997å¹´è®¡ç®—æœºå¹¿å‘Š</a></li>
<li><a href="../zh-CN435698/index.html">ç¼–å†™è‡ªå·±çš„ä¼˜ç§€å†…å­˜ç®¡ç†å™¨</a></li>
<li><a href="../zh-CN435700/index.html">8ä¸ªæœ€å·®çš„Vue.jsé¢è¯•é—®é¢˜</a></li>
<li><a href="../zh-CN435702/index.html">ä¸“åˆ©å·¨é­”å¼€å§‹å¹¶è·èƒœï¼šæˆ‘å¦‚ä½•æ²¡æœ‰æ¯”èµ›</a></li>
<li><a href="../zh-CN435704/index.html">æ‰‹æœºæ¸¸æˆçš„æ¶æ„è§£å†³æ–¹æ¡ˆã€‚ ç¬¬2éƒ¨åˆ†ï¼šå‘½ä»¤åŠå…¶é˜Ÿåˆ—</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>