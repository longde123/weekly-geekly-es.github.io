<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÖ üë∞üèº üçª Faire un simple modem sonar ü§∞üèº üçè üçü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour cher! 
 Dans cet article, √† la demande g√©n√©rale, nous vous expliquerons comment r√©aliser un simple modem hydroacoustique: un peu de traitement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Faire un simple modem sonar</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451800/"><h3>  Bonjour cher! </h3><br>  Dans cet article, √† la demande g√©n√©rale, nous vous expliquerons comment r√©aliser un simple modem hydroacoustique: un peu de traitement du signal num√©rique, un peu de programmation, un peu de circuits imprim√©s maison et une goutte d'hydrologie pratique. <br><br>  √Ä tous ceux qui sont int√©ress√©s - nous vous demandons d'√™tre les bienvenus sous la coupe, dans le monde r√©verb√©rant de la communication sous-marine! <br><br>  Et voici l'image pertinente, pour attirer l'attention: <br><br><img src="https://habrastorage.org/webt/_8/0u/jz/_80ujzh-1afojo46fevq6egccvg.jpeg"><br><a name="habracut"></a><br><blockquote>  "En fin de compte, le sens de notre existence est de d√©penser de l'√©nergie ... Et si possible, vous savez, afin que cela soit int√©ressant pour vous et pour les autres est utile." <br>  (C) ABS, midi, XXIIe si√®cle </blockquote><h3>  √âconomisez votre temps - R√©sum√© </h3><br><ul><li>  Les modems acoustiques ne sont pas encore vendus sur Aliexpress </li><li>  Il existe une m√©thode simple et peu exigeante de d√©tection de tonalit√© des ressources informatiques, dont la fr√©quence est 4 fois inf√©rieure √† la fr√©quence d'√©chantillonnage;  Arduino est suffisant pour la mise en ≈ìuvre </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemple de code</a> pour PC se trouve sur GitHub </li><li>  Nous fabriquons des antennes de r√©ception et d'√©mission √† partir de pie pickers de 10 r chacun </li><li>  Nous achetons (ou le faisons nous-m√™mes) une carte amplificateur sur TDA2030 sur Ali pour 50 roubles </li><li>  Nous fabriquons un pr√©amplificateur LUT-ohm, avec un co√ªt total de ~ 100 roubles </li><li>  Nous nous connectons et allons √† l'√©tang </li><li>  R√©jouis-toi </li></ul><br><h3>  Pr√©lude de motivation </h3><br>  Maintenant, vous pouvez acheter presque n'importe quoi sur Aliexpress ou eBay.  Surtout beaucoup de choses diff√©rentes pour la fabrication ind√©pendante de quelque chose d'√©lectronique bas√© sur Arduino.  Vous pouvez faire (si vous ne l'achetez tout simplement pas int√©ressant) une station m√©t√©o de milieu-stopover avec une connexion Internet, une mangeoire automatique pour chats, un contr√¥leur de brasserie domestique, mais vous ne pouvez toujours pas acheter un modem sonar, un concepteur pour sa fabrication, ou au moins un module pour adruino.  Et bien!  Et ne le faites pas - maintenant, nous allons vous dire comment le faire, et aussi comment cela fonctionne. <br><br>  Nous avons longuement r√©fl√©chi √† tout le laboratoire pour proposer aux amateurs une fabrication ind√©pendante.  Quelque chose de tr√®s simple, qui peut √™tre r√©cup√©r√© par un √©tudiant et √† partir d'un <s>b√¢ton et d'une corde de</s> ce que tout le monde a sous la main, mais en m√™me temps repr√©sentant n√©cessairement au moins une valeur pratique ou √©ducative minimale. <br><br>  Quelque chose promettant une am√©lioration longue et passionnante, quelque chose qui peut plus tard √™tre transf√©r√© m√™me √† l'arduino <s>, si cela ne va pas</s> . <br><br>  Si nous abordons la question de mani√®re mat√©rielle, nous aimerions offrir un tutoriel d√©taill√© pour la fabrication d'un appareil simple qui serait plus ou moins capable de transmettre des donn√©es dans un plan d'eau peu profond (un canal sonar peu profond est le plus complexe), ce qui signifierait une production maximale d'une carte de circuit imprim√© utilisant LUT, avec un co√ªt total ne d√©passant pas quelques trois cents roubles √† un minimum de points. <br><br><h3>  Que ferons-nous aujourd'hui? </h3><br><ul><li>  rappelez-vous comment faire une antenne sonar appropri√©e et en faire un couple; </li><li>  connectez l'une des antennes √† un PC via un amplificateur sur le TDA pour ~ 50 roubles et obtenez un √©metteur; </li><li>  pour la seconde nous ferons un pr√©amplificateur avec l'aide de LUT pour ~ 100 roubles; </li><li>  nous <s>allons</s> √©crire <s>(j'ai d√©j√† tout √©crit et mis sur Git) un</s> simple modem en C # et tout essayer dans le plan d'eau le plus proche; </li></ul><br><h3>  De quoi avons-nous besoin pour cela? </h3><br><ul><li>  deux √©l√©ments pi√©zo√©lectriques.  Par exemple, √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'une horloge ou d'une carte postale</a> ; </li><li>  C√¢ble RG-174 / U (ou similaire) ~ 5 m√®tres; </li><li>  scellant ac√©tique; </li><li>  vernis r√©sistant √† l'eau; </li><li>  textolite en feuille, un total d'environ 100x200 mm; </li><li>  un amplificateur pour TDA2030 (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> pour 50 roubles); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">composants de</a> pr√©ampli </li></ul><br><h3>  Comment √ßa marche? </h3><br>  L'id√©e m√™me du modem le plus simple repose sur, encore une fois, le plus simple (co√Øncidence?) D√©tecteur d'un certain ton, dont, √† ma honte, je n'ai pas entendu.  Il m'a parl√© de lui compl√®tement par hasard <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">andrey_9999a</a> .  Soit dit en passant, il a √©galement fabriqu√© une carte de pr√©amplificateur. <br><br>  √Ä cet √©gard, j'ai rappel√© une citation du livre de Leonard Sasskind ¬´La bataille du trou noir¬ª: <br><blockquote>  ¬´En tant que connaisseur de vin, je suis plus ou moins s√ªr que m√™me les yeux ferm√©s, je peux distinguer le rouge du blanc.  Encore plus fiable, je distingue le vin de la bi√®re.  Mais le go√ªt me d√©cevra. ¬ª <br></blockquote>  Je peux me dire qu'en tant que v√©ritable ing√©nieur en √©lectronique, je suis plus ou moins s√ªr que je peux d√©finitivement souder deux fils √©pais.  De mani√®re encore plus fiable, je distingue un fer √† souder chaud d'un fer froid, m√™me les yeux ferm√©s, mais la comp√©tence me laissera tomber.  Par cons√©quent, tout ce qui concerne le d√©veloppement et la fabrication de cartes est l'≈ìuvre de mes camarades et coll√®gues <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">andrey_9999a</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">StDmitriev</a> . <br><br>  Revenons donc au d√©tecteur.  Il s'agit d'un cas particulier simplifi√© de calcul de l'int√©grale de Fourier: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><msubsup><mi>t</mi><mn>0</mn><mi>T</mi></msubsup><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mi>d</mi><mi>t</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.594ex" height="3.021ex" viewBox="0 -883.9 10589.2 1300.8" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-69" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6E" x="595" y="0"></use><g transform="translate(1196,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-54" x="511" y="488"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-30" x="511" y="-435"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-66" x="2155" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-28" x="2706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-78" x="3095" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-29" x="3668" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-73" x="4057" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-69" x="4527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6E" x="4872" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-28" x="5473" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6F" x="6112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6D" x="6598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-65" x="7476" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-67" x="7943" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-61" x="8423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-74" x="8953" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-29" x="9314" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-64" x="9704" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-74" x="10227" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><msubsup><mi>t</mi><mn>0</mn><mi>T</mi></msubsup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi><mi>t</mi><mo stretchy="false">)</mo><mi>d</mi><mi>t</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ int_0 ^ Tf (x) sin (\ omega t) dt </script></p><br>  Dans le cas d'un signal num√©rique, pour calculer l'amplitude d'une harmonique arbitraire, il sera n√©cessaire d'effectuer une transform√©e de Fourier discr√®te, pour Arduina c'est difficile, mais l'astuce est que si vous prenez <i>Fc</i> comme fr√©quence porteuse, telle qu'elle sera exactement 4 fois inf√©rieure √† la fr√©quence d'√©chantillonnage <i>Fs</i> , puis l'amplitude de cette harmonique peut √™tre calcul√©e de fa√ßon d√©moniaque plus facile. <br><br>  Dans ce cas, <i>dt = 2œÄ * (Fs / 4) / Fs = œÄ / 2</i> , et seuls 4 √©chantillons tombent sur la p√©riode porteuse: <br><br><img src="https://habrastorage.org/webt/__/zm/oe/__zmoe1u0jzgjderykrsaogn0k8.png"><br><br>  Si tout est d√©cal√© de <i>œÄ / 4,</i> alors les √©chantillons ne prendront que deux valeurs: ‚àö2 / 2 et -‚àö2 / 2, pour plus de simplicit√© nous ne laisserons que les signes - <b>"+" et "-"</b> . <br><br>  L'essence de la m√©thode est que nous repr√©sentons la phase sinuso√Ødale comme une s√©quence de signes <b>"+" "+" "-" "-"</b> , et la phase cosinuso√Ødale comme <b>"+" "-" "-" "+"</b> . <br><br>  Que le signal d'entr√©e soit dans le tampon <i>sn</i> , nous avons deux tampons de moyenne en anneau pour les phases sinus et cosinus - <i>bs</i> et <i>bc de</i> taille <i>N.</i>  Les pointeurs vers la t√™te et la queue sont communs pour eux - <i>bH</i> et <i>bT</i> .  Au moment initial du temps, <i>bH = N-1, bT = 0</i> .  Compteur de cycles de moyenne <i>C = 0</i> . <br><br>  Nous prenons 4 √©chantillons du tampon d'entr√©e et les ajoutons en fonction des s√©quences de caract√®res. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><code>a = sn(i) <br> bs(bH) = a <br> bc(bH) = a <br> s1 = s1 + a - bs(bT) <br> s2 = s2 + a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N <br> <br> a = sn(i+1) <br> bs(bH) = a <br> bc(bH) = -a <br> s1 = s1 + a - bs(bT) <br> s2 = s2 - a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N <br> <br> a = sn(i+2) <br> bs(bH) = -a <br> bc(bH) = -a <br> s1 = s1 - a - bs(bT) <br> s2 = s2 - a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N <br> <br> a = sn(i+3) <br> bs(bH) = -a <br> bc(bH) = a <br> s1 = s1 - a - bs(bT) <br> s2 = s2 + a - bc(bT) <br> bH = (bH + 1) % N <br> bT = (bT + 1) % N</code> <br> </div></div><br>  Apr√®s avoir trait√© chacun quatre √©chantillons, nous v√©rifions le compteur des cycles de moyenne et s'il a d√©pass√© <i>N</i> , puis nous calculons l'amplitude de la porteuse <i>cA</i> : <br><br><pre> <code class="plaintext hljs">if ++cycle &gt;= N cA = sqrt(s1 * s1 + s2 * s2) cycle = 0 end</code> </pre> <br>  Voici √† quoi cela ressemble sur un signal id√©al: <br><br><img src="https://habrastorage.org/webt/aj/w5/q5/ajw5q5dls4ruoi_gjzdswjay0ko.png"><br><br>  Le signal lui-m√™me est affich√© en bleu et les valeurs d'amplitude de la porteuse sont affich√©es en rouge (tout est r√©duit √† la plage -1..1).  Dans ce cas, <i>N = 2</i> puisque  il n'y a pas de bruit et tout fonctionne bien quand m√™me. <br><br>  Ajoutez maintenant un peu de bruit blanc et voyez comment notre d√©tecteur r√©agira √† cela: <br><br><img src="https://habrastorage.org/webt/ah/ee/0j/ahee0jsjvmnm_cm89jvyroxmrlg.png"><br><br>  J'ai ajout√© du bruit blanc pour que le rapport signal / bruit soit de 0 dB.  Dans la figure ci-dessus, le signal bruyant est affich√© en bleu, le signal source en vert et la valeur d'amplitude en rouge.  Dans ce cas, le d√©tecteur √† <i>N = 2</i> n'a d√©j√† rien d√©tect√©, et le N minimum auquel il fonctionne correctement est de 32. Autrement dit,  la taille de la fen√™tre de traitement des √©chantillons √©tait de <i>32 * 4 = 128</i> √©chantillons. <br><br>  Autrement dit, nous pouvons maintenant analyser le signal d'entr√©e et √©valuer un param√®tre qui quantifie la pr√©sence d'une fr√©quence, quatre fois inf√©rieure √† la fr√©quence d'√©chantillonnage.  Si vous d√©finissez une certaine valeur seuil pour ce param√®tre, alors tout peut √™tre binaris√©, et en parlant d'une mani√®re simple, nous pouvons r√©pondre √† la question: y a-t-il une tonalit√© donn√©e dans le signal d'entr√©e ou non? <br><br>  C'est tr√®s bien, mais nous devons transmettre des bits, et les bits peuvent prendre deux valeurs. <br><br>  L'impl√©mentation d'un syst√®me avec deux √©tats de signalisation √† l'aide d'un seul est une id√©e, donc nous <i>ne</i> coderons <i>pas l'</i> un des √©tats avec silence (pause).  Cela rendrait la d√©tection tr√®s difficile: il faudrait en quelque sorte mettre en √©vidence le d√©but de la pr√©misse, comprendre comment organiser sa fin, etc. <br><br>  Au lieu de cela, "1" et "0" nous encoderons avec des impulsions de diff√©rentes longueurs, entre les bits il y a un soi-disant  intervalle de garde - parce que nous devons encore faire face √† la propagation par trajets multiples et √† la r√©verb√©ration.  En termes simples, l'intervalle de garde est l'endroit (le temps) o√π toutes les r√©flexions du bit pr√©c√©dent, tous les sons r√©manents et les √©chos s'√©teignent. <br><br>  √Ä l'avenir, nous notons qu'avec une telle structure de signal, l'algorithme de fonctionnement du r√©cepteur est consid√©rablement simplifi√©: nous attendons que la tonalit√© apparaisse, remarquons le d√©but, attendons que la tonalit√© disparaisse et notons √† nouveau l'heure - si l'heure re√ßue ressemble plus √† ¬´1¬ª, nous avons probablement pris un peu avec une valeur de "1", si cela ressemble plus √† "0" - alors apparemment, nous avons pris un peu avec une valeur de "0". <br><br>  En g√©n√©ral, nous pouvons dire qu'il s'agit d'une sorte de code morse. <br><br><h3>  Partie logicielle du modem </h3><br>  Pour les impatients - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un exemple se trouve sur GitHub</a> .  Il a √©t√© fouett√© en C # (parce que pour le PC j'√©cris dessus et c'est juste plus pratique et plus rapide pour moi). <br><br>  La merveilleuse biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NAudio</a> est utilis√©e pour lire et capturer le son de l'entr√©e microphone. <br><br>  Toute la logique du modem est dans la <a href="">classe SUAModem</a> (Simple Underwater Acoustic Modem). <br><br>  Les param√®tres suivants sont transmis au constructeur: <br><br>  double sRateHz - taux d'√©chantillonnage en Hertz; <br>  int wSize - la taille de la fen√™tre de traitement en √©chantillons; <br>  int oneMultiplier - combien de "fen√™tres" durent un peu avec une valeur de "1" <br>  int zeroMultiplier - combien de "fen√™tres" durent un peu avec une valeur de "0" <br>  double eThreshold - seuil, parlons-en plus tard <br><br>  Pour g√©n√©rer un signal √† partir d'un tableau d'octets, il existe une m√©thode ModulateData (byte [] data), qui renvoie un tableau d'√©chantillons sign√©s 16 bits. <br><br><div class="spoiler">  <b class="spoiler_title">short public [] ModulateData (octet [] donn√©es)</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">short</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ModulateData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> alpha = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> phase = <span class="hljs-number"><span class="hljs-number">0</span></span>; List&lt;<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>&gt; samples = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>&gt;(); BitArray bits = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BitArray(data); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bits.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sLim = (bits[i]) ? oneDurationSmp : zeroDurationSmp; alpha = <span class="hljs-number"><span class="hljs-number">0</span></span>; phase = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sIdx = <span class="hljs-number"><span class="hljs-number">0</span></span>; sIdx &lt;= sLim; sIdx++) { alpha = Math.Sin(phase); phase += delta; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt;= alimit) phase -= alimit; samples.Add(Convert.ToInt16(alpha * <span class="hljs-keyword"><span class="hljs-keyword">short</span></span>.MaxValue)); } samples.AddRange(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span>[defenseIntervalSmp]); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> samples.ToArray(); }</code> </pre><br></div></div><br>  Dans la boucle principale par bits transmis, la liste d'√©chantillons est remplie.  En fonction du bit transmis actuel, la longueur sLim du signal g√©n√©r√© en √©chantillons est fix√©e.  Un intervalle de garde est ajout√© apr√®s chaque bit. <br><br><div class="spoiler">  <b class="spoiler_title">Bien s√ªr ...</b> <div class="spoiler_text">  Beaucoup peuvent remarquer que lors de la g√©n√©ration d'un signal, on pourrait se passer de la fonction sinus, mais cet exemple permet, en changeant la valeur delta en cons√©quence, de changer la fr√©quence de la tonalit√© g√©n√©r√©e. <br><br>  Pour g√©n√©rer un son avec une fr√©quence <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>n</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.713ex" height="2.349ex" viewBox="0 -772.3 1168.1 1011.3" role="img" focusable="false" style="vertical-align: -0.555ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6E" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> F_n </script>  √† un taux d'√©chantillonnage donn√© <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.498ex" height="2.349ex" viewBox="0 -772.3 1075.5 1011.3" role="img" focusable="false" style="vertical-align: -0.555ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-73" x="910" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> F_s </script>  valeur correspondante <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.643ex" height="2.074ex" viewBox="0 -772.3 2429.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-61" x="1900" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> \ delta </script>  calcul√© simplement: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mo>=</mo><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi><msub><mi>F</mi><mi>n</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><msub><mi>F</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.83ex" height="2.762ex" viewBox="0 -831.5 8107.2 1189" role="img" focusable="false" style="vertical-align: -0.83ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-64" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-65" x="773" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6C" x="1240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-74" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-61" x="1900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-3D" x="2707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-32" x="3763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-70" x="4514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-69" x="5017" y="0"></use><g transform="translate(5363,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-6E" x="910" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMAIN-2F" x="6531" y="0"></use><g transform="translate(7031,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/451800/&amp;usg=ALkJrhjUfSPK9ums0xvFSyKo2b3no7Y0GA#MJMATHI-73" x="910" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mo>=</mo><mn>2</mn><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi><msub><mi>F</mi><mi>n</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><msub><mi>F</mi><mi>s</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> \ delta = 2 \ pi F_n / F_s </script></p><br></div></div><br>  Pour g√©n√©rer et √©mettre un signal, il existe la m√©thode TransmitData (byte [] data), qui appelle en interne ModulateData: <br><br><div class="spoiler">  <b class="spoiler_title">double TransmitData public (octet [] donn√©es)</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TransmitData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> samples = ModulateData(data); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> txTime = ((<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>)samples.Length) / SampleRateHz; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rawBytes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[samples.Length * <span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; samples.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bts = BitConverter.GetBytes(samples[i]); rawBytes[i * <span class="hljs-number"><span class="hljs-number">2</span></span>] = bts[<span class="hljs-number"><span class="hljs-number">0</span></span>]; rawBytes[i * <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>] = bts[<span class="hljs-number"><span class="hljs-number">1</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ms = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MemoryStream(rawBytes)) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RawSourceWaveStream(ms, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaveFormat(Convert.ToInt32(SampleRateHz), <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>))) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaveOutEvent()) { wo.Init(rs); wo.Play(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (wo.PlaybackState == PlaybackState.Playing) { Thread.SpinWait(<span class="hljs-number"><span class="hljs-number">1</span></span>); } } rs.Close(); } ms.Close(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> txTime; }</code> </pre><br></div></div><br>  La classe SUAModem signale l'acceptation de l'octet suivant √† l'aide de l'√©v√©nement DataReceivedEventHandler. <br><br>  Les √©chantillons d'entr√©e sont envoy√©s √† l'analyse √† l'aide de la m√©thode ProcessInputSignal (donn√©es courtes []), o√π ils sont √©crits dans le tampon en anneau.  L'analyse a lieu dans un thread s√©par√©, dans la m√©thode Receiver. <br><br>  Et le r√©cepteur lui-m√™me vit dans la m√©thode de r√©ception: <br><br><div class="spoiler">  <b class="spoiler_title">void priv√© recevoir ()</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Receive</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> a</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (rCnt &gt;= <span class="hljs-number"><span class="hljs-number">4</span></span>) { a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = a; dRing2[rHead] = a; s1 += a - dRing1[rTail]; s2 += a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = a; dRing2[rHead] = -a; s1 += a - dRing1[rTail]; s2 += -a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = -a; dRing2[rHead] = -a; s1 += -a - dRing1[rTail]; s2 += -a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; a = ring[rRPos]; rRPos = (rRPos + <span class="hljs-number"><span class="hljs-number">1</span></span>) % rSize; rCnt--; dRing1[rHead] = -a; dRing2[rHead] = a; s1 += -a - dRing1[rTail]; s2 += a - dRing2[rTail]; rHead = (rHead + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; rTail = (rTail + <span class="hljs-number"><span class="hljs-number">1</span></span>) % windowSize; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (++cycle &gt;= windowSize) { cycle = <span class="hljs-number"><span class="hljs-number">0</span></span>; currentEnergy = Math.Sqrt(s1 * s1 + s2 * s2) / windowSize; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> de = currentEnergy - prevEnergy; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">region</span></span></span><span class="hljs-meta"> analysis </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (skip &gt; 0) skip -= windowSize * 4; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (isRise) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (de &gt; -Threshold) { riseSmp += windowSize * 4; } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { // analyse symbol isRise = false; double oneDiff = Math.Abs(oneDurationSmp - riseSmp); double zeroDiff = Math.Abs(zeroDurationSmp - riseSmp); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (oneDiff &gt; zeroDiff) { // Mostly likely "0" AddBit(false); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { // Mostly likely "1" AddBit(true); } samplesSinceLastBit = 0; skip = defenseIntervalSmp / 2; } } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (de &gt; Threshold) { isRise = true; riseSmp = windowSize * 4; } } } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endregion</span></span></span><span class="hljs-meta"> prevEnergy = currentEnergy; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (bPos &gt; 0) { samplesSinceLastBit += 4 * windowSize; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (samplesSinceLastBit &gt;= defenseIntervalSmp * 2 + zeroDurationSmp + oneDurationSmp) { DiscardBits(); } } } } }</span></span></code> </pre><br></div></div><br>  Le code montre que l'analyse est effectu√©e en 4 √©chantillons, si vous le souhaitez, vous pouvez enregistrer l'√©tat et traiter un √©chantillon, ce qui sera utile lors du transfert vers un MK faible. <br>  Au fur et √† mesure de la r√©ception des donn√©es, la valeur de l'amplitude s est calcul√©e √† une fr√©quence sRateHz / 4.  La diff√©rence entre les valeurs pr√©c√©dentes et actuelles de l'amplitude est calcul√©e puis compar√©e √† un seuil donn√©, s√©lectionn√© exp√©rimentalement.  Un exemple vous permet de modifier ce seuil en temps r√©el. <br><br>  Une forte augmentation de l'amplitude indique le d√©but d'un ¬´bit¬ª, une baisse brutale (un peu moins forte en raison de la r√©verb√©ration) indique la fin d'un ¬´bit¬ª. <br><br>  Apr√®s avoir re√ßu le bit suivant, nous calculons l'intervalle de protection - nous sautons le nombre d'√©chantillons sp√©cifi√© - il y a toutes sortes d'√©chos en eux, ils n'interf√©reront qu'avec nous. <br><br><h3>  La partie en fer du modem </h3><br>  Donc, avec la structure du signal, tout est clair, comment le recevoir trop clairement.  La petite chose est d'apprendre √† √©mettre un signal dans l'eau et √† le recevoir de l'eau. <br><br>  Si vous n'avez pas encore d'antennes sonar, alors il est temps de les faire dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notre tutoriel pr√©c√©dent</a> . <br><br>  Je suis rest√© avec eux √† partir de ce moment-l√†, alors je saute cette √©tape. <br><br>  Nous connectons l'antenne destin√©e √† la transmission √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la carte d'amplificateur avec aliexpress</a> .  Pour plusieurs dizaines de m√®tres (voire des centaines), cela nous suffit.  Il n'y a pas d'astuces ici - la sortie de la carte son de l'ordinateur portable va √† l'entr√©e de l'amplificateur, qui est aliment√© par une batterie plomb-acide de 12 volts 4 Ah.  Notre antenne de transmission hydroacoustique d'un tweeter pi√©zo√©lectrique est connect√©e √† la sortie.  Dans mon cas, cela ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/za/17/0e/za170ex4xgid-pacrxgcevfkmm8.jpeg"><br><br><img src="https://habrastorage.org/webt/_8/0u/jz/_80ujzh-1afojo46fevq6egccvg.jpeg"><br><br>  Sur la photo ci-dessus, sur l'√©cran, il y a un petit spoiler pour le prochain article.  La prochaine fois sur les m√™mes glandes, nous essaierons √† nouveau de transmettre le son "vid√©o" √† travers l'eau, mais d'une mani√®re compl√®tement diff√©rente de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">derni√®re fois</a> . <br><br>  Avec une antenne de r√©ception, c'est un peu plus compliqu√©.  Bien que les tweeters piezo soient tr√®s sensibles, ce n'est toujours pas suffisant.  Nous devrons assembler une carte de pr√©amplificateur avec un filtre sur la bande 5-35 kHz. <br>  Le gain que nous prenons est de 1000. <br><br>  Le circuit, la conception de la carte de circuit imprim√© et la liste des composants du pr√©amplificateur sont sur notre GitHub: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">circuit</a> , pistes - <a href="">couche sup√©rieure</a> et <a href="">couche inf√©rieure</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BOM</a> . <br><br>  La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">technologie</a> LUT <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">a</a> √©t√© discut√©e des centaines de fois, mais faisons aussi notre part. <br><br><div class="spoiler">  <b class="spoiler_title">Photo de processus</b> <div class="spoiler_text">  Donc, nous prenons un magazine appropri√©, nous n'avions que celui-ci √† port√©e de main: <br><br><img src="https://habrastorage.org/webt/wu/72/zy/wu72zyy3twxj-iovwsbu1oplf0o.jpeg"><br><br>  Nous en prenons quelques pages et imprimons les couches √† l'aide d'une imprimante laser. <br><br><img src="https://habrastorage.org/webt/aq/c8/of/aqc8of9rwkf_jv4df7o6gb4zqt0.jpeg"><br><br>  Combinez avec des aiguilles et de la colle d'un c√¥t√©, comme indiqu√© sur la photo: <br><br><img src="https://habrastorage.org/webt/gr/g5/-l/grg5-lzyj3bpl574on7uycmo7xk.jpeg"><br><br>  Avant d'utiliser le fer, nous mouillons le toner avec de l'alcool isopropylique: <br><br><img src="https://habrastorage.org/webt/7k/sp/ru/7ksprumtearv6eixwlfndk9fnoo.jpeg"><br><br>  Repasser √† travers une feuille A4 pli√©e quatre fois: <br><br><img src="https://habrastorage.org/webt/ut/e5/xu/ute5xu86kbik8c542za18_omuna.jpeg"><br><br>  Faire tremper dans l'eau chaude sous le robinet: <br><br><img src="https://habrastorage.org/webt/rg/lg/98/rglg989tlqi-zotwzq5gwkadbo4.jpeg"><br><br>  Et nous lavons le reste du papier.  Apr√®s quoi nous obtenons une pi√®ce pr√™te pour la gravure: <br><br><img src="https://habrastorage.org/webt/dk/lv/jc/dklvjcuntfws7eg27fr4soukldo.jpeg"><br><br>  Nous coupons l'exc√©dent √† l'aide de ciseaux √† m√©tal ou √† qui c'est plus pratique. <br><br>  Nous empoisonnons dans le chlorure ferrique.  Surtout pour l'article, nous en avons jet√© frais, il s'est av√©r√© si pointilleux que des bulles viennent activement de la future planche: <br><br><img src="https://habrastorage.org/webt/wc/nq/ri/wcnqrifmzqht9luucn3lt0xf1uc.jpeg"><br><br>  En cons√©quence, apr√®s gravure et lavage du toner, nous obtenons un tel produit semi-fini: <br><br><img src="https://habrastorage.org/webt/vk/de/k7/vkdek7hiqs1p3van-coacl4gkk4.jpeg"><br><br><img src="https://habrastorage.org/webt/ks/x-/hd/ksx-hd6m6qdijzicf1rwgnhwoy4.jpeg"><br><br>  Apr√®s avoir soud√© les composants et lav√©, la carte ressemble √† ceci. <br><br><img src="https://habrastorage.org/webt/wn/x4/fd/wnx4fd56r1newq2ew6cjr1hmlaa.jpeg"><br></div></div><br>  Et cela ressemble √† l'assemblage de la pi√®ce de r√©ception.  L'alimentation est fournie par la m√™me batterie au plomb de 12 volts: <br><br><img src="https://habrastorage.org/webt/mc/03/dj/mc03djslty9veqpq1aqsllzbckq.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Avertissement sur les petits filtres</b> <div class="spoiler_text">  Si le lecteur veut changer de bande, nous proposons de recompter le filtre de 8√®me ordre mont√© sur un ampli op bon march√© 4 canaux TL084C (DA2 dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sch√©ma</a> ), les r√©sistances R10-R13, R15-R23 et les condensateurs C5-C8, C11, C12, C14 et C15. <br><br>  Juste au cas o√π, voici la r√©ponse en fr√©quence de l'impl√©mentation actuelle du filtre: <br><br><img src="https://habrastorage.org/webt/bi/pd/dy/bipddyy5zubboog4qimejpdxvjw.png"><br><br>  Et voici un autre <a href="">projet</a> pour ce filtre cr√©√© dans l'application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qucs</a> <br></div></div><br><h3>  Exp√©riences et tests </h3><br>  Pour se connecter √† un ordinateur portable, nous utilisons un Jack 3,5 mm ordinaire, la pointe est un signal, celui du milieu n'est pas connect√©, la terre - <s>poussi√®re √† poussi√®re</s> au sol.  Toutes les amplifications et tous les effets du microphone doivent √™tre d√©sactiv√©s, et le volume devra jouer pour atteindre le niveau optimal.  La cadence doit se produire lorsque vous touchez l'antenne connect√©e au pr√©amplificateur avec votre doigt et que vous la caressez l√©g√®rement. <br><br>  Si vous mettez simplement une pi√®ce sur une autre sans amplificateur ni pr√©amplificateur et que vous les connectez √† l'entr√©e et √† la sortie audio, alors tout fonctionne parfaitement.  Vous trouverez ci-dessous une section du signal et vous pouvez m√™me d√©terminer √† l'≈ìil nu o√π se trouvent les valeurs des bits: <br><br><img src="https://habrastorage.org/webt/ft/ny/jm/ftnyjmiapa0uoyeuyhjo2ztaeji.png"><br><br>  Le signal lui-m√™me est affich√© en bleu, la diff√©rence entre les valeurs actuelles et pr√©c√©dentes de l'amplitude (avant) en rouge, et la diff√©rence entre les valeurs pr√©c√©dentes et actuelles (d√©clin) en vert.  Vous pouvez facilement ¬´d√©moduler¬ª cette partie de la pr√©misse: 1 0 0 0 1 1 0. Notre z√©ro est deux fois plus long que l'unit√©, et la dur√©e de l'intervalle de garde est √©gale √† la dur√©e de z√©ro. <br><br>  De plus, √©galement sans amplificateur et pr√©amplificateur, nous abaissons nos antennes dans un r√©servoir m√©tallique, aux dimensions 3x1,5x1,5.  Nous l'avons dans le laboratoire, et nous avons √©tabli une r√®gle selon laquelle nous ne ferons aucune communication si elle n'est pas en mesure de travailler dans ce r√©servoir.  Le fait est que dans un volume d'√©nergie aussi ferm√©, il n'y a nulle part o√π aller - le son est merveilleusement et √† plusieurs reprises r√©fl√©chi par les parois m√©talliques et au point de r√©ception, la bouillie est obtenue.  Et √©tant donn√© que nous v√©rifions g√©n√©ralement les appareils pr√™ts √† l'emploi avec une √©nergie calcul√©e pour des milliers de m√®tres, vous pouvez imaginer ce qui se passe l√†-bas. <br><br>  Par exemple, deux de nos modems <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RedLINE fonctionnent de</a> mani√®re stable dans ce r√©servoir uniquement √† une distance ne d√©passant pas deux m√®tres, et deux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">uWAVE</a> fonctionnent de mani√®re stable √† environ 1 m√®tre.  Alors que le premier en eau libre fonctionne jusqu'√† 8000 m√®tres, et le second - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jusqu'√† un kilom√®tre</a> . <br>  Bien s√ªr, tous les produits commerciaux n'utilisent pas de tels sch√©mas de modulation primitifs, qui sont discut√©s dans l'article et sont beaucoup plus compliqu√©s, mais maintenant il est important pour nous de comprendre les bases et de faire quelque chose utilement avec nos mains. <br><br>  En g√©n√©ral, nous abaissons les antennes dans le r√©servoir √† une distance d'environ 50 centim√®tres et nous obtenons d√©j√† quelque chose de beaucoup moins beau qu'avec le contact direct des antennes: <br><br><img src="https://habrastorage.org/webt/zy/my/o9/zymyo9ptbahm3xh60dsv-5hz1mg.png"><br><br>  Bien qu'un intervalle de garde beaucoup plus long soit utilis√© ici, il est toujours visible que l'√©cho marche presque jusqu'au bit suivant, les fronts et surtout les creux sont tr√®s flous.  Mais vous pouvez toujours d√©terminer le contenu du message: 1 0 0 0 1 1 0 <br><br>  Dans les deux cas, j'ai envoy√© le message ¬´123¬ª et ces sept bits appartiennent au symbole de l'unit√©. <br>  Cela ressemblait √† quelque chose comme √ßa, puis l'interface a √©t√© l√©g√®rement refaite <br><br><img src="https://habrastorage.org/webt/om/ym/sw/omymswxytjqy_l6uvzbijcr1pac.png"><br><br>  Depuis l'√©cran ci-dessus, on peut voir qu'avec ces param√®tres, la transmission du message ¬´Bonjour, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">habr</a> !!!  :-) "compos√© de 19 octets prend 9,132 secondes, c'est-√†-dire que la vitesse de transmission √©tait de 16,6 bits / s.  Soit dit en passant, pour que le modem fonctionne dans notre r√©servoir, nous avons d√ª augmenter l'intervalle de garde afin que la vitesse de transmission tombe √† ~ 3 bit / s. <br><br>  Nous avons v√©rifi√© le travail fait maison dans la piscine, o√π il gagnait r√©guli√®rement 10 m√®tres. <br><br><img src="https://habrastorage.org/webt/bq/jh/_n/bqjh_nwss-l-zjzi5hj5m7xru44.jpeg"><br><br>  Nous nous sommes √©galement adonn√©s au travail fait maison sur l'√©tang.  J'ai utilis√© un hydrophone actif de conception tr√®s similaire √† celui propos√© dans l'article, mais au lieu d'un tweeter pi√©zo√©lectrique, un capteur des capteurs de stationnement a √©t√© utilis√©, la batterie y √©tait mont√©e dans une bobine sur laquelle le c√¢ble √©tait enroul√©: <br><br><img src="https://habrastorage.org/webt/be/hk/jm/behkjmbi2kz0_sxallhxjwyoqvc.jpeg"><br><br><img src="https://habrastorage.org/webt/yu/ke/-w/yuke-wfwsgcozt5pg77d8g4cic8.png"><br><br>  L'antenne du r√©cepteur et de l'√©metteur descend directement du rivage, la profondeur y passe fortement de 0,5 √† 2 m√®tres.  Curieusement, dans l'exp√©rience montr√©e sur la photo ci-dessus, les pires conditions √©taient, la distance n'√©tait que d'environ 5 m√®tres - c'√©tait g√©n√©ralement le r√©glage initial.  Sur les 20 messages transmis, 3 octets chacun, dans six d'entre eux, un octet a √©t√© battu. <br><br>  Ensuite, lorsque nous avons connect√© le r√©cepteur √† un deuxi√®me ordinateur portable et l'avons d√©plac√© de l'autre c√¥t√© de l'√©tang (distance d'environ 30 m√®tres), la transmission s'est beaucoup mieux pass√©e - il n'y a eu que quelques erreurs avec 40 messages d'une taille de 3 √† 13 octets. <br><br><img src="https://habrastorage.org/webt/wp/bz/6i/wpbz6i4wngzg4fdgfza2bxkr2h0.png"><br><br>  Sur la photo suivante sur la carte, les endroits o√π se trouvaient les antennes sont visibles. <br><br><img src="https://habrastorage.org/webt/-i/_u/lk/-i_ulk8o3bsyu4ni7um5tyky73c.png"><br><br><h3>  Conclusion et recherches compl√©mentaires </h3><br>  Comme promis, pour quelques roubles, nous avons assembl√© un appareil de travail.  Bien que sa valeur pratique soit douteuse, le processus de fabrication et de r√©glage sur un √©tang sera tr√®s utile pour les d√©butants.  En utilisant la m√©thode de d√©tection de porteuse d√©crite, il est tout √† fait possible de proposer diff√©rents syst√®mes de navigation simples pour un usage amateur, et ce qui est particuli√®rement agr√©able, la complexit√© de calcul vous permet de mettre en ≈ìuvre la m√©thode sur un simple microcontr√¥leur. <br><br>  Afin de ne pas √™tre infond√© en ce qui concerne la construction de syst√®mes de navigation sur des signaux simples, jetez un ≈ìil au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">travail int√©ressant</a> dans lequel ils ont construit un syst√®me de navigation √† longue port√©e √† part enti√®re.  Dans ce syst√®me, la position du doigt est d√©termin√©e, ce qui transmet p√©riodiquement sa profondeur.  La valeur de profondeur est cod√©e par la distance entre deux impulsions simples √† une certaine fr√©quence.  Alors oui, oui, les pots ne sont pas br√ªl√©s par les dieux, la route sera accabl√©e par le promeneur, patience et travail, √©tude, √©tude, √©tude - c'est tout. <br><br>  Peut-√™tre que si nous avons le temps, nous ferons un projet de bricolage pour positionner un pinger autonome √©mettant des signaux simples.  Nous avons d√©j√† fait quelque chose de similaire, mais pas de bricolage, sur la base de nos modems <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">uWAVE</a> , dont nous avons m√™me essay√© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tourner une vid√©o</a> .  Il sera tr√®s int√©ressant d'entendre vos opinions √† ce sujet - il est tr√®s important d'avoir la confirmation que vous faites quelque chose qui n'est pas en vain. <br><br>  N√©anmoins, en revenant au sujet principal, nous notons ce qui pourrait √™tre am√©lior√© dans le sch√©ma propos√©: <br><br><ul><li>  rendre le calcul du seuil adaptatif </li><li>  analyser automatiquement la largeur des signaux </li><li>  essayez d'utiliser diff√©rentes longueurs pour diff√©rentes combinaisons de bits </li><li>  <s>resserrer le</s> codage <s>correcteur d'erreurs</s> </li><li>  transf√©rez le tout √† Arduino </li><li>  le volume et le seuil doivent √™tre s√©lectionn√©s pendant longtemps et fastidieux, il serait donc bien d'ajouter AGC au pr√©amplificateur </li></ul><br>  Lors de cette r√©union, je d√©clarerai clos, et si vous √™tes int√©ress√© par le sujet, voici une liste de nos articles pr√©c√©dents: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GPS sous-marin √† partir de z√©ro par an</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GPS sous-marin sur un robot sous-marin: exp√©rience</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous avons fabriqu√© le plus petit modem sonar au monde</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sur l'effet des cyanobact√©ries sur les fonctions vocales du pr√©sident</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Faire une simple antenne sonar √† la poubelle</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Session de transmission vid√©o du son √† travers l'eau avec exposition</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GPS sous-marin sur deux √©metteurs-r√©cepteurs</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Navigation sous l'eau: Bearing Not Bearing - vous √™tes vou√© au succ√®s</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GPS sous-marin: suite</a> <br><br><h3>  PS </h3><br>  Comme toujours, nous sommes heureux d'entendre des commentaires et suggestions, de bonnes critiques et des acclamations) <br><br><h3>  PPS </h3><br>  Ne retirez pas les glandes loin - la prochaine fois, nous les utiliserons √† nouveau pour transmettre la "vid√©o" √† travers l'eau. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451800/">https://habr.com/ru/post/fr451800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451790/index.html">Les dangers de la collecte de donn√©es en jeu</a></li>
<li><a href="../fr451792/index.html">Quatre renifleurs javascript qui vous pi√®gent dans les boutiques en ligne</a></li>
<li><a href="../fr451794/index.html">Pixels de retrait de texture</a></li>
<li><a href="../fr451796/index.html">√âcrire une extension de navigateur s√©curis√©e</a></li>
<li><a href="../fr451798/index.html">Migration des donn√©es avec mongoDB et Spring Boot</a></li>
<li><a href="../fr451802/index.html">La communaut√© .Net de Raiffeisenbank invite √† la diffusion UPD mitap</a></li>
<li><a href="../fr451806/index.html">R√©sum√© iOS n ¬∞ 5 (27 avril - 16 mai)</a></li>
<li><a href="../fr451812/index.html">Maintenant, les bons d√©veloppeurs sont mesur√©s par les vues et les abonn√©s - et c'est mauvais</a></li>
<li><a href="../fr451814/index.html">RBKmoney Payments under the hood - infrastructure de plateforme de paiement</a></li>
<li><a href="../fr451816/index.html">Fuzzing de style 2000 sur les applications Windows 10 modernes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>