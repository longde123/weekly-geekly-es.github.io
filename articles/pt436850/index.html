<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèº‚Äçü§ù‚Äçüßëüèº ü¶è ü§¥üèª Erros comuns ao escrever testes de unidade. Palestra Yandex üëàüèΩ ü¶É üññüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se voc√™ domina uma pequena lista de erros t√≠picos que ocorrem ao escrever testes de unidade, pode at√© gostar de escrev√™-los. Hoje, o chefe do grupo de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erros comuns ao escrever testes de unidade. Palestra Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/436850/">  Se voc√™ domina uma pequena lista de erros t√≠picos que ocorrem ao escrever testes de unidade, pode at√© gostar de escrev√™-los.  Hoje, o chefe do grupo de desenvolvimento Yandex.Browser para Android, Konstantin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">kzaikin</a> Zaikin, compartilhar√° sua experi√™ncia com os leitores da Habr. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ZyGZjpxF9Fo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Eu tenho um relat√≥rio pr√°tico.  Espero que isso beneficie todos voc√™s - aqueles que j√° est√£o escrevendo testes de unidade, e aqueles que est√£o apenas pensando em escrever, e aqueles que est√£o tentando e que n√£o tiveram sucesso. <a name="habracut"></a><br><br>  Temos um projeto bem grande.  Um dos maiores projetos m√≥veis da R√∫ssia.  Temos muito c√≥digo, muitos testes.  Os testes s√£o perseguidos em cada solicita√ß√£o de pool, eles n√£o caem ao mesmo tempo. <br><br>  Quem sabe que cobertura de teste ele tem no projeto?  Zero, tudo bem.  Quem tem testes de unidade no projeto?  E quem acredita que testes de unidade n√£o s√£o necess√°rios?  N√£o vejo nada de errado nisso, h√° pessoas sinceramente convencidas disso, e minha hist√≥ria deve ajud√°-las a se convencer disso. <br><br>  Felizmente, milhares de testes ecol√≥gicos - n√£o viemos imediatamente.  N√£o h√° bala de prata, e a principal id√©ia do meu relat√≥rio na tela: <br><br><img src="https://habrastorage.org/webt/w1/0y/wm/w10ywme1xumvi5asap7gp0a5iee.jpeg"><br><br>  O ditado chin√™s est√° escrito em hier√≥glifos que uma jornada de mil ou mais come√ßa com um passo.  Parece que existe um an√°logo desse ditado. <br><br>  Decidimos h√° muito tempo que precisamos melhorar nosso produto, nosso c√≥digo e estamos caminhando para isso de prop√≥sito.  Dessa maneira, encontramos muitas incha√ßos, um ancinho subaqu√°tico, e reunimos algumas cren√ßas. <br><br><img src="https://habrastorage.org/webt/ks/9z/5w/ks9z5wmzmkghfc-vireaf5rdvvg.jpeg"><br><br>  Por que precisamos de testes? <br><br>  Para que os recursos antigos n√£o caiam quando introduzimos novos.  Para ter um selo no GitHub.  Para refatorar os recursos existentes - um pensamento profundo, ele precisa ser revelado para aqueles que n√£o escrevem testes.  Para que os recursos existentes n√£o caiam durante a refatora√ß√£o, nos protegeremos com testes.  Para o chefe enviar uma solicita√ß√£o de pool, sim. <br><br>  Minha opini√£o - por favor, n√£o a associe √† opini√£o da minha equipe - de que os testes nos ajudam.  Eles permitem que voc√™ execute seu c√≥digo sem coloc√°-lo em produ√ß√£o, sem instal√°-lo em dispositivos, voc√™ o inicia e executa muito rapidamente.  Voc√™ pode executar todos os casos de esquina que voc√™ n√£o obt√©m na vida √∫til do dispositivo e na produ√ß√£o, e seu testador n√£o os encontrar√°.  Mas voc√™, como desenvolvedor, ir√° invent√°-los, verific√°-los e corrigir erros em um est√°gio inicial. <br><br>  Muito importante: os testes informam como, de acordo com o desenvolvedor, o c√≥digo deve funcionar e o que, de acordo com o desenvolvedor, seus m√©todos devem fazer.  Estes n√£o s√£o coment√°rios que se afastam e, depois de um tempo, os √∫teis se tornam prejudiciais.  Acontece que nos coment√°rios uma coisa est√° escrita e o c√≥digo √© completamente diferente.  Os testes de unidade nesse sentido n√£o podem mentir.  Se o teste for verde, ele documenta o que est√° acontecendo l√°.  O teste falhou - voc√™ violou a inten√ß√£o principal do desenvolvedor. <br><br>  Comprometer contratos.  Estes n√£o s√£o contratos assinados e carimbados, mas contratos de software para comportamento de classe.  Se voc√™ refatorar, nesse caso, os contratos ser√£o violados e os testes cair√£o se voc√™ os quebrar.  Se os contratos forem salvos, os testes permanecer√£o verdes, voc√™ ter√° mais confian√ßa de que sua refatora√ß√£o est√° correta. <br><br><img src="https://habrastorage.org/webt/pr/z0/fc/prz0fclospeod5fnxeum2bi19gw.jpeg"><br><br>  Esta √© a ideia geral de todo o meu relat√≥rio.  Voc√™ pode mostrar a primeira linha e sair. <br><br>  Muitas pessoas pensam que o c√≥digo de teste √© mais ou menos, n√£o √© para produ√ß√£o, ent√£o voc√™ pode escrev√™-lo.  Eu discordo totalmente disso e acho que os testes devem ser abordados antes de tudo de forma respons√°vel, bem como o c√≥digo de produ√ß√£o.  Se voc√™ abord√°-los da mesma maneira, os testes o beneficiar√£o.  Caso contr√°rio, ser√° uma mancha. <br><br>  Mais especificamente, as duas linhas abaixo se referem a qualquer c√≥digo, ao que parece. <br><br>  BEIJO - mantenha simples, est√∫pido.  N√£o h√° necessidade de complicar.  Os testes devem ser simples.  E o c√≥digo de produ√ß√£o deve ser simples, mas os testes s√£o especialmente.  Se voc√™ tiver testes f√°ceis de ler, provavelmente ser√£o bem escritos, bem expressos, f√°ceis de testar.  Mesmo durante a solicita√ß√£o do pool, uma pessoa que analisa seus novos testes entender√° o que voc√™ queria dizer.  E se algo quebrar, voc√™ pode entender facilmente o que aconteceu. <br><br>  SECA - n√£o se repita.  Nos testes, o desenvolvedor costuma usar a t√©cnica proibida que ningu√©m parece usar na produ√ß√£o - copiar e colar.  Na produ√ß√£o de um desenvolvedor que copia e cola ativamente, eles simplesmente n√£o entendem.  Nos testes, essa √© uma pr√°tica normal, infelizmente.  N√£o h√° necessidade de fazer isso, porque - a primeira linha.  Se voc√™ escrever os testes honestamente, como um c√≥digo realmente bom, os testes ser√£o √∫teis para voc√™. <br><br>  Enquanto desenvolv√≠amos centenas de milhares de linhas de c√≥digo, escrevendo milhares de testes, coletando rakes, acumulei coment√°rios t√≠picos sobre os testes.  Sou muito pregui√ßoso e, quando fui √†s solicita√ß√µes de pool e observei os mesmos erros, com base no princ√≠pio DRY, decidi anotar esses problemas t√≠picos, e fiz isso primeiro no Wiki interno e depois publiquei cheiros pr√°ticos de teste no GitHub que voc√™ pode seguir quando voc√™ escreve testes. <br><br><img src="https://habrastorage.org/webt/oj/k1/u2/ojk1u2fjmy269sioq4vin6yylua.jpeg"><br><br>  Vou listar por pontos.  Incremente um contador em sua mente se voc√™ se lembrar de um cheiro de teste.  Se voc√™ contar at√© cinco, poder√° levantar a m√£o e gritar "Bingo!"  E no final, eu me pergunto quem contou quanto.  Meu contador ser√° igual ao n√∫mero de pontos, eu mesmo os colecionei. <br><br><img src="https://habrastorage.org/webt/nm/pw/8n/nmpw8nk89hl6gmggyims0llmn28.jpeg"><br><h5>  <sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link do GitHub</a></sub></sup> </h5><br>  A coisa mais dif√≠cil de programar que voc√™ conhece.  E nos testes isso √© realmente importante.  Se voc√™ n√£o nomear bem o teste, provavelmente n√£o poder√° formular o que o teste verifica. <br><br>  Os seres humanos s√£o criaturas bastante simples, s√£o facilmente presos em nomes.  Portanto, pe√ßo que voc√™ chame bem os testes.  Formule um teste para verificar e seguir regras simples. <br><br><h4>  no_action_or_assertion </h4><br>  Se o nome do teste n√£o contiver uma descri√ß√£o do que o teste verifica, por exemplo, voc√™ tem a classe Controller e escreve o teste testController, o que voc√™ verifica?  O que esse teste deve fazer?  Muito provavelmente, nada ou muitas coisas para verificar.  Nem um nem outro nos conv√©m.  Portanto, no nome do teste, voc√™ precisa escrever o que verificamos. <br><br><h4>  long_name </h4><br>  Voc√™ n√£o pode ir para o outro extremo.  O nome do teste deve ser curto o suficiente para que uma pessoa possa analis√°-lo facilmente.  Nesse sentido, o Kotlin √© √≥timo porque permite escrever nomes de teste entre aspas com espa√ßos em ingl√™s normal.  Eles s√£o mais f√°ceis de ler.  Mas ainda assim, nomes longos s√£o cheiro. <br><br>  Se o nome do seu teste for muito longo, voc√™ provavelmente colocar√° muitos m√©todos de teste em uma classe de teste e precisar√° esclarecer o que est√° verificando.  Nesse caso, voc√™ precisa dividir sua classe de teste em v√°rias.  N√£o precisa ter medo disso.  Voc√™ ter√° um nome de classe de teste que verifica o nome do seu c√≥digo de produ√ß√£o e haver√° nomes curtos de teste. <br><br><h4>  older_prefix </h4><br>  Isso √© atavismo.  Anteriormente, em Java, todos testavam usando JUnit, onde at√© a quarta vers√£o havia um acordo de que os m√©todos de teste deveriam come√ßar com a palavra teste.  Aconteceu, todo mundo ainda chama assim.  Mas h√° um problema, em ingl√™s a palavra test √© o verbo "check".  As pessoas s√£o facilmente capturadas nessa armadilha e n√£o escrevem mais nenhum outro verbo.  Escreva testController.  √â f√°cil verificar a si mesmo: se voc√™ n√£o escreveu um verbo, o que sua classe de teste deveria fazer, provavelmente voc√™ n√£o verificou algo, n√£o o escreveu bem o suficiente.  Portanto, sempre solicito que voc√™ remova a palavra teste dos nomes dos m√©todos de teste. <br><br>  Eu digo coisas muito simples, mas, curiosamente, elas ajudam.  Se os testes forem bem-chamados, provavelmente sob o cap√¥ eles ficar√£o bem.  √â muito simples <br><br><img src="https://habrastorage.org/webt/1e/_h/b3/1e_hb3te9onmzprsqcvilm2i_cc.jpeg"><br><br>  Na verdade, eu li ids de cheiros de teste como no GitHub.  O link est√° abaixo, voc√™ pode andar e usar. <br><br><h4>  multiple_asserts </h4><br>  No m√©todo de teste, existem muitas afirma√ß√µes.  Ent√£o, talvez ou n√£o?  Talvez.  Isso √© bom ou ruim?  Eu acho que isso √© muito ruim.  Se voc√™ escreveu v√°rias asser√ß√µes em um m√©todo de teste, verifica v√°rias instru√ß√µes.  Se voc√™ testar seu teste e a primeira afirma√ß√£o cair, o teste alcan√ßar√° a segunda afirma√ß√£o?  N√£o chegar√°.  Voc√™ j√° ap√≥s a queda de sua montagem em algum lugar do IC consegue que o teste ca√≠sse, v√° consertar algo, preencha novamente, ele cair√° na pr√≥xima afirma√ß√£o.  Poderia muito bem ser. <br><br>  Nesse caso, seria muito mais interessante se voc√™ usasse esse m√©todo de teste em v√°rios, e todos os m√©todos com v√°rias afirma√ß√µes ca√≠ssem ao mesmo tempo, porque seriam lan√ßados independentemente um do outro. <br><br>  Mais algumas asser√ß√µes podem mascarar as diferentes a√ß√µes que s√£o executadas com a classe de teste.  Eu recomendo escrever um teste - um afirmar.  Os ativos podem ser bastante complicados.  Meu colega, no primeiro relat√≥rio, demonstrou um c√≥digo em que ele usou a excelente afirma√ß√£o de que a constru√ß√£o e o combinador.  Eu realmente amo combates no JUnit, ent√£o voc√™ pode us√°-lo tamb√©m.  Para o leitor de teste, acaba sendo apenas uma declara√ß√£o curta.  O GitHub tem exemplos de todos esses odores e como corrigi-los.  H√° um exemplo de c√≥digo incorreto e algum c√≥digo v√°lido.  Tudo isso √© feito na forma de um projeto que voc√™ pode baixar, abrir, compilar e executar todos os testes. <br><br><h4>  many_tests_in_one </h4><br>  O pr√≥ximo cheiro est√° intimamente relacionado ao anterior.  Voc√™ faz algo com o sistema - voc√™ faz uma afirma√ß√£o.  Fazendo outra coisa com o sistema, algumas opera√ß√µes longas - fazendo uma afirma√ß√£o - fazendo outra coisa.  De fato, voc√™ simplesmente viu v√°rios m√©todos e obt√©m bons e s√≥lidos m√©todos de teste. <br><br><h4>  repeating_setup </h4><br>  Isso se refere √† verbosidade.  Se voc√™ tem uma classe de teste e cada m√©todo de teste executa os mesmos m√©todos no in√≠cio. <br><br>  Uma classe de teste na qual os mesmos m√©todos s√£o executados no in√≠cio.  Parece um pouco, mas em todo m√©todo de teste esse lixo est√° presente.  E se √© comum a todos os m√©todos de teste, por que n√£o lev√°-lo ao construtor ou bloco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Antes</a> ou Bloco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Antes de</a> Cada na JUnit 5. Se voc√™ fizer isso, a legibilidade de cada m√©todo melhorar√°, al√©m de voc√™ se livrar do pecado SECO.  Tais testes s√£o mais f√°ceis de manter e mais f√°ceis de ler. <br><br><img src="https://habrastorage.org/webt/jz/e6/pt/jze6ptgcma9s-f62hobgcoj5jbu.jpeg"><br><br>  A confiabilidade dos testes √© muito importante.  Existem sinais pelos quais se pode determinar que o teste ir√° chorar, seja verde ou vermelho.  Quando o desenvolvedor escreve, ele tem certeza de que √© verde e, por algum motivo, os testes ficam verdes ou vermelhos, o que nos d√° dor e incerteza em geral de que os testes s√£o √∫teis.  N√£o temos certeza dos testes, o que significa que n√£o temos certeza de que sejam √∫teis. <br><br><h4>  aleat√≥rio </h4><br>  Eu pr√≥prio escrevi testes que continham Math.random (), faziam n√∫meros aleat√≥rios, faziam algo com eles.  N√£o h√° necessidade de fazer isso.  Esperamos que o sistema de teste entre no sistema de teste na mesma configura√ß√£o e a sa√≠da dele tamb√©m deve ser a mesma.  Portanto, em testes de unidade, por exemplo, voc√™ nunca precisa executar nenhuma opera√ß√£o com a rede.  Como o servidor pode n√£o responder, pode haver hor√°rios diferentes, outra coisa. <br><br>  Se voc√™ precisar de um teste que funcione com a rede, fa√ßa um proxy local, qualquer coisa, mas em nenhum caso v√° para uma rede real.  Isso √© o mesmo aleat√≥rio.  E, claro, voc√™ n√£o pode usar dados aleat√≥rios.  Se voc√™ precisar fazer alguma coisa, fa√ßa alguns exemplos com condi√ß√µes de contorno, com m√°s condi√ß√µes, mas elas devem ser codificadas. <br><br><h4>  tread_sleep </h4><br>  Um problema cl√°ssico que os desenvolvedores enfrentam ao tentar testar algum tipo de c√≥digo ass√≠ncrono.  √â que fiz algo no teste e preciso esperar at√© que seja conclu√≠do.  Como fazer?  Thread.sleep (), √© claro. <br><br>  H√° um problema.  Quando voc√™ desenvolveu seu teste, por exemplo, em algumas m√°quinas de escrever, ele funciona a certa velocidade.  Voc√™ executa os testes em outra m√°quina.  E o que acontecer√° se o seu sistema n√£o conseguir funcionar durante o tempo Thread.sleep ()?  O teste fica vermelho.  Isso √© inesperado.  Portanto, a recomenda√ß√£o aqui √© que, se voc√™ estiver executando opera√ß√µes ass√≠ncronas, n√£o as teste.  Quase qualquer opera√ß√£o ass√≠ncrona pode ser implantada para que voc√™ tenha algum tipo de mecanismo condicional que forne√ßa opera√ß√£o ass√≠ncrona e um bloco de c√≥digo executado de forma s√≠ncrona.  Por exemplo, o AsyncTask possui um bloco de c√≥digo executado de forma s√≠ncrona.  Voc√™ pode test√°-lo facilmente de forma s√≠ncrona, sem nenhum assincronismo.  N√£o h√° necessidade de testar o pr√≥prio AsyncTask, √© uma classe de estrutura, por que test√°-lo?  Suporte e sua vida ser√° mais f√°cil. <br><br>  Thread.sleep () √© muito doloroso.  Al√©m de piorar a confiabilidade dos testes, pois permite que eles chorem por causa de diferentes tempos nos dispositivos, isso tamb√©m diminui a execu√ß√£o dos testes.  Quem gostaria que seus testes de unidade, que deveriam ser executados em milissegundos, fossem executados por cinco segundos, porque eu coloquei o sono em marcha? <br><br><h4>  modify_global </h4><br>  O cheiro t√≠pico √© que alteramos algum tipo de vari√°vel est√°tica global no in√≠cio do teste para verificar se nosso sistema est√° funcionando corretamente, mas n√£o retornamos no final.  Ent√£o, temos uma situa√ß√£o interessante: na m√°quina, o desenvolvedor executou os testes em uma sequ√™ncia, primeiro verificou a vari√°vel global com o valor padr√£o, depois, no teste, ele a alterou e depois fez outra coisa.  Ambos os testes s√£o verdes.  E no CI, aconteceu que os testes come√ßaram na ordem inversa.  E um ou ambos os testes ser√£o vermelhos, embora todos sejam verdes. <br><br>  Voc√™ precisa limpar depois de si mesmo.  Regras do escoteiro neste sentido: alterou a vari√°vel global - retorne ao estado original.  Melhor ainda, verifique se os estados globais n√£o s√£o usados.  Mas este √© um pensamento mais profundo.  √â sobre o fato de que os testes √†s vezes destacam defeitos na arquitetura.  Se tivermos que mudar estados globais e retorn√°-los ao estado original para escrever testes, estamos todos bem na nossa arquitetura?  N√≥s realmente precisamos de vari√°veis ‚Äã‚Äãglobais, por exemplo?  Como regra, voc√™ pode ficar sem eles injetando algumas classes de contextos ou algo assim, para que voc√™ possa reinicializar, injetar e reinicializ√°-los sempre que no teste. <br><br><h4>  @VisibleForTesting </h4><br>  Teste de cheiro para avan√ßado.  A necessidade de usar tal coisa n√£o surge no primeiro dia, como regra.  Voc√™ j√° testou alguma coisa e precisou traduzir a classe em algum estado espec√≠fico.  E voc√™ se torna um backdoor.  Voc√™ tem uma classe de produ√ß√£o e cria um m√©todo espec√≠fico que nunca ser√° chamado em produ√ß√£o e, por meio dela, injeta algo na classe ou altera seu estado.  Assim, quebrando maliciosamente o encapsulamento.  Na produ√ß√£o, sua classe funciona de alguma forma, mas nos testes, na verdade, √© uma classe diferente, voc√™ se comunica com ela atrav√©s de outras entradas e sa√≠das.  E aqui voc√™ pode obter uma situa√ß√£o em que voc√™ altera a produ√ß√£o, mas os testes n√£o percebem.  Os testes continuam a atravessar a porta dos fundos e n√£o notaram que, por exemplo, as exce√ß√µes come√ßaram a disparar no construtor, uma vez que passam por outro construtor. <br><br>  Em geral, voc√™ deve testar suas classes com as mesmas entradas e sa√≠das da produ√ß√£o.  N√£o deve haver acesso a nenhum m√©todo apenas para testes. <br><br><img src="https://habrastorage.org/webt/dy/sf/s0/dysfs0rl9n6ftff4nt3ftwpy988.jpeg"><br><br>  Quantos de nossos 15 mil testes s√£o realizados?  Cerca de 20 minutos, a cada solicita√ß√£o de pool, no Team City, os desenvolvedores s√£o for√ßados a esperar.  S√≥ porque 15 mil s√£o muitos testes.  E nesta se√ß√£o, compilei cheiros que atrasam os testes.  Embora o thread_sleep j√° estivesse l√°. <br><br><h4>  desnecessary_android_test </h4><br>  O Android tem testes de instrumenta√ß√£o, eles s√£o lindos, executados em um dispositivo ou emulador.  Isso elevar√° seu projeto completamente, de verdade, mas eles s√£o muito lentos.  E para eles voc√™ precisa at√© criar um emulador inteiro.  Mesmo se voc√™ imaginar que possui um emulador levantado no CI - coincide apenas com um -, a execu√ß√£o do teste no emulador levar√° muito mais tempo do que na m√°quina host, por exemplo, usando Robolectric.  Embora existam outros m√©todos.  Essa √© uma estrutura que permite trabalhar com classes da estrutura do Android na m√°quina host, em Java puro.  N√≥s o usamos bastante ativamente.  Anteriormente, o Google era um pouco legal sobre isso, mas agora os pr√≥prios googlers falam sobre isso em v√°rios relat√≥rios, √© recomendado para uso. <br><br><h4>  desnecessary_robolectric </h4><br>  A estrutura Android do Robolectric √© emulada.  N√£o est√° completo l√°, embora a implementa√ß√£o seja mais longe, mais completa.  √â um Android quase real, rodando apenas no seu desktop, laptop ou CI.  Mas tamb√©m n√£o precisa ser usado em qualquer lugar.  Robolectric n√£o √© gratuito.  Se voc√™ tem um teste que voc√™ heroicamente transferiu da instrumenta√ß√£o Android para o Robolectric, voc√™ deve pensar - talvez v√° ainda mais longe, se livrar do Robolectric, transform√°-lo no teste JUnit mais simples?  Os testes robol√©tricos levam tempo para inicializar, tentar carregar recursos, inicializar sua atividade, aplicativo e tudo mais.  Isso leva algum tempo.  Isso n√£o √© um segundo, s√£o milissegundos, √†s vezes dezenas e centenas.  Mas quando existem muitos testes, mesmo isso importa. <br><br>  Existem t√©cnicas que se livram do Robolectric.  Voc√™ pode isolar seu c√≥digo por meio de interfaces, agrupando toda a parte da plataforma com interfaces.  Depois, haver√° apenas um teste de host JUnit.  O JUnit na m√°quina host √© muito r√°pido, h√° uma quantidade m√≠nima de sobrecarga; esses testes podem ser executados aos milhares e dezenas de milhares; eles executar√£o um minuto, alguns minutos.  Infelizmente, nossos testes s√£o executados por um longo tempo porque temos muitos testes de instrumenta√ß√£o Android, porque temos uma parte nativa no navegador e somos for√ßados a execut√°-los em um emulador ou dispositivo real.  Por que tanto tempo. <br><br>  Eu n√£o vou mais aborrecer voc√™.  Quantos cheiros voc√™ tem?  At√© agora, sete no m√°ximo.  Inscreva-se no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">canal</a> , coloque as estrelas. <br><br><img src="https://habrastorage.org/webt/ph/cs/52/phcs52po2jsf1lbjumu1um2e3ha.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436850/">https://habr.com/ru/post/pt436850/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436838/index.html">Entendendo redes neurais convolucionais atrav√©s de visualiza√ß√µes no PyTorch</a></li>
<li><a href="../pt436840/index.html">O caminho do brilho para a neuroci√™ncia: um podcast tem√°tico sobre carreiras em marketing de m√≠dia e conte√∫do</a></li>
<li><a href="../pt436842/index.html">Solu√ß√£o Veeam para backup e recupera√ß√£o de m√°quinas virtuais na plataforma Nutanix AHV. Parte 2</a></li>
<li><a href="../pt436846/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n ¬∞ 348 (14-20 de janeiro de 2019)</a></li>
<li><a href="../pt436848/index.html">NSA anuncia lan√ßamento de ferramenta interna para engenharia reversa</a></li>
<li><a href="../pt436852/index.html">Abrandar para impulsionar o desenvolvimento</a></li>
<li><a href="../pt436854/index.html">Rust 1.32 Release</a></li>
<li><a href="../pt436856/index.html">Plano de desenvolvimento de TI de acordo com o Minist√©rio das Comunica√ß√µes: soberania digital, blockchain em servi√ßos habitacionais e comunit√°rios, software para ‚Äúrealidade mudada‚Äù</a></li>
<li><a href="../pt436858/index.html">Esperanto, Elven e Klingon</a></li>
<li><a href="../pt436860/index.html">Dell e Alienware na CES 2019: um guia para todas as principais inova√ß√µes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>