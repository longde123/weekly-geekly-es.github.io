<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📓 👏🏽 ❎ Grundlagen der JavaScript-Engine: Allgemeine Formulare und Inline-Caching. Teil 2 🙆🏾 ☸️ 🦅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Der Kurs "Sicherheit von Informationssystemen" beginnt in zwei Wochen. Daher möchten wir heute den zweiten Teil des Artikels veröffe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grundlagen der JavaScript-Engine: Allgemeine Formulare und Inline-Caching. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/447220/"> Hallo allerseits!  Der Kurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Sicherheit von Informationssystemen"</a> beginnt in zwei Wochen. Daher möchten wir heute den zweiten Teil des Artikels veröffentlichen, dessen Veröffentlichung zeitlich auf den Start abgestimmt ist.  Den ersten Teil können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> lesen.  Also fangen wir an. <br><br>  <b>Inline-Caches (ICs)</b> <br><br>  Die Hauptidee hinter den Formularen ist das Konzept von Inline-Caches oder ICs.  Sie sind eine Schlüsselkomponente von schnellem JavaScript!  JavaScript-Engines verwenden ICs, um Informationen darüber zu speichern, wo die Eigenschaften von Objekten zu finden sind, um die Anzahl kostspieliger Suchvorgänge zu verringern. <br><br><img src="https://habrastorage.org/webt/fc/3g/jh/fc3gjhnvdedkse5o_5ql2fhous0.png"><br><a name="habracut"></a><br>  Wir haben eine <code>getX</code> Funktion, die ein Objekt als Eingabe verwendet und die <code>x</code> Eigenschaft daraus lädt: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getX</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">o</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ox; }</code> </pre> <br>  Wenn wir diese Funktion in JSC ausführen, erhalten wir den folgenden Bytecode: <br><br><img src="https://habrastorage.org/webt/jw/_j/on/jw_jongrfbf3joq7vhvn_cv9g9e.png"><br><br>  Die erste <code>get_by_id</code> lädt die Eigenschaft <code>'x'</code> aus dem ersten Argument <code>(arg1)</code> und speichert das Ergebnis in <code>loc0</code> .  Die folgende Anweisung gibt zurück, was wir in <code>loc0</code> gespeichert <code>loc0</code> . <br>  JSC bettet auch den <i>Inline-Cache</i> in die <code>get_by_id</code> , die aus zwei nicht initialisierten Slots besteht. <br><br><img src="https://habrastorage.org/webt/do/cx/b7/docxb7bxpqo3qo7fj064nhjwtjq.png"><br><br>  <code>getX</code> wir <code>getX</code> an, wir rufen <code>getX</code> zusammen mit dem Objekt <code>{ x: 'a' }</code> .  Wir wissen bereits, dass dieses Objekt die Eigenschaft <code>'x'</code> hat und seine Form den Versatz und die Attribute der Eigenschaft <code></code> speichert.  Wenn Sie die Funktion zum ersten Mal <code>get_by_id</code> , <code>get_by_id</code> die Anweisung <code>get_by_id</code> der Eigenschaft <code>'x'</code> und stellt fest, dass ihr Wert bei Offset 0 gespeichert ist. <br><br><img src="https://habrastorage.org/webt/kt/4m/9p/kt4m9pi42jd6rqkwuoenfoddd5k.png"><br><br>  Der in die Anweisung integrierte <code>get_by_id</code> IC merkt sich die Form und den Versatz, in dem die Eigenschaft gefunden wurde. <br><br><img src="https://habrastorage.org/webt/ra/25/4s/ra254sb_0qyueyxvvxdtefyug7u.png"><br><br>  Für nachfolgende IC-Starts müssen Sie nur das Formular vergleichen. Wenn es das gleiche wie zuvor ist, laden Sie einfach den Wert aus dem gespeicherten Offset.  Insbesondere wenn die JavaScript-Engine Objekte mit einem Formular sieht, das er zuvor geschrieben hat, muss er im Allgemeinen nicht mehr nach Informationen zu diesen Eigenschaften fragen. Stattdessen kann eine teure Suche nach Informationen zu Eigenschaften vollständig übersprungen werden.  Dies ist erheblich schneller, als jedes Mal nach Immobilien zu suchen. <br><br>  <b>Effiziente Speicherung von Arrays</b> <br><br>  Bei Arrays ist es üblich, Array-Indizes zu speichern.  Die Werte solcher Eigenschaften werden als Array-Elemente bezeichnet.  Es wäre verschwenderisch, Eigenschaftsattribute für jedes Element des Arrays in einem separaten Array zu speichern.  Stattdessen stützen sich JavaScript-Engines auf die Tatsache, dass in einem Array indizierte Eigenschaften standardmäßig beschreibbar, aufzählbar und konfigurierbar sind. Außerdem speichern sie Array-Elemente getrennt von anderen benannten Eigenschaften. <br><br>  Betrachten Sie das folgende Array: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> array = [ <span class="hljs-string"><span class="hljs-string">'#jsconfeu'</span></span>, ];</code> </pre> <br>  Die Engine speichert ein Array von Einheitslängen und zeigt auf eine Form, die den Versatz und die Attribute für die Eigenschaft <code>'length'</code> . <br><br><img src="https://habrastorage.org/webt/xo/iw/r5/xoiwr5gtt9bdfqahukpjmrjbazq.png"><br><br>  Dies ähnelt dem, was wir zuvor gesehen haben ... Aber wo werden die Werte der Array-Elemente gespeichert? <br><br><img src="https://habrastorage.org/webt/ee/an/vf/eeanvffuyp5vc44l4v826c0tucg.png"><br><br>  Jedes Array verfügt über einen separaten Element-Sicherungsspeicher, der alle vom Array indizierten Eigenschaftswerte enthält.  Die JavaScript-Engine muss keine Eigenschaftsattribute für die Elemente des Arrays speichern, da diese normalerweise beschreibbar, aufzählbar und konfigurierbar sind. <br><br>  Aber was passiert, wenn sie plötzlich nicht mehr für die Konfiguration verfügbar sind?  Was ist, wenn Sie die Attribute einer Eigenschaft eines Array-Elements ändern? <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Please don't ever do this! const array = Object.defineProperty( [], '0', { value: 'Oh noes!!1', writable: false, enumerable: false, configurable: false, } );</span></span></code> </pre> <br>  Das obige Code-Snippet definiert eine Eigenschaft namens <code>'0'</code> (in diesem Fall stellt sich heraus, dass es sich um einen Array-Index handelt). Es ändert die Attributwerte in nicht standardmäßige Werte. <br><br>  In solchen extremen Fällen präsentiert die JavaScript-Engine den gesamten Sicherungsspeicher von Elementen als Wörterbuch, das Array-Indizes Eigenschaftsattributen zuordnet. <br><br><img src="https://habrastorage.org/webt/ad/h4/yj/adh4yjto8mgxrjjy7bzdlontb0i.png"><br><br>  Selbst wenn nur ein Element des Arrays nicht standardmäßige Attribute aufweist, wird die gesamte Speicherung von Sicherungskopien von Elementen langsam und ineffizient ausgeführt.  Vermeiden Sie <code>Object.defineProperty</code> in Array-Indizes!  (Ich weiß nicht einmal, warum Sie es im Prinzip verwenden sollten. Es scheint seltsam und irrational.) <br><br>  <b>Schlussfolgerungen</b> <br><br>  Wir haben gelernt, wie JavaScript-Engines Objekte und Arrays speichern, wie Formulare und Inline-Caches zur Optimierung verschiedener Vorgänge beitragen.  In diesem Artikel möchten wir Ihnen einige praktische Tipps für JavaScript geben, mit denen Sie die Leistung Ihres Codes steigern können: <br><br><ul><li>  Initialisieren Sie Ihre Objekte immer auf die gleiche Weise, damit sie keine unterschiedlichen Formen haben. </li><li>  Spielen Sie nicht mit den Attributen der Eigenschaften der Elemente des Arrays, sondern geben Sie ihnen die Möglichkeit, sicher gespeichert zu werden und effizient zu arbeiten. </li></ul><br>  Jetzt kann der Artikel als vollständig betrachtet werden.  Gemäß der etablierten Tradition warten wir auf Ihre Kommentare und laden Sie ein, sich für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein offenes Webinar</a> zum Kurs "Sicherheit von Informationssystemen" anzumelden, das heute von einem bekannten Virenanalytiker und Teilzeitlehrer - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Alexander Kolesnikov</a> - abgehalten wird. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lesen Sie den ersten Teil.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de447220/">https://habr.com/ru/post/de447220/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de447208/index.html">SQA Days EU Review</a></li>
<li><a href="../de447210/index.html">@ Pythonetc-Zusammenstellung März 2019</a></li>
<li><a href="../de447212/index.html">Tipps und Tricks von meinem Telegramm-Kanal @pythonetc, März 2019</a></li>
<li><a href="../de447214/index.html">Wie man das Spieldesign mit optimalen Strategien verbessert</a></li>
<li><a href="../de447218/index.html">JPoint 2019 Parsing</a></li>
<li><a href="../de447222/index.html">Linux Quest. Herzlichen Glückwunsch an die Gewinner und sprechen Sie über die Lösung von Problemen</a></li>
<li><a href="../de447226/index.html">Interview mit dem Popularisator der Wissenschaft, dem Leiter der einzigen privaten Schule für Astronomie in Russland, Pavel Skripnichenko</a></li>
<li><a href="../de447232/index.html">Persönliche Erfahrung. Wie wir internationale Telefonie verbunden haben: Vergleich von 6 virtuellen Vermittlungsstellen</a></li>
<li><a href="../de447234/index.html">Wie man polymorphe Programme mit Arrow schreibt</a></li>
<li><a href="../de447236/index.html">Erstellen einer Android-Gerätefarm mit Open STF</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>