<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍺 🔉 🍑 Apakah pengembangan CUBA merupakan langkah besar dari Spring? 🐒 🤤 💢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika Anda membaca persyaratan untuk aplikasi web perusahaan berikutnya untuk penggunaan internal, maka biasanya (menilai dari pengalaman saya) itu a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apakah pengembangan CUBA merupakan langkah besar dari Spring?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/417535/"><img src="https://habrastorage.org/webt/nb/rp/wa/nbrpwaxy-nkrqofo6xl4mu_qlh4.png"><br><br>  Ketika Anda membaca persyaratan untuk aplikasi web perusahaan berikutnya untuk penggunaan internal, maka biasanya (menilai dari pengalaman saya) itu adalah satu dan set yang sama: database relasional untuk menyimpan data, sering diwarisi dari versi aplikasi sebelumnya, sejumlah besar bentuk tingkat kesulitan yang berbeda (tetapi pada saat yang sama khas) untuk entri data, berbagai bentuk pelaporan, logika bisnis yang kompleks, integrasi dengan aplikasi lain - dari akuntansi ke manajemen pasokan, beberapa ribu pengguna yang bekerja secara bersamaan.  Apa yang biasanya terlintas dalam pikiran? <br><a name="habracut"></a><br>  <i>"Jadi, saya akan mengambil DBMS yang saya tahu dan yang sesuai dengan volume data mereka, kencangkan Hibernate / JPA, tulis aplikasi pada Spring Boot, buka REST API dan tulis klien pada kerangka JS, kemungkinan besar Angular / Bereaksi."</i> <i><br><br></i>  <i>"Ya, kita masih harus mengacaukan Spring Security.</i>  <i>Dan tulis batasan pada akses ke data untuk berbagai departemen dan peran - di tingkat baris basis data atau objek data.</i>  <i>Bagaimana cara melakukannya?</i>  <i>Pengajuan atau VPD, Anda harus menonton. "</i> <i><br><br></i>  <i>"Ugh, aku harus menulis banyak DAO - mereka selesai dengan cepat, tetapi ada banyak dari mereka."</i> <i><br><br></i>  <i>"Dan konversi dari Entity ke DTO - Saya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ModelMapper</a> ."</i> <i><br><br></i>  <i>"Hal utama adalah jangan lupa untuk mengingatkan peserta pelatihan tentang atribut malas dan bergabung sehingga tidak ada, seperti terakhir kali."</i> <i><br><br></i>  <i>"Pohon cemara, saat kamu memulai logika bisnis, kamu perlu menulis begitu banyak kode layanan ..."</i> <i><br></i> <br>  Artikel ini adalah untuk mereka yang telah menulis setidaknya beberapa aplikasi perusahaan dari awal di Spring / Spring Boot dan sekarang berpikir bahwa akan lebih baik untuk mempercepat pengembangan yang berbeda, tetapi pada saat yang sama, aplikasi dengan tipe yang sama.  Selanjutnya, kita akan melihat cara menyingkirkan tugas "khas" menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Platform CUBA</a> . <br><br><h2>  Kerangka lain? </h2><br><img src="https://habrastorage.org/webt/6e/ev/va/6eevvab4-ufnrsrsc-i7s1enosm.png"><br><br>  Pikir nomor satu, ketika pengembang ditawari kerangka kerja baru (dan, khususnya, CUBA), itu adalah: "Mengapa saya harus repot dengan ini?  Saya akan mengambil Spring Boot yang familier dan akrab dan saya akan menyelesaikan semuanya. "  Dan ini masuk akal.  Kerangka kerja baru adalah studi tentang pendekatan pengembangan baru, jebakan baru dan keterbatasan yang telah Anda pelajari untuk secara cerdik hindari ketika berkembang dalam kerangka kerja yang akrab. <br><br>  Tetapi, ketika saya mulai mengembangkan CUBA, saya tidak perlu banyak mengubah keahlian saya dengan Spring.  Secara alami, saya harus meluangkan sedikit waktu untuk memahami platform, tetapi ini bukan gangguan radikal dari semua kebiasaan, melainkan perubahan kecil dalam keterampilan pengembangan. <br>  Akibatnya, kode untuk DTO, output data halaman demi halaman, penyaringan data (analisis parameter yang ditransfer ke formulir dan kompilasi permintaan) menghilang.  Pada saat yang sama, saya hampir tidak perlu mengotak-atik pengaturan Spring Security dan menulis kode admin, formulir login dan logika alih bahasa antarmuka pengguna. <br><br>  Mari kita mulai dari awal dan melihat bagaimana pengembangan CUBA dibandingkan dengan cara biasa mengembangkan di Spring dan bagaimana, menggunakan pengalaman Anda dan belajar beberapa hal baru, Anda akhirnya dapat membangun aplikasi lebih cepat. <br><br>  Fokus utama artikel adalah pada pengembangan sisi server agar tidak kehilangan fokus dan menjaga jumlah teks pada tingkat yang dapat diterima. <br><br><h2>  Arsitektur Aplikasi Musim Semi </h2><br>  Dalam 90% kasus, mengetik di Google "Spring Application Architecture" atau "Spring application architecture", Anda akan melihat gambar yang serupa.  Aplikasi tiga lapis klasik dengan modul yang umum untuk beberapa lapisan. <br><br><img src="https://habrastorage.org/webt/ph/5t/jg/ph5tjg9wqbutqebrd1s47tetczk.png"><br><br>  <b>Model Domain (Model Domain)</b> - kelas entitas dari domain (Entitas), disimpan, sebagai aturan, dalam database.  Kelas biasanya dibuat secara manual, tetapi Anda dapat membangun struktur secara otomatis, berdasarkan skema database. <br><br>  <b>Lapisan Repositori (Lapisan Repositori)</b> - sekumpulan kelas yang menyediakan pekerjaan dengan gudang data.  Biasanya, lapisan ini menggunakan berbagai kerangka kerja ORM dan berisi logika untuk melakukan operasi CRUD.  Jika kita berbicara tentang Spring, maka repositori cukup kompak, terutama karena metode JPA Query, tetapi sering kali Anda harus menulis logika pemilihan dari database dan memetakannya ke model domain secara manual. <br><br>  <b>Lapisan Layanan</b> - lapisan aplikasi yang berisi implementasi logika bisnis, algoritma pemrosesan informasi khusus untuk bidang subjek.  Ini berguna dalam kasus algoritme pemrosesan yang kompleks, serta untuk bekerja dengan data dari berbagai sumber (basis data, aplikasi eksternal, layanan dari Internet, dll.). <br><br>  <b>Web / Controllers Layer</b> - kelas yang bertanggung jawab untuk REST API.  Mungkin juga ada file templat halaman pada lapisan ini jika kita menggunakan kerangka kerja seperti Thymeleaf, Velocity, serta kelas yang bertanggung jawab untuk rendering dan penanganan peristiwa antarmuka pengguna jika sesuatu seperti GWT, Vaadin, Wicket, dll digunakan. <img src="https://habrastorage.org/webt/a6/_g/7_/a6_g7_jyiw_ipbxzxcjserzimra.png" align="left" width="300" height="180">  Biasanya, pengontrol bekerja dengan DTO, dan bukan dengan kelas dari lapisan domain, sehingga fungsi konversi DTO ke Entitas dan sebaliknya ditambahkan ke aplikasi. <br>  <i>Jika semua hal di atas jelas bagi Anda, atau bahkan "kapten reguler" sangat baik.</i>  <i>Jadi, Anda dapat mulai bekerja dengan CUBA tanpa masalah.</i> <br><br><h2>  Aplikasi Referensi - Klinik Hewan Peliharaan </h2><br>  Mari kita lihat contoh spesifik dan tulis beberapa kode.  Untuk Spring, ada aplikasi "referensi" - Pet Clinic di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> .  Aplikasi ini dibuat dalam versi yang berbeda menggunakan alat yang berbeda - dari Spring klasik hingga Kotlin dan Angular.  Selanjutnya kita akan melihat cara membuat aplikasi ini di CUBA.  Bagi mereka yang tidak terbiasa dengan versi Spring, ada teks yang bagus di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> ;  kutipan dari itu akan digunakan dalam artikel ini. <br><br><h3>  Model data </h3><br><img src="https://habrastorage.org/webt/j7/fk/o7/j7fko7f-qywrj5tszqte-jycmca.png"><br><br>  Diagram ER ditunjukkan pada gambar di atas.  Model domain mengulangi struktur ini, beberapa kelas dengan bidang umum ditambahkan padanya, dan kelas entitas sudah diwarisi darinya.  UML dapat ditemukan di <a href="">presentasi yang</a> saya sebutkan sebelumnya. <br><br><h3>  Lapisan repositori </h3><br>  Ada empat repositori dalam aplikasi yang bertanggung jawab untuk bekerja dengan entitas Pemilik (Pemilik), Hewan Peliharaan (Pet), Kunjungan (Visit) dan Dokter Hewan (Dokter Hewan).  Repositori ditulis menggunakan Spring JPA dan hampir tidak mengandung kode, hanya deklarasi metode.  Namun, kueri telah ditambahkan ke repositori yang berfungsi dengan entitas Pemilik, yang memungkinkan pemilik ekstraksi dan hewan peliharaan mereka dari database dalam satu sampel. <br><br><h3>  Antarmuka pengguna </h3><br>  Klinik Pet memiliki sembilan halaman yang memungkinkan Anda melihat daftar pemilik, hewan peliharaan mereka, dan daftar dokter hewan.  Aplikasi ini menyediakan fungsionalitas CRUD sederhana: dimungkinkan untuk mengedit beberapa data - pemilik, hewan peliharaan, dan Anda juga dapat menambahkan kunjungan ke klinik.  Namun, seperti yang telah disebutkan, kami tidak akan membahas antarmuka pengguna secara mendalam dalam artikel ini. <br><br><h3>  Opsional </h3><br>  Selain kode untuk manipulasi sederhana dengan entitas, aplikasi ini memiliki fungsi menarik yang dirancang untuk menunjukkan kemampuan Spring: <br><br><ul><li>  Caching - daftar dokter hewan dipilih dari database hanya sekali, kemudian disimpan dalam cache sampai server aplikasi restart. </li><li>  Memeriksa penyelesaian bidang yang diperlukan saat memasukkan informasi tentang hewan peliharaan baru. </li><li>  Memformat jenis hewan sebelum menampilkannya. </li><li>  i18n - aplikasi mendukung Bahasa Inggris dan Jerman. </li><li>  Manajemen Transaksi - Beberapa transaksi ditandai sebagai hanya-baca. </li></ul><br><h3>  Catatan marjinal </h3><br><img src="https://habrastorage.org/webt/8v/c9/_u/8vc9_u7gtv1wov02sy6l_kongs0.png" align="right" width="500" height="320">  Saya sangat suka gambar ini.  Ini 100% mencerminkan perasaan saya ketika bekerja dengan kerangka kerja.  Untuk menggunakan kerangka kerja secara efektif, Anda harus memahami bagaimana kerangka itu dibangun di dalamnya (apa pun yang terjadi).  Misalnya, berapa banyak dari Anda yang bertanya-tanya berapa banyak kelas yang diperlukan untuk membuat antarmuka JPA berfungsi? <br>  Bahkan dalam aplikasi kecil seperti Pet Clinic, ada sedikit keajaiban Spring Boot: <br><br><ul><li> Tidak ada konfigurasi untuk cache (kecuali untuk anotasi <code>@Caheable</code> ), namun, Boot Spring “tahu” bagaimana memulai cache yang diinginkan (EhCache dalam kasus ini). </li><li>  Repositori CRUD tidak ditandai dengan anotasi <code>@Transactional</code> (dan kelas induknya adalah <code>org.springframework.data.repository.Repository</code> juga), tetapi semua metode <code>save()</code> berfungsi seperti yang diharapkan. </li></ul><br>  Tetapi, terlepas dari semua "implisit", Spring Boot sangat populer.  Mengapa  Ini transparan dan dapat diprediksi.  Dokumentasi yang baik dan kode sumber terbuka memungkinkan untuk memahami prinsip-prinsip dan, jika perlu, menyelidiki rincian implementasi.  Tampak bagi saya bahwa semua orang menyukai kerangka kerja, transparansi dan prediktabilitas seperti itu - kunci stabilitas dan pemeliharaan aplikasi. <br><br><h2>  Klinik Hewan Piaraan di platform CUBA </h2><br>  <i>Baiklah, mari kita lihat Klinik Hewan Piaraan, yang dibuat menggunakan CUBA, dari sudut pandang pengembang Spring dan cobalah untuk memahami di mana Anda dapat menyimpan.</i> <br><br>  Kode sumber aplikasi dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> .  Selain itu, Platform CUBA memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi yang</a> sangat baik dalam bahasa Rusia dan Inggris, yang menjelaskan secara terperinci bagaimana mengembangkan dengan benar di platform ini.  Banyak contoh di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> , termasuk beberapa tutorial.  Dalam artikel saya akan sering merujuk pada dokumentasi, agar tidak menulis hal yang sama dua kali. <br><br><h3>  Arsitektur Aplikasi CUBA </h3><br>  Aplikasi CUBA terdiri dari modul yang ditunjukkan dalam diagram. <br><br><img src="https://habrastorage.org/webt/ei/fo/j2/eifoj2pgfrsvvafncvexhl04sr0.png"><br><br>  <b>Global (modul global)</b> - berisi kelas entitas, representasi CUBA, dan antarmuka layanan yang digunakan dalam berbagai modul. <br><br>  <b>Inti (modul layanan)</b> - ini adalah tempat kode layanan yang menerapkan logika bisnis, serta kode untuk bekerja dengan gudang data, ditempatkan.  Perlu dicatat bahwa kelas-kelas ini tidak tersedia dari modul aplikasi lain, ini dilakukan untuk menyediakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penyebaran terpisah</a> untuk skalabilitas yang lebih baik.  Untuk menggunakan layanan di modul aplikasi lain, Anda harus menggunakan antarmuka yang dideklarasikan di modul global. <br><br>  <b>GUI, Web, Desktop, Portal</b> - modul ini berisi kode untuk kelas yang terkait dengan pemrosesan acara antarmuka pengguna, serta pengendali REST tambahan jika <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API REST</a> CUBA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bawaan</a> tidak cukup. <br><br>  Untuk menghemat waktu pengembang, CUBA memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">studio</a> - lingkungan pengembangan grafis kecil yang membantu melakukan pekerjaan rutin, seperti menghasilkan entitas, mendaftarkan layanan dalam file konfigurasi, dll.  menggunakan antarmuka grafis.  Untuk menghasilkan antarmuka dari aplikasi yang dikembangkan, ada (hampir) editor WYSIWYG. <br><br>  Dengan demikian, aplikasi yang berbasis pada Platform CUBA terdiri dari dua modul utama - Core dan GUI, yang dapat digunakan secara terpisah, serta modul umum - Global.  Mari kita lihat lebih dekat desain modul-modul ini. <br><br><h2>  Modul global </h2><br><h3>  Model Entitas </h3><br>  Pemodelan entitas dalam aplikasi CUBA tidak berbeda dengan apa yang digunakan pengembang Spring.  Kelas domain dibuat dan anotasi <code>@Table</code> , <code>@Table</code> , dll. Dimasukkan ke dalamnya.  Kelas-kelas ini kemudian terdaftar dalam file <code>persistence.xml</code> . <br><br>  Saat menulis Pet Clinic, saya hanya menyalin kelas-kelas dari aplikasi Musim Semi asli dan sedikit mengubahnya.  Berikut adalah beberapa tambahan kecil yang perlu Anda ketahui jika Anda menulis di platform CUBA: <br><br><ol><li>  CUBA memperkenalkan konsep " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">namespace</a> " untuk setiap <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komponen</a> aplikasi untuk menghindari duplikasi nama tabel dalam database.  Itulah sebabnya awalan "petclinic $" ditambahkan ke setiap entitas. </li><li>  Disarankan untuk menggunakan anotasi <code>@NamePattern</code> - analog dari metode <code>toString()</code> untuk tampilan entitas yang dapat dibaca dalam antarmuka pengguna. </li></ol><br>  Pertanyaan alami: "Apa lagi yang ditambahkan CUBA selain awalan dan deklaratif ke <code>toString()</code> ?"  Berikut adalah sebagian daftar fitur tambahan: <br><br><ol><li>  Basis kelas dengan ID yang dibuat secara otomatis dari Integer ke UUID. </li><li>  Antarmuka penanda yang berguna yang menyediakan fitur tambahan: <br><ul><li>  <code>Versioned</code> - untuk mendukung <code>Versioned</code> versi instance entitas. </li><li>  <code>SoftDelete</code> - untuk mendukung penghapusan "logis" catatan dalam database. </li><li>  <code>Updatable</code> - bidang ditambahkan untuk mendaftarkan fakta memperbarui catatan, nama pengguna dan waktu. </li><li>  <code>Creatable</code> - bidang ditambahkan untuk mendaftarkan pembuatan catatan. </li></ul><br>  Anda dapat membaca lebih lanjut tentang pemodelan entitas dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> . </li><li>  Skrip untuk membuat dan memperbarui database secara otomatis dihasilkan menggunakan CUBA Studio. </li></ol><br>  <i>Jadi, membuat model data untuk Klinik Pet datang untuk menyalin kelas entitas dan menambahkan hal-hal khusus CUBA ke mereka, yang saya sebutkan di atas.</i> <br><br><h3>  Tampilan </h3><br>  Konsep "representasi" dalam CUBA mungkin tampak agak tidak biasa, tetapi cukup mudah untuk dijelaskan.  Tampilan adalah cara deklaratif untuk mendeklarasikan atribut yang nilainya perlu diambil dari gudang data. <br><br>  Misalnya, Anda perlu mengekstrak pemilik dan hewan peliharaan mereka dari basis data (atau dokter hewan dan profesi mereka) - tugas yang sangat umum saat membuat antarmuka adalah ketika Anda perlu menampilkan data dependen dalam bentuk yang sama dengan yang utama.  Di Musim Semi, ini dapat dilakukan melalui ... <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"SELECT owner FROM Owner owner left join fetch owner.pets WHERE owner.id =:id"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Owner </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> id)</span></span>;</code> </pre> <br>  ... atau atur atribut EAGER / LAZY untuk mengambil koleksi entitas utama dalam konteks satu transaksi. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ManyToMany</span></span>(fetch = FetchType.EAGER) <span class="hljs-meta"><span class="hljs-meta">@JoinTable</span></span>(name = <span class="hljs-string"><span class="hljs-string">"vet_specialties"</span></span>, joinColumns = <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"vet_id"</span></span>), inverseJoinColumns = <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"specialty_id"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;Specialty&gt; specialties;</code> </pre> <br>  Di CUBA, Anda bisa melakukan ini melalui EntityManager dan JPQL (semua orang tahu caranya) atau melalui tampilan dan DataManager: <br><br><ol><li>  Bentuk presentasi (dapat dilakukan di CUBA Studio atau secara manual dalam konfigurasi) <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.haulmont.petclinic.entity.Vet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">extends</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_minimal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"vet-specialities-view"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"specialities"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_minimal"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li>  Dan gunakan DataManager untuk mengambil: <pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Collection&lt;Vet&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dataManager.load(Vet.class) .query(<span class="hljs-string"><span class="hljs-string">"select v from cubapetclinic$Vet v"</span></span>) .view(<span class="hljs-string"><span class="hljs-string">"vet-specialities-view"</span></span>) .list(); }</code> </pre></li></ol><br>  Anda dapat membuat tampilan berbeda untuk tugas yang berbeda dengan sekumpulan atribut yang diinginkan dan tingkat entitas bersarang.  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> bagus tentang posting <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">blog</a> Mario David. <br><br>  <i>Enam pengajuan berbeda dibuat untuk aplikasi Pet Clinic.</i>  <i>Sebagian besar dari mereka dihasilkan "semi-otomatis" ketika membuat antarmuka pengguna, dan pandangan yang dijelaskan di atas diterapkan untuk layanan ekspor data.</i> <br><br><h3>  Antarmuka layanan </h3><br>  Karena modul global digunakan oleh semua modul aplikasi lain, antarmuka layanan dideklarasikan di dalamnya, sehingga nantinya mereka dapat digunakan dalam modul lain melalui mekanisme injeksi ketergantungan (DI). <br><br>  Selain itu, Anda perlu mendaftarkan layanan di file <code>web-spring.xml</code> di modul Web.  Ketika menginisialisasi konteks, CUBA akan membuat kelas proksi untuk membuat cerita bersambung dan melakukan deserialisasi saat berinteraksi dengan layanan dalam modul Core.  Ini hanya menyediakan penyebaran terpisah dari Core dan modul Web, sementara pengembang tidak perlu melakukan upaya tambahan, semuanya dilakukan secara transparan. <br><br>  <i>Jadi: saat membuat kelas entitas di CUBA, jumlah waktu yang sama dihabiskan seperti di Spring murni (jika Anda tidak menggunakan CUBA Studio), tetapi Anda tidak perlu membuat kelas dasar untuk menghasilkan kunci primer.</i>  <i>Selain itu, Anda tidak perlu menulis kode untuk mendukung bidang versi entitas, penghapusan logis, dan audit.</i>  <i>Juga, menurut pendapat saya, pandangan dapat menghemat sedikit waktu untuk debugging JPA bergabung dan memanipulasi sampel EAGER / LAZY.</i> <br><br><h2>  Modul inti </h2><br>  Modul ini berisi implementasi antarmuka yang dinyatakan dalam modul global.  Setiap layanan dalam aplikasi CUBA dijelaskan oleh <code>@Service</code> , Anda dapat menggunakan anotasi Spring lainnya, tetapi Anda perlu mempertimbangkan yang berikut: <br><br><ul><li>  Jika Anda ingin layanan tersedia dalam modul lain, Anda harus mengatur anotasi <code>@Service</code> . </li><li>  Disarankan untuk memberi nama layanan untuk menghindari duplikasi jika komponen muncul dalam aplikasi yang mengimplementasikan antarmuka yang sama. </li><li>  Pengambilan sampel data dilakukan sedikit berbeda dari pada Musim Semi, lebih banyak pada bagian selanjutnya. </li></ul><br>  Jika tidak, modul Core adalah kode Spring reguler.  Anda dapat memilih data dari database, Anda dapat memanggil layanan web eksternal, secara umum, menulis kode seperti biasa. <br><br><h3>  Manajer Entitas dan Pengelola Data </h3><br>  Platform CUBA menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">EntityManager</a> sendiri, yang mendelegasikan sebagian dari panggilan ke <code>javax.persistence.EntityManager</code> sudah dikenal, tetapi tidak mengimplementasikan antarmuka ini.  EntityManager terutama menyediakan operasi tingkat rendah dan tidak sepenuhnya mendukung model keamanan CUBA.  Kelas utama untuk bekerja dengan data adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DataManager,</a> yang menyediakan fungsionalitas berikut: <br><br><ul><li>  Kontrol akses di tingkat baris dan atribut. </li><li>  Menggunakan tampilan saat mengambil data. </li><li>  Atribut dinamis. </li></ul><br>  Lebih lanjut tentang DataManager dan EntityManager ditulis dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> .  Tidak perlu secara eksplisit bekerja dengan kelas-kelas ini untuk memilih data ke dalam komponen antarmuka pengguna (tabel, dll.), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber data (Sumber Data)</a> digunakan dalam GUI. <br><br>  <i>Jika kita berbicara tentang PetClinic - hampir tidak ada kode dalam modul Core, tidak ada logika bisnis yang kompleks dalam aplikasi ini.</i> <br><br><h2>  Fungsionalitas tambahan dari Pet Clinic ke CUBA </h2><br>  Di bagian sebelumnya, fungsionalitas tambahan dipertimbangkan dalam aplikasi referensi.  Karena CUBA menggunakan Spring, fungsi yang sama juga tersedia saat mengembangkan berdasarkan platform ini, tetapi Anda harus melakukannya tanpa beberapa keajaiban Spring Boot.  Selain itu, CUBA menyediakan fungsionalitas out-of-box yang serupa. <br><br><h3>  Caching </h3><br>  Platform CUBA memiliki cache permintaan dan cache entitas.  Mereka dijelaskan secara rinci dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> dan dapat dianggap sebagai solusi prioritas jika Anda ingin menggunakan caching dalam aplikasi.  Solusi tertanam mendukung penyebaran dan pengelompokan aplikasi terdistribusi.  Yah, tentu saja, Anda dapat menggunakan anotasi <code>@Cacheable</code> , seperti yang dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi Spring</a> , jika cache <code>@Cacheable</code> tidak bekerja untuk sesuatu. <br><br><h3>  Pemeriksaan input </h3><br>  CUBA menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BeanValidation</a> untuk memvalidasi data yang dimasukkan.  Jika kelas bawaan tidak menyediakan fungsionalitas yang diperlukan, Anda dapat menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">logika cek sendiri</a> .  Dan, di samping itu, CUBA menyediakan kelas <code>Validator</code> , yang dijelaskan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><h3>  Pemformatan keluaran </h3><br>  Platform CUBA menyediakan beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">formatter</a> untuk komponen antarmuka pengguna, Anda juga dapat membuatnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sendiri</a> sebagai tambahan terhadap standar.  Anda bisa menggunakan anotasi <code>@NamePattern</code> untuk merepresentasikan instance entitas sebagai string <br><br><h3>  i18n </h3><br>  CUBA mendukung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">keluaran multi-bahasa</a> menggunakan file <code>message.properties</code> , tidak ada yang baru di sini.  CUBA Studio membuat membuat dan mengedit file seperti itu dengan cepat dan mudah. <br><br><h3>  Manajemen transaksi </h3><br>  Jenis manajemen transaksi berikut ini didukung: <br><br><ul><li>  Akrab dengan anotasi Spring <code>@Transactional</code> , </li><li>  Antarmuka yang <code>Persistence</code> (dan kelas) jika Anda memerlukan manajemen transaksi tingkat rendah. </li></ul><br>  <i>Ketika saya menulis Pet Clinic, saya membutuhkan manajemen transaksi hanya di satu tempat: ketika saya mengembangkan formulir input yang memungkinkan saya untuk mengedit beberapa entitas terkait pada satu layar.</i>  <i>Itu perlu untuk mengedit pemilik dan hewan peliharaan mereka, serta menambah kunjungan ke klinik.</i>  <i>Itu perlu untuk hati-hati menyimpan data dan memperbaruinya di layar lain.</i> <br><br><h2>  Klinik Hewan Piaraan dalam beberapa jam.  Sungguh </h2><br>  Saya membuat salinan Klinik Hewan Peliharaan dengan antarmuka CUBA standar dalam enam jam.  Bukan untuk mengatakan bahwa saya adalah seorang ahli dalam CUBA (beberapa minggu telah berlalu sejak saya mulai bekerja di Haulmont), tetapi saya memiliki pengalaman dengan Spring dan itu banyak membantu saya. <br><br>  Mari kita lihat aplikasi CUBA dalam hal arsitektur klasik: <br><br>  <b>Model data</b> - kelas entitas dalam modul Global.  Membuat model adalah prosedur yang terkenal dan akrab.  Berkat kelas BaseIntegerIdEntity untuk menghemat waktu yang biasanya diperlukan untuk bermain-main dengan menghasilkan ID. <br><br>  <b>Lapisan repositori</b> tidak diperlukan.  Saya membuat beberapa tampilan, dan hanya itu.  Tentu saja, CUBA Studio menyelamatkan saya sedikit waktu, saya tidak perlu menulis file XML secara manual. <br><br>  <b>Lapisan layanan</b> - aplikasi hanya memiliki dua layanan untuk mengekspor data ke JSON dan XML.  Dalam versi aplikasi Boot Musim Semi saat ini, fitur ini telah dihapus.  Meskipun tidak berhasil untuk JSON.  Dalam versi CUBA, saya mendeklarasikan antarmuka dalam modul global dan meletakkan implementasinya di Core.  Tidak ada yang baru kecuali DataManager, tetapi butuh sedikit waktu untuk menguasainya. <br><br>  <b>Lapisan pengontrol</b> - Klinik Hewan CUBA hanya memiliki satu pengontrol REST untuk diekspor ke JSON dan XML.  Saya menempatkan pengontrol ini di modul Web.  Sekali lagi, tidak ada yang istimewa, penjelasannya sama, pengendali pegas biasa. <br><br>  <b>Antarmuka pengguna</b> - membuat formulir CRUD standar, dan bahkan dengan CUBA Studio, tidak menyebabkan kesulitan apa pun.  Tidak perlu menulis kode untuk mentransfer data ke komponen, tidak ada parsing data dari formulir penyaringan data, tidak perlu repot dengan pagination.  Ada komponen untuk semua ini.  Butuh waktu untuk membuat tampilan seperti yang dibuat dalam versi Spring Boot.  Vaadin masih bukan HTML murni, dan itu lebih sulit untuk ditata. <br><br>  Pengalaman pribadi telah ditabulasi: <br><table><tbody><tr><th></th><th>  Mudah dimengerti, mudah dilakukan </th><th>  Saya perlu membaca dokumentasinya </th></tr><tr><td>  Entitas </td><td>  Membuat Model Obyek <br>  Pembuatan skrip DB <br>  Kelas dasar untuk entitas <br></td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fitur tambahan untuk bekerja dengan data</a> </td></tr><tr><td>  Repositori </td><td>  Manajer Entitas <br>  Tampilan <br></td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Datamanager</a> </td></tr><tr><td>  Layanan </td><td>  Kacang Kantor <br>  Manajemen transaksi <br>  Manajemen pengguna <br></td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Antarmuka Ketekunan (dan Kelas)</a> </td></tr><tr><td>  <nobr>Pengontrol</nobr> </td><td>  Pengontrol REST asli <br>  URL REST standar <br></td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penerbitan Layanan</a> <br></td></tr><tr><td>  Antarmuka <br></td><td>  Bentuk standar bekerja dengan data <br></td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gaya dan komponen khusus</a> <br></td></tr></tbody></table><br>  Tentu saja, Pet Clinic tidak menggunakan semua fitur CUBA, daftar lengkap fitur platform dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs</a> , di sana Anda juga dapat menemukan contoh kode untuk memecahkan masalah khas yang muncul saat mengembangkan aplikasi perusahaan. <br><br>  <i>Pendapat pribadi saya adalah bahwa CUBA menyederhanakan pengembangan sisi server dari aplikasi dan membantu menghemat lebih banyak waktu dalam mengembangkan antarmuka pengguna jika Anda menggunakan komponen pengguna standar dan kemampuan penataan.</i>  <i>Tetapi, bahkan jika Anda memerlukan beberapa antarmuka pengguna khusus, masih akan ada keuntungan karena sisi server standar.</i> <br><br><h2>  Satu plus!  Apakah ada kerugiannya? </h2><br>  Tentu saja ada, tidak ada kerangka kerja yang sempurna.  Mereka tidak kritis, tetapi pada awalnya, ketika saya baru saja mulai bekerja dengan CUBA, ada beberapa ketidaknyamanan.  Tetapi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">nilai WTF / m</a> tidak menghalangi. <br><br><ul><li>  Untuk platform CUBA, ada IDE yang menyederhanakan pembuatan awal proyek.  Beralih di antara studio dan IDEA sedikit mengganggu pada awalnya.  Berita baiknya adalah ada versi beta CLI, Anda tidak perlu menjalankan studio untuk menghasilkan struktur proyek, dan juga - versi selanjutnya dari CUBA Studio akan menjadi plugin Intellij IDEA.  Tidak ada lagi peralihan. <br></li><li>  CUBA memiliki lebih banyak file XML daripada aplikasi Spring Boot rata-rata, ini karena inisialisasi konteks di CUBA dilakukan dengan caranya sendiri.  Sekarang perjuangan sedang berlangsung untuk mengurangi jumlah XML, kita beralih ke anotasi jika memungkinkan. <br></li><li>  Tidak ada URL yang "dapat dibaca" untuk formulir antarmuka pengguna.  Dimungkinkan untuk mengakses formulir melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ke layar</a> , tetapi mereka tidak terlalu ramah pengguna. <br></li><li>  Untuk bekerja dengan data, Anda perlu menggunakan DataManager, tampilan, dan EntityManager, bukan Spring JPA atau JDBC (tetapi API ini juga tersedia jika perlu). <br></li><li>  CUBA bekerja paling baik dengan database relasional sebagai data warehouse.  Sedangkan untuk NoSQL, Anda harus menggunakan pustaka akses untuk repositori ini dan menulis layer repositori Anda sendiri.  Tetapi ini adalah jumlah pekerjaan yang sama seperti ketika mengembangkan aplikasi tanpa CUBA, menurut saya. <br></li></ul><br><h1>  Total </h1><br>  Jika ada tugas mengembangkan aplikasi yang menggunakan basis data relasional sebagai gudang data dan berfokus pada bekerja dengan data dalam format tabular, maka CUBA bisa menjadi pilihan yang baik, karena: <br><br><ol><li>  CUBA transparan.  Kode sumber tersedia, metode apa pun dapat didebug. <br></li><li>  CUBA dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diperpanjang</a> (hingga batas yang diketahui, tentu saja).  Anda dapat mewarisi hampir semua kelas utilitas dan menyelipkannya di platform, membuat REST API Anda sendiri, menggunakan kerangka kerja favorit Anda untuk antarmuka pengguna.  CUBA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dibuat</a> sehingga Anda dapat dengan mudah menyesuaikan solusi untuk setiap pelanggan.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ada</a> artikel bagus tentang perluasan platform. <br></li><li>  CUBA adalah Musim Semi.  80% dari kode server Anda hanya akan menjadi aplikasi Musim Semi. <br></li><li>  Mulai cepat.  Anda akan memiliki aplikasi lengkap dengan panel admin setelah membuat entitas pertama dan layar untuk bekerja dengannya. <br></li><li>  Banyak tugas rutin telah diselesaikan di platform. <br></li></ol><br>  Jadi, dengan CUBA Anda dapat menghemat waktu untuk menulis kode "layanan" yang monoton dan fokus pada penulisan kode untuk memecahkan masalah bisnis.  Dan ya, kami di Haulmont menggunakan CUBA untuk mengembangkan produk-produk kotak dan custom. <br><br><cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id417535/">https://habr.com/ru/post/id417535/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id417521/index.html">Tinjau sertifikat SSL untuk pencabutan</a></li>
<li><a href="../id417527/index.html">Kami mengembangkan Udang: kami mengontrol permintaan paralel, kami masuk melalui spdlog dan banyak lagi ...</a></li>
<li><a href="../id417529/index.html">Tiga tren teknologi yang mengubah perdagangan dan konsumen</a></li>
<li><a href="../id417531/index.html">Bagaimana kami menang di SmartMailHack 2</a></li>
<li><a href="../id417533/index.html">Notepad pada Windows menerima pembaruan signifikan pertama dalam dua dekade</a></li>
<li><a href="../id417537/index.html">"Game Anda membosankan," atau cara meningkatkan Retensi yang sudah tinggi di hari pertama</a></li>
<li><a href="../id417539/index.html">Google mendenda rekor $ 5 miliar karena melanggar undang-undang antimonopoli di Eropa</a></li>
<li><a href="../id417541/index.html">Catatan pembicaraan misi Apollo dengan pusat kendali penerbangan NASA didigitalkan</a></li>
<li><a href="../id417543/index.html">Seorang mahasiswa Tiongkok hampir dikeluarkan karena peringkat sosial ayahnya yang rendah</a></li>
<li><a href="../id417545/index.html">Teknologi informasi memiliki atmosfer tersendiri.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>