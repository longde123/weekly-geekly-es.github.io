<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïå üç™ üçø Folha de dicas da abrevia√ß√£o de C ++ e muito mais. Parte 1: C ++ üî≤ üÜñ ü•ù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Uma vez fui entrevistado para o cargo de desenvolvedor de C ++ em um escrit√≥rio decente e at√© bem conhecido. Eu j√° tinha alguma experi√™ncia na √©poca, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Folha de dicas da abrevia√ß√£o de C ++ e muito mais. Parte 1: C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470265/">  Uma vez fui entrevistado para o cargo de desenvolvedor de C ++ em um escrit√≥rio decente e at√© bem conhecido.  Eu j√° tinha alguma experi√™ncia na √©poca, at√© fui chamado de desenvolvedor l√≠der do meu empregador na √©poca.  Mas quando perguntado se eu sabia de coisas como DRY, KISS, YAGNI, NIH, tive que responder "N√£o" repetidamente. <br><br>  Eu falhei miseravelmente, √© claro.  Mas as abrevia√ß√µes acima foram pesquisadas e lembradas.  Ao ler artigos e livros tem√°ticos, preparados para entrevistas e conversando com colegas, aprendi mais coisas novas, esqueci-as, pesquisei novamente no Google e entendi.  H√° alguns meses, um dos meus colegas mencionou casualmente no bate-papo de trabalho do IIFE no contexto de C ++.  Como aquele av√¥ em uma piada, quase ca√≠ do fog√£o e entrei novamente no Google. <br><br><img src="https://habrastorage.org/webt/i7/7u/fc/i77ufc8-ui3-rtrvpu-421lmpfq.png"><br><a name="habracut"></a><br>  Foi ent√£o que decidi compor (principalmente para mim) uma c√°bula para abrevia√ß√µes que s√£o √∫teis para um desenvolvedor de C ++ saber.  Isso n√£o significa que eles se apliquem apenas ao C ++ ou que sejam conceitos todos do C ++ (voc√™ pode escrever volumes sobre idiomas da linguagem).  N√£o, esses s√£o apenas conceitos que eu realmente encontrei no trabalho e nas entrevistas, geralmente expressos na forma de abrevia√ß√µes.  Bem, eu perdi coisas absolutamente triviais como LIFO, FIFO, CRUD, OOP, GCC e MSVC. <br><br>  No entanto, as abreviaturas surgiram decentemente, ent√£o dividi a c√°bula em 2 partes: caracter√≠stica caracter√≠stica do C ++ e mais comum.  Quando apropriado, agrupei os conceitos, caso contr√°rio, simplesmente os listei em ordem alfab√©tica.  Em geral, n√£o h√° muito sentido na ordem deles. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Coisas b√°sicas:</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ODR</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">POD</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">POF</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PIMPL</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RAII</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RTTI</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">STL</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UB</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sutilezas da l√≠ngua:</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ADL</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CRTP</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CTAD</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">EBO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IIFE</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NVI</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RVO e NRVO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SFINAE</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SBO, SOO, SSO</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>ATUALIZA√á√ÉO:</b></a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CV</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LTO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PCH</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PGO</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SEH / VEH</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TMP</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VLA</a> <br><br><h2>  Coisas b√°sicas <a name="Basics"></a></h2><br><h3>  ODR <a name="ODR"></a></h3><br>  <i>Regra de uma defini√ß√£o.</i>  <i>A regra de uma defini√ß√£o.</i>  Simplificado significa o seguinte: <br><br><ul><li>  Dentro de uma √∫nica unidade de tradu√ß√£o, cada vari√°vel, fun√ß√£o, classe etc. n√£o pode ter mais de uma defini√ß√£o.  Existem tantos an√∫ncios quanto poss√≠vel (exceto transfer√™ncias sem um determinado tipo de base, que simplesmente n√£o podem ser declarados sem a defini√ß√£o), mas n√£o mais de uma defini√ß√£o.  Menos poss√≠vel se a entidade n√£o for usada. </li><li>  Durante todo o programa, cada fun√ß√£o n√£o linear e vari√°vel usada deve ter exatamente uma defini√ß√£o.  Cada fun√ß√£o embutida e vari√°vel usada deve ter uma defini√ß√£o em cada unidade de tradu√ß√£o. </li><li>  Algumas entidades - por exemplo, classes, fun√ß√µes embutidas e uma vari√°vel, modelos, enumera√ß√µes etc. - podem ter v√°rias defini√ß√µes em um programa (mas n√£o mais que uma em uma unidade de tradu√ß√£o).  Na verdade, isso acontece quando o mesmo cabe√ßalho que cont√©m uma classe totalmente implementada, por exemplo, √© conectado a v√°rios arquivos .cpp.  Mas essas defini√ß√µes devem coincidir (simplifico bastante, mas a ess√™ncia √© essa).  Caso contr√°rio, ser√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UB</a> . </li></ul><br>  O compilador detectar√° facilmente uma viola√ß√£o de <i>ODR</i> dentro de uma unidade de tradu√ß√£o.  Mas ele n√£o poder√° fazer nada se a regra for violada em uma escala de programa - apenas porque o compilador processa uma unidade de tradu√ß√£o por vez. <br><br>  O vinculador pode encontrar muito mais viola√ß√µes, mas, estritamente falando, ele n√£o √© obrigado a fazer isso (porque, de acordo com o Padr√£o, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UB est√°</a> aqui) e ele pode perder alguma coisa.  Al√©m disso, o processo de busca de viola√ß√µes de <i>ODR</i> no est√°gio de vincula√ß√£o tem complexidade quadr√°tica, e a montagem do c√≥digo C ++ n√£o √© t√£o r√°pida. <br><br>  Como resultado, a principal responsabilidade pelo cumprimento desta regra (especialmente no n√≠vel do programa) √© o pr√≥prio desenvolvedor.  E sim - apenas entidades com um link externo podem violar o <i>ODR</i> em uma escala de programa;  aqueles de dentro (ou seja, definidos em namespaces an√¥nimos) n√£o participam deste carnaval. <br><br>  Leia mais: uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vez (ingl√™s)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">duas (ingl√™s)</a> <br><br><h3>  Pod <a name="POD"></a></h3><br>  <i>Dados antigos simples.</i>  <i>Estrutura de dados simples.</i>  A defini√ß√£o mais simples: essa √© uma estrutura que voc√™ pode, como est√°, em formato bin√°rio, enviar / receber da biblioteca C.  Ou, o que √© a mesma coisa, copie corretamente com <code>memcpy</code> simples. <br><br>  De padr√£o para padr√£o, a defini√ß√£o completa foi alterada em detalhes.  O <i>POD</i> mais recente do C ++ 17 define atualmente como <br><br><ul><li>  tipo escalar </li><li>  ou uma classe / estrutura / uni√£o que: <br>  - existe uma classe trivial <br>  - existe uma classe com um dispositivo padr√£o <br>  - n√£o cont√©m campos n√£o est√°ticos n√£o- <i>POD</i> <br></li><li>  ou uma matriz desses tipos </li></ul><br>  Classe trivial: <br><br><ul><li>  tem pelo menos um n√£o exclu√≠do: <br>  - construtor padr√£o <br>  - construtor de c√≥pias <br>  - construtor em movimento <br>  - operador de atribui√ß√£o de c√≥pias <br>  - mover operador de atribui√ß√£o <br></li><li>  todos os construtores padr√£o que copiam e movem construtores e operadores de atribui√ß√£o s√£o triviais (simplificados - gerados pelo compilador) ou remotos </li><li>  tem um destruidor n√£o remoto trivial </li><li>  todos os tipos de base e todos os campos de tipos de classe t√™m destruidores triviais </li><li>  nenhum m√©todo virtual (incluindo destruidor) </li><li>  nenhum tipo de base virtual </li></ul><br>  Classe com um dispositivo padr√£o (classe de layout padr√£o): <br><br><ul><li>  sem m√©todos virtuais </li><li>  nenhum tipo de base virtual </li><li>  nenhum campo de link n√£o est√°tico </li><li>  todos os campos n√£o est√°ticos t√™m o mesmo modificador de acesso (p√∫blico / protegido / privado) </li><li>  todos os campos n√£o est√°ticos e classes base tamb√©m s√£o tipos com um dispositivo padr√£o </li><li>  todos os campos n√£o est√°ticos da pr√≥pria classe e todos os seus ancestrais s√£o declarados em uma √∫nica classe (ou seja, na pr√≥pria classe ou em um dos ancestrais) </li><li>  Ele n√£o herda o mesmo tipo duas vezes, ou seja, n√£o √© assim: <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> :</span></span> A {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> :</span></span> A{}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">D</span></span></span><span class="hljs-class"> :</span></span> B, C {};</code> </pre> </li><li>  o tipo do primeiro campo n√£o est√°tico ou, se for uma matriz, o tipo de seu elemento n√£o deve coincidir com nenhum dos tipos b√°sicos (devido ao <i>EBO</i> obrigat√≥rio neste caso) </li></ul><br>  No entanto, no C ++ 20 n√£o haver√° mais um conceito de tipo <i>POD</i> , apenas o tipo trivial e o tipo com o dispositivo padr√£o permanecer√£o. <br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (ingl√™s)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tr√™s (ingl√™s)</a> <br><br><h3>  POF <a name="POF"></a></h3><br>  <i>Fun√ß√£o antiga simples.</i>  <i>Uma fun√ß√£o simples no estilo C.</i> Mencionada no Padr√£o anterior ao C ++ 14, inclusive apenas no contexto de manipuladores de sinal.  Os requisitos para isso s√£o: <br><br><ul><li>  usa apenas coisas comuns a C e C ++ (ou seja, sem exce√ß√µes e <code>try-catch</code> , por exemplo) </li><li>  n√£o causa direta ou indiretamente fun√ß√µes n√£o <i>POF</i> , com exce√ß√£o de opera√ß√µes at√¥micas sem blocos ( <code>std::atomic_init</code> , <code>std::atomic_fetch_add</code> , etc.) </li></ul><br>  Somente essas fun√ß√µes, que tamb√©m possuem um link C ( <code>extern "C"</code> ), s√£o permitidas pela Norma como manipuladores de sinal.  O suporte para outras fun√ß√µes depende do compilador. <br><br>  No C ++ 17, o conceito de <i>POF</i> desaparece, em vez de parecer uma avalia√ß√£o segura do sinal.  Em tais c√°lculos s√£o proibidos: <br><br><ul><li>  chama todas as fun√ß√µes da biblioteca padr√£o, exceto at√¥mica, sem bloqueio </li><li>  chamadas <code>new</code> e <code>delete</code> </li><li>  usando <code>dynamic_cast</code> </li><li>  chamar a entidade <code>thread_local</code> </li><li>  qualquer trabalho com exce√ß√µes </li><li>  inicializa√ß√£o de uma vari√°vel est√°tica local </li><li>  aguardando a conclus√£o da inicializa√ß√£o da vari√°vel est√°tica </li></ul><br>  Se o manipulador de sinal fizer alguma das op√ß√µes acima, o Padr√£o promete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UB</a> . <br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">time (ingl√™s)</a> <br><br><h3>  PIMPL <a name="PIMPL"></a></h3><br>  <i>Ponteiro para implementa√ß√£o.</i>  <i>Ponteiro para implementa√ß√£o.</i>  O idioma cl√°ssico em C ++, tamb√©m conhecido como ponteiro-d, ponteiro opaco, firewall de compila√ß√£o.  Consiste no fato de que todos os m√©todos privados, campos e outros detalhes de implementa√ß√£o de uma determinada classe s√£o alocados em uma classe separada, e apenas m√©todos p√∫blicos (ou seja, uma interface) e um ponteiro para uma inst√¢ncia dessa nova classe separada permanecem na classe original.  Por exemplo: <br><br><div class="spoiler">  <b class="spoiler_title">foo.hpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Foo(); ~Foo(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doThis</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doThat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Impl</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;Impl&gt; pImpl_; };</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">foo.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"foo.hpp"</span></span></span><span class="hljs-meta"> class Foo::Impl { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// implementation }; Foo::Foo() : pImpl_(std::make_unique&lt;Impl&gt;()) {} Foo::~Foo() = default; void Foo::doThis() { pImpl_-&gt;doThis(); } int Foo::doThat() { return pImpl_-&gt;doThat(); }</span></span></span></span></code> </pre> <br></div></div><br>  Por que isso √© necess√°rio, ou seja, vantagens: <br><br><ul><li>  Encapsulamento: os usu√°rios da classe atrav√©s da conex√£o do cabe√ßalho obt√™m apenas o que precisam - uma interface p√∫blica.  Se os detalhes da implementa√ß√£o mudarem, o c√≥digo do cliente n√£o precisar√° ser recompilado (consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ABI</a> ). </li><li>  Tempo de compila√ß√£o: como o cabe√ßalho p√∫blico n√£o sabe nada sobre a implementa√ß√£o, ele n√£o inclui os muitos cabe√ßalhos necess√°rios.  Consequentemente, o n√∫mero de cabe√ßalhos implicitamente conectados no c√≥digo do cliente √© reduzido.  A busca por nomes e a resolu√ß√£o de sobrecargas tamb√©m √© simplificada, porque o cabe√ßalho p√∫blico n√£o cont√©m membros privados (embora sejam privados, eles participam desses processos). </li></ul><br>  Pre√ßo, ou seja, desvantagens: <br><br><ul><li>  Mais pelo menos uma refer√™ncia de ponteiro e mais uma chamada de fun√ß√£o ao acessar m√©todos p√∫blicos. </li><li>  O tamanho da classe de mem√≥ria necess√°ria √© aumentado pelo tamanho do ponteiro. </li><li>  Parte dessa mem√≥ria (provavelmente maior) √© alocada no heap, o que tamb√©m afeta negativamente o desempenho. </li><li>  A const√¢ncia l√≥gica pode ser facilmente violada.  Por exemplo, esse c√≥digo compila: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Foo::doThis() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { pImpl_-&gt;doThis(); <span class="hljs-comment"><span class="hljs-comment">// cosnt method pImpl_-&gt;doSmthElse(); // non-const method }</span></span></code> </pre> </li></ul><br>  Algumas dessas defici√™ncias s√£o remov√≠veis, mas o pre√ßo est√° complicando ainda mais o c√≥digo e introduzindo n√≠veis adicionais de abstra√ß√£o (consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FTSE</a> ). <br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tr√™s (ingl√™s)</a> <br><br><h3>  RAII <a name="RAII"></a></h3><br>  <i>Aquisi√ß√£o de recursos √© inicializa√ß√£o.</i>  <i>Capturar um recurso √© inicializa√ß√£o.</i>  O significado desse idioma √© que a reten√ß√£o de um determinado recurso dura toda a vida √∫til do objeto correspondente.  A captura do recurso ocorre no momento da cria√ß√£o / inicializa√ß√£o do objeto, a libera√ß√£o - no momento da destrui√ß√£o / finaliza√ß√£o do mesmo objeto. <br><br>  Por incr√≠vel que pare√ßa (principalmente para programadores de C ++), esse idioma tamb√©m √© usado em outras linguagens, mesmo naquelas com um coletor de lixo.  Em Java, √© <code>try--</code> , em Python a instru√ß√£o <code>with</code> , em C # a diretiva <code>using</code> , em Go the <code>defer</code> .  Mas √© em C ++ com sua vida absolutamente previs√≠vel de objetos que o <i>RAII</i> se encaixa especialmente organicamente. <br><br>  Em C ++, um recurso geralmente √© capturado no construtor e liberado no destruidor.  Por exemplo, ponteiros inteligentes controlam a mem√≥ria dessa maneira, fluxos de arquivos gerenciam arquivos, mutex bloqueia mutexes.  O bom √© que, n√£o importa como o bloco sai (escopo) - √© normal atrav√©s de qualquer um dos pontos de sa√≠da ou foi lan√ßada uma exce√ß√£o - o objeto de controle de recurso criado nesse bloco ser√° destru√≠do e o recurso ser√° liberado.  I.e.  Al√©m de encapsular o <i>RAII</i> no C ++, tamb√©m ajuda a garantir a seguran√ßa no sentido de exce√ß√µes. <br><br>  Limita√ß√µes, onde sem eles.  Destruidores em C ++ n√£o retornam valores e categoricamente n√£o devem lan√ßar exce√ß√µes.  Portanto, se a libera√ß√£o do recurso for acompanhada por um ou outro, ser√° necess√°rio implementar l√≥gica adicional no destruidor do objeto de controle. <br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma vez (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (ingl√™s)</a> <br><br><h3>  RTTI <a name="RTTI"></a></h3><br>  <i>Informa√ß√µes sobre o tipo de tempo de execu√ß√£o.</i>  <i>Identifica√ß√£o do tipo em tempo de execu√ß√£o.</i>  Este √© um mecanismo para obter informa√ß√µes sobre o tipo de um objeto ou express√£o em tempo de execu√ß√£o.  Existe em outros idiomas, mas em C ++ √© usado para: <br><br><ul><li> <code>dynamic_cast</code> </li> <li>  <code>typeid</code> e <code>type_info</code> </li><li>  pegar exce√ß√£o </li></ul><br>  Uma limita√ß√£o importante: o <i>RTTI</i> usa uma tabela de fun√ß√µes virtuais e, portanto, funciona apenas para tipos polim√≥rficos (um destruidor virtual √© suficiente).  Uma explica√ß√£o importante: <code>dynamic_cast</code> e <code>typeid</code> nem sempre usam <i>RTTI</i> e, portanto, funcionam para tipos n√£o polim√≥rficos.  Por exemplo, para converter dinamicamente um link para um descendente para um link para um ancestral, o <i>RTTI</i> n√£o <i>√©</i> necess√°rio; todas as informa√ß√µes est√£o dispon√≠veis no momento da compila√ß√£o. <br><br>  <i>O RTTI</i> n√£o <i>√©</i> gratuito, embora um pouco, mas afeta negativamente o desempenho e o tamanho da mem√≥ria consumida (da√≠ o conselho frequente de n√£o usar o <code>dynamic_cast</code> por causa de sua lentid√£o).  Portanto, os compiladores, como regra, permitem desativar o <i>RTTI</i> .  O GCC e o MSVC prometem que isso n√£o afetar√° a corre√ß√£o das exce√ß√µes de captura. <br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma vez (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (ingl√™s)</a> <br><br><h3>  STL <a name="STL"></a></h3><br>  <i>Biblioteca de modelos padr√£o.</i>  <i>Biblioteca de modelos padr√£o.</i>  Parte da biblioteca padr√£o C ++ que fornece cont√™ineres gen√©ricos, iteradores, algoritmos e fun√ß√µes auxiliares. <br><br>  Apesar de seu nome bem conhecido, <i>STL</i> nunca foi assim chamado no Padr√£o.  Nas se√ß√µes do Padr√£o, o <i>STL</i> pode ser claramente atribu√≠do √† biblioteca Containers, Iterators, Algorithm Library e parcialmente √† General utilities library. <br><br>  Nas descri√ß√µes de cargo, voc√™ pode encontrar 2 requisitos separados - conhecimento de C ++ e familiaridade com <i>STL</i> .  Eu nunca entendi isso, porque <i>STL</i> √© parte integrante da linguagem desde o primeiro padr√£o de 1998. <br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma vez (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (ingl√™s)</a> <br><br><h3>  UB <a name="UB"></a></h3><br>  <i>Comportamento indefinido.</i>  <i>Comportamento indefinido.</i>  Esse comportamento ocorre nos casos de erro para os quais a Norma n√£o possui requisitos.  Muitos deles est√£o explicitamente listados no Padr√£o como levando ao <i>UB</i> .  Isso inclui, por exemplo: <br><br><ul><li>  viola√ß√£o dos limites de uma matriz ou cont√™iner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">STL</a> </li><li>  uso de vari√°vel n√£o inicializada </li><li>  desreferenciando um ponteiro nulo </li><li>  estouro inteiro assinado </li></ul><br>  O resultado do <i>UB</i> depende de tudo em uma linha - na vers√£o do compilador e no clima em Marte.  Al√©m disso, esse resultado pode ser qualquer coisa: um erro de compila√ß√£o, execu√ß√£o correta e falha.  Comportamento indefinido √© mau, √© necess√°rio se livrar dele. <br><br>  O comportamento indefinido, por outro lado, n√£o deve ser confundido com o <i>comportamento n√£o especificado</i> .  Comportamento n√£o especificado √© o comportamento correto do programa correto, mas que, com a permiss√£o do Padr√£o, depende do compilador.  E o compilador n√£o √© necess√°rio para document√°-lo.  Por exemplo, esta √© a ordem na qual os argumentos de uma fun√ß√£o s√£o avaliados ou os detalhes de implementa√ß√£o de <code>std::map</code> . <br><br>  Bem, aqui voc√™ pode se lembrar do comportamento definido pela implementa√ß√£o.  De n√£o especificado difere na disponibilidade de documenta√ß√£o.  Exemplo: o compilador √© livre para criar o tipo <code>std::size_t</code> qualquer tamanho, mas deve indicar qual. <br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tr√™s (ingl√™s)</a> <br><br><h2>  As sutilezas da l√≠ngua <a name="Cobwebs"></a></h2><br><h3>  ADL <a name="ADL"></a></h3><br>  <i>Pesquisa dependente de argumento.</i>  <i>Pesquisa dependente de argumento.</i>  Ele √© a busca por Koenig - em homenagem a Andrew Koenig.  Este √© um conjunto de regras para resolver nomes de fun√ß√µes n√£o qualificados (ou seja, nomes sem o operador <code>::</code> :), al√©m da resolu√ß√£o de nomes usual.  Simplificando: o nome de uma fun√ß√£o √© pesquisado nos espa√ßos de nomes relacionados aos seus argumentos (este √© o espa√ßo que cont√©m o tipo do argumento, o pr√≥prio tipo, se for uma classe, todos os seus ancestrais etc.). <br><br><div class="spoiler">  <b class="spoiler_title">Exemplo mais simples</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; namespace N { struct S {}; void f(S) { std::cout &lt;&lt; "f(S)" &lt;&lt; std::endl; }; } int main() { N::S s; f(s); }</span></span></span></span></code> </pre> <br>  A fun√ß√£o <code>f</code> encontrada no espa√ßo para nome <code>N</code> apenas porque seu argumento pertence a esse espa√ßo. <br></div></div><br>  At√© o trivial <code>std::cout &lt;&lt; "Hello World!\n"</code> usa <i>ADL</i> , <code>std::basic_stream::operator&lt;&lt;</code> n√£o <code>std::basic_stream::operator&lt;&lt;</code> sobrecarregado para <code>const char*</code> .  Mas o primeiro argumento para esta declara√ß√£o √© <code>std::basic_stream</code> , e o compilador pesquisa e encontra uma sobrecarga adequada no <code>std</code> . <br><br>  Alguns detalhes: A <i>ADL</i> n√£o <i>√©</i> aplic√°vel se uma pesquisa regular encontrar uma declara√ß√£o de um membro da classe ou uma declara√ß√£o de fun√ß√£o no bloco atual sem <code>using</code> , ou uma declara√ß√£o de nem uma fun√ß√£o nem um modelo de fun√ß√£o.  Ou se o nome da fun√ß√£o estiver indicado entre par√™nteses (o exemplo acima n√£o compila com <code>(f)(s)</code> ; voc√™ precisar√° escrever <code>(N::f)(s);</code> ). <br><br>  √Äs vezes, a <i>ADL</i> obriga a usar nomes de fun√ß√µes totalmente qualificados onde parece desnecess√°rio. <br><br><div class="spoiler">  <b class="spoiler_title">Por exemplo, esse c√≥digo n√£o compila</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> N1 { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">S</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(S)</span></span></span><span class="hljs-function"> </span></span>{}; } <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> N2 { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(N1::S)</span></span></span><span class="hljs-function"> </span></span>{}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(N1::S s)</span></span></span><span class="hljs-function"> </span></span>{ foo(s); } }</code> </pre> <br></div></div><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um (ingl√™s)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (ingl√™s)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tr√™s (ingl√™s)</a> <br><br><h3>  CRTP <a name="CRTP"></a></h3><br>  <i>Curiosamente recorrente modelo padr√£o.</i>  <i>Padr√£o recursivo estranho.</i>  A ess√™ncia do modelo √© a seguinte: <br><br><ul><li>  alguma classe herda da classe de modelo </li><li>  a classe descendente √© usada como um par√¢metro de modelo de sua classe base </li></ul><br>  √â mais f√°cil dar um exemplo: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived&gt; {};</code> </pre> <br>  <i>O CRTP</i> √© um excelente exemplo de polimorfismo est√°tico.  A classe base fornece uma interface; as classes derivadas fornecem uma implementa√ß√£o.  Mas, diferentemente do polimorfismo comum, n√£o h√° sobrecarga para criar e usar uma tabela de fun√ß√µes virtuais. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplo</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T*&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)-&gt;actionImpl(); } }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionImpl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ ... } }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arg</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">staticPolymorphicHandler</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arg</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arg</span></span></span><span class="hljs-class">) {</span></span> arg.action(); }</code> </pre> <br>  Quando usado corretamente, <code>T</code> sempre um descendente de <code>Base</code> , portanto, <code>static_cast</code> √© suficiente para <code>static_cast</code> .  Sim, neste caso, a classe base conhece a interface descendente. <br></div></div><br>  Outra √°rea comum de uso do <i>CRTP</i> √© a extens√£o (ou restri√ß√£o) da funcionalidade das classes herdadas (algo chamado mixin em alguns idiomas).  Talvez os exemplos mais famosos: <br><br><ul><li> <code>struct Derived : singleton&lt;Derived&gt; { ‚Ä¶ }</code> </li> <li> <code>struct Derived : private boost::noncopyable&lt;Derived&gt; { ‚Ä¶ }</code> </li> <li> <code>struct Derived : std::enable_shared_from_this&lt;Derived&gt; { ‚Ä¶ }</code> </li> <li>  <code>struct Derived : counter&lt;Derived&gt; { ‚Ä¶ }</code> - conta o n√∫mero de objetos criados e / ou existentes </li></ul><br>  Desvantagens, ou melhor, momentos que requerem aten√ß√£o: <br><br><ul><li>  N√£o h√° classe base comum, voc√™ n√£o pode criar uma cole√ß√£o de descendentes diferentes e acess√°-los atrav√©s de um ponteiro para o tipo base.  Mas se voc√™ quiser, poder√° herdar o Base do tipo polim√≥rfico usual. </li><li>  H√° uma oportunidade adicional de tirar o p√© do descuido: <br><br><div class="spoiler">  <b class="spoiler_title">Exemplo</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived1&gt; {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> :</span></span> Base&lt;Derived1&gt; {};</code> </pre> <br>  Mas voc√™ pode adicionar prote√ß√£o: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: Base() = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">friend</span></span> T;</code> </pre> </div></div></li><li>  Porque  Como todos os m√©todos s√£o n√£o virtuais, os m√©todos do descendente ocultam os m√©todos da classe base com os mesmos nomes.  Portanto, √© melhor cham√°-los de maneira diferente. </li><li>  Em geral, os descendentes t√™m m√©todos p√∫blicos que n√£o devem ser usados ‚Äã‚Äãem nenhum lugar, exceto na classe base.  Isso n√£o √© bom, mas √© corrigido atrav√©s de um n√≠vel adicional de abstra√ß√£o (consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FTSE</a> ). </li></ul><br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma vez (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (ingl√™s)</a> <br><br><h3>  CTAD <a name="CTAD"></a></h3><br>  <i>Dedu√ß√£o de Argumento do Modelo de Classe.</i>  <i>Inferindo automaticamente o tipo do par√¢metro do modelo de classe.</i>  Este √© um novo recurso do C ++ 17.  Anteriormente, apenas os tipos de vari√°veis ‚Äã‚Äã( <code>auto</code> ) e os par√¢metros do modelo de fun√ß√£o eram exibidos automaticamente, e √© por isso que fun√ß√µes auxiliares como <code>std::make_pair</code> , <code>std::make_tuple</code> etc. <code>std::make_tuple</code> , na maioria das vezes, elas n√£o s√£o necess√°rias, porque o compilador capaz de exibir automaticamente os par√¢metros dos modelos de classe: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair p{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2.0</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// -&gt; std::pair&lt;int, double&gt; auto lck = std::lock_guard{mtx}; // -&gt; std::lock_guard&lt;std::mutex&gt;</span></span></code> </pre> <br>  <i>O CTAD</i> √© uma nova oportunidade, <i>precisa</i> ser mais desenvolvido e desenvolvido (o C ++ 20 j√° promete melhorias).  Enquanto isso, as restri√ß√µes s√£o as seguintes: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Infer√™ncia parcial de tipos de par√¢metro n√£o √© suportada</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::pair&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt; p{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>}; <span class="hljs-comment"><span class="hljs-comment">//  std::tuple&lt;&gt; t{1, 2, 3}; // </span></span></code> </pre></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Aliases de modelo n√£o suportados</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">U</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyPair</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:pair&lt;T, U&gt;; MyPair p{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Os construtores dispon√≠veis apenas nas especializa√ß√µes de modelo n√£o s√£o suportados.</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapper</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapper</span></span></span><span class="hljs-class">&lt;int&gt; {</span></span> Wrapper(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) {}; }; Wrapper w{<span class="hljs-number"><span class="hljs-number">5</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Modelos aninhados n√£o s√£o suportados</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">U</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-class"> {</span></span> Bar(T, U) {}; }; }; Foo::Bar x{ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2.0</span></span> }; <span class="hljs-comment"><span class="hljs-comment">//  Foo&lt;int&gt;::Bar x{1, 2.0}; // OK</span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Obviamente, o CTAD n√£o funcionar√° se o tipo do par√¢metro do modelo n√£o estiver relacionado aos argumentos do construtor.</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class"> {</span></span> Collection(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size) {}; }; Collection c{<span class="hljs-number"><span class="hljs-number">5</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> </div></div></li></ul><br>  Em alguns casos, regras expl√≠citas de infer√™ncia que devem ser declaradas no mesmo bloco que o modelo de classe ajudar√£o. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplo</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">It</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">It</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">from</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">It</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">to</span></span></span><span class="hljs-class">) {</span></span>}; }; Collection c{v.begin(), v.end()}; <span class="hljs-comment"><span class="hljs-comment">//  template &lt;class It&gt; Collection(It, It)-&gt;Collection&lt;typename std::iterator_traits&lt;It&gt;::value_type&gt;; Collection c{v.begin(), v.end()}; //  OK</span></span></code> </pre> </div></div><br><br>  Leia mais: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma vez (russo)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois (ingl√™s)</a> <br><br><h3>  EBO <a name="EBO"></a></h3><br>  <i>Otimiza√ß√£o da base vazia.</i>  <i>Otimiza√ß√£o de uma classe base vazia.</i>  Tamb√©m chamado de EBCO (Empty Base Class Optimization). <br><br>  Como voc√™ sabe, em C ++, o tamanho de um objeto de qualquer classe n√£o pode ser zero.  Caso contr√°rio, toda a aritm√©tica dos ponteiros ser√° interrompida, porque em um endere√ßo ser√° poss√≠vel marcar quantos objetos diferentes voc√™ desejar.  Portanto, mesmo objetos de classes vazias (ou seja, classes sem um √∫nico campo n√£o est√°tico) t√™m um tamanho diferente de zero, que depende do compilador e do SO e geralmente √© igual a 1. <br><br>  Assim, a mem√≥ria √© desperdi√ßada em v√£o em todos os objetos de classes vazias.  Mas n√£o os objetos de seus descendentes, porque neste caso o Padr√£o explicitamente faz uma exce√ß√£o.  √â permitido ao compilador n√£o alocar mem√≥ria para uma classe base vazia e, assim, salvar n√£o apenas 1 byte da classe vazia, mas todos os 4 (dependendo da plataforma), pois tamb√©m h√° alinhamento. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplo</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> :</span></span> Empty { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Empty) &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 std::cout &lt;&lt; sizeof(Foo) &lt;&lt; std::endl; // 4 std::cout &lt;&lt; sizeof(int) &lt;&lt; std::endl; // 4</span></span></code> </pre> </div></div><br>  Mas <i>como</i> objetos diferentes do mesmo tipo n√£o podem ser colocados no mesmo endere√ßo, o <i>EBO</i> n√£o funcionar√° se: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Uma classe vazia √© encontrada duas vezes entre ancestrais</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty2</span></span></span><span class="hljs-class"> :</span></span> Empty {}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> :</span></span> Empty, Empty2 { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Empty) &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 std::cout &lt;&lt; sizeof(Empty2) &lt;&lt; std::endl; // 1 std::cout &lt;&lt; sizeof(Foo) &lt;&lt; std::endl; // 8</span></span></code> </pre> </div></div></li><li><div class="spoiler">  <b class="spoiler_title">O primeiro campo n√£o est√°tico √© um objeto da mesma classe vazia ou de seu descendente</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> :</span></span> Empty { Empty e; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Empty) &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 std::cout &lt;&lt; sizeof(Foo) &lt;&lt; std::endl; // 8</span></span></code> </pre> </div></div></li></ul><br>  Nos casos em que objetos de classes vazias s√£o campos n√£o est√°ticos, nenhuma otimiza√ß√£o √© fornecida (por enquanto, o atributo <code>[[no_unique_address]]</code> aparecer√° em C ++ 20).  Mas gastar 4 bytes (ou quanto o compilador precisa) para cada um desses campos √© uma pena, ent√£o voc√™ pode "recolher" objetos de classes vazias com o primeiro campo n√£o est√°tico n√£o vazio por conta pr√≥pria. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplo</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty1</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty2</span></span></span><span class="hljs-class"> {</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Member</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> ... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Empty</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmptyOptimization</span></span></span><span class="hljs-class"> :</span></span> Empty ... { Member member; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> EmptyOptimization&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, Empty1, Empty2&gt; data; };</code> </pre> <br>  Estranho, mas nesse caso, o tamanho do Foo √© diferente para diferentes compiladores, para o MSVC 2019 √© 8, para o GCC 8.3.0 √© 4. Mas, em qualquer caso, aumentar o n√∫mero de classes vazias n√£o afeta o tamanho do <code>Foo</code> . </div></div><br>  Leia mais: uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vez (ingl√™s)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">duas (ingl√™s)</a> <br><br><h3>  IIFE <a name="IIFE"></a></h3><br>  <i>Express√£o de fun√ß√£o invocada imediatamente.</i>  <i>Express√£o funcional chamada imediatamente.</i>  Em geral, esse √© um idioma em JavaScript, de onde Jason Turner o emprestou junto com o nome.  Na verdade, √© apenas criar e chamar imediatamente um lambda: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> myVar = [&amp;] { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition1()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> computeSomeComplexStuff(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> condition2() ? computeSonethingElse() : DEFAULT_VALUE; } ();</code> </pre> <br>  Por que isso √© necess√°rio?  Bem, por exemplo, como no c√≥digo acima, para inicializar uma constante pelo resultado de um c√°lculo n√£o trivial e n√£o entupir o escopo com vari√°veis ‚Äã‚Äãe fun√ß√µes desnecess√°rias. <br><br>  Leia mais: uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vez (ingl√™s)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">duas (ingl√™s)</a> <br><br><h3>  NVI <a name="NVI"></a></h3><br>  <i>Interface n√£o virtual.</i>  <i>Interface n√£o virtual.</i>  De acordo com esse idioma, uma interface de classe aberta n√£o deve conter fun√ß√µes virtuais.  Todas as fun√ß√µes virtuais s√£o tornadas privadas (m√°ximo protegido) e chamadas dentro de n√£o virtuais abertas. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplo</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~Base() = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// check precondition fooImpl(); // check postconditions } private: virtual void fooImpl() = 0; }; class Derived : public Base { private: void fooImpl() override { } };</span></span></code> </pre> </div></div><br>  Por que isso √© necess√°rio: <br><br><ul><li>  Cada fun√ß√£o virtual aberta faz duas coisas: define a interface p√∫blica da classe e participa da redefini√ß√£o de comportamento nas classes descendentes.  O uso de <i>NVI</i> elimina essas fun√ß√µes com uma carga dupla: a interface √© definida por algumas fun√ß√µes, mudan√ßa de comportamento por outras.  Voc√™ pode alterar os dois independentemente um do outro. </li><li>            (-  -,    . .),         (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DRY</a> ) ‚Äî    ‚Äî      .  I.e.      . </li></ul><br>    <i>NVI</i> ‚Äì   ,    (-    )        (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FBC</a> ). <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> RVO  NRVO <a name="RVO"></a></h3><br> <i>(Named) Return Value Optimization.  ()  .</i>      copy elision ‚Äì       ,          .   ,       (    copy elision ‚Äì     ). <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Foo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Foo(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> f = bar(); }</code> </pre> </div></div><br>  <i>RVO</i>       <code>Foo</code>   <code>bar</code> ,                <code>main</code> (   <code>bar</code> ),        <code>f</code>         . <i>RVO</i>       ,   <code>bar</code>   <code>f</code> . <br><br>    :  <code>main</code>         <code>f</code> .  <code>bar</code> (    ),     ,         . <br><br> <i>NRVO</i>   <i>RVO</i> ,     ,        <code>return</code> ,        . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Foo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Foo result; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> </div></div><br>     , <i>NRVO</i>   ,        . ,          ,        ,       ‚Äî <i>NRVO</i>  . <br><br><div class="spoiler"> <b class="spoiler_title"> NRVO  </b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Foo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> condition)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition) { Foo f1; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f1; } Foo f2; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f2; }</code> </pre> </div></div><br>      <i>RVO</i> .    <i>NRVO</i>           . <br><br> <i>RVO</i>  <i>NRVO</i> ‚Äì    .         ,      .     C++17:  <i>RVO</i>   copy elision,  ,        . <br><br> : <i>(N)RVO</i>    ‚Äî  .  C++14      , C++17  <i>RVO</i>   ,   C++20 ‚Äì . <br><br>       . -, <i>(N)RVO</i> - , ..       . -,   <code>result</code>      <code>std::move(result)</code> ,  <i>NRVO</i>   .  : <i>RVO</i>   prvalue, <i>NRVO</i> ‚Äì  lvalue, a <code>std::move(result)</code> ‚Äì  xvalue. <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> SFINAE <a name="SFINAE"></a></h3><br> <i>Substitution Failure Is Not An Error.   ‚Äî  .</i> <i>SFINAE</i> ‚Äî      ‚Äî    ‚Äî  ++.   ,       ,    ,    . ,         : <br><br><ol><li>     ‚Äî             (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ADL</a> ). </li><li>    ‚Äî    ,     ,       ,  . . </li><li>          (viable functions),          .           ‚Äî     . </li></ol><br>   <i>SFINAE</i>    :      ,        ,      ,    (  ).    . <br><br> <i>SFINAE</i>     , ,           .       -  , . . ,        . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;type_traits&gt; #include &lt;utility&gt; template &lt;class, class = void&gt; struct HasToString : std::false_type {}; //    ,      //   -    ,  //     ‚Äî  ,    ,   template &lt;class T&gt; struct HasToString&lt;T, std::void_t&lt;decltype(&amp;T::toString)&gt;&gt; : std::is_same&lt;std::string, decltype(std::declval&lt;T&gt;().toString())&gt; {}; struct Foo { std::string toString() { return {}; } }; int main() { std::cout &lt;&lt; HasToString&lt;Foo&gt;::value &lt;&lt; std::endl; // 1 std::cout &lt;&lt; HasToString&lt;int&gt;::value &lt;&lt; std::endl; // 0 }</span></span></span></span></code> </pre> </div></div><br>   C++17 <code>static if</code>      <i>SFINAE</i> ,    C++20        . . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> SBO, SOO, SSO <a name="SBO"></a></h3><br> <i>Small Buffer/Object/String Optimization.   //.</i>   <i>SSO</i>   Small Size Optimization,   ,   ,  <i>SSO</i> ‚Äì   . <i>SBO</i>  <i>SOO</i> ‚Äì  ,  <i>SSO</i> ‚Äì    . <br><br>   ,   ,    -    .    ,     .      ,           (  ),        . <br><br> , std::string     : <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* begin_; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size_; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> capacity_; };</code> </pre> </div></div><br>       24  (    ).  I.e.    24       .     24, , . .  -       .         8  (   ‚Äî 24 ): <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">string</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> Buffer { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* begin_; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> local_[<span class="hljs-number"><span class="hljs-number">8</span></span>]; }; Buffer buffer_; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> _size; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> _capacity; };</code> </pre> </div></div><br>     ,     ‚Äî    .             . <br><br>    <code>std::string</code>  <i>SSO</i>      <code>std::function</code> .   <code>std::vector</code>     , . .  ,  <code>std::swap</code>          ,       . <i>SBO</i>      ( <code>std::string</code>  ).  <code>boost::container::small_vector</code> ,   ,  <i>SBO</i> . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h2> UDPATE <a name="Update"></a></h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">PyerK</a>     . <br><h3> CV <a name="CV"></a></h3><br> <i>  const  volatile.</i> <code>const</code> ,  /  ,          ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UB</a>   . <code>volatile</code> ,  /       (, -    -  ),        .   <code>volatile</code>    <code>volatile</code>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UB</a> . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> LTO <a name="LTO"></a></h3><br> <i>Link Time Optimization.  .</i>    ,      , . .  .    ,     :    ,     .   , . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> PCH <a name="PCH"></a></h3><br> <i>Precompiled Headers.   .</i>  ,              .         ,   . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> PGO <a name="PGO"></a></h3><br> <i>Profile-Guided Optimization.    .</i>    ,      ,         . ,          . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> SEH/VEH <a name="SEH"></a></h3><br> <i>Structured/Vectored Exception Handling.</i>   MSVC     .     <code>try-catch</code> <i>SEH</i>     : <code>__try</code> , <code>__except</code> , <code>__finally</code> ,       ,   ,     ,   -  ,      . . <i>VEH</i>     ,      . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> TMP <a name="TMP"></a></h3><br> <i>Template Meta-Programming.  .</i>  ‚Äî          .   C++   .         . ,  <i>TMP</i>  C++    , . .      . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h3> VLA <a name="VLA"></a></h3><br> <i>Variable-Length Arrays.   .</i>  I.e. ,      : <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-built_in"><span class="hljs-built_in">array</span></span>[n]; }</code> </pre> <br>  C++   .   , . .     C    C99.     C++   . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> (.)</a> <br><br><h2>  PS </h2><br>   -   -  ‚Äî   .  , ,     ,    C++.  ,    ,   . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt470265/">https://habr.com/ru/post/pt470265/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt470247/index.html">RESHI.RU - um rob√¥ resolve e explica problemas de texto escolar em matem√°tica</a></li>
<li><a href="../pt470251/index.html">Como fiz um aplicativo de desktop no Flutter (+ b√¥nus)</a></li>
<li><a href="../pt470255/index.html">Otimiza√ß√£o do portf√≥lio de t√≠tulos usando ALGLIB</a></li>
<li><a href="../pt470257/index.html">Manto em torno do ImmutableList em Java</a></li>
<li><a href="../pt470259/index.html">Aimybox na pesquisa: a estrutura para criar assistentes de voz precisa de um assistente para iOS</a></li>
<li><a href="../pt470267/index.html">Monitoramento de temperatura certificado</a></li>
<li><a href="../pt470269/index.html">ReactOS 0.4.12: Âçé‰∏∫ Ôºå ‰Ω† ËÆ§‰∏∫ Ëøô‰∏™ ÊÄé‰πà Ê†∑Ôºü</a></li>
<li><a href="../pt470271/index.html">F # 6: Tuplas</a></li>
<li><a href="../pt470273/index.html">F # 7: Registros</a></li>
<li><a href="../pt470275/index.html">F # 8: Uni√µes Discriminadas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>