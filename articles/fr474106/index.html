<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíå üò± ü§° Outils de r√©solution des d√©pendances S√©mantique üö¥ üëèüèª üôéüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Outil de r√©solution des d√©pendances 


 Un r√©solveur de d√©pendances (ci-apr√®s d√©nomm√© r√©solveur, environ Transl.) Ou un gestionnaire de packages est u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Outils de r√©solution des d√©pendances S√©mantique</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/474106/"><h2 id="sredstvo-razresheniya-zavisimostey">  Outil de r√©solution des d√©pendances </h2><br><p>  Un r√©solveur de d√©pendances (ci-apr√®s d√©nomm√© r√©solveur, environ Transl.) Ou un gestionnaire de packages est un programme qui d√©finit un ensemble coh√©rent de modules en tenant compte des restrictions d√©finies par l'utilisateur. </p><br><p>  Les contraintes sont g√©n√©ralement sp√©cifi√©es par les noms de module et les num√©ros de version.  Dans l'√©cosyst√®me JVM des modules Maven, le nom de l'organisation (identifiant de groupe) sera √©galement indiqu√©.  De plus, les restrictions peuvent inclure des plages de versions, des modules exclus, des remplacements de version, etc. </p><br><p>  Les trois principales cat√©gories de packages sont repr√©sent√©es par les packages OS (Homebrew, packages Debian, etc.), <br>  modules pour des langages de programmation sp√©cifiques (CPAN, RubyGem, Maven, etc.) et des extensions sp√©cifiques √† l'application (plugins Eclipse, plugins IntelliJ, extensions VS Code). </p><a name="habracut"></a><br><h2 id="semantika-rezolvera">  S√©mantique du r√©solveur </h2><br><p>  En premi√®re approximation, nous pouvons repr√©senter les d√©pendances des modules sous forme de DAG (graphe acyclique dirig√©, graphe acyclique dirig√©). </p><br><p>  Cette repr√©sentation est appel√©e graphe de d√©pendance.  Consid√©rez les d√©pendances de deux modules: </p><br><ul><li> <code>a:1.0</code> d√©pend de <code>c:1.0</code> </li><li>  <code>b:1.0</code> d√©pend de <code>c:1.0</code> et <code>d:1.0</code> </li></ul><br><pre> <code class="plaintext hljs">+-----+ +-----+ |a:1.0| |b:1.0| +--+--+ +--+--+ | | +&lt;-------+ | | vv +--+--+ +--+--+ |c:1.0| |d:1.0| +-----+ +-----+</code> </pre> <br><p>  Si le module d√©pend de <code>a:1.0</code> et <code>b:1.0</code> , alors une liste compl√®te des d√©pendances sera pr√©sent√©e <code>a:1.0</code> , <code>b:1.0</code> , <code>c:1.0</code> et <code>d:1.0</code> .  Et ce n'est qu'un tour d'arbre. </p><br><p>  La situation deviendra plus compliqu√©e si les d√©pendances transitives sont sp√©cifi√©es par une gamme de versions: </p><br><ul><li>  <code>a:1.0</code> d√©pend de <code>c:1.0</code> </li><li>  <code>b:1.0</code> d√©pend de <code>c:[1.0,2)</code> et <code>d:1.0</code> </li></ul><br><pre> <code class="plaintext hljs">+-----+ +-----+ |a:1.0| |b:1.0| +--+--+ +--+--+ | | | +-----------+ | | | vvv +--+--+ +--+------+ +--+--+ |c:1.0| |c:[1.0,2)| |d:1.0| +-----+ +---------+ +-----+</code> </pre> <br><p>  Ou, si diff√©rentes versions sont sp√©cifi√©es pour les d√©pendances transitives: </p><br><ul><li>  <code>a:1.0</code> d√©pend de <code>c:1.0</code> </li><li>  <code>b:1.0</code> d√©pend de <code>c:1.2</code> et <code>d:1.2</code> </li></ul><br><p>  Ou, si des exceptions sont lev√©es pour la d√©pendance: </p><br><ul><li>  d√©pendance √† <code>a:1.0</code> , qui d√©pend de <code>c:1.0</code> , √† l'exclusion de <code>c:*</code> </li><li>  <code>b:1.0</code> d√©pend de <code>c:1.2</code> et <code>d:1.2</code> </li></ul><br><p>  Diff√©rents r√©solveurs interpr√®tent diff√©remment les restrictions d√©finies par les utilisateurs.  J'appelle de telles r√®gles la s√©mantique des r√©solveurs. </p><br><p>  Vous devrez peut-√™tre conna√Ætre certaines de ces s√©mantiques, par exemple: </p><br><ul><li>  la s√©mantique de votre propre module (d√©termin√©e par l'outil de construction que vous utilisez); </li><li>  la s√©mantique des biblioth√®ques que vous utilisez (d√©termin√©e par l'outil de construction que l'auteur a utilis√©); </li><li>  la s√©mantique des modules que votre module utilisera comme d√©pendance (d√©finie par l'outil de construction de l'utilisateur final). </li></ul><br><h2 id="sredstva-razresheniya-zavisimostey-v-ekosisteme-jvm">  Outils de r√©solution des d√©pendances dans l'√©cosyst√®me JVM </h2><br><p>  Puisque je supporte <code>sbt</code> , je dois travailler principalement dans l'√©cosyst√®me JVM. </p><br><h2 id="semantika-maven-nearest-wins">  Semantics Maven: victoires les plus proches </h2><br><p>  Dans les graphiques o√π il y a un conflit de d√©pendances (dans le graphique des d√©pendances <code>a</code> il existe de nombreuses versions diff√©rentes du composant <code>d</code> , par exemple <code>d:1.0</code> et <code>d:2.0</code> ), Maven utilise la strat√©gie de gain le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plus proche</a> pour r√©soudre le conflit. </p><br><blockquote>  La r√©solution des conflits de d√©pendance est un processus qui d√©termine quelle version d'un artefact sera s√©lectionn√©e si plusieurs versions diff√©rentes du m√™me artefact sont trouv√©es parmi les d√©pendances.  Maven s√©lectionne la d√©finition la plus proche.  C'est-√†-dire  utilise la version la plus proche de votre projet dans l'arborescence des d√©pendances. <br>  Vous pouvez toujours garantir l'utilisation de la bonne version en la d√©clarant explicitement dans le POM du projet.  Notez que si deux versions de la d√©pendance ont la m√™me profondeur dans l'arborescence, la premi√®re sera s√©lectionn√©e.  La d√©finition la plus proche signifie que la version la plus proche du projet dans l'arborescence des d√©pendances sera utilis√©e.  Par exemple, si les d√©pendances pour <code>A</code> , <code>B</code> et <code>C</code> d√©finies comme <code>A -&gt; B -&gt; C -&gt; D 2.0</code> et <code>A -&gt; E -&gt; D 1.0</code> , alors, lors de la construction de <code>A</code> , <code>D 1.0</code> sera utilis√©, car  le trajet de <code>A</code> √† <code>D</code> via <code>E</code> plus court (que via <code>B</code> et <code>C</code> , env. transl.). </blockquote><p>  Cela signifie que de nombreux modules Java publi√©s √† l'aide de Maven ont √©t√© compil√©s √† l'aide de la s√©mantique la <code>nearest-wins</code> .  Pour illustrer ce qui pr√©c√®de, cr√©ez un simple <code>pom.xml</code> : </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.example<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>foo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencyManagement</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.typesafe.play<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>play-ws-standalone_2.12<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencyManagement</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  <code>mvn dependency:build-classpath</code> renvoie le <code>mvn dependency:build-classpath</code> r√©solu. <br>  Il est √† noter que l'arborescence r√©sultante utilise <code>com.typesafe:config:1.2.0</code> m√™me si <code>Akka 2.5.3</code> d√©pend transitoirement de <code>com.typesafe:config:1.3.1</code> . </p><br><p>  <code>mvn dependency:tree</code> donne cette confirmation visuelle: </p><br><pre> <code class="plaintext hljs">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ foo --- [INFO] com.example:foo:jar:1.0.0 [INFO] \- com.typesafe.play:play-ws-standalone_2.12:jar:1.0.1:compile [INFO] +- org.scala-lang:scala-library:jar:2.12.2:compile [INFO] +- javax.inject:javax.inject:jar:1:compile [INFO] +- com.typesafe:ssl-config-core_2.12:jar:0.2.2:compile [INFO] | +- com.typesafe:config:jar:1.2.0:compile [INFO] | \- org.scala-lang.modules:scala-parser-combinators_2.12:jar:1.0.4:compile [INFO] \- com.typesafe.akka:akka-stream_2.12:jar:2.5.3:compile [INFO] +- com.typesafe.akka:akka-actor_2.12:jar:2.5.3:compile [INFO] | \- org.scala-lang.modules:scala-java8-compat_2.12:jar:0.8.0:compile [INFO] \- org.reactivestreams:reactive-streams:jar:1.0.0:compile</code> </pre> <br><p>  De nombreuses biblioth√®ques offrent une compatibilit√© descendante, mais la compatibilit√© directe n'est pas garantie √† quelques exceptions pr√®s, ce qui est alarmant. </p><br><h2 id="semantika-apache-ivy-latest-wins">  S√©mantique d'Apache Ivy: derni√®res victoires </h2><br><p>  Par d√©faut, Apache Ivy utilise la strat√©gie des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">derni√®res victoires</a> pour r√©soudre les conflits de d√©pendance. </p><br><blockquote>  Si ce conteneur n'est pas pr√©sent, le gestionnaire de conflits par d√©faut est utilis√© pour tous les modules.  Le gestionnaire de conflits par d√©faut actuel est "derni√®re r√©vision". <br>  <em>Remarque: Les <code>conflicts</code> conteneurs sont l'un des fichiers Ivy.</em> </blockquote><p>  Jusqu'√† la version <code>SBT 1.3.x</code> r√©solveur de d√©pendance interne est Apache Ivy.  Le <code>pom.xml</code> utilis√© pr√©c√©demment est d√©crit un peu plus bri√®vement dans SBT: </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies += <span class="hljs-string"><span class="hljs-string">"com.typesafe.play"</span></span> %% <span class="hljs-string"><span class="hljs-string">"play-ws-standalone"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, )</code> </pre> <br><p>  Dans le <code>sbt shell</code> entrez <code>show externalDependencyClasspath</code> pour obtenir le chemin de classe r√©solu.  Il doit indiquer la version de <code>com.typesafe:config:1.3.1</code> .  De plus, l'avertissement suivant sera toujours affich√©: </p><br><pre> <code class="plaintext hljs">[warn] There may be incompatibilities among your library dependencies; run 'evicted' to see detailed eviction warnings.</code> </pre> <br><p>  L'appel de la <code>evicted</code> dans le <code>sbt shell</code> vous permet d'obtenir un rapport de r√©solution de conflit: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; evicted [info] Updating ... [info] Done updating. [info] Here are other dependency conflicts that were resolved: [info] * com.typesafe:config:1.3.1 is selected over 1.2.0 [info] +- com.typesafe.akka:akka-actor_2.12:2.5.3 (depends on 1.3.1) [info] +- com.typesafe:ssl-config-core_2.12:0.2.2 (depends on 1.2.0) [info] * com.typesafe:ssl-config-core_2.12:0.2.2 is selected over 0.2.1 [info] +- com.typesafe.play:play-ws-standalone_2.12:1.0.1 (depends on 0.2.2) [info] +- com.typesafe.akka:akka-stream_2.12:2.5.3 (depends on 0.2.1)</code> </pre> <br><p>  Dans la s√©mantique des <code>latest-wins</code> , sp√©cifier <code>config:1.2.0</code> dans la pratique signifie ¬´me fournir la version 1.2.0 ou sup√©rieure¬ª. <br>  Ce comportement est l√©g√®rement plus pr√©f√©rable que dans la strat√©gie de <code>nearest-wins</code> les <code>nearest-wins</code> , car les versions des biblioth√®ques transitives ne sont pas r√©trograd√©es.  Cependant, l'appel <code>evicted</code> doit v√©rifier si les remplacements ont √©t√© effectu√©s correctement. </p><br><h2 id="semantika-coursier-latest-wins">  Cours de s√©mantique: derni√®res victoires </h2><br><p>  Avant d'aborder la description de la s√©mantique, je r√©pondrai √† une question importante - comment se prononce Coursier.  Selon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la</a> note d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Alex Arshambo</a> , il s'agit d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">poussin</a> prononc√©. </p><br><p>  Fait int√©ressant, la documentation de Coursier contient une page sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gestion des versions</a> , qui parle de la s√©mantique de la r√©solution des d√©pendances. </p><br><blockquote>  Consid√©rez l'intersection d'intervalles donn√©s: <br><ul><li>  S'il est vide (les intervalles ne se croisent pas), alors il y a un conflit. </li><li>  Si aucun intervalle n'est sp√©cifi√©, il est suppos√© que l'intersection est repr√©sent√©e par (,) (l'intervalle correspondant √† toutes les versions). <br>  Ensuite, envisagez des versions sp√©cifiques: <br><ul><li>  Nous rejetons les versions sp√©cifiques sous les limites de l'intervalle. </li><li>  S'il existe des versions sp√©cifiques au-dessus des limites de l'intervalle, il y a un conflit. </li><li>  Si des versions sp√©cifiques se trouvent dans les limites de l'intervalle, le r√©sultat doit √™tre le plus r√©cent d'entre elles. </li><li>  S'il n'y a pas de versions sp√©cifiques dans ou au-dessus des limites de l'intervalle, le r√©sultat doit √™tre l'intervalle. </li></ul></li></ul><br></blockquote><p>  Parce que  on dit <code>  </code> , donc - c'est la s√©mantique des <code>latest-wins</code> . <br>  Vous pouvez le v√©rifier en utilisant <code>sbt 1.3.0-RC3</code> , qui utilise Coursier. </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies += <span class="hljs-string"><span class="hljs-string">"com.typesafe.play"</span></span> %% <span class="hljs-string"><span class="hljs-string">"play-ws-standalone"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, )</code> </pre> <br><p>  L'appel de <code>show externalDependencyClasspath</code> partir de la console <code>sbt 1.3.0-RC3</code> renverra <code>com.typesafe:config:1.3.1</code> , comme pr√©vu.  Le rapport sur la r√©solution des conflits rapporte la m√™me chose: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; evicted [info] Here are other dependency conflicts that were resolved: [info] * com.typesafe:config:1.3.1 is selected over 1.2.0 [info] +- com.typesafe.akka:akka-actor_2.12:2.5.3 (depends on 1.3.1) [info] +- com.typesafe:ssl-config-core_2.12:0.2.2 (depends on 1.2.0) [info] * com.typesafe:ssl-config-core_2.12:0.2.2 is selected over 0.2.1 [info] +- com.typesafe.play:play-ws-standalone_2.12:1.0.1 (depends on 0.2.2) [info] +- com.typesafe.akka:akka-stream_2.12:2.5.3 (depends on 0.2.1)</code> </pre> <br><h2 id="primechanie-apache-ivy-emuliruet-semantiku-nearest-wins">  Remarque: Apache Ivy √©mule la s√©mantique des <code>nearest-wins</code> ? </h2><br><p>  Lors de la r√©solution des d√©pendances de module √† partir du r√©f√©rentiel Maven, Ivy convertit le fichier <code>POM</code> et place l'attribut <code>force="true"</code> dans <code>ivy.xml</code> dans le cache. </p><br><p>  Par exemple, <code>cat ~/.ivy2/cache/com.typesafe.akka/akka-actor_2.12/ivy-2.5.3.xml</code> : </p><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">org</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.scala-lang"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scala-library"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rev</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.12.2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">force</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compile-&gt;compile(*),master(compile);runtime-&gt;runtime(*)"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">org</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.typesafe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"config"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rev</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.3.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">force</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compile-&gt;compile(*),master(compile);runtime-&gt;runtime(*)"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">org</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.scala-lang.modules"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scala-java8-compat_2.12"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rev</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.8.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">force</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"compile-&gt;compile(*),master(compile);runtime-&gt;runtime(*)"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> Ivy dit: </p><br><blockquote>  Ces deux <code>latest</code> gestionnaires de conflits prennent en compte l'attribut de d√©pendance de <code>force</code> . <br>  Ainsi, les d√©pendances directes peuvent d√©clarer un attribut <code>force</code> (voir d√©pendance), indiquant que de la d√©pendance directe et des r√©visions indirectes, la pr√©f√©rence devrait √™tre donn√©e aux r√©visions de d√©pendance directes. </blockquote><p>  Pour moi, cette formulation signifie que <code>force="true"</code> con√ßu afin de red√©finir la logique des <code>latest-wins</code> les <code>latest-wins</code> et d'√©muler la s√©mantique des <code>nearest-wins</code> les <code>nearest-wins</code> .  Mais, heureusement, cela n'√©tait pas destin√© √† se produire, et nous avons maintenant les <code>latest-wins</code> : comme nous pouvons le voir, <code>sbt 1.2.8</code> reprend <code>com.typesafe:config:1.3.1</code> . </p><br><p>  Cependant, on peut observer l'effet de <code>force="true"</code> lors de l'utilisation d'un gestionnaire de conflit strict, qui semble rompu. </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / conflictManager := <span class="hljs-type"><span class="hljs-type">ConflictManager</span></span>.strict</code> </pre> <br><p>  Le probl√®me est qu'un gestionnaire de conflits strict ne semble pas emp√™cher la substitution de version.  <code>show externalDependencyClasspath</code> retourne joyeusement <code>com.typesafe:config:1.3.1</code> . <br>  Un probl√®me connexe est que l'ajout d'une version de <code>com.typesafe:config:1.3.1</code> , qu'un gestionnaire de conflits strict a mis dans le graphique, conduit √† une erreur. </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / conflictManager := <span class="hljs-type"><span class="hljs-type">ConflictManager</span></span>.strict <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies ++= <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-string"><span class="hljs-string">"com.typesafe.play"</span></span> %% <span class="hljs-string"><span class="hljs-string">"play-ws-standalone"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"com.typesafe"</span></span> % <span class="hljs-string"><span class="hljs-string">"config"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.3.1"</span></span>, ) )</code> </pre> <br><p>  Cela ressemble √† ceci: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; show externalDependencyClasspath [info] Updating ... [error] com.typesafe#config;1.2.0 (needed by [com.typesafe#ssl-config-core_2.12;0.2.2]) conflicts with com.typesafe#config;1.3.1 (needed by [com.example#foo_2.12;1.0.0-SNAPSHOT]) [error] org.apache.ivy.plugins.conflict.StrictConflictException: com.typesafe#config;1.2.0 (needed by [com.typesafe#ssl-config-core_2.12;0.2.2]) conflicts with com.typesafe#config;1.3.1 (needed by [com.example#foo_2.12;1.0.0-SNAPSHOT])</code> </pre> <br><h2 id="o-poryadke-versionirovaniya">  √Ä propos du versioning </h2><br><p>  Nous avons mentionn√© la s√©mantique des <code>latest-wins</code> , sugg√©rant que les versions dans une repr√©sentation sous forme de cha√Æne peuvent appara√Ætre dans un certain ordre. <br>  Par cons√©quent, la gestion des versions fait partie de la s√©mantique. </p><br><h2 id="poryadok-versionirovaniya-v-apache-ivy">  Proc√©dure de versioning dans Apache Ivy </h2><br><p>  Ce <a href="">commentaire Javadoc</a> dit que lors de la cr√©ation du comparateur de versions, Ivy s'est concentr√© sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonction de comparaison des versions de PHP</a> : </p><br><blockquote>  Cette fonction remplace d'abord _, - et + par un point <code>.</code>  dans les repr√©sentations de cha√Ænes de versions et ajoute √©galement <code>.</code>  avant et apr√®s tout ce qui n'est pas un nombre.  Ainsi, par exemple, ¬´4.3.2RC1¬ª devient ¬´4.3.2.RC.1¬ª.  Elle compare ensuite les pi√®ces re√ßues de gauche √† droite. <br><br>  Pour les pi√®ces contenant des √©l√©ments sp√©ciaux ( <code>dev</code> , <code>alpha</code> ou <code>a</code> , <code>beta</code> ou <code>b</code> , <code>RC</code> ou <code>rc</code> , <code>#</code> , <code>pl</code> ou <code>p</code> ) *, les √©l√©ments sont compar√©s dans l'ordre suivant: <br><br>  <strong>toute cha√Æne qui n'est pas un √©l√©ment sp√©cial &lt;dev &lt;alpha = a &lt;beta = b &lt;RC = rc &lt;# &lt;pl = p.</strong> <br><br>  Ainsi, non seulement diff√©rents niveaux (par exemple, ¬´4.1¬ª et ¬´4.1.2¬ª) peuvent √™tre compar√©s, mais des versions sp√©cifiques √† PHP contenant des informations sur l'√©tat du d√©veloppement. <br>  * env.  perev. </blockquote><p>  Nous pouvons v√©rifier comment les versions sont ordonn√©es en √©crivant une petite fonction. </p><br><pre> <code class="scala hljs">scala&gt; :paste <span class="hljs-comment"><span class="hljs-comment">// Entering paste mode (ctrl-D to finish) val strategy = new org.apache.ivy.plugins.latest.LatestRevisionStrategy case class MockArtifactInfo(version: String) extends org.apache.ivy.plugins.latest.ArtifactInfo { def getRevision: String = version def getLastModified: Long = -1 } def sortVersionsIvy(versions: String*): List[String] = { import scala.collection.JavaConverters._ strategy.sort(versions.toArray map MockArtifactInfo) .asScala.toList map { case MockArtifactInfo(v) =&gt; v } } // Exiting paste mode, now interpreting. scala&gt; sortVersionsIvy("1.0", "2.0", "1.0-alpha", "1.0+alpha", "1.0-X1", "1.0a", "2.0.2") res7: List[String] = List(1.0-X1, 1.0a, 1.0-alpha, 1.0+alpha, 1.0, 2.0, 2.0.2)</span></span></code> </pre> <br><h2 id="poryadok-versionirovaniya-v-coursier">  Proc√©dure de versioning dans Coursier </h2><br><p>  La page GitHub sur la s√©mantique de r√©solution des d√©pendances a une section sur le versioning. </p><br><blockquote>  Coursier utilise l'ordre de versioning personnalis√© de Maven.  Avant de comparer, les repr√©sentations de cha√Ænes des versions sont d√©compos√©es en √©l√©ments s√©par√©s ... <br>  Pour obtenir de tels √©l√©ments, les versions sont s√©par√©es par les caract√®res., - et _ (et les s√©parateurs eux-m√™mes sont supprim√©s) et par des remplacements de lettre √† chiffre ou de num√©ro √† lettre. </blockquote><p>  Pour √©crire un test, cr√©ez un sous-projet avec les <code>libraryDependencies += "io.get-coursier" %% "coursier-core" % "2.0.0-RC2-6"</code> et ex√©cutez la <code>console</code> : </p><br><pre> <code class="scala hljs">sbt:foo&gt; helper/console [info] <span class="hljs-type"><span class="hljs-type">Starting</span></span> scala interpreter... <span class="hljs-type"><span class="hljs-type">Welcome</span></span> to <span class="hljs-type"><span class="hljs-type">Scala</span></span> <span class="hljs-number"><span class="hljs-number">2.12</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span> (<span class="hljs-type"><span class="hljs-type">OpenJDK</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-<span class="hljs-type"><span class="hljs-type">Bit</span></span> <span class="hljs-type"><span class="hljs-type">Server</span></span> <span class="hljs-type"><span class="hljs-type">VM</span></span>, <span class="hljs-type"><span class="hljs-type">Java</span></span> <span class="hljs-number"><span class="hljs-number">1.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_212). <span class="hljs-type"><span class="hljs-type">Type</span></span> in expressions <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> evaluation. <span class="hljs-type"><span class="hljs-type">Or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> :help. scala&gt; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> coursier.core.<span class="hljs-type"><span class="hljs-type">Version</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> coursier.core.<span class="hljs-type"><span class="hljs-type">Version</span></span> scala&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sortVersionsCoursier</span></span></span></span>(versions: <span class="hljs-type"><span class="hljs-type">String</span></span>*): <span class="hljs-type"><span class="hljs-type">List</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = | versions.toList.map(<span class="hljs-type"><span class="hljs-type">Version</span></span>.apply).sorted.map(_.repr) sortVersionsCoursier: (versions: <span class="hljs-type"><span class="hljs-type">String</span></span>*)<span class="hljs-type"><span class="hljs-type">List</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] scala&gt; sortVersionsCoursier(<span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0-alpha"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0+alpha"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0-X1"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0a"</span></span>, <span class="hljs-string"><span class="hljs-string">"2.0.2"</span></span>) res0: <span class="hljs-type"><span class="hljs-type">List</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = <span class="hljs-type"><span class="hljs-type">List</span></span>(<span class="hljs-number"><span class="hljs-number">1.0</span></span>-alpha, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>-<span class="hljs-type"><span class="hljs-type">X1</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>+alpha, <span class="hljs-number"><span class="hljs-number">1.0</span></span>a, <span class="hljs-number"><span class="hljs-number">2.0</span></span>, <span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>)</code> </pre> <br><p>  Il s'av√®re que Coursier commande les num√©ros de version dans un ordre compl√®tement diff√©rent de celui de Ivy. <br>  Si vous avez utilis√© des balises alphab√©tiques permissives, cet ordre peut entra√Æner une certaine confusion. </p><br><h2 id="o-diapazonah-versiy">  √Ä propos des plages de versions </h2><br><p>  Habituellement, j'√©vite d'utiliser des plages de versions, bien qu'elles soient largement utilis√©es dans les webjars et les modules npm republi√©s sur Maven Central.  Quelque chose comme <code>"is-number": "^4.0.0"</code> peut √™tre √©crit dans le module <code>"is-number": "^4.0.0"</code> qui correspondra √† <code>[4.0.0,5)</code> . </p><br><h2 id="obrabotka-diapazonov-versiy-v-apache-ivy">  Gestion des plages de versions dans Apache Ivy </h2><br><p>  Dans cet assemblage, <code>angular-boostrap:0.14.2</code> d√©pend de <code>angular:[1.3.0,)</code> . </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies ++= <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-string"><span class="hljs-string">"org.webjars.bower"</span></span> % <span class="hljs-string"><span class="hljs-string">"angular"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.4.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"org.webjars.bower"</span></span> % <span class="hljs-string"><span class="hljs-string">"angular-bootstrap"</span></span> % <span class="hljs-string"><span class="hljs-string">"0.14.2"</span></span>, ) )</code> </pre> <br><p>  L'appel de <code>show externalDependencyClasspath</code> dans <code>sbt 1.2.8</code> retournera <code>angular-bootstrap:0.14.2</code> et <code>angular:1.7.8</code> .  Et o√π est pass√© le <code>1.7.8</code> ?  Lorsqu'Ivy rencontre une gamme de versions, il va essentiellement sur Internet et trouve ce qu'il peut trouver, parfois m√™me en utilisant le screenscraping. </p><br><p>  Ce traitement des plages de versions rend les assemblys non r√©p√©titifs (l'ex√©cution du m√™me assemblage tous les quelques mois vous donne des r√©sultats diff√©rents). </p><br><h2 id="obrabotka-diapazonov-versiy-v-coursier">  Gestion des gammes de versions √† Coursier </h2><br><p>  Section R√©solution des d√©pendances de Coursier sur la <a href="">page</a> Github <br>  lit: </p><br><blockquote>  <strong>Des versions sp√©cifiques √† intervalles sont pr√©f√©r√©es</strong> <br>  Si votre module a une d√©pendance sur [1.0,2.0) et 1.4, l'approbation de la version sera effectu√©e en faveur de 1.4. <br>  S'il y a une d√©pendance sur 1.4, alors cette version sera pr√©f√©r√©e dans la gamme [1.0,2.0). </blockquote><p>  Cela semble prometteur. </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; show externalDependencyClasspath [warn] There may be incompatibilities among your library dependencies; run 'evicted' to see detailed eviction warnings. [info] * Attributed(/Users/eed3si9n/.sbt/boot/scala-2.12.8/lib/scala-library.jar) [info] * Attributed(/Users/eed3si9n/.coursier/cache/v1/https/repo1.maven.org/maven2/org/webjars/bower/angular/1.4.7/angular-1.4.7.jar) [info] * Attributed(/Users/eed3si9n/.coursier/cache/v1/https/repo1.maven.org/maven2/org/webjars/bower/angular-bootstrap/0.14.2/angular-bootstrap-0.14.2.jar)</code> </pre> <br><p>  <code>show externalDependencyClasspath</code> sur le m√™me assembly avec <code>angular-bootstrap:0.14.2</code> renvoie <code>angular-bootstrap:0.14.2</code> et <code>angular:1.4.7</code> comme pr√©vu.  Il s'agit d'une am√©lioration par rapport √† Ivy. </p><br><p>  Prenons le cas le plus compliqu√© lorsque plusieurs plages de versions disjointes sont utilis√©es.  Par exemple: </p><br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / scalaVersion := <span class="hljs-string"><span class="hljs-string">"2.12.8"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / organization := <span class="hljs-string"><span class="hljs-string">"com.example"</span></span> <span class="hljs-type"><span class="hljs-type">ThisBuild</span></span> / version := <span class="hljs-string"><span class="hljs-string">"1.0.0-SNAPSHOT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> root = (project in file(<span class="hljs-string"><span class="hljs-string">"."</span></span>)) .settings( name := <span class="hljs-string"><span class="hljs-string">"foo"</span></span>, libraryDependencies ++= <span class="hljs-type"><span class="hljs-type">List</span></span>( <span class="hljs-string"><span class="hljs-string">"org.webjars.npm"</span></span> % <span class="hljs-string"><span class="hljs-string">"randomatic"</span></span> % <span class="hljs-string"><span class="hljs-string">"1.1.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"org.webjars.npm"</span></span> % <span class="hljs-string"><span class="hljs-string">"is-odd"</span></span> % <span class="hljs-string"><span class="hljs-string">"2.0.0"</span></span>, ) )</code> </pre> <br><p>  L'appel de <code>show externalDependencyClasspath</code> dans <code>sbt 1.3.0-RC3</code> renvoie l'erreur suivante: </p><br><pre> <code class="plaintext hljs">sbt:foo&gt; show externalDependencyClasspath [info] Updating https://repo1.maven.org/maven2/org/webjars/npm/kind-of/maven-metadata.xml No new update since 2018-03-10 06:32:27 https://repo1.maven.org/maven2/org/webjars/npm/is-number/maven-metadata.xml No new update since 2018-03-09 15:25:26 https://repo1.maven.org/maven2/org/webjars/npm/is-buffer/maven-metadata.xml No new update since 2018-08-17 14:21:46 [info] Resolved dependencies [error] lmcoursier.internal.shaded.coursier.error.ResolutionError$ConflictingDependencies: Conflicting dependencies: [error] org.webjars.npm:is-number:[3.0.0,4):default(compile) [error] org.webjars.npm:is-number:[4.0.0,5):default(compile) [error] at lmcoursier.internal.shaded.coursier.Resolve$.validate(Resolve.scala:394) [error] at lmcoursier.internal.shaded.coursier.Resolve.validate0$1(Resolve.scala:140) [error] at lmcoursier.internal.shaded.coursier.Resolve.$anonfun$ioWithConflicts0$4(Resolve.scala:184) [error] at lmcoursier.internal.shaded.coursier.util.Task$.$anonfun$flatMap$2(Task.scala:14) [error] at scala.concurrent.Future.$anonfun$flatMap$1(Future.scala:307) [error] at scala.concurrent.impl.Promise.$anonfun$transformWith$1(Promise.scala:41) [error] at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:64) [error] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [error] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [error] at java.lang.Thread.run(Thread.java:748) [error] (update) lmcoursier.internal.shaded.coursier.error.ResolutionError$ConflictingDependencies: Conflicting dependencies: [error] org.webjars.npm:is-number:[3.0.0,4):default(compile) [error] org.webjars.npm:is-number:[4.0.0,5):default(compile)</code> </pre> <br><p>  Techniquement, c'est vrai, car  ces plages ne se chevauchent pas.  Alors que <code>sbt 1.2.8</code> r√©sout en <code>is-number:4.0.0</code> . </p><br><p>  En raison du fait que les plages de versions sont suffisamment courantes pour √™tre ennuyeuses, j'envoie une requ√™te Pull √† Coursier pour impl√©menter des r√®gles s√©mantiques plus <code>latest-wins</code> qui vous permettent de s√©lectionner des versions ult√©rieures dans les limites inf√©rieures des plages. <br>  Voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">coursier / coursier # 1284</a> . </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  La s√©mantique du r√©solveur d√©finit un chemin de classe sp√©cifique bas√© sur des contraintes d√©finies par l'utilisateur. </p><br><p>  Habituellement, les diff√©rences de d√©tails se manifestent de diff√©rentes mani√®res pour r√©soudre les conflits de version. </p><br><ul><li>  Maven utilise la strat√©gie de <code>nearest-wins</code> les <code>nearest-wins</code> , qui peut r√©trograder les d√©pendances transitives. </li><li>  Ivy utilise la strat√©gie des <code>latest-wins</code> . </li><li>  Coursier utilise principalement la strat√©gie des <code>latest-wins</code> , tout en essayant de sp√©cifier les versions plus strictement. </li><li>  Le gestionnaire de plage de versions Ivy va sur Internet, ce qui rend la m√™me version non r√©p√©table. </li><li>  Coursier et Ivy organisent des repr√©sentations de cha√Ænes de versions de mani√®res tr√®s diff√©rentes. </li></ul><br><blockquote>  M√™me ces subtilit√©s de l'√©cosyst√®me Scala ne seront pas discut√©es lors de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ScalaConf</a> le 26 novembre √† Moscou.  Artem Seleznev <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">introduira</a> la pratique de travailler avec la base de donn√©es en programmation fonctionnelle sans JDBC.  Wojtek Pitula parlera de l'int√©gration et expliquera comment il a cr√©√© l'application dans laquelle il a plac√© toutes les biblioth√®ques de travail.  Et 16 autres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapports</a> pleins de hardcore technique seront pr√©sent√©s √† la conf√©rence. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr474106/">https://habr.com/ru/post/fr474106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr474090/index.html">Salaires de Developer √† Arm√©nie</a></li>
<li><a href="../fr474092/index.html">Section backend de DUMP Kazan: architecture d'application cloud, microservices sortants, DDD et plus</a></li>
<li><a href="../fr474094/index.html">√âditeur de diagramme - sur l'amiti√© entre Vue.js et MxGraph</a></li>
<li><a href="../fr474096/index.html">Langages de programmation populaires 2019 des utilisateurs de hh.ru</a></li>
<li><a href="../fr474104/index.html">Un moyen universel de personnaliser l'apparence d'une application WinForms (en utilisant l'exemple de FAQ.Net)</a></li>
<li><a href="../fr474112/index.html">Optimiser la distribution en rack des serveurs</a></li>
<li><a href="../fr474114/index.html">Nous vous invitons √† GDG DevFest Moscou 2019 - une conf√©rence informelle sur les TI</a></li>
<li><a href="../fr474116/index.html">Comment vous n'avez pas besoin de r√©diger votre consentement au traitement des donn√©es personnelles</a></li>
<li><a href="../fr474118/index.html">Le livre "inDriver: de Yakutsk √† la Silicon Valley. L'histoire de la cr√©ation d'une entreprise technologique mondiale "</a></li>
<li><a href="../fr474122/index.html">De la th√©orie √† la pratique: comment la blockchain est utilis√©e en aviation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>