<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Tic Tac Toe, Parte 5: C ++ Backend Boost.Beast, HTTP   じ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tic Tac Toe: Ciclo de contenido 

 En este art铆culo, consideraremos una implementaci贸n de back-end usando la biblioteca C ++ Boost.Beast usando un eje...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tic Tac Toe, Parte 5: C ++ Backend Boost.Beast, HTTP</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460991/"><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tic Tac Toe: Ciclo de contenido</a> </blockquote><p>  En este art铆culo, consideraremos una implementaci贸n de back-end usando la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C ++ Boost.Beast</a> usando un ejemplo de un servidor s铆ncrono.  La misma funcionalidad que en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art铆culo anterior</a> : obtenemos un n煤mero aleatorio del 0 al 8 inclusive desde el backend.  Result贸 que levantar el contenedor para Bestia no es m谩s dif铆cil que para Flask.  Lo principal es encontrar de inmediato un buen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ejemplo adecuado</a> .  Aqu铆 tom茅 un Dockerfile para mi proyecto. </p><br><p><img src="https://habrastorage.org/webt/it/h3/mk/ith3mklwv8-l2qfad0txn8myj1q.jpeg" alt="imagen"></p><br><p>  La imagen se tom贸 de la presentaci贸n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este informe</a> para atraer la atenci贸n, as铆 como para aumentar el estado de 谩nimo y la motivaci贸n de quienes no conocen C ++. </p><a name="habracut"></a><br><h6 id="ustanovka-proekta">  Proyecto de instalacion </h6><br><p>  Clonamos el proyecto en su computadora: </p><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/nomhoi/tic-tac-toe-part5.git</code> </pre> <br><p>  Lanzamiento de contenedores: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> tic-tac-toe-part5 docker-compose up -d</code> </pre> <br><p>  Construimos la aplicaci贸n web: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> front npm install npm run-script build</code> </pre> <br><p>  Abra el navegador en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http: // localhost</a> . </p><br><h6 id="docker-konteynery">  Contenedores Docker </h6><br><p>  El servicio del <strong>matraz</strong> fue reemplazado por el servicio de la <strong>bestia</strong> . </p><br><p>  <strong>docker-compose.yml:</strong> </p><br><pre> <code class="plaintext hljs">version: '3.6' services: nginx: image: nginx:alpine container_name: nginx volumes: - ./front/public:/usr/share/nginx/html - ./default.conf:/etc/nginx/conf.d/default.conf:ro ports: - "80:80" depends_on: - beast networks: - backend beast: container_name: beast build: context: beast/ dockerfile: Dockerfile ports: - "8080:8080" networks: - backend networks: backend: name: backend</code> </pre> <br><h6 id="frontend">  Frontend </h6><br><p>  Aqu铆, solo <strong>se</strong> modific贸 la configuraci贸n en el archivo de configuraci贸n nginx'a <strong>default.conf</strong> . </p><br><pre> <code class="plaintext hljs">location /number { proxy_pass http://beast:8080; }</code> </pre> <br><h6 id="bekend">  Backend </h6><br><p>  Dockerfile fue tomado aqu铆: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/vinniefalco/CppCon2018</a> . </p><br><pre> <code class="plaintext hljs">FROM ubuntu:bionic AS build # Install tools required for the project RUN apt-get update \ &amp;&amp; apt-get install gcc -y \ &amp;&amp; apt-get install g++ -y \ &amp;&amp; apt-get install cmake -y \ &amp;&amp; apt-get install wget -y # Install Boost RUN cd /home \ &amp;&amp; wget http://downloads.sourceforge.net/project/boost/boost/1.70.0/boost_1_70_0.tar.gz \ &amp;&amp; tar xfz boost_1_70_0.tar.gz \ &amp;&amp; rm boost_1_70_0.tar.gz \ &amp;&amp; cd boost_1_70_0 \ &amp;&amp; ./bootstrap.sh --with-libraries=system \ &amp;&amp; ./b2 install # Copy the entire project and build it COPY ./app /cpp/src/project/ WORKDIR /cpp/src/project/ RUN g++ http_server_sync.cpp -o http_server_sync -lpthread FROM ubuntu:bionic COPY --from=build /cpp/src/project /app/ ENTRYPOINT ["/app/http_server_sync", "0.0.0.0", "8080", "/app/wwwroot"] EXPOSE 8080</code> </pre> <br><p>  Como puede ver, se utiliza la tecnolog铆a de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ensamblaje de etapas m煤ltiples</a> .  En la primera etapa, se instalan los paquetes necesarios y las bibliotecas Boost, se <strong>construye el</strong> servidor <strong>http_server_sync</strong> .  En la segunda etapa, el servidor terminado se copia en el contenedor final y se inicia all铆. </p><br><p>  <a href="https://www.boost.org/doc/libs/1_70_0/libs/beast/example/http/server/sync/">Aqu铆</a> se tom贸 el c贸digo fuente del servidor s铆ncrono.  Se agreg贸 una funci贸n <strong>handle_number_request</strong> para manejar la solicitud en <strong>/ number</strong> . </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Return a random number template&lt; class Body, class Allocator, class Send&gt; void handle_number_request( beast::string_view doc_root, http::request&lt;Body, http::basic_fields&lt;Allocator&gt;&gt;&amp;&amp; req, Send&amp;&amp; send) { http::response&lt;http::string_body&gt; res; res.version(11); // HTTP/1.1 res.result(http::status::ok); res.set(http::field::server, "Beast"); res.body() = std::to_string(rand() % 9); res.prepare_payload(); return send(std::move(res)); }</span></span></code> </pre> <br><p>  En el cuerpo de la respuesta, escribimos un n煤mero aleatorio del 0 al 8 inclusive. </p><br><h6 id="zaklyuchenie">  Conclusi贸n </h6><br><p>  Como puede ver, Flask nos ayud贸 r谩pidamente a tener una idea general de la interacci贸n entre la interfaz y el backend, r谩pidamente obtuvimos el marco de toda la aplicaci贸n.  Al desarrollar el backend de Beast, ya entendimos c贸mo se organiz贸 la interacci贸n y nos centramos solo en encontrar el contenedor correcto y escribir el servidor de back-end. </p><br><p>  Como tarea, puede intentar rehacer el servicio nginx utilizando una compilaci贸n de varias etapas, de modo que la interfaz se ensamble en la primera etapa.  Ahora el servicio nginx est谩 configurado para que sea m谩s conveniente llevar a cabo el desarrollo front-end, sin ensamblaje innecesario. </p><br><p>  Segunda tarea: intenta eliminar el servicio nginx y eleva la interfaz en el servicio bestia.  Creo que deber铆a funcionar. </p><br><p>  Publique sus decisiones en los comentarios. </p><br><p>  La tercera tarea: meditar sobre el tema de la escalabilidad, vertical y horizontal.  C贸mo combinar estos dos lenguajes, C ++ y Python, en un marco web para resolver este problema. </p><br><h6 id="repozitoriy-na-github">  Repositorio de GitHub </h6><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/nomhoi/tic-tac-toe-part5</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/460991/">https://habr.com/ru/post/460991/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460981/index.html">Implementaci贸n MVVM de la configuraci贸n de la aplicaci贸n WPF construida sobre la base del marco Catel</a></li>
<li><a href="../460983/index.html">No soy real</a></li>
<li><a href="../460985/index.html">14 mejores herramientas Kanban en 2019</a></li>
<li><a href="../460987/index.html">"Modo Dios para Internet": seguimiento de usuarios a trav茅s de extensiones Chrome y Firefox</a></li>
<li><a href="../460989/index.html">驴Qu茅 lenguaje - D, Go u Rust tiene mejores perspectivas para reemplazar a C y por qu茅?</a></li>
<li><a href="../460993/index.html">Robando EDS usando Man-In-The-Disk</a></li>
<li><a href="../460995/index.html">Implementamos el proyecto ML usando Flask como REST API y lo hacemos accesible a trav茅s de la aplicaci贸n Flutter</a></li>
<li><a href="../460997/index.html">Los turistas ayudan a los cient铆ficos a estimar la cantidad de grandes depredadores</a></li>
<li><a href="../460999/index.html">Juguemos un peque帽o juego con Lamoda</a></li>
<li><a href="../461003/index.html">An谩lisis: c贸mo funciona el mercado de comercio de alta frecuencia en la bolsa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>