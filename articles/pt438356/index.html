<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôéüèº üåâ üìî Arquitetura certificada Fast Track (DWFT) do SQL Server Data Warehouse: o que significa e como funciona üñêüèΩ üëÉ üë®‚Äçüë®‚Äçüëß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Grandes fabricantes de software popular cuidam de seus clientes de maneiras diferentes. Uma maneira √© criar um programa de certifica√ß√£o. Para que, qua...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arquitetura certificada Fast Track (DWFT) do SQL Server Data Warehouse: o que significa e como funciona</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bull/blog/438356/">  Grandes fabricantes de software popular cuidam de seus clientes de maneiras diferentes.  Uma maneira √© criar um programa de certifica√ß√£o.  Para que, quando os clientes pensem entre configura√ß√µes de hardware de software espec√≠fico, o fabricante desse software possa apontar com um dedo com confian√ßa: "Leve isso e tudo ficar√° bem". <br><br>  Esse programa para o SQL Server foi desenvolvido pela Microsoft - SQL Server Fast Track (DWFT).  Certifica as configura√ß√µes de data warehouses - aquelas que atendem aos requisitos da carga de trabalho e podem ser implementadas com menos risco, custo e complexidade.  Parece √≥timo, mas √© interessante avaliar esses crit√©rios na pr√°tica.  Para isso, analisaremos detalhadamente uma das configura√ß√µes que possuem a certifica√ß√£o Fast Track do SQL Server Data Warehouse. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12e/15b/2a9/12e15b2a946ab669b59875e70afb9210.png"><br><a name="habracut"></a><br>  Para iniciantes - um pouco mais sobre o DWFT.  Este programa inclui n√£o apenas a certifica√ß√£o de arquiteturas de refer√™ncia de fornecedores de sistemas, mas tamb√©m v√°rios guias de pr√°ticas recomendadas - se voc√™ deseja criar algo pr√≥prio.  A Microsoft est√° atualizando o programa para o desenvolvimento de novos recursos e com base nos coment√°rios dos clientes. <br><br>  Com o armazenamento compat√≠vel com DWFT, voc√™ pode ter certeza de que todos os recursos do SQL Server estar√£o dispon√≠veis.  As tecnologias de armazenamento em coluna na mem√≥ria melhoram o desempenho em cargas de trabalho transacionais e anal√≠ticas.  Os big data relacionais estruturados e n√£o estruturados tradicionais ser√£o suportados - no Hadoop, Spark ou Azure Data Lake.  Com o recurso PolyBase do SQL Server, voc√™ pode combinar big data no SQL Server Universe, consultar dados relacionais e n√£o estruturados, mesclando-os sem precisar mov√™-los. <br><br>  Uma lista geral de arquiteturas certificadas est√° na parte inferior <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desta p√°gina</a> .  A seguir, apresentaremos um deles. <br><br><h2>  Arquitetura "Refer√™ncia" </h2><br>  Agora - para analisar uma das arquiteturas certificadas pela DWFT.  Baseia-se em nossos servidores BullSequana S400 e S800 e no armazenamento Dell EMC VMAX.  O armazenamento pode ser aumentado em at√© 4 PB se voc√™ dimensionar o servidor BullSequana S para 32 processadores. <br><br>  Para garantir alta disponibilidade do banco de dados, o Cluster de Failover do Windows tamb√©m √© recomendado.  Ou seja, o uso de pelo menos dois servidores.  Por meio dos servi√ßos de cluster da Microsoft, um servidor de banco de dados √© configurado como servidor prim√°rio (ativo) e o segundo como servidor secund√°rio (passivo).  O servidor passivo deve ter a mesma configura√ß√£o que o servidor principal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f35/1eb/de5/f351ebde5469e6765a5a12651a1c4b6d.png"><br>  <i>Lista e caracter√≠sticas dos componentes da infraestrutura</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/088/6ed/f56/0886edf56802b4666692121973837d1b.png"><br>  <i>Esbo√ßo geral de duas configura√ß√µes</i> <br><br><h2>  Componentes de hardware </h2><br><h3>  Servidor BullSequana S800 </h3><br>  O servidor BullSequana S800 √© um servidor de oito processadores com at√© 12 TB de mem√≥ria, E / S avan√ßada e adi√ß√µes de m√≥dulos com armazenamento SSD / HDD / NVMe ou com GPUs NVidia Tesla. <br><br>  A linha BullSequana S est√° dispon√≠vel em op√ß√µes do S200 com dois processadores e do S3200 com 32 processadores.  A etapa de escala da linha √© de dois processadores.  Para a arquitetura DWFT do SQL Server 2017, os modelos S200, S400 e S800 s√£o igualmente certificados. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/446/511/28e/44651128e0526bf86c0665139ced4b2b.png"><br><br><h3>  Adaptador de barramento host Emulex LPe31002-M6 16 Gbps </h3><br>  Comparados √†s gera√ß√µes anteriores, os adaptadores Emulex Gen 6 FC com arquitetura din√¢mica de m√∫ltiplos n√∫cleos oferecem maior desempenho, menor lat√™ncia, melhores diagn√≥sticos e capacidade de gerenciamento.  Ele fornece velocidades de at√© 12.800 MB / s (duas portas 32GFC ou quatro portas 16GFC), uma taxa de transfer√™ncia de 1,6 milh√µes de IOPS por adaptador.  A vers√£o de quatro portas do LPe32004 fornece at√© 3,2 milh√µes de IOPS por adaptador. <br><br><h3>  Brocade 6510 Switch </h3><br>  O Brocade 6510 Switch da Broadcom √© um switch Fibre Channel de 1U e 48 portas montado em servidor. <br><ul><li>  Desempenho Fibre Channel: 16 Gb / s <br></li><li>  At√© 48 portas que fornecem taxa de transfer√™ncia agregada de 768 Gb / s <br></li><li>  Entroncamento de quadro de at√© 128 Gbps <br></li><li>  Consumo de energia: 14 W / Gb / s <br></li></ul><br><h3>  Dell EMC VMAX 250F </h3><br>  O VMAX All Flash se concentra no volume de dados de petabytes e no grande processamento de transa√ß√µes.  VMAX All Flash dimensiona e integra centenas de processadores multin√∫cleo Intel para cargas de trabalho din√¢micas mistas.  O elemento principal do VMAX All Flash √© o V-Brick - √© poss√≠vel combinar at√© oito V-Bricks como um sistema √∫nico com recursos de conectividade, processamento e largura de banda completamente separados.  Cada V-Brick suporta at√© 72 n√∫cleos de processador para dimensionar o desempenho - at√© 576 n√∫cleos por matriz.  Para dimensionamento, os m√≥dulos do Flash Capacity Packs s√£o usados. <br><br>  O armazenamento deve atender claramente aos requisitos de processamento de transa√ß√µes em tempo real (OLTP) de alta precis√£o, aplicativos virtualizados e bancos de dados Oracle e SQL.  Os requisitos s√£o atendidos para milh√µes de IOPS, taxa de transfer√™ncia de petabytes e desempenho previs√≠vel (tempo de resposta de 350 Œºs). <br><br>  Por fim, a arquitetura deve ter isolamento aprimorado de erros, verifica√ß√£o confi√°vel da integridade dos dados e atualiza√ß√µes comprovadas de hardware e software √† prova de falhas.  Outro requisito: disponibilidade para opera√ß√µes 24x7 usando o software SRDF. <br><br><h2>  Como o armazenamento est√° conectado </h2><br>  Configura√ß√£o do VMAX 250F (All Flash): <br><br><ul><li>  2 vBrick com 2 TB de cache por bloco. <br></li><li>  Portas FC do host de 32 * 16 Gbps <br></li><li>  Flash de 64 * 3,84 TB (Raid5-7 + 1) + reserva <br></li></ul><br>  Apar√™ncia do VMAX vBricks em um rack: <br><br><img src="https://habrastorage.org/webt/yb/aw/tg/ybawtgjefv2ri-qv9yh-ka_0rlo.jpeg"><br><br>  Localiza√ß√µes do porto: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/902/5c3/d8c/9025c3d8cc9f68e072c8a29fe4e400ff.png"><br><br>  A configura√ß√£o do array l√≥gico em uma arquitetura certificada est√° alinhada com a configura√ß√£o e as melhores pr√°ticas do Dell EMC. <br><br><ul><li>  Vers√£o do HyperMaxOS: 5977.1131.1131 <br></li><li>  Criptografia: Ativada <br></li><li>  Compacta√ß√£o: desativada <br></li><li>  Perfil de desempenho do sistema: b√°sico <br></li></ul><br>  Distribui√ß√£o principal: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9a4/e37/d6f/9a4e37d6fe21659c149817c2039458af.png" width="550" height="284"><br><img src="https://habrastorage.org/getpro/habr/post_images/f03/548/2e3/f035482e3c58abe81d2c92d5cc28e44d.png" width="550" height="353"><br><br><h3>  Configura√ß√£o de LUN </h3><br>  Todos os LUNs s√£o configurados como THIN LUNs em um pool virtual criado em 64 unidades.  Os dados s√£o distribu√≠dos por todas as unidades flash nos dois vBricks.  No total, 35 LUNs s√£o definidos no Dell EMC VMAX: <br><br><ul><li>  16 LUNs de 8 TB para dados do usu√°rio (total de 128 TB) <br></li><li>  16 LUN ou 2 TB para tempdb (total de 32 TB) <br></li><li>  Tamanho de 2 LUN de 2 TB para a revista (total de 4 TB) <br></li></ul><br>  As portas front-end do Fibre Channel (FC) s√£o configuradas para usar quatro dom√≠nios de failover no modo de porta virtual.  Cada porta √© conectada um a um a uma porta no VMAX, que serve apenas um LUN de dados e um LUN Tempdb.  Para cada um deles, existe um LUN para separar as opera√ß√µes de leitura e grava√ß√£o no LUN (ao executar GROUP BY ou ORDER BY, os dados s√£o gravados primeiro no Tempdb antes de serem usados ‚Äã‚Äãem outra parte da consulta ou apresentados ao usu√°rio).  Cada LUN √© mapeado para quatro portas FA e √© acess√≠vel de quatro maneiras. <br><br>  Mapeamento de porta: <br><br><img src="https://habrastorage.org/webt/27/qx/w7/27qxw7rwce63tllr2-sx0xfef10.png"><br><br><h3>  Grupos de armazenamento VMAX (SG) </h3><br>  Os seguintes grupos de armazenamento foram criados: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/19e/02a/f23/19e02af23e89d960a182d53196d0c2b8.png"><br><br><h3>  Cache de leitura e grava√ß√£o </h3><br>  O cache do VMAX √© global, usado dinamicamente para leitura e grava√ß√£o.  As configura√ß√µes padr√£o s√£o usadas para limitar a espera pela grava√ß√£o no sistema.  Como o sistema usa apenas um aplicativo, n√£o h√° necessidade de criar parti√ß√µes de cache. <br><br><h3>  Conecte-se ao servidor e ao MPIO </h3><br>  O Windows Server 2016 usou seu pr√≥prio MPIO.  Sua alternativa √© o software PowerPath para aplicativos Dell EMC. <br><br><h3>  Roteamento de cabos </h3><br>  As portas superiores dos comutadores Brocade s√£o usadas para conectar o servidor BullSequana S800.  Cada porta par do Emulex HBA √© conectada √†s portas superiores √† esquerda do comutador Brocade.  Cada uma das portas Outbus Emulex HBA est√° conectada √†s portas superiores √† esquerda do comutador Brocade_2.  As portas inferiores s√£o usadas apenas para conectar as portas Dell EMC VMAX FC. <br><br><h3>  Configura√ß√£o de servidor √∫nico </h3><br>  O diagrama a seguir mostra o cabeamento entre o BullSequana S800 e o Dell EMC VMAX 250F.  O posicionamento do HBA pode variar dependendo do posicionamento dos m√≥dulos do HBA. <br><br><img src="https://habrastorage.org/webt/tp/v_/n2/tpv_n21oqa-0yj-yjgjgddzt6sa.png"><br><br><h3>  Conex√µes de cabo na configura√ß√£o do servidor de alta disponibilidade </h3><br>  O diagrama abaixo mostra como conectar dois servidores BullSequana S800 em uma configura√ß√£o de alta disponibilidade com um Dell EMC VMAX 250F.  Mais uma vez, o posicionamento do HBA pode variar dependendo do posicionamento dos m√≥dulos do HBA. <br><br><img src="https://habrastorage.org/webt/p0/la/qp/p0laqpph-_vtnh5brejensuzfb8.png"><br><br>  Acima, no lado esquerdo do comutador Brocade, a metade esquerda das portas do primeiro servidor S800 √© destacada, e no lado direito da imagem est√£o as portas corretas e o segundo servidor S800 est√° conectado a elas. <br><br><h2>  Configura√ß√£o do servidor BullSequana S800 </h2><br><h3>  BIOS do sistema </h3><br>  Todos os par√¢metros, exceto a configura√ß√£o de rede BMC, foram deixados nas configura√ß√µes padr√£o de f√°brica.  A configura√ß√£o Processador l√≥gico na se√ß√£o Configura√ß√µes do processador permanece por padr√£o ativada.  Isso ativa a tecnologia Intel Hyper-Threading, que maximiza o n√∫mero de processadores l√≥gicos dispon√≠veis para o SQL Server. <br><br><h3>  Emulex LPe31002-M6 16 Gbps </h3><br>  Todos os HBAs Emulex est√£o dispon√≠veis atrav√©s do Emulex OneCommand Manager.  As vers√µes de firmware e driver usadas durante a certifica√ß√£o Microsoft DWH Fast Track s√£o 12.0.193.13. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/447/81a/349/44781a34977a699e1b070560f0feb19f.png"><br><br>  √â importante que todos os HBAs tenham o mesmo firmware.  O firmware mais recente pode ser baixado do site da Broadcom.  As atualiza√ß√µes de firmware podem ser executadas usando o bot√£o "Download de firmware" no Emulex OneCommand Manager.  Alterar o driver e / ou firmware pode exigir uma reinicializa√ß√£o do servidor. <br><br>  Com exce√ß√£o do par√¢metro QueryDept, que foi alterado de 32 para 64, todos os outros par√¢metros de host e HBA permaneceram por padr√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/576/2b9/26f/5762b926fabf810b5bfbcfc136c2b25a.png"><br><br><h2>  Configura√ß√£o do Windows Server 2016 </h2><br><h3>  Instala√ß√£o </h3><br>  A instala√ß√£o do Windows foi realizada com as configura√ß√µes padr√£o.  Ap√≥s a instala√ß√£o, a fun√ß√£o Windows MPIO foi ativada, conforme mostrado na figura abaixo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d0f/432/266/d0f432266c604ae29130377f0fb24ca3.png"><br><br>  Depois de instalar a fun√ß√£o MPIO, o Windows deve ser reiniciado. <br><br><h3>  Instalando drivers e pacotes </h3><br>  √â importante ter drivers e pacotes no armazenamento USB, pois eles n√£o est√£o inclu√≠dos no cat√°logo de drivers do Windows inclu√≠do no DVD de instala√ß√£o (os adaptadores de rede s√£o mais recentes que o Windows Server 2016).  Ap√≥s a instala√ß√£o do Windows e MPIO, os seguintes drivers e pacotes foram instalados (na ordem especificada): <br><br><ol><li>  Chipset INF Intel vers√£o 10.1.17711.8088_PV ou posterior (reinicializa√ß√£o necess√°ria) </li><li>  Driver MegaRAID para Windows 2016 vers√£o 6.14-6.714.05.00-WHQL (√© necess√°rio reiniciar) </li><li>  PROWinx64 para fam√≠lia Intel XL7xx vers√£o 23_2 ou posterior </li><li>  OneInstall-Setep-12.0.193.18.exe ou posterior </li></ol><br><h3>  Configura√ß√µes de energia </h3><br>  Para maximizar o desempenho, o servidor foi configurado para usar um plano de alto desempenho. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3a/ecb/ff8/c3aecbff80d68ec3fc5ae422d9ac7cc9.png"><br><br><h3>  Bloquear p√°ginas na mem√≥ria </h3><br>  Para impedir que o sistema operacional Windows envie p√°ginas de dados para a mem√≥ria virtual em disco e o SQL Server possa usar o processo para salvar dados na mem√≥ria f√≠sica (RAM), a op√ß√£o Bloquear p√°ginas na mem√≥ria da conta de servi√ßo do SQL Server foi ativada.  Voc√™ deve reiniciar o SQL Server para que esta op√ß√£o entre em vigor. <br><br><h3>  Unidades do Windows </h3><br>  Depois que o zoneamento √© conclu√≠do nos comutadores VMAX e LUN, eles s√£o exibidos no Gerenciamento de Disco do Windows. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/46d/83a/b05/46d83ab059f166a677bd464779d7f0f1.png" width="500" height="366"><br><br>  Se todas as unidades estiverem formatadas corretamente, o Gerenciamento de Disco do Windows exibir√° a seguinte lista: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2f/f25/ccb/f2ff25ccba6e28ddcdb71ada57164c1c.png"><br><br>  Existem 34 LUNs no total: <br><br><ul><li>  16 LUNs de 8 TB para dados do usu√°rio (total de 128 TB) <br></li><li>  16 LUN ou 2 TB para tempdb (total de 32 TB) <br></li><li>  Tamanho de 2 LUN de 2 TB para a revista (total de 4 TB) <br></li></ul><br>  Para arquiteturas de refer√™ncia DWFT, a Dell EMC e eu recomendamos o uso de pontos de montagem para volumes em vez de letras de unidade.  Recomendamos que voc√™ atribua nomes de volume e ponto de montagem apropriados para simplificar a solu√ß√£o de problemas e a an√°lise de desempenho.  Idealmente, os nomes dos pontos de montagem devem ser atribu√≠dos de maneira a simplificar a identifica√ß√£o do volume VMAX para esse volume do Windows. <br><br>  A tabela a seguir mostra os r√≥tulos de volume e os caminhos de acesso usados ‚Äã‚Äãpara a configura√ß√£o de refer√™ncia: <br><br><img src="https://habrastorage.org/webt/9a/g1/sp/9ag1sppoc0gc9op8bzaxc8cjalg.png"><br><br>  Depois que todos os LUNs estiverem prontos, o diret√≥rio C: \ Storage ter√° a seguinte apar√™ncia: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fb/109/afd/2fb109afdaf5d746922ae22c1bc042df.png"><br><br><h3>  MPIO </h3><br>  A pol√≠tica MPIO para todos os volumes √© definida na se√ß√£o Menos departamento da fila. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdc/503/c25/cdc503c25e2efa569bd7fc1f73792a06.png" width="550" height="655"><br><h3>  Configura√ß√£o do Windows Defender </h3><br>  O Windows Defender √© um componente antiv√≠rus e anti-spam padr√£o.  Para impedir que os dados e arquivos de log do SQL Server sejam verificados (para desempenho), as seguintes exce√ß√µes devem ser adicionadas. <br><br>  Pastas em um servidor: <br><br><ul><li>  C: \ Arquivos de Programas (x86) \ Microsoft SQL Server <br></li><li>  C: \ Arquivos de Programas \ Microsoft SQL Server <br></li><li>  C: \ Storage (solu√ß√£o de servidor √∫nico) <br></li></ul><br>  Pastas em uma solu√ß√£o de alta disponibilidade (HA): <br><ul><li>  C: \ Arquivos de Programas (x86) \ Microsoft SQL Server <br></li><li>  C: \ Arquivos de Programas \ Microsoft SQL Server <br></li><li>  C: \ ClusterStorage (solu√ß√£o altamente acess√≠vel) <br></li><li>  C: \ Windows \ Cluster <br></li><li>  Unidade de quorum <br></li><li>  Unidade MSDTC <br></li></ul><br>  Tipos de arquivo: <br><ul><li>  .ldf <br></li><li>  .mdf <br></li><li>  .ndf <br></li></ul><br><h2>  Configura√ß√£o do SQL Server 2017 Enterprise Edition </h2><br>  A instala√ß√£o √© feita principalmente usando as configura√ß√µes padr√£o.  Algumas exce√ß√µes est√£o listadas abaixo.  Durante a instala√ß√£o do SQL Server 2017, a op√ß√£o Executar tarefa de manuten√ß√£o de desempenho est√° selecionada. <br><br><h3>  Configura√ß√£o Tempdb </h3><br>  O banco de dados Tempdb est√° configurado para usar 16 arquivos do mesmo tamanho.  Arquivos de dados Tempdb est√£o localizados em 16 volumes.  O arquivo de log de transa√ß√µes tempdb √© colocado no disco em que os logs s√£o mantidos.  O zoom autom√°tico est√° ativado. <br><br><h3>  Op√ß√µes de inicializa√ß√£o para uma inst√¢ncia do SQL Server </h3><br>  O SQL Server 2017 define automaticamente os sinalizadores de rastreamento -T1117 e -T1118, para que voc√™ n√£o precise mais adicion√°-los √†s op√ß√µes de inicializa√ß√£o da inst√¢ncia.  Se voc√™ n√£o usar o sinalizador de rastreamento -T834, ser√° obtido um melhor desempenho.  A Microsoft recomenda n√£o usar esse sinalizador ao usar √≠ndices de armazenamento em colunas em cluster. <br><br>  O √∫nico par√¢metro inicial √© o sinalizador -E: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4e4/b12/008/4e4b120089f219131f2105e7bcfd56f4.png"><br><br>  Para obter mais informa√ß√µes sobre este t√≥pico, consulte Microsoft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DBCC TRACEON -</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Op√ß√µes de inicializa√ß√£o do servi√ßo de mecanismo de banco de dados</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sinalizadores de rastreamento</a> . <br><br><h3>  Mem√≥ria m√°xima do SQL Server </h3><br>  A mem√≥ria m√°xima do servidor para essa arquitetura de refer√™ncia deve ser definida como 11.534.336 MB ou 11.264 GB, em que 1,024 GB √© alocado para o sistema operacional.  Se aplicativos adicionais compartilharem o servidor, voc√™ dever√° ajustar a quantidade de mem√≥ria dispon√≠vel para o sistema operacional. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/11f/8bd/a17/11f8bda17baade55cca173555e3ee99c.png"><br><br><h3>  Concorr√™ncia m√°xima (MAXDOP) </h3><br>  O grau m√°ximo de paralelismo √© definido em 448, que corresponde ao n√∫mero de n√∫cleos l√≥gicos dispon√≠veis no servidor. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f9/648/f9e/2f9648f9e3adfac0b1aa229c29c6c78e.png"><br><br><h3>  Gerenciamento de recursos </h3><br>  Dependendo do tipo de carga de trabalho usada - o armazenamento com o maior n√∫mero de linhas (RS) ou o armazenamento em coluna em cluster (CS) -, voc√™ deve configurar o Administrador de Recursos adequadamente. <br><br>  Para o armazenamento de cadeias, o par√¢metro regulador de recursos usado para limitar a quantidade m√°xima de mem√≥ria √© definido como 12 por cento. <br><br><pre><code class="plaintext hljs">ALTER WORKLOAD GROUP [default] WITH (request_max_memory_grant_percent=12); ALTER RESOURCE GOVERNOR RECONFIGURE;</code> </pre> <br>  Para armazenamento de coluna, a configura√ß√£o do controlador de recurso usada para limitar a quantidade m√°xima de mem√≥ria √© definida como 25 por cento. <br><br><pre> <code class="plaintext hljs">ALTER WORKLOAD GROUP [default] WITH (request_max_memory_grant_percent=25); ALTER RESOURCE GOVERNOR RECONFIGURE;</code> </pre> <br><h3>  Configura√ß√£o do banco de dados </h3><br>  O banco de dados do armaz√©m de dados foi configurado para usar v√°rios grupos de arquivos, cada um contendo 16 arquivos distribu√≠dos igualmente em dezesseis volumes de dados.  Todos os arquivos podem crescer automaticamente.  Grupos de arquivos foram configurados com o par√¢metro AUTOGROW_ALL_FILES para garantir que todos os arquivos em um determinado grupo de arquivos permane√ßam os mesmos. <br><br><pre> <code class="plaintext hljs">ALTER DATABASE &lt;database name&gt; MODIFY FILEGROUP &lt;file group name&gt; AUTOGROW_ALL_FILES;</code> </pre> <br><h3>  Complementos para a arquitetura de link de alta disponibilidade (HA) </h3><br>  A arquitetura de refer√™ncia de alta disponibilidade usa o Windows Failover Clustering para fornecer alta disponibilidade.  A configura√ß√£o de um cluster de failover do Windows tem problemas adicionais de armazenamento.  A configura√ß√£o recomendada permite que todas as vozes do cluster votem no quorum e usem o disco. <br><br>  Um volume adicional deve ser criado e configurado como disco testemunha.  A Dell EMC recomenda o uso de 2 GB de espa√ßo em disco.  Todos os volumes devem ser mapeados para cada n√≥ do cluster, configurados como um recurso de cluster e adicionados ao grupo de recursos de cluster do SQL Server. <br><br><h2>  Conclus√£o </h2><br>  Em conclus√£o, provavelmente destacaremos a vantagem mais importante da configura√ß√£o - a capacidade de conectar um grande n√∫mero de adaptadores HBA.  Isso permite equilibrar o aumento de m√≥dulos de armazenamento com eles. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86e/f69/784/86ef697842f322cc25e54c25a3ebe296.png"><br>  <i>E este √© o certificado para a configura√ß√£o do ATOS BullSequana S800 e Dell EMC VMAX 250F.</i>  <i>Voc√™ pode ver as m√©tricas de teste nele.</i> <br><br>  Em um futuro pr√≥ximo, planejamos transferir solu√ß√µes para a arquitetura do Cascade Lake.  Isso levar√° ao in√≠cio de uma nova certifica√ß√£o que complementar√° a atual.  Teremos o maior prazer em responder suas perguntas sobre certifica√ß√£o e nossa arquitetura nos coment√°rios. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt438356/">https://habr.com/ru/post/pt438356/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt438346/index.html">Como eles fazem isso? Vis√£o geral das tecnologias de anonimiza√ß√£o de criptomoedas</a></li>
<li><a href="../pt438348/index.html">Como aprender a programar aos 9 anos independentemente</a></li>
<li><a href="../pt438350/index.html">Guia completo para pesquisa profissional de c√¢meras ocultas e dispositivos espi√µes</a></li>
<li><a href="../pt438352/index.html">V√≠deo da descida do ve√≠culo espacial "Yutu-2", seus primeiros metros na superf√≠cie da lua. O sono de duas semanas na lua acabou</a></li>
<li><a href="../pt438354/index.html">Vue, Storybook, TypeScript - iniciando um novo projeto com as melhores pr√°ticas em mente</a></li>
<li><a href="../pt438358/index.html">Ex-agentes da NSA espionando iPhones das v√≠timas encomendados pelos Emirados √Årabes Unidos</a></li>
<li><a href="../pt438362/index.html">Como traduzimos a configura√ß√£o de nossos servi√ßos de XML para YAML</a></li>
<li><a href="../pt438364/index.html">Replica√ß√£o do primeiro embaralhador de voz digital do mundo</a></li>
<li><a href="../pt438366/index.html">Mais uma an√°lise dos tokens de hardware OATH no Azure Cloud MFA</a></li>
<li><a href="../pt438368/index.html">L√¢mpadas inteligentes jogadas no lixo s√£o uma fonte valiosa de informa√ß√µes pessoais.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>