<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◀️ 🤸🏾 🤶🏿 Développement d'une banque d'alimentation pour ordinateur portable. De la mise en page au produit fini. Partie un 🚣🏿 🤴🏾 ☺️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je voulais me fabriquer une batterie externe pour ordinateur portable depuis longtemps, il y a 3-4 ans pour travailler dans le parc. Même si je n'avai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Développement d'une banque d'alimentation pour ordinateur portable. De la mise en page au produit fini. Partie un</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386099/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je voulais me fabriquer une batterie externe pour ordinateur portable depuis longtemps, il y a 3-4 ans pour travailler dans le parc. </font><font style="vertical-align: inherit;">Même si je n'avais pas réalisé le rêve de dessiner des diagrammes et des tableaux de bord dans Gorky Park ou dans la forêt Bitsevsky (pour l'instant), j'ai fait une batterie externe (appelons-la moderne - PowerBank). </font><font style="vertical-align: inherit;">À propos de la façon dont cet appareil est passé d'un modèle de planche à pain à un produit final et pourquoi j'ai fait ce qui est déjà sur le marché sous un chat.</font></font><br>
<br>
<img src="https://habrastorage.org/files/420/e68/56d/420e6856df5a40de8a10c07a32d91245.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au départ, je voulais écrire un court article sur le développement de PowerBank, mais quand j'ai commencé, j'ai réalisé qu'une partie était indispensable. </font><font style="vertical-align: inherit;">Par conséquent, je l'ai divisé en 4 parties et maintenant je porte à votre attention la première d'entre elles: la mise en page (circuits). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De toute évidence, le développement de tout appareil électronique commence par une spécification technique (TOR), j'ai donc décrit pour moi-même un certain nombre de paramètres que ma PowerBank devrait fournir:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tension d'entrée de 19 V (pour la possibilité de charger à partir d'une mémoire d'ordinateur portable standard)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tension de sortie de 19 V (comme avec une mémoire standard)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">courant de sortie maximal de 3,5 A (comme avec une mémoire standard)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacité de la cellule d'au moins 60 W * h (+1 batterie interne)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus des exigences de base, j'en ai ajouté quelques autres:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'efficacité du convertisseur et de la mémoire n'est pas inférieure à 94% - pour se passer de radiateurs.</font></font></li>
<li>    300 —     .</li>
<li>USB       PowerBank    , ,   , ,       ..</li>
<li>  (Windows)      PowerBank.</li>
<li>   ,     5   USB .</li>
<li>      PowerBank.</li>
<li>()   PowerBank    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer le développement, j'ai fait un schéma de principe du futur appareil: </font></font><br>
<br>
<img src="https://habrastorage.org/files/252/309/39a/25230939af09479795e5d74a3f2fbf7e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commentant le schéma, je peux dire que je pourrais prendre le directeur général de l'USB, mais j'avais peur des difficultés de développer un logiciel USB (plus tard, j'ai réalisé que c'était en vain), j'ai donc installé le convertisseur USART - USB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que l'appareil a été initialement développé pour lui-même, il a été décidé de faire la mise en page principalement à partir des pièces en ma possession et avec lesquelles j'avais déjà travaillé (pour éviter les pièges). </font><font style="vertical-align: inherit;">Cependant, l'optimisation des prix à ce stade n'a pas été effectuée. </font><font style="vertical-align: inherit;">Par conséquent, j'ai choisi les composants suivants pour PowerBank:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK - STM32F051K4U6 avec un viseur remplacé par STM32F042K4U6.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USART &lt;-&gt; Convertisseur USB vers CP2102. </font><font style="vertical-align: inherit;">Ce n'est pas cher, ça marche bien, ça prend peu de place, une solution de rodage.</font></font></li>
<li>   — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LTC3780IG</a>.    / ,  -,  400,   ,  .     LM5175  TI     .</li>
<li>  — LP2951ACD-3.3.    ,   .     120     MCP1703T-3302E/CB      5.</li>
<li>     0805. </li>
<li>   SMD.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Séparément, nous abordons le choix d'un chargeur (chargeur) et d'un système de contrôle et de gestion des batteries Li-ion (Li-ion Battery Management System ou BMS). Il y a quelques années, je réparais des ordinateurs portables et je voyais souvent du BMS de Texas Instruments dans des batteries. Par conséquent, tout d'abord, j'ai commencé à chercher une solution pour mon appareil auprès de ce fabricant. Il convient de noter qu'en général, il n'y a pas d'alternative, car seuls quelques bureaux produisent de tels microcircuits (TI, Maxim, certains LT, ST abandonnés, Intersil est exotique pour nous, peut-être plus, mais je ne sais pas). Alors errant dans les étendues de ti.com, je suis tombé sur une puce très intéressante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60RHBR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce sont la mémoire et le BMS dans une seule puce. </font><font style="vertical-align: inherit;">Je l'ai vraiment aimé car il a remplacé 2 microcircuits. </font><font style="vertical-align: inherit;">Cette solution est nettement moins chère que si vous faites séparément la mémoire et le BMS et prend moins de place. </font><font style="vertical-align: inherit;">Caractéristiques de performance principales de la puce BQ40Z60:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Courant de charge: jusqu'à 4A</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre de cellules: jusqu'à 4x</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fréquence de conversion: 1 MHz</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tension d'entrée: jusqu'à 25 V</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacité de la cellule: jusqu'à 65A * h</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonction d'équilibrage</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED configurables pour indication (charge, capacité)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La puce est assez récente (sortie fin 2014), donc il y a peu d'informations dessus et j'étais un peu inquiet à cause de cela, sachant que la BI de TI est assez difficile à programmer, et c'est aussi un combo (mémoire + BMS). Je m'inquiétais aussi un peu des éventuels montants du cristal, mais sachant que je n'utiliserais que les fonctionnalités de base, j'espérais qu'il n'y aurait pas de problèmes. Cependant, pour l'avenir, je dirai que cela s'est produit. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, ce n'est pas en vain que je n'ai rien dit sur les cellules et la configuration de la batterie, ce n'est que maintenant que le temps est venu de faire le choix. Il existe plusieurs critères pour une sélection optimale de la configuration de la batterie:</font></font><br>
<br>
<ol>
<li>          .      4    (  4s1p  4-serial 1-parallel) ,  4   (1s4p) . .<br>
<br>
<img src="https://habrastorage.org/files/557/071/877/557071877b66477184a284235e89034e.png"><br>
<br>
</li>
<li>   ,   ,    ( )      .      4s1p.</li>
<li>          .       MP2307DN.<br>
<br>
<img src="https://habrastorage.org/files/32c/de4/fd7/32cde4fd79374c4eb930e56e24b98b1a.png"></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que la tension de sortie de l'appareil 19V, encore une fois, la configuration 4s1p est la plus avantageuse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous allons calculer certains paramètres de la batterie dans des conditions de capacité de 60 W * h, configuration 4s1p (tension 14.8V): </font></font><br>
<br>
<img src="https://habrastorage.org/files/188/9aa/6ee/1889aa6ee65f4ecd91016d25ce126159.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
le chiffre que j'ai trouvé était trop petit (enfin, ou l'appétit est venu avec un repas) et j'ai décidé de passer en configuration 4s2p sur des cellules LP 5558115 3500mAh, qui étaient en stock. Total, nous avons: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Capacité de la batterie: 7A * h (103W * h) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tension: 14.8V </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce résultat me </font><font style="vertical-align: inherit;">convenait </font><font style="vertical-align: inherit;">assez bien - il s'agissait de plus de deux batteries internes de mon ordinateur portable (ASUS S451L, 46W * h). Le développement de la mise en page a commencé ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au stade de la mise en page, je voulais ajouter quelques fonctionnalités supplémentaires:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connecté les LED BQ40Z60. </font><font style="vertical-align: inherit;">Ils ont une indication fonctionnelle du niveau de charge avec des seuils réglables, ainsi que du processus de charge.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout de la possibilité d'ajuster la fréquence / le mode de fonctionnement (courants discontinus ou inextricables) du convertisseur (en utilisant un filtre PWM MK + RC).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai esquissé le circuit de liaison BQ40Z60 à partir de la carte de débogage BQ40Z60EVM-578, la liaison LTC3780IG de sa documentation, j'ai fait le reste moi-même. </font><font style="vertical-align: inherit;">Le résultat est le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schéma</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suivant </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le schéma est divisé en 3 blocs:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bloc convertisseur de tension</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unité de stockage + BMS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unité de commande MK</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commentaires sur le schéma: le convertisseur et le chargeur + BMS sont réalisés selon les schémas de la documentation </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le boîtier de commande a été réalisé afin de mettre en œuvre un mode veille pour la consommation de courant minimale en mode arrêt. Pour l'avenir, je dirai que dans quelques instants, je l'ai fait, mais avec l'aide d'un couteau et d'un fer à souder, j'ai pu faire la mise en page comme il se doit. Le panneau résultant est illustré ci-dessous: Le </font></font><br>
<br>
<img src="https://habrastorage.org/files/9b5/082/691/9b5082691a0b4f1d82fbfd9c4925c2bc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
panneau contient 4 couches de 18 μm, l'épaisseur totale de 1 mm, commandées sur seeedstudio.com.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps de toucher à l'indicateur principal de la qualité du fer - c'est l'efficacité de l'ensemble du système dans son ensemble. Plus précisément, nous avons 2 efficacité: lors de la charge de la batterie et lors de la décharge. À strictement parler, l'efficacité de la charge ne doit être optimisée que pour réduire le chauffage de l'appareil (en supposant que nous avons beaucoup d'énergie pour la charge), tandis que la perte d'efficacité pendant la décharge réduit en fait la capacité réelle de la PowerBank. Faisons une liste des éléments qui affectent directement l'efficacité lors de la charge: </font></font><br>
<br>
<img src="https://habrastorage.org/files/eb5/be0/cf4/eb5be0cf43cd481a914999684e06cd5c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET - un transistor qui empêche l'apparition de tension sur le connecteur d'alimentation externe lors de l'utilisation de PowerBank à partir de la batterie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HighSideFET - le transistor supérieur du convertisseur abaisseur du chargeur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LowSideFET - transistor inférieur du convertisseur abaisseur de mémoire. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor - l'accélérateur du convertisseur buck mémoire. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS - résistance du capteur de courant de mémoire.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET - transistor de charge de batterie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSGFET - batterie à transistor de décharge. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS est une résistance de capteur de courant de batterie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les transistors ACFET, CHGFET et DSGFET pendant le fonctionnement n'ont que des pertes statiques car ils sont constamment ouverts et sont des résistances avec une résistance égale à la résistance de canal ouvert du transistor Rds_on, donc ces transistors devraient avoir le Rds_on le plus bas. J'ai choisi les boîtiers de transistor pqfn3.3x3.3 comme étant adaptés en puissance et ayant une taille plus petite par rapport à mon pqfn5x6 préféré. IRFHM830D (Rds_on = 5mOhm + diode Schottky) était la plus petite résistance de canal des plus facilement accessibles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les transistors HighSideFET et LowSideFET fonctionnent en mode pulsé, leur sélection est compliquée et sera envisagée ultérieurement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons d'estimer les pertes à la tension d'entrée 19V, le courant de charge de la batterie 4A, la configuration 4s1p: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS - le courant qui le traverse est égal au courant de charge, la résistance est 5mOhm, les pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c8c/b36/4c2/c8cb364c241647aa8b8e747fe265488c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS - le courant qui le traverse est égal au courant de charge, la résistance 10mOhm, les pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/341/b1d/cf1/341b1dcf1f4149aeb20446bcfbe9d474.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET et DSGFET - le courant passe d'entre eux est égal au courant de charge, résistance 5mOhm, pertes totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/533/bc7/90f/533bc790f0934780a5d7ba2d1df02b71.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET - le courant qui le traverse est égal au courant d'entrée (prenez le courant d'entrée maximum possible 3,5A est le maximum qu'une mémoire d'ordinateur portable ordinaire peut donner), résistance 5mOhm, pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/384/bc9/449/384bc944932f4e46aa631cb6db1f5ea6.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici vous pouvez ajouter des pertes sur la résistance des fils du panneau de cellules, et t </font><font style="vertical-align: inherit;">Pistes également de la planche elle-même. </font><font style="vertical-align: inherit;">Je les ai calculés en mesurant la chute de tension à un courant dans le circuit de batterie de 4A, elle était de 36mV, ce qui correspond à la puissance:</font></font><br>
<br>
<img src="https://habrastorage.org/files/2ba/ae1/023/2baae1023b854ac19c4a3eb4b897cb4a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor - les pertes dans l'accélérateur peuvent être divisées en 2 composants:</font></font><br>
<br>
<ul>
<li>     (DCR — dc winding resistance).    IHLP2525CZER2R2M01   DCR = 18,     4  :<br>
<br>
<img src="https://habrastorage.org/files/be2/820/516/be282051603b42c8b0c0f2272b740891.png"><br>
<br>
</li>
<li>          ,    Vishay     ,          20%,      .</li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les pertes de charge totales totales sur les composants statiques sont: </font></font><br>
<br>
<img src="https://habrastorage.org/files/2a2/602/245/2a2602245bac45a69f665dba1b35badf.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin d'obtenir des pertes de charge totales, il est nécessaire d'estimer les pertes sur les transistors HighSideFET et LowSideFET. L'apnot </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN-6005</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de fairchildsemi </font><font style="vertical-align: inherit;">m'a aidé avec ça </font><font style="vertical-align: inherit;">. En bref, sur l'onglet ControllerDriver, ajoutez notre contrôleur à la base de données et entrez les paramètres requis dans le tableau: </font></font><br>
<br>
<img src="https://habrastorage.org/files/6fe/c39/ed7/6fec39ed7e97465094baf63964ced647.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous prenons les données de la documentation du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ensuite, remplissez le tableau avec les paramètres des transistors HighSideFET et LowSideFET sur l'onglet MOSFETDatabase:</font></font><br>
<br>
<img src="https://habrastorage.org/files/3cd/e7f/32e/3cde7f32ed8e49b6bbd0974d215dc922.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous prenons également les données de la documentation des transistors. J'ai expérimenté de nombreux transistors (vus depuis la base) car la fréquence de conversion en 1 MHz est assez élevée. De tous les transistors que j'ai pu obtenir rapidement le meilleur, le CSD17308 de TI s'est avéré être le meilleur. Cependant, ce ne sont que les transistors recommandés de la baleine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60EVM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Les meilleurs calculs ont été les transistors eGaN d'EPC (Efficient Power Conversion), mais le prix de 500r, un mois d'attente et un cas spécifique ont joué contre lui. Quelques commentaires supplémentaires de l'onglet MOSFETDatabase: La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
colonne de droite - Fig.Merit (Figure de mérite - Niveau de qualité) est le produit de Rds_on et la charge d'obturation Qgsw. En général, plus le Fig.Merit est bas, meilleur est le transistor, mais vous devez comprendre qu'il s'agit d'un indicateur assez empirique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'onglet EfficiencySummary, sélectionnez le contrôleur, les transistors utilisés et leur nombre, définissez les paramètres source et cliquez sur le bouton Exécuter. </font></font><br>
<br>
<img src="https://habrastorage.org/files/4f5/03e/8cf/4f503e8cf0344b908a9764aa13d7c8af.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un courant de charge de 4A et une tension d'entrée de 19V, les pertes seront de 1,17W. Pertes totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/47b/799/26e/47b79926ef324c1ba614710ff41f49f5.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir assemblé le schéma, j'ai mesuré le circuit de charge avec les mêmes paramètres que dans les calculs estimés: l' </font></font><br>
<br>
<img src="https://habrastorage.org/files/89e/245/9fb/89e2459fbd234dcd830dfd6f64488ed0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
efficacité du circuit est de 97,1%, tandis que la perte de puissance était de 1,908 W à la valeur calculée de 2,07 W. Eh bien, il s'est avéré très proche d'estimer la perte. Un thermogramme d'un appareil en fonctionnement est illustré sur la figure.</font></font><br>
<br>
<img src="https://habrastorage.org/files/c99/15a/3b3/c9915a3b3b3940aea987f4f5d3a6248b.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Température ambiante 23 degrés, planche sans boîtier. 58 degrés au point le plus chaud (la surchauffe est de 58-23 = 35 degrés) avec une feuille de 18 μm, c'est un très bon indicateur. L'accélérateur en même temps s'est réchauffé à 40 - très probablement il est chauffé par des transistors. Le contrôleur lui-même s'est réchauffé à 52 degrés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous passons maintenant à l'estimation de l'efficacité du système pendant la décharge. Dès le début, nous évaluerons les pertes dans le convertisseur lui-même. Pour ce faire, nous compilons une liste d'éléments affectant directement l'efficacité: </font></font><br>
<br>
<img src="https://habrastorage.org/files/443/647/555/44364755599542c6bde459eeb3048433.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A est le transistor supérieur du bras inférieur du convertisseur LTC3780. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B - bras de descente du transistor inférieur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C est le transistor inférieur de l'épaule croissante. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D est le transistor supérieur de l'épaule croissante. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L - accélérateur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RS est la résistance du capteur de courant.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et bien sûr la consommation du contrôleur LTC3780 lui-même. Je ne m'attarderai pas sur le fonctionnement du microcircuit en détail, je peux seulement dire qu'il représente en fait un convertisseur abaisseur debout après un convertisseur élévateur avec une inductance commune. Selon les tensions d'entrée et de sortie, une partie ou la seconde ou les deux fonctionnent (avec une égalité approximative des tensions d'entrée et de sortie). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour calculer l'efficacité du convertisseur, nous utiliserons les paramètres suivants:</font></font><br>
 <br>
<img src="https://habrastorage.org/files/997/573/2a6/9975732a646145419d17e7b7cc104c80.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soyons d'accord qu'un ordinateur portable consomme toujours au maximum. En réalité, cela est proche de la vérité, car lors de la connexion d'une source externe, en plus de l'énergie, elle consomme également de l'énergie pour charger la batterie interne, et en général, s'il y a une alimentation externe, elle ne refuse pas la consommation. Les tensions correspondent à la tension nominale des cellules - 3,7 V et faible - 3,3 V. Il est important de noter que le convertisseur de l'appareil actuel fonctionne toujours en mode boost (la tension d'entrée ne dépasse jamais la tension de sortie), mais cela ne signifie pas que les transistors A et B ne commutent pas. Pour charger le condensateur d'amorçage, désactivez brièvement le transistor A et allumez B (la même chose se produira lors d'un fonctionnement dans un mode inférieur pour les transistors C et D). Pour le LTC3780, cela se produit à une fréquence de 40 kHz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour estimer les pertes, nous utilisons le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier xls pour LTC3780</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du package LTpowerCAD2. Le principe de fonctionnement est similaire au travail précédent avec xls pour le BQ40Z60. Nous entrons toutes les valeurs de la tension et du courant de sortie, la tension d'entrée, la fréquence de conversion souhaitée, les paramètres des transistors clés (j'ai décidé d'utiliser CSD17308 comme dans la mémoire). L'inductance a été choisie IHLP5050EZER3R3M01 qui a un DCR typique = 7,7 mOhm. Pour 3.5A, l'inductance est petite, c'est arrivé car lorsque j'ai acheté des composants, je comptais sur un courant de sortie de 4.5A. Pour la configuration actuelle, l'IHLP5050EZER4R7M01 avec un DCR typique = 12,8 mOhm serait une option idéale. Capteur de courant - résistance de taille 2512 avec une résistance de 5mOhm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir entré toutes les données dans les champs MOSFETs Power Loss Breakdown et Estimated Efficiency, il y aura des graphiques circulaires de la distribution des pertes de composants et de l'estimation de l'efficacité pour la tension d'entrée / sortie et le courant de charge spécifiés. </font></font><br>
<br>
<img src="https://habrastorage.org/files/92d/a9b/83a/92da9b83afb74badb50bb7bccb0c5d3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'estimation du rendement est très optimiste - 98,79% à une tension d'entrée de 14,8 V et 98,51% à 13,2 V (chiffres hors pertes dans le cœur de l'inductance). Les principaux éléments sur lesquels se produisent les pertes sont l'inductance / capteur de courant (23%), le transistor A (25%) et D (38% des pertes totales). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de mesurer l'efficacité réelle. </font></font><br>
<br>
<img src="https://habrastorage.org/files/c46/54c/cce/c4654ccce20b4c438e3f4a5a76484386.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'efficacité mesurée est de 96,93% à une tension d'entrée de 14,8 V et de 96,35% à 13,2 V. Analysons les données obtenues. Pour ce faire, nous traduisons le pourcentage d'efficacité de la perte de puissance:</font></font><br>
<br>
<img src="https://habrastorage.org/files/874/10a/190/87410a19014047c9b39518c9cd32d78f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, l'écart est plus significatif par rapport à l'estimation des pertes dans le convertisseur mémoire et s'élève à 1,48W. Mais si l'on prend en compte les pertes dans le coeur de l'inductance (qui ne peuvent être négligées avec une inductance non choisie de manière optimale), l'image ne sera pas si déprimante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estimons l'efficacité moyenne (à 13,2 V) de PowerBank à la décharge. Il se compose de l'efficacité du convertisseur lui-même, ainsi que de: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS - le courant qui le traverse est égal au courant d'entrée du convertisseur, la résistance est de 5 mOhm, les pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c87/4a7/de6/c874a7de6a9c4122ad2d1b1205728e7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET et DSGFET - le courant qui les traverse est égal au courant d'entrée du convertisseur, la résistance est de 5 mOhm, les pertes totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/44d/03f/42e/44d03f42ef754e1e8a22e6ba8d0695cf.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puis l'efficacité PowerBank pendant la décharge: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c52/0d0/86c/c520d086ced0477c82879639830d5631.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thermogramme le convertisseur avec une tension d'entrée de 14,4 V et un courant de sortie de 3,5 A est illustré ci-dessous:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e77/cfa/f9a/e77cfaf9a7ce45ae966e0c327896893f.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le transistor C s'est avéré être le point le plus chaud, mais son chauffage (à une température ambiante de 21 degrés) n'était que de 41,1 degrés après 30 minutes de fonctionnement. Il est clair que dans le cas où ces chiffres seront plus élevés, mais la réserve de surchauffe est énorme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et en conclusion de la première partie de l'article, je voudrais dire que le travail était très volumineux, et dans la deuxième partie de l'article, nous verrons les râteaux matériels et logiciels lors du démarrage de la mise en page, la configuration du BQ40Z60 et du logiciel pour STM32F0. J'espère que c'était intéressant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: Les archives avec le projet de tableau et le code source seront publiées dans les parties suivantes de l'article. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PPS a remarqué qu'il avait oublié presque la chose la plus importante pour cette partie de l'article - une photo de la mise en page. Correct</font></font><br>
<img src="https://habrastorage.org/files/729/50a/878/72950a8786ee4aa59dc105e8449bd800.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la carte, vous pouvez voir des traces de corrections, ainsi que des traces d'usure ouvertes dans un sac à dos (traces brûlées dans la zone où la batterie est connectée). </font><font style="vertical-align: inherit;">La disposition n'est certainement pas la plus élégante, mais même sous cette forme, elle peut être utilisée.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr386099/">https://habr.com/ru/post/fr386099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr386083/index.html">La Commission européenne autorisera les voitures diesel à dépasser de moitié les limites d'émissions</a></li>
<li><a href="../fr386085/index.html">Quel quadricoptère dois-je choisir si je veux ...? FAQ de Dronk.Ru</a></li>
<li><a href="../fr386087/index.html">Publication d'une nouvelle version pour Windows 10 Insiders</a></li>
<li><a href="../fr386093/index.html">La technologie RF-Capture vous permet de «voir» à travers les murs</a></li>
<li><a href="../fr386095/index.html">Google и Amazon предлагают свое деление воздушного пространства на зоны для полётов беспилотников</a></li>
<li><a href="../fr386101/index.html">Un robot bat une personne, puis une personne conduit un robot: vidéo. ADF: un robot tombe en panne</a></li>
<li><a href="../fr386103/index.html">Microsoft abaisse les limites de OneDrive et, pour la Russie, augmente les prix des logiciels et des abonnements</a></li>
<li><a href="../fr386105/index.html">Après la version mobile, l'assemblage pour PC - Windows 10 Insider Preview 10576</a></li>
<li><a href="../fr386107/index.html">L'histoire de la relation entre Beeline et la sécurité de ses services</a></li>
<li><a href="../fr386109/index.html">Le «Stonehenge» sous-marin au large des rives de la Méditerranée réécrit à nouveau l'histoire de l'humanité</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>