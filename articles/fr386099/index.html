<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óÄÔ∏è ü§∏üèæ ü§∂üèø D√©veloppement d'une banque d'alimentation pour ordinateur portable. De la mise en page au produit fini. Partie un üö£üèø ü§¥üèæ ‚ò∫Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je voulais me fabriquer une batterie externe pour ordinateur portable depuis longtemps, il y a 3-4 ans pour travailler dans le parc. M√™me si je n'avai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement d'une banque d'alimentation pour ordinateur portable. De la mise en page au produit fini. Partie un</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386099/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je voulais me fabriquer une batterie externe pour ordinateur portable depuis longtemps, il y a 3-4 ans pour travailler dans le parc. </font><font style="vertical-align: inherit;">M√™me si je n'avais pas r√©alis√© le r√™ve de dessiner des diagrammes et des tableaux de bord dans Gorky Park ou dans la for√™t Bitsevsky (pour l'instant), j'ai fait une batterie externe (appelons-la moderne - PowerBank). </font><font style="vertical-align: inherit;">√Ä propos de la fa√ßon dont cet appareil est pass√© d'un mod√®le de planche √† pain √† un produit final et pourquoi j'ai fait ce qui est d√©j√† sur le march√© sous un chat.</font></font><br>
<br>
<img src="https://habrastorage.org/files/420/e68/56d/420e6856df5a40de8a10c07a32d91245.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au d√©part, je voulais √©crire un court article sur le d√©veloppement de PowerBank, mais quand j'ai commenc√©, j'ai r√©alis√© qu'une partie √©tait indispensable. </font><font style="vertical-align: inherit;">Par cons√©quent, je l'ai divis√© en 4 parties et maintenant je porte √† votre attention la premi√®re d'entre elles: la mise en page (circuits). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De toute √©vidence, le d√©veloppement de tout appareil √©lectronique commence par une sp√©cification technique (TOR), j'ai donc d√©crit pour moi-m√™me un certain nombre de param√®tres que ma PowerBank devrait fournir:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tension d'entr√©e de 19 V (pour la possibilit√© de charger √† partir d'une m√©moire d'ordinateur portable standard)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tension de sortie de 19 V (comme avec une m√©moire standard)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">courant de sortie maximal de 3,5 A (comme avec une m√©moire standard)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacit√© de la cellule d'au moins 60 W * h (+1 batterie interne)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus des exigences de base, j'en ai ajout√© quelques autres:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'efficacit√© du convertisseur et de la m√©moire n'est pas inf√©rieure √† 94% - pour se passer de radiateurs.</font></font></li>
<li>    300 ‚Äî     .</li>
<li>USB       PowerBank    , ,   , ,       ..</li>
<li>  (Windows)      PowerBank.</li>
<li>   ,     5   USB .</li>
<li>      PowerBank.</li>
<li>()   PowerBank    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer le d√©veloppement, j'ai fait un sch√©ma de principe du futur appareil: </font></font><br>
<br>
<img src="https://habrastorage.org/files/252/309/39a/25230939af09479795e5d74a3f2fbf7e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commentant le sch√©ma, je peux dire que je pourrais prendre le directeur g√©n√©ral de l'USB, mais j'avais peur des difficult√©s de d√©velopper un logiciel USB (plus tard, j'ai r√©alis√© que c'√©tait en vain), j'ai donc install√© le convertisseur USART - USB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que l'appareil a √©t√© initialement d√©velopp√© pour lui-m√™me, il a √©t√© d√©cid√© de faire la mise en page principalement √† partir des pi√®ces en ma possession et avec lesquelles j'avais d√©j√† travaill√© (pour √©viter les pi√®ges). </font><font style="vertical-align: inherit;">Cependant, l'optimisation des prix √† ce stade n'a pas √©t√© effectu√©e. </font><font style="vertical-align: inherit;">Par cons√©quent, j'ai choisi les composants suivants pour PowerBank:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MK - STM32F051K4U6 avec un viseur remplac√© par STM32F042K4U6.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USART &lt;-&gt; Convertisseur USB vers CP2102. </font><font style="vertical-align: inherit;">Ce n'est pas cher, √ßa marche bien, √ßa prend peu de place, une solution de rodage.</font></font></li>
<li>   ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LTC3780IG</a>.    / ,  -,  400,   ,  .     LM5175  TI     .</li>
<li>  ‚Äî LP2951ACD-3.3.    ,   .     120     MCP1703T-3302E/CB      5.</li>
<li>     0805. </li>
<li>   SMD.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√©par√©ment, nous abordons le choix d'un chargeur (chargeur) et d'un syst√®me de contr√¥le et de gestion des batteries Li-ion (Li-ion Battery Management System ou BMS). Il y a quelques ann√©es, je r√©parais des ordinateurs portables et je voyais souvent du BMS de Texas Instruments dans des batteries. Par cons√©quent, tout d'abord, j'ai commenc√© √† chercher une solution pour mon appareil aupr√®s de ce fabricant. Il convient de noter qu'en g√©n√©ral, il n'y a pas d'alternative, car seuls quelques bureaux produisent de tels microcircuits (TI, Maxim, certains LT, ST abandonn√©s, Intersil est exotique pour nous, peut-√™tre plus, mais je ne sais pas). Alors errant dans les √©tendues de ti.com, je suis tomb√© sur une puce tr√®s int√©ressante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60RHBR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce sont la m√©moire et le BMS dans une seule puce. </font><font style="vertical-align: inherit;">Je l'ai vraiment aim√© car il a remplac√© 2 microcircuits. </font><font style="vertical-align: inherit;">Cette solution est nettement moins ch√®re que si vous faites s√©par√©ment la m√©moire et le BMS et prend moins de place. </font><font style="vertical-align: inherit;">Caract√©ristiques de performance principales de la puce BQ40Z60:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Courant de charge: jusqu'√† 4A</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre de cellules: jusqu'√† 4x</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fr√©quence de conversion: 1 MHz</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tension d'entr√©e: jusqu'√† 25 V</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacit√© de la cellule: jusqu'√† 65A * h</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonction d'√©quilibrage</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED configurables pour indication (charge, capacit√©)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La puce est assez r√©cente (sortie fin 2014), donc il y a peu d'informations dessus et j'√©tais un peu inquiet √† cause de cela, sachant que la BI de TI est assez difficile √† programmer, et c'est aussi un combo (m√©moire + BMS). Je m'inqui√©tais aussi un peu des √©ventuels montants du cristal, mais sachant que je n'utiliserais que les fonctionnalit√©s de base, j'esp√©rais qu'il n'y aurait pas de probl√®mes. Cependant, pour l'avenir, je dirai que cela s'est produit. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, ce n'est pas en vain que je n'ai rien dit sur les cellules et la configuration de la batterie, ce n'est que maintenant que le temps est venu de faire le choix. Il existe plusieurs crit√®res pour une s√©lection optimale de la configuration de la batterie:</font></font><br>
<br>
<ol>
<li>          .      4    (  4s1p  4-serial 1-parallel) ,  4   (1s4p) . .<br>
<br>
<img src="https://habrastorage.org/files/557/071/877/557071877b66477184a284235e89034e.png"><br>
<br>
</li>
<li>   ,   ,    ( )      .      4s1p.</li>
<li>          .       MP2307DN.<br>
<br>
<img src="https://habrastorage.org/files/32c/de4/fd7/32cde4fd79374c4eb930e56e24b98b1a.png"></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que la tension de sortie de l'appareil 19V, encore une fois, la configuration 4s1p est la plus avantageuse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous allons calculer certains param√®tres de la batterie dans des conditions de capacit√© de 60 W * h, configuration 4s1p (tension 14.8V): </font></font><br>
<br>
<img src="https://habrastorage.org/files/188/9aa/6ee/1889aa6ee65f4ecd91016d25ce126159.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
le chiffre que j'ai trouv√© √©tait trop petit (enfin, ou l'app√©tit est venu avec un repas) et j'ai d√©cid√© de passer en configuration 4s2p sur des cellules LP 5558115 3500mAh, qui √©taient en stock. Total, nous avons: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Capacit√© de la batterie: 7A * h (103W * h) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tension: 14.8V </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce r√©sultat me </font><font style="vertical-align: inherit;">convenait </font><font style="vertical-align: inherit;">assez bien - il s'agissait de plus de deux batteries internes de mon ordinateur portable (ASUS S451L, 46W * h). Le d√©veloppement de la mise en page a commenc√© ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au stade de la mise en page, je voulais ajouter quelques fonctionnalit√©s suppl√©mentaires:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connect√© les LED BQ40Z60. </font><font style="vertical-align: inherit;">Ils ont une indication fonctionnelle du niveau de charge avec des seuils r√©glables, ainsi que du processus de charge.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout de la possibilit√© d'ajuster la fr√©quence / le mode de fonctionnement (courants discontinus ou inextricables) du convertisseur (en utilisant un filtre PWM MK + RC).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai esquiss√© le circuit de liaison BQ40Z60 √† partir de la carte de d√©bogage BQ40Z60EVM-578, la liaison LTC3780IG de sa documentation, j'ai fait le reste moi-m√™me. </font><font style="vertical-align: inherit;">Le r√©sultat est le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sch√©ma</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suivant </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le sch√©ma est divis√© en 3 blocs:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bloc convertisseur de tension</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unit√© de stockage + BMS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unit√© de commande MK</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commentaires sur le sch√©ma: le convertisseur et le chargeur + BMS sont r√©alis√©s selon les sch√©mas de la documentation </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le bo√Ætier de commande a √©t√© r√©alis√© afin de mettre en ≈ìuvre un mode veille pour la consommation de courant minimale en mode arr√™t. Pour l'avenir, je dirai que dans quelques instants, je l'ai fait, mais avec l'aide d'un couteau et d'un fer √† souder, j'ai pu faire la mise en page comme il se doit. Le panneau r√©sultant est illustr√© ci-dessous: Le </font></font><br>
<br>
<img src="https://habrastorage.org/files/9b5/082/691/9b5082691a0b4f1d82fbfd9c4925c2bc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
panneau contient 4 couches de 18 Œºm, l'√©paisseur totale de 1 mm, command√©es sur seeedstudio.com.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps de toucher √† l'indicateur principal de la qualit√© du fer - c'est l'efficacit√© de l'ensemble du syst√®me dans son ensemble. Plus pr√©cis√©ment, nous avons 2 efficacit√©: lors de la charge de la batterie et lors de la d√©charge. √Ä strictement parler, l'efficacit√© de la charge ne doit √™tre optimis√©e que pour r√©duire le chauffage de l'appareil (en supposant que nous avons beaucoup d'√©nergie pour la charge), tandis que la perte d'efficacit√© pendant la d√©charge r√©duit en fait la capacit√© r√©elle de la PowerBank. Faisons une liste des √©l√©ments qui affectent directement l'efficacit√© lors de la charge: </font></font><br>
<br>
<img src="https://habrastorage.org/files/eb5/be0/cf4/eb5be0cf43cd481a914999684e06cd5c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET - un transistor qui emp√™che l'apparition de tension sur le connecteur d'alimentation externe lors de l'utilisation de PowerBank √† partir de la batterie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HighSideFET - le transistor sup√©rieur du convertisseur abaisseur du chargeur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LowSideFET - transistor inf√©rieur du convertisseur abaisseur de m√©moire. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor - l'acc√©l√©rateur du convertisseur buck m√©moire. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS - r√©sistance du capteur de courant de m√©moire.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET - transistor de charge de batterie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSGFET - batterie √† transistor de d√©charge. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS est une r√©sistance de capteur de courant de batterie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les transistors ACFET, CHGFET et DSGFET pendant le fonctionnement n'ont que des pertes statiques car ils sont constamment ouverts et sont des r√©sistances avec une r√©sistance √©gale √† la r√©sistance de canal ouvert du transistor Rds_on, donc ces transistors devraient avoir le Rds_on le plus bas. J'ai choisi les bo√Ætiers de transistor pqfn3.3x3.3 comme √©tant adapt√©s en puissance et ayant une taille plus petite par rapport √† mon pqfn5x6 pr√©f√©r√©. IRFHM830D (Rds_on = 5mOhm + diode Schottky) √©tait la plus petite r√©sistance de canal des plus facilement accessibles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les transistors HighSideFET et LowSideFET fonctionnent en mode puls√©, leur s√©lection est compliqu√©e et sera envisag√©e ult√©rieurement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons d'estimer les pertes √† la tension d'entr√©e 19V, le courant de charge de la batterie 4A, la configuration 4s1p: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS - le courant qui le traverse est √©gal au courant de charge, la r√©sistance est 5mOhm, les pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c8c/b36/4c2/c8cb364c241647aa8b8e747fe265488c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGRCS - le courant qui le traverse est √©gal au courant de charge, la r√©sistance 10mOhm, les pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/341/b1d/cf1/341b1dcf1f4149aeb20446bcfbe9d474.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET et DSGFET - le courant passe d'entre eux est √©gal au courant de charge, r√©sistance 5mOhm, pertes totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/533/bc7/90f/533bc790f0934780a5d7ba2d1df02b71.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFET - le courant qui le traverse est √©gal au courant d'entr√©e (prenez le courant d'entr√©e maximum possible 3,5A est le maximum qu'une m√©moire d'ordinateur portable ordinaire peut donner), r√©sistance 5mOhm, pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/384/bc9/449/384bc944932f4e46aa631cb6db1f5ea6.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici vous pouvez ajouter des pertes sur la r√©sistance des fils du panneau de cellules, et t </font><font style="vertical-align: inherit;">Pistes √©galement de la planche elle-m√™me. </font><font style="vertical-align: inherit;">Je les ai calcul√©s en mesurant la chute de tension √† un courant dans le circuit de batterie de 4A, elle √©tait de 36mV, ce qui correspond √† la puissance:</font></font><br>
<br>
<img src="https://habrastorage.org/files/2ba/ae1/023/2baae1023b854ac19c4a3eb4b897cb4a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuckInductor - les pertes dans l'acc√©l√©rateur peuvent √™tre divis√©es en 2 composants:</font></font><br>
<br>
<ul>
<li>     (DCR ‚Äî dc winding resistance).    IHLP2525CZER2R2M01   DCR = 18,     4  :<br>
<br>
<img src="https://habrastorage.org/files/be2/820/516/be282051603b42c8b0c0f2272b740891.png"><br>
<br>
</li>
<li>          ,    Vishay     ,          20%,      .</li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les pertes de charge totales totales sur les composants statiques sont: </font></font><br>
<br>
<img src="https://habrastorage.org/files/2a2/602/245/2a2602245bac45a69f665dba1b35badf.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin d'obtenir des pertes de charge totales, il est n√©cessaire d'estimer les pertes sur les transistors HighSideFET et LowSideFET. L'apnot </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN-6005</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de fairchildsemi </font><font style="vertical-align: inherit;">m'a aid√© avec √ßa </font><font style="vertical-align: inherit;">. En bref, sur l'onglet ControllerDriver, ajoutez notre contr√¥leur √† la base de donn√©es et entrez les param√®tres requis dans le tableau: </font></font><br>
<br>
<img src="https://habrastorage.org/files/6fe/c39/ed7/6fec39ed7e97465094baf63964ced647.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous prenons les donn√©es de la documentation du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ensuite, remplissez le tableau avec les param√®tres des transistors HighSideFET et LowSideFET sur l'onglet MOSFETDatabase:</font></font><br>
<br>
<img src="https://habrastorage.org/files/3cd/e7f/32e/3cde7f32ed8e49b6bbd0974d215dc922.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous prenons √©galement les donn√©es de la documentation des transistors. J'ai exp√©riment√© de nombreux transistors (vus depuis la base) car la fr√©quence de conversion en 1 MHz est assez √©lev√©e. De tous les transistors que j'ai pu obtenir rapidement le meilleur, le CSD17308 de TI s'est av√©r√© √™tre le meilleur. Cependant, ce ne sont que les transistors recommand√©s de la baleine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BQ40Z60EVM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Les meilleurs calculs ont √©t√© les transistors eGaN d'EPC (Efficient Power Conversion), mais le prix de 500r, un mois d'attente et un cas sp√©cifique ont jou√© contre lui. Quelques commentaires suppl√©mentaires de l'onglet MOSFETDatabase: La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
colonne de droite - Fig.Merit (Figure de m√©rite - Niveau de qualit√©) est le produit de Rds_on et la charge d'obturation Qgsw. En g√©n√©ral, plus le Fig.Merit est bas, meilleur est le transistor, mais vous devez comprendre qu'il s'agit d'un indicateur assez empirique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'onglet EfficiencySummary, s√©lectionnez le contr√¥leur, les transistors utilis√©s et leur nombre, d√©finissez les param√®tres source et cliquez sur le bouton Ex√©cuter. </font></font><br>
<br>
<img src="https://habrastorage.org/files/4f5/03e/8cf/4f503e8cf0344b908a9764aa13d7c8af.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un courant de charge de 4A et une tension d'entr√©e de 19V, les pertes seront de 1,17W. Pertes totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/47b/799/26e/47b79926ef324c1ba614710ff41f49f5.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir assembl√© le sch√©ma, j'ai mesur√© le circuit de charge avec les m√™mes param√®tres que dans les calculs estim√©s: l' </font></font><br>
<br>
<img src="https://habrastorage.org/files/89e/245/9fb/89e2459fbd234dcd830dfd6f64488ed0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
efficacit√© du circuit est de 97,1%, tandis que la perte de puissance √©tait de 1,908 W √† la valeur calcul√©e de 2,07 W. Eh bien, il s'est av√©r√© tr√®s proche d'estimer la perte. Un thermogramme d'un appareil en fonctionnement est illustr√© sur la figure.</font></font><br>
<br>
<img src="https://habrastorage.org/files/c99/15a/3b3/c9915a3b3b3940aea987f4f5d3a6248b.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temp√©rature ambiante 23 degr√©s, planche sans bo√Ætier. 58 degr√©s au point le plus chaud (la surchauffe est de 58-23 = 35 degr√©s) avec une feuille de 18 Œºm, c'est un tr√®s bon indicateur. L'acc√©l√©rateur en m√™me temps s'est r√©chauff√© √† 40 - tr√®s probablement il est chauff√© par des transistors. Le contr√¥leur lui-m√™me s'est r√©chauff√© √† 52 degr√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous passons maintenant √† l'estimation de l'efficacit√© du syst√®me pendant la d√©charge. D√®s le d√©but, nous √©valuerons les pertes dans le convertisseur lui-m√™me. Pour ce faire, nous compilons une liste d'√©l√©ments affectant directement l'efficacit√©: </font></font><br>
<br>
<img src="https://habrastorage.org/files/443/647/555/44364755599542c6bde459eeb3048433.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A est le transistor sup√©rieur du bras inf√©rieur du convertisseur LTC3780. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
B - bras de descente du transistor inf√©rieur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C est le transistor inf√©rieur de l'√©paule croissante. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D est le transistor sup√©rieur de l'√©paule croissante. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L - acc√©l√©rateur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RS est la r√©sistance du capteur de courant.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et bien s√ªr la consommation du contr√¥leur LTC3780 lui-m√™me. Je ne m'attarderai pas sur le fonctionnement du microcircuit en d√©tail, je peux seulement dire qu'il repr√©sente en fait un convertisseur abaisseur debout apr√®s un convertisseur √©l√©vateur avec une inductance commune. Selon les tensions d'entr√©e et de sortie, une partie ou la seconde ou les deux fonctionnent (avec une √©galit√© approximative des tensions d'entr√©e et de sortie). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour calculer l'efficacit√© du convertisseur, nous utiliserons les param√®tres suivants:</font></font><br>
 <br>
<img src="https://habrastorage.org/files/997/573/2a6/9975732a646145419d17e7b7cc104c80.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soyons d'accord qu'un ordinateur portable consomme toujours au maximum. En r√©alit√©, cela est proche de la v√©rit√©, car lors de la connexion d'une source externe, en plus de l'√©nergie, elle consomme √©galement de l'√©nergie pour charger la batterie interne, et en g√©n√©ral, s'il y a une alimentation externe, elle ne refuse pas la consommation. Les tensions correspondent √† la tension nominale des cellules - 3,7 V et faible - 3,3 V. Il est important de noter que le convertisseur de l'appareil actuel fonctionne toujours en mode boost (la tension d'entr√©e ne d√©passe jamais la tension de sortie), mais cela ne signifie pas que les transistors A et B ne commutent pas. Pour charger le condensateur d'amor√ßage, d√©sactivez bri√®vement le transistor A et allumez B (la m√™me chose se produira lors d'un fonctionnement dans un mode inf√©rieur pour les transistors C et D). Pour le LTC3780, cela se produit √† une fr√©quence de 40 kHz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour estimer les pertes, nous utilisons le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier xls pour LTC3780</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du package LTpowerCAD2. Le principe de fonctionnement est similaire au travail pr√©c√©dent avec xls pour le BQ40Z60. Nous entrons toutes les valeurs de la tension et du courant de sortie, la tension d'entr√©e, la fr√©quence de conversion souhait√©e, les param√®tres des transistors cl√©s (j'ai d√©cid√© d'utiliser CSD17308 comme dans la m√©moire). L'inductance a √©t√© choisie IHLP5050EZER3R3M01 qui a un DCR typique = 7,7 mOhm. Pour 3.5A, l'inductance est petite, c'est arriv√© car lorsque j'ai achet√© des composants, je comptais sur un courant de sortie de 4.5A. Pour la configuration actuelle, l'IHLP5050EZER4R7M01 avec un DCR typique = 12,8 mOhm serait une option id√©ale. Capteur de courant - r√©sistance de taille 2512 avec une r√©sistance de 5mOhm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir entr√© toutes les donn√©es dans les champs MOSFETs Power Loss Breakdown et Estimated Efficiency, il y aura des graphiques circulaires de la distribution des pertes de composants et de l'estimation de l'efficacit√© pour la tension d'entr√©e / sortie et le courant de charge sp√©cifi√©s. </font></font><br>
<br>
<img src="https://habrastorage.org/files/92d/a9b/83a/92da9b83afb74badb50bb7bccb0c5d3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'estimation du rendement est tr√®s optimiste - 98,79% √† une tension d'entr√©e de 14,8 V et 98,51% √† 13,2 V (chiffres hors pertes dans le c≈ìur de l'inductance). Les principaux √©l√©ments sur lesquels se produisent les pertes sont l'inductance / capteur de courant (23%), le transistor A (25%) et D (38% des pertes totales). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de mesurer l'efficacit√© r√©elle. </font></font><br>
<br>
<img src="https://habrastorage.org/files/c46/54c/cce/c4654ccce20b4c438e3f4a5a76484386.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'efficacit√© mesur√©e est de 96,93% √† une tension d'entr√©e de 14,8 V et de 96,35% √† 13,2 V. Analysons les donn√©es obtenues. Pour ce faire, nous traduisons le pourcentage d'efficacit√© de la perte de puissance:</font></font><br>
<br>
<img src="https://habrastorage.org/files/874/10a/190/87410a19014047c9b39518c9cd32d78f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, l'√©cart est plus significatif par rapport √† l'estimation des pertes dans le convertisseur m√©moire et s'√©l√®ve √† 1,48W. Mais si l'on prend en compte les pertes dans le coeur de l'inductance (qui ne peuvent √™tre n√©glig√©es avec une inductance non choisie de mani√®re optimale), l'image ne sera pas si d√©primante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estimons l'efficacit√© moyenne (√† 13,2 V) de PowerBank √† la d√©charge. Il se compose de l'efficacit√© du convertisseur lui-m√™me, ainsi que de: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CellCS - le courant qui le traverse est √©gal au courant d'entr√©e du convertisseur, la r√©sistance est de 5 mOhm, les pertes: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c87/4a7/de6/c874a7de6a9c4122ad2d1b1205728e7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CHGFET et DSGFET - le courant qui les traverse est √©gal au courant d'entr√©e du convertisseur, la r√©sistance est de 5 mOhm, les pertes totales: </font></font><br>
<br>
<img src="https://habrastorage.org/files/44d/03f/42e/44d03f42ef754e1e8a22e6ba8d0695cf.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puis l'efficacit√© PowerBank pendant la d√©charge: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c52/0d0/86c/c520d086ced0477c82879639830d5631.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thermogramme le convertisseur avec une tension d'entr√©e de 14,4 V et un courant de sortie de 3,5 A est illustr√© ci-dessous:</font></font><br>
<br>
<img src="https://habrastorage.org/files/e77/cfa/f9a/e77cfaf9a7ce45ae966e0c327896893f.BMP"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le transistor C s'est av√©r√© √™tre le point le plus chaud, mais son chauffage (√† une temp√©rature ambiante de 21 degr√©s) n'√©tait que de 41,1 degr√©s apr√®s 30 minutes de fonctionnement. Il est clair que dans le cas o√π ces chiffres seront plus √©lev√©s, mais la r√©serve de surchauffe est √©norme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et en conclusion de la premi√®re partie de l'article, je voudrais dire que le travail √©tait tr√®s volumineux, et dans la deuxi√®me partie de l'article, nous verrons les r√¢teaux mat√©riels et logiciels lors du d√©marrage de la mise en page, la configuration du BQ40Z60 et du logiciel pour STM32F0. J'esp√®re que c'√©tait int√©ressant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: Les archives avec le projet de tableau et le code source seront publi√©es dans les parties suivantes de l'article. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PPS a remarqu√© qu'il avait oubli√© presque la chose la plus importante pour cette partie de l'article - une photo de la mise en page. Correct</font></font><br>
<img src="https://habrastorage.org/files/729/50a/878/72950a8786ee4aa59dc105e8449bd800.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la carte, vous pouvez voir des traces de corrections, ainsi que des traces d'usure ouvertes dans un sac √† dos (traces br√ªl√©es dans la zone o√π la batterie est connect√©e). </font><font style="vertical-align: inherit;">La disposition n'est certainement pas la plus √©l√©gante, mais m√™me sous cette forme, elle peut √™tre utilis√©e.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr386099/">https://habr.com/ru/post/fr386099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr386083/index.html">La Commission europ√©enne autorisera les voitures diesel √† d√©passer de moiti√© les limites d'√©missions</a></li>
<li><a href="../fr386085/index.html">Quel quadricopt√®re dois-je choisir si je veux ...? FAQ de Dronk.Ru</a></li>
<li><a href="../fr386087/index.html">Publication d'une nouvelle version pour Windows 10 Insiders</a></li>
<li><a href="../fr386093/index.html">La technologie RF-Capture vous permet de ¬´voir¬ª √† travers les murs</a></li>
<li><a href="../fr386095/index.html">Google –∏ Amazon –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —Å–≤–æ–µ –¥–µ–ª–µ–Ω–∏–µ –≤–æ–∑–¥—É—à–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –Ω–∞ –∑–æ–Ω—ã –¥–ª—è –ø–æ–ª—ë—Ç–æ–≤ –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–æ–≤</a></li>
<li><a href="../fr386101/index.html">Un robot bat une personne, puis une personne conduit un robot: vid√©o. ADF: un robot tombe en panne</a></li>
<li><a href="../fr386103/index.html">Microsoft abaisse les limites de OneDrive et, pour la Russie, augmente les prix des logiciels et des abonnements</a></li>
<li><a href="../fr386105/index.html">Apr√®s la version mobile, l'assemblage pour PC - Windows 10 Insider Preview 10576</a></li>
<li><a href="../fr386107/index.html">L'histoire de la relation entre Beeline et la s√©curit√© de ses services</a></li>
<li><a href="../fr386109/index.html">Le ¬´Stonehenge¬ª sous-marin au large des rives de la M√©diterran√©e r√©√©crit √† nouveau l'histoire de l'humanit√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>