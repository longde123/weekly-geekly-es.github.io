<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙉 🤙🏾 👨🏿‍🌾 Dagaz: Horde 🚅 💈 🌿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous êtes des millions. Nous - l'obscurité et l'obscurité et l'obscurité. 
 Essayez-le, combattez-nous! 
 Oui, les Scythes - nous le sommes! Oui, les ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dagaz: Horde</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416595/"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/43e/794/3a3/43e7943a3e289a281570ab8b68d347b8.png" alt="image">  <b><i>Vous êtes des millions.</i></b>  <b><i>Nous - l'obscurité et l'obscurité et l'obscurité.</i></b> <b><i><br></i></b>  <b><i>Essayez-le, combattez-nous!</i></b> <b><i><br></i></b>  <b><i>Oui, les Scythes - nous le sommes!</i></b>  <b><i>Oui, les Asiatiques - nous ...</i></b> <b><i><br><br></i></b>  <b><i>Alexander Block " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scythians</a> "</i></b> <br><br>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> précédent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">,</a> j'ai beaucoup parlé de mes découvertes dans le domaine de la conception et de l'interface utilisateur des jeux de société, mais j'ai dû interrompre cette histoire, vous pouvez dire au milieu, en partie à cause du volume important de l'article, en partie simplement parce qu'à ce moment-là je n'étais pas prêt à continuer suivant.  Depuis lors, beaucoup de choses ont changé.  De nouveaux problèmes intéressants ont été résolus et les jeux qui les ont générés (non moins intéressants) ont été ajoutés à la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">version</a> .  Je veux en parler aujourd'hui. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/nWSawKsdTlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Si quelqu'un se souvient, il s'agissait du jeu " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Abalon</a> ", développé par Michel Lale et Laurent Levy en 1988.  Son essence est de pousser les balles ennemies hors du terrain.  Deux balles peuvent pousser une et trois balles - une paire de balles de couleur différente.  Le joueur peut déplacer ses balles sur le plateau, une à la fois, ou en groupe, deux ou trois balles chacune (en plus, trois balles devraient constituer une «rangée»).  Qu'est-ce qui m'a empêché de faire ce jeu la dernière fois? <br><br>  Évidemment pas le mouvement de groupe lui-même.  Le mouvement simultané de plusieurs pièces, en un seul mouvement, se fait même aux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">échecs</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">roque</a> ).  Et les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">puzzles</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sliding puzzles</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sont</a> simplement construits pour garantir que ce mouvement se produit de manière synchrone et en douceur.  Regardons un jeu développé par Robert Abbott en 1975: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/kv/fp/d-/kvfpd-kf--0kt2sproxmbidswpi.png"></a> </div><br>  Il ressemble à un Abalon.  La seule différence est que la "rangée" ne "pousse" pas la pièce de l'adversaire de sa place, mais la retire simplement du plateau en utilisant une capture "d'échecs".  La victoire est attribuée à l'un des joueurs qui a réussi à tirer plus sur la dernière rangée du plateau de ses pièces que son adversaire n'a réussi à le faire à ce moment-là.  L'ensemble du jeu est construit sur des "lignes" mobiles.  Il est peu probable qu'il réussisse à gagner uniquement des pièces solitaires.  Voilà à quoi ressemble un simple mouvement de poussée. <br><br><div class="spoiler">  <b class="spoiler_title">Zrf</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> push-1 ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> friend?) (<span class="hljs-name"><span class="hljs-name">while</span></span> friend? cascade $<span class="hljs-number"><span class="hljs-number">1</span></span> ) (<span class="hljs-name"><span class="hljs-name">verify</span></span> not-friend?) add ))</code> </pre> </div></div><br>  Il s'agit de la <b>cascade de</b> mots magiques - elle oblige l'interprète à "libérer" la figure déplacée vers le champ actuel, en prenant "dans la main" une autre figure (ce n'est pas important pour elle-même ou pour l'adversaire) et continue de bouger, déjà avec la nouvelle figure "en main".  En une seule opération, une telle opération peut être effectuée de manière répétée, déplaçant ainsi un nombre illimité de pièces à la fois.  De tels cas (et un peu plus complexes) se retrouvent également dans d'autres jeux - " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guns</a> ", " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dameo</a> ", " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Leutwayite Game</a> ", ... <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ts/cz/0-/tscz0-t_xblqjzzxeolgpa-7cjm.gif"></a> </div><br>  Du point de vue de l'interface utilisateur, les mouvements de «poussée» sont également mis en œuvre de manière assez triviale.  L'étiquette familière du champ cible (cercle vert) apparaît sur la figure.  Si (selon les règles du jeu) nous pouvons manger ce morceau - nous mangeons (capture d'échecs), sinon - nous poussons.  Vous pouvez pousser une rangée et plus d'un champ en avant (comme dans le jeu Epaminondas).  Bien sûr, coder un tel mouvement sera un peu plus compliqué: <br><br><div class="spoiler">  <b class="spoiler_title">Zrf</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> push-2 ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> friend?) (<span class="hljs-name"><span class="hljs-name">while</span></span> friend? mark $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> not-enemy?) to back cascade $<span class="hljs-number"><span class="hljs-number">1</span></span> ) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> not-friend?) add ))</code> </pre></div></div><br>  Le mot clé to (et son appariement à <b>partir de</b> ) agit en conjonction avec <b>cascade</b> .  Cela signifie que le chiffre «hors de la main» doit être mis sur le plateau maintenant, et le nouveau chiffre «prendre dans la main» un peu plus tard, après avoir navigué vers un autre champ.  En général, «pousser» les mouvements est simple, mais il existe un autre type de mouvement de groupe vers Abalon: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ta/hn/js/tahnjsqbpx_m2hmguohqdiannb4.gif"></a> </div><br>  Je les appelle des mouvements "transversaux".  Du point de vue du codage ZRF, il n'y a rien de compliqué en eux.  Le problème est dans l'interface utilisateur.  Comment «dire» au programme que le joueur veut déplacer non pas une balle, mais un groupe, si les deux mouvements sont autorisés par les règles?  J'utilise le même «clignotement», qui m'a été si utile dans les dames, pour marquer le chiffre «actuel».  Seulement maintenant, il y a plusieurs chiffres «actuels» dans l'ensemble. <br><br>  Un clic sur une figure «libre» l'ajoute au groupe s'il y a un mouvement dans lequel toutes les figures ajoutées au groupe sont impliquées (il est encore plus facile de ne pas relâcher le bouton, mettant en surbrillance l'ensemble du groupe en un clic de souris).  S'il n'y a pas de tels mouvements, seul un nouveau groupe est créé, composé jusqu'à présent d'une seule pièce.  Les cercles verts sont toujours affichés pour le dernier chiffre ajouté (cela peut ne pas être très évident, mais vous pouvez vous y habituer).  Un clic répété sur une figure «aveuglante» réinitialise immédiatement l'ensemble du groupe. <br><br><div class="spoiler">  <b class="spoiler_title">Au fait</b> <div class="spoiler_text">  Les cercles verts n'apparaîtront pas nécessairement simplement en présence de personnages «aveuglants».  Dans certains cas, une situation est possible dans laquelle toutes les pièces sélectionnées sont incluses dans un mouvement valide, mais il n'y a pas de mouvement valide, limité à déplacer uniquement ces formes sélectionnées.  Cela semble un peu déroutant, mais voici une illustration: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d_/3h/me/d_3hmeibopemfxnzcfpmwmvztty.gif"></div><br>  Dans ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu,</a> seuls les mouvements simultanés de groupes de trois pièces sont autorisés (s'il reste moins de pièces, tout le monde devrait bouger).  Toutes les figures sélectionnées se déplacent d'un pas et dans la même direction.  Capture d'échecs, ses pièces interfèrent avec le mouvement.  Pour gagner, vous devez tenir au moins une de vos pièces sur la dernière ligne, jusqu'au camp ennemi. <br><br>  Le jeu lui-même, à mon avis, n'est pas très intéressant, mais, du point de vue du codage, c'est une vraie folie.  Toute tentative de générer «honnêtement» tous les mouvements possibles de groupes de trois figures conduit à une explosion combinatoire.  Vous devez tromper (l'avantage de Dagaz le permet).  Pour commencer, nous générons tous les mouvements valides de pièces uniques.  C'est simple: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> step ( $<span class="hljs-number"><span class="hljs-number">1</span></span> add ))</code> </pre><br>  Jusqu'à ce que vous puissiez même vérifier le combat possible de votre propre figure, tout cela plus tard!  Nous allons simplement dans toutes les directions, dans la mesure du possible.  Ensuite, activez la « <a href="">magie</a> ».  Nous combinons simplement toutes les combinaisons possibles de trois mouvements de différentes pièces dans une seule direction, créant un produit cartésien.  Après cela, nous <a href="">rejetons les</a> mouvements qui tombent sur nos propres pièces. <br><br>  Pourquoi ne pas les déposer tout de suite?  Pour une raison très simple - une pièce a le droit de se déplacer vers un champ occupé si elle est libérée dans le cadre du même mouvement de groupe, et au moment de générer les mouvements "élémentaires", il n'y a aucune information sur la composition des groupes déplacés!  C'est pourquoi j'aime tellement ce projet.  Lui, de temps en temps, jette des puzzles si intéressants ici! <br></div></div><br>  Le déménagement ne doit pas avoir lieu sur un seul domaine, comme dans Abalone.  Dans le jeu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ordo</a> (et surtout dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ordo X</a> ), inventé par Dieter Stein en 2009, des groupes de personnages peuvent parcourir des distances bien plus grandes.  La seule condition est que les pièces de leur couleur, à la fin du tour, ne soient pas séparées (c'est le même invariant du jeu que la nécessité pour le roi de laisser la menace aux échecs).  Le joueur qui remporte la première ligne du plateau gagne. <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/e9/es/o2/e9eso2wtosdaokcmbftoppjdwqq.gif"></a> </div><br>  Dans ce jeu, il y a des mouvements à la fois longitudinaux et transversaux des «rangées» de pièces de toute taille et à n'importe quelle distance (au sein du plateau, bien sûr).  Il y a tellement de modèles utilisés pour générer des mouvements qu'il faut plus de 5 minutes pour traiter un <a href="">fichier ZRF</a> développé par moi avec un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">convertisseur</a> (la plupart des jeux sont traités en quelques secondes)!  On pourrait supposer que cela entraînerait des problèmes au stade de la génération des mouvements, mais ce n'est pas le cas.  La grande majorité des coups est coupée par l' <a href="">invariant du</a> jeu. <br><br><div class="spoiler">  <b class="spoiler_title">Une autre tâche de réflexion sur le cerveau est apparue ici</b> <div class="spoiler_text">  Le fait est que le mécanisme d'alternance de la sélection des figures que j'ai développé pour effectuer un mouvement de groupe, d'une manière générale, est incompatible avec l'interface de «push» des mouvements, implémentée par les anciennes versions du contrôleur.  C'est simple - pour faire un mouvement "poussant", vous devez sélectionner une figure qui a la capacité d'aller sur le terrain, occupée jusqu'à présent par une autre figure du groupe déplacé.  Mais nous ne pouvons pas afficher son champ cible, car la formation du groupe n'est pas terminée, et le déplacement d'une seule figure vers le champ occupé est très probablement interdit par les règles du jeu. <br><br>  En général, si tout se fait «selon les règles», il faut cliquer sur toutes les figures du groupe déplacé un par un et seulement après que l'interface affichera les champs cibles pour la dernière figure ajoutée.  Même à Abalon, avec ses groupes de trois personnages maximum, c'est un peu fatiguant, mais à Ordo c'est généralement impensable!  J'ai dû trouver une méthode spéciale qui «élargit» automatiquement le groupe lorsqu'il détecte les conflits décrits ci-dessus. <br><br><div class="spoiler">  <b class="spoiler_title">Voici à quoi ça ressemble pour l'ormeau</b> <div class="spoiler_text"><pre> <code class="javascript hljs">Dagaz.Model.closure = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board, move, group</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = []; _.each(group, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pos</span></span></span><span class="hljs-function">) </span></span>{ r.push(pos); }); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; r.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pos = r[i]; _.each(move.actions, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((a[<span class="hljs-number"><span class="hljs-number">0</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] == pos)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = a[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> piece = board.getPiece(p); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((piece !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (piece.player == board.player) &amp;&amp; (_.indexOf(r, p) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)) { r.push(p); } } }); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r; }</code> </pre></div></div><br>  Mais de longs mouvements de «poussée» sont autorisés dans Ordo et cet algorithme ne fonctionne pas!  Peu importe - toutes les fonctions définies dans Dagaz.Model peuvent être redéfinies. <br><br><div class="spoiler">  <b class="spoiler_title">De cette façon</b> <div class="spoiler_text"><pre> <code class="javascript hljs">Dagaz.Model.closure = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board, move, group</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> design = board.game.design; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = []; _.each(group, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pos</span></span></span><span class="hljs-function">) </span></span>{ r.push(pos); }); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; r.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pos = r[i]; _.each(move.actions, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((a[<span class="hljs-number"><span class="hljs-number">0</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] == pos)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> target = a[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = Dagaz.Model.getX(pos); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = Dagaz.Model.getY(pos); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dx = sign(Dagaz.Model.getX(target) - x); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dy = sign(Dagaz.Model.getY(target) - y); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dir = design.findDirection(pos, pos + (dy * Dagaz.Model.WIDTH) + dx); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dir !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((pos !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (pos != target)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> piece = board.getPiece(pos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((piece === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) || (piece.player != board.player)) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_.indexOf(r, pos) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { r.push(pos); } pos = design.navigate(board.player, pos, dir); } } } }); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r; }</code> </pre></div></div><br>  Cette surcharge est plus facile pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Takoka</a> .  Puisqu'il n'y a pas de mouvements "push" (il est toujours nécessaire de mettre clairement en évidence toutes les pièces incluses dans le groupe), il suffit de bloquer cette fonctionnalité, c'est-à-dire de ne pas étendre le groupe: <br><br><pre> <code class="javascript hljs">Dagaz.Model.closure = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board, move, group</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> group; }</code> </pre><br>  Je m'excuse pour le nom de la fonction qui ne dit rien à personne.  Je ne pouvais tout simplement pas trouver un meilleur nom pour l'action. <br></div></div><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/w0/ao/0l/w0ao0ly48ozfetiaojn5ilq9wum.png"></a> </div><br>  Ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> implémente également le mouvement de groupe, mais ses mécanismes sont complètement différents!  Ici, les chiffres se déplacent en groupes 3x3, de plus, les champs vides du groupe font également partie du «motif» déplacé.  La présence de chiffres sur l'un des huit champs externes montre les directions dans lesquelles vous pouvez vous déplacer, et le remplissage du champ central détermine si vous pouvez déplacer le "motif" sur une distance arbitraire ou seulement courte, pas plus de 3 étapes.  Pour gagner, il faut détruire "l'anneau" de l'ennemi - un analogue de la figure royale (c'est un champ vide, entouré de tous côtés par huit rempli).  Vous devez faire très attention à ne pas détruire votre bague aussi. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GESS</a> s'est avéré être un véritable cauchemar, à la fois en termes de " <a href="">magie</a> " et en termes de <a href="">prototype</a> lui-même - le squelette du jeu.  Il suffit de dire que la carte (20x20, en tenant compte d'un certain nombre de champs en dehors de la carte) se compose de deux couches.  La couche supérieure entière est entièrement remplie de formes invisibles qui contrôlent le mouvement.  Le mouvement des pierres qui composent les «motifs» des joueurs ne sont que des effets secondaires de ces mouvements.  Malheureusement, je n'ai pas encore réussi à développer un bot pour ce jeu. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hBuolYNV1Oo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  À la fin de l'article, je veux vous présenter quelque chose d'autre qui n'est pas directement lié au sujet du mouvement de groupe des personnages.  Ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> m'a demandé de faire l'un des abonnés à ma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page de</a> projet - Sultan Ratrout.  En général, ce sont des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dames de pilier</a> ordinaires sur une planche hexagonale.  Même sans les dames.  Le concept de révolution est différent!  Le terrain de jeu lui-même est transformable!  Profitez-en. <br><br>  <b><i>Je pars en vacances ...</i></b> <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416595/">https://habr.com/ru/post/fr416595/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416585/index.html">Extension Web multi-navigateur pour les scripts personnalisés Partie 3</a></li>
<li><a href="../fr416587/index.html">Quelques mots sur les subwoofers et pourquoi ils conviennent à presque tout le monde</a></li>
<li><a href="../fr416589/index.html">Cellules mortes: utilisation du pipeline 3D pour l'animation 2D</a></li>
<li><a href="../fr416591/index.html">"Resserrer les noix": pourquoi tout le monde a commencé à parler de resserrement de la réglementation du secteur informatique</a></li>
<li><a href="../fr416593/index.html">Ma participation au développement d'Uncharted 4</a></li>
<li><a href="../fr416597/index.html">IBM Watson Build - essayez-vous au concours des développeurs</a></li>
<li><a href="../fr416599/index.html">Qu'est-ce que l'eCPM et comment l'augmenter?</a></li>
<li><a href="../fr416601/index.html">Revue Vertex Impress Play: corps mince + batterie 5000 mAh + bons appareils photo 16 mégapixels</a></li>
<li><a href="../fr416605/index.html">@Pythonetc juin 2018</a></li>
<li><a href="../fr416607/index.html">Post-mortem en binôme: comment vaincre Cthulhu et 2 000 autres personnes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>