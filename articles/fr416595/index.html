<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™‰ ğŸ¤™ğŸ¾ ğŸ‘¨ğŸ¿â€ğŸŒ¾ Dagaz: Horde ğŸš… ğŸ’ˆ ğŸŒ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous Ãªtes des millions. Nous - l'obscuritÃ© et l'obscuritÃ© et l'obscuritÃ©. 
 Essayez-le, combattez-nous! 
 Oui, les Scythes - nous le sommes! Oui, les ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dagaz: Horde</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416595/"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/43e/794/3a3/43e7943a3e289a281570ab8b68d347b8.png" alt="image">  <b><i>Vous Ãªtes des millions.</i></b>  <b><i>Nous - l'obscuritÃ© et l'obscuritÃ© et l'obscuritÃ©.</i></b> <b><i><br></i></b>  <b><i>Essayez-le, combattez-nous!</i></b> <b><i><br></i></b>  <b><i>Oui, les Scythes - nous le sommes!</i></b>  <b><i>Oui, les Asiatiques - nous ...</i></b> <b><i><br><br></i></b>  <b><i>Alexander Block " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scythians</a> "</i></b> <br><br>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> prÃ©cÃ©dent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">,</a> j'ai beaucoup parlÃ© de mes dÃ©couvertes dans le domaine de la conception et de l'interface utilisateur des jeux de sociÃ©tÃ©, mais j'ai dÃ» interrompre cette histoire, vous pouvez dire au milieu, en partie Ã  cause du volume important de l'article, en partie simplement parce qu'Ã  ce moment-lÃ  je n'Ã©tais pas prÃªt Ã  continuer suivant.  Depuis lors, beaucoup de choses ont changÃ©.  De nouveaux problÃ¨mes intÃ©ressants ont Ã©tÃ© rÃ©solus et les jeux qui les ont gÃ©nÃ©rÃ©s (non moins intÃ©ressants) ont Ã©tÃ© ajoutÃ©s Ã  la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">version</a> .  Je veux en parler aujourd'hui. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/nWSawKsdTlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Si quelqu'un se souvient, il s'agissait du jeu " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Abalon</a> ", dÃ©veloppÃ© par Michel Lale et Laurent Levy en 1988.  Son essence est de pousser les balles ennemies hors du terrain.  Deux balles peuvent pousser une et trois balles - une paire de balles de couleur diffÃ©rente.  Le joueur peut dÃ©placer ses balles sur le plateau, une Ã  la fois, ou en groupe, deux ou trois balles chacune (en plus, trois balles devraient constituer une Â«rangÃ©eÂ»).  Qu'est-ce qui m'a empÃªchÃ© de faire ce jeu la derniÃ¨re fois? <br><br>  Ã‰videmment pas le mouvement de groupe lui-mÃªme.  Le mouvement simultanÃ© de plusieurs piÃ¨ces, en un seul mouvement, se fait mÃªme aux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ã©checs</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">roque</a> ).  Et les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">puzzles</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sliding puzzles</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sont</a> simplement construits pour garantir que ce mouvement se produit de maniÃ¨re synchrone et en douceur.  Regardons un jeu dÃ©veloppÃ© par Robert Abbott en 1975: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/kv/fp/d-/kvfpd-kf--0kt2sproxmbidswpi.png"></a> </div><br>  Il ressemble Ã  un Abalon.  La seule diffÃ©rence est que la "rangÃ©e" ne "pousse" pas la piÃ¨ce de l'adversaire de sa place, mais la retire simplement du plateau en utilisant une capture "d'Ã©checs".  La victoire est attribuÃ©e Ã  l'un des joueurs qui a rÃ©ussi Ã  tirer plus sur la derniÃ¨re rangÃ©e du plateau de ses piÃ¨ces que son adversaire n'a rÃ©ussi Ã  le faire Ã  ce moment-lÃ .  L'ensemble du jeu est construit sur des "lignes" mobiles.  Il est peu probable qu'il rÃ©ussisse Ã  gagner uniquement des piÃ¨ces solitaires.  VoilÃ  Ã  quoi ressemble un simple mouvement de poussÃ©e. <br><br><div class="spoiler">  <b class="spoiler_title">Zrf</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> push-1 ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> friend?) (<span class="hljs-name"><span class="hljs-name">while</span></span> friend? cascade $<span class="hljs-number"><span class="hljs-number">1</span></span> ) (<span class="hljs-name"><span class="hljs-name">verify</span></span> not-friend?) add ))</code> </pre> </div></div><br>  Il s'agit de la <b>cascade de</b> mots magiques - elle oblige l'interprÃ¨te Ã  "libÃ©rer" la figure dÃ©placÃ©e vers le champ actuel, en prenant "dans la main" une autre figure (ce n'est pas important pour elle-mÃªme ou pour l'adversaire) et continue de bouger, dÃ©jÃ  avec la nouvelle figure "en main".  En une seule opÃ©ration, une telle opÃ©ration peut Ãªtre effectuÃ©e de maniÃ¨re rÃ©pÃ©tÃ©e, dÃ©plaÃ§ant ainsi un nombre illimitÃ© de piÃ¨ces Ã  la fois.  De tels cas (et un peu plus complexes) se retrouvent Ã©galement dans d'autres jeux - " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guns</a> ", " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dameo</a> ", " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Leutwayite Game</a> ", ... <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ts/cz/0-/tscz0-t_xblqjzzxeolgpa-7cjm.gif"></a> </div><br>  Du point de vue de l'interface utilisateur, les mouvements de Â«poussÃ©eÂ» sont Ã©galement mis en Å“uvre de maniÃ¨re assez triviale.  L'Ã©tiquette familiÃ¨re du champ cible (cercle vert) apparaÃ®t sur la figure.  Si (selon les rÃ¨gles du jeu) nous pouvons manger ce morceau - nous mangeons (capture d'Ã©checs), sinon - nous poussons.  Vous pouvez pousser une rangÃ©e et plus d'un champ en avant (comme dans le jeu Epaminondas).  Bien sÃ»r, coder un tel mouvement sera un peu plus compliquÃ©: <br><br><div class="spoiler">  <b class="spoiler_title">Zrf</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> push-2 ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> friend?) (<span class="hljs-name"><span class="hljs-name">while</span></span> friend? mark $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> not-enemy?) to back cascade $<span class="hljs-number"><span class="hljs-number">1</span></span> ) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> not-friend?) add ))</code> </pre></div></div><br>  Le mot clÃ© to (et son appariement Ã  <b>partir de</b> ) agit en conjonction avec <b>cascade</b> .  Cela signifie que le chiffre Â«hors de la mainÂ» doit Ãªtre mis sur le plateau maintenant, et le nouveau chiffre Â«prendre dans la mainÂ» un peu plus tard, aprÃ¨s avoir naviguÃ© vers un autre champ.  En gÃ©nÃ©ral, Â«pousserÂ» les mouvements est simple, mais il existe un autre type de mouvement de groupe vers Abalon: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ta/hn/js/tahnjsqbpx_m2hmguohqdiannb4.gif"></a> </div><br>  Je les appelle des mouvements "transversaux".  Du point de vue du codage ZRF, il n'y a rien de compliquÃ© en eux.  Le problÃ¨me est dans l'interface utilisateur.  Comment Â«direÂ» au programme que le joueur veut dÃ©placer non pas une balle, mais un groupe, si les deux mouvements sont autorisÃ©s par les rÃ¨gles?  J'utilise le mÃªme Â«clignotementÂ», qui m'a Ã©tÃ© si utile dans les dames, pour marquer le chiffre Â«actuelÂ».  Seulement maintenant, il y a plusieurs chiffres Â«actuelsÂ» dans l'ensemble. <br><br>  Un clic sur une figure Â«libreÂ» l'ajoute au groupe s'il y a un mouvement dans lequel toutes les figures ajoutÃ©es au groupe sont impliquÃ©es (il est encore plus facile de ne pas relÃ¢cher le bouton, mettant en surbrillance l'ensemble du groupe en un clic de souris).  S'il n'y a pas de tels mouvements, seul un nouveau groupe est crÃ©Ã©, composÃ© jusqu'Ã  prÃ©sent d'une seule piÃ¨ce.  Les cercles verts sont toujours affichÃ©s pour le dernier chiffre ajoutÃ© (cela peut ne pas Ãªtre trÃ¨s Ã©vident, mais vous pouvez vous y habituer).  Un clic rÃ©pÃ©tÃ© sur une figure Â«aveuglanteÂ» rÃ©initialise immÃ©diatement l'ensemble du groupe. <br><br><div class="spoiler">  <b class="spoiler_title">Au fait</b> <div class="spoiler_text">  Les cercles verts n'apparaÃ®tront pas nÃ©cessairement simplement en prÃ©sence de personnages Â«aveuglantsÂ».  Dans certains cas, une situation est possible dans laquelle toutes les piÃ¨ces sÃ©lectionnÃ©es sont incluses dans un mouvement valide, mais il n'y a pas de mouvement valide, limitÃ© Ã  dÃ©placer uniquement ces formes sÃ©lectionnÃ©es.  Cela semble un peu dÃ©routant, mais voici une illustration: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d_/3h/me/d_3hmeibopemfxnzcfpmwmvztty.gif"></div><br>  Dans ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu,</a> seuls les mouvements simultanÃ©s de groupes de trois piÃ¨ces sont autorisÃ©s (s'il reste moins de piÃ¨ces, tout le monde devrait bouger).  Toutes les figures sÃ©lectionnÃ©es se dÃ©placent d'un pas et dans la mÃªme direction.  Capture d'Ã©checs, ses piÃ¨ces interfÃ¨rent avec le mouvement.  Pour gagner, vous devez tenir au moins une de vos piÃ¨ces sur la derniÃ¨re ligne, jusqu'au camp ennemi. <br><br>  Le jeu lui-mÃªme, Ã  mon avis, n'est pas trÃ¨s intÃ©ressant, mais, du point de vue du codage, c'est une vraie folie.  Toute tentative de gÃ©nÃ©rer Â«honnÃªtementÂ» tous les mouvements possibles de groupes de trois figures conduit Ã  une explosion combinatoire.  Vous devez tromper (l'avantage de Dagaz le permet).  Pour commencer, nous gÃ©nÃ©rons tous les mouvements valides de piÃ¨ces uniques.  C'est simple: <br><br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> step ( $<span class="hljs-number"><span class="hljs-number">1</span></span> add ))</code> </pre><br>  Jusqu'Ã  ce que vous puissiez mÃªme vÃ©rifier le combat possible de votre propre figure, tout cela plus tard!  Nous allons simplement dans toutes les directions, dans la mesure du possible.  Ensuite, activez la Â« <a href="">magie</a> Â».  Nous combinons simplement toutes les combinaisons possibles de trois mouvements de diffÃ©rentes piÃ¨ces dans une seule direction, crÃ©ant un produit cartÃ©sien.  AprÃ¨s cela, nous <a href="">rejetons les</a> mouvements qui tombent sur nos propres piÃ¨ces. <br><br>  Pourquoi ne pas les dÃ©poser tout de suite?  Pour une raison trÃ¨s simple - une piÃ¨ce a le droit de se dÃ©placer vers un champ occupÃ© si elle est libÃ©rÃ©e dans le cadre du mÃªme mouvement de groupe, et au moment de gÃ©nÃ©rer les mouvements "Ã©lÃ©mentaires", il n'y a aucune information sur la composition des groupes dÃ©placÃ©s!  C'est pourquoi j'aime tellement ce projet.  Lui, de temps en temps, jette des puzzles si intÃ©ressants ici! <br></div></div><br>  Le dÃ©mÃ©nagement ne doit pas avoir lieu sur un seul domaine, comme dans Abalone.  Dans le jeu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ordo</a> (et surtout dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ordo X</a> ), inventÃ© par Dieter Stein en 2009, des groupes de personnages peuvent parcourir des distances bien plus grandes.  La seule condition est que les piÃ¨ces de leur couleur, Ã  la fin du tour, ne soient pas sÃ©parÃ©es (c'est le mÃªme invariant du jeu que la nÃ©cessitÃ© pour le roi de laisser la menace aux Ã©checs).  Le joueur qui remporte la premiÃ¨re ligne du plateau gagne. <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/e9/es/o2/e9eso2wtosdaokcmbftoppjdwqq.gif"></a> </div><br>  Dans ce jeu, il y a des mouvements Ã  la fois longitudinaux et transversaux des Â«rangÃ©esÂ» de piÃ¨ces de toute taille et Ã  n'importe quelle distance (au sein du plateau, bien sÃ»r).  Il y a tellement de modÃ¨les utilisÃ©s pour gÃ©nÃ©rer des mouvements qu'il faut plus de 5 minutes pour traiter un <a href="">fichier ZRF</a> dÃ©veloppÃ© par moi avec un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">convertisseur</a> (la plupart des jeux sont traitÃ©s en quelques secondes)!  On pourrait supposer que cela entraÃ®nerait des problÃ¨mes au stade de la gÃ©nÃ©ration des mouvements, mais ce n'est pas le cas.  La grande majoritÃ© des coups est coupÃ©e par l' <a href="">invariant du</a> jeu. <br><br><div class="spoiler">  <b class="spoiler_title">Une autre tÃ¢che de rÃ©flexion sur le cerveau est apparue ici</b> <div class="spoiler_text">  Le fait est que le mÃ©canisme d'alternance de la sÃ©lection des figures que j'ai dÃ©veloppÃ© pour effectuer un mouvement de groupe, d'une maniÃ¨re gÃ©nÃ©rale, est incompatible avec l'interface de Â«pushÂ» des mouvements, implÃ©mentÃ©e par les anciennes versions du contrÃ´leur.  C'est simple - pour faire un mouvement "poussant", vous devez sÃ©lectionner une figure qui a la capacitÃ© d'aller sur le terrain, occupÃ©e jusqu'Ã  prÃ©sent par une autre figure du groupe dÃ©placÃ©.  Mais nous ne pouvons pas afficher son champ cible, car la formation du groupe n'est pas terminÃ©e, et le dÃ©placement d'une seule figure vers le champ occupÃ© est trÃ¨s probablement interdit par les rÃ¨gles du jeu. <br><br>  En gÃ©nÃ©ral, si tout se fait Â«selon les rÃ¨glesÂ», il faut cliquer sur toutes les figures du groupe dÃ©placÃ© un par un et seulement aprÃ¨s que l'interface affichera les champs cibles pour la derniÃ¨re figure ajoutÃ©e.  MÃªme Ã  Abalon, avec ses groupes de trois personnages maximum, c'est un peu fatiguant, mais Ã  Ordo c'est gÃ©nÃ©ralement impensable!  J'ai dÃ» trouver une mÃ©thode spÃ©ciale qui Â«Ã©largitÂ» automatiquement le groupe lorsqu'il dÃ©tecte les conflits dÃ©crits ci-dessus. <br><br><div class="spoiler">  <b class="spoiler_title">Voici Ã  quoi Ã§a ressemble pour l'ormeau</b> <div class="spoiler_text"><pre> <code class="javascript hljs">Dagaz.Model.closure = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board, move, group</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = []; _.each(group, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pos</span></span></span><span class="hljs-function">) </span></span>{ r.push(pos); }); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; r.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pos = r[i]; _.each(move.actions, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((a[<span class="hljs-number"><span class="hljs-number">0</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] == pos)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = a[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> piece = board.getPiece(p); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((piece !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (piece.player == board.player) &amp;&amp; (_.indexOf(r, p) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>)) { r.push(p); } } }); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r; }</code> </pre></div></div><br>  Mais de longs mouvements de Â«poussÃ©eÂ» sont autorisÃ©s dans Ordo et cet algorithme ne fonctionne pas!  Peu importe - toutes les fonctions dÃ©finies dans Dagaz.Model peuvent Ãªtre redÃ©finies. <br><br><div class="spoiler">  <b class="spoiler_title">De cette faÃ§on</b> <div class="spoiler_text"><pre> <code class="javascript hljs">Dagaz.Model.closure = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board, move, group</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> design = board.game.design; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = []; _.each(group, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pos</span></span></span><span class="hljs-function">) </span></span>{ r.push(pos); }); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; r.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pos = r[i]; _.each(move.actions, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((a[<span class="hljs-number"><span class="hljs-number">0</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (a[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] == pos)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> target = a[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = Dagaz.Model.getX(pos); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = Dagaz.Model.getY(pos); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dx = sign(Dagaz.Model.getX(target) - x); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dy = sign(Dagaz.Model.getY(target) - y); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dir = design.findDirection(pos, pos + (dy * Dagaz.Model.WIDTH) + dx); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dir !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((pos !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (pos != target)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> piece = board.getPiece(pos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((piece === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) || (piece.player != board.player)) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_.indexOf(r, pos) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { r.push(pos); } pos = design.navigate(board.player, pos, dir); } } } }); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r; }</code> </pre></div></div><br>  Cette surcharge est plus facile pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Takoka</a> .  Puisqu'il n'y a pas de mouvements "push" (il est toujours nÃ©cessaire de mettre clairement en Ã©vidence toutes les piÃ¨ces incluses dans le groupe), il suffit de bloquer cette fonctionnalitÃ©, c'est-Ã -dire de ne pas Ã©tendre le groupe: <br><br><pre> <code class="javascript hljs">Dagaz.Model.closure = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board, move, group</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> group; }</code> </pre><br>  Je m'excuse pour le nom de la fonction qui ne dit rien Ã  personne.  Je ne pouvais tout simplement pas trouver un meilleur nom pour l'action. <br></div></div><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/w0/ao/0l/w0ao0ly48ozfetiaojn5ilq9wum.png"></a> </div><br>  Ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> implÃ©mente Ã©galement le mouvement de groupe, mais ses mÃ©canismes sont complÃ¨tement diffÃ©rents!  Ici, les chiffres se dÃ©placent en groupes 3x3, de plus, les champs vides du groupe font Ã©galement partie du Â«motifÂ» dÃ©placÃ©.  La prÃ©sence de chiffres sur l'un des huit champs externes montre les directions dans lesquelles vous pouvez vous dÃ©placer, et le remplissage du champ central dÃ©termine si vous pouvez dÃ©placer le "motif" sur une distance arbitraire ou seulement courte, pas plus de 3 Ã©tapes.  Pour gagner, il faut dÃ©truire "l'anneau" de l'ennemi - un analogue de la figure royale (c'est un champ vide, entourÃ© de tous cÃ´tÃ©s par huit rempli).  Vous devez faire trÃ¨s attention Ã  ne pas dÃ©truire votre bague aussi. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GESS</a> s'est avÃ©rÃ© Ãªtre un vÃ©ritable cauchemar, Ã  la fois en termes de " <a href="">magie</a> " et en termes de <a href="">prototype</a> lui-mÃªme - le squelette du jeu.  Il suffit de dire que la carte (20x20, en tenant compte d'un certain nombre de champs en dehors de la carte) se compose de deux couches.  La couche supÃ©rieure entiÃ¨re est entiÃ¨rement remplie de formes invisibles qui contrÃ´lent le mouvement.  Le mouvement des pierres qui composent les Â«motifsÂ» des joueurs ne sont que des effets secondaires de ces mouvements.  Malheureusement, je n'ai pas encore rÃ©ussi Ã  dÃ©velopper un bot pour ce jeu. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hBuolYNV1Oo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Ã€ la fin de l'article, je veux vous prÃ©senter quelque chose d'autre qui n'est pas directement liÃ© au sujet du mouvement de groupe des personnages.  Ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jeu</a> m'a demandÃ© de faire l'un des abonnÃ©s Ã  ma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page de</a> projet - Sultan Ratrout.  En gÃ©nÃ©ral, ce sont des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dames de pilier</a> ordinaires sur une planche hexagonale.  MÃªme sans les dames.  Le concept de rÃ©volution est diffÃ©rent!  Le terrain de jeu lui-mÃªme est transformable!  Profitez-en. <br><br>  <b><i>Je pars en vacances ...</i></b> <br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416595/">https://habr.com/ru/post/fr416595/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416585/index.html">Extension Web multi-navigateur pour les scripts personnalisÃ©s Partie 3</a></li>
<li><a href="../fr416587/index.html">Quelques mots sur les subwoofers et pourquoi ils conviennent Ã  presque tout le monde</a></li>
<li><a href="../fr416589/index.html">Cellules mortes: utilisation du pipeline 3D pour l'animation 2D</a></li>
<li><a href="../fr416591/index.html">"Resserrer les noix": pourquoi tout le monde a commencÃ© Ã  parler de resserrement de la rÃ©glementation du secteur informatique</a></li>
<li><a href="../fr416593/index.html">Ma participation au dÃ©veloppement d'Uncharted 4</a></li>
<li><a href="../fr416597/index.html">IBM Watson Build - essayez-vous au concours des dÃ©veloppeurs</a></li>
<li><a href="../fr416599/index.html">Qu'est-ce que l'eCPM et comment l'augmenter?</a></li>
<li><a href="../fr416601/index.html">Revue Vertex Impress Play: corps mince + batterie 5000 mAh + bons appareils photo 16 mÃ©gapixels</a></li>
<li><a href="../fr416605/index.html">@Pythonetc juin 2018</a></li>
<li><a href="../fr416607/index.html">Post-mortem en binÃ´me: comment vaincre Cthulhu et 2 000 autres personnes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>