<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüî¨ ü§æüèæ üéá Reconnaissance faciale au niveau du genou üìõ ü•ê üë≤üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En g√©n√©ral, la reconnaissance faciale et l'identification des personnes en fonction de leurs r√©sultats ressemblent √† du sexe d'adolescent pour les a√Æn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reconnaissance faciale au niveau du genou</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465145/"> En g√©n√©ral, la reconnaissance faciale et l'identification des personnes en fonction de leurs r√©sultats ressemblent √† du sexe d'adolescent pour les a√Æn√©s - tout le monde parle beaucoup de lui, mais peu de pratique.  Il est clair que nous ne sommes plus surpris qu'apr√®s avoir t√©l√©charg√© des photos de rassemblements amicaux, Facebook / VK sugg√®re de marquer les personnes trouv√©es sur la photo, mais ici, nous savons intuitivement que les r√©seaux sociaux ont une bonne aide sous la forme d'un graphique de connexions d'une personne.  Et s'il n'y a pas un tel graphique?  Commen√ßons cependant dans l'ordre. <br><br><img src="https://habrastorage.org/webt/m9/y6/h4/m9y6h4ogtivd9hcrktofvqcqzue.jpeg" alt="Quelque chose se cache dans la porte avec une bo√Æte"><br><a name="habracut"></a><br>  Initialement, la reconnaissance faciale et l'identification de ¬´l'ami / l'ennemi¬ª avec nous est n√©e de besoins exclusivement domestiques - les toxicomanes sont entr√©s dans la porte d'un coll√®gue et surveillent constamment l'image de la cam√©ra vid√©o install√©e, et m√™me d√©montent o√π le voisin et o√π l'√©tranger n'avait aucun d√©sir non. <br><br>  Par cons√©quent, en seulement une semaine, un prototype a √©t√© assembl√© sur le genou, compos√© d'une cam√©ra IP, d'un p√©riph√©rique √† carte unique, d'un capteur de mouvement et de la biblioth√®que de reconnaissance Python face_recognition.  √âtant donn√© que la biblioth√®que python √©tait sur une seule plaque, un mat√©riel plut√¥t puissant ... disons-le soigneusement, pas tr√®s rapidement, nous avons d√©cid√© de construire le processus de traitement comme suit: <br><ul><li>  le capteur de mouvement d√©termine s'il y a mouvement dans la zone d'espace qui lui est confi√©e et signale sa pr√©sence; </li><li>  un service √©crit bas√© sur gstreamer, qui re√ßoit constamment un flux d'une cam√©ra IP, coupe 5 secondes avant et 10 secondes apr√®s la d√©tection et le transmet √† la biblioth√®que de reconnaissance pour analyse; </li><li>  √† son tour, elle regarde la vid√©o, y trouve des visages, les compare √† des √©chantillons connus et, si elle est inconnue, remet la vid√©o au canal Telegram, plus tard, elle √©tait cens√©e √™tre contr√¥l√©e au m√™me endroit pour couper imm√©diatement les faux positifs - par exemple, lorsqu'un voisin tourn√© vers la cam√©ra du mauvais c√¥t√© sur les √©chantillons. </li></ul><br>  L'ensemble du processus a √©t√© coll√© ensemble par notre bien-aim√© Erlang, et au cours des tests sur des coll√®gues, il a prouv√© sa capacit√© de travail minimale. <br><br>  Cependant, le mod√®le assembl√© n'a pas trouv√© d'application dans la vraie vie - pas en raison de son imperfection technique, ce qui √©tait sans aucun doute - comme le montre l'exp√©rience, collect√© sur le genou dans des conditions de bureau en serre a une tr√®s mauvaise tendance √† se casser sur le terrain, et au moment de la d√©monstration au client , et √† cause de celles organisationnelles, les r√©sidents de l'entr√©e ont refus√© la majorit√© de toute surveillance vid√©o. <br><br>  Le projet est all√© sur l'√©tag√®re et a p√©riodiquement pouss√© avec un b√¢ton pour des d√©monstrations pendant les ventes et l'envie de se r√©incarner dans le m√©nage personnel. <br><br>  Tout a chang√© depuis le moment o√π nous avions un projet plus sp√©cifique et assez commercial sur le m√™me sujet.  Comme il ne serait pas possible de couper les coins en utilisant un capteur de mouvement directement √† partir de l'√©nonc√© du probl√®me, j'ai d√ª approfondir les nuances de la recherche et de la reconnaissance des visages dans trois t√™tes (d'accord, deux et demi, si vous comptez la mienne) directement sur le flux.  Et puis une r√©v√©lation s'est produite. <br><br>  Le probl√®me est que la plupart des r√©sultats sur cette question sont des croquis purement acad√©miques sur le th√®me ¬´J'ai d√ª √©crire un article dans un magazine sur un sujet √† la mode et obtenir une coche pour la publication¬ª.  Je ne porte pas atteinte aux m√©rites des scientifiques - parmi les articles que j'ai trouv√©s il y avait beaucoup d'utiles et d'int√©ressants, mais, h√©las, je dois admettre que la reproductibilit√© du travail de leur code affich√© sur Github laisse beaucoup √† d√©sirer ou ressemble √† une entreprise douteuse avec du temps perdu au final. <br><br>  De nombreux cadres pour les r√©seaux de neurones et l'apprentissage automatique √©taient souvent difficiles √† lever - la reconnaissance faciale √©tait une t√¢che √©troite distincte pour eux, sans int√©r√™t pour un large √©ventail de probl√®mes qu'ils ont r√©solus.  En d'autres termes, pour prendre un exemple pr√™t √† l'emploi et l'ex√©cuter sur le mat√©riel cible juste pour v√©rifier comment cela fonctionne et si cela fonctionne, n'a pas fonctionn√©.  Ce n'√©tait pas un exemple, alors la n√©cessit√© de l'obtenir a sugg√©r√© une qu√™te aigre de l'assemblage de certaines biblioth√®ques de certaines versions pour un syst√®me d'exploitation strictement d√©fini.  C'est-√†-dire  de prendre et de voler en d√©placement - des miettes litt√©ralement comme le visage_recognition mentionn√© pr√©c√©demment, que nous avons utilis√© pour les m√©tiers pr√©c√©dents. <br><br>  Les grandes entreprises, comme toujours, nous ont sauv√©s.  Intel et Nvidia ont depuis longtemps ressenti l'√©lan croissant et l'attractivit√© commerciale de cette classe de t√¢ches, mais en tant que fournisseurs d'√©quipements, ils distribuent gratuitement leurs frameworks pour r√©soudre des probl√®mes d'application sp√©cifiques. <br><br>  Notre projet n'√©tait probablement pas de recherche, mais de nature exp√©rimentale, nous n'avons donc pas analys√© et compar√© les solutions de fournisseurs individuels, mais simplement pris la premi√®re dans le but de collecter un prototype pr√™t √† l'emploi et de le tester au combat, tout en recevant la r√©ponse la plus rapide possible.  Par cons√©quent, le choix s'est tr√®s vite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">port√©</a> sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Intel OpenVINO</a> - une biblioth√®que pour l'application pratique de l'apprentissage automatique dans les t√¢ches appliqu√©es. <br><br>  Pour commencer, nous avons mont√© un stand, qui est traditionnellement un ensemble de nettop avec un processeur Intel Core i3 et des cam√©ras IP de fournisseurs chinois sur le march√©.  La cam√©ra √©tait directement connect√©e au nettop et lui fournissait un flux RTSP avec un FPS pas tr√®s grand, bas√© sur l'hypoth√®se que les gens ne courraient toujours pas devant lui comme dans les comp√©titions.  La vitesse de traitement d'une image (recherche et reconnaissance de visages) a fluctu√© de l'ordre de dizaines √† centaines de millisecondes, ce qui √©tait bien suffisant pour int√©grer le m√©canisme de recherche des personnes utilisant des √©chantillons existants.  De plus, nous avions √©galement un plan de sauvegarde - Intel a un coprocesseur sp√©cial pour acc√©l√©rer les calculs des r√©seaux de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">neurones Neural Compute Stick 2</a> , que nous pourrions utiliser si nous n'avions pas de processeur √† usage g√©n√©ral.  Mais - jusqu'√† pr√©sent, rien ne s'est pass√©. <br><br>  Apr√®s avoir termin√© l'assemblage et v√©rifi√© la fonctionnalit√© des exemples de base - une caract√©ristique distinctive du SDK Intel se trouvait dans un guide d'exemples pas √† pas et tr√®s d√©taill√© - nous avons commenc√© √† cr√©er le logiciel. <br><br>  La t√¢che principale qui nous attendait √©tait de rechercher une personne dans le champ de vision de la cam√©ra, son identification et une notification en temps opportun de sa pr√©sence.  En cons√©quence, en plus de reconna√Ætre les visages et de les comparer avec des mod√®les (comment faire cela, √† l'√©poque, ne posait pas moins de questions que tout le reste), nous devions fournir des √©l√©ments secondaires du plan d'interface.  √Ä savoir, nous devons recevoir des cadres avec les visages des personnes n√©cessaires de la m√™me cam√©ra pour leur identification ult√©rieure.  Pourquoi, √† partir du m√™me appareil photo, je pense que c'est aussi assez √©vident - le point d'installation de l'appareil photo sur l'objet et l'optique de l'objectif introduisent certaines distorsions, ce qui, vraisemblablement, peut affecter la qualit√© de la reconnaissance, nous utilisons une source de donn√©es source diff√©rente d'un outil de suivi. <br><br>  C'est-√†-dire  En plus du gestionnaire de flux lui-m√™me, nous avons besoin d'au moins une archive vid√©o et un analyseur de fichiers vid√©o qui isolera tous les visages d√©tect√©s de l'enregistrement et sauvegardera les plus appropri√©s comme r√©f√©rences. <br><br>  Comme toujours, nous avons pris le familier Erlang et PostgreSQL comme colle entre ffmpeg, les applications sur OpenVINO et l'API Telegram Bot pour les alertes.  De plus, nous avions besoin d'une interface Web pour fournir l'ensemble minimal de proc√©dures de gestion du complexe, que notre coll√®gue frontender avait t√©l√©charg√© sur VueJS. <br><br>  La logique du travail √©tait la suivante: <br><ul><li>  sous le contr√¥le d'un plan de contr√¥le (√† Erlang) ffmpeg √©crit un flux de la cam√©ra vers la vid√©o en sections de cinq minutes, un processus distinct garantit que les enregistrements sont stock√©s dans un volume strictement sp√©cifi√© et nettoie le plus ancien lorsque ce seuil est atteint; </li><li>  gr√¢ce √† l'interface Web, vous pouvez afficher n'importe quel enregistrement, ils sont class√©s par ordre chronologique, ce qui, bien que non sans difficult√©, vous permet d'isoler le fragment souhait√© et de l'envoyer pour traitement; </li><li>  le traitement consiste √† analyser la vid√©o et √† extraire des images avec des visages d√©tect√©s, il ne fait que le logiciel bas√© sur OpenVINO (je dois dire que nous avons r√©ussi ici √† r√©duire un peu l'angle - le logiciel pour analyser le flux et analyser les fichiers est presque identique, c'est pourquoi la plupart de celui-ci est all√© √† une biblioth√®que partag√©e, et les utilitaires eux-m√™mes ne diff√®rent que dans la cha√Æne de traitement √† la gstreamer modulaire).  Le traitement a lieu sur vid√©o, isolant les visages trouv√©s √† l'aide d'un r√©seau neuronal sp√©cialement form√©.  Les fragments r√©sultants du cadre contenant les visages tombent dans un autre r√©seau de neurones, qui forme un vecteur √† 256 √©l√©ments, qui est, en fait, les coordonn√©es des points de r√©f√©rence du visage d'une personne.  Ce vecteur, le cadre d√©tect√© et les coordonn√©es du rectangle de la face trouv√©e sont stock√©s dans la base de donn√©es; </li><li>  en outre, une fois le traitement termin√©, l'op√©rateur ouvre la vari√©t√© de trames dessin√©es, est horrifi√© par leur nombre et proc√®de √† la recherche de personnes cibles.  Les √©chantillons s√©lectionn√©s peuvent √™tre ajout√©s √† une personne existante ou en cr√©er un nouveau.  Une fois le traitement de la t√¢che termin√©, les r√©sultats de l'analyse sont supprim√©s, √† l'exception des vecteurs stock√©s mapp√©s aux enregistrements d'observables; </li><li>  en cons√©quence, nous pouvons regarder √† la fois les trames et les vecteurs de d√©tection et √©diter, en supprimant les √©chantillons non r√©ussis; </li><li>  parall√®lement au cycle de d√©tection en arri√®re-plan, le service d'analyse de flux fonctionne toujours, ce qui fait la m√™me chose, mais avec le flux de la cam√©ra.  Il s√©lectionne les visages dans le flux observ√© et les compare aux √©chantillons de la base de donn√©es, qui est bas√©e sur l'hypoth√®se simple que les vecteurs d'une personne seront plus proches les uns des autres que de tous les autres vecteurs.  Un calcul par paire de la distance entre les vecteurs se produit, lorsque le seuil est atteint, un enregistrement de d√©tection et une trame sont mis dans la base de donn√©es.  De plus, une personne est ajout√©e √† la liste d'arr√™t dans un avenir proche, ce qui √©vite plusieurs notifications concernant la m√™me personne; </li><li>  le plan de contr√¥le v√©rifie p√©riodiquement le journal de d√©tection et, en cas de nouvelles entr√©es, notifie avec un message avec la photo jointe et met en √©vidence le visage √† travers le bot √† ceux qui sont autoris√©s selon les param√®tres. </li></ul><br><br>  Cela ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/vc/jo/_h/vcjo_haxpwhnxoe1-37sozet9gs.jpeg" alt="Nous pouvons donc fouiller dans l'archive"><br>  <i>Voir l'archive</i> <br><br><img src="https://habrastorage.org/webt/07/dq/x8/07dqx8o9vmcavh7qxj7rnduca8m.jpeg" alt="Et donc - piquez dans les tasses √©clair√©es dans la vid√©o"><br>  <i>R√©sultats de l'analyse vid√©o</i> <br><br><img src="https://habrastorage.org/webt/fp/ky/ct/fpkyctbrq3slopbowp5wurzoaug.jpeg" alt="Et les voici, ces gars-l√†!"><br>  <i>Liste des personnalit√©s observ√©es</i> <br><br>  La solution r√©sultante est √† bien des √©gards controvers√©e et parfois m√™me pas optimale √† la fois en termes de productivit√© et en termes de r√©duction du temps de r√©action.  Mais, je le r√©p√®te, nous n'avions pas pour objectif d'obtenir un syst√®me efficace tout de suite, mais simplement de suivre cette voie et de remplir le nombre maximum de c√¥nes, d'identifier les chemins √©troits et les probl√®mes potentiels non √©vidents. <br><br>  Le syst√®me assembl√© a √©t√© test√© dans des conditions de bureau √† effet de serre pendant une semaine.  Pendant ce temps, les observations suivantes ont √©t√© not√©es: <br><ul><li>  la qualit√© de la reconnaissance d√©pend clairement de la qualit√© des √©chantillons originaux.  Si la personne observ√©e passe trop rapidement dans la zone d'observation, alors avec un degr√© √©lev√© de probabilit√©, elle ne laissera pas de donn√©es pour l'√©chantillonnage et ne sera pas reconnue.  Cependant, je pense que c'est une question de r√©glage fin du syst√®me, y compris les param√®tres d'√©clairage et de flux vid√©o; </li><li>  √©tant donn√© que le syst√®me fonctionne avec la reconnaissance des √©l√©ments du visage (yeux, nez, bouche, sourcils, etc.), il est facile de se tromper en pla√ßant un obstacle visuel entre le visage et la cam√©ra (cheveux, lunettes noires, portant une cagoule, etc.) - le visage, tr√®s probablement, il sera trouv√©, mais la comparaison avec les √©chantillons ne fonctionnera pas en raison de la forte diff√©rence entre les vecteurs de d√©tection et les √©chantillons; </li><li>  les lunettes ordinaires n'affectent pas trop - nous avons eu des exemples de r√©ponses positives chez les personnes portant des lunettes et de r√©ponses faussement n√©gatives chez les personnes qui mettent des lunettes pour le test; </li><li>  si la barbe se trouvait sur les √©chantillons originaux, puis qu'elle avait disparu, le nombre d'op√©rations est r√©duit (l'auteur de ces lignes a coup√© sa barbe √† 2 mm et le nombre d'op√©rations sur elle a √©t√© divis√© par deux); </li><li>  des faux positifs ont √©galement eu lieu, c'est une occasion pour une immersion suppl√©mentaire dans les math√©matiques de la question et, √©ventuellement, une solution √† la question de la correspondance partielle des vecteurs et de la m√©thode optimale pour calculer la distance entre eux.  Cependant, les tests sur le terrain devraient r√©v√©ler encore plus de probl√®mes √† cet √©gard. </li></ul><br>  Qu'est-ce qui vient?  V√©rifier le syst√®me au combat, optimiser le cycle de traitement de la d√©tection, simplifier la proc√©dure de recherche d'√©v√©nements dans les archives vid√©o, ajouter plus de donn√©es √† l'analyse (√¢ge, sexe, √©motions) et encore 100500 petites et petites t√¢ches qui doivent encore √™tre effectu√©es.  Mais le premier pas sur le chemin des mille pas que nous avons d√©j√† fait.  Si quelqu'un partage son exp√©rience dans la r√©solution de tels probl√®mes ou donne des liens int√©ressants sur cette question - je serai tr√®s reconnaissant. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465145/">https://habr.com/ru/post/fr465145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465135/index.html">T√©l√©phonie DECT dans les b√¢timents</a></li>
<li><a href="../fr465137/index.html">L'infrastructure comme code: premi√®re connaissance</a></li>
<li><a href="../fr465139/index.html">Comment: Facteurs importants √† examiner lors du choix d'un VPN gratuit pour la navigation Web</a></li>
<li><a href="../fr465141/index.html">33+ outils de s√©curit√© Kubernetes</a></li>
<li><a href="../fr465143/index.html">Comment trouver le meilleur emplacement pour les entreprises? Piratage de la vie sans inscription et SMS</a></li>
<li><a href="../fr465149/index.html">¬´Hello World¬ª √† vous dans le cloud</a></li>
<li><a href="../fr465151/index.html">Installer Apache Cassandra sur Windows</a></li>
<li><a href="../fr465153/index.html">La vision par ordinateur voit les √©motions, le pouls, la respiration et les mensonges - mais comment construire une startup sur ce point. Conversation avec Neurodata Lab</a></li>
<li><a href="../fr465155/index.html">Deux entit√©s de programmation neurolinguistique</a></li>
<li><a href="../fr465161/index.html">Mod√®le de donn√©es Quintet et centaines de gigaoctets de donn√©es</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>