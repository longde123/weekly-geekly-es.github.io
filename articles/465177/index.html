<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游눆游낗 游녞 游녢游 No es la nueva reliquia: una mirada a Datadog y Atatus 游돉 游둣游 游놋游낗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el entorno de los ingenieros de SRE- / DevOps, no se sorprender치 de que un d칤a aparezca un cliente (o sistema de monitoreo) e informe que "todo est...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>No es la nueva reliquia: una mirada a Datadog y Atatus</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/465177/"><img src="https://habrastorage.org/webt/rp/lp/ct/rplpctt6yzam8cvxnufgkygd3um.png"><br><br>  En el entorno de los ingenieros de SRE- / DevOps, no se sorprender치 de que un d칤a aparezca un cliente (o sistema de monitoreo) e informe que "todo est치 perdido": el sitio no funciona, los pagos no pasan, la vida es decadencia ... No importa c칩mo me gustar칤a ayudar en esta situaci칩n Puede ser muy dif칤cil hacer esto sin una herramienta simple y comprensible.  A menudo, el problema est치 oculto en el c칩digo de la aplicaci칩n en s칤 misma; solo necesita localizarlo. <br><br><h2>  Y con pena y alegr칤a ... </h2><br>  Dio la casualidad de que siempre hemos sido muy aficionados a New Relic.  Ha sido y sigue siendo una excelente herramienta para monitorear el rendimiento de la aplicaci칩n, y tambi칠n le permite instrumentar la arquitectura del microservicio (utilizando su agente) y mucho, mucho m치s.  Y todo podr칤a ser maravilloso, de no ser por los cambios en la pol칤tica de precios del servicio: su <b>costo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ha</a> aumentado m치s de 3 veces <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde 2013</a></b> .  Adem치s, desde el a침o pasado, obtener una cuenta de prueba requiere comunicaci칩n con un gerente personal, lo que dificulta la presentaci칩n del producto a un cliente potencial. <a name="habracut"></a><br><br>  La situaci칩n habitual: New Relic no es necesaria de forma "continua", se recuerda solo en el momento en que comenzaron los problemas.  Pero a칰n debe pagar regularmente (140 USD por servidor por mes), y en la infraestructura de nube escalable autom치ticamente, las cantidades son bastante grandes.  Aunque existe la posibilidad de "Pay-As-You-Go", pero para habilitar New Relic necesitar치 reiniciar la aplicaci칩n, lo que puede conducir a la p칠rdida de la situaci칩n del problema para el que se inici칩 todo.  No hace mucho tiempo, New Relic introdujo un nuevo plan de tarifas: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Essentials</a> , que a primera vista parece una alternativa razonable a Professional ... pero despu칠s de un examen m치s detallado result칩 que faltan algunas de las funciones importantes (en particular, no tiene <i>Transacciones clave</i> , <i>Seguimiento de aplicaciones cruzadas</i> , <i>Seguimiento distribuido</i> ) . <br><br>  Como resultado, pensamos en encontrar una alternativa m치s barata, y nuestra elecci칩n recay칩 en los dos servicios Datadog y Atatus.  쯇or qu칠 exactamente en ellos? <br><br><h2>  Sobre competidores </h2><br>  Debo decir de inmediato que hay otras soluciones en el mercado.  Incluso consideramos las opciones de c칩digo abierto, pero no todos los clientes tienen capacidad libre para alojar soluciones autohospedadas ... adem치s, requerir치n mantenimiento adicional.  La pareja que seleccionamos result칩 ser la m치s cercana a <b>nuestras necesidades</b> : <br><br><ul><li>  soporte integrado y desarrollado para aplicaciones PHP (la pila de nuestros clientes es muy diversa, pero es un l칤der claro en el contexto de encontrar una alternativa a New Relic); </li><li>  costo asequible (menos de 100 USD por mes por host); </li><li>  instrumentaci칩n autom치tica; </li><li>  Integraci칩n de Kubernetes </li><li>  La similitud con la interfaz New Relic es una ventaja notable (porque nuestros ingenieros est치n acostumbrados). </li></ul><br>  Por lo tanto, en la etapa de la selecci칩n inicial, eliminamos varias otras soluciones populares, y en particular: <br><br><ul><li>  Tideways, AppDynamics y Dynatrace, por el precio; </li><li>  Stackify: est치 bloqueado en la Federaci칩n de Rusia y muestra muy pocos datos. </li></ul><br>  El art칤culo posterior est치 estructurado de tal manera que las soluciones bajo consideraci칩n se presentar치n brevemente, despu칠s de lo cual hablar칠 sobre nuestra interacci칩n t칤pica con New Relic y la experiencia / impresiones de realizar operaciones similares en otros servicios. <br><br><h3>  Presentaci칩n de competidores seleccionados. </h3><br><img src="https://habrastorage.org/webt/mu/el/kq/muelkqnuiwzgvaz_jtton8mrbzs.png"><br>  쯇robablemente todos escucharon sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>New Relic</b></a> ?  Este servicio comenz칩 a desarrollarse hace m치s de 10 a침os, en 2008.  Lo utilizamos activamente desde 2012 y no tuvimos problemas de integraci칩n con una gran cantidad de aplicaciones en PHP, Ruby y Python, y tambi칠n tuvimos experiencia en la integraci칩n con C # y Go.  Los autores del servicio tienen soluciones para monitorear la aplicaci칩n, la infraestructura, el rastreo de infraestructuras de microservicios, se han creado aplicaciones convenientes para dispositivos de usuario y mucho m치s. <br><br>  Sin embargo, el agente New Relic funciona en protocolos propietarios, no tiene soporte OpenTracing.  La instrumentaci칩n avanzada requiere ediciones espec칤ficas para New Relic.  Finalmente, el soporte para Kubernetes tiene un estado experimental hasta ahora. <br><br><img src="https://habrastorage.org/webt/4t/ae/fp/4taefp5hohou0ekzzmcrnduvzlu.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Datadog</b></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>que</b></a> comenz칩 su desarrollo en 2010, parece notablemente m치s interesante que New Relic en t칠rminos de su uso en entornos Kubernetes.  En particular, admite la integraci칩n con NGINX Ingress, la recopilaci칩n de registros, las estad칤sticas y los protocolos OpenTracing, lo que le permite rastrear una solicitud del usuario desde el momento en que se conecta al final del trabajo, as칤 como encontrar registros para esta solicitud (tanto en el lado del servidor web como en el lado consumidor). <br><br>  Cuando usamos Datadog, nos enfrentamos con el hecho de que a veces constru칤a incorrectamente un mapa de microservicio y algunos defectos t칠cnicos.  Por ejemplo, determin칩 incorrectamente el tipo de servicio (tom칩 Django por un servicio de almacenamiento en cach칠) y caus칩 los errores n칰mero 500 en una aplicaci칩n PHP usando la popular biblioteca Predis. <br><br><img src="https://habrastorage.org/webt/h5/te/m9/h5tem9e4arkqlsoed48qc0u9xha.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Atatus</b></a> es el instrumento m치s joven;  servicio lanzado en 2014.  Su presupuesto de marketing es claramente inferior a los competidores listados, las menciones son mucho menos comunes.  Sin embargo, la herramienta en s칤 es muy similar a New Relic, y no solo en caracter칤sticas (APM, monitoreo del navegador, etc.), sino tambi칠n en apariencia. <br><br>  Un inconveniente importante es solo el soporte para Node.js y PHP.  Por otro lado, se implementa mucho mejor que Datadog.  A diferencia de este 칰ltimo, Atatus no requiere que las aplicaciones modifiquen o establezcan etiquetas adicionales en el c칩digo. <br><br><h2>  C칩mo trabajamos con New Relic </h2><br>  Ahora veamos c칩mo usamos generalmente New Relic.  Supongamos que tenemos un problema que necesita ser resuelto: <br><br><img src="https://habrastorage.org/webt/mk/_t/bv/mk_tbvlysng7--qgh2gvhjum4cg.png"><br><br>  Es f치cil notar un <b>aumento</b> en el gr치fico: lo analizamos.  En New Relic, las transacciones web se seleccionan inmediatamente para la aplicaci칩n web, todos los componentes se indican en el gr치fico de rendimiento, hay paneles de tasa de error, tasa de solicitud ... Lo m치s importante, directamente desde estos paneles puede moverse entre diferentes partes de la aplicaci칩n (por ejemplo, haciendo clic en MySQL a la secci칩n de la base de datos). <br><br>  Como en este ejemplo vemos un aumento en la actividad de <b>PHP</b> , haga clic en este gr치fico y vaya autom치ticamente a <b>Transacciones</b> : <br><br><img src="https://habrastorage.org/webt/02/2v/b_/022vb_o0euwqk8jaf2qh1z4pges.png"><br><br>  La lista de transacciones, que son esencialmente controladores del modelo MVC, ya est치 ordenada por la <b>mayor칤a de tiempo</b> , lo cual es muy conveniente: vemos de inmediato lo que hace la aplicaci칩n.  Aqu칤 hay ejemplos de consultas largas que New Relic recopila autom치ticamente.  Cambiar la clasificaci칩n es f치cil de encontrar: <br><br><ul><li>  el controlador de aplicaci칩n m치s cargado; </li><li>  El controlador m치s solicitado </li><li>  El m치s lento de los controladores. </li></ul><br>  Adem치s, puede expandir cada transacci칩n y ver qu칠 estaba haciendo la aplicaci칩n en el momento de la ejecuci칩n del c칩digo: <br><br><img src="https://habrastorage.org/webt/vq/bz/sk/vqbzsk-cj4sp9prjqwx16hnzy4k.png"><br><br>  Finalmente, se guardan en la aplicaci칩n ejemplos de trazas de consultas largas (que funcionan durante m치s de 2 segundos).  Aqu칤 est치 el panel para una transacci칩n larga: <br><br><img src="https://habrastorage.org/webt/jk/b_/ux/jkb_uxm9a3tx9ed6wdtufrz5g6u.png"><br><br>  Se puede ver que dos m칠todos toman mucho tiempo y, junto con el momento en que se ejecut칩 la solicitud, tambi칠n se muestran su URI y dominio.  Muy a menudo esto ayuda a encontrar la consulta en los registros.  Al ir a los <b>detalles de Rastreo</b> , puede ver desde d칩nde se llaman estos m칠todos: <br><br><img src="https://habrastorage.org/webt/_1/m6/li/_1m6li8g6zgv8siatzj1mrqiclc.png"><br><br>  Y en las <b>consultas de la base de datos</b> : eval칰e las consultas de la base de datos que se ejecutaron en el momento de la aplicaci칩n: <br><br><img src="https://habrastorage.org/webt/ru/xv/k7/ruxvk7jbfe-93duilolwh3nj7p8.png"><br><br>  Con este conocimiento, podemos evaluar la causa de la desaceleraci칩n de la aplicaci칩n y, junto con el desarrollador, desarrollar una estrategia para resolver el problema.  En realidad, New Relic no siempre da una imagen clara, pero ayuda a elegir el vector de investigaci칩n: <br><br><ul><li>  el largo <code>PDO::Construct</code> nos condujo al extra침o funcionamiento de pgpoll; </li><li>  inestabilidad en el tiempo <code>Memcache::Get</code> una configuraci칩n incorrecta sugerida de la m치quina virtual; </li><li>  el tiempo sospechosamente aumentado para procesar la plantilla condujo a un bucle anidado con una verificaci칩n de la presencia de 500 avatares en el almacenamiento de objetos; </li><li>  y as칤 sucesivamente ... </li></ul><br>  Tambi칠n sucede que, en lugar de ejecutar c칩digo en la pantalla principal, crece algo relacionado con el almacenamiento externo de datos, y no importa cu치l sea: Redis o PostgreSQL, todos est치n ocultos en la pesta침a <b>Bases de datos</b> . <br><br><img src="https://habrastorage.org/webt/ku/ke/xe/kukexe0cn79kgj_x_40dt79au5e.png"><br><br>  Puede seleccionar una base espec칤fica para la investigaci칩n y ordenar las consultas, de forma similar a c칩mo se hace en Transacciones.  Y yendo a la pesta침a de solicitud, puede ver cu치nto se encuentra esta solicitud en cada uno de los controladores de la aplicaci칩n, as칤 como evaluar con qu칠 frecuencia se llama.  Esto es muy conveniente: <br><br><img src="https://habrastorage.org/webt/ac/jm/xq/acjmxqt0dop9r1ncalo1enmrihq.png"><br><br>  La pesta침a <b>Servicios externos</b> contiene datos similares, que ocultan las solicitudes de servicios HTTP externos, como acceder al almac칠n de objetos, enviar eventos a centinela o similares.  Por su contenido, la pesta침a es completamente similar a las Bases de datos: <br><br><img src="https://habrastorage.org/webt/vv/2h/al/vv2halrqjfjjpqltn7ty1had57y.png"><br><br><h2>  Competidores: oportunidades e impresiones </h2><br>  Ahora lo m치s interesante es comparar las capacidades de New Relic con lo que ofrecen los competidores.  Desafortunadamente, no pudimos probar las tres herramientas en la misma versi칩n de una aplicaci칩n que se ejecuta en producci칩n.  Sin embargo, tratamos de comparar las situaciones / configuraciones m치s id칠nticas. <br><br><h3>  1. Datadog </h3><br>  Datadog nos saluda con un panel con un muro de servicios: <br><br><img src="https://habrastorage.org/webt/yt/vv/rt/ytvvrt5tlhegxiaoanulug0dwfu.png"><br><br>  Est치 tratando de dividir las aplicaciones en componentes / microservicios, por lo que en la aplicaci칩n de ejemplo Django vemos 2 conexiones a PostgreSQL ( <code>defaultdb</code> y <code>postgres</code> ), as칤 como a Celery, Redis.  Trabajar con Datadog requiere que tenga un conocimiento m칤nimo de los principios de MVC: debe comprender de d칩nde provienen las solicitudes de los usuarios.  Por lo general, <b>un mapa de servicio</b> ayuda con esto: <br><br><img src="https://habrastorage.org/webt/t3/19/r9/t319r9yb96o3h0fjhdmi5wzdxbc.png"><br><br>  Por cierto, hay algo similar en New Relic: <br><br><img src="https://habrastorage.org/webt/f8/sr/tq/f8srtq3vds1qmm2ddrp_g-d6pwo.png"><br><br>  ... adem치s, su mapa, en mi opini칩n, se hace m치s simple y m치s comprensible: no muestra los componentes de una aplicaci칩n (lo que lo har칤a innecesariamente detallado, como en el caso de Datadog), sino solo servicios o microservicios espec칤ficos. <br><br>  Regresando a Datadog: del mapa de servicios queda claro que las solicitudes de los usuarios llegan a Django.  Vayamos al servicio de Django y finalmente veamos lo que esper치bamos: <br><br><img src="https://habrastorage.org/webt/c3/ip/fk/c3ipfkqpsv9jxxr1m0y9lqz7fvw.png"><br><br>  Desafortunadamente, por defecto no hay <b>un</b> gr치fico de <b>tiempo de transacci칩n web</b> similar a lo que vemos en el panel principal de New Relic.  Sin embargo, se puede configurar en lugar del gr치fico <b>de% de tiempo empleado</b> .  Es suficiente cambiarlo a <b>Tiempo promedio por solicitud por tipo</b> ... 춰y ahora el gr치fico familiar nos mira! <br><br><img src="https://habrastorage.org/webt/0l/jb/4m/0ljb4m2fh3_mbje9ihwvo6hlwge.png"><br><br>  Por qu칠 Datadog opt칩 por un horario diferente es un misterio para nosotros.  Tambi칠n fue frustrante que el sistema no recuerde la elecci칩n del usuario (a diferencia de ambos competidores) y, por lo tanto, solo se guarda la creaci칩n de paneles personalizados. <br><br>  Pero me complaci칩 la oportunidad en Datadog de cambiar de estos gr치ficos a las m칠tricas de los servidores relacionados, leer los registros y evaluar la carga de los controladores del servidor web (Gunicorn).  춰Todo es casi igual que en New Relic ... e incluso algunos m치s (registros)! <br><br>  Debajo de las tablas hay transacciones que son completamente similares a New Relic: <br><br><img src="https://habrastorage.org/webt/ln/pg/u5/lnpgu5fj2oclzdzlc1uwwjjtfkm.png"><br><br>  En Datadog, las transacciones se llaman <b>recursos</b> .  Puede ordenar los controladores por el n칰mero de solicitudes, por el tiempo de respuesta promedio, por el tiempo m치ximo transcurrido durante un per칤odo de tiempo seleccionado. <br><br>  Puedes expandir el recurso y ver todo lo que ya hemos observado en New Relic: <br><br><img src="https://habrastorage.org/webt/3s/c1/5k/3sc15ksmnyvw_e-gyfagahxtep8.png"><br><br>  Hay estad칤sticas sobre el recurso, y una lista generalizada de llamadas internas, y ejemplos de solicitudes que se pueden ordenar por el c칩digo de respuesta ... Por cierto, a nuestros ingenieros realmente les gust칩 esta clasificaci칩n. <br><br>  Cualquier recurso de ejemplo en Datadog se puede expandir y explorar: <br><br><img src="https://habrastorage.org/webt/k8/tm/j8/k8tmj8vcz91rwmv-_lvshtzd8qi.png"><br><br>  Se presentan los par치metros de consulta, un diagrama de resumen del tiempo transcurrido para cada uno de los componentes y un diagrama en cascada en el que se muestra la secuencia de llamadas.  Adem치s, tambi칠n est치 disponible el cambio a la vista de 치rbol del diagrama de cascada: <br><br><img src="https://habrastorage.org/webt/og/uu/ro/oguurozj3wo9vibezkytxmmc0c4.png"><br><br>  Y lo m치s interesante es ver la carga del host en el que se ejecut칩 la solicitud y ver los registros de la solicitud. <br><br><img src="https://habrastorage.org/webt/vg/n6/be/vgn6belqdye20suvjgsq5kje3wu.png"><br><br>  춰Gran integraci칩n! <br><br>  Quiz치s se pregunte d칩nde est치n las pesta침as <b>Bases de datos</b> y <b>Servicios externos</b> , como en New Relic.  No est치n aqu칤: dado que Datadog analiza la aplicaci칩n en componentes, PostgreSQL se considerar치 un <b>servicio separado</b> y, en lugar de Servicios externos, vale la pena buscar <code>aws.storage</code> (ser치 lo mismo para todos los dem치s servicios externos a los que la aplicaci칩n pueda acceder). <br><br><img src="https://habrastorage.org/webt/qp/bp/ap/qpbpapt5pqxtre_bkspuob-myqe.png"><br><br>  Y aqu칤 hay un ejemplo con <code>postgres</code> : <br><br><img src="https://habrastorage.org/webt/nb/u6/ea/nbu6eaa6-6xlbkipsijjn4i9rxg.png"><br><br>  De hecho, hay todo lo que quer칤amos: <br><br><img src="https://habrastorage.org/webt/ww/r8/-c/wwr8-cpjbw26yv_chyaknlyolfe.png"><br><br>  Se puede ver de qu칠 "servicio" vino la solicitud. <br><br>  No ser치 superfluo recordar que Datadog se integra perfectamente con NGINX Ingress y permite el rastreo de extremo a extremo desde el momento en que llega una solicitud al cl칰ster, y tambi칠n le permite aceptar m칠tricas estad칤sticas, recopilar registros y m칠tricas de host. <br><br>  Una gran ventaja de Datadog es que su precio <i>consiste</i> en la infraestructura de monitoreo, APM, gesti칩n de registros y pruebas sint칠ticas, es decir.  Puede elegir un plan de manera flexible. <br><br><h3>  2. Atatus </h3><br>  El equipo de Atatus afirma que su servicio es "igual que New Relic, pero mejor".  Veamos si esto es realmente as칤. <br><br>  La barra de t칤tulo realmente se ve igual, pero no fue posible determinar el Redis y la memoria cach칠 utilizada en la aplicaci칩n. <br><br><img src="https://habrastorage.org/webt/-v/f8/9t/-vf89tugun8vmi3f8vc5upnswpq.png"><br><br>  APM selecciona todas las transacciones de forma predeterminada, aunque normalmente solo se necesita la Web.  Como en Datadog, no hay forma de acceder al servicio deseado desde el panel principal.  Adem치s, las transacciones se enumeran despu칠s de los errores, lo que para APM no parece muy l칩gico. <br><br>  En las transacciones de Atatus, todo es lo m치s similar posible a New Relic.  Menos: no puede ver de inmediato la din치mica de cada uno de los controladores.  Debe buscarlo en la tabla del controlador, ordenando por <b>Consumo de tiempo m치s</b> : <br><br><img src="https://habrastorage.org/webt/1r/gm/df/1rgmdfhp2wi-etyz90cp-nhicne.png"><br><br>  La lista habitual de controladores est치 disponible en la pesta침a <b>Explorar</b> : <br><br><img src="https://habrastorage.org/webt/n6/bm/4e/n6bm4epe4rgm1o0-j6gckbe5xcs.png"><br><br>  De alguna manera, esta tabla se parece a Datadog y se parece m치s a la de New Relic. <br><br>  Cada transacci칩n se puede implementar y ver qu칠 hizo la aplicaci칩n: <br><br><img src="https://habrastorage.org/webt/om/nj/jz/omnjjzghaohvdghitkkynauqwd8.png"><br><br>  El panel tambi칠n se parece m치s a Datadog: hay una serie de solicitudes, una imagen general de las llamadas.  El panel superior proporciona una pesta침a con errores de <b>Fallos HTTP</b> y ejemplos de solicitudes lentas de Rastreo de <b>sesiones</b> : <br><br><img src="https://habrastorage.org/webt/jc/cp/xo/jccpxoykxlwophfgejumdduui88.png"><br><br>  Si entra en una transacci칩n, ve un ejemplo de rastreo, puede obtener una lista de consultas a la base de datos y ver los encabezados de las solicitudes.  Todo es similar a New Relic: <br><br><img src="https://habrastorage.org/webt/_c/lb/dn/_clbdnkiqpd-6spg325of0c09o0.png"><br><br>  En general, Atatus est치 satisfecho con los rastros detallados, sin el t칤pico pegado de llamadas New Relic en un bloque recordatorio: <br><br><img src="https://habrastorage.org/webt/m5/ub/hk/m5ubhk5bxdzyqwg3oaidmflbmjc.png"><br><img src="https://habrastorage.org/webt/hv/3s/27/hv3s27-mped0zuubmx9qs-7b_7c.png"><br><br>  Sin embargo, no hay suficiente filtro que pueda (como en New Relic) cortar las solicitudes ultrarr치pidas (&lt;5 ms).  Por otro lado, mostrar la respuesta final de la transacci칩n (exitoso o error) fue agradable. <br><br>  El panel <b>Bases de datos</b> lo ayudar치 a examinar las solicitudes a bases de datos externas que realiza la aplicaci칩n.  Perm칤tame recordarle que Atatus solo encontr칩 PostgreSQL y MySQL, aunque Redis y memcached tambi칠n est치n involucrados en el proyecto. <br><br><img src="https://habrastorage.org/webt/rj/1z/vn/rj1zvn9n6wvmcbzcx1fj65x1mmg.png"><br><br>  Las solicitudes se ordenan seg칰n los criterios habituales: frecuencia de respuesta, tiempo de respuesta promedio, etc.  Tambi칠n me gustar칤a se침alar la pesta침a con las consultas m치s lentas, esto es muy conveniente.  Adem치s, los datos en esta pesta침a para PostgreSQL coincidieron con los datos de la extensi칩n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pg_stat_statements</a> , 춰un resultado excelente! <br><br><img src="https://habrastorage.org/webt/-4/th/4c/-4th4c5ykhiikiwtmrk23rr7g7g.png"><br><br>  La pesta침a <b>Solicitudes externas</b> es id칠ntica a las Bases de datos. <br><br><h2>  Conclusiones </h2><br>  Las dos herramientas presentadas se desempe침aron bien en el papel de APM.  Cualquiera de ellos puede ofrecer el m칤nimo necesario.  Resuma brevemente nuestras impresiones de la siguiente manera: <br><br><h3>  Datadog </h3><br>  Pros: <br><br><ul><li>  conveniente programa de tarifas (APM cuesta 31 USD por host); </li><li>  funcion칩 bien con Python; </li><li>  capacidad de integrarse con OpenTracing </li><li>  Integraci칩n de Kubernetes </li><li>  Integraci칩n con NGINX Ingress. </li></ul><br>  Contras: <br><br><ul><li>  El 칰nico APM que caus칩 la inaccesibilidad de la aplicaci칩n debido a un error del m칩dulo (predis) </li><li>  herramientas autom치ticas PHP d칠biles; </li><li>  Definici칩n en parte extra침a de los servicios y su prop칩sito. </li></ul><br><h3>  Estado </h3><br>  Pros: <br><br><ul><li>  instrumentaci칩n profunda de PHP; </li><li>  Nueva interfaz de usuario tipo reliquia. </li></ul><br>  Contras: <br><br><ul><li>  no funciona en sistemas operativos m치s antiguos (Ubuntu 12.05, CentOS 5); </li><li>  herramientas autom치ticas d칠biles; </li><li>  soporte para solo dos idiomas (Node.js y PHP); </li><li>  Operaci칩n lenta de la interfaz. </li></ul><br>  Dado el precio de Atatus de 69 USD por mes por servidor, preferimos usar Datadog, que se integra perfectamente para nuestras necesidades (aplicaciones web en K8) y tiene muchas caracter칤sticas 칰tiles. <br><br><h2>  PS </h2><br>  Lea tambi칠n en nuestro blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Herramientas para desarrolladores de aplicaciones que se ejecutan en Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Complemento Kubectl-debug para depurar en los pods de Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microservicios: el tama침o importa, incluso si tienes Kubernetes</a> ". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465177/">https://habr.com/ru/post/465177/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465161/index.html">Modelo de datos de quinteto y cientos de gigabytes de datos</a></li>
<li><a href="../465163/index.html">Impresi칩n 3D: casos incre칤bles y un poco m치s interesantes</a></li>
<li><a href="../465167/index.html">Planificaci칩n de recursos. 쯇or qu칠 no funciona? Parte 1</a></li>
<li><a href="../465169/index.html">Bricolaje de PVS-Studio: Gamificaci칩n de logros</a></li>
<li><a href="../465173/index.html">C칩mo cambiar el costo de la suscripci칩n creada en su aplicaci칩n. App Store Connect y Google Play Console</a></li>
<li><a href="../465179/index.html">쯃a automatizaci칩n reemplazar치 las pruebas manuales?</a></li>
<li><a href="../465181/index.html">Lugares resbaladizos en C ++ 17</a></li>
<li><a href="../465185/index.html">Nuevos est치ndares de videovigilancia: color por la noche, antirruido, ePoE</a></li>
<li><a href="../465187/index.html">6 frases en ingl칠s que pueden usarse en negociaciones salariales con empresas extranjeras</a></li>
<li><a href="../465189/index.html">Equipo de desarrollo de Workflow One Sprint</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>