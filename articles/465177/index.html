<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏽 👃 👇🏿 No es la nueva reliquia: una mirada a Datadog y Atatus 🕦 🖕🏾 👵🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el entorno de los ingenieros de SRE- / DevOps, no se sorprenderá de que un día aparezca un cliente (o sistema de monitoreo) e informe que "todo est...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>No es la nueva reliquia: una mirada a Datadog y Atatus</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/465177/"><img src="https://habrastorage.org/webt/rp/lp/ct/rplpctt6yzam8cvxnufgkygd3um.png"><br><br>  En el entorno de los ingenieros de SRE- / DevOps, no se sorprenderá de que un día aparezca un cliente (o sistema de monitoreo) e informe que "todo está perdido": el sitio no funciona, los pagos no pasan, la vida es decadencia ... No importa cómo me gustaría ayudar en esta situación Puede ser muy difícil hacer esto sin una herramienta simple y comprensible.  A menudo, el problema está oculto en el código de la aplicación en sí misma; solo necesita localizarlo. <br><br><h2>  Y con pena y alegría ... </h2><br>  Dio la casualidad de que siempre hemos sido muy aficionados a New Relic.  Ha sido y sigue siendo una excelente herramienta para monitorear el rendimiento de la aplicación, y también le permite instrumentar la arquitectura del microservicio (utilizando su agente) y mucho, mucho más.  Y todo podría ser maravilloso, de no ser por los cambios en la política de precios del servicio: su <b>costo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ha</a> aumentado más de 3 veces <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde 2013</a></b> .  Además, desde el año pasado, obtener una cuenta de prueba requiere comunicación con un gerente personal, lo que dificulta la presentación del producto a un cliente potencial. <a name="habracut"></a><br><br>  La situación habitual: New Relic no es necesaria de forma "continua", se recuerda solo en el momento en que comenzaron los problemas.  Pero aún debe pagar regularmente (140 USD por servidor por mes), y en la infraestructura de nube escalable automáticamente, las cantidades son bastante grandes.  Aunque existe la posibilidad de "Pay-As-You-Go", pero para habilitar New Relic necesitará reiniciar la aplicación, lo que puede conducir a la pérdida de la situación del problema para el que se inició todo.  No hace mucho tiempo, New Relic introdujo un nuevo plan de tarifas: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Essentials</a> , que a primera vista parece una alternativa razonable a Professional ... pero después de un examen más detallado resultó que faltan algunas de las funciones importantes (en particular, no tiene <i>Transacciones clave</i> , <i>Seguimiento de aplicaciones cruzadas</i> , <i>Seguimiento distribuido</i> ) . <br><br>  Como resultado, pensamos en encontrar una alternativa más barata, y nuestra elección recayó en los dos servicios Datadog y Atatus.  ¿Por qué exactamente en ellos? <br><br><h2>  Sobre competidores </h2><br>  Debo decir de inmediato que hay otras soluciones en el mercado.  Incluso consideramos las opciones de código abierto, pero no todos los clientes tienen capacidad libre para alojar soluciones autohospedadas ... además, requerirán mantenimiento adicional.  La pareja que seleccionamos resultó ser la más cercana a <b>nuestras necesidades</b> : <br><br><ul><li>  soporte integrado y desarrollado para aplicaciones PHP (la pila de nuestros clientes es muy diversa, pero es un líder claro en el contexto de encontrar una alternativa a New Relic); </li><li>  costo asequible (menos de 100 USD por mes por host); </li><li>  instrumentación automática; </li><li>  Integración de Kubernetes </li><li>  La similitud con la interfaz New Relic es una ventaja notable (porque nuestros ingenieros están acostumbrados). </li></ul><br>  Por lo tanto, en la etapa de la selección inicial, eliminamos varias otras soluciones populares, y en particular: <br><br><ul><li>  Tideways, AppDynamics y Dynatrace, por el precio; </li><li>  Stackify: está bloqueado en la Federación de Rusia y muestra muy pocos datos. </li></ul><br>  El artículo posterior está estructurado de tal manera que las soluciones bajo consideración se presentarán brevemente, después de lo cual hablaré sobre nuestra interacción típica con New Relic y la experiencia / impresiones de realizar operaciones similares en otros servicios. <br><br><h3>  Presentación de competidores seleccionados. </h3><br><img src="https://habrastorage.org/webt/mu/el/kq/muelkqnuiwzgvaz_jtton8mrbzs.png"><br>  ¿Probablemente todos escucharon sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>New Relic</b></a> ?  Este servicio comenzó a desarrollarse hace más de 10 años, en 2008.  Lo utilizamos activamente desde 2012 y no tuvimos problemas de integración con una gran cantidad de aplicaciones en PHP, Ruby y Python, y también tuvimos experiencia en la integración con C # y Go.  Los autores del servicio tienen soluciones para monitorear la aplicación, la infraestructura, el rastreo de infraestructuras de microservicios, se han creado aplicaciones convenientes para dispositivos de usuario y mucho más. <br><br>  Sin embargo, el agente New Relic funciona en protocolos propietarios, no tiene soporte OpenTracing.  La instrumentación avanzada requiere ediciones específicas para New Relic.  Finalmente, el soporte para Kubernetes tiene un estado experimental hasta ahora. <br><br><img src="https://habrastorage.org/webt/4t/ae/fp/4taefp5hohou0ekzzmcrnduvzlu.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Datadog</b></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>que</b></a> comenzó su desarrollo en 2010, parece notablemente más interesante que New Relic en términos de su uso en entornos Kubernetes.  En particular, admite la integración con NGINX Ingress, la recopilación de registros, las estadísticas y los protocolos OpenTracing, lo que le permite rastrear una solicitud del usuario desde el momento en que se conecta al final del trabajo, así como encontrar registros para esta solicitud (tanto en el lado del servidor web como en el lado consumidor). <br><br>  Cuando usamos Datadog, nos enfrentamos con el hecho de que a veces construía incorrectamente un mapa de microservicio y algunos defectos técnicos.  Por ejemplo, determinó incorrectamente el tipo de servicio (tomó Django por un servicio de almacenamiento en caché) y causó los errores número 500 en una aplicación PHP usando la popular biblioteca Predis. <br><br><img src="https://habrastorage.org/webt/h5/te/m9/h5tem9e4arkqlsoed48qc0u9xha.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Atatus</b></a> es el instrumento más joven;  servicio lanzado en 2014.  Su presupuesto de marketing es claramente inferior a los competidores listados, las menciones son mucho menos comunes.  Sin embargo, la herramienta en sí es muy similar a New Relic, y no solo en características (APM, monitoreo del navegador, etc.), sino también en apariencia. <br><br>  Un inconveniente importante es solo el soporte para Node.js y PHP.  Por otro lado, se implementa mucho mejor que Datadog.  A diferencia de este último, Atatus no requiere que las aplicaciones modifiquen o establezcan etiquetas adicionales en el código. <br><br><h2>  Cómo trabajamos con New Relic </h2><br>  Ahora veamos cómo usamos generalmente New Relic.  Supongamos que tenemos un problema que necesita ser resuelto: <br><br><img src="https://habrastorage.org/webt/mk/_t/bv/mk_tbvlysng7--qgh2gvhjum4cg.png"><br><br>  Es fácil notar un <b>aumento</b> en el gráfico: lo analizamos.  En New Relic, las transacciones web se seleccionan inmediatamente para la aplicación web, todos los componentes se indican en el gráfico de rendimiento, hay paneles de tasa de error, tasa de solicitud ... Lo más importante, directamente desde estos paneles puede moverse entre diferentes partes de la aplicación (por ejemplo, haciendo clic en MySQL a la sección de la base de datos). <br><br>  Como en este ejemplo vemos un aumento en la actividad de <b>PHP</b> , haga clic en este gráfico y vaya automáticamente a <b>Transacciones</b> : <br><br><img src="https://habrastorage.org/webt/02/2v/b_/022vb_o0euwqk8jaf2qh1z4pges.png"><br><br>  La lista de transacciones, que son esencialmente controladores del modelo MVC, ya está ordenada por la <b>mayoría de tiempo</b> , lo cual es muy conveniente: vemos de inmediato lo que hace la aplicación.  Aquí hay ejemplos de consultas largas que New Relic recopila automáticamente.  Cambiar la clasificación es fácil de encontrar: <br><br><ul><li>  el controlador de aplicación más cargado; </li><li>  El controlador más solicitado </li><li>  El más lento de los controladores. </li></ul><br>  Además, puede expandir cada transacción y ver qué estaba haciendo la aplicación en el momento de la ejecución del código: <br><br><img src="https://habrastorage.org/webt/vq/bz/sk/vqbzsk-cj4sp9prjqwx16hnzy4k.png"><br><br>  Finalmente, se guardan en la aplicación ejemplos de trazas de consultas largas (que funcionan durante más de 2 segundos).  Aquí está el panel para una transacción larga: <br><br><img src="https://habrastorage.org/webt/jk/b_/ux/jkb_uxm9a3tx9ed6wdtufrz5g6u.png"><br><br>  Se puede ver que dos métodos toman mucho tiempo y, junto con el momento en que se ejecutó la solicitud, también se muestran su URI y dominio.  Muy a menudo esto ayuda a encontrar la consulta en los registros.  Al ir a los <b>detalles de Rastreo</b> , puede ver desde dónde se llaman estos métodos: <br><br><img src="https://habrastorage.org/webt/_1/m6/li/_1m6li8g6zgv8siatzj1mrqiclc.png"><br><br>  Y en las <b>consultas de la base de datos</b> : evalúe las consultas de la base de datos que se ejecutaron en el momento de la aplicación: <br><br><img src="https://habrastorage.org/webt/ru/xv/k7/ruxvk7jbfe-93duilolwh3nj7p8.png"><br><br>  Con este conocimiento, podemos evaluar la causa de la desaceleración de la aplicación y, junto con el desarrollador, desarrollar una estrategia para resolver el problema.  En realidad, New Relic no siempre da una imagen clara, pero ayuda a elegir el vector de investigación: <br><br><ul><li>  el largo <code>PDO::Construct</code> nos condujo al extraño funcionamiento de pgpoll; </li><li>  inestabilidad en el tiempo <code>Memcache::Get</code> una configuración incorrecta sugerida de la máquina virtual; </li><li>  el tiempo sospechosamente aumentado para procesar la plantilla condujo a un bucle anidado con una verificación de la presencia de 500 avatares en el almacenamiento de objetos; </li><li>  y así sucesivamente ... </li></ul><br>  También sucede que, en lugar de ejecutar código en la pantalla principal, crece algo relacionado con el almacenamiento externo de datos, y no importa cuál sea: Redis o PostgreSQL, todos están ocultos en la pestaña <b>Bases de datos</b> . <br><br><img src="https://habrastorage.org/webt/ku/ke/xe/kukexe0cn79kgj_x_40dt79au5e.png"><br><br>  Puede seleccionar una base específica para la investigación y ordenar las consultas, de forma similar a cómo se hace en Transacciones.  Y yendo a la pestaña de solicitud, puede ver cuánto se encuentra esta solicitud en cada uno de los controladores de la aplicación, así como evaluar con qué frecuencia se llama.  Esto es muy conveniente: <br><br><img src="https://habrastorage.org/webt/ac/jm/xq/acjmxqt0dop9r1ncalo1enmrihq.png"><br><br>  La pestaña <b>Servicios externos</b> contiene datos similares, que ocultan las solicitudes de servicios HTTP externos, como acceder al almacén de objetos, enviar eventos a centinela o similares.  Por su contenido, la pestaña es completamente similar a las Bases de datos: <br><br><img src="https://habrastorage.org/webt/vv/2h/al/vv2halrqjfjjpqltn7ty1had57y.png"><br><br><h2>  Competidores: oportunidades e impresiones </h2><br>  Ahora lo más interesante es comparar las capacidades de New Relic con lo que ofrecen los competidores.  Desafortunadamente, no pudimos probar las tres herramientas en la misma versión de una aplicación que se ejecuta en producción.  Sin embargo, tratamos de comparar las situaciones / configuraciones más idénticas. <br><br><h3>  1. Datadog </h3><br>  Datadog nos saluda con un panel con un muro de servicios: <br><br><img src="https://habrastorage.org/webt/yt/vv/rt/ytvvrt5tlhegxiaoanulug0dwfu.png"><br><br>  Está tratando de dividir las aplicaciones en componentes / microservicios, por lo que en la aplicación de ejemplo Django vemos 2 conexiones a PostgreSQL ( <code>defaultdb</code> y <code>postgres</code> ), así como a Celery, Redis.  Trabajar con Datadog requiere que tenga un conocimiento mínimo de los principios de MVC: debe comprender de dónde provienen las solicitudes de los usuarios.  Por lo general, <b>un mapa de servicio</b> ayuda con esto: <br><br><img src="https://habrastorage.org/webt/t3/19/r9/t319r9yb96o3h0fjhdmi5wzdxbc.png"><br><br>  Por cierto, hay algo similar en New Relic: <br><br><img src="https://habrastorage.org/webt/f8/sr/tq/f8srtq3vds1qmm2ddrp_g-d6pwo.png"><br><br>  ... además, su mapa, en mi opinión, se hace más simple y más comprensible: no muestra los componentes de una aplicación (lo que lo haría innecesariamente detallado, como en el caso de Datadog), sino solo servicios o microservicios específicos. <br><br>  Regresando a Datadog: del mapa de servicios queda claro que las solicitudes de los usuarios llegan a Django.  Vayamos al servicio de Django y finalmente veamos lo que esperábamos: <br><br><img src="https://habrastorage.org/webt/c3/ip/fk/c3ipfkqpsv9jxxr1m0y9lqz7fvw.png"><br><br>  Desafortunadamente, por defecto no hay <b>un</b> gráfico de <b>tiempo de transacción web</b> similar a lo que vemos en el panel principal de New Relic.  Sin embargo, se puede configurar en lugar del gráfico <b>de% de tiempo empleado</b> .  Es suficiente cambiarlo a <b>Tiempo promedio por solicitud por tipo</b> ... ¡y ahora el gráfico familiar nos mira! <br><br><img src="https://habrastorage.org/webt/0l/jb/4m/0ljb4m2fh3_mbje9ihwvo6hlwge.png"><br><br>  Por qué Datadog optó por un horario diferente es un misterio para nosotros.  También fue frustrante que el sistema no recuerde la elección del usuario (a diferencia de ambos competidores) y, por lo tanto, solo se guarda la creación de paneles personalizados. <br><br>  Pero me complació la oportunidad en Datadog de cambiar de estos gráficos a las métricas de los servidores relacionados, leer los registros y evaluar la carga de los controladores del servidor web (Gunicorn).  ¡Todo es casi igual que en New Relic ... e incluso algunos más (registros)! <br><br>  Debajo de las tablas hay transacciones que son completamente similares a New Relic: <br><br><img src="https://habrastorage.org/webt/ln/pg/u5/lnpgu5fj2oclzdzlc1uwwjjtfkm.png"><br><br>  En Datadog, las transacciones se llaman <b>recursos</b> .  Puede ordenar los controladores por el número de solicitudes, por el tiempo de respuesta promedio, por el tiempo máximo transcurrido durante un período de tiempo seleccionado. <br><br>  Puedes expandir el recurso y ver todo lo que ya hemos observado en New Relic: <br><br><img src="https://habrastorage.org/webt/3s/c1/5k/3sc15ksmnyvw_e-gyfagahxtep8.png"><br><br>  Hay estadísticas sobre el recurso, y una lista generalizada de llamadas internas, y ejemplos de solicitudes que se pueden ordenar por el código de respuesta ... Por cierto, a nuestros ingenieros realmente les gustó esta clasificación. <br><br>  Cualquier recurso de ejemplo en Datadog se puede expandir y explorar: <br><br><img src="https://habrastorage.org/webt/k8/tm/j8/k8tmj8vcz91rwmv-_lvshtzd8qi.png"><br><br>  Se presentan los parámetros de consulta, un diagrama de resumen del tiempo transcurrido para cada uno de los componentes y un diagrama en cascada en el que se muestra la secuencia de llamadas.  Además, también está disponible el cambio a la vista de árbol del diagrama de cascada: <br><br><img src="https://habrastorage.org/webt/og/uu/ro/oguurozj3wo9vibezkytxmmc0c4.png"><br><br>  Y lo más interesante es ver la carga del host en el que se ejecutó la solicitud y ver los registros de la solicitud. <br><br><img src="https://habrastorage.org/webt/vg/n6/be/vgn6belqdye20suvjgsq5kje3wu.png"><br><br>  ¡Gran integración! <br><br>  Quizás se pregunte dónde están las pestañas <b>Bases de datos</b> y <b>Servicios externos</b> , como en New Relic.  No están aquí: dado que Datadog analiza la aplicación en componentes, PostgreSQL se considerará un <b>servicio separado</b> y, en lugar de Servicios externos, vale la pena buscar <code>aws.storage</code> (será lo mismo para todos los demás servicios externos a los que la aplicación pueda acceder). <br><br><img src="https://habrastorage.org/webt/qp/bp/ap/qpbpapt5pqxtre_bkspuob-myqe.png"><br><br>  Y aquí hay un ejemplo con <code>postgres</code> : <br><br><img src="https://habrastorage.org/webt/nb/u6/ea/nbu6eaa6-6xlbkipsijjn4i9rxg.png"><br><br>  De hecho, hay todo lo que queríamos: <br><br><img src="https://habrastorage.org/webt/ww/r8/-c/wwr8-cpjbw26yv_chyaknlyolfe.png"><br><br>  Se puede ver de qué "servicio" vino la solicitud. <br><br>  No será superfluo recordar que Datadog se integra perfectamente con NGINX Ingress y permite el rastreo de extremo a extremo desde el momento en que llega una solicitud al clúster, y también le permite aceptar métricas estadísticas, recopilar registros y métricas de host. <br><br>  Una gran ventaja de Datadog es que su precio <i>consiste</i> en la infraestructura de monitoreo, APM, gestión de registros y pruebas sintéticas, es decir.  Puede elegir un plan de manera flexible. <br><br><h3>  2. Atatus </h3><br>  El equipo de Atatus afirma que su servicio es "igual que New Relic, pero mejor".  Veamos si esto es realmente así. <br><br>  La barra de título realmente se ve igual, pero no fue posible determinar el Redis y la memoria caché utilizada en la aplicación. <br><br><img src="https://habrastorage.org/webt/-v/f8/9t/-vf89tugun8vmi3f8vc5upnswpq.png"><br><br>  APM selecciona todas las transacciones de forma predeterminada, aunque normalmente solo se necesita la Web.  Como en Datadog, no hay forma de acceder al servicio deseado desde el panel principal.  Además, las transacciones se enumeran después de los errores, lo que para APM no parece muy lógico. <br><br>  En las transacciones de Atatus, todo es lo más similar posible a New Relic.  Menos: no puede ver de inmediato la dinámica de cada uno de los controladores.  Debe buscarlo en la tabla del controlador, ordenando por <b>Consumo de tiempo más</b> : <br><br><img src="https://habrastorage.org/webt/1r/gm/df/1rgmdfhp2wi-etyz90cp-nhicne.png"><br><br>  La lista habitual de controladores está disponible en la pestaña <b>Explorar</b> : <br><br><img src="https://habrastorage.org/webt/n6/bm/4e/n6bm4epe4rgm1o0-j6gckbe5xcs.png"><br><br>  De alguna manera, esta tabla se parece a Datadog y se parece más a la de New Relic. <br><br>  Cada transacción se puede implementar y ver qué hizo la aplicación: <br><br><img src="https://habrastorage.org/webt/om/nj/jz/omnjjzghaohvdghitkkynauqwd8.png"><br><br>  El panel también se parece más a Datadog: hay una serie de solicitudes, una imagen general de las llamadas.  El panel superior proporciona una pestaña con errores de <b>Fallos HTTP</b> y ejemplos de solicitudes lentas de Rastreo de <b>sesiones</b> : <br><br><img src="https://habrastorage.org/webt/jc/cp/xo/jccpxoykxlwophfgejumdduui88.png"><br><br>  Si entra en una transacción, ve un ejemplo de rastreo, puede obtener una lista de consultas a la base de datos y ver los encabezados de las solicitudes.  Todo es similar a New Relic: <br><br><img src="https://habrastorage.org/webt/_c/lb/dn/_clbdnkiqpd-6spg325of0c09o0.png"><br><br>  En general, Atatus está satisfecho con los rastros detallados, sin el típico pegado de llamadas New Relic en un bloque recordatorio: <br><br><img src="https://habrastorage.org/webt/m5/ub/hk/m5ubhk5bxdzyqwg3oaidmflbmjc.png"><br><img src="https://habrastorage.org/webt/hv/3s/27/hv3s27-mped0zuubmx9qs-7b_7c.png"><br><br>  Sin embargo, no hay suficiente filtro que pueda (como en New Relic) cortar las solicitudes ultrarrápidas (&lt;5 ms).  Por otro lado, mostrar la respuesta final de la transacción (exitoso o error) fue agradable. <br><br>  El panel <b>Bases de datos</b> lo ayudará a examinar las solicitudes a bases de datos externas que realiza la aplicación.  Permítame recordarle que Atatus solo encontró PostgreSQL y MySQL, aunque Redis y memcached también están involucrados en el proyecto. <br><br><img src="https://habrastorage.org/webt/rj/1z/vn/rj1zvn9n6wvmcbzcx1fj65x1mmg.png"><br><br>  Las solicitudes se ordenan según los criterios habituales: frecuencia de respuesta, tiempo de respuesta promedio, etc.  También me gustaría señalar la pestaña con las consultas más lentas, esto es muy conveniente.  Además, los datos en esta pestaña para PostgreSQL coincidieron con los datos de la extensión <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pg_stat_statements</a> , ¡un resultado excelente! <br><br><img src="https://habrastorage.org/webt/-4/th/4c/-4th4c5ykhiikiwtmrk23rr7g7g.png"><br><br>  La pestaña <b>Solicitudes externas</b> es idéntica a las Bases de datos. <br><br><h2>  Conclusiones </h2><br>  Las dos herramientas presentadas se desempeñaron bien en el papel de APM.  Cualquiera de ellos puede ofrecer el mínimo necesario.  Resuma brevemente nuestras impresiones de la siguiente manera: <br><br><h3>  Datadog </h3><br>  Pros: <br><br><ul><li>  conveniente programa de tarifas (APM cuesta 31 USD por host); </li><li>  funcionó bien con Python; </li><li>  capacidad de integrarse con OpenTracing </li><li>  Integración de Kubernetes </li><li>  Integración con NGINX Ingress. </li></ul><br>  Contras: <br><br><ul><li>  El único APM que causó la inaccesibilidad de la aplicación debido a un error del módulo (predis) </li><li>  herramientas automáticas PHP débiles; </li><li>  Definición en parte extraña de los servicios y su propósito. </li></ul><br><h3>  Estado </h3><br>  Pros: <br><br><ul><li>  instrumentación profunda de PHP; </li><li>  Nueva interfaz de usuario tipo reliquia. </li></ul><br>  Contras: <br><br><ul><li>  no funciona en sistemas operativos más antiguos (Ubuntu 12.05, CentOS 5); </li><li>  herramientas automáticas débiles; </li><li>  soporte para solo dos idiomas (Node.js y PHP); </li><li>  Operación lenta de la interfaz. </li></ul><br>  Dado el precio de Atatus de 69 USD por mes por servidor, preferimos usar Datadog, que se integra perfectamente para nuestras necesidades (aplicaciones web en K8) y tiene muchas características útiles. <br><br><h2>  PS </h2><br>  Lea también en nuestro blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Herramientas para desarrolladores de aplicaciones que se ejecutan en Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Complemento Kubectl-debug para depurar en los pods de Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microservicios: el tamaño importa, incluso si tienes Kubernetes</a> ". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465177/">https://habr.com/ru/post/465177/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465161/index.html">Modelo de datos de quinteto y cientos de gigabytes de datos</a></li>
<li><a href="../465163/index.html">Impresión 3D: casos increíbles y un poco más interesantes</a></li>
<li><a href="../465167/index.html">Planificación de recursos. ¿Por qué no funciona? Parte 1</a></li>
<li><a href="../465169/index.html">Bricolaje de PVS-Studio: Gamificación de logros</a></li>
<li><a href="../465173/index.html">Cómo cambiar el costo de la suscripción creada en su aplicación. App Store Connect y Google Play Console</a></li>
<li><a href="../465179/index.html">¿La automatización reemplazará las pruebas manuales?</a></li>
<li><a href="../465181/index.html">Lugares resbaladizos en C ++ 17</a></li>
<li><a href="../465185/index.html">Nuevos estándares de videovigilancia: color por la noche, antirruido, ePoE</a></li>
<li><a href="../465187/index.html">6 frases en inglés que pueden usarse en negociaciones salariales con empresas extranjeras</a></li>
<li><a href="../465189/index.html">Equipo de desarrollo de Workflow One Sprint</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>