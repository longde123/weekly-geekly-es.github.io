<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§úüèº üôéüèæ üë©‚Äç‚ù§Ô∏è‚Äçüë© OBD-II-Diagnosestecker als Schnittstelle f√ºr IoT ‚¨áÔ∏è üìå üñ≤Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es war einmal, Mitte der 90er Jahre, w√§hrend der Einf√ºhrung des Pentium Pro-Prozessors, als einer der Gr√ºnder von Intel Gordon Moore feststellte: ‚ÄûWen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OBD-II-Diagnosestecker als Schnittstelle f√ºr IoT</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/unet/blog/408941/">  Es war einmal, Mitte der 90er Jahre, w√§hrend der Einf√ºhrung des Pentium Pro-Prozessors, als einer der Gr√ºnder von Intel Gordon Moore feststellte: ‚ÄûWenn sich die Automobilindustrie mit der Entwicklungsrate der Halbleiterindustrie entwickeln w√ºrde, k√∂nnte Rolls-Royce heute eine halbe Million fahren Meilen pro Gallone Benzin, und es w√§re billiger, es wegzuwerfen, als f√ºr das Parken zu bezahlen. ‚Äú  Aber vielleicht macht die Automobilindustrie bereits heute einen riesigen Entwicklungsschritt in Richtung einer grundlegenden √Ñnderung der Kraftstoffart und der Technologie f√ºr das Autofahren.  In j√ºngster Zeit werden gewerbliche Elektroautos und wasserstoffbetriebene Autos vorgestellt, und der Autopilot wird zum gew√ºnschten Bestandteil der elektronischen ‚ÄûBef√ºllung‚Äú des Fahrzeugs.  Zum gr√∂√üten Teil ist nur ein schneller Durchbruch in der Automobilindustrie auf das Aufkommen zuverl√§ssiger und sicherer L√∂sungen zur√ºckzuf√ºhren, die auf intelligenter Elektronik f√ºr Bordsteuerungssysteme f√ºr Kraftfahrzeuge basieren.  Aber wo ist das Internet im Auto im Alltag, wo ist die Technologie des Internet der Dinge (IoT) sowie das bekannte Konzept eines mit dem Netzwerk verbundenen Autos (Connected Car)? <br><br><img src="https://habrastorage.org/webt/wx/d9/lt/wxd9lt00v41ta-q6gyxxgtmssx0.jpeg"><br>  <font color="gray"><i>Der Rolls-Royce 103EX.</i></font>  <font color="gray"><i>Rolls-Royce enth√ºllt fahrerloses, elektrisches Konzeptauto mit Seidensitz - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">The Telegraph</a> .</i></font> <br><a name="habracut"></a><br>  Tats√§chlich existieren alle oben genannten Technologien bereits und werden jedoch nur in ausreichend getrennten L√∂sungen verwendet.  Der Grund daf√ºr sind die strengen Sicherheitsanforderungen, die beim Start einer neuen Technologie oder L√∂sung im Transportwesen unbedingt umgesetzt werden m√ºssen.  Daher kann nicht gesagt werden, dass Sie beim Einsteigen in ein Auto mit einem Smartphone automatisch eine IoT- oder Connected Car-L√∂sung erhalten.  In den meisten L√§ndern, und das ist sehr logisch, ist die Verwendung eines Smartphones oder anderer Ger√§te w√§hrend der Fahrt verboten. Wenn wir √ºber Sprachassistenten sprechen, sind sie in den meisten F√§llen sowohl f√ºr den Fahrer als auch f√ºr die Passagiere √§rgerlich und ablenkend.  Das Media Center, zus√§tzliche Videobildschirme und eine hervorragende Akustik sind nat√ºrlich sehr attraktive Komponenten eines modernen Autos.  Aber ich m√∂chte mich auf das Wort einlassen und feststellen, dass es gut ist, die Musik zu d√§mpfen und einfach aus dem Fenster auf die Stra√üen oder die vorbeiziehende Natur zu schauen.  Nat√ºrlich gibt es Staus, aber in dieser Ver√∂ffentlichung geht es nicht nur darum, einige ethische Komponenten zu erw√§hnen oder die Probleme der Informationsflut von Verkehrsteilnehmern zu ber√ºcksichtigen, sondern auch die ‚Äûunsichtbaren‚Äú Komponenten von IoT-Technologien, die bereits in Fahrzeugen verwendet werden und f√ºr eine breite Verwendung verf√ºgbar sind. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/gXpDx22dSiU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Eine interessante und vielversprechende L√∂sung f√ºr das Automobil-IoT ist heute die Open Connected Car-Plattform von Mojio.  Diese Plattform mit einer offenen Schnittstelle (API) bietet einen Cloud-Service f√ºr "vernetzte" Autos, und kommerzielle Angebote sind bereits verf√ºgbar.  Beispielsweise bietet der auf dieser Plattform basierende Telekommunikationsriese T-Mobile den Dienst SyncUP DRIVE an.  Dies ist eine Hardware-Software-L√∂sung, die auf einem tragbaren Ger√§t basiert, das √ºber den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OBD-II-</a> Diagnosestecker und die entsprechende mobile Anwendung mit dem Auto verbunden ist.  Dank dieses Ansatzes ist es m√∂glich, die Betriebsparameter Ihres Autos effektiv kontinuierlich zu √ºberwachen und jederzeit den aktuellen Standort zu ermitteln.  Die Anwendung kann √ºber Fahrstile sprechen, vor vorbeugender Wartung warnen und den Besitzer √ºber Probleme mit dem Fahrzeug informieren.  Dar√ºber hinaus stellt SyncUP DRIVE einen Wi-Fi-Zugangspunkt im Auto bereit, der √ºber das Hochgeschwindigkeitsprotokoll des mobilen LTE-Standards zug√§nglich ist. <br><br><img src="https://habrastorage.org/webt/em/tc/ps/emtcpswczvhsacuttewampbi6dk.png"><br>  <font color="gray"><i>Die Open Connected Car-Plattform - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mojio</a></i></font> <br><br>  Ein Standard-OBD-II-Diagnosestecker wird zum Anschlie√üen an das Fahrzeug verwendet.  Die meisten nach 1996 produzierten Serienautos haben diesen Stecker bereits.  Obwohl ein solcher Diagnosestecker standardisiert ist, unterst√ºtzt er mehrere Protokolle verschiedener Motorsteuerungssysteme (verschiedene Kontakte am Stecker werden physisch verwendet), die das IoT-Kommunikationsmodul kennen muss.  Dementsprechend kann es in verschiedenen Automarken unterschiedliche interne Busse geben, um Diagnosedaten vom Motorsteuerger√§t (ECU - Electronic Control Unit) zu erhalten.  F√ºr die Arbeit mit dem SyncUP DRIVE-Dienst wird eine L√∂sung angeboten, die auf dem ZTEWelink VM6200S-Modul basiert. <br><br>  Das VM6200S-Modul unterst√ºtzt die Verbindung √ºber das mobile LTE-Protokoll, enth√§lt einen integrierten 3-Achsen-Beschleunigungssensor und ein 3-Achsen-Gyroskop, einen GPS-Signalempf√§nger, einen OBD-II-Chip und unterst√ºtzt die Protokolle ISO 15765-4 (CAN) und ISO 14230-4 KWP (Keyword Protocol 2000), ISO 9141-2 (Chrysler-, Euro- und asiatische Automobile), SAE J1850 PWM (Ford-Fahrzeuge), SAE J1850 VPW (GM-Fahrzeuge).  Auf diese Weise k√∂nnen Sie mit dem Modul einen Wi-Fi-Zugangspunkt 802.11 b / g / n / bereitstellen, Ereignisse w√§hrend der Fahrt registrieren, eine Motordiagnose durchf√ºhren, den Kraftstoffverbrauch bewerten usw.  Und da es sich bei den Mojio-Partnern um Amazon Alexa-Projekte, IFTTT-Dienste und andere handelt, er√∂ffnen sich Entwicklern und Integratoren von L√∂sungen alle M√∂glichkeiten, ein soziales IoT auf der Basis eines ‚Äûvernetzten‚Äú Autos als Teil einer solchen Infrastruktur zu schaffen. <br><br><img src="https://habrastorage.org/webt/yk/ay/bd/ykaybdys59rvcgp4_fktlbr3w1q.jpeg"><br>  <font color="gray"><i>VM6200S4G OBD-Ger√§t - ZTEWelink Corporation</i></font> <br><br>  Aber nicht nur SyncUP DRIVE ist jetzt auf dem Markt, zum Beispiel bieten viele Unternehmen etwas √Ñhnliches an.  Nat√ºrlich ist das k√ºrzlich vorgestellte Samsung Connect-Autoger√§t einer dieser interessanten Vorschl√§ge, die das Auto in ein verbundenes Ger√§t verwandeln.  Die L√∂sung von Samsung nutzt das Mobilfunknetz der 4G LTE-Generation auf die gleiche Weise und stellt einen Wi-Fi-Zugangspunkt im Auto bereit: 802.11 a / b / g / n.  Das automatische Verbindungsger√§t unterst√ºtzt Bluetooth v4.1, enth√§lt einen GPS-Empf√§nger, einen Beschleunigungssensor und ein Gyroskop und basiert auf einem 4-Kern-Prozessor mit einer Frequenz von 1,2 GHz und einem Tizen-Betriebssystem.  Es sei darauf hingewiesen, dass der koreanische Elektronikriese Samsung √ºber die Sicherheit des Systems durch den Einsatz von Samsung Knox spricht - einer mobilen L√∂sung mit Schutz auf Unternehmensebene.  Tats√§chlich ist Samsung Knox eine Software- und Hardwarel√∂sung, um den Schutz des Android-Betriebssystems zu verbessern. <br><br><img src="https://habrastorage.org/webt/b1/lg/t3/b1lgt3mnkkvh8jouptfu2w8b2gc.jpeg"><br>  <font color="gray"><i>Samsung Connect Auto</i></font> <br><br>  Somit wurden die Informationen, die durch Lesen von Daten von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OBD-II erhalten wurden</a> , die aktuellen Koordinaten des Standorts vom GPS-Empf√§nger und die Parameter der Dynamik des Fahrzeugs, die von den Kreiselsensoren zum aktuellen Zeitpunkt und de facto erhalten wurden, zur Grundlage f√ºr das Verwandeln eines Fahrzeugs IoT-Ger√§t.  Dar√ºber hinaus k√∂nnen Sie Szenarien f√ºr die Verwendung aggregierter Informationen aus Autos in Betracht ziehen, verschiedene Big-Data-Verarbeitungstechniken anwenden und die Aussichten einer Kombination solcher Daten mit Informationen aus der Infrastruktur intelligenter Stra√üen nicht vergessen.  Bevor Sie jedoch mit der Verarbeitung der Daten beginnen, m√ºssen Sie diese erst abrufen. In dieser Ver√∂ffentlichung konzentrieren wir uns daher auf die Hardwarekomponente der Implementierung von Arbeitsszenarien auf der Ebene des Diagnosesteckers OBD-II. <br><br>  Auf die eine oder andere Weise, aber alle zuvor diskutierten L√∂sungen sind fortschrittlichere Industrieprodukte im Vergleich zu einem herk√∂mmlichen Diagnosecodeleser, der auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ELM327-</a> Chip des kanadischen Unternehmens Elm Electronics basiert.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ELM327</a> ist ein universeller Konverter von Protokollen, die in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Autodiagnosebussen</a> verwendet werden, in ein serielles Protokoll wie RS-232. <br><br><img src="https://habrastorage.org/webt/bd/fl/ti/bdfltiij2wefjc2hs9iegcrg67c.png"><br>  <font color="gray"><i>Blockdiagramm eines ELM327 v2.2-Chips - Elm Electronics</i></font> <br><br>  Die Interaktion mit ELM327 erfolgt √ºber Standard-AT-Befehle, die vom Chip unterst√ºtzt werden.  Sie m√ºssen nur den Austausch von Textnachrichten mithilfe des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RS-232-</a> Protokolls organisieren, das bereits zu einem Klassiker geworden ist (oder besser gesagt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UART</a> , da es sich nur um Datenfluss handelt, nicht um Signalpegel).  Die physische Verbindung auf niedriger Ebene selbst √ºber USB, Bluetooth oder Wi-Fi wird einfach mithilfe von UART-Chips des seriellen Konvertierungsprotokolls implementiert.  Es stellt sich heraus, dass es ausreicht, um das Auto in ein IoT-Ger√§t zu verwandeln, nicht zu vergessen, die Spannungspegel zu koordinieren, den ELM327-Chip mit dem OBD-II-Diagnosestecker zu verbinden und beispielsweise den seriellen Schnittstellenkonverter am Ausgang dieses Chips in Bluetooth oder Wi-Fi zu stecken.  Anschlie√üend k√∂nnen Sie die Fahrzeugdiagnose von Ihrem Smartphone aus ‚Äûlesen‚Äú.  Es gibt jedoch viele solcher vorgefertigten Module oder Bl√∂cke auf dem Markt.  Der Preis f√ºr AliExpress liegt zwischen 2,50 und 10 US-Dollar.  Obwohl das Modul nicht viel Strom verbrauchen sollte, ist es sehr praktisch, wenn der Ausschaltknopf bereits vorhanden ist.  Aus sicherheitstechnischer Sicht ist das √ºbrigens auch nicht schlecht. <br><br><img src="https://habrastorage.org/webt/2-/yq/4k/2-yq4kpvpmmay4csvmstieigi_c.jpeg"><br>  <font color="gray"><i>Mini ELM327 Bluetooth OBD-II Autodiagnoseadapter V1.5</i></font> <br><br>  Jetzt k√∂nnen Sie das Standard-Bluetooth-OBD-II V1.5-Modul Mini ELM327 anschlie√üen (es ist interessant, dass in vielen Quellen empfohlen wird, Module mit der alten Firmware-Version 1.5 und keine neuen mit Version 2.2 zu verwenden, d. H. Als Argument f√ºr einen stabileren Betrieb des Moduls auf dem alten Firmware und Unterst√ºtzung f√ºr mehr Autos, aber dies ist sehr subjektiv) und experimentieren Sie mit dem Anschlie√üen des Smartphones an das ausgew√§hlte Modul. Beispiel: F√ºr die Android-Plattform k√∂nnen Sie eines der beliebtesten Diagnoseprogramme Torque Lite (OBD2 &amp; Car) oder Torque Pro (OBD 2 &amp; Car) verwenden. sowie alles n  einfacher zu bedienen, oder ihre Leistungen. <br><br><img src="https://habrastorage.org/webt/nv/ff/qe/nvffqeyv0gpaxedvswhtk6a30e4.jpeg"><br>  <font color="gray"><i>Die Torque Pro-Anwendung l√§uft auf Android.</i></font> <br><br>  √úbrigens m√∂chte ich einen sehr praktischen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MockUPhone-</a> Dienst mit kostenlosem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Modell</a> moderner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ger√§te</a> erw√§hnen, der f√ºr die Erstellung eines Screenshots des Torque-Programms sehr n√ºtzlich war.  Dies ist jedoch eine leichte Abweichung vom Thema der Ver√∂ffentlichung.  Es ist zu beachten, dass sich in den meisten F√§llen der OBD-II-Stecker, an den das Diagnosemodul angeschlossen ist, unter der Lenks√§ule des Fahrzeugs befindet. <br><br><img src="https://habrastorage.org/webt/gv/gy/fv/gvgyfvzqitu32obmtknn7cnu5da.jpeg"><br>  <font color="gray"><i>Erste Schritte mit OBD-II - SparkFun Electronics</i></font> <br><br>  Es ist klar, dass es viele vorgefertigte L√∂sungen gibt.  Wenn wir jedoch √ºber die Entwicklung eines Dienstes sprechen, der auf IoT oder genauer gesagt auf dem Connected Car-Konzept basiert, ist es recht praktisch, den integrierten Informationsnetzwerk-Emulator des Fahrzeugs zu verwenden, um nicht jedes Mal zum Auto zu laufen.  Zum Beispiel bietet Mojio einen Online-Autosimulator an, der mit seiner API arbeitet und den Cloud-Service IBM Watson IoT Platform als Beispiel verwendet. Der Artikel ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Senden von Fahrzeugdaten an die IBM Watson IoT-Plattform - IBM DeveloperWorks Recipes</a> ‚Äú wird zum Senden von Daten aus einem Transport an die Cloud vorgeschlagen bedeutet, eine mobile Anwendung zu verwenden, z. B. " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IBM IoT f√ºr Automotive - OBDII-Flottenmanagement-App f√ºr Android</a> ", die mit dem bereitgestellten Cloud-Dienst " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IBM IoT f√ºr Automotive (Bluemix) - Flottenmanagement-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Starteranwendung</a> " interagiert. Wenn Sie jedoch nicht von diesen Projekten abgelenkt werden, k√∂nnen Sie dies tun Verwenden Sie nur einen Datenemulator: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Car Simulator</a> ".  Zwar emulieren alle diese L√∂sungen bereits empfangene Daten, und wir interessieren uns f√ºr den Emulator des integrierten Informationsnetzwerks.  Die bekannteste L√∂sung dieser Art ist ECUsim 2000, dessen Kosten bei 200 US-Dollar beginnen und von der Anzahl der unterst√ºtzten emulierten Protokolle abh√§ngen. <br><br><img src="https://habrastorage.org/webt/p6/f2/hz/p6f2hzxzn86wrgci0es-j_r0dgk.jpeg"><br>  <font color="gray"><i>ECUsim 2000 OBD Simulator - ScanTool</i></font> <br><br>  Nat√ºrlich kann ein professioneller Emulator nicht ersetzt werden, aber Enthusiasten und Geeks k√∂nnten an der unabh√§ngigen Implementierung eines weniger komplexen Projekts auf einem Arduino oder Raspberry Pi interessiert sein.  Sie k√∂nnen sich beispielsweise auf die g√§ngigste CAN-Schnittstelle (Controller Area Network) beschr√§nken.  Der von Bosch vorgeschlagene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CAN-</a> Standard machte einst erhebliche Fortschritte bei der Entwicklung von Systemen f√ºr die Automobilelektronik.  Wenn ein Auto erst k√ºrzlich im Internet aufgetaucht ist, gibt es das Konzept eines Netzwerks innerhalb eines Autos seit Mitte der 80er Jahre.  Die Idee ist sehr einfach und als Ethernet einen Durchbruch in Computernetzwerken erzielte, wurde CAN zur Grundlage f√ºr zuverl√§ssige Kommunikation im Auto. <br><br><img src="https://habrastorage.org/webt/1-/rr/8e/1-rr8er1qx_evsnys-2hc6ndzcw.png"><br>  <font color="gray"><i>Ein Arduino-basiertes CAN-Bus-Netzwerk - Henry's Bench</i></font> <br><br>  Bisher flossen in einem Auto in der Regel Busse und Kabel verschiedener angeschlossener Module und Ger√§te zum zentralen Motorsteuerger√§t.  Der serielle Zweidraht-CAN-Bus erm√∂glichte die Implementierung bereits unabh√§ngiger intelligenter Module. So wurde beispielsweise die zentrale Steuereinheit nur eines der Module, die tats√§chlich √ºber das Netzwerkprotokoll miteinander ‚Äûkommunizieren‚Äú.  Dies reduziert den Verkabelungsaufwand im Auto erheblich. <br><br>  Im Gegensatz zu Ethernet ist das CAN-Netzwerk viel zuverl√§ssiger, was nicht nur in der Automobilindustrie, sondern auch in industriellen Automatisierungssystemen, Smart-Home-L√∂sungen usw. zum Einsatz kam.  Auf der physischen Ebene verwendet CAN eine Zweidrahtleitung, CAN Lo und CAN Hi, die die in einem Paket gepackten Daten bitweise √ºbertr√§gt.  An den Enden des Busses befinden sich passende Widerst√§nde von 120 Ohm, und zur Unterdr√ºckung von St√∂rungen sollte auch ein Kabelbaum verwendet werden.  Die Daten√ºbertragungsrate kann 1 Mbit / s erreichen. <br><br><img src="https://habrastorage.org/webt/if/rh/lo/ifrhlo06vmiuaf7ipkjhngrovb4.png"><br>  <font color="gray"><i>Ein Controller Area Network (CAN-Bus)</i></font> <br><br>  Die Daten√ºbertragung zum CAN-Bus erinnert etwas an das Publisher-Subscriber-Modell, bei dem jedes Ger√§t am Bus eine eindeutige Kennung hat. Wenn ein Ger√§t Daten √ºbertr√§gt, h√∂ren alle anderen zu und treffen eine Entscheidung auf der Grundlage dieser Kennung - ben√∂tigen sie diese speziell? Daten zu empfangen und zu verarbeiten oder nicht.  Im Allgemeinen ist das Protokoll ziemlich kompliziert, aber f√ºr einen Mikrocontroller oder Mikroprozessor ist es unwahrscheinlich, dass er eine CAN-Implementierung schreiben und √ºber die Merkmale des physischen Daten√ºbertragungsmediums nachdenken muss.  Um diese Probleme zu l√∂sen, gibt es bereits vorgefertigte Hardware-Bus-Controller, und f√ºr die Pegelanpassung werden h√§ufig integrierte Konverter verwendet.  Zum Beispiel der MCP2515-Controller mit SPI und der Transceiver (Matching Level Chip) MCP2551.  Auf der Grundlage dieser Mikroschaltungen wurde das auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Instructable-</a> Plattform ver√∂ffentlichte Arduino OBD2 Simulator-Projekt vorgeschlagen.  Zur Implementierung ben√∂tigen Sie nur das Arduino UNO-Board und CAN-BUS Shield, z. B. Seeed Technology. <br><br><img src="https://habrastorage.org/webt/kg/av/py/kgavpyoaa2n_x3lwvojs8zljiti.jpeg"><br>  <font color="gray"><i>Experimente mit dem Arduino OBD2 Simulator</i></font> <br><br>  Grunds√§tzlich schadet bei der Entwicklung eines OBD-II-Datenemulators eine 12-V-Gleichstromversorgung f√ºr das ELM327-Modul sowie ein OBD-II-Anschluss nicht.  Der No-Name-Wandler DC-DC-USB-TO-12V kann das Problem jedoch durchaus l√∂sen, da  M√∂glicherweise stehen jedem Entwickler f√ºr das Internet der Dinge und nicht nur f√ºr 5 V mehrere Netzteile zur Verf√ºgung.  F√ºr den Anschluss an OBD-II sind zwei Informationsdr√§hte CAN_H und CAN_L sowie das Vorhandensein von 12 V erforderlich. Wie bereits erw√§hnt, sind 12 V nur erforderlich, um die Funktionsf√§higkeit des ELM327-Moduls sicherzustellen. <br><br><img src="https://habrastorage.org/webt/kz/mw/-c/kzmw-crivoyb07chmevezznxyvy.png"><br>  <font color="gray"><i>CAN-BUS Shield V1.2 - Seeed Development Limited Wiki</i></font> <br><br>  Auf der CAN-BUS Shield-Erweiterungskarte ist es sehr praktisch, nicht den D-SUB-Anschluss, sondern lediglich einen Klemmenblock f√ºr zwei Kontakte (CAN_H, CAN_L) zu verwenden.  Unter dem Gesichtspunkt der Entwicklung von Software-Code sollte beachtet werden, dass die Prototyp-Enthusiasten auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> gepostet haben.  Jetzt haben sich die Seeed-Boards ge√§ndert, und f√ºr den MCP2515-Controller ist es auf jeden Fall besser, neue Treiber aus demselben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Seeed-Studio zu verwenden</a> .  Nat√ºrlich muss das urspr√ºngliche Programm f√ºr die neuen Treiber leicht ge√§ndert werden, aber dies sind einige Minuten. <br><br><img src="https://habrastorage.org/webt/yq/me/li/yqmelislz2chb8q02rgk3cgmwq4.png"><br>  <font color="gray"><i>Arbeiten mit CAN-BUS in einer Arduino IDE basierend auf dem kosteng√ºnstigen OBD2 ECU Simulator</i></font> <br><br>  Das betrachtete Beispiel ist jedoch sehr primitiv, da alle √ºber das OBD-II-Protokoll gesendeten Parameter einfach zuf√§llig generiert werden, keine Verbindung zwischen den Motorbetriebsparametern usw. besteht.  Als Fortsetzung des Projekts ist die Entwicklung einer Anwendung √§hnlich der Freematics OBD-II Emulator GUI offensichtlich.  Dies ist eine Open Source- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grafikshell</a> , die in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Freematics OBD-II Emulator-</a> Hardwarel√∂sung verwendet wird. <br><br><img src="https://habrastorage.org/webt/8d/vp/wu/8dvpwumfchp8cs30kwhiwdj5boa.png"><br>  <font color="gray"><i>Freematik OBD-II Emulator GUI - Freematik</i></font> <br><br>  Nachdem ein auf Arduino basierendes Modul zusammengestellt wurde, das die Arbeit mit CAN erm√∂glicht, ist es durchaus m√∂glich, einen OBD-II-Emulator zu erstellen, da das Diagnoseprotokoll gut beschrieben ist und es nicht schwierig ist, es zu implementieren.  Es ist zu beachten, dass die Interaktion zwischen dem Mikrocontroller und dem integrierten CAN-Bus eine v√∂llig andere Aufgabe ist und Sie verstehen m√ºssen, dass die internen High-Level-Protokolle dieses Busses nicht von den Automobilherstellern dokumentiert werden und andererseits nicht in das interne Ger√§t der Automobilelektronik eingebettet werden sollten, so dass in keiner Weise die Sicherheit von Fahrzeugen verringern.  Wenn wir allgemein √ºber CAN sprechen, ist es durchaus m√∂glich, das √ºbergeordnete offene CANopen-Protokoll zu verwenden, um Ihre Ger√§te basierend auf diesem Bus zu entwickeln. <br><br>  Es bleibt der Fall f√ºr kleine - ein wenig Freizeit und Vergn√ºgen, um die Entwicklung Ihres Codes durchzuf√ºhren.  Stimmt, wo ist diese Zeit am Ende des Jahres zu finden?  Aber wir werden optimistisch sein.  In Bezug auf die Verwendung eines solchen OBD-II-Emulators ist die direkteste Richtung die Entwicklung eines eigenen Moduls f√ºr den Diagnosestecker.  Sie k√∂nnen beispielsweise das offene Carloop-Projekt als Ausgangspunkt nehmen, mit dem ein Modul zum Verbinden des Autos mit der Cloud mithilfe von 3G-, Wi-Fi- oder Bluetooth-Technologien erstellt werden soll. <br><br><img src="https://habrastorage.org/webt/qk/lr/sz/qklrszijfy8fd7qhtjwwswowlgu.jpeg"><br>  <font color="gray"><i>Carloop Bluetooth</i></font> <br><br>  Das Carloop-Projekt basiert auf der Verwendung von Karten: Particle Photon (basierend auf dem Cypress BCM43362 Wi-Fi-Modul, das 802.11b / g / n unterst√ºtzt; die ARM Cortex M3-Controller-Familie - STM32F205 mit einer Frequenz von 120 MHz; 1 MB Flash-Speicher; 128 KB RAM) und Electron (Karten mit Unterst√ºtzung f√ºr die Verbindung mit einem 3G / 2G-Mobilfunknetz).  Die Partikelplattform selbst ist sehr interessant, da sie auf dem Cloud-basierten IoT-Ger√§teverbindungsdienst basiert, einer Cloud-basierten IDE f√ºr die Entwicklung, die beispielsweise auf Photon-Boards basiert, die eine √§hnliche Sprache wie C / C ++ f√ºr Arduino verwenden.  Tats√§chlich ist Partikel ein separates Thema f√ºr die Ver√∂ffentlichung, und das Carloop-Projekt verdient definitiv besondere Aufmerksamkeit von den Enthusiasten des Autos als verbundenes IoT-Ger√§t. <br><br>  Indem Sie das Auto mit dem Internet und den IoT-Diensten verbinden, k√∂nnen Sie viele Szenarien implementieren, die zweifellos zur Benutzerfreundlichkeit von Fahrzeugen beitragen, den Komfort erh√∂hen und einfach eine effektive L√∂sung f√ºr allt√§gliche Probleme bieten, einschlie√ülich der L√∂sung von Transportmitteln.  Beispielsweise k√∂nnen Daten zum Fahrstil, zur Zuverl√§ssigkeit der Motor- und Fahrzeugkomponenten von Versicherungsunternehmen bereits ber√ºcksichtigt werden.  Der aktuelle Standort des Autos ist f√ºr Taxidienste und Mietwagen relevant.          IoT,    ,     ,  - . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/m4ypWq9dMV0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br> ,      ‚Äì           OBD-II,       ,       .     .    ,        Connected Car,  ¬´ ¬ª   , ,   ,      IoT       .           . <br><br><h3>    : </h3><br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Car Hacking:      ? ‚Äì </a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">- 25 ! ‚Äì Computerworld</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">T‚ÄëMobile SyncUP DRIVE ‚Äì T-MOBILE</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ZTE  Mojio        ‚Äì ZTE Corporation</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Samsung Knox ‚Äì SAMSUNG</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> CAN  ‚Äì  ¬´¬ª</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     ‚Äî      ‚Äì IBM developerWorks</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vehicle telematics analytics using Watson IoT Platform Cloud Analytics ‚Äì IBM developerWorks Recipes</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  CAN   CANopen ‚Äì </a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   CANopen ‚Äì  </a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     Arduino   ‚Äì Geektimes</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wiring the MCP2515 Controller Area Network CAN BUS Diagnostics ‚Äì 14CORE</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arduino OBD2 ELM327 I2C-LCD HC05 Bluetooth ‚Äì Instructables</a> <br> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> Android     OBDII  ‚Äì </a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de408941/">https://habr.com/ru/post/de408941/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de408929/index.html">Die Entwickler einiger Handyspiele nutzen die Kryptow√§hrung auf den Smartphones der Benutzer</a></li>
<li><a href="../de408931/index.html">√úberpr√ºfen Sie ASUS N580VD Notebook</a></li>
<li><a href="../de408933/index.html">Ersatz eines mechanischen Druckschalters durch einen digitalen (f√ºr Brunnenbesitzer)</a></li>
<li><a href="../de408935/index.html">Intelligente Antenne f√ºr LTE-Netzwerke</a></li>
<li><a href="../de408939/index.html">Abschlussbericht √ºber das Mayak-Satellitenprojekt</a></li>
<li><a href="../de408943/index.html">Was Langeweile einem Menschen antut: die Wissenschaft des wandernden Bewusstseins</a></li>
<li><a href="../de408945/index.html">Anonymer Bitcoin-Million√§r gibt 86 Millionen US-Dollar f√ºr wohlt√§tige Zwecke aus.</a></li>
<li><a href="../de408947/index.html">Bewertung des zu billigen russischen Registrars AdvoCam-FD4</a></li>
<li><a href="../de408949/index.html">So √ºbernehmen Sie die Kontrolle √ºber sich selbst in sozialen Netzwerken</a></li>
<li><a href="../de408953/index.html">Toshiba f√ºhrte eine "Helium" -Festplatte mit einer Kapazit√§t von 14 TB ein</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>