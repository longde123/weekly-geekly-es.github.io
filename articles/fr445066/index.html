<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍💼 🥔 💲 Comment j'écris des notes mathématiques sur LaTeX dans Vim 🗃️ 🚹 🖊️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a quelque temps, à Quora, j'ai répondu à la question: comment suivre les notes de cours en mathématiques sur LaTeX . Là, j'ai expliqué mon flux d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment j'écris des notes mathématiques sur LaTeX dans Vim</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445066/">  Il y a quelque temps, à Quora, j'ai répondu à la question: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comment suivre les notes de cours en mathématiques sur LaTeX</a> .  Là, j'ai expliqué mon flux de travail de prise de notes dans LaTeX en utilisant Vim et Inkscape (pour les dessins).  Mais depuis, beaucoup de choses ont changé, je veux donc publier plusieurs articles de blog avec une description du nouveau processus.  Ceci est le premier des articles. <br><br>  J'ai commencé à utiliser LaTeX pour prendre des notes au deuxième semestre d'un cours de mathématiques, et depuis lors, j'ai écrit plus de 1700 pages.  Voici quelques exemples de ce à quoi ressemble le résumé: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9b2/6a1/c4d/9b26a1c4dcac70227b229935ae06599d.png"></a> <br><a name="habracut"></a><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9e3/6dc/cef/9e36dccef8c096640212a3755d9ef2ec.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/793/760/039/79376003910994dc579e0ccf3da4f690.png"></a> <br><br>  Ces notes, y compris les dessins, sont prises directement lors de la conférence et ne sont pas modifiées par la suite.  Pour rédiger efficacement des résumés dans LaTeX, quatre règles doivent être suivies: <br><br><ul><li>  L'écriture de texte et de formules dans LaTeX devrait être aussi rapide qu'un professeur écrivant au tableau: le délai est inacceptable. <br></li><li>  Les illustrations de dessin doivent être presque aussi rapides que celles du professeur. <br></li><li>  La gestion des notes, c'est-à-dire l'ajout de notes, l'organisation de toutes les notes, les deux dernières conférences, la recherche de notes, etc., devrait être rapide et facile. <br></li><li>  Il devrait être possible d'annoter des documents pdf en utilisant LaTeX si je veux écrire une note avec un document pdf. </li></ul><br>  Cet article concerne le premier point: prendre des notes sur LaTeX. <br><br><h1>  Vim et LaTeX </h1><br>  Pour écrire du texte et des formules mathématiques sur LaTeX, j'utilise Vim.  Il s'agit d'un puissant éditeur de texte à usage général, hautement extensible.  Je l'utilise pour écrire du code, LaTeX, du texte Markdown ... en général, tous les textes.  Il a une courbe d'apprentissage assez abrupte, mais si vous maîtrisez la base, il est déjà difficile de revenir à l'éditeur sans les touches de raccourci habituelles.  Voici à quoi ressemble mon écran lorsque je modifie un document LaTeX: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/eb5/999/261/eb5999261b4ba963fd49f999477731eb.png"></a> <br><br>  À gauche se trouve Vim, et à droite se trouve le visualiseur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Zathura</a> PDF, qui prend également en charge les raccourcis clavier de style Vim.  Je travaille dans Ubuntu avec le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gestionnaire de</a> fenêtres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bspwm</a> .  En tant que plugin LaTeX installé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vimtex</a> .  Il fournit la coloration syntaxique, la table des matières, le synctex, etc. En utilisant le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plug-in vim,</a> je l'ai configuré comme suit: <br><br> <code>Plug 'lervag/vimtex' <br> let g:tex_flavor='latex' <br> let g:vimtex_view_method='zathura' <br> let g:vimtex_quickfix_mode=0 <br> set conceallevel=1 <br> let g:tex_conceal='abdmg'</code> <br> <br>  Les deux dernières lignes ajustent le déguisement.  Il s'agit d'une fonction dans laquelle le code LaTeX est remplacé ou devient invisible lorsque le curseur n'est pas sur cette ligne.  Si vous masquez <code>\ [</code> , <code>\]</code> , <code>$</code> , alors ils ne sont pas si visibles, ce qui donne une meilleure vue d'ensemble du document.  Cette fonction remplace également <code>\bigcap</code> par <code>∩</code> , <code>\in</code> par <code>∈</code> , etc., comme indiqué dans l'animation: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d36/2e0/b83/d362e0b837be308b0f8897482a331ec6.gif"><br><br>  Avec ce paramètre, vous pouvez accomplir la tâche: écrire sur LaTeX aussi vite qu'un professeur écrit au tableau.  Des extraits entrent en jeu ici. <br><br><h1>  Extraits </h1><br><h3>  Qu'est-ce qu'un extrait? </h3><br>  Un extrait est un court morceau de texte réutilisable appelé par un autre texte.  Par exemple, lorsque vous tapez signe et appuyez sur Tab, le signe verbal se transforme en signature: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ab/28b/1ad/5ab28b1ad6114b68f4ce459d4f89eeae.gif"><br><br>  Les extraits peuvent être dynamiques: lorsque je tape <code>today</code> et appuie sur <code>Tab</code> , le mot <code>today</code> est remplacé par la date actuelle, et la <code>box</code> - <code>Tab</code> devient un champ qui grossit automatiquement. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b6/301/a65/1b6301a6561d104b4bc79654cb75470d.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b7/cae/fc4/8b7caefc472eae0941f41365d16e8d2d.gif"><br><br>  Vous pouvez même utiliser un extrait dans un autre: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdd/1fd/ed4/cdd1fded48947d163c2e5e6b974cfec0.gif"><br><br><h3>  Création d'extraits de code avec UltiSnips </h3><br>  Pour contrôler les extraits, j'utilise le plugin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UltiSnips</a> .  Voici sa configuration: <br><br><pre> <code class="plaintext hljs">Plug 'sirver/ultisnips' let g:UltiSnipsExpandTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpForwardTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpBackwardTrigger = '&lt;s-tab&gt;'</code> </pre> <br>  Code pour le <code>sign</code> extrait: <br><br><pre> <code class="plaintext hljs">snippet sign "Signature" Yours sincerely, Gilles Castel endsnippet</code> </pre> <br>  Pour les extraits dynamiques, vous pouvez mettre le code entre les guillemets, ce code sera exécuté lorsque l'extrait sera étendu.  Ici, j'ai utilisé bash pour formater la date actuelle: <code>date + %F</code> <br><br><pre> <code class="plaintext hljs">snippet today "Date" `date +%F` endsnippet</code> </pre> <br>  Dans le bloc <code>`!p ... `</code> , vous pouvez écrire en Python.  Regardez le code de l'extrait de <code>box</code> : <br><br><pre> <code class="python hljs">snippet box <span class="hljs-string"><span class="hljs-string">"Box"</span></span> `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'┌'</span></span> + <span class="hljs-string"><span class="hljs-string">'─'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'┐'</span></span>` │ $<span class="hljs-number"><span class="hljs-number">1</span></span> │ `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'└'</span></span> + <span class="hljs-string"><span class="hljs-string">'─'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'┘'</span></span>` $<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br>  Au lieu de ce code, la valeur de la variable <code>snip.rv</code> sera insérée dans le document.  À l'intérieur des blocs, vous avez accès à l'état actuel de l'extrait de code, par exemple, <code>t[1]</code> correspond à l'emplacement du premier onglet, <code>fn</code> nom du fichier actuel, etc. <br><br><h1>  Extraits LaTeX </h1><br>  Les extraits de code accélèrent considérablement le travail, en particulier certains des extraits de code les plus complexes.  Commençons par le plus simple. <br><br><h3>  L'environnement </h3><br>  Pour insérer un environnement, entrez simplement <code>beg</code> au début de la ligne.  Ensuite, le nom de l'environnement, qui se reflète dans la commande <code>\end{}</code> .  Appuyer sur <code>Tab</code> place le curseur à l'intérieur. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5e/d64/1a9/d5ed641a9cb568d13dd56d98fec6376b.gif"><br><br>  Le code est le suivant: <br><br><pre> <code class="plaintext hljs">snippet beg "begin{} / end{}" bA \begin{$1} $0 \end{$1} endsnippet</code> </pre> <br>  Le symbole <code>b</code> signifie qu'un tel extrait ne fonctionne qu'au début d'une ligne, <code>A</code> signifie une expansion automatique, c'est-à-dire que vous n'avez pas besoin d'appuyer sur <code>Tab</code> .  Les onglets où vous allez en appuyant sur <code>Tab</code> et <code>Shift</code> + <code>Tab</code> sont désignés par <code>$1</code> , <code>$2</code> , ... et ce dernier est noté <code>$0</code> . <br><br><h3>  Formules en ligne et d'affichage </h3><br>  Les deux extraits de <code>mk</code> plus couramment utilisés sont <code>mk</code> et <code>dm</code> , qui déclenchent le mode mathématique.  Le premier pour les formules en ligne, le second pour les formules affichées. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12a/16b/6a9/12a16b6a90c4d85a887c7cde0f18bb8c.gif"><br><br>  Extrait de formule intelligente: il sait quand insérer un espace après le signe dollar.  Lorsque je commence à taper un mot immédiatement après la fermeture de $, cela ajoute un espace.  Mais si je tape un autre caractère, il n'ajoute pas d'espace, comme dans le cas de '$ p $ -value'. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/117/2a1/f55/1172a1f556fd36b42f7c3642b3952e2c.gif"><br><br>  Le code de cet extrait est: <br><br><pre> <code class="plaintext hljs">snippet mk "Math" wA $${1}$`!p if t[2] and t[2][0] not in [',', '.', '?', '-', ' ']: snip.rv = ' ' else: snip.rv = '' `$2 endsnippet</code> </pre> <br>  <code>W</code> à la fin de la première ligne signifie que l'extrait se développe uniquement aux limites des mots.  Par exemple, <code>hellomk</code> ne fonctionnera pas et <code>hello mk</code> fonctionnera. <br><br>  L'extrait pour les formules affichées est plus simple, mais aussi très pratique.  Il fait toujours terminer les équations par un point. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a68/2e9/736/a682e97365ecfe19fe0c5bc08bacfec6.gif"><br><br><pre> <code class="plaintext hljs">&lt;snippet dm "Math" wA \[ $1 .\] $0 endsnippet</code> </pre> <br><h3>  Caractères en indice et en exposant </h3><br>  Un autre extrait utile concerne les index.  Il change <code>a1</code> en <code>a_1</code> et <code>a_12</code> en <code>a_{12}</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f26/633/cb8/f26633cb822c6b52d346dfbba6e1a1bd.gif"><br><br>  Le code de cet extrait utilise une expression régulière comme déclencheur.  Il développe le fragment lorsque vous entrez un caractère suivi d'un chiffre codé comme <code>[A-Za-z]\d</code> , ou d'un caractère suivi de <code>_</code> et de deux chiffres: <code>[A-Za-z]_\d\d</code> . <br><br><pre> <code class="plaintext hljs">snippet '([A-Za-z])(\d)' "auto subscript" wrA `!p snip.rv = match.group(1)`_`!p snip.rv = match.group(2)` endsnippet snippet '([A-Za-z])_(\d\d)' "auto subscript2" wrA `!p snip.rv = match.group(1)`_{`!p snip.rv = match.group(2)`} endsnippet</code> </pre> <br>  Lorsque vous combinez des parties d'une expression régulière dans un groupe à l'aide de parenthèses, par exemple <code>(\d\d)</code> , vous pouvez les utiliser dans l'extension d'extrait via <code>match.group(i)</code> en Python. <br><br>  Pour les caractères en exposant, j'utilise <code>td</code> , qui se transforme en <code>^{}</code> .  Bien que pour les plus courants (carré, cube et plusieurs autres), des extraits de code distincts soient prévus, tels que <code>sr</code> , <code>cb</code> et <code>comp</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/da8/55c/d9e/da855cd9e67c48f508fab5ddc8c877fe.gif"><br><br><pre> <code class="plaintext hljs">snippet sr "^2" iA ^2 endsnippet snippet cb "^3" iA ^3 endsnippet snippet compl "complement" iA ^{c} endsnippet snippet td "superscript" iA ^{$1}$0 endsnippet</code> </pre> <br><h3>  Fraction </h3><br>  L'un des extraits les plus pratiques fonctionne avec des fractions.  Il fait les remplacements suivants: <br><br>  <code>//</code> → <code>\frac{}{}</code> <br>  <code>3/</code> → <code>\frac{3}{}</code> <br>  <code>4\pi^2/</code> → <code>\frac{4\pi^2}{}</code> <br>  <code>(1 + 2 + 3)/</code> → <code>\frac{1 + 2 + 3}{}</code> <br>  <code>(1+(2+3)/)</code> → <code>(1 + \frac{2+3}{})</code> <br>  <code>(1 + (2+3))/</code> → <code>\frac{1 + (2+3)}{}</code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f8/3f1/bdc/3f83f1bdc3078aa16382e80a276f199f.gif"><br><br>  Pour le premier, un code simple: <br><br><pre> <code class="plaintext hljs">snippet // "Fraction" iA \\frac{$1}{$2}$0 endsnippet</code> </pre> <br>  Les deuxième et troisième substitutions se produisent à l'aide d'expressions régulières correspondant aux expressions <code>3/</code> , <code>4ac/</code> , <code>6\pi^2/</code> , <code>a_2/</code> , etc. <br><br><pre> <code class="plaintext hljs">snippet '((\d+)|(\d*)(\\)?([A-Za-z]+)((\^|_)(\{\d+\}|\d))*)/' "Fraction" wrA \\frac{`!p snip.rv = match.group(1)`}{$1}$0 endsnippet</code> </pre> <br>  Comme vous pouvez le voir, les expressions régulières peuvent devenir assez longues, mais voici un diagramme qui devrait tout expliquer: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/908/df5/ec2/908df5ec254f9cd5b08b99b8a54318d0.svg"><br><br>  Dans les quatrième et cinquième cas, l'extrait de code essaie de trouver le support correspondant.  Étant donné que le moteur d'expression régulière UltiSnips ne sait pas comment procéder, j'ai dû utiliser Python: <br><br><pre> <code class="python hljs">priority <span class="hljs-number"><span class="hljs-number">1000</span></span> snippet <span class="hljs-string"><span class="hljs-string">'^.*\)/'</span></span> <span class="hljs-string"><span class="hljs-string">"() Fraction"</span></span> wrA `!p stripped = match.string[:<span class="hljs-number"><span class="hljs-number">-1</span></span>] depth = <span class="hljs-number"><span class="hljs-number">0</span></span> i = len(stripped) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">')'</span></span>: depth += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">'('</span></span>: depth -= <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> depth == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; i -= <span class="hljs-number"><span class="hljs-number">1</span></span> snip.rv = stripped[<span class="hljs-number"><span class="hljs-number">0</span></span>:i] + <span class="hljs-string"><span class="hljs-string">"\\frac{"</span></span> + stripped[i+<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] + <span class="hljs-string"><span class="hljs-string">"}"</span></span> `{$<span class="hljs-number"><span class="hljs-number">1</span></span>}$<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br>  Enfin, je veux partager un extrait qui transforme la sélection actuelle en une fraction.  Sélectionnez le texte, appuyez sur <code>Tab</code> , tapez <code>/</code> et encore <code>Tab</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0da/01b/956/0da01b9566dc437fabf0c563ed14941f.gif"><br><br>  Le code utilise la variable <code>${VISUAL}</code> , qui reflète votre choix. <br><br><pre> <code class="plaintext hljs">snippet / "Fraction" iA \\frac{${VISUAL}}{$1}$0 endsnippet</code> </pre> <br><h3>  Sympy et Mathematica </h3><br>  Un autre extrait sympa mais moins utilisé exécute <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sympy</a> pour évaluer les expressions mathématiques.  Par exemple: <code>sympy</code> <code>Tab</code> développe en <code>sympy | sympy</code>  <code>sympy | sympy</code> et <code>sympy 1 + 1 sympy</code> <code>Tab</code> devient <code>2</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c8/f14/3fd/8c8f143fdcdc2f3e6de9853cf7ea3def.gif"><br><br><pre> <code class="plaintext hljs">snippet sympy "sympy block " w sympy $1 sympy$0 endsnippet priority 10000 snippet 'sympy(.*)sympy' "evaluate sympy" wr `!p from sympy import * x, y, z, t = symbols('xyz t') k, m, n = symbols('km n', integer=True) f, g, h = symbols('fg h', cls=Function) init_printing() snip.rv = eval('latex(' + match.group(1).replace('\\', '') \ .replace('^', '**') \ .replace('{', '(') \ .replace('}', ')') + ')') ` endsnippet</code> </pre> <br>  Pour Mathematica, quelque chose de similaire est également possible: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82f/7f1/87a/82f7f187a685a52ed7665fded563f936.gif"><br><br><pre> <code class="plaintext hljs">priority 1000 snippet math "mathematica block" w math $1 math$0 endsnippet priority 10000 snippet 'math(.*)math' "evaluate mathematica" wr `!p import subprocess code = 'ToString[' + match.group(1) + ', TeXForm]' snip.rv = subprocess.check_output(['wolframscript', '-code', code]) ` endsnippet</code> </pre> <br><h3>  Extraits Postfix </h3><br>  Il me semble utile de mentionner également des extraits de suffixe qui insèrent le texte approprié après avoir entré certains caractères.  Par exemple, <code>phat</code> → <code>\hat{p}</code> et <code>zbar</code> → <code>\overline{z}</code> .  Un extrait similaire insère un vecteur, par exemple, <code>v,.</code>  → <code>\vec{v}</code> et <code>v.,</code> → <code>\vec{v}</code> .  L'ordre du point et du point-virgule n'a pas d'importance, de sorte que je puisse les cliquer en même temps.  Ces extraits font vraiment gagner du temps, car vous les saisissez à la même vitesse qu'un professeur écrit au tableau. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c2/e62/aae/7c2e62aae292bc4d65eae363c816e206.gif"><br><br>  Notez que les préfixes de <code>bar</code> et de <code>hat</code> fonctionnent toujours, uniquement avec une priorité inférieure.  Le code de ces extraits est: <br><br><pre> <code class="plaintext hljs">priority 10 snippet "bar" "bar" riA \overline{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])bar" "bar" riA \overline{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">priority 10 snippet "hat" "hat" riA \hat{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])hat" "hat" riA \hat{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">snippet "(\\?\w+)(,\.|\.,)" "Vector postfix" riA \vec{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><h3>  Autres extraits </h3><br>  J'ai encore une centaine d'extraits couramment utilisés.  Tous sont disponibles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  La plupart d'entre eux sont assez simples.  Par exemple, <code>!&gt;</code> Se transforme en <code>\mapsto</code> , <code>-&gt;</code> devient <code>\to</code> , etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ee/36e/f41/4ee36ef41c17f1ded1fffe13ba32b60d.gif"><br><br>  <code>fun</code> transforme en <code>f: \R \to \R :</code> , <code>!&gt;</code> → <code>\mapsto</code> , <code>cc</code> → <code>\subset</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a45/092/c95/a45092c95d91059b779f74cedda840e1.gif"><br><br>  <code>lim</code> devient <code>\lim_{n \to \infty}</code> , <code>sum</code> → <code>\sum_{n = 1}^{\infty}</code> , <code>ooo</code> → <code>\infty</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2be/9c9/9e6/2be9c99e6ab5787fc5196bbf4ce525a7.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3be/522/f5e/3be522f5e6e5ca7f871138732ba1b14d.gif"><br><br><h3>  Extraits spécifiques au cours </h3><br>  En plus de ceux fréquemment utilisés, j'ai également des extraits spécifiques.  Ils sont chargés en une seule ligne dans <code>.vimrc</code> : <br><br><pre> <code class="plaintext hljs">set rtp+=~/current_course</code> </pre> <br>  Ici <code>current_course</code> est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien symbolique</a> vers le cours actuel (plus à ce sujet dans un autre article).  Dans ce dossier se trouve le fichier <code>~/current_course/UltiSnips/tex.snippets</code> , où j'ajoute des extraits de cours.  Par exemple, pour la mécanique quantique, il existe des extraits pour enregistrer les états quantiques des appliques et des cétos. <br><br> <code>&lt;a|</code>  → <code>\bra{a}</code> <br> <code>&lt;q|</code>  → <code>\bra{\psi}</code> <br>  <code>|a&gt;</code> → <code>\ket{a}</code> <br>  <code>|q&gt;</code> → <code>\ket{\psi}</code> <br>  <code>\braket{a}{b}</code> → <code>\braket{a}{b}</code> <br><br>  Comme la mécanique quantique utilise souvent <code>\psi</code> , j'ai automatiquement remplacé tous les <code>q</code> dans braket par <code>\psi</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/d33/1fd/268d331fdb83b6fa3563b6f2b0baac66.gif"><br><br><pre> <code class="plaintext hljs">snippet "\&lt;(.*?)\|" "bra" riA \bra{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "\|(.*?)\&gt;" "ket" riA \ket{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "(.*)\\bra{(.*?)}([^\|]*?)\&gt;" "braket" riA `!p snip.rv = match.group(1)`\braket{`!p snip.rv = match.group(2)`}{`!p snip.rv = match.group(3).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet</code> </pre> <br><h3>  Contexte </h3><br>  Lors de la rédaction de ces extraits, vous devez déterminer s'ils peuvent être trouvés en texte brut.  Par exemple, selon mon dictionnaire, il y a environ 72 mots en anglais et 2 000 mots en néerlandais avec sr.  Ainsi, lorsque je tape <code>disregard</code> , <code>sr</code> passe à <code>^2</code> , et nous obtenons <code>di^2egard</code> . <br><br>  La solution à ce problème consiste à ajouter du contexte aux extraits de code.  La coloration syntaxique de Vim détermine si UltiSnips doit utiliser un extrait de code, selon que vous êtes en mode formule ou texte.  Je suis venu avec cette option: <br><br><pre> <code class="plaintext hljs">global !p texMathZones = ['texMathZone'+x for x in ['A', 'AS', 'B', 'BS', 'C', 'CS', 'D', 'DS', 'E', 'ES', 'F', 'FS', 'G', 'GS', 'H', 'HS', 'I', 'IS', 'J', 'JS', 'K', 'KS', 'L', 'LS', 'DS', 'V', 'W', 'X', 'Y', 'Z']] texIgnoreMathZones = ['texMathText'] texMathZoneIds = vim.eval('map('+str(texMathZones)+", 'hlID(v:val)')") texIgnoreMathZoneIds = vim.eval('map('+str(texIgnoreMathZones)+", 'hlID(v:val)')") ignore = texIgnoreMathZoneIds[0] def math(): synstackids = vim.eval("synstack(line('.'), col('.') - (col('.')&gt;=2 ? 1 : 0))") try: first = next( i for i in reversed(synstackids) if i in texIgnoreMathZoneIds or i in texMathZoneIds ) return first != ignore except StopIteration: return False endglobal</code> </pre> <br>  Vous pouvez maintenant ajouter le <code>context "math()"</code> aux extraits de code que vous souhaitez appliquer uniquement dans un contexte mathématique. <br><br><pre> <code class="plaintext hljs">context "math()" snippet sr "^2" iA ^2 endsnippet</code> </pre> <br>  Notez que le contexte mathématique est une chose subtile.  Parfois, en mode formule, nous écrivons également du texte en utilisant <code>\text{...}</code> .  Dans ce cas, nous ne voulons pas utiliser d'extraits.  Cependant, dans le cas suivant: <code>\[ \text{$...$} \]</code> , ils <i>doivent</i> être appliqués.  C'est pourquoi le code du contexte <code>math</code> n'est pas si simple.  L'animation suivante illustre ces subtilités. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e1b/3ca/2dd/e1b3ca2dd4fc1f5fe39679fb6ba38aad.gif"><br><br><h3>  Correction orthographique à la volée </h3><br>  Bien que les formules soient une partie importante du résumé, j'imprime la plupart du temps en anglais.  Environ 80 mots par minute, mes compétences de frappe sont assez bonnes, mais je fais beaucoup de fautes de frappe.  C'est pourquoi j'ai ajouté une liaison à Vim qui corrige les fautes d'orthographe sans interférer avec le travail.  Lorsque j'appuie <code>Ctrl+L</code> pendant la saisie, l'erreur d'orthographe précédente est corrigée.  Cela ressemble à ceci: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ad/d70/568/0add705683b79cb94498104251a6d5b8.gif"><br><br>  Mes paramètres pour la vérification orthographique: <br><br><pre> <code class="plaintext hljs">setlocal spell set spelllang=nl,en_gb inoremap &lt;Cl&gt; &lt;cg&gt;u&lt;Esc&gt;[s1z=`]a&lt;cg&gt;u</code> </pre> <br>  Ici, allez à l'erreur d'orthographe précédente <code>[s</code> , puis sélectionnez la première option <code>1z=</code> et retournez <code>`]a</code> .  Les commandes <code>&lt;cg&gt;u</code> au milieu vous permettent d'annuler rapidement la correction. <br><br><h3>  En conclusion </h3><br>  Grâce aux extraits de Vim, écrire du code LaTeX n'est plus ennuyeux, mais plutôt un plaisir.  En combinaison avec l'orthographe à la volée, cela vous permet de décrire rapidement et facilement des conférences sur les mathématiques.  Dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prochain article, je</a> parlerai d’autres sujets, comme le dessin d’illustrations numériques et leur intégration dans un document LaTeX. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445066/">https://habr.com/ru/post/fr445066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445056/index.html">Présentation des cours de développement Web</a></li>
<li><a href="../fr445058/index.html">Le pilote automatique de Tesla a appris à déterminer les changements de voie dans les voitures voisines</a></li>
<li><a href="../fr445060/index.html">Organisation des recherches de données à l'aide des référentiels de valeurs-clés Spring Data</a></li>
<li><a href="../fr445062/index.html">Format de présentation moderne?</a></li>
<li><a href="../fr445064/index.html">La bataille pour la neutralité du net - une chance de revenir</a></li>
<li><a href="../fr445070/index.html">Le condensé de matériaux intéressants pour le développeur mobile # 291 (18 mars - 24 mars)</a></li>
<li><a href="../fr445072/index.html">Telegraff: Kotlin DSL pour Telegram</a></li>
<li><a href="../fr445074/index.html">Programmation de LibreOffice Base. Partie 1</a></li>
<li><a href="../fr445076/index.html">Le géant informatique a introduit un pare-feu défini par service</a></li>
<li><a href="../fr445078/index.html">La physique quantique est susceptible de protéger les réseaux électriques américains contre les pirates</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>