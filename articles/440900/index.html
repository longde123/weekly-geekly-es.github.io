<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçá üíÜüèΩ üí≠ RESTO pasi√≥n por 200 üî∂ üßñüèª üöÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace tiempo que quer√≠a escribir este art√≠culo. Me preguntaba de qu√© lado entrar m√°s correctamente. Pero, de repente, recientemente, apareci√≥ un art√≠cu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RESTO pasi√≥n por 200</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440900/"><img src="https://habrastorage.org/webt/za/yt/hf/zaythfh3df4c0ypahyi08iqrbrq.jpeg"><br><br>  Hace tiempo que quer√≠a escribir este art√≠culo.  Me preguntaba de qu√© lado entrar m√°s correctamente.  Pero, de repente, recientemente, apareci√≥ un art√≠culo similar sobre Habr√©, que caus√≥ una tormenta en un vaso.  Lo que m√°s me sorprendi√≥ fue el hecho de que el art√≠culo comenz√≥ a manejarse en menos, aunque ni siquiera declar√≥ algo, sino que plante√≥ la cuesti√≥n del uso de c√≥digos de respuesta del servidor web en REST.  El debate estall√≥ en caliente.  Y la apoteosis fue que el art√≠culo entr√≥ en borrador ... kilobytes de comentarios, opiniones, etc.  Solo desapareci√≥.  Muchos se convirtieron en v√≠ctimas del karmo, considere, para nada :) <br><br>  En general, fue el destino de ese art√≠culo lo que me impuls√≥ a escribir este.  Y realmente espero que sea √∫til y aclare mucho. <br><br>  Te advierto que todo lo escrito a continuaci√≥n es una experiencia real, no un acto de equilibrio cognitivo.  Y as√≠, condujeron. <br><a name="habracut"></a><br><h2>  HTTP </h2><br>  Lo primero que debe hacer es separar muy claramente las capas.  La capa de transporte es http.  Bueno, en realidad DESCANSO.  Esto es algo fundamentalmente importante para aceptar todo y "usted mismo" en √©l.  Hablemos solo sobre http primero. <br><br>  Us√© el t√©rmino "capa de transporte".  Y no hice una reserva.  La cuesti√≥n es que http implementa las funciones de transporte de solicitudes al servidor y contenido al cliente, independientemente de tcp / ip.  S√≠, se basa en tcp / ip.  Y parece que es necesario considerarlo como su transporte.  Pero no  Y esta es la raz√≥n: las conexiones de socket no son directas, es decir  Esta no es una conexi√≥n cliente-servidor.  Tanto la solicitud http como la respuesta http pueden recorrer un largo camino a trav√©s de una tonelada de servicios.  Se pueden agregar o descomponer por el contrario.  Puede ser almacenado en cach√©, puede ser modificado. <br><br>  Es decir  tanto la solicitud http como la respuesta http tienen su propia ruta.  Y no depende del extremo posterior, ni del extremo frontal.  Le pido que preste especial atenci√≥n a esto. <br><br>  Las rutas http no son est√°ticas.  Pueden ser muy complicados.  Por ejemplo, si se integra un equilibrador en la infraestructura, puede enviar solicitudes recibidas a cualquiera de los nodos posteriores.  Al mismo tiempo, el propio backend puede implementar su propia estrategia para trabajar con solicitudes.  Algunos de ellos ir√°n directamente a microservicios, otros ser√°n procesados ‚Äã‚Äãpor el propio servidor web, otros ser√°n complementados y transferidos a otra persona, y otros ser√°n emitidos desde el cach√©, etc.  As√≠ es como funciona Internet.  Nada nuevo <br><br>  Y aqu√≠ es importante entender: ¬øpor qu√© necesitamos c√≥digos de respuesta?  La cuesti√≥n es que todo el modelo descrito anteriormente toma decisiones basadas en ellos.  Es decir  Estos son c√≥digos que le permiten tomar decisiones de infraestructura y transporte durante el enrutamiento http. <br><br>  Por ejemplo, si el equilibrador encuentra un c√≥digo de respuesta del respaldo 503, al enviar una solicitud, puede tomar esto como base para considerar que el nodo no est√° disponible temporalmente.  Observo que la respuesta con el c√≥digo 503 proporciona un encabezado Retry-After.  Despu√©s de recibir del encabezado el intervalo para sondeos repetidos, el equilibrador dejar√° el nodo solo durante el per√≠odo especificado y trabajar√° con los disponibles.  Adem√°s, tales estrategias se implementan "fuera de la caja" por los servidores web. <br><br>  Un peque√±o tema para una comprensi√≥n profunda: ¬øqu√© pasa si el nodo responde 500?  ¬øQu√© debe hacer el equilibrador?  ¬øCambiar a otro?  Y muchos responder√°n, por supuesto, todos los motivos 5xx para deshabilitar un nodo.  Y se equivocar√°n.  El c√≥digo 500 es un c√≥digo de error inesperado.  Es decir  uno que nunca vuelva a suceder.  Y lo m√°s importante, cambiar a otro nodo puede no cambiar nada.  Es decir  simplemente deshabilitamos los nodos sin el menor beneficio. <br><br>  En el caso de 500, las estad√≠sticas nos ayudan.  El servidor WEB local del nodo puede traducir el nodo mismo al estado de indisponibilidad con un gran n√∫mero de 500 respuestas. En este caso, el equilibrador que contacte a este nodo recibir√° una respuesta 503 y no lo tocar√°.  El resultado es el mismo, pero ahora, esta soluci√≥n es significativa y elimina las respuestas "falsas". <br><br>  Pero eso no es todo.  En esta situaci√≥n, el monitoreo permitir√° a los administradores conectarse a la situaci√≥n para mantener el nodo.  Es decir  no solo obtenemos la implementaci√≥n de un servicio altamente accesible, con balanceadores, etc., sino tambi√©n un proceso de soporte efectivo. <br><br>  Y todo esto le permite crear c√≥digos de respuesta del servidor.  Cualquier arquitectura de aplicaci√≥n WEB debe comenzar con el dise√±o de la capa de transporte.  Espero que no haya dudas al respecto. <br><br><h2>  DESCANSO </h2><br>  Har√© una pregunta ret√≥rica: ¬øqu√© es?  ¬øY qu√© le respondiste?  No dar√© enlaces a pruebas obvias, pero lo m√°s probable es que no sea lo que es en realidad :) Esto es solo una ideolog√≠a, un estilo.  Algunas consideraciones sobre el tema: la mejor manera de comunicarse con la parte posterior.  Y no solo comunicarse, sino comunicarse en la infraestructura WEB.  Es decir  basado en http.  Con todas esas "cosas √∫tiles" sobre las que escrib√≠ anteriormente.  Las decisiones finales para implementar su interfaz son siempre <b>suyas</b> . <br><br>  ¬øAlguna vez te has preguntado por qu√© no se invent√≥ un transporte separado para REST?  Por ejemplo, para websocket lo es.  S√≠, tambi√©n comienza con http, pero luego, una vez establecida la conexi√≥n, generalmente es una canci√≥n separada.  ¬øPor qu√© no hacer lo mismo para REST? <br><br>  La respuesta es simple: ¬øpor qu√©?  Existe un protocolo hermoso, listo y verificado: http.  Se escala bien.  Le permite implementar servicios complejos y altamente accesibles que pueden hacer frente a una carga pesada.  Todo lo que se necesita es introducir algunas reglas conceptuales para que los desarrolladores se entiendan entre s√≠. <br><br>  De aqu√≠ se desprende una conclusi√≥n simple y obvia: todo lo que es inherente a http es inherente a REST.  Estas son entidades inseparables.  No hay un encabezado REST separado, ni siquiera una pista de que REST es REST.  Para cualquier servidor REST, la solicitud es exactamente la misma que cualquier otra.  Es decir  REST es justo lo que tenemos en mente. <br><br><h2>  REST c√≥digos de respuesta http </h2><br>  ¬øHablemos sobre qu√© c√≥digo debe responder su servidor a una solicitud REST?  Personalmente, me parece que de todo lo anterior, la respuesta ya es obvia, porque  REST no es diferente de cualquier otra solicitud, debe estar sujeto exactamente a las mismas reglas.  El c√≥digo de respuesta es una parte integral de REST y debe ser relevante para la esencia de la respuesta.  Es decir  si el objeto no fue encontrado por solicitud, es 404, si el cliente realiz√≥ una solicitud incorrecta 400, etc.  Pero, con mayor frecuencia, el debate no termina ah√≠.  Por lo tanto, continuar√©. <br><br>  ¬øEs posible responder todo con el c√≥digo 200?  ¬øY qui√©n te lo prohibir√°?  Por favor ... el c√≥digo 200 es el mismo c√≥digo que los dem√°s.  Es cierto que la base de este enfoque es una tesis muy simple: mi sistema es perfecto, no tiene errores.  Si eres una persona que puede crear tales sistemas, ¬°esto solo puede ser envidiado! <br><br>  Pero lo m√°s probable ... no es perfecta.  Y los errores suceden.  Y sucede que suceden debido a circunstancias m√°s all√° de nuestro control.  Y aqu√≠ una soluci√≥n t√≠pica es crear su propio sistema de codificaci√≥n de errores.  ¬øEso es malo?  Si, eso es malo.  Esto es s√∫per malo  Averig√ºemos por qu√©. <br><br>  Y as√≠, tomando el c√≥digo 200 como el √∫nico verdadero, nos hacemos responsables del desarrollo de toda la capa (capa cr√≠tica) del sistema: manejo de errores.  Es decir  El trabajo de muchas personas para desarrollar esta capa se env√≠a a la chatarra.  Y comienza la construcci√≥n de su "bicicleta".  Pero este mega edificio est√° condenado al fracaso. <br><br>  Comencemos con el c√≥digo.  Si vamos a responder las 200, nosotros mismos tendremos que manejar los errores.  El m√©todo cl√°sico es tratar de construir.  Cada segmento de c√≥digo lo envolvemos con c√≥digo adicional.  Manejadores que hacen algo √∫til.  Por ejemplo, ponen algo en el registro.  Algo importante  Eso localizar√° el error.  ¬øY si el error surgi√≥ no donde se esperaba?  ¬øO si ocurri√≥ un error en el controlador de errores?  Es decir  Esta estrategia a nivel de c√≥digo no funciona a priori.  Y al final, el int√©rprete o la plataforma procesar√° sus errores.  SO finalmente.  La esencia del error es que no lo est√°s esperando.  No necesita ocultarlo, necesita encontrarlo y arreglarlo.  Por lo tanto, si REST responde a algunas solicitudes con un error de 500, esto es <b>normal</b> .  Y lo que es m√°s, <b>correcto</b> . <br><br>  Volvamos a la pregunta: ¬øpor qu√© es esto correcto?  Porque: <br><br><ol><li>  Code 500 es un token de infraestructura en funci√≥n del cual se puede deshabilitar el nodo en el que se produce el problema; </li><li>  Los c√≥digos 5xx son lo que se est√° monitoreando y si surge dicho c√≥digo, cualquier sistema de monitoreo lo notificar√° de inmediato.  Y el servicio de soporte a tiempo podr√° conectarse a la soluci√≥n del problema; </li><li>  No escribes c√≥digo adicional.  No pierdas un tiempo precioso en esto.  No compliques la arquitectura.  No trata problemas inusuales para usted: escribe el c√≥digo de la aplicaci√≥n.  Lo que quieren de ti.  ¬øQu√© est√°n pagando? </li><li>  Un rastro que se cae por error 500 ser√° mucho m√°s √∫til que sus intentos de superarlo. </li><li>  Si la solicitud REST devuelve el c√≥digo 500, el frente que ya est√° en el momento de procesar la respuesta sabr√° qu√© algoritmo debe procesar.  Adem√°s, la esencia del asunto no cambiar√° de ninguna manera, no ha recibido nada sensato ni de 200 ni de 500. Pero de 500 recibi√≥ un beneficio: la constataci√≥n de que se trata de un error INESPERADO. </li><li>  El c√≥digo 500 vendr√° con una garant√≠a.  No importa cu√°n malo o bueno haya escrito su c√≥digo.  Este es tu punto de apoyo. </li></ol><br>  Por separado, clavar√© un clavo en todo el "cuerpo" del c√≥digo 200: <br><br>  7. Incluso si se esfuerza por evitar otros c√≥digos de respuesta del servidor que no sean 200 a sus solicitudes, no puede hacer esto.  Cualquier servidor intermediario puede responder a su solicitud con absolutamente cualquier c√≥digo.  Y DEBE procesar dicha respuesta correctamente. <br><br>  Total, a nivel l√≥gico, la lucha por el c√≥digo 200 no tiene sentido. <br><br>  Ahora volvamos al nivel de infraestructura.  Muy a menudo escucho la opini√≥n: el c√≥digo 5xx no es un nivel de aplicaci√≥n, no se le puede dar respaldo.  Ejem, bueno ... hay una contradicci√≥n en la declaraci√≥n misma.  Puedes dar.  Pero este c√≥digo no es un nivel de aplicaci√≥n.  Eso es mas cierto.  Para entender esto, propongo considerar el caso: <br><blockquote>  Est√°s implementando una puerta de enlace.  Tiene varios DC, cada uno con su propio canal de comunicaci√≥n a un determinado servicio privado.  Bueno, por ejemplo, para pagar a trav√©s de VPN.  Y hay un canal de comunicaci√≥n con Internet.  Recibe una solicitud para una operaci√≥n con una puerta de enlace, pero ... el servicio no est√° disponible. </blockquote>  ¬øY qu√© deber√≠as responder?  A quien?  Este es un problema de infraestructura y, espec√≠ficamente, la copia de seguridad se top√≥ con √©l.  Por supuesto, debe responder con audacia al 503. Estas acciones llevar√°n al hecho de que el equilibrador deshabilitar√° el nodo durante alg√∫n tiempo.  Al mismo tiempo, el equilibrador, si est√° configurado correctamente, sin interrumpir la conexi√≥n con el cliente, enviar√° la solicitud a otro nodo.  Y ... el cliente final, con un alto grado de probabilidad, recibi√≥ 200. Y no una descripci√≥n personalizada del error, que no lo ayudar√° de ninguna manera. <br><br><h2>  D√≥nde y qu√© c√≥digo usar </h2><br>  La pregunta no es simple.  No hay una respuesta definitiva para ello.  Para cada sistema, se dise√±a una capa de transporte y los c√≥digos que contiene pueden ser espec√≠ficos. <br><br>  Hay est√°ndares aceptados.  Se pueden encontrar f√°cilmente y, nuevamente, no dar√© pruebas obvias.  Pero, le dar√© lo que no es obvio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developer.mozilla.org/en/docs/Web/HTTP/Status</a> <br>  Por que el  La cuesti√≥n es que los manejadores de c√≥digo pueden comportarse de manera diferente, dependiendo de la implementaci√≥n y el contexto de "comprender el c√≥digo".  Por ejemplo, los navegadores tienen una estrategia de almacenamiento en cach√© basada en c√≥digos de respuesta.  Y algunos servicios tienen sus propios c√≥digos personalizados.  Por ejemplo, CloudFlare. <br><br>  Es decir  Para tomar decisiones sobre el uso de c√≥digos, debe basarse en todos los elementos incluidos en la capa de transporte desde su c√≥digo en la parte posterior hasta el c√≥digo en el cliente.  Esta es la √∫nica forma de encontrar las respuestas correctas.  Ni siquiera intentar√© darles a todos una p√≠ldora universal aqu√≠. <br><br><h2>  Ra√≠ces del mal </h2><br>  Este es el tercer proyecto al que llego sufre del c√≥digo 200 en REST.  Es sufrimiento  No hay otra palabra  Si lees cuidadosamente todo hasta el momento actual, ya entiendes que tan pronto como el proyecto comience a crecer, tiene una necesidad de desarrollo de infraestructura, para su sostenibilidad.  El c√≥digo 200 mata todos estos intentos de ra√≠z.  Y lo primero que tienes que hacer es romper los estereotipos. <br><br>  La ra√≠z del mal, me parece, radica en el hecho de que el c√≥digo 500 es lo primero que un desarrollador web encuentra en su carrera profesional.  Se puede decir una lesi√≥n infantil.  Y todos sus esfuerzos al principio se redujeron a obtener el c√≥digo 200. <br><br>  Por cierto, por alguna raz√≥n, en la misma etapa, se desarrolla una fuerte opini√≥n de que solo las respuestas con el c√≥digo 200 se pueden suministrar con un cuerpo.  Por supuesto, esto no es as√≠, y cualquier respuesta puede "venir" con cualquier c√≥digo.  El c√≥digo es un c√≥digo.  El cuerpo es el cuerpo. <br><br>  Adem√°s, con el desarrollo del desarrollador, necesita gestionar los errores de su propia aplicaci√≥n.  Pero ..., √©l no sabe c√≥mo usar los registros.  No se puede configurar el servidor web.  El esta estudiando.  Y esos muy "grandes" nacen.  Porque est√°n disponibles para √©l y √©l puede hacerlos r√°pidamente.  Adem√°s, en este "gran" monta nuevas ruedas, fortalece el cuadro, etc.  Y este gran se convierte en su compa√±ero durante un per√≠odo de tiempo suficientemente largo, hasta ... hasta que tenga tareas realmente complejas y de m√∫ltiples componentes.  Y aqu√≠, como dicen, est√° prohibida la entrada al supermercado con el "gran" y el patinaje sobre ruedas. <br><br>  PD: El autor del art√≠culo mencionado lo restaur√≥ de los borradores: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habr.com/en/post/440382</a> , para que tambi√©n pueda familiarizarse con √©l. <br><br>  PPS: Trat√© de expresar todas las facetas de la necesidad de usar c√≥digos de respuesta relevantes en REST.  No responder√© a los comentarios, por favor, enti√©ndeme correctamente.  Los leer√© con gran atenci√≥n, pero no tengo nada que agregar.  ¬°Muchas gracias por ser lo suficientemente paciente como para leer el art√≠culo! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440900/">https://habr.com/ru/post/440900/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440890/index.html">Patriotismo en juegos de computadora: la opini√≥n de un ex jugador</a></li>
<li><a href="../440892/index.html">La eficiencia inesperada de las secuencias cuasialeatorias</a></li>
<li><a href="../440894/index.html">Dise√±o de sonido para Pathfinder: Kingmaker</a></li>
<li><a href="../440896/index.html">Tecnolog√≠as aditivas y escaneo 3D en ingenier√≠a mec√°nica: 7 historias de √©xito</a></li>
<li><a href="../440898/index.html">Marketing de contenidos, publicidad contextual, mejora de la conversi√≥n: 6 gu√≠as √∫tiles de promoci√≥n de inicio</a></li>
<li><a href="../440902/index.html">La mitad del reino para la IA: cu√°nto ahorran los bancos en aprendizaje autom√°tico, redes neuronales y bots de chat</a></li>
<li><a href="../440904/index.html">Comparaci√≥n de las arquitecturas Viper y MVVM: c√≥mo aplicar ambas</a></li>
<li><a href="../440906/index.html">Seminario web "167-–§–ó. C√≥mo los bancos pueden cumplir los requisitos del Banco Central para los sistemas antifraude ‚Äù- 26 de febrero de 2019, 11:00 hora de Mosc√∫</a></li>
<li><a href="../440908/index.html">Servir todo</a></li>
<li><a href="../440910/index.html">¬øPor qu√© los bancos monopolizan blockchain?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>