<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìò üèïÔ∏è ‚ôêÔ∏è Was ich durch Testen von 200.000 Zeilen Infrastrukturcode gelernt habe ‚ûï üßúüèª üï§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der IaC-Ansatz (Infrastructure as Code) besteht nicht nur aus dem im Repository gespeicherten Code, sondern auch aus den Personen und Prozessen, die d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was ich durch Testen von 200.000 Zeilen Infrastrukturcode gelernt habe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467171/"><p><img src="https://habrastorage.org/webt/j2/pp/6q/j2pp6qs2f6qjrz5pn35wuzd0luk.png"></p><br><p>  Der <strong>IaC-Ansatz</strong> (Infrastructure as Code) besteht nicht nur aus dem im Repository gespeicherten Code, sondern auch aus den Personen und Prozessen, die diesen Code umgeben.  Ist es m√∂glich, Ans√§tze von der Softwareentwicklung bis zur Verwaltung und Beschreibung der Infrastruktur wiederzuverwenden?  Es ist nicht √ºberfl√ºssig, diese Idee beim Lesen des Artikels zu ber√ºcksichtigen. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Russische Version</a> </p><a name="habracut"></a><br><p>  Dies ist eine Abschrift meiner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Leistung</a> bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DevopsConf 2019-05-28</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Folien und Videos</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Russische Version</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Russische Version</a> </li><li>  Trockenlauf 2019-04-24 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SpbLUG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video (RU) von DevopsConf 2019-05-28</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video (RU) von DINS DevOps EVENING 2019-06-20</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Folien</a> </li></ul></div></div><br><h1 id="infrastructure-as-bash-history">  Infrastruktur als Bash-Geschichte </h1><br><p><img src="https://habrastorage.org/webt/i_/yl/fm/i_ylfms8w-9pgisnujlu-iv1u3y.png"></p><br><p>  Angenommen, Sie kommen zu einem neuen Projekt und sie sagen Ihnen: "Wir haben <em>Infrastruktur als Code</em> ."  In Wirklichkeit stellt sich heraus, <em>Infrastruktur als Bash-Verlauf</em> oder zum Beispiel <em>Dokumentation als Bash-Verlauf</em> .  Dies ist eine sehr reale Situation, zum Beispiel wurde ein √§hnlicher Fall von Denis Lysenko in seiner Rede beschrieben. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie man die gesamte Infrastruktur ersetzt und friedlich zu schlafen beginnt</a> , erz√§hlte er, wie sie aus der Bash-Geschichte eine schlanke Infrastruktur f√ºr das Projekt bekommen haben. </p><br><p>  Wenn Sie m√∂chten, k√∂nnen Sie sagen, dass <em>Infrastruktur als Bash-Verlauf</em> wie Code ist: </p><br><ol><li>  <em>Reproduzierbarkeit</em> : Sie k√∂nnen den Bash-Verlauf aufnehmen und Befehle von dort ausf√ºhren. Vielleicht erhalten Sie √ºbrigens eine funktionierende Konfiguration am Ausgang. </li><li>  <em>versionierung</em> : Sie wissen, wer hereingekommen ist und was wiederum getan hat, nicht die Tatsache, dass dies zu einer funktionierenden Konfiguration der Ausgabe f√ºhrt. </li><li>  <em>Geschichte</em> : Geschichte, wer was getan hat.  Nur Sie k√∂nnen es nicht verwenden, wenn Sie den Server verlieren. </li></ol><br><p>  Was tun? </p><br><h1 id="infrastructure-as-code">  Infrastruktur als Code </h1><br><p><img src="https://habrastorage.org/webt/gm/3e/wf/gm3ewf7g3w72takvuffsxhcbgoy.png"></p><br><p>  Selbst ein so seltsamer Fall wie <em>Infrastruktur als Bash-Verlauf</em> kann von <em>Infrastruktur als Code in</em> die Ohren gezogen werden. Wenn wir jedoch etwas Komplizierteres als den guten alten LAMP-Server tun m√∂chten, werden wir zu dem Schluss kommen, dass dieser Code irgendwie modifiziert, modifiziert, modifiziert werden muss .  Dar√ºber hinaus m√∂chten wir Parallelen zwischen <em>Infrastruktur als Code</em> und Softwareentwicklung betrachten. </p><br><h2 id="dry">  TROCKEN </h2><br><p><img src="https://habrastorage.org/webt/rx/qa/vf/rxqavfjxrtmtwkjzzq4prr72oao.png"></p><br><p>  Bei dem Projekt zur Entwicklung von Speichersystemen gab es eine Unteraufgabe zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">regelm√§√üigen Konfiguration von SDS</a> : Wir ver√∂ffentlichen eine neue Version - sie muss f√ºr weitere Tests eingef√ºhrt werden.  Die Aufgabe ist sehr einfach: </p><br><ul><li>  Komm her von ssh und f√ºhre den Befehl aus. </li><li>  Kopieren Sie die Datei dort. </li><li>  Hier ist die Optimierung der Konfiguration. </li><li>  Starten Sie den Dienst dort </li><li>  ... </li><li>  GEWINN! </li></ul><br><p>  Bash ist mehr als genug f√ºr die beschriebene Logik, insbesondere in den fr√ºhen Phasen eines Projekts, wenn es gerade erst beginnt.  Es ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht schlecht, dass Sie Bash verwenden</a> , aber im Laufe der Zeit werden Sie aufgefordert, etwas √Ñhnliches, aber etwas anderes bereitzustellen.  Das erste, was mir in den Sinn kommt: Kopieren und Einf√ºgen.  Und jetzt haben wir zwei sehr √§hnliche Skripte, die fast dasselbe tun.  Im Laufe der Zeit hat die Anzahl der Skripte zugenommen, und wir sind mit der Tatsache konfrontiert, dass es eine Art Gesch√§ftslogik f√ºr die Bereitstellung der Installation gibt, die zwischen verschiedenen Skripten synchronisiert werden muss. Dies ist ziemlich schwierig. </p><br><p><img src="https://habrastorage.org/webt/-u/ep/cv/-uepcvi1kjsnruflehy0noydk1k.png"></p><br><p>  Es stellt sich heraus, dass es eine solche Praxis gibt. TROCKEN (Wiederholen Sie sich nicht).  Die Idee ist, vorhandenen Code wiederzuverwenden.  Es klingt einfach, ist aber nicht sofort dazu gekommen.  In unserem Fall war es eine allt√§gliche Idee: Konfigurationen von Skripten zu trennen.  Das hei√üt,  Gesch√§ftslogik, wie die Installation separat bereitgestellt wird, wird separat konfiguriert. </p><br><h2 id="solid-for-cfm">  FEST f√ºr CFM </h2><br><p><img src="https://habrastorage.org/webt/kt/7f/ba/kt7fbazyy0arjwrnlwgoynqbvqg.png"></p><br><p>  Im Laufe der Zeit wuchs das Projekt und eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nat√ºrliche Erweiterung</a> war die Entstehung von Ansible.  Der Hauptgrund f√ºr sein Auftreten ist das Vorhandensein von Fachwissen im Team und diese Bash ist nicht f√ºr komplexe Logik gedacht.  Ansible begann auch komplexe Logik zu enthalten.  Damit sich komplexe Logik nicht in Chaos verwandelt, gibt es Grunds√§tze f√ºr die Organisation von <em>SOLID-</em> Code in der Softwareentwicklung. Beispielsweise stellte Grigory Petrov in seinem Bericht ‚ÄûWarum braucht IT eine pers√∂nliche Marke <em>?</em> ‚Äú Die Frage, dass eine Person so konzipiert ist, dass es einfacher ist, mit einigen zu arbeiten soziale Einheiten, in der Softwareentwicklung sind dies Objekte.  Wenn Sie diese beiden Ideen kombinieren und weiterentwickeln, werden Sie feststellen, dass Sie <em>SOLID auch</em> in der Beschreibung der Infrastruktur verwenden k√∂nnen, damit diese Logik in Zukunft leichter gewartet und <em>ge√§ndert</em> werden kann. </p><br><h3 id="the-single-responsibility-principle">  Das Prinzip der Einzelverantwortung </h3><br><p><img src="https://habrastorage.org/webt/yh/h7/kg/yhh7kgr1jal27ddvpeydqxcmzog.png"></p><br><p>  <em>Jede Klasse f√ºhrt nur eine Aufgabe aus.</em> </p><br><p>  Keine Notwendigkeit, Code zu mischen und monolithische g√∂ttliche Pasta-Monster herzustellen.  Die Infrastruktur sollte aus einfachen Bausteinen bestehen.  Es stellt sich heraus, dass wenn Sie Ansible-Playbooks in kleine Teile aufteilen und Ansible-Rollen lesen, diese einfacher zu warten sind. </p><br><h3 id="the-open-closed-principle">  Die offenen geschlossenen Prinzipien </h3><br><p><img src="https://habrastorage.org/webt/g6/ym/qn/g6ymqn8vohwbewqx7hgixuiuuf8.png"></p><br><p>  <em>Das Prinzip der Offenheit / N√§he.</em> </p><br><ul><li>  <em>Zur Erweiterung √∂ffnen: bedeutet, dass das Verhalten einer Entit√§t durch Erstellen neuer Entit√§tstypen erweitert werden kann.</em> </li><li>  <em>Wegen √Ñnderung geschlossen: Aufgrund der Erweiterung des Verhaltens einer Entit√§t sollten keine √Ñnderungen am Code vorgenommen werden, der diese Entit√§ten verwendet.</em> </li></ul><br><p>  Urspr√ºnglich haben wir die Testinfrastruktur auf virtuellen Maschinen bereitgestellt. Aufgrund der Tatsache, dass die Gesch√§ftsbereitstellungslogik von der Implementierung getrennt war, haben wir Bare-Metall problemlos um ein Rolling erweitert. </p><br><h3 id="the-liskov-substitution-principle">  Das Liskov-Substitutionsprinzip </h3><br><p><img src="https://habrastorage.org/webt/1x/-4/am/1x-4am1tjecrhxx3jm7bfur00oy.png"></p><br><p>  <em>Das Substitutionsprinzip von Barbara Liskov.</em>  <em>Objekte im Programm m√ºssen durch Instanzen ihrer Untertypen ersetzt werden k√∂nnen, ohne die Richtigkeit des Programms zu √§ndern</em> </p><br><p>  Wenn Sie allgemeiner schauen, ist es keine Funktion eines bestimmten Projekts, dass Sie <em>SOLID</em> anwenden <em>k√∂nnen</em> . Es geht im Allgemeinen um CFM. Beispielsweise m√ºssen Sie in einem anderen Projekt eine Java-Box-Anwendung auf verschiedenen Java-, Anwendungsservern, Datenbanken, Betriebssystemen usw. bereitstellen.  In diesem Beispiel werde ich weitere <em>SOLID-</em> Prinzipien betrachten. </p><br><p>  In unserem Fall besteht als Teil des Infrastrukturteams eine Vereinbarung, dass wir eine bin√§re ausf√ºhrbare Java-Datei haben, wenn wir die Rolle von Imbjava oder Orakeljava installiert haben.  Dies ist notwendig, weil  H√∂here Rollen h√§ngen von diesem Verhalten ab und erwarten, dass Java vorhanden ist.  Gleichzeitig k√∂nnen wir so eine Implementierung / Version von Java durch eine andere ersetzen, ohne die Anwendungsbereitstellungslogik zu √§ndern. </p><br><p>  Das Problem liegt hier in der Tatsache, dass es in Ansible unm√∂glich ist, solche zu implementieren, so dass einige Vereinbarungen innerhalb des Teams erscheinen. </p><br><h3 id="the-interface-segregation-principle">  Das Prinzip der Schnittstellentrennung </h3><br><p><img src="https://habrastorage.org/webt/v2/9r/wa/v29rwalnqryarhrwe-_r8jvx0go.png"></p><br><p>  <em>Das Prinzip der Schnittstellentrennung ‚ÄûViele speziell f√ºr Kunden entwickelte Schnittstellen sind besser als eine einzige Allzweckschnittstelle.</em> </p><br><p>  Anfangs haben wir versucht, alle Variationen bei der Bereitstellung der Anwendung in einem Ansible-Playbook zusammenzufassen, aber es war schwierig zu unterst√ºtzen, und der Ansatz, wenn wir eine Schnittstelle haben (der Client erwartet Port 443), wird angegeben. F√ºr eine bestimmte Implementierung k√∂nnen Sie die Infrastruktur aus separaten Bausteinen erstellen. </p><br><h3 id="the-dependency-inversion-principle">  Das Prinzip der Abh√§ngigkeitsinversion </h3><br><p><img src="https://habrastorage.org/webt/ee/ip/e8/eeipe8nr7hbjx18yxtoxsekwlfy.png"></p><br><p>  <em>Das Prinzip der Abh√§ngigkeitsinversion.</em>  <em>Module der oberen Ebene sollten nicht von Modulen der unteren Ebene abh√§ngen.</em>  <em>Beide Modultypen sollten von Abstraktionen abh√§ngen.</em>  <em>Abstraktionen sollten nicht von den Details abh√§ngen.</em>  <em>Details sollten von Abstraktionen abh√§ngen.</em> </p><br><p>  Hier basiert das Beispiel auf Antipattern. </p><br><ol><li>  Einer der Kunden hatte eine private Cloud. </li><li>  Innerhalb der Cloud haben wir virtuelle Maschinen bestellt. </li><li>  Angesichts der Funktionen der Cloud war die Bereitstellung der Anwendung jedoch an den Hypervisor gebunden, auf dem sich die VM befand. </li></ol><br><p>  Das hei√üt,  √úbergeordnete Anwendungsbereitstellungslogik, Abh√§ngigkeiten flossen auf die unteren Ebenen des Hypervisors, und dies bedeutete Probleme bei der Wiederverwendung dieser Logik.  <em><strong>Nicht so.</strong></em> </p><br><h1 id="interaction">  Interaktion </h1><br><p><img src="https://habrastorage.org/webt/rd/7_/8r/rd7_8rtprcz4xjkuhctjppbkcuu.png"></p><br><p>  Bei der Infrastruktur als Code geht es nicht nur um Code, sondern auch um die Beziehung zwischen Code und einer Person, um Interaktionen zwischen Entwicklern der Infrastruktur. </p><br><h2 id="bus-factor">  Busfaktor </h2><br><p><img src="https://habrastorage.org/webt/p5/4-/wh/p54-whkhcglorvk_dlt0b1jpajy.png"></p><br><p>  Angenommen, Sie haben Vasya im Projekt.  Vasya wei√ü alles √ºber Ihre Infrastruktur. Was passiert, wenn Vasya pl√∂tzlich verschwindet?  Dies ist eine sehr reale Situation, da sie von einem Bus angefahren werden kann.  Manchmal passiert das.  Wenn dies geschieht und das Wissen √ºber den Code, seine Struktur, seine Funktionsweise, Erscheinungsbilder und Kennw√∂rter nicht im Team verteilt wird, kann es zu einer Reihe unangenehmer Situationen kommen.  Verschiedene Ans√§tze k√∂nnen verwendet werden, um diese Risiken zu minimieren und Wissen innerhalb des Teams zu verteilen. </p><br><h2 id="pair-devopsing">  Paar devopsing </h2><br><p><img src="https://habrastorage.org/webt/6q/0l/t0/6q0lt0afzbkpivxxp4uvryxgake.png"></p><br><p>  Es ist nicht wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein Witz,</a> dass Administratoren Bier tranken, Passw√∂rter √§nderten, sondern ein Analogon der Paarprogrammierung.  Das hei√üt,  Zwei Ingenieure setzen sich an einen Computer und eine Tastatur und beginnen gemeinsam mit der Konfiguration Ihrer Infrastruktur: Konfigurieren Sie den Server, schreiben Sie die Ansible-Rolle usw.  Es h√∂rt sich gut an, hat aber bei uns nicht funktioniert.  Aber die Sonderf√§lle dieser Praxis haben funktioniert.  Ein neuer Mitarbeiter ist gekommen, sein Mentor nimmt eine echte Aufgabe mit sich, arbeitet, √ºbertr√§gt Wissen. </p><br><p>  Ein weiterer Sonderfall ist ein Incident Call.  W√§hrend des Problems versammelt sich eine Gruppe von diensthabenden und beteiligten Personen, ein F√ºhrer wird ernannt, der seinen Bildschirm teilt und den Gedankengang √§u√üert.  Andere Teilnehmer folgen den Gedanken des Leiters, spionieren Tricks von der Konsole aus aus, √ºberpr√ºfen, ob sie keine Zeile im Protokoll verpasst haben, und lernen neue Dinge √ºber das System.  Dieser Ansatz hat eher funktioniert als nicht. </p><br><h2 id="code-review">  Code√ºberpr√ºfung </h2><br><p><img src="https://habrastorage.org/webt/wk/u6/vn/wku6vntzzsquckgu58n1_r3tg-i.png"></p><br><p>  Subjektiv und effizienter wurde die Verbreitung von Wissen √ºber die Infrastruktur und deren Organisation mithilfe der Code√ºberpr√ºfung durchgef√ºhrt: </p><br><ul><li>  Die Infrastruktur wird durch Code im Repository beschrieben. </li><li>  √Ñnderungen treten in einem separaten Zweig auf. </li><li>  Mit einer Zusammenf√ºhrungsanforderung k√∂nnen Sie das Delta der √Ñnderungen in der Infrastruktur sehen. </li></ul><br><p>  Das Highlight hier war, dass die Gutachter der Reihe nach gem√§√ü dem Zeitplan ausgew√§hlt wurden, d. H.  Mit einiger Wahrscheinlichkeit werden Sie in eine neue Infrastruktur einsteigen. </p><br><h3 id="code-style">  Codestil </h3><br><p><img src="https://habrastorage.org/webt/qa/fz/ju/qafzju1vc86llmvcc1m4urpfa7c.png"></p><br><p>  Im Laufe der Zeit traten w√§hrend der √úberpr√ºfung Streitigkeiten auf, als  Die Rezensenten hatten ihren eigenen Stil und ihre Rotationsf√§higkeit. Die Rezensenten stapelten sie mit verschiedenen Stilen: 2 Leerzeichen oder 4, camelCase oder snake_case.  Die Implementierung funktionierte nicht sofort. </p><br><ul><li>  Die erste Idee war, die Verwendung von Linter zu empfehlen, weil alle die gleichen Ingenieure, alle klug.  Aber verschiedene Editoren, Betriebssystem, nicht bequem </li><li>  Dies entwickelte sich zu einem Bot, der f√ºr jedes Commit Commit auf das Problem in Slack schrieb und die Ausgabe von Linter anwendete.  In den meisten F√§llen wurden jedoch wichtigere Angelegenheiten gefunden, und der Code blieb nicht festgelegt. </li></ul><br><h3 id="green-build-master">  Gr√ºner Baumeister </h3><br><p><img src="https://habrastorage.org/webt/lw/ow/xi/lwowxis0izoohgthm9db7nheih4.png"></p><br><p>  Die Zeit vergeht und wir kamen zu dem Schluss, dass Sie keine Commits zulassen sollten, die bestimmte Tests nicht an den Master weitergeben.  Voila!  Wir haben den Green Build Master erfunden, der seit langem in der Softwareentwicklung praktiziert wird: </p><br><ul><li>  Die Entwicklung erfolgt in einem separaten Zweig. </li><li>  Tests werden f√ºr diesen Thread ausgef√ºhrt. </li><li>  Wenn die Tests fehlschlagen, gelangt der Code nicht in den Assistenten. </li></ul><br><p>  Diese Entscheidung zu treffen war sehr schmerzhaft, weil  verursachte viele Kontroversen, aber es hat sich gelohnt, weil  Antr√§ge auf Fusionen kamen ohne Meinungsverschiedenheiten in die √úberpr√ºfung, und im Laufe der Zeit nahm die Anzahl der Problembereiche ab. </p><br><h1 id="iac-testing">  IaC-Tests </h1><br><p><img src="https://habrastorage.org/webt/ah/dg/sa/ahdgsaecxtevlwnv9ozcoiypkq8.png"></p><br><p>  Neben der Stilpr√ºfung k√∂nnen Sie auch andere Dinge verwenden, um beispielsweise zu √ºberpr√ºfen, ob Ihre Infrastruktur wirklich bereitgestellt werden kann.  Oder pr√ºfen Sie, ob √Ñnderungen in der Infrastruktur nicht zu Geldverlusten f√ºhren.  Warum k√∂nnte dies erforderlich sein?  Die Frage ist komplex und philosophisch. Es ist besser, sie mit der Geschichte zu beantworten, dass es auf Powershell einen Auto-Scaler gab, der die Randbedingungen nicht √ºberpr√ºfte =&gt; Es wurden mehr VMs erstellt als erforderlich =&gt; Der Kunde gab mehr Geld aus als geplant.  Es ist nicht angenehm genug, aber es w√§re ziemlich realistisch, diesen Fehler in fr√ºheren Stadien zu erkennen. </p><br><p>  Man k√∂nnte sich fragen, warum komplexe Infrastrukturen noch schwieriger werden.  Bei Tests f√ºr die Infrastruktur sowie f√ºr den Code geht es nicht um Vereinfachung, sondern darum zu wissen, wie Ihre Infrastruktur funktionieren sollte. </p><br><h2 id="iac-testing-pyramid">  IaC-Testpyramide </h2><br><p><img src="https://habrastorage.org/webt/pn/98/jt/pn98jtnydc1wupw_jvifjjc9mpc.png"></p><br><h3 id="iac-testing-static-analysis">  IaC-Test: Statische Analyse </h3><br><p>  Wenn Sie sofort die gesamte Infrastruktur bereitstellen und √ºberpr√ºfen, ob sie funktioniert, kann sich herausstellen, dass dies viel Zeit in Anspruch nimmt und viel Zeit erfordert.  Daher sollte die Basis etwas sein, das schnell funktioniert, es ist viel und es deckt viele primitive Orte ab. </p><br><h4 id="bash-is-tricky">  Bash ist schwierig </h4><br><p>  Hier ist ein triviales Beispiel.  W√§hlen Sie alle Dateien im aktuellen Verzeichnis aus und kopieren Sie sie an einen anderen Speicherort.  Das erste, was mir in den Sinn kommt: </p><br><pre><code class="plaintext hljs">for i in * ; do cp $i /some/path/$i.bak done</code> </pre> <br><p>  Was aber, wenn der Dateiname ein Leerzeichen enth√§lt?  Na gut, wir sind schlau, wir k√∂nnen Anf√ºhrungszeichen verwenden: </p><br><pre> <code class="plaintext hljs">for i in * ; do cp "$i" "/some/path/$i.bak" ; done</code> </pre> <br><p>  Gut gemacht?  Nein!  Was ist, wenn sich nichts im Verzeichnis befindet, d. H.  Globbing wird nicht funktionieren. </p><br><pre> <code class="plaintext hljs">find . -type f -exec mv -v {} dst/{}.bak \;</code> </pre> <br><p>  Jetzt gut gemacht?  nicht ... Ich habe vergessen, dass der Dateiname <code>\n</code> . </p><br><pre> <code class="plaintext hljs">touch x mv x "$(printf "foo\nbar")" find . -type f -print0 | xargs -0 mv -t /path/to/target-dir</code> </pre> <br><h4 id="static-analysis-tools">  Statische Analysewerkzeuge </h4><br><p>  Das Problem aus dem vorherigen Schritt k√∂nnte auftreten, wenn wir die Anf√ºhrungszeichen vergessen haben. Daf√ºr gibt es in der Natur viele <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Shellcheck-Tools</a> , viele davon, und h√∂chstwahrscheinlich finden Sie unter Ihrer IDE einen Liner f√ºr Ihren Stack. </p><br><div class="scrollable-table"><table><thead><tr><th>  Sprache </th><th>  Werkzeug </th></tr></thead><tbody><tr><td>  Bash </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Shellcheck</a> </td></tr><tr><td>  Ruby </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rubocop</a> </td></tr><tr><td>  Python </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pylint</a> </td></tr><tr><td>  ansible </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ansible Flusen</a> </td></tr></tbody></table></div><br><h3 id="iac-testing-unit-tests">  IaC-Tests: Unit-Tests </h3><br><p><img src="https://habrastorage.org/webt/pn/wx/av/pnwxavylqxfmvcc-oynjhjmsq-a.png"></p><br><p>  Wie wir im vorherigen Beispiel gesehen haben, ist Linter nicht allm√§chtig und kann nicht auf alle Problembereiche verweisen.  In Analogie zu Tests in der Softwareentwicklung k√∂nnen wir uns au√üerdem an Unit-Tests erinnern.  Dann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kommen</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mir</a> sofort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Shunit</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Junit</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rspec</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pytest</a> in den Sinn.  Aber was tun mit Ansible, Chef, Saltstack und anderen wie ihnen? </p><br><p>  Ganz am Anfang haben wir √ºber <em>SOLID</em> und die Tatsache gesprochen, dass unsere Infrastruktur aus kleinen Bausteinen bestehen sollte.  Ihre Zeit ist gekommen. </p><br><ol><li>  Die Infrastruktur wird in kleine Bausteine ‚Äã‚Äãzerlegt, z. B. Ansible-Rollen. </li><li>  Es entwickelt sich eine Art Umgebung, sei es Docker oder VM. </li><li>  Wir wenden unsere Ansible-Rolle auf diese Testumgebung an. </li><li>  Wir √ºberpr√ºfen, ob alles wie erwartet funktioniert hat (f√ºhren Sie die Tests durch). </li><li>  Wir entscheiden ok oder nicht ok. </li></ol><br><h4 id="iac-testing-unit-testing-tools">  IaC-Test: Unit-Testing-Tools </h4><br><p>  Die Frage ist, was sind Tests f√ºr CFM?  Sie k√∂nnen das Skript kitschig ausf√ºhren oder daf√ºr vorgefertigte L√∂sungen verwenden: </p><br><div class="scrollable-table"><table><thead><tr><th>  CFM </th><th>  Werkzeug </th></tr></thead><tbody><tr><td>  Ansible </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testinfra</a> </td></tr><tr><td>  K√ºchenchef </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inspec</a> </td></tr><tr><td>  K√ºchenchef </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Serverspez</a> </td></tr><tr><td>  Salzstapel </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Goss</a> </td></tr></tbody></table></div><br><p>  Beispiel f√ºr testinfra: Wir √ºberpr√ºfen, ob die Benutzer <code>test1</code> , <code>test2</code> vorhanden sind und sich in der Gruppe <code>sshusers</code> : </p><br><pre> <code class="plaintext hljs">def test_default_users(host): users = ['test1', 'test2' ] for login in users: assert host.user(login).exists assert 'sshusers' in host.user(login).groups</code> </pre> <br><p>  Was soll ich w√§hlen?  Die Frage ist komplex und mehrdeutig. Hier ist ein Beispiel f√ºr eine √Ñnderung der Projekte auf Github f√ºr 2018-2019: </p><br><p><img src="https://habrastorage.org/webt/aj/vm/0w/ajvm0wr0cno5a0kchi0z-jwyyxy.png"></p><br><h4 id="iac-testing-frameworks">  IaC-Test-Frameworks </h4><br><p>  Wie kann man alles zusammenf√ºgen und rennen?  Sie k√∂nnen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">alles selbst √ºbernehmen,</a> wenn Sie √ºber eine ausreichende Anzahl von Ingenieuren verf√ºgen.  Und Sie k√∂nnen vorgefertigte L√∂sungen w√§hlen, obwohl es nicht sehr viele davon gibt: </p><br><div class="scrollable-table"><table><thead><tr><th>  CFM </th><th>  Werkzeug </th></tr></thead><tbody><tr><td>  Ansible </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Molek√ºl</a> </td></tr><tr><td>  K√ºchenchef </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">K√ºche testen</a> </td></tr><tr><td>  Terraform </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schrecklichste</a> </td></tr></tbody></table></div><br><p>  Ein Beispiel f√ºr eine √Ñnderung der Projekte auf Github f√ºr 2018-2019: </p><br><p><img src="https://habrastorage.org/webt/bj/lb/02/bjlb02mi6tympyzdjjxef3_8bhq.png"></p><br><h4 id="molecule-vs-testkitchen">  Molek√ºl vs.  Testk√ºche </h4><br><p><img src="https://habrastorage.org/webt/vx/2e/dt/vx2edtvvuquxyw-4yf81zmk6s9c.png"></p><br><p>  Anfangs haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">versucht, testkitchen zu verwenden</a> : </p><br><ol><li>  Erstellen Sie parallel VMs. </li><li>  Wenden Sie Ansible Roles an. </li><li>  Fahren Sie die Inspektion weg. </li></ol><br><p>  Bei 25-35 Rollen funktionierte dies 40-70 Minuten, was eine lange Zeit war. </p><br><p><img src="https://habrastorage.org/webt/i-/9j/cl/i-9jclmr4x36ag1e8ppzk_d-_b0.png"></p><br><p>  Der n√§chste Schritt war der Wechsel zu Jenkins / Docker / Ansible / Molek√ºl.  Idiologisch ist alles gleich </p><br><ol><li>  Fusselspielb√ºcher. </li><li>  Rollen versch√ºtten. </li><li>  Container ausf√ºhren </li><li>  Wenden Sie Ansible Roles an. </li><li>  Testinfra wegfahren. </li><li>  √úberpr√ºfen Sie die Idempotenz. </li></ol><br><p><img src="https://habrastorage.org/webt/zz/je/kf/zzjekf-i8wckzdeslzlrbkmmxhg.png"></p><br><p>  Ein Lineal f√ºr 40 Rollen und Tests f√ºr ein Dutzend dauerte ungef√§hr 15 Minuten. </p><br><p><img src="https://habrastorage.org/webt/pn/6p/qe/pn6pqelxwb7dbaapkefv80ccxra.png"></p><br><p>  Die Auswahl h√§ngt von vielen Faktoren ab, wie dem verwendeten Stack, dem Fachwissen im Team usw.  Hier entscheidet jeder, wie das Thema Unit-Test geschlossen werden soll </p><br><h3 id="iac-testing-integration-tests">  IaC-Tests: Integrationstests </h3><br><p><img src="https://habrastorage.org/webt/yt/jf/br/ytjfbruwxfanxl15sxcfyg_gz1g.png"></p><br><p>  In der n√§chsten Phase der Pyramide der Infrastrukturtests werden Integrationstests angezeigt.  Sie √§hneln Unit-Tests: </p><br><ol><li>  Die Infrastruktur wird in kleine Bausteine ‚Äã‚Äãwie Ansible-Rollen zerlegt. </li><li>  Es entwickelt sich eine Art Umgebung, sei es Docker oder VM. </li><li>  Auf diese Testumgebung werden <strong>viele</strong> Ansible-Rollen angewendet. </li><li>  Wir √ºberpr√ºfen, ob alles wie erwartet funktioniert hat (f√ºhren Sie die Tests durch). </li><li>  Wir entscheiden ok oder nicht ok. </li></ol><br><p>  Grob gesagt √ºberpr√ºfen wir nicht die Funktionsf√§higkeit eines einzelnen Elements des Systems wie bei Komponententests, sondern die Konfiguration des Servers als Ganzes. </p><br><h3 id="iac-testing-end-to-end-tests">  IaC-Tests: End-to-End-Tests </h3><br><p><img src="https://habrastorage.org/webt/pn/98/jt/pn98jtnydc1wupw_jvifjjc9mpc.png"></p><br><p>  An der Spitze der Pyramide treffen wir auf End-to-End-Tests.  Das hei√üt,  Wir √ºberpr√ºfen nicht den Betrieb eines separaten Servers, eines separaten Skripts oder eines separaten Bausteins unserer Infrastruktur.  Wir √ºberpr√ºfen, ob viele Server miteinander kombiniert sind. Unsere Infrastruktur funktioniert wie erwartet.  Leider habe ich keine fertigen Box-L√∂sungen gesehen, wahrscheinlich weil  Die Infrastruktur ist oft einzigartig und schwer zu erstellen und ein Framework zum Testen zu erstellen.  Als Ergebnis erstellt jeder seine eigene L√∂sung.  Es gibt Nachfrage, aber keine Antwort.  Deshalb werde ich Ihnen sagen, was da ist, um andere dazu zu bewegen, Gedanken zu machen oder meine Nase zu stechen, dass alles lange vor uns erfunden wurde. </p><br><p><img src="https://habrastorage.org/webt/us/xz/rl/usxzrlzt8unudguhf9b89d83dfm.png"></p><br><p>  Ein Projekt mit einer reichen Geschichte.  Wird in gro√üen Organisationen verwendet und wahrscheinlich hat sich jeder von Ihnen indirekt √ºberschnitten.  Die Anwendung unterst√ºtzt viele Datenbanken, Integrationen usw. usw.  Zu wissen, wie die Infrastruktur so aussehen kann, besteht aus vielen Docker-Compose-Dateien, und zu wissen, welche Tests in welcher Umgebung ausgef√ºhrt werden sollen, ist Jenkins. </p><br><p><img src="https://habrastorage.org/webt/an/l2/ev/anl2ev_lxlsnegrxpulghdw9jxw.png"></p><br><p>  Dieses Schema hat lange funktioniert, bis wir im Rahmen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Studie</a> versucht haben, es auf Openshift zu √ºbertragen.  Die Container blieben gleich, aber die Startumgebung hat sich ge√§ndert (hallo wieder TROCKEN). </p><br><p><img src="https://habrastorage.org/webt/sh/sg/ud/shsgudbrhuqpazrpikcacxskzrm.png"></p><br><p>  Die Idee der Forschung ging weiter und in OpenShift gab es eine solche APB-Sache (Ansible Playbook Bundle), mit der Sie Wissen in einen Container packen k√∂nnen, wie die Infrastruktur bereitgestellt wird.  Das hei√üt,  Es gibt einen reproduzierbaren, √ºberpr√ºfbaren Wissenspunkt zur Bereitstellung der Infrastruktur. </p><br><p><img src="https://habrastorage.org/webt/l_/cw/ho/l_cwho8ftxhtnmuekhjlsfllctg.png"></p><br><p>  Das klang alles gut, bis wir uns in einer heterogenen Infrastruktur vergruben: Wir brauchten Windows f√ºr Tests.  Infolgedessen ist das Wissen dar√ºber, wo bereitgestellt und getestet werden soll, in Jenkins enthalten. </p><br><h1 id="conclusion">  Fazit </h1><br><p><img src="https://habrastorage.org/webt/j2/pp/6q/j2pp6qs2f6qjrz5pn35wuzd0luk.png"></p><br><p>  Infrastruktur wie Code ist </p><br><ul><li>  Der Code im Repository. </li><li>  Das Zusammenspiel von Menschen. </li><li>  Infrastrukturtests. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Links</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Englische Version</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cross-Post aus einem pers√∂nlichen Blog</a> </li><li>  Trockenlauf 2019-04-24 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SpbLUG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video (RU) von DevopsConf 2019-05-28</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video (RU) von DINS DevOps EVENING 2019-06-20</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lehren aus dem Schreiben von √ºber 300.000 Zeilen Infrastrukturcode-</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Textversion</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Integration der Infrastruktur als Code in eine Continuous Delivery-Pipeline</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testen der Infrastruktur als Code</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Effektive Entwicklung und Pflege von Ansible-Rollen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ansible ist nichts f√ºr dich!</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ansible idempotent</a> </li></ul></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467171/">https://habr.com/ru/post/de467171/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467155/index.html">Best Practices f√ºr Kubernetes-Container: Gesundheitschecks</a></li>
<li><a href="../de467161/index.html">Webanwendung auf Kotlin + Spring Boot + Vue.js</a></li>
<li><a href="../de467163/index.html">Dank Kubernetes und Automatisierung in zwei Stunden in die Cloud migrieren</a></li>
<li><a href="../de467165/index.html">Auf den Spuren der russischen Scala-Bewegung. Teil 2</a></li>
<li><a href="../de467169/index.html">Lehren aus dem Testen von √ºber 200.000 Zeilen Infrastrukturcode</a></li>
<li><a href="../de467173/index.html">Architekt sichere ERP-Implementierung</a></li>
<li><a href="../de467175/index.html">√úberlegen Sie zweimal, bevor Sie Game Engines verwenden</a></li>
<li><a href="../de467177/index.html">Tarantino Marketing-Tipps: Welche Rolle spielen die F√º√üe und warum machen Uma Thurman Seife</a></li>
<li><a href="../de467179/index.html">Samsung Compiler Bootcamp: Lehren Sie das Erstellen von "Programmierprogrammen"</a></li>
<li><a href="../de467181/index.html">Versuch, ein ASH-Analogon f√ºr PostgreSQL zu erstellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>