<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜🏼 📃 🕡 Questions et réponses sur JavaScript 🤰🏻 👿 💪🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Récemment, SmartSpate a décidé de collecter des questions sur JavaScript et d'y répondre. Le matériel, dont nous publions la traduction, contient un p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Questions et réponses sur JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/436454/">  Récemment, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SmartSpate a</a> décidé de collecter des questions sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript</a> et d'y répondre.  Le matériel, dont nous publions la traduction, contient un peu plus de deux douzaines de questions sur JavaScript et leurs réponses.  La gamme de sujets traités ici est assez large.  En particulier, il s'agit des fonctionnalités du langage, des problèmes rencontrés par les programmeurs lors de l'écriture de code JS, du travail dans le navigateur et dans Node.js. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/d8e/a96/0ab/d8ea960ab0540026291d5d0f5cf83712.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Question numéro 1.</font>  <font color="#3AC1EF">Héritage de prototype</font> </h2><br>  Je me suis habitué aux cours «classiques», mais j'ai décidé d'apprendre JavaScript.  J'ai un problème pour comprendre le modèle prototype.  Si possible, expliquez, sous forme de modèles, la possibilité de créer des «classes» en JavaScript, parlez-nous des méthodes et propriétés fermées et ouvertes des classes.  Je comprends que beaucoup de choses ont déjà été écrites à ce sujet et qu'en JavaScript, les méthodes et les propriétés des objets sont, par défaut, accessibles au public, mais j'aimerais bien comprendre tout cela.  Comment l'héritage de prototype fonctionne-t-il en JavaScript? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  L'héritage classique n'est pas sans rappeler la façon dont les gens héritent des gènes de leurs ancêtres.  Les gens ont des capacités de base communes, comme marcher et parler.  De plus, chaque personne a des particularités.  Les gens ne peuvent pas changer ce qu'on peut appeler leur «classe», mais ils peuvent changer leurs propres «propriétés» dans certaines limites.  Dans le même temps, les grands-parents, les mères et les pères ne peuvent pas influencer les gènes des enfants ou des petits-enfants au cours de leur vie.  Donc, tout est arrangé sur Terre, mais imaginons une autre planète sur laquelle les mécanismes d'héritage fonctionnent d'une manière spéciale.  Disons que certains organismes capables de mutations y utilisent les mécanismes de «transmission télépathique».  Cela s'exprime dans le fait qu'ils peuvent modifier les informations génétiques de leurs propres descendants au cours de leur vie. <br><br>  Prenons l'exemple de l'héritage sur cette étrange planète.  L'objet Père hérite des gènes de l'objet Grand-père et l'objet Fils hérite des informations génétiques du père.  Chaque habitant de cette planète peut librement muter et changer les gènes de ses descendants.  Par exemple, chez "Grand-père", la peau a une couleur verte.  Ce signe est hérité du «Père» et du «Fils».  Soudain, "Grand-père" décide qu'il est fatigué d'être vert.  Maintenant, il veut être bleu et change la couleur de sa peau (en termes de JS - change le prototype de sa classe), passant "télépathiquement" cette mutation au "Père" et au "Fils".  Après cela, le «père», croyant que le «grand-père» avait survécu à l'esprit, décide de changer ses gènes pour qu'il redevienne vert (c'est-à-dire qu'il change son propre prototype).  Ces changements sont "télépathiquement" transmis au "Fils".  En conséquence, le «Père» et le «Fils» ont à nouveau la peau verte.  Dans le même temps, "Grand-père" est toujours bleu.  Maintenant, peu importe ce qu'il fait avec sa couleur, cela n'affectera personne d'autre.  Et tout cela est dû au fait que le "Père" a explicitement défini la couleur de sa peau dans son "prototype", et le "Fils" hérite de cette couleur.  Puis le "Fils" pense de cette façon: "Je vais devenir noir.  Et que mes descendants héritent de la couleur de mon père. »  Pour ce faire, il modifie sa propre propriété (et non la propriété de son prototype) de telle manière que sa propriété affecterait sa couleur, mais n'affecterait pas ses descendants.  Nous exprimons tout cela sous forme de code: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Grandfather = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}; <span class="hljs-comment"><span class="hljs-comment">//  Grandfather Grandfather.prototype.color = 'green'; var Father = function () {}; //  Father Father.prototype = new Grandfather (); //  - ,        var Son = function () {}; //  Son Son.prototype = new Father (); // Son   Father var u = new Grandfather (); //   Grandfather var f = new Father (); //   Father var s = new Son (); //   Son //     console.log ([u.color, f.color, s.color]); // ["green", "green", "green"] //  Grandfather        Grandfather.prototype.color = 'blue'; console.log ([u.color, f.color, s.color]); // ["blue", "blue", "blue"] //  Father      -   ,     Father.prototype.color = 'green'; //      : // Grandfather.prototype.color = 'green'; console.log ([u.color, f.color, s.color]); // ["blue", "green", "green"] // ,        Grandfather     color,      Grandfather.prototype.color = 'blue'; console.log ([u.color, f.color, s.color]); // ["blue", "green", "green"] //  Son,  ,       Grandfather,    s.color = 'black'; //        console.log ([u.color, f.color, s.color]); // ["blue", "green", "black"] var SonsSon = function () {}; //  SonsSon -   Son SonsSon.prototype = new Son (); //  var ss = new SonsSon (); //   SonsSon //         console.log ([u.color, f.color, s.color, ss.color]); // ["blue", "green", "black", "green"]</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Question numéro 2.</font>  <font color="#3AC1EF">Créer des objets</font> </h2><br>  Si vous créez de nouvelles instances d'objets à l'aide du <code>new</code> mot clé, comment pouvez-vous vous protéger contre les erreurs?  Voici comment je travaille habituellement: <br><br><ol><li>  Je construis toujours des fonctions constructeurs pour qu'elles commencent par une majuscule. </li><li>  Je vérifie l'exactitude de l'opération en utilisant la construction <code>this instanceof Function_Name</code> (j'essaie de ne pas utiliser la construction du type <code>this instanceof arguments.callee</code> pour des raisons de performances). </li><li>  Cette approche est similaire à la précédente, mais la comparaison est faite avec <code>window</code> , car je n'aime pas coder en dur les noms des entités et je n'ai pas besoin d'écrire du code pour des environnements autres que le navigateur. </li></ol><br>  Quel est le modèle le plus pratique pour créer des objets? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Il est préférable, à la fois sur le plan idéologique et sur la base de la familiarité de cette méthode, de créer des objets à l'aide du <code>new</code> mot clé.  Dans ce cas, les fonctions constructeurs doivent recevoir des noms commençant par une majuscule. <br><br>  Je préfère m'en tenir aux règles et ne pas effectuer <code>this</code> vérifications supplémentaires sur les constructeurs.  Si le constructeur est appelé sans <code>new</code> et que le travail commence dans la portée globale, cela peut être comparé à «l'auto-tromperie».  Dans le même temps, je ne recommande en aucun cas de gérer les situations dans les concepteurs où elles sont appelées sans le <code>new</code> mot clé.  Par exemple, cela peut ressembler à ceci: si le constructeur est appelé sans <code>new</code> , alors, de toute façon, un nouvel objet est créé et retourné.  Cette approche est idéologiquement incorrecte et conduit à des erreurs. <br>  Voici un exemple de travail avec un constructeur. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Obj = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   <span class="hljs-string"><span class="hljs-string">"use strict"</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pew = <span class="hljs-number"><span class="hljs-number">100</span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//  let o = new Obj(); o.pew++; console.log(o.pew); //101 // .   Obj (); // TypeError: this is undefined</span></span></code> </pre> <br>  Il vaut mieux ne pas utiliser le <code>new</code> mot-clé pour les méthodes d'usine et pour les cas où il n'y a pas besoin de constructeur, quand il sera plus pratique de créer un objet en utilisant un objet littéral.  Supposons que le code constructeur indiqué dans l'exemple suivant soit explicitement redondant: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    . var Obj = function () {    if (! (this instanceof Obj)) {        return new Obj ();    }    this.pew = 100; };</span></span></code> </pre> <br>  Si, même pour créer un petit objet, vous avez toujours besoin d'un constructeur, il vaut mieux le faire: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Obj = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{    <span class="hljs-string"><span class="hljs-string">"use strict"</span></span>;    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pew = <span class="hljs-number"><span class="hljs-number">100</span></span>; };</code> </pre> <br>  Ici, comme indiqué ci-dessus, du fait que le constructeur fonctionne en mode strict, une erreur se produit lors de son appel sans <code>new</code> . <br><br><h2>  <font color="#3AC1EF">Question numéro 3.</font>  <font color="#3AC1EF">Interception des clics de souris</font> </h2><br>  Comment, en utilisant JavaScript, savoir sur quel bouton de la souris on clique? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Un clic sur les boutons de la souris génère des <code>mousedown</code> souris et de <code>mouseup</code> .  Dans ce cas, l'événement <code>click</code> est généré uniquement par le bouton gauche de la souris.  Dans le gestionnaire d'événements, vous devez vérifier le code situé dans la propriété <code>event.button</code> afin de savoir quel bouton est enfoncé (0 - gauche, 1 - milieu, 2 - droite).  Cependant, dans IE, tout semble un peu différent.  Prenons un exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> button = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById (<span class="hljs-string"><span class="hljs-string">'button'</span></span>),              <span class="hljs-comment"><span class="hljs-comment">// 0 1 2    buttonMap = ['Left', 'Middle', 'Right'],    handler = function (event) {        event = event || window.event;        alert (buttonMap [event.button] + 'id:' + event.button);    }; if (button.addEventListener) {     button.addEventListener ('mousedown', handler, false); } else {     // IE 0 1 2 3 4     buttonMap = ['???', 'Left', 'Right', '???', 'Middle'];     button.attachEvent ('onmousedown', handler); }</span></span></code> </pre> <br>  La bibliothèque jQuery prend en compte cette fonctionnalité IE, donc lorsque vous l'utilisez dans n'importe quel navigateur, vérifiez simplement la valeur de la propriété <code>event.which</code> au lieu de <code>event.button</code> avec <code>event.button</code> : <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'button'</span></span>).mousedown(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{   alert([<span class="hljs-string"><span class="hljs-string">'Left'</span></span>, <span class="hljs-string"><span class="hljs-string">'Middle'</span></span>, <span class="hljs-string"><span class="hljs-string">'Right'</span></span>][event.which]); });</code> </pre> <br><h2>  <font color="#3AC1EF">Question numéro 4.</font>  <font color="#3AC1EF">Interception de frappes sur les touches du clavier</font> </h2><br>  Est-il possible d'intercepter, au moyen de JavaScript, en appuyant sur les touches fléchées (en particulier, en appuyant sur les touches haut et bas), en s'assurant qu'après avoir cliqué dessus, le navigateur ne fasse pas défiler la page?  Si cela est possible, quelles sont les caractéristiques de sa mise en œuvre dans différents navigateurs?  Supposons qu'une page s'affiche sur une page qui ne tient pas entièrement à l'écran.  Le déplacement dans les cellules de ce tableau doit être organisé à l'aide des touches fléchées et il est nécessaire que le navigateur ne fasse pas défiler la page lorsque vous cliquez sur ces touches. <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Pour implémenter quelque chose comme ça, tout d'abord, vous devez désactiver la réponse système standard aux actions de contrôle.  Par exemple, les touches fléchées et la molette de la souris font défiler la page, un clic droit sur une page fait apparaître un menu contextuel, lorsque vous cliquez sur le bouton <code>submit</code> , la fonction <code>form.submit()</code> est <code>form.submit()</code> , lorsque vous cliquez sur le champ de saisie, elle obtient le focus d'entrée, lorsque vous cliquez sur le lien, le navigateur se charge la page à laquelle il mène. <br><br>  Cela peut se faire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de différentes manières</a> .  Par exemple, comme ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"keydown"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-comment"><span class="hljs-comment">//  -   if([37, 38, 39, 40].indexOf(e.keyCode) &gt; -1) {       e.preventDefault();   } }, false);</span></span></code> </pre> <br>  La page qui suit ne répondra normalement pas aux pressions des touches fléchées. <br>  Une chose importante à noter ici.  La méthode <code>preventDefault()</code> avant l'exécution de l'action par défaut.  Par exemple, si vous cliquez sur un champ pour l'empêcher d'obtenir le focus d'entrée, vous devez suspendre le gestionnaire approprié sur un événement qui se trouve dans la chaîne d'événements avant l'action par défaut.  Dans notre cas, il s'agit d'un événement de <code>mousedown</code> : <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'input'</span></span>).bind (<span class="hljs-string"><span class="hljs-string">'mousedown'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{   event.preventDefault();   <span class="hljs-comment"><span class="hljs-comment">//    return false; });</span></span></code> </pre> <br>  Lorsque vous cliquez sur le champ de saisie, les événements suivants se produisent - dans l'ordre dans lequel ils sont affichés ici: <br><br><ol><li> <code>mousedown</code> </li> <li>  <code>focus</code> (avant cela, un autre objet qui perd le focus déclenchera un événement de <code>blur</code> ) </li><li> <code>mouseup</code> </li> <li> <code>click</code> </li> </ol><br>  Si vous essayez d'empêcher l'élément d'obtenir le focus d'entrée, l'utilisation de gestionnaires d'événements pour cela en commençant par le gestionnaire d'événements <code>focus</code> ne nous aidera pas. <br><br><h2>  <font color="#3AC1EF">Question numéro 5.</font>  <font color="#3AC1EF">Arrêter l'animation GIF et la touche ESC</font> </h2><br>  Comment gérer le problème de l'arrêt de l'animation GIF lorsque vous appuyez sur la touche ESC? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Ici, vous pouvez utiliser la même approche que nous avons considérée ci-dessus.  Dans certains navigateurs, appuyer sur la touche ESC arrête l'animation GIF et le chargement de la page.  C'est leur comportement standard, et pour les empêcher de se comporter de cette façon, la méthode d'événement <code>preventDefault()</code> nous est utile, comme précédemment.  Le code de la touche ESC est 27. <br><br><h2>  <font color="#3AC1EF">Question numéro 6.</font>  <font color="#3AC1EF">Parenthèses dans IIFE</font> </h2><br>  Comment la construction à deux parenthèses est-elle utilisée lors de la déclaration d'une expression de fonction immédiatement invoquée (IIFE)? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Les crochets dans cette situation permettent à l'analyseur de comprendre qu'il y a une fonction devant eux qui doit être exécutée.  Mais il doit également comprendre ce que sont ces crochets - l'opérateur de regroupement, ou une construction indiquant la nécessité d'appeler la fonction.  Par exemple, si nous utilisons deux crochets comme indiqué ci-dessous, nous <code>SyntaxError</code> une erreur <code>SyntaxError</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  }()</span></span></code> </pre> <br>  Cela est dû au fait que la fonction n'a pas de nom (vous devez spécifier leurs noms dans les déclarations de fonction). <br><br>  Essayons de réécrire ce code, en donnant un nom à la fonction: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  }()</span></span></code> </pre> <br>  Maintenant que la fonction a un nom, cette construction devrait théoriquement avoir l'air tout à fait normale du point de vue du système.  Mais l'erreur ne disparaît pas, bien qu'elle concerne maintenant l'opérateur de regroupement, à l'intérieur duquel il n'y a pas d'expression.  Notez que dans ce cas, l'instruction de regroupement est suivie par l'opérateur de regroupement et non par une séquence de crochets qui indique au système que la fonction qui la précède doit être appelée. <br><br>  IIFE est souvent conçu comme suit: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   <span class="hljs-comment"><span class="hljs-comment">//  })()</span></span></code> </pre> <br>  Mais il existe d'autres façons, dont l'essence est d'indiquer d'une manière ou d'une autre à l'analyseur qu'avant c'est juste une expression fonctionnelle qui doit être exécutée: <br><br><pre> <code class="javascript hljs">!<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  }(); +function () { //  }(); [function() { //  }()]; var a = function () { //  }();</span></span></code> </pre> <br>  IIFE est largement utilisé dans la programmation JavaScript.  Par exemple, cette construction est utilisée dans jQuery.  Avec son aide, vous pouvez créer des fermetures.  En fait, nous parlons du fait que, en utilisant IIFE, le programmeur peut exécuter du code dans la portée locale.  Cela aide à protéger la portée mondiale de la pollution et permet d'optimiser l'accès aux variables globales.  Ces conceptions sont bien réduites. <br><br><h2>  <font color="#3AC1EF">Question numéro 7.</font>  <font color="#3AC1EF">Passer le code en réponse aux demandes</font> </h2><br>  Le serveur, en cours d'interaction AJAX avec le client, dans le corps de la réponse, envoie au client une chaîne d' <code>alert ('Boom !!!');</code>  .  Le client accepte la réponse et exécute ce code à l'aide de la fonction <code>eval()</code> .  Comment ça s'appelle?  Après tout, ce qui est contenu dans la réponse du serveur n'est ni JSON, ni XML, ni HTML.  Que pouvez-vous dire sur l'exécution sur le client du code qui vient du serveur sous la forme du corps de la réponse à une certaine requête? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  En fait, il n'y a pas de nom spécial pour un tel schéma d'interaction client-serveur.  Et c'est un schéma d'interaction système qui est fortement déconseillé.  C'est aussi mauvais que de stocker du code PHP dans une base de données, puis de l'exécuter à l'aide des méthodes de langage appropriées.  Même si nous ne tenons pas compte de considérations idéologiques, nous pouvons dire qu'une telle architecture est extrêmement rigide, donc, si le projet où elle est utilisée, il faudra, au fur et à mesure de son évolution, changer quelque chose, ce ne sera pas facile.  Nous voyons ici un exemple d'architecture système médiocre lorsque les données sont mélangées avec du code et des éléments d'interface.  Afin de changer quelque chose dans un tel système, vous devez d'abord comprendre les subtilités de son architecture complexe, puis, après avoir effectué les modifications, "confondre" à nouveau tout.  Je ne parle pas de réutilisation de code. <br><br>  Pour simplifier la prise en charge du code, vous devez vous efforcer d'assurer la plus grande séparation possible des parties du système et de réduire le nombre d'interdépendances de ces parties.  Afin d'assurer une faible connectivité des parties du système, c'est-à-dire de s'assurer qu'un fragment de l'application peut en être extrait ou, avec la moindre complexité, remplacé par un autre, vous pouvez utiliser des mécanismes d'événements ou des solutions architecturales spéciales, telles que MVC. <br><br><h2>  <font color="#3AC1EF">Question numéro 8.</font>  <font color="#3AC1EF">Effectuer des opérations lourdes dans le thread principal</font> </h2><br>  Comment organiser l'exécution de certaines commandes gourmandes en ressources en JavaScript et ne pas «suspendre» l'intégralité du script? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  JavaScript est un langage monothread.  Le code des pages Web est exécuté dans le même thread et les transformations de l'arborescence DOM sont effectuées.  Il y a aussi des minuteries.  Chaque fois que vous effectuez des opérations consommatrices de ressources (cycles, appels à des fonctions "lourdes"), cela conduit à un ralentissement de l'interface utilisateur voire à son blocage complet.  Si les opérations effectuées n'ont pas une charge particulièrement importante sur le système, leur impact sur l'interface sera si insignifiant que les utilisateurs ne le remarqueront tout simplement pas.  Afin de faire de l'informatique lourde en dehors du thread principal, le concept de web travailleurs a été introduit en JavaScript. <br><br>  Si l'utilisation de travailleurs n'est pas possible, vous devez optimiser les cycles et les fonctions "lourdes".  Dans le livre «JavaScript.  Optimisation des performances »Nicholas Zakas dit que l'utilisateur ne remarquera rien si le flux de l'interface utilisateur est bloqué pendant 100 ms ou moins. <br><br>  De cette idée, nous pouvons conclure que les calculs gourmands en ressources peuvent être divisés en fragments, dont la mise en œuvre prend un maximum de 100 ms, après quoi le thread principal doit être libéré. <br><br>  Voici un exemple de code du livre ci-dessus: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">timedProcessArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items, process, callback</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = items.concat();   <span class="hljs-comment"><span class="hljs-comment">//    setTimeout(function () {       var start = +new Date();       do {           process(todo.shift());       } while (todo.length &gt; 0 &amp;&amp; (+new Date() - start &lt; 50));       if (todo.length &gt; 0){           setTimeout(arguments.callee, 25);       } else {           callback(items);       }   }, 25); } function saveDocument(id) {   var tasks = [openDocument, writeText, closeDocument, updateUI];   timedProcessArray(tasks, [id], function(){       alert("Save completed!");   }); }</span></span></code> </pre> <br>  La fonction <code>timedProcessArray()</code> bloque le thread principal pendant 25 ms, exécute une séquence d'actions, puis la libère pendant 25 ms, après quoi ce processus est répété. <br><br><h2>  <font color="#3AC1EF">Question numéro 9.</font>  <font color="#3AC1EF">À propos du redimensionnement de la fenêtre du navigateur</font> </h2><br>  Puis-je savoir que l'utilisateur a fini de redimensionner la fenêtre du navigateur? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Il n'y a aucun événement spécial qui vous permet de le savoir.  Mais vous pouvez savoir si l'utilisateur redimensionne la fenêtre à l'aide de l'événement <code>onresize</code> .  Cette méthode n'est cependant pas très précise. <br><br>  Voici un projet de code pour résoudre ce problème. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> time = <span class="hljs-number"><span class="hljs-number">0</span></span>,   timerId,   TIME_ADMISSION = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 0.1  function onresizeend () {   console.log('onresizeend'); }; function resizeWatcher () {   if (+new Date - time &gt;= TIME_ADMISSION) {       onresizeend();       if (timerId) {           window.clearInterval(timerId);           timerId = null;       }   } }; $(window).resize(function () {   if (!timerId) {       timerId = window.setInterval(resizeWatcher, 25);   }   time = +new Date; });</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Question numéro 10.</font>  <font color="#3AC1EF">Ouverture de nouvelles fenêtres et de nouveaux onglets du navigateur</font> </h2><br>  Comment, à l'aide de la méthode <code>window.open()</code> , ouvrir une nouvelle fenêtre de navigateur, et non un nouvel onglet? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Le comportement exact de la méthode <code>window.open()</code> dépend du navigateur.  Opera ouvre toujours de nouveaux onglets (bien qu'ils ressemblent à des fenêtres), Safari ouvre toujours des fenêtres (bien que ce comportement puisse être modifié).  Le comportement de Chrome, Firefox et Internet Explorer peut être contrôlé. <br><br>  Donc, si un paramètre supplémentaire (position de la fenêtre <code>window.open()</code> passé à la méthode <code>window.open()</code> , une nouvelle fenêtre sera ouverte: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.open(<span class="hljs-string"><span class="hljs-string">'http://www.google.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'_blank'</span></span>, <span class="hljs-string"><span class="hljs-string">'toolbar=0,location=0,menubar=0'</span></span>);</code> </pre> <br>  Si seul un lien est transmis à cette méthode, un nouvel onglet de navigateur sera ouvert: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.open(<span class="hljs-string"><span class="hljs-string">'http://www.google.com'</span></span>);</code> </pre> <br>  Vous devez souvent ouvrir un nouvel onglet de navigateur.  Il peut y avoir des problèmes avec cela dans le navigateur Safari.  Par défaut (cela dépend des paramètres), le navigateur, lorsque <code>window.open()</code> est appelé, ouvre une nouvelle fenêtre.  Mais si vous cliquez sur le lien, tout en appuyant sur les touches <code>Ctrl + Shift/Meta + Shift</code> , un nouvel onglet s'ouvrira (quels que soient les paramètres).  Dans l'exemple suivant, nous simulerons l'événement de <code>click</code> qui est déclenché lorsque les <code>Ctrl + Shift/Meta + Shift</code> sont enfoncées: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safariOpenWindowInNewTab</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">href</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> event = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createEvent (<span class="hljs-string"><span class="hljs-string">'MouseEvents'</span></span>),        mac = (navigator.userAgent.indexOf (<span class="hljs-string"><span class="hljs-string">'Macintosh'</span></span>)&gt; = <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  Ctrl + Shift + LeftClick / Meta + Shift + LeftClick ()    //       event.initMouseEvent (        / * type * / "click",        / * canBubble * / true        / * cancelable * / true,        / * view * / window,        / * detail * / 0,        / * screenX, screenY, clientX, clientY * / 0, 0, 0, 0,        / * ctrlKey * /! mac,        / * altKey * / false,        / * shiftKey * / true        / * metaKey * / mac,        / * button * / 0,        / * relatedTarget * / null    ); //     ,   ,         $ ('&lt;a/&gt;', {'href': href, 'target': '_blank'}) [0] .dispatchEvent (event); }</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Question n ° 11.</font>  <font color="#3AC1EF">Copie en profondeur d'objets</font> </h2><br>  Comment organiser efficacement la copie profonde d'objets? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Si l'objet dont vous souhaitez créer la copie (appelons-le <code>oldObject</code> ) ne change pas, il sera plus efficace de le faire via son prototype (cela se fait très rapidement): <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">object</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">o</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">F</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}   F.prototype = o;   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> F(); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newObject = object(oldObject);</code> </pre> <br>  Si vous devez vraiment effectuer l'opération de clonage d'un objet, alors le moyen le plus rapide sera récursivement, en optimisant ce processus, parcourez ses propriétés.  Il s'agit peut-être de l'algorithme le plus rapide pour créer des copies complètes d'objets: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cloner = {   <span class="hljs-attr"><span class="hljs-attr">_clone</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_clone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">) </span></span>{       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>) {           <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> out = [];           <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, len = obj.length; i &lt; len; i++) {               <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = obj[i];               out[i] = (value !== <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> value === <span class="hljs-string"><span class="hljs-string">"object"</span></span>) ? _clone(value) : value;           }       } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {           <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> out = {};           <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> obj) {               <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj.hasOwnProperty(key)) {                   <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = obj[key];                   out[key] = (value !== <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> value === <span class="hljs-string"><span class="hljs-string">"object"</span></span>) ? _clone(value) : value;               }           }       }       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> out;   }, <span class="hljs-attr"><span class="hljs-attr">clone</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">) </span></span>{       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._clone({       <span class="hljs-attr"><span class="hljs-attr">it</span></span>: it       }).it;   } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newObject = cloner.clone(oldObject);</code> </pre> <br>  Si vous utilisez jQuery, vous pouvez recourir aux constructions suivantes: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   var newObject = jQuery.extend ({}, oldObject); //   var newObject = jQuery.extend (true, {}, oldObject);</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Question numéro 12.</font>  <font color="#3AC1EF">Destructeurs JavaScript</font> </h2><br>  Comment créer quelque chose comme un destructeur en JavaScript?  Comment gérer le cycle de vie des objets? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  En JavaScript, un objet sera supprimé de la mémoire après la disparition de la dernière référence à celui-ci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = {<span class="hljs-attr"><span class="hljs-attr">z</span></span>: <span class="hljs-string"><span class="hljs-string">'z'</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = a; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = a; <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> az; <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> a; <span class="hljs-comment"><span class="hljs-comment">//    a console.log (b, c); // ,  ,   </span></span></code> </pre> <br>  L'utilisation de quelque chose comme un «destructeur» en JavaScript ne fait qu'effacer le contenu de l'objet, mais pas le supprimer de la mémoire. <br><br><h2>  <font color="#3AC1EF">Question numéro 13.</font>  <font color="#3AC1EF">Traitement des données binaires</font> </h2><br>  Est-il possible de traiter des données binaires en JavaScript?  Et si oui, comment? <br><br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Si vous devez travailler avec des données binaires dans une application JavaScript, vous pouvez essayer d'utiliser la bibliothèque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Binary Parser</a> .  Mais son code est l'enfer.  Dans ES6 +, il y a une suggestion concernant le type <code>StructType</code> (c'est la même chose qui est représentée en C ++ par le type de données composite de <code>struct</code> ).  Ce type de données est nécessaire pour simplifier l'utilisation des données binaires.  Travailler avec cela pourrait ressembler à ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Point2D = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StructType({ <span class="hljs-attr"><span class="hljs-attr">x</span></span>: uint32, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: uint32 }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Color = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StructType({ <span class="hljs-attr"><span class="hljs-attr">r</span></span>: uint8, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: uint8, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: uint8 }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Pixel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StructType({ <span class="hljs-attr"><span class="hljs-attr">point</span></span>: Point2D, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: Color }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Triangle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayType(Pixel, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> t = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Triangle([{ <span class="hljs-attr"><span class="hljs-attr">point</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>:  <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: { <span class="hljs-attr"><span class="hljs-attr">r</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span> } },                     { <span class="hljs-attr"><span class="hljs-attr">point</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: { <span class="hljs-attr"><span class="hljs-attr">r</span></span>: <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>,   <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } },                     { <span class="hljs-attr"><span class="hljs-attr">point</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: { <span class="hljs-attr"><span class="hljs-attr">r</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>,   <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">128</span></span> } }]);</code> </pre> <br><h2>  <font color="#3AC1EF">Question numéro 14.</font>  <font color="#3AC1EF">Modification de variables dans une fonction d'une autre fonction</font> </h2><br>  Comment changer des variables situées dans une fonction d'une autre fonction? <br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Ici, vous pouvez appliquer plusieurs approches: <br><br><ol><li>  Vous pouvez utiliser le lien vers le contexte de la fonction qui nous intéresse (la fonction <code>primer()</code> dans l'exemple suivant) dans la fonction <code>smth()</code> . <br></li><li>  Vous pouvez passer une fonction créée dans le contexte de la fonction <code>primer()</code> fonction <code>smth()</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> primer = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a, b, c, d, e = {}; smth (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{        a = <span class="hljs-number"><span class="hljs-number">1</span></span>;        b = <span class="hljs-number"><span class="hljs-number">2</span></span>;        c = <span class="hljs-number"><span class="hljs-number">3</span></span>;        d = <span class="hljs-number"><span class="hljs-number">4</span></span>;    }, e); alert ([a, b, c, d, e.pewpew]); }, smth = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback, e</span></span></span><span class="hljs-function">) </span></span>{    callback ();    e.pewpew = <span class="hljs-string"><span class="hljs-string">"pewpew"</span></span>; }; primer ();</code> </pre> </li><li>  Auparavant (avant Firefox 3.6), vous pouviez accéder au contexte en utilisant la propriété <code>__parent__</code> , mais déjà dans Firefox 4, cette fonctionnalité a été supprimée. </li></ol><br><h2>  <font color="#3AC1EF">Question numéro 15.</font>  <font color="#3AC1EF">Travailler avec des fonctions</font> </h2><br>  Dites-nous comment les fonctions peuvent être appelées en JavaScript. <br><h3>  <font color="#3AC1EF">▍ Répondre</font> </h3><br>  Je suppose qu'il n'est pas nécessaire de parler de la façon d'appeler des fonctions, des méthodes et des constructeurs lors d'un travail normal avec eux.  Parlons de la façon d'utiliser les méthodes <code>call()</code> et <code>apply()</code> . <br><br><h4>  Utilisation de call () pour configurer le constructeur d'un objet </h4><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function extend (newObj, oldObj) {   function F () {};   F.prototype = oldObj.prototype;   newObj.prototype = new F ();   return newObj }; var Obj = function () {   this.obj_var = 100; }; Obj.prototype.obj_proto_var = 101; var NewObj = function () {   Obj.call (this); //   Obj     obj_var   this.new_obj_var = 102; }; extend (NewObj, Obj) NewObj.prototype.new_obj_proto_var = 103; new NewObj (); // {new_obj_proto_var: 103, new_obj_var: 102, obj_proto_var: 101, obj_var: 100}</span></span></code> </pre> <br><h4>  Convertir des objets de type tableau en tableaux </h4><br>  Les objets de type tableau sont similaires aux tableaux JavaScript, mais ils ne le sont pas.  En particulier, cela s'exprime dans le fait que ces objets n'ont pas de méthodes de tableaux ordinaires.  Parmi ces objets, par exemple, l'objet <code>arguments</code> des fonctions traditionnelles et les résultats de la méthode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">getElementsByTagName ()</a> peuvent être notés. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// document.getElementsByTagName ("div")  ,   ,    , ,  ,        document.getElementsByTagName ("div"). forEach (function (elem) {    // ... }); // TypeError: document.getElementsByTagName ("div"). forEach is not a function //    Array.prototype.slice.call(document.getElementsByTagName("div")).forEach (function (elem) {   // OK }); //        console.log(Array.prototype.slice.call ('pewpew')) // ["p", "e", "w", "p", "e", "w"] //  IE8   </span></span></code> </pre> <br><h4>  Création d'objets wrapper </h4><br>  Cette technique d'utilisation de <code>call()</code> et <code>apply()</code> vous permet de créer des objets wrapper. ,    - <code>foo()</code> ,    <code>bar()</code>       . <br><br>        : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>)} <span class="hljs-comment"><span class="hljs-comment">// foo (context, arg1, arg2, ...) function foo () {    var context = arguments [0];    var args = Array.prototype.slice.call (arguments, 1); //     bar    bar.apply (context, args); }</span></span></code> </pre> <br>       <code>Function.call.apply()</code>    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{   <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.call.apply(bar, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); }</code> </pre> <br> ,   <code>Function.call.apply()</code> , ,  <code>foo()</code> ,  <code>bar</code> . <br><br><h2> <font color="#3AC1EF"> №16.    </font> </h2><br>   ,     ,  ? <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>  . ,   Firefox  3.6,       <code>__parent__</code> ,     . <br><br><h2> <font color="#3AC1EF"> №17.    </font> </h2><br>   ,        ,     ,    <code>eval()</code>    ? <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>      ,       .     ,     : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// 1:  eval() (function () {    "use strict";    var globalObject = (0, eval) ("this"); //  :)    return globalObject; } ()); // 2:    (function (global) {    // ... } (window)); // 3:      (function () {    return this; } ()); // 4:            ,       . //  -    "use strict"; (function (global) {    // global }) (this);</span></span></code> </pre> <br><h2> <font color="#3AC1EF"> №18.  </font> </h2><br>  ,  JavaScript,    ,    ? <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>    JavaScript   - « ».     .          . ,    : <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#smth'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSmthClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (smth) {       <span class="hljs-comment"><span class="hljs-comment">//         event.handlerFunction = onSmthClick;       event.handlerContext = this;       //         //  otherObjectSetSomeEvent   event.handlerFunction          otherObjectSetSomeEvent(event);   } else {       //  -    } });</span></span></code> </pre> <br>   —    ,     .      ,    2 : <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#smth'</span></span>). click (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler1</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (smth) {       <span class="hljs-comment"><span class="hljs-comment">//         leftObjectSetSomeEvent(event, function handler2 (e) {           //  -   e       });   } else {       //  -    } }); function leftObjectSetSomeEvent(event, callback) {   callback (event);   //    }</span></span></code> </pre> <br><h2> <font color="#3AC1EF"> №19.    </font> </h2><br>   JavaScript       ?  —  ,     . <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>     <code>click</code>   «»    DOM.         (,      ,     ). <br><br><pre> <code class="plaintext hljs">// jQuery $(window).bind ('click', function (e) {   console.log ('Clicked on', e.target); }); //       $('#pewpew').delegate ('*', 'click', function(e) {   console.log('Clicked on', e.target); }); //     $('#pewpew').delegate('.pewpew', 'click', function (e) {   console.log ('Clicked on element with .pewpew class name'); });</code> </pre> <br><h2> <font color="#3AC1EF"> №20. XHR-</font> </h2><br>   XHR-   jQuery? <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>  ,    - : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xhr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">m, u, c, x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest) onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{   readyState ^ <span class="hljs-number"><span class="hljs-number">4</span></span> || c(x.target) }, open(m, u), send() }</code> </pre> <br>  - : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xhr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">m, u, c, x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">with</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.XMLHttpRequest || ActiveXObject)(<span class="hljs-string"><span class="hljs-string">"Microsoft.XMLHTTP"</span></span>)) onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{   readyState ^ <span class="hljs-number"><span class="hljs-number">4</span></span> || c(x) }, open(m, u), send() }</code> </pre> <br>    : <br><br><pre> <code class="javascript hljs">xhr(<span class="hljs-string"><span class="hljs-string">'get'</span></span>, <span class="hljs-string"><span class="hljs-string">'//google.com/favicon.ico'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">xhr</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(xhr) });</code> </pre> <br><h2> <font color="#3AC1EF"> №21.   -</font> </h2><br>        (reflow)   (repaint)    -? <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br><ol><li>     <code>requestAnimationFrame()</code> ,     ,   <code>setInterval()</code>  <code>setTimeout()</code> .    ,  ,         , ,   ,     . ,    JavaScript-     CSS-   SVG-.  ,     ,      ,     ,       , , .    ,  ,    . </li><li>       float- (      ). </li><li>      DOM.  ,   ,  ,    DOM    (         ). </li><li>       —      .            (  , ,  ).  Voici un exemple: <br><br><pre> <code class="plaintext hljs">//      element.style.left = "150px;"; // ... element.style.color = "green"; //  ,   ,    element.setAttribute ('style', 'color: green; left: 150px');</code> </pre> </li><li>           (        ). <br></li><li>      —   ( <code>style.display = "none"</code> ).        ,     . <br></li></ol><br>    ,   -,          .  ,  ,   ,       ,      . <br><br><ol><li>   . </li><li>    DOM- (  —   ). </li><li>       <code>Document.querySelectorAll()</code>   <code>firstElementChild</code> . </li><li>   ,   <code>document.getElementsByTagName()</code>     ( ,       DOM,  ). </li></ol><br><h2> <font color="#3AC1EF"> №22.     Node.js</font> </h2><br>     Node.js,   ,        ? <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>     ,              (     PHP  Apache).         ,       ,      .  Node.js                —    .  ,        ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cluster</a> .         (master)  - (worker).    ,          . <br><br><h2> <font color="#3AC1EF"> №23.  runInNewContext()  Node.js</font> </h2><br>     <code>runInNewContext()</code>  Node.js. <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>        .     ,    (   Node.js- Nodester).   -    ,       <code>runInNewContext()</code> . ,      «»,       .       «»    ,  ,  <code>runInNewContext()</code>       . <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>         JavaScript    . ,    - ,   . <br><br>  <b>Chers lecteurs!</b>  , -  ,    ,      JavaScript   ,     ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436454/">https://habr.com/ru/post/fr436454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436442/index.html">Une tête est bonne, et deux est meilleure, ou la programmation par paires en action</a></li>
<li><a href="../fr436444/index.html">Déploiement invisible d'une application monolithique en production sur AWS. Expérience personnelle</a></li>
<li><a href="../fr436448/index.html">Moniteur IPS 27 pouces Acer HA270bid: pour l'auto-amélioration</a></li>
<li><a href="../fr436450/index.html">Télécommande et contrôle, liberté et gouvernement. Conversation avec Staply</a></li>
<li><a href="../fr436452/index.html">7 domaines de développement Linux en 2019</a></li>
<li><a href="../fr436456/index.html">Créer un effet de distribution des couleurs dans Unity</a></li>
<li><a href="../fr436458/index.html">Progrès et battage médiatique dans la recherche en IA</a></li>
<li><a href="../fr436460/index.html">Le choix de la technologie, de l'architecture et du design dans les projets logiciels - sans espèces</a></li>
<li><a href="../fr436464/index.html">2. Analyse du journal des points de contrôle: SmartEvent</a></li>
<li><a href="../fr436466/index.html">Electron: développement d'applications de bureau en HTML, CSS et JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>