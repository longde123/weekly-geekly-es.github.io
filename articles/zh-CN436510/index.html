<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘˜ ğŸ‘¨ğŸ¿â€âš•ï¸ ğŸ¤¹ğŸ¿ æ ¸å¿ƒæ•°æ®è¯¦ç»† â˜ï¸ ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ½ â†”ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ€è¿‘ï¼Œæˆ‘å¼€å§‹ä½¿ç”¨Core Dataè¿›è¡Œå¤§å‹é¡¹ç›®ã€‚ é€šå¸¸çš„äº‹æƒ…æ˜¯é¡¹ç›®äººå‘˜ä¼šæ”¹å˜ï¼Œç»éªŒä¼šä¸¢å¤±ï¼Œè€Œç»†å¾®ä¹‹å¤„ä¼šè¢«é—å¿˜ã€‚ ä¸å¯èƒ½ä½¿æ¯ä¸ªäººéƒ½æ·±å…¥ç ”ç©¶ç‰¹å®šçš„æ¡†æ¶-æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„å·¥ä½œé—®é¢˜ã€‚ å› æ­¤ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªç®€çŸ­çš„æ¼”è®²ï¼Œä»æˆ‘è®¤ä¸ºå¾ˆé‡è¦æˆ–åœ¨æ•™ç¨‹ä¸­æ²¡æœ‰æ¶µç›–çš„è§‚ç‚¹å‡ºå‘ã€‚ æˆ‘ä¸æ‰€æœ‰äººå…±äº«ï¼Œå¸Œæœ›è¿™å°†æœ‰åŠ©äºç¼–å†™æœ‰æ•ˆçš„ä»£ç è€Œä¸...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ ¸å¿ƒæ•°æ®è¯¦ç»†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436510/">æœ€è¿‘ï¼Œæˆ‘å¼€å§‹ä½¿ç”¨Core Dataè¿›è¡Œå¤§å‹é¡¹ç›®ã€‚ é€šå¸¸çš„äº‹æƒ…æ˜¯é¡¹ç›®äººå‘˜ä¼šæ”¹å˜ï¼Œç»éªŒä¼šä¸¢å¤±ï¼Œè€Œç»†å¾®ä¹‹å¤„ä¼šè¢«é—å¿˜ã€‚ ä¸å¯èƒ½ä½¿æ¯ä¸ªäººéƒ½æ·±å…¥ç ”ç©¶ç‰¹å®šçš„æ¡†æ¶-æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„å·¥ä½œé—®é¢˜ã€‚ å› æ­¤ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªç®€çŸ­çš„æ¼”è®²ï¼Œä»æˆ‘è®¤ä¸ºå¾ˆé‡è¦æˆ–åœ¨æ•™ç¨‹ä¸­æ²¡æœ‰æ¶µç›–çš„è§‚ç‚¹å‡ºå‘ã€‚ æˆ‘ä¸æ‰€æœ‰äººå…±äº«ï¼Œå¸Œæœ›è¿™å°†æœ‰åŠ©äºç¼–å†™æœ‰æ•ˆçš„ä»£ç è€Œä¸çŠ¯é”™è¯¯ã€‚ å‡è®¾æ‚¨å·²ç»å¯¹è¿™ä¸ªä¸»é¢˜æœ‰äº›äº†è§£ã€‚ <br><br> æˆ‘å°†ä»å¹³åº¸å¼€å§‹ã€‚ <br><br> æ ¸å¿ƒæ•°æ®æ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­ç®¡ç†å’Œå­˜å‚¨æ•°æ®çš„æ¡†æ¶ã€‚ æ‚¨å¯ä»¥å°†Core Dataè§†ä¸ºç‰©ç†å…³ç³»å­˜å‚¨çš„åŒ…è£…ï¼Œè¯¥ç‰©ç†å…³ç³»å­˜å‚¨ä»¥å¯¹è±¡çš„å½¢å¼è¡¨ç¤ºæ•°æ®ï¼Œè€ŒCore Dataæœ¬èº«ä¸æ˜¯æ•°æ®åº“ã€‚ <br><br><h2> æ ¸å¿ƒæ•°æ®å¯¹è±¡ </h2><br><img src="https://habrastorage.org/webt/aq/ka/bk/aqkabk_js9w9knvyat6xp_u4u5a.png" alt="å›¾ç‰‡"><br><a name="habracut"></a><br> ä¸ºäº†åˆ›å»ºå­˜å‚¨ï¼Œåº”ç”¨ç¨‹åºä½¿ç”¨<b>NSPersistentStoreCoordinator</b>æˆ–<b>NSPersistentContainerç±»</b> ã€‚  NSPersistentStoreCoordinatoråŸºäºæ¨¡å‹åˆ›å»ºæŒ‡å®šç±»å‹çš„å­˜å‚¨ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä½ç½®å’Œå…¶ä»–é€‰é¡¹ã€‚  NSPersistentContainerå¯ä»¥ä¸iOS10ä¸€èµ·ä½¿ç”¨ï¼Œæä¾›ä»¥æœ€å°‘çš„ä»£ç åˆ›å»ºçš„èƒ½åŠ›ã€‚ <br><br> å®ƒçš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼šå¦‚æœæŒ‡å®šè·¯å¾„ä¸Šå­˜åœ¨æ•°æ®åº“ï¼Œåˆ™åè°ƒå™¨æ£€æŸ¥å…¶ç‰ˆæœ¬ï¼Œå¹¶åœ¨å¿…è¦æ—¶è¿›è¡Œè¿ç§»ã€‚ å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™ä¼šæ ¹æ®NSManagedObjectModelæ¨¡å‹åˆ›å»ºæ•°æ®åº“ã€‚ ä¸ºäº†ä½¿æ‰€æœ‰è¿™äº›æ­£å¸¸å·¥ä½œï¼Œåœ¨æ›´æ”¹æ¨¡å‹ä¹‹å‰ï¼Œè¯·é€šè¿‡èœå•ç¼–è¾‘å™¨-&gt;æ·»åŠ æ¨¡å‹ç‰ˆæœ¬åœ¨Xcodeä¸­åˆ›å»ºæ–°ç‰ˆæœ¬ã€‚ å¦‚æœæ‚¨è·å¾—è·¯å¾„ï¼Œåˆ™å¯ä»¥åœ¨ä»¿çœŸå™¨ä¸­æ‰¾åˆ°å¹¶æ‰“å¼€åŸºç¡€ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">NSPersistentStoreCoordinatorçš„ç¤ºä¾‹</b> <div class="spoiler_text"><pre><code class="objectivec hljs">var persistentCoordinator: <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> = { let modelURL = Bundle.main.url(forResource: <span class="hljs-string"><span class="hljs-string">"Test"</span></span>, withExtension: <span class="hljs-string"><span class="hljs-string">"momd"</span></span>) let managedObjectModel = <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span>(contentsOf: modelURL!) let persistentCoordinator = <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span>(managedObjectModel: managedObjectModel!) let documentsPath = <span class="hljs-built_in"><span class="hljs-built_in">NSSearchPathForDirectoriesInDomains</span></span>(.documentDirectory, .userDomainMask, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] let storeURL = URL(fileURLWithPath: documentsPath.appending(<span class="hljs-string"><span class="hljs-string">"/Test.sqlite"</span></span>)) print(<span class="hljs-string"><span class="hljs-string">"storeUrl = \(storeURL)"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { try persistentCoordinator.addPersistentStore(ofType: <span class="hljs-built_in"><span class="hljs-built_in">NSSQLiteStoreType</span></span>, configurationName: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, at: storeURL, options: [<span class="hljs-built_in"><span class="hljs-built_in">NSSQLitePragmasOption</span></span>: [<span class="hljs-string"><span class="hljs-string">"journal_mode"</span></span>:<span class="hljs-string"><span class="hljs-string">"MEMORY"</span></span>]]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> persistentCoordinator } catch { abort() } } ()</code> </pre> <br></div></div><div class="spoiler">  <b class="spoiler_title">NSPersistentContainerç¤ºä¾‹</b> <div class="spoiler_text"><pre> <code class="objectivec hljs">var persistentContainer: <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentContainer</span></span> = { let container = <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentContainer</span></span>(name: <span class="hljs-string"><span class="hljs-string">"CoreDataTest"</span></span>) container.loadPersistentStores(completionHandler: { (storeDescription, error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(<span class="hljs-string"><span class="hljs-string">"storeDescription = \(storeDescription)"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let error = error as <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>? { fatalError(<span class="hljs-string"><span class="hljs-string">"Unresolved error \(error), \(error.userInfo)"</span></span>) } }) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> container } ()</code> </pre><br></div></div><br> æ ¸å¿ƒæ•°æ®ä½¿ç”¨4ç§ç±»å‹çš„å­˜å‚¨ï¼š <br><br>  -SQLite <br>  -äºŒè¿›åˆ¶ <br>  -å†…å­˜ä¸­ <br>  -XMLï¼ˆä»…Mac OSï¼‰ <br><br> ä¾‹å¦‚ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œå¦‚æœæ‚¨ä¸æƒ³ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨æ•°æ®ï¼Œä½†åŒæ—¶åˆå¸Œæœ›åœ¨ä¼šè¯æœŸé—´ä½¿ç”¨ç¼“å­˜å¹¶ä¸”ä»¥å¯¹è±¡å½¢å¼ä½¿ç”¨æ•°æ®ï¼Œåˆ™â€œå†…å­˜ä¸­â€ç±»å‹çš„å­˜å‚¨éå¸¸é€‚åˆã€‚ å®é™…ä¸Šï¼Œåœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ç¦æ­¢å…·æœ‰å‡ ç§ä¸åŒç±»å‹çš„å­˜å‚¨ã€‚ <br><br> æˆ‘æƒ³è°ˆè°ˆ<b>NSManagedObjectContext</b>å¯¹è±¡ã€‚ é€šå¸¸ï¼ŒAppleä¸ºNSManagedObjectContextï¼ˆç”¨äºå¤„ç†Core Dataå¯¹è±¡çš„ç¯å¢ƒï¼‰æä¾›äº†éå¸¸æ¨¡ç³Šçš„æªè¾ã€‚ æ‰€æœ‰è¿™äº›éƒ½æ˜¯å‡ºäºå°†è‡ªå·±ä»ä¸å…³ç³»æ•°æ®åº“çš„å…³è”ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥åŠå°†æ ¸å¿ƒæ•°æ®å‘ˆç°ä¸ºä¸€ç§æ˜“äºä½¿ç”¨çš„å·¥å…·çš„éœ€æ±‚ï¼Œè¯¥å·¥å…·ä¸éœ€è¦äº†è§£é”®ï¼Œäº‹åŠ¡å’Œå…¶ä»–Bazdanå±æ€§ã€‚ ä½†æ˜¯åœ¨å…³ç³»æ•°æ®åº“çš„è¯­è¨€ä¸­ï¼ŒNSManagedObjectContextåœ¨æŸç§æ„ä¹‰ä¸Šå¯ä»¥ç§°ä¸ºäº‹åŠ¡ç®¡ç†å™¨ã€‚ æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°å®ƒå…·æœ‰ä¿å­˜å’Œå›æ»šæ–¹æ³•ï¼Œå°½ç®¡å¾ˆå¯èƒ½ä»…ä½¿ç”¨ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚ <br><br> å¯¹è¿™ä¸ªç®€å•äº‹å®çš„è¯¯è§£å¯¼è‡´ä½¿ç”¨å•ä¸Šä¸‹æ–‡æ¨¡å‹ï¼Œå³ä½¿åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä»ç„¶æ˜¯ä¸å¤Ÿçš„ã€‚ ä¾‹å¦‚ï¼Œæ‚¨æ­£åœ¨ç¼–è¾‘ä¸€ä¸ªå¤§æ–‡æ¡£ï¼Œè€ŒåŒæ—¶æ‚¨å¿…é¡»ä¸‹è½½å‡ ä¸ªç›®å½•ã€‚ æ‚¨ä»€ä¹ˆæ—¶å€™å«ä¿å­˜ï¼Ÿ å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…³ç³»æ•°æ®åº“ï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®ï¼Œå› ä¸ºæ¯ä¸ªæ“ä½œéƒ½å°†åœ¨å…¶è‡ªå·±çš„äº‹åŠ¡ä¸­æ‰§è¡Œã€‚ æ ¸å¿ƒæ•°æ®è¿˜æœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„æ–¹æ³•æ¥è§£å†³æ­¤é—®é¢˜-è¿™æ˜¯å­ä¸Šä¸‹æ–‡çš„ä¸€ä¸ªåˆ†æ”¯ã€‚ ä½†ä¸å¹¸çš„æ˜¯ï¼Œç”±äºæŸç§åŸå› ï¼Œè¿™ç§æ–¹å¼å¾ˆå°‘ä½¿ç”¨ã€‚ è¿™é‡Œæœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ç¯‡</a>å…³äºè¯¥ä¸»é¢˜çš„å¥½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« </a> ã€‚ <br><br><h2> ä¼ æ‰¿ </h2><br> ç”±äºæŸç§åŸå› ï¼Œæˆ‘ä¸æ˜ç™½ï¼Œæœ‰å¤§é‡çš„æ‰‹å†Œå’Œç¤ºä¾‹éƒ½æ²¡æœ‰ä½¿ç”¨Entity / NSManagedObjectï¼ˆè¡¨ï¼‰çš„ç»§æ‰¿ã€‚ åŒæ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å·¥å…·ã€‚ å¦‚æœä¸ä½¿ç”¨ç»§æ‰¿ï¼Œåˆ™åªèƒ½é€šè¿‡KVCæœºåˆ¶ä¸ºå±æ€§ï¼ˆå­—æ®µï¼‰åˆ†é…å€¼ï¼Œè¯¥æœºåˆ¶ä¸æ£€æŸ¥å±æ€§çš„åç§°å’Œç±»å‹ï¼Œè¿™å¾ˆå®¹æ˜“å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ <br><br>  NSManagedObjectçš„ç±»é‡æ–°å®šä¹‰åœ¨Core Dataè®¾è®¡å™¨ä¸­å®Œæˆï¼š <br><br><img src="https://habrastorage.org/webt/ce/52/_p/ce52_pz39mzguhyiotm5rvhh00k.png" alt="å›¾ç‰‡"><br><br><h2> ç»§æ‰¿å’Œä»£ç ç”Ÿæˆ </h2><br> åœ¨ä¸ºEntityæŒ‡å®šç±»åä¹‹åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»£ç ç”Ÿæˆå¹¶ä½¿ç”¨ç°æˆçš„ä»£ç è·å–ä¸€ä¸ªç±»ï¼š <br><br><img src="https://habrastorage.org/webt/al/dn/7a/aldn7aozwsnv-l7sjv8vau4iwmi.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/kj/ra/kh/kjrakhjgijvth5obsls22g6vtjk.png" alt="å›¾ç‰‡"><br><br> å¦‚æœè¦æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œä½†ä¸æƒ³å°†æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•ï¼šä¸ºEntityè®¾ç½®â€œ Codegenâ€é€‰é¡¹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»åœ¨../ DerivedData / ...ä¸­æœç´¢ä»£ç ã€‚ <br><br><img src="https://habrastorage.org/webt/zg/vw/9e/zgvw9e3sulaf6g7qici-uitdsei.png" alt="å›¾ç‰‡"><br><br> ä½¿ç”¨ä»£ç ç”Ÿæˆæ¥åˆ›å»ºç±»ï¼Œå˜é‡åç§°ä¸­çš„æ‹¼å†™é”™è¯¯å¯èƒ½å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ <br><br> è¿™æ˜¯ä¸€äº›è¿™æ ·çš„ä»£ç ï¼š <br><br><pre> <code class="objectivec hljs">@objc public <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Company: <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> {    @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public var inn: String?  @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public var name: String?  @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public var uid: String?  @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public var employee: <span class="hljs-built_in"><span class="hljs-built_in">NSSet</span></span>? }</code> </pre><br> å¿«é€Ÿåœ°ï¼Œ@ NSManagedä¸Objective Cä¸­çš„dynamicå…·æœ‰ç›¸åŒçš„å«ä¹‰ã€‚ <br> æ ¸å¿ƒæ•°æ®æœ¬èº«è´Ÿè´£æ¥æ”¶å…¶ç±»å±æ€§çš„æ•°æ®ï¼ˆå…·æœ‰å†…éƒ¨è®¿é—®å™¨ï¼‰ã€‚ å¦‚æœæ‚¨æœ‰è¿è¾“å­—æ®µï¼Œåˆ™éœ€è¦æ·»åŠ å‡½æ•°æ¥è®¡ç®—å®ƒä»¬ã€‚ <br><br> ä¸å…¶ä»–ç±»ä¸åŒï¼Œä»IOS10ä¹‹å‰ç»§æ‰¿è‡ªNSManagedObjectï¼ˆè¡¨ï¼‰çš„ç±»æ²¡æœ‰â€œå¸¸è§„â€æ„é€ å‡½æ•°ã€‚ ä¸ºäº†åˆ›å»ºCompanyç±»å‹çš„å¯¹è±¡ï¼Œæœ‰å¿…è¦ä½¿ç”¨NSEntityDescriptionç¼–å†™ä¸€ä¸ªç¬¨æ‹™çš„æ„é€ ã€‚ ç°åœ¨ï¼Œæœ‰äº†é€šè¿‡ä¸Šä¸‹æ–‡åˆå§‹åŒ–çš„æ›´æ–¹ä¾¿çš„æ–¹æ³•ï¼ˆNSManagedObjectContextï¼‰ã€‚ ä»£ç å¦‚ä¸‹ã€‚ æ³¨æ„åœ¨é€šè¿‡KVCæœºåˆ¶åˆ†é…å±æ€§æ—¶ç»§æ‰¿çš„ä¼˜ç‚¹ï¼š <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 -    NSEntityDescription,    KVO let company1 = NSEntityDescription.insertNewObject(forEntityName: "Company", into: moc) company1.setValue("077456789111", forKey: "inn") company1.setValue(" ", forKey: "name") // 2 -    NSEntityDescription,     let company2 = NSEntityDescription.insertNewObject(forEntityName: "Company", into: moc) as! Company company2.inn = "077456789222" company2.name = " " // 3 -     (IOS10+),     let company3 = Company(context: moc) company3.inn = "077456789222" company3.name = " "</span></span></code> </pre><br><h2>  NSManagedObjectçš„å‘½åç©ºé—´ </h2><br> å€¼å¾—ä¸€æçš„å¦ä¸€ä»¶äº‹æ˜¯åç§°ç©ºé—´ã€‚ <br><br><img src="https://habrastorage.org/webt/fk/a7/wl/fka7wlfqlf4cvi1ezcqst4kiiyi.png" alt="å›¾ç‰‡"><br><br> å¦‚æœæ‚¨åœ¨ObjectiveCæˆ–Swiftä¸Šå·¥ä½œï¼Œæ‚¨å°†æ²¡æœ‰ä»»ä½•å›°éš¾ã€‚ é€šå¸¸ï¼Œé»˜è®¤æƒ…å†µä¸‹æ­£ç¡®å¡«å†™æ­¤å­—æ®µã€‚ ä½†æ˜¯åœ¨æ··åˆé¡¹ç›®ä¸­ï¼Œå¯¹äºswiftå’ŒObjectiveCçš„ç±»ï¼Œæ‚¨éœ€è¦æ”¾ä¸‹ä¸åŒçš„é€‰é¡¹ï¼Œè¿™å¯èƒ½ä¼šè®©æ‚¨æ„Ÿåˆ°æƒŠè®¶ã€‚ åœ¨Swiftä¸­ï¼Œå¿…é¡»å¡«å†™â€œæ¨¡å—â€ã€‚ å¦‚æœæ­¤å­—æ®µæœªå®Œæˆï¼Œåˆ™å°†å¸¦æœ‰é¡¹ç›®åç§°çš„å‰ç¼€æ·»åŠ åˆ°ç±»åç§°ï¼Œè¿™å°†å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ åœ¨Objetive Cä¸­ï¼Œå°†â€œæ¨¡å—â€ç•™ç©ºï¼Œå¦åˆ™åœ¨é€šè¿‡ç±»åç§°è®¿é—®å®ƒæ—¶å°†æ‰¾ä¸åˆ°NSManagedObjectã€‚ <br><br><h2> å¯¹è±¡ä¹‹é—´çš„é“¾æ¥ </h2><br> åŸåˆ™ä¸Šï¼Œå…³ç³»çš„ä¸»é¢˜æ¶µç›–äº†å¾ˆå¤šï¼Œä½†æˆ‘æƒ³é‡ç‚¹ä»‹ç»å¦‚ä½•å°†å­å®ä½“æ·»åŠ åˆ°çˆ¶å®ä½“ã€‚ å› æ­¤ï¼Œé¦–å…ˆï¼Œå¿«é€Ÿæé†’ä¸€ä¸‹åˆ›å»ºé“¾æ¥çš„æœºåˆ¶ã€‚ è€ƒè™‘ä¸€ä¸ªä¼ ç»Ÿçš„ä¾‹å­ï¼Œå…¬å¸æ˜¯å‘˜å·¥ï¼Œè”ç³»æ˜¯ä¸€å¯¹å¤šçš„ï¼š <br><br><ul><li> åœ¨æ¯ä¾§ï¼ˆè¡¨ï¼‰ä¸Šåˆ›å»ºè¿æ¥ </li><li> ä¹‹åï¼Œâ€œåå‘â€å­—æ®µå˜ä¸ºå¯ç”¨ï¼Œå¿…é¡»åœ¨æ¯ä¸ªè¡¨ä¸­å°†å…¶å¡«å……ã€‚ </li></ul><br><img src="https://habrastorage.org/webt/_m/fx/si/_mfxsi_lcnxt8t3zlhh0vbrbsus.png" alt="å›¾ç‰‡"><br><br><img src="https://habrastorage.org/webt/kb/uo/my/kbuomy1etksutabvijrvxlztiyy.png" alt="å›¾ç‰‡"><br><br> è‹¹æœå…¬å¸åšæŒè§„å®šé€†å…³ç³»ã€‚ åŒæ—¶ï¼Œåè½¬å¹¶ä¸èƒ½å¢å¼ºä¸€è‡´æ€§ï¼Œä½†æ˜¯å¯ä»¥å¸®åŠ©Core Dataè·Ÿè¸ªè¿æ¥ä¸¤ä¾§çš„å˜åŒ–ï¼Œè¿™å¯¹äºç¼“å­˜å’Œæ›´æ–°ä¿¡æ¯éå¸¸é‡è¦ã€‚ <br><br> æ­£ç¡®æŒ‡å®šåˆ é™¤è§„åˆ™ä¹Ÿå¾ˆé‡è¦ã€‚ åˆ é™¤è§„åˆ™æ˜¯åœ¨åˆ é™¤çˆ¶å¯¹è±¡æ—¶å°†å¯¹æ­¤å¯¹è±¡æ‰§è¡Œçš„æ“ä½œã€‚ <br><br><ul><li> çº§è”-åˆ é™¤æ‰€æœ‰çˆ¶å¯¹è±¡æ—¶åˆ é™¤æ‰€æœ‰å­å¯¹è±¡ã€‚ </li><li> æ‹’ç»-ç¦æ­¢åˆ é™¤æœ‰å­©å­çš„çˆ¶æ¯ </li><li>  Nullify-ä½¿çˆ¶å¼•ç”¨æ— æ•ˆ </li><li> æ— åŠ¨ä½œ-æœªæŒ‡å®šä»»ä½•åŠ¨ä½œï¼Œç¼–è¯‘æ—¶ä¼šå‘å‡ºè­¦å‘Š </li></ul><br> åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œåˆ é™¤å…¬å¸åï¼Œæ‰€æœ‰å‘˜å·¥éƒ½å°†è¢«åˆ é™¤ï¼ˆçº§è”ï¼‰ã€‚ åˆ é™¤å‘˜å·¥åï¼Œå…¬å¸ä¸­ä¸è¯¥å‘˜å·¥çš„é“¾æ¥å°†é‡ç½®ï¼ˆé¢„å±ï¼‰ <br><br><h2> å°†å­å®ä½“æ·»åŠ åˆ°çˆ¶å®ä½“çš„æ–¹æ³• </h2><br>  <b>1ï¼‰</b>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡NSSetæ·»åŠ ã€‚ ä¾‹å¦‚ï¼Œå‘å…¬å¸æ·»åŠ 2åå‘˜å·¥ï¼š <br><br><pre> <code class="objectivec hljs">let set = <span class="hljs-built_in"><span class="hljs-built_in">NSMutableSet</span></span>();    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let employee1 = <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span>.insertNewObject(forEntityName: <span class="hljs-string"><span class="hljs-string">"Employee"</span></span>, into: moc) as? Employee { employee1.firstName = <span class="hljs-string"><span class="hljs-string">""</span></span> employee1.secondName = <span class="hljs-string"><span class="hljs-string">""</span></span> set.add(employee1) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let emploee2 = <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span>.insertNewObject(forEntityName: <span class="hljs-string"><span class="hljs-string">"Employee"</span></span>, into: moc) as? Employee { employee2.firstName = <span class="hljs-string"><span class="hljs-string">""</span></span> employee2.secondName = <span class="hljs-string"><span class="hljs-string">""</span></span> set.add(employee2) }    company.employee = set</code> </pre><br> æ­¤æ–¹æ³•ä¾¿äºåˆå§‹åŒ–å¯¹è±¡æˆ–å¡«å……æ•°æ®åº“ã€‚ æœ‰ç»†å¾®å·®åˆ«ã€‚ å¦‚æœå…¬å¸å·²ç»æœ‰å‘˜å·¥ï¼Œå¹¶ä¸”æ‚¨åˆ†é…äº†æ–°çš„å‘˜å·¥ï¼Œåˆ™ä»¥å‰çš„å‘˜å·¥å°†é‡ç½®ä¸å…¬å¸çš„é“¾æ¥ï¼Œä½†ä¸ä¼šåˆ é™¤å®ƒä»¬ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥è·å–å‘˜å·¥åˆ—è¡¨ï¼Œå¹¶å·²ä½¿ç”¨æ­¤é›†åˆè¿›è¡Œå·¥ä½œã€‚ <br><br><pre> <code class="objectivec hljs">let set = company.mutableSetValue(forKey: <span class="hljs-string"><span class="hljs-string">"employee"</span></span>)</code> </pre> <br>  <b>2ï¼‰</b>é€šè¿‡çˆ¶IDæ·»åŠ å­å¯¹è±¡ <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let employee = <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span>.insertNewObject(forEntityName: <span class="hljs-string"><span class="hljs-string">"Employee"</span></span>, into: moc) as? Employee { employee.firstName = <span class="hljs-string"><span class="hljs-string">""</span></span> employee.secondName = <span class="hljs-string"><span class="hljs-string">""</span></span> employee.company = company }</code> </pre><br> ç¬¬äºŒç§æ–¹æ³•åœ¨æ·»åŠ æˆ–ç¼–è¾‘å­å¯¹è±¡æ—¶å¾ˆæ–¹ä¾¿ <br> å•ç‹¬çš„å½¢å¼ã€‚ <br><br>  <b>3ï¼‰</b>é€šè¿‡è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•æ·»åŠ å­å¯¹è±¡ <br><br><pre> <code class="objectivec hljs">extension Company {    @objc(addEmployeeObject:)  @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public func addEmployee(_ value: Employee)    @objc(removeEmployeeObject:)  @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public func removeFromEmployee(_ value: Employee)    @objc(addEmployee:)  @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public func addEmployee(_ values: <span class="hljs-built_in"><span class="hljs-built_in">NSSet</span></span>)    @objc(removeEmployee:)  @<span class="hljs-built_in"><span class="hljs-built_in">NSManaged</span></span> public func removeFromEmployee(_ values: <span class="hljs-built_in"><span class="hljs-built_in">NSSet</span></span>) }</code> </pre><br> ä¸ºäº†å®Œæ•´èµ·è§ï¼Œäº†è§£æ­¤æ–¹æ³•å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯ä»¥æŸç§æ–¹å¼å®ƒå¯¹æˆ‘æ²¡æœ‰ç”¨ï¼Œå› æ­¤æˆ‘åˆ é™¤äº†å¤šä½™çš„ä»£ç ï¼Œä»¥å…ä½¿é¡¹ç›®æ··ä¹±ã€‚ <br><br><h2> å­å¥æŸ¥è¯¢ </h2><br> åœ¨æ ¸å¿ƒæ•°æ®ä¸­ï¼Œæ‚¨ä¸èƒ½åƒåœ¨SQLä¸­é‚£æ ·åœ¨ä»»ä½•æ•°æ®ä¹‹é—´è¿›è¡Œä»»æ„æŸ¥è¯¢ã€‚ ä½†æ˜¯åœ¨ç›¸å…³å¯¹è±¡ä¹‹é—´ï¼Œä½¿ç”¨æ ‡å‡†è°“è¯å¾ˆå®¹æ˜“è¿›è¡Œè·Ÿè¸ªã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæŸ¥è¯¢ç¤ºä¾‹ï¼Œè¯¥æŸ¥è¯¢é€‰æ‹©äº†æ‰€æœ‰æ‹¥æœ‰æŒ‡å®šåç§°é›‡å‘˜çš„å…¬å¸ï¼š <br><br><pre> <code class="objectivec hljs">public <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func getCompanyWithEmployee(name: String) -&gt; [Company] { let request = <span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequestResult</span></span>&gt;(entityName: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.className()) request.predicate = <span class="hljs-built_in"><span class="hljs-built_in">NSPredicate</span></span>(format: <span class="hljs-string"><span class="hljs-string">"ANY employee.firstName = %@"</span></span>, name) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let result = try moc.fetch(request) as? [Company] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result } } catch { } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [Company]() }</code> </pre><br> ä»£ç ä¸­çš„æ–¹æ³•è°ƒç”¨å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,    let companies = Company.getCompanyWithEmployee(name: "")</span></span></code> </pre><br> ä¸è¦åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨è¿‡æ¸¡å­—æ®µï¼›æ‰§è¡ŒæŸ¥è¯¢æ—¶æœªå®šä¹‰å®ƒä»¬çš„å€¼ã€‚ ä¸ä¼šå‘ç”Ÿä»»ä½•é”™è¯¯ï¼Œä½†ç»“æœå°†ä¸æ­£ç¡®ã€‚ <br><br><h2> è®¾ç½®å±æ€§ï¼ˆå­—æ®µï¼‰ </h2><br> æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°Entityå±æ€§å…·æœ‰å¤šä¸ªé€‰é¡¹ã€‚ <br> é€šè¿‡å¯é€‰ï¼Œåç§°ä¸­çš„æ‰€æœ‰å†…å®¹å‡æ¸…æ™°å¯è§ã€‚ <br><br>  swifä¸­æ˜¾ç¤ºäº†ä½¿ç”¨æ ‡é‡ç±»å‹çš„é€‰é¡¹ã€‚  Objective-Cä¸ä¼šå°†æ ‡é‡ç±»å‹ç”¨äºå±æ€§ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½ä¸ºnilã€‚ å°è¯•é€šè¿‡KVCä¸ºå±æ€§åˆ†é…æ ‡é‡å€¼å°†å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ è¿™æ¸…æ¥šåœ°è¯´æ˜äº†ä¸ºä»€ä¹ˆCore Dataä¸­çš„å±æ€§ç±»å‹ä¸è¯­è¨€ç±»å‹æ²¡æœ‰ä¸¥æ ¼çš„å¯¹åº”å…³ç³»ã€‚ åœ¨å¿«é€Ÿé¡¹ç›®å’Œæ··åˆé¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ ‡é‡ç±»å‹å±æ€§ã€‚ <br><br> è¿è¾“å±æ€§æ˜¯<b>æœª</b>å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„è®¡ç®—å­—æ®µã€‚ å®ƒä»¬å¯ä»¥ç”¨äºåŠ å¯†ã€‚ è¿™äº›å±æ€§é€šè¿‡é‡å†™çš„è®¿é—®å™¨æˆ–æ ¹æ®éœ€è¦åˆ†é…åŸºå…ƒæ¥æ¥æ”¶å€¼ï¼ˆä¾‹å¦‚ï¼Œé‡å†™çš„willSaveå’ŒawakeFromFetchï¼‰ã€‚ <br><br><h2> å±æ€§è®¿é—®å™¨ï¼š </h2><br> ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¸éœ€è¦ä½¿ç”¨è®¡ç®—æ‰€å¾—çš„å­—æ®µè¿›è¡ŒåŠ å¯†æˆ–å…¶ä»–æ“ä½œï¼Œåˆ™æ— éœ€è€ƒè™‘é™„ä»¶çš„å±æ€§ã€‚ åŒæ—¶ï¼Œè·å–å’Œåˆ†é…å±æ€§å€¼çš„æ“ä½œä¸æ˜¯â€œåŸå­çš„â€ã€‚ è¦äº†è§£æˆ‘çš„æ„æ€ï¼Œè¯·å‚è§ä¸‹é¢çš„ä»£ç ï¼š <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//  let name = company.name //  company.willAccessValue(forKey: "name") let name = company.primitiveValue(forKey: "name") company.didAccessValue(forKey: "name") //  company.name = " " //  company.willChangeValue(forKey: "name") company.setPrimitiveValue(" ", forKey: "name") company.didChangeValue(forKey: "name")</span></span></code> </pre><br> åœ¨NSManagedObjectäº‹ä»¶ä¸­ä½¿ç”¨åŸè¯­ï¼Œè€Œä¸æ˜¯é€šå¸¸çš„åˆ†é…ï¼Œä»¥é¿å…å¾ªç¯ã€‚ ä¸€ä¸ªä¾‹å­ï¼š <br><br><pre> <code class="objectivec hljs">override func willSave() {   let nameP = encrypt(field: primitiveValue(forKey: <span class="hljs-string"><span class="hljs-string">"name"</span></span>), password: password)   setPrimitiveValue(nameP, forKey: <span class="hljs-string"><span class="hljs-string">"nameC"</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.willSave() }  override func awakeFromFetch() {   let nameP = decrypt(field: primitiveValue(forKey: <span class="hljs-string"><span class="hljs-string">"nameC"</span></span>), password: password)   setPrimitiveValue(nameP, forKey: <span class="hljs-string"><span class="hljs-string">"name"</span></span>)   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.awakeFromFetch() }</code> </pre><br> å¦‚æœçªç„¶æŸä¸ªæ—¶å€™æ‚¨å¿…é¡»å°†awakeFromFetchå‡½æ•°æ‹§å…¥é¡¹ç›®ä¸­ï¼Œé‚£ä¹ˆæ‚¨ä¼šæƒŠè®¶äºå®ƒçš„å·¥ä½œåŸç†å¾ˆå¥‡æ€ªï¼Œä½†æ˜¯å®é™…ä¸Šåœ¨æ‰§è¡Œè¯·æ±‚æ—¶æ ¹æœ¬æ²¡æœ‰è°ƒç”¨å®ƒã€‚ è¿™æ˜¯ç”±äºCore Dataå…·æœ‰éå¸¸æ™ºèƒ½çš„ç¼“å­˜æœºåˆ¶ï¼Œå¹¶ä¸”å¦‚æœé€‰æ‹©å·²ç»åœ¨å†…å­˜ä¸­ï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºæ‚¨åˆšåˆšå¡«å……äº†æ­¤è¡¨ï¼‰ï¼Œåˆ™ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ ä½†æ˜¯ï¼Œæˆ‘çš„å®éªŒè¡¨æ˜ï¼Œå°±è®¡ç®—å€¼è€Œè¨€ï¼Œå¯ä»¥å®‰å…¨åœ°ä¾é awakeFromFetchçš„ä½¿ç”¨ï¼Œå¦‚Appleçš„æ–‡æ¡£æ‰€è¿°ã€‚ å¦‚æœè¦è¿›è¡Œæµ‹è¯•å’Œå¼€å‘ï¼Œåˆ™éœ€è¦å¼ºåˆ¶awakeFromFetchï¼Œè¯·åœ¨è¯·æ±‚ä¹‹å‰æ·»åŠ managedObjectContext.refreshAllObjectsï¼ˆï¼‰ã€‚ <br><br> ä»…æ­¤è€Œå·²ã€‚ <br><br> æ„Ÿè°¢æ‰€æœ‰è¯»å®Œæœ¬ä¹¦çš„äººã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN436510/">https://habr.com/ru/post/zh-CN436510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN436500/index.html">å¤å¢“ä¸½å½±ï¼šå´›èµ·çš„æ¡†æ¶å¦‚ä½•å‘ˆç°</a></li>
<li><a href="../zh-CN436502/index.html">è®¢é˜…çºµå®¹æˆ–å¦‚ä½•å‘ç›¸åŒçš„å®¢æˆ·é”€å”®æ›´å¤šå•†å“</a></li>
<li><a href="../zh-CN436504/index.html">ç³»ç»Ÿçº§å°è£…è¿˜æ˜¯èŠ¯ç‰‡å°è£…ä¸‹çš„å°è£…ï¼Ÿ</a></li>
<li><a href="../zh-CN436506/index.html">å¦‚ä½•è½»æ¾åˆ›å»ºAIç§æ—ä¸»ä¹‰è€…</a></li>
<li><a href="../zh-CN436508/index.html">1000ä¸‡ç¾å…ƒçš„æŠ•èµ„å’Œæ²ƒå…¹å°¼äºšå…‹çš„èµèª‰-ä¸ºå„¿ç«¥åˆ›é€ äº†ä¸€æ¬¾æ•™è‚²è®¡ç®—æœº</a></li>
<li><a href="../zh-CN436512/index.html">æˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°Graphiteå’ŒMoiraçš„æœ‰é—®é¢˜çš„ç‰ˆæœ¬ã€‚ ä½“éªŒYandex.Money</a></li>
<li><a href="../zh-CN436514/index.html">é€šè¿‡PHPä¸ºInstagramåˆ›å»ºæ•…äº‹</a></li>
<li><a href="../zh-CN436518/index.html">HaikuÎ²1-ä½¿/ b / OSå†æ¬¡å‡ºè‰²</a></li>
<li><a href="../zh-CN436520/index.html">æ³„æ¼ä¸ªäººæ•°æ®æ—¶è¯·å‹¿ä½¿ç”¨åœ¨çº¿éªŒè¯æœåŠ¡</a></li>
<li><a href="../zh-CN436522/index.html">ä¸æŒ‡ç¤ºç›¸å</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>