<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèê üë®üèΩ‚Äçüíª üìå Haben Sie Lieferung bestellt? So liefert Crossroads 6.000 Bestellungen pro Tag üìÑ üíî üîü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Leute lieben die Lieferung. Gegen eine geringe Geb√ºhr k√∂nnen Sie die richtigen Produkte kaufen, ohne Ihr Zuhause zu verlassen: Lebensmittel aus Ih...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Haben Sie Lieferung bestellt? So liefert Crossroads 6.000 Bestellungen pro Tag</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/484220/">  Die Leute lieben die Lieferung.  Gegen eine geringe Geb√ºhr k√∂nnen Sie die richtigen Produkte kaufen, ohne Ihr Zuhause zu verlassen: Lebensmittel aus Ihrem Lieblingsrestaurant, √ºbergro√üe M√∂bel, ein Buch, das Sie schon lange lesen wollten, und so weiter.  Und die Zunahme der Serviceleistungen f√ºr die schnelle Lieferung von allem auf der Welt best√§tigt diese These nur.  Ja, und f√ºr L√§den ist das ein Plus - er hat sich mit jeder Lieferung von Waren an die T√ºr zusammengetan und seinen Scheck erh√∂ht. <br><br>  Wir bei "Crossroads" haben unsere eigene Lieferung.  F√ºr eine Person von au√üen sieht der Prozess der Lieferung von einem Gesch√§ft zu einem Haus ungef√§hr so ‚Äã‚Äãaus: <br><br><ol><li>  Ich habe etwas auf der Website ausgew√§hlt und es in den Warenkorb gelegt. </li><li>  Ich habe die Adresse eingegeben und die Bestellung bezahlt. </li><li>  Der Laden gab die Bestellung schnell an den Kurier. </li><li>  Der Kurier hat die Bestellung geliefert. </li></ol><br>  Tats√§chlich ist alles etwas komplizierter.  Mein Name ist Vitaliy, ich bin der Leiter der Entwicklungsabteilung und heute werde ich Ihnen sagen, wie alles bei uns funktioniert.  Und worauf. <br><br><img src="https://habrastorage.org/webt/vo/rn/u7/vornu7hu0kjkmk1jwluuqb1usj4.jpeg"><br><a name="habracut"></a><br>  Zwei Anwendungen sind f√ºr die Stabilit√§t des Prozesses verantwortlich - eine Showcase- und eine mobile Benutzeranwendung.  Bei der Ladenfront ist alles klassisch - der K√§ufer besucht die Website, verbringt einige Zeit damit, Produkte auszuw√§hlen, den Korb zu f√ºllen und die Produktkarten zu untersuchen.  Der letzte Schritt besteht darin, eine Bestellung aufzugeben.  Danach wird der Auftrag zur weiteren Bearbeitung an das Backoffice √ºbergeben. <br><br>  Im Allgemeinen ist ein Backoffice f√ºr einen Online-Shop ein System, in dem viele Aktionen mit Waren ausgef√ºhrt werden: Wir schreiben die Teilnahme von Waren an bestimmten Werbeaktionen vor, binden Banner an diese, markieren Markenzonen und vieles mehr.  Selbstverst√§ndlich werden hier Bestellungen bearbeitet.  Wenn der K√§ufer den Bestellvorgang abschlie√üt und die Bestellung im Backoffice eintrifft, muss dies best√§tigt werden.  Dies geschieht automatisch, wenn wir diesen K√§ufer bereits kennen, oder wenn der Bediener im manuellen Modus nach dem √ºblichen Schema "Hallo, haben Sie hier etwas bestellt, best√§tigen Sie, sind die Daten korrekt?" Und so weiter.  Und hier endet bereits die Teilnahme des Backoffices an der Erstellung der Lieferung, die Bestellung wird best√§tigt, der Status wechselt von ‚ÄûVerarbeitet‚Äú auf ‚ÄûIn Bearbeitung‚Äú.  Eine Bestellung in WMS (bei der es sich um reservierte, abgeholte, bestellte Waren handelt, die nicht verf√ºgbar sind und die beim Lieferanten auf Bestellung angefertigt werden) und gleichzeitig von einem Logistiker weitergeleitet werden k√∂nnen.  WMS und Logistik sind im Gro√üen und Ganzen unabh√§ngige Systeme, die parallel mit Auftr√§gen arbeiten. <br><br><h3>  Inzwischen auf Lager </h3><br>  WMS-System ist eine Kombination unserer Software, Lager, Mitarbeiter dieser Lager und Ger√§te, die das Leben dieser Mitarbeiter erheblich vereinfachen.  √úber ein kleines Terminal, das am Handgelenk eines Mitarbeiters angebracht ist, k√∂nnen Sie schnell eine Bestellung in der gew√ºnschten Reihenfolge zusammenstellen. <br><br><img src="https://habrastorage.org/webt/fb/bj/sj/fbbjsjtm6z0gt3l5zx4yi6zcjz4.jpeg"><br><br>  Konsistenz ist wichtig, da wir unsere Kunden in speziellen Crossroads-Boxen beliefern.  Und mit einer Schachtel etwas - es ist rechteckig.  Wie die meisten Boxen. <br><br>  Daher ist es notwendig, zwei Bedingungen gleichzeitig zu beachten - und die Schachtel selbst so weit wie m√∂glich zu f√ºllen, damit der Kunde nicht zwei Schachteln erh√§lt, die nur zur H√§lfte gef√ºllt sind (es ist sowohl unwirtschaftlich als auch umweltfreundlich und im Allgemeinen seltsam), und die Schachtel nach dem Prinzip ‚Äûvon schwer nach leicht‚Äú zu f√ºllen ".  Das System ber√ºcksichtigt die Gr√∂√üe des Produkts und seiner Verpackung.  Wenn Sie dies und die Boxparameter kennen, ist es m√∂glich, Auftr√§ge so zu bilden, dass die Box maximal gef√ºllt ist.  Auf diese Weise k√∂nnen Sie auch Situationen loswerden, in denen das Auto des Kuriers scheinbar alle zu 100% mit Kartons beladenen, aber zur H√§lfte leeren Teile ersetzt hat. <br><br>  Und das System schreibt f√ºr den Lagerarbeiter in welcher Reihenfolge die Bestellung abgeholt werden soll.  Wenige Leute wollen eine Schachtel, in der ein guter Lagermitarbeiter drei Dutzend Eier auf den Boden legt und zum Beispiel vorsichtig 10 P√§ckchen Milch und ein paar Kilogramm Gem√ºse darauf legt.  Mit Milch wird sicher alles in Ordnung sein, was man nicht √ºber Eier sagen kann.  Alle Arten von zerbrechlichen Keksen sind auch immer oben. <br><br><img src="https://habrastorage.org/webt/nq/hd/ml/nqhdmlyl2ybszay3eo2jocrd7sg.jpeg"><br><br>  Au√üerdem m√ºssen Sie die Regeln der Nachbarschaft von Waren befolgen.  Angenommen, es ist ziemlich traurig f√ºr Sie, wenn Sie 2 Sorten √Ñpfel, Br√∂tchen und Fisch bestellt haben, und all diese Sachen stanken nicht nach Fisch, sondern nach Reinigungsmittel im Allgemeinen, weil alles in einer Schachtel angekommen ist.  Daher Lebensmittel - getrennt, Haushaltschemikalien - getrennt.  Die Nachbarschaft der Waren wird √ºbrigens von SanPiN-Standards bestimmt.  Und wir beobachten sie.  Aus menschlicher Sicht ist dies ein logisches und einzig wahres Modell.  Aus Sicht des Lagers sind dies zus√§tzliche Variablen beim Aufbau der Lagerarbeiterroute. <br><br>  Das System ber√ºcksichtigt alles und erstellt eine Route, √ºber die der Mitarbeiter die Bestellung in der gew√ºnschten Reihenfolge sammelt - das Terminal f√ºhrt ihn zum richtigen Regal.  Wenn Sie √ºbertreiben, sieht die Arbeit des Client-Teils der Anwendung so aus: ‚ÄûGuy, gehen Sie zu B4, nehmen Sie 5 P√§ckchen Mehl mit und legen Sie sie auf den Boden der Schachtel.  Dann von A2 schnappen Sie sich die Milch.  Nein, nicht dieser, da liegt in dieser Zelle. ‚Äú <br><br><img src="https://habrastorage.org/webt/r7/tr/ve/r7trvey_hhcwxgzqtcnq9p4fsag.jpeg"><br><br>  Sobald sie einen Antrag f√ºr Lagerarbeiter gestellt hatten, musste ein Kurierantrag gestellt werden.  Es hilft nicht nur, Routen zu erstellen, sondern auch dabei, Schecks schnell auszudrucken und neue Auftragsst√§nde zu notieren.  Nun, Metriken, wo gibt es keine Metriken - wir sehen, wo sich ein bestimmter Kurier befindet, er passt normalerweise in den Zeitplan oder nicht, er druckte einen Scheck aus, wenn er die Bestellung an den K√§ufer √ºbertrug oder nicht, und so weiter. <br><br><img src="https://habrastorage.org/webt/gc/ni/r9/gcnir9cqhhgmsyhsclvpqy-ylkw.png"><br><br>  √úbrigens, warum drucken wir nicht gleich Schecks aus? Wenn wir unsere Kartons zum Kunden bringen, kann er jedes Produkt aus irgendeinem Grund ablehnen.  Zum Beispiel konnte er sich Eis kaufen, oder er kochte sofort zwei Liter Milch und entschied, dass Fisch und eingelegte Gurken f√ºr heute Abend nur eine Idee waren.  Im Allgemeinen kann es viele Gr√ºnde geben, eine Position abzulehnen, einschlie√ülich einer ‚ÄûMeinungs√§nderung‚Äú.  Aus diesem Grund l√∂scht der Kurier die vom Kunden abgelehnten Positionen und druckt den endg√ºltigen Scheck aus. <br><br><h3>  Unter der Haube </h3><br>  Wir schreiben unsere Anwendungen auf Swift und Kotlin (iOS bzw. Android).  In diesem Fall dreht sich das gesamte Backend in PHP, wir haben uns entschieden, die Datenbank auf Postgres zu erstellen, f√ºr den Broker haben wir Rabbit mq. <br><br>  Ja, es ist klar, dass im Jahr 2019 jeder zuerst alles nach dem Prinzip des Mobilfunks macht, aber irgendwie hat sich herausgestellt, dass die Website dennoch n√§her und teurer ist.  Er arbeitet bei Lavarel.  In Richtung Microservices sind wir auch gerade dabei, uns zu bewegen, und im Moment sind sowohl die Site als auch die Anwendung ein so starker Monolith, der darauf wartet, dass er bereits f√ºr Microservices entfernt wird. <br><br>  Das erw√§hnte Postgres zeigt sich √ºbrigens von Zeit zu Zeit als Engpass, also werden wir etwas √§ndern.  Wir setzen aktiv Balancer ein, da die Belastung der Systeme sehr unterschiedliche Werte annehmen kann. <br><br>  All diese Dinge befinden sich bequem auf den Servern in dieser Form: <br>  16 Applikationsserver mit PHP-FPM und Postgres, Postgres hat 1 Master und 4 Slaves.  Wie Sie sehen, keine Fahrr√§der.  Das gesamte Backoffice ist vollst√§ndig in die internen Systeme integriert - WMS, Lager, Logistik, Buchhaltung und Marketing. <br><br>  Wir haben die mobile Anwendung und Website im Jahr 2017 gestartet.  Die durchschnittliche Auslastung des Systems liegt heute bei 6.000 Bestellungen pro Tag.  Einerseits ist es nicht sehr wichtig, andererseits ist es immer noch erw√§hnenswert, dass dies nicht gleichm√§√üig √ºber 24 Stunden verteilt ist. Die Leute bestellen kein Essen rund um die Uhr. Es gibt auch ein Strumpfband f√ºr normale Aktivit√§ten w√§hrend der Arbeitszeit.  PHP-Abfragen selbst (einschlie√ülich der API) sind in 5 Minuten ungef√§hr 70.000. <br><br><h3>  Bestellpfad </h3><br>  Sobald die Bestellung im Lager erfolgreich zusammengestellt wurde und bereit f√ºr eine Reise ist, wird sie weitergeleitet.  Jetzt haben wir begonnen, Yandex.Routing zu verwenden - ein gutes Produkt, mit dem wir unter Ber√ºcksichtigung der Verkehrssituationen - Stau, Wetter, B√∂den, Barrieren und andere Freuden - schnell die optimale Route f√ºr die Fahrer erstellen k√∂nnen.  Dies hilft uns, Kraftstoff zu sparen, damit Kuriere nicht die Stadt umrunden.  Der Fahrer hat eine klare Route, eine Liste der Reihenfolge, in der Bestellungen transportiert werden sollen, die Bestellungen selbst werden so im Auto abgelegt, dass sie in der gleichen Reihenfolge geliefert werden. <br><br><img src="https://habrastorage.org/webt/ad/lw/-n/adlw-nhq5gqszohajkwaymwqnsm.jpeg"><br><br>  Wir haben den Antrag f√ºr Kuriere f√ºr Android, wie ich bereits schrieb, auf Kotlin gestellt.  Hier wird das Routing gen√§ht, die M√∂glichkeit, mit dem Kunden zu kommunizieren (wir verbergen die Kundennummer, der Fahrer hat nur die Schaltfl√§che "Anrufen"), die M√∂glichkeit, die Bestellung zu bearbeiten und etwas zu entfernen, den Scheck auszudrucken und auch die Bestellung zu bezahlen. <br><br><img src="https://habrastorage.org/webt/xt/1f/aq/xt1faql6nzdxupzg_vz4pjmtvj8.png"><br><br>  Unabh√§ngig von der Telemetrie: Die Anwendung ber√ºcksichtigt alles: die Reisezeit, die Ankunftszeit beim Kunden und die Abfahrtszeit. Dies tr√§gt erheblich dazu bei, viele analytische Berichte zu erstellen und die Logistik zu verfolgen.  Zum Beispiel bewegt sich der Kurier f√ºr einige Zeit nicht, aber im Allgemeinen sollte er - sie kontaktieren ihn und geben an, ob alles in Ordnung ist.  Die Verbindung mit der Logistik ist in dieser Hinsicht sehr wichtig, da es Situationen gibt, in denen der Kurier beispielsweise um 15.00 Uhr an einer Adresse und um 15.30 Uhr an einer anderen sein sollte.  Aber bei der ersten Adresse gab es ein Problem aufgrund der Zugangskontrolle auf dem Hof, einer Schranke oder einem Tor. Ich musste zus√§tzliche 10 Minuten aufwenden, um den Kunden zu kontaktieren, damit der Kunde die Sicherheitsabteilung kontaktierte und so weiter. Sie wissen, wie es passiert. <br><br><img src="https://habrastorage.org/webt/cb/jr/pv/cbjrpvltj1-mgahk1ww7dvvtevw.jpeg"><br><br>  Aus Sicht des Kunden ist dies jedoch um 15.30 Uhr nie sein Problem. Er wartet zum angegebenen Zeitpunkt auf die Bestellung.  Daher kontaktiert der Fahrer die Logistiker, √ºberwacht genau seine Telemetrie und kontaktiert selbst den n√§chsten Kunden, wobei er das Zeitintervall f√ºr die Lieferung aufgrund einer St√∂rung an der Barriere angibt.  Nat√ºrlich ist es in jedem Fall traurig, wenn der Kurier zu sp√§t kommt.  Aber wenn er zu sp√§t ist und nicht davor warnt, ist es noch schlimmer. <br><br>  Wenn es grundlegend ist, arbeiten wir im Allgemeinen so.  Sie interessieren sich vielleicht mehr f√ºr die Funktionsweise des Lagers und des WMS oder f√ºr Anwendungen f√ºr den Fahrer oder die Lagerarbeiter oder f√ºr das Routing. Schreiben Sie einfach in den Kommentaren dar√ºber, und ich werde einen separaten Beitrag verfassen. <br><br>  Danke f√ºrs Lesen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de484220/">https://habr.com/ru/post/de484220/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de484208/index.html">Verwendung des maschinellen Lernens bei der statischen Analyse des Programmquellcodes</a></li>
<li><a href="../de484212/index.html">Free stuff for karma - die Geschichte eines belarussischen Startups, das das Konsumprinzip √§ndert</a></li>
<li><a href="../de484214/index.html">Tensoren in TensorFlow</a></li>
<li><a href="../de484216/index.html">Zweite Zabbix-Konferenz in Russland: Anmeldung und wichtige Termine</a></li>
<li><a href="../de484218/index.html">Wir optimieren die Automatisierung: So haben wir die Autotests um das 3-4-fache beschleunigt und dabei die alten Entwicklungen bewahrt</a></li>
<li><a href="../de484222/index.html">Ein Versuch, das Problem der Ticketauswahl vor dem Urlaub zu l√∂sen</a></li>
<li><a href="../de484224/index.html">Bitweise LSD-Sortierung (Radix-Sortierung)</a></li>
<li><a href="../de484236/index.html">Geister in den Wolken: Details zum Hacken vieler Unternehmen</a></li>
<li><a href="../de484238/index.html">Das maschinelle Lernen war mit einem ungel√∂sten mathematischen Problem konfrontiert</a></li>
<li><a href="../de484240/index.html">Werden Sie Redner bei den Positive Hack Days 10. Call for Papers f√§ngt an</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>