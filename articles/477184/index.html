<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∏Ô∏è üë©üèª‚Äç‚öñÔ∏è ü•ã Fil√≥sofo de bot para vk.com üë©üèΩ‚Äçü§ù‚Äçüë©üèª üò≠ üóæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Basado en muchos art√≠culos dedicados al botovodam ... 

 Recientemente desarroll√© un proyecto interesante "llave en mano" dedicado a la red social vk....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fil√≥sofo de bot para vk.com</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477184/">  Basado en muchos art√≠culos dedicados al botovodam ... <br><br>  Recientemente desarroll√© un proyecto interesante "llave en mano" dedicado a la red social vk.com.  La tarea es simple: crear un bot que se pueda agregar a la conversaci√≥n y que proporcione citas aleatorias.  Pero parec√≠a demasiado simple, as√≠ que tuve que revivir al gran fil√≥sofo Friedrich Nietzsche, quien har√≠a un bot de un bot - overbot ... <br><br><img src="https://habrastorage.org/webt/mt/s2/bu/mts2buh2gnljp2ocjmctu-adzss.jpeg" alt="imagen"><br><a name="habracut"></a><br>  No vi nada complicado en esto, por lo que r√°pidamente se escribi√≥ un gui√≥n de este tipo: <br>  <b>Autorizaci√≥n -&gt; leer mensajes -&gt; analizar y generar una respuesta -&gt; respuesta</b> <br>  Todo esto se hizo usando <b>Callback API VK v.5.80</b> ( <i>nada nuevo</i> ) <br>  El punto m√°s dif√≠cil fue la "formaci√≥n de an√°lisis y respuesta".  De hecho, esto es lo m√°s importante. <br>  Pero el hecho es que quer√≠a crear un "bot m√°s o menos inteligente" que simplemente emitir√≠a una frase aleatoria del diccionario. <br><br>  "¬øC√≥mo lo hice y funcion√≥?" - por favor lea ... <br><br>  Entonces, ¬°comencemos! <br><br>  En principio, el bot tiene una funcionalidad bastante simple, pero es simple solo superficialmente.  Si profundiza, entonces todo es mucho m√°s complicado, porque escribiremos en <b>PHP</b> ( <i></i> ) <br><br>  Repito que no necesito solo un generador de cotizaciones, as√≠ que decid√≠ preguntarle al bot algo de l√≥gica.  Sin embargo, tampoco necesito una red neuronal, porque aprender es una tarea desalentadora. <br><br>  Resolv√≠ el problema con creatividad cuando intent√© revivir al gran fil√≥sofo del siglo XIX: Friedrich Nietzsche. <br><br>  S√≠, es Nietzsche quien estar√° en el papel del bot, y por lo tanto, incluso las citas aleatorias parecer√°n m√°s inteligentes. <br>  Pero de alguna manera quer√≠a unir al interlocutor y al bot, crear una conexi√≥n entre ellos ... <br><br>  Entonces, la frase del interlocutor se tom√≥ como base, que se transform√≥ mediante filtros en palabras clave, en las que se encontraron oraciones de una base de datos preparada previamente. <br><br>  As√≠, como si se formara la respuesta a la pregunta del interlocutor. <br><br>  Recib√≠ un nuevo mensaje del usuario como este: <br><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  case 'message_new': //... id   $user_id = $data-&gt;object-&gt;peer_id; //   $body = $data-&gt;object-&gt;text;</span></span></code> </pre> <br>  Y luego trajo el mensaje en una forma adecuada para resaltar las palabras clave y alimentarlas en una b√∫squeda en la base de datos. <br><br>  En primer lugar, me deshice completamente de las terminaciones " <i>a, y, s, am, yami, ah, oh ...</i> " y as√≠ sucesivamente ... elimin√© los signos de puntuaci√≥n y otros caracteres. <br><br>  En segundo lugar, no tuve en cuenta las preposiciones.  Primero, limit√© las palabras a su longitud: hasta 3 letras.  Pero esto estaba mal, porque las filosof√≠as de Nietzsche se caracterizaban por palabras como: " <i>dios, mundo, roca, siglo, etc.</i> ".  Adem√°s, despu√©s de filtrar palabras de cuatro letras, hab√≠a palabras de tres letras, porque se descartaron las terminaciones.  Luego limit√© mi b√∫squeda a palabras como: " <i>sobre, qu√©, sobre, c√≥mo, d√≥nde, etc.</i> ". <br><br>  En tercer lugar, Nietzsche escribi√≥ m√°s en sus propios libros, por lo tanto, reemplaz√≥ las palabras entrantes como " <i>tuyo, tuyo, amor, puedes" con "m√≠o, m√≠o, amo, puedo</i> " <i>,</i> respectivamente. <br><br>  Por lo tanto, se obtiene una especie de di√°logo. <br><br>  Adem√°s, era necesario hacer una base, un diccionario de frases / citas / declaraciones de extractos de los libros de Nietzsche. <br><br>  Descargu√© los libros de Nietzsche en formato <u>txt</u> de litros.  Los reuni√≥ y luego los filtr√≥: <br><br>  1 cita = 1 oraci√≥n ( <i>us√≥ el delimitador como</i> <i>".", "! ',"? "</i> ) <br><br>  Result√≥ que la base es de este tipo: <br><br> <code> -  ,     , -    <br>  ,    ,  , ,     <br>    ,   ,   :      ,      <br>    ,  </code> <br> <br>  Bueno, hay una base de datos y un mensaje filtrado del usuario. <br><br> <code> : ",      ?" <br>  : "  "</code> <br> <br>  Queda por fijar el sistema de b√∫squeda.  Fue dif√≠cil con esto, porque diferentes configuraciones dieron diferentes resultados.  Y si un c√≥digo daba la respuesta correcta, la otra solicitud no daba lo que se necesitaba. <br><br>  Se decidi√≥ no usar expresiones regulares, sino usarlas junto con funciones integradas como: <br><br> <code>substr <br> stripos <br> substr_count <br></code> <br><br>  y otras caracter√≠sticas de texto ... <br><br>  Con la ayuda de largas condiciones de comparaci√≥n y ciclos infinitamente largos, logr√© aproximadamente el resultado deseado. <br><br>  La l√≥gica de b√∫squeda es algo como esto: revisa cada oraci√≥n y encuentra las palabras del mensaje entrante que est√°n presentes en esta oraci√≥n. <br><br>  Si se encuentra la palabra, entonces se agrega +1 como "peso de la variable". <br><br>  Por lo tanto, cuantas m√°s palabras se encuentran en la oraci√≥n, mayor es el "peso de la variable". <br><br>  Esto sugiere que si se encontraron las palabras "moralidad y vida" en alguna oraci√≥n de la base de datos, entonces esta ser√° una respuesta del 100% que se emitir√°. <br><br>  Pero si las palabras fueron sobre el tema y produjeron una gran parte del 100% de los resultados, entonces el m√©todo aleatorio () fue emitido por el m√©todo rand (). <br><br>  Adem√°s, estas no siempre fueron oraciones peque√±as, por lo que tuve que recortar la respuesta, m√°s o menos por dichos clientes habituales: <br><br><pre> <code class="php hljs"> preg_match(<span class="hljs-string"><span class="hljs-string">'/(?:^|\.\s+)([^\.]*?'</span></span>.$wordpattern.<span class="hljs-string"><span class="hljs-string">'[^\.]*?\.+)\s+/i'</span></span>, $text , $matches);</code> </pre> <br>  Entonces todo es autom√°tico: <br>  enviando mensaje <br><br><pre> <code class="php hljs">$request_params = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; $matches[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-comment"><span class="hljs-comment">#'message' =&gt; $find[0], 'peer_id' =&gt; $user_id, 'access_token' =&gt; $token, 'v' =&gt; '5.80' ); $get_params = http_build_query($request_params); file_get_contents('https://api.vk.com/method/messages.send?'. $get_params); header("HTTP/1.1 200 OK"); echo('ok');</span></span></code> </pre><br>  Espec√≠ficamente no cargu√© todo el c√≥digo, pero es relativamente peque√±o.  El objetivo era crear un motor de respuesta a pedido, en lugar de inteligencia artificialmente entrenada. <br><br>  Puedes probar el bot en <a href="http://vk.com/public189002559">este enlace</a> .  Solo escr√≠bele un mensaje.  Es importante saber que al comienzo de la oraci√≥n debe poner "Nietzsche", como si se refiriera a ella, solo entonces el bot responder√°. <br><br>  Esta es una versi√≥n de prueba y, por lo tanto, incompleta, por lo tanto, esteras, jerga juvenil, errores en las palabras, etc., el bot no tiene en cuenta y la base es de solo 10,000 frases. <br><br>  Como ejemplos, puedo dar los di√°logos: <br><br><img src="https://habrastorage.org/webt/pk/sf/lf/pksflfu977kmdx1fkalpzfyimd8.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/qi/bo/hy/qibohyxceqes_tfp1ssk2ahxvpi.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/nh/3q/kw/nh3qkw3lo1psfd91n1zemcmm244.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/su/yf/-q/suyf-qgn2vqhxsezugd88eauw1g.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/p0/y7/he/p0y7heepmhe-fee55gj0urquuxs.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/fo/6v/g2/fo6vg2bsus5g1yekhvidrgd0nou.png" alt="imagen"><br><br>  Conclusi√≥n: S√≠, el bot no tiene comunicaci√≥n bidireccional con el usuario, no es inteligencia artificial.  Pero en una conversaci√≥n de un gran n√∫mero de participantes, el bot se convertir√° en un buen "interlocutor". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/477184/">https://habr.com/ru/post/477184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../477170/index.html">C√≥mo fui a una reuni√≥n en la escuela 21</a></li>
<li><a href="../477176/index.html">Qu√© herramientas ayudar√°n a cumplir con el RGPD</a></li>
<li><a href="../477178/index.html">Programaci√≥n moderna: una mirada despu√©s de 25 a√±os de descanso o como escrib√≠ el bot para Telegram</a></li>
<li><a href="../477180/index.html">Antecedentes: qu√© es QoE y por qu√© un proveedor debe trabajar con √©l</a></li>
<li><a href="../477182/index.html">[Por los muelles] Aleteo. Parte 2. Para desarrolladores de iOS</a></li>
<li><a href="../477186/index.html">10 a√±os en un sitio remoto y lo que vino de √©l</a></li>
<li><a href="../477190/index.html">Otra forma: LFS, multiusuario y el progreso actual de Indie Action / RPG</a></li>
<li><a href="../477192/index.html">M√©todos de m√≠nimos cuadrados: texto escrito por un programador para programadores</a></li>
<li><a href="../477194/index.html">Hablemos Sobre la descomposici√≥n y la depresi√≥n</a></li>
<li><a href="../477198/index.html">Keylogger con sorpresa: an√°lisis del keylogger y decano de su desarrollador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>