<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ‘ˆğŸ¾ ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ èˆ’é€‚åœ°å”¤é†’-è‡ªå·±åŠ¨æ‰‹åšç¯å…‰è­¦æŠ¥ ğŸ˜µ ğŸ¤šğŸ½ â›ªï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ‰€ä»¥ç§‹å¤©æ¥äº†... 
 å†¬å¤©åŠ¿ä¸å¯æŒ¡ï¼Œå³å°†æ¥ä¸´-æ—©æ™¨æ˜¯é»‘æš—ï¼Œæ™šä¸Šæ˜¯é»‘æš—ã€‚
 åœ¨å®Œå…¨é»‘æš—çš„ç¯å¢ƒä¸­å”¤é†’é—¹é’Ÿç­‰åŒäºåœ¨å†°ä¸‹æ½œæ°´ã€‚æ—©ä¸Šå‹åŠ›å¤§-ä¿è¯å¹³æ·¡çš„ä¸€å¤©ã€‚
 
 è§£å†³çš„åŠæ³•æ˜¯ï¼Œå…‰æŠ¥è­¦å™¨è¢«ç§°ä¸ºï¼Œä½†æ˜¯è¿™ä¸ªä¸œè¥¿çš„ä»·æ ¼æ˜¯ä»5000å¢å¸ƒèµ·ã€‚ä½†æ˜¯ï¼Œå®ƒä¼šåˆºç ´ã€‚æ­¤å¤–ï¼Œè¿ç®—ç®—æ³•æ˜¯ç¡¬ç¼–ç çš„ï¼Œå¾ˆæ˜æ˜¾ï¼Œæ ¹æ®å”¤é†’çš„ç»“æœï¼Œæ‚¨å°†éœ€è¦çº ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>èˆ’é€‚åœ°å”¤é†’-è‡ªå·±åŠ¨æ‰‹åšç¯å…‰è­¦æŠ¥</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/masterkit/blog/384925/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€ä»¥ç§‹å¤©æ¥äº†... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†¬å¤©åŠ¿ä¸å¯æŒ¡ï¼Œ</font><font style="vertical-align: inherit;">å³å°†æ¥ä¸´</font><font style="vertical-align: inherit;">-æ—©æ™¨æ˜¯é»‘æš—ï¼Œæ™šä¸Šæ˜¯é»‘æš—ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å®Œå…¨é»‘æš—çš„ç¯å¢ƒä¸­å”¤é†’é—¹é’Ÿç­‰åŒäºåœ¨å†°ä¸‹æ½œæ°´ã€‚æ—©ä¸Šå‹åŠ›å¤§-ä¿è¯å¹³æ·¡çš„ä¸€å¤©ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è§£å†³çš„åŠæ³•æ˜¯ï¼Œå…‰æŠ¥è­¦å™¨è¢«ç§°ä¸ºï¼Œä½†æ˜¯è¿™ä¸ªä¸œè¥¿çš„ä»·æ ¼æ˜¯ä»5000å¢å¸ƒèµ·ã€‚ä½†æ˜¯ï¼Œå®ƒä¼šåˆºç ´ã€‚æ­¤å¤–ï¼Œè¿ç®—ç®—æ³•æ˜¯ç¡¬ç¼–ç çš„ï¼Œå¾ˆæ˜æ˜¾ï¼Œæ ¹æ®å”¤é†’çš„ç»“æœï¼Œæ‚¨å°†éœ€è¦çº æ­£æŸäº›é—®é¢˜æˆ–æ‰©å±•åŠŸèƒ½ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå¦‚æœåœ¨å³å…´åˆ›ä½œçš„åŸºç¡€ä¸Šä»¥è¿™ç§ç²¾ç¥æ¥æ„å»ºæŸç§ä¸œè¥¿å‘¢ï¼Ÿ DIYå¥½æ‹¼å›¾ï¼</font></font><br>
<br>
<img src="https://habrastorage.org/files/5f3/fc3/9c3/5f3fc39c378640398f50ca774d9ae979.JPG"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥è§£å†³æ–¹æ¡ˆä½¿ç”¨äº†ä»¥ä¸‹ææ–™ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -ç”¨äº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Nanoçš„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨äºå­¦ä¹ Arduinoç¼–ç¨‹çš„å¥—ä»¶çš„è°ƒè¯•æ¿çš„åŸå‹ï¼ˆåŒ…æ‹¬åœ¨å°†æ¥çš„NR05å¥—ä»¶ä¸­ï¼‰</font><font style="vertical-align: inherit;">ï¼›</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -å®æ—¶</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ—¶é’ŸMP1095</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼›</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -LEDä¸åŒï¼›</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -å†…ç½®å‘ç”Ÿå™¨çš„å‹ç”µé«˜éŸ³æ‰¬å£°å™¨ï¼›</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -ç™½è‰²åŠé€æ˜çš„ä¸œè¥¿ï¼Œåœ¨è°ƒè¯•3Dæ‰“å°æœºæ—¶å°†å…¶æ‰“å°å‡ºæ¥ï¼ˆæ‚¨å¯ä»¥å°†å…¶ä»–åŠé€æ˜çš„ä¸œè¥¿ç”¨ä½œæ‰©æ•£å™¨ï¼Œå¹¶ä¸”æ‹¥æœ‰</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3Dæ‰“å°æœºçš„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»ä½•äººéƒ½</font><font style="vertical-align: inherit;">å¯ä»¥æ‰“å°è‡ªå·±çš„ä¸œè¥¿ï¼‰ï¼›</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -å¸Œæœ›å°†æ‰€æœ‰è¿™äº›ç»“åˆèµ·æ¥å¹¶ç¼–å†™åˆé€‚çš„å·¥ä½œç®—æ³•çš„æ„¿æœ›ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æƒ³å°†ç™½è‰²ç‰©ä½“å †æ”¾åœ¨æŸä¸ªåŸºåº§ä¸Šï¼Œä»¥ä¾¿å°†LEDå®‰è£…åœ¨è¯¥åŸºåº§ä¸Šï¼Œå¹¶ç”¨ç”µç¼†å°†å…¶è¿æ¥åˆ°æ¿ä¸Šã€‚æ— éœ€ä¸‰æ€è€Œåè¡Œï¼Œæˆ‘ä»¬ç»˜åˆ¶SketchUpå¹¶åœ¨3Dæ‰“å°æœºä¸Šæ‰“å°æ©™è‰²æ”¯æ¶ã€‚å¸¦ç€å¼ºçƒˆçš„æ„¿æœ›ï¼Œæ‚¨å¯ä»¥ä¸ºåŸå‹æ¿æ‰“å°å¤–å£³ï¼Œä½†æ˜¯åŸå‹éå¸¸æ¼‚äº®ï¼</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤å¤–ï¼Œå®ƒè¿˜å¯ä»¥ç”¨äºå…¶ä»–é¡¹ç›®çš„å¼€å‘ï¼Œå¹¶ä¸”æ ¹æ®åŸå‹çš„æ“ä½œç»“æœï¼Œå¯ä»¥åœ¨åŒä¸€Arduino Nanoæ¿ä¸ŠåŸºäºæ›´ç´§å‡‘çš„è®¾è®¡æ¥å®‰æ’é—¹é’Ÿã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆå¡ä½ä¸€ä¸ªLEDã€‚å®ƒä½¿ç”¨é€šè¿‡ç´«å¤–çº¿è¾å°„å›ºåŒ–çš„åˆ›æ–°ç²˜åˆå‰‚ç²˜åˆåˆ°åº•åº§ä¸Šã€‚ç§°ä¸ºé‚¦è¿ªå…‹ã€‚æˆ‘å¿…é¡»è¯´åœ¨å®¶åº­æœ‰ç”¨çš„ä¸œè¥¿ï¼ç´§ç´§æŠ“ä½ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/files/ac3/310/7fc/ac33107fcbd94b2f9b6b24bfd4e10d97.JPG"><br>
<br>
<img src="https://habrastorage.org/files/66e/8f9/bb6/66e8f9bb685b40fd9941769b8abb95af.JPG"><br>
<br>
<img src="https://habrastorage.org/files/31d/f98/81e/31df9881ed1a420e89fdc1db0ac67a2b.JPG"><br>
<br>
<img src="https://habrastorage.org/files/9a0/28e/7db/9a028e7db8d5402fa377911d97cecc59.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»–ä»¬ç”¨ç›¸åŒçš„èƒ¶æ°´ç²˜ç€è¿æ¥å™¨ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/files/0f5/c4b/a82/0f5c4ba82016493ebd9630d0b3efcace.JPG"><br>
<br>
<img src="https://habrastorage.org/files/bd1/e94/646/bd1e946460d447e093e8f6a29b19eec0.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬çœ‹ç€å¦‚ä½•å‘å…‰ã€‚ä¸å–œæ¬¢ã€‚å½“ç„¶ï¼Œåœ¨é»‘æš—ä¸­å®ƒæ˜¯å¯è§çš„ï¼Œä½†ä¸è¶³ä»¥é€šè¿‡å…‰å­¦æ„Ÿå—å™¨æ¿€æ´»å¤§è„‘ã€‚å‡ ä¸ªbrightå¤´ä¸Šåˆ’ç ´äº†å‡ ä¸ªæ˜äº®çš„ç™½è‰²LEDã€‚åœ¨è¿™æ ·çš„æ ‘æä¸­å¹¶è¡Œç»„åˆï¼Œå®ƒä»¬å¯ä»¥åœ¨æœ€å¤§äº®åº¦ä¸‹å®Œå…¨å”¤é†’ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/files/c59/100/f8f/c59100f8fe8f401caa92487c8e0dd0f2.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒä»¬æ¶ˆè€—çš„æœ€å¤§ç”µæµçº¦ä¸º100 mAï¼Œæ‚¨æ— æ³•ç›´æ¥è¿æ¥è‡³Arduinoç«¯å£ï¼Œä½†æ˜¯è°ƒè¯•æ¿ä¸Šæœ‰ä¸€ä¸ªæ™¶ä½“ç®¡ç”µæµæ”¾å¤§å™¨ï¼Œå¯æä¾›200 mAçš„ç”µæµã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/files/ce4/e92/fb2/ce4e92fb299d460db5f2cb8999696b2f.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¿ä¸Šè¿˜æœ‰äº”ä¸ªç”¨äºå„ç§å®éªŒçš„æŒ‰é’®ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ¥æ§åˆ¶æ¨¡å¼å¹¶è®¾ç½®è­¦æŠ¥ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ï¼Œè°ƒè¯•æ¿å¾ˆæœ‰è¶£ï¼Œå› ä¸ºæœ‰æ ‡è®°çš„è¿æ¥å™¨å¼•è„šç”¨äºè¿æ¥å„ç§ä¼ æ„Ÿå™¨å’Œæ‰§è¡Œå™¨ï¼Œæä¾›è‰¯å¥½çš„åŠŸèƒ½å’Œå‹å¥½çš„ç•Œé¢-æ‚¨å¯ä»¥æ¯«ä¸çŠ¹è±«åœ°è¿æ¥æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œå‹åŠ›ä¼ æ„Ÿå™¨ï¼Œä¼ºæœå™¨ï¼Œç»§ç”µå™¨ï¼Œå…·æœ‰I2Cæ¥å£çš„è®¾å¤‡ï¼ˆå¸¦ç¬¦å·ï¼‰ã€‚ç­‰ç­‰å¯¹äºè¿æ¥ï¼Œä»…éœ€è¦å¸¦æ’åº§çš„ç”µçº¿ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/files/58f/97f/731/58f97f73130c4f56a105263af6e3485b.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†ä½¿ç”¨ä»Arduinoçš„ç¬¬ä¹ä¸ªå¼•è„šæ–­å¼€çš„PWMè°ƒèŠ‚äº®åº¦ï¼Œè¯¥å¼•è„šåœ¨æ¿ä¸Šä¸æ”¾å¤§å™¨åˆ†å¼€ã€‚æˆ‘ä»¬å°†é«˜éŸ³æ‰¬å£°å™¨è¿æ¥åˆ°DAT plusä¸Šï¼ŒGNDä¸Šå‡å»çš„SOUNDè¿æ¥å™¨ã€‚å®æ—¶æ—¶é’Ÿ-è¿æ¥è‡³I2C_5Vè¿æ¥å™¨ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦5Vçš„ç”µæºã€‚è¯„ä¼°æ¿ä¸Šå·²ç»æœ‰ä¸¤è¡ŒLCDæŒ‡ç¤ºå™¨ï¼Œå¯¹æ¯”é²œæ˜ï¼Œè“è‰²èƒŒæ™¯ä¸Šå¸¦æœ‰æ¼‚äº®çš„ç™½è‰²å­—ç¬¦ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®é™…ä¸Šï¼Œæ‰€æœ‰ç¡¬ä»¶éƒ½å·²å®‰è£…åˆ°ä½ï¼Œç°åœ¨ç”±è½¯ä»¶å†³å®šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ç®—æ³•çš„æ„æƒ³å¦‚ä¸‹ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -å½“å½“å‰æ—¶é—´ä¸è®¾ç½®è­¦æŠ¥çš„æ—¶é—´ä¸€è‡´æ—¶ï¼Œç¯çš„äº®åº¦åº”ç¼“æ…¢å¢åŠ åˆ°æœ€å¤§ï¼›</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -åŒæ—¶ï¼Œå£°éŸ³ä¿¡å·åº”æŒ‰å‡åºå‘å°„å‡ æ¬¡ï¼Œä»¥é˜²æ­¢å”¤é†’å¯¹è±¡è¿›å…¥ç¯æ³¡å¹¶å…¥ç¡ï¼›</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -æ‚¨å¿…é¡»æœ‰æœºä¼šæœ€åå…³é—­çƒ¦äººçš„å£°éŸ³ï¼Œä»¥åŠæ‰‹åŠ¨æ‰“å¼€æˆ–å…³é—­å…¨å…‰ï¼Œå·²ç»å®Œå…¨æ¸…é†’äº†ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -åº”è¯¥å¯ä»¥åœ¨æ—¶é’Ÿå’Œé—¹é’Ÿä¸Šè®¾ç½®æ—¶é—´ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”Ÿæˆçš„è‰å›¾æ˜¾ç¤ºåœ¨ææ–™çš„æœ«å°¾ï¼Œå¹¶æä¾›äº†è¯¦ç»†çš„æ³¨é‡Šã€‚</font><font style="vertical-align: inherit;">å¯ä»¥å¾ˆå®¹æ˜“åœ°ä¿®æ”¹æ‚¨çš„éœ€æ±‚å’Œåå¥½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¥å¤§å®¶æœ‰ä¸ªç¾å¥½çš„è§‰é†’ï¼</font></font><br>
 <br>
<img src="https://habrastorage.org/files/804/23b/c36/80423bc361f943a4a6c44f11867a73b5.JPG"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é—¹é’Ÿç¨‹åºç¤ºæ„å›¾</font></font></b><div class="spoiler_text">//      <br>
#include &lt;LiquidCrystalRus.h&gt;<br>
#include &lt;LiquidCrystalExt.h&gt;<br>
#include &lt;LineDriver.h&gt;<br>
//     I2C<br>
#include &lt;Wire.h&gt;<br>
//      RTC<br>
#include Â«RTClib.hÂ»<br>
//       2<br>
//     <br>
#include &lt;MsTimer2.h&gt;<br>
<br>
//-----------------------------------------------------------------------<br>
#define NUM_KEYS 5<br>
//       ( )<br>
int adcKeyVal[NUM_KEYS] = {30, 150, 360, 535, 760};<br>
//-----------------------------------------------------------------------<br>
<br>
int led13 = 13; //   Arduino Nano <br>
int alarmPin = 3; //     <br>
int led = 9; //      <br>
int brightness = 0; //  <br>
int riseAmount = 1; //    0-255<br>
int timeAmount = 500; //  , <br>
int beepCount = 0; //  <br>
int numberOfBeeps = 0;<br>
unsigned long time_old;<br>
unsigned long time_curr;<br>
int alarm = 0; //   <br>
int Step; //  <br>
unsigned long tSetOld;<br>
unsigned long tTickOld;<br>
<br>
//     lcd,      RS,EN,DB4,DB5,DB6,DB7<br>
LiquidCrystalRus lcd(A1, A2, A3, 2, 4, 7);<br>
<br>
//    RTC<br>
RTC_DS1307 RTC;<br>
<br>
int Year; //      RTC<br>
int Month;<br>
int Day;<br>
int Hour;<br>
int Minute;<br>
int Second;<br>
int alarmHour = 0;<br>
int alarmMinute = 0;<br>
int setAlarm = 0; //  ./.<br>
int SetMode = 0; //   / ./.<br>
int AlarmOn; //  ./.<br>
<br>
void setup() {<br>
 pinMode(led13, OUTPUT);<br>
 pinMode(3, OUTPUT);<br>
 lcd.begin(16, 2);<br>
 Wire.begin(); //  1Wire (  RTC)<br>
 RTC.begin(); //  RTC<br>
 RTC.writenvram(2, 0); //     00 ( 2   RTC)<br>
 tTickOld = millis(); //           <br>
 //    5,         <br>
 //     0<br>
 if (get_key() == 5) {<br>
 RTC.adjust(DateTime(__DATE__, __TIME__));<br>
 for (int i = 0; i &lt; 5; i++) RTC.writenvram(i, 0);<br>
 }<br>
<br>
}<br>
<br>
void loop() { <br>
<br>
AlarmOn = RTC.readnvram(3); //  3-   RAM RTC:   (1)   (0)<br>
 if (get_key() == 2) { //    2<br>
 SetMode++; //     <br>
 delay(500);<br>
 tSetOld = millis();<br>
 }<br>
<br>
while (SetMode) { //     <br>
 if (get_key() == 2) {<br>
 SetMode++;<br>
 delay(200);<br>
 tSetOld = millis();<br>
 }<br>
 if (SetMode &gt; 4) { //    <br>
 SetMode = 0;<br>
 lcd.noBlink();<br>
 lcd.noCursor();<br>
 }<br>
 switch (SetMode) { //   <br>
 case 1:<br>
 lcd.setCursor(12, 1); lcd.blink();<br>
 break;<br>
 case 2:<br>
 lcd.setCursor(9, 1); lcd.blink();<br>
 break;<br>
 case 3:<br>
 lcd.setCursor(12, 0); lcd.blink();<br>
 break;<br>
 case 4:<br>
 lcd.setCursor(9, 0); lcd.blink();<br>
 break;<br>
 }<br>
<br>
if (get_key() == 1 or get_key() == 3) { //    1  3<br>
 tSetOld = millis(); //      <br>
 if (get_key() == 3) Step = 1; //   3 â€”  <br>
 if (get_key() == 1) Step = -1; //   1 â€” <br>
 switch (SetMode) {<br>
 case 1:<br>
 SetMinuteAlarm(Step); //  <br>
 break;<br>
 case 2:<br>
 SetHrAlarm(Step); //  <br>
 break;<br>
 case 3:<br>
 SetMinute(Step); //   <br>
 break;<br>
 case 4:<br>
 SetHr(Step); //   <br>
 break;<br>
<br>
}<br>
 }<br>
<br>
if ((millis() â€” tTickOld) &gt; 1000) {<br>
 displayTime(); //          <br>
 tTickOld = millis();<br>
 }<br>
 if ((millis() â€” tSetOld) &gt; 10000) {<br>
 SetMode = 0; //      10 .<br>
 lcd.noBlink();<br>
 }<br>
 } // end SetMode<br>
<br>
if (get_key() == 4) { // / <br>
 int alarm_ram = RTC.readnvram(3);<br>
 RTC.writenvram(3, !alarm_ram);<br>
 delay(50);<br>
 AlarmOn = alarm_ram;<br>
 delay(500);<br>
 }<br>
<br>
if (get_key() == 5) { //   <br>
 alarm = 0;<br>
 digitalWrite(led13, LOW);<br>
 lightDown();<br>
 }<br>
<br>
if (get_key() == 5 &amp;&amp; brightness &gt;= 0) { //   <br>
 lightUp();<br>
 }<br>
<br>
if (get_key() == 1 &amp;&amp; !SetMode) { //    <br>
 //alarm = 0;<br>
 MsTimer2::stop();<br>
 digitalWrite(alarmPin, LOW);<br>
 }<br>
<br>
if ((millis() â€” tTickOld) &gt; 1000) {<br>
 displayTime(); //       <br>
 tTickOld = millis();<br>
 }<br>
<br>
if (alarm == 1) //   <br>
 {<br>
 digitalWrite(led13, HIGH);<br>
 time_curr = millis();<br>
 if ((time_curr â€” time_old) &gt; timeAmount) {<br>
 if (brightness &lt; 255) {<br>
 brightness = brightness + riseAmount;<br>
 time_old = time_curr;<br>
 if (brightness &gt; 255) brightness = 255;<br>
 analogWrite(led, brightness); //      <br>
 switch (brightness) { //      <br>
 case 60:<br>
 numberOfBeeps = 4;<br>
 alarmRun();<br>
 break;<br>
 case 120:<br>
 numberOfBeeps = 4;<br>
 alarmRun();<br>
 break;<br>
 case 180:<br>
 numberOfBeeps = 8;<br>
 alarmRun();<br>
 break;<br>
 case 220:<br>
 numberOfBeeps = 14;<br>
 alarmRun();<br>
 break;<br>
 }<br>
 if (brightness &gt;= 255) {<br>
 numberOfBeeps = 32000; //   (32000 )<br>
 alarmRun();<br>
 }<br>
 }<br>
 else digitalWrite(led13, LOW);<br>
 }<br>
 }<br>
<br>
} // end loop<br>
<br>
//----------------------------------------------<br>
int get_key() //     <br>
{<br>
 int input = analogRead(A6);<br>
 int k;<br>
 for (k = 0; k &lt; NUM_KEYS; k++)<br>
 if (input &lt; adcKeyVal[k])<br>
 return k + 1;<br>
 return 0;<br>
}<br>
<br>
void SetMinuteAlarm(int Step) { //   <br>
 alarmMinute = RTC.readnvram(1);<br>
 alarmMinute += Step;<br>
 if (alarmMinute &gt; 59) alarmMinute = 0;<br>
 if (alarmMinute &lt; 0) alarmMinute = 59;<br>
 RTC.writenvram(1, alarmMinute);<br>
 delay(300);<br>
}<br>
<br>
void SetHrAlarm(int Step) { //   <br>
 alarmHour = RTC.readnvram(0);<br>
 alarmHour += Step;<br>
 if (alarmHour &gt; 23) alarmHour = 0;<br>
 if (alarmHour &lt; 0) alarmHour = 23;<br>
 RTC.writenvram(0, alarmHour);<br>
 delay(300);<br>
}<br>
<br>
void SetMinute(int Step) { //   <br>
 DateTime now = RTC.now();<br>
 Year = now.year();<br>
 Month = now.month();<br>
 Day = now.day();<br>
 Hour = now.hour();<br>
 Minute = now.minute();<br>
 Second = now.second();<br>
 Minute += Step;<br>
 if (Minute &gt; 59) Minute = 0;<br>
 if (Minute &lt; 0) Minute = 59;<br>
 RTC.adjust(DateTime(Year, Month, Day, Hour, Minute, Second));<br>
 delay(300);<br>
}<br>
<br>
void SetHr(int Step) { //   <br>
 DateTime now = RTC.now();<br>
 Year = now.year();<br>
 Month = now.month();<br>
 Day = now.day();<br>
 Hour = now.hour();<br>
 Minute = now.minute();<br>
 Second = now.second();<br>
 Hour += Step;<br>
 if (Hour &gt; 23) Hour = 0;<br>
 if (Hour &lt; 0) Hour = 23;<br>
 RTC.adjust(DateTime(Year, Month, Day, Hour, Minute, Second));<br>
 delay(300);<br>
}<br>
<br>
void displayTime() { //   <br>
 DateTime now = RTC.now();<br>
 Year = now.year() â€” 2000;<br>
 Month = now.month();<br>
 Day = now.day();<br>
 Hour = now.hour();<br>
 Minute = now.minute();<br>
 Second = now.second();<br>
<br>
lcd.setCursor(0, 0);<br>
 lcd.print(Â«: â€);<br>
 if (Hour &lt; 10) lcd.print(' ');<br>
 lcd.print(Hour);<br>
 lcd.print(':');<br>
 if (Minute &lt; 10) lcd.print('0');<br>
 lcd.print(Minute);<br>
 lcd.print(':');<br>
 if (Second &lt; 10) lcd.print('0');<br>
 lcd.print(Second);<br>
<br>
int h = RTC.readnvram(0);<br>
 int m = RTC.readnvram(1);<br>
 int s = RTC.readnvram(2);<br>
<br>
if (AlarmOn) {<br>
 lcd.setCursor(0, 1);<br>
 lcd.print(â€œ: â€);<br>
 if (h &lt; 10) lcd.print(' ');<br>
 lcd.print(h);<br>
 lcd.print(':');<br>
 if (m &lt; 10) lcd.print('0');<br>
 lcd.print(m);<br>
 lcd.print(':');<br>
 if (s &lt; 10) lcd.print('0');<br>
 lcd.print(s);<br>
 }<br>
 else {<br>
 lcd.setCursor(0, 1);<br>
 lcd.print(â€œ: --:--:--Â»);<br>
 }<br>
<br>
if (Hour == h &amp;&amp; Minute == m &amp;&amp; Second == s &amp;&amp; AlarmOn) { //  !<br>
 alarm = 1;<br>
 numberOfBeeps = 2;<br>
 alarmRun();<br>
 }<br>
<br>
}<br>
<br>
void lightDown() { //   <br>
 while (brightness &gt; 0) {<br>
 time_curr = millis();<br>
 if ((time_curr â€” time_old) &gt; 10) {<br>
 if (brightness &gt; 0) {<br>
 brightness = brightness â€” 1;<br>
 time_old = time_curr;<br>
 if (brightness &lt; 1) brightness = 0;<br>
 analogWrite(led, brightness);<br>
 }<br>
 }<br>
 }<br>
}<br>
<br>
void lightUp() { //   <br>
 while (brightness &lt; 255) {<br>
 time_curr = millis();<br>
 if ((time_curr â€” time_old) &gt; 10) {<br>
 if (brightness &lt; 255) {<br>
 brightness++;<br>
 time_old = time_curr;<br>
 if (brightness &gt; 255) brightness = 255;<br>
 analogWrite(led, brightness);<br>
 }<br>
 }<br>
 }<br>
}<br>
<br>
void alarmRun() { //   1  ( )<br>
 digitalWrite(alarmPin, HIGH);<br>
 beepCount = 0;<br>
 MsTimer2::set(500, beep); // 500ms period<br>
 MsTimer2::start();<br>
}<br>
<br>
void beep() { //    500      2<br>
 if (beepCount &lt; numberOfBeeps) {<br>
 static boolean output = HIGH;<br>
 digitalWrite(alarmPin, output);<br>
 output = !output;<br>
 beepCount++;<br>
 }<br>
 else {<br>
 MsTimer2::stop();<br>
 digitalWrite(alarmPin, LOW);<br>
 }<br>
}<br>
</div></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ps </font><font style="vertical-align: inherit;">æ³¨æ„ï¼</font><font style="vertical-align: inherit;">2015å¹´9æœˆ23æ—¥è‡³10æœˆ23æ—¥ï¼Œæˆ‘ä»¬ä¸¾åŠæ‘„å½±æ¯”èµ›</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â€œè§£å†³æ—¥å¸¸é—®é¢˜çš„3Dæ‰“å°â€ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¼˜èƒœè€…å°†è·å¾—ä¸€ä¸ª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3Dæ‰“å°æœºè®¾è®¡å¸ˆMC5ï¼Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶ä¸­æœ‰ä¸€ä¸ªäºšå…‹åŠ›ç›’</font><font style="vertical-align: inherit;">ä½œä¸ºç¤¼ç‰©</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‚£äº›å¸Œæœ›çš„äººå¯ä»¥éšä¾¿é€›é€›ï¼Œä¸ºè‡ªå·±å–œæ¬¢çš„ä½œå“æŠ•ç¥¨ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘„å½±å¤§èµ›æ¡ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN384925/">https://habr.com/ru/post/zh-CN384925/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN384913/index.html">Cadenceå°†åœ¨åœ£å½¼å¾—å ¡å’ŒZelenogradçš„èŠ¯ç‰‡å¼€å‘ç ”è®¨ä¼šä¸Šä»‹ç»Genus</a></li>
<li><a href="../zh-CN384915/index.html">å‡ºç‰ˆä¸å†™ä½œ</a></li>
<li><a href="../zh-CN384917/index.html">Raspberry Piå’ŒArduinoä¸Šçš„Turingç‚¸å¼¹æ¨¡æ‹Ÿå™¨</a></li>
<li><a href="../zh-CN384921/index.html">å°ç±³ä¸ä»…æ˜¯æ™ºèƒ½æ‰‹æœºåˆ¶é€ å•†çš„21ä¸ªåŸå› </a></li>
<li><a href="../zh-CN384923/index.html">ä¿ç½—Â·æ ¼é›·å„å§†ï¼ˆPaul Grahamï¼‰ï¼šé«˜ç§‘æŠ€åä¼š</a></li>
<li><a href="../zh-CN384929/index.html">è‹±ç‰¹å°”çˆ±è¿ªç”Ÿ è‹±ç‰¹å°”ç‰©è”ç½‘åˆ†æäº‘ï¼šåœ¨ASP.NETä¸Šå‘é€SMSå’ŒRESTfulå®¢æˆ·ç«¯</a></li>
<li><a href="../zh-CN384933/index.html">arduino JDY-40æ— çº¿ç”µæ¨¡å—</a></li>
<li><a href="../zh-CN384937/index.html">ç‰©è”ç½‘çš„å±é™©æ˜¯ä»€ä¹ˆï¼Œå€¼å¾—åˆ›é€ å—ï¼Ÿ</a></li>
<li><a href="../zh-CN384941/index.html">å†¥ç‹æ˜Ÿå«æ˜ŸCharonä¸Šçš„â€œå³¡è°·â€æ˜¯ä¸€ä¸ªå·¨å¤§çš„åœ°å£³ç ´è£‚</a></li>
<li><a href="../zh-CN384949/index.html">æ™ºèƒ½å†…è¡£ï¼šè°ä»¥åŠä¸ºä»€ä¹ˆåˆ¶é€ å‡ºè´´å¿ƒçš„å¯ç©¿æˆ´â€œç”µå­äº§å“â€</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>