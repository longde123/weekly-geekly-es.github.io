<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò§ üî† üê¥ Warum selbstzerst√∂rende Fotos / Videos im Telegramm nicht sicher sind üë≠ üë©üèø‚Äçüé§ üéá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Zuletzt habe ich einen Artikel gesehen , in dem es um die Einf√ºhrung selbstzerst√∂render Nachrichten im WhatsApp- Messenger ging. Es hat eine √§hnliche ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Warum selbstzerst√∂rende Fotos / Videos im Telegramm nicht sicher sind</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470225/"><img src="https://habrastorage.org/webt/pb/vz/ur/pbvzuriwtjebtwfbawzykgzjnek.png" alt="Bild"><br><br>  Zuletzt habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel gesehen</a> , in dem es um die Einf√ºhrung <b>selbstzerst√∂render Nachrichten</b> im <b>WhatsApp-</b> Messenger ging.  Es hat eine √§hnliche Funktionalit√§t wie Telegramm, aber wenn in Durovs Messenger die L√∂schung f√ºr normale Nachrichten (geheime Chats) gilt, k√∂nnen sie auch f√ºr Fotos in regul√§ren Chats verwendet werden.  Das hei√üt, nach dem Senden des Fotos kann der Gespr√§chspartner es f√ºr eine begrenzte Zeit anzeigen. Nachdem es theoretisch von beiden Gespr√§chspartnern (vorzugsweise auch vom Server) gel√∂scht wurde, plant WhatsApp, das L√∂schen regul√§rer Nachrichten einzuf√ºhren (und dies wurde bisher getan). . <br><br>  Aber heute sprechen wir nicht √ºber WhatsApp (weil ich es √ºberhaupt nicht benutze), sondern √ºber Telegramm.  Die Idee, sich selbst zu zerst√∂ren, ist kaum gefragt, aber es gibt Benutzer, die sie beispielsweise beim Senden von Dokumenten oder Fotos verwenden, die nur einmal angezeigt werden k√∂nnen (ahem). <br><br>  F√ºr diejenigen, die zu faul zum Lesen sind, sind <b>selbstzerst√∂rende Nachrichten im Telegramm weder sicher</b> noch vertraulich.  Denken Sie nicht, dass jemand, mit dem Sie auf diese Weise sprechen, ein wichtiges Dokument nicht speichern kann (und ich spreche nicht von einem kurzen Screenshot oder Fotos von Telefonbildschirmen, Gott bewahre es) - verwenden Sie daf√ºr geheime Chats.  Und f√ºr diejenigen, die an der Umsetzung dieser Nachrichten interessiert sind, k√∂nnen Sie weiterlesen. <a name="habracut"></a><br><br>  Ich habe sie auch benutzt, wenn auch nicht oft, und eher waren sie nur "Unterhaltung" und ich habe sie nicht besonders gesehen.  Im Juni dieses Jahres habe ich bei der Recherche des <b>UserAPI-Telegramms das</b> Senden und Empfangen von Fotos getestet.  Ich hatte keinen Spa√ü mehr.  Und es zeigte sich Interesse daran, die ‚ÄûAnsicht‚Äú des Sendens von Nachrichten anzuzeigen und wie sie im Allgemeinen in der Antwort angezeigt werden.  Ich habe mich gefragt, wie diese Funktion "von innen" implementiert wird, ob Dateien vom Telegrammserver gel√∂scht werden oder ob sie irgendwie verschl√ºsselt werden k√∂nnen. <br><br>  Und zu meiner √úberraschung unterscheiden sich diese Botschaften praktisch nicht von den √ºblichen.  √úberhaupt gerade.  Sie haben dieselbe <b>Datei-ID</b> wie normale Fotos, mit denen Sie die Datei selbst <b>abrufen</b> k√∂nnen.  Und selbst wenn Sie sich die Nachricht angesehen haben und sie im Chat verschwunden ist, k√∂nnen <b>Sie sie sicher speichern / senden / weiterleiten</b> und das Gleiche tun, was Sie mit normalen Fotos / Videos tun k√∂nnten.  Das hei√üt, es wird nicht vom Telegrammserver selbst gel√∂scht. <br><br>  Ich wiederhole, solche Nachrichten gelten nicht f√ºr geheime Chats, bei denen sich die Korrespondenz auf zwei Ger√§ten befindet und von einem anderen Client aus kann ich nicht darauf zugreifen.  Diese Funktion wurde f√ºr regelm√§√üige Chats entwickelt und scheint als "sicher" zu gelten.  Aber hier ist es interessant, ich habe nirgendwo eine detaillierte Beschreibung dieser selbstzerst√∂renden Nachrichten gefunden.  Das hei√üt, Telegram scheint uns nicht zu sagen, dass diese Nachrichten in Bezug auf den Zugriff so sicher sind (wenn Sie Zugriff auf das Konto selbst haben), wie zum Beispiel dieselben geheimen Chats.  Das einzige, was ich gesehen habe, war, dass Telegram selbst sagte, dass keine Nachrichten, auch keine geheimen Chats, 100 Prozent Sicherheit haben und dass jeder f√ºr die Nachrichten verantwortlich ist, die er sendet, aber ... <br>  Ich gebe zu, dass es in einigen WhatsApp / Viber / VK implementiert sein w√ºrde, ich w√ºrde nicht einmal darauf achten, aber Telegram ist ein sehr praktischer Messenger, den ich wirklich liebe, aber was ich hasse, ist seine Unterst√ºtzung, die mit Freiwilligen gef√ºllt ist. <br><br>  Im selben Monat Juni schrieb ich an support@telegram.org, wo ich einen ganzen Brief in zwei Sprachen schrieb.  Es wurde nicht nur √ºber selbstzerst√∂rende Nachrichten gesprochen, sondern auch √ºber gew√∂hnliche, und dass Telegramm der Weiterleitung keine Grenzen setzt, aber dazu sp√§ter mehr. <br><br>  Zwei Monate sp√§ter antworteten sie mir nicht, daher musste ich an das "Support" -Telegramm schreiben, um zu erkl√§ren, was zu tun ist und wo zu schreiben ist, wenn ich diese Art von "Sicherheitsl√ºcke" finde. <br><br>  Dort antworteten sie mir √ºberraschenderweise drei Stunden sp√§ter, wo sie mir sagten, dass Sie √ºber schwerwiegende Schwachstellen im Protokoll unter security@telegram.org schreiben oder die Details hier teilen sollten.  Ich f√ºge den urspr√ºnglichen Antworttext des Supports bei: <br><br><div class="spoiler">  <b class="spoiler_title">5. Juli, Support-Antwort</b> <div class="spoiler_text">  <i>Hallo.</i>  <i>Sie k√∂nnen die Details hier teilen oder an security@telegram.org schreiben, wenn es sich wirklich um eine Sicherheitsl√ºcke in unseren Anwendungen oder Protokollen handelt.</i> <br></div></div><br>  Ich habe beschlossen, dem Support selbst √ºber die "Details" von Sicherheitsl√ºcken zu schreiben, das Video, das Skript selbst und L√∂sungen f√ºr das Problem anzuwenden (unten ist meine Nachricht), aber bis jetzt wurde ich weder per E-Mail noch im Support selbst beantwortet.  Anscheinend st√∂rt sie das bisher nicht.  <s>Besser machen wir eine Animation von einzelnen Emojis.</s> <br><br>  Neben der Option mit selbstzerst√∂renden Nachrichten ist mir auch aufgefallen, dass jede Nachricht, die beispielsweise in einem privaten Chat, einer Gruppe oder einem Kanal gel√∂scht wurde, leicht abzufangen ist.  Dies erfolgt mit der <b>√ºblichen Weiterleitung aller Nachrichten</b> , z. B. in einer separaten Gruppe, und nachdem sie <b>mit der ID der gel√∂schten Nachricht</b> abgerufen wurden (jetzt verf√ºgen die Bibliotheken √ºber Handler). <br><br>  Ich habe auch den gesamten Prozess in meinem Brief beschrieben (obwohl es tats√§chlich einfach ist), mit einer L√∂sung f√ºr das Problem in Form der Begrenzung der Weiterleitung der Nachrichten selbst.  Und wenn Sie nicht vollst√§ndig einschr√§nken, verbieten Sie die st√§ndige Weiterleitung aller Nachrichten.  Ich denke, das Entwicklungsteam wird in der Lage sein, von vorne etwas gegen √úberschwemmungen zu tun. <br><br>  Und bei selbstzerst√∂renden l√∂schen Sie sie einfach vom Server.  Dies wird das Problem nicht l√∂sen. Nachrichten k√∂nnen immer noch genau zum Zeitpunkt des Empfangs abgefangen werden.  F√ºr eine vollst√§ndige Beseitigung sollte der gesamte Algorithmus zum Lesen √ºberarbeitet werden.  Um beispielsweise einen Zugriffsschl√ºssel f√ºr jede Nachricht zu erstellen und diesen Schl√ºssel zu verwenden, ist das Bild / Video nur f√ºr eine bestimmte Zeit verf√ºgbar.  Es f√§llt mir jetzt schwer, den gesamten Algorithmus f√ºr das Entwicklungsteam zu entwickeln. Ich gebe zu, ich selbst kann nicht alle Aspekte durchdenken, und auf jeden Fall gibt es eine M√∂glichkeit, sie abzufangen.  Aber im Moment sind sie nur schrecklich implementiert, die Entwickler, die mit dieser Funktion besch√§ftigt waren, sollten mehr f√ºr die Entwicklung dieser Art von Funktion verantwortlich sein.  Nun, oder schreiben Sie in extremen F√§llen einfach in roten, fetten Buchstaben, dass selbstzerst√∂rende Nachrichten leicht abzufangen sind und dies nichts weiter als ein Spielzeug ist. <br><br>  Ich erz√§hle Ihnen von mir selbst, einem 15-j√§hrigen Studenten, der k√ºrzlich gern in Python entwickelt hat, sich in der Benutzer-API versucht und diese Art von "Fehler / Schwachstelle" festgestellt hat.  Umso mehr machte mich das w√ºtend und zwang mich, all dies hier zu schreiben - eine schreckliche Implementierung der Telegrammunterst√ºtzung, die mich in 4 Monaten einfach dreimal ignorierte. <br><br>  F√ºr einige wird diese Funktion nicht n√ºtzlich sein, sie wird nichts Schlechtes an der schlechten Implementierung solcher Nachrichten finden, aber ich denke, da Telegram selbst nicht daran interessiert ist, die aktuellen Funktionen zu verbessern, wird es f√ºr andere n√ºtzlich sein, dies nur zu ber√ºcksichtigen. <br><br>  Ich schreibe zum ersten Mal Artikel, ich k√∂nnte irgendwo Fehler hinterlassen, aber ich hoffe, dass sie mich in den Kommentaren korrigieren und darauf hinweisen.  Oder im Allgemeinen werden sie mir sagen, dass alles falsch ist und das Ignorieren der Unterst√ºtzung eine gute L√∂sung war und ich mich endlich beruhigen werde.  Ich h√§nge auch meine Nachricht an: <br><br><div class="spoiler">  <b class="spoiler_title">Support-Nachricht, auf die keine Antwort eingegangen ist</b> <div class="spoiler_text">  <i>Hallo, ich hei√üe Khamidov Amal.</i> <i><br><br></i>  <i>K√ºrzlich habe ich eine Benutzererfahrung f√ºr mein Projekt geschrieben.</i>  <i>Irgendwann bemerkte ich, wie mein Freund mir ein selbstentfernendes Foto schickte.</i>  <i>Ich habe es mir auf meinem Android-Client angesehen und es wurde entfernt, wie es nach 10 Sekunden sein sollte.</i> <i><br><br></i>  <i>Aber ich habe mich gefragt, wie solche Nachrichten verschl√ºsselt und wie sie unterwegs gespeichert werden.</i>  <i>Schlie√ülich stellt sich heraus, dass der Telegramm-Client das Foto zuerst auf das Telefon hochl√§dt und es nach dem Lesen entfernen muss.</i> <i><br><br></i>  <i>Ich habe ein kleines Python-Skript mit der Pyrogram-Bibliothek geschrieben und wollte sehen, wie sie zum Client kamen.</i> <i><br><br></i>  <i>Ich war √ºberrascht, als ich sah, dass diese "selbstl√∂schenden Fotos" genauso aussehen wie normale (was?).</i> <i><br></i>  <i>Das hei√üt, wenn ich ein normales Foto gesendet habe, war es nicht anders als das ‚Äûselbstironische‚Äú.</i> <i><br></i>  <i>Danach schrieb ich ein Skript, das dieses Foto in die Datei sendet, und in diesem Moment ging das Foto wie ein normales Foto zu meinem Testkanal.</i>  <i>Und auf dem Telefon, von dem ich dieses "selbstextrahierende" Foto gesendet habe, wurde es nicht einmal gelesen.</i> <i><br><br></i>  <i>Au√üerdem konnte ich das Foto auf meinem Desktop-Client anzeigen.</i>  <i>Das hei√üt, dieses Skript umgeht die wichtigste Essenz des "selbstextrahierenden" Fotos.</i> <i><br><br></i>  <i>Ich halte es f√ºr eine Sicherheitsanf√§lligkeit und f√ºr eine L√∂sung, die Methode zum Senden von "selbstl√∂schenden" Nachrichten zu √ºberdenken und auf dem Server und nicht auf dem Ger√§t zu verarbeiten.</i> <i><br><br></i>  <i>Au√üerdem habe ich die zweite gefunden (fast eine Sicherheitsl√ºcke), die mit dem API-Telegramm selbst erstellt wurde und √ºberhaupt nicht verboten ist.</i> <i><br><br></i>  <i>Wir sprechen also √ºber gew√∂hnliche Botschaften.</i> <i><br><br></i>  <i>Ich habe auch ein regul√§res Skript geschrieben, das alle Nachrichten aus dem Chat an meine Gruppe sendet (weiterleitet) und sie anhand ihrer ID markiert.</i> <i><br><br></i>  <i>Ich habe diesem Skript einen Handler hinzugef√ºgt, der auf alle gel√∂schten Nachrichten reagiert und die ID dieser gel√∂schten Nachrichten angibt (Hallo Pyrogramm).</i> <i><br><br></i>  <i>Danach habe ich ein Skript hinzugef√ºgt und jetzt, wenn der Handler auf alle gel√∂schten Nachrichten antwortet, √ºberpr√ºft er sie mit den Nachrichten aus der Gruppe (die alle Nachrichten enth√§lt) und sucht nach dieser Nachricht anhand der ID.</i> <i><br><br></i>  <i>Einerseits verst√∂√üt dies gegen nichts, da Telegramme einen offenen Code haben, kann jeder seine Userbots schreiben.</i>  <i>Auf der anderen Seite (Russisch ist gut) haben Sie im letzten Update die Funktion hinzugef√ºgt, Ihre eigenen und fremden Nachrichten aus Sicherheitsgr√ºnden zu l√∂schen, aber solche einfachen Skripte, die von einem 15-j√§hrigen Sch√ºler geschrieben wurden, scheinen dies zu umgehen sehr sicherheit.</i> <i><br><br></i>  <i>Ich verstehe, dass jeder als Antwort antwortet, die er sendet, aber eine Person kann versehentlich wichtige Dateien an eine unn√∂tige Person senden und in diesem Moment die Nachricht l√∂schen (w√§hrend der Gespr√§chspartner nicht gelesen hat), ohne zu wissen, dass alle diese Nachrichten kompromittiert werden k√∂nnen und vor allem, dass Nachrichten nicht als gelesen markiert sind.</i> <i><br><br></i>  <i>Ich denke, die Entscheidung besteht darin, die Weiterleitung von Nachrichten einzuschr√§nken und die Art und Weise des ‚ÄûLesens‚Äú von Nachrichten zu √ºberpr√ºfen.</i> <i><br><br></i>  <i>Im zweiten Video habe ich angeh√§ngt, wie ich alle gel√∂schten Nachrichten speichern kann, ohne sie zu lesen.</i> <i><br></i>  <i>Ich f√ºge das Video und das Skript bei, die ich geschrieben habe, um deutlich zu machen, wie es funktioniert.</i> <br></div></div><br><br>  Und wie es im Code aussieht (verwendet die Telethon-Bibliothek, auf Pyrogram ist es fast das gleiche): <br><br><div class="spoiler">  <b class="spoiler_title">Der wichtigste Teil des Codes.</b>  <b class="spoiler_title">Der Rest ist nur eine Angabe des Kontos, der Telefonnummer usw.</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@client.on(events.NewMessage(func=lambda e: e.is_private and getattr(e, 'photo'))) async def handler(event: message.Message): # event.input_chat may be None, use event.get_input_chat() chat: InputPeerUser = await event.get_input_chat() sender: User = await event.get_sender() photo: Photo = event.photo await client.send_message(img_channel, file=MessageMediaPhoto(photo), message=f'&lt;code&gt;{chat.user_id}&lt;/code&gt;\n' f'&lt;code&gt;{sender.first_name}&lt;/code&gt;\n', parse_mode='HTML')</span></span></code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470225/">https://habr.com/ru/post/de470225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470215/index.html">CAGR als Fluch auf Spezialisten oder Fehler bei der Vorhersage exponentieller Prozesse</a></li>
<li><a href="../de470217/index.html">Gef√§lschter DS18B20 wasserdicht: Was tun?</a></li>
<li><a href="../de470219/index.html">F # 5: Operatoren</a></li>
<li><a href="../de470221/index.html">Holivar. Geschichte von Runet. Teil 3. Suchmaschinen: Yandex vs Rambler. Wie man keine Investition t√§tigt</a></li>
<li><a href="../de470223/index.html">Designrichtlinien f√ºr UX Mobile-Spiele</a></li>
<li><a href="../de470227/index.html">Wie kann ich einen Arbeitgeber interviewen?</a></li>
<li><a href="../de470229/index.html">Sounds f√ºr die Benutzeroberfl√§che: Eine Zusammenstellung thematischer Ressourcen</a></li>
<li><a href="../de470233/index.html">Wie schreibe ich einen Handelsroboter: Werkzeuge f√ºr Anf√§nger</a></li>
<li><a href="../de470235/index.html">Interview mit Dmitry Simonov, dem Sch√∂pfer des CTORECORDS-Kanals: ‚ÄûDie Hauptqualit√§t von techdir ist die Gewohnheit zu gewinnen.‚Äú</a></li>
<li><a href="../de470237/index.html">Wochenendliteratur: Einfaches Lesen f√ºr Technikfreaks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>