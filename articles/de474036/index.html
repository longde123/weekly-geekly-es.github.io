<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüéì üëáüèø üçï Textbearbeitung hasst dich auch üïõ üö¥ ‚ù§Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alexis Bingessners Artikel "Text Rendering Hates You", der vor einem Monat ver√∂ffentlicht wurde , steht mir sehr nahe. 

 Im Jahr 2017 entwickelte ich...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Textbearbeitung hasst dich auch</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474036/">  Alexis Bingessners Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Text Rendering Hates You",</a> der vor einem Monat ver√∂ffentlicht wurde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, steht</a> mir sehr nahe. <br><br>  Im Jahr 2017 entwickelte ich einen interaktiven Texteditor in einem Browser.  Unzufrieden mit den vorhandenen ContentEditable-Bibliotheken dachte ich: ‚ÄûHey, ich realisiere nur die Auswahl des Textes neu!  Ist es schwer? "  Ich war jung  Naiv.  Ich dachte mir, dass ich in zwei Wochen damit fertig werden k√∂nnte.  Tats√§chlich dauerte der Versuch, dieses Problem zu l√∂sen, mehrere Jahre meines Lebens, einschlie√ülich eines Jahres bezahlter Arbeit von morgens bis abends, um einen Texteditor f√ºr das neue Betriebssystem zu entwickeln. <br><br>  Bei der Arbeit hatte ich das Gl√ºck, viel von <abbr title="Wie immer danke ich Raf Levien und Yokhey Yukawa, die mir alles beigebracht haben, was ich √ºber das Tippen wei√ü">Mentoren mit gro√üer Erfahrung auf diesem Gebiet</abbr> zu lernen.  Ich habe viele, viele Gruselgeschichten geh√∂rt.  Einschlie√ülich eines Ingenieurs, der eine Windows-Anwendung mit einer benutzerdefinierten Implementierung eines Textfelds unterst√ºtzte und von einer veralteten Texteingabe-API zu einer neuen Version wechseln wollte.  Hier ist eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liste der</a> Texteingabeschnittstellen in dieser neuen Version: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/905/ade/db0/905adedb0a3bd875236bfadd2c9f533d.png"><br><a name="habracut"></a><br>  Das ist richtig, 128 Schnittstellen zur Texteingabe.  Ich bin mir fast sicher, dass es acht (8!) Verschiedene Arten von Sperren gibt, um Parallelit√§tsprobleme zu beheben, obwohl ich deren Dokumentation ehrlich gesagt nicht gelesen habe. Zitieren Sie mich daher nicht dazu.  Dieser Ingenieur hat anderthalb Jahre (Vollzeit!) Seinen Editor ge√§ndert, ist aber am Ende gescheitert und auf der alten API geblieben. <br><br>  Das Tippen ist schwierig. <br><br>  Alexis erw√§hnt manchmal die Auswahl von Text, aber ihre pers√∂nliche Erfahrung h√§ngt mehr mit dem Rendern zusammen.  Andererseits kann ich als Person einige Punkte zur Eingabe hinzuf√ºgen. <br><br><h3>  Vertikale Cursorbewegung </h3><br>  Ich habe dies bereits in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fr√ºheren Artikel behandelt</a> , aber wir k√∂nnen es hier schnell wiederholen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d7/dcb/be8/2d7dcbbe886a8da0e23abaf51f092ced.png"></div><br><br>  Wenn Sie in diesem Beispiel nach oben dr√ºcken, bewegt sich der Cursor an den Zeilenanfang vor dem Wort <i>Hallo</i> .  Bisher ist alles ziemlich vern√ºnftig.  Wenn Sie jedoch nach oben und unten dr√ºcken, springt der Cursor zuerst vor <i>Hallo</i> und steht dann nach <i>einigen</i> . <br><br>  Dies mag nicht sehr logisch erscheinen.  Sie fragen, warum er nach rechts springt?  Bei vertikalen Bewegungen merkt sich jeder Cursor die <i>x-</i> Position in Pixel und wird nur aktualisiert, wenn er nach links oder rechts gedr√ºckt wird und nicht nach oben und unten.  Das gleiche Verhalten verhindert, dass sich Cursor nach links bewegen, wenn sie sich vertikal durch kurze Linien bewegen. <br><br><h3>  N√§he </h3><br>  Okay, jetzt wissen wir, dass wir bei der Auswahl von Text <i>zwei</i> Statuselemente haben: den oben erw√§hnten Byte-Versatz innerhalb der Linie und die <i>x-</i> Koordinate in Pixel.  Das Problem ist gel√∂st?  Nun, nein. <br><br>  Betrachten Sie zwei Cursorpositionen in einer sehr langen Zeile: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf1/a02/0f5/bf1a020f5aa7512ad957b47717fd4bc2.png"></div><br><br>  Da <i>loooooooooong</i> ein Wort ist, haben zwei Cursorpositionen <i>genau den gleichen Byte-Offset in der Zeichenfolge</i> .  Es gibt keine neue Zeile zwischen ihnen, da die Zeile weich umwickelt ist.  Unsere Cursor ben√∂tigen ein zus√§tzliches Bit, das ihnen sagt, zu welcher Zeile sie gehen sollen.  Die meisten Systeme nennen dieses Bit Affinit√§t.  Es wird auch in gemischtem bidirektionalem Text verwendet, √ºber den wir bald sprechen werden. <br><br><h3>  Emoji-Modifikatoren </h3><br>  Angenommen, ich sende eine Nachricht an einen Freund.  Um meine Gef√ºhle auszudr√ºcken, m√∂chte ich ein lustiges Emoji hinzuf√ºgen.  Ich gebe im Textbereich einen Daumen nach oben, einen Buchstaben <code>a</code> und einen Emoji-Modifikator f√ºr den Hautton ein.  Es sieht so aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fd/f6b/1e8/4fdf6b1e84ddd2774b68d335e8b597b8.png"></div><br><br>  Oh, ich wollte keinen Brief schreiben.  Ich setze den Cursor danach und klicke auf R√ºcktaste.  Was wird passieren?  Ich habe je nach Editor mehrere Optionen gesehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/237/c58/054/237c580542b2d5921a07adbdfb2d32c5.png"></div><br><br><ul><li>  <b>Schlechte Nummer 1</b> <i>scheint</i> richtig zu sein.  Auf diese Weise funktioniert ein Texteditor mit Unterst√ºtzung f√ºr Legacy-Emoji-Rendering, z. B. Sublime Text.  Dies ist schlecht, da das leichte Finger-Emoji als gelber Finger codiert wird, gefolgt von einem Hauttonmodifikator.  Sie werden nicht wie erwartet zu einem Symbol zusammengefasst.  Selbst wenn ich den Lichtfinger aus einer anderen Anwendung kopiere, wird er wie hier nicht richtig angezeigt. <br></li><li>  <b>Schlechte Nummer 2</b> ist das, was Chrome 77 in der Adressleiste tut.  Nicht auf Webseiten, sondern nur in der Adressleiste.  Dies ist kein Rendering-Problem, da das Kopieren und Einf√ºgen von Emoji mit Hautton funktioniert.  Stattdessen l√∂scht Chrome den Buchstaben. Nachdem Sie den Modifikator nach dem Buchstaben bemerkt haben, wird er auch gel√∂scht.  Hoppla! <br></li><li>  <b>Bad # 3</b> entspricht der Unicode-Spezifikation, wie Emoji zusammengef√ºhrt werden soll.  F√ºr Benutzer ist dies jedoch nicht nachvollziehbar. √úbrigens m√ºssen Sie den Cursor bewegen, damit er nicht auf halber Strecke im Emoji h√§ngen bleibt. </li></ul><br>  Alle Optionen sind schlecht, daher k√∂nnen Sie davon ausgehen, dass es wahrscheinlich eine vierte Option gibt.  Gibt es!  In vielen Editoren, wie z. B. TextEdit, k√∂nnen Sie den Cursor nicht einmal nach dem Buchstaben setzen, da der Hauttonmodifikator als eine Einheit mit dem vorherigen Zeichen betrachtet wird.  Dies ist im Kontext von Emoji sinnvoll und funktioniert in diesem Fall sogar gut. Was ist jedoch, wenn der Modifikator durch das erste Zeichen in der Zeichenfolge angezeigt wird? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ef/a2e/3ad/2efa2e3ad0396bd2362cd08694c841fc.png"></div><br><br>  Jetzt √§ndert der Modifikator das Zeilenumbruchzeichen.  Mit TextEdit k√∂nnen Sie den Cursor nicht am Anfang der zweiten Zeile platzieren!  Ich pers√∂nlich halte diese Entscheidung f√ºr ‚Äûauch schlecht‚Äú. <br><br>  M√∂glicherweise haben Sie auch bemerkt, dass der Daumen nach oben zum Daumen nach unten geworden ist.  Ich habe dies selbst getan, um meine Gef√ºhle √ºber die gesamte Situation zu reflektieren. <br><br>  TextEdit macht den Cursor in der ersten Zeile √ºbrigens <i>sehr</i> fehlerhaft.  Ratet mal, was passiert, wenn ich hier <code>4</code> dr√ºcke? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c8/988/687/1c898868781c9461aba7ab1e7cb74255.png"></div><br><br>  Ja.  Sie k√∂nnten auch denken, dass zwischen den Zahlen Leerzeichen stehen.  Sie sind nicht da. <br><br><h3>  Bidirektionaler Text </h3><br>  Alexis erw√§hnt geteilte Auswahlen in gemischtem bidirektionalem Text, wie in diesem Beispiel aus TextEdit: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14b/dd3/8c3/14bdd38c366451ff768fc4aa15dc17b3.png"></div><br><br>  Dies ist wirklich sinnvoll, da die arabische Sprache in den Zeilen von rechts nach links codiert ist, so dass die Auswahl geteilt zu sein scheint, aber Bytes ein kontinuierlicher Bereich sind. <br><br>  Daher ist es ein wenig √ºberraschend, dass wir diese Auswahl erhalten k√∂nnen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/53d/d86/9aa/53dd869aa064eb6ebc8cac8114147800.png"></div><br><br>  Ja, es ist visuell kontinuierlich, aber bytegetrennt.  Ja, es ist schlecht.  Einige Editoren tun dies, wenn Sie Text mit den Pfeiltasten anstelle der Maus ausw√§hlen.  Eine Alternative besteht darin, die linke / rechte Taste im Text mit der Richtung von rechts nach links zu tauschen, was ebenfalls schlecht ist.  Hier gibt es keine guten M√∂glichkeiten. <br><br>  Versuchen Sie als Bonus zu verstehen, was hier vor sich geht: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e88/2bb/b48/e882bbb480ea0a67812b862fc778d815.png"></div><br><br>  Herr ... Ich m√∂chte das nicht kommentieren. <br><br><h3>  Die Sache mit den Eingabemethoden </h3><br>  Software, die Tastenanschl√§ge in Eingaben √ºbersetzt, wird als Eingabemethode oder Eingabemethodeneditor bezeichnet.  F√ºr das lateinische Alphabet ist dies keine sehr interessante Software, da jeder Tastendruck direkt mit dem Einf√ºgen eines Zeichens verbunden ist.  In vielen Skripten passen Zeichen jedoch nicht auf die Tastatur, daher m√ºssen Sie kreativ sein.  Bei einigen Eingabemethoden f√ºr die chinesische Sprache gibt der Benutzer beispielsweise T√∂ne ein - und erh√§lt eine Liste von Zeichen, deren Ton √§hnlich ist: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/257/4be/547/2574be547e63c1408db959a8bd107c90.png"></div><br><br>  Dieses Feld wird manchmal als Erstellungsbereich bezeichnet und erscheint h√§ufig <abbr title="Zusammensetzungsbereich">√ºber dem unterstrichenen Text</abbr> .  Manchmal muss die Eingabemethode sie formatieren.  Beispielsweise verwendet die japanische Eingabemethode unter Android die Hintergrundfarbe, um einen Bereich f√ºr die gemeinsame Nutzung von S√§tzen zu erstellen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b27/583/4c2/b275834c23880b9375d4da714632f1cc.png"></div><br>  <i><font color="gray">(Danke an Shae f√ºr den Screenshot!)</font></i> <br><br>  Interagieren all diese Auswahlen und Kompositionsbereiche mit bidirektionalem Text?  Denken wir nicht dar√ºber nach. <br><br>  Eingabemethoden sollten √ºberall funktionieren, <i>auch innerhalb des Terminals</i> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24d/b76/f54/24db76f544a936d70edb9143a36fdba0.png"></div><br><br>  Vim wird erst dann benachrichtigt, wenn ein chinesisches Schriftzeichen aus der Liste ausgew√§hlt wurde.  Sie denken wahrscheinlich: "Aber wie funktioniert es im Vim-Befehlsmodus?"  Nicht sehr gut.  Aus diesem Grund sind Texteingabe und Tastenanschl√§ge im Internet separate Ereignisse.  In der Konsole mischen sie sich und verursachen Probleme. <br><br>  Dies ist nur ein Beispiel f√ºr viele verschiedene Texteingabemethoden.  (Vergessen Sie nicht die Eingabemethoden ohne Tastatur wie Sprache und Handschrift!) Gl√ºcklicherweise bietet Ihnen das Betriebssystem all diese Methoden.  Leider sollte Ihr Textfeld das allgemeine Texteingabeprotokoll sprechen, das von all diesen Methoden verwendet wird.  F√ºr Windows sind dies die 128 Schnittstellen, die am Anfang des Artikels aufgef√ºhrt sind.  In anderen Betriebssystemen sind Schnittstellen einfacher, aber immer noch schwer zu implementieren. <br><br>  M√∂glicherweise stellen Sie auch fest, dass die Eingabemethode ein separater Prozess ist, sodass sowohl die Eingabemethode als auch die Anwendung √Ñnderungen am Status des Textfelds vornehmen k√∂nnen.  Dies ist eigentlich ein paralleles Bearbeitungsprotokoll.  Windows l√∂st das Problem mit acht (8!) Arten von Sperren.  Obwohl das Halten einer Sperre √ºber Prozessgrenzen hinweg zweifelhaft erscheint, versuchen die meisten anderen Plattformen, unvollst√§ndige Heuristiken zu verwenden, um Parallelit√§tsprobleme zu beheben.  Oder sie hoffen nur, dass die Rennbedingungen nicht eintreten.  Nach meiner Erfahrung ist das Gebet kein sehr wirksames Primitiv der Parallelit√§t. <br><br><h3>  Warum ist alles so kompliziert? </h3><br>  Jonathan Blow erw√§hnt in einem Vortrag √ºber Software-Degradation den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Texteditor Ken Thompson</a> , den er in einer Woche geschrieben hat.  Der gr√∂√üte Teil des Codes in diesem Artikel ist zuf√§llig eingef√ºhrte Komplexit√§t.  Ben√∂tigt Windows wirklich 128 Schnittstellen und 8 Arten von Sperren f√ºr die Texteingabe?  Auf keinen Fall.  Sind Fehler in TextEdit das Ergebnis eines komplexen Bearbeitungsmodells?  Ja  Ist die Streuung von Fehlern in modernen Programmen ein Grund zur Sorge?  Zumindest f√ºr mich ist es das. <br><br>  Ken Thompsons Editor war jedoch auch viel, viel einfacher als das, was wir von modernen Texteditoren erwarten.  Unicode unterst√ºtzt fast alle lebenden Sprachen der Welt (es gibt ungef√§hr 7.000 davon), und viele weitere sind tot.  Es gibt verschiedene Skripte, Textrichtungen und Eingabemethoden, von denen jede jedem Editor komplexe (und in einigen F√§llen unl√∂sbare) Einschr√§nkungen auferlegt.  Er muss aber auch Screenreader unterst√ºtzen. <br><br>  Es entsteht <i>unweigerlich eine</i> enorme Komplexit√§t, die wir in diesem Artikel nur geringf√ºgig ber√ºhrt haben.  Dies ist ein echtes Programmierwunder, bei dem Sie einfach <code>&lt;textarea&gt;</code> auf eine Webseite schlagen und sofort jedem Internetbenutzer auf der ganzen Welt eine Texteingabe bereitstellen k√∂nnen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de474036/">https://habr.com/ru/post/de474036/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de474020/index.html">Wie Methodius zu Anna wurde: die Erfahrung, Sprachnachrichten-Klassifikatoren zu entwickeln und zu starten. Teil 3</a></li>
<li><a href="../de474024/index.html">Wir verwandeln einen Roboterstaubsauger in einen Universalsoldaten</a></li>
<li><a href="../de474026/index.html">Verbrauchergeschichten, Asos, der sein Magazin und TikTok aufgibt</a></li>
<li><a href="../de474028/index.html">Welche Soft Skills ben√∂tigen Entwickler? Meinungen von Yandex</a></li>
<li><a href="../de474032/index.html">Anordnen von Standardzellen (Notizen eines Au√üenstehenden)</a></li>
<li><a href="../de474038/index.html">Regelm√§√üige Datenaktualisierungen</a></li>
<li><a href="../de474040/index.html">Playboy-Interview: Steve Jobs, Teil 1</a></li>
<li><a href="../de474042/index.html">Wettbewerb! Geschichten im Licht flackernder Server ...</a></li>
<li><a href="../de474046/index.html">Seminare zu Cloud-Diensten, KI, Blockchain, Data Science, Microservices: jetzt in Moskau und St. Petersburg</a></li>
<li><a href="../de474048/index.html">HILDACRYPT: Neue Ransomware greift auf Backup-Systeme und Antiviren-L√∂sungen zu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>