<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ»â€ğŸ“ ğŸ…±ï¸ ğŸï¸ Comment supprimer et Â«collerÂ» un panorama sphÃ©rique sur DJI Mavic Air ğŸ‚ ğŸ§– ğŸŒ©ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avec la sortie de Dji Mavic Air, le processus de crÃ©ation de panoramas sphÃ©riques semble avoir Ã©tÃ© simplifiÃ© Ã  la limite - il a appuyÃ© sur un bouton e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment supprimer et Â«collerÂ» un panorama sphÃ©rique sur DJI Mavic Air</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/coptertime/blog/418775/">  Avec la sortie de Dji Mavic Air, le processus de crÃ©ation de panoramas sphÃ©riques semble avoir Ã©tÃ© simplifiÃ© Ã  la limite - il a appuyÃ© sur un bouton et la sphÃ¨re est prÃªte.  Câ€™est ce que dit la publicitÃ©.  Pour Ãªtre honnÃªte, je m'attendais dÃ©jÃ  Ã  ce que notre balle entiÃ¨re soit tirÃ©e au cours des premiers mois de vente, mais pour une raison quelconque, cela ne s'est pas produit. <br><br><img src="https://habrastorage.org/webt/jx/h4/lo/jxh4lof5xrcketwjgopnrbsckgq.jpeg"><br>  <i>photo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Paul Oostveen</a></i> <br><a name="habracut"></a><br>  Il y a trÃ¨s probablement plusieurs raisons - le logiciel intÃ©grÃ© est extrÃªmement primitif et n'est pas capable de faire un panorama dÃ©cent si les conditions sont au moins lÃ©gÃ¨rement diffÃ©rentes de l'idÃ©al.  Au-dessus de l'eau ou sur la neige par temps nuageux, vous pouvez obtenir des morceaux de ciel au sol et d'autres Â«beautÃ©sÂ», eh bien, je ne parle pas des couleurs mÃ©diocres du fichier jpeg fini et absolument pas de rÃ©solution.  Les objets situÃ©s prÃ¨s de la camÃ©ra posent Ã©galement un problÃ¨me - par exemple, pour supprimer une sphÃ¨re oÃ¹ une tour sera au premier plan ou quelque chose de similaire sur la machine ne fonctionnera probablement pas.  La raison en est la parallaxe, Ã  savoir la dÃ©rive de lâ€™hÃ©licoptÃ¨re lors de la prise de vue (malgrÃ© la trÃ¨s bonne rÃ©tention GPS du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mavic Air</a> - une dizaine de centimÃ¨tres suffira Ã  stupÃ©fier lâ€™automatisation des systÃ¨mes embarquÃ©s). <br><br>  En publicitÃ©, la rÃ©solution panoramique est de 32mp, mais est-ce tellement le cas lorsque nous photographions Ã  360 degrÃ©s, et partout avec des Ã©crans avec une rÃ©solution de 4K ou mÃªme plus?  De plus, le firmware ne sait pas coller le ciel et ne comprend pas quelles sont les bonnes couleurs, ce qui est impossible.  Bien que l'hÃ©licoptÃ¨re puisse tirer Ã  +15 degrÃ©s, ce n'est pas encore suffisant pour obtenir un Â«toitÂ». <br><br><img src="https://habrastorage.org/webt/ih/ov/wu/ihovwufh8nhz3r-d83_9sxaj6vs.png"><br><br>  Mais tout n'est pas si mal.  Si vous Ãªtes dÃ©terminÃ© Ã  obtenir un bon panorama - c'est tout Ã  fait possible avec Mavic Air.  Au dÃ©but, j'Ã©tais quelque peu sceptique quant Ã  la prise de vue standard de 25 images, mais j'ai ensuite conclu que cela suffisait.  Plus tÃ´t, lors de la prise de vue sur DJI Phantom Â¾ ou DJI Mavic Pro Ã  l'aide de Litchi, j'ai essayÃ© de prendre de 32 Ã  48 photos.  Plus ou moins.  Les 25 proposÃ©s par Mavic Air m'ont d'abord paru un peu, j'ai essayÃ© le Litchi, mais aucune augmentation significative n'est sortie.  Au cours de la formation, j'ai dÃ©veloppÃ© une technique claire et optimisÃ© le processus.  Maintenant, pour une batterie pas trÃ¨s grande, je parviens Ã  crÃ©er jusqu'Ã  4 Ã  5 sphÃ¨res, et le collage avec correction des couleurs prend environ 10 Ã  15 minutes.  Ã€ la sortie, nous avons un panorama avec une rÃ©solution allant jusqu'Ã  177mp avec de bonnes couleurs, un ciel normal et un contrÃ´le total de ce qui se passe. <br><br>  Alors, que faut-il pour obtenir un bon rÃ©sultat? <br><br><ul><li>  Logiciel DJI GO 4 standard et sauvegarde des photos dans DNG Raw </li><li>  Adobe lightroom </li><li>  PtGui Pro </li><li>  Adobe Photoshop ...  10-20 minutes pour chaque panorama </li></ul><br>  Tout d'abord, il est conseillÃ© de tout supprimer correctement afin de minimiser le temps de traitement.  Bien sÃ»r, la prise de vue au lever / coucher du soleil est trÃ¨s belle, mais en raison du faible soleil et des Ã©ventuels reflets, le collage peut Ãªtre difficile.  Vous pouvez utiliser un pare-soleil supplÃ©mentaire - cela facilitera le travail, mais vous aurez toujours des cadres oÃ¹ le soleil brille directement dans l'appareil photo.  Pour les premiÃ¨res expÃ©riences, choisissez une horloge plus proche de midi - le soleil ne pourra pas entrer dans le cadre.  Il convient Ã©galement d'Ã©viter les objets trÃ¨s proches de l'hÃ©licoptÃ¨re.  SÃ©lectionnez des plans avec des objets Ã©quidistants.  Les grands espaces peuvent Ãªtre trÃ¨s difficiles Ã  coller sans une texture Ã©vidente - lac / mer / neige / sable.  Je recommande de dÃ©sactiver l'exposition automatique de l'appareil photo.  Regardez autour de vous et sÃ©lectionnez la vitesse d'obturation et l'ouverture moyennes (dans le cas du DJI Phantom 4 Pro), fixez la sensibilitÃ© (ISO).  MÃªme si, dans une certaine direction, l'exposition n'est pas idÃ©ale, elle peut Ãªtre corrigÃ©e dans Lightroom lors de la conversion de RAW.  C'est beaucoup plus facile que de lutter contre les erreurs d'automatisation qui peuvent se produire si la camÃ©ra est dirigÃ©e vers le soleil ou si le fond est une forÃªt / eau solide et des surfaces similaires. <br><br>  Assurez-vous que la sauvegarde des originaux est activÃ©e.  Lorsque tous les paramÃ¨tres sont dÃ©finis - vous pouvez commencer la prise de vue.  Dans le processus, je recommande de surveiller ce que l'appareil supprime.  S'il y a un objet principal dans le cadre, vous devez vous assurer qu'il est tournÃ© avec tout le cadre, c'est-Ã -dire qu'il ne tombe pas dans la jonction de 2 cadres et n'est pas trop prÃ¨s du bord du cadre.  Si cela se produisait nÃ©anmoins - il vaut mieux ne pas dÃ©placer l'hÃ©licoptÃ¨re Ã  la fin du levÃ©, en n'utilisant que la rotation autour de son axe et en inclinant la camÃ©ra pour prendre manuellement quelques images de l'objet - cela peut grandement simplifier le collage.  Pour obtenir un beau panorama, il n'est pas nÃ©cessaire d'aller trop haut.  Les panoramas sont superbes, oÃ¹ vous plongez Ã  l'intÃ©rieur, vous pouvez Ãªtre situÃ© non plus haut, mais entre les objets de prise de vue, mais vous devez vous assurer que l'hÃ©licoptÃ¨re est capable de supprimer les bords supÃ©rieurs des objets afin qu'ils ne soient pas flous. <br><br><img src="https://habrastorage.org/webt/r1/12/cu/r112cueigjsmwytgjbde7hggtmc.jpeg"><br>  <i>Un exemple oÃ¹ l'hÃ©licoptÃ¨re Ã©tait trop bas.</i>  <i>Le panorama est collÃ© avec le logiciel DJI Mavic Air intÃ©grÃ©.</i>  <i>Cependant, il est probable que si vous prenez le code source et le collez avec un programme panorama externe, vous pouvez l'enregistrer.</i> <br><br>  Et maintenant - les trames sont reÃ§ues - nous procÃ©dons au traitement.  DJI Go 4 enregistre toutes les sources dans un dossier sÃ©parÃ© - Â«PanoramaÂ» - copiez le contenu du dossier souhaitÃ© sur le disque dur et dÃ©posez-le dans Lightroom.  Notre tÃ¢che consiste Ã  prÃ©parer des cadres individuels Ã  coller dans PTGUI - pour cela, il est important non seulement de traiter l'exposition et la couleur de chaque cadre, mais Ã©galement de rendre toutes les parties du futur panorama aussi proches que possible de la luminositÃ© et du contraste. <br><br><img src="https://habrastorage.org/webt/a0/z9/q1/a0z9q16uscbohtlohciwtafqggy.png"><br><br>  Si une correction de luminositÃ© locale est utilisÃ©e - retirez n'importe quel objet - assurez-vous que, sur toutes les images oÃ¹ elle est prÃ©sente, cela est fait aussi prÃ¨s que possible.  PTGUI a une fonction d'Ã©galisation de la luminositÃ©, mais il est prÃ©fÃ©rable de le faire Ã  l'avance.  De plus, le matÃ©riel rÃ©sultant peut Ãªtre exportÃ© (je recommande d'utiliser Tiff avec une compression LZW de 8/16 bits par canal, selon la puissance de votre PC). <br><br><img src="https://habrastorage.org/webt/ei/za/h2/eizah2wfiaszg0f1mmbjclpvj1g.png"><br><br>  La prochaine Ã©tape sera l'assemblage direct du panorama.  TÃ©lÃ©chargez des fichiers sur PTGUI PRO et cliquez sur Aligner les images. <br><br><img src="https://habrastorage.org/webt/un/ar/z2/unarz2i0cb4uwldz0rzi3yng_eu.png"><br><br>  Le systÃ¨me analyse les donnÃ©es et essaie de comparer les trames par points de contrÃ´le. <br><br>  Dans certains cas (eau / neige, etc.), le programme peut afficher un message sur l'absence de correspondances sur certaines images - cela signifie que vous devrez dÃ©finir les points de contrÃ´le manuellement. <br><br>  Si ce n'est pas le cas, le programme nous donnera une fenÃªtre avec un panorama panoramique, oÃ¹ il est souhaitable de dÃ©finir le centre - l'endroit qui sera affichÃ© lors du chargement - le visage du panorama, vous pouvez Ã©galement ajuster l'horizon. <br><br><img src="https://habrastorage.org/webt/eh/iu/bh/ehiubhvol5md_hd68rj_kcl9hdk.png"><br><br>  Ensuite, nous pouvons ouvrir un aperÃ§u du panorama, qui peut Ãªtre tordu et prÃ©-Ã©valuer le rÃ©sultat. <br><br><img src="https://habrastorage.org/webt/qu/rd/p5/qurdp5vci_el4jhywlvxccueusk.png"><br><br>  Ici, vous pouvez remarquer des problÃ¨mes particuliÃ¨rement forts et, le cas Ã©chÃ©ant, passez Ã  l'Ã©dition des points de contrÃ´le et essayez de le rÃ©soudre. <br><br><img src="https://habrastorage.org/webt/yq/sx/4p/yqsx4pdng2errceagbvlie1liiq.png"><br><br>  S'il n'y a pas de problÃ¨mes particuliers - le dernier onglet - CrÃ©er un panorama - est dÃ©fini comme dans Lightroom - Tiff avec compression LZW. <br><br><img src="https://habrastorage.org/webt/tw/r3/91/twr391f4kmzgn6w0bxuomof3r04.png"><br><br>  La prochaine Ã©tape est l'inspection et l'ajustement final dans Photoshop.  Nous examinons lentement l'ensemble du panorama par parties pour dÃ©tecter les incohÃ©rences - l'horizon et les problÃ¨mes des principaux objets sont particuliÃ¨rement frappants.  Eh bien, si le joint sur l'objet sans texture spÃ©ciale. <br><br><img src="https://habrastorage.org/webt/u0/sw/-5/u0sw-5hap33vcbepdtaj0unwits.png"><br><br>  Ici, tous les outils sont dÃ©jÃ  bons - nous essayons d'abord d'allouer par divergence par sÃ©lection polygonale, puis par transformation - distorsion et autres options - nous personnalisons la piÃ¨ce Â«abandonnÃ©eÂ».  L'ombrage de la sÃ©lection peut Ãªtre rÃ©glÃ© petit - 1-2 pixels, et parfois il vaut mieux laisser des bords nets, nous fermons les zones rÃ©sultantes Ã  la suite du dÃ©calage, comme d'habitude avec un tampon ou une brosse de cicatrisation. <br><br><img src="https://habrastorage.org/webt/o0/ev/-u/o0ev-us8vs3jrgyfqr85fz4optw.png"><br><br>  Bien sÃ»r, il y a des cas plus compliquÃ©s - alors nous ouvrons un fichier sÃ©parÃ© avec l'objet, le copions dans un nouveau calque, ajustons l'Ã©chelle, supprimons l'excÃ©dent - nous obtenons un patch.  Dans le cas de l'utilisation de dÃ©formations - en particulier la dÃ©formation des marionnettes, il est trÃ¨s important de limiter les points et de ne pas toucher les bords du panorama - sinon il ne collera plus ensemble. <br><br>  Il est temps de donner effet et richesse au panorama.  Maintenant, nous pouvons tordre les niveaux / courbes / couleurs en toute sÃ©curitÃ© pour obtenir l'effet souhaitÃ©.  Vous devrez peut-Ãªtre utiliser les outils Dodge / burn, travailler sur des objets individuels - en fait, pour l'instant, nous avons exportÃ© vers Tiff et mis en place avec d'Ã©normes tailles de fichier. <br><br><img src="https://habrastorage.org/webt/su/br/zr/subrzrgwexa9ypzhwz9sv5sidnw.png"><br><br>  Ã€ la fin, vous devez ramasser le ciel.  J'ai dÃ©jÃ  accumulÃ© un certain montant de mes rÃ©serves + j'ai trouvÃ© quelque chose sur le rÃ©seau.  S'il n'y a pas de stock ou d'options enregistrÃ©es, Ã©tirez simplement le ciel jusqu'Ã  l'arrÃªt.  ce ne sera pas trÃ¨s beau, mais du moins pas un dÃ´me noir. <br><br><img src="https://habrastorage.org/webt/xy/xy/xx/xyxyxxp0vsdvldheoauwfdrxxt0.png"><br><br>  Nous insÃ©rons l'objet ciel, le pixellisons immÃ©diatement (si avant que le panorama du ciel soit fait correctement, aucun changement ne sera nÃ©cessaire), puis crÃ©ons le masque, utilisez le dÃ©gradÃ© pour passer du ciel Ã  notre arriÃ¨re-plan et ajustez la luminositÃ© du calque insÃ©rÃ© avec des courbes.  Faites attention Ã  la jonction du ciel et de votre panorama, parfois mÃªme lorsque vous utilisez un masque et un dÃ©gradÃ© - des objets sombres peuvent briller et vous pouvez facilement obtenir des montagnes translucides au-dessus de la ville.  Il est prÃ©fÃ©rable de dÃ©sactiver le calque panoramique et lentement, si vous avez besoin d'effacer toute la gomme suspecte. <br><br><img src="https://habrastorage.org/webt/nt/nx/l_/ntnxl__-qsve95gnluixnfm2iko.png"><br><br>  Cela peut Ãªtre fait.  Collez dans une couche la fonction "rÃ©duire" pour minimiser le volume, enregistrez Tiff juste au cas oÃ¹, puis rÃ©duisez l'image Ã  10 000 points sous le cÃ´tÃ© long, car la plupart des services (Sferika.ru ou le mÃªme Google Maps) ne manqueront pas un panorama trop volumineux - Oui, et il n'est pas nÃ©cessaire de transporter une charge aussi Ã©norme (pour les tÃ©lÃ©phones sur 4g, cela sera gÃ©nÃ©ralement insupportable).  Nous enregistrons le rÃ©sultat du travail en JPEG - la qualitÃ© est suffisante 10 et la sortie a un panorama de 50 mÃ©gapixels et une taille de fichier de 10-15 mb (selon les dÃ©tails). <br><br><img src="https://habrastorage.org/webt/ui/ea/vx/uieavxgqssxn5o-rgzc9c_ifpn4.png"><br><br>  Notre panorama est prÃªt - il ne reste plus qu'Ã  trouver un service de publication. <br><img src="https://habrastorage.org/webt/9w/pj/bx/9wpjbx-ml7dzugyjwm-11cdpp-q.png"><br><br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Panorama prÃªt ici</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418775/">https://habr.com/ru/post/fr418775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418761/index.html">Le livre Â«Pure Python. Les subtilitÃ©s de la programmation pour les pros Â»</a></li>
<li><a href="../fr418763/index.html">Moyen / senior: comment sortir du marais?</a></li>
<li><a href="../fr418765/index.html">Les conseils Dadata aident Ã  remplir tout formulaire de saisie. Maintenant guÃ©ris</a></li>
<li><a href="../fr418767/index.html">L'Ã©norme hÃ©ritage de jeu d'Adobe Flash et mes tentatives pour le sauver</a></li>
<li><a href="../fr418769/index.html">Exemple de calcul du Â«facteur de disponibilitÃ©Â» pour un systÃ¨me informatique</a></li>
<li><a href="../fr418777/index.html">Â«Il n'y a pas de patron iciÂ»: Ã  propos de travailler avec Open Source et Apache Ignite dans Sberbank Technologies</a></li>
<li><a href="../fr418779/index.html">Caissier sur la base de la tablette: pourquoi les dÃ©taillants du rÃ©seau en ont besoin (nous le disons sur l'exemple de notre caissier)</a></li>
<li><a href="../fr418781/index.html">Ajoutez le cryptage des e-mails et la signature Ã©lectronique Ã  Zimbra</a></li>
<li><a href="../fr418783/index.html">"Qui hier Ã©tait un gÃ©ant monopolistique, demain pourrait devenir rien." Entretien avec Evgeny Chereshnev de Biolink.Tech</a></li>
<li><a href="../fr418785/index.html">Amigo tout. Maintenant c'est officiel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>