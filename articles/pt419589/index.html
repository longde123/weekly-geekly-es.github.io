<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòú üññüèæ üë®‚Äçüë®‚Äçüëß‚Äçüëß Usamos o AMP como uma biblioteca de uso geral para criar sites din√¢micos r√°pidos üë©üèæ‚Äçüî¨ ü§ñ üßëüèæ‚Äçü§ù‚Äçüßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alterar a primeira impress√£o √© muito dif√≠cil. E n√£o estou falando apenas de pessoas. As tecnologias tamb√©m costumam se tornar ref√©ns da primeira impre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Usamos o AMP como uma biblioteca de uso geral para criar sites din√¢micos r√°pidos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/google/blog/419589/"><p>  Alterar a primeira impress√£o √© muito dif√≠cil.  E n√£o estou falando apenas de pessoas.  As tecnologias tamb√©m costumam se tornar ref√©ns da primeira impress√£o - sua primeira vers√£o.  E ent√£o, apesar de anos de desenvolvimento, novas oportunidades e a elimina√ß√£o de defici√™ncias antigas, na consci√™ncia de massa, a tecnologia permanece muito imperfeita, sua primeira vers√£o.  Aqueles que n√£o est√£o tentando lidar com esse tipo de vi√©s cognitivo podem apenas olhar para o sucesso dos concorrentes usando tecnologias familiares em novos cen√°rios, com uma pergunta tola: ‚ÄúO que poderia ter acontecido!?‚Äù. </p><br><p><img src="https://habrastorage.org/webt/e_/vr/6w/e_vr6w51_va8sq7tshdt8ue6dha.jpeg"></p><br><p>  O exemplo mais impressionante de uma tecnologia que avan√ßou muito em compara√ß√£o com o que era no in√≠cio, na minha opini√£o, s√£o as AMP - Accelerated Mobile Pages.  Muitos desenvolvedores percebem o AMP como uma maneira de colocar o conte√∫do est√°tico de seu site (artigos, not√≠cias, notas etc.) no cache do Google para que, quando eles abram na pesquisa, esse conte√∫do seja carregado instantaneamente (o √≠cone de raio nos resultados da pesquisa indica uma alta velocidade de carregamento das p√°ginas AMP: )).  Naturalmente, se voc√™ precisar alcan√ßar exatamente esse resultado, com o AMP ser√° muito f√°cil.  Mas o AMP √© muito mais do que apenas tecnologia para trabalhar com conte√∫do est√°tico ou cache do Google.  O AMP √© usado h√° muito tempo como uma biblioteca de uso geral baseada em componentes da Web para criar p√°ginas din√¢micas r√°pidas e at√© sites inteiros que os usu√°rios obt√™m da pesquisa e de outras fontes, incluindo visitas diretas.  Deste ponto de vista, o AMP pode ser comparado com Pol√≠mero, Reagir ou Angular.  Naturalmente, de olho no fato de que o AMP foi projetado para sites simples (o que quer que isso signifique), onde a √™nfase principal est√° no conte√∫do e o componente din√¢mico √© limitado. </p><br><p><img src="https://habrastorage.org/webt/id/l2/sr/idl2srdzomaaloufat7nsnsinbu.gif"></p><a name="habracut"></a><br><p>  Tamb√©m gostaria de observar que, apesar do nome de p√°ginas m√≥veis aceleradas, o AMP pode ser usado para criar sites, tanto para computadores quanto para dispositivos m√≥veis.  O site do projeto - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ampproject.org</a> √© um √≥timo exemplo do que o AMP pode fazer pela √°rea de trabalho. </p><br><p>  Neste artigo, consideraremos a pr√≥pria tecnologia AMP, falaremos sobre seus recursos e limita√ß√µes e tamb√©m faremos o desembarque de AMP para uma loja online com suporte para carregamento, exibi√ß√£o, filtragem e pesquisa de produtos.  Este exemplo n√£o foi escolhido por acaso, porque o com√©rcio eletr√¥nico √© a segunda √°rea mais popular depois dos sites de not√≠cias em que o AMP √© usado mais ativamente. </p><br><p>  Voc√™ pode ver a p√°gina de destino finalizada no GIF acima. </p><br><p> O AMP √© dedicado a muitos artigos, entre os quais voc√™ pode achar muito cr√≠tico.  A maioria desses artigos se concentra em um lado da tecnologia AMP, a saber, o cache.  Afinal, se a p√°gina do site √© armazenada em cache e, quando clicada em uma pesquisa, eles n√£o s√£o abertos diretamente, isso inevitavelmente imp√µe restri√ß√µes.  Os usu√°rios parecem navegar pelo seu site.  Surge uma quest√£o sacramental: quem se beneficia com isso?  Pode ser mais rent√°vel sempre fornecer conte√∫do diretamente?  A julgar pelo fato de o AMP ser usado ativamente pelos editores de conte√∫do, a maioria deles √© definitivamente lucrativa ao usar o cache - seus sites de pesquisa s√£o abertos instantaneamente.  O principal problema com o cache √© que, na barra de endere√ßos do navegador, o usu√°rio n√£o v√™ o endere√ßo do site em si, que hospeda as p√°ginas AMP, por exemplo <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.vedomosti.ru</a></em> , mas o endere√ßo no cache, neste caso, ser√° assim: <em><a href="">www.google.com/ amp / s / www.vedomosti.ru</a></em> . </p><br><p>  Esse comportamento n√£o √© uma maneira maliciosa de tirar os usu√°rios do seu site.  √â um problema t√©cnico que n√£o p√¥de ser resolvido de outra maneira.  Os desenvolvedores de AMP est√£o trabalhando ativamente em uma solu√ß√£o para esse problema.  O novo padr√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">empacotamento da Web</a> ajudar√°.  Gra√ßas a isso, ao carregar no cache, os dados s√£o assinados pelo certificado do dom√≠nio de origem e, como resultado, ao exibir p√°ginas AMP do cache, o dom√≠nio original e n√£o o endere√ßo no cache, ser√£o exibidos na barra de endere√ßos. </p><br><p>  Por outro lado, o problema de cache, se relevante, √© principalmente para editores de conte√∫do.  Se o principal ativo for artigos ou not√≠cias, para qualquer editor, √© importante como e para quem s√£o exibidos.  E o fato de os editores terem inicialmente desconfiado do AMP √© compreens√≠vel.  Da√≠ muita controv√©rsia sobre esse t√≥pico.  Por outro lado, o com√©rcio eletr√¥nico √© um cen√°rio completamente diferente.  Para o propriet√°rio de uma loja on-line, um site para venda de ingressos para shows, um banco que aceita solicita√ß√µes de cart√µes de cr√©dito ou um sal√£o de beleza que registra clientes, √© fundamental que os clientes venham e comprem.  A convers√£o √© importante.  E se houver uma tecnologia que ajude a tornar os sites mais r√°pidos, aumentando assim a convers√£o, o uso dessa tecnologia ser√°, obviamente, ben√©fico. </p><br><h1>  Amp </h1><br><p>  O que torna os sites mais r√°pidos?  Voc√™ os torna r√°pidos, desenvolvedores!  N√£o h√° m√°gica, sites r√°pidos s√£o r√°pidos porque seus desenvolvedores se preocupam com o desempenho e trabalham neles para melhorar os sites.  H√° um conjunto de pr√°ticas recomendadas e truques para criar sites que carregam rapidamente e trabalham rapidamente.  Por exemplo, √© melhor carregar imagens pesadas somente no momento em que o usu√°rio rolar para elas, e n√£o imediatamente ao abrir a p√°gina.  Tamb√©m vale a pena limitar o n√∫mero total de recursos baixados, usando scripts ass√≠ncronos, etc.  O √∫nico problema √© que todas essas pr√°ticas precisam ser lembradas, lembradas e monitoradas constantemente sua aplica√ß√£o.  Isso √© complicado.  Sempre h√° a tenta√ß√£o de fazer algo que n√£o estar√° alinhado com as melhores pr√°ticas, mas ser√° mais f√°cil de implementar. </p><br><p>  O AMP √© uma tecnologia com a qual √© f√°cil fazer a coisa certa (e finalmente obter um site r√°pido).  E tornar um site lento usando AMP √© dif√≠cil.  Isso √© alcan√ßado por meio de um conjunto de restri√ß√µes, bem como por um validador que verifica essas restri√ß√µes.  Se a p√°gina for validada, ela poder√° ser armazenada em cache.  Ou seja, o AMP o restringe deliberadamente - e essa √© a principal id√©ia dessa tecnologia, mas, em troca, voc√™ ganha confian√ßa de que est√° usando as melhores pr√°ticas.  Voc√™ n√£o precisa ser um especialista em otimiza√ß√£o para obter um bom resultado usando o AMP.  As pr√°ticas recomendadas s√£o usadas por padr√£o e o potencial de erros √© minimizado. </p><br><p>  Ao mesmo tempo, o AMP n√£o √© outro tipo de HTML, √© uma biblioteca comum na qual n√£o h√° nada que n√£o seria acess√≠vel aos criadores de outras bibliotecas.  Com o AMP, voc√™ usa marca√ß√£o HTML regular e estilos CSS.  Voc√™ pode criar um site inteiro no AMP se for bastante simples (um exemplo t√≠pico s√£o todos os tipos de p√°ginas de destino) e, se os recursos do AMP se tornarem insuficientes, voc√™ sempre poder√° adicionar p√°ginas que n√£o sejam AMP. </p><br><p>  Por outro lado, as otimiza√ß√µes usadas no AMP podem ser feitas sem o AMP, mas isso exigir√° muito esfor√ßo e tempo.  De qualquer forma, mesmo que por algum motivo voc√™ decida n√£o usar o AMP, faz sentido estudar pelo menos como essa biblioteca funciona e o que faz para aplicar essas abordagens aos seus sites.  Pode parecer que a promo√ß√£o do AMP seja a promo√ß√£o de uma biblioteca espec√≠fica, e n√£o o desempenho dos sites como tais.  Mas n√£o √© assim: ter um site produtivo √© muito mais importante do que usar uma ou outra biblioteca ou estrutura. </p><br><p>  Mais uma vez, gostaria de observar que todas as restri√ß√µes impostas pelo AMP n√£o s√£o de natureza ideol√≥gica, mas s√£o causadas por considera√ß√µes utilit√°rias - elas permitem a cria√ß√£o de sites r√°pidos.  O ponto.  Se no futuro houver uma maneira, sem sacrificar o desempenho, de remover uma ou outra limita√ß√£o, √© claro que ela ser√° levantada. </p><br><p>  Quais s√£o as limita√ß√µes do AMP?  A limita√ß√£o mais importante √© que as p√°ginas n√£o podem conter c√≥digo JavaScript arbitr√°rio.  A √∫nica coisa para a qual voc√™ pode usar JavaScript limitado √© a liga√ß√£o de dados.  Al√©m disso, voc√™ n√£o pode conectar arquivos JavaScript e CSS externos.  Existem exce√ß√µes: esta √© a pr√≥pria biblioteca AMP, bem como uma lista de componentes aprovados (voc√™ pode participar do desenvolvimento da AMP e criar seus pr√≥prios componentes).  Todo o CSS deve estar na pr√≥pria p√°gina e seu volume √© limitado a 50 kilobytes.  Al√©m disso, voc√™ n√£o pode usar parte das tags HTML, como &lt;img /&gt;; elas usam os componentes da Web inclu√≠dos no pacote AMP.  Por exemplo, o componente &lt;amp-img /&gt; √© usado em vez de &lt;img /&gt;.  Isso √© necess√°rio para que o AMP possa controlar o carregamento de recursos.  Tamb√©m h√° pequenas restri√ß√µes de CSS causadas por considera√ß√µes de desempenho (voc√™ n√£o pode usar o modificador! Important e anima√ß√µes n√£o aceleradas por GPU).  Na verdade isso √© tudo.  O AMP fornece um rico conjunto de componentes, que elimina parcialmente a incapacidade de escrever c√≥digo JavaScript arbitr√°rio.  O conjunto de componentes inclui, por exemplo, <strong>amp-date-picker</strong> , <strong>amp-sidebar</strong> , <strong>amp-user-notification</strong> , <strong>amp-facebook-like</strong> , <strong>amp-access</strong> , com os quais voc√™ pode implementar o suporte √† autentica√ß√£o e muitos outros.  E em casos muito extremos, quando n√£o h√° outra sa√≠da, voc√™ pode usar iframes com conte√∫do que n√£o seja AMP. </p><br><p>  Antes de come√ßar a trabalhar com a AMP, recomendo que voc√™ estude a documenta√ß√£o no site do projeto - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ampproject.org</a> .  Al√©m disso, √© √∫til consultar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ampbyexample.com</a> , que cont√©m excelentes exemplos, a maioria dos quais pode ser usada praticamente sem altera√ß√µes em projetos reais.  Se voc√™ precisar de modelos prontos, eles est√£o dispon√≠veis no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ampstart.com</a> . </p><br><p><img src="https://habrastorage.org/webt/lv/cp/n3/lvcpn3hhaqefftseopfyp3ko90m.jpeg"></p><br><h1>  Criando AMP Landing </h1><br><p>  Vamos criar uma p√°gina de destino para uma loja de bicicletas online com uma lista de produtos, filtragem e pesquisa.  Nossos produtos ser√£o carregados dinamicamente.  Para fins de treinamento, n√£o usaremos modelos prontos, mas faremos tudo do zero.  O c√≥digo do projeto pode ser encontrado no GitHub: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/spugachev/amp-article</a> </p><br><p>  O reposit√≥rio cont√©m um back-end no Node.js, bem como p√°ginas AMP localizadas na pasta p√∫blica.  Para iniciar o projeto, voc√™ precisa clonar o reposit√≥rio e executar os seguintes comandos na pasta do projeto (o Node.js deve estar instalado). </p><br><pre><code class="bash hljs">&gt;&gt; npm install &gt;&gt; npm start</code> </pre> <br><h2>  Modelo de P√°gina </h2><br><p>  Crie uma p√°gina AMP m√≠nima.  Seu c√≥digo √© apresentado abaixo.  No projeto que voc√™ baixou do GitHub, a p√°gina principal public / index.html √© intencionalmente deixada em branco, e n√≥s a usaremos para escrever c√≥digo. </p><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"canonical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://amp-bike-shop.com/index.html"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width,minimum-scale=1,initial-scale=1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp-boilerplate</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-webkit-animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-moz-animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-ms-animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">animation</span></span></span><span class="css">:-amp-start </span><span class="hljs-number"><span class="css"><span class="hljs-number">8s</span></span></span><span class="css"> </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">steps</span></span></span><span class="css">(1,end) </span><span class="hljs-number"><span class="css"><span class="hljs-number">0s</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1</span></span></span><span class="css"> normal both}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">webkit</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">moz</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">ms</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">o</span></span></span><span class="css">-</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}@</span><span class="hljs-keyword"><span class="css"><span class="hljs-keyword">keyframes</span></span></span><span class="css"> -amp-start{</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">from</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:hidden}</span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">to</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">:visible}}</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp-boilerplate</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css">{</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-webkit-animation</span></span></span><span class="css">:none;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-moz-animation</span></span></span><span class="css">:none;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-ms-animation</span></span></span><span class="css">:none;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">animation</span></span></span><span class="css">:none}</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">amp-custom</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/*     */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>   AMP  !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  A primeira coisa que chama sua aten√ß√£o no exemplo acima - a marca√ß√£o HTML cont√©m uma indica√ß√£o expl√≠cita de que esta √© uma p√°gina AMP.  Isso √© obtido adicionando um s√≠mbolo de raio √† tag html (infelizmente o s√≠mbolo Habr corta um s√≠mbolo de raio) ou adicionando a palavra "amp" tamb√©m.  Sem essa indica√ß√£o, a p√°gina n√£o ser√° validada e n√£o ser√° adicionada ao cache do Google durante a indexa√ß√£o. </p><br><p>  Em seguida, voc√™ precisa conectar a biblioteca JavaScript AMP: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Voc√™ tamb√©m deve especificar o endere√ßo can√¥nico da p√°gina.  Se houver uma vers√£o n√£o AMP da p√°gina, seu endere√ßo ser√° indicado.  Caso contr√°rio, o endere√ßo da pr√≥pria p√°gina AMP √© indicado. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"canonical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://amp-bike-shop.com/index.html"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Al√©m disso, voc√™ precisa adicionar uma metatag para dimensionamento, bem como estilos CSS de modelo.  Esses estilos n√£o podem ser alterados.  Eles s√£o necess√°rios para que, ao carregar a p√°gina, mas antes de carregar a biblioteca AMP JavaScript, o conte√∫do n√£o estilizado n√£o pisque na tela.  Se, por algum motivo, a biblioteca n√£o carregar, o conte√∫do ser√° mostrado em qualquer caso ap√≥s oito segundos. </p><br><p>  Coloque a imagem usando o componente amplificador de imagem na parte superior da p√°gina.  Ao definir layout = "responsivo", a imagem ser√° esticada at√© a largura total do cont√™iner. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img/hero.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"320"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"213"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"responsive"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Daqui em diante, n√£o fornecerei estilos CSS, e eles podem ser encontrados no reposit√≥rio do projeto no GitHub.  Ent√£o ... </p><br><p>  Execute o projeto e abra a p√°gina principal em um navegador.  Se o par√¢metro # development = 1 for adicionado ao endere√ßo da p√°gina, a p√°gina ser√° validada automaticamente e as informa√ß√µes sobre isso ser√£o exibidas no console do navegador.  Para a mesma finalidade, voc√™ pode usar a extens√£o do Chrome chamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AMP Validator</a> . </p><br><p>  Por exemplo, se em vez de &lt;amp-img /&gt; uma tag &lt;img /&gt; comum fosse usada, essa p√°gina n√£o passaria na valida√ß√£o, o que seria indicado por uma mensagem correspondente. </p><br><p><img src="https://habrastorage.org/webt/zo/zx/hb/zozxhbb-dfjujwhqpkg2gbhmkb8.jpeg"></p><br><h2>  Carregando e exibindo dados </h2><br><p>  Agora temos uma p√°gina AMP b√°sica com uma imagem para atrair a aten√ß√£o e o nome da loja.  Agora √© hora de baixar a lista de produtos do servidor e exibi-la na p√°gina.  O projeto Backed j√° inclui um servi√ßo que retorna uma lista de mercadorias (neste caso, bicicletas) no formato JSON. </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/bikes [ { "id":<span class="hljs-number"><span class="hljs-number">1</span></span>, "img":"img/01.jpg", "title":" ", "price":"28500", "available":<span class="hljs-keyword"><span class="hljs-keyword">false</span></span> }, { "id":<span class="hljs-number"><span class="hljs-number">2</span></span>, "img":"img/02.jpg", "title":" ", "price":"14750", "available":<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, { "id":<span class="hljs-number"><span class="hljs-number">3</span></span>, "img":"img/03.jpg", "title":" ", "price":"31200", "available":<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, ‚Ä¶ ]</code> </pre> <br><p>  Como o AMP n√£o permite que voc√™ escreva c√≥digo JavaScript arbitr√°rio, todas as a√ß√µes, incluindo o carregamento de dados, s√£o definidas em um estilo declarativo.  Precisamos conectar v√°rios componentes √† p√°gina que carregar√° e exibir√° dados, al√©m de permitir o uso de modelos.  Como esses ser√£o componentes padr√£o de AMP, temos permiss√£o para conect√°-los.  Vamos precisar dos componentes: </p><br><ul><li>  <strong>amp-bind</strong> para suportar a liga√ß√£o de dados, </li><li>  <strong>amp-bigode</strong> para trabalhar com modelos no formato bigode </li><li>  bem como uma <strong>lista de amplificadores</strong> para trabalhar com uma lista que carregar√° e exibir√° dados. <br>  Conecte os arquivos necess√°rios no cabe√ßalho da p√°gina: </li></ul><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-bind"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-bind-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-template</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-mustache"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-mustache-0.2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-list"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-list-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Adicione o componente da lista √† p√°gina: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"offers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3720"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fallback</span></span></span><span class="hljs-tag">&gt;</span></span>  .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-mustache"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"card"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"height: 340px;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{img}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{title}}-{{price}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> {{#available}}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} {{^available}}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{price}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  A propriedade src √© configurada para o componente, que determina de onde os dados ser√£o obtidos (no nosso caso, uma solicita√ß√£o GET ser√° executada em ‚Äú// localhost: 3000 / api / bikes‚Äù), bem como a propriedade items, que permite procurar uma matriz de elementos para a lista dentro da resposta JSON do servidor.  Como a resposta em si √© uma matriz, o valor da propriedade items indica a raiz da resposta. </p><br><p>  Em seguida, definimos um esbo√ßo que ser√° exibido durante o carregamento de dados, bem como um esbo√ßo em caso de erro.  Mas o mais interessante √©, √© claro, o modelo de item da lista.  O formato do modelo √© muito simples, acho que a sintaxe dos modelos de bigode n√£o requer explica√ß√µes adicionais. </p><br><p>  Adicione o c√≥digo acima, atualize a p√°gina e veja a lista de produtos exibidos na p√°gina.  Com marca√ß√£o simples e sem escrever c√≥digo JavaScript, carregamos os dados e os exibimos na p√°gina (usando uma lista e um modelo). </p><br><h2>  Filtragem de dados </h2><br><p>  Cada p√°gina AMP possui um estado.  Pode ser considerado como um objeto com uma hierarquia de propriedades.  O estado da p√°gina pode ser alterado em manipuladores de eventos usando a fun√ß√£o AMP.setState. </p><br><p>  Adicione um filtro que permita exibir apenas as bicicletas dispon√≠veis.  Para fazer isso, colocaremos uma caixa de sele√ß√£o na p√°gina, clicando sobre a qual alteraremos o estado da p√°gina, atribuindo o valor √† vari√°vel onlyAvailable (se a caixa de sele√ß√£o estiver marcada ou n√£o).  O nome da vari√°vel √© arbitr√°rio, poderia ser chamado de qualquer coisa.  Observe que o AMP implementa sua pr√≥pria maneira de lidar com eventos.  Voc√™ pode manipular v√°rios eventos ao mesmo tempo e, para cada evento, pode ter v√°rias a√ß√µes. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checkbox"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"change:AMP.setState({ onlyAvailable: event.checked })"</span></span></span><span class="hljs-tag">/&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  O mecanismo de liga√ß√£o de dados permite vincular vari√°veis ‚Äã‚Äãde estado da p√°gina com valores de propriedade na marca√ß√£o HTML.  Para que a biblioteca AMP fa√ßa essa liga√ß√£o, o nome da propriedade que deve receber o valor deve ser colocado entre colchetes - [].  Por exemplo, adicionaremos ou removeremos a classe CSS 'active' (esta √© uma classe n√£o padr√£o e √© definida por n√≥s) dependendo do valor da vari√°vel onlyAvailable. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onlyAvailable? 'active' : ''"</span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre> <br><p>  No modo de desenvolvimento (# development = 1), o estado da p√°gina pode ser exibido no console do navegador usando a fun√ß√£o AMP.printState (); </p><br><p><img src="https://habrastorage.org/webt/mz/2_/4u/mz2_4uea5ywl0uixwmu3fz669sa.jpeg"></p><br><p>  Agora adicione a lista de produtos ao estado da p√°gina.  Para fazer isso, usamos um componente separado <strong>de estado de amp</strong> .  O componente far√° o download dos dados da mesma fonte da <strong>lista de amp</strong> , mas n√£o ser√° recarregada, pois o AMP controla o carregamento dos dados e evita solicita√ß√µes desnecess√°rias.  Al√©m disso, adicionamos uma macro que, ao alterar o valor da vari√°vel onlyAvailable, filtrar√° a lista de produtos. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">expression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes.filter(bike =&gt; onlyAvailable ? bike.available : true)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Agora vamos usar a lista filtrada como uma fonte de dados para o componente <strong>amp-list</strong> .  Para fazer isso, associamos a propriedade src do componente √† macro filtradaBikes.  E tamb√©m conecte a propriedade da altura do componente com o n√∫mero de elementos.  Isso √© necess√°rio, pois a altura do componente da <strong>lista de amplificadores</strong> n√£o ser√° ajustada automaticamente para o n√∫mero de elementos.  Neste exemplo, o n√∫mero 340 √© a altura do cart√£o do produto e 16 √© o recuo acima e abaixo. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"offers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3720"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes()"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(340 + (16*2)) * filteredBikes().length"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Observe que o carregamento expl√≠cito de dados configurando a propriedade src = "// localhost: 3000 / api / bikes" permanece.  Voc√™ n√£o pode remov√™-lo.  Ao carregar uma p√°gina AMP por motivos de desempenho, a liga√ß√£o de dados n√£o √© realizada automaticamente.  Ele ser√° executado somente ap√≥s as a√ß√µes do usu√°rio, como clicar na caixa de sele√ß√£o. </p><br><p>  Abra a p√°gina resultante e verifique se a filtragem funciona corretamente. </p><br><h2>  Pesquisar </h2><br><p>  A implementa√ß√£o da pesquisa √© semelhante √† implementa√ß√£o de filtragem.  Adicione um campo de texto e, ao entrar no teste, atribuiremos ao estado da consulta vari√°vel da p√°gina o valor digitado no campo. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input-debounced: AMP.setState({ query: event.value })"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  O back-end em nosso projeto suporta a pesquisa.  Para pesquisar produtos, voc√™ precisa adicionar o par√¢metro "q" √† solicita√ß√£o GET que j√° conhecemos.  N√£o abordaremos a implementa√ß√£o do lado do servidor, mas veremos como executar uma nova solicita√ß√£o para o servidor quando o estado da p√°gina mudar. </p><br><p>  Executamos a liga√ß√£o de dados para o par√¢metro src do componente <strong>amp-state</strong> , que j√° usamos para obter os dados iniciais para a filtragem.  Quando voc√™ altera o estado da p√°gina vari√°vel da consulta, uma nova consulta de pesquisa ser√° executada. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query ? '//localhost:3000/api/bikes?q=' + query : '//localhost:3000/api/bikes'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  √â isso, agora a pesquisa est√° funcionando na p√°gina.  Al√©m disso, uma nova consulta de pesquisa ser√° uma fonte de dados para filtragem, que tamb√©m continuar√° funcionando corretamente.  O c√≥digo de corpo inteiro da p√°gina √© apresentado abaixo. </p><br><p><img src="https://habrastorage.org/webt/-d/hd/5u/-dhd5usb9dywdquq83yoaxctpgq.jpeg"></p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero-img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img/hero.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"320"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"213"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"responsive"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>   AMP  !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]= </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query ? '//localhost:3000/api/bikes?q=' + query : '//localhost:3000/api/bikes'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-state</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">expression</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bikes.filter(bike =&gt; onlyAvailable ? bike.available : true)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-bind-macro</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"query"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autocomplete</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input-debounced: AMP.setState({ query: event.value })"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onlyAvailable? 'active' : ''"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checkbox"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"change:AMP.setState({ onlyAvailable: event.checked })"</span></span></span><span class="hljs-tag"> /&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"offers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3720"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//localhost:3000/api/bikes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filteredBikes()"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(340 + (16*2)) * filteredBikes().length"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"."</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fallback</span></span></span><span class="hljs-tag">&gt;</span></span>  .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-mustache"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"card"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fixed-height"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{img}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{title}}-{{price}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-img</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> {{#available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} {{^available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{/available}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{price}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Conclus√£o: criamos uma p√°gina AMP interativa com suporte para carregar e vincular dados.  Conclu√≠mos a instala√ß√£o e alteramos o estado da p√°gina, aprendemos a trabalhar com modelos e tamb√©m respondemos √† entrada do usu√°rio.  Como voc√™ pode ver, o AMP facilita o desenvolvimento de p√°ginas din√¢micas interativas, apesar das s√©rias limita√ß√µes no uso do JavaScript.  Tente agora dizer que o AMP √© para est√°tica;).  Sabemos que o AMP pode fazer muito mais! </p><br><h1>  Caixa de ferramentas AMP </h1><br><p>  Ao carregar p√°ginas AMP no cache e envi√°-las a partir do cache, o Google realiza muitas otimiza√ß√µes.  Quando voc√™ distribui p√°ginas AMP diretamente do seu site, √© claro que nenhuma otimiza√ß√£o adicional √© realizada.  Se voc√™ deseja acelerar o retorno direto de p√°ginas AMP, use a biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AMP Toolbox</a> .  Ele fornece o middleware para o Express, portanto, geralmente o uso da AMP Toolbox com Node.js √© uma quest√£o de adicionar algumas linhas de c√≥digo.  Ao mesmo tempo, a velocidade de carregamento da p√°gina aumenta! </p><br><h1>  Passos adicionais </h1><br><h2>  Google Analytics </h2><br><p>  Se voc√™ n√£o coletar estat√≠sticas sobre o uso do seu site, n√£o faz sentido fazer altera√ß√µes - voc√™ n√£o ter√° uma imagem clara se as altera√ß√µes foram positivas, negativas ou neutras.  Como voc√™ pode saber se a experi√™ncia do usu√°rio melhorou com a implementa√ß√£o do AMP, se voc√™ n√£o possui nenhuma informa√ß√£o sobre a experi√™ncia do usu√°rio?  Portanto, a introdu√ß√£o da an√°lise √© vital. </p><br><p>  O AMP suporta dois componentes principais para a coleta de dados: <strong>amp-pixel</strong> para definir um pixel simples e <strong>amp-analytics</strong> para solu√ß√µes de an√°lise mais complexas.  O componente <strong>amp-experiment</strong> tamb√©m permite realizar testes A / B nas p√°ginas AMP. </p><br><p>  Usando o <strong>amp-analytics,</strong> voc√™ pode conectar o Google Analytics, o Yandex Metrics e outros fornecedores (por exemplo, o Baidu Analytics). </p><br><p>  Adicionar an√°lises a uma p√°gina √© muito simples.  Primeiro, voc√™ precisa conectar a biblioteca apropriada ao componente <strong>amp-analytics</strong> . </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-analytics"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-analytics-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  E, em seguida, coloque o componente na p√°gina e defina as configura√ß√µes.  Para o Google Analytics, ser√° assim. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"googleanalytics"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/json"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"vars"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"account"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"UA-XXXXX-Y"</span></span></span><span class="actionscript"> }, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"triggers"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"trackPageview"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"on"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"visible"</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"request"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"pageview"</span></span></span><span class="actionscript"> } } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Para Yandex Metrics, o c√≥digo √© muito semelhante. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"metrika"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/json"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"vars"</span></span></span><span class="actionscript">: { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"counterId"</span></span></span><span class="actionscript">: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"XXXXXX"</span></span></span><span class="actionscript"> } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-analytics</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Naturalmente, essas s√£o as configura√ß√µes mais m√≠nimas.  Para qualquer solu√ß√£o anal√≠tica, voc√™ precisa especificar nas configura√ß√µes quais dados voc√™ deseja coletar. </p><br><p>  Ao usar o componente <strong>amp-analytics</strong> , h√° um problema com o rastreamento de usu√°rios em p√°ginas AMP e n√£o AMP.  Quero que o ID do usu√°rio seja o mesmo em todos os lugares.  Para que um usu√°rio que baixa sua p√°gina do cache do Google e clica diretamente no seu site, do ponto de vista da an√°lise, seja considerado o mesmo usu√°rio.  Para fazer isso, use a API de ID do cliente.  Saiba mais sobre as configura√ß√µes que voc√™ precisa fazer na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ajuda</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Google Analytics</a> . </p><br><h2>  Trabalhadores de servi√ßo e PWAs (aplicativos da Web progressivos) </h2><br><p>  No caso de sites bastante complexos, assim como sites existentes, ser√° dif√≠cil escrever ou at√© reescrever tudo no AMP.  Portanto, geralmente as p√°ginas que os usu√°rios obt√™m de fontes externas (p√°ginas de logon) criam p√°ginas AMP.  Eles abrir√£o rapidamente do cache e diretamente.  Por√©m, quando o usu√°rio clicar no link na p√°gina AMP, ele ser√° levado ao seu site principal.  E aqui √© importante que o site principal ao carregar da p√°gina AMP seja carregado instantaneamente.  Isso √© alcan√ßado pelo mecanismo de trabalhadores do servi√ßo.  Quando voc√™ abre a p√°gina AMP, ele deve instalar o servi√ßo de trabalho para o site principal, e o servi√ßo de trabalho, por sua vez, far√° o download e o cache dos arquivos necess√°rios.  Gra√ßas a isso, os links para a p√°gina AMP ser√£o abertos instantaneamente, pois tudo ou quase tudo o que √© necess√°rio para abrir as p√°ginas a seguir j√° estar√£o no cache. </p><br><p>  Para instalar o t√©cnico de servi√ßo, use o componente <strong>amp-install-</strong> serviceiceworker.  Ele se conecta da mesma maneira que todos os outros componentes AMP. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">custom-element</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"amp-install-serviceworker"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Um exemplo de seu uso √© apresentado abaixo. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-install-serviceworker</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/sw.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-iframe-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://mydomain.com/sw.html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nodisplay"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">amp-install-serviceworker</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Se um usu√°rio visitar seu site diretamente, o componente instalar√° o trabalhador do servi√ßo especificado pelo par√¢metro src.  Mas, no caso de carregar a p√°gina AMP do cache, ele n√£o poder√° fazer isso, pois a instala√ß√£o de trabalhadores de servi√ßo para outros dom√≠nios √© proibida.  Portanto, voc√™ precisa criar uma p√°gina no site em que o c√≥digo de instala√ß√£o do operador de servi√ßo estar√° localizado.  Ao carregar do cache, o <strong>amp-install-serviceworker</strong> abrir√° a p√°gina em um iframe e o respons√°vel pelo servi√ßo ser√° instalado. </p><br><p>  O PWA (Progressive Web Apps) √© uma abordagem de como criar aplicativos da web modernos que abordam os nativos com base na experi√™ncia do usu√°rio.  O cora√ß√£o da PWA √© o pessoal de servi√ßo.  Pode-se encontrar a opini√£o de que a AMP e a PWA s√£o, em certa medida, concorrentes.  De fato, eles se complementam.  O PWA concentra-se em intera√ß√µes regulares de longo prazo e sempre que poss√≠vel com os usu√°rios.  Ao mesmo tempo, o AMP se concentra na primeira intera√ß√£o quando o usu√°rio vem de fora.  O PWA n√£o melhora exatamente esse aspecto - a primeira intera√ß√£o.  Portanto, muitos projetos usam o AMP como um ponto de entrada que transfere o usu√°rio para o PWA.  E isso √© muito razo√°vel.  Se voc√™ n√£o deve ter intera√ß√µes regulares, longas ou complexas com o usu√°rio, poder√° conviver com um AMP. </p><br><h1>  Conclus√£o </h1><br><p>  Neste artigo, analisamos um aplicativo do AMP, embora haja realmente muitos cen√°rios mais interessantes.  Por exemplo, os an√∫ncios AMPHTML s√£o uma √≥tima maneira de criar an√∫ncios que s√£o carregados rapidamente.  Afinal, se banners de carregamento lento forem colocados em p√°ginas AMP abertas instantaneamente, os usu√°rios provavelmente n√£o ver√£o esses an√∫ncios.  Sim, e em p√°ginas regulares - an√∫ncios de carregamento lento incomodam os usu√°rios.  Portanto, √© l√≥gico fazer a pr√≥pria publicidade (pe√ßas criativas de publicidade) usando o AMP. </p><br><p>  Os usu√°rios usam o conte√∫do de maneira diferente em computadores e dispositivos m√≥veis.  Por exemplo, ao ler de um telefone, os usu√°rios param de ler um artigo longo muito mais cedo do que quando l√™em da √°rea de trabalho (e voc√™ leu at√© este ponto? :)).  O formato das hist√≥rias (hist√≥rias) recentemente se tornou cada vez mais popular em dispositivos m√≥veis, e as hist√≥rias AMP s√£o apenas o caminho para fazer essas hist√≥rias rapidamente e sem esfor√ßo extra. </p><br><p>  Al√©m disso, uma vers√£o do AMP para email (AMPHTML para email) est√° sendo desenvolvida, o que permitir√° criar belos emails interativos usando o AMP. </p><br><p>  N√£o esque√ßa tamb√©m que o AMP pode ser usado simplesmente como um formato para inserir conte√∫do no seu site.  Por exemplo, se voc√™ precisar exibir not√≠cias, artigos ou cart√µes de produtos em um aplicativo React ou Angular, poder√° armazen√°-los no formato AMP, pr√©-carregar e exibi-los instantaneamente em um aplicativo Web (ou mesmo em um aplicativo nativo).  Voc√™ n√£o precisa usar o AMP para a p√°gina inteira - o conte√∫do do AMP tamb√©m pode ser pequeno. </p><br><p>  Usando o AMP, voc√™ pode criar sites inteiros, p√°ginas, banners, hist√≥rias e usar o AMP como um formato r√°pido e compacto para inserir conte√∫do. </p><br><p>  Sergey Pugachev, especialista em desenvolvedores do Google <br>  <em>PS.</em>  <em>O artigo √© uma vis√£o pessoal da AMP e pode n√£o coincidir com a opini√£o do Google ou do empregador do autor;)</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt419589/">https://habr.com/ru/post/pt419589/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt419579/index.html">Implementa√ß√£o do operador in em C ++</a></li>
<li><a href="../pt419581/index.html">Quais projetos sem fins lucrativos s√£o interessantes para o Y Combinator</a></li>
<li><a href="../pt419583/index.html">Como a R√∫ssia perdeu o auge do DVD, mas alcan√ßou o Ocidente com o advento da Internet de banda larga</a></li>
<li><a href="../pt419585/index.html">PWA √© f√°cil. Hello habr</a></li>
<li><a href="../pt419587/index.html">Competi√ß√µes que mudam o mundo. 1567 - 2035</a></li>
<li><a href="../pt419591/index.html">Como enviar e-mails e n√£o estragar: dicas pr√°ticas</a></li>
<li><a href="../pt419593/index.html">√ìculos dalt√¥nicos: como funciona e quais s√£o as dificuldades da sele√ß√£o</a></li>
<li><a href="../pt419599/index.html">Java REST na HeadHunter School of Programmers</a></li>
<li><a href="../pt419601/index.html">Um exemplo de design de um dispositivo digital "nos dedos"</a></li>
<li><a href="../pt419603/index.html">Antecedentes: empresas que produzem robomobiles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>