<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👛 🚏 👨🏾‍🎤 Percayai Codd atau fasilitas Anda? 🤔 👩‍🎨 👸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Objek tersimpan bebas sakit kepala: contoh sederhana bekerja dengan objek Caché dalam ObjectScript dan Python 

 Kastil Neuschwanstein 

 Pada Juni 20...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Percayai Codd atau fasilitas Anda?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435612/"><h2>  Objek tersimpan bebas sakit kepala: contoh sederhana bekerja dengan objek Caché dalam ObjectScript dan Python </h2><br><img src="https://habrastorage.org/webt/jb/ba/sp/jbbaspnh-olgr2ot_f2peelsifc.jpeg"><br>  <i>Kastil Neuschwanstein</i> <br><br>  Pada Juni 2020, tepatnya 50 tahun gudang data tabular atau, secara formal, model data relasional.  Ini dokumen resmi - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel terkenal yang sama</a> .  Yang kami ucapkan banyak terima kasih kepada Dr. Edgar Frank Codd.  Dan, omong-omong, model data relasional ada dalam daftar Forbes tentang inovasi global paling penting dalam 100 tahun terakhir. <br><br>  Di sisi lain, anehnya, Codd menganggap database relasional dan bahasa SQL sebagai implementasi terdistorsi teorinya.  Sebagai panduan, ia bahkan mengembangkan 12 aturan yang harus dipenuhi oleh setiap sistem manajemen basis data relasional (sebenarnya, ini adalah 13 aturan).  Dan, sebenarnya, hari ini, di dunia Anda tidak dapat menemukan DBMS yang memuaskan setidaknya Codd "Rule 0" dan, oleh karena itu, tidak ada yang bisa menyebut DBMS mereka 100% relasional :) Mungkin ada pengecualian, katakan padaku? <br><a name="habracut"></a><br>  Model relasional tidak terlalu kompleks dan dipelajari terus menerus.  Bahkan mungkin terlalu dalam dipelajari.  Sementara itu, pada tahun 2019 ini kami juga akan merayakan hari jadi yang lain - tepat 10 tahun yang lalu, tagar #NoSQL nanti tentang “tidak hanya SQL” muncul di Twitter dan memulai penetrasi yang cepat ke dalam praktik pengembangan model basis data. <br><br>  Mengapa pengantar yang begitu panjang?  Kenyataan bahwa alam semesta pemrograman terdiri dari data (dan tentu saja algoritma), dan posisi monopoli model relasional mengarah, karena lebih sopan untuk mengatakan, kesadaran pemecah programmer.  Karena objek kerja di kepala pengembang (OOP juga total, kan?), Semua daftar ini, antrian, pohon, tumpukan, kamus, utas, dan seterusnya hingga tak terbatas, jauh dari tabel. <br><br>  Dan jika Anda melanjutkan dan ingat tentang arsitektur penyimpanan di DBMS modern?  Katakanlah secara langsung, tidak ada orang waras yang menyimpan data dalam bentuk tabel.  Pengembang DBMS paling sering menggunakan varietas B-tree (misalnya, dalam PostrgeSQL) atau, lebih jarang, penyimpanan berbasis kamus.  Di sisi lain, barikade yang disimpan pengembang yang menggunakan DBMS tidak beroperasi pada tabel.  Dan ini memaksa programmer untuk terus-menerus menjembatani kesenjangan semantik dengan lapisan data menengah yang canggung.  Dan, dengan demikian, menyebabkan ketegangan dikotomis internal, ketidaknyamanan sistemik dan debug insomnia. <br><br>  Singkatnya, ada kontradiksi - kami mengemas data menjadi objek yang cocok untuk tugas tersebut, dan saat menyimpannya harus mengurus beberapa tabel. <br><br>  Keputusasaan?  Tidak :) Tapi bagaimana dengan pemetaan objek-relasional, apakah itu orang biasa dari ORM?  Mari kita serahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perang suci ini ke Yegor Bugaenko</a> dengan kawan-kawan.  Dan keseluruhan cerita dari abad terakhir ini, seperti yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menurut Paman Bob, seharusnya tidak membuat kita khawatir</a> . <br><br>  Tentu saja, perlu disebutkan bahwa "tas dengan byte" (Robert Martin "Arsitektur Murni") dapat diserialisasi dan dimasukkan ke dalam file atau didorong ke aliran lain yang sesuai.  Tapi, pertama, itu akan langsung membatasi kita dalam bahasa, dan kedua, sekarang kita hanya akan khawatir tentang menyimpan dalam DBMS. <br><br>  Ada pengecualian yang menyenangkan untuk pasang surut ini dengan byte bag - Intersystems Caché DBMS (dan sekarang platform data IRIS InterSystems).  Ini mungkin satu-satunya DBMS di dunia yang tidak menyembunyikan yang jelas dari pengembang dan bahkan melangkah lebih jauh - itu membebaskan seseorang dari berpikir "bagaimana cara menyimpan semuanya dengan benar."  Sudah cukup untuk mengatakan bahwa kelas melanjutkan genus Persisten dan intinya ada di topi, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">yaitu, di global</a> (jangan bingung dengan variabel global!). <br><br>  Semua jenis data dapat disimpan, termasuk karakter dan aliran biner.  Ini adalah contoh sederhana: <br><br><pre><code class="plaintext hljs">//       - // :      ,     ,     , ,   Class FW.Events Extends %Persistent { Property "My name" As %String; } //      //   «»  set haJS = ##class(FW.Events).%New() //   write haJS.%Id()</code> </pre> <br>  Selain itu, dan ini luar biasa, Anda dapat berkomunikasi dengan objek yang disimpan tidak hanya dalam ObjectScript, asli ke Caché, tetapi dalam mengambil dan menyimpannya secara langsung dalam Python, Java, JavaScript, C ++, C #, Perl.  Dan bahkan, oh horor :).  Dimungkinkan juga untuk mendapatkan informasi dari objek yang sama secara langsung melalui query SQL, dan juga dimungkinkan untuk memanggil metode Anda sendiri pada objek.  Lebih tepatnya, metode dalam kasus ini sendiri (dan kata ajaib SqlProc) berubah menjadi prosedur tersimpan.  Semua keajaiban sudah ada di bawah kap CMS DBMS. <br><blockquote>  Bagaimana cara mendapatkan akses tes gratis ke CMS DBMS Intersystems? <br>  Ini benar-benar nyata, tidak peduli apa kata bahasa jahat!  :) Anda dapat mengunduh dan menginstal versi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Caché</a> fitur lengkap pengguna tunggal di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> (Anda harus mendaftar secara gratis).  Build tersedia untuk MacOS, Windows, dan Linux. </blockquote>  Sangat mudah untuk bekerja dengan kode ObjectScript dan akses langsung langsung ke server DBE Caché (dan platform IRIS InterSystems juga) menggunakan Atelier IDE, yang didasarkan pada Eclipse.  Semua instruksi <a href="">pengunduhan dan instalasi</a> ada di <a href="">sini</a> . <br><br>  Bagi yang lebih nyaman dan terbiasa, Anda dapat menggunakan Visual Studio Code yang nyaman dan sederhana, melengkapinya dengan plug-in ObjectScript yang dikembangkan oleh komunitas. <br><br>  Dan sekarang beberapa contoh praktis.  Mari kita coba membuat beberapa objek terkait dan bekerja dengannya dalam ObjectScript dan Python.  Integrasi dengan bahasa lain dilaksanakan dengan sangat mirip.  Python dipilih karena alasan "afinitas maksimum" dengan ObjectScript - kedua bahasa dapat skrip, mendukung OOP dan tidak memiliki ketikan yang kuat :) <br><br>  Sebagai contoh, kami beralih ke Khabarovsk yang kuat (jangan bingung dengan Khabrovsk!) Proyek-proyek “Kerangka Kerja Duduk-Duduk”.  Kode sumber ideologis ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/Hajsru/framework-weekend</a> Dan kode sumber kami lebih rendah dalam teks. <br><blockquote>  Nuansa penting bagi pengguna macOS.  Saat memulai modul dukungan untuk Python, Anda harus ingat bahwa Anda harus menentukan jalur DYLD_LIBRARY_PATH ke direktori tempat Anda memasang Caché.  Misalnya, seperti ini: <br>  export DYLD_LIBRARY_PATH = / application / Cache / bin: $ DYLD_LIBRARY_PATH <br>  Ini <a href="">secara khusus ditunjukkan</a> dalam dokumentasi. </blockquote><h3>  Kami membuat kelas tersimpan di ObjectScript </h3><br>  Jadi ayo pergi.  Kelas-kelas di Caché akan sangat sederhana.  Anda dapat melakukannya tanpa IDE - salin kode kelas langsung melalui portal instance platform Caché Anda (ya, Caché DBMS jauh dari sekadar DBMS): Browser Sistem&gt; Kelas&gt; Impor (Namespace USER). <br><br>  Setelah menyimpan, objek akan muncul di bola dengan nama yang cocok dengan nama kelas yang sesuai.  Lihat juga di portal manajemen Caché: System Browser&gt; Globals (Namespace USER). <br><br><pre> <code class="plaintext hljs">//    , ,      Class FW.Event Extends %Persistent { Property title as %String; Property description as %String; Property date as %Date; Property visitors as list of FW.Attendee; } //    / Class FW.Attendee Extends %Persistent { Property name As %String; }</code> </pre><br><h3>  Mengakses Objek di Caché dari Python </h3><br>  Pertama, sambungkan ke basis data Caché DBMS.  Kami ulangi seperti <a href="">dalam dokumentasi</a> . <br><blockquote>  Hanya fakta yang berguna untuk dikerjakan.  Gratis, ini juga merupakan versi pelatihan dari Caché DBMS, yang akan memungkinkan Anda untuk melakukan semua yang tersedia dalam versi yang berfungsi penuh, tetapi hanya memungkinkan dua koneksi aktif.  Oleh karena itu, pada saat yang sama, tidak mungkin untuk menjaga koneksi dari IDE dan mencoba menjalankan kode lain untuk berinteraksi dengan server.  Solusi paling sederhana yang ditemukan adalah menutup IDE ketika kode Python sedang berjalan. </blockquote><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   Caché    Python3 import intersys.pythonbind3 #    conn = intersys.pythonbind3.connection() conn.connect_now("localhost[1972]:USER","_SYSTEM","SYS", None) #    print ("conn = %d " % conn.handle) #     database = intersys.pythonbind3.database(conn)</span></span></code> </pre> <br>  Dan sekarang kita akan membuat database objek acara IT dan pesertanya.  Sangat sangat sederhana.  Yang pertama adalah membuat kelas untuk mendaftar dan menyimpan informasi tentang peserta acara.  Untuk kesederhanaan ke kelas, hanya nama anggota. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#         class Attendee: #        def __init__ (self): self.att = database.create_new("FW.Attendee", None) #             id def new (self, name): self.att.set("name", name) self.att.run_obj_method("%Save",[]) #    id     def use (self, id): self.att = database.openid("FW.Attendee",str(id),-1,-1) #       def clean (self): id = self.att.run_obj_method("%Id",[]) self.att.run_obj_method("%DeleteId", [id])</span></span></code> </pre><br>  Seperti yang Anda lihat, kami menggunakan fungsi pembungkus yang sudah jadi untuk metode mengakses bidang objek di Caché: set dan dalam parameter kami memberikan nama properti dalam tanda kutip dan openid dengan nama paket dan kelas.  Tentang fungsi get yang serupa, ada contoh di bawah ini.  Untuk mengakses metode lain, termasuk yang diwarisi oleh kelas dari leluhur mereka, gunakan fungsi run_obj_method () dengan nama metode dan parameter panggilan, jika perlu. <br><br>  Sihir paling penting di baris: self.att.run_obj_method ("% Simpan", []) <br>  Ini adalah bagaimana kami memiliki kemampuan untuk menyimpan objek dengan referensi langsung dan tanpa perlu menggunakan perpustakaan dan kerangka kerja tambahan, seperti ORM di mana-mana dan tidak sedap dipandang. <br><br>  Selain itu, mengingat sifat berorientasi objek dari ObjectScript, bersama dengan metode kelasnya (dalam contoh kami, kami tidak melakukannya), kami mendapatkan bonus dari akses Python ke seluruh rangkaian metode yang diwarisi dari kelas Persistent dan leluhurnya.  <a href="">Berikut adalah daftar lengkapnya</a> , jika itu. <br><br>  Buat anggota pertama: <br><br><pre> <code class="python hljs">att = Attendee() att.new(<span class="hljs-string"><span class="hljs-string">""</span></span>)</code> </pre><br>  Setelah menjalankan kode ini, global akan muncul dalam database dengan nama FW.AttendeeD dan konten objek yang baru saja disimpan seperti pada tangkapan layar: <br><br><img src="https://habrastorage.org/webt/pg/rz/ck/pgrzckyjglh-k4knyfjbchwl_6y.png"><br><br>  Setelah menyimpan, objek ini memiliki id sendiri (dengan nomor 1).  Karena itu, Anda dapat memuatnya ke program kami menggunakan id ini: <br><br><pre> <code class="python hljs">att = Attendee() att.use(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (att.att.get(<span class="hljs-string"><span class="hljs-string">"name"</span></span>))</code> </pre><br>  Dan sekarang, sekali lagi mengetahui id, jika perlu, Anda dapat menghapus objek dari database peserta: <br><br><pre> <code class="python hljs">att = Attendee() att.use(<span class="hljs-number"><span class="hljs-number">1</span></span>) att.clean()</code> </pre><br>  Periksa, setelah menjalankan contoh ini, catatan tentang objek harus menghilang di global.  Meskipun data yang diunduh masih tetap "dalam memori" objek Anda sampai program berakhir. <br><br>  Ayo ambil langkah selanjutnya.  Buat catatan acara aktual. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#        class Event: #        def __init__ (self): self.event = database.create_new("FW.Event", None) #            id def new (self, title, desc, date): self.event.set("title", title) self.event.set("description", desc) self.event.set("date", date) self.event.run_obj_method("%Save",[]) #    id    def use (self, id): self.event = database.openid("FW.Event",str(id),-1,-1) #       def addAttendee (self, att): eventAtt = self.event.get("visitors") eventAtt.run_obj_method("Insert", [att]) self.event.set("visitors", eventAtt) self.event.run_obj_method("%Save",[]) #      def clean (self): id = self.event.run_obj_method("%Id",[]) self.event.run_obj_method("%DeleteId", [id])</span></span></code> </pre><br>  Struktur kelas hampir sama seperti di atas untuk anggota kelas.  Yang paling penting, metode telah muncul untuk menambahkan peserta ke daftar peserta untuk acara ini addAttendee (att). <br><br>  Kami mencoba membuat objek-record tentang acara baru dan menyimpannya di database: <br><br><pre> <code class="python hljs">haJS = Event() haJS.new(<span class="hljs-string"><span class="hljs-string">"haJS"</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"2019-01-19"</span></span>)</code> </pre><br>  Seharusnya menghasilkan sesuatu seperti ini (perhatikan bahwa tanggal secara otomatis dikonversi ke format ObjectScript dan, ketika dimuat kembali ke objek Python, itu akan kembali ke format aslinya): <br><br><img src="https://habrastorage.org/webt/yk/vt/xh/ykvtxherbupxqtus54bsoz19exy.png"><br><br>  Tetap menambahkan peserta ke acara: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     haJS = Event() haJS.use(1) #    att = Attendee() att.new("") #      haJS.addAttendee(att.att)</span></span></code> </pre><br>  Jadi, contoh-contoh ini menunjukkan bahwa tidak perlu berpikir secara bersamaan tentang model data Anda dan skema penyimpanan tabularnya.  Anda dapat menggunakan alat yang lebih jelas untuk tugas Anda. <br><br>  Petunjuk terperinci untuk menghubungkan dan menggunakan Caché dengan Python dan bahasa lain selalu <a href="">tersedia untuk Anda dalam dokumentasi</a> dan di portal komunitas pengembang InterSystems - ini tidak kurang dari 5.000 anggota <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">community.intersystems.com</a> <br><blockquote>  Bantuan: InterSystems Caché multimodel DBMS tetap menjadi pemimpin dunia permanen dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">database objek</a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/dg/zf/p_/dgzfp_-rxolw5x9zlt95sqip64q.png"></a> <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id435612/">https://habr.com/ru/post/id435612/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id435602/index.html">Persiapan Ujian Azure</a></li>
<li><a href="../id435604/index.html">BlaBlaCar menjadi apa yang tidak dimaksudkan untuk itu</a></li>
<li><a href="../id435606/index.html">Bagaimana cara menulis unit test untuk para aktor? Pendekatan SObjectizer</a></li>
<li><a href="../id435608/index.html">Layar DIY</a></li>
<li><a href="../id435610/index.html">Telur paskah untuk ZX Spectrum - di album musik dan film</a></li>
<li><a href="../id435614/index.html">Rust News # 4 (Desember 2018)</a></li>
<li><a href="../id435616/index.html">Bagaimana Peer Zoning menyederhanakan kehidupan kami dan membantu menyeimbangkan muatan EMC VPLEX</a></li>
<li><a href="../id435618/index.html">Pengalaman Persiapan Pekerjaan Google saya</a></li>
<li><a href="../id435620/index.html">Ide-ide futurolog yang menjadi kenyataan</a></li>
<li><a href="../id435624/index.html">Pilihan laporan menarik dari Konferensi 35C3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>