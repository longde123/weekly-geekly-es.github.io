<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¿â€ğŸ­ ğŸ¤°ğŸ¼ ğŸ• Organisation sicherer Tests in der Produktion. Teil 1 ğŸ¤¦ğŸ¾ ğŸ—» ğŸ˜½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel beschreibt verschiedene Arten von Tests in der Produktion und die Bedingungen, unter denen jede von ihnen am nÃ¼tzlichsten ist, und besc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Organisation sicherer Tests in der Produktion. Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/418081/"><img src="https://habrastorage.org/webt/0q/az/yt/0qazyteu8a-cel_dnpcbmyckzsk.jpeg"><br><br>  Dieser Artikel beschreibt verschiedene Arten von Tests in der Produktion und die Bedingungen, unter denen jede von ihnen am nÃ¼tzlichsten ist, und beschreibt auch, wie sichere Tests verschiedener Dienstleistungen in der Produktion organisiert werden. <a name="habracut"></a><br><br>  Es ist anzumerken, dass der Inhalt dieses Artikels nur fÃ¼r die <b>Dienste gilt</b> , deren Bereitstellung von den Entwicklern gesteuert wird.  DarÃ¼ber hinaus sollten Sie sofort warnen, dass die Verwendung einer der hier beschriebenen Testarten keine leichte Aufgabe ist, die hÃ¤ufig schwerwiegende Ã„nderungen am Design, der Entwicklung und dem Testen von Systemen erfordert.  Und trotz des Titels des Artikels denke ich nicht, dass eine der Arten von Tests in der Produktion absolut zuverlÃ¤ssig ist.  Es gibt nur eine Meinung, dass solche Tests das Risiko in Zukunft erheblich reduzieren kÃ¶nnen und die Investitionskosten gerechtfertigt sind. <br><br>  <i><b>(Hinweis: Da der Originalartikel Longrid ist, ist er der Einfachheit halber in zwei Teile unterteilt.)</b></i> <br><br><h2>  Warum sind Tests in der Produktion erforderlich, wenn sie in der Inszenierung durchgefÃ¼hrt werden kÃ¶nnen? </h2><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="974530841190608897"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Die Bedeutung des Staging-Clusters (oder der Staging-Umgebung) durch verschiedene Personen wird unterschiedlich wahrgenommen.  FÃ¼r viele Unternehmen ist die Bereitstellung und das Testen eines Produkts in Staging ein wesentlicher Schritt vor seiner endgÃ¼ltigen VerÃ¶ffentlichung. <br><br>  Viele bekannte Organisationen betrachten die Bereitstellung als Miniaturkopie der Arbeitsumgebung.  In solchen FÃ¤llen muss die maximale Synchronisation sichergestellt werden.  In diesem Fall ist es normalerweise erforderlich, den Betrieb verschiedener Instanzen von Stateful-Systemen wie Datenbanken sicherzustellen und Daten aus der Produktionsumgebung regelmÃ¤ÃŸig mit Staging zu synchronisieren.  Die Ausnahme bilden nur vertrauliche Informationen, mit denen Sie die IdentitÃ¤t des Benutzers feststellen kÃ¶nnen (dies ist erforderlich, um die Anforderungen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GDPR</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PCI</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HIPAA</a> und anderen Vorschriften zu erfÃ¼llen). <br><br>  Das Problem bei diesem Ansatz (meiner Erfahrung nach) besteht darin, dass der Unterschied nicht nur in der Verwendung einer separaten Instanz der Datenbank besteht, die die tatsÃ¤chlichen Produktionsumgebungsdaten enthÃ¤lt.  Oft erstreckt sich der Unterschied auf folgende Aspekte: <br><br><ul><li>  Die GrÃ¶ÃŸe des Staging-Clusters (wenn Sie es als "Cluster" bezeichnen kÃ¶nnen - manchmal ist es nur ein Server, der als Cluster getarnt ist); </li><li>  Die Tatsache, dass beim Staging normalerweise ein viel kleinerer Cluster verwendet wird, bedeutet auch, dass die Konfigurationseinstellungen fÃ¼r fast <i>jeden</i> Dienst variieren.  Dies gilt fÃ¼r Konfigurationen von Load Balancern, Datenbanken und Warteschlangen, z. B. die Anzahl der offenen Dateideskriptoren, die Anzahl der offenen Datenbankverbindungen, die GrÃ¶ÃŸe des Thread-Pools usw. Wenn die Konfiguration in einer Datenbank oder einem SchlÃ¼sselwert-Datenspeicher gespeichert ist (z. Zookeeper oder Consul) mÃ¼ssen diese Hilfssysteme auch in der Staging-Umgebung vorhanden sein. </li><li>  Die Anzahl der vom zustandslosen Dienst verarbeiteten Online-Verbindungen oder die Methode zur Wiederverwendung von TCP-Verbindungen durch einen Proxyserver (sofern dieses Verfahren Ã¼berhaupt ausgefÃ¼hrt wird). </li><li>  Fehlende Ãœberwachung bei der Inszenierung.  Aber selbst wenn eine Ãœberwachung durchgefÃ¼hrt wird, kÃ¶nnen sich einige Signale als vÃ¶llig ungenau herausstellen, da eine andere Umgebung als die Arbeitsumgebung Ã¼berwacht wird.  Selbst wenn Sie beispielsweise die Latenz oder Antwortzeit von MySQL-Abfragen Ã¼berwachen, ist es schwierig zu bestimmen, ob der neue Code eine Abfrage enthÃ¤lt, die einen vollstÃ¤ndigen Tabellenscan in MySQL initiieren kann, da es <i>viel</i> schneller (und manchmal sogar vorzuziehen) ist, einen vollstÃ¤ndigen Scan der im Test verwendeten kleinen Tabelle durchzufÃ¼hren Eine Datenbank anstelle einer Produktionsdatenbank, in der eine Abfrage ein vÃ¶llig anderes Leistungsprofil haben kann. </li></ul><br>  Obwohl anzunehmen ist, dass alle oben genannten Unterschiede keine ernsthaften Argumente gegen die Verwendung der Inszenierung als solche sind, im Gegensatz zu Antimustern, die vermieden werden sollten.  Gleichzeitig erfordert der Wunsch, alles richtig zu machen, hÃ¤ufig die enormen Arbeitskosten der Ingenieure, um ein einheitliches Umfeld zu gewÃ¤hrleisten.  Die Produktion Ã¤ndert sich stÃ¤ndig und wird von verschiedenen Faktoren beeinflusst. Der Versuch, dieses Match zu erreichen, ist also wie ein Nirgendwo. <br><br>  Selbst wenn die Bedingungen fÃ¼r die Bereitstellung der Arbeitsumgebung so Ã¤hnlich wie mÃ¶glich sind, gibt es andere Arten von Tests, die auf der Grundlage realer Produktionsinformationen besser zu verwenden sind.  Ein gutes Beispiel wÃ¤re ein TrÃ¤nktest, bei dem die ZuverlÃ¤ssigkeit und StabilitÃ¤t eines Dienstes Ã¼ber einen lÃ¤ngeren Zeitraum bei realen Multitasking- und Lastniveaus getestet wird.  Es wird verwendet, um Speicherlecks zu erkennen, die Dauer von Pausen im GC, die Prozessorauslastung und andere Indikatoren fÃ¼r einen bestimmten Zeitraum zu bestimmen. <br><br>  Keiner der oben genannten Punkte deutet darauf hin, dass Staging <i>vÃ¶llig</i> nutzlos ist (dies wird deutlich, wenn Sie den Abschnitt Ã¼ber die Schattenverdoppelung von Daten beim Testen von Diensten lesen).  Dies weist nur darauf hin, dass sie hÃ¤ufig stÃ¤rker als erforderlich auf die Bereitstellung angewiesen sind, und in vielen Organisationen bleibt dies die <i>einzige</i> Art von Tests, die vor der vollstÃ¤ndigen VerÃ¶ffentlichung des Produkts durchgefÃ¼hrt werden. <br><br><h2>  Die Kunst des Testens in der Produktion </h2><br>  Historisch gesehen ist das Konzept des â€Testens in der Produktionâ€œ mit bestimmten Stereotypen und negativen Konnotationen verbunden (â€Guerilla-Programmierungâ€œ, Fehlen oder Fehlen von Unit- und Integrationstests, NachlÃ¤ssigkeit oder Unaufmerksamkeit fÃ¼r die Wahrnehmung des Produkts durch den Endbenutzer). <br><br>  Tests in der Produktion verdienen sicherlich einen solchen Ruf, wenn sie nachlÃ¤ssig und schlecht durchgefÃ¼hrt werden.  Es ersetzt in keiner Weise <i>das</i> Testen in der Vorproduktionsphase und ist unter keinen UmstÃ¤nden eine <i>einfache Aufgabe</i> .  DarÃ¼ber hinaus argumentiere ich, dass <i>erfolgreiche</i> und <i>sichere</i> Tests in der Produktion einen erheblichen Automatisierungsgrad, ein gutes VerstÃ¤ndnis der etablierten Praktiken und den Entwurf von Systemen erfordern, die sich zunÃ¤chst an dieser Art von Tests orientieren. <br><br>  Um einen umfassenden und sicheren Prozess zum effektiven Testen von Dienstleistungen in der Produktion zu organisieren, ist es wichtig, ihn nicht als verallgemeinernden Begriff zu betrachten, der eine Reihe verschiedener Werkzeuge und Techniken bezeichnet.  Leider wurde dieser Fehler auch von mir gemacht - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in meinem vorherigen Artikel wurde</a> keine ganz wissenschaftliche Klassifizierung von Testmethoden vorgestellt, und im Abschnitt "Testen in der Produktion" wurden verschiedene Methoden und Werkzeuge gruppiert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2h/bo/od/2hboodum_vrej99d2xm911ifecw.png"></div><br>  <i>Aus dem Hinweis Testen von Microservices auf vernÃ¼nftige Weise ("Ein intelligenter Ansatz zum Testen von Microservices")</i> <br><br>  Seit der VerÃ¶ffentlichung des Hinweises Ende Dezember 2017 habe ich seinen Inhalt und allgemein das Thema des Testens in der Produktion mit mehreren Personen diskutiert. <br><br>  Im Verlauf dieser Diskussionen und auch nach einer Reihe getrennter GesprÃ¤che wurde mir klar, dass das Thema Testen in der Produktion nicht auf mehrere oben aufgefÃ¼hrte Punkte reduziert werden kann. <br><br>  Das Konzept des â€Testens in der Produktionâ€œ umfasst eine ganze Reihe von Techniken, die <i>in drei verschiedenen Phasen</i> angewendet werden.  Welche - lass uns verstehen. <br><br><img src="https://habrastorage.org/webt/6a/wc/5-/6awc5-yiregc_-2pzrk4i7gjxx0.jpeg"><br><br><h2>  Drei Produktionsstufen </h2><br>  In der Regel werden Diskussionen Ã¼ber die Produktion nur im Zusammenhang mit der Bereitstellung von Code in der Produktion, Ãœberwachung oder in Notsituationen gefÃ¼hrt, in denen ein Fehler aufgetreten ist. <br><br>  Ich selbst habe bisher Begriffe wie "Bereitstellung", "Freigabe", "Lieferung" usw. als Synonyme verwendet, ohne Ã¼ber deren Bedeutung nachzudenken.  Vor einigen Monaten wurden alle Versuche, zwischen diesen Begriffen zu unterscheiden, von mir als etwas Unbedeutendes abgelehnt. <br>  Nachdem ich darÃ¼ber nachgedacht hatte, kam ich auf die Idee, dass <i>es</i> wirklich notwendig ist, zwischen den verschiedenen Produktionsstufen zu unterscheiden. <br><br><h3>  Phase 1. Bereitstellung </h3><br>  Wenn das Testen (auch in der Produktion) eine ÃœberprÃ¼fung der Erreichung der <i>bestmÃ¶glichen Indikatoren ist</i> , wird die Genauigkeit des Testens (und tatsÃ¤chlich aller ÃœberprÃ¼fungen) nur unter der Bedingung sichergestellt, dass die Methode zur DurchfÃ¼hrung von Tests so nah wie mÃ¶glich an der Art und Weise ist, wie der Service tatsÃ¤chlich in der Produktion verwendet wird. <br><br>  Mit anderen Worten, Tests mÃ¼ssen in einer Umgebung ausgefÃ¼hrt werden, <i>die eine Arbeitsumgebung am besten simuliert</i> . <br><br>  Und die <i>beste Nachahmung des</i> Arbeitsumfelds ist ... das Arbeitsumfeld selbst.  Um die maximal mÃ¶gliche Anzahl von Tests in einer Produktionsumgebung durchzufÃ¼hren, muss das erfolglose Ergebnis eines dieser Tests den Endbenutzer nicht beeintrÃ¤chtigen. <br><br>  Dies ist wiederum nur mÃ¶glich, <b>wenn Benutzer beim Bereitstellen des Dienstes in einer Produktionsumgebung keinen direkten Zugriff auf diesen Dienst erhalten</b> . <br><br>  In diesem Artikel habe ich mich fÃ¼r die Terminologie aus dem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Deploy! = Release</a> von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Turbine Labs entschieden</a> .  Es definiert den Begriff "Bereitstellung" wie folgt: <br><br>  â€Die Bereitstellung ist die Installation einer neuen Version des Serviceprogrammcodes in der Produktionsinfrastruktur durch eine Arbeitsgruppe.  Wenn wir sagen, dass eine neue Version der Software <b>bereitgestellt wurde</b> , bedeutet dies, dass sie irgendwo im Rahmen der funktionierenden Infrastruktur ausgefÃ¼hrt wird.  Dies kann eine neue EC2-Instanz in AWS oder ein Docker-Container sein, der im Herd eines Kubernetes-Clusters ausgefÃ¼hrt wird.  Der Dienst wurde erfolgreich gestartet, hat eine IntegritÃ¤tsprÃ¼fung bestanden und ist bereit (Sie hoffen!), Produktionsumgebungsdaten zu verarbeiten, empfÃ¤ngt jedoch mÃ¶glicherweise keine Daten.  Dies ist ein wichtiger Punkt, ich betone ihn noch einmal: <b>FÃ¼r die Bereitstellung ist es nicht erforderlich, dass Benutzer Zugriff auf die neue Version Ihres Dienstes erhalten</b> .  In Anbetracht dieser Definition kann die Bereitstellung als Prozess mit nahezu null Risiko bezeichnet werden. â€œ <br><br>  Die Worte â€Null-Risiko-Prozessâ€œ sind einfach ein Balsam fÃ¼r die Seele vieler Menschen, die unter erfolglosen EinsÃ¤tzen gelitten haben.  Die MÃ¶glichkeit, Software <i>in einer realen Umgebung</i> zu installieren, ohne dass Benutzer dies zulassen, bietet beim Testen eine Reihe von Vorteilen. <br>  Erstens wird die Notwendigkeit, separate Umgebungen fÃ¼r Entwicklung, Test und Staging zu unterhalten, die zwangslÃ¤ufig mit der Produktion synchronisiert werden mÃ¼ssen, minimiert (und kann sogar vollstÃ¤ndig verschwinden). <br><br>  DarÃ¼ber hinaus ist es in der Phase des Entwurfs von Diensten erforderlich, diese voneinander zu isolieren, damit das VersÃ¤umnis, eine bestimmte Instanz des Dienstes in der Produktion zu testen, <i>nicht dazu</i> fÃ¼hrt, dass Benutzer den Ausfall anderer Dienste kaskadieren oder beeintrÃ¤chtigen.  Eine LÃ¶sung hierfÃ¼r kann der Entwurf eines Datenmodells und eines Datenbankschemas sein, in denen nicht idempotente Abfragen (hauptsÃ¤chlich <i>SchreibvorgÃ¤nge</i> ) Folgendes kÃ¶nnen: <br><br><ul><li>  Wird in Bezug auf die Produktionsumgebungsdatenbank wÃ¤hrend eines Teststarts des Dienstes in der Produktion durchgefÃ¼hrt (ich bevorzuge diesen Ansatz); </li><li>  Auf Anwendungsebene sicher abgelehnt werden, bis sie die Schreib- oder Speicherebene erreicht haben; </li><li>  Auf Datensatz- oder Speicherebene zugewiesen oder isoliert werden (z. B. durch Speichern zusÃ¤tzlicher Metadaten). </li></ul><br><h3>  Stufe 2. Freigabe </h3><br>  Hinweis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Deploy! = Release</a> definiert den Begriff Release wie folgt: <br><br>  â€Wenn wir sagen, dass die <b>VerÃ¶ffentlichung</b> der Serviceversion stattgefunden hat, bedeutet dies, dass die Datenverarbeitung in der Produktionsumgebung erfolgt.  Mit anderen Worten, eine <b>Version</b> ist ein Prozess, der Produktionsumgebungsdaten an eine neue Softwareversion weiterleitet.  In Anbetracht dieser Definition beziehen sich alle Risiken, die mit dem Senden neuer DatenstrÃ¶me verbunden sind (Unterbrechungen, Unzufriedenheit der Kunden, giftige Notizen im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Register</a> ), auf die <b>VerÃ¶ffentlichung</b> neuer Software und nicht auf deren Bereitstellung (in einigen Unternehmen wird diese Phase auch als <b>VerÃ¶ffentlichung bezeichnet)</b> . In diesem Artikel verwenden wir den Begriff " <b>Release</b> ". " <br><br>  In Googles Buch Ã¼ber SRE wird der Begriff "Release" im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kapitel zum Organisieren eines Software-Releases verwendet, um es zu beschreiben</a> . <br><br>  â€Ein <b>Problem ist ein logisches Element der Arbeit, das aus einer oder mehreren separaten Aufgaben besteht.</b>  <b>Unser Ziel ist es, den Bereitstellungsprozess mit dem Risikoprofil dieses Dienstes zu koordinieren</b> . <br><br>  In Entwicklungs- oder Vorproduktionsumgebungen kÃ¶nnen wir jede Stunde erstellen und Releases automatisch verteilen, nachdem wir alle Tests bestanden haben.  Bei groÃŸen benutzerorientierten Diensten kÃ¶nnen wir die Version mit einem Cluster starten und dann die Skalierung erhÃ¶hen, bis alle Cluster aktualisiert sind.  <b>FÃ¼r wichtige Infrastrukturelemente kÃ¶nnen wir den Implementierungszeitraum auf mehrere Tage verlÃ¤ngern und ihn wiederum in verschiedenen geografischen Regionen ausfÃ¼hren. â€œ</b> <br><br>  In dieser Terminologie bedeuten die WÃ¶rter "Release" und "Release", was sich das allgemeine Vokabular auf "Deployment" bezieht, und die Begriffe, die hÃ¤ufig zur Beschreibung verschiedener <i>Deployment-</i> Strategien verwendet werden (z. B. blau-grÃ¼ne Deployment oder kanarische Deployment), beziehen sich auf die <i>Freigabe eines</i> neuen Software. <br><br>  DarÃ¼ber hinaus kann eine erfolglose <i>Freigabe von</i> Anwendungen zu teilweisen oder erheblichen Arbeitsunterbrechungen fÃ¼hren.  Zu diesem Zeitpunkt wird auch ein <i>Rollback</i> oder <i>Hotfix</i> durchgefÃ¼hrt, wenn sich herausstellt, dass die <i>verÃ¶ffentlichte</i> neue Version des Dienstes instabil ist. <br><br>  Der <i>Freigabeprozess</i> funktioniert am besten, wenn er automatisiert ist und <i>schrittweise ausgefÃ¼hrt wird</i> .  Ebenso ist ein <i>Rollback</i> oder <i>Hotfix eines</i> Dienstes nÃ¼tzlicher, wenn die Fehlerrate und die AnforderungshÃ¤ufigkeit automatisch mit der Basislinie korreliert werden. <br><br><h3>  Stufe 3. Nach der VerÃ¶ffentlichung </h3><br>  Wenn die VerÃ¶ffentlichung <i>reibungslos verlief</i> und die neue Version des Dienstes die Daten der Produktionsumgebung ohne offensichtliche Probleme verarbeitet, kÃ¶nnen wir dies als erfolgreich betrachten.  Auf eine erfolgreiche VerÃ¶ffentlichung folgt eine Phase, die als "nach der VerÃ¶ffentlichung" bezeichnet werden kann. <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="961811607759159296"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Jedes ausreichend komplexe System befindet sich <i>immer</i> in einem Zustand allmÃ¤hlichen Leistungsverlusts.  Dies bedeutet nicht, dass ein <i>Rollback</i> oder <i>Hotfix erforderlich ist</i> .  Stattdessen ist es notwendig, eine solche Verschlechterung (fÃ¼r verschiedene betriebliche und betriebliche Zwecke) zu Ã¼berwachen und gegebenenfalls zu debuggen.  Aus diesem Grund Ã¤hnelt das Testen nach der VerÃ¶ffentlichung nicht mehr den Routinen, sondern dem <i>Debuggen</i> oder Sammeln von Analysedaten. <br><br>  Generell bin ich der Meinung, dass jede Komponente des Systems unter BerÃ¼cksichtigung der Tatsache erstellt werden sollte, dass kein einziges groÃŸes System zu 100% einwandfrei funktioniert und dass Fehlfunktionen in den Phasen Design, Entwicklung, Test, Bereitstellung und Ãœberwachung der Software erkannt und berÃ¼cksichtigt werden sollten Bereitstellung. <br><br><hr><br>  Nachdem wir die drei Produktionsstufen identifiziert haben, schauen wir uns die verschiedenen Testmechanismen an, die fÃ¼r jede von ihnen verfÃ¼gbar sind.  Nicht jeder hat die MÃ¶glichkeit, an neuen Projekten zu arbeiten oder Code von Grund auf neu zu schreiben.  In diesem Artikel habe ich versucht, die Methoden zu identifizieren, die bei der Entwicklung neuer Projekte am besten funktionieren, und darÃ¼ber zu sprechen, was wir sonst noch tun kÃ¶nnen, um die vorgeschlagenen Methoden zu nutzen, ohne wesentliche Ã„nderungen an Arbeitsprojekten vorzunehmen. <br><br><h2>  Bereitstellungstests </h2><br>  Wir haben die Bereitstellungs- und Freigabestufen voneinander getrennt und betrachten nun einige Arten von Tests, die nach der Bereitstellung des Codes in der Produktionsumgebung angewendet werden kÃ¶nnen. <br><br><h3>  Integrationstests </h3><br>  In der Regel werden Integrationstests von einem kontinuierlichen Integrationsserver in einer isolierten Testumgebung fÃ¼r jeden Git-Zweig durchgefÃ¼hrt.  Eine Kopie der <i>gesamten</i> Diensttopologie (einschlieÃŸlich Datenbanken, Warteschlangen, Proxys usw.) wird fÃ¼r Testsuiten <i>aller</i> Dienste bereitgestellt, die zusammenarbeiten. <br><br>  Ich glaube, dass dies aus mehreren GrÃ¼nden nicht besonders effektiv ist.  Erstens kann die Testumgebung wie die Staging-Umgebung nicht so bereitgestellt werden, dass sie <i>mit der</i> tatsÃ¤chlichen Produktionsumgebung <i>identisch</i> ist, <i>selbst wenn die</i> Tests in demselben Docker-Container ausgefÃ¼hrt werden, der in der Produktion verwendet wird.  Dies gilt insbesondere dann, wenn in einer Testumgebung nur die Tests selbst ausgefÃ¼hrt werden. <br><br>  UnabhÃ¤ngig davon, ob der Test als Docker-Container oder als POSIX-Prozess ausgefÃ¼hrt wird, stellt er hÃ¶chstwahrscheinlich <i>eine</i> oder mehrere Verbindungen zu einem Ã¼berlegenen Dienst, einer Datenbank oder einem Cache her. Dies ist selten, wenn sich der Dienst in einer Produktionsumgebung befindet, in der er gleichzeitig ausgefÃ¼hrt werden kann mehrere gleichzeitige Verbindungen verarbeiten und hÃ¤ufig inaktive TCP-Verbindungen wiederverwenden (dies wird als Wiederverwendung von HTTP-Verbindungen bezeichnet). <br><br>  Das Problem wird auch durch die Tatsache verursacht, dass die meisten Tests bei jedem Start eine neue Datenbanktabelle oder einen neuen Cache-SchlÃ¼sselbereich auf <i>demselben Knoten</i> erstellen, auf <i>dem</i> dieser Test durchgefÃ¼hrt wird (auf diese Weise werden die Tests von Netzwerkfehlern isoliert).  Diese Art des Testens kann bestenfalls zeigen, dass das System mit einer ganz bestimmten Anforderung korrekt funktioniert.  Es ist selten effektiv bei der Simulation schwerwiegender, gut verteilter Arten von Fehlern, ganz zu schweigen von den verschiedenen Arten von Teilfehlern.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=http://">Es gibt umfassende</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Studien</a> , die bestÃ¤tigen, dass verteilte Systeme hÃ¤ufig ein <i>unvorhersehbares Verhalten aufweisen</i> , das durch eine Analyse, die anders als fÃ¼r das gesamte System durchgefÃ¼hrt wird, nicht vorhergesehen werden kann. <br><br>  Dies bedeutet jedoch nicht, dass Integrationstests <i>grundsÃ¤tzlich</i> nutzlos sind.  Wir kÃ¶nnen nur sagen, dass die DurchfÃ¼hrung von Integrationstests in einer <i>kÃ¼nstlichen, vollstÃ¤ndig isolierten Umgebung</i> in der Regel keinen Sinn ergibt.  Integrationstests sollten weiterhin durchgefÃ¼hrt werden, um sicherzustellen, dass die neue Version des Dienstes: <br><br><ul><li>  BeeintrÃ¤chtigt nicht die Interaktion mit vor- oder nachgelagerten Diensten; </li><li>  BeeintrÃ¤chtigt nicht die Ziele hÃ¶herer oder niedrigerer Dienstleistungen. </li></ul><br>  Die erste kann bis zu einem gewissen Grad durch Vertragstests bereitgestellt werden.  <i>Aufgrund</i> der Tatsache, dass die <i>Schnittstellen</i> zwischen den Diensten ordnungsgemÃ¤ÃŸ funktionieren, ist das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testen von VertrÃ¤gen</a> eine effektive Methode zum Entwickeln und Testen einzelner Dienste in <i>der Vorproduktionsphase</i> , fÃ¼r die nicht die gesamte Diensttopologie bereitgestellt werden muss. <br><br>  Clientorientierte Vertragstestplattformen wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pact</a> unterstÃ¼tzen derzeit nur die InteroperabilitÃ¤t zwischen Diensten Ã¼ber RESTful JSON RPC, obwohl wahrscheinlich daran <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gearbeitet wird, die asynchrone Interaktion Ã¼ber Web-Sockets, Nicht-Server-Anwendungen und Nachrichtenwarteschlangen zu unterstÃ¼tzen</a> .  Die UnterstÃ¼tzung fÃ¼r die gRPC- und GraphQL-Protokolle wird voraussichtlich in Zukunft hinzugefÃ¼gt, ist jedoch noch nicht verfÃ¼gbar. <br><br>  Vor der <i>VerÃ¶ffentlichung einer</i> neuen Version muss jedoch mÃ¶glicherweise nicht nur die ordnungsgemÃ¤ÃŸe Funktion der <i>Schnittstellen</i> Ã¼berprÃ¼ft <i>werden</i> . , , ,   RPC-            .    ,       , ,       . <br><br>  ,     <i></i> ,   â€” ,       <i>,  </i>    (  ,    ). <br>      :  <i></i>     ? <br><br>     .    â€“ ,       :    -   - ( C)   MySQL ( D)       memcache ( B). <br><br>   ,      (    ),  stateful-  stateless-        . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xl/nc/4e/xlnc4eni3elyx3huaw3trxs5uyc.jpeg"></div><br>  <i></i>  <i></i> ,     <i></i>      . <br><br>  service discovery        <i></i> ( ),      <i></i>  <i></i>        .         <i></i>   . <br><br> ,   <i></i>    C  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ze/8y/yp/ze8yypuxevqszd_krd3cls4hrqc.jpeg"></div><br>  ,  <i></i>   ,        ,       .      ,       ,       .  ,     <i></i> ,        . <br><br>   Google     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Just Say No to More End-to-End Tests</a> (Â«      Â»),      : <br><br> Â« <i>       ( )      .       ,    ?           ,      </i> . <b>     ,     ,      ,     Â».</b> <br><br>    ,          :       <i></i>       .               ,       A        . <br><br>     ,     <i></i>   C     MySQL,     . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c4/bu/qc/c4buqc8zz2dt4e3pyr6svjnyguc.jpeg"></div><br>  <i> </i>       (   ,   ,         Â«Â» ,  <i></i> ).     <i></i>   MySQL   ,    ,      . <br><br>   â€”        -.      ,      .              -,          . <br><br>    ,   -     <i></i>     ,   /: <br><br><ul><li>       C     /   ; </li><li>         ,   Â«Â»   . </li></ul><br>       <i>  </i>    ,             (,   ). <br><br>           ,    ,   <i></i>  .      IP- ,   ,    ,    ,       , ,  ,    ,    . <br><br> ,   ,     ,    ,       .      .     Facebook,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kraken</a> ,  : <br><br> Â« <i>   â€”     ,         .   -      ,    .        ,        .</i> <b>           -     ,     ,     ,       Â».</b> <br><br>   ,      ,       ,     ,         ,  . <br><br>     -     .    service mesh             .        -.        -,  ,  ,    : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uk/kv/cj/ukkvcjxlzn3hdcpt-mxsep3pojm.jpeg"></div><br>  Wenn wir Service B testen, kann sein ausgehender Proxyserver so konfiguriert werden, dass jeder <code>X-ServiceB-Test</code> ein spezieller <code>X-ServiceB-Test</code> Header hinzugefÃ¼gt wird.  In diesem Fall kann der eingehende Proxyserver des Ã¼bergeordneten Dienstes C: <br><br><ul><li>  Erkennen Sie diesen Header und senden Sie eine Standardantwort an Service B; </li><li>  Teilen Sie Service C mit, dass die Anforderung ein <i>Test ist</i> . </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3s/mr/-n/3smr-n7k-_87j3jjpirb02hkaja.jpeg"></div><br>  <i>Integrationstests der Interaktion der bereitgestellten Version von Dienst B mit der freigegebenen Version von Dienst C, bei der SchreibvorgÃ¤nge niemals die Datenbank erreichen</i> <br><br>  <i>Wenn Sie</i> Integrationstests auf diese Weise durchfÃ¼hren, kÃ¶nnen Sie auch die Interaktion von Service B mit hÃ¶heren Services testen, <i>wenn diese normale Produktionsumgebungsdaten verarbeiten.</i> Dies ist wahrscheinlich eine genauere Nachahmung des Verhaltens von Service B bei der <i>Freigabe</i> in die Produktion. <br><br>  Es wÃ¤re auch schÃ¶n, wenn jeder Dienst in dieser Architektur echte API-Aufrufe im Test- oder Mock-Modus unterstÃ¼tzen wÃ¼rde, sodass Sie die AusfÃ¼hrung von DienstvertrÃ¤gen mit nachgeschalteten Diensten testen kÃ¶nnen, ohne die realen Daten zu Ã¤ndern.  Dies wÃ¤re gleichbedeutend mit Vertragstests, jedoch auf Netzwerkebene. <br><br><h3>  Duplizierung von Schattendaten (Testen des dunklen Datenstroms oder Spiegeln) </h3><br>  Die Duplizierung von Schatten (in dem Artikel im Google-Blog heiÃŸt sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dark Launch</a> , und der Begriff <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spiegelung</a> wird in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Istio verwendet</a> ) hat in vielen FÃ¤llen mehr Vorteile als Integrationstests. <br><br>  Die <a href="http://">Prinzipien der Chaos-Technik</a> besagen Folgendes: <br><br>  â€ <i>Systeme verhalten sich je nach Umgebung und DatenÃ¼bertragungsschema unterschiedlich.</i>  <i>Da sich der Nutzungsmodus jederzeit Ã¤ndern kann</i> , ist das <b>Abtasten realer Daten der einzig zuverlÃ¤ssige Weg, um den Anforderungspfad festzulegen. â€œ</b> <br><br>  Die Duplizierung von Schattendaten ist eine Methode, mit der der Datenstrom der Produktionsumgebung, der in einen bestimmten Dienst eingeht, erfasst und in einer neuen <i>bereitgestellten</i> Version des Dienstes reproduziert wird.  Dieser Vorgang kann entweder in Echtzeit ausgefÃ¼hrt werden, wenn der eingehende Datenstrom aufgeteilt und sowohl an die <i>freigegebene</i> als auch an die <i>bereitgestellte</i> Version des Dienstes gesendet wird, oder asynchron, wenn eine Kopie zuvor erfasster Daten im <i>bereitgestellten</i> Dienst wiedergegeben wird. <br><br>  Als ich bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">imgix arbeitete</a> (einem Startup mit 7 Ingenieuren, von denen nur vier Systemingenieure waren), wurden dunkle DatenstrÃ¶me aktiv verwendet, um Ã„nderungen in unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bildvisualisierungsinfrastruktur</a> zu testen.  Wir haben einen bestimmten Prozentsatz aller eingehenden Anforderungen registriert und an den Kafka-Cluster gesendet. Wir haben die HAProxy-Zugriffsprotokolle an die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heka-</a> Pipeline Ã¼bergeben, die wiederum den analysierten Anforderungsfluss an den Kafka-Cluster weitergeleitet hat.  Vor der <i>Release-</i> Phase <i>wurde eine</i> neue Version unserer Bildverarbeitungsanwendung in einem erfassten dunklen Datenstrom getestet. Auf diese Weise konnte Ã¼berprÃ¼ft werden, ob die Anforderungen korrekt verarbeitet wurden.  Unser Bildvisualisierungssystem war jedoch im GroÃŸen und Ganzen ein zustandsloser Dienst, der fÃ¼r diese Art von Tests besonders gut geeignet war. <br><br>  Einige Unternehmen ziehen es vor, nicht einen Teil des Datenstroms zu erfassen, sondern eine <i>vollstÃ¤ndige Kopie</i> dieses Datenstroms an die neue Version der Anwendung zu Ã¼bertragen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der McRouter</a> (memcached Proxy) von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Facebook</a> unterstÃ¼tzt diese Art der Schattenverdoppelung des Memcache-Datenstroms. <br><br>  â€ <i>Beim Testen einer neuen Installation fÃ¼r den Cache fanden wir es sehr praktisch, eine vollstÃ¤ndige Kopie des Datenstroms von Clients umleiten zu kÃ¶nnen.</i>  <i>McRouter unterstÃ¼tzt flexible Einstellungen fÃ¼r die Schattenverdopplung.</i>  <i>Es ist mÃ¶glich, eine Schattenkopie eines Pools verschiedener GrÃ¶ÃŸen durchzufÃ¼hren (durch erneutes Zwischenspeichern des SchlÃ¼sselraums), nur einen Teil des SchlÃ¼sselraums zu kopieren oder Parameter wÃ¤hrend des Betriebs dynamisch zu Ã¤ndern</i> . â€œ <br><br>  Der negative Aspekt der Schattenverdoppelung des gesamten Datenstroms fÃ¼r einen <i>bereitgestellten</i> Dienst in einer Produktionsumgebung besteht darin, dass bei AusfÃ¼hrung im Moment maximaler DatenÃ¼bertragungsintensitÃ¤t mÃ¶glicherweise doppelt so viel Strom benÃ¶tigt wird. <br>  Proxys wie Envoy unterstÃ¼tzen die Schatten-Duplizierung des Datenflusses zu einem anderen Cluster im Fire-and-Forget-Modus.  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> lautet: <br><br>  â€ <i>Ein Router kann den Datenfluss von einem Cluster zum anderen im Schatten duplizieren.</i>  <i>Derzeit ist der Fire-and-Forget-Modus implementiert, bei dem der Envoy-Proxyserver nicht auf eine Antwort vom Schattencluster wartet, bevor er eine Antwort vom Hauptcluster zurÃ¼ckgibt.</i>  <i>FÃ¼r den Schattencluster werden alle Ã¼blichen Statistiken gesammelt, was zu Testzwecken nÃ¼tzlich ist.</i>  <i>Bei der Schattenverdoppelung wird die Option <code>-shadow</code> zum Host- / Berechtigungsheader hinzugefÃ¼gt.</i>  <i>Dies ist nÃ¼tzlich fÃ¼r die Protokollierung.</i>  <i>Zum Beispiel verwandelt sich <code>cluster1-shadow</code> in <code>cluster1-shadow</code></i> . " <br><br>  Es ist jedoch hÃ¤ufig unpraktisch oder unmÃ¶glich, eine Replik eines mit der Produktion synchronisierten Clusters zum Testen zu erstellen (aus dem gleichen Grund, aus dem es problematisch ist, einen synchronisierten Staging-Cluster zu organisieren).  Wenn zum Testen eines neuen <i>bereitgestellten</i> Dienstes mit vielen AbhÃ¤ngigkeiten eine Schatten-Duplizierung verwendet wird, kann dies zu unvorhergesehenen Ã„nderungen des Status Ã¼bergeordneter Dienste in Bezug auf den getesteten Dienst fÃ¼hren.  Eine Schatten-Duplizierung des tÃ¤glichen Volumens von Benutzerregistrierungen in der <i>bereitgestellten</i> Version des Dienstes mit Aufzeichnung in der Produktionsdatenbank kann zu einer ErhÃ¶hung der Fehlerrate um bis zu 100% fÃ¼hren, da der Schattendatenstrom als wiederholte Registrierungsversuche wahrgenommen und abgelehnt wird. <br><br>  Meine persÃ¶nliche Erfahrung zeigt, dass die Duplizierung von Schatten am besten zum Testen nicht idempotenter Anforderungen oder zustandsloser Dienste mit serverseitigen Stubs geeignet ist.  In diesem Fall wird die Schattenverdoppelung von Daten hÃ¤ufiger zum Testen von Last, StabilitÃ¤t und Konfigurationen verwendet.  Gleichzeitig kÃ¶nnen Sie mithilfe von Integrationstests oder Staging testen, wie der Dienst mit einem statusbehafteten Server interagiert, wenn Sie mit nicht idempotenten Anforderungen arbeiten. <br><br><h3>  TAP-Vergleich </h3><br>  Die einzige ErwÃ¤hnung dieses Begriffs findet sich in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> aus dem Twitter-Blog, der sich mit der EinfÃ¼hrung von Diensten mit hoher ServicequalitÃ¤t befasst. <br><br>  <i>â€Um die Richtigkeit der neuen Implementierung des vorhandenen Systems zu Ã¼berprÃ¼fen, haben wir eine Methode namens <b>Tap-Vergleich verwendet</b> .</i>  <i>Unser Tap-Vergleichstool reproduziert die Probenproduktionsdaten im neuen System und vergleicht die empfangenen Antworten mit den Ergebnissen des alten.</i>  <i>Die erzielten Ergebnisse haben uns geholfen, Fehler im System zu finden und zu beheben, noch bevor Endbenutzer auf sie gestoÃŸen sind. â€œ</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein anderer</a> Twitter-Blog-Beitrag definiert Tap-Vergleiche wie folgt: <br><br>  <i>"Senden von Anforderungen an Service-Instanzen sowohl in der Produktion als auch in Staging-Umgebungen mit <b>ÃœberprÃ¼fung der Ergebnisse</b> und Bewertung der Leistungsmerkmale."</i> <br><br>  Der Unterschied zwischen Tap-Vergleich und Schatten-Duplizierung besteht darin, dass im ersten Fall die von der <i>freigegebenen</i> Version zurÃ¼ckgegebene Antwort mit der von der <i>bereitgestellten</i> Version zurÃ¼ckgegebenen Antwort verglichen wird und im zweiten Fall die Anforderung im Offline-Modus wie Fire-and-Forget auf die <i>bereitgestellte</i> Version dupliziert wird. <br><br>  Ein weiteres Werkzeug fÃ¼r die Arbeit in diesem Bereich ist die auf GitHub verfÃ¼gbare <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wissenschaftlerbibliothek</a> .  Dieses Tool wurde zum Testen von Ruby-Code entwickelt, dann aber in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehrere andere Sprachen</a> portiert.  Es ist fÃ¼r einige Arten von Tests nÃ¼tzlich, weist jedoch eine Reihe ungelÃ¶ster Probleme auf.  Folgendes hat ein GitHub-Entwickler in einer professionellen Slack-Community geschrieben: <br><br>  <i>â€Dieses Tool fÃ¼hrt einfach zwei Codezweige aus und vergleicht die Ergebnisse.</i>  <i>Sie sollten mit dem Code dieser Zweige vorsichtig sein.</i>  <i>Es muss sichergestellt werden, dass Datenbankabfragen nicht dupliziert werden, wenn dies zu Problemen fÃ¼hrt.</i>  <i>Ich denke, dass dies nicht nur fÃ¼r einen Wissenschaftler gilt, sondern auch fÃ¼r jede Situation, in der Sie zweimal etwas tun und dann die Ergebnisse vergleichen.</i>  <i>Das Wissenschaftler-Tool wurde erstellt, um zu Ã¼berprÃ¼fen, ob das neue Berechtigungssystem genauso funktioniert wie das alte. Zu bestimmten Zeiten wurde es verwendet, um die Daten zu vergleichen, die fÃ¼r praktisch jede Rails-Anforderung typisch sind.</i>  <i>Ich denke, dass der Prozess mehr Zeit in Anspruch nehmen wird, da die Verarbeitung nacheinander ausgefÃ¼hrt wird, aber dies ist ein Ruby-Problem, bei dem keine Threads verwendet werden.</i> <i><br><br></i>  <i>In den meisten mir bekannten FÃ¤llen wurde das Wissenschaftler-Tool verwendet, um mit Lese- und nicht mit Schreiboperationen zu arbeiten, um beispielsweise herauszufinden, ob neue, verbesserte Abfragen und Berechtigungsschemata dieselbe Antwort erhalten wie alte.</i>  <i>Beide Optionen werden in einer Produktionsumgebung (auf Replikaten) ausgefÃ¼hrt.</i>  <i>Wenn die getesteten Ressourcen Nebenwirkungen haben, mÃ¼ssen die Tests meiner Meinung nach auf Anwendungsebene durchgefÃ¼hrt werden. â€œ</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Diffy</a> ist ein von Scala geschriebenes Open Source-Tool, das 2015 von Twitter eingefÃ¼hrt wurde.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein Artikel</a> aus dem Twitter-Blog mit dem Titel <b>Testen ohne Tests zu schreiben</b> ist wahrscheinlich die beste Quelle, um zu verstehen, wie Tap-Vergleiche in der Praxis funktionieren. <br><br>  <i>â€Diffy erkennt potenzielle Fehler im Dienst, indem gleichzeitig eine neue und eine alte Version des Codes gestartet werden.</i>  <i>Dieses Tool fungiert als Proxyserver und sendet alle empfangenen Anforderungen an jede der ausgefÃ¼hrten Instanzen.</i>  <i>AnschlieÃŸend vergleicht er die Antworten der Instanzen und meldet alle beim Vergleich festgestellten Abweichungen.</i>  <i>Diffy basiert auf der folgenden Idee:</i> <b>Wenn zwei Implementierungen eines Dienstes dieselben Antworten mit einem ausreichend groÃŸen und unterschiedlichen Satz von Anforderungen zurÃ¼ckgeben, kÃ¶nnen diese beiden Implementierungen als gleichwertig angesehen werden, und die neuere von ihnen ohne LeistungseinbuÃŸen.</b>  <i>Die innovative RauschunterdrÃ¼ckungstechnik von Diffy unterscheidet es von anderen Tools zur vergleichenden Regressionsanalyse. â€œ</i> <br><br>  Der Tap-Vergleich ist groÃŸartig, wenn Sie Ã¼berprÃ¼fen mÃ¼ssen, ob zwei Versionen die gleichen Ergebnisse liefern.  Laut Mark McBride <br><br>  <i>â€Das Diffy-Tool wurde hÃ¤ufig bei der Neugestaltung von Systemen verwendet.</i>  <i>In unserem Fall haben wir die Rails-Quellcodebasis in mehrere mit Scala erstellte Dienste unterteilt, und eine groÃŸe Anzahl von API-Clients hat Funktionen verwendet, die anders waren als erwartet.</i>  <i>Funktionen wie die Datumsformatierung waren besonders gefÃ¤hrlich. â€œ</i> <br><br>  Der Tap-Vergleich ist nicht die beste Option zum Testen der BenutzeraktivitÃ¤t oder der IdentitÃ¤t des Verhaltens von zwei Versionen des Dienstes bei maximaler Auslastung.  Wie bei der Schattenverdoppelung bleiben Nebenwirkungen ein ungelÃ¶stes Problem, insbesondere wenn sowohl die bereitgestellte Version als auch die Produktionsversion Daten in dieselbe Datenbank schreiben.  Wie bei Integrationstests besteht eine MÃ¶glichkeit, dieses Problem zu umgehen, darin, Vergleichstests mit nur einer begrenzten Anzahl von Konten zu verwenden. <br><br><h3>  Lasttest </h3><br>  FÃ¼r diejenigen, die mit Stresstests nicht vertraut sind, kann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieser Artikel</a> als guter Ausgangspunkt dienen.  An Tools und Plattformen fÃ¼r Open Source-Lasttests mangelt es nicht.  Die beliebtesten von ihnen sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=http://">Apache Bench</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gatling</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wrk2</a> , <a href="http://">Tsung</a> , geschrieben in Erlang, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Siege</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Iago</a> von Twitter, geschrieben in Scala (das die Protokolle eines HTTP-Servers, Proxyservers oder Netzwerkpaketanalysators in einer Testinstanz reproduziert).  Einige Experten glauben, dass das beste Tool zum Generieren von Last <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mzbench ist</a> , das eine Vielzahl von Protokollen unterstÃ¼tzt, darunter MySQL, Postgres, Cassandra, MongoDB, TCP usw. Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NDBench von</a> Netflix ist ein weiteres Open-Source-Tool zum Testen von Last-Data-Warehouses. , die die meisten bekannten Protokolle unterstÃ¼tzt. <br><br>  Der offizielle Twitter-Blog von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Iago</a> beschreibt detaillierter, welche Funktionen ein guter Lastgenerator haben sollte: <br><br>  <i>â€Nicht blockierende Anforderungen werden mit einer bestimmten HÃ¤ufigkeit basierend auf einer internen benutzerdefinierten statistischen Verteilung generiert ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Poisson-Prozess wird</a> standardmÃ¤ÃŸig modelliert).</i>  <i>Die HÃ¤ufigkeit von Anforderungen kann nach Bedarf geÃ¤ndert werden, um beispielsweise den Cache vor der Arbeit unter Volllast vorzubereiten.</i> <i><br><br></i>  <i>Im Allgemeinen liegt der Schwerpunkt auf der HÃ¤ufigkeit von Anfragen gemÃ¤ÃŸ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem Gesetz von Little</a> und nicht auf der Anzahl gleichzeitiger Benutzer, die je nach VerzÃ¶gerung dieses Dienstes variieren kÃ¶nnen.</i>  <i>Aus diesem Grund ergeben sich neue MÃ¶glichkeiten, die Ergebnisse mehrerer Tests zu vergleichen und eine Verschlechterung des Betriebs zu verhindern, wodurch der Betrieb des Lastgenerators verlangsamt wird.</i> <i><br><br></i>  <i>Mit anderen Worten, das Iago-Tool versucht, ein System zu simulieren, in dem Anforderungen empfangen werden, unabhÃ¤ngig von der FÃ¤higkeit Ihres Dienstes, diese zu verarbeiten.</i>  <i>Dies unterscheidet sich von Lastgeneratoren, die geschlossene Systeme simulieren, in denen Benutzer geduldig mit der vorhandenen VerzÃ¶gerung arbeiten.</i>  <i>Dieser Unterschied ermÃ¶glicht es uns, die Fehlermodi, die in der Produktion auftreten kÃ¶nnen, ziemlich genau zu modellieren. "</i> <br><br>  Eine andere Art der LastprÃ¼fung ist die BelastungsprÃ¼fung durch Umverteilung des Datenflusses.  Das Wesentliche ist: Der gesamte Datenfluss aus der Produktionsumgebung wird an einen kleineren Cluster geleitet als den fÃ¼r den Service vorbereiteten.  Bei Problemen wird der Datenstrom zurÃ¼ck zum grÃ¶ÃŸeren Cluster Ã¼bertragen.  Diese Technik wird von Facebook verwendet, wie in einem der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel in seinem offiziellen Blog beschrieben</a> : <br><br>  <i>â€Wir leiten speziell einen grÃ¶ÃŸeren Datenfluss an einzelne Cluster oder Knoten um, messen den Ressourcenverbrauch auf diesen Knoten und bestimmen die Grenzen der ServicestabilitÃ¤t.</i>  <i>Diese Art des Testens ist insbesondere nÃ¼tzlich, um die CPU-Ressourcen zu ermitteln, die zur UnterstÃ¼tzung der maximalen Anzahl gleichzeitiger Ãœbertragungen von Facebook Live erforderlich sind. â€œ</i> <br><br>  Folgendes schreibt ein ehemaliger LinkedIn-Ingenieur in der professionellen Slack-Community: <br><br>  <i>"LinkedIn verwendete auch Redline-Tests in der Produktion - Server wurden aus dem Load Balancer entfernt, bis die Last Schwellenwerte erreichte oder Fehler auftraten."</i> <br><br>  In der Tat bietet eine Google-Suche einen Link zu einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vollstÃ¤ndigen Whitepaper</a> und einem LinkedIn-Blogartikel zu diesem Thema: <br><br>  <i>â€Die Redliner-LÃ¶sung fÃ¼r Messungen verwendet einen realen Datenstrom der Produktionsumgebung, wodurch Fehler vermieden werden, die genaue Leistungsmessungen im Labor verhindern.</i> <i><br><br></i>  <i>Redliner leitet einen Teil des Datenstroms an den zu testenden Dienst weiter und analysiert dessen Leistung in Echtzeit.</i>  <i>Diese LÃ¶sung wurde in Hunderten von internen LinkedIn-Diensten implementiert und wird tÃ¤glich fÃ¼r verschiedene Arten von Leistungsanalysen verwendet.</i> <i><br><br></i>  <i>Redliner unterstÃ¼tzt die parallele TestausfÃ¼hrung fÃ¼r kanarische und Produktionsinstanzen.</i>  <b>Auf diese Weise kÃ¶nnen Ingenieure dieselbe Datenmenge auf zwei verschiedene Dienstinstanzen Ã¼bertragen: 1) eine Dienstinstanz, die Innovationen wie neue Konfigurationen, Eigenschaften oder neuen Code enthÃ¤lt;</b>  <b>2) eine Dienstinstanz der aktuellen Arbeitsversion.</b> <br><br>  <i>"Die Ergebnisse von Lasttests werden bei Entscheidungen berÃ¼cksichtigt und verhindern die Bereitstellung von Code, was zu einer schlechten Leistung fÃ¼hren kann."</i> <br><br>  Facebook hat dank des Kraken-Systems Lasttests mit realen DatenstrÃ¶men auf ein vÃ¶llig neues Niveau gebracht, und auch die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beschreibung ist</a> lesenswert. <br>  Das Testen wird implementiert, indem der Datenstrom neu verteilt wird, wenn Gewichtswerte (aus dem verteilten Konfigurationsspeicher gelesen) fÃ¼r <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GrenzgerÃ¤te</a> und Cluster in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Proxygen-</a> Konfiguration (Facebook Load Balancer) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">geÃ¤ndert werden</a> .  Diese Werte bestimmen das Volumen der realen Daten, die an einem bestimmten Anwesenheitspunkt an jeden Cluster und jede Region gesendet werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/0e/by/wk0ebyvdpznpgdgqcc_6zbu1g6g.png"></div><br>  <i>Daten aus dem Kraken White Paper</i> <br><br>  Das Ãœberwachungssystem ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gorilla</a> ) zeigt Indikatoren fÃ¼r verschiedene Dienste an (wie in der obigen Tabelle gezeigt).  Basierend auf den Ãœberwachungsdaten und Schwellenwerten wird entschieden, ob Daten gemÃ¤ÃŸ den Gewichtswerten weiter gesendet werden sollen oder ob die Ãœbertragung von Daten an einen bestimmten Cluster reduziert oder sogar vollstÃ¤ndig gestoppt werden muss. <br><br><h2>  Konfigurationstests </h2><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-2" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="916383043933192192"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Eine neue Welle von Open-Source-Infrastruktur-Tools hat es mÃ¶glich gemacht, alle Ã„nderungen in der Infrastruktur in Form von Code zu erfassen, aber auch relativ <i>einfach</i> .  Es ist auch in unterschiedlichem MaÃŸe mÃ¶glich geworden, diese Ã„nderungen zu <i>testen</i> , obwohl die meisten Infrastruktur-als-Code-Tests in der Vorproduktionsphase nur die korrekten Spezifikationen und Syntax bestÃ¤tigen kÃ¶nnen. <br><br>  DarÃ¼ber hinaus wurde die Weigerung, die neue Konfiguration vor der <i>VerÃ¶ffentlichung des</i> Codes zu testen, zu einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erheblichen Anzahl von Unterbrechungen</a> . <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-3" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="963093541575581696"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  FÃ¼r das ganzheitliche Testen von KonfigurationsÃ¤nderungen ist es wichtig, zwischen verschiedenen Arten von Konfigurationen zu unterscheiden.  Fred Hebert schlug einmal vor, den folgenden Quadranten zu verwenden: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yv/fi/4i/yvfi4ioub6pkvt1mtzxvz2xuvnk.png"></div><br>  Diese Option ist natÃ¼rlich nicht universell, aber mit dieser Unterscheidung kÃ¶nnen Sie entscheiden, wie und zu welchem â€‹â€‹Zeitpunkt die einzelnen Konfigurationen am besten getestet werden sollen.  Die Konfiguration der Erstellungszeit ist sinnvoll, wenn Sie die tatsÃ¤chliche Wiederholbarkeit von Baugruppen sicherstellen kÃ¶nnen.  Nicht alle Konfigurationen sind statisch, aber auf modernen Plattformen ist eine dynamische KonfigurationsÃ¤nderung unvermeidlich (selbst wenn es sich um eine â€permanente Infrastrukturâ€œ handelt). <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-4" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1005924617981005824"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>       ,   ,       blue-green ,        .   ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jamie Wilkinson</a> ),  Google  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> : <br><br> <i>Â«        ,   ,   ,  -     .    .</i> <b>    -  ,         â€”  ,       ,   .        .</b> <br><br> <i>            ,  .     ,    , â€”    Â».</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  Facebook</a>             : <br><br> <i>Â«           .    â€”  ,              .             .        ,      .</i> <br><br><ul><li> <b>   </b> <br><br>             .  Facebook ,          .             ,     . </li><li> <b>   </b> <br><br>         (,  JSON).           ,           .          . <br><br>   (,  Facebook  Thrift)      .   ,           . </li><li> <b> </b> <br><br>         ,     ,    - .       .   â€” A/B-,        1 % .     A/B-,        .      A/B-    . ,  ,                 ,       ,     .  , A/B-    .      ,    A/B-.     Facebook        . <br><br> ,     A/B-  1% ,   1%     ,          (   Â«  Â»).          ,         .               ,      . </li><li> <b>  </b> <br><br>   Facebook            .       ,        .    ,              ,     .   ,  ,           . </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einfache und bequeme Stornierung von Ã„nderungen</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In einigen FÃ¤llen wird trotz aller vorbeugenden MaÃŸnahmen die Bereitstellung einer nicht funktionsfÃ¤higen Konfiguration durchgefÃ¼hrt. </font><font style="vertical-align: inherit;">Das schnelle Auffinden und ZurÃ¼cksetzen von Ã„nderungen ist entscheidend, um ein solches Problem anzugehen. </font><font style="vertical-align: inherit;">"In unserem Konfigurationssystem sind Tools zur Versionskontrolle verfÃ¼gbar, die das RÃ¼ckgÃ¤ngigmachen von Ã„nderungen erheblich vereinfachen."</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortsetzung folgt! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fortgesetzt </font><font style="vertical-align: inherit;">.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418081/">https://habr.com/ru/post/de418081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418069/index.html">LÃ¶sen japanischer FarbkreuzwortrÃ¤tsel mit Lichtgeschwindigkeit</a></li>
<li><a href="../de418071/index.html">IT-Branche fÃ¼r die Menschen: TechTrain Festival in St. Petersburg</a></li>
<li><a href="../de418075/index.html">TOP 5 Dinge, die auf einem 3D-Drucker gedruckt werden kÃ¶nnen [Video]</a></li>
<li><a href="../de418077/index.html">UnfÃ¤lle mit â€Nicht beobachtenâ€œ: eine statistische BegrÃ¼ndung fÃ¼r die Betriebsart des technischen Supports rund um die Uhr</a></li>
<li><a href="../de418079/index.html">Die beliebtesten Programmiersprachen - 2018</a></li>
<li><a href="../de418083/index.html">Einfacher Server mit GraphQL anstelle von REST, Implementierung in Java</a></li>
<li><a href="../de418085/index.html">Versprechen in JavaScript verwenden</a></li>
<li><a href="../de418087/index.html">80% der Selbstbedienungskassen sind gefÃ¤hrdet</a></li>
<li><a href="../de418089/index.html">SolidCraft CNC-FrÃ¤smaschine Ãœbersicht</a></li>
<li><a href="../de418091/index.html">Liste der Artikel und Literatur zu NAS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>