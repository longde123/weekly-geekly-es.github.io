<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ã ‚õìÔ∏è üç• Utiliser un r√©seau neuronal multicouche pour √©viter les obstacles dans les jeux üêº ü§ôüèº ‚úä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Trouver des moyens d'√©viter les obstacles dans les jeux est une t√¢che classique √† laquelle tous les d√©veloppeurs de jeux doivent faire face. Il existe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utiliser un r√©seau neuronal multicouche pour √©viter les obstacles dans les jeux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419265/"><p>  Trouver des moyens d'√©viter les obstacles dans les jeux est une t√¢che classique √† laquelle tous les d√©veloppeurs de jeux doivent faire face.  Il existe un certain nombre d'algorithmes bien connus de divers degr√©s d'efficacit√©.  Tous, √† un degr√© ou √† un autre, analysent la position relative de l'obstacle et du joueur, et en fonction des r√©sultats, l'une ou l'autre d√©cision de se d√©placer est prise.  J'ai essay√© d'utiliser un r√©seau neuronal form√© pour r√©soudre le probl√®me d'√©vitement d'obstacles.  Je souhaite partager mon exp√©rience dans la mise en ≈ìuvre de cette approche dans Unity3D dans ce court article. </p><a name="habracut"></a><br><h2>  Concept </h2><br><p>  Le terrain bas√© sur le Terrain standard est utilis√© comme espace de jeu.  Les collisions avec la surface ne sont pas prises en compte dans cet article.  Chaque mod√®le est √©quip√© d'un ensemble de collisionneurs, d√©crivant le plus fid√®lement possible la g√©om√©trie des obstacles.  Le mod√®le, qui doit contourner les obstacles, a quatre </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ej/s8/e6/ejs8e6yvjqzipq0khklf3g5ph2o.jpeg"></div><br><p>  capteur de collision (dans la capture d'√©cran, l'emplacement et la distance des capteurs sont indiqu√©s par des lignes turquoises).  En substance, les capteurs sont reykast, dont chacun transmet la distance √† l'objet de collision dans l'algorithme d'analyse.  La distance varie de 0 (l'objet est situ√© le plus pr√®s possible) √† 1 (pas de collision, cette direction est libre d'obstacles). <br>  En g√©n√©ral, le travail de l'algorithme d'√©vitement d'obstacles est le suivant: </p><br><ol><li>  Quatre valeurs provenant de capteurs de collision sont transmises aux quatre entr√©es d'un r√©seau neuronal form√© </li><li>  L'√©tat du r√©seau neuronal est calcul√©.  En sortie, nous obtenons trois valeurs: <br>  a.  La puissance de rotation du mod√®le dans le sens antihoraire (prend une valeur de 0 √† 1) <br>  b.  La puissance de rotation du mod√®le dans le sens horaire (prend une valeur de 0 √† 1) <br>  c.  Acc√©l√©ration de freinage (prend une valeur de 0 √† 1) </li><li>  Des efforts sont appliqu√©s au mod√®le avec des coefficients appropri√©s. </li></ol><br><h2>  Impl√©mentation </h2><br><p>  Honn√™tement, je ne savais pas si quelque chose allait en r√©sulter.  Tout d'abord, j'ai impl√©ment√© la classe neuroNet dans Unity.  Je ne m'attarderai pas sur le code de classe, car il s'agit d'un perceptron multicouche classique.  Ce faisant, la question s'est imm√©diatement pos√©e du nombre de couches r√©seau.  Combien d'entre eux sont n√©cessaires pour fournir la capacit√© requise d'une part, et une vitesse de calcul acceptable d'autre part?  Apr√®s une s√©rie d'exp√©riences, je me suis install√© sur douze couches (trois conditions de base pour quatre entr√©es). </p><br><p>  Ensuite, il √©tait n√©cessaire de mettre en ≈ìuvre le processus de formation d'un r√©seau neuronal.  Pour ce faire, j'ai d√ª cr√©er une application distincte utilisant la m√™me classe neuroNet.  Et maintenant, le probl√®me des donn√©es pour la formation a atteint son maximum.  Au d√©part, je voulais utiliser des valeurs obtenues directement √† partir de l'application de jeu.  Pour ce faire, j'ai organis√© l'enregistrement des donn√©es des capteurs, afin qu'√† l'avenir, pour chaque ensemble de valeurs des quatre capteurs, j'indique au programme d'entra√Ænement les valeurs de sortie correctes.  Mais, en regardant le r√©sultat, je me suis d√©courag√©.  Le fait est qu'il ne suffit pas d'indiquer une valeur ad√©quate pour chaque ensemble de quatre valeurs de capteur; ces valeurs doivent √™tre coh√©rentes.  Ceci est tr√®s important pour la formation r√©ussie du r√©seau neuronal.  De plus, rien ne garantissait que l'√©chantillon r√©sultant repr√©sentait toutes les situations possibles. </p><br><p>  Une autre solution √©tait un tableau compil√© manuellement des options de base pour les valeurs des capteurs et des sorties.  Les options de base ont √©t√© prises des valeurs: 0,01 - l'obstacle est proche, 0,5 - l'obstacle est √† mi-chemin, 1 - la direction est libre.  Cela a r√©duit la taille de l'√©chantillon d'apprentissage. </p><br><table><thead><tr><th><pre>  Capteur 1 </pre></th><th><pre>  Capteur 2 </pre></th><th><pre>  Capteur 3 </pre></th><th><pre>  Capteur 4 </pre></th><th>  Rotation dans le sens horaire </th><th>  Rotation anti-horaire </th><th>  Freinage </th></tr></thead><tbody><tr><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td><td>  0,5 </td><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td><td>  0,999 </td><td>  0,01 </td><td>  0,01 </td><td>  0,01 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,5 </td><td>  0,01 </td><td>  0,999 </td><td>  0,01 </td><td>  0,01 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,5 </td><td>  0,5 </td><td>  0,999 </td><td>  0,01 </td><td>  0,01 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,5 </td><td>  0,999 </td><td>  0,999 </td><td>  0,01 </td><td>  0,5 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,999 </td><td>  0,01 </td><td>  0,999 </td><td>  0,01 </td><td>  0,5 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,999 </td><td>  0,5 </td><td>  0,999 </td><td>  0,01 </td><td>  0,999 </td></tr><tr><td>  0,01 </td><td>  0,01 </td><td>  0,999 </td><td>  0,999 </td><td>  0,999 </td><td>  0,01 </td><td>  0,999 </td></tr></tbody></table><br><p>  Le tableau montre un petit fragment de l'√©chantillon d'apprentissage (total dans le tableau 81-ligne).  Le r√©sultat final du programme de formation a √©t√© une table de pond√©ration, qui a √©t√© enregistr√©e dans un fichier s√©par√©. </p><br><h2>  R√©sultats </h2><br><p>  En pr√©vision de me frotter les mains, j'ai organis√© le chargement des cotes dans un jeu de d√©monstration et j'ai commenc√© le processus.  Mais, il s'est av√©r√© que je n'en avais clairement pas assez pour l'affaire.  D√®s le d√©part, le mod√®le test√© a fil√©, a rencontr√© tous les obstacles d'affil√©e, comme un chaton aveugle.  En g√©n√©ral, le r√©sultat √©tait tr√®s moyen.  J'ai d√ª me plonger dans l'√©tude du probl√®me.  Une source de comportement impuissant a √©t√© d√©couverte assez rapidement.  Avec les r√©ponses g√©n√©ralement correctes du r√©seau neuronal aux lectures des capteurs, les actions de contr√¥le transmises se sont av√©r√©es trop fortes. </p><br><p>  Ayant r√©solu ce probl√®me, j'ai rencontr√© une nouvelle difficult√© - la distance de reykast du capteur.  Avec une longue distance de d√©tection des interf√©rences, le mod√®le a effectu√© des man≈ìuvres pr√©matur√©es qui ont entra√Æn√© une distorsion importante de l'itin√©raire (et m√™me des collisions impr√©vues dans des obstacles apparemment d√©j√† pass√©s).  Une petite distance a conduit √† une chose - un "collage" impuissant du mod√®le dans tous les obstacles avec un manque √©vident de temps pour r√©pondre. </p><br><p>  Plus je tripotais le mod√®le de jeu de d√©monstration, essayant de lui apprendre √† √©viter les obstacles, plus il me semblait que je ne programmais pas, mais essayais d'apprendre √† mon enfant √† marcher.  Et c'√©tait une sensation inhabituelle!  C'√©tait d'autant plus joyeux de voir que mes efforts ont donn√© des r√©sultats tangibles.  En fin de compte, le malheureux bateau en vol stationnaire planant au-dessus de la surface a commenc√© √† contourner avec confiance les structures √©mergeant sur la route.  Les vrais tests de l'algorithme ont commenc√© lorsque j'ai consciemment essay√© de pousser le mod√®le dans une impasse.  Ici, il √©tait n√©cessaire de changer la logique de travail avec l'acc√©l√©ration de freinage, pour apporter quelques corrections √† l'√©chantillon d'entra√Ænement.  Regardons des exemples pratiques de ce qui s'est pass√© en cons√©quence. </p><br><h4 id="1-prostoy-obhod-odnogo-prepyatstviya">  1. Contournement simple d'un obstacle </h4><br><iframe width="560" height="315" src="https://www.youtube.com/embed/iX45Xe-ww5U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Comme vous pouvez le voir, le contournement n'a pas pos√© de probl√®me. </p><br><h4 id="2-dva-prepyatstviya-variant-1">  2. Deux obstacles (option 1) </h4><br><iframe width="560" height="315" src="https://www.youtube.com/embed/xTd0Fdrvr-E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Le mod√®le a facilement trouv√© un passage entre les deux b√¢timents.  T√¢che facile. </p><br><h4 id="3-dva-prepyatstviya-variant-2">  3. Deux obstacles (option 2) </h4><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Y4BkLGn4M5Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Les b√¢timents sont plus proches, mais le mod√®le trouve un passage. </p><br><h4 id="4-dva-prepyatstviya-variant-3">  4. Deux obstacles (option 3) </h4><br><iframe width="560" height="315" src="https://www.youtube.com/embed/JdCltkyot6c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  L'option est plus compliqu√©e, mais toujours r√©solue. </p><br><h4 id="5-tri-prepyatstviya">  5. Trois obstacles </h4><br><iframe width="560" height="315" src="https://www.youtube.com/embed/lgeHMbBp-ZM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Le probl√®me a √©t√© r√©solu assez rapidement. </p><br><h4 id="6-tupik">  6. impasse </h4><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zWXk4QqApy8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Ici, le mod√®le a eu des probl√®mes.  Les 30 premi√®res secondes de la vid√©o montrent que le mod√®le patauge impuissant dans une configuration de b√¢timent simple.  Le probl√®me ici ne r√©side probablement pas tant dans le mod√®le de r√©seau neuronal que dans l'algorithme principal pour se d√©placer le long de la route - il essaie constamment de remettre le navire sur la bonne voie, malgr√© des tentatives d√©sesp√©r√©es pour √©viter une collision. </p><br><p>  Apr√®s plusieurs ex√©cutions infructueuses de cette situation avec diff√©rents param√®tres, j'ai r√©ussi √† obtenir un r√©sultat positif.  √Ä partir de la trenti√®me seconde de la vid√©o, vous pouvez observer comment un mod√®le avec une distance accrue de capteurs et avec une force de freinage plus puissante est s√©lectionn√© dans l'impasse.  Pour cela, elle a eu besoin de pr√®s de cinq minutes (j'ai coup√© le tourment et n'ai laiss√© que les 30 derni√®res secondes de la vid√©o).  Il est peu probable que dans un jeu r√©el, cela soit consid√©r√© comme un bon r√©sultat, il y a donc √©videmment de la place pour des am√©liorations de l'algorithme. </p><br><h2>  Conclusion </h2><br><p>  En g√©n√©ral, le probl√®me a √©t√© r√©solu.  L'efficacit√© de cette solution est une question ouverte et des recherches suppl√©mentaires sont n√©cessaires.  Par exemple, on ne sait pas comment le mod√®le se comportera lorsque des obstacles dynamiques (autres objets en mouvement) appara√Ætront.  Un autre probl√®me est le manque de capteurs de collision pointant vers l'arri√®re, ce qui entra√Æne des difficult√©s √† √©viter les obstacles complexes. </p><br><p>  Le d√©veloppement √©vident de l'id√©e d'un algorithme d'√©vitement d'obstacles de r√©seau neuronal se voit dans l'introduction de la formation.  Pour ce faire, une √©valuation du r√©sultat de la d√©cision prise devrait √™tre introduite, et avec des corrections ult√©rieures sans changements significatifs dans la position de l'objet, l'√©valuation devrait se d√©t√©riorer.  Apr√®s avoir atteint une certaine valeur, le mod√®le devrait passer en mode de formation et, par exemple, changer au hasard les d√©cisions prises afin de trouver une issue. </p><br><p>  Une autre caract√©ristique du mod√®le me semble la variabilit√© de la formation initiale.  Cela permet, par exemple, d'avoir plusieurs comportements pour diff√©rents mod√®les sans avoir besoin de programmer chacun d'eux s√©par√©ment.  En d'autres termes, si nous avons, disons, un char lourd et une reconnaissance l√©g√®re, leur mani√®re d'√©viter les obstacles peut varier consid√©rablement.  Pour obtenir cet effet, nous utilisons le m√™me perceptron, mais form√© sur diff√©rents √©chantillons. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419265/">https://habr.com/ru/post/fr419265/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419253/index.html">Rapport du Club de Rome 2018, Chapitre 3.6: Urbanisme r√©g√©n√©ratif: Ecopolis</a></li>
<li><a href="../fr419255/index.html">Bases de la s√©curit√© IoT</a></li>
<li><a href="../fr419257/index.html">L'Inde pr√©sente un nouveau projet de loi sur la protection des PD - un autre analogue au RGPD?</a></li>
<li><a href="../fr419259/index.html">Rust 1.28 Release</a></li>
<li><a href="../fr419261/index.html">Actions sur Google: √©crire une application simple pour Google Assistant sur Dialogflow et les fonctions cloud pour Firebase</a></li>
<li><a href="../fr419267/index.html">Visite de Coworking SOK</a></li>
<li><a href="../fr419269/index.html">R√©bus dans le code et comment les d√©crypter. Le pouvoir secret des identifiants</a></li>
<li><a href="../fr419271/index.html">Analogues en Python et JavaScript. Quatri√®me partie</a></li>
<li><a href="../fr419273/index.html">√âcriture d'un module du noyau Linux: GPIO avec prise en charge IRQ</a></li>
<li><a href="../fr419277/index.html">Rubans thermiques avec indice de protection IP68. Convient pour la lumi√®re dans un bain public</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>