<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏽‍🤝‍🧑🏼 🧖 🔅 Grafana, un autre outil de suivi technique de nos logiciels 🌅 🔅 👃🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un autre article de la série Logicify Monitoring Tools parle de Grafana. Nous utilisons cet outil logiciel pour la visualisation et l'analyse des donn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grafana, un autre outil de suivi technique de nos logiciels</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/431122/"><p>  Un autre article de la série Logicify Monitoring Tools parle de Grafana.  Nous utilisons cet outil logiciel pour la visualisation et l'analyse des données des projets internes et externes.  Cet article peut être utile aux directeurs techniques, développeurs, DevOps, administrateurs système, chefs de projet, ainsi qu'à toutes les parties intéressées. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/19c/683/787/19c68378775049d52b5a529c7badfeec.png" alt="image"></p><a name="habracut"></a><br><h2 id="chto-takoe-grafana">  Qu'est-ce que Grafana? </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Grafana</a> est une plate-forme open source pour visualiser, surveiller et analyser les données.  Cet outil, combiné à Graylog, fait partie de notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">système bidirectionnel de surveillance du comportement des utilisateurs et des performances du système</a> .  Grafana permet aux utilisateurs de créer des tableaux de bord avec des panneaux, chacun affichant certains indicateurs pour une période de temps définie.  Chaque tableau de bord est universel, il peut donc être personnalisé pour un projet spécifique ou en tenant compte de tout développement et / ou besoin métier. </p><br><p> Notre équipe Logicify utilise principalement Grafana en conjonction avec Elasticsearch et InfluxDB, mais cet outil logiciel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prend en charge de nombreuses autres sources de données</a> (Prometheus, MySQL, Postgres, etc.).  Pour chaque source de données, Grafana fournit un éditeur de requête personnalisé et une syntaxe spéciale. </p><br><h2 id="terminy-grafana">  Conditions de Grafana </h2><br><ul><li>  <strong>Le panneau</strong> est l'élément de visualisation de base des indicateurs sélectionnés.  Grafana prend en charge des panneaux avec des graphiques, des statuts uniques, des tableaux, des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cartes thermiques de clic</a> et du texte libre, ainsi que l'intégration avec des plugins officiels et créés par la communauté (comme une carte du monde ou une horloge) et des applications qui peuvent également être visualisées.  Vous pouvez personnaliser le style et le format de chaque panneau;  Tous les panneaux peuvent être déplacés vers un nouvel emplacement, réorganisés et redimensionnés. </li><li>  <strong>Tableau de bord</strong> - un ensemble de panneaux séparés placés dans une grille avec un ensemble de variables (par exemple, le nom du serveur, l'application et le capteur).  En modifiant les variables, vous pouvez changer les données affichées sur le tableau de bord (par exemple, les données de deux serveurs distincts).  Tous les tableaux de bord peuvent être personnalisés, ainsi que sectionner et fragmenter les données qui y sont présentées en fonction des besoins de l'utilisateur.  Le projet Grafana implique une grande communauté de développeurs de code et d'utilisateurs, il existe donc une large sélection de tableaux de bord prêts à l'emploi pour différents types de données et de sources. </li><li>  Dans les tableaux de bord, vous pouvez utiliser des <strong>annotations</strong> pour afficher des événements spécifiques dans différents panneaux.  Les annotations sont ajoutées par des requêtes personnalisées dans Elasticsearch;  sur le graphique, l'annotation est affichée avec une ligne rouge verticale.  Lorsque vous survolez l'annotation, vous pouvez obtenir une description de l'événement et des balises, par exemple, pour suivre la réponse du serveur avec le code d'erreur 5xx ou redémarrer le système.  Grâce à cela, vous pouvez facilement comparer l'heure, un événement spécifique et ses conséquences dans l'application, et examiner le comportement du système. </li></ul><br><h2 id="peredovye-metody-ispolzovaniya-instrumenta-grafana-komandoy-logicify">  Meilleures pratiques pour l'utilisation de l'outil Grafana avec l'équipe Logicify </h2><br><h3 id="ispolzovanie-grafana-vo-vnutrennih-proektah">  Utiliser Grafana dans des projets internes </h3><br><p>  Pour notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet interne, l'Internet des objets</a> (solution de surveillance du climat des bureaux), nous avons connecté Grafana à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">InfluxDB</a> , une base de données de séries chronologiques, pour visualiser les changements dans le climat des bureaux et réagir en conséquence.  Un ensemble de capteurs mesure la température, l'humidité, la pression atmosphérique et le niveau de CO2 dans chaque zone de notre bureau à Kherson;  ces paramètres sont collectés et visualisés sous forme de graphiques Grafana sur un grand moniteur de cuisine et en ligne. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/8eb/cd6/400/8ebcd64009c1c3d24da9cf707e524d01.png" alt="image"><br>  <em>Tableau de bord Grafana avec Logicify Office Areas</em> </p><br><p>  Nous surveillons donc en permanence les paramètres de qualité de l'air et notre chef de bureau réagit aux changements: ouvre les fenêtres, si le niveau de CO2 est trop élevé, allume et éteint le climatiseur et les humidificateurs. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/fd2/4a2/f97/fd24a2f9787712c361e3509f9382d36a.png" alt="image"><br>  <em>Tableau de bord Grafana avec climat de bureau</em> </p><br><p>  Grâce aux graphiques et annotations de séries chronologiques affichés dans Grafana, nous avons analysé les tendances du microclimat dans les bureaux pendant plusieurs mois et saisons.  Nous avons également utilisé cet outil pour visualiser des widgets et des informations utiles (prévisions météorologiques, taux de change, calendriers internes) sur un grand moniteur de cuisine. </p><br><h2 id="kak-ispolzovat-grafana-v-nastraivaemyh-veb-prilozheniyah">  Comment utiliser Grafana dans des applications Web personnalisées </h2><br><h3 id="grafana--grayloghttpswwwgraylogorg">  Grafana + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Graylog</a> </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous utilisons l'outil Graylog</a> pour stocker les journaux des applications Web, les gérer et surveiller leurs performances à la fois au stade du développement et au stade de leur fonctionnement.  Grafana est un outil qui convertit les magazines stockés dans Graylog en formes visuelles pour l'analyse et la surveillance du système.  Pour l'un de nos projets en cours, l'outil Grafana peut être appelé l'interface utilisateur pour le chargement et la surveillance des performances des applications Web et du flux client.  Les outils Graylog et Grafana existent indépendamment l'un de l'autre, nous n'avons créé aucun outil d'intégration complexe spécial pour les connecter les uns aux autres.  Étant donné que Graylog stocke toutes les données de journal dans Elasticsearch, l'une des sources de données de Grafana, nous utilisons simplement l'index Elasticsearch spécifique où les journaux sont stockés pour connecter Grafana à Graylog. </p><br><h2 id="kakie-pokazateli-mozhno-vizualizirovat-v-grafana-dlya-veb-prilozheniya">  Quelles métriques peuvent être visualisées dans Grafana pour une application Web? </h2><br><p>  Les journaux de texte simple ou les notifications d'erreur ne sont pas «intéressants» pour Grafana, car leur objectif principal est de visualiser les données sous forme de graphiques, de graphiques et de tableaux.  Nous avons écrit un module personnalisé pour Django pour collecter les données que nous aimerions suivre pour chaque demande traitée et réponse de réseau / employé.  Les données comprenaient non seulement l'état de réussite / d'échec, mais également un ensemble de champs structurés (à la fois généraux et liés au projet), tels que: </p><br><ul><li>  version de l'application </li><li>  identifiant unique de chaque demande </li><li>  temps de réponse et statut </li><li>  code d'erreur (le cas échéant) </li><li>  Adresse IP à partir de laquelle la demande a été envoyée </li><li>  informations utilisateur (e-mail, nom d'utilisateur pour les utilisateurs enregistrés, rôle, autorisations) </li><li>  appareil, etc. </li></ul><br><p>  Django place les enregistrements analytiques structurés par l'utilisateur dans Graylog, qui les enregistre dans un flux séparé.  Bien que ces données puissent être visualisées à l'aide des tableaux de bord intégrés Graylog, elles ne sont pas aussi belles que les tableaux de bord Grafana.  Par conséquent, nous forçons Grafana à lire ces données analytiques et à les visualiser.  Ainsi, nous surveillons les performances des applications et téléchargeons les données en temps réel et rétrospectivement. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2c4/f57/39c/2c4f5739cfca7db235dbaee0e98946d0.png" alt="image"></p><br><h2 id="grafana-kak-instrument-otladki">  Grafana comme outil de débogage </h2><br><p>  Les tableaux de bord Grafana nous aident principalement dans le débogage des applications.  Si le client final signale un problème, Grafana nous donne l'opportunité de distinguer les erreurs côté client / serveur des erreurs réelles ou des lacunes dans la logique d'application.  Nous suivons toutes les demandes Web initiées par le client (en utilisant l'adresse e-mail), les administrateurs d'application et l'application elle-même pendant une période de temps spécifiée et par la méthode d'exclusion, nous trouvons la raison. </p><br><p>  Nous déboguons et corrigeons également les erreurs si nous remarquons une anomalie sur le tableau de bord dans les graphiques de chargement et de performances des applications.  L'exemple de graphique Grafana suivant montre le temps de réponse pour les requêtes Web sur une période de temps.  Pour chaque demande Web, nous suivons les temps de réponse maximum, minimum et moyen.  Si nous voyons une demande qui nous a pris trop de temps à traiter, nous mettons à l'échelle une certaine partie du graphique et enquêtons sur le problème. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c47/670/2d1/c476702d18e4aec329b500d8cd2601de.png" alt="image"><br>  <em>Exemple de grafana montrant le temps de réponse Web</em> </p><br><p>  Un autre graphique montre la charge du système pour une période de temps définie et est utile pour suivre le trafic.  Si nous constatons une explosion inhabituelle d'activité, par exemple après les heures de bureau ou le week-end, nous l'examinerons.  Un tel pic peut être provoqué, par exemple, par des robots d'indexation de Google indexant le contenu du site Web, ou par des robots malveillants analysant notre système pour détecter des vulnérabilités.  Encore une fois, chaque cas fait l'objet d'une enquête et est examiné en conséquence. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/832/485/3b8/8324853b8a0e3f384c2b6bd1b189ff6d.png" alt="image"><br>  <em>Exemple de grafana montrant le téléchargement de l'application</em> </p><br><p>  Grafana dispose d'un mécanisme de notification intégré (par exemple, par e-mail ou via des notifications via Slack) selon certaines règles.  Nous n'utilisons pas cette fonctionnalité de l'outil Grafana, car nous avons toutes les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notifications configurées dans Graylog</a> .  Cependant, certains problèmes de performances du système ne peuvent être vus qu'après l'exécution du programme, par exemple, un temps de réponse anormalement long à une demande Web.  Nous ne recevrons pas de notification Graylog à ce sujet, mais l'anomalie sera clairement visible sur la carte Grafana.  Ainsi, les deux outils se complètent lorsque nous découvrons un problème: à un niveau élevé, nous vérifions Grafana pour comprendre ce qui s'est passé et pourquoi, puis approfondissons avec Graylog en utilisant un identificateur de demande spécifique. </p><br><p>  Contrairement à Graylog, qui est utilisé pour les applications développées et utilisées, Grafana est utilisé uniquement pour les applications utilisées.  La seule exception lors de l'utilisation de Grafana pour une application qui est encore en phase de développement est le test de performances.  Nous émulons le démarrage du système à l'aide de JMeter, puis vérifions les tableaux de bord Grafana pour voir comment il réagit. </p><br><h2 id="grafana-kak-instrument-biznes-analitiki">  Grafana comme outil de Business Intelligence </h2><br><p>  En plus des objectifs de suivi des performances et de débogage, les tableaux de bord Grafana sont un outil puissant pour prendre des décisions commerciales éclairées.  Lorsqu'il est correctement configuré (de préférence en tandem avec le service Google Analytics), Grafana peut visualiser des analyses personnalisées du comportement des utilisateurs dans le système sous la forme de graphiques circulaires, d'histogrammes de temps et d'autres éléments graphiques.  Sur la base de ces informations, les parties intéressées par le produit peuvent prendre des décisions concernant la poursuite de la mise à l'échelle de l'application, l'ajout ou la suppression de certaines fonctions et l'amélioration du cycle d'interaction avec les clients. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/172/065/270/172065270c5e8b95a5a4b46066f5d6f4.png" alt="image"><br>  <em>Un exemple de tableau de bord Grafana affichant le comportement des utilisateurs dans une application de commerce électronique</em> </p><br><p>  Étant donné que le tableau de bord ci-dessus est davantage axé sur les entreprises, les développeurs l'utilisent à des fins internes, plutôt comme un outil de sécurité pour suivre le flux de clients dans une application de commerce électronique: enregistrement, autorisation, commandes passées sur une période donnée. </p><br><p>  Voici 2 projets du monde réel où Grafana a pu augmenter la convivialité d'une application Web. </p><br><ul><li>  Avec l'aide de Grafana, nous surveillons régulièrement l'état des commandes périodiques dans le système et filtrons les commandes échouées.  Ces commandes sont basées sur un abonnement, c'est-à-dire qu'elles sont générées dans le système chaque mois et l'argent est automatiquement débité des comptes bancaires des clients.  Parfois, les paiements échouent (argent insuffisant / refus d'une institution financière), puis les administrateurs système vérifient la situation et contactent les clients pour recréer la commande manuellement.  Ainsi, pas un seul ordre ne tombe hors de vue;  les clients et les fournisseurs sont satisfaits. </li><li>  À l'aide de rapports créés à l'aide de Grafana pour une application de commerce électronique, nous avons constaté qu'un grand pourcentage de nouveaux clients quittent la page de paiement, bien qu'ils aient déjà des articles dans leurs paniers.  Cette conclusion a été appuyée par les rapports du service Google Analytics, de sorte que la procédure de paiement a été analysée étape par étape et améliorée: les utilisateurs peuvent désormais passer une commande en 2 clics.  En conséquence, le taux de conversion des visiteurs pour les clients a augmenté - le profit du fournisseur a également augmenté. </li></ul><br><p>  Grafana est un élément important du système de surveillance de l'équipe Logicify pour les projets internes et externes.  Cet outil logiciel est open source, plus une communauté de développeurs importante et active.  Mais surtout, nous aimons la flexibilité - il prend en charge de nombreuses sources de données et facilite la personnalisation des tableaux de bord et des panneaux. </p><br><h3 id="stati-po-teme">  Articles liés: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Graylog comme outil de suivi technique des produits logiciels que nous créons</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment créer une solution de bureau connecté en utilisant uniquement un fer à souder et un peu d'enthousiasme</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Apache JMeter: puissant outil de test de performances et de charge</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tableau de bord de l'équipe Logicify</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Système Logicify bidirectionnel pour surveiller le comportement des utilisateurs et l'état du système</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr431122/">https://habr.com/ru/post/fr431122/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr431110/index.html">Arrêtez de nourrir les éditeurs. L'UE élabore des règles pour le libre accès obligatoire à la recherche</a></li>
<li><a href="../fr431112/index.html">Comment utiliser les méthodes des moindres carrés pour évaluer les ressources et surveiller les bases de données Oracle</a></li>
<li><a href="../fr431116/index.html">Envie d'étrange: bilan de la prochaine conférence DartUP à Saint-Pétersbourg</a></li>
<li><a href="../fr431118/index.html">Toute la vérité sur RTOS. Article # 22. Boîtes aux lettres: services auxiliaires et structures de données</a></li>
<li><a href="../fr431120/index.html">La souffrance au travail n'est pas nécessaire</a></li>
<li><a href="../fr431124/index.html">"La science des données, comme les mathématiques et la physique, est une autre façon d'explorer le monde qui vous entoure."</a></li>
<li><a href="../fr431126/index.html">Pourquoi vous ne devriez pas économiser sur les MP professionnels</a></li>
<li><a href="../fr431128/index.html">Piratage DDR3 SPD</a></li>
<li><a href="../fr431130/index.html">Semaine de la sécurité 48: Hack Black Friday</a></li>
<li><a href="../fr431132/index.html">Reuters: la Russie augmentera les amendes des sociétés Internet à 1% du chiffre d'affaires annuel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>