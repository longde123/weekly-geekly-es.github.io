<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÅÔ∏è ‚õπüèº ü§¥üèæ Syst√®mes d'exploitation: trois pi√®ces faciles. Partie 5: Planification: file d'attente de r√©troaction √† plusieurs niveaux (traduction) üâë üì¢ üßöüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction aux syst√®mes d'exploitation 
 Bonjour, Habr! Je veux attirer votre attention sur une s√©rie d'articles-traductions d'une litt√©rature int√©r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Syst√®mes d'exploitation: trois pi√®ces faciles. Partie 5: Planification: file d'attente de r√©troaction √† plusieurs niveaux (traduction)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450116/"><h1>  Introduction aux syst√®mes d'exploitation </h1><br>  Bonjour, Habr!  Je veux attirer votre attention sur une s√©rie d'articles-traductions d'une litt√©rature int√©ressante √† mon avis - OSTEP.  Cet article d√©crit assez en profondeur le travail des syst√®mes d'exploitation de type Unix, √† savoir le travail avec les processus, les diff√©rents planificateurs, la m√©moire et d'autres composants similaires qui composent le syst√®me d'exploitation moderne.  L'original de tous les mat√©riaux que vous pouvez voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Veuillez noter que la traduction a √©t√© effectu√©e de mani√®re non professionnelle (assez librement), mais j'esp√®re avoir conserv√© le sens g√©n√©ral. <br><br>  Les travaux de laboratoire sur ce sujet peuvent √™tre trouv√©s ici: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'original</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'original</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mon adaptation personnelle</a> </li></ul><br>  Autres parties: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1: Intro</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2: Abstraction: le processus</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3: Introduction √† l'API Process</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 4: Introduction au planificateur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 5: Planificateur MLFQ</a> </li></ul><br>  Et vous pouvez regarder ma cha√Æne en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©gramme</a> =) <br><a name="habracut"></a><br><h2>  Planification: file d'attente de commentaires √† plusieurs niveaux </h2><br>  Dans cette conf√©rence, nous parlerons des probl√®mes de d√©veloppement de l‚Äôune des approches les plus <br>  Planification appel√©e <b>file d'attente de r√©troaction √† plusieurs niveaux</b> (MLFQ).  L'ordonnanceur MLFQ a √©t√© d√©crit pour la premi√®re fois en 1962 par Fernando J. Corbat√≥ dans un syst√®me appel√© Compatible Time-Sharing System (CTSS).  Ces travaux (y compris des travaux ult√©rieurs sur Multics) ont ensuite √©t√© soumis au prix Turing.  L'ordonnanceur a ensuite √©t√© am√©lior√© et a acquis un aspect que l'on retrouve d√©j√† dans certains syst√®mes modernes. <br><br>  L'algorithme MLFQ tente de r√©soudre 2 probl√®mes transversaux fondamentaux. <br>  <b>Tout d'abord</b> , il essaie d'optimiser le d√©lai d'ex√©cution, qui, comme nous l'avons examin√© dans la conf√©rence pr√©c√©dente, est optimis√© en commen√ßant au d√©but de la file d'attente des t√¢ches les plus courtes.  Cependant, l'OS ne sait pas combien de temps fonctionnera tel ou tel processus, et c'est la connaissance n√©cessaire pour le fonctionnement des algorithmes SJF, STCF.  <b>Deuxi√®mement</b> , MLFQ essaie de rendre le syst√®me r√©actif aux utilisateurs (par exemple, ceux qui sont assis et regardent l'√©cran en attendant que la t√¢che soit termin√©e) et minimise ainsi le temps de r√©ponse.  Malheureusement, des algorithmes comme RR r√©duisent le temps de r√©ponse, mais ils ont un tr√®s mauvais effet sur les m√©triques de d√©lai d'ex√©cution.  D'o√π notre probl√®me: comment concevoir un ordonnanceur qui r√©pondra √† nos exigences tout en ignorant la nature du processus en g√©n√©ral?  Comment l'ordonnanceur peut-il conna√Ætre les caract√©ristiques des t√¢ches qu'il lance et prendre ainsi de meilleures d√©cisions de planification? <br><br>  <u>L'essence du probl√®me: comment planifier la formulation des t√¢ches sans une parfaite connaissance?</u>  <u>Comment d√©velopper un planificateur qui minimise simultan√©ment le temps de r√©ponse pour les t√¢ches interactives et en m√™me temps minimise le temps d'ex√©cution sans conna√Ætre le temps pour terminer la t√¢che?</u> <br><br>  Remarque: apprendre des √©v√©nements pr√©c√©dents <br><br>  La gamme MLFQ est un excellent exemple d'un syst√®me qui apprend des √©v√©nements pass√©s pour pr√©dire l'avenir.  Des approches similaires se retrouvent souvent dans le syst√®me d'exploitation (et dans de nombreuses autres branches de l'informatique, y compris les branches de pr√©diction mat√©rielle et les algorithmes de mise en cache).  Des d√©placements similaires fonctionnent lorsque les t√¢ches ont des phases comportementales et sont donc pr√©visibles. <br><br>  Cependant, il faut √™tre prudent avec une telle technique, car les pr√©dictions peuvent tr√®s facilement s'av√©rer fausses et conduire le syst√®me √† prendre des d√©cisions pires que ce serait sans connaissance du tout. <br><br><h3>  MLFQ: r√®gles de base </h3><br>  Consid√©rez les r√®gles de base de l'algorithme MLFQ.  Bien qu'il existe plusieurs impl√©mentations de cet algorithme, les approches de base sont similaires. <br><br>  Dans l'impl√©mentation que nous consid√©rerons, dans MLFQ, il y aura plusieurs files d'attente distinctes, chacune ayant une priorit√© diff√©rente.  √Ä tout moment, une t√¢che pr√™te √† √™tre ex√©cut√©e se trouve dans une file d'attente.  MLFQ utilise des priorit√©s pour d√©cider quelle t√¢che ex√©cuter, c'est-√†-dire  une t√¢che avec une priorit√© plus √©lev√©e (une t√¢che de la file d'attente avec une priorit√© plus √©lev√©e) sera lanc√©e en premier. <br><br>  Il ne fait aucun doute que plusieurs t√¢ches peuvent se trouver dans une file d'attente particuli√®re, elles auront donc la m√™me priorit√©.  Dans ce cas, le moteur RR sera utilis√© pour planifier le lancement parmi ces t√¢ches. <br><br>  Ainsi, nous arrivons √† deux r√®gles de base pour MLFQ: <br><br><ul><li>  R√®gle 1: Si priorit√© (A)&gt; Priorit√© (B), la t√¢che A d√©marrera (B ne sera pas) </li><li>  R√®gle 2: Si priorit√© (A) = priorit√© (B), A&amp;B sont d√©marr√©s √† l'aide de RR </li></ul><br>  Sur la base de ce qui pr√©c√®de, les √©l√©ments cl√©s de la planification du MLFQ sont les priorit√©s.  Au lieu de d√©finir une priorit√© fixe pour chaque t√¢che, MLFQ modifie sa priorit√© en fonction du comportement observ√©. <br><br>  Par exemple, si une t√¢che quitte constamment le travail sur le CPU en attendant la saisie au clavier, MLFQ maintiendra la priorit√© du processus √† un niveau √©lev√©, car c'est ainsi que le processus interactif devrait fonctionner.  Si, au contraire, la t√¢che utilise constamment et intensivement le CPU pendant une longue p√©riode, MLFQ diminuera sa priorit√©.  Ainsi, MLFQ √©tudiera le comportement des processus au moment de leur fonctionnement et utilisera le comportement. <br><br>  Tirons un exemple de l'apparence des files d'attente √† un moment donn√©, puis nous obtenons quelque chose comme ceci: <br><br><img src="https://habrastorage.org/webt/4x/ad/rr/4xadrrwfmrtn3mg-se6wgith9gm.png" alt="image"><br><br>  Dans ce sch√©ma, 2 processus A et B sont dans la file d'attente avec la priorit√© la plus √©lev√©e.  Le processus C est quelque part au milieu, et le processus D est √† la toute fin de la file d'attente.  Selon les descriptions ci-dessus de l'algorithme MLFQ, le planificateur ex√©cutera les t√¢ches uniquement avec la priorit√© la plus √©lev√©e selon RR, et les t√¢ches C, D seront sans travail. <br><br>  Naturellement, un instantan√© statique ne donnera pas une image compl√®te du fonctionnement de MLFQ. <br>  Il est important de comprendre exactement comment l'image change au fil du temps. <br><br><h4>  Tentative 1: comment modifier la priorit√© </h4><br>  √Ä ce stade, vous devez d√©cider comment MLFQ changera le niveau de priorit√© de la t√¢che (et donc la position de la t√¢che dans la file d'attente) pendant son cycle de vie.  Pour ce faire, vous devez garder √† l'esprit le flux de travail: un certain nombre de t√¢ches interactives avec un temps d'ex√©cution court (et donc une lib√©ration fr√©quente du processeur) et plusieurs t√¢ches longues qui utilisent le processeur tout leur temps de travail, tandis que le temps de r√©ponse pour de telles t√¢ches n'est pas important.  Et donc, vous pouvez faire la premi√®re tentative pour impl√©menter l'algorithme MLFQ avec les r√®gles suivantes: <br><br><ul><li>  R√®gle 3: Lorsqu'une t√¢che entre dans le syst√®me, elle est mise en file d'attente avec le plus haut </li><li>  priorit√©. </li><li>  R√®gle 4a: Si une t√¢che utilise la totalit√© de la fen√™tre de temps qui lui est allou√©e, </li><li>  la priorit√© baisse. </li><li>  R√®gle 4b: Si la t√¢che lib√®re le CPU avant l'expiration de sa fen√™tre de temps, alors elle </li><li>  reste avec la m√™me priorit√©. </li></ul><br>  <b>Exemple 1: une seule t√¢che de longue dur√©e</b> <br><br>  Comme vous pouvez le voir dans cet exemple, la t√¢che √† l'admission est pos√©e avec la plus haute priorit√©.  Apr√®s une fen√™tre temporelle de 10 ms, le processus est abaiss√© en priorit√© par le planificateur.  Apr√®s la fen√™tre de temps suivante, la t√¢che tombe finalement √† la priorit√© la plus basse du syst√®me, o√π elle reste. <br><br><img src="https://habrastorage.org/webt/jl/wi/fg/jlwifg8osgxds9bpyftx2aoa9pa.png"><br><br>  <b>Exemple 2: Ils ont √©voqu√© une courte t√¢che</b> <br><br>  Voyons maintenant un exemple de la fa√ßon dont MLFQ tentera de se rapprocher de SJF.  Il y a deux t√¢ches dans cet exemple: A, qui est une t√¢che de longue dur√©e qui occupe constamment le CPU, et B, qui est une courte t√¢che interactive.  Supposons que A ait d√©j√† fonctionn√© pendant un certain temps au moment o√π la t√¢che B arrive. <br><br><img src="https://habrastorage.org/webt/hq/dp/ou/hqdpouigzrlqbjbhwnvgv9e8mxc.png"><br><br>  Dans ce graphique, les r√©sultats du script sont visibles.  La t√¢che A, comme toute t√¢che utilisant un processeur, est tout en bas.  La t√¢che B arrivera √† T = 100 et sera plac√©e dans la file d'attente avec la priorit√© la plus √©lev√©e.  Le temps de son travail √©tant court, il se terminera avant d'atteindre la derni√®re √©tape. <br><br>  √Ä partir de cet exemple, il faut comprendre l'objectif principal de l'algorithme: puisque l'algorithme ne conna√Æt pas une t√¢che longue ou courte, il suppose tout d'abord que la t√¢che est courte et lui donne la plus haute priorit√©.  Si c'est une t√¢che vraiment courte, alors elle sera accomplie rapidement, sinon si c'est une t√¢che longue, elle descendra lentement en priorit√© et prouvera bient√¥t que c'est une t√¢che vraiment longue qui ne n√©cessite pas de r√©ponse. <br><br>  <b>Exemple 3: qu'en est-il des E / S?</b> <br><br>  Jetez maintenant un ≈ìil √† l'exemple d'E / S.  Comme indiqu√© dans la r√®gle 4b, si un processus lib√®re un processeur sans utiliser pleinement son temps de processeur, il reste au m√™me niveau de priorit√©.  L'intention de cette r√®gle est assez simple - si une t√¢che interactive effectue de nombreuses op√©rations d'E / S, par exemple, en attendant qu'un utilisateur appuie sur une touche ou une souris, une telle t√¢che lib√©rera le processeur avant la fen√™tre allou√©e.  Nous ne voudrions pas omettre une telle t√¢che par priorit√©, et elle restera donc au m√™me niveau. <br><br><img src="https://habrastorage.org/webt/md/oa/f_/mdoaf_yf81n7xvy-j_bdo6hvbmm.png"><br><br>  Cet exemple montre comment l'algorithme fonctionnera avec de tels processus - une t√¢che interactive B, qui n'a besoin d'un processeur que pendant 1 ms avant d'effectuer le processus d'E / S, et une longue t√¢che A, qui utilise le processeur tout le temps. <br><br>  MLFQ d√©tient le processus B avec la plus haute priorit√© car il se poursuit tout le temps. <br>  lib√©rer le CPU.  Si B est une t√¢che interactive, l'algorithme a alors atteint son objectif de lancer rapidement des t√¢ches interactives. <br><br>  <b>Probl√®mes avec l'algorithme MLFQ actuel</b> <br><br>  Dans les exemples pr√©c√©dents, nous avons construit la version de base de MLFQ.  Et il semble qu'il fasse bien et honn√™tement son travail, en r√©partissant honn√™tement le temps processeur entre les t√¢ches longues et en permettant aux t√¢ches courtes ou aux t√¢ches acc√©dant intensivement aux E / S de fonctionner rapidement.  Malheureusement, cette approche contient plusieurs probl√®mes graves. <br><br>  <b>Premi√®rement</b> , le probl√®me de la faim: si le syst√®me a beaucoup de t√¢ches interactives, ils consommeront tout le temps du processeur et donc pas une seule longue t√¢che n'aura la possibilit√© d'√™tre ex√©cut√©e (ils meurent de faim). <br><br>  <b>Deuxi√®mement</b> , les utilisateurs intelligents pourraient √©crire leurs programmes afin que <br>  tromper le planificateur.  L'astuce consiste √† faire quelque chose pour <br>  planificateur pour donner au processus plus de temps processeur.  Algorithme qui <br>  d√©crit ci-dessus est assez vuln√©rable √† de telles attaques: avant que la fen√™tre temporelle ne soit pratiquement <br>  termin√©, vous devez effectuer une op√©ration d'E / S (pour certains, quel que soit le fichier) <br>  et ainsi lib√©rer le CPU.  Ce comportement vous permettra de rester dans le m√™me <br>  la file d'attente elle-m√™me et obtenir √† nouveau un plus grand pourcentage de temps CPU.  Si c'est fait <br>  c'est correct (par exemple, 99% du temps de la fen√™tre avant de lib√©rer le CPU) <br>  une telle t√¢che peut simplement monopoliser le processeur. <br><br>  Enfin, un programme peut changer son comportement au fil du temps.  Ces t√¢ches <br>  qui a utilis√© le CPU peut devenir interactif.  Dans notre exemple, similaire <br>  les t√¢ches ne recevront pas un traitement appropri√© de la part de l'ordonnanceur, comme d'autres <br>  t√¢ches (initiales) interactives. <br><br>  <u>Question au public: quelles attaques contre le planificateur pourraient √™tre faites dans le monde moderne?</u> <u><br></u> <br><h4>  Tentative 2: augmentation de la priorit√© </h4><br><br>  Essayons de changer les r√®gles et voyons si nous pouvons √©viter des probl√®mes avec <br>  le je√ªne.  Que pourrions-nous faire pour garantir que les <br>  Les t√¢ches CPU auront leur temps (m√™me si ce n'est pas pour longtemps). <br>  Comme solution simple au probl√®me, vous pouvez proposer p√©riodiquement <br>  augmenter la priorit√© de toutes ces t√¢ches dans le syst√®me.  Il y a plusieurs fa√ßons. <br>  pour y parvenir, essayons d'impl√©menter comme exemple quelque chose de simple: traduire <br>  toutes les t√¢ches √† la fois dans la plus haute priorit√©, d'o√π la nouvelle r√®gle: <br><ul><li>  <b>R√®gle 5</b> : Apr√®s une certaine p√©riode de S, transf√©rez toutes les t√¢ches du syst√®me vers la priorit√© la plus √©lev√©e. </li></ul><br>  Notre nouvelle r√®gle r√©sout deux probl√®mes √† la fois.  Tout d'abord, les processus <br>  garanti de ne pas mourir de faim: les t√¢ches de la plus haute priorit√© se partageront <br>  temps processeur selon l'algorithme RR et donc tous les processus recevront <br>  temps processeur.  Deuxi√®mement, s'il existe un processus utilis√© pr√©c√©demment <br>  seul le processeur devient interactif, alors il restera en ligne avec le sup√©rieur <br>  la priorit√© apr√®s une fois recevra une augmentation de priorit√© au plus haut. <br>  Prenons un exemple.  Dans ce sc√©nario, envisagez un processus utilisant <br><img src="https://habrastorage.org/webt/cx/te/ll/cxtellydeep0hkgrqfiypt-zqq4.png"><br><br>  CPU et deux processus interactifs courts.  Sur la gauche de la figure, la figure montre le comportement sans augmenter la priorit√©, et donc la t√¢che longue commence √† mourir de faim apr√®s l'arriv√©e de deux t√¢ches interactives dans le syst√®me.  Dans la figure de droite, toutes les 50 ms, la priorit√© est augment√©e et donc tous les processus sont garantis pour recevoir du temps processeur et seront p√©riodiquement d√©marr√©s.  50ms dans ce cas est pris comme exemple, en r√©alit√© ce nombre est un peu plus grand. <br>  De toute √©vidence, l'ajout de temps pour une augmentation p√©riodique de S <br>  question logique: quelle valeur faut-il fixer?  L'un des honor√©s <br>  les ing√©nieurs syst√®me John Ousterhout ont appel√© des quantit√©s similaires dans des syst√®mes comme voo-doo <br>  constante, car ils ont en quelque sorte exig√© la magie noire pour corriger <br>  exposant.  Et, malheureusement, S a un tel ar√¥me.  Si vous d√©finissez √©galement la valeur <br>  grandes - de longues t√¢ches commenceront √† mourir de faim.  Et si vous d√©finissez une valeur trop basse, <br>  Les t√¢ches interactives ne recevront pas le temps processeur appropri√©. <br><br><h4>  Tentative 3: Meilleure comptabilit√© </h4><br><br>  Nous avons maintenant un autre probl√®me √† r√©soudre: comment ne pas <br>  laissez tricher notre planificateur?  Coupables de cette opportunit√© sont <br>  les r√®gles 4a, 4b, qui permettent √† la t√¢che de conserver la priorit√©, lib√©rant le processeur <br>  avant l'expiration du d√©lai imparti.  Comment y faire face? <br>  La solution dans ce cas peut √™tre consid√©r√©e comme la meilleure prise en compte du temps CPU sur chaque <br>  Niveau MLFQ.  Au lieu d'oublier le temps utilis√© par le programme <br>  processeur pour la p√©riode allou√©e, vous devez le consid√©rer et l'enregistrer.  Apr√®s <br>  le processus a pris du temps allou√© √† lui devrait √™tre r√©duit √† la prochaine <br>  niveau de priorit√©.  Maintenant, peu importe comment le processus utilise son temps - comment <br>  calculant constamment sur le processeur ou autant d'appels.  De cette fa√ßon <br>  La r√®gle 4 devrait √™tre r√©√©crite comme suit: <br><br><ul><li>  <b>R√®gle 4</b> : Une fois que la t√¢che a √©puis√© le temps qui lui est allou√© dans la file d'attente actuelle (quel que soit le nombre de fois qu'elle a lib√©r√© le CPU), la priorit√© d'une telle t√¢che diminue (elle descend dans la file d'attente). </li></ul><br>  Regardons un exemple: <br><img src="https://habrastorage.org/webt/je/rs/kw/jerskwy36cewrg6auapm-dal7iu.png">  " <br><br>  La figure montre ce qui se passe si vous essayez de tromper le planificateur, comment <br>  si c'√©tait avec les r√®gles pr√©c√©dentes 4a, 4b, on obtient le r√©sultat √† gauche.  Bonne nouvelle <br>  la r√®gle est le r√©sultat √† droite.  Avant la protection, tout processus pouvait appeler des E / S jusqu'√† la fin et <br>  dominent ainsi le CPU, apr√®s avoir activ√© la protection, quel que soit le comportement <br>  I / O, il descendra toujours la ligne et ne sera donc pas malhonn√™te <br>  prendre possession des ressources CPU. <br><br><h4>  Am√©lioration de MLFQ et d'autres probl√®mes </h4><br>  Avec les am√©liorations ci-dessus, de nouveaux probl√®mes surgissent: l'un des principaux <br>  questions - comment param√©trer un tel ordonnanceur?  C'est-√†-dire  Combien devrait √™tre <br>  √©clate?  Quelle devrait √™tre la taille de la fen√™tre du programme dans la file d'attente?  Comment <br>  la priorit√© du programme devrait souvent √™tre augment√©e pour √©viter la famine et <br>  prendre en compte les changements de comportement du programme?  √Ä ces questions, il n‚Äôexiste pas de <br>  r√©ponse et seulement des exp√©riences avec les charges et la configuration ult√©rieure <br>  le planificateur peut conduire √† un √©quilibre satisfaisant. <br><br>  Par exemple, la plupart des impl√©mentations MLFQ vous permettent d'attribuer diff√©rents <br>  intervalles de temps √† diff√©rentes files d'attente.  Files d'attente √† priorit√© √©lev√©e g√©n√©ralement <br>  de courts intervalles sont attribu√©s.  Ces files d'attente se composent de t√¢ches interactives, <br>  basculer entre ce qui est assez sensible et devrait prendre 10 ou moins <br>  ms  En revanche, les files d'attente de faible priorit√© consistent en de longues t√¢ches utilisant <br>  CPU  Et dans ce cas, les longs intervalles de temps correspondent tr√®s bien (100 ms). <br><img src="https://habrastorage.org/webt/p4/1j/-d/p41j-d9spzwfok9w7xmkcewqgrq.png"><br><br>  Dans cet exemple, 2 t√¢ches ont fonctionn√© dans la file d'attente haute priorit√© 20 <br>  ms, cass√© par des fen√™tres pendant 10 ms.  40 ms dans la file d'attente moyenne (fen√™tre √† 20 ms) et dans la priorit√© basse <br>  La fen√™tre de temps d'attente est devenue 40 ms, o√π les t√¢ches ont termin√© leur travail. <br><br>  L'impl√©mentation Solaris OS MLFQ est une classe de planificateurs √† temps partag√©. <br>  Le planificateur fournit un ensemble de tableaux qui d√©terminent exactement comment il doit <br>  changer la priorit√© du processus sur sa dur√©e de vie, quelle devrait √™tre la taille <br>  la fen√™tre s√©lectionn√©e et la fr√©quence √† laquelle vous devez augmenter les priorit√©s de la t√¢che.  Admin <br>  les syst√®mes peuvent interagir avec cette table et faire en sorte que le planificateur se comporte <br>  d'une mani√®re diff√©rente.  Par d√©faut, il y a 60 files d'attente incr√©mentielles dans ce tableau. <br>  taille de fen√™tre de 20 ms (haute priorit√©) √† plusieurs centaines de ms (priorit√© la plus basse), et <br>  √©galement avec un coup de pouce de toutes les t√¢ches une fois par seconde. <br><br>  Les autres planificateurs MLFQ n'utilisent pas de table ou de <br>  les r√®gles qui sont d√©crites dans cette conf√©rence, au contraire, ils calculent les priorit√©s en utilisant <br>  formules math√©matiques.  Ainsi, par exemple, le planificateur dans FreeBSD utilise la formule pour <br>  calculer la priorit√© actuelle d'une t√¢che en fonction de la quantit√© de processus <br>  CPU utilis√©.  De plus, l'utilisation du CPU se d√©sint√®gre avec le temps, et ainsi <br>  Ainsi, l'augmentation de priorit√© se produit quelque peu diff√©remment que d√©crit ci-dessus.  C'est ainsi <br>  appel√© algorithmes de d√©sint√©gration.  Depuis la version 7.1, FreeBSD utilise le planificateur ULE. <br><br>  Enfin, de nombreux planificateurs ont d'autres fonctionnalit√©s.  Par exemple, certains <br>  les planificateurs r√©servent les niveaux les plus √©lev√©s pour le syst√®me d'exploitation et ainsi <br>  de cette fa√ßon, aucun processus utilisateur ne peut obtenir la priorit√© la plus √©lev√©e dans <br>  syst√®me.  Certains syst√®mes vous permettent de donner des conseils pour vous aider. <br>  le planificateur pour d√©finir correctement les priorit√©s.  Par exemple, en utilisant la commande <b>nice</b> <br>  vous pouvez augmenter ou diminuer la priorit√© de la t√¢che et ainsi augmenter ou <br>  r√©duire les chances du programme pour le temps processeur. <br><h3>  MLFQ: R√©sum√© </h3><br>  Nous avons d√©crit une approche de planification appel√©e MLFQ.  Son nom <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est conclu dans le principe du travail - il dispose de plusieurs files d'attente et utilise un retour </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour d√©terminer la priorit√© de la t√¢che. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La forme finale des r√®gles sera la suivante:</font></font><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√®gle 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Si priorit√© (A)&gt; Priorit√© (B), la t√¢che A d√©marrera (B ne sera pas)</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√®gle 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Si priorit√© (A) = priorit√© (B), A&amp;B sont d√©marr√©s √† l'aide de RR</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√®gle 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : lorsqu'une t√¢che entre dans le syst√®me, elle est mise en file d'attente avec la priorit√© la plus √©lev√©e.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√®gle 4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Une fois que la t√¢che a √©puis√© le temps qui lui est allou√© dans la file d'attente actuelle (quel que soit le nombre de fois o√π elle a lib√©r√© le processeur), la priorit√© d'une telle t√¢che diminue (elle descend dans la file d'attente).</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√®gle 5</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Apr√®s une certaine p√©riode de S, transf√©rez toutes les t√¢ches du syst√®me vers la priorit√© la plus √©lev√©e.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MLFQ est int√©ressant pour la raison suivante - au lieu d'exiger des connaissances sur la </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nature de la t√¢che √† l'avance, l'algorithme examine le comportement pass√© de la t√¢che et </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©tablit des priorit√©s en cons√©quence. </font><font style="vertical-align: inherit;">Ainsi, il essaie de s'asseoir sur deux chaises √† la fois - pour atteindre la productivit√© pour les petites t√¢ches (SJF, STCF) et ex√©cuter honn√™tement de longues </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√¢ches de chargement de CPU. </font><font style="vertical-align: inherit;">Par cons√©quent, de nombreux syst√®mes, y compris BSD et leurs d√©riv√©s, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solaris, Windows, Mac, utilisent une certaine forme d'algorithme </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MLFQ </font><font style="vertical-align: inherit;">comme </font><font style="vertical-align: inherit;">planificateur comme base.</font></font><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mat√©riaux suppl√©mentaires: </font></font></h4><br><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manpages.debian.org/stretch/manpages/sched.7.fr.html</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Scheduling_</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (informatique)</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pages.lip6.fr/Julia.Lawall/atc18-bouron.pdf</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.usenix.org/legacy/event/bsdcon03/tech/full_papers/roberson/roberson.pdf</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chebykin.org/freebsd-process-scheduling</font></font></a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr450116/">https://habr.com/ru/post/fr450116/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr450104/index.html">Tr√®s difficile et tr√®s int√©ressant: les communaut√©s informatiques sur TechTrain</a></li>
<li><a href="../fr450106/index.html">Le projet d'organisation de la construction et de la reconstruction dans des conditions exigu√´s sur le chantier SPDS</a></li>
<li><a href="../fr450110/index.html">Brevets de conception: deuxi√®me partie (exemples de Microsoft, Snapchat, Samsung, Netflix, Airbnb, Tinder)</a></li>
<li><a href="../fr450112/index.html">Eh, qu'est-il arriv√© aux valises?! Sur l'exemple d'une valise-scooter enfant ZINC</a></li>
<li><a href="../fr450114/index.html">√Ä propos de ce que nous avons mis en ≈ìuvre dans EWM gr√¢ce √† vos conseils</a></li>
<li><a href="../fr450118/index.html">Diffusez l'√©cran sur plusieurs appareils sur le r√©seau</a></li>
<li><a href="../fr450120/index.html">Rechercher des images similaires, analyser un seul algorithme</a></li>
<li><a href="../fr450122/index.html">Startup Digest: Genetics (janvier - mars 2019)</a></li>
<li><a href="../fr450124/index.html">Configuration des cartes OsmAnd de la couche de carte thermique Strava</a></li>
<li><a href="../fr450126/index.html">La porte d√©rob√©e et le chiffreur Buhtrap ont √©t√© distribu√©s √† l'aide de Yandex.Direct</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>