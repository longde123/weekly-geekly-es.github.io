<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö¨ ‚õΩÔ∏è üíÉ Priorit√§tssperre in .NET ü•û üéß üë©üèæ‚Äçü§ù‚Äçüë©üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jeder Programmierer, der mehr als einen Thread in seinem Programm verwendet, hat Synchronisationsprimitive gefunden. Im .NET-Kontext gibt es viele dav...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Priorit√§tssperre in .NET</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458160/"> Jeder Programmierer, der mehr als einen Thread in seinem Programm verwendet, hat Synchronisationsprimitive gefunden.  Im .NET-Kontext gibt es viele davon, ich werde sie nicht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auflisten</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MSDN</a> hat dies bereits f√ºr mich getan. <br><br>  Ich musste viele dieser Grundelemente verwenden, und sie halfen perfekt, die Aufgaben zu bew√§ltigen.  Aber in diesem Artikel m√∂chte ich √ºber die √ºbliche Sperre in der Desktop-Anwendung sprechen und dar√ºber, wie das neue (zumindest f√ºr mich) Grundelement erschien, das als PriorityLock bezeichnet werden kann. <br><a name="habracut"></a><br><h4>  Das Problem </h4><br>  Bei der Entwicklung einer hoch geladenen Multithread-Anwendung wird irgendwo ein Manager angezeigt, der unz√§hlige Threads verarbeitet.  So war es bei mir.  Und dieser Manager arbeitete und verarbeitete Tonnen von Anfragen aus vielen hundert Threads.  Und alles war in Ordnung mit ihm, aber im √ºblichen Schloss funktionierte. <br><br>  Und dann klickt eines Tages ein Benutzer (zum Beispiel ich) auf eine Schaltfl√§che in der Anwendungsoberfl√§che, der Stream fliegt zum Manager (nat√ºrlich nicht zum UI-Stream) und erwartet einen superfreundlichen Empfang. Stattdessen wird er von Tante Klava vom dichtesten Empfang der dichtesten Klinik mit den Worten "Es ist mir egal" empfangen wer hat dich geleitet.  Ich habe 950 mehr wie du.  Geh und geh zu ihnen.  Es ist mir egal, wie du es herausfindest. "  So funktioniert die Sperre in .NET.  Und alles scheint in Ordnung zu sein, alles wird korrekt ausgef√ºhrt, aber der Benutzer hatte offensichtlich nicht vor, einige Sekunden auf eine Antwort auf seine Aktion zu warten. <br><br>  Hier endet die herzzerrei√üende Geschichte und die L√∂sung des technischen Problems beginnt. <br><br><h4>  L√∂sung </h4><br>  Nachdem ich die Standardprimitive studiert hatte, fand ich keine geeignete Option.  Aus diesem Grund habe ich beschlossen, mein Schloss zu schreiben, das einen Standardeintrag mit hoher Priorit√§t haben w√ºrde.  √úbrigens habe ich nach dem Schreiben auch Nuget studiert und dort nichts Vergleichbares gefunden, obwohl ich vielleicht schlecht gesucht habe. <br><br>  Um ein solches Grundelement (oder kein Grundelement mehr) zu schreiben, ben√∂tigte ich SemaphoreSlim-, SpinWait- und Interlocked-Operationen.  Im Spoiler habe ich die erste Version meines PriorityLock (nur synchroner Code, aber der wichtigste) und Erkl√§rungen daf√ºr zitiert. <br><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text">  In Bezug auf die Synchronisation gibt es keine Entdeckungen, w√§hrend sich jemand im Schloss befindet, k√∂nnen andere nicht eintreten.  Wenn eine hohe Priorit√§t erreicht wurde, wird sie von allen, die auf eine niedrige Priorit√§t warten, vorangetrieben. <br><br>  LockMgr-Klasse, es wird vorgeschlagen, damit in Ihrem Code zu arbeiten.  Er ist das eigentliche Objekt der Synchronisation.  Erstellt Locker- und HighLocker-Objekte, enth√§lt Semaphoren, SpinWaits, Z√§hler, die in den kritischen Abschnitt gelangen m√∂chten, den aktuellen Thread und den Rekursionsz√§hler. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">LockMgr</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> HighCount; <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LowCount; <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> Thread CurThread; <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> RecursionCount; <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> SemaphoreSlim Low = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SemaphoreSlim(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> SemaphoreSlim High = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SemaphoreSlim(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> SpinWait LowSpin = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpinWait(); <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> SpinWait HighSpin = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpinWait(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Locker </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HighLock</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HighLocker(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Locker </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Lock</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> high = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locker(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, high); } }</code> </pre> <br>  Die Locker-Klasse implementiert die IDisposable-Schnittstelle.  Um die Rekursion beim Erfassen einer Sperre zu implementieren, speichern wir die ID des Streams und √ºberpr√ºfen sie dann.  Abh√§ngig von der Priorit√§t sagen wir im Falle einer hohen Priorit√§t sofort, dass wir gekommen sind (erh√∂hen Sie den HighCount-Z√§hler), holen Sie sich das High-Semaphor und warten Sie (falls erforderlich), um die Sperre von der niedrigen Priorit√§t zu l√∂sen. Danach sind wir bereit, die Sperre zu erhalten.  Im Falle einer niedrigen Priorit√§t erh√§lt das Semaphor mit niedriger Priorit√§t, dann warten wir auf den Abschluss aller Fl√ºsse mit hoher Priorit√§t und erh√∂hen den LowCount, indem wir das Semaphor mit hoher Priorit√§t f√ºr eine Weile nehmen. <br><br>  Es ist erw√§hnenswert, dass die Bedeutung von HighCount und LowCount unterschiedlich ist. HighCount zeigt die Anzahl der Priorit√§ts-Threads an, die zur Sperre gekommen sind, wenn LowCount nur bedeutet, dass der Thread (eine einzelne) mit niedriger Priorit√§t in die Sperre gegangen ist. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Locker</span></span> : <span class="hljs-title"><span class="hljs-title">IDisposable</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _isHigh; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> LockMgr _mgr; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Locker</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">LockMgr mgr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isHigh = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span></span><span class="hljs-function">)</span></span> { _isHigh = isHigh; _mgr = mgr; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mgr.CurThread == Thread.CurrentThread) { mgr.RecursionCount++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isHigh) { Interlocked.Increment(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> mgr.HighCount); mgr.High.Wait(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Interlocked.CompareExchange(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> mgr.LowCount, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span>) mgr.HighSpin.SpinOnce(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { mgr.Low.Wait(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (Interlocked.CompareExchange(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> mgr.HighCount, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span>) mgr.LowSpin.SpinOnce(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { mgr.High.Wait(); Interlocked.Increment(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> mgr.LowCount); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { mgr.High.Release(); } } mgr.CurThread = Thread.CurrentThread; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_mgr.RecursionCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { _mgr.RecursionCount--; _mgr = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } _mgr.RecursionCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; _mgr.CurThread = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isHigh) { _mgr.High.Release(); Interlocked.Decrement(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> _mgr.HighCount); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _mgr.Low.Release(); Interlocked.Decrement(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> _mgr.LowCount); } _mgr = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HighLocker</span></span> : <span class="hljs-title"><span class="hljs-title">Locker</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HighLocker</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">LockMgr mgr</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mgr, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span></span><span class="hljs-function">)</span></span> { } }</code> </pre><br></div></div><br>  Die Verwendung des LockMgr-Klassenobjekts war sehr pr√§zise.  Das Beispiel zeigt deutlich die M√∂glichkeit, _lockMgr innerhalb des kritischen Abschnitts wiederzuverwenden, w√§hrend die Priorit√§t nicht mehr wichtig ist. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PriorityLock.LockMgr _lockMgr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PriorityLock.LockMgr(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LowPriority</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (_lockMgr.Lock()) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (_lockMgr.HighLock()) { <span class="hljs-comment"><span class="hljs-comment">// your code } } } public void HighPriority() { using (_lockMgr.HighLock()) { using (_lockMgr.Lock()) { // your code } } }</span></span></code> </pre><br>  Also habe ich mein Problem gel√∂st.  Die Verarbeitung von Benutzeraktionen begann mit hoher Priorit√§t, niemand wurde verletzt, alle gewannen. <br><br><h4>  Asynchronit√§t </h4><br>  Da die Objekte der SemaphoreSlim-Klasse asynchrones Warten unterst√ºtzen, habe ich mir diese M√∂glichkeit auch hinzugef√ºgt.  Der Code unterscheidet sich minimal und am Ende des Artikels werde ich einen Link zum Quellcode bereitstellen. <br><br>  Hierbei ist zu beachten, dass die Task in keiner Weise an den Thread angeh√§ngt ist. Daher kann die asynchrone Wiederverwendung der Sperre nicht auf √§hnliche Weise implementiert werden.  Dar√ºber hinaus garantiert die von MSDN beschriebene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Task.CurrentId-</a> Eigenschaft nichts.  Hier endeten meine Optionen. <br><br>  Auf der Suche nach einer L√∂sung bin ich auf das Projekt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NeoSmart.AsyncLock gesto√üen</a> , in dessen Beschreibung die Unterst√ºtzung f√ºr die Wiederverwendung der asynchronen Sperre angegeben wurde.  Technisch gesehen funktioniert die Wiederverwendung.  Leider ist das Schloss selbst kein Schloss.  Seien Sie vorsichtig, wenn Sie dieses Paket verwenden, beachten Sie, dass es NICHT richtig funktioniert! <br><br><h4>  Fazit </h4><br>  Das Ergebnis ist eine Klasse, die synchrone Operationen mit Wiederverwendung und asynchrone Operationen ohne Wiederverwendung unterst√ºtzt.  Asynchrone und synchrone Operationen k√∂nnen nebeneinander verwendet werden, aber nicht zusammen!  Alles aufgrund der mangelnden Unterst√ºtzung f√ºr die Wiederverwendung der asynchronen Option. <br><br>  Ich hoffe, ich bin mit solchen Problemen nicht allein und meine L√∂sung wird jemandem n√ºtzlich sein.  Ich habe die Bibliothek auf Github und Nuget gepostet. <br><br>  Es gibt Tests im Repository, die den Zustand von PriorityLock anzeigen.  Im asynchronen Teil dieses Tests wurde NeoSmart.AsyncLock getestet, und der Test ist fehlgeschlagen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zum Nuget</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github Link</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de458160/">https://habr.com/ru/post/de458160/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de458144/index.html">Nachrichten der Woche: Raspberry Pi 4 zum Verkauf, Internet bei der Unified State Examination, Roskomnadzor und VPN-Dienste, ein neuronales Netzwerk entfernt Menschen</a></li>
<li><a href="../de458146/index.html">Open Source-Kommunikationsbuchhaltungsanwendung in der Region</a></li>
<li><a href="../de458148/index.html">Retro-Elektronik. Smartwatch aus den 80ern</a></li>
<li><a href="../de458156/index.html">Benchmarking von PostgreSQL unter FreeBSD, CentOS, Ubuntu Debian und openSUSE</a></li>
<li><a href="../de458158/index.html">Auf der Suche nach Asteroiden - Hubble Asteroid Hunter Projekt</a></li>
<li><a href="../de458172/index.html">Methoden zum Koppeln elektrischer Verbindungen beim Verfolgen von Differentialpaaren auf Leiterplatten</a></li>
<li><a href="../de458176/index.html">Die Exaflop-Barriere wird 2021 √ºberwunden</a></li>
<li><a href="../de458180/index.html">Kea-basierter Failover-DHCP-Server</a></li>
<li><a href="../de458182/index.html">Wir lesen VKontakte √ºber RSS</a></li>
<li><a href="../de458184/index.html">Haxe und PHP: statische Eingabe, Pfeilfunktionen, Metaprogrammierung und vieles mehr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>