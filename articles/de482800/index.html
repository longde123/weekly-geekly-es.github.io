<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✴️ 🗃️ 👩🏾‍🏫 Meine Suche nach dem physischen Bedienfeld eines Smart Homes 🍛 🤙🏽 🧑🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor langer Zeit hatte ich die Idee, ein Bedienfeld neben der Eingangstür in der Wohnung / im Haus zu installieren. 


 Es gibt verschiedene Möglichkei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Meine Suche nach dem physischen Bedienfeld eines Smart Homes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482800/"><p>  Vor langer Zeit hatte ich die Idee, ein Bedienfeld neben der Eingangstür in der Wohnung / im Haus zu installieren. </p><br><p>  Es gibt verschiedene Möglichkeiten, diese Idee umzusetzen: </p><br><ul><li>  <abbr title="Speicherprogrammierbare Steuerung">PLC</abbr> Operator Touch Panel </li><li>  Tablette; </li><li>  Touch-Display an einen Mikrocomputer angeschlossen. </li></ul><br><p><img src="https://habrastorage.org/webt/fl/nj/ad/flnjadfhyyyzg5zt5aesfig8fyg.gif"><br>  Eine zusätzliche Anforderung, die die Auswahl des Geräts sofort einschränkte: Das Bedienfeld sollte automatisch das Bild der externen Kamera anzeigen, wenn der Bewegungssensor ausgelöst wird (und nur bei Anwesenheit von Personen zu Hause). </p><a name="habracut"></a><br><h2 id="1vybor-devaysa">  1. Wahl eines Gerätes </h2><br><p>  Nachdem die Anforderungen klar formuliert waren, verschwanden iPads, die ich nicht von außen steuern konnte, sofort (schade, da sie über eine große Auswahl an <a href="https://nextion.tech/" rel="nofollow">Wandhalterungen</a> verfügen) und ein <abbr title="Mensch-Maschine-Schnittstelle">Bediengerät</abbr> wie <a href="https://nextion.tech/" rel="nofollow">Nextion</a> , da das Kamerabild nicht auf ihnen angezeigt werden kann. </p><br><p><img src="https://habrastorage.org/webt/n2/xs/od/n2xsodz7s1ciurk5uvqcmuojshq.jpeg"><br>  <em>Eine der Optionen für das iPad Wallmount von Loxone</em> </p><br><p>  Und obwohl jetzt spezielle Geräte auf dem Markt sind, wie zum Beispiel: </p><br><ul><li>  <a href="https://store.google.com/us/product/google_nest_hub%3Fhl%3Den-US" rel="nofollow">Google Nest Hub</a> </li><li>  <a href="https://www.facebook.com/PortalFromFacebook/" rel="nofollow">Portal von Facebook</a> </li><li>  <a href="https://www.amazon.com/Echo-Show-8/dp/B07PF1Y28C" rel="nofollow">Amazon Echo Show</a> </li></ul><br><p>  Das Problem mit der externen Steuerung dieser Geräte bleibt jedoch meines Wissens ebenfalls bestehen und ist nicht vollständig gelöst. </p><br><p>  Neben dem Programmteil des Panels ist für mich auch das Fehlen einer „Kollektivfarm“ wichtig, wenn dieses Panel physisch an der Wand befestigt wird. Dies bedeutet, dass am Installationsort dieses Panels mindestens ein Kabel für die Stromversorgung und eine ausreichend große Anschlussdose in der Wand zum Verstecken angeschlossen werden Platzierung des Netzteils. </p><br><p><img src="https://habrastorage.org/webt/ti/sp/4n/tisp4n5xa4ac3nu5sgelwf5rz3k.jpeg"><br>  <em>Montagebox</em> </p><br><h2 id="2-vliyanie-chyornoy-pyatnicy-na-vybor">  2. Der Einfluss von „Black Friday“ auf die Wahl </h2><br><p>  Als ich mich am Vorabend des Black Friday 2019 wieder an meine Idee erinnerte, entschied ich mich, etwas Günstiges zum Testen zu kaufen.  Ich wollte mich nicht mit dem Löten und Anschließen des Touchpanels an den Raspberry Pi befassen, und die Wahl fiel auf das <a href="https://www.amazon.com/gp/product/B07FKR6KXF/" rel="nofollow">Amazon Fire 7-Tablet</a> für 29,99 USD (ca. 1.700 00).  Ich war der Meinung, dass es in der Baguette-Werkstatt möglich sein würde, den passenden Rahmen mit der richtigen Größe herzustellen, um das Tablet an der Wand zu platzieren. </p><br><p><img src="https://habrastorage.org/webt/bv/nj/s6/bvnjs6u-n2tqmvuwcra0okxawhg.jpeg"><br>  <em>Team Win-Wiederherstellungsprojekt (TWRP) auf Amazon Fire 7-Tablet</em> </p><br><p>  Weiter gelang es mir, den Fire 7 Tablet Loader programmgesteuert zu entsperren und TWRP ohne physische Demontage zu installieren. </p><br><p><img src="https://habrastorage.org/webt/b8/ga/pe/b8gape_ziak4jx0ofkqsmini_re.png"><br>  <em>Beim Freischalten von Fire 7 (2019, Mustang)</em> </p><br><p>  Ich möchte darauf hinweisen, dass die Anweisung anfangs einschüchternd wirkte, infolgedessen aber alles dort recht transparent beschrieben wird.  Da ich ursprünglich keine Pläne hatte, <a href="https://ru.wikipedia.org/wiki/Fire_OS" rel="nofollow">Fire OS zu verwenden</a> , installierte ich eine saubere <a href="https://ru.wikipedia.org/wiki/LineageOS" rel="nofollow">LineageOS-Android-Distribution</a> ohne zusätzliche Anwendungen und ohne Google-Dienste, dh ohne GApps. </p><br><p><img src="https://habrastorage.org/webt/dt/f7/if/dtf7ifsb8hba6uoep5wyvp6cpym.jpeg"><br>  <em>LineageOS auf Amazon Fire 7 Tablet (2019, Mustang)</em> </p><br><p>  Ich wollte ein sauberes Gerät mit einem Minimum an Programmen, das an keinen Account gebunden ist. </p><br><h2 id="3-udalennoe-upravlenie-cherez-adb">  3. Fernbedienung über ADB </h2><br><p>  Da ich ein verwurzeltes (mit vollem Zugriff) Android-Tablet in meinen Händen hatte, sollte es keine Probleme mit der Auswahl der Programme geben. <br>  Ich wollte jedoch einige Standardwerkzeuge verwenden und entschied mich daher für <abbr title="Android Debug Bridge">ADB</abbr> .  Dies funktioniert auf allen Android-Geräten, auf denen diese Funktionalität vom Hersteller nicht absichtlich gesperrt wurde. Klicken Sie einfach mehrmals auf den Menüpunkt "Build-Nummer" und ein neuer Menüpunkt "Für Entwickler" wird geöffnet, in dem alle Einstellungen vorgenommen werden. </p><br><p>  Da ich den Videostream von der IP-Kamera abspielen musste (in meinem Fall <abbr title="Echtzeit-Streaming-Protokoll">RTSP</abbr> , dafür brauchte ich einen <a href="https://yandex.ru/search/%3Ftext%3Dvlc%2520apk%26lr%3D50" rel="nofollow">VLC-Player</a> und auch <a href="https://yandex.ru/search/%3Ftext%3Dchrome%2520apk%26lr%3D50" rel="nofollow">Google Chrome</a> für die Vollbildanzeige des Smart Home Panels. Um die notwendigen Manipulationen mit dem Tablet vom Terminal auf dem Computer aus vorzunehmen, Führen Sie die folgenden Befehle aus. </p><br><p> Installieren Sie die Anwendung über die Befehlszeile auf dem Tablet: <br> <code>adb install VLC.apk</code> <br>  Ein- / Ausschalten des Tablets über die Befehlszeile: <br> <code>adb shell input keyevent KEYCODE_POWER</code> <br>  Starten Sie die Übertragung von der Kamera über die Befehlszeile: <br> <code>adb shell am start -a android.intent.action.VIEW -d rtsp://login:pass@192.168.15.21:88/videoMain -t video/mp4</code> <br>  Starten Sie über die Befehlszeile das Smart Home-Kontrollfeld im Browser: <br> <code>adb shell am start -a android.intent.action.VIEW -d http://192.168.15.10:8123/lovelace/default_view</code> </p> <br><p>  Um richtig zu funktionieren, habe ich die Einstellungen für den erweiterten Bildschirm vorgenommen - wenn die Bedienfelder vollständig ausgeblendet sind. </p><br><p><img src="https://habrastorage.org/webt/rc/rb/oc/rcrbocie4yuknkqszuwg_6pahzy.png"><br>  <em>Konfigurieren Sie LineageOS</em> </p><br><p>  Und natürlich habe ich die Bildschirmsperre deaktiviert - ohne diese ist es schwierig, etwas zu automatisieren. </p><br><p><img src="https://habrastorage.org/webt/oj/x0/xv/ojx0xval66av7ezk4njg2ngwmba.png"><br>  <em>Konfigurieren Sie LineageOS</em> </p><br><p>  Hier ist ein <a href="https://gist.github.com/mcfrojd/9e6875e1db5c089b1e3ddeb7dba0f304" rel="nofollow">kleiner Life-Hack,</a> da Sie eine Liste aller installierten Anwendungen und Befehle zum Starten finden.  Melden Sie sich zunächst bei der Konsole an: <br> <code>adb shell</code> <br>  und dann mache: <br> <code>pm list packages | sed -e "s/package://" | while read x; do cmd package resolve-activity --brief $x | tail -n 1 | grep -v "No activity found"; done</code> <br>  Dies listet alle Programme auf: </p><br><p><img src="https://habrastorage.org/webt/_l/3z/21/_l3z21t2uwufktefq52xnglcix8.png"><br>  <em>Ausführen eines Befehls zum Anzeigen aller Programme auf dem Gerät</em> </p><br><p>  Die erhaltenen Informationen können nach eigenem Ermessen verwendet werden und beispielsweise die Uhr starten: <br> <code>adb shell am start -a android.intent.action.VIEW -d -n com.android.deskclock/.DeskClock</code> </p> <br><h2 id="4-home-assistant">  4. Home Assistant </h2><br><p>  All dies war nur eine Vorbereitung für die Automatisierung der Anzeige der Kamera und des Software-Bedienfelds auf dem Tablet-Bildschirm.  Ich habe zwei Kameraoptionen über der Haustür an verschiedenen Orten: </p><br><ol><li>  Hikvision DS-2CD2463G0-IW Kamera mit integriertem Bewegungssensor. </li><li>  Die Dome-Kamera ist mit einem Mikrowellen-Bewegungssensor gekoppelt, der über der abgehängten Decke des Zugangskorridors verborgen und mit dem <a href="https://www.ab-log.ru/smart-house/ethernet/megad-2561" rel="nofollow">MegaD-2561-</a> Multifunktions- <a href="https://www.ab-log.ru/smart-house/ethernet/megad-2561" rel="nofollow">Ethernet-Controller verbunden ist</a> .  Der Bewegungssensor ist mit dem Auge nicht sichtbar, funktioniert aber.  Die Kamera ist eine gewöhnliche, nicht versteckte Installation. </li></ol><br><p>  Zuerst müssen Sie ADB über das Netzwerk aktivieren: </p><br><p><img src="https://habrastorage.org/webt/rr/ty/vh/rrtyvhhrwwzteayiwjwqvsuwwes.png"><br>  <em>Konfigurieren Sie LineageOS</em> </p><br><p>  Danach ist das Tablet bereit für die Fernbedienung. </p><br><p>  Da ich <a href="https://www.home-assistant.io/hassio/" rel="nofollow">Hass.io verwende</a> , habe ich das spezielle <a href="https://github.com/hassio-addons/addon-adb" rel="nofollow">ADB-</a> Add-On <a href="https://github.com/hassio-addons/addon-adb" rel="nofollow">- Android Debug Bridge - verwendet</a> , mit dem Sie jedes Gerät steuern können, das die ADB-Steuerung unterstützt.  In der Konfiguration für dieses Add-On gab er sein einziges Gerät an: </p><br><pre> <code class="plaintext hljs">{ "devices": [ "192.168.15.24" ], "reconnect_timeout": 90 }</code> </pre> <br><p>  Danach ist es etwas seltsam, aber alle diese Geräte werden im Home Assistant als <code>androidtv</code> . </p><br><div class="spoiler">  <b class="spoiler_title">configuration.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">media_player: - platform: androidtv name: Amazon Fire 7 host: 192.168.15.24 adb_server_ip: 127.0.0.1</code> </pre> </div></div><br><p>  Der letzte Schritt besteht darin, die Automatisierung zu registrieren, die die Kamera auf dem Bildschirm des Tablets anzeigt, dann die Anwendung schließt und dann das Home Assistant-Bedienfeld anzeigt und nach einer Weile auch schließt: </p><br><div class="spoiler">  <b class="spoiler_title">automations.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">################################################### # # #  android  # # # ################################################### - alias: Amazon Fire 7 Mikhail trigger: - platform: state entity_id: binary_sensor.kamera_u_liftov_pir_alarm from: 'off' to: 'on' condition: - condition: state entity_id: device_tracker.7c_xx_5c_b5_xx_1b # state: 'home' action: - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_POWER - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: am start -a android.intent.action.VIEW -d rtsp://login:pass@192.168.15.21:88/videoMain -t video/mp4 - delay: '00:00:30' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_APP_SWITCH - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent DEL - delay: '00:00:01' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: am start -a android.intent.action.VIEW -d http://192.168.15.10:8123/lovelace/default_view - delay: '00:00:10' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent KEYCODE_APP_SWITCH - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: input keyevent DEL - delay: '00:00:01' - service: androidtv.adb_command data: entity_id: media_player.amazon_fire_7 command: HOME</code> </pre> </div></div><br><p>  Das resultierende Ergebnis ist noch nicht an der Tür, sondern am Arbeitsplatz: </p><br><p><img src="https://habrastorage.org/webt/jt/jk/32/jtjk32ag1ty-nawvtkwzeylkxuc.jpeg"><br>  <em>Rückansicht</em> </p><br><p>  Ich habe das Bedienfeld auch in Aktion entfernt, aber ich konnte nicht herausfinden, wie alle persönlichen Daten im Video abgedeckt werden sollen, und es sind viele herausgekommen, sodass ich nur die Rückansicht mitbringe :) </p><br><h2 id="itog">  Zusammenfassung </h2><br><p>  Es war möglich, ein physisches Bedienfeld mit den angegebenen Merkmalen zu erstellen.  Von den Hauptkosten - nur ein preiswertes Tablet.  Es bleibt das Problem mit einer hochwertigen Installation am Einsatzort zu lösen, dies ist jedoch bereits ein eher konstruktives Thema. </p><br><p>  <a href="https://www.facebook.com/mikhail.shardin" rel="nofollow">Gepostet</a> von: <a href="https://www.facebook.com/mikhail.shardin" rel="nofollow">Mikhail Shardin</a> , <br>  4. Januar 2020 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de482800/">https://habr.com/ru/post/de482800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de482786/index.html">Ungelöstes Rätsel</a></li>
<li><a href="../de482790/index.html">Vergessen Sie die homomorphe Verschlüsselung: Jetzt haben wir eine funktionale Verschlüsselung</a></li>
<li><a href="../de482792/index.html">ITER-Projekt im Jahr 2019</a></li>
<li><a href="../de482794/index.html">Neuronale Netze. Wo geht das alles hin?</a></li>
<li><a href="../de482798/index.html">Sehen Sie den Wald hinter den Bäumen</a></li>
<li><a href="../de482802/index.html">Remote-Einbindung von Mikrotik-Skripten aus Telegram 2.0</a></li>
<li><a href="../de482804/index.html">Java: Reduzieren Sie mehrzeilige Protokolle mithilfe von Spring and Logback oder Log4j2 in ein einzeiliges Protokoll</a></li>
<li><a href="../de482806/index.html">Die Propaganda des totalitären Regimes, des Antisemitismus und der Homophobie im Lehrbuch über die Programmierung von 2019? - Das ist möglich</a></li>
<li><a href="../de482810/index.html">Können Sie dem medizinischen Rat von Bots vertrauen? Ärzte sind sich noch nicht sicher.</a></li>
<li><a href="../de482812/index.html">Mathematiker haben einen Durchbruch in der Erforschung des „gefährlichen“ Problems erzielt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>