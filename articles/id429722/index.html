<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈲 🗂️ 👨🏿‍🔬 Bagaimana kami melakukan pembayaran melalui Google Pay di Yandex.Cash [diperbarui] 🚌 👋🏿 👽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika Google Pay pertama kali muncul di Rusia, saya memulai akun, menambahkan kartu di sana dan menyadari bahwa saya tidak bisa berbuat apa-apa lagi....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana kami melakukan pembayaran melalui Google Pay di Yandex.Cash [diperbarui]</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yamoney/blog/429722/"><p><img src="https://habrastorage.org/webt/6k/db/_a/6kdb_a7azfmyavd09vcd4zgd0sy.gif"></p><br><p>  Ketika Google Pay pertama kali muncul di Rusia, saya memulai akun, menambahkan kartu di sana dan menyadari bahwa saya tidak bisa berbuat apa-apa lagi.  Tidak ada NFC di ponsel saya, tidak ada yang harus dibayar di Internet - yah, oke, itu tidak mengganggu saya.  Pada akhirnya, selalu mungkin untuk mendorong angka dari kartu dengan tangan Anda atau menariknya dari penyimpanan kata sandi browser. </p><br><p>  Kemudian saya menyaksikan betapa berbedanya orang-orang yang berbaris di depan saya dengan smartphone;  kemudian saya melihat iklan dan diskon untuk menggunakan Google Pay di mana-mana, tetapi masih tidak bisa memanfaatkannya - saya masih menggunakan telepon tanpa NFC. </p><br><p>  Dan sekarang sudah tiba.  Sekarang saya dapat membayar melalui Google Pay dari perangkat apa pun di situs yang terhubung ke Yandex.Cash (dan jumlahnya cukup banyak).  Saya akan memberi tahu Anda bagaimana itu terjadi dan masalah teknis apa yang harus dipecahkan oleh pengembang kami;  ada banyak hal menarik di bagian depan dan belakang. </p><a name="habracut"></a><br><h2 id="prosto-dobav-api">  Cukup tambahkan API </h2><br><p>  "Pengembang kawan, apa yang begitu sulit?" <br>  - Ya, kami baru saja menambahkan perpustakaan dari Google di dermaga mereka. </p><br><p>  Ini adalah menit pertama percakapan saya tentang menambahkan Google Pay dengan pengembang kasir (termasuk 55 detik keheningan yang canggung).  Tetapi kemudian saya tidak terkejut, dan kami menemukan beberapa hal menarik. </p><br><h2 id="google-pay-menyaet-process-oplaty-kartoy">  Google Pay mengubah proses pembayaran kartu </h2><br><p>  Sekarang melalui Kasir Anda dapat membayar dengan kartu kredit apa pun, bahkan di luar negeri.  Seperti halnya pembayaran kartu online, itu tidak selalu nyaman - kadang-kadang Anda harus pergi ke dompet Anda, mengarahkan nomor dalam gelap dan memeriksa bahwa tidak ada yang kacau di mana saja.  Untuk membuat hidup lebih mudah, Anda dapat masuk ke Yandex dan membayar dengan kartu yang terikat. </p><br><p>  Kami menerapkan skema di mana pembayaran kartu melalui Kasir menjadi satu dan didokumentasikan dengan baik.  Jika Anda menghapus semua seluk-beluk nuansa perutean dan keamanan, maka skema tersebut terlihat seperti ini: </p><br><ol><li>  Pengguna memilih barang, memesan dan beralih ke formulir pembayaran Yandex.Cash.  Di sana Anda dapat memasukkan detail kartu apa pun atau masuk ke Yandex untuk melihat juga kartu yang ditautkan. </li><li>  Data pada metode pembayaran yang dipilih dikirim ke backend untuk tokenization.  Browser menerima token kartu dan mencoba menggunakannya untuk pembayaran. </li><li>  Jika semuanya beres, backend meminta bank untuk memblokir jumlah pada kartu, melakukan pembayaran dan mengembalikan statusnya.  Berdasarkan hal ini, browser mengalihkan ke halaman sukses atau menampilkan pesan kesalahan. </li></ol><br><p>  Pada tahap yang berbeda, ada kondisi yang berbeda untuk menghentikan proses - token yang tidak valid, mengosongkan akun atau mematikan Internet - tetapi logikanya tetap sama.  Dan dalam hal ini, Anda dapat sepenuhnya merender halaman di server, tetapi saya akan membahas kesulitan dengan ini di bawah. </p><br><p>  Untuk Google Pay, Anda memerlukan beberapa langkah perantara. </p><br><p> Pertama, antara memilih metode pembayaran dan tokenization ada panggilan ke Google API - ini diperlukan untuk memeriksa apakah perangkat mendukung pembayaran melalui Google Pay.  Setelah mengklik tombol "Bayar", antarmuka web Google Pay muncul, di mana pengguna login, memilih salah satu kartu yang ditambahkan atau memasukkan rincian kartu baru. </p><br><p>  Kedua, ada lingkaran keamanan lain dari Google.  Browser tidak menerima detail secara langsung - browser menerima kriptogram, yang, pada gilirannya, pergi ke backend untuk tokenization.  Itu didekripsi dengan kunci dari Google, dan kemudian lihat langkah 3. </p><br><p>  Secara alami, setiap langkah tambahan (bahkan secara ketat mengikuti dokumentasi) adalah pengembangan tambahan dan waktu pengujian.  Semakin menyenangkan bahwa pedagang tidak perlu melakukan apa pun secara praktis - mudah menghubungkan pembayaran melalui Google Pay ke situs mana pun yang memiliki formulir pembayaran Yandex.Cash.  Detail ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di situs web Kasir</a> . </p><br><p>  Sebuah cerita menarik juga ditemukan di frontend - ini adalah tentang pencarian kreatif, bukti dan UX. </p><br><h2 id="knopka-google-pay-na-platyozhnoy-stranice">  Tombol Google Pay pada halaman pembayaran </h2><br><p>  Halaman pembayaran Cashier sepenuhnya dirakit di server - ia menerima data dari backend, menjalankannya melalui mesin templat dan memberikan kode HTML, CSS, dan JavaScript yang siap digunakan kepada browser.  Jadi halaman diambil lebih cepat - ketika semua data siap, dan semua konten dinamis bekerja melalui JS pada klien. </p><br><p>  Kesulitannya adalah hanya mungkin untuk menentukan apakah Akun Google klien telah menambahkan sarana pembayaran melalui perpustakaan klien Google.  Oleh karena itu, logika yang menarik bagian dari halaman dengan tombol pembayaran harus diterapkan pada klien.  Solusi teknis ditemukan setelah pencarian singkat. </p><br><p>  Di backend, Anda perlu memeriksa apakah toko telah mengaktifkan pembayaran melalui Google Pay - jika demikian, maka di mesin templat kami menambahkan tautan CDN ke pustaka Google Pay ke halaman dan memberi peramban tanda bahwa Anda perlu mengunduh data menggunakan metode pembayaran ini. </p><br><p>  Pada klien, Anda perlu memeriksa apakah ada tanda yang diperlukan - dan jika demikian, panggil metode verifikasi apakah pembayaran melalui Google Pay didukung pada perangkat ini.  Jika semuanya baik-baik saja, maka kami menunjukkan kepada pengguna tombol lain.  Akibatnya, halaman tersebut masih ditampilkan di server, tetapi sekarang kami membuat beberapa permintaan tambahan ke layanan lain. </p><br><p>  Ternyata layanan ini terkadang tidak merespons. </p><br><h2 id="celyy-mesyac-ni-edinogo-razryva">  Sebulan penuh, tidak ada istirahat! </h2><br><p>  Kisah ini adalah tentang departemen UX kami - bagaimana mereka mencari cara untuk menggambar tombol Google Pay, tetapi pada saat yang sama tidak mengganggu pengguna yang berinteraksi dengan formulir. </p><br><p>  Pikiran pertama adalah untuk menggantung twist di seluruh halaman dan menunggu jawaban dari Google. <br><img src="https://habrastorage.org/webt/3-/s4/qq/3-s4qqcc8uhnu3ixhm5zauw5mvi.gif"></p><br><p>  Tetapi jika Anda menunggu respons dari Google, maka tidak ada gunanya rendering server (pengguna masih tidak dapat berinteraksi dengan halaman sampai kami mendapatkan data pada klien), dan kami mulai bergantung pada layanan pihak ketiga.  Jika ada masalah dengan Internet, Google diblokir atau tidak dapat diakses, maka pengguna tidak akan dapat menggunakan halaman, meskipun tidak ada yang mencegahnya dari memasukkan nomor kartu. </p><br><p>  Desainer membuat beberapa opsi lagi, tetapi karena berbagai alasan mereka tidak cocok, dan persyaratan untuk tata letak secara bertahap berubah. <br><img src="https://habrastorage.org/webt/ze/v1/h2/zev1h24kwsmdjprhdvfal-wrruc.gif"><br>  <em>Waktu pendekatan</em> </p><br><p><img src="https://habrastorage.org/webt/ex/e9/lv/exe9lvhkdomxaje4sjrbzfi8v84.gif"><br>  <em>Pendekatan dua</em> </p><br><p>  Akibatnya, ada tiga persyaratan utama: </p><br><ol><li>  Pengguna harus dapat membayar terlepas dari apakah layanan pihak ketiga akan merespons dan berapa lama dia akan melakukannya.  Layanan seharusnya tidak menjadi lebih lambat. </li><li>  Perlu skalabilitas.  Ketika pembayaran dari Apple atau Samsung ditambahkan, ini seharusnya tidak mempengaruhi kecepatan dan kemampuan untuk bekerja dengan bidang input kartu bank. </li><li>  Solusinya seharusnya tidak memiliki terlalu banyak animasi / dinamika.  Jika pengguna mulai memasukkan data, dan saat ini tombol Google Pay memuat dan sesuatu berubah, pengguna mungkin tidak mengerti apa yang terjadi dan mengapa. </li></ol><br><p>  Berdasarkan mereka, desain akhir dari bentuk pembayaran muncul.  Dia diatur oleh semua kriteria - scalable, tidak memblokir input kartu bank, dan ketika menerima data kartu bank tidak ada animasi yang tidak perlu. </p><br><p><img src="https://habrastorage.org/webt/6k/db/_a/6kdb_a7azfmyavd09vcd4zgd0sy.gif"></p><br><h2 id="a-chto-tam-so-smartfonami-bez-nfc">  Bagaimana dengan smartphone tanpa NFC? </h2><br><p>  Untuk pembayaran melalui Google Pay di toko offline, NFC masih diperlukan, tidak ada opsi. </p><br><p>  NFC tidak diperlukan secara online.  Semua browser desktop berfungsi baik dengan Google Pay.  Ada beberapa nuansa dengan ponsel cerdas - Google memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">beberapa persyaratan</a> untuk perangkat dengan Google Pay.  Berikut adalah daftar yang tidak diizinkan: </p><br><ol><li>  Gunakan telepon dengan Android 4.4.3 atau yang lebih lama; </li><li>  Instal versi Android untuk pengembang; </li><li>  Lakukan root, buka kunci bootloader atau instal firmware tidak resmi; </li><li>  Gunakan Samsung MyKnox; </li><li>  Gunakan perangkat Google yang tidak diverifikasi. </li></ol><br><p>  Dalam kasus lain, pembayaran melalui Google Pay di Internet akan berfungsi dengan baik - tetapi, mungkin, tidak ada yang tahu tentang semua pengecualian. </p><br><h3 id="surovye-biznes-vyvody-esli-vy-uzhe-polzuetes-yandekskassoy">  Kesimpulan bisnis yang keras jika Anda sudah menggunakan Yandex.Cash </h3><br><p>  Untuk mengaktifkan penerimaan pembayaran melalui Google Pay, tulis ke manajer di akun Anda.  Setelah beberapa saat, tombol akan muncul dengan sendirinya, dan Anda dapat menghabiskan waktu pengembang untuk hal lain. </p><br><p>  Konversi akan meningkat - menurut sebuah studi oleh Mediascope, 36,3% pengguna membayar non-kontak.  Penelitian Yandex.Money sendiri menunjukkan bahwa 43% pemegang kartu menggunakannya untuk pembayaran tanpa kontak.  Selain itu, ada beberapa orang dengan Android di antara pengguna Android - mereka tidak perlu memasukkan kode 3-D Secure. <br></p><br><h3 id="surovye-biznes-vyvody-esli-vy-eschyo-ne-polzuetes-yandekskassoy">  Kesimpulan bisnis yang keras, jika Anda belum menggunakan Yandex.Cash </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Terhubung dengan cepat</a> , mengapa menarik sesuatu? </p><br><p>  <strong>Kisah-kisah lain tentang apa yang baik di Kassa</strong> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sepuluh orang di 90 ribu situs: bagaimana tidak menjadi gila</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Saya lelah menerima pembayaran melalui WebView.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apa yang harus saya lakukan</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana kami melindungi ulasan, pembelian, dan perjalanan dari penipu</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429722/">https://habr.com/ru/post/id429722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429712/index.html">Pengantar React Hooks</a></li>
<li><a href="../id429714/index.html">Lebih mudah daripada MQTT? MQTT / UDP</a></li>
<li><a href="../id429716/index.html">5 game PC terbaik untuk belajar bahasa Inggris</a></li>
<li><a href="../id429718/index.html">Saya ingin semuanya sekaligus! Kami mempelajari RAM HyperX Predator DDR4 RGB, dengan frekuensi 4000 MHz</a></li>
<li><a href="../id429720/index.html">Bagaimana cara pengembang pemula untuk bertahan dalam sebuah wawancara dan tidak menjadi gila di tempat kerja</a></li>
<li><a href="../id429724/index.html">Ulasan yang bermanfaat. 28 buku yang memengaruhi pemikiran saya, mengilhami, atau menjadi lebih baik</a></li>
<li><a href="../id429728/index.html">Arsitektur MVI modern berdasarkan pada Kotlin</a></li>
<li><a href="../id429732/index.html">Anda akan membenci ini atau dongeng tentang bagaimana kode yang baik seharusnya terlihat</a></li>
<li><a href="../id429734/index.html">Mimpi terbang dengan bias listrik</a></li>
<li><a href="../id429736/index.html">Hogweed dari Sosnowski. Di MO diperkenalkan denda untuk distribusi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>