<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßùüèΩ üíáüèª üßëüèø Probl√®me de lien profond HATEOAS üå≠ üßëüèΩ‚Äçü§ù‚Äçüßëüèº ‚è∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Liens externes (liens profonds) - sur Internet, il s'agit du placement d'un lien hypertexte sur un site qui pointe vers une page sur un autre site Web...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Probl√®me de lien profond HATEOAS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445092/"><blockquote>  Liens externes (liens profonds) - sur Internet, il s'agit du placement d'un lien hypertexte sur un site qui pointe vers une page sur un autre site Web, au lieu de pointer vers la page d'accueil (accueil, d√©marrage) de ce site.  Ces liens sont appel√©s liens externes (liens profonds). <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikip√©dia</a> </blockquote>  Le terme <b>¬´liens profonds¬ª</b> sera utilis√© plus loin comme le plus proche des ¬´liens profonds¬ª en langue anglaise.  Cet article se concentrera sur l'API REST, donc des liens profonds signifieront des liens vers des ressources HTTP.  Par exemple, le lien profond <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/en/post/426691</a> pointe vers un article sp√©cifique sur habr.com. <br><br>  <b>HATEOAS</b> est un composant de l'architecture REST qui permet de fournir des informations aux clients API via hyperm√©dia.  Le client conna√Æt la seule adresse fixe, le point d'entr√©e de l'API;  il apprend toutes les actions possibles √† partir des ressources re√ßues du serveur.  Les vues de ressources contiennent des liens vers des actions ou d'autres ressources;  le client interagit avec l'API, s√©lectionnant dynamiquement une action parmi les liens disponibles.  Vous pouvez en savoir plus sur HATEOAS sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> ou dans ce merveilleux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> sur Habr√©. <br><br>  HATEOAS est le prochain niveau de l'API REST.  Gr√¢ce √† l'utilisation d'hyperm√©dia, il r√©pond √† de nombreuses questions qui se posent lors du d√©veloppement de l'API: comment contr√¥ler l'acc√®s aux actions c√¥t√© serveur, comment se d√©barrasser de la connectivit√© √©troite entre le client et le serveur, comment changer les adresses des ressources si n√©cessaire.  Mais il ne fournit pas de r√©ponse √† la question de savoir √† quoi devraient ressembler les liens profonds avec les ressources. <br><a name="habracut"></a><br>  Dans l'impl√©mentation REST "classique", le client conna√Æt la structure des adresses, il sait comment obtenir une ressource par identifiant dans l'API REST.  Par exemple, un utilisateur suit un lien profond vers une page de livre dans une boutique en ligne.  La barre d'URL <code>https://domain.test/books/1</code> s'affiche dans la barre d'adresse du navigateur.  Le client sait que ¬´1¬ª est l'identifiant de la ressource du livre, et pour l'obtenir, vous devez remplacer cet identifiant dans l'URL de l'API REST <code>https://api.domain.test/api/books/{id}</code> .  Ainsi, le lien profond vers la ressource de ce livre dans l'API REST ressemble √† ceci: <code>https://api.domain.test/api/books/1</code> . <br><br>  Dans HATEOAS, le client ne conna√Æt pas les identificateurs de ressource ni la structure d'adresse.  Il ne code pas en dur, mais "d√©couvre" les liens.  De plus, la structure des URL peut changer √† l'insu du client, HATEOAS le permet.  En raison de ces diff√©rences, les liens profonds ne peuvent pas √™tre impl√©ment√©s de la m√™me mani√®re que l'API REST classique.  √âtonnamment, une recherche sur Internet de recettes pour impl√©menter de tels liens dans HATEOAS n'a pas donn√© un grand nombre de r√©sultats, seulement quelques questions d√©routantes sur Stackoverflow.  Par cons√©quent, nous consid√©rerons plusieurs options possibles et essayerons de choisir la meilleure. <br><br>  L'option z√©ro en dehors de la comp√©tition n'est pas de mettre en place des liens profonds.  Cela peut convenir √† certains administrateurs ou applications mobiles qui ne n√©cessitent pas la possibilit√© de passer directement aux ressources internes.  C'est tout √† fait dans l'esprit de HATEOAS, l'utilisateur ne peut ouvrir les pages que s√©quentiellement, √† partir du point d'entr√©e, car le client ne sait pas comment acc√©der directement √† la ressource interne.  Mais cette option ne convient pas aux applications Web - nous nous attendons √† ce que le lien vers la page interne puisse √™tre mis en signet, et la mise √† jour de la page ne nous renverra pas √† la page principale du site. <br><br>  Donc, la premi√®re option: le code dur de l'URL de l'API HATEOAS.  Le client conna√Æt la structure des adresses de ressource pour lesquelles des liens profonds sont n√©cessaires et sait comment obtenir l'identifiant de ressource pour la recherche.  Par exemple, le serveur renvoie l'adresse <code>https://api.domain.test/api/books/1</code> comme r√©f√©rence √† la ressource de livre.  Le client sait que ¬´1¬ª est l'identifiant du livre et peut g√©n√©rer lui-m√™me cette URL en cliquant sur le lien profond.  C'est certainement une option de travail, mais viole les principes de HATEOAS.  La structure d'adresse et l'identifiant de ressource ne peuvent plus √™tre modifi√©s, sinon le client se cassera, il y a une connexion rigide.  Ce n'est pas HATEOAS, ce qui signifie que l'option ne nous convient pas. <br><br>  La deuxi√®me option consiste √† remplacer l'URL de l'API REST dans l'URL du client.  Pour un exemple avec un livre, le lien profond ressemblera √† ceci: <code>https://domain.test/books?url=https://api.domain.test/api/books/1</code> .  Ici, le client prend le lien de ressource re√ßu du serveur et le remplace enti√®rement dans l'adresse de la page.  Cela ressemble plus √† HATEOAS, le client ne conna√Æt pas les identifiants et la structure des adresses, il re√ßoit un lien et l'utilise tel quel.  En cliquant sur un tel lien approfondi, le client recevra la ressource souhait√©e via le lien API REST du param√®tre url.  Il semblerait que la solution fonctionne, et tout √† fait dans l'esprit de HATEOAS.  Mais si vous ajoutez un tel lien √† vos signets, √† l'avenir, nous ne pourrons plus modifier l'adresse de la ressource dans l'API (ou nous devrons toujours rediriger vers une nouvelle adresse).  Encore une fois, l'un des avantages de HATEOAS est perdu, cette option n'est pas id√©ale non plus. <br><br>  Ainsi, nous voulons avoir des permaliens, qui peuvent cependant changer.  Une telle solution existe et est largement utilis√©e sur Internet - de nombreux sites fournissent des liens courts vers des pages internes qui peuvent √™tre partag√©es.  En plus de la bri√®vet√©, leur avantage est que le site peut changer l'adresse r√©elle de la page, mais ces liens ne se rompent pas.  Par exemple, Microsoft utilise des liens Windows pour aider les pages du formulaire <code>http://go.microsoft.com/fwlink/?LinkId=XXX</code> .  Au fil des ans, les sites Microsoft ont √©t√© repens√©s plusieurs fois, mais les liens dans les anciennes versions de Windows continuent de fonctionner. <br><br>  Il ne reste plus qu'√† adapter cette solution √† HATEOAS.  Et c'est la troisi√®me option - en utilisant des identifiants de liens profonds uniques dans l'API REST.  L'adresse de la page du livre ressemble maintenant √† ceci: <code>https://domain.test/books?deepLinkId=3f0fd552-e564-42ed-86b6-a8e3055e2763</code> .  En cliquant sur un tel lien approfondi, le client doit demander au serveur: quel lien de ressource correspond √† un <code>deepLinkId</code> identifiant <code>deepLinkId</code> ?  Le serveur renverra le lien <code>https://api.domain.test/api/books/1</code> (enfin, ou imm√©diatement une ressource, pour ne pas y aller deux fois).  Si l'adresse de ressource dans l'API REST change, le serveur renverra simplement un autre lien.  Un enregistrement est sauvegard√© dans la base de donn√©es que l'identifiant de r√©f√©rence 3f0fd552-e564-42ed-86b6-a8e3055e2763 correspond √† l'identifiant d'entit√© du livre 1. <br><br>  Pour cela, les ressources doivent contenir un champ <code>deepLinkId</code> avec les identifiants de leurs liens profonds, et le client doit les substituer dans l'adresse de la page.  Cette adresse peut √™tre mise en signet en toute s√©curit√© et envoy√©e √† des amis.  Ce n'est pas tr√®s bien que le client travaille ind√©pendamment avec certains identifiants, mais cela vous permet de pr√©server les avantages de HATEOAS pour l'API dans son ensemble. <br><br><h1>  Exemple </h1><br>  Cet article ne serait pas complet sans un exemple d'impl√©mentation.  Pour tester le concept, consid√©rons un exemple d'un site de catalogue de boutique en ligne hypoth√©tique avec un backend sur Spring Boot / Kotlin et un frontend SPA sur Vue / JavaScript.  Le magasin vend des livres et des crayons, le site comprend deux sections dans lesquelles vous pouvez voir la liste des produits et ouvrir leurs pages. <br><br>  Section "Livres": <br><br><img src="https://habrastorage.org/webt/ly/nz/v6/lynzv689wey61onndh2dazh9_og.png"><br><br>  Une page de livre: <br><br><img src="https://habrastorage.org/webt/th/vh/we/thvhwevb1jq9zrbpht5acjbxg_u.png"><br><br>  Pour le stockage des marchandises, les entit√©s Spring Data JPA sont d√©finies: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityType</span></span></span><span class="hljs-class"> </span></span>{ PEN, BOOK } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pen</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> color: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.PEN, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() <span class="hljs-meta"><span class="hljs-meta">@OneToOne(cascade = [CascadeType.ALL])</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink: DeepLink = DeepLink(EntityType.BOOK, id) } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeepLink</span></span></span></span>( <span class="hljs-meta"><span class="hljs-meta">@Enumerated(EnumType.STRING)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityType: EntityType, <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityId: UUID ) { <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@Column(columnDefinition = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uuid"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: UUID = UUID.randomUUID() }</code> </pre><br>  Pour cr√©er et stocker des <code>DeepLink</code> lien profond, l'entit√© <code>DeepLink</code> est <code>DeepLink</code> , dont une instance est cr√©√©e avec chaque objet de domaine.  L'identifiant lui-m√™me est g√©n√©r√© selon la norme UUID au moment de la cr√©ation de l'entit√©.  Sa table contient l'identifiant du lien profond, l'identifiant et le type de l'entit√© vers laquelle le lien m√®ne. <br><br>  L'API REST du serveur est organis√©e selon le concept HATEOAS, le point d'entr√©e de l'API contient des liens vers les collections de produits, ainsi qu'un lien <code>#deepLink</code> pour former des liens profonds en substituant un identifiant: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api { <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"pens"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/pens"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"books"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"deepLink"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/links/{id}"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"templated"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } }</code> </pre><br>  Le client, lors de l'ouverture de la section "Livres", demande une collection de ressources sur le lien <code>#books</code> au point d'entr√©e: <br><br><pre> <code class="json hljs">GET http://localhost:<span class="hljs-number"><span class="hljs-number">8080</span></span>/api/books ... { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Harry Potter"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"4bda3c65-e5f7-4e9b-a8ec-42d16488276f"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/1272e287-07a5-4ebc-9170-2588b9cf4e20"</span></span> } } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Cryptonomicon"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deepLinkId"</span></span>: <span class="hljs-string"><span class="hljs-string">"a23d92c2-0b7f-48d5-88bc-18f45df02345"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"self"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"href"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://localhost:8080/api/books/5d04a6d0-5bbc-463e-a951-a9ff8405cc70"</span></span> } } } ...</code> </pre><br>  SPA utilise Vue Router, pour lequel le chemin d'acc√®s √† la page du livre est d√©fini <code>{ path: '/books/:deepLinkId', name: 'book', component: Book, props: true }</code> , et les liens dans la liste des livres ressemblent √† ceci: <code>&lt;router-link :to="{name: 'book', params: {link: book._links.self.href, deepLinkId: book.deepLinkId}}"&gt;{{ book.name }}&lt;/router-link&gt;</code> . <br><br>  Autrement dit, lorsque vous ouvrez la page d'un livre sp√©cifique, le composant <code>Book</code> est appel√©, qui re√ßoit deux param√®tres: <code>link</code> (lien vers la ressource book dans l'API REST, valeur du champ <code>href</code> du lien <code>#self</code> ) et <code>deepLinkId</code> de la ressource). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Book = { <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">`&lt;div&gt;{{ 'Book: ' + book.name }}&lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">deepLinkId</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">book</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } }, mounted() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> url = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-string"><span class="hljs-string">'/api/links/'</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.deepLinkId : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.link; fetch(url).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json().then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.book = json }) }) } }</code> </pre><br>  Vue Router d√©finit la valeur de <code>deepLinkId</code> √† l'adresse de la page <code>/books/:deepLinkId</code> , et le composant demande la ressource par lien direct √† partir de la propri√©t√© <code>link</code> .  Lors du for√ßage d'une actualisation de page, Vue Router d√©finit la propri√©t√© de composant <code>deepLinkId</code> , en la r√©cup√©rant √† partir de l'adresse de page.  La propri√©t√© de <code>link</code> reste <code>null</code> .  Le composant v√©rifie: s'il existe un lien direct obtenu √† partir de la collection, la ressource y est demand√©e.  Si seul l'identifiant <code>deepLinkId</code> est <code>deepLinkId</code> , il est substitu√© au lien <code>#deepLink</code> partir du point d'entr√©e pour recevoir la ressource par le lien profond. <br><br>  Sur le backend, la m√©thode du contr√¥leur pour les liens profonds ressemble √† ceci: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/links/{id}"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deepLink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@PathVariable</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">UUID</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, response: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HttpServletResponse</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: ResponseEntity&lt;Any&gt; { id!!; response!! <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deepLink = deepLinkRepo.getOne(id) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> path: String = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (deepLink.entityType) { EntityType.PEN -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getPen</span></span></span></span>(deepLink.entityId)) EntityType.BOOK -&gt; linkTo(methodOn(MainController::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getBook</span></span></span></span>(deepLink.entityId)) }.toUri().path response.sendRedirect(path) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ResponseEntity.notFound().build() }</code> </pre><br>  Par identifiant est l'essence du lien profond.  Selon le type d'entit√© d'application, un lien est form√© avec la m√©thode du contr√¥leur, qui renvoie sa ressource par <code>entityId</code> .  La demande est redirig√©e vers cette adresse.  Ainsi, si √† l'avenir la liaison avec le contr√¥leur d'entit√© change, il sera possible de changer simplement la logique de formation de la liaison dans la m√©thode <code>deepLink</code> . <br><br>  Le code source complet de l'exemple est disponible sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445092/">https://habr.com/ru/post/fr445092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445082/index.html">Le mois dernier, nous avons appel√© Zuckerberg un boob; corrig√©: en fait, lui et son Facebook sont juste une putain de honte</a></li>
<li><a href="../fr445084/index.html">Qui est qui sur le march√© des maisons intelligentes?</a></li>
<li><a href="../fr445086/index.html">Mission lunaire "Bereshit" - la premi√®re vid√©o de la cam√©ra embarqu√©e et de nouvelles photos dans l'espace</a></li>
<li><a href="../fr445088/index.html">Les aventures dans votre vie ont-elles √©t√© plus int√©ressantes que dans les jeux informatiques?</a></li>
<li><a href="../fr445090/index.html">YouTube restera-t-il tel que nous le connaissons?</a></li>
<li><a href="../fr445094/index.html">Acc√®s centralis√© aux signatures num√©riques et autres cl√©s de protection √©lectronique √† l'aide du mat√©riel USB sur IP</a></li>
<li><a href="../fr445098/index.html">DynamicData: modification des collections, du mod√®le de conception MVVM et des extensions r√©actives</a></li>
<li><a href="../fr445100/index.html">Anycubic: Photon S, 4Max Pro et grand renommage</a></li>
<li><a href="../fr445102/index.html">Animation Flash dans Unity3D √† partir de z√©ro. Premi√®re partie, lyrique</a></li>
<li><a href="../fr445104/index.html">Une br√®ve histoire de la marque audio Klipsch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>