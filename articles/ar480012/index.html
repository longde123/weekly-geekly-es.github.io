<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คฝ ๐ก ๐ฒ ุดูู ุฑููู ูุจุทุฆ ุงูุจุฑูุงูุฌ ๐ฆ๏ธ ๐ป ๐ฉ๐พโ๐ค</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุณูููู ุงูููู ุจููุงุณ ุฃุฏุงุก ุงูุชุทุจููุงุช ุงููุฎุชููุฉ ููุธููุฉ toupper ุ ูุฃู ูุฐุง ูุง ููุนูููู ูู ููู ุซูุงุซุงุก. 

 ูู ุงููุงูุน ุ ูุง ุฃูุชู ุจูุธููุฉ toupper ุ ููุฏ ูุชุจุช ููุชู ูุธู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุดูู ุฑููู ูุจุทุฆ ุงูุจุฑูุงูุฌ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/480012/" style=";text-align:right;direction:rtl">  ุณูููู ุงูููู ุจููุงุณ ุฃุฏุงุก ุงูุชุทุจููุงุช ุงููุฎุชููุฉ ููุธููุฉ toupper ุ ูุฃู ูุฐุง ูุง ููุนูููู ูู ููู ุซูุงุซุงุก. <br><br>  ูู ุงููุงูุน ุ ูุง ุฃูุชู ุจูุธููุฉ <a href="http://man7.org/linux/man-pages/man3/toupper.3.html"><i>toupper</i></a> ุ ููุฏ ูุชุจุช ููุชู ูุธููุฉ ุฃุฎุฑู ูุคุฎุฑูุง ูููุช ุจุญุงุฌุฉ ุฅูู ููุน ูู ุงูููุงุฉ ุงูุดุงุฆุนุฉ ุ ููุจุฏู ุฃู <i>toupper</i> ูุฑุดุญ ูุซูุฑ ููุงูุชูุงู ูุบูุฑ ุถุงุฑ ูููุนุงููุฑ.  ุญุงููุช ุฃู ุฃุฎุชุงุฑ ุดูุฆูุง ุจุณูุทูุง ุจูุฏุฑ ุงูุฅููุงู ูู ูุฏูุนูู ุฌุงูุจุงู ุ ููู ุญุฏุซ ูุง ุญุฏุซ ูู ูุฐุง ุงูุงุฎุชุจุงุฑ ุฃููู ูุงุฌูุช ูุดููุฉ ุบุฑูุจุฉ. <br><a name="habracut"></a><br>  ุณุชููู ูุฐู ุงููุดุงุฑูุฉ ุตุบูุฑุฉ - ูู ุงููุชููุน ุฃู ูุชู ูุฑูุจุงู ูุดุฑ ููุงู ุฃูุซุฑ ุดููููุง ุญูู ุงูููุถูุน ุงูุฃุตูู ุ ูุฑุจูุง ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู.  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงููุชุงุฆุฌ ูุนู ุ ููููู <a href="https://github.com/travisdowns/toupper-bench">ุฃู ุชุฃุฎุฐ</a> ุงูููุฏ ุงููุตุฏุฑู <a href="https://github.com/travisdowns/toupper-bench">ุนูู ุฌูุซุจ</a> . <br><br>  ูุฐูู ุ ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุซูุงุซุฉ ุชุทุจููุงุช ููุธููุฉ <i>toupper</i> ุ ูุงูุชู ุชุญูู ุฃุญุฑู ุตููู ุชุชููู ูู ุนูุงุตุฑ type <i>char</i> ุฅูู ุฃุญุฑู ูุจูุฑุฉ - ููู ุชุฃุฎุฐ ุตููููุง ููุณูุทุฉ ูุชุบูุฑ ุนูุงุตุฑูุง ูุจุงุดุฑุฉู ุจุญูุซ ูุชู ุชูุจูุฑ ุงูุฃุญุฑู ุงููุจูุฑุฉ. <br><br>  ูู ุงูุชุทุจูู ุงูุฃูู ุ ูุฏุนู ุจุจุณุงุทุฉ <a href="https://linux.die.net/man/3/toupper">ุงูุฏุงูุฉ toupper</a> [1] ููููุชุจุฉ ุงูููุงุณูุฉ C <a href="https://linux.die.net/man/3/toupper">ููููุฐ</a> ุญููุฉ ููุท C: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toupper_rawloop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* buf, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; size; i++) { buf[i] = <span class="hljs-built_in"><span class="hljs-built_in">toupper</span></span>(buf[i]); } }</code> </pre> <br>  ูู ุงูุชุทุจูู ุงูุซุงูู ุ ูุณุชุฎุฏู ููุฌูุง <a href="https://www.youtube.com/watch%3Fv%3D2olsGf6JIkU">ุฃูุซุฑ ุญุฏุงุซุฉ</a> ูุน ุงุณุชุจุฏุงู ุงูุฏูุฑุฉ ุงูุฎุงู ุจู <i>std :: convert</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toupper_transform</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* buf, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::transform(buf, buf + size, buf, ::<span class="hljs-built_in"><span class="hljs-built_in">toupper</span></span>); }</code> </pre> <br>  ุฃุฎูุฑูุง ุ ูู ุงูุชุทุจูู ุงูุซุงูุซ ุ ูุณุชุฎุฏู ุฎูุงุฑุฒููุฉ ุฎุงุตุฉ ุชุนูู ูุน ุฃุญุฑู ASCII.  ูุชุญูู ูุง ุฅุฐุง ูุงู ุงูุญุฑู ูู ุงููุทุงู <i>a - z</i> ุ ูุฅุฐุง ูุฌุญ ุ ูุณุชุจุฏู ููุณ ุงูุญุฑู ูู ุงูุญุงูุฉ ุงูุนููุง ุ ูุน ุทุฑุญ ุงูุฑูู 32 ูู ุฑูุฒ ุงูุญุฑู [2]: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toupper_branch</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* buf, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; size; i++) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c = buf[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c &gt;= <span class="hljs-string"><span class="hljs-string">'a'</span></span> &amp;&amp; c &lt;= <span class="hljs-string"><span class="hljs-string">'z'</span></span>) { buf[i] = c - <span class="hljs-number"><span class="hljs-number">32</span></span>; } } }</code> </pre> <br>  ุชุจุฏู ุณููุฉ ุ ุฃููุณ ูุฐููุ <br><br>  ุณูููู ุงูุขู ุจููุงุณ ุณุฑุนุฉ ูุฐู ุงูุชุทุจููุงุช ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงููุญููู ุจูุงุณุทุฉ ูุนุงูุฌ Skylake i7-6700HQ ุนูู ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู gcc 5.5 ุจุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ.  ูุชุฑุฏ ุงููุชุงุฆุฌ ูู ุดูู ูุฎุทุท ูุจุนุซุฑ [3]: <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ec/ps/uf/ecpsuf8lfb6dcp2empyh6vqbkco.png"></div><br>  ุนูู ุงูููุฑ ุ ุณูุชุนุงูู ูุน ุซูุงุซุฉ ุฃุณุฆูุฉ ูุง ุตูุฉ ููุง ุจูููุชูุง. <br><br>  ุฃููุงู ุ ุงูุธุฑ ุฅูู ุงูุฑุณู ุงูุจูุงูู ูุฎูุงุฑุฒููุฉ ุงูุชูุฑูุน (ููุง ูู ููุถุญ ุจุงูููู ุงูุฃุฎุถุฑ).  ูุฎุชูู ุงุฎุชูุงููุง ูุจูุฑูุง ููููุง ูุญุฌู ุจูุงูุงุช ุงูุฅุฏุฎุงู - ูุจูู ุงูุฑุณูุงู ุงูุขุฎุฑุงู ูุณุทุญูู ุชูุฑูุจูุง.  ูุฐุง ูู ูู ุงููุงูุน ูุฌุฑุฏ ูุทุนุฉ ุฃุซุฑูุฉ ุงูุงุฎุชุจุงุฑ.  ูุชู ุงุฎุชูุงุฑ ุฃุญุฑู ASCII ุงููุฏุฎูุฉ ุจุดูู ุนุดูุงุฆู [4] ุ ูุจุงูุชุงูู ุ ูุฅู ุงูุนุงูู ุงูุญุงุณู ูู ุญุงูุฉ ุงูุชูููุฐ ุงูุซุงูุซ ูู ุชุดุบูู ุฎูุงุฑุฒููุฉ ุชูุจุค ุงููุฑุน.  ูุน ูููุฉ ุตุบูุฑุฉ ูู ุงูุจูุงูุงุช ุ ูุฅูู ูุญูุธ ุชูุงูุง ุชุณูุณู ุงูุนูุงุตุฑ ููุง ูุชู ุชูููุฐ ุงูุชูุฑุงุฑ ุ ูุจุงูุชุงูู ูุฅู ุนุฏุฏ ูุฎุทุฆ ุตุบูุฑ ูุณุฑุนุฉ ุนุงููุฉ ุ <a href="https://lemire.me/blog/2019/10/16/benchmarking-is-hard-processors-learn-to-predict-branches/">ููุง ูู ูุจูู ูู ูุฐู ุงูููุงุญุธุฉ</a> .  ูุน ููู ุญุฌู ุชุณูุณู ุงูุจูุงูุงุช ุ ุชุชุฐูุฑ ุฎูุงุฑุฒููุฉ ุงูุชูุจุค ุฃูู ูุฃูู ุญุชู ุชุจุฏุฃ ุฃุฎูุฑูุง ูู ููุฏุงู ูู ุญุฑู ูุจูุฑ (0.27 ุญุฑู ููู ุญุฑู) ุ ุซู ูุชู ุชุณููุฉ ุงูุฑุณู ุงูุจูุงูู. <br><br>  ุซุงููุงู ุ ุงูุชุจู ุฅูู ูุฌููุนุฉ ุงูุจูุน ุงูุฎุถุฑุงุก ูู ุฃุนูู ุงููุณุงุฑ ุ ูุงูุชู ุชูุงุจู ุณุฑุนุงุช ุฃูู ุจูุซูุฑ ูู ุงููุชุบูุฑ ูุน <i>toupper_branch</i> branching: <br><br><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/b6/kj/by/b6kjbygj9inzadobigp0txj3vxu.png"></div><br>  ูุฐู ููุณุช ูุทุนุฉ ุฃุซุฑูุฉ ูุนุฒููุฉ: ุธูุฑุช ูุฐู ุงูุจูุน ุฎูุงู ุนุฏุฉ ุนูููุงุช ุฅุทูุงู.  ูู ุงูููุช ููุณู ุ ูุง ูููู ุฅุนุงุฏุฉ ุฅูุชุงุฌูุง ุฅุฐุง ููุช ุจุงุฎุชุจุงุฑ ุงูุฎูุงุฑุฒููุฉ ุนูู ูุฌู ุงูุชุญุฏูุฏ ุนูู ุฃุญุฌุงู ุงูุจูุงูุงุช ูุฐู ููุท - ููู ุชุธูุฑ ููุท ุนูุฏ ุชุดุบูู ุงูุงุฎุชุจุงุฑ ุนุจุฑ ุฌููุน ุงูุฃุญุฌุงู.  ููู ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ุชุธูุฑ ุฏุงุฆููุง.  ูู ุฃุชุทุฑู ุฅูููุง ุจุดูู ุฎุงุต ุ ููู ูููููู ุงูุชุฑุงุถ ุฃู ูุฐุง ูุฑุฌุน ุฅูู ุจุนุถ ุชุนุงุฑุถุงุช ุงูุฃุณูุงุก ุฃู ุงูุฃุณูุงุก ุงููุณุชุนุงุฑุฉ ูู ุฎูุงุฑุฒููุฉ ุงูุชูุจุค ุงููุฑุนู ุฃู ุนูุฏ ุชุนููู ุงูุตูุญุงุช ุงููุนููุฉ ูุฐุงูุฑุฉ 4 ููููุจุงูุช ุฅูู ุงูุชุฑุงุถูุฉ (ุนูู ุงูุฑุบู ูู ุฅููุงู ุชุดุบูู ุงูุนุดูุงุฆูุฉ ููุณุงุญุฉ ุงูุนููุงู ุงูุงูุชุฑุงุถูุฉ). <br><br>  ุซุงูุซูุง ุ ูุจุฏู ุชูููุฐ <i>toupper_rawloop</i> (ููุง ูู ููุถุญ ุจุงูููู ุงูุฃุฒุฑู) ุนูู ุงูุฑุณู ุงูุจูุงูู <i>ูุฎุทูู</i> ูููุตููู: ุฃุญุฏููุง ุฃุนูู ุจูููู ูู ุนูุงูุฉ 2 ููุงููุณ ููู ุญุฑู ุ ูุงูุขุฎุฑ ุนูุฏ ูุณุชูู 1.5 ููุงููุณ ููู ุญุฑู.  ุธูุฑ ูุฐุงู ุงูุฎุทุงู ูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช.  ุงูุฎูุงุฑ ุงูุฃุณุฑุน ุ ุจุณุฑุนุฉ 1.57 ุญุฑููุง ูู ูู ุฏูุฑุฉ ุ ูุจุทุฆ ูุนูููุง ุนูู ููุงูุฐ ุงูุชูุฒูู: ุชุญุฏุซ ูุฑุงุกุฉ ุงูุจูุงูุงุช ุนูู ุงููููุฐูู 2 ู 3 ุจุณุฑุนุฉ 1.54 ูู ุงูุนูููุงุช ุงููุตุบุฑุฉ ููู ุฏูุฑุฉ ุ ุจุญูุซ ุชููู ูุดุบููุฉ ุจูุณุจุฉ 98ูช.  ูู ุฃุชููู ูู ุชุญุฏูุฏ ุณุจุจ "ุงููุธุงู" ุงูุฃุจุทุฃ. <br><br>  ุจูููุง ููุช ุฃุชุนุงูู ูุน ูุฐู ุงููุถูุฉ ุ ุงุฎุชูู "ุงููุธุงู" ุงูุณุฑูุน ูุฌุฃุฉ ูุจูู ุงูุจุทูุก ููุท.  ุฑุจูุง ุฃุฏุฑู ุงููุนุงูุฌ ูุง ููุช ุฃุญุงูู ุงูููุงู ุจู ููุงู ุจุชูุฒูู ุงูุชุญุฏูุซ ุณุฑุง ููุฑูุฒ ุงูุตุบูุฑ ูุฅุฒุงูุฉ ุงูุชูุงูุถ ุ ููู ูุฏู (ูุง ูุฒุงู) ุฏููููุง - ุตูุฑุฉ ูุชุฌูุฉ ุจูุง ุฑุณูู ุจูุงููุฉ. <br><br>  ูุง ุงูุฐู ููููุง ุฅุฐู ูู ูุฐุง ุงููุซุงูุ <br><br>  ูููู ูุง ููููุง ูู ุฃู ุงูุฅุตุฏุงุฑ ุฐู ุงูุฏูุฑุฉ ุงูุฃูููุฉ ุฃุณุฑุน ูู 3 ุฅูู 4 ูุฑุงุช ูู ุงูุฅุตุฏุงุฑ ูุน <i>std ::</i> convert: 1.5-2 ุฏูุฑุฉ ููู ุญุฑู ููุงุจู 7 ูุน ุจุถุน ุฏูุฑุงุช ููู ุญุฑู. <br><br>  ูุง ูู ุงููุณุฃูุฉ ููุงุ  ูู ูุดูุช ุงูุฎูุงุฑุฒููุงุช ุงูููุงุณูุฉุ  ูู <i>ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: ุชุญููู</i> ูุฏููุง ุฃู ุนูุจุ <br><br>  ููุณ ุญูุง  ุจุชุนุจูุฑ ุฃุฏู ุ ููุณ ุนูู ุงูุฅุทูุงู. <br><br>  ุงุชุถุญ ุฃู ูุฐู ุงููุชุงุฆุฌ ุชุธูุฑ ุนูุฏูุง ูุชู ุชุฌููุน ุงููุธุงุฆู ูู <a href="">ูููุงุช ูุฎุชููุฉ</a> .  ุฅุฐุง ูุถุนุชูู ูู ููุณ ุงูููู ุ ูุตุจุญ ุฃุฏุงุฆูู ููุฎูุถูุง ุนูู ุญุฏ ุณูุงุก. <br><br>  ููุง ุ ูุง ุนูุงูุฉ ูููุญุงุฐุงุฉ ุจู. <br><br>  ูููู ูุฐุง ููุณ ูู ุดูุก: ุงููุณุฎุฉ ุงูุณุฑูุนุฉ ุฐุงุช ุงูุฏูุฑุฉ ุงูุฃูููุฉ ุ ุนูุฏูุง ูุชู ุชุฌููุนูุง ูู ููู ูููุตู ุ ุชุจุทุฆ ุฅุฐุง ููุช ุจุจุณุงุทุฉ ุจุฅุฑูุงู ููู ุงูุฑุฃุณ <i>&lt;algorithm&gt;</i> ุจู.  ูุนู ุ ูุฐุง ุตุญูุญ: ูุง ุนููู ุณูู ุชูุตูู ูุฐุง ุงูููู ุ ูุงูุฐู ูุง ูุชู ุงุณุชุฎุฏุงูู ูุทูููุง ููุง ูููุดุฆ ุฃู ุฑูุฒ ูู ููู ุงููุงุฆู ุงูููุงุฆู ุ ูุณุชูุฎูุถ ุณุฑุนุฉ ุงูุฏูุฑุฉ "ุงูุฃูููุฉ" 3-4 ูุฑุงุช.  ุนูู ุงูุนูุณ ูู ุฐูู ุ <i>ูุชู</i> ุชุณุฑูุน ุงูุฅุตุฏุงุฑ ูุน <i>std :: convert</i> ุฅูู ุงูุญุฏ ุงูุฃูุตู ุฅุฐุง ููุช ุจูุณุฎ ููุตู ุชุทุจูู <i>std :: convert</i> ูู ููู <i>&lt;algorithm&gt;</i> ุ ููู ูุง ุชูู ุจุชุถููู ูุฐุง ุงูููู. <br><br>  ุงูุบุงูุงุช ูุง ุชูุชูู ุนูุฏ ูุฐุง ุงูุญุฏ (ูู ูููู ููุงู ุงููุฒูุฏ ุ ูุฃุนุฏู ุจุฐูู): ุจูุง ูู ุฐูู ููู <i>&lt;algorithm&gt;</i> ูุง ูุคุฏู ุฏุงุฆููุง ุฅูู ุงูุชุฃุซูุฑ ุงูููุตูู.  ูุญุฏุซ ุงูุฎูุงุถ ุงูุณุฑุนุฉ ุฅุฐุง ูุงู <i>&lt;algorithm&gt;</i> ูุชุตููุง ูุจู <i>&lt;ctype.h&gt;</i> ุ ูููู ุฅุฐุง ููุช <i>ุจุชุจุฏููููุง</i> ุ ููุง: <br><br>  <b>ุฑูุฒ ุจุทูุก:</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;algorithm&gt; #include &lt;ctype.h&gt;</span></span></span></span></code> </pre> <br>  <b>ููุฏ ุณุฑูุน:</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ctype.h&gt; #include &lt;algorithm&gt;</span></span></span></span></code> </pre> <br>  ูู ุงููุงูุน ุ ุธูุฑ ูุฐุง ุงูุดุฐูุฐ ูู ุฏุงุฎูู (ูู ูุดุฑูุน ุขุฎุฑ) ุนูุฏูุง ูุงู clang-format ุชููุงุฆููุง ุจูุฑุฒ ูููุงุช ุงูุฑุฃุณ ุงููุถููุฉ ููุถุน <i>&lt;algorithm&gt;</i> ูู ุจุฏุงูุฉ ุงููุงุฆูุฉ ุ ุญูุซ ููุชูู (ููู ุซู ุฑุฃุณ clickbait ููููุงู). <br><br>  ูุจุทุจูุนุฉ ุงูุญุงู ุ ูุงู ุนูููุง ุฃู ูุบุฑู ูู ูุงุฆูุฉ ุงููุฌููุน ุนุงุฌูุงู ุฃู ุขุฌูุงู.  ูู ูุคุฎุฑ ูุฐู ุงููุญุธุฉ ุบูุฑ ุงูุณุงุฑุฉ. <br><br>  ูุชู ุนุฑุถ ุงูุฅุตุฏุงุฑุงุช <a href="https://godbolt.org/z/DwZBJM">ุงูุณุฑูุนุฉ ูุงูุจุทูุฆุฉ</a> ูููุธุงุฆู [5] ุฃุฏูุงู ุ ููุชู ุชูููุฑ ุญููุงุช ุตุบูุฑุฉ ูุน ุชุนูููุงุช ุชูุถูุญูุฉ: <br><br>  <b>ุชุชุตู ุงูุฎูุงุฑุฒููุฉ ุฃููุงู:</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">toupper_rawloop(<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>): push rbp push rbx lea rbp, [rdi+rsi] sub rsp, <span class="hljs-number"><span class="hljs-number">8</span></span> test rsi, rsi je .L1 mov rbx, rdi .L5: movsx edi, BYTE PTR [rbx] ;  <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>-  *buf add rbx, <span class="hljs-number"><span class="hljs-number">1</span></span> ; buf++ call <span class="hljs-built_in"><span class="hljs-built_in">toupper</span></span> ;  <span class="hljs-built_in"><span class="hljs-built_in">toupper</span></span>(c) mov BYTE PTR [rbx<span class="hljs-number"><span class="hljs-number">-1</span></span>], al ;    buf[<span class="hljs-number"><span class="hljs-number">-1</span></span>] cmp rbp, rbx ;  buf == buf_end jne .L5 ; .L1: add rsp, <span class="hljs-number"><span class="hljs-number">8</span></span> pop rbx pop rbp ret</code> </pre> <br>  <b>&lt;ุงูุฎูุงุฑุฒููุฉ&gt; ูุชุตูุฉ ุงูุซุงููุฉ:</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">toupper_rawloop(<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>): test rsi, rsi je .L7 push rbp push rbx mov rbp, rsi mov rbx, rdi sub rsp, <span class="hljs-number"><span class="hljs-number">8</span></span> call __ctype_toupper_loc lea rsi, [rbx+rbp] mov rdi, rbx .L4: ;  <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>-  buf movsx rcx, BYTE PTR [rdi] ;      <span class="hljs-built_in"><span class="hljs-built_in">toupper</span></span> ; (   __ctype_toupper_loc) mov rdx, QWORD PTR [rax] ; buf++ add rdi, <span class="hljs-number"><span class="hljs-number">1</span></span> ;   <span class="hljs-built_in"><span class="hljs-built_in">toupper</span></span>  , ;       mov edx, DWORD PTR [rdx+rcx*<span class="hljs-number"><span class="hljs-number">4</span></span>] mov BYTE PTR [rdi<span class="hljs-number"><span class="hljs-number">-1</span></span>], dl ;   cmp rsi, rdi ;  buf == end_buf jne .L4 ; add rsp, <span class="hljs-number"><span class="hljs-number">8</span></span> pop rbx pop rbp .L7: rep ret</code> </pre> <br>  ุงููุฑู ุงูุฑุฆูุณู ูู ุฃูู ูู ุงูุฅุตุฏุงุฑ ุงูุจุทูุก ุ ูุชู ุงุณุชุฏุนุงุก ูุธููุฉ toupper ุจุจุณุงุทุฉ ูู ุญููุฉ ุ ุจูููุง ูู ุงููุณุฎุฉ ุงูุณุฑูุนุฉ ุ ุชููู ููุงููุงุช ุงููุธููุฉ ุบุงุฆุจุฉ ุชูุงููุง ุ ููุง ููุฌุฏ ุณูู ุจุญุซ ูู ุฌุฏูู ุงููุฑุงุณูุงุช [6] ุ ุฃู  <i>ูุชู</i> ุงุณุชุจุฏุงู ูุต ุงูุฏุงูุฉ <i>std :: toupper</i> ูู ููุงู ุงูุงุณุชุฏุนุงุก. <br><br>  ุฅุฐุง ูุธุฑุช ุฅูู <a href="https://sourceware.org/git/%3Fp%3Dglibc.git%3Ba%3Dblob%3Bf%3Dctype/ctype.h%3Bh%3Dd17f727cf0dc2a0f6c62fa50aff799b175dcb426%3Bhb%3D2a764c6ee848dfe92cb2921ed3b14085f15d9e79">ุงูููุฏ ุงููุตุฏุฑู</a> ูููุชุจุฉ glibc ุ ูุฅููุง ูุฌุฏ ุชูููุฐ ูุธููุฉ <i>toupper</i> ููุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">__extern_inline <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-comment"><span class="hljs-comment">// __NTH โ  , ,      __NTH (toupper (int __c)) { return __c &gt;= -128 &amp;&amp; __c &lt; 256 ? (*__ctype_toupper_loc ())[__c] : __c; }</span></span></code> </pre> <br>  ููุง ูุฑู ุ ููุนุฑูู <i>toupper</i> ุนูู ุฃูู ุฏุงูุฉ <i>ูุถูููุฉ ุฎุงุฑุฌูุฉ</i> ุชุชุญูู ุฃููุงู ูู ุฃู ุญุฌู ุงูุญุฑู char ูุชูุงุกู ูุน ุจุงูุช ูุงุญุฏ [7] ุ ุซู ูุจุญุซ ุนู ุงูุญุฑู ูู ุฌุฏูู ุงููุฑุงุณูุงุช ุงูุฐู ูุชู ุฅุฑุฌุงุนู ุจูุงุณุทุฉ ุงูุฏุงูุฉ <i>__ctype_toupper_loc ()</i> .  ุชููู ูุฐู ุงููุธููุฉ ุจุฅุฑุฌุงุน ูุคุดุฑ ุฏูู ูุญูู (ูู ุงูููุน <i>const int **</i> ) ุ ูุงูุฐู ุจุฏูุฑู ูุดูุฑ ุฅูู ุฌุฏูู ุงููุฑุงุณูุงุช ุ ูุงูุฐู ูุชู ูู ุฎูุงูู ุงุณุชุฌุงุจุฉ ูุทูุจ ุฑูุฒูุง ุ ุฅุฑุฌุงุน ุฅุตุฏุงุฑ ุงูุญุงูุฉ ุงูุนููู ุงูุฎุงุต ุจู [8]. <br><br>  ุฃุตุจุญ ูู ุงููุงุถุญ ุงูุขู ูุง ูุญุฏุซ ูู ุงููุงุฆูุฉ.  ูู ุงูุฅุตุฏุงุฑ ุงูุณุฑูุน ูู ุงูุฎูุงุฑุฒููุฉ ุ ูุณุชุจุฏู ุงููุชุฑุฌู <i>ูุต</i> ุงูุฏุงูุฉ <i>toupper</i> ุ ูููู ูุง ูููู ุงุณุชุจุฏุงู ุงูุงุณุชุฏุนุงุก <i>ููุฏุงูุฉ __ctype_toupper_loc ()</i> [9].  ููุน ุฐูู ุ ูุชู ุงูุฅุนูุงู ุนู ูุฐู ุงูููุงููุฉ ูู <i>__attribute __ ((const))</i> ุ ููุง ูุนูู ุฃู ูููุฉ ุงูุฅุฑุฌุงุน ุชุนุชูุฏ ููุท ุนูู ุงููุณูุทุงุช (ุงูุชู ููุณุช ููุง).  ูุนุฑู ุงููุชุฑุฌู ุฃู ูุฐู ุงููุธููุฉ ุชูุฑุฌุน ููุณ ุงููููุฉ ูู ูู ูุฑุฉ ุ ูุจุงูุชุงูู ุชุฃุฎุฐ ููุงููุชูุง ุฎุงุฑุฌ ุงูุญููุฉ ุ ููู ุงูุญููุฉ ููุณูุง ุชูุฌุฏ ููุท ุจุถุน ุนูููุงุช ูุฑุงุกุฉ ูุฑุชุจุทุฉ ุจุงููุตูู ุฅูู ุฌุฏูู ุงููุฑุงุณูุงุช ุ ููุชุงุจุฉ ูููุฉ ุฌุฏูุฏุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช ุ ูุงูุชุญูู ูู ุงูุญููุฉ. <br><br>  ูู ุงูุฅุตุฏุงุฑ ุงูุจุทูุก ุ ุชุจูู ุงูุฏุนูุฉ ุฅูู <i>toupper ()</i> ูู ูุต ุงูุญููุฉ.  ุฅู ุงูุญููุฉ ููุณูุง ุฃูุตุฑ ุจุฃูุฑ ูุงุญุฏ ุ ููู ุจุงูุทุจุน ุ ูุง ูุฒุงู ูุชุนูู ุนููู ุงูุขู ุชูููุฐ ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุฏุงุฎู ูุธููุฉ <i>toupper</i> .  ุนูู ูุธุงูู ุ ูุจุฏู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> lea edx,[rdi+<span class="hljs-number"><span class="hljs-number">0x80</span></span>] ; edx = rdi + <span class="hljs-number"><span class="hljs-number">0x80</span></span> movsxd rax,edi ;    c cmp edx,<span class="hljs-number"><span class="hljs-number">0x17f</span></span> ; ,  c     <span class="hljs-number"><span class="hljs-number">-128</span></span>  <span class="hljs-number"><span class="hljs-number">255</span></span> ja <span class="hljs-number"><span class="hljs-number">2</span></span>a ;  ,   mov rdx,QWORD PTR [rip+<span class="hljs-number"><span class="hljs-number">0x395f30</span></span>] ;    ;   mov rdx,QWORD PTR fs:[rdx] ;     ;     mov rdx,QWORD PTR [rdx] ;    ;    mov rdx,QWORD PTR [rdx+<span class="hljs-number"><span class="hljs-number">0x48</span></span>] ;     <span class="hljs-built_in"><span class="hljs-built_in">toupper</span></span> mov eax,DWORD PTR [rdx+rax*<span class="hljs-number"><span class="hljs-number">4</span></span>+<span class="hljs-number"><span class="hljs-number">0x200</span></span>] ;  c   <span class="hljs-number"><span class="hljs-number">2</span></span>a: ret</code> </pre> <br>  ูุธุฑูุง ูุฃู ูุฐู ููุงููุฉ ุบูุฑ ูุถููุฉ ุ ูุฅู ุงูุจุฑูุงูุฌ ูุนูู ุฃูุซุฑ.  ููุงู ูุง ูุง ููู ุนู ุฎูุณ ุนูููุงุช ูุชุชุงููุฉ ูููุตูู ุฅูู ุงูุฐุงูุฑุฉ (ูุง ูุณูู ุงูุณุนู ูุฑุงุก ุงููุคุดุฑุงุช ุ <i>ูุทุงุฑุฏุฉ ุงููุคุดุฑ</i> ).  ูู ุงูุฅุตุฏุงุฑ ุงูุณุฑูุน ุ ุจูู ุงุซูุงู ูููู ููุท ุ ุญูุซ ูุชู ุฅุฎุฑุงุฌ ูู ุงูุขุฎุฑูู ูู ุงูุญููุฉ.  ูุฌุจ ุฃู ูููู ุงูุชุฃุฎูุฑ ุจูู ุงุณุชุฏุนุงุก ูุธููุฉ ูุงูุฎุฑูุฌ ูููุง ุญูุงูู 25 ุฏูุฑุฉ ุ ููุฏููุง ุญูุงูู 7 ุฏูุฑุงุช ุชุฎุฑุฌ - ููุฐุง ูุนูู ุฃู ุงููุนุงูุฌ ูุงู ูุงุฏุฑูุง ุนูู ููุงุฒูุฉ ุงูููุงููุฉ ุ ููู ุฃูุฑ ุฌูุฏ ุฌุฏูุง ุ ูุธุฑูุง ููุธุฑูู. <br><br>  ููุงุฐุง ูุฐุง ููุฐุงุ <br><br>  ูู ุณูุณูุฉ ุทูููุฉ ูู ูููุงุช ุงูุชุถููู ุ ุชุชุถูู ูููุงุช ุฑุฃุณ C ++ ุ ูุซู <i>&lt;algorithm&gt;</i> ุ ุจุฏูุฑูุง ุ ููู <i>&lt;bits / os_defines.h&gt;</i> ุ ูุงูุฐู ูุญุชูู ุนูู ุงูุณุทุฑ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//      isanum  .  //   . #define __NO_CTYPE 1</span></span></code> </pre> <br>  ุนูุฏูุง <i>ูุชู</i> ุชูุตูู ุงูููู <i>&lt;ctype.h&gt;</i> ุฃุฎูุฑูุง ุ ุจุณุจุจ ูุฐุง ุงูุชูุฌูู ุ ูุง ูููู ุชุถููู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู <i>ูุชู</i> ุชุนุฑูู <i>toupper</i> ุนูู ุฃููุง <i>ูุถููุฉ ุฎุงุฑุฌู</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> !defined __NO_CTYPE # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> __isctype_f __isctype_f (alnum) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//  ..  .. __isctype_f (xdigit) # elif defined __isctype # define isalnum(c) __isctype((c), _ISalnum) # define isalpha(c) __isctype((c), _ISalpha) //  ..  .. # endif //      # ifdef __USE_EXTERN_INLINES __extern_inline int __NTH (tolower (int __c)) { return __c &gt;= -128 &amp;&amp; __c &lt; 256 ? (*__ctype_tolower_loc ())[__c] : __c; } __extern_inline int __NTH (toupper (int __c)) { return __c &gt;= -128 &amp;&amp; __c &lt; 256 ? (*__ctype_toupper_loc ())[__c] : __c; } # endif //   tolower     # if __GNUC__ &gt;= 2 &amp;&amp; defined __OPTIMIZE__ &amp;&amp; !defined __cplusplus # define tolower(c) __tobody (c, tolower, *__ctype_tolower_loc (), (c)) # define toupper(c) __tobody (c, toupper, *__ctype_toupper_loc (), (c)) # endif /* Optimizing gcc */ #endif /* Not __NO_CTYPE. */</span></span></span></span></code> </pre> <br>  ูุฑุฌู ููุงุญุธุฉ ุฃูู ุนูุฏ ุงูุงุชุตุงู <i>&lt;ctype.h&gt;</i> ูุง <i>ูุชู</i> ุชุนุฑูู ุฅุตุฏุงุฑ C ++ ูู <i>toupper</i> ุนูู ุฃูู ูุงูุฑู - ุงูุญุฏ ุงูุฃูุตู ููุง ูู <i>ูุถููู</i> <i>ุฎุงุฑุฌู</i> - ูุธุฑูุง ูุฃู ุชุนุฑููุงุช ูุญุฏุงุช ุงููุงูุฑู ูุญููุฉ ุจูุงุณุทุฉ <i>ุงูุชุญูู! __cplusplus ุงููุญุฏุฏ</i> ุ ูุจุงูุชุงูู ูู ุชุณุฑู ุฃุจุฏูุง. <br><br>  ุจุดูู ุนุงู ุ ูุง ุฃุนุฑู ุนูู ูุฌู ุงููููู ูุง ุฅุฐุง ูุงู <i>__NO_CTYPE</i> ูู ูุฐู ุงูุญุงูุฉ ูุฌุจ ุฃู ูุณุชุซูู <i>ุฌุณุฏู</i> ูุธุงุฆู <i>tolower</i> ู <i>toupper</i> ุงููุนููุฉ <i>ูุฎุงุฑุฌูุฉ</i> <i>ูุถููุฉ</i> ุ ูููู ูุฐุง ูู ุจุงูุถุจุท ูุง ูุญุฏุซ - ูุจุงูุชุงูู ุงูุฎูุงุถ ูุจูุฑ ูู ุณุฑุนุฉ ุฏูุฑุชูุง.  ูู ุงูุฎุชุงู ุ ุฃุณุชุทูุน ุงูููู ุฃูู ุฅุฐุง ููุช ุจุชุถููู <i>&lt;cctype&gt;</i> ุจุฏูุงู ูู <i>&lt;ctype.h&gt;</i> (ุฃู ุ C ++ ูู ุฅุตุฏุงุฑ ููู ุงูุฑุฃุณ C ุงูุฐู ูุถุน ุงููุธุงุฆู ูู <i>ูุณุงุญุฉ std ::</i> <i>namesd</i> ) ุ <i>ูุณูุนูู ุงูุฑูุฒ</i> ูู ูุฐู ุงูุญุงูุฉ ุจุจุทุก ูุฃู <i>&lt;cctype&gt;</i> ูุชุถูู ูู ุงูููุงูุฉ <i>&lt;bits / os_defines.h&gt;</i> . <br><br>  ูู ูู ูุฐุง ูููุ  ูุง ุ ูุง. <br><br>  ูุธููุฉ <i>toupper</i> ุบูุฑ ููุงุณุจุฉ ููุนูู ุงูุฌุงุฏ ูุน ุฃุญุฑู ุจูุบุงุช ูุฎุชููุฉ ุ ูุฐูู ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุนุงูุฌุฉ ุฃุญุฑู ASCII ููุท ุ ูููููู ูุชุงุจุฉ ุงูุชูููุฐ ุงูุฃุณุฑุน.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุนูู ุฌุงุฏ ูุน ุงููุต ุ ููู ุงููุฑุฌุญ ุฃูู ุณุชุณุชุฎุฏู UTF-8 ูุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ููุน ูู ูุญุฏุฉ ุงูุนูุงูุฉ ุงููุฑูุฒุฉ ูุฏุนู ุงูุฅุนุฏุงุฏุงุช ุงูุฅูููููุฉ ุ ุฃู ุงูุงูุชุธุงุฑ ุญุชู ูุธูุฑ ุฏุนู Unicode ูู C ++ (ูุฏ ูุณุชุบุฑู ุงูุงูุชุธุงุฑ ููุชูุง ุทูููุงู) .  ูุฐุง ูุฅู ุนุจุงุฑุฉ "clang-format ูููู ุฃู ุชุณุจุจ ุงูุฎูุงุถ ุฃุฏุงุก 4x" ููุงุณุจุฉ ููุท ูุฑุฃุณ clickbait. <br><br>  ูู ููุญุธ ูุฐุง ุงูุชุฃุซูุฑ ูู ุฌููุน ุฅุตุฏุงุฑุงุช libcุ  ูุนู ุ ูู ูู ุดูุก ุชูุฑูุจูุง ุ ููู ุญุชู ููุง ููุณ ุจูุฐู ุงูุจุณุงุทุฉ. <br><br>  ุงููุชุงุฆุฌ ุงูููุถุญุฉ ุฃุนูุงู ุตุญูุญุฉ ุจุงููุณุจุฉ ุฅูู gcc 5.5 ู glibc 2.23 ุ ุญูุซ ุฃููู ุงุณุชุฎุฏูุช ูุฐู ุงูุฅุตุฏุงุฑุงุช ุ ููู ููุงู ุดูุฆูุง ุฌุฏูุฏูุง ูุญุฏุซ ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ (ุจุฏุกูุง ูู ุญูุงูู glibc 2.27).  ููุงู ุ ูุคุฏู ุชุดุบูู <i>&lt;algorithm&gt;</i> ูุจู <i>&lt;ctype.h&gt; ุฅูู</i> ุฅุนุทุงุก ููุณ ุงูุชุฃุซูุฑ ุ ูููู <i>&lt;stdlib.h&gt;</i> [10] ุงูุขู ูุฎูู ูุดุงูู ุฃูุถูุง: ุฅุฐุง ููุช <i>ุจุชุดุบููู</i> ูุจู <i>&lt;ctype.h&gt;</i> ุ ูุณูู ููุฎูุถ โโุงูุฃุฏุงุก ุฃูุถูุง ุ ููู ููุณ ูุฐูู ููุญุธ ูู ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ.  ูู ุงููุงุถุญ ุ ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุฏุซ ุ ูุญุชูู ุงูููู <i>&lt;stdlib.h&gt;</i> ุฃูุถูุง ุนูู ุชุนุฑูู <i>__NO_CTYPE</i> .  ุนูู ุงูุฃูู ุ ูู ูููู ูู ุงููููู ุงูุขู ุฅููุงุก ุงูููู ุนูู ุชูุณูู clang ูููุฑุฒ - ููุง ูููู ุฃู ูุณุงุนุฏ ูู ุญู ุงููุดููุฉ (ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ูููุงุช ูุดุงูู ุฃุฎุฑู ูู ูุงุฆูุฉ ุงููููุงุช ุงููุชุตูุฉ). <br><br>  ููุฏ ูุดุฑุช <a href="https://sourceware.org/bugzilla/show_bug.cgi%3Fid%3D25214">ุชูุฑูุฑูุง ุนู ุงูุฃุฎุทุงุก ูู libc</a> ุ ูุฐุง ููู ุงููุญุชูู ุฃู ูุชู ุฅุตูุงุญ ูุฐุง ุงูุฎุทุฃ ุ ูููู ูุง ุดู ูู ุฃู ุงูุฃุฎุทุงุก ุงููุชุนููุฉ ุจุงูุชุฑุชูุจ ุงูุฐู ุชุชุตู ุจู ูููุงุช ุงูุฑุฃุณ ุณุชุฒูุฏ ูู ููููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุนูููุงุช </h2><br>  ููุณ ูุฏู ูุธุงู ููุชุนููู ุนูู ูููุนู ุ ููููู ุฃุนูู ุนูู ุฐูู (ููุฐุง ูุนูู ุ ุจุดูู ุฏูุฑู ุ ูู ุงูุตุนุจ ุชูุฏูู ุชุนูููุงุช ุนูู ูููุน ุซุงุจุช). <br><br>  ูู ูุฐู ุงูุฃุซูุงุก ุ ููููู ููุงูุดุฉ ูุฐู ุงูููุงูุฉ ุนูู ูููุน <a href="https://news.ycombinator.com/item%3Fid%3D21579333">Hacker News ุนูู</a> ุงูููุจ ุฃู <a href="https://lobste.rs/s/tjxzck/clang_format_tanks_performance">lobste.rs</a> . <br><br><h2 style=";text-align:right;direction:rtl">  ุดูุฑ </h2><br>  ุจูุถู ูุณุชุฎุฏู ufo ูุน Hacker News ุ ุงูุฐู <a href="https://news.ycombinator.com/item%3Fid%3D21579483">ุฃูุถุญ</a> ุฃูู ููุณ ูู ุงูุถุฑูุฑู ุงุณุชุฎุฏุงู ูุธููุฉ lambda ูุชูููู <i>std :: toupper</i> ููุงุณุชุฎุฏุงู ูู <i>std ::</i> <i>convert</i> ุ ูุฃูุถูุง ุฅูู Jonathan Muller ุงูุฐู <a href="https://twitter.com/foonathan/status/1197051249822195712">ุฃูุถุญ</a> ุฃูู ูุง ุชุฒุงู ููุงู ุญุงุฌุฉ ุฅูู ูุธููุฉ lambda. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนู ุ <i>ูุธููุฉ toupper (3)</i> ูู ููู ุงูุฑุฃุณ <i>&lt;ctype.h&gt;</i> ุบูุฑ ููุงุณุจุฉ ููุนูู ูุน ูุนุธู ุงูุฃุญุฑู ุบูุฑ ASCII ุ ูุซู  ูุง ูููู ุงูุชุนุงูู ูุน ุงูุฃุญุฑู ุงูุฃูุจุฑ ูู ุจุงูุช ูุงุญุฏ ุ ููููุง ููุงุณุจุฉ ููููุชูุง ุ ุญูุซ ุฃููุง ุณููุฑุฑ ุณูุงุณู ุฃุญุฑู ASCII ููุท ุฅูููุง. </li><li style=";text-align:right;direction:rtl">  ูู ุฌุฏูู ASCII ุ ุชูุฌุฏ ุฃุญุฑู ุงูุฃุญุฑู ุงููุจูุฑุฉ ูุงูุตุบูุฑุฉ ูู ููุงู ููุงุฆู ุฌุฏูุง - ุนูู ูุณุงูุฉ 32 ููุถุนูุง ูู ุจุนุถูุง ุงูุจุนุถ ุ ููุง ูุนูู ุฃูู ููููู ููู ุงูุฃุญุฑู ูู ุญุงูุฉ ุฅูู ุฃุฎุฑู ุจุจุณุงุทุฉ ุจุทุฑุญ ุฃู ุฅุถุงูุฉ 32. ุจุดูู ุนุงู ุ ุฅุฐุง ุนูููุง ุจุงูุชุฃููุฏ ุฃู ุฌููุน ุงููุฏุฎูุงุช ุงูุจูุงูุงุช ูู ุฃุญุฑู ASCII ุ ูููููุง ุฅุนุงุฏุฉ ุชุนููู ุงูุจุช ุงูุฎุงูุณ ุฏูู ุฃู <i>ุงุฎุชุจุงุฑุงุช</i> (ุนูู ุณุจูู ุงููุซุงู ุ <i>c &amp; 0b11011111</i> ) ูุชุญููู ุฃู ุญุฑู ูุจูุฑ ุฅูู ุฃุญุฑู ุตุบูุฑุฉ ุ ูู ุญูู ุฃู ูุฐุง ูู ููุนูุณ ูู ุฃุญุฑู ุตุบูุฑุฉ.  ููู ูู ุงููุญุชูู ุฃููุง ูุง ูุนุฑู ุ ูุฐูู ูุชุนูู ุนูููุง ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุดุฎุตูุฉ ุนุจุงุฑุฉ ุนู ุญุฑู ุ ุญุชู ูุง ูุชู ูุณุฑ ุงูุฃุญุฑู ุบูุฑ ุงูุญุฑููุฉ ุจุทุฑูู ุงูุฎุทุฃ ูุซู <i>ุญุฑู char</i> . </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุทูู ุนููู ูุคุงูุฑุฉ ูุจุนุซุฑุฉ ูุน ุฅุถุงูุฉ "ุถูุถุงุก" ุฅูู ูููุน ุงูููุงุท.  ูู ุงููุงูุน ุ ูุนุฏ ูุฐุง ูุฎุทุทูุง ูุจุนุซุฑูุง ุนุงุฏููุง ูุชู ููู ุฑุณู ุงููุนููุฉ ุงูุชู ุชูููุง (ุญุฌู ุจูุงูุงุช ุงูุฅุฏุฎุงู) ุนูู ุงููุญูุฑ ุงูุณููู ุ ูุชููู ุณุฑุนุฉ ุงูุนูู ุนูู ุงููุญูุฑ ุต (ุงูููุงููุณ ููู ุฑูุฒ - <i>ูููุง ุงูุฎูุถุช ุงููููุฉ ุ ุงุฑุชูุนุช ุงูุณุฑุนุฉ</i> ).  ุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ููุฐุง ุงููุฎุทุท ูู ุฃูู ุจุงููุณุจุฉ ููู ูููุฉ ูุนููุฉ ุนูู ุงููุญูุฑ ุณ ุ ูุชู ุฃุฎุฐ ุงูุนููุงุช ุนุฏุฉ ูุฑุงุช: ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชูุฑุงุฑ ุงูุงุฎุชุจุงุฑ 10 ูุฑุงุช ููู ุญุฌู ุตููู. </li><li style=";text-align:right;direction:rtl">  ููู ุ ูุชู ุงุฎุชูุงุฑ ุงูุญุฑูู ุจุดูู ุนุดูุงุฆู ูููุญุฏ ูู ุงููุทุงู [32 ุ 127] ุ ูุจุงูุชุงูู ูุฅู ุงูุญุงูุฉ ูู ุงููุธููุฉ ุณุชููู ุตุญูุญุฉ ูู ุญูุงูู 27 ูช ูู ุงูุญุงูุงุช. </li><li style=";text-align:right;direction:rtl">  ุชุดูุฑ ููุชุง <i>ุงููุงุฆูุชูู</i> ุฅูู ุชุทุจูู ุฏูุฑุฉ ุฃูููุฉ ูุชุฎุชูู ููุท ุจุงูุชุฑุชูุจ ุงูุฐู <i>ูุชู ุจู ุชุถููู ูููุงุช</i> <i>&lt;algorithm&gt;</i> ู <i>&lt;ctype.h&gt;</i> .  ุดูุฑุฉ ุงููุตุฏุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ูู ููุณูุง ูุฌููุน ุงูุชุทุจููุงุช - ุณูุงุก ูู ุงูุฅุตุฏุงุฑุงุช ุงูุณุฑูุนุฉ ุฃู ุงูุจุทูุฆุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุณููุชุฌ ุนู ุชูููุฐ ุจุงุณุชุฎุฏุงู <i>std :: convert</i> ููุณ ุฑูุฒ ุงูุชุฌููุน ุงูุจุทูุก ุฅุฐุง ููุช ุจุชุถููู ููู <i>&lt;algorithm&gt;</i> ุ ูุงูุฑูุฒ ุงูุณุฑูุน ููุณู ุฅุฐุง ููุช ุจูุณุฎ ุชุนุฑูู ุงููุธููุฉ ููุท ูุนุฏู ุชุถููู ุงูููู. </li><li style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุฅู ูุฐู ุงูุญููุฉ ุงูุณุฑูุนุฉ ุฃุจุทุฃ ููุง ูููู ุ ูุฃู ุงููุคุดุฑ ุฅูู ุฌุฏูู ุงููุฑุงุณูุงุช ููุฑุฃ ุนุฏุฉ ูุฑุงุช ( <i>mov rdx ุ QWORD PTR [rax]</i> ) ุฏุงุฎู ุงูุญููุฉ.  ูุฏ ูููู ูุฐุง ุงููุคุดุฑ ูุฎุชูููุง ููููุง ููุฅุนุฏุงุฏุงุช ุงูุฅูููููุฉ ุ ูููู ูุง ูุชู ุชุญุฏูุซู ุฃุซูุงุก ุชูููุฐ ุงูุฏูุฑุฉ ูุจุงูุชุงูู ูููู ูููู ุฎุงุฑุฌ ุงูุฏูุฑุฉ.  ูุฌุจ ุฃู ูููู ุงููุชุฑุฌู ูุนุชูุฏ ุฃูู ูุง ุชูุฌุฏ ุฃุณุจุงุจ ูุงููุฉ ูุฐูู ุ ูุฃููุง ููุชุจ ุฅูู ูุฌููุนุฉ ูู ุนูุงุตุฑ ุงูููุน <i>char</i> ุ ููููู ุงุณุชุฎุฏุงููุง ูู ุญูุซ ุงููุจุฏุฃ <i>ูุฃุณูุงุก</i> ูุณุชุนุงุฑุฉ ูู <i>[rax]</i> ุฃู  ูุคุดุฑ ุฅูู ุงูุฌุฏูู.  ุนูู ุฃู ุญุงู ุ ุญุชู <i>__restrict__</i> ูู ูุณุงุนุฏ ููุง.  ูููู ูู ุฅุตุฏุงุฑ ุขุฎุฑ ูู ุงูุญููุฉ ุ ุญูุซ ุชุชู ุฅุถุงูุฉ ููู <i>toupper</i> ุจุจุณุงุทุฉ ููุง ุชุชู ูุชุงุจุฉ ุฃู ุดูุก ุฅูู ุงููุตูููุฉ ุ <a href="https://godbolt.org/z/Kb6pc8">ูุชู ุชุทุจูู ูุฐุง ุงูุชุญุณูู</a> - ูุชู ูุฑุงุกุฉ ุงููุคุดุฑ ุฎุงุฑุฌ ุงูุญููุฉ. </li><li style=";text-align:right;direction:rtl">  ูุง ููุนูุณ ูุฐุง ุงูุงุฎุชุจุงุฑ ูู ุฑูุฒ ุงููุฌููุน ุงููุงุจู ููุงุณุชุจุฏุงู ุ ูุฃู ุงููุชุฑุฌู ูุนุฑู ุจุงููุนู ุฃู ููู <i>char</i> ููุฌูุฏุฉ ุฏุงุฆููุง ูู ุงููุทุงู <i>[-128 ุ 255]</i> .  ูุนุฏ ุงูุงุฎุชูุงุฑ ุถุฑูุฑููุง ููุท ูุฃู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช <i>ููุฏุงูุฉ toupper ยฉ</i> ุชูุจู ูููุฉ type <i>int</i> ุจุฏูุงู ูู <i>char</i> ุ ุจุญูุซ ูููู ูููุณุชุฎุฏู ุชูุฑูุฑ ุฃู ุนุฏุฏ ูุฃููู ูู ุงูููุน <i>int ุฅูููุง</i> ุ ุจูููุง ูุชู ุชุตููู ุฌุฏุงูู ุงููุฑุงุณูุงุช ูููู type <i>char ููุท</i> ุ ูุจุงูุชุงูู ูุฅู ุงููุญุต ูุณุงุนุฏ ุนูู ุชุฌูุจ ุงููุฑุงุกุฉ ุฎุงุฑุฌ ุงููุฎุฒู ุงููุคูุช . </li><li style=";text-align:right;direction:rtl">  ุจุงูููุงุณุจุฉ ุ ููุถุญ ูุฐุง ุณุจุจ <i>ุงุณุชููุงููุฉ</i> ุฅุฌุฑุงุกุงุช <i>std :: toupper</i> ุนู ุญุฌู ุจูุงูุงุช ุงูุฅุฏุฎุงู: ููู ูุง ุชุณุชุฎุฏู ุงููุฑูุน (ุจุงุณุชุซูุงุก ุนูููุงุช ุงูุชุญูู ูู ุงููุทุงู ุ ูุงูุชู ูุชู ุงูุชูุจุค ุจูุง ุจุดูู ููุญูุธ) ุ ูููู ุชุณุชุฎุฏู ุฌุฏูู ูุฑุงุณูุงุช ูุณุชูู ุนู ุงููุฑูุน.  <a href="https://habr.com/ru/company/pvs-studio/blog/480012/">โต</a> </li><li style=";text-align:right;direction:rtl">  ุงุณุชุจุฏุงู ูุฐู ุงูููุงููุฉ ูู ูุนูู ุญุชู ูุน ูุฌูุฏ ุฑุบุจุฉ ูููุฉ ููุบุงูุฉ: ูุต ุงููุธููุฉ ุบูุฑ ูุชููุฑ ูู ููู ุงูุฑุฃุณ. </li><li style=";text-align:right;direction:rtl">  ูุง ุฃุฌุฏ ุฎุทุฃู ุจุฃู ุญุงู ูู ุงูุฃุญูุงู ูุน <i>stdlib.h</i> (ุฃู <i>&lt;ุฎูุงุฑุฒููุฉ&gt;</i> ุ ููุฐู ุงููุณุฃูุฉ) - ูู ุงููุญุชูู ุฌุฏูุง ุฃู ุชุชุณุจุจ ุงูุนุฏูุฏ ูู ูููุงุช ุฑุฃุณ C ุงูุฃุฎุฑู ูุฌููุน ูููุงุช ุฑุฃุณ C ++ ุฃูุถูุง ูู ุญุฏูุซ ูุฐุง ุงูุณููู ุ ูู ุฃุฎุชุจุฑูุง.  ุฃูุง ูุฑุชุจุทุฉ <i>stdlib.h</i> ููุท ูู ุฃุฌู ุชุญุฏูุฏ <i>size_t</i> . </li></ol><br>  <b>ุงููุฐูุฑุฉ.</b>  ุชู ูุดุฑ ูุฐุง ุงูููุงู ูุฃูู ูุฑุฉ ุนูู ูููุน <a href="https://travisdowns.github.io/blog/2019/11/19/toupper.html">"ูุณุงุฆู ุงูุฃุฏุงุก"</a> .  ูุชู ูุดุฑ ุงูููุงูุงุช ุงููุชุฑุฌูุฉ ููุง ุจุฅุฐู ูู ุงููุคูู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480012/">https://habr.com/ru/post/ar480012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480000/index.html">ุฎุงุฏู WebRTC ูุคุดุฑ ุฌูุฏุฉ ุงูููุงุฉ ุนุจุฑ TCP</a></li>
<li><a href="../ar480002/index.html">ูุฑุงุฌุนุฉ DevOpsDays ููุณูู: ุฑุคู ูู 6 ุชูุงุฑูุฑ</a></li>
<li><a href="../ar480006/index.html">ูุคุดุฑ ุฌูุฏุฉ ุงูููุงุฉ ูุฎุงุฏู WebRTC ุนุจุฑ TCP</a></li>
<li><a href="../ar480008/index.html">ููุฑู ุฑูุบุงุชุดูู: "ููุฏ ุฌุฆุช ูุฃุนูู ุฌูุงุฒ M-1 ุ ููุง ุฃุนุฑู ุชูููุฉ ุงูููุจููุชุฑ"</a></li>
<li><a href="../ar480010/index.html">ุฃุนูู 3 ุนูุงุตุฑ HTML ูุญู ููุณู</a></li>
<li><a href="../ar480016/index.html">39 ูช ูู ุงูุดุฑูุงุช ุงูุฑูุณูุฉ SMB ุชูุงุฌู ูุฌูุงุช ุงูุฅูุชุฑูุช ุงููุณุชูุฏูุฉ</a></li>
<li><a href="../ar480018/index.html">ุชุทููุฑ ุชุทุจููุงุช ุงูุฌูุงู ูู ุจูุซูู. ููุชุจุฉ KivyMD</a></li>
<li><a href="../ar480022/index.html">ุจูุซูู ูุซูู</a></li>
<li><a href="../ar480024/index.html">ููุฉ: ูุนุงูุฌ ุชุนูููุงุช ูุงุญุฏุฉ</a></li>
<li><a href="../ar480026/index.html">ุงูุฅุนูุงู ุนู ูุนุงููุฉ Azure Spot Virtual Machines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>