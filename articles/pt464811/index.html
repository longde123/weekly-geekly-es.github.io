<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùï ü¶é üßôüèª Apple Music para o desenvolvedor üö∏ üóëÔ∏è üö™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Palavras introdut√≥rias 


 N√£o importa o quanto eles repreendam a Apple pela natureza fechada da plataforma e do pr√≥prio ecossistema, algumas de suas ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apple Music para o desenvolvedor</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464811/"><h2 id="vvodnye-slova">  Palavras introdut√≥rias </h2><br><p>  N√£o importa o quanto eles repreendam a Apple pela natureza fechada da plataforma e do pr√≥prio ecossistema, algumas de suas solu√ß√µes s√£o uma exce√ß√£o.  Existem muitos servi√ßos de streaming no mercado, mas o fornecimento de um SDK completo para streaming em produtos de terceiros √© extremamente pequeno; para o mercado russo, a lista de SDKs dispon√≠veis oficialmente √© limitada ao Deezer e √† Apple Music.  Obviamente, quando o Spotify chegar ao nosso mercado, haver√° mais SDKs dispon√≠veis, mas at√© agora existem dois players e apenas um deles possui uma ampla base de usu√°rios. </p><br><p>  Aconteceu que eu tinha experi√™ncia com o Deezer SDK para Android e agora estou trabalhando ativamente com o Apple Music SDK ( <em>MusicKit</em> ) para iOS.  E a principal diferen√ßa da experi√™ncia com o Deezer √© que o MusicKit √© a ponta do iceberg, tamb√©m √© uma API dispon√≠vel ao p√∫blico.  Ao contr√°rio do Deezer, onde repetir a maior parte da funcionalidade do aplicativo oficial √© apenas um processo demorado, √© imposs√≠vel repetir a funcionalidade das p√°ginas da web do Apple Music usando apenas a API p√∫blica.  Mesmo que a Apple use o MusicKit em suas solu√ß√µes, al√©m disso, ela usa uma s√©rie de solicita√ß√µes de API n√£o documentadas e APIs privadas que n√£o s√£o permitidas pelos mortais. </p><br><p>  No artigo, falarei sobre como trabalhar com o MusicKit do ponto de vista do desenvolvedor no contexto da implementa√ß√£o de " <em>tarefas simples</em> ": pesquise no cat√°logo, mostre imagens nos resultados da pesquisa, obtenha m√∫sicas, recomenda√ß√µes e at√© toque algum tipo de m√∫sica.  Olhando para o futuro, direi que grande parte das op√ß√µes acima ser√° verdadeira para trabalhar com a Apple Music no Android e Javascript. </p><br><p>  Se necess√°rio, estou pronto para fornecer respostas detalhadas com um c√≥digo para perguntas nos coment√°rios. </p><a name="habracut"></a><br><h2 id="otdelim-muh-ot-kotlet">  Moscas separadas de costeletas </h2><br><p>  Ao trabalhar com o MusicKit no iOS, voc√™ precisar√° interagir com as seguintes entidades: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">StoreKit</a> para autoriza√ß√£o no Apple Music e para oferecer uma assinatura do servi√ßo ( <em>refer√™ncia se voc√™ pode se inscrever no programa Afiliado</em> ) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API HTTP</a> para pesquisar e recuperar v√°rias informa√ß√µes de um diret√≥rio </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API</a> de Pesquisa do iTunes para pesquisar no diret√≥rio do iTunes (uma <em>alternativa muito √∫til √† API HTTP</em> ).  A Apple indica um limite de no m√°ximo 20 solicita√ß√µes por minuto, o que geralmente √© suficiente ao fazer solicita√ß√µes dos dispositivos dos usu√°rios </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Media Player</a> para reproduzir e gerenciar a fila </li></ul><br><p>  Al√©m disso, ao se conectar a um programa de afiliados, voc√™ pode solicitar acesso ao dump de metadados do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Enterprise Partner Feed</a> , recomendado pela Apple, em vez de solicita√ß√µes frequentes √† API de pesquisa do iTunes. </p><br><p>  E, por precau√ß√£o, o Music.app √© o aplicativo Music em dispositivos iOS, que √© o player oficial da Apple Music. </p><br><p>  Fontes de informa√ß√£o, em ordem decrescente de sua utilidade: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Documenta√ß√£o oficial</a> </li><li>  Pesquisar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">toda a documenta√ß√£o da</a> Apple </li><li>  M√©todo <sup>1 da</sup> experi√™ncia cient√≠fica com API HTTP </li><li>  Console do desenvolvedor no seu navegador favorito, associado √† p√°gina da web da entidade de interesse no Apple Music </li><li>  F√≥runs de desenvolvedores da Apple </li><li>  Stackoverflow </li></ul><br><h2 id="poisk-kartinki">  Pesquisar.  Imagens </h2><br><p> A maneira mais √≥bvia de verificar se algo pode ser feito em seu aplicativo √© o fato de que algo assim esteja dispon√≠vel no aplicativo oficial.  Aqui tomamos, por exemplo, uma pesquisa.  Estamos procurando o grupo "The Police" e no <code>Music.app</code> temos uma foto do grupo com uma Sting sorridente: </p><br><img alt="pesquisa policial" src="https://habrastorage.org/webt/wn/jo/31/wnjo31ts3vxptbekvmhgdmxttqq.png" width="200"><br><p>  √ìtimo, usaremos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a API de pesquisa</a> .  Na emiss√£o, temos a chave da <code>artwork</code> final com um link de <code>url</code> incorporado para tudo, exceto artistas.  Isso √© estranho  Verifique novamente, no Music.app est√° tudo l√°.  Al√©m disso, a interface da web tamb√©m possui uma fotografia e um link para a p√°gina da web est√° dispon√≠vel na API do mecanismo de pesquisa json. </p><br><p>  A API de pesquisa do iTunes tamb√©m n√£o <code>artistLinkUrl</code> imagem, mas tamb√©m inclui o endere√ßo da p√°gina da web com a chave <code>artistLinkUrl</code> na <code>artistLinkUrl</code> . </p><br><p>  Bem, o que fazer, voc√™ precisa baixar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">p√°gina</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Web</a> e obter o endere√ßo da imagem, felizmente, os desenvolvedores cuidaram e registraram o endere√ßo da imagem na meta-informa√ß√£o: </p><br><pre> <code class="plaintext hljs">&lt;meta property="og:image" content="https://is5-ssl.mzstatic.com/image/thumb/Features113/v4/bb/a2/66/bba266dd-570b-bff7-d7c6-777982582964/mzl.tdrwskof.jpg/1200x630cw.png" id="ember52310559" class="ember-view"&gt;</code> </pre> <br><p>  Formalmente, j√° violamos as regras da Apple que pro√≠bem "raspar" suas p√°ginas da web.  De fato, todos os aplicativos de terceiros fazem isso, exceto aqueles que procuram fotos usando servi√ßos de terceiros. </p><br><p>  H√° mais um menos: solicitamos uma p√°gina com v√°rias centenas de kilobytes de tamanho.  Para um aplicativo que j√° gera grandes quantidades de dados ( <em>tocando m√∫sica</em> ), √© toler√°vel ( <em>especialmente quando voc√™ considera que os dados s√£o transmitidos em forma compactada</em> ), mas, no caso geral, n√£o √© muito. </p><br><p>  Os tamanhos das imagens podem ser ajustados √†s suas necessidades: no <code>url</code> existem modelos para substitui√ß√£o ( <code>{w}</code> , <code>{h}</code> ) e, na p√°gina da web, o link para a imagem tem o mesmo formato, portanto, n√£o h√° dificuldade em obter a imagem do tamanho certo.  Se voc√™ deseja obter uma imagem arredondada, adicione <code>cw</code> antes da extens√£o. </p><br><h3 id="bonus-pro-kartinki-dlya-otobrazheniya-v-pleere">  B√¥nus sobre imagens a serem exibidas no player </h3><br><p>  Durante a reprodu√ß√£o, o player do <code>Media Player</code> opera na constru√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>MPMediaItem</code></a> , que, em particular, fornece um objeto <code>Artwork</code> .  √â muito conveniente para exibir uma imagem de uma faixa no player.  O √∫nico problema √© que, na pr√°tica, esse objeto, o que quer que se diga, n√£o fornece imagens para streaming de m√∫sica ( <em>que √© qualquer m√∫sica da Apple Music</em> ), ent√£o voc√™ precisa "reproduzir" o <code>MPMediaItem</code> reproduzido com m√∫sicas que foram adicionadas √† fila e baixadas a imagem √© semelhante aos √°lbuns. </p><br><h2 id="poisk-po-zhanram">  Pesquisa por g√™nero </h2><br><p>  O iTunes e o aplicativo Apple Music t√™m listas de g√™neros e m√∫sicas principais.  Encontrar um g√™nero n√£o deve ser dif√≠cil, porque podemos procurar alguma coisa? </p><br><p>  Isso est√° longe de ser o caso.  A API n√£o pesquisa por g√™nero e n√£o fornece uma lista de g√™neros.  √â poss√≠vel solicitar informa√ß√µes ( <em>de nome √∫til</em> ) de um g√™nero por seu identificador, <br>  mas a maioria das informa√ß√µes na API cont√©m apenas o nome do g√™nero, n√£o o identificador. </p><br><p>  O benef√≠cio para o iTunes √© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">descarregamento de todos os g√™neros</a> ( <em>todos eles, incluindo os "g√™neros" dos aplicativos m√≥veis</em> ).  Identificadores de g√™neros ( <em>como outros identificadores do iTunes</em> ) correspondem totalmente aos identificadores no Apple Music.  O descarregamento est√° dispon√≠vel para todas as regi√µes (a <em>regi√£o √© indicada na chave <code>cc</code> , n√£o na <code>storefront</code> da <code>storefront</code> como na Apple Music API</em> ), mas, na verdade, apenas os nomes diferem ( <em>eles s√£o traduzidos</em> ).  A estrutura dos g√™neros √© hier√°rquica e h√° repeti√ß√µes dos nomes dos g√™neros. </p><br><p>  Em geral, uma pesquisa por g√™nero deve ser feita localmente, e lembre-se de que o funk jazz, o jazz funk e o jazz funk s√£o a mesma coisa.  N√£o √© dif√≠cil, mas n√£o t√£o simples quanto pedir √† API de pesquisa para pesquisar por g√™nero. </p><br><p>  Tendo encontrado um g√™nero, voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solicitar um gr√°fico</a> (uma <em>lista das m√∫sicas mais populares</em> ) para esse g√™nero.  Para g√™neros raros, √© bem poss√≠vel obter apenas 3 m√∫sicas. </p><br><p>  Curiosidade: para alguns √°lbuns e artistas ( <em>Ed Sheeran, do famoso</em> ), apenas um dos g√™neros indica simplesmente o g√™nero de n√≠vel superior de "Music".  Se voc√™ deseja fazer recomenda√ß√µes com base em g√™neros, esse g√™nero deve ser ignorado. </p><br><h2 id="pesni-artistov">  Can√ß√µes de Artista </h2><br><p>  Quando um aplicativo precisa reproduzir m√∫sicas de um artista ( <em>grupo musical</em> ) com mais frequ√™ncia, isso significa que √© necess√°rio reproduzir m√∫sicas <em>populares</em> desse grupo.  O Apple Music possibilita solicitar m√∫sicas como um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> "m√∫sicas" <sup>2</sup> para o artista.  A sa√≠da tem no m√°ximo 20 m√∫sicas <sup>3</sup> , claramente classificadas por popularidade. </p><br><p>  √Äs vezes voc√™ ainda deseja obter um pouco mais de m√∫sicas.  Com grupos muito populares, h√° uma op√ß√£o para obter listas de reprodu√ß√£o como " <em>[Nome do artista]:</em> <em>Essentials</em> " e " <em>[Nome do artista]: Detalhes</em> " (" <em>[Nome do artista]: pr√≥ximas etapas</em> "), mas em geral, esta op√ß√£o n√£o √© adequada.  Outra op√ß√£o: pegue 20 m√∫sicas populares e finalize o restante dos √°lbuns, o benef√≠cio do Apple Music possibilita obter imediatamente todos os √°lbuns de artistas ( <em>links como <code>albums</code></em> ) e todas as m√∫sicas neles ( <code>include="tracks"</code> ) em uma solicita√ß√£o. </p><br><p>  Mas se voc√™ receber todas as m√∫sicas do artista, surge outro problema: voc√™ precisa selecionar as m√∫sicas populares de todas essas m√∫sicas.  Infelizmente, a API de informa√ß√µes de popularidade n√£o fornece <sup>4</sup> .  Voc√™ pode tirar m√∫sicas aleat√≥rias de toda a lista, mas, na pr√°tica, essa abordagem leva √† reprodu√ß√£o frequente de grava√ß√µes completamente desinteressantes ( <em>transcri√ß√µes ao vivo, grava√ß√µes de ensaios, eremit√©rios etc.</em> ), o que √© especialmente percept√≠vel em grupos muito populares <sup>5</sup> . </p><br><p>  Vamos tentar obter m√∫sicas populares de uma maneira diferente.  Mesmo antes do advento do MusicKit, a Apple come√ßou a fornecer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">APIs de pesquisa</a> na iTunes Store.  Como j√° mencionado, o cat√°logo na Apple Music e na iTunes Store s√£o os mesmos <sup>6</sup> e, portanto, os identificadores das m√∫sicas tamb√©m s√£o os mesmos.  Essa API retorna 50 m√∫sicas por padr√£o, mas voc√™ pode solicitar at√© 200 m√∫sicas.  Os resultados tamb√©m s√£o classificados por popularidade. </p><br><p>  Curiosamente, a pr√≥pria Apple n√£o usa nenhuma dessas op√ß√µes em sua pr√≥pria interface da web.  Eles usam a API <sup>7 n√£o</sup> documentada ( <em>leitura, privada</em> ) <sup>7</sup> , cuja emiss√£o est√° faltando, incluindo o identificador ( <em>e n√£o apenas o nome</em> ) do g√™nero e o √≠ndice de popularidade.  N√£o ousei usar essa API na pr√°tica <sup>8</sup> , pois os identificadores de g√™nero podem ser obtidos por pesquisa reversa pelos nomes de g√™nero <sup>9</sup> e o √≠ndice num√©rico de popularidade n√£o √© t√£o importante quando voc√™ obt√©m uma lista de m√∫sicas classificadas por popularidade. </p><br><p>  O fato engra√ßado que chamo de " <em>problema de Hugh Laurie</em> " √© que o cat√°logo da Apple Music tem toneladas de conte√∫do n√£o musical.  Em particular, v√°rias compila√ß√µes de programas de com√©dia e stand-ups.  Isso √© bom, por um lado ( <em>pagamos pela m√∫sica, mas tamb√©m tivemos di√°logos engra√ßados com Stephen Fry, que voc√™ pode ouvir antes de ir para a cama</em> ) e, por outro, isso leva a algum tipo de conversa quando solicitado a ativar a m√∫sica.  Por conseguinte, quando o contexto operacional do aplicativo indica diretamente que o usu√°rio deseja ouvir m√∫sica, √© necess√°rio remover independentemente da lista de " <em>m√∫sicas</em> " aquelas cujos g√™neros s√£o designados como " <em>palavra falada</em> " e " <em>com√©dia</em> ". </p><br><h2 id="rekomendacii">  Recomenda√ß√µes </h2><br><p>  Recomenda√ß√µes de reprodu√ß√£o (tamb√©m s√£o " <em>m√∫sicas semelhantes</em> ", " <em>esta√ß√µes de r√°dio</em> ", " <em>voc√™ vai gostar</em> " etc.) tornaram-se a funcionalidade b√°sica dos players de streaming.  Convencionalmente, as recomenda√ß√µes podem ser divididas em dois tipos <sup>10</sup> : para o usu√°rio (com <em>base no hist√≥rico de audi√ß√£o, compras e curtidas</em> ) e para o objeto musical ( <em>artista, faixa, menos frequ√™ncia, √°lbum e lista de reprodu√ß√£o</em> ). </p><br><p>  Com as prefer√™ncias do usu√°rio no Apple Music, <sup>11</sup> tudo est√° bem: voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solicitar uma lista de</a> recomenda√ß√µes pessoais, que incluem " <em>mixagens pessoais</em> " ( <em>listas de reprodu√ß√£o</em> ) e √°lbuns recomendados.  Nos √°lbuns, √© poss√≠vel obter uma lista de m√∫sicas usando as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>API   ( tracks</code></a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>API   ( tracks</code> )</a> , para listas de reprodu√ß√£o da mesma forma.  Lembre-se de que as faixas podem incluir n√£o apenas m√∫sicas ( <code>type = "songs"</code> ), mas tamb√©m clipes de v√≠deo, para que a filtragem adicional dos dados recebidos n√£o prejudique. </p><br><p>  Com outras recomenda√ß√µes, tudo √© um pouco mais complicado.  Se voc√™ olhar para o Music.app, " <em>artistas semelhantes</em> " ser√£o exibidos l√° e voc√™ poder√° ativar a " <em>esta√ß√£o de r√°dio</em> " desse artista.  O √∫ltimo perde a mistura do artista e recomenda√ß√µes para ele. </p><br><img alt="pol√≠cia semelhante" src="https://habrastorage.org/webt/lr/yr/e2/lryre2qusu_88h-xyvna4_gs8kc.png" width="200"><br><p>  Parece que tudo √© simples: para artistas, provavelmente existe uma conex√£o de " <em>artistas semelhantes</em> ".  Corro para chatear, n√£o existe tal conex√£o.  Tamb√©m n√£o h√° informa√ß√µes de similaridade no esquema de dados do Enterprise Partner Feed. </p><br><p>  Ok, ent√£o podemos solicitar uma " <em>esta√ß√£o de r√°dio</em> " para o artista e obter uma lista de m√∫sicas?  E, novamente, n√£o, podemos realmente solicitar uma esta√ß√£o de r√°dio, seu identificador est√° na emiss√£o das conex√µes do artista.  Mas nas informa√ß√µes da esta√ß√£o n√£o h√° informa√ß√µes sobre as m√∫sicas, √°lbuns ou artistas sendo reproduzidos, h√° apenas um objeto de servi√ßo com informa√ß√µes para reproduzir <code>playParams</code> .  A id√©ia com <code>playParams</code> simples: alimentamos esse dicion√°rio <sup>12</sup> na fila de reprodu√ß√£o e ouvimos. </p><br><p>  Tudo isso √© bom se voc√™ deseja reproduzir apenas uma esta√ß√£o de r√°dio ( <em>como o Music.app</em> ), mas e se voc√™ quiser misturar m√∫sicas da esta√ß√£o de r√°dio <sup>13</sup> com outra coisa?  Obviamente, precisamos de alguma forma obter uma lista de artistas semelhantes. </p><br><p>  No <code>Media Player</code> , as filas de reprodu√ß√£o desempenham um papel importante, em particular <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MPMusicPlayerControllerMutableQueue</a> .  A fila permite: inserir descritores ap√≥s um determinado objeto reproduz√≠vel, excluir objetos especificados e tamb√©m obter uma lista de todos os objetos na fila.  Ao consultar objetos para sa√≠da, devemos obter uma matriz de <code>MPMediaItem</code> .  E o <code>MPMediaItem</code> , em particular, inclui o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">identificador da m√∫sica</a> .  H√° apenas um problema: os construtores de filas n√£o s√£o uma API p√∫blica, traduzirei: o <code>Media Player</code> pode fornecer uma fila pronta (√†s vezes <em>edit√°vel</em> ), mas √© imposs√≠vel criar voc√™ mesmo <sup>14</sup> . </p><br><p>  Bem, cavar um pouco em dire√ß√£o √†s muletas pode ser √∫til.  Se o <code>Media Player</code> puder me fornecer uma fila vari√°vel, eu preciso aceit√°-la.  Para fazer isso, voc√™ ter√° que trabalhar com o atual ( <em>singleton</em> ) player, para que voc√™ precise agir rapidamente, caso contr√°rio, o usu√°rio poder√° perder algo errado, e o player ainda ter√° tempo para pr√©-carregar as m√∫sicas que s√£o desnecess√°rias at√© o momento.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mudamos a</a> fila de reprodu√ß√£o atual ( <em>adicionamos o descritor da esta√ß√£o</em> ), olhamos o que aconteceu, reverte as altera√ß√µes na fila com uma nova transa√ß√£o ( <em>exclua o que realmente foi adicionado √† fila</em> ). </p><br><p>  Infelizmente, descobrimos que apenas dois objetos <code>MPMediaItem</code> s√£o <code>MPMediaItem</code> √† fila.  Ambos parecem m√∫sicas ( <em>existe o nome do artista, o nome da faixa, o comprimento da faixa</em> ), mas n√£o incluem o identificador da m√∫sica.  Se voc√™ olhar para Music.app, descobrimos que tudo converge para l√°: ligar a esta√ß√£o de r√°dio tocar√° a m√∫sica e, na fila, haver√° apenas uma m√∫sica para tocar.  Quando voc√™ passa para a pr√≥xima m√∫sica, a fila √© atualizada. </p><br><p>  N√£o faz sentido tentar aumentar ainda mais as muletas com as esta√ß√µes de r√°dio; √© preciso usar outras op√ß√µes. </p><br><p>  Lembre-se de que, no Music.app e na interface da web, artistas semelhantes s√£o exibidos.  Artistas semelhantes est√£o dispon√≠veis apenas para as bandas mais populares <sup>15</sup> .  Novamente, voc√™ deve recorrer ao m√©todo proibido de analisar uma p√°gina da web.  Dos profissionais: j√° estamos baixando uma p√°gina da web para obter uma imagem, para que possamos obter artistas semelhantes imediatamente. </p><br><p>  No c√≥digo da p√°gina html, vemos um grande objeto json, do qual escolhemos primeiro os identificadores de artistas semelhantes ( <code>["data"]["relationships"]["artistContemporaries"]</code> ): </p><br><img alt="dados da p√°gina da web" src="https://habrastorage.org/webt/xg/o-/yx/xgo-yxn-dh73gqcd8zieowzam3y.png" width="200"><br><p>  e, usando esses identificadores, obtemos os dados do artista do mesmo json ( <code>["included"]</code> com o tipo <code>lockup/artist</code> ): </p><br><img alt="p√°gina da web inclu√≠da" src="https://habrastorage.org/webt/j8/du/my/j8dumysqer6_oh9wlj_8geroip4.png" width="300"><br><p>  Tendo os identificadores dos artistas, podemos solicitar suas faixas.  A API permite solicitar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√°rios artistas</a> por seus identificadores em uma √∫nica solicita√ß√£o com os links ativados.  Infelizmente, na pr√°tica, a API retorna um erro indicando a impossibilidade de adicionar uma lista de trilhas ao resultado.  Isso s√≥ pode ser feito solicitando artistas um de cada vez ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solicitando diretamente m√∫sicas</a> para um √∫nico artista.  Nesse caso, voc√™ pode usar a API de pesquisa do iTunes j√° mencionada, que fornecer√° informa√ß√µes um pouco mais √∫teis. </p><br><p>  As listas de " <em>artistas semelhantes</em> " no Apple Music s√£o muito boas, mas, na pr√°tica, muitas vezes acabam vazias.  Na situa√ß√£o de uma lista vazia de recomenda√ß√µes, voc√™ precisa usar servi√ßos de terceiros.  Cl√°ssicos - Last.fm, um pouco mais sofisticado - Spotify.  Os resultados de ambos precisam corresponder aos objetos no cat√°logo da Apple Music.  A solu√ß√£o "na testa" √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">procurar cada artista</a> pelo nome com exatamente um resultado e depois receber as m√∫sicas conforme descrito acima.  As solu√ß√µes s√£o um pouco mais interessantes, mas √© mais caro usar o musicbrainz para correspond√™ncia.  O Musicbrainz fornece informa√ß√µes sobre os identificadores <sup>16</sup> em outros servi√ßos, ou seja,  Voc√™ pode associar um identificador no Spotify a um identificador no Apple Music.  A situa√ß√£o com a Last.fm √© ainda melhor: a Last.fm retorna identificadores de musicbrainz na lista de recomenda√ß√µes.  A sobrecarga est√° nos limites do uso do musicbrainz, com muito tr√°fego que voc√™ precisa para criar seu pr√≥prio clone do musicbrainz (felizmente, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">isso √© poss√≠vel</a> ) ou desenvolver sua pr√≥pria API em torno de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um banco de dados</a> , cujos arquivos podem ser facilmente baixados. </p><br><p>  Para novos grupos, at√© o Last.fm n√£o dar√° recomenda√ß√µes; as op√ß√µes alternativas s√£o recomenda√ß√µes de "g√™nero".  Pegamos os g√™neros do artista ( <em>com base no nome, obtemos identificadores da lista j√° carregada de todos os g√™neros</em> ), obtemos o gr√°fico de cada g√™nero, misturamos as m√∫sicas recebidas.  Isso √© melhor que nada. </p><br><h2 id="dve-veschi-nerazluchnye-pleer-i-ochered">  Duas coisas s√£o insepar√°veis: jogador e fila </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Media Player</a> √© respons√°vel pela reprodu√ß√£o no iOS do Apple Music; ele permite trabalhar com m√∫sicas do Apple Music e o diret√≥rio pessoal do usu√°rio <sup>17</sup> .  A estrutura √© de alto n√≠vel e, na situa√ß√£o de trabalhar com conte√∫do de streaming, descer para um n√≠vel abaixo de <sup>18</sup> n√£o funcionar√°. </p><br><p>  A estrutura fornece a dois players uma interface de software comum: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um</a> toca m√∫sica diretamente no aplicativo Music.app e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">outro</a> funciona de maneira mais ou menos independente.  Usar o primeiro para algo s√©rio n√£o faz sentido <sup>19</sup> .  E a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> descaradamente mente <sup>20</sup> que o segundo jogador n√£o funciona em segundo plano </p><br><p>  Do lado da arquitetura, trabalhar com esse assunto √© simples: dizemos ao player o que tocar ( <em>por exemplo, preenchendo a fila, com base em uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">variedade de identificadores de m√∫sica</a></em> ) e controlamos a reprodu√ß√£o ( <em>reproduzir, pausar, seguinte, anterior</em> ). </p><br><p>  N√£o h√° controle direto da fila de reprodu√ß√£o, √© necess√°rio executar uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">altera√ß√£o transacional</a> , o que leva tempo.  Al√©m disso, muitas vezes o manipulador de <code>completionHandler</code> √© chamado com um erro de tempo limite, que se traduz como " <em>N√£o sei se fui capaz de fazer algo ou se estou fazendo outra coisa, mas estou cansado de esperar por mim</em> ".  Na maioria das vezes, a transa√ß√£o vai bem e os erros que chegam ao manipulador precisam ser ignorados.  Algumas das altera√ß√µes podem ser feitas em um n√≠vel um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pouco mais</a> alto; no entanto, se voc√™ j√° precisou usar altera√ß√µes transacionais, √© melhor us√°-las para tudo. </p><br><p>  Em geral, as filas s√£o bastante flex√≠veis e, se n√£o for prov√°vel que seu aplicativo funcione com outros servi√ßos de streaming <sup>21</sup> algum dia, voc√™ pode fazer muitas coisas interessantes com as filas, em particular, indicar a que horas o elemento come√ßa a ser reproduzido e por quanto tempo. </p><br><p>  Dos outros " <em>desvios</em> " dessa abordagem de alto n√≠vel, vale a pena notar a incapacidade de processar a√ß√µes do usu√°rio.  Pressionar o usu√°rio no fone de ouvido do bot√£o " <em>pr√≥xima faixa</em> " n√£o levar√° a uma solicita√ß√£o do programa " <em>o que devo fazer</em> ", o jogador saber√° melhor o que fazer e mudar√° a m√∫sica.  Portanto, voc√™ s√≥ pode capturar as altera√ß√µes realmente conclu√≠das no estado do jogador e tomar algumas decis√µes ap√≥s o fato. </p><br><p>  Por outro lado, voc√™ n√£o precisa fazer muito: as informa√ß√µes sobre a reprodu√ß√£o na tela de bloqueio est√£o simplesmente l√° e todos os bot√µes funcionam, o Apple Watch e o Siri podem controlar a reprodu√ß√£o, e a transmiss√£o via AirPlay para a Apple TV funciona fora da caixa <sup>22</sup> . </p><br><p>  √â poss√≠vel repetir a funcionalidade e a interface da fila Music.app em seu aplicativo, mas a aparente simplicidade dos elementos de arrastar e soltar da fila acaba sendo transa√ß√µes de malabarismo para alterar a fila e sincronizar a fila desejada e a fila real de <sup>23</sup> jogadores. </p><br><h2 id="para-slov-pro-sdk-dlya-drugih-platform">  Algumas palavras sobre o SDK para outras plataformas </h2><br><p>  De fato, trabalhar com a API n√£o √© diferente em outras plataformas, mas os SDKs n√£o s√£o completamente copiados em carbono com o iOS e, em alguns lugares, s√£o mais convenientes <sup>24</sup> , embora a id√©ia geral de uma fila e um player tandem permane√ßam. </p><br><p>  Portanto, no Android, voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">obter a fila atual</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mover os elementos da fila</a> sem truques com uma mudan√ßa transacional ( <em>removendo da fila e adicionando ao lugar certo com os dedos cruzados</em> ). </p><br><p>  O MusicKit JS tamb√©m fornece <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√©todos especiais de inv√≥lucro</a> para trabalhar com a Apple Music API, <br>  mas, ao usar wrappers, voc√™ n√£o pode ficar sem ler a documenta√ß√£o da pr√≥pria API.  Trabalhar com a fila e o player <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o</a> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mais conveniente que o SDK do iOS</a> , mas com pequenos complementos, ele <a href="">pode se tornar suport√°vel</a> . </p><br><h2 id="para-slov-o-simulyatore">  Algumas palavras sobre o simulador </h2><br><p>  Voc√™ pode trabalhar no simulador com o MusicKit apenas no contexto da comunica√ß√£o com a API HTTP, mas, mesmo nesse caso, ser√° necess√°rio estabilizar o token do usu√°rio para a realiza√ß√£o de solicita√ß√µes e n√£o obt√™-lo atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">StoreKit</a> .  √â completamente imposs√≠vel reproduzir m√∫sica do Apple Music no simulador, porque o aplicativo Music.app est√° ausente. </p><br><p>  De fato, voc√™ precisa desenvolver seus pr√≥prios complementos no SDK e, ao executar no simulador, usar implementa√ß√µes alternativas ( <em>simuladas</em> ).  De fato, durante o desenvolvimento, o simulador √© √∫til apenas para trabalhar na interface do usu√°rio.  A pr√≥pria abstra√ß√£o tamb√©m ser√° √∫til em capturas de tela automatizadas para o aplicativo ( <em>e, de fato, ao criar capturas de tela usando um simulador</em> ), j√° que ter duas gera√ß√µes de ‚Äúgrandes‚Äù profissionais de iPad no arsenal apenas para capturar capturas de tela do seu player em ambos √© extremamente in√∫til e est√∫pido. . </p><br><p>  Como um experimento interessante, mas n√£o muito √∫til, voc√™ pode fazer uma implementa√ß√£o alternativa do seu pr√≥prio player de alto n√≠vel com base no MusicKit JS. </p><br><h2 id="pro-enterprise-partner-feed">  Sobre o feed do parceiro corporativo </h2><br><p>  Por um lado, a Apple fornece um despejo de metadados mediante solicita√ß√£o e diz para us√°-lo para reduzir a carga na API e obter informa√ß√µes que a API n√£o possui.  Por outro lado, temos um problema claro com frango e ovos: o acesso ao programa de afiliados √© fornecido especificando um link para o aplicativo.  √â bastante dif√≠cil desenvolver um aplicativo usando os dados que podem ser obtidos apenas com o aplicativo publicado na App Store. </p><br><p>  E, √© claro, os dados n√£o s√£o os primeiros a chegar.  Cada aplicativo √© verificado dentro de cinco dias √∫teis.  No momento da reda√ß√£o deste artigo, eu n√£o consegui obter um despejo de metadados em minhas m√£os.  A Apple encerrou meu aplicativo sem especificar os motivos exatos.  ,  -     " <em>Apple Music</em> "    ,    Apple   .   - ,      -, <em>       </em> . ,       Apple    ,    ,     . </p><br><p>       ,        ,         .             Apple Music    ( <em>      ,       </em> ),     . ,     ,     Apple Music  .         ,      ,      . </p><br><p>   Enterprise Partner Feed     : </p><br><ul><li>          Apple Music API  iTunes Search API </li><li>      (" <em> </em> "),   -   </li><li>        </li></ul><br><h2 id="ochevidnye-sovety">   </h2><br><p>    ,  -  : </p><br><ol><li>   .     ,   ,     .   <br>     ,   .         ,    -     </li><li>   -  ,   ,            . ,       -  ,             -. </li><li> ,  SDK         ,      .  Apple <sup>25</sup>   SDK     <sup>26</sup> ,         ,   ,     API  ,   SDK    . </li><li>      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>   " <em>code level</em> "      .      " <em>Q&amp;A</em> "  " <em>Tech Notes</em> ",     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a> ,      - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . </li><li>      . ,  ,       .  API ( <em>Last.fm, musicbrainz, iTunes Search API    </em> )    IP   .       Apple Music      .        " <em></em> "       ,         <sup>27</sup> . </li><li> ,   Apple Music API,       ,   . - App Store   ,      ( <em>    </em> )     , ,  ( <em>        </em> ).     <sup>28</sup>   ,    ,          ,            <sup>29</sup> .   Apple      <sup>30</sup> . </li><li> ,  - Apple Music ‚Äî   Ember.    ,   ,     html         DOM   Javascript. </li><li>   -,   ,          .          ,    . </li></ol><br><h2 id="posleslovie">  </h2><br><p>     SDK,        batch   API,          ,    ¬´ ¬ª  Apple Music.  ,     ,        SDK   .          SDK,             . </p><br><p> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . </p><br><h2 id="bespoleznye-primechaniya">   </h2><br><p> <sup>1</sup>    ( <em> </em> ) </p><br><p> <sup>2</sup> ,       </p><br><p> <sup>3</sup> ,  Music.app  -        ( <em>   </em> ),    API   ( <em>   ""</em> )  </p><br><p> <sup>4</sup>    <code>limit</code>  : <code>Specified limit for relationship 'songs' exceeds maximum of 20</code> </p><br><p> <sup>5</sup> The Beatles </p><br><p> <sup>6</sup>    ,      Apple Music   iTunes Store.   API iTunes Store   `isStreamablez,        Apple Music  . </p><br><p> <sup>7</sup>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewArtistSeeAll?cc=ru&amp;ids=424279384&amp;section=0</a> </p><br><p> <sup>8</sup>  ,     ,  ,     iTunes    ( <em></em> )   iTunes Store </p><br><p> <sup>9</sup>             </p><br><p> <sup>10</sup>  ,       ! </p><br><p> <sup>11</sup> ,    Apple Music      :   ,        ,      </p><br><p> <sup>12</sup> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MPMusicPlayerPlayParametersQueueDescriptor</a> </p><br><p> <sup>13</sup>   Apple Music   ,    ( <em></em> )   .        . </p><br><p> <sup>14</sup> , ,    App Store </p><br><p> <sup>15</sup>    ( <em></em> )    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">( <em></em> )</a>  ( <em></em> )    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">( <em></em> )</a> .       . </p><br><p> <sup>16</sup>       -,         </p><br><p> <sup>17</sup>     ,     iTunes Store    iTunes Match </p><br><p> <sup>18</sup>        API URL   </p><br><p> <sup>19</sup>  ‚Äî   -,       . ,  . </p><br><p> <sup>20</sup>  : ( <em>When your app moves to the background, the music player stops playing the current media.</em> ).       <code>AVPlayer</code> ,     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  <code>Info.plist</code>            . </p><br><p> <sup>21</sup>              . </p><br><p> <sup>22</sup>      ,    <code>MPMediaItem</code>    </p><br><p> <sup>23</sup>           </p><br><p> <sup>24</sup>     ,   SDK    ,     ,       .    iOS <code>Media Player</code>    ,     API  . </p><br><p> <sup>25</sup>         ,      ‚Äî      ,       . </p><br><p> <sup>26</sup>     SDK       ,    Apple Music. Apple    ,   . </p><br><p> <sup>27</sup>       ,      ‚Äî   . ,     Enterprise Partner Feed, musicbrainz,          API.  ,       ( <em>       </em> )    .      ,         . </p><br><p> <sup>28</sup> RIP </p><br><p> <sup>29</sup>   API  Bing </p><br><p> <sup>30</sup>        </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464811/">https://habr.com/ru/post/pt464811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464791/index.html">Kubernetes para o carro: como abrir o acesso do desenvolvedor ao computador de bordo e torn√°-lo seguro</a></li>
<li><a href="../pt464795/index.html">Merry Quartusel, ou como o processador ganhou vida</a></li>
<li><a href="../pt464803/index.html">"Ocultar www": por que os desenvolvedores de navegadores tradicionais se recusaram a exibir o subdom√≠nio</a></li>
<li><a href="../pt464805/index.html">Escrevendo uma cobra no ipad (pythonista)</a></li>
<li><a href="../pt464809/index.html">Como testamos a tecnologia de reconhecimento de rosto e o que veio dela</a></li>
<li><a href="../pt464813/index.html">Substituindo o Punto Switcher, layouts Birman por um script na autohotkey</a></li>
<li><a href="../pt464819/index.html">Meu sexto dia com o Haiku: sob o cap√¥ de recursos, √≠cones e pacotes</a></li>
<li><a href="../pt464823/index.html">Consideramos o sal√°rio m√©dio de um "cientista de dados". Parsim hh.ru usando pandas / python</a></li>
<li><a href="../pt464825/index.html">Preparando o aplicativo para Android Q. Parte 2</a></li>
<li><a href="../pt464831/index.html">Adicione a funcionalidade do Razor Pages ao .NET padr√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>