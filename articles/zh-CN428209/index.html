<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤟🏻 🤚🏿 ✅ 开发人员指南：域驱动设计食谱（第2部分，结构和交互） 💇 ✝️ ♿️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="引言 


 在第一篇文章中，我们重点介绍了指定实践的范围，可以将其应用到哪些项目中以及不应该将它们应用于哪些项目。 


在本文中，我将简要概述DDD的基本原理，并分享我在DDD应用中的个人经验。 我们将更详细地讨论通信和结构化方法，并举例说明其实现方式。 


 在下一篇文章中，我将考虑到它们的...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>开发人员指南：域驱动设计食谱（第2部分，结构和交互）</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428209/"><p><img src="https://habrastorage.org/webt/fr/vw/on/frvwonyhe7k6st_x65v67hcbrcs.jpeg" alt="ddd-header"></p><br><h1 id="vvedenie"> 引言 </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在第一篇文章中，</a>我们重点介绍了指定实践的范围，可以将其应用到哪些项目中以及不应该将它们应用于哪些项目。 </p><br><p>在本文中，我将简要概述DDD的基本原理，并分享我在DDD应用中的个人经验。 我们将更详细地讨论通信和结构化方法，并举例说明其实现方式。 </p><br><p> 在下一篇文章中，我将考虑到它们的实现，写下应用的设计模式的可能组合，最后，我将给出一个小型微服务的特定实现的示例。 </p><a name="habracut"></a><br><h1 id="ddd">  DDD </h1><br><p> 回顾之前的定义： </p><br><blockquote> 域驱动设计（DDD）是一种软件开发方法，它通过将实现与不断发展的主要业务模型紧密联系在一起，从而全面满足需求。 </blockquote><p> 用来描述构建复杂系统的实践的参考书是Eric Evans的《 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">领域驱动的定义》</a> （大蓝皮书）。 如果您阅读有关此主题的任何评论文章，则已经知道。 在实际使用DDD时，您将必须阅读它。 这不是最容易阅读的书： </p><br><blockquote>  DDD的规范来源是Eric Evans的书。 在软件文献中，这不是最容易阅读的书，但它却是其中一本可以充分回报巨额投资的书之一。 <br><br> 马丁·福勒（Martin Fowler）：2014年1月15日 </blockquote><p> 如果您滚动浏览这本书的内容，那么您似乎就不太习惯了。 但是地图会帮助我们。 <br><img src="https://habrastorage.org/webt/oh/5e/tj/oh5etj1mf-uvet2bdyn7y1olj8k.png" alt="DDD图"></p><br><p> 我们今天将考虑的是这些做法。 </p><br><p> 本书涵盖的实践范围非常广泛。 在本书之外可以应用的实践范围更大。 在至少使用其中一部分之前，请确定您的目标。 我将以自己为例。 </p><br><ul><li> 提高生产力。 </li><li> 编写易于理解的代码。 </li><li> 在软件开发级别进行扩展。 </li></ul><br><h2 id="edinyy-yazyk"> 单一语言 </h2><br><p> 软件开发很少会导致创建新的事物，通常，这是对现有事物的模拟。 </p><br><blockquote> 模型是真实对象的表示，仅包含必要的属性和功能。 </blockquote><p> 我们无法创建涵盖整个主题领域的软件产品。 只能复制其中将复制必要功能的那部分。 </p><br><p> 模型的一个很好的例子是地形图。 她是地形模型。 该地图不包含田野和河流的草地，仅反映了真实对象之间的相对位置。 </p><br><p> 要为每个人建立清晰明确的模型，您需要说相同的语言。 埃里克·埃文斯（Eric Evans）不仅告诉我们这一点，而且还告诉我们常识。 如果程序员使用他们的术语，并且使用他们自己的“ s语”，那么前者根本不会理解需要做什么。 在这种情况下，企业将无法实现开发一项或另一项“功能”的实际成本。 您听过多少次：“是的，这只是一个添加按钮”？ </p><br><p> 作为系统设计师，您的目标应该是使整个团队彼此之间有最大的了解。 如何实现呢？ 开始讲话。 如果人们开始在任何亲密的小组中进行交流，那么他们将具有某些普遍接受的术语。 在不同的公司中，引入通用语言的过程可能会有所不同。 这可以是一个意志坚定的决定，也可以是一个民主程序。 可以明确指出该语言，而不会明确输入，在这种情况下，他们只是开始讲这种语言。 通用文档是介绍通用语言的一种好方法。 </p><br><h3 id="kak-vesti-dokumentaciyu-proekta"> 如何保留项目文件 </h3><br><ol><li> 业务与开发之间的任何沟通都应该改善您的模型。 </li><li> 会议结束后，以文档（Scrum工件）的形式记录结果，并向开发过程中的所有参与者显示此文档。 </li><li> 在文档中使用一种语言。 </li><li> 最重要的是：不要在文档上浪费时间。 您仍然必须编写代码，并且文档将被多次重写，从而花费大量资源。 不要在手机上长时间摆弄UML图表应用程序，而要使用餐巾纸，笔和相机。 </li><li> 文档需要纪律；您不能不时编写。 </li><li> 分隔文档： <br><ul><li>代码中的注释-在代码中直接描述难以理解的时刻，保留<code>#ODO:</code>将代码合并到主代码时删除）。 在注释中表达您的意见，例如，在使用旧代码时必须使用一个或另一个拐杖。 </li><li> 项目根目录中的<code>README.md</code>项目的注释应包含技术信息：如何启动项目，如何运行测试等。 最好获得一张地图，其中包含所有项目以及它们在哪些服务器上运行。 单独记录所有接受的协议。 </li><li> 最重要的是知识库。 描述业务流程的文档的集合，这是您和企业都可以使用的文档的一部分。 </li></ul></li><li> 编写文档的人的主要错误是冗余。 不要试图覆盖所有内容，仅传达一般含义。 该文档应补充您的项目，但不能以任何方式替代它。 不要写下所有模棱两可的术语。 如果一个定义使用两个以上的句子，则定义很差。 </li></ol><br><p> 文档示例： </p><br><pre> <code class="markdown hljs"><span class="hljs-section"><span class="hljs-section">#         . # :  : -    - email -  ## : ###        ,     email  ,    1  (      email  ). ###           .          email . ###  email  email     .    ,    email.   . ###       ,     ,    .   . ###      email,    ,       .   2 . ###                  .    ,     ,             .</span></span></code> </pre><br><p> 请注意，在此示例中，我们没有指定显式词典，但是固定了<em>User</em> ， <em>Authorization</em> ， <em>Registration</em>的概念。 撰写此类文档不会花费专家超过20分钟的时间。 </p><br><p> 对于不是该领域专家的人来说，编写文档的过程被认为是复杂的。 有必要将知识的收集与收集的知识的记录分开。 <code> !=  +  .</code> </p><br><blockquote> 第四点说：“实际上，你所说的是宇宙的积累，就像弓的皮肤一样，它们彼此叠置，并逐渐彼此分离。” <br><br>  -非常清楚地说明！  -敬佩阿贝里德。  -太清楚了！  “他们认为他们了解哲学家，因为他们非常了解洋葱是什么。” <br><br> 阿伯丁故事，克里斯托夫·马丁·维兰德 </blockquote><br><h2 id="ogranichennyy-konteksty-i-domeny"> 有限的上下文和域 </h2><br><p> 想象一下，我们担任过一家渐进式创业公司的设计师。 我们都喜欢冷却的比萨饼，喜欢用快递员诅咒他们，并在网站上填写表格数小时。 因此，我们提出了一个很棒的创业公司“四只乌龟和一只老鼠”： </p><br><ul><li> 有一个在其上注册比萨店并张贴其实际菜肴的网站。 </li><li> 这些比萨店没有自己的快递服务。 </li><li> 有些客户无法到达比萨店，但他们准备通过网站或移动应用程序下订单。 </li><li> 杀手'的特征：快递员不是专门雇用的人员，而是通过移动应用程序注册的普通人 </li><li> 快递员收到订单后，便会收到已完成工作的付款。 </li><li> 等待这样的快递员需要更长的时间，但是送货以及相应的比萨更便宜。 </li></ul><br><p> 让我们回想一下上一章中描述的文档。 在那里，在我们的单本词典中，使用了<em>注册一词</em> 。 但是在这个项目中，我们有几个： </p><br><ul><li> 客户注册 </li><li> 比萨店注册 </li><li> 快递注册 </li><li> 订单注册 </li></ul><br><p> 统一语言属于有限的上下文。 以上文档的域是“授权系统”。 让我们尝试为我们的启动分配域。 </p><br><p> 但是在开始之前，我们先来看一下有关什么是域以及什么是有限上下文的一些术语。 </p><br><blockquote> 域（域）-解决特定问题的真实业务结构的表示。 </blockquote><p> 例如：物流系统，付款系统，授权系统，订单管理系统。 </p><br><p> 该域分为多个子域，这些子域描述了较小的结构，例如：一篮子订单，用于构建路线的系统。 </p><br><p> 每个域的责任范围都有限-功能有限。 </p><br><blockquote> 有界上下文-一组域限制，可帮助域仅将一项任务集中于最佳解决方案。 </blockquote><p> 我喜欢将此术语表示为一种抽象。 域是一个圆。 受限制的上下文是一个圆圈。 </p><br><p><img src="https://habrastorage.org/webt/nf/nm/jz/nfnmjzlgui85mvfatppogqv-kdq.jpeg" alt="域部份"></p><br><p> 即使使用DDD术语，也会分配内核。 </p><br><blockquote> 核心（核心域）-最能代表您的业务特征的最重要域。 </blockquote><p> 因此，项目“四只乌龟和一只老鼠”的领域： </p><br><p>  <strong>与比萨店合作</strong> （Pizzarias） </p><br><p>  <em>上下文</em> ：b2b与比萨店有关的一切 </p><br><p>  <em>子域名</em> ： </p><br><ul><li> 新比萨店的注册 </li><li> 添加分类 </li><li> 更新产品可用性的状态 </li></ul><br><p>  <strong>与客户</strong> （客户）合作 </p><br><p>  <em>上下文</em> ：b2c，与与披萨客户合作有关的一切 </p><br><p>  <em>子域名</em> ： </p><br><ul><li> 查看分类 </li><li> 信息资料 </li></ul><br><p>  <strong>与快递员合作</strong> （送货系统） </p><br><p>  <em>背景</em> ：b2e，与与快递员合作有关的一切 </p><br><p>  <em>子域名</em> ： </p><br><ul><li> 快递注册 </li><li> 任务分配 </li><li> 登记提取快递员赚取的资金的申请。 </li></ul><br><p> 订单系统 </p><br><p>  <em>上下文</em> ：内核。 允许您协调所有单个域，提供从接收订单到向用户发送披萨的完整周期。 它不是表演者，而是扮演指挥者的角色。 </p><br><p>  <em>子域名</em> ： </p><br><ul><li> 订单接受 </li><li> 订单执行 </li><li> 订单状态跟踪 </li></ul><br><p>  <strong>结算系统</strong> （计费） </p><br><p>  <em>上下文</em> ：包含所有财务交易。 它提供与处理中心的交互。 </p><br><p>  <em>子域名</em> ： </p><br><ul><li> 接受订单钱 </li><li> 给快递员做工作的钱 </li></ul><br><p>  <strong>统计系统</strong> </p><br><p>  <em>上下文</em> ：分析信息的收集和处理（而不是发布）。 </p><br><p>  <em>子域名</em> ： </p><br><ul><li> 资金统计 </li><li> 应用统计 </li></ul><br><p>  <strong>管理系统</strong> （管理面板） </p><br><p>  <em>上下文</em> ：发布分析信息。 管理决策工具包。 </p><br><ul><li> 基于收集的统计数据进行分析 </li><li> 预付快递员付款 </li></ul><br><p> 根据域，让我们对其进行映射。 </p><br><blockquote> 域映射（上下文映射）是一种图形工具，可让您描述各个域之间的关系。 </blockquote><p><img src="https://habrastorage.org/webt/p1/ks/po/p1kspot2qqut90gzcn1b9fhxyn8.png" alt="侧面图"></p><br><p> 该地图显示了域之间的链接。 该地图非常肤浅，但是对主题领域的了解却很少。 这是第一个草图，重写它会得到预期的结果。 </p><br><p> 地图上最重要的是，我们看到了域之间的连接。 这样的结构非常适合微服务架构： </p><br><blockquote> 微服务架构的主要原理：弱连接性和强粘附性。 </blockquote><p> 山姆·纽曼（Sam Newman）-《 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">创建微服务》（Create Microservices）</a>一书中给出了该原理，这是您为了开始实际使用本文中介绍的方法而必须阅读的第二本书。 含义：域应松散耦合，但内部应紧密相连。 </p><br><p> 这些术语的翻译来自官方的俄语翻译，可能无法很好地反映所传达的含义。 原始术语是：低耦合（连接性，接合，抓地力，接合），高内聚性（连接性，强度）。 </p><br><h2 id="praktika-realizacii-domennogo-razdelenie"> 域共享实施实践 </h2><br><p> 我想分享我的个人经验-一系列明智的决定。 我不敦促您使用这些解决方案。 但是，如果您不知道从哪里开始，那么它们可能是一个不错的选择。 凭着个人经验，这些工具将进一步适合您的需求。 </p><br><p> 指导我们的主要原则： </p><br><ul><li> 解决方案的简单性。 使复杂的事情变得简单，而不是简单的复杂。 </li><li> 实用主义 您始终需要查看情况，并且在没有现有解决方案的情况下，开发新的解决方案。 尽量代表一切，但要避免教条主义。 </li><li> 代码！=文档。 代码是机器的说明，文档是人的说明。 无需混淆它们，一个接一个地发出。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">实心</a> </li></ul><br><h3 id="kak-realizovat-domeny"> 如何实现域名？ </h3><br><p> 选择域作为单独的微服务非常方便。 </p><br><blockquote> 微服务是实现一个域的逻辑的独立应用程序。 </blockquote><p> 在DDD开发中，将微服务分配到单独的应用程序中的原理将受到限制。 这并不会否定服务分离​​的技术原理（如果这是由于需要确保高性能）。 但是上下文原则将是主导性和约束性的。 </p><br><h3 id="kak-vydelit-svyazi-mezhdu-domenami"> 如何突出域之间的关系？ </h3><br><p> 域之间的关系始终是一个API。 可能是RESTful json API，gRPC，AMPQ。 在本文的框架内，我们不会将一种协议与另一种协议进行比较，并强调它们的优缺点；每种协议都有自己的应用领域。 但是，让我们继续关注一般建议： </p><br><p>  <strong>选择协议时要灵活，执行协议的一致性要严格。</strong> </p><br><p> 为每对域分别选择一个协议，不要尝试在所有地方都使用http，您可能需要在某个地方使用异步队列，并且AMPQ的优势对您来说显而易见。 不要忽略这个机会，因为到处都有RESTful。 </p><br><p> 另一方面，如果要实现RESTful json，请使用一个数据结构标准。 您可以准备就绪，例如jsonapi或openapi。 如果由于某种原因，现成的解决方案不适合您，并且您认为可以开发，描述和使用它。 但是到处使用它，不要滋生“动物”标准。 如果您需要与他们对标准一无所知的外部系统进行通信，请编写一个微服务适配器。 </p><br><p><img src="https://habrastorage.org/webt/cz/ff/go/czffgobmp7v9lr2pzkjx0-3y5xq.png" alt="转接头"></p><br><h3 id="kak-realizovat-sabdomeny"> 如何实现子域？ </h3><br><p> 作为微服务中的独立模块。 </p><br><blockquote> 通过将逻辑放入单个微服务内的单独命名空间（名称空间）中，模块是子域的实现。 </blockquote><p> 看起来像什么？ 让我们来看一个例子。 我们记得，我们有一个Delivery System域-该域有三个子域： </p><br><ul><li> 快递注册 </li><li> 任务（任务）的发布 </li><li> 登记由快递员赚取的资金的提取申请（提取） </li><li> 检查您的微服务是否正常工作，辅助技术工具（healt_checker） </li></ul><br><p> 想象一下所有这些以文件夹结构的形式： </p><br><pre> <code class="bash hljs">$ tree --dirsfirst delivery_system delivery_system ├── app/ │ ├── health_checker/ │ │ └── endpoints.rb │ ├── registrations/ │ │ ├── entities/ │ │ ├── forms/ │ │ ├── repositories/ │ │ ├── interactor/ │ │ ├── services/ │ │ ├── validations/ │ │ ├── endpoints.rb │ │ └── helpers.rb │ ├── tasks │ │ ├── entities/ │ │ ├── queries/ │ │ ├── repositories/ │ │ ├── endpoints.rb │ │ └── helpers.rb │ └── withdrawals │ ├── entities/ │ ├── forms/ │ ├── repositories/ │ ├── interactor/ │ ├── services/ │ ├── validations/ │ ├── endpoints.rb │ └── helpers.rb ├── config/ ├── db/ ├── docs/ ├── lib/ │ ├── schemas/ │ └── values/ ├── public ├── specs ├── config.ru ├── Gemfile ├── Gemfile.lock ├── Rakefile └── README.md</code> </pre> <br><p>  <code>apps/</code>目录中的每个文件夹都实现一个或另一个子域，每个域中都有多种模式： <code>entities</code> ， <code>forms</code> ， <code>services</code>等。我们将在以后的文章中详细讨论每种应用的模式。 </p><br><p> 每个这样的模式都在相应的名称空间（名称空间）中实现。 例如，用于创建向快递公司付款的应用程序的表格： </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Withdrawal</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#   module Forms #  class Create end end end</span></span></span></span></code> </pre> <br><h3 id="kak-realizovat-svyazi-mezhdu-sabdomeny"> 如何实现子域之间的通信？ </h3><br><p> 让我们看一个具体的例子。 我们有一个快递帐户： <code>Registrations::Entities::Account</code> 。 它指的是<code>Registrations</code>子域-因为我们认为此域不是注册过程，而是帐户表和注册簿，如业务文档中所示。 </p><br><p> 我们有两个执行<em>流程</em> ，可以访问该帐户。 </p><br><ul><li> 创建一个帐户（注册） </li><li> 申请提取快递员赚取的资金（Wihtdrawal） </li></ul><br><p> 如我们所见，这两个过程属于不同的子域-注册和Wihtdrawal。 </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registrations</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serivices</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateAccount</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">call</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entities::Account</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Withdrwals</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serivices</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateOrder</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">call</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registrations::Entities::Account</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p> 在第一种情况下，将通过对<code>Entities::Account</code>的调用来实现对该类的调用。 在第二种情况下，通过显式调用<code>Registrations::Entities::Account</code> 。 即 如果我们明确指定一个子域，则该类来自另一个子域，因此我们清楚地指出了连接。 </p><br><p> 如果该类未明确应用于任何子域，则将其移至<code>lib/</code>文件夹是有意义的。 通常，这些是实现“ ValueObject”模式的类。 在以下文章之一中，我们将更详细地研究这种模式。 </p><br><h2 id="realizaciya-cherez-model"> 通过模型执行。 </h2><br><p> 引用埃里克·埃文斯的话： </p><br><blockquote> 如果程序的体系结构或其至少某些中心部分与领域模型的结构不符，则该模型实际上是无用的，还应质疑程序的正确操作。 同时，很难理解软件体系结构中模型和功能之间的关系太复杂，并且在实践中，随着体系结构的变化，很难维护它们。 </blockquote><p> 让我们回想一下本文开头已经提到的一个好的模型的例子-地形图。 我们的目标是能够快速找到两个定居点之间的距离。 我们可以使用参考表来显示城市之间的两个点。 我们可以使用该卡。 那里和那里我们大约在同一时间获得相同的结果。 但是地图更紧凑，它更准确地显示主题区域，更通用。 地图作为模型具有极高的表现力。 而且，如果我们在此任务的框架内考虑它，那么在地图上测量距离比在其本身反映的领土上更方便。 反映主题区域的模型在某些属性上可能会超越它。 真的很棒。 </p><br><p> 模型的实施始终是一个具有不可预测结果的创新过程。 代码的质量不是其性能，也不是其复杂性，而是简单性和表达性。 通过不断的重构来改进它，使其变得灵活并切断所有不必要的东西。 将负责模型的业务逻辑的层与需要归因于技术实施的层分开。 我们将如何做到这一点将在后面描述。 </p><br><hr><br><div class="spoiler">  <b class="spoiler_title">灵感来源</b> <div class="spoiler_text"><ul><li> 面向问题的设计，Eric J. Evans </li><li> 创建微服务，Sam Newman </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://gorodinski.com/blog/2013/04/29/sub-domains-and-bounded-contexts-in-domain-driven-design-ddd/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://martinfowler.com/bliki/BoundedContext.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://habr.com/post/316438/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://dotnetcodr.com/2015/08/06/domain-driven-design-with-web-api-revisited-part-1-introduction/</a> </li><li> 阿伯丁历史，克里斯托夫·马丁·维兰德 </li></ul><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428209/">https://habr.com/ru/post/zh-CN428209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428193/index.html">关于旅游</a></li>
<li><a href="../zh-CN428197/index.html">有效的个人理财。 1级</a></li>
<li><a href="../zh-CN428201/index.html">JavaScript中的痣洞</a></li>
<li><a href="../zh-CN428203/index.html">我们看一下图表：云计算市场的估计和预测，2018年的数据</a></li>
<li><a href="../zh-CN428205/index.html">救生员NaviHaka</a></li>
<li><a href="../zh-CN428211/index.html">《进化架构》一书。 支持持续变化”</a></li>
<li><a href="../zh-CN428213/index.html">如何在SHAP中解释模型预测</a></li>
<li><a href="../zh-CN428217/index.html">每天有数百万次视频通话，或“给妈妈打电话！”</a></li>
<li><a href="../zh-CN428219/index.html">合格人员大规模调动的做法是从哪里来的？</a></li>
<li><a href="../zh-CN428221/index.html">AI生成逼真的面孔</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>