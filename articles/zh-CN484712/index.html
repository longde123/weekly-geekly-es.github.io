<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¥ª ğŸ¤¬ ğŸ’“ ç›¸å¯¹äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼šæˆ‘ä»¬å¦‚ä½•æä¾›å®ƒ ğŸ‘©ğŸ»â€ğŸ’¼ ğŸˆ¹ ğŸ‘¨ğŸ»â€ğŸ“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä½ å¥½ æˆ‘å«Yuri Vladï¼Œæˆ‘æ˜¯Badooçš„ä¸€åAndroidå¼€å‘äººå‘˜ï¼Œå‚ä¸äº†åˆ›å»ºReaktiveåº“-çº¯Kotlinä¸Šçš„Reactive Extensionsã€‚ 


 ä»»ä½•åº“éƒ½åº”å°½å¯èƒ½éµå®ˆäºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ å¦‚æœä¾èµ–é¡¹ä¸­åº“çš„ä¸åŒç‰ˆæœ¬ä¸å…¼å®¹ï¼Œåˆ™ç»“æœå°†å¯¼è‡´è¿è¡Œæ—¶å´©æºƒã€‚ ä¾‹å¦‚ï¼Œå½“å‘MVICoreæ·»åŠ Rea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç›¸å¯¹äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼šæˆ‘ä»¬å¦‚ä½•æä¾›å®ƒ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/484712/"><p> ä½ å¥½ æˆ‘å«Yuri Vladï¼Œæˆ‘æ˜¯Badooçš„ä¸€åAndroidå¼€å‘äººå‘˜ï¼Œå‚ä¸äº†åˆ›å»º<a href="https://github.com/badoo/Reaktive">Reaktive</a>åº“-çº¯Kotlinä¸Šçš„Reactive Extensionsã€‚ </p><br><p> ä»»ä½•åº“éƒ½åº”å°½å¯èƒ½éµå®ˆäºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ å¦‚æœä¾èµ–é¡¹ä¸­åº“çš„ä¸åŒç‰ˆæœ¬ä¸å…¼å®¹ï¼Œåˆ™ç»“æœå°†å¯¼è‡´è¿è¡Œæ—¶å´©æºƒã€‚ ä¾‹å¦‚ï¼Œå½“å‘MVICoreæ·»åŠ Reaktiveæ”¯æŒæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ã€‚ </p><br><p><img src="https://habrastorage.org/webt/6w/hx/mc/6whxmcr9swxn5rtbxjeo46igkv8.jpeg"></p><br><p> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ç®€è¦ä»‹ç»ä¸€ä¸‹äºŒè¿›åˆ¶å…¼å®¹æ€§æ˜¯ä»€ä¹ˆä»¥åŠKotlinçš„äºŒè¿›åˆ¶ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Œä»¥åŠåœ¨JetBrainså’Œç°åœ¨çš„Badooä¸­å¦‚ä½•æ”¯æŒäºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ </p><a name="habracut"></a><br><h2 id="problema-binarnoy-sovmestimosti-v-kotlin">  KotlinäºŒè¿›åˆ¶å…¼å®¹æ€§é—®é¢˜ </h2><br><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ˆæ£’çš„åº“<code>com.sample:lib:1.0</code>å’Œæ­¤ç±»ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> a: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>)</code> </pre> <br><p> åŸºäºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ç¬¬äºŒä¸ªåº“<code>com.sample:lib-extensions:1.0</code> ã€‚ å…¶ä¾èµ–é¡¹åŒ…æ‹¬<code>com.sample:lib:1.0</code> ã€‚ ä¾‹å¦‚ï¼Œå®ƒåŒ…å«ç±»<code>A</code>çš„å·¥å‚æ–¹æ³•ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createA</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: A = A(a)</code> </pre> <br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å°†å‘å¸ƒåº“<code>com.sample:lib:2.0</code>çš„æ–°ç‰ˆæœ¬ï¼Œå¹¶è¿›è¡Œä»¥ä¸‹æ›´æ”¹ï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> a: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> b: String? = <span class="hljs-literal"><span class="hljs-literal">null</span></span>)</code> </pre> <br><p>  Kotlinå®Œå…¨å…¼å®¹çš„æ›´æ”¹ï¼Œä¸æ˜¯å—ï¼Ÿ ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨æ„é€ <code>val a = A(a)</code> ï¼Œä½†å‰ææ˜¯å¿…é¡»å®Œå…¨é‡æ–°ç¼–è¯‘æ‰€æœ‰ä¾èµ–é¡¹ã€‚ é»˜è®¤å‚æ•°ä¸æ˜¯JVMçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ç”±ç‰¹æ®Šçš„åˆæˆæ„é€ å‡½æ•°<code>A</code>å®ç°çš„ï¼Œè¯¥æ„é€ å‡½æ•°åœ¨å‚æ•°ä¸­åŒ…å«ç±»çš„æ‰€æœ‰å­—æ®µã€‚ åœ¨ä»Mavenå­˜å‚¨åº“æ¥æ”¶ä¾èµ–é¡¹çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å·²ç»å°†å®ƒä»¬ç»„è£…å¥½äº†ï¼Œæ— æ³•é‡æ–°ç¼–è¯‘å®ƒä»¬ã€‚ </p><br><p>  <code>com.sample:lib</code>æ–°ç‰ˆæœ¬<code>com.sample:lib</code> ï¼Œæˆ‘ä»¬ç«‹å³å°†å…¶è¿æ¥åˆ°æˆ‘ä»¬çš„é¡¹ç›®ã€‚ æˆ‘ä»¬å¸Œæœ›ä¸æ—¶ä¿±è¿›ï¼ æ–°åŠŸèƒ½ï¼Œæ–°ä¿®å¤ç¨‹åºï¼Œ <del> æ–°é”™è¯¯ </del>  ï¼ </p><br><pre> <code class="plaintext hljs">dependencies { implementation 'com.sample:lib:2.0' implementation 'com.sample:lib-extensions:1.0' }</code> </pre> <br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨è¿è¡Œæ—¶å´©æºƒã€‚ å­—èŠ‚ç ä¸­<code>createA</code>å‡½æ•°å°†å°è¯•ä½¿ç”¨ä¸€ä¸ªå‚æ•°è°ƒç”¨<code></code>ç±»æ„é€ å‡½æ•°ï¼Œä½†å­—èŠ‚ç ä¸­æ²¡æœ‰æ­¤ç±»å‚æ•°ã€‚ åœ¨å…·æœ‰ç›¸åŒç»„å’Œåç§°çš„æ‰€æœ‰ä¾èµ–é¡¹ä¸­ï¼ŒGradleå°†é€‰æ‹©å…·æœ‰æœ€æ–°ç‰ˆæœ¬çš„ä¾èµ–é¡¹å¹¶å°†å…¶åŒ…æ‹¬åœ¨ç¨‹åºé›†ä¸­ã€‚ </p><br><p> æ‚¨å¾ˆå¯èƒ½å·²ç»åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†äºŒè¿›åˆ¶ä¸å…¼å®¹é—®é¢˜ã€‚ å°±ä¸ªäººè€Œè¨€ï¼Œå½“æˆ‘å°†åº”ç”¨ç¨‹åºè¿ç§»åˆ°AndroidXæ—¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚ </p><br><p> æ‚¨å¯ä»¥åœ¨<a href="https://habr.com/ru/users/gvsmirnov/" class="user_link">gvsmirnov</a>ç”¨æˆ·çš„<a href="https://wiki.eclipse.org/Evolving_Java-based_APIs_2">â€œ</a> <a href="https://habr.com/ru/post/133907/">ç¤ºä¾‹ä¸­çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼Œä¸ä»…æ˜¯ç¤ºä¾‹</a> <a href="https://wiki.eclipse.org/Evolving_Java-based_APIs_2">â€</a> ï¼ŒEclipseåˆ›å»ºè€…çš„<a href="https://wiki.eclipse.org/Evolving_Java-based_APIs_2">â€œåŸºäºJavaçš„ä¸æ–­å‘å±•çš„API 2â€</a>ä»¥åŠJake Whartonæœ€è¿‘å‘è¡¨çš„æ–‡ç« <a href="https://jakewharton.com/public-api-challenges-in-kotlin/">â€œ Kotlinä¸­çš„å…¬å…±APIæŒ‘æˆ˜â€ä¸­</a>é˜…è¯»æœ‰å…³äºŒè¿›åˆ¶å…¼å®¹æ€§çš„æ›´å¤šä¿¡æ¯ã€‚ </p><br><h2 id="sposoby-obespecheniya-binarnoy-sovmestimosti"> ç¡®ä¿äºŒè¿›åˆ¶å…¼å®¹æ€§çš„æ–¹æ³• </h2><br><p> ä¼¼ä¹æ‚¨åªéœ€è¦å°è¯•è¿›è¡Œå…¼å®¹çš„æ›´æ”¹ã€‚ ä¾‹å¦‚ï¼Œåœ¨æ·»åŠ æ–°å­—æ®µæ—¶æ·»åŠ å…·æœ‰é»˜è®¤å€¼çš„æ„é€ å‡½æ•°ï¼Œé€šè¿‡ç”¨æ–°å‚æ•°è¦†ç›–æ–¹æ³•å°†æ–°å‚æ•°æ·»åŠ åˆ°å‡½æ•°ä¸­ï¼Œç­‰ç­‰ã€‚ä½†æ˜¯æ€»æ˜¯å¾ˆå®¹æ˜“çŠ¯é”™ã€‚ å› æ­¤ï¼Œåˆ›å»ºäº†å¤šç§å·¥å…·æ¥æ£€æŸ¥åŒä¸€åº“çš„ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼Œä¾‹å¦‚ï¼š </p><br><ol><li>  Java APIåˆè§„æ€§æ£€æŸ¥å™¨ </li><li> å…‹åˆ©å°” </li><li>  Revapi </li><li>  Japicmp </li><li>  Japitools </li><li> å‘¨åˆŠ </li><li>  Japiæ£€æŸ¥å™¨ </li><li> è¥¿æ ¼æ–¯ç‰¹ </li></ol><br><p> å®ƒä»¬é‡‡ç”¨ä¸¤ä¸ªJARæ–‡ä»¶å¹¶ç»™å‡ºç»“æœï¼šå®ƒä»¬çš„å…¼å®¹æ€§ã€‚ </p><br><p> ä½†æ˜¯ï¼Œæˆ‘ä»¬æ­£åœ¨å¼€å‘Kotlinåº“ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»…ä»Kotlinä½¿ç”¨æ‰æœ‰æ„ä¹‰ã€‚ è¿™æ„å‘³ç€ä¾‹å¦‚å¯¹äº<code>internal</code>ç±»ï¼Œæˆ‘ä»¬å¹¶ä¸æ€»æ˜¯éœ€è¦100ï¼…çš„å…¼å®¹æ€§ã€‚ å°½ç®¡å®ƒä»¬ä»¥å­—èŠ‚ç å½¢å¼å…¬å¼€ï¼Œä½†ä¸å¤ªå¯èƒ½åœ¨Kotlinç ä¹‹å¤–ä½¿ç”¨å®ƒä»¬ã€‚ å› æ­¤ï¼Œä¸ºäº†ç»´æŒäºŒè¿›åˆ¶å…¼å®¹æ€§ï¼Œkotlin-stdlib JetBrainsä½¿ç”¨<a href="https://github.com/jetBrains/kotlin/tree/master/libraries/tools/binary-compatibility-validator">äºŒè¿›åˆ¶å…¼å®¹æ€§æ£€æŸ¥å™¨</a> ã€‚ åŸºæœ¬åŸç†æ˜¯è¿™æ ·çš„ï¼šä»JARæ–‡ä»¶åˆ›å»ºæ•´ä¸ªå…¬å…±APIçš„è½¬å‚¨å¹¶å°†å…¶å†™å…¥è¯¥æ–‡ä»¶ã€‚ è¯¥æ–‡ä»¶æ˜¯æ‰€æœ‰è¿›ä¸€æ­¥æ£€æŸ¥çš„åŸºå‡†ï¼ˆå‚è€ƒï¼‰ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre> <code class="plaintext hljs">public final class kotlin/coroutines/ContinuationKt { public static final fun createCoroutine (Lkotlin/jvm/functions/Function1;Lkotlin/coroutines/Continuation;)Lkotlin/coroutines/Continuation; public static final fun createCoroutine (Lkotlin/jvm/functions/Function2;Ljava/lang/Object;Lkotlin/coroutines/Continuation;)Lkotlin/coroutines/Continuation; public static final fun startCoroutine (Lkotlin/jvm/functions/Function1;Lkotlin/coroutines/Continuation;)V public static final fun startCoroutine (Lkotlin/jvm/functions/Function2;Ljava/lang/Object;Lkotlin/coroutines/Continuation;)V }</code> </pre> <br><p> å¯¹æºä»£ç è¿›è¡Œæ›´æ”¹åï¼Œå°†ä¸å½“å‰åº“è¿›è¡Œæ¯”è¾ƒï¼Œé‡æ–°ç”ŸæˆåŸºçº¿åº“ï¼Œå¹¶ä¸”å¦‚æœå¯¹åŸºçº¿å‡ºç°ä»»ä½•æ›´æ”¹ï¼Œåˆ™æ£€æŸ¥å¤±è´¥ã€‚ å¯ä»¥é€šè¿‡ä¼ é€’<code>-Doverwrite.output=true</code>æ¥è¦†ç›–è¿™äº›æ›´æ”¹ã€‚ å³ä½¿å‘ç”ŸäºŒè¿›åˆ¶å…¼å®¹æ›´æ”¹ï¼Œä¹Ÿä¼šå‘ç”Ÿé”™è¯¯ã€‚ ä¸ºäº†åŠæ—¶æ›´æ–°åŸºå‡†å¹¶ç›´æ¥åœ¨æ‹‰å–è¯·æ±‚ä¸­æŸ¥çœ‹å…¶æ›´æ”¹ï¼Œè¿™æ˜¯å¿…éœ€çš„ã€‚ </p><br><h2 id="binary-compatibility-validator"> äºŒè¿›åˆ¶å…¼å®¹æ€§éªŒè¯å™¨ </h2><br><p> è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªå·¥å…·æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ äºŒè¿›åˆ¶å…¼å®¹æ€§åœ¨JVMï¼ˆå­—èŠ‚ç ï¼‰çº§åˆ«æä¾›ï¼Œå¹¶ä¸”ä¸è¯­è¨€æ— å…³ã€‚ å¯ä»¥ä½¿ç”¨Kotlin-æ›¿æ¢Javaç±»å®ç°è€Œä¸ä¼šç ´åäºŒè¿›åˆ¶å…¼å®¹æ€§ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚ <br> é¦–å…ˆï¼Œæ‚¨éœ€è¦äº†è§£åº“ä¸­çš„ç±»ã€‚ æˆ‘ä»¬è®°å¾—å³ä½¿å¯¹äºå…¨å±€å‡½æ•°å’Œå¸¸é‡ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ–‡ä»¶åå’Œåç¼€<code>Kt</code> ï¼Œä¾‹å¦‚<code>ContinuationKt</code> ã€‚ è¦è·å–æ‰€æœ‰ç±»ï¼Œæˆ‘ä»¬ä½¿ç”¨JDKä¸­çš„<code>JarFile</code>ç±»ï¼Œè·å–æŒ‡å‘æ¯ä¸ªç±»çš„æŒ‡é’ˆï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™<code>org.objectweb.asm.tree.ClassNode</code> ã€‚ æ­¤ç±»å°†ä½¿æˆ‘ä»¬çŸ¥é“è¯¥ç±»çš„å¯è§æ€§ï¼Œå…¶æ–¹æ³•ï¼Œå­—æ®µå’Œæ³¨é‡Šã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jar = JarFile(<span class="hljs-string"><span class="hljs-string">"/path/to/lib.jar"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> classStreams = jar.classEntries().map { entry -&gt; jar.getInputStream(entry) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> classNodes = classStreams.map { it.use { stream -&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> classNode = ClassNode() ClassReader(stream).accept(classNode, ClassReader.SKIP_CODE) classNode } }</code> </pre> <br><p>  Kotlinè¿›è¡Œç¼–è¯‘æ—¶ï¼Œä¼šå°†å…¶<code>@Metadata</code>è¿è¡Œæ—¶æ‰¹æ³¨æ·»åŠ åˆ°æ¯ä¸ªç±»ï¼Œä»¥ä¾¿<code>kotlin-reflect</code>å¯ä»¥åœ¨å°†Kotlinç±»è½¬æ¢ä¸ºå­—èŠ‚ç ä¹‹å‰æ¢å¤å…¶å¤–è§‚ã€‚ çœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Metadata</span></span>( mv = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>}, bv = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>}, k = <span class="hljs-number"><span class="hljs-number">1</span></span>, d1 = {<span class="hljs-string"><span class="hljs-string">"\u0000 \n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0000\n\u0002\u0010\b\n\u0002\b\u0006\n\u0002\u0010\u000b\n\u0002\b\u0003\n\u0002\u0010\u000e\n\u0000\b\u0086\b\u0018\u00002\u00020\u0001B\r\u0012\u0006\u0010\u0002\u001a\u00020\u0003Â¢\u0006\u0002\u0010\u0004J\t\u0010\u0007\u001a\u00020\u0003HÃ†\u0003J\u0013\u0010\b\u001a\u00020\u00002\b\b\u0002\u0010\u0002\u001a\u00020\u0003HÃ†\u0001J\u0013\u0010\t\u001a\u00020\n2\b\u0010\u000b\u001a\u0004\u0018\u00010\u0001HÃ–\u0003J\t\u0010\f\u001a\u00020\u0003HÃ–\u0001J\t\u0010\r\u001a\u00020\u000eHÃ–\u0001R\u0011\u0010\u0002\u001a\u00020\u0003Â¢\u0006\b\n\u0000\u001a\u0004\b\u0005\u0010\u0006Â¨\u0006\u000f"</span></span>}, d2 = {<span class="hljs-string"><span class="hljs-string">"Lcom/sample/A;"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"a"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"(I)V"</span></span>, <span class="hljs-string"><span class="hljs-string">"getA"</span></span>, <span class="hljs-string"><span class="hljs-string">"()I"</span></span>, <span class="hljs-string"><span class="hljs-string">"component1"</span></span>, <span class="hljs-string"><span class="hljs-string">"copy"</span></span>, <span class="hljs-string"><span class="hljs-string">"equals"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"other"</span></span>, <span class="hljs-string"><span class="hljs-string">"hashCode"</span></span>, <span class="hljs-string"><span class="hljs-string">"toString"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"app_release"</span></span>} )</code> </pre> <br><p>  <code>ClassNode</code>å¯ä»¥ä»<code>@Metadata</code>è·å–<code>@Metadata</code>æ‰¹æ³¨ï¼Œå¹¶å°†å…¶è§£æä¸º<code>KotlinClassHeader</code> ã€‚ æ‚¨å¿…é¡»æ‰‹åŠ¨æ‰§è¡Œæ­¤æ“ä½œï¼Œå› ä¸º<code>kotlin-reflect</code>ä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨ObjectWeb ASMã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> ClassNode.kotlinMetadata: KotlinClassMetadata? <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> metadata = findAnnotation(<span class="hljs-string"><span class="hljs-string">"kotlin/Metadata"</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> header = with(metadata) { KotlinClassHeader( kind = <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"k"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>?, metadataVersion = (<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"mv"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> List&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;?)?.toIntArray(), bytecodeVersion = (<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"bv"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> List&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;?)?.toIntArray(), data1 = (<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"d1"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> List&lt;String&gt;?)?.toTypedArray(), data2 = (<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"d2"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> List&lt;String&gt;?)?.toTypedArray(), extraString = <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"xs"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> String?, packageName = <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"pn"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> String?, extraInt = <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">"xi"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>? ) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> KotlinClassMetadata.read(header) }</code> </pre> <br><p> éœ€è¦kotlin.Metadataæ¥æ­£ç¡®å¤„ç†<code>internal</code> ï¼Œå› ä¸ºå®ƒåœ¨å­—èŠ‚ç ä¸­ä¸å­˜åœ¨ã€‚  <code>internal</code>ç±»å’Œå‡½æ•°çš„æ›´æ”¹ä¸ä¼šå½±å“åº“ç”¨æˆ·ï¼Œå°½ç®¡å°±å­—èŠ‚ç è€Œè¨€ï¼Œå®ƒä»¬æ˜¯å…¬å…±APIã€‚ </p><br><p> ä»kotlin.Metadataä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æœ‰å…³<code>companion object</code> ã€‚ å³ä½¿æ‚¨å°†å…¶å£°æ˜ä¸ºç§æœ‰ï¼Œå®ƒä»å°†å­˜å‚¨åœ¨å…¬å…±é™æ€å­—æ®µ<code>Companion</code> ï¼Œè¿™æ„å‘³ç€è¯¥å­—æ®µç¬¦åˆäºŒè¿›åˆ¶å…¼å®¹æ€§çš„è¦æ±‚ã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CompositeException</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { } }</code> </pre> <br><pre> <code class="plaintext hljs">public final static Lcom/badoo/reaktive/base/exceptions/CompositeException$Companion; Companion @Ljava/lang/Deprecated;()</code> </pre> <br><p> åœ¨å¿…è¦çš„æ‰¹æ³¨ä¸­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯<code>@PublishedApi</code>æä¾›äº†å…¬å…±<code>inline</code>å‡½æ•°ä¸­ä½¿ç”¨çš„ç±»å’Œæ–¹æ³•ã€‚ è¿™äº›å‡½æ•°çš„ä¸»ä½“ä¿ç•™åœ¨å®ƒä»¬çš„è°ƒç”¨ä½ç½®ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸­çš„ç±»å’Œæ–¹æ³•å¿…é¡»æ˜¯äºŒè¿›åˆ¶å…¼å®¹çš„ã€‚ å½“æ‚¨å°è¯•åœ¨æ­¤ç±»å‡½æ•°ä¸­ä½¿ç”¨éå…¬å…±ç±»å’Œæ–¹æ³•æ—¶ï¼ŒKotlinç¼–è¯‘å™¨å°†<code>@PublishedApi</code>é”™è¯¯å¹¶æä¾›ä½¿ç”¨<code>@PublishedApi</code>æ‰¹æ³¨å¯¹å…¶è¿›è¡Œæ ‡è®°çš„åŠŸèƒ½ã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> ClassNode.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPublishedApi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = findAnnotation(<span class="hljs-string"><span class="hljs-string">"kotlin/PublishedApi"</span></span>, includeInvisible = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) != <span class="hljs-literal"><span class="hljs-literal">null</span></span></code> </pre> <br><p> ç±»ç»§æ‰¿æ ‘å’Œæ¥å£çš„å®ç°å¯¹äºæ”¯æŒäºŒè¿›åˆ¶å…¼å®¹æ€§å¾ˆé‡è¦ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸èƒ½ç®€å•åœ°ä»ç±»ä¸­åˆ é™¤æŸäº›æ¥å£ã€‚ è·å–çˆ¶ç±»å’Œå¯å®ç°çš„æ¥å£éå¸¸ç®€å•ã€‚ </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> supertypes = listOf(classNode.superName) - <span class="hljs-string"><span class="hljs-string">"java/lang/Object"</span></span> + classNode.interfaces.sorted()</code> </pre> <br><p>  <code>Object</code>å·²ä»åˆ—è¡¨ä¸­åˆ é™¤ï¼Œå› ä¸ºå¯¹å…¶è¿›è¡Œè·Ÿè¸ªæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ </p><br><p> éªŒè¯å™¨å†…éƒ¨è¿˜æœ‰è®¸å¤šå…¶ä»–ç‰¹å®šäºKotlinçš„æ£€æŸ¥ï¼šé€šè¿‡<code>Interface$DefaultImpls</code>æ£€æŸ¥æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ï¼Œå¿½ç•¥<code>$WhenMappings</code>ç±»ä»¥ä½¿<code>when</code>æ“ä½œç¬¦å·¥ä½œï¼Œç­‰ç­‰ã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦éå†æ‰€æœ‰<code>ClassNode</code>å¹¶è·å–å®ƒä»¬çš„<code>MethodNode</code>å’Œ<code>FieldNode</code> ã€‚ ä»ç±»çš„ç­¾åï¼Œå®ƒä»¬çš„å­—æ®µå’Œæ–¹æ³•ï¼Œæˆ‘ä»¬å¾—åˆ°<code>ClassBinarySignature</code> ï¼Œ <code>FieldBinarySignature</code>å’Œ<code>MethodBinarySignature</code> ï¼Œå®ƒä»¬åœ¨é¡¹ç›®ä¸­æœ¬åœ°å£°æ˜ã€‚ å®ƒä»¬å…¨éƒ¨å®ç°<code>MemberBinarySignature</code>æ¥å£ï¼Œèƒ½å¤Ÿä½¿ç”¨<code>isEffectivelyPublic</code>æ–¹æ³•ç¡®å®šå…¶å…¬å…±å¯è§æ€§ï¼Œå¹¶ä»¥å¯è¯»æ ¼å¼çš„<code>val signature: String</code>æ˜¾ç¤ºå…¶ç­¾åã€‚ </p><br><pre> <code class="kotlin hljs">classNodes.map { with(it) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> metadata = kotlinMetadata <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mVisibility = visibilityMapNew[name] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> classAccess = AccessFlags(effectiveAccess and Opcodes.ACC_STATIC.inv()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> supertypes = listOf(superName) - <span class="hljs-string"><span class="hljs-string">"java/lang/Object"</span></span> + interfaces.sorted() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> memberSignatures = ( fields.map { with(it) { FieldBinarySignature(JvmFieldSignature(name, desc), isPublishedApi(), AccessFlags(access)) } } + methods.map { with(it) { MethodBinarySignature(JvmMethodSignature(name, desc), isPublishedApi(), AccessFlags(access)) } } ).filter { it.isEffectivelyPublic(classAccess, mVisibility) } ClassBinarySignature(name, superName, outerClassName, supertypes, memberSignatures, classAccess, isEffectivelyPublic(mVisibility), metadata.isFileOrMultipartFacade() || isDefaultImpls(metadata) } }</code> </pre> <br><p> æ”¶åˆ°<code>ClassBinarySignature</code>åˆ—è¡¨åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>dump(to: Appendable)</code>å°†å…¶å†™å…¥æ–‡ä»¶æˆ–å†…å­˜ï¼Œå¹¶å°†å…¶ä¸åŸºçº¿è¿›è¡Œæ¯”è¾ƒï¼Œè¿™åœ¨<code>RuntimePublicAPITest</code>æµ‹è¯•ä¸­ä¼šå‘ç”Ÿï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RuntimePublicAPITest</span></span></span><span class="hljs-class"> </span></span>{ @[Rule JvmField] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> testName = TestName() <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kotlinStdlibRuntimeMerged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { snapshotAPIAndCompare(<span class="hljs-string"><span class="hljs-string">"../../stdlib/jvm/build/libs"</span></span>, <span class="hljs-string"><span class="hljs-string">"kotlin-stdlib"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">snapshotAPIAndCompare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( basePath: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, jarPattern: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, publicPackages: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">List</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; = emptyList()</span></span></span></span>, nonPublicPackages: List&lt;String&gt; = emptyList() ) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> base = File(basePath).absoluteFile.normalize() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> jarFile = getJarPath(base, jarPattern, System.getProperty(<span class="hljs-string"><span class="hljs-string">"kotlinVersion"</span></span>)) println(<span class="hljs-string"><span class="hljs-string">"Reading binary API from </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$jarFile</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> api = getBinaryAPI(JarFile(jarFile)).filterOutNonPublic(nonPublicPackages) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> target = File(<span class="hljs-string"><span class="hljs-string">"reference-public-api"</span></span>) .resolve(testName.methodName.replaceCamelCaseWithDashedLowerCase() + <span class="hljs-string"><span class="hljs-string">".txt"</span></span>) api.dumpAndCompareWith(target) }</code> </pre> <br><p> é€šè¿‡æäº¤æ–°çš„åŸºå‡†ï¼Œæˆ‘ä»¬ä»¥å¯è¯»æ ¼å¼è·å¾—æ›´æ”¹ï¼Œä¾‹å¦‚ï¼Œåœ¨æ­¤<a href="https://github.com/badoo/Reaktive/pull/312/commits/c8985c15d24346ecfe89cb2ac84fbe7cf6cbeb3e">commitä¸­</a> ï¼š </p><br><pre> <code class="diff hljs"> public static final fun flattenObservable (Lcom/badoo/reaktive/single/Single;)Lcom/badoo/reaktive/observable/Observable; } + public final class com/badoo/reaktive/single/MapIterableKt { + public static final fun mapIterable (Lcom/badoo/reaktive/single/Single;Lkotlin/jvm/functions/Function1;)Lcom/badoo/reaktive/single/Single; + public static final fun mapIterableTo (Lcom/badoo/reaktive/single/Single;Lkotlin/jvm/functions/Function0;Lkotlin/jvm/functions/Function1;)Lcom/badoo/reaktive/single/Single; + } public final class com/badoo/reaktive/single/MapKt {</code> </pre> <br><h2 id="ispolzovanie-validatora-v-svoyom-proekte"> åœ¨é¡¹ç›®ä¸­ä½¿ç”¨éªŒè¯å™¨ </h2><br><p> ä½¿ç”¨éå¸¸ç®€å•ã€‚ å°†<code>binary-compatibility-validator</code>å¤åˆ¶åˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼Œå¹¶æ›´æ”¹å…¶<code>build.gradle</code>å’Œ<code>RuntimePublicAPITest</code> ï¼š </p><br><pre> <code class="kotlin hljs">plugins { id(<span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin.jvm"</span></span>) } dependencies { implementation(Deps.asm) implementation(Deps.asm.tree) implementation(Deps.kotlinx.metadata.jvm) testImplementation(Deps.kotlin.test.junit) } tasks.named(<span class="hljs-string"><span class="hljs-string">"test"</span></span>, Test::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      ,   -     Gradle       : dependsOn( ":coroutines-interop:jvmJar", ":reaktive-annotations:jvmJar", ":reaktive:jvmJar", ":reaktive-annotations:jvmJar", ":reaktive-testing:jvmJar", ":rxjava2-interop:jar", ":rxjava3-interop:jar", ":utils:jvmJar" ) //    ,          baseline-: outputs.upToDateWhen { false } //    systemProperty("overwrite.output", findProperty("binary-compatibility-override") ?: "true") systemProperty("kotlinVersion", findProperty("reaktive_version").toString()) systemProperty("testCasesClassesDirs", sourceSets.test.get().output.classesDirs.asPath) jvmArgs("-ea") }</span></span></code> </pre> <br><p> åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œ <code>RuntimePublicAPITest</code>æ–‡ä»¶çš„æµ‹è¯•åŠŸèƒ½ä¹‹ä¸€å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reaktive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { snapshotAPIAndCompare(<span class="hljs-string"><span class="hljs-string">"../../reaktive/build/libs"</span></span>, <span class="hljs-string"><span class="hljs-string">"reaktive-jvm"</span></span>) }</code> </pre> <br><p> ç°åœ¨ï¼Œå¯¹äºæ¯ä¸ªè¯·æ±‚è¯·æ±‚ï¼Œè¿è¡Œ<code>./gradlew :tools:binary-compatibility:test -Pbinary-compatibility-override=false</code>å¹¶å¼ºåˆ¶å¼€å‘äººå‘˜åŠæ—¶æ›´æ–°åŸºçº¿æ–‡ä»¶ã€‚ </p><br><h2 id="lozhka-dyogtya"> ç¾ä¸­ä¸è¶³ </h2><br><p> ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›ç¼ºç‚¹ã€‚ </p><br><p> é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»ç‹¬ç«‹åˆ†æå¯¹åŸºå‡†æ–‡ä»¶çš„æ›´æ”¹ã€‚ å®ƒä»¬çš„æ›´æ”¹å¹¶éæ€»æ˜¯ä¼šå¯¼è‡´äºŒè¿›åˆ¶ä¸å…¼å®¹ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå®ç°ä¸€ä¸ªæ–°æ¥å£ï¼Œåˆ™åŸºçº¿ä¼šæœ‰è¿™æ ·çš„å·®å¼‚ï¼š </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">- public final class com/test/A { + public final class com/test/A : Comparable {</span></span></code> </pre> <br><p> å…¶æ¬¡ï¼Œä½¿ç”¨äº†éé¢„æœŸçš„å·¥å…·ã€‚ æµ‹è¯•ä¸åº”ä»¥å°†æŸäº›æ–‡ä»¶å†™å…¥ç£ç›˜çš„å½¢å¼äº§ç”Ÿå‰¯ä½œç”¨ï¼Œè¯¥æ–‡ä»¶éšåå°†ç”±åŒä¸€æµ‹è¯•ä½¿ç”¨ï¼Œç”šè‡³æ›´é‡è¦çš„æ˜¯ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡å°†å‚æ•°ä¼ é€’ç»™è¯¥æ–‡ä»¶ã€‚ æœ€å¥½åœ¨Gradleæ’ä»¶ä¸­ä½¿ç”¨æ­¤å·¥å…·å¹¶ä½¿ç”¨ä»»åŠ¡åˆ›å»ºåŸºå‡†ã€‚ ä½†æˆ‘çœŸçš„ä¸æƒ³åœ¨éªŒè¯å™¨ä¸­è‡ªè¡Œæ›´æ”¹æŸäº›å†…å®¹ï¼Œä»¥ä¾¿ä»¥åå¯ä»¥å¾ˆè½»æ¾åœ°ä»Kotlinå­˜å‚¨åº“ä¸­æå–æ‰€æœ‰æ›´æ”¹ï¼Œå› ä¸ºå°†æ¥å°†æ¥å¯èƒ½ä¼šéœ€è¦æ”¯æŒè¿™ç§è¯­è¨€çš„æ–°æ„é€ å‡ºç°ã€‚ </p><br><p> ç¬¬ä¸‰ï¼Œä»…æ”¯æŒJVMã€‚ </p><br><h2 id="zaklyuchenie"> ç»“è®º </h2><br><p> ä½¿ç”¨<a href="https://github.com/jetBrains/kotlin/tree/master/libraries/tools/binary-compatibility-validator">äºŒè¿›åˆ¶å…¼å®¹æ€§æ£€æŸ¥å™¨ï¼Œ</a>æ‚¨å¯ä»¥å®ç°äºŒè¿›åˆ¶å…¼å®¹æ€§å¹¶åŠæ—¶å“åº”å…¶çŠ¶æ€æ›´æ”¹ã€‚ è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å®ƒï¼Œä»…éœ€æ›´æ”¹ä¸¤ä¸ªæ–‡ä»¶å¹¶å°†æµ‹è¯•è¿æ¥åˆ°æˆ‘ä»¬çš„CIã€‚ è¯¥è§£å†³æ–¹æ¡ˆæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ ç°åœ¨ï¼ŒReaktiveå°†å°è¯•ä»¥ä¸JetBrainså¯¹Kotlinæ ‡å‡†åº“ç›¸åŒçš„æ–¹å¼ç»´æŠ¤JVMçš„äºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ </p><br><p> æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN484712/">https://habr.com/ru/post/zh-CN484712/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN484700/index.html">Java 14ï¼šè®°å½•é¢„è§ˆ</a></li>
<li><a href="../zh-CN484702/index.html">2020å¹´çš„Prestashopæ›¿ä»£å“ï¼šé¡¶çº§ç”µå­å•†åŠ¡å¹³å°</a></li>
<li><a href="../zh-CN484706/index.html">ç»ƒä¹ ä½¿ç”¨Reddç»¼åˆå·¥å‚çš„å®šåˆ¶è½®èƒ</a></li>
<li><a href="../zh-CN484708/index.html">ç†æŸ¥å¾·Â·æ±‰æ˜ â€œä¸å­˜åœ¨çš„ç« èŠ‚â€ï¼šæˆ‘ä»¬å¦‚ä½•çŸ¥é“æˆ‘ä»¬æ‰€çŸ¥é“çš„ï¼ˆå®Œæ•´ç‰ˆæœ¬ï¼‰</a></li>
<li><a href="../zh-CN484710/index.html">æ‰“ç ´ç»Ÿä¸€åƒåœ¾æ”¶é›†è§„åˆ™</a></li>
<li><a href="../zh-CN484716/index.html">åœæ­¢è°ƒç”¨ä¸€åˆ‡AI</a></li>
<li><a href="../zh-CN484718/index.html">HPç°ä»£æ‰“å°æœºæ‹’ç»ä¸ä½¿ç”¨å¢¨æ°´è€Œæ— æ³•å·¥ä½œ</a></li>
<li><a href="../zh-CN484720/index.html">å¸¦ç®¡å¼¦ä¹é˜Ÿçš„åŸå¸‚éŸ³ä¹ä¼šï¼šè°å’Œä¸ºä»€ä¹ˆå½•åˆ¶æ—¥å¸¸ç”Ÿæ´»çš„å£°éŸ³</a></li>
<li><a href="../zh-CN484722/index.html">å“ªç§Ruby on Railså¼€å‘å·¥å…·é€‚åˆæ‚¨çš„é¡¹ç›®ï¼š2020å¹´é¡¶çº§Ruby on Railså®çŸ³</a></li>
<li><a href="../zh-CN484724/index.html">æ¥è‡ªä¸–ç•Œå¼€æ”¾åœ°å›¾494å·çš„æ–°é—»ï¼ˆ12.31.2019-06.01.2020ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>