<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👩🏾 🕺🏼 🔽 Gedankenexperiment: Flattern unterwegs 👩🏽‍⚖️ 🔚 🕢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Zuletzt entdeckte ich Flutter - ein neues Framework von Google für die Entwicklung plattformübergreifender mobiler Anwendungen - und hatte sogar die M...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gedankenexperiment: Flattern unterwegs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435960/"><p>  Zuletzt entdeckte ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flutter</a> - ein neues Framework von Google für die Entwicklung plattformübergreifender mobiler Anwendungen - und hatte sogar die Möglichkeit, einer Person, die noch nie zuvor programmiert hatte, die Grundlagen von Flutter zu zeigen.  Flutter selbst wurde in Dart geschrieben - einer Sprache, die im Chrome-Browser geboren und in die Konsolenwelt entkommen ist - und das ließ mich denken "hmm, aber Flutter könnte sehr gut in Go!" Geschrieben werden. </p><br><p>  Warum nicht?  Sowohl Go als auch Dart wurden von Google erstellt, beide haben kompilierte Sprachen geschrieben. Drehen Sie einige Ereignisse etwas anders um. Go wäre ein ausgezeichneter Kandidat für die Implementierung eines so großen Projekts wie Flutter.  Jemand wird sagen - es gibt keine Klassen, Generika und Ausnahmen in Go, daher passt es nicht. </p><br><p>  Stellen wir uns also vor, Flutter sei bereits in Go geschrieben.  Wie wird der Code aussehen und im Allgemeinen wird er funktionieren? </p><br><p><img src="https://habrastorage.org/webt/9r/4y/cv/9r4ycvikoillhjboi5olwnta4nm.png"></p><a name="habracut"></a><br><h1 id="chto-ne-tak-s-dart">  Was ist los mit Dart? </h1><br><p> Ich verfolge diese Sprache seit ihrer Einführung als Alternative zu JavaScript in Browsern.  Dart wurde für einige Zeit in den Chrome-Browser integriert und hoffte, dass es JS ersetzen würde.  Es war wahnsinnig traurig im März 2015 zu lesen, dass die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dart-Unterstützung von Chrome entfernt wurde</a> . </p><br><p>  Dart selbst ist großartig!  Grundsätzlich ist nach JavaScript jede Sprache großartig, aber nach Go ist Dart nicht so schön.  aber ganz ok  Es hat alle denkbaren und undenkbaren Funktionen - Klassen, Generika, Ausnahmen, Futures, Async-Warten, Ereignisschleife, JIT / AOT, Garbage Collector, Funktionsüberladung - benennen Sie alle bekannten Funktionen aus der Theorie der Programmiersprachen und in Dart wird es mit einem hohen Anteil sein Wahrscheinlichkeiten.  Dart hat eine spezielle Syntax für fast jeden Chip - eine spezielle Syntax für Getter / Setter, eine spezielle Syntax für abgekürzte Konstruktoren, eine spezielle Syntax für eine spezielle Syntax und vieles mehr. </p><br><p>  Dies macht Dart auf den ersten Blick für Leute bekannt, die bereits in einer Programmiersprache programmiert haben, und das ist großartig.  Als ich jedoch versuchte, all diese Fülle an Besonderheiten in einem einfachen Beispiel "Hallo Welt" zu erklären, stellte ich fest, dass dies im Gegenteil die Entwicklung erschwert. </p><br><ul><li>  <strong>Alle "speziellen" Funktionen der Sprache waren verwirrend</strong> - "eine spezielle Methode namens Konstruktor", "spezielle Syntax für die automatische Initialisierung", "spezielle Syntax für benannte Parameter" usw. </li><li>  <strong>Alles, was "versteckt" war, war verwirrend</strong> - "von welchem ​​Import ist diese Funktion? Sie ist versteckt, wenn man den Code betrachtet, den man nicht herausfinden kann", "warum gibt es einen Konstruktor in dieser Klasse, aber nicht in dieser Klasse? Es ist da, aber es ist versteckt" und so weiter </li><li>  <strong>alles "mehrdeutig" verwirrt</strong> - "also hier, um die Funktionsparameter mit oder ohne Namen zu erstellen?", "sollte es const oder final sein?", "hier die normale Syntax der Funktion verwenden oder" mit Pfeil verkürzt "usw." </li></ul><br><p>  Im Prinzip fängt diese Dreifaltigkeit - "speziell", "versteckt" und "mehrdeutig" - nicht schlecht die Essenz dessen ein, was die Leute in Programmiersprachen "Magie" nennen.  Dies sind Funktionen, die erstellt wurden, um das Schreiben von Code zu vereinfachen, aber tatsächlich das Lesen und Verstehen erschweren. </p><br><p>  Und genau in diesem Bereich nimmt Go eine grundlegend andere Position ein als andere Sprachen und hält die Verteidigung heftig.  Go ist eine Sprache ohne Magie - die Menge an "versteckt", "speziell" und "mehrdeutig" wird minimiert.  Aber Go hat seine Nachteile. </p><br><h1 id="chto-ne-tak-s-go">  Was ist los mit Go? </h1><br><p>  Da es sich um Flutter handelt, ein UI-Framework, betrachten wir Go als Werkzeug zur Beschreibung und Arbeit mit der Benutzeroberfläche.  Im Allgemeinen stellen UI-Frameworks eine enorme Herausforderung dar und erfordern fast immer spezielle Lösungen.  Einer der häufigsten Ansätze in der Benutzeroberfläche ist die Erstellung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DSL</a> - domänenspezifischen Sprachen -, die in Form von Bibliotheken oder Frameworks implementiert sind, die speziell auf die Anforderungen der Benutzeroberfläche zugeschnitten sind.  Und am häufigsten hört man die Meinung, dass Go objektiv eine schlechte Sprache für DSL ist. </p><br><p>  Im Wesentlichen bedeutet DSL, eine neue Sprache zu erstellen - Begriffe und Verben -, mit der der Entwickler arbeiten kann.  Der darauf enthaltene Code sollte die Hauptmerkmale der grafischen Oberfläche und ihrer Komponenten klar beschreiben, flexibel genug sein, um der Vorstellungskraft des Designers freien Lauf zu lassen, und gleichzeitig starr genug sein, um sie gemäß bestimmten Regeln einzuschränken.  Sie sollten beispielsweise in der Lage sein, die Schaltflächen in einem Container zu platzieren und das Symbol an der richtigen Stelle in dieser Schaltfläche zu platzieren. Der Compiler sollte jedoch einen Fehler zurückgeben, wenn Sie versuchen, die Schaltfläche beispielsweise in Text einzufügen. </p><br><p>  Außerdem sind die Sprachen zur Beschreibung der Benutzeroberfläche häufig deklarativ. Sie bieten die Möglichkeit, die Benutzeroberfläche in Form von „Was ich sehen möchte“ zu beschreiben und das Framework selbst verstehen zu lassen, aus welchem ​​Code und wie es ausgeführt wird. </p><br><p>  Einige Sprachen wurden ursprünglich mit solchen Aufgaben in Sicht entwickelt, Go jedoch nicht.  Es scheint, dass das Schreiben von Flutter on Go eine weitere Aufgabe sein wird! </p><br><h1 id="oda-flutter">  Oda Flutter </h1><br><p>  Wenn Sie mit Flutter nicht vertraut sind, empfehle ich dringend, das nächste Wochenende mit dem Anschauen von Lehrvideos oder dem Lesen von Tutorials zu verbringen, von denen es viele gibt.  Denn Flutter kehrt zweifellos die Spielregeln bei der Entwicklung mobiler Anwendungen um.  Und höchstwahrscheinlich nicht nur mobil - es gibt bereits Renderer (in Bezug auf Flutter, Einbettungen), mit denen Flutter-Anwendungen als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">native Dekstop-Anwendungen</a> und als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Webanwendungen</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gestartet werden</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">können</a> . </p><br><p> Es ist leicht zu erlernen, es ist logisch, es enthält eine riesige Bibliothek mit schönen Widgets zum Thema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Materialdesign</a> (und nicht nur), es hat eine großartige und große Community und eine hervorragende Abstimmung (wenn Sie die einfache Arbeit mit <code>go build/run/test</code> in Go mögen, dann in Flutter Sie werden eine ähnliche Erfahrung machen). </p><br><p>  Vor einem Jahr musste ich eine kleine mobile Anwendung schreiben (natürlich für iOS und Android), und mir wurde klar, dass die Komplexität der Entwicklung einer hochwertigen Anwendung für beide Plattformen zu groß ist (die Anwendung war nicht die Hauptaufgabe) - ich musste sie auslagern und dafür bezahlen.  Tatsächlich war das Schreiben einer einfachen, aber qualitativ hochwertigen Anwendung für alle Geräte selbst für eine Person mit fast 20 Jahren Programmiererfahrung eine unmögliche Aufgabe.  Und es war schon immer Unsinn für mich. </p><br><p>  Mit Flutter habe ich diese Anwendung um 15 Uhr neu geschrieben und dabei das Framework selbst von Grund auf gelernt.  Wenn mir jemand sagen würde, dass dies etwas früher sein könnte, würde ich es nicht glauben. </p><br><p>  Das letzte Mal, dass ich mit der Entdeckung neuer Technologien einen ähnlichen Produktivitätsschub sah, war vor 5 Jahren, als ich Go entdeckte.  Dieser Moment hat mein Leben verändert. </p><br><p>  Ich empfehle daher, Flutter zu lernen, und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieses Tutorial ist sehr gut</a> . </p><br><h1 id="hello-world-na-flutter">  "Hallo Welt" auf Flutter </h1><br><p>  Wenn Sie eine neue Anwendung durch <code>flutter create</code> , erhalten Sie ein solches Programm mit einem Titel, Text, Zähler und einer Schaltfläche, die den Zähler erhöht. </p><br><p><img src="https://habrastorage.org/webt/_1/iu/9g/_1iu9gibgfkoiyadzl0kb8be_j4.gif"></p><br><p>  Ich denke, das ist ein großartiges Beispiel.  um es auf unserem imaginären Flutter on Go zu schreiben.  Es enthält fast alle Grundkonzepte des Frameworks, auf denen Sie die Idee testen können.  Schauen wir uns den Code an (dies ist eine Datei): </p><br><pre> <code class="plaintext hljs">import 'package:flutter/material.dart'; void main() =&gt; runApp(MyApp()); class MyApp extends StatelessWidget { @override Widget build(BuildContext context) { return MaterialApp( title: 'Flutter Demo', theme: ThemeData( primarySwatch: Colors.blue, ), home: MyHomePage(title: 'Flutter Demo Home Page'), ); } } class MyHomePage extends StatefulWidget { MyHomePage({Key key, this.title}) : super(key: key); final String title; @override _MyHomePageState createState() =&gt; _MyHomePageState(); } class _MyHomePageState extends State&lt;MyHomePage&gt; { int _counter = 0; void _incrementCounter() { setState(() { _counter++; }); } @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text(widget.title), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text( 'You have pushed the button this many times:', ), Text( '$_counter', style: Theme.of(context).textTheme.display1, ), ], ), ), floatingActionButton: FloatingActionButton( onPressed: _incrementCounter, tooltip: 'Increment', child: Icon(Icons.add), ), ); } }</code> </pre> <br><p>  Lassen Sie uns den Code in Teilen analysieren, analysieren, was und wie er auf Go passt, und einen Blick auf die verschiedenen Optionen werfen, die wir haben. </p><br><h2 id="perevodim-kod-na-go">  Wir übersetzen den Code auf Go </h2><br><p>  Der Anfang ist einfach und unkompliziert - importieren Sie die Abhängigkeit und starten Sie die Funktion <code>main()</code> .  Nichts kompliziertes oder interessantes hier, die Änderung ist fast syntaktisch: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { app := NewApp() flutter.Run(app) }</code> </pre> <br><p>  Der einzige Unterschied besteht darin, dass <code>MyApp()</code> anstelle von <code>MyApp()</code> - einer Funktion, die ein Konstruktor ist, eine spezielle Funktion, die in einer Klasse namens MyApp verborgen ist - einfach die übliche explizite und nicht versteckte Funktion <code>NewApp()</code> .  Sie macht das Gleiche, aber es ist viel klarer zu erklären und zu verstehen, was es ist, wie es beginnt und wie es funktioniert. </p><br><h3 id="klassy-vidzhetov">  Widget-Klassen </h3><br><p>  In Flutter besteht alles aus Widgets.  In der Dart-Version von Flutter ist jedes Widget als Klasse implementiert, die spezielle Klassen für Widgets von Flutter erbt. </p><br><p>  In Go gibt es keine Klassen und daher keine Klassenhierarchie, da die Welt nicht objektorientiert und noch weniger hierarchisch ist.  Für Programmierer, die nur mit dem klassenorientierten OOP-Modell vertraut sind, mag dies eine Offenbarung sein, ist es aber wirklich nicht.  Die Welt ist ein riesiger, verwobener Graph von Konzepten, Prozessen und Interaktionen.  Es ist nicht perfekt strukturiert, aber auch nicht chaotisch, und der Versuch, es in die Klassenhierarchie zu drücken, ist der zuverlässigste Weg, um die Codebasis unlesbar und ungeschickt zu machen - genau das, was die meisten Codebasen derzeit sind. </p><br><p><img src="https://habrastorage.org/webt/gd/9f/ad/gd9fadtyygideailxszfgw2cs_k.png"></p><br><p>  Ich schätze Go sehr, weil seine Schöpfer sich die Mühe gemacht haben, dieses allgegenwärtige Konzept von Klassen zu überdenken und in Go ein viel einfacheres und leistungsfähigeres Konzept von OOP implementiert haben, das sich nicht zufällig als näher an dem herausstellte, was der Schöpfer von OOP, Alan Kay, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorhatte</a> . </p><br><p>  In Go repräsentieren wir jede Abstraktion in Form einer bestimmten Typstruktur: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyApp <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  In der Dart-Version von Flutter muss <code>MyApp</code> <code>StatelessWidget</code> erben und die <code>build</code> Methode überschreiben.  Dies ist notwendig, um zwei Probleme zu lösen: </p><br><ol><li>  Geben Sie unserem Widget ( <code>MyApp</code> ) einige spezielle Eigenschaften / Methoden </li><li>  Aktivieren Sie Flutter, um unseren Code im Build / Render-Prozess aufzurufen </li></ol><br><p>  Ich kenne die Interna von Flutter nicht, also nehmen wir an, dass Artikel Nummer 1 nicht in Frage kommt und wir es einfach tun müssen.  Go hat dafür eine einzigartige und offensichtliche Lösung: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einbetten von</a> Typen: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyApp <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { flutter.Core <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  Dieser Code fügt alle <code>flutter.Core</code> Eigenschaften und -Methoden zu unserem <code>MyApp</code> Typ hinzu.  Ich habe es <code>Core</code> anstelle von <code>Widget</code> , weil erstens das Einbetten von Typen unsere <code>MyApp</code> noch nicht zu <code>MyApp</code> Widget macht, und zweitens wird dieser Name im GopherJS Vecty-Framework sehr gut verwendet (so etwas wie React, nur für Go).  Ich werde etwas später auf das Thema der Ähnlichkeit zwischen Vecty und Flutter eingehen. </p><br><p>  Der zweite Punkt - die Implementierung der <code>build()</code> -Methode, die die Flutter-Engine verwenden kann - wird in Go ebenfalls einfach und eindeutig gelöst.  Wir müssen nur eine Methode mit einer bestimmten Signatur hinzufügen, die eine bestimmte Schnittstelle erfüllt, die irgendwo in unserer fiktiven Flutter-Bibliothek auf Go definiert ist: </p><br><p>  flutter.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Widget <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Build(ctx BuildContext) Widget }</code> </pre> <br><p>  Und jetzt unser main.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyApp <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { flutter.Core <span class="hljs-comment"><span class="hljs-comment">// ... } // Build renders the MyApp widget. Implements Widget interface. func (m *MyApp) Build(ctx flutter.BuildContext) flutter.Widget { return flutter.MaterialApp() }</span></span></code> </pre> <br><p>  Wir können hier einige Unterschiede feststellen: </p><br><ul><li>  Der Code ist etwas ausführlicher - <code>BuildContext</code> , <code>Widget</code> und <code>MaterialApp</code> zeigen auf <code>flutter</code> Importe vor ihnen. </li><li>  Der Code ist etwas weniger unbegründet - es gibt keine Wörter wie <code>@override</code> <code>extends Widget</code> oder <code>@override</code> </li><li>  Die <code>Build()</code> -Methode beginnt mit einem Großbuchstaben, da dies die "Publizität" der Methode in Go bedeutet.  In Dart wird die Werbung dadurch bestimmt, ob der Name mit einem Unterstrich (_) beginnt oder nicht. </li></ul><br><p>  Um ein Widget in unserem Flutter on Go zu <code>flutter.Core</code> , müssen wir das <code>flutter.Core</code> Typ einbetten und die <code>flutter.Widget</code> Oberfläche implementieren.  Wir haben es herausgefunden und weiter gegraben. </p><br><h2 id="sostoyanie">  Zustand </h2><br><p>  Dies war eines der Dinge, die mich in Flutter wirklich verwirrten.  Es gibt zwei verschiedene Klassen - <code>StatelessWidget</code> und <code>StatefulWidget</code> .  Was mich betrifft, ist ein "zustandsloses Widget" dasselbe Widget, nur ohne, hmm, Daten, Status - warum sollte man sich eine neue Klasse einfallen lassen?  Aber okay, ich kann damit leben. </p><br><p>  Aber weiter - mehr noch, Sie können nicht einfach eine andere Klasse ( <code>StatefulWidget</code> ) erben, sondern müssen eine solche Magie schreiben (die IDE wird es für Sie tun, aber nicht den Punkt): </p><br><pre> <code class="plaintext hljs">class MyHomePage extends StatefulWidget { @override _MyHomePageState createState() =&gt; _MyHomePageState(); } class _MyHomePageState extends State&lt;MyHomePage&gt; { int _counter = 0; void _incrementCounter() { setState(() { _counter++; }); } @override Widget build(BuildContext context) { return Scaffold() } }</code> </pre> <br><p>  Hmm, mal sehen was hier passiert. </p><br><p>  Grundsätzlich lautet die Aufgabe: Fügen Sie dem Widget einen Status hinzu - in unserem Fall den Zähler - und teilen Sie der Flutter-Engine mit, wann wir den Status geändert haben, um das Widget neu zu zeichnen.  Dies ist die tatsächliche Komplexität des Problems (wesentliche Komplexität in Brooks-Begriffen). </p><br><p>  Alles andere ist zufällige Komplexität.  Flutter on Dart wartet mit einer neuen <code>State</code> Klasse auf, die Generika verwendet und ein Widget als Typparameter verwendet.  Als nächstes wird die <code>_MyHomePageState</code> Klasse erstellt, die <code>State  MyApp</code> erbt ... okay, Sie können es trotzdem irgendwie verdauen.  Aber warum wird die <code>build()</code> -Methode von der State-Klasse definiert und nicht von der Klasse, die das Widget ist?  Brrr .... </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Antwort auf diese Frage finden Sie</a> in den Flutter-FAQ. Die kurze Antwort wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ausreichend detailliert behandelt, um eine bestimmte Fehlerklasse beim Erben von <code>StatefulWidget</code> zu vermeiden.  Mit anderen Worten, dies ist eine Problemumgehung, um das Problem des klassenorientierten OOP-Designs zu lösen.  Schick. </p><br><p>  Wie würden wir das in Go machen? </p><br><p>  Erstens würde ich persönlich es vorziehen, keine separate Einheit für den "Staat" - <code>State</code> - zu schaffen.  Schließlich haben wir in jedem bestimmten Typ bereits einen Status - dies sind nur Felder der Struktur.  Die Sprache hat uns diese Essenz sozusagen schon gegeben.  Das Erstellen einer anderen ähnlichen Entität verwirrt den Programmierer nur. </p><br><p>  Die Herausforderung besteht natürlich darin, Flutter die Möglichkeit zu geben, auf Zustandsänderungen zu reagieren (dies ist schließlich die Essenz der reaktiven Programmierung).  Und wenn wir den Entwickler „bitten“ können, eine spezielle Funktion ( <code>setState()</code> ) zu verwenden, können wir auf die gleiche Weise eine spezielle Funktion verwenden, um der Engine mitzuteilen, wann neu gezeichnet werden soll und wann nicht.  Am Ende müssen nicht alle Statusänderungen neu gezeichnet werden, und hier haben wir noch mehr Kontrolle: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> MyHomePage <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { flutter.Core counter <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> } <span class="hljs-comment"><span class="hljs-comment">// Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx flutter.BuildContext) flutter.Widget { return flutter.Scaffold() } // incrementCounter increments widgets's counter by one. func (m *MyHomePage) incrementCounter() { m.counter++ flutter.Rerender(m) // or m.Rerender() // or m.NeedsUpdate() }</span></span></code> </pre> <br><p>  Sie können mit verschiedenen Benennungsoptionen <code>NeedsUpdate()</code> - ich mag <code>NeedsUpdate()</code> wegen seiner Direktheit und der Tatsache, dass dies eine Widget-Eigenschaft ist (von <code>flutter.Core</code> ), aber die globale <code>flutter.Rerender()</code> -Methode sieht auch gut aus.  Es stimmt, es gibt einen falschen Eindruck, dass das Widget sofort neu gezeichnet wird, aber es ist nicht so - es wird beim nächsten Frame-Update neu gezeichnet und die Häufigkeit von Methodenaufrufen kann viel höher sein als die Renderfrequenz -, aber unsere Flutter-Engine sollte bereits in der Lage sein, damit umzugehen. </p><br><p>  Aber die Idee ist, dass wir gerade das notwendige Problem gelöst haben, ohne hinzuzufügen: </p><br><ul><li>  neuer Typ </li><li>  Generika </li><li>  Sonderregeln für den Lese- / Schreibzustand </li><li>  spezielle neue überschriebene Methoden </li></ul><br><p>  Außerdem ist die API viel klarer und verständlicher - erhöhen Sie einfach den Zähler (wie in jedem anderen Programm) und bitten Sie Flutter, das Widget neu zu zeichnen.  Dies ist nur etwas, was nicht sehr offensichtlich ist, wenn wir nur <code>setState</code> - dies ist nicht nur eine spezielle Funktion zum Festlegen des Status, sondern eine Funktion, die eine Funktion (wtf?) Zurückgibt, in der wir bereits etwas mit state tun.  Wiederum macht es versteckte Magie in Sprachen und Frameworks sehr schwierig, Code zu verstehen und zu lesen. </p><br><p>  In unserem Fall haben wir das gleiche Problem gelöst, der Code ist einfacher und zweimal kürzer. </p><br><h2 id="vidzhety-s-sostoyaniem-v-drugih-vidzhetah">  Geben Sie Widgets in anderen Widgets an </h2><br><p>  Schauen wir uns als logische Fortsetzung des Themas an, wie das „Status-Widget“ in einem anderen Widget in Flutter verwendet wird: </p><br><pre> <code class="plaintext hljs">@override Widget build(BuildContext context) { return MaterialApp( title: 'Flutter Demo', home: MyHomePage(title: 'Flutter Demo Home Page'), ); }</code> </pre> <br><p>  <code>MyHomePage</code> hier ein "Status-Widget" (es hat einen Zähler), und wir erstellen es, indem wir den Konstruktor <code>MyHomePage()</code> während des <code>MyHomePage()</code> aufrufen ... Warten Sie, was? </p><br><p>  <code>build()</code> wird aufgerufen, um das Widget möglicherweise mehrmals pro Sekunde neu zu zeichnen.  Warum sollten wir beim Rendern jedes Mal ein Widget erstellen, insbesondere mit einem Status?  Es macht keinen Sinn. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Es stellt sich heraus,</a> dass Flutter diese Trennung zwischen <code>Widget</code> und Status verwendet, um diese Initialisierung / Statusverwaltung vor dem Programmierer zu verbergen (mehr versteckte Dinge, mehr!).  Es wird jedes Mal ein neues Widget erstellt, aber der Status, falls er bereits erstellt wurde, wird automatisch gefunden und an das Widget angehängt.  Diese Magie passiert unsichtbar und ich habe keine Ahnung, wie es funktioniert - Sie müssen den Code lesen. </p><br><p>  Ich halte es beim Programmieren für ein echtes Übel, sich so weit wie möglich vor dem Programmierer zu verstecken und dies mit Ergonomie zu rechtfertigen.  Ich bin sicher, dass der durchschnittliche statistische Programmierer Flutter-Code nicht lesen wird, um zu verstehen, wie diese Magie funktioniert, und es ist unwahrscheinlich, dass er versteht, wie und was miteinander verbunden ist. </p><br><p>  Für die Go-Version würde ich definitiv keine solche versteckte Zauberei wollen und würde eine explizite und sichtbare Initialisierung bevorzugen, selbst wenn dies einen etwas unbegründeteren Code bedeutet.  Flatters Ansatz für Dart kann ebenfalls implementiert werden, aber ich liebe Go, um Magie zu minimieren, und ich würde gerne die gleiche Philosophie in Frameworks sehen.  Daher würde ich meinen Code für Widgets mit Status wie folgt in den Widget-Baum schreiben: </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// MyApp is our top application widget. type MyApp struct { flutter.Core homePage *MyHomePage } // NewMyApp instantiates a new MyApp widget func NewMyApp() *MyApp { app := &amp;MyApp{} app.homePage = &amp;MyHomePage{} return app } // Build renders the MyApp widget. Implements Widget interface. func (m *MyApp) Build(ctx flutter.BuildContext) flutter.Widget { return m.homePage } // MyHomePage is a home page widget. type MyHomePage struct { flutter.Core counter int } // Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx flutter.BuildContext) flutter.Widget { return flutter.Scaffold() } // incrementCounter increments app's counter by one. func (m *MyHomePage) incrementCounter() { m.counter++ flutter.Rerender(m) }</span></span></code> </pre> <br><p>  Dieser Code verliert die Dart-Version, da ich, wenn ich <code>homePage</code> aus dem Widget-Baum entfernen und durch etwas anderes ersetzen möchte, es an drei statt an einer Stelle entfernen muss.  Im Gegenzug erhalten wir ein vollständiges Bild davon, was, wo und wie es passiert, wo der Speicher zugewiesen wird, wer wen anruft usw. Der Code in Ihrer Handfläche ist klar und leicht zu lesen. </p><br><p>  Flutter hat übrigens auch so etwas wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">StatefulBuilder</a> , das noch mehr Magie hinzufügt und es Ihnen ermöglicht, Widgets mit State on the Fly zu erstellen. </p><br><h1 id="dsl">  DSL </h1><br><p>  Nehmen wir jetzt den lustigen Teil an.  Wie werden wir den Widget-Baum auf Go darstellen?  Wir möchten, dass es präzise, ​​sauber, einfach umzugestalten und zu ändern ist, die räumlichen Beziehungen zwischen Widgets beschreibt (Widgets, die sich visuell in der Nähe befinden, sich in der Nähe befinden müssen und in der Beschreibung enthalten sind) und gleichzeitig flexibel genug ist, um willkürlich zu beschreiben Code wie Ereignishandler. </p><br><p>  Es scheint mir, dass die Option auf Dart sehr schön und beredt ist: </p><br><pre> <code class="plaintext hljs">return Scaffold( appBar: AppBar( title: Text(widget.title), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text('You have pushed the button this many times:'), Text( '$_counter', style: Theme.of(context).textTheme.display1, ), ], ), ), floatingActionButton: FloatingActionButton( onPressed: _incrementCounter, tooltip: 'Increment', child: Icon(Icons.add), ), );</code> </pre> <br><p>  Jedes Widget verfügt über einen Konstruktor, der optionale Parameter akzeptiert. Was den Datensatz hier wirklich schön macht, sind die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">benannten Parameter der Funktionen</a> . </p><br><h2 id="imenovannye-parametry">  Benannte Parameter </h2><br><p>  Falls Sie mit diesem Begriff nicht vertraut sind, werden die Parameter der Funktion in vielen Sprachen als "positionell" bezeichnet, da ihre Position für die Funktion von Bedeutung ist: </p><br><pre> <code class="plaintext hljs">Foo(arg1, arg2, arg3)</code> </pre> <br><p>  und im Fall von benannten Parametern wird alles durch ihren Namen im Aufruf entschieden: </p><br><pre> <code class="plaintext hljs">Foo(name: arg1, description: arg2, size: arg3)</code> </pre> <br><p>  Dies fügt Text hinzu, speichert jedoch Klicks und bewegt sich im Code, um zu verstehen, was die Parameter bedeuten. </p><br><p>  Im Fall des Widget-Baums spielen sie eine Schlüsselrolle für die Lesbarkeit.  Vergleichen Sie den gleichen Code wie oben, jedoch ohne benannte Parameter: </p><br><pre> <code class="plaintext hljs">return Scaffold( AppBar( Text(widget.title), ), Center( Column( MainAxisAlignment.center, &lt;Widget&gt;[ Text('You have pushed the button this many times:'), Text( '$_counter', Theme.of(context).textTheme.display1, ), ], ), ), FloatingActionButton( _incrementCounter, 'Increment', Icon(Icons.add), ), );</code> </pre> <br><p>  Nicht das.  richtig?  Es ist nicht nur schwieriger zu verstehen (Sie müssen bedenken, was jeder Parameter bedeutet und welchen Typ er hat, und dies ist eine erhebliche kognitive Belastung), sondern gibt uns auch keine Freiheit bei der Auswahl der Parameter, die wir übertragen möchten.  Beispielsweise möchten Sie möglicherweise keinen <code>FloatingActionButton</code> für Ihre Materialanwendung, sodass Sie ihn einfach nicht in den Parametern angeben.  Ohne benannte Parameter müssen wir entweder die Angabe aller möglichen Widgets erzwingen oder mit Reflexion auf Magie zurückgreifen, um herauszufinden, welche Widgets übertragen wurden. </p><br><p>  Und da es in Go keine Überlastung von Funktionen und benannten Parametern gibt, wird dies für Go keine leichte Aufgabe sein. </p><br><h1 id="derevo-vidzhetov-v-go">  Gehen Sie zum Widget-Baum </h1><br><h2 id="versiya-1">  Version 1 </h2><br><p>  Schauen wir uns das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scaffold-</a> Objekt genauer an, das ein praktischer Wrapper für eine mobile Anwendung ist.  Es hat mehrere Eigenschaften - AppBar, Drawe, Home, BottomNavigationBar, FloatingActionBar - und dies sind alles Widgets.  Beim Erstellen eines Widget-Baums müssen wir dieses Objekt tatsächlich irgendwie initialisieren und ihm die oben genannten Widget-Eigenschaften übergeben.  Nun, dies unterscheidet sich nicht allzu sehr von der üblichen Erstellung und Initialisierung von Objekten. </p><br><p>  Versuchen wir den Stirnansatz: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> flutter.NewScaffold( flutter.NewAppBar( flutter.Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), ), <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, flutter.NewCenter( flutter.NewColumn( flutter.MainAxisCenterAlignment, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, []flutter.Widget{ flutter.Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), flutter.Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), ctx.Theme.textTheme.display1), }, ), ), flutter.FloatingActionButton( flutter.NewIcon(icons.Add), <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, m.onPressed, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, ), )</code> </pre> <br><p>  Auf jeden Fall nicht der schönste UI-Code.  Das Wort <code>flutter</code> überall und fragt.  Um es zu verbergen (eigentlich musste ich das Verpackungsmaterial benennen, nicht <code>flutter</code> , aber nicht die Essenz), sind die anonymen Parameter völlig offensichtlich, und diese Nullen sind überall offen verwirrend. </p><br><h2 id="versiya-2">  Version 2 </h2><br><p>  Da der größte Teil des Codes jedoch den einen oder anderen Typ / die andere Funktion aus dem <code>flutter</code> , können wir das Paket mithilfe des "Punktimport" -Formats in unseren Namespace importieren und dadurch den Paketnamen "verbergen": </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> . <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span></code> </pre> <br><p>  Jetzt anstatt zu <code>flutter.Text</code> . <code>Text</code> können wir nur <code>Text</code> schreiben.  Dies ist normalerweise eine schlechte Praxis, aber wir arbeiten mit dem Framework, und dieser Import wird buchstäblich in jeder Zeile erfolgen.  Aus meiner Praxis ist dies genau der Fall, für den ein solcher Import akzeptabel ist - zum Beispiel, wenn das wunderbare Framework zum Testen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GoConvey verwendet wird</a> . </p><br><p>  Mal sehen, wie der Code aussehen wird: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold( NewAppBar( Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), ), <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, NewCenter( NewColumn( MainAxisCenterAlignment, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, []Widget{ Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>), Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), ctx.Theme.textTheme.display1), }, ), ), FloatingActionButton( NewIcon(icons.Add), <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, m.onPressed, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, ), )</code> </pre> <br><p>  Schon besser, aber diese Nullen und unbenannten Parameter .... </p><br><h2 id="versiya-3">  Version 3 </h2><br><p>  Mal sehen, wie der Code aussehen wird, wenn wir Reflection (die Möglichkeit, den Code zu überprüfen, während das Programm ausgeführt wird) verwenden, um die übergebenen Parameter zu analysieren.  Dieser Ansatz wird in mehreren frühen HTTP-Frameworks unter Go (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Martini</a> ) verwendet und wird als sehr schlechte Vorgehensweise angesehen. Er ist unsicher, verliert den Komfort des Typsystems, ist relativ langsam und fügt dem Code Magie hinzu. Aus Versuchsgründen können Sie jedoch Folgendes versuchen: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold( NewAppBar( Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>), ), NewCenter( NewColumn( MainAxisCenterAlignment, []Widget{ Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>), Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), ctx.Theme.textTheme.display1), }, ), ), FloatingActionButton( NewIcon(icons.Add), <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, m.onPressed, ), )</code> </pre> <br><p>  Nicht schlecht, und es sieht aus wie die Originalversion von Dart, aber das Fehlen benannter Parameter tut dem Auge immer noch weh. </p><br><h2 id="versiya-4">  Version 4 </h2><br><p>  Lassen Sie uns einen Schritt zurücktreten und uns fragen, was wir versuchen zu tun.  Wir müssen den Dart-Ansatz nicht blind kopieren (obwohl dies ein schöner Bonus ist - es gibt weniger, um Leute zu unterrichten, die bereits mit Flutter on Dart vertraut sind).  Tatsächlich erstellen wir einfach neue Objekte und weisen ihnen Eigenschaften zu. </p><br><p>  Kannst du das so versuchen? </p><br><pre> <code class="go hljs">scaffold := NewScaffold() scaffold.AppBar = NewAppBar(Text(<span class="hljs-string"><span class="hljs-string">"Flutter Go app"</span></span>)) column := NewColumn() column.MainAxisAlignment = MainAxisCenterAlignment counterText := Text(fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter)) counterText.Style = ctx.Theme.textTheme.display1 column.Children = []Widget{ Text(<span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>), counterText, } center := NewCenter() center.Child = column scaffold.Home = center icon := NewIcon(icons.Add), fab := NewFloatingActionButton() fab.Icon = icon fab.Text = <span class="hljs-string"><span class="hljs-string">"Increment"</span></span> fab.Handler = m.onPressed scaffold.FloatingActionButton = fab <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scaffold</code> </pre> <br><p>    ,         " ",         . -,       –   ,      . -,      ,            . </p><br><p> ,       UI   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GTK</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qt</a> . , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>  Qt 5: </p><br><pre> <code class="plaintext hljs"> QGridLayout *layout = new QGridLayout(this); layout-&gt;addWidget(new QLabel(tr("Object name:")), 0, 0); layout-&gt;addWidget(m_objectName, 0, 1); layout-&gt;addWidget(new QLabel(tr("Location:")), 1, 0); m_location-&gt;setEditable(false); m_location-&gt;addItem(tr("Top")); m_location-&gt;addItem(tr("Left")); m_location-&gt;addItem(tr("Right")); m_location-&gt;addItem(tr("Bottom")); m_location-&gt;addItem(tr("Restore")); layout-&gt;addWidget(m_location, 1, 1); QDialogButtonBox *buttonBox = new QDialogButtonBox(QDialogButtonBox::Ok | QDialogButtonBox::Cancel, this); connect(buttonBox, &amp;QDialogButtonBox::rejected, this, &amp;QDialog::reject); connect(buttonBox, &amp;QDialogButtonBox::accepted, this, &amp;QDialog::accept); layout-&gt;addWidget(buttonBox, 2, 0, 1, 2);</code> </pre><br><p>   ,   -      . ,  ,    ,           . </p><br><h2 id="versiya-5">  5 </h2><br><p>   ,     –          -.  Zum Beispiel: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Widget</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold(ScaffoldParams{ AppBar: NewAppBar(AppBarParams{ Title: Text(TextParams{ Text: <span class="hljs-string"><span class="hljs-string">"My Home Page"</span></span>, }), }), Body: NewCenter(CenterParams{ Child: NewColumn(ColumnParams{ MainAxisAlignment: MainAxisAlignment.center, Children: []Widget{ Text(TextParams{ Text: <span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, }), Text(TextParams{ Text: fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), Style: ctx.textTheme.display1, }), }, }), }), FloatingActionButton: NewFloatingActionButton( FloatingActionButtonParams{ OnPressed: m.incrementCounter, Tooltip: <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, Child: NewIcon(IconParams{ Icon: Icons.add, }), }, ), }) }</code> </pre> <br><p> ! ,   .    <code>...Params</code>    ,          .  , ,       Go    ,       ,     . </p><br><p> -,     <code>...Params</code> ,       .    (proposal)     — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"  "</a> .  ,     <code>FloatingActionButtonParameters{...}</code>  <code>{...}</code>    .     : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Widget</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewScaffold({ AppBar: NewAppBar({ Title: Text({ Text: <span class="hljs-string"><span class="hljs-string">"My Home Page"</span></span>, }), }), Body: NewCenter({ Child: NewColumn({ MainAxisAlignment: MainAxisAlignment.center, Children: []Widget{ Text({ Text: <span class="hljs-string"><span class="hljs-string">"You have pushed the button this many times:"</span></span>, }), Text({ Text: fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%d"</span></span>, m.counter), Style: ctx.textTheme.display1, }), }, }), }), FloatingActionButton: NewFloatingActionButton({ OnPressed: m.incrementCounter, Tooltip: <span class="hljs-string"><span class="hljs-string">"Increment"</span></span>, Child: NewIcon({ Icon: Icons.add, }), }, ), }) }</code> </pre> <br><p>        Dart!         . </p><br><h2 id="versiya-6">  6 </h2><br><p>   ,         .  ,    ,    ,       ,   . </p><br><p>   ,    ,   ,      -,     –     : </p><br><pre> <code class="go hljs">button := NewButton(). WithText(<span class="hljs-string"><span class="hljs-string">"Click me"</span></span>). WithStyle(MyButtonStyle1)</code> </pre> <br><p>  oder </p><br><pre> <code class="go hljs">button := NewButton(). Text(<span class="hljs-string"><span class="hljs-string">"Click me"</span></span>). Style(MyButtonStyle1)</code> </pre> <br><p>     Scaffold-    : </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx flutter.BuildContext) flutter.Widget { return NewScaffold(). AppBar(NewAppBar(). Text("Flutter Go app")). Child(NewCenter(). Child(NewColumn(). MainAxisAlignment(MainAxisCenterAlignment). Children([]Widget{ Text("You have pushed the button this many times:"), Text(fmt.Sprintf("%d", m.counter)). Style(ctx.Theme.textTheme.display1), }))). FloatingActionButton(NewFloatingActionButton(). Icon(NewIcon(icons.Add)). Text("Increment"). Handler(m.onPressed)) }</span></span></code> </pre> <br><p>        Go –       , .      Dart-,       : </p><br><ul><li>    </li><li>  "" </li><li>      </li><li>       </li></ul><br><p>          <code>New...()</code>   –  ,   .       ,    — <strong>"  ,      ,   ,      ,    ,     ,      –        "</strong> . </p><br><p>   ,   , 5-  6-    . </p><br><h1 id="finalnaya-versiya-koda">    </h1><br><p>         "hello, world"   Flutter  Go: </p><br><p> main.go </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { flutter.Run(NewMyApp()) }</code> </pre> <br><p> app.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> . <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> <span class="hljs-comment"><span class="hljs-comment">// MyApp is our top application widget. type MyApp struct { Core homePage *MyHomePage } // NewMyApp instantiates a new MyApp widget func NewMyApp() *MyApp { app := &amp;MyApp{} app.homePage = &amp;MyHomePage{} return app } // Build renders the MyApp widget. Implements Widget interface. func (m *MyApp) Build(ctx BuildContext) Widget { return m.homePage }</span></span></code> </pre> <br><p> home_page.go: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> . <span class="hljs-string"><span class="hljs-string">"github.com/flutter/flutter"</span></span> ) <span class="hljs-comment"><span class="hljs-comment">// MyHomePage is a home page widget. type MyHomePage struct { Core counter int } // Build renders the MyHomePage widget. Implements Widget interface. func (m *MyHomePage) Build(ctx BuildContext) Widget { return NewScaffold(ScaffoldParams{ AppBar: NewAppBar(AppBarParams{ Title: Text(TextParams{ Text: "My Home Page", }), }), Body: NewCenter(CenterParams{ Child: NewColumn(ColumnParams{ MainAxisAlignment: MainAxisAlignment.center, Children: []Widget{ Text(TextParams{ Text: "You have pushed the button this many times:", }), Text(TextParams{ Text: fmt.Sprintf("%d", m.counter), Style: ctx.textTheme.display1, }), }, }), }), FloatingActionButton: NewFloatingActionButton( FloatingActionButtonParameters{ OnPressed: m.incrementCounter, Tooltip: "Increment", Child: NewIcon(IconParams{ Icon: Icons.add, }), }, ), }) } // incrementCounter increments app's counter by one. func (m *MyHomePage) incrementCounter() { m.counter++ flutter.Rerender(m) }</span></span></code> </pre> <br><p>   ! </p><br><h1 id="zaklyuchenie">  Fazit </h1><br><h4 id="pohozhest-s-vecty">   Vecty </h4><br><p>        ,      ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vecty</a> .  , ,  , ,  Vecty    DOM/CSS/JS,  Flutter            ,        120   .   ,   Vecty  ,     Flutter  Go  Vecty . </p><br><h4 id="luchshee-ponimanie-dizayna-flutter">    Flutter </h4><br><p>         –        ,   .            Flutter,         . </p><br><h4 id="nedostatki-go">  Go </h4><br><p>    <strong>"  Flutter    Go?"</strong>    <strong>""</strong> ,  , , ,        ,   Flutter, , ,     ""   .      ,    Go       . </p><br><p>  ,  <strong>   Go    </strong> .                 .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>    Go, , ,    -.    –      ,         ,        . </p><br><p>           Go.              –       ,      . </p><br><h4 id="mysli-o-buduschem-flutter">    Flutter </h4><br><p>      ,  Flutter  ,     ,       .  "/ "   ,  Dart    ( , ,     ).    Dart,  ,      (,    )    DartVM  V8,  Flutter    –   Flutter      -. </p><br><p> ,     .          .  ,           ,  1.0     . , -      . </p><br><p>    game changer,     Flutter ,           ,           . </p><br><p>            UI –  Flutter,    . </p><br><h1 id="ssylki">  Referenzen </h1><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://flutter.io</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flutter Tutorial for Beginners — Build iOS and Android Apps</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Go proposal: An Improved, Golang-Cohesive Design for Named Arguments</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Go proposal: spec: untyped composite literals</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de435960/">https://habr.com/ru/post/de435960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de435950/index.html">Modulares Rechenzentrum im Dienste des Large Hadron Collider</a></li>
<li><a href="../de435952/index.html">Wer sind "ungewaschene Hoster"?</a></li>
<li><a href="../de435954/index.html">Entwicklung von Modulen für Puppen mit Puppenentwicklungskit</a></li>
<li><a href="../de435956/index.html">PHP Digest Nr. 147 (1. - 14. Januar 2019)</a></li>
<li><a href="../de435958/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 347 (7. - 13. Januar 2019)</a></li>
<li><a href="../de435962/index.html">25 Jahre Aeron: Sensationen und Eindrücke der aktualisierten Version von Aeron Remastered</a></li>
<li><a href="../de435964/index.html">Ethereum plant, 99% wirtschaftlicher zu sein</a></li>
<li><a href="../de435968/index.html">Übersicht über Deep Machine Learning-Algorithmen für Roboter</a></li>
<li><a href="../de435970/index.html">Anfängerhandbuch zur Webserverentwicklung mit Node.js.</a></li>
<li><a href="../de435972/index.html">Einführung der reaktiven Programmierung im Frühjahr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>