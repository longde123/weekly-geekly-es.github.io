<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìí ü§ôüèª üçã Hausgemachte schlanke LED ü¶ñ üíº üë®üèº‚Äçüè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warum wird es gebraucht? 


 K√ºrzlich schrieb ich einen Artikel √ºber einen hausgemachten Bluetooth-Fahrradcomputer . Es gab eine lebhafte Diskussion. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hausgemachte schlanke LED</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408807/"><h1>  Warum wird es gebraucht? </h1><br><p>  K√ºrzlich schrieb ich einen Artikel √ºber einen hausgemachten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bluetooth-Fahrradcomputer</a> .  Es gab eine lebhafte Diskussion.  Einer der Vorschl√§ge zur Modernisierung war die Idee, eine Anzeige oder einen LCD-Bildschirm hinzuzuf√ºgen.  Die Idee hat mir gefallen.  Und ich beschloss dar√ºber nachzudenken, wie ich es zum Leben erwecken k√∂nnte. </p><br><p>  Da Fahrradcomputer bereits hergestellt worden waren, war das Geh√§use fast vollst√§ndig besetzt, die Option mit einem LCD-Bildschirm fiel weg.  Wir brauchten eine Gr√∂√üe von 40 x 30 mm unter Ber√ºcksichtigung aller Kabel und Dr√§hte und eine Dicke von nicht mehr als 2-3 mm.  Es gibt auch wenige freie Schlussfolgerungen.  Verschiedene LED-Anzeigen (dreistellig, Skala) passten nicht.  Dann kam mir ein sehr guter Gedanke - eine selbstgemachte Anzeige aus SMD-LEDs zu machen.  Nehmen Sie einen d√ºnnen einseitigen Textolithen, platzieren Sie die richtige Anzahl von LEDs in der richtigen Reihenfolge darauf und Sie erhalten eine hervorragende Anzeige.  Nachdem ich mir vorgestellt hatte, dass Kabel zu allen LEDs gef√ºhrt werden sollten, entschied ich, dass ein billiger Mikrocontroller, der alle LEDs selbst steuert, auf die Platine passt und der Haupt-MK des Fahrradcomputers die Anzeige √ºber ein Kabel steuert. </p><br><p>  Das Ergebnis ist eine sehr kompakte (nur 3 mm dicke) Anzeige.  Management auf einem Draht und 2 weitere auf Essen.  Wenn Sie vorgefertigte Ger√§te haben oder ein Ger√§t herstellen m√∂chten und einen Indikator ben√∂tigen, ist ein hausgemachter Indikator die beste Option.  Schauen wir uns genauer an, wie es funktioniert. </p><a name="habracut"></a><br><h1>  20 LEDs an 10 Pins - ganz einfach! </h1><br><p>  MK Ich habe mich f√ºr das teuerste entschieden - SMT8S003, genau wie beim Fahrradcomputer.  Er hat nur 20 Beine.  Wenn Sie die Beine der Kraft und Kontrolle entfernen, bleiben 14 Beine √ºbrig.  Die erste Aufgabe, die gel√∂st werden musste, bestand darin, diese Beine mit so vielen LEDs wie m√∂glich zu steuern. </p><br><p>  Mir fiel sofort ein, dass 2 LEDs an einem Bein aufgeh√§ngt werden konnten, mit einem Pin am GND und dem anderen am VDD.  F√ºr jede LED einen Widerstand.  Nach diesem Schema. </p><br><p><img src="https://habrastorage.org/webt/vc/c-/id/vcc-idtntq-9zcgj2_g-tl7-awe.jpeg"><br clear="left"><br>  Es ist einfach zu verwalten.  Wir speisen an Pin 0, eine LED leuchtet, Feed 1 - die zweite LED leuchtet.  Wir √ºbersetzen in den dritten Zustand (Eingabe), nicht einer brennt.  Bei 14 Schlussfolgerungen k√∂nnen Sie 28 LEDs aufh√§ngen.  Sehr nicht schlecht. </p><br><p>  Der Sohn zeichnete den Indikator selbst.  F√ºr einen Fahrradcomputer ist die n√ºtzlichste Art der Anzeige nach den Zahlen eine Skala.  Die Anzeige besteht aus 2 Skalen mit 8 LEDs und 4 weiteren verschiedenen Status-LEDs.  Insgesamt 20 LEDs.  Ich skizzierte schnell die Platine, √§tzte, l√∂te und begann zu testen. </p><br><p>  Ich schalte den MK ein, alle Schlussfolgerungen sind im dritten Zustand, nichts sollte brennen.  Und ... LEDs leuchten.  Nat√ºrlich haben sie genug Spannung von 5 Volt, um schwach zu leuchten.  Es wird nicht funktionieren, wir √§ndern das Schema ... </p><br><h2>  Weitere LEDs </h2><br><p>  Nach einigem Nachdenken kam eine andere Idee.  Verbinden Sie die LEDs nicht mit Strom und Masse, sondern mit zwei weiteren Schlussfolgerungen des MK.  Dann k√∂nnen Sie definitiv alles ausschalten.  Wir versuchen, es funktioniert super.  Aufgrund der dynamischen Anzeige blinkt alles wundersch√∂n.  Sie k√∂nnen jede LED steuern. </p><br><p>  Infolgedessen stellte sich das folgende Schema f√ºr die Zukunft heraus: </p><br><p><img src="https://habrastorage.org/webt/kd/5c/fc/kd5cfcy9pbstuw4l02doacdbzle.jpeg"><br clear="left">  Wir unterscheiden verschiedene Kontrollschlussfolgerungen und Arbeiter.  Wir setzen die Widerst√§nde nur auf die Steuerung upr1 upr2.  Somit werden die Schaltung und die Spur der Platine stark vereinfacht.  Bis zu 96 LEDs k√∂nnen an 14 Pins platziert werden.  6 Manager und 8 Mitarbeiter sowie jeweils 2 LEDs.  Mehr als genug wird der L√∂tarm m√ºde. </p><br><p>  Wie sich herausstellte, k√∂nnen Sie mehr tun.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Charlie</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Allen</a> ging noch weiter, indem er mehrere LEDs zwischen den Steuerstiften platzierte.  Somit k√∂nnen bis zu 16 * 15 LEDs an 16 Pins platziert werden.  In seiner Schaltung werden jedoch viele Widerst√§nde hinzugef√ºgt, und es ist auch erforderlich, dass alle LEDs dieselbe Farbe haben. Im Allgemeinen gibt es kleine Probleme.  Fazit - 96 LEDs sind mehr als genug. </p><br><h1>  Wir steuern jede LED einzeln </h1><br><p>  Zur Steuerung jeder LED wird die dynamische Anzeigemethode verwendet.  Zu einem bestimmten Zeitpunkt kann eine LED pro Steuerausgang leuchten.  Als n√§chstes m√ºssen Sie alle Paare sortieren. Dies sind die Anzeigezust√§nde usw. in einem Kreis.  Da die Karte bereits hergestellt wurde, habe ich sie in einen Steuerstift und einen Widerstand umgewandelt.  Es stellte sich heraus, 20 LEDs an einem Ausgang und 10 funktionierende Schlussfolgerungen.  Insgesamt 20 Staaten. </p><br><p><img src="https://habrastorage.org/webt/de/6p/yx/de6pyx1yu4lwcrrknzrnr-7o25m.jpeg"><br clear="left"></p><br><p>  Um den Energieverbrauch zu senken, arbeitet MK mit einer Frequenz von 2 MHz.  Um 20 Zust√§nde mit einer Frequenz von mindestens 50 Hz zu sortieren, ben√∂tigen Sie einen Timer mit einer Frequenz von 1000 Hz.  Au√üerdem wollte ich auch die Helligkeit steuern.  Es stellt sich jedoch heraus, dass Sie eine Timerfrequenz von 10.000 Hz und das 100-fache der 100.000 Hz ben√∂tigen, um den Faktor 10 zu senken.  In diesem Fall m√ºssen Sie im Interrupt-Handler alle Optionen sortieren und die gew√ºnschte LED aufleuchten lassen.  Im Allgemeinen konnte MK nicht damit umgehen.  Ich musste auf die Option mit PWM-Modulation umsteigen. </p><br><h1>  Wir steuern die Helligkeit mit einem PWM-Timer </h1><br><p>  Das Ergebnis ist ein einfaches Programm.  Wir verwenden einen Timer - TIM2, mit der M√∂glichkeit der PWM-Erzeugung.  Wir stellen die Timerfrequenz auf 1000 Hz ein und der Maximalwert des Timers 125 ist die PWM-Breite, die die Helligkeitsabstufung bestimmt.  Infolgedessen k√∂nnen Sie einen beliebigen Helligkeitswert von 0 bis 125 einstellen. Schalten Sie zum Zeitpunkt des zweiten Timer-Interrupts im Vergleich zum Bef√ºllen der PWM alle LEDs aus. </p><br><p>  Das Ergebnis ist ein guter Indikator.  Aufgrund der Helligkeitsregelung liegt der Verbrauch in der aktiven Phase zwischen 1 mA und 4 mA. </p><br><h1>  Wir schlie√üen einen Fahrradcomputer an </h1><br><p>  Die Anzeige selbst ist fertig, im Fall vom Fahrradcomputer sieht es so aus: </p><br><p><img src="https://habrastorage.org/webt/ra/si/ap/rasiapvq2nntvwyejmvpegpakym.jpeg"><br clear="left"><br>  Um die Anzeige zu steuern, habe ich das 1-Draht-Protokoll gew√§hlt.  Ich werde es nicht beschreiben.  Ich kann nur sagen, dass ich mich selbst qu√§len musste, um den Interrupt zu bew√§ltigen und den notwendigen Timings standzuhalten, aber am Ende hat es funktioniert.  Der Fahrradcomputer ist wie ein Meister und die Anzeige ist wie ein Sklave.  Zur Steuerung m√ºssen 4 Bytes √ºbertragen werden.  Das erste Byte ist der Befehl, die Helligkeit und ein Bit, um in den Ruhemodus zu wechseln. Die restlichen 3 Bytes sind LEDs, ein Bit f√ºr LED. </p><br><p>  Das erste, was mir auf den Indikator fiel, war Geschwindigkeit und Personal.  Service-LEDs sollten f√ºr den Bluetooth-Status, Verst√∂√üe gegen die Geschwindigkeits- und Trittfrequenzsteuerung und eine andere - Entfernungssteuerung - belassen werden. </p><br><p>  Nach den experimentellen Tests habe ich die M√∂glichkeit hinzugef√ºgt, den verbleibenden Abstand zum Set oder die verbleibenden Kalorien vom Set anzuzeigen.  Es stellte sich als sehr praktisch heraus.  Sie haben einen Plan aufgestellt - um 2000 Cal f√ºr einen Spaziergang auszugeben, gehen Sie und sehen sofort, es sind noch die H√§lfte √ºbrig.  Schlussfolgerung - eine Indikation ist eine n√ºtzliche Sache. </p><br><p>  Meinem Sohn hat es sehr gut gefallen, er hatte die Idee, einen Schl√ºsselbund herzustellen - einen Indikator mit einer Batterie aus Epoxid.  Ich ging zum Nachdenken. </p><br><h1>  Welche anderen Indikatoren k√∂nnen getan werden? </h1><br><p>  Uhr - LEDs in zwei Kreisen - Stunden und Minuten. </p><br><p>  Kardinalpunkte - f√ºr den elektronischen Kompass. </p><br><p>  Skala f√ºr Inkremental-Drehgeber. </p><br><p>  Mehrere Skalen in einem Indikator. </p><br><p>  Herz f√ºr eine Musikkarte. </p><br><p>  8x8 Matrix zur Anzeige von Bildern. </p><br><p>  D√ºnne Sieben-Segment-Anzeige f√ºr eine Ziffer von 11 LEDs. </p><br><p>  Im Allgemeinen gibt es viele Ideen, wie dies verwendet werden kann. </p><br><p>  Auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github</a> wie gewohnt eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Karte</a> , ein Programm, die Implementierung des 1-Draht-Protokolls und eine dynamische Anzeige.  Wer es braucht, kann es in Ihren Projekten verwenden. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de408807/">https://habr.com/ru/post/de408807/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de408795/index.html">Die Suche nach Leben im Sonnensystem</a></li>
<li><a href="../de408797/index.html">Eine kurze Geschichte des Blue Screen of Death</a></li>
<li><a href="../de408799/index.html">Das Elektroauto in der Last des Januar-Tests Falcon Heavy war ein Witz. Oder nicht‚Ä¶</a></li>
<li><a href="../de408801/index.html">Cloud-Betrug: Wie Betr√ºger versuchen, sich als HashFlare auszugeben und nicht vorhandene Dienste zu verkaufen</a></li>
<li><a href="../de408803/index.html">Unglaublich spektakul√§re Farbmusik auf Arduino und LEDs</a></li>
<li><a href="../de408809/index.html">Meine $ 200K Bitcoin Odyssey</a></li>
<li><a href="../de408811/index.html">Neuer 3D-Drucker druckt zehnmal schneller als vorhandene Modelle</a></li>
<li><a href="../de408815/index.html">Der Handel mit Bitcoin-Futures hat begonnen: Konsequenzen und Prognosen</a></li>
<li><a href="../de408817/index.html">Wer sind die "grauen Wanderer" von Australien</a></li>
<li><a href="../de408819/index.html">8 Millionen Dollar f√ºr Starfall. ALE-Startup startet 2019 den weltweit ersten k√ºnstlichen Meteorschauer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>