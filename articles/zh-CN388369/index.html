<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍾 🐗 🧝🏾 LED魔方+蛇 👨🏽‍💻 🌄 🆚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前言
 在本文中，我们（由于该文章是由2个人组成的项目撰写和撰写的）将告诉您我们如何将生命注入旧游戏中，被大家遗忘。
 
 
 
 准备工作
 让我们从多维数据集开始。我们没有想出“自行车”，而是决定寻找现成的解决方案。该文章基于挪威作者的文章，尽管进行了一些更改，在我看来这是有益的。
 
 创建自...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LED魔方+蛇</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388369/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前言</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本文中，我们（由于该文章是由2个人组成的项目撰写和撰写的）将告诉您我们如何将生命注入旧游戏中，被大家遗忘。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/ec4/57c/185/ec457c1850803b39dd5a099a12c17160.jpg" alt="图片"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">准备工作</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们从多维数据集开始。</font><font style="vertical-align: inherit;">我们没有想出“自行车”，而是决定寻找现成的解决方案。</font><font style="vertical-align: inherit;">该文章基于挪威作者的文章，尽管进行了一些更改，在我看来这是有益的。</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建自己的LED立方体</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在讨论了一些要点之后，决定制作一个8x8x8立方体。我们设法以合理的价格批量购买了1000个LED，这正是您所需要的，尽管这些LED并非真正合适。从外观上看，带有哑光透镜的蓝色LED看起来会更好，发光不会那么明亮且更均匀。透明LED还有另一个问题；下层突出显示上层的LED。然而，尽管如此，LED必须足够亮以使图像清晰。为了使立方体具有更高的透明度，最好采用较小的LED，例如3 mm。选择LED时的另一点是脚的长度。我们将从LED的腿上制作立方体框架，因此它们不应小于笼子的尺寸。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
构建多维数据集时的另一个重要点是其大小。尽管有几种使用金属棒或金属丝的方法，但我们还是使用LED的腿来制作框架。我们的LED阴极长度约为25毫米，因此我们选择了20毫米的单元尺寸，并决定将其余部分用于焊接，因此立方体将更坚固。这与上面文章作者的设计仅略有不同。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下一步是创建用于焊接多维数据集层的布局，这将有助于简化焊接并且多维数据集将更加均匀。布局非常简单，我拿了一块胶合板，将其画成我的立方体的大小，并在LED尺寸的线的交点处钻了个孔。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/d63/8b0/325/d638b0325a4c85cb8157d6f65c62e17f.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
焊接了几层之后，我意识到这种设计的支腿不够长，只能用作长螺栓。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在开始焊接立方体之前，我建议您准备一切。从个人经验来看，我可以说在一起做起来要方便得多，因为真的没有足够的人手，一个人施加阴极，第二个人进给焊锡和焊锡。您需要快速执行此操作，LED很小，并且怕过热。同样在不同的手册中，他们说在焊接之前检查每个LED。我不明白这一点，请花大量时间进行本质上毫无意义的操作。我们购买了新的LED，结果它们都在工作。但是，当您焊接该层时，对所有内容进行良好检查已经是值得的，因为从中心焊接LED是一项令人不愉快的任务，因此需要您亲自进行检查。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，让我们直接进行焊接。我不能说这是最可靠的方法，但是我们是这样做的。首先，我们将所有LED布置在布局中，建议将它们平稳地安装，然后将无法修复任何东西。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/f78/66d/701/f7866d7016c4d8f262b1d76c830dfb44.jpg" alt="图片"><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/917/eca/81d/917eca81dcc0572b1b1ab76c1ed916e8.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后我们弯曲阴极，使它们彼此重叠。当一切准备就绪后，就可以开始焊接了，但是您应该记住可能会发生过热，如果焊接失败，请不要急于焊接，最好让LED冷却。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
焊接所有的LED，我们得到8个带8个LED的条。为了将其全部变成一层，我们使用了普通的铝线，该线事先已拉直。我们决定只使用其中两个“杆”，以免使设计复杂化，因为事实证明该设计相当坚固。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
焊接最后一层不需要得到它，因为这时您必须将其插入。现在我们已经拥有了所有8层，我们需要以某种方式将它们组合成一个多维数据集。为了使立方体或多或少均匀，我不得不如图所示弯曲阳极，现在它绕着LED旋转，可以进行整齐的焊接。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/285/d86/0b4/285d860b4e713f8f13cc74151a560028.jpg" alt="图片"><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/667/75e/626/66775e626efcf5627016d7501198597f.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将立方体从顶层焊接到最底层，同时不断检查LED的运行情况，最好不要偷懒，因为这样一来，更难修复错误。最好借助一些模板设置各层之间的高度，以上文章的作者使用了普通冠。我们没有合适的东西，但是我们只有两个人，因此我们决定手动设置所有内容。结果很顺利，但并不完美。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完成所有这些操作后，您将获得收集的LED立方体和一些灼伤的手指，但这已经取决于您的准确性。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/190/88f/310/19088f310be33d7e982093c4abefe459.jpg" alt="图片"><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/cb7/2e5/c22/cb72e5c224d9d9cfb13d452773b19499.jpg" alt="图片"><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电路设计</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了实现我们的想法，我们需要某种微控制器。</font><font style="vertical-align: inherit;">我们决定继续使用Arduino Leonardo微控制器。</font><font style="vertical-align: inherit;">我们不想打扰程序员和必要的软件，只是我们不需要功能强大的处理器来执行任务。</font><font style="vertical-align: inherit;">有了完成的设备，我们意识到可以使用Nano，但这并不是那么关键。</font><font style="vertical-align: inherit;">为了控制立方体，我们决定使用通过蓝牙连接到Arduino的手机，在本例中使用的是HC-05，但您也可以使用其他手机。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/2de/2ea/f73/2de2eaf73ee72e2d6e3d5cf1d1f31389.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是真正重要的是微控制器引脚的数量，因为我们有64个阳极引脚和8个阴极引脚，但是稍后我们将讨论如何连接它们。我们决定借助移位寄存器来扩展IO端口，在本例中，这些端口是DIP封装中的TI 74HC595寄存器，用于将插座焊接到板上，并将微电路本身插入其中。您可以在数据表中了解更多有关这些寄存器的信息，我只是说我们使用了除寄存器复位信号之外的所有内容，我们对其施加了一个单位，因为它是反向的，并且我们将输出使能输入接地，它也是反向的，我们一直希望从寄存器接收数据。您也可以使用顺序寄存器，但随后必须放置一个解码器来选择向哪个寄存器写入信息。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/f1b/832/b61/f1b832b61b7382710606c16a6e6c9915.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了使电路接地，选择我们要点燃的水平，我们需要晶体管开关，或者仅仅是晶体管。</font><font style="vertical-align: inherit;">我们使用了2个并联的普通NPN型低功率双极晶体管。</font><font style="vertical-align: inherit;">不知道这是否有意义，但是有点像电流更好。</font><font style="vertical-align: inherit;">通过一个100欧姆上拉电阻的基极连接到微控制器，这将打开我们的晶体管。</font><font style="vertical-align: inherit;">立方体层连接到集电极，发射极连接到地面。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/dd0/7dd/a01/dd07dda010be1747520658fafdf8ddff.jpg" alt="图片"><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/a21/6c6/1f6/a216c61f6e19ffcd67958db59e7ba3cb.jpg" alt="图片"><br>
<br>
<h4><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将立方体放在一起</font></font></b></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他们无法找到比平板电脑的电源更好的供电方式，平板电脑的参数是5 V和2A。也许这还不够，但是立方体发光得很亮。为了不烧毁LED，所有阳极端子都通过限流电阻连接到寄存器。根据我的计算，它们应该大约为40欧姆，但是​​我没有，所以我使用了100欧姆。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将所有这些放置在2个小型印刷电路板上。他们没有因缺乏实践而故意毒害任何东西，只是将一切与普通指挥家联系起来。使用我们从旧计算机中取出的电缆连接带有立方体阳极的寄存器。浏览线路更容易。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/749/031/912/749031912de9098c286120f65e05557c.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他们决定在用于焊接的布局上组装原型。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/c2d/06c/442/c2d06c442f00879572e9f6c3de6b424b.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在调试完所有内容并纠正了所犯的错误之后，我们用层压板制作了主体；事实证明它很好，因为它不必上漆。</font><font style="vertical-align: inherit;">这是最终结果：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/3f4/559/94f/3f455994f8bad3b7f0fb8bd89275ab61.jpg" alt="图片"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让它发光！</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有一个立方体，它留下来使它发光。</font><font style="vertical-align: inherit;">接下来，将描述立方体的各种模式（模式），以切换使用哪个蓝牙+ Android。</font><font style="vertical-align: inherit;">电话应用程序是使用Cordova编写的。</font><font style="vertical-align: inherit;">此处将不描述应用程序代码，但是结论中提供了到存储库的链接。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">立方体算法</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我们无法一次访问所有的LED，因此无法一次点亮所有LED。</font><font style="vertical-align: inherit;">相反，我们需要分层照明它们。</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">算法如下：</font></font></h5><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前层为0。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册当前图层的遮罩</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭上一层的晶体管。</font><font style="vertical-align: inherit;">如果当前层为零，那么前一层是第七层</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将值单击到寄存器中。</font><font style="vertical-align: inherit;">值出现在寄存器的输出中</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开当前层的晶体管。</font><font style="vertical-align: inherit;">万岁，一层发光！</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前层++。</font><font style="vertical-align: inherit;">转到：2</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
总体而言，此算法的重复速度非常快，这给我们一种幻觉，即所有LED均同时点亮（但我们知道并非如此）。</font><font style="vertical-align: inherit;">掩码存储在64x8字节数组中。</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写mod</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些模式未按此处显示的顺序出现，因此请不要在代码中进行编号来惩罚它们。</font><font style="vertical-align: inherit;">让我们从最简单的开始：点亮所有LED。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点亮立方体</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Mode_2_Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
	<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte z = <span class="hljs-number"><span class="hljs-number">0</span></span>; z &lt; CUBE_EDGE_SIZE; z++) {
		<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; CUBE_EDGE_SIZE; y++) {
			<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; CUBE_EDGE_SIZE; x++) {<font></font>
				cube-&gt;data[z * CUBE_LEVEL_SIZE + y * CUBE_EDGE_SIZE + x] = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“粘性” mod</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
想法：零和第七层仅燃烧两层，并且它们彼此相反（位置X的LED仅在其中一层发光）。</font><font style="vertical-align: inherit;">位置是随机选择的（出于某种原因，每个人都在尝试找到一种选择位置的算法），如果该位置的LED在较低的层上点亮，则该位置的LED“爬到”上层，如果在较高的层上点亮，则相应地爬到较低的位置。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">粘性代码</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Mode_0</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
	byte positionToMove = random(CUBE_LEVEL_SIZE);<font></font>
	byte fromLevel = cube-&gt;data[positionToMove] == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : <span class="hljs-number"><span class="hljs-number">7</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> top = fromLevel == <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
	cube-&gt;ShowDataXTimes(<span class="hljs-number"><span class="hljs-number">5</span></span>);
	<span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {<font></font>
		byte toLevel = top ? fromLevel + <span class="hljs-number"><span class="hljs-number">1</span></span> : fromLevel - <span class="hljs-number"><span class="hljs-number">1</span></span>;
		<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (toLevel &gt;= CUBE_EDGE_SIZE || toLevel &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;<font></font>
		cube-&gt;data[fromLevel * CUBE_LEVEL_SIZE + positionToMove] = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
		cube-&gt;data[toLevel * CUBE_LEVEL_SIZE + positionToMove] = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
		cube-&gt;ShowDataXTimes(<span class="hljs-number"><span class="hljs-number">2</span></span>);<font></font>
		fromLevel = toLevel;<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Mode_0_Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
	cube-&gt;Clear();<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; CUBE_LEVEL_SIZE; i++) {<font></font>
		byte value = random(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);  <span class="hljs-comment"><span class="hljs-comment">// max - 1</span></span>
		cube-&gt;data[i] = value;  <span class="hljs-comment"><span class="hljs-comment">//first level</span></span>
		cube-&gt;data[i + (CUBE_EDGE_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>) * CUBE_LEVEL_SIZE] = !value;  <span class="hljs-comment"><span class="hljs-comment">//last level</span></span><font></font>
	}<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生活中的样子：</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/qdq86wUXbSg%3Ffeature%3Doembed&amp;usg=ALkJrhjBjlVxPHeGBE3c1otw-IRl3Ddqfg" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“另一个粘性mod”</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此mod与上一个mod类似，不同的是该层不是在燃烧，而是在燃烧该表面，并且该表面上的灯光逐个移至相反的位置，然后移回。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个粘性代码</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Mode_3_Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
	cube-&gt;Clear();<font></font>
	positions-&gt;clear();<font></font>
	new_positions-&gt;clear();<font></font>
	mode_3_direction = NORMAL;<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">short</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; CUBE_LEVEL_SIZE * CUBE_EDGE_SIZE; y += CUBE_LEVEL_SIZE) {
		<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; CUBE_EDGE_SIZE; x++) {<font></font>
			cube-&gt;data[x + y] = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
			positions-&gt;push_back(x + y);<font></font>
		}		<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Mode_3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (positions-&gt;size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) {
		<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> positions;<font></font>
		positions = new_positions;<font></font>
		new_positions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleList&lt;<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>&gt;();<font></font>
		mode_3_direction = mode_3_direction == NORMAL ? INVERSE : NORMAL;<font></font>
	}<font></font>
	byte item = random(<span class="hljs-number"><span class="hljs-number">0</span></span>, positions-&gt;size());
	<span class="hljs-keyword"><span class="hljs-keyword">short</span></span> position = *((*positions)[item]);<font></font>
	positions-&gt;erase(positions-&gt;begin() + item);<font></font>
	byte i = <span class="hljs-number"><span class="hljs-number">1</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(i++ &lt; CUBE_EDGE_SIZE ) {<font></font>
		cube-&gt;data[position] = <span class="hljs-number"><span class="hljs-number">0</span></span>;
		<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(mode_3_direction == NORMAL) position += CUBE_EDGE_SIZE;
		<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> position -= CUBE_EDGE_SIZE;<font></font>
		cube-&gt;data[position] = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
		cube-&gt;ShowDataXTimes(<span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
	}<font></font>
	new_positions-&gt;push_back(position);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/MfKlVPjZhrc%3Ffeature%3Doembed&amp;usg=ALkJrhhGXHH9NhJjwHn5asqE_kwnGGlJUw" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多维数据集里面的多维数据集</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
想法：以立方体表面的形式照亮立方体内部的LED，尺寸从1到8个LED，反之亦然。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多维数据集里面的多维数据集</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Mode_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
	cube-&gt;Clear();<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte cube_size = <span class="hljs-number"><span class="hljs-number">0</span></span>; cube_size &lt; CUBE_EDGE_SIZE; cube_size++) {
		<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte level = <span class="hljs-number"><span class="hljs-number">0</span></span>; level &lt;= cube_size; level++) {
			<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt;= cube_size; x++) {
				<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt;= cube_size; y ++) {<font></font>
					cube-&gt;data[level * CUBE_LEVEL_SIZE + y * CUBE_EDGE_SIZE + x] =<font></font>
						(y % cube_size == <span class="hljs-number"><span class="hljs-number">0</span></span> || x % cube_size == <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
						&amp;&amp; level % cube_size == <span class="hljs-number"><span class="hljs-number">0</span></span> ||<font></font>
						(y % cube_size == <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; (x % cube_size == <span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
				}<font></font>
			}<font></font>
		}<font></font>
		cube-&gt;ShowDataXTimes(<span class="hljs-number"><span class="hljs-number">5</span></span>);<font></font>
	}<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte cube_size = CUBE_EDGE_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span>; cube_size &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; cube_size--) {
		<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte level = <span class="hljs-number"><span class="hljs-number">0</span></span>; level &lt;= cube_size; level++) {
			<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt;= cube_size; x++) {
				<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt;= cube_size; y++) {<font></font>
					cube-&gt;data[level * CUBE_LEVEL_SIZE + (CUBE_EDGE_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span> - y) * CUBE_EDGE_SIZE + (CUBE_EDGE_SIZE - <span class="hljs-number"><span class="hljs-number">1</span></span> - x)] =<font></font>
						(((y % (cube_size - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span> || x % (cube_size - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; (level % (cube_size - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>))<font></font>
						|| ((y % (cube_size - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; (x % (cube_size - <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; level % cube_size != <span class="hljs-number"><span class="hljs-number">0</span></span>))<font></font>
						&amp;&amp; x &lt; (cube_size) &amp;&amp; y &lt; (cube_size) ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
				}<font></font>
			}<font></font>
		}<font></font>
		cube-&gt;ShowDataXTimes(<span class="hljs-number"><span class="hljs-number">5</span></span>);<font></font>
	}<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
它是什么样的：</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/OXaEUPphEVQ%3Ffeature%3Doembed&amp;usg=ALkJrhixC1Nll2LSMG8KaBaNoaNXN1RP5w" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后是蛇</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在实现蛇的功能中，值得注意的是，对字段没有任何限制，因此，一方面让多维数据集出现，另一方面让您出现。只有碰到自己，您才能输（实际上，您不能赢）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
还值得分别介绍一下管理：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在该游戏的二维实现中，管理没有问题：四个按钮，所有内容都很明显。在三维实现的情况下，会出现几个控制选项：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.6个按钮。使用此选项，按钮有其自己的移动方向：对于向上和向下按钮，一切都是显而易见的，其余按钮可以“绑定”到基点，当您按下“向左”按钮时，运动矢量总是向“西”移动，依此类推。如果使用此选项，则当蛇向“东”移动并单击“西”时会出现这种情况。因为蛇不能旋转180度；您必须分别处理这种情况。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.4按钮（上下左右）。</font><font style="vertical-align: inherit;">这些按钮的动作类似于二维实现中的动作，不同之处在于，所有更改都是相对于运动矢量的当前方向进行的。</font><font style="vertical-align: inherit;">让我以示例为例进行说明：在水平面中，通过按“向上”按钮，我们将转到垂直平面。</font><font style="vertical-align: inherit;">通过按“上”在垂直平面中移动时，我们继续沿水平面逆着X轴方向移动，对于“向下”-沿X轴方向等等。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，这两个选项都有权存在（了解其他控制选项会很有趣）。</font><font style="vertical-align: inherit;">对于我们的项目，我们选择了第二个。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方向码</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Snake::ApplyUp() {
	<span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (direction) {
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> X:
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Y:<font></font>
		direction = Z;<font></font>
		directionType = NORMAL;<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Z:<font></font>
		direction = X;<font></font>
		directionType = INVERSE;<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Snake::ApplyDown() {
	<span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (direction) {
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> X:
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Y:<font></font>
		direction = Z;<font></font>
		directionType = INVERSE;<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Z:<font></font>
		direction = X;<font></font>
		directionType = NORMAL;<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Snake::ApplyLeft() {
	<span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (direction) {
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> X:<font></font>
		direction = Y;<font></font>
		directionType = directionType == NORMAL ? INVERSE : NORMAL;<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Y:<font></font>
		direction = X;<font></font>
		directionType = directionType;<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;<font></font>
	<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Z:<font></font>
		direction = Y;<font></font>
		directionType = NORMAL;<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Snake::ApplyRight() {
	<span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (direction) {
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> X:<font></font>
		direction = Y;<font></font>
		directionType = directionType;<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Y:<font></font>
		direction = X;<font></font>
		directionType = directionType == NORMAL ? INVERSE : NORMAL;<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Z:<font></font>
		direction = Y;<font></font>
		directionType = INVERSE;<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Snake::ChangeDirection(KEY key) {
	<span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(key) {
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> UP:<font></font>
		ApplyUp();<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> LEFT:<font></font>
		ApplyLeft();<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RIGHT:<font></font>
		ApplyRight();<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
	<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> DOWN:<font></font>
		ApplyDown();<font></font>
		<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;<font></font>
	}<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
程序的结果：</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/TR4GM4OslUE%3Ffeature%3Doembed&amp;usg=ALkJrhhHbX3mImC3S_dY_VGttxs3pGuD-w" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/QnATb7p0cKI%3Ffeature%3Doembed&amp;usg=ALkJrhg6JE2M-pDtsumWNy22PqHB3wJVkw" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
链接到手机的多维数据集固件和应用程序的源代码：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固件</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，我们得到了一个原始的控制台和一种灯，并带有动态照明的可能性。</font><font style="vertical-align: inherit;">将来，我们计划开发印刷电路板并改进固件。</font><font style="vertical-align: inherit;">也可以添加其他模块。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN388369/">https://habr.com/ru/post/zh-CN388369/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN388359/index.html">IBM计划使用物联网来控制约翰内斯堡的空气污染</a></li>
<li><a href="../zh-CN388361/index.html">地震学家正试图通过地球电离层中的电磁振荡来预测地震</a></li>
<li><a href="../zh-CN388363/index.html">美国公布了苏联进行核打击的目标清单</a></li>
<li><a href="../zh-CN388365/index.html">国家支持美国企业在线学习市场的增长</a></li>
<li><a href="../zh-CN388367/index.html">Kickstarter从Back to the Future 2筹集资金用于一件自干夹克</a></li>
<li><a href="../zh-CN388373/index.html">DEXP Ursus NS210评估-具有10.1英寸屏幕和3G支持的廉价平板电脑</a></li>
<li><a href="../zh-CN388375/index.html">SpaceX发布了高分辨率Falcon 9起飞和降落的照片</a></li>
<li><a href="../zh-CN388383/index.html">脂肪税-对抗肥胖流行</a></li>
<li><a href="../zh-CN388385/index.html">健身房溜冰场：第二版，经过改进和补充</a></li>
<li><a href="../zh-CN388387/index.html">罗曼·切尔尼雪夫（Roman Chernyshev）：“我们正在等待警告药而不是反应药”</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>