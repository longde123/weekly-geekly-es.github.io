<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👎🏿 🔈 👩🏾‍💻 O livro "Safe DevOps. Operação eficiente do sistema 👩🏿‍🍳 🧛🏽 🤸🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi, habrozhiteli! Um aplicativo em execução na nuvem tem muitas vantagens, mas ao mesmo tempo está sujeito a ameaças especiais. A tarefa das equipes d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O livro "Safe DevOps. Operação eficiente do sistema</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/468085/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/ve/lp/sc/velpscrkxhyi-ycjwxfywsc4hhw.jpeg" align="left" alt="imagem"></a>  Oi, habrozhiteli!  Um aplicativo em execução na nuvem tem muitas vantagens, mas ao mesmo tempo está sujeito a ameaças especiais.  A tarefa das equipes de DevOps é avaliar esses riscos e fortalecer a proteção do sistema contra eles.  O livro é baseado na experiência única do autor e oferece as soluções estratégicas mais importantes para proteger aplicativos da Web contra ataques, para impedir tentativas de invasão.  Você verá como garantir a confiabilidade com testes automatizados, entrega contínua e principais processos de DevOps.  Aprenda a identificar, avaliar e corrigir vulnerabilidades existentes no seu aplicativo.  O autor o ajudará a navegar nas configurações da nuvem, bem como a aplicar ferramentas de automação populares.  Requer conhecimento do Linux e conhecimento das práticas padrão do DevOps, como CI, CD e teste de unidade. <br><a name="habracut"></a><br><br><h3>  Trecho.  Capítulo 8. Análise de Log para Detecção de Intrusão e Ataque </h3><br>  Neste capítulo: <br><br><ul><li>  Explorando componentes no nível da análise em um pipeline de log. </li><li>  Detecte intrusões e ataques usando assinaturas de string, estatísticas e dados históricos. </li><li>  Gerenciando a melhor maneira de notificar os usuários. </li></ul><br>  No Capítulo 7, você aprendeu como criar um pipeline de log que coleta, transfere, analisa e armazena logs de toda a infraestrutura e também fornece acesso a eles.  Um pipeline de vários níveis cria uma infraestrutura flexível na qual os logs de várias fontes são usados ​​para monitorar a atividade dos serviços da organização.  O Capítulo 7 forneceu uma visão geral da funcionalidade fornecida por todos os níveis do pipeline.  Neste capítulo, focaremos no terceiro nível - o nível de análise - e abordaremos técnicas e exemplos de códigos relacionados à detecção de invasões e ataques a serviços. <br><br>  O pipeline de registro usado pelo Mozilla ao escrever o livro é semelhante ao mostrado no capítulo 7. O pipeline é usado para monitorar o estado dos clientes Firefox (chamados <i>telemetria</i> ) em um ambiente natural, processar logs de aplicativos e serviços e detectar atividades incomuns.  O centro lógico do pipeline está no nível da análise, composto por muitos pequenos programas que procuram constantemente algo incomum.  Esses pequenos programas não são tão avançados a ponto de lidar com a entrada e saída de eventos de log; portanto, transferem essa tarefa para um data center dedicado - o programa Hindsight (http://mng.bz/m4gg), projetado para executar o trabalho de analisar plug-ins em fluxos de dados . <br><br>  Neste capítulo, usaremos o Hindsight para ler vários tipos de revistas e escrever plugins originais para analisá-los. <br><br><blockquote><h4>  NOTA </h4>  Os logs e plugins de amostra deste capítulo estão localizados em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">securing-devops.com/ch08/logging-pipeline</a> .  Você precisa copiar este repositório para sua máquina local e obter o contêiner do Hindsight Docker para executar os exemplos. </blockquote><br>  Vamos começar descrevendo como as várias partes do nível de análise são organizadas: a retrospectiva está localizada no meio e os níveis de coleta e armazenamento estão nos dois lados.  Depois, falaremos sobre três abordagens diferentes para detectar invasões e ataques.  Para os mais simples deles, são usadas assinaturas de cadeias que contêm informações sobre ataques conhecidos para enviar notificações.  Em seguida, comparamos os modelos estatísticos e a abordagem com as assinaturas e também aprendemos como essas duas abordagens se complementam.  Por fim, vamos dar uma olhada em maneiras de aplicar dados históricos da atividade do usuário para identificar áreas suspeitas entre conexões. <br><br>  A última seção do capítulo é sobre o envio de notificações.  É improvável que você deseje receber milhares de notificações do nível de análise todos os dias, o que criará muito ruído, em vez de ser útil.  Se isso não for alterado, os destinatários considerarão as notificações como spam e as ignorarão.  Na seção final deste capítulo, examinaremos as práticas recomendadas para enviar notificações e discutiremos maneiras de enviar notificações com precisão e eficiência aos administradores e usuários finais. <br><br><h4>  8.2  Detectando ataques usando assinaturas de string </h4><br>  Ao trabalhar com logs, você trabalha com seqüências de caracteres.  E isso significa que a maneira mais fácil de identificar sinais de fraude é comparar os logs com uma lista de linhas maliciosas conhecidas.  Pode parecer simples, mas foi justamente nesses anos que o setor de segurança estava envolvido.  Os firewalls de aplicativos da Web (WAFs), tão populares em meados dos anos 2000, eram essencialmente um repositório de expressões regulares, que eram verificadas em relação a todas as solicitações enviadas a um aplicativo da Web. <br><br><blockquote><p></p><h4>  Não confie em expressões regulares </h4>  Certa vez, trabalhei em um banco no qual esse tipo de proteção era amplamente utilizado.  A equipe de segurança era responsável pelo suporte ao WAF, que protegia uma variedade de serviços online, incluindo um serviço de negociação para clientes.  Cada solicitação da Web enviada para este serviço passou por centenas de expressões regulares antes de chegar ao servidor de aplicativos.  Uma vez que um desenvolvedor de uma equipe de serviços de negociação online decidiu dar uma olhada nessas expressões regulares.  Não sei o que levou o engenheiro a começar a ler o conteúdo do arquivo, que é principalmente preenchido com barras, símbolos de dólar, asteriscos, vantagens, quadrados e parênteses, mas ele aceitou.  E em algum lugar da linha 418 em uma expressão regular complexa, ele encontrou uma combinação suspeita de ". +".  Dois personagens inocentes que permitiam que absolutamente tudo continuasse sem dor: essa expressão regular é semelhante ao valor "permitir tudo". <br><br>  Nosso orgulho é o firewall do aplicativo Web por vários milhares de euros, apoiado por uma equipe inteira, que realizou centenas de verificações de expressões regulares, afetando o desempenho e complicando o design de um sistema já complexo, e tudo para pular tudo sem impedimentos.  Obviamente, logo resolvemos o problema, mas minha crença no uso de expressões regulares para garantir a segurança não aumentou desde então.  Se você deseja implementar esse tipo de sistema de proteção em sua organização, leve em consideração a complexidade para que isso não aconteça com você. </blockquote><br>  Quando usadas corretamente, as expressões regulares podem se tornar uma ferramenta poderosa, mas são incrivelmente difíceis de escrever, manter ao longo do tempo - ainda mais difíceis, e sua implementação em larga escala é cara.  Dê uma olhada na expressão regular ((\% 3C) | &lt;) ((\% 2F) | \ /) * [a-z0-9 \%] + ((\% 3E) |&gt;).  Você não vai adivinhar para que é usado, por isso vou lhe dizer: ele pode ser usado para procurar injeções nas sequências de solicitação HTTP, revelando a presença de abertura e fechamento de caracteres de desigualdade &lt;&gt; e seu conteúdo.  Você receberá esse tipo de linha de solicitação HTTP de um invasor que está tentando injetar código JavaScript malicioso no seu aplicativo para acabar com um ataque de script entre sites, que discutimos no Capítulo 3. <br><br>  Essa expressão regular pode ser usada para identificar solicitações suspeitas que contêm tentativas de injeção.  A Listagem 8.7 mostra um analisador de exemplo que implementa isso, verificando correspondências de expressão regular em cada um dos logs de acesso NGINX transmitidos.  A expressão regular é armazenada na variável local xss, seu valor é comparado com cada valor de Fields [request] usando a função rex.match (). <br><br>  Se houver correspondências, a função add_to_payload () envia uma notificação de que o plug-in de saída pode receber e transmitir para o destino. <br><br><blockquote><h3>  Listagem 8.7.  Um plug-in que detecta mensagens de log contendo sinais de ataque na sequência de consultas </h3><br><img src="https://habrastorage.org/webt/9g/_f/t_/9g_ft__g8xthelzokpz6afui150.png" alt="imagem"></blockquote><br>  Um exemplo de saída desse plug-in é mostrado na Listagem 8.8.  Existem várias notificações geradas por amostras de revistas, algumas das quais se revelaram falso-positivas.  Isso aconteceu em parte porque os logs de amostra foram criados artificialmente usando o ZAP Vulnerability Scanner e também porque as cadeias de consulta não tendem a conter tags HTML.  Em particular, essa expressão regular não terá uma taxa muito alta para encontrar correspondências falsas positivas. <br><br><blockquote><h3>  Listagem 8.8.  Exemplos de notificações geradas pelo plug-in de análise XSS </h3><br><img src="https://habrastorage.org/webt/x_/kw/-t/x_kw-tqj6b3gf_n2gowqq6zurue.png" alt="imagem"></blockquote><br>  Esta é apenas uma expressão regular para um tipo específico de ataque.  Para que essa abordagem seja útil, você precisa encontrar algo mais que expressões regulares.  Para iniciantes, você pode coletar assinaturas de várias fontes e, à medida que mais e mais sinais suspeitos são encontrados nos logs, aumente gradualmente o tamanho do seu banco de dados. <br><br>  A Listagem 8.9 mostra uma versão modificada do analisador XSS que procura vários sinais de um ataque (http://mng.bz/62h8).  Este script mostra como você pode usar as tabelas Lua para armazenar uma lista de atributos e usá-lo ciclicamente para analisar os eventos recebidos.  Neste exemplo de código, a tabela suspicious_terms é uma linha simples de linhas que usa substrings para procurar expressões regulares, o que é muito mais rápido.  A tabela suspicious_terms usa o formato de valor-chave para armazenar rótulos junto com a expressão para poder lembrá-lo de que a expressão deve ser encontrada. <br><br><h3>  Listagem 8.9.  Procure sinais de ataques usando seqüências de caracteres e expressões </h3><br><img src="https://habrastorage.org/webt/-4/kt/nq/-4ktnqdffbwc1uidpjqdvcdj68a.png" alt="imagem"><br><img src="https://habrastorage.org/webt/mv/na/ul/mvnaulm65owmhzjqiaxveziil84.png" alt="imagem"><br><br>  Você pode executar este analisador usando as configurações de teste descritas no início do capítulo.  Inicie o contêiner do Docker com diretórios montados e a saída do analisador será gravada em output / payload / analysis.suspicious_signatures.alerts.txt.  O plug-in enviará milhares de notificações, o que é esperado, uma vez que esses logs são gerados pelo verificador de vulnerabilidades ZAP.  Essa abordagem pode ser considerada bem-sucedida, mas possui falhas que você deve considerar. <br><br><ul><li>  <i>Expressões regulares são difíceis de escrever e ainda mais difíceis de ler</i> .  Você cometerá erros que não são fáceis de investigar e que exigirão horas de depuração dolorosa.  Existem apenas quatro expressões regulares neste analisador, mas a leitura desta parte do código já é difícil.  Não importa o quão poderosa e atraente a ferramenta possa ser expressões regulares, eu não recomendaria trabalhar com elas constantemente. </li><li>  <i>Com essa abordagem, muitas notificações são geradas</i> .  Os aplicativos da Web abertos à Internet recebem muito tráfego incomum, malicioso e pouco.  A geração de notificações para cada sinal incomum deixará qualquer equipe de segurança louca por várias semanas, mesmo que a taxa de falsos positivos seja baixa.  Tráfego anormal é uma ocorrência natural para serviços em execução na Internet. </li></ul><br>  Você pode corrigir esses dois problemas aplicando uma abordagem matemática e tornando este sistema perfeito para detectar anomalias um pouco menos perfeito.  Na próxima seção, veremos como usar métodos estatísticos para enviar notificações quando um limite for superado, como uma maneira de reduzir o ruído da lógica de detecção de anomalias. <br><br><h4>  Sobre o autor </h4><br>  Até o momento, <i>Julien Vehen está</i> gerenciando a equipe de segurança operacional do Firefox, Mozilla.  Ele é responsável por criar, implementar e operar uma estratégia de segurança de serviços da Web com a qual milhões de usuários do Firefox interagem todos os dias.  Julien se concentrou em proteger os serviços de rede no início dos anos 2000.  Ele começou a trabalhar como administrador de sistemas no Linux e, em 2007, obteve um mestrado em segurança da informação. <br><br>  »Mais informações sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conteúdo</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trecho</a> <br><br>  Cupom de 25% de desconto para <b>vendedores ambulantes</b> - <b>DevOps</b> <br><br>  Após o pagamento da versão impressa do livro, um livro eletrônico é enviado por e-mail. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt468085/">https://habr.com/ru/post/pt468085/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt468075/index.html">O uso de redes neurais siamesas na busca</a></li>
<li><a href="../pt468077/index.html">Posit testes de forma adulta. Análise espectral</a></li>
<li><a href="../pt468079/index.html">Dimensões personalizadas no Google Analytics que nos salvaram mais de uma vez</a></li>
<li><a href="../pt468081/index.html">"Dados anônimos" ou o que está planejado no 152-FZ</a></li>
<li><a href="../pt468083/index.html">API Camera2 do Android da chaleira</a></li>
<li><a href="../pt468087/index.html">Método de divisão bissecional em testes</a></li>
<li><a href="../pt468089/index.html">Redefinição baseada em edição: é possível na produção?</a></li>
<li><a href="../pt468091/index.html">O projeto de lei sobre a criação de um único banco de dados com os dados dos cidadãos adotados na Duma do Estado em primeira leitura</a></li>
<li><a href="../pt468093/index.html">Nitratos nos produtos: lojas suíças vs lojas russas vs casa de verão</a></li>
<li><a href="../pt468097/index.html">Microsoft Edge - XSS genérico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>