<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëµüèª üë∂üèø üëí Membalik-balik aplikasi teknik setelah kebingungan (Bagian 2) ü§∑üèø ü•ó üë®üèø‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendahuluan 
 Publikasi ini bertujuan mempelajari beberapa teknik rekayasa terbalik. Semua materi disajikan hanya untuk tujuan informasi dan tidak dim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membalik-balik aplikasi teknik setelah kebingungan (Bagian 2)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445126/"><h2>  Pendahuluan </h2><br>  <i>Publikasi ini bertujuan mempelajari beberapa teknik rekayasa terbalik.</i>  <i>Semua materi disajikan hanya untuk tujuan informasi dan tidak dimaksudkan untuk digunakan untuk keuntungan pribadi apa pun.</i> <br><br>  Disarankan membaca setelah bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertama</a> <br>  Jika seorang ahli bedah diajarkan bagaimana seseorang bekerja dan memberinya pisau bedah, itu tidak berarti bahwa ia akan menggunakan pengetahuan ini untuk merugikan seseorang, dan seorang ahli yang berpengetahuan luas tidak bermimpi menulis virus super. <br>  Jadi, dalam pelajaran ini Anda tidak harus mencari petunjuk retakan dan retasan. <br><br><h2>  Subjek penelitian </h2><br>  Kami terus mempelajari kode plug-in untuk Dokumentasi Visual Studio Atomineer Pro (selanjutnya disebut APD).  Mari berkenalan dengan alat dan kemampuannya. <a name="habracut"></a>  Jadi, anggaplah kita memiliki kelas di C ++. <br><br><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ClassForReadFile(); };</code> </pre> <br>  mengkonfigurasi APD sehingga komentar dalam gaya Doxygen.  Kami mendapatkan kursor di <b>kelas</b> dan tekan <b>CTRL + SHIFT + D.</b>  Kami mendapatkan yang berikut ini: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** The class for read file. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ClassForReadFile(); };</code> </pre> <br>  Plugin menambahkan deskripsi yang bagus tentang kelas.  Semuanya hebat!  Kami melanjutkan.  Misalkan kelas milik perpustakaan dan kita harus mengekspornya.  Tambahkan makro dan ubah definisi kelas <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> DLL_EXPORTS #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_READER_DLL_EXPORTS __declspec(dllexport) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_READER_DLL_EXPORTS __declspec(dllimport) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> class DATA_READER_DLL_EXPORTS ClassForReadFile { public: ClassForReadFile(); };</span></span></code> </pre> <br>  Untuk C ++ (OS Windows), situasinya standar.  Lihatlah plugin kami.  Tekan <b>CTRL + SHIFT + D</b> dan tidak mendapatkan apa yang kami harapkan <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** A data reader DLL exports. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DATA_READER_DLL_EXPORTS</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> };</code> </pre> <br>  nama <b>definisi</b> DATA_READER_DLL_EXPORTS didefinisikan sebagai nama kelas, bukan <b>ClassForReadFile</b> , dan deskripsi kelas dihasilkan dari nama ini.  Artinya, dalam kode plugin situasi ini, yaitu ekspor kelas, tidak diproses atau sedang diproses dengan kesalahan.  Inilah yang akan kami coba untuk perbaiki. <br><br><h2>  Langkah 1 </h2><br>  Kami akan mencari petunjuk.  Pertama, karena ekspor fungsi dan kelas dari C / C ++ adalah situasi standar, kami masih mencoba "memaksa" plugin dengan benar.  Di tempat DATA_READER_DLL_EXPORTS <b>mendefinisikan,</b> masukkan instruksi <b>__declspec</b> <i>itu sendiri</i> dan hasilkan dokumentasi <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** The class for read file. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> __</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">declspec</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dllexport</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> };</code> </pre> <br>  Dan, lihat, mereka mendapat deskripsi kelas yang benar!  Dengan demikian, kami menyimpulkan bahwa dalam APD ada beberapa kode yang memeriksa keberadaan string "__declspec" dalam deskripsi kelas dan mengabaikan algoritma lebih lanjut untuk membangun dokumentasi. <br><br>  Kami mendekompilasi pustaka dengan ildasm.exe standar dari Microsoft SDKs.  Temukan baris "__declspec".  Ini ditemukan dalam 2 metode CmdDocComment :: a dan CmdDocComment :: b.  Kelas satu.  Kami akan membawanya untuk studi lebih lanjut. <br><br><h2>  Langkah 2 </h2><br>  Saya harus segera mengatakan bahwa apa yang kita cari ada dalam metode CmdDocComment :: a <br><br>  Di sinilah <i>__declspec</i> bertemu.  Hanya baris yang paling menarik yang ditampilkan. <br><br><div class="spoiler">  <b class="spoiler_title">string a (CmdDocComment.GeneratorInfo A_0)</b> <div class="spoiler_text"><pre> <code class="cpp hljs">List&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; e = A_0.e; <span class="hljs-comment"><span class="hljs-comment">//....... List&lt;string&gt; list = A_0.e; int num3 = 0; while (num3 &lt; list.Count &amp;&amp; !(list[num3] == "where") &amp;&amp; !(list[num3] == ":")) { if (list[num3] == A_0.b &amp;&amp; num2 &lt; 0) { num2 = num3; } if (list[num3] == "__declspec") { if (num3 + 1 &lt; list.Count) { num = list[num3 + 1].IndexOf(')'); if (num &gt;= 0) { list[num3 + 1] = list[num3 + 1].Substring(num + 1).Trim(); } } list.RemoveAt(num3); num3--; } num3++; } if (list.Count &gt; 0 &amp;&amp; (list[0] == "struct" || list[0] == "union")) { if (list.Count == 1) { //......</span></span></code> </pre><br></div></div><br>  Kami menyimpulkan ini atas dasar bahwa setelah verifikasi <blockquote>  list [num3] == "__declspec" </blockquote>  metode delete disebut <blockquote>  list.RemoveAt (num3); </blockquote>  Penalaran (berpikir keras): <br><br><ol><li>  Metode CmdDocComment :: a memiliki variabel lokal yang berisi larik string <br><br><pre> <code class="cpp hljs">List&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> = A_0.e;</code> </pre> </li><li>  Elemen pertama array ini menyimpan awal dari deskripsi fungsi, struktur, kelas, dll. Yaitu, kata kunci "class", "struct", "union" <pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">list</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">"struct"</span></span></code> </pre> </li><li>  Setiap elemen array berisi kata yang terpisah.  Dalam kasus kami, itu akan menjadi {"class", "DATA_READER_DLL_EXPORTS", "ClassForReadFile"} </li><li>  Ada loop yang mengelilingi semua elemen array "e", mencari elemen "__declspec", dan menghapusnya dan semua yang ada di dalam tanda kurung <br></li><li>  Ada kondisi tambahan untuk keluar dari siklus.  Ini adalah lokasi dari kata "where" atau ":".  Kata resmi "di mana" adalah, jujur, tidak akrab dengan, tetapi ":" digunakan ketika mewarisi kelas </li></ol><br>  Tetapkan algoritma baru dan tujuan perubahan: <br><br>  1. perubahan seharusnya tidak mempengaruhi fungsi lainnya <br><br>  2. kami akan menghapus elemen-elemen dari array "daftar" sesuai dengan algoritma <br>  - lewati elemen pertama; <br>  - jika elemen berikutnya bukan ":" dan bukan "di mana" dan bukan akhir dari array, maka hapus. <br><br>  Tulis siklus yang diinginkan <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     ,          num2 while (num3 &lt; list.Count &amp;&amp; !(list[num3] == "where") &amp;&amp; !(list[num3] == ":")) { // ,      .     if (list[num3] == A_0.b &amp;&amp; num2 &lt; 0) { num2 = num3; } //  if (list[num3] == "__declspec"),  if (num3 != 0 &amp;&amp; num3 &lt; (list.Count - 1) &amp;&amp; list[num3 + 1] != ":" &amp;&amp; list[num3 + 1] != "where") { e.RemoveAt(index); --index; } num3++; }</span></span></code> </pre><br>  Masih memprogramnya. <br><br><h2>  Langkah 3 </h2><br>  Program dengan keras.  Pemrograman dalam kasus umum adalah penulisan kode sumber, kompilasi, penautan.  Tetapi obfuscator merampas kesempatan seperti itu dari kami.  Kami akan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">alat dnSpy yang</a> direkomendasikan.  Kami akan mengubah kode HEX dari perintah CIL langsung di perpustakaan, yang ternyata sangat menarik dan informatif!  Mari kita mulai.  Buka dnSpy, muat pustaka. <br><br><div class="spoiler">  <b class="spoiler_title">Temukan metode kami</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/cn/eg/vq/cnegvq2ntmy7sl_hpymzoltkyuu.png" alt="gambar"><br></div></div><br>  pilih saat dan ubah tampilan menjadi IL <br><div class="spoiler">  <b class="spoiler_title">Siklus kami</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/d4/va/im/d4vaimuwft7cbsafodygqtkn_z8.png" alt="gambar"><br></div></div><br>  Saya juga akan memberikan daftar, meskipun agak besar <br><br><div class="spoiler">  <b class="spoiler_title">Siklus kami</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/* 0x00016710 07 */</span></span> IL_018C: ldloc<span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-comment"><span class="hljs-comment">//         1. /* 0x00016711 1119 */ IL_018D: ldloc.s V_25 //          ( ). /* 0x00016713 6FF900000A */ IL_018F: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016718 72925E0070 */ IL_0194: ldstr "where" //       ,   ,   . /* 0x0001671D 287000000A */ IL_0199: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x00016722 3AAB000000 */ IL_019E: brtrue IL_024E //    ,   value  true,    null   . /* 0x00016727 07 */ IL_01A3: ldloc.1 //         1. /* 0x00016728 1119 */ IL_01A4: ldloc.s V_25 //          ( ). /* 0x0001672A 6FF900000A */ IL_01A6: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x0001672F 72A31D0070 */ IL_01AB: ldstr ":" //       ,   ,   . /* 0x00016734 287000000A */ IL_01B0: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x00016739 3A94000000 */ IL_01B5: brtrue IL_024E //    ,   value  true,    null   . /* 0x0001673E 07 */ IL_01BA: ldloc.1 //         1. /* 0x0001673F 1119 */ IL_01BB: ldloc.s V_25 //          ( ). /* 0x00016741 6FF900000A */ IL_01BD: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016746 03 */ IL_01C2: ldarg.1 //     1   . /* 0x00016747 7B12010004 */ IL_01C3: ldfld string Atomineer.Utils.CmdDocComment/GeneratorInfo::b //      ,       . /* 0x0001674C 287000000A */ IL_01C8: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x00016751 2C07 */ IL_01CD: brfalse.s IL_01D6 //    ,   value  false,    . /* 0x00016753 09 */ IL_01CF: ldloc.3 //         3. /* 0x00016754 16 */ IL_01D0: ldc.i4.0 //    0     int32. /* 0x00016755 2F03 */ IL_01D1: bge.s IL_01D6 //     ( ),        . /* 0x00016757 1119 */ IL_01D3: ldloc.s V_25 //          ( ). /* 0x00016759 0D */ IL_01D5: stloc.3 //                3. /* 0x0001675A 07 */ IL_01D6: ldloc.1 //         1. /* 0x0001675B 1119 */ IL_01D7: ldloc.s V_25 //          ( ). /* 0x0001675D 6FF900000A */ IL_01D9: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016762 729E5E0070 */ IL_01DE: ldstr "__declspec" //       ,   ,   . /* 0x00016767 287000000A */ IL_01E3: call bool [mscorlib]System.String::op_Equality(string, string) //  ,      . /* 0x0001676C 2C51 */ IL_01E8: brfalse.s IL_023B //    ,   value  false,    . /* 0x0001676E 1119 */ IL_01EA: ldloc.s V_25 //          ( ). /* 0x00016770 17 */ IL_01EC: ldc.i4.1 //    1     int32. /* 0x00016771 58 */ IL_01ED: add //         . /* 0x00016772 07 */ IL_01EE: ldloc.1 //         1. /* 0x00016773 6FF700000A */ IL_01EF: callvirt instance int32 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Count() //             . /* 0x00016778 2F37 */ IL_01F4: bge.s IL_022D //     ( ),        . /* 0x0001677A 07 */ IL_01F6: ldloc.1 //         1. /* 0x0001677B 1119 */ IL_01F7: ldloc.s V_25 //          ( ). /* 0x0001677D 17 */ IL_01F9: ldc.i4.1 //    1     int32. /* 0x0001677E 58 */ IL_01FA: add //         . /* 0x0001677F 6FF900000A */ IL_01FB: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x00016784 1F29 */ IL_0200: ldc.i4.s 41 //      int8     int32 ( ). /* 0x00016786 6FC800000A */ IL_0202: callvirt instance int32 [mscorlib]System.String::IndexOf(char) //             . /* 0x0001678B 0C */ IL_0207: stloc.2 //                2. /* 0x0001678C 08 */ IL_0208: ldloc.2 //         2. /* 0x0001678D 16 */ IL_0209: ldc.i4.0 //    0     int32. /* 0x0001678E 3221 */ IL_020A: blt.s IL_022D //     ( ),      . /* 0x00016790 07 */ IL_020C: ldloc.1 //         1. /* 0x00016791 1119 */ IL_020D: ldloc.s V_25 //          ( ). /* 0x00016793 17 */ IL_020F: ldc.i4.1 //    1     int32. /* 0x00016794 58 */ IL_0210: add //         . /* 0x00016795 07 */ IL_0211: ldloc.1 //         1. /* 0x00016796 1119 */ IL_0212: ldloc.s V_25 //          ( ). /* 0x00016798 17 */ IL_0214: ldc.i4.1 //    1     int32. /* 0x00016799 58 */ IL_0215: add //         . /* 0x0001679A 6FF900000A */ IL_0216: callvirt instance !0 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Item(int32) //             . /* 0x0001679F 08 */ IL_021B: ldloc.2 //         2. /* 0x000167A0 17 */ IL_021C: ldc.i4.1 //    1     int32. /* 0x000167A1 58 */ IL_021D: add //         . /* 0x000167A2 6FCB00000A */ IL_021E: callvirt instance string [mscorlib]System.String::Substring(int32) //             . /* 0x000167A7 6F8600000A */ IL_0223: callvirt instance string [mscorlib]System.String::Trim() //             . /* 0x000167AC 6FFF00000A */ IL_0228: callvirt instance void class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::set_Item(int32, !0) //             . /* 0x000167B1 07 */ IL_022D: ldloc.1 //         1. /* 0x000167B2 1119 */ IL_022E: ldloc.s V_25 //          ( ). /* 0x000167B4 6F6701000A */ IL_0230: callvirt instance void class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::RemoveAt(int32) //             . /* 0x000167B9 1119 */ IL_0235: ldloc.s V_25 //          ( ). /* 0x000167BB 17 */ IL_0237: ldc.i4.1 //    1     int32. /* 0x000167BC 59 */ IL_0238: sub //           . /* 0x000167BD 1319 */ IL_0239: stloc.s V_25 //                index ( ). /* 0x000167BF 1119 */ IL_023B: ldloc.s V_25 //          ( ). /* 0x000167C1 17 */ IL_023D: ldc.i4.1 //    1     int32. /* 0x000167C2 58 */ IL_023E: add //         . /* 0x000167C3 1319 */ IL_023F: stloc.s V_25 //                index ( ). /* 0x000167C5 1119 */ IL_0241: ldloc.s V_25 //          ( ). /* 0x000167C7 07 */ IL_0243: ldloc.1 //         1. /* 0x000167C8 6FF700000A */ IL_0244: callvirt instance int32 class [mscorlib]System.Collections.Generic.List`1&lt;string&gt;::get_Count() //             . /* 0x000167CD 3F3EFFFFFF */ IL_0249: blt IL_018C //    ,     .</span></span></code> </pre><br></div></div><br>  Sekarang kita memiliki jendela dalam perintah CIL, representasi HEX mereka, offset file dan deskripsi.  Semua ada di satu tempat.  Sangat nyaman (terima kasih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CrazyAlex25</a> ). <br>  Mari kita perhatikan blok yang menyebutkan "__declspec".  Blokir offset 0x0001675A.  Ini akan menjadi awal dari suntingan kami.  Selanjutnya, temukan metode RemoveAt.  Ini akan bermanfaat bagi kita tidak berubah.  Byte terakhir dari blok adalah 0x000167BF.  Buka editor HEX <b>Ctrl + X</b> dan tulis 0x00 di kisaran ini.  Kami akan menyimpan dan memeriksa apa yang menyebabkan perubahan. <br><div class="spoiler">  <b class="spoiler_title">lingkaran kosong</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (num3 &lt; list.Count &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>) &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">":"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list[num3] == A_0.b &amp;&amp; num2 &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { num2 = num3; } list.RemoveAt(num3); num3--; num3++; }</code> </pre> <br></div></div><br>  Sekarang kita akan menerapkan logika baru.  Pertama, tambahkan kondisinya <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (num3 != <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; num3 &lt; list.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  Tabel menunjukkan perintah baru dan deskripsinya. <br><table><tbody><tr><th>  1119 </th><th>  ldloc.s </th><th>  Memuat variabel lokal dengan indeks yang ditentukan ke tumpukan perhitungan (formulir pendek). </th></tr><tr><th>  2C61 </th><th>  brfalse.s </th><th>  Melewati kontrol ke pernyataan akhir jika nilainya salah, referensi nol, atau nol.  <u>Catatan</u> : Jika num3 == 0, maka lanjutkan ke langkah meningkatkan iterator loop.  Nilai 0x64 adalah alamat yang diimbangi dengan instruksi 0x000167BF (lihat daftar) </th></tr><tr><th>  1119 </th><th>  ldloc.s </th><th>  Memuat variabel lokal dengan indeks yang ditentukan ke tumpukan perhitungan (formulir pendek) </th></tr><tr><th>  07 </th><th>  ldloc.1 </th><th>  Memuat variabel lokal dengan indeks 1 ke tumpukan perhitungan </th></tr><tr><th>  6FF700000A </th><th>  callvirt </th><th>  get_Count () - Memanggil metode objek yang terikat terakhir dan mendorong nilai kembali ke tumpukan perhitungan </th></tr><tr><th>  17 </th><th>  ldc.i4.1 </th><th>  Menekan nilai integer 1 pada tumpukan komputasi sebagai int32 </th></tr><tr><th>  59 </th><th>  sub </th><th>  Kurangi satu nilai dari yang lain dan dorong hasilnya ke tumpukan perhitungan. </th></tr><tr><th>  2F55 </th><th>  bge.s </th><th>  Ini mentransfer kontrol ke instruksi akhir (bentuk pendek) jika nilai pertama lebih besar atau sama dengan yang kedua.  <u>Catatan</u> : Jika num3&gt; list.Count - 1, maka lanjutkan ke langkah meningkatkan iterator loop.  Nilai 0x55 adalah alamat offset sebelum instruksi 0x000167BF </th></tr></tbody></table><br>  Kami menulis byte ini mulai dari offset 0x0001675A.  Simpan dan dekompilasi lagi <br><br><div class="spoiler">  <b class="spoiler_title">Kondisi pertama</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (num3 &lt; list.Count &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>) &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">":"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list[num3] == A_0.b &amp;&amp; num2 &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { num2 = num3; } <span class="hljs-comment"><span class="hljs-comment">//     if (num3 != 0 &amp;&amp; num3 &lt; list.Count - 1) { list.RemoveAt(num3); num3--; } num3++; }</span></span></code> </pre><br></div></div><br>  Sekarang kita tambahkan cek string "where" dan ":".  Saya mengutip kode HEX berikut tanpa komentar tambahan: <br><br><pre> <code class="plaintext hljs">07 11 19 17 58 6F F9 00 00 0A 72 A3 1D 00 70 28 70 00 00 0A 2D 3F 07 11 19 17 58 6F F9 00 00 0A 72 92 5E 00 70 28 70 00 00 0A 2D 29</code> </pre> <br>  dekompilasi dan dapatkan apa yang Anda rencanakan <br><br><div class="spoiler">  <b class="spoiler_title">Siklus baru</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (num3 &lt; list.Count &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>) &amp;&amp; !(list[num3] == <span class="hljs-string"><span class="hljs-string">":"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (list[num3] == A_0.b &amp;&amp; num2 &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { num2 = num3; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (num3 != <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; num3 &lt; list.Count - <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; !(list[num3 + <span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">":"</span></span>) &amp;&amp; !(list[num3 + <span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">"where"</span></span>)) { list.RemoveAt(num3); num3--; } num3++; }</code> </pre> <br></div></div><br>  Dengan perubahan ini, plugin akan menghasilkan dokumentasi kode berikut: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** The class for read file. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DATA_READER_DLL_EXPORTS</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassForReadFile</span></span></span><span class="hljs-class"> {</span></span> };</code> </pre> <br><h3>  Kesimpulan </h3><br>  Dalam pelajaran ini kami belajar bagaimana menerapkan pengetahuan kami untuk memperbaiki bug.  Tentu saja, contoh ini tidak mencerminkan seluruh variasi kesalahan dan perawatannya, tetapi ini bukan "celah dangkal".  Kami memperbaiki bug yang jelas tanpa memiliki kode sumber, dan tanpa membangun kembali aplikasi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id445126/">https://habr.com/ru/post/id445126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id445116/index.html">Angkatan Udara AS bekerja pada drone AI yang disebut Skyborg</a></li>
<li><a href="../id445118/index.html">Dalam obrolan Telegram pribadi, Anda dapat menghapus semua pesan - bahkan orang asing (hasil pemungutan suara telah ditambahkan)</a></li>
<li><a href="../id445120/index.html">Frontend Weekly Digest (18 - 24 Mar 2019)</a></li>
<li><a href="../id445122/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 357 (18 - 24 Maret 2019)</a></li>
<li><a href="../id445124/index.html">Pengerasan Sedang untuk Firefox</a></li>
<li><a href="../id445128/index.html">Tutorial Aplikasi Oracle Express Ikhtisar IDE</a></li>
<li><a href="../id445130/index.html">Kementerian Dalam Negeri telah membeli PC untuk 180 juta rubel - semua uang diserahkan kepada produsen asing</a></li>
<li><a href="../id445134/index.html">Haskell Anda ini (tidak) khusus-faktorial dan bagus untuk ini</a></li>
<li><a href="../id445136/index.html">Jangan gugup, jangan terburu-buru, jangan menyela: kisah satu tragedi</a></li>
<li><a href="../id445138/index.html">IBM Integration Bus dan apa yang dimakannya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>