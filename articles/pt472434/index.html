<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèª üî™ üíÆ Atualize seus lan√ßamentos üëò üöØ ‚ú≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Henry Ford disse uma vez: "O melhor carro √© um carro novo". Ent√£o, no grupo de empresas Tinkoff, pensamos em lan√ßamentos de software. A in√©rcia no pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Atualize seus lan√ßamentos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/472434/"><p><img src="https://habrastorage.org/webt/gk/69/t-/gk69t-xi2-9rxwwn8xmp_gz1lo0.png"></p><br><p>  Henry Ford disse uma vez: "O melhor carro √© um carro novo".  Ent√£o, no grupo de empresas Tinkoff, pensamos em lan√ßamentos de software.  A in√©rcia no processo de entrega de recursos e corre√ß√µes urgentes, mais cedo ou mais tarde, gera uma grande d√≠vida t√©cnica para o cliente e geralmente termina com a estagna√ß√£o do projeto como um todo. </p><br><p>  Garantir um indicador de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tempo at√© o mercado</a> e manter a qualidade n√£o √© uma tarefa f√°cil.  Do meu ponto de vista, √© imposs√≠vel construir trilhos imediatamente sobre os quais ser√° poss√≠vel realizar mudan√ßas r√°pida e convenientemente muitos meses ap√≥s o in√≠cio.  O crescimento de um projeto geralmente √© acompanhado por um aumento no n√∫mero de pessoas que trabalham nele, o que significa que ele cria uma fonte potencial de caos em seus lan√ßamentos. </p><br><p>  Nossa experi√™ncia dificilmente vale a pena considerar como instru√ß√µes para o sucesso, mas v√°rias id√©ias pareciam interessantes o suficiente para eu compartilhar com voc√™.  Vamos come√ßar. </p><a name="habracut"></a><br><p>  O ponto de partida da nossa hist√≥ria √© tecnicamente o seguinte.  O sistema consiste em v√°rios servi√ßos, cuja base de c√≥digo √© vasculhada por cerca de 30 pessoas - v√°rias equipes divididas por √°reas de neg√≥cios, por exemplo, atendendo pessoas f√≠sicas e jur√≠dicas.  Tentarei ignorar os detalhes t√©cnicos e arquitet√¥nicos do projeto para focar no pr√≥prio processo de lan√ßamento. </p><br><p>  Como trabalhamos no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Gitflow</a> , o artigo ser√° principalmente interessante para aqueles que escolheram esse m√©todo de entrega espec√≠fico. </p><br><h3 id="problemy">  Os problemas </h3><br><p>  O primeiro problema que encontramos est√° relacionado √† <strong>automa√ß√£o insuficiente de processos</strong> .  A implementa√ß√£o de todas as atividades de libera√ß√£o em nossa equipe est√° vinculada √† fun√ß√£o de gerente de libera√ß√£o (RM). </p><br><p>  Aqui est√£o alguns deles: </p><br><ol><li>  Deixando ramifica√ß√µes de libera√ß√£o e criando tags. </li><li>  Mesclando com master e desenvolvendo branches. </li><li>  Construa e implemente artefatos inclu√≠dos no release. </li><li>  Comunica√ß√£o com especialistas envolvidos no processo - por exemplo, com controle de qualidade ou administradores. </li></ol><br><p>  Essas tarefas rotineiras exigem mais e mais recursos √† medida que o projeto se expande (no nosso caso, um aumento no n√∫mero de servi√ßos); portanto, o primeiro passo √© automatizar tudo o que pode ser automatizado.  Integramos com a ferramenta CI / CD para desviar e mesclar ramifica√ß√µes de lan√ßamento, lan√ßar constru√ß√µes de teste e implantar artefatos usando o bot√£o;  com a ferramenta de rastreamento de tarefas e o messenger corporativo para notifica√ß√£o oportuna do participante respons√°vel pela pr√≥xima etapa - por exemplo, altere o status da tarefa e configure o gancho para enviar uma notifica√ß√£o. </p><br><div class="spoiler">  <b class="spoiler_title">Trabalhos de automa√ß√£o Gitflow</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/5j/d9/jj/5jd9jjsprv33w-m1my1mahamqam.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Um exemplo de notifica√ß√£o em um messenger</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ui/cs/0v/uics0vc4rqqacwoi3ax1nq029oi.png"></p></div></div><br><p>  O gerente de vers√£o ainda precisar√° resolver manualmente os poss√≠veis conflitos decorrentes da jun√ß√£o de ramifica√ß√µes, mas as libera√ß√µes r√°pidas e frequentes devem reduzir seu n√∫mero a nada. </p><br><p>  O pr√≥ximo problema est√° <strong>testando</strong> . </p><br><p>  Um dos crit√©rios de constru√ß√£o para n√≥s √© a execu√ß√£o bem-sucedida dos testes.  √â habitual dividir os testes em pelo menos dois tipos: unidade e integra√ß√£o. </p><br><p>  <strong>Os testes de unidade</strong> permitem verificar a exatid√£o dos m√≥dulos individuais do c√≥digo-fonte do programa, que na pr√°tica se resume a verificar um ou mais m√©todos que possuem uma conex√£o l√≥gica √≥bvia. </p><br><p>  <strong>Os testes de integra√ß√£o</strong> geralmente verificam a operacionalidade de uma cascata inteira desses m√≥dulos, ou seja, o funcionamento de um recurso inteiro no lado do cliente.  Por exemplo, se uma interface restante foi implementada em uma tarefa, verificaremos a operacionalidade da autoriza√ß√£o, a desserializa√ß√£o da solicita√ß√£o em si, a validade dos campos transmitidos, a integra√ß√£o com outros servi√ßos e bancos de dados, bem como a pr√≥pria l√≥gica de neg√≥cios.  √Ä primeira vista, pode parecer que esses testes sejam muito auto-suficientes e possam cobrir todas as poss√≠veis √°reas problem√°ticas.  N√£o h√° necessidade de entender como cada bloco individual funciona, e a interface chamada encapsula toda a l√≥gica para obter uma resposta simples sobre a sa√≠da: se funciona ou n√£o. </p><br><p>  De fato, eles criam uma s√©rie de problemas adiados, eis alguns deles: </p><br><ol><li>  A participa√ß√£o de um grande n√∫mero de componentes testados afeta proporcionalmente o tempo de montagem e a execu√ß√£o desses testes. </li><li>  Encapsular a l√≥gica do teste geralmente leva ao fato de que √© dif√≠cil garantir a corre√ß√£o do resultado do teste.  Muitas vezes, personalizamos o teste para o resultado e, ainda mais frequentemente, o resultado corresponde √† expectativa devido a efeitos colaterais aleat√≥rios. </li><li>  A relev√¢ncia dos dados de teste √© perdida. </li><li>  As integra√ß√µes com sistemas de terceiros, especialmente em ambientes de teste, geralmente caem.  Isso anula o tempo gasto na execu√ß√£o, pois nem sempre √© √≥bvio: trata-se de uma queda ou avaria tempor√°ria causada por nossas altera√ß√µes. </li></ol><br><p>  Para a maioria dos problemas j√° surgiu uma solu√ß√£o.  Mas, como sempre, as solu√ß√µes n√£o v√™m sem restri√ß√µes adicionais ou novos problemas. </p><br><p>  Escolher os testes certos para voc√™ e implement√°-los corretamente √© uma tarefa muito dif√≠cil.  Al√©m disso, √© importante encontrar um equil√≠brio entre a qualidade da cobertura e a velocidade de constru√ß√£o para otimizar seus lan√ßamentos. </p><br><p>  No nosso caso, optamos por um h√≠brido.  Continuamos a elevar todos os componentes necess√°rios para um teste completo, lavando simultaneamente todas as integra√ß√µes poss√≠veis.  Para salvar os contratos da API, usamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pact</a> e para verificar a integra√ß√£o com o banco de dados - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Testcontainers</a> . </p><br><p>  Essa abordagem para escrever testes como resultado resultou em uma solu√ß√£o para o terceiro problema - <strong>muito tempo para o teste manual de uma tarefa</strong> .  A estabilidade dos testes h√≠bridos levou √† id√©ia de atrair um engenheiro de controle de qualidade no est√°gio de especifica√ß√£o da tarefa de compila√ß√£o de casos de teste - isso permitir√° que eles sejam ignorados no est√°gio de teste manual.  A integra√ß√£o com produtos √∫teis, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TestRail</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Allure,</a> tornou-se um tipo de ponte entre o desenvolvedor e o testador.  Um contrato √© criado, cuja execu√ß√£o √© refletida passo a passo no relat√≥rio gerado durante a montagem de teste. </p><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Detalhes da compila√ß√£o de teste</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/nk/wv/kc/nkwvkcxtmk1j_sxutjmni2rganu.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">TestRail.</b>  <b class="spoiler_title">Casos de teste implementados pelo desenvolvedor</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ha/oh/5r/haoh5rijpl5xjg6arorfgwdnkzi.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Allure</b>  <b class="spoiler_title">Relat√≥rio de cria√ß√£o de teste autom√°tico</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/1f/w2/cy/1fw2cyotmhbopjohdm47y7spkaq.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Allure</b>  <b class="spoiler_title">Informa√ß√µes para cada teste em execu√ß√£o e detalhamento passo a passo da execu√ß√£o</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/g_/q-/os/g_q-osvljwhuecjhtkta1avthwk.png"></p></div></div><br><p>  Resta conectar os relat√≥rios √† sua ferramenta de rastreamento de tarefas para obter um rastreamento transparente das tarefas.  Uma hist√≥ria clara tamb√©m reduzir√° o tempo necess√°rio para compilar e implementar testes para futuras tarefas relacionadas. </p><br><div class="spoiler">  <b class="spoiler_title">Jira.</b>  <b class="spoiler_title">Casos de teste anexados automaticamente √† tarefa</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/fr/66/dv/fr66dvaumtfhdc56iw5tnezg4vk.png"></p></div></div><br><p>  Dessa forma, os engenheiros de controle de qualidade economizam tempo suficiente para se concentrar no teste de casos excepcionais e na integra√ß√£o com outros sistemas. </p><br><p>  O √∫ltimo problema est√° relacionado a isso.  Para testes manuais, todas as tarefas se fundem a partir das ramifica√ß√µes de recursos no desenvolvimento e lan√ßamento de uma implanta√ß√£o na bancada de testes. </p><br><p>  Em primeiro lugar, com essa abordagem, voc√™ n√£o pode falar sobre testes puros do recurso, pois, paralelamente, as altera√ß√µes relacionadas de outros desenvolvedores podem se desenvolver. </p><br><p>  Em segundo lugar, ao liberar a ramifica√ß√£o de libera√ß√£o, pode ocorrer que o controle de qualidade n√£o tenha tempo para testar algumas das tarefas.  H√° uma op√ß√£o: reverter as altera√ß√µes afetadas por essas tarefas ou diminuir a velocidade da vers√£o at√© o final do teste. </p><br><p>  Voc√™ ter√° que fazer essa escolha o tempo todo, a menos que <strong>isole seu ambiente de teste</strong> .  √â importante que n√£o haja altera√ß√µes no componente em teste al√©m daquelas feitas pela tarefa.  No nosso caso, precisamos poder escolher um ou mais servi√ßos cujas filiais tenham sido alteradas e gerenciar o roteamento dentro do cluster enviando apenas as solicita√ß√µes necess√°rias do controle de qualidade para essas inst√¢ncias.  A tarefa √© complicada se mecanismos de balanceamento j√° estiverem sendo usados ‚Äã‚Äãno cluster, que tamb√©m precisam ser levados em considera√ß√£o. </p><br><p>  Tendo percebido essa oportunidade, come√ßamos a realizar testes manuais diretamente em ramos de recursos separados: implantar o servi√ßo desejado durante a dura√ß√£o do teste, integrando-se ao ambiente geral de forma isolada.  Ao mesclar apenas tarefas prontas na ramifica√ß√£o de desenvolvimento e nos livrar dos bloqueios, come√ßamos a determinar quais altera√ß√µes devem ser inclu√≠das no release e quais n√£o. </p><br><p>  Vale a pena notar que √© improv√°vel que essa solu√ß√£o se torne uma bala de prata para as equipes que fazem altera√ß√µes quase nos mesmos arquivos.  Nesse caso, o armazenamento de recursos √© inversamente proporcional ao n√∫mero de conflitos que surgem durante a fus√£o.  Na pr√°tica, com lan√ßamentos bastante frequentes, isso acontece muito raramente em uma equipe com cinquenta desenvolvedores. </p><br><h3 id="vmesto-vyvoda">  Em vez de sa√≠da </h3><br><p>  Resumindo, podemos identificar as principais abordagens que podem ajudar na acelera√ß√£o de lan√ßamentos: </p><br><ol><li>  Automa√ß√£o de opera√ß√µes de rotina. </li><li>  Transpar√™ncia dos processos para todos os envolvidos. </li><li>  O equil√≠brio necess√°rio entre velocidade e qualidade ao escrever testes automatizados. </li><li>  Tempo reduzido para testes manuais. </li><li>  Isolamento do ambiente para teste. </li></ol><br><p>  √â importante entender que na escolha de v√°rias abordagens, princ√≠pios e estrat√©gias sempre vale a pena come√ßar a partir do contexto do seu problema.  Existem muitas maneiras igualmente confi√°veis ‚Äã‚Äãe sofisticadas de agilizar a entrega do seu software ao cliente.  Uma tentativa de responder a novas dificuldades emergentes levou √†s conclus√µes descritas acima.  Para n√≥s, eles foram o primeiro passo em dire√ß√£o a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma abordagem mais ousada para liberar lan√ßamentos</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt472434/">https://habr.com/ru/post/pt472434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt472422/index.html">Sber X RamblerFront & Meet Up</a></li>
<li><a href="../pt472426/index.html">Semana de Seguran√ßa 43: A Vida Secreta dos Hanipots da IoT</a></li>
<li><a href="../pt472428/index.html">Operador Tarantool kubernetes</a></li>
<li><a href="../pt472430/index.html">Como escolhemos a base de componentes para uma casa inteligente: sobre sensores e um controlador</a></li>
<li><a href="../pt472432/index.html">Python 3.8: O que h√° de novo e como us√°-lo?</a></li>
<li><a href="../pt472438/index.html">Como os proxies s√£o usados ‚Äã‚Äãna seguran√ßa da informa√ß√£o: 6 casos de uso pr√°tico</a></li>
<li><a href="../pt472440/index.html">Um dia no Joker 2019</a></li>
<li><a href="../pt472442/index.html">A situa√ß√£o: todo mundo est√° falando sobre o retorno de formatos de √°udio esquecidos - por que eles est√£o destinados a permanecer nichos</a></li>
<li><a href="../pt472444/index.html">Os melhores produtos partem de problemas reais: interfone sobre trabalhos a serem realizados. Parte 3 final</a></li>
<li><a href="../pt472446/index.html">Como fazer a cor correta do c√≥digo em "Habr√©" e por que √© t√£o dif√≠cil</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>