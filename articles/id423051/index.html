<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💼 🐧 🐈 Perjuangan untuk Sumber Daya, Bagian 1: Dasar-Dasar Kelompok ↔️ ⛄️ 🤰🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Komputer adalah perangkat keras. Dan hari ini kami kembali ke titik awal, dalam arti sekarang Anda jarang menemukan host fisik di mana satu tugas tung...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perjuangan untuk Sumber Daya, Bagian 1: Dasar-Dasar Kelompok</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/423051/">  Komputer adalah perangkat keras.  Dan hari ini kami kembali ke titik awal, dalam arti sekarang Anda jarang menemukan host fisik di mana satu tugas tunggal dilakukan.  Bahkan jika hanya satu aplikasi yang berjalan di server, kemungkinan besar terdiri dari beberapa proses, wadah, atau bahkan mesin virtual (VM), dan mereka semua bekerja di server yang sama.  Red Hat Enterprise Linux 7 berupaya dengan baik dengan distribusi sumber daya sistem dalam situasi seperti itu, tetapi secara default berperilaku seperti nenek yang baik hati, memperlakukan cucunya dengan kue buatan sendiri dan berkata: "Sama untuk semua orang, sama untuk semua orang." <br><br><img src="https://habrastorage.org/webt/l2/wn/bp/l2wnbpxkcho_2zulxgbifsvkg3y.png" width="100%"><br><br>  Secara teori, prinsip "dibagi rata" tentu saja indah, tetapi dalam praktiknya, beberapa proses, wadah atau VM lebih penting daripada yang lain, dan karenanya harus menerima lebih banyak. <br><a name="habracut"></a><br>  Linux telah lama memiliki alat manajemen sumber daya (baik, ulimit, dll.), Tetapi dengan munculnya Red Hat Enterprise Linux 7 dan systemd, kami akhirnya memiliki seperangkat alat yang kuat yang dibangun ke dalam OS itu sendiri.  Faktanya adalah bahwa komponen kunci dari systemd adalah sekumpulan cgroup yang siap pakai dan disesuaikan yang sepenuhnya digunakan pada level OS. <br><br>  Nah, cgroup macam apa ini, dan kemana perginya sumber daya atau manajemen kinerja? <br><br><h3>  Kontrol level kernel </h3><br>  Dimulai dengan versi 2.6.24, dirilis pada Januari 2008, kernel Linux memperkenalkan apa yang awalnya diciptakan dan dibuat oleh Google dengan nama "wadah proses", dan di Linux dikenal sebagai "kelompok kontrol", disingkat cgroup.  Singkatnya, cgroup adalah mekanisme kernel yang memungkinkan Anda membatasi penggunaan, menyimpan catatan, dan mengisolasi konsumsi sumber daya sistem (CPU, memori, disk I / O, jaringan, dll.) Pada tingkat pengumpulan proses.  Cgroup juga dapat membekukan proses untuk memeriksa dan memulai kembali.  Pengontrol Cgroup pertama kali muncul di versi 6 dari Red Hat Enterprise Linux, tetapi di sana mereka harus dikonfigurasi secara manual.  Tetapi dengan munculnya Red Hat Enterprise Linux 7 dan systemd, kumpulan cgroup yang telah dikonfigurasikan hadir bersama dengan OS. <br><br>  Semua ini bekerja pada level kernel OS dan karenanya menjamin kontrol ketat atas setiap proses.  Jadi sekarang sangat sulit bagi malware mana pun untuk memuat sistem sehingga berhenti merespons dan membeku.  Meskipun, tentu saja, kode kereta dengan akses langsung ke perangkat keras (misalnya, driver) masih mampu melakukan ini.  Pada saat yang sama, Red Hat Enterprise Linux 7 menyediakan antarmuka untuk berinteraksi dengan cgroup, dan semua pekerjaan dengan mereka terutama dilakukan melalui perintah systemd. <br><br><h3>  Kue Anda </h3><br>  Diagram di bawah ini, mengingatkan pada irisan pie, menunjukkan tiga cgroup yang secara default di server Red Hat Enterprise Linux 7 - System, User, and Machine.  Masing-masing kelompok ini disebut "slice" (sektor slice).  Seperti yang Anda lihat pada gambar, setiap irisan dapat memiliki sektor pengiris anak.  Dan, seperti dalam kasus kue, secara total, semua irisan memberikan 100% dari sumber daya yang sesuai. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z1/xj/uk/z1xjukef06hg4do7_0iyaffbfv8.png"></div><br><br>  Sekarang mari kita lihat beberapa konsep kelompok menggunakan sumber daya prosesor sebagai contoh. <br><br>  Gambar di atas menunjukkan bahwa waktu prosesor dibagi rata antara tiga irisan tingkat atas (Sistem, Pengguna, dan Mesin).  Tetapi ini hanya terjadi di bawah beban.  Jika beberapa proses dari irisan Pengguna meminta 100% sumber daya prosesor, dan tidak ada orang lain yang membutuhkan sumber daya ini saat ini, maka itu akan menerima semua 100% waktu prosesor. <br><br>  Masing-masing dari tiga irisan tingkat atas dirancang untuk jenis beban kerjanya, yang mengiris sektor anak dalam irisan induk: <br><br><ul><li>  <b>Sistem</b> - daemon dan layanan. </li><li>  <b>Pengguna</b> - sesi pengguna.  Setiap pengguna menerima irisan anak, dan semua sesi dengan UID yang sama "hidup" di irisan yang sama, sehingga orang bijak yang licik tidak bisa mendapatkan sumber daya lebih dari yang seharusnya. </li><li>  <b>Mesin</b> - mesin virtual, seperti tamu KVM. </li></ul><br>  Selain itu, konsep yang disebut "bola" (berbagi) digunakan untuk mengontrol penggunaan sumber daya.  Bola adalah parameter numerik relatif;  nilainya masuk akal hanya dibandingkan dengan nilai-nilai bola lain yang termasuk dalam kelompok yang sama.  Secara default, semua irisan memiliki bola sama dengan 1024. Dalam irisan Sistem pada gambar di atas, bola CPU sama dengan 1024 ditetapkan untuk httpd, sshd, crond, dan gdm. Nilai bola untuk irisan Sistem, Pengguna, dan Mesin juga 1024. Apakah agak membingungkan?  Bahkan, ini dapat direpresentasikan sebagai pohon: <br><br><ul><li>  Sistem - 1024 <ul><li>  httpd - 1024 </li><li>  sshd - 1024 </li><li>  crond - 1024 </li><li>  gdm - 1024 </li></ul></li><li>  Pengguna - 1024 <ul><li>  bash (mrichter) - 1024 </li><li>  bash (dorf) - 1024 </li></ul></li><li>  Mesin - 1024 <ul><li>  testvm - 1024 </li></ul></li></ul><br>  Dalam daftar ini, kami memiliki beberapa daemon yang berjalan, beberapa pengguna, dan satu mesin virtual.  Sekarang bayangkan bahwa mereka semua secara bersamaan meminta semua waktu prosesor yang dapat diperoleh. <br><br>  Singkatnya: <br><br><ul><li>  Sistem Slice menerima 33,333% dari waktu prosesor dan membagikannya secara merata di antara empat setan, yang masing-masing memberikan 8,25% dari sumber daya CPU. </li><li>  Irisan Pengguna menerima 33,333% dari waktu prosesor dan membagikannya di antara dua pengguna, yang masing-masing memiliki 16,5% dari sumber daya CPU.  Jika pengguna log keluar atau menghentikan semua proses yang berjalan, maka dorf akan memiliki akses ke 33% dari sumber daya CPU. </li><li>  Mesin Iris menerima 33,333% dari waktu prosesor.  Jika Anda mematikan VM atau mengubahnya ke mode siaga, maka irisan Sistem dan Pengguna akan menerima sekitar 50% dari sumber daya CPU, yang kemudian akan dibagi di antara irisan anak mereka. </li></ul><br>  Selain itu, untuk setiap daemon, pengguna, atau mesin virtual, Anda dapat memasukkan tidak hanya relatif, tetapi juga pembatasan absolut pada konsumsi waktu prosesor, tidak hanya satu, tetapi juga beberapa prosesor.  Misalnya, slice mrichter pengguna memiliki properti CPUQuota.  Jika Anda menetapkannya menjadi 20%, maka mrichter dalam keadaan apa pun tidak akan menerima lebih dari 20% sumber daya dari satu CPU.  Pada server multi-core, CPUQuota dapat lebih dari 100% sehingga slice dapat menggunakan sumber daya lebih dari satu prosesor.  Misalnya, dengan CPUQuota = 200%, sepotong dapat sepenuhnya memanfaatkan dua inti prosesor.  Penting untuk memahami bahwa CPUQuota tidak cadangan, dengan kata lain, itu tidak menjamin persentase waktu prosesor untuk setiap beban sistem - ini hanya maksimum yang dapat dialokasikan untuk sebuah slice dengan mempertimbangkan semua irisan dan pengaturan lainnya. <br><br><h3>  Putar sampai penuh! </h3><br>  Bagaimana saya bisa mengubah pengaturan slice? <br><br>  Untuk ini, setiap irisan memiliki properti khusus.  Dan karena itu adalah Linux, kita dapat secara manual menulis pengaturan dalam file konfigurasi atau mengatur dari baris perintah. <br><br>  Dalam kasus kedua, perintah set-properti systemctl digunakan.  Inilah yang akan terjadi di layar jika Anda mengetik perintah ini, tambahkan nama irisan di akhir (dalam kasus kami, Pengguna) dan kemudian tekan tombol Tab untuk menampilkan opsi: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2j/2v/k6/2j2vk6tp9lq16jnovtw5lst6zck.png"></div><br><br>  Tidak semua properti di tangkapan layar ini adalah pengaturan cgroup.  Kami terutama tertarik pada mereka yang mulai pada Block, CPU dan Memory. <br><br>  Jika Anda lebih suka bukan baris perintah, tetapi file konfigurasi (misalnya, untuk penyebaran otomatis pada beberapa host), maka Anda harus berurusan dengan file di folder / etc / systemd / system.  File-file ini secara otomatis dibuat ketika Anda menetapkan properti menggunakan perintah systemctl, tetapi mereka juga dapat dibuat dalam editor teks, dicap melalui Wayang, atau bahkan dihasilkan oleh skrip saat itu juga. <br><br>  Jadi, dengan konsep dasar cgroup, semuanya harus jelas.  Lain kali kita akan melalui beberapa skenario dan melihat bagaimana perubahan pada properti tertentu mempengaruhi kinerja. <br><br>  <b>Dan secara harfiah besok, kami mengundang semua orang ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Red Hat Forum Russia 2018</a> - akan ada kesempatan untuk mengajukan pertanyaan langsung ke insinyur Red Hat.</b> <br><br>  Posting cgroup lain dari seri Resource Fight kami tersedia di: <br><br><ul><li>  Bagian 2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/company/redhatrussia/blog/424367</a> </li><li>  Bagian 3 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/company/redhatrussia/blog/425803</a> </li><li>  Bagian 4 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/company/redhatrussia/blog/427413</a> </li><li>  Bagian 5 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/company/redhatrussia/blog/429064</a> </li><li>  Bagian 6 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/company/redhatrussia/blog/430748</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id423051/">https://habr.com/ru/post/id423051/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id423041/index.html">CD-ROM Super NES Cerita Aneh</a></li>
<li><a href="../id423043/index.html">Karena kerentanan dalam sistem perlindungan kendaraan listrik Tesla, sebuah mobil dapat dicuri dalam beberapa detik</a></li>
<li><a href="../id423045/index.html">Printer 3D mana yang harus dipilih? Ulasan Video 3Dtool</a></li>
<li><a href="../id423047/index.html">Kami memesan sistem TI untuk uang yang masuk akal</a></li>
<li><a href="../id423049/index.html">Proses Pembelajaran di Linux</a></li>
<li><a href="../id423053/index.html">Struct and readonly: bagaimana cara menghindari penurunan kinerja</a></li>
<li><a href="../id423055/index.html">Analis Wall Street: "Apple membuat kami makan topi kami"</a></li>
<li><a href="../id423057/index.html">Python juga menolak sebagian istilah master / slave</a></li>
<li><a href="../id423061/index.html">ref penduduk setempat dan pengembalian ref dalam C #: jebakan kinerja</a></li>
<li><a href="../id423063/index.html">Epson WorkForce Pro: Kronik tentang bagaimana kantor cetak inkjet “menarik selimut” dari laser dan apa yang terjadi hari ini</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>