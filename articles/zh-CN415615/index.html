<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â¯ï¸ ğŸš ğŸ¥ é€šè¿‡Swift 3ä¸Šçš„iOSä¸­çš„APIä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚ç¬¬2éƒ¨åˆ† ğŸ‘¨ğŸ¾â€ğŸš’ ğŸ¨ ğŸ²</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡æ˜¯æ–‡ç« åœ¨Swift 3ä¸Šé€šè¿‡iOSä¸­çš„APIä¸æœåŠ¡å™¨äº¤äº’ä»¥åŠç¬¬1éƒ¨åˆ†æ›´æ–°å¹¶åœ¨Swift 3ä¸Šæ›´æ–°ç”¨Objective-Cç¼–å†™çš„æ—§æ–‡ç« çš„å»¶ç»­ã€‚ 

 ç®€è¦ç†è®º 
 GETè¯·æ±‚ 
 GETæ˜¯æœ€ç®€å•çš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œå®ƒæ˜¯æµè§ˆå™¨ç”¨æ¥åŠ è½½ç½‘é¡µçš„æ–¹æ³•ã€‚ å®ƒç”¨äºè¯·æ±‚ä½äºç‰¹å®šURLçš„å†…å®¹ã€‚ å†…å®¹å¯ä»¥æ˜¯ä¾‹å¦‚ç½‘é¡µ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é€šè¿‡Swift 3ä¸Šçš„iOSä¸­çš„APIä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚ç¬¬2éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415615/"> æœ¬æ–‡æ˜¯æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨Swift 3ä¸Šé€šè¿‡iOSä¸­çš„APIä¸æœåŠ¡å™¨äº¤äº’ä»¥åŠç¬¬1éƒ¨åˆ†</a>æ›´æ–°å¹¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨Swift 3ä¸Š</a>æ›´æ–°ç”¨Objective-Cç¼–å†™çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ—§æ–‡ç« </a>çš„å»¶ç»­ã€‚ <br><br><h2> ç®€è¦ç†è®º </h2><br><h3>  GETè¯·æ±‚ </h3><br>  GETæ˜¯æœ€ç®€å•çš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œå®ƒæ˜¯æµè§ˆå™¨ç”¨æ¥åŠ è½½ç½‘é¡µçš„æ–¹æ³•ã€‚ å®ƒç”¨äºè¯·æ±‚ä½äºç‰¹å®šURLçš„å†…å®¹ã€‚ å†…å®¹å¯ä»¥æ˜¯ä¾‹å¦‚ç½‘é¡µï¼Œå›¾ç‰‡æˆ–éŸ³é¢‘æ–‡ä»¶ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼ŒGETè¯·æ±‚æ˜¯åªè¯»çš„ï¼Œå¹¶ä¸”æ ¹æ®W3Cæ ‡å‡†ï¼Œä¸åº”åœ¨æ›´æ”¹æœåŠ¡å™¨ç«¯çš„æ“ä½œä¸­ä½¿ç”¨GETè¯·æ±‚ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸ä½¿ç”¨GETè¯·æ±‚å‘é€è¡¨å•æˆ–å‘é€ç…§ç‰‡ï¼Œå› ä¸ºè¿™äº›æ“ä½œéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œä¸€äº›æ›´æ”¹ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨POSTï¼‰ã€‚ <br><br><h3>  POSTè¯·æ±‚ </h3><br>  POSTå°†æ•°æ®å‘é€åˆ°URLè¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚ å‚æ•°åŒ…å«åœ¨è¯·æ±‚æ­£æ–‡ä¸­ï¼Œæ ¼å¼ä¸GETç›¸åŒã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦å‘å¸ƒä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå­—æ®µçš„è¡¨å•ï¼Œä¸€ä¸ªåç§°å’Œä¸€ä¸ªå¹´é¾„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åœ¨è¯·æ±‚æ­£æ–‡ä¸­å‘é€ç±»ä¼¼äºname = Martinï¼†age = 29çš„å†…å®¹ã€‚ <br><br> è¿™ç§å‘é€å‚æ•°çš„æ–¹æ³•å·²åœ¨ç½‘é¡µä¸­å¹¿æ³›ä½¿ç”¨ã€‚ æœ€å—æ¬¢è¿çš„æ¡ˆä¾‹æ˜¯è¡¨æ ¼ã€‚ å½“æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šå¡«å†™è¡¨æ ¼å¹¶å•å‡»â€œæäº¤â€æ—¶ï¼Œæœ€æœ‰å¯èƒ½çš„è¯·æ±‚å°†æ˜¯POSTã€‚ <br><a name="habracut"></a><br> åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨POSTå¯¹ç¬‘è¯è¿›è¡Œæ’åã€‚ æˆ‘ä»¬ä¼šå°†é€‰ç¥¨ï¼ˆæˆ–+1æˆ–-1ï¼‰å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚ <br><br>  POSTè¯·æ±‚æ•°æ®å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ ¼å¼è¿›è¡Œç»“æ„åŒ–ã€‚ å‚æ•°é€šå¸¸æŒ‰ç…§å½¢å¼URLç¼–ç æ ‡å‡†ï¼ˆæŒ‰ç…§W3C HTMLæ ‡å‡†ï¼‰è¿›è¡Œæ ¼å¼åŒ–ã€‚ è¿™æ˜¯é»˜è®¤æ ¼å¼ï¼Œå·²åœ¨è®¸å¤šæµè§ˆå™¨ä¸­å¹¿æ³›ä½¿ç”¨ã€‚ æˆ‘ä»¬çš„æ–¹æ³•æ¥å—Dictionaryå­—å…¸ä½œä¸ºå‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬æ— æ³•é€šè¿‡HTTPè¿æ¥å‘é€Dictionaryå­—å…¸ï¼Œå› ä¸ºå®ƒæ˜¯å†…éƒ¨Swiftç±»å‹ã€‚ è¦é€šè¿‡HTTPè¿æ¥è½¬å‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå­—å…¸çš„å¯è¯†åˆ«è¡¨ç¤ºå½¢å¼ã€‚ å°±åƒä¸å¤–å›½äººäº¤æµä¸€æ ·ã€‚ æˆ‘ä»¬å°†æ¶ˆæ¯ç¿»è¯‘æˆé€šç”¨è¯­è¨€ï¼Œç„¶åå°†å…¶ä»é€šç”¨è¯­è¨€ç¿»è¯‘æˆå…¶æ¯è¯­ã€‚  HTTPä¸­çš„é€šç”¨è¯­è¨€æ˜¯W3Cæ ‡å‡†ï¼Œæˆ‘ä»¬çš„è¯­è¨€æ˜¯Swiftï¼Œæ¥æ”¶æ–¹è¯­è¨€å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯æœªçŸ¥çš„ã€‚ <br><br>  W3Cæ ‡å‡†å®šä¹‰äº†è§„åˆ™ï¼Œè¿™äº›è§„åˆ™å®šä¹‰äº†æ¯ç§æƒ…å†µä¸‹å¯è¯†åˆ«çš„è¡¨ç¤ºå½¢å¼çš„å«ä¹‰ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ ‡å‡†çš„å½¢å¼URLç¼–ç éƒ¨åˆ†ä¹‹åæ˜¾ç¤ºå‚æ•°ï¼ˆä¾‹å¦‚ï¼Œparam1 = var1å’Œparam2 = var2ï¼‰ã€‚ <br><br><h3> ç½‘é¡µæµè§ˆ </h3><br> ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚ è¿™æ˜¯æµè§ˆå™¨åœ¨æ˜¾ç¤ºç½‘é¡µä¹‹å‰æ‰€åšçš„ã€‚ åŒºåˆ«ä»…åœ¨äºç­”æ¡ˆçš„å†…å®¹ã€‚ ç½‘é¡µä½¿ç”¨HTMLæ ‡å‡†è¿›è¡Œæ ¼å¼åŒ–ï¼Œè¯¥HTMLæ ‡å‡†å®šä¹‰äº†ä¸€ç»„æœ‰å…³å¦‚ä½•ä»¥å›¾å½¢æ–¹å¼å®šä¹‰å„ç§æ ‡è®°æ ‡ç­¾çš„è§„åˆ™ã€‚ è¿™äº›è§„åˆ™çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯è¦éµå¾ªW3Cæ ‡å‡†æ˜¾ç¤ºæ•´ä¸ªé¡µé¢æ˜¯ä¸€é¡¹è‰°å·¨çš„ä»»åŠ¡ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒiOSå…·æœ‰å†…ç½®çš„UIWebViewç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä½¿ç”¨è‘—åçš„WebKitå¼•æ“å¹¶è§£é‡ŠHTML / CSS / JavaScriptå¹¶åœ¨UIViewä¸­æ˜¾ç¤ºæ•´ä¸ªç½‘é¡µã€‚ <br><br> åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦æ§åˆ¶å¯¼èˆªæµç¨‹ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ä½•æ—¶åŠ è½½æŸäº›å†…å®¹æˆ–ç‰¹å®šçš„URLã€‚ <br><br> æˆ–è€…ï¼Œä¹Ÿè®¸æˆ‘ä»¬æ­£åœ¨ä¸ºå„¿ç«¥å®æ–½å®‰å…¨çš„æµè§ˆå™¨ï¼Œæˆ‘ä»¬å¸Œæœ›é˜»æ­¢ç”¨æˆ·åŠ è½½ç¬¦åˆæŸäº›æ¡ä»¶ï¼ˆä¾‹å¦‚æ€§åˆ«æˆ–æ¯’å“ï¼‰çš„ç½‘é¡µã€‚ å¯¹äºæ‰€æœ‰æ­¤ç±»è‡ªå®šä¹‰ç±»å‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œè¯¥ç±»å°†UIWebViewDelegateåè®®å®ç°ä¸ºUIWebViewå§”æ‰˜ã€‚ æˆ‘ä»¬å¯ä»¥å®ç°ä»¥ä¸‹æ–¹æ³•ï¼š <br><br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">webView</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:shouldStartLoadWithRequest</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:navigationType</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">webViewDidStartLoad</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">webViewDidFinishLoad</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">webView</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:didFailLoadWithError</span></span>:</code> </pre> <br> ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…è®¸æˆ–é˜»æ­¢ç‰¹å®šè¯·æ±‚æ¥æ§åˆ¶å¯¼èˆªçš„æµç¨‹ã€‚ å…¶ä»–ä¸‰ç§æ–¹æ³•æ˜¯ä¿¡æ¯äº‹ä»¶ï¼ˆæ–¹æ³•åç§°å¯ä»¥å¾ˆå¥½åœ°è¯´æ˜äº‹ä»¶ï¼‰ã€‚ <br><br><h2> é€šè¿‡POSTè¯·æ±‚å®ç°æŠ•ç¥¨ </h2><br> æˆ‘ä»¬å°†æ·»åŠ <b>MainViewController.swift</b>å’Œ<b>HTTPCommunication.swiftæ–‡ä»¶</b> ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„<b>WebViewController.swift</b>æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰webViewã€‚ <br><br> é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„WebViewController.swiftæ–‡ä»¶å¹¶åœ¨å…¶ä¸­å®šä¹‰WebViewControllerç±»ï¼š <br><br>  <b>WebViewController.swift</b> <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UIKit <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UIViewController { } extension WebViewController { }</span></span></span></span></code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨è´Ÿè´£æ‰€æœ‰HTTPæ“ä½œçš„ç±»ä¸­å®ç°äº†å‘å‡ºPOSTè¯·æ±‚çš„åŠŸèƒ½ï¼šHTTPCommunicationç±»ã€‚ ä¸ºæ­¤ï¼Œè¯·åœ¨HTTPCommunication.swiftä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„postURLï¼ˆ_ï¼šparamsï¼šcomplementHandler :)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸å…ˆå‰çš„retrieveURLï¼ˆ_ï¼šcompletionHandler :)æ–¹æ³•ç›¸ä¼¼ã€‚ <br><br>  <b>HTTPCommunication.swift</b> <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTTPCommunication</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> </span></span>{ â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">retrieveURL</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> url: URL, completionHandler: @escaping </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(Data)</span></span></span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)) { â€¦ } <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">    } // end of class HTTPCommunication</span></span></code> </pre><br> æ–¹æ³•ä»£ç  <br><br><pre> <code class="hljs powershell">func postURL(_ url: URL, params: <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">String</span></span></span><span class="hljs-function">: </span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">Int</span></span></span><span class="hljs-function">], </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">completionHandler</span></span></span></span>: @escaping ((<span class="hljs-keyword"><span class="hljs-keyword">Data</span></span>) -&gt; Void)) { // (K.<span class="hljs-number"><span class="hljs-number">1</span></span>) self.completionHandler = completionHandler // (K.<span class="hljs-number"><span class="hljs-number">2</span></span>) func postBody(params: <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">String</span></span></span><span class="hljs-function">: </span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">Int</span></span></span><span class="hljs-function">]) -&gt; </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">Data</span></span></span></span>? { // (K.<span class="hljs-number"><span class="hljs-number">3</span></span>) var paramsArr: <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">String</span></span></span><span class="hljs-function">] = [] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">for</span></span></span></span> (key, value) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> params { paramsArr.append(<span class="hljs-string"><span class="hljs-string">"\(key)=\(value)"</span></span>) } let postBodyString: String = paramsArr.joined(separator: <span class="hljs-string"><span class="hljs-string">"&amp;"</span></span>) let postBodyData: <span class="hljs-keyword"><span class="hljs-keyword">Data</span></span>? = postBodyString.data(using: .utf8) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> postBodyData } var request: URLRequest = URLRequest(url: url) // (K.<span class="hljs-number"><span class="hljs-number">4</span></span>) request.httpMethod = <span class="hljs-string"><span class="hljs-string">"POST"</span></span> request.httpBody = postBody(params: params) let session: URLSession = URLSession(configuration: .default, delegate: self, delegateQueue: nil) // (K.<span class="hljs-number"><span class="hljs-number">5</span></span>) let task: URLSessionDownloadTask = session.downloadTask(with: request) task.resume() }</code> </pre> <br>  ï¼ˆK.1ï¼‰ä½¿ç”¨é—­åŒ…ï¼Œæˆ‘ä»¬å°†åœ¨æ­¤å‡½æ•°ä¹‹å¤–å·¥ä½œï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨@escapingè¡¨ç¤ºå®ƒã€‚ <br>  ï¼ˆK.2ï¼‰æˆ‘ä»¬å°†ä¼ é€’çš„é—­åŒ…å­˜å‚¨åœ¨completeHandlerå±æ€§ä¸­ã€‚ <br>  ï¼ˆK.3ï¼‰æˆ‘ä»¬ç¼–å†™äº†ä¸€ç§æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¼ é€’çš„å‚æ•°çš„å­—å…¸è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œç„¶åä»¥utf8ç¼–ç å°†è¯¥å­—ç¬¦ä¸²ç¼–ç ä¸ºDataç±»å‹ã€‚ <br>  ï¼ˆK.4ï¼‰æˆ‘ä»¬ä½¿ç”¨ä¼ é€’çš„urlåˆ›å»ºä¸€ä¸ªè¯·æ±‚å¹¶è¿›è¡Œé…ç½®ï¼šå°†POSTè®¾ç½®ä¸ºæ–¹æ³•ï¼Œå¹¶ä½¿ç”¨utf8ä½œä¸ºè¯·æ±‚æ­£æ–‡æ¥è®¾ç½®æ•°æ®ç±»å‹çš„å‚æ•°ã€‚ <br>  ï¼ˆK.5ï¼‰æœ€åï¼Œåˆ›å»ºä¸€ä¸ªå…·æœ‰é»˜è®¤é…ç½®å’Œè‡ªå·±çš„å§”æ‰˜çš„ä¼šè¯ã€‚ ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä»»åŠ¡ä»¥å°†è¯¥è¯·æ±‚çš„ç»“æœåŠ è½½åˆ°ä¸´æ—¶å­˜å‚¨ä¸­ã€‚ æœ€åï¼Œè§£å†»ä»»åŠ¡ã€‚ <br><br> ç°åœ¨è®©æˆ‘ä»¬å‘MainViewController.swiftæ·»åŠ å¿…è¦çš„æ¥å£ã€‚ æ·»åŠ ä¸¤ä¸ªæŒ‰é’®ä»¥å¯¹votingUpå’ŒvoteDownè¿›è¡ŒæŠ•ç¥¨ï¼Œè¿™ä¸¤ä¸ªæŒ‰é’®å°†åˆ†åˆ«æé«˜æˆ–é™ä½å½“å‰ç¬‘è¯çš„ç­‰çº§ã€‚ æˆ‘ä»¬è¿˜æ·»åŠ äº†â€œ Chuck Whoï¼Ÿâ€æŒ‰é’®ï¼Œè¯¥æŒ‰é’®å°†åœ¨Webè§†å›¾éƒ¨åˆ†ä¸­å¡«å……åŠŸèƒ½ã€‚ <br><br> åœ¨MainViewController.swiftä¸­ï¼Œæ’å…¥åˆå§‹åŒ–ä»£ç votUpButtonï¼ŒvotDownButtonå’ŒchuckWhoButtonã€‚ <br><br>  <b>MainViewController.swift</b> <br><br><pre> <code class="hljs swift"><span class="hljs-built_in"><span class="hljs-built_in">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jokeLabel: <span class="hljs-type"><span class="hljs-type">UILabel!</span></span> = â€¦ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jokeID: <span class="hljs-type"><span class="hljs-type">Int!</span></span> <span class="hljs-built_in"><span class="hljs-built_in">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> activityView: <span class="hljs-type"><span class="hljs-type">UIActivityIndicatorView!</span></span> = â€¦ <span class="hljs-comment"><span class="hljs-comment">//</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">    lazy var stackView: UIStackView! = â€¦</span></span></code> </pre><br> æŒ‰é’®åˆå§‹åŒ–ä»£ç  <br><pre> <code class="hljs pgsql">lazy var voteUpButton: UIButton! = { // (L<span class="hljs-number"><span class="hljs-number">.1</span></span>) let button: UIButton = UIButton(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: .<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>) // (L<span class="hljs-number"><span class="hljs-number">.2</span></span>) button.setTitle("Vote Up", <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: .normal) button.sizeToFit() button.addTarget(self, action: #selector(self.voteUp), <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: .touchUpInside) // (L<span class="hljs-number"><span class="hljs-number">.3</span></span>) self.<span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.addSubview(button) // (L<span class="hljs-number"><span class="hljs-number">.4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> button // (L<span class="hljs-number"><span class="hljs-number">.5</span></span>) }() lazy var voteDownButton: UIButton! = { let button: UIButton = UIButton(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: .<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>) button.setTitle("Vote Down", <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: .normal) button.sizeToFit() button.addTarget(self, action: #selector(self.voteDown), <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: .touchUpInside) self.<span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.addSubview(button) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> button }() lazy var chuckWhoButton: UIButton! = { let button: UIButton = UIButton(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: .<span class="hljs-keyword"><span class="hljs-keyword">system</span></span>) button.setTitle("Chuck Who?", <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: .normal) button.sizeToFit() button.addTarget(self, action: #selector(self.chuckWho), <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: .touchUpInside) self.<span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.addSubview(button) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> button }()</code> </pre> <br> æ‰€æœ‰ä¸‰ä¸ªæŒ‰é’®çš„åˆå§‹åŒ–ä»£ç éƒ½ç›¸åŒã€‚ <br><br>  ï¼ˆL.1ï¼‰æˆ‘ä»¬å£°æ˜ä¸€ä¸ªæƒ°æ€§å˜é‡ï¼Œå¹¶ä½¿ç”¨é—­åŒ…å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚ <br>  ï¼ˆL.2ï¼‰åœ¨é—­åŒ…å†…éƒ¨ï¼Œæˆ‘ä»¬ä¸ºæŒ‰é’®å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä¸€ä¸ªç³»ç»Ÿç±»å‹ï¼ŒæŒ‡å®šåç§°å’Œå¤§å°ã€‚ <br>  ï¼ˆL.3ï¼‰å½“æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶ï¼Œæˆ‘ä»¬å°†å…¶ä¸æŒ‰é’®ç›¸å…³è”ã€‚ <br>  ï¼ˆL.4ï¼‰æ·»åŠ åˆ°è§†å›¾å±‚æ¬¡ç»“æ„ã€‚ <br>  ï¼ˆL.5ï¼‰ç„¶åï¼Œæˆ‘ä»¬å°†æ­¤å±€éƒ¨å˜é‡åˆ†é…ç»™æˆ‘ä»¬çš„æƒ°æ€§å˜é‡ã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œåœ¨MainViewController.swiftä¸­ï¼Œæ’å…¥æŒ‰é’®çš„æ–¹æ³•ä»£ç  <br><br>  <b>MainViewController.swift</b> <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">retrieveRandomJokes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { â€¦ } <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">    } // end of class MainViewController</span></span></code> </pre><br> æŒ‰é’®çš„æ–¹æ³•ä»£ç  <br><pre> <code class="hljs powershell">func voteUp() { let http: HTTPCommunication = HTTPCommunication() // (M.<span class="hljs-number"><span class="hljs-number">1</span></span>) let params: [<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>] = [<span class="hljs-string"><span class="hljs-string">"joke_id"</span></span>: <span class="hljs-type"><span class="hljs-type">self.jokeID</span></span>, <span class="hljs-string"><span class="hljs-string">"vote"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>] // (M.<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let url = URL(string: <span class="hljs-string"><span class="hljs-string">"http://example.com/rater/vote"</span></span>) { // (M.<span class="hljs-number"><span class="hljs-number">3</span></span>) http.postURL(url, params: params) { (<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> // (M.<span class="hljs-number"><span class="hljs-number">4</span></span>) print(<span class="hljs-string"><span class="hljs-string">"\(data). Voted Up"</span></span>) } } } func voteDown() { let http: HTTPCommunication = HTTPCommunication() let params: [<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>] = [<span class="hljs-string"><span class="hljs-string">"joke_id"</span></span>: <span class="hljs-type"><span class="hljs-type">self.jokeID</span></span>, <span class="hljs-string"><span class="hljs-string">"vote"</span></span>: -<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let url = URL(string: <span class="hljs-string"><span class="hljs-string">"http://example.com/rater/vote"</span></span>) { http.postURL(url, params: params) { (<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> print(<span class="hljs-string"><span class="hljs-string">"\(data). Voted Down"</span></span>) } } } func chuckWho() { }</code> </pre> <br> ä¸Šä¸‹è¡¨å†³æ–¹æ³•çš„ä»£ç ç›¸åŒã€‚ <br><br>  ï¼ˆM.1ï¼‰åˆ›å»ºç”¨äºä¸æœåŠ¡å™¨é€šä¿¡çš„ç±»å¯¹è±¡ã€‚ <br>  ï¼ˆM.2ï¼‰æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‚æ•°å­—å…¸ï¼Œå…¶ä¸­åŒ…æ‹¬æˆ‘ä»¬è¦æŠ•ç¥¨æ”¯æŒçš„ç¬‘è¯çš„IDï¼Œè€ŒæŠ•ç¥¨çš„å®é™…å€¼ä¸º+1æˆ–-1ã€‚ <br>  ï¼ˆM.3ï¼‰æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»åŸ¹è®­åŸŸ<code>http://example.com/rater/vote.</code>çš„åœ°å€æ ä¸­å®‰å…¨è·å–ç½‘å€<code>http://example.com/rater/vote.</code> <br>  ï¼ˆM.4ï¼‰ç„¶åæˆ‘ä»¬é€šè¿‡POSTå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œä»¥è·å–æˆ‘ä»¬çš„å‚æ•°urlã€‚ å¹¶åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤ºæŒ‡ç¤ºè¯·æ±‚å·²å®Œæˆçš„è¡Œã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œåœ¨MainViewController.swiftä¸­ï¼Œè€ƒè™‘å¯¹UIæ‰€åšçš„æ›´æ”¹ï¼Œé‡å†™configStackViewæ–¹æ³•çš„ä»£ç ã€‚ <br><br>  <b>MainViewController.swift</b> <br><br><pre> <code class="hljs powershell">func configStackView() -&gt; UIStackView { let innerStackView: UIStackView = UIStackView(arrangedSubviews: [<span class="hljs-type"><span class="hljs-type">self.voteUpButton</span></span>, <span class="hljs-type"><span class="hljs-type">self.voteDownButton</span></span>]) // (N.<span class="hljs-number"><span class="hljs-number">1</span></span>) innerStackView.axis = .horizontal // (N.<span class="hljs-number"><span class="hljs-number">2</span></span>) innerStackView.distribution = .fillEqually let mainStackView: UIStackView = UIStackView(arrangedSubviews: [<span class="hljs-type"><span class="hljs-type">self.jokeLabel</span></span>, <span class="hljs-type"><span class="hljs-type">innerStackView</span></span>, <span class="hljs-type"><span class="hljs-type">self.chuckWhoButton</span></span>]) // (N.<span class="hljs-number"><span class="hljs-number">3</span></span>) mainStackView.spacing = <span class="hljs-number"><span class="hljs-number">50</span></span> // (N.<span class="hljs-number"><span class="hljs-number">4</span></span>) mainStackView.axis = .vertical mainStackView.distribution = .fillEqually self.view.addSubview(mainStackView) // (N.<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mainStackView }</code> </pre> <br>  ï¼ˆN.1ï¼‰åˆ›å»ºä¸€ä¸ªinnerStackViewï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªç”¨äºæŠ•ç¥¨çš„æŒ‰é’®ã€‚ <br>  ï¼ˆN.2ï¼‰æˆ‘ä»¬æš´éœ²å‚ç›´è½´ï¼› åˆ†å¸ƒæ˜¯ç›¸åŒçš„ã€‚ <br>  ï¼ˆN.3ï¼‰åœ¨ä¸»mainStackViewä¸­ï¼Œä»æœ€åä¸€éƒ¨åˆ†å‘æ ‡ç­¾æ·»åŠ innerStackViewå’Œå…³äºChuck Norrisçš„æŒ‰é’®ã€‚ <br>  ï¼ˆN.4ï¼‰é…ç½®mainStackViewã€‚ <br>  ï¼ˆN.5ï¼‰å°†mainStackViewæ·»åŠ åˆ°è§†å›¾å±‚æ¬¡ç»“æ„ã€‚ <br><br> æˆ‘ä»¬å¯åŠ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œç„¶åçœ‹åˆ°å¦‚å›¾æ‰€ç¤ºçš„ç•Œé¢ã€‚  1ä¸ª <br><br><img src="https://habrastorage.org/webt/wj/nv/ur/wjnvurcfmrxazb2lhifxl689zqa.png"><br>  <i>å›¾1æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç•Œé¢å¸¦æœ‰æ·»åŠ çš„æŠ•ç¥¨æŒ‰é’®</i> <br><br> æˆ‘ä»¬éªŒè¯åœ¨å¯¹ä¸€ä¸ªç¬‘è¯æŠ•ç¥¨èµæˆæˆ–åå¯¹æ—¶ï¼Œæ§åˆ¶å°ä¸­ä¼šæ˜¾ç¤ºä»¥ä¸‹æ¶ˆæ¯ï¼š <br><br> <code>345 bytes. Voted Up</code> <br> <br> æˆ– <br><br> <code>345 bytes. Voted Down</code> <br> <br> è¡¨ç¤ºå·²æˆåŠŸå®Œæˆå¯¹æœåŠ¡å™¨çš„POSTè¯·æ±‚ã€‚ <br><br> æˆ‘ä»¬ä½¿ç”¨icndb APIå’ŒGET HTTPåŠ¨è¯ç¼–å†™äº†ä¸€ä¸ªç©ç¬‘åº”ç”¨ç¨‹åºã€‚ æˆ‘ä»¬èƒ½å¤Ÿåœ¨UIViewä¸Šæ˜¾ç¤ºè¿™äº›ç¬‘è¯ï¼Œå¹¶ä¸”æ¯ä¸ªç¬‘è¯éƒ½å€¼å¾—èµèµã€‚ è¿™äº›æ“ä½œå°†POSTè¯·æ±‚å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œè¿™åº”è¯¥ä¿å­˜æˆ‘ä»¬çš„ä¼°è®¡ã€‚ <br><br><h2> ä½¿ç”¨webViewsæ˜¾ç¤ºç½‘é¡µ </h2><br> æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªwebViewæ¥æ˜¾ç¤ºæœ‰å…³Chuck Norrisçš„ç»´åŸºç™¾ç§‘é¡µé¢ã€‚ è½»è§¦æŒ‰é’®ï¼Œå¥¹å°±ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ <br><br> åœ¨WebViewController.swiftæ–‡ä»¶ä¸­ï¼Œç¼–å†™ä»¥ä¸‹å‡½æ•°å­˜æ ¹ï¼š <br><br>  <b>WebViewController.swift</b> <br><br><pre> <code class="hljs haskell"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UIKit class WebViewController: UIViewController { lazy var webView: UIWebView = { // (<span class="hljs-type"><span class="hljs-type">O</span></span>.1) self.configWebView() }() lazy var toolbar: UIToolbar = { // (<span class="hljs-type"><span class="hljs-type">O</span></span>.2) self.configToolbar() }() override func viewDidLoad() { super.viewDidLoad() } func back() { // (<span class="hljs-type"><span class="hljs-type">O</span></span>.3) self.webView.goBack() } func forward() { self.webView.goForward() } } extension WebViewController { func configWebView() -&gt; UIWebView { // (<span class="hljs-type"><span class="hljs-type">O</span></span>.4) } func configToolbar() -&gt; UIToolbar { // (<span class="hljs-type"><span class="hljs-type">O</span></span>.5) } func configConstraints() { // (<span class="hljs-type"><span class="hljs-type">O</span></span>.6) } }</code> </pre> <br>  ï¼ˆO.1ï¼‰æˆ‘ä»¬ä¸ºwebViewåˆ›å»ºæƒ°æ€§å˜é‡ <br>  ï¼ˆO.2ï¼‰å’Œå·¥å…·æ ã€‚ <br>  ï¼ˆO.3ï¼‰æˆ‘ä»¬åˆ›å»ºå‘å‰å’Œå‘åçš„æ–¹æ³•ï¼Œç”¨äºå¯¼èˆªé“¾æ¥è®¿é—®çš„å†å²è®°å½•ã€‚ <br>  ï¼ˆO.4ï¼‰æˆ‘ä»¬åœ¨æ‰©å±•ä¸­æ·»åŠ äº†webViewåˆå§‹åŒ–æ–¹æ³• <br>  ï¼ˆO.5ï¼‰å’Œå·¥å…·æ  <br>  ï¼ˆO.6ï¼‰å’Œæ¥å£çš„çº¦æŸã€‚ <br><br> ç°åœ¨æˆ‘ä»¬ç»˜åˆ¶æ¯ä¸ªå‡½æ•°çš„ä»£ç ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configWebView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIWebView</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> webView: <span class="hljs-type"><span class="hljs-type">UIWebView</span></span> = <span class="hljs-type"><span class="hljs-type">UIWebView</span></span>() <span class="hljs-comment"><span class="hljs-comment">// (P.1) self.view.addSubview(webView) return webView }</span></span></code> </pre> <br>  ï¼ˆç¬¬1é¡µï¼‰æˆ‘ä»¬åˆå§‹åŒ–webViewå¹¶å°†è§†å›¾æ·»åŠ åˆ°å±‚â€‹â€‹æ¬¡ç»“æ„ä¸­ã€‚ <br><br><pre> <code class="hljs smalltalk">func configToolbar() -&gt; <span class="hljs-type"><span class="hljs-type">UIToolbar</span></span> { let toolbar: <span class="hljs-type"><span class="hljs-type">UIToolbar</span></span> = <span class="hljs-type"><span class="hljs-type">UIToolbar</span></span>(frame: <span class="hljs-type"><span class="hljs-type">CGRect</span></span>.zero) // (<span class="hljs-type"><span class="hljs-type">Q</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>) let backButton: <span class="hljs-type"><span class="hljs-type">UIBarButtonItem</span></span> = <span class="hljs-type"><span class="hljs-type">UIBarButtonItem</span></span>(title: <span class="hljs-comment"><span class="hljs-comment">"&lt;"</span></span>, style: .plain, target: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, action: <span class="hljs-symbol"><span class="hljs-symbol">#selector</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.back)) // (<span class="hljs-type"><span class="hljs-type">Q</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>) let forwardButton: <span class="hljs-type"><span class="hljs-type">UIBarButtonItem</span></span> = <span class="hljs-type"><span class="hljs-type">UIBarButtonItem</span></span>(title: <span class="hljs-comment"><span class="hljs-comment">"&gt;"</span></span>, style: .plain, target: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, action: <span class="hljs-symbol"><span class="hljs-symbol">#selector</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.forward)) toolbar.setItems([backButton, forwardButton], animated: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) // (<span class="hljs-type"><span class="hljs-type">Q</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) toolbar.backgroundColor = <span class="hljs-type"><span class="hljs-type">UIColor</span></span>.lightGray // (<span class="hljs-type"><span class="hljs-type">Q</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.addSubview(toolbar) return toolbar }</code> </pre> <br>  ï¼ˆQ.1ï¼‰åˆ›å»ºä¸€ä¸ªé›¶æ¡†æ¶çš„å·¥å…·æ ã€‚ <br>  ï¼ˆé—®é¢˜2ï¼‰æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæŒ‰é’®æ¥æµè§ˆè®¿é—®é“¾æ¥çš„å†å²è®°å½•ã€‚ ä½¿ç”¨åç§°â€œ &lt;â€å’Œâ€œ&gt;â€ï¼Œå¹¶å°†åŠ¨ä½œé™„åŠ åˆ°webViewä¸­çš„ç›¸åº”æ–¹æ³•ã€‚ <br>  ï¼ˆç¬¬3å­£åº¦ï¼‰å°†è¿™äº›æŒ‰é’®æ·»åŠ åˆ°å·¥å…·æ ã€‚ <br>  ï¼ˆQ.4ï¼‰è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼ˆå¦‚å¯¼èˆªæ ï¼‰ä¸ºæµ…ç°è‰²ã€‚ å¹¶å°†è§†å›¾æ·»åŠ åˆ°å±‚â€‹â€‹æ¬¡ç»“æ„ã€‚ <br><br><pre> <code class="hljs powershell">func configConstraints() { self.webView.translatesAutoresizingMaskIntoConstraints = false // (R.<span class="hljs-number"><span class="hljs-number">1</span></span>) NSLayoutConstraint.activate([ // (<span class="hljs-type"><span class="hljs-type">R.2</span></span>) <span class="hljs-type"><span class="hljs-type">self.webView.topAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalTo</span></span>: <span class="hljs-type"><span class="hljs-type">self.topLayoutGuide.topAnchor</span></span>), <span class="hljs-type"><span class="hljs-type">self.webView.leadingAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalTo</span></span>: <span class="hljs-type"><span class="hljs-type">self.view.leadingAnchor</span></span>), <span class="hljs-type"><span class="hljs-type">self.webView.trailingAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalTo</span></span>: <span class="hljs-type"><span class="hljs-type">self.view.trailingAnchor</span></span>), <span class="hljs-type"><span class="hljs-type">self.webView.bottomAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalTo</span></span>: <span class="hljs-type"><span class="hljs-type">self.toolbar.topAnchor</span></span>) ]) self.toolbar.translatesAutoresizingMaskIntoConstraints = false NSLayoutConstraint.activate([ // (<span class="hljs-type"><span class="hljs-type">R.3</span></span>) <span class="hljs-type"><span class="hljs-type">self.toolbar.leadingAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalTo</span></span>: <span class="hljs-type"><span class="hljs-type">self.view.leadingAnchor</span></span>), <span class="hljs-type"><span class="hljs-type">self.toolbar.trailingAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalTo</span></span>: <span class="hljs-type"><span class="hljs-type">self.view.trailingAnchor</span></span>), <span class="hljs-type"><span class="hljs-type">self.toolbar.bottomAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalTo</span></span>: <span class="hljs-type"><span class="hljs-type">self.view.bottomAnchor</span></span>), <span class="hljs-type"><span class="hljs-type">self.toolbar.heightAnchor.constraint</span></span>(<span class="hljs-type"><span class="hljs-type">equalToConstant</span></span>: <span class="hljs-number"><span class="hljs-number">44.0</span></span>) ]) }</code> </pre> <br>  ï¼ˆR.1ï¼‰ç¦ç”¨è‡ªåŠ¨è°ƒæ•´å¤§å°çš„è’™ç‰ˆï¼Œä»¥å…ä¸æˆ‘ä»¬çš„çº¦æŸå†²çª <br>  ï¼ˆR.2ï¼‰å¯¹äºwebViewï¼Œé…ç½®è§†å›¾çš„æ‰€æœ‰å››ä¸ªä¾§é¢ã€‚ <br>  ï¼ˆR.3ï¼‰å¯¹äºå·¥å…·æ ï¼Œé…ç½®è§†å›¾çš„ä¸‰ä¸ªä¾§é¢ï¼ˆé¡¶éƒ¨é™¤å¤–ï¼‰ï¼Œä½†è¿˜è¦å°†é«˜åº¦è®¾ç½®ä¸ºæ ‡å‡†å°ºå¯¸44.0ã€‚ <br><br> å¹¶é‡å†™ä»£ç ViewDidLoadï¼ˆï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewDidLoad() <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.configConstraints() <span class="hljs-comment"><span class="hljs-comment">// (S.1) if let url = URL(string: "http://en.wikipedia.org/wiki/Chuck_Norris") { // (S.2) let request: URLRequest = URLRequest(url: url) // (S.3) self.webView.loadRequest(request) // (S.4) } }</span></span></code> </pre> <br>  ï¼ˆS.1ï¼‰è°ƒç”¨çº¦æŸçš„è®¾ç½®ã€‚ <br>  ï¼ˆS.2ï¼‰ä»Wikipediaé¡µé¢çš„åœ°å€æ ä¸­å®‰å…¨è·å–ç½‘å€<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">zh.wikipedia.org/wiki/Chuck_Norris</a> <br>  ï¼ˆS.3ï¼‰æˆ‘ä»¬ä»URLåˆ›å»ºè¯·æ±‚ã€‚ <br>  ï¼ˆS.4ï¼‰ç„¶åæˆ‘ä»¬åœ¨webViewä¸­æ‰§è¡Œç»™å®šçš„è¯·æ±‚ã€‚ <br><br> æˆ‘ä»¬è¿”å›MainViewControllerå¹¶ç”¨è°ƒç”¨æœ‰å…³Chuck Norrisçš„ä¿¡æ¯çš„æ–¹æ³•å¡«å……å®ƒã€‚ <br><br>  <b>MainViewController.swift</b> <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">chuckWho</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController?.show(<span class="hljs-type"><span class="hljs-type">WebViewController</span></span>(), sender: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-comment"><span class="hljs-comment">// (T.1) }</span></span></code> </pre> <br>  ï¼ˆT.1ï¼‰å½“æ‚¨åœ¨navigationControllerå †æ ˆä¸Šå•å‡»æ­¤æŒ‰é’®æ—¶ï¼Œè¯·æ”¾ç½®ä¸€ä¸ªæ–°çš„webViewå®ä¾‹ã€‚ <br><br> å›¾ å›¾2æ¼”ç¤ºäº†webViewåœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­çš„å¤–è§‚ã€‚ <br><br><img src="https://habrastorage.org/webt/cj/tv/-a/cjtv-a57shzmktsq3btfccu6hme.png"><br>  <i>å›¾</i>  <i>2.æˆ‘ä»¬å·²å®ç°çš„webViewçš„æœ€ç»ˆè§†å›¾</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN415615/">https://habr.com/ru/post/zh-CN415615/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN415599/index.html">å°åº¦ä¹Ÿæƒ³å¾—åˆ°æ°¦3</a></li>
<li><a href="../zh-CN415601/index.html">Kubernetes HAé›†ç¾¤ä¸å®¹å™¨åŒ– è¿˜æ˜¯æ²¡æœ‰dockerçš„ç”Ÿæ´»ï¼Ÿ</a></li>
<li><a href="../zh-CN415605/index.html">æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Exadataä¿å­˜å¡å¤„ç†</a></li>
<li><a href="../zh-CN415611/index.html">PKIï¼šGCryptå’ŒKSBAåº“æ˜¯å¯¹OpenSSLçš„æ›¿ä»£ï¼Œå…·æœ‰å¯¹ä¿„ç½—æ–¯å¯†ç çš„æ”¯æŒã€‚ å»¶ç»­æ€§</a></li>
<li><a href="../zh-CN415613/index.html">ä¸ºä»€ä¹ˆä¸åº”è¯¥è´­ä¹°LEDåŠç¯</a></li>
<li><a href="../zh-CN415617/index.html">åœ¨Delphiä¸­ä½¿ç”¨InternetPCools FPCåº“</a></li>
<li><a href="../zh-CN415619/index.html">è‹¹æœå’Œä¸‰æ˜Ÿå®Œæˆäº†é•¿è¾¾7å¹´çš„ä¸“åˆ©æˆ˜</a></li>
<li><a href="../zh-CN415621/index.html">é‡‡çŸ¿ç›‘æ§ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN415623/index.html">è½»äºç©ºæ°”çš„é£æœºå‚ç›´é£è¡Œçš„åŠ¨åŠ›å­¦</a></li>
<li><a href="../zh-CN415625/index.html">Kubernetesï¼šç½‘ç»œç ”è®¨ä¼šï¼ˆ7æœˆ4æ—¥19:30ï¼‰å’Œå¯†é›†ï¼ˆ8æœˆ3-5æ—¥ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>