<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßë‚Äçü§ù‚Äçüßë üïú üôÅ Recomenda√ß√µes da API REST - Exemplos de design de servi√ßos da Web em Java e Spring üë®‚Äçüëß‚Äçüë¶ üéµ ‚ú¥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No √∫ltimo artigo desta s√©rie, voc√™ aprender√° sobre as recomenda√ß√µes da API REST e exemplos de desenvolvimento do Java e Spring Web Services. 

 Ao des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Recomenda√ß√µes da API REST - Exemplos de design de servi√ßos da Web em Java e Spring</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483374/">  No √∫ltimo artigo desta s√©rie, voc√™ aprender√° sobre as recomenda√ß√µes da API REST e exemplos de desenvolvimento do Java e Spring Web Services. <br><br>  Ao desenvolver uma boa API REST, √© importante ter bons microsservi√ßos. <br>  Como voc√™ desenvolve sua API REST?  Quais s√£o as melhores pr√°ticas? <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/2l/pg/rq/2lpgrq94xumpddkf6ivlt3ekkgu.png"><br><h3>  Voc√™ aprender√°: </h3><br><ul><li>  Como desenvolver uma boa API REST? </li><li>  O que devo pensar ao desenvolver uma API REST? </li><li>  Quais s√£o as melhores pr√°ticas para o desenvolvimento de servi√ßos web RESTful? </li></ul><br><h3>  API REST </h3><br>  Este √© o √∫ltimo artigo de uma s√©rie de artigos sobre a API REST: <br><br><ul><li>  <a href="https://habr.com/ru/post/483202/">Introdu√ß√£o √† API REST - Servi√ßos da Web RESTful</a> </li><li>  <a href="https://habr.com/ru/post/483204/">Diferen√ßas entre REST e SOAP</a> </li><li>  <a href="https://habr.com/ru/post/483206/">Desenvolvimento da API REST - o que √© primeiro contrato (primeiro contrato)?</a> </li><li>  <a href="https://habr.com/ru/post/483322/">Desenvolvimento da API REST - o que √© o Code First (code first)?</a> </li><li>  <a href="https://habr.com/post/483328/">API REST - O que √© o HATEOAS?</a> </li><li>  Recomenda√ß√µes da API REST - Exemplos de design de servi√ßos da Web em Java e Spring </li></ul><br><h3>  Use a primeira abordagem do consumidor </h3><br>  Quem usar√° seu servi√ßo?  Atendimento ao consumidor. <br><br>  Voc√™ v√™ o servi√ßo da perspectiva do consumidor? <br><br><ul><li>  Se voc√™ estiver desenvolvendo uma API, seu consumidor pode entender sua API? </li><li>  Se voc√™ publicar seus recursos, o consumidor poder√° encontr√°-los e acess√°-los? </li><li>  O consumidor pode entender seus URIs? </li><li>  Que tipo de servi√ßo voc√™ oferece? </li><li>  √â um aplicativo m√≥vel ou web? </li><li>  Quais consumidores voc√™ espera e esses tipos de consumidores podem mudar no futuro? </li><li>  Se voc√™ estiver implementando algo como HATEOAS, pense em como seus clientes o usar√£o antes de implement√°-lo. </li></ul><br><blockquote><ul><li>  <b>O mais importante √© ter uma excelente documenta√ß√£o</b> </li><li>  <b>Facilite as coisas para que seus clientes economizem seu tempo.</b> </li><li>  <b>Quanto mais consumidores puderem fazer por conta pr√≥pria, menos trabalho para voc√™.</b> </li></ul><br></blockquote><br>  Sempre que voc√™ tiver uma discuss√£o ou revis√£o de servi√ßo, coloque os requisitos do cliente em primeiro lugar. <br><br><h3>  Use a primeira abordagem do contrato </h3><br>  O que √© um contrato? <br><br>  O criador do servi√ßo da web √© considerado <b>um provedor de servi√ßos</b> .  Um aplicativo que usa um servi√ßo da Web √© um <b>consumidor do servi√ßo</b> .  <b>Um contrato</b> √© um acordo entre um provedor e um consumidor sobre um servi√ßo. <br><br><img src="https://habrastorage.org/webt/d-/5f/on/d-5fon8kmzaf6f_7g-bn7fsbofe.png"><br><br>  Para usar o servi√ßo corretamente, o consumidor do servi√ßo deve entender completamente o contrato.  O contrato inclui detalhes de muitos aspectos do servi√ßo, como: <br><br><ul><li>  Como chamar um servi√ßo da web? </li><li>  Que tipo de transporte √© usado? </li><li>  Quais s√£o as estruturas de solicita√ß√£o e resposta? </li></ul><br>  Isso tamb√©m √© chamado de <b>defini√ß√£o de servi√ßo</b> . <br><br>  Na primeira abordagem do contrato, voc√™ primeiro define um contrato de servi√ßo e depois implementa apenas o servi√ßo. <br><br><h3>  Primeiro contrato com WSDL </h3><br>  Por exemplo, ao definir servi√ßos da web SOAP, voc√™ usa o WSDL para definir o contrato. <br><br><img src="https://habrastorage.org/webt/ou/st/86/oust86bvzc87vsg-k229x1ujl14.png"><br><br>  O WSDL determina quais s√£o os pontos de extremidade do servi√ßo, as opera√ß√µes que voc√™ publica e as estruturas de solicita√ß√£o e resposta. <br><br><h3>  Contrato primeiro com Swagger / Open API </h3><br>  Quando voc√™ usa servi√ßos da web RESTful, o Swagger √© uma ferramenta popular para documentar seus servi√ßos da web. <br><br><img src="https://habrastorage.org/webt/we/tc/3x/wetc3x4x6unbgve0wcaxdjdbkp8.png"><br><img src="https://habrastorage.org/webt/l-/2m/h_/l-2mh_uh6txdtyekd1xn585mmvw.png"><br>  O Swagger permite determinar quais recursos voc√™ fornece como parte da sua API.  Inclui os detalhes de cada opera√ß√£o, por exemplo, se usa XML, JSON ou ambos.  Um esbo√ßo de resposta tamb√©m est√° l√°. <br><br><img src="https://habrastorage.org/webt/9e/px/uh/9epxuhh57oelrv-dupcqib0t6ho.png"><br><br>  Ele tamb√©m fornece informa√ß√µes detalhadas sobre os c√≥digos de resposta que ele suporta.  Voc√™ tamb√©m pode ver que este recurso espec√≠fico, <b>/ jpa / users</b> : <br><br><img src="https://habrastorage.org/webt/gi/ig/pk/giigpknfhlsy8qiscbblp_eigdw.png"><br><br>  suporta opera√ß√£o GET.  De fato, ele tamb√©m suporta a opera√ß√£o POST: <br><br><img src="https://habrastorage.org/webt/ox/9o/ch/ox9ochxtkao2ghxalyyi_o6oy4m.png"><br><br>  O esquema de resposta, se este recurso estiver dispon√≠vel, ser√°: <br><br><img src="https://habrastorage.org/webt/lf/gq/xo/lfgqxoi0txeqlqyg8vmblmppwdq.png"><br><br>  A defini√ß√£o do objeto Usu√°rio est√° presente no contrato Swagger como: <br><br><img src="https://habrastorage.org/webt/d3/s0/nm/d3s0nmktz3so7vqye4t8vqizwm4.png"><br><br>  Inclui atributos: data de <b>nascimento</b> , <b>identifica√ß√£o</b> , <b>nome</b> e uma s√©rie de mensagens de postagens.  Alguns campos tamb√©m incluem um campo de descri√ß√£o dentro deles. <br><br>  Na primeira abordagem do contrato, antes de implementar o servi√ßo, voc√™ manualmente ou usando o aplicativo cria a defini√ß√£o que o Swagger criou. <br><br><h3>  Benef√≠cios da primeira abordagem do contrato </h3><br>  Usando a primeira abordagem do contrato, voc√™ pensa em seus clientes e em como eles podem usar esse servi√ßo.  Voc√™ n√£o est√° inicialmente preocupado com os detalhes da implementa√ß√£o. <br><br>  Se, no est√°gio inicial, voc√™ atribui grande import√¢ncia √† implementa√ß√£o, os detalhes t√©cnicos penetram na defini√ß√£o do seu servi√ßo. <br><br>  Voc√™ precisa garantir que a defini√ß√£o do seu servi√ßo n√£o dependa da plataforma que voc√™ est√° usando, seja Java, .NET ou qualquer outro. <br><br><h3>  Definir padr√µes da organiza√ß√£o para a API REST </h3><br>  Uma orienta√ß√£o importante para seus padr√µes organizacionais √© o YARAS. <br><br><img src="https://habrastorage.org/webt/bu/9e/9s/bu9e9sa0bryvgm6g8yhhtabcdf0.png"><br><br>  YARAS significa <b>ainda outro padr√£o de API RESTful</b> .  O YARAS fornece os padr√µes, diretrizes e conven√ß√µes que devem ser seguidas ao desenvolver servi√ßos da web RESTful.  Ele d√° recomenda√ß√µes para as seguintes coisas: <br><br><ul><li>  Como voc√™ deve nomear seus servi√ßos </li><li>  Como voc√™ deve estruturar sua solicita√ß√£o e resposta </li><li>  Como voc√™ deve implementar filtragem, classifica√ß√£o, pagina√ß√£o e outras a√ß√µes </li><li>  Como voc√™ deve abordar o versionamento </li><li>  Como voc√™ precisa abordar a documenta√ß√£o da API </li></ul><br><h3>  Abordagem unificada para o desenvolvimento de servi√ßos </h3><br>  Voc√™ precisa resolver muitos problemas complexos antes de come√ßar a projetar servi√ßos da web RESTful.  Todas as op√ß√µes acima, voc√™ precisa descobrir. <br><br>  A lideran√ßa da sua organiza√ß√£o n√£o deseja que as equipes que lidam com recursos diferentes tenham abordagens diferentes para essas coisas. <br><br>  Por exemplo, √© indesej√°vel para a Equipe A organizar o controle de vers√£o com base em par√¢metros de consulta e a Equipe B usar o controle de vers√£o com base no URI. <br><br>  Portanto, √© importante que voc√™ tenha definido claramente os padr√µes organizacionais para sua abordagem aos servi√ßos da web RESTful. <br><br><h3>  Personaliza√ß√£o YARAS SOB necessidades organizacionais </h3><br>  O bom do YARAS √© que ele pode ser personalizado para atender √†s necessidades espec√≠ficas da organiza√ß√£o.  Por exemplo, voc√™ pode: <br><br><ul><li>  Configure como devem ser os corpos de solicita√ß√£o e resposta. </li><li>  Escolha um sistema de controle de vers√£o espec√≠fico </li></ul><br>  Como o YARAS possui uma cobertura bastante abrangente, voc√™ pode ter certeza de que n√£o perdeu uma √∫nica decis√£o importante. <br><br><h3>  Escolhendo uma estrutura corporativa padr√£o da API REST </h3><br>  As estruturas t√≠picas usadas para criar servi√ßos da Web RESTful no mundo Java s√£o Spring MVC, Spring REST e JAX-RS. <br><br>  Se voc√™ criar um aplicativo de estrutura / arqu√©tipo / refer√™ncia espec√≠fico da organiza√ß√£o que atenda aos padr√µes comuns da organiza√ß√£o na parte superior da plataforma API REST preferida, isso permitir√° que as equipes adiram facilmente aos padr√µes comuns. <br><br>  Os recursos t√≠picos incluem: <br><br><ul><li>  Estruturas de solicita√ß√£o e resposta </li><li>  Tratamento de erros </li><li>  filtragem </li><li>  Pesquisar </li><li>  Versionamento </li><li>  Suporte para respostas falsas </li><li>  Hateoas </li></ul><br>  A estrutura padr√£o fornece uma abordagem unificada para projetar e implementar servi√ßos em toda a organiza√ß√£o. <br><br><h3>  Gerenciamento descentralizado da API REST </h3><br>  Crie um grupo de especialistas das equipes que criam a API REST e forme uma equipe de gerenciamento.  A equipe √© respons√°vel por <br><br><ul><li>  Melhorando os padr√µes da API REST </li><li>  Construindo / projetando sua estrutura de API REST </li></ul><br><h3>  Uso generalizado de HTTP </h3><br>  Sempre que voc√™ pensar em servi√ßos da web RESTful, pense em HTTP. <br><br>  O HTTP possui todos os recursos que ajudam a criar excelentes servi√ßos da web. <br><br><h4>  Use os m√©todos de solicita√ß√£o HTTP corretos </h4><br>  Pense nos m√©todos de solicita√ß√£o HTTP que voc√™ precisa usar.  Ao pensar em implementar uma opera√ß√£o, determine o recurso no qual ela deve ser executada e localize o m√©todo de solicita√ß√£o HTTP apropriado.  Voc√™ recupera detalhes, cria algo, atualiza algo existente ou exclui um existente? <br><br>  Usando m√©todos HTTP: <br><br><ul><li>  GET para obter </li><li>  POST para criar </li><li>  PUT para atualizar </li><li>  DELETE para excluir </li><li>  PATCH para atualiza√ß√µes parciais </li></ul><br><h4>  Use o status de resposta HTTP apropriado </h4><br>  Ao executar a opera√ß√£o, certifique-se de retornar o status de resposta correto. <br><br>  Por exemplo, quando um recurso espec√≠fico n√£o for encontrado, n√£o ative uma exce√ß√£o do servidor.  Em vez disso, envie o c√≥digo de resposta apropriado em uma mensagem de resposta, como <b>404</b> . <br><br>  Se realmente houver uma exce√ß√£o do servidor, envie o c√≥digo <b>500 de</b> volta. <br><br>  Se a valida√ß√£o falhar, envie o c√≥digo para a solicita√ß√£o inv√°lida. <br><br><h3>  Foco no desempenho </h3><br>  Cada recurso pode ter v√°rias representa√ß√µes - no formato XML ou JSON.  O consumidor do servi√ßo pode escolher a apresenta√ß√£o de sua escolha. <br><br>  O servi√ßo retorna 3 usu√°rios quando enviamos uma solicita√ß√£o GET.  Nesse caso, obtemos a representa√ß√£o JSON do recurso <b><i>/ users</i></b> . <br><br><img src="https://habrastorage.org/webt/gq/qn/jq/gqqnjqeoz1e_lo1vftv0qymzdje.png"><br><br>  Quando o consumidor n√£o indica uma visualiza√ß√£o preferida, usamos JSON. <br><br><img src="https://habrastorage.org/webt/ox/fr/b-/oxfrb-45qiilzqpul45nbdpqk6a.png"><br><br>  O consumidor pode enviar um cabe√ßalho Aceitar para indicar a exibi√ß√£o. <br><br><img src="https://habrastorage.org/webt/df/tz/0t/dftz0teguhajcobfnjsgs-elmhk.png"><br><br>  O corpo da resposta agora tem conte√∫do XML: <br><br><img src="https://habrastorage.org/webt/bw/ct/io/bwctiow8vaxwy2sik1-awmyhar0.png"><br><br><h3>  Use o plural </h3><br>  Sempre use o plural ao nomear recursos. <br><br>  Vejamos um exemplo simples.  Suponha que tenhamos um servi√ßo que hospeda um recurso do usu√°rio.  A seguir, descreve como acess√°-los: <br><br><ul><li>  Criar usu√°rio: <b>POST / users</b> </li><li>  Excluir usu√°rio: <b>DELETE / users / 1</b> </li><li>  Obter todos os usu√°rios: <b>GET / users</b> </li><li>  Obter um usu√°rio: <b>GET / users / 1</b> </li></ul><br>  A prefer√™ncia de v√°rios usu√°rios em rela√ß√£o ao usu√°rio torna o URI mais leg√≠vel. <br><br><ul><li>  Por exemplo, se usarmos <b>/ user em</b> vez de <b>/ users</b> para obter, <b>GET / user</b> n√£o passar√° a mensagem correta para o leitor. </li></ul><br><h3>  Crie boa documenta√ß√£o </h3><br>  Os consumidores precisam entender como fazer o melhor uso do servi√ßo, e a melhor maneira de ajud√°-los √© criar uma boa documenta√ß√£o. <br><br>  Os servi√ßos web SOAP podem usar a funcionalidade WSDL, enquanto os servi√ßos web RESTful t√™m op√ß√µes Swagger (agora o padr√£o de documenta√ß√£o da API aberta). <br><br>  A escolha de um formato √© apenas uma parte da cria√ß√£o de uma boa documenta√ß√£o.  O que tamb√©m √© importante √© o fornecimento da quantidade certa de informa√ß√µes para ajudar o consumidor. <br><br>  A documenta√ß√£o deve estar completa e incluir os seguintes pontos: <br><br><ul><li>  O que √© uma estrutura de solicita√ß√£o e resposta? </li><li>  Como um consumidor deve se autenticar? </li><li>  Quais s√£o os limites de uso? </li><li>  Indique todos os tipos de mensagens de resposta e c√≥digos de status correspondentes que podem ser esperados do servi√ßo. </li></ul><br><h3>  Crie um portal de documenta√ß√£o comum da API REST </h3><br>  Seria √∫til ter um portal de documenta√ß√£o da API REST comum para toda a organiza√ß√£o.  D√™ uma olhada em um desses portais: <br><br><img src="https://habrastorage.org/webt/3j/vm/bo/3jvmbovqx_sikaedwbkgzxe80yc.png"><br><br>  Esse portal re√∫ne todos os recursos dispon√≠veis na organiza√ß√£o.  Ter uma interface de usu√°rio como a interface do usu√°rio do Swagger ter√° seus benef√≠cios adicionais.  Usando a interface do usu√°rio do Swagger, voc√™ pode ver a documenta√ß√£o em mais detalhes: <br><br><img src="https://habrastorage.org/webt/xp/io/ox/xpiooxhstlexwhwjxqk9umd6yye.png"><br><br>  Isso pode ser usado mesmo por usu√°rios n√£o t√©cnicos.  As informa√ß√µes fornecidas aqui incluem: <br><br><ul><li>  Formato de resposta esperado </li><li>  Tipo de conte√∫do </li><li>  C√≥digos de resposta suportados </li></ul><br>  O formato da documenta√ß√£o no estilo de uma solicita√ß√£o / resposta ativa tamb√©m pode ser interessante. <br><br><h3>  Suporte de vers√£o </h3><br>  O controle de vers√£o implica grande complexidade para um servi√ßo da web.  Manter v√°rias vers√µes diferentes do mesmo servi√ßo da web √© muito dif√≠cil.  Tente evitar isso sempre que poss√≠vel. <br><br>  No entanto, em certos cen√°rios, o controle de vers√£o √© inevit√°vel. <br><br>  Vamos come√ßar examinando um servi√ßo de exemplo.  Suponha que inicialmente definimos um servi√ßo que tenha a classe <b>PersonV1 da</b> seguinte maneira: <br><br>  Esta vers√£o da classe n√£o leva em considera√ß√£o que um nome pode ter muitas subse√ß√µes, como nome e sobrenome.  Verifique isto: <br><br>  A segunda vers√£o da classe de origem foi atualizada para corrigir esta anomalia: <br><br>  N√£o podemos transferir imediatamente todo o servi√ßo para usar o <b>PersonV2</b> !  Pode haver outros consumidores que aguardam respostas no formato <b>PersonV1</b> . <br><br>  √â aqui que o controle de vers√£o √© necess√°rio. <br><br>  Vejamos agora as op√ß√µes que temos para o controle de vers√£o desses dois recursos. <br><br><h3>  Usando URIs diferentes </h3><br>  Temos uma op√ß√£o - usar URIs diferentes para esses recursos diferentes.  No c√≥digo do exame abaixo, usamos os URIs <b>v1 / person</b> e <b>v2 / person</b> para distingui-los: <br><br>  Se voc√™ executar uma solicita√ß√£o GET para o recurso <b>v1 / person</b> : <br><br><img src="https://habrastorage.org/webt/ro/xv/go/roxvgoo6pek2xv4wokws2zivir4.png"><br><br>  Voc√™ receber√° informa√ß√µes correspondentes √† <b>v1</b> .  Para outro recurso: <br><br><img src="https://habrastorage.org/webt/hn/yn/vh/hnynvhniet9iacsxsrikaa9pxj8.png"><br><br><h3>  Usando o par√¢metro de consulta </h3><br>  O segundo m√©todo de controle de vers√£o usa o par√¢metro de consulta: <br><br>  No URI <b>/ person / param</b> , se enviarmos o par√¢metro com <b>vers√£o = 1</b> , retornamos um recurso do tipo <b>PersonV1</b> : <br><br><img src="https://habrastorage.org/webt/sp/qe/1g/spqe1gs9bksyba0pmidzsndo1fm.png"><br><br>  Para o mesmo URI, o par√¢metro com <b>vers√£o = 2</b> retorna um recurso do tipo <b>PersonV2</b> : <br><br><img src="https://habrastorage.org/webt/2q/qt/q1/2qqtq1ci6j_pg4bc6brglrj4z88.png"><br><br>  Esse m√©todo √© chamado de controle de vers√£o usando par√¢metros de consulta. <br><br><h3>  Usando um cabe√ßalho (cabe√ßalho) </h3><br>  Outra maneira de fazer isso √© o controle de vers√£o, especificando um t√≠tulo.  Aqui, usamos um cabe√ßalho chamado <b>X-API-VERSION</b> e marcamos o URI como <b>/ person / header</b> .  Quando o valor do cabe√ßalho √© <b>1</b> , um recurso do tipo <b>PersonV1 √© retornado</b> : <br><br><img src="https://habrastorage.org/webt/d-/0b/ww/d-0bwwbim3yedwkmreql8hancrg.png"><br><br>  Quando seu valor √© <b>2</b> , um recurso do tipo <b>PersonV2</b> √© recuperado: <br><br><img src="https://habrastorage.org/webt/yz/_q/1-/yz_q1-fcemb3sqptsk4cd5p8kno.png"><br><br>  Usamos o atributo no cabe√ßalho da solicita√ß√£o para executar o controle de vers√£o para n√≥s. <br><br><h3>  Usando o cabe√ßalho Accept </h3><br>  O m√©todo final para criar vers√µes usa o cabe√ßalho Accept.  Se o consumidor incluir as informa√ß√µes da primeira vers√£o no cabe√ßalho Accept da solicita√ß√£o GET, o seguinte recurso ser√° retornado: <br><br><img src="https://habrastorage.org/webt/dz/yw/54/dzyw5423iw2i6ogaiund7wpl1wo.png"><br><br>  Caso contr√°rio, um recurso do tipo <b>PersonV2 ser√° retornado</b> : <br><br><img src="https://habrastorage.org/webt/3i/a4/wl/3ia4wlgl4dbx9fvpxvz3ho8ihxc.png"><br><br>  Esse m√©todo de controle de vers√£o √© denominado <b>Accept Header Versioning</b> ou <b>Media Type Versioning</b> , pois os tipos MIME geralmente s√£o o conte√∫do do cabe√ßalho Accept. <br><br><h3>  Compara√ß√£o de m√©todos de controle de vers√£o </h3><br>  At√© agora, vimos quatro tipos de m√©todos nas vers√µes: <br><br><ul><li>  Usando URIs diferentes </li><li>  Usando o par√¢metro de consulta </li><li>  Uso do cabe√ßalho </li><li>  Usando aceitar cabe√ßalho / tipo de m√≠dia </li></ul><br>  Qual √© o melhor?  A verdade √© que n√£o h√° uma resposta √∫nica para essa pergunta.  O fato √© que diferentes gigantes da Internet apadrinham diferentes tipos de vers√µes. <br><br><ul><li>  Usando diferentes URIs - Twitter </li><li>  Usando par√¢metro de consulta - Amazon </li><li>  Usando um cabe√ßalho - Microsoft </li><li>  Usando aceitar cabe√ßalho / tipo de m√≠dia - GitHub </li></ul><br><br>  Voc√™ precisa avaliar essas quatro op√ß√µes de acordo com suas necessidades espec√≠ficas.  H√° v√°rios fatores importantes a serem considerados: <br><br><ul><li>  <b>Polui√ß√£o de URI</b> : controlando vers√µes usando URIs e par√¢metros de consulta, acabamos poluindo o espa√ßo de URI.  Isso ocorre porque adicionamos prefixos e sufixos √†s principais strings do URI.  O controle de vers√£o usando um cabe√ßalho evita isso. </li><li>  <b>Uso indevido de cabe√ßalhos HTTP</b> .  No caso de controle de vers√£o usando cabe√ßalhos e tipo de m√≠dia, os cabe√ßalhos HTTP s√£o mal utilizados porque n√£o foram originalmente destinados ao controle de vers√£o. </li><li>  <b>Armazenamento em cache</b> : um recurso √© identificado por seu URI.  No entanto, se voc√™ n√£o usar um URI para determinar sua vers√£o, mas usar um mecanismo baseado em cabe√ßalho, as informa√ß√µes da vers√£o n√£o poder√£o ser armazenadas em cache.  Se o cache HTTP for importante para voc√™, use o controle de vers√£o com base em um URI ou em um par√¢metro de solicita√ß√£o. </li><li>  <b>Executabilidade de solicita√ß√£o do navegador</b> : o controle de vers√£o com base no t√≠tulo e no tipo de m√≠dia requer ferramentas como o Postman.  No entanto, se os consumidores de servi√ßos n√£o forem tecnicamente esclarecidos, √© prefer√≠vel usar o controle de vers√£o com base em um par√¢metro de consulta ou URI. </li><li>  <b>Documenta√ß√£o da API</b> : voc√™ tamb√©m precisa pensar em como deseja documentar suas APIs.  O controle de vers√£o baseado no URI e no par√¢metro de consulta √© mais f√°cil de documentar do que os outros dois tipos de controle de vers√£o. </li></ul><br>  Entenda que n√£o existe uma solu√ß√£o ideal √∫nica! <br><br><h3>  Pense no tratamento de erros </h3><br>  Quando um consumidor envia uma solicita√ß√£o a um servi√ßo, √© importante que ele receba a resposta correta.  Sempre que algo der errado, √© importante enviar uma resposta apropriada. <br><br><h3>  Quando um consumidor solicita um recurso inexistente </h3><br>  Se enviarmos uma solicita√ß√£o GET para procurar um usu√°rio existente, obteremos a seguinte resposta: <br><br><img src="https://habrastorage.org/webt/uv/dl/9j/uvdl9jri5sd_xafc-fog6acw0rm.png"><br><br>  Se voc√™ est√° procurando um usu√°rio inexistente: <br><br><img src="https://habrastorage.org/webt/9z/kq/je/9zkqjeitglkibqhxszf-4_qr9xk.png"><br><br>  O que voc√™ recebe √© o status <b>404 N√£o encontrado</b> .  Este √© um bom tratamento de erros, pois determina corretamente que o recurso n√£o foi encontrado e n√£o retorna um erro no servidor. <br><br>  Vamos agora enviar uma solicita√ß√£o GET para um URI inexistente: <br><br><img src="https://habrastorage.org/webt/gp/b9/ch/gpb9ch3b9ochiotgxppztr4zyb4.png"><br><br>  Como voc√™ pode ver, voc√™ obt√©m <b>404</b> status de resposta <b>N√£o encontrado</b> .  Um URL inv√°lido indica um recurso que n√£o existe. <br><br><h3>  Status de resposta importantes </h3><br><ul><li>  200 - sucesso </li><li>  404 - recurso n√£o encontrado </li><li>  400 - solicita√ß√£o inv√°lida (por exemplo, erro de valida√ß√£o) </li><li>  201 - criado </li><li>  401 - n√£o autorizado (se a autentica√ß√£o falhar) </li><li>  500 - erro no servidor </li></ul><br><h3>  Detalhes do erro no corpo da resposta </h3><br>  Isso ajuda se voc√™ tiver uma estrutura de exce√ß√£o padr√£o ao desenvolver seu servi√ßo. <br><br><img src="https://habrastorage.org/webt/fd/ds/vd/fddsvdk0uirskh9ubp4oprwdcd8.png"><br><br>  Para erros espec√≠ficos, estruturas de resposta espec√≠ficas podem ser devolvidas ao consumidor, e esse pode ser o padr√£o em toda a organiza√ß√£o.  Verifique se a resposta ao erro tamb√©m √© leg√≠vel para os consumidores, sem confus√£o. <br><br><h3>  Usando o Swagger ou a documenta√ß√£o da API aberta </h3><br>  O Swagger fornece um dos formatos de documenta√ß√£o mais populares para servi√ßos web RESTful.  Hoje, ele √© suportado por v√°rias organiza√ß√µes e √© usado em um grande n√∫mero de servi√ßos.  Aqui, examinamos dois aspectos principais do Swagger: <br><br><ul><li>  Formato de documenta√ß√£o do Swagger </li><li>  Interface do usu√°rio do Swagger, que permite examinar a documenta√ß√£o do Swagger de uma maneira visualmente conveniente </li></ul><br><h3>  Documenta√ß√£o do Swagger </h3><br>  D√™ uma olhada no seguinte Swagger JSON: <br><br><img src="https://habrastorage.org/webt/76/da/mo/76damom8ezs7j-5amuzvwfxrh6q.png"><br><br>  No n√≠vel superior, isso se parece muito com a defini√ß√£o de WSDL.  Possui v√°rios atributos importantes: <br><ul><li>  <b>host</b> : onde o servi√ßo est√° localizado </li><li>  <b>basePath</b> : o caminho em que o servi√ßo est√° localizado </li><li>  <b>consome</b> : quais solicita√ß√µes s√£o aceitas </li></ul><br><img src="https://habrastorage.org/webt/em/iz/q0/emizq09g1kavjozxl2-dnasjuum.png"><br><br><ul><li>  <b>produz</b> : Quais tipos de respostas s√£o gerados </li></ul><br><img src="https://habrastorage.org/webt/eu/5w/wg/eu5wwgbarvmsawqrqslbu3ps9oa.png"><br><br><ul><li>  <b>caminhos</b> : v√°rios recursos dispon√≠veis Nesse caso, voc√™ tem v√°rios tipos de recursos na lista: </li></ul><br><img src="https://habrastorage.org/webt/j0/y7/9d/j0y79dcqh83k2kak44d7te-fb3q.png"><br><br>  Ao examinar a documenta√ß√£o do Swagger, voc√™ pode identificar rapidamente os recursos dispon√≠veis, opera√ß√µes suportadas e opera√ß√µes relacionadas a cada recurso: <br><br><img src="https://habrastorage.org/webt/bx/dx/5c/bxdx5cazvuaggiwdhkqrxcwp1es.png"><br><br>  O recurso <b>/ users</b> suporta opera√ß√µes <b>GET</b> e <b>POST</b> .  Para <b>GET,</b> voc√™ pode ver os tipos de solicita√ß√£o e resposta suportados.  Voc√™ tamb√©m v√™ v√°rios tipos de respostas: <br><br><img src="https://habrastorage.org/webt/_1/gk/p6/_1gkp6wgcm4_lql3lnlrt49okvg.png"><br><br>  Observe que, para a resposta <b>200, o</b> circuito tamb√©m √© chamado de matriz do <b>usu√°rio</b> .  <b>O usu√°rio</b> faz parte da se√ß√£o de <b>defini√ß√µes</b> na parte inferior do documento: <br><br><img src="https://habrastorage.org/webt/wa/-4/9o/wa-49o7ao-f8_lpf-ifh4zptvks.png"><br><br>  O Swagger √© completamente independente da tecnologia usada para implementar um servi√ßo da web RESTful.  Ah, tudo √© baseado em JSON. <br><br><h3>  Apresentando a interface do usu√°rio do Swagger </h3><br>  A interface do usu√°rio do Swagger √© uma √≥tima interface do usu√°rio que √© muito √∫til para visualizar a documenta√ß√£o do Swagger para o servi√ßo da web RESTful.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√™ uma olhada na captura de tela abaixo: </font></font><br><br><img src="https://habrastorage.org/webt/8_/up/yn/8_upynbqoldixni50vm45okd39c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observe que selecionamos uma vers√£o espec√≠fica do servi√ßo da web para visualizar sua documenta√ß√£o. </font><font style="vertical-align: inherit;">Aqui est√° a mesma tela com mais detalhes: </font></font><br><br><img src="https://habrastorage.org/webt/ex/qu/4i/exqu4ioa6t5fai0zagud42n8w_k.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando vamos para a p√°gina inicial, ele descreve os recursos listados: </font></font><br><br><img src="https://habrastorage.org/webt/or/df/3-/ordf3-wrutjlzbey_oxfudbydcm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ tamb√©m pode ver o conjunto de opera√ß√µes suportadas para URLs de recursos: </font></font><br><br><img src="https://habrastorage.org/webt/3z/8m/6q/3z8m6qrd6sgoyteluxobp7duiim.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao clicar na opera√ß√£o GET de um recurso espec√≠fico, voc√™ obt√©m seus detalhes: </font></font><br><br><img src="https://habrastorage.org/webt/sw/rg/ps/swrgpsafvap9hwycxgqkphfkds0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode ver que o esquema Os modelos s√£o descritos visualmente. </font><font style="vertical-align: inherit;">Os atributos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">birthDate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">links</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nome</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postagens</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tamb√©m </font><b><font style="vertical-align: inherit;">s√£o</font></b><font style="vertical-align: inherit;"> exibidos. </font><font style="vertical-align: inherit;">Voc√™ tamb√©m pode executar uma consulta de exemplo e visualizar a resposta:</font></font><br><br><img src="https://habrastorage.org/webt/xb/np/ec/xbnpec9iiud7vdkdqok6scnu-uc.png"><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Usando ferramentas Swagger (Open API Standard) </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O melhor do Swagger s√£o as muitas ferramentas dispon√≠veis. </font><font style="vertical-align: inherit;">D√™ uma olhada no seguinte servi√ßo que usamos anteriormente para explicar o controle de vers√£o: A seguir, veja a documenta√ß√£o gerada automaticamente para este servi√ßo: O </font></font><br><br><img src="https://habrastorage.org/webt/vi/el/hn/vielhn-jq9zvj5ql30hgnu0kzme.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger tem suporte para a abordagem de contrato primeiro e a abordagem de c√≥digo primeiro. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre esta quest√£o, h√° um </font></font><a href="https://youtu.be/-jwd-9PKr5Y" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√≠deo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do autor </font><font style="vertical-align: inherit;">.</font></font><br><br><h3>  Sum√°rio </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Neste artigo, analisamos as pr√°ticas recomendadas para criar e projetar servi√ßos da Web RESTful. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Leitura adicional </font></font></h3><br> <a href="https://dzone.com/articles/be-the-best-api-you-can-be" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seja o melhor em sua API REST! </font></font></a> <br><br> <a href="https://dzone.com/articles/developing-rest-apis" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvendo APIs REST</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483374/">https://habr.com/ru/post/pt483374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483360/index.html">Controle de acionamento el√©trico de pot√™ncia. Experi√™ncia amadora</a></li>
<li><a href="../pt483364/index.html">Voc√™ pode escrever um c√≥digo no trabalho para economizar seu tempo livre.</a></li>
<li><a href="../pt483366/index.html">Hist√≥rico da Internet: Rede</a></li>
<li><a href="../pt483368/index.html">Criando o empacotador de arquivo ELF x86_64 para linux</a></li>
<li><a href="../pt483372/index.html">Como treinar uma rede neural DeepPavlov em um laptop usando uma GPU</a></li>
<li><a href="../pt483376/index.html">Na superf√≠cie de um buraco negro</a></li>
<li><a href="../pt483378/index.html">Trabalho com seguran√ßa de tipo com registros sem sobrecarga no C ++ 17: metaprograma√ß√£o baseada em valor</a></li>
<li><a href="../pt483380/index.html">Microsservi√ßos: como cumprir o contrato</a></li>
<li><a href="../pt483382/index.html">Kali Linux 2020.1</a></li>
<li><a href="../pt483384/index.html">Quais palavras em ingl√™s do l√©xico de TI pronunciamos incorretamente com mais frequ√™ncia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>