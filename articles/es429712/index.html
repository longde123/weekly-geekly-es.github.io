<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïë üë©üèª‚Äçüè´ üí¢ Introducci√≥n a React Hooks üë©‚Äçüè´ üèïÔ∏è üí©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si lees Twitter, lo m√°s probable es que sepas que Hooks es una nueva funci√≥n React, pero puedes preguntar, ¬øc√≥mo podemos usarlos en la pr√°ctica ? En e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introducci√≥n a React Hooks</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429712/"><img src="https://habrastorage.org/webt/fi/qp/xs/fiqpxsj8dqr3mts4ayrpml4es0u.png"><br><br>  Si lees Twitter, lo m√°s probable es que sepas que Hooks es una nueva funci√≥n React, pero puedes preguntar, <b>¬øc√≥mo podemos usarlos en la pr√°ctica</b> ?  En este art√≠culo, le mostraremos algunos ejemplos del uso de ganchos. <br>  Una de las ideas clave para entender es que los <b>ganchos le permiten usar el estado y otras caracter√≠sticas de React sin escribir clases</b> . <br><a name="habracut"></a><br><h1>  La motivaci√≥n detr√°s de los ganchos. </h1><br>  Aunque la arquitectura orientada a componentes nos permite reutilizar la vista en nuestra aplicaci√≥n, uno de los mayores problemas que enfrenta un desarrollador es c√≥mo <b>reutilizar la l√≥gica basada en estado entre componentes</b> .  Cuando tenemos componentes que tienen una l√≥gica de estado similar, no hay buenas soluciones para reutilizar componentes, y esto a veces puede conducir a la duplicaci√≥n de la l√≥gica en el constructor y los m√©todos del ciclo de vida. <br>  Para resolver este problema, usualmente use: <br><br><ul><li>  Componentes de alto orden </li><li>  renderizar accesorios </li></ul><br>  Pero ambos patrones tienen desventajas que pueden contribuir a la complejidad de la base del c√≥digo. <br><br>  <b>Los ganchos tienen como objetivo resolver todos estos problemas, permiti√©ndole escribir componentes funcionales que tienen acceso a estado, contexto, m√©todos de ciclo de vida, ref, etc., sin escribir clases.</b> <br><br><h1>  Ganchos en alfa </h1><br><blockquote>  Antes de bucear, es importante mencionar que el desarrollo de la API de Hooks a√∫n no est√° completo. <br><br>  Adem√°s, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n oficial es</a> muy buena, y recomendamos leerla tambi√©n porque describe ampliamente la motivaci√≥n detr√°s de la introducci√≥n de Hooks. <br>  <b>UPD</b> El art√≠culo original, cuya traducci√≥n est√° leyendo, fue escrito en un momento en que esta API estaba en pruebas alfa, en este momento React Hooks est√° oficialmente listo para usar.  Los cambios irreversibles realizados en la versi√≥n (en comparaci√≥n con alfa) se pueden encontrar al final del art√≠culo o en las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">notas de</a> la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">versi√≥n</a> . <br></blockquote><br><h2>  C√≥mo se relacionan los ganchos con las clases </h2><br>  Si est√° familiarizado con React, una de las mejores formas de comprender Hooks es ver c√≥mo podemos reproducir el comportamiento que estamos acostumbrados a trabajar con las clases que usan Hooks. <br><br>  Recuerde que al escribir clases de componentes, a menudo necesitamos: <br><br><ul><li>  Administrar estado </li><li>  Utilice m√©todos de ciclo de vida como componentDidMount () y componentDidUpdate () </li><li>  Contexto de acceso (tipo de contexto est√°tico) </li></ul><br><br>  Con React Hooks, podemos reproducir un comportamiento similar en componentes funcionales: <br><br><ul><li>  Para usar el estado de un componente use useState () hook </li><li>  En lugar de utilizar m√©todos de ciclo de vida como componentDidMount () y componentDidUpdate (), use useEffect () hook. </li><li>  En lugar de usar la propiedad est√°tica contextType, use useContext () hook. </li></ul><br><h2>  Se requiere la √∫ltima versi√≥n de React para usar Hooks. </h2><br>  Puede comenzar con Hooks en este momento cambiando el valor de react y react-dom en su package.json a "next". <br><br><img src="https://habrastorage.org/webt/ys/tx/47/ystx47s3snw_tfev_vqedjlzqfe.png"><br><br><h1>  Ejemplo de gancho UseState () </h1><br>  El estado es una parte integral de React.  Nos permite declarar variables que contienen datos, que, a su vez, se utilizar√°n en nuestra aplicaci√≥n.  Usando clases, el estado generalmente se define de la siguiente manera: <br><br><img src="https://habrastorage.org/webt/qs/se/7a/qsse7afsrvty1pgadlncirgnljk.png"><br><br>  Antes de Hooks, el estado generalmente se usaba solo en un componente, una clase, pero, como se mencion√≥ anteriormente, <b>Hooks tambi√©n nos permite agregar estado a un componente funcional</b> . <br>  Veamos un ejemplo a continuaci√≥n.  Aqu√≠ construimos un interruptor retroiluminado que cambia de color seg√∫n el valor del estado.  Para esto usaremos hook useState (). <br>  Aqu√≠ est√° el c√≥digo completo (y un ejemplo ejecutable): veremos lo que sucede a continuaci√≥n.  Al hacer clic en la imagen, puede ver este ejemplo en CodeSandBox. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ct/-f/xa/ct-fxahjxyoqamk8h-rkguxnfia.png"></a> <br><br><h2>  Nuestro componente es una funci√≥n. </h2><br>  En el bloque de c√≥digo anterior, comenzamos importando <b>useState</b> desde React.  UseState es una nueva forma de aprovechar las posibilidades que this.state podr√≠a ofrecer. <br>  Luego observe que este componente <b>es una funci√≥n, no una clase</b> .  Interesante! <br><br><h2>  Leer y escribir estado </h2><br>  Dentro de esta funci√≥n, llamamos a useState para crear una variable en estado: <br><br><img src="https://habrastorage.org/webt/mw/3n/ti/mw3ntirdvzk3oxyedpzi00q-vv0.png"><br><br>  <b>useState se usa para declarar una variable de estado</b> y se puede inicializar con cualquier tipo de valor (a diferencia del estado en las clases, que deber√≠a ser un objeto). <br><br>  Como se vio anteriormente, estamos utilizando la desestructuraci√≥n en el valor de retorno de useState. <br><ul><li>  El primer valor, claro en este caso, es el estado actual (como this.state) </li><li>  El segundo valor es la funci√≥n utilizada para actualizar el valor de estado (primer valor) (como this.setState). </li></ul><br>  Luego creamos dos funciones, cada una de las cuales establece el estado en diferentes valores, 0 o 1. <br><br><img src="https://habrastorage.org/webt/ma/sp/lk/masplkqh6lcp33bsywxmhs9zu7g.png"><br><br>  Luego los aplicamos como controladores de eventos en los botones de la vista: <br><br><img src="https://habrastorage.org/webt/bu/6y/ht/bu6yhtzsnm1tory2ro257etb2yi.png"><br><br><h2>  Estado de pistas de reacci√≥n </h2><br>  Cuando se presiona el bot√≥n "On", se llama a la funci√≥n setOn, que llama a setLight (1).  Llamar a setLight (1) <b>actualiza el valor de luz para el pr√≥ximo render</b> .  Esto puede parecer un poco m√°gico, pero <b>React realiza un seguimiento del valor de esta variable</b> y pasar√° un nuevo valor cuando este componente se vuelva a representar. <br>  Luego usamos el estado actual ( <b>luz</b> ) para determinar si la l√°mpara debe estar encendida o no.  Es decir, establecemos el color de relleno del SVG dependiendo del valor de la <b>luz</b> .  Si la luz es 0 (apagado), fillColor est√° configurado en # 000000 (y si es 1 (encendido), fillColor est√° configurado en # ffbb73). <br><br><h2>  Estados m√∫ltiples </h2><br>  Aunque no hacemos esto en el ejemplo anterior, puede crear varios estados llamando a useState m√°s de una vez.  Por ejemplo: <br><br><img src="https://habrastorage.org/webt/f6/hc/rt/f6hcrt31natgsnrwwxznmwya2da.png"><br><br><blockquote>  NOTA <br>  Hay algunas limitaciones para usar ganchos que debe tener en cuenta.  Lo m√°s importante, solo debe llamar a los ganchos en el nivel superior de su funci√≥n.  Consulte " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reglas de ganchos</a> " para obtener m√°s informaci√≥n. </blockquote><br><br><h2>  Ejemplo de enlace UseEffect () </h2><br>  <b>UseEffect Hook le permite realizar efectos secundarios en componentes funcionales</b> .  Los efectos secundarios pueden incluir acceder a la API, actualizar el DOM, suscribirse a los controladores de eventos; todo lo que desea es que suceda una acci√≥n "imperativa". <br><br>  Al usar el enlace useEffect (), React sabe que desea realizar una acci√≥n espec√≠fica despu√©s de la representaci√≥n. <br><br>  Veamos un ejemplo a continuaci√≥n.  Usaremos useEffect () para llamar a la API y obtener una respuesta. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/d3/s9/wm/d3s9wmjvrllc8z6xfwol0hocesg.png"></a> <br><br>  Este ejemplo de c√≥digo usa <b>useState</b> y <b>useEffect</b> , y esto se debe a que queremos escribir el resultado de la llamada API al estado. <br><br><img src="https://habrastorage.org/webt/l_/ro/uh/l_rouhqptfnk3xxxpevplnsg8qm.png"><br><br><h2>  Recibir datos y actualizar estado </h2><br>  Para "usar el efecto", necesitamos poner nuestra acci√≥n en la funci√≥n <b>useEffect</b> , es decir, pasamos el efecto "acci√≥n" como una funci√≥n an√≥nima, como el primer argumento para <b>usarEffect</b> . <br>  En el ejemplo anterior, nos referimos a una API que devuelve una lista de nombres.  Cuando la <b>respuesta</b> regresa, la convertimos a JSON y luego usamos <b>setNames (datos)</b> para establecer el estado. <br><br><img src="https://habrastorage.org/webt/jn/2m/a6/jn2ma6v7m2cdiiy6pwxoscgdtsq.png"><br><br><h2>  Problemas de rendimiento al usar efectos </h2><br><br>  Sin embargo, hay algo m√°s que decir sobre el uso de <b>useEffect</b> . <br><br>  ¬°Lo primero que debe pensar es que, por defecto, se <b>llamar√°</b> a <b>useEffect</b> en cada render!  La buena noticia es que no debemos preocuparnos por los datos obsoletos, pero la mala noticia es que probablemente no queramos hacer una solicitud HTTP para cada representaci√≥n (como en este caso). <br><br>  Puede omitir efectos <b>utilizando el segundo argumento useEffect</b> , como en este caso.  El segundo argumento para usar Effect es una lista de variables que queremos "observar", y luego volveremos a ejecutar el efecto solo cuando cambie uno de estos valores. <br><br>  En el ejemplo de c√≥digo anterior, tenga en cuenta que estamos pasando <b>una matriz vac√≠a</b> como segundo argumento.  Somos nosotros quienes le decimos a React que solo queremos nombrar este efecto al montar el componente. <br><br><blockquote>  Para obtener m√°s informaci√≥n sobre el rendimiento del efecto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">consulte esta secci√≥n en documentos t√©cnicos.</a> </blockquote><br>  Adem√°s, al igual que la funci√≥n useState, useEffect le permite usar varias instancias, lo que significa que puede tener m√∫ltiples funciones useEffect. <br><br><h2>  Ejemplo de enlace UseContext () </h2><br>  <b>Punto de contexto</b> <br><br>  El contexto en React es una forma para que un componente secundario acceda a un valor en el componente primario. <br><br>  Para comprender la necesidad de contexto: al crear una aplicaci√≥n React, a menudo necesita pasar valores desde la parte superior de su √°rbol React hacia abajo.  Al no usar el contexto, pasa accesorios a trav√©s de componentes que no necesitan saber sobre ellos. <br><br>  Pasar accesorios por el √°rbol de componentes "no relacionados" se llama cari√±osamente perforaci√≥n de accesorios. <br>  React Context resuelve el problema de perforaci√≥n de accesorios al permitirle compartir valores a trav√©s del √°rbol de componentes, con cualquier componente que solicite estos valores. <br><br>  <b>useContext () simplifica el uso del contexto</b> <br><br>  Con useContext Hook, usar el contexto es m√°s f√°cil que nunca. <br><br>  La funci√≥n <b>useContext ()</b> toma un objeto de contexto, que inicialmente se devuelve desde <b>React.createContext ()</b> , y luego devuelve el valor de contexto actual.  Veamos un ejemplo a continuaci√≥n. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/aa/uh/w6/aauhw6dryv5g7ltu15gake6yu_a.png"></a> <br><br>  En el c√≥digo anterior, el contexto de JediContext se crea usando React.createContext (). <br><br>  Usamos JediContext.Provider en nuestro componente de la aplicaci√≥n y establecemos el valor en "Luke" all√≠.  Esto significa que cualquier componente que necesite acceder al contexto ahora podr√° leer este valor. <br><br>  Para leer este valor en la funci√≥n Display (), llamamos a useContext, pasando el argumento JediContext. <br><br>  Luego pasamos el objeto de contexto que obtuvimos de React.createContext, y autom√°ticamente muestra el valor.  Cuando se actualiza el valor del proveedor, este enlace funcionar√° autom√°ticamente con el √∫ltimo valor de contexto. <br><br><h4>  Obtener un enlace al contexto en una aplicaci√≥n m√°s grande </h4><br>  Arriba, creamos JediContext dentro de ambos componentes, pero en una aplicaci√≥n m√°s grande, Display y App estar√°n en diferentes archivos.  Por lo tanto, si tiene una situaci√≥n similar, puede que se pregunte: "¬øC√≥mo obtenemos un enlace a JediContext entre archivos?" <br><br>  La respuesta es que necesita <b>crear un nuevo archivo que exporte el JediContext</b> . <br>  Por ejemplo, puede tener un archivo context.js que contiene algo como esto: <br><br><img src="https://habrastorage.org/webt/7p/aj/8g/7paj8gv_3osxvml7qa8figr6jnk.png"><br><br>  y luego en App.js (y Display.js) deber√≠as escribir: <br><br><img src="https://habrastorage.org/webt/3p/sp/f1/3pspf1ab9sgflp2xvfhqn_edcig.png"><br><br>  Gracias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dave</a> ) <br><br><h3>  Ejemplo de gancho UseRef () </h3><br>  Refs proporciona una forma de acceder a los elementos React creados en el m√©todo render (). <br>  Si eres nuevo en React refs, puedes leer esta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">introducci√≥n a React refs</a> . <br>  La funci√≥n <b>useRef ()</b> devuelve un objeto ref. <br><br><img src="https://habrastorage.org/webt/lx/ti/yw/lxtiywoqga-4a5mynvgtmhc9nhq.png"><br><br><h3>  useRef () y formularios con entrada </h3><br>  Veamos un ejemplo usando el gancho useRef (). <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/kj/5j/kv/kj5jkvt8rawy6g9relz8icq7rks.png"></a> <br><br>  En el ejemplo anterior, usamos useRef () en combinaci√≥n con useState () para representar el valor de entrada en la etiqueta p. <br><br>  Ref se crea en la variable nameRef.  Entonces la variable nameRef se puede usar en la entrada, dada como ref.  B√°sicamente, esto significa que ahora se podr√° acceder al contenido del campo de entrada mediante la ref. <br><br>  El bot√≥n de env√≠o en el c√≥digo tiene un controlador de eventos onClick llamado submitButton.  La funci√≥n submitButton llama a setName (creado a trav√©s de useState). <br><br>  Como ya hicimos con hookState, setName se usar√° para establecer el nombre del estado.  Para extraer el nombre de la etiqueta de entrada, leemos el valor de nameRef.current.value. <br><br>  Otra nota con respecto a useRef es que se puede usar m√°s que el atributo ref. <br><br><h3>  Usando ganchos personalizados </h3><br>  Una de las mejores caracter√≠sticas de Hooks es que puedes <b>compartir</b> f√°cilmente la <b>l√≥gica entre m√∫ltiples componentes creando tu propio Hook.</b> <br><br>  En el siguiente ejemplo, crearemos un <b>gancho setCounter () personalizado</b> que nos permite rastrear el estado y proporcionar funciones de actualizaci√≥n de estado personalizadas. <br><br><blockquote>  Consulte tambi√©n, este <b>useCounter</b> Hook de <a href="">react-use</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">useCounter de Kent</a> </blockquote><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/5j/1t/po/5j1tpoviea-npppg002j2vbyydw.png"></a> <br><br>  En el bloque de c√≥digo anterior, creamos una funci√≥n useCounter que almacena la l√≥gica de nuestro enlace. <br><br>  ¬°Tenga en cuenta que useCounter puede usar otros ganchos!  Comencemos creando un nuevo estado Hook a trav√©s de useState. <br><br>  Luego definimos dos funciones auxiliares: <b>incremento</b> y <b>decremento</b> , que llaman a <b>setCount</b> y ajustan el <b>conteo</b> actual en consecuencia. <br><br>  Finalmente, devolvemos los enlaces necesarios para interactuar con nuestro gancho. <br><br>  P: ¬øQu√© sucede al devolver una matriz con un objeto? <br>  R: Bueno, como la mayor√≠a de las cosas en Hooks, las convenciones de API a√∫n no est√°n completas.  Pero lo que hacemos aqu√≠ devuelve una matriz, donde: <br><br><ul><li>  El primer elemento es el valor actual del gancho. </li><li>  El segundo elemento es un objeto que contiene las funciones utilizadas para interactuar con el gancho. </li></ul><br>  Esta convenci√≥n le permite "cambiar el nombre" f√°cilmente del valor actual del gancho, como lo hacemos anteriormente con <b>myCount</b> . <br><br>  Sin embargo, puede devolver lo que quiera de su gancho personalizado. <br><br>  En el ejemplo anterior, usamos <b>incrementos</b> y <b>decrementos</b> como controladores <b>onClick</b> en nuestra opini√≥n.  Cuando el usuario presiona los botones, el contador se actualiza y se vuelve a mostrar (como <b>myCount</b> ) en la vista. <br><br><h2>  Escritura de pruebas para ganchos de reacci√≥n </h2><br>  Para escribir pruebas para ganchos, usaremos la <b>biblioteca react-testing</b> para pruebas. <br><br>  <b>react-testing-library</b> es una soluci√≥n muy ligera para probar componentes React.  Es una extensi√≥n de <b>react-dom</b> y <b>react-dom / test-utils</b> .  El uso de la <b>biblioteca react-testing</b> asegura que sus pruebas funcionen directamente con los nodos DOM. <br><br>  Con los ganchos de prueba, no todo est√° claro todav√≠a.  Actualmente, no puede probar el gancho de forma aislada.  En su lugar, debe conectar su gancho al componente y probar este componente. <br><br>  Entonces, a continuaci√≥n escribiremos pruebas para nuestros Hooks, interactuando con nuestros componentes y no directamente con Hooks.  La buena noticia es que nuestras pruebas se ver√°n como pruebas de React regulares. <br><br><h3>  Prueba del gancho useState () </h3><br>  Veamos un ejemplo de pruebas de escritura para <b>useState</b> Hook.  En el tutorial anterior, probamos m√°s variaciones del ejemplo useState utilizado anteriormente.  Escribiremos pruebas para asegurarnos de que presionar el bot√≥n "Off" establece el estado en 0 y presionar el bot√≥n "On" establece el estado en 1. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/y4/tc/i7/y4tci7evnak6quqqgjfp1ngdg9m.png"></a> <br><br>  En el bloque de c√≥digo anterior, comenzamos importando algunos ayudantes de la <b>biblioteca react-testing</b> y el componente bajo prueba. <br><br><ul><li>  <b>render</b> , esto ayudar√° a mostrar nuestro componente.  Se representa en un contenedor que se agrega a <b>document.body</b> </li><li>  <b>getByTestId</b> obtiene el elemento DOM <b>por data-testid</b> </li><li>  <b>fireEvent</b> , esto se usa para "desencadenar" eventos DOM.  Adjunta un controlador de eventos para <b>documentar</b> y procesar algunos eventos DOM a trav√©s de la delegaci√≥n de eventos, por ejemplo.  haciendo clic en un bot√≥n </li></ul><br>  Adem√°s, en la funci√≥n de aprobaci√≥n de prueba, establecemos los valores de variables para elementos con <b>data-testid</b> y sus valores que nos gustar√≠a usar en la prueba.  Con enlaces a elementos en el DOM, podemos usar el m√©todo <b>fireEvent</b> para simular un clic en un bot√≥n. <br><br>  La prueba verifica que si <b>se hace clic en onButton</b> , el valor de estado se establece en 1, y cuando hace clic en <b>offButton, el</b> estado es 1. <br><br><h3>  Prueba del gancho useEffect () </h3><br>  En este ejemplo, escribiremos pruebas para agregar un producto al carrito usando <b>useEffect</b> Hook.  El n√∫mero de elementos tambi√©n se almacena en localStorage.  El archivo index.js en CodeSandbox a continuaci√≥n contiene la l√≥gica real utilizada para agregar art√≠culos al carrito. <br><br>  Escribiremos pruebas para asegurarnos de que la actualizaci√≥n de la cantidad de art√≠culos del carrito tambi√©n se refleje en localStorage, e incluso si la p√°gina se vuelve a cargar, la cantidad de art√≠culos del carrito sigue siendo la misma. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/74/w8/vj/74w8vjaiwkk_okdrqgrgg4s90bc.png"></a> <br><br>  En la funci√≥n que confirma la prueba, primero establecemos <b>cartItem</b> en <b>localStorage</b> en 0, lo que significa que el n√∫mero de art√≠culos de carrito es 0. Luego obtenemos el <b>contenedor</b> y el proceso de <b>re</b> - <b>procesamiento</b> desde el componente de la <b>aplicaci√≥n</b> mediante la desestructuraci√≥n.  <b>Rerender</b> nos permite simular recargas de p√°gina. <br><br>  Luego obtenemos los enlaces a los botones y la etiqueta p, que muestra el valor actual de la cesta y los establece en variables. <br><br>  Una vez hecho esto, la prueba simula un clic en <b>addButton</b> y comprueba si el contador de la cesta actual es 1 y vuelve a cargar la p√°gina, despu√©s de lo cual si comprueba si <b>localStorage</b> , <b>cartItem</b> est√° configurado en 1. Luego simula un clic en <b>resetButton</b> y comprueba si el n√∫mero actual de art√≠culos del carrito est√° establecido en 0. <br><br><h3>  Prueba de gancho useRef () </h3><br>  En este ejemplo, <b>probaremos useRef</b> Hook, y usaremos el ejemplo original <b>useRef</b> anterior como base para la prueba.  <b>UseRef se</b> usa para obtener el valor del campo de entrada y luego establece el valor en estado.  El archivo <b>index.js</b> en <b>CodeSandbox a</b> continuaci√≥n contiene la l√≥gica para ingresar un valor y enviarlo. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/zu/m4/yu/zum4yuqeeszwservqx8mzj8ypoy.png"></a> <br><br>  En la funci√≥n que aprueba la prueba, establecemos las variables en el campo de entrada, una etiqueta p que muestra el valor de referencia actual y un bot√≥n de env√≠o.  Tambi√©n establecemos el valor que nos gustar√≠a ingresar en el campo de entrada para la variable newName.  Esto se usar√° para la verificaci√≥n en la prueba. <br><br><img src="https://habrastorage.org/webt/pj/gz/jz/pjgzjzqildkkv6tkasce6xy389c.png"><br><br>  El m√©todo fireEvent.change se usa para ingresar un valor en el campo de entrada, en cuyo caso se usa el nombre almacenado en la constante newName, despu√©s de lo cual se presiona el bot√≥n Enviar. <br><br>  Luego, la prueba verifica si el valor de referencia despu√©s de presionar el bot√≥n <b>coincide con el</b> valor de <b>newName</b> . <br><br>  Por √∫ltimo, deber√≠a ver "No se producen bloqueos de prueba, ¬°felicidades!"  mensaje en la consola. <br><br><h3>  Respuesta de la comunidad a los ganchos </h3><br>  Desde la introducci√≥n de React Hooks, la comunidad ha quedado encantada con esta caracter√≠stica, y hemos visto <b>muchos</b> ejemplos y ejemplos del uso de React Hooks.  Estos son algunos de los principales: <br><br><ul><li>  Este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> contiene una colecci√≥n de React Hooks. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">react-use</a> , la biblioteca que viene con un mont√≥n de React Hooks. </li><li>  Este ejemplo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CodeSandbox</a> muestra c√≥mo usar useEffect Hook para crear animaciones usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">react-spring</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Un ejemplo de</a> useMutableReducer que le permite simplemente mutar un estado para actualizarlo en un reductor. </li><li>  Este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ejemplo est√°</a> en CodeSandbox, que muestra un uso complejo e integrado de la comunicaci√≥n entre padres e hijos y el uso de redisers. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Componente de interruptor de</a> ganchos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">reacci√≥n</a> </li><li>  Otra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">colecci√≥n de ganchos de reacci√≥n</a> que tiene ganchos para valores de entrada, orientaci√≥n del dispositivo y visibilidad del documento. </li></ul><br><br><h3>  Diferentes tipos de ganchos </h3><br>  Existen varios tipos de ganchos que puede comenzar a usar en su aplicaci√≥n React.  Se enumeran a continuaci√≥n: <br><br><ul><li>  <b>useState</b> : nos permite escribir funciones puras con acceso al estado en ellas. </li><li>  <b>useEffect</b> : nos permite realizar efectos secundarios.  Los efectos secundarios pueden ser llamadas a la API, actualizar el DOM, suscribirse a controladores de eventos. </li><li>  <b>useContext</b> : le permite escribir funciones puras con contexto en ellas. </li><li>  <b>useReducer</b> : nos proporciona un enlace a un reductor similar a Redux </li><li>  <b>useRef</b> : le permite escribir funciones puras que devuelven un objeto de referencia mutable. </li><li> <b>useMemo</b> -      . </li><li> <b>useCallback</b> ‚Äî  Hook     . </li><li> <b>useImperativeMethods</b> -   ,       ref. </li><li> <b>useMutationEffects</b> ‚Äî   useEffect Hook   ,     DOM-. </li><li> <b>useLayoutEffect</b> -       DOM   -. </li><li> <b> hooks</b> -        . </li></ul><br><br><h3>  hooks </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo mejor de Hooks es que funcionan codo a codo con el c√≥digo existente, por lo que puedes hacer cambios lentamente para implementar Hooks. Todo lo que tiene que hacer es actualizar React a una versi√≥n compatible con ganchos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, los ganchos siguen siendo una caracter√≠stica experimental, y el equipo de React ha advertido repetidamente que la API se puede cambiar. Considera que est√°s advertido. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© significa la aparici√≥n de ganchos para las clases? Como informa el equipo React, las clases a√∫n permanecen, son una gran parte de la base del c√≥digo React, y lo m√°s probable es que lo sean por alg√∫n tiempo.</font></font><br><br><blockquote>      .  Facebook      ,  , ,    ,     .    React  Hooks,          ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> </blockquote><br> <b>  API- Hooks   ,    Hooks,   ,      .</b> <br><br><h3>  Recursos Adicionales </h3><br><ul><li>  React      React Hooks,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> </li><li> API    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . </li><li>    RFC,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> ,       </li></ul><br><br><blockquote> <b>UPD</b> <br>  : <br>      React 16.8   Hooks API.        -: <br> ‚Äî  useMutationEffect. <br> ‚Äî  useImperativeMethods  useImperativeHandle. <br> ‚Äî         useState  useReducer Hooks. <br> ‚Äî      ,   useEffect/useMemo/useCallback Hooks. <br> ‚Äî  Object.is     useState  useReducer. <br> ‚Äî     Strict Mode (DEV-only). <br> ‚Äî  lazy initialization API  useReducer Hook. <br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es429712/">https://habr.com/ru/post/es429712/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es429702/index.html">Google Analytics Pixel Sync Facebook, VK, Yandex, MyTarget</a></li>
<li><a href="../es429704/index.html">Conecte el almacenamiento LUN de m√∫ltiples rutas a Windows Server 2008 y Windows Server 2012</a></li>
<li><a href="../es429706/index.html">A1: 2017 - Inyecciones (Parte 3 y √öltima)</a></li>
<li><a href="../es429708/index.html">Parte del programa HolyJS 2018 Mosc√∫</a></li>
<li><a href="../es429710/index.html">Di√≥xido de carbono en la ISS</a></li>
<li><a href="../es429714/index.html">¬øM√°s f√°cil que MQTT? MQTT / UDP</a></li>
<li><a href="../es429716/index.html">Los 5 mejores juegos de PC para aprender ingl√©s</a></li>
<li><a href="../es429718/index.html">¬°Quiero todo de una vez! Estudiamos el RAM HyperX Predator DDR4 RGB, con una frecuencia de 4000 MHz</a></li>
<li><a href="../es429720/index.html">C√≥mo un desarrollador novato para sobrevivir en una entrevista y no volverse loco en el trabajo</a></li>
<li><a href="../es429722/index.html">C√≥mo realizamos el pago a trav√©s de Google Pay en Yandex.Cash [actualizado]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>