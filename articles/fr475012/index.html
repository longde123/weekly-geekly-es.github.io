<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî∏ üßúüèº üîä Comment le navigateur pour iOS a am√©lior√© les tests A / B. Rapport Yandex üêã üíò üë©üèæ‚Äçüè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il n'y a pas si longtemps, nous avons examin√© comment les exp√©riences A / B dans la recherche √©taient organis√©es. Le chef de l'√©quipe de d√©veloppement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment le navigateur pour iOS a am√©lior√© les tests A / B. Rapport Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/475012/">  Il n'y a pas si longtemps, nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">examin√©</a> comment les exp√©riences A / B dans la recherche √©taient organis√©es.  Le chef de l'√©quipe de d√©veloppement de la version iOS de Yandex.Browser Andrei Sikerin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">sav42</a> lors de la derni√®re r√©union de CocoaHeads Russie a √©galement parl√© de l'infrastructure de test A / B, uniquement dans son projet. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/mt/lf/6w/mtlf6wbmilwjyws6-tcfxwcxc9e.jpeg"></a> <br><br>  - Bonjour, je m'appelle Andrey Sikerin, je d√©veloppe Yandex.Browser pour iOS.  Je veux vous dire ce qu'est la plate-forme d'exp√©rimentation de navigateur pour iOS, comment nous avons appris √† l'utiliser, pris en charge ses fonctionnalit√©s plus avanc√©es, comment diagnostiquer et d√©boguer les fonctionnalit√©s d√©ploy√©es √† l'aide du syst√®me d'exp√©rimentation, et aussi quelle est la source d'entropie et o√π la pi√®ce est stock√©e. <br><a name="habracut"></a><br>  Commen√ßons donc.  Dans le navigateur pour iOS, nous ne proposons jamais la fonctionnalit√© aux utilisateurs √† la fois.  Tout d'abord, nous effectuons des tests A / B, analysons les produits et les m√©triques techniques afin de comprendre comment la fonctionnalit√© d√©ploy√©e affecte l'utilisateur, qu'il le veuille ou non, si elle gaspille certaines m√©triques techniques.  Pour cela, nous utilisons des analyses.  Notre analyse ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/ps/gz/d5/psgzd5dlv3rhmm6unpbug4un-lm.jpeg"><br><br>  Il existe environ 85 mesures.  Nous comparons plusieurs groupes d'utilisateurs.  Supposons que cela augmente nos statistiques - par exemple, la capacit√© du produit √† retenir les utilisateurs (r√©tention) - et n'en dilapide pas d'autres qui ne figurent pas sur la diapositive.  Cela signifie que les utilisateurs aiment la fonctionnalit√© et peuvent √™tre transf√©r√©s √† un grand groupe d'utilisateurs. <br><br>  Si, n√©anmoins, nous gaspillons quelque chose, alors nous comprenons pourquoi.  Nous construisons des hypoth√®ses, les confirmons.  Si nous dessinons des m√©triques techniques - c'est un bloqueur.  Nous les corrigeons et r√©ex√©cutons l'exp√©rience.  Et donc jusqu'√† ce que nous peignions tout.  Ainsi, nous d√©ployons une fonctionnalit√© qui n'est pas une source de r√©gression. <br><br>  Parlons du syst√®me d'exp√©rience original que nous avons utilis√©.  Elle √©tait d√©j√† assez d√©velopp√©e.  Ensuite, je vais vous dire ce qui ne nous convenait pas. <br><br><img src="https://habrastorage.org/webt/wo/e3/dg/woe3dgxmiljvkz0_dcescx4nfni.jpeg"><br><br>  Tout d'abord, il est bas√© sur le syst√®me d'exp√©rience Chromium et n'√©tait pas enti√®rement pris en charge sur iOS.  Deuxi√®mement, il √©tait √† l'origine en mesure de d√©ployer des fonctionnalit√©s pour diff√©rents groupes d'utilisateurs et disposait d'un syst√®me de filtrage sur lequel il √©tait possible de d√©finir des exigences pour les appareils.  Autrement dit - la version de l'application √† partir de laquelle la fonctionnalit√© est disponible, les param√®tres r√©gionaux de l'appareil - disons que nous voulons une exp√©rience uniquement pour les param√®tres r√©gionaux russes.  Soit la version d'iOS sur laquelle cette fonctionnalit√© sera disponible, soit la date √† laquelle cette exp√©rience sera valide - par exemple, si nous voulons mener une exp√©rience uniquement jusqu'√† une certaine date.  En g√©n√©ral, il y avait beaucoup de balises et c'√©tait assez pratique. <br><br>  Le syst√®me d'exp√©rimentation lui-m√™me se compose d'un fichier qui contient des descriptions des configurations des exp√©riences.  Autrement dit, pour une exp√©rience, il peut y avoir plusieurs configurations √† la fois.  Ce fichier est un fichier texte, il est compil√© en protobuf et dispos√© sur le serveur. <br><br>  Chaque configuration se compose de groupes.  Il y a une exp√©rience, elle a plusieurs configurations, et dans chacune d'elles il y a plusieurs groupes.  La fonctionnalit√© du code est attach√©e au nom du groupe actif de la configuration active.  Cela peut sembler assez compliqu√©, mais maintenant je vais expliquer en d√©tail de quoi il s'agit. <br><br><img src="https://habrastorage.org/webt/3w/9z/-2/3w9z-2hyctbs4d7omfr7vnfk5gg.jpeg"><br><br>  Comment √ßa marche techniquement?  Un fichier avec des descriptions de toutes les configurations est t√©l√©charg√© sur le serveur.  Au d√©marrage, il est t√©l√©charg√© par le navigateur du serveur et enregistr√© sur le disque.  Au prochain d√©marrage, nous d√©codons ce fichier le premier de la cha√Æne d'initialisation de l'application.  Et pour chaque exp√©rience unique, nous trouvons une configuration qui sera active. <br><br>  La configuration adapt√©e aux conditions sp√©cifi√©es et d√©crites peut devenir active.  S'il existe plusieurs configurations actives r√©pondant aux conditions sp√©cifi√©es, la configuration qui sera plus √©lev√©e dans le fichier est activ√©e. <br><br>  Plus loin dans la configuration active, une pi√®ce est lanc√©e.  La pi√®ce est lanc√©e localement, et selon cette pi√®ce d'une certaine mani√®re, dont je parlerai plus tard, le groupe actif de l'exp√©rience est s√©lectionn√©.  Et c'est pr√©cis√©ment au nom du groupe actif de l'exp√©rience que nous sommes attach√©s dans le code, v√©rifiant si notre fonctionnalit√© est disponible ou non. <br><br>  Une caract√©ristique cl√© de ce syst√®me est qu'il ne stocke rien par lui-m√™me.  Autrement dit, elle n'a pas de stockage sur le disque.  Chaque lancement - nous prenons le fichier, commen√ßons √† le calculer, trouvons la configuration active.  √Ä l'int√©rieur de la configuration, selon la pi√®ce, nous trouvons le groupe actif, et le syst√®me d'exp√©rience pour cette exp√©rience dit: ce groupe est s√©lectionn√©.  Autrement dit, tout est calcul√©, rien n'est stock√©. <br><br><img src="https://habrastorage.org/webt/r8/my/bl/r8myblurmzrhxkbyzss_weye0cu.jpeg"><br><br>  Permettez-moi, en fait, de vous montrer un fichier avec des descriptions d'exp√©riences.  Le navigateur a une telle fonctionnalit√© - Traducteur.  Elle s'est d√©ploy√©e dans une exp√©rience.  Le fichier commence par le bloc d'√©tude.  La configuration de toute exp√©rience commence par ce bloc.  L'exp√©rience s'appelle un traducteur.  Il peut y avoir plusieurs blocs d'√©tude de ce nom.  Et √† l'int√©rieur du bloc d'√©tude, il existe de nombreux blocs d'exp√©rimentation auxquels sont attribu√©s des noms diff√©rents.  Dans ce cas, nous voyons le groupe d'exp√©riences activ√©.  Et il y a un bloc de filtre, qui, en fait, d√©crit dans quelles conditions cette configuration peut devenir active, c'est-√†-dire ses crit√®res. <br><br>  Il y a deux balises ici - channel et ya_min_version.  Canal signifie vue d'ensemble.  BETA est indiqu√© ici, ce qui signifie que cette configuration dans le fichier ne peut devenir active que pour les assemblys que nous envoyons √† TestFlight.  Pour la version App Store, cette configuration par crit√®re de canal ne peut pas devenir active. <br><br>  ya_min_version signifie qu'avec la version minimale de l'application 19.3.4.43 cette configuration peut devenir active.  En fait, dans cette version de l'application, la fonctionnalit√© a d√©j√† acquis un tel formulaire que vous pouvez l'activer. <br><br>  Il s'agit de la description la plus simple du groupe de configuration de l'exp√©rience du traducteur.  Il peut y avoir plusieurs blocs d'√©tude de ce type dans un fichier.  En utilisant des balises dans le bloc de filtre, nous les d√©finissons pour diff√©rents canaux, pour les assemblages internes, pour les assemblages BETA, pour divers crit√®res. <br><br>  Voici un groupe d'exp√©rience appel√© activ√©, et il a une balise de poids de probabilit√©, le poids du groupe d'exp√©rience.  Il s'agit d'un entier non n√©gatif utilis√© pour d√©terminer le groupe actif au moment o√π la pi√®ce sort. <br><br>  Imaginons que cette configuration sur la diapositive soit devenue active.  Autrement dit, nous avons vraiment install√© l'application avec la version b√™ta publique, et nous avons vraiment la version 19.3.4.43.  Comment la pi√®ce est-elle lanc√©e?  Une pi√®ce est un nombre al√©atoire g√©n√©r√© localement de z√©ro √† un. <br><br>  Pour que lors du prochain lancement nous tombions dans le m√™me groupe, il est stock√© sur disque.  Bien que nous en tiendrons compte.  Ensuite, je vais vous dire comment vous assurer qu'il n'est pas stock√©.  La pi√®ce est jet√©e.  Supposons que 0,5 soit jet√©.  Cette pi√®ce est mise √† l'√©chelle dans un segment allant de z√©ro √† la somme des groupes d'exp√©riences.  Dans ce cas, nous avons un groupe activ√©, son poids est de 1000, c'est-√†-dire que la somme de tous les groupes sera de 1000. ¬´0,5¬ª passe √† 500. Par cons√©quent, tous les groupes d'exp√©riences divisent l'intervalle de z√©ro au nombre d'exp√©riences et de lacunes.  Et le groupe devient actif dans l'intervalle duquel la valeur mise √† l'√©chelle de la pi√®ce indiquera. <br><br>  Nous pouvons demander le nom du groupe d'exp√©riences actif dans le code et ainsi d√©terminer l'accessibilit√© - devons-nous activer la fonctionnalit√© ou non. <br><br><img src="https://habrastorage.org/webt/fd/lf/9a/fdlf9awbwgics2ykijdsvecl6wc.jpeg"><br><br>  De plus, nous examinerons des configurations exp√©rimentales plus complexes que nous utilisons en production.  Tout d'abord, il est clair qu'il est stupide de d√©ployer une fonctionnalit√© √† 100%, nous ne l'utilisons que pour la version b√™ta ou pour l'assemblage interne.  Pour la production, nous utilisons les m√©canismes suivants. <br><br>  Nous divisons les utilisateurs en trois groupes: les anciens utilisateurs, les utilisateurs sans exp√©rience et les nouveaux utilisateurs.  En termes, cela signifie ce qui suit.  Les anciens utilisateurs sont ceux qui ont d√©j√† utilis√© notre application et install√© l'application avec des fonctionnalit√©s en plus de l'ancienne version.  Autrement dit, ils l'ont d√©j√† utilis√©, ils n'avaient pas de fonctionnalit√©s, ils se sont habitu√©s √† tout et mettent soudainement √† jour l'application, dans laquelle il y a une sorte d'exp√©rience, de nouvelles fonctionnalit√©s.  Ensuite - utilisateurs sans exp√©rience et nouveaux utilisateurs.  Les nouveaux sont ceux qui nettoient l'application.  Autrement dit, ils n'ont jamais utilis√© Yandex.Browser, ils ont soudainement d√©cid√© de l'utiliser et ont install√© l'application. <br><br>  Comment r√©aliser cette partition?  Dans le bloc de filtrage, nous d√©finissons les conditions pour les balises min_install_date et max_install_date.  Supposons que X soit le 14 mars 2019 - il s'agit de la date de sortie de la cr√©ation de fonctionnalit√©s.  La date max_install_date pour les anciens utilisateurs sera alors de X moins 21 jours, avant la publication de l'assembly avec fonctionnalit√©s.  Si l'application a une telle date d'installation, il est fort probable que son premier lancement ait eu lieu avant sa sortie.  Et avant la sortie, il y avait une version sans fonctionnalit√©s.  Et si maintenant il a, conditionnellement, une version avec des fonctionnalit√©s, cela signifie qu'il a re√ßu l'application √† l'aide d'une mise √† jour. <br><br>  Et pour les nouveaux utilisateurs, nous d√©finissons min_install_date.  Nous l'exposons comme X plus quelques jours.  Cela signifie: s'il a une telle date d'installation, c'est-√†-dire qu'il a effectu√© le premier lancement apr√®s la date de sortie de la version avec des fonctionnalit√©s, alors il a eu une installation propre.  Il a maintenant une version avec des fonctionnalit√©s, mais la date d'installation √©tait post√©rieure √† cette version avec des fonctionnalit√©s. <br><br>  Ainsi, nous divisons les utilisateurs en anciens, sans exp√©rience ni nouveaux.  Nous le faisons parce que nous voyons: le comportement des anciens utilisateurs est diff√©rent du comportement des nouveaux utilisateurs.  En cons√©quence, nous pouvons, par exemple, ne pas peindre dans un groupe avec d'anciens utilisateurs, mais peindre dans un groupe avec de nouveaux utilisateurs, ou vice versa.  Si nous faisons une exp√©rience sur toute la masse, nous ne le verrons peut-√™tre pas. <br><br><img src="https://habrastorage.org/webt/qz/vg/ux/qzvguxtl01veibba0vc9yi-afp0.jpeg"><br><br>  Regardons cette exp√©rience.  Nous voyons la configuration d'exp√©rience suivante - Traducteur pour l'App Store, nouveaux utilisateurs.  √âtude de bloc, traducteur de noms, groupe enabled_new.  Le pr√©fixe new signifie que nous d√©crivons la configuration pour de nombreux utilisateurs nouveaux.  Poids 500 (si la somme de tous les poids est de 1000, alors la puissance de cet ensemble est de 50%).  Control_new, poids 500, c'est le deuxi√®me groupe.  Et le plus int√©ressant, ce sont les filtres pour le canal STABLE, c'est-√†-dire pour les assemblages qui sont assembl√©s pour la production.  Version dans laquelle la fonctionnalit√© est apparue: 19.4.1.  Et voici la balise min_install_date.  Ici, au format horaire Unix, il est chiffr√© le 18 avril 2019.  C'est quelques jours apr√®s la sortie de la version 19.4.1. <br><br>  Il y a une autre partie ici en plus du nouveau pr√©fixe, il est activ√© et contr√¥l√©.  Voici le pr√©fixe de contr√¥le, ce n'est pas accidentel.  Et en plus du fait que nous divisons les utilisateurs en nouveaux et anciens, nous les divisons en groupes au sein de l'exp√©rience en plusieurs parties. <br><br><img src="https://habrastorage.org/webt/ye/e2/p-/yee2p-2fopmazkwdzzqbpbkjcv8.jpeg"><br><br>  La premi√®re partie des utilisateurs est un groupe de contr√¥le, celui qui a le pr√©fixe de contr√¥le.  Il n'y a aucune fonctionnalit√©.  Elle a un poids X. Elle poss√®de √©galement un groupe de fonctions, g√©n√©ralement appel√© activ√©.  Il a √©galement un poids X, ce qui est important: l√†, la fonction doit √™tre activ√©e.  Et il y a un groupe par d√©faut qui a un poids de 1 moins 2X (1000 moins 2X, car 1000 est la valeur du poids total de tous les groupes dans la m√™me configuration, qui est accept√©e par d√©faut).  Le groupe par d√©faut ne comprend √©galement aucune fonctionnalit√©.  Il stocke simplement les utilisateurs qui sont rest√©s apr√®s leur s√©paration en utilisateurs de contr√¥le et de fonctionnalit√©.  Vous pouvez √©galement r√©ex√©cuter l'exp√©rience √† partir de celle-ci, si n√©cessaire. <br><br><img src="https://habrastorage.org/webt/3v/wl/7t/3vwl7tb4qbuzlnz3ifiqgc-oi8c.jpeg"><br><br>  Voyons, disons, la configuration pour les anciens utilisateurs.  Nous verrons un groupe de fonctionnalit√©s et de contr√¥le ici.  enabled_old - en vedette.  control_old, - contr√¥le, 10%.  default_old - d√©faut, 80%. <br><br>  Filtre de notes, ya_min_version 19.4.1, max_install_date 28 mars 2019.  Il s'agit d'une date ant√©rieure √† la date de sortie.  En cons√©quence, il s'agit d'une configuration avec une liste d'utilisateurs qui ont re√ßu la version 19.4.1 apr√®s la mise √† jour.  Ils ont utilis√© l'application et utilisent maintenant la nouvelle version. <br><br>  Pourquoi des groupes de fonctionnalit√©s et de contr√¥le sont-ils n√©cessaires?  Dans l'analyse que j'ai montr√©e sur la premi√®re diapositive, nous comparons le groupe de contr√¥le et le groupe d'entit√©s.  Ils doivent √™tre de m√™me puissance pour pouvoir comparer les m√©triques de leurs produits. <br><br>  Ainsi, nous comparons le contr√¥le et les groupes de fonctionnalit√©s dans l'analyse pour diff√©rents groupes d'utilisateurs, anciens et nouveaux.  Si nous peignons tout, nous roulons la fonctionnalit√© de 100%. <br><br><img src="https://habrastorage.org/webt/vq/55/w-/vq55w-koel8iwsw1fhpq-wmsc4o.jpeg"><br><br>  Comment un d√©veloppeur de code fonctionne-t-il avec ce syst√®me?  Il conna√Æt les noms des groupes d'entit√©s, la date √† laquelle la fonctionnalit√© doit √™tre activ√©e et √©crit une couche d'acc√®s, c'est un pseudocode, demandant un groupe actif par le nom de l'exp√©rience.  Ce n'est peut-√™tre pas le cas.  En fait, toutes les configurations peuvent ne pas correspondre aux conditions de l'appareil.  Ensuite, la cha√Æne vide reviendra. <br><br>  Apr√®s cela, si le nom du groupe actif appara√Æt, vous devez activer la fonction, sinon d√©sactivez-la.  De plus, cette fonction est d√©j√† utilis√©e dans le code, qui inclut des fonctionnalit√©s dans le code du navigateur. <br><br><img src="https://habrastorage.org/webt/yk/l4/81/ykl481l0evttlhjq9kekm2myjg8.jpeg"><br><br>  Nous avons donc v√©cu avec ce syst√®me d'exp√©riences pendant plusieurs ann√©es.  Tout allait bien, mais a r√©v√©l√© un certain nombre de lacunes.  Le premier inconv√©nient de cette approche est qu'il est impossible d'ajouter de nouveaux groupes d'exp√©riences sans corriger le code.  Autrement dit, s'il est peu probable que le nom de l'exp√©rience change pour une fonctionnalit√©, puis en ajoutant quelques groupes suppl√©mentaires, cela peut facilement l'√™tre.  Mais votre code d'accessibilit√© aux fonctionnalit√©s ne conna√Æt pas de tels groupes, car vous ne l'aviez pas pr√©vu √† l'avance.  Par cons√©quent, vous devez rouler la version, exp√©rimenter avec cette version, ce qui est un probl√®me.  Autrement dit, il est n√©cessaire, en changeant le code, de reconstruire et de publier dans l'App Store. <br><br>  Deuxi√®mement, vous ne pouvez pas d√©ployer des parties d'une fonction ou diviser une fonction en parties apr√®s avoir commenc√© l'exp√©rience.  Autrement dit, si vous d√©cidez soudainement que certaines fonctionnalit√©s peuvent √™tre d√©ploy√©es et que certaines restent dans l'exp√©rience, vous ne pouvez pas le faire, vous devez r√©fl√©chir √† l'avance et diviser cette fonctionnalit√© en deux et les accepter ind√©pendamment dans l'exp√©rience. <br><br>  Troisi√®mement, vous ne pouvez pas configurer une fonctionnalit√© ou comparer des configurations.  Dans Translator, par exemple, il existe un param√®tre - timeout time to the Translator API.  Autrement dit, si nous n'avons pas r√©ussi √† traduire en quelques millisecondes, alors nous disons que, essayez √† nouveau, une erreur, pas de chance. <br><br>  Il est impossible de d√©finir ce d√©lai dans l'exp√©rience, car nous devons soit fixer les groupes et imm√©diatement √† l'avance, nous allons avoir les groupes suivants √† l'avance - enabled_with_300_ms, enabled_with_600_ms au nom desquels la valeur du param√®tre est cod√©e.  Mais il est impossible de d√©finir le param√®tre num√©riquement d'une mani√®re ou d'une autre.  Si nous n'y avons pas pens√© auparavant, nous ne pouvons plus comparer plusieurs configurations. <br><br>  Quatri√®mement, les analystes et les d√©veloppeurs sont oblig√©s de s'entendre √† l'avance sur les noms des groupes.  Autrement dit, pour qu'un d√©veloppeur commence √† d√©velopper une fonctionnalit√©, il commence g√©n√©ralement, en fait, par la politique de disponibilit√© de cette fonctionnalit√©.  Et il a besoin de conna√Ætre les noms des groupes de fonctionnalit√©s.  Et pour cela, l'analyste doit expliquer la m√©canique de l'exp√©rience - si nous diviserons les utilisateurs en nouveaux et anciens ou si tous les utilisateurs seront dans le m√™me groupe sans division. <br><br>  Ou cela pourrait √™tre une exp√©rience inverse.  Par exemple, nous pouvons imm√©diatement consid√©rer que la fonctionnalit√© est activ√©e, mais pouvoir la d√©sactiver.  Ce n'est pas tr√®s int√©ressant pour l'analyste, car la fonctionnalit√© n'est pas pr√™te.  Il d√©terminera la m√©canique de l'exp√©rience lorsqu'elle sera pr√™te.  Et le d√©veloppeur a besoin √† l'avance des noms des groupes et des m√©canismes de l'exp√©rience, sinon il devra constamment apporter des modifications au code. <br><br>  Nous avons consult√© et d√©cid√© que c'√©tait suffisant pour durer.  Le projet Make Experiments Great Again est donc n√©. <br><br><img src="https://habrastorage.org/webt/03/cl/st/03clstd2ijsstadv_r9gzi5t8na.jpeg"><br><br>  L'id√©e cl√© de ce projet est la suivante.  Si auparavant nous √©tions attach√©s √† un code, un code aux noms des groupes actifs que l'analyste nous a transmis, nous avons maintenant ajout√© deux entit√©s suppl√©mentaires.  Cette fonctionnalit√© (Feature) et param√®tre de fonctionnalit√© (FeatureParam).  Et ainsi, le programmeur invente les fonctionnalit√©s et les param√®tres de fonctionnalit√© ind√©pendamment, en choisissant des identificateurs pour eux, en choisissant des valeurs par d√©faut pour eux et en programmant la disponibilit√© des fonctionnalit√©s pour eux. <br><br>  Apr√®s cela, il transmet ces identifiants √† l'analyste, et l'analyste, en r√©fl√©chissant √† la m√©canique des exp√©riences, les sp√©cifie d'une mani√®re sp√©ciale dans les groupes d'exp√©riences en utilisant la balise feature_association.  Si ce groupe devient actif, n'oubliez pas d'activer ou de d√©sactiver la fonctionnalit√© avec l'identifiant tel ou tel, et de d√©finir les param√®tres avec de tels identifiants. <br><br><img src="https://habrastorage.org/webt/an/wb/nh/anwbnhocjsbjbjobwovagyrid9a.jpeg"><br><br>  √Ä quoi ressemble-t-il dans le fichier de configuration de l'exp√©rience?  Ici, nous regardons le groupe d'exp√©rience.  Nom activ√©, une balise facultative feature_association est ajout√©e, dans cette balise de commande enable_feature ou disable_feature, et des identificateurs sont ajout√©s. <br><br>  Il y a aussi un bloc param, dont il peut y en avoir plusieurs.  Ici aussi, il y a un nom - timeout, et la valeur qui doit √™tre d√©finie est ajout√©e. <br><br><img src="https://habrastorage.org/webt/m9/xs/o9/m9xso9hf6xqczqxprt35ooabuuo.jpeg"><br><br>  √Ä quoi cela ressemble-t-il √† partir du code?  Le programmeur d√©clare les entit√©s des classes Feature et FeatureParam.  Et il √©crit les valeurs de ces primitives dans la couche d'acc√®s aux entit√©s.  Ensuite, il transmet cet identifiant √† l'analyste, et il d√©j√† dans le fichier de configuration d√©finit les identifiants dans le bloc du groupe d'exp√©rience en utilisant la balise feature_association.  D√®s que le groupe d'exp√©riences devient actif, les valeurs des caract√©ristiques et des param√®tres avec ces identifiants dans le code sont d√©finies √† partir du fichier.  S'il n'y a pas de param√®tres et de fonctionnalit√©s dans le groupe, les valeurs par d√©faut sont utilis√©es, qui sont indiqu√©es dans le code. <br><br>  Il semblerait que cela nous a donn√©?  Tout d'abord, lors de l'ajout d'un nouveau groupe, l'analyste n'a pas besoin de demander au programmeur d'ajouter un nouveau groupe d'entit√©s au code, car la couche d'acc√®s aux donn√©es fonctionne avec des identifiants qui ne changent pas lorsqu'un nouveau groupe est ajout√© au syst√®me d'exp√©rimentation. <br><br> -,   ,          ,  ,     .   ,   ,      ,    ,   . <br><br>       . ,    , translator,  , , .    TranslateServiceAPITimeout,    ,     timeout  API .  ,      ,      ,     ,   : 300   600. <br><br>                 .  .                 (FeatureParam). <br><br>  ,    , ,  . , ,   .      ,  ,  .    .     ? <br><br><img src="https://habrastorage.org/webt/mg/rm/lo/mgrmlowngyxubfoplbyznpipbzw.jpeg"><br><br>  ,   :    Feature  FeatureParam.    Feature  FeatureParam   . ,     Feature  FeatureParam,      ,     .    .    -    ,  ,    . <br><br> -,    Feature&amp;FeatureParam.     ,     ¬´¬ª, , ,  .    FeatureParam  ,     ,     API  ‚Äî 300  600 ? <br><br>   .       .   - ,          .                public beta,          .       ,   . <br><br>  ,    :         . <br><br><img src="https://habrastorage.org/webt/oc/yd/vz/ocydvzgrfulntvkzp6mjzn0xo00.jpeg"><br><br>     ?      ,   ,        . <br><br> :                  .    URL,    ,      . <br><br> :     browser://version     ‚Äî show-variations-cmd. :     cheat-,    .  :     . <br><br><img src="https://habrastorage.org/webt/hn/0m/53/hn0m53nhab5kfgvuizq8rbupu9e.jpeg"><br><br>    .          ,         .      proto-          -  ,  study-,   .  ,   .     Feature&amp;FeatureParam,     .       ,    ,       .    , , Feature&amp;FeatureParam   . <br><br>         .       proto-   .       .      ,    .  ,     ,   . <br><br><img src="https://habrastorage.org/webt/ym/xb/bn/ymxbbnjm-uui2q2lvi3c5c77es0.jpeg"><br><br>  Le deuxi√®me.    Feature&amp;FeatureParam?     Chromium,    . Chromium      browser://version,    show-variations-cmd. <br><br>      : enabled-features, force-fieldtrials  force-fieldtrials-params,       .   ,   .   ?      ,         .  ,  Feature1     trial1. Feature2     trial2. Feature3   . <br><br>   trial1    group1.   trial2    group2.   force-fieldtrials-params,  ,     trial1    group1,       p1  v1, p2  v2.   trial2    group2,     p3  v3, p4  v4. <br><br>   ,     .          Chromium,      iOS.        ,    . <br><br>    .     --force-fieldtrials=translator/enabled_new/   enabled_new   translator. <br><br>    --force-fieldtrial-params==translator.enablew_new:timeout/5000,    translator    enabled_new,   ,        ,    translator,   enabled_new     timeout,  5 000 . <br><br>    --enabled-features=TranslateServiceAPITimeout&lt;translator ,    -    translator   translator ,  , ,  TranslateServiceAPITimeout.  ,    ,       ,   ,            . <br><br><img src="https://habrastorage.org/webt/bm/zp/g9/bmzpg98e_vac84schjjl-puzbr8.jpeg"><br><br>       (cheat urls). , , ,        ,  ,    ,       .    .        .       . <br><br>       yandexbrowser:// (.),    ,    .       .    my_pet_experiment=group_name.  ,   enable-features=,       ,   disable-features=,       .     ,   &amp;. <br><br>       (cheat url),      .       , , ,     .      ,          ,       .        filter,   my_pet_experiment     ,     .     1000,    feature_association,     ,     . <br><br>  ,  .   ,  ,   .    ,         ‚Äî    my_pet_experiment ‚Äî    , ,   . ,          ,     study   . <br><br><img src="https://habrastorage.org/webt/v_/t3/xs/v_t3xsak7jrgmjropgdwkv_kif0.jpeg"><br><br>     ,       .    ‚Äî   , .         .    ,         . <br><br>    ,         . <br><br><img src="https://habrastorage.org/webt/ho/nb/fd/honbfdatu0gisjpd6hnzxecmjeo.jpeg"><br><br> , ,         ,    ,        .     ,            .             ,            . <br><br>          .         .  ,      ,   ?       ,    .     ,     ? <br><br>  .   . <br><br><img src="https://habrastorage.org/webt/l9/cv/8p/l9cv8p75nc-jsr__fufhnb47txe.jpeg"><br><h5> <sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></sub></sup> </h5><br>   ,    .     , , UUID,      application Identifier,   .       .   hash       . <br><br>   ?     ? , ,           UUID,         .              ? , ,         .       .     ?     hash       hash       ,  .   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  Google,   An Efficient Low-Entropy Provider. <br><br>  ,             ‚Äî UUID,   ,    ,   .    , ,   Chromium. <br><br>   ,   ,  ?     ?   : <br><br><ol><li> :        ,      -.      . </li><li> .     ,  ,       ,       . </li><li> .     ,     , ,      . </li><li> ,         . </li><li> .      ,   ,       (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hromium variation service</a> ). </li></ol><br>  Chromium,     .  iOS,   .   ,      .  Je vous remercie </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475012/">https://habr.com/ru/post/fr475012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475002/index.html">Le travail n'est pas un loup, partie 2. Passez le boss et survivez en probation</a></li>
<li><a href="../fr475004/index.html">Combien les d√©veloppeurs de diff√©rentes qualifications ont-ils gagn√© au premier semestre 2019</a></li>
<li><a href="../fr475006/index.html">Comment cr√©er un prototype de service de comparaison de documents en 28 heures et gagner un hackathon</a></li>
<li><a href="../fr475008/index.html">Interview de Playboy: Steve Jobs, partie 3</a></li>
<li><a href="../fr475010/index.html">Telegram Bot - Assistant de planification d'√©v√©nements</a></li>
<li><a href="../fr475016/index.html">QA mitap √† Redmadrobot le 22 novembre</a></li>
<li><a href="../fr475018/index.html">Modification des colonnes Radiotehnika S-30</a></li>
<li><a href="../fr475020/index.html">Comment la technologie moderne remplace progressivement les tours d'incendie</a></li>
<li><a href="../fr475022/index.html">Schizophr√©nie architecturale Facebook Balance</a></li>
<li><a href="../fr475024/index.html">La course √† pied est un sport id√©al pour un travailleur √† distance. Partie 1: le chemin vers la premi√®re course d'une centaine de kilom√®tres</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>