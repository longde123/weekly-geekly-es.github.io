<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚🏾 🍼 🐚 Pohon segmen: cepat dan mudah ✖️ 🎃 👏🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Menjelang peluncuran kursus Algoritma untuk Pengembang berikutnya, kami mengadakan pelajaran terbuka . Mereka berbicara tentang ide yang terkenal dari...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pohon segmen: cepat dan mudah</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/485194/"> <i>Menjelang peluncuran kursus <a href="https://otus.pw/yFoX/">Algoritma untuk Pengembang berikutnya,</a> kami mengadakan <a href="https://otus.pw/yFoX/">pelajaran terbuka</a> .</i>  <i>Mereka berbicara tentang ide yang terkenal dari pohon segmen, membahas bagaimana membangunnya, memperbaruinya, dan dengan cepat <code>O(log n)</code> menghitung jumlah angka dari setiap segmen dari array yang diberikan.</i>  <i>Algoritma ini sangat sederhana dan ekonomis: Anda memerlukan <code>O(n)</code> memori.</i>  <i>Untuk memperbaiki materi, mereka memecahkan masalah olimpiade.</i> <br><br><img src="https://habrastorage.org/webt/fo/p6/54/fop654wv18dcuqqcotigwu5ewji.jpeg"><br><hr><br>  Webinar ini dilakukan oleh seorang programmer dan guru yang berpengalaman, serta kepala kursus "Algoritma untuk Pengembang" <a href="https://otus.pw/pieR/">Evgeny Volosatov</a> . <a name="habracut"></a><br><br><h3>  Pepatah </h3><br>  Pohon segmen adalah struktur data yang memungkinkan penemuan cepat secara algoritmik dan logaritmik dari jumlah elemen array pada segmen tertentu. <br><br>  Misalnya, bayangkan Anda perlu menemukan jumlah angka-angka berikut: <br><br><img src="https://habrastorage.org/webt/fn/lv/ni/fnlvniiqc457d4l5ywrjrhd8j5o.png"><br><br>  Dalam hal ini, kita tidak hanya perlu menghitung jumlah angka dari urutan yang ditentukan (jumlah elemen dari array tertentu), tetapi <b>secepat mungkin untuk menemukan jumlah dari setiap urutan angka-angka ini</b> .  Artinya, kita dapat bertanya beberapa interval (segmen) dan memberikan jawabannya secepat mungkin, berapakah jumlah angka dari interval ini: <br><br><img src="https://habrastorage.org/webt/cu/om/vi/cuomviqi_bvqgbhnazokqrmsbmy.png"><br><br>  Apa artinya cepat?  Ini berarti <b>lebih cepat daripada jika kita menambahkan jumlahnya</b> .  Bagaimanapun, mungkin ada jutaan dan miliaran angka ... <br><br>  Adalah keinginan untuk dengan cepat menemukan jumlah elemen yang berurutan yang menjadi motivasi bagi webinar kami.  Selain itu, kita berbicara tidak hanya tentang jumlah, tetapi juga tentang tugas-tugas lain, misalnya, menghitung fungsi asosiatif.  Jadi, kita berbicara tentang operasi yang pelaksanaannya tidak bergantung pada urutan perhitungan. <br><br>  Mari kembali ke baris kita: <br><br><img src="https://habrastorage.org/webt/fn/lv/ni/fnlvniiqc457d4l5ywrjrhd8j5o.png"><br><br>  Jelas, jika kita ingin menemukan hasilnya dengan cepat, kita perlu menghitung beberapa jumlah di muka.  Hal pertama yang terlintas dalam pikiran adalah melipat berpasangan: <br><br><img src="https://habrastorage.org/webt/ud/oq/tl/udoqtlw0ym7de8nhrqdopsaebcg.png"><br><br>  Sekarang, jika Anda perlu menemukan jumlah angka, kita dapat melakukannya hampir secara instan.  Misalnya, untuk menemukan jumlah segmen yang disebutkan di atas, itu akan cukup untuk menambahkan 13 hingga 9. Semuanya dasar: untuk menemukan <b>jumlah empat angka,</b> kami <b>hanya</b> menambahkan <b>dua</b> . <br><br>  Kami menyulitkan tugas: <br><br><img src="https://habrastorage.org/webt/be/cg/bf/becgbfbuhk3jfdunnzzxdcjxtha.png"><br><br>  Untuk menemukan jumlah segmen ini, kita perlu menjumlahkan elemen-elemen yang, dengan satu atau lain cara, menutupi segmen kita: <br><br><img src="https://habrastorage.org/webt/14/22/mk/1422mk7bnint8ldnumlxday9axs.png"><br><br>  Tentu saja, 3 + 13 + 19 = 35. Perhatikan bahwa untuk menemukan <b>jumlah dari tujuh angka</b> , kami <b>hanya</b> menambahkan <b>tiga</b> .  Jika segmen terdiri dari seribu elemen, itu akan cukup untuk menambahkan rata-rata 10 elemen, karena kita memiliki kompleksitas logaritmik dengan logaritma basis-2. Dan itu cepat! <br><br><h3>  Pohon biner penuh </h3><br>  Pohon biner lengkap adalah pohon, yang masing-masing elemen memiliki tepat dua anak. <br><br>  Untuk bekerja dengan pohon biner lengkap, Anda bisa dan harus menggunakan struktur data seperti array.  <b>Memberi nomor pada array ini nyaman dari satu</b> .  Kami menomori setiap elemen pohon biner dengan bilangan alami dari 1 hingga 2 <sup>n</sup> -1: <br><br><img src="https://habrastorage.org/webt/sk/kk/ec/skkkecryziahrhokilreofurql4.png"><br><br>  Seluruh keindahan dari pendekatan ini adalah sangat mudah untuk menghitung jumlah anak dan orang tua. <br>  Rumus untuk menghitung "anak kiri": <i>i * 2</i> , "kanan": <i>i * 2 + 1</i> . <br><br><img src="https://habrastorage.org/webt/yk/g4/ri/ykg4rio8c3trd8xnxqom8nzyr2o.png"><br><br>  Misalnya, kami menghitung jumlah anak di elemen kelima: <br><br><ol><li>  5 x 2 = <b>10</b> ; </li><li>  5 x 2 + 1 = <b>11</b> . </li></ol><br><br>  Dan bagaimana dari "anak" untuk naik ke "orang tua"?  Kami menggunakan <b>divisi integer</b> <i>i / 2</i> <br><br>  Oke, dan bagaimana cara menentukan apakah anak itu kiri atau kanan?  Jawabannya adalah sebagai berikut: <b>anak-anak kiri memiliki angka genap, anak-anak kanan memiliki angka ganjil</b> . <br><br>  Ingat poin-poin ini. <br><br>  Kembali ke contoh pohon biner kita, kita bertanya pada diri sendiri, bagaimana kita dapat membangunnya?  Lihat, pertama-tama kita memiliki array angka: <br><br><img src="https://habrastorage.org/webt/u1/mg/nm/u1mgnmf90-a9x8widngxvftscns.png"><br><br>  Untuk itu Anda perlu membangun pohon biner.  Berapa banyak memori yang dibutuhkan untuk menyimpan pohon biner, di mana unsur-unsur ini ada di bagian bawahnya? <br><br>  Jawaban atas pertanyaan ini adalah <i>2n</i> jika <i>n</i> adalah kekuatan dua. <br><br>  Kita melangkah lebih jauh, karena dua pertanyaan muncul sebelum kita: <br><br><ol><li>  dari elemen mana Anda perlu menempatkan nomor sumber dalam array pohon biner lengkap? </li><li>  dari elemen mana dan ke arah mana kita akan mulai mengisi pohon kita dengan jumlah yang telah dihitung sebelumnya? </li></ol><br><br><img src="https://habrastorage.org/webt/2p/7w/ud/2p7wudvrlqpvlwxyxiphho1zs3q.png"><br><br>  Jawaban untuk pertanyaan pertama cukup sederhana: kita memiliki 8 elemen, secara total akan ada 16 elemen dalam array, yang berarti bahwa elemen pertama akan diberi nomor 16 - 8 = 8. Dan kita akan mulai membangun dari kiri ke kanan dan dari bawah ke atas, mulai dari elemen 7, menambahkan nilai pada anak-anak, seperti ini: <br><br><img src="https://habrastorage.org/webt/ec/_4/d9/ec_4d9sy7dtb41tgrr2fhgbkmf8.png"><br><br>  Selanjutnya, Anda perlu menentukan cara menemukan jumlah segmen yang diinginkan.  Kami kembali ke contoh pertama kami, menghitung elemen dan mendefinisikan segmen, dan menunjukkan elemen pertama di segmen yang akan ditambahkan oleh huruf L, dan yang terakhir oleh R: <br><br><img src="https://habrastorage.org/webt/w8/wc/1f/w8wc1fkemnpucy4ih5n1pl9rdom.png"><br><br>  Sekarang perlu untuk memperkenalkan satu konsep lagi sehingga algoritme tindakan jelas.  Kita berbicara tentang konsep elemen-elemen fundamental dan segmen-segmen fundamentalnya yang sesuai.  Elemen fundamental adalah elemen apa saja dari seluruh array, dan segmen fundamental berhubungan dengannya, yaitu elemen-elemen dari array awal yang merupakan anak / cucu langsungnya.  Untuk elemen fundamental dengan nomor 4 "5", segmen fundamental akan dari 8 hingga 9 elemen: ["2";  "3"]: <br><br><img src="https://habrastorage.org/webt/ia/ot/mw/iaotmwpt4cvxbhhsyr5rwbgt_1a.png"><br><br>  Sedangkan untuk elemen fundamental dengan angka 10 - "7" (kami menyebutnya L), itu bertepatan dengan segmen fundamentalnya.  Apakah mungkin untuk memperluas segmen fundamental ini tanpa melampaui LR?  Dalam kasus kami, Anda bisa.  Aturan untuk batas kiri adalah ini: jika ia adalah anak kiri, maka segmen fundamental dapat diperluas, elemen fundamental baru akan menjadi induk dari yang sekarang.  Yaitu, kita dapat menulis yang berikut dalam program: <br><br><img src="https://habrastorage.org/webt/dy/j0/pg/dyj0pgxwjnqnmqawzxl5zjoahwg.png"><br><br>  Sekarang mari kita beralih ke elemen kanan R. Ini adalah elemen fundamental dan anak kiri, jadi kita tidak bisa lagi memperluas area (kita akan melampaui segmen).  Jadi, kita dapat menambahkan elemen ini ke jawabannya: <br><br><img src="https://habrastorage.org/webt/c9/ng/fi/c9ngfima1u2vx-f-rqc8etaupxo.png"><br><br>  Selanjutnya, Anda perlu elemen kiri untuk bergerak ke kanan, dan kanan ke kiri.  Untuk elemen kiri dengan indeks L = 10, indeks berikutnya adalah 5, karena akan pergi ke induk.  Tapi itu akan pergi dulu ke kanan, dan kemudian naik: <br><br><img src="https://habrastorage.org/webt/jd/qu/ll/jdqulls8rhnw5jvpbl-qhqlj1wm.png"><br><br>  Jadi, nilai L pindah ke level yang lebih tinggi dan sedikit ke kanan.  Bagaimana R akan berkurang?  Menggunakan rumus (R - 1) / 2. <br><br><img src="https://habrastorage.org/webt/ea/-b/s9/ea-bs9_886die9apr0myvvimrpw.png"><br><br>  Berikut ini adalah algoritma.  Adapun nilai-nilai variabel L dan R berikut, maka mereka akan dipindahkan sebagai berikut: <br><br><img src="https://habrastorage.org/webt/qq/rn/t_/qqrnt_9szc_kwfmv5gcy_tbfyi4.png"><br><br>  Jika tidak ada 8 elemen dalam pohon, tetapi angka yang merepotkan, katakanlah 12, kita harus menambahkan pohon (pohon biner harus lengkap) menjadi 16. <br>  Rumus untuk menghitung jumlah elemen (seluruh bagian logaritma diambil): <br><br><img src="https://habrastorage.org/webt/pt/3d/fs/pt3dfscq0ucdhkasro7lva2prrw.png"><br><br>  Sekarang kita menghitung fungsi asosiatif untuk menemukan <b>minimum</b> .  Ini pohon kami dan tebang: <br><br><img src="https://habrastorage.org/webt/3c/kb/bw/3ckbbwikljcpgynr1jx40mgpciy.png"><br><br>  Menurut Anda berapa kali elemen 5 akan terlibat dalam fungsi kita - satu atau dua?  Tentu saja, satu, tetapi bagaimana ini diperiksa dalam algoritma?  Faktanya, elemen ini adalah putra kiri atau kanan, yang berarti bahwa tindakan akan dilakukan untuk L atau R. <br><br><img src="https://habrastorage.org/webt/9m/a3/nh/9ma3nh-iiidctwxe1dpbmr1nkaa.png"><br>  + <br><br>  Sekarang pertimbangkan operasi perubahan.  Katakanlah beberapa elemen telah berubah, misalnya, bukannya 7, 0 masuk. Agar pohon segmen kami tetap dalam kondisi kerja, kita perlu memperbarui semua orangtua, dan kita harus pergi ke bagian paling atas. <br><br><img src="https://habrastorage.org/webt/sx/zu/su/sxzusu9zgp6okgpwrw0qwiwon7a.png"><br><br><h3>  Solusi dari masalah olimpiade </h3><br>  Salah satu persyaratan untuk tugas-tugas tersebut adalah semuanya harus bekerja dengan cepat.  Jadi, kami memiliki kondisi berikut: <br><br><img src="https://habrastorage.org/webt/wc/u8/hn/wcu8hnmpigtcnmf8cppibgjdaiw.png"><br><br>  Kami akan menyelesaikannya dengan menggunakan pengetahuan tentang pohon segmen.  Hasilnya, kami mendapatkan kode C # berikut: <br><br><img src="https://habrastorage.org/webt/nu/_b/ja/nu_bjam45qtkqid1umwdm95tu2s.png"><br><br>  Kami mengirimkannya untuk verifikasi, kami melihat bahwa <a href="https://codeforces.com/gym/100249">keputusan telah dibuat dan lengkap</a> , yang berarti bahwa algoritma kami berfungsi. <br><br><img src="https://habrastorage.org/webt/5m/dn/ip/5mdnipfigoae-93thzd2w_hftam.png"><br><br>  Itu saja, jika Anda ingin detail lebih lanjut, <a href="https://otus.pw/yFoX/">tonton seluruh video</a> .  Anda juga dapat membaca dengan santai artikel penulis berikut oleh guru kami <a href="https://otus.pw/pieR/">Evgeny Volosatov</a> di Habré: <br><br>  - <a href="https://habr.com/ru/company/otus/blog/472040/">Menyeimbangkan pohon merah-hitam - Tiga kasus</a> ; <br>  - <a href="https://habr.com/ru/company/otus/blog/476510/">Kuda itu bergerak sedikit.</a>  <a href="https://habr.com/ru/company/otus/blog/476510/">Bitboard Catur</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id485194/">https://habr.com/ru/post/id485194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id485180/index.html">Apakah kita memerlukan data lake? Apa yang harus dilakukan dengan data warehouse?</a></li>
<li><a href="../id485182/index.html">Sennheiser pada tahun 2020 - headphone nirkabel yang diperbarui untuk peringatan tersebut</a></li>
<li><a href="../id485184/index.html">Hasil Jajak Pendapat Tab</a></li>
<li><a href="../id485186/index.html">Startup bernilai trilyun dolar atau bagaimana perusahaan Valley paling sukses dilahirkan</a></li>
<li><a href="../id485190/index.html">Andrew Eun "Gairah Belajar Mesin." Terjemahan bab 47-58</a></li>
<li><a href="../id485196/index.html">AvitoTech On Tour: Pergi dan berhadapan rapat di Kazan</a></li>
<li><a href="../id485198/index.html">Cara lain untuk mengukur kinerja metode aplikasi .NET</a></li>
<li><a href="../id485200/index.html">Mess pada awalnya: post-mortem pada kecepatan peluncuran aplikasi iOS</a></li>
<li><a href="../id485202/index.html">Sistem Penindasan</a></li>
<li><a href="../id485204/index.html">Kembali ke atas: mengapa kapitalisasi Amazon akan segera melebihi $ 1 triliun</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>