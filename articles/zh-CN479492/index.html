<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§›ğŸ» ğŸ¤˜ğŸ» ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©ğŸ½ åŸºäºOpenWhiskçš„æ— æœåŠ¡å™¨è®¡ç®—ï¼Œç¬¬3éƒ¨åˆ† ğŸ¿ ğŸ¥‹ ğŸ‘¦ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡æ˜¯Priti Desaiæ’°å†™çš„æœ‰å…³OpenWhiskçš„ä¸€ç³»åˆ—ç¿»è¯‘è¯´æ˜çš„ç»§ç»­ã€‚ ä»Šå¤©ï¼Œæˆ‘ä»¬å°†çœ‹ä¸€ä¸‹éƒ¨ç½²Zipå‡½æ•°ï¼ŒGitHubä¾èµ–é¡¹çš„ç¤ºä¾‹ï¼Œå¹¶æ›´è¯¦ç»†åœ°æè¿°å®¢æˆ·ç«¯å’ŒOpenWhiskæœåŠ¡å™¨ä¹‹é—´çš„å¯¹è±¡åŒæ­¥ã€‚ 
 é‚®ç¼–åŠŸèƒ½ 


 [å¦‚å…ˆå‰æ‰€ç¤º]ï¼ˆï¼‰ï¼ŒOpenWhiskæ”¯æŒä»å•ä¸ªæºæ–‡ä»¶åˆ›å»ºå‡½æ•°ã€‚ å®ƒè¿˜æ”¯...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åŸºäºOpenWhiskçš„æ— æœåŠ¡å™¨è®¡ç®—ï¼Œç¬¬3éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/479492/"><p><img src="https://habrastorage.org/webt/yk/jd/cb/ykjdcbuozxj70sxwrtxebx0l6u8.png"></p><br><p> æœ¬æ–‡æ˜¯Priti <a href="https://medium.com/%40pdesai8">Desai</a>æ’°å†™çš„æœ‰å…³OpenWhiskçš„ä¸€ç³»åˆ—ç¿»è¯‘è¯´æ˜çš„ç»§ç»­ã€‚ ä»Šå¤©ï¼Œæˆ‘ä»¬å°†çœ‹ä¸€ä¸‹éƒ¨ç½²Zipå‡½æ•°ï¼ŒGitHubä¾èµ–é¡¹çš„ç¤ºä¾‹ï¼Œå¹¶æ›´è¯¦ç»†åœ°æè¿°å®¢æˆ·ç«¯å’ŒOpenWhiskæœåŠ¡å™¨ä¹‹é—´çš„å¯¹è±¡åŒæ­¥ã€‚ </p><a name="habracut"></a><br><h2 id="zip-funkcii"> é‚®ç¼–åŠŸèƒ½ </h2><br><p> [å¦‚å…ˆå‰æ‰€ç¤º]ï¼ˆï¼‰ï¼ŒOpenWhiskæ”¯æŒä»å•ä¸ªæºæ–‡ä»¶åˆ›å»ºå‡½æ•°ã€‚ å®ƒè¿˜æ”¯æŒä½¿ç”¨å¸¦æœ‰æºä»£ç çš„å¤šä¸ªæ–‡ä»¶ä»¥åŠè¯¥åŠŸèƒ½æ‰€ä¾èµ–çš„ä¸€ç»„è½¯ä»¶åŒ…æ¥åˆ›å»ºåŠŸèƒ½ã€‚ å‡½æ•°çš„è¿™ç§ç”¨ä¾‹ç§°ä¸ºzipå‡½æ•°ã€‚ è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨<code>wskdeploy</code>éƒ¨ç½²zipå‡½æ•°ã€‚ </p><br><h3 id="shag-pervyy"> ç¬¬ä¸€æ­¥ </h3><br><p> åˆ›å»ºæ¸…å•æ–‡ä»¶ï¼š </p><br><pre> <code class="plaintext hljs">packages: zipaction: actions: my-zip-action: function: actions/my-zip-action runtime: nodejs:6 inputs: name: Amy</code> </pre> <br><p> æˆ‘ä»¬è®¤ä¸º<code>my-zip-action</code>å…·æœ‰è¿™æ ·çš„ç›®å½•ç»“æ„ï¼Œå…¶ä¸­åŒ…å«è¯¥å‡½æ•°çš„æºä»£ç ï¼š </p><br><pre> <code class="plaintext hljs">$ ls actions/my-zip-action index.js package.json</code> </pre> <br><p>  <strong>index.js</strong>æ–‡ä»¶çš„å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">function helloworld(params) { var format = require('string-format'); var name = params.name || 'Stranger'; payload = format('Hello, {}!', name) return { message: payload }; } exports.main = helloworld;</code> </pre> <br><p>  <strong>package.json</strong>æ–‡ä»¶çš„å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">{ "name": "my-zip-action", "description": "Node OpenWhisk zip action to demo Whisk Deploy", "license": "Apache-2.0", "version": "1.0.0", "main": "index.js", "dependencies": { "string-format": "0.5.0" } }</code> </pre> <br><h3 id="shag-vtoroy"> ç¬¬äºŒæ­¥ </h3><br><p> è¿è¡Œnpm installä»¥å®‰è£…å­—ç¬¦ä¸²æ ¼å¼ï¼š </p><br><pre> <code class="plaintext hljs">cd actions/my-action npm install --production</code> </pre> <br><h3 id="shag-tretiy"> ç¬¬ä¸‰æ­¥ </h3><br><p> å±•å¼€zipåŠŸèƒ½ï¼š </p><br><pre> <code class="plaintext hljs">./wskdeploy -i -p actions/my-zip-action/ ____ ___ _ _ _ _ _ /\ \ / _ \ _ __ ___ _ __ | | | | |__ (_)___| | __ /\ /__\ \ | | | | '_ \ / _ \ '_ \| | | | '_ \| / __| |/ / / \____ \ / | |_| | |_) | __/ | | | |/\| | | | | \__ \ &lt; \ \ / \/ \___/| .__/ \___|_| |_|__/\__|_| |_|_|___/_|\_\ \___\/ |_| Packages: Name: zipaction bindings: * action: my-zip-action bindings: - name: name value: Amy Do you really want to deploy this? (y/N): y Deployment completed successfully.</code> </pre> <br><p> æˆ‘ä»¬ä½¿ç”¨ç›¸å…³æ¨¡å—<code>string-format</code>éƒ¨ç½²äº†zipå‡½æ•°<strong>my-zip-action</strong> ã€‚ ä½¿ç”¨<code>function</code>é”®åœ¨æ¸…å•ä¸­æŒ‡å®šç›®å½•æ—¶ï¼Œå°†ä»è¯¥ç›®å½•åˆ›å»ºä¸€ä¸ªzipå½’æ¡£æ–‡ä»¶ï¼Œå¹¶ä»è¯¥å½’æ¡£æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æ‚¨æ— éœ€åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœç´¢å®ƒã€‚ éƒ¨ç½²åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸å…¶ä»–åŠŸèƒ½ç›¸åŒçš„æ–¹å¼æ¥ä½¿ç”¨æ–°åŠŸèƒ½ã€‚ </p><br><h2 id="include-i-exclude-dlya-faylov-v-zip-funkciyah"> åŒ…å«å’Œæ’é™¤zipå‡½æ•°ä¸­çš„æ–‡ä»¶ </h2><br><p>  OpenWhiskå…è®¸æ‚¨ä½¿ç”¨zipå½’æ¡£æ–‡ä»¶åˆ›å»ºå‡½æ•°ï¼Œè¯¥å½’æ¡£æ–‡ä»¶åŒ…å«è¯¥å‡½æ•°çš„ä»»æ„æ•°é‡çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ å¥¹æ‰€æœ‰çš„ç˜¾ã€‚ éƒ¨ç½²æ”¯æŒåœ¨<code>function</code>æŒ‡å®š<code>function</code>ç›®å½•ï¼Œå…¶ä¸­åŒ…å«ä½¿è¯¥å‡½æ•°èµ·ä½œç”¨çš„æ–‡ä»¶ã€‚ å°†æ ¹æ®å·²ç»ä»ä¸­éƒ¨ç½²åŠŸèƒ½çš„ç›®å½•çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ¡£æ¡ˆã€‚ </p><br><h3 id="vklyuchenie-faylov"> æ–‡ä»¶åŒ…å« </h3><br><p> ä»¥å‰ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ª<code>include</code>é”®ï¼Œè¯¥é”®çš„å·¥ä½œæ–¹å¼ä¸ç¼–ç¨‹è¯­è¨€ä¸­çš„<code>import</code>å¤§è‡´ç›¸åŒï¼Œä¾‹å¦‚ï¼Œå…è®¸å¤šä¸ªå‡½æ•°ä½¿ç”¨ä»£ç å¼•ç”¨åŒä¸€åº“ï¼š </p><br><pre> <code class="plaintext hljs">$ cd actions/ $ ls -1 ./ common/ greeting1/ greeting2/ manifest.yaml $ ls -1 common/ utils.js $ ls -1 greeting1/ index.js package.json $ ls -1 greeting2/ index.js package.json</code> </pre> <br><p> æ‚¨å¯ä»¥åœ¨<code>greeting1</code>ç›®å½•ä¸­çœ‹åˆ°<code>index.js</code>æ–‡ä»¶ï¼Œå¹¶åœ¨<code>greeting1</code>ç›®å½•ä¸­çœ‹åˆ°å¦ä¸€ä¸ª<code>index.js</code> ï¼Œå®ƒä»¬éƒ½å¼•ç”¨ä½äº<code>common/</code> <code>utils.js</code> ã€‚ </p><br><p> ä½äº<code>actions/greeting1/</code>ä¸­çš„index.jsæ–‡ä»¶çš„å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">/** * Return a simple greeting message for someone. * * @param name A person's name. * @param place Where the person is from. */ var common = require('./common/utils.js') function main(params) { var name = params.name || params.payload || 'stranger'; var place = params.place || 'somewhere'; var hello = common.hello || 'Good Morning'; return {payload: hello + ', ' + name + ' from ' + place + '!'}; } exports.main = main;</code> </pre> <br><p> ä½äº<code>actions/greeting2/</code>ä¸­çš„index.jsæ–‡ä»¶çš„å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">/** * Return a simple greeting message for someone. * * @param name A person's name. * @param place Where the person is from. */ var common = require('./common/utils.js') function main(params) { var name = params.name || params.payload || 'stranger'; var place = params.place || 'somewhere'; var hello = common.hello || 'Good Evening'; return {payload: hello + ', ' + name + ' from ' + place + '!'}; } exports.main = main;</code> </pre> <br><p>  <code>include</code>é”®å†…éƒ¨åŒ…å«åº”åŒ…å«åœ¨å‡½æ•°ä¸­çš„æ–‡ä»¶æˆ–ç›®å½•çš„åˆ—è¡¨ã€‚ æ­¤åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»å…·æœ‰<code>source</code>å’Œ\æˆ–<code>destination</code> ï¼Œä¾‹å¦‚ï¼š </p><br><pre> <code class="plaintext hljs">include: - [source] - [source, destination]</code> </pre> <br><p> æ³¨æ„äº‹é¡¹ï¼š </p><br><ul><li>  <code>source</code>åŒ…å«æ¥è‡ªåŒ…å«<code>manimanifest.yaml</code>çš„ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚  <code>destination</code>è¡¨ç¤ºæ¥è‡ªå‡½æ•°ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„<code>actions/greeting1</code>å’Œ<code>actions/greeting2</code> ã€‚ </li><li> å¦‚æœæœªæŒ‡å®š<code>destination</code> ï¼Œåˆ™è®¤ä¸ºå®ƒå°†ä¸<code>source</code>ç›¸åŒã€‚ </li></ul><br><p> æ¸…å•æ–‡ä»¶çš„å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">packages: zipactionwithinclude: actions: greeting1: function: actions/greeting1 runtime: nodejs:6 include: - ["actions/common/utils.js", "common/utils.js"] greeting2: function: actions/greeting2 runtime: nodejs:6 include: - ["actions/common/utils.js", "common/utils.js"]</code> </pre> <br><p>  <code>include</code> <code>source</code>å’Œ<code>destination</code>å„ç§ç»„åˆçš„ä½œå“ï¼š </p><br><ul><li> åªæ˜¯<code>source</code> ï¼š </li></ul><br><pre> <code class="plaintext hljs">include: - [actions/common/utils.js]</code> </pre> <br><p> æœ‰äº†æ­¤æ¡ç›®ï¼Œ <code>utils.js</code>å°†è¢«å¤åˆ¶åˆ°<code>actions/greeting/actions/common/utils.js</code> ï¼Œå¹¶ä¸”<code>index.js</code>å¯ä»¥åƒè¿™æ ·å¼•ç”¨å®ƒï¼š </p><br><pre> <code class="plaintext hljs">var utils = require('./actions/common/utils.js')</code> </pre> <br><ul><li> é‡å‘½åä¸­<code>include</code> ï¼š </li></ul><br><pre> <code class="plaintext hljs">include: - ["actions/common/utils.js", "./common/myUtils.js"]</code> </pre> <br><p> æœ‰äº†è¿™ä¸ªå®šä¹‰ï¼Œ <code>utils.js</code>å°†è¢«æ”¾ç½®åœ¨<code>actions/greeting/common/myUtils.js</code> ï¼Œè€Œ<code>index.js</code>å°†ä¼šåƒè¿™æ ·å¼•ç”¨å®ƒï¼š </p><br><pre> <code class="plaintext hljs">var utils = require('./common/myUtils.js')</code> </pre> <br><ul><li> ç”¨å¦ä¸€ç§æ–¹å¼<code>include</code> ï¼š </li></ul><br><pre> <code class="plaintext hljs">include: - ["actions/common/utils.js", "./common/utility/utils.js"]</code> </pre> <br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <code>utils.js</code>å°†è¢«å¤åˆ¶åˆ°<code>actions/greeting/common/utility/utils.js</code> ï¼Œå¹¶å¸¦æœ‰<code>index.js</code>çš„é“¾æ¥ï¼š </p><br><pre> <code class="plaintext hljs">var utils = require('./common/utility/utils.js')</code> </pre> <br><ul><li>  <code>include</code>ç¬¦å·<code>*</code> ï¼š </li></ul><br><pre> <code class="plaintext hljs">include: - ["actions/common/*.js", "./common/"]</code> </pre> <br><p> åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œ <code>utils.js</code>ä»¥åŠå…¶ä»–å¸¦æœ‰æ‰©å±•å<code>.js</code>æ–‡ä»¶å°†è¢«å¤åˆ¶åˆ°<code>actions/greeting/common/</code>ç›®å½•ï¼Œåœ¨<code>index.js</code>è¿™äº›æ–‡ä»¶å°†æŒ‰ä»¥ä¸‹æ–¹å¼è¿æ¥ï¼š </p><br><pre> <code class="plaintext hljs">var utils = require('./common/utils.js')</code> </pre> <br><h3 id="vklyuchenie-katalogov"> ç›®å½•åŒ…å« </h3><br><p> åœ¨<code>include</code>æ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªç›®å½•ï¼Œè¯¥ç›®å½•å°†è¢«é€’å½’å¤åˆ¶åˆ°æŒ‡å®šä½ç½®ï¼Œç„¶åå†åŒ…å«åœ¨å­˜æ¡£ä¸­ã€‚ ä¾‹å¦‚ï¼Œ <code>libs``   ,   </code> <code> </code> greeting3 /``'' <code> </code> <code>libs``   ,   </code> index.js <code>libs``   ,   </code> ï¼š </p><br><pre> <code class="plaintext hljs">$ cd actions/ $ ls -1 libs/ greeting3/ manifest.yaml $ ls -1 libs/ lib1/ lib2/ lib3/ $ ls -1 libs/lib1/ utils.js $ ls -1 libs/lib2/ utils.js $ ls -1 libs/lib3/ utils.js $ ls -1 greeting3/ index.js package.json</code> </pre> <br><p> åœ¨<code>actions/greeting3/</code>ç›®å½•ä¸­index.jsçš„å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">/** * Return a simple greeting message for someone. * * @param name A person's name. * @param place Where the person is from. */ var lib1 = require('./libs/lib1/utils.js') var lib2 = require('./libs/lib2/utils.js') var lib3 = require('./libs/lib3/utils.js') function main(params) { var name = params.name || params.payload || 'stranger'; var place = params.place || 'somewhere'; var hello = lib1.hello || lib2.hello || lib3.hello || 'Hello'; return {payload: hello + ', ' + name + ' from ' + place + '!'}; } exports.main = main;</code> </pre> <br><p> æ¸…å•æ–‡ä»¶çš„å†…å®¹ï¼š </p><br><pre> <code class="plaintext hljs">packages: zipactionwithinclude: actions: greeting3: function: actions/greeting3 runtime: nodejs:6 include: - ["actions/libs/*", "libs/"]</code> </pre> <br><p> åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ <code>libs</code>ç›®å½•å®Œå…¨é€’å½’åœ°å¤åˆ¶åˆ°<code>actions/greeting3/libs/</code> ã€‚ </p><br><p> ç”¨ç¬¦å·<code>*</code>è¿æ¥ç›®å½•ï¼š </p><br><ul><li> èŒƒä¾‹1ï¼š </li></ul><br><pre> <code class="plaintext hljs">include: - ["actions/libs/*/utils.js", "libs/"]</code> </pre> <br><p> é€šè¿‡ç¼–å†™æœ¬æ–‡ï¼Œå°†ä»<code>libs</code>å¤åˆ¶åŒ…å«<code>utils.js</code>æ‰€æœ‰å­ç›®å½•ã€‚ æ¥è‡ª<code>index.js</code>é“¾æ¥å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">var lib1 = require('./libs/lib1/utils.js') var lib2 = require('./libs/lib2/utils.js') var lib3 = require('./libs/lib3/utils.js')</code> </pre> <br><ul><li> èŒƒä¾‹2ï¼š </li></ul><br><pre> <code class="plaintext hljs">include: - ["actions/*/*/utils.js"]</code> </pre> <br><p> ä½¿ç”¨æ­¤æ¡ç›®ï¼Œå°†å¤åˆ¶ä¸æ©ç åŒ¹é…ä¸”åŒ…å«<code>utils.js</code>æ‰€æœ‰å­ç›®å½•ã€‚ ä»<code>index.js</code>è®¿é—®å°†å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">var lib1 = require('./actions/libs/lib1/utils.js') var lib2 = require('./actions/libs/lib2/utils.js') var lib3 = require('./actions/libs/lib3/utils.js')</code> </pre> <br><ul><li> èŒƒä¾‹3ï¼š </li></ul><br><pre> <code class="plaintext hljs">include: - ["actions/*/*/utils.js", "actions/"]</code> </pre> <br><p> æ­¤ç¤ºä¾‹æ˜ç¡®æŒ‡ç¤ºå°†æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°ä½•å¤„ã€‚ ä»<code>index.js</code>è¿›è¡Œçš„è®¿é—®å°†ä¸å‰é¢çš„ç¤ºä¾‹ç›¸åŒã€‚ </p><br><h3 id="isklyuchenie"> ä¾‹å¤–æƒ…å†µ </h3><br><p>  <code>exclude</code>å…³é”®å­—å¯ç”¨ä½œæ–‡ä»¶å’Œç›®å½•çš„åˆ—è¡¨ï¼Œå…è®¸ä½¿ç”¨<code>*</code>å­—ç¬¦å½¢å¼çš„æ©ç ã€‚ ç”¨æ³•ç¤ºä¾‹ï¼š </p><br><pre> <code class="plaintext hljs">exclude: - actions/common/*.js - actions/libs/*/utils.js</code> </pre> <br><p> å…±äº«çš„å¸¸è§ç¤ºä¾‹<code>include</code>å’Œ<code>exclude</code> ï¼š </p><br><pre> <code class="plaintext hljs">packages: zipactionwithexclude: actions: greeting1: function: actions runtime: nodejs:6 exclude: - actions/* include: - ["actions/common/utils.js", "common/utils.js"] - ["actions/index.js", "index.js"] - ["actions/package.json", "package.json"]</code> </pre> <br><h2 id="funkcii-s-github-zavisimostyami"> å…·æœ‰GitHubä¾èµ–é¡¹çš„åŠŸèƒ½ </h2><br><p>  OpenWhiskæ”¯æŒä¾èµ–å…³ç³»ï¼Œå› æ­¤æ‚¨å¯ä»¥æè¿°æˆ‘ä»¬é¡¹ç›®æ‰€ä¾èµ–çš„å…¶ä»–OpenWhiskè½¯ä»¶åŒ…ã€‚ æœ‰äº†è¿™äº›ä¾èµ–å…³ç³»ï¼ŒOpenWhiskä¹Ÿå°†è‡ªåŠ¨éƒ¨ç½²ä¾èµ–çš„ç¨‹åºåŒ…ã€‚ ä»»ä½•å¸¦æœ‰<code>manifest.yaml</code>å’Œ\æˆ–<code>deployment.yaml</code>è½¯ä»¶åŒ…éƒ½å¯ä»¥è¢«è§†ä¸ºä¾èµ–è½¯ä»¶åŒ…ï¼Œå¯ä»¥åœ¨æˆ‘ä»¬çš„é¡¹ç›®æ¸…å•ä¸­æŒ‡å®šã€‚ æ‚¨å¯ä»¥åœ¨<code>dependencies</code>éƒ¨åˆ†çš„æ¸…å•ä¸­æè¿°è¿™ç§ä¾èµ–<code>dependencies</code> ï¼š </p><br><pre> <code class="plaintext hljs">packages: RootProject: dependencies: helloworlds: location: github.com/apache/incubator-openwhisk-test/packages/helloworlds triggers: trigger1: trigger2: rules: rule1: trigger: trigger1 action: helloworlds/hello-js rule2: trigger: trigger2 action: helloworlds/helloworld-js</code> </pre> <br><p> åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ <code>helloworlds</code>æ˜¯æ‰˜ç®¡åœ¨GitHubå­˜å‚¨åº“ä¸Šçš„å¤–éƒ¨è½¯ä»¶åŒ…ï¼Œä½äº<a href="https://github.com/apache/incubator-openwhisk-test">https://github.com/apache/incubator-openwhisk-test</a> ã€‚ å½“æ‚¨éƒ¨ç½²<code>RootProject</code>é¡¹ç›®æ—¶ï¼Œ <code>helloworlds</code>è½¯ä»¶åŒ…å°†æ ¹æ®å…¶æ–‡ä»¶è¿›è¡Œéƒ¨ç½²ï¼Œä»¥éƒ¨ç½²åœ¨<code>packages/helloworlds</code> ã€‚ ä¹Ÿå¯ä»¥æ›´æ”¹ä¾èµ–ç¨‹åºåŒ…çš„åç§°ï¼Œä¾‹å¦‚<code>helloworlds</code>è®¾ç½®<code>ChildProject</code>ä»£æ›¿<code>helloworlds</code> ï¼š </p><br><pre> <code class="plaintext hljs">packages: RootProject: dependencies: ChildProject: location: github.com/apache/incubator-openwhisk-test/packages/helloworlds triggers: trigger1: trigger2: rules: rule1: trigger: trigger1 action: ChildProject/hello-js rule2: trigger: trigger2 action: ChildProject/helloworld-js</code> </pre> <br><p> æ‚¨å¯ä»¥å°†å¤šä¸ªä¾èµ–é¡¹æ·»åŠ åˆ°å¤šä¸ªåŒ…ä¸­ï¼š </p><br><pre> <code class="plaintext hljs">packages: RootProject: dependencies: ChildProject1: location: github.com/apache/incubator-openwhisk-test/packages/helloworlds ChildProject2: location: github.com/apache/incubator-openwhisk-test/packages/hellowhisk sequences: ChildProject1-series: actions: ChildProject1/hello-js, ChildProject1/helloworld-js ChildProject2-series: actions: ChildProject2/greeting, ChildProject2/httpGet triggers: trigger1: trigger2: rules: rule1: trigger: trigger1 action: ChildProject1-series rule2: trigger: trigger2 action: ChildProject2-series</code> </pre> <br><h2 id="kak-rabotaet-sinhronizaciya-proektov-openwhisk-mezhdu-klientom-i-serverom"> å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¦‚ä½•åŒæ­¥OpenWhiské¡¹ç›® </h2><br><p> è¦å›ç­”ï¼Œæ‚¨å¿…é¡»ä»¥<code>managed deployment</code>æ¨¡å¼å¯åŠ¨<code>managed deployment</code> ã€‚ åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒOpenWhiskéƒ¨ç½²æ¸…å•ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶ä¸ºæ¯ä¸ªå¯¹è±¡é™„åŠ ä¸€ä¸ªéšè—çš„æè¿°ï¼Œå³æ‰€è°“çš„  <code>managed</code> ã€‚ æ­¤æè¿°å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">managed: __OW_PROJECT_NAME: MyProjectName __OW_PROJECT_HASH: SHA1("OpenWhisk " + &lt;size_of_manifest_file&gt; + "\0" + &lt;contents_of_manifest_file&gt;) __OW_FILE: Absolute path of manifest file on file system</code> </pre> <br><p> åœ¨è¿™é‡Œï¼ŒOpenWhiskæ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œè€Œâ€œ \ 0â€æ˜¯NULLå­—ç¬¦ã€‚  <em>size_of_manifest_file</em>å’Œ<em>contents_of_manifest_file</em>å–å†³äºæ–‡ä»¶ã€‚ åœ¨<code>managed deployment</code>æ¨¡å¼ä¸‹ï¼ŒåŒä¸€é¡¹ç›®çš„éƒ¨ç½²åºåˆ—åœ¨å®¢æˆ·ç«¯ä¸Šä¸ºæ¯ä¸ªå¯¹è±¡è®¡ç®—ä¸€ä¸ªæ–°çš„<code>__OW_PROJECT_HASH</code> ï¼Œå¹¶å°†å…¶ä¸æœåŠ¡å™¨ä¸ŠåŒä¸€é¡¹ç›®ä¸­çš„<code>__OW_PROJECT_HASH</code>å¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚ ä»¥ä¸‹æœ‰å‡ ä¸ªé€‰é¡¹ã€‚ </p><br><p>  <strong>é€‰é¡¹1</strong> ï¼šå¦‚æœ<code>__OW_PROJECT_HASH</code>åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸ŠåŒ¹é…ï¼Œå³ å¦‚æœå®¢æˆ·ç«¯ä¸Šçš„é¡¹ç›®æ²¡æœ‰æ›´æ”¹ï¼Œåˆ™æœåŠ¡å™¨ä¸Šçš„é¡¹ç›®å°†ä¿æŒåŸæ ·ï¼Œåªæ˜¯é€šè¿‡<code>wskdeploy</code>æ–°å¯¹è±¡è¿›è¡Œéƒ¨ç½²ä»¥æ¥æ”¶<code>deployment.yaml</code>æ–‡ä»¶ä¸­çš„ä»»ä½•æ›´æ”¹ã€‚ </p><br><p>  <strong>é€‰é¡¹2</strong> ï¼šå¦‚æœ<code>__OW_PROJECT_HASH</code>ä¸åŒ¹é…ï¼Œå³ å¦‚æœå®¢æˆ·ç«¯å‘ç”Ÿæ›´æ”¹ï¼Œåˆ™<code>wskdeploy</code>éƒ¨ç½²æ¸…å•ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œç„¶ååœ¨æœåŠ¡å™¨ä¸Šæ›´æ–°å®ƒä»¬<code>__OW_PROJECT_HASH</code> ã€‚  <code>wskdeploy</code>è¿˜ä¼š<code>wskdeploy</code>æ‰€æœ‰å¯¹è±¡ï¼šåŒ…æ‹¬å…·æœ‰ç›¸åŒ<code>__OW_PROJECT_NAME</code>å‡½æ•°ï¼Œåºåˆ—å’Œæ¡ä»¶<code>__OW_PROJECT_NAME</code> ï¼Œå³ å±äºåŒä¸€é¡¹ç›®ï¼Œä½†å…·æœ‰ä¸åŒçš„<code>__OW_PROJECT_HASH</code> ï¼Œå› ä¸ºå¯ä»¥ä»å®¢æˆ·ç«¯æ¸…å•ä¸­åˆ é™¤å®ƒä»¬ã€‚ åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´åŒæ­¥é¡¹ç›®æ—¶ï¼Œæ¸…å•ä¸­çš„é¡¹ç›®åç§°æ˜¯å¿…éœ€çš„ï¼š </p><br><pre> <code class="plaintext hljs">project: name: MyProjectName packages: package1: ....</code> </pre> <br><p> ä»é¡¹ç›®ä¸­åˆ é™¤çš„å¯¹è±¡ä¸­ï¼ŒOpenWhiskä¸­çš„å¯¹è±¡æ˜¯é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä½¿ç”¨å…¶ä»–å·¥å…·æˆ–è‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œäº†éƒ¨ç½²ã€‚ å®ƒä»¬è¢«è§†ä¸ºå¤–éƒ¨å¯¹è±¡ï¼Œå› æ­¤ä¸ä¼šè¢«è¦†ç›–ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨<code>wskdeploy</code>æ­¤ç±»é¡¹ç›®ï¼Œå°†å…¶å®šå‘åˆ°æ¸…å•æ–‡ä»¶ï¼Œè¯¥æ¸…å•æ–‡ä»¶ä»…åŒ…å«é¡¹ç›®åç§°ï¼š </p><br><pre> <code class="plaintext hljs">project: name: MyProjectName</code> </pre> <br><p> è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œä»¥äº†è§£<code>managed deployment</code> ã€‚ åœ¨<a href="https://github.com/apache/incubator-openwhisk-wskdeploy/tree/master/tests/src/integration/managed-deployment">æ­¤å­˜å‚¨åº“ä¸­ï¼Œ</a>æ‚¨å¯ä»¥çœ‹åˆ°å¸¦æœ‰å„ç§æ¸…å•çš„é¡¹ç›®ï¼Œè¿™äº›æ¸…å•æ˜¾ç¤º<code>managed deployment</code> ã€‚ </p><br><h3 id="shag-pervyy-1"> ç¬¬ä¸€æ­¥ </h3><br><p> ä½¿ç”¨<code>managed deployment</code>æ¨¡å¼éƒ¨ç½²<code>MyFirstManagedProject</code> ï¼š </p><br><pre> <code class="plaintext hljs">$wskdeploy -m tests/src/integration/managed-deployment/manifest.yaml --managed Deployment completed successfully.</code> </pre> <br><p><img src="https://habrastorage.org/webt/ax/be/_k/axbe_koglnzos01ssevcmmk9g_u.png"><br>  <em>åœ¨OpenWhiskæœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„å¯¹è±¡åˆ—è¡¨</em> </p><br><p><img src="https://habrastorage.org/webt/ti/oa/qe/tioaqetzsdjcqc12la0vuesuwqe.png"><br>  <em>å±æ€§è¯´æ˜</em> </p><br><h3 id="shag-vtoroy-1"> ç¬¬äºŒæ­¥ </h3><br><p> æˆ‘ä»¬åŒæ­¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨-åˆ é™¤ManagedPackage-2ï¼š </p><br><pre> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/00-manifest-minus-second-package.yaml --managed Deployment completed successfully.</code> </pre> <br><p><img src="https://habrastorage.org/webt/o6/_p/92/o6_p92dnflbyzpvss9b4-4gh_os.png"><br>  <em>MyFirstManagedProjectä¸­åˆ é™¤åçš„å¯¹è±¡åˆ—è¡¨</em> </p><br><h3 id="shag-tretiy-1"> ç¬¬ä¸‰æ­¥ </h3><br><p> æˆ‘ä»¬åŒæ­¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨-æˆ‘ä»¬åˆ é™¤åºåˆ—ManagedSequence-2ï¼š </p><br><pre> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/01-manifest-minus-sequence-2.yaml --managed Deployment completed successfully.</code> </pre> <br><p><img src="https://habrastorage.org/webt/kc/ek/w6/kcekw6zgqnyymwsfgujvqpchbdo.png"><br>  <em>åˆ é™¤åçš„å¯¹è±¡åˆ—è¡¨</em> </p><br><h3 id="shag-chetvertyy"> ç¬¬å››æ­¥ </h3><br><p> åˆ é™¤Helloworld-3å‡½æ•°ï¼š </p><br><pre> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/02-manifest-minus-action-3.yaml --managed Deployment completed successfully.</code> </pre> <br><p><img src="https://habrastorage.org/webt/yp/_k/mm/yp_kmmd9xzftrdtcedme75zqcyg.png"><br>  <em>åˆ é™¤åçš„å¯¹è±¡åˆ—è¡¨</em> </p><br><h3 id="shag-pyatyy"> ç¬¬äº”æ­¥ </h3><br><p> åˆ é™¤ManagedPackage-1ï¼š </p><br><pre> <code class="plaintext hljs">./wskdeploy -m tests/src/integration/managed-deployment/04-manifest-minus-package.yaml --managed Deployment completed successfully.</code> </pre> <br><p><img src="https://habrastorage.org/webt/fr/i9/hl/fri9hlmidofria2oa5aj_5immg8.png"><br>  <em>MyFirstManagedProjectä¸­çš„å…¶ä»–å¯¹è±¡</em> </p><br><h2 id="drugie-stati-cikla"> å…¶ä»–è‡ªè¡Œè½¦æ–‡ç«  </h2><br><p>  <a href="https://habr.com/ru/company/southbridge/blog/477336/">åŸºäºOpenWhiskçš„æ— æœåŠ¡å™¨è®¡ç®—ï¼Œç¬¬1éƒ¨åˆ†</a> <br>  <a href="https://habr.com/ru/company/southbridge/blog/477628/">åŸºäºOpenWhiskçš„æ— æœåŠ¡å™¨è®¡ç®—ï¼Œç¬¬2éƒ¨åˆ†</a> <br>  <a href="https://habr.com/ru/company/southbridge/blog/479492/">åŸºäºOpenWhiskçš„æ— æœåŠ¡å™¨è®¡ç®—ï¼Œç¬¬3éƒ¨åˆ†</a> <br>  <a href="https://habr.com/ru/company/southbridge/blog/481000/">åŸºäºOpenWhiskçš„æ— æœåŠ¡å™¨è®¡ç®—ï¼Œç¬¬4éƒ¨åˆ†</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN479492/">https://habr.com/ru/post/zh-CN479492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN479478/index.html">Javaæ’ä»¶è½»æ¾è‡ªå¦‚</a></li>
<li><a href="../zh-CN479480/index.html">SARIF SDKåŠå…¶é”™è¯¯</a></li>
<li><a href="../zh-CN479482/index.html">SARIF SDKåŠå…¶é”™è¯¯</a></li>
<li><a href="../zh-CN479486/index.html">å¼‚æ„ç¼–ç¨‹å’ŒoneAPIå·¥å…·åŒ…ã€‚ è‹±ç‰¹å°”ä¸“å®¶å³å…´æ¼”è®²å›ç­”æ‚¨çš„é—®é¢˜</a></li>
<li><a href="../zh-CN479488/index.html">ä»ç¬”è®°æœ¬ç”µè„‘-å…·æœ‰å†—ä½™ç”µæºçš„å®¶åº­æœåŠ¡å™¨åˆ°Mikrotikè·¯ç”±å™¨</a></li>
<li><a href="../zh-CN479496/index.html">ç”¨JavaScriptè§£æWTFä»»åŠ¡</a></li>
<li><a href="../zh-CN479498/index.html">çº¿æ€§æ—¶é—´å¦‚ä½•ä»¥Oï¼ˆnÂ²ï¼‰å˜ä¸ºWindows</a></li>
<li><a href="../zh-CN479502/index.html">å¦‚ä½•åº¦è¿‡åœ°çƒå†å²ä¸Šæœ€ä¸¥å³»çš„å†°æ²³æ—¶ä»£ï¼Ÿ</a></li>
<li><a href="../zh-CN479504/index.html">æ„å»ºåŸºäºRaspberry Piçš„RDPç˜¦å®¢æˆ·ç«¯</a></li>
<li><a href="../zh-CN479508/index.html">PostgreSQLåæ¨¡å¼ï¼šæœ‰å®³çš„JOINå’ŒOR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>