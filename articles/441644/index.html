<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò• üå≠ üßòüèº C√≥mo Tinkoff.ru automatiza el an√°lisis con Zeppelin üë®‚Äçüë®‚Äçüëß‚Äçüëß üåö üîù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tinkoff.ru desarrolla muchos servicios en el mercado de servicios financieros. Nuestros analistas, desarrolladores, tecn√≥logos y gerentes resuelven su...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo Tinkoff.ru automatiza el an√°lisis con Zeppelin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/441644/">  Tinkoff.ru desarrolla muchos servicios en el mercado de servicios financieros.  Nuestros analistas, desarrolladores, tecn√≥logos y gerentes resuelven sus tareas cotidianas.  Todos los d√≠as generamos ideas, analizamos, desarrollamos y hacemos todo para crear el mejor producto del mercado. <br><br>  Trabajo como programador de backend en el departamento de desarrollo interno.  Ayudamos a lanzar nuevas l√≠neas de negocio, automatizar el flujo de trabajo e intentar ahorrar un banco de dinero donde sea posible (por ejemplo, negarse a comprar una licencia para alg√∫n tipo de software costoso).  Nuestro flujo de trabajo es muy est√°ndar: los gerentes presentan funciones comerciales, los tecn√≥logos las formalizan y establecen tareas, los analistas analizan los datos y los desarrolladores ya resuelven las tareas que se les asignaron.  Todo en la vida es m√°s complicado, pero eso ya lo sabes. <a name="habracut"></a><br><br>  Uno de nuestros clientes comerciales es nuestro departamento de fidelizaci√≥n de clientes: Tinkoff Target.  Antes de hablar sobre la automatizaci√≥n anal√≠tica, explicar√© c√≥mo funciona nuestro programa de fidelizaci√≥n. <br><br><h3>  Programa de fidelizaci√≥n Tinkoff.ru o c√≥mo distribuimos el reembolso a las personas </h3><br>  Casi todos los bancos modernos emiten reembolsos: en rublos, millas o loros (puntos que puede gastar en algo espec√≠fico). <br><br>  No somos una excepci√≥n, emitimos un reembolso est√°ndar del 1% para todo y del 5% para 3 categor√≠as seleccionadas (por ejemplo, "Transporte", "Cine", "Recuerdos", etc.).  No tiene que dar mucho dinero en efectivo (pero realmente quiero) y, por lo tanto, tenemos ofertas especiales de socios del banco que tambi√©n desean emitir dinero en efectivo.  Entonces, como parte de la l√≠nea de negocios de los programas de lealtad, estamos tratando de encontrar y convencer a varias compa√±√≠as para que emitan reembolsos a nuestros clientes en condiciones de beneficio mutuo.  Estas empresas son nuestros socios. <br><br>  ¬øC√≥mo hacemos esto?  Imagine que hay una empresa condicional Yabloko en el mercado.  La mejor manera de atraer a Yabloko a nuestro programa de devoluci√≥n de dinero es ayudarlo a vender su producto o servicio.  Aqu√≠ la tarea es atraer una audiencia para el socio.  Por ejemplo, clientes que se compran a competidores o clientes que no conocen la existencia de Yabloko.  Y tambi√©n, es posible que Yabloko seleccione a los clientes m√°s adecuados para el perfil que realmente quieren "Yabloko", todav√≠a no lo saben. Estoy hablando de inteligencia artificial y aprendizaje autom√°tico. <br><br>  La tarea de seleccionar ese p√∫blico objetivo recae en los analistas.  Tenemos dos de ellos, y hay muchos socios, m√°s de 1000. Adem√°s de esto, los analistas todav√≠a tienen mucho trabajo interesante y, a medida que crece el n√∫mero de socios, elegir la audiencia adecuada se convierte en una rutina.  Dicha rutina debe automatizarse y convertirse en un solo clic en el bot√≥n (o mejor sin un bot√≥n).  Adem√°s, el proceso de m√∫ltiples etapas para llevar a cabo tales tareas conlleva errores causados ‚Äã‚Äãpor el factor humano.  A continuaci√≥n, le contar√© c√≥mo logramos deshacernos de ese trabajo de rutina. <br><br><h3>  C√≥mo construimos an√°lisis </h3><br>  En Tinkoff.ru, la mayor√≠a de los analistas usan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apache Zeppelin</a> en sus tareas diarias.  Llevamos mucho tiempo esta herramienta en servicio y la estamos desarrollando activamente (incluso comprometi√©ndonos con el c√≥digo abierto).  Todos los empleados tienen acceso a un repositorio global de datos e informes, es decir, a todos los recursos anal√≠ticos de Tinkoff.ru con la posibilidad de utilizar un lenguaje anal√≠tico conveniente. <br><br>  Zeppelin est√° escrito en Java e incluye muchos int√©rpretes de lenguajes y tecnolog√≠as modernas, incluidos Python, Hive, Spark, Groovy, R y muchos otros.  Las secuencias de comandos escritas se almacenan en computadoras port√°tiles, que consisten en p√°rrafos; externamente, la interfaz de usuario del entorno de trabajo es muy similar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Jupyter</a> .  Y la pantalla principal de la aplicaci√≥n es la siguiente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/e3/gi/g-/e3gig-lm8l0vmefyjtulz5_tahq.png" alt="imagen"></div><br>  Cada l√≠nea de negocios aqu√≠ tiene su propio directorio de trabajo con diferenciaci√≥n de los derechos de lectura y edici√≥n. <br><br>  Una gran ventaja para nosotros (desarrolladores) es la disponibilidad de una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API</a> muy conveniente e interactiva.  Con la API, la vida se vuelve m√°s f√°cil.  A trav√©s de la API con esta herramienta, puede hacer lo que quiera, sin pasar por la interfaz de usuario web.  Entonces surgi√≥ la idea de integrar los resultados del trabajo de los analistas en nuestro proyecto. <br><br><h3>  Brevemente sobre nuestro proyecto </h3><br>  Nuestro backend est√° escrito en Java, Frontend en Angular 5 (dado que el proyecto no es joven, parte de la interfaz de usuario est√° escrita en Vaadin, de la que nos estamos deshaciendo lentamente).  La mayor parte del proyecto es una aplicaci√≥n web para que los gerentes trabajen, donde mantienen relaciones con socios, hacen nuevas ofertas especiales, monitorean la implementaci√≥n de sus KPI, etc.  Tenemos una cuenta personal de un socio donde cualquier socio del banco puede observar las estad√≠sticas de sus ofertas especiales lanzadas (acumulaciones, activaci√≥n, etc.), descargar y firmar acuerdos, cuentas y relaciones de documentos en general. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/uq/cz/l9uqcz8olnaxsgvkn789xzanbc0.png" alt="imagen"></div><br>  Enviamos los datos al banco m√≥vil y al portal web a la secci√≥n "Bonos" a trav√©s del servicio web SOAP.  Hay un aterrizaje escrito en React, donde cualquiera puede dejar una solicitud para participar en el programa de fidelizaci√≥n.  Hemos implementado varios mecanismos para calcular el reembolso y las cuotas especiales, integraci√≥n con varios servicios bancarios. <br><br><h3>  Integraci√≥n con Apache Zeppelin </h3><br>  Tradicionalmente, para atraer nuevos socios, los gerentes enviaron a los analistas una carta con un conjunto de deseos de los socios para generar un p√∫blico objetivo.  Los analistas utilizaron guiones previamente escritos en el zool√≥gico de idiomas y magic copy-paste. <br><br>  Obviamente, con la formalizaci√≥n adecuada de los requisitos, puede escribir un script universal, lo cual hicimos nosotros.  Y para ingresar datos formalizados escribieron una IU conveniente.  Solo queda implementar el trabajo con Apache Zeppelin en nuestra aplicaci√≥n web.  El esquema de trabajo de dicha integraci√≥n es el siguiente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lq/vl/nm/lqvlnm1g5ulhayq1bifj_-82ykk.png" alt="imagen"></div><br>  El gerente en el curso de la comunicaci√≥n con el socio crea una tarea en la aplicaci√≥n, completando los par√°metros en el formulario para formar el p√∫blico objetivo.  Un ejemplo de tales par√°metros es el siguiente: <br><br><ul><li>  Categor√≠as BCC y / o c√≥digos MCC en los que el cliente realiza transacciones o realiza transacciones en un determinado per√≠odo de tiempo por ciertos importes con un cierto cheque promedio. </li><li>  Empresas competitivas en las que el cliente transporta o transporta en un determinado per√≠odo de tiempo. </li></ul><br>  y otro <br><br>  Hay muchos par√°metros de este tipo y todos est√°n formalizados en la interfaz de usuario.  Despu√©s de ingresar los par√°metros iniciales, el administrador inicia la operaci√≥n de generaci√≥n y el algoritmo comienza su trabajo: <br><br><ol><li>  Como todos nuestros scripts est√°n escritos en un cuaderno y no queremos cambiarlo, lo clonamos en un directorio separado.  Zeppelin en respuesta a nuestra solicitud nos devuelve la identificaci√≥n del clon, por lo que nos pondremos en contacto con la nueva computadora port√°til.  Clonar scripts de trabajo tambi√©n es conveniente para la administraci√≥n, ya que siempre podemos ver los scripts que se ejecutaron para una tarea espec√≠fica y encontrar el problema. </li><li>  A partir de la versi√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Zeppelin API 0.8,</a> despu√©s de crear una nueva computadora port√°til, debe colocar el acceso CRUD para su posterior administraci√≥n. </li><li>  En uno de los primeros p√°rrafos de una computadora port√°til que funciona, como regla, las variables se declaran y se establecen sus valores predeterminados iniciales, que deben reemplazarse.  En esta etapa, insertamos nuestro p√°rrafo en la computadora port√°til (con la inicializaci√≥n de variables y datos formalizados), que formamos antes de enviar. </li><li>  Luego, con una solicitud ligera para el m√©todo POST, lanzamos nuestra computadora port√°til para su ejecuci√≥n.  O, mejor dicho, ejecutamos nuestros p√°rrafos uno a la vez, para monitorear la ejecuci√≥n de todos los scripts y mostrar el estado de la generaci√≥n del p√∫blico objetivo en la aplicaci√≥n. </li><li>  Al final de la operaci√≥n, el gerente recibe una notificaci√≥n (en caso de que no supervis√≥ el estado del progreso).  El resultado de los scripts es el archivo CSV generado con la audiencia, almacenado en un directorio compartido.  Al lanzar ofertas especiales, podemos generar varias audiencias y fijarlas con un tipo diferente al agregar a la oferta.  Y para audiencias con diferentes tipos, podemos establecer de manera flexible las condiciones y el tama√±o de la acumulaci√≥n de reembolsos. </li></ol><br><h3>  Un poco de an√°lisis grosero </h3><br>  Seg√∫n estimaciones aproximadas, la automatizaci√≥n de la recopilaci√≥n de la audiencia objetivo condujo a la liberaci√≥n de m√°s del 30% del tiempo de trabajo de los analistas (sin contar el tiempo dedicado a la comunicaci√≥n entre analistas y gerentes). <br><br>  Desde junio de 2018 hasta enero de 2019, el n√∫mero de tareas de generaci√≥n completadas supera las 400. Seg√∫n los gerentes de comunicaci√≥n y obteniendo el resultado requerido, pasaron de 0.5 a 4 horas, tomando el tiempo promedio para formar el p√∫blico objetivo de ~ 2 horas, se ahorraron m√°s de 800 horas-hombre. (m√°s de 100 d√≠as h√°biles). <br><br><h3>  En conclusi√≥n </h3><br>  Lo m√°s importante que logr√≥ la integraci√≥n con Zeppelin fue minimizar el factor humano en todas las etapas del proceso de generaci√≥n de audiencia objetivo.  Los errores en la formaci√≥n de una audiencia adecuada para el socio, por regla general, se identifican despu√©s de las acumulaciones.  Es muy dif√≠cil minimizar los costos financieros incurridos y, por los errores cometidos, tiene que pagar un alto precio al dar una devoluci√≥n de dinero a todos en una fila, despu√©s del lanzamiento de la oferta especial. <br><br>  Otra gran ventaja es el cambio de responsabilidad hacia la fuente primaria del proceso, ya que  El "cuello de botella" del factor humano est√° ahora en la zona de la formaci√≥n inicial de datos por parte del gerente.  Y esto significa que el que crea la tarea de generaci√≥n y completa los par√°metros iniciales lo hace con mayor atenci√≥n. <br><br>  Actualmente, seguimos desarrollando integraci√≥n y automatizando tareas anal√≠ticas.  Entonces, usando el lanzamiento remoto de scripts escritos en Zeppelin, desde la aplicaci√≥n generamos varios tipos de informes anal√≠ticos para gerentes que previamente fueron preparados individualmente a pedido. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/441644/">https://habr.com/ru/post/441644/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441628/index.html">Calificaci√≥n de empleadores de TI de San Petersburgo y Mosc√∫ 2018: resultados de una encuesta de desarrolladores</a></li>
<li><a href="../441632/index.html">1 de marzo - Teamlead Meetup: evaluaci√≥n y motivaci√≥n de los empleados</a></li>
<li><a href="../441634/index.html">¬øHay vida bajo Windows 98, segunda parte? Acerca del software</a></li>
<li><a href="../441638/index.html">Piloto militar, f√≠sico nuclear e ingeniero jefe del Kremlin, que fueron los desarrolladores de ASCON en una vida pasada</a></li>
<li><a href="../441642/index.html">Presentaci√≥n de Microsoft HoloLens 2</a></li>
<li><a href="../441646/index.html">C√≥mo funciona la planta inteligente de General Electric</a></li>
<li><a href="../441648/index.html">Presentaci√≥n de Microsoft HoloLens 2</a></li>
<li><a href="../441650/index.html">Webinar Group-IB "Visi√≥n forense sobre la protecci√≥n de objetos CII en 2019"</a></li>
<li><a href="../441654/index.html">C√≥mo realizar una pasant√≠a en una gran empresa de TI</a></li>
<li><a href="../441660/index.html">STM32F103C8T6 como unidad flash con sistema de archivos FAT12</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>