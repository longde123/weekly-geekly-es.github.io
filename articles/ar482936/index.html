<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👠 📚 👨‍🎤 مقدمة إلى ASGI: بناء نظام بيثون ويب غير متزامن ✏️ 🔜 🚩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="مرحبا يا هبر! أقدم إليكم ترجمة المقال "مقدمة إلى ASGI: ظهور نظام Async Python Web Ecosystem" بقلم Florimond Manca. 



 "السلاحف بالقرب من البركة" ، ر...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>مقدمة إلى ASGI: بناء نظام بيثون ويب غير متزامن</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482936/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  مرحبا يا هبر!  أقدم إليكم ترجمة المقال <a href="https://florimond.dev/blog/articles/2019/08/introduction-to-asgi-async-python-web/" rel="nofollow">"مقدمة إلى ASGI: ظهور نظام Async Python Web Ecosystem"</a> بقلم Florimond Manca. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/_f/wj/ns/_fwjnsbv7x23ocxkywukxkhn_pu.jpeg"><br>  <em>"السلاحف بالقرب من البركة" ، ريكارد بارهام على <a href="https://images.unsplash.com/photo-1482642302383-7ba0f8012849%3Fixlib%3Drb-1.2.1%26ixid%3DeyJhcHBfaWQiOjEyMDd9%26auto%3Dformat%26fit%3Dcrop%26w%3D1051%26q%3D80" rel="nofollow">unsplash.com</a></em> </p><br><p style=";text-align:right;direction:rtl">  بيثون لا يقتصر على علوم البيانات ، عاد بيثون تطوير الشبكة مع منعطف غير متزامن جديد في تطوير اللغة! </p><br><p style=";text-align:right;direction:rtl">  تجري العديد من الأحداث المهمة في نظام Python لتطوير الويب.  أحد برامج التشغيل الرئيسية لهذه التغييرات هو <a href="https://asgi.readthedocs.io/en/latest/" rel="nofollow">ASGI</a> - واجهة البوابة غير المتزامنة القياسية. </p><br><p style=";text-align:right;direction:rtl">  لقد ذكرت بالفعل ASGI عدة مرات في مدونتي ، على وجه الخصوص ، عندما أعلنت <a href="https://florimond.dev/blog/articles/2018/12/how-i-built-a-web-framework-and-became-an-open-source-maintainer/" rel="nofollow">Bocadillo</a> ( <em>إطار عمل Python مفتوح المصدر غير متزامن - تقريبًا</em> <a href="https://florimond.dev/blog/articles/2019/07/introducing-tartiflette-starlette/" rel="nofollow">لكل</a> ) <em>.</em> و <a href="https://florimond.dev/blog/articles/2019/07/introducing-tartiflette-starlette/" rel="nofollow">tartiflette-starlette</a> ( <em>مكتبة لبناء واجهة برمجة تطبيقات GraphQL API عبر HTTP عبر ASGI - approx. .</em> ) ، لكنني لم أكتب أبداً مقدمة مفصلة عنه.  الآن سوف أفعل ذلك. </p><br><p style=";text-align:right;direction:rtl">  يستهدف هذا المقال الأشخاص المهتمين بأحدث الاتجاهات في تطوير Python على الويب.  أريد أن أدعوكم في جولة سوف تتعلم منها ما هو ASGI وماذا يعني لتطوير الويب الحديث في عالم Python. </p><br><p style=";text-align:right;direction:rtl">  قبل أن نبدأ ، أود أن أخبرك أنني قمت مؤخرًا بتصميم <a href="https://github.com/florimondmanca/awesome-asgi" rel="nofollow">رائع</a> ، وهي قائمة رائعة لتتبع نظام ASGI البيئي الذي يتوسع باستمرار. </p><a name="habracut"></a><br><h3 id="vse-nachalos-s-asyncawait" style=";text-align:right;direction:rtl">  بدأ كل شيء مع المزامنة / الانتظار </h3><br><p style=";text-align:right;direction:rtl"> على عكس JavaScript أو Go ، وقت ظهورها ، لم توفر Python القدرة على تنفيذ التعليمات البرمجية بشكل غير متزامن.  لفترة طويلة ، لا يمكن تنفيذ التعليمات البرمجية المتوازية في Python إلا بمساعدة المعالجة متعددة الخيوط أو متعددة المعالجات ، أو باستخدام مكتبات شبكات متخصصة مثل eventlet أو gevent أو Twisted.  (في عام 2008 ، كان لدى Twisted واجهة برمجة تطبيقات لل coroutines غير المتزامن ، على سبيل المثال ، في شكل <a href="http://blog.mekk.waw.pl/archives/14-Twisted-inlineCallbacks-and-deferredGenerator.html" rel="nofollow"><code>inlineCallbacks</code> و <code>deferredGenerator</code></a> ) </p><br><p style=";text-align:right;direction:rtl">  لقد تغير كل شيء في بيثون 3.4+.  في Python 3.4 ، <a href="https://www.python.org/dev/peps/pep-3156" rel="nofollow">تم</a> تضمين <a href="https://www.python.org/dev/peps/pep-3156" rel="nofollow">asyncio</a> في المكتبة القياسية ، مما أدى إلى دعم تعدد المهام التعاوني على أساس المولدات <code>yield from</code> بناء الجملة. </p><br><p style=";text-align:right;direction:rtl">  في وقت لاحق في بيثون 3.5 <a href="https://www.python.org/dev/peps/pep-0492/" rel="nofollow">، تمت إضافة بناء جملة</a> <code>async/await</code> .  وبفضل هذا ، ظهر coroutines الأصلي ، بغض النظر عن التنفيذ الأساسي ، مما أدى إلى اندفاع الذهب حول التزامن في بيثون. </p><br><p style=";text-align:right;direction:rtl">  بدأ السباق المجنون!  منذ إصدار الإصدار 3.5 ، قام المجتمع بتزامن كل شيء في مكانه حرفيًا.  إذا كنت مهتمًا ، يتم سرد العديد من المشاريع الناتجة في <a href="https://github.com/aio-libs" rel="nofollow">lio-libs</a> و <a href="https://github.com/timofurrer/awesome-asyncio" rel="nofollow">asyncio رائع</a> . </p><br><p style=";text-align:right;direction:rtl">  كما قد تعتقد ، فإن هذا يعني أيضًا أن خوادم الويب وتطبيقات Python تتجه نحو عدم التزامن.  في الواقع ، كل الرجال اللطفاء يفعلون ذلك!  ( <a href="" rel="nofollow">حتى Django</a> ) ( <em>Habr: <a href="https://habr.com/ru/post/461493/">Django 3.0 سيكون غير متزامن</a> ، تم إصداره بالفعل في 12/02/2019 - تقريبا.</em> ) </p><br><h3 id="obzor-asgi" style=";text-align:right;direction:rtl">  ASGI مراجعة </h3><br><p style=";text-align:right;direction:rtl">  فكيف ASGI تنسجم مع كل هذا؟ </p><br><p style=";text-align:right;direction:rtl">  يمكن اعتبار ASGI من المستوى الأعلى كارتباط يسمح لخوادم وتطبيقات Python غير المتزامنة بالتفاعل مع بعضها البعض.  يكرر العديد من الأفكار المعمارية من <a href="https://www.python.org/dev/peps/pep-3333" rel="nofollow">WSGI</a> ، وغالبًا ما يتم تقديمه كخليفة له مع عدم التزامن المدمج. </p><br><p style=";text-align:right;direction:rtl">  هذه هي الطريقة التي يمكن تمثيلها على الرسم البياني: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/cw/uz/ji/cwuzjibslnldwwt37-ucuh5v6by.png"></p><br><p style=";text-align:right;direction:rtl">  على مستوى عالٍ للغاية ، يعد ASGI واجهة للتواصل بين التطبيقات والخوادم.  ولكن في الواقع ، كل شيء أكثر تعقيدًا قليلاً. </p><br><p style=";text-align:right;direction:rtl">  لفهم كيف يعمل ASGI حقًا ، دعنا نلقي نظرة على <a href="https://asgi.readthedocs.io/en/latest/specs/main.html" rel="nofollow">مواصفات ASGI</a> . </p><br><p style=";text-align:right;direction:rtl">  يتكون ASGI من عنصرين مختلفين: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  خادم بروتوكول - يستمع على مآخذ وتحويلها إلى اتصالات ورسائل الأحداث داخل كل اتصال. </li><li style=";text-align:right;direction:rtl">  تطبيق ( <em>تطبيق</em> ) ، يعيش داخل خادم البروتوكول ، يتم إنشاء مثيله مرة واحدة لكل اتصال ويقوم بمعالجة رسائل الأحداث فور حدوثها. </li></ol><br><p style=";text-align:right;direction:rtl">  وبالتالي ، وفقًا للمواصفات ، فإن ما يشير إليه ASGI حقًا هو تنسيق الرسالة وكيف ينبغي نقل هذه الرسائل بين التطبيق وخادم البروتوكول الذي يقوم بتشغيله. </p><br><p style=";text-align:right;direction:rtl">  الآن يمكننا عمل نسخة أكثر تفصيلاً من المخطط: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/mx/8p/vd/mx8pvdbvnscbq28i8mwmuj5ntu0.png"></p><br><p style=";text-align:right;direction:rtl">  هناك العديد من التفاصيل الأكثر إثارة للاهتمام في البروتوكول.  على سبيل المثال ، يمكنك إلقاء نظرة على <a href="https://asgi.readthedocs.io/en/latest/specs/www.html" rel="nofollow">مواصفات HTTP و WebSocket</a> . </p><br><p style=";text-align:right;direction:rtl">  بالإضافة إلى ذلك ، على الرغم من أن المواصفات تركز بشدة على التفاعل بين الخادم والتطبيق ، إلا أن ASGI يتمكن من تغطية العديد من الجوانب. </p><br><p style=";text-align:right;direction:rtl">  وصلنا إلى هذا في غضون دقيقة ، ولكن أولاً ... </p><br><h3 id="osnovy-asgi" style=";text-align:right;direction:rtl">  أساسيات ASGI </h3><br><p style=";text-align:right;direction:rtl">  الآن وبعد أن رأينا كيف تتوافق ASGI مع نظام Python على الويب ، دعونا نلقي نظرة فاحصة على كيفية ترجمة هذا إلى رمز. </p><br><p style=";text-align:right;direction:rtl">  يعتمد ASGI على نموذج بسيط: عندما يتصل العميل بخادم ، يتم إنشاء مثيل تطبيق.  ثم يتم نقل البيانات الواردة إلى التطبيق ويتم إرسال جميع البيانات التي يتم إرجاعها مرة أخرى. </p><br><p style=";text-align:right;direction:rtl">  إن نقل البيانات إلى التطبيق هنا يعني في الواقع <em>الاتصال بالتطبيق</em> كما لو كانت وظيفة ، أي:  شيء يأخذ بعض المدخلات وإرجاع الإخراج. </p><br><p style=";text-align:right;direction:rtl">  في الواقع ، كل ما يمثله تطبيق ASGI هو أمر <em>قابل للاستدعاء</em> (يسمى كائن).  يتم تحديد المعلمات الخاصة بالكائن المسمى ، مرة أخرى ، <a href="https://asgi.readthedocs.io/en/latest/specs/main.html" rel="nofollow">بواسطة مواصفات ASGI</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">app</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(scope, receive, send)</span></span></span><span class="hljs-function">:</span></span> ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  توقيع هذه الوظيفة هو بالضبط ما تعنيه كلمة "أنا" في "ASGI": الواجهة التي يجب أن يطبقها التطبيق حتى يتمكن الخادم من الاتصال بها. </p><br><p style=";text-align:right;direction:rtl">  لنلقِ نظرة على معلمات الوظيفة: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>scope</code> هو قاموس يحتوي على معلومات حول طلب وارد.  محتوياته مختلفة <a href="https://asgi.readthedocs.io/en/latest/specs/www.html" rel="nofollow">لاتصالات</a> <a href="https://asgi.readthedocs.io/en/latest/specs/www.html" rel="nofollow">HTTP</a> و <a href="https://asgi.readthedocs.io/en/latest/specs/www.html" rel="nofollow">WebSocket</a> . </li><li style=";text-align:right;direction:rtl">  <code>receive</code> هي وظيفة غير متزامن لتلقي رسائل حول أحداث ASGI. </li><li style=";text-align:right;direction:rtl">  <code>send</code> هي وظيفة غير متزامن لإرسال رسائل حول أحداث ASGI. </li></ul><br><p style=";text-align:right;direction:rtl">  في الواقع ، تسمح لك هذه المعلمات بتلقي ( <code>receive()</code> ) وإرسال ( <code>send()</code> ) بيانات عبر قناة الاتصال التي يدعمها خادم البروتوكول ، وكذلك فهم السياق الذي تم إنشاء هذه القناة فيه (أو <code>scope</code> ). </p><br><p style=";text-align:right;direction:rtl">  لا أعرف عنك ، لكني معجب حقًا بالمظهر العام لهذه الواجهة وبنيتها.  في أي حال ، الآن دعونا نلقي نظرة على نموذج التعليمات البرمجية. </p><br><h3 id="pokazhite-kod" style=";text-align:right;direction:rtl">  عرض الكود! </h3><br><p style=";text-align:right;direction:rtl">  للحصول على فكرة عملية عما يبدو عليه ASGI ، قمتُ بإنشاء مشروع بسيط على ASGI العاري يوضح تطبيق HTTP يخدمه <a href="https://www.uvicorn.org/" rel="nofollow">uvicorn</a> (خادم ASGI شائع): </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">app</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(scope, receive, send)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> scope[<span class="hljs-string"><span class="hljs-string">"type"</span></span>] == <span class="hljs-string"><span class="hljs-string">"http"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> send({ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"http.response.start"</span></span>, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">"headers"</span></span>: [ [<span class="hljs-string"><span class="hljs-string">b"content-type"</span></span>, <span class="hljs-string"><span class="hljs-string">b"text/plain"</span></span>], ] }) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> send({ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"http.response.body"</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>: <span class="hljs-string"><span class="hljs-string">b"Hello, world!"</span></span>, })</code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>شفرة المصدر - <a href="https://glitch.com/edit/" rel="nofollow">https://glitch.com/edit/#!/asgi-hello-world</a></em> </p><br><p style=";text-align:right;direction:rtl">  هنا نستخدم <code>send()</code> لإرسال استجابة HTTP إلى العميل: أولاً نرسل الرؤوس ، ثم نص الاستجابة. </p><br><p style=";text-align:right;direction:rtl">  أعترف أنه نظرًا لجميع هذه القواميس والبيانات الثنائية الأولية ، فإن ASGI العارية ليست ملائمة جدًا للعمل. </p><br><p style=";text-align:right;direction:rtl">  لحسن الحظ ، هناك خيارات من المستوى الأعلى - وذلك عندما أبدأ الحديث عن <a href="https://www.starlette.io/" rel="nofollow">Starlette</a> . </p><br><p style=";text-align:right;direction:rtl">  Starlette هو مشروع رائع حقًا ، وفي رأيي ، جزء أساسي من النظام البيئي ASGI. </p><br><p style=";text-align:right;direction:rtl">  باختصار ، يوفر مجموعة من المكونات عالية المستوى ، مثل الطلبات والإجابات ، التي يمكنك استخدامها للتخلص من بعض تفاصيل ASGI.  هنا ، ألق نظرة على "عالم الترحيب" في Starlette: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># app.py from starlette.responses import PlainTextResponse async def app(scope, receive, send): assert scope["type"] == "http" response = PlainTextResponse("Hello, world!") await response(scope, receive, send)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  لدى Starlette كل ما تتوقعه من إطار ويب حقيقي - التوجيه ، الوسيطة ، إلخ.  لكنني قررت عرض هذه النسخة المخففة للإشارة إلى القوة الحقيقية لـ ASGI ، والتي ... </p><br><h3 id="cherepahi-na-vsem-puti" style=";text-align:right;direction:rtl">  السلاحف على طول الطريق </h3><br><p style=";text-align:right;direction:rtl">  مفهوم مثير للاهتمام وتغيير القواعد في ASGI هو <a href="https://simonwillison.net/2019/Jun/23/datasette-asgi/" rel="nofollow">السلاحف على طول الطريق</a> ، وهو تعبير اخترع في الأصل (على ما أظن؟) بقلم أندرو غودوين ، الذي أنشأ Django Migrations ويعمل حاليًا على <a href="https://www.youtube.com/watch%3Fv%3DoMHrDy62kgE" rel="nofollow">Django لدعم عدم التزامن</a> . </p><br><p style=";text-align:right;direction:rtl">  ولكن ماذا يعني هذا بالضبط؟ </p><br><p style=";text-align:right;direction:rtl">  نظرًا لأن ASGI عبارة عن مجموعة تجريدية تتيح لنا تحديد السياق الذي نحن فيه وتلقي البيانات وإرسالها في أي وقت ، هناك فكرة أن ASGI يمكن استخدامها ليس فقط بين الخوادم والتطبيقات ، ولكن أيضًا في أي مكان في الحزمة. </p><br><p style=";text-align:right;direction:rtl">  على سبيل المثال ، كائن <code>Response</code> Starlette هو تطبيق ASGI نفسه.  في الواقع ، يمكننا تقصير الكود في المثال التطبيق أعلاه لهذا: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># app.py app = PlainTextResponse("Hello, world!")</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  كيف سخيفة لا تبدو؟ </p><br><p style=";text-align:right;direction:rtl">  لكن مهلا ، هذا ليس كل شيء. </p><br><p style=";text-align:right;direction:rtl">  تتمثل النتيجة الأعمق لـ "السلاحف على طول الطريق" في أنه يمكننا إنشاء جميع أنواع التطبيقات والبرامج الوسيطة والمكتبات وغيرها من المشاريع والتأكد من توافقها طالما أنها جميعًا تنفذ واجهة تطبيق ASGI. </p><br><p style=";text-align:right;direction:rtl">  (بالإضافة إلى ذلك ، من تجربتي الشخصية في بناء <a href="https://bocadilloproject.github.io/" rel="nofollow">Bocadillo</a> ، يؤدي قبول واجهة ASGI في كثير من الأحيان (إن لم يكن دائمًا) إلى رمز أكثر نظافة) </p><br><p style=";text-align:right;direction:rtl">  على سبيل المثال ، يمكننا إنشاء برنامج وسيط ASGI (أي تطبيق يلف تطبيقًا آخر) لعرض الوقت الذي استغرقه إكمال الطلب: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># app.py import time class TimingMiddleware: def __init__(self, app): self.app = app async def __call__(self, scope, receive, send): start_time = time.time() await self.app(scope, receive, send) end_time = time.time() print(f"Took {end_time - start_time:.2f} seconds")</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  لاستخدامها ، نحن ببساطة التفاف التطبيق معها ... </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># app.py import asyncio from starlette.responses import PlainTextResponse async def app(scope, receive, send): await asyncio.sleep(1) response = PlainTextResponse("Hello, world!") await response(scope, receive, send) app = TimingMiddleware(app)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ... وسوف تعمل بطريقة سحرية فقط. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ uvicorn app:app INFO: Started server process [59405] INFO: Waiting for application startup. INFO: Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit) ... INFO: ('127.0.0.1', 62718) - "GET / HTTP/1.1" 200 Took 1.00 seconds</code> </pre> <br><p style=";text-align:right;direction:rtl">  إنه <code>TimingMiddleware</code> أنه في <code>TimingMiddleware</code> يمكنك التفاف أي تطبيق ASGI.  يعد التطبيق الداخلي في هذا المثال بسيطًا للغاية ، ولكنه قد يكون مشروعًا حقيقيًا ومتكاملًا (تخيل المئات من واجهات برمجة التطبيقات ونقاط نهاية WebSocket) - لا يهم طالما أن الواجهة متوافقة مع ASGI. </p><br><p style=";text-align:right;direction:rtl">  (هناك إصدار من هذه الوسيطة أكثر استعدادًا للاستخدام الصناعي: <a href="https://github.com/steinnes/timing-asgi" rel="nofollow">timit-asgi</a> .) </p><br><h3 id="pochemu-eto-dolzhno-volnovat" style=";text-align:right;direction:rtl">  لماذا يجب أن تهتم؟ </h3><br><p style=";text-align:right;direction:rtl">  على الرغم من أنني أعتقد أن التوافق حجة قوية جدًا ، إلا أن هناك العديد من المزايا لاستخدام المكونات المستندة إلى ASGI لإنشاء تطبيقات الويب Python. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  السرعة: إن الطبيعة غير المتزامنة لتطبيقات وخوادم ASGI تجعلها <a href="https://www.techempower.com/benchmarks/" rel="nofollow">سريعة حقًا</a> (على الأقل بالنسبة لبيثون) - نحن نتحدث عن 60 إلى 70 ألف طلب في الثانية (على افتراض أن Flask و Django يصلان فقط إلى 10-20 كيلو في وضع مماثل). </li><li style=";text-align:right;direction:rtl">  الميزات: تمنحك خوادم ومنصات ASGI إمكانية الوصول إلى وظائف متوازية بشكل أساسي (WebSocket و Server-Sent Events و HTTP / 2) التي لا يمكن تنفيذها باستخدام رمز متزامن و WSGI. </li><li style=";text-align:right;direction:rtl">  الاستقرار: ASGI كمواصفات موجودة منذ 3 سنوات ، ويعتبر الإصدار 3.0 مستقرًا جدًا.  ونتيجة لذلك ، فإن الأجزاء الرئيسية للنظام الإيكولوجي تستقر. </li></ul><br><p style=";text-align:right;direction:rtl">  من وجهة نظر المكتبات والأدوات ، لا أعتقد أنه يمكننا القول إننا وصلنا إلى المستوى المطلوب.  ولكن بفضل مجتمع نشط للغاية ، لدي آمال كبيرة في أن يصل النظام البيئي لـ ASGI قريبًا إلى تكافؤ الوظائف مع النظام البيئي التقليدي المتزامن / WSGI. </p><br><h3 id="gde-mozhno-nayti-komponenty-sovmestimye-s-asgi" style=";text-align:right;direction:rtl">  أين يمكنني العثور على مكونات متوافقة مع ASGI؟ </h3><br><p style=";text-align:right;direction:rtl">  في الواقع ، المزيد والمزيد من الناس يبنون ويحسنون المشاريع القائمة على ASGI.  من الواضح أن هذه الخوادم وأطر الويب ، ولكن هناك تطبيقات وسيطة موجهة نحو المنتج مثل <a href="https://github.com/simonw/datasette" rel="nofollow">Datasette</a> أيضًا. </p><br><p style=";text-align:right;direction:rtl">  فيما يلي بعض الأمثلة للمكونات غير المستندة إلى الويب التي تهمني: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Mangum: دعم ASGI لـ AWS Lambda. </li><li style=";text-align:right;direction:rtl">  <a href="https://github.com/simonw/datasette-auth-github" rel="nofollow">datasette-auth-github</a> : مصادقة جيثب لتطبيقات ASGI. </li><li style=";text-align:right;direction:rtl">  <a href="https://github.com/tartiflette/tartiflette-starlette" rel="nofollow">tartiflette-starlette</a> (لقد كتبت!): دعم ASGI لـ Tartiflette ، محرك GraphQL غير متزامن. </li></ul><br><p style=";text-align:right;direction:rtl">  إنه لأمر مدهش أن نلاحظ أن النظام الإيكولوجي يتطور بنجاح ، ومع ذلك ، كان من الصعب علي شخصياً مواكبة التغييرات. </p><br><p style=";text-align:right;direction:rtl">  هذا هو السبب في أنني خلقت <a href="https://github.com/florimondmanca/awesome-asgi" rel="nofollow">رهيبة asgi</a> .  آمل أن يساعد هذا الجميع على مواكبة كل الأشياء المدهشة التي تحدث في عالم ASGI.  (ولأنه وصل إلى ما يقرب من 100 نجم في غضون أيام قليلة ، لدي شعور بأن هناك بالفعل حاجة لجمع معلومات حول موارد ASGI في مكان واحد.) </p><br><h3 id="vyvody" style=";text-align:right;direction:rtl">  النتائج </h3><br><p style=";text-align:right;direction:rtl">  على الرغم من أن هذا قد يبدو مثل تفاصيل التنفيذ ، إلا أنني متأكد من أن ASGI قد أرست الأساس لعصر جديد في تطوير الويب Python. </p><br><p style=";text-align:right;direction:rtl">  إذا كنت ترغب في معرفة المزيد عن ASGI ، تحقق من <a href="https://github.com/florimondmanca/awesome-asgi" rel="nofollow">المنشورات</a> المختلفة (المقالات والخطب) المدرجة في <code>awesome-asgi</code> .  إذا كنت ترغب في لمسها ، فجرب أيًا من المشاريع التالية: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://www.uvicorn.org/" rel="nofollow">uvicorn</a> : خادم <a href="https://www.uvicorn.org/" rel="nofollow">ASGI</a> . </li><li style=";text-align:right;direction:rtl">  Starlette: إطار ASGI. </li><li style=";text-align:right;direction:rtl">  <em><a href="https://fastapi.tiangolo.com/" rel="nofollow">FastAPI</a> ، <a href="https://habr.com/ru/post/478620/">مقال عن</a> <a href="https://fastapi.tiangolo.com/" rel="nofollow">Habr</a> : إطار عمل يستند إلى Starlette و Pydantic (شكرًا <a href="https://habr.com/ru/users/morz3/" class="user_link">لك morz3</a> ، <a href="https://habr.com/ru/users/morz3/" class="user_link">تقريبًا لكل</a> .)</em> </li><li style=";text-align:right;direction:rtl">  <a href="https://www.encode.io/typesystem/" rel="nofollow">TypeSystem</a> : التحقق من صحة البيانات وتقديم النموذج. </li><li style=";text-align:right;direction:rtl">  <a href="https://www.encode.io/databases/" rel="nofollow">قواعد البيانات</a> : مكتبة قاعدة البيانات غير المتزامنة. </li><li style=";text-align:right;direction:rtl">  <a href="https://github.com/encode/orm" rel="nofollow">orm</a> : ORM غير المتزامن. </li><li style=";text-align:right;direction:rtl">  <a href="httpx/" rel="nofollow">HTTPX</a> : عميل HTTP غير متزامن مع دعم للاتصال بتطبيقات ASGI (مفيد كعميل للاختبار). </li></ul><br><p style=";text-align:right;direction:rtl">  تم إنشاء هذه المشاريع ودعمها من قبل Encode ، وبشكل رئيسي توم كريستي.  هناك مناقشات مفتوحة حول <a href="https://discuss.encode.io/t/setting-up-a-maintainence-team/721/9" rel="nofollow">إنشاء فريق دعم Encode</a> ، لذلك إذا كنت تبحث عن فرصة للمشاركة في تطوير المصادر المفتوحة ، فستتاح لك هذه الفرصة! </p><br><p style=";text-align:right;direction:rtl">  استمتع بالسفر إلى عالم ASGI! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar482936/">https://habr.com/ru/post/ar482936/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar482926/index.html">القوس هو نظام للتحكم في الإصدار لمحتوى. تقرير ياندكس</a></li>
<li><a href="../ar482928/index.html">رؤية المفترس: تأثير الرؤية الحرارية</a></li>
<li><a href="../ar482930/index.html">أبحاث الأنساب - الكتب المترية والتعدادات والمحفوظات وقواعد البيانات المفتوحة</a></li>
<li><a href="../ar482932/index.html">IIoT - أو كيفية مساعدة الموظفين على استخدام عقولهم على النحو المنشود</a></li>
<li><a href="../ar482934/index.html">فشل مشروع تخطيط موارد المؤسسات (Liqui Moly و Otto وغيرهم من أمثاله)</a></li>
<li><a href="../ar482938/index.html">تطبيق مبادئ البرمجة الوظيفية في تصميم ERP</a></li>
<li><a href="../ar482942/index.html">الخرافات والأساطير من Fediverse القديمة</a></li>
<li><a href="../ar482944/index.html">متعدد مكونات ناقل موزع</a></li>
<li><a href="../ar482946/index.html">1С DSS وتقدير شروط وتكاليف المشاريع حسب طريقة COCOMO II</a></li>
<li><a href="../ar482948/index.html">"واحد ، اثنان ، ثلاثة - حرق شجرة عيد الميلاد!" أو أول نظرة لي على وحدة تحكم صغيرة CANNY 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>