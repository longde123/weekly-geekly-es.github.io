<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✍🏾 🤚🏼 👨‍👧‍👦 Wir erstellen ein Plugin-Projekt mit der Kompilierung für verschiedene Versionen von Revit / AutoCAD 🕴🏻 👨🏿‍✈️ 🥪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bei der Entwicklung von Plugins für CAD-Anwendungen ( in meinem Fall AutoCAD, Revit und Renga) tritt mit der Zeit ein Problem auf: Es werden neue Vers...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir erstellen ein Plugin-Projekt mit der Kompilierung für verschiedene Versionen von Revit / AutoCAD</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482308/"><img src="https://habrastorage.org/webt/u7/vh/xi/u7vhxitqphrjiza_fsmzmoclmha.png"><br><br><p>  Bei der Entwicklung von Plugins für CAD-Anwendungen ( <a href="https://modplus.org/ru/" rel="nofollow">in meinem Fall</a> AutoCAD, Revit und Renga) tritt mit der Zeit ein Problem auf: Es werden neue Versionen von Programmen veröffentlicht, Änderungen an der API und neue Versionen von Plugins müssen vorgenommen werden. </p><br><p>  Wenn Sie nur ein Plugin haben oder noch ein Autodidakt sind, können Sie einfach eine Kopie des Projekts erstellen, die erforderlichen Stellen darin ändern und eine neue Version des Plugins erstellen.  Dementsprechend führen spätere Änderungen des Kodex zu einer mehrfachen Erhöhung der Arbeitskosten. </p><br><p>  Wenn Sie Erfahrung und Wissen sammeln, finden Sie verschiedene Möglichkeiten, diesen Prozess zu automatisieren.  Ich bin diesen Weg gegangen und möchte Ihnen sagen, wozu ich am Ende gekommen bin und wie praktisch es ist. </p><a name="habracut"></a><br><p>  Betrachten Sie zunächst eine Methode, die offensichtlich ist und die ich seit langer Zeit verwende </p><br><h3>  Links zu Projektdateien </h3><br><p>  Und um alles einfach, klar und verständlich zu machen, beschreibe ich alles anhand eines abstrakten Beispiels für die Plug-In-Entwicklung. </p><br><p>  Öffnen Sie Visual Studio (ich habe die Community 2019-Version. Und ja - auf Russisch) und erstellen Sie eine neue Lösung.  Nennen wir es <b>MySuperPluginForRevit</b> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_1.png" alt="image1"><br><br><p>  Wir werden ein Plugin für Revit für die Versionen 2015-2020 erstellen.  Daher erstellen wir ein neues Projekt in der Lösung (Net Framework Class Library) und nennen es <b>MySuperPluginForRevit_2015</b> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_2.png" alt="image2"><br><br><p>  Wir müssen Links zur Revit-API hinzufügen.  Natürlich können wir Links zu lokalen Dateien hinzufügen (Sie müssen alle erforderlichen SDKs oder alle Versionen von Revit installieren), aber wir gehen den richtigen Weg und verbinden das NuGet-Paket.  Sie können nicht eine kleine Anzahl von Paketen finden, aber ich werde meine eigenen verwenden. </p><br><p>  Klicken Sie nach dem Verbinden des Pakets mit der rechten <em>Maustaste auf den Eintrag</em> " <em>Links</em> " und wählen <em>Sie</em> im Menü " <em>Pakete.config nach PackageReference übertragen ...</em> " </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_3.png" alt="image3"><br><br><p>  Wenn Sie an dieser Stelle plötzlich in Panik geraten, weil das Eigenschaftenfenster des Pakets nicht den wichtigen Punkt " <em>Lokal kopieren</em> " enthält, den wir definitiv auf " <em>Falsch" setzen müssen</em> , sollten Sie nicht in Panik geraten. Gehen Sie zum Projektordner und öffnen Sie die Datei mit der Erweiterung. csproj in einem bequemen Editor (ich benutze Notepad ++) und wir finden dort eine Aufzeichnung über unser Paket.  Es sieht jetzt so aus: </p><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Fügen Sie die <em>Eigenschaft &lt;ExcludeAssets&gt; Runtime &lt;/ ExcludeAssets&gt; hinzu</em> .  Es stellt sich so heraus: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Wenn Sie jetzt ein Projekt erstellen, werden Dateien aus dem Paket nicht in den Ausgabeordner kopiert. <br>  Wir gehen weiter - stellen Sie sich sofort vor, dass unser Plugin etwas von der Revit-API verwendet, die sich mit der Veröffentlichung neuer Versionen geändert hat.  Nun, oder einfach, wir müssen etwas am Code ändern, abhängig von der Version von Revit, für die wir das Plugin erstellen.  Um solche Unterschiede im Code zu beheben, werden bedingte Kompilierungssymbole verwendet.  Öffnen Sie die Projekteigenschaften, <strong>wechseln Sie zur</strong> Registerkarte " <em>Baugruppe</em> " und schreiben <strong>Sie</strong> in das Feld " <em>Bedingte Kompilierungssymbole</em> " <strong>R2015</strong> . </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_4.png" alt="image4"><br><br><p>  Beachten Sie, dass das Symbol sowohl für die Debug-Konfiguration als auch für die Release-Konfiguration hinzugefügt werden muss. </p><br><p>  Nun, während wir uns im Eigenschaftenfenster befinden, gehen wir sofort zur Registerkarte " <em>Anwendung</em> " und löschen im Feld " <em>Standard-Namespace</em> " das Suffix <strong>_2015,</strong> so dass unser Namespace universell und unabhängig vom Assemblynamen ist: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_5.png" alt="image5"><br><br><p>  In meinem Fall werden im Endprodukt Plugins aller Versionen in einem Ordner abgelegt, sodass meine Assembly-Namen mit dem Suffix der Form <strong>_20xx verbleiben</strong> .  Sie können das Suffix jedoch auch aus dem Assemblynamen entfernen, wenn der Speicherort der Dateien in verschiedenen Ordnern angenommen wird. </p><br><p>  Wir übergeben den Code der Datei <em>Class1.cs</em> und simulieren dort einen Code unter Berücksichtigung verschiedener Revit-Versionen: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MySuperPluginForRevit</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.Attributes; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.DB; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Autodesk.Revit.UI; [Regeneration(RegenerationOption.Manual)] [Transaction(TransactionMode.Manual)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Class1</span></span> : <span class="hljs-title"><span class="hljs-title">IExternalCommand</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Result </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ExternalCommandData commandData, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message, ElementSet elements</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> R2015 TaskDialog.Show("ModPlus", "Hello Revit 2015"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2016 TaskDialog.Show("ModPlus", "Hello Revit 2016"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2017 TaskDialog.Show("ModPlus", "Hello Revit 2017"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2018 TaskDialog.Show("ModPlus", "Hello Revit 2018"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2019 TaskDialog.Show("ModPlus", "Hello Revit 2019"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> R2020 TaskDialog.Show("ModPlus", "Hello Revit 2020"); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> return Result.Succeeded; } } }</span></span></code> </pre> <br><p>  Ich habe sofort alle Revit-Versionen über der Version 2015 (die zum Zeitpunkt des Schreibens vorlagen) berücksichtigt und sofort das Vorhandensein bedingter Kompilierungssymbole berücksichtigt, die ich mit derselben Vorlage erstelle. </p><br><p>  Wir kommen zum Haupthighlight.  Wir erstellen ein neues Projekt in unserer Lösung, nur für die Plugin-Version für Revit 2016. Wir wiederholen alle oben beschriebenen Schritte bzw. ersetzen die Nummer 2015 durch die Nummer 2016. Wir löschen jedoch die Datei <em>Class1.cs</em> aus dem neuen Projekt. </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_6.png" alt="image6"><br><br><p>  Die Datei mit dem gewünschten Code - <em>Class1.cs</em> - haben wir bereits und müssen nur noch einen Link in das neue Projekt einfügen.  Es gibt zwei Möglichkeiten, Links einzufügen: </p><br><ol><li>  <strong>Langes</strong> Anklicken des Projekts mit der rechten Maustaste, Auswahl des Punktes " <em>Hinzufügen</em> " -&gt; " <em>Vorhandenes Element</em> ", im sich öffnenden Fenster die gewünschte Datei suchen und anstelle der Option " <em>Hinzufügen</em> " die Option " <em>Als Link</em> <em>hinzufügen</em> " auswählen </li></ol><br><img src="https://blog.modplus.org/images/Blog/Blog24_7.png" alt="image7"><br><br><ol><li>  <strong>Kurz</strong> - <strong>Wählen Sie</strong> rechts im Projektmappen-Explorer die gewünschte Datei (oder sogar Dateien oder sogar ganze Ordner) aus und ziehen Sie sie mit gedrückter Alt-Taste in das neue Projekt.  Beim Ziehen sehen Sie, dass sich der Mauszeiger beim Drücken der Alt-Taste von einem Pluszeichen in einen Pfeil ändert. <br>  <strong>UPD:</strong> Ich habe in diesem Abschnitt ein wenig Verwirrung gestiftet. Um mehrere Dateien zu übertragen, halten Sie die <strong>Tastenkombination Umschalt + Alt</strong> gedrückt. </li></ol><br><p>  Nach dem Vorgang sehen wir im zweiten Projekt die Datei <em>Class1.cs</em> mit dem entsprechenden Symbol (blauer Pfeil): </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_8.png" alt="image8"><br><br><p>  Beim Bearbeiten des Codes im Editorfenster können Sie auch auswählen, in welchem ​​Projekt der Code angezeigt werden soll. Auf diese Weise können Sie sehen, wie der Code mit verschiedenen Symbolen für die bedingte Kompilierung bearbeitet wird: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_9.png" alt="image9"><br><br><p>  Nach diesem Schema erstellen wir alle anderen Projekte (2017-2020).  Life Hack - Wenn Sie Dateien im Solution Explorer nicht aus dem Basisprojekt ziehen und ablegen, sondern aus dem Projekt, in dem sie bereits als Link eingefügt sind, können Sie die Alt-Taste nicht gedrückt halten! </p><br><p>  Die beschriebene Option ist ziemlich gut, bis die neue Version des Plugins hinzugefügt wird oder bis die neuen Dateien zum Projekt hinzugefügt werden - all dies wird sehr trostlos.  Und vor kurzem wurde mir plötzlich klar, wie das alles mit einem Projekt gelöst werden kann, und wir gehen zur zweiten Methode über </p><br><h3 id="magiya-konfiguraciy">  Konfigurationszauber </h3><br><p>  Nachdem Sie hier gelesen haben, können Sie ausrufen: "Was zum Teufel haben Sie die erste Methode beschrieben, wenn es in dem Artikel sofort um die zweite geht?!"  Und ich habe alles beschrieben, um zu verdeutlichen, warum wir bedingte Kompilierungssymbole benötigen und an welchen Stellen sich unsere Projekte unterscheiden.  Und jetzt wird uns klarer, welche spezifischen Projektunterschiede wir implementieren müssen, sodass nur noch ein Projekt übrig bleibt. </p><br><p>  Und damit alles klarer wird, werden wir kein neues Projekt erstellen, sondern Änderungen an unserem aktuellen Projekt vornehmen, das auf die erste Weise erstellt wurde. </p><br><p>  Zuallererst entfernen wir alle Projekte aus der Projektmappe, mit Ausnahme des Hauptprojekts (das die Dateien direkt enthält).  Das heißt  Projekte für die Versionen 2016-2020.  Öffnen Sie den Lösungsordner und löschen Sie dort die Ordner dieser Projekte. </p><br><p>  Wir haben noch eine Lösung in der Lösung - <strong>MySuperPluginForRevit_2015</strong> .  Wir öffnen seine Eigenschaften und: </p><br><ol><li>  Entfernen Sie auf der Registerkarte <em>Anwendung</em> das Suffix <strong>_2015</strong> aus dem Assemblynamen (es wird klar, warum). </li><li>  Löschen Sie auf der Registerkarte " <em>Assembly</em> " das <strong>Symbol für die</strong> bedingte <strong>R2015-</strong> Kompilierung aus dem entsprechenden Feld </li></ol><br><blockquote>  Hinweis: In der neuesten Version von Visual Studio ist ein Fehler aufgetreten. Bedingte Kompilierungssymbole werden im Fenster mit den Projekteigenschaften nicht angezeigt, obwohl sie vorhanden sind.  Wenn Sie diese Panne haben, müssen Sie sie manuell aus der .csproj-Datei entfernen.  Wir arbeiten jedoch immer noch daran, also lesen Sie weiter. </blockquote><p>  Benennen Sie das Projekt im Projektmappen- <strong>Explorer-</strong> Fenster um, indem Sie das Suffix <strong>_2015</strong> entfernen und das Projekt dann aus der Projektmappe entfernen.  Dies ist notwendig, um die Ordnung und die Gefühle der Perfektionisten aufrechtzuerhalten!  Wir öffnen den Ordner unserer Lösung, benennen den Projektordner dort auf die gleiche Weise um und laden das Projekt zurück in die Lösung. </p><br><p>  Öffnen Sie den Konfigurationsmanager.  Wir werden die <strong>Release-</strong> Konfiguration im Prinzip nicht benötigen, also löschen wir sie.  Wir erstellen neue Konfigurationen mit den uns bereits bekannten Namen <strong>R2015</strong> , <strong>R2016</strong> , ..., <strong>R2020</strong> .  Bitte beachten Sie, dass Sie keine Parameter aus anderen Konfigurationen kopieren und keine Projektkonfigurationen erstellen müssen: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_10.png" alt="image10"><br><p>  Wir gehen in den Projektordner und öffnen die Datei mit der Endung .csproj in einem praktischen Editor.  Übrigens kann es auch in Visual Studio geöffnet werden - Sie müssen das Projekt entladen und dann befindet sich das richtige Element im Kontextmenü: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_11.png" alt="image11"><br><br><p>  Das Bearbeiten in Visual Studio ist sogar vorzuziehen, da der Editor sowohl ausgerichtet als auch aufgefordert wird. </p><br><p>  In der Datei sehen wir die <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/propertygroup-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">PropertyGroup-</a> Elemente - ganz oben das allgemeine und dann die Bedingungen.  Diese Elemente legen die Eigenschaften des Projekts während seiner Montage fest.  Das erste Element, das ohne Bedingungen allgemeine Eigenschaften festlegt, und Elemente mit Bedingungen ändern je nach Konfiguration einige Eigenschaften. </p><br><p>  Wir gehen zum allgemeinen (ersten) Element der <em>PropertyGroup</em> und sehen uns die <strong>AssemblyName-</strong> Eigenschaft an - dies ist der Name der Assembly, und wir sollten sie ohne das Suffix <strong>_2015 haben</strong> .  Wenn es ein Suffix gibt, löschen Sie es. </p><br><p>  Wir finden ein Element mit der Bedingung </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Wir brauchen es nicht - wir löschen es. </p><br><p>  Bedingungsklausel </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Es wird für die Arbeit in der Phase der Entwicklung und des Debuggens von Code erforderlich sein.  Sie können die Eigenschaften an Ihre Anforderungen anpassen - verschiedene Ausgabepfade festlegen, bedingte Kompilierungssymbole ändern usw. </p><br><p>  Erstellen Sie nun neue <em>PropertyGroup-</em> Elemente für unsere Konfigurationen.  In diesen Elementen müssen nur vier Eigenschaften festgelegt werden: </p><br><ul><li>  <strong>OutputPath</strong> ist der Ausgabeordner.  Ich habe den Standardwert <strong>bin \ R20xx eingestellt</strong> </li><li>  <strong>DefineConstants</strong> - Bedingte Kompilierungssymbole.  <strong>Stellen Sie TRACE; R20xx ein</strong> </li><li>  <strong>TargetFrameworkVersion</strong> - Version der Plattform.  Für verschiedene Versionen der Revit-API müssen verschiedene Plattformen definiert werden. </li><li>  <strong>AssemblyName</strong> - Assemblyname (d. H. Dateiname).  Sie können den gewünschten Assemblynamen direkt <strong>eingeben</strong> . Aus <strong>Gründen der</strong> Universalität empfehle ich jedoch, den Wert <strong>$ (AssemblyName) _20xx einzugeben</strong> .  Zu diesem Zweck haben wir zuvor das Suffix aus dem Assemblynamen entfernt </li></ul><br><p>  Das wichtigste Merkmal all dieser Elemente ist, dass sie einfach in andere Projekte kopiert werden können, ohne sie zu ändern.  Später im Artikel werde ich den gesamten Inhalt der .csproj-Datei anhängen. </p><br><p>  Nun, wir haben die Projekteigenschaften herausgefunden - es ist nicht schwierig.  Was aber mit Plug-In-Bibliotheken (NuGet-Paketen) zu tun ist.  Wenn wir weiter schauen, werden wir sehen, dass die Plug-in-Bibliotheken durch <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/itemgroup-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">ItemGroup-</a> Elemente definiert sind.  Aber hier ist das Pech - dieses Element verarbeitet Bedingungen falsch, wie ein <em>PropertyGroup-</em> Element.  Möglicherweise ist dies sogar ein <em>Fehler in</em> Visual Studio. Wenn Sie jedoch mehrere <em>ItemGroup-</em> Elemente mit Konfigurationsbedingungen <em>festlegen</em> und verschiedene Links zu NuGet-Paketen einfügen, werden beim Ändern der Konfiguration alle angegebenen Pakete mit dem Projekt verbunden. </p><br><p>  Das <a href="https://docs.microsoft.com/ru-ru/visualstudio/msbuild/choose-element-msbuild%3Fview%3Dvs-2019" rel="nofollow">Choose-</a> Element hilft uns dabei, das nach der üblichen <strong>Wenn-Dann-Sonst-</strong> Logik funktioniert. </p><br><p>  Mit dem <em>Choose-</em> Element definieren wir verschiedene NuGet-Pakete für verschiedene Konfigurationen: </p><br><div class="spoiler">  <b class="spoiler_title">Alle Inhalte von csproj</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ToolsVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"15.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/developer/msbuild/2003"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Configuration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)' == '' "</span></span></span><span class="hljs-tag">&gt;</span></span>Debug<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Platform</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Platform)' == '' "</span></span></span><span class="hljs-tag">&gt;</span></span>AnyCPU<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectGuid</span></span></span><span class="hljs-tag">&gt;</span></span>{5AD738D6-4122-4E76-B865-BE7CE0F6B3EB}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ProjectGuid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span>Library<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppDesignerFolder</span></span></span><span class="hljs-tag">&gt;</span></span>Properties<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppDesignerFolder</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RootNamespace</span></span></span><span class="hljs-tag">&gt;</span></span>MySuperPluginForRevit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RootNamespace</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>MySuperPluginForRevit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FileAlignment</span></span></span><span class="hljs-tag">&gt;</span></span>512<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FileAlignment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Deterministic</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Deterministic</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugSymbols</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugSymbols</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugType</span></span></span><span class="hljs-tag">&gt;</span></span>full<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Optimize</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Optimize</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\Debug\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>DEBUG;R2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ErrorReport</span></span></span><span class="hljs-tag">&gt;</span></span>prompt<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ErrorReport</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WarningLevel</span></span></span><span class="hljs-tag">&gt;</span></span>4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">WarningLevel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2015|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2015\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2016|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2016\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2016<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2016<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2017|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2017\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2017<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2017<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2018|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2018\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.5.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2019|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2019\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2019<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2019<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)|$(Platform)' == 'R2020|AnyCPU' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span>bin\R2020\<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OutputPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span>TRACE;R2020<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefineConstants</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span>v4.7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFrameworkVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span>$(AssemblyName)_2020<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AssemblyName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Core"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Xml.Linq"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Data.DataSetExtensions"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.CSharp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Data"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Net.Http"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Reference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Class1.cs"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Compile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Properties\AssemblyInfo.cs"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Choose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2015' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2015"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2016' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2016"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2017' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2018' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2018"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2019' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2019"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Condition</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" '$(Configuration)'=='R2020' or '$(Configuration)'=='Debug'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModPlus.Revit.API.2020"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span>runtime<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ExcludeAssets</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">When</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Choose</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(MSBuildToolsPath)\Microsoft.CSharp.targets"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Bitte beachten Sie, dass ich in einer der Bedingungen zwei Konfigurationen über <strong>OR (Or) angegeben habe</strong> .  Somit wird das erforderliche Paket während der <strong>Debug-</strong> Konfiguration verbunden. </p><br><p>  Und hier haben wir fast alles perfekt.  Wir laden das Projekt zurück, aktivieren die erforderliche Konfiguration, rufen den Punkt " <em>Alle NuGet-Pakete wiederherstellen</em> " im Kontextmenü der Lösung auf (nicht das Projekt) und sehen, wie sich die Pakete ändern. </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_12.png" alt="image12"><br><br><p>  Und zu diesem Zeitpunkt kam ich zum Stillstand - um alle Konfigurationen auf einmal zu erfassen, konnten wir die Batch-Assembly (Menü " <em>Assembly</em> " -&gt; " <em>Batch-Assembly</em> ") verwenden, aber beim Wechseln der Konfigurationen werden die Pakete nicht automatisch wiederhergestellt.  Und wenn das Projekt zusammengestellt wird, passiert es auch nicht, obwohl es theoretisch so sein sollte.  Ich habe keine Lösung für dieses Problem mit Standardmitteln gefunden.  Und höchstwahrscheinlich ist dies auch ein Fehler von Visual Studio. </p><br><p>  Aus diesem Grund wurde beschlossen, für die Serienmontage ein spezielles automatisiertes <a href="https://nuke.build/" rel="nofollow">Nuke-</a> Montagesystem zu verwenden.  Eigentlich wollte ich das nicht, da ich es im Rahmen der Plug-In-Entwicklung für unnötig halte, aber im Moment sehe ich keine andere Lösung.  Und die Frage „Warum genau Nuke?“ Die Antwort ist einfach - wir verwenden sie bei der Arbeit. </p><br><p>  Wechseln Sie in den Ordner unserer Lösung (nicht in das Projekt), halten Sie die <strong>Umschalttaste gedrückt</strong> und klicken Sie mit der rechten Maustaste auf eine leere Stelle im Ordner. Wählen Sie im Kontextmenü den Eintrag „ <em>PowerShell-Fenster hier öffnen</em> “. </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_13.png" alt="image13"><br><br><p>  Wenn Sie <em>Nuke nicht</em> installiert haben, schreiben Sie zuerst den Befehl </p><br><pre> <code class="powershell hljs">dotnet tool install Nuke.GlobalTool –global</code> </pre> <br><p>  Schreiben Sie nun den Befehl <strong>nuke</strong> und Sie werden aufgefordert, <em>nuke</em> für das aktuelle Projekt zu konfigurieren.  Ich weiß nicht, wie ich es auf Russisch korrekter schreiben soll. Die .nuke-Datei wurde nicht auf Englisch geschrieben.  Möchten Sie einen Build einrichten?  [j / n] </p><br><p>  Drücken Sie die Y-Taste, um die sofortigen Einstellungen vorzunehmen.  Wir brauchen die einfachste Option mit <strong>MSBuild</strong> , also antworten wir wie im Screenshot: </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_14.png" alt="image14"><br><br><p>  Fahren wir mit Visual Studio fort, in dem wir die Lösung neu laden können, da ein neues Projekt hinzugefügt wurde.  Wir starten die Lösung neu und stellen fest, dass wir ein <strong>Build-</strong> Projekt haben <strong>,</strong> an dem wir nur an einer Datei interessiert sind - <em>Build.cs</em> </p><br><img src="https://blog.modplus.org/images/Blog/Blog24_15.png" alt="image15"><br><br><p>  Öffnen Sie diese Datei und schreiben Sie ein Skript, um das Projekt für alle Konfigurationen zu erstellen.  Na ja, oder benutze mein Skript, das du selbst bearbeiten kannst: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.Execution; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.ProjectModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nuke.Common.Tools.MSBuild; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Nuke.Common.Tools.MSBuild.MSBuildTasks; [CheckBuildProjectConfigurations] [UnsetVisualStudioEnvironmentVariables] <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Build</span></span> : <span class="hljs-title"><span class="hljs-title">NukeBuild</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; Execute&lt;Build&gt;(x =&gt; x.Compile); [Solution] <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Solution Solution; <span class="hljs-comment"><span class="hljs-comment">// If the solution name and the project (plugin) name are different, then indicate the project (plugin) name here string PluginName =&gt; Solution.Name; Target Compile =&gt; _ =&gt; _ .Executes(() =&gt; { var project = Solution.GetProject(PluginName); if (project == null) throw new FileNotFoundException("Not found!"); var build = new List&lt;string&gt;(); foreach (var (_, c) in project.Configurations) { var configuration = c.Split("|")[0]; if (configuration == "Debug" || build.Contains(configuration)) continue; Logger.Normal($"Configuration: {configuration}"); build.Add(configuration); MSBuild(_ =&gt; _ .SetProjectFile(project.Path) .SetConfiguration(configuration) .SetTargets("Restore")); MSBuild(_ =&gt; _ .SetProjectFile(project.Path) .SetConfiguration(configuration) .SetTargets("Rebuild")); } }); }</span></span></code> </pre> <br><p>  Wir kehren zum PowerShell-Fenster zurück und schreiben den <strong>Nuke-</strong> Befehl erneut (Sie können den <strong>Nuke-</strong> Befehl mit dem gewünschten <em>Ziel</em> schreiben. Wir haben jedoch ein <em>Ziel</em> , das standardmäßig startet).  Nach dem Drücken der Eingabetaste fühlen wir uns wie echte Hacker, da unser Projekt wie in einem Film automatisch für verschiedene Konfigurationen zusammengestellt wird. </p><br><p>  Sie können PowerShell übrigens direkt in Visual Studio verwenden (Menü " <em>Ansicht</em> " -&gt; " <em>Andere Fenster</em> " -&gt; " <em>Package Manager-Konsole</em> "), aber alles wird in Schwarzweiß angezeigt, was nicht sehr praktisch ist. </p><br><p>  Damit ist mein Artikel beendet.  Ich bin sicher, dass Sie die Option für AutoCAD selbst herausfinden können.  Ich hoffe, dass das hier vorgestellte Material seine "Kunden" finden wird. </p><br><p>  Vielen Dank für Ihre Aufmerksamkeit! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de482308/">https://habr.com/ru/post/de482308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de482298/index.html">Fanatischer Programmierer. Wie können Wettbewerbsvorteile erhalten und sichtbar werden?</a></li>
<li><a href="../de482300/index.html">Java 14-Datensätze erkunden</a></li>
<li><a href="../de482302/index.html">Psychologischer Dunst über das neue Jahr</a></li>
<li><a href="../de482304/index.html">Made for China: So kreieren Sie das perfekte Banner für den chinesischen Verbraucher</a></li>
<li><a href="../de482306/index.html">Geschichte des Internetpornos. Teil 1</a></li>
<li><a href="../de482310/index.html">Tiertransport des 21. Jahrhunderts</a></li>
<li><a href="../de482314/index.html">Erstellen eines PostgreSQL-Clusters mit hoher Verfügbarkeit unter Verwendung von Patroni, etcd, HAProxy</a></li>
<li><a href="../de482316/index.html">Wir komplizieren Sci-Fi-Modelle prozedural: Was ist Greeble und wie wird es verwendet?</a></li>
<li><a href="../de482318/index.html">Warum Rost eine funktionale Programmiersprache werden sollte</a></li>
<li><a href="../de482328/index.html">V & V nicht für Vendetta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>