<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>げ  锔 1. Pila el谩stica: an谩lisis de registro de seguridad. Introduccion   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En relaci贸n con el fin de las ventas en Rusia del sistema de registro y an谩lisis de Splunk, surgi贸 la pregunta de c贸mo se puede reemplazar esta soluci...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>1. Pila el谩stica: an谩lisis de registro de seguridad. Introduccion</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/480570/"><img src="https://habrastorage.org/webt/kp/u5/no/kpu5nookmtr9sfo1o7xvyqla0hm.png"><br><br>  En relaci贸n con el fin de las ventas en Rusia del sistema de registro y an谩lisis de Splunk, surgi贸 la pregunta de c贸mo se puede reemplazar esta soluci贸n.  Despu茅s de pasar tiempo familiariz谩ndome con diferentes soluciones, me decid铆 por una soluci贸n para un hombre real: <b>"ELK stack"</b> .  Este sistema requiere tiempo para configurarlo, pero como resultado, puede obtener un sistema muy poderoso para analizar el estado y la respuesta operativa a los incidentes de seguridad de la informaci贸n en la organizaci贸n.  En esta serie de art铆culos, consideraremos las caracter铆sticas b谩sicas (o quiz谩s no) de la pila ELK, consideraremos c贸mo analizar registros, c贸mo construir gr谩ficos y tableros, y qu茅 funciones interesantes se pueden hacer usando registros del firewall de Check Point o el esc谩ner de seguridad OpenVas como ejemplo.  Para comenzar, considere de qu茅 se trata: la pila ELK y en qu茅 componentes est谩 compuesta. <br><a name="habracut"></a><br>  <b>La pila ELK</b> es una abreviatura para tres proyectos de c贸digo abierto: <b>Elasticsearch,</b> <b>Logstash</b> y <b>Kibana</b> .  Desarrollado por Elastic, junto con todos los proyectos relacionados.  Elasticsearch es el n煤cleo de todo el sistema, que combina las funciones de una base de datos, b煤squeda y sistema anal铆tico.  Logstash es un canal de procesamiento de datos del lado del servidor que recibe datos de varias fuentes al mismo tiempo, analiza el registro y luego lo env铆a a la base de datos de Elasticsearch.  Kibana permite a los usuarios visualizar datos usando tablas y gr谩ficos en Elasticsearch.  Tambi茅n a trav茅s de Kibana puedes administrar la base de datos.  A continuaci贸n, consideramos cada sistema por separado con m谩s detalle. <br><br><img src="https://habrastorage.org/webt/yh/-x/71/yh-x71ljji24rz0otkd6yqlzin0.png"><br><br><h3>  Logstash </h3><br>  Logstash es una utilidad para procesar eventos de registro de varias fuentes, con el que puede seleccionar campos y sus valores en un mensaje, tambi茅n puede configurar el filtrado y la edici贸n de datos.  Despu茅s de todas las manipulaciones, Logstash redirige los eventos al almac茅n de datos final.  La utilidad se configura solo a trav茅s de archivos de configuraci贸n. <br>  Una configuraci贸n t铆pica de logstash es un archivo (s) que consta de varios flujos de informaci贸n entrantes (entrada), varios filtros para esta informaci贸n (filtro) y varios flujos salientes (salida).  Parece uno o m谩s archivos de configuraci贸n, que en la versi贸n m谩s simple (que no hace nada) se ve as铆: <br><br><pre><code class="javascript hljs">input { } filter { } output { }</code> </pre> <br>  En INPUT, configuramos en qu茅 puerto entrar谩n los registros y de acuerdo con qu茅 protocolo, o desde qu茅 carpeta leer archivos nuevos o escritos constantemente.  En FILTER, configuramos el analizador de registros: an谩lisis de campos, edici贸n de valores, adici贸n de nuevos par谩metros o eliminaci贸n.  FILTER es un campo de gesti贸n de mensajes que llega a Logstash con toneladas de opciones de edici贸n.  En la salida, configuramos d贸nde enviamos el registro ya analizado, en caso de que este elasticsearch env铆e una solicitud JSON en la que se env铆an los campos con los valores, o, como parte de la depuraci贸n, se puede enviar a stdout o escribir en un archivo. <br><br><img src="https://habrastorage.org/webt/kj/ns/qh/kjnsqhfoxgr7fqtku2tpgibgh5y.png"><br><br><h3>  B煤squeda el谩stica </h3><br>  Inicialmente, Elasticsearch es una soluci贸n de b煤squeda de texto completo, pero con servicios adicionales, como escalamiento f谩cil, replicaci贸n y m谩s, lo que hizo del producto una soluci贸n muy conveniente y buena para proyectos altamente cargados con grandes cantidades de datos.  Elasticsearch es un repositorio no relacional (NoSQL) de documentos en formato JSON y un motor de b煤squeda basado en la b煤squeda de texto completo de Lucene.  La plataforma de hardware es Java Virtual Machine, por lo que el sistema requiere una gran cantidad de recursos de procesador y RAM para funcionar. <br>  Cada mensaje entrante, ya sea con Logstash o utilizando la API de consulta, se indexa como un "documento", un an谩logo de una tabla en SQL relacional.  Todos los documentos se almacenan en el 铆ndice, un an谩logo de la base de datos en SQL. <br><br>  Un ejemplo de un documento en la base de datos: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"_index"</span></span>: <span class="hljs-string"><span class="hljs-string">"checkpoint-2019.10.10"</span></span>, <span class="hljs-string"><span class="hljs-string">"_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"_doc"</span></span>, <span class="hljs-string"><span class="hljs-string">"_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"yvNZcWwBygXz5W1aycBy"</span></span>, <span class="hljs-string"><span class="hljs-string">"_version"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"_score"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"_source"</span></span>: { <span class="hljs-string"><span class="hljs-string">"layer_uuid"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dae7f01c-4c98-4c3a-a643-bfbb8fcf40f0"</span></span>, <span class="hljs-string"><span class="hljs-string">"dbee3718-cf2f-4de0-8681-529cb75be9a6"</span></span> ], <span class="hljs-string"><span class="hljs-string">"outzone"</span></span>: <span class="hljs-string"><span class="hljs-string">"External"</span></span>, <span class="hljs-string"><span class="hljs-string">"layer_name"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"TSS-Standard Security"</span></span>, <span class="hljs-string"><span class="hljs-string">"TSS-Standard Application"</span></span> ], <span class="hljs-string"><span class="hljs-string">"time"</span></span>: <span class="hljs-string"><span class="hljs-string">"1565269565"</span></span>, <span class="hljs-string"><span class="hljs-string">"dst"</span></span>: <span class="hljs-string"><span class="hljs-string">"103.5.198.210"</span></span>, <span class="hljs-string"><span class="hljs-string">"parent_rule"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"host"</span></span>: <span class="hljs-string"><span class="hljs-string">"10.10.10.250"</span></span>, <span class="hljs-string"><span class="hljs-string">"ifname"</span></span>: <span class="hljs-string"><span class="hljs-string">"eth6"</span></span>, ] }</code> </pre><br>  Todo el trabajo con la base de datos se basa en solicitudes JSON que utilizan la API REST, que emite documentos por 铆ndice o algunas estad铆sticas en el formato: pregunta - respuesta.  Para visualizar todas las respuestas a las solicitudes, se escribi贸 Kibana, que es un servicio web. <br><br><h3>  Kibana </h3><br>  Kibana le permite buscar / tomar datos y solicitar estad铆sticas de la base de datos de Elasticsearch, pero muchos gr谩ficos y tableros hermosos se construyen en base a las respuestas.  El sistema tambi茅n tiene la funcionalidad de administraci贸n de la base de datos de Elasticsearch, en art铆culos posteriores consideraremos este servicio con m谩s detalle.  Ahora vamos a mostrar un ejemplo de paneles en el firewall de Check Point y el esc谩ner de vulnerabilidades OpenVas que se pueden construir. <br><br>  Ejemplo de panel para Check Point, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/uf/qo/sc/ufqosc54roxobmwjvcsh6t73xoi.png"></a> <br><br>  Ejemplo de tablero de OpenVas, se puede hacer clic en la imagen: <br><br> <a href=""><img src="https://habrastorage.org/webt/_n/et/7p/_net7pq1xbagdowqy4utbfd-d9c.png"></a> <br><br><h3>  Conclusi贸n </h3><br>  Examinamos en qu茅 consiste la <b>pila ELK</b> , nos familiarizamos un poco con los productos principales, luego, en el curso, consideraremos por separado escribir el archivo de configuraci贸n de Logstash, configurar paneles en Kibana, familiarizarnos con las solicitudes de API, la automatizaci贸n y mucho m谩s. <br><br>  As铆 que estad atentos ( <a href="https://t.me/tssolution">Telegram</a> , <a href="https://www.facebook.com/groups/tssolution.info/">Facebook</a> , <a href="https://vk.com/ts_solution">VK</a> , <a href="https://tssolution.ru/blog">TS Solution Blog</a> ), <a href="https://zen.yandex.ru/id/5c7d2162fa818600ae386a52">Yandex.Zen</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/480570/">https://habr.com/ru/post/480570/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../480554/index.html">El futuro de la computaci贸n en la nube de Sun que nunca lleg贸</a></li>
<li><a href="../480556/index.html">NGINX: Verificaci贸n de la comunidad rusa de TI</a></li>
<li><a href="../480560/index.html">ICD parte rob贸tica de las funciones en el departamento de operaciones</a></li>
<li><a href="../480564/index.html">API REST en Java sin marcos</a></li>
<li><a href="../480566/index.html">Lo que aprend铆 sobre encontrar un trabajo en TI en 2019</a></li>
<li><a href="../480576/index.html">Nadie (casi) sabe qu茅 es la autorizaci贸n.</a></li>
<li><a href="../480580/index.html">Entonces el sistema no se mueve</a></li>
<li><a href="../480582/index.html">Security Week 51: vulnerabilidades en procesadores iOS e Intel</a></li>
<li><a href="../480584/index.html">C ++ Rusia: pasado, presente y futuro</a></li>
<li><a href="../480594/index.html">Antes y despu茅s: la evoluci贸n visual de los videojuegos famosos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>