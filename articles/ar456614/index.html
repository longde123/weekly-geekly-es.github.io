<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✌🏼 👨‍👧‍👦 👇 كيف حكاية الطاعون: إطار البراءة 🤴🏿 🔃 🕠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="مقدمة 
 كما هو الحال في دراساتي الأخرى ، لنبدأ بالمقدمة. نلقي نظرة اليوم على أحدث لعبة من المطور الفرنسي Asobo Studio. في المرة الأولى التي رأيت فيها ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>كيف حكاية الطاعون: إطار البراءة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456614/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qi/73/10/qi7310oonn7yulhrcsdmw_rzfsy.png"></div><br><h2 style=";text-align:right;direction:rtl">  مقدمة </h2><br>  كما هو الحال في دراساتي الأخرى ، لنبدأ بالمقدمة.  نلقي نظرة اليوم على أحدث لعبة من المطور الفرنسي Asobo Studio.  في المرة الأولى التي رأيت فيها مقطع فيديو لهذه اللعبة في العام الماضي ، عندما شارك زميل معي مقطع فيديو لعب مدته <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">16 دقيقة</a> .  لفت انتباهي آليات "الفئران ضد النور" ، لكنني لا أريد حقًا لعب هذه اللعبة.  ومع ذلك ، بعد إصداره ، بدأ الكثيرون في القول إنه يبدو وكأنه تم تصنيعه على محرك Unreal ، لكن هذا ليس كذلك.  كنت فضوليًا لمعرفة كيف يعمل التقديم وكم كان مستوحىًا من المطورين من Unreal بشكل عام.  كنت مهتمًا أيضًا بعملية تقديم مجموعة من الفئران ، لأنها في اللعبة كانت تبدو مقنعة جدًا ، علاوة على ذلك ، فهي واحدة من العناصر الرئيسية في هذه اللعبة. <br><br>  عندما بدأت أحاول التقاط اللعبة ، اعتقدت أنه سيتعين علي الاستسلام ، لأنه لم ينجح شيء.  على الرغم من أن اللعبة تستخدم DX11 ، والتي تدعمها الآن جميع أدوات التحليل تقريبًا ، إلا أنني لم أستطع تشغيل أي منها.  عندما حاولت استخدام RenderDoc ، تعطلت اللعبة عند بدء التشغيل ، ونفس الشيء حدث مع PIX.  ما زلت لا أعرف لماذا يحدث هذا ، لكن لحسن الحظ ، تمكنت من إكمال عدة صور باستخدام NSight Graphics.  كالعادة ، رفعت جميع المعلمات إلى الحد الأقصى وبدأت في البحث عن إطارات مناسبة للتحليل. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  كسر الإطار </h2><br>  بعد أن قمت بتصوير زوجين ، قررت استخدام واحدة من بداية اللعبة لتحليل الإطار.  لا يوجد فرق كبير بين السيطرة ، وإلى جانب ذلك ، يمكنني تجنب المفسدين. <br><br>  كالعادة ، لنبدأ بالإطار النهائي: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e30/9bc/013/e309bc01336450e755af378e9e07ebf9.png"></div><br>  أول شيء لاحظته هو وجود توازن مختلف تمامًا في لعبة عرض الأحداث مقارنة بما رأيته في الألعاب الأخرى سابقًا.  هناك العديد من مكالمات السحب هنا ، وهذا أمر طبيعي ، ولكن من المدهش أن يتم استخدام عدد قليل منها لإجراء عمليات ما بعد المعالجة.  في الألعاب الأخرى ، بعد تقديم الألوان للحصول على النتيجة النهائية ، يمر الإطار بمراحل عديدة أخرى ، لكن في لعبة Plague Tale: Innocence ، فإن رصة ما بعد المعالجة صغيرة جدًا ومُحسَّنة في عدد قليل من أحداث العرض / الحوسبة. <br><br>  تبدأ اللعبة في بناء إطار من خلال تقديم GBuffer بستة أهداف للتجسيد.  ومن المثير للاهتمام ، أن كل أهداف التجسيد هذه لها تنسيق عدد صحيح غير موقّع 32 بت (باستثناء واحد) بدلاً من ألوان RGBA8 أو تنسيقات أخرى خاصة بهذه البيانات.  كان هذا صعبًا لأنني اضطررت إلى فك تشفير كل قناة يدويًا باستخدام وظيفة Custom Shader من NSight.  لقد قضيت الكثير من الوقت في معرفة القيم التي يتم ترميزها في أهداف 32 بت ، لكن من الممكن أن أفتقد شيئًا على أي حال. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/156/6ce/6fe/1566ce6fe3f539b267b0c3ddc777de78.png"></div><br>  <i>GBuffer 0</i> <br><br>  يحتوي الهدف الأول على بعض قيم التظليل في 24 بت ، وبعض القيم الأخرى للشعر في 8 بت. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1b5/0a7/205/1b50a72056766e9cadd8b6a040bb98cd.png"></div><br>  <i>GBuffer 1</i> <br><br>  يشبه الهدف الثاني هدف RGBA8 التقليدي بقيم مختلفة للتحكم في المواد في كل قناة.  بقدر ما أفهم ، القناة الحمراء هي المعدن (ليس من الواضح تمامًا سبب تمييز بعض الأوراق بها) ، تبدو القناة الخضراء كقيمة خشونة ، والقناة الزرقاء هي قناع الشخصية الرئيسية.  أيا من الأسرى التي قمت بها استخدمت قناة ألفا. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2cf/a40/72a/2cfa4072a62ca02ef7de7f9e9b5ed259.png"></div><br>  <i>GBuffer 2</i> <br><br>  يبدو الهدف الثالث أيضًا مثل RGBA8 مع albedo في قنوات RGB ، وكانت قناة ألفا في كل لقطة قمت بها بيضاء تمامًا ، لذلك لا أفهم تمامًا ما يجب أن تفعله هذه البيانات. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5f7/c6d/9e2/5f7c6d9e2b37a7ff18ec87c8389ca0a7.png"></div><br>  <i>GBuffer3</i> <br><br>  الهدف الرابع هو فضولي لأنه في جميع عمليات التقاط الصور ، يكون اللون أسودًا تقريبًا.  القيم تشبه قناع جزء من الغطاء النباتي وجميع الشعر / الفراء.  ربما هذا له علاقة بشفافية. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/18d/91f/69f/18d91f69f594f6898c21805c9cd9164a.png"></div><br>  <i>GBuffer 4</i> <br><br>  ربما يكون الهدف الخامس هو نوع من الترميز العادي ، لأنني لم أرهم في أي مكان آخر ، ويبدو أن التظليل يأخذ عينات من الخرائط العادية ثم يخرج إلى هذا الهدف.  مع وضع ذلك في الاعتبار ، لم أكن قد اكتشفت كيفية تصورهم بشكل صحيح. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/09e/8d2/8da/09e8d28dae99dc5af634a67eaa8e2214.png"></div><br>  <i>عمق من GBuffer 5</i> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cd1/c4b/76c/cd1c4b76c92413c4d6848e2e5ecdcdc8.png"></div><br>  <i>قناع من GBuffer 5</i> <br><br>  الهدف الأخير استثناء لأنه يستخدم تنسيق الفاصلة العائمة 32 بت.  والسبب في ذلك هو أنه يحتوي على العمق الخطي للصورة ، وأن بت الإشارة يشفر بعض القناع الآخر ، مرة أخرى يخفي الشعر وجزء من الغطاء النباتي. <br><br>  بعد اكتمال إنشاء GBuffer ، يتم تقليل دقة خريطة العمق في التظليل الحسابي ، ثم يتم تقديم خرائط الظل (خرائط الظل المتتالية الاتجاهية من الشمس وخرائط العمق المكعبة من مصادر ضوء النقطة). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/94d/bbb/2dd/94dbbb2dd8220f2494ef81785910ea39.png"></div><br>  <i>أشعة الشفق</i> <br><br>  بعد الانتهاء من خرائط الظل ، يمكنك حساب الإضاءة ، ولكن قبل ذلك ، يتم تحويل أشعة الله إلى هدف منفصل. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d58/f88/abf/d58f88abfc4aee82a95a9404ff5e4f09.png"></div><br>  <i>SSAO</i> <br><br>  في مرحلة حساب الإضاءة ، يتم إجراء تظليل حسابي لحساب SSAO. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c37/717/66d/c3771766d0785d131f15633eb2c52010.png"></div><br>  <i>مضيئة هندسة مبهمة</i> <br><br>  تتم إضافة الإضاءة من الخرائط المكعبة ومصادر الإضاءة المحلية.  كل هذه المصادر المختلفة للضوء ، مع الأهداف المذكورة أعلاه ، تشكل صورة HDR مضيئة نتيجةً لذلك. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1ec/40b/716/1ec40b716cf2715f98d2c4f6a72bb83c.png"></div><br>  <i>عناصر تقديم استباقية</i> <br><br>  تتم إضافة العناصر المقدمة في التقديم الاستباقي أعلى هندسة مبهمة مضيئة ، لكنها ليست ملحوظة بشكل خاص في هذا المشهد. <br><br>  بعد تراكم كل الألوان ، انتهينا تقريبًا ، لا يوجد سوى عدد قليل من عمليات ما بعد المعالجة وواجهة المستخدم. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cdd/73c/ddb/cdd73cddb19f72c7f9e228ee3b65ceef.png"></div><br>  يتم تقليل دقة الألوان في التظليل الحسابي ثم زيادتها لإنشاء تأثير إزهار جميل وناعم للغاية. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/98b/edb/ed2/98bedbed24528e052b396786b027369d.png"></div><br>  بعد تجميع جميع النتائج السابقة ، وإضافة الأوساخ الخاصة بالكاميرا ، وتصنيف الألوان ، وتصحيح الصورة اللونية ، نحصل على ألوان المشهد.  يعطينا تراكب واجهة المستخدم صورة من بداية المقالة. <br><br>  تجدر الإشارة إلى بعض الأشياء المثيرة للاهتمام حول التقديم: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يستخدم Instancing (ازدواجية الهندسة) فقط للشبكات الفردية (يبدو أنه فقط للغطاء النباتي).  يتم تقديم جميع الكائنات الأخرى في مكالمات سحب منفصلة. </li><li style=";text-align:right;direction:rtl">  يبدو أن الكائنات يتم فرزها تقريبًا من الأمام إلى الخلف ، مع وجود استثناءات قليلة. </li><li style=";text-align:right;direction:rtl">  يبدو أن المطورين لم يبذلوا أي جهد لتجميع مكالمات السحب من حيث معايير المواد. </li></ul><br><h2 style=";text-align:right;direction:rtl">  الفئران </h2><br>  كما قلت في بداية المقال ، أحد الأسباب التي دفعت لاستكشاف هذه اللعبة كان بسبب طريقة تقديم مجموعة الجرذان.  لقد خيب ظني القرار من بعض النواحي: يبدو أنه اتخذ بالقوة الغاشمة.  هنا أستخدم لقطات شاشة من مشهد آخر للعبة ، لكنني آمل ألا يكون هناك مفسدين فيها. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/865/875/0c7/8658750c7c37151679f4ca5c12f196e8.png"></div><br>  كما هو الحال مع الكائنات الأخرى ، لا يبدو أن الفئران لديها أي ازدواجية في الشكل الهندسي ، إلا إذا وصلنا إلى المسافة التي نتحول فيها إلى المستوى الأخير من تفاصيل الشبكة (LOD).  دعونا نرى كيف يعمل. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bf5/0bc/b33/bf50bcb334685d1b8e332ec5d386ecca.png"></div><br>  <i>LOD0</i> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fcf/f8e/9dd/fcff8e9dd94ec9a4537ea781991be2c2.png"></div><br>  <i>LOD1</i> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/35f/d4b/2f2/35fd4b2f2f4f1a29ea10502b002dc3ce.png"></div><br>  <i>LOD2</i> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d92/c13/e16/d92c13e16d465a0d900d8cd59d288578.png"></div><br>  <i>LOD3</i> <br><br>  الفئران لديها 4 مستويات اللد.  ومن المثير للاهتمام ، في المستوى الثالث ، هو عازمة الذيل للجسم ، في حين أن الذيل الرابع لا.  ربما يعني هذا أن الرسوم المتحركة نشطة فقط للمستويين الأولين.  لسوء الحظ ، لا يبدو أن NSight Graphics لديها ما يكفي من الأدوات لاختبار ذلك. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f54/4d5/62f/f544d562f3b2434ffb6f47e665db27fc.png"></div><br>  <i>لا الازدواجية (instancing) من الفئران.</i> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/20c/89a/9c2/20c89a9c25d0c9039ee691b4e1f5500e.png"></div><br>  <i>مع الازدواجية.</i> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zw/2f/t1/zw2ft16y68vu84ugwmiblagsfsa.gif"></div><br>  في المشهد الموضح أعلاه ، تم تقديم العدد التالي من الفئران: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  LOD0 - 200 </li><li style=";text-align:right;direction:rtl">  LOD1 - 200 </li><li style=";text-align:right;direction:rtl">  LOD2 - 1258 </li><li style=";text-align:right;direction:rtl">  LOD3 - 3500 (مع ازدواجية الهندسة) </li></ul><br>  هذا يجعلنا نفهم أن هناك قيودًا صارمة على عدد الفئران التي يمكن تقديمها على أول اثنين من LODs. <br><br>  في الالتقاط الذي أدليت به ، لم أتمكن من تحديد أي منطق يربط بين الفئران LODs الفردية.  في بعض الأحيان ، لا تكون الفئران القريبة من الكاميرا مفصلة للغاية ، وأحيانًا تكون الجرذان التي بالكاد مرئية ذات تفاصيل عالية. <br><br><h2 style=";text-align:right;direction:rtl">  في الختام </h2><br>  حكاية الطاعون: البراءة مثيرة جدا للاهتمام من حيث التقديم.  لا شك أن نتائجه أثارت إعجابي ، فهي تخدم طريقة اللعب بشكل جيد للغاية.  كما هو الحال مع أي محرك خاص ، سيكون من الجيد سماع تحليل أكثر تفصيلًا من شفاه المطورين أنفسهم ، خاصةً لأنني لم أتمكن من تأكيد بعض نظرياتي.  آمل أن تصل مقالتي في يوم من الأيام إلى شخص من Asobo Studio ويرون أن الناس لديهم مصلحة في ذلك. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar456614/">https://habr.com/ru/post/ar456614/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar456602/index.html">دليل لتطبيق اشتراكات التجديد التلقائي في تطبيقات iOS</a></li>
<li><a href="../ar456604/index.html">كيف قمنا بأتمتة متجر كبير عبر الإنترنت وبدأنا في مطابقة المنتجات تلقائيًا</a></li>
<li><a href="../ar456608/index.html">الجسر الجنوبي في تشيليابينسك وبيتريكس في Kubernetes</a></li>
<li><a href="../ar456610/index.html">لا تضغط ولا توافق</a></li>
<li><a href="../ar456612/index.html">واحدة من مئات الطرق لنشر مشاريع إنتاج متعددة على خادم واحد</a></li>
<li><a href="../ar456616/index.html">3 ملايين روبل لأولئك الذين يمكن أن رمز</a></li>
<li><a href="../ar456618/index.html">لابيربير موسكو - 21 يونيو</a></li>
<li><a href="../ar456622/index.html">كيفية إنشاء نظام تشغيل معتمد وفقًا لحماية الطبقة الأولى</a></li>
<li><a href="../ar456624/index.html">أدوات بيثون مفيدة</a></li>
<li><a href="../ar456630/index.html">تقديم Airflow لإدارة Spark Jobs في ivi: الآمال والعكازات</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>