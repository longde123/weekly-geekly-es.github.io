<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💡 💆🏽 🌃 Deux aspects de WebView: démarrage rapide de projets et vol de données personnelles 💜 🙅🏽 👨‍👩‍👧‍👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Je m'appelle Eugene, je suis développeur Full Stack JS, la pile actuelle est Node.js + React + React Native. Je suis en développemen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deux aspects de WebView: démarrage rapide de projets et vol de données personnelles</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/440710/">  Bonjour, Habr! <br><br>  Je m'appelle Eugene, je suis développeur Full Stack JS, la pile actuelle est Node.js + React + React Native.  Je suis en développement depuis plus de 10 ans.  Dans le développement mobile, j'ai essayé différents outils de Cordova à React Native.  Ayant acquis de l'expérience avec Cardova, j'ai réalisé que j'aimerais créer des interfaces natives, à mon avis WebView ne devrait pas être l'ensemble de l'application.  Mais cela ne signifie pas qu'il ne doit pas être utilisé du tout. <br><br>  À l'invitation de collègues de Sberbank, dans ce billet, je veux parler des applications mobiles hybrides.  Avec la bonne approche, c'est un excellent moyen de mettre en œuvre rapidement l'idée d'un produit qui fonctionne bien, suffisant pour le premier lancement de votre startup. <br><br><img src="https://habrastorage.org/webt/5e/5e/zk/5e5ezktcv297mu5hrpai4vjg-9e.jpeg"><br>  <i>Source: srishta.com</i> <br><br>  Je vais également vous expliquer comment vous pouvez utiliser WebView et comment les attaquants peuvent l'utiliser contre vous.  Les exemples de l'article seront montrés en utilisant le framework React Native, mais les mêmes idées peuvent être implémentées sans lui. <br><a name="habracut"></a><br><h2>  Un peu sur les startups </h2><br>  Je vais commencer par les différences fondamentales dans le lancement de startups dans notre pays et en Occident, je vais vous dire comment WebView peut vous aider ici, je vais donner des exemples pratiques de l'interaction du Web et des éléments natifs, ainsi que des conseils de sécurité pour interagir avec des applications tierces. <br><br>  En règle générale, pour qu'un démarrage réussisse, il doit démarrer rapidement.  Si vous perdez du temps, vos concurrents vous contourneront.  Ceci est compris à la fois dans notre pays et en Occident.  Mais l'approche russe de lancement, en règle générale, est beaucoup plus approfondie - dans le mauvais sens du terme. <br><br>  Toutes <i>les startups russes</i> infructueuses commencent et se développent dans environ le même scénario.  Les erreurs les plus courantes sont liées à la planification stratégique du développement de produits logiciels.  La direction pense que le lancement n'est possible qu'après 110% de mise en œuvre de toutes les fonctionnalités et de toutes les nuances.  Avec cette approche, un déficit budgétaire apparaît rapidement, car les coûts de développement sont élevés, et il n'y a aucun revenu d'une startup.  La recherche d'investissements supplémentaires, un cercle sans fin d'approbations et de révisions prend beaucoup de temps, le produit apparaît chez le concurrent.  Ça y est, le marathon est perdu. <br><br>  <i>Les startups européennes et américaines</i> agissent différemment.  Pour commencer, ils sont limités uniquement à la version Web mobile avec une partie fonctionnelle minimale suffisante.  Il peut être consulté à partir de postes de travail et d'appareils mobiles.  Et à ce stade, le projet est prêt à être lancé!  Après le lancement, l'application est conçue pour les appareils mobiles. <br><br>  En règle générale, l'application ne diffère pas des fonctionnalités de base de la version Web.  Il élargit les possibilités d'interaction avec l'utilisateur, par exemple, par le biais de notifications push.  Cette approche garantit la réalisation de la condition principale - démarrage rapide, premier profit rapide.  Les revenus de la première étape peuvent être investis dans le développement.  À l'avenir, le projet peut être mis à l'échelle et développé comme souhaité sans déficit budgétaire, effectuant sans cesse une approche itérative pour ajouter de nouvelles fonctionnalités et développer l'interface utilisateur. <br><br>  Je propose de considérer plus en détail l'étape où il existe déjà une version mobile du site et où vous devez développer une application pour les appareils mobiles.  Nous avons donc créé un site, ce qui signifie que nous développions l'API du serveur, l'interface et la logique métier.  Deux des trois composantes sont <br>  - interface et logique - sont présentes dans l'application mobile.  D'accord, je ne veux pas les réécrire. <br><br><h2>  Combiner le meilleur des applications natives et Web </h2><br>  Il existe des outils axés sur le développement d'applications natives.  D'autres sont pour le web.  L'avantage des applications natives est qu'elles peuvent utiliser tout le potentiel fonctionnel du téléphone.  Mais les développer par rapport aux applications Web est assez difficile.  Le Web offre un démarrage facile, mais limite considérablement les capacités de l'application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3b/5bf/422/f3b5bf422a2b6f41d6d7bedcb81e9337.png"><br>  <i>* pour réduire la tautologie des applications web, j'appellerai des applications mobiles dont l'essentiel de la logique et de l'interface est implémenté côté navigateur</i> <br><br>  Les applications hybrides créées à l'aide du composant WebView permettent de combiner tous les avantages des applications natives et du Web.  Bien sûr, il y a des développeurs méticuleux qui sont catégoriquement contre WebView dans l'une de ses manifestations.  Ils soutiennent cela avec le fait que l'application devrait immédiatement être entièrement native, afin que vous puissiez utiliser toutes les fonctionnalités d'un appareil mobile, ainsi que fournir des performances d'interface utilisateur confortables.  Mais dans de nombreux cas, lorsque les capacités de la version mobile du site sont suffisantes, vous pouvez réduire le temps du premier lancement en créant une application hybride, et la remplacer progressivement par une native. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f9/120/557/3f9120557268b1609343599035758f8b.png"></div><br>  Les applications hybrides ne sont pas toujours mauvaises et non extensibles.  Ils peuvent être pratiques et productifs.  Avec une utilisation appropriée, cette approche permet de disposer de suffisamment de temps pour développer une application de qualité et de ne pas publier une application native à la hâte. <br><br>  Il existe plusieurs situations dans lesquelles il est conseillé d'utiliser des applications hybrides.  Ils sont bons comme talon temporaire pour un démarrage rapide - lorsque nous avons une version mobile du site prête et que l'application mobile était nécessaire «hier».  Une telle application peut être créée en quelques heures, exécutée en production.  Les utilisateurs auront la possibilité de travailler avec une application mobile, et vous aurez la possibilité de travailler sur une version plus complète dans des délais moins serrés (si nécessaire). <br><br>  Voici un exemple.  Récemment, des collègues avaient un besoin urgent d'une application mobile.  Dans la version Web, il y avait huit éléments de menu, et nous les avons affichés via WebView.  Et puis ils ont remplacé un élément.  Il est donc arrivé de publier l'application non pas dans un mois ou trois, mais en quelques jours seulement.  Après l'avoir progressivement transféré à l'indigène. <br><br>  Une solution hybride n'est pas toujours temporaire.  Ses capacités vous permettent de réutiliser dans l'application la base de code créée précédemment pour la version web.  Par exemple, des animations spécifiques déjà créées sur Canvas.  WebView est également pratique lorsque vous utilisez une sorte de service tiers.  Une autre option est lorsque vous avez une interface complexe qui est plus facile à connecter via WebView. <br><br><h2>  Comment utiliser WebView </h2><br>  Prenez un script populaire.  Nous voulons utiliser la version mobile du site et le menu natif.  Nous créons une application native avec un menu, mais au lieu du contenu, nous connectons la version mobile du site via WebView (jusqu'à présent sans aucun changement). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ab/2cd/a4d/2ab2cda4dcb1efee936afeb16dcd7513.gif" width="300"></div><br>  Sur le gif, vous pouvez voir 2 menus.  Le menu de droite fait partie du site, implémenté sur le web, à gauche se trouve le menu natif, implémenté dans l'application mobile.  Pour obtenir la première approximation de l'application native, il suffit de masquer le menu implémenté sur le Web.  Voici la quantité de <a href="">code</a> nécessaire pour afficher la version Web à l'intérieur de l'application via WebView: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (props) =&gt; (  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Example1"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">WebView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{uri:</span></span></span></span><span class="xml"><span class="hljs-tag"> '&lt;</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">a</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"https://provincehotels.ru/"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">https://provincehotels.ru/</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">'}} style={{flex:1}} /&gt;  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br>  L'exemple suivant montre comment la partie native peut interagir avec le Web. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ia/0b/wj/ia0bwj6viewkx-hsiqpmjc1dzgg.gif"></div><br>  Le robot est dessiné sur Canvas, cela fait partie du site internet.  Et le basculement vers celui-ci est basé sur l'interface utilisateur native.  Il sera différent sur différents téléphones.  Nous pouvons contrôler les mouvements du robot à l'aide d'un interrupteur.  Vous pouvez et vice versa - avec certains éléments de l'interface Web pour influencer l'application.  React Native fournit pour cela une API spéciale pour l'interaction entre le Web et la partie native. <br><br>  Voici le <a href="">code</a> pour utiliser cette animation.  Disposition - tout l'espace.  Le sélecteur est une partie native qui peut sélectionner parmi les options déroulantes l'état du robot.  WebView - un conteneur pour afficher le web, à l'intérieur duquel un robot est dessiné. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> states = [ <span class="hljs-string"><span class="hljs-string">'Idle'</span></span>, <span class="hljs-string"><span class="hljs-string">'Walking'</span></span>, <span class="hljs-string"><span class="hljs-string">'Running'</span></span>, <span class="hljs-string"><span class="hljs-string">'Dance'</span></span>, <span class="hljs-string"><span class="hljs-string">'Death'</span></span>, <span class="hljs-string"><span class="hljs-string">'Sitting'</span></span>, <span class="hljs-string"><span class="hljs-string">'Standing'</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uri = <span class="hljs-string"><span class="hljs-string">'https://artexoid.ru/181212/example2/'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example2</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ myWebView = React.&lt;i&gt;createRef&lt;<span class="hljs-regexp"><span class="hljs-regexp">/i&gt;(); state = {   robot: states[0] }; render() {   return (     &lt;Layout { ...this.props } name="Example2"&gt;       &lt;Picker         mode="dropdown"         selectedValue={this.state.robot}         onValueChange={(item) =&gt; {           this.setState({robot: item});           this.myWebView.current.postMessage(item);         }}       &gt;         {states.map((item =&gt; &lt;Picker.Item key={item} label={item} value={item} /</span></span>&gt; ))}       &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Picker&gt;       &lt;WebView ref={this.myWebView} source={{uri}} style={{flex:1}} /</span></span>&gt;     <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>   ); } }</code> </pre> <br>  De tels cas surviennent souvent.  Par exemple, nous avons fait une demande de test et de certification des dentistes.  Pour chaque réponse du test, une animation a été dessinée à l'intérieur des questions, implémentée à l'aide de Canvas sur le web.  Le défi était de créer une application mobile, avec ces tests.  En utilisant WebView, nous avons pu afficher des animations à partir du Web, tandis que nous avons construit le reste de l'interface en mode natif.  L'animation a bien fonctionné même sur les anciens smartphones. <br><br><h2>  Comment se font les injections? </h2><br>  Jusqu'en 2013, le navigateur Opera utilisait son propre moteur Presto, mais il a ensuite été transféré au moteur Blink de Google.  De nombreux utilisateurs sont très contrariés.  La vidéo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Why Opera Webkit»</a> met en lumière les raisons de cette transition.  Les principaux coupables sont de grandes sociétés telles que Google ou Facebook, qui n'ont pas testé le code de leurs produits dans Opera et ont interdit l'affichage des pages dans ce navigateur, citant le fait qu'il n'est pas assez populaire auprès des utilisateurs. <br><br>  Par exemple, vous accédez à Gmail via Opera et vous voyez: «Erreur JavaScript».  Vous écrivez au support, vous obtenez la réponse: "Opera n'est pas supporté par nous, nous n'écrirons pas de code pour cela."  Tout d'abord, Opera a engagé des développeurs pour écrire des injections, un code spécial qui était intégré à Gmail et lui a permis de fonctionner dans Opera.  Mais progressivement, des sites comme Gmail sont devenus plus gros.  Opera a abandonné et a changé le moteur. <br><br>  Alors de quoi je parle?  Ah oui il est temps de parler des injections: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ab/2cd/a4d/2ab2cda4dcb1efee936afeb16dcd7513.gif" width="300"></div><br>  Sur le gif - un exemple d'une injection qui change le comportement des sites.  Supposons que nous ayons le site de quelqu'un d'autre et que nous fassions une injection de styles - nous masquons le menu de droite et le curseur qui se termine à droite.  Ceci est une injection de styles.  La logique du site ne change pas, seulement l'affichage. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addStyles=<span class="hljs-string"><span class="hljs-string">` const newCSS = 'div[class*=svgHamburger],div[class*=drawerPanel] { display: none !important; }'       head = document.head || document.getElementsByTagName('head')[0],       style = document.createElement('style'); style.type = 'text/css'; style.appendChild(document.createTextNode(newCSS)); head.appendChild(style); `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uri = <span class="hljs-string"><span class="hljs-string">'https://provincehotels.ru/'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (props) =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Example1"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">WebView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{uri</span></span></span></span><span class="xml"><span class="hljs-tag"> }} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{flex:1}}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">injectedJavaScript</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{addStyles}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">javaScriptEnabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{true}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br>  <a href="">Le code</a> écrit en vert est injection.  Il cache les éléments, vous ne pouvez pas cliquer dessus, vous ne pouvez pas interagir avec eux.  Cela ressemble à une application entièrement native, sans contrôles Web. <br><br>  La prochaine injection est plus intéressante.  Disons que nous avons une application mobile et un navigateur mobile intégré. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ah/11/mq/ah11mqb5sfarvpo-5zfhvapkuwq.gif"></div><br>  Une personne suit le lien, et nous la remplaçons facilement par la page Facebook dans laquelle vous devez saisir un nom d'utilisateur et un mot de passe.  Si une personne y entre, l'application l'intercepte.  Voici le <a href="">code</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addScripts=<span class="hljs-string"><span class="hljs-string">` document   .querySelector('input[type=password]')   .addEventListener("change", (event) =&gt; alert(event.target.value)); `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uri = <span class="hljs-string"><span class="hljs-string">'https://www.facebook.com/'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (props) =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Example4"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">WebView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{uri</span></span></span></span><span class="xml"><span class="hljs-tag"> }} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{flex:1}}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">injectedJavaScript</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{addScripts}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">javaScriptEnabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{true}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br>  Ce code est appelé injection logique.  Habituellement, c'est plus difficile, mais pas beaucoup.  Autrement dit, voler un mot de passe est plus facile que de masquer les contrôles. <br><br><h2>  Minute of paranoia: navigateurs intégrés dans les applications </h2><br>  Comme vous le savez, de nombreuses applications ont des navigateurs intégrés (WebView) - par exemple, VKontakte, Telegram, Gmail, WhatsApp et ainsi de suite.  Nous pouvons faire confiance aux grandes entreprises, mais WebView est également utilisé par un grand nombre d'applications avec un petit nombre d'étoiles et d'auteurs douteux - par exemple, des lecteurs QR, des gestionnaires de fichiers, des boîtiers de caméra, etc. ... Vous installez l'application, lisez le code à travers elle, cliquez sur le lien, entrez des données sensibles - et l'application, comme illustré dans l'exemple précédent, y a accès.  Et puis, vous ne pouvez pas suivre où ces données circulent.  Par conséquent, pour ouvrir des liens, utilisez uniquement des navigateurs de confiance. <br><br>  Il existe des sites qui demandent à chaque fois un nom d'utilisateur et un mot de passe.  Et il y a ceux qui le font rarement - une fois par mois, une fois par an.  Curieusement, la deuxième option est plus sûre en termes de fuite de données via WebView.  Par exemple, vous entrez dans le site à partir d'un navigateur de gauche.  Le site nécessite un nom d'utilisateur et un mot de passe, et cela ne vous semble pas étrange - il le fait toujours.  Et dans le cas où l'autorisation est rarement requise, cela vous rendra méfiant. <br><br>  Fait intéressant, l'authentification à deux facteurs ne protège pas contre une telle attaque - uniquement contre le vol de mot de passe.  Le fait est qu'après confirmation, un jeton est retourné en réponse à vous, qui, à son tour, n'a pas déjà d'autorisation à deux facteurs, et il est facile de l'intercepter.  Autrement dit, si vous avez entré une fois la connexion et le code à partir de SMS, le navigateur reçoit un jeton, qui peut être utilisé à plusieurs reprises.  Avec ce jeton confirmé, il peut faire ce qu'il veut, pendant que le jeton reste pertinent.  En général, ne faites pas trop confiance aux navigateurs intégrés. <br><br>  Vous pouvez vous familiariser avec des exemples de ce post via des applications de démonstration.  Sur Android OS, vous devez télécharger Expo Project - un outil pour travailler avec JavaScript et React Native.  Après avoir installé Expo, il vous suffit de lire le code QR: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/13d/a0f/589/13da0f589ed467338dcfe0b0fa2d4f70.png"><br><br>  Les appareils IOS sont plus compliqués: Apple a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interdit la distribution d'</a> applications de cette façon.  Les curieux devront donc construire l'application à partir de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">source</a> sur GitHub.  Merci de votre attention! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440710/">https://habr.com/ru/post/fr440710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440698/index.html">6 idées d'applications de réalité augmentée (RA) intéressantes</a></li>
<li><a href="../fr440700/index.html">«Forces spéciales» de Data Science en interne</a></li>
<li><a href="../fr440702/index.html">Attention - GAZ! ou comment nous avons fait des contrats intelligents non gazéifiés</a></li>
<li><a href="../fr440706/index.html">InoThings ++ Professional IoT Conference - Ce qui était et ce qui sera</a></li>
<li><a href="../fr440708/index.html">Webinaire ouvert "Travail: le sien et celui d'un autre"</a></li>
<li><a href="../fr440712/index.html">Le cloud n'est que l'ordinateur de quelqu'un</a></li>
<li><a href="../fr440714/index.html">Comment la baisse du taux d'acquisition nous affecte (titulaires de carte)</a></li>
<li><a href="../fr440716/index.html">Mise en place du plus grand IDCS pré-assemblé pour les pouvoirs publics à Volgograd</a></li>
<li><a href="../fr440718/index.html">Transfert de données inter-scènes dans Unity - Application de plusieurs valeurs à un développement de jeu simple</a></li>
<li><a href="../fr440720/index.html">Nous implémentons l'interface utilisateur dans iOS: nous améliorons, accélérons, évoluons</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>