<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåø üëºüèº üö¥üèø Der Play Store akzeptiert jetzt progressive Webanwendungen (PWA). ü§ûüèæ ü§î ü¶ì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Haftungsausschluss: Ich bin nicht mit Google Play, Chrome oder einem der genannten Unternehmen verbunden. Dies ist keine offizielle Erkl√§rung. Das Log...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Der Play Store akzeptiert jetzt progressive Webanwendungen (PWA).</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439238/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abc/fb9/445/abcfb9445e58d62d216cdf938abaffca.png"></div><br>  <sup>Haftungsausschluss: Ich bin nicht mit Google Play, Chrome oder einem der genannten Unternehmen verbunden.</sup>  <sup>Dies ist keine offizielle Erkl√§rung.</sup>  <sup>Das Logo und die Namen werden nur zu Illustrationszwecken verwendet.</sup> <br><br>  Chrome 72 f√ºr Android verf√ºgt √ºber die lang erwartete Funktion "Vertrauensw√ºrdige Webaktivit√§t".  Dies bedeutet, dass wir jetzt PWA √ºber das Google Play-Verzeichnis verteilen und Chrome ohne Benutzeroberfl√§che f√ºr native Pakete offline ausf√ºhren k√∂nnen!  Ich habe eine Weile mit dieser Funktion herumgespielt und mich mit der API befasst, aber hier werde ich Ihnen sagen, worum es geht, was Sie erwartet und was heute verf√ºgbar ist. <br><a name="habracut"></a><br><h1>  PWA im Play Store-Katalog </h1><br>  Chrome 72 f√ºr Android ist jetzt f√ºr alle Benutzer verf√ºgbar, und in dieser Version ist Trusted Web Activity (TWA) implementiert.  Kurz gesagt, Chrome wird f√ºr native Android-Pakete offline (ohne Symbolleiste und Benutzeroberfl√§che) gestartet. <br><br>  Das Ver√∂ffentlichen in einem Verzeichnis ist zun√§chst nicht so einfach wie es sein sollte (z. B. Eingabe einer URL in Google Play - und die Anwendung wird gestartet).  Dar√ºber hinaus k√∂nnen Sie das verf√ºgbare WebAPK nicht verwenden und die Anwendung nicht in einem Verzeichnis ver√∂ffentlichen.  Es verwendet die Java-API, die √ºber Dienste mit Chrome interagiert und sich in einem fr√ºhen Entwicklungsstadium zu befinden scheint.  Daher gibt es viel manuell zu tun. <br><br>  Ich sehe das als ersten Schritt.  Sicherlich wird bald das beste Toolkit (m√∂glicherweise aus der Community) mit Unterst√ºtzung f√ºr alle verf√ºgbaren APIs und Start per Mausklick erscheinen.  Auf der aktuellen API k√∂nnen Sie sie jedoch im PWA-Startverzeichnis ver√∂ffentlichen.  Ich werde meine Erfahrungen dar√ºber teilen, wie das geht. <br><br>  Aus irgendeinem Grund wurde diese Funktion noch nicht im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chrome Platform-Status angezeigt</a> , und die Dokumentation wurde noch nicht aktualisiert (sie wurde seit mehr als 15 Monaten √ºberhaupt nicht mehr aktualisiert). <br><br>  <b>5. Februar Update</b> .  Der Chromium-Blog hat einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kurzen Hinweis</a> zur TWA-Unterst√ºtzung und einigen der in diesem Artikel erw√§hnten technischen Details ver√∂ffentlicht. <br><br>  <b>1. Februar Update</b> .  Paul Kinlan, f√ºhrender Chrome-Entwickler bei Google, hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> Ver√∂ffentlichung der TWA-Funktion best√§tigt und festgestellt, dass sich die Dokumentation verz√∂gert. Der Grund f√ºr die Verz√∂gerung ist, dass die Genehmigung f√ºr die neue Chrome 72-Funktion in letzter Minute akzeptiert wurde. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/TCgT8dzSiU8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Ein einj√§hriges Video von Pete Le Page, in dem die TWA erkl√§rt wird</font></i> <br><br><h3>  Warum PWA in einem Verzeichnis ver√∂ffentlichen? </h3><br>  Dies ist eine Webplattform, Karl!  Warum ein Verzeichnis verwenden? <br><br>  Nun, dies ist ein langes Gespr√§ch, aber ich berate gro√üe und kleine Unternehmen seit vielen Jahren. Wenn wir √ºber die Entwicklung von PWA nachdenken, wird der Anwendungskatalog st√§ndig erw√§hnt: "Unsere Benutzer werden dort nach einer Anwendung suchen", "Wir haben bereits eine eigene Anwendung und m√∂chten nicht verlieren." Benutzer, "" Wir ben√∂tigen Zugriff auf unsere eigene API "oder" Ich m√∂chte PWA monetarisieren. " <br><br>  Von nun an war es m√∂glich, PWA im Verzeichnis zu ver√∂ffentlichen und √ºber den Browser zu arbeiten.  Dies ist nat√ºrlich eine separate Operation.  Der Play Store emuliert den Microsoft Store nicht: Ihre PWA wird nur dann im Store angezeigt, wenn Sie die APK kompilieren und ver√∂ffentlichen. <br><br><h3>  Vorteile gegen√ºber Standard-PWA </h3><br>  Neben dem neuen Verteilungsmechanismus und neuen Nutzern aus dem Katalog (und sogar aus einer Google-Suche im Abschnitt "Anwendungen") ergeben sich weitere Vorteile: <br><br><ul><li>  Die M√∂glichkeit, das Widget auf dem Hauptbildschirm zu platzieren. <br></li><li>  Anwendungsverkn√ºpfungen (mit einem langen Druck auf das Anwendungssymbol) und andere tiefe Integration in das Betriebssystem. <br></li><li>  Arbeiten Sie mit einem ‚ÄûBegleiter‚Äú auf tragbaren Ger√§ten oder der Android Auto-Erweiterung. <br></li><li>  Neuinstallation nach einem Hard-Reset oder Backup auf einem neuen Telefon. <br></li><li>  Hintergrunddienste, die auf ihre eigenen Funktionen zugreifen (die Kommunikation mit PWA ist noch begrenzt - weitere Details siehe unten). <br></li><li>  Monetarisierung (bisher begrenzt, weitere Details unten). <br></li><li>  Einige native Bildschirme gemischt mit PWA-Inhalten. <br></li><li>  Verteilung von mehr als einem PWA-Symbol im Launcher und / oder auf dem Startbildschirm, das auf verschiedene URLs (innerhalb desselben Hosts) verweist. <br></li><li>  Bessere Unterst√ºtzung bei der Internationalisierung. </li></ul><br><h3>  Was ist die Innovation? </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/06c/a7c/a1d/06ca7ca1d01be0f5174e371c774c6360.png"><br>  <i><font color="gray">Es gab bereits einige PWAs im Katalog, aber jetzt sind sie viel einfacher vorzubereiten und zu ver√∂ffentlichen.</font></i> <br><br>  Es gibt bereits einige PWAs im Google Play Store, z. B. Google Maps Go, Instagram Lite und Twitter Lite.  Die erste Anwendung verwendet eine private Version von Pre-TWA, und die letzten beiden verwenden WebView, was nicht die ideale, aber die einzige M√∂glichkeit war, so etwas vor TWA zu tun.  Anwendungen haben viel nativen Code f√ºr einige Dinge, wie z. B. Benachrichtigungen.  Wir m√∂chten PWAs als Webentwickler ver√∂ffentlichen und nicht viel Java-Code schreiben. <br><br>  TWA ist ein spezieller Modus, der auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">benutzerdefinierten Chrome-Registerkarten</a> basiert. Mit dieser Version von Chrome 45 k√∂nnen Sie den in die Anwendung integrierten Browser starten. <br><br><h3>  Ist TWA ein Hybrid-Framework √§hnlich wie Cordova? </h3><br>  Nein.  Mit Cordova und anderen Hybridl√∂sungen stellen Sie normalerweise Ressourcen bereit (HTML, JS, CSS usw.).  im APK-Paket.  <b>Au√üerdem unterscheidet sich die Engine dort, sie ist vom Browser des Benutzers isoliert, sodass keine Sitzungen oder Cache-Freigabe unterst√ºtzt werden.</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c8/1a6/feb/8c81a6feb0b4e06520eac4d39ace8f66.png"></div><br>  <i><font color="gray">So sieht PWA mit Trusted Web Activity aus.</font></i>  <i><font color="gray">Ich sehe die Implementierung von Farbschemata noch nicht</font></i> <br><br>  Bei Verwendung von Trusted Web Activity m√ºssen Sie keine Ressourcendateien packen (bei Bedarf nur native Komponenten).  Alle Ressourcen werden von einem Servicemitarbeiter im laufenden Betrieb heruntergeladen und aktualisiert.  Ihre PWA wird immer von der installierten Version von Chrome mit Speicher, Cache und Sitzungen gerendert.  Wenn ein Benutzer eine Sitzung auf einer Website √∂ffnet und dann die Anwendung aus dem Play Store installiert, ist er bereits am System angemeldet. <br><br><h3>  Play Store-Anforderungen </h3><br>  Die f√ºr einen vertrauensw√ºrdigen Webvorgang verwendete URL muss die folgenden Anforderungen erf√ºllen: <br><br><ul><li>  √úbertragung von PWA-Kriterien (HTTPS, Servicemitarbeiter mit Abrufereignishandler, Webanwendungsmanifest mit 512px-Symbol, Hintergrundfarbe und einem grundlegenden Satz anderer Eigenschaften). <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lighthouse</a> mindestens 80/100 Leistungsbewertung (verf√ºgbar in Chrome Developer Tools oder als NPM-CLI). <br></li><li>  Alle aktuellen Play Store-Regeln. </li></ul><br>  In <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einem Chromium-Blogbeitrag</a> hei√üt es: ‚ÄûAnwendungen, die nicht den TWA-Qualit√§tsanforderungen oder den Play Store- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Richtlinien entsprechen, wird</a> m√∂glicherweise die Zulassung verweigert oder ausgeschlossen.‚Äú <br><br>  Ich bin mir noch nicht sicher, ob das Play Store QA-Team alle diese Anforderungen beim Ver√∂ffentlichen der Anwendung √ºberpr√ºft. <br><br><h3>  PWA-Sicherheitsmodell im Play Store </h3><br>  Ihre PWA befolgt das Sicherheitsmodell des Browsers und nicht die native Anwendung, bis Sie den nativen Code direkt zur APK hinzuf√ºgen.  Da alles unter der Kontrolle des Browsers steht, sollte der Benutzer wissen, dass selbst wenn er die Anwendung gerade installiert hat, Sitzungsdaten, lokaler Speicher und Berechtigungen f√ºr diesen Host bereits im Browser festgelegt sind.  Aus diesem Grund wird beim ersten Start die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mini-Nachricht "Works in Chrome" angezeigt</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ff/8d9/1df/5ff8d91df535b119b0da91c92aca2a2b.jpg"><br><br>  Wenn der Benutzer die Anwendung deinstalliert, erh√§lt er au√üerdem eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Warnung,</a> dass der Status und die Daten der Anwendung in Chrome noch verf√ºgbar sind. L√∂schen Sie daher bei Bedarf den Cache.  Zu diesen Spuren geh√∂rt beispielsweise die Web-Push-Berechtigung: Selbst wenn der Benutzer die Anwendung deinstalliert, erh√§lt er weiterhin Push-Benachrichtigungen.  Die Nachricht wurde von Henry Lim bemerkt: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/547/90a/3bc/54790a3bceb7834fd83b7301866f118e.jpg"><br><br>  Die Notwendigkeit solcher Benachrichtigungen wurde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von</a> Paul Kinlan vom Chrome-Team <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mitgeteilt</a> . <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: absolute; visibility: hidden; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1092075825065873416"></twitter-widget><blockquote class="twitter-tweet" data-lang="en_US" data-twitter-extracted-i158360727328552316="true"><p lang="en" dir="ltr">  Der Sitzungsspeicher stammt aus Ihrer Browsersitzung. Wir m√ºssen dies Benutzern von Android-Apps mitteilen, die diese Art von Erfahrung nicht erwarten. </p>  - Paul Kinlan (@Paul_Kinlan), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">3. Februar 2019</a> </blockquote><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><h1>  Entwicklungsmethoden </h1><br>  Um ein Paket mit TWA zu erstellen, ben√∂tigen Sie zun√§chst <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Android Studio</a> .  Bisher sind alle Optionen experimentell und werden nur anhand von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Codebeispielen</a> im Chrome-Repository auf GitHub beschrieben. <br><br>  Anwendungsentwicklungsoptionen mit TWA: <br><br><ul><li>  <b>Verwenden der Java-Supportbibliothek auf hoher Ebene</b> des Chrome-Teams: In diesem Fall m√ºssen Sie keinen eigenen Java- oder Kotlin-Code schreiben.  Sie erstellen ein Android Studio-Projekt (oder klonen ein Beispiel), richten einige Metadaten in AndroidManifest.xml aus dem Manifest der Webanwendung ein und sind fertig. <br><br>  Das Framework bietet eine Verbindung mit TWA und zus√§tzliche Funktionen zum Erstellen eines Einstellungsdatensatzes auf einem Android-Ger√§t sowie zur Bereitstellung von Push-Benachrichtigungen.  Jetzt befindet sich die Bibliothek im tempor√§ren Jitpack-Repository.  Ich denke, dass sie in Zukunft an einen anderen Ort ziehen wird. <br></li><li>  <b>Manuelle Verwaltung vertrauensw√ºrdiger Webaktivit√§ten</b> .  Wenn Sie Erfahrung mit der Entwicklung von Android-Anwendungen in Java oder Kotlin haben, k√∂nnen Sie PWA einfach manuell verbinden.  Sie k√∂nnen also einige native Aktionen belassen und Trusted Web Activity nur zum richtigen Zeitpunkt √∂ffnen.  In diesem Fall schlage ich vor, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Support-Bibliothek</a> zu studieren und zu verstehen, wie Sie √ºber das Projekt eine Verbindung zu Chrome herstellen. </li></ul><br>  <b>Update vom 5. Februar</b> : Die Dokumentation f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TrustedWebUtils</a> , den TWA- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Helfer</a> , ist jetzt auf der Android-Site verf√ºgbar. <br><br><h3>  Manifestverteilung </h3><br>  PWA im App Store akzeptiert das Manifest der Webanwendung nicht.  Sie m√ºssen einige Werte manuell kopieren.  Symbole werden aus dem Ordner "res" √ºbernommen, wie in jeder nativen Android-Anwendung. Die Blockierung der Ausrichtung sollte im AndroidManifest-Aktivit√§tsdatensatz usw. definiert werden. <br><br>  Bei Verwendung der Unterst√ºtzungsbibliothek wird automatisch ein Begr√º√üungsbildschirm erstellt, andere Eigenschaften des Manifests werden jedoch nicht verwendet.  Tats√§chlich konnte ich bei meinen Tests das Farbthema nicht anwenden, als die PWA auf dem Bildschirm ge√∂ffnet wurde. <br><br><h3>  URL-Validierung </h3><br>  TWA funktioniert nur nach einem Handshake der digitalen Dom√§ne mit der Anwendung.  Der Mechanismus wird als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Digital Assets Links bezeichnet</a> .  Es baut eine vertrauensvolle Beziehung zwischen Ihrem Host und der APK auf und beweist, dass Sie PWA besitzen und keine Anwendungen im Play Store ver√∂ffentlichen, die Sie nicht besitzen.  Au√üerdem wird ein digitaler Kanal zwischen der Site und der nativen Anwendung eingerichtet, √ºber den sie theoretisch private Daten austauschen k√∂nnen (dies scheint jedoch mit der heutigen TWA-API nicht m√∂glich zu sein). <br><br>  Bei Digital Assets Links m√ºssen Sie die Datei <i>&lt;Ihre-Dom√§ne&gt; /.well-known/assetlinks.json</i> auf Ihre Domain hochladen.  Diese JSON-Datei enth√§lt Informationen zum Android-Paket (z. B. die Paketkennung) und einen Hash des Zertifikats Ihrer Anwendung, den Sie mit dem Befehl in der Konsole ermitteln k√∂nnen.  Das Android-Paket enth√§lt eine doppelte Host-URL.  Es gibt einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Online-Validator</a> , der √ºberpr√ºft, ob alles in Ordnung ist. <br><br>  Wenn Sie nicht die Hand gesch√ºttelt haben, wird TWA nicht aktiviert, und Ihre Anwendung verwendet nur normale benutzerdefinierte Chrome-Registerkarten mit einer minimalen Chrome-Oberfl√§che, als ob <i>Anzeige: minimal-ui</i> in PWA enthalten ist.  Ich bin mir nicht ganz sicher, aber wahrscheinlich lehnt der Play Store Anwendungen ab, die einfach auf regul√§re Registerkarten ohne TWA-Validierung verweisen.  Ich wei√ü nicht genau, zu welchem ‚Äã‚ÄãZeitpunkt Chrome die √úberpr√ºfung von Digital Asset Link durchf√ºhrt.  Wenn Sie jedes Mal auf die Anwendung zugreifen, kann dies zu einem Leistungsproblem werden.  Ich denke, Caching ist m√∂glich, und der Play Store kann eine √úberpr√ºfung durchf√ºhren, bevor der Antrag genehmigt wird, w√§hrend er in den Katalog aufgenommen wird.  Mal sehen, was in der Dokumentation geschrieben wird. <br><br>  <b>Es gibt einen (nicht so einfachen) Mechanismus zur Umgehung des Digital Asset Link-Zertifizierungsprozesses f√ºr Entwicklungszwecke, der unten beschrieben wird.</b> <br><br><h1>  Anwendung ver√∂ffentlichen </h1><br>  Um ein PWA-Label mit TWA zu ver√∂ffentlichen, m√ºssen Sie alle Regeln des Play Store befolgen.  Weitere Informationen finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Developer Policy Center</a> .  Sie m√ºssen au√üerdem ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Publisher-Konto</a> mit einer einmaligen Geb√ºhr von 25 USD, Metadaten, Screenshots und Marketingmaterialien f√ºr die Anwendung erstellen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab9/348/32a/ab934832ad79351548be8cd22bfb9026.png"><br><br><h3>  Bereitstellen </h3><br>  Wenn Sie die Entwicklung in Android Studio abgeschlossen haben und ein Konto f√ºr die Entwicklerkonsole haben, m√ºssen Sie ein APK f√ºr die Produktion erstellen und es mit dem in Android Studio erstellten Schl√ºssel signieren.  Sie k√∂nnen auf den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">App Signing by Google Play-Dienst</a> zur√ºckgreifen, um den Vorgang in Zukunft zu vereinfachen. <br><br><h3>  Google Play Console </h3><br>  Es gibt keine spezifischen Regeln oder Prozesse zum Herunterladen dieser Anwendungen, aber die Revisionsabteilung kann feststellen, dass Sie TWA verwenden, und √ºberpr√ºfen, ob: 1) Digital Assets Link funktioniert;  2) Die URL erf√ºllt die PWA-Kriterien (haupts√§chlich f√ºr den Abrufereignishandler im Service Worker). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/365/83a/921/36583a921bd38dda3ce6af9b5103bb0f.png"><br>  <i><font color="gray">Um im Play Store zu ver√∂ffentlichen, m√ºssen Sie viele Metadaten und grafische Ressourcen angeben.</font></i> <br><br><h3>  Anwendungsaktualisierung </h3><br>  Wenn Sie den Inhalt √§ndern, m√ºssen Sie die Anwendung nicht erneut herunterladen, es sei denn, Sie √§ndern die Anwendung vollst√§ndig (gem√§√ü den Katalogregeln).  Aktualisieren Sie es weiterhin √ºber Servicemitarbeiter und Updates auf dem Server.  Das neue APK muss nur heruntergeladen werden, wenn Sie Metadaten, nativen Code oder Symbole √§ndern m√∂chten. <br><br><h1>  Einschr√§nkungen </h1><br>  Jetzt hat die Plattform bestimmte Einschr√§nkungen, aber dies ist nur der Anfang.  Hoffentlich werden sie im Laufe der Zeit entfernt. <br><br><h3>  PWA in Unterordnern </h3><br>  Wenn Sie Ihre PWA in einem Host-Unterordner ver√∂ffentlichen, treten verschiedene Probleme auf. <br><br><ul><li>  Digital Asset Link verbindet die gesamte Dom√§ne, nicht nur den Ordner. <br></li><li>  Die aktuelle Support-Bibliothek scheint den gesamten Host als Absicht zu behandeln (Link Capturing), selbst wenn sich die PWA in einem Unterordner befindet. </li></ul><br><h3>  Keine internen Anwendungen </h3><br>  Dies ist eine Einschr√§nkung des Play Store selbst (Sie k√∂nnen keine Anwendungen f√ºr das lokale Netzwerk oder Anwendungen ver√∂ffentlichen, die nur f√ºr Sie und Ihr Unternehmen bestimmt sind).  Sie k√∂nnen TWA verwenden und apk erstellen, das au√üerhalb des Gesch√§fts bereitgestellt wird. <br><br>  Digital Asset Link funktioniert nur mit √∂ffentlichen URLs, da Chrome √ºberpr√ºfen muss, ob wir Eigent√ºmer der Domain sind, was mit internen URLs nicht m√∂glich ist. <br><br><h3>  Erster Start </h3><br>  Wenn Sie eine k√ºrzlich installierte Anwendung zum ersten Mal √∂ffnen, befinden sich noch keine Anwendungsdateien auf dem Ger√§t (Service Worker wurde noch nicht registriert, wenn der Benutzer PWA noch nicht ge√∂ffnet hat). Im Offline-Modus wird dem Benutzer daher ein leerer wei√üer Bildschirm angezeigt.  Ich denke, in zuk√ºnftigen Versionen w√§re es n√ºtzlich, nach der Installation der Anwendung eine Art Austausch durch Chrome zu implementieren.  Wenn Sie die TWA-API anstelle der Support-Bibliothek verwenden, finden Sie diese Situation und informieren den Benutzer korrekt √ºber die nativen APIs. <br><br><h3>  Native Code aufrufen </h3><br>  Es gibt bereits einen bidirektionalen Kanal zwischen dem TWA-Server (Chrome) und dem TWA-Client (unsere APK).  Dieser Kanal wird derzeit nur zum Senden und Anzeigen von Push-Benachrichtigungen in der nativen Anwendung und nicht in Chrome verwendet. <br><br>  Es besteht ein gewisses Potenzial f√ºr die einfache Verbindung von nativem Code und JavaScript, wodurch PWA Zugriff auf den nativen Code erh√§lt, √§hnlich wie beim APPX / PWA-Mechanismus im Microsoft Store. <br><br>  Vielleicht wird es in Zukunft m√∂glich sein, Java / Kotlin-Klassen im TWA-Client zu registrieren, damit wir sie tats√§chlich √ºber die JavaScript-API aufrufen k√∂nnen, wenn unsere PWA im TWA-Modus gerendert wird. <br><br>  Heutzutage besteht die einzige M√∂glichkeit, nativen Code auszuf√ºhren, darin, mit Absichten andere native Aktionen zu √∂ffnen und dann die TWA erneut zu √∂ffnen und Argumente √ºber URI-Parameter zu senden und zu empfangen. <br><br>  Dar√ºber hinaus k√∂nnen Sie im nativen Code eine Art Webserver oder WebSocket-Server erstellen und PWA an diesen senden. Dies ist jedoch seltsam, kompliziert und verbraucht m√∂glicherweise zu viel Batterie.  Aber wir haben eine ganz neue Welt voller M√∂glichkeiten.  Mal sehen, was sich die Community einfallen l√§sst! <br><br><h3>  Monetarisierung aus dem Play Store </h3><br>  Wenn Sie eine kostenpflichtige Anwendung haben, k√∂nnen Sie nicht einfach √ºberpr√ºfen, ob der Benutzer tats√§chlich daf√ºr bezahlt hat (schlie√ülich ist der Inhalt nur eine URL).  Wenn Sie digitale Ressourcen oder Abonnements √ºber die Play Store-Brieftasche verkaufen m√∂chten, ist es au√üerdem schwierig, ein solches Schema ohne eine tats√§chliche Br√ºcke mit einem nativen Code zu implementieren. <br><br><h3>  Debuggen </h3><br>  Ich bin nicht sicher, ob dies ein Fehler oder ein Problem mit meiner IDE ist, aber das Remote-Debugging von Servicemitarbeitern von TWA funktioniert nicht.  Ich kann den Fensterkontext √ºberpr√ºfen, aber nicht den Servicemitarbeiter. <br><br><h3>  Andere Motoren </h3><br>  TWA funktioniert derzeit nur unter Chrome. In Zukunft k√∂nnen andere Browser die API klonen: beispielsweise Samsung Internet, Edge oder Firefox. <br><br>  <b>4. Februar Update</b> : TWA l√§uft auf dem Android Custom Tab-Protokoll, das derzeit von anderen Browsern implementiert wird.  Wenn daher ein anderer Standardbrowser auf dem System installiert ist, kann er TWA mit dem Inhalt der PWA √∂ffnen.  Es sind jedoch zus√§tzliche Tests erforderlich, um zu verstehen, wie dies funktioniert. <br><br>  Was passiert, wenn der Benutzer eine √§ltere Version von Chrome hat und die Anwendung aus dem Play Store installiert?  In diesem Fall wird PWA als benutzerdefinierte Chrome-Registerkarte und nicht in einem vollst√§ndig Offline-Modus angezeigt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c6/a0e/7e4/7c6a0e7e4cfb1be1f72cd71a30a45b7c.png"><br>  <i><font color="gray">Google Maps Go im Play Store hat bereits etwas √Ñhnliches wie TWA verwendet, und Chrome wird als Voraussetzung f√ºr die Arbeit aufgef√ºhrt</font></i> <br><br>  Was passiert, wenn ein Nutzer √ºberhaupt kein Chrome hat?  Wenn Sie heute die Support-Bibliothek verwenden, funktioniert die Anwendung √ºberhaupt nicht (wenn es keinen anderen Browser gibt, der das Protokoll "Benutzerdefinierte Registerkarten" unterst√ºtzt).  Wenn Sie die TWA-API in nativem Java / Kotlin-Code verwenden, k√∂nnen Sie die Verf√ºgbarkeit des Browsers √ºberpr√ºfen und eine alternative L√∂sung wie WebView herunterladen oder den Browser √∂ffnen. <br><br>  Obwohl Android-Ger√§te ohne Chrome selten sind, wird es auf einigen Ger√§ten nicht standardm√§√üig installiert, auch nicht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf allen neuen Ger√§ten in Europa</a> . <br><br><h3>  Andere Plattformen </h3><br>  PWA funktioniert nicht mit tragbaren Betriebssystemen (Uhren), aber ich bin mir nicht ganz sicher, was auf anderen Android-Plattformen passiert.  Es gibt wahrscheinlich noch keinen Support, aber probieren Sie es aus.  Ich spreche von Android TV oder Chromebooks aus dem Play Store.  Wenn Sie diese Plattformen nicht getestet haben, ist es sinnvoll, sie in der Verzeichnisliste zu deaktivieren. <br><br><h3>  Konflikt mit WebAPK </h3><br>  Wenn Sie PWA von Chrome aus installiert haben, haben Sie bereits eine APK f√ºr diese URL, die vom Play Store signiert wurde. Das Verzeichnis bel√§sst die Anwendung jedoch weiterhin in der Liste und erm√∂glicht dem Benutzer, sie ebenfalls zu installieren.  Und umgekehrt: Die Installation der Anwendung aus dem Verzeichnis hindert Chrome nicht daran, den Benutzer aufzufordern, sie √ºber den Browser hinzuzuf√ºgen.  Ich denke, dies kann vermieden werden, wenn WebAPK auch Digital Asset Link erh√§lt oder wir irgendwie mit der WebAPK-Anwendungskennung √ºbereinstimmen k√∂nnen, aber dies ist in naher Zukunft unwahrscheinlich.  Mal sehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9c1/1fe/3a2/9c11fe3a28681544babba34025589479.png"></div><br>  <i><font color="gray">Zwei Starbucks-Apps werden gleichzeitig ausgef√ºhrt: WebAPK und unser eigenes APK</font></i> <br><br>  Sie k√∂nnen das Chrome-Angebot zur Installation des WebAPK blockieren und stattdessen Ihre Anwendung aus dem Verzeichnis mithilfe <i>des</i> Attributs " <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">related_applications"</a></i> und des Attributs " <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">selected_related_applications"</a></i> des Webanwendungsmanifests <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">anzeigen</a></i> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die API "Get Installed Related Apps"</a> kann dazu beitragen, diesen Konflikt in Zukunft zu beheben. <br><br><h1>  Erstellen des ersten PWApk </h1><br>  Ich wei√ü, ich habe gerade das Wort PWApk erfunden, aber das klingt gut, oder? <br><br>  Vor einigen Jahren habe ich einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Videokurs √ºber native Android-Webanwendungen durchgef√ºhrt</a> .  Obwohl dies f√ºr PWA nicht ganz zutrifft, hilft es, das Android-√ñkosystem zu verstehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/737/af5/77f/737af577f5decf195a80d62670f783f2.png"></div><br>  <i><font color="gray">Der einfachste Weg, TWA-basierte APKs zu erstellen, besteht darin, das SVGOMG-Repository-Beispiel aus dem ChromeLabs-Repository auf GitHub zu klonen</font></i> <br><br>  Sie k√∂nnen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das Git-Repository klonen</a> oder ein neues Projekt starten.  In unserem Fall starten wir ein neues Projekt nur, um das Thema besser zu verstehen. <br><br>  Erstellen Sie ein neues Projekt in Android Studio und w√§hlen Sie <i>Keine Aktivit√§t</i> : Wir verwenden nur vertrauensw√ºrdige Webaktivit√§t aus der Support-Bibliothek. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f3/ed6/3a6/5f3ed63a6ff8edc7a331955cfc85bd9e.png"><br>  <i><font color="gray">Beginnen wir mit einem leeren Projekt</font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie die Daten ein, w√§hlen Sie den Namen des Projekts (wir werden es sp√§ter √§ndern) und den Namen des Pakets: Dies ist die Kennung unserer Anwendung in Android sowie im Katalog. Ich empfehle, den Hostnamen in umgekehrter Reihenfolge und einen beliebigen Namen am Ende zu verwenden. Wenn Sie beispielsweise den Host </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mypwa.com/calculator haben</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kann das Paket </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.mypwa.calculator</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hei√üen </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als Basis ist API 19 (Android 4.4) geeignet. Es scheint, dass es bald </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die f√ºr Chrome erforderliche Mindestversion sein wird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Einige TWA-Funktionen funktionieren nur mit API 23 (Android 6.0), die Support-Bibliothek k√ºmmert sich jedoch darum. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Februar Update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Chrome hat offiziell angek√ºndigt, dass TWA nur mit Android 4.4 KitKat funktioniert. </font><font style="vertical-align: inherit;">Daher ist diese Funktion f√ºr ungef√§hr 5% der aktiven Android-Benutzer nicht verf√ºgbar: Sie werden mit einer benutzerdefinierten Registerkarte und Adressleiste auf die Version zur√ºckgesetzt. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d3/66a/8fb/2d366a8fbf19b050af01bc9e35ed5093.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durch Auswahl einer Mindest-API-Stufe wird die Liste der Ger√§te begrenzt, f√ºr die PWA im Play Store-Verzeichnis angeboten wird</font></font></font></i> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abh√§ngigkeit hinzuf√ºgen </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der n√§chste Schritt besteht darin, die TWA-Unterst√ºtzungsbibliothek als Abh√§ngigkeit hinzuzuf√ºgen. √ñffnen Sie daher zwei Dateien mit dem Namen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build.gradle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5fa/f6c/f11/5faf6cf11d05e2df8ed6c8eab783a8c4.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei Konfigurationsdateien: f√ºr das Projekt und f√ºr die Android-Anwendung</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beginnen wir mit der Projektdatei. </font><font style="vertical-align: inherit;">F√ºgen Sie dem Abschnitt </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allprojects&gt; repositories</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die </font><font style="vertical-align: inherit;">folgende Zeile </font><i><font style="vertical-align: inherit;">hinzu</font></i><font style="vertical-align: inherit;"> :</font></font><br><br><pre><code class="java hljs">maven { url <span class="hljs-string"><span class="hljs-string">"https://jitpack.io"</span></span> }</code> </pre> <br>  Im n√§chsten Schritt √∂ffnen wir das Modul <i>build.gradle</i> und f√ºgen es hinzu, abh√§ngig von: <br><br><pre> <code class="java hljs">implementation <span class="hljs-string"><span class="hljs-string">'com.github.GoogleChrome:custom-tabs-client:e446d08014'</span></span></code> </pre> <br><h3>  TWA-Setup </h3><br>  Der n√§chste Schritt besteht darin, die PWA-Parameter f√ºr vertrauensw√ºrdige <i>Webaktivit√§t</i> in der Moduldatei <i>festzulegen und den</i> Abschnitt <i>defaultConfig</i> hinzuzuf√ºgen: <br><br><pre> <code class="java hljs">manifestPlaceholders = [ hostName: <span class="hljs-string"><span class="hljs-string">"app.starbucks.com"</span></span>, defaultUrl: <span class="hljs-string"><span class="hljs-string">"https://app.starbucks.com"</span></span>, launcherName: <span class="hljs-string"><span class="hljs-string">"Starbucks"</span></span>, assetStatements: <span class="hljs-string"><span class="hljs-string">'[{ "relation": ["delegate_permission/common.handle_all_urls"], '</span></span> + <span class="hljs-string"><span class="hljs-string">'"target": {"namespace": "web", "site": "https://app.starbucks.com"}}]'</span></span> ]</code> </pre> <br>  Hier werde ich als Beispiel Starbucks PWA verwenden.  Informationen aus dem Digital Asset Link-Prozess werden vom AssetStatements-Schl√ºssel ben√∂tigt.  Wir werden diesen Teil vorerst √ºberspringen.  Die Eigenschaft mit dem Namen <i>launcherName</i> muss mit dem <i>Kurznamen</i> im Manifest der Webanwendung <i>√ºbereinstimmen</i> . <br><br><h3>  Manifest-Setup </h3><br>  Android-Anwendungen haben ein eigenes Manifest. Sie akzeptieren das Manifest der Webanwendung nicht.  Die gew√ºnschte Datei befindet sich im Abschnitt <i>App&gt; Manifeste</i> und hei√üt AndroidManifest.xml.  Dort finden Sie ein selbstschlie√üendes Application XML-Element. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65d/486/38c/65d48638cd9d76411f8fc935d6e3fff4.png"><br>  <i><font color="gray">Standard-Android-Manifestdatei</font></i> <br><br>  Dort √§ndern wir den Wert von android: label in <b>$ {launcherName}</b> , den wir zuvor in den Metadaten festgelegt haben, damit wir die einzige Wahrheitsquelle f√ºr den Anwendungsnamen haben. <br><br>  Der n√§chste Schritt besteht darin, diese Datei zu konfigurieren, beginnend mit dem &lt;application&gt; -Tag, um ihr untergeordnete Elemente hinzuzuf√ºgen, die folgenderma√üen aussehen: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"asset_statements"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${assetStatements}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.support.customtabs.trusted.LauncherActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${launcherName}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.support.customtabs.trusted.DEFAULT_URL"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${defaultUrl}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MAIN"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.LAUNCHER"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.VIEW"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.DEFAULT"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.BROWSABLE"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:scheme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:host</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${hostName}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Mit dem folgenden Code wird TWA mithilfe der Unterst√ºtzungsbibliothek und des Absichtsfilters so konfiguriert, dass die Anwendung Links zu PWA und Digital Asset Link erh√§lt.  Ich werde die Details √ºberspringen, was in Bezug auf die Android-Anwendung passiert. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b0/45f/bd2/5b045fbd2c03c263490b96905f79aac6.png"><br>  <i><font color="gray">Es ist Zeit zu synchronisieren</font></i> <br><br>  Zu diesem Zeitpunkt m√ºssen Sie Android Studio anweisen, alle Ihre √Ñnderungen zu akzeptieren, indem Sie auf <i>Jetzt synchronisieren</i> klicken.  Wenn alles richtig gemacht wurde, werden keine Fehler angezeigt. <br><br><h3>  Symbol ersetzen </h3><br>  Derzeit verwendet die Anwendung nur das Standard-Android-Symbol. <i>Daher</i> m√ºssen Sie alle Dateien in <i>app&gt; res&gt; mipmap</i> in verschiedenen Unterordnern f√ºr unterschiedliche Pixeldichten ersetzen.  Es gibt zwei Versionen: quadratische und abgerundete Symbole.  Rounded wurde in Android 7.1 angezeigt. Wenn Sie sie ignorieren m√∂chten, l√∂schen Sie den Link <i>android: roundIcon</i> in AndroidManifest.xml. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/626/7c7/baf/6267c7bafb790307f16bf2c0bb8a037a.png"><br>  <i><font color="gray">Sie m√ºssen die Symbole aus dem Manifest entnehmen und in die Unterordner von mipmap mit den entsprechenden Namen kopieren</font></i> <br><br><h3>  Theme-Setup </h3><br>  √ñffnen Sie <i>abschlie√üend app / res / values ‚Äã‚Äã/ styles.xml</i> und nehmen Sie einige √Ñnderungen am Thema vor, sodass es wie PWA aussieht: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AppTheme"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Theme.AppCompat.Light.NoActionBar"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"colorPrimary"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@color/colorPrimary</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"colorPrimaryDark"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@color/colorPrimaryDark</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"colorAccent"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@color/colorAccent</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"android:windowNoTitle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">true</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"android:backgroundDimEnabled"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">false</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Sie k√∂nnen die Farben in <i>app / res / values ‚Äã‚Äã/ colours.xml √§ndern</i> , aber ich habe diese Arbeit in TWA noch nicht gesehen. <br><br>  Wenn Sie die Ausrichtung im Manifest einschr√§nken, k√∂nnen Sie diese Einschr√§nkung dem Element &lt;activity&gt; in AndroidManifest.xml hinzuf√ºgen. <br><br><h1>  Bereit zum Testen? </h1><br>  Wir sind bereit, unser PWApk zu testen, m√ºssen jedoch zuvor den TWA-Entwicklungsmodus f√ºr Chrome auf einem Android-Testger√§t oder in einem Emulator (mit Chrome 72+) konfigurieren. <br><br><h3>  Chrome-Setup </h3><br>  Stellen Sie sicher, dass Sie Chrome Stable Version 72 haben und <i>chrome: // flags</i> √∂ffnen.  Suchen Sie die Option <i>Befehlszeile auf nicht gerooteten Ger√§ten aktivieren</i> und <i>aktivieren Sie das Kontrollk√§stchen</i> .  Starten Sie Ihren Browser neu. <br><br>  Dann m√ºssen wir Chrome so konfigurieren, dass Digital Asset Link f√ºr den Host, den wir testen m√∂chten, <b>umgangen wird</b> . In unserem Beispiel ist es <b>app.starbucks.com</b> . <br><br>  Um die Befehlszeilenoptionen f√ºr Chrome f√ºr Android zu √§ndern, m√ºssen Sie eine Textdatei in das Android-Dateisystem schreiben.  Der einfachste Weg, dies zu tun, ist √ºber <b>adb</b> (android debug bridge), das im Pfad registriert sein sollte (google, falls dies der Fall ist), und f√ºhren Sie den folgenden Befehl aus: <br><br><pre> <code class="bash hljs">adb shell cat /data/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/tmp/chrome-command-line _ - <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-digital-asset-link-verification-for-url=<span class="hljs-string"><span class="hljs-string">"https://app.starbucks.com"</span></span></code> </pre> <br>  Sie k√∂nnen ein <a href="">einfaches Bash-Skript</a> von Google verwenden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb1/285/bec/bb1285becd4651597032df751d86abcf.png"><br>  <i><font color="gray">Sie m√ºssen Chrome stoppen, damit beim Start neue Einstellungen akzeptiert werden</font></i> <br><br>  Und starten Sie Chrome neu.  Entfernen Sie jedoch nicht nur die Anwendung aus der Liste der Aufgaben, sondern auch aus den Einstellungen, um den gesamten Vorgang abzuschlie√üen (Stopp erzwingen).  Ich musste das ein paar Mal machen, bevor es funktionierte. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/590/e38/84b/590e3884b2f60cb751eb746eb24e69f1.png"><br>  <i><font color="gray">Warnung, dass die Flagge leuchtet und alles gut gelaufen ist</font></i> <br><br>  Wenn alles erledigt ist, wird jedes Mal, wenn Sie Chrome √∂ffnen, eine Warnung vor einem nicht unterst√ºtzten Flag angezeigt.  Wenn Sie die Anwendung von Android Studio aus ausf√ºhren, wird Ihre PWA schlie√ülich unter dem Symbol und dem Namen Ihrer APK gestartet und arbeitet offline. <br><br><h1>  Fazit </h1><br>  Die M√∂glichkeit, PWA im Google Play-Verzeichnis zu ver√∂ffentlichen, √§ndert die Spielregeln erheblich.  Es scheint, dass wir jetzt eine sehr fr√ºhe Version der API haben und definitiv etwas Arbeit brauchen.  Ich m√∂chte wirklich in der Lage sein, die URL unserer PWA einzugeben und die APK-Datei daraus abzurufen.  Dies ist aufgrund des Digital Asset Link-Verifizierungssystems nicht sehr einfach.  Nur der Play Store kann dies mit demselben WebAPK tun, das er generiert. <br><br>  Fr√ºher habe ich mich gefragt, ob <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Google PWA-Apps guthei√üt oder Krieg gegen sie f√ºhrt</a> .  Aber jetzt haben sie ihren Verdacht zumindest in Bezug auf die TWA beseitigt. <br><br>  Hoffen wir, dass TWA in Chrome 72 der erste Schritt auf einer langen Reise ist! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de439238/">https://habr.com/ru/post/de439238/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de439224/index.html">Nochmals zu Voronoi-Diagrammen</a></li>
<li><a href="../de439226/index.html">Scala + MXNet = Microservice mit Neuron in Prod</a></li>
<li><a href="../de439232/index.html">JAMstack: So erstellen Sie Ihr eigenes Blog mit Gatsby + Contentful + Netlify</a></li>
<li><a href="../de439234/index.html">Das Leben von Open Source-Entwicklern in GIFs</a></li>
<li><a href="../de439236/index.html">xenvman: Flexible Microservice-Testumgebungen (und mehr)</a></li>
<li><a href="../de439240/index.html">Joomla Digest f√ºr Januar 2019</a></li>
<li><a href="../de439242/index.html">Rund um die Beta in 260 Tagen: Wie wir gelernt haben, Benutzern zuzuh√∂ren</a></li>
<li><a href="../de439244/index.html">FAS empfiehlt dringend, russische Software auf Smartphones und Laptops vorinstallieren, die in der Russischen F√∂deration verkauft werden</a></li>
<li><a href="../de439248/index.html">Alan Kay: K√∂nnten die alten R√∂mer einen Computer bauen?</a></li>
<li><a href="../de439252/index.html">6 Gr√ºnde f√ºr eine IT-Karriere in Armenien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>