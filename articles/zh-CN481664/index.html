<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏼 🤷🏻 💍 无服务器定价和成本：AWS Lambda 🗞️ 🎦 🚱</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！ 我会尽力使翻译更好，对于您的批评我将感到高兴。 
 （注：价格截至2018年8月为准） 

 AWS Lambda有263个具有唯一价格标签的订单项。 例如，它们可能被称为“使用美国，欧洲或日本以外的边缘位置（从欧盟（巴黎）到欧盟（伦敦））使用加速的区域间入境”，并且存在于17个地区中的每...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>无服务器定价和成本：AWS Lambda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481664/">哈Ha！ 我会尽力使翻译更好，对于您的批评我将感到高兴。 <br>  （注：价格截至2018年8月为准） <br><br>  AWS Lambda有263个具有唯一价格标签的订单项。 例如，它们可能被称为“使用美国，欧洲或日本以外的边缘位置（从欧盟（巴黎）到欧盟（伦敦））使用加速的区域间入境”，并且存在于17个地区中的每一个地区。 总共，您可以在完成Lambda时向您开出4,471个独立职位的发票。 <br><a name="habracut"></a><br> 此外，EC2服务有635,035个职位，Route53有12,261个职位，API网关有15,283个职位。 总体而言，Amazon Web Services针对各种服务的单独费率超过一百万。 他们的定价政策是如此复杂，以至于有一个用于检查价格的完整API。 有了它，我得到了这些数字（尽管价格计算器中未包含Lambda）。 <br><br>  Lambda的价格非常重要：首先，使用前百万个请求的免费级别，其后每个后百万个请求的价格标签为0.20美元，加上当月使用的“计算时间” GB秒的0.00001667美元，超过了这需要网关API（每百万个请求3.50美元）来向Lambda发送HTTP请求。 您还需要为Lambda的任何数据传输（每GB 0.09美元）以及对Dynamo DB的任何查询付费。 <br><br><h2> 什么是“计算时间”？ </h2><br> 我们发现，每GB每秒Lambda计算时间需要支付0.00001667美元。 千兆秒单位有点奇怪，您找不到吗？ 这可能意味着您使用1 GB内存时的秒数，但实际上是执行计算时的秒数，乘以为这些计算分配的GB数。 <br><br> 对于那些不喜欢将微中心作为度量单位的用户，我将数字汇总在一个图表中，该图表显示每百万个请求1-6美元，您可以获得多少内存和CPU时间： <br><br><img src="https://habrastorage.org/webt/dm/sk/zp/dmskzpgtk5lwutu_s6abpsd4zku.png" alt="图片"><br><br> 亚马逊发布的价格不包括0.20美元的基本费用，但我已将其包括在计算中。 <br><br> 处理器时间是一毫秒是多少？  Apple II上的毫秒计算代表3,000个处理器周期。 在我的Intel i7笔记本电脑上，这是400万次循环。 对于Amazon，它们会根据您使用的内存量来提高处理器的速度。 换句话说，您的性能是<i>内存* CPU周期时间</i> ，其中<i>CPU周期时间</i>与所使用的内存成比例地减少。  CPU加速将一直持续到一个处理器内核的资源用完为止，然后为您提供第二个内核的资源，根据应用程序的构建，第二个内核的资源可能有用或根本不使用。 <br><br> 考虑到这些细节，我调整了图表以显示您获得了多少实际CPU时间。 我专注于比较测试中使用的普通服务器处理器。 <br><br><img src="https://habrastorage.org/webt/8z/x4/xl/8zx4xlbm__u8a8suvkjqproikvs.png" alt="图片"><br><br> 从图表中可以看出，无论Lambda是从1024 MB运行100毫秒还是从128 MB运行800毫秒都没关系，您将获得相同的计算量并支付相同的费用。 超过1024 MB，您可以实现一个处理器内核的性能，并开始获得第二个处理器内核的功能（如果您的应用程序是多线程的并且可以使用它）。 <br><br><h2> 四舍五入 </h2><br> 此外，处理器时间四舍五入到最接近的100 ms，这意味着即使返回我们测试中当前时间的简单lambda，也要花费我们0.41美元/百万次调用。 当然，您的Lambda很少能精确到毫秒数（即100的倍数）。更常见的是，您将使用Amazon会舍入的一定数量的ms来计算您将支付的费用。 鉴于它们总是被四舍五入，这意味着您将为每个调用平均多支付50毫秒的CPU： <br><br><img src="https://habrastorage.org/webt/eg/eo/ep/egeoep3xbzz1hospnmcmkk36pdm.png" alt="图片"><br><br><h2>  API网关 </h2><br>  AWS Lambda可以在Amazon内部执行各种任务。 但是首先，它们对于我们在没有服务器的情况下创建Web应用程序很感兴趣。 为此，lambda无法直接使用，因为它需要某种能够将请求转换为<i>调用</i> Lambda API的HTTP服务器。 最简单的方法是使用Amazon Gateway API。 <br><br>  API网关的成本为每百万个请求3.50美元，这通常超过Lambda本身的成本。 这是上面的图表，但已针对API网关进行了调整： <br><img src="https://habrastorage.org/webt/pt/bi/bw/ptbibwpfn8suzmtna3kqioneyb8.png" alt="图片"><br><br> 您会注意到1美元，2美元和3美元的线从图表中消失了。 假设您的Lambda消耗的CPU很少，则绝对最小值为3.91 USD /百万个请求。 <br> 如果要使用缓存，还必须支付流量和每小时的额外费用。 <br><br><h2>  53路 </h2><br>  Amazon Route53 DNS也不免费。 在前十亿个查询中，成本为每百万个DNS查询$ 0.40。 这使我们的最低总费用达到$ 4.31 /百万。 <br><br><h2> 更多费用 </h2><br> 计算所有成本可能很乏味。  CloudWatch日志每GB成本$ 0.50。 同时，每GB流量$ 0.09会对帐户产生重大影响。 <br><br><h2>  Lambda @ Edge </h2><br> 亚马逊提供了一种通过Cloudfront CDN服务运行代码的方法。 不变和可变成本是传统Lambda的三倍。 <br><br> 要使用Lambda @ Edge进行HTTPS请求，您首先必须以每百万次请求1美元的价格购买Cloudfront。 您还需要为带宽付费，这很容易成为主要支出项目。 如果您的站点占用1 MB，则最终您将仅为Cloudfront带宽支付$ 85 /百万，或者为南美等地区支付$ 250。 再加上额外的20美元/每百万必须返回给发件人的请求。 <br><br> 以下是您最终只需要为Lambda @ Edge计算支付的费用： <br><br><img src="https://habrastorage.org/webt/vv/ko/wm/vvkowm4nanmc8apkarfksqkexzo.png" alt="图片"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN481664/">https://habr.com/ru/post/zh-CN481664/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN481648/index.html">在Junos PyEZ上找到免费的ipv4子网的任务示例</a></li>
<li><a href="../zh-CN481652/index.html">在BlackBerry Android智能手机上的后门（？）</a></li>
<li><a href="../zh-CN481654/index.html">质量保证工程师如何使用Bot Framework在Test IT的帮助下使您的生活更轻松的故事</a></li>
<li><a href="../zh-CN481656/index.html">PagerDuty，或者为什么运营部门晚上无法入睡</a></li>
<li><a href="../zh-CN481662/index.html">尝试在Kubernetes中构建和自动化部署的新工具</a></li>
<li><a href="../zh-CN481666/index.html">自定义SwiftLint规则</a></li>
<li><a href="../zh-CN481668/index.html">第一个观众问题，或将WebRTC视频流转换为HLS的困难</a></li>
<li><a href="../zh-CN481670/index.html">使用AWS Cloud Adoption Framework创建行动计划</a></li>
<li><a href="../zh-CN481672/index.html">浏览器中的元胞自动机</a></li>
<li><a href="../zh-CN481674/index.html">汽车销售渠道还是如何不合并客户，甚至与拒绝您服务的客户合作？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>