<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⏬ 🎻 🧑🏽‍🤝‍🧑🏽 Software Defined Radio - bagaimana cara kerjanya? Bagian 3 🔠 👵🏿 🖕🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai, Habr. 

 Bagian kedua meneliti aspek praktis menggunakan SDR. Pada bagian ini, kita akan melihat cara menerima data satelit cuaca NOAA menggunaka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Software Defined Radio - bagaimana cara kerjanya? Bagian 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452390/">  Hai, Habr. <br><br>  Bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kedua</a> meneliti aspek praktis menggunakan SDR.  Pada bagian ini, kita akan melihat cara menerima data satelit cuaca NOAA menggunakan Python dan penerima RTL-SDR yang murah ($ 30).  Kode yang dipertimbangkan akan bekerja di mana saja - pada Windows, OSX, Linux, dan bahkan pada Raspberry Pi. <br><br><img src="https://habrastorage.org/webt/ux/vk/he/uxvkhed8_-k9uumw0pgbekyi_m8.png"><br><br>  Siapa peduli, terus di bawah luka. <br><a name="habracut"></a><br><h2>  SoapySDR </h2><br>  Ada cukup banyak produsen berbagai perangkat SDR, dan akan sangat merepotkan untuk mendukung masing-masing secara terpisah, dan itu mahal dalam hal pembelian perangkat keras untuk pengujian.  Pada prinsipnya, untuk akses terpadu, ada dua perpustakaan yang pada dasarnya menjadi standar.  Yang pertama adalah antarmuka <a href="">ExtIO DLL yang</a> agak lama, yang mungkin tidak kurang dari 10 tahun, yang kedua adalah perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SoapySDR yang</a> lebih modern, yang akan kita periksa. <br><br>  SoapySDR adalah seperangkat pustaka lintas-platform yang ditulis dalam C ++ yang menyediakan akses terpadu ke perangkat SDR, baik penerima maupun transceiver.  Jika pabrikan membuat antarmuka seperti itu, maka perangkatnya akan secara otomatis bekerja dengan sejumlah besar program populer (GQRX, GNU Radio, CubicSDR, dll.).  Hampir semua produsen yang memadai, kecuali beberapa, <s>(mengambil kesempatan ini, saya kirim salam saya ke EE)</s> memiliki dukungan SoapySDR, daftar perangkat yang didukung dapat ditemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di halaman proyek</a> .  Seperti yang Anda lihat, itu cukup besar dan termasuk HackRF, USRP, SDRPlay, LimeSDR, RTL-SDR, Red Pitaya dan banyak lainnya. <br><br>  Perpustakaan SoapySDR adalah lintas-platform, mis.  kode yang ditulis untuknya akan bekerja di bawah Windows, OSX, Linux, dan bahkan pada Raspberry Pi.  Untuk Windows, pustaka yang diperlukan adalah bagian dari paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PothosSDR</a> , untuk platform lain, SoapySDR harus dikompilasi secara independen.  Penting untuk mengkompilasi dua bagian - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perpustakaan itu sendiri</a> , dan "plug-in" untuk penerima yang diinginkan, dalam kasus kami itu akan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SoapyRTLSDR</a> (di bawah Windows, perpustakaan juga dapat dirakit dari sumber, untuk ini Anda memerlukan Visual Studio, Cmake, dan SWIG).  Sekarang semuanya sudah siap, dan Anda dapat menulis kode. <br><br>  Kami mengimpor perpustakaan dan mendapatkan daftar penerima: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> __future__ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> print_function <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SoapySDR <span class="hljs-comment"><span class="hljs-comment"># Enumerate devices print("SDR devices:") for d in SoapySDR.Device.enumerate(''): print(d) print()</span></span></code> </pre> <br>  Kami menghubungkan receiver, menjalankan kode dan melihat daftar perangkat, di antaranya adalah rtlsdr kami. <br><br><img src="https://habrastorage.org/webt/li/uj/8v/liuj8v8t1jy0tythfo8rpprstm4.png"><br><br>  Sisa perangkat adalah kartu suara, seperti yang kita ingat, secara historis SDR pertama bekerja dengan tepat melalui input linear PC, dan perpustakaan juga mendukungnya.  Kami mendapatkan informasi tentang perangkat - jumlah saluran yang tersedia, rentang frekuensi, dll .: <br><br><pre> <code class="python hljs">soapy_device = <span class="hljs-string"><span class="hljs-string">"rtlsdr"</span></span> device = SoapySDR.Device(dict(driver = soapy_device)) channels = list(range(device.getNumChannels(SoapySDR.SOAPY_SDR_RX))) print(<span class="hljs-string"><span class="hljs-string">"Channels:"</span></span>, channels) ch = channels[<span class="hljs-number"><span class="hljs-number">0</span></span>] sample_rates = device.listSampleRates(SoapySDR.SOAPY_SDR_RX, ch) print(<span class="hljs-string"><span class="hljs-string">"Sample rates:\n"</span></span>, sample_rates) bandwidths = list(map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> r: int(r.maximum()), device.getBandwidthRange(SoapySDR.SOAPY_SDR_RX, ch))) print(<span class="hljs-string"><span class="hljs-string">"Bandwidths:\n"</span></span>, bandwidths) print(<span class="hljs-string"><span class="hljs-string">"Gain controls:"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> gain <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> device.listGains(SoapySDR.SOAPY_SDR_RX, ch): print(<span class="hljs-string"><span class="hljs-string">" %s: %s"</span></span> % (gain, device.getGainRange(SoapySDR.SOAPY_SDR_RX, ch, gain))) frequencies = device.listFrequencies(SoapySDR.SOAPY_SDR_RX, ch) print(<span class="hljs-string"><span class="hljs-string">"Frequencies names:"</span></span>, frequencies) frequency_name = frequencies[<span class="hljs-number"><span class="hljs-number">0</span></span>] print(<span class="hljs-string"><span class="hljs-string">"Frequency channel name:"</span></span>, frequency_name) print(<span class="hljs-string"><span class="hljs-string">"Frequency range:"</span></span>, device.getFrequencyRange(SoapySDR.SOAPY_SDR_RX, ch, frequency_name)[<span class="hljs-number"><span class="hljs-number">0</span></span>])</code> </pre><br>  Kami memulai program dan melihat informasi tentang penerima: <br><br><img src="https://habrastorage.org/webt/nl/p5/yk/nlp5ykxuvldaqjvfitcdp4oinkk.png"><br><br>  Kita melihat bahwa penerima memiliki satu saluran input dengan nama "RF", frekuensi sampling yang mungkin [250000.0, 1024000.0, 1536000.0, 1792000.0, 1920000.0, 2048000.0, 2160000.0, 2560000.0, 2880000.0, 3200000.0] dan rentang frekuensi 24 MHz-1.7 GHz. <br><br>  Life hack - data yang sama juga dapat diperoleh dari baris perintah dengan mengetikkan perintah <i>SoapySDRUtil --probe = "driver = rtlsdr"</i> . <br><br>  Mengetahui hal ini, kita dapat merekam aliran data dalam WAV.  Seperti disebutkan di bagian sebelumnya, data dari SDR diwakili oleh aliran sinyal yang disebut I dan Q, yang merupakan sampel dari ADC, secara kasar mereka dapat direpresentasikan sebagai data RAW dari kamera.  Siapa pun yang tertarik pada detail lebih lanjut dapat membaca, misalnya, di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Cukup bagi kami untuk mengetahui bahwa kami dapat menulis data ini, dan program SDR lainnya kemudian dapat bekerja dengannya. <br><br>  Catatan itu sendiri cukup sederhana - fungsi readStream mengisi buffer jika ada data, jika tidak ada data, maka -1 akan dikembalikan.  Di bawah ini adalah kode rekaman 10 sampel (bagian yang tidak penting dari kode dihilangkan). <br><br><pre> <code class="python hljs">device.setFrequency(SoapySDR.SOAPY_SDR_RX, channel, <span class="hljs-string"><span class="hljs-string">"RF"</span></span>, frequency) device.setGain(SoapySDR.SOAPY_SDR_RX, channel, <span class="hljs-string"><span class="hljs-string">"TUNER"</span></span>, gain) device.setGainMode(SoapySDR.SOAPY_SDR_RX, channel, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) device.setSampleRate(SoapySDR.SOAPY_SDR_RX, channel, sample_rate) <span class="hljs-comment"><span class="hljs-comment"># Number of blocks to save block, max_blocks = 0, 10 block_size = device.getStreamMTU(stream) print("Block size:", block_size) buffer_format = np.int8 buffer_size = 2*block_size # I+Q buffer = np.empty(buffer_size, buffer_format) while True: d_info = device.readStream(stream, [buffer], buffer_size) if d_info.ret &gt; 0: wav.write(buffer[0:2*d_info.ret]) print("Bytes saved:", 2*d_info.ret) block += 1 if block &gt; max_blocks: break</span></span></code> </pre><br>  Hasilnya dalam tangkapan layar: <br><br><img src="https://habrastorage.org/webt/e_/jn/bb/e_jnbbyfneb3jc3lp7h4kcbsepo.png"><br><br>  Seperti yang Anda lihat, kami menerima blok data dari perangkat, ukuran satu blok adalah 131072 byte, yang pada tingkat sampling 250.000 memberi kita durasi sekitar setengah detik.  Secara umum, mereka yang sebelumnya bekerja dengan kartu suara di Windows akan menemukan banyak kesamaan. <br><br>  Untuk pengujian, tulis file dan periksa apakah semuanya baik-baik saja - dapat diputar dalam SDR #.  Ada satu trik lagi - agar SDR # dapat menampilkan frekuensi stasiun dengan benar, nama file harus ditulis dalam format yang kompatibel dengan HDSDR, dalam bentuk “HDSDR_20190518_115500Z_101000kHz_RF.wav” (seperti yang Anda duga, tanggal dan waktu dalam GMT di awal, kemudian frekuensi di kiloher). .  Ini mudah ditulis dengan Python: <br><br><pre> <code class="python hljs">frequency = <span class="hljs-number"><span class="hljs-number">101000000</span></span> file_name = <span class="hljs-string"><span class="hljs-string">"HDSDR_%s_%dkHz_RF.wav"</span></span> % (datetime.datetime.utcnow().strftime(<span class="hljs-string"><span class="hljs-string">"%Y%m%d_%H%M%SZ"</span></span>), frequency/<span class="hljs-number"><span class="hljs-number">1000</span></span>)</code> </pre><br>  Pertama, periksa band FM.  Semuanya baik-baik saja, stasiun terlihat, musik diputar, RDS berfungsi. <br><br><img src="https://habrastorage.org/webt/uk/wl/jt/ukwljtyarociv4vcld3ngqey-ny.png"><br><br>  Anda dapat mulai merekam NOAA. <br><br><h2>  Asupan NOAA </h2><br>  Jadi, kami memiliki penerima dan program rekaman.  Kami akan tertarik dengan satelit cuaca NOAA 15, NOAA 18 dan NOAA 19 yang mentransmisikan gambar-gambar permukaan bumi pada frekuensi 137.620, 137.9125 dan 137.100 MHz.  Kesulitan utama di sini adalah bahwa Anda perlu "menangkap" saat ketika satelit terbang di atas kami.  Anda dapat mengetahui waktu penerbangan online di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.n2yo.com/passes/?s=25338</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.n2yo.com/passes/?s=28654</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.n2yo.com / berlalu /? s = 33591</a> masing-masing. <br><br><img src="https://habrastorage.org/webt/dp/dy/yb/dpdyybwvq6gx0pzdnk6un5usdvo.png"><br><br>  Agar tidak duduk di depan komputer, tambahkan program menunggu waktu yang tepat.  Ini juga akan memungkinkan Anda untuk menjalankan program di Raspberry Pi, tanpa layar dan keyboard. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datetime <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait_for_start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dt)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Wait for the start while True: now = datetime.datetime.now() diff = int((dt - now).total_seconds()) print("{:02d}:{:02d}:{:02d}: Recording will be started after {}m {:02d}s...".format(now.hour, now.minute, now.second, int(diff / 60), diff % 60)) time.sleep(5) if diff &lt;= 1: break wait_for_start(datetime.datetime(2019, 5, 18, 21, 49, 0))</span></span></code> </pre> <br><br>  Ngomong-ngomong, untuk menjalankan skrip pada Raspberry Pi dan membiarkannya tetap bekerja setelah menutup konsol, Anda harus memasukkan perintah "nohup python recorder.py &amp;". <br><br>  Semuanya siap, jalankan skrip dan dapat melakukan hal-hal lain, rekaman berlangsung sekitar 20 menit.  Secara paralel, pertanyaan mungkin muncul - apakah mungkin untuk melihat bagian dari satelit dengan mata telanjang?  Menurut tabel tersebut, kecerahan maksimumnya sekitar 5,5m <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">besarnya</a> , batas mata manusia dalam kondisi ideal adalah 6m.  Yaitu  di langit yang sangat gelap, jauh di luar kota, bagian dari satelit NOAA secara teoritis dapat diperhatikan, di kota itu, tentu saja, tidak ada kesempatan (seperti yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mereka tulis di Habré</a> , generasi orang yang belum pernah melihat <a href="">Bimasakti</a> dalam kehidupan mereka telah tumbuh). <br><br>  Hasil skrip adalah file wav yang direkam, spektrumnya ditunjukkan pada tangkapan layar. <br><br><img src="https://habrastorage.org/webt/u5/u3/xn/u5u3xnyvsgq6xpmirbqtafeoaak.png"><br><br>  Kami melihat sinyal yang sepenuhnya dapat dibedakan, meskipun tentu saja dengan <a href="">antena khusus</a> untuk menerima NOAA kualitasnya akan jauh lebih baik.  Format sinyal disebut APT ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Automatic Picture Transmission</a> ), dari situ Anda bisa mendapatkan gambar permukaan bumi, jika ada yang tertarik, Anda dapat secara terpisah mempertimbangkan penguraiannya.  Tetapi ada, tentu saja, program yang sudah jadi, Anda dapat mendekode sinyal tersebut menggunakan WxToImg atau MultiPSK. <br><br>  Sangat menarik untuk melihat pergeseran Doppler dalam spektrum, yang terjadi karena satelit terbang melewati kita.  Mungkin, tidak sulit untuk menghitung kecepatannya, mengetahui waktu dan frekuensi bergeser di hertz. <br><br>  Tentu saja, program ini dapat digunakan tidak hanya untuk merekam NOAA, bandwidth dan frekuensi apa pun dapat ditentukan dalam pengaturan.  Bagi mereka yang ingin bereksperimen dengan SoapySDR sendiri, kode program seluruhnya berada di bawah spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Kode sumber</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> __future__ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> print_function <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SoapySDR <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> struct <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datetime <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait_for_start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dt)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Wait for the start while True: now = datetime.datetime.now() diff = int((dt - now).total_seconds()) print("{:02d}:{:02d}:{:02d}: Recording will be started after {}m {:02d}s...".format(now.hour, now.minute, now.second, int(diff / 60), diff % 60)) time.sleep(5) if diff &lt;= 1: break def sdr_enumerate(): # Enumerate SDR devices print("SDR devices:") for d in SoapySDR.Device.enumerate(''): print(d) print() def sdr_init(): soapy_device = "rtlsdr" device = SoapySDR.Device({"driver": soapy_device}) channels = list(range(device.getNumChannels(SoapySDR.SOAPY_SDR_RX))) print("Channels:", channels) ch = channels[0] sample_rates = device.listSampleRates(SoapySDR.SOAPY_SDR_RX, ch) print("Sample rates:\n", sample_rates) print("Gain controls:") for gain in device.listGains(SoapySDR.SOAPY_SDR_RX, ch): print(" %s: %s" % (gain, device.getGainRange(SoapySDR.SOAPY_SDR_RX, ch, gain))) frequencies = device.listFrequencies(SoapySDR.SOAPY_SDR_RX, ch) print("Frequencies names:", frequencies) frequency_name = frequencies[0] print("Frequency channel name:", frequency_name) print("Frequency range:", device.getFrequencyRange(SoapySDR.SOAPY_SDR_RX, ch, frequency_name)[0]) print() return device def sdr_record(device, frequency, sample_rate, gain, blocks_count): print("Frequency:", frequency) print("Sample rate:", sample_rate) print("Gain:", gain) channel = 0 # Always for RTL-SDR device.setFrequency(SoapySDR.SOAPY_SDR_RX, channel, "RF", frequency) device.setGain(SoapySDR.SOAPY_SDR_RX, channel, "TUNER", gain) device.setGainMode(SoapySDR.SOAPY_SDR_RX, channel, False) device.setSampleRate(SoapySDR.SOAPY_SDR_RX, channel, sample_rate) data_format = SoapySDR.SOAPY_SDR_CS8 # if 'rtlsdr' in soapy_device or 'hackrf' in soapy_device else SoapySDR.SOAPY_SDR_CS16 stream = device.setupStream(SoapySDR.SOAPY_SDR_RX, data_format, [channel], {}) device.activateStream(stream) block_size = device.getStreamMTU(stream) print("Block size:", block_size) print("Data format:", data_format) print() # IQ: 2 digits ver variable buffer_format = np.int8 buffer_size = 2 * block_size # I + Q samples buffer = np.empty(buffer_size, buffer_format) # Number of blocks to save block, max_blocks = 0, blocks_count # Save to file file_name = "HDSDR_%s_%dkHz_RF.wav" % (datetime.datetime.utcnow().strftime("%Y%m%d_%H%M%SZ"), frequency/1000) print("Saving file:", file_name) with open(file_name, "wb") as wav: # Wav data info bits_per_sample = 16 channels_num, samples_num = 2, int(max_blocks * block_size) subchunk_size = 16 # always 16 for PCM subchunk2_size = int(samples_num * channels_num * bits_per_sample / 8) block_alignment = int(channels_num * bits_per_sample / 8) # Write RIFF header wav.write('RIFF'.encode('utf-8')) wav.write(struct.pack('&lt;i', 4 + (8 + subchunk_size) + (8 + subchunk2_size))) # Size of the overall file wav.write('WAVE'.encode('utf-8')) # Write fmt subchunk wav.write('fmt '.encode('utf-8')) # chunk type wav.write(struct.pack('&lt;i', subchunk_size)) # subchunk data size (16 for PCM) wav.write(struct.pack('&lt;h', 1)) # compression type 1 - PCM wav.write(struct.pack('&lt;h', channels_num)) # channels wav.write(struct.pack('&lt;i', int(sample_rate))) # sample rate wav.write(struct.pack('&lt;i', int(sample_rate * bits_per_sample * channels_num/ 8))) # byte rate wav.write(struct.pack('&lt;h', block_alignment)) # block alignment wav.write(struct.pack('&lt;h', bits_per_sample)) # sample depth # Write data subchunk wav.write('data'.encode('utf-8')) wav.write(struct.pack('&lt;i', subchunk2_size)) while True: d_info = device.readStream(stream, [buffer], buffer_size) if d_info.ret &gt; 0: data = buffer[0:2*d_info.ret] fileData = data if data_format == SoapySDR.SOAPY_SDR_CS8: fileData = data.astype('int16') wav.write(fileData) print("Block %d saved: %d bytes" % (block, 2*d_info.ret)) block += 1 if block &gt; max_blocks: break device.deactivateStream(stream) device.closeStream(stream) if __name__ == "__main__": print("App started") # Forecast for active NOAA satellites # NOAA 15: 137.620, https://www.n2yo.com/passes/?s=25338 # NOAA 18: 137.9125, https://www.n2yo.com/passes/?s=28654 # NOAA 19: 137.100, https://www.n2yo.com/passes/?s=33591 # Wait for the start: 18-May 21:49 21:49: wait_for_start(datetime.datetime(2019, 5, 18, 21, 49, 0)) device = sdr_init() t_start = time.time() sdr_record(device, frequency=137912500, sample_rate=250000, gain=35, blocks_count=2100) print("Recording complete, time = %ds" % int(time.time() - t_start)) print()</span></span></code> </pre><br></div></div><br>  SoapySDR plus adalah program yang sama dengan perubahan minimal akan bekerja dengan penerima lain, misalnya dengan SDRPlay atau HackRF.  Nah, tentang cross-platform juga sudah disebutkan. <br><br>  Jika pembaca masih tertarik pada topik penerimaan radio, Anda dapat mempertimbangkan contoh penggunaan SDR dengan GNU Radio dengan membuat beberapa penerima virtual berdasarkan pada satu perangkat keras. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id452390/">https://habr.com/ru/post/id452390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id452376/index.html">Keajaiban angka dalam angka desimal</a></li>
<li><a href="../id452378/index.html">Klasifikasi tutupan lahan menggunakan eo-learning. Bagian 2</a></li>
<li><a href="../id452382/index.html">Berita terbaik minggu ini: Pusat Kontrol Runet Autonomous, bitcoin $ 8000, kerentanan pada prosesor Intel</a></li>
<li><a href="../id452384/index.html">Prosesor akan mempercepat optik menjadi 800 Gb / dtk: cara kerjanya</a></li>
<li><a href="../id452388/index.html">Saringan Eratosthenes di luar O (n). Bukti</a></li>
<li><a href="../id452392/index.html">Pilihan dataset pembelajaran mesin</a></li>
<li><a href="../id452394/index.html">Opus tentang Yang Mulia Clay. Bagian Dua - Viva, Cyanoacrylate! Viva, superglue</a></li>
<li><a href="../id452398/index.html">EFORTH untuk kalkulator yang dapat diprogram</a></li>
<li><a href="../id452400/index.html">Bisnis tidak efektif</a></li>
<li><a href="../id452402/index.html">Eksperimen dengan dioda terowongan analog</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>