<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôè üéã üë≥üèø ShIoTiny y el mundo circundante: conectar sensores a entradas binarias, rebote de contactos y otros problemas ‚öæÔ∏è üß¢ ‚õΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Puntos clave o de qu√© trata este art√≠culo 


 Otro art√≠culo sobre ShIoTiny : un controlador visualmente programable basado en el chip ESP8266 . El art...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny y el mundo circundante: conectar sensores a entradas binarias, rebote de contactos y otros problemas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466231/"><img src="https://habrastorage.org/webt/3n/g5/5y/3ng55yiea33i2ft7gzbcydaenka.jpeg"><br><h4 id="osnovnye-tezisy-ili-o-chem-eta-statya">  Puntos clave o de qu√© trata este art√≠culo </h4><br><p>  Otro art√≠culo sobre <strong>ShIoTiny</strong> : un controlador visualmente programable basado en el chip <strong>ESP8266</strong> .  El art√≠culo describe las caracter√≠sticas de conectar sensores de varios tipos a las entradas binarias del controlador <strong>ShIoTiny</strong> .  Adem√°s, hay respuestas a una serie de preguntas populares de los lectores de art√≠culos anteriores de la serie. </p><br><p>  <strong>Art√≠culos de series anteriores</strong> <strong><br></strong> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ShIoTiny: peque√±a automatizaci√≥n, Internet de las cosas o "seis meses antes de las vacaciones"</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ShIoTiny: nodos, enlaces y eventos o caracter√≠sticas de programas de dibujo</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ShIoTiny: ventilaci√≥n de habitaci√≥n h√∫meda (proyecto de ejemplo)</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sitio del proyecto</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Firmware binario, circuitos del controlador y documentaci√≥n</a> </p><a name="habracut"></a><br><h4 id="vstuplenie-ili-otvety-na-voprosy">  Introducci√≥n o respuestas a preguntas </h4><br><p>  Todos mis art√≠culos sobre el tema de <strong>ShIoTiny</strong> , excepto el primero, nacieron de preguntas de lectores que se arriesgaban a probar mi firmware. </p><br><p>  El hecho es que para responder en detalle y a todos a la vez, no tengo la oportunidad.  Un pasatiempo es un pasatiempo y es raro que alguien le dedique tanto tiempo como el trabajo, las tareas dom√©sticas o los ni√±os.  Yo tampoco.  Y las preguntas de las cartas se pueden reducir esencialmente a varias.  Por lo tanto, es m√°s f√°cil escribir un art√≠culo que cubra varios temas en detalle que escribir una docena de cartas. </p><br><p>  Muchas preguntas se refieren a c√≥mo conectar sensores de varios tipos y c√≥mo trabajar con ellos.  Esto no es sorprendente: trabajar con rel√©s de salida es bastante simple.  ¬°Y lo que simplemente no quieren conectar a las entradas!  Hay muchas opciones  Este art√≠culo est√° dedicado a este art√≠culo y probablemente se dedicar√° a lo siguiente: un tema muy amplio: la conexi√≥n de sensores. </p><br><p>  Pero, antes de pasar a la biograf√≠a del maravilloso mundo de los sensores, me permito usar el centro como un medio para responder las preguntas m√°s populares que se me hacen por carta. </p><br><p>  <strong><em>Respuestas a las preguntas m√°s populares de los lectores.</em></strong> <strong><br></strong> </p><br><p>  Probablemente la pregunta m√°s popular es " <strong><em>¬øpor qu√© no son compatibles con PWM / DS1821 / RTC ... y as√≠ sucesivamente?</em></strong>  ".  Yo respondo  Porque cuando dise√±√© ShIoTiny, no lo necesitaba.  En cuanto a PWM, simplemente no hay ning√∫n lugar para ponerlo en el tablero <strong>ShIoTiny</strong> .  No quedan patas para conectar <strong>RTC</strong> .  Y as√≠ sucesivamente.  Pero si el proyecto se desarrolla con suficiente √©xito, har√© otro dispositivo con la misma ideolog√≠a de programaci√≥n, pero con un conjunto diferente de perif√©ricos.  Por supuesto, admitir√© algunos chips adicionales en ShIoTiny, ya que admit√≠, por ejemplo, ayer mismo el <strong>sensor de</strong> temperatura <strong>DS1820 / 22</strong> .  Pero no puedes abrazar la inmensidad y empujar lo in√©dito.  La memoria del controlador, como mi tiempo, no es ilimitada. </p><br><p>  La siguiente pregunta m√°s popular es: ‚Äú <strong><em>¬øPlaneas producir en masa ShIoTiny?</em></strong>  ".  Contestar√© en detalle.  <strong><em>Por el momento</em></strong> tengo algunas tablas m√°s y si alguien est√° interesado, escriba, lo enviar√©.  Si permanecen para entonces, por supuesto.  En serie (es decir, 50-100 piezas), de nuevo, en este momento no planeo lanzarlo.  Simplemente no existe tal demanda, y decir 50 tablas no es tan f√°cil para un hobby y me costar√° mucho.  Habr√° muchos que quieran obtener una tarifa preparada; la situaci√≥n puede cambiar.  <em>Entonces, si no todo, mucho depende de la opini√≥n y el deseo de la sociedad.</em> </p><br><p>  Otra pregunta que se hace con mucha frecuencia: ‚Äú¬ø <strong><em>d√≥nde obtener la fuente?</em></strong>  ".  Yo respondo  En ning√∫n otro lado  Por alguna raz√≥n, a√∫n no puedo publicarlos y no s√© si puedo en el futuro previsible. </p><br><p>  Y finalmente, preguntas sobre <strong>MQTT</strong> y <strong>UDP multicast</strong> .  Espero hacer un art√≠culo separado sobre estos temas, porque hay muchas caracter√≠sticas.  Algo sobre <strong>MQTT</strong> est√° en el art√≠culo anterior sobre el sistema de ventilaci√≥n, pero todo se describe all√≠ en t√©rminos generales.  Y sin embargo, lea las instrucciones.  Hay muchas respuestas, aunque todav√≠a es un borrador. </p><br><p>  Esto concluye con preguntas populares y finalmente trata sobre para qu√© fue escrito este art√≠culo: el asombroso, hermoso, aterrador y misterioso mundo de los sensores. </p><br><h4 id="datchik--chto-eto-i-zachem-ono">  Sensor: ¬øqu√© es y por qu√©? </h4><br><p>  Cualquier inscripci√≥n en un idioma desconocido es solo un patr√≥n complejo para alguien que nunca ha visto letras o jerogl√≠ficos.  No hay fotos para ciegos.  Para sordos, m√∫sica.  ¬øPor qu√© soy yo?  Y el hecho de que la <em>informaci√≥n</em> es una visualizaci√≥n condicional de un objeto o fen√≥meno en alg√∫n medio material.  La informaci√≥n sin un medio material no existe.  Adem√°s, la informaci√≥n no existe sin alguien que pueda entenderla. </p><br><p>  Por lo tanto, si queremos que nuestro <strong>ShIoTiny</strong> no sea "ciego", "sordo" y "analfabeto", debemos ense√±arle a " <em>percibir</em> " y " <em>comprender</em> " la informaci√≥n sobre el mundo que lo rodea y, sobre esta base, tomar ciertas decisiones para administrar lo que se necesita. nosotros equipos </p><br><p>  La informaci√≥n sobre el mundo existe en una amplia variedad de representaciones y en varios soportes de materiales: vibraciones de aire - sonido y flujo de fotones - luz;  la concentraci√≥n de vapor de agua en el aire y la temperatura de la tierra;  La presencia o ausencia de masa y su magnitud.  Y as√≠ sucesivamente.  Todo esto puede llevarnos la informaci√≥n necesaria para la toma de decisiones. </p><br><p>  Pero nuestro microcontrolador <strong>ESP8266</strong> , la base de <strong>ShIoTiny</strong> , solo comprende dos tipos de informaci√≥n: se√±ales digitales binarias <strong>0V</strong> - <strong>3V</strong> y se√±ales anal√≥gicas en el rango de <strong>0V</strong> a <strong>1V</strong> . </p><br><p>  Por lo tanto, necesitamos " <strong>traductores</strong> " del lenguaje de un fen√≥meno f√≠sico particular o cantidad f√≠sica al lenguaje de se√±ales el√©ctricas que sean comprensibles para el microcontrolador <strong>ESP8266</strong> .  Tales " <strong>traductores</strong> " se llaman <strong><em>sensores</em></strong> . </p><br><p>  Hablando estrictamente, en nuestro caso, el <strong><em>sensor</em></strong> es una herramienta t√©cnica que convierte la informaci√≥n sobre el mundo circundante en se√±ales el√©ctricas que son comprensibles para los componentes electr√≥nicos del controlador <strong>ShIoTiny</strong> . </p><br><p>  Los sensores son diferentes.  Hay miles y oscuridad.  Pero si comienzas a entender, entonces no todo es tan aterrador.  <em>En primer lugar</em> , solo nos interesan los sensores que generan una se√±al el√©ctrica en la salida.  <em>En segundo lugar</em> , nos limitaremos solo a los tipos populares de sensores.  Y, en <em>tercer lugar</em> , en la pr√°ctica no hay tantos tipos de se√±ales generadas por los sensores. </p><br><p>  Desde el "primero" - todo est√° claro.  Es f√≠sicamente imposible <strong>conectar un</strong> sensor directamente a <strong>ShIoTiny</strong> que proporciona informaci√≥n en forma mec√°nica, hidr√°ulica o neum√°tica. </p><br><p>  Con "en segundo lugar" - todo tambi√©n est√° claro.  Es poco probable que alguien conecte detectores de part√≠culas r√°pidos espec√≠ficos o medidores de pH en un litio radioactivo fundido a <strong>ShIoTiny</strong> .  Bueno, si alguien lo hace, creo que sus calificaciones son mucho m√°s altas que las m√≠as y lo m√°s probable es que no necesite este art√≠culo.  Pero la temperatura del agua o el aire, la presi√≥n del aire o del agua, la humedad, la luz, el nivel del l√≠quido o el estado de la puerta (abierto-cerrado): todo esto puede medirse muy bien con el controlador ShIoTiny en los sistemas de control dom√©sticos. </p><br><p>  Nos ocuparemos del "tercero".  ¬øQu√© se√±ales el√©ctricas suelen emitir los tipos comunes de sensores?  Se pueden distinguir tres tipos principales de se√±ales en las salidas de los sensores: </p><br><p>  <strong>Se√±ales binarias</strong>  Es decir, las se√±ales que tienen solo dos niveles: l√≥gico 0 o l√≥gico 1. Los par√°metros el√©ctricos no son importantes, siempre se pueden convertir a los niveles deseados. </p><br><p>  <strong>Se√±ales anal√≥gicas</strong>  Es decir, corriente o voltaje, que var√≠a seg√∫n el par√°metro medido en un rango de valores dado. </p><br><p>  <strong>Se√±ales digitales</strong>  Estos son sensores que se comunican con microcontroladores utilizando un protocolo espec√≠fico. </p><br><p>  Aqu√≠, quiz√°s, est√°n todas las opciones que se pueden conectar a <strong>ShIoTiny</strong> .  Por supuesto, tambi√©n hay sensores con una salida de frecuencia, una salida de fase y sensores con todo tipo de se√±ales de salida ex√≥ticas.  Pero como es <strong>imposible</strong> conectarlos directamente con <strong>ShIoTiny,</strong> no hablaremos de ellos ahora. </p><br><h4 id="binarnye-vhody-shiotiny">  Entradas binarias ShIoTiny </h4><br><p>  Comencemos con lo m√°s simple: con las entradas binarias <strong>ShIoTiny</strong> .  Est√°n indicados por <strong>Input1</strong> , <strong>Input2</strong> y <strong>Input3</strong> .  Como estas entradas son absolutamente id√©nticas, consideraremos la entrada <strong>Input1</strong> .  Todo lo que se dice sobre esta entrada es igual de cierto para las otras dos entradas binarias: <strong>Entrada2</strong> y <strong>Entrada3</strong> . </p><br><p>  El <strong>circuito de</strong> entrada binaria <strong>ShIoTiny se</strong> muestra en la figura.  Inmediatamente haga una reserva, el circuito con una peque√±a falla: fue necesario conectar una resistencia de <strong>10K</strong> a una resistencia de <strong>1K</strong> .  Pero esto no afecta el funcionamiento del dispositivo y es maravilloso.  Entonces, ¬øpor qu√© hay tantos elementos en un circuito de entrada binario?  Tal pregunta tambi√©n me fue hecha.  Tratar√© de responderlo. </p><br><p><img src="https://habrastorage.org/webt/eo/ff/qh/eoffqhr5eib1g5jwc1wa5mojsyc.gif" alt="imagen"></p><br><p>  La entrada binaria en <strong>ShIoTiny</strong> funciona en <strong>contactos</strong> " <em>secos</em> " y " <em>h√∫medos</em> ".  Adem√°s, el circuito proporciona protecci√≥n contra sobretensi√≥n (es decir, si, por ejemplo, 5 voltios en lugar de 3 voltios llega a la <strong>entrada 1</strong> , por ejemplo). </p><br><h4 id="zaschita-binarnogo-vhoda">  Protecci√≥n de entrada binaria </h4><br><p>  <strong>La</strong> protecci√≥n contra <strong>sobretensi√≥n</strong> , que se realiza en todas las entradas binarias de <strong>ShIoTiny</strong> , por supuesto, no salvar√° al controlador del agotamiento, si se aplica un voltaje de ~ 220V a su entrada.  Pero al llegar a las entradas <strong>Input1,2,3</strong> <strong>+ 5V</strong> o incluso <strong>+ 12V</strong> - esta protecci√≥n ahorra por completo. </p><br><p>  Dicha protecci√≥n funciona de manera muy simple y puede aplicarse no solo con el <strong>ESP8266</strong> , sino tambi√©n con otros microcontroladores. </p><br><p>  Considere dos opciones para la protecci√≥n: cuando aplique voltaje de <strong>+ 5V</strong> y <strong>-5V</strong> al cable neutro ( <strong>tierra</strong> ) a la entrada de <strong>Entrada1</strong> . </p><br><p>  Cuando el voltaje en la entrada <strong>Entrada1</strong> es normal, los diodos de protecci√≥n <strong>D1</strong> y <strong>D2</strong> est√°n cerrados, ya que se encienden en la direcci√≥n opuesta. </p><br><p>  Tan pronto como el voltaje en la <strong>Entrada 1</strong> excede + 3V (por ejemplo, <strong>acortamos la Entrada1</strong> a <strong>+ 5V</strong> ), el diodo <strong>D1 se</strong> abre y tira de la entrada del controlador <strong>GPIO</strong> a <strong>+ 3V</strong> , evitando que el voltaje en el <strong>GPIO ESP8266 suba</strong> <strong>por</strong> encima de <strong>3V</strong> .  En realidad, el voltaje ser√° ligeramente superior a <strong>3V</strong> (3.2V o 3.3V), pero esto no es importante.  La entrada del microcontrolador no se quemar√° y esto es importante. </p><br><p>  Tan pronto como el voltaje en la <strong>Entrada1 se</strong> vuelve negativo (por ejemplo, acortamos la entrada a <strong>-5V</strong> ), entonces el diodo <strong>D2 se</strong> abre y tira de la <strong>Entrada1</strong> a <strong>tierra</strong> <strong>0V</strong> , sin dejar que el voltaje en la entrada <strong>GPIO ESP8266</strong> caiga por debajo de <strong>0V</strong> .  En realidad, el voltaje ser√° ligeramente inferior a <strong>0 V</strong> (-0,2 <strong>V</strong> o -0,3 <strong>V</strong> ), pero esto tampoco es importante.  La entrada del microcontrolador no se quemar√°. </p><br><p>  La resistencia <strong>1K</strong> es un limitador de corriente para que no haya cortocircuito durante la operaci√≥n de protecci√≥n.  Las corrientes que lo atraviesan son peque√±as.  Por ejemplo, en nuestro ejemplo, si <strong>aplicamos Input1</strong> <strong>+ 5V</strong> a la entrada, entonces la corriente a trav√©s de la resistencia de <strong>1K</strong> ser√° de aproximadamente <strong>2mA</strong> .  Con un voltaje negativo de <strong>-5V</strong> en la entrada <strong>Entrada1, la</strong> corriente a trav√©s de la resistencia de <strong>1K</strong> ser√° de aproximadamente 5 <strong>mA</strong> . </p><br><p>  Si alguien no entiende por qu√© los diodos se abren y cierran, entonces recomiendo leer el libro <strong>"Electr√≥nica paso a paso" de R. A. Svorenya</strong> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">En Internet est√°, por ejemplo, aqu√≠</a> .  Aconsejo especialmente a los principiantes: el lenguaje de este libro es simple y hay muchos ejemplos. </p><br><h4 id="kakie-byvayut-kontakty">  Cuales son los contactos </h4><br><p>  Entonces, con la protecci√≥n resuelta.  Pasemos a otro problema fundamental: conectar la entrada binaria <strong>ShIoTiny</strong> a los sensores binarios. </p><br><p>  Como ya hemos dicho, los sensores binarios son sensores cuya salida tiene dos estados: cero y uno.  Pero esto es l√≥gico.  Y f√≠sicamente puede haber dos opciones para las salidas del sensor binario: " <strong>contacto seco</strong> " y " <strong>contacto h√∫medo</strong> ".  Considere qu√© es y con qu√© se come. </p><br><p>  Un " <strong>contacto seco</strong> " es un contacto que no tiene su propia fuente de voltaje.  Es decir, cualquiera de los dos conductores met√°licos que se pueden poner en corto entre s√≠ y abrirlos.  Esta definici√≥n incluye la masa de los sensores: botones, interruptores, sensores de flotaci√≥n para nivel de l√≠quido, interruptores de l√°minas (sensores de campo magn√©tico), etc.  En los circuitos el√©ctricos, <strong>los</strong> " <strong>contactos secos</strong> " <strong>normalmente abiertos</strong> generalmente se indican como se muestra en la figura. </p><br><p><img src="https://habrastorage.org/webt/vt/rc/ya/vtrcyaeq7yo2o4hdju-2edxx_7w.png" alt="imagen"></p><br><p>  Normalmente abierto: esto significa abierto cuando no hay influencia externa: el bot√≥n no est√° presionado, el interruptor no est√° encendido, el interruptor de l√°minas no tiene un im√°n cerca ... </p><br><p>  Tambi√©n hay <strong>normalmente</strong> " <strong>contactos secos</strong> " <strong>cerrados</strong> .  En los circuitos el√©ctricos, generalmente se indican como se muestra en la figura. </p><br><p><img src="https://habrastorage.org/webt/ze/mj/lj/zemjljubtoz6y8gldzq6gb5qznq.png" alt="imagen"></p><br><p>  A diferencia de los " <strong>contactos secos</strong> " normalmente abiertos, normalmente cerrados, en ausencia de influencias externas, est√°n cerrados. </p><br><p>  Ambos y otros " <strong>contactos secos</strong> " pueden conectarse de forma segura a las entradas <strong>Input1,2,3</strong> controller <strong>ShIoTiny</strong> .  Los sensores con una salida de tipo de <strong>contacto seco</strong> est√°n <strong>conectados a las</strong> entradas binarias <strong>ShIoTiny</strong> como se muestra en la figura. </p><br><p><img src="https://habrastorage.org/webt/8j/fs/8i/8jfs8i8xydqsyuirvrrtihvotly.gif" alt="imagen"></p><br><p>  Si el " <strong>contacto seco</strong> " de la <strong>Entrada 1</strong> est√° cerrado, entonces el voltaje de aproximadamente cero voltios se aplica a la entrada del controlador (m√°s precisamente, 0.3 Voltios debido a un error en el circuito), ya que el " <strong>contacto seco</strong> " cierra la entrada del controlador a tierra a trav√©s de un divisor formado por resistencias de <strong>1K</strong> y <strong>10K</strong> .  En este caso, el <em>nodo</em> <strong>Entrada1</strong> configurar√° la unidad para la salida. </p><br><p>  Por el contrario, si el <strong>contacto seco de la</strong> <strong>Entrada 1 est√°</strong> abierto, se suministran aproximadamente tres voltios a la entrada del controlador, ya que la entrada del controlador se extrae del voltaje de suministro a trav√©s de una resistencia de <strong>10K</strong> .  En este caso, el nodo <strong>Entrada1</strong> establecer√° cero en su salida. </p><br><p>  Toda esta descripci√≥n detallada es para curiosos.  En la l√≠nea inferior, tenemos lo siguiente: si conectamos un sensor con una salida del tipo " <strong>contacto seco</strong> " a la <strong>entrada1</strong> , cuando el contacto est√© abierto, la salida del nodo <strong>Entrada1</strong> ser√° cero, y cuando el contacto est√© cerrado, la salida del mismo nodo ser√° una.  Del mismo modo para entradas y nodos <strong>Input2</strong> y <strong>Input3</strong> . </p><br><p>  Pasemos a <strong>los contactos h√∫medos</strong> . </p><br><p>  Un " <strong>contacto h√∫medo</strong> " es un contacto que tiene su propia fuente de voltaje en al menos una de sus posiciones.  Por ejemplo, la salida de otro controlador o circuito l√≥gico;  bombilla de luz de l√≠nea y as√≠ sucesivamente.  Puede haber muchas opciones aqu√≠.  Pero casi todos ellos directamente o con la ayuda de varios detalles permiten hacer coincidir las entradas binarias <strong>Input1,2,3</strong> con la salida del dispositivo - " <strong>contacto h√∫medo</strong> ". </p><br><p>  Comencemos con el m√°s simple: hacer coincidir la entrada <strong>Input1</strong> con la salida del sensor o tipo de microcircuito " <strong>colector abierto</strong> " o " <strong>drenaje abierto</strong> ". </p><br><p>  De hecho, <strong><em>en nuestro caso</em></strong> , este circuito es completamente an√°logo a conectar un sensor con una <strong>salida de contacto seco</strong> .  Solo el papel del contacto lo realiza el transistor. </p><br><p>  El esquema de dicha conexi√≥n se muestra en la figura.  La esencia del concepto de " <strong>colector abierto</strong> " o " <strong>drenaje abierto</strong> " es que el <strong>emisor</strong> (o <strong>fuente</strong> ) del transistor de salida est√° conectado a la " <strong>tierra</strong> " (a menudo justo dentro del microcircuito), y el <strong>colector</strong> (o <strong>drenaje</strong> ) est√° conectado a la "pata" del microcircuito y m√°s a nada </p><br><p>  El funcionamiento de este esquema es comprensible para un novato (¬°no un gas imaginario, sino una persona!).  Tan pronto como se abre el transistor dentro del microcircuito, cierra la entrada <strong>Input1</strong> a tierra y luego todo funciona por analog√≠a con un contacto " <strong>seco</strong> ". </p><br><img src="https://habrastorage.org/webt/tl/__/nh/tl__nhsp-3hwmb1eztprk1lxo0g.gif"><br><p>  Desafortunadamente, no todos los microchips y sensores tienen una salida tan maravillosa con un colector abierto o drenaje.  Muchos, si no la mayor√≠a de los chips y sensores tienen una salida activa.  Esto significa que cuando tenemos una unidad l√≥gica en la salida, la salida se "eleva" al voltaje de suministro, y cuando un cero l√≥gico, la salida se "eleva" al suelo.  La salida de dicho chip se muestra en la figura a continuaci√≥n.  Por supuesto, todo est√° simplificado. </p><br><img src="https://habrastorage.org/webt/ll/9p/ca/ll9pcawme5kebyua--xi9hscacu.gif"><br><p>  ¬øQu√© debemos hacer si el microcircuito o el sensor que queremos conectar a la <strong>Entrada 1</strong> tiene una salida tan activa? </p><br><p>  Aqu√≠ hay dos opciones y dependen del valor de la tensi√≥n de alimentaci√≥n del microcircuito o sensor de <strong>Vcc</strong> . </p><br><p>  Si el voltaje de suministro del chip o el sensor de <strong>Vcc</strong> es el mismo que el del <strong>ESP8266</strong> (es decir, 3 voltios), simplemente puede conectar esta salida a la entrada <strong>Input1</strong> , que en realidad se muestra en la figura anterior. </p><br><p>  Pero, ¬øqu√© pasa si la fuente de alimentaci√≥n del sensor o microcircuito es <strong>+ 5V</strong> o <strong>+ 12V</strong> ?  En nuestro caso, puede hacerlo simplemente encendiendo el diodo Schottky, como se muestra en la figura a continuaci√≥n. </p><br><img src="https://habrastorage.org/webt/xo/ig/mh/xoigmhvkz7mjgd4htvm2ygddtq8.gif"><br><p>  Y un matiz m√°s: todos los circuitos con un contacto " <strong>h√∫medo</strong> " nos dan una <strong>se√±al inversa</strong> .  Es decir, cuando la unidad l√≥gica est√° en la salida del sensor o microcircuito, el nodo <strong>Entrada1</strong> establecer√° la salida en cero.  Y viceversa.  Pero esto se corrige program√°ticamente: simplemente inserte el nodo inversor en el circuito.  Todo esto se muestra en la figura. </p><br><p><img src="https://habrastorage.org/webt/va/xh/te/vaxhteujl9fg9mlmom0ex2hijgm.png" alt="imagen"></p><br><p>  De hecho, eso es todo lo b√°sico que necesita saber sobre la conexi√≥n de sensores a las entradas binarias <strong>Input1,2,3</strong> . </p><br><p>  Por supuesto, en teor√≠a puede haber otras opciones, pero mostr√© las formas m√°s simples y comunes de conectar sensores con salidas de <strong>contacto seco</strong> y salidas activas de bajo voltaje. </p><br><h4 id="trepet-kontaktov">  Emoci√≥n de contacto </h4><br><p>  Los contactos tiemblan.  No por miedo al creador del dispositivo, sino por el hecho de que son resistentes.  Cuando presiona el bot√≥n, los contactos pueden abrirse de 5 a 7 veces antes de cerrarse de manera estable.  El mismo fen√≥meno ocurre cuando se sueltan los botones.  Y este fen√≥meno se llama " <strong>rebote de contactos</strong> ". </p><br><p>  <strong>El rebote de contacto</strong> es la maldici√≥n de todos los sensores de contacto mec√°nicos: interruptores, botones, interruptores de l√°minas, etc.  La charla desagradable es que causa falsos clics o falsas liberaciones de un bot√≥n o contacto. </p><br><p>  Hay varias formas de lidiar con este fen√≥meno desagradable.  Probablemente la forma m√°s antigua de luchar es el <strong>gatillo</strong> .  Con este m√©todo, se utiliza un bot√≥n con un contacto de conmutaci√≥n y un disparador RS normal, que se activan de acuerdo con el esquema, como se muestra en la figura. </p><br><p><img src="https://habrastorage.org/webt/1s/lm/yo/1slmyoteklx46ct9nfgjt-hevtk.png" alt="imagen"></p><br><p>  Como funciona  Muy simple  Un disparador tiene dos estados.  Mientras el bot√≥n est√° cerrado a la entrada <strong>R del</strong> disparador, la salida <strong>Q del</strong> disparador se establece en cero. </p><br><p>  Presionamos el bot√≥n, hasta que el contacto central del bot√≥n toc√≥ el fondo, nada cambia, la salida del gatillo es cero.  Tan pronto como el contacto central del bot√≥n toc√≥ el contacto inferior del mismo bot√≥n y cerr√≥ la entrada del gatillo <strong>S</strong> a tierra, aparece uno en la salida del gatillo.  Y esta unidad permanece mientras los contactos "traquetean".  De hecho, para volver a poner la salida de disparo en cero, ¬°es necesario que la entrada de disparo <strong>R</strong> est√© en cortocircuito a tierra!  Este esquema funciona exactamente de la misma manera cuando sueltas el bot√≥n. </p><br><p>  ¬øPodemos hacer un circuito as√≠ en <strong>ShIoTiny</strong> ?  Si, no hay problema!  En la figura, se muestra. </p><br><p><img src="https://habrastorage.org/webt/hz/p2/yg/hzp2yg7lx4zo7i6ko8lyok3iikk.png" alt="imagen"></p><br><p>  ¬øPero gastar dos de sus tres entradas en un sensor?  Adem√°s, ¬°no todos los sensores tienen un contacto de conmutaci√≥n! </p><br><p>  No, iremos hacia otro lado, como legado, a todos los ingeniosos te√≥ricos V.I.  Ulyanov! </p><br><p>  La segunda forma, y ‚Äã‚Äãprobablemente la m√°s com√∫n hoy en d√≠a, de lidiar con el rebote de contacto es un <strong>filtro de software</strong> . </p><br><p>  ¬øQu√© hay detr√°s de estas ingeniosas palabras?  Y de nuevo, nada complicado.  Imagine que no responderemos a cambios "cortos" en el estado de los contactos.  Por ejemplo, si leemos cero desde el bot√≥n, entonces, para cortos (digamos, la duraci√≥n es inferior a 0.3 segundos), estalla unidades <del>  nosotros martillaremos </del>  deja de reaccionar  Y solo cuando tengamos un bot√≥n durante 0.3 segundos emitiremos continuamente una unidad, responderemos a esto.  Lo mismo al cambiar el estado de un bot√≥n de uno a cero. </p><br><p>     ‚Äî    ,   .         .         RS-! </p><br><p>     ?  <strong>ShIoTiny</strong>  -,          . </p><br><p><img src="https://habrastorage.org/webt/-t/tv/hq/-ttvhqvwjzrj1_8f0rzuztiugz4.png" alt="imagen"></p><br><p>  <strong>Delay0/1</strong>      ,     <strong>0.4</strong> . </p><br><p> ,          .   ,   ,      . </p><br><h4 id="zaklyuchenie">  Conclusi√≥n </h4><br><p>       ,       ‚Äî ,     ,       . </p><br><p>              <strong></strong> . </p><br><p>  , , , ,    ‚Äî  : shiotiny@yandex.ru </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466231/">https://habr.com/ru/post/466231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../466215/index.html">Dise√±o orientado a modelos. Creaci√≥n de un modelo confiable, utilizando el ejemplo de un intercambiador de calor de aviaci√≥n.</a></li>
<li><a href="../466217/index.html">Generaci√≥n de documentos usando ONLYOFFICE DocumentBuilder</a></li>
<li><a href="../466223/index.html">Descomposici√≥n limpia</a></li>
<li><a href="../466227/index.html">Programaci√≥n Orientada a Nodos</a></li>
<li><a href="../466229/index.html">C√≥mo comprar diez cajas de algod√≥n y no equivocarse</a></li>
<li><a href="../466235/index.html">Munch en una exploraci√≥n equidistante y Meyerhold, que destruy√≥ la Plaza Roja - Denis Semenov sobre arte VR</a></li>
<li><a href="../466237/index.html">C√≥mo el joven verde escribi√≥ su recarga caliente</a></li>
<li><a href="../466247/index.html">Entrevista introvertida</a></li>
<li><a href="../466249/index.html">Escribir una serpiente para Android en Kivy, Python</a></li>
<li><a href="../466251/index.html">Impulsando el proyecto de Soft Launch a $ 1 mill√≥n en ingresos por mes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>