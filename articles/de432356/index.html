<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ´ üíÉüèæ üë©üèæ‚Äçüè´ So schreiben Sie in 20 Stunden einen hervorragenden VKontakte-Newsfeed üêë ü•õ üë®‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Vor kurzem gab es einen Wettbewerb der VKontakte Mobile Challenge, und meine Arbeit wurde mit einem Preis ausgezeichnet. Auf Anweisu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So schreiben Sie in 20 Stunden einen hervorragenden VKontakte-Newsfeed</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432356/">  Hallo allerseits!  Vor kurzem gab es einen Wettbewerb der VKontakte Mobile Challenge, und meine Arbeit wurde mit einem Preis ausgezeichnet.  Auf Anweisung der zweiten Stufe musste ein Newsfeed f√ºr mobile Ger√§te entwickelt werden, und die Hauptbewertungskriterien waren reibungsloses Scrollen und Nachladen.  Als ich teilnahm, entschied ich, dass ich unabh√§ngig vom Endergebnis versuchen werde, einen Artikel √ºber den Ansatz zur Implementierung des Bandes und √ºber meine Emotionen und Gef√ºhle w√§hrend des Wettbewerbs zu schreiben.  Was ich getan habe.  Unter der Katze Tipps und Tricks zum Entwickeln von Newsfeeds im Storytelling-Modus. <br><br><img src="https://habrastorage.org/webt/qs/vl/bd/qsvlbdyf6xjc1qme1fbsdkrt4fq.jpeg"><br><a name="habracut"></a><br><h2>  √úber den Wettbewerb </h2><br>  Zun√§chst lohnt es sich, ein wenig √ºber die Konkurrenz zu erz√§hlen.  Wie ich wei√ü, organisiert VKontakte solche Veranstaltungen j√§hrlich f√ºr mobile Entwickler.  Ich selbst habe bereits 2012 und 2013 teilgenommen.  Die Aufgaben waren die Entwicklung von Chat- bzw. Bildfiltern.  2013 schaffte ich es in die Endrunde und gewann 100.000 Rubel, was mir dann f√ºr 4 Tage ohne interessante Arbeit eine sehr gute Menge erschien. <br><br>  Und als ich die Anzeigen in einem sozialen Netzwerk sah, entschied ich, dass ich es versuchen muss, denn das Coole ist, sich selbst zu beweisen, dass Sie in sehr kurzer Zeit immer noch hochwertigen Code schreiben k√∂nnen. <br>  Der Wettbewerb bestand aus zwei Phasen: In der ersten Phase wurde vorgeschlagen, einen Test mit 30 Fragen zu bestehen, zwei Olympiadenprobleme und eine qualitativ hochwertige zu l√∂sen (d. H. Eine L√∂sung besteht aus einer Reihe Ihrer Gedanken in Form von Text).  In der zweiten Runde von mehr als 1000 Personen bestanden nur 112 (wir sprechen nur √ºber iOS, auf Android etwas niedrigere Werte) und die Hauptphase begann - die Anwendungsentwicklung. <br><br>  Bei der Zuweisung mussten Sie einen Newsfeed erstellen, die Integration in die VK-API selbst schreiben, der Feed sollte auf allen Ger√§ten sehr reibungslos verlaufen sein, es gab bestimmte Anforderungen f√ºr die Anzeige von Inhalten (Beitr√§ge mit Bildern und einem Karussell, Z√§hler f√ºr Likes, Freigaben, Anzahl der Aufrufe sowie die M√∂glichkeit zur Minimierung) und den Beitrag unter bestimmten Bedingungen bereitstellen). <br><br>  Layouts wurden in Figma angelegt.  Dies ist eine gute Wahl f√ºr den Wettbewerb - aufgrund der Anzahl der aktiven Benutzer ist der Wettbewerb sofort zu sp√ºren (und wurde sogar am Samstag ausgeschaltet, weil das gleichzeitige Limit von 50 Verbindungen √ºberschritten wurde). <br><br>  Im Allgemeinen verlief die Organisation des Wettbewerbs bis auf einige Punkte reibungslos: Unmittelbar nach der Ver√∂ffentlichung des Auftrags stellte sich heraus, dass die Verkn√ºpfung zu den Layouts unterbrochen war. Dann wurde, wie oben erw√§hnt, am Samstag der Eingang zu Figma blockiert (dieses Problem wurde sehr schnell behoben). Nun, nach der Veranstaltung dauerte es eine Weile Ergebnisse erwarten.  Aber all das Negative gl√§ttet einen √§hnlichen Beitrag: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ss/9k/br/ss9kbrm8ezjvfipwqfyh8ymkabw.png"></div><br><h2>  Siegesplan und Strategie </h2><br>  Ein sehr wichtiger und interessanter Block, wenn Sie an Wettbewerben teilnehmen oder es versuchen m√∂chten.  Vor der Teilnahme empfehle ich jedem, dar√ºber nachzudenken, welches Ziel Sie verfolgen und welches Ergebnis Sie auf dem Weg nach drau√üen erzielen m√∂chten.  Bevor ich mit dem Wettbewerb anfing, habe ich selbst entschieden, dass ich ihn gewinnen m√∂chte (d. H. Den Preis annehmen).  Und dazu brauchen Sie eine Strategie: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lv/ez/ax/lvezaxkggibj2tjl8n-d5mjeqak.jpeg"></div><br>  Das Folgende ist die Formel f√ºr eine Gewinnstrategie (sie scheint mir universell und einfach zu sein, aber ich bin sicher, dass die meisten Teilnehmer sie nicht befolgen): <br><br><ul><li>  <b>Lesen Sie die Aufgabe sehr sorgf√§ltig durch</b> .  Lesen Sie es nach einigen Stunden noch einmal durch (ich bin mehrmals in eine Situation geraten, in der ich Aufgaben beim ersten Mal nicht wahrgenommen habe).  Und ein paar Stunden vor der Lieferung noch einmal f√ºr alle F√§lle. </li><li>  <b>Stellen Sie Fragen und stellen Sie sie den Organisatoren</b> (normalerweise ber√ºcksichtigen die Anforderungen f√ºr den Auftrag nicht viele Situationen oder sind sehr oberfl√§chlich).  Ich habe genau das getan und Antworten im Stil "Ihrer Wahl" erhalten. </li><li>  <b>Machen Sie einen Projektplan.</b>  Ja, die Teilnahme an einem Wettbewerb oder Hackathon ist ein Projekt.  Das Projekt hat ein Ziel, einen Zeitplan, Ressourcen und ein Budget.  Die Zeit ist streng begrenzt und es ist unm√∂glich, das Ende der Ver√§nderung zu verschieben.  Zus√§tzliche Personen k√∂nnen nicht eingeladen werden - der Wettbewerb ist kein Teamwettbewerb.  Alles was du hast sind deine eigenen Leute.  / Uhr.  Bestimmen Sie sofort, wie viel Sie bereit sind, auszugeben (denken Sie gut dar√ºber nach, wie viel Schlaf, Essen, Kastration, Pausen und ja, Ihre Produktivit√§t aufgrund von M√ºdigkeit und Nerven aufgrund eines Gef√ºhls der Hilflosigkeit vor einem unaufhaltsam nahenden Zeitrahmen sinken wird). </li><li>  <b>Der Plan sollte Aufgaben, ihre Priorit√§ten und Gewichte enthalten</b> (ich habe Sch√§tzungen der Form 1, 2, 4, 8 verwendet).  Die Bewertung umfasst die Dauer, die mangelnde Bereitschaft zur Erf√ºllung und potenzielle Risiken (Komplexit√§t, unverst√§ndliche Bedingungen, keine Erfahrung mit einer solchen Entwicklung usw.).  Als n√§chstes erstellen Sie einen detaillierten Plan (oder Roadmap-Aufgaben) - zuerst die wichtigsten und komplexesten (lassen Sie am Ende einfach und verst√§ndlich). </li><li>  <b>W√§hlen Sie einige gro√üe Intervalle oder Meilensteine</b> (Tage sind gro√üartig - wir hatten 3 Tage).  Und w√§hrend Sie die einzelnen Schritte durchgehen, sehen Sie sich Ihren Arbeitsplan an, zerlegen Sie die Aufgaben, sortieren Sie sie und streichen Sie vor allem die Aufgaben durch, die Sie bereits mit Vergn√ºgen erledigt haben. <br>  Nun der Rat (genau das habe ich getan): Schauen Sie sich genau an, wie die Aufgabe formuliert ist, ob sie die W√∂rter ‚Äûerforderlich‚Äú und ‚Äûzus√§tzlich‚Äú enth√§lt.  Und was sind die Bewertungskriterien f√ºr die Elemente aus dem "zus√§tzlichen", d.h.  ob sie ihren Mangel an umgesetzten Anforderungen aus dem Abschnitt ‚Äûobligatorisch‚Äú au√üer Kraft setzen.  Ich bezweifle.  Konzentrieren Sie sich daher auf den Abschnitt ‚ÄûErforderlich‚Äú.  F√ºr mich selbst habe ich den Abschnitt ‚ÄûFortgeschrittene‚Äú im Allgemeinen bewusst durchgestrichen und wollte ihn nicht einmal starten. </li><li>  Achten Sie bei der Implementierung auf <b>die Details</b> .  Wenn die Aufgabe beispielsweise viele Schnittstellenformulare enth√§lt, f√ºhren Sie diese so aus, wie sie in den Layouts angezeigt werden.  Achten Sie auf Einr√ºckungen, Schriftarten, Schatten, Zeilenabst√§nde usw.  Dies wird Ihnen sicherlich Punkte f√ºr Genauigkeit und Konsistenz hinzuf√ºgen.  √úbrigens gibt es in Figma im Gegensatz zu Zeplin einen sehr breiten Export von Einstellungen, zum Beispiel k√∂nnen Sie einen guten NSAttributedString erhalten. </li></ul><br>  Die Mission wurde in der Nacht von Donnerstag auf Freitag er√∂ffnet.  Freitag ist ein Arbeitstag und es gab keine Gelegenheit und keinen Wunsch, an einem Wettbewerb bei der Arbeit teilzunehmen.  Nachdem ich am Freitagabend von der Arbeit zur√ºckgekehrt war, plante, bewertete und berechnete ich zun√§chst, wie viel Echtzeit ich verbringen kann. <br><br>  Der urspr√ºngliche Plan war wie folgt: <br><table><tbody><tr><td width="100">  Tag </td><td width="100">  Zeit </td><td>  Die Aufgaben </td></tr><tr><td>  Freitag </td><td>  4 Stunden </td><td>  Autorisierung, Abrufen von Daten f√ºr das Profil und das Band. </td></tr><tr><td>  Samstag </td><td>  9 Stunden </td><td>  Der Prototyp des Bandes mit der Anzeige von roten Quadraten unterschiedlicher H√∂he, die durch Ziehen zum Aktualisieren und endloses Laden in den Verlauf oben geladen werden, Vorbereitung aller Modelle und Dienste (Arbeiten mit der API, Anforderungs-Caching, Bild-Caching). <br></td></tr><tr><td>  Sonntag </td><td>  9 Stunden </td><td>  Ausgabe von realen Daten (Text, Einzelbilder und Karussells), Z√§hlern von Likes, Ansichten und endg√ºltiger Abstimmung nach Layouts. </td></tr></tbody></table><br><h2>  Bandimplementierungstechnik </h2><br>  Hurra!  Meine Herren, Entwickler, Sie haben den richtigen Block gefunden.  Hier werden wir √ºber die Implementierung des Hauptteils der Aufgabe sprechen - des Newsfeeds. <br><br>  Wenn wir den Newsfeed deaktivieren, handelt es sich im Allgemeinen nur um eine angewendete Implementierung. Im Allgemeinen wird √ºber das Erstellen einer Liste heterogener Entit√§ten gesprochen (dh jede kann eine eigene Anzeige haben, die zus√§tzliche Berechnungen erfordert, und ihre eigene H√∂he, die sich auch nach der Anzeige des Posts dynamisch √§ndern kann.) Au√üerdem kann die Liste per Pull-to-Refresh aktualisiert und Daten von unten unendlich geladen werden. <br><br>  Es war das allgemeine Problem, das ich √ºberhaupt l√∂sen wollte.  Der erste Schritt besteht darin, vorhandene L√∂sungen zu analysieren.  Sie m√ºssen sich auf die St√§rksten konzentrieren, daher habe ich 3 Anwendungen zum Vergleich ausgew√§hlt: Vkontakte, Facebook, Instagram. <br><br>  Also wollte ich eine Studie √ºber die 6 akutesten und kritischsten Probleme durchf√ºhren: <br><br><ol><li>  Pull-to-Refresh (am Anfang der Liste hinzuf√ºgen) </li><li>  Reibungsloses Laden des Verlaufs (am Ende der Liste hinzuf√ºgen) </li><li>  Schnelles Scrollen (abwechselnd mit den Fingern beschleunigen wir das Band so weit, wie es die Reibungskraft zul√§sst) </li><li>  Scrollen Sie nach oben (sammeln Sie eine gro√üe Geschichte und klicken Sie auf die Statusleiste) </li><li>  Gibt es eine dynamische Offenlegung (Erh√∂hung) des Beitrags und was ist die Animation? </li><li>  Wie das Band im Modus des fast vollst√§ndigen Paketverlusts funktioniert (Entwickler -&gt; Network Link Conditioner -&gt; Sehr schlechtes Netzwerk) </li></ol><br><img align="left" src="https://habrastorage.org/webt/cd/zq/hf/cdzqhfx6xjxylpjscwskjqopwvc.gif"><br>  Im Allgemeinen verhalten sich alle Anwendungen gut, aber ich habe immer noch einige Probleme festgestellt. <br>  Sehen Sie sich beispielsweise an, wie sich das Pull-to-Refresh-Verhalten in VKontakte verh√§lt, wenn Sie Ihren Finger w√§hrend des Updates nicht loslassen und das Men√ºband vorsichtig nach oben ziehen (siehe GIF links). <br><br>  Sehen Sie diesen Sprung auch? <br><br>  Instagram und Facebook zeigten kein solches Verhalten. <br><br>  Und es gibt auch einen sp√ºrbaren Unterschied bei der Offenlegung nach der Ver√∂ffentlichung.  Bei Facebook und Instagram geschieht dies mit einer reibungslosen Animation, und VKontakte aktualisiert die Gr√∂√üe einfach durch Klicken. <br><br><img width="200" src="https://habrastorage.org/webt/fz/vr/e0/fzvre0irj7pyenw20stzliviu-m.gif"><img width="200" src="https://habrastorage.org/webt/jy/me/a3/jymea31x_cquywrn_5s1q5bkyxk.gif"><img width="200" src="https://habrastorage.org/webt/gz/8f/yv/gz8fyvzq-wgoy_hspb1v6gdhgxq.gif"><br><br>  Unsere Aufgabe ist es also, eine reibungslose Schriftrolle zu erstellen, Beitr√§ge herunterzuladen und auch mit Animation zu enth√ºllen. <br><br>  Der erste Schritt besteht darin, ein Konzept auszuw√§hlen und einen Prototyp auf roten Quadraten zu erstellen (ich frage mich, warum ich f√ºr Prototypen immer intuitiv eine rote Farbe w√§hle. Ist dies bei allen der Fall?). <br>  Meine Hauptidee bei der Verbesserung der Produktivit√§t war es, alle Schnickschnack, die Apple seit vielen Jahren eingef√ºhrt hat, aufzugeben und buchst√§blich auf die Entwicklung f√ºr iOS 3 zur√ºckzugreifen. Und das bedeutet: <br><br><ul><li>  Ablehnung von AutoLayout (ja, es ist langsam, glaube es nicht - ich kann es in den Kommentaren beweisen) </li><li>  Weigerung, die H√∂he von Tabellenzellen automatisch zu berechnen </li></ul><br>  Als Ergebnis wurde das folgende Konzept gew√§hlt: <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/co/k1/17/cok117aerlspo8jhpvgedow5er8.png"></div><br><br>  Lassen Sie uns etwas detaillierter werden. <br><br>  Im Hauptthread aktualisieren wir die Benutzeroberfl√§che, verarbeiten Benutzeraktionen (nach unten scrollen und zum Aktualisieren ziehen, auf einen Beitrag klicken, um ihn zu vergr√∂√üern) und l√∂sen ein Servicemodell zum Empfangen und Vorbereiten von Daten aus. <br><br>  <b>API-Aufruf</b> .  Hier ist alles einfach - NSURLSession mit konfiguriertem NSURLCache.  Es ist wichtig, dass wir beim Laden des Verlaufs den Cache verwenden und ihn beim Pull-to-Refresh deaktivieren.  Genau dieses Verhalten habe ich auf VK und Facebook ausspioniert. <br><br>  <b>Parsen und Erstellen von Modellen</b> .  Hier ist die Logik zum Verarbeiten einer bestimmten Anforderung, zum Ausl√∂sen von Fehlern und zum Zur√ºckgeben von Transportmodellen mit Daten. <br><br>  <b>Berechnung von Pr√§sentationsmodellen</b> .  Der wichtigste Schritt zur Leistungsoptimierung.  Hier werden Transportmodelle mit dem PostModel-Postfix in Entit√§ten umgewandelt.  ViewModel speichert vollst√§ndig vorbereitete Daten f√ºr die Anzeige - AttributedString, berechnete Zellenh√∂he (f√ºr 2 Zust√§nde: reduziert und erweitert), vollst√§ndiger Name als Zeichenfolge, Datumszeichenfolge (bereits aus DateFormatter konvertiert). <br><br>  Erst danach kehren die Daten zum Hauptstrom zur√ºck.  Die Implementierung einer solchen Logik in Swift ist sehr bequem und einfach.  Wir machen ViewModel Struktur.  Strukturen werden beim √úbertragen in einen neuen Stream kopiert. <br><br>  Ausgezeichnetes Konzept fertig, jetzt sprechen wir √ºber den Ausgabemechanismus selbst. <br><br>  Zuerst mussten Sie ausw√§hlen, auf was das Band implementiert werden soll - UITableView oder UICollectionView (es w√ºrde definitiv nicht gen√ºgend Zeit f√ºr Ihre Implementierung zur Verf√ºgung stehen).  Nat√ºrlich eignet sich UITableView zum Auflisten von Ausgaben, aber ich war sehr besorgt, ob es Probleme beim Vergr√∂√üern der Liste von oben nach unten und beim Vergr√∂√üern der Inhaltszelle geben w√ºrde.  Daher habe ich mich entschieden, von einfach zu komplex zu wechseln - d. H.  Wenn die UITableView keine Probleme hat, lassen wir es. <br><br>  Das erste, was ich beschlossen habe, war, mich f√ºr Pull-to-Refresh zu entscheiden.  Um dieses Muster zu implementieren, gibt es ein UIRefreshControl.  Vor ungef√§hr 5-6 Jahren habe ich meine Implementierung einmal mit dem UIActivityIndicator geschrieben und das contentInset der Tabelle ge√§ndert.  Also, bitte mach es jetzt nicht!  UIRefreshControl verf√ºgt √ºber eine praktische, kompakte Oberfl√§che und nimmt eine Wolke von Kr√ºcken auf, die Sie sicherlich herstellen m√ºssen.  Die Verwendung ist sehr einfach: <br><br><img src="https://habrastorage.org/webt/av/me/8q/avme8qosdlakgnqxqevuv1qgqks.png"><br><br>  Bei der Verwendung wird jedoch deutlich, woher die oben f√ºr den VK-Client gezeigten Probleme stammen.  Es scheint, dass sie in der Komponente selbst existieren.  Ich habe schnell versucht herauszufinden, was der Grund sein k√∂nnte und welche L√∂sungen es gibt. <br><br>  Internet-Tipps sagen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">so</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">so</a> ): <br><br><ul><li>  √úberpr√ºfen Sie beim Aufruf von endRefreshing, ob das Steuerelement jetzt aktualisiert wurde (isRefreshing). </li><li>  Verwenden Sie genau UITableViewController (da in diesem Fall die magische private Methode aufgerufen wird). </li></ul><br>  Ich habe dies und das versucht - ich hatte keine positive Wirkung.  Ich war ver√§rgert, beschloss aber, keine Zeit zu verschwenden und weiterzumachen.  √úbrigens, wenn jemand wei√ü, wie man dieses Problem l√∂st - schreiben Sie bitte in die Kommentare. <br><br>  Der n√§chste Schritt besteht darin, das Laden von Daten von unten zu implementieren. <br><br>  Zuerst wurde ich nicht sehr cool - beim Laden von unten gab es eine schreckliche Verz√∂gerung (ich habe anscheinend die contentSize von der Tabelle gesprungen): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hz/ug/4c/hzug4cff4v6g0bjdz_54p9pgv9c.gif"></div><br>  Und das ist die H√∂lle :-) Mit diesem Ergebnis k√∂nnen Sie definitiv nicht gewinnen.  Aber eine schnelle Suche gab mir einen tollen Hinweis, den ich vergessen hatte: <br><br><img width="500" src="https://habrastorage.org/webt/ft/yl/cf/ftylcf1dluksjxsuiyct-dmec64.png"><br><br>  Und voila: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/az/yc/08/azyc08p8gabi-vhoirpda7zpu_m.gif"></div><br>  Es bleibt zu entscheiden, wie die H√∂he der Zelle animiert werden soll. <br><br>  Die erste Idee, die mir in den Sinn kam, war, entlang sichtbarer Zellen zu laufen und die H√∂he im Animationsblock zu erh√∂hen.  Aber auch in der Phase der Analyse sollte diese Idee verworfen werden - das Problem ist, dass es notwendig sein wird, die in der UITableViewDataSource angegebene H√∂he zu synchronisieren und etwas mit contentSize zu tun (und dies wird von Apple dringend empfohlen). <br><br>  Der zweite Gedanke, der mir in den Sinn kam, stellte sich als richtig heraus: UITableView verf√ºgt √ºber Methoden zum Einf√ºgen / Neuladen / L√∂schen, die im Animationsblock ausgef√ºhrt werden k√∂nnen: <br><br><img width="500" src="https://habrastorage.org/webt/gu/y3/ed/guy3edhkr384b12dq0cxpthwtas.png"><br><br>  Vergessen Sie nicht, dass wir in heightForRowAt auch eine neue H√∂he hinzuf√ºgen m√ºssen: <br><br><img width="750" src="https://habrastorage.org/webt/no/io/sb/noiosbe6z7fdsxvf_eciai1c1fe.png"><br><br>  Alles scheint zu sein, aber nicht ganz!  In der Animation des Einsatzes des Beitrags gab es einen subtilen Punkt.  Suchen Sie nach dem Text im Intagram oder Facebook - er wird mit zunehmender H√∂he sofort reibungslos angezeigt.  Was zu tun ist?  Zeile f√ºr Zeile rendern?  Wenn Sie die Stufe von NSTextContainer erreichen, wird m√∂glicherweise eine √§hnliche Gelegenheit angezeigt.  Aber es schien mir, dass es (f√ºr eine solche Zeit) keine so schlechte Idee war, den gesamten Text auf einmal anzuzeigen.  Setzen Sie einfach clipToBounds auf superView, in dem sich UILabel befindet und unseren Text anzeigt.  Und der Ansatz hat funktioniert!  Oh, diese Animation hat mich sehr inspiriert und ein zweiter Wind √∂ffnete sich.  Schlie√ülich gibt es im nativen Client von VK keine solche Animation.  Also sollte sie Gewinnchancen hinzuf√ºgen :-) <br><br>  Die restlichen Details bei der Implementierung des Bandes sind nicht so interessant.  Aber Sie k√∂nnen sie in den Kommentaren fragen.  Und es ist nichts Falsches daran, den Code zu gestalten.  Hier ist es - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github.com/katleta3000/vkmobilechallenge</a> .  Es tut mir leid, dass ich nicht gek√§mmt bin und es an einigen Stellen magische Zahlen gibt (aber dies ist ein Geschwindigkeitswettbewerb, ich musste etwas opfern).  √úbrigens k√∂nnen Sie dort auf Commits springen (die Namen sind ziemlich klar). <br><br>  Das Ergebnis ist hier zu sehen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.youtube.com/watch?v=Md8YiJxSW1M&amp;feature=youtu.be</a> (die Qualit√§t ist nat√ºrlich stark verloren, aber besser als im GIF, um genau glattes Scrollen zu demonstrieren) <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Md8YiJxSW1M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Statistiken, Ergebnisse, Schlussfolgerungen </h2><br>  Die ganze Zeit arbeitete der Wettbewerb an einem Timer.  Es kamen 20 ¬Ω Stunden reine Codierungszeit heraus.  Die Nachverfolgungszeit hat in zweierlei Hinsicht geholfen: Wie Sie sich erinnern, gab es Sch√§tzungen in abstrakten Einheiten, sodass es Mitte des letzten Tages bereits gute Nachverfolgungsstatistiken gab und es m√∂glich war, die verbleibenden endg√ºltigen Aufgaben viel genauer zu planen.  Und zweitens konnte das Muster der ‚ÄûKonzentration in einer Sitzung‚Äú identifiziert und bewiesen werden.  Jede Dimension ist eine neue Iteration, daher stellte sich heraus, dass ich 68 Iterationen zum Schreiben von Code hatte.  Wenn Sie durchschnittlich sind, erhalten Sie 18,5 Minuten.  Tats√§chlich gab es am ersten Tag der Iteration durchschnittlich 25 Minuten und am Ende des zweiten Tages jeweils 7 Minuten :-) Sie werden verr√ºckt, werden sehr nerv√∂s, werden m√ºde und die Leistung sinkt.  Solche Daten werden beim n√§chsten Mal gut helfen. <br><br>  Pers√∂nlich habe ich das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stundenprogramm verwendet</a> (Sie k√∂nnen es herunterladen und ausprobieren) - es l√∂st einfach und l√∂st die notwendige Aufgabe (und entwickelt es sogar selbst): <br><br>  Von den netten Boni - f√ºr jedes geschlossene Puzzle wird ein sehr sch√∂ner beruhigender Bildschirm wie dieser angezeigt: <br><br><div style="text-align:center;"><img width="660" src="https://habrastorage.org/webt/zh/bq/uu/zhbquu6edvigh1u2-izdq8rsqci.png"></div><br>  Es ist lustig, dass mir nach Abschluss der Aufgabe ‚ÄûVK Mobile Challenge‚Äú der folgende Bildschirm angezeigt wurde: <br><br><div style="text-align:center;"><img width="440" src="https://habrastorage.org/webt/qg/_q/mi/qg_qmisekhb47zchj8oyyjxuq6w.png"></div><br>  Und ja!  Und so geschah es :-) Wir fahren mit den Ergebnissen fort. <br><br>  Lassen Sie uns nicht Peach f√ºr den Pl√ºsch ziehen.  Peach, der es nicht wusste, ist der Name der Katze - die Hauptfigur von VK.  Sehr cooler Geschenkartikel: <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/6h/ax/gm/6haxgma94hpifqzcp-6mxvs3eze.jpeg"></div><br>  Ich nahm den 4. Platz ein und bekam 175k Rubel.  (Ja, und Sie haben das Bild wahrscheinlich bereits auf Habra-kat gebrannt).  Und ja, ich bin auf jeden Fall zufrieden.  Ich habe mein Ziel erreicht :-) Und das ist zweifellos wahnsinnig angenehm. <br><br>  Am Ende m√∂chte ich mich bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vkontakte bedanken</a> - schlie√ülich war der Wettbewerb cool und gut organisiert.  Und ich empfehle allen Lesern, an Herausforderungen und Hackathons teilzunehmen - dies ist eine gro√üartige M√∂glichkeit, sich selbst herauszufordern und mit Top-Entwicklern auf der ganzen Welt (zumindest der russischsprachigen Community) zu konkurrieren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de432356/">https://habr.com/ru/post/de432356/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de432346/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 436 (20.11.2008 - 26.06.2008)</a></li>
<li><a href="../de432348/index.html">Meisterklasse: Vakuumformen von Kunststoffen aus Silikon</a></li>
<li><a href="../de432350/index.html">Warum haben React-Elemente eine Eigenschaft vom Typ $$?</a></li>
<li><a href="../de432352/index.html">SIEM-Tiefen: Out-of-Box-Korrelationen. Teil 3.1. Ereigniskategorisierung</a></li>
<li><a href="../de432354/index.html">Die wichtigsten Datenlecks im Jahr 2018. Erster Teil (Januar-Juni)</a></li>
<li><a href="../de432360/index.html">"Nachkomme" AlphaGo lernte selbst√§ndig Schach, Shogi und Go</a></li>
<li><a href="../de432362/index.html">Chang'e 4 - Mission auf der anderen Seite des Mondes beginnt heute</a></li>
<li><a href="../de432364/index.html">Phonetisches Alphabet: Wie eine L√∂sung f√ºr die Luftfahrt hilft, ein Login per Telefon zu √ºbertragen</a></li>
<li><a href="../de432366/index.html">Implementieren Sie das SSD-Caching im QSAN XCubeSAN-Speicher</a></li>
<li><a href="../de432368/index.html">Vor Ihnen - Reagieren Sie auf eine moderne Web-App</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>