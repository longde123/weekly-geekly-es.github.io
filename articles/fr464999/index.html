<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ô üí™üèΩ ‚ò£Ô∏è Comment les sp√©cificit√©s du travail avec les serveurs d'applications changent √† l'aide de l'exemple OpenLiberty üßï üéÆ üë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Le discours de Sebastian Dashner lors d'une rencontre Java au bureau d'IBM √† Moscou (a trouv√© un record d'une performance similaire)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment les sp√©cificit√©s du travail avec les serveurs d'applications changent √† l'aide de l'exemple OpenLiberty</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ibm/blog/464999/"><img src="https://habrastorage.org/webt/nj/e7/va/nje7vacjsvcyzzj52ul6jnobdak.png"><br><br>  Bonjour, Habr! <br><br>  Le discours de Sebastian Dashner lors d'une rencontre Java au bureau d'IBM √† Moscou (a trouv√© un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">record d'une</a> performance similaire) m'a incit√© √† commencer ma connaissance des serveurs d'applications l√©gers, en particulier, avec OpenLiberty.  Et puis j'ai pens√©: <br><br><ol><li>  Quels sont les avantages d'un serveur d'applications l√©ger? </li><li>  Comment la sp√©cificit√© du travail change-t-elle lors de leur utilisation? </li><li>  Pourquoi emballer un serveur d'applications dans un conteneur? </li></ol><br>  En r√©pondant √† ces questions, j'ai remarqu√© qu'il y avait peu d'informations publiques sur ce sujet, j'ai donc d√©cid√© de les collecter et de les syst√©matiser ici. <br><br>  Je poste les r√©sultats sous la coupe. <br><a name="habracut"></a><br><h3>  Quels sont les avantages d'un serveur d'applications l√©ger? </h3><br>  Auparavant, les serveurs d'applications Java EE d'entreprise (tels que JBoss AS, Oracle WebLogic, IBM WebSphere AS) √©taient consid√©r√©s comme une conception lourde et encombrante, en particulier en ce qui concerne les temps de d√©marrage et de d√©ploiement.  Mais la technologie cloud capture une part de plus en plus importante de l'industrie et les exigences des serveurs d'applications √©voluent. <br><br>  Et maintenant, au lieu de serveurs d'applications d'entreprise complets, viennent des serveurs d'applications rapides, modulaires et petits, concentr√©s sur une t√¢che sp√©cifique: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Thorntail</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Payara Micro</a> - les jeunes fr√®res WildFly et Payara;  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Meecrowave</a> est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">serveur</a> l√©ger JAX-RS + CDI + JSON, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">KumuluzEE</a> est un serveur qui vous permet d'√©tendre Java EE en utilisant Node.js, Go et autres. <br><br>  Cette liste comprend √©galement OpenLiberty - un serveur d'applications open source (distribu√© selon EPL-1.0) qui prend en charge les derni√®res normes Java EE / Microprofile, sur lesquelles WebSphere Liberty fonctionne. <br><br><div class="spoiler">  <b class="spoiler_title">Aper√ßu des fonctionnalit√©s d'EPL-1.0 (licence publique Eclipse version 1.0)</b> <div class="spoiler_text"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">EPL 1.0</a> est bas√© sur CPL et n'est pas compatible avec la GPL, vous permet de vous conformer aux autres licences et brevets qui sont utilis√©s dans le travail, et donne le droit de conc√©der sous licence le produit sous toute autre licence, une copie de la licence doit √™tre incluse dans toutes les copies du programme. <br><br>  Les ajouts au produit principal peuvent √™tre conc√©d√©s sous licence s√©par√©ment et m√™me sous licence commerciale.  Cependant, les modifications et les ajouts qui sont des ≈ìuvres d√©riv√©es doivent √™tre conc√©d√©s sous la m√™me licence EPL, ce qui vous oblige √† ouvrir le code source. <br><br>  Associer un projet logiciel √† un code prot√©g√© par la licence EPL (par exemple, utiliser ce code comme biblioth√®que), en g√©n√©ral, ne fait pas de ce projet un travail d√©riv√© et n'impose pas d'obligations correspondantes. <br><br>  Un membre qui inclut le programme dans un devis doit le faire afin d'√©viter toute responsabilit√© potentielle pour les autres membres.  (renonce express√©ment √† toute garantie ou responsabilit√© au nom de tous les auteurs) <br><br>  Par exemple: un participant peut inclure le programme dans un devis, produit X. Ce participant est alors un participant commercial.  Si ce marchand fait ensuite des r√©clamations sur la vitesse ou offre des garanties de produits pour X, ces r√©clamations et offres sont la responsabilit√© personnelle du marchand.  En vertu de cette section, le membre commercial doit prot√©ger les autres membres contre les r√©clamations relatives √† la performance et aux garanties, et si le tribunal exige que tout autre membre paie les dommages en r√©sultant, le membre commercial doit payer ces pertes. <br></div></div><br>  Voyons quels avantages nous pouvons obtenir en d√©ployant l'application dans un conteneur avec OpenLiberty.  (Vous devez avoir install√© n'importe quelle version de java, des √©tapes suppl√©mentaires doivent √™tre effectu√©es dans le r√©pertoire wlp) <br><br><h4>  Vitesse: </h4><br>  La vitesse est l'indicateur le plus important pour une application cloud, car pour qu'une application cloud puisse √©voluer rapidement, g√©rer et faire face √† la charge croissante, elle doit √™tre lanc√©e en quelques secondes.  Un serveur d'applications l√©ger peut le faire.  Pour v√©rifier, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©chargez le serveur OpenLiberty</a> et ex√©cutez bin / server run ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liste compl√®te des commandes</a> ): <br><br><pre><code class="bash hljs">$ bin/server run  defaultServer (Open Liberty 19.0.0.6/wlp-1.0.29.cl190620190617-1530)  Java HotSpot(TM) 64-Bit Server VM  1.8.0_212-b10 (ru_US) [AUDIT ] CWWKE0001I:  defaultServer . [AUDIT ] CWWKZ0058I:   dropins  . [AUDIT ] CWWKF0012I:     : [el-3.0, jsp-2.3, servlet-3.1]. [AUDIT ] CWWKF0011I:  defaultServer      .  defaultServer   1,709 .</code> </pre> <br><h4>  Modularit√© et flexibilit√© </h4><br>  La plupart des applications n'ont pas besoin de Java EE dans son ensemble, mais n√©cessitent un ensemble d√©di√© de normes, le plus souvent utilis√© dans les applications d'entreprise.  Gr√¢ce √† OSGI, nous pouvons choisir l'ensemble de normes Java EE et / ou MicroProfile dont nous avons besoin, en ignorant tout le reste. <br><br>  Par exemple, d√©clarez JAX-RS depuis Java EE et mpHealth depuis Microprofile en ajoutant quelques lignes au bloc featureManager usr / servers / <b>serverName</b> /server.xml <br><br><pre> <code class="json hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;server description=<span class="hljs-string"><span class="hljs-string">"new server"</span></span>&gt; &lt;!-- Enable features --&gt; &lt;featureManager&gt; &lt;feature&gt;jsp<span class="hljs-number"><span class="hljs-number">-2.3</span></span>&lt;/feature&gt; &lt;feature&gt;mpHealth<span class="hljs-number"><span class="hljs-number">-1.0</span></span>&lt;/feature&gt; &lt;feature&gt;jaxrs<span class="hljs-number"><span class="hljs-number">-2.1</span></span>&lt;/feature&gt; &lt;/featureManager&gt; &lt;!-- To access this server from a remote client add a host attribute to the following element, eg host=<span class="hljs-string"><span class="hljs-string">"*"</span></span> --&gt; &lt;httpEndpoint id=<span class="hljs-string"><span class="hljs-string">"defaultHttpEndpoint"</span></span> httpPort=<span class="hljs-string"><span class="hljs-string">"9080"</span></span> httpsPort=<span class="hljs-string"><span class="hljs-string">"9443"</span></span> /&gt; &lt;!-- Automatically expand WAR files and EAR files --&gt; &lt;applicationManager autoExpand=<span class="hljs-string"><span class="hljs-string">"true"</span></span>/&gt; &lt;/server&gt;</code> </pre><br><h4>  Mise √† jour dynamique </h4><br>  Pendant le d√©veloppement, le code du programme et la configuration changent constamment. <br>  Le serveur d'applications est configur√© pour surveiller les modifications et, si n√©cessaire, reconfigure et d√©ploie l'application √† la vol√©e.  Par exemple, une r√©action aux changements r√©cents: <br><br><pre> <code class="bash hljs">[AUDIT ] CWWKG0016I:    . [AUDIT ] CWWKG0017I:      0,475 . [AUDIT ] CWWKF0012I:     : [cdi-2.0, jaxrs-2.1, jaxrsClient-2.1, jndi-1.0, json-1.0, jsonp-1.1, mpHealth-1.0, servlet-4.0]. [AUDIT ] CWWKF0013I:     : [servlet-3.1]. [AUDIT ] CWWKF0008I:     0,476 .</code> </pre> <br><h4>  Taille et assemblage de l'image </h4><br>  La taille des serveurs d'applications a consid√©rablement diminu√© et vous permet d√©sormais de d√©ployer <br>  chaque application sur un serveur d'applications distinct pour les emballer dans des conteneurs, ce qui donne la plus grande flexibilit√©.  De plus, puisque  l'image est constitu√©e de couches, lors du r√©assemblage et de la distribution d'artefacts, seule la couche d'application est copi√©e, le syst√®me d'exploitation, le runtime et le serveur d'applications sont mis en cache. <br><br>  Dockerhub a des images pr√©d√©finies contenant un serveur OpenLiberty pr√©configur√©.  Nous allons utiliser l'un d'eux et cr√©er un Dockerfile: <br><br><pre> <code class="json hljs">FROM open-liberty COPY usr/servers/defaultServer /opt/ol/wlp/usr/servers/defaultServer ENTRYPOINT [<span class="hljs-string"><span class="hljs-string">"/opt/ol/wlp/bin/server"</span></span>, <span class="hljs-string"><span class="hljs-string">"run"</span></span>] CMD [<span class="hljs-string"><span class="hljs-string">"defaultServer"</span></span>]</code> </pre><br>  Assemblons l'image: <br><br><pre> <code class="bash hljs">docker build -t app .</code> </pre> <br>  Ex√©cutez-le comme un conteneur: <br><br><pre> <code class="bash hljs">docker run -d --name app -p 9080:9080 app</code> </pre> <br>  V√©rifiez le r√©sultat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http: // localhost: 9080 / health /</a> <br><br><img src="https://habrastorage.org/webt/ra/jc/py/rajcpyeatsc8yna1bfoxgaez2e8.png"><br><br>  Pour arr√™ter le conteneur: <br><br><pre> <code class="bash hljs">docker stop app</code> </pre> <br>  Il existe de nombreux autres sc√©narios d'utilisation du conteneur, et en g√©n√©ral, c'est une occasion pour des articles individuels, alors revenons aux questions. <br><br><h3>  Comment √©volue la sp√©cificit√© du travail? </h3><br><h4>  Paquet de paquet </h4><br>  L'image du conteneur ne doit √™tre collect√©e qu'une seule fois, puis ex√©cut√©e dans tous les environnements.  Par cons√©quent, il est recommand√© de collecter chaque application avec le serveur d'applications.  Cela simplifie le cycle de vie et le d√©ploiement des applications et s'int√®gre parfaitement dans le monde moderne de la technologie des conteneurs. <br><br><h4>  Assemblage </h4><br>  D√©sormais, il n'est plus n√©cessaire de regrouper diff√©rents blocs techniques dans des archives distinctes.  Toute la logique m√©tier, ainsi que les services Web et les fonctionnalit√©s de bout en bout, sont regroup√©s dans un seul fichier de guerre.  Cela simplifie consid√©rablement l'installation du projet, ainsi que la proc√©dure d'assemblage.  Vous n'avez plus besoin de regrouper l'application dans plusieurs niveaux de hi√©rarchie, puis de la d√©compresser √† nouveau dans une instance de serveur. <br><br><h4>  Lancement </h4><br>  Le serveur d'applications et l'application elle-m√™me sont ajout√©s √† l'image pendant le processus de g√©n√©ration.  La configuration potentielle des sources de donn√©es, des lecteurs ou des modules de serveur est √©galement sp√©cifi√©e pendant le processus de construction en ajoutant des fichiers de configuration sp√©cialis√©s.  Toutes les diff√©rences de configuration doivent √™tre g√©r√©es non pas de l'int√©rieur de l'application, mais de l'ext√©rieur.  Par cons√©quent, l'application ne doit pas √™tre d√©ploy√©e dans un conteneur d√©j√† en cours d'ex√©cution, mais doit y √™tre ajout√©e au stade de l'assemblage d'images dans le r√©pertoire de d√©ploiement automatique afin de la lancer au d√©marrage du conteneur. <br><br><h4>  Extension de fonctionnalit√© </h4><br>  Les conteneurs, les syst√®mes de d√©ploiement et de mise √† l'√©chelle, les services de surveillance et les grilles de services nous ont permis de configurer la d√©tection, la surveillance, la gestion, l'authentification, la mise √† l'√©chelle, le tra√ßage, la stabilit√© au-dessus de l'application, transf√©rant de mani√®re transparente une grande quantit√© de logique √† un autre niveau, facilitant l'application et simplifiant son d√©veloppement. <br><br><h3>  Pourquoi emballer un serveur d'applications dans un conteneur? </h3><br>  Tout d'abord, en emballant un serveur d'applications dans un conteneur, vous donnez √† chaque √©quipe la possibilit√© de configurer ind√©pendamment son serveur d'applications et de se concentrer sur la mise en ≈ìuvre des fonctions, ce qui fait gagner du temps aux d√©veloppeurs sur les op√©rations manuelles, les middlewares et diverses approbations. <br><br>  En prime, vous avez la possibilit√© de profiter pleinement des avantages des conteneurs et de tous les outils construits autour d'eux.  L'application est facile √† g√©rer et √† mettre √† l'√©chelle, √† mettre √† jour et √† automatiser l'assemblage et le d√©ploiement des artefacts avec aucun temps d'arr√™t. <br><br><div class="spoiler">  <b class="spoiler_title">Vous trouverez plus de pratique ici.</b> <div class="spoiler_text">  En plus de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> , le site Web du projet propose un grand nombre de didacticiels: comment cr√©er des applications Web avec maven / gradle, empaqueter et d√©ployer des applications, d√©ployer et configurer des microservices dans kubernetes, g√©rer le trafic avec istio et d√©ployer sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBM Cloud √†</a> partir d'autres fournisseurs de cloud populaires et bien plus. <br><br>  Sebastian Dashner (passionn√© de Java &amp; OSS, Java Champion, IBMer, membre JCP, committer Jakarta EE) publie des articles utiles sur la fa√ßon d'utiliser OpenLiberty, tels que la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">surveillance d'Open Liberty avec Prometheus et Grafana</a> , dans son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">blog</a> et son livre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Architecting Modern Java EE Applications a √©t√©</a> utilis√© dans la pr√©paration de cet article. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liberty-maven-plugin</a> (alternative √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gradle</a> ) peut grandement simplifier votre travail.  Soit dit en passant, les manuels contiennent de bons exemples de son utilisation. <br><br>  Vous pouvez √©galement contribuer au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet</a> . <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464999/">https://habr.com/ru/post/fr464999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464989/index.html">Contexte de l'extravagance</a></li>
<li><a href="../fr464991/index.html">Des projets qui n'ont pas d√©coll√©</a></li>
<li><a href="../fr464993/index.html">Construire un package RPM pour Rosa Linux en pratique</a></li>
<li><a href="../fr464995/index.html">Envelopper des s√©quences dans Swift</a></li>
<li><a href="../fr464997/index.html">√Ä propos du d√©veloppement des technologies VR: o√π les utilisent-elles, pourquoi les entreprises VR et quels appareils utilisent</a></li>
<li><a href="../fr465001/index.html">Amazon Prime Day 2019 - Propuls√© par AWS</a></li>
<li><a href="../fr465003/index.html">Int√©r√™ts pour le genre ARPG</a></li>
<li><a href="../fr465007/index.html">V√©rification typographique de Django et DRF</a></li>
<li><a href="../fr465009/index.html">Vue int√©rieure: RFID dans le monde moderne. Partie 1: RFID √† la maison</a></li>
<li><a href="../fr465011/index.html">Notations bancaires. La participation ne peut pas √™tre fix√©e</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>