<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯТВ ЁЯЪУ ЁЯСйЁЯП╛тАНЁЯМ╛ рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред рднрд╛рдЧ 3: рд╕рдорд╛рдкреНрдд рдкреНрд░рддрд┐рдкрд╛рджрди, рдЦреЗрд▓ рдмрдирд╛ ЁЯИ╖я╕П ЁЯЩЕЁЯП╜ ЁЯТХ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдирдорд╕реНрддреЗ, рдпрд╣ рдореЗрд░реЗ рдкреНрд░рдХрд╛рд╢рдиреЛрдВ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рддреАрд╕рд░рд╛ рднрд╛рдЧ рд╣реИ, рдЬреЛ рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХреЗ рд░рд┐рд╡рд░реНрд╕ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рд╣реИ - рд╡рд┐рд▓рд┐рдпрдо рдЧрд┐рдмреНрд╕рди рджреНрд╡рд╛рд░рд╛ рдЗрд╕реА рдирд╛рдо рдХреЗ рдЙрдкрдиреНрдпрд╛рд╕ рдХрд╛ рдП...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред рднрд╛рдЧ 3: рд╕рдорд╛рдкреНрдд рдкреНрд░рддрд┐рдкрд╛рджрди, рдЦреЗрд▓ рдмрдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415555/"><img src="https://habrastorage.org/webt/wn/4k/jm/wn4kjm-p2fyta0emos5ufhkop_0.png"><br><p>  рдирдорд╕реНрддреЗ, рдпрд╣ рдореЗрд░реЗ рдкреНрд░рдХрд╛рд╢рдиреЛрдВ рдХреА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рддреАрд╕рд░рд╛ рднрд╛рдЧ рд╣реИ, рдЬреЛ рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХреЗ рд░рд┐рд╡рд░реНрд╕ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рд╣реИ - рд╡рд┐рд▓рд┐рдпрдо рдЧрд┐рдмреНрд╕рди рджреНрд╡рд╛рд░рд╛ рдЗрд╕реА рдирд╛рдо рдХреЗ рдЙрдкрдиреНрдпрд╛рд╕ рдХрд╛ рдПрдХ рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдЕрд╡рддрд╛рд░ред </p><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 1: рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 2: рд░реЗрдВрдбрд░ рдлрд╝реЙрдиреНрдЯ</a> </blockquote><p>  рдпрд╣ рд╣рд┐рд╕реНрд╕рд╛ рдХреБрдЫ рдЕрд╡реНрдпрд╡рд╕реНрдерд┐рдд рд▓рдЧ рд╕рдХрддрд╛ рд╣реИред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣рд╛рдВ рдЬреЛ рдХреБрдЫ рднреА рд╡рд░реНрдгрд┐рдд рд╣реИ, рдЙрдирдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓реЗ рдПрдХ</a> рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдордп рддреИрдпрд╛рд░ рдерд╛ред  рдЬрдм рд╕реЗ рджреЛ рдорд╣реАрдиреЗ рдкрд╣рд▓реЗ рд╣реА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЪреБрдХреЗ рд╣реИрдВ, рдФрд░, рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдореБрдЭреЗ рдХрд╛рдо рдиреЛрдЯ рд░рдЦрдиреЗ рдХреА рдЖрджрдд рдирд╣реАрдВ рд╣реИ, рдореИрдВ рдмрд╕ рдХреБрдЫ рд╡рд┐рд╡рд░рдг рднреВрд▓ рдЧрдпрд╛ рд╣реВрдВред  рд▓реЗрдХрд┐рди рдЬреИрд╕рд╛ рд╣реИ, рдЪрд▓рд┐рдПред </p><a name="habracut"></a><br><hr><br><p> <em>[рдЬрдм рдореИрдВрдиреЗ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдкреНрд░рд┐рдВрдЯ рдХрд░рдирд╛ рд╕реАрдЦ рд▓рд┐рдпрд╛, рддреЛ рд╕рдВрд╡рд╛рдж рдмреЙрдХреНрд╕ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЛ рдЙрд▓рдЯ рджреЗрдирд╛ рдЬрд╛рд░реА рд░рдЦрдирд╛ рддрд░реНрдХрд╕рдВрдЧрдд рд╣реЛрдЧрд╛ред</em>  <em>рд▓реЗрдХрд┐рди, рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдореБрдЭреЗ рднрд╛рдЧрдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдореИрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкреНрд░рддрд┐рдкрд╛рджрди рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдореЗрдВ рдЪрд▓рд╛ рдЧрдпрд╛ред]</em> рдПрдХ рдмрд╛рд░ рдлрд┐рд░, <code>main</code> рд╕рд╛рде рдЪрд▓рддреЗ рд╣реБрдП, рдореИрдВ рдЙрд╕ рдХреЙрд▓ рдХреЛ рд╕реНрдерд╛рдиреАрдпрдХреГрдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдерд╛ рдЬреЛ рдкрд╣рд▓реЗ рд╕реНрдХреНрд░реАрди рдкрд░ рдХреБрдЫ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ: <code>seg000:0159: call sub_1D0B2</code> ред  "рдХреБрдЫ рднреА", рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореБрдЦреНрдп рдореЗрдиреВ рдХрд╛ рдХрд░реНрд╕рд░ рдФрд░ рдкреГрд╖реНрдарднреВрдорд┐ рдЫрд╡рд┐ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/9l/9h/yq/9l9hyqeu9n7m8vyt8iizlz5wnze.png"><br></p><br><p>  рдпрд╣ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╣реИ рдХрд┐ <code>sub_1D0B2</code> рдлрд╝рдВрдХреНрд╢рди <em>[рдЗрд╕рдХреЗ рдмрд╛рдж - <code>render</code> ]</em> рдХрд╛ рдХреЛрдИ рддрд░реНрдХ рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕рдХреА рдкрд╣рд▓реА рдХреЙрд▓ рджреЛ, рдХреЛрдб рдХреЗ рд▓рдЧрднрдЧ рд╕рдорд╛рди рд╡рд░реНрдЧреЛрдВ рд╕реЗ рдкрд╣рд▓реЗ рдХреА рд╣реИ: </p><br><pre> <code class="hljs perl">loc_100E5: loc_10123: mov ax, <span class="hljs-number"><span class="hljs-number">2</span></span> mov ax, <span class="hljs-number"><span class="hljs-number">2</span></span> mov dx, seg seg009 mov dx, seg seg01<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> dx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> dx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax mov ax, <span class="hljs-number"><span class="hljs-number">506</span></span>Ah mov ax, <span class="hljs-number"><span class="hljs-number">5076</span></span>h ; <span class="hljs-string"><span class="hljs-string">"cursors.imh"</span></span>, <span class="hljs-string"><span class="hljs-string">"title.imh"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax call load_imh call load_imh ; load_imh(res, offt, seg) add sp, <span class="hljs-number"><span class="hljs-number">6</span></span> add sp, <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ah</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_123F8</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_123F8</span></span></span><span class="hljs-function"> </span></span>; sub_123F8(<span class="hljs-number"><span class="hljs-number">0</span></span>), sub_123F8(<span class="hljs-number"><span class="hljs-number">10</span></span>) add sp, <span class="hljs-number"><span class="hljs-number">2</span></span> add sp, <span class="hljs-number"><span class="hljs-number">2</span></span> cmp word_5AA92, <span class="hljs-number"><span class="hljs-number">0</span></span> mov ax, <span class="hljs-number"><span class="hljs-number">1</span></span> jz short loc_10123 <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg010</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg009</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 64</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ah</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">A0h</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_1CF5B</span></span></span><span class="hljs-function"> </span></span>; sub_1CF5B(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, seg01<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sp</span></span></span><span class="hljs-function">, 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ch</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_1CF5B</span></span></span><span class="hljs-function"> </span></span>; sub_1CF5B(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">160</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, seg009, <span class="hljs-number"><span class="hljs-number">0</span></span>) add sp, 0Ch</code> </pre> <br><p>  <code>render</code> рдХреЙрд▓ <code>render</code> рд╕реЗ рдкрд╣рд▓реЗ, рдХрд░реНрд╕рд░ (рдХрд░реНрд╕рд░) ( <code>cursors.imh</code> ) рдФрд░ рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб ( <code>title.imh</code> ) рдХреЛ рдореЗрдореЛрд░реА рдореЗрдВ рдЕрдирдкреИрдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ ( <code>load_imh</code> рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╣рд▓реЗ рднрд╛рдЧ</a> рд╕реЗ рдмрджрд▓рд╛ рдЧрдпрд╛ <code>sub_126CB</code> рд╣реИ), рдХреНрд░рдорд╢рдГ рдиреМрд╡реЗрдВ рдФрд░ рджрд╕рд╡реЗрдВ рдЦрдВрдбреЛрдВ рдореЗрдВред  рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдПрдХ рд╕рддрд╣реА рдЕрдзреНрдпрдпрди <code>sub_123F8</code> рдиреЗ рдореБрдЭреЗ рдХреЛрдИ рдирдИ рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рджреА, рд▓реЗрдХрд┐рди, рдХреЗрд╡рд▓ <code>sub_1CF5B</code> рдХреЗ рддрд░реНрдХреЛрдВ рдХреЛ <code>sub_1CF5B</code> , рдореИрдВрдиреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рд╖реНрдХрд░реНрд╖ рджрд┐рдП: </p><br><ul><li>  рддрд░реНрдХреЛрдВ 4 рдФрд░ 5 рдХреЛ рдПрдХ рд╕рд╛рде рд▓рд┐рдпрд╛ рдЧрдпрд╛, рд╡рд┐рдШрдЯрд┐рдд рд╕реНрдкреНрд░рд╛рдЗрдЯ ( <code>segment:offset</code> ) рдХреЗ рдкрддреЗ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВ; </li><li>  рддрд░реНрдХ 2 рдФрд░ 3 рд╕рдВрднрд╡рддрдГ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдпреЗ рдирдВрдмрд░ рдХреЙрд▓ <code>render</code> рдмрд╛рдж рдкреНрд░рджрд░реНрд╢рд┐рдд рдЫрд╡рд┐ рдХреЗ рд╕рд╛рде рд╕рд╣рд╕рдВрдмрдВрдзрд┐рдд <code>render</code> ; </li><li>  рдЕрдВрддрд┐рдо рддрд░реНрдХ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреА рдкреГрд╖реНрдарднреВрдорд┐ рдХреА рдЕрд╕реНрдкрд╖реНрдЯрддрд╛ рдХрд╛ рдЭрдВрдбрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдирдкреИрдХ рдХрд┐рдП рдЧрдП рд╕реНрдкреНрд░рд╛рдЗрдЯ рдореЗрдВ рдПрдХ рдХрд╛рд▓реА рдкреГрд╖реНрдарднреВрдорд┐ рд╣реЛрддреА рд╣реИ, рдФрд░ рд╣рдо рдЗрд╕рдХреЗ рдмрд┐рдирд╛ рд╕реНрдХреНрд░реАрди рдкрд░ рдХрд░реНрд╕рд░ рджреЗрдЦрддреЗ рд╣реИрдВред </li></ul><br><p>  рдкрд╣рд▓реЗ рддрд░реНрдХ рдХреЗ рд╕рд╛рде <em>[рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рдореЗрдВ рдкреНрд░рддрд┐рдкрд╛рджрди рдХреЗ рд╕рд╛рде рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ]</em> рд╕рдм рдХреБрдЫ рд╕рдм <code>sub_1CF5B</code> рдХреЛ рдЯреНрд░реЗрд╕ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдбреЗрдЯрд╛ рдЦрдВрдб рдореЗрдВ, рдкрддрд╛ <code>0x3BD4</code> рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдирд┐рдореНрди рдкреНрд░рдХрд╛рд░ рдХреА 11 рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдПрдХ рд╕рд░рдгреА рд╕реНрдерд┐рдд рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sprite_layer_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> flags; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> update; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> left; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> top; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dleft; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dtop; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> sprite_segment; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> sprite_pixels; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> _sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> _sprite_segment; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> _sprite_pixels; } <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>;</code> </pre> <br><p>  рдореИрдВ рдЗрд╕ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдЪреЗрди рдХрд╣рддрд╛ рд╣реВрдВред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, <code>sub_1CF5B</code> рдлрд╝рдВрдХреНрд╢рди (рдЗрд╕рдХреЗ рдмрд╛рдж <code>add_sprite_to_chain</code> ) рдЪрдпрдирд┐рдд рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  16-рдмрд┐рдЯ рдорд╢реАрди рдкрд░, рдЗрд╕рдореЗрдВ рд▓рдЧрднрдЧ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╣реЛрдВрдЧреЗ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> g_sprite_chain[<span class="hljs-number"><span class="hljs-number">11</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_sprite_to_chain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offset, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> segment, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> opaque)</span></span></span></span>;</code> </pre> <br><p>  рдпрд╣ рдЗрд╕ рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: </p><br><ul><li>  рдкрд╣рд▓рд╛ рддрд░реНрдХ <code>g_sprite_chain</code> рд╕рд░рдгреА рдореЗрдВ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рд╣реИ; </li><li>  <code>left</code> рдФрд░ <code>top</code> рддрд░реНрдХ <code>g_sprite_chain[index].left</code> рдФрд░ <code>g_sprite_chain[index].top</code> рдХреЛ рд▓рд┐рдЦреЗ рдЬрд╛рддреЗ рд╣реИрдВ; </li><li>  рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╣реЗрдбрд░ ( <code>segment:offset</code> рдкрд░ рд╕реНрдерд┐рдд рдкрд╣рд▓реЗ 8 рдмрд╛рдЗрдЯреНрд╕ <code>segment:offset</code> ) рдХреЛ <code>g_sprite_chain[index].sprite_hdr</code> рдЯрд╛рдЗрдк рдХрд┐рдпрд╛ <code>imh_hdr_t</code> , <code>imh_hdr_t</code> (рдкрд╣рд▓реЗ рднрд╛рдЧ рд╕реЗ рдмрджрд▓рд╛ рдЧрдпрд╛ <code>rle_hdr_t</code> ): </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">imh_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> unknown; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> height; } <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>;</code> </pre> <br><ul><li>  рдлрд╝реАрд▓реНрдб <code>g_sprite_chain[index].sprite_segment</code> <code>segment</code> рдХрд╛ рдорд╛рди рд░рд┐рдХреЙрд░реНрдб рдХрд░рддрд╛ рд╣реИ; </li><li>  <code>g_sprite_chain[index].sprite_pixels</code> , <code>offset + 8</code> рдмрд░рд╛рдмрд░ рдПрдХ рдорд╛рди рд▓рд┐рдЦрд╛ <code>offset + 8</code> рд╣реИ, рдЗрд╕рд▓рд┐рдП <code>sprite_segment:sprite_pixels</code> рдмрд┐рдЯрдореИрдк рдХрд╛ рдкрддрд╛ рд╣реИ; </li><li>  <code>sprite_hdr</code> , <code>sprite_segment</code> , рдФрд░ <code>sprite_pixels</code> рдХреНрд░рдорд╢рдГ <code>_sprite_hdr</code> , <code>_sprite_segment</code> , рдФрд░ <code>_sprite_pixels</code> рдЧрдП рд╣реИрдВ <em>[рдХреНрдпреЛрдВ?</em>  <em>- рдореБрдЭреЗ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдпрд╣ рдЦреЗрддреЛрдВ рдХреЗ рдРрд╕реЗ рджреЛрд╣рд░рд╛рд╡ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рдорд╛рдорд▓рд╛ рдирд╣реАрдВ рд╣реИ]</em> ; </li><li>  рдлрд╝реАрд▓реНрдб рдореЗрдВ <code>g_sprite_chain[index].flags</code> <code>1 + (opaque &lt;&lt; 4)</code> рдмрд░рд╛рдмрд░ рдорд╛рди рд▓рд┐рдЦрд╛ <code>1 + (opaque &lt;&lt; 4)</code> рд╣реИ <code>1 + (opaque &lt;&lt; 4)</code> ред  рдЗрд╕ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ <code>flags</code> рдореВрд▓реНрдп рдХрд╛ рдкрд╣рд▓рд╛ рдмрд┐рдЯ "рд╡рд░реНрддрдорд╛рди" рдкрд░рдд рдХреА "рдЧрддрд┐рд╡рд┐рдзрд┐" рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдкрд╛рдВрдЪрд╡реЗрдВ рдмрд┐рдЯ рдЗрд╕рдХреА рдкреГрд╖реНрдарднреВрдорд┐ рдХреА <strong>рдЕрд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЛ</strong> рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред  <em>[рдкрд╛рд░рджрд░реНрд╢реА рдЪрд┐рддреНрд░ рдкрд░ рдЗрд╕рдХреЗ рдкреНрд░рднрд╛рд╡ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдзреНрд╡рдЬ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореЗрд░рд╛ рд╕рдВрджреЗрд╣ рджреВрд░ рд╣реЛ рдЧрдпрд╛ред</em>  <em>рдкрд╛рдВрдЪрд╡реАрдВ рдмрд┐рдЯ рдХреЗ рд░рдирдЯрд╛рдЗрдо рдХреЗ рдореВрд▓реНрдп рдХреЛ рдмрджрд▓рддреЗ рд╣реБрдП, рд╣рдо рдЗрди рдХрд▓рд╛рдХреГрддрд┐рдпреЛрдВ рдХрд╛ рдЕрд╡рд▓реЛрдХрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ]:</em> <br><img src="https://habrastorage.org/webt/9z/i8/ui/9zi8uizaa3s9fwsqke4rwa_3jqa.png"><br></li></ul><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ, <code>render</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдХреЛрдИ рддрд░реНрдХ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рдпрд╣ рд╕реАрдзреЗ <code>g_sprite_chain</code> рд╕рд░рдгреА рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдмрд╛рд░реА-рдмрд╛рд░реА рд╕реЗ "рд▓реЗрдпрд░реНрд╕" рдХреЛ <em>VGA</em> рдореЗрдореЛрд░реА рдореЗрдВ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд░рддрд╛ рд╣реИ, рдЖрдЦрд┐рд░реА ( <code>g_sprite_chain[10]</code> - рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб) ( <code>g_sprite_chain[0]</code> - рдЕрдЧреНрд░рднреВрдорд┐)ред  <code>sprite_layer_t</code> рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рдм рдХреБрдЫ рд╣реИ рдФрд░ рдЗрд╕рд╕реЗ рднреА рдЕрдзрд┐рдХред  рдореИрдВ <code>dleft</code> рдлрд╝реАрд▓реНрдб <code>update</code> , <code>dleft</code> рдФрд░ <code>dtop</code> рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣рд╛ рд╣реВрдБред </p><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, <code>render</code> рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рддреНрдпреЗрдХ рдлреНрд░реЗрдо рдореЗрдВ <strong>рд╕рднреА</strong> рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЛ рдлрд┐рд░ рд╕реЗ <strong>рдирд╣реАрдВ</strong> рдмрдирд╛рддрд╛ рд╣реИред  <code>g_sprite_chain.update</code> рдлрд╝реАрд▓реНрдб рдХрд╛ рдПрдХ рдЧреИрд░-рд╢реВрдиреНрдп рдорд╛рди рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╡рд░реНрддрдорд╛рди рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЛ рдлрд┐рд░ рд╕реЗ <code>g_sprite_chain.update</code> рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдо рдХрд░реНрд╕рд░ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ ( <code>g_sprite_chain[0]</code> ), рддреЛ рдорд╛рдЙрд╕ рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рдРрд╕рд╛ рдХреБрдЫ рд╣реЛрдЧрд╛: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mouse_move_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...)</span></span></span><span class="hljs-function"> </span></span>{ ... g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].update = <span class="hljs-number"><span class="hljs-number">1</span></span>; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dleft = mouse_x - g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].left; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dtop = mouse_y - g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].top; }</code> </pre> <br><p>  рдЬрдм рдирд┐рдпрдВрддреНрд░рдг <code>render</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдмрд╛рдж рд╡рд╛рд▓рд╛, <code>g_sprite_chain[0]</code> рд▓реЗрдпрд░ рдкрд░ рдкрд╣реБрдВрдЪ рдЬрд╛рддрд╛ рд╣реИ, рджреЗрдЦрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рддрдм: </p><br><ul><li>  рд╕рднреА рдкрд┐рдЫрд▓реА рдкрд░рддреЛрдВ рдХреЗ рд╕рд╛рде рдЕрджреНрдпрддрди рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХрд░реНрд╕рд░ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЗ рдХрдмреНрдЬреЗ рд╡рд╛рд▓реЗ рдХреНрд╖реЗрддреНрд░ рдХреЗ рдЪреМрд░рд╛рд╣реЗ рдХреА рдЧрдгрдирд╛ рдФрд░ рдЦреАрдВрдЪрд╛ рдЬрд╛рдПрдЧрд╛; </li><li>  рд╕реНрдкреНрд░рд╛рдЗрдЯ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ: </li></ul><br><pre> <code class="hljs powershell">g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].update = <span class="hljs-number"><span class="hljs-number">0</span></span>; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].left += g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dleft g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dleft = <span class="hljs-number"><span class="hljs-number">0</span></span>; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].top += g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dtop g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dtop = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><ul><li>  рд╕реНрдкреНрд░рд╛рдЗрдЯ рдЕрджреНрдпрддрди рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдкрд░ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </li></ul><br><p>  рдпрд╣ <code>render</code> рдлрд╝рдВрдХреНрд╢рди рджреНрд╡рд╛рд░рд╛ рдХрд┐рдП рдЧрдП рд╕рдВрдЪрд╛рд▓рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред </p><br><hr><br><p>  рдЗрд╕ рддрд░реНрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рдерд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореИрдВрдиреЗ рдЗрд╕реЗ рдХрд╛рдлреА рд╕рд░рд▓ рдмрдирд╛ рджрд┐рдпрд╛ред  рдЖрдзреБрдирд┐рдХ рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдХреА рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рд╢рдХреНрддрд┐ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдлреНрд░реЗрдо рдореЗрдВ рд╕рднреА 11 рдЪреЗрди рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдЦрд░реНрдЪ рдЙрдард╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ <code>g_sprite_chain.update</code> , <code>.dleft</code> , <code>.dtop</code> рдФрд░ рдЙрдирд╕реЗ рдЬреБрдбрд╝реЗ рд╕рднреА рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ <code>.dtop</code> ред  рдПрдХ рдФрд░ рд╕рд░рд▓реАрдХрд░рдг рдЕрдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдзреНрд╡рдЬ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЪрд┐рдВрддрд╛ рдХрд░рддрд╛ рд╣реИред  рдореВрд▓ рдХреЛрдб рдореЗрдВ, рд╕реНрдкреНрд░рд╛рдЗрдЯ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкрд╛рд░рджрд░реНрд╢реА рдкрд┐рдХреНрд╕реЗрд▓ рдХреЗ рд▓рд┐рдП, рдирд┐рдЪрд▓реА рдкрд░рддреЛрдВ рдореЗрдВ рдкрд╣рд▓реЗ рдЕрдкрд╛рд░рджрд░реНрд╢реА рдкрд┐рдХреНрд╕реЗрд▓ рд╡рд╛рд▓реЗ рдЪреМрд░рд╛рд╣реЗ рдХреА рдЦреЛрдЬ рдХреА рдЬрд╛рддреА рд╣реИред  рд▓реЗрдХрд┐рди рдореИрдВ 32-рдмрд┐рдЯ рд╡реАрдбрд┐рдпреЛ рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдореИрдВ <em>рдЖрд░рдЬреАрдмреАрдП</em> рдпреЛрдЬрдирд╛ рдореЗрдВ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдмрд╛рдЗрдЯ рдХреЗ рдореВрд▓реНрдп рдХреЛ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реВрдВред  рдирддреАрдЬрддрди, рдореБрдЭреЗ рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ (рдПрдХ) рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдЬреЛрдбрд╝рдиреЗ (рд╣рдЯрд╛рдиреЗ) рдХреЗ рдРрд╕реЗ рдХрд╛рд░реНрдп рдорд┐рд▓реЗ: </p><br><div class="spoiler">  <b class="spoiler_title">рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sprite_layer_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> flags; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> left; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> top; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *sprite_pixels; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> _sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *_sprite_pixels; } <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> g_sprite_chain[<span class="hljs-number"><span class="hljs-number">11</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_sprite_to_chain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *sprite, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> opaque)</span></span></span><span class="hljs-function"> </span></span>{ assert(n &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> *layer = &amp;g_sprite_chain[n]; <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(layer, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>)); layer-&gt;left = left; layer-&gt;top = top; memmove(&amp;layer-&gt;sprite_hdr, sprite, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>)); layer-&gt;sprite_pixels = sprite + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>); memmove(&amp;layer-&gt;_sprite_hdr, &amp;layer-&gt;sprite_hdr, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>) + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>*)); layer-&gt;flags = ((opaque &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">16</span></span>) | <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_sprite_from_chain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ assert(n &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> *layer = &amp;g_sprite_chain[n]; <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(layer, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>)); }</code> </pre> </div></div><br><p>  рдПрдХ рдкрд░рдд рдХреЛ <em>рд╡реАрдЬреАрдП</em> рдмрдлрд░ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_to_vga</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *pixels, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bg_transparency)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_sprite_to_vga</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">sprite_layer_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *sprite)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> top = sprite-&gt;top; <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> left = sprite-&gt;left; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> w = sprite-&gt;sprite_hdr.width * <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> h = sprite-&gt;sprite_hdr.height; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bg_transparency = ((sprite-&gt;flags &gt;&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *pixels = sprite-&gt;sprite_pixels; draw_to_vga(left, top, w, h, pixels, bg_transparency); }</code> </pre> <br><p>  <code>draw_to_vga</code> рдлрд╝рдВрдХреНрд╢рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреВрд╕рд░реЗ рднрд╛рдЧ</a> рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдЙрд╕реА рдирд╛рдо рдХрд╛ рдХрд╛рд░реНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рддрд░реНрдХ рдХреЗ рд╕рд╛рде рдЫрд╡рд┐ рдкреГрд╖реНрдарднреВрдорд┐ рдХреА рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдХрд╛ рд╕рдВрдХреЗрдд рд╣реИред  <code>render</code> рдлрдВрдХреНрд╢рди рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ <code>draw_sprite_to_vga</code> рдХреЙрд▓ рдЬреЛрдбрд╝реЗрдВ (рдЗрд╕рдХреА рдмрд╛рдХреА рд╕рд╛рдордЧреНрд░реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреВрд╕рд░реЗ рднрд╛рдЧ</a> рд╕реЗ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХреА рдЧрдИ рд╣реИ): </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">10</span></span>; i &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; i--) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(g_sprite_chain[i].flags &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } draw_sprite_to_vga(&amp;g_sprite_chain[i]); } ... }</code> </pre> <br><p>  рдореИрдВрдиреЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рднреА рд▓рд┐рдЦрд╛ рдерд╛ рдЬреЛ рдорд╛рдЙрд╕ рдкреЙрдЗрдВрдЯрд░ ( <code>update_cursor</code> ), рдФрд░ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╕рдВрд╕рд╛рдзрди рдкреНрд░рдмрдВрдзрдХ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХрд░реНрд╕рд░ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдЕрджреНрдпрддрди рдХрд░рддрд╛ рд╣реИред  рд╣рдо рдпрд╣ рд╕рдм рдХрд╛рдо рдПрдХ рд╕рд╛рде рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span> { SCI_CURSOR = <span class="hljs-number"><span class="hljs-number">0</span></span>, SCI_BACKGRND = <span class="hljs-number"><span class="hljs-number">10</span></span>, SCI_TOTAL = <span class="hljs-number"><span class="hljs-number">11</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> g_cursors[<span class="hljs-number"><span class="hljs-number">399</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/* seg009 */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> g_background[<span class="hljs-number"><span class="hljs-number">32063</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/* seg010 */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ ... assert(resource_manager_load(<span class="hljs-string"><span class="hljs-string">"CURSORS.IMH"</span></span>, g_cursors)); add_sprite_to_chain(SCI_CURSOR, <span class="hljs-number"><span class="hljs-number">160</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, g_cursors, <span class="hljs-number"><span class="hljs-number">0</span></span>); assert(resource_manager_load(<span class="hljs-string"><span class="hljs-string">"TITLE.IMH"</span></span>, g_background)); add_sprite_to_chain(SCI_BACKGRND, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, g_background, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (sfRenderWindow_isOpen(g_window)) { ... update_cursor(); render(); } ... }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Kursor.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/lw/ji/sm/lwjismkxi7ewlzw9m9zahx3imjy.gif"></div></div><br><hr><br><p>  рдареАрдХ рд╣реИ, рдПрдХ рдкреВрд░реНрдг-рдореБрдЦреНрдп рдореЗрдиреВ рдХреЗ рд▓рд┐рдП, рдореЗрдиреВ рд╕реНрд╡рдпрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред  рд╕рдВрд╡рд╛рдж рдмреЙрдХреНрд╕реЛрдВ рдХреЗ рдЙрд▓рдЯрдиреЗ рдХрд╛ рд╕рдордп рд╣реИред  <em>[рдкрд┐рдЫрд▓реА рдмрд╛рд░, рдореИрдВрдиреЗ <code>draw_frame</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ <code>draw_frame</code> , рдЬреЛ рдбрд╛рдпрд▓реЙрдЧ рдмреЙрдХреНрд╕ рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░, рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ, <code>draw_string</code> рдлрд╝рдВрдХреНрд╢рди, рд╡рд╣рд╛рдВ рд╕реЗ рдХреЗрд╡рд▓ рдЯреЗрдХреНрд╕реНрдЯ рд░реЗрдВрдбрд░рд┐рдВрдЧ рд▓реЙрдЬрд┐рдХ рд▓реЗ рд░рд╣рд╛ рд╣реИред]</em> <code>draw_frame</code> рдирдП рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рджреЗрдЦрд╛ рдХрд┐ <code>add_sprite_to_chain</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ - рдХреБрдЫ рдЖрд╢реНрдЪрд░реНрдп рдХреА рдмрд╛рдд рдирд╣реАрдВ рд╣реИ, рдмрд╕ рдПрдХ рдбрд╛рдпрд▓реЙрдЧ рдмреЙрдХреНрд╕ рдЬреЛрдбрд╝ рд░рд╣рд╛ рд╣реИред рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВред  рд╕рдВрд╡рд╛рдж рдмреЙрдХреНрд╕ рдХреЗ рдЕрдВрджрд░ рдкрд╛рда рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдерд╛ред  рдореБрдЭреЗ рдпрд╛рдж рджрд┐рд▓рд╛рдПрдВ рдХрд┐ <code>draw_string</code> рдХреЙрд▓ <code>draw_string</code> рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="hljs perl"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 5098</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span></span>; <span class="hljs-string"><span class="hljs-string">"New/Load"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax call draw_string ; draw_string(<span class="hljs-string"><span class="hljs-string">"New/Load"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><p>  рдФрд░ <code>draw_frame</code> рднрд░рдиреЗ рдХрд╛ <code>draw_frame</code> <em>[рдпрд╣рд╛рдБ рдереЛрдбрд╝рд╛ рдЖрдЧреЗ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдореИрдВрдиреЗ <code>draw_string</code> рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд▓рдЧрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЕрдзрд┐рдХрд╛рдВрд╢ рддрддреНрд╡реЛрдВ рдХрд╛ рдирд╛рдо рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИред</em>  <em>рд╡реИрд╕реЗ, рдпрд╣рд╛рдБ, рдЬреИрд╕рд╛ рдХрд┐ <code>sprite_layer_t</code> рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЦреЗрддреЛрдВ рдХрд╛ рджреЛрд╣рд░рд╛рд╡ рд╣реИ]</em> : </p><br><pre> <code class="hljs powershell">typedef struct neuro_dialog_t { uint16_t left; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x65FA</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x20 uint16_t top; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x65FC</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x98 uint16_t right; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x65FE</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x7F uint16_t bottom; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6600</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xAF uint16_t inner_left; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6602</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x28 uint16_t inner_top; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6604</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA0 uint16_t inner_right; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6604</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA0 uint16_t inner_bottom; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6608</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA7 uint16_t _inner_left; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x660A</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x28 uint16_t _inner_top; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x660C</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA0 uint16_t _inner_right; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x660E</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x77 uint16_t _inner_bottom; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6610</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA7 uint16_t flags; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6612</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x06 uint16_t unknown; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6614</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x00 uint8_t padding[<span class="hljs-number"><span class="hljs-number">192</span></span>] // ... uint16_t width; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x66D6</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x30 uint16_t pixels_offset; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x66D8</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x02 uint16_t pixels_segment; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x66DA</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x22FB } neuro_dialog_t;</code> </pre> <br><p>  рдпрд╣рд╛рдБ рдХреНрдпрд╛, рдХреИрд╕реЗ рдФрд░ рдХреНрдпреЛрдВ рд╣реИ, рдпрд╣ рд╕рдордЭрд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдореИрдВ рд╕рд┐рд░реНрдл рдЗрд╕ рдЫрд╡рд┐ рдХреЛ рдЫреЛрдбрд╝рддрд╛ рд╣реВрдБ: </p><br><img src="https://habrastorage.org/webt/db/tf/nw/dbtfnw8fn1qx9aktubuvwojuw7y.png"><br><p>  рдЪрд░ <code>x_offt</code> рдФрд░ <code>y_offt</code> рдХреНрд░рдорд╢рдГ <code>draw_string</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рджреВрд╕рд░рд╛ рдФрд░ рддреАрд╕рд░рд╛ рддрд░реНрдХ рд╣реИрдВред  рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдирд╛ рдЖрд╕рд╛рди рдерд╛ <code>draw_frame</code> рдФрд░ <code>draw_text</code> , рдХреЗ рдмрд╛рдж рдЙрдирдХрд╛ рдирд╛рдо рдмрджрд▓рдХрд░ <code>build_dialog_frame</code> рдФрд░ <code>build_dialog_text</code> : </p><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build_dialog_frame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">neuro_dialog_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dialog, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> flags, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *pixels)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build_dialog_text</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">neuro_dialog_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dialog, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *text, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x_offt, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y_offt)</span></span></span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span> { SCI_CURSOR = <span class="hljs-number"><span class="hljs-number">0</span></span>, SCI_DIALOG = <span class="hljs-number"><span class="hljs-number">2</span></span>, ... } <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *g_dialog = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">neuro_dialog_t</span></span> g_menu_dialog; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ ... assert(g_dialog = <span class="hljs-built_in"><span class="hljs-built_in">calloc</span></span>(<span class="hljs-number"><span class="hljs-number">8192</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)); build_dialog_frame(&amp;g_menu_dialog, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">152</span></span>, <span class="hljs-number"><span class="hljs-number">96</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, g_dialog); build_dialog_text(&amp;g_menu_dialog, <span class="hljs-string"><span class="hljs-string">"New/Load"</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); add_sprite_to_chain(SCI_DIALOG, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">152</span></span>, g_dialog, <span class="hljs-number"><span class="hljs-number">1</span></span>); ... }</code> </pre> <br><img src="https://habrastorage.org/webt/ms/xt/bg/msxtbgydwxelkcfgng8vdud10ee.png"><br><p>  рдореЗрд░реЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдФрд░ рдореВрд▓ рд▓реЛрдЧреЛрдВ рдХреЗ рдмреАрдЪ рдореБрдЦреНрдп рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдореИрдВ рдкрд┐рдХреНрд╕реЗрд▓ рдЖрдХрд╛рд░ рдХреЗ рдкреВрд░реНрдг рдореВрд▓реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ - рдпрд╣ рдЖрд╕рд╛рди рд╣реИред </p><br><hr><br><p>  рдлрд┐рд░ рднреА, рдореБрдЭреЗ рдпрдХреАрди рдерд╛ рдХрд┐ рдмрдЯрди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреБрд░рдВрдд рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд╝рд┐рдореНрдореЗрджрд╛рд░ рдХреЛрдб рдЕрдиреБрднрд╛рдЧ <code>build_dialog_text</code> : </p><br><pre> <code class="hljs perl"> ... mov ax, <span class="hljs-number"><span class="hljs-number">5098</span></span>h ; <span class="hljs-string"><span class="hljs-string">"New/Load"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax call build_dialog_text ; build_dialog_text(<span class="hljs-string"><span class="hljs-string">"New/Load"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) add sp, <span class="hljs-number"><span class="hljs-number">6</span></span> mov ax, <span class="hljs-number"><span class="hljs-number">6</span></span>Eh ; <span class="hljs-string"><span class="hljs-string">'n'</span></span> -  <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_181A3</span></span></span><span class="hljs-function"> </span></span>; sub_181A3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'n'</span></span>) add sp, 0Ah mov ax, <span class="hljs-number"><span class="hljs-number">6</span></span>Ch ; <span class="hljs-string"><span class="hljs-string">'l'</span></span> -      <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax mov ax, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax mov ax, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 5 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_181A3</span></span></span><span class="hljs-function"> </span></span>; sub_181A3(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'l'</span></span>)</code> </pre> <br><p>  рдпрд╣ рд╕рдм рдЗрди рдЙрддреНрдкрдиреНрди рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИ - <code>'n'</code> рдФрд░ <code>'l'</code> , рдЬреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ <code>"New"</code> рдФрд░ <code>"load"</code> рд╢рдмреНрджреЛрдВ рдореЗрдВ рдкрд╣рд▓реЗ рдЕрдХреНрд╖рд░ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдЧрд░ рд╣рдо <code>build_dialog_text</code> рд╕рд╛рде рд╕рдорд╛рдирддрд╛ рд╕реЗ рдмрд╣рд╕ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ <code>sub_181A3</code> (рдЗрд╕рдХреЗ рдмрд╛рдж - <code>build_dialog_item</code> ) рдХреЗ рдкрд╣рд▓реЗ рдЪрд╛рд░ рддрд░реНрдХ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдФрд░ рдЖрдХрд╛рд░реЛрдВ рдХреЗ рдХрд╛рд░рдХ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ <em>[рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдкрд╣рд▓реЗ рддреАрди рддрд░реНрдХ, рдЪреМрдереЗ, рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдирд┐рдХрд▓рд╛, рдЪреМрдерд╛, рдЕрдиреНрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ]</em> ред  рдпрджрд┐ рдЖрдк рдЫрд╡рд┐ рдкрд░ рдЗрди рдорд╛рдиреЛрдВ рдХреЛ рдУрд╡рд░рд▓реЗ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рд╕рдм рдХреБрдЫ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><img src="https://habrastorage.org/webt/xy/gw/hj/xygwhjq2ykcj7wf9z0dbtzhzr7q.png"><br><p>  рдЫрд╡рд┐ рдореЗрдВ рдЪрд░ <code>x_offt</code> , <code>y_offt</code> рдФрд░ <code>width</code> , рдХреНрд░рдорд╢рдГ <code>build_dialog_item</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдкрд╣рд▓реЗ рддреАрди рддрд░реНрдХ рд╣реИрдВред  рдЗрд╕ рдЖрдпрдд рдХреА рдКрдВрдЪрд╛рдИ рд╣рдореЗрд╢рд╛ рдкреНрд░рддреАрдХ рдХреА рдКрдВрдЪрд╛рдИ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реЛрддреА рд╣реИ - рдЖрдаред  <code>build_dialog_item</code> рдкрд░ рдмрд╣реБрдд рд╣реА рдирдЬрд╝рджреАрдХреА рдирдЬрд╝рд░ <code>build_dialog_item</code> , рдореБрдЭреЗ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдореИрдВрдиреЗ <code>neuro_dialog_t</code> рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ <code>padding</code> (рдЕрдм <code>items</code> ) рдХреЗ рд░реВрдк рдореЗрдВ рдЬреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рд╣реИ, рд╡рд╣ рдирд┐рдореНрди рдлрд╝реЙрд░реНрдо рдХреА 16 рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдПрдХ рд╕рд░рдгреА рд╣реИ: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dialog_item_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> left; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> top; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> right; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> bottom; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> unknown; <span class="hljs-comment"><span class="hljs-comment">/* index? */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> letter; } <span class="hljs-keyword"><span class="hljs-keyword">dialog_item_t</span></span>;</code> </pre> <br><p>  рдФрд░ рдлрд╝реАрд▓реНрдб <code>neuro_dialog_t.unknown</code> (рдЕрдм - <code>neuro_dialog_t.items_count</code> ) рдореЗрдиреВ рдореЗрдВ рдЖрдЗрдЯрдореЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдХрд╛рдЙрдВрдЯрд░ рд╣реИ: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">neuro_dialog_t</span></span></span><span class="hljs-class"> {</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> flags; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> items_count; <span class="hljs-keyword"><span class="hljs-keyword">dialog_item_t</span></span> items[<span class="hljs-number"><span class="hljs-number">16</span></span>]; ... } <span class="hljs-keyword"><span class="hljs-keyword">neuro_dialog_t</span></span>;</code> </pre> <br><p>  <code>dialog_item_t.unknown</code> рдлрд╝реАрд▓реНрдб <code>dialog_item_t.unknown</code> рдЪреМрдереЗ рддрд░реНрдХ рдХреЗ рд╕рд╛рде <code>build_dialog_item</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдпрд╛ <code>dialog_item_t.unknown</code> рд╣реИред  рд╢рд╛рдпрдж рдпрд╣ рдПрд░реЗ рдореЗрдВ рддрддреНрд╡ рдХрд╛ рд╕реВрдЪрдХрд╛рдВрдХ рд╣реИ, рд▓реЗрдХрд┐рди рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рд╣рдореЗрд╢рд╛ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП <code>unknown</code> ред  <code>dialog_item_t.letter</code> рдлрд╝реАрд▓реНрдб <code>dialog_item_t.letter</code> <code>build_dialog_item</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдкрд╛рдВрдЪрд╡реЗрдВ рддрд░реНрдХ рдХреЗ рд╕рд╛рде рдЖрд░рдВрднреАрдХреГрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдлрд┐рд░, рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдмрд╛рдПрдВ рдХреНрд▓рд┐рдХ рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рдЧреЗрдо рдХрд┐рд╕реА рдПрдХ рдЖрдЗрдЯрдо рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдорд╛рдЙрд╕ рдкреЙрдЗрдВрдЯрд░ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреНрд░рдо рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рдЫрд╛рдВрдЯ рд░рд╣рд╛ рд╣реИ), рдФрд░ рдпрджрд┐ рдХреЛрдИ рд╣рд┐рдЯ рд╣реИ, рддреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд╛рдВрдЫрд┐рдд рд╣реИрдВрдбрд▓рд░ рдХреЛ рдЗрд╕ рдХреНрд╖реЗрддреНрд░ рд╕реЗ рдЪреБрдирд╛ рдЬрд╛рддрд╛ рд╣реИред  <em>[рдореБрдЭреЗ рдирд╣реАрдВ рдкрддрд╛ рдХрд┐ рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдареАрдХ рдЙрд╕реА рддрд░реНрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИред]</em> </p><br><p>  рдпрд╣ рдПрдХ рдкреВрд░реНрдг-рдореБрдЦреНрдп рдореЗрдиреВ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рдореВрд▓ рдХреЛрдб рдХреЛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рджреЗрдЦ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдмрд╕ рдЦреЗрд▓ рдореЗрдВ рджреЗрдЦреЗ рдЧрдП рдЕрдкрдиреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рджреЛрд╣рд░рд╛ рд░рд╣рд╛ рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">Glavnoe_Menyu.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/we/q8/ni/weq8ni9fy9vuusoaitjgazjt6e4.gif"></div></div><br><hr><br><p>  рдпрджрд┐ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ gif рдХреЛ рдЕрдВрдд рддрдХ рджреЗрдЦрд╛ рд╣реИ, рддреЛ рд╕рдВрднрд╡рддрдГ рдЖрдкрдиреЗ рдЕрдВрддрд┐рдо рдлрд╝реНрд░реЗрдо рдкрд░ рд╕реНрдЯрд╛рд░реНрдЯ-рдЕрдк рдЧреЗрдо рд╕реНрдХреНрд░реАрди рджреЗрдЦреА рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореЗрд░реЗ рдкрд╛рд╕ рдЗрд╕реЗ рдЦреАрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдм рдХреБрдЫ рд╣реИред  рдмрд╕ рдЗрд╕реЗ рд▓реЗрдВ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдЪреЗрди рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдореБрдЦреНрдп рдЪрд░рд┐рддреНрд░ рдХреЗ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЛ рдордВрдЪ рдкрд░ рд░рдЦрдХрд░, рдореИрдВрдиреЗ <code>imh_hdr_t</code> рд╕рдВрд░рдЪрдирд╛ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЦреЛрдЬ рдХреАред </p><br><p>  рдореВрд▓ рдХреЛрдб рдореЗрдВ, <code>add_sprite_to_chain</code> рдлрд╝рдВрдХреНрд╢рди, рдЬреЛ рдирд╛рдпрдХ рдХреА рдЫрд╡рд┐ рдХреЛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдХреЛ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ 156 рдФрд░ 110 рдХреЗ рд╕рд╛рде рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣рд╛рдВ рдореИрдВрдиреЗ рд╡рд╣реА рджреЗрдЦрд╛, рдЬреЛ рдЦреБрдж рдХреЛ рджреЛрд╣рд░рд╛ рд░рд╣рд╛ рд╣реИ: </p><br><img src="https://habrastorage.org/webt/i1/5s/yf/i15syfep7bdhuhxgsbkhr-bxev4.png" align="left"><br><p>  рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдХрд┐ рдХреНрдпрд╛ рд╣реИ, рдореБрдЭреЗ рдирд┐рдореНрди рдкреНрд░рдХрд╛рд░ рдХреА рд╕рдВрд░рдЪрдирд╛ <code>imh_hdr_t</code> : </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">imh_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dx; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dy; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> height; } <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>;</code> </pre> <br><p>  рдПрдХ <code>unknown</code> рдХреНрд╖реЗрддреНрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдСрдлрд╝рд╕реЗрдЯ рдорд╛рди рдЬреЛ рд╕реНрдкреНрд░реИрдб рдЪреЗрди рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╕рдВрдЧрдд рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ (рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рджреМрд░рд╛рди) рд╕реЗ рдШрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p><br clear="left"></p><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЦреАрдВрдЪреЗ рдЧрдП рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЗ рдКрдкрд░реА рдмрд╛рдПрдВ рдХреЛрдиреЗ рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордиреНрд╡рдп рдХреА рдЧрдгрдирд╛ рд▓рдЧрднрдЧ рдЗрд╕ рддрд░рд╣ рдХреА рдЬрд╛рддреА рд╣реИ: </p><br><pre> <code class="hljs cpp">left = <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.left - <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.sprite_hdr.dx top = <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.top - <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.sprite_hdr.dy</code> </pre> <br><p>  рдЕрдкрдиреЗ рдХреЛрдб рдореЗрдВ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реБрдП, рдореБрдЭреЗ рд╕рд╣реА рддрд╕реНрд╡реАрд░ рдорд┐рд▓реА, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдореИрдВрдиреЗ рдореБрдЦреНрдп рдЪрд░рд┐рддреНрд░ рдХреЛ рдкреБрдирд░реНрдЬреАрд╡рд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореИрдВрдиреЗ рдореВрд▓ рдкрд░ рд╡рд╛рдкрд╕ рджреЗрдЦреЗ рдмрд┐рдирд╛ рдЪрд░рд┐рддреНрд░ рдХреЗ рдирд┐рдпрдВрддреНрд░рдг (рдорд╛рдЙрд╕ рдФрд░ рдХреАрдмреЛрд░реНрдб), рдЕрдкрдиреЗ рдПрдиреАрдореЗрд╢рди рдФрд░ рдЖрдВрджреЛрд▓рди рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╕рднреА рдХреЛрдб рд▓рд┐рдЦреЗред </p><br><div class="spoiler">  <b class="spoiler_title">Moonwalk.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tw/ei/m2/tweim2zx4hrsefql82ny-elnimc.gif"></div></div><br><hr><br><p>  рдкрд╣рд▓реЗ рд╕реНрддрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╛рда рдкрд░рд┐рдЪрдп рдорд┐рд▓рд╛ред  рдореБрдЭреЗ рдпрд╛рдж рджрд┐рд▓рд╛рдирд╛ рд╣реИ рдХрд┐ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕рдВрд╕рд╛рдзрди <code>.BIH</code> рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВред  <code>.BIH</code> рдлрд╛рдЗрд▓реЗрдВ рд╡реИрд░рд┐рдПрдмрд▓-рд╕рд╛рдЗрдЬрд╝ рд╣реИрдбрд░ рдФрд░ рдирд▓-рдЯрд░реНрдорд┐рдиреЗрдЯреЗрдб рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЗ рдЕрдиреБрдХреНрд░рдо рд╕реЗ рдорд┐рд▓рдХрд░ рдмрдирддреА рд╣реИрдВред  рдореВрд▓ рдХреЛрдб рдЬреЛ рдЗрдВрдЯреНрд░реЛ рдЦреЗрд▓рддрд╛ рд╣реИ, рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдкрд░, рдореБрдЭреЗ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ <code>.BIH</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд╛рда рднрд╛рдЧ рдХреА рд╢реБрд░реБрдЖрдд рдХреА рдЪреМрдереА рд╣реЗрдбрд░ рд╢рдмреНрдж рдореЗрдВ рд╕рдорд╛рд╣рд┐рдд рд╣реИред  рдкрд╣рд▓реА рдкрдВрдХреНрддрд┐ рдкрд░рд┐рдЪрдп рд╣реИ: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bih_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> unknown[<span class="hljs-number"><span class="hljs-number">3</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> text_offset; } <span class="hljs-keyword"><span class="hljs-keyword">bih_hdr_t</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> r1_bih[<span class="hljs-number"><span class="hljs-number">12288</span></span>]; assert(resource_manager_load(<span class="hljs-string"><span class="hljs-string">"R1.BIH"</span></span>, r1_bih)); <span class="hljs-keyword"><span class="hljs-keyword">bih_hdr_t</span></span> *hdr = (<span class="hljs-keyword"><span class="hljs-keyword">bih_hdr_t</span></span>*)r1_bih; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *intro = r1_bih + hdr-&gt;text_offset;</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореВрд▓ рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рдореВрд▓ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд╡рд┐рднрд╛рдЬрди рдХреЛ рд╕рдмрд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рддрд╛рдХрд┐ рд╡реЗ рдкрд╛рда рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд▓рд┐рдП рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдлрд┐рдЯ рд╣реЛ, рдЗрди рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдХреНрд░реЙрд▓ рдХрд░реЗрдВ, рдФрд░ рдЕрдЧрд▓реЗ рдмреИрдЪ рдХреЛ рдЬрд╛рд░реА рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЗрдирдкреБрдЯ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред </p><br><div class="spoiler">  <b class="spoiler_title">Intro.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/uk/oa/ag/ukoaagah17k7eegsy4unobeskbg.gif"></div></div><br><hr><br><p>  рдкреНрд░рдХрд╛рд╢рди рдХреЗ рд╕рдордп, рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рддреАрди рднрд╛рдЧреЛрдВ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИ, рдореИрдВрдиреЗ рдзреНрд╡рдирд┐ рдХреЗ рдкреНрд░рдЬрдирди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ред  рдЕрднреА рддрдХ рдпрд╣ рдХреЗрд╡рд▓ рдореЗрд░реЗ рд╕рд┐рд░ рдореЗрдВ рд╣реИ рдФрд░ рдЗрд╕реЗ рдореЗрд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЗрд╕реЗ рд╕рд╛рдХрд╛рд░ рдХрд░рдиреЗ рдореЗрдВ рдХреБрдЫ рд╕рдордп рд▓рдЧреЗрдЧрд╛ред  рддреЛ рдЪреМрдерд╛ рднрд╛рдЧ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдзреНрд╡рдирд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИред  рдореИрдВ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рдмрддрд╛рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рднреА рдмрдирд╛ рд░рд╣рд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХреИрд╕рд╛ рд╣реЛрддрд╛ рд╣реИред </p><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреНрдпреВрд░реЛрдорд╛рдВрд╕рд░ рдХрд╛ рдЙрд▓рдЯрд╛ред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 4: рдзреНрд╡рдирд┐, рдПрдиреАрдореЗрд╢рди, рд╣рдлрдореИрди, рдЬреАрдереВрдм</a> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi415555/">https://habr.com/ru/post/hi415555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi415545/index.html">PowerShell рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡реАрдо рдмреИрдХрдЕрдк рдФрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</a></li>
<li><a href="../hi415547/index.html">OSDAY рдпрд╛ рд░реВрд╕реА рдЖрдИрдЯреА рдХрдВрдкрдирд┐рдпреЛрдВ рдореЗрдВ рдХрд╛рдо рд╢реБрд░реВ рдХрд░рдиреЗ рдФрд░ рд╡рд╣рд╛рдВ рд░рд╣рдиреЗ рдХреЗ рд▓рд┐рдП рдЫрд╛рддреНрд░реЛрдВ рдХреЛ рд╕рд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП</a></li>
<li><a href="../hi415549/index.html">рдХреИрд╕реЗ рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рд╕реНрдХреВрдЯрд░ рдиреЗ рд╕рд┐рд▓рд┐рдХреЙрди рд╡реИрд▓реА рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░ рд▓рд┐рдпрд╛, рдФрд░ рд╡реЗ рдЙрдирд╕реЗ рдирдлрд░рдд рдХреНрдпреЛрдВ рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi415551/index.html">VoLTE / ViLTE + рд╡рд╛рдИ-рдлрд╛рдИ-рдХреЙрд▓рд┐рдВрдЧ рдХреЗрд╡рд▓ рдЬрдЯрд┐рд▓ рд╣реИ</a></li>
<li><a href="../hi415553/index.html">рдПрдЖрд░-рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпреЛрдВ рдХреА рджреБрдирд┐рдпрд╛ рд╕реЗ рддрд╛рдЬрд╛ рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдкрд╛рдЪрди</a></li>
<li><a href="../hi415557/index.html">рдХреЛрдбреЗрдХ 2 + рддрдВрддреНрд░рд┐рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХ = рдПрдХ рдбрд┐рд╕реНрдХреЗрдЯ рдкрд░ рдкреВрд░реЗ рдкреЙрдбрдХрд╛рд╕реНрдЯ</a></li>
<li><a href="../hi415559/index.html">рдХреЙрд▓ рд╕реЗрдВрдЯрд░реЛрдВ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕, рдпрд╛ рдХреИрд╕реЗ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпреЛрдВ рдиреЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд╕рд╛рде рдСрдкрд░реЗрдЯрд░реЛрдВ рдХреЗ рдХрд╛рдо рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИ</a></li>
<li><a href="../hi415561/index.html">рддреНрд╡рд░рд┐рдд рд╕рдВрджреЗрд╢рд╡рд╛рд╣рдХреЛрдВ рдореЗрдВ рд╡реАрдо рдмреИрдХрдЕрдк рдФрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реЗ рдШрдЯрдирд╛рдУрдВ рдХреЛ рдХреИрд╕реЗ рдзрдХреЗрд▓реЗрдВ</a></li>
<li><a href="../hi415563/index.html">"рдореИрдХреЗрдирд┐рдХрд▓" рд╕реНрдХреНрд░рдо рдХрд╛ рдЙрдкрдЪрд╛рд░ред рднрд╛рдЧ 2. рдЯреАрдо</a></li>
<li><a href="../hi415565/index.html">рдХреНрдпреЛрдВ (рдЖрдЬ) рд░рд┐рдЯрд░реНрди 444 рд╣рдореЗрд╢рд╛ рдЙрдкрдпреЛрдЧреА рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>