<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â¸ï¸ ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ‘¨ğŸ¼â€ğŸ“ Python TamTamæœºå™¨äººå¼€å‘ ğŸ“¼ ğŸšƒ ğŸ§™ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHaï¼ è®©æˆ‘è‡ªæˆ‘ä»‹ç»ï¼šæˆ‘å«Sergey Agaltsovï¼Œæˆ‘æ˜¯â€œç”Ÿæ´»ä¸­çš„ç¨‹åºå‘˜â€ã€‚ è¿™æ„å‘³ç€æˆ‘é•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯ITç»ç†ï¼Œå®Œå…¨ä¸æ˜¯ä¸“ä¸šçš„ç¨‹åºå‘˜ï¼Œä½†æ˜¯æˆ‘ç»å¸¸åœ¨è‡ªå·±çš„ä¸»è¦æ´»åŠ¨å’Œä¸šä½™çˆ±å¥½ä¸­ä½¿ç”¨ç¼–ç¨‹ã€‚ æ­£å¦‚æˆ‘ä»¥å‰çš„ä¸€ä½è€æ¿ç»å¸¸è¯´çš„é‚£æ ·ï¼šâ€œ Seryogaï¼æ‚¨å†æ¬¡é™·å…¥ç¼–ç¨‹ä¹‹ä¸­ï¼â€ æ²¡é”™ï¼Œæˆ‘ä¸èƒ½è¯´ä»–æˆ–å…¶ä»–ä»»ä½•äººå¯¹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python TamTamæœºå™¨äººå¼€å‘</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/466373/"><p><img src="https://habrastorage.org/webt/hv/5y/zn/hv5yzn1xbdnmstacgsl-4bqqcfc.jpeg"></p><br><p> å“ˆHaï¼ è®©æˆ‘è‡ªæˆ‘ä»‹ç»ï¼šæˆ‘å«Sergey Agaltsovï¼Œæˆ‘æ˜¯â€œç”Ÿæ´»ä¸­çš„ç¨‹åºå‘˜â€ã€‚ è¿™æ„å‘³ç€æˆ‘é•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯ITç»ç†ï¼Œå®Œå…¨ä¸æ˜¯ä¸“ä¸šçš„ç¨‹åºå‘˜ï¼Œä½†æ˜¯æˆ‘ç»å¸¸åœ¨è‡ªå·±çš„ä¸»è¦æ´»åŠ¨å’Œä¸šä½™çˆ±å¥½ä¸­ä½¿ç”¨ç¼–ç¨‹ã€‚ æ­£å¦‚æˆ‘ä»¥å‰çš„ä¸€ä½è€æ¿ç»å¸¸è¯´çš„é‚£æ ·ï¼šâ€œ Seryogaï¼æ‚¨å†æ¬¡é™·å…¥ç¼–ç¨‹ä¹‹ä¸­ï¼â€ æ²¡é”™ï¼Œæˆ‘ä¸èƒ½è¯´ä»–æˆ–å…¶ä»–ä»»ä½•äººå¯¹æ­¤éƒ½ä¸æ»¡æ„ã€‚ </p><br><p> åœ¨TamTam Messengerä¸Šå‡ºç°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Bot API</a>ä¹‹åï¼Œä½œä¸ºä¸€ä¸ªçœŸæ­£çš„ç¨‹åºå‘˜ï¼Œå› æ­¤æˆ‘æ˜¯æ‡’æƒ°çš„ç¨‹åºå‘˜ï¼Œæˆ‘åˆ›å»ºäº†2ä¸ªPythonåº“æ¥ä½¿ç”¨å®ƒï¼š </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼€æ”¾å®¢æˆ·ç«¯API</a> ï¼ˆä»¥ä¸‹ç®€ç§°OACï¼‰-æœ€åˆæ˜¯ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenAPI Generator</a>åŸºäºAPIæ–¹æ¡ˆ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç”Ÿæˆ</a>çš„ï¼Œç„¶åè€ƒè™‘åˆ°ç”Ÿæˆå™¨çš„åŠŸèƒ½å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼› </li><li> è¯¥å®¢æˆ·ç«¯çš„å¤–å£³æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TamTamBot</a> ï¼ˆä»¥ä¸‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç§°ä¸º</a> TTBï¼‰ï¼Œå¯ç®€åŒ–OACçš„å·¥ä½œã€‚ </li></ul><br><p> å› æ­¤ï¼Œæœ‰ä¸€ä¸ªç‰¹å®šçš„TamTam Python SDKã€‚ </p><br><p> æˆ‘é¦–å…ˆâ€œä¸ºäº†è‡ªå·±ï¼Œä¸ºäº†çµé­‚â€åšåˆ°äº†è¿™ä¸€ç‚¹ï¼Œä½†ä¹Ÿå»ºè®®TamTamç¤¾åŒºï¼ˆå¦‚æœéœ€è¦ï¼‰ä½¿ç”¨å®ƒã€‚ ä½†æ˜¯ï¼Œæ­£å¦‚æ‚¨æ‰€çŸ¥ï¼Œæ²¡æœ‰ä¸€ä»¶å¥½äº‹ä¼šå—åˆ°æƒ©ç½š-äººä»¬è¦æ±‚å†™ä¸€ç¯‡åŸ¹è®­æ–‡ç« ã€‚ è¿™æ˜¯æˆ‘çš„è¿™ç¯‡æ–‡ç« ã€‚ åœ¨å…¶ä¸­ï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨å¦‚ä½•ä½¿ç”¨è¿™äº›åº“å¼€å‘ä¸€ä¸ªç®€å•çš„æœºå™¨äººã€‚ </p><a name="habracut"></a><br><h1 id="zadacha"> æŒ‘æˆ˜èµ› </h1><br><p> å¼€å‘æ—¨åœ¨ç®€åŒ–æœºå™¨äººå¼€å‘äººå‘˜æ“ä½œçš„æœºå™¨äººã€‚ è¯¥æœºå™¨äººåº”ä»¥çŠ¶æ€bot-apiçš„æ°¸ä¹…è½®è¯¢ï¼ˆé•¿æ—¶é—´è½®è¯¢ï¼‰æ¨¡å¼å·¥ä½œã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œè¯¥æœºå™¨äººå°†ç»è¿‡è®­ç»ƒä»¥æ˜¾ç¤ºå‘é€ç»™ä»–çš„æ¶ˆæ¯çš„å†…éƒ¨ï¼Œå¹¶ä¸”è¿˜å°†å…¶é…ç½®ä¸ºä¸å¼€å‘çš„åŠŸèƒ½åŒ¹é…ã€‚ </p><br><p> æ®äº†è§£ï¼Œè¯»è€…å·²ç»å®‰è£…äº†è¿æ¥åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PyCharm</a>å¼€å‘ç¯å¢ƒçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Python 3</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">git</a> ï¼ˆå¼€å‘ç¯å¢ƒå¯èƒ½æœ‰æ‰€ä¸åŒï¼Œä½†æ•…äº‹å°†åŸºäºPyCharmï¼‰ã€‚ äº†è§£OOPçš„åŸºç¡€æ˜¯å¯å–çš„ã€‚ </p><br><h1 id="poluchenie-tokena-bota"> è·å–æœºå™¨äººä»¤ç‰Œ </h1><br><p> é€šè¿‡è°ƒç”¨ä¸“ç”¨æœºå™¨äºº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">@PrimeBotè·å¾—</a>ä»¤ç‰Œã€‚ </p><br><p> æˆ‘ä»¬åœ¨TamTamä¸­æ‰¾åˆ°è¯¥æœºå™¨äººï¼Œè¾“å…¥/ createå‘½ä»¤å¹¶å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š </p><br><ul><li>è¾“å…¥æœºå™¨äººçš„å”¯ä¸€ç®€ç§°ï¼ˆç”¨æ‹‰ä¸å­—æ¯ï¼‰-è¿™æ˜¯æœºå™¨äººçš„ç”¨æˆ·åï¼Œå¯ä»¥é€šè¿‡@æˆ–å½¢å¼ä¸º<code>https://tt.me/username</code>çš„é“¾æ¥æ¥ä½¿ç”¨å®ƒã€‚ ç”¨æˆ·åæ²¡æœ‰ç‰¹åˆ«é™åˆ¶ã€‚ ç‰¹åˆ«æ˜¯ï¼Œbotè¿™ä¸ªè¯æ˜¯å¯é€‰çš„ã€‚ </li><li> è¾“å…¥åç§°-è¿™æ˜¯æœºå™¨äººçš„æ˜¾ç¤ºåç§°ã€‚ åœ¨è¿™é‡Œæ‚¨å·²ç»å¯ä»¥ä½¿ç”¨è¥¿é‡Œå°”å­—æ¯ã€‚ </li></ul><br><p> å¦‚æœæ­£ç¡®è¾“å…¥æ‰€æœ‰å†…å®¹ï¼Œåˆ™åˆ›å»ºçš„æ¼«æ¸¸å™¨å°†æ·»åŠ åˆ°è”ç³»äººä¸­ï¼Œä½œä¸ºå›æŠ¥ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°ä»¤ç‰Œ-ä¸€ç³»åˆ—å­—ç¬¦ï¼Œæ ¼å¼ä¸ºï¼šHDyDvomx6TfsXkgwfFCUY410fv-vbf4XVjr8JVSUu4cã€‚ </p><br><h1 id="pervichnaya-nastroyka"> åˆå§‹è®¾å®š </h1><br><div class="spoiler">  <b class="spoiler_title">æ˜¾ç¤º</b> <div class="spoiler_text"><p> åˆ›å»ºç›®å½•ï¼š </p><br><pre> <code class="plaintext hljs">mkdir ttBotDevHelper</code> </pre> <br><p> è½¬åˆ°å®ƒï¼š </p><br><pre> <code class="plaintext hljs">cd ttBotDevHelper/</code> </pre> <br><p> æˆ‘ä»¬åˆå§‹åŒ–gitä»“åº“ï¼š </p><br><pre> <code class="plaintext hljs">git init</code> </pre> <br><p> ä¸‹è½½å¿…è¦çš„åº“ï¼Œå°†å®ƒä»¬æ·»åŠ ä¸ºgitçš„å­æ¨¡å—ï¼š </p><br><pre> <code class="plaintext hljs">git submodule add https://github.com/asvbkr/openapi_client.git openapi_client git submodule add https://github.com/asvbkr/TamTamBot.git TamTamBot</code> </pre> <br><p> æˆ‘ä»¬åœ¨PyCharmä¸­æ‰“å¼€åˆ›å»ºçš„ç›®å½•ï¼ˆä¾‹å¦‚ï¼Œä»èµ„æºç®¡ç†å™¨ä¸­çš„ä¸Šä¸‹æ–‡èœå•â€œä»¥PyCharmé¡¹ç›®æ‰“å¼€æ–‡ä»¶å¤¹â€ä¸‹ï¼‰ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬çš„æœºå™¨äººå°†åŒ…å«çš„æ–‡ä»¶-File / New / Pythonæ–‡ä»¶ã€‚ åœ¨å‡ºç°çš„å¯¹è¯æ¡†ä¸­ï¼Œè¾“å…¥åç§°-ttBotDevHelperï¼Œå¹¶å›ç­”æ·»åŠ åˆ°gitçš„é—®é¢˜ã€‚ </p><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºé¡¹ç›®åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒã€‚ </p><br><p> è¦åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œè¯·é€‰æ‹©â€œæ–‡ä»¶/è®¾ç½®â€ï¼Œç„¶ååœ¨â€œé¡¹ç›®â€é€‰é¡¹å¡ä¸Šé€‰æ‹©â€œé¡¹ç›®è§£é‡Šå™¨â€å­é¡¹ã€‚ æ¥ä¸‹æ¥ï¼Œåœ¨å³ä¾§ï¼Œç‚¹å‡»é½¿è½®å›¾æ ‡ï¼Œç„¶åé€‰æ‹©æ·»åŠ ï¼š </p><br><p><img src="https://habrastorage.org/webt/dg/js/qv/dgjsqvo0ygtsp12lehregxcm8po.png" alt="å›¾ç‰‡"></p><br><p>  PyCharmå°†æä¾›è‡ªå·±çš„ä½å®¿é€‰æ‹©ã€‚ </p><br><p><img src="https://habrastorage.org/webt/lp/gg/og/lpggogip_ekpmuoiegolvfxyk2s.png" alt="å›¾ç‰‡"></p><br><p> åŒæ„ä»–æ˜¯æœ‰æ„ä¹‰çš„ã€‚ </p><br><p> åˆ›å»ºè™šæ‹Ÿç¯å¢ƒåï¼Œå°†æ‰“å¼€ä¸Šä¸€ä¸ªå±å¹•ï¼Œä½†è¯¥å±å¹•å·²ç»åŒ…å«æœ‰å…³åˆ›å»ºçš„ç¯å¢ƒçš„ä¿¡æ¯ã€‚ åœ¨æ­¤å±å¹•ä¸Šï¼Œæ‚¨éœ€è¦é€šè¿‡å•å‡»å³ä¾§çš„â€œ +â€å›¾æ ‡å¹¶è¾“å…¥è½¯ä»¶åŒ…åç§°æ¥å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…ï¼š </p><br><ul><li> è¦æ±‚ </li><li> å…­ </li></ul><br><p> ç„¶åï¼Œæˆ‘ä»¬å°†.gitignoreæ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œä¸åŒ…æ‹¬gitä¸­ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š </p><br><pre> <code class="plaintext hljs">venv/ .idea/ # Byte-compiled / optimized / DLL files __pycache__/ *.py[cod] *$py.class *.log *.log.* .env ttb.sqlite3</code> </pre> <br><p> æ·»åŠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ä¸ª</a>åä¸º<code>TT_BOT_API_TOKEN</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„ç¯å¢ƒå˜é‡</a> ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬æŒ‡ç¤ºä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://tt.me/primebot</a>æ¥æ”¶åˆ°çš„æœºå™¨äººæ ‡è®°çš„å€¼ï¼Œç„¶åé‡æ–°å¯åŠ¨PyCharmã€‚ </p><br><p>  <strong>ï¼ˆï¼ï¼‰</strong> PyCharmæœ€å¥½ä½¿ç”¨ç‰¹æ®Šçš„.envæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†ç¯å¢ƒå˜é‡æ·»åŠ åˆ°OSç¯å¢ƒã€‚ å…¶é…ç½®å°†åœ¨ä¸‹é¢è®¨è®ºã€‚ </p><br><p> æ­å–œï¼Œç°åœ¨æ‚¨å¯ä»¥ç»§ç»­è¿›è¡Œæœ€æœ‰è¶£çš„éƒ¨åˆ†-ç¼–å†™æœºå™¨äººã€‚ </p></div></div><br><h1 id="zapusk-prosteyshego-bota"> ç®€å•çš„æœºå™¨äººå¯åŠ¨ </h1><br><p> æ‰“å¼€ttBotDevHelper.pyæ–‡ä»¶å¹¶ç¼–å†™ç¬¬ä¸€è¡Œï¼š </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: UTF-8 -*- from TamTamBot.TamTamBot import TamTamBot class BotDevHelper(TamTamBot): pass</span></span></code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åŸºäºTamTamBotç±»åˆ›å»ºbotç±»ã€‚ </p><br><p>  PyCharmå»ºè®®BotDevHelperç±»åŒ…å«éœ€è¦å®ç°çš„æŠ½è±¡æ–¹æ³•ã€‚ åœ¨ç±»åç§°ä¸ŠæŒ‰Alt-Enterï¼Œé€‰æ‹©â€œå®æ–½æŠ½è±¡æ–¹æ³•â€ï¼Œé€‰æ‹©PyCharmæå‡ºçš„æ‰€æœ‰æ–¹æ³•ï¼ˆå…¶ä¸­2ç§ï¼‰ï¼Œç„¶åå•å‡»â€œç¡®å®šâ€ã€‚ ç»“æœï¼Œå°†æ·»åŠ ä¸¤ä¸ªç©ºå±æ€§æ–¹æ³•ï¼šä»¤ç‰Œå’Œæè¿°ã€‚ æˆ‘ä»¬ä¿®æ”¹ç»“æœä»£ç å¦‚ä¸‹ï¼š </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: UTF-8 -*- import os from TamTamBot.TamTamBot import TamTamBot from TamTamBot.utils.lng import set_use_django class BotDevHelper(TamTamBot): @property def token(self): return os.environ.get('TT_BOT_API_TOKEN') @property def description(self): return '       .\n\n' \ 'This bot is an helper in the development and management of bots.' if __name__ == '__main__': set_use_django(False) BotDevHelper().polling()</span></span></code> </pre> <br><p>  <code>token</code>å±æ€§è¿”å›æˆ‘ä»¬æœºå™¨äººçš„ä»¤ç‰Œï¼Œå…¶å€¼æ¥è‡ªç¯å¢ƒå˜é‡<code>TT_BOT_API_TOKEN</code> ã€‚  <code>description</code>å±æ€§è¿”å›æˆ‘ä»¬æœºå™¨äººçš„æ‰©å±•æè¿°ï¼Œå®ƒå°†æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ </p><br><p> è¦åœ¨çŠ¶æ€è½®è¯¢æ¨¡å¼ä¸‹è¿è¡Œæˆ‘ä»¬çš„æ¼«æ¸¸å™¨ï¼Œéœ€è¦æ–‡ä»¶æœ«å°¾çš„ä»£ç ã€‚ </p><br><p> æˆ‘æ³¨æ„åˆ°åŸºç±»<code>TamTamBot</code>æ¶‰åŠä½¿ç”¨django WebæœåŠ¡å™¨åœ¨WebæŒ‚é’©æ¨¡å¼ä¸‹å·¥ä½œã€‚ ä½†æ˜¯ç°åœ¨ä»»åŠ¡å˜å¾—æ›´ç®€å•äº†ï¼Œæˆ‘ä»¬ä¸éœ€è¦djangoï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨<code>set_use_django(False)</code>ä¸­æŠ¥å‘Šçš„<code>set_use_django(False)</code> ã€‚ åœ¨è¿™é‡Œï¼Œä¸ºæˆ‘ä»¬ç±»çš„å¯¹è±¡è°ƒç”¨<code>polling()</code>æ–¹æ³•ï¼Œä»¥ç¡®ä¿åœ¨æ‰€éœ€æ¨¡å¼ä¸‹è¿›è¡Œæ“ä½œã€‚ </p><br><p> å®Œæˆäº†æœ€ä½é™åº¦çš„å·¥ä½œã€‚ è¯¥ä»£ç å·²ç»ç›¸å½“æœ‰æ•ˆã€‚ è¿è¡Œå®ƒæ¥è¿è¡Œã€‚ ä¸ºæ­¤ï¼Œè¯·æŒ‰ç»„åˆé”®Ctrl-Shift-F10ã€‚ </p><br><p> å¦‚æœæ‚¨ä¹‹å‰æ²¡æœ‰å°†ç¯å¢ƒå˜é‡ç›´æ¥æ·»åŠ åˆ°æ“ä½œç³»ç»Ÿï¼Œåˆ™åœ¨å¯åŠ¨æ—¶ä¼šå‡ºç°é”™è¯¯æ¶ˆæ¯â€œ No access_tokenâ€ã€‚ è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·å°†PyCharmé…ç½®ä¸ºä½¿ç”¨.envæ–‡ä»¶ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">å±•ç¤ºå¦‚ä½•</b> <div class="spoiler_text"><p> åˆ›å»ºä¸€ä¸ª.envæ–‡æœ¬æ–‡ä»¶ã€‚ åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œå…¶å†…å®¹åº”å¦‚ä¸‹ï¼š </p><br><pre> <code class="plaintext hljs">TT_BOT_API_TOKEN=__</code> </pre> <br><p> ç°åœ¨ï¼Œæ‚¨éœ€è¦å°†å…¶è¿æ¥åˆ°PyCharmä¸­çš„å¯åŠ¨é…ç½®ï¼š </p><br><p> æˆ‘ä»¬é€‰æ‹©è¿è¡Œ/ç¼–è¾‘é…ç½®ï¼Œç„¶ååœ¨EnvFileé€‰é¡¹å¡ä¸Šè¿æ¥æˆ‘ä»¬çš„.envæ–‡ä»¶ï¼š </p><br><p><img src="https://habrastorage.org/webt/2s/6s/ci/2s6scissf6roedcy6r26rjoi6ve.png" alt="å›¾ç‰‡"></p><br><p> ç„¶åå•å‡»â€œåº”ç”¨â€ã€‚ </p></div></div><br><p> å¯åŠ¨æœºå™¨äººåï¼Œæ‚¨å¯ä»¥è½¬åˆ°TamTamï¼Œä¸æˆ‘ä»¬çš„æœºå™¨äººæ‰“å¼€å¯¹è¯æ¡†ï¼Œç„¶åå•å‡»â€œå¼€å§‹â€æŒ‰é’®ã€‚ è¯¥æœºå™¨äººå°†æŠ¥å‘Šæœ‰å…³å…¶éšè—çš„è¶…èƒ½åŠ›çš„ä¿¡æ¯ã€‚ è¿™æ„å‘³ç€è¯¥æœºå™¨äººæ­£åœ¨è¿è¡Œã€‚ å½“æœºå™¨äººåœ¨æ¼”ç¤ºæ¨¡å¼ä¸‹å·¥ä½œæ—¶ï¼Œæœ‰4ä¸ªå‘½ä»¤å¯ç”¨ã€‚ åªéœ€æ£€æŸ¥ä¸€ä¸‹ã€‚ </p><br><p> å°½ç®¡æœºå™¨äººå¯¹è¯¥æœºå™¨äººçš„å†·é™å‘è¡¨äº†æ˜ç¡®çš„æ„è§ï¼Œä½†ä»–è¿˜æ˜¯èƒ†æ€¯åœ°æš—ç¤ºäº†ä¸€ä¸ªäº‹å®ï¼Œå³åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»–ä»€ä¹ˆä¹Ÿåšä¸äº†ã€‚ æ•™å¯¼ä»–å¾æœä¸–ç•Œæ‰€éœ€çš„ä¸€åˆ‡æ˜¯æˆ‘ä»¬çš„ä»»åŠ¡ã€‚ </p><br><h1 id="priyom-soobscheniya-istochnika-i-otpravka-otvetnogo-soobscheniya-s-vnutrennim-predstavleniem-soobscheniya-istochnika"> æ¥æ”¶æºæ¶ˆæ¯å¹¶å‘é€å¸¦æœ‰æºæ¶ˆæ¯å†…éƒ¨è¡¨ç¤ºçš„å“åº”æ¶ˆæ¯ </h1><br><p> æˆ‘ä»¬å°†é˜»æ­¢<code>receive_text()</code>æ–¹æ³•ï¼Œå½“å‘æœºå™¨äººå‘é€æ–‡æœ¬åˆ°èŠå¤©å®¤æ—¶ï¼Œè¯¥æ–¹æ³•çš„æ§åˆ¶æƒå°†è¢«è½¬ç§»ï¼š </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receive_text</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, update)</span></span></span><span class="hljs-function">:</span></span> res = self.msg.send_message(NewMessageBody(<span class="hljs-string"><span class="hljs-string">f' : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{update.message}</span></span></span><span class="hljs-string">'</span></span>, link=update.link), user_id=update.user_id) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bool(res)</code> </pre> <br><p> ä¼ é€’ç»™æ­¤æ–¹æ³•çš„<code>UpdateCmn</code>ç±»çš„<code>update</code>å¯¹è±¡åŒ…å«å„ç§æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯æˆ‘ä»¬ç°åœ¨éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ï¼š </p><br><ul><li>  <code>update.message</code>åŒ…å«æ¶ˆæ¯æœ¬èº«çš„å¯¹è±¡ï¼› </li><li>  <code>update.link</code>æ­¤æ¶ˆæ¯çš„å°±ç»ªå“åº”é“¾æ¥ï¼› </li><li>  <code>update.user_id</code>å‘é€æ¶ˆæ¯çš„ç”¨æˆ·çš„æ ‡è¯†ç¬¦ã€‚ </li></ul><br><p> è¦ä»æ¼«æ¸¸å™¨å‘é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>self.msg</code>å˜é‡ï¼Œè¯¥å˜é‡åŒ…å«<code>MessagesApi</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®ç°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">APIè¯´æ˜</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">messages</a>éƒ¨åˆ†ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æè¿°çš„åŠŸèƒ½</a> ã€‚ è¯¥å¯¹è±¡åŒ…å«æˆ‘ä»¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>send_message()</code></a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>send_message()</code></a>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æä¾›æ¶ˆæ¯çš„å‘é€ã€‚ è‡³å°‘ï¼Œå¿…é¡»å°†æ­¤æ–¹æ³•ä¼ é€’ç»™<code>NewMessageBody</code>ç±»çš„å¯¹è±¡å’Œç›®æ ‡ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºç”¨æˆ·IDï¼‰ã€‚ </p><br><p> åè¿‡æ¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <code>NewMessageBody</code>ç±»çš„å¯¹è±¡æ˜¯é€šè¿‡å‘é€æºæ¶ˆæ¯å¯¹è±¡çš„æ–‡æœ¬è¡¨ç¤ºå½¢å¼ä»¥åŠåˆ°æºæ¶ˆæ¯çš„å“åº”é“¾æ¥æ¥åˆ›å»ºçš„ã€‚ </p><br><p> æˆ‘ä»¬é‡æ–°å¯åŠ¨åƒµå°¸ç¨‹åºï¼Œå¹¶ä¸åƒµå°¸ç¨‹åºè¿›è¡Œå¯¹è¯ï¼Œæ£€æŸ¥è¯¥åƒµå°¸ç¨‹åºå¯¹åŒ…å«æºæ¶ˆæ¯å¯¹è±¡å†…éƒ¨è¡¨ç¤ºçš„ä»»ä½•æ¶ˆæ¯äº§ç”Ÿå“åº”ã€‚ </p><br><p> æ­¤çŠ¶æ€çš„æºä»£ç <a href="">åœ¨æ­¤å¤„</a> ã€‚ </p><br><h1 id="dobavlenie-novoy-komandy-bota-s-parametrom---pokaz-vnutrennego-predstavleniya-soobscheniya-po-ego-identifikatoru"> æ·»åŠ å¸¦æœ‰å‚æ•°çš„æ–°botå‘½ä»¤-é€šè¿‡å…¶æ ‡è¯†ç¬¦æ˜¾ç¤ºæ¶ˆæ¯çš„å†…éƒ¨è¡¨ç¤º </h1><br><p> å¼€å‘æœºå™¨äººæ—¶ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²çŸ¥æ¶ˆæ¯æ ‡è¯†ç¬¦ï¼ˆæ¶ˆæ¯ID-ä¸­ï¼‰æŸ¥çœ‹æ¶ˆæ¯çš„å†…éƒ¨è¡¨ç¤ºã€‚ å°†æ­¤åŠŸèƒ½æ·»åŠ åˆ°æˆ‘ä»¬çš„æœºå™¨äººä¸­ã€‚ ä¸ºæ­¤ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬é‡‡ç”¨ä¸€ç§å•ç‹¬çš„æ–¹æ³•æ¥è¾“å‡ºæœ‰å…³æ¶ˆæ¯å†…éƒ¨è¡¨ç¤ºçš„ä¿¡æ¯çš„åŠŸèƒ½ï¼š </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">view_messages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, update, list_mid, link=None)</span></span></span><span class="hljs-function">:</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> msgs = self.msg.get_messages(message_ids=list_mid) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> msgs: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> msg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> msgs.messages: r = self.msg.send_message(NewMessageBody(<span class="hljs-string"><span class="hljs-string">f' </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{msg.body.mid}</span></span></span><span class="hljs-string">:\n`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{msg}</span></span></span><span class="hljs-string">`'</span></span>[:NewMessageBody.MAX_BODY_LENGTH], link=link), user_id=update.user_id) res = res <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res</code> </pre> <br><p> åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†åˆ—è¡¨ä¼ é€’ç»™ä¸­é—´ã€‚ </p><br><p> è¦è·å–æ¶ˆæ¯å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>self.msg.get_messages</code></a>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›messageså±æ€§ä¸­çš„å¯¹è±¡åˆ—è¡¨ã€‚ </p><br><p> æ­¤å¤–ï¼Œæ¯ä¸ªæ¥æ”¶åˆ°çš„æ¶ˆæ¯çš„æ–‡æœ¬è¡¨ç¤ºå½¢å¼éƒ½ä»¥å•ç‹¬çš„æ¶ˆæ¯å‘é€åˆ°æˆ‘ä»¬çš„å¯¹è¯ä¸­ã€‚ ä¸ºé¿å…é”™è¯¯ï¼Œç”Ÿæˆçš„æ¶ˆæ¯çš„æ–‡æœ¬å°†è¢«æœ€å¤§æ¶ˆæ¯é•¿åº¦çš„å¸¸é‡<code>NewMessageBody.MAX_BODY_LENGTH</code>æˆªæ–­ã€‚ </p><br><p> ç„¶åæ·»åŠ ä¸€ç§å¤„ç†å‘½ä»¤çš„æ–¹æ³•ã€‚  <strong>æˆ‘ä»¬</strong>ç§°ä¹‹ä¸º<strong>vmp</strong> ã€‚ æ‚¨å¯ä»¥å°†ä¸­é—´åˆ—è¡¨ä¼ é€’ç»™å¸¦æœ‰ç©ºæ ¼çš„å‘½ä»¤ã€‚ </p><br><p>  TTBçš„è®¾è®¡ä½¿å‘½ä»¤å¤„ç†ç¨‹åºåº”ä½œä¸ºåä¸º<code>cmd_handler_%s</code>çš„æ–¹æ³•åˆ›å»ºï¼Œå…¶ä¸­ï¼…sæ˜¯å‘½ä»¤çš„åç§°ã€‚ å³ å¯¹äºvmpå‘½ä»¤ï¼Œè¯¥æ–¹æ³•å°†ç§°ä¸º<code>cmd_handler_vmp</code> ã€‚  <code>UpdateCmn</code>ç±»çš„å¯¹è±¡ä¼ é€’ç»™å‘½ä»¤å¤„ç†ç¨‹åºã€‚ æ­¤å¤–ï¼Œå¯¹äºå‘½ä»¤ï¼Œå®ƒå¯èƒ½åŒ…å«<code>cmd_args</code>å±æ€§ï¼Œè¯¥å±æ€§åŒ…å«ä½¿ç”¨å‘½ä»¤è¾“å…¥çš„è¡Œå’Œå•è¯çš„å­—å…¸ </p><br><p> è¯¥ä»£ç å°†å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cmd_handler_vmp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, update)</span></span></span><span class="hljs-function">:</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> update.this_cmd_response: <span class="hljs-comment"><span class="hljs-comment">#    ,       if update.cmd_args: #        list_id = [] parts = update.cmd_args.get('c_parts') or [] if parts: for line in parts: for part in line: list_id.append(str(part)) if list_id: res = self.view_messages(update, list_id, update.link) return bool(res)</span></span></code> </pre> <br><p> æˆ‘ä»¬é‡å¯æœºå™¨äººã€‚ ç°åœ¨ï¼Œå¦‚æœæ‚¨åœ¨æ¼«æ¸¸å™¨å¯¹è¯æ¡†ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š <code>/vmp mid1 mid2</code> ï¼ˆæ‚¨å¯ä»¥å°†å…¶å…ˆå‰çš„æ£€æŸ¥ä½œä¸ºmidï¼‰ï¼Œé‚£ä¹ˆä½œä¸ºå›æŠ¥ï¼Œå¯¹äºæ¯ä¸ªä¼ è¾“çš„midï¼Œæˆ‘ä»¬éƒ½ä¼šå¾—åˆ°ä¸¤æ¡å¸¦æœ‰å†…éƒ¨æ¶ˆæ¯æºæ¶ˆæ¯å¯¹è±¡çš„æ¶ˆæ¯ã€‚ </p><br><p> æ­¤çŠ¶æ€çš„æºä»£ç <a href="">åœ¨æ­¤å¤„</a> ã€‚ </p><br><h1 id="modifikaciya-komandy-bota-dlya-raboty-s-tekstovym-otvetom"> ä¿®æ”¹ç”¨äºå¤„ç†æ–‡æœ¬å“åº”çš„botå‘½ä»¤ </h1><br><p> æ‚¨ä¹Ÿå¯ä»¥å°è¯•ä»å…¶ä»–é¢‘é“/èŠå¤©è½¬å‘æ¶ˆæ¯ã€‚ ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªä¼šæ˜¾ç¤ºä¸æœºå™¨äººå¯¹è¯æ—¶æºæ¶ˆæ¯ä¸­åŒ…å«çš„å†…å®¹ã€‚ ç‰¹åˆ«æ˜¯åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œä¸ä¼šä¿å­˜æŒ‰é’®ä¿¡æ¯ã€‚ </p><br><p> ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŸ¥çœ‹æœ‰å…³åŸå§‹æ¶ˆæ¯çš„ä¿¡æ¯æ€ä¹ˆåŠï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ä»è½¬å‘çš„æ¶ˆæ¯ä¸­æŠ½ä¸­ã€‚ </p><br><p> ä¸ºäº†å®ç°æ­¤æ¨¡å¼ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†<strong>vmp</strong>å‘½ä»¤ï¼Œä»¥ä¾¿åœ¨ä¸å¸¦å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨è¯¥å‘½ä»¤æ—¶ï¼Œå®ƒå¸Œæœ›æ¶ˆæ¯è¢«è½¬å‘ï¼Œç„¶åï¼Œå®ƒä½¿ç”¨å·²å‘é€æ¶ˆæ¯çš„ä¸­é—´å¹¶æ˜¾ç¤ºæœ‰å…³è¯¥æ¶ˆæ¯çš„ä¿¡æ¯ã€‚ </p><br><p>  <strong>ï¼ˆï¼ï¼‰</strong>ä¸ºä½¿æ­¤åŠŸèƒ½æ­£ç¡®è¿è¡Œï¼Œå¿…é¡»æˆäºˆæ¼«æ¸¸å™¨ä»é¢‘é“/èŠå¤©æºè¯»å–çš„æƒé™ã€‚ </p><br><p> æˆ‘ä»¬å°†å‘½ä»¤ä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cmd_handler_vmp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, update)</span></span></span><span class="hljs-function">:</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> update.this_cmd_response: <span class="hljs-comment"><span class="hljs-comment">#    ,       if update.cmd_args: #        list_id = [] parts = update.cmd_args.get('c_parts') or [] if parts: for line in parts: for part in line: list_id.append(str(part)) if list_id: res = self.view_messages(update, list_id, update.link) else: #      self.msg.send_message(NewMessageBody(f' **  /    :'), user_id=update.user_id) update.required_cmd_response = True #       else: #    message = update.message link = message.link #       link #  -   . if link and link.type == MessageLinkType.FORWARD: res = self.view_messages(update, [link.message.mid], update.link) else: #         ,    . self.msg.send_message(NewMessageBody(f'.  **   /. , .'), user_id=update.user_id) return False return bool(res)</span></span></code> </pre> <br><p> ç”±äº ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œç”±äºç¼ºå°‘æ¶ˆæ¯è®¿é—®æƒé™ï¼Œé£é™©ä¼šå¢åŠ ï¼Œç„¶ååœ¨<code>view_messages()</code>æ–¹æ³•ä¸­æ·»åŠ æ£€æŸ¥æ˜¯å¦ç¬¦åˆè¯·æ±‚/æ¥æ”¶çš„æ¶ˆæ¯æ•°é‡çš„æ–¹æ³•ï¼š </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">view_messages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, update, list_mid, link=None)</span></span></span><span class="hljs-function">:</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> msgs = self.msg.get_messages(message_ids=list_mid) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> msgs: <span class="hljs-comment"><span class="hljs-comment">#    mid     if len(msgs.messages) &lt; len(list_mid): self.msg.send_message(NewMessageBody( f'     .    @{self.username}  /  .', link=update.link ), user_id=update.user_id) return False else: for msg in msgs.messages: r = self.msg.send_message(NewMessageBody(f' {msg.body.mid}:\n`{msg}`'[:NewMessageBody.MAX_BODY_LENGTH], link=link), user_id=update.user_id) res = res or r return res</span></span></code> </pre> <br><p> æˆ‘ä»¬é‡æ–°å¯åŠ¨æ¼«æ¸¸å™¨ï¼Œç»™å‡º/ vmpå‘½ä»¤ï¼Œå¹¶ä¸”åœ¨æ˜¾ç¤ºæœ‰å…³è½¬å‘å¿…è¦æ€§çš„æç¤ºåï¼Œæˆ‘ä»¬ä»é¢‘é“/ chatè½¬å‘æ¶ˆæ¯ã€‚ å¦‚æœæ¼«æ¸¸å™¨æœ‰æƒåœ¨æ­¤é¢‘é“/èŠå¤©ä¸­é˜…è¯»æ¶ˆæ¯ï¼Œåˆ™å°†æ˜¾ç¤ºè½¬å‘çš„æ¶ˆæ¯å¯¹è±¡çš„æ–‡æœ¬è¡¨ç¤ºå½¢å¼ã€‚ å¦‚æœæ²¡æœ‰è®¿é—®æƒé™ï¼Œè¯¥æ¼«æ¸¸å™¨å°†æŠ¥å‘Šå¯èƒ½çš„é—®é¢˜ï¼Œå¹¶å°†ç­‰å¾…ä»æ­£ç¡®çš„æºè¿›è¡Œè½¬å‘ã€‚ </p><br><h1 id="nastroyka-svoystv-bota"> è®¾ç½®æœºå™¨äººå±æ€§ </h1><br><p> ç°åœ¨ä»ç„¶å¯ä»¥å¸¦æ¥å…‰æ³½ã€‚ è®©æˆ‘ä»¬å…³é—­<code>about</code>å±æ€§ï¼Œè¯¥å±æ€§è¿”å›æœºå™¨äººå¼€å§‹å·¥ä½œæ—¶æ˜¾ç¤ºçš„æ–‡æœ¬ä»¥åŠ/ startå‘½ä»¤ã€‚ </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta"> @property def about(self): return '       .'</span></span></code> </pre> <br><p> æˆ‘ä»¬å°†é˜»æ­¢<code>get_commands()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›æœºå™¨äººçš„å‘½ä»¤åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨æ˜¾ç¤ºåœ¨æœºå™¨äººçš„å¯¹è¯æ¡†ä¸­ã€‚ </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_commands</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># type: () -&gt; [BotCommand] commands = [ BotCommand('start', ' '), BotCommand('menu', ' '), BotCommand('vmp', '  '), ] return commands</span></span></code> </pre> <br><p> è®©æˆ‘ä»¬å…³é—­main_menu_buttonså±æ€§ï¼Œè¯¥å±æ€§è¿”å›ç”±/ menuå‘½ä»¤è°ƒç”¨çš„ä¸»èœå•ä¸Šçš„æŒ‰é’®åˆ—è¡¨ã€‚ </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main_menu_buttons</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># type: () -&gt; [] buttons = [ #       -  [CallbackButtonCmd(' ', 'start')], #        - .    -  [CallbackButtonCmd('  ', 'vmp', intent=Intent.POSITIVE)], ] return buttons</span></span></code> </pre> <br><p> æˆ‘ä»¬é‡å¯æœºå™¨äººï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚ æ­å–œï¼Œæ‚¨åˆ›å»ºäº†ç¬¬ä¸€ä¸ªæœºå™¨äººï¼Œå°½ç®¡æœ‰ä¸€äº›ç©å…·ï¼Œä½†å®ƒå…·æœ‰éå¸¸å¼ºå¤§çš„åŠŸèƒ½ã€‚ </p><br><p> æ­¤çŠ¶æ€çš„æºä»£ç <a href="">åœ¨æ­¤å¤„</a> ã€‚ </p><br><p> å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>çœ‹åˆ°æ­£åœ¨è¿è¡Œçš„@devhelpbotæœºå™¨äººã€‚ </p><br><p> ç°åœ¨å°±è¿™äº›äº†ã€‚ å¦‚æœæ‚¨å¯¹è¯¥ä¸»é¢˜æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆåœ¨ä»¥ä¸‹æ–‡ç« ä¸­ï¼Œæˆ‘å°†è€ƒè™‘è¯¥æœºå™¨äººçš„è¿›ä¸€æ­¥å¼€å‘ã€‚ ä¾‹å¦‚ï¼Œæ·»åŠ è‡ªå®šä¹‰æŒ‰é’®ï¼ˆå°¤å…¶æ˜¯â€œæ˜¯/å¦â€ï¼‰å¹¶è¿›è¡Œå¤„ç†ï¼Œå‘é€å„ç§ç±»å‹çš„å†…å®¹ï¼ˆæ–‡ä»¶ï¼Œç…§ç‰‡ç­‰ï¼‰ï¼Œåœ¨ç½‘ç»œæ‘˜æœºæ¨¡å¼ä¸‹å·¥ä½œç­‰ã€‚ </p><br><p> é¡ºä¾¿è¯´ä¸€å¥ï¼Œæ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç‰¹æ®ŠèŠå¤©ä¸­</a>å¿«é€Ÿæé—®ã€‚ ç›´æ¥çš„å»ºè®®/æƒ³æ³•åœ¨é‚£é‡Œã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN466373/">https://habr.com/ru/post/zh-CN466373/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN466361/index.html">å¦‚ä½•è·å¾—å“¥è¨å…‹GICSPè¯ä¹¦</a></li>
<li><a href="../zh-CN466363/index.html">luré¥®DevOpsã€‚ ç¬¬ä¸€å¤© Gitï¼ŒCI / CDï¼ŒIaCå’Œç»¿è‰²æé¾™</a></li>
<li><a href="../zh-CN466365/index.html">å¼€å‘å•ç‰‡ç±»Unixæ“ä½œç³»ç»Ÿ-å…¥é—¨ï¼ˆ1ï¼‰</a></li>
<li><a href="../zh-CN466367/index.html">Android APIçº§åˆ«ï¼Œå‘åå’Œå‘å‰å…¼å®¹</a></li>
<li><a href="../zh-CN466371/index.html">ä½¿ç”¨è¶‹åŠ¿æŠ€æœ¯å¯èƒ½é‡åˆ°çš„ä¸‰å¤§é”€å”®å¼‚è®®</a></li>
<li><a href="../zh-CN466375/index.html">åšç‰©é¦†æ•°æ®è‰ºæœ¯ã€‚ KUVT2-å­¦ä¹ å’Œç©ä¹</a></li>
<li><a href="../zh-CN466379/index.html">åœ¨å¾®æ§åˆ¶å™¨ä¸Šè¿è¡Œâ€œæ¡Œé¢â€è½¯ä»¶</a></li>
<li><a href="../zh-CN466381/index.html">æ—¶ä»£LEDç¯æ³¡åœ¨2019å¹´å¦‚ä½•å˜åŒ–</a></li>
<li><a href="../zh-CN466383/index.html">Cryptocurrency Oceanï¼šä½¿ç”¨CoinMarketCapå®¡æŸ¥å‰50ä¸ªé¡¹ç›®</a></li>
<li><a href="../zh-CN466385/index.html">äº†è§£æ¶ˆæ¯ä»£ç†ã€‚ é€šè¿‡ActiveMQå’ŒKafkaå­¦ä¹ æ¶ˆæ¯ä¼ é€’çš„æœºåˆ¶ã€‚ ç¬¬ä¸€ç« </a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>