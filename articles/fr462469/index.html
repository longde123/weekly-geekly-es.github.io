<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦅 🚼 🛌🏼 Quelques considérations pour le calcul simultané en R pour les tâches "Entreprise" 👩🏻‍🔬 😨 👔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'informatique parallèle ou distribuée est en soi une chose très simple. Et l'environnement de développement devrait prendre en charge, et le spéciali...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Quelques considérations pour le calcul simultané en R pour les tâches "Entreprise"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462469/"><p>  L'informatique parallèle ou distribuée est en soi une chose très simple.  Et l'environnement de développement devrait prendre en charge, et le spécialiste DS devrait avoir les compétences nécessaires pour effectuer le calcul parallèle, et la tâche devrait être réduite à une forme qui peut être divisée en parties, le cas échéant.  Mais avec une approche compétente, vous pouvez accélérer considérablement la solution du problème avec le R à un seul thread, si vous avez au moins un processeur multicœur (et presque tout le monde l'a maintenant), ajusté pour la limite d'accélération théorique déterminée <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">par la loi d'Amdal</a> .  Cependant, dans certains cas, même elle peut être contournée. </p><br><p>  Il s'agit d'une continuation des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publications précédentes</a> . <a name="habracut"></a></p><br><h1 id="tipovoy-podhod">  Approche typique </h1><br><p> En règle générale, lorsqu'un analyste (spécialiste DS, développeur ou choisissez un nom approprié pour vous-même) essaie d'accélérer la tâche au sein d'un ordinateur et commence à passer du mode monothread au mode multithread, il le fait de manière standard.  <code>parApply</code> , <code>foreach\%dopar%</code> , etc.  Vous pouvez voir de manière compacte et intelligible, par exemple, ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Parallélisme dans R»</a> .  3 étapes: </p><br><ol><li>  faire du fil <code>core-1</code> </li><li>  courir en utilisant <code>foreach</code> , </li><li>  recueillir les réponses et obtenir le résultat. </li></ol><br><p>  Pour les tâches informatiques typiques qui occupent 100% du CPU et ne nécessitent pas le transfert d'une grande quantité d'informations d'entrée, c'est la bonne approche.  Le point principal qui nécessite une attention est de fournir une journalisation dans les threads afin de pouvoir contrôler le processus.  Sans enregistrement, le vol se déroulera même sans instruments. </p><br><p>  Dans le cas des tâches "d'entreprise", lorsqu'elles sont parallélisées, de nombreuses difficultés méthodologiques supplémentaires se posent qui réduisent considérablement l'effet de l'approche simple ci-dessus: </p><br><ul><li>  fort déséquilibre possible de la charge sur les flux; </li><li>  Les exigences de performances du processeur dans une seule tâche peuvent être déchirées avec seulement quelques rafales pointues; </li><li>  chaque calcul individuel peut nécessiter une quantité importante de mémoire pour l'entrée et la sortie de résultats également de taille considérable; </li><li>  dans le cadre d'une tâche distincte, il peut y avoir un mélange entre l'informatique, l'utilisation du disque et l'interrogation des systèmes externes. </li></ul><br><p>  Il s'agit d'un scénario tout à fait typique lorsque, dans le cadre du processus, vous devez obtenir un travail volumineux en entrée, lire les données du disque, récupérer une grande partie de la base de données, demander des systèmes externes et attendre une réponse de leur part (classique - demande d'API REST), puis renvoyer N au processus parent mégaoctets en conséquence. </p><br><p>  <code>Map-reduce</code> par les utilisateurs, les emplacements, les documents, les adresses IP, les dates, ... (ajoutez-le vous-même).  Dans les cas les plus tristes, l'exécution parallèle peut être plus longue que celle à un seul thread.  Des problèmes de mémoire insuffisante peuvent également survenir.  Tout est-il parti?  Pas du tout. </p><br><h1 id="alternativnyy-put">  Voie alternative </h1><br><p>  Examinons la thèse d'une manière d'améliorer radicalement la situation.  Dans le même temps, nous n'oublions pas que nous vivons dans le cadre d'un zoo plein.  Circuit productif sur <code>*nix</code> , ordinateurs portables DS sur Win * nix \ MacOS, mais il faut qu'il fonctionne uniformément partout. </p><br><ol><li>  Une microtâche: a reçu une entrée utilisateur, a demandé une base de données, a demandé 2 circuits intégrés externes via REST, a téléchargé et analysé un répertoire à partir d'un disque, a effectué un calcul, a vidé le résultat dans disk \ database.  Utilisateurs, par exemple, <code>10^6</code> . </li><li>  Nous passons à l'utilisation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>future</code></a> package et de l'adaptateur universel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>doFuture</code></a> . </li><li>  Si des tâches distinctes sont telles que, dans des tâches distinctes, le temps de processeur est nécessaire en petite quantité (nous attendons des réponses de systèmes tiers), <code>doFuture</code> vous permet de passer du fractionnement des <code>doFuture</code> au fractionnement <strong>en processus séparés</strong> sur une seule ligne (vous pouvez voir les paramètres de démarrage dans <code>*nix</code> dans <code>htop</code> ) . </li><li>  Ces processus peuvent être créés bien plus que des cœurs.  Aucun clinchage ne se produira car les processus individuels sont en mode veille la plupart du temps.  Mais il sera nécessaire de sélectionner expérimentalement le nombre optimal de processus sur la base du cyclogramme d'un processus de traitement typique. </li></ol><br><p>  Résultat - la tâche d'origine est beaucoup plus rapide.  L'accélération peut être encore plus grande que le nombre de cœurs disponibles. <br>  Il n'y a pas de code consciemment, car la tâche principale de la publication est de partager l'approche et une excellente famille de <code>future</code> packages. </p><br><h1 id="ps">  PS </h1><br><p>  Il y a quelques petites nuances qui doivent également être tracées: </p><br><ul><li>  chaque processus consommera de la mémoire, y compris les données reçues et renvoyées.  Une augmentation du nombre de processus multipliera les besoins en RAM disponible. </li><li>  <code>doFuture</code> utilise la «magie» pour déterminer automatiquement la composition des variables et des paquets transférés au processus, mais vous ne devez pas tout laisser aller, il vaut mieux vérifier. </li><li>  dans les processus, le contrôle <code>gc</code> explicite et la suppression explicite de variables à l'aide de <code>rm</code> ne nuiront pas.  Ce n'est pas une panacée et peut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ne pas fonctionner</a> , mais l'indication explicite des objets supprimés sera utile. </li><li>  une fois le calcul terminé, appelez le <code>plan(sequential)</code> .  Cela fermera tous les processus et libérera la mémoire qu'ils occupent. </li><li>  Si vous devez transférer une grande quantité de données vers le processus, pensez à utiliser un stockage externe (disque, base de données).  N'oubliez pas que les descripteurs ne peuvent pas être transférés, la source doit être ouverte à l'intérieur du processus lui-même. </li></ul><br><p>  Publication précédente - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Processus commerciaux dans les entreprises: spéculation et réalité.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">On fait la lumière avec R "</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462469/">https://habr.com/ru/post/fr462469/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462457/index.html">4 sorties de Maltego. Principes de travail et opportunités</a></li>
<li><a href="../fr462459/index.html">Ajout de périphériques ZigBee à Homebridge à l'aide de CC2531</a></li>
<li><a href="../fr462461/index.html">Résultats de l'enquête GOES-17 sur l'accident</a></li>
<li><a href="../fr462465/index.html">Utilisation des lieux natifs d'Apple</a></li>
<li><a href="../fr462467/index.html">Frontend Weekly Digest (29 juillet - 4 août 2019)</a></li>
<li><a href="../fr462471/index.html">Résolution de problèmes avec pwnable.kr 16 - uaf. Utiliser après une vulnérabilité gratuite</a></li>
<li><a href="../fr462473/index.html">Nous développons un environnement pour travailler avec des microservices. Partie 1 Installer Kubernetes HA sur du métal nu (Debian)</a></li>
<li><a href="../fr462475/index.html">Alexey Savvateev: Comment lutter contre la corruption à l'aide des mathématiques (Prix Nobel d'économie pour 2016)</a></li>
<li><a href="../fr462477/index.html">Des scientifiques affirment que l'IA est l'auteur d'un nouveau brevet et tentent de changer la loi sur les brevets</a></li>
<li><a href="../fr462479/index.html">Steam Windows Client Local Privilege Escalation 0day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>