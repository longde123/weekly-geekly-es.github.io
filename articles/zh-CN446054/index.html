<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕍 👋🏾 🗡️ 准备好备份：破坏假日神话 👨‍👧‍👧 🧙🏾 🚦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="备份并不是每一种铁都呼唤的时髦技术。 只需在任何严肃的公司中就可以了。 在我们的银行中备份了数千台服务器-这是一项复杂而有趣的工作，涉及其一些细微之处，以及有关我只想告诉大家的有关备份的典型误解。 

 我在Promsvyazbank处理这个主题已经近20年，其中最近2年。 在练习的一开始，我几乎用...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>准备好备份：破坏假日神话</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/psb/blog/446054/"><img src="https://habrastorage.org/webt/jj/2-/kj/jj2-kjibauvtmhuwadefby7xbfk.jpeg"><br><br> 备份并不是每一种铁都呼唤的时髦技术。 只需在任何严肃的公司中就可以了。 在我们的银行中备份了数千台服务器-这是一项复杂而有趣的工作，涉及其一些细微之处，以及有关我只想告诉大家的有关备份的典型误解。 <br><a name="habracut"></a><br> 我在Promsvyazbank处理这个主题已经近20年，其中最近2年。 在练习的一开始，我几乎用手工复制文件的脚本进行了手动备份。 然后，Windows中出现了方便的工具：Robocopy实用程序用于准备文件，NT Backup用于复制。 然后是时候推出专用软件了，主要是Veritas Backup Exec，现在称为Symantec Backup Exec。 因此，我对备份已经很长时间了。 <br><br> 简而言之，备份是为了保存数据（虚拟机，应用程序，数据库和文件）的副本，以防万一有一定规律性。 任何情况通常以硬件或逻辑故障的形式表现出来，并导致数据丢失。 备份系统的任务是减少信息丢失带来的损失。 硬件故障是，例如，数据库所在的服务器或存储故障。 逻辑-这是部分数据的丢失或更改，包括由于人为因素造成的：无意中删除了表，文件，启动了执行曲线的脚本。 监管机构还要求长时间（例如，长达数年）存储某种类型的信息。 <br><br><img src="https://habrastorage.org/webt/ju/ze/yn/juzeyn9qj0stijccsb-shw1jwem.jpeg"><br><br> 备份最典型的吸引力是还原数据库的已保存副本，以用于部署各种测试系统，开发人员的克隆。 <br><br> 关于备份，有一些典型的误解，是时候该消除了。 这是其中最著名的。 <br><br><h3> 误区1.长期以来，备份只是安全性或存储系统中的一小部分功能。 </h3><br> 备份系统仍然是单独的解决方案类别，并且非常独立。 委托给他们的重要业务。 实际上，它们是数据安全性的最后一道防线。 因此，备份将按照自己的进度和时间表进行工作。 服务器上会生成每日报告；某些事件会触发监视系统。 <br><br><img src="https://habrastorage.org/webt/vz/gw/bq/vzgwbq8w4quthyjdlut440yhxmo.png"><br><br> 另外，访问备份系统的角色模型允许将部分权限委派给目标系统的管理员以管理备份。 <br><br><h3> 误区2：当有RAID时，不再需要备份。 </h3><br><img src="https://habrastorage.org/webt/rb/eg/po/rbegpocgmcagpiqkh12qkmxfzf0.jpeg"><br><br> 毫无疑问，RAID阵列和数据复制是保护信息系统免受硬件故障影响的好方法，如果有备用服务器，则可以在主机发生故障时快速切换到该服务器。 <br><br> 由于系统用户所犯的逻辑错误，因此无法保存冗余和复制。 这是一台延迟记录的备用服务器-是的，它可以帮助您在同步之前检测到错误。 如果错过了这一刻？ 只有按时进行的备份才对您有帮助。 如果您知道数据昨天已更改，则可以从前一天开始还原系统，并从中提取必要的数据。 鉴于逻辑错误是最常见的，良好的旧备份仍然是一种行之有效的必要工具。 <br><br><h3> 神话3.备份是每月一次。 </h3><br> 备份频率是一个可配置的参数，主要取决于备份系统的要求。 很可能会找到几乎从未改变过的数据，并且它并不是特别重要，因为数据丢失对公司而言并不重要。 <br> 实际上，它们可以每月备份一次，甚至更少。 但是，取决于RPO（恢复点目标）指示器，可以更频繁地存储更多的关键数据，该指示器设置可接受的数据丢失。 可以是每周一次，每天一次，甚至每小时几次。 我们有来自DBMS的这些事务日志。 <br><br><img src="https://habrastorage.org/webt/7q/nq/g6/7qnqg6vvg7d_facrc0bqzgk4yg0.png"><br><br> 将系统投入商业运行时，必须批准备份文档，该文档反映了要点，更新过程，用于还原系统的过程，用于存储备份的过程等。 <br><br><h3> 误解四：副本的数量在不断增长，并且完全占据了分配的空间 </h3><br> 备份的存储期限有限。 例如，在一年中存储所有365个每日备份是没有意义的。 通常，允许将每日副本保留2周，然后将其替换为新副本，并且该月初制作的版本仍可以长期存储。 反过来，它也存储了一定的时间-每个副本都有生命周期。 <br><br><img src="https://habrastorage.org/webt/rx/1w/qx/rx1wqxrhi3smk0dwoa7o5eublfy.jpeg"><br><br> 有防止数据丢失的保护措施。 该规则适用：删除备份之前，必须形成以下内容。 因此，如果备份失败（例如由于服务器不可用），则不会删除数据。 不仅要遵守时间范围，而且还要控制集中的份数。 如果系统说应该有两个完整的备份，则将始终有两个，而只有成功记录了新的第三个备份后，才会删除旧的备份。 因此，备份存档占用的卷的增加仅与受保护数据数量的增加相关，而与时间无关。 <br><br><h3> 误区5：备份开始-一切挂起 </h3><br> 最好这样说：如果一切都死了，那么管理员的双手就不会从那里伸出来。 通常，备份性能取决于许多因素。 例如，从备份系统本身的速度来看：磁盘存储，磁带库有多快。 从备份系统服务器的速度来看：它们是否能够处理数据，执行压缩和重复数据删除。 以及客户端和服务器之间的通讯线路速度。 <br><br> 备份可以进入一个或多个线程，具体取决于冗余系统是否支持多线程。 例如，Oracle DBMS允许您根据可用处理器的数量分配多个线程，直到传输速度不受网络带宽的限制。 <br><br> 如果您尝试使用大量线程进行备份，也就是说，有机会使工作系统过载，则实际上它将开始变慢。 因此，选择最佳线程数以提供足够的性能。 如果性能的最低下降是至关重要的，那么当备份不是从战斗服务器而是从克隆服务器（数据库术语中的备用服务器）执行时，还有一个不错的选择。 此过程不会加载主要生产系统。 由于服务器不用于维护，因此可以通过大量线程获取数据。 <br><br> 在大型组织中，将为备份系统创建一个单独的网络，以便备份不会影响销售。 此外，流量可能不会通过网络传输，而是通过SAN传输。 <br><img src="https://habrastorage.org/webt/q3/mz/z_/q3mzz_hn9ubpwzitr7nusd_iyek.jpeg"><br> 我们也会尝试随时间分配负载。 备份大部分是在几个小时之后进行的：晚上，周末。 此外，它们不会同时全部启动。 虚拟机备份是一种特殊情况。 该过程实际上对计算机本身的性能没有影响，因此备份可能在白天被弄脏，而不会在晚上拖延一切。 有很多细微之处，考虑到所有因素，备份不会影响系统性能。 <br><br><h3> 误解6.启动了备份系统-这是容错能力。 </h3><br> 永远不要忘记备份系统是最后一道防线，这意味着它前面必须还有另外五个系统，以确保企业IT基础架构和信息系统的连续性，高可用性和灾难性稳定性。 <br><br> 值得一提的是，备份将还原所有数据并迅速提高服务质量。 从备份到故障时间的数据丢失是可以保证的，新服务器上的数据可以上传几个小时（或者运气好几天）。 因此，在不将所有内容转移到备份的情况下，创建成熟的容错系统是有意义的。 <br><br><h3> 误区7.我设置了一次备份，并检查了备份是否有效。 只剩下看日志了 </h3><br> 这是最有害的神话之一，只有在事件发生时才意识到是假的。 关于成功备份的日志并不能保证一切都按预期进行。 事先检查存储副本的可部署性很重要。 即，在测试环境中启动恢复过程并查看结果。 <br><br><h3> 还有一些关于系统管理员的工作 </h3><br> 在手动模式下，没有人长时间复制数据。 现代IBS几乎可以备份所有内容，您只需要正确配置即可。 如果添加了新服务器，请注册策略：选择要备份的内容，指定存储选项，然后应用计划。 <br><br><img src="https://habrastorage.org/webt/h9/ad/bs/h9adbsv27ou7fri6lntvdmxtbfq.jpeg"><br><br> 同时，由于服务器数量庞大，包括Windows，Linux和Unix上的数据库，邮件系统，虚拟机群集和文件资源，仍有大量工作要做。 支持备份系统的员工不会闲着。 <br><blockquote> 为了纪念这个假期，我谨祝所有管理员神经过敏，动作清晰，存储备份的空间无限！ </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN446054/">https://habr.com/ru/post/zh-CN446054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN446042/index.html">使用六个月后的DJI Mavic 2 Pro</a></li>
<li><a href="../zh-CN446046/index.html">宇宙的膨胀是科学史上最大的谬误</a></li>
<li><a href="../zh-CN446048/index.html">Arduino与经典处理器的结合</a></li>
<li><a href="../zh-CN446050/index.html">扑 钥匙！ 他们是干什么的？</a></li>
<li><a href="../zh-CN446052/index.html">创建产品的声音和语气</a></li>
<li><a href="../zh-CN446056/index.html">与您的网站对话的简单方法</a></li>
<li><a href="../zh-CN446058/index.html">如何构建SDN-八个开源工具</a></li>
<li><a href="../zh-CN446060/index.html">高分子梦想的合成</a></li>
<li><a href="../zh-CN446062/index.html">vadis。 开发者禁止Google Play</a></li>
<li><a href="../zh-CN446064/index.html">专家：软件更新无助于波音滑翔机的联姻</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>