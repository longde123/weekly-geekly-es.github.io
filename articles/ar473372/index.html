<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ซ ๐คฑ๐ฟ ๐๐ฝ ุฅูุดุงุก ุฎุฏูุฉ ุชุชุจุน ููุงููุงุช ุจุณูุทุฉ ุ ุงูุฌุฒุก 1 ๐ โ ๐๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุณุชูุธุฑ ุงูููุงูุฉ ูู ุฃุญุฏ ุงูุฎูุงุฑุงุช ุงูููููุฉ ูุชูููุฐ ุชุชุจุน ุงูููุงููุงุช ุนูู ุงููููุน. ุชูุช ูุชุงุจุฉ ูุฐู ุงููุงุฏุฉ ููุฃุบุฑุงุถ ุงูุชุนููููุฉ ููุท ููุง ุชุญูู ูุฏููุง ูุงุณุชุจุฏุงู ุงูุฎุฏูุงุช ุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฅูุดุงุก ุฎุฏูุฉ ุชุชุจุน ููุงููุงุช ุจุณูุทุฉ ุ ุงูุฌุฒุก 1</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473372/" style=";text-align:right;direction:rtl">  ุณุชูุธุฑ ุงูููุงูุฉ ูู ุฃุญุฏ ุงูุฎูุงุฑุงุช ุงูููููุฉ ูุชูููุฐ ุชุชุจุน ุงูููุงููุงุช ุนูู ุงููููุน.  ุชูุช ูุชุงุจุฉ ูุฐู ุงููุงุฏุฉ ููุฃุบุฑุงุถ ุงูุชุนููููุฉ ููุท ููุง ุชุญูู ูุฏููุง ูุงุณุชุจุฏุงู ุงูุฎุฏูุงุช ุงููุชุฎุตุตุฉ ุงูููุฌูุฏุฉ ุงูุชู ุชููุฑ ุฎุฏูุฉ ุงูุงุชุตุงู ุนู ุจูุนุฏ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุชุทูุจุงุช ุงููุธูููุฉ </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููุฑ ุงูุฎุฏูุฉ ุงููุฏุฑุฉ ุนูู ุงุณุชุจุฏุงู ุงูุฃุฑูุงู (ุงูุฃุฑูุงู) ุญุณุจ ูุตุฏุฑ ุงูุงูุชูุงู ุฅูู ุงููููุน - ุงูุงูุชูุงู ูู ูุญุฑูุงุช ุงูุจุญุซ ุ ูุงูุงูุชูุงู ุฅูู ุงูุฅุนูุงู ุ ูุฑูุฑ ุงูุฑูุงุจุท ูุน ุนูุงูุงุช utm. </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููู ุงูุฎุฏูุฉ ุจุฅุตูุงุญ ุงูุฑูู ุงููุนุฑูุถ ูุฒุงุฆุฑ ุงููููุน ูุนุฑุถ ูุฐุง ุงูุฑูู ูู ุฒูุงุฑุฉ ุฃุฎุฑู. </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ุจุฏุก ููุงููุฉ ุนูู ุงูุฑูู ุงููุนุฑูุถ ุ ูุฌุจ ุฃู ุชุจุฏุฃ ุงูุฎุฏูุฉ ูู ุฅูุดุงุก ุญุฏุซ ูู Google Analytics. </li></ol><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ูููุงูููุง ุนุงูุฉ </h3><br>  ุนูุฏูุง ุชุฐูุจ ุฅูู ุงููููุน ุ ูุฅููุง ูุญุฏุฏ ูุตุฏุฑ ุงูุงูุชูุงู ุ ุซู ูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุฑูู ูุฎุตุต ููุฐุง ุงูุฒุงุฆุฑ.  ุฅุฐุง ุฒุงุฑ ุฒุงุฆุฑ ุงููููุน ูุฃูู ูุฑุฉ ุ ูุณูุฎุตุต ูู ูุนุฑููุง ูุฑูุฏูุง ุ ูุจุนุฏ ุฐูู ูููู ุจุชุนููู ุฑูู ูู ูู ูุฌููุนุฉ ุงูุฃุฑูุงู ุงููุชุนููุฉ ุจูุตุฏุฑ ุงูุฅุญุงูุฉ ูุฐุง.  ูู ุงููุณุชูุจู ุ ุนูุฏูุง ูุนูุฏ ุงูุฒุงุฆุฑ ุฅูู ุงููููุน ุ ูุนุฑุถ ุงูุฑูู ุงููุนูู ูู ูุณุจููุง. <br><br>  ุฃูุฏ ุงูุชุฑููุฒ ุนูู ุณุฌู ุงูููุงููุงุช.  ูุนุฏ ุงุณุชุจุฏุงู ุงูุฑูู ูุชุนูููู ูููุณุชุฎุฏู ูุดููุฉ ูููุฉ ุ ูุงูุดูุก ุงูุฑุฆูุณู ูู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ููุงุฑูุฉ ููุงููุฉ ูุญุฏุฏุฉ ูุงูุฑูู ุงููุฎุตุต ุญุงูููุง ูููุณุชุฎุฏู.  ุฅุฐุง ูุงู ุงูุงุชุตุงู ุงููุงุชูู ุงูุฐู ุชุณุชุฎุฏูู ูุณูุญ ูู ุจุชููู ุชูุงุตูู ุจุงุณุชูุฑุงุฑ ุนู ุงูููุงููุงุช ุงูุฌุงุฑูุฉ ุ ุซู ูุนุฑูุฉ ูุญุธุฉ ุงูุงุชุตุงู ุจุฑูู ูุนูู ูุงูุญุตูู ุนูู ูุนูููุงุช ุญูู ุงูุฑูู ุงูุฐู ุชู ุนุฑุถู ูู ุชูู ุงููุญุธุฉ ุนูู ุงููููุน ุงูุฅููุชุฑููู ูููุณุชุฎุฏู ุ ููู ุงููููู ุจุฏุก ุฅูุดุงุก ุญุฏุซ ูู Google Analytics ูุฑุจุทู ูุน ุฌูููุฑูุฉ ููุฑูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูููู </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ct-server.ru - ุณูุชู ูุถุน ุจุฑูุงูุฌ ูุตู ูุฎุฏูุฉ ุงูููุจ ูุงุจู ููุชูููุฐ ููุง ุ ููุงุนุฏุฉ ุจูุงูุงุช ูุชุฎุฒูู ุฅุนุฏุงุฏุงุช ุงูุฃุฑูุงู ูุชุณุฌูู ุงูุฒูุงุฑ ุ </li><li style=";text-align:right;direction:rtl">  refer-to-site-with-ct-code.ru - ุนูู ูุฐุง ุงููููุน ุ ุณูุญุงูู ุงูุงูุชูุงู ูู ุดุจูุฉ ุงูุจุญุซ ุ </li><li style=";text-align:right;direction:rtl">  site- with-ct-code.ru - ุงููููุน ุงูุฐู ุณูุชู ูุถุน ุงูุจุฑูุงูุฌ ุงููุตู ูุงุณุชุจุฏุงู ุงูุฃุฑูุงู ููู. </li></ol><br><h3 style=";text-align:right;direction:rtl">  ููุจุฏุฃ </h3><br>  ุณูุชู ุชูููุฐ ุงููุซุงู ุฃุฏูุงู ุนูู ุงูุฎุงุฏู ุงููุญูู. <br><br>  ูู ุจุฅูุดุงุก ูููุน ูุถูู <b>ุธุงูุฑู- ูุน-ct-code.ru</b> ุ ูุถุน ููู ููู <b>index.html</b> ุจุงููุญุชููุงุช ุงูุชุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE HTML&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'utf-8'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>CT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://ct-server.ru/script.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//  google id document.cookie = '_ga=GA1.2.1212121212.1212121212; expires=Thu, 18 Dec 2077 12:00:00 UTC; path=/'; </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'calltracking'</span></span></span><span class="hljs-tag">&gt;</span></span>79000000000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ููุง ุชุฑู ูู ุงููุซุงู ุ ูููู ุจุชูุตูู ุจุฑูุงูุฌ ูุตู ุฎุงุฑุฌู <b><a href="">ct-server.ru/script.js</a></b> ุ ูุงูุฐู " <b>ุณูุชูุงุตู</b> " ุจูู <b>site-with-ct-code.ru</b> ู <b>ct-server.ru</b> ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชูุงุนู ูุน ุดุฌุฑุฉ DOM ุงูุฎุงุตุฉ ุจุงููููุน <b>ุงููููุน - ูุน- cct.ru.</b>  ุณูุชู ุงุณุชุจุฏุงู ุงูุฑูู ุจูุนุฑู ุงูุนูุตุฑ - "ุชุชุจุน ุงูุตูุช". <br><br>  ูู ุงูุขู ุจุฅูุดุงุก ูููุน <b>refer-to-site-with-ct-code.ru</b> ุ ูุงูุฐู ุณูุญุชูู ุนูู ุฑุงุจุท ุฅูู site-with-ct-code.ru ููุญุตูู ุนูู ุงููุฏุฑุฉ ุนูู ุงูุชุญูู ูู ุฑูู ุงูุชุนุฑูู ุงูุดุฎุตู ุนูุฏ ุงูุงูุชูุงู ูู ุงููุฑุฌุน. <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE HTML&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'utf-8'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>CT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://site-with-ct-code.ru"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  ุจุนุฏ ุฐูู ุ <b>ุณูุฑูุน</b> ุงููุถูู <b>ct-server.ru</b> ุ ูุงูุฐู ุณูููู ูู ุงููููู ุงูุชุงูู: <br><br>  index.php - ููู ุงูุจุฑูุงูุฌ ุงููุตู ุงููุงุจู ููุชูููุฐ ุงูุฐู ุณูุชููู ุงูุทูุจุงุช ุงููุงุญูุฉ ูู site-with-ct-code.ru ูุงูุชูุงุนู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ <br><br>  script.js - ููู ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฐู ุณูุชู ุชูุตููู ุนูู ุงูููุงูุน ุงูุชู ุณูุชู ูููุง ุฅุฌุฑุงุก ุงุณุชุจุฏุงู ุงูุฃุฑูุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุงุนุฏุฉ ุจูุงูุงุช </h3><br>  ุณูุญุชุงุฌ ูุฅูุดุงุก ุทุจููู.  ูู ุฌุฏูู <b>ct ุ</b> ุณูููู ุจุชุฎุฒูู ุงูุฃุฑูุงู ูุงูุฅุนุฏุงุฏุงุช ูุนุฑุถูุง ุ ูู ุฌุฏูู <b>ุงูุฃุฑูุงู</b> ุณูููู ุจุชุณุฌูู ุนุฑุถ ุงูุฃุฑูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`ct`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`phone`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`refer`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`utm`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`host`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`ga`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`login`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`ct`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`ct`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre><br>  ุดุฑุญ ุตุบูุฑ ููุญููู ุงููุถุงูุฉ: <br><br>  ุฑูู ุงููุงุชู - ุฑูู ุงููุงุชู <br>  ุงูุฑุฌูุน - ูุตุฏุฑ ุงูุงูุชูุงู ุ <br>  utm - ุฑุงุจุท ุฅูู ุงูุตูุญุฉ ุงูุชู ูุฌุจ ุฃู ูุชู ูููุง ุงุณุชุจุฏุงู ุงูุฃุฑูุงู ุ <br>  ูุถูู - ุงููููุน ุงูุฐู ููุฌุฏ ุนููู ุงูุจุฑูุงูุฌ ุงููุตู ูุงุณุชุจุฏุงู ุงูุฃุฑูุงู ุ <br>  ุฑูู ุชุนุฑูู ุนุฏุงุฏ Google Analyticsุ <br>  ุชุณุฌูู ุงูุฏุฎูู - ุชุณุฌูู ุฏุฎูู ุตุงุญุจ ุงูุฑูู. <br><br>  ููุก ููุญุฉ ูุน ุงูุจูุงูุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-string"><span class="hljs-string">`ct`</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>, <span class="hljs-string"><span class="hljs-string">`phone`</span></span>, <span class="hljs-string"><span class="hljs-string">`refer`</span></span>, <span class="hljs-string"><span class="hljs-string">`utm`</span></span>, <span class="hljs-string"><span class="hljs-string">`host`</span></span>, <span class="hljs-string"><span class="hljs-string">`ga`</span></span>, <span class="hljs-string"><span class="hljs-string">`login`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'78000000001'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru/?utm_medium=cpc'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-12345678-1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">'78000000002'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://refer-to-site-with-ct-code.ru/'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru/'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-12345678-1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), (<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">'78000000003'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://refer-to-site-with-ct-code.ru/'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru/'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-12345678-1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), (<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'78000000004'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://refer-to-site-with-ct-code.ru/'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru/'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-12345678-1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), (<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-string"><span class="hljs-string">'78000000005'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru/'</span></span>, <span class="hljs-string"><span class="hljs-string">'http://site-with-ct-code.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-12345678-1'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre><br><img src="https://i.ibb.co/WxKt63X/screen4.png" alt="ุตูุฑุฉ"><br><br>  ุงูุขู ุฅูุดุงุก ููุญุฉ ุงูุฃุฑูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`numbers`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`phone`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`ct_user`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`refer`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`gid`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`page`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`time`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CURRENT_TIMESTAMP</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`numbers`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`numbers`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT;<span class="hljs-keyword"><span class="hljs-keyword">COMMIT</span></span>;</code> </pre><br>  ูู ูุฐู ุงูููุญุฉ ุ ุณูุณุฌู ุฃู ุฒุงุฆุฑ ุ ูุฃู ุนุฏุฏ ููู ุฃู ููุช ูุชู ุนุฑุถู ุนูู ุงููููุน.  ูู ุงููุณุชูุจู ุ ูููู ููุงุฑูุฉ ูุฐู ุงูุจูุงูุงุช ุจุณุฌู ุงูููุงููุงุช ูุจุฏุก ุงูุฅุฌุฑุงุก ุงููุณุชูุฏู - ุฅุฑุณุงู ุญุฏุซ ุฅูู Google Analytics ุ ูุฅูุดุงุก ุนููู ูู CRM ุ ูุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู ุ ุฅูุฎ. <br><br>  ุฑูู ุงููุงุชู <br>  ct_user - ูุนุฑู ุงูุฒุงุฆุฑ ุ <br>  ุงูุฑุฌูุน - ูุตุฏุฑ ุงูุงูุชูุงู ุ <br>  gid - ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ูู Google Analytics <br>  ุงูุตูุญุฉ - ุงูุตูุญุฉ ุงูุชู ูุชู ุนุฑุถ ุงูุฑูู ุนูููุง ุ <br>  ุงูููุช - ุฑูู ููุช ุงูุนุฑุถ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุนุงูุฌ ุทูุจ </h3><br>  ุณูุชู ุงูุชูุงุนู ุจูู ุฎุฏูุฉ ุงูููุจ ct-server.ru ูุงููููุน ุงูุฐู ูุณุชุถูู ุงูุจุฑูุงูุฌ ุงููุตู ูู ุฎูุงู ุทูุจุงุช POST ุนุจุฑ XHR (XMLHttpRequest). <br><br>  <b>ุฏุนูุง</b> ููุชุญ ุงูููู <b>ct-server.ru/index.php ุงูุฐู</b> ุชู ุฅูุดุงุคู ูู ููุช ุณุงุจู ููุถูู ุดูููุง ูุงุณุชูุงู ุงูุจูุงูุงุช ูู ุงููุถูููู ุงููุณููุญ <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูู</a></b> ุ ููู <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุงูุชูุง ููู site-with-ct-code.ru</a></b> ู <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">site-with-ct-code2.ru</a></b> <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุน ูุน -ct-code3.ru</a></b> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_SERVER[<span class="hljs-string"><span class="hljs-string">"HTTP_ORIGIN"</span></span>]) === <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { $host = $_SERVER[<span class="hljs-string"><span class="hljs-string">"HTTP_ORIGIN"</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//   $allowHosts = array("http://site-with-ct-code.ru", "http://site-with-ct-code2.ru", "http://site-with-ct-code3.ru"); if (in_array($host, $allowHosts, true) === true) { header('Access-Control-Allow-Origin: ' . $host); header('Access-Control-Allow-Credentials: true'); header('Access-Control-Allow-Methods: POST'); header('Access-Control-Allow-Headers: Content-Type'); //    post-      } if ($_SERVER["REQUEST_METHOD"] === "OPTIONS") { exit; } } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br>  ููุชุจ ูู ุงูููู ุงููุชุบูุฑุฉ ูุทูุจุงุช POST ุงูุชู ุฌุงุกุช ูู site-with-ct-code.ru <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">$phone = $_POST[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>]; $ct_user = $_POST[<span class="hljs-string"><span class="hljs-string">"ct_user"</span></span>]; $gid = $_POST[<span class="hljs-string"><span class="hljs-string">"gid"</span></span>]; $refer = $_POST[<span class="hljs-string"><span class="hljs-string">"ref"</span></span>]; $page = $_POST[<span class="hljs-string"><span class="hljs-string">"page"</span></span>];</code> </pre><br>  ูุฏู Cook _ga ุงููููุฐุฌ _ga = GA1.2.1212121212.121212121212 ุ ูุณููููู ุฅูู ุงููููุฐุฌ "1212121212.121212121212". <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($gid) { $pos = strpos($gid, <span class="hljs-string"><span class="hljs-string">'.'</span></span>, strpos($gid, <span class="hljs-string"><span class="hljs-string">'.'</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>); $gid = substr($gid, $pos + <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre><br>  ุณูููู ุจุฅูุดุงุก ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุญูุซ ุฃูุดุฃูุง ุฌุฏุงูููุง ูู ูุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs">$conn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> mysqli(<span class="hljs-string"><span class="hljs-string">"localhost"</span></span>, <span class="hljs-string"><span class="hljs-string">"root"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"calltracking"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($conn-&gt;connect_error) { <span class="hljs-keyword"><span class="hljs-keyword">die</span></span>(<span class="hljs-string"><span class="hljs-string">"Connection failed: "</span></span> . $conn-&gt;connect_error); }</code> </pre><br>  ุณูุชู ุงูุชูุงุนู ูุน ุฎุฏูุฉ ุงูููุจ ูู ุฎูุงู ุทุฑููุชูู - <b>get_num_first</b> ู <b>get_num</b> . <br><br>  ูุชู <b>ุงุณุชุฏุนุงุก</b> ุทุฑููุฉ <b>get_num_first</b> ุนูุฏูุง ูุชูุงุนู ุงูุฒุงุฆุฑ ุฃููุงู ูุน ุงููููุน ููุญุตูู ุนูู ุฑูู ูู ุฎูุงู ุงูุงุฎุชูุงุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููููุง ูููุนุงููุฑ - ุงูุจุฑูุฏ ุ ุงููุฑุฌุน ุ utm ุ ุงููุถูู.  ุฅุฐุง ูุงูุช ูุชูุฌุฉ ุงูุชุญุฏูุฏ ุชูุฑุฌุน ูููุฉ ุ ูุฅููุง ูุนุฑุถ ุฑูู ุงููุงุชู. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฑุณู ุงูุญุฏุซ ุฅูู Google Analytics ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุฑูุชูููู ุงูููุงุณ ูู Google</a> .  ุชูุทุจู ููุณ ุงูุทุฑููุฉ ุนูู ุชุชุจุน ุงูุฅุฌุฑุงุกุงุช ุบูุฑ ุงููุชุตูุฉ ุจุงูุฅูุชุฑูุช ุ ูู ุงููุณุชูุจู ูููู ุงุณุชุฎุฏุงููุง ุนูุฏ ููุงุฑูุฉ ุณุฌู ุงูููุงููุงุช ูุณุฌู ุงูุฃุฑูุงู ูู ุฌุฏูู ุงูุฃุฑูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($_POST[<span class="hljs-string"><span class="hljs-string">'method'</span></span>] == <span class="hljs-string"><span class="hljs-string">'get_num_first'</span></span>) { $sql = <span class="hljs-string"><span class="hljs-string">"SELECT * FROM `ct` where `host` = '"</span></span> . $host . <span class="hljs-string"><span class="hljs-string">"' and `refer` = '"</span></span> . $refer . <span class="hljs-string"><span class="hljs-string">"' and `utm` = '"</span></span> . $page . <span class="hljs-string"><span class="hljs-string">"' ORDER BY RAND() LIMIT 1 "</span></span>; $result = $conn-&gt;query($sql); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($result-&gt;num_rows &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($row = $result-&gt;fetch_assoc()) { print_r($row[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>]); $event = file_get_contents(<span class="hljs-string"><span class="hljs-string">'https://www.google-analytics.com/collect?v=1&amp;tid=UA-12345678-1&amp;cid='</span></span> . $gid . <span class="hljs-string"><span class="hljs-string">'&amp;t=event&amp;ec=GetNumber&amp;ea=number&amp;z='</span></span> . $row[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>] . <span class="hljs-string"><span class="hljs-string">''</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//echo "0"; $sql = "SELECT * FROM `ct` where `host` = '" . $host . "' and `refer` = '" . $refer . "' ORDER BY RAND() LIMIT 1 "; $result = $conn-&gt;query($sql); print_r($row["phone"]); $event = file_get_contents('https://www.google-analytics.com/collect?v=1&amp;tid=UA-12345678-1&amp;cid=' . $gid . '&amp;t=event&amp;ec=GetNumber&amp;ea=number&amp;z=' . $row["phone"] . ''); } }</span></span></code> </pre><br>  ุทุฑููุฉ <b>get_num</b> ูุทููุจุฉ <b>ูุชุณุฌูู</b> ุงูุฅุฏุฎุงูุงุช ูู ุฌุฏูู ุงูุฃุฑูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($_POST[<span class="hljs-string"><span class="hljs-string">'method'</span></span>] == <span class="hljs-string"><span class="hljs-string">'get_num'</span></span>) { $sql = <span class="hljs-string"><span class="hljs-string">"INSERT INTO `numbers` (`phone`, `ct_user`, `gid`, `refer`,`page`) VALUES ( '"</span></span> . $phone . <span class="hljs-string"><span class="hljs-string">"', '"</span></span> . $ct_user . <span class="hljs-string"><span class="hljs-string">"', '"</span></span> . $gid . <span class="hljs-string"><span class="hljs-string">"', '"</span></span> . $refer . <span class="hljs-string"><span class="hljs-string">"', '"</span></span> . $page . <span class="hljs-string"><span class="hljs-string">"');"</span></span>; $result = $conn-&gt;query($sql); $sql = <span class="hljs-string"><span class="hljs-string">"SELECT * FROM `numbers` where `ct_user` = '"</span></span> . $ct_user . <span class="hljs-string"><span class="hljs-string">"' ORDER BY `id` DESC LIMIT 1 "</span></span>; $result = $conn-&gt;query($sql); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($result-&gt;num_rows &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($row = $result-&gt;fetch_assoc()) { print_r($row[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>]); $event = file_get_contents(<span class="hljs-string"><span class="hljs-string">'https://www.google-analytics.com/collect?v=1&amp;tid=UA-12345678-1&amp;cid='</span></span> . $gid . <span class="hljs-string"><span class="hljs-string">'&amp;t=event&amp;ec=ShowNumber&amp;ea=number&amp;z='</span></span> . $row[<span class="hljs-string"><span class="hljs-string">"phone"</span></span>] . <span class="hljs-string"><span class="hljs-string">''</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//echo "0"; } } $conn-&gt;close();</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงููุตู ุงุณุชุจุฏุงู ุงูุฑูู </h3><br>  ุจุนุฏ ุฐูู ุ ุณููุชูู ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู <b>ct-server.ru/script.js</b> ุ ูุงูุฐู ูุชุตู ุจู ุนูู site-with-ct-code.ru <br><br>  ููุจุฏุก ุ ุฏุนูุง ููุดุฆ ูุธููุชูู - <b>setcookie</b> ูุฅูุดุงุก ู <b>getcookie</b> ููุฑุงุกุฉ ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท.  ุณูุณุชุฎุฏููุง ูุชุณุฌูู ูุงูุญุตูู ุนูู ูุนุฑู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ูููุณุชุฎุฏู ูุฑูู ุงููุงุชู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  function setcookie(phone, value, expires, path, domain, secure) { document.cookie = phone + "=" + escape(value) + (expires ? "; expires=" + new Date(expires) : "") + (path ? "; path=" + path : "") + (domain ? "; domain=" + domain : "") + (secure ? "; secure" : ""); } //  function getcookie(phone) { var cookie = " " + document.cookie; var search = " " + phone + "="; var setStr = null; var offset = 0; var end = 0; if (cookie.length &gt; 0) { offset = cookie.indexOf(search); if (offset != -1) { offset += search.length; end = cookie.indexOf(";", offset); if (end == -1) { end = cookie.length; } setStr = unescape(cookie.substring(offset, end)); } } return setStr; }</span></span></code> </pre><br>  ุจุนุฏ ุฐูู ุ ูู ุจุฅุถุงูุฉ ูุธููุฉ <b>makeid</b> ูุฅูุดุงุก ูุนุฑู ูููุณุชุฎุฏู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// id  function makeid(length) { var result = ""; var user_id = "abcdefghijklmnopqrstuvwxyz0123456789"; var user_idLength = user_id.length; for (var i = 0; i &lt; length; i++) { result += user_id.charAt(Math.floor(Math.random() * user_idLength)); } return result; }</span></span></code> </pre><br>  ูููู ุงูุขู ุจุฅูุดุงุก ุฏุงูุฉ ูุฅูุดุงุก ูููุงุช ุชุนุฑูู ุงุฑุชุจุงุท ุชุญุชูู ุนูู ูุนุฑู ูุณุชุฎุฏู ูููู ูู 33 ุฑูููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// id  function generateuser_id() { var ct_user_id = makeid(33); setcookie("ct_user", ct_user_id, new Date().getTime() + 60 * 60 * 1000); //  }</span></span></code> </pre><br>  ูุชู ุชุฎุฒูู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท <b>ct_user</b> ุงููุงุชุฌ ููุฏุฉ ุณุงุนุฉ ูุงุญุฏุฉ. <br><br>  ููุชูู ุฅูู ุฅูุดุงุก ุทูุจ ููุญุตูู ุนูู ุฑูู ูู ุฎูุงู ุงูุฃุณููุจ <b>get_num_first</b> .  ุชุชู ูุชุงุจุฉ ุงูุฑูู ุงููุงุชุฌ ูู ct-server.ru ูู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ููุฏุฉ ุณุงุนุฉ ูุงุญุฏุฉ ููููู ุจุฅุฌุฑุงุก ุฃูู ุงุณุชุจุฏุงู ููุฑูู ุนูู ุงูุตูุญุฉ ุจูุนุฑู ุงูุนูุตุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,  ,       id  function getNumberFirstTime() { var method = "get_num_first"; var ct_user = getcookie("ct_user"); var gid = getcookie("_ga"); var ref = document.referrer; var host = window.location.origin; var page = document.location.href; var xhr = new XMLHttpRequest(); var body = "&amp;method=" + encodeURIComponent(method) + "&amp;page=" + encodeURIComponent(page) + "&amp;ct_user=" + encodeURIComponent(ct_user) + "&amp;ref=" + encodeURIComponent(ref) + "&amp;host=" + encodeURIComponent(host) + "&amp;gid=" + encodeURIComponent(gid); xhr.open("POST", "http://ct-server.ru", true); xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); xhr.withCredentials = true; xhr.send(body); xhr.onreadystatechange = function() { //console.log(xhr.responseText); var t = xhr.responseText; document.getElementById("calltracking").innerHTML = t; setcookie("phone", t, new Date().getTime() + 60 * 60 * 1000); //  }; }</span></span></code> </pre><br>  ุณููุดุฆ ูุธููุฉ ูู ุดุฃููุง ุฃู ุชุฑุณู ุจุดูู ุฏูุฑู ุฅูู ุฌุงูุจ ct-server.ru ููู ุงูุฑูู ุงููุนุฑูุถ ุ ูุนุฑู ุงููุณุชุฎุฏู ุ ุนููุงู ุงูุตูุญุฉ ุ ูููุฉ ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท google analytics ุ ูุตุฏุฑ ุงูุฅุญุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNumberPeriodically</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> method = <span class="hljs-string"><span class="hljs-string">"get_num"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ct_user = getcookie(<span class="hljs-string"><span class="hljs-string">"ct_user"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phone = getcookie(<span class="hljs-string"><span class="hljs-string">"phone"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gid = getcookie(<span class="hljs-string"><span class="hljs-string">"_ga"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ref = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.referrer; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.location.href; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> host = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.location.origin; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xhr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body = <span class="hljs-string"><span class="hljs-string">"&amp;method="</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(method) + <span class="hljs-string"><span class="hljs-string">"&amp;page="</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(page) + <span class="hljs-string"><span class="hljs-string">"&amp;ct_user="</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(ct_user) + <span class="hljs-string"><span class="hljs-string">"&amp;ref="</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(ref) + <span class="hljs-string"><span class="hljs-string">"&amp;host="</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(host) + <span class="hljs-string"><span class="hljs-string">"&amp;phone="</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(phone) + <span class="hljs-string"><span class="hljs-string">"&amp;gid="</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(gid); xhr.open(<span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://ct-server.ru"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); xhr.setRequestHeader(<span class="hljs-string"><span class="hljs-string">"Content-Type"</span></span>, <span class="hljs-string"><span class="hljs-string">"application/x-www-form-urlencoded"</span></span>); xhr.withCredentials = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; xhr.send(body); xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//console.log(xhr.responseText); var t = xhr.responseText; //document.getElementById('calltracking').innerHTML = t; }; }</span></span></code> </pre><br>  ูู ุงูููุงูุฉ ุ ูุถูู ูุธููุฉ sendToCalltracking ุ ุงูุชู ุชุชุญูู ูู ูุฌูุฏ ุฑูู ูุงุชู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ููุนุฑู ุงููุณุชุฎุฏู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendToCalltracking</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ggg = getcookie(<span class="hljs-string"><span class="hljs-string">"ct_user"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ccc = getcookie(<span class="hljs-string"><span class="hljs-string">"phone"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gac = getcookie(<span class="hljs-string"><span class="hljs-string">"_ga"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> ggg === <span class="hljs-string"><span class="hljs-string">"undefined"</span></span> || ggg === <span class="hljs-literal"><span class="hljs-literal">null</span></span> || ccc === <span class="hljs-string"><span class="hljs-string">"undefined"</span></span> || ccc === <span class="hljs-literal"><span class="hljs-literal">null</span></span> || ccc.length &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> || ggg.length &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> || ccc === <span class="hljs-string"><span class="hljs-string">""</span></span> || ggg === <span class="hljs-string"><span class="hljs-string">""</span></span> ) { <span class="hljs-comment"><span class="hljs-comment">//console.log('false'); generateuser_id(); getNumberFirstTime(); } else { //console.log('true'); document.getElementById("calltracking").innerHTML = ccc; getNumberPeriodically(); } }</span></span></code> </pre><br>  ูู ุจุฏุงูุฉ ุงูุจุฑูุงูุฌ ุงููุตู ุ ูุณูู ูููุช ุงููุธููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myTimer = setTimeout(sendToCalltracking, <span class="hljs-number"><span class="hljs-number">500</span></span>); <span class="hljs-comment"><span class="hljs-comment">//        setInterval(sendToCalltracking, 1 * 60 * 1000);</span></span></code> </pre><br><img src="https://i.ibb.co/MDhmBRn/screen1.png" alt="ุตูุฑุฉ"><br><br>  ุฅุฐุง ุชู ุญุฐู ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท ุฃุซูุงุก ุงูุนูููุฉ ุงูุชุงููุฉ ุ ูุณุชุนูู ุงููุธููุฉ ูุธููุฉ ุฌุฏูุฏุฉ ููุฒุงุฆุฑ ููููุง ููุงุฎุชูุงุฑ ุงููุณุชูู ุญุณุจ ุงููุถูู ูุงููุตุฏุฑ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุงููููู ูุชุงุจุฉ ุงูููู ุงููุณุชููุฉ ุฅูู ูุชุตูุญ localStorage. <br><br><img src="https://i.ibb.co/4KfXYVD/screen2.png" alt="ุตูุฑุฉ"><br><br>  ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฏูููุฉ ุ ุณูุฑุณู ุงูุจุฑูุงูุฌ ุงููุตู ูููุฉ ุฑูู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ููุนุฑู ุงููุณุชุฎุฏู ูุดูุฑูุง ุฅูู ุงูุตูุญุฉ ุงูุชู ุชู ุชุทุจููู ุนูููุง ุฏูู ุฅุนุงุฏุฉ ุชุญููููุง.  ูู ุงููุนููู ุฃูู ุณูุชู ูุถุน ุงูุจุฑูุงูุฌ ุงููุตู ูู ุฌููุน ุตูุญุงุช ุงููุฌุงู. <br><br><img src="https://i.ibb.co/q0wGMG3/screen3.png" alt="ุตูุฑุฉ"><br><br>  ูู ุงูููุงูุฉ ุงูุชุงููุฉ ุ ุณููุงูุด ุชุทููุฑ ูุงุฌูุฉ ุจุณูุทุฉ ูุฅุถุงูุฉ ุงูุฃุฑูุงู ูุชูููููุง. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar473372/">https://habr.com/ru/post/ar473372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar473358/index.html">ุชุซุจูุช ูุชูููู Nexus Sonatype ุจุงุณุชุฎุฏุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ูููุฌ ุฑูุฒ</a></li>
<li><a href="../ar473362/index.html">ุชุฌุฑุจุฉ GSoC: ููู ูุงู ุงุซูุงู (ุซูุงุซุฉ) ุจุชุญุณูู ููุฏ CRIU ุญููุง</a></li>
<li><a href="../ar473364/index.html">ููุงู goby ุ ูุชุฃุฑุฌุญ: ูุงุฆูุฉ ูุฑุฌุนูุฉ ููุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ ูู ููุณู ุงููุจูุนุงุช</a></li>
<li><a href="../ar473366/index.html">ูุง ูู ูู ุจูุฏู ุงูุชููุฒููู ุงูุฐููุฉ ุจุงููุณุจุฉ ููุ ุฃู ูุง ุงูุฐู ูููู ุญุดุฑู ูู ุงูุชููุฒูููุ</a></li>
<li><a href="../ar473368/index.html">MIRO ุนุจุงุฑุฉ ุนู ููุตุฉ ุฑูุจูุช ุฏุงุฎููุฉ ููุชูุญุฉ. ุงูุฌุฒุก 3 - ูููู ุงูุจุฑูุงูุฌ: ESP8266</a></li>
<li><a href="../ar473374/index.html">ููู ุฏูุฌูุง YouTube Live ูุน Zoom</a></li>
<li><a href="../ar473376/index.html">ุชุณุฑุจุช ุงููุซุงุฆู ุงูููุฌูุฏุฉ ุนูู Windows 10x ุฅูู ุงูุดุจูุฉ - ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู ูุธุงู ุงูุชุดุบูู ููุฃุฌูุฒุฉ ุงูุชู ุจูุง ุดุงุดุชูู</a></li>
<li><a href="../ar473378/index.html">ุงุชูุงููุงุช ุชุฑุฎูุต ุงูุจุฑุงูุฌ ุงูุถุงุฑุฉ</a></li>
<li><a href="../ar473380/index.html">4. ุงุฎุชุจุงุฑ ุชุญููู ููุทุฉ ูุญุต ูุงูุณุชุฑู</a></li>
<li><a href="../ar473384/index.html">ููุฑุฌุงู 3DToday: ููู ูุงู (ุณูููู). ุงูุทุจุงุนุงุช ุงูุฃุนุถุงุก</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>