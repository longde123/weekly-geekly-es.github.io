<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌏 🔽 🌧️ Mess pada awalnya: post-mortem pada kecepatan peluncuran aplikasi iOS 🙏 🙇🏻 🚢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aplikasi modern memiliki banyak persyaratan non-fungsional: ukuran aplikasi, lalu lintas yang dikonsumsi, aksesibilitas untuk penyandang cacat, stabil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mess pada awalnya: post-mortem pada kecepatan peluncuran aplikasi iOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/485200/">  Aplikasi modern memiliki banyak persyaratan non-fungsional: ukuran aplikasi, lalu lintas yang dikonsumsi, aksesibilitas untuk penyandang cacat, stabilitas, startup dan kecepatan operasi.  Aplikasi kami mulai untuk waktu yang sangat lama, puluhan detik.  Hari ini pembaruan dirilis di mana aplikasi iOS mulai berjalan berkali-kali lebih cepat.  Saya memberi tahu Anda bagaimana itu terjadi dan mengapa baru sekarang. <br><br><img src="https://habrastorage.org/webt/rp/l8/mm/rpl8mmcgx6utai5ynvd6ibdpfk8.png"><br><br><a name="habracut"></a><h2>  Itu dimulai untuk waktu yang lama </h2><br>  Aplikasi ini memiliki banyak kode, banyak kelas dan mereka entah bagaimana terhubung.  Untuk mengelola hubungan ini, kami menggunakan <a href="https://github.com/AliSoftware/Dip">Dip</a> (baca: Swinject atau kerangka kerja DI lainnya tanpa pembuatan kode). <br><br>  Ini bekerja seperti ini: pada awal aplikasi, semua dependensi dijejalkan ke dalam "wadah", dan kemudian kelas yang diinginkan diekstraksi darinya dengan semua dependensi diletakkan.  Dibutuhkan waktu untuk memulai, dibutuhkan waktu untuk membuka layar apa pun. <br><br><h4>  Tapi gambar-gambarnya indah </h4><br>  Untuk waktu yang lama, itu bahkan tidak membuat kami takut: kami hanya menggambar screensaver cantik dengan pizza baru dan tidak mengukus.  Screensaver pizza harus dihapus ketika kami mulai di beberapa negara, karena bermacam-macam berbeda di mana-mana.  Gambarannya menjadi tidak begitu menarik, menunggu peluncurannya menjadi lebih membosankan, tetapi kami melewatkan poin ini. <br><br>  Ini adalah percikan kami.  Cantik, tetapi menyembunyikan masalah yang bahkan tidak kami coba pecahkan. <br><br><img src="https://habrastorage.org/webt/yl/tm/-a/yltm-a2vg8jywyaf1fkyfeefnhu.png"><br><br>  Setelah rilis berikutnya, kami mulai memperlambat pergantian kartu di halaman controller.  Profiler waktu menunjukkan bahwa ketergantungan dihapus untuk waktu yang lama ketika layar baru muncul.  Kenapa begitu  Tidak mungkin dimengerti.  Dip sangat sulit untuk di-debug karena panggilan abstrak yang sama.  Kami mencoba memecah satu wadah umum menjadi banyak wadah kecil, tetapi hanya memburuk.  Akibatnya, kami mematikan kartu membalik dan melanjutkan pembaruan Tahun Baru. <br><br>  Ini adalah bagaimana Dip terlihat di profiler.  Di akhir daftar adalah batas tumpukan panggilan tercapai.  Tidak mungkin untuk melakukan sesuatu yang masuk akal dengan ini. <br><br><img src="https://habrastorage.org/webt/xk/5z/ox/xk5zoxxwsagxqktskc7juvmtxpc.png"><br><br><h4>  Terbang ke 4S?  Perbaiki nanti </h4><br>  Pada saat ini, bug "tidak memulai rilis build on 4S" tergeletak di tumpukan, meskipun yang debug diluncurkan.  Tidak ada yang memperhatikan koneksi masalah, menaikkan versi minimum iOS menjadi 10 dan juga menunda perubahan.  Ada beberapa pengguna di 4S, kan? <br><br><h2>  Kami melihat Dip: bukan pada awalnya, tetapi pada kompilasi </h2><br>  Namun, menjadi jelas bahwa Dip perlu dipotong.  Dan apa yang harus diubah?  Sangat tepat waktu, kami menemukan <a href="https://medium.com/makingtuenti/dependency-injection-in-swift-part-1-236fddad144a">Injeksi Ketergantungan dalam</a> artikel <a href="https://medium.com/makingtuenti/dependency-injection-in-swift-part-1-236fddad144a">Swift</a> . <br><br>  Ini hanya bekerja: kita menulis banyak fungsi <code>resolve()</code> dengan tipe yang berbeda (kompiler akan mengetahuinya).  Jadi komunikasi akan berhenti dihitung di awal, dan kompiler bahkan akan dapat mengoptimalkan kode.  Ini juga berguna untuk pengembangan: jika Anda menggambarkan dependensi secara tidak benar, Anda akan mengetahuinya saat startup, dan bukan ketika Anda membuka layar.  Tentu saja, ada masalah: jika fungsi <code>resolve()</code> tidak memahami tipe, maka akan menghasilkan kesalahan yang tidak berguna dengan seratus kandidat: <br><br><img src="https://habrastorage.org/webt/va/9l/-c/va9l-cdpj0cdofdn4x-qafaa3r0.png"><br><br>  Kami melakukan ini kembali pada bulan November.  Ada perubahan SANGAT BANYAK, dan pada saat itu kami meluncurkan produk Combo baru dan bersiap untuk perubahan terbaru sebelum Tahun Baru.  Kode baru muncul di proyek sebelum Tahun Baru, tetapi kami tidak merilisnya sampai Januari karena pembekuan kode liburan.  Untuk ini, selama tiga minggu, kami menggunakan program dalam mode uji, menemukan masalah dan memperbaikinya. <br><br>  Ini adalah bagaimana kode ketergantungan terlihat sekarang.  Kotor tapi berhasil.  450 tempat dengan registrasi dan 1400 tempat dengan ekstraksi. <br><br><img src="https://habrastorage.org/webt/mg/ms/iu/mgmsiu-nrms194srkp013hzvc0m.png"><br><br>  Secara fungsional, kodenya sama, hanya saja cara kerjanya berbeda.  Perbedaan kecepatan terlihat pada semua model.  Di XS - dua kali lebih cepat, dan di SE lihat sendiri: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hP9B8UEC9NA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Jadi kami mempercepat tidak hanya start, tetapi juga pembukaan layar.  Sebelum perubahan, setiap layar hanya membutuhkan 0,3–1 detik pada ketergantungan. <br><br><h2>  Tahun Baru tanpa pizza </h2><br>  Pada bulan Desember, mereka mulai menulis kepada kami bahwa aplikasi macet saat startup, tidak dimulai, dan setelah restart, instal ulang tidak membantu.  Sebelumnya, hanya ada satu alasan untuk ini - migrasi basis data, tetapi kami menyingkirkannya, dan kami tidak melihat keberangkatan baru di Crashlytics.  Apa yang salah? <br><br><img src="https://habrastorage.org/webt/a6/ib/zv/a6ibzvy5rksgcqvtmph8g3tdg7g.png"><br>  Hipotesis: iOS ini menghapus aplikasi jika berjalan untuk waktu yang lama.  Versi ini dikonfirmasi oleh fakta bahwa semua ulasan berasal dari perangkat lama: 5, 5S, 6. Jumlah ulasan tersebut meningkat secara signifikan, karena pizza adalah hari libur, orang sering memesannya untuk Tahun Baru.  Tim khawatir, produk khawatir, tetapi kami meluncurkan versi baru pada bulan Januari. <br><br>  Kami beruntung solusinya ditulis dan hanya bisa diuji.  Dalam skenario lain, berbulan-bulan bisa dihabiskan untuk mencari penyebab dan memperbaikinya. <br><br><hr><br>  Terkadang sulit untuk menyampaikan pentingnya tugas teknis untuk bisnis: tidak ada metrik, pentingnya tidak jelas, bahayanya tidak diprediksi.  Bisnis dapat menyelesaikan masalah dengan berbagai cara: ini adalah cara kami melukis gambar yang indah, bukan mempercepat aplikasi.  Tetapi kinerja penting bagi setiap pengguna.  Ini sangat mempengaruhi: <br><br><ul><li>  Menunggu  Jika aplikasi dimulai untuk waktu yang lama, berapa lama mereka akan makan pizza? </li><li>  Kesenangan menggunakan.  Kenapa bodoh di setiap layar? </li><li>  Dan bahkan untuk stabilitas.  “Aplikasi tidak berjalan !!!  Pengembang, apakah Anda menguji di sana sama sekali? ”(C). </li></ul><br>  Dan memotong Dip, Swinject dan kerangka kerja lain yang bekerja dengan kontainer secara real time jika Anda memiliki proyek besar dan banyak dependensi. <br><blockquote>  Agar tidak ketinggalan artikel berikutnya, berlangganan saluran <a href="https://telegram.im/dodomobile">Dodo Pizza Mobile.</a> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id485200/">https://habr.com/ru/post/id485200/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id485186/index.html">Startup bernilai trilyun dolar atau bagaimana perusahaan Valley paling sukses dilahirkan</a></li>
<li><a href="../id485190/index.html">Andrew Eun "Gairah Belajar Mesin." Terjemahan bab 47-58</a></li>
<li><a href="../id485194/index.html">Pohon segmen: cepat dan mudah</a></li>
<li><a href="../id485196/index.html">AvitoTech On Tour: Pergi dan berhadapan rapat di Kazan</a></li>
<li><a href="../id485198/index.html">Cara lain untuk mengukur kinerja metode aplikasi .NET</a></li>
<li><a href="../id485202/index.html">Sistem Penindasan</a></li>
<li><a href="../id485204/index.html">Kembali ke atas: mengapa kapitalisasi Amazon akan segera melebihi $ 1 triliun</a></li>
<li><a href="../id485206/index.html">Bagaimana Typcript mengecewakan saya dan apakah itu layak?</a></li>
<li><a href="../id485208/index.html">Pembuatan infrastruktur TI yang toleran terhadap kesalahan. Bagian 2. Memasang dan mengonfigurasi kluster oVirt 4.3</a></li>
<li><a href="../id485210/index.html">Penembak zombie sederhana di Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>