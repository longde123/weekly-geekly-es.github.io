<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëèüèæ üïß üë©‚Äçüëß Retenir les vices de l'imp√©ratif üçö üîΩ üõ°Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le paradigme orient√© objet est extr√™mement pratique pour les entreprises: il vous permet de mettre en ≈ìuvre presque n'importe quelle id√©e, offrant des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Retenir les vices de l'imp√©ratif</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/435724/"> Le paradigme orient√© objet est extr√™mement pratique pour les entreprises: il vous permet de mettre en ≈ìuvre presque n'importe quelle id√©e, offrant des performances de produit acceptables.  Dans ce cas, par produit, nous entendons une application iOS, donc, en conclusion, nous proc√©derons du d√©veloppement sp√©cifiquement sur cette plateforme. <br><br>  En fermant les yeux sur les lacunes bien connues de ce paradigme populaire, la liste de ses inconv√©nients comprend son avantage le plus important - la flexibilit√© du d√©veloppement.  Pourquoi est-ce un inconv√©nient?  Il est bien √©vident que la flexibilit√©, en plus de la capacit√© de base √† r√©soudre des probl√®mes commerciaux, permet de le faire de diff√©rentes mani√®res.  Il est vrai qu'il existe une douzaine de fausses approches pour une approche correcte, malgr√© le fait que la t√¢che m√©tier sera correctement r√©solue dans tous les cas, mais avec des diff√©rences de mise en ≈ìuvre, dont l'extensibilit√© et la transparence d√©pendront d√©j√† de l'exactitude de l'approche appliqu√©e. <br><a name="habracut"></a><br>  En tenant compte de la loi de Murphy, la conclusion est qu'en l'absence de restrictions architecturales appropri√©es, il est plus susceptible de suivre la voie du chaos, c'est-√†-dire que la qualit√© du code diminuera rapidement, uniquement parce que le paradigme le permet.  Cet article discutera d'une des limitations architecturales possibles qui aideront √† maintenir l'√©quilibre des forces du bien et du mal, en d'autres termes, la dynamique de la croissance d'entropie dans la base de code du projet.  Il est important que cette dynamique soit directement corr√©l√©e avec le nombre de personnes impliqu√©es dans la r√©daction du code.Par cons√©quent, pour les grands projets, l'exactitude des restrictions s√©lectionn√©es est particuli√®rement critique.  √Ä quoi √ßa sert? <br><br>  Le point est simple.  Commen√ßons par l'axiome suivant - plus il y a de propri√©t√©s dans un objet, plus il est ¬´pire¬ª.  Cette affirmation peut s'expliquer comme suit: avec une augmentation du nombre d'√©tats internes, tous les indicateurs positifs de l'objet - extensibilit√©, modularit√©, transparence, testabilit√© - diminuent.  On peut objecter, en disant que la complexit√© de l'objet et sa fonctionnalit√© sont interconnect√©es et que sans le premier, le second ne se produit pas.  Tout est vrai, mais, suivant le chemin "avec √©tat", la croissance de la complexit√© se produit de fa√ßon exponentielle, malgr√© le fait que la croissance devrait id√©alement √™tre lin√©aire, ou, plus simplement, une nouvelle fonctionnalit√© ne devrait pas compliquer les fonctionnalit√©s existantes. <br><br>  <em>PS Ici, il convient de pr√©ciser que les fonctionnalit√©s sont comprises comme des couches de logique m√©tier s√©mantiquement li√©es, par cons√©quent, la d√©cision est souvent prise de compliquer une classe existante, plut√¥t que d'en cr√©er une nouvelle.</em>  <em>Dans de tels cas, il est difficile de trouver des contradictions avec le premier principe SOLID.</em> <br><br>  Un exemple est un √©cran compl√®tement standard avec une liste d'entit√©s avec un choix.  Certaines propri√©t√©s pourraient √™tre rendues non stables, mais IB nous lie au constructeur par d√©faut du contr√¥leur et cela nous oblige √† ¬´faire de la salet√©¬ª.  L'acc√®s √† ces propri√©t√©s est implicitement obtenu par chaque m√©thode de classe dans le m√™me fichier.  Et le moment le plus d√©sagr√©able est que leur mutabilit√© n'est √©galement couverte par rien, ce qui entra√Æne en quelque sorte des cons√©quences irr√©versibles sous la forme d'une connexion forte et, par cons√©quent, au fait que la fixation de certains d√©fauts provoque l'apparition de nouveaux: <br><br><img src="https://habrastorage.org/webt/dl/ei/9i/dlei9iar48aabzsso89hb2rxcy4.png"><br><br>  Nous pouvons conclure qu'une augmentation lin√©aire de la complexit√© d'un objet avec un √©tat commun est pratiquement inaccessible.  La fonctionnalit√© avec cette approche devient monolithique et difficile √† toute sorte de s√©gr√©gation.  Un bon exemple est l'antipattern Massive-View-Controller, qui est assez courant et d√©montre clairement le r√©sultat de l'absence de toute restriction sur le projet. <br><br><img src="https://habrastorage.org/webt/bs/zk/l9/bszkl9ysxdvs0vdgx5v0obipw34.png"><br><br>  En utilisant UIKit comme exemple, vous pouvez voir exactement comment le style de d√©veloppement imp√©ratif affecte la complexit√© du code et √† quels points le framework ¬´force¬ª la cr√©ation de propri√©t√©s dans les classes. <br>  Le cas le plus simple - le traitement de l‚Äôappui sur un bouton - n‚Äôest normalement effectu√© qu‚Äôen d√©finissant la ¬´m√©thode sale¬ª, c‚Äôest-√†-dire par une fonction qui ne peut rien recevoir d‚Äôutile, vous devrez donc aller √† l‚Äôext√©rieur pour acc√©der aux propri√©t√©s: <br><br><img src="https://habrastorage.org/webt/fw/bt/ir/fwbtir1_7icsnnn9qojg3k8jguc.png"><br><br>  Ainsi, la ¬´fonction¬ª du bouton compliquera tyranniquement le reste de la fonctionnalit√© de l'objet, puisque tous les r√©sidents de la classe auront acc√®s √† ces donn√©es.  En fait, presque tous les contr√¥les de l'interface utilisateur iOS fonctionnent de mani√®re similaire.  Par cons√©quent, il nous vient √† l'esprit d'impl√©menter une sorte de wrapper sur des √©l√©ments d'interface utilisateur, par exemple, qui prend une fermeture, comme un traitement de ¬´l'op√©ration¬ª d'un √©l√©ment particulier, mais la difficult√© est de trouver comment rendre un tel wrapper concis et fiable.  Apr√®s tout, le probl√®me ne se trouve pas seulement dans l'entr√©e, mais aussi dans la sortie des informations, par exemple, la table omnipr√©sente avec les donn√©es fonctionne √©galement "sale" et n'a aucune id√©e des donn√©es qu'elle affiche, vous devez donc l'enregistrer dans un objet: <br><br><img src="https://habrastorage.org/webt/dy/q1/cp/dyq1cpxc1lfggibxweuepzl9dxi.png"><br><br>  Est-ce pratique?  Id√©alement, tout le monde a toujours acc√®s aux donn√©es.  Flexible, rapide, imp√©ratif.  Mais tout cela se transforme au fil du temps, en r√®gle g√©n√©rale, en un ob√©lisque concret pour mille lignes de code et en larmes de ceux qui ont eu la t√¢che de travailler dans cette classe. <br><br>  Pour en revenir aux limitations, le principe suivant peut √™tre form√© √† partir du code ci-dessus - sans propri√©t√©s dans les classes est beaucoup plus propre, et plus rentable avec le support et l'extension.  Id√©alement, la logique de l'objet devrait √™tre dans ses m√©thodes ¬´pures¬ª, qui prennent toutes leurs d√©pendances en entr√©e et ont le r√©sultat de leur activit√© en sortie. <br>  L'id√©e est d'abaisser l'√©tat priv√© de l'objet d'un niveau plus bas.  Autrement dit, si le priv√© ferme des propri√©t√©s du monde ext√©rieur, alors notre t√¢che est d'aller encore plus loin et de renforcer l'encapsulation au niveau des m√©thodes elles-m√™mes.  √Ä premi√®re vue, malgr√© la nature asynchrone de la plate-forme et l'imp√©rativit√© du cadre principal, il peut sembler que toute cette id√©e est non seulement impossible, mais au moins sa mise en ≈ìuvre ne semblera pas naturelle.  Et, tr√®s probablement, il en sera ainsi, mais c'est l'un de ces probl√®mes qui peuvent √™tre r√©solus en introduisant un niveau suppl√©mentaire d'abstractions. <br><br>  Si nous voulons int√©grer toute la logique des classes dans leurs m√©thodes sans recourir aux propri√©t√©s, nous devons travailler en √©troite collaboration avec les fermetures.  IOS dispose d'outils standard pour g√©rer les op√©rations asynchrones, telles que GCD et OperationQueue.  Il semble qu'ils suffiraient, mais lorsque vous essayez de donner vie √† l'id√©e, tout se r√©v√©lera loin d'√™tre aussi rose que vous le souhaiteriez.  Avec cette approche, outre le fait qu'il y a de grandes chances d'obtenir un enfer de rappel, le code lui-m√™me se r√©v√©lera lourd, il aura de nombreux trous logiques et il sera fortement connect√©.  Il est possible qu'un tel code soit encore plus compliqu√© que ce dont nous essayons si vite de nous √©chapper. <br><br>  Si vous regardez autour de vous, vous pouvez voir qu'il existe des moyens beaucoup plus beaux et fonctionnels pour atteindre cet objectif.  La programmation r√©active est utilis√©e depuis longtemps dans le d√©veloppement de logiciels commerciaux et est id√©ale pour le monde frontal asynchrone.  Dans ce cas, nous consid√©rerons une impl√©mentation (plut√¥t r√©ussie) du paradigme r√©actif pour Swift - Rx. <br><br><img src="https://habrastorage.org/webt/bp/ev/lj/bpevljtykqk_lsfouse5d-f6ti8.png"><br><br>  Il propose une entit√© simple appel√©e Observable.  Il s'agit d'une sorte d'abstraction sur le flux d'√©v√©nements, il peut √™tre souscrit, et apr√®s cela, l'abonn√© recevra ces √©v√©nements au fil du temps: <br><br><img src="https://habrastorage.org/webt/pg/dz/nl/pgdznlosgnhek3yqt-gkeu07nsm.png"><br><br>  La fa√ßon la plus simple d'imaginer le d√©roulement des √©v√©nements est de pr√©senter un bouton r√©gulier.  L'√©v√©nement de son fonctionnement est ici un flux, de sorte que tout objet peut s'abonner et recevoir des √©v√©nements de son clic, et surtout, le bouton ne sait rien de ses propres abonn√©s.  De fa√ßon pratique, presque n'importe quelle action peut √™tre transform√©e en une s√©quence de valeurs similaire, ce qui est important, car Observable peut √™tre combin√© les uns avec les autres, car aucun cadre standard ne le permettra. <br><br>  Par exemple, vous pouvez envoyer plusieurs requ√™tes en appuyant sur le bouton (filtrage double tap), attendre que chacune d'elles r√©ponde, puis combiner la r√©ponse avec ce que l'utilisateur a entr√© √† l'√©cran, ex√©cuter une autre requ√™te et passer √† l'√©cran suivant, en lui transf√©rant le r√©sultat, lorsque ce Rx permettra de g√©rer succinctement les erreurs et de terminer cette cha√Æne (annuler les requ√™tes) en sortant de l'√©cran, et toute cette logique prendra deux douzaines de lignes de code tap√©: <br><br><img src="https://habrastorage.org/webt/8u/gp/qa/8ugpqajg3s9h23iwhafig7tyco0.png"><br><br>  <em>Il vaut la peine de parler de la seule propri√©t√© de disposeBag.</em>  <em>Comme le montrent les captures d'√©cran, chaque abonnement y est plac√©, ce qui est n√©cessaire pour contr√¥ler leur dur√©e de vie.</em>  <em>Autrement dit, les abonnements sont valables tant que le ¬´sac¬ª vit dans lequel ils ont √©t√© plac√©s, dans ce cas, pendant que le contr√¥leur vit.</em> <br><br>  En plus de la compacit√©, il est difficile de faire une erreur dans le code ci-dessus, car chaque fermeture renvoie quelque chose et ne contient pas d'effets secondaires.  C'est le pouvoir que nous recherchions. <br><br>  Vous pouvez remarquer un autre point important: comme la classe n'a pas de propri√©t√©s, il n'est pas n√©cessaire d'√©crire [self faible], ce qui affecte positivement la lisibilit√© du code.  Toutes les fonctions peuvent et mieux √™tre d√©finies localement dans la m√©thode o√π elles sont utilis√©es, ou supprim√©es dans des classes distinctes.  Par ailleurs, les liens vers les d√©pendances (ViewModel, Presenter, etc.) dans ce cas peuvent √™tre pass√©s comme argument √† la m√©thode du contr√¥leur, dans ce cas, il n'est pas n√©cessaire de les enregistrer dans les propri√©t√©s.  C'est correct. <br><br>  Apr√®s examen, il est temps d'utiliser Observable pour simplifier le d√©veloppement.  Comment exactement?  Revenons √† l'id√©e de m√©thodes ¬´propres¬ª et essayons d'impl√©menter la logique d'un petit √©cran dans sa seule m√©thode. Pour plus de clart√©, nous choisirons la m√©thode pour terminer le chargement de la vue (viewDidLoad).  Naturellement, si l'√©cran est compos√© en IB, nous devrons cr√©er des propri√©t√©s pour les points de vente, mais ce n'est pas effrayant, car les √©l√©ments eux-m√™mes ne repr√©sentent pas la logique m√©tier, donc ils n'affecteront pas grandement la complexit√© de l'√©cran.  Mais si l'√©cran est compos√© de code, vous pouvez vous passer de propri√©t√©s (√† l'exception du disposeBag), en cr√©ant des √©l√©ments dans notre m√©thode et en les utilisant directement.  Qu'en est-il de l'imp√©rativit√© des √©l√©ments UIKit d√©crits pr√©c√©demment?  Rx, en plus de l'approche elle-m√™me, fournit des wrappers r√©actifs pour les composants d'interface utilisateur standard, de sorte que dans la plupart des cas, vous pouvez obtenir la s√©quence d'√©v√©nements n√©cessaire sur place.  Ou, inversement, liez l'Observable existant √†, par exemple, une table - apportez-lui une demande afin qu'il mette √† jour son contenu imm√©diatement apr√®s son ach√®vement: <br><br><img src="https://habrastorage.org/webt/xd/dk/w1/xddkw1csdfuq5xblt_scy4bznf0.png"><br><br>  <em>La liaison aux collections est assez flexible, mais par d√©faut, elle ne fonctionne que via reloadData.</em>  <em>Pour les mises √† jour ponctuelles, il existe une merveilleuse biblioth√®que d√©bogu√©e du m√™me auteur - RxDataSources.</em>  <em>Avec lui, vous pouvez oublier les plantages lors des mises √† jour par lots.</em> <br><br>  Que se passera-t-il ensuite?  Une m√©thode √† √©cran unique se d√©veloppera et dans un cas assez compliqu√©, elle deviendra difficile √† maintenir.  Et lorsque cela se produit, il devient soudain clair que cette m√©thode ne d√©pend pas d'autre chose que d'elle-m√™me, et l'approche r√©active a divis√© le code en blocs logiques qui peuvent facilement √™tre plac√©s dans des objets s√©par√©s en les concevant de mani√®re similaire.  Mais cette fois, les m√©thodes prendront d√©j√† certaines d√©pendances √† l'√©cran et retourneront un r√©sultat.  Le point positif est que la signature dans ce cas est obtenue le plus possible, on peut voir que la fonction n√©cessite son travail et quel est son r√©sultat.  Cela peut ressembler √† ceci: <br><br><img src="https://habrastorage.org/webt/-k/3m/sx/-k3msxloljkxb4dy9mvs_uslxes.png"><br><br>  Des structures distinctes aident √† garder l'en-t√™te de la m√©thode lisible et net, car il peut y avoir de nombreuses d√©pendances. <br><br>  Il est important de comprendre que la m√©thode n'a pas √† √™tre la seule dans tout l'objet, l'essence de leur ind√©pendance les uns par rapport aux autres.  Gr√¢ce √† Rx, leurs entr√©es et sorties peuvent √™tre asynchrones et repr√©senter un ou plusieurs observables, fournissant une autre dimension pour la manipulation des donn√©es. <br><br>  Cette approche d√©lie vos mains et vous permet d'impl√©menter des √©crans de presque n'importe quelle complexit√©, tout en maintenant leur code explicite et faiblement coupl√©. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr435724/">https://habr.com/ru/post/fr435724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr435712/index.html">Procter & Gamble lance une imprimante pour la peau anti-√¢ge</a></li>
<li><a href="../fr435714/index.html">Les d√©veloppeurs ukrainiens ont eu acc√®s aux fichiers de toutes les cam√©ras Ring du monde</a></li>
<li><a href="../fr435718/index.html">Nous pompons Angular NGSW en utilisant une logique personnalis√©e dans Service Worker</a></li>
<li><a href="../fr435720/index.html">D√©veloppement Adblock Radio</a></li>
<li><a href="../fr435722/index.html">NB-IoT, Internet des objets √† bande √©troite. Modes d'√©conomie d'√©nergie et commandes de contr√¥le</a></li>
<li><a href="../fr435728/index.html">[Vendredi] Conte sur la fa√ßon dont l'informatique a essay√© de vendre du bois de chauffage ou les coulisses d'un appel</a></li>
<li><a href="../fr435730/index.html">La coquille s'est fissur√©e</a></li>
<li><a href="../fr435732/index.html">Vendredi JS: une quine qui joue au tic-tac-toe</a></li>
<li><a href="../fr435734/index.html">Comment ne pas se laisser berner en faisant de la physique</a></li>
<li><a href="../fr435738/index.html">Technique de projet de bricolage. Premi√®re partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>