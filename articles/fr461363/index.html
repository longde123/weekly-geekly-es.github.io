<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê™ üë®üèΩ‚Äç‚öïÔ∏è üì¥ Bouilloire et assistants vocaux. Le d√©but d'une grande amiti√© üëâüèø üßëüèº‚Äçü§ù‚Äçüßëüèª üòú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qu'avons-nous pour une p√©riode de temps donn√©e dans le monde de l' AG ? Fait connu: chacune des grandes entreprises informatiques a son propre outil p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bouilloire et assistants vocaux. Le d√©but d'une grande amiti√©</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/readyforsky/blog/461363/"><img src="https://habrastorage.org/webt/lk/a3/rh/lka3rhuphajcjx25rj3w-eqv_1g.png"><br><br>  Qu'avons-nous pour une p√©riode de temps donn√©e dans le monde de l' <abbr title="Assistant vocal">AG</abbr> ?  Fait connu: chacune des grandes entreprises informatiques a son propre outil pour travailler avec les maisons intelligentes.  Et chaque fournisseur fournit sa propre API pour ceux qui s'int√©ressent √† l'int√©gration.  Et au stade initial, il paie m√™me les d√©veloppeurs pour de nouvelles comp√©tences (actions, comp√©tences, etc. - conform√©ment √† la terminologie du fournisseur). <br><br>  Le service le plus pratique et le plus pratique √† ce jour, selon nos experts, est Amazon Alexa.  Elle a plus de possibilit√©s de formation d√©taill√©e que Google Assistant, Yandex "Alice", Mail.Ru "Maroussia", Tinkoff "Oleg" et autres.  Pour Alexa, un appareil est une entit√© virtuelle param√©trique, ce qui permet de personnaliser les comp√©tences pour chaque appareil individuellement.  Par exemple, en plus de la temp√©rature de l'eau, vous pouvez sp√©cifier les consommables que l'assistant proposera d'acheter sur Amazon.  Mais, malheureusement, Alexa ne prend actuellement pas en charge la langue russe et ne fonctionne pas sur le territoire de la F√©d√©ration de Russie, donc cette AG est inutile pour un utilisateur russe.  Chez Google et Yandex, l'assistant est plus ¬´naturel¬ª - il re√ßoit et r√©pond aux commandes dans un langage ¬´humain¬ª, peut dialoguer avec l'utilisateur, ce qui rend cette AG plus agr√©able √† utiliser.  Le seul inconv√©nient s√©rieux de Google √©tait que ses actions ne prenaient pas en charge la langue russe.  Cependant, √† partir du 24 juillet 2019, Google Actions fonctionnait sur les ¬´t√©l√©phones¬ª en russe, donc les coll√®gues ont √©limin√© cet inconv√©nient. <br><br>  C'est bien.  Et si nous voulons int√©grer un appareil avec plusieurs GA? <br><a name="habracut"></a><br>  C'est possible.  Utilisation de l'appareil. <br><br>  Un p√©riph√©rique est une entit√© avec son comportement dans le syst√®me.  Il s'agit d'un principe commun √† tous les fournisseurs.  Et ici, cela vaut la peine de s'arr√™ter, ici tout le plaisir commence.  Les diff√©rences r√©sident dans les approches.  Par exemple, Google et Yandex tentent de normaliser la gestion de la technologie.  Autrement dit, il est maintenant n√©cessaire d'√©crire du code non pas pour chaque appareil individuel, mais un programme pour toute la s√©rie suffit.  Et m√™me si le firmware change, vous devrez changer le code une fois, ce qui est tr√®s pratique.  Notre entreprise a d√©j√† une int√©gration avec Google, Yandex, Amazon.  La technique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©coute Alice</a> , Alex et l'assistant de Google.  Plus t√¥t, nous l'avons montr√© √† l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">int√©rieur des assistants vocaux</a> . <br><br><h3>  <b>D'o√π venaient les assistants vocaux?</b> </h3><br>  L'un des syst√®mes de reconnaissance vocale les plus avanc√©s au monde appartient √† Google, son histoire a commenc√© en 2002.  La soci√©t√© a publi√© Voice Search, sur la base de laquelle l'Assistant Google a √©t√© d√©velopp√©.  En 2016, il a √©t√© pr√©sent√© lors de la pr√©sentation de Google I / O.  Google Home est l'une des ¬´surfaces¬ª de Google Assistant.  Maintenant, la pr√©cision de la reconnaissance vocale de leur GA est estim√©e √† 95% et presque inf√©rieure aux personnes. <br><br>  L'assistant vocal d'Alexa a √©t√© introduit par Amazon en 2014. La colonne intelligente Amazon Echo, qui peut contr√¥ler un grand nombre d'appareils dans une maison intelligente, y a √©galement √©t√© pr√©sent√©e. <br><br>  Yandex SpeechKit - Syst√®me de reconnaissance vocale Yandex.  Il est utilis√© dans plus de 400 applications.  La soci√©t√© int√®gre √©galement son GA - Alice - dans les navigateurs et les appareils √©lectroniques.  La soci√©t√© russe a pr√©sent√© son AG en 2017, et d√©j√† √† l'automne 2018, Yandex a lanc√© sa colonne intelligente Yandex.Station. <br><br><h3>  <b>Nos experts disent que d'ici la cent cinquante-sixi√®me ann√©e ...</b> </h3><br>  Nous plaisantons, jusqu'√† pr√©sent seulement d'ici 2020.  Un peu de statistiques: <br><br><ol><li>  En 2017, environ 33 millions d'appareils √† commande vocale ont √©t√© enregistr√©s dans le monde; </li><li>  Les experts occidentaux ont qualifi√© la recherche vocale de l'une des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">3 principales tendances SEO en 2017</a> ; </li><li>  Pour 2018, Google Assistant fonctionne sur 400 millions d'appareils dans le monde.  Et ce chiffre ne fait que cro√Ætre; </li><li>  Selon le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Global Web Index</a> , 25% des personnes √¢g√©es de 16 √† 24 ans utilisent la recherche vocale √† partir d'appareils mobiles; </li><li>  Selon les pr√©visions de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comscore</a> , d'ici 2020, 50% des demandes seront faites par la voix; </li><li>  Selon les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">recherches de WalkerSands en 2018</a> , un utilisateur sur cinq d'un haut-parleur intelligent d'Amazon a achet√© avec lui et un tiers pr√©voyait de le faire l'ann√©e prochaine; </li><li>  Selon une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tude de PWC</a> , 71% des utilisateurs qui recherchent sur le Web pr√©f√©reraient taper des voix plut√¥t que manuellement. </li></ol><br>  Comme vous pouvez le comprendre, la tendance √† utiliser GA augmente, ce qui sugg√®re qu'il est temps de prendre un fournisseur et de lancer votre propre assistant.  Pour nous, la cl√© est la capacit√© de contr√¥ler les appareils intelligents, qui distinguera SkyFriend des autres assistants. <br><br><h3>  <b>Et int√©grons!</b> </h3><br>  MAIS notre t√¢che est √©galement de travailler avec l'approche du fournisseur existant et de l'adapter davantage √† notre protocole de contr√¥le technologique sp√©cifique.  Nous suivons le chemin de la normalisation, de l'application pratique, percevant l'appareil comme un ensemble de comp√©tences: chaque bouilloire sait comment faire bouillir l'eau (comp√©tence), elle sait aussi la chauffer √† la temp√©rature souhait√©e (comp√©tence), maintenir cette temp√©rature pendant un temps donn√©, etc. Par exemple, La commande ¬´On / Off¬ª est standard pour tout appareil.  La t√¢che consiste √† transf√©rer cette commande du service vers notre protocole.  Quelle est la particularit√© de notre protocole?  Il connecte diff√©rents assistants vocaux (maintenant trois, √† l'avenir - tous de grande taille) et leur permet √† tous de travailler avec des appareils, y compris en m√™me temps.  La communication est une √† plusieurs.  La seule question est de savoir comment adapterons-nous exactement notre protocole √† toutes les approches? <br><br>  Voyons voir.  Les projets distincts pour chaque AG sont: <br><br><ul><li>  Augmentation du personnel </li><li>  Beaucoup de code et d'h√©ritage √† l'avenir; </li><li>  Incapacit√© √† √©voluer. </li></ul><br>  Lorsque de nouveaux assistants apparaissent sur le march√©, il sera n√©cessaire d'augmenter proportionnellement le personnel et le volume de travail.  Il est logique que nous ayons refus√© cette option.  Cependant, malgr√© les diff√©rentes approches pour chaque assistant vocal, ils peuvent trouver quelque chose en commun - ce avec quoi ils travaillent essentiellement est la comp√©tence, le trait, la comp√©tence.  Les noms sont diff√©rents, mais l'essence est la m√™me.  Ainsi, la t√¢che est de d√©velopper votre ¬´comp√©tence¬ª, qui sera per√ßue par les assistants.  √Ä l'avenir, vous n'aurez qu'√† ajouter de nouveaux fournisseurs, ce qui r√©sout le probl√®me de la mise √† l'√©chelle.  Nous garderons √©galement √† l'esprit qu'une grande partie de notre √©quipement utilise des v√©hicules BLE, ce qui dicte les caract√©ristiques architecturales. <br><br>  Nous avons d√©velopp√© deux microservices qui fonctionnent par paires. <br><br><img src="https://habrastorage.org/webt/zw/lo/zf/zwlozfjr3y51a2mc_rqpemr-biq.png"><br><br>  Le premier est la couche de commande.  Sa t√¢che: effectuer la conversion (mapping) entre l'API du vendeur et notre protocole.  Cela fonctionne comme ceci: une demande sp√©cifique pour un assistant cartographie nos comp√©tences - cartographie pour un protocole de p√©riph√©rique.  Avec cette approche, il est facile d'ajouter de nouvelles comp√©tences: la cartographie est effectu√©e pour le protocole R4S final - le code est transf√©r√© au deuxi√®me service.  Le dernier √©l√©ment peut √™tre exclu lors de la transmission d'une commande via Wi-Fi. <br><br>  La deuxi√®me couche de service ou de transport est utilis√©e pour: <br><br><ol><li>  √âtablir une session avec une passerelle client; </li><li>  Augmenter et maintenir une connexion Bluetooth; </li><li>  R√©ception / transmission des commandes du premier service. </li></ol><br>  Ce service fait partie d'une entit√© de niveau sup√©rieur: appareil BT plus passerelle-interm√©diaire, fonctionnant sur le principe: r√©ception de commandes via Internet - envoi via BT.  Les connexions sans fil peuvent ne pas √™tre fiables.  Pourquoi?  Le canal radio peut √™tre limit√© par des param√®tres environnementaux - murs de b√©ton √©pais, etc. ... En cons√©quence, les appareils peuvent ¬´tomber¬ª de mani√®re √©l√©mentaire, donc maintenir une connexion stable devient une t√¢che importante pour la couche de transport. <br><br><img src="https://habrastorage.org/webt/fq/ui/ti/fquiti2wm64hfky4de4zy7hd9qe.jpeg"><br><br>  La politique de connexion peut √™tre diff√©rente: <br><br>  1. Support de communication continu. <br><br>  <b>Avantages</b> : retard minimum dans l'ex√©cution des commandes GA. <br>  <b>Inconv√©nients</b> : cher pour le trafic et la consommation d'√©nergie;  il y a une limite sur le nombre d'appareils connect√©s simultan√©ment (dans cette g√©n√©ration Bluetooth 4.0 / 4.2 - six, dans Bluetooth 5.0 jusqu'√† vingt).  Cela n√©cessitera √©galement des ressources de serveur suppl√©mentaires. <br><br>  2. Connexion sur demande. <br><br>  <b>Avantages</b> : la connexion ne n√©cessite presque pas de trafic ni de frais. <br>  <b>Inconv√©nients</b> : un retard important dans l'ex√©cution des commandes plus l'ex√©cution elle-m√™me n'est pas garanti (la connexion peut "tomber" ou √©chouer).  Avec cette approche, nous ne cadrons pas en attendant que l'AG r√©ponde.  La session s'est termin√©e et la fin. <br><br>  La question demeure √©galement - la commande a √©t√© re√ßue et √©labor√©e, MAIS quoi faire de la connexion: d√©connecter ou continuer.  Notez que c'est exactement de la m√™me mani√®re qu'Apple HomeKit fonctionne lorsque vous travaillez avec des terminaux BLE (via Apple TV ou iPad comme passerelle).  Cela ressemble √† ceci - la premi√®re fois que vous essayez d'envoyer une commande, le processus prend un temps assez long (ou mieux pour √™tre perceptible par l'utilisateur), mais les commandes suivantes sont ex√©cut√©es presque instantan√©ment.  Une fois le travail de l'utilisateur avec l'appareil termin√©, le syst√®me d'exploitation ¬´configure¬ª la session apr√®s un certain temps, puis le processus est r√©p√©t√© comme nouveau. <br><br><h3>  <b>Mais ce n'est pas tout.</b> </h3><br>  <b>Difficult√© 1</b> .  Routage de passerelle. <br><br><img src="https://habrastorage.org/webt/dp/tp/s9/dptps9c65buopbiskgfiki3bhpi.png"><br><br>  S'il y a plusieurs passerelles dans la pi√®ce, la question se pose - √† laquelle se connecter et √† quelle passerelle √† quel appareil est connect√©.  Maintenant, tout fonctionne selon le principe - celui qui r√©ussit est connect√©.  L'impl√©mentation n'est pas toujours r√©ussie, car la passerelle la plus proche (et donc capable de se connecter de mani√®re plus fiable) peut √™tre occup√©e dans l'intervalle de temps utilis√©.  Ensuite, celui qui est libre et capable est connect√©.  Cela se produit sans √©gard √† la qualit√© de la communication.  Par cons√©quent, il est important de construire une hi√©rarchie et un sch√©ma de travail afin que l'utilisateur soit le plus √† l'aise possible. <br><br>  <b>Difficult√© 2</b> .  Beaucoup d'utilisateurs. <br><br>  Il s'agit d'une situation o√π plusieurs utilisateurs peuvent utiliser une passerelle ou un appareil en m√™me temps.  Bien s√ªr avec un haut niveau de s√©curit√©.  Par exemple, depuis diff√©rentes AG ou depuis des AG et des t√©l√©phones d'utilisateurs.  Un essaim de questions: quel appareil allumer en premier, si les commandes GA se contredisent, quelle commande est une priorit√© et doit √™tre ex√©cut√©e plus t√¥t, etc. En partie, notre probl√®me est r√©solu par le service Redis - une base de donn√©es dans laquelle sont stock√©es les sessions utilisateur, les statuts de l'appareil et l'√©metteur-r√©cepteur commandes et bus de donn√©es de desserte entre les premier et second services.  Mais c'est l√† que la solution au probl√®me s'arr√™te. <br><br>  Qu'avons-nous fait?  Nous avons cr√©√© SkyFriend.  Il s'agit de notre propre d√©veloppement, un assistant vocal pour la gestion de la technologie, qui prendra √©galement en charge la langue russe.  Une caract√©ristique cl√© de notre GA est qu'il est affin√© pour une interaction directe avec la technologie Smart Ready for Sky sans instruments suppl√©mentaires.  L'appareil est deux en un - l'assistant est combin√© avec une passerelle qui recevra les informations soit via des commandes que l'utilisateur envoie depuis son smartphone, soit directement par la voix.  De plus, SkyFriend poss√®de des fonctionnalit√©s suppl√©mentaires qui lui permettront de rivaliser avec celles qui existent d√©j√†.  Il peut activer des rappels sur demande, il peut d√©terminer la g√©olocalisation de l'utilisateur, rechercher des informations sur Wikip√©dia, recommander des films, faire des toasts, lire des nouvelles, r√©pondre √† des questions, dire l'heure et la m√©t√©o dans n'importe quelle ville du monde, jouer √† Myst√®res et villes avec l'utilisateur faire des blagues.  L'achat de billets et la commande d'un taxi sont encore au stade du test alpha.  Et ce n'est qu'une partie de la fonctionnalit√©. <br><br>  Plus r√©cemment, Google a annonc√© le travail de sa colonne sur une architecture similaire - le script d'ex√©cution est charg√© directement dans la colonne Google Home.  Gagner du c√¥t√© de l'utilisateur est de r√©duire le temps n√©cessaire √† l'ex√©cution des commandes.  Vous n'avez pas besoin de l'envoyer au serveur du fabricant de l'√©quipement; il vole directement vers la colonne du serveur Google via le m√™me canal de communication et y est ex√©cut√©. <br><br>  Cependant, Google ne prend toujours pas en charge d'autres transports - Bluetooth, ZigBe, Z-Wave, RF, etc.  directement sur la colonne, et SkyFriend prend en charge Bluetooth 5.0. <br><br>  Que nous reste-t-il?  Travaillez avec les ressources syst√®me - ajoutez de la m√©moire, de la puissance processeur, etc.  Et nous sommes pr√™ts √† offrir aux utilisateurs une nouvelle qualit√© GA. <br><br><h3>  Que dire en conclusion? </h3><br>  GA est une tendance, c'est pratique, c'est pratique.  Le sujet est nouveau, complet, il comporte de nombreuses questions encore difficiles √† r√©soudre.  Surtout seul.  Par cons√©quent, nous vous invitons √† une discussion. <br><br>  Que se passera-t-il ensuite?  Et puis il y aura notre nouvel article sur l'architecture SkyFriend.  Nous raconterons et montrerons tout.  Mais alors. <br><br>  PS Des suggestions et des critiques peuvent √™tre laiss√©es dans les commentaires. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461363/">https://habr.com/ru/post/fr461363/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461351/index.html">Kal√©idoscope comme dans l'enfance</a></li>
<li><a href="../fr461353/index.html">4 r√®gles commerciales de David Jan</a></li>
<li><a href="../fr461355/index.html">Transformation num√©rique des petites entreprises √† faire soi-m√™me</a></li>
<li><a href="../fr461359/index.html">G√©olocalisation et g√©olocalisation: m√©ga-outil</a></li>
<li><a href="../fr461361/index.html">Plus grand et plus puissant: comment nous avons assur√© le fonctionnement du nouvel √©quipement dans le centre de donn√©es MediaTek</a></li>
<li><a href="../fr461365/index.html">Ma√Ætriser la vision par ordinateur - 8 √©tapes de base</a></li>
<li><a href="../fr461367/index.html">Comment un dipl√¥m√© de Fiztekh a ouvert la plus grande √©cole de programmation en Arm√©nie</a></li>
<li><a href="../fr461371/index.html">Monade "Reader" via async / attente en C #</a></li>
<li><a href="../fr461373/index.html">GoLand 2019.2: prise en charge des appels de fonction pendant le d√©bogage, sch√©mas de couleurs am√©lior√©s, ach√®vement personnalis√© de Postfix</a></li>
<li><a href="../fr461379/index.html">Museum DataArt. Modems US Robotics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>