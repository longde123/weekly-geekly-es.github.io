<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   LogRock: Prueba a trav茅s del registro   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="LogRock: Prueba a trav茅s del registro 
 Llevamos m谩s de 2 a帽os trabajando en nuestro proyecto Cleverbrush . Este es un software para trabajar con gr谩f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LogRock: Prueba a trav茅s del registro</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453652/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a0/8fe/e87/0a08fee87984969110aef2080f4687ae.png" alt="Logrock"></div><br><h2>  LogRock: Prueba a trav茅s del registro </h2><br>  Llevamos m谩s de 2 a帽os trabajando en nuestro proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cleverbrush</a> .  Este es un software para trabajar con gr谩ficos vectoriales.  Trabajar con un editor gr谩fico implica una gran cantidad de casos de uso de aplicaciones.  Estamos tratando de ahorrar dinero y tiempo, por lo que optimizamos todo, incluidas las pruebas.  Cubrir los casos de prueba con cada opci贸n es demasiado costoso e irracional, especialmente porque es imposible cubrir todas las opciones. <br><br>  Durante el desarrollo, se cre贸 un m贸dulo para aplicaciones React JS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">LogRock (github)</a> . <br><br>  Este m贸dulo le permite organizar aplicaciones modernas de registro.  Seg煤n los registros, realizamos pruebas.  En este art铆culo, le contar茅 sobre las complejidades del uso de este m贸dulo y c贸mo organizar las pruebas a trav茅s del registro. <br><a name="habracut"></a><br><h2>  Cual es el problema </h2><br>  Si compara el programa con un organismo vivo, entonces un error es una enfermedad.  La causa de esta "enfermedad" puede ser una serie de factores, incluido el entorno de un usuario en particular.  Esto es especialmente cierto si estamos considerando una plataforma web.  A veces, una relaci贸n causal es muy compleja, y el error que se encontr贸 durante las pruebas es el resultado de una serie de eventos. <br><br>  Al igual que con las enfermedades humanas, nadie explicar谩 sus s铆ntomas mejor que el paciente, ning煤n evaluador podr谩 decir lo que sucedi贸, mejor que el programa en s铆. <br><br><h2>  Que hacer </h2><br>  Para comprender lo que est谩 sucediendo, necesitamos una lista de acciones que el usuario realiz贸 en nuestra aplicaci贸n. <br><br>  Para que nuestro programa mismo pueda decirnos qu茅 "duele", tomaremos el m贸dulo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">LogRock (github)</a> y lo asociaremos con ElasticSearch, LogStash y Kibana. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d4/1d6/7ea/6d41d67ea5bd247827fd03948fc8b0dd.png" alt="imagen"></div><br>  <b>ElasticSearch</b> es un poderoso motor de b煤squeda de texto completo.  Puedes ver el tutorial de ElasticSearch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu铆</a> . <br>  <b>LogStash</b> es un sistema para recopilar registros de varias fuentes, que pueden enviar registros, incluso a ElasticSearch. <br>  <b>Kibana</b> es una interfaz web para ElasticSearch con muchos complementos. <br><br><h2>  Como funciona </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dcf/06e/706/dcf06e706a5ae052a2f15eaf09e45c93.png" alt="imagen"></div><br>  En caso de un error (o solo a pedido), la aplicaci贸n env铆a registros al servidor donde se guardan en un archivo.  Logstash guarda datos de forma incremental en ElasticSearch - en la base de datos.  El usuario inicia sesi贸n en Kibana y ve los registros guardados. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e19/0b0/244/e190b0244b22db314385b5156e5c56cd.png" alt="imagen"></div><br>  Parece una Kibana bien sintonizada.  Muestra datos de ElasticSearch.  Kibana puede mostrar datos en forma de tablas, gr谩ficos, mapas, etc., lo cual es muy conveniente para analizar y comprender lo que est谩 sucediendo con nuestra aplicaci贸n. <br><br>  <b><u>隆En este art铆culo, NO discutir茅 la configuraci贸n de ElasticStack!</u></b> <br><br><h2>  Crear un sistema de registro </h2><br>  Como ejemplo, integraremos el sistema de registro en una aplicaci贸n JS de una p谩gina escrita en React.  Realmente no importa en qu茅 marco se escribir谩 su aplicaci贸n.  Tratar茅 de describir el enfoque de construir un sistema de registro en s铆 mismo. <br><br><h3>  1. Cliente </h3><br><h4>  1.0 LogRock.  Instalaci贸n </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace a LogRock</a> <br><br>  Para instalar, debe realizar: <br><br><pre><code class="bash hljs">npm install logrock  yarn add logrock</code> </pre> <br><h4>  1.1 LogRock.  Configuraci贸n de la aplicaci贸n </h4><br>  Para comenzar, envuelva nuestra aplicaci贸n en un componente <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { LoggerContainer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"logrock"</span></span>; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  LoggerContainer es un componente que responde a los errores de su aplicaci贸n y forma una pila. <br><br>  Una pila es un objeto con informaci贸n sobre el sistema operativo del usuario, el navegador, el bot贸n del mouse o del teclado que se presion贸 y, por supuesto, el subconjunto de acciones, donde se registran todas las acciones del usuario que realiz贸 en nuestro sistema. <br><br>  LoggerContainer tiene varias configuraciones, considera algunas de ellas <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} onError={stack =&gt; { sendToServer(stack); }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  activo: habilita o deshabilita el registrador <br><br>  l铆mite: establece un l铆mite en el n煤mero de acciones recientes guardadas por el usuario.  Si el usuario realiza 21 acciones, la primera de esta matriz se eliminar谩 autom谩ticamente.  Por lo tanto, tendremos las 煤ltimas 20 acciones que precedieron al error. <br><br>  onError: la devoluci贸n de llamada que se llama cuando se produce un error.  El objeto Stack entra en 茅l, en el que se almacena toda la informaci贸n sobre el entorno, las acciones del usuario, etc.  Es a partir de esta devoluci贸n de llamada que necesitamos enviar estos datos a ElasticSearch o al backend, o guardarlos en un archivo para su posterior an谩lisis y monitoreo. <br><br><h4>  1.2 LogRock.  Registro </h4><br>  Para realizar un registro de alta calidad de las acciones del usuario, tendremos que cubrir nuestro c贸digo con llamadas de registro. <br><br>  El m贸dulo LogRock viene con un registrador asociado con un LoggerContainer <br><br>  Supongamos que tenemos un componente <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Toggle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [toggleState, setToggleState] = useState(<span class="hljs-string"><span class="hljs-string">"off"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ setToggleState(toggleState === <span class="hljs-string"><span class="hljs-string">"off"</span></span> ? <span class="hljs-string"><span class="hljs-string">"on"</span></span> : <span class="hljs-string"><span class="hljs-string">"off"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">`</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">switch</span></span></span></span><span class="xml"><span class="hljs-tag"> ${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">toggleState</span></span></span></span><span class="xml"><span class="hljs-tag">}`} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{toggle}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">; }</span></span></code> </pre> <br>  Para cubrirlo adecuadamente con un registro, debemos modificar el m茅todo de alternar <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = toggleState === <span class="hljs-string"><span class="hljs-string">"off"</span></span> ? <span class="hljs-string"><span class="hljs-string">"on"</span></span> : <span class="hljs-string"><span class="hljs-string">"off"</span></span>; logger.info(<span class="hljs-string"><span class="hljs-string">`React.Toggle|Toggle component changed state </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${state}</span></span></span><span class="hljs-string">`</span></span>); setToggleState(state); }</code> </pre> <br>  Hemos agregado un registrador en el que la informaci贸n se divide en 2 partes.  React.Toggle nos muestra que esta acci贸n ocurri贸 en el nivel de React, el componente Toggle, y luego tenemos una explicaci贸n verbal de la acci贸n y el estado actual que lleg贸 a este componente.  Tal separaci贸n en niveles no es necesaria, pero con este enfoque ser谩 m谩s claro d贸nde se ejecut贸 exactamente nuestro c贸digo. <br><br>  Tambi茅n podemos usar el m茅todo "componentDidCatch", que se introdujo en React versi贸n 16, en caso de error. <br><br><h4>  2. Interacci贸n del servidor </h4><br>  Considere el siguiente ejemplo. <br><br>  Supongamos que tenemos un m茅todo que recopila datos de usuario de un servidor.  El m茅todo es as铆ncrono, parte de la l贸gica est谩 oculta en el backend.  驴C贸mo registrar este c贸digo correctamente? <br><br>  En primer lugar, dado que tenemos una aplicaci贸n cliente, todas las solicitudes dirigidas al servidor pasar谩n por una 煤nica sesi贸n de usuario, sin volver a cargar la p谩gina.  Para asociar acciones en el cliente con acciones en el servidor, debemos crear un SessionID global y agregarlo al encabezado de cada solicitud al servidor.  En el servidor, podemos usar cualquier registrador que cubra nuestra l贸gica como un ejemplo de la interfaz y, en caso de error, env铆e estos datos con el ID de sesi贸n adjunto a Elastic a la placa de back-end. <br><br>  1. Generamos SessionID en el cliente <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.SESSION_ID = <span class="hljs-string"><span class="hljs-string">`sessionid-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random().toString(</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">36</span></span></span></span><span class="hljs-string"><span class="hljs-subst">).substr(</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">, </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">9</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>;</code> </pre> <br>  2. Debemos establecer el SessionID para todas las solicitudes al servidor.  Si usamos bibliotecas para consultas, esto es muy simple declarando un SessionID para todas las consultas. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fetch = axios.create({...}); fetch.defaults.headers.common.sessionId = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.SESSION_ID;</code> </pre> <br>  3. En LoggerContainer hay un campo especial para SessionID <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} sessionID={<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.SESSION_ID} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} onError={stack =&gt; { sendToServer(stack); }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  4. La solicitud en s铆 (en el cliente) se ver谩 as铆: <br><br><pre> <code class="javascript hljs">logger.info(<span class="hljs-string"><span class="hljs-string">`store.getData|User is ready for loading... User ID is </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">`</span></span>); getData(<span class="hljs-string"><span class="hljs-string">'/api/v1/user'</span></span>, { id }) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userData</span></span></span><span class="hljs-function"> =&gt;</span></span> { logger.info(<span class="hljs-string"><span class="hljs-string">`store.getData|User have already loaded. User count is </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.stringify(userData)}</span></span></span><span class="hljs-string">`</span></span>); }) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> { logger.error(<span class="hljs-string"><span class="hljs-string">`store.getData|User loaded fail </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${err.message}</span></span></span><span class="hljs-string">`</span></span>); });</code> </pre> <br>  C贸mo funcionar谩 todo: registramos un registro, antes de la solicitud del cliente.  Seg煤n nuestro c贸digo, vemos que ahora comenzar谩 la carga de datos del servidor.  Adjuntamos un SessionID a la solicitud.  Si nuestro backend est谩 cubierto de registros con la adici贸n de este SessionID y la solicitud falla, entonces podemos ver lo que sucedi贸 en el backend. <br><br>  Por lo tanto, monitoreamos todo el ciclo de nuestra aplicaci贸n, no solo en el cliente, sino tambi茅n en el backend. <br><br><h4>  3. El probador </h4><br>  Trabajar con un probador merece una descripci贸n separada del proceso. <br><br>  Como tenemos una startup, no tenemos requisitos formales y, a veces, no todo es l贸gico en el trabajo. <br><br>  Si el probador no comprende el comportamiento, este es un caso que al menos debe considerarse.  Adem谩s, a menudo, un probador simplemente no puede repetir una situaci贸n dos veces.  Dado que los pasos que conducen a un comportamiento incorrecto pueden ser numerosos y no triviales.  Adem谩s, no todos los errores conducen a consecuencias cr铆ticas, como la excepci贸n.  Algunos de ellos solo pueden cambiar el comportamiento de la aplicaci贸n, pero el sistema no los puede interpretar como un error.  Para estos fines, en la preparaci贸n, puede agregar un bot贸n en el encabezado de la aplicaci贸n para forzar el env铆o de registros.  El probador ve que algo no est谩 funcionando bien, hace clic en el bot贸n y env铆a la Pila con acciones a ElasticSearch. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/553/154/7f0/5531547f03a044eda98449e829d67839.png" alt="imagen"></div><br><br>  Sin embargo, si ha ocurrido un error cr铆tico, debemos bloquear la interfaz para que el probador no haga m谩s clic y no entre en un callej贸n sin salida. <br><br>  Para estos fines, mostramos la pantalla azul de la muerte. <br><br>  Vemos en la parte superior el texto con la Pila de este error cr铆tico, y debajo, las acciones que lo precedieron.  Tambi茅n obtenemos el ID de error, es suficiente para que el probador lo seleccione y lo adjunte al ticket.  M谩s tarde, este error se puede encontrar f谩cilmente en Kibana con esta ID. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f3/5b8/4b7/7f35b84b746e584111ce64e6416e1f36.png" alt="imagen"></div><br>  Para estos fines, LoggerContainer tiene sus propias propiedades. <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} bsodActive={<span class="hljs-literal"><span class="hljs-literal">true</span></span>} bsod={BSOD} onError={stack =&gt; { sendToServer(stack); }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  bsodActive: activa / desactiva BSOD (la desactivaci贸n de BSOD se aplica al c贸digo de producci贸n) <br><br>  bsod es un componente.  Por defecto, se parece a la captura de pantalla anterior. <br><br>  Para mostrar un bot贸n en un UI LoggerContainer, podemos usarlo en contexto <br><br><pre> <code class="javascript hljs">context.logger.onError(context.logger.getStackData());</code> </pre> <br><h4>  4. LogRock.  Interacci贸n del usuario </h4><br>  Puede enviar registros a la consola o mostr谩rselos al usuario, para esto debe usar el m茅todo stdout: <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} bsodActive={<span class="hljs-literal"><span class="hljs-literal">true</span></span>} bsod={BSOD} onError={stack =&gt; { sendToServer(stack); }} stdout={(level, message, important) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (important) { alert(message); } }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  stdout es un m茅todo responsable de mostrar mensajes. <br><br>  Para hacer que el mensaje sea importante, es suficiente pasar el segundo par谩metro verdadero al registrador.  Por lo tanto, este mensaje se puede mostrar al usuario en una ventana emergente, por ejemplo, si falla la carga de datos, podemos mostrar un mensaje de error. <br><br><pre> <code class="javascript hljs">logger.log(<span class="hljs-string"><span class="hljs-string">'Something was wrong'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre> <br><h3>  Registro avanzado </h3><br>  Si usa Redux, o soluciones similares con una Tienda, puede colocar un registrador en Middleware que procese sus Acciones, por lo tanto, todas las acciones importantes pasar谩n por nuestro sistema. <br><br>  Para un registro efectivo, puede envolver sus datos en un objeto proxy y colocar registradores en todas las acciones con el objeto. <br><br>  Para cubrir los m茅todos de terceros con el registro (m茅todos de biblioteca, m茅todos de c贸digo heredado), puede usar decoradores - "@". <br><br><h3>  Consejos </h3><br>  Registre aplicaciones, incluso en producci贸n, porque mejor que los usuarios reales, ning煤n probador encontrar谩 cuellos de botella. <br><br>  No olvide indicar la recopilaci贸n de registros en el acuerdo de licencia. <br><br>  <b>隆NO registre contrase帽as, datos bancarios y otra informaci贸n personal!</b> <br><br>  La redundancia de registros tambi茅n es mala, haga que las firmas sean lo m谩s claras posible. <br><br><h3>  Alternativas </h3><br>  Como enfoques alternativos, destaco: <br><br><ul><li>  Rollbar es altamente personalizable.  Le permite registrar 500 mil errores por $ 150 por mes.  Recomiendo usarlo si est谩 desarrollando una aplicaci贸n desde cero. </li><li>  Sentry es m谩s f谩cil de integrar, pero menos personalizable.  Le permite registrar 1 mill贸n de eventos por $ 200 por mes. </li></ul><br>  Ambos servicios le permiten hacer casi lo mismo e integrarse en el backend. <br><br><h3>  Que sigue </h3><br>  El registro no es solo la b煤squeda de errores, sino que tambi茅n supervisa las acciones del usuario y la recopilaci贸n de datos.  El registro puede ser un buen complemento para las pruebas de Google Analytics y la experiencia del usuario. <br><br><h3>  Conclusiones </h3><br>  Cuando liberas la aplicaci贸n, la vida apenas comienza para 茅l.  Sea responsable de su creaci贸n, obtenga comentarios, monitoree los registros y mej贸relos.  Escriba software de alta calidad y prospere :) <br><br>  PD Si quieres ayudar con el desarrollo de m贸dulos para Angular, Vue, etc.  Estar茅 encantado de recibir solicitudes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu铆</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/453652/">https://habr.com/ru/post/453652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453634/index.html">Alfa Bank School of System Analysis</a></li>
<li><a href="../453642/index.html">Analizador inteligente para un n煤mero escrito en palabras</a></li>
<li><a href="../453644/index.html">Entrevista: 10 preguntas sobre Swift. Parte 3</a></li>
<li><a href="../453646/index.html">Normalizaci贸n de datos en una base de datos distribuida, microservicios y ERP</a></li>
<li><a href="../453650/index.html">N煤cleo de software de la infraestructura cibern茅tica a bordo del caza de combate unificado F-35</a></li>
<li><a href="../453656/index.html">Web est谩tica: 驴volver a lo b谩sico?</a></li>
<li><a href="../453660/index.html">Intel mostr贸 el nuevo procesador i9-9900KS con frecuencia Turbo de 5 GHz por n煤cleo</a></li>
<li><a href="../453662/index.html">Marte: incluso m谩s hielo en el Polo Norte, pero profundo</a></li>
<li><a href="../453664/index.html">Spring Boot - OAuth2 y JWT</a></li>
<li><a href="../453666/index.html">C贸mo mont茅 un taxi no tripulado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>