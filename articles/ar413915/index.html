<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅข โ๏ธ ๐ฉ๐ฟโ๐ง ุฌุนู ุจุฑุฌ ุงูุฏูุงุน ูุนุจุฉ ูุญุฏุฉ - ุงูุฌุฒุก 2 ๐ โ๏ธ ๐๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐุง ูู ุงูุฌุฒุก ุงูุซุงูู ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู "ุฅูุดุงุก ูุนุจุฉ ุจุฑุฌ ุงูุฏูุงุน ูู ุงููุญุฏุฉ" . ูุญู ุจุตุฏุฏ ุฅูุดุงุก ูุนุจุฉ ูู ููุน ุงูุฏูุงุน ุนู ุงูุจุฑุฌ ูู ุงููุญุฏุฉ ุ ูุจููุงูุฉ ุงูุฌุฒุก ุงูุฃู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฌุนู ุจุฑุฌ ุงูุฏูุงุน ูุนุจุฉ ูุญุฏุฉ - ุงูุฌุฒุก 2</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413915/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dd4/78a/29c/dd478a29c258b63dc809ca16de4ee16a.png" alt="ุงูุตูุฑุฉ"></div><br>  ูุฐุง ูู ุงูุฌุฒุก ุงูุซุงูู ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู <i>"ุฅูุดุงุก ูุนุจุฉ ุจุฑุฌ ุงูุฏูุงุน ูู ุงููุญุฏุฉ"</i> .  ูุญู ุจุตุฏุฏ ุฅูุดุงุก ูุนุจุฉ ูู ููุน ุงูุฏูุงุน ุนู ุงูุจุฑุฌ ูู ุงููุญุฏุฉ ุ ูุจููุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฒุก ุงูุฃูู</a> ุ ุชุนูููุง ููููุฉ ูุถุน ุงููุญูุด ูุชุฑููุชูุง.  ูุฏููุง ุฃูุถุง ุนุฏู ูุงุญุฏ ููุงุฌู ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท. <br><br>  ููุน ุฐูู ุ ูุฅู ุงูุนุฏู ูุง ูุนุฑู ุญุชู ุงูุขู ุฃูู ููุธุฑ!  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุจุฏู ุงููุฌูู ุจููุฑุฏู ุบุฑูุจูุง.  ูู ูุฐุง ุงูุฌุฒุก ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ุณูุถูู ููุฌุงุช ูู ุงูุฃุนุฏุงุก ูุญูุด ุงูุฐุฑุงุน ุญุชู ูุชููููุง ูู ุงูุฏูุงุน ุนู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ุงูุซููู. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ูููุตูู ุฅูู ุงูุนูู </h2><br>  ุงูุชุญ ุงููุดุฑูุน ูู ุงููุญุฏุฉ ุงูุฐู ุชููููุง ุนูู ูู ุงูุฌุฒุก ุงูุฃุฎูุฑ.  ุฅุฐุง ุงูุถููุช ุฅูููุง ุงูุขู ุ <em>ููู</em> ุจุชูุฒูู <a href="">ูุดุฑูุน ุงููุดุฑูุน</a> ูุงูุชุญ <em>TowerDefense-Part2-Starter</em> . <br><br>  ุงูุชุญ <em>GameScene</em> ูู ูุฌูุฏ <em>Scenes</em> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุจ ุงูุฃุนุฏุงุก </h2><br>  ูู ููุงูุฉ ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงูุณุงุจู ุ ุชุนูู ุงูุนุฏู ุฃู ูุชุญุฑู ุนูู ุทูู ุงูุทุฑูู ุ ูููู ูุจุฏู ุฃูู ููุณ ูุฏูู ุฃู ููุฑุฉ ุนู ููุงู ูุธุฑู. <br><br>  ุงูุชุญ ุงูุจุฑูุงูุฌ ุงููุตู <em>MoveEnemy.cs</em> ูู IDE ูุฃุถู ุงูุทุฑููุฉ ุงูุชุงููุฉ ุฅููู ูุฅุตูุงุญ ุงููููู. <br><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RotateIntoMoveDirection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//1 Vector3 newStartPosition = waypoints [currentWaypoint].transform.position; Vector3 newEndPosition = waypoints [currentWaypoint + 1].transform.position; Vector3 newDirection = (newEndPosition - newStartPosition); //2 float x = newDirection.x; float y = newDirection.y; float rotationAngle = Mathf.Atan2 (y, x) * 180 / Mathf.PI; //3 GameObject sprite = gameObject.transform.Find("Sprite").gameObject; sprite.transform.rotation = Quaternion.AngleAxis(rotationAngle, Vector3.forward); }</span></span></code> </pre> <br>  <code>RotateIntoMoveDirection</code> ูุฏูุฑ ุงูุนุฏู ุจุญูุซ <code>RotateIntoMoveDirection</code> ุฏุงุฆูุง ุฅูู ุงูุฃูุงู.  ููุนู ุฐูู ุนูู ุงููุญู ุงูุชุงูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุณุงุจ ุงูุงุชุฌุงู ุงูุญุงูู ููุฎูู ุ ูุทุฑุญ ููุถุน ููุทุฉ ุงูุทุฑูู ุงูุญุงููุฉ ูู ููุถุน ุงูููุทุฉ ุงูุชุงููุฉ. </li><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู <code>Mathf.Atan2</code> ูุชุญุฏูุฏ ุงูุฒุงููุฉ ุจุงูุชูุฏูุฑ ุงูุฏุงุฆุฑู ุญูุซ <code>newDirection</code> ุชูุฌูู <code>newDirection</code> (ููุทุฉ ุงูุตูุฑ ุนูู ุงููููู).  ูููู <code>180 / Mathf.PI</code> ุงููุชูุฌุฉ ูู <code>180 / Mathf.PI</code> ุ ูุน ุชุญููู ุงูุฒุงููุฉ ุฅูู ุฏุฑุฌุงุช. </li><li style=";text-align:right;direction:rtl">  ูุฃุฎูุฑูุง ุ ูุญุตู ุนูู ุงูุทูู <em>Sprite</em> ููุฏูุฑ <code>rotationAngle</code> ุงููุญูุฑ ุจุงูุฏุฑุฌุงุช.  ูุงุญุธ ุฃููุง ูููู ุจุชุฏููุฑ <i>ุงูุทูู</i> ุ ูููุณ ุงููุงูุฏ ุ ุจุญูุซ ูุจูู ุดุฑูุท ุงูุทุงูุฉ ุงูุฐู ูุถููู ูุงุญููุง ุฃููููุง. </li></ol><br>  ูู <code>Update()</code> ุ ุงุณุชุจุฏู ุงูุชุนููู <code>// TODO:    </code> ุจุงูููุงููุฉ ุงูุชุงููุฉ ูู <code>RotateIntoMoveDirection</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">RotateIntoMoveDirection();</code> </pre> <br>  ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู ุงููุญุฏุฉ.  ุชุดุบูู ุงููุดูุฏ  ุงูุขู ุงูุนุฏู ูุนุฑู ุฃูู ูุชุญุฑู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/73d/7f4/9e5/73d7f49e5fec3785e2ac3376c3774f27.gif"></div><br>  ุงูุขู ูุนุฑู ุงูุฎูู ุฃูู ูุฐูุจ. <br><br>  ุงูุนุฏู ุงููุญูุฏ ูุง ูุจุฏู ูุซูุฑูุง ููุฅุนุฌุงุจ.  ูุญู ุจุญุงุฌุฉ ุฅูู ุฌุญุงูู!  ูููุง ูู ุงูุญุงู ูู ุฃู ูุนุจุฉ ุฏูุงุน ุนู ุจุฑุฌ ุ ูุฅู ุงูุญุดูุฏ ุชุฌุฑู ูู ุฃููุงุฌ! <br><br><h2 style=";text-align:right;direction:rtl">  ุฅุจูุงุบ ุงููุงุนุจ </h2><br>  ูุจู ุฃู ูุจุฏุฃ ูู ุชุญุฑูู ุงูุญุดูุฏ ุ ูุญุชุงุฌ ุฅูู ุชุญุฐูุฑ ุงููุงุนุจ ูู ุงููุนุฑูุฉ ุงููุดููุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุฏุฑ ุนุฑุถ ุฑูู ุงูููุฌุฉ ุงูุญุงูู ูู ุฃุนูู ุงูุดุงุดุฉ. <br><br>  ูุทููุจ ูุนูููุงุช <em>ุงูููุฌุฉ ูู</em> ูุจู ุงูุนุฏูุฏ ูู GameObjects ุ ูุฐูู ุณูููู ุจุฅุถุงูุชูุง ุฅูู ูููู <em>GameManagerBehavior</em> ูู <em>GameManager</em> . <br><br>  ุงูุชุญ <em>GameManagerBehavior.cs</em> ูู IDE ูุฃุถู ุงููุชุบูุฑูู ุงูุชุงูููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Text waveLabel; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject[] nextWaveLabels;</code> </pre> <br>  ูุฎุฒู <code>waveLabel</code> ุงุฑุชุจุงุทูุง ุฅูู ุชุณููุฉ ุฅุฎุฑุงุฌ ุฑูู ุงูููุฌุฉ ูู ุงูุฒุงููุฉ ุงูุนูููุฉ ุงููููู ูู ุงูุดุงุดุฉ.  ูุฎุฒู <code>nextWaveLabels</code> ุฌูุงุฒู GameObjects ุงููุฐูู ููุดุฆุงู ูุฌููุนุฉ ูู ุงูุฑุณูู ุงููุชุญุฑูุฉ ุงูุชู ุณูุนุฑุถูุง ูู ุจุฏุงูุฉ ููุฌุฉ ุฌุฏูุฏุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e7c/650/8f0/e7c6508f018c4382e490a4f6bee31e1f.gif"></div><br>  ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู ุงููุญุฏุฉ.  ุญุฏุฏ <em>GameManager</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> .  ุงููุฑ ููู ุงูุฏุงุฆุฑุฉ ุงูููุฌูุฏุฉ ุนูู ูุณุงุฑ <em>Wave Label</em> ููู ูุฑุจุน ุงูุญูุงุฑ <em>Select Text</em> ุ ุญุฏุฏ <em>WaveLabel</em> ูู ุนูุงูุฉ ุงูุชุจููุจ <em>Scene</em> . <br><br>  ุงูุขู ูู ุจุชุนููู <em>ุญุฌู</em> <em>ุชุณููุงุช ุงูููุฌุฉ ุงูุชุงููุฉ</em> ุฅูู <em>2</em> .  ุงูุขู ูู ุจุชุนููู <em>ุงูุนูุตุฑ 0</em> ุนูู <em>NextWaveBottomLabel</em> ุ ูุจุงููุณุจุฉ <em>ููุนูุตุฑ 1</em> <em>NextWaveTopLabel</em> ูู ููุณู ุงูุฐู ูุนููุงู ูุน Wave Label. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d19/725/1f8/d197251f821c7262c638df487fb752cd.png"></div><br>  <i>ูุฐุง ูุง ูุฌุจ ุฃู ูููู ุนููู ุณููู ูุฏูุฑ ุงููุนุจุฉ ุงูุขู</i> <br><br>  ุฅุฐุง ุฎุณุฑ ุงููุงุนุจ ุ ููุง ูุฌุจ ุฃู ูุฑู ุฑุณุงูุฉ ุนู ุงูููุฌุฉ ุงูุชุงููุฉ.  ููุชุนุงูู ูุน ูุฐุง ุงููููู ุ ุงุฑุฌุน ุฅูู <em>GameManagerBehavior.cs</em> ูุฃุถู ูุชุบูุฑูุง ุขุฎุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> gameOver = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br>  ูู <code>gameOver</code> ุณูููู ุจุชุฎุฒูู ูููุฉ ูุง ุฅุฐุง ูุงู ุงููุงุนุจ ุฎุณุฑ. <br><br>  ููุง ูุณุชุฎุฏู ุงูุฎุงุตูุฉ ูุฑุฉ ุฃุฎุฑู ููุฒุงููุฉ ุนูุงุตุฑ ุงููุนุจุฉ ูุน ุงูููุฌุฉ ุงูุญุงููุฉ.  ุฃุถู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ุฅูู <code>GameManagerBehavior</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> wave; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Wave { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> wave; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { wave = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!gameOver) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; nextWaveLabels.Length; i++) { nextWaveLabels[i].GetComponent&lt;Animator&gt;().SetTrigger(<span class="hljs-string"><span class="hljs-string">"nextWave"</span></span>); } } waveLabel.text = <span class="hljs-string"><span class="hljs-string">"WAVE: "</span></span> + (wave + <span class="hljs-number"><span class="hljs-number">1</span></span>); } }</code> </pre> <br>  ูุฌุจ ุฃู ูููู ุฅูุดุงุก ูุชุบูุฑ ุฎุงุต ูุฎุงุตูุฉ ูุดูุก ูุง ุฃูุฑูุง ูุฃููููุง ุจุงููุณุจุฉ ูู.  ูููู ูุน ุฃุฏุงุฉ ุงูุถุจุท ุ ูุฑุฉ ุฃุฎุฑู ุ ูู ุดูุก ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู. <br><br>  ูุนุทู <code>wave</code> <code>value</code> ุฌุฏูุฏุฉ. <br><br>  ุซู ูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงููุนุจุฉ ูุฏ ุงูุชูุช.  ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ <em>ููู ุจุงูุงูุชูุงู</em> ุนุจุฑ ุฌููุน ููุตูุงุช <em>nextWaveLabels ุงูุชุงููุฉ</em> - ุชุญุชูู ูุฐู ุงูุชุณููุงุช ุนูู ูููู <em>Animator</em> .  ูุชูููู <em>ุงูุฑุณูู</em> ุงููุชุญุฑูุฉ ููุฑุณูู ุงููุชุญุฑูุฉ ุ <em>ูุญุฏุฏ</em> ูุดุบู <em>nextWave</em> . <br><br>  ุฃุฎูุฑูุง ุ ูููุง ุจุชุนููู <code>text</code> <code>waveLabel</code> ุนูู <code>wave + 1</code> .  ููุงุฐุง <code>+1</code> ุ  ูุง ูุจุฏุฃ ุงููุงุณ ุงูุนุงุฏููู ุจุงูุนุฏ ูู ุงูุจุฏุงูุฉ (ูุนู ุ ูุฐุง ุบุฑูุจ). <br><br>  ูู <code>Start()</code> ุจุชุนููู ูููุฉ ูุฐู ุงูุฎุงุตูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">Wave = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br>  ูุจุฏุฃ ุงูุนุฏ ูุน <code>Wave</code> ุฑูู <em>0</em> . <br><br>  ูู ุจุญูุธ ุงูููู ูุชุดุบูู ุงููุดูุฏ ูู ุงููุญุฏุฉ.  ุณุชุธูุฑ ุชุณููุฉ Wave ุจุดูู ุตุญูุญ 1. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b0d/edf/546/b0dedf546c1b6ad9b0d0b91c5021212d.png"></div><br>  <i>ุจุงููุณุจุฉ ููุงุนุจ ุ ูุจุฏุฃ ูู ุดูุก ุจุงูููุฌุฉ 1.</i> <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฃููุงุฌ: ุฅูุดุงุก ุฃููุงู ูู ุงูุฃุนุฏุงุก </h2><br>  ูุฏ ูุจุฏู ุงูุฃูุฑ ูุงุถุญูุง ุ ูููู ูููุฌูู ุจุญุดุฏ ูู ุงูุถุฑูุฑู ุฅูุดุงุก ุงููุฒูุฏ ูู ุงูุฃุนุฏุงุก - ุจูููุง ูุง ูุนุฑู ููู ููุนู ุฐูู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฌุจ ุฃูุง ูุฎูู ุงูููุฌุฉ ุงูุชุงููุฉ ุญุชู ูุชู ุชุฏููุฑ ุงูููุฌุฉ ุงูุญุงููุฉ. <br><br>  ุจูุนูู ุ ูุฌุจ ุฃู ุชููู ุงููุนุจุฉ ูุงุฏุฑุฉ ุนูู ุงูุชุนุฑู ุนูู ูุฌูุฏ ุงูุฃุนุฏุงุก ูู ุงููุดูุฏ ุ <em>ูุงูุนูุงูุงุช</em> ุทุฑููุฉ ุฌูุฏุฉ ูุชุญุฏูุฏ ูุงุฆูุงุช ุงููุนุจุฉ ููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุณู ุงูุนุฏู </h3><br>  ุญุฏุฏ <em>ุงูุฅุนุฏุงุฏ</em> ุงููุณุจู <em>ููุนุฏู</em> ูู Project Browser.  ูู ุฃุนูู <em>ุงูููุชุด ุ</em> ุงููุฑ ุนูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ููุนูุงูุฉ ูุญุฏุฏ <em>ุฅุถุงูุฉ ุนูุงูุฉ</em> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/be0/7ea/b29/be07eab29a25c69751add67ce4faa283.png"></div><br>  ูู ุจุฅูุดุงุก <em>ุนูุงูุฉ</em> ุชุณูู <em>ุงูุนุฏู</em> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/df1/c66/d02/df1c66d02e0c29a7a6ec0b615dbbd2fc.png"></div><br>  ุญุฏุฏ <em>ุงูุนุฏู</em> ุงูุฌุงูุฒุฉ.  ูู <em>ุงูููุชุด ุ ูู</em> ุจุชุนููู <em>ุนูุงูุฉ</em> <em>ุงูุนุฏู</em> ููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุญุฏูุฏ ููุฌุงุช ุงูุฃุนุฏุงุก </h3><br>  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุถุจุท ููุฌุฉ ุงูุฃุนุฏุงุก.  ุงูุชุญ <em>SpawnEnemy.cs</em> ูู IDE ูุฃุถู ุชุทุจูู ุงููุตู ุงูุชุงูู ูุจู <code>SpawnEnemy</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">System.Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Wave</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject enemyPrefab; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> spawnInterval = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxEnemies = <span class="hljs-number"><span class="hljs-number">20</span></span>; }</code> </pre> <br>  ุชุญุชูู <em>ุงูููุฌุฉ</em> ุนูู <code>enemyPrefab</code> - ุฃุณุงุณ ุฅูุดุงุก ุญุงูุงุช ูุฌููุน ุงูุฃุนุฏุงุก ูู ูุฐู ุงูููุฌุฉ ุ <code>spawnInterval</code> - ุงูููุช ุจูู ุงูุฃุนุฏุงุก ูู ุงูููุฌุฉ ุจุงูุซูุงูู <code>maxEnemies</code> - ุนุฏุฏ ุงูุฃุนุฏุงุก ุงูุฐูู ุชู <code>maxEnemies</code> ูู ูุฐู ุงูููุฌุฉ. <br><br>  ุงููุฆุฉ ูุงุจูุฉ <em>ููุชุณูุณู</em> ุ ุฃู ูููููุง ุชุบููุฑ ููููุง ูู ุงูููุชุด. <br><br>  ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ุฅูู ูุฆุฉ <code>SpawnEnemy</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Wave[] waves; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> timeBetweenWaves = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameManagerBehavior gameManager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lastSpawnTime; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> enemiesSpawned = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br>  ููุง ูุถุน ูุชุบูุฑุงุช ุชูุฑุฎ ุงูุฃุนุฏุงุก ุ ูุงูุชู ุชุดุจู ุฅูู ุญุฏ ูุจูุฑ ููููุฉ ุชุญุฑูู ุงูุฃุนุฏุงุก ุจูู ุงูููุงุท ุนูู ุงูุทุฑูู. <br><br>  ูุถุน ููุฌุงุช ุงูุฃุนุฏุงุก ุงููุฑุฏููู ูู <code>waves</code> <code>enemiesSpawned</code> ุนุฏุฏ ุงูุฃุนุฏุงุก ุงูุฐูู ุชู <code>enemiesSpawned</code> ูุงูููุช ุงูุฐู ุชู <code>enemiesSpawned</code> ูู <code>enemiesSpawned</code> ู <code>lastSpawnTime</code> . <br><br>  ุจุนุฏ ูู ูุฐู ุงููุชู ุ ูุญุชุงุฌ ุงููุงุนุจูู ุฅูู ููุช ููุชููุณ ุ ูุฐุง ุงุถุจุท ุงูููุช ุจูู <code>timeBetweenWaves</code> ุจูู 5 ุซูุงู. <br><br>  ุงุณุชุจุฏู ูุญุชููุงุช <code>Start()</code> ุจุงูููุฏ ุงูุชุงูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">lastSpawnTime = Time.time; gameManager = GameObject.Find(<span class="hljs-string"><span class="hljs-string">"GameManager"</span></span>).GetComponent&lt;GameManagerBehavior&gt;();</code> </pre> <br>  ููุง ูููู ุจุชุนููู <code>lastSpawnTime</code> ูููุฉ ุงูููุช ุงูุญุงูู ุ ุฃู ููุช ุจุฏุก ุงูุจุฑูุงูุฌ ุงููุตู ุจุนุฏ ุชุญููู ุงููุดูุฏ.  ุซู ูุญุตู ุนูู <code>GameManagerBehavior</code> ุงููุฃูููุฉ ุจุงููุนู. <br><br>  ุฃุถู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ุฅูู <code>Update()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 int currentWave = gameManager.Wave; if (currentWave &lt; waves.Length) { // 2 float timeInterval = Time.time - lastSpawnTime; float spawnInterval = waves[currentWave].spawnInterval; if (((enemiesSpawned == 0 &amp;&amp; timeInterval &gt; timeBetweenWaves) || timeInterval &gt; spawnInterval) &amp;&amp; enemiesSpawned &lt; waves[currentWave].maxEnemies) { // 3 lastSpawnTime = Time.time; GameObject newEnemy = (GameObject) Instantiate(waves[currentWave].enemyPrefab); newEnemy.GetComponent&lt;MoveEnemy&gt;().waypoints = waypoints; enemiesSpawned++; } // 4 if (enemiesSpawned == waves[currentWave].maxEnemies &amp;&amp; GameObject.FindGameObjectWithTag("Enemy") == null) { gameManager.Wave++; gameManager.Gold = Mathf.RoundToInt(gameManager.Gold * 1.1f); enemiesSpawned = 0; lastSpawnTime = Time.time; } // 5 } else { gameManager.gameOver = true; GameObject gameOverText = GameObject.FindGameObjectWithTag ("GameWon"); gameOverText.GetComponent&lt;Animator&gt;().SetBool("gameOver", true); }</span></span></code> </pre> <br>  ุฏุนููุง ูุญูููุง ุฎุทูุฉ ุจุฎุทูุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุตู ุนูู ูุคุดุฑ ุงูููุฌุฉ ุงูุญุงููุฉ ููุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฃุฎูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุฅููุง ูุญุณุจ ุงูููุช ุงููููุถู ุจุนุฏ ุชูุฑุฎ ุงูุนุฏู ุงูุณุงุจู ููุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุช ูุฏ ุญุงู ูุฅูุดุงุก ุนุฏู.  ููุง ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุญุงูุชูู.  ุฅุฐุง ูุงู ูุฐุง ูู ุงูุนุฏู ุงูุฃูู ูู ุงูููุฌุฉ ุ ูุฅููุง ูุชุญูู ููุง ุฅุฐุง ูุงูุช <code>timeInterval</code> ูู <code>timeBetweenWaves</code> .  ูุจุฎูุงู ุฐูู ุ ูุชุญูู ููุง ุฅุฐุง ูุงูุช <code>timeInterval</code> ูู ููุฌุงุช <code>spawnInterval</code> .  ุนูู ุฃู ุญุงู ุ ูุชุญูู ูู ุฃููุง ูู ูุฎูู ุฌููุน ุงูุฃุนุฏุงุก ูู ูุฐู ุงูููุฌุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุชูุฑุฎ ุงูุนุฏู ุ ูุฎูู ูุซูู <code>enemyPrefab</code> .  ุฃูุถุง ุฒูุงุฏุฉ ูููุฉ <code>enemiesSpawned</code> . </li><li style=";text-align:right;direction:rtl">  ุชุญูู ูู ุนุฏุฏ ุงูุฃุนุฏุงุก ุนูู ุงูุดุงุดุฉ.  ุฅุฐุง ูู ูููููุง ููุฌูุฏูู ุ ููุงู ูุฐุง ุขุฎุฑ ุนุฏู ูู ุงูููุฌุฉ ุ ูุฅููุง ููุดุฆ ุงูููุฌุฉ ุงูุชุงููุฉ.  ุฃูุถูุง ูู ููุงูุฉ ุงูููุฌุฉ ุ ูุนุทู ุงููุงุนุจ 10 ุจุงููุงุฆุฉ ูู ูู ุงูุฐูุจ ุงููุชุจูู. </li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ูุฒููุฉ ุงูููุฌุฉ ุงูุฃุฎูุฑุฉ ุ ูุชู ูุนุจ ุงูุฑุณูู ุงููุชุญุฑูุฉ ูููุตุฑ ูู ุงููุนุจุฉ ููุง. </li></ol><br><h3 style=";text-align:right;direction:rtl">  ุชุญุฏูุฏ ูุชุฑุงุช ุงูุชูุฑุฎ </h3><br>  ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู ุงููุญุฏุฉ.  ุญุฏุฏ ูุงุฆู <em>ุงูุทุฑูู</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> .  ูู <em>ุงูููุชุด ุ</em> ุงุถุจุท <em>ุญุฌู</em> ุฌุณู <em>ุงูุฃููุงุฌ</em> ุนูู <em>4</em> . <br><br>  ูู ุงูููุช ุงูุญุงูู ุ ุญุฏุฏ ูุงุฆููุง <em>ููุนุฏู</em> ูุฌููุน ุงูุนูุงุตุฑ ุงูุฃุฑุจุนุฉ ูุซู <em>Enemy Prefab</em> .  ูู ุจุชูููู ุงูุญูููู <em>ุงููุงุตู ุงูุฒููู Spawn</em> ู <em>Max Enemies</em> ููุง ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <em>ุงูุนูุตุฑ 0</em> : ุงููุงุตู ุงูุฒููู ููุจูุถ: <em>2.5</em> ุ ุงูุฃุนุฏุงุก ุงูุฃูุตู: <em>5</em> </li><li style=";text-align:right;direction:rtl">  <em>ุงูุนูุตุฑ 1</em> : ุงููุงุตู ุงูุฒููู ููุจูุถ: <em>2</em> ุ ุงูุฃุนุฏุงุก ุงูุฃูุตู: <em>10</em> </li><li style=";text-align:right;direction:rtl">  <em>ุงูุนูุตุฑ 2</em> : ุงููุงุตู ุงูุฒููู ููุจูุถ: <em>2</em> ุ ุงูุฃุนุฏุงุก ุงูุฃูุตู: <em>15</em> </li><li style=";text-align:right;direction:rtl">  <em>ุงูุนูุตุฑ 3</em> : ุงููุงุตู ุงูุฒููู ููุจูุถ: <em>1</em> ุ ุงูุฃุนุฏุงุก ุงูุฃูุตู: <em>5</em> </li></ul><br>  ูุฌุจ ุฃู ูุจุฏู ุงููุฎุทุท ุงูููุงุฆู ูุงูุชุงูู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ff7/0fa/954/ff70fa95476112b51dfb83505f9a785b.png"></div><br>  ุจุงูุทุจุน ุ ููููู ุชุฌุฑุจุฉ ูุฐู ุงูููู ูุฒูุงุฏุฉ ุงูุชุนููุฏ ุฃู ุชููููู. <br><br>  ุงุจุฏุฃ ุงููุนุจุฉ.  ุฃุฌู!  ุจุฏุฃุช ุงูุฎูุงูุณ ุงูุฑุญูุฉ ุฅูู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ุงูุฎุงุต ุจู! <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a7f/097/4d3/a7f0974d36a188b5575a3e70a8488a4a.gif" alt="ุงูุจู"></div><br><h3 style=";text-align:right;direction:rtl">  ูููุฉ ุฅุถุงููุฉ: ุฅุถุงูุฉ ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฃุนุฏุงุก </h3><br>  ูุง ูููู ุงุนุชุจุงุฑ ุฃู ูุนุจุฉ ุฏูุงุน ุนู ุจุฑุฌ ูุงููุฉ ูุน ููุน ูุงุญุฏ ููุท ูู ุงูุนุฏู.  ูุญุณู ุงูุญุธ ุ ููุงู ุฃูุถูุง <em>Enemy2</em> ูู ูุฌูุฏ <em>Prefabs</em> . <br><br>  ูู <em>ุงูููุชุด ุ</em> ุญุฏุฏ <em>Prefabs \ Enemy2</em> ูุฃุถู ุงูุจุฑูุงูุฌ ุงููุตู <em>MoveEnemy</em> ุฅููู.  ุชุนููู <em>ุงูุณุฑุนุฉ</em> ุฅูู <em>3</em> ูุชุนููู <em>ุนูุงูุฉ</em> <em>ุงูุนุฏู</em> .  ุงูุขู ููููู ุงุณุชุฎุฏุงู ูุฐุง ุงูุนุฏู ุงูุณุฑูุน ุญุชู ูุง ูุณุชุฑูุญ ุงููุงุนุจ! <br><br><h2 style=";text-align:right;direction:rtl">  ุชุญุฏูุซ ุญูุงุฉ ุงููุงุนุจ </h2><br>  ุนูู ุงูุฑุบู ูู ุฃู ุฌุญุงูู ุงูุฃุนุฏุงุก ุชูุงุฌู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ุ ูุฅู ุงููุงุนุจ ูุง ูุชุญูู ุฃู ุถุฑุฑ.  ูููู ุณุฑุนุงู ูุง ุณูุตูุญู.  ูุฌุจ ุฃู ูุนุงูู ุงููุงุนุจ ุฅุฐุง ุณูุญ ููุนุฏู ุจุงูุชุณูู. <br><br>  ุงูุชุญ <em>GameManagerBehavior.cs</em> ูู IDE ูุฃุถู ุงููุชุบูุฑูู ุงูุชุงูููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Text healthLabel; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject[] healthIndicator;</code> </pre> <br>  ูุณุชุฎุฏู <code>healthLabel</code> ูููุตูู ุฅูู ุงููููุฉ ุงูุญูุงุชูุฉ ููุงุนุจ ุ ู <code>healthIndicator</code> ูููุตูู ุฅูู ุงููุญูุด ุงูุฎุถุฑุงุก ุงูุตุบูุฑุฉ ุงูุฎูุณุฉ ุงูุชู <code>healthIndicator</code> ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท - ููู ุจุจุณุงุทุฉ ุชุฑูุฒ ุฅูู ุตุญุฉ ุงููุงุนุจ ุ  ุฅูู ุฃูุซุฑ ูุฑุญูุง ูู ูุคุดุฑ ุงูุตุญุฉ ุงูููุงุณู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฅุฏุงุฑุฉ ุงูุตุญูุฉ </h3><br>  ุฃุถู ุงูุขู ุฎุงุตูุฉ ุชุฎุฒู ุตุญุฉ ุงููุงุนุจ ูู <code>GameManagerBehavior</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> health; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Health { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> health; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 if (value &lt; health) { Camera.main.GetComponent&lt;CameraShake&gt;().Shake(); } // 2 health = value; healthLabel.text = "HEALTH: " + health; // 3 if (health &lt;= 0 &amp;&amp; !gameOver) { gameOver = true; GameObject gameOverText = GameObject.FindGameObjectWithTag("GameOver"); gameOverText.GetComponent&lt;Animator&gt;().SetBool("gameOver", true); } // 4 for (int i = 0; i &lt; healthIndicator.Length; i++) { if (i &lt; Health) { healthIndicator[i].SetActive(true); } else { healthIndicator[i].SetActive(false); } } } }</span></span></code> </pre> <br>  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุฏูุฑ ุจูุง ุตุญุฉ ุงููุงุนุจ.  ููุฑุฉ ุฃุฎุฑู ุ ููุน ุงูุฌุฒุก ุงูุฑุฆูุณู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุงููุญุฏุฏ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง <code>CameraShake</code> ูู ุตุญุฉ ุงููุงุนุจ ุ ูุฅููุง ูุณุชุฎุฏู ูููู <code>CameraShake</code> ูุฅูุดุงุก ุชุฃุซูุฑ ุงูุชุฒุงุฒ ุฌููู.  ูุชู ุชุถููู ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู ูู ุงููุดุฑูุน ุงููุงุจู ููุชูุฒูู ููู ูุนุชุจุฑู ููุง. </li><li style=";text-align:right;direction:rtl">  ูููู ุจุชุญุฏูุซ ุงููุชุบูุฑ ุงูุฎุงุต ูุงูุชุณููุฉ ุงูุตุญูุฉ ูู ุงูุฒุงููุฉ ุงููุณุฑู ุงูุนููุง ูู ุงูุดุงุดุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุงูุฎูุถุช ุงูุตุญุฉ ุฅูู 0 ููู ุชุตู ููุงูุฉ ุงููุนุจุฉ ุจุนุฏ ุ <code>gameOver</code> ุนูู <code>true</code> ูุงุจุฏุฃ ุงูุฑุณูู ุงููุชุญุฑูุฉ <code>gameOver</code> . </li><li style=";text-align:right;direction:rtl">  ูููู ุจุฅุฒุงูุฉ ุฃุญุฏ ุงููุญูุด ูู ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท.  ุฅุฐุง ูููุง ููุท ุจุฅููุงู ุชุดุบูููุง ุ ููููู ูุชุงุจุฉ ูุฐุง ุงูุฌุฒุก ุจุดูู ุฃุณูู ุ ูููู ููุง ูุฏุนู ุฅุนุงุฏุฉ ุงูุฅุฏูุงุฌ ูู ุญุงูุฉ ุฅุถุงูุฉ ุงูุตุญุฉ. </li></ol><br>  ูููู ุจุชููุฆุฉ <code>Health</code> in <code>Start()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">Health = <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre> <br>  ูุถุน <code>Health</code> ุนูู <code>5</code> ุนูุฏูุง ูุจุฏุฃ ุงููุดูุฏ ูู ุงููุนุจ. <br><br>  ุจุนุฏ ุงูููุงู ุจูู ูุฐุง ุ ูููููุง ุงูุขู ุชุญุฏูุซ ุตุญุฉ ุงููุงุนุจ ุนูุฏูุง ูุตู ุงูุฎุทุฃ ุฅูู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท.  ุงุญูุธ ุงูููู <em>ูุงูุชูู</em> ุฅูู IDE ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู <em>MoveEnemy.cs</em> . <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุบููุฑ ุงูุตุญู </h3><br>  ูุชุบููุฑ ุตุญุชู ุ ุงุจุญุซ ุนู ุงูุชุนููู ูู <code>Update()</code> ุจุงููููุงุช <code>// TODO:  </code> ูุงุณุชุจุฏููุง ุจูุฐุง ุงูุฑูุฒ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">GameManagerBehavior gameManager = GameObject.Find(<span class="hljs-string"><span class="hljs-string">"GameManager"</span></span>).GetComponent&lt;GameManagerBehavior&gt;(); gameManager.Health -= <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  ูุฐุง ูุญุตู ุนูู <code>GameManagerBehavior</code> ููุทุฑุญ ุงููุญุฏุฉ ูู <code>Health</code> . <br><br>  ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู ุงููุญุฏุฉ. <br><br>  ุญุฏุฏ <em>GameManager</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> ูุญุฏุฏ <em>HealthLabel ูููุตู</em> <em>Health</em> ุงูุฎุงุต ุจู. <br><br>  ูู ุจุชูุณูุน ูุงุฆู <em>ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> ูุงุณุญุจ <em>ูุคุดุฑุงุช ุตุญุฉ</em> ุงูุฃุทูุงู ุงูุฎูุณุฉ ุฅูู ูุฌููุนุฉ <em>ูุคุดุฑุงุช ุตุญุฉ GameManager</em> - ุณุชููู ุงููุคุดุฑุงุช ุงูุตุญูุฉ ุนุจุงุฑุฉ ุนู ูุญูุด ุฎุถุฑุงุก ุตุบูุฑุฉ ุชุฃูู ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท. <br><br>  ุดุบูู ุงููุดูุฏ ูุงูุชุธุฑ ุญุชู ุชุตู ุงูุจู ุฅูู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท.  ูุง ุชูุนู ุดูุฆูุง ุญุชู ุชุฎุณุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8d8/f4a/ea4/8d8f4aea4cec500c3894d233f402b7ba.gif" alt="ูุฌูู ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท"></div><br><h2 style=";text-align:right;direction:rtl">  ุงูุชูุงู ุงููุญุด </h2><br>  ูุญูุด ูู ุงูููุงูุ  ูุนู  ูู ููุงุฌู ุงูุฃุนุฏุงุกุ  ูุนู ุ ููู ูุจุฏูู ุฎุทุฑูู!  ุญุงู ุงูููุช ููุฑุฏ ุนูู ูุฐู ุงูุญููุงูุงุช! <br><br>  ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ูุง ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุญุงุฑุฉ ุงูุตุญุฉ ุจุญูุซ ูุนุฑู ุงููุงุนุจ ุฃู ุงูุฃุนุฏุงุก ุฃูููุงุก ูุงูุฃุถุนู </li><li style=";text-align:right;direction:rtl">  ูุดู ุงูุฃุนุฏุงุก ุถูู ูุฏู ูุญุด </li><li style=";text-align:right;direction:rtl">  ุงุชุฎุงุฐ ูุฑุงุฑ - ุฃู ุงูุนุฏู ูุทูู ุงููุงุฑ ุนููู </li><li style=";text-align:right;direction:rtl">  ุญููุฉ ูู ุงููุฐุงุฆู </li></ul><br><h3 style=";text-align:right;direction:rtl">  ุดุฑูุท ุตุญุฉ ุงูุนุฏู </h3><br>  ูุชูููุฐ ุงููุทุงู ุงูุตุญู ุ ูุณุชุฎุฏู ุตูุฑุชูู - ูุงุญุฏุฉ ููุฎูููุฉ ุงููุธููุฉ ุ ูุงูุซุงููุฉ (ุงูุดุฑูุท ุงูุฃุฎุถุฑ ุฃุตุบุฑ ููููุงู) ุณูููู ุจุงูุชูุณุน ููููุง ูุตุญุฉ ุงูุนุฏู. <br><br>  ุงุณุญุจ ูู <em>ูุณุชุนุฑุถ Project</em> ุฅูู ูุดูุฏ <em>Prefabs \ Enemy</em> . <br><br>  ุซู ูู <em>ุงูุชุณูุณู ุงููุฑูู ุ</em> ุงุณุญุจ ูุฅุณูุงุท <em>Images \ Objects \ HealthBarBackground</em> ุนูู <em>ุงูุนุฏู</em> ูุฅุถุงูุชู ูุทูู. <br><br>  ูู <em>ุงูููุชุด ุ ูู</em> ุจุชุนููู <em>ูููุน</em> <em>HealthBarBackground</em> ุฅูู <em>(0 ุ 1 ุ -4)</em> . <br><br>  ุซู ูู <em>Project Browser ุ</em> ุญุฏุฏ <em>Images \ Objects \ HealthBar</em> ูุชุฃูุฏ ูู ุฃู <em>ุงููุญูุฑ</em> ุงูุฎุงุต ุจู ูู <em>ุงููุณุงุฑ</em> .  ุซู ุฃุถูู ูุทูู <em>ููุนุฏู</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> ููู ุจุชุนููู ูููุฉ <em>ุงููุฑูุฒ</em> <em>(-0.63 ุ 1 ุ -5)</em> .  ุจุงููุณุจุฉ ุฅูู <em>ูููุงุณ</em> <em>X</em> <em>ุ</em> ุงุถุจุท ุงููููุฉ ุนูู <em>125</em> . <br><br>  ุฅุถุงูุฉ ุจุฑูุงูุฌ ูุตู <em>C #</em> ุฌุฏูุฏ ูุณูู <em>HealthBar ุฅูู</em> ูุงุฆู ูุนุจุฉ <em>HealthBar</em> .  ูู ููุช ูุงุญู ุณูููู ุจุชุบููุฑู ุจุญูุซ ูุบูุฑ ุทูู ุดุฑูุท ุงูุตุญุฉ. <br><br>  ุจุนุฏ ุชุญุฏูุฏ ูุงุฆู <em>ุงูุนุฏู</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> ุ ุชุฃูุฏ ูู ุฃู ููุถุนู ูู <em>(20 ุ 0 ุ 0)</em> . <br><br>  ุงููุฑ ููู <em>ุชุทุจูู</em> ุฃุนูู <em>ุงูููุชุด</em> ูุญูุธ ุฌููุน ุงูุชุบููุฑุงุช ูุฌุฒุก ูู ุงูุฅุนุฏุงุฏ ุงููุณุจู.  ุฃุฎูุฑูุง ุ ุงุญุฐู ูุงุฆู <em>ุงูุนุฏู</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9e7/b84/7d2/9e7b847d22d2fda1e146dbf9149f912e.png"></div><br>  ุงูุขู ูุฑุฑ ูู ูุฐู ุงูุฎุทูุงุช ูุฅุถุงูุฉ ุดุฑูุท ุตุญุฉ <em>Prefabs \ Enemy2</em> . <br><br><h3 style=";text-align:right;direction:rtl">  ูู ุจุชุบููุฑ ุทูู ุดุฑูุท ุงูุตุญุฉ </h3><br>  ุงูุชุญ IDE <em>HealthBar.cs</em> ูุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> maxHealth = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> currentHealth = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> originalScale;</code> </pre> <br>  ูู <code>maxHealth</code> ูุชู ุชุฎุฒูู ุฃูุตู ุตุญุฉ ุงูุนุฏู ุ ููู <code>currentHealth</code> - ุงูุตุญุฉ ุงููุชุจููุฉ.  ุฃุฎูุฑูุง ุ ูู <code>originalScale</code> ูู ุงูุญุฌู ุงูุฃููู ูุดุฑูุท ุงูุตุญุฉ. <br><br>  ุญูุธ ูุงุฆู <code>originalScale</code> ูู <code>Start()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">originalScale = gameObject.transform.localScale.x;</code> </pre> <br>  ูููู ุจุชุฎุฒูู ุงููููุฉ <code>x</code> ูุฎุงุตูุฉ <code>localScale</code> . <br><br>  ูู ุจุชุนููู ูููุงุณ ุดุฑูุท ุงูุตุญุฉ ุจุฅุถุงูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ุฅูู <code>Update()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">Vector3 tmpScale = gameObject.transform.localScale; tmpScale.x = currentHealth / maxHealth * originalScale; gameObject.transform.localScale = tmpScale;</code> </pre> <br>  ูููููุง ูุณุฎ <code>localScale</code> ุฅูู ูุชุบูุฑ ูุคูุช ูุฃูู ูุง ูููููุง ุชุบููุฑ ูููุชู <i>x</i> ุจุดูู ูููุตู.  ุซู ูุญุณุจ ูููุงุณ <i>x</i> ุงูุฌุฏูุฏ ุจูุงุกู ุนูู ุงูุญุงูุฉ ุงูุตุญูุฉ ุงูุญุงููุฉ <code>localScale</code> ูุฑุฉ ุฃุฎุฑู ูููุฉ <code>localScale</code> ููุชุบูุฑ ูุคูุช. <br><br>  ุงุญูุธ ุงูููู ูุงุจุฏุฃ ุงููุนุจุฉ ูู ุงููุญุฏุฉ.  ุนูู ุงูุฃุนุฏุงุก ุณุชุฑู ุฎุทูุท ุงูุตุญุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dd4/78a/29c/dd478a29c258b63dc809ca16de4ee16a.png"></div><br>  ุฃุซูุงุก ุชุดุบูู ุงููุนุจุฉ ุ ูู ุจุชูุณูุน ุฃุญุฏ ูุงุฆูุงุช <em>ุงูุนุฏู (Clone)</em> ูู <em>ุงูุชุณูุณู ุงููุฑูู</em> ูุญุฏุฏ <em>HealthBar ุงูุชุงุจุน ููุง</em> .  ูู ุจุชุบููุฑ ูููุชู <em>ุงูุตุญูุฉ ุงูุญุงููุฉ</em> ูุงูุธุฑ ููู ูุชุบูุฑ ุดุฑูุท ุงูุตุญุฉ ุงูุฎุงุต ุจู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5ee/af7/22c/5eeaf722c2e6a6ee1d2799380cdcfead.gif"></div><br><h3 style=";text-align:right;direction:rtl">  ูุดู ุงูุฃุนุฏุงุก ุถูู ุงููุทุงู </h3><br>  ุชุญุชุงุฌ ูุญูุดูุง ุงูุขู ุฅูู ูุนุฑูุฉ ุงูุฃุนุฏุงุก ุงูุฐูู ุชุณุชูุฏููู.  ูููู ูุจู ุฃู ุชุฏุฑู ูุฐู ุงููุฑุตุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅุนุฏุงุฏ Monster ู Enemy. <br><br>  ุญุฏุฏ <em>Prefabs \ Monster</em> Project Browser ูุฃุถู ูููู <em>Circle Collider 2D</em> ุฅููู ูู <em>ุงูููุชุด</em> . <br><br>  ูู ุจุชุนููู ูุนููุฉ <em>ูุตู ุงููุทุฑ</em> ูููุตุงุฏู ุฅูู <em>2.5</em> - ุณูุดูุฑ ูุฐุง ุฅูู ูุตู ูุทุฑ ูุฌูู ุงููุญูุด. <br><br>  ุญุฏุฏ ุฎุงูุฉ ุงูุงุฎุชูุงุฑ " <em>ูุดุบู</em> " ุจุญูุซ ุชูุฑ ุงููุงุฆูุงุช ุนุจุฑ ูุฐู ุงูููุทูุฉ ุจุฏูุงู ูู ุงูุงุตุทุฏุงู ุจูุง. <br><br>  ุฃุฎูุฑูุง ุ ูู ุงูุฌุฒุก ุงูุนููู ูู <em>ุงูููุชุด</em> ุ ุงุถุจุท <em>ุทุจูุฉ</em> ุงููุญุด ุนูู <em>ุชุฌุงูู Raycast</em> .  ูู ูุฑุจุน ุงูุญูุงุฑ ุ ุงููุฑ ููู <em>ูุนู ุ ูู ุจุชุบููุฑ ุงูุฃุทูุงู</em> .  ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ ุชุฌุงูู Raycast ุ ูุณูู ูุณุชุฌูุจ ุงููุตุงุฏู ูุฃุญุฏุงุซ ุงูููุฑ ุจุงููุงูุณ.  ุณุชููู ูุฐู ูุดููุฉ ูุฃู ุงููุญูุด ุชููุน ุงูุฃุญุฏุงุซ ุงูููุฌูุฉ ููุงุฆูุงุช Openspot ุชุญุชูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e3e/302/cf2/e3e302cf21adee1433fe2183120c2ba1.png"></div><br>  ูุถูุงู ุงูุชุดุงู ุงูุนุฏู ูู ููุทูุฉ ุงูุฒูุงุฏ ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุตุงุฏู ูุฌุณู ุตูุจ ุฅููู ุ ูุฃู ุงููุญุฏุฉ ุชุฑุณู ุฃุญุฏุงุซ ุงูุฒูุงุฏ ููุท ุนูุฏูุง ูุชู ุฅุฑูุงู ุฌุณู ุตูุจ ุจุฃุญุฏ ุงููุตุงุฏูุงุช. <br><br>  ูู <em>ูุณุชุนุฑุถ Project ุ</em> ุญุฏุฏ <em>Prefabs \ Enemy</em> .  ุฃุถู ูููู <em>Rigidbody 2D</em> ูุญุฏุฏ <em>Kinematic</em> <em>ูููุน ุงูุฌุณู</em> .  ูุฐุง ูุนูู ุฃู ุงูุฌุณู ูู ูุชุฃุซุฑ ุจุงูููุฒูุงุก. <br><br>  ุฃุถู <em>Circle Collider 2D</em> ูุน <em>ูุตู ูุทุฑ</em> <em>1</em> .  ูุฑุฑ ูุฐู ุงูุฎุทูุงุช ูู <em>Prefabs \ Enemy 2</em> . <br><br>  ูุชู ุชูููู ุงููุดุบูุงุช ุ ุจุญูุซ ุชุฏุฑู ุงููุญูุด ุฃู ุงูุฃุนุฏุงุก ุฏุงุฎู ุฏุงุฆุฑุฉ ูุตู ูุทุฑูุง. <br><br>  ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุนุฏุงุฏ ุดูุก ุขุฎุฑ: ูุต ูุฎุจุฑ ุงููุญูุด ุนูุฏูุง ูุชู ุชุฏููุฑ ุงูุนุฏู ุญุชู ูุง ูุซูุฑูุง ุงุณุชุซูุงุกูุง ุจูููุง ููุงุตููู ุฅุทูุงู ุงููุงุฑ. <br><br>  ุฅูุดุงุก ุจุฑูุงูุฌ ูุตู <em>C #</em> ุฌุฏูุฏ ูุณูู <em>EnemyDestructionDelegate</em> ูุฅุถุงูุชู ุฅูู <em>Preems</em> <em>Enemy</em> ู <em>Enemy2</em> . <br><br>  ุงูุชุญ <em>EnemyDestructionDelegate.cs</em> ูู IDE ูุฃุถู ุฅุนูุงู ุงูุชูููุถ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnemyDelegate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameObject enemy</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> EnemyDelegate enemyDelegate;</code> </pre> <br>  ูููู ููุง ุจุฅูุดุงุก <code>delegate</code> ุ ุฃู ุญุงููุฉ ูุฏุงูุฉ ูููู ุชูุฑูุฑูุง ููุชุบูุฑ. <br><br><blockquote style=";text-align:right;direction:rtl">  <em>ููุงุญุธุฉ</em> : ูุชู ุงุณุชุฎุฏุงู ุงููููุถูู ุนูุฏูุง ูุฌุจ ุฃู ูููู ูุงุฆู ูุนุจุฉ ูุงุญุฏ ุจุฅุนูุงู ูุงุฆูุงุช ุงููุนุจุฉ ุงูุฃุฎุฑู ุจุงูุชุบููุฑุงุช.  ุงูุฑุฃ ุงููุฒูุฏ ุนู ุงูููุฏูุจูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ูู ูุซุงุฆู ุงููุญุฏุฉ">ูุซุงุฆู ุงููุญุฏุฉ</a> . </blockquote><br>  ุฃุถู ุงูุทุฑููุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (enemyDelegate != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { enemyDelegate(gameObject); } }</code> </pre> <br>  ุนูุฏูุง ูุชู ุฅุชูุงู ูุงุฆู ูุนุจุฉ ุ ุชุณุชุฏุนู ุงููุญุฏุฉ ูุฐู ุงูุทุฑููุฉ ุชููุงุฆููุง <code>null</code> ุนุฏู ูุฌูุฏ ุนุฏู ูุณุงูุงุฉ.  ูู ุญุงูุชูุง ุ ูุณูููุง ูุน <code>gameObject</code> ููุนููุฉ.  ููุฐุง ูุณูุญ ูุฌููุน ุงููุฌูุจูู ุงููุณุฌููู ูููุฏูุจูู ุจูุนุฑูุฉ ุฃู ุงูุนุฏู ูุฏ ุชู ุชุฏููุฑู. <br><br>  ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู ุงููุญุฏุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ูุนุทู ุงููุญูุด ุฑุฎุตุฉ ูููุชู </h3><br>  ูุงูุขู ูููู ูููุญูุด ุงูุชุดุงู ุงูุฃุนุฏุงุก ุฏุงุฎู ุฏุงุฆุฑุฉ ูุตู ูุทุฑ ุนูููู.  ูู ุจุฅุถุงูุฉ ุจุฑูุงูุฌ ูุตู ุฌุฏูุฏ ูู <em>C #</em> ุฅูู <em>ุงูุฅุนุฏุงุฏ ุงููุณุจู</em> ูู <em>Monster</em> ููู <em>ุจุชุณููุชู ShootEnemies</em> . <br><br>  ุงูุชุญ <em>ShootEnemies.cs</em> ูู IDE ูุฃุถู ูุง ููู <code>using</code> ุงูุจูุงุก ุฅูููุง ูููุตูู ุฅูู <code>Generics</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic;</code> </pre> <br>  ุฃุถู ูุชุบูุฑูุง ูุชุชุจุน ุฌููุน ุงูุฃุนุฏุงุก ุฏุงุฎู ุงููุทุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;GameObject&gt; enemiesInRange;</code> </pre> <br>  ูู <code>enemiesInRange</code> ุณูููู ุจุชุฎุฒูู ุฌููุน ุงูุฃุนุฏุงุก ุฏุงุฎู ุงููุทุงู. <br><br>  ุชููุฆุฉ ุงูุญูู ูู <code>Start()</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">enemiesInRange = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;GameObject&gt;();</code> </pre> <br>  ูู ุงูุจุฏุงูุฉ ุ ูุง ููุฌุฏ ุฃุนุฏุงุก ูู ุฏุงุฆุฑุฉ ุงูุนูู ุ ูุฐูู ููุดุฆ ูุงุฆูุฉ ูุงุฑุบุฉ. <br><br>  ุงููุฃ ูุงุฆูุฉ <code>enemiesInRange</code> !  ุฃุถู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 void OnEnemyDestroy(GameObject enemy) { enemiesInRange.Remove (enemy); } void OnTriggerEnter2D (Collider2D other) { // 2 if (other.gameObject.tag.Equals("Enemy")) { enemiesInRange.Add(other.gameObject); EnemyDestructionDelegate del = other.gameObject.GetComponent&lt;EnemyDestructionDelegate&gt;(); del.enemyDelegate += OnEnemyDestroy; } } // 3 void OnTriggerExit2D (Collider2D other) { if (other.gameObject.tag.Equals("Enemy")) { enemiesInRange.Remove(other.gameObject); EnemyDestructionDelegate del = other.gameObject.GetComponent&lt;EnemyDestructionDelegate&gt;(); del.enemyDelegate -= OnEnemyDestroy; } }</span></span></code> </pre> <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู <code>OnEnemyDestroy</code> ูุฒูู ุงูุนุฏู ูู ุฃุนุฏุงุก <code>enemiesInRange</code> .  ุนูุฏูุง ูุฎุทู ุนุฏู ุนูู ุฒูุงุฏ ุญูู ูุญุด ุ ูุชู <code>OnTriggerEnter2D</code> . </li><li style=";text-align:right;direction:rtl">  ุซู ูุถูู ุงูุนุฏู ุฅูู ูุงุฆูุฉ <code>EnemyDestructionDelegate</code> ุญุฏุซ <code>OnEnemyDestroy</code> .  ูุฐุง ูุถูู ุฃูู ุนูุฏ ุชุฏููุฑ ุงูุนุฏู ุณูุชู ุงุณุชุฏุนุงุก <code>OnEnemyDestroy</code> .  ูุง ูุฑูุฏ ุฃู ุชููู ุงููุญูุด ุงูุฐุฎูุฑุฉ ุนูู ุงูุฃุนุฏุงุก ุงููุชูู ุ ุฃููุณ ูุฐููุ </li><li style=";text-align:right;direction:rtl">  ูู <code>OnTriggerExit2D</code> ูููู ุจุฅุฒุงูุฉ ุงูุนุฏู ูู ุงููุงุฆูุฉ ูุฅูุบุงุก ุชุณุฌูู ุงููููุถ.  ุงูุขู ูุญู ูุนูู ุฃู ุงูุฃุนุฏุงุก ูู ุงููุทุงู. </li></ol><br>  ุงุญูุธ ุงูููู ูุงุจุฏุฃ ุงููุนุจุฉ ูู ุงููุญุฏุฉ.  ููุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู ุ <code>enemiesInRange</code> ุงููุญุด ุ ุญุฏุฏู ูุงุชุจุน ุงูุชุบููุฑุงุช ูู ูุงุฆูุฉ <code>enemiesInRange</code> ูู <code>enemiesInRange</code> . <br><br><h3 style=";text-align:right;direction:rtl">  ุงุฎุชูุงุฑ ุงููุฏู </h3><br>  ุชุนุฑู ุงููุญูุด ุงูุขู ุงูุนุฏู ุงูููุฌูุฏ ูู ุงููุทุงู.  ูููู ูุงุฐุง ุณููุนููู ุนูุฏูุง ูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุฃุนุฏุงุก ูู ูุตู ุงููุทุฑุ <br><br>  ุจุงูุทุจุน ุ ุณููุงุฌููู ุงูุฃูุฑุจ ุฅูู ุงููุจุฏ! <br><br>  ุงูุชุญ ุงูุจุฑูุงูุฌ ุงููุตู <em>MoveEnemy.cs</em> IDE ูุฃุถู ุทุฑููุฉ ุฌุฏูุฏุฉ ุชุญุณุจ ูุฐุง ุงููุญุด: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DistanceToGoal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; distance += Vector2.Distance( gameObject.transform.position, waypoints [currentWaypoint + <span class="hljs-number"><span class="hljs-number">1</span></span>].transform.position); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = currentWaypoint + <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; waypoints.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>; i++) { Vector3 startPosition = waypoints [i].transform.position; Vector3 endPosition = waypoints [i + <span class="hljs-number"><span class="hljs-number">1</span></span>].transform.position; distance += Vector2.Distance(startPosition, endPosition); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance; }</code> </pre> <br>  ูุญุณุจ ุงูุฑูุฒ ุทูู ุงููุณุงุฑ ุงูุฐู ูู ูุณููู ุงูุนุฏู ุจุนุฏ.  ููููุงู ุจุฐูู ุ ูุณุชุฎุฏู <code>Distance</code> ุ ูุงูุชู ูุชู ุญุณุงุจูุง <code>Vector3</code> ุจูู ูุซูููู ูู <code>Vector3</code> . <br><br>  ุณูุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ูุงุญููุง ููุนุฑูุฉ ุงููุฏู ุงูุฐู ุชุฑูุฏ ููุงุฌูุชู.  ููุน ุฐูู ุ ูู ุญูู ุฃู ูุญูุดูุง ููุณุช ูุณูุญุฉ ูุนุงุฌุฒุฉ ุ ูุฐูู ุณููุนู ุฐูู ุฃููุงู. <br><br>  ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู Unity ูุจุฏุก ุฅุนุฏุงุฏ ุงูุฃุตุฏุงู ุงูุฎุงุตุฉ ุจู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฏุนููุง ูุนุทู ูุฐุงุฆู ุงููุญูุด.  ุงููุซูุฑ ูู ุงููุฐุงุฆู! </h3><br>  ุงุณุญุจ ูู ูุณุชุนุฑุถ Project ุฅูู <em>ุงูุตูุฑ / ุงููุงุฆูุงุช / ุงููุดูุฏ Bullet1</em> .  ูู ุจุชุนููู ุงูููุถุน ุนูู <em>z</em> ุฅูู <em>-2</em> - ุงูููุงุถุน ุนูู x ู y ููุณุช ูููุฉ ุ ูุฃููุง ูุนูููุง ูู ูู ูุฑุฉ ูููู ูููุง ุจุฅูุดุงุก ูุซูู ุฌุฏูุฏ ูููุฐููุฉ ุฃุซูุงุก ุชูููุฐ ุงูุจุฑูุงูุฌ. <br><br>  ูู ุจุฅุถุงูุฉ ุจุฑูุงูุฌ ูุตู <em>C #</em> ุฌุฏูุฏ ูุณูู <em>BulletBehavior</em> ุ ุซู ูู IDE ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ุฅููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> damage; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject target; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 startPosition; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3 targetPosition; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> startTime; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameManagerBehavior gameManager;</code> </pre> <br>  ุชุญุฏุฏ ุงูุณุฑุนุฉ ุณุฑุนุฉ ุงูููุฐููุงุช ุ  <code>damage</code> ูุงุถุญ ูู ุงูุงุณู. <br><br>  <code>target</code> ุ <code>startPosition</code> ู <code>targetPosition</code> ุชุญุฏูุฏ ุงุชุฌุงู ุงูููุฐูู. <br><br>  <code>distance</code> <code>startTime</code> ุชุชุจุน ุงููุถุน ุงูุญุงูู ูููุฐููุฉ.  ููุงูุฆ <code>gameManager</code> ุงููุงุนุจ ุนูุฏูุง ููุชู ุงูุนุฏู. <br><br>  ูู ุจุชุนููู ููู ูุฐู ุงููุชุบูุฑุงุช ูู <code>Start()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">startTime = Time.time; distance = Vector2.Distance (startPosition, targetPosition); GameObject gm = GameObject.Find(<span class="hljs-string"><span class="hljs-string">"GameManager"</span></span>); gameManager = gm.GetComponent&lt;GameManagerBehavior&gt;();</code> </pre> <br> <code>startTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฏ ูููุฉ ุงูููุช ุงูุญุงูู ููุญุณุจ ุงููุณุงูุฉ ุจูู ููุงุถุน ุงูุจุฏุงูุฉ ูุงููุฏู. </font><font style="vertical-align: inherit;">ุฃูุถุง ุ ูุงูุนุงุฏุฉ ุ ูุญุตู </font></font><code>GameManagerBehavior</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุญูู ูู ุญุฑูุฉ ุงูููุฐูู ุ ุฃุถู </font></font><code>Update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฏ ุงูุชุงูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 float timeInterval = Time.time - startTime; gameObject.transform.position = Vector3.Lerp(startPosition, targetPosition, timeInterval * speed / distance); // 2 if (gameObject.transform.position.Equals(targetPosition)) { if (target != null) { // 3 Transform healthBarTransform = target.transform.Find("HealthBar"); HealthBar healthBar = healthBarTransform.gameObject.GetComponent&lt;HealthBar&gt;(); healthBar.currentHealth -= Mathf.Max(damage, 0); // 4 if (healthBar.currentHealth &lt;= 0) { Destroy(target); AudioSource audioSource = target.GetComponent&lt;AudioSource&gt;(); AudioSource.PlayClipAtPoint(audioSource.clip, transform.position); gameManager.Gold += 50; } } Destroy(gameObject); }</span></span></code> </pre> <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุณุจ ุงูููุถุน ุงูุฌุฏูุฏ ูููุฐููุฉ ุ ุจุงุณุชุฎุฏุงู </font></font><code>Vector3.Lerp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุงุฑุจ ุจูู ูุถุนู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุตูุช ุงูููุฐููุฉ </font></font><code>targetPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฅููุง ูุชุญูู ููุนุฑูุฉ ูุง ุฅุฐุง ูุงูุช ูุง ุชุฒุงู ููุฌูุฏุฉ </font></font><code>target</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุตู ุนูู ุนูุตุฑ </font></font><code>HealthBar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฏู ููุฎูู ูู ุตุญุชู ุจุญุฌู </font></font><code>damage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฐูู.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ุชู ุชุฎููุถ ุตุญุฉ ุงูุนุฏู ุฅูู ุงูุตูุฑ ุ ูุฅููุง ูุฏูุฑูุง ููุนูุฏ ุฅูุชุงุฌ ุงูุชุฃุซูุฑ ุงูุตูุชู ูููุงูุฆ ุงููุงุนุจ ุนูู ุงูุฏูุฉ. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู ุงููุญุฏุฉ. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุตูุน ูุฐุงุฆู ูุจูุฑุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ูููู ุฑุงุฆุนูุง ุฅุฐุง ุจุฏุฃ ุงููุญุด ูู ุฅุทูุงู ุงููุฒูุฏ ูู ุงููุฐุงุฆู ุนูู ูุณุชููุงุช ุนุงููุฉุ ูุญุณู ุงูุญุธ ุ ูุฐุง ุณูู ุงูุชูููุฐ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุญุจ ูุงุฆู ุงููุนุจุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุณูุณู ุงููุฑูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุนูุงูุฉ ุงูุชุจููุจ " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดุฑูุน"</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฅูุดุงุก </font><em><font style="vertical-align: inherit;">ูุณุจูุฉ</font></em><font style="vertical-align: inherit;"> ูุฐููุฉ. ูู ุจุฅุฒุงูุฉ ุงููุงุฆู ุงูุฃุตูู ูู ุงููุดูุฏ - ูู ูุญุชุงุฌู ุจุนุฏ ุงูุขู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุชูู ุชูุฑุงุฑ ุงูุฌุงูุฒุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงุณู ูุณุฎ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet3</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏุฏ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุชุด ุ ูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุชุนููู ุญูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sprite</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููู </font><em><font style="vertical-align: inherit;">Sprite </font></em></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images / Objects / Bullet2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ุณูุฌุนู Bullet2 ุฃูุซุฑ ุจูููู ูู Bullet1. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฑ ุงูุฅุฌุฑุงุก ูุชุบููุฑ ุงูุนูุฑูุช ูู Bullet3 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุงูุฒุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images / Objects / Bullet3</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet Behavior</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูููู ุจุชุนุฏูู ููุฏุงุฑ ุงูุถุฑุฑ ุงููุงุฌู ุนู ุงููุฐุงุฆู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏุฏ </font><em><font style="vertical-align: inherit;">Bullet1</font></em><font style="vertical-align: inherit;"> ุงูุฌุงูุฒุฉ </font><font style="vertical-align: inherit;">ูู ุนูุงูุฉ ุงูุชุจููุจ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุนูู </font><em><font style="vertical-align: inherit;">ุงูููุชุด</font></em><font style="vertical-align: inherit;"> ุฃู ุชุฑู </font><em><font style="vertical-align: inherit;">ุฑุตุงุตุฉ ุงูุณููู (ุณููุงุฑูู)</font></em><font style="vertical-align: inherit;"> ุ ูุงูุชู ูููู ุชุนููู </font><em><font style="vertical-align: inherit;">ุงูุฃุถุฑุงุฑ</font></em><font style="vertical-align: inherit;"> ูููุฉ </font><em><font style="vertical-align: inherit;">10</font></em><font style="vertical-align: inherit;"> ู </font><em><font style="vertical-align: inherit;">Bullet1</font></em><font style="vertical-align: inherit;"> ุ </font><em><font style="vertical-align: inherit;">15</font></em><font style="vertical-align: inherit;"> ู </font><em><font style="vertical-align: inherit;">Bullet2</font></em><font style="vertical-align: inherit;"> ู </font><em><font style="vertical-align: inherit;">20</font></em><font style="vertical-align: inherit;"> ู </font><em><font style="vertical-align: inherit;">Bullet3</font></em></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุฃู ุฃู ููู ุฃุฎุฑู ุชูุถููุง. </font></font><br><br><blockquote style=";text-align:right;direction:rtl"> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ููุช ุจุชุบููุฑ ุงูููู ุจุญูุซ ูุตุจุญ ุณุนุฑ ุงูุถุฑุฑ ุฃุนูู ูู ุงููุณุชููุงุช ุงูุฃุนูู. </font><font style="vertical-align: inherit;">ูุฐุง ูููุน ุงูุชุฑููุฉ ูู ุงูุณูุงุญ ููุงุนุจ ุจุชุฑููุฉ ุงููุญูุด ูู ุฃูุถู ุงูููุงุท.</font></font></blockquote><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c0a/e2d/da2/c0ae2dda288d44bc380864dd1e85f3b6.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุงุฆู ุงูุฌุงูุฒุฉ - ูุฒูุฏ ุงูุญุฌู ูุน ุงููุณุชูู</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ูุณุชูู ุงููุฐุงุฆู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุนููู ูุฐุงุฆู ูุฎุชููุฉ ููุณุชููุงุช ูุฎุชููุฉ ูู ุงููุญูุด ุ ุจุญูุซ ุชุฏูุฑ ุงููุญูุด ุงูุฃููู ุงูุฃุนุฏุงุก ุจุดูู ุฃุณุฑุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MonsterData.cs</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู IDE </font><font style="vertical-align: inherit;">ูุฃุถู ุฅูู </font></font><code>MonsterLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject bullet; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> fireRate;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ูููุง ุจุฅุนุฏุงุฏ ุงูููุฐูู ุงููุณุจู ูุชูุงุชุฑ ุฅุทูุงู ุงููุงุฑ ููู ูุณุชูู ูู ุงููุญูุด. </font><font style="vertical-align: inherit;">ุงุญูุธ ุงูููู ูุงุฑุฌุน ุฅูู ุงููุญุฏุฉ ูุฅููุงู ุฅุนุฏุงุฏ ุงููุญุด. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏุฏ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุนุฏุงุฏ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุณุจู ูู </font><em><font style="vertical-align: inherit;">Monster</font></em><font style="vertical-align: inherit;"> ูู Project Browser </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุชุด ุ ูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุชูุณูุน </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชููุงุช</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monster Data (Script)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงุถุจุท </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏู ุงูุญุฑูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ุนูุตุฑ ุนูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุซู ูู ุจุชุนููู ูุนููุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุนูุตุฑ 0 ู 1 ู 2 ุนูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bullet3</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุชุนููู ูุณุชููุงุช ุงููุญุด ุนูู ุงููุญู ุงูุชุงูู:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8c0/7d0/fd9/8c07d0fd96492f9e0e6c6e1737791c11.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุงุฆู ุชูุชู ุงูุฃุนุฏุงุกุ </font><font style="vertical-align: inherit;">ูุนู ูุนูุง! </font><font style="vertical-align: inherit;">ุฏุนููุง ููุชุญ ุงููุงุฑ!</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญ ุงููุงุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShootEnemies.cs</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู IDE </font><font style="vertical-align: inherit;">ูุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lastShotTime; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MonsterData monsterData;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ููุญู ุงูุงุณู ุ ุชุชุจุน ูุฐู ุงููุชุบูุฑุงุช ููุช ุขุฎุฑ ููุทุฉ ูููุญุด ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงููููู </font></font><code>MonsterData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฐู ูุญุชูู ุนูู ูุนูููุงุช ุญูู ููุน ูุฐุงุฆู ุงููุญุด ุ ูุชูุงุชุฑ ุฅุทูุงู ุงููุงุฑ ุ ููุง ุฅูู ุฐูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุนููู ููู ูุฐู ุงูุญููู ูู </font></font><code>Start()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">lastShotTime = Time.time; monsterData = gameObject.GetComponentInChildren&lt;MonsterData&gt;();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ููุง ุจุชุนููู </font></font><code>lastShotTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ ุงูููุช ุงูุญุงูู ูุงูุญุตูู ุนูู ุงููุตูู ุฅูู ูููู </font></font><code>MonsterData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุงููุงุฆู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุงูุทุฑููุฉ ุงูุชุงููุฉ ูุชูููุฐ ุงูุชุตููุฑ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Shoot</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D target</span></span></span><span class="hljs-function">)</span></span> { GameObject bulletPrefab = monsterData.CurrentLevel.bullet; <span class="hljs-comment"><span class="hljs-comment">// 1 Vector3 startPosition = gameObject.transform.position; Vector3 targetPosition = target.transform.position; startPosition.z = bulletPrefab.transform.position.z; targetPosition.z = bulletPrefab.transform.position.z; // 2 GameObject newBullet = (GameObject)Instantiate (bulletPrefab); newBullet.transform.position = startPosition; BulletBehavior bulletComp = newBullet.GetComponent&lt;BulletBehavior&gt;(); bulletComp.target = target.gameObject; bulletComp.startPosition = startPosition; bulletComp.targetPosition = targetPosition; // 3 Animator animator = monsterData.CurrentLevel.visualization.GetComponent&lt;Animator&gt;(); animator.SetTrigger("fireShot"); AudioSource audioSource = gameObject.GetComponent&lt;AudioSource&gt;(); audioSource.PlayOneShot(audioSource.clip); }</span></span></code> </pre> <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุตู ุนูู ููุงูุน ุงูุจุฏุงูุฉ ูุงููุฏู ููุฑุตุงุตุฉ. </font><font style="vertical-align: inherit;">ุถุน ุงูููุถุน z ูุณุงูู z </font></font><code>bulletPrefab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงูุณุงุจู ุ ูููุง ุจุชุนููู ุงููุถุน ุงููุณุจู ูููุฐููุฉ ูู z ุจุญูุซ ุชุธูุฑ ุงูููุฐููุฉ ุชุญุช ูุญุด ุงูุฑูุงูุฉ ุ ูููู ููู ุงูุฃุนุฏุงุก.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ูุซูู ูุตุฏูุฉ ุฌุฏูุฏุฉ ุจุงุณุชุฎุฏุงู ุงููุดุฑุฉ </font></font><code>bulletPrefab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุณุจุฉ </font></font><code>MonsterLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุนููู </font></font><code>startPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>targetPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐููุฉ.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุนู ุงููุนุจุฉ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู: ุนูุฏูุง ูุทูู ุงููุญุด ุ ุงุจุฏุฃ ุงูุฑุณูู ุงููุชุญุฑูุฉ ููุชุตููุฑ ูุดุบู ุตูุช ุงูููุฒุฑ. </font></font></li></ol><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุถุน ูู ุฐูู ูุนูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงู ุงูููุช ูุชุฌููุน ูู ุดูุก. </font><font style="vertical-align: inherit;">ุญุฏุฏ ุงููุฏู ูุงุฌุนู ุงููุญุด ููุธุฑ ุฅููู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3c5/934/9a7/3c59349a719669c9508c38f155bf25dc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุจุฑูุงูุฌ ุงููุตู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShootEnemies.cs ุ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุถู ุฅูู </font></font><code>Update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุงูุฑูุฒ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">GameObject target = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 float minimalEnemyDistance = float.MaxValue; foreach (GameObject enemy in enemiesInRange) { float distanceToGoal = enemy.GetComponent&lt;MoveEnemy&gt;().DistanceToGoal(); if (distanceToGoal &lt; minimalEnemyDistance) { target = enemy; minimalEnemyDistance = distanceToGoal; } } // 2 if (target != null) { if (Time.time - lastShotTime &gt; monsterData.CurrentLevel.fireRate) { Shoot(target.GetComponent&lt;Collider2D&gt;()); lastShotTime = Time.time; } // 3 Vector3 direction = gameObject.transform.position - target.transform.position; gameObject.transform.rotation = Quaternion.AngleAxis( Mathf.Atan2 (direction.y, direction.x) * 180 / Mathf.PI, new Vector3 (0, 0, 1)); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ูุฐุง ุงูุฑูุฒ ุฎุทูุฉ ุจุฎุทูุฉ. </font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุฏ ุงูุบุฑุถ ูู ุงููุญุด. </font><font style="vertical-align: inherit;">ูุจุฏุฃ ูู ุฃูุตู ูุณุงูุฉ ููููุฉ ูู </font></font><code>minimalEnemyDistance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุชูู ูู ุฏูุฑุฉ ูู ุฌููุน ุงูุฃุนุฏุงุก ุฏุงุฎู ุงููุทุงู ููุฌุนู ุงูุนุฏู ูุฏููุง ุฌุฏูุฏูุง ุฅุฐุง ูุงูุช ุงููุณุงูุฉ ุจููู ูุจูู ููู ุชุนุฑูู ุงูุงุฑุชุจุงุท ุฃูู ูู ุฃุตุบุฑ ุงูุญุงูู.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูู </font></font><code>Shoot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูููุช ุงููููุถู ุฃูุจุฑ ูู ุชุฑุฏุฏ ุฅุทูุงู ุงููุญุด ูุชุนููู </font></font><code>lastShotTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ ุงูููุช ุงูุญุงูู.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุณุจ ุฒุงููุฉ ุงูุฏูุฑุงู ุจูู ุงููุญุด ููุฏูู. </font><font style="vertical-align: inherit;">ูุฏูุฑ ุงููุญุด ุฅูู ูุฐู ุงูุฒุงููุฉ. </font><font style="vertical-align: inherit;">ุงูุขู ุณูู ููุธุฑ ุฏุงุฆููุง ุฅูู ุงููุฏู.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุญูุธ ุงูููู ูุงุจุฏุฃ ุงููุนุจุฉ ูู ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ุณูู ุชุจุฏุฃ ุงููุญูุด ูู ุญูุงูุฉ ูุงุฆุณุฉ ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท. </font><font style="vertical-align: inherit;">ููุฏ ุงูุชูููุง ุฃุฎูุฑูุง!</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุฃูู ุฃุฐูุจ ุจุนุฏ ุฐูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชูุฒูู ุงููุดุฑูุน ุงูููุงุฆู </font></font><a href="" title="ููุง"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ูููุง ุจุนูู ุฑุงุฆุน ูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ููุฏููุง ุงูุขู ูุนุจุฉ ุฑุงุฆุนุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ููู ุจุนุถ ุงูุฃููุงุฑ ููุฒูุฏ ูู ุงูุชุทููุฑ ูููุดุฑูุน:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฒูุฏ ูู ุฃููุงุน ุงูุฃุนุฏุงุก ูุงููุญูุด </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทุฑู ูุฎุชููุฉ ููุฃุนุฏุงุก </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุชููุงุช ูุนุจุฉ ูุฎุชููุฉ </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชุทูุจ ูู ูู ูุฐู ุงูุฌูุงูุจ ุชุบููุฑุงุช ุทูููุฉ ููููู ุฃู ูุฌุนู ุงููุนุจุฉ ุฃูุซุฑ ูุชุนุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุฅูุดุงุก ูุนุจุฉ ุฌุฏูุฏุฉ ุจูุงุกู ุนูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ูุณูู ูุณุนุฏูู ุชุดุบูููุง ุ ูุฐุง ูุฑุฌู ูุดุงุฑูุฉ ุฑุงุจุท ููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุนุซูุฑ ุนูู ุฃููุงุฑ ูุซูุฑุฉ ููุงูุชูุงู ุญูู ุฅูุดุงุก ูุนุจุฉ ุถุฑุจ ุจุฑุฌ ุงูุฏูุงุน ูู ูุฐู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" title="ุตูุน ูุนุจุฉ ุงูุฏูุงุน ุนู ุจุฑุฌ ููุช: ููุงุจูุฉ ูุทูุฑุฉ ูุฃูุถู ุงูุชุทุจููุงุช"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุจูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar413915/">https://habr.com/ru/post/ar413915/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar413901/index.html">ุงูุชุญูู ูู ุฑูุจูุช EduMip ุฐุงุชู ุงูุชูุงุฒู ุจุงุณุชุฎุฏุงู ุนุตุง ุงูุชุญูู PS4 Dualshock 4 ุนุจุฑ ROS</a></li>
<li><a href="../ar413903/index.html">ููู ุชุญูู ูุงูุจุฑุฏุฌ ุฃูุงููุชููุง ุงูููุฑุงุช ุฅูู ุงูุฃุตูุงุช</a></li>
<li><a href="../ar413907/index.html">ููุฎุต ุงูููุงุฏ ุงููุซูุฑุฉ ููุงูุชูุงู ููุทูุฑ ุงูุฌูุงู ุฑูู 256 (4 ููููู - 12 ููููู)</a></li>
<li><a href="../ar413909/index.html">ูุฐุง ูู ุงูููุงู ุงูุฐู ุฐูุจุช ุฅููู ุฐูุฑูุงุช ุทูููุชู</a></li>
<li><a href="../ar413913/index.html">ุงูุชุนุฑู ุนูู ูุนุงุฑุถ ุงููุนุฏุงุช ุงูุณูุนูุฉ ูุงูุจุตุฑูุฉ: ุจุฅูุฌุงุฒ ุนู ุฃูุจุฑ ุงูุฃุญุฏุงุซ - ุงูุฌุฒุก ุงูุฃูู</a></li>
<li><a href="../ar413917/index.html">ูุนุชูุฏ ุฃุตุญุงุจ ุญููู ุงูุทุจุน ูุงููุดุฑ ุฃู Yandex ูุณุงูู ูู ููู ุงููุฑุตูุฉ ูู ุงูุจูุงุฏ</a></li>
<li><a href="../ar413921/index.html">ููููุฉ ุญูุธ ุงููุดุฑูุน ูู ุงูุฌูููุงุช ุงูุฅุถุงููุฉ</a></li>
<li><a href="../ar413923/index.html">ุฑุจูุง ูุง ูุฒุงู ูู ุงููููู ุชูุธูู ุงูุบูุงู ุงูุฌูู ูู ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู</a></li>
<li><a href="../ar413925/index.html">CVT ูููุณูููุชุด</a></li>
<li><a href="../ar413927/index.html">Digispark ุนูู Attiny85 - ุงูุงุชุตุงู ุชุญุช Windows 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>