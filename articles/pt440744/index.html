<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👔 🗄️ 👟 PHP para iniciantes. Tratamento de erros 🌬️ 🙏🏿 👊🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somente quem não faz nada não comete erros, e somos um exemplo disso - sentamos e trabalhamos incansavelmente, lemos o Habr :) 

 Neste artigo, contar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PHP para iniciantes. Tratamento de erros</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440744/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/18b/c9c/5d5/18bc9c5d5f043226c41b3db5fcb1b839.png" alt="imagem"></div><br>  Somente quem não faz nada não comete erros, e somos um exemplo disso - sentamos e trabalhamos incansavelmente, lemos o Habr :) <br><br>  Neste artigo, contarei minha história sobre erros no PHP e como controlá-los. <br><a name="habracut"></a><br><h2>  Erros </h2><br><h3>  Variedades na família de erros </h3><br>  Antes de domar erros, eu recomendaria estudar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cada espécie</a> e prestar atenção separadamente aos representantes mais importantes. <br><br>  Para impedir que um único erro passe despercebido, é necessário ativar o rastreamento de todos os erros usando a função <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">error_reporting ()</a> e a diretiva <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">display_errors</a> para ativar a exibição: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> error_reporting(E_ALL); ini_set(<span class="hljs-string"><span class="hljs-string">'display_errors'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br><h4>  Erros fatais </h4><br>  O tipo de erro mais formidável é fatal, pode ocorrer durante a compilação e durante o trabalho do analisador ou do script PHP, enquanto o script é interrompido. <br><br>  <strong>E_PARSE</strong> <br><br>  Este erro aparece quando você comete um erro grave de sintaxe e o intérprete PHP não entende o que você deseja dele, por exemplo, se você não fechou o cacheado ou o parêntese: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** * Parse error: syntax error, unexpected end of file */</span></span> {</code> </pre><br>  Ou eles escreveram em uma linguagem incompreensível: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** * Parse error: syntax error, unexpected '...' (T_STRING) */</span></span>    </code> </pre><br>  Suportes extras também ocorrem, e não são tão importantes redondos ou encaracolados: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** * Parse error: syntax error, unexpected '}' */</span></span> }</code> </pre><br>  Observo um ponto importante - o código do arquivo no qual você cometeu o erro de análise não será executado; portanto, se você tentar ativar a exibição de erros no mesmo arquivo em que ocorreu o erro do analisador, isso não funcionará: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//     error_reporting(E_ALL); ini_set('display_errors', 1); // ..    </span></span></code> </pre><br>  <strong>E_ERROR</strong> <br><br>  Este erro aparece quando o PHP entendeu o que você deseja, mas isso não funcionou por vários motivos.  Este erro também interrompe a execução do script e o código funcionará antes que o erro apareça: <br><br>  O plug-in não foi encontrado: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Fatal error: require_once(): Failed opening required 'not-exists.php' * (include_path='.:/usr/share/php:/usr/share/pear') */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-string"><span class="hljs-string">'not-exists.php'</span></span>;</code> </pre><br>  Uma exceção foi lançada (que tipo de animal, eu vou te contar um pouco mais tarde), mas não foi processada: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Fatal error: Uncaught exception 'Exception' */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>();</code> </pre><br>  Ao tentar chamar um método de classe inexistente: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Fatal error: Call to undefined method stdClass::notExists() */</span></span> $stdClass = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> stdClass(); $stdClass-&gt;notExists();</code> </pre><br>  Falta de memória livre (mais do que o prescrito na diretiva <a href="">memory_limit</a> ) ou algo semelhante: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Fatal Error: Allowed Memory Size */</span></span> $arr = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { $arr[] = str_pad(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-number"><span class="hljs-number">1024</span></span>); }</code> </pre><br><blockquote>  É muito comum ao ler ou baixar arquivos grandes, portanto, tenha cuidado com a questão do consumo de memória </blockquote>  Chamada de função recursiva.  Neste exemplo, ele terminou na 256ª iteração, porque está escrito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nas configurações do xdebug</a> (sim, esse erro pode aparecer neste formulário somente quando a extensão xdebug está ativada): <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Fatal error: Maximum function nesting level of '256' reached, aborting! */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ deep(); } deep();</code> </pre><br><h4>  Não fatal </h4><br>  Essa visualização não interrompe a execução do script, mas é o testador que normalmente os encontra.  São esses erros que causam mais problemas para desenvolvedores iniciantes. <br><br>  <strong>E_WARNING</strong> <br><br>  Geralmente ocorre quando você conecta um arquivo usando o <code>include</code> , mas ele não aparece no servidor ou você cometeu um erro ao indicar o caminho para o arquivo: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Warning: include_once(): Failed opening 'not-exists.php' for inclusion */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> <span class="hljs-string"><span class="hljs-string">'not-exists.php'</span></span>;</code> </pre><br>  Isso acontece se você usar o tipo errado de argumentos ao chamar funções: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Warning: join(): Invalid arguments passed */</span></span> join(<span class="hljs-string"><span class="hljs-string">'string'</span></span>, <span class="hljs-string"><span class="hljs-string">'string'</span></span>);</code> </pre><br>  Existem muitos deles, e listar tudo não faz sentido ... <br><br>  <strong>E_NOTICE</strong> <br><br>  Esses são os erros mais comuns. Além disso, existem ventiladores para desativar a saída de erros e rebitá-los o dia todo.  Há vários erros triviais. <br><br>  Ao acessar uma variável indefinida: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Notice: Undefined variable: a */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $a;</code> </pre><br>  Ao acessar um elemento de matriz inexistente: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Notice: Undefined index: a */</span></span> $b = []; $b[<span class="hljs-string"><span class="hljs-string">'a'</span></span>];</code> </pre><br>  Ao acessar uma constante inexistente: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Notice: Use of undefined constant UNKNOWN_CONSTANT - assumed 'UNKNOWN_CONSTANT' */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> UNKNOWN_CONSTANT;</code> </pre><br>  Quando os tipos de dados não são convertidos: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Notice: Array to string conversion */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>();</code> </pre><br>  Para evitar esses erros - tenha cuidado e, se o IDE informar algo, não o ignore: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/269/72e/f7f/26972ef7f88d757afd966ddb080a2e83.png" alt="PHP E_NOTICE no PHPStorm" width="367" height="68"><br><br>  <strong>E_STRICT</strong> <br><br>  São erros que ensinam a escrever o código corretamente, para que você não tenha vergonha, principalmente porque o IDE mostra imediatamente esses erros.  Por exemplo, se você chamou um método não estático como estático, o código funcionará, mas de alguma forma está errado, e poderão ocorrer erros graves se o método de classe for alterado no futuro, e um apelo a <code>$this</code> exibido: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Strict standards: Non-static method Strict::test() should not be called statically */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strict</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Test"</span></span>; } } Strict::test();</code> </pre><br><br><blockquote>  Este tipo de erro é relevante para o PHP versão 5.6 e quase todos foram cortados <br>  7 correspondências.  Leia mais na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RFC relevante</a> .  Se alguém souber onde mais esses erros permaneceram, escreva nos comentários </blockquote><br><br>  <strong>E_DEPRECATED</strong> <br><br>  Portanto, o PHP jurará se você usar funções obsoletas (ou seja, aquelas marcadas como obsoletas e que não estarão no próximo grande lançamento): <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Deprecated: Function split() is deprecated */</span></span> <span class="hljs-comment"><span class="hljs-comment">//  ,   PHP 7.0 //    PHP 5.3 split(',', 'a,b');</span></span></code> </pre><br>  No meu editor, funções semelhantes serão riscadas: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9d1/6f8/670/9d16f8670d27cee56cbed1433a913ee4.png" alt="PHP E_DEPRECATED sem PHPStorm" width="367" height="72"><br><br><h4>  Custom </h4><br>  Esse tipo, que o próprio desenvolvedor de código “cria”, não os vejo há muito tempo e não recomendo que você os abuse: <br><br><ul><li>  <code>E_USER_ERROR</code> - erro crítico </li><li>  <code>E_USER_WARNING</code> - não é um erro crítico </li><li>  <code>E_USER_NOTICE</code> - mensagens que não são erros </li></ul><br>  Separadamente, vale a pena notar <code>E_USER_DEPRECATED</code> - esse tipo ainda é usado com muita frequência para lembrar ao programador que o método ou função está desatualizado e é hora de reescrever o código sem usá-lo.  A função <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">trigger_error ()</a> é usada para criar erros semelhantes e semelhantes: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@deprecated</span></span></span><span class="hljs-comment"> Deprecated since version 1.2, to be removed in 2.0 */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateToken</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ trigger_error(<span class="hljs-string"><span class="hljs-string">'Function `generateToken` is deprecated, use class `Token` instead'</span></span>, E_USER_DEPRECATED); <span class="hljs-comment"><span class="hljs-comment">// ... // code ... // ... }</span></span></code> </pre><br><blockquote>  Agora que você se familiarizou com a maioria dos tipos e tipos de erros, é hora de dar uma breve explicação sobre a operação da diretiva <code>display_errors</code> : <br><br><ul><li>  se <code>display_errors = on</code> , em caso de erro, o navegador receberá html com o texto e o código do erro 200 </li><li>  se <code>display_errors = off</code> , para erros fatais o código de resposta será 500 e o resultado não será retornado ao usuário, para outros erros - o código não funcionará corretamente, mas não contará a ninguém sobre isso </li></ul><br></blockquote><br><h3>  Domar </h3><br>  Existem 3 funções para trabalhar com erros no PHP: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">set_error_handler ()</a> - define um manipulador para erros que não interrompem o script (ou seja, para erros não fatais) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">error_get_last ()</a> - obtém informações sobre o último erro </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">register_shutdown_function ()</a> - registra um manipulador que será iniciado quando o script terminar.  Esta função não se aplica diretamente a manipuladores de erros, mas é frequentemente usada para esse fim. </li></ul><br>  Agora, alguns detalhes sobre o tratamento de erros usando <code>set_error_handler()</code> , como argumentos, essa função aceita o nome da função à qual será atribuída a missão para manipular erros e os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tipos de erros</a> que serão monitorados.  Um manipulador de erros também pode ser um método de classe ou uma função anônima. O principal é que ele recebe a seguinte lista de argumentos: <br><br><ul><li>  <code>$errno</code> - o primeiro argumento contém o tipo de erro como um número inteiro </li><li>  <code>$errstr</code> - o segundo argumento contém uma mensagem de erro </li><li>  <code>$errfile</code> - um terceiro argumento opcional contém o nome do arquivo no qual o erro ocorreu </li><li>  <code>$errline</code> - um quarto argumento opcional contém o número da linha na qual o erro ocorreu </li><li>  <code>$errcontext</code> - o quinto argumento opcional contém uma matriz de todas as variáveis ​​existentes no escopo em que ocorreu o erro </li></ul><br>  Se o manipulador retornou <code>true</code> , o erro será considerado processado e o script continuará sendo executado; caso contrário, será chamado um manipulador padrão que registrará o erro e, dependendo do seu tipo, continuará executando o script ou completá-lo.  Aqui está um manipulador de exemplo: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//    ,  E_NOTICE error_reporting(E_ALL &amp; ~E_NOTICE); ini_set('display_errors', 1); //    function myHandler($level, $message, $file, $line, $context) { //         switch ($level) { case E_WARNING: $type = 'Warning'; break; case E_NOTICE: $type = 'Notice'; break; default; //   E_WARNING   E_NOTICE //      //      PHP return false; } //    echo "&lt;h2&gt;$type: $message&lt;/h2&gt;"; echo "&lt;p&gt;&lt;strong&gt;File&lt;/strong&gt;: $file:$line&lt;/p&gt;"; echo "&lt;p&gt;&lt;strong&gt;Context&lt;/strong&gt;: $". join(', $', array_keys($context))."&lt;/p&gt;"; // ,    ,      return true; } //   ,         set_error_handler('myHandler', E_ALL);</span></span></code> </pre><br><blockquote>  Você não poderá atribuir mais de uma função para manipular erros, embora eu realmente queira registrar meu próprio manipulador para cada tipo de erro, mas não - escreva um manipulador e descreva toda a lógica de exibição de cada tipo diretamente nele </blockquote>  Há um problema significativo com o manipulador que está escrito acima - ele não captura erros fatais e, com esses erros, em vez do site, os usuários verão apenas uma página em branco ou, pior ainda, uma mensagem de erro.  Para evitar esse cenário, você deve usar a função <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">register_shutdown_function</a> () e usá-la para registrar uma função que sempre será executada no final do script: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shutdown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span>; } register_shutdown_function(<span class="hljs-string"><span class="hljs-string">'shutdown'</span></span>);</code> </pre><br>  Esta função sempre funcionará! <br><br>  Mas voltando aos erros, para rastrear a aparência do erro no código do erro, usamos a função <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">error_get_last ()</a> , com sua ajuda, você pode obter informações sobre o último erro detectado e, como erros fatais interrompem a execução do código, eles sempre desempenharão o papel do "último": <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shutdown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $error = error_get_last(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-comment"><span class="hljs-comment">//       is_array($error) &amp;&amp; //       in_array($error['type'], [E_ERROR, E_PARSE, E_CORE_ERROR, E_COMPILE_ERROR]) ) { //    (       ) while (ob_get_level()) { ob_end_clean(); } //    echo "    ,  "; } } register_shutdown_function('shutdown');</span></span></code> </pre> <br><blockquote>  Gostaria de chamar a atenção para o fato de que esse código ocorre até para tratamento de erros, e você pode até encontrá-lo, mas perdeu relevância desde a 7ª versão do PHP.  O que veio substituir, vou contar um pouco mais tarde. </blockquote><div class="spoiler">  <b class="spoiler_title">Tarefa</b> <div class="spoiler_text">  Complemente o manipulador de erros fatais com a saída do código-fonte do arquivo em que o erro foi cometido e também adicione realce de sintaxe do código de saída. <br></div></div><br><h3>  Sobre gula </h3><br>  Vamos fazer um teste simples e descobrir quantos recursos preciosos o erro mais trivial consome: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** *      */</span></span> <span class="hljs-comment"><span class="hljs-comment">//     $time= microtime(true); define('AAA', 'AAA'); $arr = []; for ($i = 0; $i &lt; 10000; $i++) { $arr[AAA] = $i; } printf('%f seconds &lt;br/&gt;', microtime(true) - $time);</span></span></code> </pre><br>  Como resultado da execução desse script, obtive este resultado: <br><br><pre> <code class="bash hljs">0.002867 seconds</code> </pre><br>  Agora adicione o erro no loop: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** *     */</span></span> <span class="hljs-comment"><span class="hljs-comment">//     $time= microtime(true); $arr = []; for ($i = 0; $i &lt; 10000; $i++) { $arr[BBB] = $i; //   ,      } printf('%f seconds &lt;br/&gt;', microtime(true) - $time);</span></span></code> </pre><br>  O resultado é provavelmente pior, e uma ordem de magnitude (mesmo duas ordens de magnitude!): <br><br><pre> <code class="bash hljs">0.263645 seconds</code> </pre><br>  <strong>A conclusão é clara - os erros no código levam à excessiva gula de scripts - portanto, ative a exibição de todos os erros durante o desenvolvimento e teste de aplicativos!</strong> <br><blockquote>  Os testes foram realizados em várias versões do PHP e, em todo lugar, a diferença é dezenas de vezes, portanto, esse é outro motivo para corrigir todos os erros no código </blockquote><br><h3>  Onde está o cachorro enterrado </h3><br>  O PHP possui um símbolo especial “@” - um operador de supressão de erro, que é usado para não gravar a manipulação de erros, mas depende do comportamento correto do PHP; nesse caso: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> @UNKNOWN_CONSTANT;</code> </pre><br>  Nesse caso, o manipulador de erros especificado em <code>set_error_handler()</code> ainda será chamado e o fato de a supressão ter sido aplicada ao erro pode ser rastreado chamando a função <code>error_reporting()</code> dentro do manipulador, caso em que retornará <code>0</code> . <br><blockquote>  Se você suprimir erros dessa maneira, isso reduzirá a carga no processador em comparação com se você simplesmente os oculta (veja o teste comparativo acima), mas, em qualquer caso, <strong>suprimir erros é ruim.</strong> </blockquote><div class="spoiler">  <b class="spoiler_title">Tarefa</b> <div class="spoiler_text">  Verifique como a supressão de erro com <code>@</code> afeta o exemplo do loop anterior. <br></div></div><br><h2>  Exceções </h2><br><blockquote>  Na era do PHP4, não havia exceções, tudo era muito mais complicado, e os desenvolvedores lutaram com os erros da melhor maneira possível: foi uma batalha não pela vida, mas pela morte ... Você pode mergulhar nessa fascinante história do confronto no artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Código Excepcional.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a>  Devo ler agora?  Não posso dar uma resposta definitiva. Quero apenas observar que isso ajudará você a entender a evolução do idioma e revelará todo o charme das exceções. </blockquote>  Exceções são eventos excepcionais no PHP, diferentemente dos erros, não apenas indicam um problema, mas requerem ações adicionais do programador para lidar com cada caso específico. <br><br>  Por exemplo, um script deve salvar alguns dados em um arquivo de cache se algo der errado (sem acesso de gravação, sem espaço em disco), uma exceção do tipo correspondente for gerada e a decisão for tomada no manipulador de exceções - salve em outro local ou informe o usuário sobre o problema. <br><br>  Uma exceção é um objeto da classe <code>Exception</code> ou de um de seus muitos descendentes, contém o texto do erro, status e também pode conter um link para outra exceção que se tornou a causa raiz disso.  O modelo de exceção no PHP é semelhante ao usado em outras linguagens de programação.  Uma exceção pode ser lançada (como se diz, "throw") usando o operador <code>throw</code> , e você pode capturar ("catch") a instrução <code>catch</code> .  O código que gera a exceção deve estar entre um bloco <code>try</code> para capturar a exceção.  Cada bloco <code>try</code> deve ter pelo menos uma <code>catch</code> correspondente ou, <code>finally</code> bloco: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      if (random_int(0, 1)) { throw new Exception("One"); } echo "Zero" } catch (Exception $e) { //      echo $e-&gt;getMessage(); }</span></span></code> </pre><br>  Em quais casos vale a pena usar exceções: <br><br><ul><li>  se dentro da estrutura de um método / função houver várias operações que podem falhar </li><li>  se sua estrutura ou biblioteca declara seu uso </li></ul><br>  Para ilustrar o primeiro cenário, tomamos um exemplo já verbalizado de uma função para gravar dados em um arquivo - muitos fatores podem nos impedir, mas para informar o código acima qual era exatamente o problema, você precisa criar e lançar uma exceção: <br><br><pre> <code class="php hljs">$directory = <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . DIRECTORY_SEPARATOR . <span class="hljs-string"><span class="hljs-string">'logs'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     if (!is_dir($directory)) { throw new Exception('Directory `logs` is not exists'); } //         if (!is_writable($directory)) { throw new Exception('Directory `logs` is not writable'); } //  -   ,      if (!$file = @fopen($directory . DIRECTORY_SEPARATOR . date('Ym-d') . '.log', 'a+')) { throw new Exception('System can\'t create log file'); } fputs($file, date("[H:i:s]") . " done\n"); fclose($file);</span></span></code> </pre><br>  Conseqüentemente, capturaremos essas exceções assim: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      // ... } catch (Exception $e) { //    echo " : ". $e-&gt;getMessage(); }</span></span></code> </pre><br>  Este exemplo mostra um cenário muito simples para lidar com exceções, quando temos alguma exceção tratada de uma maneira.  Mas, muitas vezes, várias exceções exigem uma abordagem diferente para o processamento, e você deve usar códigos de exceção e definir a hierarquia de exceções no aplicativo: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    class FileSystemException extends Exception {} //     class DirectoryException extends FileSystemException { //   const DIRECTORY_NOT_EXISTS = 1; const DIRECTORY_NOT_WRITABLE = 2; } //     class FileException extends FileSystemException {}</span></span></code> </pre><br>  Agora, se você usar essas exceções, poderá obter o seguinte código: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      if (!is_dir($directory)) { throw new DirectoryException('Directory `logs` is not exists', DirectoryException::DIRECTORY_NOT_EXISTS); } if (!is_writable($directory)) { throw new DirectoryException('Directory `logs` is not writable', DirectoryException::DIRECTORY_NOT_WRITABLE); } if (!$file = @fopen($directory . DIRECTORY_SEPARATOR . date('Ym-d') . '.log', 'a+')) { throw new FileException('System can\'t open log file'); } fputs($file, date("[H:i:s]") . " done\n"); fclose($file); } catch (DirectoryException $e) { echo "   : ". $e-&gt;getMessage(); } catch (FileException $e) { echo "   : ". $e-&gt;getMessage(); } catch (FileSystemException $e) { echo "  : ". $e-&gt;getMessage(); } catch (Exception $e) { echo " : ". $e-&gt;getMessage(); }</span></span></code> </pre><br>  É importante lembrar que a exceção é principalmente um evento excepcional, ou seja, uma exceção à regra.  Você não precisa usá-los para lidar com erros óbvios, por exemplo, para validar a entrada do usuário (embora isso não seja tão simples).  Nesse caso, o manipulador de exceção deve ser gravado no local em que será capaz de lidar com isso.  Por exemplo, o manipulador de exceções causadas pela inacessibilidade de um arquivo para gravação deve estar no método responsável pela seleção do arquivo ou no método que o chama, para que ele possa selecionar outro arquivo ou um diretório diferente. <br><br>  Então, o que acontecerá se você não capturar a exceção?  Você receberá "Erro fatal: exceção não capturada ...".  Desagradável. <br><br>  Para evitar essa situação, você deve usar a função <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">set_exception_handler ()</a> e definir o manipulador para exceções que são lançadas fora do bloco try-catch e não foram processadas.  Após chamar esse manipulador, a execução do script será interrompida: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//     //     set_exception_handler(function($exception) { /** @var Exception $exception */ echo $exception-&gt;getMessage(), "&lt;br/&gt;\n"; echo $exception-&gt;getFile(), ':', $exception-&gt;getLine(), "&lt;br/&gt;\n"; echo $exception-&gt;getTraceAsString(), "&lt;br/&gt;\n"; });</span></span></code> </pre><br>  Também vou falar sobre a construção usando o bloco <code>finally</code> - esse bloco será executado independentemente de uma exceção ter sido lançada ou não: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      } catch (Exception $e) { //      //     } finally { // ,       }</span></span></code> </pre><br>  Para entender o que isso nos dá, darei o seguinte exemplo de uso do bloco <code>finally</code> : <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">// -    //     $handler = mysqli_connect('localhost', 'root', '', 'test'); try { //        // ... throw new Exception('DB error'); } catch (Exception $e) { //  ,     //     ,    throw new Exception('Catch exception', 0, $e); } finally { // ,      //      finally mysqli_close($handler); } //     ,       echo "Ok"; } catch (Exception $e) { //  ,    echo $e-&gt;getMessage(); echo "&lt;br/&gt;"; //      echo $e-&gt;getPrevious()-&gt;getMessage(); }</span></span></code> </pre><br>  I.e.  lembre-se - o bloco <code>finally</code> será executado mesmo se você lançar uma exceção acima no bloco de <code>catch</code> (na verdade, é isso que ele pretendia). <br><br>  Para um artigo introdutório de informações, que deseja obter mais detalhes, você as encontrará no artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Código excepcional</a> ;) <br><br><div class="spoiler">  <b class="spoiler_title">Tarefa</b> <div class="spoiler_text">  Escreva seu manipulador de exceção, com a saída do texto do arquivo em que ocorreu o erro e tudo isso com destaque para a sintaxe, também não se esqueça de exibir o rastreio de forma legível.  Para referência, veja como é legal nos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gritos</a> . <br></div></div><br><h3>  PHP7 - nem tudo está como antes </h3><br>  Então, agora você aprendeu todas as informações acima e agora carregarei inovações no PHP7, ou seja,<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vou falar sobre o que você encontrará ao trabalhar em um projeto PHP moderno. </font><font style="vertical-align: inherit;">Anteriormente, eu lhe disse e mostrei com exemplos quais muletas você precisa construir para detectar erros críticos, e assim - no PHP7 eles decidiram consertar, mas? </font><font style="vertical-align: inherit;">como sempre? </font><font style="vertical-align: inherit;">vinculado à compatibilidade com versões anteriores do código e recebido, embora seja uma solução universal, mas está longe de ser o ideal. </font><font style="vertical-align: inherit;">E agora sobre os pontos sobre as mudanças:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando erros fatais do tipo </font></font><code>E_ERROR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou erros fatais ocorrem com a possibilidade de processar o </font></font><code>E_RECOVERABLE_ERROR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP lança uma exceção</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">essas exceções </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">não</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herdam a classe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exception</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (lembre-se, eu falei sobre compatibilidade com versões anteriores, é tudo por causa dela)</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">essas exceções herdam a classe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Error</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as classes Exception e Error implementam a interface </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Throwable</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> você não pode implementar a interface jogável no seu código </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A interface </font></font><code>Throwable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nos repete quase completamente </font></font><code>Exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Throwable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTrace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTraceAsString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrevious</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Throwable</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span>; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso é difícil? </font><font style="vertical-align: inherit;">Agora, para exemplos, considere aqueles que foram mais altos e levemente modernizados:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ,     include 'e_parse_include.php'; } catch (Error $e) { var_dump($e); }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como resultado, captamos o erro e imprimimos: </font></font><br><br><pre> <code class="bash hljs">object(ParseError)<span class="hljs-comment"><span class="hljs-comment">#1 (7) { ["message":protected] =&gt; string(48) "syntax error, unexpected '' (T_STRING)" ["string":"Error":private] =&gt; string(0) "" ["code":protected] =&gt; int(0) ["file":protected] =&gt; string(49) "/www/education/error/e_parse_include.php" ["line":protected] =&gt; int(4) ["trace":"Error":private] =&gt; array(0) { } ["previous":"Error":private] =&gt; NULL }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como você pode ver, eles capturaram a exceção </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ParseError</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que é a sucessora da exceção </font></font><code>Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que implementa a interface </font></font><code>Throwable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na casa que Jack construiu. </font><font style="vertical-align: inherit;">Existem muitas outras exceções, mas não vou atormentar - para maior clareza, darei uma hierarquia de exceções:</font></font><br><br><pre> <code class="bash hljs">interface Throwable |- Exception implements Throwable | |- ErrorException extends Exception | |- ... extends Exception | `- ... extends Exception `- Error implements Throwable |- TypeError extends Error |- ParseError extends Error |- ArithmeticError extends Error | `- DivisionByZeroError extends ArithmeticError `- AssertionError extends Error</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E um pouco mais detalhadamente: </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeError</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - para erros quando o tipo de argumento da função não corresponde ao tipo passado:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $one, int $two)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; })(<span class="hljs-string"><span class="hljs-string">'one'</span></span>, <span class="hljs-string"><span class="hljs-string">'two'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (TypeError $e) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $e-&gt;getMessage(); }</code> </pre><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ArithmeticError</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pode ocorrer durante operações matemáticas, por exemplo, quando o resultado do cálculo excede o limite alocado para um número inteiro:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">-1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ArithmeticError $e) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $e-&gt;getMessage(); }</code> </pre><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DivisionByZeroError</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - divisão por erro zero:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-number"><span class="hljs-number">1</span></span> / <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ArithmeticError $e) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $e-&gt;getMessage(); }</code> </pre><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssertionError</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - um animal raro que aparece quando a condição especificada em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assert ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> não </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">é</font></a><font style="vertical-align: inherit;"> satisfeita:</font></font><br><br><pre> <code class="php hljs">ini_set(<span class="hljs-string"><span class="hljs-string">'zend.assertions'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); ini_set(<span class="hljs-string"><span class="hljs-string">'assert.exception'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { assert(<span class="hljs-number"><span class="hljs-number">1</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (AssertionError $e) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $e-&gt;getMessage(); }</code> </pre><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em configurações directiva produção em servidor </font></font><code>zend.assertions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>assert.exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cortado, e com razão</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você encontrará uma lista completa de exceções predefinidas no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manual oficial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , na mesma hierarquia de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exceções</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">SPL</font></a><font style="vertical-align: inherit;"> .</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarefa</font></font></b> <div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Escreva um manipulador de erros universal para o PHP7 que capture todas as exceções possíveis. </font></font><br></div></div><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao escrever esta seção, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foram utilizados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> materiais do artigo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Exceções e erros lançáveis ​​no PHP 7</font></a><font style="vertical-align: inherit;"> .</font></font></blockquote><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Uniformidade </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Existem erros, exceções, mas tudo isso pode ser de alguma forma associado à pilha? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sim, é fácil, temos </font></font><code>set_error_handler()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um e ninguém nos proibirá de lançar uma exceção dentro deste manipulador:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//     function errorHandler($severity, $message, $file = null, $line = null) { //  ,       @ if (error_reporting() === 0) { return false; } throw new \ErrorException($message, 0, $severity, $file, $line); } //   -  set_error_handler('errorHandler', E_ALL);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas essa abordagem com o PHP7 é redundante, agora ele pode lidar com tudo </font></font><code>Throwable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** ... **/</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\Throwable $e) { <span class="hljs-comment"><span class="hljs-comment">//      echo $e-&gt;getMessage(); }</span></span></code> </pre><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Depuração </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Às vezes, para depurar código, é necessário rastrear o que aconteceu com uma variável ou objeto em um determinado estágio; para esses fins, existe uma função </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug_backtrace ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug_print_backtrace ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que retornará o histórico de chamadas para funções / métodos na ordem inversa:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;pre&gt;'</span></span>; debug_print_backtrace(); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;/pre&gt;'</span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">method</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ example(); } } ExampleClass::method();</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado da execução da função </font></font><code>debug_print_backtrace()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, uma lista de chamadas que nos levaram a este ponto será exibida:</font></font><br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#0 example() called at [/www/education/error/backtrace.php:10] #1 ExampleClass::method() called at [/www/education/error/backtrace.php:14]</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você pode verificar o código quanto a erros de sintaxe usando a função </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">php_check_syntax ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou o comando </font></font><code>php -l [  ]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas eu não vi o uso deles.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Afirmar </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu também gostaria de falar sobre uma fera exótica como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assert ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em PHP. </font><font style="vertical-align: inherit;">Na verdade, esta peça pode ser considerada uma imitação para a metodologia de programação de contratos, e depois vou lhe contar como nunca a usei :)</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A função </font></font><code>assert()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mudou seu comportamento durante a transição da versão 5.6 para a 7.0, e tudo mudou ainda mais na versão 7.2, portanto, leia atentamente os registros de alterações e o PHP;)</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O primeiro caso é quando você precisa escrever TODO diretamente no código, para não esquecer de implementar a funcionalidade fornecida: </font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  asserts  php.ini // zend.assertions=1 assert(false, "Remove it!");</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado da execução desse código, obtemos </font></font><code>E_WARNING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="bash hljs">Warning: assert(): Remove it! failed</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O PHP7 pode ser alternado para o modo de exceção e, em vez de um erro, sempre aparecerá uma exceção </font></font><code>AssertionError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    «» ini_set('assert.exception', 1); assert(false, "Remove it!");</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, esperamos uma exceção </font></font><code>AssertionError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se necessário, você pode lançar uma exceção arbitrária:</font></font><br><br><pre> <code class="php hljs">assert(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">"Remove it!"</span></span>));</code> </pre><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu recomendaria o uso de tags </font></font><code>@TODO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, os IDEs modernos funcionam bem com eles e você não precisará </font><font style="vertical-align: inherit;">empregar </font><font style="vertical-align: inherit;">esforços e recursos extras para trabalhar com eles, embora a tentação de "marcar" com eles seja grande</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O segundo caso de uso é criar algum tipo de TDD, mas lembre-se, isso é apenas uma semelhança. </font><font style="vertical-align: inherit;">Embora, se você se esforçar, pode obter um resultado engraçado que ajudará no teste do seu código:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// callback-      function backlog($script, $line, $code, $message) { echo $message; } //  callback- assert_options(ASSERT_CALLBACK, 'backlog'); //    assert_options(ASSERT_WARNING, false); //      assert(sqr(4) === 16, 'When I send integer, function should return square of it'); // ,   function sqr($a) { return; //    }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A terceira opção é um tipo de programação de contrato, quando você descreveu as regras para usar sua biblioteca, mas deseja certificar-se de que é entendido corretamente e, nesse caso, informar imediatamente ao desenvolvedor um erro (nem tenho certeza se o entendi corretamente, mas um exemplo O código está funcionando bem): </font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** *        * * [ * 'host' =&gt; 'localhost', * 'port' =&gt; 3306, * 'name' =&gt; 'dbname', * 'user' =&gt; 'root', * 'pass' =&gt; '' * ] * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> $settings */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupDb</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($settings)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   assert(isset($settings['host']), 'Db `host` is required'); assert(isset($settings['port']) &amp;&amp; is_int($settings['port']), 'Db `port` is required, should be integer'); assert(isset($settings['name']), 'Db `name` is required, should be integer'); //    // ... } setupDb(['host' =&gt; 'localhost']);</span></span></code> </pre><br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você está interessado em contratos, especificamente para você, tenho um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link para o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> framework </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">PhpDeal</font></a><font style="vertical-align: inherit;"> .</font></font></blockquote><br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca use </font></font><code>assert()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para verificar os parâmetros de entrada, porque na verdade ele </font></font><code>assert()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interpreta o primeiro parâmetro (se comporta como </font></font><code>eval()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), e isso está repleto de injeção de PHP. </font><font style="vertical-align: inherit;">E sim, esse é o comportamento correto, porque se você desabilitar a declaração, todos os argumentos passados ​​serão ignorados e, se você fizer como no exemplo acima, o código será executado e o resultado booleano da execução será passado dentro da declaração desabilitada. </font><font style="vertical-align: inherit;">Ah, e isso mudou no PHP 7.2 :)</font></font></blockquote><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você tiver uma experiência de uso ao vivo </font></font><code>assert()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- compartilhe comigo, serei grato. </font><font style="vertical-align: inherit;">E sim, aqui está outra leitura interessante para você sobre este tópico - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asserções PHP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , com a mesma pergunta no final :)</font></font><br><br><h2>  Em conclusão </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Escreverei as conclusões deste artigo para você: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Luta contra erros - eles não devem estar no seu código </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Use exceções - o trabalho com elas precisa ser organizado adequadamente e haverá felicidade </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Afirmar - aprendeu sobre eles e bem </font></font></li></ul><br><h3>  PS </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este é um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de uma série de artigos "PHP para iniciantes":</font></font><br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A sessão</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexão de arquivo</font></font></a> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tratamento de erros</font></font></b> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você tiver comentários sobre o material do artigo, ou possivelmente em forma, descreva a essência dos comentários, e tornaremos esse material ainda melhor. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agradecimentos a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maxim Slesarenko</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pela ajuda na redação do artigo.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440744/">https://habr.com/ru/post/pt440744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440732/index.html">Atualize uma placa de depuração com um processador Baikal-T1: adicione um cartão SD</a></li>
<li><a href="../pt440734/index.html">Sessão aberta à vista no Spring Boot: a ameaça fantasma</a></li>
<li><a href="../pt440736/index.html">Eu estrago a vida dos desenvolvedores com meus comentários de código e me desculpe</a></li>
<li><a href="../pt440740/index.html">Seminário on-line aberto “Jornada do cliente: qual tráfego e para onde levar”</a></li>
<li><a href="../pt440742/index.html">Páginas AMP e Turbo: prós, contras e resultados da implementação</a></li>
<li><a href="../pt440746/index.html">A tecnologia de gerenciamento de conhecimento da Gartner alterna usando estudos de caso na KnowledgeConf</a></li>
<li><a href="../pt440748/index.html">Supercomputador mais rápido do mundo bate recorde de IA</a></li>
<li><a href="../pt440752/index.html">Seleção de prioridade de solicitação do usuário</a></li>
<li><a href="../pt440754/index.html">Utilitário inglês de plataforma cruzada para exibição de certificados qualificados russos x509</a></li>
<li><a href="../pt440756/index.html">CI / CD sem servidor na AWS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>