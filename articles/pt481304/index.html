<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÜ üöî üßóüèª Classifica√ß√£o da bandeira americana üëêüèæ ‚ôíÔ∏è üë©‚Äç‚ù§Ô∏è‚Äçüë©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para entender o princ√≠pio de opera√ß√£o dessa classifica√ß√£o "de v√°rias bandas", √© mais f√°cil come√ßar com um exemplo de uma bandeira com tr√™s faixas. E, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Classifica√ß√£o da bandeira americana</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/481304/"><div style="text-align:center;"><img width="690" height="410" src="https://habrastorage.org/webt/3c/qf/bc/3cqfbc2j6t1knu0g3onxuvrgve8.png"></div><br>  Para entender o princ√≠pio de opera√ß√£o dessa classifica√ß√£o "de v√°rias bandas", √© mais f√°cil come√ßar com um exemplo de uma bandeira com tr√™s faixas.  E, para lidar facilmente com a bandeira de tr√™s cores, √© melhor ver primeiro como ela funciona com o exemplo de duas cores.  <s>E para lidar com duas cores ...</s> <a name="habracut"></a><blockquote> <a href="https://www.edsd.ru/" title="EDISON Software - desenvolvimento web"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="EDISON Software - desenvolvimento web"></a> <br clear="right">  Este artigo foi escrito com o apoio da EDISON. <br><br>  Estamos engajados na <a href="https://www.edsd.ru/ru/uslugi/portirovanie-i-migracija">migra√ß√£o e migra√ß√£o de software</a> , bem como no <a href="https://www.edsd.ru/ru/proekty/mobilnye_prilozhenija">desenvolvimento de aplicativos m√≥veis Android e iOS</a> . <br><br>  Adoramos a teoria dos algoritmos!  ;-) </blockquote><h2>  Bandeira de duas cores </h2><br><img align="left" width="210" height="140" src="https://habrastorage.org/webt/rw/ya/rz/rwyarz78jggve0idacvf3k6jxs0.png"><br clear="right">  Primeiro, considere o caso quando os n√∫meros na matriz classificada s√£o distribu√≠dos em apenas dois bits.  Para simplificar, assumimos que temos uma matriz de zeros (ordem baixa) e uns (ordem alta). <br><br>  Assim, temos apenas duas "bandas": em uma, moveremos os bits menos significativos (zeros) e, na outra, os bits mais altos (unidades).  Qualquer sinalizador de duas cores ir√° para demonstra√ß√£o.  Por exemplo, a bandeira da Ucr√¢nia. <br><br><img width="740" height="94" src="https://habrastorage.org/webt/av/g1/6q/avg16qxef8rxv9etteutswrkrke.gif"><br><br>  O que est√° acontecendo aqui?  Como no primeiro est√°gio n√£o se sabe quantos zeros e quantas unidades temos, n√£o est√° claro em que tamanhos cada uma das "bandas" terminar√°.  Portanto, colocamos dois ponteiros nas chaves da matriz.  Para a ordem baixa, o ponteiro √© definido para o in√≠cio da matriz, para a ordem alta at√© o fim.  Em seguida, fazemos uma √∫nica passagem pela matriz da esquerda para a direita e olhamos para cada elemento do bit. <br><br>  Se durante a passagem um elemento √© igual √† ordem mais alta, o segundo ponteiro nos diz para onde transferir esse elemento (fazemos uma troca).  O ponteiro para inserir o pr√≥ximo elemento se move para a esquerda; a "faixa" do d√≠gito s√™nior foi expandida. <br><br>  Se for igual ao d√≠gito menos significativo, movemos o ponteiro para um elemento √† direita.  Como temos apenas dois d√≠gitos, n√£o √© necess√°rio transferir o elemento, ele j√° est√° em seu lugar.  A ‚Äúfaixa‚Äù para a categoria mais jovem naturalmente se tornou mais ampla. <br><br>  Como resultado, dois ponteiros se movendo um contra o outro colidir√£o em um ponto e as descargas ser√£o ordenadas em suas ‚Äúbandas‚Äù.  Voc√™ n√£o precisa percorrer toda a matriz. Quando os ponteiros se encontram em algum lugar no meio, o algoritmo faz seu trabalho. <br><br><h2>  O problema da bandeira nacional holandesa :: Problema da bandeira nacional holandesa </h2><br><img align="left" width="210" height="140" src="https://habrastorage.org/webt/qq/cm/rv/qqcmrvjuvvyqo7ihytacypnh1li.png"><br clear="right">  Para complicar um pouco a tarefa, considere n√£o dois d√≠gitos, mas tr√™s.  Vamos fazer com que os elementos da matriz perten√ßam aos d√≠gitos mais baixos (zeros), m√©dios (unidades) e seniores (dois). <br><br>  Para demonstra√ß√£o, levamos a bandeira vermelha, branca e azul de tr√™s vias da <s>Fran√ßa,</s> <s>Luxemburgo da</s> <s>R√∫ssia e</s> <s>Schleswig-Goldstein da</s> Holanda.  Por que exatamente a bandeira da Holanda?  Porque Edsger Dijkstra, em suas palestras sobre o exemplo dessa bandeira, examinou o algoritmo correspondente, que foi chamado de "a tarefa da bandeira nacional holandesa". <br><br><img width="735" height="95" src="https://habrastorage.org/webt/yl/hy/b6/ylhyb69kavw2mki9nmk0_idsxcq.gif"><br><br>  Como voc√™ pode ver, n√£o h√° nada particularmente novo.  Cada categoria tem seu pr√≥prio ponteiro.  Inicialmente, os r√≥tulos para junior e middle ocupam as posi√ß√µes iniciais no in√≠cio da matriz e se movem para a direita quando o elemento correspondente √© encontrado.  O ponteiro para a ordem alta √© o primeiro no final da matriz e se move para a esquerda. <br><br>  A passagem pelo array tamb√©m estar√° incompleta, se os bits forem distribu√≠dos de maneira mais ou menos uniforme, o algoritmo passar√° por 2/3 do array antes de espalhar todos os elementos em suas ‚Äúbandas‚Äù. <br><br><h2>  Tipo de bandeira americana :: Tipo de bandeira americana </h2><br><img align="left" width="285" height="150" src="https://habrastorage.org/webt/2u/bb/hq/2ubbhq_rmqqxo6hj9blipmfppnq.png"><br clear="right">  Agora, em nossas explica√ß√µes, podemos passar para a bandeira americana multibanda. <br><br>  Quando n√£o temos dois, nem tr√™s, mas qualquer n√∫mero de d√≠gitos, fixamos onde cada d√≠gito deve come√ßar (sua "banda") e redesenhamos os elementos em suas "bandas". <br><br>  Nesse algoritmo, os n√∫meros geralmente s√£o considerados n√£o como decimais, mas com uma profundidade de bits diferente, sendo na maioria das vezes uma pot√™ncia de dois.  Freq√ºentemente, o n√∫mero 256 √© tomado como base para a profundidade de bits (um pouco menos que 128), o que permite adaptar com efici√™ncia a classifica√ß√£o para organizar as strings.  Para n√∫meros com profundidade de bits, √© mais conveniente usar 2 <sup>n</sup> pequenos (2, 4, 16 etc.), o que permite comparar deslocando-se por bits, em vez de aumentar a pot√™ncia ao comparar n√∫meros decimais. <br><br>  A anima√ß√£o mostra um exemplo de profundidade de bits com base 16: <br><br><img width="740" height="328" src="https://habrastorage.org/webt/tm/mf/lk/tmmflkyrfqa3bqrlucv8y-rzcfk.gif"><br><br><ol><li>  Na primeira passagem - pesquise o m√°ximo para determinar o n√∫mero m√°ximo de bits entre os elementos da matriz (para extrair corretamente os bits determinados da conta dos elementos). </li><li>  Em seguida, ocorre o processamento recursivo.  Quando chamado, os limites da sub-matriz e o bit processado atual s√£o indicados.  Na primeira chamada, toda a matriz √© uma sub-matriz; o primeiro bit √† esquerda √© obtido. </li><li>  Entre os elementos da sub-matriz, √© realizado um c√°lculo inicial - quantas vezes cada d√≠gito ocorre na categoria atual.  Essa contagem permite determinar a localiza√ß√£o desses d√≠gitos dos d√≠gitos (ou seja, s√£o conhecidos os limites e a localiza√ß√£o da "banda" para a qual voc√™ deseja mover os elementos que t√™m o pr√≥ximo d√≠gito em um d√≠gito espec√≠fico).  De fato, as localiza√ß√µes s√£o ponteiros para "bandas" onde os elementos correspondentes precisam ser movidos. </li><li>  De acordo com os indicadores de localiza√ß√£o, ocorre uma troca no local - o d√≠gito na categoria mostra para onde o item precisa ser enviado, outro elemento com o qual a troca ocorreu.  Essa cl√°usula √© executada at√© que, na pr√≥xima troca, um elemento que chegue de outro local n√£o esteja em seu lugar (ent√£o voc√™ pode passar para o pr√≥ximo elemento do subarray e executar essa cl√°usula da mesma forma). </li><li>  Depois que, como resultado das trocas, os elementos foram redistribu√≠dos em blocos por n√∫meros no pr√≥ximo d√≠gito, ocorre uma recurs√£o - o mesmo algoritmo √© aplicado a cada bloco como uma sub-matriz e o pr√≥ximo √© o d√≠gito atual. </li></ol><br>  No artigo sobre <a href="https://habr.com/ru/post/478654/">contagem de classifica√ß√µes com uma distribui√ß√£o aproximada,</a> existe um algoritmo visualmente muito semelhante - <b>classifica√ß√£o por aproxima√ß√£o</b> .  Contamos quantas vezes cada n√∫mero na matriz ocorreu - e redistribu√≠mos os elementos de acordo com as localiza√ß√µes obtidas.  Aqui, contamos quantas vezes cada d√≠gito na categoria ocorre para elementos da sub-matriz - e tamb√©m redistribu√≠mos os elementos na sub-matriz de acordo com as localiza√ß√µes obtidas.  Se a aproxima√ß√£o for uma esp√©cie de classifica√ß√£o de contagem, ent√£o "americano" ser√° uma classifica√ß√£o de bits de contagem. <br><br><div class="spoiler">  <b class="spoiler_title">Classifica√ß√£o da Bandeira Americana - Implementa√ß√£o em Python</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#           def get_radix_val(x, digit, radix) -&gt; int: return int(floor(x / radix**digit)) % radix #             def compute_offsets(a_list, start: int, end: int, digit, radix) -&gt; list: #          counts = [0 for _ in range(radix)] for i in range(start, end): #        #         val = get_radix_val(a_list[i], digit, radix) counts[val] += 1 #       #          offsets = [0 for _ in range(radix)] sum = 0 #         for i in range(radix): offsets[i] = sum sum += counts[i] return offsets #      def swap(a_list, offsets, start: int, end: int, digit, radix) -&gt; None: i = start #          next_free = copy(offsets) #        #   (       ) cur_block = 0 while cur_block &lt; radix-1: # if i &gt;= start + offsets[cur_block+1]: cur_block += 1 continue radix_val = get_radix_val(a_list[i], digit, radix) if radix_val == cur_block: i += 1 continue swap_to = next_free[radix_val] a_list[i], a_list[swap_to] = a_list[swap_to], a_list[i] next_free[radix_val] += 1 #   def american_flag_sort_helper(a_list, start: int, end: int, digit, radix) -&gt; None: #          offsets = compute_offsets(a_list, start, end, digit, radix) #      swap(a_list, offsets, start, end, digit, radix) if digit == 0: #     ? return #   #       for i in range(len(offsets)-1): #      #         american_flag_sort_helper(a_list, offsets[i], offsets[i+1], digit-1, radix) #   def american_flag_sort(a_list, radix) -&gt; None: #,         for x in a_list: assert(type(x) == int) #    max_val = max(a_list) #    (  ) max_digit = int(floor(log(max_val, radix))) #   -     american_flag_sort_helper(a_list, 0, len(a_list), max_digit, radix)</span></span></code> </pre> </div></div><br><h2>  Ska sort :: Ska sort </h2><br>  O programador alem√£o Malte Skarupke anunciou que desenvolveu um novo algoritmo de classifica√ß√£o, que √© uma ‚Äúbandeira americana‚Äù radicalmente aprimorada e supera <b>std :: sort</b> em m√©dia 2 vezes (std :: sort - um algoritmo tamb√©m conhecido como <b>classifica√ß√£o introspectiva</b> - um h√≠brido de <b>classifica√ß√£o</b> e <b>classifica√ß√£o r√°pidas</b> <b>por heap</b> ). <br><br><ol><li>  A matriz √© classificada recursivamente, no primeiro n√≠vel de recurs√£o, toda a matriz √© tomada como uma sub-matriz. </li><li>  Se o subarray tiver menos de 128 elementos, std :: sort ser√° chamado. </li><li>  Se a sub-matriz contiver de 128 a 1024 elementos, a classifica√ß√£o da bandeira americana ser√° solicitada. </li><li>  Se houver mais de 1024 elementos em uma sub-matriz, a classifica√ß√£o de ska ser√° solicitada. </li><li>  Al√©m disso, para evitar o pior caso, se o aninhamento recursivo for muito grande (mais de 16 n√≠veis), o algoritmo alterna para <nobr>std :: sort</nobr> , mesmo se houver mais de 128 elementos na sub-matriz. </li></ol><br>  Aparentemente, √© um algoritmo muito eficaz e, ao mesmo tempo, extremamente complexo - a implementa√ß√£o do autor leva quase mil e quinhentas linhas.  Talvez um dia consideremos essa classifica√ß√£o, agora n√£o entraremos nela.  Os interessados ‚Äã‚Äãpodem clicar nos links abaixo. <br><br><h2>  Refer√™ncias </h2><br><img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png">  <a href="https://en.wikipedia.org/wiki/Dutch_national_flag_problem">Problema da bandeira nacional holandesa</a> , <a href="https://en.wikipedia.org/wiki/American_flag_sort">tipo de bandeira americana</a> <br><br>  <b>Tipo Ska:</b> <img width="30" height="30" src="https://habrastorage.org/webt/-p/f7/fs/-pf7fshzu943ul4yvkrw2f4dv1g.png">  Escrevi um algoritmo de classifica√ß√£o mais r√°pida ( <a href="https://probablydance.com/2016/12/27/i-wrote-a-faster-sorting-algorithm/">Parte 1</a> , <a href="https://probablydance.com/2017/01/17/faster-sorting-algorithm-part-2/">Parte 2</a> ) <img width="30" height="30" src="https://habrastorage.org/webt/fn/cd/py/fncdpynfktllvkdjtmpif0kd1zc.png">  <a href="https://github.com/skarupke/ska_sort/">C√≥digo do Github</a> <br><br><h3>  Artigos da s√©rie: </h3><ul><li>  <a href="https://habr.com/post/414447/">Aplicativo Excel AlgoLab.xlsm</a> </li><li>  <a href="https://habr.com/post/414653/">Classifica√ß√µes de C√¢mbio</a> </li><li>  <a href="https://habr.com/post/415935/">Classifica√ß√µes de inser√ß√£o</a> </li><li>  <a href="https://habr.com/post/422085/">Classificar por sele√ß√£o</a> </li><li>  <a href="https://habr.com/ru/post/431964/">Mesclar classifica√ß√µes</a> </li><li>  <a href="https://habr.com/ru/post/472466/">Classificar por distribui√ß√£o</a> <ul><li>  <a href="https://habr.com/ru/post/478654/">Contando sortes com distribui√ß√£o aproximada</a> </li><li>  <b>Classifica√ß√£o da bandeira americana</b> </li><li>  √Årvore de sufixo na classifica√ß√£o bit a bit </li><li>  Comparando classifica√ß√µes por distribui√ß√£o </li></ul></li><li>  <a href="https://habr.com/ru/post/483786/">Classifica√ß√£o h√≠brida</a> </li></ul><br>  No aplicativo AlgoLab Excel, classificando por um sinalizador de duas cores (classifica zeros e uns), um sinalizador de tr√™s cores (classifica zeros, uns e duques), sendo exibido pela classifica√ß√£o americana.  Para classificar a "bandeira americana", voc√™ pode (em um coment√°rio na c√©lula com o nome do algoritmo) especificar o sistema num√©rico para distribui√ß√£o - o padr√£o √© hexadecimal. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481304/">https://habr.com/ru/post/pt481304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481288/index.html">Redux Toolkit como uma ferramenta para o desenvolvimento eficaz do Redux</a></li>
<li><a href="../pt481290/index.html">Configura√ß√µes de HOW-to / Network e VLAN em um servidor Hetzner e Mikrotik dedicado</a></li>
<li><a href="../pt481294/index.html">10 melhores ferramentas de automa√ß√£o de teste de software</a></li>
<li><a href="../pt481296/index.html">Como escrever c√≥digo que ser√° reutilizado</a></li>
<li><a href="../pt481302/index.html">"Sobre, sim, n√£o um cluster" ou como importamos DBMS</a></li>
<li><a href="../pt481306/index.html">Apresentando o werf 1.0 est√°vel: o que o GitOps tem a ver com isso, status e planos</a></li>
<li><a href="../pt481312/index.html">Presentes perdidos do Papai Noel: an√∫ncio de uma miss√£o de TI em 6 de janeiro</a></li>
<li><a href="../pt481314/index.html">Plataforma DIY Crawler para rob√¥s e entretenimento</a></li>
<li><a href="../pt481316/index.html">Escrevendo um blog sobre microsservi√ßos - Servi√ßo de postagem da parte 4</a></li>
<li><a href="../pt481318/index.html">Hacking com Unicode (no exemplo do GitHub)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>