<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โฉ โ๏ธ ๐ ุงูููุงุฑุณ ูู ุจูุณุชุฌุฑุณ - 1 ๐ ๐ผ ๐ณ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ุชูุชู ูุฐู ุงูุณูุณูุฉ ูู ุงูููุงูุงุช ุฅูู ุญุฏ ูุจูุฑ ุจููุงุฑุณ PostgreSQL. 

 ูููู ุงููุธุฑ ูู ุฃู ููุถูุน ูู ูุฌูุงุช ูุธุฑ ูุฎุชููุฉ. ุณููุงูุด ุงูุฃููุฑ ุงูุชู ูุฌุจ ุฃู ุชูู ูุทูุฑ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูููุงุฑุณ ูู ุจูุณุชุฌุฑุณ - 1</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/441962/" style=";text-align:right;direction:rtl"><h1 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br>  ุชูุชู ูุฐู ุงูุณูุณูุฉ ูู ุงูููุงูุงุช ุฅูู ุญุฏ ูุจูุฑ ุจููุงุฑุณ PostgreSQL. <br><br>  ูููู ุงููุธุฑ ูู ุฃู ููุถูุน ูู ูุฌูุงุช ูุธุฑ ูุฎุชููุฉ.  ุณููุงูุด ุงูุฃููุฑ ุงูุชู ูุฌุจ ุฃู ุชูู ูุทูุฑ ุงูุชุทุจููุงุช ุงูุฐู ูุณุชุฎุฏู ููุงุนุฏ ุจูุงูุงุช ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช: ูุง ูู ุงูููุงุฑุณ ุงููุชุงุญุฉ ุ ูููุงุฐุง ููุฌุฏ ุงูุนุฏูุฏ ูู ุฃููุงุนูุง ุงููุฎุชููุฉ ุ ูููููุฉ ุงุณุชุฎุฏุงููุง ูุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช.  ูู ุงููุญุชูู ุฃู ูุชู ุชุบุทูุฉ ุงูููุถูุน ุจุจุถุน ูููุงุช ุ ูููู ูู ุณุฑูุฉ ูุฃูู ุฃู ูููู ููุงู ูุทูุฑ ูุถููู ุ ููุชู ุฃูุถูุง ุจุชูุงุตูู ุงูุฃุฌุฒุงุก ุงูุฏุงุฎููุฉ ุ ุฎุงุตุฉ ูุฃู ููู ูุซู ูุฐู ุงูุชูุงุตูู ูุง ูุณูุญ ูู ุจุงูุฑุฌูุน ุฅูู ุญูู ุงูุขุฎุฑูู ูุญุณุจ ุ ุจู ุฃูุถูุง ุชูุฏูู ุงุณุชูุชุงุฌุงุช ุฎุงุตุฉ ุจู. <br><br>  ุชุทููุฑ ุฃููุงุน ุฌุฏูุฏุฉ ูู ุงูููุงุฑุณ ุฎุงุฑุฌ ุงููุทุงู.  ูุฐุง ูุชุทูุจ ูุนุฑูุฉ ูุบุฉ ุงูุจุฑูุฌุฉ C ููุชุนูู ุจุฎุจุฑุฉ ูุจุฑูุฌ ุงููุธุงู ุจุฏูุงู ูู ูุทูุฑ ุงูุชุทุจููุงุช.  ููุณุจุจ ููุณู ุ ูู ููุงูุด ูุงุฌูุงุช ุงูุจุฑูุฌุฉ ุชูุฑูุจูุง ุ ูููููุง ุณูุฑูุฒ ููุท ุนูู ุงูุฃููุฑ ุงููููุฉ ููุนูู ูุน ููุงุฑุณ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู. <br><br>  ุณููุงูุด ูู ูุฐู ุงูููุงูุฉ ุชูุฒูุน ุงููุณุคูููุงุช ุจูู <strong>ูุญุฑู ุงูููุฑุณุฉ ุงูุนุงู</strong> ุงููุฑุชุจุท ุจุฃุณุงููุจ DBMS ุงูุฃุณุงุณูุฉ ูุทุฑู ุงููุตูู ุฅูู ุงูููุฑุณ ุงููุฑุฏู ุ ูุงูุชู ุชููููุง PostgreSQL ูู ุฅุถุงูุชูุง ูููุญูุงุช.  ูู ุงูููุงูุฉ ุงูุชุงููุฉ ุณููุงูุด <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฌูุฉ ุทุฑููุฉ ุงููุตูู</a> ูุงูููุงููู ุงูุฃุณุงุณูุฉ ูุซู ุงูุทุจูุงุช ูุนุงุฆูุงุช ุงููุดุบููู.  ุจุนุฏ ูุฐู ุงูููุฏูุฉ ุงูุทูููุฉ ูููู ุงูุถุฑูุฑูุฉ ุ ุณููุธุฑ ูู ุชูุงุตูู ูููู ูุชุทุจูู ุฃููุงุน ูุฎุชููุฉ ูู ุงูููุงุฑุณ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Hash</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">B-tree</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GiST</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SP-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GiST</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GIN</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">RUM</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">BRIN</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Bloom</a> . <br><br><blockquote style=";text-align:right;direction:rtl">  ูุจู ุฃู ูุจุฏุฃ ุ ุฃูุฏ ุฃู ุฃุดูุฑ Elena Indrupskaya ุนูู ุชุฑุฌูุฉ ุงูููุงูุงุช ุฅูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ. <br>  ููุฏ ุชุบูุฑุช ุงูุฃููุฑ ููููุงู ููุฐ ุงููุดุฑ ุงูุฃุตูู.  ูุดุงุฑ ุฅูู ุชุนูููุงุชู ุนูู ุงููุถุน ุงูุญุงูู ูุซู ูุฐุง. </blockquote><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูููุงุฑุณ </h2><br>  ูู PostgreSQL ุ ุชุนุฏ ุงูููุงุฑุณ ูุงุฆูุงุช ูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุตุฉ ูุตููุฉ ุจุดูู ุฃุณุงุณู ูุชุณุฑูุน ุงููุตูู ุฅูู ุงูุจูุงูุงุช.  ุฅููุง ููุงูู ูุณุงุนุฏุฉ: ูููู ุญุฐู ูู ููุฑุณ ูุฅุนุงุฏุฉ ุฅูุดุงุฆู ูู ุงููุนูููุงุช ุงูููุฌูุฏุฉ ูู ุงูุฌุฏูู.  ูุฏ ูุญุฏุซ ุฃุญูุงููุง ุฃู ุชุณูุน ุฃู ูุธุงู ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช (DBMS) ูููู ุฃู ูุนูู ุจุฏูู ููุงุฑุณ ุนูู ุงูุฑุบู ูู ุจุจุทุก.  ููุน ุฐูู ุ ููุณ ูุฐุง ูู ุงูุญุงู ุ ูุฃู ุงูููุงุฑุณ ุชุนูู ุฃูุถูุง ุนูู ูุฑุถ ุจุนุถ ูููุฏ ุงููุฒุงูุฉ. <br><br>  ูู ุงูููุช ุงูุญุงูู ุ ุชู ุฏูุฌ ุณุชุฉ ุฃููุงุน ูุฎุชููุฉ ูู ุงูููุงุฑุณ ูู PostgreSQL 9.6 ุ ููุชููุฑ ููุฑุณ ุขุฎุฑ ูููุญู - ุจูุถู ุงูุชุบููุฑุงุช ุงููููุฉ ูู ุงูุฅุตุฏุงุฑ 9.6.  ูุฐูู ูุชููุน ุฃููุงุน ุฌุฏูุฏุฉ ูู ุงูููุงุฑุณ ูู ุงููุณุชูุจู ุงููุฑูุจ. <br><br>  ุนูู ุงูุฑุบู ูู ุฌููุน ุงูุงุฎุชูุงูุงุช ุจูู ุฃููุงุน ุงูููุงุฑุณ (ูุชุณูู ุฃูุถูุง ุทุฑู ุงููุตูู) ุ ูุฑุจุท ูู ูููุง ูู ุงูููุงูุฉ ููุชุงุญูุง (ุนูู ุณุจูู ุงููุซุงู ุ ูููุฉ ุงูุนููุฏ ุงููููุฑุณุฉ) ุจุตููู ุงูุฌุฏูู ุงูุชู ุชุญุชูู ุนูู ูุฐุง ุงูููุชุงุญ.  ูุชู ุชุญุฏูุฏ ูู ุตู ุจูุงุณุทุฉ TID (ูุนุฑู tuple) ุ ูุงูุฐู ูุชููู ูู ุนุฏุฏ ุงููุชูุฉ ูู ุงูููู ูููุถุน ุงูุตู ุฏุงุฎู ุงููุชูุฉ.  ููุน ุฐูู ุ ุจุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงููุนุฑูู ุฃู ุจุนุถ ุงููุนูููุงุช ุญููู ุ ูููููุง ุจุณุฑุนุฉ ูุฑุงุกุฉ ุชูู ุงูุตููู ุงูุชู ูุฏ ุชุญุชูู ุนูู ุงููุนูููุงุช ุงูุชู ุชูููุง ุฏูู ูุณุญ ุงูุฌุฏูู ุจุฃูููู. <br><br>  ูู ุงูููู ุฃู ูููู ุฃู ุงูููุฑุณ ูุณุฑุน ุงููุตูู ุฅูู ุงูุจูุงูุงุช ุจุชูููุฉ ุตูุงูุฉ ูุนููุฉ.  ููู ุนูููุฉ ุนูู ุงูุจูุงูุงุช ุงููููุฑุณุฉ ุ ุณูุงุก ูุงูุช ุงูุฅุฏุฑุงุฌ ุฃู ุงูุญุฐู ุฃู ุชุญุฏูุซ ุตููู ุงูุฌุฏูู ุ ูุฌุจ ุชุญุฏูุซ ููุงุฑุณ ุฐูู ุงูุฌุฏูู ุฃูุถูุง ุ ููู ููุณ ุงููุนุงููุฉ.  ูุงุญุธ ุฃู ุชุญุฏูุซ ุญููู ุงูุฌุฏูู ุงูุชู ูู ูุชู ุฅูุดุงุก ููุงุฑุณ ููุง ูุง ูุคุฏู ุฅูู ุชุญุฏูุซ ุงูููุฑุณ ุ  ูุชุณูู ูุฐู ุงูุชูููุฉ HOT (ูููุฉ ููุท Tuples). <br><br>  ุงูุชูุฏุฏ ููุทูู ุนูู ุจุนุถ ุงูุขุซุงุฑ.  ูุชูููู ุฅุถุงูุฉ ุทุฑููุฉ ูุตูู ุฌุฏูุฏุฉ ุจุณูููุฉ ุฅูู ุงููุธุงู ุ ุชู ุชูููุฐ ูุงุฌูุฉ ููุญุฑู ุงูููุฑุณุฉ ุงูุนุงู.  ูุชุชูุซู ูููุชูุง ุงูุฑุฆูุณูุฉ ูู ุงูุญุตูู ุนูู TIDs ูู ุทุฑููุฉ ุงููุตูู ูุงูุนูู ูุนูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุงูุฅุตุฏุงุฑุงุช ุงูููุงุจูุฉ ูู ุตููู ุงูุฌุฏูู. </li><li style=";text-align:right;direction:rtl">  ุฅุญุถุงุฑ ุฅุตุฏุงุฑุงุช ุงูุตู TID ุจูุงุณุทุฉ TID ุฃู ูู ูุฌููุนุฉ ุจุงุณุชุฎุฏุงู ุตูุฑุฉ ููุทูุฉ ุชู ุฅูุดุงุคูุง ูุณุจููุง. </li><li style=";text-align:right;direction:rtl">  ุชุญูู ูู ุธููุฑ ุฅุตุฏุงุฑุงุช ุงูุตู ูููุนุงููุงุช ุงูุญุงููุฉ ูุน ูุฑุงุนุงุฉ ูุณุชูู ุงูุนุฒู ุงูุฎุงุต ุจูุง. </li></ul><br>  ูุญุฑู ุงูููุฑุณุฉ ูุชูุฑุท ูู ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช.  ูุทูู ุนููู ููููุง ูุฎุทุฉ ุชู ุฅูุดุงุคูุง ูู ูุฑุญูุฉ ุงูุชุญุณูู.  ูุฌุจ ุฃู ูููู ุงููุญุณู ุ ุงูุฐู ูููู ุจูุฑุฒ ูุชูููู ุทุฑู ูุฎุชููุฉ ูุชูููุฐ ุงูุงุณุชุนูุงู ุ ูุฏุฑุงุช ูู ุทุฑู ุงููุตูู ุงููุญุชููุฉ.  ูู ุณุชููู ุงูุทุฑููุฉ ูุงุฏุฑุฉ ุนูู ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุจุงูุชุฑุชูุจ ุงููุทููุจ ุฃู ุฃููุง ูุฌุจ ุฃู ูุชููุน ุงููุฑุฒุ  ูู ูููููุง ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ููุจุญุซ ุนู NULLุ  ูุฐู ูู ุงููุดุงูู ุงูุชู ูููู ุงููุญุณู ุจุญููุง ุจุงูุชุธุงู. <br><br>  ูุง ูุญุชุงุฌ ุงูููุญุณูู ููุท ุฅูู ูุนูููุงุช ุญูู ุทุฑููุฉ ุงููุตูู.  ุนูุฏ ุฅูุดุงุก ููุฑุณ ุ ูุฌุจ ุฃู ููุฑุฑ ุงููุธุงู ูุง ุฅุฐุง ูุงู ูููู ุจูุงุก ุงูููุฑุณ ุนูู ุนุฏุฉ ุฃุนูุฏุฉ ููุง ุฅุฐุง ูุงู ูุฐุง ุงูููุฑุณ ูุถูู ุงูุชูุฑุฏ ุฃู ูุง. <br><br>  ูุฐูู ุ ูุฌุจ ุฃู ุชููุฑ ูู ุทุฑููุฉ ูุตูู ุฌููุน ุงููุนูููุงุช ุงููุงุฒูุฉ ุนู ููุณูุง.  ุชุณุชุฎุฏู ุงูุฅุตุฏุงุฑุงุช ุงูุฃูู ูู 9.6 ุฌุฏูู "pg_am" ููุฐุง ุ ุจูููุง ุชุจุฏุฃ ุจุงูุฅุตุฏุงุฑ 9.6 ููู ุงูุจูุงูุงุช ุฅูู ูุณุชููุงุช ุฃุนูู ุ ุฏุงุฎู ูุธุงุฆู ุฎุงุตุฉ.  ุณูุชุนุฑู ุนูู ูุฐู ุงููุงุฌูุฉ ุฃูุซุฑ ููููุงู. <br><br>  ูู ูุง ุชุจูู ูู ูููุฉ ุทุฑููุฉ ุงููุตูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุชุทุจูู ุฎูุงุฑุฒููุฉ ูุฅูุดุงุก ุงูููุฑุณ ูุชุนููู ุงูุจูุงูุงุช ูู ุตูุญุงุช (ููุฏูุฑ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงููุคูุช ููุนุงูุฌุฉ ูู ููุฑุณ ุจุดูู ููุญุฏ). </li><li style=";text-align:right;direction:rtl">  ุงูุจุญุซ ูู ุงููุนูููุงุช ูู ุงูููุฑุณ ุจูุงุณุทุฉ ุงููุณูุฏ ูู ุงููููุฐุฌ " <em>ุชุนุจูุฑ ุนุงูู ุงูุญูู ุงููููุฑุณ</em> ". </li><li style=";text-align:right;direction:rtl">  ุชูููู ุชูููุฉ ุงุณุชุฎุฏุงู ุงูููุฑุณ. </li><li style=";text-align:right;direction:rtl">  ูุนุงูุฌุฉ ุงูุฃููุงู ุงููุทููุจุฉ ูููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ุงูุตุญูุญุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุณุฌูุงุช ุณุฌู (WAL) ูููุชุงุจุฉ ุงููุณุจูุฉ. </li></ul><br>  ุณููุธุฑ ุฃููุงู ูู ุฅููุงููุงุช ูุญุฑู ุงูููุฑุณุฉ ุงูุนุงูุฉ ุซู ููุชูู ุฅูู ุฏุฑุงุณุฉ ุทุฑู ุงููุตูู ุงููุฎุชููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุญุฑู ุงูููุฑุณุฉ </h2><br>  ููููู ูุญุฑู ุงูููุฑุณุฉ PostgreSQL ูู ุงูุนูู ูุน ุฃุณุงููุจ ูุตูู ูุฎุชููุฉ ุจุดูู ููุญุฏ ุ ูููู ูุน ูุฑุงุนุงุฉ ููุฒุงุชูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุชูููุงุช ุงููุณุญ ุงูุฑุฆูุณูุฉ </h3><br><h4 style=";text-align:right;direction:rtl">  ูุณุญ ูุคุดุฑ </h4><br>  ูููููุง ุงูุนูู ุจุดูู ูุฎุชูู ูุน TIDs ุงูููุฏูุฉ ุจูุงุณุทุฉ ููุฑุณ.  ูููุธุฑ ููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"><code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> t(a <span class="hljs-type"><span class="hljs-type">integer</span></span>, b <span class="hljs-type"><span class="hljs-type">text</span></span>, c <span class="hljs-type"><span class="hljs-type">boolean</span></span>); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> t(a,b,c) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> s.id, chr((<span class="hljs-number"><span class="hljs-number">32</span></span>+random()*<span class="hljs-number"><span class="hljs-number">94</span></span>)::<span class="hljs-type"><span class="hljs-type">integer</span></span>), random() &lt; <span class="hljs-number"><span class="hljs-number">0.01</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> generate_series(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">100000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> s(id) <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> random(); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> t(a); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> t;</code> </pre> <br>  ุฃูุดุฃูุง ุฌุฏูู ุซูุงุซุฉ ุญููู.  ูุญุชูู ุงูุญูู ุงูุฃูู ุนูู ุฃุฑูุงู ูู 1 ุฅูู 100.000 ุ ููุชู ุฅูุดุงุก ููุฑุณ (ุจุบุถ ุงููุธุฑ ุนู ููุนู) ูู ูุฐุง ุงูุญูู.  ูุญุชูู ุงูุญูู ุงูุซุงูู ุนูู ุงูุนุฏูุฏ ูู ุฃุญุฑู ASCII ุจุงุณุชุซูุงุก ุงูุฃุญุฑู ุบูุฑ ุงููุงุจูุฉ ููุทุจุงุนุฉ.  ุฃุฎูุฑูุง ุ ูุญุชูู ุงูุญูู ุงูุซุงูุซ ุนูู ูููุฉ ููุทููุฉ ุตุญูุญุฉ ูุญูุงูู 1ูช ูู ุงูุตููู ูุฎุทุฃ ููุจุงูู.  ูุชู ุฅุฏุฑุงุฌ ุงูุตููู ูู ุงูุฌุฏูู ุจุชุฑุชูุจ ุนุดูุงุฆู. <br><br>  ุฏุนูุง ูุญุงูู ุชุญุฏูุฏ ูููุฉ ุญุณุจ ุงูุญุงูุฉ "a = 1".  ูุงุญุธ ุฃู ุงูุดุฑุท ูุดุจู " <em>ุชุนุจูุฑ ุนุงูู ุงูุญูู ุงููููุฑุณ</em> " ุ ุญูุซ ูููู <em>ุงูุนุงูู</em> "ูุณุงูู" <em>ูุงูุชุนุจูุฑ</em> (ููุชุงุญ ุงูุจุญุซ) ูู "1".  ูู ูุนุธู ุงูุญุงูุงุช ุ ูุฌุจ ุฃู ูููู ุงูุดุฑุท ููุฐุง ููุชู ุงุณุชุฎุฏุงูู ูู ุงูููุฑุณ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a = <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------- Index Scan using t_a_idx on t Index Cond: (a = 1) (2 rows)</code> </pre><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฑุฑ ูุญุณู ุงุณุชุฎุฏุงู <em>ุงููุณุญ ุงูุถูุฆู ุงูููุฑุณ</em> .  ูุน ุงููุณุญ ุงูุถูุฆู ููููุฑุณ ุ ุชููู ุทุฑููุฉ ุงููุตูู ุจุฅุฑุฌุงุน ููู TID ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุญุชู ูุชู ุงููุตูู ุฅูู ุขุฎุฑ ุตู ูุทุงุจู.  ูุตู ูุญุฑู ุงูููุฑุณุฉ ุฅูู ุตููู ุงูุฌุฏูู ุงููุดุงุฑ ุฅูููุง ุจูุงุณุทุฉ TID ุจุฏูุฑูุง ุ ููุญุตู ุนูู ุฅุตุฏุงุฑ ุงูุตู ุ ููุชุญูู ูู ุฑุคูุชู ููุงุจู ููุงุนุฏ ุงูุชุฒุงูู ุงููุชุนุฏุฏุฉ ุ ููุนูุฏ ุงูุจูุงูุงุช ุงูุชู ุชู ุงูุญุตูู ุนูููุง. <br><br><h4 style=";text-align:right;direction:rtl">  ุตูุฑุฉ ููุทูุฉ ุงููุณุญ </h4><br>  ุชูุญุต ุงูููุฑุณ ูุนูู ุจุดูู ุฌูุฏ ุนูุฏูุง ูุชุนุงูู ูุน ููู ููููุฉ ููุท.  ููุน ุฐูู ุ ูุน ุฒูุงุฏุฉ ุนุฏุฏ ุงูุตููู ุงูุชู ุชู ุงุณุชุฑุฏุงุฏูุง ุ ููู ุงูุฃุฑุฌุญ ุฃู ุชุนูุฏ ุฅูู ุตูุญุฉ ุงูุฌุฏูู ููุณูุง ุนุฏุฉ ูุฑุงุช.  ูุฐูู ุ ูููู ุงููุญุณู ุจุงูุชุจุฏูู ุฅูู <em>ุตูุฑุฉ ููุทูุฉ</em> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a &lt;= <span class="hljs-number"><span class="hljs-number">100</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------------ Bitmap Heap Scan on t Recheck Cond: (a &lt;= 100) -&gt; Bitmap Index Scan on t_a_idx Index Cond: (a &lt;= 100) (4 rows)</code> </pre><br>  ุชููู ุทุฑููุฉ ุงููุตูู ุฃููุงู ุจุฅุฑุฌุงุน ูุงูุฉ TIDs ุงูุชู ุชุชุทุงุจู ูุน ุงูุดุฑุท (ุนูุฏุฉ ููุฑุณ ุตูุฑุฉ ููุทูุฉ) ุ ููุชู ุฅูุดุงุก ุงูุตูุฑุฉ ุงูููุทูุฉ ูุฅุตุฏุงุฑุงุช ุงูุตููู ูู ูุฐู ุงูุฃุฑูุงู.  ุซู ุชุชู ูุฑุงุกุฉ ุฅุตุฏุงุฑุงุช ุงูุตููู ูู ุงูุฌุฏูู (ุตูุฑุฉ ููุทูุฉ Heap Scan) ุ ุชุชู ูุฑุงุกุฉ ูู ุตูุญุฉ ูุฑุฉ ูุงุญุฏุฉ ููุท. <br><br>  ูุงุญุธ ุฃูู ูู ุงูุฎุทูุฉ ุงูุซุงููุฉ ุ ูููู ุฅุนุงุฏุฉ ูุญุต ุงูุญุงูุฉ (ุฅุนุงุฏุฉ ุงูุชุญูู ูู ูููุฏ).  ูููู ุฃู ูููู ุนุฏุฏ ุงูุตููู ุงูุชู ุชู ุงุณุชุฑุฏุงุฏูุง ูุจูุฑูุง ุฌุฏูุง ุจุญูุซ ูุง ูููู ููุตูุฑุฉ ุงูููุทูุฉ ูุฅุตุฏุงุฑุงุช ุงูุตู ุงุญุชูุงุก ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (ุจุดูู ูุญุฏูุฏ ุจูุงุณุทุฉ ุงููุนููุฉ "work_mem").  ูู ูุฐู ุงูุญุงูุฉ ุ ุชู ุชุตููู ุงูุตูุฑุฉ ุงูููุทูุฉ ููุท ููุตูุญุงุช ุงูุชู ุชุญุชูู ุนูู ุฅุตุฏุงุฑ ุตู ูุทุงุจู ูุงุญุฏ ุนูู ุงูุฃูู.  ุชุชุทูุจ ูุฐู ุงูุตูุฑุฉ ุงูููุทูุฉ "ุงูููููุฏุฉ" ูุณุงุญุฉ ุฃูู ุ ูููู ุนูุฏ ูุฑุงุกุฉ ุตูุญุฉ ุ ูุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุงูุชุญูู ูู ุดุฑูุท ูู ุตู ููุฌูุฏ ููุงู.  ูุงุญุธ ุฃูู ุญุชู ุจุงููุณุจุฉ ูุนุฏุฏ ุตุบูุฑ ูู ุงูุตููู ุงูุชู ุชู ุงุณุชุฑุฏุงุฏูุง ูุจุงูุชุงูู ุงูุตูุฑุฉ ุงูููุทูุฉ "ุงูุฏูููุฉ" (ููุง ูู ูุซุงููุง) ุ ูุชู ุชูุซูู ุงูุฎุทูุฉ "ุฅุนุงุฏุฉ ุงูุชุญูู ูู ููู" ูู ุงูุฎุทุฉ ุนูู ุฃู ุญุงู ุ ุนูู ุงูุฑุบู ูู ุนุฏู ุชูููุฐูุง ูุนูููุง. <br><br>  ุฅุฐุง ุชู ูุฑุถ ุดุฑูุท ุนูู ุงูุนุฏูุฏ ูู ุญููู ุงูุฌุฏูู ูุชู ููุฑุณุฉ ูุฐู ุงูุญููู ุ ูุฅู ูุญุต ุงูุตูุฑ ุงูููุทูุฉ ููููู ูู ุงุณุชุฎุฏุงู ุนุฏุฉ ููุงุฑุณ ูู ููุช ูุงุญุฏ (ุฅุฐุง ุงุนุชุจุฑ ุงููุญุณู ูุฐุง ูุนุงูุงู).  ููู ููุฑุณ ุ ูุชู ุฅูุดุงุก ุงูุตูุฑ ุงูููุทูุฉ ูุฅุตุฏุงุฑุงุช ุงูุตู ุ ูุงูุชู ูุชู ูู ุฎูุงููุง ุชูููุฐ ุงูุถุฑุจ ุงูููุทูู ููุจุช (ุฅุฐุง ุชู ุฑุจุท ุงูุชุนุจูุฑุงุช ุจู AND) ุฃู ุงูุฅุถุงูุฉ ุงูููุทููุฉ (ุฅุฐุง ุชู ุฑุจุท ุงูุชุนุจูุฑุงุช ุจ OR).  ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> t(b); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> t; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a &lt;= <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> b = <span class="hljs-string"><span class="hljs-string">'a'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN -------------------------------------------------- Bitmap Heap Scan on t Recheck Cond: ((a &lt;= 100) AND (b = 'a'::text)) -&gt; BitmapAnd -&gt; Bitmap Index Scan on t_a_idx Index Cond: (a &lt;= 100) -&gt; Bitmap Index Scan on t_b_idx Index Cond: (b = 'a'::text) (7 rows)</code> </pre><br>  ููุง ุงูุนูุฏุฉ BitmapAnd ููุถู ุงุซููู ูู ุงูุตูุฑ ุงูููุทูุฉ ุจูุงุณุทุฉ bitwise "ู" ุงูุนูููุฉ. <br><br>  ูููููู ูุณุญ ุงูุตูุฑ ุงูููุทูุฉ ูู ุชุฌูุจ ุงููุตูู ุงููุชูุฑุฑ ุฅูู ุตูุญุฉ ุงูุจูุงูุงุช ููุณูุง.  ูููู ูุงุฐุง ูู ูุงูุช ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ุตูุญุงุช ุงูุฌุฏูู ูุฑุชุจุฉ ูุนูููุง ุจููุณ ุงูุทุฑููุฉ ุชูุงููุง ูุซู ุณุฌูุงุช ุงูููุฑุณุ  ููุง ูุง ุดู ููู ุฃููุง ูุง ูุณุชุทูุน ุงูุงุนุชูุงุฏ ุจุดูู ูุงูู ุนูู ุงูุชุฑุชูุจ ุงููุนูู ููุจูุงูุงุช ูู ุงูุตูุญุงุช.  ุฅุฐุง ูุงูุช ููุงู ุญุงุฌุฉ ุฅูู ุจูุงูุงุช ูุตููุฉ ุ ูุฌุจ ุฃู ูุญุฏุฏ ุจุดูู ุตุฑูุญ ุฌููุฉ ORDER BY ูู ุงูุงุณุชุนูุงู.  ููู ูู ุงููุญุชูู ุฃู ุชููู ุงูููุงูู ุญูุซ ูุชู ุทูุจ ุจูุงูุงุช "ุฌููุนูุง" ุชูุฑูุจูุง: ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุชูุช ุฅุถุงูุฉ ุตููู ุจุงูุชุฑุชูุจ ุงููุทููุจ ููุง ุชุชุบูุฑ ุจุนุฏ ุฐูู ุฃู ุจุนุฏ ุชูููุฐ ุฃูุฑ CLUSTER.  ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูุนุฏ ุฅูุดุงุก ุตูุฑุฉ ููุทูุฉ ุฎุทูุฉ ููุฑุทุฉ ุ ูุณูููู ุฅุฌุฑุงุก ูุณุญ ููุฑุณ ุนุงุฏู ุจููุณ ุฌูุฏุฉ (ูุง ูู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฅููุงููุฉ ุงูุงูุถูุงู ุฅูู ุนุฏุฉ ููุงุฑุณ).  ูุฐูู ุ ุนูุฏ ุงุฎุชูุงุฑ ุทุฑููุฉ ุงููุตูู ุ ูุจุญุซ ุงููุฎุทุท ูู ุฅุญุตุงุฆูุฉ ุฎุงุตุฉ ุชูุธูุฑ ุงูุนูุงูุฉ ุจูู ุชุฑุชูุจ ุงูุตู ุงููุนูู ูุงูุชุฑุชูุจ ุงูููุทูู ูููู ุงูุฃุนูุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> attname, correlation <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_stats <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> tablename = <span class="hljs-string"><span class="hljs-string">'t'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> attname | correlation ---------+------------- b | 0.533512 c | 0.942365 a | -0.00768816 (3 rows)</code> </pre><br>  ุชุดูุฑ ุงูููู ุงููุทููุฉ ุงููุฑูุจุฉ ูู ูุงุญุฏุฉ ุฅูู ูุฌูุฏ ุนูุงูุฉ ุงุฑุชุจุงุท ุนุงููุฉ (ููุง ูู ุงูุญุงู ูุน ุงูุนููุฏ "c") ุ ุจูููุง ุชุดูุฑ ุงูููู ุงููุฑูุจุฉ ูู ุงูุตูุฑ ุ ุนูู ุงูุนูุณ ุ ุฅูู ุชูุฒูุน ููุถูู (ุงูุนููุฏ "a"). <br><br><h4 style=";text-align:right;direction:rtl">  ุงููุณุญ ุงููุชุณูุณู </h4><br>  ูุฅููุงู ุงูุตูุฑุฉ ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ุญุงูุฉ ุบูุฑ ุงูุชูุงุฆูุฉ ุ ุณูููู ุงููุญุณู ุนูู ุญู ูู ุชูุถูู ุงููุณุญ ุงููุชุณูุณู ููุฌุฏูู ุจุฃูููู ุนูู ุงุณุชุฎุฏุงู ุงูููุฑุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a &lt;= <span class="hljs-number"><span class="hljs-number">40000</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------ Seq Scan on t Filter: (a &lt;= 40000) (2 rows)</code> </pre><br>  ุงูุดูุก ูู ุฃู ุงูููุงุฑุณ ุชุนูู ุจุดูู ุฃูุถู ุ ูููุง ูุงูุช ุงูุชูุงุฆูุฉ ุงูุญุงูุฉ ุฃุนูู ุ ูููุง ูู ุนุฏุฏ ุงูุตููู ุงูุชู ุชุทุงุจููุง.  ููู ุนุฏุฏ ุงูุตููู ุงูุชู ุชู ุงุณุชุฑุฏุงุฏูุง ูุฒูุฏ ูู ุงูุชูุงููู ุงูุนุงูุฉ ููุฑุงุกุฉ ุตูุญุงุช ุงูููุฑุณ. <br><br>  ุงููุณุญ ุงูุชุณูุณูู ูุฌุฑู ุฃุณุฑุน ุฃู ุนูููุงุช ุงููุณุญ ุงูุนุดูุงุฆู ูุถุงุนู ุงููููู.  ูุฐุง ููุทุจู ุจุดูู ุฎุงุต ุนูู ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุ ุญูุซ ุชุณุชุบุฑู ุงูุนูููุฉ ุงููููุงููููุฉ ูุฌูุจ ุฑุฃุณ ูุบูุงุทูุณู ุฅูู ุงููุณุงุฑ ููุชูุง ุฃุทูู ุจูุซูุฑ ูู ูุฑุงุกุฉ ุงูุจูุงูุงุช ููุณูุง.  ูุฐุง ุงูุชุฃุซูุฑ ูู ุฃูู ูุถูุญุง ุจุงููุณุจุฉ SSD.  ุชุชููุฑ ูุนููุชุงู ูุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงูุงุฎุชูุงูุงุช ูู ุชูุงููู ุงููุตูู ุ "seq_page_cost" ู "random_page_cost" ุ ูุงูุชู ูููููุง ุชุนููููุง ููุณ ููุท ุนูู ุงููุณุชูู ุงูุนุงููู ุ ูููู ุนูู ูุณุชูู ูุณุงุญุงุช ุงูุฌุฏุงูู ุ ูุจูุฐู ุงูุทุฑููุฉ ูุชู ุถุจุท ุฎุตุงุฆุต ุงููุธุงู ุงููุฑุนู ูููุฑุต ุงููุฎุชููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุบุทู ุงูููุงุฑุณ </h3><br>  ููุงุนุฏุฉ ุนุงูุฉ ุ ุชุชูุซู ุงููููุฉ ุงูุฑุฆูุณูุฉ ูุทุฑููุฉ ุงููุตูู ูู ุฅุฑุฌุงุน ูุนุฑูุงุช ูุทุงุจูุฉ ุตููู ุงูุฌุฏูู ููุญุฑู ุงูููุฑุณุฉ ููุฑุงุกุฉ ุงูุจูุงูุงุช ุงููุงุฒูุฉ ูู ูุฐู ุงูุตููู.  ูููู ูุงุฐุง ูู ูุงู ุงูููุฑุณ ูุญุชูู ุจุงููุนู ุนูู ุฌููุน ุงูุจูุงูุงุช ุงููุงุฒูุฉ ููุงุณุชุนูุงูุ  ูุณูู ูุฐุง ุงูููุฑุณ <em>ุจุงูุบุทุงุก</em> ุ ููู ูุฐู ุงูุญุงูุฉ ุ ูููู ูููุญุณู ุชุทุจูู <em>ุงููุณุญ ุงูุถูุฆู ููุท</em> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">vacuum</span></span> t; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------------ Index Only Scan using t_a_idx on t Index Cond: (a &lt; 100) (2 rows)</code> </pre><br>  ูุฏ ูุนุทู ูุฐุง ุงูุงุณู ููุฑุฉ ุฃู ูุดุบู ุงูููุฑุณุฉ ูุง ูุตู ุฅูู ุงูุฌุฏูู ุนูู ุงูุฅุทูุงู ููุญุตู ุนูู ุฌููุน ุงููุนูููุงุช ุงููุงุฒูุฉ ูู ุทุฑููุฉ ุงููุตูู ูุญุฏูุง.  ูููู ูุฐุง ููุณ ูู ุงูุญุงู ุจุงูุถุจุท ูุฃู ุงูููุงุฑุณ ูู PostgreSQL ูุง ุชุฎุฒู ุงููุนูููุงุช ุงูุชู ุชููููุง ูู ุงูุญูู ุนูู ุฑุคูุฉ ุงูุตู.  ูุฐูู ุ ุชููู ุทุฑููุฉ ุงููุตูู ุจุฅุฑุฌุงุน ุฅุตุฏุงุฑุงุช ุงูุตููู ุงูุชู ุชุทุงุจู ุดุฑุท ุงูุจุญุซ ุจุบุถ ุงููุธุฑ ุนู ูุฏู ุฑุคูุชูุง ูู ุงููุนุงููุฉ ุงูุญุงููุฉ. <br><br>  ููุน ุฐูู ุ ุฅุฐุง ุงุญุชุงุฌ ูุญุฑู ุงูููุฑุณุฉ ุฅูู ุงููุธุฑ ุฅูู ุงูุฌุฏูู ูู ุฃุฌู ุงูุฑุคูุฉ ูู ูู ูุฑุฉ ุ ููู ุชููู ุทุฑููุฉ ุงููุณุญ ูุฐู ูุฎุชููุฉ ุนู ุทุฑููุฉ ุงููุณุญ ุงูุถูุฆู ุงูููุชุธู. <br><br>  ูุญู ุงููุดููุฉ ุ ุจุงููุณุจุฉ ููุฌุฏุงูู ุ ูุญุชูุธ PostgreSQL ุจูุง ูุณูู <em>ุจุฎุฑูุทุฉ ุงูุฑุคูุฉ</em> ุงูุชู ูุญุฏุฏ ูููุง ุงููุฑุงุบ ุงูุตูุญุงุช ุงูุชู ูู ูุชู ุชุบููุฑ ุงูุจูุงูุงุช ูููุง ููุชุฑุฉ ูุงููุฉ ุจุญูุซ ุชููู ูุฐู ุงูุจูุงูุงุช ูุฑุฆูุฉ ุจูุงุณุทุฉ ุฌููุน ุงููุนุงููุงุช ุจุบุถ ุงููุธุฑ ุนู ููุช ุงูุจุฏุก ููุณุชูู ุงูุนุฒู.  ุฅุฐุง ูุงู ูุนุฑู ุงูุตู ุงูุฐู ุชู ุฅุฑุฌุงุนู ุจูุงุณุทุฉ ุงูููุฑุณ ูุชุนูู ุจูุฐู ุงูุตูุญุฉ ุ ููููู ุชุฌูุจ ุงูุชุญูู ูู ุงูุฑุคูุฉ. <br><br>  ูุฐูู ุ ูุฒูุฏ ุงูููุณ ุงูุนุงุฏู ูู ููุงุกุฉ ุชุบุทูุฉ ุงูููุงุฑุณ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฃุฎุฐ ุงูููุญุณููู ูู ุงูุงุนุชุจุงุฑ ุนุฏุฏ ุงูุชูุงููุฐ ุงูููุชุฉ ูููููู ุฃู ููุฑุฑ ุนุฏู ุงุณุชุฎุฏุงู ุงูููุฑุณุฉ ููุท ุฅุฐุง ูุงู ูุชููุน ุงุฑุชูุงุน ุงูุชูุงููู ุงูุนุงูุฉ ููุญุต ุงูุฑุคูุฉ. <br><br>  ูููููุง ูุนุฑูุฉ ุนุฏุฏ ูุฑุงุช ุงููุตูู ุงููุณุฑู ุฅูู ุฌุฏูู ุจุงุณุชุฎุฏุงู ุฃูุฑ EXPLAIN ANALYZE: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------------------------------------------------------- Index Only Scan using t_a_idx on t (actual time=0.025..0.036 rows=99 loops=1) Index Cond: (a &lt; 100) Heap Fetches: 0 Planning time: 0.092 ms Execution time: 0.059 ms (5 rows)</code> </pre><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูู ุชูู ููุงู ุญุงุฌุฉ ูููุตูู ุฅูู ุงูุฌุฏูู (Het Fetches: 0) ุ ูุธุฑูุง ูุฃู ุงูุชูุธูู ุจุงููููุณุฉ ุงูููุฑุจุงุฆูุฉ ูุฏ ุชู ููุชู.  ุจุดูู ุนุงู ุ ูููุง ูุงู ูุฐุง ุงูุฑูู ุฃูุฑุจ ุฅูู ุงูุตูุฑ ูููุง ูุงู ุฐูู ุฃูุถู. <br><br>  ูุง ุชููู ูู ุงูููุงุฑุณ ุจุชุฎุฒูู ุงูููู ุงููููุฑุณุฉ ุฅูู ุฌุงูุจ ูุนุฑูุงุช ุงูุตู.  ุฅุฐุง ูู ุชุชููู ุทุฑููุฉ ุงููุตูู ูู ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุ ููุง ูููู ุงุณุชุฎุฏุงููุง ููุญุต ุงูููุฑุณ ููุท. <br><br><blockquote style=";text-align:right;direction:rtl">  ููุฏ ูุฏู PostgreSQL 11 ููุฒุฉ ุฌุฏูุฏุฉ: ุชุดูู ุงูููุงุฑุณ.  ูุงุฐุง ูู ูุงู ููุงู ููุฑุณ ูุฑูุฏ ููุชูุฑ ุฅูู ุจุนุถ ุงูุฃุนูุฏุฉ ููุชู ุงุณุชุฎุฏุงูู ูููุฑุณ ุชุบุทูุฉ ูุจุนุถ ุงูุงุณุชุนูุงูุงุชุ  ูุง ููููู ุจุจุณุงุทุฉ ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุฅูู ุงูููุฑุณ ูุฃูู ุณูููุฑุฏ ุจุชูุฑุฏู.  ุชุณูุญ ูุฐู ุงูููุฒุฉ ุจุชุถููู ุฃุนูุฏุฉ <em>ุบูุฑ ุฃุณุงุณูุฉ</em> ูุง ุชุคุซุฑ ุนูู ุงูุชูุฑุฏ ููุง ูููู ุงุณุชุฎุฏุงููุง ูู ุชูุฏูุฑุงุช ุงูุจุญุซ ุ ูููู ูุง ูุฒุงู ุจุฅููุงููุง ุชูุฏูู ุนูููุงุช ูุณุญ ููููุฑุณ ููุท.  ุชู ุชุทููุฑ ุงูุชุตุญูุญ ูู ูุจู ุฒูููู ุฃูุงุณุชุงุฒูุง ููุจูููููุง. <br></blockquote><br><h3 style=";text-align:right;direction:rtl">  ูุงุบูุฉ </h3><br>  ุชูุนุจ ุงูููู ุงูุฎุงููุฉ ุฏูุฑูุง ููููุง ูู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุนูุงุฆููุฉ ููุณููุฉ ููุงุฆูุฉ ูุชูุซูู ูููุฉ ุบูุฑ ููุฌูุฏุฉ ุฃู ุบูุฑ ูุนุฑููุฉ. <br><br>  ูููู ูููุฉ ุฎุงุตุฉ ูู ุฎุงุตุฉ ููุชุนุงูู ูุนูุง.  ุฌุจุฑ ููุทูู ููุชุธู ูุตุจุญ ุซูุงุซูุฉ.  ูู ุบูุฑ ุงููุงุถุญ ูุง ุฅุฐุง ูุงู ูุฌุจ ุฃู ูููู NULL ุฃุตุบุฑ ุฃู ุฃูุจุฑ ูู ุงูููู ุงูุนุงุฏูุฉ (ููุฐุง ูุชุทูุจ ุฅูุดุงุกุงุช ุฎุงุตุฉ ูููุฑุฒ ุ NULLS FIRST ู NULLS LAST) ุ  ููุณ ูู ุงููุงุถุญ ูุง ุฅุฐุง ูุงูุช ุงูุฏูุงู ุงูุชุฌููุนูุฉ ูุฌุจ ุฃู ุชุฑุงุนู ุงูููู ุงููุงุฑุบุฉ ุฃู ูุง ุ  ููุงู ุญุงุฌุฉ ุฅูู ุฅุญุตุงุฆูุฉ ุฎุงุตุฉ ูููุฎุทุท ... <br><br>  ูู ููุธูุฑ ุฏุนู ุงูููุฑุณ ุ ูู ุบูุฑ ุงููุงุถุญ ุฃูุถูุง ูุง ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ููุฑุณุฉ ูุฐู ุงูููู ุฃู ูุง.  ุฅุฐุง ูู ูุชู ููุฑุณุฉ NULLs ุ ููุฏ ูููู ุงูููุฑุณ ุฃูุซุฑ ุถุบุทูุง.  ูููู ุฅุฐุง ุชูุช ููุฑุณุฉ NULLs ุ ูุณูููู ูุงุฏุฑูู ุนูู ุงุณุชุฎุฏุงู ุงูููุฑุณ ูุดุฑูุท ูุซู " <em>ุงูุญูู ุงููููุฑุณ</em> IS [NOT] NULL" ูุฃูุถูุง ุจุงุนุชุจุงุฑู ููุฑุณ ุชุบุทูุฉ ุนูุฏูุง ูุง ูุชู ุชุญุฏูุฏ ุดุฑูุท ุนูู ุงูุฅุทูุงู ููุฌุฏูู (ุญูุซ ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุฃู ูุนุฑุถ ุงูููุฑุณ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุฌููุน ุตููู ุงูุฌุฏูู ุ ุจูุง ูู ุฐูู ุชูู ุงูุตููู ุงููุงุฑุบุฉ). <br><br>  ููู ุทุฑููุฉ ูุตูู ุ ูุชุฎุฐ ุงููุทูุฑูู ูุฑุงุฑูุง ูุฑุฏููุง ุจููุฑุณุฉ ุงูููู ุงููุงุฑุบุฉ ุฃู ูุง.  ููู ููุงุนุฏุฉ ุนุงูุฉ ุ ูุชู ููุฑุณุชูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ููุงุฑุณ ูู ุนุฏุฉ ูุฌุงูุงุช </h3><br>  ูุฏุนู ุดุฑูุท ุงูุนุฏูุฏ ูู ุงูุญููู ุ ูููู ุงุณุชุฎุฏุงู <em>ููุงุฑุณ ูุชุนุฏุฏุฉ ุงูุฃุนูุฏุฉ</em> .  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ูุจูู ููุฑุณูุง ูู ุญูููู ูู ุฌุฏูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> t(a,b); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> t;</code> </pre><br>  ุนูู ุงูุฃุฑุฌุญ ุณููุถู ุงูููุญุณูู ูุฐุง ุงูููุฑุณ ููุงูุถูุงู ุฅูู ุงูุตูุฑ ุงูููุทูุฉ ูุฃููุง ููุง ูุญุตู ุนูู ุฃุฑูุงู TID ุงููุทููุจุฉ ุฏูู ุฃู ุนูููุงุช ูุณุงุนุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a &lt;= <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> b = <span class="hljs-string"><span class="hljs-string">'a'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------------------------ Index Scan using t_a_b_idx on t Index Cond: ((a &lt;= 100) AND (b = 'a'::text)) (2 rows)</code> </pre><br>  ูููู ุฃูุถูุง ุงุณุชุฎุฏุงู ููุฑุณ ูุชุนุฏุฏ ุงูุฃุนูุฏุฉ ูุชุณุฑูุน ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู ุฎูุงู ุดุฑุท ูุจุนุถ ุงูุญููู ุ ุจุฏุกูุง ูู ุงูุฃูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a &lt;= <span class="hljs-number"><span class="hljs-number">100</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN -------------------------------------- Bitmap Heap Scan on t Recheck Cond: (a &lt;= 100) -&gt; Bitmap Index Scan on t_a_b_idx Index Cond: (a &lt;= 100) (4 rows)</code> </pre><br>  ุจุดูู ุนุงู ุ ุฅุฐุง ูู ูุชู ูุฑุถ ุงูุดุฑุท ุนูู ุงูุญูู ุงูุฃูู ุ ููู ูุชู ุงุณุชุฎุฏุงู ุงูููุฑุณ.  ููู ูู ุจุนุถ ุงูุฃุญูุงู ูุฏ ูุนุชุจุฑ ุงููุญุณู ุงุณุชุฎุฏุงู ุงูููุฑุณ ุฃูุซุฑ ููุงุกุฉ ูู ุงููุณุญ ุงููุชุณูุณู.  ุณูุชูุณุน ูู ูุฐุง ุงูููุถูุน ุนูุฏ ุงููุธุฑ ูู ููุงุฑุณ "btree". <br><br>  ูุง ุชุฏุนู ูู ุทุฑู ุงููุตูู ููุงุฑุณ ุงูุจูุงุก ูู ุนุฏุฉ ุฃุนูุฏุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ููุงุฑุณ ุนูู ุงูุชุนุจูุฑุงุช </h3><br>  ููุฏ ุฐูุฑูุง ุจุงููุนู ุฃู ุดุฑุท ุงูุจุญุซ ูุฌุจ ุฃู ูุจุฏู " <em>ุชุนุจูุฑ ุนุงูู ุงูุญูู ุงููููุฑุณ</em> ".  ูู ุงููุซุงู ุฃุฏูุงู ุ ูู ูุชู ุงุณุชุฎุฏุงู ุงูููุฑุณ ูุฃูู ูุชู ุงุณุชุฎุฏุงู ุชุนุจูุฑ ูุญุชูู ุนูู ุงุณู ุงูุญูู ุจุฏูุงู ูู ุงุณู ุงูุญูู ููุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> lower(b) = <span class="hljs-string"><span class="hljs-string">'a'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------------------ Seq Scan on t Filter: (lower((b)::text) = 'a'::text) (2 rows)</code> </pre><br>  ูุง ูุชุทูุจ ุงูุฃูุฑ ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุฐุง ุงูุงุณุชุนูุงู ุงููุญุฏุฏ ูุซูุฑูุง ุญุชู ุชุชู ูุชุงุจุฉ ุงุณู ุงูุญูู ููุท ุนูู ูุณุงุฑ ุงููุดุบู.  ูููู ุฅุฐุง ูู ููู ุฐูู ูููููุง ุ ูุณุชุณุงุนุฏ ููุงุฑุณ ุงูุชุนุจูุฑุงุช (ุงูููุงุฑุณ ุงููุธูููุฉ) ุนูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> t(lower(b)); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> t; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> lower(b) = <span class="hljs-string"><span class="hljs-string">'a'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ---------------------------------------------------- Bitmap Heap Scan on t Recheck Cond: (lower((b)::text) = 'a'::text) -&gt; Bitmap Index Scan on t_lower_idx Index Cond: (lower((b)::text) = 'a'::text) (4 rows)</code> </pre><br>  ุงูููุฑุณ ุงููุธููู ูุจูู ููุณ ุนูู ุญูู ุฌุฏูู ุ ูููู ุนูู ุชุนุจูุฑ ุชุนุณูู.  ุณููุธุฑ ุงูููุญุณูู ูู ูุฐุง ุงูููุฑุณ ูุธุฑูู ูุซู " <em>ุชุนุจูุฑ ุนุงูู ุงูุชุนุจูุฑ ุงููููุฑุณุฉ</em> ".  ุฅุฐุง ูุงู ุญุณุงุจ ุงูุชุนุจูุฑ ุงููุฑุงุฏ ููุฑุณุชู ุนูููุฉ ููููุฉ ุ ูุณูุชุทูุจ ุชุญุฏูุซ ุงูููุฑุณ ุฃูุถูุง ููุงุฑุฏ ุญุณุงุจ ูุจูุฑุฉ. <br><br>  ูุฑุฌู ุฃูุถูุง ูุฑุงุนุงุฉ ุฃูู ูุชู ุฌูุน ุฅุญุตุงุฆูุงุช ูุฑุฏูุฉ ููุชุนุจูุฑ ุงููููุฑุณ.  ูููููุง ุงูุชุนุฑู ุนูู ูุฐู ุงูุฅุญุตุงุฆูุฉ ูู ุนุฑุถ "pg_stats" ุญุณุจ ุงุณู ุงูููุฑุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# \dt</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Table "public.t" Column | Type | Modifiers --------+---------+----------- a | integer | b | text | c | boolean | Indexes: "t_a_b_idx" btree (a, b) "t_a_idx" btree (a) "t_b_idx" btree (b) "t_lower_idx" btree (lower(b))</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_stats <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> tablename = <span class="hljs-string"><span class="hljs-string">'t_lower_idx'</span></span>;</code> </pre><br>  ูู ุงููููู ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุงูุชุญูู ูู ุนุฏุฏ ุณูุงู ุงูุฑุณู ุงูุจูุงูู ุจููุณ ุงูุทุฑููุฉ ุงููุชุจุนุฉ ูู ุญููู ุงูุจูุงูุงุช ุงูุนุงุฏูุฉ (ูุน ููุงุญุธุฉ ุฃู ุงุณู ุงูุนููุฏ ูููู ุฃู ูุฎุชูู ููููุง ููุชุนุจูุฑ ุงููููุฑุณ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# \d t_lower_idx</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Index "public.t_lower_idx" Column | Type | Definition --------+------+------------ lower | text | lower(b) btree, for table "public.t"</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> t_lower_idx <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> "lower" <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">statistics</span></span> <span class="hljs-number"><span class="hljs-number">69</span></span>;</code> </pre><br><blockquote style=";text-align:right;direction:rtl">  ููุฏู PostgreSQL 11 ุทุฑููุฉ ุฃูุธู ููุชุญูู ูู ูุฏู ุงูุฅุญุตุงุฆูุงุช ููููุงุฑุณ ุนู ุทุฑูู ุชุญุฏูุฏ <em>ุฑูู</em> ุงูุนููุฏ ูู ุฃูุฑ ALTER INDEX ... SET STATISTICS.  ุชู ุชุทููุฑ ุงูุฑูุนุฉ ุจูุงุณุทุฉ ุฒูููู ุฃููุณูุฏุฑ ููุฑูุชููู ุ ูุฃุฏุฑูุงู ูุงูุฑุงุช. </blockquote><br><h3 style=";text-align:right;direction:rtl">  ููุงุฑุณ ุฌุฒุฆูุฉ </h3><br>  ูู ุจุนุถ ุงูุฃุญูุงู ุชูุดุฃ ุญุงุฌุฉ ูููุฑุณุฉ ุฌุฒุก ููุท ูู ุตููู ุงูุฌุฏูู.  ูุฑุชุจุท ูุฐุง ุนุงุฏุฉู ุจุชูุฒูุน ุบูุฑ ููุชุธู ููุบุงูุฉ: ูู ุงูููุทูู ุงูุจุญุซ ุนู ูููุฉ ูุงุฏุฑุฉ ุจูุงุณุทุฉ ููุฑุณ ุ ูููู ูู ุงูุฃุณูู ุงูุนุซูุฑ ุนูู ูููุฉ ูุชูุฑุฑุฉ ุนู ุทุฑูู ุงููุณุญ ุงููุงูู ููุฌุฏูู. <br><br>  ูููููุง ุจุงูุชุฃููุฏ ุฅูุดุงุก ููุฑุณ ููุชุธู ุนูู ุงูุนููุฏ "c" ุ ูุงูุฐู ุณูู ูุนูู ุจุงูุทุฑููุฉ ุงูุชู ูุชููุนูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> t(c); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> t; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> c;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------- Index Scan using t_c_idx on t Index Cond: (c = true) Filter: c (3 rows)</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> c;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------- Seq Scan on t Filter: (NOT c) (2 rows)</code> </pre><br>  ูุญุฌู ุงูููุฑุณ ูู 276 ุตูุญุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> relpages <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_class <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> relname=<span class="hljs-string"><span class="hljs-string">'t_c_idx'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> relpages ---------- 276 (1 row)</code> </pre><br>  ูููู ูุธุฑูุง ูุฃู ุงูุนููุฏ "c" ูู ูููุฉ ุตูุงุจ ููุท ูู 1ูช ูู ุงูุตููู ุ ูุฅู 99ูช ูู ุงูููุฑุณ ูุง ูุชู ุงุณุชุฎุฏุงูู ูุนูููุง ุนูู ุงูุฅุทูุงู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูููููุง ุจูุงุก ููุฑุณ ุฌุฒุฆู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> t(c) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> c; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> t;</code> </pre><br>  ูุชู ุชูููู ุญุฌู ุงูููุฑุณ ุฅูู 5 ุตูุญุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> relpages <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_class <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> relname=<span class="hljs-string"><span class="hljs-string">'t_c_idx1'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> relpages ---------- 5 (1 row)</code> </pre><br>  ูู ุจุนุถ ุงูุฃุญูุงู ูุฏ ูููู ุงููุฑู ูู ุงูุญุฌู ูุงูุฃุฏุงุก ูุจูุฑูุง ุฌุฏูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุฑุฒ </h3><br>  ุฅุฐุง ูุงูุช ุทุฑููุฉ ุงููุตูู ุชููู ุจุฅุฑุฌุงุน ูุนุฑููุงุช ุงูุตููู ูู ุชุฑุชูุจ ูุนูู ุ ูุฅู ุฐูู ูููุฑ ูููุญุณู ุฎูุงุฑุงุช ุฅุถุงููุฉ ูุชูููุฐ ุงูุงุณุชุนูุงู. <br><br>  ูููููุง ูุณุญ ุงูุฌุฏูู ุซู ูุฑุฒ ุงูุจูุงูุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> enable_indexscan=<span class="hljs-keyword"><span class="hljs-keyword">off</span></span>; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> a;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN --------------------- Sort Sort Key: a -&gt; Seq Scan on t (3 rows)</code> </pre><br>  ูููู ูููููุง ูุฑุงุกุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ุงูููุฑุณ ุจุณูููุฉ ุจุงูุชุฑุชูุจ ุงููุทููุจ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> enable_indexscan=<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> a;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------- Index Scan using t_a_idx on t (1 row)</code> </pre><br>  ููุท "btree" ูู ูู ุทุฑู ุงููุตูู ูููููุง ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงููุตููุฉ ุ ูุฐูู ุฏุนููุง ูุคุฌู ููุงูุดุฉ ุฃูุซุฑ ุชูุตููุงู ุญุชู ุงููุธุฑ ูู ูุฐุง ุงูููุน ูู ุงูููุฑุณ. <br><br><h3 style=";text-align:right;direction:rtl">  ุจูุงุก ูุชุฒุงูู </h3><br>  ููุชุณุจ ุจูุงุก ุงูููุฑุณ ุนุงุฏุฉู ููู SHARE ููุฌุฏูู.  ูุณูุญ ูุฐุง ุงูููู ุจูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุงูุฌุฏูู ุ ููููู ูููุน ุฃู ุชุบููุฑุงุช ุฃุซูุงุก ุฅูุดุงุก ุงูููุฑุณ. <br><br>  ูููููุง ุงูุชุฃูุฏ ูู ุฐูู ุฅุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฃุซูุงุก ุฅูุดุงุก ููุฑุณ ุนูู ุงูุฌุฏูู "t" ุ ูููุง ุจุฅุฌุฑุงุก ุงูุงุณุชุนูุงู ุฃุฏูุงู ูู ุฌูุณุฉ ุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> mode, granted <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_locks <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> relation = <span class="hljs-string"><span class="hljs-string">'t'</span></span>::<span class="hljs-type"><span class="hljs-type">regclass</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> mode | granted -----------+--------- ShareLock | t (1 row)</code> </pre><br>  ุฅุฐุง ูุงู ุงูุฌุฏูู ูุจูุฑูุง ุจุฏุฑุฌุฉ ูุงููุฉ ูุงุณุชุฎุฏู ุนูู ูุทุงู ูุงุณุน ููุฅุฏุฎุงู ุฃู ุงูุชุญุฏูุซ ุฃู ุงูุญุฐู ุ ููุฏ ูุจุฏู ูุฐุง ุบูุฑ ููุจูู ูุธุฑูุง ูุฃู ุนูููุงุช ุงูุชุนุฏูู ุณุชูุชุธุฑ ุฅุตุฏุงุฑ ููู ููุชุฑุฉ ุทูููุฉ. <br><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูููููุง ุงุณุชุฎุฏุงู ุงูุจูุงุก ุงููุชุฒุงูู ููููุฑุณ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">concurrently</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> t(a);</code> </pre><br>  ูููู ูุฐุง ุงูุฃูุฑ ุจุฅุบูุงู ุงูุฌุฏูู ูู ูุถุน SHARE UPDATE EXCLUSIVE ุ ูุงูุฐู ูุณูุญ ุจูู ูู ุงููุฑุงุกุฉ ูุงูุชุญุฏูุซ (ููุญุธุฑ ููุท ุชุบููุฑ ุจููุฉ ุงูุฌุฏูู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฎูุงุก ุงููุชุฒุงูู ุฃู ุงูุชุญููู ุฃู ุฅูุดุงุก ููุฑุณ ุขุฎุฑ ูู ูุฐุง ุงูุฌุฏูู). <br><br>  ููุน ุฐูู ุ ููุงู ุฃูุถุง ุงูุฌุงูุจ ุงูุขุฎุฑ.  ุฃููุงู ุ ุณูุชู ุจูุงุก ุงูููุฑุณ ุจุดูู ุฃุจุทุฃ ูู ุงููุนุชุงุฏ ุ ุญูุซ ูุชู ุงููุฑูุฑ ุนุจุฑ ุงูุฌุฏูู ุจุฏูุงู ูู ูุงุญุฏ ุ ููู ุงูุถุฑูุฑู ุฃูุถูุง ุงูุชุธุงุฑ ุงุณุชููุงู ุงููุนุงููุงุช ุงูููุงุฒูุฉ ุงูุชู ุชุนุฏู ุงูุจูุงูุงุช. <br><br>  ุซุงููุงู ุ ูุน ุงูุจูุงุก ุงููุชุฒุงูู ูููุคุดุฑ ุ ูููู ุฃู ุชุญุฏุซ ุญุงูุฉ ุชููู ุชุงู ุฃู ูููู ุงูุชูุงู ูููุฏ ูุฑูุฏุฉ.  ููุน ุฐูู ุ ุณูุชู ุจูุงุก ุงูููุฑุณ ุ ุนูู ุงูุฑุบู ูู ุนุฏู ุงูุชุดุบูู.  ูุฌุจ ุญุฐู ูุฐุง ุงูููุฑุณ ูุฅุนุงุฏุฉ ุจูุงุฆู.  ูุชู ูุถุน ุนูุงูุฉ ุงูููุงุฑุณ ุบูุฑ ุงูุนุงููุฉ ุจูููุฉ INVALID ูู ุฅุฎุฑุงุฌ ุงูุฃูุฑ psql \ d ุ ููููู ุงูุงุณุชุนูุงู ุฃุฏูุงู ุจุฅุฑุฌุงุน ูุงุฆูุฉ ูุงููุฉ ุจุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> indexrelid::<span class="hljs-type"><span class="hljs-type">regclass</span></span> index_name, indrelid::<span class="hljs-type"><span class="hljs-type">regclass</span></span> <span class="hljs-built_in"><span class="hljs-built_in">table_name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_index <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> indisvalid;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> index_name | table_name ------------+------------ t_a_idx | t (1 row)</code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑุฃ ุนูู</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar441962/">https://habr.com/ru/post/ar441962/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar441946/index.html">REST API ุนูู Laravel ูู 100 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ</a></li>
<li><a href="../ar441950/index.html">Eclipse Che 7 ููุฌูุฏ ุจุงููุนู ููุง</a></li>
<li><a href="../ar441952/index.html">ุงุฎุชูุงุฑ ูุธุงู ุชุฎุฒูู ุงููููุงุช ููุนูู ุงูุฌูุงุนู</a></li>
<li><a href="../ar441954/index.html">ููุงูุฃุฉ ุงููุณุชุฎุฏู ููุคููู ูุจุฑ</a></li>
<li><a href="../ar441956/index.html">ูุนุงูุฌุฉ ุฎุทุฃ ููุญุฏุฉ (ุฎูุงุฑ C ++ ูุฃุฌูุฒุฉ ุงูุชุญูู ุงูุฏูููุฉ)</a></li>
<li><a href="../ar441964/index.html">ูุตุงุฆุญ ูุญูู Kubernetes: ููู ููุงุฑุฏ ุงููุฌููุนุฉ ุฅูู Helm 2</a></li>
<li><a href="../ar441966/index.html">ุงูููุจ ุงูุฃูู ุงุฎุชุจุงุฑ ูุงุชุจ ููุช</a></li>
<li><a href="../ar441968/index.html">ุชุทููุฑ ูุฑุน ููุชุฌ ุฌุฏูุฏ: ููููุฉ ุงูุชุฎูุต ูู ุบูุฑ ุนููู ูุงูุญูุงุธ ุนูู ูุงุฆุฏุฉ</a></li>
<li><a href="../ar441970/index.html">FinFisher Butkit ุชุญููู</a></li>
<li><a href="../ar441972/index.html">ุถุงุฑ - ุจุฏูู ููุชููุจ ุงููุงุฌูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>