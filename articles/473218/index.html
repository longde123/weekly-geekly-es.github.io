<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì• üåâ ‚õΩÔ∏è Entrevista con Ivan Kruglov, desarrollador principal: Service Mesh y herramientas "no est√°ndar" de Booking.com ü•° üîÉ üß°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ivan Kruglov, desarrollador principal de Booking.com, habl√≥ en SlOmer DevOps con el tema SRE y, despu√©s de la charla, acord√≥ hablar sobre Kubernetes, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entrevista con Ivan Kruglov, desarrollador principal: Service Mesh y herramientas "no est√°ndar" de Booking.com</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/473218/"><p>  Ivan Kruglov, desarrollador principal de Booking.com, habl√≥ en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SlOmer DevOps con el tema SRE</a> y, despu√©s de la charla, acord√≥ hablar sobre Kubernetes, Service Mesh, c√≥digo abierto y soluciones no est√°ndar en Booking.com con una taza de caf√©. </p><br><p>  Dado que el tema de SRE result√≥ ser mucho m√°s amplio, Ivan y su colega Ben Tyler, desarrollador principal de Booking.com, acordaron convertirse en oradores de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Slurm SRE, que se realizar√° del 3 al 5 de febrero de 2020</a> .  All√≠ discutir√°n la teor√≠a y la pr√°ctica de aplicar el presupuesto de SLI / SLO / error, realizar an√°lisis post-mortem, eliminaci√≥n efectiva de incidentes de TI, construir sistemas confiables (monitoreo y alerta, degradaci√≥n elegante, inyecci√≥n de fallas, planificaci√≥n de capacidad, prevenci√≥n de fallas en cascada ) </p><br><p>  Y ahora una palabra para Ivan. </p><br><p><img src="https://habrastorage.org/webt/s4/b8/g6/s4b8g6vukq1sw8ajfpegzxpkyr0.jpeg"></p><br><p><a name="habracut"></a>  <em>¬øCu√°l ha sido un desaf√≠o profesional interesante para ti √∫ltimamente?</em> </p><br><p>  En los √∫ltimos dos a√±os he estado haciendo dos cosas.  Primero: haciendo la nube interna de Booking.com.  Est√° construido sobre Kubernetes.  En esta ocasi√≥n, tuve un informe largo y completo sobre Highload. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jeEd8eiMwpY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Tuvimos una forma larga e interesante de c√≥mo construimos nuestra nube.  Este es mi proyecto anterior, que le dej√© a un colega. </p><br><p> Ahora estoy tratando un tema llamado Service Mesh.  Este es, de hecho, un tema candente, como lo fueron Big Data y Kubernetes a la vez. </p><br><p>  La idea es, por un lado, simple, por otro lado, compleja: en una arquitectura de microservicio, toda la interacci√≥n pasa por la red, bueno, es como si fuera una parte integral de los microservicios.  Y la interacci√≥n en s√≠ es una operaci√≥n compleja, muchas cosas pueden salir mal all√≠.  Todo esto necesita ser controlado.  En particular, se imponen restricciones: si tenemos un monolito y funcionan dos funciones, y estas dos funciones podr√≠an confiar entre s√≠, porque son parte del mismo proceso, entonces, en teor√≠a, los microservicios no pueden confiar entre s√≠. </p><br><p>  ¬øC√≥mo sabes de d√≥nde viene la solicitud?  Aqu√≠ hay un microservicio, llega una solicitud HTTP.  ¬øRealmente vino del servicio desde el que pienso?  Y de la misma manera, el servicio que otro servicio requiere.  Necesito estar seguro de que el servicio al que llamo es el que necesito, y no alg√∫n tipo de servicio falso.  En organizaciones peque√±as, esto probablemente no sea tan cierto.  Y en los grandes, cuando tiene miles y decenas de miles de autom√≥viles, no har√° un seguimiento de cada m√°quina.  Y para las grandes empresas este es un problema bastante serio.  Es decir, digamos, todo est√° construido con cero confianza.  Siempre que realice alg√∫n tipo de comunicaci√≥n, debe realizar una verificaci√≥n.  Resulta que a nivel de interacci√≥n de red es necesario autenticar y autorizar la operaci√≥n.  Todos estos son procesos bastante dif√≠ciles en t√©rminos de implementaci√≥n.  Y resulta que Service Mesh asume estas tareas para garantizar una interacci√≥n segura.  Esta es solo una de las caracter√≠sticas que hace Service Mesh.  Hay mucho m√°s: confiabilidad, monitoreo, rastreo y otros. </p><br><p>  <em>¬øY crees que esta tecnolog√≠a es el futuro?</em> </p><br><p>  Service Mesh es una tendencia que est√° creciendo.  Esta es mi opini√≥n personal.  Ya es bastante com√∫n.  Por ejemplo, hay Istio.  Luego, en las nubes, en la misma Amazon√≠a, apareci√≥ Service Mesh.  Creo que todos los principales proveedores pronto tendr√°n o ya tendr√°n una malla de servicio completa. </p><br><p>  <em>Es decir, la misma tecnolog√≠a innovadora que alguna vez fue, ¬øy ahora hay Kubernetes?</em> </p><br><p>  Yo creo que si.  Aunque es interesante notar aqu√≠ que, en mi opini√≥n, ni Kubernetes ni Service Mesh inventan nada nuevo.  Kubernetes tom√≥ una pila de tecnolog√≠a existente y la convirti√≥ en automatizaci√≥n.  Service Mesh hace aproximadamente lo mismo.  Da nuevas herramientas sobre una base existente.  Enviado ha aparecido en Service Mesh, que demostrar√© hoy.  (Tenga en cuenta que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ivan abord√≥ este tema en un discurso en el programa intensivo Slurm DevOps</a> .) La idea es que Service Mesh es un instrumento de nivel superior que le permite organizar las comunicaciones de una gran flota de microservicios.  Explicar√© ... Para iniciar la arquitectura de microservicios, primero necesita el llamado tiempo de ejecuci√≥n: este es el lugar donde se iniciar√° la aplicaci√≥n.  Esto es lo que hace Kubernetes.  Service Mesh lo complementa, en el sentido de que proporciona la interacci√≥n entre estos microservicios que se ejecutar√°n en tiempo de ejecuci√≥n. </p><br><p><img src="https://habrastorage.org/webt/6m/p8/ml/6mp8mlo5asxbik-vjc7adbp_joi.jpeg"></p><br><p>  <em>¬øDesarrollar√°s esta tecnolog√≠a en el futuro cercano?</em> </p><br><p>  Puedo hablar por mi mismo.  Estoy involucrado en infraestructura.  Y en t√©rminos de infraestructura, en los pr√≥ximos a√±os, este ser√° uno de los temas principales: Kubernetes y Service Mesh. </p><br><p>  <em>¬øSe desarrollar√°n en paralelo?</em> </p><br><p>  Ciertamente, porque se complementan entre s√≠.  Kubernetes hace tiempo de ejecuci√≥n.  Service Mesh proporciona interoperabilidad. </p><br><p>  M√°s precisamente, Kubernetes tiene algunos componentes que parecen cubrir aspectos de Service Mesh.  Pero en Kubernetes son demasiado b√°sicos.  Es decir, Kubernetes, en t√©rminos de redes, solo le ofrece redes de bajo nivel.  Quiero decir, los paquetes IP pueden ir del punto A al punto B. Eso es todo.  De acuerdo, hay controladores de Ingress, hay momentos de enrutamiento de nivel superior, es decir, no solo interacci√≥n de red.  Sin embargo, en Kubernetes, por ejemplo, no hay mecanismos integrados para garantizar la fiabilidad de la ejecuci√≥n de consultas.  Un ejemplo tan simple.  En Kubernetes, si el "bajo" (Pod) cae, Kubernetes lo recoger√° por s√≠ mismo.  Por defecto  Este es un mecanismo de reintento.  Pero a nivel de interacci√≥n de red esto no sucede.  Es decir, si el servicio de la p√°gina principal env√≠a una solicitud al servicio de cesta, y por alguna raz√≥n esto no funcion√≥, la solicitud no se volver√° a intentar. </p><br><p>  Service Mesh en este sentido agrega funcionalidad.  Permite, si la solicitud falla, repetirla nuevamente.  Existen otros mecanismos, como la detecci√≥n de valores at√≠picos.  Si, por ejemplo, tenemos una flota de "hogares" que trabajan para el servicio de la "p√°gina principal", y una flota de "hogares" que son un servicio de la "canasta".  Si est√°n separados geogr√°ficamente, entonces pueden aparecer cosas en ellos que una parte de los "hogares" ve una parte de los "hogares" y la otra parte de los "hogares" ve la otra parte de los "hogares".  En consecuencia, en Service Mesh hay mecanismos que le permiten construir din√°micamente una imagen de qui√©n est√° disponible para cualquier persona y cambiar entre ellos, todo esto en tiempo real.  Y si uno de los "hogares" tiene demasiada latencia, b√≥telo.  Todos los que est√°n "debajo" pueden decidir que con este "hogar" mi conversaci√≥n es lenta, todos los dem√°s son normales, y esto lento, porque lo echar√© de mi piscina.  As√≠ es como funciona el mecanismo para detectar anomal√≠as.  Cuando tenemos diez "hogares", nueve "hogares" funcionan sin errores, y el d√©cimo constantemente env√≠a errores.  O nueve "hogares" responden con una latencia de 15 ms, y uno responde con una latencia de 400 ms.  Y Service Mesh decide tirarlo a la basura. </p><br><p>  Service Mesh tambi√©n es bueno para permitirle recopilar estad√≠sticas del lado del cliente.  Es decir, tenemos un cliente y tenemos un servidor.  Por lo general, las estad√≠sticas se recopilan en el lado del servidor.  Bueno, porque es lo m√°s f√°cil.  Queremos utilizar m√©tricas para comprender qu√© tan bien interact√∫a nuestro usuario con nuestro servicio.  En consecuencia, en teor√≠a, debe medir en el lado del cliente y no en el lado del servidor.  Porque hay una gran brecha entre ellos, que est√° llena de interacciones de red. </p><br><p>  Cada componente de toda esta variedad puede fallar. </p><br><p>  Y Service Mesh es bueno porque pone al agente de un lado a otro y env√≠a estad√≠sticas desde dos extremos.  Y pueden surgir situaciones cuando la latencia del lado del servicio es de 20 ms y del lado del cliente 2 segundos.  Por ejemplo, en el lado del servidor, recopilamos estad√≠sticas de un servidor web, pero tenemos el 5% de los paquetes perdidos por alguna raz√≥n.  Como resultado, debido a la retransmisi√≥n en la pila TCP, resulta que nuestro cliente ve latencia en 2 segundos.  Y en el lado del servidor, todav√≠a vemos una latencia excelente: como todo se envi√≥ al b√∫fer, ¬°eso es todo!  Estoy bien, tengo una latencia de 20 ms.  ¬øY c√≥mo es el cliente? </p><br><p><img src="https://habrastorage.org/webt/93/th/cj/93thcj784dze_7t_-soui_g2rie.jpeg"></p><br><p>  <em>¬øY c√≥mo resuelves esto?</em> </p><br><p>  B√°sicamente, esto se resuelve mediante la instrumentaci√≥n del cliente.  En el buen sentido, las estad√≠sticas deben recopilarse lo m√°s cerca posible del cliente.  Pero las herramientas para el cliente no siempre son posibles y no siempre son convenientes. </p><br><p>  <em>¬øCu√°les son las m√©tricas de confiabilidad y disponibilidad de su empresa?</em> </p><br><p>  Todo es, en general, est√°ndar.  Hoy hablar√© sobre eso.  (Nota. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ivan Speech en el tercer d√≠a de Slurm DevOps</a> ) Hay cinco o seis indicadores clave.  Los llamados indicadores de nivel de servicio: latencia, durabilidad, frescura, correcci√≥n ... Cuando me estaba preparando para la presentaci√≥n en el Slurm, trat√© de encontrar casos no est√°ndar en Booking.com, ejemplos interesantes de SLI que no encajaban en este modelo.  Porque, en teor√≠a, la idea clave de SRE se basa en una declaraci√≥n de alto nivel: debemos resaltar una m√©trica o m√©tricas que reflejen la experiencia del usuario.  Y para algunos servicios, la latencia, la durabilidad es adecuada, para otros no.  Y c√≥mo encontrar este punto de equilibrio que refleje la experiencia del usuario: esta es una tarea interesante. </p><br><p>  <em>¬øQu√© soluciones √∫nicas vio en Booking.com cuando vino a trabajar all√≠?</em>  <em>¬øO todo es est√°ndar?</em> </p><br><p>  No  Tenemos muchas cosas que son "no est√°ndar".  Expliquemos por qu√© no es est√°ndar entre comillas.  ¬øDe d√≥nde viene lo no est√°ndar? Lo no est√°ndar a menudo proviene del hecho de que la compa√±√≠a encontr√≥ un problema antes que el mercado, y por lo tanto no existe una soluci√≥n "est√°ndar".  En este sentido, Booking.com, siendo una compa√±√≠a que ha estado operando en el mercado desde 1997 y ha crecido a tal tama√±o, en un momento se enfrent√≥ a una serie de problemas que no se resolvieron. </p><br><p>  Por ejemplo, Google.  Seg√∫n mis observaciones, se parece a esto.  En su interior realizan importantes desarrollos, que se presentan en p√∫blico en cinco o diez a√±os.  Por ejemplo, habl√© con los chicos de Google que parchearon el kernel de Linux.  Entonces tuve ciertos problemas en la pila TCP.  Les digo: ‚ÄúEste es claramente el problema central.  ¬øC√≥mo luchas contra esto?  Dicen: ‚ÄúAh, entonces tenemos un n√∫cleo parcheado.  Aqu√≠ podemos ajustar la configuraci√≥n.  En 2013, lo reparamos.  Y lo estamos implementando en c√≥digo abierto en 2018 ‚Äù. </p><br><p>  Casi lo mismo con Service Mesh.  Tambi√©n est√° integrado en la imagen de la tecnolog√≠a que Google usa internamente.  Pero no lo suben directamente a c√≥digo abierto.  Istio es esencialmente una reimplementaci√≥n de c√≥digo abierto de su sistema interno.  Con Kubernetes tambi√©n.  En mi opini√≥n, esto se debe a que cuando una empresa es pionera, crea soluciones para s√≠ misma.  Porque es m√°s r√°pido, m√°s barato.  El c√≥digo abierto es caro.  Y no importa qui√©n diga que necesita difundirlo, realmente necesita construir una comunidad.  Y para construir una comunidad, debe invertir un gran esfuerzo.  Y solo entonces el regreso ir√° a ti.  Me parece que detr√°s de cualquier "farmacia" seria hay una comercializaci√≥n a√∫n m√°s seria, en la que el dinero se invierte naturalmente. </p><br><p>  ¬øPor qu√© estoy ...? Como dije, al resolver un problema, la empresa hace mucho por s√≠ misma.  Y luego ponerlo en c√≥digo abierto es bastante dif√≠cil.  Necesita recortar la l√≥gica de negocios y un mont√≥n de peque√±os detalles.  Tenemos nuestro propio servicio Service Mesh, nuestro propio sistema de monitoreo.  Y para difundirlo en c√≥digo abierto, necesita ser rehecho.  La publicaci√≥n de c√≥digo abierto tiene sus ventajas ... </p><br><p><img src="https://habrastorage.org/webt/wc/sv/nd/wcsvndpxkrij_grakptmk0mnpmy.jpeg"></p><br><p>  <em>¬øCu√°l, por ejemplo?</em> </p><br><p>  Marca tecnol√≥gica, fidelizaci√≥n, f√°cil incorporaci√≥n.  Son importantes </p><br><p>  <em>No puedes contarlos directamente.</em> </p><br><p>  Si, eso es correcto.  No cuentes directamente.  Esta es una inversi√≥n estrat√©gica a largo plazo.  No estoy a favor o en contra del c√≥digo abierto.  Debe estar equilibrado, evaluando lo que la compa√±√≠a le da a la publicaci√≥n de una tecnolog√≠a en particular.  Balance de estrategia a largo y corto plazo. </p><br><p>  Volviendo a la pregunta, ¬øcu√°nto es est√°ndar y no est√°ndar en Booking.com?  Dir√© esto, no la mayor√≠a no es est√°ndar, sino mucho.  Debido a que est√°bamos resolviendo problemas que todav√≠a eran desconocidos en el mercado, u otras compa√±√≠as solo estaban al comienzo del viaje.  Solo para la empresa es m√°s f√°cil y r√°pido, y m√°s barato resolver problemas por s√≠ mismos. </p><br><p>  <strong>PD</strong> : No es posible cubrir todo el tema de SRE en una presentaci√≥n.  No solo hay herramientas, tambi√©n existe la filosof√≠a del enfoque.  Por lo tanto, destacamos un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Slurm SRE</a> intensivo para este tema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">, que se llevar√° a cabo del 3 al 5 de febrero de 2020</a> .  Los oradores ser√°n Ivan Kruglov, desarrollador principal en Booking.com, su colega Ben Tyler, desarrollador principal en Booking.com, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Eduard Medvedev</a> , CTO en Tungsten Labs, Eugene Varavva, desarrollador de perfil amplio de Google. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473218/">https://habr.com/ru/post/473218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473202/index.html">Probar la localizaci√≥n de juegos m√≥viles para mu√±ecos desde una tetera</a></li>
<li><a href="../473206/index.html">Discusi√≥n: c√≥mo los servicios de transmisi√≥n est√°n cambiando la cultura musical y el enfoque de la composici√≥n</a></li>
<li><a href="../473208/index.html">C√≥mo simplifiqu√© el proceso de trabajar en proyectos de c√≥digo abierto</a></li>
<li><a href="../473210/index.html">Representaci√≥n del lado del servidor para la aplicaci√≥n React en Express.js</a></li>
<li><a href="../473214/index.html">Yaga: cuentos eslavos en el entorno m√≥vil</a></li>
<li><a href="../473220/index.html">Las piedras angulares de la lenta destrucci√≥n del c√≥digo en Wolfram Language: acelerar el c√≥digo decenas, cientos y miles de veces</a></li>
<li><a href="../473222/index.html">Reglas personalizadas de iptables para docker usando zabbix como ejemplo</a></li>
<li><a href="../473224/index.html">Educaci√≥n superior vs competencia. Opini√≥n separada de un juez del Tribunal Constitucional de la Federaci√≥n de Rusia sobre el estado de la educaci√≥n superior</a></li>
<li><a href="../473228/index.html">Poniendo a Perl directamente desde 1987</a></li>
<li><a href="../473230/index.html">¬øEs Internet satelital una nueva carrera espacial?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>