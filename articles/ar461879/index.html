<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ค ๐ ูุชุงุจ "Linux in action" ๐ฅ๏ธ ๐ฉ๐ผโ๐ญ ๐คต</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ุ habrozhiteli! ูู ุงููุชุงุจ ุ ูุตู ุฏูููุฏ ููููุชูู 12 ูุดุฑูุนูุง ูู ุงูุนุงูู ุงูุญูููู ุ ุจูุง ูู ุฐูู ุฃุชูุชุฉ ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุฑุฏุงุฏ ุ ูุฅูุดุงุก ุณุญุงุจุฉ ููู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุชุงุจ "Linux in action"</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/461879/" style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/d4/en/xh/d4enxhes8pqnlk78urqxopa7ley.jpeg" align="left" alt="ุตูุฑุฉ"></a>  ูุฑุญุจุง ุ habrozhiteli!  ูู ุงููุชุงุจ ุ ูุตู ุฏูููุฏ ููููุชูู 12 ูุดุฑูุนูุง ูู ุงูุนุงูู ุงูุญูููู ุ ุจูุง ูู ุฐูู ุฃุชูุชุฉ ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุฑุฏุงุฏ ุ ูุฅูุดุงุก ุณุญุงุจุฉ ูููุงุช ุนูู ููุท Dropbox ุดุฎุตู ุ ูุฅูุดุงุก ุฎุงุฏู MediaWiki ุงูุฎุงุต ุจู.  ูุน ุฃูุซูุฉ ูุซูุฑุฉ ููุงูุชูุงู ุ ุณูู ุชุชุนูู ุนู ุงููุญุงูุงุฉ ุงูุงูุชุฑุงุถูุฉ ุ ูุงูุชุนุงูู ูู ุงูููุงุฑุซ ุ ูุงูุฃูู ุ ูุงููุณุฎ ุงูุงุญุชูุงุทู ุ ููุดุฑ DevOps ุ ูุงุณุชูุดุงู ูุดููุงุช ุงููุธุงู ูุฅุตูุงุญูุง.  ููุชูู ูู ูุตู ุจูุฑุงุฌุนุฉ ุงูุชูุตูุงุช ุงูุนูููุฉ ููุณุฑุฏ ูููุตุทูุญุงุช ุงูุฌุฏูุฏุฉ ูุงูุชูุงุฑูู. <br><br><h3 style=";text-align:right;direction:rtl">  ููุชุทูุงุช "10.1.  ุฅูุดุงุก ููู OpenVPN ยป </h3><br><a name="habracut"></a>  ูู ูุฐุง ุงููุชุงุจ ุ ุชุญุฏุซุช ุจุงููุนู ูุซูุฑูุง ุนู ุงูุชุดููุฑ.  ูููู ูู SSH ู SCP ุญูุงูุฉ ุงูุจูุงูุงุช ุงููุฑุณูุฉ ูู ุฎูุงู ุงูุงุชุตุงูุงุช ุนู ุจูุนุฏ (ุงููุตู 3) ุ ููุณูุญ ูู ุชุดููุฑ ุงููููุงุช ุจุญูุงูุฉ ุงูุจูุงูุงุช ุนูุฏ ุชุฎุฒูููุง ุนูู ุงูุฎุงุฏู (ุงููุตู 8) ุ ููููู ูุดูุงุฏุงุช TLS / SSL ุญูุงูุฉ ุงูุจูุงูุงุช ุฃุซูุงุก ุงูููู ุจูู ุงูููุงูุน ููุชุตูุญุงุช ุงูุนููุงุก (ุงููุตู 9).  ููู ูู ุจุนุถ ุงูุฃุญูุงู ุชุชุทูุจ ุจูุงูุงุชู ุงูุญูุงูุฉ ูู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุงุชุตุงูุงุช.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููููู ุฃู ูุนูู ุจุนุถ ุฃุนุถุงุก ูุฑููู ุนูู ุงูุทุฑูู ุ ููุชุตููู ุจุงูุดุจูุฉ ุนุจุฑ ุดุจูุฉ Wi-Fi ูู ุฎูุงู ููุงุท ุงููุตูู ุงูุนุงูุฉ.  ูู ุงููุคูุฏ ุฃูู ูุง ุชูุชุฑุถ ุฃู ุฌููุน ููุงุท ุงููุตูู ูุฐู ุขููุฉ ุ ูููู ูุญุชุงุฌ ุงูุฃุดุฎุงุต ูุฏูู ุญููุง ุฅูู ูุณููุฉ ููุงุชุตุงู ุจููุงุฑุฏ ุงูุดุฑูุฉ - ููู ูุฐู ุงูุญุงูุฉ ุณุชุณุงุนุฏ VPN. <br><br>  ูููุฑ ููู VPN ุงููุตูู ุจุดูู ุตุญูุญ ุงุชุตุงููุง ูุจุงุดุฑูุง ุจูู ุงูุนููุงุก ุนู ุจูุนุฏ ูุงูุฎุงุฏู ุจุทุฑููุฉ ุชุฎูู ุงูุจูุงูุงุช ุนูุฏ ุฅุฑุณุงููุง ุนุจุฑ ุดุจูุฉ ุบูุฑ ุขููุฉ.  ูุงุฐุง ุจุนุฏุ  ููุฏ ุดุงูุฏุช ุจุงููุนู ุงูุนุฏูุฏ ูู ุงูุฃุฏูุงุช ุงูุชู ูููู ุฃู ุชูุนู ุฐูู ุจุงูุชุดููุฑ.  ุฅู ุงููููุฉ ุงูุญููููุฉ ูุดุจูุงุช VPN ูู ุฃูู ูู ุฎูุงู ูุชุญ ุงูููู ุ ููููู ุชูุตูู ุงูุดุจูุงุช ุงูุจุนูุฏุฉ ุ ููุง ูู ูุงูุช ุฌููุนูุง ูุฌุชูุนุฉ ูุญููุฉ.  ุจูุนูู ูุง ุ ุฃูุช ุชุณุชุฎุฏู ุญูุงู. <br><br>  ุจุงุณุชุฎุฏุงู ูุฐู ุงูุดุจูุฉ ุงูููุณุนุฉ ุ ูููู ูููุณุคูููู ุงูููุงู ุจุนูููู ุนูู ุงูุฎูุงุฏู ุงูุฎุงุตุฉ ุจูู ูู ุฃู ููุงู.  ููู ุงูุฃูู ูู ุฐูู ุ ุฃู ุงูุดุฑูุฉ ุงูุชู ูุฏููุง ููุงุฑุฏ ููุฒุนุฉ ุนุจุฑ ุนุฏุฉ ูุฑูุน ูููู ุฃู ุชุฌุนููุง ูุฑุฆูุฉ ููุฌููุน ููููู ุงููุตูู ุฅูููุง ูุฌููุน ุงููุฌููุนุงุช ุงูุชู ุชุญุชุงุฌ ุฅูููุง ุ ุฃูููุง ูุงูุช (ุงูุดูู 10.1). <br><br>  ุงูููู ููุณู ูุง ูุถูู ุงูุฃูู.  ูููู ูููู ุชุถููู ุฃุญุฏ ูุนุงููุฑ ุงูุชุดููุฑ ูู ุจููุฉ ุงูุดุจูุฉ ุ ููุง ูุฒูุฏ ุจุดูู ูุจูุฑ ูู ูุณุชูู ุงูุฃูุงู.  ุชุณุชุฎุฏู ุงูุฃููุงู ุงูุชู ุชู ุฅูุดุงุคูุง ุจุงุณุชุฎุฏุงู ุญุฒูุฉ OpenVPN ููุชูุญุฉ ุงููุตุฏุฑ ููุณ ุชุดููุฑ TLS / SSL ุงูุฐู ูุฑุฃุชู ุจุงููุนู.  OpenVPN ููุณ ุงูุฎูุงุฑ ุงููุญูุฏ ุงููุชุงุญ ููููู ุ ููููู ุฃุญุฏ ุฃุดูุฑ ุงูุฎูุงุฑุงุช.  ููุนุชูุฏ ุฃูู ุฃุณุฑุน ูุฃูุซุฑ ุฃูุงููุง ุจูููู ูู ุจุฑูุชูููู ุฃููุงู ุงูุทุจูุฉ 2 ุงูุจุฏููุฉ ุงูุฐู ูุณุชุฎุฏู ุชุดููุฑ IPsec. <br><br>  ูู ุชุฑูุฏ ุฃู ูุชูุงุตู ุงูุฌููุน ูู ูุฑููู ุจุฃูุงู ูุน ุจุนุถูู ุงูุจุนุถ ุฃุซูุงุก ุงูุชููู ุฃู ุงูุนูู ูู ูุจุงู ูุฎุชููุฉุ  ููููุงู ุจุฐูู ุ ูุฌุจ ุนููู ุฅูุดุงุก ุฎุงุฏู OpenVPN ููุณูุงุญ ุจูุดุงุฑูุฉ ุงูุชุทุจูู ูุงููุตูู ุฅูู ุจูุฆุฉ ุงูุดุจูุฉ ุงููุญููุฉ ููุฎุงุฏู.  ููู ูุนูู ูุฐุง ุ ูููู ุชุดุบูู ุฌูุงุฒูู ุธุงูุฑููู ุฃู ุญุงููุชูู: ูุงุญุฏุฉ ููุนูู ูุฎุงุฏู / ูุถูู ุ ูุงูุขุฎุฑ ููุนููู.  ุฅูุดุงุก ุดุจูุฉ VPN ููุณ ุนูููุฉ ุณููุฉ ุ ูุฐูู ูุฏ ูุณุชุบุฑู ุงูุฃูุฑ ุจุถุน ุฏูุงุฆู ููุญุตูู ุนูู ุงูุตูุฑุฉ ุงููุจูุฑุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/vg/gc/o1/vggco1j4npzsjj4rqo8r-5bzmz8.png" alt="ุตูุฑุฉ"></div><br><h3 style=";text-align:right;direction:rtl">  10.1.1.  ุชูููู ุฎุงุฏู OpenVPN </h3><br>  ูุจู ุฃู ุชุจุฏุฃ ุ ุณุฃูุฏู ูู ูุตูุญุฉ ูููุฏุฉ.  ุฅุฐุง ููุช ุณุชููู ุจูู ุดูุก ุจููุณู (ูุฃูุตู ุจุดุฏุฉ ูู) ุ ูุฑุจูุง ุชุฌุฏ ุฃูู ุชุนูู ูุน ุนุฏุฉ ููุงูุฐ ุทุฑููุฉ ููุชูุญุฉ ุนูู ุณุทุญ ุงูููุชุจ ุ ูู ูููุง ูุชุตู ุจุฌูุงุฒู.  ููุงู ุฎุทุฑ ูู ููุช ูุง ุณูู ุชุฏุฎู ุงูุฃูุฑ ุงูุฎุทุฃ ูู ุงููุงูุฐุฉ.  ูุชุฌูุจ ุฐูู ุ ููููู ุงุณุชุฎุฏุงู ุฃูุฑ ุงุณู ุงููุถูู ูุชุบููุฑ ุงุณู ุงูุฌูุงุฒ ุงููุนุฑูุถ ูู ุณุทุฑ ุงูุฃูุงูุฑ ุฅูู ุดูุก ุณูุฎุจุฑู ุจูุถูุญ ุฃูู ุฃูุช.  ุจูุฌุฑุฏ ุงูููุงู ุจุฐูู ุ ุณุชุญุชุงุฌ ุฅูู ุงูุฎุฑูุฌ ูู ุงูุฎุงุฏู ูุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู ุญุชู ุชุตุจุญ ุงูุฅุนุฏุงุฏุงุช ุงูุฌุฏูุฏุฉ ูุงูุฐุฉ ุงูููุนูู.  ุฅููู ูุง ูุจุฏู ุนููู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/b8/d9/o9/b8d9o9pzt2-m5-rtirtr46hl1lu.png" alt="ุตูุฑุฉ"></div><br>  ุจุงูุงูุชุฒุงู ุจูุฐุง ุงูููุฌ ูุชุนููู ุงูุฃุณูุงุก ุงูููุงุจูุฉ ููู ุฌูุงุฒ ูู ุงูุฃุฌูุฒุฉ ุงูุชู ุชุนูู ูุนูุง ุ ููููู ุจุณูููุฉ ุชุชุจุน ููุงูู. <br><br><blockquote style=";text-align:right;direction:rtl">  ุจุนุฏ ุงุณุชุฎุฏุงู ุงุณู ุงููุถูู ุ ูุฏ ุชูุงุฌูู ูุฒุนุฌูุง ุบูุฑ ูุงุฏุฑ ุนูู ุญู ุฑุณุงุฆู Host OpenVPN-Server ุนูุฏ ุชุดุบูู ุงูุฃูุงูุฑ ุงูุชุงููุฉ.  ูุฌุจ ุฃู ูุคุฏู ุชุญุฏูุซ ุงูููู / etc / hosts ุจุงุณู ุงููุถูู ุงูุฌุฏูุฏ ุงูููุงุจู ุฅูู ุญู ุงููุดููุฉ. </blockquote><br><h3 style=";text-align:right;direction:rtl">  ุชุญุถูุฑ ุฎุงุฏูู ูู OpenVPN </h3><br>  ูุชุทูุจ ุชุซุจูุช OpenVPN ุนูู ุงูุฎุงุฏู ุงูุฎุงุต ุจู ุนุจูุชูู: openvpn ู easy-rsa (ููุชุญูู ูู ุนูููุฉ ุฅูุดุงุก ููุชุงุญ ุงูุชุดููุฑ).  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูุฌุจ ุนูู ูุณุชุฎุฏูู CentOS ุฃููุงู ุชุซุจูุช ูุณุชูุฏุน ุฅุตุฏุงุฑ epel ุ ููุง ูุนูุช ูู ุงููุตู 2. ูุชุชููู ูู ุงูุชุญูู ูู ุงููุตูู ุฅูู ุชุทุจูู ุงูุฎุงุฏู ุ ููููู ุฃูุถูุง ุชุซุจูุช ุฎุงุฏู ุงูููุจ Apache (apache2 ูู Ubuntu ู httpd ุนูู CentOS). <br><br>  ุฃุซูุงุก ุฅุนุฏุงุฏ ุงูุฎุงุฏู ุ ุฃูุตุญู ุจุชูุดูุท ุฌุฏุงุฑ ุญูุงูุฉ ูุญุธุฑ ุฌููุน ุงูููุงูุฐ ุจุงุณุชุซูุงุก 22 (SSH) ู 1194 (ูููุฐ OpenVPN ุงูุงูุชุฑุงุถู).  ููุถุญ ูุฐุง ุงููุซุงู ููู ุณุชุนูู ufw ุนูู Ubuntu ุ ููููู ูุชุฃูุฏ ูู ุฃูู ูุง ุฒูุช ุชุชุฐูุฑ ุจุฑูุงูุฌ CentOS ูุฌุฏุงุฑ ุงูุญูุงูุฉ ูู ุงููุตู 9: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"># ufw enable # ufw allow <span class="hljs-number"><span class="hljs-number">22</span></span> # ufw allow <span class="hljs-number"><span class="hljs-number">1194</span></span></code> </pre> <br>  ููุณูุงุญ ุจุงูุชูุฌูู ุงูุฏุงุฎูู ุจูู ูุงุฌูุงุช ุงูุดุจูุฉ ุนูู ุงูุฎุงุฏู ุ ูุฌุจ ุฅูุบุงุก ุณุทุฑ ูุงุญุฏ (net.ipv4.ip_forward = 1) ูู ููู /etc/sysctl.conf.  ุณูุชูุญ ูู ุฐูู ุฅุนุงุฏุฉ ุชูุฌูู ุงูุนููุงุก ุนู ุจูุนุฏ ุญุณุจ ุงูุญุงุฌุฉ ุจุนุฏ ุงูุงุชุตุงู.  ูุฌุนู ุงููุนููุฉ ุงูุฌุฏูุฏุฉ ุชุนูู ุ ูู ุจุชุดุบูู sysctl -p: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># nano /etc/sysctl.conf # sysctl -p</code> </pre> <br>  ุงูุขู ุชู ุชููุฆุฉ ุจูุฆุฉ ุงูุฎุงุฏู ุจุงููุงูู ุ ูููู ููุงู ุดูุก ุขุฎุฑ ูุฌุจ ุงูููุงู ุจู ูุจู ุฃู ุชููู ุฌุงูุฒูุง: ุณูููู ุนููู ุฅููุงู ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุณููุธุฑ ูููุง ุจูุฒูุฏ ูู ุงูุชูุงุตูู ุฃุฏูุงู). <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ูุฌููุนุฉ ููุงุชูุญ ุนูู ุงูุฎุงุฏู ูุชุดููุฑ ุงูุจููุฉ ุงูุชุญุชูุฉ ููููุชุงุญ ุงูุนุงู (PKI) ุจุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุงููุตูุฉ ุงูุชู ุชุฃุชู ูุน ุงูุญุฒูุฉ easy-rsa.  ูู ุฌููุฑู ุ ูุนูู ุฎุงุฏู OpenVPN ุฃูุถูุง ูุณูุทุฉ ูุตุงุฏูุฉ ุฎุงุตุฉ ุจู (CA). </li><li style=";text-align:right;direction:rtl">  ุชุญุถูุฑ ุงูููุงุชูุญ ุงูููุงุณุจุฉ ููุนููู </li><li style=";text-align:right;direction:rtl">  ุชูููู ููู server.conf ููุฎุงุฏู </li><li style=";text-align:right;direction:rtl">  ุชูููู ุนููู OpenVPN ุงูุฎุงุต ุจู </li><li style=";text-align:right;direction:rtl">  ุชุญูู ูู VPN ุงูุฎุงุต ุจู </li></ol><br><h3 style=";text-align:right;direction:rtl">  ููุชุงุญ ุงูุชุดููุฑ ุงูุฌูู </h3><br>  ูู ุฃุฌู ุนุฏู ุชุนููุฏ ุญูุงุชู ุ ููููู ุชูููู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ููููุชุงุญ ุนูู ููุณ ุงูุฌูุงุฒ ุงูุฐู ูุนูู ุนููู ุฎุงุฏู OpenVPN.  ููุน ุฐูู ุ ุชูุชุฑุญ ุชูุตูุงุช ุงูุฃูุงู ุนุงุฏุฉู ุงุณุชุฎุฏุงู ุฎุงุฏู CA ูููุตู ูุนูููุงุช ุงููุดุฑ ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ.  ููุถุญ ุงูุดูู ุงูุชุงูู ุนูููุฉ ุชูููู ูุชุฎุตูุต ููุงุฑุฏ ููุชุงุญ ุงูุชุดููุฑ ููุงุณุชุฎุฏุงู ูู OpenVPN.  10.2. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rw/vl/a0/rwvla0o86yzylrzsytcf--7bnms.png" alt="ุตูุฑุฉ"></div><br>  ุนูุฏ ุชุซุจูุช OpenVPN ุ ุชู ุฅูุดุงุก ุงูุฏููู / etc / openvpn / ุชููุงุฆููุง ุ ููู ูุง ููุฌุฏ ุดูุก ููู ุญุชู ุงูุขู.  ุชุฃุชู ุญุฒู openvpn ู easy-rsa ูุน ููุงุฐุฌ ููููุงุช ุงูููุงุฐุฌ ุงูุชู ููููู ุงุณุชุฎุฏุงููุง ูุฃุณุงุณ ููุชูููู ุงูุฎุงุต ุจู.  ูุจุฏุก ุนูููุฉ ุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช ุ ุงูุณุฎ ุฏููู ููุงูุจ easy-rsa ูู / usr / share / ุฅูู / etc / openvpn ูุชุบููุฑ ุฅูู easy-rsa / directory: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># cp -r /usr/share/easy-rsa/ <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>openvpn $ cd /etc/openvpn/easy-rsa</code> </pre> <br>  ุณูุญุชูู ุฏููู easy-rsa ุงูุขู ุนูู ุนุฏุฏ ูููู ูู ุงูุจุฑุงูุฌ ุงููุตูุฉ.  ูู ุงูุฌุฏูู.  10.1 ูุณุฑุฏ ุงูุฃุฏูุงุช ุงูุชู ุณุชุณุชุฎุฏููุง ูุฅูุดุงุก ุงูููุงุชูุญ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ih/zx/zt/ihzxztprk0hm0gr9ozc8sz9qsgs.png" alt="ุตูุฑุฉ"></div><br><blockquote style=";text-align:right;direction:rtl">  ุชุชุทูุจ ูุฐู ุงูุนูููุงุช ุงูุชูุงุฒุงุช ุงูุฌุฐุฑ ุ ูุฐุง ููู ุฎูุงู sudo su ูุฌุจ ุฃู ุชุตุจุญ ุงูุฌุฐุฑ. </blockquote><br>  ูุณูู ุงูููู ุงูุฃูู ุงูุฐู ุณุชุนูู ุจู vars ููุญุชูู ุนูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุชู ูุณุชุฎุฏููุง easy-rsa ุนูุฏ ุฅูุดุงุก ุงูููุงุชูุญ.  ุชุญุชุงุฌ ุฅูู ุชุญุฑูุฑ ุงูููู ูุงุณุชุฎุฏุงู ุงูููู ุงูุฎุงุตุฉ ุจู ุจุฏูุงู ูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุงูููุฌูุฏุฉ ุจุงููุนู.  ูุฐุง ูุง ุณูุจุฏู ุนููู ูููู (ูุงุฆูุฉ 10.1). <br><br>  ุงุฏุฑุงุฌ 10.1.  ุงูุฃุฌุฒุงุก ุงูุฑุฆูุณูุฉ ูู ุงูููู / etc / openvpn / easy-rsa / vars <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_COUNTRY=<span class="hljs-string"><span class="hljs-string">"CA"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_PROVINCE=<span class="hljs-string"><span class="hljs-string">"ON"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_CITY=<span class="hljs-string"><span class="hljs-string">"Toronto"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_ORG=<span class="hljs-string"><span class="hljs-string">"Bootstrap IT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_EMAIL=<span class="hljs-string"><span class="hljs-string">"info@bootstrap-it.com"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> KEY_OU=<span class="hljs-string"><span class="hljs-string">"IT"</span></span></code> </pre> <br>  ูุชูุญ ูู ุชุดุบูู ููู vars ููู ูููู ุฅูู ุจูุฆุฉ shell ุ ุญูุซ ุณูุชู ุชุถููููุง ูู ูุญุชููุงุช ููุงุชูุญู ุงูุฌุฏูุฏุฉ.  ููุงุฐุง ูุง ูุนูู ุงูุฃูุฑ sudo ุจููุฑุฏูุ  ูุฃูู ูู ุงููุฑุญูุฉ ุงูุฃููู ุ ูููู ุจุชุญุฑูุฑ ุงูุจุฑูุงูุฌ ุงููุตู ุงููุณูู vars ุ ุซู ูุทุจูู.  ุงูุชุทุจูู ููุนูู ุฃู ููู vars ูููู ูููู ุฅูู ุจูุฆุฉ shell ุ ุญูุซ ุณูุชู ุชุถููููุง ูู ูุญุชููุงุช ููุงุชูุญู ุงูุฌุฏูุฏุฉ. <br><br>  ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูููู ุจุงุณุชุฎุฏุงู shell ุงูุฌุฏูุฏ ูุฅููุงู ุงูุนูููุฉ ุบูุฑ ุงูููุชููุฉ.  ุนูุฏ ุงูููุงู ุจุฐูู ุ ุณูุทุงูุจู ุงูุจุฑูุงูุฌ ุงููุตู ุจุชุดุบูู ุจุฑูุงูุฌ ูุตู ุขุฎุฑ ุ ูุธูู ุ ูุฅุฒุงูุฉ ุฃู ูุญุชูู ูู ุงูุฏููู / etc / openvpn / easy-rsa / keys: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/2v/b4/ot/2vb4otncxyedhork8j0cs29s_64.png" alt="ุตูุฑุฉ"></div><br>  ุจุทุจูุนุฉ ุงูุญุงู ุ ูุฅู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู clean-all ุ ูุชุจูุนูุง ุจู build-ca ุ ูุงูุฐู ูุณุชุฎุฏู ุงูุจุฑูุงูุฌ ุงููุตู pkitool ูุฅูุดุงุก ุดูุงุฏุฉ ุงูุฌุฐุฑ.  ุณููุทูุจ ููู ุชุฃููุฏ ุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ ุงูุชู ุชููุฑูุง vars: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># ./clean-all # ./build-ca Generating a <span class="hljs-number"><span class="hljs-number">2048</span></span> bit RSA private key</code> </pre> <br>  ุงูุชุงูู ูุฃุชู ุงูุจุฑูุงูุฌ ุงููุตู ุจูุงุก ููุชุงุญ ุงูุฎุงุฏู.  ูุธุฑูุง ูุฃูู ูุณุชุฎุฏู ููุณ ุงูุจุฑูุงูุฌ ุงููุตู pkitool ูุน ุดูุงุฏุฉ ุงูุฌุฐุฑ ุงูุฌุฏูุฏุฉ ุ ูุณุชุฑู ููุณ ุงูุฃุณุฆูุฉ ูุชุฃููุฏ ุฅูุดุงุก ุฒูุฌ ุงูููุงุชูุญ.  ุณูุชู ุฅุนุทุงุก ุงูุฃุณูุงุก ุจูุงุกู ุนูู ุงููุณุงุฆุท ุงูุชู ุชูุฑ ุจูุง ุ ูุงูุชู ุนุงุฏุฉู ูุง ุชููู ุฎุงุฏููุง ุ ุฅูุง ูู ุงููุซุงู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># ./build-key-server server [...] Certificate is to be certified until Aug <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">2027</span></span> GMT (<span class="hljs-number"><span class="hljs-number">3650</span></span> days) Sign the certificate? [y/n]:y <span class="hljs-number"><span class="hljs-number">1</span></span> out <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> certificate requests certified, commit? [y/n]y Write out database <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> entries Data Base Updated</code> </pre> <br>  ูุณุชุฎุฏู OpenVPN ุงููุนููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุฎูุงุฑุฒููุฉ Diffie-Hellman (ุจุงุณุชุฎุฏุงู build-dh) ููุชูุงูุถ ุนูู ุงููุตุงุฏูุฉ ููุงุชุตุงูุงุช ุงูุฌุฏูุฏุฉ.  ูุง ููุจุบู ุฃู ูููู ุงูููู ุงูุฐู ุชู ุฅูุดุงุคู ููุง ุณุฑููุง ุ ูููู ูุฌุจ ุฅูุดุงุคู ุจุงุณุชุฎุฏุงู ุงูุจุฑูุงูุฌ ุงููุตู ููุจูุงุก dh ูููุงุชูุญ RSA ุงููุดุทุฉ ุญุงูููุง.  ุฅุฐุง ููุช ุจุฅูุดุงุก ููุงุชูุญ RSA ุฌุฏูุฏุฉ ูู ุงููุณุชูุจู ุ ูุณุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุชุญุฏูุซ ุงูููู ุงุณุชูุงุฏูุง ุฅูู ุฎูุงุฑุฒููุฉ Diffie-Hellman: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># ./build-dh</code> </pre> <br>  ุณุชููู ููุงุชูุญ ุฌุงูุจ ุงูุฎุงุฏู ุงูุขู ููุฌูุฏุฉ ูู ุงูุฏููู / etc / openvpn / easy-rsa / keys / ุ ููู OpenVPN ูุง ูุนุฑู ุฐูู.  ุจุดูู ุงูุชุฑุงุถู ุ ุณูุจุญุซ OpenVPN ุนู ุงูููุงุชูุญ ุงูููุฌูุฏุฉ ูู / etc / openvpn / ุ ูุฐูู ุงูุณุฎูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># cp /etc/openvpn/easy-rsa/keys/server* <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>openvpn # cp /etc/openvpn/easy-rsa/keys/dh2048.pem /etc/openvpn # cp /etc/openvpn/easy-rsa/keys/ca.crt /etc/openvpn</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ููุงุชูุญ ุชุดููุฑ ุงูุนููู </h3><br>  ููุง ุฑุฃูุช ุจุงููุนู ุ ูุณุชุฎุฏู ุชุดููุฑ TLS ุฃุฒูุงุฌ ูู ุงูููุงุชูุญ ุงูููุงุจูุฉ: ุฃุญุฏููุง ูุซุจุช ุนูู ุงูุฎุงุฏู ูุงูุขุฎุฑ ุนูู ุงูุนููู ุงูุจุนูุฏ.  ูุฐุง ูุนูู ุฃูู ุณุชุญุชุงุฌ ุฅูู ููุงุชูุญ ุงูุนููู.  ุตุฏูููุง ุงููุฏูู pkitool ูู ุจุงูุถุจุท ูุง ุชุญุชุงุฌู ููุฐุง ุงูุบุฑุถ.  ูู ูุฐุง ุงููุซุงู ุ ูู ุฎูุงู ุชุดุบูู ุงูุจุฑูุงูุฌ ูู ุงูุฏููู / etc / openvpn / easy-rsa / ุ ููุฑุฑ ูุณูุทุฉ ุงูุนููู ุฅููู ูุฅูุดุงุก ูููุงุช ุชุณูู client.crt ู client.key: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># ./pkitool client</code> </pre> <br>  ูุฌุจ ุงูุขู ููู ุงูููููู ุงูุนููููู ุ ุฅูู ุฌุงูุจ ููู ca.crt ุงูุฃุตูู ุ ูุงูุฐู ูุง ูุฒุงู ููุฌูุฏูุง ูู ุงูููุงุชูุญ / ุงูุฏููู ุ ุจุฃูุงู ุฅูู ุนูููู.  ูุธุฑูุง ูุงูุชูุงุฆูู ูุญููู ุงููุตูู ุงูุฎุงุตุฉ ุจูู ุ ููุฏ ูุง ูููู ุฐูู ุณููุงู.  ุฃุณูู ุทุฑููุฉ ูู ูุณุฎ ูุญุชููุงุช ุงูููู ุงููุตุฏุฑ ูุฏูููุง (ูููุณ ูุฐุง ุงููุญุชูู) ุฅูู ุงููุญุทุฉ ุงูุทุฑููุฉ ุงูุชู ุชุนูู ุนูู ุณุทุญ ููุชุจ ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู (ุญุฏุฏ ุงููุต ุ ูุงููุฑ ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ูููู ุ ูุญุฏุฏ ูุณุฎ ูู ุงููุงุฆูุฉ).  ุซู ุงูุตููุง ูู ููู ุฌุฏูุฏ ูุญูู ููุณ ุงูุงุณู ุงูุฐู ุชูุดุฆู ูู ุงููุญุทุฉ ุงูุซุงููุฉ ุงููุชุตูุฉ ุจุนูููู. <br><br>  ูููู ูููู ูุฃู ุดุฎุต ูุทุน ููุตู.  ุจุฏูุงู ูู ุฐูู ุ ููุฑ ููุณุคูู ุ ูุฃูู ูู ุชุชููู ุฏุงุฆููุง ูู ุงููุตูู ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุ ุญูุซ ูููู ุฅุฌุฑุงุก ุนูููุฉ ูุต / ูุตู.  ุงูุณุฎ ุงููููุงุช ุฅูู ุงูุฏููู ุงูุฑุฆูุณู ูููุณุชุฎุฏู ุงูุฎุงุต ุจู (ุญุชู ุชุชููู ุนูููุฉ scp ุนู ุจูุนุฏ ูู ุงููุตูู ุฅูููุง) ุ ุซู ุงุณุชุฎุฏู chown ูุชุบููุฑ ูุงูู ุงููููุงุช ูู ุงูุฌุฐุฑ ุฅูู ูุณุชุฎุฏู ุบูุฑ ุฑูุชููู ููุชุธู ุญุชู ูููู ุชูููุฐ ุฅุฌุฑุงุก scp ุงูุจุนูุฏ.  ุชุฃูุฏ ูู ุฃู ุฌููุน ูููุงุชู ูุซุจุชุฉ ุญุงูููุง ููููู ุงููุตูู ุฅูููุง.  ุณุชููููู ุฅูู ุงูุนููู ูุงุญููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># cp /etc/openvpn/easy-rsa/keys/client.key /home/ubuntu/ # cp /etc/openvpn/easy-rsa/keys/ca.crt /home/ubuntu/ # cp /etc/openvpn/easy-rsa/keys/client.crt /home/ubuntu/ # chown ubuntu:ubuntu /home/ubuntu/client.key # chown ubuntu:ubuntu /home/ubuntu/client.crt # chown ubuntu:ubuntu /home/ubuntu/ca.crt</code> </pre> <br>  ูุน ูุฌูุฏ ูุฌููุนุฉ ูุงููุฉ ูู ููุงุชูุญ ุงูุชุดููุฑ ุฌุงูุฒุฉ ููุนูู ุ ููุฒูู ุฅุฎุจุงุฑ ุงูุฎุงุฏู ุจุงูุทุฑููุฉ ุงูุชู ุชุฑูุฏ ุฅูุดุงุก VPN ุจูุง.  ูุชู ุฐูู ุจุงุณุชุฎุฏุงู ููู server.conf. <br><br><blockquote style=";text-align:right;direction:rtl">  <b>ุชูููู ุนุฏุฏ ุถุฑุจุงุช ุงูููุงุชูุญ</b> <br><br>  ุงููุซูุฑ ููุทุจุงุนุฉุ  ุณูุณุงุนุฏ ุงูุงูุชุฏุงุฏ ุฐู ุงูุฃููุงุณ ุนูู ุชูููู ูุฐู ุงูุฃูุงูุฑ ุงูุณุชุฉ ุฅูู ุงุซููู.  ุฃูุง ูุชุฃูุฏ ูู ุฃูู ููููู ุฏุฑุงุณุฉ ูุฐูู ุงููุซุงููู ูููู ูุง ูุญุฏุซ.  ูุงูุฃูู ูู ุฐูู ุ ููููู ููู ููููุฉ ุชุทุจูู ูุฐู ุงููุจุงุฏุฆ ุนูู ุงูุนูููุงุช ุงูุชู ุชุดูู ุงูุนุดุฑุงุช ุฃู ุญุชู ุงููุฆุงุช ูู ุงูุนูุงุตุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># cp /etc/openvpn/easy-rsa/keys/{ca.crt,client.{key,crt}} /home/ubuntu/ # chown ubuntu:ubuntu /home/ubuntu/{ca.crt,client.{key,crt}}</code> </pre> <br></blockquote><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ููู server.conf </h3><br>  ููู ููููู ูุนุฑูุฉ ุดูู ููู server.confุ  ูู ุชุชุฐูุฑ ูุงูุจ ุฏููู easy-rsa ุงูุฐู ูุณุฎุชู ูู / usr / share /ุ  ุฃุซูุงุก ุชุซุจูุช OpenVPN ุ ุจูู ููู ูุงูุจ ุงูุชูููู ูุถุบูุทูุง ุ ูุงูุฐู ููููู ูุณุฎู ุฅูู / etc / openvpn /.  ุณุฃุจูู ุนูู ุญูููุฉ ุฃูู ุชู ุฃุฑุดูุฉ ุงููุงูุจ ูุฃุนุฑุถู ุนูู ุฃุฏุงุฉ ูููุฏุฉ: zcat. <br><br>  ุฃูุช ุชุนุฑู ุจุงููุนู ุนุฑุถ ูุญุชููุงุช ุงููุต ูููู ุจุงุณุชุฎุฏุงู ุฃูุฑ cat ุ ูููู ูุงุฐุง ูู ูุงู ุงูููู ูุถุบูุทูุง ุจุงุณุชุฎุฏุงู gzipุ  ููููู ุฏุงุฆููุง ูู ุถุบุท ุงูููู ุ ููู ุซู ุณุชููู Cat ุจุนุฑุถู ุจูู ุณุฑูุฑ ุ ูููู ูุฐู ุฎุทูุฉ ุฃู ุฎุทูุชูู ุฃูุซุฑ ูู ุงููุงุฒู.  ุจุฏูุงู ูู ุฐูู ุ ููุง ุชุฎููููุง ุจุงููุนู ุ ููููู ุฅุฏุฎุงู ุงูุฃูุฑ zcat ูุชุญููู ุงููุต ุงูุฐู ุชู ูู ุญุฒูู ูู ุงูุฐุงูุฑุฉ ูู ุฎุทูุฉ ูุงุญุฏุฉ.  ูู ุงููุซุงู ุงูุชุงูู ุ ุจุฏูุงู ูู ุทุจุงุนุฉ ุงููุต ุนูู ุงูุดุงุดุฉ ุ ููููู ุฅุนุงุฏุฉ ุชูุฌููู ุฅูู ููู ุฌุฏูุฏ ูุณูู server.conf: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># zcat \ /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz \ &gt; <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>openvpn/server.conf $ cd /etc/openvpn</code> </pre> <br>  ูุชุฑู ุฌุงูุจุง ุงููุซุงุฆู ุงูุดุงููุฉ ูุงููููุฏุฉ ุงูุชู ุชุฃุชู ูุน ุงูููู ููุฑู ููู ูุฏ ุชุจุฏู ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุชุญุฑูุฑ.  ูุงุญุธ ุฃู ุงููุงุตูุฉ ุงูููููุทุฉ (ุ) ุชุฎุจุฑ OpenVPN ุจุนุฏู ูุฑุงุกุฉ ุฃู ุชูููุฐ ุงูุณุทุฑ ุงูุชุงูู (ุฅุฏุฎุงู 10.2). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ft/en/4r/ften4rayxj99stxecmfjb9mx8eg.png" alt="ุตูุฑุฉ"></div><br>  ุฏุนูุง ูุฐูุจ ูู ุฎูุงู ุจุนุถ ูุฐู ุงูุฅุนุฏุงุฏุงุช. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุดูู ุงูุชุฑุงุถู ุ ูุนูู OpenVPN ุนุจุฑ ุงููููุฐ 1194. ููููู ุชุบููุฑ ูุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฅุฎูุงุก ุฃูุนุงูู ุฃูุซุฑ ุฃู ูุชุฌูุจ ุงูุชุนุงุฑุถ ูุน ุงูุฃููุงู ุงููุดุทุฉ ุงูุฃุฎุฑู.  ุจูุง ุฃู 1194 ูุชุทูุจ ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุชูุณูู ูุน ุงูุนููุงุก ุ ููู ุงูุฃูุถู ุงูููุงู ุจุฐูู. </li><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู OpenVPN ุฅูุง ุจุฑูุชูููู ุงูุชุญูู ูู ุงูุฅุฑุณุงู (TCP) ุฃู ุจุฑูุชูููู ูุฎุทุท ุจูุงูุงุช ุงููุณุชุฎุฏู (UDP) ูููู ุงูุจูุงูุงุช.  ูุฏ ูููู TCP ุฃุจุทุฃ ููููุงู ุ ูููู ุฃูุซุฑ ููุซูููุฉ ูุฃูุซุฑ ุงุญุชูุงููุง ูููู ุงูุชุทุจููุงุช ุงูุชู ุชุนูู ุนูู ุทุฑูู ุงูููู. </li><li style=";text-align:right;direction:rtl">  ููููู ูุนุฑูุฉ dev tun ุนูุฏูุง ุชุฑุบุจ ูู ุฅูุดุงุก ููู IP ุฃุจุณุท ูุฃูุซุฑ ููุงุกุฉ ูููู ูุญุชููุงุช ุงูุจูุงูุงุช ููุง ุดูุก ุฃูุซุฑ ูู ุฐูู.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชูุตูู ุงูุนุฏูุฏ ูู ูุงุฌูุงุช ุงูุดุจูุฉ (ูุงูุดุจูุงุช ุงูุชู ุชูุซููุง) ูู ุฎูุงู ุฅูุดุงุก ุฌุณุฑ Ethernet ุ ูุณูุชุนูู ุนููู ุชุญุฏูุฏ dev dev.  ุฅุฐุง ูู ุชููู ูุง ูุนููู ูู ูุฐุง ุ ูุงุณุชุฎุฏู ูุณูุทุฉ tun. </li><li style=";text-align:right;direction:rtl">  ุชูุฑูุฑ ุงูุฃุณุทุฑ ุงูุฃุฑุจุนุฉ ุงูุชุงููุฉ ุฃุณูุงุก OpenVPN ููููุงุช ุงููุตุงุฏูุฉ ุงูุซูุงุซุฉ ุนูู ุงูุฎุงุฏู ูููู ุฅุนุฏุงุฏุงุช dh2048 ุงูุฐู ููุช ุจุฅูุดุงุฆู ูุณุจููุง. </li><li style=";text-align:right;direction:rtl">  ูุนูู ุณุทุฑ ุงูุฎุงุฏู ุงููุทุงู ูููุงุน ุงูุดุจูุฉ ุงููุฑุนูุฉ ุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ูุชุนููู ุนูุงููู IP ููุนููุงุก ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู. </li><li style=";text-align:right;direction:rtl">  ุชุณูุญ ูุนููุฉ ุงูุฏูุน ุงูุงุฎุชูุงุฑูุฉ "route 10.0.3.0 255.255.255.0" ููุนููุงุก ุนู ุจูุนุฏ ุจุงููุตูู ุฅูู ุงูุดุจูุงุช ุงููุฑุนูุฉ ุงูุฎุงุตุฉ ุจุงูุฎุงุฏู.  ูุชูููุฐ ูุฐุง ุงูุนูู ุ ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุชูููู ุงูุดุจูุฉ ุนูู ุงูุฎุงุฏู ููุณู ุ ุจุญูุซ ุชุนุฑู ุงูุดุจูุฉ ุงููุฑุนูุฉ ุงูุฎุงุตุฉ ุญูู ุงูุดุจูุฉ ุงููุฑุนูุฉ OpenVPN (10.8.0.0). </li><li style=";text-align:right;direction:rtl">  ูุณูุญ ูู ุฎุท localhost 80 ุงูุฎุงุต ุจูุดุงุฑูุฉ ุงููููุฐ ุจุฅุนุงุฏุฉ ุชูุฌูู ุญุฑูุฉ ูุฑูุฑ ุงูุนููู ุงููุงุฏูุฉ ุนุจุฑ ุงููููุฐ 1194 ุฅูู ุฎุงุฏู ุงูููุจ ุงููุญูู ุงูุฐู ูุณุชูุน ุฅูู ุงููููุฐ 80. (ุณูููู ูุฐุง ูููุฏูุง ุฅุฐุง ููุช ุชููู ุงุณุชุฎุฏุงู ุฎุงุฏู ุงูููุจ ูุงุฎุชุจุงุฑ VPN ุงูุฎุงุต ุจู.) ูุนูู ูุฐุง ููุท ุฅุฐุง ุนูุฏูุง ูุชู ุชุญุฏูุฏ ุจุฑูุชูููู TCP. </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃูุง ูููู ุงููุณุชุฎุฏู ูุฎุทูุท ูุฌููุนุฉ nogroup ูุดุทุฉ - ููููุงู ุจุฐูู ุ ุงุญุฐู ุงูููุงุตู ุงูููููุทุฉ (ุ).  ุฅู ุฅุฌุจุงุฑ ุงูุนููุงุก ุนู ุจูุนุฏ ุนูู ุงูุนูู ุชุญุช ุฃู ุดุฎุต ู nogroup ูุถูู ุฃู ุฌูุณุงุช ุงูุนูู ุนูู ุงูุฎุงุฏู ุบูุฑ ูุญุตูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ูุดูุฑ ุงูุณุฌู ุฅูู ุฃู ุฅุฏุฎุงูุงุช ุงูุณุฌู ุงูุญุงููุฉ ุณุชุณุชุจุฏู ุงูุฅุฏุฎุงูุงุช ุงููุฏููุฉ ูู ูู ูุฑุฉ ูุจุฏุฃ ูููุง OpenVPN ุ ุจูููุง ูุถูู ุงูุณุฌู ุงูููุญู ุฅุฏุฎุงูุงุช ุฌุฏูุฏุฉ ุฅูู ููู ุณุฌู ููุฌูุฏ.  ุชุชู ูุชุงุจุฉ ููู openvpn.log ููุณู ุฅูู / etc / openvpn / directory. </li></ul><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุบุงูุจูุง ูุง ุชุชู ุฅุถุงูุฉ ูููุฉ ุงูุนููู ุฅูู ุงูุนููู ุฅูู ููู ุงูุชูููู ุญุชู ูุชููู ุงูุนุฏูุฏ ูู ุงูุนููุงุก ูู ุฑุคูุฉ ุจุนุถูู ุงูุจุนุถ ุจุงูุฅุถุงูุฉ ุฅูู ุฎุงุฏู OpenVPN.  ุฅุฐุง ููุช ุฑุงุถููุง ุนู ุงูุชูููู ุงูุฎุงุต ุจู ุ ูููููู ุจุฏุก ุชุดุบูู ุฎุงุฏู OpenVPN: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># systemctl start openvpn</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ูุธุฑูุง ููุทุจูุนุฉ ุงููุชุบูุฑุฉ ููุนูุงูุฉ ุจูู OpenVPN ู systemd ุ ูุฏ ููุฒู ุจูุงุก ุงูุฌููุฉ ุงูุชุงูู ูู ุจุนุถ ุงูุฃุญูุงู ุจุฏุก ุชุดุบูู ุฎุฏูุฉ: systemctl start openvpn @ server. </blockquote><br>  ุชุดุบูู ip addr ูุนุฑุถ ูุงุฆูุฉ ูุงุฌูุงุช ุดุจูุฉ ุงูุฎุงุฏู ุงูุฎุงุต ุจู ูุฌุจ ุงูุขู ุนุฑุถ ุฑุงุจุท ุฅูู ูุงุฌูุฉ ุฌุฏูุฏุฉ ุจุงุณู tun0.  ุณูููู OpenVPN ุจุฅูุดุงุฆู ูุฎุฏูุฉ ุงูุนููุงุก ุงููุงุฏููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ ip addr [...] <span class="hljs-number"><span class="hljs-number">4</span></span>: tun0: mtu <span class="hljs-number"><span class="hljs-number">1500</span></span> qdisc [...] link/none inet <span class="hljs-number"><span class="hljs-number">10.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> peer <span class="hljs-number"><span class="hljs-number">10.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> scope global tun0 valid_lft forever preferred_lft forever</code> </pre> <br>  ูุฏ ุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ูุจู ุฃู ูุจุฏุฃ ูู ุดูุก ุจุงูุนูู ุจุดูู ูุงูู.  ุงููุญุทุฉ ุงูุชุงููุฉ ูู ุงูููุจููุชุฑ ุงูุนููู. <br><br><h3 style=";text-align:right;direction:rtl">  10.1.2.  OpenVPN Client Configuration </h3><br>  ุชูููุฏูุง ุ ูุชู ุจูุงุก ุงูุฃููุงู ูุน ุงุซููู ุนูู ุงูุฃูู ูู ุงููุฎุงุฑุฌ (ูุฅูุง ูุฅููุง ูุณูููุง ุงููููู).  ูููู OpenVPN ุงูุฐู ุชู ุชููููู ุจุดูู ุตุญูุญ ุนูู ุงูุฎุงุฏู ุจุชูุฌูู ุญุฑูุฉ ุงููุฑูุฑ ูู ูุฅูู ุงูููู ูู ุฌูุฉ.  ูููู ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ููุน ูู ุงูุจุฑุงูุฌ ูู ุฌุงูุจ ุงูุนููู ุ ุฃู ุนูู ุงูุทุฑู ุงูุขุฎุฑ ูู ุงูููู. <br><br>  ูู ูุฐุง ุงููุณู ุ ุณุฃุฑูุฒ ุนูู ุฅุนุฏุงุฏ ููุจููุชุฑ Linux ูุฏูููุง ูู ููุน ุฃู ุขุฎุฑ ููุนูู ูุนููู OpenVPN.  ููู ูุฐู ููุณุช ุงูุทุฑููุฉ ุงููุญูุฏุฉ ุงููุชุงุญุฉ ููุฐู ุงููุฑุตุฉ.  ูุฏุนู OpenVPN ุชุทุจููุงุช ุงูุนููุงุก ุงูุชู ูููู ุชุซุจูุชูุง ูุงุณุชุฎุฏุงููุง ุนูู ุฃุฌูุฒุฉ ููุจููุชุฑ ุณุทุญ ุงูููุชุจ ูุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงููุญูููุฉ ุงูุชู ุชุนูู ุจูุธุงู Windows ุฃู macOS ุ ููุฐูู ุนูู ุงูููุงุชู ุงูุฐููุฉ ูุงูุฃุฌูุฒุฉ ุงูููุญูุฉ ุงููุงุฆูุฉ ุนูู Android ู iOS.  ุงูุธุฑ openvpn.net ููุญุตูู ุนูู ุงูุชูุงุตูู. <br><br>  ูุฌุจ ุชุซุจูุช ุญุฒูุฉ OpenVPN ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุนููู ุ ุญูุซ ุชู ุชุซุจูุชูุง ุนูู ุงูุฎุงุฏู ุ ุนูู ุงูุฑุบู ูู ุนุฏู ูุฌูุฏ ุญุงุฌุฉ ุฅูู ุงูุฃูุฑ ุงูุณูู ุ ุญูุซ ุฅู ุงูููุงุชูุญ ุงูุชู ุชุณุชุฎุฏููุง ููุฌูุฏุฉ ุจุงููุนู.  ุชุญุชุงุฌ ุฅูู ูุณุฎ ููู ุงููุงูุจ client.conf ุฅูู ุงูุฏููู / etc / openvpn / ุงูุฐู ุฃูุดุฃุชู ููุชู.  ูุฐู ุงููุฑุฉ ูู ูุชู ุฃุฑุดูุฉ ุงูููู ุ ูุจุงูุชุงูู ูุฅู ุงูุฃูุฑ cp ุงูุนุงุฏู ุณูู ูููู ุจูุฐู ุงููููุฉ ุชูุงููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># apt install openvpn # cp /usr/share/doc/openvpn/examples/sample-config-files/client.conf \ /etc/openvpn/</code> </pre> <br>  ุณุชููู ูุนุธู ุงูุฅุนุฏุงุฏุงุช ูู ููู client.conf ูุงุถุญุฉ ุฅูู ุญุฏ ูุง: ูุฌุจ ุฃู ุชุชุทุงุจู ูุน ุงูููู ุงูููุฌูุฏุฉ ุนูู ุงูุฎุงุฏู.  ููุง ุชุฑูู ูู ูุซุงู ุงูููู ุงูุชุงูู ุ ุงููุนููุฉ ุงููุฑูุฏุฉ ูู 192.168.1.23 1194 ุนู ุจุนุฏ ุ ูุงูุชู ุชุฎุจุฑ ุงูุนููู ุจุนููุงู IP ุงูุฎุงุต ุจุงูุฎุงุฏู.  ูุฑุฉ ุฃุฎุฑู ุ ุชุฃูุฏ ูู ุฃู ูุฐุง ูู ุนููุงู ุฎุงุฏูู.  ูุฌุจ ุฃูุถูุง ุฅุฌุจุงุฑ ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุนููู ุนูู ูุตุงุฏูุฉ ุดูุงุฏุฉ ุงูุฎุงุฏู ูููุน ุญุฏูุซ ูุฌูู ูู ุงููุณุท.  ุทุฑููุฉ ูุงุญุฏุฉ ููููุงู ุจุฐูู ูู ุฅุถุงูุฉ ุฎุงุฏู ุณุทุฑ ุจุนูุฏ ุนู ุจุนุฏ - ุณูุฑุชุณ (ุณุฑุฏ 10.3). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/m1/nw/2w/m1nw2wwrhwag7fct4mr4ggng5n4.png" alt="ุตูุฑุฉ"></div><br>  ููููู ุงูุขู ุงูุงูุชูุงู ุฅูู / etc / openvpn / directory ูุงุณุชุฎุฑุงุฌ ููุงุชูุญ ุงูุดูุงุฏุงุช ูู ุงูุฎุงุฏู.  ุงุณุชุจุฏู ุนููุงู IP ุงูุฎุงุต ุจุงูุฎุงุฏู ุฃู ุงุณู ุงููุฌุงู ูู ุงููุซุงู ุจูููู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ng/u1/rm/ngu1rmk8tyxrntuepummte1wxuo.png" alt="ุตูุฑุฉ"></div><br>  ูู ุบูุฑ ุงููุญุชูู ุญุฏูุซ ุดูุก ูุซูุฑ ุญุชู ุชููู ุจุชุดุบูู OpenVPN ุนูู ุงูุนููู.  ูุธุฑูุง ูุฃูู ุชุญุชุงุฌ ุฅูู ุชูุฑูุฑ ูุณูุทุงุช ุ ูุณุชููู ุจุฐูู ูู ุณุทุฑ ุงูุฃูุงูุฑ.  ุชุฎุจุฑ ูุณูุทุฉ - tls - ุงูุนููู OpenVPN ุฃูู ุณุชุนูู ูุนููู ูุชุชุตู ุจุงุณุชุฎุฏุงู ุชุดููุฑ TLS ุ - ุชุดูุฑ ููุงุท ุงูุชูููู ุฅูู ููู ุงูุชูููู ุงูุฎุงุต ุจู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># openvpn --tls-client --config /etc/openvpn/client.conf</code> </pre> <br>  ุงูุฑุฃ ุฅุฎุฑุงุฌ ุงูุฃูุฑ ุจุนูุงูุฉ ููุชุฃูุฏ ูู ุฃูู ูุชุตู ุจุดูู ุตุญูุญ.  ุฅุฐุง ุญุฏุซ ุฎุทุฃ ูุง ูุฃูู ูุฑุฉ ุ ููุฏ ูููู ูุฐุง ุจุณุจุจ ุนุฏู ุงูุชุทุงุจู ุจูู ุงูุฅุนุฏุงุฏุงุช ุจูู ุงูุฎุงุฏู ููููุงุช ุชูููู ุงูุนููู ุฃู ูุดููุฉ ูู ุงุชุตุงู ุงูุดุจูุฉ / ุฌุฏุงุฑ ุงูุญูุงูุฉ.  ูููุง ููู ุจุนุถ ุชูููุญุงุช ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฑุฃ ุจุนูุงูุฉ ุฅุฎุฑุงุฌ ุนูููุฉ OpenVPN ุนูู ุงูุนููู.  ูุบุงูุจูุง ูุง ุชุญุชูู ุนูู ูุตุงุฆุญ ูููุฉ ุญูู ูุง ูุง ูููู ุชูููุฐู ุจุงูุถุจุท ูููุงุฐุง. </li><li style=";text-align:right;direction:rtl">  ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ ูู ูููุงุช openvpn.log ู openvpn-status.log ูู ุงูุฏููู / etc / openvpn / ุนูู ุงูุฎุงุฏู. </li><li style=";text-align:right;direction:rtl">  ุชุญูู ูู ุงูุฑุณุงุฆู ุฐุงุช ุงูุตูุฉ ุจู OpenVPN ูุงูููุช ุงูููุงุณุจ ูู ุณุฌูุงุช ุงููุธุงู ุนูู ุงูุฎุงุฏู ูุงูุนููู.  (journalctl -ce ุณูุนุฑุถ ุฃุญุฏุซ ุงูุฅุฏุฎุงูุงุช.) </li><li style=";text-align:right;direction:rtl">  ุชุฃูุฏ ูู ุฃู ูุฏูู ุงุชุตุงู ุดุจูุฉ ูุดุท ุจูู ุงูุฎุงุฏู ูุงูุนููู (ููุฒูุฏ ูู ุงูุชูุงุตูู ุ ุงูุธุฑ ุงููุตู 14). </li></ul><br><h3 style=";text-align:right;direction:rtl">  ุนู ุงููุคูู </h3><br>  <b>ุฏูููุฏ ููููุชูู</b> ูู ูุณุคูู ุงููุธุงู ูุงููุนูู ูุงููุงุชุจ.  ูุงู ุจุฅุฏุงุฑุชู ููุชุจ ุนูู ููุงู ุจุฅูุดุงุก ููุงุฏ ุชุฏุฑูุจูุฉ ููุนุฏูุฏ ูู ุงูุชุฎุตุตุงุช ุงููููุฉ ุงููููุฉ ุ ุจูุง ูู ุฐูู ุฃูุธูุฉ Linux ูุงูุญูุณุจุฉ ุงูุณุญุงุจูุฉ (ูุฎุงุตุฉ AWS) ูุชูููุงุช ุงูุญุงููุฉ ูุซู Docker.  ูุชุจ ูุชุงุจ "ุชุนูู ุฎุฏูุงุช ุงูููุจ ูู Amazon ูู ุดูุฑ ุงูุบุฏุงุก" (Manningุ 2017).  ูููู ุงูุนุซูุฑ ุนูู ุงูุนุฏูุฏ ูู ุฏุฑูุณ ุงูููุฏูู ุงูุฎุงุตุฉ ุจู ุนูู Pluralsight.com ุ ูุชุชููุฑ ุฑูุงุจุท ุฅูู ูุชุจู ุงูุฃุฎุฑู (ุญูู ุฅุฏุงุฑุฉ Linux ูุงููุญุงูุงุฉ ุงูุงูุชุฑุงุถูุฉ ููุฎุงุฏู) ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">bootstrap-it.com</a> . <br><br>  ยปูููู ุงูุงุทูุงุน ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงููุชุงุจ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุน ุงููุงุดุฑ</a> <br>  ยป <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุญุชููุงุช</a> <br>  ยป <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุทูุงุช</a> <br><br>  ุฎุตู 25ูช ุนูู ููุจูู ุงูุจุงุนุฉ ุงููุชุฌูููู - <b>Linux</b> <br>  ุนูุฏ ุฏูุน ุงููุณุฎุฉ ุงููุฑููุฉ ูู ุงููุชุงุจ ุ ูุชู ุฅุฑุณุงู ูุชุงุจ ุฅููุชุฑููู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar461879/">https://habr.com/ru/post/ar461879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar461867/index.html">ููููุฉ ุงูุชุนุฑู ุนูู ุงูุตูุฑ ูุงููุตูุต ุนูู ูุงุชูู ุจุงุณุชุฎุฏุงู ML Kit</a></li>
<li><a href="../ar461871/index.html">101 ูุตูุญุฉ ูุชุตุจุญ ูุจุฑูุฌูุง ุฌูุฏูุง (ูุฅูุณุงููุง)</a></li>
<li><a href="../ar461873/index.html">ViewPager 2 - ูุธุงุฆู ุฌุฏูุฏุฉ ูู ุงููุฌูุน ุงููุฏูู</a></li>
<li><a href="../ar461875/index.html">5 ูุงูููุชุฑ ููุงุจู 3 ูุงูููุชุฑ</a></li>
<li><a href="../ar461877/index.html">ุฌุงูุง ููุงุจู Kotlin ููุธุงู Android: ุขุฑุงุก ุงููุทูุฑ</a></li>
<li><a href="../ar461881/index.html">Node.js ุฏููู ุงูุชุณุฌูู</a></li>
<li><a href="../ar461885/index.html">EDS ูู ููุน ุขุฎุฑ ูู ุงูุงุญุชูุงู</a></li>
<li><a href="../ar461887/index.html">ุฏุฎูู Aeronet ุงูุญููุฉ 2: ุตุงุฑูุฎ ููุฌู ุจุฏูู ุทูุงุฑ</a></li>
<li><a href="../ar461891/index.html">ููู ุตูุนูุง ุตุฏุงูุงุช ูู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุตุฑููุฉ ุจุงุณุชุฎุฏุงู ManageIQ</a></li>
<li><a href="../ar461895/index.html">ุชุนูู ุฃุซูุงุก ุงูุณูุฑ - ููู ุณุงูุฑูุง ูู ููู ุชุญููู ุงูุฃุนูุงู ุงูุฃูุฑูุจู ุงูุฃูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>