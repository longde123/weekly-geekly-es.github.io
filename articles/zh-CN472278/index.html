<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🍳 🦏 ♦️ 我最喜欢的git commit 👩‍👦‍👦 😳 ✔️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注意事项 佩雷夫 ：这本英国程序员的出版物已在英语互联网上大受欢迎，它指的是6年前的Git承诺。 它被记录在一个政府数字服务开放存储库中-该服务专用于在英国开发数字服务并支持GOV.UK项目。 提交本身很有趣，与其说是代码更改，不如说是伴随它们的描述。 


 图片来自xkcd＃1296 

 我喜...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我最喜欢的git commit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/472278/">  <i><b>注意事项</b></i>  <i><b>佩雷夫</b></i>  <i>：这本英国程序员的出版物已在英语互联网上大受欢迎，它指的是6年前的Git承诺。</i>  <i>它被记录在一个政府数字服务开放存储库中-该服务专用于在英国开发数字服务并支持GOV.UK项目。</i>  <i>提交本身很有趣，与其说是代码更改，不如说是伴随它们的描述。</i> <br><br><img src="https://habrastorage.org/webt/iw/ez/ls/iwezlskublg1rm-81mn2fcdwmx4.png"><br>  <i>图片来自<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">xkcd＃1296</a></i> <br><br> 我喜欢在Git中提交描述。 如果使用得当，它们可以被称为最强大的工具，用于记录代码库在其存在期间的演变。 我想用我最喜欢的描述的例子来说明我的观点。 <a name="habracut"></a><br><br> 这项工作可以追溯到我在政府数字服务部门工作时。 它的作者是一个名为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Dan Carley</a>的开发人员，它的标题不太明显：“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">将模板转换为US-ASCII以解决错误</a> 。” <br><br><blockquote>  “我已经在功能分支中实现了一些测试，以匹配/ etc / nginx / router_routes.conf`的内容。 如果与命令“ bundle exec rake spec”或“ bundle exec rspec modules / router / spec”一起运行，它们可以很好地工作。 但是当运行`bundle exec rake`时，每个应该阻止的块都会失败： <br><br><pre><code class="plaintext hljs">ArgumentError: invalid byte sequence in US-ASCII</code> </pre> <br> 最后，我发现在表达式`.with_content（//）`例外之后，所有错误都消失了。 规范文件中没有奇怪的字符。 而且可以通过在同一个解释器中调用Puppet来播放它： <br><br><pre> <code class="plaintext hljs"> rake -E 'require "puppet"' spec</code> </pre> <br> 该模板似乎是我们代码库中唯一以'utf-8'编码的文件。  “ us-ascii”中的所有其他文件： <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ find modules -type f -exec file --mime {} \+ | grep utf modules/router/templates/routes.conf.erb: text/plain; charset=utf-8</code> </pre> <br> 尝试将其转码为US-ASCII失败，因为单个字符看起来像空格： <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ iconv -f UTF8 -t US-ASCII modules/router/templates/routes.conf.erb 2&gt;&amp;1 | tail -n5 proxy_intercept_errors off; # Set proxy timeout to 50 seconds as a quick fix for problems # iconv: modules/router/templates/routes.conf.erb:458:3: cannot convert</code> </pre> <br> 手动替换之后，文件再次变为“ US-ASCII”： <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ file --mime modules/router/templates/routes.conf.erb modules/router/templates/routes.conf.erb: text/plain; charset=us-ascii</code> </pre> <br> 现在测试工作了！ 我一生的一小时都无法归还...” </blockquote><br><div class="spoiler">  <b class="spoiler_title">在原来</b> <div class="spoiler_text"><h2> 将模板转换为US-ASCII以修复错误 </h2><br><blockquote> 我在功能分支中引入了一些测试以匹配内容 <br>  /etc/nginx/router_routes.conf。 与`bundle exec一起运行时，它们工作正常 <br>  rake spec`或`bundle exec rspec modules / router / spec`。 但是当以 <br>  `bundle exec rake`每个应该阻止失败，原因是： <br><br><pre> <code class="plaintext hljs"> ArgumentError: invalid byte sequence in US-ASCII</code> </pre> <br> 我最终发现，删除`.with_content（//）`匹配项会使 <br> 错误消失。 规范文件中没有任何奇怪的字符。 和 <br> 可以通过在相同的解释器中要求Puppet复制以下内容： <br><br><pre> <code class="plaintext hljs"> rake -E 'require "puppet"' spec</code> </pre> <br> 该特定模板似乎是我们代码库中唯一包含以下内容的文件： <br> 确定了“ utf-8”的编码。 其他所有的都是“ us-ascii”： <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ find modules -type f -exec file --mime {} \+ | grep utf modules/router/templates/routes.conf.erb: text/plain; charset=utf-8</code> </pre> <br> 尝试将该文件转换回US-ASCII，确定存在问题 <br> 字符，看起来像是空白： <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ iconv -f UTF8 -t US-ASCII modules/router/templates/routes.conf.erb 2&gt;&amp;1 | tail -n5 proxy_intercept_errors off; # Set proxy timeout to 50 seconds as a quick fix for problems # iconv: modules/router/templates/routes.conf.erb:458:3: cannot convert</code> </pre> <br> 手动替换后，文件再次标识为“ us-ascii”： <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ file --mime modules/router/templates/routes.conf.erb modules/router/templates/routes.conf.erb: text/plain; charset=us-ascii</code> </pre> <br> 现在测试工作了！ 我一小时的生命不会回来.. </blockquote></div></div><br><img src="https://habrastorage.org/webt/qt/4_/7e/qt4_7esruvjc41if3v41fpgg_kk.png"><br><br> 一个小的题外话：GDS中实践的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">开源开发</a>的好处之一是，您可以在创建它们的组织之外共享这样的示例。 我不知道是谁首先向GDS提出了这个概念-在我加入该组织时，它已经被广泛使用-但我无限感激此人。 <br><br><h2> 为什么我喜欢这个提交 </h2><br> 我无数次引用它作为提交描述功能的示例。 由于代码的更改比例和说明的大小，这有点有趣，但我一点都不喜欢。 <br><br> 在另一家公司中，与另一名开发人员一起，提交的全部信息可以简化为“替换差距”，“修复错误”或（取决于团队的文化）攻击不可分割的空间的发明者。 相反，Dan花时间创建了对其他人有用的详细描述。 我想详细说明为什么我认为此承诺是一个很好的例子。 <br><br><h3> 披露更改的原因 </h3><br> 对提交的最佳描述不仅可以告诉我们<b>发生了什么</b>变化，而且还可以解释<b>原因</b> 。 在我们的情况下： <br><br><blockquote> 我已经在功能分支中实现了一些测试，以匹配`/ etc / nginx / router_routes.conf`的内容。 如果与命令“ bundle exec rake spec”或“ bundle exec rspec modules / router / spec”一起运行，它们可以很好地工作。 但是当运行`bundle exec rake`时，每个应该阻止都失败了： <br><br><pre> <code class="plaintext hljs"> ArgumentError: invalid byte sequence in US-ASCII</code> </pre> </blockquote><br> 没有如此详细的说明，我们可以假设提交已纠正了特定工具中的解析错误。 通过提交的描述，我们知道了它是哪种工具。 <br><br> 这种信息可能真的很有价值，而且很容易丢失，因为人们往往会忘记工作的复杂性，转移到其他团队并最终离开公司。 <br><br><h3> 适合搜寻 </h3><br> 此描述的关键要素之一是错误本身，并由此开始进一步搜索： <br><br><blockquote>  ArgumentError： <br>  US-ASCII中的无效字节序列 </blockquote><br> 遇到此错误的任何人都可以通过运行<code>git log --grep "invalid byte sequence"</code>或使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub commits搜索</a>来搜索代码库。 实际上，从搜索结果来看，许多人已经这样做了，并且找出了何时何人面临该问题以及如何最终解决该问题。 <br><br><h3> 提供完整的图片 </h3><br> 提交消息详细说明了问题的外观，如何进行调查和解决。 例如： <br><br><blockquote> 最后，我发现在表达式`.with_content（//）`例外之后，所有错误都消失了。 规范文件中没有奇怪的字符。 而且它可以通过在同一个解释器中调用Puppet来播放。 </blockquote><br> 这是提交时消息真正能够显示的区域之一，因为它们描述更改本身，而不是某些文件，函数或代码行。 这使它们成为存储此类附加代码库冒险信息的好地方。 <br><br><h3> 使每个人都变得更聪明 </h3><br>  Dan在这里做了一件事，我真的很感激：带来了我在每个阶段执行的所有团队。 这是在团队中共享知识的一种很棒且价格合理的方法。 阅读他对提交的描述，您可以学到很多有关Unix工具的知识： <br><br><ul><li> 您可以传递<code>-exec</code>参数来<code>find</code>以对<code>find</code>每个文件执行命令； </li><li> 在命令末尾添加<code>\+</code>会产生非常有趣的效果（将多个文件名传递给<code>file</code>命令，并且不会为每个文件执行一次命令）； </li><li>  <code>file --mime</code>可以让<code>file --mime</code>找出文件的MIME类型； </li><li> 有一个实用程序<code>iconv</code> 。 </li></ul><br> 查看说明的人可以了解所有这些内容。 稍后偶然发现此提交的任何人也将了解这些内容。 如果将这种方法长时间用于承诺并且数量足够多，那么它可以成为团队的有力激励工具。 <br><br><h3> 发展同理心和信任 </h3><br><blockquote> 现在测试工作了！ 我一生的一小时无法归还... </blockquote><br> 最后一段增加了一点人性。 读了这些话，很难不感到Dan的失望，他不得不花整整一个小时的时间来寻找隐藏的错误，并且对纠正错误感到满意。 <br><br> 现在想象一下，类似的消息附加到临时的hack或进入生产并“扎根”的原型代码片段中（这种片段通常是这种情况）。 对提交的描述提醒每个人，在每次更改的背后，都有一个可以做出最佳决策的人，因为当时可以提供信息。 <br><br><h2> 好的承诺很重要 </h2><br> 我承认这是一个极端的例子，我不希望所有提交（尤其是这种范围的提交）都具有相同的详细程度。 但是，我仍然认为这是一个很好的例子，可以说明更改的原因，帮助其他人学习新事物，并为与代码库关联的集体思维模型做出贡献。 <br><br> 如果您想进一步了解提交的良好描述的优点以及一些易于进行编辑的工具，我可以推荐以下材料： <br><br><ul><li>  Joel Chippindale的“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">通过您的承诺讲故事</a> ”； </li><li>  TekinSüleyman撰写的《 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">时间的分支</a> 》。 </li></ul><br><h2> 译者的PS </h2><br> 另请参阅我们的博客： <br><br><ul><li>  ” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Git发生了！</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">6个典型的Git错误以及如何解决</a> ” </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使一天成为开源项目维护者的绝妙技巧</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">成功的大型开源项目有什么共同点？</a>  ”。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN472278/">https://habr.com/ru/post/zh-CN472278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN472264/index.html">数字考古学和虚拟现实，或者我如何尝试通过BIM和VR结识朋友</a></li>
<li><a href="../zh-CN472268/index.html">改善Chromium上的Microsoft Edge控件</a></li>
<li><a href="../zh-CN472270/index.html">“您无法获得当前的祈祷”：梵蒂冈的高科技珠子在15分钟内被黑客入侵</a></li>
<li><a href="../zh-CN472272/index.html">在Three.js上具有旧气氛的新游戏。 第二部分</a></li>
<li><a href="../zh-CN472274/index.html">远程SSH：提示和技巧</a></li>
<li><a href="../zh-CN472280/index.html">确定静脉扫描仪上是否存在手掌的任务</a></li>
<li><a href="../zh-CN472288/index.html">9有用的浏览器扩展开发人员（名单2020）</a></li>
<li><a href="../zh-CN472290/index.html">结构与类</a></li>
<li><a href="../zh-CN472292/index.html">内容拦截：世界舞台</a></li>
<li><a href="../zh-CN472294/index.html">在YouTube上创建游戏和视频。 我的互动实验以及从中获得的收益</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>