<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ญ ๐ ๐คต๐ผ ููุชุจ ุนูุณ socks5 ุงููููู ุนูู ุจูููุฑุดูู ๐ฉโโ๏ธ ๐พ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุตุฉ ุงูุจุญุซ ูุงูุชุทููุฑ ูู 3 ุฃุฌุฒุงุก. ุงูุฌุฒุก 2 - ุงูุชูููู. 
 ููุงู ุงูุนุฏูุฏ ูู ุงูุฒุงู - ุงููุฒูุฏ ูู ุงูููุงุฆุฏ. 

 ูู ุงูุฌุฒุก ุงูุฃูู ูู ุงูููุงูุฉ ุ ุชุนุฑููุง ุนูู ุจุนุถ ุงูุฃุฏูุงุช ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุชุจ ุนูุณ socks5 ุงููููู ุนูู ุจูููุฑุดูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453970/" style=";text-align:right;direction:rtl">  ูุตุฉ ุงูุจุญุซ ูุงูุชุทููุฑ ูู 3 ุฃุฌุฒุงุก.  ุงูุฌุฒุก 2 - ุงูุชูููู. <br>  ููุงู ุงูุนุฏูุฏ ูู ุงูุฒุงู - ุงููุฒูุฏ ูู ุงูููุงุฆุฏ. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุงูุฌุฒุก ุงูุฃูู ูู</a> ุงูููุงูุฉ ุ ุชุนุฑููุง ุนูู ุจุนุถ ุงูุฃุฏูุงุช ุงููุงุฒูุฉ ูุชูุธูู ุงูุฃููุงู ุงูุนูุณูุฉ ุ ููุธุฑูุง ูู ูุฒุงูุงูุง ูุนููุจูุง ุ ูุฏุฑุณูุง ุขููุฉ ููุถุงุนูู Yamux ููุตููุง ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ ููุญุฏุฉ Powerhell ุงูููุดุฃุฉ ุญุฏูุซูุง.  ููุฏ ุญุงู ุงูููุช ููุจุฏุก ูู ุชุทููุฑ ูุญุฏุฉ ุจูููุฑุดูู ุงูุนููู ููุชูููุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุงูุฒุฉ</a> ูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">RSocksTun</a> ุงูุนูุณู. <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุฃู ูููู ูู ุฃู ูุถุน ุณุชุนูู ูุญุฏุชูุง.  ูู ุงููุงุถุญ ุ ุจุงููุณุจุฉ ููููู ุงูุฃููู ููุจูุงูุงุช ุ ุณูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุขููุฉ ููุจุณ ุงูููุงูุฐ ูุฅููุงููุงุช .Net ูุชุฏูู ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุฅูู ุงูููุงุจุณ.  ูููู ุ ูู ูุงุญูุฉ ุฃุฎุฑู ุ ู  ูุธุฑูุง ูุฃู ุงููุญุฏุฉ ุงูููุทูุฉ ูุฏููุง ูุฌุจ ุฃู ุชุฎุฏู ุนุฏุฉ ุชุฏููุงุช yamux ูู ููุณ ุงูููุช ุ ููุง ููุจุบู ูุฌููุน ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุฃู ุชููุน ุชูููุฐ ุจุฑูุงูุฌูุง ุชูุงููุง.  ูุดูุฑ ูุฐุง ุฅูู ุงุณุชูุชุงุฌ ููุงุฏู ุฃู ุงููุญุฏุฉ ุงูููุทูุฉ ูุฏููุง ูุฌุจ ุฃู ุชุณุชุฎุฏู ุชุนุฏุฏ ูุคุดุฑุงุช ุงูุจุฑุงูุฌ ูุชูููุฐ ุนูููุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ูุน ุฎุงุฏู yamux ุ ููุฐูู ุนูููุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุฅูู ุงูุฎูุงุฏู ุงููุฌูุฉ ูู ุชุฏููุงุช ุงูุจุฑุงูุฌ ุงููุฎุชููุฉ.  ุญุณููุง ุ ุจุงูุทุจุน ุ ูู ุงูุถุฑูุฑู ุชูููุฑ ุขููุฉ ููุชูุงุนู ุจูู ุงูุชุฏููุงุช ุงููุชูุงุฒูุฉ.  ูุญุณู ุงูุญุธ ุ ูููุฑ ุจูููุฑุดูู ูุฑุตูุง ูุงุณุนุฉ ูุฅุทูุงู ูุฅุฏุงุฑุฉ ุชุฏููุงุช ุงูุจุฑูุงูุฌ. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑุฒููุฉ ุงูุนุงูุฉ ููุนูู </h3><br>  ูุจุงูุชุงูู ุ ูุฌุจ ุฃู ุชููู ุงูุฎูุงุฑุฒููุฉ ุงูุนุงูุฉ ูุนููุงุฆูุง ูุซู ูุฐุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุฃุณูุณ ุงุชุตุงู SSL ุจุงูุฎุงุฏู ุ </li><li style=";text-align:right;direction:rtl">  ุชุณุฌูู ุงูุฏุฎูู ุจูููุฉ ูุฑูุฑ ุญุชู ูุชููู ุงูุฎุงุฏู ูู ุงูุชูููุฒ ุจูููุง ูุจูู ุถุงุจุท ุงูุฃูู ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุธุฑ ุญุฒูุฉ yamux ูุชุซุจูุช ุฏูู ุฌุฏูุฏ ุ ูุงูุงุณุชุฌุงุจุฉ ุจุดูู ุฏูุฑู ูุทูุจุงุช ุงูุฎุงุฏู keepalive ุ </li><li style=";text-align:right;direction:rtl">  ุจุฏุก ุฏูู ุจุฑูุงูุฌ socksScript ุฌุฏูุฏ (ูุฌุจ ุนุฏู ุงูุฎูุท ุจููู ูุจูู ุฏูู) ุจูุฌุฑุฏ ูุตูู ุญุฒูุฉ yamux ูุชุซุจูุช ุฏูู ุฌุฏูุฏ.  ุฏุงุฎู socksScript ุ ุชูููุฐ ุนูู socks5 ุงูุฎุงุฏู ุ </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ูุตูู ุญุฒูุฉ ุชุญุชูู ุนูู ุจูุงูุงุช ูู yamux - ููู ูู ุฑุฃุณ 12 ุจุงูุช ุฃู ูู ุงูุชุฏููุงุช ุงูููุตูุฏ ุจูุง ุงูุจูุงูุงุช ุ ููุฐูู ุญุฌููุง ุ ููุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุฎุงุฏู yamux ูููู ุงูุจูุงูุงุช ุงููุณุชููุฉ ุฅูู ุงูุฏูู ูุน ุฑูู ุงูุฏูู ุงูููุงุจู ุ </li><li style=";text-align:right;direction:rtl">  ูุฑุงูุจุฉ ุฏูุฑูุฉ ูุชูุงูุฑ ุงูุจูุงูุงุช ุงููุนุฏุฉ ูุฎุงุฏู yamux ูู ูู ูู ุณูุฑุจุชุงุช ุงูุฌูุงุฑุจ ููุฏ ุงูุชุดุบูู.  ุฅุฐุง ูุงู ููุงู ูุซู ูุฐู ุงูุจูุงูุงุช ุ ุฃุถู ุฑุฃุณ ุงูุจุงูุช 12 ุจุงูุช ุงูููุงูู ููุง ูุฃุฑุณููุง ุฅูู ุฎุงุฏู yamux ุ </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ูุตูู ุญุฒูุฉ yamux ูุฅุบูุงู ุงูุฏูู ุ ูู ุจููู ุงูุฅุดุงุฑุฉ ุฅูู ุงูุฏูู ุงูููุงุจู ูุฅููุงุก ุงูุฏูู ููุตูู ุ ูุจุนุฏ ุฐูู ุ ุฃููู ุงูุฏูู ููุณู ุ </li></ul><br>  ูุฐูู ุ ูู ุงูุถุฑูุฑู ูู ุนููููุง ุชูููุฐ 3 ุชุฏููุงุช ุจุฑูุงูุฌ ุนูู ุงูุฃูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฑุฆูุณูุฉ ุ ุงูุชู ุณุชูุดุฆ ุงูุงุชุตุงู ุ ูู ุจุชุณุฌูู ุงูุฏุฎูู ุฅูู ุฎุงุฏู yamux ุ ูุงุณุชูุจุงู ุงูุจูุงูุงุช ููู ุ ููุนุงูุฌุฉ ุฑุคูุณ yamux ูุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ ุจุงููุนู ุฅูู ุชุฏููุงุช ุงูุจุฑูุงูุฌ ุงูุฃุฎุฑู ุ </li><li style=";text-align:right;direction:rtl">  ุชูุงุฑุงุช ูุน ุฎูุงุฏู ุงูุฌูุงุฑุจ.  ูุฏ ูููู ููุงู ุนุฏุฉ - ูุงุญุฏ ููู ุชูุงุฑ.  ุฃููุง ุชููุฐ ูุธููุฉ socks5.  ุณูู ุชุชูุงุนู ูุฐู ุงูุชุฏููุงุช ูุน ููุงุท ุงููุฌูุฉ ุนูู ุงูุดุจูุฉ ุงูุฏุงุฎููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุฏูู ุงูุนูุณู.  ูุชููู ุงูุจูุงูุงุช ูู ุชุฏููุงุช ุงูุฌูุงุฑุจ ุ ููุถูู ุฑุคูุณ yamux ุฅูููู ููุฑุณููุง ุฅูู ุฎุงุฏู yamux ุ </li></ol><br>  ูุจุงูุทุจุน ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชูููุฑ ุงูุชูุงุนู ุจูู ูู ูุฐู ุงูุชุฏููุงุช. <br><br>  ูุง ูุญุชุงุฌ ููุท ุฅูู ุชูููุฑ ูุซู ูุฐุง ุงูุชูุงุนู ุ ูููู ุฃูุถูุง ููุญุตูู ุนูู ุฑุงุญุฉ ุชุฏูู ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช (ุนูู ุบุฑุงุฑ ุงูููุงุจุณ).  ุณูููู ุฃูุณุจ ุขููุฉ ูุงุณุชุฎุฏุงู ุฃูุงุจูุจ ุงูุจุฑูุงูุฌ.  ูู Windows ุ ูุชู ุชุณุฌูู ุงูุฃูุงุจูุจ ุนูุฏูุง ูููู ููู ุฃูุจูุจ ุงุณู ุฎุงุต ุจู ููุฌููู - ูุชู ุชุญุฏูุฏ ูู ุฃูุจูุจ ุจูุงุณุทุฉ ูุนุงูุฌู.  ูู ุฃุฌู ุงูุณุฑูุฉ ุ ุจุงูุทุจุน ุ ุณูู ูุณุชุฎุฏู ุฃูุงุจูุจ ูุฌูููุฉ ุงููุตุฏุฑ.  (ุจุนุฏ ูู ุดูุก ุ ูุง ูุฑูุฏ ุญุณุงุจ ุงููุญุฏุฉ ุงูุฎุงุตุฉ ุจูุง ุจุงุณุชุฎุฏุงู ุฃูุงุจูุจ ูุณุฌูุฉ ูู ุงููุธุงู - ูุนูุ).  ูุจุงูุชุงูู ุ ุจูู ุงูุชุฏููุงุช ุงูุฑุฆูุณูุฉ / ุงูุนูุณูุฉ ูุชุฏููุงุช ุงูุฌูุงุฑุจ ุ ุณูููู ุงูุชูุงุนู ูู ุฎูุงู ุฃูุงุจูุจ ูุฌูููุฉ ุงููุตุฏุฑ ุ ููุง ูุฏุนู ุงูุชุฏูู ุบูุฑ ุงููุชุฒุงูู I / O.  ุจูู ุงูุชุฏููุงุช ุงูุฑุฆูุณูุฉ ูุชุฏููุงุช ุงูุนูุฏุฉ ุ ุณูุชู ุงูุงุชุตุงู ูู ุฎูุงู ุขููุฉ ุงููุงุฆู ุงููุดุชุฑู (ุงููุชุบูุฑุงุช ุงููุดุชุฑูุฉ ุงููุชุฒุงููุฉ) (ุงููุฒูุฏ ุญูู ูุงููุฉ ูุฐู ุงููุชุบูุฑุงุช ูููููุฉ ุงูุชุนุงูุด ูุนูุง ููููู ูุฑุงุกุชูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ). <br><br>  ูุฌุจ ุชุฎุฒูู ุงููุนูููุงุช ุญูู ุชุดุบูู ุชุฏููุงุช ุงูุฌูุงุฑุจ ูู ุจููุฉ ุงูุจูุงูุงุช ุงูููุงุจูุฉ.  ุนูุฏ ุฅูุดุงุก ุฎูุท ุฌูุงุฑุจ ูู ูุฐุง ุงููููู ุ ูุฌุจ ุฃู ููุชุจ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฑูู ุฌูุณุฉ yamux: $ ymxstreamุ </li><li style=";text-align:right;direction:rtl">  4 ูุชุบูุฑุงุช ููุนูู ูุน ุงูุฃูุงุจูุจ (ุงููููุงุช): $ cipipe ุ $ copipe ุ $ sipipe ุ $ sopipe.  ูุธุฑูุง ูุฃู ุงููููุงุช ุงููุฌูููุฉ ุชุนูู ุฅูุง ุฏุงุฎู ุงูุดุจูุฉ ุฃู ูู ุงูุฎุงุฑุฌ ุ ููุญู ูุญุชุงุฌ ุฅูู ููุงุชูู ูุฌูููู ุงููููุฉ ููู ููุงุฉ ูู ุงูุฌูุงุฑุจ ุ ูุฌุจ ุฃู ูููู ููู ููููุง ุทุฑูุงู (pipestream) (ุงูุฎุงุฏู ูุงูุนููู) ุ </li><li style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ุงุณุชุฏุนุงุก ุงูุฏูู ูู $ AsyncJobResultุ </li><li style=";text-align:right;direction:rtl">  ุชูุงุฑ ูุนุงูุฌ - Psobj $.  ูู ุฎูุงูู ุณูุบูู ุงูุฏูู ููุตุฏุฑ ุงูููุงุฑุฏ ุ </li><li style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ุงููุฑุงุกุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ุชูุฌูู ูุฌููู ุจูุงุณุทุฉ ุงูุฏูู ุงูุนูุณู ($ readjob).  ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงููุชุบูุฑ ูู ุฏูู yamuxScript ุงูุนูุณู ูููุฑุงุกุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ุชูุฌูู ุงูุฅุฎุฑุงุฌ ุงูููุงุจูุ </li><li style=";text-align:right;direction:rtl">  ุงูุนุงุฒูุฉ ููุฑุงุกุฉ ุงูุจูุงูุงุช ููู ุชูุงุฑ ุงูุฌูุงุฑุจ ุ </li></ul><br><h3 style=";text-align:right;direction:rtl">  ุงูุชูุงุฑ ุงูุฑุฆูุณู </h3><br>  ูุฐูู ุ ูู ูุฌูุฉ ูุธุฑ ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุ ุชู ุจูุงุก ุนูู ุจุฑูุงูุฌูุง ุนูู ุงููุญู ุงูุชุงูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุฌุงูุจ ุงูุฎุงุฏู (rsockstun - ุงูุฐู ุชู ุชูููุฐู ุนูู Golang) ุจุฑูุน ุฎุงุฏู ssl ูููุชุธุฑ ุงูุงุชุตุงูุงุช ูู ุงูุนููู ุ </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ุชููู ุงุชุตุงู ูู ุงูุนููู ุ ูููู ุงูุฎุงุฏู ุจูุญุต ูููุฉ ุงููุฑูุฑ ุ ูุฅุฐุง ูุงู ุตุญูุญูุง ุ ูููู ุจุฅูุดุงุก ุงุชุตุงู yamux ุ ููุฒูุฏ ูููุฐ ุงูุฌูุงุฑุจ ูููุชุธุฑ ุงูุงุชุตุงูุงุช ูู ุนููุงุก ุงูุฌูุงุฑุจ (ูููุงุกูุง ุ ูุชุตูุญูุง ุ ุฅูุฎ) ุ ูุชุจุงุฏู ุญุฒู keepalive ุจุดูู ุฏูุฑู ูุน ุนููุงุฆูุง.  ุฅุฐุง ูุงูุช ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ - ุชุชู ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุชู ุญุฏุฏูุงูุง ุนูุฏ ุชุซุจูุช ุงูุฎุงุฏู (ูุฐู ุตูุญุฉ "ูุงููููุฉ" ูููุณุคูู ุงูููุธ ูุฃูู ุงููุนูููุงุช) ุ </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ุชููู ุงุชุตุงู ูู ุนููู ุงูุฌูุงุฑุจ ุ ูุฑุณู ุงูุฎุงุฏู ุญุฒูุฉ yamux ุฅูู ุนููููุง ูุฅูุดุงุก ุฏูู ุฌุฏูุฏ (YMX SYN) ุ </li></ul><br>  <b>ุงูุญุตูู ุนูู ุฑุฃุณ Yamux ูุชุญูููู</b> <br><br>  ุชููู ุงููุญุฏุฉ ุงูุฎุงุตุฉ ุจูุง ุฃููุงู ุจุฅูุดุงุก ุงุชุตุงู SSL ุจุงูุฎุงุฏู ูุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ูููุฉ ูุฑูุฑ: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">$tcpConnection = New-Object System.Net.Sockets.TcpClient($server, $port) $tcpStream = New-Object System.Net.Security.SslStream($tcpConnection.GetStream(),$false,({$True} -as [Net.Security.RemoteCertificateValidationCallback])) $tcpStream.AuthenticateAsClient('127.0.0.1')</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ููุชุธุฑ ุงูุจุฑูุงูุฌ ุงููุตู ุฑุฃุณ yamux ูู 12 ุจุงูุช ููููู ุจุชูุฒูุนู. <br>  ููุงู ูุงุฑู ุจุณูุท ... ููุง ุชุธูุฑ ุงูููุงุฑุณุฉ ุ ุจุจุณุงุทุฉ ูุฑุงุกุฉ 12 ุจุงูุช ูู ุงูููุจุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> $num = $tcpStream.Read($tmpbuffer,0,12)</code> </pre> <br>  ูุง ูููู ุ ุญูุซ ูููู ุฅููุงู ุนูููุฉ ุงููุฑุงุกุฉ ุจุนุฏ ูุตูู ุฌุฒุก ููุท ูู ูุญุฏุงุช ุงูุจุงูุช ุงูุถุฑูุฑูุฉ.  ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุชุธุงุฑ 12 ุจุงูุช ูู ุงูุญููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> do { try { $num = $tcpStream.Read($tmpbuffer,0,12) } catch {} $tnum += $num $ymxbuffer += $tmpbuffer[0..($num-1)] }while ($tnum -lt 12 -and $tcpConnection.Connected)</code> </pre> <br>  ุจุนุฏ ุงูุชูุงู ุงูุญููุฉ ุ ูุฌุจ ุนูููุง ุชุญููู ุฑุฃุณ 12 ุจุงูุช ุงูููุฌูุฏ ูู ุงููุชุบูุฑ $ ymxbuffer ูููุนู ูุงูุฃุนูุงู ุงููุญุฏุฏุฉ ููููุง ูููุงุตูุงุช Yamux. <br><br>  ูููู ุฃู ูููู ุฑุฃุณ Yamux ูู ุนุฏุฉ ุฃููุงุน: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ymx syn - ุชุซุจูุช ุฏูู ุฌุฏูุฏ ุ </li><li style=";text-align:right;direction:rtl">  ymx fin-stream ุฅููุงูุ </li><li style=";text-align:right;direction:rtl">  ุจูุงูุงุช ymx - ุชูุซู ูุนูููุงุช ุญูู ุงูุจูุงูุงุช (ูุง ุญุฌููุง ููุง ูู ุงูุฏูู ุงูููุตูุฏ ูููุง) ุ </li><li style=";text-align:right;direction:rtl">  ymx ping - ุฑุณุงูุฉ keepalive ุ </li><li style=";text-align:right;direction:rtl">  ymx win update - ุชุฃููุฏ ููู ุฌุฒุก ูู ุงูุจูุงูุงุช ุ </li></ul><br>  ุฃู ุดูุก ูุง ููุงุฆู ุงูุฃููุงุน ุงููุฏุฑุฌุฉ ูู ุฑุคูุณ yamux ูุนุชุจุฑ ุญุงูุฉ ุงุณุชุซูุงุฆูุฉ.  ููุงู 10 ุงุณุชุซูุงุกุงุช ูู ูุฐุง ุงููุจูู ุ ููุนุชูุฏ ุฃู ููุงู ุฎุทุฃ ูุง ููุง ููููู ุนูู ูุญุฏุชูุง.  <s>(ุจุงูุฅุถุงูุฉ ุฅูู ูุญู ุฌููุน ูููุงุชูุง ุ ุงูุณุญ ุงููุฑุต ุ ููู ุจุชุบููุฑ ุงูุงุณู ุงูุฃุฎูุฑ ุ ููู ุจุฌูุงุฒ ุณูุฑ ุฌุฏูุฏ ุ ุซู ุงุชุฑู ุงูุจูุฏ ุ ููุง ุฅูู ุฐูู ููููุง ูููุงุฆูุฉ ...)</s> <br><br>  <b>ุฎูู ููุถูุน ุฌุฏูุฏ ุงูุฌูุงุฑุจ</b> <br><br>  ุจุนุฏ ุชููู ุญุฒูุฉ yamux ูุฅูุดุงุก ุฏูู ุฌุฏูุฏ ุ ููุดุฆ ุนููููุง ุฃูุจูุจูู ูุฌููููู ููุฎุงุฏู ($ sipipe ุ $ sopipe) ุ ููุฏุงุฎู / ููุฎุงุฑุฌ ุ ุนูู ุงูุชูุงูู ุ ููุดุฆ ุฃูุงุจูุจ ุนููู ($ cipipe ุ $ copipe) ุจูุงุกู ุนูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$sipipe = new-object System.IO.Pipes.AnonymousPipeServerStream(1) $sopipe = new-object System.IO.Pipes.AnonymousPipeServerStream(2,1) $sipipe_clHandle = $sipipe.GetClientHandleAsString() $sopipe_clHandle = $sopipe.GetClientHandleAsString() $cipipe = new-object System.IO.Pipes.AnonymousPipeClientStream(1,$sopipe_clHandle) $copipe = new-object System.IO.Pipes.AnonymousPipeClientStream(2,$sipipe_clHandle)</code> </pre> <br>  ููุดุฆ ูุณุงุญุฉ ุชุดุบูู ูุชูุงุฑ ุงูุฌูุงุฑุจ ุ ููุถุจุท ุงููุชุบูุฑุงุช ุงููุดุชุฑูุฉ ููุชูุงุนู ูุน ูุฐุง ุงูุชุฏูู (StopFlag) ุ ููููู ุจุชุดุบูู scriptblock SocksScript ุ ุงูุฐู ูููุฐ ูุธููุฉ ุฎุงุฏู ุงูุฌูุงุฑุจ ูู ุฏูู ูููุตู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$state = [PSCustomObject]@{"StreamID"=$ymxstream;"inputStream"=$cipipe;"outputStream"=$copipe} $PS = [PowerShell]::Create() $socksrunspace = [runspacefactory]::CreateRunspace() $socksrunspace.Open() $socksrunspace.SessionStateProxy.SetVariable("StopFlag",$StopFlag) $PS.Runspace = $socksrunspace $PS.AddScript($socksScript).AddArgument($state) | Out-Null [System.IAsyncResult]$AsyncJobResult = $null $StopFlag[$ymxstream] = 0 $AsyncJobResult = $PS.BeginInvoke()</code> </pre> <br>  ุชุชู ูุชุงุจุฉ ุงููุชุบูุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุจููุฉ ArrayList ุฎุงุตุฉ - ุชูุงุธุฑูุฉ ูุงููุณ ูู ุจูุซูู <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[System.Collections.ArrayList]$streams = @{}</code> </pre><br>  ุชุญุฏุซ ุงูุฅุถุงูุฉ ูู ุฎูุงู ุทุฑููุฉ ุงูุฅุถุงูุฉ ุงููุฏูุฌุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$streams.add(@{ymxId=$ymxstream;cinputStream=$cipipe;sinputStream=$sipipe;coutputStream=$copipe;soutputStream=$sopipe;asyncobj=$AsyncJobResult;psobj=$PS;readjob=$null;readbuffer=$readbuffer}) | out-null</code> </pre> <br>  <b>Yamux ูุนุงูุฌุฉ ุงูุจูุงูุงุช</b> <br><br>  ุนูุฏ ุงุณุชูุงู ุงูุจูุงูุงุช ุงูููุฌูุฉ ูุฃู ุฏูู ูู ุงูุฌูุงุฑุจ ูู ุฎุงุฏู yamux ุ ูุฌุจ ุฃู ูุญุฏุฏ ุฑูู ุฏูู yamux (ุฑูู ุฏูู ุงูุฌูุงุฑุจ ุงูุฐู ุชูุฏู ุฅููู ูุฐู ุงูุจูุงูุงุช) ูุนุฏุฏ ุจุงูุชุงุช ุงูุจูุงูุงุช ูู ุฑุฃุณ yamux ุงููููู ูู 12 ุจุงูุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ymxstream = [bitconverter]::ToInt32($buffer[7..4],0) $ymxcount = [bitconverter]::ToInt32($buffer[11..8],0)</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูู ุฏูู ArrayList ุนูู ุทูู ุญูู ymxId ุ ูุญุตู ุนูู ูุนุงูุฌุงุช ุงูุฎุฑุฌ ุงูุฎุงุฑุฌู ุงูููุงุจู ูุชูุงุฑ ุงูุฌูุงุฑุจ ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> if ($streams.Count -gt 1){$streamind = $streams.ymxId.IndexOf($ymxstream)} else {$streamind = 0} $outStream = $streams[$streamind].soutputStream</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ููุฑุฃ ุงูุจูุงูุงุช ูู ูุฃุฎุฐ ุงูุชูุตูู ุ ููุชุฐูุฑ ุฃููุง ุจุญุงุฌุฉ ุฅูู ูุฑุงุกุฉ ุนุฏุฏ ูุนูู ูู ุงูุจุงูุชุงุช ูู ุฎูุงู ุงูุญููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> $databuffer = $null $tnum = 0 do { if ($buffer.length -le ($ymxcount-$tnum)) { $num = $tcpStream.Read($buffer,0,$buffer.Length) }else { $num = $tcpStream.Read($buffer,0,($ymxcount-$tnum)) } $tnum += $num $databuffer += $buffer[0..($num-1)] }while ($tnum -lt $ymxcount -and $tcpConnection.Connected)</code> </pre> <br>  ููุชุงุจุฉ ุงูุจูุงูุงุช ุงููุณุชููุฉ ุฅูู ุงูุฃูุจูุจ ุงูููุงุจู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$num = $tcpStream.Read($buffer,0,$ymxcount) $outStream.Write($buffer,0,$ymxcount)</code> </pre> <br><br>  <b>Yamux FIN Processing - End Stream</b> <br><br>  ุนูุฏูุง ูุชููู ุญุฒูุฉ ูู ุฎุงุฏู yamix ุชุดูุฑ ุฅูู ุฅุบูุงู ุงูุฏูู ุ ูุญุตู ุฃููุงู ุนูู ุฑูู ุฏูู yamux ูู ุฑุฃุณ 12 ุจุงูุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> $ymxstream = [bitconverter]::ToInt32($buffer[7..4],0)</code> </pre> <br>  ุซู ุ ูู ุฎูุงู ูุชุบูุฑ ูุดุชุฑู (ุฃู ุจุงูุฃุญุฑู ุ ูุฌููุนุฉ ูู ุงูุนูุงูุงุช ุ ุญูุซ ูููู ุงูููุฑุณ ูู ุฑูู ุชุฏูู yamux) ุ ูุฅููุง ูุดูุฑ ุฅูู ูุคุดุฑ ุชุฑุงุจุท ุงูุฌูุงุฑุจ ูุฅููุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if ($streams.Count -gt 1){$streamind = $streams.ymxId.IndexOf($ymxstream)} else {$streamind = 0} if ($StopFlag[$ymxstream] -eq 0){ write-host "stopflag is 0. Setting to 1" $StopFlag[$ymxstream] = 1 }</code> </pre> <br>  ุจุนุฏ ุถุจุท ุงูุนูู ุ ูุจู ูุชู ูุฌุฑู ุงูุฌูุงุฑุจ ุ ุชุญุชุงุฌ ุฅูู ุงูุงูุชุธุงุฑ ูุชุฑุฉ ุฒูููุฉ ูุนููุฉ ูุชูุงุฑ ุงูุฌูุงุฑุจ ููุนุงูุฌุฉ ูุฐุง ุงูุนูู.  200 ูููู ุซุงููุฉ ูุงููุฉ ููุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">start-sleep -milliseconds 200 #wait for thread check flag</code> </pre><br>  ุซู ุฃุบูู ุฌููุน ุงูููุงุณูุฑ ุงููุฑุชุจุทุฉ ุจูุฐุง ุงูุฏูู ุ ูุฃุบููู ูุณุงุญุฉ Runspace ุงูููุงุจูุฉ ููู ุจูุชู ูุงุฆู Powershell ูุชูููุฑ ููุงุฑุฏ ูุฌุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$streams[$streamind].cinputStream.close() $streams[$streamind].coutputStream.close() $streams[$streamind].sinputStream.close() $streams[$streamind].soutputStream.close() $streams[$streamind].psobj.Runspace.close() $streams[$streamind].psobj.Dispose() $streams[$streamind].readbuffer.clear()</code> </pre> <br>  ุจุนุฏ ุฅุบูุงู ูุฌููุนุฉ ุงูุฌูุงุฑุจ ุ ูุญุชุงุฌ ุฅูู ุฅุฒุงูุฉ ุงูุนูุตุฑ ุงูููุงุจู ูู ุชุฏููุงุช ArrayList: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$streams.RemoveAt($streamind)</code> </pre> <br>  ููู ุงูููุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุฅุฌุจุงุฑ ุฃุฏุงุฉ ุชุฌููุน ูุฌูุนู ุงูุจูุงูุงุช ุงูููููุฉ .Net ุนูู ุชุญุฑูุฑ ุงูููุงุฑุฏ ุงูุชู ูุณุชุฎุฏููุง ูุคุดุฑ ุงูุชุฑุงุจุท.  ุฎูุงู ุฐูู ุ ุณูุณุชููู ุงูุจุฑูุงูุฌ ุงููุตู ูุฏููุง ุญูุงูู 100-200 ููุบุงุจุงูุช ูู ุงูุฐุงูุฑุฉ ุ ูุงูุชู ูููู ุฃู ุชุณุชุฑุนู ุงูุชุจุงู ูุณุชุฎุฏู ุฐู ุฎุจุฑุฉ ูุชุขูู ุ ููููุง ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฐูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[System.GC]::Collect()#clear garbage to minimize memory usage</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  Yamux Script - ุงูุชุฏูู ุงูุนูุณู </h3><br>  ููุง ุฐูุฑ ุฃุนูุงู ุ ุชุชู ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ ูู ุชุฏููุงุช ุงูุฌูุงุฑุจ ูู ุฎูุงู ุฏูู yamuxScript ูููุตู ุ ูุจุฏุฃ ูู ุงูุจุฏุงูุฉ (ุจุนุฏ ุงุชุตุงู ูุงุฌุญ ุจุงูุฎุงุฏู).  ุชุชูุซู ูููุชูุง ูู ุงูุงุณุชูุตุงุก ุงูุฏูุฑู ูุฃูุงุจูุจ ุฅุฎุฑุงุฌ ุชุฏููุงุช ุงูุฌูุงุฑุจ ุงูููุฌูุฏุฉ ูู ุชุฏููุงุช ArrayList $: <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">foreach ($stream in $state.streams){ ... }</code> </pre> <br>  ูุฅุฐุง ูุงูุช ููุงู ุจูุงูุงุช ุจูุง ุ ููู ุจุฅุฑุณุงููุง ุฅูู ุฎุงุฏู yamux ุ ุญูุซ ุณุจู ุฃู ูุฏูุช ุฑุฃุณ yamux ุงูููุงุจู ูู 12 ุจุงูุช ูุงูุฐู ูุญุชูู ุนูู ุฑูู ุฌูุณุฉ yamux ูุนุฏุฏ ูุญุฏุงุช ุจุงูุช ุงูุจูุงูุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> if ($stream.readjob -eq $null){ $stream.readjob = $stream.sinputStream.ReadAsync($stream.readbuffer,0,1024) }elseif ( $stream.readjob.IsCompleted ){ #if read asyncjob completed - generate yamux header $outbuf = [byte[]](0x00,0x00,0x00,0x00)+ [bitconverter]::getbytes([int32]$stream.ymxId)[3..0]+ [bitconverter]::getbytes([int32]$stream.readjob.Result)[3..0] $state.tcpstream.Write($outbuf,0,12) #write raw data from socks thread to yamux $state.tcpstream.Write($stream.readbuffer,0,$stream.readjob.Result) $state.tcpstream.flush() #create new readasync job $stream.readjob = $stream.sinputStream.ReadAsync($stream.readbuffer,0,1024) }else{ #write-host "Not readed" }</code> </pre> <br>  ูุฑุงูุจ YamuxScript ุฃูุถูุง ุงูุนูุงูุฉ ูู ุตููู StopFlag $ ุงููุดุชุฑู ููู ูู ูุคุดุฑุงุช ุชุฑุงุจุท socksScript ุงูุชู ูุชู ุชูููุฐูุง.  ูููู ุชุนููู ูุฐู ุงูุนูุงูุฉ ุนูู 2 ุฅุฐุง ูุงู ุงูุฎุงุฏู ุงูุจุนูุฏ ุงูุฐู ูุนูู socksScript ูุนูู ูุน ูุทุน ุงูุงุชุตุงู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุงูุฅุจูุงุบ ุนู ุงููุนูููุงุช ุฅูู ุนููู ุงูุฌูุงุฑุจ.  ุงูุณูุณูุฉ ุนูู ุงููุญู ุงูุชุงูู: ูุฌุจ ุนูู yamuxScript ุฅุจูุงุบ ุฎุงุฏู yamux ุจุงููุตู ุจุญูุซ ูุดูุฑ ุจุฏูุฑู ุฅูู ุนููู ุงูุฌูุงุฑุจ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if ($StopFlag[$stream.ymxId] -eq 2){ $stream.ymxId | out-file -Append c:\work\log.txt $outbuf = [byte[]](0x00,0x01,0x00,0x04)+ [bitconverter]::getbytes([int32]$stream.ymxId)[3..0]+ [byte[]](0x00,0x00,0x00,0x00) $state.tcpstream.Write($outbuf,0,12) $state.tcpstream.flush() }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุชุญุฏูุซ ูุงูุฐุฉ Yamux </h3><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ุนูู yamuxScript ูุฑุงูุจุฉ ุนุฏุฏ ุงูุจุงูุชุงุช ุงููุงุฑุฏุฉ ูู ุฎุงุฏู yamux ูุฅุฑุณุงู ุฑุณุงูุฉ YUX WinUpdate ุจุดูู ุฏูุฑู.  ูุฐู ุงูุขููุฉ ูู Yamux ูุณุคููุฉ ุนู ูุฑุงูุจุฉ ูุชุบููุฑ ุญุฌู ุฅุทุงุฑ ูุง ูุณูู (ุนูู ุบุฑุงุฑ ุจุฑูุชูููู TCP) - ุนุฏุฏ ุจุงูุชุงุช ุงูุจูุงูุงุช ุงูุชู ูููู ุฅุฑุณุงููุง ุฏูู ุฅูุฑุงุฑ ุจุฐูู.  ุจุดูู ุงูุชุฑุงุถู ุ ุญุฌู ุงูุฅุทุงุฑ 256 ูููู ุจุงูุช.  ูุฐุง ูุนูู ุฃูู ุนูุฏ ุฅุฑุณุงู ุฃู ุงุณุชูุจุงู ูููุงุช ุฃู ุจูุงูุงุช ุฃูุจุฑ ูู ูุฐุง ุงูุญุฌู ุ ูุญุชุงุฌ ุฅูู ุฅุฑุณุงู ุญุฒูุฉ ุชุญุฏูุซ windpw ุฅูู ุฎุงุฏู yamux.  ููุชุญูู ูู ููุฏุงุฑ ุงูุจูุงูุงุช ุงููุณุชููุฉ ูู ุฎุงุฏู yamux ุ ุชู ุชูุฏูู ุตููู ูุดุชุฑู $ RcvBytes ุฎุงุต ุ ุญูุซ ูููู ุงูุฏูู ุงูุฑุฆูุณู ูู ุฎูุงู ุฒูุงุฏุฉ ุงููููุฉ ุงูุญุงููุฉ ุจุชุณุฌูู ุนุฏุฏ ุงูุจุงูุชุงุช ุงููุงุฑุฏุฉ ูู ุงูุฎุงุฏู ููู ูุทุงุฑ.  ุฅุฐุง ุชู ุชุฌุงูุฒ ุงูุญุฏ ุงููุนูู ุ ูุฌุจ ุนูู yamuxScript ุฅุฑุณุงู ุญุฒูุฉ ุฅูู ุฎุงุฏู WinUpdate ูุฅุนุงุฏุฉ ุถุจุท ุงูุนุฏุงุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> if ($RcvBytes[$stream.ymxId] -ge 256144){ #out win update ymx packet with 256K size $outbuf = [byte[]](0x00,0x01,0x00,0x00)+ [bitconverter]::getbytes([int32]$stream.ymxId)[3..0]+ (0x00,0x04,0x00,0x00) $state.tcpstream.Write($outbuf,0,12) $RcvBytes[$stream.ymxId] = 0 }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุชูุงุฑุงุช ุงูุฌูุงุฑุจ </h3><br>  ุงูุขู ุฏุนูุง ููุชูู ูุจุงุดุฑุฉ ุฅูู socksScript ููุณู. <br>  ุชุฐูุฑ ุฃูู ูุชู ุงุณุชุฏุนุงุก socksScript ุจุดูู ุบูุฑ ูุชุฒุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$state = [PSCustomObject]@{"StreamID"=$ymxstream;"inputStream"=$cipipe;"outputStream"=$copipe} $PS = [PowerShell]::Create() .... $AsyncJobResult = $PS.BeginInvoke()</code> </pre> <br>  ููู ููุช ุงูุงุชุตุงู ุ ูุงูุช ุงูุจูุงูุงุช ุงูุชุงููุฉ ููุฌูุฏุฉ ูู ูุชุบูุฑ ุงูุญุงูุฉ $ ุงูุฐู ุชู ูููู ุฅูู ุงูุฏูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  $ state.streamId - ุฑูู ุฌูุณุฉ yamux ุ </li><li style=";text-align:right;direction:rtl">  $ state.inputStream - ูุฑุงุกุฉ ุงูุฃูุจูุจ ุ </li><li style=";text-align:right;direction:rtl">  $ state.oututStream - ูุชุงุจุฉ ุงูุฃูุงุจูุจ ุ </li></ul><br>  ุชุฃุชู ุงูุจูุงูุงุช ูู ุงูุฃูุงุจูุจ ูู ุดูู ุฎุงู ุจุฏูู ุฑุคูุณ yamux ุ ุฃู  ุจุงูุดูู ุงูุฐู ุฌุงุกูุง ุจู ูู ุนููู ุงูุฌูุงุฑุจ. <br><br>  ุจุฏุงุฎู ุงูุฌูุงุฑุจ ุ ุฃููุงู ููุจู ูู ุดูุก ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุฅุตุฏุงุฑ ุงูุฌูุงุฑุจ ูุงูุชุฃูุฏ ูู ุฃููุง 5: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$state.inputStream.Read($buffer,0,2) | Out-Null $socksVer=$buffer[0] if ($socksVer -eq 5){ ... }</code> </pre> <br>  ุญุณููุง ุ ูููุฐ ุชูุงููุง ููุง ูู ูุทุจู ูู ุงูุจุฑูุงูุฌ ุงููุตู Invoke-SocksProxy.  ุงููุฑู ุงููุญูุฏ ุณูููู ุฐูู ุจุฏูุงู ูู ุงูููุงููุงุช <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$AsyncJobResult.AsyncWaitHandle.WaitOne(); $AsyncJobResult2.AsyncWaitHandle.WaitOne();</code> </pre> <br>  ูู ุงูุถุฑูุฑู ูุฑุงูุจุฉ ุงุชุตุงู tcp ูุนูุงูุฉ ุงูุฅููุงุก ุงูููุงุจูุฉ ูู ูุตูููุฉ $ StopFlag ูู ูุถุน ุฏูุฑู ุ ูุฅูุง ููู ูุชููู ูู ุงูุชุนุฑู ุนูู ูุถุน ููุงูุฉ ุงูุงุชุตุงู ูู ุฌุงูุจ ุนููู ุงูุฌูุงุฑุจ ูุฎุงุฏู ymux: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">while ($StopFlag[$state.StreamID] -eq 0 -and $tmpServ.Connected ){ start-sleep -Milliseconds 50 }</code> </pre> <br>  ูู ุญุงูุฉ ุงูุชูุงุก ุงูุงุชุตุงู ุนูู ุฌุงูุจ tcp ููุฎุงุฏู ุงูุฐู ูุชุตู ุจู ุ ูููุง ุจุชุนููู ูุฐู ุงูุนูุงูุฉ ุนูู 2 ุ ููุง ุณูุฌุจุฑ yamuxscript ุนูู ุงูุชุนุฑู ุนูู ูุฐุง ูุฅุฑุณุงู ุญุฒูุฉ FIN ymx ุงูููุงุจูุฉ ุฅูู ุฎุงุฏู yamux: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if ($tmpServ.Connected){ $tmpServ.close() }else{ $StopFlag[$state.StreamID] = 2 }</code> </pre> <br>  ูุฌุจ ุนูููุง ุฃูุถูุง ุชุนููู ูุฐู ุงูุนูุงูุฉ ุฅุฐุง ุชุนุฐุฑ ุนูู socksScript ุงูุงุชุตุงู ุจุงูุฎุงุฏู ุงููุฌูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if($tmpServ.Connected){ ... } else{ $buffer[1]=4 $state.outputStream.Write($buffer,0,2) $StopFlag[$state.StreamID] = 2 }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุฎุงุชูุฉ ููุฌุฒุก ุงูุซุงูู </h3><br>  ูู ุณูุงู ุจุญุซูุง ุงูุชุฑููุฒ ุ ุชูููุง ูู ุฅูุดุงุก ุนููู ุจูููุฑุดูู ูุฎุงุฏู RsocksTun ูุฏููุง ูุน ุงููุฏุฑุฉ ุนูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุชุตุงูุงุช SSL </li><li style=";text-align:right;direction:rtl">  ุฅุฐู ุนูู ุงูุฎุงุฏู ุ </li><li style=";text-align:right;direction:rtl">  ุงูุนูู ูุน ุฎุงุฏู yamux ุจุฏุนู ูุฃุตูุงุช keepalive ุ </li><li style=";text-align:right;direction:rtl">  ูุถุน ูุชุนุฏุฏ ุงูุฎููุท ููุนูููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุฏุนู ูููู ุงููููุงุช ุงููุจูุฑุฉ ุ </li></ul><br>  ุฎุงุฑุฌ ุงูููุงูุฉ ุ ูุงู ููุงู ุชุทุจูู ููุธุงุฆู ุงูุงุชุตุงู ุนุจุฑ ุฎุงุฏู ูููู ูุงูุชูููุถ ุนููู ุ ููุฐูู ุชุญููู ุงูุจุฑูุงูุฌ ุงููุตู ูุฏููุง ุฅูู ุฅุตุฏุงุฑ ูุถููู ุ ูููู ุชุดุบููู ูู ุณุทุฑ ุงูุฃูุงูุฑ.  ุณูููู ูู ุงูุฌุฒุก ุงูุซุงูุซ. <br><br>  ูุฐุง ูู ุดูุก ููุฐุง ุงูููู.  ููุง ูููููู - ุงุดุชุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงุชุฑู ุชุนูููุงุช (ุฎุงุตุฉ ูููุง ูุชุนูู ุจุฃููุงุฑู ุญูู ุชุญุณูู ุงูููุฏ ูุฅุถุงูุฉ ุงููุธููุฉ). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar453970/">https://habr.com/ru/post/ar453970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar453958/index.html">ุงููุณุชูุฏุนุงุช ุงูุงุญุชูุงุฑูุฉ: ูู ูุถูู</a></li>
<li><a href="../ar453960/index.html">Global DevOps Bootcamp 2019 ูู ููุณูู</a></li>
<li><a href="../ar453962/index.html">RxSwift ู Coroutines ูู Kotlin - ุชุทููุฑ ุงุฎุชูุงุฑู ูููุงุชู ุงููุญููู ูู AGIMA ู GeekBrains</a></li>
<li><a href="../ar453964/index.html">OOP ูู ุงููุบุฉ R (ุงูุฌุฒุก 1): ูุตูู S3</a></li>
<li><a href="../ar453968/index.html">ุชุฎูุต ูู ููุงุฑุณุงุช ูุฑุงุฌุนุฉ ุงูููุฏ ุงูุณุงูุฉ</a></li>
<li><a href="../ar453972/index.html">ูุนูุฏ ุนููุงุก ุงูุขุซุงุฑ ุฅูุดุงุก ุฏุจูุณ ุนูุฑู ุฃููู ุนุงู ุจุงุณุชุฎุฏุงู ุงูุทุจุงุนุฉ ูุงููุณุญ ุงูุถูุฆู ุซูุงุซู ุงูุฃุจุนุงุฏ</a></li>
<li><a href="../ar453974/index.html">ูุณุงุจูุฉ ุฃูุธูุฉ ML ุนูู ุงูููุงุฏ ุงููุบููุฉ. ููู ุชุนูููุง ููุก ุงููุฑุงุบุงุช</a></li>
<li><a href="../ar453976/index.html">ุจุฑูุงูุฌ ุชุนูููู ุงูุชุตุงุฏู ููุชุฎุตุตู ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
<li><a href="../ar453980/index.html">ุทุจุงุนุฉ ุงูููุตูุงุช ูุนูุงูุงุช ุงูุฃุณุนุงุฑ ููุชุฌุฑ .net ุนูู ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar453982/index.html">ูุงููู ุบุงู: ูุง ุชูููู ูููู ูุชู ุชุทุจููู ูู ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>