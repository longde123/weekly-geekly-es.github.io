<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßöüèª üë©üèΩ‚Äçü§ù‚Äçüë©üèº üöÄ Gateway de Internet de software para uma pequena organiza√ß√£o ü§ΩüèΩ üò¥ üï¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qualquer empres√°rio se esfor√ßa para reduzir custos. O mesmo vale para a infraestrutura de TI. 

 Quando voc√™ abre um novo escrit√≥rio, o cabelo de algu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gateway de Internet de software para uma pequena organiza√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477530/">  Qualquer empres√°rio se esfor√ßa para reduzir custos.  O mesmo vale para a infraestrutura de TI. <br><br>  Quando voc√™ abre um novo escrit√≥rio, o cabelo de algu√©m come√ßa a se mover.  Afinal, √© necess√°rio organizar: <br><ul><li>  rede de √°rea local; </li><li>  Conex√£o com a Internet.  Melhor ainda com reservas atrav√©s do segundo provedor; </li><li>  VPN para o escrit√≥rio central (ou para todas as filiais); </li><li>  HotSpot para clientes com autoriza√ß√£o sms; </li><li>  filtrar o tr√°fego para que os funcion√°rios n√£o fiquem nas redes sociais e n√£o apare√ßam no Skype; </li><li>  prote√ß√£o de rede contra v√≠rus e ataques.  Fornecer prote√ß√£o contra intrus√µes (IDS / IPS); </li><li>  seu servidor de correio (se voc√™ n√£o confia em todos os tipos de pdd.yandex.ru) com antiv√≠rus e antispam; </li><li>  lixeira de arquivo; </li><li>  Provavelmente voc√™ precisa de telefonia, ou seja,  organizar um PBX, conectar outros p√£ezinhos ao provedor SIP ... </li></ul><br><br>  Mas o enikeyschik n√£o poder√° elevar a rede corporativa com esses requisitos ... Contratar um administrador de sistema caro? <br>  Um n√∫mero muito grande de rublos est√° aparecendo. <br><br>  Mas esses custos podem ser significativamente reduzidos se voc√™ prestar aten√ß√£o √†s <b>solu√ß√µes UTM</b> , que agora s√£o uma quantia enorme.  E como adotei a estrat√©gia ‚Äúquanto mais simples, melhor‚Äù para resolver meus problemas, meus olhos se voltaram para o UTM <a href="https://xserver.a-real.ru/" rel="nofollow">Internet Control Server</a> (IKS). <br><br><img src="https://habrastorage.org/webt/iw/rv/e4/iwrve4xuvgbol3pexom9mohycl8.png"><br><br>  Como esse sistema ajudar√° a economizar o or√ßamento da empresa e por que um administrador de sistema caro n√£o √© necess√°rio para sua manuten√ß√£o - mostrarei a seguir. <br><br>  Mas, olhando para o futuro, direi: este √© um produto espec√≠fico e tem suas limita√ß√µes.  Voc√™ pode avaliar os recursos do gateway em mais detalhes, <a href="https://doc.a-real.ru/doku.php" rel="nofollow">examinando a documenta√ß√£o no site oficial</a> . <br>  Configurei o artigo ‚Äúem russo‚Äù para o artigo, ou seja, sem examinar a mana, para entender o quanto tudo √© intuitivamente claro. <br><a name="habracut"></a><br>  <b>Instala√ß√£o inicial</b> <br><br>  O IKS pode ser instalado no hardware real e no hipervisor.  Voc√™ pode usar algum tipo de PC sem ventilador. <div class="spoiler">  <b class="spoiler_title">Por exemplo isso.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/o5/ve/nu/o5venur2uahcytuudm-bzo8oygy.png"><br></div></div><br>  O sistema √© baseado no <a href="https://www.freebsd.org/" rel="nofollow">FreeBSD 11.3</a> e deve decolar sem problemas na maioria dos hardwares. <br><br>  A instala√ß√£o √© feita em um disco em branco. <div class="spoiler">  <b class="spoiler_title">Mais precisamente, se havia algo l√°, ent√£o voc√™ pode dizer adeus com seguran√ßa a isso.</b> <div class="spoiler_text">  Infelizmente, o instalador suporta apenas ingl√™s.  Mas ap√≥s a instala√ß√£o, a interface principal pode estar em russo. <br><img src="https://habrastorage.org/webt/je/ka/dy/jekady3fazrccvkf_z1fkkql5l0.png"><br><img src="https://habrastorage.org/webt/g4/vs/m6/g4vsm6h1-c3vv78v48y59mrnodw.png"><br><img src="https://habrastorage.org/webt/xb/z-/g7/xbz-g7yiibyssvo-m26wkhsdyqo.png"><br><img src="https://habrastorage.org/webt/x9/a6/zu/x9a6zut9wbads_fpifmgpcx0cv4.png"></div></div><br>  Sobre a toler√¢ncia a falhas tamb√©m n√£o se esqueceu. <div class="spoiler">  <b class="spoiler_title">Se houver v√°rios discos no sistema, eles poder√£o ser combinados em um ataque usando o ZFS.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ax/mp/mx/axmpmxtf7gqfxiorili91r-ue9s.png"><br><img src="https://habrastorage.org/webt/zr/qa/2m/zrqa2mcotzutkesun7olph36q5a.png"><br></div></div><div class="spoiler">  <b class="spoiler_title">Selecionamos a interface de rede e atribu√≠mos o IP da rede selecionada.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/mz/s_/fb/mzs_fbstxa6usgweyqx1qywobf4.png"><br><img src="https://habrastorage.org/webt/8s/gj/7o/8sgj7opwkd-7ltvuvnjpfzwhgam.png"><br>  Indique o nome real se voc√™ planeja gerar, por exemplo, um servidor de correio.  Se n√£o houver essa necessidade agora, voc√™ pode escrever no trator.  Al√©m disso na interface, ser√° poss√≠vel corrigir. <br><img src="https://habrastorage.org/webt/wo/hd/4v/wohd4vjxrbswqz4ccnz4bj3or-k.png"><br></div></div><br><br>  Isso √© tudo!  Voc√™ pode acessar a interface da web via ip, especificado nas configura√ß√µes, e na porta 81. O DHCP ainda n√£o est√° ativado neste momento; portanto, voc√™ dever√° atribuir manualmente o ip da mesma rede no seu PC. <br><br><img src="https://habrastorage.org/webt/rv/0y/3i/rv0y3iofo08psjkbnlp2ryp7joe.png"><br><br><h2>  N√≥s nos conectamos √† Internet e conectamos escrit√≥rios. </h2><br>  A primeira vez que voc√™ inicia o assistente, <b>obriga</b> a definir uma senha forte. <br><div class="spoiler">  <b class="spoiler_title">O mestre</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xp/_s/px/xp_spxlkh6ral_ttcu05kzjfclm.png"><br><img src="https://habrastorage.org/webt/ci/_9/az/ci_9azcxbetwmgxrnsxvpuv6pow.png"><br><img src="https://habrastorage.org/webt/vn/tw/83/vntw83qgm6o47tqymml80v-3vbq.png"><br><img src="https://habrastorage.org/webt/6r/nf/zc/6rnfzche8wzvtu_5wbixdvjizu0.png"><br></div></div><br>  Em seguida, subimos para as configura√ß√µes de rede <br><img src="https://habrastorage.org/webt/y-/wz/tk/y-wztk_rzlzxt2m4bpxxfet6eae.png"><br>  e configurar a conex√£o com nosso provedor e o papel de todas as interfaces de rede. <br><img src="https://habrastorage.org/webt/i_/_c/9r/i__c9rqqqqkgr7_7alhxkp4mioc.png"><br><img src="https://habrastorage.org/webt/ig/sk/-9/igsk-9iqvpe29vfsf4gacfnliwo.png"><br><br>  Voc√™ pode configurar v√°rios provedores e organizar o balanceamento. <br><br>  A prop√≥sito, se voc√™ n√£o se sentir confort√°vel com o idioma ingl√™s da interface, ele poder√° ser facilmente alterado aqui. <br><img src="https://habrastorage.org/webt/2l/yj/zx/2lyjzxv75dd4cbssztxnm8psm14.png"><br><br>  Se voc√™ deseja conectar um escrit√≥rio, por exemplo, √† sede. <div class="spoiler">  <b class="spoiler_title">Em seguida, crie uma nova conex√£o</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/me/s6/qy/mes6qyfnsfk8rnbvjky0t4uhrp8.png"><br><img src="https://habrastorage.org/webt/ja/5s/py/ja5spyesmhifxeymx3sx0efizzo.png"><br></div></div><div class="spoiler">  <b class="spoiler_title">e configurar rotas para recursos na rede remota.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/nv/td/zf/nvtdzfkvkyhmcicqrkrpqacnwfg.png"></div></div><br><br>  Voc√™ pode esquecer apenas o roteamento din√¢mico - ele n√£o est√° aqui. <br>  Talvez eu encontre falhas, mas IMHO isso √© uma grande desvantagem ... <br><br><h2>  Acesso √† Internet para funcion√°rios </h2><br><br>  Na maioria das vezes, a principal tarefa do gateway √© controlar o acesso √† Internet pelos funcion√°rios. <br>  Voc√™ pode identificar funcion√°rios por ip / mac ou por login / senha por meio de um agente ou portal cativo. <br><img src="https://habrastorage.org/webt/3b/-z/25/3b-z25leyoohjoma1r6rn-wdble.png"><br><br>  Al√©m disso, se sua organiza√ß√£o usa o Active Directory, o IKS pode ser integrado a ele. <br><img src="https://habrastorage.org/webt/jq/p3/vh/jqp3vh7i3gaiag85oujl1pawqgu.png"><br><br>  As configura√ß√µes de filtragem (onde o funcion√°rio pode e n√£o pode) s√£o muito extensas. <br><img src="https://habrastorage.org/webt/tc/zv/pr/tczvprwqxookr06gn30lvt2dblm.png"><br><br>  Um grande n√∫mero de modelos de regras prontos: <br><div class="spoiler">  <b class="spoiler_title">Voc√™ pode permitir o youtube, mas pro√≠be o upload de v√≠deos l√°.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/kn/68/hz/kn68hz76orsl_-eznv2u5-stv0o.png"><br><img src="https://habrastorage.org/webt/65/m9/nm/65m9nmryqzqpyldnrpz8fd-ncyu.png"><br><img src="https://habrastorage.org/webt/s6/xw/fb/s6xwfb6r3mzvu72rsnzh7numu_w.png"><br></div></div><br><br>  Mas voc√™ n√£o pode limit√°-lo, e o ICS ainda dir√° para onde foi e para onde, com seus extensos relat√≥rios: <br><img src="https://habrastorage.org/webt/mw/g8/z6/mwg8z6o96hniavmbb9qknyk2mps.png"><br><br><h2>  Mas e o Wi-Fi dos h√≥spedes? </h2><br><br>  E o convidado Wi-Fi pode ser organizado em conformidade com os requisitos das leis da Federa√ß√£o Russa sobre a identifica√ß√£o obrigat√≥ria de usu√°rios. <br>  O ICS suporta o envio de SMS via protocolo SMPP atrav√©s de qualquer provedor de SMS. <br><br><img src="https://habrastorage.org/webt/7o/vk/wt/7ovkwty1clpowvyqwnpcpybbuya.png"><br><br><h2>  Telefonia. </h2><br><br>  Sim sim  N√£o √© necess√°rio instalar um servidor separado com o Asterisk.  Ele j√° est√° em X. <br>  Conectei com sucesso o SIP do Megaphone (emo√ß√£o, multiphone). <br><br><img src="https://habrastorage.org/webt/ea/vd/rc/eavdrccb7r8wzqgyaqp3mb-ygk8.png"><br><br>  Como obter o SIP da Megafon nas tarifas de celular de indiv√≠duos pode ser encontrado no artigo <a href="https://habr.com/ru/post/441888/">"SIP do Megafone na tarifa de casa"</a> . <br><br><h2>  Seguran√ßa </h2><br>  Existem muitas ferramentas no ICS que permitem configurar o n√≠vel de seguran√ßa de acordo com seus requisitos: desde antiv√≠rus ClamAV gratuitos e <a href="https://habr.com/ru/post/192884/">sistemas de detec√ß√£o de intrus√£o Suricata</a> at√© produtos de <a href="https://www.kaspersky.ru/" rel="nofollow">Eugene Kaspersky</a> , configurando apenas atrav√©s de uma interface clara da Web. <br><br><img src="https://habrastorage.org/webt/9m/jo/xz/9mjoxzgg2tnj9nz_uocqcudq-5s.png"><br><br>  At√© o mesmo fail2Ban insubstitu√≠vel √© configurado em apenas alguns cliques <br><img src="https://habrastorage.org/webt/ue/oy/hz/ueoyhzdpb3joiyb1avp-k3i-ngo.png"><br><br>  Al√©m disso, o ICS pode monitorar o tr√°fego usando o protocolo netflow de equipamentos de rede, sem passar o tr√°fego por si pr√≥prio. <br><br><h2>  Bolos de comunica√ß√£o </h2><br><br>  A comunica√ß√£o dos funcion√°rios pode ser organizada n√£o apenas por telefone e correio <br><img src="https://habrastorage.org/webt/du/74/t_/du74t_xyhkzuxfkvnezpofnuscg.png"><br><br>  mas tamb√©m atrav√©s do jabber.  √â verdade que poucas pessoas j√° se lembram desse protocolo. <br><br>  <b>Servidor Web:</b> <br>  No IKS, existe at√© um servidor web com suporte a PHP.  Voc√™ pode instalar o seu certificado HTTPS, se tiver um, ou especificar que o ICS receba um Let's Encrypt gratuito. <br><img src="https://habrastorage.org/webt/qa/nc/3f/qanc3fjchmccdxxqzr6-9olycnm.png"><br><br>  Isso √© suficiente para hospedar um site de cart√£o de visita ou uma p√°gina de destino de publicidade.  Mas voc√™ n√£o pode acessar um portal pesado com m√≥dulos personalizados.  E para mim, isso √© est√∫pido.  Ainda assim, o gateway deve permanecer o gateway. <br><br>  Configura√ß√µes flex√≠veis de monitoramento e notifica√ß√£o. <br>  Os alarmes podem at√© ser enviados para o Telegram.  E nas realidades da Federa√ß√£o Russa existe at√© a possibilidade de enviar mensagens atrav√©s de um proxy. <br><img src="https://habrastorage.org/webt/ao/2j/se/ao2jsergae_1i5g-t1ezutn00oe.png"><br><br><h2>  Em conclus√£o </h2><br><br>  O gateway da Internet ICS cont√©m quase todos os componentes necess√°rios para a opera√ß√£o de um pequeno escrit√≥rio. <br>  Ao mesmo tempo, um administrador de sistema iniciante pode configurar tudo isso. <br><br>  Apesar do fato de o sistema n√£o ter sido constru√≠do nem pelo FreeBSD, n√£o h√° acesso ssh a ele.  Ou seja, sem muletas, voc√™ n√£o pode instalar m√≥dulos PHP.  Teremos que nos contentar com o que temos ... Ou pedir apoio para concluir. <br><br>  De qualquer forma, no in√≠cio, fa√ßa o <a href="https://xserver.a-real.ru/download" rel="nofollow">download da avalia√ß√£o por 35 dias</a> e verifique quanto esse gateway combina com voc√™. <br><br>  A licen√ßa n√£o tem data de validade, mas, apesar disso, o custo √© bastante acess√≠vel <a href="https://xserver.a-real.ru/cost/" rel="nofollow">.</a> <br><br>  Na bancada de testes em testes sint√©ticos, o sistema mostrou-se adequado. <br><br>  Se o cliente aprovar e ser√° interessante para voc√™ como esse sistema se comportar√° em uma "batalha", depois de 3 a 6 meses, escreverei uma resenha com todos os problemas e dificuldades que surgirem.  Se poss√≠vel, verifique a qualidade do suporte t√©cnico. <br><br>  Nos coment√°rios, estou aguardando suas perguntas, que precisar√£o ser focadas em detalhes no uso em combate. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477530/">https://habr.com/ru/post/pt477530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477518/index.html">Microarquitetura √≥ssea como base para materiais ultraleves e dur√°veis</a></li>
<li><a href="../pt477520/index.html">Conhe√ßa <detalhes></a></li>
<li><a href="../pt477522/index.html">Desafio Tetris aceito</a></li>
<li><a href="../pt477524/index.html">Criando um jogo para o SEGA Mega Drive / Genesis em 2019</a></li>
<li><a href="../pt477526/index.html">Processadores de classe espacial: como enviar mais poder de computa√ß√£o ao espa√ßo?</a></li>
<li><a href="../pt477532/index.html">Materiais da reuni√£o de design da Atomic: letras, cores, forma, equipe e dinheiro</a></li>
<li><a href="../pt477534/index.html">Promovendo um aplicativo na App Store e no Google Play</a></li>
<li><a href="../pt477538/index.html">Como o suporte HP funciona - bem-vindo ou n√£o autorizado</a></li>
<li><a href="../pt477540/index.html">A intelig√™ncia artificial entrou em um debate com as pessoas e convencida de que n√£o √© perigosa</a></li>
<li><a href="../pt477542/index.html">Carreira vertical e horizontal em Data Science</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>