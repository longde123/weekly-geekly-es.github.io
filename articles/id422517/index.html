<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå•Ô∏è üîë üîû TelegramBot di Cloud Wolfram üëí üë®‚Äç‚öïÔ∏è ‚ôèÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendahuluan 


 Periode telah berlalu ketika setiap artikel kedua tentang Habrahabr dikhususkan untuk menulis bot telegram-nya. Juga, periode waktu be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TelegramBot di Cloud Wolfram</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wolfram/blog/422517/"><h2 id="vvedenie">  Pendahuluan </h2><br><p>  Periode telah berlalu ketika setiap artikel kedua tentang Habrahabr dikhususkan untuk menulis bot telegram-nya.  Juga, periode waktu berlalu ketika bot tanpa kesulitan dapat ditempatkan di komputer Anda atau hosting di Rusia.  Enam bulan lalu, bot saya baru saja dimulai pada laptop dan tidak mengalami masalah saat terhubung ke API.  Tetapi sekarang, ketika saya berpikir untuk membuatnya kembali bekerja, saya menyadari bahwa itu tidak akan mudah.  Saya tidak ingin mencari dan mengkonfigurasi server proxy, dan terlebih lagi di luar negeri.  Juga, sebelum itu saya menulis bot dalam Bahasa Wolfram dan tidak tahu bagaimana bahasa itu bekerja dengan server proxy, karena saya belum menggunakannya.  Dan kemudian sebuah ide bagus muncul!  Gunakan Wolfram Cloud.  Dalam artikel ini saya ingin menunjukkan betapa sangat sederhana dengan pendaftaran, tetapi tanpa SMS Anda dapat memulai bot telegram sederhana Anda yang ditulis dalam Bahasa Wolfram.  Dari alat Anda hanya perlu browser. </p><a name="habracut"></a><br><h2 id="nemnogo-pro-oblako-wolfram">  Sedikit tentang cloud Wolfram </h2><br><p>  Untuk mengakses cloud, Anda perlu membuat akun Wolfram.  Untuk melakukan ini, buka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://account.wolfram.com</a> dan ikuti instruksi setelah mengklik tombol Buat Satu. </p><br><p><img src="https://habrastorage.org/webt/rl/er/tc/rlertcegmrslt0ner2zebqfajts.png"></p><br><p>  Setelah semua manipulasi dilakukan, pada halaman utama cloud di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.wolframcloud.com</a> semua produk dan rencana penggunaannya akan ditampilkan.  Anda harus memilih Platform Pengembangan dan membuat buku catatan baru. </p><br><p><img src="https://habrastorage.org/webt/ji/nc/2i/jinc2iwgotacltqm6yh7n2gfboe.png"></p><br><p>  Semua kode yang diberikan nanti akan dieksekusi di cloud notebook khusus ini. </p><br><h2 id="sovsem-nemnogo-o-telegramm-botah">  Cukup banyak tentang bot telegram </h2><br><p>  Ada banyak artikel yang didedikasikan untuk mereka.  Di sini hanya perlu dikatakan bahwa sebelum melakukan semua tindakan lebih lanjut, bot harus dibuat dengan cara standar.  Yaitu, mulailah obrolan dengan bot @BotFather dan kirimkan perintah: </p><br><pre><code class="plaintext hljs">/newbot</code> </pre> <br><p>  Maka Anda hanya perlu mengikuti instruksi dan memasukkan nama dan login.  Biarkan namanya menjadi Wolfram Cloud Bot dan login @ WolframCloud5973827Bot. </p><br><p><img src="https://habrastorage.org/webt/ne/s1/xx/nes1xxki5xcpaumq5f0e6ykboxa.gif"></p><br><h2 id="realizaciya-api">  Implementasi API </h2><br><p>  Kami mengambil keuntungan dari rekomendasi @BotFather dan secara singkat memeriksa API HTTP dari telegram bot.  Tugas menerapkan seluruh API belum layak.  Untuk menulis bot, hanya sebagian kecil saja sudah cukup.  Periksa apakah API dapat diakses dan bot dengan token yang ditentukan di atas ada.  Untuk melakukan ini, cukup lakukan satu baris: </p><br><pre> <code class="plaintext hljs">URLExecute["https://api.telegram.org/bot753681357:AAFqdRFN_QoODJxsBy3VN2sVwWTPKJEqteY/getMe"]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{"ok" -&gt; True, "result" -&gt; {"id" -&gt; 753681357, "is_bot" -&gt; True, "first_name" -&gt; "Wolfram Cloud Bot", "username" -&gt; "WolframCloud5973827Bot"}}</code> </pre> </div></div><br><p>  Perintah di atas adalah cara termudah untuk membuat permintaan HTTP dari Bahasa Wolfram.  Tetapi mari kita sedikit mempersulitnya sehingga mudah untuk menerapkan semua metode API lainnya.  Mari kita buat metode umum untuk mengeksekusi permintaan API: </p><br><pre> <code class="plaintext hljs">TelegramBot::usage = "TelegramBot[token]"; $telegramAPI = "https://api.telegram.org"; telegramExecute[ TelegramBot[token_String], method_String, parameters: {(_String -&gt; _)...}: {} ] := Module[{ request, requestURL, requestRules, requestBody, response, responseBody }, requestURL = URLBuild[{$telegramAPI, "bot" &lt;&gt; token, method}]; requestRules = DeleteCases[parameters, _[_String, Automatic | Null | None]]; requestBody = ImportString[ExportString[requestRules, "JSON"], "Text"]; request = HTTPRequest[requestURL, &lt;| Method -&gt; "POST", "ContentType" -&gt; "application/json; charset=utf-8", "Body" -&gt; requestBody |&gt;]; response = URLRead[request]; responseBody = response["Body"]; Return[ImportString[responseBody, "RawJSON"]] ]</code> </pre> <br><p>  Periksa apakah ini berfungsi pada metode yang sudah diuji di atas: </p><br><pre> <code class="plaintext hljs">token = "753681357:AAFqdRFN_QoODJxsBy3VN2sVwWTPKJEqteY"; bot = TelegramBot[token]; telegramExecute[bot, "getMe"]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;|"ok" -&gt; True, "result" -&gt; &lt;|"id" -&gt; 753681357, "is_bot" -&gt; True, "first_name" -&gt; "Wolfram Cloud Bot", "username" -&gt; "WolframCloud5973827Bot"|&gt;|&gt;</code> </pre> </div></div><br><p>  Bagus  Mari kita buat fungsi terpisah untuk melakukan pemeriksaan bot: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">getMe</a> - informasi bot </li></ul><br><pre> <code class="plaintext hljs">getMe::usage="getMe[bot]"; TelegramBot /: getMe[bot_TelegramBot] := telegramExecute[bot, "getMe"] getMe[bot]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;|"ok" -&gt; True, "result" -&gt; &lt;|"id" -&gt; 753681357, "is_bot" -&gt; True, "first_name" -&gt; "Wolfram Cloud Bot", "username" -&gt; "WolframCloud5973827Bot"|&gt;|&gt;</code> </pre> </div></div><br><p>  Sekarang, dengan cara yang sama, tetap menambahkan metode dasar yang diperlukan untuk membuat bot di cloud: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">getUpdates</a> - mendapatkan semua pesan terbaru yang ditulis ke bot </li></ul><br><pre> <code class="plaintext hljs">getUpdates::usage = "getUpdates[bot, opts]"; Options[getUpdates] = { "offset" -&gt; Automatic, "limit" -&gt; Automatic, "timeout" -&gt; Automatic, "allowed_updates" -&gt; Automatic }; TelegramBot /: getUpdates[bot_TelegramBot, opts: OptionsPattern[getUpdates]] := telegramExecute[bot, "getUpdates", Flatten[{opts}]]</code> </pre> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">setWebhook</a> - menetapkan alamat server untuk memproses pembaruan </li></ul><br><pre> <code class="plaintext hljs">setWebhook::usage = "setWebhook[bot, url, opts]"; Options[setWebhook] = { "certificate" -&gt; Automatic, "max_connections" -&gt; Automatic, "allowed_updates" -&gt; Automatic }; TelegramBot /: setWebhook[bot_TelegramBot, url_String, opts: OptionsPattern[setWebhook]] := telegramExecute[bot, "setWebhook", Join[{"url" -&gt; url}, Flatten[{opts}]]]</code> </pre> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">deleteWebhook</a> - menghapus penangan </li></ul><br><pre> <code class="plaintext hljs">deleteWebhook::usage = "deleteWebhook[bot]"; TelegramBot /: deleteWebhook[bot_TelegramBot] := telegramExecute[bot, "deleteWebhook"]</code> </pre> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">getWebhookInfo</a> - informasi tentang penangan </li></ul><br><pre> <code class="plaintext hljs">getWebhookInfo::usage = "getWebhookInfo[bot]"; TelegramBot /: getWebhookInfo[bot_TelegramBot] := telegramExecute[bot, "getWebhookInfo"]</code> </pre> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sendMessage</a> - mengirim pesan obrolan </li></ul><br><pre> <code class="plaintext hljs">sendMessage::usage = "sendMessage[bot, chat, text]"; Options[sendMessage] = { "parse_mode" -&gt; Automatic, "disable_web_page_preview" -&gt; Automatic, "disable_notification" -&gt; Automatic, "reply_to_message_id" -&gt; Automatic, "reply_markup" -&gt; Automatic }; TelegramBot /: sendMessage[bot_TelegramBot, chat_Integer, text_String, opts: OptionsPattern[sendMessage]] := telegramExecute[ bot, "sendMessage", Join[{"chat_id" -&gt; chat, "text" -&gt; text}, Flatten[{opts}]] ]</code> </pre> <br><p>  Versi minimum API siap.  Mari kita periksa bagaimana mengirim pesan dan menerima pembaruan berfungsi.  Untuk melakukan ini, buat obrolan dengan bot kami.  Ketika bot dibuat, pesan pertama dengan teks / mulai akan dikirim.  Mari kita lihat apakah masuk ke daftar pembaruan: </p><br><pre> <code class="plaintext hljs">updates = getUpdates[bot]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;|"ok" -&gt; True, "result" -&gt; {&lt;|"update_id" -&gt; 570790461, "message" -&gt; &lt;|"message_id" -&gt; 1, "from" -&gt; &lt;|"id" -&gt; 490138492, "is_bot" -&gt; False, "first_name" -&gt; "Kirill", "last_name" -&gt; "Belov", "username" -&gt; "KirillBelovTest"|&gt;, "chat" -&gt; &lt;|"id" -&gt; 490138492, "first_name" -&gt; "Kirill", "last_name" -&gt; "Belov", "username" -&gt; "KirillBelovTest", "type" -&gt; "private"|&gt;, "date" -&gt; 1542182547, "text" -&gt; "/start", "entities" -&gt; {&lt;|"offset" -&gt; 0, "length" -&gt; 6, "type" -&gt; "bot_command"|&gt;}|&gt;|&gt;}|&gt;</code> </pre> </div></div><br><p>  Anda bisa mendapatkan data pembaruan terbaru dari daftar pembaruan sebagai berikut: </p><br><pre> <code class="plaintext hljs">lastUpdate = updates["result"][[-1]]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;|"update_id" -&gt; 570790461, "message" -&gt; &lt;|"message_id" -&gt; 1, "from" -&gt; &lt;|"id" -&gt; 490138492, "is_bot" -&gt; False, "first_name" -&gt; "Kirill", "last_name" -&gt; "Belov", "username" -&gt; "KirillBelovTest"|&gt;, "chat" -&gt; &lt;|"id" -&gt; 490138492, "first_name" -&gt; "Kirill", "last_name" -&gt; "Belov", "username" -&gt; "KirillBelovTest", "type" -&gt; "private"|&gt;, "date" -&gt; 1542182547, "text" -&gt; "/start", "entities" -&gt; {&lt;|"offset" -&gt; 0, "length" -&gt; 6, "type" -&gt; "bot_command"|&gt;}|&gt;|&gt;</code> </pre> </div></div><br><p>  Dan ini adalah bagaimana Anda bisa mendapatkan obrolan dari mana pesan itu berasal dan teks pesan: </p><br><pre> <code class="plaintext hljs">chat = lastUpdate["message", "chat", "id"] text = lastUpdate["message", "text"]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">490138492 /start</code> </pre> </div></div><br><p>  Seperti yang Anda lihat dari hasilnya, semuanya ada di tempatnya.  Sekarang kami akan mengirim pesan atas nama bot menggunakan sendMessage. </p><br><pre> <code class="plaintext hljs">sendMessage[bot, chat, "hello"]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;|"ok" -&gt; True, "result" -&gt; &lt;|"message_id" -&gt; 2, "from" -&gt; &lt;|"id" -&gt; 753681357, "is_bot" -&gt; True, "first_name" -&gt; "Wolfram Cloud Bot", "username" -&gt; "WolframCloud5973827Bot"|&gt;, "chat" -&gt; &lt;|"id" -&gt; 490138492, "first_name" -&gt; "Kirill", "last_name" -&gt; "Belov", "username" -&gt; "KirillBelovTest", "type" -&gt; "private"|&gt;, "date" -&gt; 1542182601, "text" -&gt; "hello"|&gt;| &gt;</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/df/-j/gd/df-jgdfzo0uejbmzxxbuja3koou.gif"></p><br><p>  Secara umum, rangkaian fungsi ini sudah cukup.  Namun, menggunakan metode getUpdates sangat tidak nyaman.  Anda perlu menemukan cara untuk menangani pesan menggunakan webhook. </p><br><h2 id="sozdanie-webhook">  Membuat webhook </h2><br><p>  Wolram Langauge memiliki jenis fungsi khusus yang dibuat menggunakan APIFunction.  Ini adalah contoh dari salah satunya: </p><br><pre> <code class="plaintext hljs">apiFunc = APIFunction[{"n" -&gt; "Integer"}, Plot[Sin[#n * x], {x, -2Pi, 2Pi}]&amp;, "PNG"]; apiFunc[{"n"-&gt;3}]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/tg/jk/vj/tgjkvjwyaje9k8yfqfspnpnwwpi.png"></p></div></div><br><p>  Fitur-fitur ini dirancang khusus untuk ditempatkan di cloud.  Fungsi ini akan menerima satu parameter permintaan sebagai input.  Untuk menyebarkannya di cloud, cukup transfer fungsi itu sendiri ke CloudDeploy. </p><br><pre> <code class="plaintext hljs">apiObject = CloudDeploy[apiFunc, "Deploy/apiObject"]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">CloudObject[https://www.wolframcloud.com/objects/kirillbelovtest/apiObject]</code> </pre> </div></div><br><p>  Kemudian Anda dapat mengikuti tautan di browser dan menambahkan parameter kueri: </p><br><p><img src="https://habrastorage.org/webt/__/th/nt/__thntqsmtke_w8lx_ysyiqagey.gif"></p><br><p>  Fungsi di atas menangani parameter permintaan.  Jadi, Anda perlu membuat fungsi yang sama untuk memproses isi permintaan HTTP yang berasal dari bot telegram dalam bentuk objek Pembaruan.  Untuk menghasilkan alamat, kami menggunakan token untuk mendapatkan akses ke objek cloud lebih sulit.  Anda juga harus menunjukkan bahwa objek memiliki akses publik, jika tidak telegram tidak akan bisa masuk ke webhook. </p><br><pre> <code class="plaintext hljs">deployWebhook[bot_TelegramBot, handler_] := CloudDeploy[APIFunction[{}, handler[HTTPRequestData["Body"]] &amp;], "Deploy/Webhooks/" &lt;&gt; Hash[bot, "SHA", "HexString"], Permissions -&gt; "Public" ]</code> </pre> <br><p>  handler adalah penangan fungsi lain.  Biarkan pawang mengubah string badan permintaan menjadi asosiasi, dapatkan pengenal obrolan dari sana dan kirim kembali kata "halo". </p><br><pre> <code class="plaintext hljs">handlerHello[bot_TelegramBot][body_String] := Block[{json = ImportString[body, "RawJSON"], chat}, chat = json["message", "chat", "id"]; sendMessage[bot, chat, "hello"]; ]</code> </pre> <br><p>  Sekarang gunakan funky di cloud. </p><br><pre> <code class="plaintext hljs">webhookObject = deployWebhook[bot, handlerHello[bot]]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">CloudObject[https://www.wolframcloud.com/objects/kirillbelovtest/Deploy/Webhooks/b9bd74f89348faecd6b683ba02637dd4d4028a28]</code> </pre> </div></div><br><p>  Dan langkah terakhir adalah mentransfer alamat objek ini ke bot telegram. </p><br><pre> <code class="plaintext hljs">setWebhook[bot, webhookObject[[1]]]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Keluar [..]: = ...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;|"ok" -&gt; True, "result" -&gt; True, "description" -&gt; "Webhook was set"|&gt;</code> </pre> </div></div><br><p>  Sekarang kita akan menulis sesuatu untuk bot dan melihat apa yang dikatakannya: </p><br><p><img src="https://habrastorage.org/webt/3l/ft/by/3lftbys5dvmtauvrmvom1wtggtc.gif"></p><br><p>  Dialog dapat dianggap sah.  Untuk mengubah logika dari penangan yang ada, cukup gunakan kembali objek cloud.  Pada saat yang sama, Anda tidak perlu lagi memasang webhook untuk bot. </p><br><h2 id="logika-otvetov">  Logika jawaban </h2><br><p>  Ini akan menjadi bagian terakhir dalam proses membuat bot di cloud Wolfram.  Lebih lanjut, dengan cara yang sama, Anda dapat menyulitkan logika dan menambahkan metode API baru.  Sekarang tentang dialog itu sendiri.  Misalkan setelah mengirim perintah / mulai, bot mengembalikan respons "Halo" dan mengubah keyboard pengguna.  Hanya dua tombol yang tersisa di keyboard: "Halo" dan "Siapa kamu?"  Kami menyadari dialog dalam bentuk asosiasi.  Kunci akan menjadi perintah yang dikirim pengguna ke bot.  Nilai kuncinya adalah respons bot itu sendiri dan keyboard baru.  Dalam hal ini, banyak tombol dan tombol harus sama persis.  Jika tidak, suatu situasi dapat muncul ketika bot tidak tahu harus menjawab apa.  Dalam kasus seperti itu, tentu saja, Anda dapat menambahkan jawaban default. </p><br><pre> <code class="plaintext hljs">keyboard[buttons : {__String}] := {"keyboard" -&gt; {Table[{"text" -&gt; button}, {button, buttons}]}, "resize_keyboard" -&gt; True} $answers = &lt;| (*user_text-&gt;&lt;|"answer"-&gt;bot_text,"keyboard"-&gt;next_text|&gt;*) "/start"-&gt;&lt;|"answer"-&gt;"","keyboard"-&gt; keyboard[{""," ?"}]|&gt;, ""-&gt;&lt;|"answer"-&gt;" ?", "keyboard" -&gt; keyboard[{" ?"}]|&gt; , " ?"-&gt;&lt;|"answer"-&gt;"", "keyboard" -&gt; keyboard[{""}]|&gt; , " ?"-&gt;&lt;|"answer"-&gt;"   Wolfram Language   ", "keyboard"-&gt;keyboard[{" ?"," ?"}]|&gt; , " ?"-&gt;&lt;|"answer"-&gt;"   :\nhttps://habr.com/post/422517/", "keyboard"-&gt;keyboard[{""," ?"}]|&gt; , " ?"-&gt;&lt;|"answer"-&gt;"  :\n@KirillBelovTest", "keyboard"-&gt;keyboard[{" ?",""}]|&gt; , ""-&gt;&lt;|"answer"-&gt;"", "keyboard"-&gt;keyboard[{""," ?"}]|&gt; |&gt;; answer[text_String] /; KeyExistsQ[$answers, text] := $answers[text]</code> </pre> <br><p>  Sekarang buat penangan: </p><br><pre> <code class="plaintext hljs">handlerAbout[bot_TelegramBot][body_String] := Block[{json = ImportString[body, "RawJSON"], chat, text}, chat = json["message", "chat", "id"]; text = json["message", "text"]; sendMessage[bot, chat, answer[text]["answer"], "reply_markup" -&gt; answer[text]["keyboard"]]; ]</code> </pre> <br><p>  Dan gunakan kembali objek cloud: </p><br><pre> <code class="plaintext hljs">deployWebhook[bot, handlerAbout[bot]];</code> </pre> <br><p>  Mari kita verifikasi apa yang terjadi dalam obrolan dengan bot.  Tapi pertama-tama, mari kita hapus riwayat pesan: </p><br><p><img src="https://habrastorage.org/webt/ar/rr/j0/arrrj0gaxdyrhcysog_vxleb4hw.gif"></p><br><h2 id="rasshirenie-funkcionalnosti">  Perpanjangan fungsi </h2><br><p>  Sejauh ini, tidak ada perbedaan mendasar dari sejumlah besar bot yang ada.  Mungkin tidak ada gunanya meminumnya juga?  Arti dari semua pekerjaan yang dilakukan di atas adalah, jika Anda mengerti apa keuntungan dari bot seperti itu!  Bagaimanapun, ia dapat menggunakan semua fitur Bahasa Wolfram dan Wolrfam Cloud.  Apakah perlu bagi robot untuk menyelesaikan persamaan?  Sangat mudah!  Anda hanya perlu mendefinisikan ulang jawabannya! </p><br><pre> <code class="plaintext hljs">answer[text_String]["keyboard"] /; StringContainsQ[text, "  "] := Automatic answer[text_String]["answer"] /; StringContainsQ[text, "  "] := ToString[Flatten[Block[{args = StringSplit[text, "  "]}, Solve[ToExpression[args[[1]]], ToExpression[args[[2]]]] ]]] deployWebhook[bot, handlerAbout[bot]];</code> </pre> <br><p><img src="https://habrastorage.org/webt/ei/wc/ex/eiwcexe7iqdlhdtolosjrialh8q.gif"></p><br><p>  Jika seseorang tambahan memiliki minat pada kemampuan cloud, maka deskripsi yang baik tentang fungsinya ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><h2 id="ogranicheniya">  Keterbatasan </h2><br><p>  Wolfram Cloud adalah platform yang memungkinkan Anda menggunakan bahasa Wolfram secara gratis, sedangkan produk utama Wolfram Research, Mathematica, membutuhkan biaya.  Oleh karena itu, ada batasan penggunaan dan menurut pendapat saya mereka sangat kuat.  Saat menggunakan versi gratis Platform Pengembangan, pengguna diberikan 1.000 kredit cloud per bulan.  Setiap pinjaman cloud memberikan waktu untuk menghitung jenis yang berbeda.  Karena artikel tersebut berbicara tentang CloudDeploy + APIFunction, objek yang disimpan di cloud menghabiskan 1 kredit dalam 0,1 detik waktu komputasi.  Sangat mudah untuk menghitung bahwa pengguna diberikan gratis hanya 1 menit dan 40 detik waktu server untuk pengoperasian aplikasinya (dalam hal ini, bot).  Saya tidak perlu menambahkan apa pun di sini - ini sangat, sangat kecil.  Penekanan utama adalah pada pengguna yang bekerja secara mandiri di Platform Pengembangan menggunakan browser.  Memang, dalam mode ini tidak ada batas waktu, tetapi hanya sesuai dengan durasi sesi dan sumber daya yang dialokasikan.  Dengan penggunaan ini, Platform Pengembangan hampir menjadi Mathematica penuh, tetapi tidak memerlukan instalasi dan lisensi. </p><br><p>  ‚Üí <a href="">Artikel dan kode di Wolfram Cloud</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422517/">https://habr.com/ru/post/id422517/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422507/index.html">PHP 7.3. Apa yang baru?</a></li>
<li><a href="../id422509/index.html">Ringkasan buku "Never Eat Alone"</a></li>
<li><a href="../id422511/index.html">Memuat data ke dalam Splunk: Universal Forwarder vs Heavy Forwarder. Apa bedanya?</a></li>
<li><a href="../id422513/index.html">7 tips tentang cara tidak membuat marah kolega penguji di liburannya</a></li>
<li><a href="../id422515/index.html">Dua Apache Ignite mitaps dan In-Memory Computing webinar pada bulan September</a></li>
<li><a href="../id422519/index.html">Distribusi Freebie: Thread Non-Pengereman di Jawa. Proyek tenun</a></li>
<li><a href="../id422521/index.html">Firasat akan hal yang tak terhindarkan</a></li>
<li><a href="../id422525/index.html">"Matriks persahabatan." Grafik sosial tertua untuk yang terkecil</a></li>
<li><a href="../id422527/index.html">Intisari berita PostgreSQL. Edisi 10</a></li>
<li><a href="../id422529/index.html">Kursus Spesial Group-IB: "Keamanan Aplikasi Seluler"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>