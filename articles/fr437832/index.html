<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìº ü•® üíΩ Open source: humour de code, astuces de code, PAS de code üï¥üèø ü§∑üèø üë®üèº‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En fouillant dans un logiciel open source diversifi√©, je trouve p√©riodiquement toutes sortes de choses int√©ressantes: parfois c'est juste un commentai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Open source: humour de code, astuces de code, PAS de code</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437832/"><p><img src="https://habrastorage.org/webt/ns/bp/do/nsbpdo-3rgtiavelrrlgrxkgluc.jpeg" alt="Old GLib vs New Clang"></p><br><p>  En fouillant dans un logiciel open source diversifi√©, je trouve p√©riodiquement toutes sortes de choses int√©ressantes: parfois c'est juste un commentaire dr√¥le, parfois c'est quelque chose d'esprit dans un sens plus large.  Des collections similaires apparaissent p√©riodiquement √† la fois sur "l'Internet mondial" et sur Habr√© - par exemple, il y a une question bien connue sur StackOverflow concernant les commentaires dans le code, et une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©lection de</a> noms amusants d'entit√©s juridiques et de toponymes a r√©cemment √©t√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publi√©e</a> ici.  Je vais essayer de structurer et d'exposer ce que j'ai progressivement accumul√©.  Sous la coupe, des citations de QEMU, du noyau Linux et bien plus vous attendent. </p><a name="habracut"></a><br><h2 id="linux-kernel">  Noyau Linux </h2><br><p> Je pense que pour beaucoup, ce n'est un secret pour personne que les lettres de la liste de diffusion du noyau Linux divergent p√©riodiquement entre guillemets.  Examinons donc mieux le code.  Et imm√©diatement, le syst√®me d'assemblage du noyau nous surprend: comme vous le savez, les projets construits par Autoconf ont un Makefile avec deux objectifs standard de nettoyage: <code>clean</code> et <code>distclean</code> .  Naturellement, le noyau n'est pas construit en utilisant Autoconf, et ce que seul <code>menuconfig</code> vaut, donc il y a plus d'objectifs ici: <code>clean</code> , <code>distclean</code> et <code>mrproper</code> - oui, oui, Mr.Proper, <del>  un nettoyeur de noyau deux fois plus rapide </del>  . </p><br><p>  En parlant du syst√®me de configuration: il √©tait une fois j'ai √©t√© surpris quand je l'ai rencontr√© en plus de commandes claires comme <code>allnoconfig</code> , <code>allyesconfig</code> (je soup√ßonne que quelque chose de <em>tr√®s d√©bogage</em> peut √™tre compil√©, donc maintenant je ne risquerais pas de le t√©l√©charger sur du vrai mat√©riel .. .) et <code>allmodconfig</code> √† la myst√©rieuse cible <code>allrandconfig</code> .  ¬´Sont-ils moqueurs¬ª, ai-je pens√©, puis j'ai parl√© √† mon ami de cette observation, √† laquelle il a r√©pondu que c'√©tait probablement une commande tout √† fait significative, mais pas pour un assemblage r√©el, mais pour tester l'exactitude de l'arrangement des d√©pendances entre les options - comme je l'ai dit serait maintenant, une sorte de param√®tres de configuration fuzzing. </p><br><p>  Cependant, il y a de la vie au-del√† du syst√®me d'assemblage: la documentation est parfois non seulement technique, mais aussi, d'une sorte, de valeur artistique.  Supposons que vous souhaitiez alerter les utilisateurs du mode veille de sa fragilit√© et du risque de perte de donn√©es si certaines r√®gles ne sont pas suivies.  J'√©crirais tristement, en disant <em>ATTENTION: &lt;remplacez quelques-unes des lignes les plus ennuyeuses&gt;</em> .  Mais le d√©veloppeur qui a √©crit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cela a fait quelque chose de</a> diff√©rent: </p><br><pre> <code class="plaintext hljs">Some warnings, first. * BIG FAT WARNING ********************************************************* * * If you touch anything on disk between suspend and resume... * ...kiss your data goodbye. * * If you do resume from initrd after your filesystems are mounted... * ...bye bye root partition. * [this is actually same case as above] * * ...</code> </pre> <br><h3 id="malenkie-hitrosti">  Petits trucs </h3><br><p>  Il n'est pas surprenant que tous les codes ne puissent pas √™tre compil√©s avec des optimisations: lorsque j'ai essay√© de les forcer √† √™tre activ√©s pour tous les fichiers objet, j'ai naturellement rencontr√© une source d'entropie ou quelque chose de similaire que <code>#error</code> si l'optimisation √©tait activ√©e.  Eh bien, la cryptographie est comme √ßa.  Mais voulez-vous un code qui ne sera pas assembl√© si vous <strong>d√©sactivez</strong> toutes les optimisations, les alignements, etc.?  Comment est-ce possible?  Et ceci est une telle affirmation statique: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* SPDX-License-Identifier: GPL-2.0 */</span></span> <span class="hljs-comment"><span class="hljs-comment">// ... /* * This function doesn't exist, so you'll get a linker error if * something tries to do an invalidly-sized xchg(). */ extern void __xchg_called_with_bad_pointer(void); static inline unsigned long __xchg(unsigned long x, volatile void *ptr, int size) { unsigned long ret, flags; switch (size) { case 1: #ifdef __xchg_u8 return __xchg_u8(x, ptr); #else local_irq_save(flags); ret = *(volatile u8 *)ptr; *(volatile u8 *)ptr = x; local_irq_restore(flags); return ret; #endif /* __xchg_u8 */ // ... default: __xchg_called_with_bad_pointer(); return x; } }</span></span></code> </pre> <br><p>  Il est suppos√©, apparemment, que pour toute utilisation avec un argument constant, cette fonction se d√©veloppera en une seule branche de <code>switch</code> , et lorsqu'elle est utilis√©e avec un argument <em>valide</em> , cette branche ne sera pas <code>default:</code> <br>  Sous une forme non optimis√©e, cette fonction entra√Ænera une erreur de lien presque par conception ... </p><br><h3 id="znaete-li-vy">  Tu sais </h3><br><ul><li>  ... que le noyau poss√®de un compilateur JIT de bytecode en mode utilisateur?  Cette technologie est appel√©e eBPF et est utilis√©e pour le routage, le tra√ßage et bien plus encore.  Soit dit en passant, si vous n'avez pas peur des outils exp√©rimentaux "nucl√©aires", regardez le paquet bpftools. </li><li>  ... que le noyau peut durer environ cinq minutes de temps processeur?  Il existe un tel appel syst√®me <code>sendfile</code> qui copie des octets d'un descripteur de fichier √† un autre.  Si vous lui dites le m√™me descripteur et d√©finissez le d√©calage correct dans le fichier, il rembobinera les m√™mes donn√©es jusqu'√† ce qu'il copie 2 Go. </li><li>  ... qu'il existe une variante du travail d'hibernation effectu√© par le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">processus utilisateur</a> - je ne serais pas surpris si vous pouvez √©galement l'enregistrer sur le stockage r√©seau. </li></ul><br><h2 id="qemu">  QEMU </h2><br><p>  En g√©n√©ral, lorsque j'ai lu Robert Love sur le p√©riph√©rique du noyau Linux, puis que j'ai grimp√© dans les sources QEMU, j'ai eu un certain sentiment de d√©j√†-vu.  Il y avait des listes int√©gr√©es dans les structures par valeur (et non pas comme dans le cours de programmation initial qu'ils apprennent - √† travers des pointeurs), et un certain sous-syst√®me RCU (ce que c'est, je ne comprenais toujours pas compl√®tement, mais il existe √©galement dans le noyau) et, probablement beaucoup plus similaire. </p><br><p>  Quelle est la premi√®re chose qu'une personne soign√©e veut travailler sur un projet pour apprendre √† conna√Ætre?  Probablement avec le style de codage.  Et d√©j√† dans cela, on pourrait dire, c√©r√©monial, document, nous voyons: </p><br><pre> <code class="plaintext hljs">1. Whitespace Of course, the most important aspect in any coding style is whitespace. Crusty old coders who have trouble spotting the glasses on their noses can tell the difference between a tab and eight spaces from a distance of approximately fifteen parsecs. Many a flamewar has been fought and lost on this issue.</code> </pre> <br><p>  Voici l'√©ternelle question sur la longueur de ligne maximale: </p><br><pre> <code class="plaintext hljs">Lines should be 80 characters; try not to make them longer. ... Rationale: - Some people like to tile their 24" screens with a 6x4 matrix of 80x24 xterms and use vi in all of them. The best way to punish them is to let them keep doing it. ...</code> </pre> <br><p>  <em>(Hmm ... Il est deux fois plus grand sur chaque axe que j'utilise parfois. Est-ce un tel Linux HD?)</em> </p><br><p>  Il y a encore beaucoup d'int√©ressant - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lire</a> . </p><br><h3 id="i-snova-hitrosti">  Et encore des astuces </h3><br><p>  Ils disent que C est un langage de bas niveau.  Mais s'il est bon d'√™tre perverti, vous pouvez montrer les merveilles de la g√©n√©ration de code √† la compilation sans Scala ni m√™me C ++. </p><br><p>  Par exemple, le fichier softmmu_template.h est <code>softmmu_template.h</code> dans la base de code QEMU.  Quand j'ai vu ce nom, j'ai pens√© qu'il √©tait cens√© √™tre copi√© dans mon impl√©mentation de backend TCG et modifi√© jusqu'√† ce que l'impl√©mentation TLB correcte en sorte.  Peu importe comment!  Voici comment l'utiliser <strong>correctement</strong> : </p><br><p>  <strong>accel / tcg / cputlb.h:</strong> </p><br><pre> <code class="cpp hljs">define DATA_SIZE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_SIZE 2 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_SIZE 4 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_SIZE 8 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span></span></code> </pre> <br><p>  Comme vous pouvez le voir, tour de passe-passe et pas de C ++.  Mais ceci est un exemple assez simple.  Et quelque chose de plus compliqu√©? </p><br><p>  Il existe un tel fichier: <strong>tcg / tcg-opc.h</strong> .  Son contenu est plut√¥t myst√©rieux et ressemble √† ceci: </p><br><pre> <code class="cpp hljs">... DEF(mov_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, TCG_OPF_NOT_PRESENT) DEF(movi_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, TCG_OPF_NOT_PRESENT) DEF(setcond_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(movcond_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, IMPL(TCG_TARGET_HAS_movcond_i32)) <span class="hljs-comment"><span class="hljs-comment">/* load/store */</span></span> DEF(ld8u_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(ld8s_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(ld16u_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(ld16s_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) ...</code> </pre> <br><p>  En fait, tout est tr√®s simple - il est utilis√© comme ceci: </p><br><p>  <strong>tcg / tcg.h:</strong> </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> TCGOpcode { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DEF(name, oargs, iargs, cargs, flags) INDEX_op_ ## name, #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"tcg-opc.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> DEF NB_OPS, } TCGOpcode;</span></span></code> </pre> <br><p>  Ou alors: </p><br><p>  <strong>tcg / tcg-common.c:</strong> </p><br><pre> <code class="cpp hljs">TCGOpDef tcg_op_defs[] = { #define DEF(s, oargs, iargs, cargs, flags) \ { #s, oargs, iargs, cargs, iargs + oargs + cargs, flags }, #include <span class="hljs-string"><span class="hljs-string">"tcg-opc.h"</span></span> #undef DEF };</code> </pre> <br><p>  Il est m√™me √©trange qu'au cours d'autres cas d'utilisation il n'ait pas √©t√© trouv√©.  Et notez, dans ce cas, il n'y a pas de scripts d√©licats pour la g√©n√©ration de code - seulement C, seulement hardcore. </p><br><h3 id="znaete-li-vy-1">  Tu sais </h3><br><ul><li>  ... que QEMU peut fonctionner non seulement dans le mode d'√©mulation d'un syst√®me complet, mais √©galement ex√©cuter un processus distinct pour une autre architecture qui communique avec le noyau h√¥te? </li></ul><br><h2 id="java-jvm-i-vse-vse-vse">  Java, JVM et tout-tout </h2><br><p>  Que suis-je tout au sujet de Linux?  Parlons de quelque chose de multiplateforme.  √Ä propos de la JVM, par exemple.  Eh bien, √† propos de GraalVM, probablement, de nombreux d√©veloppeurs de cet √©cosyst√®me ont d√©j√† entendu parler.  Si vous ne l'avez pas entendu, alors en bref: c'est √©pique.  Donc, apr√®s avoir parl√© de Graal, passons √† la bonne vieille JVM. </p><br><p>  Parfois, la machine virtuelle Java doit arr√™ter tous les threads g√©r√©s - l'√©tape de collecte des ordures est tellement accrocheuse ou autre - mais le probl√®me est que vous ne pouvez arr√™ter les threads que sur les soi-disant points de s√©curit√©.  Comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©crit ici</a> , une v√©rification normale d'une variable globale prend beaucoup de temps, y compris une sorte de chamanisme avec des barri√®res de m√©moire.  Qu'ont fait les d√©veloppeurs?  Ils se sont limit√©s √† une lecture variable. </p><br><div class="spoiler">  <b class="spoiler_title">Presque comme dans HQ9 +</b> <div class="spoiler_text"><p>  Il y a un tel langage comique - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HQ9 +</a> .  Il a √©t√© cr√©√© comme un "langage de programmation p√©dagogique tr√®s pratique", √† savoir, il est tr√®s simple d'effectuer les t√¢ches typiques que les √©tudiants demandent: </p><br><ul><li>  l'interpr√©teur de commandes ¬´H¬ª imprime Bonjour tout le monde! </li><li>  √† la commande 'Q' imprime le texte du programme lui-m√™me (quine) </li><li>  sur '9', il imprime les paroles de <em>99 bouteilles de bi√®re</em> </li><li>  par ¬´i¬ª, il incr√©mente la variable <strong>i</strong> d'une unit√© </li><li>  <em>il ne peut rien faire d'autre, mais pourquoi? ..</em> </li></ul></div></div><br><p>  Comment la JVM atteint-elle cet objectif avec une seule instruction?  Mais c'est tr√®s simple - s'il est n√©cessaire d'arr√™ter, il supprime l'affichage de la page m√©moire avec cette variable - les threads tombent sur SIGSEGV, et la JVM les parcourt et les met en pause √† la fin de la "maintenance".  Je me souviens sur StackOverflow lorsqu'on lui a demand√© lors d'une interview <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment planter une JVM?</a>  r√©pondu: </p><br><blockquote>  JNI.  En fait, avec JNI, le plantage est le mode de fonctionnement par d√©faut.  Vous devez travailler tr√®s dur pour qu'il ne plante pas. </blockquote><p>  Blague comme une blague, et parfois dans la JVM, c'est vraiment le cas. </p><br><p>  Eh bien, puisque j'ai mentionn√© la g√©n√©ration de code dans Scala, et nous ne parlons que de cet √©cosyst√®me maintenant, voici un fait int√©ressant pour vous: la g√©n√©ration de code dans Scala (celle qui a des macros) est structur√©e comme ceci: vous √©crivez du code dans Scala en utilisant l'API compilateur et compilez-le.  Ensuite, au prochain d√©marrage du compilateur, vous passez simplement le g√©n√©rateur de code r√©sultant au chemin de classe du compilateur lui-m√™me, et celui-ci, en voyant une directive sp√©ciale, l'appelle, en passant les arbres de syntaxe re√ßus pendant l'appel.  En r√©ponse, il re√ßoit un AST, qui doit √™tre remplac√© au lieu de l'appel. </p><br><h3 id="osobennosti-ideologiy-licenzirovaniya">  Caract√©ristiques des id√©ologies de licence </h3><br><p>  J'aime l'id√©ologie du logiciel libre, mais il a aussi des fonctionnalit√©s amusantes. </p><br><p>  Il y a une dizaine d'ann√©es, j'ai mis √† jour mon √©curie Debian et, en pensant √† la syntaxe d'une commande, j'ai typ√© <code>man &lt;&gt;</code> , qui a re√ßu une description exhaustive comme ¬´[nom du programme] est un programme avec de la documentation distribu√©e sous licence GNU GFDL avec des sections immuables, qui n'est pas exempt de DFSG. "  <em>Ils disent que ce programme a √©t√© √©crit par des propri√©taires mal√©fiques de certains FSF ...</em> (Maintenant, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">discussion</a> est google.) </p><br><p>  Et certaines biblioth√®ques, petites mais importantes, sont consid√©r√©es par certaines distributions comme des logiciels non libres, car l'auteur a √©crit √† la licence permissive standard que <em>ce programme devrait √™tre utilis√© pour le bien et non pour le mal</em> .  Rires, rires, et moi aussi, j'aurais probablement peur de prendre une telle chose en production - on ne sait jamais ce que l'auteur pense du bien et du mal. </p><br><h2 id="vsyakoe-raznoe">  Divers </h2><br><h3 id="osobennosti-internacionalnogo-kompilyatorostroeniya-v-period-zakona-mura">  Caract√©ristiques de la construction de compilateurs internationaux sous la loi Moore </h3><br><p>  Les d√©veloppeurs LLVM s√©v√®res ont limit√© l'alignement pris en charge: </p><br><blockquote>  L'alignement maximum est de 1 &lt;&lt; 29. </blockquote><p>  Comme on dit, cela <em>vous fait d'abord rire, puis r√©fl√©chir</em> : la premi√®re pens√©e - mais qui a besoin d'un alignement √† 512 Mio.  Ensuite, j'ai lu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le d√©veloppement du noyau dans Rust</a> , et l√† ils proposent de faire une structure de "page table" align√©e sur 4096 octets.  Et comment <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lisez-vous</a> Wikipedia, donc g√©n√©ralement: </p><br><blockquote>  Une hi√©rarchie de mappage compl√®te de pages de 4 Ko pour l'ensemble de l'espace 48 bits prendrait un peu plus de 512 Go de m√©moire (environ 0,195% de l'espace virtuel de 256 To). </blockquote><br><h3 id="versiya-formata-----kak-hranit">  Format de la version - comment stocker? </h3><br><p>  Une fois, j'ai d√©cid√© de comprendre pourquoi l'exportation ne fonctionne pas dans un seul programme, <em>mais cela fonctionne</em> ... Ou pas? </p><br><p>  Ayant d√©marr√© les commandes backend manuellement, je me suis rendu compte qu'en principe, tout est en ordre, seule la version doit √™tre transmise en "2.0", mais juste "2" en laisse.  Anticipant une correction triviale en √©ditant une constante de cha√Æne, je trouve la fonction <code>double getVersion()</code> - mais quoi, majeur est, mineur est, m√™me il y a un point!  Cependant, au final, tout a √©t√© d√©cid√© pas beaucoup plus compliqu√© que pr√©vu, je <del>  pr√©cision de sortie am√©lior√©e </del>  Transf√©r√© le type de donn√©es et transf√©r√© les lignes. </p><br><h3 id="o-raznice-mezhdu-teoretikami-i-praktikami">  √Ä propos de la diff√©rence entre th√©oriciens et praticiens </h3><br><p>  √Ä mon avis, quelque part sur Habr√© j'ai d√©j√† vu une traduction d'un article sur ce que sont les plantages minimaux au d√©marrage, mais toujours un programme compil√© en C? <code>int main;</code>  - il y a un symbole <code>main</code> , et <em>techniquement</em> , vous pouvez lui transf√©rer le contr√¥le.  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">sirikid a</a> correctement remarqu√© que m√™me les octets <code>int</code> sont superflus ici.</em>  <em>En g√©n√©ral, m√™me en parlant d'un programme de 9 octets, il vaut mieux ne pas disperser les affirmations selon lesquelles il <strong>est le</strong> plus petit ...</em> Vrai, le programme va tomber, mais cela est tout √† fait conforme aux r√®gles. </p><br><p>  Donc, nous savons comment supprimer ce qui devrait fonctionner, mais qu'en est-il du lancement d'un non-lancement? </p><br><pre> <code class="plaintext hljs">$ ldd /bin/ls linux-vdso.so.1 (0x00007fff93ffa000) libselinux.so.1 =&gt; /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f0b27664000) libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f0b2747a000) libpcre.so.3 =&gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f0b27406000) libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f0b27400000) /lib64/ld-linux-x86-64.so.2 (0x00007f0b278e9000) libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f0b273df000) $ /lib/x86_64-linux-gnu/libc.so.6</code> </pre> <br><p>  ... et lib√©rez-le <del>  voix humaine </del>  : </p><br><pre> <code class="plaintext hljs">GNU C Library (Ubuntu GLIBC 2.28-0ubuntu1) stable release version 2.28. Copyright (C) 2018 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. Compiled by GNU CC version 8.2.0. libc ABIs: UNIQUE IFUNC ABSOLUTE For bug reporting instructions, please see: &lt;https://bugs.launchpad.net/ubuntu/+source/glibc/+bugs&gt;.</code> </pre> <br><h3 id="programmisty-igrayut-v-golf">  Les programmeurs jouent au golf </h3><br><p>  Il y a tout un site sur StackExchange consacr√© au Code Golf - des comp√©titions avec le style "R√©soudre ce probl√®me avec une p√©nalit√© minimale, selon la taille du code source."  Le format lui-m√™me implique des solutions tr√®s sophistiqu√©es, mais parfois elles deviennent tr√®s sophistiqu√©es.  Par cons√©quent, dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une des questions</a> , une collection d'√©chappatoires standard interdites a √©t√© collect√©e.  J'aime particuli√®rement celui-ci: </p><br><blockquote>  Utilisation de MetaGolfScript <br>  MetaGolfScript est une famille de langages de programmation.  Par exemple, le programme vide dans MetaGolfScript-209180605381204854470575573749277224 imprime "Hello, World!". </blockquote><br><h2 id="odnoy-strokoy">  En une seule ligne </h2><br><ul><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le bool non initialis√© qui a plant√© le programme</a> , ou o√π un comportement ind√©fini conduit </p><br></li><li><p>  ... qui, soit dit en passant, est magique.  Quelqu'un dans LLVM a plaisant√© le 1er avril, et un autre a fait un rapport √† ce sujet: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mon petit optimiseur: un comportement ind√©fini est magique</a> </p><br></li><li><p>  Rappelez-vous l'appel ambigu pour f√©liciter les d√©veloppeurs de logiciels open source dans le tracker?  Chez Binaryen, il a √©t√© mis en ≈ìuvre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">simplement et avec go√ªt</a> : </p><br><blockquote>  <strong>Probl√®me:</strong> ce projet est INCROYABLE <br>  <strong>R√©solution:</strong> wontfix, fonctionne comme pr√©vu </blockquote><br></li><li><p>  en f√©vrier 2009, une personne a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pos√© une question</a> sur StackOverflow: "Comment faire ceci et ce navigateur crois√©? Ou bien, <em>Trois navigateurs qui fonctionnent sont super et qui utilise Chrome quand m√™me?</em> " </p><br></li></ul><br><p>  Enfin, d'o√π vient le titre de l'article?  Ceci est une astuce paraphras√©e √† partir de la sortie du compilateur <code>emcc</code> d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Emscripten</a> : </p><br><pre> <code class="plaintext hljs">$ emcc --help ... emcc: supported targets: llvm bitcode, javascript, NOT elf (autoconf likes to see elf above to enable shared object support)</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437832/">https://habr.com/ru/post/fr437832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437820/index.html">50 nuances de s√©curit√© Drupal</a></li>
<li><a href="../fr437824/index.html">Extension universelle 1C pour Google Sheets et Docs - prendre et utiliser</a></li>
<li><a href="../fr437826/index.html">Comment nous avons migr√© la base de donn√©es de Redis et Riak KV vers PostgreSQL. Partie 1: le processus</a></li>
<li><a href="../fr437828/index.html">Webinaire ouvert "SELECT ordre d'ex√©cution des requ√™tes et plan de requ√™te dans MS SQL Server"</a></li>
<li><a href="../fr437830/index.html">Programmation fiable par langage - revue noob. Partie 1</a></li>
<li><a href="../fr437834/index.html">Deux histoires sur la fa√ßon dont les √©v√©nements de programmation ont eu lieu √† Iekaterinbourg</a></li>
<li><a href="../fr437836/index.html">Under the hood Screeps - virtualisation dans le sandbox MMO pour les programmeurs</a></li>
<li><a href="../fr437838/index.html">Les technologies d'apprentissage automatique acc√©l√®rent parfois le processus d'adaptation des patients aux proth√®ses bioniques</a></li>
<li><a href="../fr437842/index.html">L'histoire secr√®te de Donkey Kong: des machines d'arcade √† NES</a></li>
<li><a href="../fr437844/index.html">Les conflits persistants entre le typage statique et le typage dynamique - TypeScript n'aidera pas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>