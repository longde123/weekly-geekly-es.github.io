<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ»â€ğŸ¤ ğŸ‘‰ğŸ¾ ğŸ‘ VueJSä¸Šçš„ç®€å•å›¾åƒç¼–è¾‘å™¨ ğŸ—» ğŸ‘©â€ğŸ³ ğŸ—¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ€è¿‘ï¼Œæˆ‘æœ‰æœºä¼šä¸ºåœ¨çº¿å•†åº—ç¼–å†™æœåŠ¡ï¼Œè¿™å°†æœ‰åŠ©äºä¸‹è®¢å•æ‰“å°æˆ‘çš„ç…§ç‰‡ã€‚ 

 è¯¥æœåŠ¡å‡å®šäº†ä¸€ä¸ªâ€œç®€å•â€çš„å›¾åƒç¼–è¾‘å™¨ï¼Œæˆ‘æƒ³åˆ†äº«è¯¥åˆ›å»ºå™¨ã€‚ æ‰€æœ‰è¿™äº›éƒ½æ˜¯å› ä¸ºåœ¨å„ç§å„æ ·çš„æ’ä»¶ä¸­ï¼Œæˆ‘æ‰¾ä¸åˆ°åˆé€‚çš„åŠŸèƒ½ï¼Œæ­¤å¤–ï¼ŒCSSè½¬æ¢çš„ç»†å¾®å·®åˆ«å¯¹æˆ‘æ¥è¯´çªç„¶å˜æˆäº†ä¸€ä»¶ä¸å¹³å‡¡çš„ä»»åŠ¡ã€‚ 



 ä¸»è¦ä»»åŠ¡ï¼š 


1. èƒ½å¤Ÿä»æ‚¨çš„è®¾å¤‡ï¼Œ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VueJSä¸Šçš„ç®€å•å›¾åƒç¼–è¾‘å™¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417697/"> æœ€è¿‘ï¼Œæˆ‘æœ‰æœºä¼šä¸ºåœ¨çº¿å•†åº—ç¼–å†™æœåŠ¡ï¼Œè¿™å°†æœ‰åŠ©äºä¸‹è®¢å•æ‰“å°æˆ‘çš„ç…§ç‰‡ã€‚ <br><br> è¯¥æœåŠ¡å‡å®šäº†ä¸€ä¸ªâ€œç®€å•â€çš„å›¾åƒç¼–è¾‘å™¨ï¼Œæˆ‘æƒ³åˆ†äº«è¯¥åˆ›å»ºå™¨ã€‚ æ‰€æœ‰è¿™äº›éƒ½æ˜¯å› ä¸ºåœ¨å„ç§å„æ ·çš„æ’ä»¶ä¸­ï¼Œæˆ‘æ‰¾ä¸åˆ°åˆé€‚çš„åŠŸèƒ½ï¼Œæ­¤å¤–ï¼ŒCSSè½¬æ¢çš„ç»†å¾®å·®åˆ«å¯¹æˆ‘æ¥è¯´çªç„¶å˜æˆäº†ä¸€ä»¶ä¸å¹³å‡¡çš„ä»»åŠ¡ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/884/ce8/2b3/884ce82b3d7a7c04c28705fd678fa6aa.jpg" alt="å›¾ç‰‡"><br><a name="habracut"></a><br><h3> ä¸»è¦ä»»åŠ¡ï¼š </h3><br><ol><li> èƒ½å¤Ÿä»æ‚¨çš„è®¾å¤‡ï¼ŒGoogleäº‘ç«¯ç¡¬ç›˜å’ŒInstagramä¸Šä¼ å›¾åƒã€‚ </li><li> å›¾åƒç¼–è¾‘ï¼šç§»åŠ¨ï¼Œæ—‹è½¬ï¼Œæ°´å¹³å’Œå‚ç›´åå°„ï¼Œç¼©æ”¾ï¼Œè‡ªåŠ¨å›¾åƒå¯¹é½ä»¥å¡«å……è£åˆ‡åŒºåŸŸã€‚ </li></ol><br> å¦‚æœè¿™ä¸ªè¯é¢˜å¾ˆæœ‰è¶£ï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ä¸ªå‡ºç‰ˆç‰©ä¸­è¯¦ç»†ä»‹ç»åº”ç”¨ç¨‹åºåç«¯éƒ¨åˆ†ä¸Google Driveå’ŒInstagramçš„é›†æˆï¼Œå…¶ä¸­ä½¿ç”¨äº†æµè¡Œçš„NodeJS + Expressç»„åˆã€‚ <br><br> å¯¹äºå‰ç«¯çš„ç»„ç»‡ï¼Œæˆ‘é€‰æ‹©äº†å‡ºè‰²çš„Vueæ¡†æ¶ã€‚ åªæ˜¯å› ä¸ºå®ƒåœ¨Angularå’Œçƒ¦äººçš„Reactä¹‹åæ¿€å‘äº†æˆ‘çš„çµæ„Ÿã€‚ æˆ‘è®¤ä¸ºæè¿°ä½“ç³»ç»“æ„ï¼Œè·¯çº¿å’Œå…¶ä»–ç»„ä»¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œè®©æˆ‘ä»¬ç›´æ¥å»ç¼–è¾‘å™¨ã€‚ <br><br> é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„æŸ¥çœ‹</a>ç¼–è¾‘å™¨çš„æ¼”ç¤ºã€‚ <br><br> æˆ‘ä»¬å°†éœ€è¦ä¸¤ä¸ªç»„ä»¶ï¼š <br><br>  <b>ç¼–è¾‘</b> -å°†åŒ…å«ä¸»è¦é€»è¾‘å’Œæ§ä»¶ <br>  <b>é¢„è§ˆ</b> -å°†è´Ÿè´£æ˜¾ç¤ºå›¾ç‰‡ <br><br><div class="spoiler">  <b class="spoiler_title">ç»„ä»¶æ¨¡æ¿ç¼–è¾‘ï¼š</b> <div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Edit</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Preview</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preview"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:matrix</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"matrix"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:image</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:transform</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transform"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">resized</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"areaResized"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loaded</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"imageLoaded"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">moved</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"imageMoved"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"range"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:min</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"minZoom"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:max</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"maxZoom"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">step</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"any"</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">change</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onZoomEnd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-model.number</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transform.zoom"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!imageReady"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rotateMinus"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!imageReady"</span></span></span><span class="hljs-tag">&gt;</span></span>Rotate left<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rotatePlus"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!imageReady"</span></span></span><span class="hljs-tag">&gt;</span></span>Rotate right<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"flipY"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!imageReady"</span></span></span><span class="hljs-tag">&gt;</span></span>Flip horizontal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"flipX"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!imageReady"</span></span></span><span class="hljs-tag">&gt;</span></span>Flip vertical<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Edit</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br> é¢„è§ˆç»„ä»¶å¯ä»¥è§¦å‘3ä¸ªäº‹ä»¶ï¼š <br><br>  <i>å·²åŠ è½½</i> -å›¾ç‰‡åŠ è½½äº‹ä»¶ <br>  <i>è°ƒæ•´å¤§å°</i> -çª—å£<i>è°ƒæ•´å¤§å°</i>äº‹ä»¶ <br>  <i>å·²ç§»åŠ¨</i> -å›¾ç‰‡ç§»åŠ¨äº‹ä»¶ <br><br> å‚æ•°ï¼š <br><br>  <i>å›¾ç‰‡</i> - <i>å›¾ç‰‡</i>é“¾æ¥ <br>  <i>matrix-</i>è½¬æ¢CSSå±æ€§çš„è½¬æ¢çŸ©é˜µ <br>  <i>transform-</i>æè¿°è½¬æ¢çš„å¯¹è±¡ <br><br> ä¸ºäº†æ›´å¥½åœ°æ§åˆ¶å›¾åƒçš„ä½ç½®ï¼Œimgå…·æœ‰ç»å¯¹å®šä½ï¼Œå¹¶ä¸”<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">transform-origin</a>å±æ€§ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å˜æ¢</a>å‚è€ƒç‚¹ï¼‰è®¾ç½®ä¸ºåˆå§‹å€¼â€œ 0 0â€ï¼Œè¯¥å€¼å¯¹åº”äºåŸå§‹å›¾åƒï¼ˆå˜æ¢ä¹‹å‰ï¼ï¼‰çš„å·¦ä¸Šè§’ã€‚ <br><br> æˆ‘é‡åˆ°çš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œæ‚¨éœ€è¦ç¡®ä¿å˜æ¢åŸç‚¹å§‹ç»ˆä½äºç¼–è¾‘åŒºåŸŸçš„ä¸­å¿ƒï¼Œå¦åˆ™ï¼Œåœ¨å˜æ¢è¿‡ç¨‹ä¸­ï¼Œå›¾åƒçš„é€‰å®šéƒ¨åˆ†å°†ä¼šç§»åŠ¨ã€‚ ä½¿ç”¨æ­¤<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å˜æ¢çŸ©é˜µ</a>æœ‰åŠ©äºè§£å†³æ­¤é—®é¢˜ã€‚ <br><br><h3> ç»„ä»¶ç¼–è¾‘ </h3><br><div class="spoiler">  <b class="spoiler_title">ç¼–è¾‘ç»„ä»¶çš„å±æ€§ï¼š</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">components</span></span>: { Preview }, data () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">image</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">imageReady</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">imageRect</span></span>: {}, <span class="hljs-comment"><span class="hljs-comment">//   areaRect: {}, //   minZoom: 1, //   maxZoom: 1, //   //   transform: { center: { x: 0, y: 0, }, zoom: 1, rotate: 0, flip: false, flop: false, x: 0, y: 0 } } }, computed: { matrix() { let scaleX = this.transform.flop ? -this.transform.zoom : this.transform.zoom; let scaleY = this.transform.flip ? -this.transform.zoom : this.transform.zoom; let tx = this.transform.x; let ty = this.transform.y; const cos = Math.cos(this.transform.rotate * Math.PI / 180); const sin = Math.sin(this.transform.rotate * Math.PI / 180); let a = Math.round(cos)*scaleX; let b = Math.round(sin)*scaleX; let c = -Math.round(sin)*scaleY; let d = Math.round(cos)*scaleY; return { a, b, c, d, tx, ty }; } }, ... }</span></span></code> </pre><br></div></div><br> é¢„è§ˆç»„ä»¶å°†imageRectå’ŒareaRectçš„å€¼ä¼ é€’ç»™æˆ‘ä»¬ï¼Œåˆ†åˆ«è°ƒç”¨imageLoadedå’ŒareaResizedæ–¹æ³•ï¼Œå¯¹è±¡å…·æœ‰ä»¥ä¸‹ç»“æ„ï¼š <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">size</span></span>: { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> }, <span class="hljs-attr"><span class="hljs-attr">center</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span> } }</code> </pre><br> æ¯æ¬¡å¯ä»¥è®¡ç®—ä¸­å¿ƒå€¼ï¼Œä½†æ˜¯å°†å®ƒä»¬è®°ä¸€æ¬¡æ›´å®¹æ˜“ã€‚ <br><br> è®¡ç®—å‡ºçš„çŸ©é˜µå±æ€§ä¸å˜æ¢çŸ©é˜µçš„ç³»æ•°ç›¸åŒã€‚ <br><br> éœ€è¦è§£å†³çš„ç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯ä»¥ä»»æ„çºµæ¨ªæ¯”å°†å›¾åƒå±…ä¸­æ”¾ç½®åœ¨ä½œç‰©åŒºåŸŸä¸­ï¼Œè€Œå›¾åƒåº”è¯¥èƒ½å¤Ÿå®Œå…¨é€‚åˆï¼Œä¸Šæ–¹å’Œä¸‹æ–¹ï¼ˆä»…ï¼‰æˆ–å·¦ä¾§å’Œå³ä¾§ï¼ˆä»…ï¼‰çš„æœªå¡«å……åŒºåŸŸæ˜¯å¯ä»¥æ¥å—çš„ã€‚ è¿›è¡Œä»»ä½•è½¬æ¢æ—¶ï¼Œå¿…é¡»ä¿æŒæ­¤æ¡ä»¶ã€‚ <br><br> é¦–å…ˆï¼Œæˆ‘ä»¬å°†é™åˆ¶ç¼©æ”¾å€¼ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†è€ƒè™‘å›¾åƒçš„æ–¹å‘æ¥æ£€æŸ¥çºµæ¨ªæ¯”ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ç»„æˆæ–¹æ³•ï¼š</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> _setMinZoom(){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rotate = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.c !== <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> horizontal = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.imageRect.size.height &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.imageRect.size.width; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> areaSize = (horizontal &amp;&amp; !rotate || !horizontal &amp;&amp; rotate) ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.areaRect.size.width : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.areaRect.size.height; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> imageSize = horizontal ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.imageRect.size.width : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.imageRect.size.height; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minZoom = areaSize/imageSize; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.zoom &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minZoom) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.zoom = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minZoom; }, _setMaxZoom(){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.maxZoom = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.areaRect.size.width/config.image.minResolution; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.zoom &gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.maxZoom) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.zoom = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.maxZoom; },</code> </pre><br></div></div><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­è¿›è¡Œè½¬æ¢ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æè¿°åå°„ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šç§»åŠ¨å›¾åƒçš„å¯è§åŒºåŸŸã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ç»„æˆæ–¹æ³•ï¼š</b> <div class="spoiler_text"><pre> <code class="javascript hljs">flipX(){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.b == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.c == <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flip = !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flip : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flop = !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flop; }, flipY(){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.b == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.c == <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flop = !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flop : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flip = !<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.flip; },</code> </pre><br></div></div><br> ç¼©æ”¾ï¼Œæ—‹è½¬å’Œä½ç§»çš„è½¬æ¢å°†å·²ç»éœ€è¦è½¬æ¢åŸç‚¹è°ƒæ•´ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ç»„æˆæ–¹æ³•ï¼š</b> <div class="spoiler_text"><pre> <code class="javascript hljs">onZoomEnd(){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._translate(); }, rotatePlus(){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.rotate += <span class="hljs-number"><span class="hljs-number">90</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._setMinZoom(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._translate(); }, rotateMinus(){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.rotate -= <span class="hljs-number"><span class="hljs-number">90</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._setMinZoom(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._translate(); }, imageMoved(translate){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._translate(); },</code> </pre><br></div></div><br>  <b>_translate</b>æ–¹æ³•è´Ÿè´£è½¬æ¢çš„æ‰€æœ‰å¾®å¦™ä¹‹å¤„ã€‚ å¿…é¡»å¼•å…¥ä¸¤ä¸ªå‚è€ƒç³»ç»Ÿã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºé›¶ï¼Œä»å›¾åƒçš„å·¦ä¸Šè§’å¼€å§‹ï¼Œå½“æˆ‘ä»¬å°†åæ ‡ä¹˜ä»¥å˜æ¢çŸ©é˜µæ—¶ï¼Œæˆ‘ä»¬è½¬åˆ°å¦ä¸€ä¸ªåæ ‡ç³»ï¼Œå°†å…¶ç§°ä¸ºå±€éƒ¨åæ ‡ç³»ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰¾åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é€†</a>å˜æ¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çŸ©é˜µ</a>æ¥é€†è½¬ä»å±€éƒ¨åˆ°é›¶çš„è¿‡æ¸¡ã€‚ <br><br> äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªåŠŸèƒ½ã€‚ <br><br> ç¬¬ä¸€ç§æ˜¯ä»é›¶åˆ°æœ¬åœ°ç³»ç»Ÿï¼Œå½“æˆ‘ä»¬æŒ‡å®šcss transformå±æ€§æ—¶ï¼Œæµè§ˆå™¨æ‰§è¡Œç›¸åŒçš„è½¬æ¢ã€‚ <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">matrix</span></span>(a, b, c, d, tx, ty); }</code> </pre><br> ç¬¬äºŒä¸ª-æŸ¥æ‰¾å·²ç»å˜æ¢åæ ‡çš„å›¾åƒçš„åŸå§‹åæ ‡ã€‚ <br><br> ä½¿ç”¨å•ç‹¬çš„ç±»çš„æ–¹æ³•ç¼–å†™è¿™äº›å‡½æ•°æ˜¯æœ€æ–¹ä¾¿çš„ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">è½¬æ¢ç±»åˆ«ï¼š</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Transform</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(center, matrix){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.init(center, matrix); } init(center, matrix){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(center) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.center = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign({},center); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(matrix) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign({},matrix); } getOrigins(current){ <span class="hljs-comment"><span class="hljs-comment">//     let tr = {x: current.x - this.center.x, y: current.y - this.center.y}; //         const det = 1/(this.matrix.a*this.matrix.d - this.matrix.c*this.matrix.b); const x = ( this.matrix.d*(tr.x - this.matrix.tx) - this.matrix.c*(tr.y - this.matrix.ty) ) * det + this.center.x; const y = (-this.matrix.b*(tr.x - this.matrix.tx) + this.matrix.a*(tr.y - this.matrix.ty) ) * det + this.center.y; return {x, y}; } translate(current){ //     const origin = {x: current.x - this.center.x, y: current.y - this.center.y}; //        let x = this.matrix.a*origin.x + this.matrix.c*origin.y + this.matrix.tx + this.center.x; let y = this.matrix.b*origin.x + this.matrix.d*origin.y + this.matrix.ty + this.center.y; return {x, y}; } }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">_Translateæ–¹æ³•ï¼Œå¸¦æœ‰è¯¦ç»†æ³¨é‡Šï¼š</b> <div class="spoiler_text"><pre> <code class="javascript hljs">_translate(checkAlign = <span class="hljs-literal"><span class="hljs-literal">true</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Transform(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transform.center, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix); <span class="hljs-comment"><span class="hljs-comment">// , ,  ,       const newCenter = tr.getOrigins(this.areaRect.center); this.transform.center = newCenter; //      this.transform.x = this.areaRect.center.x - newCenter.x; this.transform.y = this.areaRect.center.y - newCenter.y; //   tr.init(this.transform.center, this.matrix); //        ,      let x0y0 = tr.translate({x: 0, y: 0}); let x1y1 = tr.translate({x: this.imageRect.size.width, y: this.imageRect.size.height}); //  (  )       let result = { left: x1y1.x - x0y0.x &gt; 0 ? x0y0.x : x1y1.x, top: x1y1.y - x0y0.y &gt; 0 ? x0y0.y : x1y1.y, width: Math.abs(x1y1.x - x0y0.x), height: Math.abs(x1y1.y - x0y0.y) }; //       ,   "" let rightOffset = this.areaRect.size.width - (result.left + result.width); let bottomOffset = this.areaRect.size.height - (result.top + result.height); let alignedCenter; //   if(this.areaRect.size.width - result.width &gt; 1){ //align center X alignedCenter = tr.getOrigins({x: result.left + result.width/2, y: this.areaRect.center.y}); }else{ //align left if(result.left &gt; 0){ alignedCenter = tr.getOrigins({x: result.left + this.areaRect.center.x, y: this.areaRect.center.y}); //align right }else if(rightOffset &gt; 0){ alignedCenter = tr.getOrigins({x: this.areaRect.center.x - rightOffset, y: this.areaRect.center.y}); } } if(alignedCenter){ this.transform.center = alignedCenter; this.transform.x = this.areaRect.center.x - alignedCenter.x; this.transform.y = this.areaRect.center.y - alignedCenter.y; tr.init(this.transform.center, this.matrix); } //   if(this.areaRect.size.height - result.height &gt; 1){ //align center Y alignedCenter = tr.getOrigins({x: this.areaRect.center.x, y: result.top + result.height/2}); }else{ //align top if(result.top &gt; 0){ alignedCenter = tr.getOrigins({x: this.areaRect.center.x, y: result.top + this.areaRect.center.y}); //align bottom }else if(bottomOffset &gt; 0){ alignedCenter = tr.getOrigins({x: this.areaRect.center.x, y: this.areaRect.center.y - bottomOffset}); } } if(alignedCenter){ this.transform.center = alignedCenter; this.transform.x = this.areaRect.center.x - alignedCenter.x; this.transform.y = this.areaRect.center.y - alignedCenter.y; tr.init(this.transform.center, this.matrix); } },</span></span></code> </pre><br></div></div><br> å¯¹é½ä¼šäº§ç”Ÿå°†å›¾åƒâ€œç²˜è´´â€åˆ°è£åˆ‡è¾¹ç¼˜çš„æ•ˆæœï¼Œé¿å…å‡ºç°ç©ºç™½åŒºåŸŸã€‚ <br><br><h3> é¢„è§ˆç»„ä»¶ </h3><br> è¯¥ç»„ä»¶çš„ä¸»è¦ä»»åŠ¡æ˜¯æ˜¾ç¤ºå›¾åƒï¼Œåº”ç”¨å˜æ¢å¹¶å“åº”å¤¹åœ¨å›¾åƒä¸Šçš„é¼ æ ‡æŒ‰é’®çš„ç§»åŠ¨ã€‚ è®¡ç®—åç§»é‡åï¼Œæˆ‘ä»¬æ›´æ–°å‚æ•°<b>transform.x</b>å’Œ<b>transform.y</b> ï¼Œåœ¨è¿åŠ¨ç»“æŸæ—¶è§¦å‘å·²<b>ç§»åŠ¨çš„</b>äº‹ä»¶ï¼Œå‘Šè¯‰Editç»„ä»¶éœ€è¦é‡æ–°è®¡ç®—å˜æ¢ä¸­å¿ƒçš„ä½ç½®å¹¶è°ƒæ•´transform.xå’Œtransform.yã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">é¢„è§ˆç»„ä»¶æ¨¡æ¿ï¼š</b> <div class="spoiler_text">  &lt;div ref =â€œ areaâ€ç±»=â€œç¼–è¾‘åŒºâ€ <br>  @ mousedown =â€œ onMoveStartâ€ <br>  @ touchstart =â€œ onMoveStartâ€ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">mouseup</a> =â€œ onMoveEndâ€ <br>  @ touchend =â€œ onMoveEndâ€ <br>  @ mousemove =â€œ onMoveâ€ <br>  @ touchmove =â€œ onMoveâ€&gt; <br>  &lt;img <br>  v-if =â€œ imageâ€ <br>  ref =â€œå›¾ç‰‡â€ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">load</a> =â€œ imageLoadedâ€ <br>  ï¼šsrc =â€œå›¾åƒâ€ <br>  ï¼šstyle =â€œ {'transform'ï¼štransformStyleï¼Œ'transform-origin'ï¼štransformOrigin}â€&gt; <br></div></div><br> ç¼–è¾‘å™¨çš„åŠŸèƒ½ä¸ä¸»é¡¹ç›®å®Œå…¨åˆ†å¼€ï¼Œä½äº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a> ã€‚ <br><br> æˆ‘å¸Œæœ›è¿™äº›ææ–™å¯¹æ‚¨æœ‰ç”¨ã€‚ è°¢è°¢ä½  </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN417697/">https://habr.com/ru/post/zh-CN417697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN417683/index.html">ä¸å»ºè®®ä½¿ç”¨çš„ä»£ç -ç¬¬ä¸‰æ–¹ä»£ç </a></li>
<li><a href="../zh-CN417685/index.html">Skillboxæ˜ŸæœŸäº”ç½‘ç»œç ”è®¨ä¼šï¼šå…è´¹ç»§ç»­å­¦ä¹ </a></li>
<li><a href="../zh-CN417687/index.html">ç”Ÿå‘½çš„ä¸å¯¹ç§°</a></li>
<li><a href="../zh-CN417689/index.html">Mobioä¸Appnexté¦–å¸­æ‰§è¡Œå®˜å°±CPIå¸‚åœºå’Œç§»åŠ¨åº”ç”¨è¶‹åŠ¿è¿›è¡Œäº†äº¤è°ˆ</a></li>
<li><a href="../zh-CN417691/index.html">æˆ‘ä»¬çš„ä¹¦æ¶æ˜¯Cï¼ƒç¨‹åºå‘˜ã€‚ é‚£ä½ å‘¢</a></li>
<li><a href="../zh-CN417699/index.html">Western Digitalå› éœ€æ±‚å‡å°‘è€Œå…³é—­äº†å¦ä¸€å®¶HDDå·¥å‚</a></li>
<li><a href="../zh-CN417701/index.html">ä»ç®€å•çš„è„šæœ¬åˆ°WCFä¸Šè‡ªå·±åŠ¨æ‰‹çš„å®¢æˆ·ç«¯æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼šä¸ºä»€ä¹ˆæˆ‘å–œæ¬¢åœ¨CMä¸­å·¥ä½œ</a></li>
<li><a href="../zh-CN417703/index.html">ç½‘ç»œä»£ç å¸å›½æ—¶ä»£ï¼šæ¯28.8 kbpsè°ƒåˆ¶è§£è°ƒå™¨1,500ä¸ªå¼“ç®­æ‰‹</a></li>
<li><a href="../zh-CN417705/index.html">æ˜¾å¡åˆ¶é€ å•†å¦‚ä½•å½±å“GPUæŒ–æ˜çš„ç›ˆåˆ©èƒ½åŠ›</a></li>
<li><a href="../zh-CN417709/index.html">å¼€å‘å•†åœ¨å“ªé‡Œä»¥åŠå¦‚ä½•è¯„ä»·å…¶é›‡ä¸»ï¼Ÿ ITè¡Œä¸šçš„å…¬å¸è¯„ä¼°æœåŠ¡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>