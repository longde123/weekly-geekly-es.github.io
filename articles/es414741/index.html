<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåã üö¥üèæ üë®üèæ‚Äçü§ù‚Äçüë®üèº Usted mismo proveedor de VDS ‚òÇÔ∏è üïπÔ∏è üë©üèæ‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si desea aprovechar VDS y, al mismo tiempo, protegerse de un exceso sin escr√∫pulos, cuando el proveedor obstruye el nodo hasta los globos oculares y n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Usted mismo proveedor de VDS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/first/blog/414741/"><img src="https://habrastorage.org/webt/lb/xe/q6/lbxeq6q_bjkeqi_lnwqv4wkrdkk.jpeg"><br><br>  Si desea aprovechar VDS y, al mismo tiempo, protegerse de un exceso sin escr√∫pulos, cuando el proveedor obstruye el nodo hasta los globos oculares y no equilibra la carga, hay dos maneras. <br><br>  Puede encontrar su confiable host VDS.  O mata a todos los Siths y crea tu propia estrella de la muerte (nodo): solicita un servidor dedicado y transfiere todos tus VDS all√≠.  Despu√©s de todo, entonces sabremos con certeza que todos los recursos son solo nuestros y que siempre estar√°n disponibles.  S√≠, y podemos instalar cualquier sistema operativo que queramos, cualquier software que sea impaciente, y Bitrix har√° las delicias de los loros debido a la alta frecuencia del procesador.  Qui√©n sabe, tal vez incluso los jefes se volver√°n m√°s generosos y escribir√°n un bono.  Vamos! <a name="habracut"></a><br><br><h2>  Consideramos cu√°nto midichlorian tenemos </h2><br>  Primero debe averiguar el costo total de alquilar una flota de VDS y el consumo real de recursos del procesador, RAM / memoria permanente, la cantidad de IP.  Descubra la frecuencia del procesador que asigna su VDS.  Aqu√≠, todos los albergues individualmente - miramos los horarios, consideramos los precios. <br><br><h2>  Elegir el cuerpo correcto </h2><br>  Ahora que conocemos los requisitos de recursos actuales, seleccionamos el servidor dedicado apropiado. <br><br><h4>  CPU </h4><br>  Al elegir un procesador, es importante tener en cuenta que la frecuencia central puede ser significativamente mayor que en el VDS actual.  Si es el doble, puede considerar un n√∫cleo Dedic para dos n√∫cleos VDS.  Puede haber una tormenta de indignaci√≥n, pero debes entender: todos los proyectos son diferentes, y esta es la forma m√°s f√°cil de elegir un procesador.  En general, tomamos el n√∫mero de n√∫cleos que realmente usan los VDS antiguos, si la frecuencia central de aproximadamente 2 Ghz se divide por dos. <br>  El valor resultante es el n√∫mero m√≠nimo de n√∫cleos dedicados necesarios. <br><br><h4>  El recuerdo </h4><br>  Con RAM y un disco duro, todo es simple.  Resumimos los recursos VDS, agregamos 1 GB de RAM y ~ 10 GB de disco duro.  Estos recursos adicionales son necesarios para que el sistema operativo y el panel de control del hipervisor funcionen.  Si va a aumentar la cantidad de contenido, coloque una reserva de recursos para el crecimiento del proyecto. <br><br><h4>  Direcciones IP </h4><br>  Como en el caso de la memoria, tomamos el mismo n√∫mero de direcciones que en VDS-kah + 1 para el propio Dedik. <br><br>  Solicitamos un servidor que cumpla con nuestros requisitos, y teniendo en cuenta los matices mencionados.  Elegimos Debian 9 como SO, es bajo este SO que hacen un panel de control Proxmox adecuado. <br><br><h2>  Despierta el poder </h2><br>  Despu√©s de un tiempo, tendremos acceso de root al nuevo Dedik. <br>  Es hora de decir algunas palabras sobre el panel de control del hipervisor Proxmox c√°lido, tubular y gratuito.  S√≠, el panel en s√≠ es gratuito: los desarrolladores ganan con una suscripci√≥n.  Los suscriptores, a su vez, obtienen una versi√≥n m√°s estable del panel y la capacidad de agregar m√°s nodos en modo de cl√∫ster.  Pero para nuestro prop√≥sito, la versi√≥n gratuita es suficiente. <br><br>  Hace relativamente poco, el panel se ha actualizado significativamente; ahora se ve muy moderno y funcional.  Es compatible con la virtualizaci√≥n KVM y LXC, le permite organizar su nube ceph, es compatible con la copia de seguridad, en una palabra, sabe todo lo que un usuario ordinario de un alojamiento VDS puede necesitar. <br><br><h4>  Comenzar a instalar Proxmox </h4><br>  Nos conectamos al servidor a trav√©s de ssh usando putty u otro cliente ssh y ejecutamos los siguientes comandos secuencialmente: <br><br><pre><code class="hljs powershell">echo <span class="hljs-string"><span class="hljs-string">"deb http://download.proxmox.com/debian/pve stretch pve-no-subscription"</span></span> &gt; /etc/apt/sources.list.d/pve<span class="hljs-literal"><span class="hljs-literal">-install</span></span><span class="hljs-literal"><span class="hljs-literal">-repo</span></span>.list wget http://download.proxmox.com/debian/proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span>.x.gpg <span class="hljs-literal"><span class="hljs-literal">-O</span></span> /etc/apt/trusted.gpg.d/proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span>.x.gpg apt update &amp;&amp; apt dist<span class="hljs-literal"><span class="hljs-literal">-upgrade</span></span> apt install <span class="hljs-literal"><span class="hljs-literal">-y</span></span> proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span> postfix <span class="hljs-built_in"><span class="hljs-built_in">open-iscsi</span></span> apt remove <span class="hljs-literal"><span class="hljs-literal">-y</span></span> os<span class="hljs-literal"><span class="hljs-literal">-prober</span></span></code> </pre> <br>  Una vez completada la instalaci√≥n, vaya a Proxmox, para obtener la autorizaci√≥n, use el navegador en el puerto 8006 de dedica <code>https://IP-:8006</code> <br><br><img src="https://habrastorage.org/webt/mh/_p/t1/mh_pt1drekhxeglfhg3fnch7rdw.png"><br><br>  Tambi√©n iniciamos sesi√≥n como root, la interfaz est√° bastante bien traducida a la excelente y poderosa - puedes usarla de forma segura. <br><br>  Tan pronto como inicie sesi√≥n, ver√° un mensaje con una pista de suscripci√≥n.  Esto no es necesario: el panel no dejar√° de funcionar, como es el caso de las versiones de prueba de los programas. <br><br><img src="https://habrastorage.org/webt/a-/uv/j2/a-uvj2-6ephahggkfxrba8igeyc.png"><br><br>  Antes de crear el primer VDS en el nuevo servidor, debe configurar el puente de red para que todo sea como un adulto.  En esta etapa, es posible que necesite KVM o ipmi-kvm (si algo sale mal y necesita restaurar la disponibilidad de Dedic en la red). <br><br>  Volvemos a ssh y editamos las configuraciones / etc / network / interfaces usando el plebeian nano u Orthodox vim.  Traemos una configuraci√≥n a este tipo: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">source</span></span> /etc/network/interfaces.d/* <span class="hljs-comment"><span class="hljs-comment"># The loopback network interface auto lo iface lo inet loopback auto vmbr0 iface vmbr0 inet static address IP- netmask - gateway  bridge_ports ens3 //  ,      .   ,  ,  IP     ¬´ip a¬ª. bridge_stp off bridge_fd 0 bridge_maxwait 0</span></span></code> </pre><br>  Despu√©s de guardar la configuraci√≥n editada, enviamos Dedik para reiniciar.  Adem√°s de configurar la red, tambi√©n cargar√° el nuevo n√∫cleo. <br><br>  Despu√©s de iniciar el servidor, nuevamente recurrimos a SSH para descargar las im√°genes ISO de los sistemas operativos para futuros VDS, as√≠ como la imagen sysrescuecd.  Las im√°genes deben colocarse en el directorio / var / lib / vz / template / iso <br>  Para descargar utilizamos wget y enlaces directos.  No puede descargar im√°genes del sistema si solo desea transferir VDS existentes a Dedic.  Pero la imagen sysrescuecd puede ser necesaria para dar servicio a VDS, por lo que recomendamos descargarla de inmediato. <br><br><h2>  Yendo a conquistar una galaxia lejana </h2><br>  Es hora de crear VDS en nuestra Dedic: presione el bot√≥n "Crear VM" en la esquina superior derecha del panel Proxmox, complete los campos en todas las pesta√±as con los datos de cualquiera de los VDS anteriores.  El formato de imagen se selecciona qcow2. <br><br><img src="https://habrastorage.org/webt/bi/q3/z1/biq3z14ds14z_ilhroqytbiqjda.png"><br><br>  Las im√°genes de disco se crear√°n a lo largo de la ruta / var / lib / vz / images / [aqu√≠ est√° la ID del nuevo VDS]. <br><br>  Solicitamos im√°genes en el formato qcow2 del host VDS y las cargamos en lugar de las creadas previamente.  Seleccione VDS en la lista de la izquierda e in√≠cielo con el bot√≥n "Inicio".  Ahora que tenemos nuestro servidor virtual con todos los proyectos, solo queda corregir la configuraci√≥n de red en el VDS y cambiar el DNS a la IP de la nueva m√°quina virtual.  Puede realizar esta configuraci√≥n a trav√©s de VNC, que est√° disponible haciendo clic en el bot√≥n Consola. <br><br><h4>  Monitoreo </h4><br>  Una vez completada la transferencia y cambiando el DNS, comenzamos a monitorear los indicadores de carga.  Esto no es necesario, pero es √∫til.  Para dicha supervisi√≥n, puede ver el resumen general del cl√∫ster. <br><br><img src="https://habrastorage.org/webt/iq/bj/ob/iqbjobj-21dpilq18qec995ppk4.png"><br><br>  El resumen del nodo tiene m√°s detalles: <br><br><img src="https://habrastorage.org/webt/pw/0o/6e/pw0o6e60se3f58bhk-7cz3uryb8.png"><br><br>  Si de repente resulta que alg√∫n recurso de nodo se est√° agotando, a partir de los res√∫menes de VDS puede determinar cu√°l consume muchos recursos y optimizar los servicios del VDS problem√°tico.  Cuando los proyectos superan el servidor actual, para cambiar a un hardware m√°s productivo ser√° suficiente reorganizar los discos de un servidor a otro.  Tal trabajo lleva unos 15 minutos, mucho m√°s r√°pido que migrar VDS entre nodos. <br><br>  Dedik tambi√©n tiene desventajas, por supuesto, pero Proxmox ayuda a nivelarlas.  La primera es que si Dedik se acuesta, todos los VDS caer√°n.  El problema se resuelve con redundancia, pero se necesitan m√°s Dedicados.  Incluso cuando usa un servidor dedicado, necesita configurar la incursi√≥n 1 y monitorear el estado de los discos usando smartd (y esto es lo que Proxmox puede hacer).  En el caso de VDS, el mismo problema se resuelve ordenando m√°quinas virtuales a varios proveedores, pero esto no es muy conveniente. <br><br>  Cambiar a un servidor dedicado es un paso razonable cuando el costo del VDS alquilado es comparable al precio de un servidor dedicado.  Puede elegir una configuraci√≥n preparada o crear su propia Dedic en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FirstDEDIC</a> .  Si desea que los proyectos vuelen, elija discos NVMe de alta velocidad (2-3 veces m√°s r√°pido que SSD). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es414741/">https://habr.com/ru/post/es414741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es414731/index.html">ngCinimex - Meetup angular de Mosc√∫ (07/02/2018)</a></li>
<li><a href="../es414733/index.html">Entre los diez primeros: una historia personal sobre c√≥mo convertirse en un RHCA y lo que puede obtener de √©l</a></li>
<li><a href="../es414735/index.html">Marca de TI. Que hablar con la gente en las conferencias</a></li>
<li><a href="../es414737/index.html">"No esperaron de d√≥nde": Yahoo ser√° multado con ¬£ 250k por violar las viejas reglas sobre trabajar con PD</a></li>
<li><a href="../es414739/index.html">Go-Critical: el analizador est√°tico m√°s obstinado para Go</a></li>
<li><a href="../es414743/index.html">Localizaci√≥n: caso flojo</a></li>
<li><a href="../es414745/index.html">#BigGun. El cron√≥grafo "frame" m√°s simple en Arduino (medici√≥n de velocidad de bala)</a></li>
<li><a href="../es414747/index.html">SNC, drogas y rock and roll: una historia sobre un dispositivo que nos hizo beber, no dormir y no parpadear</a></li>
<li><a href="../es414749/index.html">Set de caballero sysadmin</a></li>
<li><a href="../es414751/index.html">Domando WSUS con Ansible y m√°s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>