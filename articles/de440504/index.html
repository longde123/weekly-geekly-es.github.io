<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ûï ‚úîÔ∏è üßòüèº Docker und Kubernetes in sicherheitsbed√ºrftigen Umgebungen üôãüèº üçñ üåò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hinweis perev. : Der Originalartikel wurde von einem schwedischen Ingenieur verfasst - Christian Abdelmassih, der Architektur, IT-Sicherheit und Cloud...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker und Kubernetes in sicherheitsbed√ºrftigen Umgebungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/440504/"> <i><b>Hinweis</b></i>  <i><b>perev.</b></i>  <i>: Der Originalartikel wurde von einem schwedischen Ingenieur verfasst - Christian Abdelmassih, der Architektur, IT-Sicherheit und Cloud Computing auf Unternehmensebene mag.</i>  <i>K√ºrzlich erhielt er einen Master-Abschluss in Informatik und hat es eilig, seine Arbeit zu teilen - eine Masterarbeit oder vielmehr ein Teil davon, die sich mit den Problemen der Isolierung einer containerisierten [und in Kubernetes gestarteten] Anwendung befasst.</i>  <i>Als "Klient", f√ºr den diese Forschungsarbeit vorbereitet wurde, handelt nicht weniger als die Polizei seines Heimatlandes.</i> <br><br><img src="https://habrastorage.org/webt/_8/ys/gr/_8ysgrs-atvkocc6r8jpzyzzu1g.jpeg"><br><br>  Container Orchestration und Cloud-Native Computing sind in den letzten Jahren sehr beliebt geworden.  Ihre Anpassung hat ein derartiges Niveau erreicht, dass auch Finanzunternehmen, Banken und der √∂ffentliche Sektor Interesse an ihnen zeigen.  Sie zeichnen sich im Vergleich zu anderen Unternehmen durch umfangreiche Anforderungen im Bereich Informationssicherheit und IT aus. <a name="habracut"></a><br><br>  Einer der wichtigen Aspekte ist, wie Container in Produktionsumgebungen verwendet werden k√∂nnen und gleichzeitig die Systemtrennung zwischen Anwendungen aufrechterhalten werden kann.  Da solche Organisationen private Cloud-Umgebungen verwenden, die auf Virtualisierung auf Bare-Metal-Basis basieren, ist der Verlust einer solchen Isolation bei der Migration in eine Umgebung mit orchestrierten Containern nicht akzeptabel.  Angesichts dieser Einschr√§nkungen wurde meine Dissertation verfasst und die schwedische Polizei gilt als Zielgruppe. <br><br>  Das spezifische Thema der in der Arbeit ber√ºcksichtigten Studie ist: <br><br><blockquote>  Wie wird die Anwendungsabgrenzung in Docker und Kubernetes im Vergleich zu virtuellen Maschinen unterst√ºtzt, die auf dem ESXi-Hypervisor ausgef√ºhrt werden, der auf Bare Metal ausgef√ºhrt wird? </blockquote><br>  Dieses Problem erfordert eine sorgf√§ltige Untersuchung.  Schauen Sie sich zun√§chst den gemeinsamen Nenner an - Anwendungen. <br><br><h2>  Webanwendungen sind verwirrend </h2><br>  Sicherheitsl√ºcken in Webanwendungen - ein echter Zoo von Angriffsmethoden.  Die wichtigsten Risiken sind in den OWASP Top 10 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2013</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2017</a> ) dargestellt.  Diese Ressourcen helfen Entwicklern dabei, typische Risiken zu reduzieren.  Selbst wenn die Entwickler fehlerfreien Code geschrieben haben, kann die Anwendung dennoch anf√§llig sein - beispielsweise durch Paketabh√§ngigkeiten. <br><br>  David Gilbertson hat eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gro√üartige Geschichte</a> dar√ºber geschrieben, wie Sie Code √ºber ein sch√§dliches Paket einf√ºgen k√∂nnen, das beispielsweise als Teil von NPM f√ºr Node.js-basierte Anwendungen verteilt wird.  Um Schwachstellen zu erkennen, k√∂nnen Sie Abh√§ngigkeitsscanner verwenden, <i>die das</i> Risiko jedoch nur <i>verringern</i> , aber nicht vollst√§ndig beseitigen. <br><br>  Selbst wenn Sie Anwendungen ohne Abh√§ngigkeiten von Drittanbietern erstellen, ist es immer noch unrealistisch zu glauben, dass die Anwendung niemals anf√§llig wird. <br><br>  <b>Aufgrund dieser Risiken k√∂nnen wir nicht sagen, dass Webanwendungen sicher sind.</b> <br><br>  Halten Sie sich stattdessen an eine Strategie der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Tiefenverteidigung</b></a> (DID).  Werfen wir einen Blick auf die n√§chste Ebene: Container und virtuelle Maschinen. <br><br><h2>  Container versus virtuelle Maschinen - eine Geschichte der Isolation </h2><br>  Ein Container ist eine isolierte User-Space-Umgebung, die h√§ufig mithilfe der Funktionen des Kernels implementiert wird.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Docker</a> verwendet hierf√ºr beispielsweise die Linux-Namespaces, cgroups und -Funktionen.  In diesem Sinne unterscheidet sich die Isolierung von Docker-Containern <b>stark</b> von virtuellen Maschinen, die von Hypervisoren des Typs 1 gestartet werden <i>(d. H. Direkt auf Hardware arbeiten; Bare-Metal-Hypervisoren)</i> . <br><br>  Die Differenzierung f√ºr solche virtuellen Maschinen kann auf einem so niedrigen Niveau wie bei realer Hardware beispielsweise √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Intel VT</a> implementiert werden.  Docker-Container wiederum verlassen sich zur Abgrenzung auf den Linux-Kernel.  Dieser Unterschied ist sehr wichtig, wenn es um <i>Layer-Under-Angriffe geht</i> . <br><br>  Wenn ein Angreifer in der Lage ist, Code in einer virtuellen Maschine oder einem Container auszuf√ºhren, kann er m√∂glicherweise durch Ausf√ºhren eines <i>Fluchtangriffs</i> auf eine niedrigere Ebene gelangen. <br><br><img src="https://habrastorage.org/webt/36/hl/_c/36hl_cjove9e7ufmr4g7f3vcq5q.png"><br>  <i>Abh√§ngig davon, ob Container oder virtuelle Maschinen auf Hardware verwendet werden, wird die Differenzierung auf verschiedenen Infrastrukturebenen implementiert.</i> <br><br>  Die M√∂glichkeit solcher Angriffe wurde f√ºr den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VMware ESXi-</a> Hypervisor w√§hrend des Pwn2Own 2017-Hacker-Wettbewerbs sowie f√ºr GeekPwn2018 nachgewiesen.  Das Ergebnis war ein Paar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVEs</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2017‚Äì4902</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2018‚Äì6981</a> ), die bei Layer- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">under</a> -Angriffen zum <b>Beenden virtueller Maschinen verwendet werden k√∂nnen</b> <i>( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Escape Virtual Machine</a> )</i> .  Virtuelle Maschinen auf Eisenservern garantieren keine absolute Sicherheit, obwohl sie Technologie verwenden, um den Eisengehalt zu differenzieren. <br><br>  Wenn wir uns andererseits Angriffsvektoren auf einem Bare-Metal-Hypervisor im Vergleich zum Linux-Kernel ansehen, ist es offensichtlich, dass dieser eine viel gr√∂√üere Angriffsfl√§che hat - aufgrund seiner Gr√∂√üe und seines Funktionsumfangs [Linux-Kernel].  Eine gr√∂√üere Angriffsfl√§che impliziert mehr potenzielle Angriffsvektoren f√ºr Cloud-Umgebungen unter Verwendung der Containerisolation.  Dies zeigt sich in der wachsenden Aufmerksamkeit f√ºr <i>Container-Fluchtangriffe</i> , die dank Kernel-Exploits m√∂glich wurden (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2016‚Äì5195</a> <i>[dh Dirty COW - ca. √ºbersetzt]</i> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2017‚Äì1000405)</a> ) <br><br>  Module wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SELinux</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AppArmor</a> k√∂nnen verwendet werden, um die Isolierung <b>im</b> Beh√§lter zu erh√∂hen.  Leider verhindern solche Sicherheitsmechanismen im Kernel keine Fluchtangriffe auf den Kernel selbst.  Sie begrenzen die m√∂glichen Aktionen des Angreifers nur, wenn ein √úberschreiten der Grenzen <i>nicht m√∂glich ist</i> .  Wenn wir uns mit Ausg√§ngen au√üerhalb des Containers befassen m√∂chten, wird ein Isolationsmechanismus <b>au√üerhalb des</b> Containers oder sogar des Kerns ben√∂tigt.  Zum Beispiel eine Sandbox <i>(Sandbox)</i> ! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gVisor</a> ist eine Sandbox f√ºr die Container- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Laufzeit</a> , deren Code von Google ge√∂ffnet wurde und die einen zus√§tzlichen Kernel zwischen dem Container und dem Kernel des Betriebssystems hinzuf√ºgt.  Diese Art von Sandbox kann die Situation durch nicht gebundene Containerangriffe verbessern, die <i>auf Kernelebene stattfinden</i> .  Kern-Exploits sind jedoch nur eines der Werkzeuge des Angreifers. <br><br>  Um zu sehen, wie andere Angriffe zu √§hnlichen Ergebnissen f√ºhren k√∂nnen, m√ºssen Sie sich ein allgemeineres Bild davon machen, wie Container in der Cloud-Native-√Ñra verwendet werden. <br><br><h2>  Die Auswirkung der Container-Orchestrierung auf die Isolation </h2><br>  Um Container zu verwalten, die in Umgebungen mit vielen Knoten ausgef√ºhrt werden, f√ºhren sie die Orchestrierung ein, in der Kubernetes die f√ºhrende Rolle spielen.  Wie sich herausstellt, k√∂nnen Orchestrator-Fehler auch die Containerisolation beeinflussen. <br><br>  Tim Allclair hielt auf der KubeCon 2018 eine wundervolle Pr√§sentation, in der er einige Angriffsfl√§chen feststellte.  In seinem Bericht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erw√§hnt er</a> ein Beispiel ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2017-1002101</a> ), wie Orchestrierungsfehler die Isolation beeinflussen k√∂nnen - in diesem Fall durch die M√∂glichkeit, Speicherplatz au√üerhalb des Pods <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereitzustellen</a> .  Sicherheitsl√ºcken dieser Art sind sehr problematisch, weil  kann den Sandkasten umgehen, in den der Beh√§lter eingewickelt ist. <br><br>  Durch die Einf√ºhrung von Kubernetes haben wir die Angriffsfl√§che erweitert.  Es enth√§lt Systeme, die auf dem Kubernetes-Master gehostet werden.  Einer davon ist der Kubernetes-API-Server, auf dem k√ºrzlich eine Sicherheitsanf√§lligkeit entdeckt wurde, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ºberm√§√üige</a> Berechtigungen zulassen k√∂nnte ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2018‚Äì1002105</a> ).  Da die Angriffsfl√§che des Kubernetes-Masters den Rahmen meiner Dissertation sprengt, wird diese besondere Sicherheitsanf√§lligkeit nicht ber√ºcksichtigt. <br><br>  Warum sind Fluchtangriffe so wichtig?  Container boten die M√∂glichkeit, viele gemeinsam gehostete Anwendungen unter demselben Betriebssystem auszuf√ºhren.  Mit der Anwendungsisolation war also ein Risiko verbunden.  Wenn eine gesch√§ftskritische Anwendung und eine andere anf√§llige Anwendung auf demselben Host ausgef√ºhrt werden, kann ein Angreifer durch einen Angriff auf eine anf√§llige Anwendung Zugriff auf eine kritische Anwendung erhalten. <br><br>  Abh√§ngig davon, mit welcher Art von Daten die Organisation arbeitet, kann ihr Leck nicht nur der Organisation selbst, sondern auch Einzelpersonen und dem gesamten Land schaden.  Wie Sie sich erinnern, sprechen wir √ºber den √∂ffentlichen Sektor, Finanzen, Banken ... - ein Leck kann das Leben der Menschen ernsthaft beeintr√§chtigen. <br><br>  Kann die Container-Orchestrierung in solchen Umgebungen √ºberhaupt verwendet werden?  Vor weiteren √úberlegungen muss eine Risikobewertung durchgef√ºhrt werden. <br><br><h2>  Welches Risiko ist akzeptabel? </h2><br>  Vor der Einf√ºhrung von Sicherheitsma√ünahmen ist es wichtig zu √ºberlegen, welche Art von Informationen das Unternehmen tats√§chlich zu sch√ºtzen versucht.  Die Entscheidung, ob weitere Schritte erforderlich sind, um m√∂gliche Fluchtangriffe auf Container zu verhindern, h√§ngt von den Daten ab, mit denen die Organisation arbeitet, und von den von ihr bereitgestellten Diensten. <br><br>  Langfristig bedeutet dies, dass der Angreifer: Um die M√∂glichkeit zu erreichen, den Container auf einem <i>korrekt konfigurierten</i> Host zu verlassen, der durch die Sandbox f√ºr den Container gesch√ºtzt ist, muss er: <br><br><ol><li>  Code in einem Container ausf√ºhren, z. B. durch Code-Injection oder Verwendung von Schwachstellen im Anwendungscode; </li><li>  Nutzen Sie eine andere Sicherheitsanf√§lligkeit, Zero-Day, oder f√ºr die noch kein Patch angewendet wurde, um den Container zu verlassen, <i>obwohl eine Sandbox vorhanden ist</i> . </li></ol><br>  Wie Sie vielleicht erraten haben, sollte eine Organisation, die ein solches Szenario nicht f√ºr akzeptabel h√§lt, mit Daten arbeiten oder Dienste anbieten, die hohe Anforderungen an <b>Vertraulichkeit</b> , <b>Integrit√§t</b> und / oder <b>Zug√§nglichkeit stellen</b> . <br><br>  Da die Dissertation nur solchen Kunden gewidmet ist, ist der Verlust der Systemisolation durch Verlassen des Containers nicht zul√§ssig, da  seine Folgen sind zu bedeutend.  Welche Schritte k√∂nnen unternommen werden, um die Isolation zu verbessern?  Um eine Ebene in der Isolationsleiter nach oben zu gelangen, sollten Sie sich auch die Sandboxen ansehen, in die der Betriebssystemkern eingeschlossen ist, d. H.  virtuelle Maschinen! <br><br>  Virtualisierungstechnologien, die gehostete Hypervisoren verwenden, werden die Situation verbessern, aber wir m√∂chten die Angriffsfl√§che <i>noch weiter</i> einschr√§nken.  Lassen Sie uns daher die auf Eisen installierten Hypervisoren untersuchen und herausfinden, wohin sie uns f√ºhren werden. <br><br><h2>  Hypervisoren auf Eisen </h2><br>  Eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Studie der</a> schwedisch-schwedischen Verteidigungsforschungsagentur untersuchte die Risiken der Virtualisierung in Bezug auf die schwedischen Streitkr√§fte.  Seine Schlussfolgerung sprach von den Vorteilen dieser Technologien f√ºr das Milit√§r, selbst bei den strengen Sicherheitsanforderungen und Risiken, die die Virtualisierung mit sich bringt. <br><br>  In diesem Zusammenhang k√∂nnen wir sagen, dass Virtualisierung (bis zu einem gewissen Grad) in der Verteidigungsindustrie eingesetzt wird, da sie <b>akzeptable Risiken</b> birgt.  Da Agenturen und Unternehmen in der Verteidigungsindustrie einer der anspruchsvollsten Kunden f√ºr IT-Sicherheit sind, k√∂nnen wir auch argumentieren, dass das akzeptable Risiko f√ºr sie bedeutet, dass es f√ºr die in der Dissertation ber√ºcksichtigten Kunden akzeptabel ist.  Und das alles - trotz der oben beschriebenen potenziellen Exits jenseits der virtuellen Maschine. <br><br>  Wenn wir uns entscheiden, diese Art von Sandbox f√ºr Container zu verwenden, sind im Zusammenhang mit Cloud-nativen Besonderheiten einige Dinge zu beachten. <br><br><h2>  Sandbox-Knoten f√ºr virtuelle Maschinen </h2><br>  Die Idee ist, dass die Knoten des Kubernetes-Clusters virtuelle Maschinen sind, die Hardwarevirtualisierung verwenden.  Da virtuelle Maschinen die Rolle von Sandboxen f√ºr Container spielen, die in Pods ausgef√ºhrt werden, kann jeder Knoten als sandboxgesch√ºtzte Umgebung betrachtet werden. <br><br>  Ein wichtiger Hinweis zu diesen Sandboxen im Zusammenhang mit den bereits erw√§hnten Containersandboxen: Mit diesem Ansatz k√∂nnen Sie viele Container in einer Sandbox platzieren.  Diese Flexibilit√§t erm√∂glicht es Ihnen, den Overhead im Vergleich zu dem Fall zu reduzieren, in dem jeder Container √ºber eine eigene Sandbox verf√ºgt.  Da jede Sandbox ein eigenes Betriebssystem hat, m√∂chten wir ihre Anzahl reduzieren und gleichzeitig die Isolation beibehalten. <br><br><img src="https://habrastorage.org/webt/wg/2t/jr/wg2tjra8xh9y_i7vlyygm7vulzy.png"><br>  <i>Auf der Hardware installierte virtuelle Maschinen - Clusterknoten - fungieren als Sandboxen f√ºr Container.</i>  <i>Container, die auf verschiedenen VMs ausgef√ºhrt werden, sind mit einem akzeptablen Risiko begrenzt.</i>  <i>Dies gilt jedoch nicht f√ºr Container, die auf derselben VM ausgef√ºhrt werden.</i> <br><br>  Da Kubernetes jedoch aus verschiedenen Gr√ºnden die Platzierung von Pods √§ndern kann, was <b>die Idee der Verwendung von Sandboxen ruinieren</b> kann, m√ºssen Einschr√§nkungen f√ºr den Mechanismus zum Teilen von Pods hinzugef√ºgt werden.  Sie k√∂nnen das gew√ºnschte auf viele Arten erreichen. <br><br>  Zum Zeitpunkt des Schreibens unterst√ºtzt Kubernetes ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">v1.13</a> ) drei Hauptmethoden zur Steuerung der Planung und / oder des Starts von Pods: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NodeSelector</a> &amp; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NodeAffinity</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flecken &amp; Toleranzen</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PodAffinity &amp; PodAntiAffinity</a> . </li></ul><br>  Welche Methode (n) verwendet werden soll (n), h√§ngt von der Anwendung der Organisation ab.  Es ist jedoch wichtig zu beachten, dass sich Methoden in ihrer F√§higkeit unterscheiden, Pods nach Eintritt in die Ausf√ºhrungsphase zu verwerfen.  Jetzt sind nur noch Taints dazu in der Lage - durch die <code>NoExecute</code> Aktion.  Wenn Sie diesen Moment in keiner Weise verarbeiten und sich einige Etiketten √§ndern, kann alles zu einer unerw√ºnschten Kollokation f√ºhren. <br><br><h2>  Einhaltung der Co-Location-Anforderungen </h2><br>  In der Dissertation wird die Idee vorgeschlagen, ein Klassifizierungssystem zu verwenden, das zeigt, wie sich die Empfindlichkeit in der Kollokation widerspiegelt.  Die Idee ist, die 1: 1-Beziehung zwischen dem Container und dem Pod zu verwenden und die Kollokation der Pods basierend auf der Klassifizierung von Containeranwendungen zu bestimmen. <br><br>  Zur Vereinfachung und Wiederverwendbarkeit wird das folgende dreistufige Klassifizierungssystem verwendet: <br><br><ul><li>  <b>Klasse O</b> : Die Anwendung ist nicht empfindlich und hat keine Isolationsanforderungen.  Es kann auf allen Knoten platziert werden, die nicht zu anderen Klassen geh√∂ren. </li><li>  <b>Klasse PG</b> <i>(private Gruppe)</i> : Eine Anwendung bildet zusammen mit einer Reihe anderer Anwendungen eine private Gruppe, f√ºr die ein dedizierter Knoten erforderlich ist.  Eine Anwendung kann nur auf PG-Klassenknoten gehostet werden, die die entsprechende private Gruppen-ID haben. </li><li>  <b>Klasse P</b> <i>(privat)</i> : Eine Anwendung ben√∂tigt einen privaten und separaten Knoten und kann nur auf leeren Knoten ihrer Klasse (P) platziert werden. </li></ul><br>  Um die Anforderungen der Kollokation f√ºr viele klassifizierte Anwendungen zu erf√ºllen, werden Verschmutzungen und Toleranzen verwendet, denen jeder Knoten eine Klasse zugewiesen ist, und PodAffinity, um zus√§tzliche Einschr√§nkungen f√ºr Pods mit Anwendungen der Klasse P oder PG anzuwenden. <br><br>  Dieses vereinfachte Beispiel zeigt, wie Verschmutzungen und Toleranzen verwendet werden k√∂nnen, um die Kollokationskontrolle zu implementieren: <br><br><img src="https://habrastorage.org/webt/ul/qj/ec/ulqjecbgz60kuw7upls5jyrxpik.gif"><br><br>  <i>Pods 2 und 3 enthalten Anwendungen aus einer privaten Gruppe, und die Anwendung auf Pod 1 ist sensibler und erfordert einen dedizierten Knoten.</i> <br><br>  F√ºr die P- und PG-Klassen sind jedoch zus√§tzliche Affinit√§tsregeln erforderlich, um sicherzustellen, dass Abgrenzungsanforderungen ausgef√ºhrt werden, wenn der Cluster und die gehosteten Anwendungen wachsen.  Mal sehen, wie Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diese Regeln</a> f√ºr verschiedene Klassen implementieren k√∂nnen: <br><br><pre> <code class="plaintext hljs"># Class P affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" namespaces: ["default"] labelSelector: matchExpressions: - key: non-existing-key operator: DoesNotExist</code> </pre> <br>  Affinit√§tsregeln f√ºr Anwendungen der Klasse P erfordern dedizierte Knoten.  In diesem Fall wird der Pod nicht geplant, wenn der Pod ohne <code>non-existing-key</code> .  Alles wird funktionieren, bis ein einzelner Pod diesen Schl√ºssel hat. <br><br><pre> <code class="plaintext hljs"># Class PG affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchLabels: class-pg-group-1: foobar podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchExpressions: - key: class-pg-group-1 operator: DoesNotExist</code> </pre> <br>  Bei Anwendungen der PG-Klasse werden Affinit√§tsregeln Pods mit einer <code>class-pg-group-1</code> und Knoten mit Pods ohne eine ID gemeinsam hosten. <br><br>  Ein solcher Ansatz erm√∂glicht es uns, mithilfe eines Klassifizierungssystems Container auf der Grundlage der relevanten Anforderungen einer containerisierten Anwendung abzugrenzen. <br><br>  Was haben wir bekommen? <br><br><h2>  Fazit </h2><br>  Wir haben eine M√∂glichkeit in Betracht gezogen, Sandboxen basierend auf einem Hypervisor vom Typ 1 (d. H. Auf Bare-Metal-Basis gestartet) zu implementieren, um Knoten in Kubernetes-Clustern zu erstellen, und ein Klassifizierungssystem vorgestellt, das die Anforderungen f√ºr die Abgrenzung containerisierter Anwendungen definiert.  Wenn wir diesen Ansatz mit den anderen betrachteten L√∂sungen vergleichen, hat er Vorteile hinsichtlich der Gew√§hrleistung der Systemisolation. <br><br>  Eine wichtige Schlussfolgerung ist, dass die Isolationsstrategie <i>die Ausbreitung von</i> Fluchtangriffen auf den Container <i>einschr√§nkt</i> .  <b>Mit anderen Worten, das Verlassen des Beh√§lters allein wird nicht verhindert, aber seine Auswirkungen werden gemindert.</b>  Dies bringt nat√ºrlich zus√§tzliche Schwierigkeiten mit sich, die bei √§hnlichen Vergleichen ber√ºcksichtigt werden m√ºssen. <br><br>  Um die angegebene Methode in einer Cloud-Umgebung zu verwenden und Skalierbarkeit bereitzustellen, werden zus√§tzliche Anforderungen an die Automatisierung gestellt.  Zum Beispiel, um die Erstellung virtueller Maschinen und deren Verwendung im Kubernetes-Cluster zu automatisieren.  Das Wichtigste wird die Implementierung und √úberpr√ºfung der <b>weit verbreiteten</b> Klassifizierung von Anwendungen sein. <br><br>  Dies ist Teil meiner Dissertation √ºber die <b>Isolierung einer containerisierten Anwendung</b> . <br><br>  Um zu verhindern, dass ein Angreifer, der sich auf einem Knoten vom Container abgemeldet hat, die Dienste anderer Knoten <i>angreift</i> , m√ºssen <i>netzwerkverbreitete Angriffe</i> ber√ºcksichtigt <i>werden</i> .  Um diesen Risiken Rechnung zu tragen, schl√§gt meine Dissertation die <b><i>Segmentierung des Clusternetzwerks vor</i></b> und f√ºhrt Cloud-Architekturen ein, von denen eine √ºber eine <b>Hardware-Firewall verf√ºgt</b> . <br><br>  Wer m√∂chte, kann sich mit dem vollst√§ndigen Dokument vertraut machen - der Text der Dissertation ist √∂ffentlich zug√§nglich: ‚Äû <a href="">Container Orchestration in sicherheitsbed√ºrftigen Umgebungen bei der schwedischen Polizeibeh√∂rde</a> ‚Äú. <br><br><h2>  PS vom √úbersetzer </h2><br>  Lesen Sie auch in unserem Blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sicherheitsanf√§lligkeit CVE-2019-5736 in runc, wodurch Root-Berechtigungen auf dem Host erworben werden k√∂nnen</a> "; </li><li>  ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">9 Best Security Practices bei Kubernetes</a> ‚Äú; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">11 Wege, um (nicht) ein Opfer von Kubernetes Hacking zu werden</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RBAC bei Kubernetes verstehen</a> "; </li><li>  ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OPA und SPIFFE - Zwei neue Projekte bei CNCF f√ºr die Sicherheit von Cloud-Anwendungen</a> ‚Äú; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vulnerable Docker VM - ein virtuelles Puzzlespiel von Docker und Pentesting</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440504/">https://habr.com/ru/post/de440504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440490/index.html">Biomodul 1-2</a></li>
<li><a href="../de440492/index.html">S√ºdkorea wird Elektroautos und den Bau neuer Kernkraftwerke aufgeben</a></li>
<li><a href="../de440498/index.html">Die Moskauer Polizei erh√§lt Punkte mit Gesichtserkennung</a></li>
<li><a href="../de440500/index.html">Zuerst</a></li>
<li><a href="../de440502/index.html">So starten Sie Ihren Podcast, ein Leitfaden f√ºr Anf√§nger</a></li>
<li><a href="../de440506/index.html">Die Mondumlaufsonde der NASA hat neue Bilder der chinesischen Chang'e-4-Station aufgenommen - n√§her und klarer</a></li>
<li><a href="../de440508/index.html">So verlieren Sie Ihr Hobby und machen es zu einem erfolgreichen Online-Gesch√§ft in den USA</a></li>
<li><a href="../de440510/index.html">Wer entwickelt 400-GbE-Switches f√ºr Rechenzentren?</a></li>
<li><a href="../de440512/index.html">Teilbare Fakult√§ten</a></li>
<li><a href="../de440514/index.html">Wer wird das Land der Cyborgs bev√∂lkern? Der Entwicklungsstatus der Firma Motorika sprach √ºber den zuk√ºnftigen Status von Russky Island</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>