<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ ğŸ‘©ğŸ¼â€ğŸ’¼ ğŸ—ºï¸ è‡ªè®°å½•RESTæœåŠ¡å™¨ï¼ˆNode.JSï¼ŒTypeScriptï¼ŒKoaï¼ŒJoiï¼ŒSwaggerï¼‰ ğŸ‘©ğŸ½â€ğŸ¨ ğŸ‘µ ğŸ¤“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å·²ç»æœ‰å¾ˆå¤šå…³äºRESTçš„ä¼˜ç¼ºç‚¹çš„æ–‡ç« ï¼ˆç”šè‡³åœ¨æœ‰å…³å®ƒä»¬çš„è¯„è®ºä¸­ï¼‰ã€‚ è€Œä¸”ï¼Œå¦‚æœç¢°å·§éœ€è¦å¼€å‘ä¸€ç§åº”åœ¨å…¶ä¸­åº”ç”¨æ­¤ä½“ç³»ç»“æ„çš„æœåŠ¡ï¼Œé‚£ä¹ˆæ‚¨è‚¯å®šä¼šæ¶‰åŠå…¶æ–‡æ¡£ã€‚ æ¯•ç«Ÿï¼Œåˆ›å»ºæ¯ç§æ–¹æ³•åï¼Œæˆ‘ä»¬å½“ç„¶ç†è§£å…¶ä»–ç¨‹åºå‘˜å°†å¼•ç”¨è¿™äº›æ–¹æ³•ã€‚ å› æ­¤ï¼Œæ–‡æ¡£åº”è¯¥æ˜¯å…¨é¢çš„ï¼Œæœ€é‡è¦çš„æ˜¯ç›¸å…³çš„ã€‚ 

 æ¬¢è¿æ¥åˆ°è¿™åªçŒ«ï¼Œåœ¨è¿™é‡Œæˆ‘å°†æè¿°æˆ‘ä»¬å¦‚ä½•åœ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è‡ªè®°å½•RESTæœåŠ¡å™¨ï¼ˆNode.JSï¼ŒTypeScriptï¼ŒKoaï¼ŒJoiï¼ŒSwaggerï¼‰</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449906/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/hh/en/tghhend0r6amxsxj0mhnr9uy3l4.jpeg"></div><br> å·²ç»æœ‰å¾ˆå¤šå…³äºRESTçš„ä¼˜ç¼ºç‚¹çš„æ–‡ç« ï¼ˆç”šè‡³åœ¨æœ‰å…³å®ƒä»¬çš„è¯„è®ºä¸­ï¼‰ã€‚ è€Œä¸”ï¼Œå¦‚æœç¢°å·§éœ€è¦å¼€å‘ä¸€ç§åº”åœ¨å…¶ä¸­åº”ç”¨æ­¤ä½“ç³»ç»“æ„çš„æœåŠ¡ï¼Œé‚£ä¹ˆæ‚¨è‚¯å®šä¼šæ¶‰åŠå…¶æ–‡æ¡£ã€‚ æ¯•ç«Ÿï¼Œåˆ›å»ºæ¯ç§æ–¹æ³•åï¼Œæˆ‘ä»¬å½“ç„¶ç†è§£å…¶ä»–ç¨‹åºå‘˜å°†å¼•ç”¨è¿™äº›æ–¹æ³•ã€‚ å› æ­¤ï¼Œæ–‡æ¡£åº”è¯¥æ˜¯å…¨é¢çš„ï¼Œæœ€é‡è¦çš„æ˜¯ç›¸å…³çš„ã€‚ <br><br> æ¬¢è¿æ¥åˆ°è¿™åªçŒ«ï¼Œåœ¨è¿™é‡Œæˆ‘å°†æè¿°æˆ‘ä»¬å¦‚ä½•åœ¨å›¢é˜Ÿä¸­è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ <br><a name="habracut"></a><br> æœ‰ç‚¹èƒŒæ™¯ã€‚ <br><br> æˆ‘ä»¬çš„å›¢é˜Ÿçš„ä»»åŠ¡æ˜¯åœ¨çŸ­æ—¶é—´å†…åœ¨<b>Node.jsä¸Šå‘å¸ƒ</b>ä¸­ç­‰å¤æ‚åº¦çš„åç«¯äº§å“ã€‚ å‰ç«¯ç¨‹åºå‘˜å’ŒåŠ¨å‘˜è€…åº”è¯¥ä¸è¯¥äº§å“äº¤äº’ã€‚ <br><br> ç»è¿‡ä¸€ç•ªæ€è€ƒï¼Œæˆ‘ä»¬å†³å®šå°è¯•ä½¿ç”¨<b>TypeScript</b>ä½œä¸º<b>YaP</b> ã€‚ ç²¾å¿ƒè°ƒæ•´çš„<b>TSLint</b>å’Œ<b>Prettier</b>å¸®åŠ©æˆ‘ä»¬åœ¨ç¼–ç /æ±‡ç¼–é˜¶æ®µï¼ˆç”šè‡³åœ¨æäº¤é˜¶æ®µä¹Ÿå¾ˆ<b>æ²™å“‘</b> ï¼‰å®ç°ç›¸åŒçš„ä»£ç æ ·å¼å’Œä¸¥æ ¼æ£€æŸ¥ã€‚ å¼ºç±»å‹ä½¿æ¯ä¸ªäººéƒ½æ¸…æ¥šåœ°æè¿°æ‰€æœ‰å¯¹è±¡çš„æ¥å£å’Œç±»å‹ã€‚ æ˜“äºé˜…è¯»å’Œç†è§£æ­¤å‡½æ•°å°†ä»€ä¹ˆä½œä¸ºè¾“å…¥å‚æ•°ï¼Œå®ƒå°†æœ€ç»ˆè¿”å›ä»€ä¹ˆï¼Œä»¥åŠå¯¹è±¡çš„å“ªäº›å±æ€§æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œå“ªäº›ä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚ è¯¥ä»£ç å¼€å§‹éå¸¸ç±»ä¼¼äºJavaï¼‰ã€‚ å½“ç„¶ï¼Œ <b>TypeDoc</b>ä¸ºæ¯ä¸ªå‡½æ•°å¢åŠ äº†å¯è¯»æ€§ã€‚ <br><br> è¿™æ˜¯ä»£ç çš„å¤–è§‚ï¼š <br><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Interface of all responses */</span></span> export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IResponseData</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ nonce: number; code: number; message?: string; data?: T; } <span class="hljs-comment"><span class="hljs-comment">/** * Utils helper */</span></span> export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TransferObjectUtils</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Compose all data to result response package * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> responseCode - 200 | 400 | 500 * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> message - any info text message * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> data - response data object * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> ready object for REST response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> createResponseObject&lt;T = object&gt;(responseCode: number, message: string, data: T): IResponseData&lt;T&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result: IResponseData&lt;T&gt; = { code: responseCode || <span class="hljs-number"><span class="hljs-number">200</span></span>, nonce: Date.now() }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message) { result.message = message; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data) { result.data = data; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } }</code> </pre> <br> æˆ‘ä»¬è€ƒè™‘äº†åä»£ï¼Œç»´æŠ¤æˆ‘ä»¬çš„ä»£ç å¹¶ä¸éš¾ï¼Œç°åœ¨åº”è¯¥è€ƒè™‘RESTæœåŠ¡å™¨çš„ç”¨æˆ·äº†ã€‚ <br><br> ç”±äºä¸€åˆ‡å·¥ä½œéƒ½éå¸¸è¿…é€Ÿï¼Œå› æ­¤æˆ‘ä»¬äº†è§£åˆ°åˆ†åˆ«ç¼–å†™ä»£ç å’Œå•ç‹¬ç¼–å†™æ–‡æ¡£éå¸¸å›°éš¾ã€‚ å°¤å…¶è¦æ ¹æ®å‰ç«¯æˆ–mobilchikiçš„è¦æ±‚å°†å…¶ä»–å‚æ•°æ·»åŠ åˆ°ç­”æ¡ˆæˆ–è¯·æ±‚ä¸­ï¼Œä¸è¦å¿˜äº†è­¦å‘Šå…¶ä»–äººã€‚ è¿™æ˜¯å‡ºç°æ˜ç¡®è¦æ±‚çš„åœ°æ–¹ï¼š <b>å¸¦æœ‰æ–‡æ¡£</b>çš„<b>ä»£ç åº”å§‹ç»ˆåŒæ­¥</b> ã€‚ è¿™æ„å‘³ç€åº”è¯¥æ’é™¤äººä¸ºå› ç´ ï¼Œæ–‡æ¡£åº”å½±å“ä»£ç ï¼Œè€Œä»£ç åº”å½±å“æ–‡æ¡£ã€‚ <br><br> åœ¨è¿™é‡Œï¼Œæˆ‘æ·±å…¥ç ”ç©¶äº†ä¸ºæ­¤ç›®çš„å¯»æ‰¾åˆé€‚çš„å·¥å…·ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒNPMå­˜å‚¨åº“åªæ˜¯å„ç§æƒ³æ³•å’Œè§£å†³æ–¹æ¡ˆçš„ä»“åº“ã€‚ <br><br> è¯¥å·¥å…·çš„è¦æ±‚å¦‚ä¸‹ï¼š <br><br><ul><li> æ–‡æ¡£ä¸ä»£ç åŒæ­¥ï¼› </li><li>  TypeScriptæ”¯æŒï¼› </li><li> éªŒè¯ä¼ å…¥/ä¼ å‡ºæ•°æ®åŒ…ï¼› </li><li> å®æ—¶å’Œå—æ”¯æŒçš„è½¯ä»¶åŒ…ã€‚ </li></ul><br> æˆ‘ä¸å¾—ä¸ä½¿ç”¨è®¸å¤šä¸åŒçš„è½¯ä»¶åŒ…ç¼–å†™RESTæœåŠ¡ï¼Œå…¶ä¸­æœ€å—æ¬¢è¿çš„è½¯ä»¶åŒ…æ˜¯ï¼štsoaï¼Œswagger-node-expressï¼Œexpress-openapiï¼Œswagger-codegenã€‚ <br><br><img src="https://habrastorage.org/webt/fs/dl/7m/fsdl7mmvvi8c64rgqoks-9loh_i.png"><br><br> ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ²¡æœ‰TypeScriptæ”¯æŒï¼Œåœ¨æŸäº›ç¨‹åºåŒ…éªŒè¯ä¸­ï¼Œæœ‰äº›èƒ½å¤ŸåŸºäºæ–‡æ¡£ç”Ÿæˆä»£ç ï¼Œä½†æ˜¯å®ƒä»¬æ²¡æœ‰æä¾›è¿›ä¸€æ­¥çš„åŒæ­¥ã€‚ <br><br> è¿™æ˜¯æˆ‘ç¢°å·§ç¢°åˆ°çš„åœ°æ–¹ã€‚ ä¸€ä¸ªå¾ˆæ£’çš„è½¯ä»¶åŒ…ï¼Œå®ƒå¯ä»¥å°†Joiæ–¹æ¡ˆä¸­æè¿°çš„å†…å®¹å˜æˆè¯¦å°½çš„æ–‡æ¡£ï¼Œç”šè‡³å¸¦æœ‰TypeScriptæ”¯æŒã€‚ é™¤åŒæ­¥å¤–ï¼Œæ‰€æœ‰é¡¹ç›®å‡è¢«æ‰§è¡Œã€‚ ç»è¿‡ä¸€æ®µæ—¶é—´çš„<b>å¿™ç¢Œ</b>ä¹‹åï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªåºŸå¼ƒçš„ä¸­å›½äººèµ„æ–™åº“ï¼Œè¯¥äººä½¿ç”¨<b>joi-to-swagger</b>å’ŒKoaæ¡†æ¶ã€‚ ç”±äºæˆ‘ä»¬çš„å›¢é˜Ÿä¸­æ²¡æœ‰å¯¹Koaçš„åè§ï¼Œä¹Ÿæ²¡æœ‰ç†ç”±ç›²ç›®è¿½éšExpressçš„è¶‹åŠ¿ï¼Œå› æ­¤æˆ‘ä»¬å†³å®šå°è¯•ä»è¿™ä¸ªå †æ ˆä¸­è„±é¢–è€Œå‡ºã€‚ <br><br> æˆ‘åˆ†å‰äº†è¿™ä¸ªå­˜å‚¨åº“ï¼Œä¿®å¤äº†é”™è¯¯ï¼Œå®Œæˆäº†ä¸€äº›å·¥ä½œï¼Œç°åœ¨å‘å¸ƒäº†æˆ‘å¯¹OpenSource Koa-Joi-Swagger-TSçš„ç¬¬ä¸€ç¯‡è´¡çŒ®ã€‚ æˆ‘ä»¬æˆåŠŸé€šè¿‡äº†è¯¥é¡¹ç›®ï¼Œåœ¨æ­¤ä¹‹åï¼Œå·²ç»æœ‰å…¶ä»–å‡ ä¸ªé¡¹ç›®äº†ã€‚ ç¼–å†™å’Œç»´æŠ¤RESTæœåŠ¡å˜å¾—éå¸¸æ–¹ä¾¿ï¼Œè¿™äº›æœåŠ¡çš„ç”¨æˆ·åªéœ€è¦Swaggeråœ¨çº¿æ–‡æ¡£çš„é“¾æ¥å³å¯ã€‚ åœ¨ä»–ä»¬ä¹‹åï¼Œå¾ˆæ¸…æ¥šå¯ä»¥åœ¨å“ªé‡Œå¼€å‘æ­¤è½¯ä»¶åŒ…ï¼Œå¹¶ä¸”è¿˜è¿›è¡Œäº†å…¶ä»–ä¸€äº›æ”¹è¿›ã€‚ <br><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨<b>Koa-Joi-Swagger-TS</b>ç¼–å†™ä¸€ä¸ªè‡ªæˆ‘æ–‡æ¡£åŒ–çš„RESTæœåŠ¡å™¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘æŠŠå®Œæˆçš„ä»£ç è´´åœ¨è¿™é‡Œ</a> ã€‚ <br><br> ç”±äºæ­¤é¡¹ç›®æ˜¯ä¸€ä¸ªæ¼”ç¤ºï¼Œå› æ­¤æˆ‘ç®€åŒ–å¹¶åˆå¹¶äº†å‡ ä¸ªæ–‡ä»¶ã€‚ é€šå¸¸ï¼Œå¦‚æœç´¢å¼•åˆå§‹åŒ–åº”ç”¨ç¨‹åºå¹¶è°ƒç”¨app.tsæ–‡ä»¶ï¼Œåˆ™è¯¥æ–‡ä»¶å°†æ˜¯å¥½çš„ï¼Œè¿™å°†ä¾æ¬¡è¯»å–èµ„æºï¼Œè°ƒç”¨è¿æ¥åˆ°æ•°æ®åº“ç­‰ã€‚ æœåŠ¡å™¨åº”ä»¥æœ€æ–°å‘½ä»¤å¼€å¤´ï¼ˆä¸‹é¢å°†å¯¹æ­¤è¿›è¡Œæè¿°ï¼‰ã€‚ <br><br> å› æ­¤ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œåˆ›å»ºå…·æœ‰ä»¥ä¸‹å†…å®¹çš„<b>index.ts</b> ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç´¢å¼•</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Koa <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BaseContext } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> bodyParser <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa-bodyparser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Router <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa-router"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SERVER_PORT = <span class="hljs-number"><span class="hljs-number">3002</span></span>; <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">async</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Koa(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Router(); app.use(bodyParser()); router.get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, (ctx: BaseContext, <span class="hljs-attr"><span class="hljs-attr">next</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Root loaded!"</span></span>) }); app .use(router.routes()) .use(router.allowedMethods()); app.listen(SERVER_PORT); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Server listening on http://localhost:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${SERVER_PORT}</span></span></span><span class="hljs-string"> ...`</span></span>); })();</code> </pre><br><br></div></div><br> å½“æ‚¨å¯åŠ¨æ­¤æœåŠ¡æ—¶ï¼Œå°†å¯åŠ¨ä¸€ä¸ªRESTæœåŠ¡å™¨ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå°šä¸çŸ¥é“è¯¥å¦‚ä½•åšã€‚ ç°åœ¨ä»‹ç»ä¸€ä¸‹é¡¹ç›®çš„ä½“ç³»ç»“æ„ã€‚ ç”±äºæˆ‘ä»Javaåˆ‡æ¢åˆ°Node.JSï¼Œå› æ­¤å°è¯•åœ¨æ­¤å¤„æ„å»ºå…·æœ‰ç›¸åŒå±‚çš„æœåŠ¡ã€‚ <br><br><ul><li> æ§åˆ¶å™¨ </li><li> æœåŠ¡é¡¹ç›® </li><li> å‚¨å­˜åº“ </li></ul><br> è®©æˆ‘ä»¬<b>å¼€å§‹</b>è¿æ¥<b>Koa-Joi-Swagger-TS</b> ã€‚ è‡ªç„¶åœ°å®‰è£…å®ƒã€‚ <br><br><pre> <code class="bash hljs">npm install koa-joi-swagger-ts --save</code> </pre> <br> åœ¨å…¶ä¸­åˆ›å»º<b>â€œ controllersâ€</b>æ–‡ä»¶å¤¹å’Œ<b>â€œ schemasâ€</b>æ–‡ä»¶å¤¹ã€‚ åœ¨controllersæ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨<b>base.controller.ts</b> ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">åŸºæœ¬æ§åˆ¶å™¨</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BaseContext } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { controller, description, get, response, summary, tag } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa-joi-swagger-ts"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ApiInfoResponseSchema } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./schemas/apiInfo.response.schema"</span></span>; @controller(<span class="hljs-string"><span class="hljs-string">"/api/v1"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseController</span></span></span><span class="hljs-class"> </span></span>{ @get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @response(<span class="hljs-number"><span class="hljs-number">200</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: ApiInfoResponseSchema }) @tag(<span class="hljs-string"><span class="hljs-string">"GET"</span></span>) @description(<span class="hljs-string"><span class="hljs-string">"Returns text info about version of API"</span></span>) @summary(<span class="hljs-string"><span class="hljs-string">"Show API index page"</span></span>) public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> index(ctx: BaseContext, <span class="hljs-attr"><span class="hljs-attr">next</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"GET /api/v1/"</span></span>); ctx.status = <span class="hljs-number"><span class="hljs-number">200</span></span>; ctx.body = { <span class="hljs-attr"><span class="hljs-attr">code</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">appVersion</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">build</span></span>: <span class="hljs-string"><span class="hljs-string">"1001"</span></span>, <span class="hljs-attr"><span class="hljs-attr">apiVersion</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">reqHeaders</span></span>: ctx.request.headers, <span class="hljs-attr"><span class="hljs-attr">apiDoc</span></span>: <span class="hljs-string"><span class="hljs-string">"/api/v1/swagger.json"</span></span> } } }; }</code> </pre><br></div></div><br> ä»è£…é¥°å™¨ï¼ˆJavaæ³¨é‡Šï¼‰ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¯¥ç±»å°†ä¸è·¯å¾„â€œ / api / v1â€ç›¸å…³è”ï¼Œå†…éƒ¨çš„æ‰€æœ‰æ–¹æ³•éƒ½å°†ä¸æ­¤è·¯å¾„ç›¸å…³ã€‚ <br><br> æ­¤æ–¹æ³•å¯¹å“åº”æ ¼å¼è¿›è¡Œäº†æè¿°ï¼Œåœ¨æ–‡ä»¶â€œ ./schemas/apiInfo.response.schemaâ€ä¸­è¿›è¡Œäº†æè¿°ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">apiInfo.response.schema</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Joi <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"joi"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { definition } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa-joi-swagger-ts"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BaseAPIResponseSchema } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./baseAPI.response.schema"</span></span>; @definition(<span class="hljs-string"><span class="hljs-string">"ApiInfo"</span></span>, <span class="hljs-string"><span class="hljs-string">"Information data about current application and API version"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApiInfoResponseSchema</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseAPIResponseSchema</span></span></span><span class="hljs-class"> </span></span>{ public data = Joi.object({ <span class="hljs-attr"><span class="hljs-attr">appVersion</span></span>: Joi.string() .description(<span class="hljs-string"><span class="hljs-string">"Current version of application"</span></span>) .required(), <span class="hljs-attr"><span class="hljs-attr">build</span></span>: Joi.string().description(<span class="hljs-string"><span class="hljs-string">"Current build version of application"</span></span>), <span class="hljs-attr"><span class="hljs-attr">apiVersion</span></span>: Joi.number() .positive() .description(<span class="hljs-string"><span class="hljs-string">"Version of current REST api"</span></span>) .required(), <span class="hljs-attr"><span class="hljs-attr">reqHeaders</span></span>: Joi.object().description(<span class="hljs-string"><span class="hljs-string">"Request headers"</span></span>), <span class="hljs-attr"><span class="hljs-attr">apiDoc</span></span>: Joi.string() .description(<span class="hljs-string"><span class="hljs-string">"URL path to swagger document"</span></span>) .required() }).required(); }</code> </pre><br></div></div><br> åœ¨Joiä¸­å¯¹æ–¹æ¡ˆè¿›è¡Œè¿™ç§æè¿°çš„å¯èƒ½æ€§éå¸¸å¹¿æ³›ï¼Œå¹¶åœ¨æ­¤å¤„è¿›è¡Œäº†æ›´è¯¦ç»†çš„æè¿°ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.npmjs.com/package/joi-to-swagger</a> <br><br> è¿™æ˜¯æ‰€æè¿°ç±»çš„ç¥–å…ˆï¼ˆå®é™…ä¸Šï¼Œè¿™æ˜¯æˆ‘ä»¬æœåŠ¡çš„æ‰€æœ‰ç­”æ¡ˆçš„åŸºç±»ï¼‰ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">baseAPI.response.schema</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Joi <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"joi"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { definition } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa-joi-swagger-ts"</span></span>; @definition(<span class="hljs-string"><span class="hljs-string">"BaseAPIResponse"</span></span>, <span class="hljs-string"><span class="hljs-string">"Base response entity with base fields"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseAPIResponseSchema</span></span></span><span class="hljs-class"> </span></span>{ public code = Joi.number() .required() .strict() .only(<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span>) .example(<span class="hljs-number"><span class="hljs-number">200</span></span>) .description(<span class="hljs-string"><span class="hljs-string">"Code of operation result"</span></span>); public message = Joi.string().description(<span class="hljs-string"><span class="hljs-string">"message will be filled in some causes"</span></span>); }</code> </pre><br></div></div><br> ç°åœ¨ï¼Œåœ¨Koa-Joi-Swagger-TSç³»ç»Ÿä¸­æ³¨å†Œè¿™äº›ç”µè·¯å’Œæ§åˆ¶å™¨ã€‚ <br> åœ¨index.tsæ—è¾¹ï¼Œåˆ›å»ºå¦ä¸€ä¸ª<b>routing.ts</b>æ–‡ä»¶ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">routing.ts</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { KJSRouter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa-joi-swagger-ts"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BaseController } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./controllers/base.controller"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BaseAPIResponseSchema } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./controllers/schemas/baseAPI.response.schema"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ApiInfoResponseSchema } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./controllers/schemas/apiInfo.response.schema"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SERVER_PORT = <span class="hljs-number"><span class="hljs-number">3002</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> loadRoutes = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KJSRouter({ <span class="hljs-attr"><span class="hljs-attr">swagger</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">info</span></span>: { <span class="hljs-attr"><span class="hljs-attr">version</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">"simple-rest"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">host</span></span>: <span class="hljs-string"><span class="hljs-string">`localhost:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${SERVER_PORT}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-attr"><span class="hljs-attr">basePath</span></span>: <span class="hljs-string"><span class="hljs-string">"/api/v1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">schemes</span></span>: [<span class="hljs-string"><span class="hljs-string">"http"</span></span>], <span class="hljs-attr"><span class="hljs-attr">paths</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">definitions</span></span>: {} }); router.loadDefinition(ApiInfoResponseSchema); router.loadDefinition(BaseAPIResponseSchema); router.loadController(BaseController); router.setSwaggerFile(<span class="hljs-string"><span class="hljs-string">"swagger.json"</span></span>); router.loadSwaggerUI(<span class="hljs-string"><span class="hljs-string">"/api/docs"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> router.getRouter(); };</code> </pre><br></div></div><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†KJSRouterç±»çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹æœ¬è´¨ä¸Šæ˜¯Koa-routerï¼Œä½†æ˜¯æ·»åŠ äº†ä¸­é—´ä»¶å’Œå¤„ç†ç¨‹åºã€‚ <br><br> å› æ­¤ï¼Œåœ¨<b>index.ts</b>æ–‡ä»¶ä¸­ï¼Œ <b>æˆ‘ä»¬</b>åªéœ€æ›´æ”¹ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Router();</code> </pre> <br> åœ¨ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> router = loadRoutes();</code> </pre> <br> å¥½å§ï¼Œåˆ é™¤ä¸å¿…è¦çš„å¤„ç†ç¨‹åºï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç´¢å¼•</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Koa <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> bodyParser <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"koa-bodyparser"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { loadRoutes } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./routing"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SERVER_PORT = <span class="hljs-number"><span class="hljs-number">3002</span></span>; <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">async</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Koa(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> router = loadRoutes(); app.use(bodyParser()); app .use(router.routes()) .use(router.allowedMethods()); app.listen(SERVER_PORT); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Server listening on http://localhost:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${SERVER_PORT}</span></span></span><span class="hljs-string"> ...`</span></span>); })();</code> </pre><br></div></div><br> å¯åŠ¨æ­¤æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨3æ¡è·¯çº¿ï¼š <br>  <b>1. / api / v1-</b>è®°å½•çš„è·¯ç”± <br> åœ¨æˆ‘çš„æƒ…å†µä¸‹æ˜¾ç¤ºï¼š <br><br><div class="spoiler">  <b class="spoiler_title">httpï¼š//æœ¬åœ°ä¸»æœºï¼š3002 / api / v1</b> <div class="spoiler_text"><pre> <code class="json hljs">{ code: <span class="hljs-number"><span class="hljs-number">200</span></span>, data: { appVersion: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, build: <span class="hljs-string"><span class="hljs-string">"1001"</span></span>, apiVersion: <span class="hljs-number"><span class="hljs-number">1</span></span>, reqHeaders: { host: <span class="hljs-string"><span class="hljs-string">"localhost:3002"</span></span>, connection: <span class="hljs-string"><span class="hljs-string">"keep-alive"</span></span>, cache-control: <span class="hljs-string"><span class="hljs-string">"max-age=0"</span></span>, upgrade-insecure-requests: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, user-agent: <span class="hljs-string"><span class="hljs-string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36"</span></span>, accept: <span class="hljs-string"><span class="hljs-string">"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3"</span></span>, accept-encoding: <span class="hljs-string"><span class="hljs-string">"gzip, deflate, br"</span></span>, accept-language: <span class="hljs-string"><span class="hljs-string">"uk-UA,uk;q=0.9,ru;q=0.8,en-US;q=0.7,en;q=0.6"</span></span> }, apiDoc: <span class="hljs-string"><span class="hljs-string">"/api/v1/swagger.json"</span></span> } }</code> </pre><br></div></div><br> å’Œä¸¤æ¡æœåŠ¡è·¯çº¿ï¼š <br><br>  <b>2. /api/v1/swagger.json</b> <br><br><div class="spoiler">  <b class="spoiler_title">swagger.json</b> <div class="spoiler_text"><pre> <code class="json hljs">{ swagger: <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>, info: { version: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, title: <span class="hljs-string"><span class="hljs-string">"simple-rest"</span></span> }, host: <span class="hljs-string"><span class="hljs-string">"localhost:3002"</span></span>, basePath: <span class="hljs-string"><span class="hljs-string">"/api/v1"</span></span>, schemes: [ <span class="hljs-string"><span class="hljs-string">"http"</span></span> ], paths: { /: { get: { tags: [ <span class="hljs-string"><span class="hljs-string">"GET"</span></span> ], summary: <span class="hljs-string"><span class="hljs-string">"Show API index page"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"Returns text info about version of API"</span></span>, consumes: [ <span class="hljs-string"><span class="hljs-string">"application/json"</span></span> ], produces: [ <span class="hljs-string"><span class="hljs-string">"application/json"</span></span> ], responses: { 200: { description: <span class="hljs-string"><span class="hljs-string">"Information data about current application and API version"</span></span>, schema: { type: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, $ref: <span class="hljs-string"><span class="hljs-string">"#/definitions/ApiInfo"</span></span> } } }, security: [ ] } } }, definitions: { BaseAPIResponse: { type: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, required: [ <span class="hljs-string"><span class="hljs-string">"code"</span></span> ], properties: { code: { type: <span class="hljs-string"><span class="hljs-string">"number"</span></span>, format: <span class="hljs-string"><span class="hljs-string">"float"</span></span>, enum: [ <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span> ], description: <span class="hljs-string"><span class="hljs-string">"Code of operation result"</span></span>, example: { value: <span class="hljs-number"><span class="hljs-number">200</span></span> } }, message: { type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"message will be filled in some causes"</span></span> } } }, ApiInfo: { type: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, required: [ <span class="hljs-string"><span class="hljs-string">"code"</span></span>, <span class="hljs-string"><span class="hljs-string">"data"</span></span> ], properties: { code: { type: <span class="hljs-string"><span class="hljs-string">"number"</span></span>, format: <span class="hljs-string"><span class="hljs-string">"float"</span></span>, enum: [ <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span> ], description: <span class="hljs-string"><span class="hljs-string">"Code of operation result"</span></span>, example: { value: <span class="hljs-number"><span class="hljs-number">200</span></span> } }, message: { type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"message will be filled in some causes"</span></span> }, data: { type: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, required: [ <span class="hljs-string"><span class="hljs-string">"appVersion"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiVersion"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiDoc"</span></span> ], properties: { appVersion: { type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"Current version of application"</span></span> }, build: { type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"Current build version of application"</span></span> }, apiVersion: { type: <span class="hljs-string"><span class="hljs-string">"number"</span></span>, format: <span class="hljs-string"><span class="hljs-string">"float"</span></span>, minimum: <span class="hljs-number"><span class="hljs-number">1</span></span>, description: <span class="hljs-string"><span class="hljs-string">"Version of current REST api"</span></span> }, reqHeaders: { type: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, properties: { }, description: <span class="hljs-string"><span class="hljs-string">"Request headers"</span></span> }, apiDoc: { type: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, description: <span class="hljs-string"><span class="hljs-string">"URL path to swagger document"</span></span> } } } } } } }</code> </pre><br></div></div><br>  <b>3. / API /æ–‡æ¡£</b> <br><br> è¿™æ˜¯å¸¦æœ‰Swagger UIçš„é¡µé¢-è¿™æ˜¯Swaggeræ–¹æ¡ˆçš„éå¸¸æ–¹ä¾¿çš„å¯è§†è¡¨ç¤ºå½¢å¼ï¼Œåœ¨å…¶ä¸­ï¼Œé™¤äº†æ–¹ä¾¿æŸ¥çœ‹ä¹‹å¤–ï¼Œæ‚¨ç”šè‡³å¯ä»¥ç”Ÿæˆè¯·æ±‚å¹¶ä»æœåŠ¡å™¨è·å–çœŸå®ç­”æ¡ˆã€‚ <br><br><img src="https://habrastorage.org/webt/go/zc/fg/gozcfgxxsvy_qu_us6jbpgutxdo.png"><br><br> æ­¤ç”¨æˆ·ç•Œé¢éœ€è¦è®¿é—®swagger.jsonæ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŒ…å«å…ˆå‰è·¯ç”±çš„åŸå› ã€‚ <br><br> å¥½å§ï¼Œä¸€åˆ‡ä¼¼ä¹éƒ½åœ¨é‚£é‡Œï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯ï¼.. <br><br> éšç€æ—¶é—´çš„æµé€ï¼Œæˆ‘ä»¬åœˆå‡ºä¸€ä¸ªè¿™æ ·çš„å®ç°ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šä»£ç é‡å¤ã€‚ åœ¨æ§åˆ¶å™¨éœ€è¦æ‰§è¡Œç›¸åŒæ“ä½œçš„æƒ…å†µä¸‹ã€‚ æ­£æ˜¯ç”±äºè¿™ä¸ªåŸå› ï¼Œæˆ‘åæ¥å®Œæˆäº†è¯¥ç¨‹åºåŒ…ï¼Œå¹¶æ·»åŠ äº†æè¿°æ§åˆ¶å™¨çš„â€œåŒ…è£…å™¨â€çš„åŠŸèƒ½ã€‚ <br><br> è€ƒè™‘è¿™ç§æœåŠ¡çš„ä¸€ä¸ªä¾‹å­ã€‚ <br><br> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰å‡ ç§æ–¹æ³•çš„â€œç”¨æˆ·â€æ§åˆ¶å™¨ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">è·å–æ‰€æœ‰ç”¨æˆ·</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> @get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @response(<span class="hljs-number"><span class="hljs-number">200</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: UsersResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">400</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">500</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @tag(<span class="hljs-string"><span class="hljs-string">"User"</span></span>) @description(<span class="hljs-string"><span class="hljs-string">"Returns list of all users"</span></span>) @summary(<span class="hljs-string"><span class="hljs-string">"Get all users"</span></span>) public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> getAllUsers(ctx: BaseContext): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"GET /api/v1/users"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> message = <span class="hljs-string"><span class="hljs-string">"Get all users error"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> code = <span class="hljs-number"><span class="hljs-number">400</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> serviceResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> getAllUsers(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult) { data = serviceResult; code = <span class="hljs-number"><span class="hljs-number">200</span></span>; message = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Error while getting users list"</span></span>); code = <span class="hljs-number"><span class="hljs-number">500</span></span>; } ctx.status = code; ctx.body = TransferObjectUtils.createResponseObject(code, message, data); };</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">æ›´æ–°ç”¨æˆ·</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> @post(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @parameter(<span class="hljs-string"><span class="hljs-string">"body"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: UsersRequestSchema }, ENUM_PARAM_IN.body) @response(<span class="hljs-number"><span class="hljs-number">200</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">400</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">500</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @tag(<span class="hljs-string"><span class="hljs-string">"User"</span></span>) @description(<span class="hljs-string"><span class="hljs-string">"Update user data"</span></span>) @summary(<span class="hljs-string"><span class="hljs-string">"Update user data"</span></span>) public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> updateUser(ctx: BaseContext): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"POST /api/v1/users"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> message = <span class="hljs-string"><span class="hljs-string">"Update user data error"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> code = <span class="hljs-number"><span class="hljs-number">400</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> serviceResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> updateUser(ctx.request.body.data); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult) { code = <span class="hljs-number"><span class="hljs-number">200</span></span>; message = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Error while updating user"</span></span>); code = <span class="hljs-number"><span class="hljs-number">500</span></span>; } ctx.status = code; ctx.body = TransferObjectUtils.createResponseObject(code, message, data); };</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">æ’å…¥ç”¨æˆ·</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> @put(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @parameter(<span class="hljs-string"><span class="hljs-string">"body"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: UsersRequestSchema }, ENUM_PARAM_IN.body) @response(<span class="hljs-number"><span class="hljs-number">200</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">400</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">500</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @tag(<span class="hljs-string"><span class="hljs-string">"User"</span></span>) @description(<span class="hljs-string"><span class="hljs-string">"Insert new user"</span></span>) @summary(<span class="hljs-string"><span class="hljs-string">"Insert new user"</span></span>) public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> insertUser(ctx: BaseContext): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"PUT /api/v1/users"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> message = <span class="hljs-string"><span class="hljs-string">"Insert new user error"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> code = <span class="hljs-number"><span class="hljs-number">400</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> data = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> serviceResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> insertUser(ctx.request.body.data); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult) { code = <span class="hljs-number"><span class="hljs-number">200</span></span>; message = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Error while inserting user"</span></span>); code = <span class="hljs-number"><span class="hljs-number">500</span></span>; } ctx.status = code; ctx.body = TransferObjectUtils.createResponseObject(code, message, data); };</code> </pre><br></div></div><br> å¦‚æ‚¨æ‰€è§ï¼Œè¿™ä¸‰ä¸ªæ§åˆ¶å™¨æ–¹æ³•åŒ…å«é‡å¤çš„ä»£ç ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç°åœ¨åˆ©ç”¨è¿™ä¸ªæœºä¼šã€‚ <br><br> é¦–å…ˆï¼Œä¾‹å¦‚ï¼Œç›´æ¥åœ¨<b>routing.ts</b>æ–‡ä»¶ä¸­åˆ›å»ºåŒ…è£…å‡½æ•°ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> controllerDecorator = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (controller: <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>, <span class="hljs-attr"><span class="hljs-attr">ctx</span></span>: BaseContext, <span class="hljs-attr"><span class="hljs-attr">next</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>, <span class="hljs-attr"><span class="hljs-attr">summary</span></span>: string): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ctx.request.method}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ctx.request.url}</span></span></span><span class="hljs-string">`</span></span>); ctx.body = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; ctx.status = <span class="hljs-number"><span class="hljs-number">400</span></span>; ctx.statusMessage = <span class="hljs-string"><span class="hljs-string">`Error while executing '</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${summary}</span></span></span><span class="hljs-string">'`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> controller(ctx); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(e, <span class="hljs-string"><span class="hljs-string">`Error while executing '</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${summary}</span></span></span><span class="hljs-string">'`</span></span>); ctx.status = <span class="hljs-number"><span class="hljs-number">500</span></span>; } ctx.body = TransferObjectUtils.createResponseObject(ctx.status, ctx.statusMessage, ctx.body); };</code> </pre><br> ç„¶åå°†å…¶è¿æ¥åˆ°æˆ‘ä»¬çš„æ§åˆ¶å™¨ã€‚ <br><br> æ›´æ¢ <br><br><pre> <code class="javascript hljs">router.loadController(UserController);</code> </pre> <br> åœ¨ <br><br><pre> <code class="javascript hljs">router.loadController(UserController, controllerDecorator);</code> </pre> <br> å¥½å§ï¼Œè®©æˆ‘ä»¬ç®€åŒ–æ§åˆ¶å™¨æ–¹æ³• <br><br><div class="spoiler">  <b class="spoiler_title">ç”¨æˆ·æ§åˆ¶å™¨</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> @get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @response(<span class="hljs-number"><span class="hljs-number">200</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: UsersResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">400</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">500</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @tag(<span class="hljs-string"><span class="hljs-string">"User"</span></span>) @description(<span class="hljs-string"><span class="hljs-string">"Returns list of all users"</span></span>) @summary(<span class="hljs-string"><span class="hljs-string">"Get all users"</span></span>) public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> getAllUsers(ctx: BaseContext): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> serviceResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> getAllUsers(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult) { ctx.body = serviceResult; ctx.status = <span class="hljs-number"><span class="hljs-number">200</span></span>; ctx.statusMessage = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }; @post(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @parameter(<span class="hljs-string"><span class="hljs-string">"body"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: UsersRequestSchema }, ENUM_PARAM_IN.body) @response(<span class="hljs-number"><span class="hljs-number">200</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">400</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">500</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @tag(<span class="hljs-string"><span class="hljs-string">"User"</span></span>) @description(<span class="hljs-string"><span class="hljs-string">"Update user data"</span></span>) @summary(<span class="hljs-string"><span class="hljs-string">"Update user data"</span></span>) public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> updateUser(ctx: BaseContext): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> serviceResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> updateUser(ctx.request.body.data); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult) { ctx.status = <span class="hljs-number"><span class="hljs-number">200</span></span>; ctx.statusMessage = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }; @put(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) @parameter(<span class="hljs-string"><span class="hljs-string">"body"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: UsersRequestSchema }, ENUM_PARAM_IN.body) @response(<span class="hljs-number"><span class="hljs-number">200</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">400</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @response(<span class="hljs-number"><span class="hljs-number">500</span></span>, { <span class="hljs-attr"><span class="hljs-attr">$ref</span></span>: BaseAPIResponseSchema }) @tag(<span class="hljs-string"><span class="hljs-string">"User"</span></span>) @description(<span class="hljs-string"><span class="hljs-string">"Insert new user"</span></span>) @summary(<span class="hljs-string"><span class="hljs-string">"Insert new user"</span></span>) public <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> insertUser(ctx: BaseContext): <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> serviceResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> insertUser(ctx.request.body.data); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (serviceResult) { ctx.status = <span class="hljs-number"><span class="hljs-number">200</span></span>; ctx.statusMessage = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } };</code> </pre><br></div></div><br> åœ¨æ­¤<b>controllerDecoratorä¸­ï¼Œ</b>æ‚¨å¯ä»¥æ·»åŠ ä»»ä½•æ£€æŸ¥é€»è¾‘æˆ–è¾“å…¥/è¾“å‡ºçš„è¯¦ç»†æ—¥å¿—ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘æŠŠå®Œæˆçš„ä»£ç è´´åœ¨è¿™é‡Œ</a> ã€‚ <br><br> ç°åœ¨æˆ‘ä»¬å‡ ä¹å·²ç»å‡†å¤‡å¥½CRUDã€‚ åˆ é™¤å¯ä»¥ç±»æ¨ã€‚ å®é™…ä¸Šï¼Œç°åœ¨è¦ç¼–å†™ä¸€ä¸ªæ–°çš„æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬å¿…é¡»ï¼š <br><br><ol><li> åˆ›å»ºæ§åˆ¶å™¨æ–‡ä»¶ </li><li> å°†å…¶æ·»åŠ åˆ°routing.ts </li><li> æè¿°æ–¹æ³• </li><li> åœ¨æ¯ç§æ–¹æ³•ä¸­ï¼Œä½¿ç”¨è¾“å…¥/è¾“å‡ºç”µè·¯ </li><li> æè¿°è¿™äº›æ–¹æ¡ˆ </li><li> åœ¨routing.tsä¸­è¿æ¥è¿™äº›æ–¹æ¡ˆ </li></ol><br> å¦‚æœä¼ å…¥çš„æ•°æ®åŒ…ä¸æ–¹æ¡ˆä¸åŒ¹é…ï¼Œåˆ™æˆ‘ä»¬çš„RESTæœåŠ¡çš„ç”¨æˆ·å°†æ”¶åˆ°400é”™è¯¯ï¼Œå¹¶æè¿°äº†ç¡®åˆ‡çš„é”™è¯¯ã€‚ å¦‚æœè¾“å‡ºæ•°æ®åŒ…æ— æ•ˆï¼Œåˆ™å°†ç”Ÿæˆ500é”™è¯¯ã€‚ <br><br> å¥½å§ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªæ„‰å¿«çš„çäº‹ã€‚ åœ¨Swagger UIä¸­ï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•æ–¹æ³•ä¸Šä½¿ç”¨â€œ <b>è¯•ç”¨</b> â€åŠŸèƒ½ã€‚ å°†é€šè¿‡curlå‘è¿è¡Œçš„æœåŠ¡ç”Ÿæˆä¸€ä¸ªè¯·æ±‚ï¼Œå½“ç„¶æ‚¨å¯ä»¥ç«‹å³çœ‹åˆ°ç»“æœã€‚ ä¸ºæ­¤ï¼Œåœ¨ç”µè·¯ä¸­æè¿°å‚æ•°â€œ <b>ç¤ºä¾‹</b> â€éå¸¸æ–¹ä¾¿ã€‚ å› ä¸ºå°†æ ¹æ®æè¿°çš„ç¤ºä¾‹ç«‹å³ä½¿ç”¨ç°æˆçš„è½¯ä»¶åŒ…ç”Ÿæˆè¯·æ±‚ã€‚ <br><br><img src="https://habrastorage.org/webt/gk/iq/hi/gkiqhirxja87xqofboi5oo9af1w.png"><br><br><h4>  <b>ç»“è®º</b> </h4><br> æœ€ç»ˆï¼Œç»“æœéå¸¸æ–¹ä¾¿ä¸”æœ‰ç”¨ã€‚ èµ·åˆï¼Œä»–ä»¬ä¸æƒ³éªŒè¯ä¼ å‡ºæ•°æ®åŒ…ï¼Œä½†éšååœ¨æ­¤éªŒè¯çš„å¸®åŠ©ä¸‹ï¼Œä»–ä»¬å‘ç°äº†å‡ ä¸ªé‡è¦çš„é”™è¯¯ã€‚ å½“ç„¶ï¼Œæ‚¨ä¸èƒ½å®Œå…¨ä½¿ç”¨Joiçš„æ‰€æœ‰åŠŸèƒ½ï¼ˆå› ä¸ºæˆ‘ä»¬å—joi-swaggerçš„é™åˆ¶ï¼‰ï¼Œä½†è¿™äº›åŠŸèƒ½å·²ç»è¶³å¤Ÿã€‚ <br><br> ç°åœ¨ï¼Œæ–‡æ¡£å§‹ç»ˆåœ¨çº¿ï¼Œå¹¶ä¸”å§‹ç»ˆä¸¥æ ¼å¯¹åº”äºä»£ç -è¿™æ˜¯ä¸»è¦å†…å®¹ã€‚ <br> è¿˜æœ‰ä»€ä¹ˆå…¶ä»–æƒ³æ³•ï¼Ÿ <br><br> æ˜¯å¦å¯ä»¥æ·»åŠ å¿«é€Ÿæ”¯æŒï¼Ÿ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘åˆšè¯»è¿‡</a> ã€‚ <br><br> ä¸€æ¬¡æè¿°å®ä½“çœŸçš„å¾ˆé…·ã€‚ å› ä¸ºç°åœ¨å¿…é¡»åŒæ—¶ç¼–è¾‘ç”µè·¯å’Œæ¥å£ã€‚ <br><br> ä¹Ÿè®¸æ‚¨ä¼šæœ‰ä¸€äº›æœ‰è¶£çš„æƒ³æ³•ã€‚ æ›´å¥½çš„è¯·æ±‚è¯·æ±‚:) <br> æ¬¢è¿è´¡çŒ®è€…ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN449906/">https://habr.com/ru/post/zh-CN449906/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN449890/index.html">Yandexé‡‡è®¿ä¸­çš„ç®—æ³•éƒ¨åˆ†å¦‚ä½•</a></li>
<li><a href="../zh-CN449896/index.html">å¦‚ä½•æ”¾ç‰§çŒ«ï¼Œæˆ–ç»™å¹´è½»ç¨‹åºå‘˜çš„å»ºè®®</a></li>
<li><a href="../zh-CN449898/index.html">ç”±å†…è€Œå¤–çš„æ–°é—»</a></li>
<li><a href="../zh-CN449902/index.html">æœ€å°çš„æœ‰çº¿ç”µè§†ç½‘ç»œã€‚ ç¬¬2éƒ¨åˆ†ï¼šç»„æˆå’Œæ³¢å½¢</a></li>
<li><a href="../zh-CN449904/index.html">åˆ›å»ºç”¨äºåŠ«æŒdllæ“ä½œæ£€æŸ¥çš„ä»£ç†dll</a></li>
<li><a href="../zh-CN449910/index.html">GitLab Shell Runnerã€‚ ä½¿ç”¨Docker Composeç«äº‰æ€§åœ°å¯åŠ¨æµ‹è¯•æœåŠ¡</a></li>
<li><a href="../zh-CN449916/index.html">é«˜è´Ÿè½½æƒ…å†µä¸‹éƒ¨ç½²PHPä»£ç çš„5ç§æ–¹æ³•</a></li>
<li><a href="../zh-CN449918/index.html">å¸¦æœ‰ä¼ æ„Ÿå™¨çš„çº¢å¤–æµ‹æ¸©ä»ªMLX90614</a></li>
<li><a href="../zh-CN449920/index.html">æ›´æ”¹CMSæ—¶ä¼šæŸå®³SEOçš„10ç§éæ ‡å‡†æ–¹å¼ï¼ˆ+1å¥–åŠ±ï¼‰</a></li>
<li><a href="../zh-CN449922/index.html">è¯•é©¾nanoCAD SPDS Metalwork 1.2ã€‚ ç¬¬ä¸‰éƒ¨åˆ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>