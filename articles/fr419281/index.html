<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🤝‍👨🏼 👏🏽 🆎 rcm - gestionnaire de fichiers rc: réglage et utilisation 🏂🏼 👩 🕺🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Contexte 


 Lorsque plus d'un appareil fonctionnel apparaît entre vos mains, alors% username% vient à vous pour avoir la même configuration ici et là...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>rcm - gestionnaire de fichiers rc: réglage et utilisation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419281/"><h4 id="predystoriya">  Contexte </h4><br><p>  Lorsque plus d'un appareil fonctionnel apparaît entre vos mains, alors% username% vient à vous pour avoir la même configuration ici et là, au travail et à la maison.  Quand je viens de commencer à essayer de synchroniser des fichiers, Dropbox et Yandex.disk me suffisaient.  Ils étaient particulièrement bons pour synchroniser les documents et l'historique du jabber, mais dès que j'ai essayé de les adapter au .bashrc, .vimrc et autres, divers effets secondaires sont apparus.  Par exemple, avec des liens symboliques dans les deux systèmes, c'est un désastre complet, ± il n'y a une sorte d'histoire que dans la boîte de dépôt, eh bien, je devrais écrire des scripts pour gérer le zoo moi-même.  Certes, quelque chose a déjà été écrit, <a name="habracut"></a>  non? </p><br><h4 id="istoriya">  L'histoire </h4><br><p> Sur la page <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://dotfiles.github.io/, vous pouvez</a> voir un peu moins d'une centaine d'utilitaires, plug-ins et approches différents pour gérer les configurations - des programmes personnalisés aux programmes individuels aux programmes universels.  Je vous conseille fortement de vous familiariser, il est fort possible que vous arrêtiez la lecture et que vous choisissiez quelque chose de plus acceptable. </p><br><p> Le sens général de la philosophie se résume au fait que les configurations sont dans le dépôt% your_favorit_vcs% sous une certaine forme et de là se glissent dans <code>$HOME</code> .  Puisque% default_vcs% est maintenant git, je vais l'utiliser plus loin. </p><br><p>  J'ai commencé ma connaissance de dotfiles-in-git avec un utilitaire appelé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dotgit</a> .  Cela a commencé comme «simple et direct en pure bash».  Mais au moment où l'auteur y a ajouté un cryptage avec la possibilité de créer des liens symboliques directement vers le répertoire, et j'ai essayé de tout comprendre (vers le début de 2017), un concombre de mon cerveau s'est produit dans mon dossier personnel avec des liens brisés et une récupération manuelle des fichiers de la gita.  En général, une journée a été allouée pour rechercher des alternatives avec la possibilité de régler le comportement et une configuration simple. </p><br><h2 id="rcm">  rcm </h2><br><p>  Ainsi, comme déjà mentionné, il existe de nombreuses options pour les utilitaires.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rcm a</a> été choisi pour les raisons suivantes: </p><br><ul><li>  Pure sh, pas même bash.  Il ne tire ni python ni rubis, rien d'autre </li><li>  Vous permet de configurer le comportement de livraison de la configuration </li><li>  La présence de pages de manuel </li><li>  Personnalisation du déploiement à l'aide des dossiers <code>tag-*</code> et <code>host-*</code> </li><li>  Long soutien, projet en développement vivant </li><li>  Au moment de l'utilisation, à ce jour, cela n'est pas pertinent, mais les crochets <code>{pre,post}-{up,down}</code> pour la mise à jour et l'effacement des fichiers de configuration sont pris en charge </li></ul><br><p>  Le point le plus important est, bien sûr, la documentation, car sans elle, je ne serais pas allé jusqu'à personnaliser entièrement le comportement de déploiement. </p><br><p>  Après l'installation du gestionnaire, 4 commandes seront disponibles: </p><br><ul><li>  lsrc - Liste à quoi ressemblera la configuration après <code>rcup</code> </li><li>  mkrc - ajoute le fichier à <code>~/.dotfiles</code> (par défaut, vous pouvez le changer en <code>~/.rcrc</code> ), puis réinstallez-le.  Si vous avez besoin d'un comportement non standard, il est préférable de d'abord corriger <code>~/.rcrc</code> , sinon il peut y avoir des effets spéciaux inattendus. </li><li>  rcdn - supprime tous les fichiers de configuration gérés par rcm. </li><li>  rcup - installe tous les fichiers.  Si vous utilisez l'option <code>-g</code> , un script shell séparé sera généré, qui peut également être placé dans le référentiel pour une utilisation sur les hôtes où le gestionnaire n'est pas installé. </li></ul><br><p>  En tant que tel, le <code>~/.rcrc</code> fait simplement partie du script shell inclus avec la commande <code>source</code> chaque appel des utilitaires rcm.  Sur cette base, il peut être rendu modulaire, avec une logique intégrée.  Selon la documentation, son contenu vous permet de contrôler finement les paramètres des fichiers dot à l'aide de <code>rcup</code> , par exemple: </p><br><ul><li>  comportement par défaut: pour chaque fichier à l'intérieur de <code>~/.dotfiles</code> , un lien symbolique est créé dans le dossier de départ sans point de départ (par exemple, <code>'/home/felixoid/.dotfiles/bashrc' -&gt; '/home/felixoid/.bashrc'</code> , <code>'/home/felixoid/.dotfiles/README.md' -&gt; '/home/felixoid/.README.md'</code> ) </li><li>  daddy <code>~/.vim</code> : est un lien symbolique vers le dossier <code>/home/felixoid/.dotfiles/vim</code> (option SYMLINK_DIRS) </li><li>  papa <code>~/.some_secret_files</code> : copié depuis <code>/home/felixoid/.dotfiles/tag-dmz/some_secret_files</code> (option COPY_ALWAYS) </li><li>  le fichier <code>~/.README.md</code> est en fait ignoré (option EXCLUDES) </li><li>  le fichier <code>'/home/felixoid/.zshenv'</code> est un lien symbolique vers <code>'/home/felixoid/.dotfiles/tag-zsh/zshenv'</code> (paramètre TAGS) </li><li>  le <code>~/bin</code> également géré avec rcm, son contenu provient de <code>/home/felixoid/.dotfiles/bin/</code> (paramètre UNDOTTED) </li></ul><br><p>  Parfois, il peut être nécessaire de mentionner le même fichier dans plusieurs options.  Par exemple, l'extrait .rcrc doit ressembler à ceci si tout le contenu de <code>~/bin</code> doit être dans <code>~/.dotfiles/tag-bins/bin</code> et copié tel <code>~/.dotfiles/tag-bins/bin</code> : </p><br><pre> <code class="hljs objectivec">COPY_ALWAYS=<span class="hljs-string"><span class="hljs-string">"bin/*"</span></span> TAGS=<span class="hljs-string"><span class="hljs-string">"bins"</span></span> UNDOTTED=<span class="hljs-string"><span class="hljs-string">"bin"</span></span></code> </pre> <br><p>  En fait, un exemple de la façon d'organiser le contenu du dossier <code>~/.dotfiles</code> trouve dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">référentiel</a> avec dotfiles.  Des informations complètes sont contenues dans la documentation, n'hésitez pas à lire les pages de manuel suivantes: lsrc (1), mkrc (1), rcrc (5) rcdn (1), rcm (7), rcup (1). </p><br><h4 id="neskazannoe-i-nesdelannoe">  Untold and Untold </h4><br><p>  Pendant que je tapais ce texte, de bonnes idées me sont venues sur la façon d'organiser le stockage des données sensibles dans un référentiel public.  Par exemple, j'ai toujours été préoccupé par la question: est-ce que cela a du sens et est-il possible de sauvegarder des clés gpg et ssh?  Juste pour cela, les crochets pourraient être utiles: emballez-les dans du goudron, puis chiffrez avec le même gpg symétrique, puis déballez.  J'y consacrerai peut-être la note suivante après la mise en œuvre.  Ou peut-être que c'est un autre vélo?  Et tout a déjà été inventé?  Ajoutez les commentaires si c'est réellement le cas. </p><br><p>  J'espère vraiment que ce matériel suscitera l'intérêt et le désir d'essayer d'organiser la gestion des configs en mode semi-automatique! </p><br><p>  Et une petite enquête: </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419281/">https://habr.com/ru/post/fr419281/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419269/index.html">Rébus dans le code et comment les décrypter. Le pouvoir secret des identifiants</a></li>
<li><a href="../fr419271/index.html">Analogues en Python et JavaScript. Quatrième partie</a></li>
<li><a href="../fr419273/index.html">Écriture d'un module du noyau Linux: GPIO avec prise en charge IRQ</a></li>
<li><a href="../fr419277/index.html">Rubans thermiques avec indice de protection IP68. Convient pour la lumière dans un bain public</a></li>
<li><a href="../fr419279/index.html">Le condensé de matériaux intéressants pour le développeur mobile # 264 (30 juillet - 5 août)</a></li>
<li><a href="../fr419283/index.html">Bezos jette de l'argent et des ingénieurs pour développer une fusée en lien avec l'accélération de la course à l'espace</a></li>
<li><a href="../fr419289/index.html">Écoutez et parlez: annonce de HolyJS 2018 à Moscou</a></li>
<li><a href="../fr419291/index.html">Annonce de Heisenbug 2018 Moscou: réponses à toutes les questions</a></li>
<li><a href="../fr419295/index.html">Multimodularité et poignard 2. Conférence Yandex</a></li>
<li><a href="../fr419297/index.html">Affichage des commentaires sur Habré dans l'ordre d'ajout</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>