<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โซ๏ธ ๐ฉโ๐ ๐ ุฎูู ุจุฑุฌ ุงูุฏูุงุน ูู ุงููุญุฏุฉ ุ ุงูุฌุฒุก 1 ๐ธ ๐ฉโ๐ง ๐๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงููุฌุงู 


- ุฅูุดุงุก ุญูู ุงูุจูุงุท. 
- ุงุจุญุซ ุนู ูุณุงุฑุงุช ุจุงุณุชุฎุฏุงู ุงูุจุญุซ ุงููุชุณุน ุฃููุงู. 
- ุชุทุจูู ุฏุนู ุงูุจูุงุท ุงููุงุฑุบ ูููุงูุฉ ุ ููุฐูู ุจูุงุท ุงูุฌุฏุฑุงู. 
- ุชุญุฑูุฑ ุงููุญุชูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฎูู ุจุฑุฌ ุงูุฏูุงุน ูู ุงููุญุฏุฉ ุ ุงูุฌุฒุก 1</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449798/" style=";text-align:right;direction:rtl"><h1 style=";text-align:right;direction:rtl">  ุงููุฌุงู </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุญูู ุงูุจูุงุท. </li><li style=";text-align:right;direction:rtl">  ุงุจุญุซ ุนู ูุณุงุฑุงุช ุจุงุณุชุฎุฏุงู ุงูุจุญุซ ุงููุชุณุน ุฃููุงู. </li><li style=";text-align:right;direction:rtl">  ุชุทุจูู ุฏุนู ุงูุจูุงุท ุงููุงุฑุบ ูููุงูุฉ ุ ููุฐูู ุจูุงุท ุงูุฌุฏุฑุงู. </li><li style=";text-align:right;direction:rtl">  ุชุญุฑูุฑ ุงููุญุชูู ูู ูุถุน ุงููุนุจุฉ. </li><li style=";text-align:right;direction:rtl">  ุนุฑุถ ุงุฎุชูุงุฑู ูุญููู ุงูุดุจูุฉ ูุงููุณุงุฑุงุช. </li></ul><br>  ูุฐุง ูู ุงูุฌุฒุก ุงูุฃูู ูู ุณูุณูุฉ ูู ุงูุฏุฑูุณ ุญูู ุฅูุดุงุก ูุนุจุฉ ุจุณูุทุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฏูุงุน ุนู ุงูุจุฑุฌ</a> .  ูู ูุฐุง ุงูุฌุฒุก ุ ุณููุธุฑ ูู ุฅูุดุงุก ููุนุจ ุ ูุฅูุฌุงุฏ ูุณุงุฑ ุ ููุถุน ุงูุจูุงุท ูุงูุฌุฏุฑุงู ุงูููุงุฆูุฉ. <br><br>  ุชู ุฅูุดุงุก ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูู ุงููุญุฏุฉ 2018.3.0f2. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c3d/ae4/591/c3dae459169a0a7f0ce240763b91d55c.jpg"></div><br>  <i>ุญูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ูุนุจุฉ ุจูุงุท ุจุฑุฌ ุงูุฏูุงุน ุงูููุน.</i> <br><br><h2 style=";text-align:right;direction:rtl">  ูุนุจุฉ ุจุฑุฌ ุงูุฏูุงุน </h2><br>  ุจุฑุฌ ุงูุฏูุงุน ูู ููุน ูุฏู ุงููุงุนุจ ููู ูู ุชุฏููุฑ ุญุดูุฏ ุงูุฃุนุฏุงุก ุญุชู ูุตููุง ุฅูู ููุทุชูู ุงูููุงุฆูุฉ.  ูุญูู ุงููุงุนุจ ูุฏูู ูู ุฎูุงู ุจูุงุก ุงูุฃุจุฑุงุฌ ุงูุชู ุชูุงุฌู ุงูุฃุนุฏุงุก.  ูุฐุง ุงูููุน ูุฏูู ุงููุซูุฑ ูู ุงูุงุฎุชูุงูุงุช.  ุณูููู ุจุฅูุดุงุก ูุนุจุฉ ูุน ุญูู ุงูุจูุงุท.  ุณููุชูู ุงูุฃุนุฏุงุก ุนุจุฑ ุงูุญูู ูุญู ููุทุฉ ุงูููุงูุฉ ุ ูุณูุฎูู ุงููุงุนุจ ุนูุจุงุช ุฃูุงููู. <br><a name="habracut"></a><br>  ุณุฃูุชุฑุถ ุฃูู ุฏุฑุณุช ุจุงููุนู ุณูุณูุฉ ูู ุงูุฏุฑูุณ ุญูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุฏุงุฑุฉ ุงูุฃุดูุงุก</a> . <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุฌุงู </h3><br>  ุชุนุฏ ุณุงุญุฉ ุงููุนุจ ุงูุฌุฒุก ุงูุฃูุซุฑ ุฃูููุฉ ูู ุงููุนุจุฉ ุ ูุฐูู ุณููุดุฆูุง ุฃููุงู.  ุณูููู ูุฐุง ูุงุฆููุง ูุนุจุฉ ูุน <code>GameBoard</code> ุงูุฎุงุต ุจู ุ ูุงูุฐู ูููู ุชููุฆุชู ุนู ุทุฑูู ุชุนููู ุงูุญุฌู ูู ุจุนุฏูู ุ ูุงูุฐู ูููููุง ูู ุฎูุงูู ุงุณุชุฎุฏุงู ูููุฉ <code>Vector2Int</code> .  ูุฌุจ ุฃู ูุนูู ุงูุญูู ุจุฃู ุญุฌู ุ ููููุง ุณูุฎุชุงุฑ ุงูุญุฌู ูู ููุงู ุขุฎุฑ ุ ูุฐูู <code>Initialize</code> ุทุฑููุฉ <code>Initialize</code> ูุดุชุฑูุฉ ููุฐุง ุงูุบุฑุถ. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญู ูุชุตูุฑ ุงูุญูู ุจูุงุณุทุฉ ุฑุจุงุนู ุงูุฒูุงูุง ุ ูุงูุฐู ูุฏู ุนูู ุงูุฃุฑุถ.  ูู ูุฌุนู ูุงุฆู ุงูุญูู ููุณู ุฑุจุงุนู ุงูุฃุทุฑุงู ุ ููููุง ุณูุถูู ูุงุฆู ุฑุจุงุนู ุชุงุจุน ุฅููู.  ุนูุฏ ุงูุชููุฆุฉ ุ ุณูุฌุนู ูููุงุณ XY ููุฃุฑุถ ูุณุงููุงู ูุญุฌู ุงูุญูู.  ููุฐุง ูุนูู ุ ุณูููู ููู ุงูุจูุงุท ุญุฌู ูุญุฏุฉ ูุงุญุฏุฉ ูุฑุจุนุฉ ููููุงุณ ูููุญุฑู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameBoard</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] Transform ground = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; Vector2Int size; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector2Int size</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size = size; ground.localScale = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(size.x, size.y, <span class="hljs-number"><span class="hljs-number">1f</span></span>); } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูุถุน ุตุฑุงุญุฉ ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุงูููุฑุฉ ูู ุฃู ูู ุดูุก ูุงุจู ููุชุฎุตูุต ูู ุฎูุงู ูุญุฑุฑ Unity ูููู ุงููุตูู ุฅููู ูู ุฎูุงู ุงูุญููู ุงููุฎููุฉ ุงููุชุณูุณูุฉ.  ูู ุงูุถุฑูุฑู ุฃู ูุชู ุชุบููุฑ ูุฐู ุงูุญููู ููุท ูู ุงูููุชุด.  ูุณูุก ุงูุญุธ ุ ุณูุนุฑุถ ูุญุฑุฑ Unity ุจุงุณุชูุฑุงุฑ ุชุญุฐูุฑูุง ูุชุฑุฌููุง ุจุนุฏู ุชุนููู ุงููููุฉ ุฃุจุฏูุง.  ูููููุง ูุจุญ ูุฐุง ุงูุชุญุฐูุฑ ูู ุฎูุงู ุชุญุฏูุฏ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููุญูู ุจุดูู ุตุฑูุญ.  ููููู ุฃูุถูุง ุชุนููู ูููุฉ <code>null</code> ุ ููููู ููุช ุจุฐูู ูุฅุธูุงุฑ ุฃููุง ูุณุชุฎุฏู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ุจุจุณุงุทุฉ ุ ููู ููุณุช ุฅุดุงุฑุฉ ุญููููุฉ ุฅูู ุงูุฃุฑุถ ุ ูุฐูู ูุณุชุฎุฏู ุงููููุฉ <code>default</code> . </div></div><br>  ูู ุจุฅูุดุงุก ูุงุฆู ุญูู ูู ูุดูุฏ ุฌุฏูุฏ ูุฅุถุงูุฉ ุฑุจุงุนู ุชุงุจุน ุจููุงุฏ ุชุดุจู ุงูุฃุฑุถ.  ูุธุฑูุง ูุฃููุง ูุตูู ูุนุจุฉ ูููุฐุฌ ุฃููู ุจุณูุทุฉ ุ ูุณุชููู ูุงุฏุฉ ุฎุถุฑุงุก ููุญุฏุฉ ูุงููุฉ.  ุชุฏููุฑ ุฑุจุงุนูุฉ 90 ุฏุฑุฌุฉ ุนูู ุทูู ุงููุญูุฑ X ุจุญูุซ ุชูุน ุนูู ูุชู ุงูุทุงุฆุฑุฉ XZ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/db9/9b8/9af/db99b89afcc551541f1f6adbe4816e54.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fa8/f7c/77d/fa8f7c77d6697bca5e3c8823f5adcd86.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f2a/467/015/f2a467015b8eefc8ca956eaec61d50dc.png"></div><br>  <i>ููุฏุงู ุงููุนุจ.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูุง ุชุถุน ุงููุนุจุฉ ุนูู ุงูุทุงุฆุฑุฉ XYุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุฃู ุงููุนุจุฉ ุณุชุชู ูู ูุณุงุญุฉ ุซูุงุฆูุฉ ุงูุฃุจุนุงุฏ ุ ุฅูุง ุฃููุง ุณูุนุฑุถูุง ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุ ูุน ุฃุนุฏุงุก ุซูุงุซู ุงูุฃุจุนุงุฏ ููุงููุฑุง ูููู ุชุญุฑูููุง ุจุงููุณุจุฉ ุฅูู ููุทุฉ ูุนููุฉ.  ุชุนุฏ ุทุงุฆุฑุฉ XZ ุฃูุซุฑ ููุงุกูุฉ ููุฐุง ูุชุชูุงูู ูุน ุงุชุฌุงู skybox ุงูููุงุณู ุงููุณุชุฎุฏู ููุฅุถุงุกุฉ ุงููุญูุทุฉ. </div></div><br><h3 style=";text-align:right;direction:rtl">  ุงููุนุจุฉ </h3><br>  ุจุนุฏ ุฐูู ุ ูู ุจุฅูุดุงุก ูููู <code>Game</code> ุงูุฐู ุณูููู ูุณุคููุงู ุนู ุงููุนุจุฉ ุจุฃููููุง.  ูู ูุฐู ุงููุฑุญูุฉ ุ ุณูุนูู ูุฐุง ุฃูู ูุชู ุชููุฆุฉ ุงูุญูู.  ูุญู ููุท ูุฌุนู ุงูุญุฌู ูุงุจู ููุชุฎุตูุต ูู ุฎูุงู ุงูููุชุด ููุฌุจุฑ ุงููููู ุนูู ุชููุฆุฉ ุงูุญูู ุนูุฏูุง ูุณุชููุธ.  ุฏุนูุง ูุณุชุฎุฏู ุงูุญุฌู ุงูุงูุชุฑุงุถู 11 ร 11. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Game</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] Vector2Int boardSize = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2Int(<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>); [SerializeField] GameBoard board = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { board.Initialize(boardSize); } }</code> </pre> <br>  ูููู ุฃู ุชููู ุฃุญุฌุงู ุงูุญููู ููุฌุจุฉ ููุท ูููุณ ูู ุงูููุทูู ุฅูุดุงุก ุญูู ุจุจูุงุท ูุงุญุฏ.  ูุฐูู ุฏุนููุง ูุญุฏุฏ ุงูุญุฏ ุงูุฃุฏูู ุฅูู 2 ร 2.  ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ุฃุณููุจ <code>OnValidate</code> ุ ูุงูุญุฏ ูู ุงูููู ุงูุฏููุง ุจุงูููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnValidate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (boardSize.x &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) { boardSize.x = <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (boardSize.y &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) { boardSize.y = <span class="hljs-number"><span class="hljs-number">2</span></span>; } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุนูุฏูุง ูุณูู Onvalidateุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุฌูุฏูุง ุ ูุฅู ูุญุฑุฑ ุงููุญุฏุฉ ูุฏุนููุง ููููููุงุช ุจุนุฏ ุชุบููุฑูุง.  ุจูุง ูู ุฐูู ุนูุฏ ุฅุถุงูุชูุง ุฅูู ูุงุฆู ุงููุนุจุฉ ูุจุนุฏ ุชุญููู ุงููุดูุฏ ูุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุญููู ูุจุนุฏ ุงูุชุบููุฑ ูู ุงููุญุฑุฑ ูุจุนุฏ ุงูุฅูุบุงุก / ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุจุนุฏ ุฅุนุงุฏุฉ ุถุจุท ุงููููู. <br><br>  <code>OnValidate</code> ูู ุงูููุงู ุงููุญูุฏ ูู ุงูููุฏ ุญูุซ ููููู ุชุนููู ููู ูุญููู ุชูููู ุงููููู. </div></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7ae/15d/efd/7ae15defd1e838186f922fc30d346b17.png"></div><br>  <i>ูุงุฆู ุงููุนุจุฉ.</i> <br><br>  ุงูุขู ุ ุนูุฏ ุจุฏุก ุชุดุบูู ูุถุน ุงููุนุจุฉ ุ ุณูู ูุชููู ุญูููุง ุจุงูุญุฌู ุงูุตุญูุญ.  ุฃุซูุงุก ุงููุนุจุฉ ุ ุถุน ุงููุงููุฑุง ุจุญูุซ ุชููู ุงูููุญุฉ ุจุฃููููุง ูุฑุฆูุฉ ุ ูุงูุณุฎ ูููู ุงูุชุญููู ุงูุฎุงุต ุจูุง ุ ูุงุฎุฑุฌ ูู ูุถุน ุงูุชุดุบูู ูุงูุตู ููู ุงููููู.  ูู ุญุงูุฉ ูุฌูุฏ ุญูู 11 ร 11 ูู ุงูุฃุตู ุ ููุญุตูู ุนูู ููุธุฑ ููุงุณุจ ูู ุงูุฃุนูู ุ ููููู ูุถุน ุงููุงููุฑุง ูู ููุถุนูุง (0.10.0) ูุชุฏููุฑูุง 90 ุฏุฑุฌุฉ ุนูู ุทูู ูุญูุฑ X. ุณูุชุฑู ุงููุงููุฑุง ูู ูุฐุง ุงูููุถุน ุงูุซุงุจุช ุ ูููู ูู ุงููููู ุชุบููุฑู ูู ุงููุณุชูุจู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/eb5/45c/421/eb545c421fdca09acf1258a2fac9e183.png"></div><br>  <i>ุงููุงููุฑุง ููู ุงูููุฏุงู.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููููุฉ ูุณุฎ ููุตู ููู ุงูููููุงุชุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูู ุฎูุงู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ุงูุชู ุชุธูุฑ ุนูุฏ ุงูููุฑ ููู ุงูุฒุฑ ูุน ุงูุชุฑุณ ูู ุงูุฒุงููุฉ ุงููููู ุงูุนููุง ูููููู. </div></div><br><h3 style=";text-align:right;direction:rtl">  ุงูุจูุงุท ุงูุฌุงูุฒุฉ </h3><br>  ูุชููู ุงูุญูู ูู ูุฑุจุนุงุช ูุฑุจุนุฉ.  ุณูููู ุงูุฃุนุฏุงุก ูุงุฏุฑูู ุนูู ุงูุงูุชูุงู ูู ุงูุจูุงุท ุฅูู ุงูุจูุงุท ุ ูุนุจุฑ ุงูุญูุงู ุ ูููู ููุณ ุจุดูู ูุทุฑู.  ุณุชุญุฏุซ ุงูุญุฑูุฉ ุฏุงุฆููุง ูุญู ุฃูุฑุจ ููุทุฉ ููุงูุฉ.  ุฏุนูุง ูุดูุฑ ุจูุงููุง ุฅูู ุงุชุฌุงู ุงูุญุฑูุฉ ุนูู ุทูู ุงูุจูุงุท ูุน ุณูู.  ููููู ุชูุฒูู ูุณูุฌ ุงูุณูู <a href="">ููุง</a> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tf/l6/os/tfl6oszqhi93v6aqlllrp1yuhli.png"></div><br>  <i>ุณูู ุนูู ุฎูููุฉ ุณูุฏุงุก.</i> <br><br>  ุถุน ูุณูุฌ ุงูุณูู ูู ูุดุฑูุนู ููู ุจุชูููู ุฎูุงุฑ <em>Alpha As Transparency</em> .  ุซู ูู ุจุฅูุดุงุก ูุงุฏุฉ ููุณูู ุ ูุงูุชู ูููู ุฃู ุชููู ุงููุงุฏุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุชู ุชู ุชุญุฏูุฏ ูุถุน ุงููุทุน ููุง ุ ูุญุฏุฏ ุงูุณูู ููููุณ ุฑุฆูุณู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bfb/2d6/56c/bfb2d656c07931b8f59ef11715eee93b.png"></div><br>  <i>ูุงุฏุฉ ุงูุณูู.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ุงุณุชุฎุฏุงู ูุถุน ุชุฌุณูุฏ ุงููุทุงุนุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุณูุญ ูู ุจุฅุฎูุงุก ุงูุณูู ุจุงุณุชุฎุฏุงู ุฎุท ุฃูุงุจูุจ ุชูุฏูู ุงููุญุฏุฉ ุงูููุงุณู. </div></div><br>  ููุฅุดุงุฑุฉ ุฅูู ูู ุจูุงุทุฉ ูู ุงููุนุจุฉ ุ ุณูุณุชุฎุฏู ูุงุฆู ุงููุนุจุฉ.  ุณูููู ููู ูููู ุฑุจุงุนุชู ุงูุฎุงุตุฉ ูุน ูุงุฏุฉ ุงูุณูู ุ ุชูุงููุง ููุง ูุญุชูู ุงูุญูู ุนูู ุฑุจุงุนู ูู ุงูุฃุฑุถ.  ุณูุถูู ุฃูุถูุง ูุฑุจุนุงุช ุฅูู ูููู GameTile ูุน ุฑุงุจุท ูุณูููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameTile</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] Transform arrow = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; }</code> </pre> <br>  ูู ุจุฅูุดุงุก ูุงุฆู ูุฑุจุน ูุชุญูููู ุฅูู ุงูุฌุงูุฒุฉ.  ุณูุชู ุบูุฑ ุงูุจูุงุท ุจุงูุฃุฑุถ ุ ูุฐุง ุงุฑูุน ุงูุณูู ูุฃุนูู ููููุงู ูุชุฌูุจ ูุดุงูู ุงูุนูู ุนูุฏ ุงูุนุฑุถ.  ููููู ุฃูุถูุง ุงูุชุตุบูุฑ ููููุงู ุ ุจุญูุซ ูููู ููุงู ูุณุงุญุฉ ุตุบูุฑุฉ ุจูู ุงูุฃุณูู ุงููุฌุงูุฑุฉ.  A Y ุฅุฒุงุญุฉ 0.001 ููููุงุณ 0.8 ุงูุฐู ูู ููุณู ุจุงููุณุจุฉ ูุฌููุน ุงููุญุงูุฑ ุณูู ุชูุนู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f12/02b/6d8/f1202b6d8f8f33593bf56ef0d8665537.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/964/1ac/a4b/9641aca4b874f48c3765af10e2c83157.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/df7/7a3/c9f/df77a3c9f539083eab845be6b9c62919.png"></div><br>  <i>ุงูุจูุงุท ุงูุฌุงูุฒุฉ.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃูู ูู ุงูุชุณูุณู ุงููุฑูู ููุจูุงุท ุงูุฌุงูุฒุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ููููู ูุชุญ ูุถุน ุงูุชุนุฏูู ุงููุณุจู ูู ุฎูุงู ุงูููุฑ ุงููุฒุฏูุฌ ุนูู ูุงุฏุฉ ุงูุนุฑุถ ุงูุฌุงูุฒุฉ ุ ุฃู ุนู ุทุฑูู ุชุญุฏูุฏ ุงูุฌุงูุฒุฉ ูุงูุถุบุท ุนูู ุฒุฑ <em>ูุชุญ ุงูุฌุงูุฒุฉ</em> ูู ุงูููุชุด.  ููููู ุงูุฎุฑูุฌ ูู ูุถุน ุงูุชุญุฑูุฑ ุงููุณุจู ุนู ุทุฑูู ุงูููุฑ ุนูู ุงูุฒุฑ ูุน ูุฌูุฏ ุณูู ูู ุงูุฑูู ุงูุฃูุณุฑ ุงูุนููู ูู ุฑุฃุณ ุงูุชุณูุณู ุงููุฑูู. </div></div><br>  ูุงุญุธ ุฃู ุงูุจูุงุท ููุณูุง ูุง ูุฌุจ ุฃู ุชููู ูุงุฆูุงุช ูุนุจุฉ.  ููุงู ุญุงุฌุฉ ููุท ูู ุฃุฌู ุชุชุจุน ุญุงูุฉ ุงููุฌุงู.  ูููู ุฃู ูุณุชุฎุฏู ููุณ ุงูุทุฑููุฉ ุงููุชุจุนุฉ ูู ุงูุณููู ูู ุณูุณูุฉ ุฏุฑูุณ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุฏุงุฑุฉ ุงููุงุฆูุงุช</a> .  ูููู ูู ุงููุฑุงุญู ุงููุจูุฑุฉ ูู ุงูุฃูุนุงุจ ุงูุจุณูุทุฉ ุฃู ุงูููุงุฐุฌ ุงูุฃูููุฉ ูู ูุงุฆูุงุช ุงููุนุจุฉ ุ ูุญู ุณุนุฏุงุก ููุบุงูุฉ.  ูุฐุง ูููู ุชุบููุฑู ูู ุงููุณุชูุจู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฏููุง ุงูุจูุงุท </h3><br>  ูุฅูุดุงุก ูุฑุจุนุงุช ุ ูุฌุจ ุฃู ูููู ูุฏู <code>GameBoard</code> ุฑุงุจุท ุฅูู <code>GameBoard</code> ุงูุฌุงูุฒุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] GameTile tilePrefab = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/363/6c2/044/3636c204442368c58858152a7c3efee2.png"></div><br>  <i>ุฑุงุจุท ููุจูุงุท ุงูุฌุงูุฒุฉ.</i> <br><br>  ููููู ุจุนุฏ ุฐูู ุฅูุดุงุก ุญุงูุงุชู ุจุงุณุชุฎุฏุงู ุญููุฉ ูุฒุฏูุฌุฉ ุนุจุฑ ุจุนุฏูู ูู ุงูุดุจูุฉ.  ุนูู ุงูุฑุบู ูู ุงูุชุนุจูุฑ ุนู ุงูุญุฌู ูู X ู Y ุ ุฅูุง ุฃููุง ุณูุฑุชุจ ุงูุจูุงุท ุนูู ูุณุชูู XZ ุ ููุฐูู ุงูุญูู ููุณู.  ูุธุฑูุง ูุฃู ุงูุญูู ูุชุฑูุฒ ุจุงููุณุจุฉ ุฅูู ุงูุฃุตู ุ ูุญุชุงุฌ ุฅูู ุทุฑุญ ุงูุญุฌู ุงูููุงุจู ูุทุฑูุญูุง ููู ููุณูููุง ุนูู ุงุซููู ูู ููููุงุช ููุถุน ุงูุชุฌุงูุจ.  ูุฑุฌู ููุงุญุธุฉ ุฃู ูุฐุง ูุฌุจ ุฃู ูููู ุชูุณูู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ุ ูุฅูุง ููู ูุนูู ุญุชู ุงูุฃุญุฌุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector2Int size</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size = size; ground.localScale = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(size.x, size.y, <span class="hljs-number"><span class="hljs-number">1f</span></span>); Vector2 offset = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2( (size.x - <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>, (size.y - <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">0.5f</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; size.y; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; size.x; x++) { GameTile tile = Instantiate(tilePrefab); tile.transform.SetParent(transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); tile.transform.localPosition = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3( x - offset.x, <span class="hljs-number"><span class="hljs-number">0f</span></span>, y - offset.y ); } } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/391/265/640/391265640fe99dd10be005de76ce93f3.png"></div><br>  <i>ูุซููุงุช ุฅูุดุงุก ุงูุจูุงุท.</i> <br><br>  ุณูุญุชุงุฌ ูุงุญููุง ุฅูู ุงููุตูู ุฅูู ูุฐู ุงููุฑุจุนุงุช ุ ูุฐูู ุณูุชุนูุจูุง ูู ุตููู.  ูุง ูุญุชุงุฌ ุฅูู ูุงุฆูุฉ ุ ูุฃูู ุจุนุฏ ุงูุชููุฆุฉ ุ ูู ูุชุบูุฑ ุญุฌู ุงูุญูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> GameTile[] tiles; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector2Int size</span></span></span><span class="hljs-function">)</span></span> { โฆ tiles = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameTile[size.x * size.y]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; size.y; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; size.x; x++, i++) { GameTile tile = tiles[i] = Instantiate(tilePrefab); โฆ } } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููู ุชุนูู ูุฐู ุงููููุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุฐู ูููุฉ ูุฑุชุจุทุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฐุง ูุนูู ุฃููุง ูููู ุจุชุนููู ุงุฑุชุจุงุท ููุซูู ุงูุชุฌุงูุจ ููู ูู ุนูุตุฑ ุงูุตููู ูุงููุชุบูุฑ ุงููุญูู.  ุชุคุฏู ูุฐู ุงูุนูููุงุช ููุณ ุงูููุฏ ุงูููุถุญ ุฃุฏูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">GameTile t = Instantiate(tilePrefab); tiles[i] = t; GameTile tile = t;</code> </pre> </div></div><br><h2 style=";text-align:right;direction:rtl">  ุงูุจุญุซ ุนู ูุณููุฉ </h2><br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ูููู ููู ุจูุงุทุฉ ุณูู ุ ููููู ูุดูุฑูู ุฌููุนูุง ุฅูู ุงูุงุชุฌุงู ุงูุฅูุฌุงุจู ูููุญูุฑ Z ุ ูุงูุฐู ุณููุณุฑู ุนูู ุฃูู ุงูุดูุงู.  ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุชุญุฏูุฏ ุงูุงุชุฌุงู ุงูุตุญูุญ ููุจูุงุท.  ูุญู ููุนู ุฐูู ูู ุฎูุงู ุฅูุฌุงุฏ ุงููุณุงุฑ ุงูุฐู ูุฌุจ ุนูู ุงูุฃุนุฏุงุก ุงุชุจุงุนู ุญุชู ููุทุฉ ุงูููุงูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุจูุงุท ุงูุฌูุฑุงู </h3><br>  ุชูุชูู ุงููุณุงุฑุงุช ูู ุงูุจูุงุท ุฅูู ุงูุจูุงุท ุ ูู ุงูุดูุงู ุฃู ุงูุดุฑู ุฃู ุงูุฌููุจ ุฃู ุงูุบุฑุจ.  ูุชุจุณูุท ุงูุจุญุซ ุ ูู <code>GameTile</code> ุงุฑุชุจุงุทุงุช ูุณุงุฑ <code>GameTile</code> ุฅูู ุฌูุฑุงููุง ุงูุฃุฑุจุนุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> GameTile north, east, south, west;</code> </pre> <br>  ุงูุนูุงูุงุช ุจูู ุงูุฌูุฑุงู ูุชูุงุซูุฉ.  ุฅุฐุง ูุงู ุงูุจูุงุท ูู ุงูุฌุงุฑ ุงูุดุฑูู ููุจูุงุท ุงูุซุงูู ุ ูุฅู ุงูุซุงูู ูู ุงูุฌุงุฑ ุงูุบุฑุจู ููุจูุงุท ุงูุซุงูู.  ุฅุถุงูุฉ ุทุฑููุฉ ุซุงุจุชุฉ ุนุงูุฉ ุฅูู <code>GameTile</code> ูุชุญุฏูุฏ ูุฐู ุงูุนูุงูุฉ ุจูู ุงุซููู ูู ุงูุจูุงุท. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MakeEastWestNeighbors</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile east, GameTile west</span></span></span><span class="hljs-function">)</span></span> { west.east = east; east.west = west; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ุงุณุชุฎุฏุงู ุทุฑููุฉ ุซุงุจุชุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูููููุง ุฃู ูุฌุนููุง ุทุฑููุฉ ูุซูู ูุน ูุนููุฉ ูุงุญุฏุฉ ุ ููู ูุฐู ุงูุญุงูุฉ ุณูู ูุณูููุง ูู <code>eastTile.MakeEastWestNeighbors(westTile)</code> ุฃู ุดูุก ูู ูุฐุง ุงููุจูู.  ููู ูู ุงูุญุงูุงุช ุงูุชู ูููู ูููุง ูู ุบูุฑ ุงููุงุถุญ ุฃู ูู ุงููุฑุจุนุงุช ุงูุชู ูุฌุจ ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ ุจูุง ุ ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุงูุฃุณุงููุจ ุงูุซุงุจุชุฉ.  ููู ุงูุฃูุซูุฉ ุนูู ุฐูู <code>Distance</code> ูุทุฑู <code>Dot</code> ูููุฆุฉ <code>Vector3</code> . </div></div><br>  ุจูุฌุฑุฏ ุงูุงุชุตุงู ุ ูุฌุจ ุฃูุง ูุชุบูุฑ ุฃุจุฏูุง.  ุฅุฐุง ุญุฏุซ ูุฐุง ุ ููุฏ ุงุฑุชูุจูุง ุฎุทุฃ ูู ุงูููุฏ.  ููููู ุงูุชุญูู ูู ุฐูู ุนู ุทุฑูู ููุงุฑูุฉ ููุง ุงูุงุฑุชุจุงุทูู ูุจู ุชุนููู ุงูููู ุฅูู ูููุฉ <code>null</code> ุ ูุนุฑุถ ุฎุทุฃ ุฅุฐุง ูุงู ุบูุฑ ุตุญูุญ.  ููููู ุงุณุชุฎุฏุงู ุงูุฃุณููุจ <code>Debug.Assert</code> ููุฐุง <code>Debug.Assert</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MakeEastWestNeighbors</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile east, GameTile west</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert( west.east == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; east.west == <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Redefined neighbors!"</span></span> ); west.east = east; east.west = west; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฐุง Debug.Assert ุชูุนูุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุงููุณูุทุฉ ุงูุฃููู <code>false</code> ุ ูุณูู ุชุนุฑุถ ุฎุทุฃู ูู ุงูุดุฑุท ุ ุจุงุณุชุฎุฏุงู ุงููุณูุทุฉ ุงูุซุงููุฉ ุฅุฐุง ูุงูุช ูุญุฏุฏุฉ.  ูุชู ุชุถููู ูุซู ูุฐู ุงูุฏุนูุฉ ููุท ูู ุจููุงุช ุงูุงุฎุชุจุงุฑ ุ ูููู ููุณ ูู ุจููุงุช ุงูุฅุตุฏุงุฑ.  ูุฐูู ุ ููุฐู ุทุฑููุฉ ุฌูุฏุฉ ูุฅุถุงูุฉ ุงูุดููุงุช ุฃุซูุงุก ุนูููุฉ ุงูุชุทููุฑ ูุงูุชู ูู ุชุคุซุฑ ุนูู ุงูุฅุตุฏุงุฑ ุงูููุงุฆู. </div></div><br>  ุฃุถู ุทุฑููุฉ ููุงุซูุฉ ูุฅูุดุงุก ุนูุงูุงุช ุจูู ุงูุฌุงุฑุชูู ุงูุดูุงููุฉ ูุงูุฌููุจูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MakeNorthSouthNeighbors</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile north, GameTile south</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert( south.north == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; north.south == <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Redefined neighbors!"</span></span> ); south.north = north; north.south = south; }</code> </pre> <br>  ูููููุง ุฅูุงูุฉ ูุฐู ุงูุนูุงูุฉ ุนูุฏ ุฅูุดุงุก ูุฑุจุนุงุช ูู <code>GameBoard.Initialize</code> .  ุฅุฐุง ูุงู ุงูุฅุญุฏุงุซู X ุฃูุจุฑ ูู ุงูุตูุฑ ุ ููููููุง ุฅูุดุงุก ุนูุงูุฉ ุจูู ุงูุดุฑู ูุงูุบุฑุจ ุจูู ุงููุฑุจุนุงุช ุงูุญุงููุฉ ูุงูุณุงุจูุฉ.  ุฅุฐุง ูุงู ุงูุฅุญุฏุงุซู Y ุฃูุจุฑ ูู ุงูุตูุฑ ุ ููููููุง ุฅูุดุงุก ุนูุงูุฉ ุจูู ุงูุดูุงู ูุงูุฌููุจ ุจูู ุงูุจูุงุทุฉ ุงูุญุงููุฉ ูุงูุจูุงุทุฉ ูู ุงูุณุทุฑ ุงูุณุงุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; size.y; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; size.x; x++, i++) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { GameTile.MakeEastWestNeighbors(tile, tiles[i - <span class="hljs-number"><span class="hljs-number">1</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { GameTile.MakeNorthSouthNeighbors(tile, tiles[i - size.x]); } } }</code> </pre> <br>  ูุงุญุธ ุฃู ุงูุชุฌุงูุจุงุช ุงูููุฌูุฏุฉ ุนูู ุญูุงู ุงูุญูู ูุง ุชุญุชูู ุนูู ุฃุฑุจุนุฉ ุฌูุงุฑ.  ุณูุจูู ูุฑุฌุน ุฌุงุฑ ูุงุญุฏ ุฃู ุงุซููู <code>null</code> . <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุณุงูุฉ ูุงูุงุชุฌุงู </h3><br>  ูู ูุฌุจุฑ ุฌููุน ุงูุฃุนุฏุงุก ุนูู ุงูุจุญุซ ุจุงุณุชูุฑุงุฑ ุนู ุงูุทุฑูู.  ูุฐุง ูุฌุจ ุงูููุงู ุจู ูุฑุฉ ูุงุญุฏุฉ ููุท ููู ุจูุงุทุฉ.  ุนูุฏูุง ุณูููู ุงูุฃุนุฏุงุก ูุงุฏุฑูู ุนูู ุงูุทูุจ ูู ุงูุจูุงุท ุงูุฐู ููุฌุฏูู ููู ูููุถู ูุฏูุง.  ุณูููู ุจุชุฎุฒูู ูุฐู ุงููุนูููุงุช ูู <code>GameTile</code> ุนู ุทุฑูู ุฅุถุงูุฉ ุฑุงุจุท ุฅูู ุชุฌุงูุจ ุงููุณุงุฑ ุงูุชุงูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูููุฑ ุฃูุถูุง ุงููุณุงูุฉ ุฅูู ููุทุฉ ุงูููุงูุฉ ุ ูุนุจุฑุงู ุนููุง ุจุนุฏุฏ ุงูุจูุงุท ุงูุฐู ูุฌุจ ุฒูุงุฑุชู ูุจู ุฃู ูุตู ุงูุนุฏู ุฅูู ููุทุฉ ุงูููุงูุฉ.  ุจุงููุณุจุฉ ููุฃุนุฏุงุก ุ ูุฐู ุงููุนูููุงุช ุนุฏููุฉ ุงููุงุฆุฏุฉ ุ ููููุง ุณูุณุชุฎุฏููุง ููุนุซูุฑ ุนูู ุฃูุตุฑ ุงูุทุฑู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> GameTile north, east, south, west, nextOnPath; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance;</code> </pre> <br>  ูู ูู ูุฑุฉ ููุฑุฑ ูููุง ุฃููุง ุจุญุงุฌุฉ ุฅูู ุงูุจุญุซ ุนู ุงููุณุงุฑุงุช ุ ุณูุญุชุงุฌ ุฅูู ุชููุฆุฉ ุจูุงูุงุช ุงููุณุงุฑ.  ุญุชู ูุชู ุงูุนุซูุฑ ุนูู ุงููุณุงุฑ ุ ูุง ููุฌุฏ ุงูุจูุงุท ุงูุชุงูู ููููู ุงุนุชุจุงุฑ ุงููุณุงูุฉ ูุงููุงุฆูุฉ.  ูููููุง ุฃู ูุชุฎูู ูุฐุง ููููุฉ ุนุฏุฏ ุตุญูุญ ูููู ูู <code>int.MaxValue</code> .  ุฅุถุงูุฉ ุทุฑููุฉ <code>ClearPath</code> ุนุงูุฉ ูุฅุนุงุฏุฉ ุชุนููู <code>GameTile</code> ุฅูู ูุฐู ุงูุญุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClearPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { distance = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; nextOnPath = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  ูุง ูููู ุงูุจุญุซ ุนู ุงููุณุงุฑุงุช ุฅูุง ุฅุฐุง ูุงูุช ูุฏููุง ููุทุฉ ููุงูุฉ.  ูุฐุง ูุนูู ุฃู ุงูุจูุงุท ูุฌุจ ุฃู ูุตุจุญ ููุทุฉ ุงูููุงูุฉ.  ุชุจูุบ ูุณุงุญุฉ ูุฐุง ุงูุชุฌุงูุจ ุตูุฑูุง ุ ููุง ูุญุชูู ุนูู ุงูุชุฌุงูุจ ุงูุฃุฎูุฑ ุ ูุฃู ุงููุณุงุฑ ููุชูู ุนููู.  ุฃุถู ุทุฑููุฉ ุนุงูุฉ ุชุญูู ุงูุจูุงุท ุฅูู ููุทุฉ ููุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BecomeDestination</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; nextOnPath = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  ูู ููุงูุฉ ุงููุทุงู ุ ูุฌุจ ุฃู ุชุชุญูู ุฌููุน ุงููุฑุจุนุงุช ุฅูู ูุณุงุฑ ุ ูุจุงูุชุงูู ูุฅู ูุณุงูุชูุง ูู ุชุณุงูู <code>int.MaxValue</code> .  ุฅุถุงูุฉ ุฎุงุตูุฉ getter ูุฑูุญุฉ ููุชุญูู ููุง ุฅุฐุง ูุงู ุงูุจูุงุท ูุญุชูู ุญุงูููุง ุนูู ูุณุงุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasPath =&gt; distance != <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue;</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููู ุชุนูู ูุฐู ุงูุฎุงุตูุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุฐุง ูู ุฅุฏุฎุงู ูุฎุชุตุฑุฉ ูุฎุงุตูุฉ getter ุชุญุชูู ุนูู ุชุนุจูุฑ ูุงุญุฏ ููุท.  ููุนู ููุณ ุงูููุฏ ุงูููุถุญ ุฃุฏูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasPath { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance != <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; } }</code> </pre> <br>  ูููู ุฃูุถูุง ุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู <code>=&gt;</code> ุจุดูู ูุฑุฏู ููุฌูุน ูุถุจุท ุงูุฎุตุงุฆุต ุ ููููุฆุงุช ุงูุทุฑู ุ ูุงูุจูุงุฆูู ุ ููู ุจุนุถ ุงูุฃูุงูู ุงูุฃุฎุฑู. </div></div><br><h3 style=";text-align:right;direction:rtl">  ูุญู ูููู ุงูุทุฑูู </h3><br>  ุฅุฐุง ูุงู ูุฏููุง ุจูุงุท ุจู ูุณุงุฑ ุ ููููููุง ุฃู ูุฏุนู ูููู ูู ุงุชุฌุงู ุฃุญุฏ ุฌูุฑุงูู.  ูู ุงูุจุฏุงูุฉ ุ ูุฅู ููุทุฉ ุงูููุงูุฉ ุงููุญูุฏุฉ ูู ุงููุณุงุฑ ุ ูุฐูู ูุจุฏุฃ ูู ูุณุงูุฉ ุงูุตูุฑ ููุฒูุฏูุง ูู ููุง ุ ููุชุญุฑู ูู ุงูุงุชุฌุงู ุงููุนุงูุณ ูุญุฑูุฉ ุงูุฃุนุฏุงุก.  ุฃู ุ ุณูููู ููู ุงูุฌูุฑุงู ุงููุจุงุดุฑูู ูููุทุฉ ุงูููุงูุฉ ูุณุงูุฉ 1 ุ ูุณูููู ููู ุงูุฌูุฑุงู ูู ูุฐู ุงูุจูุงุทุงุช ูุณุงูุฉ 2 ููุง ุฅูู ุฐูู. <br><br>  ุฃุถู ุทุฑููุฉ ูุฎููุฉ ูู <code>GameTile</code> ูุชูููุฉ ุงููุณุงุฑ ุฅูู ุฃุญุฏ ุฌูุฑุงููุง ุ ุงููุญุฏุฏ ูู ุฎูุงู ุงููุนููุฉ.  ุงููุณุงูุฉ ุฅูู ุงูุฌุงุฑ ูู ุฃูุซุฑ ูู ุงูุชุฌุงูุจ ุงูุญุงูู ุ ููุดูุฑ ูุณุงุฑ ุงูุฌุงุฑ ุฅูู ุงูุชุฌุงูุจ ุงูุญุงูู.  ูุฌุจ ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ููุท ููุจูุงุท ุงูุฐู ูู ูุณุงุฑ ุจุงููุนู ุ ูุฐูู ุฏุนููุง ูุชุญูู ูู ุฐูู ุจุชุฃููุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile neighbor</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert(HasPath, <span class="hljs-string"><span class="hljs-string">"No path!"</span></span>); neighbor.distance = distance + <span class="hljs-number"><span class="hljs-number">1</span></span>; neighbor.nextOnPath = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre> <br>  ุงูููุฑุฉ ูู ุฃู ูุณูู ูุฐู ุงูุทุฑููุฉ ูุฑุฉ ูุงุญุฏุฉ ููู ูู ุงูุฌูุฑุงู ุงูุฃุฑุจุนุฉ ููุจูุงุท.  ูุธุฑูุง ูุฃู ุจุนุถ ูุฐู ุงูุฑูุงุจุท ุณุชููู <code>null</code> ุ ูุณูู ูุชุญูู ูู ูุฐุง ุงูุฃูุฑ ููููู ุงูุชูููุฐ ุ ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฅุฐุง ูุงู ูุฏู ุฃุญุฏ ุงูุฌูุฑุงู ุจุงููุนู ุทุฑูู ุ ููุง ููุจุบู ููุง ูุนู ุฃู ุดูุก ูุงูุชููู ุนู ูุนู ุฐูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile neighbor</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert(HasPath, <span class="hljs-string"><span class="hljs-string">"No path!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || neighbor.HasPath) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } neighbor.distance = distance + <span class="hljs-number"><span class="hljs-number">1</span></span>; neighbor.nextOnPath = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre> <br>  ุงูุทุฑููุฉ ุงูุชู <code>GameTile</code> ุจูุง <code>GameTile</code> ุฌูุฑุงููุง ุบูุฑ ูุนุฑููุฉ ูุจููุฉ ุงูููุฏ.  ูุฐูู ุ ูุชู ุฅุฎูุงุก <code>GrowPathTo</code> .  ุณูุถูู ุทุฑููุง ุนุงูุฉ ุชุฎุจุฑ ุงูุชุฌุงูุจ ุฃู ูููู ุทุฑููู ูู ุงุชุฌุงู ูุนูู ุ ูุน ุงุณุชุฏุนุงุก <code>GrowPathTo</code> ุจุดูู ุบูุฑ ูุจุงุดุฑ.  ููู ุงูููุฏ ุงูุฐู ูุจุญุซ ูู ุงูุญูู ูุฌุจ ุฃู ูุชุชุจุน ุฃู ุงูุจูุงุท ุชู ุฒูุงุฑุชู.  ูุฐูู ุ ุณูุฌุนูู ูุนูุฏ ุฌุงุฑูุง ุฃู <code>null</code> ุฅุฐุง ุชู ุฅููุงุก ุงูุชูููุฐ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile neighbor</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!HasPath || neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || neighbor.HasPath) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } neighbor.distance = distance + <span class="hljs-number"><span class="hljs-number">1</span></span>; neighbor.nextOnPath = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> neighbor; }</code> </pre> <br>  ุฃุถู ุงูุขู ุทุฑููุง ูุชูููุฉ ุงููุณุงุฑุงุช ูู ุงุชุฌุงูุงุช ูุญุฏุฏุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathNorth</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; GrowPathTo(north); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathEast</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; GrowPathTo(east); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathSouth</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; GrowPathTo(south); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathWest</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; GrowPathTo(west);</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุจุญุซ ูุงุณุน </h3><br>  ูุฌุจ ุฃู <code>GameBoard</code> ุฃู ุชุญุชูู ุฌููุน <code>GameBoard</code> ุนูู ุจูุงูุงุช ุงููุณุงุฑ ุงูุตุญูุญุฉ.  ูุญู ููุนู ุฐูู ูู ุฎูุงู ุฅุฌุฑุงุก ุจุญุซ ุฃููู.  ููุจุฏุฃ ุจุชุฌุงูุจ ููุทุฉ ุงูููุงูุฉ ุ ุซู ูููู ุงูุทุฑูู ุฅูู ุฌูุฑุงูู ุ ุซู ุฅูู ุฌูุฑุงู ูุฐู ุงูุชุฌุงูุจุงุช ุ ูููุฐุง.  ูุน ูู ุฎุทูุฉ ุ ุชุฒุฏุงุฏ ุงููุณุงูุฉ ุฎุทูุฉ ุจุฎุทูุฉ ุ ููู ุชููู ุงููุณุงุฑุงุช ุฃุจุฏูุง ูู ุงุชุฌุงู ุงูุจูุงุท ุงูุฐู ูุญุชูู ุจุงููุนู ุนูู ูุณุงุฑุงุช.  ูุฐุง ูุถูู ุฃู ุฌููุน ุงูุจูุงุท ูุชูุฌุฉ ูุฐูู ุณูู ุชุดูุฑ ุนูู ุทูู ุฃูุตุฑ ุงูุทุฑู ูููุทุฉ ุงูููุงูุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฐุง ุนู ุงูุนุซูุฑ ุนูู ูุณุงุฑ ุจุงุณุชุฎุฏุงู A *ุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุฎูุงุฑุฒููุฉ A <sup>*</sup> ูู ุงูุชุทูุฑ ุงูุชุทูุฑู ููุจุญุซ ุงููุชุณุน ุงูุฃูู.  ุฅูู ูููุฏ ุนูุฏูุง ูุจุญุซ ุนู ุฃูุตุฑ ุงูุทุฑู.  ููููุง ูุญุชุงุฌ ุฅูู ุฌููุน ุงููุณุงุฑุงุช ุงูุฃูุตุฑ ุ ูุฐูู A <sup>*</sup> ูุง ูุนุทู ุฃู ูุฒุงูุง.  ููุญุตูู ุนูู ุฃูุซูุฉ ููุจุญุซ ุงููุชุณุน ู A <sup>*</sup> ุนูู ุดุจูุฉ ูู ุงูุณุฏุงุณู ูุน ุงูุฑุณูู ุงููุชุญุฑูุฉ ุ ุฑุงุฌุน ุณูุณูุฉ ุงูุจุฑุงูุฌ ุงูุชุนููููุฉ ุญูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎุฑุงุฆุท ุงูุณุฏุงุณู</a> . </div></div><br>  ูุฅุฌุฑุงุก ุงูุจุญุซ ุ ูุญุชุงุฌ ุฅูู ุชุชุจุน ุงููุฑุจุนุงุช ุงูุชู ุฃุถููุงูุง ุฅูู ุงููุณุงุฑ ุ ูููููุง ูู ููู ุจุนุฏ ุจุชุทููุฑูุง.  ุบุงูุจูุง ูุง ุชุณูู ูุฐู ุงููุฌููุนุฉ ูู ุงูุจูุงุท ุญุฏูุฏ ุงูุจุญุซ.  ูู ุงูููู ุฃู ุชุชู ูุนุงูุฌุฉ ุงูุจูุงุท ูู ููุณ ุงูุชุฑุชูุจ ุงูุฐู ุชุถุงู ุจู ุฅูู ุงูุญุฏูุฏ ุ ูุฐูู ุฏุนููุง ูุณุชุฎุฏู <code>Queue</code> .  ูู ููุช ูุงุญู ุ ุณูุชุนูู ุนูููุง ุฅุฌุฑุงุก ุงูุจุญุซ ุนุฏุฉ ูุฑุงุช ุ ูุฐูู ุฏุนููุง <code>GameBoard</code> ูู <code>GameBoard</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameBoard</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ Queue&lt;GameTile&gt; searchFrontier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Queue&lt;GameTile&gt;(); โฆ }</code> </pre> <br>  ููู ุชููู ุญุงูุฉ ุงูููุนุจ ุตุญูุญุฉ ุฏุงุฆููุง ุ ูุฌุจ ุฃู ูุฌุฏ ุงููุณุงุฑุงุช ูู ููุงูุฉ <code>Initialize</code> ุ ููู ูุถุน ุงูููุฏ ูู ุทุฑููุฉ <code>FindPaths</code> ูููุตูุฉ.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุชุญุชุงุฌ ุฅูู ูุณุญ ูุณุงุฑ ุฌููุน ุงูุจูุงุท ุ ุซู ุฌุนู ุงูุจูุงุท ูุงุญุฏ ููุทุฉ ุงูููุงูุฉ ูุฅุถุงูุชู ุฅูู ุงูุญุฏูุฏ.  ุฏุนููุง ุฃููุง ุชุญุฏูุฏ ุงูุจูุงุท ุงูุฃูู.  ููุฐ <code>tiles</code> ูู ูุฌููุนุฉ ุ ูููููุง ุงุณุชุฎุฏุงู <code>foreach</code> ุฏูู ุฎูู ูู ุชููุซ ุงูุฐุงูุฑุฉ.  ุฅุฐุง ุงูุชูููุง ูุงุญููุง ูู ุตููู ุฅูู ูุงุฆูุฉ ุ ูุณูู ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุงุณุชุจุฏุงู ุญููุงุช <code>foreach</code> ุจุญููุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector2Int size</span></span></span><span class="hljs-function">)</span></span> { โฆ FindPaths(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPaths</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { tile.ClearPath(); } tiles[<span class="hljs-number"><span class="hljs-number">0</span></span>].BecomeDestination(); searchFrontier.Enqueue(tiles[<span class="hljs-number"><span class="hljs-number">0</span></span>]); }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุฌุจ ุฃู ูุฃุฎุฐ ุจูุงุทุฉ ูุงุญุฏุฉ ูู ุงูุญุฏูุฏ ูููุดุฆ ุทุฑูููุง ุฅูู ุฌููุน ุฌูุฑุงูู ุ ููุถูููู ุฌููุนูุง ุฅูู ุงูุญุฏูุฏ.  ุฃููุงู ุ ุณูุชุญุฑู ุดูุงููุง ุ ุซู ุดุฑููุง ูุฌููุจูุง ูุฃุฎูุฑูุง ุบุฑุจูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPaths</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { tile.ClearPath(); } tiles[<span class="hljs-number"><span class="hljs-number">0</span></span>].BecomeDestination(); searchFrontier.Enqueue(tiles[<span class="hljs-number"><span class="hljs-number">0</span></span>]); GameTile tile = searchFrontier.Dequeue(); searchFrontier.Enqueue(tile.GrowPathNorth()); searchFrontier.Enqueue(tile.GrowPathEast()); searchFrontier.Enqueue(tile.GrowPathSouth()); searchFrontier.Enqueue(tile.GrowPathWest()); }</code> </pre> <br>  ููุฑุฑ ูุฐู ุงููุฑุญูุฉ ุ ูู ุญูู ุฃู ููุงู ุงูุจูุงุท ูู ุงูุญุฏูุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (searchFrontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { GameTile tile = searchFrontier.Dequeue(); searchFrontier.Enqueue(tile.GrowPathNorth()); searchFrontier.Enqueue(tile.GrowPathEast()); searchFrontier.Enqueue(tile.GrowPathSouth()); searchFrontier.Enqueue(tile.GrowPathWest()); }</code> </pre> <br>  ุชุฒุงูุฏ ุงููุณุงุฑ ูุง ูููุฏูุง ุฏุงุฆููุง ุฅูู ุจูุงุท ุฌุฏูุฏ.  ูุจู ุงูุฅุถุงูุฉ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ูููุฉ ุงููููุฉ <code>null</code> ุ ูููู ูููููุง ุชุฃุฌูู ุงูุชุญูู ูู ุงููููุฉ <code>null</code> ุฅูู ูุง ุจุนุฏ ุงูุฅุฎุฑุงุฌ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> GameTile tile = searchFrontier.Dequeue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { searchFrontier.Enqueue(tile.GrowPathNorth()); searchFrontier.Enqueue(tile.GrowPathEast()); searchFrontier.Enqueue(tile.GrowPathSouth()); searchFrontier.Enqueue(tile.GrowPathWest()); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุนุฑุถ ุงููุณุงุฑุงุช </h3><br>  ุงูุขู ูุฏููุง ุญูู ูุญุชูู ุนูู ุงููุณุงุฑุงุช ุงูุตุญูุญุฉ ุ ูููู ุญุชู ุงูุขู ูุง ูุฑู ูุฐุง.  ุชุญุชุงุฌ ุฅูู ุชูููู ุงูุฃุณูู ุจุญูุซ ุชุดูุฑ ุนูู ุทูู ุงููุณุงุฑ ูู ุฎูุงู ุงูุจูุงุท.  ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุญููููุง.  ูุธุฑูุง ูุฃู ูุฐู ุงูููุนุทูุงุช ูู ููุณูุง ุฏุงุฆููุง ุ ูุฅููุง ูุถูู ุฅูู <code>GameTile</code> ุซุงุจุช ูุงุญุฏ ูู <code>GameTile</code> ููู ุงุชุฌุงู ูู ุงูุงุชุฌุงูุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Quaternion northRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">90f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), eastRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">90f</span></span>, <span class="hljs-number"><span class="hljs-number">90f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), southRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">90f</span></span>, <span class="hljs-number"><span class="hljs-number">180f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>), westRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">90f</span></span>, <span class="hljs-number"><span class="hljs-number">270f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>);</code> </pre> <br>  ุฃุถู ุฃูุถูุง ุทุฑููุฉ <code>ShowPath</code> ุงูุนุงูุฉ.  ุฅุฐุง ูุงูุช ุงููุณุงูุฉ ุตูุฑุงู ุ ูุฅู ุงูุจูุงุทุฉ ูู ููุทุฉ ุงูููุงูุฉ ููุง ููุฌุฏ ุดูุก ูููู ุงูุฅุดุงุฑุฉ ุฅููู ุ ูุฐูู ูู ุจุฅูุบุงุก ุชูุดูุท ุณูููุง.  ุจุฎูุงู ุฐูู ุ ูู ุจุชูุนูู ุงูุณูู ูุถุจุท ุฏูุฑุงูู.  ูููู ุชุญุฏูุฏ ุงูุงุชุฌุงู ุงููุทููุจ ูู ุฎูุงู ููุงุฑูุฉ <code>nextOnPath</code> ูุน ุฌูุฑุงููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance == <span class="hljs-number"><span class="hljs-number">0</span></span>) { arrow.gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } arrow.gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); arrow.localRotation = nextOnPath == north ? northRotation : nextOnPath == east ? eastRotation : nextOnPath == south ? southRotation : westRotation; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ูุฌููุน ุงูุจูุงุท ูู ุงูููุงูุฉ </font></font><code>GameBoard.FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPaths</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { tile.ShowPath(); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b2d/4fe/4d5/b2d4fe4d511b4e729910ea78b267f268.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ูุฌุฏุช.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูุง ูุญูู ุงูุณูู ูุจุงุดุฑุฉ ุฅูู GrowPathToุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุตู ููุทู ูุชุตูุฑ ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ูู ููุช ูุงุญู ุณูู ูุฌุนู ุงูุชุตูุฑ ุชุนุทูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชุธูุฑ ุงูุฃุณูู ุ ููู ูุญุชุงุฌ ุฅูู ุชุฏููุฑูุง ูู ูู ูุฑุฉ ูุชุตู ุจูุง </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ุฃููููุฉ ุงูุจุญุซ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุถุญ ุฃูู ุนูุฏูุง ุชููู ููุทุฉ ุงูููุงูุฉ ูู ุงูุฑูู ุงูุฌููุจู ุงูุบุฑุจู ุ ูุฅู ุฌููุน ุงููุณุงุฑุงุช ุชุชุฌู ุบุฑุจูุง ุชูุงููุง ุญุชู ุชุตู ุฅูู ุญุงูุฉ ุงูุญูู ุ ูุจุนุฏ ุฐูู ุชุชุฌู ุฌููุจูุง. </font><font style="vertical-align: inherit;">ูู ุดูุก ุตุญูุญ ููุง ุ ูุฃูู ูุง ููุฌุฏ ุจุงููุนู ุทุฑู ุฃูุตุฑ ูููุทุฉ ุงูููุงูุฉ ุ ูุฃู ุงูุญุฑูุงุช ุงููุทุฑูุฉ ูุณุชุญููุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ููุงู ุงูุนุฏูุฏ ูู ุงูุทุฑู ุงูุฃูุตุฑ ุงูุฃุฎุฑู ุงูุชู ูุฏ ุชุจุฏู ุฃุฌูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุณุจุจ ุงูุนุซูุฑ ุนูู ูุซู ูุฐู ุงููุณุงุฑุงุช ุจุดูู ุฃูุถู ุ ุงููู ููุทุฉ ุงูููุงูุฉ ุฅูู ูุฑูุฒ ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุจุญุฌู ุญูู ูุฑุฏู ุ ุฅูู ูุฌุฑุฏ ุจูุงุทุฉ ูู ููุชุตู ุงูุตููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> tiles[tiles.Length / <span class="hljs-number"><span class="hljs-number">2</span></span>].BecomeDestination(); searchFrontier.Enqueue(tiles[tiles.Length / <span class="hljs-number"><span class="hljs-number">2</span></span>]);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6d3/d09/d78/6d3d09d7844fbe6a4aaf4618449598de.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุฉ ุงูููุงูุฉ ูู ุงููุฑูุฒ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุจุฏู ุงููุชูุฌุฉ ููุทููุฉ ุฅุฐุง ููุช ุชุชุฐูุฑ ููููุฉ ุนูู ุงูุจุญุซ. ูุธุฑูุง ูุฃููุง ุฃุถููุง ุฌูุฑุงููุง ูู ุงูุชุฑุชูุจ ุจูู ุงูุดูุงู ุงูุดุฑูู ูุงูุฌููุจ ุงูุบุฑุจู ุ ูุฅู ุงูุดูุงู ูู ุงูุฃููููุฉ ุงููุตูู. ุจูุง ุฃููุง ูููู ุจุงูุจุญุซ ุจุชุฑุชูุจ ุนูุณู ุ ููุฐุง ูุนูู ุฃู ุงูุงุชุฌุงู ุงูุฃุฎูุฑ ุงูุฐู ุณูููุงู ูู ุงูุฌููุจ. ูุฐุง ูู ุงูุณุจุจ ูู ุนุฏุฏ ูููู ูู ุงูุฃุณูู ุชุดูุฑ ุฅูู ุงูุฌููุจ ูุงูุนุฏูุฏ ูู ููุทุฉ ุฅูู ุงูุดุฑู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุชุบููุฑ ุงููุชูุฌุฉ ุนู ุทุฑูู ุชุญุฏูุฏ ุฃููููุงุช ุงูุงุชุฌุงูุงุช. ุฏุนููุง ูุจุงุฏูุฉ ุงูุดุฑู ูุงูุฌููุจ. ูุฐูู ุนูููุง ุฃู ูุญุตู ุนูู ุงูุชูุงุซู ุจูู ุงูุดูุงู ูุงูุฌููุจ ูุงูุดุฑู ูุงูุบุฑุจ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> searchFrontier.Enqueue(tile.GrowPathNorth()); searchFrontier.Enqueue(tile.GrowPathSouth()); searchFrontier.Enqueue(tile.GrowPathEast()); searchFrontier.Enqueue(tile.GrowPathWest())</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a9a/2c7/0b7/a9a2c70b7d7d178b041f30c11d256ad3.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุชูุจ ุงูุจุญุซ ูู ุงูุดูุงู ูุงูุฌููุจ ุงูุดุฑูู ุงูุบุฑุจู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏู ุฃุฌูู ุ ูููู ูู ุงูุฃูุถู ูููุณุงุฑุงุช ุชุบููุฑ ุงูุงุชุฌุงู ุ ูุน ุงูุชุฑุงุจ ุงูุญุฑูุฉ ุงููุทุฑูุฉ ุญูุซ ุณุชุจุฏู ุทุจูุนูุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุนูุณ ุฃููููุงุช ุงูุจุญุซ ููุจูุงุท ุงููุฌุงูุฑ ูู ูููุฐุฌ ุฑูุนุฉ ุงูุดุทุฑูุฌ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ูุนุฑูุฉ ููุน ุงูุจูุงุท ุงูุฐู ูุนุงูุฌู ุฃุซูุงุก ุงูุจุญุซ ุ ูุถูู ุฅูู </font></font><code>GameTile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ ุงูุนุงูุฉ ุงูุชู ุชุดูุฑ ุฅูู ูุง ุฅุฐุง ูุงู ุงูุจูุงุท ุงูุญุงูู ุจุฏูููุง ุฃู ูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsAlternative { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุจุชุนููู ูุฐู ุงูุฎุงุตูุฉ ูู </font></font><code>GameBoard.Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูู ุจุชูููุฒ ุงูุจูุงุทุงุช ูุจุฏูู ุฅุฐุง ูุงูุช ุฅุญุฏุงุซูุงุชูุง X ูุชุณุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; size.y; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; size.x; x++, i++) { โฆ tile.IsAlternative = (x &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุงูุนูููุฉ (ุณ &amp; 1) == 0 ุชูุนูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">   โ     (AND).            .       1,       1.  10101010  00001111   00001010. <br><br>       .      0  1.     1, 2, 3, 4   1, 10, 11, 100.  ,       . <br><br>    AND  ,  ,    .    ,       . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซุงููุงู ุ ูุบูุฑ ุนูุงูุฉ ุงููุชูุฌุฉ ุฅุฐุง ูุงู ุฅุญุฏุงุซู Y ูุชุณุงูู. </font><font style="vertical-align: inherit;">ูุฐูู ุณูู ูุฎูู ููุท ุงูุดุทุฑูุฌ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> tile.IsAlternative = (x &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((y &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { tile.IsAlternative = !tile.IsAlternative; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุง ุฃู ูุญุงูุธ ุนูู ููุณ ุงููุธุงู ูุงูุจุญุซ ุนู ุจุฏูู ุงูุจูุงุทุ ูููู ูุชุฌุนู ูู ุงูุนูุฏุฉ ูุฌููุน ุงูุจูุงุท ูุบูุฑูุง. </font><font style="vertical-align: inherit;">ูุฐุง ุณูู ูุฌุจุฑ ุงูุทุฑูู ุฅูู ุญุฑูุฉ ูุทุฑูุฉ ูุฅูุดุงุก ูุชุนุฑุฌ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.IsAlternative) { searchFrontier.Enqueue(tile.GrowPathNorth()); searchFrontier.Enqueue(tile.GrowPathSouth()); searchFrontier.Enqueue(tile.GrowPathEast()); searchFrontier.Enqueue(tile.GrowPathWest()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { searchFrontier.Enqueue(tile.GrowPathWest()); searchFrontier.Enqueue(tile.GrowPathEast()); searchFrontier.Enqueue(tile.GrowPathSouth()); searchFrontier.Enqueue(tile.GrowPathNorth()); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b43/e3a/d63/b43e3ad6370a6b552073b4f0b4cf0e8b.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุชูุจ ุจุญุซ ูุชุบูุฑ.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ุงูุจูุงุท </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ุฌููุน ุงูุจูุงุท ูุงุฑุบุฉ. </font><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงู ุจูุงุทุฉ ูุงุญุฏุฉ ูููุทุฉ ููุงูุฉ ุ ูููู ุจุงูุฅุถุงูุฉ ุฅูู ุนุฏู ูุฌูุฏ ุณูู ูุฑุฆู ุ ูุจุฏู ูุซู ุฃู ุดุฎุต ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุณูุถูู ุงููุฏุฑุฉ ุนูู ุชุบููุฑ ุงูุจูุงุท ูู ุฎูุงู ูุถุน ุงูุฃุดูุงุก ุนูููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุงุท ุงููุญุชูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุงุช ุงูุจูุงุท ููุณูุง ูู ุจุจุณุงุทุฉ ูุณููุฉ ูุชุชุจุน ูุนูููุงุช ุงูุจูุงุท. </font><font style="vertical-align: inherit;">ูุญู ูุง ูููู ุจุชุนุฏูู ูุฐู ุงููุงุฆูุงุช ูุจุงุดุฑุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูู ุจุฅุถุงูุฉ ูุญุชูู ูููุตู ููุถุนู ูู ุงูุญูู. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ูููููุง ุงูุชูููุฒ ุจูู ุงูุจูุงุท ุงููุงุฑุบ ูุจูุงุทุงุช ููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ููุฅุดุงุฑุฉ ุฅูู ูุฐู ุงูุญุงูุงุช ุ ูู ุจุฅูุดุงุก ุชุนุฏุงุฏ </font></font><code>GameTileContentType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> GameTileContentType { Empty, Destination }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูู ุจุฅูุดุงุก ููุน ูููู </font></font><code>GameTileContent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุชุนููู ููุน ูุญุชููุงุชู ูู ุฎูุงู ุงูููุชุด ุ ูุณูููู ุงููุตูู ุฅููู ูู ุฎูุงู ุฎุงุตูุฉ getter ูุดุชุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameTileContent</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] GameTileContentType type = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameTileContentType Type =&gt; type; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุณูููู ุจุฅูุดุงุก ุฃุจููุฉ ุฌุงูุฒุฉ ูููุนูู ูู ุงููุญุชูู ุ ูุญุชูู ูู ููููุง ุนูู ูููู </font></font><code>GameTileContent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูููุน ุงููุญุฏุฏ ุงูููุงุจู. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุณุชุฎุฏู ููุนุจ ูุณุทุญ ุฃุฒุฑู ูุชุนููู ุจูุงุท ููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูุฃูู ูุณุทุญ ุชูุฑูุจูุง ุ ููู ูุง ูุญุชุงุฌ ุฅูู ูุตุงุฏู. </font><font style="vertical-align: inherit;">ูุฅุนุฏุงุฏ ูุญุชูู ูุงุฑุบ ูุณุจููุง ุ ุงุณุชุฎุฏู ูุงุฆู ูุนุจุฉ ูุงุฑุบ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f55/25d/8db/f5525d8db707ff187e17ce96a11d86ae.png" width="320" height="262" alt="ุบุงูุฉ"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c6f/463/e19/c6f463e198abca6134b7bc74d3207833.png" width="320" height="176" alt="ุฅูุฑุงุบ"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุงูุฒุฉ ูู ููุทุฉ ุงูููุงูุฉ ูุงููุญุชูู ุงููุงุฑุบ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุนุทู ูุงุฆู ุงููุญุชูู ููุจูุงุทุงุช ุงููุงุฑุบุฉ ุ ูุฃูู ุจุนุฏ ุฐูู ุณูููู ููู ุงููุญุชูู ุฏุงุฆููุง ุงููุญุชูู ุ ููุง ูุนูู ุฃููุง ูู ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุงูุฑูุงุจุท ุฅูู ุงููุญุชููุงุช ูู ุฃุฌู ุงููุณุงูุงุฉ </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุตูุน ุงููุญุชูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุนู ุงููุญุชูู ูุงุจูุงู ููุชุญุฑูุฑ ุ ุณูููู ุฃูุถูุง ุจุฅูุดุงุก ูุตูุน ูุฐูู ุ ุจุงุณุชุฎุฏุงู ููุณ ุงูุทุฑููุฉ ููุง ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุฏุงุฑุฉ ุงููุงุฆูุงุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู </font></font><code>GameTileContent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ </font><font style="vertical-align: inherit;">ุนููู </font><font style="vertical-align: inherit;">ุชุชุจุน ุงููุตูุน ุงูุฃุตูู ุงูุฎุงุต ุจู ุ ูุงูุฐู ูุฌุจ ุถุจุทู ูุฑุฉ ูุงุญุฏุฉ ููุท ุ ูุฅุนุงุฏุฉ ููุณู ุฅูู ุงููุตูุน ุจุงูุทุฑููุฉ ููุณูุง </font></font><code>Recycle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> GameTileContentFactory originFactory; โฆ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameTileContentFactory OriginFactory { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; originFactory; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Debug.Assert(originFactory == <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Redefined origin factory!"</span></span>); originFactory = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Recycle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { originFactory.Reclaim(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ููุชุฑุถ ูุฌูุฏ </font></font><code>GameTileContentFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุจุงูุชุงูู ุ ูุฅููุง ุณูู ููุดุฆ ููุน ูุงุฆู ูุตู ููุฐุง ุงูุบุฑุถ ุจุงูุทุฑููุฉ ุงููุทููุจุฉ </font></font><code>Recycle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ูู ููุชู ุจุฅูุดุงุก ูุตูุน ูุนูู ุจูุงูู ุทุงูุชู ููุณุชุฎุฏู ุงููุญุชููุงุช ุ ูุฐูู ุณูุฌุนูู ูุฏูุฑ ุงููุญุชููุงุช. </font><font style="vertical-align: inherit;">ูู ููุช ูุงุญู ุณูููู ูู ุงููููู ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงููุงุฆูุงุช ุฅูู ุงููุตูุน ุฏูู ุชุบููุฑ ุจููุฉ ุงูููุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.SceneManagement; [CreateAssetMenu] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameTileContentFactory</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Reclaim</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTileContent content</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert(content.OriginFactory == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"Wrong factory reclaimed!"</span></span>); Destroy(content.gameObject); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุถุงูุฉ ุทุฑููุฉ ูุฎููุฉ </font></font><code>Get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู </font><font style="vertical-align: inherit;">ุงููุตูุน </font><font style="vertical-align: inherit;">ูุน ุงูุฌุงูุฒุฉ ููุนููุฉ. </font><font style="vertical-align: inherit;">ูุญู ููุง ูุฑุฉ ุฃุฎุฑู ุชุฎุทู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุฃุดูุงุก. </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ูุซูู ูููุงุฆู ุ ููููู ุจุชุนููู ุงููุตูุน ุงูุฃุตูู ุ ูููููู ุฅูู ูุดูุฏ ุงููุตูุน ููุนูุฏู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">GameTileContent </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTileContent prefab</span></span></span><span class="hljs-function">)</span></span> { GameTileContent instance = Instantiate(prefab); instance.OriginFactory = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; MoveToFactoryScene(instance.gameObject); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ููู ุงููุซูู ุฅูู ูุดูุฏ ูุญุชูู ุงููุตูุน ุ ูุงูุฐู ูููู ุฅูุดุงุคู ุญุณุจ ุงูุญุงุฌุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุง ูู ุงููุญุฑุฑ ุ ุซู ูุจู ุฅูุดุงุก ูุดูุฏ ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ูุฌูุฏู ุ ูู ุญุงูุฉ ููุฏูุง ุฐูู ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุณุงุฎูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Scene contentScene; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MoveToFactoryScene</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameObject o</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!contentScene.isLoaded) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Application.isEditor) { contentScene = SceneManager.GetSceneByName(name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!contentScene.isLoaded) { contentScene = SceneManager.CreateScene(name); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { contentScene = SceneManager.CreateScene(name); } } SceneManager.MoveGameObjectToScene(o, contentScene); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏููุง ููุท ููุนุงู ูู ุงููุญุชูู ุ ูุฐูู ููุท ูู ุจุฅุถุงูุฉ ุญูููู ููุชูููู ุงููุณุจู ูููุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] GameTileContent destinationPrefab = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; [SerializeField] GameTileContent emptyPrefab = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขุฎุฑ ุดูุก ูุฌุจ ุงูููุงู ุจู ุญุชู ูุนูู ุงููุตูุน ูู ุฅูุดุงุก ุทุฑููุฉ ุนุงูุฉ </font></font><code>Get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุนููุฉ </font></font><code>GameTileContentType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชูุจู ูุซูููุง ููููุฆุฉ ุงูุฌุงูุฒุฉ ุงูููุงุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTileContent </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTileContentType type</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameTileContentType.Destination: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get(destinationPrefab); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameTileContentType.Empty: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get(emptyPrefab); } Debug.Assert(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"Unsupported type: "</span></span> + type); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุฒู ุฅุถุงูุฉ ูุซูู ูููุตู ูููุญุชูู ุงููุงุฑุบ ููู ุจูุงุทุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">       ,               .         .  ,        - , , , ,    .     ,       .     ,        ,   . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุจุฅูุดุงุก ุฃุตู ูุตูุน ูุชูููู ุฑูุงุจุทู ููุฃุจููุฉ ุงูุฌุงูุฒุฉ. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7eb/75f/1cd/7eb75f1cd4bed3c72ffd7f0c42b69cbe.png" width="320" height="106"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูุน ุงููุญุชูู </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูู ุจุชูุฑูุฑ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุงุจุท ุฅูู ุงููุตูุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] GameTileContentFactory tileContentFactory = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b12/d6a/506/b12d6a5067fa91177dbed14a876f8b3d.png" width="320" height="110"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุจุฉ ูุน ูุตูุน.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูุตุช ุนูู ุงูุจูุงุท </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุบููุฑ ุงูุญูู ุ ูุญุชุงุฌ ุฅูู ุฃู ูููู ูุงุฏุฑูู ุนูู ุชุญุฏูุฏ ุงูุจูุงุท. ุณูู ูุฌุนููุง ููููุฉ ูู ูุถุน ุงููุนุจุฉ. ุณูุจุนุซ ุดุนุงุนูุง ุฅูู ุงููุดูุฏ ูู ุงูููุงู ุงูุฐู ููุฑ ููู ุงููุงุนุจ ุนูู ูุงูุฐุฉ ุงููุนุจุฉ. ุฅุฐุง ูุงู ุดุนุงุน ูุชูุงุทุน ูุน ุงูุจูุงุท ุ ุซู ููุณูุง ุงููุงุนุจ ุ ููุฐุง ูู ุ ูุฌุจ ุชุบููุฑู. </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ูุชุนุงูู ูุน ูุฏุฎูุงุช ุงููุงุนุจ ุ ููููู ุณูููู ูุณุคููุงู ุนู ุชุญุฏูุฏ ุงูุจูุงุท ุงูุฐู ููุณุชู ุงููุงุนุจ </font></font><code>GameBoard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุชูุงุทุน ุฌููุน ุงูุฃุดุนุฉ ูุน ุงูุจูุงุท ุ ูุฐูู ูู ุจุนุถ ุงูุฃุญูุงู ูู ูุชููู ุฃู ุดูุก. ูุฐูู ุ ูุถูู ุฅูู </font></font><code>GameBoard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>GetTile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ุฏุงุฆููุง ูุง ุชุฑุฌุน ุฏุงุฆููุง ูุจุฏุฆููุง </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ููุฐุง ูุนูู ุฃูู ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุชุฌุงูุจ).</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTile</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Ray ray</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูุฃุดุนุฉ ูุฏ ุนุจุฑุช ุจูุงุทูุง ุ ูุญุชุงุฌ ุฅูู ุงูุงุชุตุงู </font></font><code>Physics.Raycast</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุญุฏูุฏ ุงูุดุนุงุน ููุณูุทุฉ. </font><font style="vertical-align: inherit;">ุชููู ุจุฅุฑุฌุงุน ูุนูููุงุช ุญูู ูุง ุฅุฐุง ูุงู ููุงู ุชูุงุทุน. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุจุฅููุงููุง ุฅุฑุฌุงุน ุงูุจูุงุท ุ ุนูู ุงูุฑุบู ูู ุฃููุง ูุง ูุนุฑู ุฃูููุง ุจุนุฏ ุ ูุฐูู ุณูููู ุจุฅุนุงุฏุชู ูู ุงูููุช ุงูุญุงูู </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryGetTile</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Ray ray</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(ray) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ููุงู ุชูุงุทุน ูุน ุงูุจูุงุท ุ ูุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงูุชูุงุทุน. </font></font><code>Physics.Raycast</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ุชููุฑ ูุฐู ุงููุนูููุงุช ุจุงุณุชุฎุฏุงู ุงููุนููุฉ ุงูุซุงููุฉ </font></font><code>RaycastHit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐู ูู ูุนููุฉ ุงูุฅุฎุฑุงุฌ ุ ูุงูุชู ูุดุงุฑ ุฅูููุง ุจุงููููุฉ </font></font><code>out</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฌูุฏุฉ ุฃูุงููุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ูููู ุฃู ูุนูู ูููุฉ ูููุชุบูุฑ ุงูุฐู ููููู ุฅููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(ray, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุชุถููู ุฅุนูุงู ุงููุชุบูุฑุงุช ุงููุณุชุฎุฏูุฉ ููุนููุงุช ุงูุฅุฎุฑุงุฌ ุ ูุฐูู ุฏุนููุง ููุนู ุฐูู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(ray, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> RaycastHit hit) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุง ููุชู ุจุฃู ุชุตุงุฏู ุญุฏุซ ุงูุชูุงุทุน ุ ูุญู ููุท ูุณุชุฎุฏู ููุถุน ุชูุงุทุน XZ ูุชุญุฏูุฏ ุงูุชุฌุงูุจ. </font><font style="vertical-align: inherit;">ูุญุตู ุนูู ุฅุญุฏุงุซูุงุช ุงูุชุฌุงูุจ ุจุฅุถุงูุฉ ูุตู ุญุฌู ุงูุญูู ุฅูู ุฅุญุฏุงุซูุงุช ููุทุฉ ุงูุชูุงุทุน ุ ุซู ูููู ุจุชุญููู ุงููุชุงุฆุฌ ุฅูู ููู ุนุฏุฏ ุตุญูุญ. </font><font style="vertical-align: inherit;">ุณูููู ูุคุดุฑ ุงูุชุฌุงูุจ ุงูููุงุฆู ููุชูุฌุฉ ุฅุญุฏุงุซูุชู X ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฅุญุฏุงุซู Y ูุถุฑูุจุฉ ูู ุนุฑุถ ุงูุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(ray, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> RaycastHit hit)) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(hit.point.x + size.x * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(hit.point.z + size.y * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tiles[x + y * size.x]; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฐุง ูููู ููุท ุนูุฏูุง ุชููู ุฅุญุฏุงุซูุงุช ุงูุจูุงุท ุฏุงุฎู ุงูุญูู ุ ูุฐูู ุณูู ูุชุญูู ูู ุฐูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููู ูุชู ุฅุฑุฌุงุน ุงูุจูุงุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(hit.point.x + size.x * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(hit.point.z + size.y * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; x &lt; size.x &amp;&amp; y &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; y &lt; size.y) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tiles[x + y * size.x]; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ุงููุญุชูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ููููู ุชุบููุฑ ูุญุชููุงุช ุงูุจูุงุท ุ ุฅุถุงูุฉ ุฅูู </font></font><code>GameTile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููููุฉ ุงูุนุงูุฉ </font></font><code>Content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชููู getter ุจุจุณุงุทุฉ ุจุฅุฑุฌุงุน ุงููุญุชููุงุช ุ ููุชุฌุงูู setter ุงููุญุชููุงุช ุงูุณุงุจูุฉ ุ ุฅู ูุฌุฏุช ุ ููุถุน ุงููุญุชููุงุช ุงูุฌุฏูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> GameTileContent content; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameTileContent Content { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; content; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (content != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { content.Recycle(); } content = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; content.transform.localPosition = transform.localPosition; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูู ุงูููุงู ุงููุญูุฏ ุงูุฐู ุชุญุชุงุฌู ููุชุญูู ูู ุงููุญุชูู </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฃูู ูู ุงูุจุฏุงูุฉ ููุณ ูุฏููุง ูุญุชูู. </font><font style="vertical-align: inherit;">ูุถูุงู ุ ูููุฐ ุชุฃููุฏ ุจุญูุซ ูุง ูุชู ุงุณุชุฏุนุงุก ูุงุถุน ูุน </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Debug.Assert(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> != <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Null assigned to content!"</span></span>); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฎูุฑุง ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุฏุฎุงู ูุงุนุจ. </font><font style="vertical-align: inherit;">ูููู ุชุญููู ููุฑุฉ ุจุงููุงูุณ ุฅูู ุดุนุงุน ุนู ุทุฑูู ุงูุงุชุตุงู </font></font><code>ScreenPointToRay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู </font></font><code>Input.mousePosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณูุทุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฅุฌุฑุงุก ุงูููุงููุฉ ูู ุฃุฌู ุงููุงููุฑุง ุงูุฑุฆูุณูุฉ ุ ูุงูุชู ูููู ุงููุตูู ุฅูููุง ูู ุฎูุงู </font></font><code>Camera.main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅุถุงูุฉ ุฎุงุตูุฉ ุฌ ููุฐุง ุงูุบุฑุถ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Ray TouchRay =&gt; Camera.main.ScreenPointToRay(Input.mousePosition);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูุถูู ุทุฑููุฉ </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุญูู ููุง ุฅุฐุง ูุงู ุฒุฑ ุงููุงูุณ ุงูุฑุฆูุณู ูุฏ ุชู ุงูุถุบุท ุนููู ุฃุซูุงุก ุงูุชุฑููุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุงุชุตู ุจุงูุฑูู </font></font><code>Input.GetMouseButtonDown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตูุฑ ููุณูุทุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุงูุถุบุท ุนูู ุงูููุชุงุญ ุ ูุฅููุง ูุนุงูุฌ ููุณุฉ ุงููุงุนุจ ุ ุฃู ุฃููุง ูุฃุฎุฐ ุงูุจูุงุท ูู ุงูุญูู ููุถุน ููุทุฉ ุงูููุงูุฉ ููุญุชููุงุชู ุ ููุฃุฎุฐูุง ูู ุงููุตูุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetMouseButtonDown(<span class="hljs-number"><span class="hljs-number">0</span></span>)) { HandleTouch(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleTouch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameTile tile = GetTile(TouchRay); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { tile.Content = tileContentFactory.Get(GameTileContentType.Destination); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูููููุง ุชุญููู ุฃู ุจูุงุทุฉ ุฅูู ููุทุฉ ููุงูุฉ ุนู ุทุฑูู ุงูุถุบุท ุนูู ุงููุคุดุฑ. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/99a/f15/da3/99af15da39bfc08cb8886b98e0ae15df.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏุฉ ููุงุท ุงูููุงูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฌุนู ุงููุฌุงู ุงูุตุญูุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ูููู ุฃู ูุญูู ุงููุฑุจุนุงุช ุฅูู ููุงุท ููุงูุฉ ุ ูุฅู ูุฐุง ูุง ูุคุซุฑ ุนูู ุงููุณุงุฑุงุช ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ูุญุฏุฏ ุจุนุฏ ูุญุชูู ูุงุฑุบูุง ููุจูุงุท. </font><font style="vertical-align: inherit;">ุชุนุฏ ุงููุญุงูุธุฉ ุนูู ุตุญุฉ ูุณูุงูุฉ ุงูุญูู ูููุฉ </font></font><code>GameBoard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐูู ุฏุนููุง ูููุญู ูุณุคูููุฉ ุชุญุฏูุฏ ูุญุชููุงุช ุงูุจูุงุท. </font><font style="vertical-align: inherit;">ูุชูููุฐ ุฐูู ุ ุณูุนุทูู ุฑุงุจุทูุง ุฅูู ูุตูุน ุงููุญุชูู ูู ุฎูุงู ุทุฑููุชู </font></font><code>Intialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุณุชุฎุฏูู ูููุญ ูู ุงููุญุชูู ูุณุฎุฉ ูู ูุญุชูู ูุงุฑุบ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> GameTileContentFactory contentFactory; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector2Int size, GameTileContentFactory contentFactory </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size = size; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.contentFactory = contentFactory; ground.localScale = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(size.x, size.y, <span class="hljs-number"><span class="hljs-number">1f</span></span>); tiles = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameTile[size.x * size.y]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; size.y; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; size.x; x++, i++) { โฆ tile.Content = contentFactory.Get(GameTileContentType.Empty); } } FindPaths(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู </font><font style="vertical-align: inherit;">ุฃููู </font><font style="vertical-align: inherit;">ูุตูุนู ุฅูู ุงูุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { board.Initialize(boardSize, tileContentFactory); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูุง ุชุถูู ุญูู ุชูููู ุงููุตูุน ุฅูู GameBoardุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">   ,    ,   .        ,       . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฏููุง ุงูุนุฏูุฏ ูู ููุงุท ุงูููุงูุฉ ุ ูุฅููุง ูููู ุจุชุบููุฑูุง </font></font><code>GameBoard.FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ุชุณุชุฏุนู </font></font><code>BecomeDestination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุทุฉ ููุถูููุง ุฌููุนูุง ุฅูู ุงูุญุฏูุฏ. </font><font style="vertical-align: inherit;">ููุฐุง ูู ูุง ูุชุทูุจู ุงูุฃูุฑ ูุฏุนู ููุงุท ุงูููุงูุฉ ุงููุชุนุฏุฏุฉ. </font><font style="vertical-align: inherit;">ูุชู ูุณุญ ุฌููุน ุงูุจูุงุท ุงูุฃุฎุฑู ูุงููุนุชุงุฏ. </font><font style="vertical-align: inherit;">ุซู ูููู ุจุญุฐู ููุทุฉ ุงูููุงูุฉ ุงูุซุงุจุชุฉ ูู ุงููุณุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPaths</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Destination) { tile.BecomeDestination(); searchFrontier.Enqueue(tile); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { tile.ClearPath(); } } <span class="hljs-comment"><span class="hljs-comment">//tiles[tiles.Length / 2].BecomeDestination(); //searchFrontier.Enqueue(tiles[tiles.Length / 2]); โฆ }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฅุฐุง ุงุณุชุทุนูุง ุชุญููู ุงููุฑุจุนุงุช ุฅูู ููุงุท ููุงูุฉ ุ ูุณูููู ูุงุฏุฑูู ุนูู ุชูููุฐ ุงูุนูููุฉ ุงูุนูุณูุฉ ุ ูุชุญููู ููุงุท ุงูููุงูุฉ ุฅูู ูุฑุจุนุงุช ูุงุฑุบุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุนุฏ ุฐูู ูููููุง ุงูุญุตูู ุนูู ุญูู ุจุฏูู ููุงุท ููุงูุฉ ุนูู ุงูุฅุทูุงู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชููู ูุงุฏุฑุฉ ุนูู ุฃุฏุงุก ูููุชูุง. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ุนูุฏูุง ุชููู ุงูุญุฏูุฏ ูุงุฑุบุฉ ุจุนุฏ ุชููุฆุฉ ุงููุณุงุฑ ูุฌููุน ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุดูุฑ ุฅูู ูุฐุง ุนูู ุฃูู ุญุงูุฉ ุบูุฑ ุตุงูุญุฉ ููุญูู ุ ูุน ุฅุนุงุฏุฉ </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูููุฐ ูุงุณุชููุงูู ุ </font><font style="vertical-align: inherit;">ุงูุนูุฏุฉ ุฎูุงู ุฐูู ูู ุงูููุงูุฉ </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPaths</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFrontier.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } โฆ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูุชูููุฐ ุงูุฏุนู ูุฅุฒุงูุฉ ููุงุท ุงูููุงูุฉ ุ ููุง ูุฌุนููุง ุนูููุฉ ุงูุชุจุฏูู. ุจุงูููุฑ ููู ุงูุจูุงุท ุงููุงุฑุบ ุ ุณูุญูููุง ุฅูู ููุงุท ููุงูุฉ ุ ูุจุงูุถุบุท ุนูู ููุงุท ุงูููุงูุฉ ุ ุณูุญุฐููุง. ููู ุงูุขู ุชุนูู ุนูู ุชุบููุฑ ุงููุญุชูู </font></font><code>GameBoard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐูู ุณูููุญู ุทุฑููุฉ ุนุงูุฉ </font></font><code>ToggleDestination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงููุนููุฉ ูููุง ูู ุงูุชุฌุงูุจ. ุฅุฐุง ูุงู ุงูุจูุงุท ูู ููุทุฉ ุงูููุงูุฉ ุ ูุงุฌุนูู ูุงุฑุบูุง ูุงุชุตู ุจู </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฎูุงู ุฐูู ุ ูุฅููุง ูุฌุนููุง ููุทุฉ ุงูููุงูุฉ ููุทูู ุนูููุง ุฃูุถูุง </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToggleDestination</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile tile</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Destination) { tile.Content = contentFactory.Get(GameTileContentType.Empty); FindPaths(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { tile.Content = contentFactory.Get(GameTileContentType.Destination); FindPaths(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุคุฏู ุฅุถุงูุฉ ููุทุฉ ููุงูุฉ ุฃุจุฏูุง ุฅูู ุฅูุดุงุก ุญุงูุฉ ุญูู ุบูุฑ ุตุงูุญุฉ ุ ููููู ุญุฐู ููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูู ูุชุญูู ููุง ุฅุฐุง ูุงู ูุฏ ูุฌุญ ูู ุงูุชูููุฐ ุจูุฌุงุญ </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฃู ุฌุนููุง ุงูุจูุงุท ูุงุฑุบูุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููู ุจุฅูุบุงุก ุงูุชุบููุฑ ุ ูุฃุนุฏ ุงูุชุฌุงูุจ ูุฑุฉ ุฃุฎุฑู ุฅูู ููุทุฉ ุงูููุงูุฉ ุ ูุงุชุตู ูุฑุฉ ุฃุฎุฑู </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนูุฏุฉ ุฅูู ุงูุญุงูุฉ ุงูุตุญูุญุฉ ุงูุณุงุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Destination) { tile.Content = contentFactory.Get(GameTileContentType.Empty); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!FindPaths()) { tile.Content = contentFactory.Get(GameTileContentType.Destination); FindPaths(); } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููู ุฌุนู ุงูุชุญูู ูู ุงูุตุญุฉ ุฃูุซุฑ ููุงุกุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">      ,      .           ,   .  ,          .        <code>FindPaths</code> ,      . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูู ุงูููุงูุฉ </font></font><code>Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุงุชุตุงู </font></font><code>ToggleDestination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุจูุงุท ุงููุฑูุฒู ููุณูุทุฉ ุ ุจุฏูุงู ูู ุงูุงุชุตุงู ุจุดูู ุตุฑูุญ </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐู ูู ุงููุฑุฉ ุงููุญูุฏุฉ ุงูุชู ูุจุฏุฃ ูููุง ุจุญุงูุฉ ุญูู ุบูุฑ ุตุงูุญุฉ ุ ููููุง ูุถูู ุฃู ููุชูู ุจุงูุญุงูุฉ ุงูุตุญูุญุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector2Int size, GameTileContentFactory contentFactory </span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-comment"><span class="hljs-comment">//FindPaths(); ToggleDestination(tiles[tiles.Length / 2]); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูุฌุจุฑ ุนูู </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุชุตุงู </font></font><code>ToggleDestination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุชุนููู ูุญุชููุงุช ุงูุชุฌุงูุจ ููุณู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleTouch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameTile tile = board.GetTile(TouchRay); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//tile.Content = //tileContentFactory.Get(GameTileContentType.Destination); board.ToggleDestination(tile); } }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/832/685/8a9/8326858a93b938353376ff97259df1a7.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุท ุงูููุงูุฉ ูุชุนุฏุฏุฉ ูุน ุงููุณุงุฑุงุช ุงูุตุญูุญุฉ.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุง ููุจุบู ููุง ุญุธุฑ ุงููุนุจุฉ ูู ุชุญุฏูุฏ ูุญุชููุงุช ุงูุจูุงุท ูุจุงุดุฑุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">   .       .       ,   <code>Game</code>             .    ,      . </div></div><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฏุฑุงู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฏู ูู ุจุฑุฌ ุงูุฏูุงุน ูู ููุน ุงูุฃุนุฏุงุก ูู ุงููุตูู ุฅูู ุงูููุทุฉ ุงูููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูุชุญูู ูุฐุง ุงููุฏู ุจุทุฑููุชูู. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูุญู ููุชููู ุ ูุซุงููุงู ุ ูุจุทุฆูู ุญุชู ูุชููุฑ ุงููุฒูุฏ ูู ุงูููุช ููุชููู. </font><font style="vertical-align: inherit;">ูู ุญูู ุงูุชุฌุงูุจ ุ ูููู ุชูุฏูุฏ ุงูููุช ุ ููุง ูุฒูุฏ ูู ุงููุณุงูุฉ ุงูุชู ูุญุชุงุฌ ุฅูููุง ุงูุฃุนุฏุงุก. </font><font style="vertical-align: inherit;">ููููู ุชุญููู ุฐูู ุนู ุทุฑูู ูุถุน ุงูุนูุจุงุช ูู ูุฐุง ุงููุฌุงู. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ุชููู ูุฐู ุงูุฃุจุฑุงุฌ ุชูุชู ุงูุฃุนุฏุงุก ุฃูุถูุง ุ ููู ูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุณููุชุตุฑ ุนูู ุงูุฌุฏุฑุงู ููุท.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุชููุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฏุฑุงู ูู ููุน ุขุฎุฑ ูู ุงููุญุชูู ุ ูุฐูู ุฏุนููุง ูุถูู </font></font><code>GameTileContentType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุตุฑูุง ุฅูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> GameTileContentType { Empty, Destination, Wall }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ุฅูุดุงุก ุงูุฌุงูุฒุฉ ุงูุฌุฏุงุฑ. </font><font style="vertical-align: inherit;">ูุฐู ุงููุฑุฉ ุ ุณูููู ุจุฅูุดุงุก ูุงุฆู ูุนุจุฉ ูู ูุญุชููุงุช ุงูุชุฌุงูุจ ูุฅุถุงูุฉ ููุนุจ ุชุงุจุน ุฅููู ุ ูุงูุฐู ุณูููู ุฃุนูู ุงูุญูู ูููุก ุงูุชุฌุงูุจ ุจุงููุงูู. </font><font style="vertical-align: inherit;">ุงุฌุนููุง ูุตู ูุญุฏุฉ ุนุงููุฉ ูุงุญูุธ ุงููุตุงุฏู ุ ูุฃู ุงูุฌุฏุฑุงู ูููู ุฃู ุชุชุฏุงุฎู ุจุตุฑููุง ูุน ุฌุฒุก ูู ุงูุจูุงุท ุงูููุฌูุฏ ุฎููู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุนูุฏูุง ูููุณ ุงููุงุนุจ ุงูุญุงุฆุท ุ ูุณูู ูุคุซุฑ ุนูู ุงูุจูุงุท ุงูููุงุจู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1d3/a33/779/1d3a33779b0c4d49f8ab4fed3d8abd20.png" width="320" height="176" alt="ุฌุฐุฑ"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/431/b5c/9f6/431b5c9f65000bab15dd9e1eed14696d.png" width="320" height="226" alt="ููุนุจ"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e6b/875/3b2/e6b8753b2e9b954b55a4a3a6e0154560.png" width="225" height="60" alt="ููุฒู ุฌุงูุฒ"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุงูุฒุฉ ุงูุฌุฏุงุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุงูุฌุฏุงุฑ ุงูุฌุงูุฒ ูููุตูุน ุ ุณูุงุก ูู ุงูููุฏ ุฃู ูู ุงูููุชุด.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] GameTileContent wallPrefab = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTileContent </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTileContentType type</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameTileContentType.Destination: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get(destinationPrefab); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameTileContentType.Empty: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get(emptyPrefab); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameTileContentType.Wall: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get(wallPrefab); } Debug.Assert(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"Unsupported type: "</span></span> + type); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/262/eaa/50f/262eaa50f1bf4f80b2d2861d6232368b.png" width="320" height="80"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูุน ูุน ุฌุฏุงุฑ ุงูุฌุงูุฒุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฏูุฑู ุนูู ุงูุฌุฏุฑุงู ูุฎุงุฑุฌูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุถุงูุฉ ุฅูู </font></font><code>GameBoard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุชุดุบูู / ุฅููุงู ุงูุฌุฏุฑุงู ุ ููุง ูุนููุง ูููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ูู ูุชุญูู ูู ุงูุญุงูุฉ ุบูุฑ ุงูุตุญูุญุฉ ููุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToggleWall</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile tile</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Wall) { tile.Content = contentFactory.Get(GameTileContentType.Empty); FindPaths(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { tile.Content = contentFactory.Get(GameTileContentType.Wall); FindPaths(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ููุฏู ุงูุฏุนู ููุชุจุฏูู ููุท ุจูู ุงูุจูุงุท ุงููุงุฑุบ ูุจูุงุท ุงูุฌุฏุฑุงู ุ ุฏูู ุงูุณูุงุญ ููุฌุฏุฑุงู ุจุงุณุชุจุฏุงู ููุงุท ุงูููุงูุฉ ูุจุงุดุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูููู ุจุฅูุดุงุก ุฌุฏุงุฑ ููุท ุนูุฏูุง ูููู ุงูุจูุงุท ูุงุฑุบูุง. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ุฃู ุชููุน ุงูุฌุฏุฑุงู ุงูุจุญุซ ุนู ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ูููู ูุฌุจ ุฃู ูููู ููู ุจูุงุทุฉ ุทุฑูู ุฅูู ููุทุฉ ุงูููุงูุฉ ุ ูุฅูุง ูุฅู ุงูุฃุนุฏุงุก ุณูุชุนุซุฑูู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ูุฑุฉ ุฃุฎุฑู ุฅูู ุงุณุชุฎุฏุงู ุงูุชุญูู ูู ุงูุตุญุฉ </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌุงูู ุงูุชุบููุฑุงุช ุฅุฐุง ูุงููุง ุจุฅูุดุงุก ุญุงูุฉ ุญูู ุบูุฑ ุตุญูุญุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Empty) { tile.Content = contentFactory.Get(GameTileContentType.Wall); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!FindPaths()) { tile.Content = contentFactory.Get(GameTileContentType.Empty); FindPaths(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุชุดุบูู ูุฅููุงู ุชุดุบูู ุงูุฌุฏุฑุงู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุฃูุซุฑ ูู ุชุดุบูู ูุฅููุงู ููุงุท ุงูููุงูุฉ ุ ูุฐูู ุณูุฌุนู ุชุจุฏูู ุงูุฌุฏุฑุงู ูู </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุฉ ุฑุฆูุณูุฉ. </font><font style="vertical-align: inherit;">ูููู ุชุจุฏูู ููุงุท ุงูููุงูุฉ ุจููุณุฉ ุฅุถุงููุฉ (ุนุงุฏุฉู ูุง ูููู ุฒุฑ ุงููุงูุณ ุงูุฃููู) ุ ูุงูุฐู ูููู ุงูุชุนุฑู ุนููู ุจุงูุงูุชูุงู ุฅูู </font></font><code>Input.GetMouseButtonDown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ 1.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetMouseButtonDown(<span class="hljs-number"><span class="hljs-number">0</span></span>)) { HandleTouch(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetMouseButtonDown(<span class="hljs-number"><span class="hljs-number">1</span></span>)) { HandleAlternativeTouch(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleAlternativeTouch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameTile tile = board.GetTile(TouchRay); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { board.ToggleDestination(tile); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleTouch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameTile tile = board.GetTile(TouchRay); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { board.ToggleWall(tile); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d62/e45/4e9/d62e454e94a659dd9da841a915a93dac.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุฏููุง ุงูุฌุฏุฑุงู.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ุฃุญุตู ุนูู ูุฌูุงุช ูุจูุฑุฉ ุจูู ุธูุงู ุงูุฌุฏุฑุงู ุงููุฌุงูุฑุฉ ูุทุฑููุงุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,          ,    ,   .   ,   ,  far clipping plane      . ,   far plane  20      .  ,         MSAA,     . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ูุชุฃูุฏ ุฃูุถูุง ูู ุฃู ููุงุท ุงูููุงูุฉ ูุง ูููู ุฃู ุชุญู ูุญู ุงูุฌุฏุฑุงู ูุจุงุดุฑุฉู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToggleDestination</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile tile</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Destination) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Empty) { tile.Content = contentFactory.Get(GameTileContentType.Destination); FindPaths(); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุงุฑ ุงูุจุญุซ ููู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชููุน ุงูุฌุฏุฑุงู ุงูุจุญุซ ุนู ุงููุณุงุฑ ุ ูููู ุฃู ูุถูู ุจูุงุทุงุช ุจุฌุฏุฑุงู ุฅูู ุญุฏูุฏ ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุฌุจุงุฑูู ุนูู </font></font><code>GameTile.GrowPathTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏู ุฅุนุงุฏุฉ ุจูุงุท ุงูุฌุฏุฑุงู. </font><font style="vertical-align: inherit;">ูููู ูุฌุจ ุฃู ูุธู ุงููุณุงุฑ ูููู ูู ุงุชุฌุงู ุงูุฌุฏุงุฑ ุ ุจุญูุซ ูููู ููู ุงูุจูุงุท ุงูููุฌูุฏ ูู ุงูุญูู ูุณุงุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ุถุฑูุฑู ูุฃูู ูู ุงููููู ุฃู ุชุชุญูู ุจูุงุทุฉ ูุน ุฃุนุฏุงุก ูุฌุฃุฉ ุฅูู ุฌุฏุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">GameTile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GrowPathTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile neighbor</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!HasPath || neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || neighbor.HasPath) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } neighbor.distance = distance + <span class="hljs-number"><span class="hljs-number">1</span></span>; neighbor.nextOnPath = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> neighbor.Content.Type != GameTileContentType.Wall ? neighbor : <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุชุฌุงูุจุงุช ููุง ูุณุงุฑ ุ </font></font><code>GameBoard.FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุชุญูู ูู ุฐูู ุจุนุฏ ุงูุชูุงู ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ูุฐู ูู ุงูุญุงูุฉ ุ ูุฅู ุญุงูุฉ ุงูุญูู ุบูุฑ ุตุงูุญุฉ ูุชุญุชุงุฌ ุฅูู ุฅุฑุฌุงุนูุง </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุณ ูู ุงูุถุฑูุฑู ุชุญุฏูุซ ุชุตูุฑ ุงููุณุงุฑ ููุญุงูุงุช ุบูุฑ ุงูุตุงูุญุฉ ุ ูุฃู ุงูุญูู ุณูุนูุฏ ุฅูู ุงูุญุงูุฉ ุงูุณุงุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPaths</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!tile.HasPath) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { tile.ShowPath(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cc3/ff2/c3e/cc3ff2c3e52a087d9fa757d5760623d6.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฏุฑุงู ุชุคุซุฑ ุนูู ุงูุทุฑูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุฃูุฏ ูู ุฃู ุงูุฌุฏุฑุงู ููุง ุจุงููุนู ุงููุณุงุฑุงุช ุงูุตุญูุญุฉ ุ ุชุญุชุงุฌ ุฅูู ุฌุนู ุงูููุนุจุงุช ุดูุงูุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d9b/2f6/70c/d9b2f670c9bcf0fc568c1484750c2e77.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฏุฑุงู ุดูุงูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃู ุดุฑุท ุตุญุฉ ุฌููุน ุงููุณุงุฑุงุช ูุง ูุณูุญ ููุฌุฏุฑุงู ุจุฅุญุงุทุฉ ุฌุฒุก ูู ุงูุญูู ุงูุฐู ูุง ุชูุฌุฏ ููู ููุทุฉ ููุงูุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุชูุณูู ุงูุฎุฑูุทุฉ ุ ูููู ููุท ูู ุญุงูุฉ ูุฌูุฏ ููุทุฉ ููุงูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ูู ูู ุฌุฒุก. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ุฃู ูููู ูู ุฌุฏุงุฑ ูุฌุงูุฑูุง ูุจูุงุท ูุงุฑุบ ุฃู ููุทุฉ ููุงูุฉ ุ ูุฅูุง ููู ูููู ุจุฅููุงูู ุงูุญุตูู ุนูู ูุณุงุฑ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุณุชุญูู ุนูู ูุชูุฉ ุตูุจุฉ ูู 3 ร 3 ุฌุฏุฑุงู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฎูุงุก ุงูุทุฑูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุญ ููุง ุชุตูุฑ ุงููุณุงุฑุงุช ูุนุฑูุฉ ููููุฉ ุนูู ุจุญุซ ุงููุณุงุฑ ูุงูุชุฃูุฏ ูู ุตุญุชู ุจุงููุนู. </font><font style="vertical-align: inherit;">ููู ูุง ููุฒู ุฅุธูุงุฑู ููุงุนุจ ุ ุฃู ุนูู ุงูุฃูู ููุณ ุจุงูุถุฑูุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนููุง ูููุฑ ุงููุฏุฑุฉ ุนูู ุฅููุงู ุงูุฃุณูู. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ุฅูู </font></font><code>GameTile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุนุงูุฉ </font></font><code>HidePath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุจุจุณุงุทุฉ ุชุนุทูู ุณูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HidePath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { arrow.gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูุฉ ุชุนููู ุงููุณุงุฑ ุฌุฒุก ูู ุญุงูุฉ ุงูุญูู. </font><font style="vertical-align: inherit;">ุฃุถู </font></font><code>GameBoard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูููุง ููุทูููุง ุฅูู ูุณุงูู ุงูุงูุชุฑุงุถู </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุชุจุน ุญุงูุชู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฎุงุตูุฉ ุดุงุฆุนุฉ ููุคุณุณ ูุถุจุท. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุนุฑุถ ูุงุถุน ุงููุณุงุฑุงุช ุฃู ูุฎูููุง ุนูู ูู ุงููุฑุจุนุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> showPaths; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ShowPaths { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; showPaths; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { showPaths = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (showPaths) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { tile.ShowPath(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { tile.HidePath(); } } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู </font></font><code>FindPaths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุนุฑุถ </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุงููุณุงุฑุงุช ุงููุญุฏูุซุฉ ููุท ูู ุญุงูุฉ ุชูููู ุงูุชูุฏูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPaths</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (showPaths) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (GameTile tile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tiles) { tile.ShowPath(); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุชุนุทูู ุชุตูุฑ ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ูู ุจุฅููุงู ุชุดุบูู ุงูุณูู ูู ุงููุงุฌูุฉ ุงูุฌุงูุฒุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a5a/c71/802/a5ac718028d1bb41c145dfabba9051e1.png" width="320" height="44"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูู ุงูุฌุงูุฒุฉ ุบูุฑ ูุดุท ุจุดูู ุงูุชุฑุงุถู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุนูู ุจุญูุซ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุบูุฑ ุญุงูุฉ ุงูุชุตูุฑ ุนูุฏ ุงูุถุบุท ุนูู ุงูููุชุงุญ. </font><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุทูู ุงุณุชุฎุฏุงู ููุชุงุญ P ุ ููููู ุฃูุถูุง ููุชุงุญ ุชุดุบูู ุณุฑูุน ูุชูููู / ุชุนุทูู ูุถุน ุงููุนุจุฉ ูู ูุญุฑุฑ Unity. </font><font style="vertical-align: inherit;">ูุชูุฌุฉ ูุฐูู ุ ุณูุชู ุงูุชุจุฏูู ุนูุฏ ุงุณุชุฎุฏุงู ููุชุงุญ ุงูุงุฎุชุตุงุฑ ููุฎุฑูุฌ ูู ูุถุน ุงููุนุจุฉ ุ ูุงูุฐู ูุง ูุจุฏู ูุทูููุง ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุฏุนููุง ูุณุชุฎุฏู ููุชุงุญ V (ุงุฎุชุตุงุฑ ููุชุตูุฑ).</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a9c/a96/15c/a9ca9615c10cdab502f1769443ad6b38.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงูุณูุงู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ุงูุดุจูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชููู ุงูุฃุณูู ูุฎููุฉ ุ ูุตุจุญ ูู ุงูุตุนุจ ุชูููุฒ ูููุน ูู ูุฑุจุน. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุถูู ุฎุทูุท ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ูู ุจุชูุฒูู </font><font style="vertical-align: inherit;">ูุณูุฌ ุดุจูุฉ ุญุฏูุฏ ูุฑุจุนุฉ </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุงุณุชุฎุฏุงูู ูุฎูููุฉ ุชุฌุงูุจ ูููุตูุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4c1/e98/483/4c1e984836babfc368136b83ac2b195b.png" width="128" height="128"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุฌ ุดุจูุฉ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุถูู ูุฐุง ุงููุณูุฌ ุจุดูู ูุฑุฏู ุฅูู ูู ุจูุงุทุฉ ุ ูููููุง ูุทุจูู ุนูู ุงูุฃุฑุถ. ููููุง ุณูุฌุนู ูุฐู ุงูุดุจูุฉ ุงุฎุชูุงุฑูุฉ ุ ููุฐูู ุชุตูุฑ ุงููุณุงุฑุงุช. ูุฐูู ุ ุณูู ูุถูู ุฅูู </font></font><code>GameBoard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูู ุงูุชูููู </font></font><code>Texture2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฏ ูุณูุฌ ุดุจูุฉ ูุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] Texture2D gridTexture = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ed4/99a/28e/ed499a28e82a3328c010a71ba1085316.png" width="320" height="94"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู ูุน ูุณูุฌ ุดุจูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุญูู Boolean ุขุฎุฑ ูุฎุงุตูุฉ ููุชุญูู ูู ุญุงูุฉ ุงูุชุตูุฑ ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุนูู ุงููุถุจุท ุชุบููุฑ ูุงุฏุฉ ุงูุฃุฑุถ ุ ูุงูุชู ูููู ุชูููุฐูุง ุนู ุทุฑูู ุงุณุชุฏุนุงุก </font></font><code>GetComponent&lt;MeshRenderer&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุฑุถ ูุงููุตูู ุฅูู ุฎุงุตูุฉ </font></font><code>material</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุดุจูุฉ ุชุญุชุงุฌ ุฅูู ุนุฑุถูุง ุ ูุณูููู ุจุชุนููู </font></font><code>mainTexture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุฌ ุงูุดุจูุฉ </font><font style="vertical-align: inherit;">ุฅูู ุฎุงุตูุฉ </font><font style="vertical-align: inherit;">ุงูููุงุฏ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุฅุณูุงุฏูุง ุฅููู </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุงุญุธ ุฃูู ุนูุฏ ุชุบููุฑ ูุณูุฌ ุงููุงุฏุฉ ุ ุณูุชู ุฅูุดุงุก ูุณุฎ ููุฑุฑุฉ ูู ุงููุงุฏุฉ ุ ุจุญูุซ ุชุตุจุญ ูุณุชููุฉ ุนู ูุงุฏุฉ ุงูุนุฑุถ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> showGrid, showPaths; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ShowGrid { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; showGrid; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { showGrid = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; Material m = ground.GetComponent&lt;MeshRenderer&gt;().material; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (showGrid) { m.mainTexture = gridTexture; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { m.mainTexture = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญูู ุนู ุชุตูุฑ ุงูุดุจูุฉ ุจุงุณุชุฎุฏุงู ุงูููุชุงุญ G.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKeyDown(KeyCode.G)) { board.ShowGrid = !board.ShowGrid; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถุง ุ ุฅุถุงูุฉ ุงูุชุตูุฑ ุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ ู </font></font><code>Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { board.Initialize(boardSize, tileContentFactory); board.ShowGrid = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b04/145/190/b04145190e5d8f15972f25374d7f5813.png" width="230" height="230"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุจูุฉ ุบูุฑ ูููุงุณ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏููุง ุญุชู ุงูุขู ุญุฏูุฏ ุญูู ุงูุญูู ุจุฃูููู. </font><font style="vertical-align: inherit;">ูุทุงุจู ุงููููุณ ุ ููู ูุฐุง ููุณ ูุง ูุญุชุงุฌู. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุชูุณูุน ูุทุงู ุงููููุณ ุงูุฑุฆูุณู ูููุงุฏุฉ ุจุญูุซ ุชุชูุงุณุจ ูุน ุญุฌู ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุทุฑููุฉ </font></font><code>SetTextureScale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุฏ ุจุงุณู ุฎุงุตูุฉ ุงููุณูุฌ ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_MainTex</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุงูุญุฌู ุซูุงุฆู ุงูุฃุจุนุงุฏ. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุญุฌู ุงูุญูู ูุจุงุดุฑุฉู ุ ูุงูุฐู ูุชู ุชุญูููู ุจุดูู ุบูุฑ ูุจุงุดุฑ ุฅูู ูููุฉ </font></font><code>Vector2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (showGrid) { m.mainTexture = gridTexture; m.SetTextureScale(<span class="hljs-string"><span class="hljs-string">"_MainTex"</span></span>, size); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/edb/d2a/b85/edbd2ab858e40a61d5f89452a8809b33.png" width="230" height="230" alt="ุจุฏูู"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8bd/91a/ae5/8bd91aae589309dbd64994bb10a935a9.png" width="230" height="230" alt="ูุน"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุจูุฉ ุชุญุฌูููุฉ ูุน ุชุดุบูู ูุณุงุฑ ุงูุฑุคูุฉ ูุฅููุงู ุชุดุบููู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ูู ูุฐู ุงููุฑุญูุฉ ุ ุญุตููุง ุนูู ูุฌุงู ุนูู ูุนุจุฉ ุงูุจูุงุท ูู ุงูููุน ุงูุฏูุงุน ุงูุจุฑุฌ. </font><font style="vertical-align: inherit;">ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงูุชุงูู ุณูุถูู ุงูุฃุนุฏุงุก. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุฏุน </font></font></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PDF</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar449798/">https://habr.com/ru/post/ar449798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar449784/index.html">ูู ุฃู ุงูุญุงูุงุช ุ ูุฌุฏุฑ ุงุณุชุฎุฏุงู Django (ูุงูุฐู ูุง ูููู ุถุฑูุฑููุง)</a></li>
<li><a href="../ar449788/index.html">ููุฏู Brave Browser ููุตุฉ ุฅุนูุงููุฉ ูุงุฆูุฉ ุนูู ุงูููุงูุขุช</a></li>
<li><a href="../ar449790/index.html">ุชุทููุฑ ุงูููุชุฌุงุช ุงููุณุงุนุฏุงุช ุงูุจุตุฑูุฉ: ุงูุชุตููู</a></li>
<li><a href="../ar449794/index.html">ูุตูููุงุช ุงูููุงุฆู ุงูุชูููู: ููู ูุนููุ (ุฃุณุงุณ)</a></li>
<li><a href="../ar449796/index.html">ุนู ูุชุงุฉ ูุงุญุฏุฉ</a></li>
<li><a href="../ar449802/index.html">ูุจุฑูุฌ ูุธููู. ุงูุฌุฒุก 1. ุงูุจุฑูุงูุฌ ุงูุฃูู</a></li>
<li><a href="../ar449804/index.html">ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุนูุงุฌ ุงููุถุงุฏ ููุดูุฎูุฎุฉ ููุจููุฑุฒ</a></li>
<li><a href="../ar449806/index.html">ูุจุฑูุฌ ูุธููู. ุงูุฌุฒุก 2. ุงููุฏุฑุณุฉ ุฃู ุงูุชุนููู ุงูุฐุงุชู</a></li>
<li><a href="../ar449808/index.html">ูุงู ุฅูุฌุงุจู 9 ุฃูุงู ุงูุชุฌุฑุจุฉ: ููู ูุณุงุนุฏ ุงูุชูููุฑ ุงููุงูุฏ ูู ุงูุญูุงุฉ ูุงูุนูู</a></li>
<li><a href="../ar449814/index.html">Windows XP ูุงุช ุฑุณูููุง ุ ูุงูุขู ุฃุฎูุฑูุง</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>