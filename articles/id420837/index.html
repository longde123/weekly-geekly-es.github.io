<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧓🏻 😸 🍧 Menguji array RAID perangkat lunak untuk perangkat NVMe menggunakan metodologi SNIA 👩🏾‍🎨 🤸🏼 🤵🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beberapa bulan yang lalu, ketika mengerjakan proyek berikutnya, orang-orang dari laboratorium penelitian kami mempelajari disk NVMe dan solusi perangk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menguji array RAID perangkat lunak untuk perangkat NVMe menggunakan metodologi SNIA</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raidix/blog/420837/"><img src="https://habrastorage.org/webt/4j/ib/lz/4jiblzb0pamckpjzolpdiq1gr8s.jpeg"><br><br>  Beberapa bulan yang lalu, ketika mengerjakan proyek berikutnya, orang-orang dari laboratorium penelitian kami mempelajari disk NVMe dan solusi perangkat lunak untuk menemukan opsi terbaik untuk merakit array perangkat lunak. <br><br>  Hasil tes kemudian secara mengejutkan mengecewakan - potensi kecepatan besar dari disk NVMe sama sekali tidak berkorelasi dengan kinerja yang ditunjukkan dari produk perangkat lunak yang ada. <br><a name="habracut"></a><br>  Pengembang kami tidak menyukainya.  Dan mereka memutuskan untuk menulis produk mereka ... Sebuah produk yang kemudian dipasarkan dengan penuh kegembiraan dengan nama RAIDIX ERA. <br><br>  Saat ini, lebih dari selusin perusahaan memproduksi server yang disesuaikan untuk menggunakan drive NVMe.  Pasar untuk produk yang mendukung dan mengembangkan teknologi ini memiliki potensi yang sangat besar.  Dalam laporan analitik G2M, angka yang cukup meyakinkan disajikan meyakinkan bahwa protokol transfer data ini akan mendominasi dalam waktu dekat. <br><br><img src="https://habrastorage.org/webt/wd/f6/ol/wdf6olgkq9vam7sfinx9sb843ek.png"><br>  <i><font color="#99999">Bagan dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Laporan G2M</a></font></i> <br><br>  Saat ini, salah satu pemimpin dalam produksi komponen NVMe adalah Intel.  Pada peralatan mereka kami melakukan tes untuk menilai kemampuan produk perangkat lunak yang ada untuk mengelola perangkat keras yang "inovatif". <br><br>  Bersama dengan mitra kami, Promobit (produsen server dan sistem penyimpanan data di bawah merek dagang BITBLAZE), kami menyelenggarakan pengujian drive NVMe Intel dan perangkat lunak umum untuk mengelola perangkat tersebut.  Pengujian dilakukan sesuai dengan metode SNIA. <br><br>  Pada artikel ini kami akan berbagi angka yang diperoleh selama pengujian sistem perangkat keras Intel NVMe, array perangkat lunak dari MDRAID, Zvol di atas ZFS RAIDZ2 dan, pada kenyataannya, pengembangan baru kami. <br><br><h2>  Konfigurasi perangkat keras </h2><br>  Untuk dasar platform pengujian, kami mengambil sistem server Intel Server System R2224WFTZS.  Ini memiliki 2 soket untuk menginstal prosesor Intel Xeon Scalable dan 12 saluran memori (total 24 DIMM) DDR 4 dengan frekuensi hingga 2666 MHz. <br><br>  Informasi lebih lanjut tentang platform server dapat ditemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di situs web pabrikan</a> . <br><br>  Semua NVMe-drive terhubung melalui 3 backplanes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">F2U8X25S3PHS</a> . <br><br>  Secara total, kami mendapatkan 12 NVMe-drive INTEL SSDPD2MD800G4 dengan firmware CVEK6256004E1P0BGN dalam sistem. <br><br>  Platform server dilengkapi dengan dua prosesor Intel® Xeon® Gold 6130 CPU @ 2.10GHz dengan Hyper-Threading diaktifkan, memungkinkan dua utas diluncurkan dari masing-masing inti.  Jadi, pada output kami menerima 64 utas komputasi. <br><br><h2>  Persiapan ujian </h2><br>  Semua tes dalam artikel ini dilakukan sesuai dengan spesifikasi metodologi SNIA SSS PTSe v 1.1.  Termasuk, persiapan awal penyimpanan dilakukan untuk mendapatkan hasil yang stabil dan jujur. <br><br>  SNIA memungkinkan pengguna untuk mengatur parameter untuk jumlah utas dan kedalaman antrian, jadi kami menetapkan 64/32, memiliki 64 utas komputasi pada 32 inti. <br><br>  Setiap tes dilakukan dalam 16 putaran untuk membawa sistem ke level indikator yang stabil dan mengeluarkan nilai acak. <br><br>  Sebelum memulai tes, kami membuat persiapan awal sistem: <br><br><ol><li>  Menginstal versi kernel 4.11 pada CentOS 7.4. </li><li>  Matikan C-STATES dan P-STATES. </li><li>  Jalankan utilitas tuned-adm dan atur profil kinerja latensi. </li></ol><br>  Pengujian setiap produk dan barang dilakukan dengan tahapan sebagai berikut: <br><br>  Persiapan perangkat sesuai dengan spesifikasi SNIA (tergantung dan tidak tergantung pada jenis beban). <br><br><ol><li>  Tes IOps dalam blok 4k, 8k, 16k, 32k, 64k, 128k, 1m dengan variasi kombinasi baca / tulis 0/100, 5/95, 35/65, 50/50, 65/35, 95/5, 100/0 . </li><li>  Tes latensi dengan blok 4k, 8k, 16k dengan variasi kombinasi baca / tulis 0/100, 65/35 dan 100/0.  Jumlah utas dan kedalaman antrian adalah 1-1.  Hasil dicatat sebagai penundaan rata-rata dan maksimum. </li><li>  Tes uji coba dengan blok 128k dan 1M, di 64 baris dari 8 tim. </li></ol><br>  Kami mulai dengan menguji kinerja, latensi, dan keluaran platform perangkat keras.  Ini memungkinkan kami untuk mengevaluasi potensi peralatan yang diusulkan dan membandingkan dengan kemampuan solusi perangkat lunak yang diterapkan. <br><br><h2>  Uji 1. Pengujian Perangkat Keras </h2><br>  Untuk memulainya, kami memutuskan untuk melihat apa yang dapat dilakukan oleh satu drive NVMe Intel DCM D3700. <br>  Dalam spesifikasi, pabrikan menyatakan parameter kinerja berikut: <br><blockquote>  Baca Acak (Rentang 100%) 450.000 IOPS <br>  Penulisan Acak (Rentang 100%) 88000 IOPS </blockquote><br><h3>  Uji 1.1 Satu drive NVMe.  Tes IOPS </h3><br>  Hasil Kinerja (IOps) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R5% / W95% </th><th>  R35% / W65% </th><th>  R50% / W50% </th><th>  R65% / W35% </th><th>  R95% / W5% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  84017.8 </td><td>  91393.8 </td><td>  117271.6 </td><td>  133059.4 </td><td>  175086.8 </td><td>  281131.2 </td><td>  390969.2 </td></tr><tr><td>  8rb </td><td>  42602.6 </td><td>  45735.8 </td><td>  58980.2 </td><td>  67321.4 </td><td>  101357.2 </td><td>  171316.8 </td><td>  216551.4 </td></tr><tr><td>  16k </td><td>  21618.8 </td><td>  22834.8 </td><td>  29703.6 </td><td>  33821.2 </td><td>  52552.6 </td><td>  89731.2 </td><td>  108347 </td></tr><tr><td>  32rb </td><td>  10929.4 </td><td>  11322 </td><td>  14787 </td><td>  16811 </td><td>  26577.6 </td><td>  47185.2 </td><td>  50670.8 </td></tr><tr><td>  64rb </td><td>  5494.4 </td><td>  5671.6 </td><td>  7342.6 </td><td>  8285.8 </td><td>  13130.2 </td><td>  23884 </td><td>  27249.2 </td></tr><tr><td>  128rb </td><td>  2748.4 </td><td>  2805.2 </td><td>  3617.8 </td><td>  4295.2 </td><td>  6506.6 </td><td>  11997.6 </td><td>  13631 </td></tr><tr><td>  1 m </td><td>  351.6 </td><td>  354.8 </td><td>  451.2 </td><td>  684.8 </td><td>  830.2 </td><td>  1574.4 </td><td>  1702.8 </td></tr></tbody></table><br>  Hasil Kinerja (IOps) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/ja/gw/al/jagwaldo3cvyw5bxk9uxgeaqvtq.png"><br><br>  Pada tahap ini, kami mendapat hasil yang tidak cukup mencapai yang pabrik.  Kemungkinan besar, NUMA (skema implementasi memori komputer yang digunakan dalam sistem multiprosesor, ketika waktu akses ke memori ditentukan oleh lokasinya relatif terhadap prosesor) memainkan perannya, tetapi untuk saat ini kami tidak akan memperhatikannya. <br><br><h3>  Uji 1.2 Satu drive NVMe.  Tes Keterlambatan </h3><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  0,02719 </td><td>  0,072134 </td><td>  0,099402 </td></tr><tr><td>  8rb </td><td>  0,029864 </td><td>  0,093092 </td><td>  0,121582 </td></tr><tr><td>  16k </td><td>  0,046726 </td><td>  0,137016 </td><td>  0,16405 </td></tr></tbody></table><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/di/dg/cy/didgcy1xldxrxa8e9qec9cfri8y.png"><br><br>  <b>Waktu respons maksimum</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  6.9856 </td><td>  4.7147 </td><td>  1.5098 </td></tr><tr><td>  8rb </td><td>  7.0004 </td><td>  4.3118 </td><td>  1.4086 </td></tr><tr><td>  16k </td><td>  7.0068 </td><td>  4.6445 </td><td>  1.1064 </td></tr></tbody></table><br>  <b>Waktu respons maksimum</b> (md) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/j0/sp/1y/j0sp1ynjubpq8yfuikeiogvhzz0.png"><br><br><h3>  Uji 1.3 Throughput </h3><br>  Langkah terakhir adalah mengevaluasi throughput.  Berikut adalah indikator-indikator berikut: <br><blockquote>  Rekaman berurutan 1MB - 634 MBps. <br>  Baca sekuensial 1MB - 1707 MBps. <br>  Rekaman berurutan 128Kb - 620 MBps. <br>  Baca berurutan 128Kb - 1704 MBps. </blockquote><br>  Setelah berurusan dengan satu drive, kami melanjutkan untuk mengevaluasi seluruh platform, yang terdiri dari 12 drive. <br><br><h3>  Uji 1.4 Sistem dalam 12 drive.  Tes IOPS </h3><br>  Di sini, keputusan yang kuat dibuat untuk menghemat waktu dan menunjukkan hasil hanya untuk bekerja dengan blok 4k, yang sejauh ini merupakan skenario paling umum dan indikatif untuk mengevaluasi kinerja. <br><br>  Hasil Kinerja (IOps) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R5% / W95% </th><th>  R35% / W65% </th><th>  R50% / W50% </th><th>  R65% / W35% </th><th>  R95% / W5% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  1363078.6 </td><td>  1562345 </td><td>  1944105 </td><td>  2047612 </td><td>  2176476 </td><td>  3441311 </td><td>  4202364 </td></tr></tbody></table><br>  Hasil Kinerja (IOps) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/lz/nb/za/lznbza47oi8rjwokg-eobx2rfnc.png"><br><br><h3>  Tes 1.5 Sistem dalam 12 drive.  Tes bandwidth </h3><br><blockquote>  Rekaman berurutan 1MB - 8612 MBps. <br>  Baca sekuensial 1MB - 20481 MBps. <br>  Rekaman berurutan 128Kb - 7500 MBps. <br>  Baca berurutan 128Kb - 20400 MBps. </blockquote><br>  Kami akan melihat indikator kinerja perangkat keras yang diperoleh lagi di akhir artikel, membandingkannya dengan jumlah perangkat lunak yang diuji di atasnya. <br><br><h2>  Tes 2: Menguji MDRAID </h2><br>  Ketika kita berbicara tentang susunan perangkat lunak, MDRAID datang ke pikiran pertama.  Ingatlah bahwa ini adalah perangkat lunak dasar RAID untuk Linux, yang didistribusikan secara gratis. <br><br>  Mari kita lihat bagaimana MDRAID menangani sistem 12-disk yang diusulkan dengan level array RAID 0. Kita semua mengerti bahwa membangun RAID 0 pada drive 12 membutuhkan keberanian khusus, tetapi sekarang kita membutuhkan level array ini untuk menunjukkan kemampuan maksimal dari solusi ini. <br><br><h3>  Tes 2.1 MDRAID.  RAID 0. Tes IOPS </h3><br>  Hasil Kinerja (IOps) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R5% / W95% </th><th>  R35% / W65% </th><th>  R50% / W50% </th><th>  R65% / W35% </th><th>  R95% / W5% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  1010396 </td><td>  1049306.6 </td><td>  1312401.4 </td><td>  1459698.6 </td><td>  1932776.8 </td><td>  2692752.8 </td><td>  2963943.6 </td></tr><tr><td>  8rb </td><td>  513627.8 </td><td>  527230.4 </td><td>  678140 </td><td>  771887.8 </td><td>  1146340.6 </td><td>  1894547.8 </td><td>  2526853.2 </td></tr><tr><td>  16k </td><td>  261087.4 </td><td>  263638.8 </td><td>  343679.2 </td><td>  392655.2 </td><td>  613912.8 </td><td>  1034843.2 </td><td>  1288299.6 </td></tr><tr><td>  32rb </td><td>  131198.6 </td><td>  130947.4 </td><td>  170846.6 </td><td>  216039.4 </td><td>  309028.2 </td><td>  527920.6 </td><td>  644774.6 </td></tr><tr><td>  64rb </td><td>  65083.4 </td><td>  65099.2 </td><td>  85257.2 </td><td>  131005.6 </td><td>  154839.8 </td><td>  268425 </td><td>  322739 </td></tr><tr><td>  128rb </td><td>  32550.2 </td><td>  32718.2 </td><td>  43378.6 </td><td>  66999.8 </td><td>  78935.8 </td><td>  136869.8 </td><td>  161015.4 </td></tr><tr><td>  1 m </td><td>  3802 </td><td>  3718.4 </td><td>  3233.4 </td><td>  3467.2 </td><td>  3546 </td><td>  6150.8 </td><td>  8193.2 </td></tr></tbody></table><br>  Hasil Kinerja (IOps) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/jf/d1/kl/jfd1klb3wv6px-vjbxypjff8nmu.png"><br><br><h3>  Tes 2.2 MDRAID.  RAID 0. Tes keterlambatan </h3><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  0,03015 </td><td>  0,067541 </td><td>  0.102942 </td></tr><tr><td>  8rb </td><td>  0,03281 </td><td>  0,082132 </td><td>  0,126008 </td></tr><tr><td>  16k </td><td>  0,050058 </td><td>  0,114278 </td><td>  0,170798 </td></tr></tbody></table><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/6l/_o/im/6l_oimj5-72qy9d6w9tobclq3n4.png"><br><br>  <b>Waktu respons maksimum</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  6.7042 </td><td>  3.7257 </td><td>  0,8568 </td></tr><tr><td>  8rb </td><td>  6.5918 </td><td>  2.2601 </td><td>  0,9004 </td></tr><tr><td>  16k </td><td>  6.3466 </td><td>  2.7741 </td><td>  2.5678 </td></tr></tbody></table><br>  <b>Waktu respons maksimum</b> (md) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/ms/-s/or/ms-sorgvctpuijgx_jf2uomifty.png"><br><br><h3>  Tes 2.3 MDRAID.  RAID 0. Tes bandwidth </h3><br><blockquote>  Penulisan berurutan 1MB - 7820 MBPS. <br>  Baca sekuensial 1MB - 20418 MBPS. <br>  Penulisan berurutan 128Kb - 7622 MBPS. <br>  Baca berurutan 128Kb - 20.380 MBPS. </blockquote><br><h3>  Tes 2.4 MDRAID.  RAID 6. Tes IOPS </h3><br>  Sekarang mari kita lihat apa yang dimiliki sistem ini pada level RAID 6. <br><br>  Opsi Pembuatan Array <br><blockquote>  mdadm --create --verbose --chunk 16K / dev / md0 --level = 6 --raid-devices = 12 / dev / nvme0n1 / dev / nvme1n1 / dev / nvme2n1 / dev / nvme3n1 / dev / nvme4n1 / dev / nvme5n1 / dev / nvme8n1 / dev / nvme9n1 / dev / nvme10n1 / dev / nvme11n1 / dev / nvme6n1 / dev / nvme7n1 </blockquote><br>  Volume total array adalah <b>7450,87</b> GiB. <br><br>  Kami memulai pengujian setelah inisialisasi awal dari array RAID. <br><br>  Hasil Kinerja (IOps) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R5% / W95% </th><th>  R35% / W65% </th><th>  R50% / W50% </th><th>  R65% / W35% </th><th>  R95% / W5% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  39907.6 </td><td>  42849 </td><td>  61609.8 </td><td>  78167.6 </td><td>  108594.6 </td><td>  641950.4 </td><td>  1902561.6 </td></tr><tr><td>  8rb </td><td>  19474.4 </td><td>  20701.6 </td><td>  30316.4 </td><td>  39737.8 </td><td>  57051.6 </td><td>  394072.2 </td><td>  1875791.4 </td></tr><tr><td>  16k </td><td>  10371.4 </td><td>  10979.2 </td><td>  16022 </td><td>  20992.8 </td><td>  29955.6 </td><td>  225157.4 </td><td>  1267495.6 </td></tr><tr><td>  32rb </td><td>  8505.6 </td><td>  8824.8 </td><td>  12896 </td><td>  16657.8 </td><td>  23823 </td><td>  173261.8 </td><td>  596857.8 </td></tr><tr><td>  64rb </td><td>  5679.4 </td><td>  5931 </td><td>  8576.2 </td><td>  11137.2 </td><td>  15906.4 </td><td>  109469.6 </td><td>  320874.6 </td></tr><tr><td>  128rb </td><td>  3976.8 </td><td>  4170.2 </td><td>  5974.2 </td><td>  7716.6 </td><td>  10996 </td><td>  68124.4 </td><td>  160453.2 </td></tr><tr><td>  1 m </td><td>  768.8 </td><td>  811.2 </td><td>  1177.8 </td><td>  1515 </td><td>  2149.6 </td><td>  4880.4 </td><td>  5499 </td></tr></tbody></table><br>  Hasil Kinerja (IOps) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/p7/as/5s/p7as5s0v49uhmbhznnvjrpmfgf0.png"><br><br><h3>  Tes 2.5 MDRAID.  RAID 6. Tes Delay </h3><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  0,193702 </td><td>  0,145565 </td><td>  0,10558 </td></tr><tr><td>  8rb </td><td>  0.266582 </td><td>  0,186618 </td><td>  0,127142 </td></tr><tr><td>  16k </td><td>  0.426294 </td><td>  0,281667 </td><td>  0,169504 </td></tr></tbody></table><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/ls/zv/3f/lszv3flgx0nduvygoxigvjfdfgk.png"><br><br>  <b>Waktu respons maksimum</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  6.1306 </td><td>  4.5416 </td><td>  4.2322 </td></tr><tr><td>  8rb </td><td>  6.2474 </td><td>  4.5197 </td><td>  3.5898 </td></tr><tr><td>  16k </td><td>  5.4074 </td><td>  5.5861 </td><td>  4.1404 </td></tr></tbody></table><br>  <b>Waktu respons maksimum</b> (md) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/fv/id/ri/fvidriesmmcwdstzhrsnmwd-kqa.png"><br><br>  Perlu dicatat bahwa di sini MDRAID menunjukkan tingkat keterlambatan yang sangat baik. <br><br><h3>  Tes 2.6 MDRAID.  RAID 6. Tes Bandwidth </h3><br><blockquote>  Penulisan berurutan 1MB - 890 MBPS. <br>  Baca sekuensial 1MB - 18800 MBPS. <br>  Penulisan berurutan 128Kb - 870 MBPS. <br>  Pembacaan berurutan 128Kb - 10400 MBPS. </blockquote><br><h2>  Tes 3. Zvol lebih dari ZFS RAIDZ2 </h2><br>  ZFS memiliki fungsi pembuatan RAID bawaan dan manajer volume bawaan yang membuat perangkat blok virtual, yang digunakan oleh banyak produsen penyimpanan.  Kami juga akan memanfaatkan fitur-fitur ini dengan membuat kumpulan dengan perlindungan RAIDZ2 (analog dengan RAID 6) dan volume blok virtual di atasnya. <br><br>  Versi 0.79 (ZFS) dikompilasi.  Opsi pembuatan array dan volume: <br><blockquote>  ashift = 12 / kompresi - off / dedup - off / recordsize = 1M / atime = off / cachefile = tidak ada / Jenis RAID = RAIDZ2 </blockquote><br>  ZFS menunjukkan hasil yang sangat baik dengan kumpulan yang baru dibuat.  Namun, dengan dubbing berulang, kinerja berkurang secara signifikan. <br><br>  Pendekatan SNIA baik karena memungkinkan Anda untuk melihat hasil nyata dari pengujian sistem file yang serupa (yang didasarkan pada ZFS) setelah ditimpa berulang pada mereka. <br><br><h3>  Tes 3.1 ZVOL (ZFS).  RAIDZ2.  Tes IOps </h3><br>  Hasil Kinerja (IOps) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R5% / W95% </th><th>  R35% / W65% </th><th>  R50% / W50% </th><th>  R65% / W35% </th><th>  R95% / W5% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  15719.6 </td><td>  15147.2 </td><td>  14190.2 </td><td>  15592.4 </td><td>  17965.6 </td><td>  44832.2 </td><td>  76314.8 </td></tr><tr><td>  8rb </td><td>  15536.2 </td><td>  14929.4 </td><td>  15140.8 </td><td>  16551 </td><td>  17898.8 </td><td>  44553.4 </td><td>  76187.4 </td></tr><tr><td>  16k </td><td>  16696.6 </td><td>  15937.2 </td><td>  15982.6 </td><td>  17350 </td><td>  18546.2 </td><td>  44895.4 </td><td>  75549.4 </td></tr><tr><td>  32rb </td><td>  11859.6 </td><td>  10915 </td><td>  9698.2 </td><td>  10235.4 </td><td>  11265 </td><td>  26741.8 </td><td>  38167.2 </td></tr><tr><td>  64rb </td><td>  7444 </td><td>  6440.2 </td><td>  6313.2 </td><td>  6578.2 </td><td>  7465.6 </td><td>  14145.8 </td><td>  19099 </td></tr><tr><td>  128rb </td><td>  4425.4 </td><td>  3785.6 </td><td>  4059.8 </td><td>  3859.4 </td><td>  4246.4 </td><td>  7143.4 </td><td>  10052.6 </td></tr><tr><td>  1 m </td><td>  772 </td><td>  730.2 </td><td>  779.6 </td><td>  784 </td><td>  824.4 </td><td>  995.8 </td><td>  1514.2 </td></tr></tbody></table><br>  Hasil Kinerja (IOps) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/0j/cf/fr/0jcffrp4gkeayltgnp5us5rg2q8.png"><br><br>  Angka kinerja benar-benar tidak mengesankan.  Pada saat yang sama, zvol murni (sebelum menulis ulang) memberikan hasil yang jauh lebih baik (5-6 kali lebih tinggi).  Di sini, tes menunjukkan bahwa setelah dubbing pertama, kinerja turun. <br><br><h3>  Uji 3.2 ZVOL (ZFS).  RAIDZ2.  Tes Keterlambatan </h3><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  0,332824 </td><td>  0,255225 </td><td>  0,218354 </td></tr><tr><td>  8rb </td><td>  0,3299 </td><td>  0.259013 </td><td>  0,225514 </td></tr><tr><td>  16k </td><td>  0,139738 </td><td>  0,180467 </td><td>  0,233332 </td></tr></tbody></table><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/ys/fj/hb/ysfjhbkrepf-zzj6bvdtx_hhrlm.png"><br><br>  <b>Waktu respons maksimum</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  90,55 </td><td>  69.9718 </td><td>  84.4018 </td></tr><tr><td>  8rb </td><td>  91.6214 </td><td>  86.6109 </td><td>  104.7368 </td></tr><tr><td>  16k </td><td>  108.2192 </td><td>  86.2194 </td><td>  105.658 </td></tr></tbody></table><br>  <b>Waktu respons maksimum</b> (md) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/du/ue/_1/duue_1fwxcx-n4dmyd455pdrc40.png"><br><br><h3>  Uji 3.3 ZVOL (ZFS).  RAIDZ2.  Tes bandwidth </h3><br><blockquote>  Penulisan berurutan 1MB - 1150 MBPS. <br>  Baca sekuensial 1MB - 5500 MBPS. <br>  Penulisan berurutan 128Kb - 1100 MBPS. <br>  Baca berurutan 128Kb - 5300 MBPS. </blockquote><br><h2>  Tes 4: RAIDIX ERA </h2><br>  Sekarang mari kita lihat tes produk baru kami - RAIDIX ERA. <br>  Kami menciptakan RAID6.  Ukuran garis: 16kb.  Setelah inisialisasi selesai, jalankan tes. <br><br>  Hasil Kinerja (IOps) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R5% / W95% </th><th>  R35% / W65% </th><th>  R50% / W50% </th><th>  R65% / W35% </th><th>  R95% / W5% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  354887 </td><td>  363830 </td><td>  486865.6 </td><td>  619349.4 </td><td>  921403.6 </td><td>  2202384.8 </td><td>  4073187.8 </td></tr><tr><td>  8rb </td><td>  180914.8 </td><td>  185371 </td><td>  249927.2 </td><td>  320438.8 </td><td>  520188.4 </td><td>  1413096.4 </td><td>  2510729 </td></tr><tr><td>  16k </td><td>  92115.8 </td><td>  96327.2 </td><td>  130661.2 </td><td>  169247.4 </td><td>  275446.6 </td><td>  763307.4 </td><td>  1278465 </td></tr><tr><td>  32rb </td><td>  59994.2 </td><td>  61765.2 </td><td>  83512.8 </td><td>  116562.2 </td><td>  167028.8 </td><td>  420216.4 </td><td>  640418.8 </td></tr><tr><td>  64rb </td><td>  27660.4 </td><td>  28229.8 </td><td>  38687.6 </td><td>  56603.8 </td><td>  76976 </td><td>  214958.8 </td><td>  299137.8 </td></tr><tr><td>  128rb </td><td>  14475.8 </td><td>  14730 </td><td>  20674.2 </td><td>  30358.8 </td><td>  40259 </td><td>  109258.2 </td><td>  160141.8 </td></tr><tr><td>  1 m </td><td>  2892.8 </td><td>  3031.8 </td><td>  4032.8 </td><td>  6331.6 </td><td>  7514.8 </td><td>  15871 </td><td>  19078 </td></tr></tbody></table><br>  Hasil Kinerja (IOps) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/px/on/md/pxonmd9exhzvhwqse0wugnzkc9o.png"><br><br><h3>  Uji 4.2 RAIDIX ERA.  RAID 6. Tes Delay </h3><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  0,16334 </td><td>  0,136397 </td><td>  0,10958 </td></tr><tr><td>  8rb </td><td>  0,207056 </td><td>  0,163325 </td><td>  0,132586 </td></tr><tr><td>  16k </td><td>  0,313774 </td><td>  0,225767 </td><td>  0.182928 </td></tr></tbody></table><br>  <b>Rata-rata waktu respons</b> (ms) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/hv/ad/xq/hvadxqbbwsigpbfi2d40nhsfevo.png"><br><br>  <b>Waktu respons maksimum</b> (ms) dalam bentuk tabel.  Baca / Tulis Campuran%. <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R65% / W35% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  5.371 </td><td>  3.4244 </td><td>  3.5438 </td></tr><tr><td>  8rb </td><td>  5.243 </td><td>  3.7415 </td><td>  3.5414 </td></tr><tr><td>  16k </td><td>  7.628 </td><td>  4.2891 </td><td>  4.0562 </td></tr></tbody></table><br>  <b>Waktu respons maksimum</b> (md) dalam bentuk grafis.  Baca / Tulis Campuran%. <br><br><img src="https://habrastorage.org/webt/pk/ys/bb/pkysbbysl2ldmme0fcbptzjh0ug.png"><br><br>  Penundaan mirip dengan apa yang dihasilkan MDRAID.  Tetapi untuk kesimpulan yang lebih akurat, perkiraan penundaan di bawah beban yang lebih serius harus dilakukan. <br><br><h3>  Tes 4.3 RAIDIX ERA.  RAID 6. Tes Bandwidth </h3><br><blockquote>  Penulisan berurutan 1MB - 8160 MBPS. <br>  Baca sekuensial 1MB - 19700 MBPS. <br>  Penulisan berurutan 128Kb - 6200 MBPS. <br>  Pembacaan berurutan 128Kb - 19700 MBPS. </blockquote><br><h2>  Kesimpulan </h2><br>  Sebagai hasil dari pengujian, perlu membandingkan angka yang diperoleh dari solusi perangkat lunak dengan apa yang disediakan oleh platform perangkat keras kepada kita. <br><br>  Untuk menganalisis kinerja beban acak, kami akan membandingkan kecepatan RAID 6 (RAIDZ2) saat bekerja dengan blok dalam 4k. <br><table><tbody><tr><th></th><th>  MD RAID 6 </th><th>  RAIDZ2 </th><th>  RAIDIX ERA RAID 6 </th><th>  Perangkat keras </th></tr><tr><td>  4k R100% / W0% </td><td>  1902561 </td><td>  76314 </td><td>  4073187 </td><td>  4.494.142 </td></tr><tr><td>  4k R65% / W35% </td><td>  108594 </td><td>  17965 </td><td>  921403 </td><td>  1823432 </td></tr><tr><td>  4k R0% / W100% </td><td>  39907 </td><td>  15719 </td><td>  354887 </td><td>  958054 </td></tr></tbody></table><br><img src="https://habrastorage.org/webt/cm/4g/ff/cm4gffjnga2flpdn0nl3yxiwew0.png"><br><br>  Untuk menganalisis kinerja beban serial, kita akan melihat RAID 6 (RAIDZ2) dengan blok 128k.  Di antara utas, kami menggunakan shift 10GB untuk menghilangkan hit cache dan menunjukkan kinerja nyata. <br><table><tbody><tr><th></th><th>  MD RAID 6 </th><th>  RAIDZ2 </th><th>  RAIDIX ERA RAID 6 </th><th>  Perangkat keras </th></tr><tr><td>  128k seq baca </td><td>  10400 </td><td>  5300 </td><td>  19700 </td><td>  20.400 </td></tr><tr><td>  128k seq tulis </td><td>  870 </td><td>  1100 </td><td>  6200 </td><td>  7500 </td></tr></tbody></table><br><img src="https://habrastorage.org/webt/6l/dw/wt/6ldwwti-7dql_njqadpemrz1mxi.png"><br><br><h3>  Apa hasilnya? </h3><br>  Rangkaian RAID perangkat lunak yang populer dan terjangkau untuk bekerja dengan perangkat NVMe tidak dapat menunjukkan kinerja yang melekat pada potensi perangkat keras. <br><br>  Di sini ada kebutuhan yang sangat jelas untuk perangkat lunak kontrol yang dapat mengacaukan situasi dan menunjukkan bahwa simbiosis pengendalian program dengan drive NVMe bisa sangat produktif dan fleksibel. <br><br>  Memahami permintaan ini, perusahaan kami menciptakan produk RAIDIX ERA, pengembangan yang berfokus pada penyelesaian masalah berikut: <br><br><ul><li>  Performa baca dan tulis yang tinggi (beberapa juta IOps) pada array dengan Parity dalam mode campuran. </li><li>  Kinerja streaming dari 30GBps termasuk selama failover dan pemulihan. </li><li>  Dukungan untuk level RAID 5, 6, 7.3. </li><li>  Inisialisasi latar belakang dan rekonstruksi. </li><li>  Pengaturan fleksibel untuk berbagai jenis beban (sisi pengguna). </li></ul><br>  Hari ini, kita dapat mengatakan bahwa tugas-tugas ini telah selesai dan produk siap digunakan. <br><br>  Pada saat yang sama, memahami kepentingan banyak pihak yang berkepentingan dalam teknologi tersebut, kami siap untuk rilis tidak hanya berbayar, tetapi juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lisensi gratis</a> , yang dapat sepenuhnya digunakan untuk menyelesaikan masalah pada drive NVMe dan SSD. <br><br>  Baca lebih lanjut tentang RAIDIX ERA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di situs web kami</a> . <br><br><h2>  UPD  Mengurangi pengujian ZFS dengan recordsize dan volblocksize 8k </h2><br>  Tabel Pilihan ZFS <br><table><tbody><tr><th>  NAME </th><th>  PROPERTI </th><th>  NILAI </th><th>  SUMBER </th></tr><tr><td>  tangki </td><td>  merekam ukuran </td><td>  8 rb </td><td>  lokal </td></tr><tr><td>  tangki </td><td>  kompresi </td><td>  off </td><td>  standar </td></tr><tr><td>  tangki </td><td>  dedup </td><td>  off </td><td>  standar </td></tr><tr><td>  tangki </td><td>  checksum </td><td>  off </td><td>  lokal </td></tr><tr><td>  tangki </td><td>  volblocksize </td><td>  - </td><td>  - </td></tr><tr><td>  tank / raid </td><td>  merekam ukuran </td><td>  - </td><td>  - </td></tr><tr><td>  tank / raid </td><td>  kompresi </td><td>  off </td><td>  lokal </td></tr><tr><td>  tank / raid </td><td>  dedup </td><td>  off </td><td>  standar </td></tr><tr><td>  tank / raid </td><td>  checksum </td><td>  off </td><td>  lokal </td></tr><tr><td>  tank / raid </td><td>  volblocksize </td><td>  8rb </td><td>  standar </td></tr></tbody></table><br>  Rekaman menjadi lebih buruk, pembacaannya lebih baik. <br>  Tetapi semua sama, semua hasilnya secara signifikan lebih buruk daripada solusi lain <br><table><tbody><tr><th>  Ukuran blok </th><th>  R0% / W100% </th><th>  R5% / W95% </th><th>  R35% / W65% </th><th>  R50% / W50% </th><th>  R65% / W35% </th><th>  R95% / W5% </th><th>  R100% / W0% </th></tr><tr><td>  4k </td><td>  13703.8 </td><td>  14399.8 </td><td>  20903.8 </td><td>  25669 </td><td>  31610 </td><td>  66955.2 </td><td>  140849.8 </td></tr><tr><td>  8rb </td><td>  15126 </td><td>  16227.2 </td><td>  22393.6 </td><td>  27720.2 </td><td>  34274.8 </td><td>  67008 </td><td>  139480.8 </td></tr><tr><td>  16k </td><td>  11111.2 </td><td>  11412.4 </td><td>  16980.8 </td><td>  20812.8 </td><td>  24680.2 </td><td>  48803.6 </td><td>  83710.4 </td></tr></tbody></table></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id420837/">https://habr.com/ru/post/id420837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id420825/index.html">Hari ini akan menjadi pertandingan pertama antara OpenAI dan profesional Dota 2 (orang menang). Kami memahami cara kerja bot</a></li>
<li><a href="../id420827/index.html">Buat proyek pakar sederhana menggunakan Java EE + WildFly10 + JPA (Hibernate) + Postgresql + EJB + IntelliJ IDEA</a></li>
<li><a href="../id420829/index.html">Sistem pekerjaan. Tinjauan dari sisi lain</a></li>
<li><a href="../id420831/index.html">Perangkat untuk penerbitan cookie "Cook 3000"</a></li>
<li><a href="../id420833/index.html">Kesalahan monetisasi aplikasi utama [dan cara memperbaikinya]</a></li>
<li><a href="../id420841/index.html">Perbaikan terbaru pra-rumah sakit atau "Hei Sombong! Di mana kesalahan saya? "</a></li>
<li><a href="../id420843/index.html">7 September, Yekaterinburg - pertemuan untuk pengembang .NET</a></li>
<li><a href="../id420845/index.html">Penjinakan keras kepala dengan menggunakan kruk: lubang adaptor Wi-Fi WF2190 (Realtek8812AU Wireless LAN 802.11ac USB)</a></li>
<li><a href="../id420847/index.html">Pengantar Pemrograman Shader untuk Tata Letak</a></li>
<li><a href="../id420853/index.html">Memenuhi Windows Pseudo Console (ConPTY)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>