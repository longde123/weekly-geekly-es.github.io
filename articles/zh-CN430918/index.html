<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚷 #⃣ 🐪 简而言之，关于Flutter：基础知识 🎴 ⛷️ 🤓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在收到Yura Luchaninov的报告后，我决定亲自尝试Flutter。 为了伸展大脑，厨房里的男人有些不寒而栗。 事情已经过去了。 我开始看，然后看，然后写。 一切似乎都可以解决，应用程序已启动，它们所解释的内容是可以理解的，一切都很简单。 但并非没有“但是”-并非所有人都解释。 而且由于平台...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>简而言之，关于Flutter：基础知识</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430918/"><p><img src="https://habrastorage.org/getpro/habr/post_images/06a/005/a97/06a005a97b10f6904756d0f76b2b5312.jpg" alt="简而言之，，关于Flutter：基础知识"></p><br><p>在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">收到Yura Luchaninov</a>的报告后，我决定<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">亲自</a>尝试Flutter。 为了伸展大脑，厨房里的男人有些不寒而栗。 事情已经过去了。 我开始看，然后看，然后写。 一切似乎都可以解决，应用程序已启动，它们所解释的内容是可以理解的，一切都很简单。 但并非没有“但是”-并非所有人都解释。 而且由于平台，YP，方法甚至主题领域对我来说都是新的，所以这种烦恼是因为您“不开始”，甚至都不知道要搜索什么：Dart / Flutter / Window / Screen / Route / Widget？ </p><br><p> 当然，我不想重读Dart，Flutter及其小部件的所有文档，因为我没有太多时间，我只是想仔细看一下Flutter。 如果有一个简短的指南来描述您需要的所有内容，那将是非常不错的选择，但仅此而已，不再需要更多的内容，以便在Flutter上理解和编写不太复杂的应用程序！ </p><a name="habracut"></a><br><h2 id="pro-gayd"> 关于指南 </h2><br><p> 关于该主题的大多数文章都写得很好，并不复杂。 问题在于，其中大多数都需要被认为是基础知识的知识，但是，在其他描述基础知识的文章中并未提及这些知识。 在本系列文章中，我想纠正这种情况。 让我们从头开始，在不引起任何上述注意的情况下，我们将启动一个或几个应用程序。 在此过程中，我们将学习如何使用所有<strong>主要组件</strong> ，如何创建<strong>唯一的界面</strong> ，如何使用<strong>本机模块</strong> ，以及<strong>为两个平台</strong>组装<strong>应用程序</strong> 。 </p><br><p> 我将从网络开发人员的角度进行撰写。 你们中的大多数人最有可能熟悉Web堆栈，并且与熟悉的平台进行类比比对房屋，动物，狗，Foo，Bar等进行类比更好。 </p><br><p> 我将简要概述一下，以免延误。 对于最好奇的事情，我将在所讨论的主题上留下有用的链接。 </p><br><h2 id="pro-platformu"> 关于平台 </h2><br><p>  Flutter是一个年轻但非常有前途的平台，已经吸引了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">启动其应用程序</a>的大公司的关注。 这个平台的有趣之处在于它的简单性可与Web应用程序的开发相提并论，并且其工作速度与本机应用程序相当。 多种技术可实现较高的应用程序性能和开发速度： </p><br><ul><li> 与当今许多著名的移动平台不同，Flutter <strong>不使用</strong>任何形式的<strong>JavaScript</strong> 。 作为Flutter的编程语言，他们选择了Dart，它将Dart编译成二进制代码，从而达到了与Objective-C，Swift，Java或Kotlin相当的操作速度。 </li><li> 同样，Flutter <strong>不使用</strong>任何形式的<strong>本机组件</strong> ，因此您不必编写任何与它们进行通信的层。 相反，就像游戏引擎（并且您知道游戏具有非常动态的UI）一样，它自己绘制整个界面。 按钮，文本，媒体元素，背景-所有这些都在Flutter本身的图形引擎中绘制。 经过以上讨论，值得注意的是Flutter上的“ Hello World”应用程序占用的空间很小：iOS≈2.5Mb和Android≈4Mb。 </li><li>  Flutter <strong>使用一种</strong>基于ReactJS Web框架<strong>的声明方法</strong> ，该框架基于小部件（在网络世界中称为组件）构建UI。 为了更大程度地提高界面速度，仅在<strong>需要</strong>更改<strong>窗口小部件</strong>时才<strong>重绘窗口小部件</strong> （就像Virtual DOM在Web前端世界中一样）。 </li><li> 除此之外，该框架<strong>还具有内置的</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><strong>Hot-reload</strong></a> ，它对Web非常熟悉，但在本机平台上仍然不可用。 </li></ul><br><p> 关于这些因素的实际好处，我强烈建议阅读<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Android开发人员</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章，该文章</a>将其应用程序从Java重写为Dart，并分享了他的印象。 在这里，我只是取出由他命名的文件/代码行的数目（用Java编写）之前-179/12176，然后（用Dart重写）之后-31/1735。 在文档中，您可以找到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有关平台技术功能的</a>详细说明。 如果您有兴趣查看其他<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可运行应用程序的示例</a> ，那么这里是另一个链接。 </p><br><h2 id="pro-dart"> 关于达特 </h2><br><p>  Dart是一种编程语言，我们必须用它编写Flutter的应用程序。 这非常简单，如果您有Java或JavaScript的经验，您将很快学习它。 </p><br><p> 我试图写一篇有关Dart的评论文章，试图仅描述学习Flutter的最低要求。 但是这种语言有很多细微差别，尽管多次尝试撰写这样的文章，但我仍然无法使它完整而又简短。 另一方面，《 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">飞镖语言之旅》</a>的作者在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这方面</a>做得很好。 </p><br><h2 id="pro-podgotovku"> 关于培训 </h2><br><p> 与Dart一样，该主题在官方指南中也有很好的描述。 我只能在这里复制它，但我不会这样做。 </p><br><p> 无需等待，我们转到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">安装指南</a>页面，选择平台，然后按照以下步骤在系统上安装平台。 在我们的编辑器中，我们<strong>将</strong>连接插件。 在同一指南中，有设置<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VS Code</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IntelliJ的说明</a> 。 还为您的编辑器提供了Dart和Flutter插件（通常需要安装两个插件）。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们启动该应用程序并检查其性能</a> 。 </p><br><p> 给OSX用户的提示。 我为iOS模拟器中手机的画框所占用的空间感到抱歉，因此我关闭了它们并切换到iPhone 8（它不太“长”）： </p><br><ul><li><code>Hardware → Device → iOS # → iPhone 8</code> </li> <li> <code>Window → Show Device Bezels</code> </li> </ul><br><p> 您可以不使用按钮，因为这里有热键： <code>Shift + Cmd + H</code>这是家， <code>Cmd + Right</code> -这是将手机翻转过来的功能，其余的都可以在“ <code>Hardware</code>菜单中找到。 但我建议您打开屏幕键盘，因为了解在定期有一半屏幕被键盘挡住的情况下是否可以使用该应用程序很重要： <code>Cmd + K</code> （当焦点位于某个输入字段时有效）。 </p><br><p>  <strong>带框架的iPhone 8和iPhone X</strong> <br><img src="https://habrastorage.org/getpro/habr/post_images/b8b/549/778/b8b5497782c023fa976cb7d3fda5a1f7.png" alt="带框架的iPhone 8和iPhone X"></p><br><p>  <strong>iPhone 8和iPhone X无边界</strong> <br><img src="https://habrastorage.org/getpro/habr/post_images/f3e/568/115/f3e568115a43742fd4371e765fa0a872.png" alt="iPhone 8和iPhone X无边界"></p><br><h2 id="pro-strukturu"> 关于结构 </h2><br><p> 我们将进入包含生成的应用程序的文件夹，并查看其中的内容。 不是所有的东西，而是正确的东西： </p><br><ul><li>  <code>lib/</code> -根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">pub</a> （Dart的包管理器）的原则，所有代码都位于此子文件夹中； </li><li>  <code>pubspec.yml</code>这是编写应用程序依赖项的位置，您需要安装该依赖项才能运行它，就像<code>package.json</code>一样，但有一点细微差别，您不需要通过上述标准Dart实用程序而是通过Flutter命令来安装它们： <code>flutter pub get &lt;package_name&gt;</code> ; </li><li>  <code>test/</code> --您知道那里是什么吗？ 您可以通过调用<code>flutter test</code>来运行它们； </li><li>  <code>ios/</code> ＆ <code>android/</code> -包含每个平台设置的文件夹，它指示运行该应用程序需要哪些权限（访问位置，蓝牙），图标以及该平台特定的所有内容。 </li></ul><br><p> 我们确定了结构，转到<code>main.dart</code>文件正在等待我们的<code>lib/</code>文件夹。 您可以猜测，这是我们必须在其中运行应用程序的文件。 它通过调用<code>main()</code>函数像在C语言（甚至其他许多语言）中一样开始。 </p><br><h2 id="pro-vidzhety-hello-world-zdes"> 关于小部件（此处为Hello World） </h2><br><p> 在Flutter中，一切都建立在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Widget</a>的基础上： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Widget中</a>有视图，带有主题的样式和状态。 窗口小部件有两种主要类型：有状态和无状态，但目前还没有。 让我们轻松一点。 </p><br><p> 从<strong>main.dart中</strong>删除所有<strong>内容</strong> 。 粘贴以下代码，仔细阅读注释： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     //  Dart      main() main() =&gt; runApp( //   runApp  Flutter Text( //  ,   ,   &lt;span&gt; 'Hello, World!!!', //   —     textDirection: TextDirection.ltr, //       ), );</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>runApp(…)</code></a>接受一个参数-一个小部件，它将成为整个项目的根。 顺便说一句，热重载无法将其拾取，因此您将需要重新启动应用程序。 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Text(…)</code></a> -Flutter不能仅在屏幕上显示字符串。 要显示文本，必须指定<code>Text</code> 。  <code>textDirection</code> 。 而且这不是像<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>text-align</code></a>那样的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>text-align</code></a> ，与网络相比，它是Direction的类似物。  API的一部分，用于使应用程序国际化。 在知道方向之前， <code>Text</code>行不通的，但是您不必在任何地方都指定文本-接下来，我们将分析如何为整个应用程序调整文本的方向。 </p><br><p> 已经启动了该应用程序？  “你好，世界！” 出来！ 好像是...是吗？ 但是显然出了点问题。 </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/555/246/37b/55524637b38b1f0dab4459d41f3745e8.jpg" alt="正在运行的应用程序的屏幕截图"></p><br><p> 该文本被系统信息阻止。 我们拥有所有可用的屏幕空间，并且从一开始就带出了小部件，其中显示了系统信息。 让我们尝试将文本移动到某个地方。 </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Center( <span class="hljs-comment"><span class="hljs-comment">// ,      child: Text( 'Hello, World!', textDirection: TextDirection.ltr, ), ), );</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Center(…)</code></a>是一个小部件，可让您将在<code>child</code>参数中传递的另一个小部件水平和垂直放置在中心。 在Flutter应用程序中，您经常会看到<code>child</code>和<code>children</code> ，因为几乎所有小部件都使用这些名称来传达必须在调用的小部件内绘制的小部件。 </p><br><p> 在Flutter中使用小部件合成来呈现UI，更改外观甚至传输数据。 例如，“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Directionality(…)</code></a>小部件<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Directionality(…)</code></a>设置所有子小部件的文本方向： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Center( child: Text(<span class="hljs-string"><span class="hljs-string">'Hello, World!'</span></span>), ), ), );</code> </pre> <br><p> 让我们看一下另一个非常重要的小部件，同时变换我们应用程序的外观： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Container( <span class="hljs-comment"><span class="hljs-comment">//  ! &lt;div&gt;   Flutter' //   Container  color    color: Color(0xFF444444), child: Center( child: Text( 'Hello, World!', style: TextStyle( //     ,    color: Color(0xFFFD620A), //     fontSize: 32.0, //    ), ), ), ), ), );</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/6fc/469/a20/6fc469a2081ca8faadf086069cc0af2e.png" alt="HelloWorld应用程序屏幕截图"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Color(…)</code></a> -颜色。 该文档说明了设置它的不同方法，但是主要的事情只是将数字传递给类构造函数。 在上面的示例中，我们向构造函数传递了一个以十六进制形式编写的数字，该数字与十六进制非常相似，只是在开始时我们又添加了两个字符来指示颜色的透明程度，其中0x00绝对透明，而0xFF根本不透明。 </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>TextStyle(…)</code></a> -一个更加有趣的小部件，使用它可以设置颜色，大小，粗细，行距，添加下划线等。 </p><br><p>  Flutter应用程序编写完成！ 在扩展坞中，您可以了解如何为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Android</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">iOS</a>组装它，并且在同一位置有链接可以让您知道如何将其发送到所需的商店。 对于谁来说这还不够，下面我对Flutter进行了更多的介绍，也许更多... </p><br><h2 id="pro-stateless-vidzhety"> 专业无状态小部件 </h2><br><p> 如何使用小部件-我们已经弄清楚了，现在让我们弄清楚如何创建它们。 上面已经提到过，有些小部件具有状态，而没有状态。 到目前为止，我们仅使用了无状态小部件。 这并不意味着它们根本没有它，因为小部件只是类，并且它们的属性可以更改。 渲染小部件之后，更改其状态不会导致在UI中更新此小部件。 例如，如果我们需要更改屏幕上的文本，则需要生成另一个“ <code>Text</code>小部件并指定要显示的新内容。 如果您知道我的意思，那么此类小部件可以称为常量。 而且它们很简单，所以让我们从它们开始。 </p><br><p> 要创建无状态小部件，您需要： </p><br><ol><li> 为新班级起一个漂亮的名字； </li><li> 从<code>StatelessWidget</code>继承一个类； </li><li> 实现一个以<code>BuildContext</code>作为参数并返回某种<code>Widget</code>的<code>build()</code>方法。 </li></ol><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Center( child: MyStatelessWidget() ), ), ); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyStatelessWidget</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  @override   ,    , //         //  ,       @override Widget build(BuildContext context) { // [context]    return Text('Hello!'); } }</span></span></code> </pre> <br><p> 具有一个参数的示例窗口小部件： </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// … class MyStatelessWidget extends StatelessWidget { //   Stateless      final,   const final String name; //   MyStatelessWidget(this.name); //   @override Widget build(BuildContext context) { // [context]     return Text('Hello, $name!'); } }</span></span></code> </pre> <br><p> 关于无状态，没有什么可添加的... </p><br><h2 id="pro-hot-reload"> 关于热装 </h2><br><p> 请注意，更改小部件的内容时，该应用程序将自动重绘。 从<code>main()</code>函数中删除小部件后，热重装开始为我们提供帮助。 </p><br><p> 同样重要的是要了解，由于启动了用于热插拔的模块，该应用程序的运行速度降低了一个数量级。 </p><br><h2 id="pro-gesturedetector"> 关于GestureDetector </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/152/d3e/0c4/152d3e0c44a587d15ed95df50dad563b.gif" alt="GestureDetector小部件的使用"></p><br><p> 在下一节中，我们将处理<code>StatefulWidget</code> （ <code>StatefulWidget</code>改变时会更改的小部件）。 为了使它有趣，我们需要以某种方式更改此状态，同意吗？ 我们将响应屏幕上的触摸来更改小部件的状态。 为此，我们将使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>GestureDetector(…)</code></a> -一个小工具，它不会绘制任何内容，但会监视智能手机屏幕上的触摸并报告有关该智能手机屏幕的信息，从而调用已传递给它的功能。 </p><br><p> 在屏幕中央创建一个按钮，单击该按钮将在控制台中显示一条消息： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp( Directionality( textDirection: TextDirection.ltr, child: Container( color: Color(<span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span>), child: App(), ), ), ); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Center( child: GestureDetector( <span class="hljs-comment"><span class="hljs-comment">//     onTap: () { //    GestureDetector //    ,      print('You pressed me'); }, child: Container( //     decoration: BoxDecoration( //   shape: BoxShape.circle, //     color: Color(0xFF17A2B8), //      ), width: 80.0, height: 80.0, ), ), ); } }</span></span></code> </pre> <br><p> 单击蓝色按钮，然后在控制台中看到消息。 我们一次又一次地单击，我们在控制台中看到该消息。 再次...好吧，别再坚持了。 </p><br><h2 id="pro-stateful-vidzhety"> 有状态的小部件 </h2><br><p>  <code>StatefulWidget</code>简单，甚至比<code>StatelessWidget</code>更简单。 但是有一个细微差别：它们本身并不存在，为了进行工作，我们需要另一个类来存储此小部件的状态。 同时，它的可视部分（包括它的小部件）也变为其状态。 </p><br><p> 首先，请查看小部件类： </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// … class Counter extends StatefulWidget { //      ,     , //   createState() @override State&lt;Counter&gt; createState() =&gt; _CounterState(); //        State, //   State&lt;&gt; }</span></span></code> </pre> <br><p> 上面，我们创建了一个“空”小部件，该小部件实现了一个非常简单的<code>createState()</code>方法。 表示和状态的这种分离使Flutter可以极大地优化应用程序。 </p><br><p> 状态对象是完全简单的。 而且，它几乎与上面我们写的<code>StatelessWidget</code>相同。 它的主要区别是父类。 </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// … class _CounterState extends State&lt;Counter&gt; { //    -    , //      . //   ,     int counter = 0; //     ,       //   ,      Stateless . @override Widget build(BuildContext context) { //          , //     —  : return Center( child: GestureDetector( onTap: () { //  ,   ,    //  counter. setState(() { // setState()   ,    //      ,    ++counter; }); }, child: Container( decoration: BoxDecoration( shape: BoxShape.circle, color: Color(0xFF17A2B8), ), width: 80.0, child: Center( child: Text( //    counter '$counter', //      style: TextStyle(fontSize: 30.0), ), ), ), ), ); } }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/316/aa3/591/316aa3591cfc2b44a9080c60649e418b.gif" alt="跑步计数器应用"></p><br><p> 请注意，类名以下划线开头。 在Dart中，所有以下划线开头的名称都标识私有值。 而且Flutter中的小部件状态通常是私有的，尽管这不是必需的。 </p><br><p> 我们做了多么出色的应用程序！ 这是一个很好的结果。 但是在完成本部分课程之前，让我们看几个更有趣的小部件。 仅这次，我们将编写更多代码，只是为了使其更加有趣。 大多数应用程序应该是您熟悉的，其余的您应该已经学会了： </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'package:flutter/widgets.dart'</span></span>; main() =&gt; runApp(App()); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Directionality( textDirection: TextDirection.ltr, child: Container( padding: EdgeInsets.symmetric( vertical: <span class="hljs-number"><span class="hljs-number">60.0</span></span>, horizontal: <span class="hljs-number"><span class="hljs-number">20.0</span></span>, ), color: Color(<span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span>), child: Content(), ), ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Content</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatelessWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Column( children: [ Counter(<span class="hljs-string"><span class="hljs-string">'Manchester United'</span></span>), Counter(<span class="hljs-string"><span class="hljs-string">'Juventus'</span></span>), ], ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatefulWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String _name; Counter(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._name); <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">State&lt;Counter&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>=&gt; _CounterState(); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_CounterState</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-meta"><span class="hljs-meta">@override</span></span> <span class="hljs-function"><span class="hljs-function">Widget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BuildContext context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Container( margin: EdgeInsets.only(bottom: <span class="hljs-number"><span class="hljs-number">10.0</span></span>), padding: EdgeInsets.all(<span class="hljs-number"><span class="hljs-number">4.0</span></span>), decoration: BoxDecoration( border: Border.all(color: Color(<span class="hljs-number"><span class="hljs-number">0xFFFD6A02</span></span>)), borderRadius: BorderRadius.circular(<span class="hljs-number"><span class="hljs-number">4.0</span></span>), ), child: Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [ <span class="hljs-comment"><span class="hljs-comment">// widget —    State,    //      ,      _CounterLabel(widget._name), _CounterButton( count, onPressed: () { setState(() { ++count; }); }, ), ], ), ); } } class _CounterLabel extends StatelessWidget { static const textStyle = TextStyle( color: Color(0xFF000000), fontSize: 26.0, ); final String _label; _CounterLabel(this._label); @override Widget build(BuildContext context) { return Text( _label, style: _CounterLabel.textStyle, ); } } class _CounterButton extends StatelessWidget { final _count; final _onPressed; _CounterButton(this._count, {@required this._onPressed}); @override Widget build(BuildContext context) { return GestureDetector( onTap: () { _onPressed(); }, child: Container( padding: EdgeInsets.symmetric(horizontal: 6.0), decoration: BoxDecoration( color: Color(0xFFFD6A02), borderRadius: BorderRadius.circular(4.0), ), child: Center( child: Text( '$_count', style: TextStyle(fontSize: 20.0), ), ), ), ); } }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/c2f/93e/d18/c2f93ed188071906ab840b9fcc70f0cd.png" alt="Flutter上的另一个反申请"></p><br><p> 我们有两个新的小部件： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Column()</code></a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Row()</code></a> 。 尝试弄清楚他们在做什么。 在下一篇文章中，我们将更详细地讨论它们，并研究多个控件，使您可以将其他控件组合在一起，并使用Flutter库（称为Material）创建一个不错的应用程序。 </p><br><h2 id="pro-domashnee-zadanie"> 关于作业 </h2><br><p> 如果您想在闲暇时阅读其他内容，下面列出了一些有趣的链接： </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://flutter.io/docs/get-started/flutter-for/web-devs</a> </li><li> 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VS Code</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">InteliJ中的</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">代码</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有关小部件的更多信息</a> </li><li> 您还应该阅读有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">热重装的信息，</a>以了解何时代码可能无法重新启动。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN430918/">https://habr.com/ru/post/zh-CN430918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN430908/index.html">功率转换器控制模块：开发和组装</a></li>
<li><a href="../zh-CN430910/index.html">富布赖特奖学金：如何以及为什么？</a></li>
<li><a href="../zh-CN430912/index.html">我们给骗子带来干净的水：面试不是雇佣关系。 自然地</a></li>
<li><a href="../zh-CN430914/index.html">黑市价格分析的个人数据和突破</a></li>
<li><a href="../zh-CN430916/index.html">二氧化碳检测仪MT8057S。 由非仿真者参与的非审查</a></li>
<li><a href="../zh-CN430922/index.html">配电盘的计算示例</a></li>
<li><a href="../zh-CN430924/index.html">Ada程式设计</a></li>
<li><a href="../zh-CN430926/index.html">时间是零散的； 关于分布式系统的相似性和弱内存模型</a></li>
<li><a href="../zh-CN430928/index.html">关于“智能家居”：如何制作“智能”背光</a></li>
<li><a href="../zh-CN430930/index.html">关于简单的3D图形</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>