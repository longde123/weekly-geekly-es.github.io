<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôèüèæ ü•â ü•ï Formule de Tupper et impl√©mentation de l'algorithme en Python ü§òüèΩ üè£ üëî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au lieu de l'avant-propos 
 Il n'y a pas si longtemps, sur Internet, j'ai d√©couvert une copie aussi merveilleuse et √©tonnante de la biblioth√®que babyl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Formule de Tupper et impl√©mentation de l'algorithme en Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416177/"><h2>  Au lieu de l'avant-propos </h2><br>  Il n'y a pas si longtemps, sur Internet, j'ai d√©couvert une copie aussi merveilleuse et √©tonnante de la biblioth√®que babylonienne que <b>la formule Tapper</b> .  C'est plut√¥t l'in√©galit√© de Tupper que la formule.  La particularit√© de cette in√©galit√© est qu'elle cr√©e sa propre image sur la carte.  Regardez ce miracle! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/131/e4e/254/131e4e2547e2419c0164be0a0c9d0c44.png" alt="image"><br><a name="habracut"></a><br>  (Source Wikipedia) <br><br>  Ce que vous voyez dans l'image est la formule de ce m√™me Jeff Tupper.  Probablement, la moiti√© des lecteurs sont d√©j√† all√©s au tungst√®ne pour tirer le r√©sultat de cette in√©galit√© ... Mais ce n'est pas si simple.  Comme vous pouvez le voir sur cette image, la formule sur le graphique peut √™tre vue sur un segment le long de l'axe OY [k;  k + 15].  Quel est ce myst√©rieux nombre k?  O√π l'obtenir?  Le fait est que cette in√©galit√©, selon le concept de la biblioth√®que babylonienne, peut afficher absolument n'importe quelle image avec une r√©solution de 106x17!  Chaque image a sa propre position sur le graphique, a ainsi un num√©ro unique k.  Ainsi, <b>pour chaque nombre k il y a une seule image sur tout le graphe</b> ! <br><br>  Pour une image donn√©e, le nombre k est le suivant: <br><br><pre><code class="python hljs"><span class="hljs-number"><span class="hljs-number">4858450636189713423582095962494202044581400587983244549483093085061934704708809928450644769865524364849997247024915119110411605739177407856919754326571855442057210445735883681829823754139634338225199452191651284348332905131193199953502413758765239264874613394906870130562295813219481113685339535565290850023875092856892694555974281546386510730049106723058933586052544096664351265349363643957125565695936815184334857605266940161251266951421550539554519153785457525756590740540157929001765967965480064427829131488548259914721248506352686630476300</span></span></code></pre><br>  <i>Il est int√©ressant de regarder les personnes qui d√©fileront jusqu'√† une telle coordonn√©e pour voir la formule</i> <br><br>  Il m'est venu √† l'esprit d'√©crire un programme en Python3 qui convertirait une image en un nombre k et vice versa et vous parlerait d'un autre excellent moyen de coder une image en un nombre. <br><br><h2>  Th√©orie </h2><br><h3>  (Ajout√©) Comment √ßa marche? </h3><br>  Jetons un coup d'≈ìil √† la formule elle-m√™me: <br><img src="https://habrastorage.org/getpro/habr/post_images/717/e11/36b/717e1136bccb218d8da9a15660774953.png" alt="image"><br>  D√©finissons sa syntaxe: <br><img src="https://habrastorage.org/getpro/habr/post_images/9d2/cf5/800/9d2cf58009049fa88318f4600411a877.png" alt="image">  - nombre arrondi <br>  mod (x, y) - reste de la division de x par y <br><br>  Et puis, semble-t-il, tout est clair. <br>  Notez que x et y sont arrondis.  C'est cet arrondi qui nous donne finalement une image pixel <br><img src="https://habrastorage.org/getpro/habr/post_images/ca6/cc2/b26/ca6cc2b260fea02ab935b441e5ec23b7.png" alt="image"><br><br>  Indique tout ce qui est arrondi √† droite de l'in√©galit√© par <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mtext" id="MJXp-Span-2">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7">a</span></span></span><script type="math/tex" id="MathJax-Element-1"> \ alpha </script>  . <br>  Alors <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-8"><span class="MJXp-mn" id="MJXp-Span-9">1</span><span class="MJXp-mrow" id="MJXp-Span-10"><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-12">2</span><span class="MJXp-mo" id="MJXp-Span-13" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mo" id="MJXp-Span-14" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mtext" id="MJXp-Span-15">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">a</span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-22" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;=&gt;</span><span class="MJXp-mn" id="MJXp-Span-23">1</span><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;=</span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mtext" id="MJXp-Span-26">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">a</span><span class="MJXp-mo" id="MJXp-Span-32" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex;mode=display" id="MathJax-Element-2"> 1/2 <[\ alpha] <=> 1 <= [\ alpha] </script></p><br><br>  Ce qui est √©vident, car toute l'expression est arrondie. <br><br>  Soit y = 17r + q, o√π r est la partie enti√®re de la division de y par 17, et r est le reste de la division.  Ainsi, nous pouvons remplacer dans la formule <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-33"><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">a</span><span class="MJXp-mrow" id="MJXp-Span-36"><span class="MJXp-mo" id="MJXp-Span-37" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-38">17</span><span class="MJXp-mo" id="MJXp-Span-39" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-3"> [a / 17] </script>  sur r, et <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-40"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">d</span><span class="MJXp-mo" id="MJXp-Span-44" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">y</span><span class="MJXp-mo" id="MJXp-Span-46" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-47">17</span><span class="MJXp-mo" id="MJXp-Span-48" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-4"> mod (y, 17) </script>  le q. <br><br>  Nous obtenons <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-49"><span class="MJXp-mn" id="MJXp-Span-50">1</span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">d</span><span class="MJXp-mo" id="MJXp-Span-55" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">q</span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-msubsup" id="MJXp-Span-58"><span class="MJXp-mn" id="MJXp-Span-59" style="margin-right: 0.05em;">2</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-60" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-61">‚àí</span><span class="MJXp-mn" id="MJXp-Span-62">17</span><span class="MJXp-mo" id="MJXp-Span-63">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">r</span></span></span><span class="MJXp-mo" id="MJXp-Span-65" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-66">2</span><span class="MJXp-mo" id="MJXp-Span-67" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex;mode=display" id="MathJax-Element-5"> 1 <= mod (q * 2 ^ {- 17-r}, 2) </script></p><br>  Ou bien <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-68"><span class="MJXp-mn" id="MJXp-Span-69">1</span><span class="MJXp-mo" id="MJXp-Span-70" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">d</span><span class="MJXp-mo" id="MJXp-Span-74" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">q</span><span class="MJXp-mrow" id="MJXp-Span-76"><span class="MJXp-mo" id="MJXp-Span-77" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-msubsup" id="MJXp-Span-78"><span class="MJXp-mn" id="MJXp-Span-79" style="margin-right: 0.05em;">2</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-80" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-81">17</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">x</span><span class="MJXp-mo" id="MJXp-Span-83">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">r</span></span></span><span class="MJXp-mo" id="MJXp-Span-85" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-86">2</span><span class="MJXp-mo" id="MJXp-Span-87" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex;mode=display" id="MathJax-Element-6"> 1 <= mod (q / 2 ^ {17x + r}, 2) </script></p><br><br>  mod ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-88"><span class="MJXp-mtext" id="MJXp-Span-89">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">a</span></span></span><script type="math/tex" id="MathJax-Element-7"> \ alpha </script>  , 2) prend 2 valeurs - 0 ou 1. Par cons√©quent, cette in√©galit√© dira si le nombre <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-95"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">q</span><span class="MJXp-mrow" id="MJXp-Span-97"><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-msubsup" id="MJXp-Span-99"><span class="MJXp-mn" id="MJXp-Span-100" style="margin-right: 0.05em;">2</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-101" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-102">17</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">x</span><span class="MJXp-mo" id="MJXp-Span-104">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">r</span></span></span></span></span><script type="math/tex" id="MathJax-Element-8"> q / 2 ^ {17x + r} </script>  m√™me ou pas. <br><br>  Notez que l'image est visualis√©e dans l'intervalle [N, N + 16], respectivement <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">q</span><span class="MJXp-mo" id="MJXp-Span-108" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-109" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">a</span><span class="MJXp-mrow" id="MJXp-Span-111"><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-113">17</span><span class="MJXp-mo" id="MJXp-Span-114" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-9"> q = [a / 17] </script>  reste constant sur toute la hauteur de l'image, ce qui ne peut pas √™tre dit du nombre r (sur toute l'image il varie de 0 √† 16). <br><br>  Et maintenant la cerise sur le g√¢teau.  Num√©ro <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-115"><span class="MJXp-mo" id="MJXp-Span-116" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">q</span><span class="MJXp-mrow" id="MJXp-Span-118"><span class="MJXp-mo" id="MJXp-Span-119" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-120"><span class="MJXp-msubsup" id="MJXp-Span-121"><span class="MJXp-mn" id="MJXp-Span-122" style="margin-right: 0.05em;">2</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-123" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-124">17</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">x</span><span class="MJXp-mo" id="MJXp-Span-126">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">r</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-128" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-10"> [q / {2 ^ {17x + r}}] </script>  sera impair si et seulement si le nombre de bits (17x + r) dans la repr√©sentation binaire de q est √©gal √† 1. Et comme le nombre q change constamment avec sa hauteur et sa repr√©sentation binaire aussi, on obtient une image unique √† chaque fois!  C'est exactement ce que la formule de Tapper fonctionne. <br><br>  Voyons maintenant comment calculer la hauteur √† laquelle nous voulons voir notre image <br><br><h3>  Le principe du calcul du nombre k </h3><br>  Tupper lui-m√™me a d√©crit le calcul du nombre k pour toute image 106x17 (c'est important!) Comme suit: <br><br><ol><li>  Convertir l'image en noir et blanc </li><li>  Lisez chaque pixel de bas en haut, de gauche √† droite et mettez-le dans le tampon.  Si le pixel est noir - mettez 1, si blanc - 0. </li><li>  Convertissez le binaire en d√©cimal et multipliez par 17 </li><li>  Profit! </li></ol><br>  Pour obtenir une image √† partir du nombre k, nous faisons tout exactement le contraire.  Eh bien, allons coder! <br><br><h2>  Kodim </h2><br>  <b>UPD: Dans les commentaires, les gens ont un peu am√©lior√© le code, l'ont rendu plus simple et plus transparent.</b>  <b>Cet article a publi√© des donn√©es de mise √† jour.</b>  <b>Si vous voulez voir les anciennes versions du code - allez dans le d√©p√¥t github (jusqu'√† ce que vous le validiez, lien √† la fin de l'article) et dans le commentaire</b> <br><br><h3>  De k √† l'image </h3><br><h4>  UPD </h4><br>  A la demande des commentateurs, <b>une nouvelle m√©thode a √©t√© ajout√©e pour calculer l'image en utilisant cette in√©galit√© et k!</b>  Maintenant, nous ne ferons pas de manipulations avec le nombre, transf√©rons au syst√®me binaire, mais affectons directement la fonction elle-m√™me! <br><br><h4>  Utilisation de la m√©thode tapper pour d√©coder le nombre k </h4><br><br>  Nous obtenons le nombre k de l'utilisateur, les <s>yeux ferm√©s, nous le</s> divisons par 17 et le traduisons dans le syst√®me binaire. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">from_k_to_bin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(k: int)</span></span></span><span class="hljs-function"> -&gt; list:</span></span> k //= <span class="hljs-number"><span class="hljs-number">17</span></span> binary = bin(k)[<span class="hljs-number"><span class="hljs-number">2</span></span>:]</code> </pre> <br>  Nous comprenons que certains pixels initiaux peuvent √™tre blancs (√©gaux √† 0), respectivement, pour notre nombre binaire, les premiers bits seront des z√©ros et lors de la traduction d'un nombre en syst√®me d√©cimal, ces z√©ros initiaux seront perdus.  Par cons√©quent, nous v√©rifions la taille du nombre binaire r√©sultant, s'il est inf√©rieur √† 1802, puis ajoutons des z√©ros au d√©but. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">from_k_to_bin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(k: int)</span></span></span><span class="hljs-function"> -&gt; list:</span></span> k //= <span class="hljs-number"><span class="hljs-number">17</span></span> binary = bin(k)[<span class="hljs-number"><span class="hljs-number">2</span></span>:] <span class="hljs-comment"><span class="hljs-comment">#   RadicalDreamer binary = ("0" * (1802 - len(binary))) + binary</span></span></code> </pre><br>  Ensuite, d√©clarez une liste bidimensionnelle dans laquelle nous stockons des informations sur chaque ligne de l'image.  Ensuite, nous notons tous ces bits que nous lisons (n'oubliez pas l'algorithme par lequel le nombre k est cr√©√© - de bas en haut, de gauche √† droite) <br><br><pre> <code class="python hljs">lists = [[] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">17</span></span>)] <span class="hljs-comment"><span class="hljs-comment">#C   RadicalDreamer for x in range(1802): lists[-(x % 17)].append(binary[x]) &lt;b&gt; !&lt;/b&gt; &lt;source lang="python"&gt; #-----!-----# image = Image.new("1", (106,17), (0)) # -  10617 draw = image.load() for y in range(17): for x in range(106): image.putpixel(xy=(105-x,16-y), value=(int(lists[y][x]),)) #    ,      lists image.save("image.png") # </span></span></code> </pre> <br>  Essayons de pousser le nombre k, que j'ai indiqu√© au d√©but de l'article, dans notre programme et obtenons ce qui suit: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e41/5e0/485/e415e0485d702897f612da18770b6698.png" alt="image"><br><br>  Comme vous pouvez le voir, tout a fonctionn√© pour nous, et maintenant nous pouvons d√©coder n'importe quel k! <br><br><h4>  Utiliser l'in√©galit√© pour g√©n√©rer une image √† partir de k </h4><br><br>  Tout d'abord, √©crivez la fonction en python: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x,y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((y//<span class="hljs-number"><span class="hljs-number">17</span></span>)//(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (<span class="hljs-number"><span class="hljs-number">17</span></span>*x+(y%<span class="hljs-number"><span class="hljs-number">17</span></span>))))%<span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br>  Gr√¢ce aux op√©rateurs // et &lt;&lt;, l'impl√©mentation de la fonction a √©t√© grandement simplifi√©e.  Il est garanti que les nombres x et y seront des <u>entiers</u> ! <br><br>  Nous cr√©ons √† nouveau une liste √† deux dimensions, o√π nous allons stocker les bits de l'image et √©crire des informations sur chaque ligne en utilisant des boucles <br><br><pre> <code class="python hljs">lists = [[] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">17</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> y <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">105</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>): lists[y].append(int(f(x,y+k) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>))</code> </pre> <br><br>  Et puis, comme dans l'exemple pr√©c√©dent, nous dessinons une image √† l'aide de la biblioth√®que PIL. <br><br>  La fonction compl√®te ressemble √† ceci: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">from_k_to_bin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(k: int)</span></span></span><span class="hljs-function"> -&gt; list:</span></span> lists = [[] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">17</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> y <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">105</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>): lists[y].append(int(f(x,y+k) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lists</code> </pre> <br><br><h3>  Image en k </h3><br>  Eh bien, nous allons maintenant apprendre √† coder n'importe quelle image dans le nombre k. <br><br>  Nous obtenons d'abord l'image elle-m√™me <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> -&gt; Image:</span></span> name = input(<span class="hljs-string"><span class="hljs-string">"   (      ):"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: im = Image.open(name) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception: print(<span class="hljs-string"><span class="hljs-string">"!"</span></span>) exit(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> im</code> </pre> <br>  V√©rifiez sa taille <br><br><pre> <code class="python hljs">_SIZE_WIDTH = <span class="hljs-number"><span class="hljs-number">106</span></span> _SIZE_HEIGHT = <span class="hljs-number"><span class="hljs-number">17</span></span> image = get_image() width, height = image.size flag_okay = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> width == _SIZE_WIDTH <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> height == _SIZE_HEIGHT: flag_okay = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> flag_okay: print(<span class="hljs-string"><span class="hljs-string">"  "</span></span>) print(width, height) exit(<span class="hljs-number"><span class="hljs-number">0</span></span>) print(<span class="hljs-string"><span class="hljs-string">" !"</span></span>)</code> </pre> <br>  Nous faisons l'image en noir et blanc et commen√ßons √† lire pixel par pixel: <br><br><pre> <code class="python hljs">image = image.convert(<span class="hljs-string"><span class="hljs-string">'1'</span></span>) byteset = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">105</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> y <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">17</span></span>): <span class="hljs-comment"><span class="hljs-comment">#c m03r   if image.getpixel((x,y)) &gt; 127: byteset += '1' else: byteset += '0'</span></span></code> </pre><br>  Il ne reste plus qu'√† convertir au syst√®me d√©cimal et √† multiplier par 17. <br><br><pre> <code class="python hljs">k = int(byteset,<span class="hljs-number"><span class="hljs-number">2</span></span>)*<span class="hljs-number"><span class="hljs-number">17</span></span> print(<span class="hljs-string"><span class="hljs-string">" :"</span></span>) print(k)</code> </pre> <br>  Eh bien, allons tester! <br><br>  J'ai d√©cid√© de coder le logo habr.  Voici l'image source: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79a/6b5/976/79a6b597637d0be221d738b4bcd280d9.png" alt="image"><br><br>  Nous d√©marrons le programme et sp√©cifions le nom de l'image: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f96/8e9/21b/f968e921b0b94bc50b0010397beb14b5.png" alt="image"><br><br>  Nous avons obtenu le k suivant: <br><br><pre><code class="python hljs"><span class="hljs-number"><span class="hljs-number">4858487703217654168507377107565676789145697178497253677539145555247620343537955749299116772611982962556356527603203744742682135448820545638134012705381689785851604674225344958377377969928942310236199337805399065932982909660659786056259547094494380793146587709009524498386724160055692719747815828234655968636671461350354316223620304956111171025410498514602810746287134775641383930152393933036921599511277388743068766568352667661462097979110006690900253037600818522726237351439443865433159187625289316917268254866954663750093103703327097252478959</span></span></code></pre><br>  Voyons cela sur notre propre programme. <br><br>  Voici l'image que nous avons re√ßue: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42b/f42/0fa/42bf420fa8af35ecec3e3944f590920f.png" alt="image"><br><br>  Il √©tait un peu d√©form√© en raison d'une traduction l√©g√®rement tordue de l'image en noir et blanc. <br><br><h2>  R√©sum√© </h2><br>  Code source: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> <br><br>  Sources: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article Wiki</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416177/">https://habr.com/ru/post/fr416177/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416163/index.html">Apprenez OpenGL. Le√ßon 5.6 - Mappage de parallaxe</a></li>
<li><a href="../fr416167/index.html">Peter Norwig: apprendre la programmation en ... 10 ans</a></li>
<li><a href="../fr416169/index.html">Conteneurs pour adultes (partie 01): un guide pratique de la terminologie</a></li>
<li><a href="../fr416171/index.html">Tests d'interface utilisateur cod√©s Visual Studio: th√©orie et pratique de l'application dans notre entreprise</a></li>
<li><a href="../fr416175/index.html">R√©sultats du concours des jeunes d√©veloppeurs d'applications AR Epson Moverio BT-300</a></li>
<li><a href="../fr416179/index.html">Une porte qui nous accueille par son nom et ne s'ouvre qu'aux employ√©s du d√©partement</a></li>
<li><a href="../fr416181/index.html">Modulation d'amplitude sur les doigts</a></li>
<li><a href="../fr416183/index.html">Test des donn√©es: exigences et niveaux</a></li>
<li><a href="../fr416187/index.html">Suite √† la rencontre ¬´Nouvelles fonctionnalit√©s de PostgreSQL 11¬ª (Partie 2)</a></li>
<li><a href="../fr416189/index.html">Le traitement de Scrum "m√©canique". Partie 3. Travail SM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>