<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โณ๏ธ ๐ด ๐ฌ ูุญุฏุงุช ููุฑุงู ูุงูููุฒู ุงูุฐูู (ุงูุฌุฒุก 2). ุงุฑุฏูููู ู AMS ๐ณ ๐ธ๐พ ๐ช</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐู ูู ุงูููุงูุฉ ุงูุซุงููุฉ ูู ุณูุณูุฉ ุญูู ุฏูุฌ ูุญุฏุงุช ููุฑุงู KernelChip ูู ุฃูุธูุฉ ุงูุชุดุบูู ุงูุขูู ููููุฒู ุ ูุณูุฑูุฒ ูู ูุฐุง ุงูุฌุฒุก ุนูู ุฏูุฌ ูุฐู ุงููุญุฏุงุช ูุน ุงููุธุงู ุงูุจูุฆ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุญุฏุงุช ููุฑุงู ูุงูููุฒู ุงูุฐูู (ุงูุฌุฒุก 2). ุงุฑุฏูููู ู AMS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/387205/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ูู ุงูููุงูุฉ ุงูุซุงููุฉ ูู ุณูุณูุฉ ุญูู ุฏูุฌ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุงุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฑุงู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">KernelChip</font></a><font style="vertical-align: inherit;"> ูู ุฃูุธูุฉ ุงูุชุดุบูู ุงูุขูู ููููุฒู ุ ูุณูุฑูุฒ ูู ูุฐุง ุงูุฌุฒุก ุนูู ุฏูุฌ ูุฐู ุงููุญุฏุงุช ูุน ุงููุธุงู ุงูุจูุฆู Arduino. </font><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุฃูู ูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุณูุณูุฉ ุ ุชุญุฏุซูุง ุนู ุงูุชูุงูู ูุน ูุธุงู ุงูุชุดุบูู ุงูุขูู ููููุฒู ุงูุฑุงุฆุฏ MajorDoMo ุ ููู ุงูุฌุฒุก ุงูุซุงูุซ ุณูู ุชุชุนูู ููููุฉ ุฅุฏุงุฑุฉ ูุฐู ุงููุญุฏุงุช ุงูููุทูุฉ ูู ุงูุฑุณููุงุช ุงูุชุฎุทูุทูุฉ ูู ูุบุฉ ุจุฑูุฌุฉ ุงููุนุงูุฌุฉ ุ ูุจุงุดุฑุฉ ูู ุณุทุญ ููุชุจ ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/279/7d1/bf2/2797d1bf243f51c2e44c4bbf9b4282d3.jpg" alt="ุตูุฑุฉ"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฑุฏูููู ูู ูู ุดูุก ูุฏููุง</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ุจุฏูู ุงุฑุฏููููุ </font><font style="vertical-align: inherit;">ูู ุฃุตู ูุฒุงูุง ูุฐู ุงูููุตุฉ ููุชุฑุฉ ุทูููุฉ ุ ูุดุนุจูุชูุง ุชุชุญุฏุซ ุนู ููุณูุง ุ ูุฐูู ุฏุนููุง ููุชูู ุนูู ุงูููุฑ ุฅูู ุงูุชูุงุตูู ุงูุชูููุฉ ููุชูุงุนู ุจูู ูุญุฏุงุช Arduino ู Laurent. </font><font style="vertical-align: inherit;">ูุนูู ุทูู ุงูุทุฑูู ุ ูู ููุณู ูุธุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุจุงุนุชุจุงุฑู ูุดุชููุง ูุซูุฑูุง ููุงูุชูุงู ููุบุงูุฉ ููุธุงู Arduino ุงูุจูุฆู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฏูุฏ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุญูู ูู ุงููุญุฏุงุช ุนุจุฑ ุงูุดุจูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุชุนุชุจุฑ ููุญุฉ Arduino Uno ุงูุดุงุฆุนุฉ ุฃู ููุญุฉ Arduino Mega ุงูุดุงุฆุนุฉ ุจููุณ ุงููุฏุฑ ูุงููุชูุงููุฉ ุจุจุทุงูุฉ ูุงุฌูุฉ ุดุจูุฉ Ethernet Shield ุงููุฌูุนุฉ ุนูู ุฃุณุงุณ ุดุฑูุญุฉ W5100 ููุงุณุจุฉ. </font><font style="vertical-align: inherit;">ุชู ุฅุนุทุงุก ุฌููุน ุงูุฃูุซูุฉ ูู ูุฐู ุงูููุงูุฉ ููุซู ูุฐุง ุงููุฒูุฌ ูุชู ุงุฎุชุจุงุฑูุง ุนููููุง. </font><font style="vertical-align: inherit;">ูู ุดูุก ูุนูู ุจุดูู ููุซูู ูุจุฏูู ุฃู ูุดุงูู. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/086/9f1/1a8/0869f11a82455209389c7e6c37437f0b.jpg" alt="ุตูุฑุฉ"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ethernet Shield ุงุณุชูุงุฏูุง ุฅูู ุดุฑูุญุฉ W5100</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุจูุนูู ุฃูู ุนููู ููุท ุฃุฎุฐ ุงูุฑุณู ูุชุญูููู ุนูู ููุญุฉ Uno ุฃู Mega ุ ุจุนุฏ ุชุบููุฑู ููููุงู ูููุงูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุงุฑุฉ ูุญุฏุงุช ุงูุฑุณู ุงูุชุฎุทูุทู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฌุฒุก ุงูุฃูู ูู ุงูุณูุณูุฉ ุ ุชุญุฏุซุช ุจุงููุนู ุนู ูุจุงุฏุฆ ุฅุฏุงุฑุฉ ูุญุฏุงุช ููุฑุงู ุนุจุฑ ุงูุดุจูุฉ ุ ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูู ููุฑุฃูุง ุงูุฌุฒุก ุงูุฃูู ุ ุณุฃูุฑุฑ ุจุงุฎุชุตุงุฑ ุงููุธุฑูุฉ ููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุจุงุฏู ุงููุนูููุงุช ูุน ุงููุญุฏุงุช ุนุจุฑ ุงูุดุจูุฉ ููุจุฏุก ุงูุนูู ูุนูุง ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ุงุชุตุงู TCP / IP ุนูู ุงููููุฐ 2424. </font><font style="vertical-align: inherit;">ุจูุฌุฑุฏ ุฅูุดุงุก ุงูุงุชุตุงู ุ ููููู ุฅุฑุณุงู ุฃูุงูุฑ ูุตูุฉ (ุชุณูู ุฃูุงูุฑ KE) ุชุชุญูู ูู ุงููุญุฏุฉ ุงูููุทูุฉ. </font><font style="vertical-align: inherit;">ูุญุชูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุน KernelChip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ูุซุงุฆู ุชูุตูููุฉ ุ ุจูุง ูู ุฐูู ูุตู ูููู ุงููุตูู ุฅููู ูุฃูุงูุฑ KE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนููุง ูุญุงูู ุชุฑุฌูุฉ ูุฐู "ุงูุดุฑูุท ุงููุฑุฌุนูุฉ" ุงููุธุฑูุฉ ุฅูู ุงููุบุฉ ุงูุจุณูุทุฉ ููุฎุทุทุงุช ุงุฑุฏูููู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุณู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุดุฑุญ ููุง ููููุฉ ุชุซุจูุช ูุชูููู ุจูุฆุฉ ุจุฑูุฌุฉ Arduino ุ ูู ุงูููุชุฑุถ ุฃูู ููุช ุจุฐูู ุจุงููุนู ูุฃูู ูุงุฏุฑ ุนูู ูุชุงุจุฉ ุฑุณููุงุช ุจุณูุทุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุ ุจุงููุณุจุฉ ูููุจุชุฏุฆูู ุ ูุญุชุงุฌ ุฅูู ุชูุตูู ุงูููุชุจุงุช ุงูุถุฑูุฑูุฉ SPI.h ู Ethernet.h ููุชุญูู ูู ุงููุงูู ููุญุฏุฉ Ethernet ููุณูุง.</font></font><br>
<br>
<pre><code class="java hljs">#include &lt;SPI.h&gt;<font></font>
#include &lt;Ethernet.h&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ุชุญุชุงุฌ ุฅูู ุชุนููู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ููุญุฏุฉ Ethernet ููุญุฏุฉ Laurent ุ ูุงูุชู ุณูุฏูุฑูุง. </font><font style="vertical-align: inherit;">ูุงุญุธ ุฃู ุนูุงููู MAC ูุนูุงููู IP ูุฌุจ ุฃู ุชููู ูุฑูุฏุฉ ุ ููุฌุจ ุชุนููู LAURENT_PORT ุนูู 2424 ูููุณ ุฃู ุนููุงู ุขุฎุฑ.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> SELF_MAC[] = {<span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-number"><span class="hljs-number">0x2A</span></span>, <span class="hljs-number"><span class="hljs-number">0xF5</span></span>, <span class="hljs-number"><span class="hljs-number">0x12</span></span>, <span class="hljs-number"><span class="hljs-number">0x67</span></span>, <span class="hljs-number"><span class="hljs-number">0xEE</span></span>};
<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> SELF_IP[] = {<span class="hljs-number"><span class="hljs-number">192</span></span>, <span class="hljs-number"><span class="hljs-number">168</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>};<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> LAURENT_IP[] = {<span class="hljs-number"><span class="hljs-number">192</span></span>, <span class="hljs-number"><span class="hljs-number">168</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">19</span></span>};
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LAURENT_PORT = <span class="hljs-number"><span class="hljs-number">2424</span></span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ูุฎุฒู ูุคูุช ูุชุฎุฒูู ุฃูุงูุฑ ุงูุดุจูุฉ ุ ููุชู ุชุญุฏูุฏู ุจุญุฌู 200 ุจุงูุช ูุน ุจุนุถ ุงููุงูุด ุ ุฅุฐุง ูุงูุช ูุฏูู ูุดุงูู ูุน ููุต ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุ ูููููู ุชููููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู 100 ุจุงูุช ุฃู ุญุชู ุฃูู.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buf[<span class="hljs-number"><span class="hljs-number">200</span></span>];
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูููุณุฉ ุงูุฃุฎูุฑุฉ ูู ุนููู Ethernet ููุญุฏุฉ Laurent. </font><font style="vertical-align: inherit;">ุงูุขู ุณูููู ุจุชูููุฐ ุฌููุน ุงูุนูููุงุช ุจุงุณุชุฎุฏุงู ุงููุญุฏุฉ ุจุงุณุชุฎุฏุงู ูุงุฆู lclient.</font></font><br>
<br>
<pre><code class="java hljs">EthernetClient lclient;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุดูุก ุ ุฏุนูุง ุงูุขู ูููู ูุธุฑุฉ ุนูู ูุธููุฉ ุชุฑุณู ุงูุฃูุงูุฑ ุฅูู ูุญุฏุฉ Laurent.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendLaurentRequest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lclient.connect(LAURENT_IP, LAURENT_PORT)) { <font></font>
    Serial.print(<span class="hljs-string"><span class="hljs-string">"Command: "</span></span>);<font></font>
    Serial.println(buf);<font></font>
    lclient.println(buf);<font></font>
    delay(<span class="hljs-number"><span class="hljs-number">100</span></span>);<font></font>
  <font></font>
    Serial.print(<span class="hljs-string"><span class="hljs-string">"Answer:  "</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(lclient.available() != <span class="hljs-number"><span class="hljs-number">0</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c = lclient.read();<font></font>
      Serial.print(c);<font></font>
    }<font></font>
    delay(<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
    lclient.stop();<font></font>
  } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
      Serial.println(<span class="hljs-string"><span class="hljs-string">"Error sending command"</span></span>);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุชู ุฅูุดุงุก ุงุชุตุงู ูุน ูุญุฏุฉ Laurent ุนูู ุงููููุฐ 2424 ุ ูุณูุชู ุฅุฑุณุงู ูุญุชููุงุช ุงููุฎุฒู ุงููุคูุช ุฅูู ุงููุญุฏุฉ ุงูููุทูุฉ ูุชูุฑุงุฑูุง ูู Serial ูููุญุต ุงูุจุตุฑู. </font><font style="vertical-align: inherit;">ุซู ูุชููุน 100 ูููู ุซุงููุฉ ููุชู ุชููู ุงุณุชุฌุงุจุฉ ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุชููู ูุคูุชูุง ูุฑุฉ ุฃุฎุฑู ูุชู ูุทุน ุงูุงุชุตุงู ุจุงููุญุฏุฉ ุงูููุทูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชุนุฐุฑ ุฅูุดุงุก ุงูุงุชุตุงู ุจุงููุญุฏุฉ ุงูููุทูุฉ ูุณุจุจ ูุง ุ ูุชู ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนููุง ูุญูู ุงูุชููุฆุฉ. </font><font style="vertical-align: inherit;">ุชููุฆุฉ ุฅูุซุฑูุช ูู ูุธููุฉ ุจุณูุทุฉ</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ethernetInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  Ethernet.begin(SELF_MAC, SELF_IP);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุชู ุชููุฆุฉ ูุญุฏุฉ Laurent ุจูุงุณุทุฉ ูุธููุฉ laurentInit () ุ ุงูุชู ุณูุญูููุง ุจุงูุชูุตูู ุงูุขู. ุฅููุง ูุจูุฑุฉ ุฌุฏูุง ูุชุญุชุงุฌ ุฅูู ููููุง ุฌูุฏูุง ูุฃูู ุนูู ุฃุณุงุณ ุฑูุฒ ูุฐู ุงููุธููุฉ ููููู ุจูุงุก ุทูุจุงุชู ุงูุฎุงุตุฉ ููุญุฏุงุช Laurent.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">laurentInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  Serial.println(<span class="hljs-string"><span class="hljs-string">"Start modul Laurent Init..."</span></span>);<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">"Connect to Laurent... "</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lclient.connect(LAURENT_IP, LAURENT_PORT)) {<font></font>
    Serial.println(<span class="hljs-string"><span class="hljs-string">"OK"</span></span>);<font></font>
    lclient.stop();<font></font>
    <font></font>
    <span class="hljs-comment"><span class="hljs-comment">// Send test command</span></span>
    Serial.println(<span class="hljs-string"><span class="hljs-string">"Selftest..."</span></span>);<font></font>
    sprintf(buf, <span class="hljs-string"><span class="hljs-string">"$KE"</span></span>);<font></font>
    sendLaurentRequest();<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// Send password (default: "Laurent")</span></span>
    Serial.println(<span class="hljs-string"><span class="hljs-string">"Set password..."</span></span>);<font></font>
    sprintf(buf, <span class="hljs-string"><span class="hljs-string">"$KE,PSW,SET,Laurent"</span></span>);   <font></font>
    sendLaurentRequest();<font></font>
  } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
      Serial.println(<span class="hljs-string"><span class="hljs-string">"failed"</span></span>);<font></font>
    }<font></font>
  delay(<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
    <font></font>
  <span class="hljs-comment"><span class="hljs-comment">//   DATA</span></span>
  sprintf(buf, <span class="hljs-string"><span class="hljs-string">"$KE,DAT,OFF"</span></span>);<font></font>
  sendLaurentRequest();<font></font>
  delay(<span class="hljs-number"><span class="hljs-number">100</span></span>);<font></font>
  <font></font>
  <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
  sprintf(buf, <span class="hljs-string"><span class="hljs-string">"$KE,REL,2,0"</span></span>);<font></font>
  sendLaurentRequest();<font></font>
  <font></font>
  Serial.println(<span class="hljs-string"><span class="hljs-string">"Modul Laurent Init done"</span></span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฆููุง ุ ูุชู ุนุฑุถ ุฑุณุงูุฉ ุงูุชููุฆุฉ ูุชุชู ูุญุงููุฉ ุงูุงุชุตุงู ุจูุญุฏุฉ Laurent. ุฅุฐุง ูุดู ุฐูู ุ ูุชู ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ุ ูุฅุฐุง ูุฌุญ ุงูุงุชุตุงู ุจุงููุญุฏุฉ ุงูููุทูุฉ ุ ูุชู ุฅุฑุณุงู ุฃูุฑ ุงูุชุดุฎูุต ุงูุฐุงุชู ุ ูุงูุฐู ูุฌุจ ุฃู ุชุณุชุฌูุจ ูู ุงููุญุฏุฉ ุงูุณูููุฉ ุจู "# ููุงูู". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุชู ุฅุฑุณุงู ุฃูุฑ ูุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ (ูู ูุฐู ุงูุญุงูุฉ ุ ูุฐู ูู ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ). ููู ุงููุชููุน 500 ูููู ุซุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุชู ุฅุฏุฎุงู ุฃูุฑูู ุฅุถุงูููู - ุฃุญุฏููุง ูููู ุฅุฎุฑุงุฌ ุงูุจูุงูุงุช ุจูุงุณุทุฉ ุงููุญุฏุฉ (ุฅุฐุง ุฐูุจุช) ุ ููููู ุงูุซุงูู ุงูุชุชุงุจุน ุฑูู 2 ุ ุงูุฐู ูุณุชุฎุฏูู ูู ุชุฌุงุฑุจูุง. ุจูุนูู ุขุฎุฑ ุ ูุฐู ุงูุฃูุงูุฑ ุชุฌูุจ ุงููุญุฏุฉ ุฅูู ุจุนุถ ุงูุญุงูุฉ ุงูุฃูููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ูุณุฎุฉ ูุทุจูุนุฉ ูู ุนูููุฉ ุงูุชููุฆุฉ ุงูุชู ุชุธูุฑ ูููุง ุฌููุน ุงูุฃูุงูุฑ ูุฌููุน ุงุณุชุฌุงุจุงุช ุงููุญุฏุฉ:</font></font><br>
<br>
<pre><code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">Start</span></span> modul Laurent Init...<font></font>
Connect to Laurent... OK<font></font>
Selftest...<font></font>
<span class="hljs-function"><span class="hljs-function">Command: $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">KE</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Answer</span></span></span><span class="hljs-function">:  #</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OK</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Set</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">password</span></span></span><span class="hljs-function">...
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Command</span></span></span><span class="hljs-function">: $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">KE</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PSW</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SET</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Laurent</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Answer</span></span></span><span class="hljs-function">:  #</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PSW</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SET</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OK</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Command</span></span></span><span class="hljs-function">: $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">KE</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DAT</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OFF</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Answer</span></span></span><span class="hljs-function">:  #</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DAT</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OK</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Command</span></span></span><span class="hljs-function">: $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">KE</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">REL</span></span></span><span class="hljs-function">,2,0
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Answer</span></span></span><span class="hljs-function">:  #</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">REL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OK</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Modul</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Laurent</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">done</span></span></span><span class="hljs-function">
</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฑูุฒ ูุธููุฉ ุงูุฅุนุฏุงุฏ ุงูููุงุณู (). </font><font style="vertical-align: inherit;">ุชุชู ุชููุฆุฉ ุฌููุน ุงูุฃูุธูุฉ ุงููุฑุนูุฉ ุ ุจูุง ูู ุฐูู ูููุฐ ุชุณูุณูู ุจูุนุฏู ุจุงูุฏ ููุงุณู 9600.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{  <font></font>
  Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);  <font></font>
  ethernetInit();<font></font>
  laurentInit();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูููุง ุจุชููุฆุฉ ุงููุญุฏุฉ ุงูููุทูุฉ ููููููุง ุฅุฏุงุฑุชูุง ุจุงูุทุฑููุฉ ุงูุชู ูุญุชุงุฌูุง: ุฅุฑุณุงู ุงูุฃูุงูุฑ ุ ููุฑุงุกุฉ ุงูุฅุฌุงุจุงุช ุ ูุจูุงุก ููุทู ุงูุชุญูู ูุน ูุฑุงุนุงุฉ ุงูุจูุงูุงุช ุงูุตุงุฏุฑุฉ ุนู ูุญุฏุฉ Laurent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุถุน ูู ุงุนุชุจุงุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฃุจุณุท ูููุฉ - ูุชุดุบูู ูุฅุทูุงุก ุงูุถูุก ุนูู ูุชุฑุงุช ููุชุธูุฉ ุนูู ุถูุก ูุตุจุงุญ ูุชุตู ุจุงููุฑุญูุฉ ุงูุซุงููุฉ ูู ูุญุฏุฉ Laurent.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
  sprintf(buf, <span class="hljs-string"><span class="hljs-string">"$KE,REL,2,1"</span></span>);<font></font>
  sendLaurentRequest();<font></font>
  delay(<span class="hljs-number"><span class="hljs-number">3000</span></span>);
  <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
  sprintf(buf, <span class="hljs-string"><span class="hljs-string">"$KE,REL,2,0"</span></span>);<font></font>
  sendLaurentRequest();<font></font>
  delay(<span class="hljs-number"><span class="hljs-number">3000</span></span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธููุฉ ุงูุญููุฉ () ูู ุญููุฉ ูุง ููุงุฆูุฉ ูุณูุถูุก ุงููุตุจุงุญ ุ ุงูุฐู ูุทูุน ุฃูุงูุฑูุง ุ ุจุงุณุชูุฑุงุฑ ููุฎุฑุฌ ูู 3 ุซูุงูู. </font><font style="vertical-align: inherit;">ูุฐุง ุ ุจุงูุทุจุน ุ ูุฌุฑุฏ ูุซุงู ุ ูู ุงููุงูุน ุ ูููู ุฃู ูููู ููุทู ุงูุนูู ุฃู ููู ุดูุก ูุนุชูุฏ ุนูู ุงุญุชูุงุฌุงุชู. </font><font style="vertical-align: inherit;">ูุจุงูุทุจุน ุ ูุง ููููู ุฅุฑุณุงู ุฃูุงูุฑ ููุท ูุชูููู ุฃู ุชุนุทูู ุงูุฃุญูุงู ุ ูููู ุฃูุถูุง ุฃู ุฃูุงูุฑ ุฃุฎุฑู ุชุฏุนููุง ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ููููู ุงูุนุซูุฑ ุนูู ูุงุฆูุฉ ูุงููุฉ ุจุงูุฃูุงูุฑ ููุตููุง ูู ูุซุงุฆู ูุญุฏุงุช Laurent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุฃุฎุฐ ูุฐุง ุงูุฑุณู ูุฏูุฌู ูู ูุดุงุฑูุนู ุงูุฎุงุตุฉ ุ ููุง ูุถูู ุฏุนููุง ูุฅุฏุงุฑุฉ ูุญุฏุงุช Laurent. </font><font style="vertical-align: inherit;">ุฃู ุงูุนูุณ ุ ุฎุฐ ูุฐุง ุงูุฑุณู ูุฃุณุงุณ ููู ุจุฒูุงุฏุฉ ูุธุงุฆูู ุชุฏุฑูุฌููุง. </font><font style="vertical-align: inherit;">ููุณ ููุงู ุญุฏ ููููุงู. </font><font style="vertical-align: inherit;">ููุง ุงูุฑุณู ุงููุงูู.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุฑุณู ูุงูู</font></font></b><div class="spoiler_text">#include &lt;SPI.h&gt;<br>
#include &lt;Ethernet.h&gt;<br>
<br>
byte SELF_MAC[] = {0x00, 0x2A, 0xF5, 0x12, 0x67, 0xEE};<br>
byte SELF_IP[] = {192, 168, 2, 20};<br>
<br>
byte LAURENT_IP[] = {192, 168, 2, 19};<br>
int LAURENT_PORT = 2424;<br>
<br>
char buf[200];<br>
<br>
EthernetClient lclient;<br>
<br>
void ethernetInit() {<br>
 Ethernet.begin(SELF_MAC, SELF_IP);<br>
}<br>
<br>
void laurentInit() {<br>
 Serial.println(ยซStart modul Laurent Init...ยป);<br>
 Serial.print(ยซConnect to Laurentโฆ โ);<br>
 if (lclient.connect(LAURENT_IP, LAURENT_PORT)) {<br>
 Serial.println(โOKยป);<br>
 lclient.stop();<br>
 <br>
 // Send test command<br>
 Serial.println(ยซSelftest...ยป);<br>
 sprintf(buf, "$KE");<br>
 sendLaurentRequest();<br>
<br>
// Send password (default: ยซLaurentยป)<br>
 Serial.println(ยซSet password...ยป);<br>
 sprintf(buf, "$KE,PSW,SET,Laurent"); <br>
 sendLaurentRequest();<br>
 } else {<br>
 Serial.println(ยซfailedยป);<br>
 }<br>
 delay(500);<br>
 <br>
 //   DATA<br>
 sprintf(buf, "$KE,DAT,OFF");<br>
 sendLaurentRequest();<br>
 delay(100);<br>
 <br>
 //  <br>
 sprintf(buf, "$KE,REL,2,0");<br>
 sendLaurentRequest();<br>
 <br>
 Serial.println(ยซModul Laurent Init doneยป);<br>
} // laurentInit<br>
<br>
void sendLaurentRequest() {<br>
 if (lclient.connect(LAURENT_IP, LAURENT_PORT)) { <br>
 Serial.print(ยซCommand: โ);<br>
 Serial.println(buf);<br>
 lclient.println(buf);<br>
 delay(100);<br>
 <br>
 Serial.print(โAnswer: โ);<br>
 while(lclient.available() != 0) {<br>
 char c = lclient.read();<br>
 Serial.printยฉ;<br>
 }<br>
 delay(500);<br>
 lclient.stop();<br>
 } else {<br>
 Serial.println(โError sending commandยป);<br>
 }<br>
} // sendLaurentRequest<br>
<br>
void setup() { <br>
 Serial.begin(9600); <br>
 ethernetInit();<br>
 laurentInit();<br>
}<br>
<br>
void loop() {<br>
 //  <br>
 sprintf(buf, "$KE,REL,2,1");<br>
 sendLaurentRequest();<br>
 delay(3000);<br>
<br>
//  <br>
 sprintf(buf, "$KE,REL,2,0");<br>
 sendLaurentRequest();<br>
 delay(3000);<br>
}<br>
</div></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุฏู ุงุฑุฏูููู ููุฌุง</font></font></h2><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/6cb/44c/34f/6cb44c34fc97289e192f28cc8e59fb8c.png" alt="ุตูุฑุฉ"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (AMS) ูู ูุธุงู ููู ูู Arduino Mega (ุงูุขู ุฃูุถูุง ูู Arduino DUE ููุฑูุจูุง ูููุตุงุช 32 ุจุช ุงูุฃุฎุฑู M0 (Zero) ู Genuino 101) ุ ูุงูุฐู ูุญุชูู ุนูู ุงูุฑูุฒ "ูุฌููุน ุงูููุงุณุจุงุช" ูุฃูุซุฑ ูู ุฐูู ุฎุงุฏู ูุฏูุฌ ููุงุฌูุฉ ููุจ ุณููุฉ ุงูุงุณุชุฎุฏุงู. </font><font style="vertical-align: inherit;">ุชุฏุนู AMS ูุญุฏุงุช Laurent ููุฑ ุฅุฎุฑุงุฌูุง ูู ุงูุนูุจุฉ ููุง ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุฃู ุดูุก ุจุฎูุงู ููุทู ุงููุณุชุฎุฏู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุชูู AMS ุนูู ูููู ูุนูุงุฑู ููุชู ุชุดุบูู ุงููุญุฏุงุช ุงูููุทูุฉ ูุฅููุงู ุชุดุบูููุง ุจุจุณุงุทุฉ ุนู ุทุฑูู ุงูุชุนููู ุนูู ุฎุท ูู ุฑุณู ุ ุนูู ุณุจูู ุงููุซุงู ุ</font></font><br>
<br>
<pre><code class="java hljs">#define LAURENT_FEATURE
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู </font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//#define LAURENT_FEATURE</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุชู ุงูุชุนููู ุนูู ุงูุณุทุฑ ุ ููู ูุชู ุชุฌููุน ุงููุญุฏุฉ ุงูููุทูุฉ ููุง ุชุดุงุฑู ูู ุงูุนูู ุ ููุง ูููู ุฑุคูุชู ูู ูุคุดุฑุงุช ุงููุญุฏุงุช ูู ุฑุฃุณ ุงููููุน. </font><font style="vertical-align: inherit;">ุฃู ุงูุนูุณ ุ ูุดุงุฑ ุฅูู ูุญุฏุฉ ุงูุนูู ุงููุชุฑุฌูุฉ ุจุงูููู ุงูุฃุฒุฑู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ุชุนูู ูุญุฏุฉ ุงูุชุญูู LRT LRT. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/7bb/e3b/f7e/7bbe3bf7ea1146478f40eff0c230d38f.png" alt="ุตูุฑุฉ"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุดุฑุงุช ุชุดุบูู ุงููุญุฏุฉ</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูู ูุน ุงุณุชุฌุงุจุงุช ูุญุฏุฉ ููุฑุงู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนูุง ูุถูู ุงููุฏุฑุฉ ููุณ ููุท ูุฅุธูุงุฑ ุงุณุชุฌุงุจุงุช ุงููุญุฏุฉ ุ ูููู ุฃูุถูุง ููุนูู ูุนูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุชุญููููุง ุฃู ุนุฑุถูุง ุนูู ุตูุญุงุช ุงูููุจ Arduino Mega Server. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ูุชุบูุฑ ุณูุณูุฉ ุฌุฏูุฏ ูุซุงุจุช ูุญุฏุฏ ุทูู ุงูุณูุณูุฉ ุงูุชู ูุนูููุง ูุฅุฌุงุจุงุช ูุญุฏุงุช Laurent. </font><font style="vertical-align: inherit;">ูู ูุซุงู ุงูุงุฎุชุจุงุฑ ุ ูุณุงูู 25 ุญุฑููุง ุ ูููู ููููู ุฒูุงุฏุชู ุฅุฐุง ูู ุชุชูุงุณุจ ุงูุฅุฌุงุจุงุช ูุน ูุฐู ุงููููุฉ. </font><font style="vertical-align: inherit;">ุนููู ููุท ุฃู ุชุชุฐูุฑ ุฃู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ููุญุฏุฉ ุงูุชุญูู ุงูุฏูููุฉ ูู ููุฑุฏ ููู ูุชุญุชุงุฌ ุฅูู ุญูุธูุง. </font><font style="vertical-align: inherit;">ุฃุถู ุงูุฃุณุทุฑ ุงูุชุงููุฉ ุฅูู ูุญุฏุฉ laurent.ino ุงูููุงุณูุฉ ูู ุญุฒูุฉ AMS:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> MAX_LEN_LREQUEST = <span class="hljs-number"><span class="hljs-number">25</span></span>;<font></font>
String lrequest = String(MAX_LEN_LREQUEST);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุชุบููุฑ ุฑูุฒ ุงููุธููุฉ ุงูุชู ุชุฌุนู ุงูุทูุจุงุช (ูุชู ุชูููุฒ ุงูุชุบููุฑุงุช ุงููุถุงูุฉ ุจูุงุณุทุฉ ุงูุฃุณูู).</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendLaurentRequest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lclient.connect(LAURENT_IP, LAURENT_PORT)) { <font></font>
    Serialprint(<span class="hljs-string"><span class="hljs-string">"Command: "</span></span>);<font></font>
    Serial.println(buf);<font></font>
    lclient.println(buf);<font></font>
    delay(<span class="hljs-number"><span class="hljs-number">100</span></span>);<font></font>
  <font></font>
    Serialprint(<span class="hljs-string"><span class="hljs-string">"Answer:  "</span></span>);
    <span class="hljs-comment"><span class="hljs-comment">// --------------------&gt;</span></span>
    lrequest = <span class="hljs-string"><span class="hljs-string">""</span></span>;
    <span class="hljs-comment"><span class="hljs-comment">// --------------------&gt;</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(lclient.available() != <span class="hljs-number"><span class="hljs-number">0</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c = lclient.read();<font></font>
      Serial.print(c);<font></font>
      <span class="hljs-comment"><span class="hljs-comment">// --------------------&gt;</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lrequest.length() &lt; MAX_LEN_LREQUEST) {<font></font>
        lrequest += (c);<font></font>
      }<font></font>
      <span class="hljs-comment"><span class="hljs-comment">// --------------------&gt;</span></span><font></font>
    }<font></font>
    delay(<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
    lclient.stop();<font></font>
  } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
      Serialprint(<span class="hljs-string"><span class="hljs-string">"Error sending command\n"</span></span>);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุฐุง ุ ุชุนูููุง ููููุฉ ุงูุญุตูู ุนูู ุฅุฌุงุจุงุช ููุฑุงู ูู ูุชุบูุฑ lrequest ูุงูุขู ูููููุง ุฃู ููุนู ูุง ูุฑุงู ููุงุณุจูุง ูู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุณุฃูุถุญ ููููุฉ ุนุฑุถ ูุชุงุฆุฌ ุงูุงุณุชุนูุงูุงุช ูุจุงุดุฑุฉ ูู ููุญุฉ ุงูุนุฏุงุฏุงุช ูู ุฑุฃุณ ูููุน AMS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุญุธุฉ ุตุบูุฑุฉ. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฐุง ุงููุซุงู ูุธููุฉ Serialprint ุจุฏูุงู ูู Serial.print ุงูููุงุณูุฉ ูุฃููุง ุชููุฑ ุงููุฒูุฏ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู. </font><font style="vertical-align: inherit;">ููููู ุชุญููููุง ุจุณูููุฉ ุฅูู ูุงุญุฏุฉ ููุงุณูุฉ ุจูุฌุฑุฏ ูุถุน ุญุฏ ููููุชูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฎุฑุงุฌ ุงุณุชุฌุงุจุฉ ุงููุญุฏุฉ ุงูููุทูุฉ ูุฑุฃุณ ุงููููุน</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงููุซุงู ุงูุฃุฎูุฑ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุนุฑุถ ุฅุฌุงุจุงุช ูุญุฏุงุช Laurent ูู ุฑุฃุณ ูููุน Arduino Mega Server. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุงูุทูุจ ุฅูู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ () ูู ุญููุฉ ุฑุณู AMS. </font><font style="vertical-align: inherit;">ุงูุชุญ ููู arduino_mega_server.ino ูุฃุฏุฎู ุงูููุฏ ุงูุชุงูู ูุจู ูุธููุฉ cyclosInSecWork ():</font></font><br>
<br>
<pre><code class="java hljs">    #<span class="hljs-function"><span class="hljs-function">ifdef LAURENT_FEATURE
      </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cycle30s)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
        sprintf(buf, <span class="hljs-string"><span class="hljs-string">"$KE"</span></span>);   <font></font>
        sendLaurentRequest();<font></font>
      }<font></font>
    #endif<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูู ูุณุชุนูู ูุฐุง ุงูุฑูุฒ ุนู ุญุงูุฉ ูุญุฏุฉ Laurent ูู ุซูุงุซูู ุซุงููุฉ. ุจุทุจูุนุฉ ุงูุญุงู ุ ูุฐุง ูุฌุฑุฏ ูุซุงู ุ ูู ูุฐุง ุงูููุงู ูููู ุฃู ูููู ููุงู ุฃู ุทูุจ ูุฃู ุฑูุฒ. ูุจุงูุชุงูู ุ ูู ุงููุชุบูุฑ lrequest ูุฏููุง ุฅุฌุงุจุฉ ุญูู ุญุงูุฉ ุงููุญุฏุฉ ููููููุง ุงูุขู ุนุฑุถูุง ูู ุฑุฃุณ ุงููููุน. ููููุงู ุจุฐูู ุ ุงูุชุญ ุงููุญุฏุฉ ุงูููุทูุฉ server_ajax.ino ููู ุงูููุงูุฉ ุ ูู ุฑูุฒ ูุธููุฉ responseDash (EthernetClient cl) ุ ูุจู ุงูุณุทุฑ cl.println ("") ุ ุฃุถู ุงูููุฏ ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="java hljs">    #<span class="hljs-function"><span class="hljs-function">ifdef LAURENT_FEATURE
      </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendTagString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"laurent"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lrequest, cl)</span></span></span></span>;<font></font>
    #endif<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุณู ูุฐุง ุงูุฑูุฒ ุ ูู ุงููุงูุน ุ ุงุณุชุฌุงุจุงุช ุงููุญุฏุฉ ุงูููุทูุฉ ุฅูู ุตูุญุฉ ุงูููุจ. </font><font style="vertical-align: inherit;">ูุจูู ุงูููุงู ุจุฃูุฑูู: ุงูุฃูู ูู ุฅุถุงูุฉ ุดูุฑุฉ JavaScript "ุณุชูุชูุท" ุจูุงูุงุชูุง ูุงูุซุงูู ูู ุฑูุฒ HTML ุนูู ุตูุญุฉ AMS ููุณูุง ุ ุญูุซ ุณูุชู ุนุฑุถ ุฅุฌุงุจุงุช ุงููุญุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุงูุชุญ ููู scripts.js ููู ูุธููุฉ getDashData () ูุจู ููุณ ุงูุฅุบูุงู} // ุฅุฐุง ุฃุฏุฎู (this.responseXML! = Null) ุงูุฑูุฒ ุงูุฐู ุณููุจู ููุดุขุชูุง.</font></font><br>
<br>
<pre><code class="javascript hljs">          <span class="hljs-comment"><span class="hljs-comment">// Laurent</span></span>
          <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {
            <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> laurent = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.responseXML.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'laurent'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].childNodes[<span class="hljs-number"><span class="hljs-number">0</span></span>].nodeValue;<font></font>
          } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) {<font></font>
              laurent = <span class="hljs-string"><span class="hljs-string">"-"</span></span>;<font></font>
            }<font></font>
          <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"laurent"</span></span>).innerHTML = laurent; 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจูู ููุท ูุชุตุญูุญ ููู dash.htm ููููุงู ูู ุชุณููู AMS ุงูููุงุณู ูุฅุถุงูุฉ ุฑูุฒ ุฅููู ูุงูุฐู ุณูุนุฑุถ ุงููุนูููุงุช ุนูู ุงูุดุงุดุฉ. </font><font style="vertical-align: inherit;">ูุจุงุดุฑุฉ ุจุนุฏ ุงูุณุทุฑ ุงูุฐู ูุญุชูู ุนูู class = "online-device" ุ ูุฏุฎู ุณุทุฑูุง ุงูุฌุฏูุฏ ูุน ุงูุฑูุฒ:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Laurent: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"laurent"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุดุฆ. </font><font style="vertical-align: inherit;">ููุฏ ุนุฑุถูุง ุงุณุชุฌุงุจุงุช ูุญุฏุฉ Laurent ูู ุฑุฃุณ ูููุน Arduino Mega Server. </font><font style="vertical-align: inherit;">ูููุง ูุชูุฌุฉ ุฌููุฏูุง. </font><font style="vertical-align: inherit;">ุญุงูุฉ ุงููุญุฏุฉ ูุฑุฆูุฉ ุจูุถูุญ ูู ููุญุฉ AMS ููุชู ุชุญุฏูุซูุง ูู 30 ุซุงููุฉ ุ ูุฐูู ุฅุฐุง ุญุฏุซ ุดูุก ูุง ูููุญุฏุฉ ุงูููุทูุฉ ุ ูุณุชุนุฑู ุนููุง ุจุนุฏ 30 ุซุงููุฉ ูุญุฏ ุฃูุตู.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/126/5f2/c08/1265f2c08e49db3483fb7df355ac27e1.png" alt="ุตูุฑุฉ"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑู ุ ูุง ููุฌุฏ ุดูุก ูุนูุฏ ูู ุฅุฏุงุฑุฉ ูุญุฏุงุช Laurent ุจุงุณุชุฎุฏุงู Arduino ู Arduino Mega Server ุ ูุฅุฐุง ูุงู ูุฏูู ุจุงููุนู ูุซู ูุฐู ุงููุญุฏุงุช ุฃู ุชุฎุทุท ูุฅุถุงูุชูุง ุฅูู ูุธุงู Smart Home ุงูุฎุงุต ุจู ุ ูุณุชุณุงุนุฏู ูุฐู ุงูููุงูุฉ ุนูู ุงูููุงู ุจุฐูู ุจุณูููุฉ ูุจุจุณุงุทุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุงูููุงูุฉ ุงูุชุงููุฉ ูู ุงูุฏูุฑุฉ ุ ุณุชุชุนูู ููููุฉ ุฅุฏุงุฑุฉ Loranes ูุจุงุดุฑุฉ ูู ุดุงุดุฉ ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู ูููููุฉ ุฌุนู ุนูููุฉ ุชุนููู ุงูุฃุทูุงู ุจุฑูุฌุฉ ุชูุงุนููุฉ ูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุถุงูุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุงุฉ Youtube ููุชูุญุฉ ูููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏูู ุชุฑููุฌู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎุงุฏู Arduino Mega ุ ูุงูุฐู ููุถุญ ููููุฉ ุงูุนูู ูุน ูุธุงู ุญูููู.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar387205/">https://habr.com/ru/post/ar387205/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar387195/index.html">ุงููุญุช ุงูุญุฑูู "ุณูุฒูู" ูู LEGO Technics</a></li>
<li><a href="../ar387197/index.html">ูููู ููููุงูุจ ุฃู ุชููู ุดุนุฑ ุงููุงุฏุฉ ุงููุธููุฉ</a></li>
<li><a href="../ar387199/index.html">DIY PowerBank ููุฏุฉ 17000 ููู ุฃูุจูุฑ ุณุงุนุฉ ุตุงุฏูุฉ</a></li>
<li><a href="../ar387201/index.html">ูู ูู ูุฑุตุงู ูู ุงูููููุฉ ุงููุณุทูุ</a></li>
<li><a href="../ar387203/index.html">ุจุฏุฃุช ุงูุฑุฃุฉ ุนููุงุก ุชุจูุบ ูู ุงูุนูุฑ 37 ุนุงููุง ุฐุงุช ุดุฎุตูุฉ ูููุณูุฉ ูู ุงูุฑุคูุฉ ุนูุฏูุง ุฃุตุจุญุช ูุฑุงููุฉ</a></li>
<li><a href="../ar387207/index.html">ููู ูุทูุฑ ูููุฏุณ ุณุงุจู ูู Google ุชูููุงุช ุจุญุซ ุฌุฏูุฏุฉ ุนู ุงููุทุงุนู</a></li>
<li><a href="../ar387209/index.html">ููุงุฏุฉ ุงููุตูููุฉ: ุชุนููุช ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงูุงุตุทูุงุนูุฉ ููููุฉ ุฅูุดุงุก ูุฌูู ูุงูุนูุฉ ููุฃุดุฎุงุต ูุงูุฏุงุฎููุฉ ูุบุฑู ุงูููู</a></li>
<li><a href="../ar387215/index.html">ุทุฑููุฉ ุณููุฉ ูุฅุถุงูุฉ ูุญุฏุฉ Wi-Fi ุฅูู Raspberry Pi Zero</a></li>
<li><a href="../ar387217/index.html">ุงูููุงุจุณ ุงูุฐููุฉ ูุงูุชูููููุฌูุง ุงููุงุจูุฉ ููุงุฑุชุฏุงุก</a></li>
<li><a href="../ar387219/index.html">ูุงุฐุง ุชุนุทู ุทูุฑุฉ ููุนุงู ุงูุฌุฏูุฏ ูู ุญุฏูุฏ 10-20 ุฏููุงุฑุ ุงูุฌุฒุก 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>