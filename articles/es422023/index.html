<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëì üë©üèª‚Äçüíª ‚Ü™Ô∏è C√≥mo hice un UPS interactivo en l√≠nea (Parte 2) üßóüèª üíÖüèø üòí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la segunda parte de nuestro ciclo, continuamos la discusi√≥n sobre la medici√≥n del voltaje de CA, as√≠ como sobre la medici√≥n de la corriente de sali...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo hice un UPS interactivo en l√≠nea (Parte 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422023/">  En la segunda parte de nuestro ciclo, continuamos la discusi√≥n sobre la medici√≥n del voltaje de CA, as√≠ como sobre la medici√≥n de la corriente de salida de una carga.  Pido a todos los interesados ‚Äã‚Äãbajo cat. <br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br><br><h3>  Medici√≥n de la tensi√≥n o corriente rms </h3><br>  Acerca de la medici√≥n del valor real se ha escrito repetidamente en varias fuentes.  Personalmente me gust√≥ lo siguiente: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Opci√≥n de medici√≥n de TrueRMS de presupuesto</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M√©todo para medir el valor de voltaje efectivo usando MK</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Breve y claramente todas las f√≥rmulas est√°n escritas</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√°lculo de corriente / voltaje promedio y rms</a> <br><br>  En resumen, la esencia de todos estos c√°lculos complejos es que el voltaje en la red el√©ctrica puede ser diferente de la forma perfectamente sinusoidal, adem√°s, en el caso de un UPS con una sinusoide modificada en la salida, cuando opera desde el inversor, la forma de onda en la salida tambi√©n solo ser√° remotamente parecerse a un seno.  Por lo tanto, si simplificamos la medici√≥n y consideramos el valor promedio enderezado, los resultados ser√°n muy diferentes de los reales. <br><br>  Aqu√≠ hay un ejemplo de lo que sucede en la entrada y salida del UPS (tomado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de aqu√≠</a> ): <br><br><img src="https://habrastorage.org/storage3/772/895/998/77289599897f8e2331a19e455d16b02e.png" alt="imagen"><br><br>  El algoritmo para calcular el voltaje efectivo en mi caso no tiene ninguna singularidad.  Con una frecuencia de 1121 Hz (para digitalizar el voltaje con una frecuencia de 50 y 60 Hz), se dispara una interrupci√≥n del temporizador, se inicia el ADC y se realizan mediciones en tres canales (voltaje de entrada, voltaje de salida, corriente de salida).  Despu√©s de la acumulaci√≥n de 90 mediciones, se calculan y se calculan los valores reales. <br><br>  La suma de los cuadrados de los valores se calcula directamente en la interrupci√≥n, y en el ciclo del programa principal, cuando se usa la aritm√©tica de punto flotante, se calculan los valores efectivos promediados (sobre otros 20 puntos). <br><br>  Todas las operaciones se realizan en un microcontrolador PIC18F26K22 de 8 bits.  Alguien puede hacer inmediatamente la pregunta: ¬øpor qu√© no STM32? Dicen que es m√°s potente, m√°s barato, etc.  Contestar√© de inmediato.  El controlador STM32 es bueno, pero de alguna manera no ech√≥ ra√≠ces, aunque se us√≥ en algunos proyectos. <br>  La mayor√≠a de nuestras tareas no requieren grandes recursos inform√°ticos, por lo que 8 bits es m√°s que suficiente aqu√≠.  Adem√°s, PIC18 tiene una gran cantidad de desarrollos y su propio software de servicio, y esto es muy importante porque  acelera significativamente los nuevos desarrollos, lo que le permite no distraerse con el estudio de perif√©ricos desconocidos.  Y siempre lleva m√°s tiempo. <br>  PIC18 tambi√©n tiene muchas ventajas.  Este generador calibrado incorporado, cableado externo m√≠nimo, rango de voltaje de 2.5 a 5V, buenos perif√©ricos incorporados, salidas potentes con corrientes de hasta 25 mA, etc.  MK opera a una frecuencia de hasta 64 MHz. <br><br><h3>  Medida de corriente de salida </h3><br>  La corriente consumida por la carga se mide mediante un sensor integrado ACS712ELCTR-30A-T (a 30 A) de Allegro.  El sensor genera una se√±al anal√≥gica proporcional a la corriente que fluye, teniendo en cuenta el signo.  Si la corriente es positiva, la se√±al ser√° m√°s de 2 V, si es negativa, entonces menos de 2 V. La se√±al generada por el sensor es digitalizada por MK y utilizada para controlar la carga.  Ahora el fabricante se√±ala el sitio y en esos.  documentaci√≥n que estos sensores no son deseables para usar en nuevos desarrollos, y en su lugar recomienda un modelo m√°s moderno de la serie ACS723.  Pero por ahora, comprar modelos ACS712 en Rusia a proveedores es mucho m√°s simple e incluso m√°s barato. <br><br>  El sensor es extremadamente conveniente ya que permite la conexi√≥n directa al ADC MK, mientras que solo requiere una fuente de alimentaci√≥n de 5V, y tambi√©n proporciona aislamiento galv√°nico (de hecho, el sensor es sin contacto, operando en el efecto Hall).  El √∫ltimo punto es importante, porque  La medici√≥n de corriente es altamente deseable en un conductor de fase, de modo que todo el neutro del UPS es el llamado "a trav√©s", es decir  representando esencialmente un solo conductor.  Este sensor se puede usar f√°cilmente en el espacio de cualquier conductor, lo que simplifica todo el circuito de medici√≥n. <br><br>  Sin embargo, un punto interesante est√° asociado con este sensor.  Seg√∫n la documentaci√≥n, puede soportar un impulso de corriente de 100 A durante una duraci√≥n de 100 ms.  Adem√°s, puede producirse un da√±o irreversible en el chip.  Naturalmente, se instala un disyuntor en el UPS en el circuito de entrada.  Pero su tiempo de respuesta es proporcional a la duraci√≥n de este pulso.  Aqu√≠ hay un ejemplo de la caracter√≠stica de tiempo-corriente de una m√°quina Tipo C: <br><img src="https://habrastorage.org/webt/br/wl/ej/brwlejcy4xorqzafv1gijorzc80.jpeg"><br>  Para tener un margen de seguridad en caso de un cortocircuito en la placa de circuito del UPS, se realiz√≥ una derivaci√≥n adicional de acuerdo con las recomendaciones del propio fabricante del sensor ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlace</a> ). <br><br>  El punto aqu√≠ es bastante simple.  La resistencia de la derivaci√≥n interna del ACS712 es de 1,2 mOhm.  Se propone en una placa de circuito impreso en forma de un conductor de la forma deseada para hacer una segunda derivaci√≥n de este tipo, lo que aumenta el l√≠mite de corriente a la mitad (hasta 200 A), lo que permitir√° que el disyuntor funcione mucho m√°s r√°pido. <br><br>  Las dimensiones de tal derivaci√≥n de corriente en una placa de circuito impreso se muestran a continuaci√≥n: <br><br><img src="https://habrastorage.org/webt/bh/ec/np/bhecnpu9sot_7fcmrtugmewxfjo.png"><br><br>  As√≠ es como se ve en vivo: <br><br><img src="https://habrastorage.org/webt/nd/lq/qs/ndlqqsrbrnnsjmux0cxpd19hlvw.jpeg"><br><br>  Quiero se√±alar que este sensor est√° dise√±ado solo para medir el consumo de corriente de la carga, a fin de evaluar la carga del UPS y apagarlo autom√°ticamente cuando se excede el l√≠mite especificado.  Por ejemplo, un UPS de 600 W puede emitir un m√°ximo de 3A.  En el caso de que la carga comience a consumir 4A o m√°s durante alg√∫n tiempo (por ejemplo, aproximadamente 2 segundos), simplemente la desconectamos.  El disyuntor protege contra cortocircuitos durante la operaci√≥n desde la red.  Pero en el modo de funcionamiento del inversor, la protecci√≥n se organiza electr√≥nicamente, pero utilizando otros sensores.  Esto se discutir√° un poco m√°s adelante cuando se considere el funcionamiento del inversor. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es422023/">https://habr.com/ru/post/es422023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es422013/index.html">Gafas Microsoft rastrean la presi√≥n arterial</a></li>
<li><a href="../es422015/index.html">Inteligencia artificial: evoluci√≥n de un instrumento aplicado a una persona</a></li>
<li><a href="../es422017/index.html">Un par de reflexiones sobre las caracter√≠sticas de Russian Data Science</a></li>
<li><a href="../es422019/index.html">FreeCAD: un nuevo m√©todo de dibujo</a></li>
<li><a href="../es422021/index.html">La "huella funcional" del cerebro puede servir como su identificador a lo largo de la vida.</a></li>
<li><a href="../es422025/index.html">Obras maestras de la construcci√≥n de columnas mundiales: la controvertida BeoSound Shape o c√≥mo Bang & Olufsen intent√≥ "enga√±ar" a la f√≠sica</a></li>
<li><a href="../es422027/index.html">Los principios del trabajo y la vida de Ray Dalio, una de las personas m√°s ricas e influyentes del mundo.</a></li>
<li><a href="../es422029/index.html">Franquicia de rob√≥tica infantil de ROBOCOR</a></li>
<li><a href="../es422033/index.html">Doom II: Hell on Earth, id Software. Secreto no 4 en el Mapa 15 (Zona Industrial) est√° abierto en modo de juego normal</a></li>
<li><a href="../es422035/index.html">¬øCu√°ndo abandonar√° la NASA los vuelos en la "Uni√≥n"?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>