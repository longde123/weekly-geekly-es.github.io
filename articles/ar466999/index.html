<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฆ ๐ด๐ฟ ๐น ููุงุฑูุฉ ุจูู ููุชุจุงุช CLI ุงูุดุงุฆุนุฉ ูู ุจูุซูู: ุงูููุฑุงุช ูุงูุฅุณููุช ูุงููุงุฑ ูุบูุฑูุง ๐ฉ๐พโ๐คโ๐จ๐ผ โ๏ธ โน๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Python ูู ูุบุฉ ุฑุงุฆุนุฉ ูุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ุ ูุชุณูุท ุงูุถูุก ุนูู ุนุฏุฏ ูุจูุฑ ูู ุงูููุชุจุงุช ููุฐู ุงูููุงู. ููู ูุง ุงูููุชุจุงุช ุงูููุฌูุฏุฉุ ูุฃูููุง ุฃูุถูุ ุชูุงุฑู ูุฐู ุงูููุงุฏ ุจ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงุฑูุฉ ุจูู ููุชุจุงุช CLI ุงูุดุงุฆุนุฉ ูู ุจูุซูู: ุงูููุฑุงุช ูุงูุฅุณููุช ูุงููุงุฑ ูุบูุฑูุง</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466999/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rp/ek/be/rpekben_u6jtlwru-flsslxk70e.png"><br><br>  Python ูู ูุบุฉ ุฑุงุฆุนุฉ ูุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ุ ูุชุณูุท ุงูุถูุก ุนูู ุนุฏุฏ ูุจูุฑ ูู ุงูููุชุจุงุช ููุฐู ุงูููุงู.  <i>ููู ูุง ุงูููุชุจุงุช ุงูููุฌูุฏุฉุ</i>  <i>ูุฃูููุง ุฃูุถูุ</i>  ุชูุงุฑู ูุฐู ุงูููุงุฏ ุจูู ุงูุฃุฏูุงุช ุงูุดุงุฆุนุฉ ูููุณุช ุงูุฃุฏูุงุช ููุณูุง ูุนุงูู ุงููููุณูู ูุชุนุทู ูุญุงููุฉ ููุฅุฌุงุจุฉ ุนูู ุงูุณุคุงู ุงูุซุงูู. <br><br>  ูุณูููุฉ ุงููุฑุงุกุฉ ุ ุชููุณู ุงููุฑุงุฌุนุฉ ุฅูู ูุธููุชูู: ุงูุฃููู ุชูุงุฑู ุจูู ุงูููุชุจุงุช ุงูุณุชุฉ ุงูุฃูุซุฑ ุดุนุจูุฉ ุ ูุงูุซุงููุฉ - ุงูุฃูู ุดุนุจูุฉ ูุงูุฃูุซุฑ ุชุญุฏูุฏูุง ุ ูููููุง ูุง ุชุฒุงู ุฌุฏูุฑุฉ ุจุงูุงูุชูุงู. <br><a name="habracut"></a><br>  ูู ูู ูุซุงู ุ ุณูุชู ูุชุงุจุฉ ุฃุฏุงุฉ ูุณุงุนุฏุฉ ููุญุฏุฉ ุงูุชุญูู ูู ููุชุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">todolib</a> ูู Python 3.7 ุ ูุงูุชู ููููู ูู ุฎูุงููุง ุฅูุดุงุก ุงูููุงู ูุนุฑุถูุง ููุถุน ุนูุงูุงุช ุนูููุง ูุญุฐููุง.  ุณูุชู ุฅุถุงูุฉ ุงูุจุงูู ุฑููุง ุจุณุงุทุฉ ุงูุชูููุฐ ูู ุฅุทุงุฑ ูุนูู.  ูุชู ุชุฎุฒูู ุงูููุงู ููุณูุง ูู ููู json ุ ูุงูุชู ุณูุชู ุญูุธูุง ูู ููุงููุฉ ูููุตูุฉ - ุดุฑุท ุฅุถุงูู ููุญุตูู ุนูู ุงูุฃูุซูุฉ. <br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูุชู ูุชุงุจุฉ ุงุฎุชุจุงุฑ ุชุงูู ููู ุชุทุจูู.  ุงุชุฎุฐ Pytest ูุน ุงูุชุฌููุฒุงุช ุงูุชุงููุฉ ูุฅุทุงุฑ ุงุฎุชุจุงุฑ: <br><br><pre style=";text-align:right;direction:rtl"><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@pytest.fixture(autouse=True) def db(monkeypatch): """ monkeypatch     ,        """ value = {"tasks": []} monkeypatch.setattr(todolib.TodoApp, "get_db", lambda _: value) return value @pytest.yield_fixture(autouse=True) def check(db): """      """ yield assert db["tasks"] and db["tasks"][0]["title"] == "test" # ,      EXPECTED = "Task 'test' created with number 1.\n"</span></span></code> </pre> <br>  ูู ุญูุซ ุงููุจุฏุฃ ุ ูู ูุง ุณุจู ุณูููู ูุงููุงู ูุฅุธูุงุฑ ุงูููุชุจุงุช.  ุดูุฑุฉ ุงููุตุฏุฑ ุงููุงููุฉ ูุชุงุญุฉ ูู <a href="">ูุฐุง</a> ุงููุณุชูุฏุน. <br><br><h2 style=";text-align:right;direction:rtl">  argparse </h2><br>  ุชุชูุชุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Argparse</a> ุจููุฒุฉ ูุง ูููู ุฅููุงุฑูุง - ุฅููุง ููุฌูุฏุฉ ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุ ููุง ูุตุนุจ ุชุนูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช: ูููุงู ูุญูู ุ ูููุงู ูุณูุทุงุช ุ ูุชุชูุชุน ุงููุณุงุฆุท <i>ุจุงููุชุงุจุฉ</i> ุ <i>ูุงูุฅุฌุฑุงุก</i> ุ ู <i>dest</i> ุ ู <i>default</i> ุ <i>ูุงููุณุงุนุฏุฉ</i> .  ูููุงู <i>subparser</i> - ุงููุฏุฑุฉ ุนูู ูุตู ุฌุฒุก ูู ุงูุญุฌุฌ ูุงูููุทู ุฅูู ุฃูุงูุฑ ูููุตูุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ูุญูู </h4><br>  ูููููุฉ ุงูุฃููู - ูุง ุดูุก ุบูุฑ ุนุงุฏู ุ ุงููุญูู ุงููุบูู ูุดุจู ุงููุญูู ุงููุบูู.  ููู - ูู ุฑุฃูู - ููุณุช ุงููุฑุงุกุฉ ูู ุงูุฃูุถู ุนูุฏ ููุงุฑูุชูุง ุจุงูููุชุจุงุช ุงูุฃุฎุฑู  ูุชู ูุตู ุงููุณุงุฆุท ูุฃูุงูุฑ ูุฎุชููุฉ ูู ููุงู ูุงุญุฏ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_parser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> parser = argparse.ArgumentParser(<span class="hljs-string"><span class="hljs-string">"Todo notes - argparse version"</span></span>) parser.add_argument( <span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>, <span class="hljs-string"><span class="hljs-string">"-v"</span></span>, action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Enable verbose mode"</span></span> ) parser.add_argument(<span class="hljs-string"><span class="hljs-string">"--version"</span></span>, <span class="hljs-string"><span class="hljs-string">"-V"</span></span>, action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Show version"</span></span>) subparsers = parser.add_subparsers(title=<span class="hljs-string"><span class="hljs-string">"Commands"</span></span>, dest=<span class="hljs-string"><span class="hljs-string">"cmd"</span></span>) add = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"add"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Add new task"</span></span>) add.add_argument(<span class="hljs-string"><span class="hljs-string">"title"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Todo title"</span></span>) show = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"show"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Show tasks"</span></span>) show.add_argument( <span class="hljs-string"><span class="hljs-string">"--show-done"</span></span>, action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Include done tasks in the output"</span></span> ) done = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"done"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Mark task as done"</span></span>) done.add_argument(<span class="hljs-string"><span class="hljs-string">"number"</span></span>, type=int, help=<span class="hljs-string"><span class="hljs-string">"Task number"</span></span>) remove = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"remove"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Remove task"</span></span>) remove.add_argument(<span class="hljs-string"><span class="hljs-string">"number"</span></span>, type=int, help=<span class="hljs-string"><span class="hljs-string">"Task number"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> parser</code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุฑุฆูุณู </h4><br>  ูููุง ููุณ ุงูุดูุก - ูุง ูููู ูููุญูู ุจุงุณุชุซูุงุก ุงูุญุฌุฌ ุงูุชุญููููุฉ ุฃู ููุนู ุดูุฆูุง ุฃูุซุฑ ุ ูุฐูู ุณูุชุนูู ูุชุงุจุฉ ุงูููุทู ุจุดูู ูุณุชูู ููู ููุงู ูุงุญุฏ.  ููู ูุงุญูุฉ - ูู ุงููููู ุฃู ุชุนูุด ุ ูู ูุงุญูุฉ ุฃุฎุฑู - ูุงู ุฐูู ุฃูุถู ุ ููู ูู ูุชุถุญ ุจุนุฏ ููู. <br><br>  <b>UPD:</b> <i>ููุง ูุงุญุธ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">foldr</a> ุ ูู ุงููุงูุน ุ ูููู ุฃู ุชููู subparsers ุจุชุนููู ุงููุธุงุฆู ุนุจุฑ set_defaults (func = foo) ุ ุฃู ุ argparse ูุณูุญ ูู ุจุงุฎุชุตุงุฑ ุฑุฆูุณู ุฅูู ุฃุญุฌุงู ุตุบูุฑุฉ.</i>  <i>ุนุด ูุชุนูู.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(raw_args=None)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Argparse example entrypoint """</span></span> parser = get_parser() args = parser.parse_args(raw_args) logging.basicConfig() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> args.verbose: logging.getLogger(<span class="hljs-string"><span class="hljs-string">"todolib"</span></span>).setLevel(logging.INFO) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> args.version: print(lib_version) exit(<span class="hljs-number"><span class="hljs-number">0</span></span>) cmd = args.cmd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> cmd: parser.print_help() exit(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> TodoApp.fromenv() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> app: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"add"</span></span>: task = app.add_task(args.title) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"show"</span></span>: app.print_tasks(args.show_done) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"done"</span></span>: task = app.task_done(args.number) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"remove"</span></span>: task = app.remove_task(args.number) print(task, <span class="hljs-string"><span class="hljs-string">"removed from list."</span></span>)</code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุชุฌุฑูุจ </h4><br>  ููุชุญูู ูู ุฅุฎุฑุงุฌ ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ุ ูุชู <i>ุงุณุชุฎุฏุงู</i> ุฃุฏุงุฉ <i>ุชุซุจูุช capsys</i> ุ ูุงูุชู ุชุชูุญ ุงููุตูู ุฅูู ุงููุต ูู stdout ู stderr. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_argparse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span> todo_argparse.main([<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) out, _ = capsys.readouterr() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> out == EXPECTED</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ูุคุฏู </h4><br>  ูู ุงููุฒุงูุง - ูุฌููุนุฉ ุฌูุฏุฉ ูู ุงูููุฒุงุช ููุชุญููู ุ ูุฌูุฏ ูุญุฏุฉ ููุทูุฉ ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ. <br><br>  ุณูุจูุงุช - argparse ุชุดุงุฑู ููุท ูู ุชุญููู ุงูุญุฌุฌ ุ ููุงู ูุนุธู ุงูููุทู ุงูุฑุฆูุณู ูู ุฃู ุชููู ููุชูุจุฉ ูู ูุจู ููุณู.  ูููุณ ูู ุงููุงุถุญ ููููุฉ ุงุฎุชุจุงุฑ ุฑูุฒ ุงูุฎุฑูุฌ ูู ุงูุงุฎุชุจุงุฑุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  docopt </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docopt</a> ุนุจุงุฑุฉ ุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญูู</a> ุตุบูุฑ (&lt;600 ุณุทุฑ ุ ููุงุฑูุฉ ุจู 2500 ูุน argparse) ุ ูู ุดุฃูู ุฃู ูุฌุนูู ุชุจุชุณู ุ ูููุงู ุนู ูุตู ุนูู GitHub.  ุชุชูุซู ุงูููุฑุฉ ุงูุฑุฆูุณูุฉ ูู docopt ูู ูุตู ุงููุงุฌูุฉ ุญุฑูููุง ุจุงููุต ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู docstring. <br><br>  ุนูู ููุณ ุฌูุซุจ ุ docopt&gt; 6700 ูุฌู ุ ูุชู ุงุณุชุฎุฏุงูู ูู ูุง ูุง ููู ุนู 22 ุฃูู ูุดุฑูุน ุขุฎุฑ.  ููุฐุง ููุท ูุน ุชูููุฐ ุงูุซุนุจุงู!  ุชุญุชูู ุตูุญุฉ ูุดุฑูุน docopt ุนูู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ููุบุงุช ูุฎุชููุฉ ุ ูู C ู PHP ุฅูู CoffeeScript ูุญุชู R. ูููู ุดุฑุญ ูุฐุง ุงููุธุงู ุงููุชูุงุทุน ููุท ูู ุฎูุงู ุถุบุท ุงูุดูุฑุฉ ูุจุณุงุทุชูุง. <br><br><h4 style=";text-align:right;direction:rtl">  ูุญูู </h4><br>  ุจุงูููุงุฑูุฉ ูุน argparse ุ ูุนุฏ ูุฐุง ุงููุญูู ุฎุทูุฉ ูุจูุฑุฉ ููุฃูุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"""Todo notes on docopt. Usage: todo_docopt [-v | -vv ] add &lt;task&gt; todo_docopt [-v | -vv ] show --show-done todo_docopt [-v | -vv ] done &lt;number&gt; todo_docopt [-v | -vv ] remove &lt;number&gt; todo_docopt -h | --help todo_docopt --version Options: -h --help Show help. -v --verbose Enable verbose mode. """</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุฑุฆูุณู </h4><br>  ุจุดูู ุนุงู ุ ูู ุดูุก ูู ููุณู ููุง ูู ุงูุญุงู ูุน argparse ุ ูููู ุงูุขู ูููู ุฃู ูููู ูููููุฉ <i>ุงููุทููุฉ</i> ุนุฏุฉ ููู (0-2) ุ ูุงููุตูู ุฅูู ุงููุณุงุฆุท ูุฎุชูู: ูุง ูุฑุฌุน docopt ูุณุงุญุฉ ุงุณู ุฐุงุช ุณูุงุช ุ ูููู ูุฌุฑุฏ ูุงููุณ ุ ุญูุซ ุชุชู ุงูุฅุดุงุฑุฉ ุฅูู ุงุฎุชูุงุฑ ุฃูุฑ ูู ุฎูุงู ููุทููุง ุ ููุง ูุชุถุญ ูู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(argv=None)</span></span></span><span class="hljs-function">:</span></span> args = docopt(__doc__, argv=argv, version=lib_version) log.setLevel(levels[args[<span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>]]) logging.basicConfig() log.debug(<span class="hljs-string"><span class="hljs-string">"Arguments: %s"</span></span>, args) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> TodoApp.fromenv() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> app: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> args[<span class="hljs-string"><span class="hljs-string">"add"</span></span>]: task = app.add_task(args[<span class="hljs-string"><span class="hljs-string">"&lt;task&gt;"</span></span>]) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> args[<span class="hljs-string"><span class="hljs-string">"show"</span></span>]: app.print_tasks(args[<span class="hljs-string"><span class="hljs-string">"--show-done"</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> args[<span class="hljs-string"><span class="hljs-string">"done"</span></span>]: task = app.task_done(args[<span class="hljs-string"><span class="hljs-string">"&lt;number&gt;"</span></span>]) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> args[<span class="hljs-string"><span class="hljs-string">"remove"</span></span>]: task = app.remove_task(args[<span class="hljs-string"><span class="hljs-string">"&lt;number&gt;"</span></span>]) print(task, <span class="hljs-string"><span class="hljs-string">"removed from list."</span></span>)</code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุชุฌุฑูุจ </h4><br>  ุนูู ุบุฑุงุฑ ุงุฎุชุจุงุฑ argparse: <br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_docopt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span> todo_docopt.main([<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) out, _ = capsys.readouterr() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> out == EXPECTED</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ูุคุฏู </h4><br>  ูู ุงูููุงุฆุฏ - ุฑูุฒ ุฃูู ุจูุซูุฑ ูู ุงููุญูู ุงููุบูู ุ ูุณูููุฉ ุงููุตู ููุฑุงุกุฉ ุงูุฃูุงูุฑ ูุงูุญุฌุฌ ุ ุงููุฏูุฌ ูู ุงูุฅุตุฏุงุฑ. <br><br>  ุณูุจูุงุช ุ ุฃููุง ุ ููุณ argparse - ุงููุซูุฑ ูู ุงูููุทู ุจุดูู <i>ุฑุฆูุณู</i> ุ ูุง ููููู ุงุฎุชุจุงุฑ ุฑูุฒ ุงูุฎุฑูุฌ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฅู ุงูุฅุตุฏุงุฑ ุงูุญุงูู (0.6.2) ูู docopt ูู ูุณุชูุฑ ุจุนุฏ ููู ุบูุฑ ุงููุฑุฌุญ ุฃู ูููู ุนูู ุงูุฅุทูุงู - ูุงู ุงููุดุฑูุน ููุฏ ุงูุชุทููุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุดุงุท</a> ูู ุนุงู 2012 ุฅูู ููุงูุฉ ุนุงู 2013 ุ ููุงู ุงูุงูุชุฒุงู ุงูุฃุฎูุฑ ูู 17 ุฏูุณูุจุฑ.  ูุงูุดูุก ุงูุฃูุซุฑ ุบูุฑ ุงูุณุงุฑุฉ ูู ุงูููุช ุงูุญุงูู ูู ุฃู ุจุนุถ ุงููุธุงูููู docopt ุชุซูุฑ DeprecationWarning ุนูุฏ ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุฑ </h2><br>  ูุฎุชูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Click ุจุดูู</a> ุฃุณุงุณู ุนู argparse ู docopt ูู ุฎูุงู ุนุฏุฏ ุงูููุฒุงุช ูููุฌ ูุตู ุงูุฃูุงูุฑ ูุงููุนููุงุช ูู ุฎูุงู ุงููุฎุทุทุงุช ุ ูููุชุฑุญ ุฃู ูุชู ูุตู ุงูููุทู ููุณู ุฅูู ูุธุงุฆู ูููุตูุฉ ุจุฏูุงู ูู <i>ุฑุฆูุณู</i> ูุจูุฑ.  ูุฏุนู ุงููุคูููู ุฃู ุงูููุฑ ูุญุชูู ุนูู ุงููุซูุฑ ูู ุงูุฅุนุฏุงุฏุงุช ุ ูููู ูุฌุจ ุฃู ุชููู ุงููุนููุงุช ุงูููุงุณูุฉ ูุงููุฉ.  ุจูู ุงูููุฒุงุช ุ ูุชู ุงูุชุฃููุฏ ุนูู ุงูุฃูุงูุฑ ุงููุชุฏุงุฎูุฉ ูุงูุชุญููู ุงูุจุทูุก. <br><br>  ูุชูุชุน ุงููุดุฑูุน ุจุดุนุจูุฉ ูุจูุฑุฉ: ุจุงูุฅุถุงูุฉ ุฅูู ูุฌูุฏ ุฃูุซุฑ ูู 8100 ูุฌู ูุงุณุชุฎุฏุงูู ูู ูุง ูุง ููู ุนู 174 ุฃูู ูุดุฑูุน (!) ุ ูุง ูุฒุงู ููุฏ ุงูุชุทููุฑ: ุชู ุฅุตุฏุงุฑ ุงูุฅุตุฏุงุฑ 7.0 ูู ุฎุฑูู ุนุงู 2018 ุ ูุชุธูุฑ ุทูุจุงุช ุฌุฏูุฏุฉ ูุฏูุฌ ุงูุทูุจุงุช ุญุชู ููููุง ูุฐุง ุงูููู. <br><br><h4 style=";text-align:right;direction:rtl">  ูุญูู </h4><br>  ุนูู ุตูุญุฉ ุงููุซุงุฆู ุ ุนุซุฑุช ุนูู decor_option decorator ุ ูุงูุฐู ูุทูุจ ุงูุชุฃููุฏ ูู ุงููุณุชุฎุฏู ูุจู ุชูููุฐ ุงูุฃูุฑ.  ูุฅุซุจุงุช ุฐูู ุ ุชูุช ุฅุถุงูุฉ ุฃูุฑ ุงููุณุญ ุงูุฐู ููุณุญ ูุงุฆูุฉ ุงูููุงู ุจุฃููููุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs">levels = [logging.WARN, logging.INFO, logging.DEBUG] pass_app = click.make_pass_decorator(TodoApp) @click.group() @click.version_option(lib_version, prog_name=<span class="hljs-string"><span class="hljs-string">"todo_click"</span></span>) @click.option(<span class="hljs-string"><span class="hljs-string">"-v"</span></span>, <span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>, count=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-comment"><span class="hljs-comment"># click   ,     @click.option("--db", help="Path to the database file") @click.pass_context def cli(ctx, verbose, db): """Todo notes - click version.""" level = levels[min(verbose, 2)] logging.basicConfig(level=level) logging.getLogger("todolib").setLevel(level) ctx.obj = TodoApp.fromenv(db) atexit.register(ctx.obj.save) @cli.command() @click.argument("task") @pass_app def add(app, task): """ Add new task. """ task = app.add_task(task) click.echo(f"{task} created with number {task.number}.") @cli.command() @click.option("--show-done", is_flag=True, help="Include done tasks") @pass_app def show(app, show_done): """ Show current tasks. """ app.print_tasks(show_done) @cli.command() @click.argument("number", type=int) @pass_app def done(app, number): """ Mark task as done. """ task = app.task_done(number) click.echo(f"{task} marked as done.") @cli.command() @click.argument("number", type=int) @pass_app def remove(app, number): """ Remove task from the list. """ task = app.remove_task(number) click.echo(f"{task} removed from the list.") @cli.command() @click.confirmation_option(prompt="Are you sure you want to remove database") @pass_app def wipe(app): for task in app.list_tasks(): task.remove()</span></span></code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุฑุฆูุณู </h4><br>  ูููุง ููุชูู ุจุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ูู Click - ูุธุฑูุง ูุญูููุฉ ุฃู ููุทู ุงูุฃูุงูุฑ ูุชุจุงุนุฏูุง ููููุง ููุธุงุฆููุง ุ ูุง ููุฌุฏ ุดูุก ุชูุฑูุจูุง ูุธู ุฑุฆูุณููุง.  ููุง ููุถุญ ููุง ูุฏุฑุฉ ุงูููุชุจุฉ ุนูู ุชููู ุงููุณุงุฆุท ูุงููุนููุงุช ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>: cli(auto_envvar_prefix=<span class="hljs-string"><span class="hljs-string">"TODO"</span></span>)</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุชุฌุฑูุจ </h4><br>  ูู ุญุงูุฉ Click ุ โโููุณุช ููุงู ุญุงุฌุฉ ูุงุนุชุฑุงุถ sys.stdout ุ ูุธุฑูุง ููุฌูุฏ ูุญุฏุฉ <i>click.testing</i> ูุน ุนุฏุงุก ููุซู ูุฐู ุงูุฃุดูุงุก.  ููุง ููุชุตุฑ <i>ุงูุฃูุฑ ุนูู</i> ุงุนุชุฑุงุถ <i>CliRunner</i> ููุฅุฎุฑุงุฌ ูุญุณุจ ุ ุจู ูุชูุญ ูู ุฃูุถูุง ุงูุชุญูู ูู ุฑูุฒ ุงูุฎุฑูุฌ ุ ููู ุฃูุฑ ุฑุงุฆุน ุฃูุถูุง.  ูู ูุฐุง ูุณูุญ ุจุงุฎุชุจุงุฑ ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ููููุฑ ุฏูู ุงุณุชุฎุฏุงู pytest ูุชุฌุงูุฒ ุงููุญุฏุฉ ุงูููุงุณูุฉ <i>ููุฃูู</i> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> click.testing <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> runner = click.testing.CliRunner() result = runner.invoke(todo_click.cli, [<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> result.exit_code == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> result.output == EXPECTED</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ูุคุฏู </h4><br>  ูุฐุง ูุฌุฑุฏ ุฌุฒุก ุตุบูุฑ ููุง ูููู ุฃู ุชูุนูู Click.  ูู ุจููุฉ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API) - ุงูุชุญูู ูู ุงูููู ุ ูุงูุชูุงูู ูุน ุงูุฌูุงุฒ (ุงูุฃููุงู ุ ู pager a la less ุ ูุดุฑูุท ุงูุชูุฏู ุ ููุง ุฅูู ุฐูู) ุ ููุชุงุฆุฌ ุงูุงุณุชุฏุนุงุก ุ ูุงูุฅููุงู ุงูุชููุงุฆู ุ ูุบูุฑ ุฐูู ุงููุซูุฑ.  ููููู ุฃู ุชุฑู ุฃูุซูุฉูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br><br>  ุงูุงูุฌุงุจูุงุช: ุงููุซูุฑ ูู ุงูุฃุฏูุงุช ูุฃูุฉ ููุงุณุจุฉ ุ ุทุฑููุฉ ุฃุตููุฉ ุ ูููู ูู ููุณ ุงูููุช ููุงุณุจุฉ ููุตู ุงููุฑู ุ ูุณูููุฉ ุงูุงุฎุชุจุงุฑ ูุญูุงุฉ ุงููุดุฑูุน ุงููุดุทุฉ. <br><br>  ุงูุณูุจูุงุช: ูุง ูู ุนููุจ "ุงูููุฑ" - ูุฐุง ุณุคุงู ุตุนุจ.  ุฑุจูุง ูุง ูุนุฑู ุดูุฆูุง ุนูุง ุชุณุชุทูุน ุงูููุชุจุงุช ุงูุชุงููุฉ ูุนููุ <br><br><h2 style=";text-align:right;direction:rtl">  ุญุฑูู </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุงุฑ</a> ููุณุช ูุฌุฑุฏ ููุชุจุฉ ุตุบูุฑุฉ (ุธูุฑุช ูู ุนุงู 2017) ููุงุฌูุงุช ูุญุฏุฉ ุงูุชุญูู ูู Google ุ ุจู ูู ููุชุจุฉ ูุฅูุดุงุก ูุงุฌูุงุช ูุญุฏุฉ ุงูุชุญูู ูู <i>ุฃู ูุงุฆู</i> Python ุฃู ุงูุชุจุงุณู ุญุฑูููุง. <br>  ูู ุจูู ุฃุดูุงุก ุฃุฎุฑู ุ ุฐูุฑ ุฃู ุงูุญุฑูู ูุณุงุนุฏ ูู ุชุทููุฑ ูุชุตุญูุญ ุงูููุฏ ุ ููุณุงุนุฏ ุนูู ุชูููู ุงูููุฏ ุงูููุฌูุฏ ูู CLI ุ ููุณูู ุงูุงูุชูุงู ูู bash ุฅูู Python ุ ููุฏูู REPL ุงูุฎุงุต ุจู ููุนูู ุงูุชูุงุนูู.  ูุฌุจ ุฃู ูุฑูุ <br><br><h4 style=";text-align:right;direction:rtl">  ูุญูู ูุงูุฑุฆูุณู </h4><br>  ุฅู fire.Fire ูุงุฏุฑ ุญููุง ุนูู ูุจูู ุฃู ูุงุฆู: ูุญุฏุฉ ููุทูุฉ ููุซูู ูุฆุฉ ููุงููุณ ุจู ุฃุณูุงุก ุฃูุงูุฑ ููุธุงุฆู ููุงุจูุฉ ููุง ุฅูู ุฐูู. <br><br>  ูุง ููููุง ูู ุฃู Fire ูุณูุญ ุจููู ูุงุฆู ุตูู.  ูุจุงูุชุงูู ุ ููุจู ูููุดุฆ ุงููุตู ุงููุณูุทุงุช ุงูุดุงุฆุนุฉ ูุฌููุน ุงูุฃูุงูุฑ ุ ูุฃุณุงููุจูุง ูุณูุงุชูุง ูู ุฃูุงูุฑ ูููุตูุฉ.  ุณูู ูุณุชุฎุฏู ูุฐุง: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Commands</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, db=None, verbose=False)</span></span></span><span class="hljs-function">:</span></span> level = logging.INFO <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> verbose <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> logging.WARNING logging.basicConfig(level=level) logging.getLogger(<span class="hljs-string"><span class="hljs-string">"todolib"</span></span>).setLevel(level) self._app = todolib.TodoApp.fromenv(db) atexit.register(self._app.save) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">version</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> todolib.__version__ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, task)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""Add new task."""</span></span> task = self._app.add_task(task) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, show_done=False)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Show current tasks. """</span></span> self._app.print_tasks(show_done) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">done</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, number)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Mark task as done. """</span></span> task = self._app.task_done(number) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, number)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Removes task from the list. """</span></span> task = self._app.remove_task(number) print(task, <span class="hljs-string"><span class="hljs-string">"removed from the list."</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args=None)</span></span></span><span class="hljs-function">:</span></span> fire.Fire(Commands, command=args)</code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุงูุฃุนูุงู ุงููุถููุฉ </h4><br>  ูุญุชูู Fire ุนูู ุฃุนูุงู ุฎุงุตุฉ ุจู ุจูุงุก ุฌููุฉ ุฎุงุต (ูุฌุจ ุชูุฑูุฑูุง ุจุนุฏ "-") ุ ูุงูุชู ุชุณูุญ ูู ุจุงูุจุญุซ ุชุญุช ุบุทุงุก ุงููุญูู ุงููุบูู ูุงูุชุทุจูู ููู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุณุชุฏุนุงุก ุงูุฃูุซูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ ./todo_fire.py show -- --trace Fire trace: 1. Initial component 2. Instantiated class <span class="hljs-string"><span class="hljs-string">"Commands"</span></span> (todo_fire.py:9) 3. Accessed property <span class="hljs-string"><span class="hljs-string">"show"</span></span> (todo_fire.py:25) $ ./todo_fire.py -- --verbose | head -n 12 <span class="hljs-comment"><span class="hljs-comment">#    , ,  Commands._app NAME todo_fire.py - SYNOPSIS todo_fire.py - GROUP | COMMAND GROUPS GROUP is one of the following: _app Todo Application definition. $ ./todo_fire.py show -- --interactive Fire is starting a Python REPL with the following objects: Modules: atexit, fire, logging, todolib Objects: Commands, args, component, main, result, self, todo_fire.py, trace Python 3.7.4 (default, Aug 15 2019, 13:09:37) [GCC 7.4.0] on linux Type "help", "copyright", "credits" or "license" for more information. (InteractiveConsole) &gt;&gt;&gt; self &lt;__main__.Commands object at 0x7fd0a6125bd0&gt; &gt;&gt;&gt; self._app.db {'tasks': [{'title': 'test', 'done': False}]}</span></span></code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุชุฌุฑูุจ </h4><br>  ูุดุจู ุงุฎุชุจุงุฑ ุงููุธููุฉ ุงูุฑุฆูุณูุฉ ุงุฎุชุจุงุฑ argparse ู docopt ุ ูุฐูู ูุง ุฃุฑู ุงูููุทุฉ ููุง. <br><br>  ูู ุงูููุช ููุณู ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูุธุฑูุง ูุทุจูุนุฉ ุงููุงุฑ ุงูุงุณุชููุงููุฉ ุ ูู ุงููููู ุจููุณ ุงูุฏุฑุฌุฉ ุงุฎุชุจุงุฑ ูุฆุฉ ุงูุฃูุงูุฑ ุนูู ุงูููุฑ. <br><br><h4 style=";text-align:right;direction:rtl">  ูุคุฏู </h4><br>  ุงููุงุฑ ูู ุฃุฏุงุฉ ูุง ุชูู ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงูููุฑ.  ูุง ูุชุทูุจ ุณุฑุฏ ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ูู ุงููุญูู ุงููุบูู ุ ูุงูุชูููู ุถุฆูู ููุบุงูุฉ ุ ูููุงู ุฎูุงุฑุงุช ููุชุตุญูุญ ุ ูุงูููุชุจุฉ ููุณูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนูุด ูุชุชุทูุฑ</a> ุจุดูู ุฃูุซุฑ ูุดุงุทูุง ูู ุงูููุฑุฉ (60 ููููุง ูุฐุง ุงูุตูู). <br><br>  ุณูุจูุงุช: ูููู ุฃูู ุจูุซูุฑ ูู ุงูููุฑ ูุบูุฑูุง ูู ุงููุญูููู.  ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุบูุฑ ูุณุชูุฑุฉ (ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู 0.2.1). <br><br><h2 style=";text-align:right;direction:rtl">  ุฃุณููุช </h2><br>  ูู ุงููุงูุน ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุณุช Cement</a> ููุชุจุฉ CLI ุชูุงููุง ุ ุจู ุฅุทุงุฑ ุนูู ูุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ุ ูููู ููุฒุนู ุฃููุง ููุงุณุจุฉ ููุจุฑุงูุฌ ุงููุตูุฉ ูุงูุชุทุจููุงุช ุงููุนูุฏุฉ ุฐุงุช ุงูุชูุงููุงุช ุงููุฎุชููุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  ูุญูู </h4><br>  ูุจุฏู ุงููุญูู ุงููุบูู ูู Cement ุบูุฑ ุนุงุฏู ุ ูููู ุฅุฐุง ูุธุฑุช ุนู ูุซุจ ุฅูู ุงููุนููุงุช ุ ููู ุงูุณูู ุฃู ุชุชุฎูู ุฃู argparse ุงููุฃูููุฉ ุชุญุช ุงูุบุทุงุก.  ูููู ุฑุจูุง ูููู ูุฐุง ูู ุงูุฃูุถู - ูุง ุญุงุฌุฉ ูุชุนูู ูุนุงููุฑ ุฌุฏูุฏุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> cement <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Controller, ex <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Controller)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> label = <span class="hljs-string"><span class="hljs-string">"base"</span></span> arguments = [ ( [<span class="hljs-string"><span class="hljs-string">"-v"</span></span>, <span class="hljs-string"><span class="hljs-string">"--version"</span></span>], {<span class="hljs-string"><span class="hljs-string">"action"</span></span>: <span class="hljs-string"><span class="hljs-string">"version"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">f"todo_cement v</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{todolib.__version__}</span></span></span><span class="hljs-string">"</span></span>}, ) ] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_default</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""Default action if no sub-command is passed."""</span></span> self.app.args.print_help() @ex(help=<span class="hljs-string"><span class="hljs-string">"Add new task"</span></span>, arguments=[([<span class="hljs-string"><span class="hljs-string">"task"</span></span>], {<span class="hljs-string"><span class="hljs-string">"help"</span></span>: <span class="hljs-string"><span class="hljs-string">"Task title"</span></span>})]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> title = self.app.pargs.task self.app.log.debug(<span class="hljs-string"><span class="hljs-string">f"Task title: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{title!r}</span></span></span><span class="hljs-string">"</span></span>) task = self.app.todoobj.add_task(title) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) @ex( help=<span class="hljs-string"><span class="hljs-string">"Show current tasks"</span></span>, arguments=[ ([<span class="hljs-string"><span class="hljs-string">"--show-done"</span></span>], dict(action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Include done tasks"</span></span>)) ], ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.app.todoobj.print_tasks(self.app.pargs.show_done) @ex(help=<span class="hljs-string"><span class="hljs-string">"Mark task as done"</span></span>, arguments=[([<span class="hljs-string"><span class="hljs-string">"number"</span></span>], {<span class="hljs-string"><span class="hljs-string">"type"</span></span>: int})]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">done</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> task = self.app.todoobj.task_done(self.app.pargs.number) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) @ex(help=<span class="hljs-string"><span class="hljs-string">"Remove task from the list"</span></span>, arguments=[([<span class="hljs-string"><span class="hljs-string">"number"</span></span>], {<span class="hljs-string"><span class="hljs-string">"type"</span></span>: int})]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> task = self.app.todoobj.remove_task(self.app.pargs.number) print(task, <span class="hljs-string"><span class="hljs-string">"removed from the list."</span></span>)</code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุงูุชุทุจูู ูุงูุฑุฆูุณู </h4><br>  ุงูุงุณููุช ุ ูู ุจูู ุฃุดูุงุก ุฃุฎุฑู ุ ูุง ูุฒุงู ููุชู ุงูุฅุดุงุฑุงุช ูู ุงุณุชุซูุงุกุงุช.  ูุธูุฑ ูุฐุง ููุง ุนูุฏ ุฅุฎุฑุงุฌ ุงูุดูุฑุฉ ุงูุตูุฑูุฉ ุจุงุณุชุฎุฏุงู SIGINT / SIGTERM. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoApp</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(App)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, argv=None)</span></span></span><span class="hljs-function">:</span></span> super().__init__(argv=argv) self.todoobj = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load_db</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.todoobj = todolib.TodoApp.fromenv() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.todoobj.save() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># application label label = "todo_cement" # register handlers handlers = [Base] hooks = [("post_setup", lambda app: app.load_db()), ("pre_close", lambda app: app.save())] # call sys.exit() on close close_on_exit = True def main(): with TodoApp() as app: try: app.run() except CaughtSignal as e: if e.signum not in (signal.SIGINT, signal.SIGTERM): raise app.log.debug(f"\n{e}") app.exit_code = 0</span></span></code> </pre><br></div></div><br>  ุฅุฐุง ููุช ุชูุฑุฃ ุฑุฆูุณู ุ ููููู ุฃู ุชุฑู ุฃู ุชุญููู ูุญูุธ todolib.TodoApp ูููู ุฃู ูุชู ุฃูุถุง ูู ููุงูุฉ __enter __ / __ exit__ ุ ูููู ุชู ูุตู ูุฐู ุงููุฑุงุญู ูู ููุงูุฉ ุงููุทุงู ุฅูู ุทุฑู ูููุตูุฉ ูู ุฃุฌู ุฅุธูุงุฑ ุงูุณูุงููุฑ ุงูุฃุณููุช. <br><br><h4 style=";text-align:right;direction:rtl">  ุชุฌุฑูุจ </h4><br>  ููุงุฎุชุจุงุฑ ุ ููููู ุงุณุชุฎุฏุงู ููุณ ูุฆุฉ ุงูุชุทุจูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cement</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> todo_cement.TodoApp(argv=[<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> app: app.run() out, _ = capsys.readouterr() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> out == EXPECTED <span class="hljs-comment"><span class="hljs-comment">#     jinja,       assert app.last_rendered is None</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h4><br>  ุงููููุฒุงุช: ูุฌููุนุฉ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุชุดุจู ูุฌููุนุฉ ูู ุงูุณูุงููู ุงูุณููุณุฑูุฉ ุ ุงููุงุจููุฉ ููุชูุณุนุฉ ูู ุฎูุงู ุงูุณูุงููุฑ ูุงูุฅุถุงูุงุช ุ ูุงุฌูุฉ ูุณุชูุฑุฉ ูุชุทููุฑ ูุดุท. <br><br>  ุณูุจูุงุช: ูู ุงูุฃูุงูู ูุซุงุฆู ูุงุฑุบุฉ.  ูุฏ ุชุจุฏู ุงููุตูุต ุงูุจุฑูุฌูุฉ ุงูุตุบูุฑุฉ ุงููุงุฆูุฉ ุนูู ุงูุฃุณููุช ูุนูุฏุฉ ุจุนุถ ุงูุดูุก. <br><br><h2 style=";text-align:right;direction:rtl">  ูููู </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู</a> ุฃุจุนุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง</a> ูููู ุนู ูููู ุฅุทุงุฑ ุนูู ุดุงุฆุน ูุซู ุงูุขุฎุฑูู ุงููุฏุฑุฌูู ููุง (ุญูุงูู 400 ูุฌู ูู ุฌูุซุจ ูู ุงููุฌููุน) ุ ููุน ุฐูู ุชูููุช ูู ุงูุชุนุฑู ุนููู ุนูุฏูุง ุฏุฑุณุช ููู ูุณู ุงูุดุนุฑ. <br><br>  ูุฐูู ุ ูุนุฏ Cleo ุฃุญุฏ ูุดุงุฑูุน ูุคูู ุงูุดุนุฑ ุงูุฐู ุชู ุฐูุฑู ุจุงููุนู ุ ููู ุฃุฏุงุฉ ูุฅุฏุงุฑุฉ ุงูุชุจุนูุงุช ูุงููุญุงูุงุฉ ุงูุงูุชุฑุงุถูุฉ ูุชุตูููุงุช ุงูุชุทุจููุงุช.  ุญูู ุงูุดุนุฑ ุนูู habr ุจุงููุนู ุฃูุซุฑ ูู ูุฑุฉ ูุชุจ ุ ูุญูู ุฌุฒุก ูุญุฏุฉ ุงูุชุญูู - ูุง. <br><br><h4 style=";text-align:right;direction:rtl">  ูุญูู </h4><br>  ุชู ุจูุงุก Cleo ุ ูุซู Cement ุ ุนูู ูุจุงุฏุฆ ุงููุงุฆูุงุช ุ ุฃู  ูุชู ุชุนุฑูู ุงูุฃูุงูุฑ ูู ุฎูุงู ูุฆุฉ ุงูุฃูุงูุฑ ู docstring ุงูุฎุงุตุฉ ุจูุง ุ ูุชู ุงููุตูู ุฅูู ุงููุนููุงุช ูู ุฎูุงู ุทุฑููุฉ ุงูุฎูุงุฑ () ุ ูููู ุฌุฑุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฅู ุทุฑููุฉ ุงูุณุทุฑ () ุ ูุงูุชู ุชูุณุชุฎุฏู ูุฅุฎุฑุงุฌ ุงููุต ุ ุชุฏุนู ุงูุฃููุงุท (ุฃู ุงูุฃููุงู) ูุชุตููุฉ ุงูุฎุฑุฌ ุงุณุชูุงุฏูุง ุฅูู ุนุฏุฏ ุงูุฃุนูุงู ุงููุทูููุฑุฉ ุฎุงุฑุฌ ุงูุตูุฏูู.  ูููู ูุฏููุง ุฃูุถุง ุฌุฏูู ุงูุฅุฎุฑุงุฌ.  ููุฐูู ุชูุฏู ุงููุถุจุงู.  ูุจุนุฏ ... ุจุดูู ุนุงู ุ ุงูุธุฑ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุดูุฑุฉ ุงููุตุฏุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> cleo <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Command <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> BaseCommand <span class="hljs-comment"><span class="hljs-comment"># cleo    clikit,          from clikit.api.io import flags as verbosity class Command(BaseCommand): def __init__(self): super().__init__() self.todoapp = None def handle(self): with todolib.TodoApp.fromenv() as app: self.todoapp = app self.do_handle() def do_handle(self): raise NotImplementedError class AddCommand(Command): """ Add new task. add {task : Task to add} """ def do_handle(self): title = self.argument("task") task = self.todoapp.add_task(title) # will be printed only on "-vvv" self.line(f"Title: {title}", style="comment", verbosity=verbosity.DEBUG) self.line(f"Task &lt;info&gt;{task.title}&lt;/&gt; created with number {task.number}.") class ShowCommand(Command): """ Show current tasks. show {--show-done : Include tasks that are done.} """ def do_handle(self): tasks = self.todoapp.list_tasks(self.option("show-done")) if not tasks: self.line("There is no TODOs.", style="info") self.render_table( ["Number", "Title", "Status"], [ [str(task.number), task.title, "" if task.done else "โ"] for task in tasks ], ) class DoneCommand(Command): """ Mark task as done. done {number : Task number} """ def do_handle(self): task = self.todoapp.task_done(int(self.argument("number"))) self.line(f"Task &lt;info&gt;{task.title}&lt;/&gt; marked as done.") class RemoveCommand(Command): """ Removes task from the list. remove {number : Task number} """ def do_handle(self): task = self.todoapp.remove_task(int(self.argument("number"))) self.line(f"Task &lt;info&gt;{task.title}&lt;/&gt; removed from the list.")</span></span></code> </pre><br></div></div><br><h4 style=";text-align:right;direction:rtl">  ุฑุฆูุณู </h4><br>  ูู ูุง ูู ูุทููุจ ูู ุฅูุดุงุก ูุงุฆู <i>cleo.Application</i> ุซู ุชูุฑูุฑ ุงูุฃูุงูุฑ ุฅูู add_commands ุฅููู.  ููู ูุง ุชุชูุฑุฑ ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ ุ ุชู ููู ูู ูุฐุง ูู ุงูุฑุฆูุณู ุฅูู ุงููููุดุฆ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> cleo <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Application <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> BaseApplication <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoApp</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BaseApplication)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> super().__init__(name=<span class="hljs-string"><span class="hljs-string">"ToDo app - cleo version"</span></span>, version=todolib.__version__) self.add_commands(AddCommand(), ShowCommand(), DoneCommand(), RemoveCommand()) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args=None)</span></span></span><span class="hljs-function">:</span></span> TodoApp().run(args=args)</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุชุฌุฑูุจ </h4><br>  ูุงุฎุชุจุงุฑ ุงูุฃูุงูุฑ ูู Cleo ุ ููุฌุฏ <i>CommandTester</i> ุ ูุซู ุฌููุน <s>ุงูุฃุนูุงู</s> ุงูุจุงูุบูู <s>ูู</s> ุงูุฅุทุงุฑ ุ ูุนุชุฑุถ I / O ูุฑูุฒ ุงูุฎุฑูุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cleo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> app = todo_cleo.TodoApp() command = app.find(<span class="hljs-string"><span class="hljs-string">"add"</span></span>) tester = cleo.CommandTester(command) tester.execute(<span class="hljs-string"><span class="hljs-string">"test"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> tester.status_code == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> tester.io.fetch_output() == <span class="hljs-string"><span class="hljs-string">"Task test created with number 0.\n"</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ูุคุฏู </h4><br>  ุงููููุฒุงุช: ุจููุฉ ุงููุงุฆู ูุน ุชูููุญุงุช ุงููุชุงุจุฉ ุ ูุงูุชู ุชุนูู ุนูู ุชุจุณูุท ุนูููุฉ ุงูุชุทููุฑ (ูุธุฑูุง ูุฃู ุงูุนุฏูุฏ ูู IDEs ูุงููุญุฑุฑูู ูุฏููู ุฏุนู ุฌูุฏ ูุฑูุฒ OOP ููุญุฏุฉ ุงููุชุงุจุฉ) ุ  ูุฏุฑ ูุจูุฑ ูู ุงููุธุงุฆู ููุนูู ููุณ ููุท ูุน ุงููุณุงุฆุท ุ ูููู ุฃูุถูุง I / O. <br><br>  Plus ุฃู ูุงูุต: ูุนููุฉ ุงููุนู ุงูุฎุงุตุฉ ุจู ุ ูุงูุชู ุชุชูุงูู ููุท ูุน I / O Cleo / CliKit.  ุนูู ุงูุฑุบู ูู ุฃูู ููููู ูุชุงุจุฉ ูุนุงูุฌ ูุฎุตุต ููุญุฏุฉ ุงูุชุณุฌูู ุ ุฅูุง ุฃูู ูุฏ ูููู ูู ุงูุตุนุจ ุงูุญูุงุธ ุนูููุง ูุน ุชุทูุฑ cleo. <br><br>  ุณูุจูุงุช: ูู ุงููุงุถุญ - ุฑุฃู ุดุฎุตู - ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุจุชุฏุฆุฉ: ููุชูุฑ ุงูุฅุทุงุฑ ุฅูู ูุณุชุฎุฏู "ูุจูุฑ" ุขุฎุฑ ุ ุจุงุณุชุซูุงุก ุงูุดุนุฑ ุ ููุชุทูุฑ ูููู ุจุงูุชูุงุฒู ูุน ุชุทูุฑู ูุงุญุชูุงุฌุงุชู ุ  ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ุงููุณุชูุฏุงุช ูุฏููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูุณุชููุงุช ุงูุชุณุฌูู ุงูุขู ูุง ุชููู ูู ูุญุฏุฉ clikit ุ ูููู ูู clikit.api.io.flags) ุ ูุจุตูุฉ ุนุงูุฉ ุชููู ุถุนููุฉ ููุง ุชุนูุณ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API) ุจุฃููููุง. <br><br>  ูุฑูุฒ Cleo ุ ููุงุฑูุฉู ุจุงูุงุณููุช ุ ุนูู CLI ุ ููู ุงููุญูุฏ ุงูุฐู ููุฑ ูู ุงูุชูุณูู (ุฅุฎูุงุก ุชุชุจุน ุงูููุฏุณ ุงูุงูุชุฑุงุถู) ููุงุณุชุซูุงุกุงุช ูู ุงูุฅุฎุฑุงุฌ ุงูุงูุชุฑุงุถู.  ูููู - ูุฑุฉ ุฃุฎุฑู ุฑุฃู ุดุฎุตู - ูุฎุณุฑ ุฃูุงู ุงูุฃุณููุช ูู ุดุจุงุจู ูุงุณุชูุฑุงุฑ API. <br><br><h2 style=";text-align:right;direction:rtl">  ูู ุงูุฎุชุงู </h2><br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ูููู ููู ุดุฎุต ุฑุฃูู ุงูุฎุงุต ุ ููู ุฃูุถู ุ ูููู ูุฌุจ ุฃู ูููู ุงูุงุณุชูุชุงุฌ: ุฃุนุฌุจูู ุงูููุฑ ุฃูุซุฑ ุ ูุฃู ููุงู ุงููุซูุฑ ูู ุงูุฃุดูุงุก ููู ููู ุงูุณูู ุฌุฏูุง ุชุทููุฑ ุงูุชุทุจููุงุช ูุงุฎุชุจุงุฑูุง.  ุฅุฐุง ุญุงููุช ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุฅูู ุงูุญุฏ ุงูุฃุฏูู - ุงุจุฏุฃ ุจุงููุงุฑ.  ูุญุชุงุฌ ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฎุงุต ุจู ุฅูู ุงููุตูู ุฅูู Memcached ุ ูุงูุชูุณูู ุจุงุณุชุฎุฏุงู jinja ููุงุจููุฉ ุงูุชูุฏุฏ - ุฎุฐ Cement ููู ุชูุฏู ุนููู.  ูุฏูู ูุดุฑูุน ููุญููุงูุงุช ุงูุฃูููุฉ ุฃู ุชุฑุบุจ ูู ุชุฌุฑุจุฉ ุดูุก ุขุฎุฑ - ุงูุธุฑ ุฅูู cleo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar466999/">https://habr.com/ru/post/ar466999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar466983/index.html">ููุงุฐุง ูุง ูุณุชุทูุน ุฃุญุฏ ุงูุชุบูุจ ุนูู ุณุจุงู ุชุณูุง</a></li>
<li><a href="../ar466985/index.html">ุญูู ูุนุงููุฑ C ++ ุงูุฌุฏูุฏุฉ</a></li>
<li><a href="../ar466987/index.html">ู "ls" ุบูุฑ ููุทูุฉ ุฃู ููู ูุชู ุชุฑููู linuxoids</a></li>
<li><a href="../ar466993/index.html">ุชูููู ุงููููู ุงูุฅุถุงูู Warnings Next Generation ููุชูุงูู ูุน PVS-Studio</a></li>
<li><a href="../ar466995/index.html">ุชูููู ุงููููู ุงูุฅุถุงูู ูู Warnings Next Generation ูู ุฃุฌู ุชูุงูู PVS-Studio</a></li>
<li><a href="../ar467003/index.html">ูุงุฆูุฉ ุณุฑูุนุฉ ููุฑูุญุฉ ููุงุจูุฉ ููุชููู ูุน 1075 ูุฆุฉ (36000 ููุชุฌ)</a></li>
<li><a href="../ar467005/index.html">ููููุฉ ุชูููู ูุซูุฑ ุงูุญุฏูุฏ ุจุดูู ุตุญูุญ</a></li>
<li><a href="../ar467007/index.html">FLProg - ุงูุชูุงูู ุงููุณุชูู ูู ุจุฑูุงูุฌ ูุญุฏุงุช ุงูุชุญูู ุงููุฎุตุตุฉ</a></li>
<li><a href="../ar467009/index.html">ุฅูุดุงุก ููุชุจุฉ ููุฒููุฉ ูุน Notion ู Python</a></li>
<li><a href="../ar467011/index.html">ูุง ูุฌุจ ูุฑุงุกุชู ููุดุงูุฏุชู ููุจุฏุก ูู "ุนููู ุงูุจูุงูุงุช": ุงููุชุจ ูุงูููุงููุณ ูุงูุฏูุฑุงุช ุงูุชุฏุฑูุจูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>