<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍❤️‍💋‍👨 🤙 🈚️ 使您的想法成为应用程序。 无服务器应用程序-分步说明 🥊 💪🏿 🙏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在2018年，即使您从未做过，无服务器也是制作应用程序后端的最快方法。 是的，我知道无数的应用程序构造函数，MBaaS或BaaS，但是我想证明无服务器不仅适用于基本应用程序，而且适用于无法在构造函数上完成的可伸缩复杂后端。 

 前几天，我们在俄罗斯推出了第一个无服务器云-基于Swifty平台的Ru...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使您的想法成为应用程序。 无服务器应用程序-分步说明</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rusonyx/blog/430296/"><img src="https://habrastorage.org/webt/y6/ow/ec/y6oweczabj_yovxgms6829zzsno.png"><br><br> 在2018年，即使您从未做过，无服务器也是制作应用程序后端的最快方法。 是的，我知道无数的应用程序构造函数，MBaaS或BaaS，但是我想证明无服务器不仅适用于基本应用程序，而且适用于无法在构造函数上完成的可伸缩复杂后端。 <br><a name="habracut"></a><br> 前几天，我们<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在俄罗斯</a>推出了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第一个无服务器云-</a>基于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Swifty</a>平台的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Rusonyx Serverless</a> 。 使用该平台的前三个月是免费的，因此每个人都可以尝试无服务器方法。 <br><br> 在本文中，我将告诉您如何使用无服务器方法创建具有身份验证，用户配置文件，图像存储以及实际上的任务管理的简单待办事项应用程序。 我们自然会在Swifty上执行此操作，但是此处的方法对于所有无服务器解决方案都是相同的。 可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>找到完成的应用程序示例。 前端用vue.js编写，我们将在内置的对象存储（S3）上运行，后端将在Go和Python中的函数上完成。 <br><br> 通过本指南，您不需要JavaScript，goshechki和python的知识。 该应用程序的源代码可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里获取</a> 。 <br><br><h3>  <font color="#cc0000">用户认证</font> </h3><br> 在第一阶段，我们将自己为应用程序后端创建函数。 首先，您需要在Swifty中创建一个帐户，您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>创建该帐户。 登录到仪表板后，您应该会看到此屏幕。 <br><br><img src="https://habrastorage.org/webt/bb/sd/gu/bbsdgudmhebk0prnocq16uyqzli.png"><br><br> 现在您已经有一个帐户，可以开始自己创建功能了。  Swifty包含身份验证服务-身份验证，它提供注册，登录和注销的基本操作，以及创建，修改，检索和删除用户配置文件的功能。 它还具有Facebook集成功能，并且可以将已创建的个人资料与Facebook个人资料链接。 但是我们还不需要它们。 也许以后。 <br><br>  <b>创建身份验证服务</b> ： <br><br><ul><li> 打开Swifty-&gt;身份验证服务。 </li><li> 单击创建身份验证数据库，然后命名todoapp数据库。 我将继续使用该名称，但是您可以根据需要命名自己的基地。 </li></ul><br>  <b>结果，将创建很多东西</b> ： <br><br><ol><li>  <i>函数todoapp.base-</i>使注册，登录和注销用户，实现OAuth 2.0协议。 </li><li>  <i>函数todoapp.fb-</i>允许您通过fb验证用户身份。 </li><li>  <i>函数todoapp.link-</i>将已经创建的用户的帐户与他们在fb上的帐户链接。 </li><li>  <i>函数todoapp.profiles-</i>在MongoDB中创建，更新，删除用户配置文件。 </li><li>  <i>Todoapp_mgo DB-</i>用于存储用户帐户的Mongo。 </li><li>  <i>Todoapp_profiles-</i>用于存储用户个人资料的Mongo <i>DB</i> 。 </li><li>  <i>身份验证中间件（AuthMW）</i>是一种代理，当访问API函数时，该代理允许通过检查其JWT令牌（由todoapp.base函数发给它的令牌）来验证用户身份验证。 没有令牌或令牌不正确-对API的请求将被拒绝。 </li></ol><br> 我们使用“。” 在功能名称中将它们分成文件夹。 因此，如果您创建一个名为todoapp.newfunction的新函数，则它将自动转到todoapp文件夹，并在其中显示一个名为newfunction的文件夹。 现在，您的功能列表应包含以下设置（参见图片）。 <br><br><img src="https://habrastorage.org/webt/g6/lm/j7/g6lmj7x-0kpguapjdznjmwyywme.png"><br><br><h3>  <font color="#cc0000">您可以跳过，但更好地阅读</font> </h3><br> 原则上可以跳过此段。 是否可以，如果您想了解我们的身份验证服务的工作原理，并且更多地了解Swifty的工作原理。 用Go编写的todoapp.base函数提供基本的身份验证功能，但是没有什么可以阻止您扩展其功能以满足应用程序的需求。 无论您如何更改它，只要不触摸登录和注销，它仍然可以完成其工作。 该函数具有变量SWIFTY_AUTH_NAME，该变量存储名称AuthMW。 函数还需要访问MongoDB和AuthMW本身，它们已在函数属性的“访问”选项卡上注册。 她还具有一个REST API触发器，该触发器具有一个链接，需要访问该链接才能访问该功能。 <br><br>  todoapp.base函数希望您将用户ID和密码作为请求参数传递给它。 密码已加密。 <br><br>  <b>以下是此类查询的示例：</b> <br><br><pre><code class="plaintext hljs">* Sign up: https://api.swifty.cloud:8686/call/012.../signup&amp;userid=user@yourmail.com&amp;password=xxxxxxxx * Sign in: https://api.swifty.cloud:8686/call/012.../signin&amp;userid=user@yourmail.com&amp;password=xxxxxxxx * Log out: https://api.swifty.cloud:8686/call/012.../leave&amp;userid=user@yourmail.com</code> </pre> <br> 例如，如果登录成功（该功能成功验证了所传输的密码），那么您将收到带有JWT令牌的JSON，每次访问启用了身份验证的功能时都需要使用该JSON。  JWT令牌基于承载身份验证方案创建。 有关OAuth 2.0和Bearer方案的更多信息，请<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">点击此处</a> 。 <br><br> 如果身份验证不成功，则调用的函数不会启动，并且请求返回代码401。 <br><br><h3>  <font color="#cc0000">用户资料管理</font> </h3><br> 因此，每个函数都有一个REST API网址，您需要调用该链接才能运行该函数。 要获得身份验证功能的此链接，请打开todoapp.base函数，转到“触发器”选项卡，复制REST API网址并将其另存为AUTH_URL。 再进一步，我们需要将此链接插入到应用程序前端的配置文件中。 <br><br><img src="https://habrastorage.org/webt/ms/8h/0u/ms8h0ul5mcvceacfwr8k8nfsrsq.png"><br><br> 我们还需要todoapp.profiles的API URL，以便我们的应用程序可以管理用户配置文件。 打开此功能，转到“触发器”选项卡，复制REST API网址并将其另存为PROFILE_URL。 <br><br><h3>  <font color="#cc0000">用户头像管理</font> </h3><br> 我们的应用程序还允许您上传用户头像，并演示如何在内置对象存储中存储文件。 用户的图片使用特殊功能上传并存储在内置的对象存储中。 可以通过功能或使用标准的S3 API获得对图片的访问，可以在UI的“对象存储”控制选项卡上获得对其的访问键。 <br><br>  <b>创建图片管理功能：</b> <br><br><ol><li> 转到选项卡功能-&gt;新功能-&gt;从仓库（模板）。 我们将所有功能模板存储在公共git存储库swifty.demo中。 默认情况下应选择此存储库。 </li><li> 选择Avatar管理（python）函数，单击Next，然后输入新的todoapp.avatar函数的名称。 单击创建。 </li><li> 接下来，转到“触发器”选项卡，单击“添加触发器”，选择REST API（URL）。 复制显示的链接并将其另存为PICTURE_URL。 </li></ol><br> 接下来，您需要在对象存储中创建一个存储桶来存储用户图片： <br><br><ol><li> 转到对象存储-&gt;创建存储桶选项卡。 将新的todoappimages存储桶命名。 </li><li> 转到选项卡功能-&gt; todoapp.avatar-&gt;访问-&gt;单击添加，选择对象存储，新创建的todoappimgaes存储桶，然后单击添加。 </li></ol><br> 现在，我们的功能可以访问指定的存储桶。 如此简单，我们不需要在函数内注册对存储桶的任何访问。 我们唯一需要指定的功能是借助环境变量在存储桶中存储图片的函数： <br><br><ol><li> 转到选项卡功能-&gt; todoapp.avatar-&gt;变量，然后单击创建变量。 </li><li> 输入变量名称-BUCKET_NAME及其值-todoappimages。 </li></ol><br><h3>  <font color="#cc0000">任务管理</font> </h3><br> 实际上，我们正在开发一个任务管理应用程序，现在该是时候完成相应功能了。 我们有一个模板，您可以使用它创建一个任务，将其标记为已完成，然后删除该任务。 <br><br>  <b>创建一个函数：</b> <br><br><ol><li> 转到选项卡功能-&gt;新功能-&gt;从仓库（模板）。 </li><li> 选择TODO应用程序函数（python），单击“下一步”，然后输入新的todoapp.tasks函数的名称。 单击创建。 </li><li> 接下来，转到“触发器”选项卡，单击“添加触发器”，选择REST API（URL）。 复制显示的链接并将其另存为TASKS_URL。 </li></ol><br> 接下来，我们需要一个数据库来存储我们的任务。 最简单的选项是MongoDB。 <br><br><ol><li> 转到Mongo数据库-&gt;创建数据库选项卡，然后创建一个名为todoapp_tasks的数据库。 </li><li> 转到选项卡功能-&gt; todoapp.tasks-&gt;访问-&gt;添加并添加新数据库。 </li></ol><br> 现在我们的函数可以访问todoapp_tasks数据库，并且我们可以使用swifty库从该函数访问它，例如： <br><br> <code>db = swifty.MongoDatabase(os.getenv('TASKS_DB_NAME'))</code> <br> <br> 我们只需要使用数据库名称注册一个环境变量： <br><br><ol><li> 转到选项卡功能-&gt; todoapp.tasks-&gt;变量，然后单击创建变量。 </li><li> 输入变量名称TASKS_DB_NAME及其值todoapp_tasks。 </li></ol><br><h3>  <font color="#cc0000">启用功能验证</font> </h3><br> 当我们拥有用于用户身份验证的后端以及组成应用程序后端的功能本身时，我们可以为其启用身份验证，以便只有授权的用户才能访问配置文件，头像和任务管理功能。 <br><br>  <b>如何为某些功能启用令牌验证：</b> <br><br><ol><li> 转到“功能”选项卡，然后选择功能todoapp.tasks和todoapp.avatar。 </li><li> 单击管理身份验证，然后选择todoapp服务，然后单击启用。 </li></ol><br> 现在，将仅对具有使用todoapp.base生成的正确JWT令牌的用户执行todoapp.tasks和todoapp.avatar函数。 <br><br> 完成上述所有操作后，我们的功能列表应如下所示。 <br><br><img src="https://habrastorage.org/webt/hw/37/hs/hw37hsabidgh0yiuc44qt1nyk20.png"><br><br><h3>  <font color="#cc0000">发布申请</font> </h3><br> 让我们处理应用程序的前端。 前端是用vue.js编写的，我们只需要在其配置文件中添加指向我们函数的链接，并使用此更新的配置重建应用程序。 这里的一切都很简单，不需要了解vue.js和JavaScript。 <br><br> 为了重建应用程序，您需要安装node.js。 如果您没有，请使用官方<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">指南</a>进行放置。 如果您有Mac，那么这里有一个很好的指南。 您还需要git将存储库拉到计算机上。 请执行以下操作： <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># git clone https://github.com/swiftycloud/swifty.todoapp</span></span></code> </pre> <br> 之后，转到<code>/swifty.todoapp/src</code>文件夹，然后在您喜欢的编辑器中打开<code>config.js</code>文件。 您需要将其中包含的变量更改为之前保存的变量： <br><br> <code>export const AUTH_URL = "https://api.swifty.cloud/call/991..." <br> export const PROFILE_URL = "https://api.swifty.cloud/call/281..." <br> export const PICTURE_URL = "https://api.swifty.cloud/call/e6a..." <br> export const TASKS_URL = "https://api.swifty.cloud/call/4b1..."</code> <br> <br> 我们还不需要与FB相关的变量。 <br><br> 然后，您需要重新构建应用程序： <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># npm run build</span></span></code> </pre> <br>  ... <br> 完成构建完成。  dist目录已准备好部署。 <br><br> 在构建应用程序之前，还可以在本地对其进行测试： <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># npm run serve</span></span></code> </pre> <br> 并通过浏览器访问它：http：//本地主机：8080 <br><br> 我们使用对象存储来存储应用程序的静态文件。 转到“对象存储”选项卡，创建一个todoapp存储桶，然后从<code>/swifty.todoapp/dist/</code>文件夹<code>/swifty.todoapp/dist/</code>文件上传到该存储桶，并观察文件夹名称（您必须手动创建它们）。 <br><br> 最后一步是发布应用程序。 单击更多-&gt; HTTP服务器设置，然后为您的存储桶启用HTTP服务器。 复制出现的链接并点击链接-这是您的应用程序！ <br><br><img src="https://habrastorage.org/webt/qa/es/lx/qaeslxv7dqgcn9fzbdh4la88rde.png"><br><br> 现在，您可以在其中创建一个帐户并尝试使用它。 如果现在转到功能屏幕，您将看到该功能刚刚启动-用于身份验证，配置文件加载等。 <br><br><h3>  <font color="#cc0000">接下来是什么？</font> </h3><br> 我们展示了一个简单的示例，说明如何使用无服务器来创建应用程序。 我们仍然有许多流行功能的模板，我敢肯定，您对新应用程序有更多想法。 尝试模板，编写您的函数并使您的想法成为应用程序。 <br><br> 当然，如果您对无服务器，特别是Swifty有任何疑问，请联系。 <br><br> 好好享受 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN430296/">https://habr.com/ru/post/zh-CN430296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN430284/index.html">275号移动开发人员的有趣材料摘要（11月12日至18日）</a></li>
<li><a href="../zh-CN430286/index.html">Nintendo Switch海盗游戏的阴暗面的详细信息</a></li>
<li><a href="../zh-CN430290/index.html">尝试预测SpaceX BFR项目的第四次迭代</a></li>
<li><a href="../zh-CN430292/index.html">电子前沿基金会：美国警察车牌网络的性能为0.5％</a></li>
<li><a href="../zh-CN430294/index.html">使用Rust的10个显而易见的好处</a></li>
<li><a href="../zh-CN430300/index.html">带有Go套件的Go on Microservices：简介</a></li>
<li><a href="../zh-CN430302/index.html">有趣的sshd中的ptrace或代码注入简介</a></li>
<li><a href="../zh-CN430304/index.html">轨道上的奇妙前哨</a></li>
<li><a href="../zh-CN430306/index.html">Ilona Mask钻探的无聊公司的第一条隧道</a></li>
<li><a href="../zh-CN430308/index.html">Python内部。 复活节彩蛋</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>