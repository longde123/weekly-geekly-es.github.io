<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ üõå ü•í Ferrugem para desenvolvedor web - in√≠cio r√°pido e v√¥o r√°pido üí± üìõ üî¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! Hoje, quero compartilhar minha experi√™ncia em aprender o idioma e a r√°pida implementa√ß√£o de um projeto de rede de alta carga, usando as t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ferrugem para desenvolvedor web - in√≠cio r√°pido e v√¥o r√°pido</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bitrix/blog/477342/">  Ol√° pessoal!  Hoje, quero compartilhar minha experi√™ncia em aprender o idioma e a r√°pida implementa√ß√£o de um projeto de rede de alta carga, usando as t√£o populares e populares conex√µes de rede ass√≠ncrona, agora sem bloqueio, na nova, bonita, elegante e muito eficaz linguagem Rust. <br>  Darei √™nfase especial no post a uma explica√ß√£o r√°pida e clara dos recursos da linguagem e da plataforma para especialistas que possuem ampla experi√™ncia em desenvolvimento web, porque eu mesmo sou.  H√° um equ√≠voco de que a curva de entrada no Rust seja muito, muito √≠ngreme.  Mas vou mostrar que isso est√° longe de ser o caso.  Despeje o caf√© e dirigi! <br><a name="habracut"></a><br><h3>  Uma Breve Hist√≥ria dos Valores de Programa√ß√£o </h3><br>  Para que o material fique bem na cabe√ßa e no cora√ß√£o, √© bom lembrar brevemente o que as pessoas queriam fazer na programa√ß√£o nos √∫ltimos 50 anos e com o que acabaram.  Sem ofensa, apenas opini√£o subjetiva pessoal e holivar, apoiados por 20 anos de experi√™ncia em desenvolvimento. <br><br><h4>  Idiomas de baixo n√≠vel: C, C ++ </h4><br>  √â claro que voc√™ pode escrever o programa imediatamente na forma de n√∫meros em c√≥digos de m√°quina e muitos o fizeram no ZX Spectrum, BK0010-01 e no PC - o c√≥digo acaba sendo muito r√°pido :-) Mas somos pessoas, muita informa√ß√£o n√£o cabe em nossas cabe√ßas, estamos distra√≠dos e, portanto, distra√≠dos. mesmo a inven√ß√£o do assembler n√£o ajudou muito - c√≥digo em um n√≠vel t√£o baixo √© muito raramente escrito e com muita precis√£o e, provavelmente, se voc√™ n√£o estiver desenvolvendo drivers, microcontroladores ou sistemas embarcados complicados, isso n√£o ser√° √∫til na vida. <br><img src="https://habrastorage.org/webt/gs/zf/28/gszf28trxey6oz6aag_dgh4u_lu.jpeg"><br><br>  No in√≠cio dos anos 70, o Bell Labs inventou a linguagem C, que se enraizou gra√ßas √† sintaxe lac√¥nica e a abstra√ß√µes muito "baratas", quase se tornando um "montador port√°til".  √â claro que se voc√™ tomar uma tonsura, escrever por 10 anos nas noites C, n√£o comer carne, rezar e n√£o se distrair com as redes sociais e o sexo justo, poder√° escrever programas muito √∫teis e r√°pidos, como o <a href="https://www.gnu.org/">GNU</a> demonstra com eloqu√™ncia, excelentes jogos produtivos, amada, mas n√£o alternativa na qualidade do Windows, e muitos outros exemplos podem ser dados. <br>  Mas o outro lado da moeda est√° constantemente se fazendo sentir - abrindo regularmente buracos na seguran√ßa (uma ind√∫stria inteira para "buracos no software" foi criada), causada por buracos no pr√≥prio conceito da linguagem C - o compilador √© como um touro irrespons√°vel, com poder incr√≠vel, orgasmo intenso e pouca mem√≥ria.  Qualquer neglig√™ncia - e voc√™ n√£o pode simplesmente abandonar o programa (desreferenciar um ponteiro nulo, liberar o ponteiro duas vezes, sair da matriz), mas arruinar irreparavelmente os dados e n√£o not√°-los por um longo tempo at√© que os clientes comecem a ligar e quando for tarde demais ("comportamento indefinido", diferente do compilador para o compilador). <br><br>  Bj√∂rn Straustrup apenas confundiu ainda mais a situa√ß√£o no in√≠cio dos anos 80, acrescentando recursos de POO a C. Apesar de sua grande popularidade, o C ++, em geral, √© visto como uma s√©rie de experimentos de programa√ß√£o, como tal, com diferentes resultados de sucesso, incluindo  letal.  √Äs vezes at√© parece que n√£o havia sentido no C ++ desde o in√≠cio, ou foi gradualmente perdido, dando origem a um monte de conceitos objetivamente complicados e conflitantes, que est√£o se tornando cada vez mais a cada novo padr√£o.  Apesar do excelente objetivo de "abstra√ß√µes de custo zero", permitindo obter c√≥digo r√°pido, criar uma solu√ß√£o confi√°vel, como em C, s√£o necess√°rias as seguintes condi√ß√µes: <br><ul><li>  experiente, da palavra ‚Äúmuito‚Äù, equipe (anos de pr√°tica, ‚Äúmonges‚Äù de programa√ß√£o) </li><li>  bom analisador de c√≥digo est√°tico </li><li>  departamento de testes (no c√≥digo pode haver falhas deixadas por um compilador irrespons√°vel, que pode ser sentido por um longo tempo) </li><li>  requisitos acordados por todos os membros da equipe que s√£o monitorados com cuidado (ponteiros brutos, encapsulamento rigoroso, a disciplina mais severa para nomear vari√°veis, inicializar objetos etc. n√£o s√£o usados) </li></ul><br><br>  √â claro que a conformidade com esses requisitos, especialmente no contexto de uma crescente necessidade comercial de um "c√≥digo que funcione sem surpresas repentinas", √© muito cara.  O c√≥digo nesses projetos √© escrito por um longo tempo, precisa ser testado por um longo tempo e com cuidado, mas, √†s vezes, sem C / C ++, antes da inven√ß√£o do Rust, era realmente dif√≠cil de fazer. <br><br>  Mais uma vez, um resumo do C / C ++ - temos um compilador poderoso, mas "irrespons√°vel", com "abstra√ß√µes atuais", o que ajuda muito pouco o desenvolvedor.  Como resultado, todos os problemas s√£o passados ‚Äã‚Äãpara os ombros do programador.  Se pelo menos um programador da equipe n√£o tiver experi√™ncia, n√£o for muito cuidadoso e n√£o souber todas as sutilezas do compilador (na verdade, ningu√©m conhece todas as sutilezas e os usu√°rios as encontrar√£o mais tarde) - aguarde o problema.  Mas ent√£o o programa funciona rapidamente e provavelmente corretamente :-) Isso, √© claro, gerou todo um mercado de ‚Äúmuletas‚Äù - analisadores est√°ticos, que, como se viu, deveriam ser pagos pelo Cliente.  Surge a pergunta - n√£o seria poss√≠vel escrever um compilador mais rigoroso e seguro que ajude o desenvolvedor e d√™ origem a programas sem surpresas e brechas de seguran√ßa de baixo n√≠vel? <br><br><h4>  Java, C #, Kotlin </h4><br>  A situa√ß√£o com controle francamente fraco do "comportamento indefinido" e requisitos muito altos para desenvolvedores em C / C ++ deu origem ao desejo de criar um ambiente de desenvolvimento seguro, incluindo  para a Internet, acess√≠vel √† maioria dos participantes.  Ent√£o, no final dos anos 90, o Java apareceu. <br>  Em princ√≠pio, agora qualquer pessoa com um n√≠vel diferente de treinamento pode escrever tudo e qualquer coisa, e TRABALHOU e n√£o foi inclu√≠do no programa - n√£o havia "brechas" de baixo n√≠vel em seguran√ßa e falhas espont√¢neas (quase, mas elas j√° foram causadas por bugs) em uma m√°quina virtual e corrigida centralmente).  Havia apenas ‚Äúbrechas‚Äù l√≥gicas ou c√≥digo lento oculto (nascido da ignor√¢ncia de algoritmos, do conceito de custo algor√≠tmico e da desacelera√ß√£o quando o volume de dados aumentava), que n√£o era mais t√£o assustador e permite que voc√™ crie programas rapidamente e, se necess√°rio, reescreva pequenos peda√ßos com uma equipe qualificada de C / C C ++. <br>  As coisas interessantes e valiosas que o mundo Java trouxe s√£o as seguintes: <br><ul><li>  o c√≥digo foi escrito uma vez para uma m√°quina virtual que funciona em qualquer arquitetura (windows, linux, mac) </li><li>  o desenvolvedor n√£o gerencia mais a mem√≥ria diretamente, como em C / C ++ - isso √© passado para os ombros do "coletor de lixo";  isso elimina o risco de comportamento indefinido, corrup√ß√£o discreta de dados e poss√≠veis falhas de seguran√ßa de baixo n√≠vel </li><li>  o c√≥digo √© compilado rapidamente, enquanto o programa est√° em execu√ß√£o (compila√ß√£o Just_In_Time), porque  sabe-se que apenas uma pequena parte √© ativada e frequentemente executada no programa; portanto, n√£o faz sentido compilar tudo </li><li>  ficou mais f√°cil escrever c√≥digo multiencadeado eficiente, como  o modelo de mem√≥ria foi rigorosamente especificado (muito mais cedo do que em C ++), mas mais ainda, nem todos os problemas com a "confiabilidade l√≥gica de v√°rios encadeamentos" foram resolvidos (conflitos, por exemplo, ou corridas de dados ainda eram poss√≠veis) </li></ul><br><br>  Obviamente, o advento de uma plataforma t√£o amig√°vel tornou poss√≠vel escrever muitos programas √∫teis e in√∫teis, dos quais a empresa imediatamente se aproveitou.  E o suporte √† compatibilidade com vers√µes anteriores em Java por 15 anos ou mais tornou a tecnologia t√£o popular no mundo corporativo. <br><br>  Sim, eu tamb√©m tenho analogias com mulheres sem cerveja e borracha. <br><br>  No entanto, longe de imediato, os seguintes problemas surgiram em Java: <br><ul><li>  devido ao ‚Äúburaco‚Äù l√≥gico no sistema de digita√ß√£o, que foi herdado do C / C ++, o tipo ‚ÄúNulo‚Äù entrou no Java, que at√© hoje causa muitos problemas e constantemente leva ao travamento de programadores ‚Äún√£o muito experientes‚Äù que n√£o conhece o tipo <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html">opcional</a> e n√£o est√° interessado em m√¥nadas da programa√ß√£o funcional </li><li>  Projetos Java, √†s vezes trabalhando um pouco mais devagar, exigem ordens de magnitude mais RAM que C / C ++ necess√°rias para o coletor de lixo (temos v√°rios projetos que consomem dezenas ou centenas de gigabytes de RAM);  isso geralmente n√£o √© um problema direto, pois  Os pre√ßos da RAM est√£o caindo, mas o "sedimento permaneceu" </li><li>  Apesar da compila√ß√£o jit e dos grandes investimentos em acelerar o coletor de lixo (que muitos novos aparecem regularmente e dizem constantemente: ‚Äútente um novo GC, √© muito melhor‚Äù), por cerca de 20 anos, alguns projetos Java altamente carregados v√™m trabalhando com pausas regulares por v√°rios segundos, que n√£o pode ser removido de forma alguma (existe uma coleta de lixo for√ßada e, como os parafusos no GC n√£o se torcem, o coletor de lixo simplesmente n√£o tem tempo para limpar tudo, mesmo trabalhando em paralelo e devorando mais recursos do que o pr√≥prio programa) </li><li>  sabe-se que, √†s vezes, os aplicativos Java GUI congelam e desaceleram, causando raiva dos usu√°rios, devido √† mesma coleta de lixo e n√£o h√° esperan√ßa e n√£o se espera </li><li>  a sintaxe da linguagem √© muito detalhada e redundante (voc√™ precisa escrever e ler as palavras "fun√ß√£o p√∫blica est√°tica" em vez de, por exemplo, "pub fn" ou "def"), for√ßando algumas vezes a quebrar os dedos nas unhas e causar dor objetiva e sangramento dos olhos </li><li>  uma queda acentuada nos requisitos para o n√≠vel de qualifica√ß√µes dos desenvolvedores e uma curva de entrada suficientemente baixa deram origem a muitos c√≥digos de "grau de frescura estranho", que constantemente se fazem sentir ao longo da minha vida com um fedor memor√°vel </li></ul><br><br>  Ap√≥s a leitura, deve ficar claro que tudo n√£o pode ser gravado em Java, ser√° gravado lentamente, depois desacelera regularmente e fica travado por um segundo sob carga, √†s vezes ‚Äúconsome‚Äù muita RAM (geralmente pelo menos metade da RAM do servidor √© consumida), jogos produtivos Voc√™ tamb√©m n√£o ser√° capaz de faz√™-lo, mas algumas l√≥gicas de neg√≥cios que n√£o exigem muito desempenho e RAM, especialmente as multiencadeadas, s√£o bastante poss√≠veis, √∫teis e, portanto, vemos tanta popularidade da tecnologia no mundo corporativo.  E n√≥s mesmos usamos Java regularmente e ativamente para os servi√ßos da empresa. <br><br><h4>  C #, Scala, Kotlin </h4><br>  ‚ÄúE quando ser√° a Ferrugem?‚Äù - espere um minuto, voc√™ precisa de um pouco mais de prepara√ß√£o para comer esse doce caqui.  Se voc√™ n√£o falar sobre os recursos de outras tecnologias, n√£o entender√° por que o Rust apareceu e por que √© t√£o <a href="https://www.rust-lang.org/production">popular e procurado</a> . <br><br>  Ent√£o, tentando tornar o Java melhor e mais progressivo, a Microsoft, na pessoa do autor TurboPascal / Delphi, no in√≠cio do zero surgiu o C # e o conceito de .NET.  Objetivamente, de acordo com muitos especialistas respeit√°veis, e nas salas de fumantes dos desenvolvedores, o ‚ÄúC #‚Äù √© mais sexy que o Java, embora, √© claro, at√© agora, apesar do Mono, esteja fortemente ligado √† Microsoft com todos os influxos e consequ√™ncias :-) <br><br>  Scala √© sem d√∫vida um grande passo em frente, pois  a linguagem, √© claro, acabou sendo cientificamente obscura e sofisticada, retirando muitas coisas √∫teis e in√∫teis do mundo da programa√ß√£o funcional.  Mas, de alguma forma, algo n√£o est√° muito claro com a popularidade.  No entanto, o <a href="https://ru.wikipedia.org/wiki/Apache_Spark">Apache Spark √©</a> realmente bom e popular, nada a dizer. <br><br>  Kotlin √© popular porque  torna o Java mais eficiente e f√°cil para iniciantes, especialmente em plataformas m√≥veis que n√£o t√™m tempo para estudar seriamente a programa√ß√£o :-) <br><br>  Mas o principal problema em C # (na plataforma .NET), bem como em Scala, Kotlin e em outras linguagens da JVM - permaneceu.  Coletor de lixo, Carl, criando uma carga percept√≠vel no servidor e interrompendo a execu√ß√£o do c√≥digo por segundos sob requisitos de carga e glut√£o de RAM!  E quantas outras linguagens com um coletor de lixo e compila√ß√£o de jits n√£o surgir√£o, esses problemas permanecer√£o e ainda n√£o h√° esperan√ßa, mesmo na teoria. <br><br><h4>  Script </h4><br>  "Mas e o PHP?".  Sim, agora vamos falar sobre scripts.  Parece, por que ele est√°?  Por volta do final dos anos 80, ficou √≥bvio que, se voc√™ precisar resolver rapidamente um problema usando c√≥digo, n√£o necessariamente r√°pido demais, e for seguro, sem comportamento indefinido e falhas de baixo n√≠vel, poder√° escrever um script.  Os scripts foram escritos antes, em bash, perl, awk, mas descobriu-se que em python voc√™ pode escrever scripts grandes, grandes, especialmente cient√≠ficos, e por anos! <br><br>  Lua encontrou seu nicho no gamedev e machine learning ( <a href="http://torch.ch/">Torch</a> ), JavaScript - no desenvolvimento da Web no lado do navegador e no <a href="https://ru.wikipedia.org/wiki/Node.js">servidor</a> (eles ainda sabem que a <a href="https://www.rust-lang.org/static/pdfs/Rust-npm-Whitepaper.pdf">autoriza√ß√£o na infra-estrutura "npm" do Node.js. √©</a> reescrita no Node.js. Golang na ferrugem?).  Python - em aprendizado de m√°quina e an√°lise de dados, bem como em scripts de sistema.  E PHP - lida perfeitamente com as tarefas do servidor para desenvolvimento na web. <br><img src="https://habrastorage.org/webt/sj/eg/0e/sjeg0ebs9dgz9eb42wsglwralv8.jpeg"><br><br>  As vantagens do script s√£o √≥bvias: <br><ul><li>  C√≥digo seguro e eficiente, sem comportamento indefinido e brechas de seguran√ßa de baixo n√≠vel, usando algoritmos e estruturas de dados populares (listas, dicion√°rios, filas), √© criado em literalmente minutos </li><li>  Um in√≠cio muito r√°pido e uma curva de entrada suave.  Demora v√°rios dias para descobrir e escrever um script python √∫til, alterar a l√≥gica do nginx por meio de scripts em Lua ou fazer integra√ß√£o de lojas online no PHP </li><li>  Se voc√™ escrever scripts de maneira disciplinada, observando o CodeStyle e o mais rigorosamente poss√≠vel, poder√° resolver rapidamente problemas complexos e criar grandes produtos de software: um grande n√∫mero de bibliotecas cient√≠ficas em python, sistemas de gerenciamento de neg√≥cios e sites em PHP, uma plataforma de rede neural Torch em LuaJit, scripts de jogos de maneira muito jogos famosos e populares, etc. </li><li>  Alguns tipos de programa√ß√£o multithread, onde E / S √© o gargalo, s√£o resolvidos com efici√™ncia em python.  E usando os recursos mais recentes de python com futuros como "ass√≠ncrono / aguardado", √© ainda mais f√°cil resolver os problemas de processamento de um grande n√∫mero de soquetes de rede </li><li>  Muito elegantemente, a tarefa de processar assincronamente um grande n√∫mero de soquetes, mesmo sem multithreading, foi resolvida no Node.js imediatamente </li><li>  Crie p√°ginas da web, use in√∫meras bibliotecas unix, v√° para o banco de dados ainda √© f√°cil e conveniente usando PHP e produtos baseados nele </li><li>  Em python, PHP, JavaScript, √© muito conveniente testar hip√≥teses e criar prot√≥tipos em horas, n√£o meses </li><li>  Para an√°lises e processamento de dados, √© tradicionalmente muito conveniente usar o python / R em conjunto com um grande n√∫mero de bibliotecas de alta qualidade (pandas, scikit-learn, seaborn, matplotlib ...) </li></ul><br><br>  No entanto, voc√™ n√£o pode conhecer as poss√≠veis desvantagens do script: <br><ul><li>  √Äs vezes, um n√≠vel de entrada baixo e velocidade de script muito r√°pida, na aus√™ncia de controle adequado sobre os desenvolvedores, criam toneladas de c√≥digo ineficiente e de dif√≠cil manuten√ß√£o em qualquer plataforma </li><li>  A aus√™ncia de um compilador, sistema de tipos e tipagem est√°tica requer uma verifica√ß√£o din√¢mica de par√¢metros passados ‚Äã‚Äãpara fun√ß√µes e m√©todos para tipos e cobertura de c√≥digo de alta qualidade com autotestes.  Caso contr√°rio, qualquer altera√ß√£o no c√≥digo pode interromper o programa e o cliente, e n√£o o desenvolvedor, ser√° o primeiro a saber (sim, eu sei sobre o TypeScript, mas s√£o muletas e cataplasmas mortos) </li><li>  Objetiva e obviamente, em idiomas sem digita√ß√£o e compila√ß√£o est√°ticas, onde muitas coisas acontecem em tempo de execu√ß√£o, voc√™ n√£o pode usar in√∫meras otimiza√ß√µes e, portanto, em algumas tarefas, os scripts funcionam com ordens de magnitude mais lentas e consomem muitas vezes mais recursos.  Apesar das tentativas de implementar a compila√ß√£o jit em python (pypy), PHP (hhvm), JavaScript (tradu√ß√£o para c√≥digo de m√°quina, wow, Node.js v8), LuaJIT - n√£o nos enganemos: tudo isso parece muletas pouco eficientes.  O motivo √©, e deve ser entendido de uma vez por todas, que, devido √† digita√ß√£o fraca deliberada das linguagens, √© improv√°vel que os scripts consigam escrever um tempo de execu√ß√£o eficaz, aproximando-se rapidamente de Java / C # com muito mais for√ßa. </li><li>  E, em python, parece que nunca haver√° multithreading eficiente, como em Java / C #, devido ao GIL </li></ul><br><br>  No entanto, desde  na maioria dos aplicativos de neg√≥cios, incluindo  sistemas de gerenciamento de sites, CRM, etc.  Como a maior parte do tempo de execu√ß√£o do c√≥digo √© gasta em consultas ao banco de dados, a vantagem do jit Java / C # √© profundamente nivelada pela velocidade de escrever solu√ß√µes em PHP / python / JavaScript e, pessoalmente, para criar aplicativos da web, selecionarei 10 a 20 linhas no PHP que 10.000 strings e um monte de mi√∫dos em Java / Spring.  E o PHP7, de alguma forma, com overclock para rodar mais r√°pido que python3 ;-) <br><br>  Que conclus√£o pode ser feita aqui?  N√£o √© necess√°rio resolver todos os problemas, como agora √© popular, apenas por script - em alguns casos, √© razo√°vel usar outra ferramenta mais adequada, se houver boas raz√µes para isso: <br><ul><li>  cargas de rede muito altas e multithreading "extremo", milhares - dezenas de milhares de soquetes de rede etc. </li><li>  restri√ß√£o ao uso de RAM e hardware </li><li>  processamento e computa√ß√£o intensivos de dados, matrizes com milh√µes de entidades, GPUs (embora python / numpy / pandas possam ajudar aqui) </li></ul><br><br>  Muitas vezes, na empresa, praticamos essa abordagem: <br><ul><li>  tome uma decis√£o r√°pida em PHP / python / JavaScript / Node.js, inicie a batalha e comece a resolver problemas do cliente </li><li>  gerimos funcionalidades, oportunidades, melhoramos servi√ßos </li><li>  em casos raros, por experi√™ncia, geralmente n√£o antes de alguns anos, alguns dos servi√ßos j√° est√°veis ‚Äã‚Äãem funcionalidade s√£o reescritos em C / C ++ / Java / Golang / Rust </li></ul><br>  Portanto, √© melhor come√ßar, via regra, com scripts, iniciar uma batalha e, se voc√™ precisar diretamente, precisar√° pegar outras ferramentas e isso ocorre, geralmente muito suavemente e sem riscos. <br><br><h4>  Programa√ß√£o Funcional, Lisp, Haskell, F # </h4><br>  Muitos, durante toda a carreira de desenvolvedor, nunca v√™m aqui, mas em v√£o.  √â extremamente √∫til entender por que o FP (programa√ß√£o funcional) apareceu e por que em algumas √°reas √© t√£o popular. <br><br>  Vou explicar de forma simples.  Existe um problema t√£o insol√∫vel em matem√°tica como o <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B5%25D0%25BC%25D0%25B0_%25D0%25BE%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B8">"problema de parada"</a> .  Se voc√™ o colocar em palavras muito simples e bastante rigorosas, mas estiver claro, n√£o ser√° poss√≠vel criar um algoritmo que prove que o programa funcionar√° sem erros.  Porque  Porque, inicialmente, as pessoas come√ßaram a programar de forma agressiva e imperativa, usando: <br><ul><li>  vari√°veis ‚Äã‚Äãmut√°veis </li><li>  ciclos com condi√ß√µes </li><li>  efeitos colaterais </li></ul><br>  E eles come√ßaram a cometer erros.  Vemos isso agora, observando um grande n√∫mero de bugs na Web e em aplicativos para desktop e dispositivos m√≥veis.  E n√£o importa como voc√™ cubra o c√≥digo com autotestes, os bugs ainda continuam vazando, se espalhando pelo ch√£o e rindo. <br>  Para parar esse pesadelo do surgimento de softwares de bugs e impiedosos, no final dos anos 50, <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2581%25D0%25BF">surgiu</a> uma dire√ß√£o da programa√ß√£o funcional e da <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2581%25D0%25BF">linguagem Lisp</a> .  Agora, essa fam√≠lia de idiomas representa, mais ou menos adequadamente, <a href="https://ru.wikipedia.org/wiki/Haskell">Haskell</a> . <br><br>  Apesar do fato de que um grande n√∫mero de poss√≠veis erros no c√≥digo s√£o realmente eliminados devido a: <br><ul><li>  <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25B5%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D1%2582%25D0%25B8%25D0%25BF_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585">tipos de dados alg√©bricos</a> e correspond√™ncia de padr√µes neles </li><li>  a aus√™ncia de ciclos (apenas por recurs√£o) e vari√°veis ‚Äã‚Äãmut√°veis ‚Äã‚Äãao alcance de um bra√ßo estendido (√© poss√≠vel encontrar muletas sobre como contornar isso, √© claro) </li><li>  digita√ß√£o est√°tica muito estrita e, ao mesmo tempo, sa√≠da autom√°tica muito conveniente dos tipos <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%258B%25D0%25B2%25D0%25BE%25D0%25B4_%25D1%2582%25D0%25B8%25D0%25BF%25D0%25BE%25D0%25B2">Hindley-Milner</a> </li><li>  caracter√≠sticas muito poderosas, com a divis√£o em "puro" e "com efeitos colaterais", com possibilidade de <a href="https://wiki.haskell.org/Currying">uso parcial</a> </li><li>  suporte de programa√ß√£o simult√¢nea seguro </li><li>  suporte para combinadores atrav√©s de m√¥nadas para todas as ocasi√µes (mais sobre isso na se√ß√£o Ferrugem) </li></ul><br><br> Haskell       ¬´¬ª ‚Äî     ,  ,  ,             : <a href="https://en.wikipedia.org/wiki/Category_theory"> </a> .    Haskell    ¬´¬ª,      ,    ,    ,        .          Haskell    . <br><br> , ,      ‚Äî  Haskell ,  ,  ,              Java/C#. <br><br>    ,     . Haskell  ,   , ,     ,      .  ,          ¬´¬ª   ‚Äî  Haskell    . <br><br><h4>  ¬´C/C++¬ª ‚Äî Golang, D </h4><br>  ,    ,      C/C++ (,         Forth). <a href="https://losst.ru/pochemu-linus-torvalds-ne-lyubit-c"> </a>    C++  ,       ,         <a href="https://wiki.dlang.org/Language_History_and_Future">   D</a> (   ‚Äî    ,     ). <br><br> ,       -    /C++    c  <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D1%2583%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2580%25D0%25B5%25D1%2581%25D1%2583%25D1%2580%25D1%2581%25D0%25B0_%25D0%25B5%25D1%2581%25D1%2582%25D1%258C_%25D0%25B8%25D0%25BD%25D0%25B8%25D1%2586%25D0%25B8%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">RAII</a>     ,      .     2009   Google   <a href="https://en.wikipedia.org/wiki/Go_(programming_language)">Golang</a> . <br>     ,  Golang         , , ,       . Golang         Java/C# (     )  ,  <a href="https://stackoverflow.com/questions/7823725/what-kind-of-garbage-collection-does-go-use"> </a> ‚Ä¶  ,   Golang: <br><ul><li>    ¬´green threads¬ª ( ),       python </li><li>    ,  ,  (,  Docker ) :-) </li></ul><br>       .   Node.js  python  . <br><br> , Golang        , Google vs Sun/Oracle,   ,   ,  ,    :-) ,   ¬´  Java/C#¬ª         ,       ‚Äî    .  Docker  Golang         .      Golang ‚Äî            Java/C#,     ,   . <br><img src="https://habrastorage.org/webt/m7/1e/sc/m71escomzu8jtn2z-xrre4vyq5g.jpeg"><br><br>     , , <a href="https://oxozle.com/2017/05/10/sravnenie-arc-i-garbage-collector/">Swift</a> , c ¬´ ¬ª     .       macOS. <br><br><h3>   ‚Äî Rust! </h3><br>    ,      ,   40-50      , ,         ,   ¬´zero-cost¬ª , , -  -  :-)     , ,    (Java/C#),   ,    (C/C++),   -,         ‚Äî  .         ,     ? <br><br>  ‚Äî .  , , ,     50      ,    2010   Mozilla Research.   ,    : <br><ul><li>  ¬´zero-cost¬ª  ( C/C++    ), ..       ,   ,   ------ <a href="https://doc.rust-lang.org/stable/book/ch13-00-functional-features.html"></a>  ¬´  ¬ª (,   ,       ) </li><li>     <a href="https://doc.rust-lang.org/stable/cargo/">cargo</a> ,        </li><li>       (* ‚Äî     ):    ,     ‚Äî        ¬´   ¬ª,    , , ,    </li><li>   ,   ,                 (  ,      ,         GC , -  runtime,     ) </li><li>         -,   Null (!),                 </li><li>     Haskell  pattern-matching  ,                Enumeration (Golang, ,       ) </li><li>           (   Java,   ) </li><li>        ( Golang   ‚Äî  ;  Java/C#/Erlang  ..    ,    ) </li><li> <a href="https://doc.rust-lang.org/stable/book/ch19-06-macros.html"></a>    ,      (   C/C++) </li></ul><br><br> ,   ,    -.    ?  !      ,       50 . , , ¬´¬ª    ,                ,  . <br><br> Rust    ¬´¬ª , ,        Haskell   . <br>  Rust    , , , Java :-) ‚Äî  Nulls,     pattern-matching  ,    generics  traits     .      .    ,    ,         , ¬´  Haskell¬ª,     . <br><br>      . <br><br><h4>       ? </h4><br>   !       , ¬´¬ª (¬´ownership¬ª)       .     ¬´  ¬ª ( ¬´lifetime¬ª,   Rust book,    ),  <a href="https://doc.rust-lang.org/stable/book/ch04-01-what-is-ownership.html">  </a> (   ,    ). <br>     /,            .     /,             . <br>            C++,   -  move-.    ,       rust   ,      . <br><br><h4>   zero-cost ? </h4><br>       ,      traits,    .   , ,   Golang.        , , -     pattern-matching,      (    Golang,  ).  /         .        :         .      <a href="https://doc.rust-lang.org/stable/book/ch04-02-references-and-borrowing.html"></a> (¬´borrowing¬ª).      ,      (  ¬´read-write locks¬ª,  ).  , ,        ,        ,    . <br>           <a href="https://doc.rust-lang.org/stable/book/ch04-03-slices.html">slice</a> ,  , , .    ‚Äî   ¬´ ¬ª , ,            ;   ,           . <br><br><h4>     </h4><br>       : <br><ul><li>  ,  <a href="https://doc.rust-lang.org/stable/book/ch03-01-variables-and-mutability.html">   </a> </li><li>     (   ,      <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">  </a> ) </li><li>      ,   ---,    <a href="https://doc.rust-lang.org/stable/book/ch13-04-performance.html">  </a> </li><li>   ,       ,    ,          </li></ul><br><br>   ,           ( ,  )     <a href="https://en.wikipedia.org/wiki/Substructural_type_system"> </a>      ‚Ä¶ .                 / ,    C/C++      .       . <br><br><h4>   </h4><br>               ,      - ,     -    .  -  ,    .       Sync/Send,    ,       :  ,   , ,   . <br><br>         ,         ,       1-2         futures  <a href="https://tokio.rs/">  </a> .   ,   Node.js  python  async/await,      ,          .    ,    ? <br><br><h4>  unit    </h4><br> ,         unit           . <a href="https://doc.rust-lang.org/stable/book/ch11-00-testing.html">    </a>   . <br><br><h4>    ‚Äî cargo </h4><br>    Java, ¬´Maven   <a href="https://doc.rust-lang.org/stable/cargo/">cargo</a> ¬ª     ,     :  ,    . , ,   ,   . <br><br><h4> Heap   </h4><br>  ,        ,           heap. ,    ,       ( )  ¬´  ¬ª ( ¬´lifetime¬ª).    ,     <a href="https://doc.rust-lang.org/stable/book/ch15-00-smart-pointers.html"> </a> ( Swift).     ,     ‚Äî  ,    heap              .    ‚Äî         ,      . <br><br><h4>      </h4><br>    ,     , ,         . ,    (2   )      , , ,      ,   <a href="https://tokio.rs/">   </a> , <a href="https://rust-lang-nursery.github.io/rust-cookbook/cli/arguments.html"></a>       <a href="https://lib.rs/crates/rusoto_sqs">AmazonWebServices</a>    c tls/ssl,            . <br> ,  , ,  ,      , -   .        <a href="https://doc.rust-lang.org/stable/book/ch10-03-lifetime-syntax.html">¬´  ¬ª ( ¬´lifetimes¬ª)</a>   . <br> ,            .    IntelliJ <a href="https://intellij-rust.github.io/">   rust</a> ,        .      Notepad++ ‚Äî          . <br><br><h4>     Rust </h4><br><ul><li> Entenda que voc√™ realmente precisa escrever um c√≥digo do sistema muito r√°pido, trabalhando sob altas cargas e consumindo um m√≠nimo de recursos e sem sobrecarga, como um coletor de lixo.  Caso contr√°rio, escreva um script em python / PHP / Node.js e retorne √† tarefa ap√≥s 2-3 anos (em 97% dos casos, voc√™ n√£o precisa retornar). </li><li>  N√£o tenha medo da ferrugem.  O principal destaque da linguagem √© um compilador muito inteligente e matematicamente rigoroso que N√ÉO PERCA c√≥digo perigoso e incorreto.  Por tentativa e erro, evitando cantos afiados, voc√™ aprender√° a programar usando o compilador de maneira estrita e segura :-) </li><li>  Comece a aprender o idioma com um " <a href="https://doc.rust-lang.org/stable/book/title-page.html">livro Ferrugem</a> ".  Um livro bonito e sexy, f√°cil de ler e divertido de ler.  Mas √© melhor l√™-lo duas vezes, "resolvendo" todos os exemplos. </li><li>  O " <a href="https://rust-lang-nursery.github.io/rust-cookbook/">livro de receitas da ferrugem</a> " ajuda <a href="https://rust-lang-nursery.github.io/rust-cookbook/">muito</a> .  Tamb√©m √© desej√°vel "resolv√™-lo" e ver como o c√≥digo funciona, senti-lo. </li><li>  H√° literatura sobre o Rust para usu√°rios avan√ßados, como o <a href="https://doc.rust-lang.org/stable/nomicon/">Rustonimicon</a> , mas n√£o recomendo me <a href="https://doc.rust-lang.org/stable/nomicon/">preocupar</a> com coisas t√©cnicas realmente complicadas desnecessariamente. </li></ul><br><img src="https://habrastorage.org/webt/o7/tb/h4/o7tbh4gcbhpj467i9pkm7muais4.jpeg"><br><br>  Entenda mais uma vez - para dominar a tecnologia, voc√™ precisa come√ßar a escrever um c√≥digo √∫til para a empresa.  O compilador Rust √© t√£o inteligente que oferece garantias (na verdade, √© muito importante, o compilador C ++ n√£o sabe como faz√™-lo) e n√£o compila c√≥digo perigoso / com danos √† mem√≥ria, ent√£o experimente o quanto quiser e voc√™ obter√° o c√≥digo r√°pido e seguro e, ainda melhor, come√ßar√° a programar: - ) <br><br><h4>  Detalhes de implementa√ß√£o do projeto </h4><br>  Vou revelar um pequeno detalhe do projeto.  O Amazon SQS derrama centenas de pacotes de dados por segundo.  A fila √© lida, analisada localmente pelos trabalhadores, cada mensagem √© processada pelo broker e redirecionada para outro servidor externo.  Existem v√°rios servidores externos.  Inicialmente, a solu√ß√£o foi implementada por meio de script: o script, iniciando um processo no sistema operacional, lendo mensagens, processado e enviado pela rede.  Em v√°rios servidores de ferro poderosos (8 n√∫cleos, 16 GB de RAM), centenas de scripts foram lan√ßados (em cada um!), Lendo simultaneamente no SQS, processando e enviando dados.  Simples, confi√°vel, mas a ingest√£o de ferro come√ßou a incomodar.  O custo do ferro estava aumentando constantemente. <br><br>  O Rust usou principalmente bibliotecas e m√≥dulos padr√£o de carga: <br><ul><li>  rusoto_sqs - para trabalhar com o Amazon Web Services, sem perguntas, funciona conforme necess√°rio imediatamente </li><li>  ferrolhos - para tls, incl.  intera√ß√µes com os servi√ßos TLS do Google, Apple e o uso de certificados de clientes </li><li>  gancho de sinal - para interceptar kill e levar ao final da transa√ß√£o para enviar dados </li><li>  futuros, tokio-rustls - trabalho ‚Äúpregui√ßoso‚Äù, multithread e ass√≠ncrono com soquetes TLS de rede, ala Node.js </li><li>  clap - analisando argumentos da linha de comando </li><li>  serde_json - forma√ß√£o json, nada de interessante aqui </li></ul><br><br>  Infelizmente, n√£o foi sem o uso de blocos ‚Äúinseguros‚Äù e ‚Äústd :: mem :: transmute‚Äù - a biblioteca padr√£o n√£o conseguiu encontrar ferramentas para analisar dados bin√°rios em √°rvores. <br><br>  Principalmente, se voc√™ pode chamar assim, "plugging" aconteceu na compila√ß√£o - as bibliotecas n√£o foram compiladas no CentOS6 por causa do "assembler desatualizado" nos binutils, mas n√£o houve problemas no CentOS7. <br><br>  A impress√£o geral √© que o desenvolvimento no Rust se parece mais com ‚Äúscripts estritos‚Äù do que com a programa√ß√£o do sistema, n√£o muito mais que o script ou o desenvolvimento da Web, tanto em termos de recursos quanto de teste.  Nesse caso, compila√ß√£o est√°tica estrita, aus√™ncia de um coletor de lixo e tipos de dados algebricamente. <br><br>  O sentimento geral √© muito positivo.  Ainda assim, em vez de v√°rios servidores de ferro (8 n√∫cleos, 16 GB de RAM), o problema come√ßou a ser resolvido por um processo (com dezenas de threads) que consome n√£o mais que 5 GB de RAM e cria uma carga n√£o muito percept√≠vel nos n√∫cleos, com tr√°fego na regi√£o de 0,5-1 gigabits . <br><br><h3>  Conclus√£o </h3><br>  Bem, isso terminou um post longo, mas, esperan√ßosamente, inspirador e √∫til sobre tecnologia eficaz.  Agora voc√™ conhece outra ferramenta e pode us√°-la com mais seguran√ßa, se necess√°rio.  Revisamos a hist√≥ria do desenvolvimento de linguagens de programa√ß√£o, seus recursos e capacidades e podemos ter tirado ou tirado as conclus√µes corretas.  Boa sorte com seus projetos e bom, n√£o, bom humor! <br><br>  PS: <br>  * - Sim, eu quase esqueci.  Claro, voc√™ precisa falar sobre o bloqueio n√£o seguro.  Neste bloco voc√™ pode: <ul><li>  programar coisas que n√£o est√£o dispon√≠veis em ponteiros comuns "sem refer√™ncia √† ferrugem" e fazer coisas mais potencialmente perigosas, √†s vezes necess√°rias na programa√ß√£o do sistema.  Mas nem tudo √© t√£o assustador: </li><li>  blocos inseguros s√£o vis√≠veis e n√£o existem nenhum, ou o c√≥digo respons√°vel est√° concentrado neles </li><li>  A biblioteca padr√£o de ferrugem √© exaustivamente testada, o que significa que acreditamos que blocos inseguros trabalham nela </li><li>  bibliotecas populares de carga tamb√©m s√£o exaustivamente testadas (tudo √© incorporado para testes de unidade e integra√ß√£o em ferrugem) e, portanto, podem ser levadas e utilizadas </li></ul><br>  I.e.  no bloco "inseguro", voc√™ n√£o pode se envolver em deboche arbitr√°rio, dispon√≠vel em C - mas apenas em <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">certos</a> tipos <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">estritamente</a> de atividades perigosas.  Portanto, voc√™ pode e deve dormir em paz :-) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477342/">https://habr.com/ru/post/pt477342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477326/index.html">Simplicity Hickey</a></li>
<li><a href="../pt477328/index.html">Raz√µes para introduzir o analisador de c√≥digo est√°tico PVS-Studio no processo de desenvolvimento</a></li>
<li><a href="../pt477332/index.html">Hackney Pipeline: Hackathon para marca√ß√£o de dados de Ozon, Yandex.Tolki e Netologiya</a></li>
<li><a href="../pt477336/index.html">Computa√ß√£o sem servidor baseada no OpenWhisk, parte 1</a></li>
<li><a href="../pt477338/index.html">OWASP Moscow (R√∫ssia) meetup 12/19 CFP</a></li>
<li><a href="../pt477344/index.html">JIRA: regras para a prepara√ß√£o oportuna de deliciosos softwares. TLDR 1: limites de oportunidade</a></li>
<li><a href="../pt477348/index.html">Habr Weekly # 28 / Falar em p√∫blico n√£o √© assustador, Starship explodiu, Tesla mostrou CYBRTRCK, Peregrine Falcon hackeado</a></li>
<li><a href="../pt477350/index.html">Primeira aplica√ß√£o (Avalanche - framework de aplica√ß√µes para Java)</a></li>
<li><a href="../pt477352/index.html">Licen√ßas para sites e servi√ßos de Internet na China</a></li>
<li><a href="../pt477354/index.html">Perguntas para uma entrevista - do candidato ao empregador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>