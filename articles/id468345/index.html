<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêÔ∏è üë©‚Äçüé® ‚è∫Ô∏è GitHub meluncurkan tentakelnya dalam CI / CD dan manajemen artefak üöø üç£ üßñüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada bulan Mei 2019, GitHub mengumumkan rilis layanan Package Registry. Setelah ini, sudah pada bulan Agustus, dukungan untuk CI / CD dalam Tindakan d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GitHub meluncurkan tentakelnya dalam CI / CD dan manajemen artefak</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468345/"><p>  Pada bulan Mei 2019, GitHub <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengumumkan</a> rilis layanan Package Registry.  Setelah ini, sudah pada bulan Agustus, dukungan untuk CI / CD dalam Tindakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diumumkan</a> . </p><br><p>  Dalam artikel itu, saya akan memberi tahu Anda layanan apa dan bagaimana ini dapat digunakan pada contoh proyek hewan peliharaan kecil di GitHub. </p><br><p><img src="https://habrastorage.org/webt/7s/te/zf/7stezfizd-3i3zlnp0xbay3ttou.png"></p><a name="habracut"></a><br><h2 id="chto-eto-za-servisy-takie">  Jenis layanan apa ini? </h2><br><p>  Tindakan GitHub adalah platform yang memungkinkan Anda untuk mengelola siklus hidup perangkat lunak, yang kode sumbernya di-host di GitHub.  Faktanya, TravisCI, CircleCI dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">banyak</a> platform CI / CD gratis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lainnya</a> menerima pesaing baru sebagai persona dari Actions. </p><br><p>  Registri Paket GitHub adalah gudang pusat artefak, saat ini ada lima jenis artefak yang didukung. </p><br><p> <em>Jenis Artefak yang Didukung dalam Tindakan</em> </p><br><div class="scrollable-table"><table><thead><tr><th>  Dukungan dalam Tindakan </th><th>  Analogi </th><th>  Bahasa </th></tr></thead><tbody><tr><td>  Paket NPM </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.npmjs.com/</a> </td><td>  Javascript </td></tr><tr><td>  Gambar Docker </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://hub.docker.com/</a> </td><td>  - </td></tr><tr><td>  Artefak Maven </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://mvnrepository.com/</a> </td><td>  Jawa </td></tr><tr><td>  Paket nuget </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.nuget.org/</a> </td><td>  .NET </td></tr><tr><td>  Permata Ruby </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://rubygems.org/</a> </td><td>  Ruby </td></tr></tbody></table></div><br><p>  Ini adalah kesempatan yang nyaman untuk memiliki semua artefak di satu tempat, karena tidak selalu disarankan untuk menggunakan Nexus atau server Artifactory Anda. </p><br><p>  GitHub menjadi semakin mirip dengan GitLab, dan di suatu tempat ia telah melampaui lawan, misalnya, GitLab <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">belum</a> mendukung paket NuGet dan permata Ruby.  Bahkan, jika sebelumnya untuk proyek open source Anda harus menghubungkan integrasi eksternal ke GitHub, sekarang semua telur berada dalam satu keranjang.  Di sini biarkan semua orang memutuskan apakah itu baik atau buruk, tetapi setidaknya itu nyaman. </p><br><h2 id="kak-poprobovat">  Bagaimana cara mencoba? </h2><br><p>  Kedua layanan saat ini dalam mode beta, Anda dapat mendaftar untuk tes beta di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> . </p><br><p>  Migrasi dari layanan lain sangat sederhana, saya memigrasikan beberapa proyek kesayangan saya dari TravisCI dan DockerHub ke Actions dan Package Registry. </p><br><p>  Saya akan menunjukkan kepada Anda bagaimana tampilannya dalam satu contoh.  Proyek ini adalah yang paling umum, saya menulis tentang itu di artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> .  Tidak ada yang rumit, LaTeX-code biasa, dengan bantuan artefak dikumpulkan (2 file PDF), mereka diterbitkan dalam rilis GitHub.  Agar tidak mengunduh banyak paket LaTeX, saya menulis Dockerfile sehingga Anda dapat bekerja dengan nyaman di bawah OS apa pun. </p><br><h3 id="package-registry">  Paket pendaftaran </h3><br><p>  Untuk mulai bekerja dengan Package Registry alih-alih DockerHub, Anda hanya perlu mengambil dua langkah sederhana. <br>  Kami membuat token di pengaturan GitHub (token harus memiliki hak untuk menulis dan membaca artefak). </p><br><p><img src="https://habrastorage.org/webt/7z/aj/p_/7zajp_bcvr7zvdvup4ocwkavs9s.png"><br>  <em>Halaman Pembuatan Token</em> </p><br><p>  Dan kemudian kita dapat mengautentikasi dengan token yang dibuat dan mendorong artefak, begitulah sederhananya: </p><br><pre><code class="bash hljs">docker login docker.pkg.github.com --username amet13 docker tag docker-latex:0.0.1 docker.pkg.github.com/amet13/master-thesis/docker-latex:0.0.1 docker push docker.pkg.github.com/amet13/master-thesis/docker-latex:0.0.1</code> </pre> <br><p>  Harap dicatat, saya secara khusus menunjukkan nama panggilan saya di GitHub dalam huruf kecil, jika tidak, Anda akan mendapatkan kesalahan dari Docker: </p><br><pre> <code class="plaintext hljs">Error parsing reference: "docker.pkg.github.com/Amet13/master-thesis/docker-latex:0.0.1" is not a valid repository/tag: invalid reference format: repository name must be lowercase</code> </pre> <br><p>  Begini tampilannya di antarmuka web GitHub: </p><br><p><img src="https://habrastorage.org/webt/il/n1/lk/iln1lkji7xcbwutpodohhtu6mac.png"><br>  <em>Paket Halaman Pendaftaran untuk Gambar Docker</em> </p><br><p>  Selain instruksi untuk mengunduh gambar terbaru, statistik unduhan tersedia, kemampuan untuk mengunduh lapisan Docker terpisah melalui antarmuka web, riwayat unduhan gambar tersedia. </p><br><h3 id="actions">  Tindakan </h3><br><p>  Tindakannya sedikit lebih rumit, tetapi bagi mereka yang pernah bekerja dengan sistem CI / CD lainnya, itu tidak akan sulit untuk dipahami.  Konfigurasi dalam Tindakan dijelaskan oleh YAML deklaratif, meskipun HCL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">digunakan</a> sebelumnya. </p><br><p>  Beberapa konsep dasar (saya tidak akan sengaja menerjemahkan definisi, saya pikir semuanya jelas di sini): </p><br><ul><li>  Workflow - suatu proses yang mengatur siklus hidup perangkat lunak (build, test, package, release, deploy) untuk repositori </li><li>  File Workflow - file di mana Workflow dijelaskan, ia terletak di root repositori di direktori <code>.github/workflows/</code> </li><li>  Pekerjaan adalah setiap menjalankan Workflow, Job dipicu, pada satu titik waktu banyak Pekerjaan dapat dimulai </li><li>  Langkah - setiap Pekerjaan memiliki Langkah, di setiap Langkah Anda dapat menjalankan perintah atau Tindakan </li><li>  Action - ‚Äúplug-in‚Äù yang ditulis oleh seseorang, daftar banyak Tindakan dapat ditemukan di repositori <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">aksi-mengagumkan</a> </li><li>  Lingkungan virtual - lingkungan tempat Ayub dijalankan (sebenarnya itu adalah mesin virtual pada Windows, macOS atau Linux) </li><li>  Runner adalah lingkungan yang digunakan untuk meluncurkan Ayub, hanya satu Ayub dapat berjalan pada Runner pada suatu waktu </li><li>  Peristiwa - peristiwa yang memicu Alur Kerja, misalnya, Push, Tarik Permintaan, Webhook, Pekerjaan Cron, dll. </li><li>  Artefak - artefak (binari, gambar, log, dll.) </li></ul><br><p><img src="https://habrastorage.org/webt/li/o5/wo/lio5wo4cvnajpzvw29ohncr2v20.png"><br>  <em>Inilah tampilan halaman Daftar Pekerjaan di Alur Kerja.</em> </p><br><p>  Keterbatasan dan Larangan: </p><br><ul><li>  20 Alur kerja per repositori </li><li>  1000 permintaan API per jam untuk semua Tindakan di repositori </li><li>  waktu kerja maksimum - 6 jam </li><li>  20 Pekerjaan dapat bekerja secara paralel di repositori (untuk semua Alur Kerja) </li><li>  dilarang untuk menggunakan Tindakan untuk penambangan cryptocurrency dan komputasi tanpa server </li></ul><br><p>  Dokumentasi terbaru tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan ini</a> . </p><br><p><img src="https://habrastorage.org/webt/vt/up/tn/vtuptngx2wtzrzoz8g_odzyases.png"><br>  <em>Dan di sini adalah log dari salah satu Ayub</em> </p><br><h3 id="primer">  Contoh </h3><br><p>  Mari kita kembali ke contoh, di <a href="">sini seperti</a> apa konfigurasi saya, kami akan menganalisisnya secara lebih rinci di beberapa bagian. </p><br><p>  Tentukan nama untuk Alur kerja dan jelaskan pemicu mana yang harus dipicu (daftar semua pemicu dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> ): </p><br><pre> <code class="plaintext hljs">name: master-thesis on: [push]</code> </pre> <br><p>  Di mana Virtual Environment menjalankan Pekerjaan: </p><br><pre> <code class="plaintext hljs">jobs: build: # ubuntu-latest, ubuntu-18.04, or ubuntu-16.04 # windows-latest, windows-2019, or windows-2016 # macOS-latest or macOS-10.14 runs-on: ubuntu-latest</code> </pre> <br><p>  Langkah pertama, dalam <code>name:</code> tentukan nama Langkah (opsional), dan dalam <code>uses:</code> Tindakan mana yang ingin kita gunakan, dalam hal ini, kloning repositori: </p><br><pre> <code class="plaintext hljs"> steps: - name: Checkout repo uses: actions/checkout@v1</code> </pre> <br><p>  Pada langkah berikutnya, kita tidak menggunakan Action, tetapi hanya satu set perintah kita di mana kita masuk ke Package Registry, mengumpulkan gambar Docker dan mendorongnya ke repositori gambar.  Di blok <code>env:</code> menetapkan variabel lingkungan, kami mengambil salah satunya dari rahasia: </p><br><pre> <code class="plaintext hljs"> - name: Build docker image and push it to the registry env: GITHUB_TOKEN: ${{ secrets.GH_TOKEN }} DOCKER_IMAGE_ORIGIN: "docker.pkg.github.com/amet13/master-thesis/docker-latex" run: | # Pull submodules git submodule init git submodule update --remote # Login to GitHub Packages and build Docker image docker login docker.pkg.github.com -u amet13 -p ${GITHUB_TOKEN} docker pull ${DOCKER_IMAGE_ORIGIN}:latest docker build -t ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} . # Generate PDF artifacts docker run --rm -i \ -v ${PWD}:/master-thesis:Z ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} \ bash -c "latexmk -xelatex -synctex=1 -jobname=master-thesis main.tex" docker run --rm -i \ -v ${PWD}:/master-thesis:Z ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} \ bash -c "cd presentation/ &amp;&amp; latexmk -xelatex -synctex=1 -jobname=presentation main.tex" # Publish Docker image to GitHub Packages (with latest tag) docker tag ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} ${DOCKER_IMAGE_ORIGIN}:latest docker push ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} docker push ${DOCKER_IMAGE_ORIGIN}:latest</code> </pre> <br><p>  Saya yakin bahwa dalam waktu dekat akan muncul Tindakan yang akan secara otomatis menandai dan mendorong gambar alih-alih menulis perintah Docker secara manual. </p><br><p><img src="https://habrastorage.org/webt/bg/gw/oa/bggwoan0cceznbnkt5e_xqga1yo.png"><br>  <em>Menambahkan rahasia yang mengandung token github</em> </p><br><p>  Langkah selanjutnya setelah membuat PDF adalah membuat rilis di GitHub dan memasukkan artefak yang dikumpulkan dalam rilis ini.  Untuk secara otomatis membuat rilis, kami menggunakan Aksi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pihak ketiga</a> , di mana di blok <code>if:</code> Anda dapat menentukan kondisi untuk meluncurkan langkah - hanya saat membuat tag: </p><br><pre> <code class="plaintext hljs"> - name: Create GitHub release with artifacts uses: softprops/action-gh-release@v1 if: startsWith(github.ref, 'refs/tags/') with: files: | master-thesis.pdf presentation/presentation.pdf name: "Build ${GITHUB_SHA}" env: GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}</code> </pre> <br><h2 id="itogi">  Ringkasan </h2><br><p>  Terlepas dari status beta, kedua layanan berfungsi dengan baik, saya yakin banyak hal akan selesai. <br>  Pada beberapa titik itu bisa merepotkan, tidak ada variabel global, tetapi ini bisa dilakukan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kruk</a> . </p><br><p>  Saya menyukai pendekatan GitHub untuk meninggalkan HCL demi YAML.  Saya juga menyukai dukungan untuk banyak jenis host, yang sangat hemat (untuk saat ini), mari kita lihat bagaimana kelanjutannya.  Secara umum, untuk saluran pipa sederhana di repositori publik di GitHub, sekelompok seperti itu akan bekerja dengan sangat baik. </p><br><p>  <em>Terjemahan artikel ini sudah dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">format medium</a> .</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id468345/">https://habr.com/ru/post/id468345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id468333/index.html">Cara debug dan profil file exe apa pun menggunakan Visual Studio</a></li>
<li><a href="../id468337/index.html">Bekerja dengan cron untuk Android dan menambahkan skrip shell ke autorun saat perangkat melakukan booting</a></li>
<li><a href="../id468339/index.html">Memperkenalkan Tema Gelap untuk Pusat Aplikasi Visual Studio</a></li>
<li><a href="../id468341/index.html">Azure Cloud Shell di Terminal Windows</a></li>
<li><a href="../id468343/index.html">Jeff Bezos: "Pergi ke Luar Angkasa untuk Kebaikan Bumi"</a></li>
<li><a href="../id468347/index.html">MetricKit. Analisis kinerja aplikasi iOS</a></li>
<li><a href="../id468351/index.html">Mikrostruktur pasar dan seleksi yang merugikan</a></li>
<li><a href="../id468363/index.html">Magnum opus saya dari dunia mobile gaming</a></li>
<li><a href="../id468367/index.html">Amazon mengumumkan rencana pemanasan global</a></li>
<li><a href="../id468369/index.html">Bagaimana saya menciptakan "WildMAN" - parodi dari banyak game 8-bit dan baru-baru ini memindahkannya ke Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>