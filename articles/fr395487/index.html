<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÇ ‚ò¢Ô∏è üíä Drone de course FPV bricolage (partie 2) - configuration üíæ üó≥Ô∏è üßúüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la premi√®re partie, j'ai expliqu√© comment assembler un quadricopt√®re pour les vols FPV. Il est maintenant temps de le configurer. Si vous √™tes in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Drone de course FPV bricolage (partie 2) - configuration</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395487/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">premi√®re partie,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j'ai expliqu√© comment assembler un quadricopt√®re pour les vols FPV. </font><font style="vertical-align: inherit;">Il est maintenant temps de le configurer. </font><font style="vertical-align: inherit;">Si vous √™tes int√©ress√©, welkam sous cat.</font></font><br>
<br>
<img src="https://habrastorage.org/files/4a4/068/96b/4a406896bf854d38b75a5c4617cba4b7.jpg"><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faites imm√©diatement une r√©serve que je ne pr√©tends pas du tout √™tre un expert, ce n'est que le troisi√®me quadricopt√®re que j'ai assembl√©. </font><font style="vertical-align: inherit;">De plus, le r√©glage est une chose tr√®s subjective. </font><font style="vertical-align: inherit;">N√©anmoins, j'esp√®re que quelqu'un trouvera l'article utile et aidera √† gagner du temps. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous proc√©dons directement √† la configuration. </font><font style="vertical-align: inherit;">Des choses plus simples d'abord, puis Sa Majest√© le contr√¥leur de vol.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clignotant et configuration de MinimOSD</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le micrologiciel le plus populaire (mais pas le seul) pour MinimOSD est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MWOSD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tout d'abord, vous devez flasher sa carte, puis √©galement la configurer. </font><font style="vertical-align: inherit;">Si vous pouvez configurer l'OSD via un PC (plus √† ce sujet dans la section sur la configuration d'un PC), alors pour le firmware, vous avez besoin d'un adaptateur FTDI ou Arduinka. </font><font style="vertical-align: inherit;">Comment faire cela via le programmeur FTDI, et surtout o√π trouver les anciens pilotes pour cela, est montr√© dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette vid√©o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">L'essentiel est de ne pas oublier avant de d√©sinstaller le firmware dans Config.h les lignes suivantes: A </font><font style="vertical-align: inherit;">
partir des param√®tres √† afficher sur l'√©cran, j'ai commenc√© √† ne </font><font style="vertical-align: inherit;">parler </font><font style="vertical-align: inherit;">que de la tension de la batterie, du temps de vol et du mode de vol s√©lectionn√©.</font></font><br>
<br>
<code>#define MINIMOSD<br>
#define CLEANFLIGHT<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/files/a24/578/7cd/a245787cd08e40d99a5e6f8b59213c6a.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Param√®tres du micrologiciel et du contr√¥leur</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les contr√¥leurs de firmware, j'ai √©galement un adaptateur USB sp√©cial, mais vous pouvez vous en passer en vous connectant via un PC. </font><font style="vertical-align: inherit;">Vous pensez depuis longtemps √† mettre Multishot ou Oneshot125 d√©j√† test√©? </font><font style="vertical-align: inherit;">D'une part, sur la puce F330 obsol√®te, il n'y a pas beaucoup de diff√©rence de vitesse, d'autre part, un air de Star Wars lorsque vous l'allumez et, comme on dit sur les forums, un "signal plus propre". </font><font style="vertical-align: inherit;">Nous avons r√©solu toutes les plaintes non individuelles selon lesquelles les moteurs commencent spontan√©ment √† tourner √† vitesse maximale lorsqu'ils sont connect√©s √† la CLI. </font><font style="vertical-align: inherit;">En cons√©quence, il a install√© la derni√®re version de BLHeli (au moment de la construction 14.5), allum√© la lumi√®re amortie et r√©gl√© la synchronisation du moteur sur moyen. </font><font style="vertical-align: inherit;">Plus tard, calibr√© les r√©gulateurs selon </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette instruction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Micrologiciel du contr√¥leur de vol</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce stade, j'ai √©t√© bloqu√© le plus longtemps, car il y avait des probl√®mes avec le firmware. Il s'est av√©r√© que la premi√®re fois que vous devez coudre avec la fermeture des contacts de d√©marrage (comme dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette vid√©o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Au fait, il arrive parfois que le PC soit prot√©g√© en √©criture et qu'il soit impossible de flasher un nouveau firmware. Voici une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instruction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour r√©soudre ce probl√®me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peut-√™tre le firmware le plus populaire aujourd'hui, √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">juste titre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , est </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Cleanflight</font></a><font style="vertical-align: inherit;"> . Apr√®s l'avoir install√©, il suffit de configurer le protocole du r√©cepteur et le quadricopt√®re peut d√©j√† voler assez bien. Pour configurer, utilisez le configurateur graphique </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cleanflight</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pratique du shell </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gr√¢ce au code du firmware ouvert, il poss√®de plusieurs branches (fourches). Le plus int√©ressant d'entre eux est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betaflight.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d'une personne avec le surnom de Boris B. Le firmware se d√©veloppe tr√®s dynamiquement et certaines de ses "fonctionnalit√©s" passent ensuite dans le Cleanflight "parent" (par exemple, le mode de vol Airmode). L'inconv√©nient de Betaflight est que les versions sortent assez souvent et que leur stabilit√© n'est pas toujours √©lev√©e. Soit dit en passant, cette raison a retard√© la r√©daction de cet article pendant plusieurs semaines. Au moment de l'ach√®vement de l'assemblage du quadricopt√®re, la version 2.8.0 venait d'√™tre publi√©e, ce qui comportait quelques erreurs et diff√©rait par des param√®tres par d√©faut hostiles. La version corrig√©e 2.8.1 RC1 est apparue tr√®s rapidement, mais l'exp√©rience de travailler en tant que programmeur m'a dit qu'il valait mieux attendre la sortie. Je n'ai pas √©chou√©, car en m√™me temps que la sortie de la version 2.8.1, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betaflight Configurator est apparu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">On peut dire que c'est une nouvelle √©tape dans l'histoire de ce firmware. </font><font style="vertical-align: inherit;">Le fait est qu'au fur et √† mesure du d√©veloppement de Betaflight, il s'√©loignait de plus en plus de Cleanflight et le configurateur de ce dernier devenait de plus en plus inutile, car l'essentiel des r√©glages se faisait encore via la console CLI. </font><font style="vertical-align: inherit;">√Ä propos, au moment de la pr√©paration de cet article, la version 2.9.0 de Betaflight avait d√©j√† √©t√© publi√©e, mais en raison de critiques n√©gatives, je ne l'ai pas mise √† niveau. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ci-dessous, je d√©crirai en d√©tail comment j'ai configur√© mon quadricopt√®re via Betaflight Configurator.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration PC via Betaflight Configurator</font></font></h4><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglet Configuration</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A fait l'√©talonnage de l'acc√©l√©rom√®tre.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglet Ports</font></font></h5><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour que l'OSD fonctionne, il comprenait MSP pour le port UART2.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ne d√©sactivez jamais le MSP pour le port UART1. </font><font style="vertical-align: inherit;">Il est parall√®le √† l'USB et en d√©sactivant le transfert de donn√©es, vous n'√™tes plus connect√© √† un PC via un connecteur USB.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/0dc/829/18b/0dc82918b7604d158d4544d3262f7b04.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglet Configuration</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, presque tous les r√©glages sont effectu√©s ici.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la section ¬´Alignement de la carte et du capteur¬ª, j'ai indiqu√© que mon PC √©tait tourn√© de 90 degr√©s le long de l'axe de lacet. </font><font style="vertical-align: inherit;">L'exactitude de ce param√®tre peut ensuite √™tre v√©rifi√©e dans l'onglet Configuration.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En "Mode r√©cepteur", j'ai choisi RX_PPM.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai choisi ONESHOT125 comme protocole de r√©gulateurs (pourquoi pas MULTISHOT, j'ai √©crit plus haut).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©sactiv√© "Sortie PWM non synchronis√©e", encore une fois, car je n'utilise pas MULTISHOT.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour que les moteurs tournent toujours √† l'√©tat aliment√©, j'ai d√©sactiv√© MOTOR_STOP.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Activ√© l'option "D√©sarmer les moteurs quelle que soit la valeur de l'acc√©l√©rateur", car je ferai armer les moteurs sur un canal s√©par√©.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©duction de la valeur de "Minimum Throttle" √† 1030. Il s'agit du r√©gime de ralenti, s√©lectionn√© subjectivement.</font></font></li>
<li>  ¬´VBAT¬ª     .     ¬´Battery Voltage¬ª   ,      .      ,     ¬´Voltage Scale¬ª.</li>
<li> ¬´Other Features¬ª  BLACKBOX, SUPEREXPO_RATES,   LED_STRIP   AIRMODE.      .</li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/551/eb5/f47/551eb5f47fdc409182fd8907ec6b18e3.png"><br>
<br>
<h5> Failsafe</h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec la s√©curit√© int√©gr√©e, tout s'est av√©r√© √™tre un peu plus compliqu√© que je ne l'avais vu auparavant. </font><font style="vertical-align: inherit;">Sur les forums sp√©cialis√©s, il y a parfois des holivars sur le th√®me "o√π vaut-il mieux configurer la s√©curit√© int√©gr√©e: sur le r√©cepteur ou sur le PC?" </font><font style="vertical-align: inherit;">En fait, cette question sonne correctement comme ceci: "o√π est-il pr√©f√©rable de configurer la s√©curit√© int√©gr√©e: uniquement sur le r√©cepteur ou sur le r√©cepteur et sur le PC?" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuration de la s√©curit√© int√©gr√©e sur le r√©cepteur est n√©cessaire dans tous les cas. </font><font style="vertical-align: inherit;">Ici, il est n√©cessaire de pr√©ciser que nous parlons du r√©cepteur Frsky D4R-II fonctionnant sous le protocole PPM. </font><font style="vertical-align: inherit;">Pour les r√©cepteurs avec S.Bus, la s√©curit√© int√©gr√©e est configur√©e diff√©remment. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Frsky D4R-II dispose de trois options pour la perte de signal de l'√©metteur:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transmettre √† un PC un signal qui simule les positions pr√©r√©gl√©es des manches et des commutateurs (mode Positions pr√©d√©finies, qui est d√©crit dans le manuel)</font></font></li>
<li>     ,    ( Hold Last Position)</li>
<li>     ( No Pulse)</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par d√©faut, le Frsky D4R-II est r√©gl√© sur le mode Hold Last Position, ce qui contribue au vol de l'appareil √† des distances lointaines. Donc, si vous utilisez la s√©curit√© int√©gr√©e uniquement sur le r√©cepteur, vous devez configurer le mode de positions pr√©d√©finies. Une autre chose est que la s√©curit√© int√©gr√©e est activ√©e m√™me avec une perte momentan√©e de signal. Ce sera tr√®s d√©sagr√©able si le signal se r√©tablit apr√®s une fraction de seconde, et le quadricopt√®re zadarmi d√©j√† les moteurs et tombe. La configuration de la s√©curit√© int√©gr√©e sur un PC peut am√©liorer la situation, car ce mode a une r√©ponse retard√©e, qui sert de filtre contre les pertes de signal √† court terme. De plus, il existe un script personnalisable selon lequel le quadricopt√®re se comportera si la s√©curit√© int√©gr√©e est activ√©e. Par exemple, vous pouvez activer le mode de stabilisation et essayer de vous asseoir plus ou moins doucement, ou m√™me activer RTH, le cas √©ch√©ant.Mais en pratique, de telles choses sont demand√©es sur les gros appareils GPS, et sur les petits et rapides, les pilotes exp√©riment√©s conseillent de ne pas √™tre intelligents et de couper les moteurs apr√®s avoir perdu le signal. En raison de la grande vitesse des vols, elle sera plus s√ªre pour les autres.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nuance est que si le r√©cepteur est r√©gl√© sur des positions pr√©d√©finies ou sur Hold Last Position, le PC ne saura m√™me pas qu'une perte de signal s'est produite. </font><font style="vertical-align: inherit;">Ainsi, la s√©curit√© int√©gr√©e sur le PC ne peut √™tre utilis√©e que si aucune impulsion n'est d√©finie sur le r√©cepteur. </font><font style="vertical-align: inherit;">Sur le Frsky D4R-II, il est install√© en appuyant bri√®vement (moins de 1 seconde) sur le bouton de s√©curit√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec l'√©metteur √©teint</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instruction vid√©o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur l'onglet Failsafe Betaflight Configurator, j'ai fait ce qui suit:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la section Channel Fallback Settings, j'ai d√©fini les valeurs des commutateurs de l'√©metteur qui devront √™tre simul√©s. </font><font style="vertical-align: inherit;">Dans mon cas, je viens d'allumer le squeaker sur AUX3.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Activ√© Failsafe Stage 2.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©glez le d√©lai d'activation du mode de s√©curit√© int√©gr√©e 1 s (valeur 10 dans l'√©l√©ment ¬´Temps de garde pour l'activation de l'√©tape 2 ...¬ª)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©glez la dur√©e de fonctionnement des moteurs apr√®s avoir activ√© la s√©curit√© int√©gr√©e 1 s (valeur 10 dans la rubrique Failsafe Throttle Low delay).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la proc√©dure de s√©curit√© int√©gr√©e, j'ai choisi le sc√©nario avec Drop (Drop), et non avec une tentative d'atterrissage en douceur (Land).</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/f38/c3f/7fe/f38c3f7fe3754ce79d53a2806e354d20.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglet R√©glage PID</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuration du PID est un processus auquel vous ne devriez pas vous lancer sans conna√Ætre un gu√©. </font><font style="vertical-align: inherit;">Tout d'abord, une compr√©hension th√©orique de ces trois composantes est n√©cessaire. </font><font style="vertical-align: inherit;">Voici quelques articles qui peuvent vous y aider:</font></font><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PID pour quadrocopt√®res (traduction)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos des contr√¥leurs PID mis dans le mot</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et plus sur les contr√¥leurs PID</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bases de la configuration du contr√¥leur PID √† l'aide des journaux Blackbox (traduction)</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vid√©o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le r√©glage PID</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne me sens pas pr√™t pour un tel param√®tre, j'ai donc laiss√© les valeurs par d√©faut, car Betaflight est aussi agr√©able de voler avec elles. </font><font style="vertical-align: inherit;">Mais j'ai quand m√™me fait deux changements:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flottant s√©lectionn√© dans la section Math PID. </font><font style="vertical-align: inherit;">Il s'agit du r√©cepteur en mode LuxFloat de Cleanflight et il est recommand√© de l'installer uniquement pour les PC √©quip√©s de processeurs F3 ou F4.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MESURE s√©lectionn√©e dans la section "M√©thode d√©riv√©e". </font><font style="vertical-align: inherit;">En bref, MEASUREMENT est pr√©f√©r√© pour le freestyle et ERROR pour la course.</font></font></li>
</ul><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglet Modes</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai accroch√© les moteurs et la Blackbox (AUX1) sur les commutateurs, activ√© le mode de vol Horizon (AUX2) et allum√© le tweeter (AUX3). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voudrais √©galement parler d'AIRMODE. </font><font style="vertical-align: inherit;">Au d√©part, c'√©tait une fonctionnalit√© Betaflight unique, mais √† un moment donn√©, elle est devenue si populaire que Boris B l'a partag√©e avec les auteurs de Cleanflight et maintenant ce mode est √©galement disponible l√†-bas.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgr√© le fait que AIRMODE est affich√© comme un mode de vol s√©par√© - il s'agit plus d'une option suppl√©mentaire que d'un mode complet. Il permet au quadricopt√®re de maintenir un angle donn√© m√™me avec un minimum de gaz. C'est pourquoi il n'est pas recommand√© d'utiliser AIRMODE avec les modes de stabilisation. De plus, l'atterrissage avec AIRMODE est √©galement un processus difficile: le quadricopt√®re commence √† sauter comme une grenouille. Les pilotes exp√©riment√©s pr√©f√®rent simplement ¬´faire tomber¬ª le quadricopt√®re, √©teignant les moteurs √† quelques dizaines de centim√®tres au-dessus du sol. Soit dit en passant, si vous avez le moteur arr√™t√© √† z√©ro gaz (l'option MOTOR_STOP dans l'onglet Configuration) et AIRMODE fonctionne en m√™me temps, il n'y aura pas d'arr√™t du moteur, car AIRMODE a une priorit√© plus √©lev√©e.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betaflight version 2.8.1 a une nouvelle fonctionnalit√©: vous pouvez activer AIRMODE en arri√®re-plan (quelque chose comme un avantage passif dans les jeux), puis il est toujours actif et n'appara√Ætra pas dans l'onglet Modes, ou, comme auparavant, accrochez-le n'importe quel canal. </font><font style="vertical-align: inherit;">Cela se fait dans l'onglet ¬´Autres fonctionnalit√©s¬ª de la configuration. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chez moi, je n'ai pas activ√© AIRMODE en arri√®re-plan, car j'utilise √©galement le mode de stabilisation HORIZON. </font><font style="vertical-align: inherit;">Ainsi, j'ai deux modes de vol sur AUX1: HORIZON (pour les vols avec stabilisation et atterrissage) et ACRO + AIRMODE.</font></font><br>
<br>
<img src="https://habrastorage.org/files/054/7c0/af8/0547c0af8bfb4269947b59362f80f433.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglet Bande LED</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai r√©gl√© mon r√©tro√©clairage pour afficher des avertissements, des clignotants / freins et une lueur en bleu quand rien de tout cela n'existe.</font></font><br>
<br>
<img src="https://habrastorage.org/files/f05/cd4/6de/f05cd46de9dc4a948c6b4eae3537f037.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglet Blackbox</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blackbox est une ¬´bo√Æte noire¬ª d'un quadricopt√®re. </font><font style="vertical-align: inherit;">Il est n√©cessaire pour les diagnostics, les param√®tres PID plus pr√©cis, ainsi que pour les infographies √† appliquer √† la vid√©o de vol (comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Les donn√©es sont √©crites dans un enregistreur externe ou, si la quantit√© de m√©moire le permet, dans la m√©moire interne du PC. </font><font style="vertical-align: inherit;">Par exemple, Naze32 Acro en manque, alors que Naze32 Deluxe et SPRacingF3 Acro en ont assez, mais pas beaucoup. </font><font style="vertical-align: inherit;">Avec les param√®tres par d√©faut, les donn√©es de vol d'une dur√©e de 3 √† 4 minutes peuvent √™tre enregistr√©es sur 2 Mo de m√©moire, ce qui est tr√®s petit. </font><font style="vertical-align: inherit;">La situation est aggrav√©e par le fait qu'il est impossible de r√©aliser l'enregistrement ¬´en cercle¬ª, comme dans les enregistreurs de voiture, en raison de la faible vitesse de lecture / √©criture de la m√©moire. </font><font style="vertical-align: inherit;">La seule option consiste √† r√©duire la vitesse d'√©criture de plusieurs fois. </font><font style="vertical-align: inherit;">Pour les diagnostics, ces donn√©es seront d√©j√† de peu d'utilit√©, mais pour la vid√©o - c'est tout. </font><font style="vertical-align: inherit;">Dans cet onglet, j'ai fait ce qui suit:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai choisi d'√©crire dans la m√©moire interne (option "Puce flash de donn√©es int√©gr√©e") dans la section "P√©riph√©rique d'enregistrement Blackbox".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la section ¬´Portion d'it√©rations de boucle de vol √† enregistrer¬ª, j'ai choisi 50%, ce qui r√©duit essentiellement la vitesse d'enregistrement de moiti√©.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/ac9/adf/181/ac9adf181c9440c5a830e43c3fdc588a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme je l'ai √©crit ci-dessus, l'enregistrement est d√©marr√© par le m√™me interrupteur √† bascule sur le mat√©riel que l'armure, de sorte que l'enregistrement commence au d√©marrage des moteurs. </font><font style="vertical-align: inherit;">Vous pouvez en savoir plus sur le fonctionnement et les param√®tres de Blackbox dans le </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manuel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Quelques liens utiles √©galement:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration Blackbox en Cleanflight</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Traduction de l'article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´Superposer des donn√©es Blackbox sur une vid√©o¬ª</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Traduction de l'article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´Principes de base de la configuration d'un contr√¥leur PID √† l'aide de journaux Blackbox¬ª</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vid√©o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> installation et l' </font><font style="vertical-align: inherit;">utilisation Blackbox</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blackbox Explorer</a>   </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blackbox tools</a>    . ,    png</li>
</ul><br>
<br>
<h5> CLI</h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CLI est une console √† travers laquelle vous pouvez modifier des param√®tres plus avanc√©s, ainsi que faire une copie de sauvegarde de tous les param√®tres. </font><font style="vertical-align: inherit;">J'ai fait ce qui suit: </font><font style="vertical-align: inherit;">
Betaflight a √©galement une capacit√© tr√®s utile pour se connecter √† l'OSD via un PC. </font><font style="vertical-align: inherit;">Vous pouvez maintenant cacher cette √©charpe sans vous soucier de la n√©cessit√© de vous y connecter. </font><font style="vertical-align: inherit;">Pour vous connecter √† la carte OSD via un PC, vous devez connecter la batterie au quadricopt√®re, puis taper </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;">serialpassthrough</font></i></a><font style="vertical-align: inherit;"> dans la CLI </font><font style="vertical-align: inherit;">avec les param√®tres n√©cessaires, puis d√©connecter (d√©connecter) Betaflight du PC et d√©marrer MWOSD. </font><font style="vertical-align: inherit;">Je l'ai fait la premi√®re fois. </font><font style="vertical-align: inherit;">Quant aux param√®tres, alors pour Micro MinimOSD connect√© √† UART2 (mon cas) ils sont les suivants: </font><font style="vertical-align: inherit;">
Ceci termine la configuration du contr√¥leur de vol.</font></font><br>
<br>
<code>set small_angle = 180 #        <br>
set vbat_pid_compensation = ON #   PID   <br>
save #  <br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"></font></i></a><font style="vertical-align: inherit;"></font><br>
<br>
<code>serialpassthrough 1 115200<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de l'√©metteur</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque pilote configure individuellement un √©metteur (alias ¬´distant¬ª): minuteries, mixages, notifications vocales, etc. La seule chose extr√™mement souhaitable est de v√©rifier les valeurs minimum, moyenne et maximum des sticks de contr√¥le dans le configurateur. Cela se fait dans l'onglet R√©cepteur. Les valeurs id√©ales sont de 1000 - 1500 - 2000. Dans mon cas, elles √©taient de 996 - 1508 - 2020, ce qui n'est pas tr√®s bon. Premi√®rement, les ¬´retomb√©es¬ª de la plage (valeurs inf√©rieures √† 1000 et sup√©rieures √† 2000) sont mauvaises en soi. Deuxi√®mement, la position centrale, autre que 1500, sera per√ßue par le PC comme un roulage facile, ce qui fonctionnera et le quadricopt√®re sera constamment d√©moli dans une certaine direction. En un mot, il est logique de bricoler et de configurer "comme il se doit". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©glage de ces valeurs sur l'√©metteur Taranis est indiqu√©.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . J'ai Turnigy 9XR PRO, l√† c'est fait dans les limites. Vous pouvez √©galement configurer via le programme eePskye (onglet Limites), mais cela n'est pas pratique, car le r√©sultat n'est pas imm√©diatement visible dans Betaflight Configurator. Cela doit √™tre fait pour chacun des quatre canaux de contr√¥le. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s ajustement, les valeurs centrales √©taient aussi proches que possible de 1500, mais avec moi, elles ont commenc√© √† ¬´sauter¬ª d'environ 5 unit√©s dans l'une ou l'autre direction. Je ne sais pas √† quoi cela est li√©, probablement, les valeurs de la t√©l√©commande sont limites pour le PC et apr√®s leur arrondi, cet effet est obtenu. Pour r√©soudre ce probl√®me, Betaflight (et CleanFlight aussi) a une commande sp√©ciale qui configure le filtrage de ces choses.</font></font><br>
<br>
<code>set deadband = 6<br>
</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La valeur peut √™tre de 0 √† 32 et avec son augmentation, la sensibilit√© du contr√¥le diminue. </font><font style="vertical-align: inherit;">La gestion devient plus douce. </font><font style="vertical-align: inherit;">Il faut comprendre qu'apr√®s un certain seuil, la douceur se transformera en cotonnade, donc pour moi j'ai choisi la valeur minimale √† laquelle les contractions ont disparu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout, de bons vols!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr395487/">https://habr.com/ru/post/fr395487/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr395475/index.html">Cube RVB LED 4x4x4 pour la visualisation musicale</a></li>
<li><a href="../fr395477/index.html">Projet "Eye". La fin</a></li>
<li><a href="../fr395479/index.html">Les appareils VR sont plus b√©n√©fiques pour les yeux que les √©crans ordinaires</a></li>
<li><a href="../fr395481/index.html">Smart Ring Nimb du co-fondateur KermlinRussia est apparu sur Kickstarter</a></li>
<li><a href="../fr395485/index.html">Les scientifiques ont annonc√© le lancement du projet d'√©criture HGP, dont le but ultime est de cr√©er un g√©nome humain synth√©tique complet</a></li>
<li><a href="../fr395489/index.html">Une startup ukrainienne a propos√© une recharge sans fil pouvant charger jusqu'√† 8 iPhone simultan√©ment dans un rayon de 10 m√®tres</a></li>
<li><a href="../fr395491/index.html">Penaudio: True Finnish Sound</a></li>
<li><a href="../fr395493/index.html">D'ici 2035, la Russie aura son propre langage de programmation et sa t√©l√©portation quantique</a></li>
<li><a href="../fr395495/index.html">Technofascisme - l'avenir de l'humanit√©? (pas politique)</a></li>
<li><a href="../fr395497/index.html">Ordinateurs l√©gendaires de l'histoire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>