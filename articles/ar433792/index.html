<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎮 🔱 🖖 نصوص شل في Ansible 🕝 🍏 🚵🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="لنفترض أن أحد العملاء طلب منك المساعدة في ترحيل البرنامج النصي لنشر ملف sudoers مركزي على خوادم RHEL و AIX. 



 حسنًا ، هذا سيناريو شائع جدًا ، ويمكن...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>نصوص شل في Ansible</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/433792/" style=";text-align:right;direction:rtl">  لنفترض أن أحد العملاء طلب منك المساعدة في ترحيل البرنامج النصي لنشر ملف sudoers مركزي على خوادم RHEL و AIX. <br><br><img src="https://habrastorage.org/webt/ug/ye/hk/ugyehkzylpqpq2h0fmz3_joyacy.png" width="100%"><br><br>  حسنًا ، هذا سيناريو شائع جدًا ، ويمكنك من خلال مثاله توضيح استخدام الميزات المتقدمة لـ Ansible ، وكذلك كيفية تغيير النهج - من برنامج نصي يؤدي مهمة معينة ، إلى وصف عاطفي (دون إجراء تغييرات) ومراقبة الامتثال لحالة المثيل. <br><a name="habracut"></a><br>  خذ السيناريو: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # Desc: Distribute unified copy of /etc/sudoers # # $Id: $ #set -x export ODMDIR=/etc/repos # # perform any cleanup actions we need to do, and then exit with the # passed status/return code # clean_exit() { cd / test -f "$tmpfile" &amp;&amp; rm $tmpfile exit $1 } #Set variables PROG=`basename $0` PLAT=`uname -s|awk '{print $1}'` HOSTNAME=`uname -n | awk -F. '{print $1}'` HOSTPFX=$(echo $HOSTNAME |cut -c 1-2) NFSserver="nfs-server" NFSdir="/NFS/AIXSOFT_NFS" MOUNTPT="/mnt.$$" MAILTO="unix@company.com" DSTRING=$(date +%Y%m%d%H%M) LOGFILE="/tmp/${PROG}.dist_sudoers.${DSTRING}.log" BKUPFILE=/etc/sudoers.${DSTRING} SRCFILE=${MOUNTPT}/skel/sudoers-uni MD5FILE="/.sudoers.md5" echo "Starting ${PROG} on ${HOSTNAME}" &gt;&gt; ${LOGFILE} 2&gt;&amp;1 # Make sure we run as root runas=`id | awk -F'(' '{print $1}' | awk -F'=' '{print $2}'` if [ $runas -ne 0 ] ; then echo "$PROG: you must be root to run this script." &gt;&gt; ${LOGFILE} 2&gt;&amp;1 exit 1 fi case "$PLAT" in SunOS) export PINGP=" -t 7 $NFSserver " export MOUNTP=" -F nfs -o vers=3,soft " export PATH="/usr/sbin:/usr/bin" echo "SunOS" &gt;&gt; ${LOGFILE} 2&gt;&amp;1 exit 0 ;; AIX) export PINGP=" -T 7 $NFSserver 2 2" export MOUNTP=" -o vers=3,bsy,soft " export PATH="/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java5/jre/bin:/usr/java5/bin" printf "Continuing on AIX...\n\n" &gt;&gt; ${LOGFILE} 2&gt;&amp;1 ;; Linux) export PINGP=" -t 7 -c 2 $NFSserver" export MOUNTP=" -o nfsvers=3,soft " export PATH="/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin" printf "Continuing on Linux...\n\n" &gt;&gt; ${LOGFILE} 2&gt;&amp;1 ;; *) echo "Unsupported Platform." &gt;&gt; ${LOGFILE} 2&gt;&amp;1 exit 1 esac ## ## Exclude Lawson Hosts ## if [ ${HOSTPFX} = "la" ] then echo "Exiting Lawson host ${HOSTNAME} with no changes." &gt;&gt; ${LOGFILE} 2&gt;&amp;1 exit 0 fi ## ## * NFS Mount Section * ## ## Check to make sure NFS host is up printf "Current PATH is..." &gt;&gt; ${LOGFILE} 2&gt;&amp;1 echo $PATH &gt;&gt; $LOGFILE 2&gt;&amp;1 ping $PINGP &gt;&gt; $LOGFILE 2&gt;&amp;1 if [ $? -ne 0 ]; then echo " NFS server is DOWN ... ABORTING SCRIPT ... Please check server..." &gt;&gt; $LOGFILE echo "$PROG failed on $HOSTNAME ... NFS server is DOWN ... ABORTING SCRIPT ... Please check server ... " | mailx -s "$PROG Failed on $HOSTNAME" $MAILTO exit 1 else echo " NFS server is UP ... We will continue..." &gt;&gt; $LOGFILE fi ## ## Mount NFS share to HOSTNAME. We do this using a soft mount in case it is lost during a backup ## mkdir $MOUNTPT mount $MOUNTP $NFSserver:${NFSdir} $MOUNTPT &gt;&gt; $LOGFILE 2&gt;&amp;1 ## ## Check to make sure mount command returned 0. If it did not odds are something else is mounted on /mnt.$$ ## if [ $? -ne 0 ]; then echo " Mount command did not work ... Please check server ... Odds are something is mounted on $MOUNTPT ..." &gt;&gt; $LOGFILE echo " $PROG failed on $HOSTNAME ... Mount command did not work ... Please check server ... Odds are something is mounted on $MOUNTPT ..." | mailx -s "$PROG Failed on $HOSTNAME" $MAILTO exit 1 else echo " Mount command returned a good status which means $MOUNPT was free for us to use ... We will now continue ..." &gt;&gt; $LOGFILE fi ## ## Now check to see if the mount worked ## if [ ! -f ${SRCFILE} ]; then echo " File ${SRCFILE} is missing... Maybe NFS mount did NOT WORK ... Please check server ..." &gt;&gt; $LOGFILE echo " $PROG failed on $HOSTNAME ... File ${SRCFILE} is missing... Maybe NFS mount did NOT WORK ... Please check server ..." | mailx -s "$PROG Failed on $HOSTNAME" $MA ILTO umount -f $MOUNTPT &gt;&gt; $LOGFILE rmdir $MOUNTPT &gt;&gt; $LOGFILE exit 1 else echo " NFS mount worked we are going to continue ..." &gt;&gt; $LOGFILE fi ## ## * Main Section * ## if [ ! -f ${BKUPFILE} ] then cp -p /etc/sudoers ${BKUPFILE} else echo "Backup file already exists$" &gt;&gt; ${LOGFILE} 2&gt;&amp;1 exit 1 fi if [ -f "$SRCFILE" ] then echo "Copying in new sudoers file from $SRCFILE." &gt;&gt; ${LOGFILE} 2&gt;&amp;1 cp -p $SRCFILE /etc/sudoers chmod 440 /etc/sudoers else echo "Source file not found" &gt;&gt; ${LOGFILE} 2&gt;&amp;1 exit 1 fi echo &gt;&gt; ${LOGFILE} 2&gt;&amp;1 visudo -c |tee -a ${LOGFILE} if [ $? -ne 0 ] then echo "sudoers syntax error on $HOSTNAME." &gt;&gt; ${LOGFILE} 2&gt;&amp;1 mailx -s "${PROG}: sudoers syntax error on $HOSTNAME" "$MAILTO" &lt;&lt; EOF Syntax error /etc/sudoers on $HOSTNAME. Reverting changes Please investigate. EOF echo "Reverting changes." &gt;&gt; ${LOGFILE} 2&gt;&amp;1 cp -p ${BKUPFILE} /etc/sudoers else # # Update checksum file # grep -v '/etc/sudoers' ${MD5FILE} &gt; ${MD5FILE}.tmp csum /etc/sudoers &gt;&gt; ${MD5FILE}.tmp mv ${MD5FILE}.tmp ${MD5FILE} chmod 600 ${MD5FILE} fi echo &gt;&gt; ${LOGFILE} 2&gt;&amp;1 if [ "${HOSTPFX}" = "hd" ] then printf "\nAppending #includedir /etc/sudoers.d at end of file.\n" &gt;&gt; ${LOGFILE} 2&gt;&amp;1 echo "" &gt;&gt; /etc/sudoers echo "## Read drop-in files from /etc/sudoers.d (the # here does not mean a comment)" &gt;&gt; /etc/sudoers echo "#includedir /etc/sudoers.d" &gt;&gt; /etc/sudoers fi ## ## * NFS Un-mount Section * ## ## ## Unmount /mnt.$$ directory ## umount ${MOUNTPT} &gt;&gt; $LOGFILE 2&gt;&amp;1 if [ -d ${MOUNTPT} ]; then rmdir ${MOUNTPT} &gt;&gt; $LOGFILE 2&gt;&amp;1 fi ## ## Make sure that /mnt.$$ got unmounted ## if [ -f ${SRCFILE} ]; then echo " The umount command failed to unmount ${MOUNTPT} ... We will not force the unmount ..." &gt;&gt; $LOGFILE umount -f ${MOUNTPT} &gt;&gt; $LOGFILE 2&gt;&amp;1 if [ -d ${MOUNTPT} ]; then rmdir ${MOUNTPT} &gt;&gt; $LOGFILE 2&gt;&amp;1 fi else echo " $MOUNTPT was unmounted ... There is no need for user intervention on $HOSTNAME ..." &gt;&gt; $LOGFILE fi # # as always, exit cleanly # clean_exit 0</span></span></code> </pre> <br>  هناك 212 سطرًا من التعليمات البرمجية ، مع عدم وجود تحكم في الإصدار في ملف sudoers.  لدى العميل بالفعل عملية يتم تشغيلها مرة واحدة في الأسبوع ويتحقق من المجموع الاختباري للملف لضمان الأمان.  على الرغم من أن البرنامج النصي يحتوي على إشارة إلى Solaris ، لهذا العميل لم يكن علينا نقل هذا المطلب. <br><br>  لنبدأ بإنشاء دور ووضع ملف sudoers في Git للتحكم في الإصدار.  من بين أشياء أخرى ، سيسمح لنا ذلك بالتخلص من الحاجة إلى تركيب وحدات تخزين NFS. <br><br>  باستخدام معلمات التحقق والنسخ الاحتياطي لوحدات <b>النسخ</b> <b>والقالب</b> ، يمكننا التخلص من الحاجة إلى كتابة التعليمات البرمجية لإجراء نسخ احتياطي واستعادة الملف.  في هذه الحالة ، يتم إجراء التحقق من الصحة قبل وضع الملف في نقطة الوجهة ، وإذا فشلت عملية التحقق من الصحة ، فإن الوحدة النمطية تلقي خطأ. <br><br>  لكل دور ، نحتاج إلى تحديد المهام والقوالب والمتغيرات.  هنا هو هيكل الملف المقابل: <br><br><img src="https://habrastorage.org/webt/rt/2a/kh/rt2akhvufuvidnaohy83hbg8prk.png"><br><br>  يحتوي ملف نصي الدور (playbook) ، <b>sudoers.yml</b> ، على بنية بسيطة: <br><br> <code>--- <br> ## <br> # Role playbook <br> ## <br> - hosts: all <br> roles: <br> - sudoers <br> ... <br></code> <br>  توجد متغيرات الدور في <b>ملف vars / main.yml</b> .  يحتوي هذا الملف على ملف المجموع الاختباري ويتضمن / يستثني التوجيهات التي سيتم استخدامها لإنشاء منطق خاص لتخطي مضيفي Lawson وتضمين ملف sudoers.d فقط في مضيفي hd. <br><br>  فيما يلي محتويات <b>ملف vars / main.yml</b> : <br><br> <code>--- <br> MD5FILE: /root/.sudoer.md5 <br> EXCLUDE: la <br> INCLUDE: hd <br> ... <br></code> <br>  إذا <b>استخدمنا وحدات</b> <b>النسخ</b> و <b>lineinfile</b> ، فلن يكون الدور ملائماً.  ستقوم وحدة النسخ بتثبيت الملف الأساسي ، وسيشمل ملف lineinfile كل مرة يبدأ تشغيله.  نظرًا لأن هذا الدور سيتم إطلاقه في <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">برج أنسبل</a> ، فإن الشغور أمر لا بد منه.  سنقوم بتحويل الملف إلى قالب jinja2. <br><br>  في السطر الأول ، نضيف الأمر التالي <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">للتحكم في المسافات والمسافات البادئة</a> : <br><br> <code>#jinja2: lstrip_blocks: True, trim_blocks: True <br></code> <br>  لاحظ أن الإصدارات الأحدث من الوحدة النمطية <b>للقالب</b> تتضمن معلمات <b>لكتل trim_blocks</b> (أضيفت في Ansible 2.4). <br><br>  إليك الرمز الذي يُدرج سطر <b>التضمين</b> في نهاية الملف: <br><br> <code>{% if ansible_hostname[0:2] == INCLUDE %} <br> #includedir /etc/sudoers.d <br> {% endif %} <br></code> <br>  نستخدم البنية الشرطية ({٪ if٪} ، {٪ endif٪}) لأمر shell الذي يقوم بإدراج سطر للمضيفين الذين تبدأ أسماؤهم بالحرف "hd".  نستخدم حقائق Ansible وفلتر [0: 2] لتحليل اسم المضيف. <br><br>  الآن دعنا ننتقل إلى المهام.  أولاً ، تحتاج إلى إنشاء حقيقة لتحليل اسم المضيف.  سوف نستخدم حقيقة "parhost" في البناء الشرطي. <br><br> <code>--- <br> ## <br> # Parse hostnames to grab 1st 2 characters <br> ## <br> - name: "Parse hostname's 1st 2 characters" <br> set_fact: parhost={{ ansible_hostname[0:2] }} <br></code> <br>  لا توجد معلمة <b>csum</b> على خادم مخزون RHEL.  إذا لزم الأمر ، يمكننا استخدام حقيقة أخرى للإشارة المشروطة إلى اسم الملف الثنائي مع المجموع الاختباري.  يرجى ملاحظة أنه قد تكون هناك حاجة إلى رمز إضافي إذا كانت هذه الميزات مختلفة على AIX و Solaris و Linux. <br><br>  بالإضافة إلى ذلك ، يتعين علينا حل المشكلة مع الاختلافات في مجموعات الجذر على AIX و RHEL. <br><br> <code>## <br> # Conditionally set name of checksum binary <br> ## <br> - name: "set checksum binary" <br> set_fact: <br> csbin: "{{ 'cksum' if (ansible_distribution == 'RedHat') else 'csum' }}" <br> <br> ## <br> # Conditionally set name of root group <br> ## <br> - name: "set system group" <br> set_fact: <br> sysgroup: "{{ 'root' if (ansible_distribution == 'RedHat') else 'sys' }}" <br></code> <br>  باستخدام الكتل يسمح لنا بتعيين الشرط للمهمة بأكملها.  سنستخدم الشرط في نهاية الكتلة لاستبعاد مضيفي "la". <br><br> <code>## <br> # Enclose in block so we can use parhost to exclude hosts <br> ## <br> - block: <br></code> <br>  وحدة القالب بالتحقق من صحة وتثبيت الملف.  نصلح النتيجة حتى نتمكن من تحديد ما إذا كانت المهمة قد تغيرت.  يتيح لك استخدام معلمة التحقق من الصحة في هذه الوحدة التحقق من صحة ملف sudoer الجديد قبل وضعه على المضيف. <br><br> <code>## <br> # Validate will prevent bad files, no need to revert <br> # Jinja2 template will add include line <br> ## <br> - name: Ensure sudoers file <br> template: <br> src: sudoers.j2 <br> dest: /etc/sudoers <br> owner: root <br> group: "{{ sysgroup }}" <br> mode: 0440 <br> backup: yes <br> validate: /usr/sbin/visudo -cf %s <br> register: sudochg <br></code> <br>  إذا تم تثبيت قالب جديد ، قم بتشغيل البرنامج النصي shell لإنشاء ملف المجموع الاختباري.  يقوم التحديث الشرطي بتحديث ملف المجموع الاختباري عند تثبيت قالب sudoers ، أو في حالة عدم وجود ملف المجموع الاختباري.  نظرًا لأن عملية التشغيل تراقب أيضًا الملفات الأخرى ، فإننا نستخدم كود shell الموضح في البرنامج النصي المصدر: <br><br> <code>- name: sudoers checksum <br> shell: "grep -v '/etc/sudoers' {{ MD5FILE }} &gt; {{ MD5FILE }}.tmp ; {{ csbin }} /etc/sudoers &gt;&gt; {{ MD5FILE }} ; mv {{ MD5FILE }}.tmp {{ MD5FILE }}" <br> when: sudochg.changed or MD5STAT.exists == false <br></code> <br>  تتحقق وحدة الملفات من تثبيت الأذونات اللازمة: <br><br> <code>- name: Ensure MD5FILE permissions <br> file: <br> path: "{{ MD5FILE }}" <br> owner: root <br> group: "{{ sysgroup }}" <br> mode: 0600 <br> state: file <br></code> <br>  نظرًا لأن المعلمة الاحتياطية لا توفر أي خيارات لمعالجة النسخ الاحتياطية السابقة ، فسوف يتعين علينا الاهتمام بإنشاء الشفرة المناسبة بأنفسنا.  في المثال أدناه ، نستخدم المعلمة "تسجيل" وحقل "stdout_lines" لهذا الغرض. <br><br> <code>## <br> # List and clean up backup files. Retain 3 copies. <br> ## <br> - name: List /etc/sudoers.*~ files <br> shell: "ls -t /etc/sudoers*~ |tail -n +4" <br> register: LIST_SUDOERS <br> changed_when: false <br> <br> - name: Cleanup /etc/sudoers.*~ files <br> file: <br> path: "{{ item }}" <br> state: absent <br> loop: "{{ LIST_SUDOERS.stdout_lines }}" <br> when: LIST_SUDOERS.stdout_lines != "" <br></code> <br>  إتمام الحظر: <br><br> <code>## <br> # This conditional restricts what hosts this block runs on <br> ## <br> when: parhost != EXCLUDE <br> ... <br></code> <br>  حالة الاستخدام المقصود هي لعب هذا الدور على برج أنسبل.  يمكن تكوين تنبيهات برج Ansible بحيث في حالة حدوث فشل في تنفيذ المهمة ، سيتم إرسال التنبيهات إلى البريد الإلكتروني أو Slack أو بطريقة أخرى.  يعمل هذا الدور في Ansible أو Ansible Engine أو Ansible Tower. <br><br>  نتيجةً لذلك ، أزلنا كل شيء غير ضروري من البرنامج النصي ، وقمنا بإنشاء دور متعطش تمامًا يمكن أن يوفر الحالة المطلوبة لملف sudoers.  يتيح استخدام SCM التحكم في الإصدار ، ويوفر إدارة أكثر فعالية للتغيير والشفافية.  تتيح لك CI / CD مع Jenkins أو أدوات أخرى إعداد اختبار تلقائي لرمز Ansible للتغييرات المستقبلية.  يسمح لك دور Auditor في Ansible Tower بمراقبة وتطبيق المتطلبات التنظيمية. <br><br>  يمكن إزالة رمز العمل مع المجموع الاختباري من البرنامج النصي ، ولكن لهذا العميل سيحتاج أولاً إلى استشارة خدمة الأمان الخاصة به.  إذا لزم الأمر ، يمكن حماية نمط sudoers مع Ansible Vault.  أخيرًا ، استخدام المجموعات يتجنب كتابة المنطق باستخدام ويشمل ويستبعد. <br><br>  → يمكنك تنزيل الدور من GitHub على هذا <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الرابط</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar433792/">https://habr.com/ru/post/ar433792/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar433780/index.html">الانتقال من مجموعة UI إلى نظام التصميم في QIWI</a></li>
<li><a href="../ar433782/index.html">مثال عملي لإنشاء مكون العرض الخاص بك</a></li>
<li><a href="../ar433786/index.html">Fintech Digest: cryptocurrency هي خاصية ، تم إصدار عدد قياسي من بطاقات الائتمان في الاتحاد الروسي</a></li>
<li><a href="../ar433788/index.html">صفقة آمنة ومراجعات جديدة لحسابهم الخاص</a></li>
<li><a href="../ar433790/index.html">قوالب البناء المتقدمة متعددة المراحل</a></li>
<li><a href="../ar433796/index.html">كيف غزا هومو سابينس العالم. مهارات الاتصال والتفاوض</a></li>
<li><a href="../ar433798/index.html">HomeKit و ioBroker لنكن صداقات في المنزل</a></li>
<li><a href="../ar433800/index.html">استخدام وحدات تحكم Cypress في UDB PSoC لتقليل الانقطاعات في طابعة ثلاثية الأبعاد</a></li>
<li><a href="../ar433802/index.html">كيف ولماذا فزنا في مسار البيانات الكبيرة في Urban Tech Challenge Hackathon</a></li>
<li><a href="../ar433804/index.html">شبكات كثافة الخليط</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>