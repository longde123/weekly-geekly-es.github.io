<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèõÔ∏è üë¥ üëÜüèø Aprendizaje STM8S Inicio lento. Parte 0 ü§∏ üë®üèº‚Äçüíª üë®üèΩ‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La familia MK STM8S en relaci√≥n con el STM8L / 32 tiene un arsenal de perif√©ricos m√°s peque√±o, pero le permite comprender f√°cilmente los conceptos b√°s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprendizaje STM8S Inicio lento. Parte 0</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465597/"> <abbr title="Microcontrolador">La</abbr> familia <abbr title="Microcontrolador">MK</abbr> STM8S en relaci√≥n con el STM8L / 32 tiene un arsenal de perif√©ricos m√°s peque√±o, pero le permite comprender f√°cilmente los conceptos b√°sicos y adquirir las habilidades necesarias para trabajar con sus hermanos mayores. <br><br><h2>  0. A qui√©n est√° orientado el material, por qu√© y por qu√© </h2><br>  Al escribir este art√≠culo, supongo que el lector puede: <br><br><ul><li>  Lea atentamente (lo cual es raro) </li><li>  Un poco de trabajo con literatura t√©cnica en ingl√©s (bueno, o la motivaci√≥n para aprender, porque el primer idioma del programador es el ingl√©s) </li><li>  Soldadura (al menos habilidades m√≠nimas) </li><li>  Programaci√≥n en C (de nuevo, no todo es tan complicado) </li><li>  Google (sin √©l en ning√∫n lado) </li><li>  Usa un mult√≠metro y tiene otras habilidades b√°sicas (como "no meta los dedos en la cavidad") </li></ul><br>  Considero los objetivos del art√≠culo: <br><br><ul><li>  Descripci√≥n general para ejecutar todas las etapas del desarrollo de un sistema basado en un microcontrolador </li><li>  D√© las notas introductorias necesarias para una persona que pr√°cticamente no est√° dedicada </li><li>  Si es posible, el lector comprender√° d√≥nde, qu√© y c√≥mo encontrar </li></ul><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">(No significativo)</b> <div class="spoiler_text">  ¬øPor qu√© y por qu√©? <br><br>  Creo que tiene sentido hacer un curso detallado de programaci√≥n MK. <br><br>  Ser√© una ocasi√≥n para estudiar toda la periferia con m√°s detalle y en el camino ayudar√© a otros. <br>  S√© que ya hay una gran cantidad de art√≠culos e incluso cursos de capacitaci√≥n, pero tengo un enfoque ligeramente diferente.  (Quiz√°s recibir√© cr√≠ticas adecuadas, cambiar√© de opini√≥n y me unir√© a los chicos de MX Cube). <br><br>  Es triste ver c√≥mo los controladores stm se convierten en arduino. <br><br>  En cuanto a arduino: <br><br>  Existen 3 enfoques (que yo conozco, MB, simplemente no he crecido) para <abbr title="Software">el</abbr> desarrollo de <abbr title="Software">software</abbr> en MK: <br><br><ol><li>  Desarrollo de ensambladores </li><li>  Desarrollo para un modelo MK espec√≠fico </li><li>  Desarrollo utilizando HAL y bibliotecas similares. </li></ol><br>  1) Soy partidario de la opini√≥n de que si est√° construyendo una casa, entonces no debe quemar cada ladrillo de arcilla con sus propias manos, porque el ensamblador desaparece (aunque comenz√≥ con esto).  Velocidad de desarrollo demasiado baja. <br><br>  2) bibliotecas HAL, etc.  para un principiante, demasiados momentos "solo escribe as√≠" son opacos.  Porque tambi√©n en la basura. <br><br>  3) Considero que el proceso de creaci√≥n de software para un MK espec√≠fico es la opci√≥n m√°s saludable para un principiante; las habilidades adquiridas permitir√°n tratar con las series 8L y 32 (aunque duele hacerlo solo de acuerdo con la documentaci√≥n). <br><br>  Probablemente haya notado que Arduino no aparece en esta lista, porque es una plataforma <u>educativa</u> y no est√° dise√±ada para el desarrollo de dispositivos compactos sobre la base.  Pero el enfoque para programarlo por alguna raz√≥n (no lo s√©) se transfiere y se extiende a trav√©s de Internet.  E incluso utilizado en proyectos comerciales reales.  (representa: "Descargu√© la biblioteca en el foro, me conect√©, funcion√≥, no s√© c√≥mo funciona"). <br><br>  Sugiero, desde mi punto de vista, un enfoque acad√©mico y met√≥dico m√°s significativo. <br></div></div><br><h2>  1. La elecci√≥n del microcontrolador </h2><br>  Tengo varios STM8S105K6 en el paquete LQFP32, es de esta familia, as√≠ que lo elijo. <br><br>  Puede elegir cualquier MK dentro de la serie. <br><br>  Hay placas de Discovery listas de ST, puedes comprarlas a los chinos o pedirlas a otros recursos.  Hay tableros confeccionados para el STM8S103F3P6 y similares de los chinos. <br><br>  Pero, debe tenerse en cuenta que las tablas preparadas est√°n dise√±adas para el entrenamiento. <br><br>  En el sitio web del fabricante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">st.com</a> , encontramos nuestro MK y le descargamos documentos: <br><br>  Manual de referencia: RM0016: un documento com√∫n para todas las familias MK STM8S y STM8AF.  El siguiente es RM. <br>  Hoja de datos: Tengo un documento DS5855 para STM8S105C4 / 6, STM8S105K4 / 6 y STM8S105S4 / 6.  El siguiente es DS. <br><br>  De las cosas deliciosas que tiene (superficialmente): <br><br><ul><li>  Soporte de 16 MHz </li><li>  32 KB Flash, 1 KB EEPROM y 2 KB RAM </li><li>  Potencia 2.95-5.5V </li><li>  Temporizadores de 8 y 16 bits. </li><li>  UART, SPI, I2C </li><li>  <abbr title="Convertidor anal√≥gico a digital">ADC de</abbr> 10 bits </li><li>  hasta 38 entradas / salidas discretas </li></ul><br><h2>  2. Equipo requerido </h2><br>  Veo dos opciones para trabajar con MK: <br><br><ol><li><div class="spoiler">  <b class="spoiler_title">Ensamblar un dise√±o a partir de componentes individuales</b> <div class="spoiler_text">  Genial, genial, me gusta.  Mucha gente lo hace. <br><br>  En este caso, el MK necesitar√° el llamado flejado.  El plan es simple: <br><br><ol><li>  Tomamos una placa de prueba, en mi caso TQFP (32-64PIN) 0.8MM, soldar MK a ella </li><li>  Llevamos una soldadura PLS-2x40 de doble hilera a los agujeros que conducen a las conclusiones de MK </li><li>  Tomamos una placa impresa (tengo 9x15 cm) y soldamos el √∫ltimo s√°ndwich en ella </li><li>  Nos fijamos en RM punto 7. Fuente de alimentaci√≥n, <u>leemos</u> .  Est√° escrito que necesita un condensador que conecte el pin VCAP y nuestra fuente de alimentaci√≥n de 0V.  Tambi√©n est√° escrito que necesita mirar con m√°s detalle en DS a un MK espec√≠fico en la secci√≥n de caracter√≠sticas electicas.  Para m√≠, esta es la cl√°usula 10.3.1 del capaitor externo VCAP con referencia a la Tabla 18, donde el valor nominal es 470 - 3300 nF.  Tom√© 1 mF (en el circuito C3).  (por qu√© lo necesitas, espero que lo leas t√∫ mismo en RM) </li><li>  Ibid. En DS en la cl√°usula 10.3.8.  Restablecer las caracter√≠sticas del pin nos encontramos con la capacidad del condensador 0.1mF (en el circuito C4).  La resistencia R4 con un valor nominal de 10 kOhm se usa en placas de depuraci√≥n y varias notas de aplicaci√≥n, aunque dentro del MK ya hay una resistencia pull-up con un valor nominal de 30 a 80 kOhm (si cree en el mismo DS).  Paralelamente al condensador C4 ponemos nuestro bot√≥n de reinicio.  Tal patr√≥n de reinicio se puede ver, por ejemplo, en la nota de Desighn DN0005. </li><li>  Adem√°s, a ST le gusta agregar capacitores de potencia de 100nF a las placas de depuraci√≥n, en la cantidad de N pines conectados a +1 de potencia.  El diagrama muestra solo las piezas C1, C2 y C5 3, y no las solde en el tablero, pero usted entendi√≥ el significado.  Funcionar√° en la mesa sin ellos, pero en el desarrollo comercial real es mejor ocuparse de este asunto al reproducir la placa del dispositivo. </li><li>  Solucione el conector de programaci√≥n SWIM (lo hago desde PLS-1x40) </li></ol><br>  Tengo un milagro: <br><br><img src="https://habrastorage.org/webt/oh/ll/d5/ohlld5z9iiuxmlnc6djwgbqe_-w.png"><br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Comprar una placa terminada (que no le ahorra trabajar con un soldador)</b> <div class="spoiler_text">  Genial, genial, me gusta.  Mucha gente lo hace. <br><br>  Vale la pena familiarizarse con la configuraci√≥n de la placa, si es una placa de ST, entonces es inmediatamente con el programador y se conecta con un cable USB tipo B.  El sitio ST tendr√° un diagrama en la p√°gina del producto.  En el tablero habr√° botones, LED, tweeters, botones capacitivos y otros encantos con los que puedes jugar. <br><br>  Si el tablero es chino, a menudo los tableros sin un programador, necesitar√° un programador. <br><br>  Las pantallas de serigraf√≠a de los nombres de las conclusiones son mejores para no creer y verificar dos veces en comparaci√≥n con DS. <br></div></div></li></ol><br>  No considero trabajar con paneles de contactos porque no lo uso. <br><br>  Adem√°s, necesito un programador, tengo un ST-Link V2 chino.  Capaz de programar y STM8 y STM32. <br><br><h2>  3. Elegir un IDE </h2><br>  Para m√≠, la cuesti√≥n de elecci√≥n a√∫n no es relevante, trabajo en el IAR para STM8, porque hizo un proyecto en el que estoy trabajando actualmente, por la misma raz√≥n que la versi√≥n anterior. <br><br>  Vamos al sitio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">iar.com</a> , en la b√∫squeda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tecleamos</a> el modelo de nuestro MK. <br>  Descargue el IAR Embedded Workbench para STM8, seleccione la evaluaci√≥n de tama√±o limitado al instalar y ponga un l√≠mite de 8 KB de c√≥digo.  O comprar  Hay versiones pirateadas de recursos prohibidos en el territorio de la Federaci√≥n de Rusia, pero no es adecuado para proyectos comerciales. <br><br>  Las instrucciones de instalaci√≥n est√°n en el instalador o en Google. <br>  Estoy usando la versi√≥n 6.5.3.2581. <br>  Instale el entorno, junto con el controlador para el programador. <br><br><h2>  4. Crear un proyecto </h2><br>  Vaya al IDE, vaya a Proyecto -&gt; Crear nuevo proyecto -&gt; C ++ <br><br>  Haga clic en Aceptar, seleccione el directorio (preferiblemente sin cir√≠lico y espacios), seleccione el nombre (sin espacios y cir√≠lico). <br><br>  Vamos a la carpeta ra√≠z de nuestro IDE y encontramos la carpeta inc, para m√≠ la ruta: <br><br><pre><code class="plaintext hljs">C:\Program Files (x86)\IAR Systems\Embedded Workbench 6.5\stm8\inc</code> </pre> <br><br>  Entre los archivos de encabezado iostm8 encontramos nuestro modelo MK, para m√≠: <br><br><pre> <code class="plaintext hljs">iostm8s105k6.h</code> </pre> <br>  Lo conectamos al principio y agregamos un bucle infinito. <br><br><div class="spoiler">  <b class="spoiler_title">Resultado:</b> <div class="spoiler_text"><pre> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#include&lt;iostm8s105k6.h&gt; //  int main() { while(1){ //  } return 0; }</span></span></code> </pre><br></div></div><br>  En el men√∫ Proyecto -&gt; Opciones -&gt; Opciones generales en la columna Dispositivo, seleccione su MK. <br><br>  En Proyecto -&gt; Opciones -&gt; Depurador en la columna Controlador, seleccione ST-LINK. <br><br>  Busque el bot√≥n Descargar y depurar en la barra de herramientas. <br>  En la primera compilaci√≥n, el entorno le pedir√° que seleccione el nombre del archivo .eww.  (Nombre lo mismo que el proyecto). <br><br>  En la parte inferior de la ventana del registro de depuraci√≥n debe haber mensajes que: <br><br><ul><li>  Preprocesador para STM8: se inici√≥ el preprocesador </li><li>  Depurador para STM8 - comenz√≥ el depurador </li><li>  Conectado al sistema de depuraci√≥n SWIM STM8 - conectado a MK </li><li>  Debugee cargado: se ha producido una descarga de firmware </li><li>  Reinicio de destino: se ha producido un reinicio </li></ul><br>  Estamos en modo de depuraci√≥n, pero el programa est√° en pausa. <br>  En el mismo lugar en la barra de herramientas encontramos y presionamos el bot√≥n Ir. <br>  Lanzamos MK en modo de depuraci√≥n. <br><br>  Haga clic en Detener depuraci√≥n, la depuraci√≥n se detiene, pero el programador alimenta el MK y luego ejecuta el programa, es decir, gira un bucle sin fin y no hace nada. <br><br><h2>  Resumen </h2><br>  El resultado fue una breve descripci√≥n general y una introducci√≥n a la programaci√≥n de la serie STM8S de MK sin programarla.  Result√≥ solo la base para el trabajo, a partir de esto generalmente todo comienza, con el ensamblaje del dise√±o. <br><br>  No veo el punto con m√°s detalle. <br><br>  En muchos art√≠culos, despu√©s de la introducci√≥n, literalmente despu√©s de un par de l√≠neas, los LED parpadean, lo que no entiendo. <br><br>  El cumplimiento de los objetivos se puede juzgar por si el principiante logr√≥ hacer algo por su cuenta, utilizando la informaci√≥n que propuse.  (ventana de indicador Registro de depuraci√≥n) <br><br>  Gracias por su atencion </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465597/">https://habr.com/ru/post/465597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465585/index.html">C√≥mo administrar React Data Grid a trav√©s de Redux</a></li>
<li><a href="../465587/index.html">An√°lisis: qu√© es el mercado OTC y qu√© transacciones se realizan all√≠</a></li>
<li><a href="../465589/index.html">Gu√≠a de inicio r√°pido de Pilot y PoC</a></li>
<li><a href="../465591/index.html">La conferencia PHP de Europa Central se cancel√≥ debido al hecho de que no hab√≠a mujeres entre los oradores</a></li>
<li><a href="../465595/index.html">5G viene a nosotros?</a></li>
<li><a href="../465599/index.html">IPFS sin dolor (pero eso no es exacto)</a></li>
<li><a href="../465601/index.html">¬øPor qu√© necesita DevOps y qui√©nes son especialistas en DevOps?</a></li>
<li><a href="../465603/index.html">Cursos vs pr√°cticas. ¬øC√≥mo ense√±amos midbells en SimbirSoft?</a></li>
<li><a href="../465605/index.html">El libro "Aprendizaje de refuerzo profundo en Python. OpenAI Gym y TensorFlow para profesionales ¬ª</a></li>
<li><a href="../465607/index.html">Comprensi√≥n de Lean y Agile en el desarrollo de software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>