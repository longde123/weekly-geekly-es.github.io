<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”¦ â™€ï¸ ğŸ¥ª Hilbert, Lebesgue ... et le vide ğŸ‘¨ğŸ¾â€ğŸŒ¾ â¬‡ï¸ â–¶ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sous la coupe, la question de savoir comment un bon algorithme d'indexation multidimensionnelle devrait Ãªtre organisÃ© est Ã©tudiÃ©e. Ã‰tonnamment, il n'y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hilbert, Lebesgue ... et le vide</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464057/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/fh/qp/fzfhqp64ark_qr2begezr_lvmha.jpeg" width="80%"></div><br>  Sous la coupe, la question de savoir comment un bon algorithme d'indexation multidimensionnelle devrait Ãªtre organisÃ© est Ã©tudiÃ©e.  Ã‰tonnamment, il n'y a pas tant d'options. <br><a name="habracut"></a><br><h4>  Indices unidimensionnels, arbres B </h4><br>  La mesure du succÃ¨s de l'algorithme de recherche sera considÃ©rÃ©e comme 2 faits - <br><br><ol><li>  l'Ã©tablissement du fait de sa prÃ©sence ou de son absence se produit pour le nombre logarithmique (par rapport Ã  la taille de l'index) de lectures de pages disque </li><li>  le coÃ»t d'Ã©mission d'un rÃ©sultat est proportionnel Ã  son volume </li></ol><br>  En ce sens, les arbres B rÃ©ussissent assez bien et la raison peut Ãªtre considÃ©rÃ©e comme l'utilisation d'un arbre Ã©quilibrÃ©.  La simplicitÃ© de l'algorithme est due Ã  la dimension unique de l'espace clÃ© - si nÃ©cessaire, divisez la page, il suffit de diviser par deux l'ensemble d'Ã©lÃ©ments triÃ©s de cette page.  GÃ©nÃ©ralement divisÃ© par le nombre d'Ã©lÃ©ments, bien que cela ne soit pas nÃ©cessaire. <br><br>  Parce que  les pages de l'arbre sont stockÃ©es sur le disque, on peut dire que l'arbre B a la capacitÃ© de convertir trÃ¨s efficacement l'espace clÃ© unidimensionnel en espace disque unidimensionnel. <br><br>  Lorsque vous remplissez un arbre avec plus ou moins de Â«bonne insertionÂ», et c'est un cas assez courant, les pages sont gÃ©nÃ©rÃ©es dans l'ordre de croissance des clÃ©s, alternant parfois avec des pages plus Ã©levÃ©es.  Il y a de fortes chances qu'ils soient Ã©galement sur le disque.  Ainsi, sans aucun effort, une localitÃ© de donnÃ©es Ã©levÃ©e est atteinte - les donnÃ©es dont la valeur est proche seront quelque part Ã  proximitÃ© et sur le disque. <br><br>  Bien sÃ»r, lors de l'insertion de valeurs dans un ordre alÃ©atoire, les clÃ©s et les pages sont gÃ©nÃ©rÃ©es de maniÃ¨re alÃ©atoire, Ã  la suite de quoi le soi-disant  fragmentation d'index.  Il existe Ã©galement des outils anti-fragmentation qui restaurent la localisation des donnÃ©es. <br><br>  Il semblerait qu'Ã  notre Ã©poque des disques RAID et SSD, l'ordre de lecture Ã  partir du disque n'a pas d'importance.  Mais, au contraire, il n'a pas la mÃªme signification qu'auparavant.  Il n'y a pas de transfert physique des tÃªtes dans le SSD, donc sa vitesse de lecture alÃ©atoire ne baisse pas des centaines de fois par rapport Ã  une lecture solide, comme un disque dur.  Et seulement une fois tous les 10 ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plus</a> . <br><br>  Rappelons que les B-arbres sont apparus en 1970 Ã  l'Ã¨re des bandes magnÃ©tiques et des tambours.  Lorsque la diffÃ©rence de vitesse d'accÃ¨s alÃ©atoire pour la bande et le tambour mentionnÃ©s Ã©tait beaucoup plus dramatique qu'en comparaison avec le disque dur et le SSD. <br><br>  De plus, 10 fois comptent Ã©galement.  Et ces 10 fois incluent non seulement les caractÃ©ristiques physiques du SSD, mais aussi le point fondamental - la prÃ©visibilitÃ© du comportement du lecteur.  Si le lecteur est trÃ¨s susceptible de demander le bloc suivant pour ce bloc, il est logique de le tÃ©lÃ©charger de maniÃ¨re proactive, par hypothÃ¨se.  Et si le comportement est chaotique, toutes les tentatives de prÃ©diction sont dÃ©nuÃ©es de sens et mÃªme nuisibles. <br><br><h4>  Indexation multidimensionnelle </h4><br>  De plus, nous traiterons de l'indice des points Ã  deux dimensions (X, Y), simplement parce qu'il est pratique et intuitif de travailler avec eux.  Mais les problÃ¨mes sont fondamentalement les mÃªmes. <br><br>  Une option simple, Â«non sophistiquÃ©eÂ» avec des indices sÃ©parÃ©s pour X et Y ne passe pas selon notre critÃ¨re de succÃ¨s.  Il ne donne pas le coÃ»t logarithmique d'obtention du premier point.  En fait, pour rÃ©pondre Ã  la question, y a-t-il quelque chose dans la mesure souhaitÃ©e, nous devons <br><br><ul><li>  faire une recherche dans l'index X et obtenir tous les identifiants de l'Ã©tendue de l'intervalle X </li><li>  similaire pour Y </li><li>  croisent ces deux ensembles d'identifiants </li></ul><br>  DÃ©jÃ , le premier Ã©lÃ©ment dÃ©pend de la taille de l'Ã©tendue et ne garantit pas le logarithme. <br><br>  Pour Ãªtre Â«rÃ©ussiÂ», un index multidimensionnel doit Ãªtre organisÃ© comme un arbre plus ou moins Ã©quilibrÃ©.  Cette dÃ©claration peut sembler controversÃ©e.  Mais l'exigence d'une recherche logarithmique nous dicte exactement un tel dispositif.  Pourquoi pas deux arbres ou plus?  DÃ©jÃ  considÃ©rÃ©e comme l'option "peu sophistiquÃ©e" et inadaptÃ©e avec deux arbres.  Il y en a peut-Ãªtre de convenables.  Mais deux arbres - c'est deux fois plus de verrous (y compris simultanÃ©s), deux fois plus cher, des chances significativement plus grandes d'attraper un blocage.  Si vous pouvez vous en sortir avec un seul arbre, vous devez absolument l'utiliser. <br><br>  Compte tenu de tout cela, le dÃ©sir de prendre comme base l'expÃ©rience trÃ¨s rÃ©ussie de l'arbre B et de la Â«gÃ©nÃ©raliserÂ» pour travailler avec des donnÃ©es bidimensionnelles est tout Ã  fait naturel. <br><br>  L'arbre R est donc apparu. <br><br><h4>  R-tree </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'arbre R</a> est organisÃ© comme suit: <br>  Au dÃ©part, nous avons une page vierge, ajoutez-y simplement des donnÃ©es (points). <br>  Mais ici, la page est pleine et elle doit Ãªtre divisÃ©e. <br>  Dans l'arbre B, les Ã©lÃ©ments de la page sont classÃ©s de maniÃ¨re naturelle, la question est donc de savoir combien couper.  Il n'y a pas d'ordre naturel dans l'arbre R.  Il y a deux options: <br><br><ul><li>  Mettez de l'ordre, c'est-Ã -dire  introduire une fonction qui, basÃ©e sur X&amp;Y, donnera une valeur selon laquelle les Ã©lÃ©ments de page seront ordonnÃ©s et divisÃ©s en fonction de cela.  Dans ce cas, l'index entier dÃ©gÃ©nÃ¨re en un arbre B rÃ©gulier construit Ã  partir des valeurs de la fonction spÃ©cifiÃ©e.  En plus des avantages Ã©vidents, il y a une grande question - bien, bien, nous avons indexÃ©, mais comment regarder?  Plus Ã  ce sujet plus tard, considÃ©rons d'abord la deuxiÃ¨me option. </li><li>  Divisez la page par critÃ¨res spatiaux.  Pour ce faire, chaque page doit Ãªtre affectÃ©e Ã  l'Ã©tendue des Ã©lÃ©ments situÃ©s sur / en dessous.  C'est-Ã -dire  la page racine a l'Ã©tendue de la couche entiÃ¨re.  Lors du fractionnement, deux pages (ou plus) sont gÃ©nÃ©rÃ©es, dont l'Ã©tendue est incluse dans l'Ã©tendue de la page parent (pour la recherche). </li></ul><br>  Il y a une pure incertitude.  Comment diviser exactement la page?  Horizontale ou verticale?  ProcÃ©der de la moitiÃ© de la surface ou de la moitiÃ© des Ã©lÃ©ments?  Mais que se passe-t-il si les points forment deux grappes, mais vous ne pouvez les sÃ©parer qu'avec une ligne diagonale?  Et s'il y a trois clusters? <br><br><hr><br>  La simple prÃ©sence de telles questions indique que l'arbre R n'est pas un algorithme.  Il s'agit d'un ensemble d'heuristiques, au moins pour fractionner une page lors de l'insertion, pour fusionner des pages lors de la suppression / modification, pour le prÃ©traitement pour l'insertion en bloc. <br><br>  L'heuristique implique la spÃ©cialisation d'un arbre particulier sur un type de donnÃ©es particulier.  C'est-Ã -dire  sur des ensembles de donnÃ©es d'un certain type, elle se trompe moins souvent.  "Lâ€™heuristique ne peut pas Ãªtre complÃ¨tement trompÃ©e, car  dans ce cas, ce serait un algorithme Â»Â©. <br><br>  Que signifie l'erreur heuristique dans ce contexte?  Par exemple, que la page sera fractionnÃ©e / fusionnÃ©e sans succÃ¨s et que les pages commenceront Ã  se chevaucher partiellement.  Si soudainement l'Ã©tendue de la recherche tombe sur la zone de chevauchement des pages, le coÃ»t de la recherche ne sera dÃ©jÃ  pas tout Ã  fait logarithmique.  Au fil du temps, lorsque vous insÃ©rez / supprimez, le nombre d'erreurs s'accumule et les performances de l'arborescence commencent Ã  se dÃ©grader. <br><br><img src="https://habrastorage.org/webt/uf/ls/nc/uflsncc4sbgqqokdgf9ofvlyole.png"><br>  <i>Figure 1 Voici un exemple d'arbre R *, qui est construit de maniÃ¨re naturelle.</i> <br><br><img src="https://habrastorage.org/webt/vw/f0/ic/vwf0icm5lrfl7yapbxzwm0rkipg.png"><br>  <i>Figure 2 Et ici, le mÃªme ensemble de donnÃ©es est prÃ©traitÃ© et l'arbre est construit par insertion en masse</i> <br><br>  On peut dire que l'arbre B se dÃ©grade Ã©galement avec le temps, mais il s'agit d'une dÃ©gradation lÃ©gÃ¨rement diffÃ©rente.  Les performances de l'arbre B diminuent du fait que ses pages ne sont pas alignÃ©es.  Ceci est facilement traitÃ© en Â«redressantÂ» l'arbre - dÃ©fragmentation.  Dans le cas d'un arbre R, il n'est pas si facile de s'en dÃ©barrasser, la structure de l'arbre lui-mÃªme est Â«courbeÂ» afin de corriger la situation, il doit Ãªtre complÃ¨tement reconstruit. <br><br>  Les gÃ©nÃ©ralisations de l'arbre R aux espaces multidimensionnels ne sont pas Ã©videntes.  Par exemple, lors du fractionnement des pages, nous avons minimisÃ© le pÃ©rimÃ¨tre des pages enfants.  Que minimiser dans le cas tridimensionnel?  Volume ou surface?  Et dans le cas Ã  huit dimensions?  Le bon sens n'est plus un conseiller. <br><br>  L'espace indexÃ© pourrait bien Ãªtre non isotrope.  Pourquoi ne pas indexer non seulement les points, mais leurs positions dans le temps, c'est-Ã -dire  (X, Y, t).  Dans ce cas, par exemple, les heuristiques basÃ©es sur le pÃ©rimÃ¨tre n'ont pas de sens puisque  empile la longueur Ã  intervalles de temps. <br><br>  L'impression gÃ©nÃ©rale de l'arbre R est quelque chose comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> crustacÃ©s Ã  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pieds branchiaux</a> .  Ceux-ci ont leur propre niche Ã©cologique dans laquelle il est difficile de rivaliser avec eux.  Mais dans le cas gÃ©nÃ©ral, ils n'ont aucune chance de concurrencer les animaux plus dÃ©veloppÃ©s. <br><br><h4>  Arbre quad </h4><br>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quadtree,</a> chaque page non-feuille a exactement quatre descendants, qui divisent Ã©galement son espace en quadrants. <br><br><img src="https://habrastorage.org/webt/wi/bp/ka/wibpkauhekq5ar01kbafsupfu9c.png" width="500"><br>  <i>Figure 3 Exemple d'un arbre quad construit</i> <br><br>  Ce n'est pas une bonne conception de base de donnÃ©es. <br><br><ul><li>  Chaque page ne rÃ©duit l'espace de recherche pour chaque coordonnÃ©e que deux fois.  Oui, cela fournit la complexitÃ© logarithmique de la recherche, mais c'est le logarithme de base 2, pas le nombre d'Ã©lÃ©ments sur la page, (mÃªme 100) comme dans un arbre B. </li><li>  Chaque page est petite, mais derriÃ¨re elle, vous devez toujours aller sur le disque. </li><li>  La profondeur de l'arbre quad doit Ãªtre limitÃ©e, sinon son dÃ©sÃ©quilibre affecte les performances.  Par consÃ©quent, sur des donnÃ©es fortement regroupÃ©es (par exemple, des maisons sur une carte - il y a beaucoup de villes dans les villes, peu dans les champs), une grande quantitÃ© de donnÃ©es peut s'accumuler sur les pages de feuilles.  Un index Ã  partir d'un index exact devient bloc et nÃ©cessite un post-traitement. <br><br>  Une taille de rÃ©seau mal sÃ©lectionnÃ©e (profondeur d'arbre) peut nuire aux performances.  NÃ©anmoins, je voudrais que les performances de l'algorithme ne dÃ©pendent pas de maniÃ¨re critique du facteur humain. <br></li><li>  Le coÃ»t de l'espace pour stocker un point est assez Ã©levÃ©. </li></ul><br><h4>  NumÃ©rotation des espaces </h4><br>  Il reste Ã  considÃ©rer la version prÃ©cÃ©demment diffÃ©rÃ©e avec une fonction qui, sur la base d'une clÃ© multidimensionnelle, calcule la valeur d'Ã©criture dans un arbre B rÃ©gulier. <br><br>  La construction d'un tel index est Ã©vidente, et l'index lui-mÃªme a tous les avantages de l'arbre B.  La seule question est de savoir si cet index peut Ãªtre utilisÃ© pour une recherche efficace. <br><br>  Il existe un grand nombre de ces fonctions, on peut supposer que parmi elles il y a un petit nombre de Â«bonnesÂ», un grand nombre de Â«mauvaisesÂ» et un grand nombre de Â«tout simplement horriblesÂ». <br><br>  Trouver une fonction terrible n'est pas difficile - nous sÃ©rialisons la clÃ© dans une chaÃ®ne, considÃ©rons MD5 Ã  partir de celle-ci et obtenons une valeur complÃ¨tement inutile pour nos besoins. <br><br>  Et comment aborder le bien?  Il a dÃ©jÃ  Ã©tÃ© dit qu'un index utile fournit la Â«localitÃ©Â» des donnÃ©es - des points qui sont proches dans l'espace et sont souvent proches les uns des autres lorsqu'ils sont enregistrÃ©s sur le disque.  AppliquÃ©e Ã  la fonction souhaitÃ©e, cela signifie que pour des points spatialement proches, elle donne des valeurs proches. <br><br>  Une fois dans l'index, les valeurs calculÃ©es apparaÃ®tront sur les pages "physiques" dans l'ordre de leurs valeurs.  Du point de vue du Â«sens physiqueÂ», l'Ã©tendue de la recherche devrait affecter le moins de pages d'index physique possible.  Ce qui est gÃ©nÃ©ralement Ã©vident.  De ce point de vue, les courbes de numÃ©rotation qui Â«tirentÂ» les donnÃ©es sont Â«mauvaisesÂ».  Et ceux qui Â«se confondent en bouleÂ» - plus prÃ¨s du Â«bienÂ». <br><br><h4>  NumÃ©rotation naÃ¯ve </h4><br>  Une tentative de presser un segment dans un carrÃ© (hypercube) tout en restant dans la logique de l'espace unidimensionnel, c'est-Ã -dire  couper en morceaux et remplir le carrÃ© avec ces morceaux.  Ã‡a pourrait Ãªtre <br><br><img src="https://habrastorage.org/webt/m6/1z/fp/m61zfp6xf6wfzjkl2617fu1m6-m.png"><br>  <i>Balayage 4 lignes</i> <br><br><img src="https://habrastorage.org/webt/b9/9p/hc/b99phcgowrxhdvtinm--p4anow0.png"><br>  <i>5 entrelacÃ©</i> <br><br><img src="https://habrastorage.org/webt/ym/vh/e-/ymvhe-a64v_evksgfmdyxheuvuw.png"><br>  <i>Fig.6 spirale</i> <br><br>  ou ... vous pouvez trouver beaucoup d'options, elles ont toutes deux inconvÃ©nients <br><br><ol><li>  ambiguÃ¯tÃ©, par exemple: pourquoi la spirale est enroulÃ©e dans le sens horaire et non contre elle, ou pourquoi le balayage horizontal est d'abord le long de X puis le long de Y <br></li><li>  la prÃ©sence de longues piÃ¨ces droites qui rendent l'utilisation d'une telle mÃ©thode inefficace pour l'indexation multidimensionnelle (pÃ©rimÃ¨tre de grande page) </li></ol><br><h4>  FonctionnalitÃ©s d'accÃ¨s direct </h4><br>  Si la principale revendication des mÃ©thodes Â«naÃ¯vesÂ» est qu'elles gÃ©nÃ¨rent des pages trÃ¨s allongÃ©es, gÃ©nÃ©rons nous-mÃªmes les pages Â«correctesÂ». <br><br>  L'idÃ©e est simple - qu'il y ait une division externe de l'espace en blocs, attribuez un identifiant Ã  chaque bloc et ce sera la clÃ© de l'index spatial. <br><br><ul><li>  laissez les coordonnÃ©es X et Y sur 16 bits (pour plus de clartÃ©) </li><li>  nous allons couvrir l'espace avec des blocs carrÃ©s de taille 1024X1024 </li><li>  grossir les coordonnÃ©es, dÃ©caler de 10 bits vers la droite </li><li>  et obtenez l'ID de la page, collez les bits de X&amp;Y.  Maintenant, dans l'identifiant, les 6 chiffres infÃ©rieurs sont les plus anciens de X, les 6 chiffres suivants sont les plus anciens de Y <br></li></ul><br>  Il est facile de voir que les blocs forment un balayage de ligne, par consÃ©quent, pour trouver des donnÃ©es pour l'Ã©tendue de recherche, vous devrez effectuer une recherche / lecture dans l'index pour chaque ligne de blocs sur laquelle cette Ã©tendue est appliquÃ©e.  En gÃ©nÃ©ral, cette mÃ©thode fonctionne trÃ¨s bien, bien qu'elle prÃ©sente plusieurs inconvÃ©nients. <br><br><ul><li>  lors de la crÃ©ation d'un index, vous devez choisir la taille de bloc optimale, ce qui n'est pas Ã©vident </li><li>  si le bloc est significativement plus grand qu'une requÃªte classique, la recherche sera inefficace car  doivent trop lire et filtrer (post-traitement) <br></li><li>  si le bloc est significativement plus petit qu'une requÃªte typique, la recherche sera inefficace car  devra faire beaucoup de requÃªtes ligne par ligne <br></li><li>  si le bloc contient en moyenne trop ou trop peu de donnÃ©es, la recherche sera inefficace <br></li><li>  si les donnÃ©es sont regroupÃ©es (ex: Ã  la maison sur la carte), la recherche ne sera pas efficace partout </li><li>  si l'ensemble de donnÃ©es a augmentÃ©, il se peut bien que la taille du bloc cesse d'Ãªtre optimale. <br></li></ul><br>  En partie, ces problÃ¨mes sont rÃ©solus en crÃ©ant des blocs Ã  plusieurs niveaux.  Pour le mÃªme exemple: <br><br><ul><li>  veulent toujours des blocs 1024X1024 </li><li>  mais maintenant, nous aurons toujours des blocs de niveau supÃ©rieur de blocs infÃ©rieurs de taille 8X8 </li><li>  la clÃ© est disposÃ©e comme suit (de bas en haut): <br>  3 chiffres - chiffres 10 ... 12 coordonnÃ©es X <br>  3 chiffres - chiffres 10 ... 12 coordonnÃ©es Y <br>  3 chiffres - chiffres 13 ... 15 coordonnÃ©es X <br>  3 chiffres - chiffres 13 ... 15 coordonnÃ©es Y </li></ul><br><img src="https://habrastorage.org/webt/az/y5/h6/azy5h6jt0wtephbmp96lcsbs_rm.png"><br>  <i>7 blocs de bas niveau forment des blocs de haut niveau</i> <br><br>  Maintenant, pour les grandes Ã©tendues, vous n'avez pas besoin de lire un grand nombre de petits blocs, cela se fait au dÃ©triment des blocs de haut niveau. <br><br>  Fait intÃ©ressant, il Ã©tait possible de ne pas rendre les coordonnÃ©es plus rugueuses, mais de la mÃªme maniÃ¨re de les presser dans la clÃ©.  Dans ce cas, le post-filtrage serait moins cher car  se produirait lors de la lecture de l'index. <br><br>  Les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">index GRID</a> spatiaux sont organisÃ©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans MS SQL</a> de la mÃªme maniÃ¨re; jusqu'Ã  4 niveaux de bloc y sont autorisÃ©s. <br><br><img src="https://habrastorage.org/webt/dn/kx/r_/dnkxr_kdijxhpjpggh3sgvoh2lm.png"><br>  <i>Fig.8 Index GRID</i> <br><br>  Une autre faÃ§on intÃ©ressante d'indexation directe consiste Ã  utiliser un arbre quadruple pour le partitionnement externe de l'espace. <br><br>  L'arbre quad est utile en ce qu'il peut s'adapter Ã  la densitÃ© des objets, car  lorsque le nÅ“ud dÃ©borde, il se divise.  Par consÃ©quent, lorsque la densitÃ© des objets est Ã©levÃ©e, les blocs se rÃ©vÃ¨lent petits et vice versa.  Cela rÃ©duit le nombre d'appels d'index vides. <br><br>  Certes, l'arbre quad est une construction peu pratique pour la reconstruction Ã  la volÃ©e, il est avantageux de le faire de temps en temps. <br><br>  De la chose agrÃ©able, lors de la reconstruction d'un arbre quadruple, il n'est pas nÃ©cessaire de reconstruire l'index si les blocs sont identifiÃ©s par le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code Morton</a> et les objets sont encodÃ©s Ã  l'aide de celui-ci.  Voici l'astuce: si les coordonnÃ©es du point sont encodÃ©es avec un code Morton, l'identifiant de page est un prÃ©fixe dans ce code.  Lors de la recherche de donnÃ©es de page, toutes les clÃ©s comprises entre [prÃ©fixe] 00 ... 00B et [prÃ©fixe] 11 ... 11B sont sÃ©lectionnÃ©es, si la page est divisÃ©e, cela signifie que seul le prÃ©fixe de ses descendants s'est allongÃ©. <br><br><h4>  FonctionnalitÃ©s similaires </h4><br>  La premiÃ¨re chose qui me vient Ã  l'esprit lorsque l'on mentionne des fonctions auto-similaires est le Â«balayage des courbesÂ».  "Une courbe notable est une cartographie continue, dont le domaine est le segment unitaire [0, 1], et le domaine est l'espace euclidien (plus strictement, topologique)."  Un exemple est la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">courbe de Peano.</a> <br><br><img src="https://habrastorage.org/webt/if/1t/yo/if1tyoie_5uobqmnznsudpfnoau.png"><br>  <i>Fig.9 premiÃ¨res itÃ©rations de la courbe de Peano</i> <br><br>  Dans le coin infÃ©rieur gauche se trouve le dÃ©but de la zone de dÃ©finition (et la valeur zÃ©ro de la fonction), dans le coin supÃ©rieur droit la fin (et 1), chaque fois que nous dÃ©plaÃ§ons 1 Ã©tape, ajoutez 1 / (N * N) Ã  la valeur (Ã  condition que N - degrÃ© 3, bien sÃ»r).  Par consÃ©quent, dans le coin supÃ©rieur droit, la valeur atteint 1. Si nous en ajoutons un Ã  chaque Ã©tape, une telle fonction numÃ©rote simplement le rÃ©seau carrÃ© de maniÃ¨re sÃ©quentielle, ce que nous voulions. <br><br>  Toutes les courbes de balayage sont auto-similaires.  Dans ce cas, le simplexe est un carrÃ© de 3 x 3. Ã€ chaque itÃ©ration, chaque point du simplexe se transforme en le mÃªme simplexe, pour assurer la continuitÃ©, il faut recourir Ã  des mappings (flips). <br><br>  <b>L'autosimilaritÃ©</b> est une qualitÃ© trÃ¨s importante pour nous.  Cela donne de l'espoir pour la valeur logarithmique de la recherche.  Par exemple, pour un simplexe 3x3, tous les nombres gÃ©nÃ©rÃ©s dans chacun des 9 carrÃ©s Ã©lÃ©mentaires par des itÃ©rations de dÃ©tail ultÃ©rieures seront dans la mÃªme plage.  Tout simplement parce que le nombre est le chemin parcouru depuis le dÃ©but.  C'est-Ã -dire  si vous divisez l'Ã©tendue en 9 parties, le contenu de chacune d'elles peut Ãªtre obtenu par une traversÃ©e d'index.  Et ainsi de suite rÃ©cursivement, chacun des 9 sous-carrÃ©s de chacun des carrÃ©s peut Ãªtre obtenu par une seule requÃªte sur l'index (bien que dans une plage plus petite).  L'Ã©tendue de la recherche peut donc Ãªtre dÃ©composÃ©e en un petit nombre de sous-requÃªtes carrÃ©es, lues soit en totalitÃ©, soit avec un filtrage (autour du pÃ©rimÃ¨tre).  La figure 9 montre l'Ã©tendue de la recherche en vert, divisÃ©e par des lignes rouges en sous-requÃªtes. <br><br>  Cependant, l'autosimilaritÃ© ne rend pas automatiquement la courbe de numÃ©rotation appropriÃ©e Ã  des fins d'indexation. <br><br><ul><li>  la courbe doit remplir la grille carrÃ©e.  Nous indexons les valeurs dans les nÅ“uds du rÃ©seau carrÃ© et chaque fois nous ne voulons pas rechercher un nÅ“ud appropriÃ© sur le rÃ©seau, par exemple triangulaire.  Au moins pour Ã©viter les problÃ¨mes d'arrondi.  Ici, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tels (figure 10)</a> <br><br><img src="https://habrastorage.org/webt/86/7s/w1/867sw16ik5sqwl5syykidgylzuw.png"><br>  <i>Figure 10 lac ternaire Kokha</i> <br><br>  la courbe ne nous convient pas.  Bien qu'il Â«ponteÂ» parfaitement la surface. <br></li><li>  la courbe doit remplir l'espace sans lacunes ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dimension fractale</a> D = 2).  La voici (Fig.11): <br><img src="https://habrastorage.org/webt/kt/pi/ag/ktpiaglmp2_ylugv2cosyoyefsy.gif"><br>  <i>11 courbe fractale anonyme</i> <br><br>  ne convient pas non plus. <br></li><li>  la valeur de la fonction de numÃ©rotation (le chemin parcouru le long de la courbe depuis le dÃ©but) doit Ãªtre facilement calculÃ©e.  Il en rÃ©sulte qu'en raison de l'ambiguÃ¯tÃ© qui en rÃ©sulte, les courbes auto-touchantes ne conviennent pas, comme la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">courbe de Sierpinski</a> <br><br><img src="https://habrastorage.org/webt/83/p3/ck/83p3ckw6mejy8prdspy7wklo87m.png"><br>  <i>Fig.12 Courbe de Sierpinski</i> <br><br>  ou, qui est la mÃªme chose (pour nous), "en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">passant le triangle le long de Cesaro</a> " <br><br><img src="https://habrastorage.org/webt/ja/64/2v/ja642v4mwxfgneoknpnejnwwymc.png"><br>  <i>FIG.</i>  <i>13 Triangle Cesaro, pour plus de clartÃ©, l'angle droit est remplacÃ© par 85 Â°</i> </li><li>  il ne doit pas y avoir de paramÃ¨tres dans la fonction de numÃ©rotation, la courbe doit Ãªtre uniforme (prÃ©cise Ã  la symÃ©trie).         . :       ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ) <br><br><img src="https://habrastorage.org/webt/my/na/py/mynapy6g0pimgnlttggkw6tkjym.png"><br> <i>. 14 â€œA Plane Filling Curve for the Year 2017â€</i> <br><br>         ,    (  )       . <br>      , ,   ,        . </li></ul><br> <b></b> â€”    .   ,           .  ,   N-    N    (N-1) .     ,        ,        -. <br><br><img src="https://habrastorage.org/webt/zp/e8/th/zpe8thfxsdipyiwe5iwwpwo2jfk.png"><br> <i>. 15   3x3x3  </i> <br><br>     ,       . <br><br>   <b></b> . <br><br>       ,      .   ,            (  ).  ,           ,         .      ,         . <br><br>      . <br><br><ul><li>   ,        <br></li><li>        </li><li>    (   )          ,         .      ,    .   â€”         .      . </li><li>    â€”   ,        ..            . <br></li><li>        ,       .   ,      ,          .  ,     ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> â€”  ()     3...10%      () Z-. <br><br>   â€”   ,         . </li></ul><br><h4>  </h4><br>   ,         () ,    (   )  . <br><br> ,        ,    -    ,     . ,    ,     .  , <u>              </u> . <u>      </u> . <br><br>    ,   ?   . <br><br>         (). <br><br>   <b> </b> ,  ,    .    ,      . ,  3X3     3        X,       3   Y.        .       ()  5X5,      5 .     (ex: 2+3),  . <br><br> -     â€” ,    5-  7- ,        . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>        .     ,      . <br><br>   .          2 .        4 .            . <br><br>  ,   33    22  ,  3 &gt; 2, 44     33,  88   55.      ,     22â€¦ <br><br>     <b> </b> ?         .  Parce que  ,           .   3X3 ,       3 .    8x8      (.16),   â€”   64 . <br><br><img src="https://habrastorage.org/webt/l7/cf/dc/l7cfdcocdq3oe-xal_wbvc34t74.png"><br> <i>. 16      8x8</i> <br><br> ,   ,     2x2,  ,     . <br><br><img src="https://habrastorage.org/webt/ev/q3/b2/evq3b277yrimcisco3m9iqcksgk.png"><br> <i>. 17    2x2</i> <br><br> ,    ,  ,    â€œZâ€, â€œâ€  â€œâ€. <br>    ,  â€œâ€   ,      .       4 .   256  8- . <br><br>        , (       â€œâ€),   .         . <br><br><img src="https://habrastorage.org/webt/ij/pk/p2/ijpkp2sneivmayqaie38y91mylc.png"><br> <i>. 18 Z-</i> <br><br><img src="https://habrastorage.org/webt/bo/ar/oq/boaroq7scpwqyvargccwvv6i7li.png"><br> <i>. 19 â€œâ€ â€”  </i> <br><br>       ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   .       . <br><br><ul><li>    ,   ,           . <br>     â€” <br><ul><li>             (KMin, KMax) <br></li><li>     (    )  KMin, KMax <br></li><li>     ,  SMin,   ,  SMax <br></li><li>           .    , ,           SMin,    .      . </li><li>       ,   ,      ( ). <br></li><li>  Z-         .     z- â€”           ,    â€”  ( ). ,         ,      . </li></ul></li><li>       </li><li>      <ul><li>    </li><li>       ,  ,  .   ,           </li><li>        ,        .      â€” â€œ â€ &gt;=   â€œ â€   () ,   â€œ â€ <br><br><ul><li>  â€œ â€ &gt;    ,   ,   <br></li><li>       ,         ,   <br></li><li>  â€œ â€ &gt;    ,         ,        ,   </li><li>   â€œ â€ ==    ,     <br></li></ul></li><li>    <ul><li>     0  1 â€”     </li><li>    0  1 â€”        </li><li>    ,  ,   1,  0.     . </li></ul></li></ul><br></li></ul> Sur une courbe en Z, cela fonctionne comme ceci: <br><br><img src="https://habrastorage.org/files/8a1/104/6c5/8a11046c5b1749cc8a5dbd0ef1634eba.png"><br>  <i>FIG.</i>  <i>20 - fractionnement de sous-requÃªte en cas de courbe en Z</i> <br><br><img src="https://habrastorage.org/webt/zh/kv/n5/zhkvn5nfyem8jdgvdhbromo9oyq.png"><br>  <i>FIG.</i>  <i>21 Courbe de Hilbert, le cas oÃ¹ l'Ã©tendue de dÃ©part est le maximum</i> <br><br>  La premiÃ¨re Ã©tape est illustrÃ©e ici - couper la couche excÃ©dentaire de l'Ã©tendue maximale. <br><br><img src="https://habrastorage.org/webt/mq/2z/xe/mq2zxetkzhkkpxenqzoxxifkmp8.png"><br>  <i>FIG.</i>  <i>22 Courbe de Hilbert, zone de requÃªte de recherche</i> <br><br>  Et voici une ventilation en sous-requÃªtes, points trouvÃ©s et appels d'index dans la zone de requÃªte de recherche.  Il s'agit toujours d'une demande trÃ¨s infructueuse du point de vue de la courbe de Hilbert.  Habituellement, tout est beaucoup moins sanglant. <br><br>  Cependant, les statistiques de requÃªte indiquent que (Ã  peu prÃ¨s) sur les mÃªmes donnÃ©es, un index bidimensionnel basÃ© sur une courbe de Hilbert lit en moyenne 5% de pages de disque en moins, mais il fonctionne Ã  moitiÃ© plus lentement.  Le ralentissement est Ã©galement dÃ» au fait que le calcul lui-mÃªme (direct et inverse) de cette courbe est beaucoup plus difficile - 2000 horloges de processeur pour Hilbert contre 50 pour la courbe Z. <br><br>  En cessant de supporter la courbe de Hilbert, l'algorithme pourrait Ãªtre simplifiÃ©; Ã  premiÃ¨re vue, un tel ralentissement n'est pas justifiÃ©.  D'un autre cÃ´tÃ©, ce n'est qu'un cas Ã  deux dimensions, par exemple, dans un espace Ã  8 dimensions ou plus, les statistiques peuvent briller avec des couleurs complÃ¨tement nouvelles.  Cette question attend toujours des Ã©claircissements. <br><br>  <b>PS</b> : La courbe en Z est parfois appelÃ©e courbe d'entrelacement de bits en raison de l'algorithme de calcul de la valeur - les chiffres de chaque coordonnÃ©e tombent dans la valeur clÃ© Ã  travers une, ce qui est trÃ¨s technologique.  Mais vous pouvez, aprÃ¨s tout, entrelacer les dÃ©charges non pas individuellement, mais en paquets de 2,3 ... 8 ... piÃ¨ces.  Maintenant, si nous prenons 8 bits, alors sur une clÃ© 32 bits, nous obtenons un analogue de l'index GRID Ã  4 niveaux de MS SQL.  Et dans un cas extrÃªme - un pack de 32 bits chacun - un algorithme de balayage horizontal. <br><br>  Un tel indice (pas en minuscules, bien sÃ»r) peut Ãªtre trÃ¨s efficace, encore plus efficace que la courbe Z sur certains ensembles de donnÃ©es.  Malheureusement, en raison de la perte de gÃ©nÃ©ralitÃ©. <br><br>  <b>PPS</b> : L'index dÃ©crit est trÃ¨s similaire au travail avec un arbre quadruple.  L'Ã©tendue maximale est la page racine de l'arbre quadruple, elle a 4 descendants ... Et donc, l'algorithme peut Ãªtre attribuÃ© Ã  des "mÃ©thodes d'accÃ¨s direct". <br><br>  Les diffÃ©rences sont toujours fondamentales. <br><br>  L'arbre quadruple n'est stockÃ© nulle part, il est virtuel, intÃ©grÃ© dans la nature mÃªme des nombres.  Il n'y a aucune restriction sur la profondeur de l'arbre; nous obtenons des informations sur la population de descendants Ã  partir de la population de l'arbre principal.  De plus, l'arbre principal est lu une fois, on passe des valeurs les plus petites aux plus anciennes.  C'est drÃ´le, mais la structure physique de l'arbre B permet d'Ã©viter les requÃªtes vides et de limiter la profondeur de rÃ©cursivitÃ©. <br><br>  Une derniÃ¨re chose - Ã  chaque itÃ©ration, seuls deux descendants apparaissent - Ã  partir de lÃ , 4 sous-requÃªtes peuvent Ãªtre gÃ©nÃ©rÃ©es et ne peuvent pas Ãªtre gÃ©nÃ©rÃ©es s'il n'y a pas de donnÃ©es sous elles.  Dans le cas en 3 dimensions, nous parlerions de 8 descendants, dans le cas en 8 dimensions - environ 256. <br><br>  <b>PPPS</b> : au dÃ©but de cet article, nous avons parlÃ© de dichotomie lors de la recherche dans un index multidimensionnel - afin d'obtenir la valeur logarithmique, il est nÃ©cessaire de diviser une ressource finie Ã  chaque itÃ©ration - soit l'espace de valeur clÃ© ou l'espace de recherche.  Dans l'algorithme prÃ©sentÃ©, cette dichotomie s'est effondrÃ©e - nous partageons simultanÃ©ment la clÃ© et l'espace. <br><br>  Â«Je vis dans les deux cours et mes arbres sont toujours plus grands.Â» ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C</a> ) <br><br>  <b>PPPPS</b> : DÃ¨s qu'ils appellent la courbe Z, vous avez ici l'ordre Z et l'entrelacement des bits et le code / courbe de Morton.  Il est Ã©galement connu sous le nom de courbe de Lebesgue, afin de maintenir l'Ã©quilibre, l'auteur a intitulÃ© l'article, y compris en l'honneur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Henry Leon Lebesgue</a> . <br><br>  <b>PPPPPS</b> : Dans l'illustration du titre, la vue sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le glacier Fedchenko</a> est tout simplement magnifique et il y a suffisamment de vide.  En fait, l'auteur a Ã©tÃ© impressionnÃ© par la faÃ§on dont les diffÃ©rentes idÃ©es et mÃ©thodes s'enchaÃ®nent sans heurts, fusionnant progressivement en un seul algorithme.  Tout comme les nombreuses petites sources d'eau qui composent le bassin versant forment un seul ruissellement. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464057/">https://habr.com/ru/post/fr464057/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464041/index.html">Pourquoi les meilleurs pilotes de chasse ont souvent de gros ennuis</a></li>
<li><a href="../fr464043/index.html">Histoire du convertisseur Ethernet-CAN</a></li>
<li><a href="../fr464045/index.html">Comment je traine presque en temps rÃ©el en 1997</a></li>
<li><a href="../fr464053/index.html">Nota: Algorithme de sÃ©lection et de rotation des pistes</a></li>
<li><a href="../fr464055/index.html">Nous Ã©tudions les donnÃ©es collectÃ©es par Xiaomi Mi Band pour l'annÃ©e</a></li>
<li><a href="../fr464063/index.html">Couper le cÃ¢ble en 2019</a></li>
<li><a href="../fr464071/index.html">RÃ©volution ou douleur? Rapport Yandex React Hooks</a></li>
<li><a href="../fr464075/index.html">Introduction Ã  C. Message du siÃ¨cle dernier</a></li>
<li><a href="../fr464077/index.html">Non, vous n'avez pas besoin de delta ve Ã  50 km / s. Vous avez besoin de technologies additives (partie 1)</a></li>
<li><a href="../fr464079/index.html">Comment faire un vaisseau spatial de dÃ©collage et d'atterrissage horizontal sans technologie miracle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>