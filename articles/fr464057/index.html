<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî¶ ‚ôÄÔ∏è ü•™ Hilbert, Lebesgue ... et le vide üë®üèæ‚Äçüåæ ‚¨áÔ∏è ‚ñ∂Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sous la coupe, la question de savoir comment un bon algorithme d'indexation multidimensionnelle devrait √™tre organis√© est √©tudi√©e. √âtonnamment, il n'y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hilbert, Lebesgue ... et le vide</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464057/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/fh/qp/fzfhqp64ark_qr2begezr_lvmha.jpeg" width="80%"></div><br>  Sous la coupe, la question de savoir comment un bon algorithme d'indexation multidimensionnelle devrait √™tre organis√© est √©tudi√©e.  √âtonnamment, il n'y a pas tant d'options. <br><a name="habracut"></a><br><h4>  Indices unidimensionnels, arbres B </h4><br>  La mesure du succ√®s de l'algorithme de recherche sera consid√©r√©e comme 2 faits - <br><br><ol><li>  l'√©tablissement du fait de sa pr√©sence ou de son absence se produit pour le nombre logarithmique (par rapport √† la taille de l'index) de lectures de pages disque </li><li>  le co√ªt d'√©mission d'un r√©sultat est proportionnel √† son volume </li></ol><br>  En ce sens, les arbres B r√©ussissent assez bien et la raison peut √™tre consid√©r√©e comme l'utilisation d'un arbre √©quilibr√©.  La simplicit√© de l'algorithme est due √† la dimension unique de l'espace cl√© - si n√©cessaire, divisez la page, il suffit de diviser par deux l'ensemble d'√©l√©ments tri√©s de cette page.  G√©n√©ralement divis√© par le nombre d'√©l√©ments, bien que cela ne soit pas n√©cessaire. <br><br>  Parce que  les pages de l'arbre sont stock√©es sur le disque, on peut dire que l'arbre B a la capacit√© de convertir tr√®s efficacement l'espace cl√© unidimensionnel en espace disque unidimensionnel. <br><br>  Lorsque vous remplissez un arbre avec plus ou moins de ¬´bonne insertion¬ª, et c'est un cas assez courant, les pages sont g√©n√©r√©es dans l'ordre de croissance des cl√©s, alternant parfois avec des pages plus √©lev√©es.  Il y a de fortes chances qu'ils soient √©galement sur le disque.  Ainsi, sans aucun effort, une localit√© de donn√©es √©lev√©e est atteinte - les donn√©es dont la valeur est proche seront quelque part √† proximit√© et sur le disque. <br><br>  Bien s√ªr, lors de l'insertion de valeurs dans un ordre al√©atoire, les cl√©s et les pages sont g√©n√©r√©es de mani√®re al√©atoire, √† la suite de quoi le soi-disant  fragmentation d'index.  Il existe √©galement des outils anti-fragmentation qui restaurent la localisation des donn√©es. <br><br>  Il semblerait qu'√† notre √©poque des disques RAID et SSD, l'ordre de lecture √† partir du disque n'a pas d'importance.  Mais, au contraire, il n'a pas la m√™me signification qu'auparavant.  Il n'y a pas de transfert physique des t√™tes dans le SSD, donc sa vitesse de lecture al√©atoire ne baisse pas des centaines de fois par rapport √† une lecture solide, comme un disque dur.  Et seulement une fois tous les 10 ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plus</a> . <br><br>  Rappelons que les B-arbres sont apparus en 1970 √† l'√®re des bandes magn√©tiques et des tambours.  Lorsque la diff√©rence de vitesse d'acc√®s al√©atoire pour la bande et le tambour mentionn√©s √©tait beaucoup plus dramatique qu'en comparaison avec le disque dur et le SSD. <br><br>  De plus, 10 fois comptent √©galement.  Et ces 10 fois incluent non seulement les caract√©ristiques physiques du SSD, mais aussi le point fondamental - la pr√©visibilit√© du comportement du lecteur.  Si le lecteur est tr√®s susceptible de demander le bloc suivant pour ce bloc, il est logique de le t√©l√©charger de mani√®re proactive, par hypoth√®se.  Et si le comportement est chaotique, toutes les tentatives de pr√©diction sont d√©nu√©es de sens et m√™me nuisibles. <br><br><h4>  Indexation multidimensionnelle </h4><br>  De plus, nous traiterons de l'indice des points √† deux dimensions (X, Y), simplement parce qu'il est pratique et intuitif de travailler avec eux.  Mais les probl√®mes sont fondamentalement les m√™mes. <br><br>  Une option simple, ¬´non sophistiqu√©e¬ª avec des indices s√©par√©s pour X et Y ne passe pas selon notre crit√®re de succ√®s.  Il ne donne pas le co√ªt logarithmique d'obtention du premier point.  En fait, pour r√©pondre √† la question, y a-t-il quelque chose dans la mesure souhait√©e, nous devons <br><br><ul><li>  faire une recherche dans l'index X et obtenir tous les identifiants de l'√©tendue de l'intervalle X </li><li>  similaire pour Y </li><li>  croisent ces deux ensembles d'identifiants </li></ul><br>  D√©j√†, le premier √©l√©ment d√©pend de la taille de l'√©tendue et ne garantit pas le logarithme. <br><br>  Pour √™tre ¬´r√©ussi¬ª, un index multidimensionnel doit √™tre organis√© comme un arbre plus ou moins √©quilibr√©.  Cette d√©claration peut sembler controvers√©e.  Mais l'exigence d'une recherche logarithmique nous dicte exactement un tel dispositif.  Pourquoi pas deux arbres ou plus?  D√©j√† consid√©r√©e comme l'option "peu sophistiqu√©e" et inadapt√©e avec deux arbres.  Il y en a peut-√™tre de convenables.  Mais deux arbres - c'est deux fois plus de verrous (y compris simultan√©s), deux fois plus cher, des chances significativement plus grandes d'attraper un blocage.  Si vous pouvez vous en sortir avec un seul arbre, vous devez absolument l'utiliser. <br><br>  Compte tenu de tout cela, le d√©sir de prendre comme base l'exp√©rience tr√®s r√©ussie de l'arbre B et de la ¬´g√©n√©raliser¬ª pour travailler avec des donn√©es bidimensionnelles est tout √† fait naturel. <br><br>  L'arbre R est donc apparu. <br><br><h4>  R-tree </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'arbre R</a> est organis√© comme suit: <br>  Au d√©part, nous avons une page vierge, ajoutez-y simplement des donn√©es (points). <br>  Mais ici, la page est pleine et elle doit √™tre divis√©e. <br>  Dans l'arbre B, les √©l√©ments de la page sont class√©s de mani√®re naturelle, la question est donc de savoir combien couper.  Il n'y a pas d'ordre naturel dans l'arbre R.  Il y a deux options: <br><br><ul><li>  Mettez de l'ordre, c'est-√†-dire  introduire une fonction qui, bas√©e sur X&amp;Y, donnera une valeur selon laquelle les √©l√©ments de page seront ordonn√©s et divis√©s en fonction de cela.  Dans ce cas, l'index entier d√©g√©n√®re en un arbre B r√©gulier construit √† partir des valeurs de la fonction sp√©cifi√©e.  En plus des avantages √©vidents, il y a une grande question - bien, bien, nous avons index√©, mais comment regarder?  Plus √† ce sujet plus tard, consid√©rons d'abord la deuxi√®me option. </li><li>  Divisez la page par crit√®res spatiaux.  Pour ce faire, chaque page doit √™tre affect√©e √† l'√©tendue des √©l√©ments situ√©s sur / en dessous.  C'est-√†-dire  la page racine a l'√©tendue de la couche enti√®re.  Lors du fractionnement, deux pages (ou plus) sont g√©n√©r√©es, dont l'√©tendue est incluse dans l'√©tendue de la page parent (pour la recherche). </li></ul><br>  Il y a une pure incertitude.  Comment diviser exactement la page?  Horizontale ou verticale?  Proc√©der de la moiti√© de la surface ou de la moiti√© des √©l√©ments?  Mais que se passe-t-il si les points forment deux grappes, mais vous ne pouvez les s√©parer qu'avec une ligne diagonale?  Et s'il y a trois clusters? <br><br><hr><br>  La simple pr√©sence de telles questions indique que l'arbre R n'est pas un algorithme.  Il s'agit d'un ensemble d'heuristiques, au moins pour fractionner une page lors de l'insertion, pour fusionner des pages lors de la suppression / modification, pour le pr√©traitement pour l'insertion en bloc. <br><br>  L'heuristique implique la sp√©cialisation d'un arbre particulier sur un type de donn√©es particulier.  C'est-√†-dire  sur des ensembles de donn√©es d'un certain type, elle se trompe moins souvent.  "L‚Äôheuristique ne peut pas √™tre compl√®tement tromp√©e, car  dans ce cas, ce serait un algorithme ¬ª¬©. <br><br>  Que signifie l'erreur heuristique dans ce contexte?  Par exemple, que la page sera fractionn√©e / fusionn√©e sans succ√®s et que les pages commenceront √† se chevaucher partiellement.  Si soudainement l'√©tendue de la recherche tombe sur la zone de chevauchement des pages, le co√ªt de la recherche ne sera d√©j√† pas tout √† fait logarithmique.  Au fil du temps, lorsque vous ins√©rez / supprimez, le nombre d'erreurs s'accumule et les performances de l'arborescence commencent √† se d√©grader. <br><br><img src="https://habrastorage.org/webt/uf/ls/nc/uflsncc4sbgqqokdgf9ofvlyole.png"><br>  <i>Figure 1 Voici un exemple d'arbre R *, qui est construit de mani√®re naturelle.</i> <br><br><img src="https://habrastorage.org/webt/vw/f0/ic/vwf0icm5lrfl7yapbxzwm0rkipg.png"><br>  <i>Figure 2 Et ici, le m√™me ensemble de donn√©es est pr√©trait√© et l'arbre est construit par insertion en masse</i> <br><br>  On peut dire que l'arbre B se d√©grade √©galement avec le temps, mais il s'agit d'une d√©gradation l√©g√®rement diff√©rente.  Les performances de l'arbre B diminuent du fait que ses pages ne sont pas align√©es.  Ceci est facilement trait√© en ¬´redressant¬ª l'arbre - d√©fragmentation.  Dans le cas d'un arbre R, il n'est pas si facile de s'en d√©barrasser, la structure de l'arbre lui-m√™me est ¬´courbe¬ª afin de corriger la situation, il doit √™tre compl√®tement reconstruit. <br><br>  Les g√©n√©ralisations de l'arbre R aux espaces multidimensionnels ne sont pas √©videntes.  Par exemple, lors du fractionnement des pages, nous avons minimis√© le p√©rim√®tre des pages enfants.  Que minimiser dans le cas tridimensionnel?  Volume ou surface?  Et dans le cas √† huit dimensions?  Le bon sens n'est plus un conseiller. <br><br>  L'espace index√© pourrait bien √™tre non isotrope.  Pourquoi ne pas indexer non seulement les points, mais leurs positions dans le temps, c'est-√†-dire  (X, Y, t).  Dans ce cas, par exemple, les heuristiques bas√©es sur le p√©rim√®tre n'ont pas de sens puisque  empile la longueur √† intervalles de temps. <br><br>  L'impression g√©n√©rale de l'arbre R est quelque chose comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des</a> crustac√©s √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pieds branchiaux</a> .  Ceux-ci ont leur propre niche √©cologique dans laquelle il est difficile de rivaliser avec eux.  Mais dans le cas g√©n√©ral, ils n'ont aucune chance de concurrencer les animaux plus d√©velopp√©s. <br><br><h4>  Arbre quad </h4><br>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">quadtree,</a> chaque page non-feuille a exactement quatre descendants, qui divisent √©galement son espace en quadrants. <br><br><img src="https://habrastorage.org/webt/wi/bp/ka/wibpkauhekq5ar01kbafsupfu9c.png" width="500"><br>  <i>Figure 3 Exemple d'un arbre quad construit</i> <br><br>  Ce n'est pas une bonne conception de base de donn√©es. <br><br><ul><li>  Chaque page ne r√©duit l'espace de recherche pour chaque coordonn√©e que deux fois.  Oui, cela fournit la complexit√© logarithmique de la recherche, mais c'est le logarithme de base 2, pas le nombre d'√©l√©ments sur la page, (m√™me 100) comme dans un arbre B. </li><li>  Chaque page est petite, mais derri√®re elle, vous devez toujours aller sur le disque. </li><li>  La profondeur de l'arbre quad doit √™tre limit√©e, sinon son d√©s√©quilibre affecte les performances.  Par cons√©quent, sur des donn√©es fortement regroup√©es (par exemple, des maisons sur une carte - il y a beaucoup de villes dans les villes, peu dans les champs), une grande quantit√© de donn√©es peut s'accumuler sur les pages de feuilles.  Un index √† partir d'un index exact devient bloc et n√©cessite un post-traitement. <br><br>  Une taille de r√©seau mal s√©lectionn√©e (profondeur d'arbre) peut nuire aux performances.  N√©anmoins, je voudrais que les performances de l'algorithme ne d√©pendent pas de mani√®re critique du facteur humain. <br></li><li>  Le co√ªt de l'espace pour stocker un point est assez √©lev√©. </li></ul><br><h4>  Num√©rotation des espaces </h4><br>  Il reste √† consid√©rer la version pr√©c√©demment diff√©r√©e avec une fonction qui, sur la base d'une cl√© multidimensionnelle, calcule la valeur d'√©criture dans un arbre B r√©gulier. <br><br>  La construction d'un tel index est √©vidente, et l'index lui-m√™me a tous les avantages de l'arbre B.  La seule question est de savoir si cet index peut √™tre utilis√© pour une recherche efficace. <br><br>  Il existe un grand nombre de ces fonctions, on peut supposer que parmi elles il y a un petit nombre de ¬´bonnes¬ª, un grand nombre de ¬´mauvaises¬ª et un grand nombre de ¬´tout simplement horribles¬ª. <br><br>  Trouver une fonction terrible n'est pas difficile - nous s√©rialisons la cl√© dans une cha√Æne, consid√©rons MD5 √† partir de celle-ci et obtenons une valeur compl√®tement inutile pour nos besoins. <br><br>  Et comment aborder le bien?  Il a d√©j√† √©t√© dit qu'un index utile fournit la ¬´localit√©¬ª des donn√©es - des points qui sont proches dans l'espace et sont souvent proches les uns des autres lorsqu'ils sont enregistr√©s sur le disque.  Appliqu√©e √† la fonction souhait√©e, cela signifie que pour des points spatialement proches, elle donne des valeurs proches. <br><br>  Une fois dans l'index, les valeurs calcul√©es appara√Ætront sur les pages "physiques" dans l'ordre de leurs valeurs.  Du point de vue du ¬´sens physique¬ª, l'√©tendue de la recherche devrait affecter le moins de pages d'index physique possible.  Ce qui est g√©n√©ralement √©vident.  De ce point de vue, les courbes de num√©rotation qui ¬´tirent¬ª les donn√©es sont ¬´mauvaises¬ª.  Et ceux qui ¬´se confondent en boule¬ª - plus pr√®s du ¬´bien¬ª. <br><br><h4>  Num√©rotation na√Øve </h4><br>  Une tentative de presser un segment dans un carr√© (hypercube) tout en restant dans la logique de l'espace unidimensionnel, c'est-√†-dire  couper en morceaux et remplir le carr√© avec ces morceaux.  √áa pourrait √™tre <br><br><img src="https://habrastorage.org/webt/m6/1z/fp/m61zfp6xf6wfzjkl2617fu1m6-m.png"><br>  <i>Balayage 4 lignes</i> <br><br><img src="https://habrastorage.org/webt/b9/9p/hc/b99phcgowrxhdvtinm--p4anow0.png"><br>  <i>5 entrelac√©</i> <br><br><img src="https://habrastorage.org/webt/ym/vh/e-/ymvhe-a64v_evksgfmdyxheuvuw.png"><br>  <i>Fig.6 spirale</i> <br><br>  ou ... vous pouvez trouver beaucoup d'options, elles ont toutes deux inconv√©nients <br><br><ol><li>  ambigu√Øt√©, par exemple: pourquoi la spirale est enroul√©e dans le sens horaire et non contre elle, ou pourquoi le balayage horizontal est d'abord le long de X puis le long de Y <br></li><li>  la pr√©sence de longues pi√®ces droites qui rendent l'utilisation d'une telle m√©thode inefficace pour l'indexation multidimensionnelle (p√©rim√®tre de grande page) </li></ol><br><h4>  Fonctionnalit√©s d'acc√®s direct </h4><br>  Si la principale revendication des m√©thodes ¬´na√Øves¬ª est qu'elles g√©n√®rent des pages tr√®s allong√©es, g√©n√©rons nous-m√™mes les pages ¬´correctes¬ª. <br><br>  L'id√©e est simple - qu'il y ait une division externe de l'espace en blocs, attribuez un identifiant √† chaque bloc et ce sera la cl√© de l'index spatial. <br><br><ul><li>  laissez les coordonn√©es X et Y sur 16 bits (pour plus de clart√©) </li><li>  nous allons couvrir l'espace avec des blocs carr√©s de taille 1024X1024 </li><li>  grossir les coordonn√©es, d√©caler de 10 bits vers la droite </li><li>  et obtenez l'ID de la page, collez les bits de X&amp;Y.  Maintenant, dans l'identifiant, les 6 chiffres inf√©rieurs sont les plus anciens de X, les 6 chiffres suivants sont les plus anciens de Y <br></li></ul><br>  Il est facile de voir que les blocs forment un balayage de ligne, par cons√©quent, pour trouver des donn√©es pour l'√©tendue de recherche, vous devrez effectuer une recherche / lecture dans l'index pour chaque ligne de blocs sur laquelle cette √©tendue est appliqu√©e.  En g√©n√©ral, cette m√©thode fonctionne tr√®s bien, bien qu'elle pr√©sente plusieurs inconv√©nients. <br><br><ul><li>  lors de la cr√©ation d'un index, vous devez choisir la taille de bloc optimale, ce qui n'est pas √©vident </li><li>  si le bloc est significativement plus grand qu'une requ√™te classique, la recherche sera inefficace car  doivent trop lire et filtrer (post-traitement) <br></li><li>  si le bloc est significativement plus petit qu'une requ√™te typique, la recherche sera inefficace car  devra faire beaucoup de requ√™tes ligne par ligne <br></li><li>  si le bloc contient en moyenne trop ou trop peu de donn√©es, la recherche sera inefficace <br></li><li>  si les donn√©es sont regroup√©es (ex: √† la maison sur la carte), la recherche ne sera pas efficace partout </li><li>  si l'ensemble de donn√©es a augment√©, il se peut bien que la taille du bloc cesse d'√™tre optimale. <br></li></ul><br>  En partie, ces probl√®mes sont r√©solus en cr√©ant des blocs √† plusieurs niveaux.  Pour le m√™me exemple: <br><br><ul><li>  veulent toujours des blocs 1024X1024 </li><li>  mais maintenant, nous aurons toujours des blocs de niveau sup√©rieur de blocs inf√©rieurs de taille 8X8 </li><li>  la cl√© est dispos√©e comme suit (de bas en haut): <br>  3 chiffres - chiffres 10 ... 12 coordonn√©es X <br>  3 chiffres - chiffres 10 ... 12 coordonn√©es Y <br>  3 chiffres - chiffres 13 ... 15 coordonn√©es X <br>  3 chiffres - chiffres 13 ... 15 coordonn√©es Y </li></ul><br><img src="https://habrastorage.org/webt/az/y5/h6/azy5h6jt0wtephbmp96lcsbs_rm.png"><br>  <i>7 blocs de bas niveau forment des blocs de haut niveau</i> <br><br>  Maintenant, pour les grandes √©tendues, vous n'avez pas besoin de lire un grand nombre de petits blocs, cela se fait au d√©triment des blocs de haut niveau. <br><br>  Fait int√©ressant, il √©tait possible de ne pas rendre les coordonn√©es plus rugueuses, mais de la m√™me mani√®re de les presser dans la cl√©.  Dans ce cas, le post-filtrage serait moins cher car  se produirait lors de la lecture de l'index. <br><br>  Les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">index GRID</a> spatiaux sont organis√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans MS SQL</a> de la m√™me mani√®re; jusqu'√† 4 niveaux de bloc y sont autoris√©s. <br><br><img src="https://habrastorage.org/webt/dn/kx/r_/dnkxr_kdijxhpjpggh3sgvoh2lm.png"><br>  <i>Fig.8 Index GRID</i> <br><br>  Une autre fa√ßon int√©ressante d'indexation directe consiste √† utiliser un arbre quadruple pour le partitionnement externe de l'espace. <br><br>  L'arbre quad est utile en ce qu'il peut s'adapter √† la densit√© des objets, car  lorsque le n≈ìud d√©borde, il se divise.  Par cons√©quent, lorsque la densit√© des objets est √©lev√©e, les blocs se r√©v√®lent petits et vice versa.  Cela r√©duit le nombre d'appels d'index vides. <br><br>  Certes, l'arbre quad est une construction peu pratique pour la reconstruction √† la vol√©e, il est avantageux de le faire de temps en temps. <br><br>  De la chose agr√©able, lors de la reconstruction d'un arbre quadruple, il n'est pas n√©cessaire de reconstruire l'index si les blocs sont identifi√©s par le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code Morton</a> et les objets sont encod√©s √† l'aide de celui-ci.  Voici l'astuce: si les coordonn√©es du point sont encod√©es avec un code Morton, l'identifiant de page est un pr√©fixe dans ce code.  Lors de la recherche de donn√©es de page, toutes les cl√©s comprises entre [pr√©fixe] 00 ... 00B et [pr√©fixe] 11 ... 11B sont s√©lectionn√©es, si la page est divis√©e, cela signifie que seul le pr√©fixe de ses descendants s'est allong√©. <br><br><h4>  Fonctionnalit√©s similaires </h4><br>  La premi√®re chose qui me vient √† l'esprit lorsque l'on mentionne des fonctions auto-similaires est le ¬´balayage des courbes¬ª.  "Une courbe notable est une cartographie continue, dont le domaine est le segment unitaire [0, 1], et le domaine est l'espace euclidien (plus strictement, topologique)."  Un exemple est la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">courbe de Peano.</a> <br><br><img src="https://habrastorage.org/webt/if/1t/yo/if1tyoie_5uobqmnznsudpfnoau.png"><br>  <i>Fig.9 premi√®res it√©rations de la courbe de Peano</i> <br><br>  Dans le coin inf√©rieur gauche se trouve le d√©but de la zone de d√©finition (et la valeur z√©ro de la fonction), dans le coin sup√©rieur droit la fin (et 1), chaque fois que nous d√©pla√ßons 1 √©tape, ajoutez 1 / (N * N) √† la valeur (√† condition que N - degr√© 3, bien s√ªr).  Par cons√©quent, dans le coin sup√©rieur droit, la valeur atteint 1. Si nous en ajoutons un √† chaque √©tape, une telle fonction num√©rote simplement le r√©seau carr√© de mani√®re s√©quentielle, ce que nous voulions. <br><br>  Toutes les courbes de balayage sont auto-similaires.  Dans ce cas, le simplexe est un carr√© de 3 x 3. √Ä chaque it√©ration, chaque point du simplexe se transforme en le m√™me simplexe, pour assurer la continuit√©, il faut recourir √† des mappings (flips). <br><br>  <b>L'autosimilarit√©</b> est une qualit√© tr√®s importante pour nous.  Cela donne de l'espoir pour la valeur logarithmique de la recherche.  Par exemple, pour un simplexe 3x3, tous les nombres g√©n√©r√©s dans chacun des 9 carr√©s √©l√©mentaires par des it√©rations de d√©tail ult√©rieures seront dans la m√™me plage.  Tout simplement parce que le nombre est le chemin parcouru depuis le d√©but.  C'est-√†-dire  si vous divisez l'√©tendue en 9 parties, le contenu de chacune d'elles peut √™tre obtenu par une travers√©e d'index.  Et ainsi de suite r√©cursivement, chacun des 9 sous-carr√©s de chacun des carr√©s peut √™tre obtenu par une seule requ√™te sur l'index (bien que dans une plage plus petite).  L'√©tendue de la recherche peut donc √™tre d√©compos√©e en un petit nombre de sous-requ√™tes carr√©es, lues soit en totalit√©, soit avec un filtrage (autour du p√©rim√®tre).  La figure 9 montre l'√©tendue de la recherche en vert, divis√©e par des lignes rouges en sous-requ√™tes. <br><br>  Cependant, l'autosimilarit√© ne rend pas automatiquement la courbe de num√©rotation appropri√©e √† des fins d'indexation. <br><br><ul><li>  la courbe doit remplir la grille carr√©e.  Nous indexons les valeurs dans les n≈ìuds du r√©seau carr√© et chaque fois nous ne voulons pas rechercher un n≈ìud appropri√© sur le r√©seau, par exemple triangulaire.  Au moins pour √©viter les probl√®mes d'arrondi.  Ici, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tels (figure 10)</a> <br><br><img src="https://habrastorage.org/webt/86/7s/w1/867sw16ik5sqwl5syykidgylzuw.png"><br>  <i>Figure 10 lac ternaire Kokha</i> <br><br>  la courbe ne nous convient pas.  Bien qu'il ¬´ponte¬ª parfaitement la surface. <br></li><li>  la courbe doit remplir l'espace sans lacunes ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dimension fractale</a> D = 2).  La voici (Fig.11): <br><img src="https://habrastorage.org/webt/kt/pi/ag/ktpiaglmp2_ylugv2cosyoyefsy.gif"><br>  <i>11 courbe fractale anonyme</i> <br><br>  ne convient pas non plus. <br></li><li>  la valeur de la fonction de num√©rotation (le chemin parcouru le long de la courbe depuis le d√©but) doit √™tre facilement calcul√©e.  Il en r√©sulte qu'en raison de l'ambigu√Øt√© qui en r√©sulte, les courbes auto-touchantes ne conviennent pas, comme la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">courbe de Sierpinski</a> <br><br><img src="https://habrastorage.org/webt/83/p3/ck/83p3ckw6mejy8prdspy7wklo87m.png"><br>  <i>Fig.12 Courbe de Sierpinski</i> <br><br>  ou, qui est la m√™me chose (pour nous), "en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">passant le triangle le long de Cesaro</a> " <br><br><img src="https://habrastorage.org/webt/ja/64/2v/ja642v4mwxfgneoknpnejnwwymc.png"><br>  <i>FIG.</i>  <i>13 Triangle Cesaro, pour plus de clart√©, l'angle droit est remplac√© par 85 ¬∞</i> </li><li>  il ne doit pas y avoir de param√®tres dans la fonction de num√©rotation, la courbe doit √™tre uniforme (pr√©cise √† la sym√©trie).         . :       ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ) <br><br><img src="https://habrastorage.org/webt/my/na/py/mynapy6g0pimgnlttggkw6tkjym.png"><br> <i>. 14 ‚ÄúA Plane Filling Curve for the Year 2017‚Äù</i> <br><br>         ,    (  )       . <br>      , ,   ,        . </li></ul><br> <b></b> ‚Äî    .   ,           .  ,   N-    N    (N-1) .     ,        ,        -. <br><br><img src="https://habrastorage.org/webt/zp/e8/th/zpe8thfxsdipyiwe5iwwpwo2jfk.png"><br> <i>. 15   3x3x3  </i> <br><br>     ,       . <br><br>   <b></b> . <br><br>       ,      .   ,            (  ).  ,           ,         .      ,         . <br><br>      . <br><br><ul><li>   ,        <br></li><li>        </li><li>    (   )          ,         .      ,    .   ‚Äî         .      . </li><li>    ‚Äî   ,        ..            . <br></li><li>        ,       .   ,      ,          .  ,     ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ‚Äî  ()     3...10%      () Z-. <br><br>   ‚Äî   ,         . </li></ul><br><h4>  </h4><br>   ,         () ,    (   )  . <br><br> ,        ,    -    ,     . ,    ,     .  , <u>              </u> . <u>      </u> . <br><br>    ,   ?   . <br><br>         (). <br><br>   <b> </b> ,  ,    .    ,      . ,  3X3     3        X,       3   Y.        .       ()  5X5,      5 .     (ex: 2+3),  . <br><br> -     ‚Äî ,    5-  7- ,        . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>        .     ,      . <br><br>   .          2 .        4 .            . <br><br>  ,   33    22  ,  3 &gt; 2, 44     33,  88   55.      ,     22‚Ä¶ <br><br>     <b> </b> ?         .  Parce que  ,           .   3X3 ,       3 .    8x8      (.16),   ‚Äî   64 . <br><br><img src="https://habrastorage.org/webt/l7/cf/dc/l7cfdcocdq3oe-xal_wbvc34t74.png"><br> <i>. 16      8x8</i> <br><br> ,   ,     2x2,  ,     . <br><br><img src="https://habrastorage.org/webt/ev/q3/b2/evq3b277yrimcisco3m9iqcksgk.png"><br> <i>. 17    2x2</i> <br><br> ,    ,  ,    ‚ÄúZ‚Äù, ‚Äú‚Äù  ‚Äú‚Äù. <br>    ,  ‚Äú‚Äù   ,      .       4 .   256  8- . <br><br>        , (       ‚Äú‚Äù),   .         . <br><br><img src="https://habrastorage.org/webt/ij/pk/p2/ijpkp2sneivmayqaie38y91mylc.png"><br> <i>. 18 Z-</i> <br><br><img src="https://habrastorage.org/webt/bo/ar/oq/boaroq7scpwqyvargccwvv6i7li.png"><br> <i>. 19 ‚Äú‚Äù ‚Äî  </i> <br><br>       ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   .       . <br><br><ul><li>    ,   ,           . <br>     ‚Äî <br><ul><li>             (KMin, KMax) <br></li><li>     (    )  KMin, KMax <br></li><li>     ,  SMin,   ,  SMax <br></li><li>           .    , ,           SMin,    .      . </li><li>       ,   ,      ( ). <br></li><li>  Z-         .     z- ‚Äî           ,    ‚Äî  ( ). ,         ,      . </li></ul></li><li>       </li><li>      <ul><li>    </li><li>       ,  ,  .   ,           </li><li>        ,        .      ‚Äî ‚Äú ‚Äù &gt;=   ‚Äú ‚Äù   () ,   ‚Äú ‚Äù <br><br><ul><li>  ‚Äú ‚Äù &gt;    ,   ,   <br></li><li>       ,         ,   <br></li><li>  ‚Äú ‚Äù &gt;    ,         ,        ,   </li><li>   ‚Äú ‚Äù ==    ,     <br></li></ul></li><li>    <ul><li>     0  1 ‚Äî     </li><li>    0  1 ‚Äî        </li><li>    ,  ,   1,  0.     . </li></ul></li></ul><br></li></ul> Sur une courbe en Z, cela fonctionne comme ceci: <br><br><img src="https://habrastorage.org/files/8a1/104/6c5/8a11046c5b1749cc8a5dbd0ef1634eba.png"><br>  <i>FIG.</i>  <i>20 - fractionnement de sous-requ√™te en cas de courbe en Z</i> <br><br><img src="https://habrastorage.org/webt/zh/kv/n5/zhkvn5nfyem8jdgvdhbromo9oyq.png"><br>  <i>FIG.</i>  <i>21 Courbe de Hilbert, le cas o√π l'√©tendue de d√©part est le maximum</i> <br><br>  La premi√®re √©tape est illustr√©e ici - couper la couche exc√©dentaire de l'√©tendue maximale. <br><br><img src="https://habrastorage.org/webt/mq/2z/xe/mq2zxetkzhkkpxenqzoxxifkmp8.png"><br>  <i>FIG.</i>  <i>22 Courbe de Hilbert, zone de requ√™te de recherche</i> <br><br>  Et voici une ventilation en sous-requ√™tes, points trouv√©s et appels d'index dans la zone de requ√™te de recherche.  Il s'agit toujours d'une demande tr√®s infructueuse du point de vue de la courbe de Hilbert.  Habituellement, tout est beaucoup moins sanglant. <br><br>  Cependant, les statistiques de requ√™te indiquent que (√† peu pr√®s) sur les m√™mes donn√©es, un index bidimensionnel bas√© sur une courbe de Hilbert lit en moyenne 5% de pages de disque en moins, mais il fonctionne √† moiti√© plus lentement.  Le ralentissement est √©galement d√ª au fait que le calcul lui-m√™me (direct et inverse) de cette courbe est beaucoup plus difficile - 2000 horloges de processeur pour Hilbert contre 50 pour la courbe Z. <br><br>  En cessant de supporter la courbe de Hilbert, l'algorithme pourrait √™tre simplifi√©; √† premi√®re vue, un tel ralentissement n'est pas justifi√©.  D'un autre c√¥t√©, ce n'est qu'un cas √† deux dimensions, par exemple, dans un espace √† 8 dimensions ou plus, les statistiques peuvent briller avec des couleurs compl√®tement nouvelles.  Cette question attend toujours des √©claircissements. <br><br>  <b>PS</b> : La courbe en Z est parfois appel√©e courbe d'entrelacement de bits en raison de l'algorithme de calcul de la valeur - les chiffres de chaque coordonn√©e tombent dans la valeur cl√© √† travers une, ce qui est tr√®s technologique.  Mais vous pouvez, apr√®s tout, entrelacer les d√©charges non pas individuellement, mais en paquets de 2,3 ... 8 ... pi√®ces.  Maintenant, si nous prenons 8 bits, alors sur une cl√© 32 bits, nous obtenons un analogue de l'index GRID √† 4 niveaux de MS SQL.  Et dans un cas extr√™me - un pack de 32 bits chacun - un algorithme de balayage horizontal. <br><br>  Un tel indice (pas en minuscules, bien s√ªr) peut √™tre tr√®s efficace, encore plus efficace que la courbe Z sur certains ensembles de donn√©es.  Malheureusement, en raison de la perte de g√©n√©ralit√©. <br><br>  <b>PPS</b> : L'index d√©crit est tr√®s similaire au travail avec un arbre quadruple.  L'√©tendue maximale est la page racine de l'arbre quadruple, elle a 4 descendants ... Et donc, l'algorithme peut √™tre attribu√© √† des "m√©thodes d'acc√®s direct". <br><br>  Les diff√©rences sont toujours fondamentales. <br><br>  L'arbre quadruple n'est stock√© nulle part, il est virtuel, int√©gr√© dans la nature m√™me des nombres.  Il n'y a aucune restriction sur la profondeur de l'arbre; nous obtenons des informations sur la population de descendants √† partir de la population de l'arbre principal.  De plus, l'arbre principal est lu une fois, on passe des valeurs les plus petites aux plus anciennes.  C'est dr√¥le, mais la structure physique de l'arbre B permet d'√©viter les requ√™tes vides et de limiter la profondeur de r√©cursivit√©. <br><br>  Une derni√®re chose - √† chaque it√©ration, seuls deux descendants apparaissent - √† partir de l√†, 4 sous-requ√™tes peuvent √™tre g√©n√©r√©es et ne peuvent pas √™tre g√©n√©r√©es s'il n'y a pas de donn√©es sous elles.  Dans le cas en 3 dimensions, nous parlerions de 8 descendants, dans le cas en 8 dimensions - environ 256. <br><br>  <b>PPPS</b> : au d√©but de cet article, nous avons parl√© de dichotomie lors de la recherche dans un index multidimensionnel - afin d'obtenir la valeur logarithmique, il est n√©cessaire de diviser une ressource finie √† chaque it√©ration - soit l'espace de valeur cl√© ou l'espace de recherche.  Dans l'algorithme pr√©sent√©, cette dichotomie s'est effondr√©e - nous partageons simultan√©ment la cl√© et l'espace. <br><br>  ¬´Je vis dans les deux cours et mes arbres sont toujours plus grands.¬ª ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C</a> ) <br><br>  <b>PPPPS</b> : D√®s qu'ils appellent la courbe Z, vous avez ici l'ordre Z et l'entrelacement des bits et le code / courbe de Morton.  Il est √©galement connu sous le nom de courbe de Lebesgue, afin de maintenir l'√©quilibre, l'auteur a intitul√© l'article, y compris en l'honneur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Henry Leon Lebesgue</a> . <br><br>  <b>PPPPPS</b> : Dans l'illustration du titre, la vue sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le glacier Fedchenko</a> est tout simplement magnifique et il y a suffisamment de vide.  En fait, l'auteur a √©t√© impressionn√© par la fa√ßon dont les diff√©rentes id√©es et m√©thodes s'encha√Ænent sans heurts, fusionnant progressivement en un seul algorithme.  Tout comme les nombreuses petites sources d'eau qui composent le bassin versant forment un seul ruissellement. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464057/">https://habr.com/ru/post/fr464057/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464041/index.html">Pourquoi les meilleurs pilotes de chasse ont souvent de gros ennuis</a></li>
<li><a href="../fr464043/index.html">Histoire du convertisseur Ethernet-CAN</a></li>
<li><a href="../fr464045/index.html">Comment je traine presque en temps r√©el en 1997</a></li>
<li><a href="../fr464053/index.html">Nota: Algorithme de s√©lection et de rotation des pistes</a></li>
<li><a href="../fr464055/index.html">Nous √©tudions les donn√©es collect√©es par Xiaomi Mi Band pour l'ann√©e</a></li>
<li><a href="../fr464063/index.html">Couper le c√¢ble en 2019</a></li>
<li><a href="../fr464071/index.html">R√©volution ou douleur? Rapport Yandex React Hooks</a></li>
<li><a href="../fr464075/index.html">Introduction √† C. Message du si√®cle dernier</a></li>
<li><a href="../fr464077/index.html">Non, vous n'avez pas besoin de delta ve √† 50 km / s. Vous avez besoin de technologies additives (partie 1)</a></li>
<li><a href="../fr464079/index.html">Comment faire un vaisseau spatial de d√©collage et d'atterrissage horizontal sans technologie miracle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>