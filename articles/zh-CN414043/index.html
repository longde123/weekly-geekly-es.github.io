<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👍🏿 🛀🏻 👨🏽‍⚖️ 路由表分析，或者为什么还要Python网络工程师 🤹🏾 ☝🏽 🦓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈勃！ 这是我在哈布雷（Habré）上的第一篇文章，她是从一个专业论坛中的一个问题出生的。 这个问题看起来可以解释如下： 


- 有一组文本文件，包含来自各种网络设备的路由表的输出。 
- 每个文件都包含来自一台设备的信息； 
- 设备可以为路由表使用不同的输出格式。 
- 根据可用数据，根据要求...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>路由表分析，或者为什么还要Python网络工程师</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414043/"><p> 哈勃！ 这是我在哈布雷（Habré）上的第一篇文章，她是从一个专业论坛中的一个问题出生的。 这个问题看起来可以解释如下： </p><br><ul><li> 有一组文本文件，包含来自各种网络设备的路由表的输出。 </li><li> 每个文件都包含来自一台设备的信息； </li><li> 设备可以为路由表使用不同的输出格式。 </li><li> 根据可用数据，根据要求，有必要显示每个设备到任意子网或IP地址的路径。 </li><li> 输出应在路径的每个部分上包含有关路由表中条目的信息，数据包将沿着该表进行路由。 </li></ul><br><p> 我发现这个任务很有趣，并且回想了我自己计划在将来使用的网络实用程序，因此，在一个免费的晚上，考虑它的解决方案，我用Python 2.7编写了适用于Cisco IOS，IOS-XE和ASA格式的概念验证实现。基本要求。 </p><br><p> 在本文中，我将尝试重现思路和评论要点。 <br> 该材料适用于已经从根本上熟悉网络和Python基础的人们。 <br> 欢迎有兴趣的大家来养猫！ </p><a name="habracut"></a><br><h3> 免责声明 </h3><br><p> 这篇文章的作者是网络工程师，不是专业的开发人员 <del> 可能还不知道接口和抽象类之间的区别 </del> 但始终欢迎建设性的批评和反馈。 欢迎有经验的同事对代码，选定的方法和算法发表评论。 </p><br><p> 本文中的所有代码均以MIT许可分发，包括 它按“原样”提供，不提供任何形式的保证。 </p><br><h3> 澄清条件并选择求解算法 </h3><br><p> 考虑到介绍性内容，该任务可分为两个主要部分：使用路由表解析源文件以及使用初始化数据直接搜索路径。 <br> 如果需要，这种分隔还将允许从设备导入路由以任意搜索路径（例如，通过SNMP或REST API）。 </p><br><p> 为了提高性能，在运行脚本后初始化文件一次是有意义的。 <br> 文件解析器必须识别来自各种操作系统的路由表的格式。 接下来，将考虑针对IPv4的Cisco IOS，IOS-XE和ASA选项。 稍后可能会添加对其他格式和IPv6的支持。 </p><br><p> 如您所知，根据路由表选择路由是根据与最大长度前缀（最长前缀匹配）重合的原理进行的。 <br> 作为快速搜索此类匹配项的解决方案之一，您可以根据源数据构建前缀树。 由于我们对外部依赖项没有任何限制，因此让我们来<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">谈谈</a>完成的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SubnetTree</a>模块。 </p><br><p> 分析的网络部分上可能存在路由循环，应将其检测出来，并且不应影响脚本。 此外，在任何节点上可能都没有通往所需子网的路由。 这也应该考虑。 </p><br><p> 如果设备上有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VRF</a> ，则每个实例的路由表必须存储在单独的文件中，因为从拓扑的角度来看，它们是单独的路由器。 </p><br><p> 条件中未说明运行脚本的熨斗性能的限制，所分析路由表的数量和大小，但请记住这些限制。 <br> 该应用程序的特殊性建议一台现代设备的路由表中平均限制为1,000,000个条目。 截至2018年6月，在具有BGP Full View的路由器上，实际上可能有724,000条以上的路由。 <br> 根据粗略的估计以及每个1,000,000个前缀在内存中存储和处理的测试结果，将需要大约500MB的RAM。 因此，具有8GB RAM（我们仍要牢记2018年）的普通生产力工作站将使我们能够分析拓扑，其总容量高达14-16.000.000路由。 也就是说，大约有18-20个路由器的一部分，每个路由器上都有完整的视图。 <br> 在大多数情况下，这已经足够了，但是对于大型网络（例如压力），您需要将分析分为多个部分，或者将逻辑转移到内存不足的数据库中。 <br><del>  640KB足够每个人使用。 </del> 让我们关注一下内存版本。 </p><br><h3> 解析源文件并选择数据结构 </h3><br><p> 我们将把带有路由表的文件放在一个单独的子目录中，并使其成为变量： </p><br><pre><code class="python hljs">RT_DIRECTORY = <span class="hljs-string"><span class="hljs-string">"./routing_tables"</span></span></code> </pre> <br><p> 对于Cisco IOS和IOS-XE，路由表可能如下所示： </p><br><div class="spoiler">  <b class="spoiler_title">显示ip路由</b> <div class="spoiler_text"><pre> <code class="hljs powershell">S* <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">10.220</span></span>.<span class="hljs-number"><span class="hljs-number">88.1</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> is variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">10.220</span></span>.<span class="hljs-number"><span class="hljs-number">88.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> is directly connected, FastEthernet4 L <span class="hljs-number"><span class="hljs-number">10.220</span></span>.<span class="hljs-number"><span class="hljs-number">88.20</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> is directly connected, FastEthernet4 <span class="hljs-number"><span class="hljs-number">1.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> is subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets S <span class="hljs-number"><span class="hljs-number">1.1</span></span>.<span class="hljs-number"><span class="hljs-number">1.1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">212.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0.1</span></span> D EX <span class="hljs-number"><span class="hljs-number">10.1</span></span>.<span class="hljs-number"><span class="hljs-number">198.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">170</span></span>/<span class="hljs-number"><span class="hljs-number">1683712</span></span>] via <span class="hljs-number"><span class="hljs-number">172.16</span></span>.<span class="hljs-number"><span class="hljs-number">209.47</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>w2d, Vlan910 [<span class="hljs-number"><span class="hljs-number">170</span></span>/<span class="hljs-number"><span class="hljs-number">1683712</span></span>] via <span class="hljs-number"><span class="hljs-number">172.16</span></span>.<span class="hljs-number"><span class="hljs-number">60.33</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>w2d, Vlan60 [<span class="hljs-number"><span class="hljs-number">170</span></span>/<span class="hljs-number"><span class="hljs-number">1683712</span></span>] via <span class="hljs-number"><span class="hljs-number">10.25</span></span>.<span class="hljs-number"><span class="hljs-number">20.132</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>w2d, Vlan220 [<span class="hljs-number"><span class="hljs-number">170</span></span>/<span class="hljs-number"><span class="hljs-number">1683712</span></span>] via <span class="hljs-number"><span class="hljs-number">10.25</span></span>.<span class="hljs-number"><span class="hljs-number">20.9</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>w2d, Vlan20 <span class="hljs-number"><span class="hljs-number">4.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> is subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets O E2 <span class="hljs-number"><span class="hljs-number">4.4</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> [<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span>] via <span class="hljs-number"><span class="hljs-number">194.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>, FastEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">5.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> is subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets D EX <span class="hljs-number"><span class="hljs-number">5.5</span></span>.<span class="hljs-number"><span class="hljs-number">5.0</span></span> [<span class="hljs-number"><span class="hljs-number">170</span></span>/<span class="hljs-number"><span class="hljs-number">2297856</span></span>] via <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span>, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">6.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> is subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets B <span class="hljs-number"><span class="hljs-number">6.6</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> [<span class="hljs-number"><span class="hljs-number">200</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">195.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">04</span></span> <span class="hljs-number"><span class="hljs-number">172.16</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">26</span></span> is subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets i L2 <span class="hljs-number"><span class="hljs-number">172.16</span></span>.<span class="hljs-number"><span class="hljs-number">1.0</span></span> [<span class="hljs-number"><span class="hljs-number">115</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span>] via <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">172.20</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> is subnetted, <span class="hljs-number"><span class="hljs-number">3</span></span> subnets O <span class="hljs-number"><span class="hljs-number">172.20</span></span>.<span class="hljs-number"><span class="hljs-number">1.1</span></span> [<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">11</span></span>] via <span class="hljs-number"><span class="hljs-number">194.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>, FastEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span> O <span class="hljs-number"><span class="hljs-number">172.20</span></span>.<span class="hljs-number"><span class="hljs-number">3.1</span></span> [<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">11</span></span>] via <span class="hljs-number"><span class="hljs-number">194.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>, FastEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span> O <span class="hljs-number"><span class="hljs-number">172.20</span></span>.<span class="hljs-number"><span class="hljs-number">2.1</span></span> [<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">11</span></span>] via <span class="hljs-number"><span class="hljs-number">194.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>, FastEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> is variably subnetted, <span class="hljs-number"><span class="hljs-number">5</span></span> subnets, <span class="hljs-number"><span class="hljs-number">3</span></span> masks C <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> is directly connected, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> D <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">5.0</span></span>/<span class="hljs-number"><span class="hljs-number">26</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">2297856</span></span>] via <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span>, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> D <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">5.64</span></span>/<span class="hljs-number"><span class="hljs-number">26</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">2297856</span></span>] via <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span>, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> D <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">5.128</span></span>/<span class="hljs-number"><span class="hljs-number">26</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">2297856</span></span>] via <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span>, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> D <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">5.192</span></span>/<span class="hljs-number"><span class="hljs-number">27</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">2297856</span></span>] via <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span>, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> is subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets D <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0.1</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">2297856</span></span>] via <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">1.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span>, Serial0/<span class="hljs-number"><span class="hljs-number">0</span></span> O IA <span class="hljs-number"><span class="hljs-number">195.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">11</span></span>] via <span class="hljs-number"><span class="hljs-number">194.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>, FastEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span> O E2 <span class="hljs-number"><span class="hljs-number">212.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span>] via <span class="hljs-number"><span class="hljs-number">194.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span>, FastEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span> C <span class="hljs-number"><span class="hljs-number">194.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> is directly connected, FastEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> </div></div><br><p> 在Cisco ASA中，格式类似，但是子网掩码以十进制表示法显示，而不是前缀长度： </p><br><div class="spoiler">  <b class="spoiler_title">显示路线</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">S</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[3/0]</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">via</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.86</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.194</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">outside</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">C</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.86</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.194</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.254</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">is</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">directly</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">connected</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">outside</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">S</span></span>* 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[1/0]</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">via</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.86</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.194</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">outside</span></span></code> </pre> </div></div><br><p> 从示例中可以看到，尽管路由具有很大的多样性，但它们具有相同且可预测的结构，这意味着可以使用正则表达式对其进行处理。 <br> 出现了两个全球性小组： <em>本地+连通</em>路线以及其他所有路线。 <br> 使事情复杂化的可能性是，多线路线可能会有不同数量的下一个希望。 因此，逐行读取文件进行处理是有问题的。 一种解决方法是使用正则表达式的迭代器在完全加载到文本变量的文件中处理多个匹配项。 </p><br><p> 我们将考虑列出的要求和限制来编写正则表达式： </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Local and Connected route strings matching. REGEXP_ROUTE_LOCAL_CONNECTED = re.compile( '^(?P&lt;routeType&gt;[L|C])\s+' + '((?P&lt;ipaddress&gt;\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)' + '\s?' + '(?P&lt;maskOrPrefixLength&gt;(\/\d\d?)?' + '|(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)?))' + '\ is\ directly\ connected\,\ ' + '(?P&lt;interface&gt;\S+)', re.MULTILINE ) # Static and dynamic route strings matching. REGEXP_ROUTE = re.compile( '^(\S\S?\*?\s?\S?\S?)' + '\s+' + '((?P&lt;subnet&gt;\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)' + '\s?' + '(?P&lt;maskOrPrefixLength&gt;(\/\d\d?)?' +'|(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)?))' + '\s*' + '(?P&lt;viaPortion&gt;(?:\n?\s+(\[\d\d?\d?\/\d+\])\s+' + 'via\s+(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)(.*)\n?)+)', re.MULTILINE )</span></span></code> </pre> <br><p> 这两个表达式都包含<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">命名组</a> ，以方便在搜索匹配项和维护代码时检索数据。 <br> 特别是，从每个路由中，您需要获取一个前缀（ <em>子网</em> / <em>接口</em>和<em>maskOrPrefixLength组</em> ），以及有关其<em>路由</em>位置的信息（ <em>viaPortion</em> / <em>接口</em>组）。 </p><br><p> 由于表达式考虑了表示前缀的几个选项，所以<em>maskOrPrefixLength</em>组可以包含子网掩码或前缀长度。 我们将在处理过程中将其简化为单一格式；我们将讨论前缀的长度： </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convert_netmask_to_prefix_length</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask_or_pref)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> mask_or_pref: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> re.match(<span class="hljs-string"><span class="hljs-string">"^\/\d\d?$"</span></span>, mask_or_pref): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mask_or_pref <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> re.match(<span class="hljs-string"><span class="hljs-string">"^\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?$"</span></span>, mask_or_pref): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="hljs-string"><span class="hljs-string">"/"</span></span> + str(sum([bin(int(x)).count(<span class="hljs-string"><span class="hljs-string">"1"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> mask_or_pref.split(<span class="hljs-string"><span class="hljs-string">"."</span></span>)])) ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre> <br><p> 从<em>viaPortion</em>组添加正则表达式以进行下一跳逐行解析，检查IPv4地址的格式和用户输入： </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Route string VIA portion matching. REGEXP_VIA_PORTION = re.compile( '.*via\s+(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?).*' ) # RegEx template string for IPv4 address matching. REGEXP_IPv4_STR = ( '((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.' + '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.' + '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.' + '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))' ) # IPv4 CIDR notation matching in user input. REGEXP_INPUT_IPv4 = re.compile("^" + REGEXP_IPv4_STR + "(\/\d\d?)?$")</span></span></code> </pre> <br><p> 现在，我们将网络的表示形式转换为Python数据结构。 <br> 解析路由表产生的前缀将用作前缀树中的键。 前缀树对象是从<em>SubnetTree</em>模块继承的。 <br> 树中带有前缀的搜索结果将从下一个希望列表中返回一个列表，并从原始文件中返回相应路径的完整文本表示。 <br> 此外，创建本地接口列表。 <br> 每个路由器由一个字典表示，我们将上面的数据放入其中。 </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Example data structures route_tree = SubnetTree.SubnetTree() route_tree['subnet'] = ((next_hop_1, next_hop_n), raw_route_string) interface_list = ((interface_1, ip_address_1), (interface_n, ip_address_n)) connected_networks = ((interface_1, subnet_1), (interface_n, subnet_n)) router = { 'routing_table': route_tree, 'interface_list': interface_list, 'connected_networks': connected_networks, }</span></span></code> </pre> <br><p> 我们通过单独的函数向路由表发出请求： </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">route_lookup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(destination, router)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> destination <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> router[<span class="hljs-string"><span class="hljs-string">'routing_table'</span></span>]: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> router[<span class="hljs-string"><span class="hljs-string">'routing_table'</span></span>][destination] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)</code> </pre> <br><p> 每个路由器将被分配一个唯一的标识符。 您可以通过多种方式进行分配，在当前示例中，基于原始文件的名称，这样做是明确允许的。 <br> 结果，我们将使用唯一标识符形式的关键字将生成的路由器对象添加到字典中。 </p><br><pre> <code class="python hljs">ROUTERS = { <span class="hljs-string"><span class="hljs-string">'router_id_1'</span></span>: router_1, <span class="hljs-string"><span class="hljs-string">'router_id_n'</span></span>: router_n, }</code> </pre> <br><p> 我们还需要一种机制，该机制通过在路径搜索过程中从路由表获得的下一跳IP地址来搜索下一个路由器。 为此，我们使用拓扑中所有已知路由器的IP地址形式的密钥创建另一个全局前缀树，并返回带有路由器标识符和接口类型的表。 </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Example GLOBAL_INTERFACE_TREE = SubnetTree.SubnetTree() GLOBAL_INTERFACE_TREE['ip_address'] = (router_id, interface_type) # Returns RouterID by Interface IP address which it belongs to. def get_rid_by_interface_ip(interface_ip): if interface_ip in GLOBAL_INTERFACE_TREE: return GLOBAL_INTERFACE_TREE[interface_ip][0]</span></span></code> </pre> <br><p> 让我们将IOS / IOS-XE / ASA格式的解析器放在一起。 在输入处，将文本形式的路由表传递给它，在输出处，以上述指定的格式获得路由器字典。 </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse_show_ip_route_ios_like</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(raw_routing_table)</span></span></span><span class="hljs-function">:</span></span> router = {} route_tree = SubnetTree.SubnetTree() interface_list = [] <span class="hljs-comment"><span class="hljs-comment"># Parse Local and Connected route strings in text. for raw_route_string in REGEXP_ROUTE_LOCAL_CONNECTED.finditer(raw_routing_table): subnet = ( raw_route_string.group('ipaddress') + convert_netmask_to_prefix_length( raw_route_string.group('maskOrPrefixLength') ) ) interface = raw_route_string.group('interface') route_tree[subnet] = ((interface,), raw_route_string.group(0)) if raw_route_string.group('routeType') == 'L': interface_list.append((interface, subnet,)) if not interface_list: print('Failed to find routing table entries in given output') return None # parse static and dynamic route strings in text for raw_route_string in REGEXP_ROUTE.finditer(raw_routing_table): subnet = ( raw_route_string.group('subnet') + convert_netmask_to_prefix_length( raw_route_string.group('maskOrPrefixLength') ) ) via_portion = raw_route_string.group('viaPortion') next_hops= [] if via_portion.count('via') &gt; 1: for line in via_portion.splitlines(): if line: next_hops.append(REGEXP_VIA_PORTION.match(line).group(1)) else: next_hops.append(REGEXP_VIA_PORTION.match(via_portion).group(1)) route_tree[subnet] = (next_hops, raw_route_string.group(0)) router = { 'routing_table': route_tree, 'interface_list': interface_list, } return router</span></span></code> </pre> <br><p> 我们将解析器包装在另一个函数中，以便随后添加其他格式的解析器（例如，NX-OS）： </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse_text_routing_table</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(raw_routing_table)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Parser functions wrapper. Add additional parsers for alternative routing table syntaxes here. """</span></span> router = parse_show_ip_route_ios_like(raw_routing_table) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> router: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> router</code> </pre> <br><p> 因此，仍然需要遍历目录中的文本文件： </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_parse_directory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rt_directory)</span></span></span><span class="hljs-function">:</span></span> new_routers = {} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> os.path.isdir(rt_directory): print(<span class="hljs-string"><span class="hljs-string">"{} directory does not exist."</span></span>.format(rt_directory) + <span class="hljs-string"><span class="hljs-string">"Check rt_directory variable value."</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> start_time = time() print(<span class="hljs-string"><span class="hljs-string">"Initializing files..."</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> FILENAME <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.listdir(rt_directory): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> FILENAME.endswith(<span class="hljs-string"><span class="hljs-string">'.txt'</span></span>): file_init_start_time = time() <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(os.path.join(rt_directory, FILENAME), <span class="hljs-string"><span class="hljs-string">'r'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'Opening {}'</span></span>.format(FILENAME)) raw_table = f.read() new_router = parse_text_routing_table(raw_table) router_id = FILENAME.replace(<span class="hljs-string"><span class="hljs-string">'.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> new_router: new_routers[router_id] = new_router <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> new_router[<span class="hljs-string"><span class="hljs-string">'interface_list'</span></span>]: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> iface, addr <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> new_router[<span class="hljs-string"><span class="hljs-string">'interface_list'</span></span>]: GLOBAL_INTERFACE_TREE[addr]= (router_id, iface,) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'Failed to parse '</span></span> + FILENAME) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (FILENAME + <span class="hljs-string"><span class="hljs-string">" parsing has been completed in %s sec"</span></span>.format( <span class="hljs-string"><span class="hljs-string">"{:.3f}"</span></span>.format(time() - file_init_start_time)) ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> new_routers: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"Could not find any valid .txt files with routing tables"</span></span> + <span class="hljs-string"><span class="hljs-string">" in {} directory"</span></span>.format(rt_directory) ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"\nAll files have been initialized"</span></span> + <span class="hljs-string"><span class="hljs-string">" in {} sec"</span></span>.format(<span class="hljs-string"><span class="hljs-string">"{:.3f}"</span></span>.format(time() - start_time)) ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new_routers</code> </pre> <br><p> 而且，在将所有文件分解为有序数据结构之后，就可以承担任务的第二部分。 </p><br><h3> 通过经过处理的路由表查找路径 </h3><br><p> 通常，在此阶段，任务被简化为网络图的分析。 路由器是图的顶点，它们之间的L3链接是边。 <br>  <em>ROUTERS</em>词典将<em>路由器</em>的标识符存储在密钥中以及相应的值中-指向下一跳IP地址的链接。 也就是说，结合<em>GLOBAL_INTERFACE_TREE</em> （按IP地址返回路由器标识符），对于每个所需的子网，它定义了一个图邻接表。 </p><br><p> 如果我们与真实的路由器并行处理，则在处理从查找到路由表的数据包到ARP请求（在本例中为<em>router_id</em> ）并进行路由时，要找到需要的方法来重现其工作的高级逻辑（不包括RIB / FIB / ASIC和其他优化方法）还是放下包装，取决于结果。 </p><br><p> 我们在路由器上实现了递归路径搜索。 路径的每个部分都将由一张<em>router_id</em>和<em>raw_route_string</em> （原始路由字符串）表示。 当前路径将被写入<em>路径</em>元组。 到达目的地点，路由表中没有路由或研究的拓扑中没有下一跳时，当前<em>路径</em>将添加到生成的<em>路径</em>元组中，函数将返回该元组。 </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trace_route</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(source_router_id, target_ip, path=[])</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> source_router_id: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [path + [(<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)]] current_router = ROUTERS[source_router_id] next_hop, raw_route_string = route_lookup(target_ip, current_router) path = path + [(source_router_id, raw_route_string)] paths = [] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next_hop: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> nexthop_is_local(next_hop[<span class="hljs-number"><span class="hljs-number">0</span></span>]): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [path] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> nh <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> next_hop: next_hop_rid = get_rid_by_interface_ip(nh) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> next_hop_rid <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [r[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> path]: inner_path = trace_route(next_hop_rid, target_ip, path) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> inner_path: paths.append(p) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: path = path + [(next_hop_rid+<span class="hljs-string"><span class="hljs-string">"&lt;&lt;LOOP DETECTED"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [path] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [path] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> paths <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nexthop_is_local</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(next_hop)</span></span></span><span class="hljs-function">:</span></span> interface_types = (<span class="hljs-string"><span class="hljs-string">'Eth'</span></span>, <span class="hljs-string"><span class="hljs-string">'Fast'</span></span>, <span class="hljs-string"><span class="hljs-string">'Gig'</span></span>, <span class="hljs-string"><span class="hljs-string">'Ten'</span></span>, <span class="hljs-string"><span class="hljs-string">'Port'</span></span>, <span class="hljs-string"><span class="hljs-string">'Serial'</span></span>, <span class="hljs-string"><span class="hljs-string">'Vlan'</span></span>, <span class="hljs-string"><span class="hljs-string">'Tunn'</span></span>, <span class="hljs-string"><span class="hljs-string">'Loop'</span></span>, <span class="hljs-string"><span class="hljs-string">'Null'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> interface_types: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next_hop.startswith(type): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre> <br><p> 初始化文本文件后，添加一个以交互方式开始搜索的功能： </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_user_interactive_search</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'\n'</span></span>) target_subnet = raw_input(<span class="hljs-string"><span class="hljs-string">'Enter Target Subnet or Host: '</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> target_subnet: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> REGEXP_INPUT_IPv4.match(target_subnet.replace(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>)): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"incorrect input"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> lookup_start_time = time() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> rtr <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ROUTERS.keys(): subsearch_start_time = time() result = trace_route(rtr, target_subnet) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> result: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"\n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"PATHS TO {} FROM {}"</span></span>.format(target_subnet, rtr)) n = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'Detailed info:'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"Path {}:"</span></span>.format(n)) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> ([h[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> h <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> r]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> hop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> r: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"ROUTER: {}"</span></span>.format(hop[<span class="hljs-number"><span class="hljs-number">0</span></span>])) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"Matched route string: \n{}"</span></span>.format(hop[<span class="hljs-number"><span class="hljs-number">1</span></span>])) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">'\n'</span></span>) n+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"Path search on {} has been completed in {} sec"</span></span>.format( rtr, <span class="hljs-string"><span class="hljs-string">"{:.3f}"</span></span>.format(time() - subsearch_start_time)) ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"\nFull search has been completed in {} sec"</span></span>.format( <span class="hljs-string"><span class="hljs-string">"{:.3f}"</span></span>.format(time() - lookup_start_time),) )</code> </pre> <br><p> 将这两个部分结合起来的最后一点： </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> ROUTERS ROUTERS = do_parse_directory(RT_DIRECTORY) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ROUTERS: do_user_interactive_search() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>: main()</code> </pre> <br><p> 而且我们有准备工作的代码。 </p><br><div class="spoiler">  <b class="spoiler_title">代号</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SubnetTree <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-comment"><span class="hljs-comment"># Path to directory with routing table files. # Each routing table MUST be in separate .txt file. RT_DIRECTORY = "./routing_tables" # RegEx template string for IPv4 address matching. REGEXP_IPv4_STR = ( '((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.' + '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.' + '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.' + '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))' ) # IPv4 CIDR notation matching in user input. REGEXP_INPUT_IPv4 = re.compile("^" + REGEXP_IPv4_STR + "(\/\d\d?)?$") # Local and Connected route strings matching. REGEXP_ROUTE_LOCAL_CONNECTED = re.compile( '^(?P&lt;routeType&gt;[L|C])\s+' + '((?P&lt;ipaddress&gt;\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)' + '\s?' + '(?P&lt;maskOrPrefixLength&gt;(\/\d\d?)?' + '|(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)?))' + '\ is\ directly\ connected\,\ ' + '(?P&lt;interface&gt;\S+)', re.MULTILINE ) # Static and dynamic route strings matching. REGEXP_ROUTE = re.compile( '^(\S\S?\*?\s?\S?\S?)' + '\s+' + '((?P&lt;subnet&gt;\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)' + '\s?' + '(?P&lt;maskOrPrefixLength&gt;(\/\d\d?)?' +'|(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)?))' + '\s*' + '(?P&lt;viaPortion&gt;(?:\n?\s+(\[\d\d?\d?\/\d+\])\s+' + 'via\s+(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?)(.*)\n?)+)', re.MULTILINE ) # Route string VIA portion matching. REGEXP_VIA_PORTION = re.compile( '.*via\s+(\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?).*' ) # Store for 'router' objects generated from input routing table files. # Each file is represented by single 'router' object. # Router is referenced by Router ID (RID). # RID is filename by default. # Format: # # ROUTERS = { # 'RID1': {'routing_table': {}, 'interface_list': ()}, # 'RID_N': {'routing_table': {}, 'interface_list': ()}, # } # ROUTERS = {} # Global search tree for Interface IP address to Router ID (RID) resolving. # Stores Interface IP addresses as keys. # Returns (RID, interfaceID) list. # Interface IP addresses SHOULD be globally unique across inspected topology. GLOBAL_INTERFACE_TREE = SubnetTree.SubnetTree() def parse_show_ip_route_ios_like(raw_routing_table): """ Parser for routing table text output. Compatible with both Cisco IOS(IOS-XE) 'show ip route' and Cisco ASA 'show route' output format. Processes input text file and writes into Python data structures. Builds internal SubnetTree search tree in 'route_tree'. Generates local interface list for router in 'interface_list' Returns 'router' dictionary object with parsed data. """ router = {} route_tree = SubnetTree.SubnetTree() interface_list = [] # Parse Local and Connected route strings in text. for raw_route_string in REGEXP_ROUTE_LOCAL_CONNECTED.finditer(raw_routing_table): subnet = ( raw_route_string.group('ipaddress') + convert_netmask_to_prefix_length( raw_route_string.group('maskOrPrefixLength') ) ) interface = raw_route_string.group('interface') route_tree[subnet] = ((interface,), raw_route_string.group(0)) if raw_route_string.group('routeType') == 'L': interface_list.append((interface, subnet,)) if not interface_list: print('Failed to find routing table entries in given output') return None # parse static and dynamic route strings in text for raw_route_string in REGEXP_ROUTE.finditer(raw_routing_table): subnet = ( raw_route_string.group('subnet') + convert_netmask_to_prefix_length( raw_route_string.group('maskOrPrefixLength') ) ) via_portion = raw_route_string.group('viaPortion') next_hops= [] if via_portion.count('via') &gt; 1: for line in via_portion.splitlines(): if line: next_hops.append(REGEXP_VIA_PORTION.match(line).group(1)) else: next_hops.append(REGEXP_VIA_PORTION.match(via_portion).group(1)) route_tree[subnet] = (next_hops, raw_route_string.group(0)) router = { 'routing_table': route_tree, 'interface_list': interface_list, } return router def parse_text_routing_table(raw_routing_table): """ Parser functions wrapper. Add additional parsers for alternative routing table syntaxes here. """ router = parse_show_ip_route_ios_like(raw_routing_table) if router: return router def convert_netmask_to_prefix_length(mask_or_pref): """ Gets subnet_mask (XXX.XXX.XXX.XXX) of /prefix_length (/XX). For subnet_mask, converts it to /prefix_length and returns result. For /prefix_length, returns as is. For empty input, returns "" string. """ if not mask_or_pref: return "" if re.match("^\/\d\d?$", mask_or_pref): return mask_or_pref if re.match("^\d\d?\d?\.\d\d?\d?\.\d\d?\d?\.\d\d?\d?$", mask_or_pref): return ( "/" + str(sum([bin(int(x)).count("1") for x in mask_or_pref.split(".")])) ) return "" def route_lookup(destination, router): """ Performs route_tree lookup in passed router object for passed destination subnet. Returns list of next_hops with original route strings or (None,None) depending on lookup result. """ if destination in router['routing_table']: return router['routing_table'][destination] else: return (None, None) def get_rid_by_interface_ip(interface_ip): """Returns RouterID by Interface IP address which it belongs to.""" if interface_ip in GLOBAL_INTERFACE_TREE: return GLOBAL_INTERFACE_TREE[interface_ip][0] def nexthop_is_local(next_hop): """ Check if nexthop points to local interface. Will be True for Connected and Local route strings on Cisco devices. """ interface_types = ('Eth', 'Fast', 'Gig', 'Ten', 'Port', 'Serial', 'Vlan', 'Tunn', 'Loop', 'Null' ) for type in interface_types: if next_hop.startswith(type): return True def trace_route(source_router_id, target_ip, path=[]): """ Performs recursive path search from source Router ID (RID) to target subnet. Returns tuple of path tuples. Each path tuple contains a sequence of Router IDs with matched route strings. Multiple paths are supported. """ if not source_router_id: return [path + [(None, None)]] current_router = ROUTERS[source_router_id] next_hop, raw_route_string = route_lookup(target_ip, current_router) path = path + [(source_router_id, raw_route_string)] paths = [] if next_hop: if nexthop_is_local(next_hop[0]): return [path] for nh in next_hop: next_hop_rid = get_rid_by_interface_ip(nh) if not next_hop_rid in [r[0] for r in path]: inner_path = trace_route(next_hop_rid, target_ip, path) for p in inner_path: paths.append(p) else: path = path + [(next_hop_rid+"&lt;&lt;LOOP DETECTED", None)] return [path] else: return [path] return paths def do_parse_directory(rt_directory): """ Go through specified directory and parse all .txt files. Generate router objects based on parse result if any. Populate new_routers with those router objects. Default key for each router object is FILENAME. Return new_routers. """ new_routers = {} if not os.path.isdir(rt_directory): print("{} directory does not exist.".format(rt_directory) + "Check rt_directory variable value." ) return None start_time = time() print("Initializing files...") for FILENAME in os.listdir(rt_directory): if FILENAME.endswith('.txt'): file_init_start_time = time() with open(os.path.join(rt_directory, FILENAME), 'r') as f: print ('Opening {}'.format(FILENAME)) raw_table = f.read() new_router = parse_text_routing_table(raw_table) router_id = FILENAME.replace('.txt', '') if new_router: new_routers[router_id] = new_router if new_router['interface_list']: for iface, addr in new_router['interface_list']: GLOBAL_INTERFACE_TREE[addr]= (router_id, iface,) else: print ('Failed to parse ' + FILENAME) print (FILENAME + " parsing has been completed in {} sec".format( "{:.3f}".format(time() - file_init_start_time)) ) else: if not new_routers: print ("Could not find any valid .txt files with routing tables" + " in {} directory".format(rt_directory) ) else: print ("\nAll files have been initialized" + " in {} sec".format("{:.3f}".format(time() - start_time)) ) return new_routers def do_user_interactive_search(): """ Provides interactive search dialog for user. Asks user for target subnet or host in CIDR notation. Validates input. Prints error and goes back to start for invalid input. Executes path search to given target from each router in global ROUTERS. Prints formatted path search result. Goes back to start. """ while True: print ('\n') target_subnet = raw_input('Enter Target Subnet or Host: ') if not target_subnet: continue if not REGEXP_INPUT_IPv4.match(target_subnet.replace(' ', '')): print ("incorrect input") continue lookup_start_time = time() for rtr in ROUTERS.keys(): subsearch_start_time = time() result = trace_route(rtr, target_subnet) if result: print ("\n") print ("PATHS TO {} FROM {}".format(target_subnet, rtr)) n = 1 print ('Detailed info:') for r in result: print ("Path {}:".format(n)) print ([h[0] for h in r]) for hop in r: print ("ROUTER: {}".format(hop[0])) print ("Matched route string: \n{}".format(hop[1])) else: print ('\n') n+=1 else: print ("Path search on {} has been completed in {} sec".format( rtr, "{:.3f}".format(time() - subsearch_start_time)) ) else: print ("\nFull search has been completed in {} sec".format( "{:.3f}".format(time() - lookup_start_time),) ) def main(): global ROUTERS ROUTERS = do_parse_directory(RT_DIRECTORY) if ROUTERS: do_user_interactive_search() if __name__ == "__main__": main()</span></span></code> </pre> </div></div><br><h3> 检查脚本 </h3><br><p> 配备了四个Cisco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CSR-1000v</a>的小型抽象拓扑： </p><br><img src="https://habrastorage.org/webt/qi/ga/qn/qigaqn1qe-wztcio2uqg9jtbmpe.jpeg"><br><p> 它们通过GigabitEthernet 2和3接口成对连接，在它们之间有一个EIGRP邻居，通过它宣布所有已连接的网络，包括每个路由器后面的Loopback接口上的网络。 <br> 在csr1000v-01和csr1000v-04之间，还增加了两个GRE隧道，通过该隧道的远程IP地址注册了到10.0.0.0/8网络的静态路由以测试路由环路。 </p><br><div class="spoiler">  <b class="spoiler_title">csr1000v-01＃显示IP路由</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">Codes: L - <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, C - connected, S - static, R - RIP, M - mobile, B - BGP D - EIGRP, EX - EIGRP <span class="hljs-keyword"><span class="hljs-keyword">external</span></span>, O - OSPF, IA - OSPF inter area N1 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, N2 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> E1 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, E2 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> i - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>, su - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>, L1 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>, L2 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> ia - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> inter area, * - candidate <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, U - per-<span class="hljs-keyword"><span class="hljs-keyword">user</span></span> static route o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP a - application route + - replicated route, % - next hop override, p - overrides <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PfR Gateway <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> last resort <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> S <span class="hljs-number"><span class="hljs-number">10.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.114</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 L <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.114</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet2 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet3 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel141 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel141 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel142 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel142 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback201 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback201 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span>, GigabitEthernet2 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span>, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet3 [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet2</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">csr1000v-02＃显示IP路由</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">Codes: L - <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, C - connected, S - static, R - RIP, M - mobile, B - BGP D - EIGRP, EX - EIGRP <span class="hljs-keyword"><span class="hljs-keyword">external</span></span>, O - OSPF, IA - OSPF inter area N1 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, N2 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> E1 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, E2 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> i - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>, su - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>, L1 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>, L2 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> ia - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> inter area, * - candidate <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, U - per-<span class="hljs-keyword"><span class="hljs-keyword">user</span></span> static route o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP a - application route + - replicated route, % - next hop override, p - overrides <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PfR Gateway <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> last resort <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span>:<span class="hljs-number"><span class="hljs-number">17</span></span>, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span>, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback202 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback202 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">31</span></span>, GigabitEthernet3 [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">31</span></span>, GigabitEthernet2 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>, GigabitEthernet3</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">csr1000v-03＃显示IP路由</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">Codes: L - <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, C - connected, S - static, R - RIP, M - mobile, B - BGP D - EIGRP, EX - EIGRP <span class="hljs-keyword"><span class="hljs-keyword">external</span></span>, O - OSPF, IA - OSPF inter area N1 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, N2 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> E1 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, E2 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> i - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>, su - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>, L1 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>, L2 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> ia - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> inter area, * - candidate <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, U - per-<span class="hljs-keyword"><span class="hljs-keyword">user</span></span> static route o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP a - application route + - replicated route, % - next hop override, p - overrides <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PfR Gateway <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> last resort <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>, GigabitEthernet3 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">51</span></span>, GigabitEthernet2 [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">51</span></span>, GigabitEthernet3 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback203 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback203 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span>, GigabitEthernet2</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title">csr1000v-04#show ip route</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">Codes: L - <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, C - connected, S - static, R - RIP, M - mobile, B - BGP D - EIGRP, EX - EIGRP <span class="hljs-keyword"><span class="hljs-keyword">external</span></span>, O - OSPF, IA - OSPF inter area N1 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, N2 - OSPF NSSA <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> E1 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, E2 - OSPF <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> i - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>, su - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>, L1 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>, L2 - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span><span class="hljs-number"><span class="hljs-number">-2</span></span> ia - <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> inter area, * - candidate <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, U - per-<span class="hljs-keyword"><span class="hljs-keyword">user</span></span> static route o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP a - application route + - replicated route, % - next hop override, p - overrides <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PfR Gateway <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> last resort <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> S <span class="hljs-number"><span class="hljs-number">10.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet1 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span>:<span class="hljs-number"><span class="hljs-number">17</span></span>, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">3072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span>:<span class="hljs-number"><span class="hljs-number">19</span></span>, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet3 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel141 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.141</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel141 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel142 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.142</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Tunnel142 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.201</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>, GigabitEthernet2 [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">57</span></span>, GigabitEthernet3 D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span>, GigabitEthernet2 <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> variably subnetted, <span class="hljs-number"><span class="hljs-number">2</span></span> subnets, <span class="hljs-number"><span class="hljs-number">2</span></span> masks C <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback204 L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback204</code> </pre> </div></div><br><p>    <em>show ip route</em>     - <em>./routing_tables/</em>   : </p><br><div class="spoiler"> <b class="spoiler_title">$ python2.7 traceRouteByShowIPRoute.py</b> <div class="spoiler_text"><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> python2.<span class="hljs-number"><span class="hljs-number">7</span></span> traceRouteByShowIPRoute.py Initializing files... Opening csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span>.txt csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span>.txt parsing has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.001</span></span> sec Opening csr1000v<span class="hljs-literal"><span class="hljs-literal">-02</span></span>.txt csr1000v<span class="hljs-literal"><span class="hljs-literal">-02</span></span>.txt parsing has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.001</span></span> sec Opening csr1000v<span class="hljs-literal"><span class="hljs-literal">-03</span></span>.txt csr1000v<span class="hljs-literal"><span class="hljs-literal">-03</span></span>.txt parsing has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.001</span></span> sec Opening csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span>.txt csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span>.txt parsing has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.001</span></span> sec All files have been initialized <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.003</span></span> sec Enter Target Subnet or Host:</code> </pre> </div></div><br><p>   , ,   ,  IP-           . <br>             . </p><br><div class="spoiler"> <b class="spoiler_title">   Loopback204 192.168.204.204  csr1000v-04</b> <div class="spoiler_text"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 该IP地址的路径必须来自所有可用路由器。 </font></font></p><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入目标子网或主机：192.168.204.204</font></font></b> <div class="spoiler_text"><pre> <code class="hljs pgsql">Enter Target Subnet <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Host: <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> PATHS <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-04</span></span> Detailed <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>: <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>] ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-04</span></span> Matched route string: L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback204 <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-04</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.000</span></span> sec PATHS <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-03</span></span> Detailed <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>: <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-03'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>] ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-03</span></span> Matched route string: D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span>, GigabitEthernet2 ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-04</span></span> Matched route string: L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback204 <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-03</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.000</span></span> sec PATHS <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-02</span></span> Detailed <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>: <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-02'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>] ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-02</span></span> Matched route string: D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>, GigabitEthernet3 ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-04</span></span> Matched route string: L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback204 <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-02</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.000</span></span> sec PATHS <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-01</span></span> Detailed <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>: <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-01'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-03'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>] ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-01</span></span> Matched route string: D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet3 [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet2 ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-03</span></span> Matched route string: D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span>, GigabitEthernet2 ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-04</span></span> Matched route string: L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback204 <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-01'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-02'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>] ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-01</span></span> Matched route string: D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet3 [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>, GigabitEthernet2 ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-02</span></span> Matched route string: D <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> [<span class="hljs-number"><span class="hljs-number">90</span></span>/<span class="hljs-number"><span class="hljs-number">130816</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>, GigabitEthernet3 ROUTER: csr1000v<span class="hljs-number"><span class="hljs-number">-04</span></span> Matched route string: L <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> directly connected, Loopback204 <span class="hljs-type"><span class="hljs-type">Path</span></span> <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> csr1000v<span class="hljs-number"><span class="hljs-number">-01</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.000</span></span> sec <span class="hljs-keyword"><span class="hljs-keyword">Full</span></span> <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.001</span></span> sec</code> </pre> </div></div><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到所有路径，推导路线。</font><font style="vertical-align: inherit;">让我们检查一下路由器：</font></font></p><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">csr1000v-01＃显示ip路由192.168.204.204</font></font></b> <div class="spoiler_text"><pre> <code class="hljs pgsql">csr1000v<span class="hljs-number"><span class="hljs-number">-01</span></span>#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip route <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> Routing entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> Known via "eigrp 200", distance <span class="hljs-number"><span class="hljs-number">90</span></span>, metric <span class="hljs-number"><span class="hljs-number">131072</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-type"><span class="hljs-type">internal</span></span> Redistributing via eigrp <span class="hljs-number"><span class="hljs-number">200</span></span> Last <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> GigabitEthernet3, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span> ago Routing Descriptor Blocks: <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.203</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span> ago, via GigabitEthernet3 Route metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">131072</span></span>, traffic <span class="hljs-keyword"><span class="hljs-keyword">share</span></span> count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Total delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">5020</span></span> microseconds, minimum bandwidth <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1000000</span></span> Kbit Reliability <span class="hljs-number"><span class="hljs-number">255</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, minimum MTU <span class="hljs-number"><span class="hljs-number">1500</span></span> bytes Loading <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, Hops <span class="hljs-number"><span class="hljs-number">2</span></span> * <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.202</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span> ago, via GigabitEthernet2 Route metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">131072</span></span>, traffic <span class="hljs-keyword"><span class="hljs-keyword">share</span></span> count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Total delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">5020</span></span> microseconds, minimum bandwidth <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1000000</span></span> Kbit Reliability <span class="hljs-number"><span class="hljs-number">255</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, minimum MTU <span class="hljs-number"><span class="hljs-number">1500</span></span> bytes Loading <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, Hops <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> </div></div><br><p>  csr1000v-01   equal-cost   EIGRP  csr1000v-02  csr1000v-03. <br>   ,    : ['csr1000v-01', 'csr1000v-03', 'csr1000v-04']  ['csr1000v-01', 'csr1000v-02', 'csr1000v-04']. </p><br><div class="spoiler"> <b class="spoiler_title">csr1000v-02#show ip route 192.168.204.204</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">csr1000v<span class="hljs-number"><span class="hljs-number">-02</span></span>#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip route <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> Routing entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> Known via "eigrp 200", distance <span class="hljs-number"><span class="hljs-number">90</span></span>, metric <span class="hljs-number"><span class="hljs-number">130816</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-type"><span class="hljs-type">internal</span></span> Redistributing via eigrp <span class="hljs-number"><span class="hljs-number">200</span></span> Last <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> GigabitEthernet3, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">48</span></span> ago Routing Descriptor Blocks: * <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.24</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">48</span></span> ago, via GigabitEthernet3 Route metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">130816</span></span>, traffic <span class="hljs-keyword"><span class="hljs-keyword">share</span></span> count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Total delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">5010</span></span> microseconds, minimum bandwidth <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1000000</span></span> Kbit Reliability <span class="hljs-number"><span class="hljs-number">255</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, minimum MTU <span class="hljs-number"><span class="hljs-number">1500</span></span> bytes Loading <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, Hops <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title">csr1000v-03#show ip route 192.168.204.204</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">csr1000v<span class="hljs-number"><span class="hljs-number">-3</span></span>#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip route <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> Routing entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> Known via "eigrp 200", distance <span class="hljs-number"><span class="hljs-number">90</span></span>, metric <span class="hljs-number"><span class="hljs-number">130816</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-type"><span class="hljs-type">internal</span></span> Redistributing via eigrp <span class="hljs-number"><span class="hljs-number">200</span></span> Last <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> GigabitEthernet2, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span> ago Routing Descriptor Blocks: * <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span><span class="hljs-number"><span class="hljs-number">.204</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span> ago, via GigabitEthernet2 Route metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">130816</span></span>, traffic <span class="hljs-keyword"><span class="hljs-keyword">share</span></span> count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Total delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">5010</span></span> microseconds, minimum bandwidth <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1000000</span></span> Kbit Reliability <span class="hljs-number"><span class="hljs-number">255</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, minimum MTU <span class="hljs-number"><span class="hljs-number">1500</span></span> bytes Loading <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">255</span></span>, Hops <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> </div></div><br><p>  csr1000v-2  csr1000v-3      EIGRP  csr1000v-4. <br>     ,    : ['csr1000v-02', 'csr1000v-04']  ['csr1000v-03', 'csr1000v-04'] . </p><br><div class="spoiler"> <b class="spoiler_title">csr1000v-04#show ip route 192.168.204.204</b> <div class="spoiler_text"><pre> <code class="hljs swift">csr1000v-<span class="hljs-number"><span class="hljs-number">04</span></span>#show ip route <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">204.204</span></span> <span class="hljs-type"><span class="hljs-type">Routing</span></span> entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">204.204</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-type"><span class="hljs-type">Known</span></span> via <span class="hljs-string"><span class="hljs-string">"connected"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">distance</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, metric <span class="hljs-number"><span class="hljs-number">0</span></span> (connected) <span class="hljs-type"><span class="hljs-type">Routing</span></span> <span class="hljs-type"><span class="hljs-type">Descriptor</span></span> <span class="hljs-type"><span class="hljs-type">Blocks</span></span>: * directly connected, via <span class="hljs-type"><span class="hljs-type">Loopback204</span></span> <span class="hljs-type"><span class="hljs-type">Route</span></span> metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, traffic share <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> </div></div><br><p>  csr1000v-4  Connnected    Loopback204. <br>   Local      : ['csr1000v-04']. </p></div></div><br><div class="spoiler"> <b class="spoiler_title">    10.10.10.0/24 (  )</b> <div class="spoiler_text"><div class="spoiler"> <b class="spoiler_title">Enter Target Subnet or Host: 10.10.10.0/24</b> <div class="spoiler_text"><pre> <code class="hljs powershell">Enter Target Subnet or Host: <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> PATHS TO <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> FROM csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span> Detailed info: Path <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-01'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04&lt;&lt;LOOP DETECTED'</span></span>] ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.1</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.2</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.2</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span>&lt;&lt;LOOP DETECTED Matched route string: None Path <span class="hljs-number"><span class="hljs-number">2</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-01'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04&lt;&lt;LOOP DETECTED'</span></span>] ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.1</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.2</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.2</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span>&lt;&lt;LOOP DETECTED Matched route string: None Path search on csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.000</span></span> sec PATHS TO <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> FROM csr1000v<span class="hljs-literal"><span class="hljs-literal">-03</span></span> Detailed info: Path <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-03'</span></span>] ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-03</span></span> Matched route string: None Path search on csr1000v<span class="hljs-literal"><span class="hljs-literal">-03</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.000</span></span> sec PATHS TO <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> FROM csr1000v<span class="hljs-literal"><span class="hljs-literal">-02</span></span> Detailed info: Path <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-02'</span></span>] ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-02</span></span> Matched route string: None Path search on csr1000v<span class="hljs-literal"><span class="hljs-literal">-02</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.000</span></span> sec PATHS TO <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> FROM csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span> Detailed info: Path <span class="hljs-number"><span class="hljs-number">1</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-01'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-01&lt;&lt;LOOP DETECTED'</span></span>] ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.2</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.2</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.1</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span>&lt;&lt;LOOP DETECTED Matched route string: None Path <span class="hljs-number"><span class="hljs-number">2</span></span>: [<span class="hljs-string"><span class="hljs-string">'csr1000v-01'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-04'</span></span>, <span class="hljs-string"><span class="hljs-string">'csr1000v-01&lt;&lt;LOOP DETECTED'</span></span>] ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.2</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.2</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-04</span></span> Matched route string: S <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>] via <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.1</span></span> ROUTER: csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span>&lt;&lt;LOOP DETECTED Matched route string: None Path search on csr1000v<span class="hljs-literal"><span class="hljs-literal">-01</span></span> has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.003</span></span> sec Full search has been completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0.004</span></span> sec</code> </pre> </div></div><br><p>  . <br>   : </p><br><div class="spoiler"> <b class="spoiler_title">csr1000v-01#show ip route 10.10.10.0 255.255.255.0</b> <div class="spoiler_text"><pre> <code class="hljs swift">csr1000v-<span class="hljs-number"><span class="hljs-number">01</span></span>#show ip route <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span> <span class="hljs-number"><span class="hljs-number">255.255</span></span>.<span class="hljs-number"><span class="hljs-number">255.0</span></span> <span class="hljs-type"><span class="hljs-type">Routing</span></span> entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-type"><span class="hljs-type">Known</span></span> via <span class="hljs-string"><span class="hljs-string">"static"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">distance</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, metric <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">Routing</span></span> <span class="hljs-type"><span class="hljs-type">Descriptor</span></span> <span class="hljs-type"><span class="hljs-type">Blocks</span></span>: * <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.2</span></span> <span class="hljs-type"><span class="hljs-type">Route</span></span> metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, traffic share <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.2</span></span> <span class="hljs-type"><span class="hljs-type">Route</span></span> metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, traffic share <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title">csr1000v-04#show ip route 10.10.10.0 255.255.255.0</b> <div class="spoiler_text"><pre> <code class="hljs swift">csr1000v-<span class="hljs-number"><span class="hljs-number">04</span></span>#show ip route <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span> <span class="hljs-number"><span class="hljs-number">255.255</span></span>.<span class="hljs-number"><span class="hljs-number">255.0</span></span> <span class="hljs-type"><span class="hljs-type">Routing</span></span> entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-type"><span class="hljs-type">Known</span></span> via <span class="hljs-string"><span class="hljs-string">"static"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">distance</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, metric <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">Routing</span></span> <span class="hljs-type"><span class="hljs-type">Descriptor</span></span> <span class="hljs-type"><span class="hljs-type">Blocks</span></span>: <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">142.1</span></span> <span class="hljs-type"><span class="hljs-type">Route</span></span> metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, traffic share <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> * <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">141.1</span></span> <span class="hljs-type"><span class="hljs-type">Route</span></span> metric <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, traffic share <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> </div></div><br><p>  csr1000v-01  csr1000v-04       GRE-        10.0.0.0/8.       . <br>       : </p><br><pre> <code class="hljs 1c">PATHS TO <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> FROM csr1000v-<span class="hljs-number"><span class="hljs-number">01</span></span> Path <span class="hljs-number"><span class="hljs-number">1</span></span>: ['csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-01', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-04', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-01&lt;&lt;LOOP DETECTED'] Path <span class="hljs-number"><span class="hljs-number">2</span></span>: ['csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-01', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-04', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-01&lt;&lt;LOOP DETECTED'] PATHS TO <span class="hljs-number"><span class="hljs-number">10.10</span></span>.<span class="hljs-number"><span class="hljs-number">10.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> FROM csr1000v-<span class="hljs-number"><span class="hljs-number">04</span></span> Path <span class="hljs-number"><span class="hljs-number">1</span></span>: ['csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-04', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-01', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-04&lt;&lt;LOOP DETECTED'] Path <span class="hljs-number"><span class="hljs-number">2</span></span>: ['csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-04', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-01', 'csr<span class="hljs-number"><span class="hljs-number">1000</span></span>v-04&lt;&lt;LOOP DETECTED']</code> </pre> <br><div class="spoiler"> <b class="spoiler_title">csr1000v-02#show ip route 10.10.10.0 255.255.255.0</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">csr1000v-02</span></span><span class="hljs-selector-id"><span class="hljs-selector-id">#show</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> % <span class="hljs-selector-tag"><span class="hljs-selector-tag">Network</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">not</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">in</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span></code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title">csr1000v-3#show ip route 10.10.10.0 255.255.255.0</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">csr1000v-3</span></span><span class="hljs-selector-id"><span class="hljs-selector-id">#show</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> % <span class="hljs-selector-tag"><span class="hljs-selector-tag">Network</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">not</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">in</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span></code> </pre> </div></div><br><p>  csr1000v-02  csr1000v-03     .     . </p></div></div><br><p>   ,            ,      ,    . </p><br><h3> 结论 </h3><br><p>       ,             .   MacBook Pro  Intel Core i5  8GB RAM          700.000+     6.85 (  100 ).        320-350. <br>               (       ). </p><br><p>       . IPv6   <em>SubnetTree</em> . <br>     Python3, ,   <em>raw_input</em>  <em>input</em> . </p><br><p>      ,              ,          —   , "  "  , " ",     .. </p><br><p>       Policy Based Routing ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PBR</a> )       . ,     . </p><br><p> , -     . <br>  ,    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN414043/">https://habr.com/ru/post/zh-CN414043/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN414029/index.html">新形成的恒星周围的神秘光以及天文学家对此的看法</a></li>
<li><a href="../zh-CN414031/index.html">聚会之后的“ PostgreSQL 11新功能”</a></li>
<li><a href="../zh-CN414037/index.html">曾经在HFT公司...</a></li>
<li><a href="../zh-CN414039/index.html">童话故事</a></li>
<li><a href="../zh-CN414041/index.html">在冬季和夏季使用一种颜色？ 搜索数据的季节性</a></li>
<li><a href="../zh-CN414045/index.html">规定：在美国，公司必须在30天内通知PD泄漏</a></li>
<li><a href="../zh-CN414047/index.html">如何用自己的双手用微波炉制作出强大的雅各布梯子</a></li>
<li><a href="../zh-CN414049/index.html">E3 2018的主要游戏：《辐射76》，《地铁出埃及记》，《毁灭战士永恒》等</a></li>
<li><a href="../zh-CN414053/index.html">关于GDPR的5个误解</a></li>
<li><a href="../zh-CN414055/index.html">Trans-PRK：视力矫正的标准之一</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>