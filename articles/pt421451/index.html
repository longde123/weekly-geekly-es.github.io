<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïã üë®‚Äçüè≠ üëÑ Como proteger seu filho do lixo no YouTube e criar um player personalizado com uma lista branca de canais üôåüèΩ üéá üë∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voc√™ pode discutir por um longo per√≠odo sobre se vale a pena dar √†s crian√ßas pequenas acesso a tablets e smartphones. Algu√©m diz que √© prejudicial aos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como proteger seu filho do lixo no YouTube e criar um player personalizado com uma lista branca de canais</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421451/"><p>  Voc√™ pode discutir por um longo per√≠odo sobre se vale a pena dar √†s crian√ßas pequenas acesso a tablets e smartphones.  Algu√©m diz que √© prejudicial aos olhos ou √† psique, algu√©m - os pais brincarem e lerem com os filhos, e n√£o tentar cerc√°-los com aparelhos.  O que √© caracter√≠stico, na maioria das vezes isso √© dito por pessoas que n√£o t√™m seus pr√≥prios filhos.  E eles n√£o sabem que felicidade √© essa: quando a crian√ßa fica em sil√™ncio por pelo menos meia hora, deixa de arruinar tudo ao seu redor, deita calmamente no sof√° e assiste desenhos animados.  H√° mais um argumento: as crian√ßas repetem sensivelmente tudo depois dos pais; se os pais est√£o constantemente sentados com as m√£os no telefone, √© muito dif√≠cil explicar √†s crian√ßas por que os pais podem ou n√£o. </p><br><p><img src="https://habrastorage.org/webt/k3/y2/sz/k3y2szb9qvds9nza5bamfw1pb9w.jpeg"></p><br><p>  Em geral, voc√™ pode me jogar tomates podres, mas meu filho, que agora est√° sem dois dias por tr√™s anos, ocasionalmente fica com um tablet no sof√° e assiste desenhos animados no YouTube. </p><br><p>  Infelizmente, rapidamente percebi que o YouTube infantil √© apenas um lixo infernal.  Sobre isso, mesmo em Habr√©, j√° havia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma tradu√ß√£o do artigo</a> .  Os canais infantis s√£o algum tipo de fossas sem fundo cheias de v√≠deos vyrviglaznymi como "implantar cem surpresas", "rimas est√∫pidas com gr√°ficos 3D miser√°veis ‚Äã‚Äãcom m√∫sica barulhenta" e "dirigir carros no Beam NG para coment√°rios est√∫pidos".  Por alguma raz√£o, tudo isso √© muito atraente para crian√ßas pequenas que se apressam a clicar nesses v√≠deos assim que os veem nos v√≠deos recomendados.  E o YouTube n√£o permite que voc√™ gerencie recomenda√ß√µes.  Mesmo dando ao meu filho um tablet com os desenhos "normais" ativados, depois de alguns minutos, vejo como ele encontra esses malditos ovos de chocolate novamente em dois cliques nas recomenda√ß√µes e come√ßa a grud√°-los novamente. </p><br><p>  Isso √© o suficiente para mim, eu decidi.  E ele come√ßou a ver seu aplicativo para assistir ao YouTube, permitindo selecionar uma lista de canais e mostrar apenas v√≠deos desses canais.  Como eu fiz isso - sob o corte. <a name="habracut"></a></p><br><p>  Aqui est√° um exemplo de um v√≠deo thrash com o qual lutaremos.  Shitty fez anima√ß√£o 3D sem sentido para m√∫sica est√∫pida - e 142 milh√µes de visualiza√ß√µes.  Por alguma raz√£o, esses v√≠deos de crian√ßas s√£o simplesmente zumbificados; eles est√£o prontos para revis√°-los e revis√°-los. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YdZn3PXmFnE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Para compara√ß√£o, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√≠deo mais legal em</a> que Chris Hadfield canta em uma guitarra na ISS tem apenas 40 milh√µes de visualiza√ß√µes, e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maravilhoso clipe OK GO</a> com gravidade zero real (sem cabos e chromakey, apenas gravidade zero honesta a bordo de um avi√£o especial) - apenas 12 milh√µes, dez vezes menos. </p><br><p>  A prop√≥sito, os anunciantes do YouTube <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o est√£o felizes com a popularidade dos canais infantis</a> , pois exibir an√∫ncios neles √© um desperd√≠cio de or√ßamento.  As crian√ßas assistem a an√∫ncios, √†s vezes at√© clicam, mas n√£o compram nada, e milh√µes de visualiza√ß√µes gastam rapidamente o or√ßamento. </p><br><h2 id="postanovka-zadachi">  Declara√ß√£o do problema </h2><br><p>  Devo dizer imediatamente que n√£o estabeleci a tarefa de fazer uma aplica√ß√£o impenetr√°vel para crian√ßas.  Tais tentativas j√° existem, inclusive aqui no hub - tudo √© cortado ali seguidas, para que a crian√ßa n√£o possa sair do aplicativo, comprar algo, abrir um navegador etc.  Existem op√ß√µes com bloqueios de hardware, portas desativadas, shells personalizados do Android e outras dificuldades (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui est√° um artigo</a> para 2012, o projeto parece ainda estar vivo).  Mas tudo isso faz sentido para crian√ßas mais velhas que j√° est√£o explorando as possibilidades de seus gadgets.  Para crian√ßas de 2 a 3 anos de idade, nenhuma prote√ß√£o especial √© necess√°ria, eles ficam felizes em assistir a v√≠deos e, de tempos em tempos, aparecem nas visualiza√ß√µes de outros v√≠deos.  O principal √© que esses v√≠deos sejam o que voc√™ precisa, e n√£o o que o YouTube oferecer√° (e ele oferecer√° infinitos ovos de chocolate e dedos de beb√™). </p><br><p>  Disto veio a lista de requisitos: </p><br><ul><li>  Lista de canais personalizados </li><li>  Protegendo-o de mudan√ßas (antes, de acidentais, porque filhos adultos astutos j√° t√™m v√°rias maneiras de identificar as senhas de seus pais) </li><li>  O aplicativo em si √© semelhante ao YouTube, reproduz v√≠deo √† esquerda, √† direita h√° uma coluna de visualiza√ß√µes nas quais voc√™ pode clicar </li><li>  O principal caso de uso √© o exame aleat√≥rio do v√≠deo, a crian√ßa, em geral, n√£o se importa com o que assistir </li></ul><br><p>  Ao mesmo tempo, o aplicativo consiste em duas partes principais: pesquisar e configurar canais usando a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API de dados</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">YouTube</a> e depois reproduzir o v√≠deo.  Al√©m disso, no momento, encontrei duas op√ß√µes para reproduzir v√≠deo em meu pr√≥prio aplicativo: </p><br><h2 id="youtube-android-player-api">  API do player do YouTube para Android </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://developers.google.com/youtube/android/player/</a> </p><br><p>  Esta √© a maneira oficial de reproduzir v√≠deos em seu aplicativo Android.  Para que ele funcione no dispositivo do usu√°rio, o aplicativo oficial do YouTube j√° deve estar instalado, o que em sua composi√ß√£o inclui um determinado servi√ßo que pode ser usado em outros aplicativos.  Portanto, essa API do Player √© uma pequena biblioteca que interage com um aplicativo instalado separadamente. </p><br><p>  No come√ßo, eu o usei, mas depois de algum tempo de uso, descobriu-se que ele tinha um problema cr√≠tico.  Voc√™ n√£o pode realmente personalizar a apar√™ncia do jogador, em particular, controlar os bot√µes (voc√™ pode ocultar a coisa toda, mas tamb√©m perder√° o bot√£o do modo de tela cheia).  E no painel de controle do player, h√° um bot√£o "ir para exibi√ß√£o no YouTube" que abre o aplicativo oficial (que deve estar no dispositivo), no qual n√£o h√° mais filtragem.  E as crian√ßas clicam com facilidade (por acidente ou n√£o), acessam o aplicativo n√£o filtrado e, depois de alguns minutos, j√° ou√ßo ‚Äúdedo do beb√™, dedo do beb√™ onde est√° voc√™‚Äù novamente e vejo algum tipo de trianyanima√ß√£o nos olhos retorcidos na tela. </p><br><p>  Um pouco mais de lixo que as crian√ßas encontram em alguns cliques.  Mais de 900 milh√µes de visualiza√ß√µes! </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YJyNoFkud6g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Portanto, recusei o jogador oficial, encontrando-o como substituto na forma da seguinte biblioteca. </p><br><h2 id="android-youtube-player">  Android YouTube Player </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/PierfrancescoSoffritti/android-youtube-player</a> </p><br><p>  A biblioteca parece ser um inv√≥lucro em torno do WebView que controla o web player por meio de sua API JavaScript.  Dos benef√≠cios - a capacidade de personalizar totalmente a interface. </p><br><p>  A inicializa√ß√£o do player √© um pouco √≥bvia, especialmente depois de mudar da biblioteca oficial: </p><br><ol><li>  Obtenha nossa vis√£o da classe com.pierfrancescosoffritti.androidyoutubeplayer.player.YouTubePlayerView </li><li>  Ligue para ela initialize (), passando o ouvinte </li><li>  O m√©todo onInitSuccess (@Nonnull final YouTubePlayer youTubePlayer) √© chamado no ouvinte, que recebe uma inst√¢ncia do objeto player.  Esta √© a √∫nica maneira de obt√™-lo.  At√© esse momento, o processo de inicializa√ß√£o era id√™ntico ao do cliente oficial </li><li>  Chamamos o m√©todo addListener () no player, passando outro ouvinte para ele (mais ouvintes ao deus do ouvinte!) </li><li>  O m√©todo onReady () √© chamado neste ouvinte - somente ap√≥s esse momento voc√™ pode baixar e exibir o v√≠deo e usar o player.  Se voc√™ tentar carregar algo por engano no onInitSuccess, a biblioteca come√ßar√° a gerar erros estranhos. </li></ol><br><p>  Voc√™ pode controlar o ciclo de vida do player (interromper a reprodu√ß√£o na onPause () e tudo mais) manualmente, ou pode registrar nossa visualiza√ß√£o como um Lifecycle Observer (para o qual nossa atividade deve ser herdada do AppCompatActivity).  Nesse caso, a biblioteca assumir√° toda a rotina. </p><br><p>  Outra nuance estranha da biblioteca √© a falta de suporte de tela cheia pronto para uso.  Por padr√£o, h√° um bot√£o no player, mas ele n√£o faz nada.  Na verdade, voc√™ precisa fazer o modo de tela cheia manualmente - ocultar o cara, maximizar a janela do player para tela cheia e restaurar tudo de volta.  Isso pode ser bastante trivial se voc√™ tiver algum tipo de interface complicada em torno do player.  Eu s√≥ tinha uma lista de v√≠deos l√°, que √© facilmente oculta manualmente. </p><br><p>  Nas amostras da biblioteca, h√° uma classe FullScreenHelper, da qual voc√™ pode obter o c√≥digo desejado.  Seu uso √© mais ou menos assim: </p><br><pre><code class="java">youTubePlayerView.addFullScreenListener(new YouTubePlayerFullScreenListener() {

            private final View rootLayout = findViewById(R.id.rootLayout);

            @Override
            public void onYouTubePlayerEnterFullScreen() {
                fullScreenHelper.enterFullScreen();
                rootLayout.setPadding(0, 0, 0, 0);
            }

            @Override
            public void onYouTubePlayerExitFullScreen() {
                fullScreenHelper.exitFullScreen();
                rootLayout.setPadding(8, 8, 8, 8);
                youTubePlayerView.getLayoutParams().height = LinearLayout.LayoutParams.MATCH_PARENT;
                  }
        });</code></pre><br>
<p>FullScreenHelper        .      (   ,  )   -      ,     .</p><br>
<p> -      ,      ‚Äî    .      "  YouTube",     :</p><br>
<pre><code class="java">youTubePlayerView.getPlayerUIController().showFullscreenButton(true);
youTubePlayerView.getPlayerUIController().showYouTubeButton(false);</code></pre><br>
<p>      ,   ,     View  .. ‚Äî             .</p><br>
<p>            youTubePlayer.loadVideo(url, startTime);</p><br>
<h2 id="poluchenie-spiskov-video-rabota-s-youtube-data-api">  ,   YouTube Data API</h2><br>
<p>URL    - .    YouTube   API,          .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>   Developer Console   .</p><br>
<p>      :         .   - ,         "Peppa Pig".   id (          id)  snippet       : , -, .</p><br>
<pre><code class="java"> YouTube.Search.List searchListByKeywordRequest = youTube.search().list("snippet,id");
 searchListByKeywordRequest.setMaxResults(10L);
 searchListByKeywordRequest.setQ("Peppa Pig");
 searchListByKeywordRequest.setType("channel,playlist");
 searchListByKeywordRequest.setKey("&lt;api key&gt;");
 SearchListResponse response = searchListByKeywordRequest.execute();</code></pre><br>
<p>       (    snippet  id)    . YouTube API      :       ,         .      - ( ,   ),       .           ,        . ..          5  (      2   sinppet  id).       ,   6 ,   13.    10 ,      21  .      ,   .</p><br>
<p>         :</p><br>
<pre><code class="java">YouTube.Search.List request = youTube.search().list("snippet,id");
request.setChannelId("&lt;channel id&gt;");
request.setType("video");
request.setMaxResults(50L);
request.setKey("&lt;api key&gt;");
SearchListResponse response = request.execute();</code></pre><br>
<p>      ,          ,      nextPageToken,    ‚Äî     ,            .</p><br>
<pre><code class="java">if (response.getNextPageToken() != null) {
    request.setPageToken(response.getNextPageToken());
    response = request.execute();
}</code></pre><br>
<p>  API  ,       ,        ..</p><br>
<h2 id="opyt-ispolzovaniya"> </h2><br>
<p> ,     ,  .    ,      Google Play      .   :</p><br>
<ol>
<li>    .            .   " "          (""  " "), -      .</li>
<li>  ‚Äî    .   ,     "     ",       ,    . </li>
<li>     .   ,               ,     ‚Äî   .</li>
<li>       .   "     ",      ,              .</li>
<li>         .</li>
<li>   Pinned Mode ‚Äî       ,            .</li>
</ol><br>
<p>  -  ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://play.google.com/store/apps/details?id=ru.sundogs.youtubekiosk</a>        ,    ‚Äî     .       ‚Äî       .         ,           ,    . </p><br>
<p> ,       ,       , -      (   ),     .    ‚Äî       ,        .        .</p><br>
<p><strong>UPD</strong>:    ,          .             ‚Äî ,  .     Play Market   ""</p><br>
<p><strong>UPD2</strong>:      ,        .   ,    ,             .</p><br>
<p><strong>UPD3</strong>:     ,     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://channelwhitelist.tilda.ws</a>. , !</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt421451/">https://habr.com/ru/post/pt421451/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt421439/index.html">Os japoneses introduziram um processador de prot√≥tipo para o supercomputador exaflops: como o chip funciona</a></li>
<li><a href="../pt421441/index.html">Embox come√ßa a escalar o Monte Elbrus</a></li>
<li><a href="../pt421443/index.html">Novo no nosso mercado: Telefones IP Snom D385 e D785</a></li>
<li><a href="../pt421445/index.html">Estamos escrevendo um tradutor simples em Lisp - II</a></li>
<li><a href="../pt421447/index.html">Redmadrobot iOS Meetup</a></li>
<li><a href="../pt421453/index.html">Situa√ß√£o: Sonos foi p√∫blico e pode "sair da sala"</a></li>
<li><a href="../pt421455/index.html">Jap√£o lan√ßa o primeiro teste cl√≠nico do mundo de c√©lulas-tronco usando a doen√ßa de Parkinson</a></li>
<li><a href="../pt421461/index.html">Time Tracker para scripts, documentos e planilhas do Google</a></li>
<li><a href="../pt421463/index.html">A vida noturna do c√©u ou em busca de Perseid - processamento</a></li>
<li><a href="../pt421465/index.html">DevOps para celular na pr√°tica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>