<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ผ ๐ก ๐ง ุฑุฏ + Mobx: ูุง ูู ุงููุงุฆุฏุฉุ ๐ ๐ โฝ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃุฑูุฏ ุฃู ุฃุฎุจุฑูู ุงูููู ุนู ููููุฉ ุงูุงูุชูุงู ุฅูู Mobx ูู ูุดุฑูุนูุง ุ ููุง ุงููุฒุงูุง ุงูุชู ููุฏููุง. ููุง ุณูุชู ุนุฑุถ ูุดุฑูุน ูููุฐุฌู ูุณูุชู ุชูุฏูู ุชูุถูุญุงุช ุญูู ุงููุถุงูุง ุงูุฑุฆูุณ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฑุฏ + Mobx: ูุง ูู ุงููุงุฆุฏุฉุ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471048/" style=";text-align:right;direction:rtl"> ุฃุฑูุฏ ุฃู ุฃุฎุจุฑูู ุงูููู ุนู ููููุฉ ุงูุงูุชูุงู ุฅูู Mobx ูู ูุดุฑูุนูุง ุ ููุง ุงููุฒุงูุง ุงูุชู ููุฏููุง.  ููุง ุณูุชู ุนุฑุถ ูุดุฑูุน ูููุฐุฌู ูุณูุชู ุชูุฏูู ุชูุถูุญุงุช ุญูู ุงููุถุงูุง ุงูุฑุฆูุณูุฉ.  ูููู ุฃููุง ุ ุชูููุฏูุฉ. <br><br><img src="https://habrastorage.org/webt/lv/he/d2/lvhed2wb-qbln7ffhw3_e9ljj0e.png" alt="ุตูุฑุฉ"><br><a name="habracut"></a><br>  ููุงุฐุง ุชุญุชุงุฌ ุฅูู ุงูุชุจุฏูู ุฅูู ุดูุก ูุงุ  ูู ุงููุงูุน ุ ุงูุฌูุงุจ ุนูู ูุฐุง ุงูุณุคุงู ูู ุจุงููุนู ูุตู ุงููุนุฑูุฉ.  ูุญุจ ุงููุซูุฑูู ุงูุขู ุชุทุจูู ุชูููุงุช ุฌุฏูุฏุฉ ููุท ูุฃููุง ุฌุฏูุฏุฉ.  ุฎุท ุฌูุฏ ูู ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ ุ ูุฅููุงููุฉ ุงูุชูููุฉ ุงูุฐุงุชูุฉ ุ ููููู ูู ูุฐุง ุงูุงุชุฌุงู.  ุงูู ูุงูุฑ ุฑุงุฆุน ุนูุฏูุง ููููู ููุท ุงููุถู ูุฏูุง. <br><br>  ููุน ุฐูู ุ ูุฌุจ ุฃู ุชุญู ูู ุฃุฏุงุฉ ูุดููุงุชูุง ุงูุฎุงุตุฉ ุ ููุตุฏูุง ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุนูุฏูุง ููุชุจ ุงูุฑูุฒ ุงูุชุฌุงุฑู. <br><br>  ูู ูุดุฑูุนูุง ุ ููุงู ุนุฏุฏ ูู ุนูุงุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุญูุซ ูููู ุงููุณุชุฎุฏู ุจุฅุฏุฎุงู ุจูุงูุงุชู ุ ููุชูุงุนู ูุน ุงูููุงุฐุฌ.  ููุงุนุฏุฉ ุนุงูุฉ ุ ูู ุนูุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู ูุฏูู ุนุฏุฉ ุดุงุดุงุช.  ุฐุงุช ูุฑุฉ ุ ุนููุช ุฌููุนูุง ุนูู ุงููุญุฑู ุงููุฏูู MarkoJS + templating ุงูุฐู ูุชุทูุจ jQuery ุนูู ุงูุนููู.  ุชูุช ูุชุงุจุฉ ุงูุชูุงุนู ูุน ุงูููุงุฐุฌ ุจุฃุณููุจ ุญุชูู ุ ุฅุฐุง ... ุขุฎุฑ ุ ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช ููุฐุง ูู ููุณู ุงูุฐู ูุจุฏู ุจุงููุนู ูู ุงููุงุถู. <br><br>  ุซู ุฌุงุก ุงูููุช <b>ูุฑุฏ ุงููุนู</b> .  ูุงู ููุทู ุงูุนูู ุนูู ุงูุนููู ูุฒุฏุงุฏ ุณูุงูุฉ ุ ููุงู ููุงู ุงููุซูุฑ ูู ุฎูุงุฑุงุช ุงูุชูุงุนู ุ ุชุญููุช ุงูููุฏ ุงูุฅูุฒุงูู ุฅูู ููุถู ูุนูุฏุฉ.  ุชุญูู ุฑูุฒ ุฑุฏ ุงููุนู ุงูุชุนุฑููู ุฅูู ุฃู ูููู ุฃูุซุฑ ููุงุกูุฉ.  ูุงู ูู ุงููููู ุฃุฎูุฑูุง ุงูุชุฑููุฒ ุนูู ุงูููุทู ุจุฏูุงู ูู ุงูุนุฑุถ ุงูุชูุฏููู ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููููุงุช ูุชูุฒูุน ุงูููุงู ุจุณูููุฉ ูุชุทููุฑ ููุฒุงุช ุฌุฏูุฏุฉ ุจูู ูุฎุชูู ุงูููุธููู. <br><br>  ููู ุงูุชุทุจูู ุนูู ุฑุฏ ุงููุนู ุงูููู ูุน ูุฑูุฑ ุงูููุช ูุนุชูุฏ ุนูู ุญุฏูุฏ ููููุณุฉ.  ุจุงูุทุจุน ุ ูุญู ูุดุนุฑ ุจุงูููู ูู ูุชุงุจุฉ this.setState ููุฌููุน ูุงูุชูููุฑ ูู ุนุฏู ุงูุชุฒุงูู ุจูุง ุ ูููู ุฑูู ุงูุจูุงูุงุช ูุนูููุงุช ุงูุงุณุชุฏุนุงุก ูู ุฎูุงู ุณูุงูุฉ ุงูููููุงุช ูุฌุนู ุงูุฃูุฑ ุตุนุจูุง ููุบุงูุฉ.  ุจุงุฎุชุตุงุฑ ุ ููุฏ ุญุงู ุงูููุช ููุตู ุงูุจูุงูุงุช ูุงูุนุฑุถ ุชูุงููุง.  ูุง ูุชุนูู ุงูุฃูุฑ ุจุงูููููุฉ ุงูุชู ููููู ุจูุง ุฅุฏุงุฑุฉ ุฐูู ุจุงุณุชุฎุฏุงู React ุงูุฎุงูุต ุ ูููู ูู ุงูุฃุทุฑ ุงูุตูุงุนูุฉ ุงูุชู ุชุทุจู ุจููุฉ Flux ููุชุทุจููุงุช ุงูุฃูุงููุฉ ุฃุตุจุญุช ุดุงุฆุนุฉ ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ. <br><br>  ููููุง ูุนุฏุฏ ุงูููุงูุงุช ูุงููุฑุงุฌุน ูู ุงููุธุงุฆู ุงูุดุงุบุฑุฉ ุ ูุฅู <b>Redux</b> ูู ุงูุฃูุซุฑ ุดูุฑุฉ ุจูููุง.  ูู ุงููุงูุน ุ ููุฏ ุฃุญุถุฑุช ูุฏู ุจุงููุนู ูุชุซุจูุชู ูู ูุดุฑูุนูุง ูุจุฏุก ุงูุชุทููุฑ ุ ููุง ูู ุงููุญุธุฉ ุงูุฃุฎูุฑุฉ (ููุฐุง ูู ุญุฑูููุง!) ูุงู ุงูุดูุทุงู ุจุณุญุจ ุญุจุฑ ุ ุซู ูุงู ููุงู ูุฌุฑุฏ ููุงูุดุฉ ูููุถูุน "Redux ุฃู Mobxุ"  ุฅูููู ูุฐู ุงูููุงูุฉ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/en/post/459706</a> .  ุจุนุฏ ูุฑุงุกุชูุง ุ ููุฐูู ุฌููุน ุงูุชุนูููุงุช ุงูุชู ุชุญุชูุง ุ ุฃุฏุฑูุช ุฃููู ูุง ุฒูุช ุฃุณุชุฎุฏู <b>Mobx</b> . <br><br>  ูุฑุฉ ุงุฎุฑู  ุงูุฌูุงุจ ุนูู ุงูุณุคุงู ุงูุฃูุซุฑ ุฃูููุฉ - ููุงุฐุง ูู ูุฐุงุ  - ูุจุฏู ุงูุฃูุฑ ููุง ููู: ููุฏ ุญุงู ุงูููุช ููุตู ุงูุนุฑุถ ุงูุชูุฏููู ูุงูุจูุงูุงุช ุ ูุฃูุฏ ุฃู ุฃุจูู ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุจุฃุณููุจ ุชุนุฑููู (ูุซู ุงูุฑุณู) ุ ูููุณ ุงูุชูููุญ ุงููุชุจุงุฏู ูุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช ูุงูุณูุงุช ุงููุนุงุฏ ุชูุฌูููุง. <br><br>  ุงูุขู ูุญู ุนูู ุงุณุชุนุฏุงุฏ ูููุถู ูุฏูุง. <br><br><h3 style=";text-align:right;direction:rtl">  1. ุญูู ุงูุชุทุจูู </h3><br>  ูุญุชุงุฌ ุฅูู ุฃู ูุจูู ูู ุงูููุฏูุฉ ูุตูููุง ููุดุงุดุงุช ูุงูุฃุดูุงู ุ ูุงูุชู ูููู ุจุนุฏ ุฐูู ุฎูุทูุง ุณุฑูุนูุง ุ ูุชุตูุงู ูุน ุงูุขุฎุฑ ุจุนุฏ ุงููุชุทูุจุงุช ุงููุชุบูุฑุฉ ููุฃุนูุงู.  ูุฐุง ูููููุง ุญุชูุงู ุฅูู ูุง ููู: ูุฅูุดุงุก ูุฌููุนุฉ ูู ุงูููููุงุช ุงููุนุฒููุฉ ุชูุงููุง ุ ููุฐูู ุจุนุถ ุงูููููุงุช ุงูุฃุณุงุณูุฉ ุงูุชู ุชุชูุงูู ูุน ูู ุฃุฏุงุฉ ูู ุฃุฏูุงุชูุง ุงููุตุบูุฑุฉ (ูู ุงููุงูุน ุ ูุฐู ูู SPA ูููุตูุฉ ูุชู ุฅูุดุงุคูุง ูู ูู ูุฑุฉ ุจููุฌุจ ุญุงูุฉ ุนูู ุฌุฏูุฏุฉ ูู ุงูุชุทุจูู ุงูุนุงู). <br><br>  ุณุชูุธูุฑ ุงูุฃูุซูุฉ ูุณุฎุฉ ููุทูุนุฉ ูู ุฅุญุฏู ูุฐู ุงูุฃุฏูุงุช.  ุญุชู ูุง ุชุชุฑุงูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฅุถุงููุฉ ุ ููููู ุดูููุง ูู ุซูุงุซุฉ ุญููู ูุฃุฒุฑุงุฑ ุฅุฏุฎุงู. <br><br><h3 style=";text-align:right;direction:rtl">  2. ุงูุจูุงูุงุช </h3><br>  Mobx ููุณ ุฅุทุงุฑูุง ุฃุณุงุณููุง ุ ุฅูู ูุฌุฑุฏ ููุชุจุฉ.  ููุต ุงูุฏููู ุตุฑุงุญุฉ ุนูู ุฃูู ูุง ููุธู ุจูุงูุงุชู ูุจุงุดุฑุฉ.  ุฃูุช ููุณู ูุฌุจ ุฃู ุชุฃุชู ูุน ูุฐู ุงูููุธูุฉ.  ุจุงูููุงุณุจุฉ ุ ูุณุชุฎุฏู <b>Mobx 4</b> ูุฃู ุงูุฅุตุฏุงุฑ 5 ูุณุชุฎุฏู ููุน ุจูุงูุงุช Sybmol ุ ูุงูุฐู ุ ููุฃุณู ุ ุบูุฑ ูุนุชูุฏ ูู ูุจู ุฌููุน ุงููุชุตูุญุงุช. <br><br>  ูุฐูู ุ ูุชู ุชุฎุตูุต ุฌููุน ุงูุจูุงูุงุช ูููุงูุงุช ูููุตูุฉ.  ููุฏู ุชุทุจูููุง ุฅูู ูุฌููุนุฉ ูู ูุฌูุฏูู: <br>  - <i>ุงูููููุงุช</i> ุญูุซ ูุถุน ูู ุฑุฃู <br>  - <i>ุงููุฎุงุฒู</i> ุ ูุงูุชู ุณูู ุชุญุชูู ุนูู ุจูุงูุงุช ุ ููุฐูู ููุทู ุงูุนูู ูุนูู. <br>  ุนูู ุณุจูู ุงููุซุงู ุ ูุชููู ูููู ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงููููุฐุฌู ุงูุฎุงุต ุจูุง ูู ููููู: <i>Input.js</i> ู <i>InputStore.js</i> .  ุงูููู ุงูุฃูู ูู ูููู React ุบุจู ููู ูุณุคูู ุชูุงููุง ุนู ุงูุนุฑุถ ุ ูุงูุซุงูู ูู ุจูุงูุงุช ูุฐุง ุงููููู ุ ูููุงุนุฏ ุงููุณุชุฎุฏู ( <i>onClick</i> ุ <i>onChange</i> ุ ุฅูุฎ ...) <br><br>  ูุจู ุฃู ูุฐูุจ ูุจุงุดุฑุฉ ุฅูู ุงูุฃูุซูุฉ ุ ูุญุชุงุฌ ุฅูู ุญู ูุดููุฉ ุฃุฎุฑู ูููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  3. ุงูุฅุฏุงุฑุฉ </h3><br>  ุญุณููุง ุ ูุฏููุง ููููุงุช ูุณุชููุฉ ุชูุงููุง ูู View-Store ุ ููู ููู ููุชูู ูู ุชุทุจูู ูุงููุ  ููุนุฑุถ ุ ุณูููู ูุฏููุง ุงููููู ุงูุฑุฆูุณู ูู <i>App.js</i> ุ <i>ููุฅุฏุงุฑุฉ</i> ุชุฏูู ุงูุจูุงูุงุช ุ ูุฅู ุงูุชุฎุฒูู ุงูุฑุฆูุณู ูู <i>mainStore.js</i> .  ุงููุจุฏุฃ ุจุณูุท: mainStore ูุนุฑู ูู ุดูุก ุนู ุฌููุน ูุณุชูุฏุนุงุช ุฌููุน ุงูููููุงุช ุงูุถุฑูุฑูุฉ (ุณูุธูุฑ ุฃุฏูุงู ููู ูุชุญูู ุฐูู).  ูุง ุชุนุฑู ุงููุณุชูุฏุนุงุช ุงูุฃุฎุฑู ุฃู ุดูุก ุนู ุงูุนุงูู ุนูู ุงูุฅุทูุงู (ุญุณููุง ุ ุณูููู ููุงู ุงุณุชุซูุงุก ูุงุญุฏ - ุงูููุงููุณ).  ูุจุงูุชุงูู ุ ูุญู ูุถูู ุฃู ูุนุฑู ุฅูู ุฃูู ุชุฐูุจ ุจูุงูุงุชูุง ูุฃูู ูุนุชุฑุถูุง. <br><br><img src="https://habrastorage.org/webt/9c/bf/wi/9cbfwie08uztcx5vvocxj6szwqq.jpeg" alt="ุตูุฑุฉ"><br><br>  <i>mainStore</i> ุงูุชุนุฑููู ุ ูู ุฎูุงู ุชุบููุฑ ุฃุฌุฒุงุก ูู ุญุงูุชู ุ ูููู ุงูุชุญูู ูู ุจููุฉ ุงูููููุงุช.  ูู ุงูุดูู ุงูุชุงูู ุ ุชุดูุฑ <i>ุงูุฅุฌุฑุงุกุงุช</i> <i>ูุงูุญุงูุฉ</i> ุฅูู ูุฎุงุฒู ุงูููููุงุช ุ ูุชุดูุฑ <i>ุงูููู</i> <i>ุงููุญุณูุจุฉ</i> ุฅูู <i>ูุชุฌุฑ ุฑุฆูุณู</i> : <br><br><img src="https://habrastorage.org/webt/y1/d9/uv/y1d9uvdt1z24mzeezyjzer0jjj0.png" alt="ุตูุฑุฉ"><br><br>  ููุจุฏุฃ ูุชุงุจุฉ ุงูููุฏ.  index.js ููู ุงูุชุทุจูู ุงูุฑุฆูุณู: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Provider} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"mobx-react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./components/App"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mainStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./stores/mainStore"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> optionsStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./stores/optionsStore"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  IE11 require("es6-object-assign").polyfill(); require( "./static/less/main.less"); const stores = { mainStore, optionsStore, ButtonStore : mainStore.ButtonStore, FioStore : mainStore.FioStore, EmailStore : mainStore.EmailStore }; ReactDOM.render(( &lt;Provider {...stores}&gt; &lt;App /&gt; &lt;/Provider&gt; ), document.getElementById('reactContainer'));</span></span></code> </pre> <br>  ููุง ููููู ุฑุคูุฉ ุงูููููู ุงูุฃุณุงุณู ูู Mobx.  ุชุชููุฑ ุงูุจูุงูุงุช (ุงููุฎุงุฒู) ูู ุฃู ููุงู ูู ุงูุชุทุจูู ูู ุฎูุงู ุขููุฉ <b>ุงููููุฑ</b> .  ููุชู ุทูุจูุง ูู ุฎูุงู ุณุฑุฏ ูุฑุงูู ุงูุชุฎุฒูู ุงููุงุฒูุฉ.  ูุงุณุชุฎุฏุงู <i>ุงููููุฑ ุ ูููู</i> ุจุชูุตูู ูุญุฏุฉ <i>mobx-react</i> .  ููู ูุชููู ุงููุชุฌุฑ ุงูุฑุฆูุณู <i>mainStore ูู</i> ุงููุตูู ุฅูู ุฌููุน ุงูุจูุงูุงุช ุงูุฃุฎุฑู ูู ุงูุจุฏุงูุฉ ุ ูููู ุจุชููุฆุฉ ุงููุชุงุฌุฑ ุงููุฑุนูุฉ ุฏุงุฎู <i>mainStore</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// mainStore.js import optionsStore from "./optionsStore"; import ButtonStore from "./ButtonStore"; import FioStore from "./FioStore"; import EmailStore from "./EmailStore"; .... class mainStore { constructor() { /** *    */ this.ButtonStore = new ButtonStore(); this.FioStore = new FioStore(); this.EmailStore = new EmailStore(); ...</span></span></code> </pre> <br><br>  ุงูุขู <i>App.js</i> ุ ุงููููู ุงูุนุธูู <i>ูุชุทุจูููุง</i> <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {observer, inject} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"mobx-react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ButtonArea <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./ButtonArea"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Email <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./Email"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Fio <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./Fio"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> l10n <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../l10n/localization.js"</span></span>; @inject(<span class="hljs-string"><span class="hljs-string">"mainStore"</span></span>) @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); }; render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mainStore = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.mainStore; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div className="container"&gt; &lt;Fio label={l10n.ru.profile.name} name={"name"} value={mainStore.userData.name} daData={true} /&gt; &lt;Fio label={l10n.ru.profile.surname} name={"surname"} value={mainStore.userData.surname} daData={true} /&gt; &lt;Email label={l10n.ru.profile.email} name={"email"} value={mainStore.userData.email} /&gt; &lt;ButtonArea /&gt; &lt;/div&gt; ); } }</code> </pre> <br>  ููุงู ููุนุงู ูู ููุงููู Mobx ุงูุฃุณุงุณูุฉ - <i>ุงูุญูู</i> <i>ูุงููุฑุงูุจ</i> . <br>  <b>ุญูู</b> ููุท ุจุชูููุฐ ุงููุชุฌุฑ ุงูุถุฑูุฑู ูู ุงูุชุทุจูู.  ุชุณุชุฎุฏู ุฃุฌุฒุงุก ูุฎุชููุฉ ูู ุชุทุจูููุง ูุณุชูุฏุนุงุช ูุฎุชููุฉ ุ ูููู <i>ุจุฅุฏุฑุงุฌูุง</i> ูู <i>ุงูุญูู</i> ุ ููุตููุฉ ุจููุงุตู.  ูุจุทุจูุนุฉ ุงูุญุงู ุ ูุฌุจ ุฃู ูุชู ุณุฑุฏ ุงููุฎุงุฒู ุงููุงุจูุฉ ููุชูุตูู ูู ุงูุจุฏุงูุฉ ูู <i>ุงููููุฑ</i> .  ุชุชููุฑ ุงููุณุชูุฏุนุงุช ูู ุงููููู ูู ุฎูุงู <i>this.props.yourStoreName</i> . <br>  <b>ูุฑุงูุจ</b> - ูุดูุฑ ุงูุฏูููุฑ ุฅูู ุฃู ุงููููู ุงูุฎุงุต ุจูุง ุณูุชู ุงูุงุดุชุฑุงู ูู ุงูุจูุงูุงุช ุงูุชู ูุชู ุชุนุฏูููุง ุจุงุณุชุฎุฏุงู Mobx.  ููุฏ ุชุบูุฑุช ุงูุจูุงูุงุช - ุญุฏุซ ุฑุฏ ูุนู ูู ุงููููู (ุณูุธูุฑ ุฃุฏูุงู).  ูุจุงูุชุงูู ุ ูุง ุงูุงุดุชุฑุงูุงุช ุงูุฎุงุตุฉ ูุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช - Mobx ูุณูู ุงูุชุบููุฑุงุช ููุณูุง! <br><br>  ุณูู ูุนูุฏ ุฅูู ุฅุฏุงุฑุฉ ุงูุชุทุจูู ุจุงููุงูู ูู <i>ุงููุชุฌุฑ ุงูุฑุฆูุณู</i> ุ ููู ุงูุขู ุณููุนู ุงูููููุงุช.  ูุฏููุง ุซูุงุซุฉ ุฃููุงุน ูููุง - <i>Fio</i> ุ <i>Email</i> ุ <i>Button</i> .  ููููู ุงูุฃูู ูุงูุซุงูุซ ุนุงููููุง ุ <i>ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู</i> ูุฎุตุตูุง.  ููุจุฏุฃ ูุนู. <br><br>  ุงูุนุฑุถ ูู ุงููููู ุงููุนุชุงุฏ React React: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Email.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {inject, observer} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx-react'</span></span>; @inject(<span class="hljs-string"><span class="hljs-string">"EmailStore"</span></span>) @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Email</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); }; componentDidMount = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.EmailStore.validate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.name); }; componentWillUnmount = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.EmailStore.unmount(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.name); }; render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.name; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EmailStore = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.EmailStore; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> params = EmailStore.params; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> status = <span class="hljs-string"><span class="hljs-string">"form-group email "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (params.isCorrect &amp;&amp; params.onceValidated) status += <span class="hljs-string"><span class="hljs-string">"valid"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (params.isWrong &amp;&amp; params.onceValidated) status += <span class="hljs-string"><span class="hljs-string">"error"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div className={status}&gt; &lt;label htmlFor={name}&gt;{</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.label}&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/label&gt; &lt;input type="email" disabled={this.props.disabled} name={name} id={name} value={params.value} onChange={(e) =&gt; EmailStore.bindData(e, name)} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ); } }</span></span></span></span></span></span></code> </pre></div></div><br>  ูููู ุจุชูุตูู ุงููููู ุงูุฎุงุฑุฌู ููุชุญูู ูู ุงูุตุญุฉ ุ ููู ุงูููู ุงูููุงู ุจุฐูู ุจุนุฏ ุชุถููู ุงูุนูุตุฑ ุจุงููุนู ูู ุงูุชุฎุทูุท.  ูุฐูู ุ ูุชู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ูู store ูู <i>componentDidMount</i> . <br><br>  ุงูุขู ุงููุณุชูุฏุน ููุณู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">EmailStore.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {action, observable} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reactTriggerChange <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-trigger-change"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Validators <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../helpers/Validators"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { getTarget } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../helpers/elementaries"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmailStore</span></span></span><span class="hljs-class"> </span></span>{ @observable params = { <span class="hljs-attr"><span class="hljs-attr">value</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">disabled</span></span> : <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">isCorrect</span></span> : <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">isWrong</span></span> : <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">onceValidated</span></span> : <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">prevalidated</span></span> : <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-comment"><span class="hljs-comment">/** *    */</span></span> @action bindData = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e, name</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.value = getTarget(e).value; }; <span class="hljs-comment"><span class="hljs-comment">/** *   */</span></span> @action validate = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> callbacks = { <span class="hljs-attr"><span class="hljs-attr">success</span></span> : <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">formatedValue</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.value = formatedValue; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.isCorrect = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.isWrong = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.onceValidated = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }, <span class="hljs-attr"><span class="hljs-attr">fail</span></span> : <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">formatedValue</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.value = formatedValue; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.isCorrect = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.params.isWrong = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> options = { <span class="hljs-attr"><span class="hljs-attr">type</span></span> : <span class="hljs-string"><span class="hljs-string">"email"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(name); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Validators(element, options, callbacks).init(); <span class="hljs-comment"><span class="hljs-comment">//    reactTriggerChange(element); this.params.prevalidated = true; }; }</span></span></code> </pre> <br></div></div><br>  ูุฌุฏุฑ ุงูุงูุชุจุงู ุฅูู ููุงููู ุฌุฏูุฏูู. <br><br>  <b>ูููู ููุงุญุธุชู</b> - ูุงุฆู ุ ุชุชู ูุฑุงูุจุฉ ุฃู ุชุบููุฑ ูู ุงูุญููู ููู ุจูุงุณุทุฉ Mobx (ููุฑุณู ุฅุดุงุฑุงุช ุฅูู <i>ุงููุฑุงูุจ</i> ุ ุงููุดุชุฑู ูู ุชุฎุฒูููุง ุงููุญุฏุฏ). <br>  <b>ุงูุฅุฌุฑุงุก</b> - ูุฌุจ ุนูู ูุฐุง ุงูุฏูููุฑ ุงูุชูุงู ุฃู ูุนุงูุฌ ูุบูุฑ ุญุงูุฉ ุงูุชุทุจูู ู / ุฃู ูุชุณุจุจ ูู ุขุซุงุฑ ุฌุงูุจูุฉ.  ูุญู ููุง ูุบูุฑ ูููุฉ <i>ุงููููุฉ</i> ูู <i>paramobsobservable</i> . <br><br>  ูุฐุง ูู ุดูุก ุ ูุฏููุง ูููู ุจุณูุท ุฌุงูุฒ!  ููููู ุชุชุจุน ุจูุงูุงุช ุงููุณุชุฎุฏู ูุชุณุฌูููุง.  ุณูุฑู ูุงุญููุง ููู <i>ูุดุชุฑู</i> ุงููุณุชูุฏุน ุงููุฑูุฒู ูู <i>mainStore</i> ูู ุชุบููุฑ ูุฐู ุงูุจูุงูุงุช. <br><br>  ุงูุขู ูููู <i>Fio</i> ูููุฐุฌู.  ุงูุงุฎุชูุงู ุนู ุณุงุจูุชูุง ูู ุฃููุง ุณูุณุชุฎุฏู ููููุงุช ูู ูุฐุง ุงูููุน ุจุนุฏุฏ ุบูุฑ ูุญุฏูุฏ ูู ุงููุฑุงุช ูู ุชุทุจูู ูุงุญุฏ.  ูุฐุง ููุฑุถ ุจุนุถ ุงููุชุทูุจุงุช ุงูุฅุถุงููุฉ ุนูู ูุฎุฒู ุงูููููุงุช.  ุนูุงูุฉ ุนูู ุฐูู ุ <b>ุณูุจุฐู</b> ุงููุฒูุฏ ูู ุงูุชูููุญุงุช ุญูู ุฃุญุฑู ุงูุฅุฏุฎุงู ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ <b>DaData</b> ุงูููุชุงุฒุฉ.  ุนุฑุถ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Fio.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {inject, observer} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx-react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {get} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx'</span></span>; @inject(<span class="hljs-string"><span class="hljs-string">"FioStore"</span></span>) @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fio</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); }; componentDidMount = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** *       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.FioStore.registration(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props); }; componentWillUnmount = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.FioStore.unmount(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.name); }; render() { <span class="hljs-comment"><span class="hljs-comment">/** *       *  DaData: * data.surname -  * data.name -  * https://dadata.ru/api/suggest/name */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FioStore = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.FioStore; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.name; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> item = get(FioStore.items, name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item &amp;&amp; item.isCorrect &amp;&amp; item.onceValidated &amp;&amp; !item.prevalidated) status = <span class="hljs-string"><span class="hljs-string">"valid"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item &amp;&amp; item.isWrong &amp;&amp; item.onceValidated) status = <span class="hljs-string"><span class="hljs-string">"error"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    store let value = this.props.value; if (item) value = item.value; return ( &lt;div className="form-group fio"&gt; &lt;label htlmfor={name}&gt;{this.props.label}&lt;/label&gt; &lt;input type="text" disabled={this.props.disabled} name={name} id={name} value={value} onChange={(e) =&gt; FioStore.bindData(e, name)} /&gt; {(item &amp;&amp; item.suggestions &amp;&amp; item.suggestions.length &gt; 0) &amp;&amp; &lt;div className="hint-container" id={"hint-container-" + item.id}&gt;{item.suggestions.map((suggestion, i) =&gt; { return ( &lt;div className={"suggestion-item fs-" + i} key={i} value={suggestion.data[name]} onClick={(e) =&gt; FioStore.setSuggestion(e, name)}&gt; &lt;span className="suggestion-text"&gt;{suggestion.data[name]}&lt;/span&gt; &lt;/div&gt;) })}&lt;/div&gt;} &lt;/div&gt; ); } }</span></span></code> </pre></div></div><br>  ููุฌุฏ ุดูุก ุฌุฏูุฏ ููุง: ูุง ูููููุง ุงููุตูู ุฅูู ุญุงูุฉ ุงููููู ูุจุงุดุฑุฉู ุ ูููู ูู ุฎูุงู <i>ุงูุญุตูู ุนูู</i> : <br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">get(FioStore.items, name)</code> </pre> <br>  ุงูุญูููุฉ ูู ุฃู ุนุฏุฏ ูุซููุงุช ุงููููู ุบูุฑ ูุญุฏูุฏ ุ ูุงููุณุชูุฏุน ูุงุญุฏ ููู ููููุงุช ูุฐุง ุงูููุน.  ูุฐูู ุ ุฃุซูุงุก ุงูุชุณุฌูู ุ ูุฏุฎู ูุนููุงุช ูู ูุซูู ูู <i>ุงูุฎุฑูุทุฉ</i> : <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">FioStore.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {action, autorun, observable, get, set} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reactTriggerChange <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-trigger-change"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Validators <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../helpers/Validators"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { getDaData, blockValidate } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../helpers/functions"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { getAttrValue, scrollToElement, getTarget } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../helpers/elementaries"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FioStore</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { autorun(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** *        .         setSuggestion() */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; $(<span class="hljs-string"><span class="hljs-string">"body"</span></span>).click(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.target.className !== <span class="hljs-string"><span class="hljs-string">"suggestion-item"</span></span> &amp;&amp; e.target.className !== <span class="hljs-string"><span class="hljs-string">"suggestion-text"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> items = self.items.entries(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, value] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> items) { value.suggestions = []; } } }); }) } <span class="hljs-comment"><span class="hljs-comment">/** *   items       Fio    */</span></span> @observable items = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([]); <span class="hljs-comment"><span class="hljs-comment">/** *    */</span></span> @action registration = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">params</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nameExists = get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items, params.name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!blockValidate({params, nameExists, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"Fio"</span></span>})) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  items   const value = { value : params.value, disabled : params.disabled, isCorrect : null, isWrong : null, suggestions : [], daData : params.daData, startValidation : true, //      onceValidated : false, //      prevalidated : false }; set(this.items, params.name, value); this.validate(params.name); }; /** *    */ @action unmount = (name) =&gt; { this.items.delete(name); }; /** *    *    */ @action bindData = (e, name) =&gt; { const value = getTarget(e).value; const item = get(this.items, name); /** *     DaData */ if (item.daData &amp;&amp; !item.startValidation) { getDaData({value, type: "fio", name}) .then((result) =&gt; { item.suggestions = result.suggestions; }) .catch((error) =&gt; {console.log(error)}) } else { item.startValidation = false; item.value = value; } }; /** *   */ @action setSuggestion = (e, name) =&gt; { if (e) e.preventDefault(); get(this.items, name).value = getAttrValue(e); //     get(this.items, name).suggestions = []; get(this.items, name).isCorrect = true; get(this.items, name).isWrong = false; }; /** *   */ @action validate = (name) =&gt; { const callbacks = { success : (formatedValue) =&gt; { get(this.items, name).value = formatedValue; get(this.items, name).isCorrect = true; get(this.items, name).isWrong = false; get(this.items, name).onceValidated = true; }, fail : (formatedValue) =&gt; { get(this.items, name).value = formatedValue; get(this.items, name).isCorrect = false; get(this.items, name).isWrong = true; } }; const options = { type : "fio" }; const element = document.getElementById(name); new Validators(element, options, callbacks).init(); //    reactTriggerChange(element); get(this.items, name).prevalidated = true; }; }</span></span></code> </pre></div></div><br>  ุชุชู ุชููุฆุฉ ุญุงูุฉ ุงููููู ุงูุนุงู ูุฏููุง ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">@observable items = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([]);</code> </pre> <br>  ุณูููู ุฃูุซุฑ ููุงุกูุฉ ููุนูู ูุน ูุงุฆู JS ููุชุธู ุ ููุน ุฐูู ุ ูู ูุชู ุงุณุชุบูุงูู ุนูุฏ ุชุบููุฑ ููู ุงูุญููู ุงูุฎุงุตุฉ ุจู ุ ูุฃูู  ุชุชู ุฅุถุงูุฉ ุงูุญููู ุจุดูู ุญููู ุนูุฏ ุฅุถุงูุฉ ููููุงุช ุฌุฏูุฏุฉ ุฅูู ุงูุตูุญุฉ.  ุชููู ุชูููุญุงุช DaData ูุฃุฎุฐูุง ุจุดูู ูููุตู. <br><br>  ูุจุฏู ูููู ุงูุฒุฑ ูุชุดุงุจููุง ุ ูููู ูุง ุชูุฌุฏ ูุตุงุฆุญ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Button.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {inject, observer} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx-react'</span></span>; @inject(<span class="hljs-string"><span class="hljs-string">"ButtonStore"</span></span>) @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomButton</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); }; componentDidMount = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** *       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.ButtonStore.registration(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props); }; componentWillUnmount = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.ButtonStore.unmount(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.name); }; render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.name; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"form-group button"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;button disabled={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.disabled} onClick={(e</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.ButtonStore.bindClick(e, name)} name={name} id={name} &gt;{<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.text}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt; &lt;/</span></span>div&gt; ); } }</code> </pre> <br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ButtonStore.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {action, observable, get, set} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {blockValidate} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../helpers/functions"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonStore</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {} <span class="hljs-comment"><span class="hljs-comment">/** *   items       Button    */</span></span> @observable items = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([]) <span class="hljs-comment"><span class="hljs-comment">/** *    */</span></span> @action registration = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">params</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nameExists = get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items, params.name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!blockValidate({params, nameExists, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"Button"</span></span>})) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  items   const value = { disabled : params.disabled, isClicked : false }; set(this.items, params.name, value); }; /** *    */ @action unmount = (name) =&gt; { this.items.delete(name); }; /** *    */ @action bindClick = (e, name) =&gt; { e.preventDefault(); get(this.items, name).isClicked = true; }; }</span></span></code> </pre> <br></div></div><br>  <i>ูุชู</i> ูู ูููู <i>ุงูุฒุฑ</i> ุจูุงุณุทุฉ ูููู <i>HOC</i> ูู <i>ButtonArea</i> .  ูุฑุฌู ููุงุญุธุฉ ุฃู ุงููููู ุงูุฃูุฏู ูุชุถูู ูุฌููุนุฉ ุงููุชุงุฌุฑ ุงูุฎุงุตุฉ ุจู ุ ุงูุฃุตุบุฑ ูููุง.  ูู ุณูุงุณู ุงูููููุงุช ุงููุชุฏุงุฎูุฉ ุ ููุณุช ููุงู ุญุงุฌุฉ ูุฅุนุงุฏุฉ ุชูุฌูู ุฃู ูุนููุงุช ูุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช.  ูู ูุง ูู ูุทููุจ ูุชุดุบูู ูููู ูุนูู ูุถุงู ุฅููู ูุจุงุดุฑุฉ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ButtonArea.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {inject, observer} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx-react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> l10n <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../l10n/localization.js"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./Button"</span></span>; @inject(<span class="hljs-string"><span class="hljs-string">"mainStore"</span></span>, <span class="hljs-string"><span class="hljs-string">"optionsStore"</span></span>) @observer <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonArea</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); }; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"button-container"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.optionsStore.dict.buttonsHeading}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">"</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">send_data</span></span></span></span><span class="xml"><span class="hljs-tag">"} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.props.mainStore.buttons.sendData.disabled</span></span></span></span><span class="xml"><span class="hljs-tag"> ? </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">true</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">false</span></span></span></span><span class="xml"><span class="hljs-tag">} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{l10n.ru.common.continue}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } }</span></span></code> </pre> <br></div></div><br>  ูุฐูู ุ ูุฏููุง ุฌููุน ุงูููููุงุช ุฌุงูุฒุฉ.  ุงูุฃูุฑ ูุชุฑูู ููุฏูุฑ <i>ุงููุชุฌุฑ ุงูุฑุฆูุณู.</i>  ุฃููุงู ุ ูู ุฑูุฒ ุงูุชุฎุฒูู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">mainStore.js</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {observable, computed, autorun, reaction, get, action} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobx'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> optionsStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./optionsStore"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ButtonStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./ButtonStore"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FioStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./FioStore"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> EmailStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./EmailStore"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { fetchOrdinary, sendStats } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../helpers/functions"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> l10n <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"../../../l10n/localization.js"</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mainStore</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-comment"><span class="hljs-comment">/** *    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ButtonStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ButtonStore(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.FioStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FioStore(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.EmailStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EmailStore(); autorun(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fillBlocks(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fillData(); }); <span class="hljs-comment"><span class="hljs-comment">/** *      */</span></span> reaction( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dataInput, (result) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> isIncorrect = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result[i]) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> res = result[i][j]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!res.isCorrect) isIncorrect = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userData[j] = res.value; } }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isIncorrect) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.buttons.sendData.disabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.buttons.sendData.disabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }; } ); <span class="hljs-comment"><span class="hljs-comment">/** *     */</span></span> reaction( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.sendDataButton, (result) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.isClicked) { get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ButtonStore.items, <span class="hljs-string"><span class="hljs-string">"send_data"</span></span>).isClicked = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> authRequestSuccess = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"request is success!"</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> authRequestFail = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"request is fail!"</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> request = { <span class="hljs-attr"><span class="hljs-attr">method</span></span> : <span class="hljs-string"><span class="hljs-string">"send_userdata"</span></span>, <span class="hljs-attr"><span class="hljs-attr">params</span></span> : { <span class="hljs-attr"><span class="hljs-attr">name</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userData.name, <span class="hljs-attr"><span class="hljs-attr">surname</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userData.surname, <span class="hljs-attr"><span class="hljs-attr">email</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userData.email } }; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Request body is:"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(request); fetchOrdinary( optionsStore.OPTIONS.sendIdentUrl, <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(request), { <span class="hljs-attr"><span class="hljs-attr">success</span></span>: authRequestSuccess, <span class="hljs-attr"><span class="hljs-attr">fail</span></span>: authRequestFail } ); } } } ); } @observable userData = { <span class="hljs-attr"><span class="hljs-attr">name</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">surname</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">email</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span> }; @observable buttons = { <span class="hljs-attr"><span class="hljs-attr">sendData</span></span> : { <span class="hljs-attr"><span class="hljs-attr">disabled</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }; <span class="hljs-comment"><span class="hljs-comment">/** *     * @key -   * @value -      (name, type),          */</span></span> componentsMap = { <span class="hljs-attr"><span class="hljs-attr">userData</span></span> : [ [<span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"fio"</span></span>], [<span class="hljs-string"><span class="hljs-string">"surname"</span></span>, <span class="hljs-string"><span class="hljs-string">"fio"</span></span>], [<span class="hljs-string"><span class="hljs-string">"email"</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>], [<span class="hljs-string"><span class="hljs-string">"send_data"</span></span>, <span class="hljs-string"><span class="hljs-string">"button"</span></span>] ] }; <span class="hljs-comment"><span class="hljs-comment">/** *     listener'  stores */</span></span> @observable listenerBlocks = {}; <span class="hljs-comment"><span class="hljs-comment">/** *    */</span></span> @action fillBlocks = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.componentsMap) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pageBlock = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.componentsMap[i]; <span class="hljs-comment"><span class="hljs-comment">//      (key)     (value) const blocks = {}; pageBlock.forEach((item, i) =&gt; { const _name = item[0]; const _type = item[1]; if (!blocks[_type]) { blocks[_type] = [_name] } else { blocks[_type].push(_name) } }) this.listenerBlocks[i] = blocks; } }; /** *    */ @action fillData = () =&gt; { if (optionsStore.preset) { // ,   undefined,     if (optionsStore.preset.name) this.userData.name = optionsStore.preset.name; if (optionsStore.preset.surname) this.userData.surname = optionsStore.preset.surname; } }; /** * Listener    */ @computed get dataInput() { const mappedResult = { fio : {}, email : { email : {} } }; if (this.FioStore &amp;&amp; this.FioStore.items) { this.listenerBlocks.userData.fio.forEach((item) =&gt; { const i = get(this.FioStore.items, item); if (i) { mappedResult.fio[item] = { isCorrect : i.isCorrect, value : i.value } } }) } if (this.EmailStore &amp;&amp; this.EmailStore.params) { mappedResult.email.email = { isCorrect : this.EmailStore.params.isCorrect, prevalidated : this.EmailStore.params.prevalidated, value : this.EmailStore.params.value } } return mappedResult } /** * Listener     */ @computed get sendDataButton() { let result = {}; const i = get(this.ButtonStore.items, "send_data"); if (i) { result = { isClicked : i.isClicked } } return result } } export default new mainStore();</span></span></code> </pre> <br></div></div><br>  ุนุฏุฏ ูููู ูู ุงูููุงูุงุช ุงูุฑุฆูุณูุฉ. <br><br>  <b>ุญุณุงุจ</b> ูู ุงูุฏูููุฑ ูููุธุงุฆู ุงูุชู ุชุชุจุน ุงูุชุบููุฑุงุช ูู <i>ููุงุญุธุชูุง</i> .  ูู ุฃูู ููุฒุงุช Mobx ุฃูู ูุชุนูุจ ููุท ุงูุจูุงูุงุช ุงูุชู ูุชู ุญุณุงุจูุง ุซู ูุชู ุฅุฑุฌุงุนูุง ููุชูุฌุฉ ูุฐูู.  ุฑุฏ ุงููุนู ุ ููุชูุฌุฉ ูุฐูู ุ ุฅุนุงุฏุฉ ุฑุณู DOM ุงูููุฑูุณูุฉ ูุญุฏุซ ููุท ุนูุฏ ุงูุถุฑูุฑุฉ. <br>  <b>ุฑุฏ ูุนู</b> - ุฃุฏุงุฉ ูุชูุธูู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ุนูู ุฃุณุงุณ ุงูุญุงูุฉ ุงููุชุบูุฑุฉ.  ูุณุชุบุฑู ูุธููุชูู: ุงูุฃููู ุงููุญุณูุจุฉ ุ ูุฅุฑุฌุงุน ุงูุญุงูุฉ ุงููุญุณูุจุฉ ุ ูุงูุซุงููุฉ ูุน ุงูุขุซุงุฑ ุงูุชู ูุฌุจ ุฃู ุชุชุจุน ุชุบููุฑุงุช ุงูุญุงูุฉ.  ูู ูุซุงููุง ุ ูุชู ุชุทุจูู <i>ุฑุฏ ุงููุนู</i> ูุฑุชูู.  ูู ุงูุจุฏุงูุฉ ุ ููุธุฑ ุฅูู ุญุงูุฉ ุงูุญููู ููุณุชูุชุฌ ูุง ุฅุฐุง ูุงู ุงููููุฐุฌ ุจุฃูููู ุตุญูุญูุง ุ ููุฐูู ูุณุฌู ูููุฉ ูู ุญูู.  ูู ุงูุซุงููุฉ ุ ูุถุบุท ุนูู ุฒุฑ (ุจุชุนุจูุฑ ุฃุฏู ุ ุฅุฐุง ูุงู ููุงู ุนูุงูุฉ "ุงูุถุบุท ุนูู ุฒุฑ") ุ ูุฅููุง ูุฑุณู ุงูุจูุงูุงุช ุฅูู ุงูุฎุงุฏู.  ูุชู ุนุฑุถ ูุงุฆู ุงูุจูุงูุงุช ูู ูุญุฏุฉ ุชุญูู ุงููุณุชุนุฑุถ.  ูุธุฑูุง ูุฃู <i>mainStore</i> ูุนุฑู ุฌููุน ุงููุณุชูุฏุนุงุช ุ <i>ูุจูุฌุฑุฏ</i> ูุนุงูุฌุฉ ููุฑุฉ ุฒุฑ ูุงุญุฏุฉ ุ ูููููุง ุชุญูู ุชุนุทูู ุงูุนูุงูุฉ ุจุฃุณููุจ ุถุฑูุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ButtonStore.items, <span class="hljs-string"><span class="hljs-string">"send_data"</span></span>).isClicked = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br>  ููููู ููุงูุดุฉ ูุฏู ููุจูููุฉ ูุฌูุฏ ูุฐู "ุงูุถุฑูุฑุฉ" ุ ูููู ูู ุฃู ุญุงู ุ ูุชู ุงูุชุญูู ูู ุงุชุฌุงู ูุงุญุฏ ููุท - ูู <i>mainStore</i> ุฅูู <i>ButtonStore</i> . <br>  <b>ูุชู</b> ุงุณุชุฎุฏุงู <b>ุงูุชุดุบูู ุงูุชููุงุฆู</b> ุญูุซ ูุฑูุฏ ุชุดุบูู ุจุนุถ ุงูุฅุฌุฑุงุกุงุช ูุจุงุดุฑุฉู ุ ูููุณ ูุฑุฏ ูุนู ูุชุฎุฒูู ุงูุชุบููุฑุงุช.  ูู ุงููุซุงู ุงูุฎุงุต ุจูุง ุ ูุชู ุฅุทูุงู ูุธููุฉ ูุณุงุนุฏุฉ ูุงุญุฏุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ููุก ุญููู ุงููููุฐุฌ ูุณุจููุง ุจุจูุงูุงุช ูู ุงููุงููุณ. <br><br>  ูุจุงูุชุงูู ุ ูุฅู ุชุณูุณู ุงูุฅุฌุฑุงุกุงุช ุงูุชู ูุฏููุง ูู ุนูู ุงููุญู ุงูุชุงูู.  ููููุงุช ุชุชุจุน ุฃุญุฏุงุซ ุงููุณุชุฎุฏู ูุชุบููุฑ ุญุงูุชูุง.  <i>mainStore ูู</i> ุฎูุงู <i>ุญุณุงุจ</i> ูุญุณุจ ุงููุชูุฌุฉ ุจูุงุก ุนูู ุชูู ุงูุญุงูุฉ ุงูุชู ุชุบูุฑุช ููุท.  ุชุจุญุซ <i>ุชูู ุงููุญุณูุจุฉ</i> ุงููุฎุชููุฉ ุนู ุชุบููุฑุงุช ูู ุญุงูุงุช ูุฎุชููุฉ ูู ูุณุชูุฏุนุงุช ูุฎุชููุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุฎูุงู <i>ุฑุฏ ุงููุนู ุ</i> ุงุณุชูุงุฏูุง ุฅูู ุงููุชุงุฆุฌ <i>ุงููุญุณูุจุฉ</i> ุ <i>ูุฅููุง ูููุฐ</i> ุฅุฌุฑุงุกุงุช ูุน ุนูุงุตุฑ <i>ููุญูุธุฉ</i> ุ ููุฐูู ูููุฐ ุขุซุงุฑูุง ุฌุงูุจูุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูุทูุจ AJAX).  ุชุดุชุฑู ุนูุงุตุฑ <i>ุงููุฑุงูุจุฉ</i> ูู ุงูููููุงุช ุงููุฑุนูุฉ ุ ูุงูุชู ูุชู ุฅุนุงุฏุฉ ุฑุณููุง ุฅุฐุง ูุฒู ุงูุฃูุฑ.  ุฏูู ุจูุงูุงุช ุฃุญุงุฏู ุงูุงุชุฌุงู ูุน ุชุญูู ูุงูู ูู ุฃูู ููุง ุงูุชุบููุฑุงุช. <br><br>  <b>ููููู ุชุฌุฑุจุฉ</b> ุงููุซุงู ูุงูุฑูุฒ ุจููุณู.  ุฑุงุจุท ุฅูู ุงููุณุชูุฏุน: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">github.com/botyaslonim/mobx-habr</a> . <br>  ุซู ูุงููุนุชุงุฏ: <i>npm i</i> ุ <i>npm ุชุดุบูู ูุญูู</i> .  ูู ุงููุฌูุฏ <i>ุงูุนูููู</i> ุ ููู <i>index.html</i> .  ุชูููุญุงุช DaData ุชุนูู ุนูู ุญุณุงุจู ุงููุฌุงูู ุ ูุจุงูุชุงูู ุ ููู ุงููุญุชูู ุฃู ุชูุน ูู ุจุนุถ ุงูููุงุท ุจุณุจุจ ุชุฃุซูุฑ habr. <br><br>  ุณุฃููู ุณุนูุฏูุง ุจุฃู ุชุนูููุงุช ูุงูุชุฑุงุญุงุช ุจูุงุกุฉ ุญูู ุนูู ุงูุชุทุจููุงุช ุนูู <b>Mobx!</b> <br><br>  ูู ุงูุฎุชุงู ุ ุณุฃููู ุฅู ุงูููุชุจุฉ ูุฏ ุณูููุช ุงูุนูู ุฅูู ุญุฏ ูุจูุฑ ุจุงุณุชุฎุฏุงู ุงูุจูุงูุงุช.  ููุชุทุจููุงุช ุงูุตุบูุฑุฉ ูุงููุชูุณุทุฉ ุงูุญุฌู ุ ุณูููู ุจุงูุชุฃููุฏ ุฃุฏุงุฉ ูุฑูุญุฉ ููุบุงูุฉ ููุณูุงู ุฎุตุงุฆุต ุงูููููุงุช ูุนูููุงุช ุงูุงุณุชุฑุฌุงุน ูุงูุชุฑููุฒ ูุจุงุดุฑุฉ ุนูู ููุทู ุงูุนูู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar471048/">https://habr.com/ru/post/ar471048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar471038/index.html">ููู ูุงุตู Linux ูุน ุฃูุซูุฉ</a></li>
<li><a href="../ar471040/index.html">[ุฅุดุงุฑุฉ ูุฑุฌุนูุฉ] ุฅุตุฏุงุฑ PDF ู ePUB ูู ุฏููู ุงูุชูุงุนู</a></li>
<li><a href="../ar471042/index.html">ุญู ุงููุดููุงุช ูุน pwnable.kr 25 - otp. ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ููู Linux</a></li>
<li><a href="../ar471044/index.html">Sass MediaScreen - ุชุนุฑูู ุฃุฌูุฒุฉ CSS</a></li>
<li><a href="../ar471046/index.html">ุฃููู ุฃูุงููููุง</a></li>
<li><a href="../ar471050/index.html">ุชูููู ุชูููู ุชูููุฉ ุตูุฏูู D: ููุตุงุช ุฌุฏูุฏุฉ ูููุญ ุฌุฏูุฏุฉ ...</a></li>
<li><a href="../ar471052/index.html">ูู ุงุณุชุทูุน ูุงุฒุ ุถุฑุจ ูู ูุจู ุงูุจุฑูุฌุฉ ุงูููุน ุงูุนุงู</a></li>
<li><a href="../ar471054/index.html">ููุฐ ูุชุฑุฉ ุทูููุฉ ุญูู ูุงูุนูุฉ ุงูุชูุฏูุฏ ุงูููููู ููุนููุงุช ุงููุดูุฑุฉ ููุดุงูู "ูุจูุกุฉ 2027"</a></li>
<li><a href="../ar471062/index.html">ููููุฉ ุชุนููู ุฃููุณ ูุฅุฏุงุฑุฉ ููุฒูู ุงูุฐูู. ุชูุฑูุฑ ูุงูุฏูุณ</a></li>
<li><a href="../ar471066/index.html">ููู ูุจุฏู ุฃุฑุดูู ุงูุฑูุฒ ุงูุจุฑูุฏู ููุงุฐุง ูููููุง ุฃู ููุนู ุญูุงู ุฐูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>