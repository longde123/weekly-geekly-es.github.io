<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò∫ üí≠ üí£ No√ß√µes b√°sicas de DevOps. Entrada no projeto a partir do zero üßùüèø üìÑ „Ä∞Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em novembro de 2018, um departamento de suporte √† informa√ß√£o foi criado na Litu√¢nia e convidou Andrei Yumashev para liderar. No ano passado, o departa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>No√ß√µes b√°sicas de DevOps. Entrada no projeto a partir do zero</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/468537/">  Em novembro de 2018, um departamento de suporte √† informa√ß√£o foi criado na Litu√¢nia e convidou <strong>Andrei Yumashev</strong> para liderar.  No ano passado, o departamento ajuda a empresa a trabalhar e desenvolver e mant√©m toda a infraestrutura sob controle.  Mas esse nem sempre foi o caso.  Antes de come√ßar o trabalho, Andrei se deparou com ru√≠nas: Nagios meio morto, Cacti vivo e Puppet em coma, Wiki morto de 120 p√°ginas, tabelas de tarefas incoerentes e lista de ferro, arquitetura desatualizada, 340 n√∫cleos inativos, 2 TB de RAM e 17 TB espa√ßo em disco que, por algum motivo, n√£o foi registrado nas tabelas de invent√°rio.  Planos que n√£o funcionam, prazos que terminam, ambiente de trabalho e ferramentas que n√£o existem - tudo isso aguardava Andrei em um novo projeto. <br><br><img src="https://habrastorage.org/webt/jr/wy/ag/jrwyagng-7fixaij6vkk8bbnet8.jpeg"><br><br>  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevOpsConf 2019,</a> Andrei fez um relat√≥rio no qual mostrou em exemplos ao vivo o que vale e o que n√£o deve ser feito quando voc√™ entra em um projeto que n√£o viu ou conhece mal.  Sob o corte, h√° uma vers√£o atualizada da hist√≥ria - como analisar adequadamente a variedade de problemas e criar um plano de atividades, como calcular o KPI corretamente e quando parar no tempo. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YOaIg9By0fU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <strong>Andrey Yumashev</strong> √© o propriet√°rio de suas pr√≥prias empresas de desenvolvimento em v√°rios campos (online e offline), consultor na constru√ß√£o de processos e chefe do departamento de suporte a informa√ß√µes da LiteRes. <br><br>  Um pouco sobre o LiteRes.  Este √© o maior fornecedor de livros eletr√¥nicos e de √°udio na R√∫ssia, uma editora e v√°rios projetos de parceria.  S√£o centenas de milhares de linhas de Perl, v√°rios clusters e reposit√≥rios de bancos de dados.  S√£o 2 GB de tr√°fego de sa√≠da por segundo, centenas de milhares de solicita√ß√µes exclusivas por dia, v√°rios racks em diferentes datacenters e mais de 100 servidores.  Em suma, n√£o se trata apenas de uma livraria eletr√¥nica. <br><br><h2>  Primeiros passos </h2><br>  Eu trabalhava no LiteRes em uma base de pe√ßa.  A empresa pratica o desenvolvimento de pessoal externo com registro de funcion√°rios remotos no estado. <br><br>  O sistema de realiza√ß√£o de tarefas em litros trabalha com o princ√≠pio de um "leil√£o".  No rastreador de tarefas interno, gerentes e arquitetos descrevem tarefas para projetos internos e as avaliam na moeda local.  A moeda √© "cogumelos, grama e √°rvore". <br><br>  Em seguida, come√ßa o "leil√£o f√°cil" - qualquer desenvolvedor pode aceitar a tarefa ou barganhar.  Bem feito - voc√™ √© pago.  Eu n√£o trabalhei de jeito nenhum - voc√™ n√£o entende.  De uma maneira divertida, as pessoas est√£o interessadas em concluir tarefas.  Para saber mais sobre esse sistema, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apresenta√ß√£o de</a> Dmitry Gribov. <br><br><img src="https://habrastorage.org/webt/1a/zj/wj/1azjwjlwwzndujp6trjhdlzwyn4.jpeg"><br>  <em>Trabalhe para os cogumelos.</em> <br><br>  O sistema me convinha - apoiei a experi√™ncia de programa√ß√£o em Perl, trabalhei quando era conveniente e n√£o gastei muito tempo com isso.  Nesse modo, passei alguns anos at√© novembro do ano passado e pensei entender a estrutura do ecossistema. <br><br><h3>  Eu estava errado </h3><br>  Fui convidado para a empresa e informei que meus servi√ßos como desenvolvedor Perl n√£o eram necess√°rios e me ofereceram a chefia de um novo departamento.  Em novembro de 2018, tornei-me chefe do departamento de informa√ß√µes. <br><br>  Na minha frente, havia espa√ßos abertos: v√°rios racks com ferro em v√°rios data centers em Moscou, arquitetura desatualizada, recursos externos e a quase completa aus√™ncia de documenta√ß√£o relevante para isso.  O introdut√≥rio soou algo como isto: "Agora este √© o seu patrim√¥nio, melhore, n√£o quebre e apoie".  Havia uma lista pronta de tarefas e planos aproximados para o pr√≥ximo ano.  Era necess√°rio compreender tudo isso e traz√™-lo para uma forma humana. <br><blockquote>  Havia um sentimento de que eu estava olhando para o abismo, e o abismo estava olhando para mim. </blockquote>  A experi√™ncia dos √∫ltimos anos me ajudou muito quando desenvolvi uma posi√ß√£o clara ao trabalhar com um estranho ou incompreens√≠vel.  Primeiro de tudo, este √© um estudo completo e um plano de a√ß√£o m√≠nimo.  Foi aqui que eu comecei. <br><br><h2>  Limpeza √© a chave para a sa√∫de </h2><br>  A ordem √© antes de tudo. <br><br>  Durante o primeiro m√™s conseguiu encontrar: <br><br><ul><li>  Google Sheets espalhados com tarefas atuais e uma pitada de informa√ß√µes √∫teis; </li><li>  documentos espalhados: Word, textos, fragmentos de p√°ginas antigas do Wiki 120; </li><li>  Nagios meio morto; </li><li>  monitoramento condicional ao vivo de cactos; </li><li>  fantoche muito antigo com raros sinais de vida. </li></ul><br>  Todas essas ru√≠nas tamb√©m coletaram 400 m√©tricas. <br><br><img src="https://habrastorage.org/webt/gu/q9/bx/guq9bxrahvxth1pywoi2rgw8ck0.jpeg"><br>  <em>As ru√≠nas que encontrei no primeiro m√™s.</em> <br><br>  Fiquei um pouco divertido, li tudo fluentemente e fiquei preso aos processos do Trello.  Ele transferiu as tarefas atuais de seus colegas para ele e come√ßou a sonhar - escrever um plano para o trimestre e o ano. <br><br><h3>  Primeiro erro </h3><blockquote>  N√£o h√° planos at√© explorar a √°rea. </blockquote>  O plano brilhava com calor e sa√∫de, mas n√£o levava em conta a realidade.  Era bonito e simples: implementar monitoramento, analisar logs e transferir a implanta√ß√£o para o CI / CD.  Em algum lugar no final, houve uma "an√°lise das fraquezas do projeto".  Primeiros passos cl√°ssicos. <br><br>  Eu esqueci a coisa principal.  Minha primeira prioridade n√£o √© implementar ferramentas para a implementa√ß√£o de ferramentas, mas garantir a viabilidade e a estabilidade do servi√ßo como um todo. <br><br>  Enquanto escrevia o plano e atormentado pelas perguntas dos meus colegas, chegaram os primeiros problemas.  Um dos n√≥s de um dos clusters de cluster ficou sem espa√ßo e o SSD como um todo terminou no outro n√≥ do mesmo cluster.  Comprei urgentemente novos discos maiores e nosso departamento rapidamente adquiriu experi√™ncia na substitui√ß√£o desses discos, copiando o sistema de disco para disco.  Ap√≥s a substitui√ß√£o dos discos, criamos o cluster do zero atrav√©s do SST.  O cluster √© constru√≠do em Percona e Galera, e esse entretenimento n√£o chega a ele por nada. <br><br>  Enquanto eu viajava entre os data centers, surgiram as <strong>primeiras d√∫vidas</strong> sobre o plano. <br><br><img src="https://habrastorage.org/webt/3d/or/b2/3dorb2jimqxrud9f-mtog3yqltw.jpeg"><br>  <em>Ahhhhhh!</em> <br><br>  Ao mesmo tempo, a intensidade do trabalho preto era t√£o alta que nem pensei em coletar um hist√≥rico m√©dico completo, mas simplesmente tirei algumas fotos para estudos adicionais. <br><br>  Paralelamente, outra introdu√ß√£o apareceu.  Em litros, existem vers√µes em √°udio de livros.  Para que o ouvinte n√£o rebobine a grava√ß√£o novamente, temos um mecanismo que rastreia o momento da parada.  Na pr√≥xima vez que voc√™ ouvir, a vers√£o em √°udio ser√° reproduzida na se√ß√£o desejada.  Para esta tarefa, demorou cerca de 500 n√∫cleos mais rapidamente, um terabyte de RAM e um pouco de an√°lise em Java. <br><br>  Comecei a informar o Azure, Google, DigitalOcean e tudo mais que as solu√ß√µes de got√≠culas forneciam.  A conteineriza√ß√£o implora, por que n√£o implement√°-la alegremente?  Al√©m disso, no "grande" plano, havia um ponto separado sobre isso. <br><br>  Um m√™s se passou em correspond√™ncia e licita√ß√£o, tudo foi adicionado √†s tarefas do Trello, das quais gerei uma parte significativa, mas o resultado n√£o avan√ßou.  Eu me perguntei se eu estava indo para l√°.  Antes de mim, tudo funcionou de alguma forma e n√£o vai parar, n√£o importa quanta atividade vazia eu mostre.  Sentei-me cuidadosamente para estudar o invent√°rio que consegui coletar pouco a pouco.  Ent√£o ele se levantou e foi para a segunda rodada de data centers. <br><br>  A segunda visita calma aos data centers colocou tudo em seu lugar.  Quando vi tudo isso n√£o no console, n√£o no Excel, mas vivo, minha consci√™ncia da realidade mudou radicalmente.  Percebi que n√£o estou nem um pouco ocupada com o que deveria.  Porque primeiro voc√™ precisa entender com o que estou trabalhando. <br><blockquote>  At√© entender o que estou trabalhando, todos os planos s√£o uma perda de tempo. </blockquote>  Estudei as prateleiras, comparei a realidade com as listas, fiz edi√ß√µes e me deparei com uma semi-unidade com 20 l√¢minas.  Dos 20, apenas 4. Trabalharam com as l√¢minas e percebi que n√£o precis√°vamos de got√≠culas para a solu√ß√£o.  Porque eu encontrei 340 n√∫cleos inativos, 2 terabytes de RAM e 17 terabytes de espa√ßo em disco!  Esses s√£o backends antigos, velhos n√≥s de clusters que simplesmente pararam de usar e o tempo apagou a mem√≥ria de sua exist√™ncia.  Coloquei o Kubernetes nessas l√¢minas e me livrei de uma tarefa importante. <br><br><h3>  Primeira sa√≠da de erro </h3><blockquote>  Analise e estude.  Sem uma an√°lise preliminar da situa√ß√£o, o trem n√£o se move. </blockquote>  Gra√ßas a uma viagem cuidadosa aos campos, eu j√° tinha em m√£os um plano bastante relevante para o equipamento e a arquitetura geral do sistema.  No quintal era janeiro.  Passei dois meses nisso, dos quais metade eu arremessei de um lado para o outro.  Eu n√£o sabia que tipo de fogo extinguir primeiro, que problema resolver antes de tudo - a rotina com suporte n√£o foi a lugar nenhum. <br><br>  Paralelamente, deduzi tr√™s regras.  Estas s√£o as consequ√™ncias do primeiro erro. <br><br><img src="https://habrastorage.org/webt/pk/bc/d6/pkbcd6tndhw7uz0jlv7wkttizts.jpeg"><br>  <em>Tr√™s corol√°rios.</em> <br><br><h3>  Segundo plano </h3><br>  Joguei tarefas secund√°rias em primeiro plano - an√°lise de log e implementa√ß√£o de CI / CD.  Na escala de uma cat√°strofe geral, essas pequenas coisas n√£o s√£o importantes.  Litros trabalhou por anos e desenvolveu sua pr√≥pria l√≥gica para trabalhar com toras, e adquiriu um dem√¥nio rolante de fabrica√ß√£o pr√≥pria.  Empurrei para o quinto plano o que funcionava e n√£o exigia interven√ß√£o. <br><br>  O segundo plano parecia algo assim. <br><br>  <strong>Lidar com o monitoramento</strong> .  Na sua forma atual, n√£o refletia pelo menos um ter√ßo dos problemas, embora funcionasse. <br><br>  <strong>Descreva a l√≥gica geral de todos os litros</strong> .  Os nomes dos servidores s√£o √≥timos, mas os principais pacotes s√£o um conhecimento cr√≠tico: o que, onde, onde, por que e por que.  O erro anterior deixou claro que sem isso, de forma alguma. <br><br>  <strong>Dimensionamento</strong> .  Quase os √∫ltimos recursos gratuitos levaram o Kubernetes.  De acordo com estimativas m√≠nimas, ele deveria terminar todo o conjunto de trabalhos em seis meses. <br><br>  <strong>Invent√°rio e condi√ß√£o do equipamento</strong> .  Como parte da viagem, eu literalmente limpei uma web de v√°rios servidores assustados com suas tags - "backup", "inscri√ß√£o", "bgp".  Mais uma vez, discos, largando discos. <br><br>  <strong>Adapta√ß√£o de guias √† realidade</strong> .  A maioria das instru√ß√µes est√° desatualizada ou incompleta. <br><br>  Os primeiros seis meses passaram despercebidos na rotatividade, compra de equipamentos e problemas, e finalmente me estabeleci no segundo erro. <br><br><h3>  Segundo erro </h3><blockquote>  N√£o subestime. </blockquote>  <strong>Qualquer termo que vem √† mente √© subestimado</strong> .  Claro, voc√™ pode se beneficiar rapidamente do projeto.  Mas, para maximizar os retornos, multiplique o tempo planejado por <strong>pelo menos duas vezes</strong> .  Especialmente em um projeto complexo e altamente carregado, que cresce constantemente no tr√°fego em mais de 100% ao ano. <br><br>  Por que pelo menos duas vezes?  Se o projeto for inst√°vel e n√£o for pesquisado, esteja preparado para o fato de que qualquer atividade dar√° origem a outras em locais vizinhos.  Parece que a substitui√ß√£o de discos - o que √© mais f√°cil?  O procedimento √© simples at√© voc√™ encontrar uma compra, programar o tempo para n√≥s espec√≠ficos do tempo de inatividade e fazer a manuten√ß√£o ap√≥s a substitui√ß√£o de um disco.  Estimei essa opera√ß√£o simples por semana.  No final, demorou duas semanas e meia - mesmo com um simples esquema de compras. <br><br>  Outro exemplo √© a compra e instala√ß√£o de novos equipamentos.  Compre e cole, o que √© t√£o dif√≠cil?  N√£o demorei mais de um m√™s para isso sem levar em considera√ß√£o o tempo de entrega.  De fato, um dos tr√™s chassis ainda est√° de p√© em frente √† minha mesa.  Isso ocorre porque o equipamento simplesmente n√£o tinha espa√ßo suficiente - calculamos o local nos orif√≠cios entre a instala√ß√£o atual.  Quando chegamos a um dos data centers com a inten√ß√£o de sacudir o rack, percebemos subitamente que os dois servidores eram "intoc√°veis".  O primeiro √© o host e simplesmente n√£o √© seguro toc√°-lo.  O segundo √© uma cesta de 16 discos, encerrados, repletos de um monte de dados.  Os canudos n√£o foram depositados, a an√°lise n√£o foi realizada e √© bom que eles tenham conseguido colar dois em tr√™s. <br><br>  <strong>Se parece que tudo ser√° simples - em breve voc√™ ter√° problemas</strong> .  Essa instala√ß√£o levantou uma nova quest√£o - se tudo est√° t√£o ruim com o local, como vamos expandir?  Uma pequena tarefa agora gerou um suor gigante.  Em 2020, de acordo com o plano, a transfer√™ncia de um data center para outro e a expans√£o do restante por racks.  Isso significa migra√ß√£o dentro do data center entre os m√≥dulos.  A migra√ß√£o foi complementada pela reestrutura√ß√£o da rede e sua transfer√™ncia para 10G. <br><blockquote>  N√£o subestime o tempo, o limite de entrada e as consequ√™ncias. </blockquote><br><h3>  Conceitos b√°sicos </h3><br>  Obviamente, a ess√™ncia dos erros j√° est√° descrita no Wiki como conceitos b√°sicos. <br><br>  <strong>Qualquer processo burocr√°tico dura pelo menos um m√™s</strong> .  Isso se aplica a compras, a conclus√£o de novas condi√ß√µes com um data center ou outros fornecedores - a tudo.  Tome isso como um fato. <br><br>  <strong>Ap√≥s a conclus√£o do contrato e pagamento, qualquer entrega dura pelo menos uma semana e meia</strong> , de discos a processadores.  Aprenda a negociar com os fornecedores as datas de pr√©-entrega.  Por exemplo, os discos s√£o enviados em pequenos lotes para n√≥s agora at√© o pagamento e mesmo antes da aprova√ß√£o do aplicativo. <br><br>  <strong>Embora n√£o haja um entendimento claro da implementa√ß√£o, qualquer plano para implementar algo permanece um plano.</strong>  Quanto mais curtos os passos, melhor. <br><br>  Por exemplo, para alternar do MySQL para o ClickHouse, uma grande etapa se parece com a seguinte: ‚ÄúVamos preencher um servidor, desenhar um ticket para reintegra√ß√£o e voar!‚Äù  De fato, um estudo detalhado da quest√£o levou a novas etapas: compra adicional de equipamentos, por exemplo, processadores e discos, tickets detalhados para alterar a l√≥gica do rastreador de comportamento do usu√°rio, mantendo a integra√ß√£o reversa, os servidores de filas e muitos outros. <br><blockquote>  Quanto mais detalhado o plano, melhor.  Escrever com uma pincelada ampla √© uma garantia de 100% de erro no prazo. </blockquote>  <strong>Submeter qualquer plano a cr√≠ticas m√°ximas e esperar o risco m√°ximo</strong> .  Certifique-se de examinar o plano do ponto de vista comercial - que lucro cada etapa trar√°. <br><br>  Tivemos que realizar implementa√ß√µes obrigat√≥rias: monitoramento, Ansible, mas n√£o esquecemos o componente de neg√≥cios. <br><br><ul><li>  Ao alterar a arquitetura da rede, poderemos aceitar tr√°fego adicional e resolver muitos problemas atuais. </li><li>  Ao alterar o tipo de armazenamento de conte√∫do, reduziremos o n√∫mero de bugs com o retorno de livros e aumentaremos a velocidade de trabalho com dados. </li><li>  Mova o back-end para a nuvem - dimensione instantaneamente a carga durante as campanhas de marketing. </li><li>  Traduzir o rastreamento para o ClickHouse √© uma oportunidade para os analistas entenderem melhor as necessidades de nossos amados leitores e ouvintes. </li></ul><br>  <strong>A melhor maneira de lidar com uma situa√ß√£o em que voc√™ √© pouco versado no t√≥pico √© pedir a ajuda de especialistas, n√£o o Stack Overflow</strong> .  O contato por voz resolve o problema muitas vezes mais r√°pido que a correspond√™ncia longa ou a leitura da documenta√ß√£o. <br><br><h3>  Seis meses depois </h3><br>  Apesar do fato de que as tarefas b√°sicas em que eu me concentrei no in√≠cio ainda estavam derrapando, gra√ßas a pesquisas e corre√ß√µes, algo de bom apareceu em minhas m√£os. <br><br>  <strong>Ferramenta auto-escrita para invent√°rio de redes e endere√ßos.</strong>  Ele tocava regularmente em todas as nossas sub-redes e adicionalmente verificava os dados com a configura√ß√£o do BIND.  Isso tornou f√°cil e r√°pido encomendar novos servi√ßos e entender a carga real dos pools de rede.  Eu realmente n√£o queria gastar tempo nisso, mas n√£o consegui encontrar uma alternativa pronta e encontrar um endere√ßo para alocar para um novo recurso levou muito tempo.  Enquanto escrevia a ferramenta, o primeiro rascunho do plano apareceu na rede. <br><br>  <strong>Puppet n√£o est√° mais t√£o morto e confuso</strong> .  Eu estava armado com uma conclus√£o do erro n√∫mero um e nem tentei me mudar para Ansible, o que √© mais confort√°vel para mim. <br><br>  <strong>Nagios mais ou menos equipado</strong> .  Mudei do escrit√≥rio para o data center e o distribu√≠ em tr√™s pontos.  Era muito mais r√°pido e mais barato do que implementar o Zabbix.  Fechamos um buraco com alertas incorretos no tempo e nos eventos, uma simples reconfigura√ß√£o das regras e a introdu√ß√£o de n√≥s de controle adicionais. <br><br>  <strong>No√ß√µes b√°sicas sobre</strong> a manuten√ß√£o de clusters de banco de dados usados. <br><br>  <strong>Wiki pesadamente inchado</strong> .  Ela "engordou" com coment√°rios e instru√ß√µes sobre como trabalhar com ambientes. <br><br>  <strong>Tr√™s chassis HP</strong> que compramos para instala√ß√£o futura. <br><br>  <strong>Compreendendo o caminho para o restante de 2019</strong> em uma aproxima√ß√£o mais clara. <br><br>  <strong>Ecossistema reciclado</strong> para o trabalho do departamento. <br><br>  Todos esses seis meses trabalhei quase sozinho.  Os funcion√°rios que herdaram eram mais administradores de sistema.  Eles n√£o estavam realmente ansiosos para se aprofundar na ess√™ncia do DevOps. <br><br>  Com muita dificuldade, encontrei dois especialistas na equipe - junior e m√©dio.  Reuni a quantidade m√°xima de conhecimentos, apar√™ncias e senhas dos administradores atuais e parti com eles com o cora√ß√£o pesado. <br><br><h3>  Sistema de trabalho, ambiente e ferramentas </h3><br>  Vou falar sobre a import√¢ncia de introduzir um ecossistema e ambiente de trabalho.  Eu j√° mencionei o Trello, mas n√£o disse por que e por que o implementei.  Nenhum trabalho ser√° constru√≠do sem definir metas e dados estruturados.  Isso √© parcialmente evidenciado pelo primeiro erro - colete tudo o que √©. <br><blockquote>  Pegue tudo, n√£o d√™ nada. </blockquote>  <strong>O processo √© o motor do progresso</strong> .  Portanto, todo esse tempo trabalhei no sistema, apesar da obstru√ß√£o da pesquisa e do fluxo de trabalho.  Gra√ßas ao sistema, seis meses depois, coloquei a locomotiva a vapor do departamento em trilhos est√°veis. <br><br>  A introdu√ß√£o de ferramentas de suporte e um breve curso sobre seu uso economizam muito tempo para voc√™ e seus colegas.  Especialmente se voc√™ ainda no topo entender em gerenciamento e um pouco capaz de manter a ordem na √°rea de trabalho e na vida. <br><br>  <strong>N√£o complicamos as ferramentas, passamos do simples e apresentamos o necess√°rio</strong> .  No come√ßo do ano, pensei em qual rastreador de tarefas nos conviria.  Imediatamente demitido Jira e Redmine - muito controle.  Passar√≠amos algum tempo preenchendo os formul√°rios, n√£o as tarefas.  Planilhas Google - acho que n√£o vale a pena explicar por que n√£o. <br><br>  <strong>Trello foi perfeito</strong> .  Algumas colunas simples: ‚ÄúBacklog‚Äù - onde todos os erros ou tarefas observados para o futuro s√£o adicionados, ‚ÄúConclus√£o‚Äù - as principais tarefas que precisam ser executadas e ‚ÄúConcluir‚Äù.  Um pouco mais tarde, havia cinco colunas: "Backlog", "Pause", "Sprint", "Finish" e "Study". <br><br>  Na "Pausa", carregava coisas que perderam relev√¢ncia no processo de sprint.  Em "Aprendizado" - tarefas que exigiam pesquisa e n√£o deveriam ser perdidas at√© o momento de entender e transferir conhecimento para o Wiki.  O Sprint se tornou uma evid√™ncia de que mudamos para o sistema de sprint.  Experimentamos e escolhemos o momento ideal - 2 semanas.  Agora usamos esse segmento, mas outro ser√° adequado para voc√™.  <strong>O tempo de sprint √© individual para cada empresa</strong> . <br><br>  <strong>As reuni√µes semanais obrigat√≥rias</strong> s√£o a pr√≥xima inova√ß√£o ap√≥s o Trello.  Praticamente n√£o trabalhamos no escrit√≥rio.  O tempo que poder√≠amos gastar na estrada, dedicamos ao trabalho.  Mas uma vez por semana, todo o departamento se re√∫ne no escrit√≥rio por 2-3 horas intermitentemente e discute o curso do sprint e as tarefas que surgiram.  Assim, al√©m de uma vez a cada duas semanas, planejamos o pr√≥ximo sprint. <br><br>  Em seguida, foram implementadas as ferramentas m√≠nimas necess√°rias.  Todos os reposit√≥rios de servi√ßos com configura√ß√µes - Puppet, Nagios, DNS - foram retirados do SVN para o novo GitLab.  Eles prenderam Jenkins a ele.  Agora, as configura√ß√µes de DNS foram atualizadas automaticamente e as edi√ß√µes dos colegas do Puppet podiam ser lidas atrav√©s de solicita√ß√µes de mesclagem mais f√°cil e mais conveniente.  Anteriormente, as senhas eram transmitidas de pessoa para pessoa, agora s√£o coletadas ordenadamente no 1Password.  Agora, essa √© a √∫nica solu√ß√£o paga na infraestrutura. <br><blockquote>  Ferramentas f√°ceis de implementar e configurar geraram o processo e s√£o mais f√°ceis de controlar. </blockquote><br><h3>  Os problemas </h3><br>  Em litros, o tr√°fego cresceu e acrescentou mais trabalho: cachos fracassados, peda√ßos de ferro quebrados, componentes.  A segunda metade do ano estava se aproximando, para a qual estava planejado o desenvolvimento da escala. <br><br>  Nesse momento, dois best-sellers apareceram - um novo livro de um autor popular e um decreto do presidente de um pa√≠s amigo sobre o bloqueio de litros.  Reclama√ß√µes maci√ßas sobre a inacessibilidade do site.  O decreto foi emitido h√° muito tempo, mas s√≥ descobrimos quando come√ßaram a realmente bloquear-nos em todo o vasto conjunto de endere√ßos.  Felizmente, o decreto se referia a apenas um nome de dom√≠nio - "litres.ru". <br><br>  O aumento do tr√°fego (todo mundo queria um best-seller) por meio de proxies, confundimos um ataque DDoS e pagamos por ele com moeda forte.  Lembro-me de como pagamos as contas de uma empresa que nos prometeu prote√ß√£o contra DDoS.  Imediatamente ap√≥s o pagamento, mudei o DNS para os endere√ßos deles e, ap√≥s 10 minutos, lembrei-me do primeiro erro e virei o DNS freneticamente.  N√£o havia tr√°fego de lixo, mas havia um pre√ßo de cavalo para o tr√°fego que passava por eles - livros, √°udio, capas.  N√£o vou dizer quanto nos custou 20 minutos de vida nos endere√ßos de outras pessoas. <br><br>  Naquela noite, liguei para a Cloudflare e conversei sobre nossos problemas.               Anti-DDoS     .  ,      Cloudflare        .       .        ,  DDoS'   ,   . <br><br>         .          KPI. <br><br><h3>   KPI </h3><br>          .           .  ,  ,    . <br><br>      KPI.    ‚Äî    . <br><br><ul><li>     .   ‚Äî  . </li><li> Downtime.   ‚Äî  . </li><li>     .    ,  --,   ,    .    ,    . </li></ul><br>         KPI,    ‚Äî . ,   ,    KPI,        . <br><br>   .      90%.      ,    .  ‚Äî  ,  .      .         ,        . <br><br> <strong>    -Nagios  -Puppet</strong>     Zabbix  Grafana  Ansible.      ¬´        ¬ª. <br><br>      Prometheus          ,   Zabbix.      Zabbix,   Prometheus ‚Äî     .        ‚Äî      .                . <br><br> <strong>  ,     ,    </strong> . <br><br><ul><li>  . </li><li>     . </li><li>   . </li><li> . </li></ul><br><h3>   </h3><br>       .   ,  <strong>   ,    </strong> .     ‚Äî    .          ,     . <br><br>       .    -    -,  -  .    ,     .      .         .       .       . <br><br>    ,            . <br><br><img src="https://habrastorage.org/webt/cx/ts/v2/cxtsv2pow8pwufw6dzq6ovfai6q.jpeg"><br>       2  .   3     ¬´ ¬ª,   ‚Äî   .    . <br><br> <strong> </strong> .      :  ,      ,    ,    Ansible,    . <br><br> <strong> .</strong>          ,        .      .        . <br><br> <strong>  </strong> . <br><br> <strong></strong> ‚Äî ,  ,  .       . <br><br> <strong> </strong> .    ‚Äî  ,             . <br><br>      .      ,           .      .      2019.    ,  ,    , ‚Äî     .                . <br><br><h3>    </h3><br>         .    . <br><blockquote>   . </blockquote>       ,  -    ,    .         . <br><br><ul><li>        ,  ,      . </li><li>   ,      . </li><li>    , ,    ‚Äî . </li><li>      ,  ,  ,  ‚Äî   ,       . </li></ul><br>       .    ,    - .        ,   ,  ,    . <br><blockquote>    . </blockquote>     ‚Äî , , .     ,    ,     . <br><br><img src="https://habrastorage.org/webt/mo/rs/us/morsusn140tgpjhqq_r7j_brdlc.jpeg"><br><br>   ,     ‚Äî  -   . ,     . <br><br><ul><li>        . </li><li>      ,    . </li><li>      ,      ,    . </li></ul><br>       ¬´  ,    ¬ª.   ,        ‚Äî  ,  , ,  . <br><br>    ,     ,     . <br><br><h2>   ‚Äî    </h2><br>  Ansible? ,  ,   Puppet  ?        ‚Äî     . <br><br><img src="https://habrastorage.org/webt/q6/7v/5j/q67v5jtkws8xri9l2v-eflfci8e.jpeg"><br><br>          CI/CD?   ,  .  CI/CD  ,      ‚Äî . <strong>    .</strong> <br><br>    ,  ,      .      - ?   ,          KPI?       ,    -. <strong> -</strong> ‚Äî  ,    ,   . <br><blockquote>  . </blockquote><br> <b>  :</b> <br><br><ul><li>    ‚Äî      . </li><li>         . </li><li>    ,     . </li></ul><br><blockquote>    DevOpsConf  .     ‚Äî  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> , ,     .    DevOps-   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HighLoad++ 2019</a>  .   DevOps 13     AWS,    Lamoda,    ,    Kubernetes,    Kubernetes,   Kubernetes   .          ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ¬ª  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> .    HighLoad++      ‚Äî  ,   -. .       ‚Äî    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt468537/">https://habr.com/ru/post/pt468537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt468525/index.html">Brinquedos de madeira, parte um - 1982-1985</a></li>
<li><a href="../pt468529/index.html">Domando Gorynych ou Descompilando o eBPF em Ghidra</a></li>
<li><a href="../pt468531/index.html">O primeiro bot PHP para VKontakte</a></li>
<li><a href="../pt468533/index.html">Carona no DevOps com o Express 42</a></li>
<li><a href="../pt468535/index.html">N√£o precisa de logs?</a></li>
<li><a href="../pt468541/index.html">Arraste e solte componentes para usu√°rios cegos? Voc√™ est√° brincando</a></li>
<li><a href="../pt468543/index.html">Comit√™ do programa durante a semana FrontendConf. Entrevista com Sergey Popov</a></li>
<li><a href="../pt468545/index.html">"Alice, vamos para o frontend!"</a></li>
<li><a href="../pt468547/index.html">Falando Ingl√™s, CSS, Grade e Acessibilidade no FrontendConf</a></li>
<li><a href="../pt468549/index.html">Limite de GPU. Como transferir tudo para a placa de v√≠deo e um pouco mais. Anima√ß√µes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>