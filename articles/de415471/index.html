<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👳🏿 💇🏿 🍂 Erweiterung PHP und Kotlin Native. Teil eins, naiv 🛕 💅 👩🏻‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel beschreibt den naivsten und einfachsten Ansatz zum Erstellen einer PHP-Erweiterung mit Kotlin Native. Ich mache Sie darauf aufmerksam, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erweiterung PHP und Kotlin Native. Teil eins, naiv</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alfa/blog/415471/"><img align="right" src="https://habrastorage.org/webt/o7/db/cw/o7dbcwsbe8kad4jkw84guc_2n4m.png">  Dieser Artikel beschreibt den naivsten und einfachsten Ansatz zum Erstellen einer PHP-Erweiterung mit Kotlin Native.  Ich mache Sie darauf aufmerksam, dass nicht <b>mit</b> , sondern <b>mit Gebrauch</b> . <br><br>  Es ist eher eine Art Tutorial mit einer Beschreibung der Probleme, die beim Überqueren eines Igels mit einem Igel aufgetreten sind, und Möglichkeiten, sie zu lösen.  Es wird keine Enthüllungen geben, aber vielleicht wird sich jemand als nützlich erweisen. <br><br>  Also, wenn Sie interessiert sind, dann willkommen bei cat. <br><a name="habracut"></a><br>  <b>Das Ziel</b> ist es, eine Erweiterung mit einer Funktion "Hallo ($ name)" zu schreiben, die eine Zeichenfolge verwendet und "Hallo, $ name!" Druckt. <br><br>  Wir werden naiv entscheiden, wie der Name schon sagt. <br><br><ol><li>  Schreiben wir eine Funktion auf Kotlin </li><li>  Kompilieren Sie in der gemeinsam genutzten Bibliothek </li><li>  Auf klassische Weise (in C) schreiben wir eine Erweiterung, die einen Funktionsaufruf an diese Bibliothek umleitet </li></ol><br>  Es scheint einfach, aber im dichten Gras hat bereits ein Rechen gelauert: <br><br><ol><li>  Es gibt eine Reihe von Beispielen für die Verwendung von C-Bibliotheken in Kotlin, aber ich konnte nichts finden, was für die Verwendung der Funktionen der Kotlin-Bibliothek in C angemessen wäre (naja, vielleicht habe ich schlecht ausgesehen, was wirklich). </li><li>  Der Kotlinc-Compiler lädt beim ersten Start Abhängigkeiten.  Aber das Pech ist meine virtuelle Linux-Maschine in der Unternehmens-Cloud.  Ohne theoretische Fähigkeit, das Internet zu erreichen. </li><li>  Dieser Rake ist eher auf mangelnde Erfahrung in C zurückzuführen, aber ich werde Ihnen sagen, wie der Linker mich besonders getrollt hat. </li></ol><br>  <i>Alles geschah unter Red Hat Enterprise Linux Server Version 7.5.</i> <br><br><h3>  Lass uns gehen! </h3><br>  Installieren Sie zunächst ... Nein, nicht den Kotlin-Compiler.  Installieren Sie zuerst das JDK.  Gut so. <br>  Installieren Sie dann den Kotlin-Compiler.  Laden Sie einfach das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Archiv vom Github herunter</a> und entpacken Sie es beispielsweise in das Home-Verzeichnis. <br><br>  In einer idealen Welt lädt er beim ersten Start alle Abhängigkeiten selbst herunter, aber in Abwesenheit des Internets gehen wir wie folgt vor (geheimes Wissen wird von JetBrains-Mitarbeitern in Ruhe erhalten): <br><br><ul><li>  Wir erstellen jedes einfache Kotlin-Skript, damit im nächsten Schritt etwas auf dem Compiler angezeigt werden kann </li><li>  Wir starten $ KOTLIN_HOME / bin / kotlinc SimpleScript.kt, warten ein wenig und drücken STRG + C - dies dient zum Erstellen einer Ordnerstruktur im Home-Verzeichnis </li><li>  Wir suchen in der Datei $ KOTLIN_HOME / konan / konan.properties im Abschnitt mit unserer Architektur nach dem Element: <br><br></li></ul><pre><code class="hljs powershell">dependencies.linux_x64 = \ clang<span class="hljs-literal"><span class="hljs-literal">-llvm</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-literal"><span class="hljs-literal">-linux</span></span><span class="hljs-literal"><span class="hljs-literal">-x86</span></span><span class="hljs-literal"><span class="hljs-literal">-64</span></span> \ tar<span class="hljs-built_in"><span class="hljs-built_in">get-gcc</span></span><span class="hljs-literal"><span class="hljs-literal">-toolchain</span></span><span class="hljs-literal"><span class="hljs-literal">-3</span></span><span class="hljs-literal"><span class="hljs-literal">-linux</span></span><span class="hljs-literal"><span class="hljs-literal">-x86</span></span><span class="hljs-literal"><span class="hljs-literal">-64</span></span> \ libffi<span class="hljs-literal"><span class="hljs-literal">-3</span></span>.<span class="hljs-number"><span class="hljs-number">2.1</span></span><span class="hljs-literal"><span class="hljs-literal">-2</span></span><span class="hljs-literal"><span class="hljs-literal">-linux</span></span><span class="hljs-literal"><span class="hljs-literal">-x86</span></span><span class="hljs-literal"><span class="hljs-literal">-64</span></span></code> </pre> <br><ul><li>  Wir gehen zu einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">speziellen Repository</a> und laden alle oben genannten herunter. </li><li>  Wir fügen all dies zu ~ / .konan / cache hinzu (ich erinnere Sie daran, dass das Linux-Home-Verzeichnis eine Tilde ist) </li></ul><br>  Jetzt verwendet der Compiler beim ersten Start diese Distributionen und gelangt nicht ins Internet. <br><br>  Bitte beachten Sie, dass die Abhängigkeiten nicht sehr klein sind und mein Home-Verzeichnis nach der Installation 3,4 GB schwerer wurde.  Für diejenigen, die ein separates Volumen unter ihren Hausaufgaben haben, kann dies kritisch sein. <br><br>  Installieren Sie anschließend mit dem Standard-Paketmanager PHP und die entsprechende PHP-Entwicklung. <br>  Damit sind die vorbereitenden Maßnahmen beendet. <br><br>  Da es sich nicht lohnt, über das Schreiben von PHP-Erweiterungen zu sprechen, werden wir mit dem kürzestmöglichen Code auskommen. <br><br><h3>  Beginnen wir mit Kotlin </h3><br>  <b>hellokt.kt</b> <br><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kt_print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string:</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>{ println(<span class="hljs-string"><span class="hljs-string">"Hello, </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$string</span></span></span><span class="hljs-string">!!!"</span></span>) }</code> </pre> <br>  In verschiedenen Handbüchern und Tutorials werden entweder Kotlinc oder Konanc als Compiler verwendet, was etwas verwirrend ist.  Also - es ist das gleiche.  Hier ist der Beweis: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/a_/dp/dd/a_dpddiqqgfq_u5hfiq6pv_byik.png"></div><br>  Kompilieren <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># $KOTLINC_HOME/kotlinc -opt ./hellokt.kt -o hellokt -produce dynamic</span></span></code> </pre> <br>  Mit dem <b>Schalter</b> -opt <b>ist die</b> Bibliothek kleiner.  <b>-produce dynamic</b> weist den Compiler an, eine <b>gemeinsam genutzte Bibliothek</b> für die aktuelle Plattform zu erstellen. <br><br>  Nach der Ausführung haben wir zwei Dateien: libhellokt.so und hellokt_api.h.  Bibliothek und Header-Datei dafür.  Bitte beachten Sie, dass Präfixe und Suffixe automatisch generiert werden und wir sie (wahrscheinlich) nicht beeinflussen können. <br><br>  In unserem Fall erhalten wir eine solche Header-Datei. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> KONAN_HELLOKT_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> KONAN_HELLOKT_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> __cplusplus extern </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"C"</span></span></span><span class="hljs-meta"> { #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> __cplusplus typedef bool hellokt_KBoolean; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> typedef _Bool hellokt_KBoolean; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> typedef char hellokt_KByte; typedef unsigned short hellokt_KChar; typedef short hellokt_KShort; typedef int hellokt_KInt; typedef long long hellokt_KLong; typedef float hellokt_KFloat; typedef double hellokt_KDouble; typedef void* hellokt_KNativePtr; struct hellokt_KType; typedef struct hellokt_KType hellokt_KType; typedef struct { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* Service functions. */</span></span></span><span class="hljs-meta"> void (*DisposeStablePointer)(hellokt_KNativePtr ptr); void (*DisposeString)(const char* string); hellokt_KBoolean (*IsInstance)(hellokt_KNativePtr ref, const hellokt_KType* type); </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* User functions. */</span></span></span><span class="hljs-meta"> struct { struct { void (*kt_print)(const char* string); } root; } kotlin; } hellokt_ExportedSymbols; extern hellokt_ExportedSymbols* hellokt_symbols(void); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> __cplusplus } </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* extern "C" */</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* KONAN_HELLOKT_H */</span></span></span></span></code> </pre> <br>  Der Zugriff auf unsere Funktion kt_print erfolgt auf diese Weise. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">hellokt_symbols</span></span>()<span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">kotlin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.root</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.kt_print</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">char</span></span> *);</code> </pre> <br>  <i>Ich werde Ihnen unten über Klassen und Pakete erzählen - es gibt Nuancen.</i> <br><br><h3>  Die Bibliothek ist fertig, gehen Sie zu C. </h3><br>  <b>config.m4</b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wie man es erstellt</a> ) <br><br><pre> <code class="hljs bash">PHP_ARG_ENABLE(hello, whether to <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> hello support,[ --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-hello Enable hello support]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PHP_HELLO</span></span></span><span class="hljs-string">"</span></span> != <span class="hljs-string"><span class="hljs-string">"no"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> PHP_ADD_LIBRARY_WITH_PATH(hellokt, /path/to/compiled/library, HELLO_SHARED_LIBADD) PHP_NEW_EXTENSION(hello, hello.c, <span class="hljs-variable"><span class="hljs-variable">$ext_shared</span></span>) PHP_SUBST(HELLO_SHARED_LIBADD) <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br>  Die erste Zeile ist erforderlich! <br><blockquote>  Das allererste, was im obigen Beispiel config.m4 zu sehen ist, sind, abgesehen von einigen Kommentaren, drei Zeilen mit PHP_ARG_WITH () und PHP_ARG_ENABLE (). <br>  ... <br>  Jede Erweiterung sollte mindestens die eine oder andere mit dem Erweiterungsnamen versehen, damit Benutzer auswählen können, ob die Erweiterung in PHP integriert werden soll oder nicht. </blockquote><br>  Beachten Sie, dass in PHP_ADD_LIBRARY_WITH_PATH das erste Argument der Name der Bibliothek ist.  Nicht libhellokt, nämlich hallokt.  Ich habe zwei Stunden getötet, bis ich herausgefunden habe, warum ich die Bibliothek nicht finden kann.  (Hier ist er die versprochene Geschichte über Linker-Mobbing). <br><br>  Nun tatsächlich der Erweiterungscode selbst <br><br>  <b>hallo.c</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"php.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//    #include "hellokt_api.h" #define PHP_MY_EXTENSION_VERSION "1.0" #define PHP_MY_EXTENSION_EXTNAME "hello" PHP_FUNCTION(hello); static zend_function_entry hello_functions[] = { PHP_FE(hello, NULL) }; zend_module_entry hello_module_entry = { #if ZEND_MODULE_API_NO &gt;= 20010901 STANDARD_MODULE_HEADER, #endif PHP_MY_EXTENSION_EXTNAME, hello_functions, NULL, NULL, NULL, NULL, NULL, #if ZEND_MODULE_API_NO &gt;= 20010901 PHP_MY_EXTENSION_VERSION, #endif STANDARD_MODULE_PROPERTIES }; ZEND_GET_MODULE(hello) PHP_FUNCTION(hello) { char * name; size_t name_len; if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s", &amp;name, &amp;name_len) == FAILURE) { RETURN_NULL(); } hellokt_symbols()-&gt;kotlin.root.kt_print(name); //   efree(name); }</span></span></span></span></code> </pre> <br>  Es gibt einige Artikel über das Schreiben von PHP-Erweiterungen, und die Dokumentation ist vorhanden. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Daher beschränke</a> ich mich auf einen Link zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verwendung von zend_parse_parameters</a> - er wird vorhanden sein. <br><br>  Nun, dann ist alles auf dem gerollten Weg: <br><br><pre> <code class="hljs erlang-repl"># $PHP_PATH/phpize # ./configure --with-php-config=$PHP_PATH/php-config # make # $PHP_PATH/php -dextension=./modules/hello.so -r <span class="hljs-string"><span class="hljs-string">"echo hello('World');"</span></span> Hello, World!!!</code> </pre><br><h3>  Bonus, über Klassen und Pakete </h3><br>  Angenommen, wir wollten Feng Shui machen und diesen Code blind machen. <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> hello.kt; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloKt</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kt_print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { println(<span class="hljs-string"><span class="hljs-string">"Hello, </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$string</span></span></span><span class="hljs-string">!!!"</span></span>) } }</code> </pre> <br>  Es gibt hier keine Möglichkeit, einen normalen Methodenaufruf durchzuführen. Sie müssen zuerst eine Klasse erstellen und das erste Argument an die aufgerufene Funktion übergeben. <br><br><pre> <code class="cpp hljs">hellokt_kref_hello_kt_HelloKt helloKt = { <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!helloKt.pinned){ helloKt = hellokt_symbols()-&gt;kotlin.root.hello.kt.HelloKt.HelloKt(); } hellokt_symbols()-&gt;kotlin.root.hello.kt.HelloKt.kt_print(helloKt, name);</code> </pre> <br>  Was weiter?  Ablehnung der gemeinsam genutzten Bibliothek, Minimierung der Verwendung von C und, was zum Teufel nicht scherzt, eines Mini-Frameworks - solche Dinge.  Wünsch mir viel Glück!  :) :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415471/">https://habr.com/ru/post/de415471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de415461/index.html">OpenAI macht Fortschritte in Dota 2: Semiprofessionelle Teams besiegt</a></li>
<li><a href="../de415463/index.html">HPE Superdome Flex: Ein neues Maß an Leistung und Skalierung</a></li>
<li><a href="../de415465/index.html">Wie viele Leben haben Elektrolyte, alte Kleidung und Flaschenverschlüsse?</a></li>
<li><a href="../de415467/index.html">Programmierwettbewerb: Handel (Ankündigungen)</a></li>
<li><a href="../de415469/index.html">Adblock für Radio</a></li>
<li><a href="../de415473/index.html">Wer scannt das Internet? Zeit, Eisen zu schmieden</a></li>
<li><a href="../de415475/index.html">Analyse von Legacy-Code bei Verlust des Quellcodes: zu tun oder nicht zu tun?</a></li>
<li><a href="../de415477/index.html">Überwachung des Betriebs von Vorort-Heimsystemen: Die ersten Schritte zu einem Smart Home</a></li>
<li><a href="../de415481/index.html">Venezuela blockiert direkte Verbindungen nach Tor und verschleiert den Verkehr zu Brücken</a></li>
<li><a href="../de415483/index.html">7 häufige Fehler beim Vergleich Ihrer Server mit der Cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>