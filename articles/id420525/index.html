<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽 🐿️ 🛀🏻 Jaringan untuk yang paling berpengalaman. Bagian lima belas. QoS 💕 👨🏼‍🏫 👩🏽‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SDSM-15. Tentang QoS. Sekarang dengan kemungkinan permintaan tarik . 

 Jadi kita sampai pada topik QoS. 

 Apakah Anda tahu mengapa hanya sekarang da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jaringan untuk yang paling berpengalaman. Bagian lima belas. QoS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420525/">  SDSM-15.  Tentang QoS.  Sekarang dengan kemungkinan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">permintaan tarik</a> . <br><br>  Jadi kita sampai pada topik QoS. <br><br>  Apakah Anda tahu mengapa hanya sekarang dan mengapa itu akan menjadi artikel penutup dari seluruh kursus SDSM?  Karena QoS sangat kompleks.  Hal tersulit yang ada sebelumnya dalam siklus. <br><br>  Ini bukan semacam pengarsip ajaib yang secara cerdik memadatkan lalu lintas dengan cepat dan mendorong gigabit Anda menjadi uplink seratus megabit.  QoS adalah tentang bagaimana mengorbankan sesuatu yang tidak perlu, mendorong yang tak termakan ke dalam kerangka kerja yang diizinkan. <br><br>  QoS sangat terjerat dengan aura perdukunan dan tidak dapat diaksesnya sehingga semua insinyur muda (dan tidak hanya) mencoba untuk mengabaikan keberadaannya dengan hati-hati, percaya bahwa itu cukup untuk menimbulkan masalah dengan uang, dan memperluas hubungan tanpa akhir.  Benar, sampai mereka menyadari bahwa dengan pendekatan ini, kegagalan pasti akan menunggu mereka.  Entah bisnis akan mulai mengajukan pertanyaan tidak nyaman, atau akan ada banyak masalah yang hampir tidak berhubungan dengan lebar saluran, tetapi langsung bergantung pada efisiensi penggunaannya.  Ya, VoIP secara aktif melambaikan pena dari belakang layar, dan lalu lintas multicast membelai Anda dari belakang. <br><br>  Karena itu, mari kita sadari bahwa QoS adalah wajib, Anda harus mengetahuinya dengan satu atau lain cara, dan untuk beberapa alasan, jangan mulai sekarang, dalam suasana yang santai. <br><br><img src="https://habrastorage.org/webt/sc/of/k6/scofk6lx2y49bzisp0pwsnrsywg.jpeg"><a name="habracut"></a><br><hr><br><h1>  Isi </h1><br>  1. <b>Apa yang menentukan QoS?</b> <br><br><ul><li>  Kerugian </li><li>  Keterlambatan </li><li>  Jitter </li></ul><br>  2. <b>Tiga model QoS</b> <br><br><ul><li>  Efek terbaik </li><li>  Layanan terpadu </li><li>  Layanan berbeda </li></ul><br>  3. <b>Mekanisme DiffServ</b> <br><br>  4. <b>Klasifikasi dan pelabelan</b> <br><br><ul><li>  Agregasi perilaku </li><li>  Multi-bidang </li><li>  Berbasis antarmuka </li></ul><br>  5. <b>Antrian</b> <br><br>  6. <b>Menghindari Kemacetan</b> <br><br><ul><li>  Jatuhkan Ekor dan Jatuhkan Kepala </li><li>  Merah </li><li>  Wred </li></ul><br>  7. <b>Manajemen Kemacetan</b> <br><br><ul><li>  Pertama masuk, keluar pertama </li><li>  Antrian prioritas </li><li>  Antrian yang adil </li><li>  Round robin </li></ul><br>  8. <b>Batas kecepatan</b> <br><br><ul><li>  Membentuk </li><li>  Pemolisian </li><li>  Bucket Leaky dan Token Bucket </li></ul><br>  9. <b>Implementasi perangkat keras QoS</b> <br><hr><br><blockquote>  Sebelum pembaca masuk ke dalam lubang ini, saya akan meletakkan tiga pengaturan di dalamnya: <br><br><ul><li>  Tidak semua masalah bisa diselesaikan dengan memperluas band. </li><li>  QoS tidak memperluas band. </li><li>  QoS tentang mengelola sumber daya terbatas. </li></ul></blockquote><br><h1>  1. Apa yang menentukan QoS? </h1><br>  Bisnis mengharapkan tumpukan jaringan untuk melakukan fungsi sederhana dengan baik - untuk mengirimkan bitstream dari satu host ke yang lain: lossless dan dalam waktu yang dapat diprediksi. <br><br>  Dari kalimat singkat ini, semua metrik kualitas jaringan dapat diturunkan: <br><br><ul><li>  Kerugian </li><li>  Keterlambatan </li><li>  Jitter </li></ul><br>  Ketiga karakteristik ini menentukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kualitas jaringan</a> terlepas dari sifatnya: paket, saluran, IP, MPLS, radio, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">merpati</a> . <br><br><h2>  Kerugian </h2><br>  Metrik ini memberi tahu Anda berapa banyak paket yang dikirim oleh sumber mencapai tujuan. <br>  Penyebab hilangnya mungkin masalah di antarmuka / kabel, kemacetan jaringan, kesalahan bit yang memblokir aturan ACL. <br><br>  Apa yang harus dilakukan jika kehilangan ditentukan oleh aplikasi.  Itu dapat mengabaikan mereka, seperti dalam kasus percakapan telepon, di mana paket terlambat tidak lagi diperlukan, atau mengirim kembali - ini adalah apa yang dilakukan TCP untuk memastikan pengiriman data sumber yang akurat. <br><br><img src="https://habrastorage.org/webt/s9/vc/jj/s9vcjjwjb494cyrx19oby8ykvms.png" width="600"><br><br>  Bagaimana mengelola kerugian, jika mereka tidak terhindarkan, dalam bab Manajemen Kemacetan. <br><br>  Cara memanfaatkan kerugian di bab Pencegahan Kemacetan. <br><br><h2>  Keterlambatan </h2><br>  Ini adalah waktu yang dibutuhkan data dari sumber ke tujuan. <br><br><img src="https://habrastorage.org/webt/m6/xo/qa/m6xoqapl9y6v422k8c4d--xtmvm.png" width="600"><br><br>  Penundaan kumulatif terdiri dari komponen-komponen berikut. <br><br><ul><li>  <b>Serialization Delay</b> - waktu yang <b>diperlukan</b> suatu simpul untuk menguraikan paket menjadi bit dan memasukkan tautan ke simpul berikutnya.  Ini ditentukan oleh kecepatan antarmuka.  Jadi, misalnya, mentransfer paket berukuran 1500 byte melalui antarmuka 100 Mb / s akan membutuhkan 0,0001 dtk, dan untuk 56 Kb / dt - 0,2 dt. </li><li>  <b>Propagation Delay</b> adalah hasil dari keterbatasan kecepatan rambat gelombang elektromagnetik yang terkenal.  Fisika tidak memungkinkan Anda untuk pergi dari New York ke Tomsk di permukaan planet lebih cepat daripada dalam 30 ms (pada kenyataannya, sekitar 70 ms). </li><li>  <b>Penundaan yang diperkenalkan oleh QoS</b> adalah mendekamnya paket dalam antrian ( <b>Antrian Delay</b> ) dan konsekuensi dari pembentukan ( <b>Shaping Delay</b> ).  Kita akan banyak membicarakan hal ini hari ini di bab Kontrol kecepatan. </li><li>  <b>Keterlambatan dalam pemrosesan paket</b> ( <b>Processing Delay</b> ) - waktu untuk memutuskan apa yang harus dilakukan dengan paket: lookup, ACL, NAT, DPI - dan mengirimkannya dari antarmuka input ke output.  Tetapi pada hari Juniper memisahkan Control dan Data Plane dalam M40-nya, penundaan pemrosesan bisa diabaikan. </li></ul><br>  Penundaan tidak terlalu buruk untuk aplikasi yang tidak perlu terburu-buru: berbagi file, berselancar, VoD, stasiun radio Internet, dll.  Sebaliknya, mereka sangat penting untuk yang interaktif: 200ms sudah tidak enak didengar selama percakapan telepon. <br><br>  Istilah terkait penundaan yang tidak identik dengan <b>RTT</b> ( <b>Round Trip Time</b> ) adalah round trip.  Saat melakukan ping dan tracing, Anda melihat persis RTT, dan bukan penundaan satu arah, meskipun nilainya memiliki korelasi. <br><br><h2>  Jitter </h2><br>  Perbedaan penundaan antara pengiriman paket berurutan disebut jitter. <br><br><img src="https://habrastorage.org/webt/hv/-j/9z/hv-j9zu-h0eyuzkf9eaupcputhe.png" width="600"><br><br>  Seperti latensi, jitter tidak masalah untuk banyak aplikasi.  Dan bahkan, tampaknya, apa bedanya - paket telah dikirimkan, jadi apa lagi? <br><br>  Namun, untuk layanan interaktif itu penting. <br><br>  Ambil contoh telepon yang sama.  Bahkan, ini adalah digitalisasi sinyal analog dengan divisi menjadi potongan data terpisah.  Outputnya adalah aliran paket yang cukup seragam.  Di sisi penerima ada penyangga kecil ukuran tetap ke mana paket-paket tiba secara berurutan sesuai.  Untuk mengembalikan sinyal analog, sejumlah tertentu diperlukan.  Dalam kondisi penundaan mengambang, potongan data berikutnya mungkin tidak tiba tepat waktu, yang setara dengan kerugian, dan sinyal tidak dapat dipulihkan. <br><br>  Kontribusi terbesar untuk menunda variabilitas dibuat oleh QoS saja.  Ini juga banyak dan menjemukan di Batas Kecepatan bab yang sama. <br><br><hr><br>  Ini adalah tiga karakteristik utama kualitas jaringan, tetapi ada dua karakteristik lain yang juga memainkan peran penting. <br><br><h2>  Pengiriman acak </h2><br>  Sejumlah aplikasi, seperti telepon, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NAS</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CES,</a> sangat sensitif terhadap pengiriman paket acak ketika mereka tiba di penerima dalam urutan yang salah di mana mereka dikirim.  Ini dapat menyebabkan hilangnya konektivitas, kesalahan, kerusakan pada sistem file. <br><br>  Meskipun pengiriman acak bukan fitur QoS formal, itu pasti merujuk pada kualitas jaringan. <br><br>  Bahkan dengan toleran TCP terhadap masalah seperti ini, ACK duplikat dan transmisi ulang terjadi. <br><br><img src="https://habrastorage.org/webt/yu/51/63/yu5163hdbesjbypr34w4w5puhbo.png" width="600"><br><br><h2>  Bandwidth </h2><br>  Itu tidak dibedakan sebagai metrik kualitas jaringan, karena pada kenyataannya kerugiannya menghasilkan tiga di atas.  Namun, dalam kenyataan kami, ketika harus dijamin untuk beberapa aplikasi atau, sebaliknya, harus dibatasi oleh kontrak, misalnya, MPLS TE menyimpannya di seluruh LSP, perlu disebutkan, setidaknya sebagai metrik yang lemah. <br>  Mekanisme kontrol kecepatan akan dibahas dalam bab Batas Kecepatan. <br><br><hr><br>  Mengapa spesifikasi bisa menjadi buruk? <br><br>  Jadi, kita mulai dengan ide yang sangat primitif bahwa perangkat jaringan (apakah itu switch, router, firewall, apa pun) hanyalah sepotong pipa yang disebut saluran komunikasi, sama seperti kawat tembaga atau kabel optik. <br><br><img src="https://habrastorage.org/webt/r2/yh/hr/r2yhhr2urldnn3t6mqhhk6erz-u.png" width="600"><br><br>  Kemudian semua paket terbang dalam urutan yang sama di mana mereka tiba dan tidak mengalami penundaan tambahan - tidak ada tempat untuk berlama-lama. <br><br>  Namun pada kenyataannya, setiap router mengembalikan bit dan paket dari sinyal, melakukan sesuatu dengan mereka (kami belum memikirkannya) dan kemudian mengubah paket kembali menjadi sinyal. <br><br>  Penundaan serialisasi muncul.  Tetapi secara umum, ini tidak menakutkan karena konstan.  Tidak menakutkan selama lebar antarmuka output lebih besar dari input. <br><br>  Misalnya, di pintu masuk ke perangkat adalah port gigabit, dan pada outputnya adalah 620 Mb / s jalur radio relay yang terhubung ke port gigabit yang sama? <br><br>  Tidak ada yang akan melarang peluru melalui lalu lintas gigabit tautan formal gigabit. <br>  Tidak ada yang bisa dilakukan - 380 Mb / s akan tumpah ke lantai. <br><br>  Inilah mereka - kerugian. <br><br>  Tetapi pada saat yang sama, saya sangat menginginkan bagian terburuk yang ditumpahkan - video dari youtube, dan percakapan telepon direktur eksekutif dengan direktur pabrik tidak mengganggu atau bahkan parau. <br><br>  Saya ingin suara memiliki saluran khusus. <br><br>  Atau ada lima antarmuka input, tetapi satu output, dan pada saat yang sama lima node mulai mencoba menyuntikkan lalu lintas ke satu penerima. <br><br>  Tambahkan sejumput teori VoIP (sebuah artikel yang tidak ada yang menulis tentang) - sangat sensitif terhadap penundaan dan variasinya. <br><br>  Jika untuk aliran video TCP dari youtube (pada saat penulisan artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">QUIC</a> - itu masih tetap sebuah eksperimen) penundaan bahkan dalam hitungan detik sama sekali tidak berharga karena buffering, maka direktur setelah percakapan pertama dengan Kamchatka akan memanggil kepala departemen teknis. <br>  Di masa lalu, ketika penulis siklus masih mengerjakan pekerjaan rumahnya di malam hari, masalahnya sangat akut.  Koneksi modem memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kecepatan 56k</a> . <br><br>  Dan ketika paket 1.5K masuk ke koneksi seperti itu, ia menempati seluruh baris selama 200 ms.  Tidak ada orang lain yang bisa lulus saat ini.  Sebuah suara?  Tidak, saya belum pernah mendengar. <br><br>  Oleh karena itu, pertanyaan MTU sangat penting - paket tidak boleh menempati antarmuka terlalu lama.  Semakin sedikit kecepatan, semakin rendah MTU yang dibutuhkan. <br><br>  Inilah mereka - penundaan. <br><br>  Sekarang salurannya gratis dan penundaannya rendah, setelah sedetik seseorang mulai mengunduh file besar dan penundaan bertambah.  Ini dia - jitter. <br><br>  Dengan demikian, perlu bahwa paket suara terbang melalui pipa dengan penundaan minimal, dan youtube akan menunggu. <br><br>  Tersedia 620 Mb / s harus digunakan untuk suara, dan untuk video, dan untuk klien B2B yang membeli VPN.  Saya ingin satu lalu lintas tidak menindas yang lain, jadi kami membutuhkan jaminan band. <br><br><hr><br>  Semua karakteristik di atas bersifat universal mengenai sifat jaringan.  Namun, ada tiga pendekatan berbeda untuk ketentuan mereka. <br><br><h1>  2. Tiga model QoS </h1><br><ul><li>  Upaya Terbaik - tidak ada jaminan kualitas.  Semuanya sama. </li><li>  IntServ adalah jaminan kualitas untuk setiap aliran.  Cadangan sumber daya dari sumber ke tujuan. </li><li>  DiffServ - Tidak ada reservasi.  Setiap node itu sendiri menentukan cara memastikan kualitas yang tepat. </li></ul><br><h2>  Upaya Terbaik (BE) </h2><br>  <i>Tidak ada jaminan</i> <br><br>  Pendekatan paling sederhana untuk menerapkan QoS, dari mana jaringan IP dimulai dan masih dipraktikkan sampai hari ini - kadang-kadang karena itu sudah cukup, tetapi lebih sering karena tidak ada yang memikirkan QoS. <br><br>  Omong-omong, ketika Anda mengirim lalu lintas ke Internet, itu akan diproses di sana sebagai BestEffort.  Oleh karena itu, melalui VPN yang digulirkan ke Internet (tidak seperti VPN yang disediakan oleh penyedia), lalu lintas penting, seperti percakapan telepon, mungkin tidak terlalu percaya diri. <br><br>  Dalam kasus BE, semua kategori lalu lintas sama, tidak ada preferensi yang diberikan kepada siapa pun.  Dengan demikian, tidak ada jaminan keterlambatan / jitter atau band. <br><br>  Pendekatan ini memiliki nama yang agak berlawanan dengan intuisi - Upaya Terbaik, yang disalahartikan oleh pendatang baru dengan kata "terbaik." <br><br>  Namun, frasa "Saya akan melakukan yang terbaik" berarti bahwa pembicara akan berusaha melakukan apa saja yang bisa, tetapi tidak menjamin apa pun. <br><br>  Tidak ada yang diperlukan untuk mengimplementasikan BE - ini adalah perilaku default.  Murah untuk diproduksi, staf tidak perlu pengetahuan khusus yang mendalam, QoS dalam hal ini tidak dapat disesuaikan. <br><br>  Namun, kesederhanaan dan statis ini tidak mengarah pada fakta bahwa pendekatan Upaya Terbaik tidak digunakan di mana pun.  Ia menemukan aplikasi dalam jaringan dengan bandwidth tinggi dan tidak adanya kemacetan dan semburan. <br><br>  Misalnya, di jalur lintas benua atau di jaringan beberapa pusat data di mana tidak ada kelebihan langganan. <br>  Dengan kata lain, dalam jaringan tanpa kemacetan dan di mana tidak perlu berhubungan dengan lalu lintas apa pun (misalnya, telepon) dengan cara khusus, BE cukup tepat. <br><br><h2>  Interv </h2><br>  <i>Pemesanan awal sumber daya untuk aliran dari sumber ke tujuan.</i> <br><br>  Ayah dari jaringan MIT, Xerox, dan ISI memutuskan untuk menambahkan elemen prediktabilitas ke Internet sembarangan yang tumbuh, sambil mempertahankan operabilitas dan fleksibilitasnya. <br><br>  Jadi pada tahun 1994, gagasan IntServ lahir sebagai tanggapan terhadap pertumbuhan lalu lintas waktu-nyata yang cepat dan pengembangan multicast.  Itu kemudian direduksi menjadi IS. <br><br>  Nama tersebut mencerminkan keinginan dalam jaringan yang sama untuk secara bersamaan menyediakan layanan untuk jenis lalu lintas waktu-nyata dan non-waktu-nyata, memberikan hak prioritas pertama untuk menggunakan sumber daya melalui pemesanan pita.  Kemampuan untuk menggunakan kembali band tempat semua orang menghasilkan uang, dan berkat IP shot, dipertahankan. <br><br>  Misi cadangan ditugaskan ke protokol RSVP, yang untuk <b>setiap</b> aliran cadangan pita di <b>setiap</b> perangkat jaringan. <br><br>  Secara kasar, sebelum mengatur sesi Single Color Three Color MarkerP atau memulai pertukaran data, host akhir mengirim Jalur RSVP dengan bandwidth yang diperlukan.  Dan jika keduanya mengembalikan RSVP Resv - mereka dapat mulai berkomunikasi.  Pada saat yang sama, jika tidak ada sumber daya yang tersedia, maka RSVP mengembalikan kesalahan dan host tidak dapat berkomunikasi atau mengikuti BE. <br><br>  Biarkan sekarang para pembaca yang paling berani membayangkan bahwa suatu saluran akan diberi sinyal terlebih dahulu untuk aliran <b>apa pun</b> di Internet saat ini.  Menimbang bahwa ini memerlukan CPU dan biaya memori yang tidak nol pada <b>setiap</b> node transit, menunda interaksi sebenarnya untuk beberapa waktu, menjadi jelas mengapa IntServ ternyata merupakan ide lahir mati yang sebenarnya - skalabilitas nol. <br><br>  Dalam arti tertentu, inkarnasi modern IntServ adalah MPLS TE dengan versi pelabelan teradaptasi dari RSVP - RSVP TE.  Meskipun di sini, tentu saja, tidak End-to-End dan tidak per-aliran. <br><br>  IntServ dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 1633</a> . <br>  Dokumen ini, pada prinsipnya, penasaran untuk mengevaluasi seberapa naifnya perkiraan Anda. <br><br><h2>  Diffserv </h2><br>  <i>DiffServ rumit.</i> <br><br>  Ketika menjadi jelas di akhir tahun 90-an bahwa pendekatan IP IntServ End-to-End gagal, IETF mengadakan kelompok kerja Layanan Diferensial pada tahun 1997, yang mengembangkan persyaratan berikut untuk model QoS baru: <br><br><ul><li>  Tidak ada pensinyalan (Adjos, RSVP!). </li><li>  Berdasarkan klasifikasi lalu lintas agregat, alih-alih berfokus pada arus, pelanggan, dll. </li><li>  Ini memiliki seperangkat tindakan terbatas dan deterministik untuk memproses lalu lintas data kelas. </li></ul><br>  Sebagai hasilnya, tengara <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 2474</a> ( <i>Definisi Bidang Layanan Diferensial (Bidang DS) di Header IPv4 dan IPv6</i> ) dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 2475</a> ( <i>Arsitektur untuk Layanan Berbeda</i> ) lahir pada tahun 1998. <br><br>  Dan lebih jauh lagi, kita hanya akan berbicara tentang DiffServ. <br><br><blockquote>  Perlu dicatat bahwa nama DiffServ bukan antitesis dari IntServ.  Ini mencerminkan bahwa kami membedakan layanan yang disediakan oleh berbagai aplikasi, atau lebih tepatnya lalu lintasnya, dengan kata lain, kami membagikan / membedakan jenis lalu lintas ini. <br>  IntServ melakukan hal yang sama - ia membedakan antara jenis lalu lintas BE dan Real-Time, yang dikirimkan pada jaringan yang sama.  Baik: dan IntServ dan DiffServ - merujuk pada cara membedakan layanan. </blockquote><br><hr><br><h1>  3. Mekanisme DiffServ </h1><br>  Apa itu DiffServ dan mengapa itu mengalahkan IntServ? <br><br>  Jika sangat sederhana, lalu lintas dibagi menjadi beberapa kelas.  Paket di pintu masuk ke setiap node diklasifikasikan dan seperangkat alat diterapkan untuk itu, yang memproses paket dari kelas yang berbeda dengan cara yang berbeda, sehingga memberikan mereka dengan tingkat layanan yang berbeda. <br><br>  Tapi itu <a href="">tidak akan terjadi</a> . <br><br>  Inti dari DiffServ adalah konsep IP IP <b>PHB yang</b> dibumbui secara ideal <b>- Perilaku Per-Hop</b> .  Setiap node di jalur lalu lintas secara independen membuat keputusan tentang bagaimana berperilaku relatif terhadap paket yang masuk, berdasarkan header-nya. <br><br>  Tindakan router paket akan disebut model Perilaku.  Jumlah model tersebut bersifat deterministik dan terbatas.  Pada perangkat yang berbeda, model perilaku sehubungan dengan lalu lintas yang sama <i>mungkin</i> berbeda, oleh karena itu mereka per-hop. <br><br>  <i>Konsep <b>Perilaku</b> dan <b>PHB</b> akan saya gunakan dalam artikel sebagai sinonim.</i> <br><blockquote>  Ada sedikit kebingungan.  PHB adalah, di satu sisi, konsep umum perilaku independen setiap node, dan di sisi lain, model spesifik pada node tertentu.  Dengan ini kita akan mencari tahu. <br></blockquote><img src="https://habrastorage.org/webt/8w/jq/kq/8wjqkqc9e4jwrm1lokdaahlnod8.png" width="600"><br><br>  Model perilaku ditentukan oleh seperangkat alat dan parameternya: Pemolisian, Menjatuhkan, Mengantri, Menjadwalkan, Membentuk. <br><br>  Menggunakan model perilaku yang tersedia, jaringan dapat menyediakan berbagai kelas layanan ( <b>Kelas Layanan</b> ). <br><br>  Artinya, berbagai kategori lalu lintas dapat menerima berbagai tingkat layanan di jaringan dengan menerapkan PHB yang berbeda kepada mereka. <br><br>  Oleh karena itu, pertama-tama, Anda perlu menentukan kelas rujukan lalu lintas layanan mana - <b>Klasifikasi</b> . <br><br>  Setiap node secara independen mengklasifikasikan paket yang masuk. <br><br><img src="https://habrastorage.org/webt/_o/lp/jm/_olpjmv8pc3bclzzg9qtvh1_vke.png" width="700"><br><br>  Setelah klasifikasi, pengukuran terjadi ( <b>Pengukuran</b> ) - berapa banyak bit / byte lalu lintas dari kelas ini telah tiba di router. <br><br>  Berdasarkan hasil, paket dapat dicat ( <b>Pewarnaan</b> ): hijau (dalam batas yang ditentukan), kuning (di luar batas), merah (benar-benar memperdayai pantai). <br><br><img src="https://habrastorage.org/webt/3h/6g/xi/3h6gxiq2g_7lejnvonvxtft9pys.png" width="700"><br><br>  Jika perlu, maka <b>Pemolisian</b> terjadi (maaf untuk kertas kalkir seperti itu, ada pilihan yang lebih baik - tulis, saya akan berubah).  Polisher yang didasarkan pada warna paket memberikan aksi ke paket - mengirim, membuang, atau menandai ulang. <br><br><img src="https://habrastorage.org/webt/ft/gk/2k/ftgk2klys-yvgdicuzs1i8zg3lo.png" width="700"><br><br>  Setelah itu, paket harus masuk ke salah satu antrian ( <b>Antrian</b> ).  Antrian terpisah dialokasikan untuk setiap kelas layanan, yang memungkinkan mereka untuk dibedakan menggunakan PHB yang berbeda. <br><br>  Tetapi bahkan sebelum paket memasuki antrian, itu bisa dijatuhkan ( <b>Dropper</b> ) jika antrian penuh. <br><br>  Jika berwarna hijau, maka akan lulus, jika berwarna kuning, maka kemungkinan besar akan dibuang jika garisnya penuh, dan jika merah adalah bom bunuh diri yang pasti.  Secara kondisional, kemungkinan menjatuhkan tergantung pada warna paket dan kepenuhan antrian di mana ia akan mendapatkan. <br><br><img src="https://habrastorage.org/webt/er/q2/ks/erq2ksivfaq7yj2gch6ihcbezts.png" width="700"><br><br>  Pada saat keluar dari antrian, <b>Pembentuk</b> bekerja, tugas yang sangat mirip dengan tugas dari polyser - untuk membatasi lalu lintas ke nilai yang diberikan. <br><br>  Anda dapat mengonfigurasi pembentuk sembarang untuk masing-masing antrian, atau bahkan dalam antrian. <br>  Pada perbedaan antara pembentuk dan polyser di bab Batas Kecepatan. <br><br>  Semua antrian pada akhirnya harus bergabung menjadi satu antarmuka keluaran. <br><br>  Ingat situasi ketika di jalan 8 jalur bergabung menjadi 3. Tanpa pengontrol lalu lintas, ini berubah menjadi kekacauan.  Pemisahan bergantian tidak masuk akal jika kita memiliki output yang sama dengan input. <br><br>  Oleh karena itu, ada operator khusus ( <b>Penjadwal</b> ), yang secara siklis mengeluarkan paket dari antrian yang berbeda dan mengirimkannya ke antarmuka ( <b>Penjadwalan</b> ). <br><br>  Faktanya, kombinasi seperangkat antrian dan operator adalah mekanisme QoS yang paling penting yang memungkinkan Anda untuk menerapkan aturan yang berbeda untuk berbagai kelas lalu lintas, yang satu menyediakan bandwidth lebar, latensi rendah lainnya, ketiadaan ketiga tetes. <br><br>  Kemudian paket-paket sudah pergi ke antarmuka, di mana paket-paket diubah menjadi aliran bit - serialisasi ( <b>Serialisasi</b> ) dan kemudian sinyal lingkungan. <br><br><img src="https://habrastorage.org/webt/dy/i2/pk/dyi2pkpat1havyiz3ps3dmret-y.png" width="700"><br><br>  Dalam DiffServ, perilaku setiap node tidak tergantung pada yang lain, tidak ada protokol pensinyalan yang akan menunjukkan kebijakan QoS mana yang ada di jaringan.  Pada saat yang sama, dalam jaringan, saya ingin lalu lintas ditangani dengan cara yang sama.  Jika hanya satu node berperilaku berbeda, seluruh kebijakan QoS sia-sia. <br><br>  Untuk ini, pertama, pada semua router, kelas dan PHB yang sama dikonfigurasikan untuk mereka, dan kedua, <b>Penandaan</b> paket digunakan - miliknya ke kelas tertentu dicatat dalam header (IP, MPLS, 802.1q). <br><br>  Dan keindahan dari DiffServ adalah bahwa node selanjutnya dapat mengandalkan label ini untuk klasifikasi. <br><br>  Zona kepercayaan semacam itu, di mana aturan klasifikasi lalu lintas yang sama dan perilaku yang sama berlaku, disebut domain <b>DiffServ</b> ( <b>DiffServ-Domain</b> ). <br><br><img src="https://habrastorage.org/webt/8o/7d/ex/8o7dexwfq0xawzyhsuix7-viewi.png" width="700"><br><br>  Dengan demikian, di pintu masuk ke domain DiffServ, kita dapat mengklasifikasikan paket berdasarkan 5-Tuple atau antarmuka, tandai ( <b>Remark / Tulis ulang</b> ) sesuai dengan aturan domain, dan node lebih lanjut akan mempercayai penandaan ini dan tidak membuat klasifikasi yang kompleks. <br>  Yaitu, tidak ada pensinyalan eksplisit di DiffServ, tetapi node dapat memberi tahu semua yang berikut kelas mana paket ini perlu disediakan, menunggu untuk dipercaya. <br><br>  Di persimpangan antara domain DiffServ, Anda perlu menegosiasikan kebijakan QoS (atau tidak). <br><br>  Seluruh gambar akan terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/_-/7v/nt/_-7vntuvn9r1ugem7yenmxoj9fw.png" width="1000"><br><blockquote>  Untuk memperjelasnya, saya akan memberikan analog dari kehidupan nyata. <br>  Terbang dengan pesawat (bukan Kemenangan). <br>  Ada tiga kelas layanan (CoS): Ekonomi, Bisnis, Pertama. <br>  Saat membeli tiket, Klasifikasi terjadi - penumpang menerima kelas layanan tertentu berdasarkan harga. <br>  Di bandara ada tanda (Komentar) - tiket dikeluarkan menunjukkan kelas. <br>  Ada dua perilaku (PHB): Upaya Terbaik dan Premium. <br>  Ada mekanisme yang menerapkan perilaku: ruang tunggu umum atau VIP Lounge, minibus atau bus bersama, kursi besar yang nyaman atau barisan yang sempit, jumlah penumpang per pramugari, kemampuan untuk memesan alkohol. <br>  Bergantung pada kelasnya, model perilaku ditugaskan - ke ekonomi Usaha Terbaik, ke Bisnis - Premium dasar, dan ke yang Pertama - Premium SUPER-POWER-NINJA-TURBO-NEO-ULTRA-HYPER-MEGA-MULTI-ALPHA-META-EXTRA-UBER-PREFIX! <br>  Pada saat yang sama, dua Premium berbeda dalam hal itu, dalam satu mereka memberikan segelas semisweet, dan yang lain mereka memiliki Bacardi tanpa batas. <br><br>  Kemudian, setibanya di bandara, semua orang datang melalui satu pintu.  Mereka yang mencoba membawa senjata atau tidak memiliki tiket tidak diperbolehkan (Drop).  Bisnis dan ekonomi masuk ke ruang tunggu yang berbeda dan transportasi yang berbeda (Antrian).  Pertama mereka membiarkan Kelas Satu naik, lalu bisnis, lalu Ekonomi (Penjadwalan), tetapi kemudian mereka semua terbang ke tujuan dengan satu pesawat (antarmuka). <br><br>  Dalam contoh yang sama, penerbangan di pesawat terbang adalah penundaan Propagasi, pendaratan adalah penundaan Serialisasi, menunggu pesawat di aula antrian, dan kontrol paspor sedang Memproses.  Perhatikan bahwa di sini Keterlambatan Pemrosesan biasanya diabaikan dalam hal total waktu. <br><br>  Bandara berikutnya dapat menangani penumpang dengan cara yang sangat berbeda - PHB-nya berbeda.  Tetapi pada saat yang sama, jika penumpang tidak mengubah maskapai, maka kemungkinan besar sikap terhadapnya tidak akan berubah, karena satu perusahaan adalah satu domain DiffServ. <br></blockquote>  Seperti yang mungkin Anda perhatikan, DiffServ sangat kompleks (atau tidak terbatas).  Tetapi kami akan menganalisis semua yang dijelaskan di atas.  Pada saat yang sama, dalam artikel saya tidak akan masuk ke nuansa implementasi fisik (mereka dapat berbeda bahkan pada dua papan router yang sama), saya tidak akan berbicara tentang HQoS dan MPLS DS-TE. <br><br>  Ambang untuk memasuki lingkaran insinyur yang memahami teknologi untuk QoS jauh lebih tinggi daripada protokol routing, MPLS, atau, maafkan saya, Radya, STP. <br><br>  Meskipun demikian, DiffServ telah mendapatkan pengakuan dan implementasi pada jaringan di seluruh dunia, karena, seperti yang mereka katakan, sangat scalable. <br><br>  Sepanjang sisa artikel ini, saya hanya akan menganalisis DiffServ. <br><br>  Di bawah ini kami akan menganalisis semua alat dan proses yang ditunjukkan dalam ilustrasi. <br><br><img src="https://habrastorage.org/webt/qb/21/kg/qb21kgaqnsm6-pi2qwe0rdniqq4.png" width="600"><br><br><hr><br>  Dalam perjalanan memperluas topik, saya akan menunjukkan beberapa hal dalam praktik. <br>  Kami akan bekerja dengan jaringan seperti itu: <br><br><img src="https://habrastorage.org/webt/zc/0o/zn/zc0ozndb8nmrqajljkf98pp79tk.png" width="900"><br><br>  Trisolarans adalah klien penyedia tautan dengan dua titik koneksi. <br><br>  Area kuning adalah domain DiffServ dari jaringan tautan, di mana kebijakan QoS tunggal berlaku. <br>  Linkmeup_R1 adalah perangkat CPE yang dikelola oleh penyedia, dan karenanya di zona tepercaya.  OSPF dinaikkan dengan itu dan interaksi terjadi melalui IP bersih. <br><br>  Di dalam inti jaringan ada MPLS + LDP + MP-BGP dengan L3VPN, membentang dari Linkmeup_R2 ke Linkmeup_R4. <br>  Saya akan memberikan semua komentar lain seperlunya. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">File konfigurasi awal</a> . <br><br><hr><br><h1>  4. Klasifikasi dan pelabelan </h1><br>  Dalam jaringannya, administrator mendefinisikan kelas layanan yang dapat ia berikan lalu lintas. <br><br>  Oleh karena itu, hal pertama yang dilakukan setiap node ketika menerima paket adalah mengklasifikasikannya. <br><br>  Ada tiga cara: <br><br><ol><li>  <b>Agregat Perilaku</b> ( <b>BA</b> ) <br>  Percaya saja label paket yang ada di header-nya.  Misalnya, bidang IP DSCP. <br>  Disebut demikian karena di bawah label yang sama di bidang DSCP berbagai kategori lalu lintas dikumpulkan yang mengharapkan perilaku yang sama sehubungan dengan diri mereka sendiri.  Sebagai contoh, semua sesi SIP akan digabungkan menjadi satu kelas. <br><br>  Jumlah kelas layanan yang mungkin, dan karena itu pola perilaku, terbatas.  Oleh karena itu, mustahil untuk setiap kategori (atau bahkan lebih untuk streaming) untuk mengalokasikan kelas yang terpisah - perlu untuk agregat. </li><li>  <b>Berbasis antarmuka</b> <br>  Segala sesuatu yang datang ke antarmuka tertentu harus ditempatkan dalam satu kelas lalu lintas.  Sebagai contoh, kita tahu pasti bahwa server database terhubung ke port ini dan tidak lebih.  Dan di workstation karyawan lain. </li><li>  <b>MultiField</b> ( <b>MF</b> ) <br>  Menganalisis bidang header paket - alamat IP, port, alamat MAC.  Secara umum, bidang yang arbitrer. <br><br>  Misalnya, semua lalu lintas yang menuju subnet 10.127.721.0/24 pada port 5000 harus ditandai sebagai lalu lintas, yang secara kondisional membutuhkan layanan kelas 5. </li></ol><br>  Administrator menentukan sekumpulan kelas layanan yang dapat disediakan jaringan, dan memetakannya beberapa nilai digital. <br><br>  Di pintu masuk ke domain-DS, kami tidak mempercayai siapa pun, sehingga klasifikasi dilakukan dengan cara kedua atau ketiga: berdasarkan alamat, protokol atau antarmuka, kelas layanan dan nilai digital yang sesuai ditentukan. <br><br>  Pada saat keluar dari node pertama, digit ini dikodekan dalam bidang DSCP header IP (atau bidang lain dari Kelas Lalu Lintas: Kelas Lalu Lintas MPLS, Kelas Lalu Lintas IPv6, Ethernet 802.1p) - sebuah komentar muncul. <br><br>  Merupakan kebiasaan untuk mempercayai pelabelan ini di dalam domain DS, oleh karena itu, transit node menggunakan metode klasifikasi pertama (BA) - yang paling sederhana.  Tidak ada analisis judul yang rumit, lihat saja nomor yang direkam. <br><br>  Di persimpangan dua domain, Anda dapat mengklasifikasikan berdasarkan antarmuka atau MF, seperti yang saya jelaskan di atas, atau Anda dapat mempercayai pemberian tanda BA dengan pemesanan. <br><br>  Misalnya, percaya semua nilai kecuali 6 dan 7, dan tetapkan kembali 6 dan 7 hingga 5. <br><br>  Situasi ini dimungkinkan ketika penyedia menghubungkan entitas hukum yang memiliki kebijakan pelabelannya sendiri.  Penyedia tidak keberatan menyimpannya, tetapi tidak ingin lalu lintas jatuh ke dalam kelas di mana ia menerima paket protokol jaringan. <br><br><img src="https://habrastorage.org/webt/8o/7d/ex/8o7dexwfq0xawzyhsuix7-viewi.png" width="900"><br><br><h2>  Agregasi perilaku </h2><br>  BA menggunakan klasifikasi yang sangat sederhana - Saya melihat angka - Saya mengerti kelasnya. <br>  Jadi, berapa angkanya?  Dan di bidang apa ini direkam? <br><br><ul><li>  Kelas Lalu Lintas IPv6 </li><li>  Kelas Lalu Lintas MPLS </li><li>  Ethernet 802.1p </li></ul><br>  Klasifikasi terutama didasarkan pada header pergantian. <br><br>  <i>Saya memanggil header komuter yang didasarkan pada perangkat yang menentukan ke mana harus mengirim paket sehingga menjadi lebih dekat ke penerima.</i> <br>  Yaitu, jika paket IP tiba di router, header IP dan bidang DSCP dianalisis.  Jika MPLS tiba, ia diuraikan - MPLS Traffic Class. <br><br>  Jika paket Ethernet + VLAN + MPLS + IP datang ke L2-switch biasa, maka 802.1p akan dianalisis (meskipun ini dapat diubah). <br><br><h3>  IPv4 TOS </h3><br>  Bidang QoS menyertai kita persis seperti IP.  Bidang TOS delapan bit - Jenis Layanan - seharusnya membawa prioritas paket. <br><br>  Bahkan sebelum munculnya DiffServ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 791</a> ( <i>INTERNET PROTOCOL</i> ) menggambarkan bidang seperti ini: <br><br>  IP Precedence (IPP) + DTR + 00. <br><br><img src="https://habrastorage.org/webt/fw/fe/of/fwfeofy_xr9dbft1vbap2djoszm.png" width="700"><br><br>  Artinya, prioritas paket berjalan, maka bit ketepatan untuk Delay, Throughput, Keandalan (0 - tanpa persyaratan, 1 - dengan persyaratan). <br><br>  Dua bit terakhir harus nol. <br><br><div class="spoiler">  <b class="spoiler_title">Prioritas menentukan nilai-nilai berikut ...</b> <div class="spoiler_text">  111 - Kontrol Jaringan <br>  110 - Kontrol Internetwork <br>  101 - CRITIC / ECP <br>  100 - Flash Override <br>  011 - Flash <br>  010 - Segera <br>  001 - Prioritas <br>  000 - Rutin <br></div></div><br>  Kemudian di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 1349</a> ( <i>Jenis Layanan di Internet Protocol Suite</i> ), bidang TOS sedikit didefinisikan ulang: <br><br><img src="https://habrastorage.org/webt/95/dz/pm/95dzpm400ckireeowdta1q_7lvg.png" width="700"><br><br>  Tiga bit tersisa tetap IP Precedence, empat berikutnya berubah menjadi TOS setelah menambahkan bit Biaya. <br><br>  Berikut cara membaca unit dalam bit TOS ini: <br><br><ul><li>  D - “minim <b>d</b> elay”, </li><li>  T - "maksimalkan <b>t</b> throughput", </li><li>  R - "maksimalkan keandalan", </li><li>  C - "meminimalkan masalah". </li></ul><br>  Deskripsi kabur tidak berkontribusi pada popularitas pendekatan ini. <br><br>  Tidak ada pendekatan sistematis untuk QoS di sepanjang jalur, tidak ada rekomendasi yang jelas tentang cara menggunakan bidang prioritas, deskripsi bit Keterlambatan, Throughput, dan Keandalan sangat kabur. <br><br>  Oleh karena itu, dalam konteks DiffServ, bidang TOS sekali lagi didefinisikan ulang dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 2474</a> ( <i>Definisi Bidang Layanan Diferensial (Bidang DS) di Header IPv4 dan IPv6</i> ): <br><br><img src="https://habrastorage.org/webt/n_/ie/zm/n_iezmmdhv2tg7qlbxqad7c_4_m.png" width="700"><br><br>  Alih-alih bit IPP dan DTRC, DSCP bidang enam-bit - <b>Titik Kode Layanan Diferensial</b> diperkenalkan, dua bit kanan tidak digunakan. <br><br>  Sejak saat itu, bidang DSCP yang seharusnya menjadi penanda utama DiffServ: nilai tertentu (kode) ditulis di dalamnya, yang di dalam domain DS mencirikan kelas layanan tertentu yang diperlukan oleh paket dan prioritasnya yang menurun.  Ini adalah angka yang sama. <br><br>  Administrator dapat menggunakan semua 6 bit DSCP sesuai keinginannya, berbagi hingga maksimal 64 kelas layanan. <br><br>  Namun, demi kompatibilitas dengan IP Precedence, mereka mempertahankan peran Class Selector untuk tiga bit pertama. <br><br>  Yaitu, seperti dalam IPP, 3 bit Selector Kelas memungkinkan Anda untuk mendefinisikan 8 kelas. <br><br><img src="https://habrastorage.org/webt/fw/vl/p0/fwvlp0wanilpj7_lrp8bxj7blqe.png" width="700"><br><br>  Namun, ini masih tidak lebih dari pengaturan yang, dalam batas-batas DS-domain-nya, administrator dapat dengan mudah mengabaikan dan menggunakan semua 6 bit atas kebijakannya sendiri. <br><br>  Lebih lanjut, saya juga mencatat bahwa menurut rekomendasi IETF, semakin tinggi nilainya yang dicatat dalam CS, semakin banyak trafik ke layanan ini. <br><br>  Tapi ini tidak bisa dianggap sebagai kebenaran yang tidak bisa disangkal. <br><br>  Jika tiga bit pertama menentukan kelas traffic, maka tiga bit berikutnya digunakan untuk menunjukkan prioritas paket drop ( <b>Drop Precedence</b> atau <b>Packet Loss Priority - PLP</b> ). <br><blockquote>  Delapan kelas - apakah banyak atau sedikit?  Pada pandangan pertama, itu tidak cukup - setelah semua, begitu banyak lalu lintas yang berbeda terjadi pada jaringan yang ingin dibedakan setiap protokol dengan kelas.  Namun, ternyata delapan sudah cukup untuk semua skenario yang mungkin. <br>  Untuk setiap kelas, Anda perlu mendefinisikan PHB yang akan menanganinya dengan cara yang berbeda dari kelas lainnya. <br>  Dan dengan peningkatan pembagi, dividen (sumber daya) tidak meningkat. <br>  Saya sengaja tidak berbicara tentang nilai pasti dari kelas lalu lintas mana yang mereka gambarkan, karena tidak ada standar dan Anda dapat menggunakannya secara resmi atas kebijakan Anda sendiri.  Di bawah ini saya akan memberi tahu Anda kelas mana dan nilainya yang sesuai direkomendasikan. <br></blockquote><div class="spoiler">  <b class="spoiler_title">Bit ECN ...</b> <div class="spoiler_text">  Bidang ECN dua-bit hanya muncul di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 3168</a> ( <i>Pemberitahuan Kemacetan Eksplisit</i> ).  Bidang ini didefinisikan dengan tujuan baik untuk memberi tahu penghuni akhir secara eksplisit bahwa seseorang mengalami kemacetan di sepanjang jalan. <br>  Misalnya, ketika paket ditunda dalam antrian router untuk waktu yang lama dan mengisinya, misalnya, sebesar 85%, itu mengubah nilai ECN, memberi tahu tuan rumah akhir apa yang perlu lebih lambat - sesuatu seperti Jeda Frame pada Ethernet. <br><br>  Dalam hal ini, pengirim harus mengurangi laju transmisi dan mengurangi beban pada simpul yang menderita. <br><br>  Pada saat yang sama, secara teoritis, dukungan untuk bidang ini oleh semua node transit tidak diperlukan.  Artinya, penggunaan ECN tidak merusak jaringan yang tidak mendukungnya. <br><br>  Tujuannya baik, tetapi sebelum aplikasi dalam kehidupan ECN tidak ditemukan secara khusus.  Saat ini, mega dan hyperscal melihat dua bit ini dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">minat baru</a> . <br><br>  ECN adalah salah satu mekanisme penghindaran kemacetan yang dijelaskan di bawah ini. <br></div></div><br><hr><br><h4>  Praktek klasifikasi DSCP </h4><br>  Tidak ada ruginya sedikit berlatih. <br><br>  Skemanya sama. <br><br><img src="https://habrastorage.org/webt/zc/0o/zn/zc0ozndb8nmrqajljkf98pp79tk.png" width="900"><br><br>  Untuk memulai, cukup kirim permintaan ICMP: <br><br><pre><code class="hljs pgsql">Linkmeup_R1#ping ip <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> source <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">escape</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abort</span></span>. Sending <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>-byte ICMP Echos <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>, timeout <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> seconds: Packet sent <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> a source address <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> !!!!! Success rate <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> percent (<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">5</span></span>), round-trip min/avg/max = <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> ms</code> </pre> <br>  <i>Linkmeup_R1.</i>  <i>E0 / 0.</i> <br><br><img src="https://habrastorage.org/webt/6g/zl/lp/6gzllpyfrbtsvqjd3sqn-rljc8g.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  Dan sekarang dengan nilai DSCP yang ditetapkan. <br><br><pre> <code class="hljs pgsql"> Linkmeup_R1#ping ip <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> source <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> tos <span class="hljs-number"><span class="hljs-number">184</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">escape</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abort</span></span>. Sending <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>-byte ICMP Echos <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>, timeout <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> seconds: Packet sent <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> a source address <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">172.16</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> !!!!! Success rate <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> percent (<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">5</span></span>), round-trip min/avg/max = <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> ms</code> </pre> <br>  Nilai 184 adalah representasi desimal dari biner 10111000. Dari jumlah tersebut, 6 bit pertama adalah 101110, yaitu desimal 46, dan ini adalah EF kelas. <br><br><div class="spoiler">  <b class="spoiler_title">Tabel nilai TOS standar untuk popingushki nyaman ...</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/z5/fx/ij/z5fxijhtpv24gndpefezlypbdju.png" width="500"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lebih detail</a></i> <br>  Di bawah ini dalam teks di bab <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rekomendasi IETF,</a> saya akan memberi tahu Anda dari mana angka dan nama ini berasal. <br></div></div><br>  <i>Linkmeup_R2.</i>  <i>E0 / 0</i> <br><br><img src="https://habrastorage.org/webt/y_/fn/gn/y_fngnyvicccbvsesftdw5lawrc.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  Catatan ingin tahu: tujuan pingushka di ICMP Echo reply menetapkan nilai kelas yang sama seperti di Echo Request.  Ini logis - jika pengirim mengirim paket dengan tingkat kepentingan tertentu, maka jelas dia ingin menerimanya kembali. <br><br>  <i>Linkmeup_R2.</i>  <i>E0 / 0</i> <br><br><img src="https://habrastorage.org/webt/wk/uu/ea/wkuueaujq2oqgrgd6cu960kqezu.png" width="600"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">File konfigurasi klasifikasi DSCP.</a> <br><br><h3>  Kelas Lalu Lintas IPv6 </h3><br>  IPv6 tidak jauh berbeda dalam hal QoS dari IPv4.  Bidang delapan bit, yang disebut Kelas Lalu Lintas, juga dibagi menjadi dua bagian.  6 bit pertama - DSCP - memainkan peran yang persis sama. <br><br><img src="https://habrastorage.org/webt/cu/xd/nf/cuxdnfexzlj8ls4zjd3qxwh8oa8.png" width="700"><br><br>  Ya, Label Arus telah muncul.  Mereka mengatakan bahwa itu dapat digunakan untuk diferensiasi kelas tambahan.  Namun gagasan ini belum diterapkan dalam kehidupan. <br><br><h3>  Kelas Lalu Lintas MPLS </h3><br>  Konsep DiffServ difokuskan pada jaringan IP dengan routing header IP.  Itu hanya nasib buruk - setelah 3 tahun, mereka menerbitkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 3031</a> ( <i>Multiprotocol Label Switching Architecture</i> ).  Dan MPLS mulai mengambil alih penyedia jaringan. <br><br>  DiffServ tidak dapat diperpanjang kepadanya. <br><br>  Secara kebetulan, bidang EXP tiga bit dimasukkan ke MPLS untuk kasus eksperimental apa pun.  Dan terlepas dari kenyataan bahwa lama di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 5462</a> ( <i>"EXP" Field Berganti nama menjadi "Traffic Class"</i> ) secara resmi menjadi bidang Traffic Class, oleh inersia itu disebut IExPi. <br><br>  Ada satu masalah dengan itu - panjangnya tiga bit, yang membatasi jumlah nilai yang mungkin sampai 9. Ini bukan hanya kecil, itu adalah 3 pesanan biner kurang dari DSCP. <br><br><img src="https://habrastorage.org/webt/is/r0/tc/isr0tc7unhhkxs-bjevcbipjq6k.png" width="700"><br><br>  Mengingat bahwa MPLS Traffic Class sering diwarisi dari paket IP DSCP, kami memiliki pengarsipan dengan kehilangan.  Atau ... Tidak, Anda tidak ingin tahu itu ... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">L-LSP</a> .  Menggunakan kombinasi nilai label Traffic Class +. <br><blockquote>  Umumnya, situasinya aneh - MPLS dirancang sebagai bantuan IP untuk pengambilan keputusan cepat - label MPLS langsung terdeteksi di CAM oleh Pencocokan Penuh, alih-alih Pencocokan Awalan Terpanjang tradisional.  Artinya, mereka tahu tentang IP, dan mengambil bagian dalam peralihan, tetapi tidak menyediakan bidang prioritas normal. <br></blockquote>  Faktanya, kita sudah melihat di atas bahwa hanya tiga bit pertama DSCP yang digunakan untuk menentukan kelas traffic, dan tiga bit lainnya adalah Drop Precedence (atau PLP - Packet Loss Priority). <br><br>  Oleh karena itu, dalam hal kelas layanan, kami masih memiliki korespondensi 1: 1, hanya kehilangan informasi tentang Drop Precedence. <br><br>  Dalam kasus MPLS, klasifikasi seperti dalam IP dapat didasarkan pada antarmuka, MF, IP DSCP atau Traffic Class MPLS. <br><br>  Pelabelan berarti menulis nilai di bidang Kelas Lalu Lintas header MPLS. <br><br>  Paket dapat berisi beberapa header MPLS.  Untuk tujuan DiffServ, hanya bagian atas yang digunakan. <br><br>  Ada tiga skenario penandaan ulang yang berbeda saat memindahkan paket dari satu segmen IP murni ke yang lain melalui domain MPLS: (ini hanya kutipan dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> ). <br><br><ol><li>  Mode seragam </li><li>  Mode pipa </li><li>  Mode pipa pendek </li></ol><br><div class="spoiler">  <b class="spoiler_title">Mode Operasi ...</b> <div class="spoiler_text"><br><h3>  Mode seragam </h3><br>  Ini adalah model ujung ke ujung yang rata. <br><br><img src="https://habrastorage.org/web/e50/932/53b/e5093253bcf94dc091f88500be2b6f9d.png" width="1000"><br><br>  Di Ingress PE, kami mempercayai IP DSCP dan menyalin ( <i>secara tegas, menampilkan, tetapi untuk kesederhanaan kami akan mengatakan "menyalin"</i> ) nilainya dalam MPLS EXP (baik header dan header VPN).  Pada output dari Ingress PE, paket sudah diproses sesuai dengan nilai bidang EXP header MPLS atas. <br><br>  Setiap transit P juga memproses paket berdasarkan EXP atas.  Tetapi pada saat yang sama, ia dapat mengubahnya jika operator menginginkannya. <br><br>  Node kedua dari belakang menghapus label transport (PHP) dan menyalin nilai EXP ke header VPN.  Tidak masalah apa yang berdiri di sana - dalam mode Seragam, penyalinan terjadi. <br><br>  Egress PE, menghapus label VPN, juga menyalin nilai EXP ke IP DSCP, bahkan jika ada sesuatu yang ditulis di sana. <br><br>  Yaitu, jika di suatu tempat di tengah nilai label EXP di header tunnel telah berubah, maka perubahan ini akan diwarisi oleh paket IP. <br><br><h3>  Mode pipa </h3><br><img src="https://habrastorage.org/web/5a1/f9a/a46/5a1f9aa46bb94ed88d62185535f5b41e.png" width="1000"><br><br>  Jika pada Ingress PE kami memutuskan untuk tidak mempercayai nilai DSCP, maka nilai EXP yang diinginkan operator dimasukkan ke header MPLS. <br><br>  Tetapi dapat diterima untuk menyalin yang ada di DSCP.  Misalnya, Anda dapat mendefinisikan ulang nilai - menyalin semuanya hingga EF, dan memetakan CS6 dan CS7 ke EF. <br><br>  Setiap transit P hanya terlihat pada EXP header MPLS atas. <br><br>  Node kedua dari belakang menghapus label transport (PHP) dan <b>menyalin</b> nilai EXP ke header VPN. <br><br>  Egress PE pertama-tama memproses paket berdasarkan pada bidang EXP di header MPLS, dan baru kemudian menghapusnya, <b>tanpa menyalin</b> nilainya ke DSCP. <br><br>  Yaitu, terlepas dari apa yang terjadi pada bidang EXP di header MPLS, IP DSCP tetap tidak berubah. <br><br>  Skenario seperti itu dapat digunakan ketika operator memiliki domain Diff-Serv sendiri, dan ia tidak ingin lalu lintas klien memengaruhinya. <br><br><h3>  Mode pipa pendek </h3><br><img src="https://habrastorage.org/web/f80/1c8/e2d/f801c8e2dac84ff1b376a5f68824d93e.png" width="1000"><br><br>  Anda dapat mempertimbangkan mode ini sebagai variasi mode Pipa.  Satu-satunya perbedaan adalah bahwa pada saat keluar dari jaringan MPLS, paket diproses sesuai dengan bidang IP DSCP-nya, bukan MPLS EXP. <br><br>  Ini berarti bahwa prioritas paket pada output ditentukan oleh klien, bukan operator. <br>  Ingress PE tidak mempercayai paket masuk IP DSCP <br>  Lihat Transit ps di bidang EXP dari header atas. <br>  Penultimate P menghilangkan label transport dan menyalin nilainya ke label VPN. <br>  Egress PE pertama-tama menghapus label MPLS, kemudian memproses paket dalam antrian. <br><br>  Penjelasan dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cisco</a> . <br></div></div><br><hr><br><h4>  Praktek Klasifikasi Kelas Lalu Lintas MPLS </h4><br>  Skemanya sama: <br><br><img src="https://habrastorage.org/webt/zc/0o/zn/zc0ozndb8nmrqajljkf98pp79tk.png" width="900"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">File konfigurasi sama.</a> <br><br>  Dalam diagram jaringan linkmeup, ada transisi dari IP ke MPLS ke Linkmeup_R2. <br>  Mari kita lihat apa yang terjadi dengan menandai ketika ping <b>ping ip 172.16.2.2 sumber 172.16.1.1 tos 184</b> . <br><br>  <i>Linkmeup_R2.</i>  <i>E0 / 0.</i> <br><img src="https://habrastorage.org/webt/lj/at/14/ljat14wahqfc91ojgigmlrwayzo.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  Jadi, kita melihat bahwa label EF asli di IP DSCP diubah menjadi nilai 5 bidang EXP MPLS (ini juga merupakan Kelas Lalu Lintas, ingat ini) dari header VPN dan header transport. <br>  Di sini kita adalah saksi mode operasi Uniform. <br><br><hr><br><h3>  Ethernet 802.1p </h3><br>  Kurangnya bidang prioritas dalam 802.3 (Ethernet) dijelaskan oleh fakta bahwa Ethernet awalnya direncanakan secara eksklusif sebagai solusi untuk segmen LAN.  Untuk uang sederhana, Anda bisa mendapatkan bandwidth yang berlebihan, dan uplink akan selalu menjadi hambatan - tidak ada yang perlu dikhawatirkan tentang memprioritaskan. <br><br>  Namun, segera menjadi jelas bahwa daya tarik keuangan Ethernet + IP membawa bundel ini ke tingkat backbone dan WAN.  Dan hidup bersama dalam satu segmen LAN dengan torrents dan telepon perlu diselesaikan. <br><br>  Untungnya, 802.1q (VLAN) tiba pada waktunya untuk ini, di mana bidang 3-bit (lagi) dialokasikan untuk prioritas. <br><br>  Dalam paket DiffServ, bidang ini memungkinkan Anda untuk menentukan 8 kelas lalu lintas yang sama. <br><br><img src="https://habrastorage.org/webt/oh/_i/1l/oh_i1l1omqt1rk8agowdenx6x7o.png" width="600"><br><br><hr><br>  Saat menerima paket, perangkat jaringan dari domain DS dalam banyak kasus memperhitungkan header yang digunakannya untuk berpindah: <br><br><ul><li>  Switch Ethernet - 802.1p </li><li>  MPLS Node - MPLS Traffic Class </li><li>  IP Router - IP DSCP </li></ul><br>  Meskipun perilaku ini dapat diubah: Berbasis Antarmuka dan klasifikasi Multi-Bidang.  Dan Anda kadang-kadang bahkan dapat secara eksplisit mengatakan di bidang CoS header yang harus dilihat. <br><br><hr><br><h2>  Berbasis antarmuka </h2><br>  Ini adalah cara termudah untuk mengklasifikasikan paket di dahi.  Segala sesuatu yang dituangkan ke antarmuka yang ditentukan ditandai dengan kelas tertentu. <br><br>  Dalam beberapa kasus, rincian ini sudah cukup, sehingga berbasis antarmuka digunakan dalam kehidupan. <br><br><h4>  Praktek klasifikasi berbasis antarmuka </h4><br>  Skemanya sama: <br><br><img src="https://habrastorage.org/webt/zc/0o/zn/zc0ozndb8nmrqajljkf98pp79tk.png" width="900"><br><br>  Menyiapkan kebijakan QoS di peralatan sebagian besar vendor dibagi menjadi beberapa tahap. <br><br><ol><li>  Pertama, classifier didefinisikan: <br> <code>class-map match-all TRISOLARANS_INTERFACE_CM <br> match input-interface Ethernet0/2</code> <br>  Segala sesuatu yang datang ke antarmuka Ethernet0 / 2. <br></li><li>  Selanjutnya, kebijakan dibuat di mana classifier dan tindakan yang diperlukan terkait. <br><br><pre> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">policy</span></span>-map TRISOLARANS_REMARK <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> TRISOLARANS_INTERFACE_CM <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> ip dscp cs7</code> </pre> <br>  Jika paket memenuhi classifier TRISOLARANS_INTERFACE_CM, tulis CS7 di bidang DSCP. <br><blockquote>  Di sini saya maju menggunakan CS7 yang tidak jelas, lalu EF, AF.  Di bawah ini Anda dapat membaca tentang singkatan ini dan perjanjian yang diterima.  Sementara itu, cukup untuk mengetahui bahwa ini adalah kelas yang berbeda dengan tingkat layanan yang berbeda. <br></blockquote></li><li>  Dan langkah terakhir adalah menerapkan kebijakan ke antarmuka: <br><br><pre> <code class="hljs pgsql"> interface Ethernet0/<span class="hljs-number"><span class="hljs-number">2</span></span> service-<span class="hljs-keyword"><span class="hljs-keyword">policy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> TRISOLARANS_REMARK</code> </pre> <br><blockquote>  Di sini, classifier sedikit berlebihan, yang akan memeriksa bahwa paket tersebut datang ke antarmuka e0 / 2, di mana kita kemudian menerapkan kebijakan tersebut.  Orang bisa menulis yang cocok dengan apa saja: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span>-map match-<span class="hljs-keyword"><span class="hljs-keyword">all</span></span> TRISOLARANS_INTERFACE_CM match <span class="hljs-keyword"><span class="hljs-keyword">any</span></span></code> </pre> <br>  Namun, kebijakan tersebut sebenarnya dapat diterapkan pada vlanif atau pada antarmuka keluaran, sehingga dimungkinkan. <br></blockquote><br></li></ol><br>  Jalankan ping biasa pada 172.16.2.2 (Trisolaran2) dengan Trisolaran1: <br><br><img src="https://habrastorage.org/webt/sm/gh/5j/smgh5j3nxjmen6yspkxl8tu9so8.png" width="400"><br><br>  Dan di dump antara Linkmeup_R1 dan Linkmeup_R2 kita akan melihat yang berikut: <br><br><img src="https://habrastorage.org/webt/rh/qe/6z/rhqe6z4z98dxmkcrygfpb7zboee.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konfigurasi File Klasifikasi Berbasis Antarmuka.</a> <br><br><h2>  Multi-bidang </h2><br>  Jenis klasifikasi yang paling umum di pintu masuk ke domain DS.  Kami tidak mempercayai label yang ada, dan atas dasar header paket kami menetapkan kelas. <br><br>  Seringkali ini adalah cara untuk "mengaktifkan" QoS sama sekali, dalam hal ketika pengirim tidak menandai. <br><br>  Alat yang cukup fleksibel, tetapi pada saat yang sama rumit - Anda perlu membuat aturan yang sulit untuk setiap kelas.  Oleh karena itu, di dalam domain DS, BA lebih relevan. <br><br><h4>  Praktek klasifikasi MF </h4><br>  Skemanya sama: <br><br><img src="https://habrastorage.org/webt/zc/0o/zn/zc0ozndb8nmrqajljkf98pp79tk.png" width="900"><br><br>  Dari contoh praktis di atas, dapat dilihat bahwa perangkat jaringan dengan label kepercayaan default dari paket yang masuk. <br><br>  Ini baik-baik saja di dalam domain DS, tetapi tidak dapat diterima di titik masuk. <br><br>  Dan sekarang janganlah kita percaya secara membuta?  Pada <b>Linkmeup_R2,</b> ICMP akan diberi label sebagai EF (misalnya saja), TCP sebagai AF12, dan yang lainnya adalah CS0. <br>  Ini akan menjadi klasifikasi MF (Multi-Bidang). <br><br><ol><li>  Prosedurnya sama, tapi sekarang kami akan mencocokkan dengan ACL yang melepaskan kaitan kategori lalu lintas yang diperlukan, jadi pertama-tama kita buat mereka. <br><br>  Di Linkmeup_R2: <br><br><pre> <code class="hljs pgsql"> ip <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>-list extended TRISOLARANS_ICMP_ACL permit icmp <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> ip <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>-list extended TRISOLARANS_TCP_ACL permit tcp <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> ip <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>-list extended TRISOLARANS_OTHER_ACL permit ip <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> <span class="hljs-keyword"><span class="hljs-keyword">any</span></span></code> </pre> <br></li><li>  Selanjutnya, kita mendefinisikan pengklasifikasi: <br><br><pre> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>-map match-<span class="hljs-keyword"><span class="hljs-keyword">all</span></span> TRISOLARANS_TCP_CM match <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> TRISOLARANS_TCP_ACL <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>-map match-<span class="hljs-keyword"><span class="hljs-keyword">all</span></span> TRISOLARANS_OTHER_CM match <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> TRISOLARANS_OTHER_ACL <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>-map match-<span class="hljs-keyword"><span class="hljs-keyword">all</span></span> TRISOLARANS_ICMP_CM match <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> TRISOLARANS_ICMP_ACL</code> </pre> <br></li><li>  Dan sekarang kita mendefinisikan aturan berkomentar dalam politik: <br><br><pre> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">policy</span></span>-map TRISOLARANS_ADMISSION_CONTROL <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> TRISOLARANS_ICMP_CM <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> ip dscp ef <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> TRISOLARANS_TCP_CM <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> ip dscp af11 <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> TRISOLARANS_OTHER_CM <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> ip dscp <span class="hljs-keyword"><span class="hljs-keyword">default</span></span></code> </pre> <br></li><li>  Dan kami menggantung kebijakan di antarmuka.  Di input, masing-masing, karena keputusan harus dibuat di pintu masuk ke jaringan. <br><br><pre> <code class="hljs pgsql"> interface Ethernet0/<span class="hljs-number"><span class="hljs-number">1</span></span> service-<span class="hljs-keyword"><span class="hljs-keyword">policy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> TRISOLARANS_ADMISSION_CONTROL</code> </pre> <br></li></ol><br>  Tes ICMP dari host terakhir Trisolaran1.  Kami tidak secara khusus menentukan kelas - standarnya adalah 0. <br><br>  <b>Saya sudah menghapus kebijakan dengan Linkmeup_R1, jadi lalu lintas dilengkapi dengan tanda CS0, bukan CS7.</b> <br><br><img src="https://habrastorage.org/webt/_f/si/90/_fsi9012_fo5a8z1x14fdtxqz0m.png" width="400"><br><br>  Berikut adalah dua kesedihan terdekat, dengan Linkmeup_R1 dan Linkmeup_R2: <br><br>  <i>Linkmeup_R1.</i>  <i>E0 / 0.</i> <br><img src="https://habrastorage.org/webt/cp/t5/ge/cpt5gersxbcrhjsba4lz8t-5z-i.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  <i>Linkmeup_R2.</i>  <i>E0 / 0.</i> <br><img src="https://habrastorage.org/webt/9x/0w/j7/9x0wj7gkztleiock6vnax33m-7c.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  Dapat dilihat bahwa setelah pengklasifikasi dan penandaan ulang Linkmeup_R2 pada paket ICMP, tidak hanya DSCP berubah menjadi EF, tetapi Kelas Lalu Lintas MPLS menjadi sama dengan 5. <br><br>  Tes serupa dengan telnet 172.16.2.2.  80 - jadi periksa TCP: <br><br><img src="https://habrastorage.org/webt/rd/f1/xo/rdf1xovczuma9nuziqbawyyuqji.png" width="400"><br><br>  <i>Linkmeup_R1.</i>  <i>E0 / 0.</i> <br><img src="https://habrastorage.org/webt/-i/nr/gj/-inrgjtler0zsvt2y3hq3cxvd8m.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  <i>Linkmeup_R2.</i>  <i>E0 / 0.</i> <br><img src="https://habrastorage.org/webt/mk/z_/qz/mkz_qz44dywl9kr5uw3ohauu9qa.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  BACA - Apa Dan Diperlukan Untuk Diharapkan.  TCP ditransmisikan sebagai AF11. <br><br>  Tes berikutnya akan menguji UDP, yang harus pergi ke CS0 sesuai dengan pengklasifikasi kami.  Kami akan menggunakan iperf untuk ini (membawanya ke Linux Tiny Core via Apps).  Di sisi remote <b>iperf3 -s</b> - mulai server, pada <b>iperf3</b> lokal <b>-c -u -t1</b> - client ( <b>-c</b> ), protokol UDP ( <b>-u</b> ), uji selama 1 detik ( <b>-t1</b> ). <br><br><img src="https://habrastorage.org/webt/zw/gu/sb/zwgusb4bqnq7prgq_yw5ue44pqo.png" width="400"><br><br>  <i>Linkmeup_R1.</i>  <i>E0 / 0.</i> <br><img src="https://habrastorage.org/webt/rm/sx/pq/rmsxpqgca2wmuhhcu5mcnvcth7y.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  <i>Linkmeup_R2.</i>  <i>E0 / 0</i> <br><img src="https://habrastorage.org/webt/yt/9q/gv/yt9qgv2qcqun9rpr8me4nuyghym.png" width="600"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pcapng</a></i> <br><br>  Mulai sekarang, semua yang datang ke antarmuka ini akan diklasifikasikan sesuai dengan aturan yang dikonfigurasi. <br><br><hr><br><h2>  Menandai di dalam perangkat </h2><br>  Sekali lagi: di pintu masuk ke klasifikasi DS-domain dapat terjadi MF, Interface-based atau BA. <br>  Antara node dari domain DS, paket di header membawa tanda tentang kelas layanan yang diperlukan dan diklasifikasikan oleh BA. <br><br>  Terlepas dari metode klasifikasi, setelah itu, paket tersebut diberikan kelas batin di dalam perangkat, sesuai dengan yang diproses.  Header dihapus, dan paket telanjang (tidak ada) bergerak ke pintu keluar. <br>  Dan pada output, kelas dalam dikonversi ke bidang CoS dari header baru. <br><br>  Yaitu, Pos 1 ⇒ Klasifikasi ⇒ Kelas layanan internal ⇒ Pos 2. <br><br>  Dalam beberapa kasus, Anda perlu menampilkan bidang tajuk dari satu protokol di bidang tajuk lainnya, misalnya, DSCP di Kelas Lalu Lintas. <br><br>  Ini terjadi hanya melalui penandaan internal menengah. <br><br>  Misalnya, Header DSCP ⇒ Klasifikasi ⇒ Kelas Layanan Internal ⇒ Header Kelas Lalu Lintas. <br><br>  Secara formal, kelas batin dapat dipanggil sesuka Anda, atau hanya diberi nomor, dan mereka hanya memiliki antrian tertentu yang ditugaskan untuk mereka. <br><br>  Pada kedalaman yang kita selami dalam artikel ini, tidak peduli apa namanya, penting bahwa model perilaku spesifik dikaitkan dengan nilai-nilai spesifik bidang QoS. <br><br>  Jika kita berbicara tentang implementasi QoS tertentu, maka jumlah kelas layanan yang dapat disediakan perangkat tidak lebih dari jumlah antrian yang tersedia.  Seringkali ada delapan dari mereka (baik di bawah pengaruh IPP, atau kadang-kadang dengan perjanjian tidak tertulis).  Namun, tergantung pada vendor, perangkat, papan, mereka bisa lebih atau kurang. <br><br>  Artinya, jika ada 4 antrian, maka kelas layanan sama sekali tidak masuk akal untuk melakukan lebih dari empat. <br><br>  Mari kita bicarakan ini secara lebih rinci di bab perangkat keras. <br><br><div class="spoiler">  <b class="spoiler_title">Jika Anda masih benar-benar menginginkan sedikit kekhususan ...</b> <div class="spoiler_text"><blockquote>  Tabel di bawah ini mungkin tampak nyaman pada pandangan pertama pada hubungan antara bidang QoS dan kelas dalam, tetapi mereka agak menyesatkan dalam memanggil kelas-kelas nama PHB.  Namun, PHB adalah model perilaku seperti apa yang ditugaskan untuk lalu lintas kelas tertentu, yang namanya, secara kasar, adalah arbitrer. <br><br>  Oleh karena itu, lihat tabel di bawah ini dengan bagian skeptis (karena itu, di bawah spoiler). </blockquote><br>  <i>Pada contoh Huawei</i> .  Di sini, Service-Class adalah kelas paling dalam dari paket. <br><br>  Yaitu, jika BA diklasifikasikan pada input, maka nilai DSCP akan diterjemahkan ke dalam Kelas Layanan dan nilai Warna yang sesuai. <br><br><img src="https://habrastorage.org/webt/h-/xh/sp/h-xhspe0wg3zymljrw4fdcd8v-u.png" width="500"><br><br>  Perlu memperhatikan fakta bahwa banyak nilai DSCP tidak digunakan, dan paket dengan tanda seperti itu sebenarnya diproses sebagai BE. <br><br>  Berikut adalah tabel pencocokan mundur yang menunjukkan nilai DSCP apa yang akan ditetapkan untuk lalu lintas saat output ditandai ulang. <br><br><img src="https://habrastorage.org/webt/as/t4/49/ast449vrq3tmkbo_xhxoqmvayjm.png" width="500"><br><br>  Perhatikan bahwa hanya AF yang memiliki gradasi warna.  BE, EF, CS6, CS7 - semuanya berwarna Hijau. <br><br>  Ini adalah tabel untuk mengonversi IPP, Kelas Lalu Lintas MPLS, dan 802.1p bidang Ethernet ke kelas layanan internal. <br><br><img src="https://habrastorage.org/webt/d7/nz/up/d7nzupuudz6mpvapmunecfol43a.png" width="500"><br><br>  Dan kembali. <br><br><img src="https://habrastorage.org/webt/nc/qz/zr/ncqzzr58m-3acsu1gid9xkowfxy.png" width="500"><br><br>  Perhatikan bahwa informasi apa pun tentang prioritas penurunan biasanya hilang di sini. <br><br>  Ini harus diulang - ini hanya contoh spesifik dari kecocokan default dari vendor yang dipilih <i>secara acak</i> .  Bagi yang lain, ini mungkin berbeda.  Administrator dapat mengkonfigurasi kelas layanan dan PHB yang sangat berbeda di jaringan mereka. <br><br></div></div><br>  Dalam hal PHB, sama sekali tidak ada perbedaan apa yang digunakan untuk klasifikasi - DSCP, Traffic Class, 802.1p. <br><br>  Di dalam perangkat, mereka berubah menjadi kelas lalu lintas yang ditentukan oleh administrator jaringan. <br>  Artinya, semua tanda ini adalah cara untuk memberi tahu para tetangga tentang kelas layanan yang harus mereka tetapkan untuk paket ini.  Ini tentang seperti BGP Community, yang tidak berarti apa-apa sendiri, sampai kebijakan untuk menafsirkannya ditentukan pada jaringan. <br><br><hr><br><h2>  Rekomendasi IETF (Kategori Lalu Lintas, Kelas Layanan, dan Perilaku) </h2><br>  Standar tidak menstandarkan sama sekali di mana kelas layanan tertentu harus ada, bagaimana mengklasifikasikan dan melabeli mereka, dan PHB mana yang berlaku untuk mereka. <br><br>  Ini adalah berkat vendor dan administrator jaringan. <br><br>  Kami hanya memiliki 3 bit - kami gunakan sesuai keinginan. <br><br>  Ini bagus: <br><br><ul><li>  Setiap bagian dari besi (vendor) secara independen memilih mekanisme mana yang akan digunakan untuk PHB - tanpa pensinyalan, tidak ada masalah kompatibilitas. </li><li>  Administrator setiap jaringan dapat secara fleksibel mendistribusikan lalu lintas di antara kelas yang berbeda, memilih kelas itu sendiri dan PHB yang sesuai. </li></ul><br>  Ini buruk: <br><br><ul><li>  Pada batas-batas domain DS, masalah konversi muncul. </li><li>  Dalam kondisi kebebasan penuh untuk bertindak - ada yang di hutan, ada yang iblis. </li></ul><br>  Oleh karena itu, IETF pada tahun 2006 mengeluarkan manual pelatihan tentang cara mendekati diferensiasi layanan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 4594</a> ( <i>Pedoman Konfigurasi untuk Kelas Layanan DiffServ</i> ). <br><br>  Berikut ini adalah ringkasan singkat dari RFC ini. <br><br><h3>  Model Perilaku (PHB) </h3><br>  <b>DF - Penerusan Default</b> <br>  <i>Pengiriman standar.</i> <br>  Jika model lalu lintas tidak secara khusus ditetapkan sebagai model perilaku, itu akan diproses menggunakan Penerusan Default. <br><br>  Ini adalah Upaya Terbaik - perangkat akan melakukan apa saja yang mungkin, tetapi tidak menjamin apa pun.  Drops, disordering, keterlambatan tak terduga dan jitter mengambang adalah mungkin, tetapi ini tidak akurat. <br><br>  Model ini cocok untuk aplikasi yang tidak menuntut, seperti unduhan surat atau file. <br>  By the way, ada PHB dan bahkan kurang pasti - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Upaya Lebih Rendah</a> . <br><br>  <b>AF - Penerusan Tertanggung</b> <br>  <i>Pengiriman terjamin.</i> <br>  Ini adalah peningkatan BE.  Beberapa jaminan muncul di sini, misalnya, band.  Tetes dan penundaan mengambang masih dimungkinkan, tetapi pada tingkat yang jauh lebih rendah. <br><br>  Model ini cocok untuk multimedia: Streaming, konferensi video, game online. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 2597</a> ( <i>Grup PHB Penerusan Tertanggung</i> ). <br><br>  <b>EF - Expedited Forwarding</b> <br>  <i>Pengiriman darurat.</i> <br>  Semua sumber daya dan prioritas terburu-buru di sini.  Ini adalah model untuk aplikasi yang tidak memerlukan kerugian, penundaan pendek, jitter stabil, tetapi mereka tidak serakah untuk band.  Sebagai, misalnya, telepon atau layanan emulasi kawat (CES - Circuit Emulation Service). <br><br>  Kerugian, gangguan, dan keterlambatan mengambang di EF sangat kecil kemungkinannya. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 3246</a> ( <i>PHB Ekspedisi Ekspedisi</i> ). <br><br>  <b>CS - Pemilih Kelas</b> <br>  Ini adalah perilaku yang dirancang untuk mempertahankan kompatibilitas dengan IP-Precedence dalam jaringan yang mampu DS. <br><br>  Kelas-kelas berikut ada di IPP: CS0, CS1, CS2, CS3, CS4, CS5, CS6, CS7. <br>  Tidak selalu untuk mereka semua ada PHB terpisah, biasanya ada dua atau tiga, dan sisanya hanya diterjemahkan ke dalam kelas DSCP terdekat dan dapatkan PHB yang sesuai. <br>  Jadi misalnya, paket berlabel CS 011000 dapat diklasifikasikan sebagai 011010. <br><br>  Dari CS, pasti hanya CS6, CS7, yang direkomendasikan untuk NCP - Protokol Kontrol Jaringan dan memerlukan PHB terpisah, yang disimpan dalam peralatan. <br><br>  Seperti EF, PHB CS6.7 dirancang untuk kelas yang memiliki latensi dan persyaratan kerugian yang sangat tinggi, tetapi agak toleran terhadap diskriminasi pita. <br>  Tugas PHB untuk CS6.7 adalah untuk menyediakan tingkat layanan yang menghilangkan tetesan dan penundaan bahkan dalam kasus kelebihan antarmuka, chip dan antrian. <br><hr><br><br>  Penting untuk dipahami bahwa PHB adalah konsep abstrak - dan faktanya PHB diimplementasikan melalui mekanisme yang tersedia pada peralatan nyata. <br><br>  Dengan demikian, PHB yang sama yang didefinisikan dalam domain DS dapat berbeda pada Juniper dan Huawei. <br><br>  Selain itu, PHB tunggal bukanlah serangkaian tindakan statis, misalnya, PHB AF dapat terdiri dari beberapa opsi yang berbeda dalam tingkat jaminan (band, keterlambatan yang dapat diterima). <br><br><hr><br><h3>  Kelas Layanan </h3><br>  IETF merawat para administrator dan mengidentifikasi kategori utama aplikasi dan kelas layanan mereka. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya tidak akan bertele-tele di sini, cukup masukkan beberapa piring dari Pedoman RFC ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kategori aplikasi: </font></font><br><br><img src="https://habrastorage.org/webt/an/hr/np/anhrnppkfmebfm7vaoarb1xv7s0.png" width="600"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persyaratan untuk karakteristik jaringan: </font></font><br><br><img src="https://habrastorage.org/webt/ih/5r/z2/ih5rz2jw4ifygst1mjgte9a_vc0.png" width="560"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan akhirnya, nama kelas yang disarankan dan nilai DSCP yang sesuai: </font></font><br><br><img src="https://habrastorage.org/webt/jg/rp/4k/jgrp4kzhhhvz1-zygrsiexieeyy.png" width="560"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan menggabungkan kelas-kelas di atas dengan cara yang berbeda (agar sesuai dengan 8 yang tersedia), Anda bisa mendapatkan solusi QoS untuk jaringan yang berbeda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mungkin yang paling umum adalah ini: </font></font><br><br><img src="https://habrastorage.org/webt/su/ft/ed/suftedkuzswznewqbj3uslcncru.png" width="560"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kelas DF (atau BE) menandai lalu lintas yang benar-benar tidak menuntut - ia menerima perhatian berdasarkan residual. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHB AF melayani kelas AF1, AF2, AF3, AF4. Mereka semua perlu menyediakan jalur, sehingga merugikan keterlambatan dan kerugian. Kerugian dikendalikan oleh bit Drop Precedence, itulah sebabnya mereka disebut AFxy, di mana x adalah kelas layanan dan y adalah Drop Precedence.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EF membutuhkan semacam jaminan band minimum, tetapi yang lebih penting - jaminan keterlambatan, jitter, dan tidak ada kerugian. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CS6, CS7 membutuhkan bandwidth yang lebih sedikit, karena itu adalah tetesan paket layanan di mana semburan masih mungkin terjadi (Pembaruan BGP, misalnya), tetapi kerugian dan penundaan tidak dapat diterima di dalamnya - apa gunanya BFD dengan timer 10 ms jika Hello menabrak 100 ms antrian? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, 4 kelas dari 8 yang tersedia diberikan di bawah AF. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan terlepas dari kenyataan bahwa mereka biasanya melakukan hal itu, saya ulangi bahwa ini hanya rekomendasi, dan tidak ada yang mencegah tiga kelas dalam domain DS Anda dari menetapkan EF dan hanya dua untuk AF.</font></font><br><br><hr><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ringkasan Klasifikasi </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di pintu masuk ke sebuah node, sebuah paket diklasifikasikan berdasarkan antarmuka, MF, atau pelabelannya (BA). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelabelan adalah nilai bidang DSCP di IPv4, Kelas Lalu Lintas di IPv6, dan di MPLS atau 802.1p di 802.1q. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada 8 kelas layanan yang menggabungkan berbagai kategori lalu lintas. Setiap kelas ditugaskan PHB sendiri, memenuhi persyaratan kelas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menurut rekomendasi IETF, kelas layanan berikut dibedakan: CS1, CS0, AF11, AF12, AF13, AF21, CS2, AF22, AF23, CS3, AF31, AF32, AF33, CS4, AF41, AF42, AF43, CS5, EF5, EF6, CS6, CS7 dalam meningkatkan pentingnya lalu lintas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dari mereka, Anda dapat memilih kombinasi 8, yang sebenarnya dapat dikodekan ke dalam bidang CoS. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kombinasi yang paling umum: CS0, AF1, AF2, AF3, AF4, EF, CS6, CS7 dengan 3 gradasi warna untuk AF.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap kelas ditugaskan PHB, yang ada 3 - Default Forwarding, Assured Forwarding, Expedited Forwarding dalam meningkatkan urutan keparahan. </font><font style="vertical-align: inherit;">Sedikit ke samping adalah Pemilih Kelas PHB. </font><font style="vertical-align: inherit;">Setiap PHB dapat bervariasi menurut parameter alat, tetapi lebih pada nanti.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada jaringan yang dibongkar, QoS tidak diperlukan, kata mereka. </font><font style="vertical-align: inherit;">Setiap masalah QoS diselesaikan dengan memperluas tautan, kata mereka. </font><font style="vertical-align: inherit;">Dengan Ethernet dan DWDM, kami tidak pernah menghadapi kemacetan garis, kata mereka. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mereka adalah mereka yang tidak mengerti apa itu QoS. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi kenyataan mengenai VPN di ILV.</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak di mana-mana ada optik. </font><font style="vertical-align: inherit;">RRL adalah realitas kita. </font><font style="vertical-align: inherit;">Terkadang pada saat kecelakaan (dan tidak hanya) di tautan radio sempit ingin merayapi semua lalu lintas jaringan.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semburan lalu lintas adalah kenyataan kita. </font><font style="vertical-align: inherit;">Ledakan lalu lintas jangka pendek mudah mengantri, memaksa untuk menjatuhkan paket yang sangat diperlukan.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telephony, konferensi video, game online adalah kenyataan kami. </font><font style="vertical-align: inherit;">Jika antrian setidaknya agak sibuk, penundaan mulai menari.</font></font></li></ol><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam praktik saya, ada contoh ketika telepon berubah menjadi kode Morse pada jaringan yang dimuat tidak lebih dari 40%. </font><font style="vertical-align: inherit;">Tandai ulang di EF untuk menyelesaikan masalah sebentar.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Saatnya berurusan dengan alat yang memungkinkan Anda untuk menyediakan layanan yang berbeda untuk kelas yang berbeda. </font></font><br><br><hr><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Alat PHB </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sebenarnya hanya ada tiga kelompok alat QoS yang secara aktif memanipulasi paket: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menghindari Kemacetan - apa yang harus dilakukan untuk tidak menjadi buruk. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Manajemen Kemacetan - apa yang harus dilakukan ketika sudah buruk. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pembatasan Nilai - bagaimana tidak menempatkan lebih banyak pada jaringan dari yang seharusnya, dan tidak melepaskan sebanyak yang mereka bisa terima. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tetapi mereka semua, pada umumnya, akan sia-sia jika bukan karena antrian. </font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5. Antrian </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di taman hiburan, Anda tidak dapat memberikan prioritas kepada seseorang jika Anda tidak mengatur antrian terpisah untuk mereka yang membayar lebih. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situasi yang sama di jaringan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika semua lalu lintas dalam satu antrian, Anda tidak akan dapat mengeluarkan paket penting dari tengahnya untuk memberikan prioritas kepada mereka. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu sebabnya, setelah klasifikasi, paket ditempatkan dalam antrian yang sesuai dengan kelas ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan kemudian satu antrian (dengan data suara) akan bergerak cepat, tetapi dengan pita terbatas, lainnya lebih lambat (streaming), tetapi dengan pita lebar, dan beberapa sumber daya akan berjalan sesuai dengan prinsip residual. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi dalam batas-batas setiap antrian terpisah aturan yang sama berlaku - Anda tidak dapat menarik paket dari tengah - hanya dari kepalanya.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap antrian memiliki panjang terbatas tertentu. Di satu sisi, ini ditentukan oleh keterbatasan perangkat keras, dan di sisi lain, tidak masuk akal untuk menyimpan paket dalam antrian terlalu lama. Paket VoIP tidak diperlukan jika ditunda selama 200 ms. TCP akan meminta penerusan, secara kondisional, setelah RTT berakhir (dikonfigurasi dalam sysctl). Karena itu, menjatuhkan tidak selalu buruk. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengembang dan perancang peralatan jaringan harus menemukan kompromi antara upaya untuk menyelamatkan paket selama mungkin dan, sebaliknya, untuk mencegah pemborosan bandwidth, mencoba mengirimkan paket yang tidak lagi diperlukan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam situasi normal, ketika antarmuka / chip tidak kelebihan beban, pemanfaatan buffer mendekati nol. Mereka menyerap semburan jangka pendek, tetapi ini tidak menyebabkan pengisian yang lama.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika ada lebih banyak lalu lintas daripada chip switching atau antarmuka keluaran dapat menangani, antrian mulai mengisi. </font><font style="vertical-align: inherit;">Dan pemanfaatan kronis di atas 20-30% sudah merupakan situasi yang perlu ditangani.</font></font><br><br><hr><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6. Menghindari Kemacetan </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam kehidupan setiap router, ada saatnya ketika antrian penuh. </font><font style="vertical-align: inherit;">Tempat meletakkan paket, jika tidak ada tempat untuk meletakkannya - itu saja, buffer sudah berakhir, dan tidak akan ada di sana, bahkan jika itu baik untuk dilihat, bahkan jika Anda membayar ekstra. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada dua cara: untuk membuang paket ini, atau mereka yang sudah mendapat skor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika sudah ada dalam antrian, maka pertimbangkan apa yang hilang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan jika yang ini, maka anggaplah dia tidak datang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dua pendekatan ini disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tail Drop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Head Drop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jatuhkan Ekor dan Jatuhkan Kepala </font></font></h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tail Drop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - mekanisme manajemen antrian yang paling sederhana - buang semua paket yang baru tiba yang tidak muat di buffer. </font></font><br><br><img src="https://habrastorage.org/webt/gu/qu/lv/guqulvedyuzoyytzzbybxrzua9g.png" width="500"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Head Drop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menjatuhkan paket yang telah antri untuk waktu yang sangat lama. Lebih baik membuangnya daripada menyimpan, karena kemungkinan besar itu tidak berguna. Tetapi paket yang lebih relevan yang tiba pada akhir antrian akan memiliki lebih banyak kesempatan untuk tiba tepat waktu. Plus, Head Drop memungkinkan Anda untuk tidak memuat jaringan dengan paket yang tidak perlu. Secara alami, paket tertua adalah paket yang ada di kepala antrian, maka itulah nama pendekatannya.</font></font><br><br><img src="https://habrastorage.org/webt/6h/0d/rq/6h0drqorglxgq9mjocqjm_bpwby.png" width="500"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Head Drop memiliki keuntungan lain yang tidak jelas - jika Anda menjatuhkan paket di awal antrian, penerima akan segera mencari tahu tentang kemacetan di jaringan dan memberi tahu pengirim. Dalam kasus Tail Drop, informasi tentang paket yang dijatuhkan akan mencapai, mungkin, ratusan milidetik kemudian - sampai diperoleh dari ekor garis ke kepalanya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kedua mekanisme bekerja dengan diferensiasi pada gilirannya. Faktanya, tidak perlu seluruh buffer penuh. Jika antrian kedua kosong, dan yang nol ke bola mata, maka hanya paket dari nol yang akan dibuang. </font></font><br><br><img src="https://habrastorage.org/webt/as/nl/l7/asnll7xgflrxk_mvdxgmglgf2fm.png" width="400"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tail Drop dan Head Drop dapat bekerja secara bersamaan.</font></font><br><br><img src="https://habrastorage.org/webt/bn/n1/wv/bnn1wvl9qene8f4xysetig6hemg.png" width="500"><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tail dan Head Drop adalah “Dahi” yang Menghindari Kemacetan. Anda bahkan dapat mengatakan - ini adalah ketidakhadirannya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami tidak melakukan apa pun hingga antrian 100% penuh. Dan setelah itu, kita mulai membuang semua paket yang baru tiba (atau ditunda dalam waktu lama). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda tidak perlu melakukan apa pun untuk mencapai tujuan, maka di suatu tempat ada nuansa. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan nuansa ini adalah TCP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingat ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lebih dalam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sangat dalam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) bagaimana TCP bekerja - kita berbicara tentang implementasi modern. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada Sliding Window (Sliding Window atau </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rwnd - Reciever's Advertised Window</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), yang dikendalikan oleh penerima, memberi tahu pengirim berapa yang dapat dikirim. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan ada jendela kelebihan ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CWND - Congestion Window</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), yang merespons masalah jaringan dan dikendalikan oleh pengirim. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proses transfer data dimulai dengan awal yang lambat ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slow Start</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dengan peningkatan eksponensial dalam CWND. Dengan setiap segmen yang dikonfirmasi, 1 ukuran MSS ditambahkan ke CWND, yaitu, pada kenyataannya, itu berlipat ganda dalam waktu yang sama dengan RTT (data di sana, ACK kembali) (Pidato tentang Reno / NewReno).</font></font><br><br>  Sebagai contoh <br><br><img src="https://habrastorage.org/webt/5n/5a/nd/5n5andpbm8lvmyeaio0i565c_ek.png" width="200"><br><br> <u><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertumbuhan </font><u><font style="vertical-align: inherit;">eksponensial</font></u><font style="vertical-align: inherit;"> berlanjut ke nilai yang disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssthreshold</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Slow Start Threshold), yang ditentukan dalam konfigurasi TCP pada host. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selanjutnya, </font><font style="vertical-align: inherit;">pertumbuhan </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linier</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1 / CWND dimulai untuk setiap segmen yang dikonfirmasi sampai itu bertumpu pada RWND atau kerugian dimulai (kerugian dikonfirmasi dengan konfirmasi ulang (Duplikasi ACK) atau tidak ada konfirmasi sama sekali). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segera setelah kehilangan segmen terdeteksi, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP Backoff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terjadi </font><font style="vertical-align: inherit;">- TCP secara drastis mengurangi jendela, sebenarnya mengurangi kecepatan pengiriman - dan mekanisme </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemulihan Cepat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dimulai </font><font style="vertical-align: inherit;">:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengirim segmen yang hilang (Pengiriman Cepat), </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jendela digandakan, </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nilai ssthreshold juga menjadi sama dengan setengah dari jendela yang tercapai, </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pertumbuhan </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linear</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dimulai lagi </font><font style="vertical-align: inherit;">sampai kerugian pertama,</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ulangi </font></font></li></ol><br><img src="https://habrastorage.org/webt/of/0p/ar/of0park6tnishwa25_v_dgzwaya.png" width="700"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kehilangan bisa berarti kehancuran total segmen jaringan dan kemudian menganggap bahwa itu hilang, atau kemacetan di telepon (baca buffer overflow dan buang segmen dari sesi ini). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah metode TCP untuk memaksimalkan pemanfaatan bandwidth yang tersedia dan menangani kemacetan. </font><font style="vertical-align: inherit;">Dan itu cukup efektif. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, apa yang menyebabkan Drop Drop?</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Katakanlah melalui router terletak jalur ribuan sesi TCP. </font><font style="vertical-align: inherit;">Di beberapa titik, lalu lintas sesi mencapai 1,1 Gb / s, kecepatan antarmuka keluaran - 1 Gb / s.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lalu lintas datang lebih cepat dari daun, buffer diisi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vsklyan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tail Drop dinyalakan sampai operator mengeluarkan beberapa paket dari antrian. </font></font></li><li>           Fast Recovery (    Slow Start). </li><li>    ,  , Tail Drop . </li><li>   TCP-  ,          . </li><li>  . </li><li> Fast Recovery/Slow Start. </li><li> . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelajari lebih lanjut tentang perubahan mekanisme TCP di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 2001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP Slow Start, Congestion Avoidance, Fast Retransmit, dan Fast Recovery Algorithms</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah ilustrasi khas dari situasi yang disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Global TCP Synchronization</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><img src="https://habrastorage.org/webt/wr/co/oq/wrcooqd2fjrix9jbimh-8si97h4.png" width="500"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Global</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> karena banyak sesi yang dibuat melalui node ini menderita. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sinkronisasi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena mereka menderita pada saat bersamaan. Dan situasinya akan diulang sampai ada kelebihan. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - karena UDP, yang tidak memiliki mekanisme kontrol kemacetan, tidak terpengaruh olehnya.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada hal buruk yang akan terjadi dalam situasi ini jika tidak menyebabkan penggunaan strip yang tidak optimal - celah di antara gigi gergaji - uang yang terbuang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah kedua adalah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP Starvation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - TCP depletion. Sementara TCP melambat untuk mengurangi beban (jangan cerdik - pertama-tama, agar dapat benar-benar mengirimkan data kami), UDP, semua penderitaan moral ini secara umum oleh datagram - mengirimkan sebanyak mungkin. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, jumlah lalu lintas TCP berkurang, dan UDP tumbuh (mungkin), siklus Loss - Fast Recovery berikutnya terjadi pada batas bawah. UDP membutuhkan ruang. Jumlah total lalu lintas TCP turun.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara mengatasi masalah, lebih baik menghindarinya. </font><font style="vertical-align: inherit;">Mari kita coba mengurangi beban sebelum mengisi antrian menggunakan Fast Recovery / Slow Start, yang baru saja melawan kita.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RED - Deteksi Dini Acak </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi bagaimana jika kita mengambil dan mengoleskan tetes pada beberapa bagian buffer? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara relatif, mulailah menjatuhkan paket acak ketika antrian 80% penuh, memaksa beberapa sesi TCP untuk mengurangi jendela dan, karenanya, kecepatan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan jika antriannya 90% penuh, kita mulai secara acak menjatuhkan 50% dari paket. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">90% - probabilitas tumbuh hingga Tail Drop (100% dari paket baru dibuang). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mekanisme yang menerapkan manajemen antrian seperti itu disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manajemen Antrian AQM - Adaptif (atau Aktif).</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inilah cara kerja </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deteksi Dini</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - memperbaiki potensi kelebihan; </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acak</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - buang paket secara acak.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terkadang mereka mendekode RED (menurut saya, secara semantik lebih tepat), seperti Random Early Discard. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara grafis, tampilannya seperti ini: </font></font><br><br><img src="https://habrastorage.org/webt/1n/zs/5v/1nzs5vsexsokkaepdxe_mo-klsg.png" width="600"><br><br><img src="https://habrastorage.org/webt/lp/rl/m7/lprlm7iiurfwklhdnun20iqdoci.png" width="500"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sampai buffer penuh 80%, paket tidak dibuang sama sekali - probabilitasnya 0%. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dari 80 hingga 100 paket mulai dibuang, dan semakin banyak mengisi antrian. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi persentasenya tumbuh dari 0 menjadi 30. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efek samping dari RED adalah bahwa sesi-sesi TCP yang agresif lebih cenderung melambat, hanya karena ada banyak paket dan mereka lebih cenderung untuk dijatuhkan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketidakefisienan menggunakan strip RED teratasi dengan menumpulkan bagian yang jauh lebih kecil dari sesi tanpa menyebabkan penurunan serius antar gigi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tepat karena alasan yang sama, UDP tidak dapat menempati semuanya.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WRED - Deteksi Dini Acak Tertimbang </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi pada sidang semua, mungkin, masih </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MENULIS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pembaca linkmeup yang cerdik telah menyarankan bahwa ini adalah RED yang sama, tetapi berbobot secara bergantian. Dan dia tidak benar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RED beroperasi dalam antrian yang sama. Tidak masuk akal untuk melihat kembali ke EF jika BE penuh. Dengan demikian, menimbang secara bergantian tidak akan membawa apa-apa. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini Drop Precedence hanya berfungsi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan dalam antrian yang sama, paket dengan prioritas drop yang berbeda akan memiliki kurva yang berbeda. Semakin rendah prioritas, semakin besar kemungkinan akan dibanting. </font></font><br><br><img src="https://habrastorage.org/webt/ef/rg/_v/efrg_vx4xacb4uwjrkvcdutemho.png" width="600"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada tiga kurva di sini: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merah - lalu lintas kurang prioritas (dalam hal menjatuhkan), kuning - lebih, hijau - maksimum.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lalu lintas merah mulai dibuang ketika buffer 20% penuh, dari 20 hingga 40 turun menjadi 20%, lalu Tail Drop. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kuning mulai nanti - dari 30 hingga 50, dibuang hingga 10%, lalu - Tail Drop. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hijau adalah yang paling rentan: dari 50 hingga 100, ia tumbuh dengan lancar hingga 5%. Berikutnya adalah Drop Tail. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam kasus DSCP, ini bisa AF11, AF12 dan AF13, masing-masing hijau, kuning dan merah. </font></font><br><br><img src="https://habrastorage.org/webt/jv/jm/9q/jvjm9qul8wyhrhncvx8iylnbl5s.png" width="600"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sangat penting di sini bahwa ia bekerja dengan TCP dan sama sekali tidak berlaku untuk UDP. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atau aplikasi menggunakan UDP mengabaikan kerugian, seperti dalam hal telepon atau streaming video, dan ini berdampak negatif pada apa yang dilihat pengguna.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atau aplikasi itu sendiri mengontrol pengiriman dan meminta Anda mengirim ulang paket yang sama. Namun, tidak perlu meminta sumber untuk menurunkan laju transmisi. Dan alih-alih mengurangi beban, peningkatan adalah karena transmisi ulang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itulah sebabnya hanya Tail Drop yang digunakan untuk EF. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk CS6, CS7, Tail Drop juga digunakan, karena tidak ada kecepatan tinggi yang diasumsikan dan WRED tidak akan menyelesaikan apa pun. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk AF, WRED diterapkan. AFxy, di mana x adalah kelas layanan, yaitu, antrian tempat ia jatuh, dan y adalah prioritas drop - warna yang sama. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk BE, keputusan dibuat berdasarkan lalu lintas yang berlaku dalam antrian ini.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam satu router, label internal paket khusus digunakan, berbeda dari yang membawa header. </font><font style="vertical-align: inherit;">Oleh karena itu, MPLS dan 802.1q, di mana tidak mungkin untuk menyandikan Drop Precedence, dapat diproses dalam antrian dengan prioritas penurunan yang berbeda. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai contoh, paket MPLS datang ke sebuah node, itu tidak menanggung pelabelan Drop Precedence, namun, menurut hasil pemolesan, itu berubah menjadi kuning dan dapat dibuang sebelum ditempatkan dalam antrian (yang dapat ditentukan oleh bidang Kelas Lalu Lintas). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perlu diingat bahwa seluruh pelangi ini hanya ada di dalam simpul. </font><font style="vertical-align: inherit;">Tidak ada konsep warna di garis antara tetangga. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meskipun dimungkinkan, tentu saja, untuk menyandikan warna di bagian Drop Precedence dari DSCP.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Drops juga dapat muncul di jaringan yang dibongkar, di mana kelihatannya tidak ada antrian yang melimpah. </font></font> Bagaimana? <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alasan untuk ini mungkin semburan singkat - semburan - lalu lintas. </font><font style="vertical-align: inherit;">Contoh paling sederhana - 5 aplikasi pada saat yang sama memutuskan untuk mentransfer lalu lintas ke satu host ujung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contohnya lebih rumit - pengirim terhubung melalui antarmuka 10 Gb / s, dan penerima adalah 1 Gb / s. </font><font style="vertical-align: inherit;">Lingkungan itu sendiri memungkinkan Anda untuk membuat paket lebih cepat pada pengirim. </font><font style="vertical-align: inherit;">Ethernet Flow Control penerima meminta host terdekat untuk memperlambat, dan paket mulai menumpuk di buffer.</font></font><br></blockquote><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nah, apa yang harus dilakukan ketika semuanya memburuk? </font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7. Manajemen Kemacetan </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika semuanya buruk, prioritas pemrosesan harus diberikan pada lalu lintas yang lebih penting. Pentingnya setiap paket ditentukan pada tahap klasifikasi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi apa yang buruk? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak semua buffer harus tersumbat agar aplikasi mulai mengalami masalah. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh paling sederhana adalah paket suara, yang berkerumun di sekitar paket besar paket besar aplikasi yang mengunduh file. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini akan meningkatkan penundaan, merusak jitter, dan mungkin menyebabkan tetes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, kami memiliki masalah dengan menyediakan layanan berkualitas tanpa adanya kemacetan yang sebenarnya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah ini dirancang untuk menyelesaikan mekanisme Manajemen Kemacetan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lalu lintas aplikasi yang berbeda dibagi menjadi antrian, seperti yang kita lihat di atas.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi hanya sebagai hasilnya, semuanya harus kembali bergabung menjadi satu antarmuka. </font><font style="vertical-align: inherit;">Serialisasi masih terjadi secara berurutan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara antrian yang berbeda mengelola untuk memberikan tingkat layanan yang berbeda? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hapus paket dari antrian yang berbeda dengan cara yang berbeda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispatcher terlibat dalam hal ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami akan mempertimbangkan mayoritas pengirim hari ini, dimulai dengan yang paling sederhana:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FIFO - hanya satu baris, semuanya dalam BE, C - ketidakadilan. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PQ - jalan menuju oligarki, antek memberi jalan. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FQ - semua sama. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DWRR - semua sama, tetapi beberapa lebih merata. </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FIFO - First In, First Out </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasus paling sederhana, sebenarnya tidak adanya QoS, adalah bahwa semua lalu lintas ditangani dengan cara yang sama - dalam satu antrian. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket meninggalkan antrian persis sesuai urutan mereka sampai di sana, maka namanya: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pertama kali dimasukkan - pertama dan kiri</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIFO bukanlah pengirim dalam arti penuh kata, atau mekanisme DiffServ secara umum, karena ia tidak benar-benar memisahkan kelas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika antrian mulai terisi, penundaan dan jitter mulai tumbuh, Anda tidak dapat mengelolanya karena Anda tidak dapat menarik paket penting dari tengah antrian. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sesi TCP agresif dengan ukuran paket 1.500 byte dapat menempati seluruh antrian, menyebabkan paket suara kecil menderita. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di FIFO, semua kelas bergabung ke CS0.</font></font><br><br><img src="https://habrastorage.org/webt/am/-w/0k/am-w0kosnvx3ucg3qpdbnou1blk.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, terlepas dari semua kekurangan ini, beginilah cara kerja Internet sekarang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagian besar vendor FIFO sekarang menjadi dispatcher default dengan satu antrian untuk semua lalu lintas transit dan satu lagi untuk paket layanan yang dihasilkan secara lokal. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sederhana, sangat murah. Jika salurannya lebar dan ada sedikit lalu lintas, semuanya baik-baik saja. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inti dari gagasan bahwa QoS - untuk orang miskin - perluas band, dan pelanggan akan puas, dan gaji Anda akan meningkat beberapa kali lipat. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hanya dengan cara ini peralatan jaringan pernah bekerja. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi segera dunia dihadapkan dengan fakta bahwa itu tidak akan berhasil.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan tren jaringan konvergensi, menjadi jelas bahwa berbagai jenis lalu lintas (layanan, suara, multimedia, selancar internet, berbagi file) memiliki persyaratan jaringan yang berbeda secara fundamental. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIFO tidak cukup, sehingga mereka membuat beberapa antrian dan mulai menghasilkan skema penjadwalan lalu lintas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, FIFO tidak pernah meninggalkan kehidupan kita: di dalam setiap antrian, paket selalu diproses sesuai dengan prinsip FIFO.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PQ - Antrian Prioritas </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mekanisme kedua yang paling rumit dan upaya untuk membagi layanan ke dalam kelas adalah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antrian prioritas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lalu lintas sekarang ditata dalam beberapa antrian sesuai dengan prioritas kelasnya (misalnya, meskipun tidak harus, BE yang sama, AF1-4, EF, CS6-7). Dispatcher melewati antrian satu demi satu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertama, ia melompati semua paket dari antrian prioritas tertinggi, lalu dari kurang, lalu dari kurang.</font></font> Dan dalam lingkaran. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispatcher tidak mulai mengambil paket prioritas rendah sampai antrian prioritas tinggi kosong. </font></font><br><br><img src="https://habrastorage.org/webt/4g/l0/sl/4gl0slzp0q6kybjw14xpvvs5xt0.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika, pada saat memproses paket prioritas rendah, sebuah paket tiba dalam antrian prioritas yang lebih tinggi, operator akan beralih ke paket itu dan hanya setelah mengosongkannya kembali ke paket lainnya. </font></font><br><br><img src="https://habrastorage.org/webt/xm/qk/v1/xmqkv1cbt_uidd4yj1nntt2jehq.gif"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PQ bekerja hampir sebaik FIFO. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini bagus untuk jenis lalu lintas seperti paket protokol dan suara, di mana penundaan sangat penting dan total volume tidak terlalu besar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nah, Anda harus mengakui, Anda tidak boleh menyimpan BFD Halo karena fakta bahwa beberapa potongan video besar dari YouTube telah datang? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi di sini letak kurangnya PQ - jika antrian prioritas dimuat dengan lalu lintas, operator tidak akan pernah beralih ke yang lain sama sekali.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan jika beberapa Dokter Jahat, dalam mencari metode menaklukkan dunia, memutuskan untuk menandai semua lalu lintas jahatnya dengan tanda hitam tertinggi, semua yang lain akan dengan patuh menunggu dan kemudian dibuang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak perlu berbicara tentang jalur yang dijamin untuk setiap jalur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antrian prioritas tinggi dapat dipotong oleh kecepatan lalu lintas yang diproses di dalamnya. </font><font style="vertical-align: inherit;">Maka orang lain tidak akan kelaparan. </font><font style="vertical-align: inherit;">Namun, mengendalikan ini tidak mudah.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mekanisme berikut berjalan melalui semua antrian pada gilirannya, mengambil dari mereka sejumlah data, sehingga memberikan kondisi yang lebih jujur. </font><font style="vertical-align: inherit;">Tetapi mereka melakukannya secara berbeda.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Antrian FQ-Fair </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pesaing berikutnya untuk peran dispatcher yang ideal adalah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mekanisme antrian yang adil</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FQ - Antrian yang Adil </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sejarahnya dimulai pada tahun 1985, ketika John Nagle menyarankan untuk membuat antrian untuk setiap aliran data. Dalam semangat, ini dekat dengan pendekatan IntServ dan mudah dijelaskan oleh fakta bahwa gagasan kelas layanan, seperti DiffServ, tidak ada saat itu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FQ mengekstraksi jumlah data yang sama dari setiap antrian secara berurutan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kejujuran terletak pada kenyataan bahwa operator </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beroperasi dengan jumlah </font><b><font style="vertical-align: inherit;">paket, tetapi dengan jumlah bit</font></b><font style="vertical-align: inherit;"> yang dapat ditransmisikan dari setiap antrian. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi aliran TCP yang agresif tidak dapat membanjiri antarmuka, dan semua orang mendapat peluang yang sama. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara teori. FQ tidak pernah diimplementasikan dalam praktik sebagai mekanisme untuk mengirimkan antrian dalam peralatan jaringan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada tiga kelemahan:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yang pertama - jelas - sangat mahal - untuk memulai antrian untuk setiap aliran, menghitung bobot setiap paket dan selalu khawatir tentang bit yang akan dilewati dan ukuran paket. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yang kedua - kurang jelas - semua utas mendapatkan peluang yang sama dalam hal bandwidth. Dan jika saya ingin tidak setara? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yang ketiga - tidak jelas - kejujuran FQ adalah mutlak: setiap orang memiliki penundaan yang sama, tetapi ada utas yang lebih penting daripada penundaan daripada band. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalnya, di antara 256 aliran ada yang bersuara, yang berarti masing-masing hanya akan mencapai dari 256 utas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan apa yang harus dilakukan dengan mereka tidak jelas. </font></font><br><br><img src="https://habrastorage.org/webt/o_/cg/au/o_cgau4ggmorq1cj28jn3hf26iq.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini Anda dapat melihat bahwa karena ukuran besar paket di tahap ke-3, dalam dua siklus pertama kami memproses satu paket dari dua paket pertama.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskripsi mekanisme bit-by-bit dari Round Robin dan GPS sudah di luar cakupan artikel ini, dan saya merujuk pembaca ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">studi independen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WFQ - Antrian Cukup Tertimbang </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kelemahan kedua dan sebagian ketiga dari FQ mencoba untuk menutup WFQ, yang diterbitkan pada tahun 1989. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap antrian diberkahi dengan berat dan, karenanya, hak untuk memberikan lalu lintas dalam beberapa berat untuk satu siklus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berat dihitung berdasarkan dua parameter: masih relevan kemudian IP Precedence dan panjang paket. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam konteks WFQ, semakin berat, semakin buruk. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oleh karena itu, semakin tinggi IP Precedence, semakin rendah berat paket. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semakin kecil ukuran paket, semakin kecil bobotnya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan demikian, paket kecil prioritas tinggi mendapatkan sumber daya terbanyak, sementara raksasa prioritas rendah menunggu.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam ilustrasi di bawah, paket menerima bobot sedemikian sehingga pada awalnya satu paket dari antrian pertama dilewati, kemudian dua dari yang kedua, lagi dari yang pertama dan hanya kemudian yang ketiga diproses. Jadi, misalnya, bisa terjadi jika ukuran paket di tahap kedua relatif kecil. </font></font><br><br><img src="https://habrastorage.org/webt/dd/z9/v7/ddz9v7nahrtmewfrul4mbflc5b0.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang rekayasa keras WFQ, dengan waktu penyelesaian paketnya, waktu virtual dan Teorema Wig, Anda dapat membaca dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumen warna yang aneh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, ini tidak menyelesaikan masalah pertama dan ketiga. Pendekatan Flow Based sama merepotkannya, dan aliran yang membutuhkan penundaan singkat dan jitter stabil tidak menerimanya.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, ini tidak mencegah WFQ digunakan di beberapa perangkat Cisco (sebagian besar sudah tua). </font><font style="vertical-align: inherit;">Ada hingga 256 antrian di mana utas ditempatkan berdasarkan hash header mereka. </font><font style="vertical-align: inherit;">Kompromi antara paradigma Berbasis Aliran dan sumber daya yang terbatas.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CBWFQ - WFQ Berbasis Kelas </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBWFQ membuat pendekatan untuk masalah kompleksitas dengan munculnya DiffServ. Agregat Perilaku mengklasifikasikan semua kategori lalu lintas ke dalam 8 kelas dan, karenanya, harus antri. Ini memberinya nama dan antrian sangat disederhanakan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berat dalam CBWFQ telah memperoleh arti yang berbeda. Bobot ditugaskan ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kelas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (bukan utas) secara manual dalam konfigurasi atas permintaan administrator, karena bidang DSCP sudah digunakan untuk klasifikasi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, DSCP menentukan antrian mana yang akan dimasukkan, dan bobot yang dikonfigurasi - berapa banyak jalur yang tersedia untuk antrian ini.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yang paling penting, ini secara tidak langsung membuat hidup dan latensi rendah mengalir sedikit lebih mudah, yang sekarang dikumpulkan menjadi satu (dua-tiga ...) antrian dan menerima poin tinggi mereka jauh lebih sering. </font><font style="vertical-align: inherit;">Hidup menjadi lebih baik, tetapi masih tidak baik - tidak ada jaminan sama sekali - secara umum, di WFQ semuanya masih sama dalam hal keterlambatan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan kebutuhan untuk memonitor ukuran paket secara konstan, fragmentasi dan defragmentasi, belum hilang.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CBWFQ + LLQ - Antrian Latensi Rendah </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pendekatan terakhir, puncak dari pendekatan sedikit demi sedikit, adalah penyatuan CBWFQ dengan PQ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salah satu antrian menjadi yang disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LLQ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (antrian latensi rendah), dan sementara semua antrian lainnya diproses oleh manajer CBWFQ, manajer PQ berjalan antara LLQ dan yang lainnya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, sementara ada paket di LLQ, antrian yang tersisa sedang menunggu, penundaan mereka meningkat. </font><font style="vertical-align: inherit;">Segera setelah paket di LLQ habis, kami pergi untuk memproses sisanya. </font><font style="vertical-align: inherit;">Paket muncul di LLQ - mereka lupa sisanya, dikembalikan ke sana. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIFO juga berfungsi di dalam LLQ, jadi Anda tidak harus mendorong semuanya tanpa sampai di sana, meningkatkan pemanfaatan buffer dan menunda pada saat yang sama. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun demikian, agar antrian non-prioritas tidak kelaparan, ada baiknya untuk menetapkan batas bandwidth dalam LLQ. </font></font><br><br><img src="https://habrastorage.org/webt/c6/4m/vt/c64mvts-kr2ij0o_zf2kfxy2cbu.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, domba penuh dan serigala aman.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RR - Round-Robin </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bergandengan tangan dengan FQ dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yang satu jujur, tapi tidak sederhana. </font><font style="vertical-align: inherit;">Yang lainnya justru sebaliknya. </font></font><br><br><img src="https://habrastorage.org/webt/8p/nh/de/8pnhdeko9l5nkiss6mbtxbg9jvk.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RR melewati antrian, mengekstraksi jumlah paket yang sama dari mereka. </font><font style="vertical-align: inherit;">Pendekatan ini lebih primitif daripada FQ, dan karena itu tidak jujur ​​dalam kaitannya dengan berbagai aliran. </font><font style="vertical-align: inherit;">Sumber agresif dapat dengan mudah membanjiri strip dengan paket berukuran 1500 byte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, itu sangat sederhana untuk diterapkan - Anda tidak perlu mengetahui ukuran paket dalam antrian, memecahnya, dan kemudian mengumpulkannya kembali. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, ketidakadilannya dalam alokasi strip memblokir jalannya ke dunia - di dunia jaringan, Round-Robin murni tidak diimplementasikan.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WRR - Robin Round Tertimbang </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nasib yang sama adalah dengan WRR, yang menambah bobot antrian berdasarkan IP Precedence. </font><font style="vertical-align: inherit;">Di WRR, tidak ada jumlah paket yang sama diambil, tetapi kelipatan dari berat antrian. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adalah mungkin untuk memberikan bobot lebih kepada antrian dengan paket yang lebih kecil, tetapi untuk melakukan ini secara dinamis tidak mungkin.</font></font><br><br><img src="https://habrastorage.org/webt/lx/4b/an/lx4bancel1tl9stwbeay0s6n1ma.png" width="800"><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DWRR - Round Round Weighted Defisit </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan tiba-tiba, pendekatan yang sangat aneh pada tahun 1995 diusulkan oleh M. Shreedhar dan G. Varghese. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap baris memiliki batas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kredit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terpisah </font><font style="vertical-align: inherit;">dalam bit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika melewati dari antrian, banyak paket dikeluarkan karena ada cukup kredit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ukuran paket di kepala antrian dikurangi dari jumlah pinjaman. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika perbedaannya lebih besar dari nol, paket ini dihapus dan yang berikutnya dicentang. Jadi sampai selisihnya kurang dari nol. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika bahkan paket pertama tidak memiliki kredit yang cukup, well, sayang sekali, aliran lumpur, dia tetap dalam antrian. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebelum lulus berikutnya, kredit setiap baris dinaikkan dengan jumlah tertentu, yang disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kuantum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk antrian yang berbeda, kuantum berbeda - semakin besar band yang perlu Anda berikan, semakin besar kuantum. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan demikian, semua antrian menerima bandwidth yang dijamin, terlepas dari ukuran paket di dalamnya. </font></font><br><br><img src="https://habrastorage.org/webt/vr/hv/vk/vrhvvk-1opimw_vofynmrkosbv8.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dari penjelasan di atas, tidak akan jelas bagi saya cara kerjanya.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari menggambar langkah-langkah ...</font></font></b> <div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mari kita menganalisis kasus bola: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DRR (tanpa W), </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4 baris </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada tanggal 0, semua paket masing-masing 500 byte, </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pada tanggal 1 - 1000 masing-masing </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pada tanggal 2 hingga 1500, </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dan di ke-3 terletak satu sosis untuk 4000, </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quantum - 1600 byte. </font></font></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/64d/911/64e/64d91164edc5867e9009f54de10a50da.png"><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Siklus 1 </font></font></h5><br> <b> 1.  0</b> <br>   ,     1600  () <br>    0- .  : <br>      —  (1600 — 500 = 1100). <br>  —  —  (1100 — 500 = 600). <br>  —  —  (600 — 500 = 100). <br>  —    (100 — 500 = -400).    . <br>   — 100 . <br><br><img src="https://habrastorage.org/webt/9y/4x/al/9y4xalhqrwwayufvjfcxlfevl20.png"><br><br> <b> 1.  1</b> <br>    —  (1600 — 1000 = 600). <br>    (600 — 1000 = -400).    . <br>   — 600 . <br><br><img src="https://habrastorage.org/webt/yw/mr/qh/ywmrqhm_deusdb04dez-3gjermc.png"><br><br> <b> 1.  2</b> <br>    —  (1600 — 1500 = 100). <br>    (100 — 1000 = -900).    . <br>   — 100 . <br><br><img src="https://habrastorage.org/webt/aj/el/k6/ajelk6xd9tpkl70r5hgt6q9q2u0.png"><br><br> <b> 1.  3</b> <br>     . (1600 — 4000 = -2400). <br>    . <br>   —   1600 . <br><br><img src="https://habrastorage.org/webt/jw/fo/3e/jwfo3eobllx5--quzb9qqt3zt0c.png"><br><br> ,       : <br><br><ul><li>  0 — 1500 </li><li>  1 — 1000 </li><li>  2 — 1500 </li><li>  3 — 0 </li></ul><br>  : <br><br><ul><li>  0 — 100 </li><li>  1 — 600 </li><li>  2 — 100 </li><li>  3 — 1600 </li></ul><br><h5>  2 </h5><br>          —   1600 . <br><br> <b> 2.  0</b> <br>    1700 (100 + 1600). <br>       —   (1700 — 3*500 = 200). <br>     . <br>   — 200 . <br><br><img src="https://habrastorage.org/webt/4z/di/2s/4zdi2se_gcciq1rbfkqqzzrumsa.png"><br><br> <b> 2.  1</b> <br>    2200 (600 + 1600). <br>       —   (2200 — 2*1000 = 200). <br>    . <br>   — 200 . <br><img src="https://habrastorage.org/webt/9e/1z/sl/9e1zsl63ko7jxqjjuv4snupl6kw.png"><br><br> <b> 2.  2</b> <br>    1700 (100 + 1600). <br>      —   (2200 — 1500 = 200). <br>   —  . <br>   — 200 . <br><br><img src="https://habrastorage.org/webt/xf/v5/ni/xfv5nifo1wqvxfrhjqlfoygdk1w.png"><br><br> <b> 2.  3</b> <br>    3200 (1600 + 1600). <br>       (3200 — 4000 = -800) <br>   — 3200 . <br><img src="https://habrastorage.org/webt/wn/wj/pe/wnwjpenhub6ir2d8vi69oxan8-s.png"><br><br> ,       : <br><br><ul><li>  0 — 3000 </li><li>  1 — 3000 </li><li>  2 — 3000 </li><li>  3 — 0 </li></ul><br>  : <br><br><ul><li>  0 — 200 </li><li>  1 — 200 </li><li>  2 — 200 </li><li>  3 — 3200 </li></ul><br><h5>  3 </h5><br>          — 1600 . <br><br> <b> 3.  0</b> <br>    1800 (200 + 1600). <br>        —   (1800 — 3*500 = 300). <br>     . <br>   — 300 . <br><br><img src="https://habrastorage.org/webt/lk/sk/tq/lksktqj1g_7q6m2p8jwq0olnfuw.png"><br><br> <b> 3.  1</b> <br>    1800 (200 + 1600). <br>    —  (1800 — 1000 = 800). <br>   — 800 . <br><br><img src="https://habrastorage.org/webt/fg/bd/jd/fgbdjdmydatamvpzxome7reb5pc.png"><br><br> <b> 3.  2</b> <br>    1800 (200 + 1600). <br>    —  (1800 — 1500 = 300). <br>   — 300 . <br><br><img src="https://habrastorage.org/webt/s1/a7/iv/s1a7iv6mpfy1kesgzuazx9hsgkk.png"><br><br> <b> 3.  3</b> <br>    3-  ! <br>    4800 (3200 + 1600). <br>    —  (4800 — 4000 = 800). <br>   — 800 . <br><br><img src="https://habrastorage.org/webt/fm/fh/tn/fmfhtnvh1utrr0yovddsambv_fe.png"><br><br> ,       : <br><br><ul><li>  0 — 4500 </li><li>  1 — 4000 </li><li>  2 — 4500 </li><li>  3 — 4000 </li></ul><br>  : <br><br><ul><li>  0 — 300 </li><li>  1 — 800 </li><li>  2 — 300 </li><li>  3 — 800 </li></ul><br><img src="https://habrastorage.org/webt/q5/q9/pj/q5q9pjzqa1be-uluk_eucxwga9w.png"><br><br>     DRR.          . <br><br>    ,  . <br><br><img src="https://habrastorage.org/webt/5l/6o/nd/5l6onduvx4djvafmxj7bhsoxwwm.gif"><br><br>  DWRR  DRR   ,        ,   ,     . <br><br><hr><br>     DRR,        —    ,   . <br><br>     :  ,     .           . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan DWRR, pertanyaannya tetap dengan jaminan keterlambatan dan jitter - bobot tidak menyelesaikannya dengan cara apa pun. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara teoritis, Anda dapat melakukan hal yang sama dengan CB-WFQ, menambahkan LLQ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, ini hanya salah satu skenario yang mungkin dari popularitas yang berkembang saat ini.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PB-DWRR - DWRR Berbasis Prioritas </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebenarnya, arus utama hari ini adalah PB-DWRR - Round Round Weighted Defisit Berbasis Prioritas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah DWRR jahat lama yang sama, di mana antrian lain ditambahkan - prioritas, di mana paket diproses dengan prioritas yang lebih tinggi. </font><font style="vertical-align: inherit;">Ini tidak berarti bahwa dia diberi strip yang lebih besar, tetapi paket akan diambil dari sana lebih sering. </font></font><br><br><img src="https://habrastorage.org/webt/wg/6g/ui/wg6guiijtoscyckwdwr49gkp0fq.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada beberapa pendekatan untuk mengimplementasikan PB-DWRR. </font><font style="vertical-align: inherit;">Dalam beberapa dari mereka, seperti dalam PQ, paket apa pun yang tiba di antrian prioritas segera dihapus. </font><font style="vertical-align: inherit;">Di tempat lain, ini diakses setiap kali operator bergerak di antara antrian. </font><font style="vertical-align: inherit;">Ketiga, kredit dan kuantum diperkenalkan untuk itu, sehingga antrian prioritas tidak dapat menekan seluruh strip. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentu saja, kami tidak akan menganalisisnya.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ringkasan singkat tentang mekanisme pengiriman </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selama beberapa dekade, umat manusia telah berusaha untuk memecahkan masalah yang paling sulit yaitu memastikan tingkat layanan yang tepat dan distribusi band yang adil. Antrian adalah alat utama, satu-satunya pertanyaan adalah bagaimana mendapatkan paket dari antrian, mencoba mendorong mereka ke dalam satu antarmuka. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dimulai dengan FIFO, ia menemukan PQ - suara itu bisa hidup berdampingan dengan selancar, tetapi tidak ada pertanyaan untuk menjamin band. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa FQ mengerikan, WFQ muncul, yang bekerja jika tidak per-aliran, maka hampir seperti itu. CB-WFQ datang ke masyarakat kelas, tetapi tidak menjadi lebih mudah. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai alternatif, ia mengembangkan RR. Itu menjadi WRR, dan kemudian DWRR. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan di kedalaman masing-masing dispatcher tinggal FIFO.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, seperti yang Anda lihat, tidak ada operator universal yang menangani semua kelas yang mereka butuhkan. </font><font style="vertical-align: inherit;">Itu selalu merupakan kombinasi dari operator, salah satunya memecahkan masalah memastikan keterlambatan, jitter dan kurangnya kerugian, dan yang lainnya mengalokasikan band. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBWFQ + LLQ atau PB-WDRR atau WDRR + PQ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada peralatan nyata, Anda dapat menentukan antrian mana yang akan diproses dengan operator mana. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBWFQ, WDRR dan turunannya adalah favorit saat ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PQ, FQ, WFQ, RR, WRR - kami tidak bersedih dan tidak ingat (kecuali, tentu saja, kami sedang mempersiapkan CCIE Clipper).</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jadi, operator dapat menjamin kecepatan, tetapi bagaimana cara membatasinya dari atas? </font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8. Batas kecepatan </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kebutuhan untuk membatasi kecepatan lalu lintas pada pandangan pertama sudah jelas - jangan biarkan klien keluar dari bandnya sesuai perjanjian. </font></font><br><br>  Ya<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi tidak hanya itu. Misalkan ada rentang RRL 620 Mb / s lebar terhubung melalui port 1Gb / s. Jika Anda memasukkan seluruh gigabit ke dalamnya, maka di suatu tempat di RRL, yang, kemungkinan besar, tidak tahu tentang antrian dan QoS, tetesan mengerikan yang bersifat acak akan dimulai, tidak terikat dengan prioritas sebenarnya dari lalu lintas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, jika Anda mengaktifkan pembentukan hingga 600 Mb / s pada router, maka EF, CS6, CS7 tidak akan dibuang sama sekali, dan di BE, AFx, pita dan tetesan akan didistribusikan sesuai dengan bobotnya. RRL akan mencapai 600 Mb / s dan kami akan mendapatkan gambar yang dapat diprediksi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh lain adalah Kontrol Penerimaan. Misalnya, dua operator sepakat untuk mempercayai tanda masing-masing, kecuali untuk CS7 - jika ada yang datang di CS7 - buang. Untuk CS6 dan EF - berikan antrian terpisah dengan jaminan keterlambatan dan tanpa kehilangan.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi, bagaimana jika pasangan licik itu mulai menuangkan torrents ke jalur ini? </font><font style="vertical-align: inherit;">Selamat tinggal Telephony. </font><font style="vertical-align: inherit;">Dan protokol kemungkinan besar akan berantakan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adalah logis dalam hal ini untuk setuju dengan mitra tentang strip. </font><font style="vertical-align: inherit;">Segala sesuatu yang sesuai dengan kontrak dilewati. </font><font style="vertical-align: inherit;">Apa yang tidak cocok - buang atau transfer ke antrian lain - BE, misalnya. </font><font style="vertical-align: inherit;">Dengan demikian, kami melindungi jaringan dan layanan kami. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada dua pendekatan yang berbeda secara mendasar untuk pembatasan kecepatan: memoles dan membentuk. </font><font style="vertical-align: inherit;">Mereka memecahkan satu masalah, tetapi dengan cara yang berbeda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertimbangkan perbedaan menggunakan contoh profil lalu lintas seperti itu:</font></font><br><br><img src="https://habrastorage.org/webt/5b/sj/st/5bsjstoglxkg7dspcxjrphdjsye.png" width="500"><br><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pemolisian lalu lintas </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemolisian membatasi kecepatan dengan menjatuhkan lalu lintas berlebih. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segala sesuatu yang melebihi nilai yang ditetapkan, poliser memotong dan membuang. </font></font><br><br><img src="https://habrastorage.org/webt/a3/dl/xa/a3dlxapkcptfnfejftde0qxycjc.png" width="500"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang dipotong dilupakan. Gambar menunjukkan bahwa paket merah tidak dalam lalu lintas setelah polyser. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan inilah tampilan profil yang dipilih setelah polyser: </font></font><br><br><img src="https://habrastorage.org/webt/jb/rw/52/jbrw52md7mynstgrt9-o1a1mo1s.png" width="500"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena tingkat keparahan tindakan yang diambil, ini disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hard Policing</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, ada beberapa kemungkinan tindakan lain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Polisi biasanya bekerja bersama dengan pengukur lalu lintas. Meteran warna tas, seperti yang Anda ingat, hijau, kuning atau merah. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan atas dasar warna ini, polyser mungkin tidak membuang paket, tetapi menempatkannya di kelas lain. Ini adalah tindakan lunak - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soft Policing</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini dapat diterapkan baik untuk lalu lintas masuk dan lalu lintas keluar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fitur khas dari polyser adalah kemampuan untuk menyerap ledakan lalu lintas dan menentukan kecepatan maksimum yang diijinkan berkat mekanisme Token Bucket. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kenyataannya, segala sesuatu yang tidak di atas nilai yang ditetapkan tidak terpotong - ia diizinkan untuk sedikit melampaui itu - ledakan singkat atau kelebihan kecil dari pita yang dialokasikan dilewati. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nama "Pemolisian" ditentukan oleh rasio alat yang agak ketat terhadap lalu lintas berlebih - membuang atau menurunkan pangkat ke kelas bawah.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pembentukan lalu lintas </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membentuk membatasi kecepatan dengan melindungi lalu lintas yang berlebih. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua lalu lintas masuk melewati buffer. Pembentuk menghapus paket dari buffer ini dengan kecepatan konstan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika tingkat kedatangan paket ke buffer lebih rendah dari output, mereka tidak ditunda dalam buffer - mereka terbang menembus. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan jika tingkat kedatangan lebih tinggi dari output, mereka mulai menumpuk. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kecepatan output selalu sama. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan demikian, ledakan lalu lintas ditambahkan ke buffer dan akan dikirim ketika mereka mencapai antrian. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oleh karena itu, bersama dengan penjadwalan dalam antrian, membentuk adalah alat kedua yang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berkontribusi terhadap keterlambatan total</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/webt/in/gc/vh/ingcvhgya0fzfiw2sxbeiix7hfw.png" width="500"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ilustrasi dengan jelas menunjukkan bagaimana paket tiba pada waktu buffer t2 tiba pada waktu t3 pada output. </font><font style="vertical-align: inherit;">t3-t2 adalah penundaan yang diperkenalkan oleh pembentuk. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembentuk biasanya diterapkan pada lalu lintas keluar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah bagaimana profil terlihat setelah pembentuk. </font></font><br><br><img src="https://habrastorage.org/webt/iv/b7/sl/ivb7slyamvreja97npdjyr3ctwk.png" width="500"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nama "Shaping" menunjukkan bahwa alat memberikan bentuk lalu lintas profil, melicinkannya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keuntungan utama dari pendekatan ini adalah penggunaan optimal dari band yang ada - daripada menjatuhkan lalu lintas yang berlebihan, kami menundanya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kelemahan utama adalah penundaan tak terduga - ketika buffer penuh, paket akan merana di dalamnya untuk waktu yang lama. </font><font style="vertical-align: inherit;">Karena itu, pembentukan tidak cocok untuk semua jenis lalu lintas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membentuk menggunakan mekanisme Bucket Leaky.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Membentuk versus polising </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pekerjaan polyser mirip dengan pisau, yang, bergerak di sepanjang permukaan minyak, memotong sisi tajam tubercle. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pekerjaan pembentuk mirip dengan roller, yang menghaluskan tubercles, mendistribusikannya secara merata di atas permukaan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembentuk mencoba untuk tidak menjatuhkan paket saat mereka buffered dengan biaya keterlambatan yang meningkat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemoles tidak menyebabkan penundaan, tetapi lebih mudah membuang paket. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplikasi yang tidak sensitif terhadap penundaan, tetapi yang kerugiannya tidak diinginkan, harus dibatasi pada pembentuk. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagi mereka yang terlambat menerima paket yang sama dengan yang hilang, lebih baik langsung menjatuhkannya - kemudian dipoles.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembentuk tidak mempengaruhi header paket dan nasib mereka di luar node, sementara setelah memoles perangkat dapat mengklasifikasikan kelas di header. </font><font style="vertical-align: inherit;">Sebagai contoh, pada input, paket memiliki kelas AF11, meteran mengecatnya kuning di dalam perangkat, pada output yang ditandai ulang kelasnya pada AF12 - pada node berikutnya ia akan memiliki kemungkinan menjatuhkan yang lebih tinggi.</font></font><br><br><img src="https://habrastorage.org/webt/za/y6/kh/zay6khb7cgviroz-zbumfppdtz8.png" width="600"><br><br><hr><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Berlatih Polishing dan membentuk </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skemanya sama: </font></font><br><br><img src="https://habrastorage.org/webt/zc/0o/zn/zc0ozndb8nmrqajljkf98pp79tk.png" width="900"><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file konfigurasi. </font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengamati gambar ini tanpa menerapkan batasan: </font></font><br><br><img src="https://habrastorage.org/webt/mg/nz/mv/mgnzmvc_36gtmgf5t3vi0wob1uk.png" width="900"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami akan melanjutkan sebagai berikut:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada antarmuka input, Linkmeup_R2 (e0 / 1) kami akan mengonfigurasi pemolesan - ini akan menjadi kontrol input. </font><font style="vertical-align: inherit;">Berdasarkan perjanjian tersebut, kami memberikan 10 Mb / s.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pada antarmuka output, Linkmeup_R4 (e0 / 2), konfigurasikan shaping pada 20 Mb / s. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita mulai dengan pembentuk pada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linkmeup_R4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cocokkan semuanya:</font></font><br><br><pre> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>-map match-<span class="hljs-keyword"><span class="hljs-keyword">all</span></span> TRISOLARANS_ALL_CM match <span class="hljs-keyword"><span class="hljs-keyword">any</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bentuk hingga 20Mb / s: </font></font><br><br><pre> <code class="hljs swift"> policy-<span class="hljs-built_in"><span class="hljs-built_in">map</span></span> <span class="hljs-type"><span class="hljs-type">TRISOLARANS_SHAPING</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TRISOLARANS_ALL_CM</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shape</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">average</span></span></span><span class="hljs-class"> 20000000</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Berlaku untuk antarmuka output: </font></font><br><br><pre> <code class="hljs kotlin"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Ethernet0</span></span></span><span class="hljs-class">/2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">service</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">policy</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">output</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TRISOLARANS_SHAPING</span></span></span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segala sesuatu yang harus meninggalkan (output) antarmuka Ethernet0 / 2, bentuk hingga 20 Mb / s. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File konfigurasi pembentuk. </font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan inilah hasilnya: </font></font><br><br><img src="https://habrastorage.org/webt/tz/1i/sr/tz1isrb6mnjnirkxe46wbzed2yu.png" width="900"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ternyata garis yang cukup datar dari total throughput dan grafik robek untuk setiap aliran individu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faktanya adalah bahwa kita membatasi pembentuk pada band umum. </font><font style="vertical-align: inherit;">Namun, tergantung pada platform, aliran individual juga dapat dibentuk secara individual, sehingga memperoleh peluang yang sama.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang konfigurasikan pemolesan pada Linkmeup_R2. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami akan menambahkan polyser ke kebijakan yang ada.</font></font><br><br><pre> <code class="hljs pgsql"> <span class="hljs-keyword"><span class="hljs-keyword">policy</span></span>-map TRISOLARANS_ADMISSION_CONTROL <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> TRISOLARANS_TCP_CM police cir <span class="hljs-number"><span class="hljs-number">10000000</span></span> bc <span class="hljs-number"><span class="hljs-number">1875000</span></span> conform-action transmit exceed-action <span class="hljs-keyword"><span class="hljs-keyword">drop</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kebijakan telah diterapkan ke antarmuka: </font></font><br><br><pre> <code class="hljs pgsql"> interface Ethernet0/<span class="hljs-number"><span class="hljs-number">1</span></span> service-<span class="hljs-keyword"><span class="hljs-keyword">policy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> TRISOLARANS_ADMISSION_CONTROL</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini kami menunjukkan kecepatan rata-rata yang diizinkan CIR (10Mb / s) dan burst Bc yang diizinkan (1,875.000 byte sekitar 14,6 MB). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemudian, menjelaskan bagaimana polyser bekerja, saya akan memberi tahu Anda apa CIR dan Bc dan bagaimana menentukan nilai-nilai ini. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File konfigurasi polyser. </font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar ini diamati dengan polysing. </font><font style="vertical-align: inherit;">Perubahan mendadak pada tingkat kecepatan langsung terlihat:</font></font><br><br><img src="https://habrastorage.org/webt/wg/vb/iv/wgvbiv6biiv27f99npxfupqjdla.png" width="900"><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tapi gambar yang menarik diperoleh jika kita membuat ukuran burst yang diijinkan terlalu kecil, misalnya, 10.000 byte. </font></font><br><br><pre> <code class="hljs powershell"> police cir <span class="hljs-number"><span class="hljs-number">10000000</span></span> bc <span class="hljs-number"><span class="hljs-number">10000</span></span> conform<span class="hljs-literal"><span class="hljs-literal">-action</span></span> transmit exceed<span class="hljs-literal"><span class="hljs-literal">-action</span></span> drop</code> </pre> <br><img src="https://habrastorage.org/webt/3a/cn/l0/3acnl01957rqgxcsonokebamdim.png" width="900"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kecepatan keseluruhan segera turun menjadi sekitar 2Mb / s. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hati-hati dengan pengaturan semburan :) </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabel uji.</font></font></a> <br><br><hr><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bucket Leaky dan Token Bucket </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kedengarannya mudah dan jelas. </font><font style="vertical-align: inherit;">Tetapi bagaimana cara kerjanya dalam praktik dan diimplementasikan dalam perangkat keras?</font></font><br><br>  Sebuah contoh <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah batas 400 Mb / s banyak (atau sedikit)? </font><font style="vertical-align: inherit;">Rata-rata, klien hanya menggunakan 320. Tapi kadang-kadang naik menjadi 410 selama 5 menit. </font><font style="vertical-align: inherit;">Dan terkadang hingga 460 per menit. </font><font style="vertical-align: inherit;">Dan terkadang hingga 500 selama setengah detik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai linkmeup penyedia kontrak dapat katakan - 400 dan hanya itu! </font><font style="vertical-align: inherit;">Jika Anda menginginkan lebih, sambungkan ke tarif 1Gb / dtk + 27 saluran anime. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan kami dapat meningkatkan loyalitas pelanggan jika ini tidak mengganggu orang lain dengan memungkinkan lonjakan tersebut. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana mengizinkan 460 Mb / s hanya untuk satu menit, dan bukan 30 atau selamanya? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana memungkinkan 500 Mb / s, jika band ini gratis, dan tekan ke 400, jika konsumen lain telah muncul? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang istirahat, tuangkan seember yang kuat. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita mulai dengan mekanisme sederhana yang digunakan oleh pembentuk - ember bocor.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algoritma ember bocor </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leaky Bucket adalah ember bocor. </font></font><br><br><img src="https://habrastorage.org/webt/te/qj/jv/teqjjvam2gz-gwlvfcfr1osqj5q.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memiliki ember dengan lubang ukuran tertentu di bagian bawah. Paket menuangkan / menuangkan ke dalam ember ini dari atas. Dan dari bawah, mereka mengalir pada laju bit yang konstan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika ember sudah penuh, paket-paket baru mulai dibuang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ukuran lubang ditentukan oleh batas kecepatan yang ditentukan, yang untuk Leaky Bucket diukur dalam bit per detik. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Volume bucket, kepenuhan dan kecepatan keluarannya menentukan penundaan yang diperkenalkan oleh pembentuk. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk kenyamanan, volume bucket biasanya diukur dalam ms atau μs. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam hal implementasi, Leaky Bucket adalah buffer reguler berdasarkan SD-RAM.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bahkan jika pembentukan tidak dikonfigurasikan secara eksplisit, di hadapan semburan yang tidak masuk ke antarmuka, paket-paket sementara buffered dan ditransmisikan saat antarmuka menjadi bebas. </font><font style="vertical-align: inherit;">Ini juga membentuk. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bucket Leaky hanya digunakan untuk membentuk dan tidak cocok untuk memoles.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algoritma Token Bucket </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banyak orang berpikir bahwa Token Bucket dan Leaking Bucket adalah hal yang sama. </font><font style="vertical-align: inherit;">Hanya Einstein yang jauh lebih keliru, menambahkan konstanta kosmologis. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengganti chip tidak benar-benar mengerti jam berapa, mereka menjadi semakin buruk berapa bit yang ditransmisikan per unit waktu. </font><font style="vertical-align: inherit;">Pekerjaan mereka adalah mengirik. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah ini mendekati sedikit 400.000.000 bit per detik, atau sudah 400.000 001? </font></font><br><br><img src="https://habrastorage.org/webt/kh/pu/i6/khpui6xw0sle9wconrc6ouoeedg.png" width="400"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengembang ASIC memiliki tantangan rekayasa non-sepele. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu dibagi menjadi dua subtugas:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebenarnya membatasi kecepatan dengan membuang paket yang tidak perlu berdasarkan kondisi yang sangat sederhana. </font><font style="vertical-align: inherit;">Dilakukan saat mengganti chip.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menciptakan kondisi sederhana ini, yang berhubungan dengan chip yang lebih kompleks (lebih terspesialisasi), melacak waktu. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritma yang memecahkan masalah kedua disebut Token Bucket. </font><font style="vertical-align: inherit;">Idenya elegan dan sederhana (tidak). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas Token Bucket adalah untuk melewatkan lalu lintas jika masuk dalam batasan dan membuang / mengecat merah jika tidak. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penting untuk mengizinkan ledakan lalu lintas, karena ini normal. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan jika dalam Leaky Bucket burst buffer-buffered, maka Token Bucket tidak buffer apa pun.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Single Rate - Dua Warna Menandai </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk saat ini, jangan memperhatikan nama =) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memiliki ember yang koinnya jatuh dengan kecepatan konstan - 400 megamonet per detik, misalnya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Volume ember adalah 600 juta koin. Artinya, diisi dalam satu setengah detik. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di dekatnya ada dua ban berjalan: satu mengirimkan paket, yang kedua membawa pergi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk sampai ke conveyor, paket harus membayar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk ini, ia mengambil koin dari ember sesuai dengan ukurannya. Secara kasar - berapa banyak bit - begitu banyak koin. </font></font><br><br><img src="https://habrastorage.org/webt/2m/lh/kz/2mlhkzj9j1vezkils69vlszdgc0.png" width="800"><br><br><img src="https://habrastorage.org/webt/hj/o5/nn/hjo5nn2u7omtuighgtohqpx1y1k.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika ember kosong dan tidak ada cukup koin di dalam tas, ember itu dicat dengan warna merah dan dibuang. Sial, Selyava. Dalam hal ini, koin tidak dihapus dari ember.</font></font><br><br><img src="https://habrastorage.org/webt/d-/bf/q9/d-bfq9l2tnj90-58kvi38zl3ufy.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket koin berikutnya mungkin sudah cukup - pertama, paket mungkin lebih kecil, dan, kedua, itu menyerang lebih banyak koin selama waktu ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika ember sudah penuh, semua koin baru akan dibuang. </font></font><br><br><img src="https://habrastorage.org/webt/cs/yn/yq/csynyq7ig1pfozdswqkxt59dt2e.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu semua tergantung pada tingkat kedatangan paket dan ukurannya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika secara stabil lebih rendah atau sama dengan 400 MB per detik, maka akan selalu ada cukup koin. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika lebih tinggi, maka beberapa paket akan hilang.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Contoh yang lebih spesifik dengan gif, seperti yang kita semua suka. </font></font><br><br><img src="https://habrastorage.org/webt/o1/ds/ek/o1dsekpsi9nhg-plchkoivxrwm4.gif"><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada ember dengan kapasitas 2.500 byte. </font><font style="vertical-align: inherit;">Pada awalnya, ini berisi 550 token. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada tiga paket 1000 byte pada pipa yang ingin dikirim ke antarmuka. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada setiap slot waktu, 500 byte jatuh ke dalam ember (500 * 8 = 4.000 bit / slot waktu - batas polyser).</font></font></li><li>         500 .       .   1000 ,    1050  — <b></b> .       . 1000    . <br>    50 . </li><li>          500  —  550.     — 1000 — <b> </b> . <br>     ,   . </li><li>         500  —  1050.    — 1000 — <b></b> . <br>      ,    . </li></ul><br>    2500   ,             2500  —      .        MTU    ,      ,  ,  1,5-2 . <br><br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> : <br><br> CBS = CIR (  )*1,5 ()/8 (  ) <br><br>       ,     (Bc),   ,     (1 875 000 )    .    (10 000 ),   ,     MTU,           . <br></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa volume ember? Bitstream tidak selalu seragam, ini jelas. Batas 400 Mb / s bukan merupakan asimtot - lalu lintas dapat melintasinya. Volume koin yang disimpan memungkinkan semburan kecil untuk terbang tanpa dibuang, tetapi pertahankan kecepatan rata-rata pada 400Mb / s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalnya, aliran stabil 399 Mb / s dalam 600 detik akan memungkinkan bucket terisi penuh. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selanjutnya, lalu lintas dapat naik hingga 1000Mb / dtk dan tetap pada level ini selama 1 detik - 600 Mm (Megamonet) stok dan 400 Mm / dtk jaminan band. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atau, lalu lintas dapat mencapai 410 Mb / s dan tetap seperti itu selama 60 detik. </font></font><br><br><img src="https://habrastorage.org/webt/hq/yl/ib/hqylibyhmxkhepdt9mcf04m7rnk.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, persediaan koin memungkinkan Anda sedikit melampaui batasan untuk waktu yang lama atau membuang lonjakan pendek namun tinggi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang untuk terminologi.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tingkat penerimaan koin dalam ember - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CIR - Tingkat Informasi yang Diterapkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Kecepatan rata-rata yang dijamin). Diukur dalam bit per detik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jumlah koin yang dapat disimpan dalam ember - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBS - Ukuran Burst yang Dikerjakan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Diizinkan ukuran burst maksimum. Diukur dalam byte. Kadang-kadang, seperti yang Anda perhatikan, ini disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jumlah koin (Token) dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (CBS) saat ini.</font></font><br><br><img src="https://habrastorage.org/webt/nm/rr/iv/nmrrivc2sdktqp4cfyhwfayjuze.png" width="600"><br><blockquote>      " <b>Tc</b> ",  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC 2697</a> ( <i>A Single Rate Three Color Marker</i> ). <br>     Tc,    ,       . <br>    . <br>    ,    ,     Token Bucket,    <b>TDM</b> (Time-Division Multiplexing) —         . <br>          —  , , . <br>          CIR .    . <br>   ,    —   ,  —   ,  —   . <br>         ,      . <br>      (    Cisco) <b>Tc</b> ,     — <b>Bc</b> .   <b>Bc = CIR*Tc</b> . <br>       Tc    Bc . <br></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah skenario paling sederhana. </font><font style="vertical-align: inherit;">Ini disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tingkat Tunggal - Dua Warna</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Single Rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berarti hanya ada satu kecepatan rata-rata yang diperbolehkan, dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Two Color</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Anda dapat mewarnai lalu lintas dalam satu dari dua warna: hijau atau merah.</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika jumlah koin (bit) yang tersedia dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lebih besar dari jumlah bit yang perlu dilewati saat ini, paket tersebut berwarna hijau - kemungkinan jatuh yang rendah di masa depan. </font><font style="vertical-align: inherit;">Koin </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dikeluarkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari ember.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika tidak, paket dicat merah - probabilitas tinggi drop (atau, lebih sering, drop sesaat). </font><font style="vertical-align: inherit;">Koin sehingga ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ditarik</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digunakan untuk memoles di PHB CS dan EF, di mana kecepatan tidak diharapkan, tetapi jika itu terjadi, lebih baik segera membuangnya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selanjutnya kami akan mempertimbangkan lebih sulit: Tingkat Tunggal - Tiga Warna.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Single Rate - Tiga Warna Menandai </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kerugian dari skema sebelumnya adalah hanya ada dua warna. Bagaimana jika kita tidak ingin kehilangan segalanya di atas kecepatan rata-rata yang diperbolehkan, tetapi ingin menjadi lebih loyal? </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCM-sr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Single Rate - Tiga Warna The Menandai</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) memasuki bucket kedua di - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pada saat ini, koin tidak ditempatkan dalam ember penuh dengan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang dituangkan ke dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">EBS</font></b></font><br><br><img src="https://habrastorage.org/webt/xq/wq/fb/xqwqfblgko9sadvpv_zg2khhoma.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditambahkan ke CIR dan CBS </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Ukuran Kelebihan Berlebihan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><b><font style="vertical-align: inherit;">Ukuran</font></b><font style="vertical-align: inherit;"> burst yang diizinkan selama puncak. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Te</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - jumlah koin dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><img src="https://habrastorage.org/webt/un/tb/1v/untb1vhnskpben6jqecdqinvx4q.png" width="600"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Katakanlah paket ukuran </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> datang sepanjang pipa.</font></font> Lalu <br><br><ol><li>     <b>C</b> ,      .   <b>C</b>  <b>B</b>  (: Tc — B). </li><li>     <b>C</b>  ,   <b>E</b> .     ,     (  ),   <b>E</b>  <b>B</b> . <br><br><img src="https://habrastorage.org/webt/oi/my/if/oimyif_nplc0auqsknrlbtatqe0.png" width="800"><br></li><li>     <b>E</b>   ,     ,    . <br><br><img src="https://habrastorage.org/webt/tn/44/ct/tn44ctwmh8zxmekxrr9y6sv4avm.png" width="800"><br></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhatikan bahwa untuk paket tertentu, Tc dan Te </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak kumulatif</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, paket dengan ukuran 8000 byte tidak akan lulus, bahkan jika </font><font style="vertical-align: inherit;">ada 3000 koin </font><font style="vertical-align: inherit;">dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan dalam koin </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 7000. Dalam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C itu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak cukup, di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E itu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak cukup - kita beri tanda merah - shurai dari sini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah desain yang sangat elegan. Semua lalu lintas yang termasuk dalam batasan CIR + CBS rata-rata (penulis tahu bahwa tidak mungkin untuk menambahkan bit / s dan byte secara langsung) - berwarna hijau. Pada saat-saat puncak, ketika klien kehabisan koin dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ia masih memiliki persediaan Te dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terakumulasi selama waktu henti </font><font style="vertical-align: inherit;">.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, Anda dapat melewati sedikit lebih banyak, tetapi dalam kasus kemacetan, mereka lebih cenderung dibuang. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sr-TCM dijelaskan dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 2697</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digunakan untuk memoles di PHB AF. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nah, sistem terakhir adalah yang paling fleksibel dan karena itu kompleks - Dua Tingkat - Tiga Warna.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dua Tingkat - Tiga Warna Menandai </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tr-TCM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lahir dari gagasan bahwa itu tidak merugikan pengguna lain dan jenis lalu lintas, mengapa tidak memberi klien kesempatan yang lebih menyenangkan, atau penjualan yang lebih baik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita beri tahu dia bahwa dia dijamin 400 Mb / s, dan jika ada sumber daya gratis, maka 500. Apakah Anda siap untuk membayar 30 rubel lebih banyak? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P lainnya</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditambahkan </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CIR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - kecepatan rata-rata terjamin. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah ukuran percikan yang diperbolehkan yang sama (volume ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PIR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Peak Information Rate - kecepatan rata-rata maksimum. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EBS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ukuran burst yang diizinkan selama puncak (Bucket Volume </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak seperti sr-TCM, di tr-TCM, koin sekarang dikirim secara independen ke kedua ember. </font><font style="vertical-align: inherit;">Di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dengan kecepatan CIR, di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - PIR. </font></font><br><br><img src="https://habrastorage.org/webt/xd/gk/_d/xdgk_dfz6sd-mw6lsw_adkipcve.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa aturannya? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket ukuran </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> byte </font><font style="vertical-align: inherit;">tiba </font><font style="vertical-align: inherit;">.</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika tidak ada </font><font style="vertical-align: inherit;">cukup </font><font style="vertical-align: inherit;">koin dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , paket ditandai dengan warna merah. </font><font style="vertical-align: inherit;">Koin </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak ditarik</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font> Jika tidak: </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika tidak ada </font><font style="vertical-align: inherit;">cukup </font><font style="vertical-align: inherit;">koin dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , paket ditandai kuning, dan </font><font style="vertical-align: inherit;">koin </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B dikeluarkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari ember </font><b><font style="vertical-align: inherit;">P.</font></b></font> Jika tidak: </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket ditandai dengan warna hijau dan </font><font style="vertical-align: inherit;">koin </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B diambil</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari </font><b><font style="vertical-align: inherit;">kedua ember</font></b><font style="vertical-align: inherit;"> .</font></font></li></ol><br><img src="https://habrastorage.org/webt/xz/ac/xl/xzacxlryw2kkvf1ms-nkgufteba.png" width="800"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artinya, aturan dalam tr-TCM berbeda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selama lalu lintas jatuh dalam kecepatan yang dijamin, koin dihapus dari kedua ember. </font><font style="vertical-align: inherit;">Berkat ini, ketika </font><font style="vertical-align: inherit;">koin habis </font><font style="vertical-align: inherit;">dalam ember </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mereka akan tetap di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi cukup agar tidak melebihi PIR (jika mereka dihapus hanya dari </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan mengisi lebih banyak dan memberikan kecepatan yang jauh lebih tinggi). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan demikian, jika di atas dijamin, tetapi di bawah puncak, koin hanya dihapus dari </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , karena di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sudah tidak ada. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitor tr-TCM tidak hanya meledak, tetapi juga kecepatan puncak konstan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr-TCM dijelaskan dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 2698</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Juga digunakan untuk memoles di PHB AF. </font></font><br><br><hr><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ringkasan batas kecepatan </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sambil membentuk menghambat lalu lintas saat terlampaui, memoles membuangnya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Membentuk tidak cocok untuk aplikasi sensitif latensi dan jitter. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk menerapkan pemolesan dalam perangkat keras, algoritma Token Bucket digunakan, untuk membentuk - Leaky Bucket. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Token Bucket dapat:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan satu ember - Satu Tingkat - Dua Penandaan Warna. </font><font style="vertical-align: inherit;">Mengizinkan semburan yang valid.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan dua ember - Tingkat Tunggal - Tiga Penanda Warna (sr-TCM). </font><font style="vertical-align: inherit;">Surplus dari bucket C (CBS) dituangkan ke dalam ember E. Memungkinkan gelombang yang diizinkan dan berlebihan.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan dua ember - Dua Tingkat - Tiga Penanda Warna (tr-TCM). </font><font style="vertical-align: inherit;">Bucket C dan P (PBS) diisi ulang secara independen pada kecepatan yang berbeda. </font><font style="vertical-align: inherit;">Mengizinkan kecepatan puncak dan semburan yang diijinkan dan berlebihan.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sr-TCM berfokus pada jumlah lalu lintas yang melebihi batas. tr-TCM - dengan kecepatan kedatangannya. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Polishing dapat digunakan pada input dan output dari perangkat. Pembentukan didominasi di pintu keluar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk PHB CS dan EF, Single Rate Two Color Marking digunakan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk AF, sr-TCM atau tr-TCM. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk pemahaman yang lebih baik, saya sarankan merujuk ke RFC asli atau membaca di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><blockquote>  Token Bucket     . ,       ,   ,       ,       . <br>     ,         — ,  .   ,    ,       ,    —  . <br>      ,     .          —   .         . <br></blockquote><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di atas, saya menjelaskan semua mekanisme dasar QoS, jika tidak masuk jauh ke QoS hierarkis. </font><font style="vertical-align: inherit;">Sistem canggih dengan banyak bagian yang bergerak. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semuanya baik-baik saja (kan?) Terdengar sejauh ini, tetapi apa yang terjadi di bawah panel eksternal vanilla router? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selama bertahun-tahun, vendor telah menambahkan semakin banyak kontur, mengembangkan chip canggih, buffer yang diperluas, di satu sisi, untuk mengikuti peningkatan volume lalu lintas dan kategori baru, dan di sisi lain, untuk memecahkan masalah yang berkembang yang disebabkan oleh paragraf pertama. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perlombaan yang sedang berlangsung. </font><font style="vertical-align: inherit;">Paket tidak boleh hilang jika pesaing tidak kehilangannya. </font><font style="vertical-align: inherit;">Anda tidak dapat menolak fungsi jika lawan berdiri di bawah pintu pelanggan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ida ke sarang kepemilikan!</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 9. Implementasi perangkat keras QoS </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam bab ini, saya mengambil tugas yang tidak tahu berterima kasih. Jika Anda menggambarkannya sesederhana mungkin, akan selalu ada orang-orang yang mengatakan bahwa semuanya tidak begitu dalam kenyataan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda menggambarkannya apa adanya, pembaca akan menjatuhkan artikel karena akan berubah menjadi gambar kapal selam, lebih tepatnya, gambar tiga kapal dengan pensil warna berbeda pada satu lembar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara umum, saya akan membuat pernyataan bahwa dalam kenyataannya semuanya tidak sama dengan pada kenyataannya, dan saya akan mengikuti versi presentasi yang sederhana. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maafkan saya sesama perfeksionis. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang mengontrol perilaku node dan memicu mekanisme yang sesuai dalam kaitannya dengan paket? Prioritas yang disandangnya di salah satu judul?</font></font> Ya dan tidak <br><br><img src="https://habrastorage.org/webt/th/ie/l1/thiel1p000d6rgwchs-xo1hl4ys.png" width="250"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti disebutkan di atas, di dalam perangkat jaringan, header switching standar biasanya tidak ada lagi. </font></font><br><br><img src="https://habrastorage.org/webt/nj/h5/aq/njh5aquhoyypydjzrdttbespgr4.png" width="1000"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segera setelah sebuah paket tiba di chip switching, header dihapus dari itu dan dikirim untuk analisis, dan payload merana dalam semacam buffer sementara. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berdasarkan header, klasifikasi (BA atau MF) terjadi dan keputusan dibuat tentang penerusan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah beberapa saat, tajuk internal dengan metadata tentang paket digantung pada paket. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metadata ini membawa banyak informasi penting - alamat pengirim dan penerima, chip output, nomor seri sel, jika ada fragmentasi paket dan penandaan kelas (CoS) dan Drop Precedence adalah wajib. Hanya menandai dalam format internal - itu mungkin bertepatan dengan DSCP, atau mungkin tidak.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada prinsipnya, di dalam kotak Anda dapat menetapkan panjang tanda yang sewenang-wenang tanpa terikat dengan standar, dan menentukan tindakan yang sangat fleksibel dengan paket. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di Cisco, penandaan internal disebut QoS Group, di Juniper - Forwarding Class, Huawei belum memutuskan: di suatu tempat ia menyebut prioritas internal, suatu tempat prioritas lokal, suatu tempat Kelas Layanan, dan suatu tempat yang hanya CoS. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambahkan nama untuk vendor lain di komentar - Saya akan menambahkan.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Penandaan internal ini diberikan berdasarkan klasifikasi yang dilakukan node. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penting bahwa kecuali dinyatakan sebaliknya, pelabelan internal hanya berfungsi di dalam node, tetapi kemudian tidak muncul pada pelabelan di header paket yang akan dikirim dari node - itu akan tetap sama.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, di pintu masuk ke domain DS setelah klasifikasi, biasanya ada penandaan ulang di kelas layanan tertentu yang diterima di jaringan ini. Kemudian pelabelan internal dikonversi ke nilai yang diterima untuk kelas ini di jaringan, dan dicatat di header paket yang dikirim. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoS dan Drop Precedence internal labeling mendefinisikan perilaku hanya dalam node yang diberikan dan tidak secara eksplisit diteruskan ke tetangga, kecuali untuk pelabelan kembali header. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoS dan Drop Precedence menentukan PHB, mekanisme dan parameternya: pencegahan kemacetan, manajemen kemacetan, penjadwalan, dan pemberian label ulang.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lingkaran apa yang dilewati paket antara antarmuka input dan output? Saya mengulas di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel sebelumnya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sebenarnya, ternyata tidak terjadwal, karena pada titik tertentu menjadi jelas bahwa tanpa memahami arsitektur itu terlalu dini untuk berbicara tentang QoS. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, mari kita ulangi.</font></font><br><br><img src="https://habrastorage.org/webt/3k/s1/3e/3ks13e4uzagzrbopm5juuyun4j8.png" width="1000"><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sinyal mengenai antarmuka input fisik dan chip (PIC). </font><font style="vertical-align: inherit;">Aliran bit mengalir darinya dan kemudian sebuah paket dengan semua header.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sebelah input switching chip (FE), di mana header dipisahkan dari tubuh paket. </font><font style="vertical-align: inherit;">Klasifikasi terjadi dan ditentukan di mana paket perlu dikirim lebih lanjut.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sebelah antrian input (TM / VOQ). </font><font style="vertical-align: inherit;">Sudah di sini paket diletakkan dalam antrian yang berbeda berdasarkan kelas mereka.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lebih lanjut ke pabrik switching (jika ada). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Di sebelah antrian keluaran (TM). </font></font></li><li>      (FE),    . </li><li>     (,    ) (PIC). </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam hal ini, router harus menyelesaikan persamaan yang kompleks. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perluas semuanya ke dalam kelas, berikan band lebar kepada seseorang, seseorang dengan latensi rendah, seseorang memastikan tidak ada kerugian. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan pada saat yang sama punya waktu untuk melewati semua lalu lintas jika memungkinkan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selain itu, Anda perlu membuat, mungkin memoles. </font><font style="vertical-align: inherit;">Jika kelebihan beban tiba-tiba terjadi, maka atasi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan ini tidak termasuk pencarian, pemrosesan ACL, penghitungan statistik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pangsa yang tidak enak. </font><font style="vertical-align: inherit;">Tapi robot menyuntikkan, bukan manusia. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bahkan, hanya ada dua tempat di mana mekanisme QoS bekerja - chip switching dan chip / antrian Manajemen Lalu Lintas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada saat yang sama, operasi terjadi pada chip switching yang memerlukan analisis atau tindakan dengan header.</font></font><br><br><ul><li>  Klasifikasi </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Polishing </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pelabelan kembali </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TM mengurus sisanya. </font><font style="vertical-align: inherit;">Pada dasarnya, ini adalah operasi rutin dengan algoritma yang telah ditentukan dan parameter khusus:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pencegahan Kemacetan </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Manajemen kemacetan </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Membentuk </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TM adalah buffer pintar, biasanya berdasarkan SD-RAM. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dia pintar karena, a) dapat diprogram, b) dia dapat melakukan segala macam hal rumit dengan antrian. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu sering didistribusikan - chip SD-RAM terletak di setiap papan antarmuka, dan bersama-sama mereka digabungkan menjadi VOQ (Virtual Output Queue), yang memecahkan masalah Head of Line Blocking. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faktanya adalah bahwa jika chip switching atau antarmuka output tersendat, mereka meminta chip input untuk melambat dan tidak mengirim lalu lintas untuk beberapa waktu. Jika hanya ada satu antrian di semua arah, sangat mengecewakan bahwa semua yang lain menderita dari satu antarmuka keluaran. Ini adalah Head of Line Blocking. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VOQ, pada papan antarmuka input, membuat beberapa antrian output virtual untuk setiap antarmuka output yang ada.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terlebih lagi, garis-garis pada peralatan modern ini mempertimbangkan pelabelan paket. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang VOQ dijelaskan secara cukup rinci dalam serangkaian catatan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Omong-omong, mereka benar-benar ditempatkan dalam antrian, mereka sedang dipromosikan, bukan paket-paket itu sendiri yang ditarik dari mereka, tetapi hanya catatan tentang mereka. Tidak masuk akal untuk melakukan begitu banyak gerakan dengan array bit yang besar. Sementara QoS sedang diejek atas catatan, paket-paket itu benar-benar ada dalam ingatan mereka dan diambil dari sana di alamat. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VOQ adalah antrian perangkat lunak (Antrian Perangkat Lunak istilah bahasa Inggris lebih akurat). Setelah itu, segera sebelum antarmuka ada juga antrian perangkat keras, yang selalu, benar-benar berfungsi sesuai dengan FIFO. Hampir tidak mungkin untuk mengontrol salah satu parameternya (misalnya, Cisco memungkinkan Anda untuk mengkonfigurasi hanya kedalaman dengan perintah tx-ring-limit).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hanya di antara antrian perangkat lunak dan perangkat keras, Anda dapat menjalankan dispatcher yang sewenang-wenang. Ada dalam antrian program yang bekerja Head / Tail-drop dan AQM, memoles dan membentuk. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ukuran antrian perangkat keras sangat kecil (unit paket), karena operator melakukan semua pekerjaan menumpuk tarif baris. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sayangnya, di sini Anda dapat membuat banyak reservasi, dan memang mencoret semuanya dengan pena merah dan mengatakan "vendor X tidak begitu."</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya ingin membuat satu komentar lagi tentang paket layanan. Mereka ditangani secara berbeda dari paket pengguna transit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dihasilkan secara lokal, mereka tidak diperiksa untuk kesesuaian dengan aturan ACL, dan batas kecepatan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket-paket dari luar yang dimaksudkan untuk CPU dari chip switching keluaran jatuh ke antrian lain - ke CPU - berdasarkan pada jenis protokol. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalnya, BFD memiliki prioritas tertinggi, OSPF dapat menunggu lebih lama, dan ICMP umumnya tidak menakutkan untuk turun. Artinya, semakin penting paket untuk jaringan untuk bekerja, semakin tinggi kelas layanannya saat mengirim ke CPU. Itulah sebabnya mengapa normal untuk melihat berbagai keterlambatan transit hop di ping atau tracing - ICMP bukan lalu lintas prioritas untuk CPU. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selain itu, paket protokol diterapkan</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoPP - Control Plane Protection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (atau Policing) - pembatas kecepatan untuk menghindari penggunaan CPU yang tinggi - sekali lagi, penurunan yang lebih baik dalam antrian dengan prioritas rendah sebelum masalah dimulai. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoPP akan membantu baik dari DoS yang ditargetkan dan dari perilaku jaringan yang tidak normal (misalnya, loop) ketika banyak lalu lintas siaran mulai datang ke perangkat.</font></font><br><br><hr><br><h1>  Tautan yang bermanfaat </h1><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buku terbaik tentang teori dan filosofi QoS: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QOS-Enabled Networks: Tools and Foundations</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa kutipan darinya dapat dibaca di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi saya akan merekomendasikan membacanya dari dan ke, bukan bertukar.</font></font></li><li>         QoS  Huawei: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Special Edition QoS(v6.0)</a> .        PHB   . </li><li>    sr-TCM  tr-TCM  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Understanding Single-Rate and Dual-Rate Traffic Policing</a> . </li><li>  VOQ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">What is VOQ and why you should care?</a> </li><li>  QoS  MPLS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MPLS and Quality of Service</a> . </li><li>     QoS   Juniper: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Juniper CoS notes</a> . </li><li>   QoS       TCP  UDP.       : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">The TCP/IP Guide</a> </li><li>    ,          ,       : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">         TCP</a> . </li><li>    ,        FQ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Queuing and Scheduling</a> . <br>      ,     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">An Introduction to Computer Networks</a> ,  ,     Introduction,      .    . <br></li><li>  WFQ  ,    , , ,   ,    : Weighted Fair Queueing: a packetized approximation for FFS/GP. <br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada juga mekanisme LFI, yang tidak saya sentuh, karena sulit dalam realitas kami dari seratus antarmuka gigabyte juga, tetapi mungkin menarik untuk membiasakan diri dengan: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragmentasi Tautan dan Interleaving</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li></ul><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan tentu saja, suite RFC ...</font></font></b> <div class="spoiler_text"><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc791</a> ( <i>INTERNET PROTOCOL</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc1349</a> ( <i>Type of Service in the Internet Protocol Suite</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc1633</a> ( <i>Integrated Services in the Internet Architecture: an Overview</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc2474</a> ( <i>Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc2475</a> ( <i>An Architecture for Differentiated Services</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc2597</a> ( <i>Assured Forwarding PHB Group</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc2697</a> ( <i>A Single Rate Three Color Marker</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc2698</a> ( <i>A Two Rate Three Color Marker</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc3031</a> ( <i>Multiprotocol Label Switching Architecture</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc3168</a> ( <i>The Addition of Explicit Congestion Notification (ECN) to IP</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc3246</a> ( <i>An Expedited Forwarding PHB (Per-Hop Behavior)</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc3260</a> ( <i>New Terminology and Clarifications for Diffserv</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc3662</a> ( <i>A Lower Effort Per-Domain Behavior (PDB) for Differentiated Services</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc4594</a> ( <i>Configuration Guidelines for DiffServ Service Classes</i> ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tools.ietf.org/html/rfc5462</a> ( <i>Multiprotocol Label Switching (MPLS) Label Stack Entry: «EXP» Field Renamed to «Traffic Class» Field</i> ) </li></ul><br></div></div><br><h1>  Kesimpulan </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rilis ini telah memiliki banyak pengulas. </font></font><br>  Terima kasih <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexander </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fatin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;">LoxmatiyMamont</font></a><font style="vertical-align: inherit;"> ) untuk kata pengantar dan saran yang berharga tentang ekspresif dan kejelasan teks. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexander Clipper (@ metallicat20) untuk ulasan sejawatnya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexander Klimenko (@ v00lk) untuk kritik keras dan perubahan paling masif dalam beberapa hari terakhir. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrey Glazkov (@glazgoo) untuk komentar tentang struktur, terminologi, dan koma. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artyom Chernobay untuk KDPV. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anton Klochkov (@NAT_GTX) untuk kontak dengan Miran. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Miran (miran.ru) untuk mengatur server dengan Eva dan siaran. </font><font style="vertical-align: inherit;">Secara tradisional, keluarga saya, yang, bagaimanapun, kali ini paling menderita karena ketidakhadirannya dekat pada saat-saat paling sulit.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id420525/">https://habr.com/ru/post/id420525/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id420515/index.html">Diarisasi berdasarkan model GMM-UBM dan algoritma adaptasi MAP</a></li>
<li><a href="../id420517/index.html">Implementasi FFT Integer FPGA</a></li>
<li><a href="../id420519/index.html">Mempopulerkan sains</a></li>
<li><a href="../id420521/index.html">Sekarang secara resmi: TLS 1.3 diakui sebagai standar</a></li>
<li><a href="../id420523/index.html">Analisis grafik opsi biner atau bagaimana saya sekali lagi membuktikan pada diri saya bahwa gratis tidak ada</a></li>
<li><a href="../id420527/index.html">Senyum bisa terdengar dan menular</a></li>
<li><a href="../id420529/index.html">Penggunaan Geeta tingkat lanjut atau bagaimana pensiun enam bulan sebelumnya?</a></li>
<li><a href="../id420533/index.html">Meniru literal properti dengan Java 8 Method Reference</a></li>
<li><a href="../id420537/index.html">Kisah lain tentang bagaimana uang secara relatif diambil dengan megaphone</a></li>
<li><a href="../id420539/index.html">Pendekatan khusus untuk menormalkan dan mengatur ulang gaya (custom-reset.css)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>