<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔽 🐈 🙆🏽 Penyedia VDS Anda sendiri 🧦 🌊 🔲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jika Anda ingin memanfaatkan VDS dan pada saat yang sama melindungi diri Anda dari oversel yang tidak bermoral, ketika penyedia menyumbat simpul ke bo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Penyedia VDS Anda sendiri</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/first/blog/414741/"><img src="https://habrastorage.org/webt/lb/xe/q6/lbxeq6q_bjkeqi_lnwqv4wkrdkk.jpeg"><br><br>  Jika Anda ingin memanfaatkan VDS dan pada saat yang sama melindungi diri Anda dari oversel yang tidak bermoral, ketika penyedia menyumbat simpul ke bola mata dan tidak menyeimbangkan beban, ada dua cara. <br><br>  Anda dapat menemukan pembuat VDS andal Anda.  Atau bunuh semua Siths sendiri dan buat bintang kematian Anda sendiri (simpul) - pesan server khusus dan transfer semua VDS Anda ke sana.  Setelah semua, maka kita akan tahu pasti bahwa semua sumber daya hanya milik kita dan akan selalu tersedia.  Ya, dan kami dapat menginstal OS apa pun yang kami inginkan, perangkat lunak apa pun yang tidak sabar, dan Bitrix akan menyenangkan burung beo karena frekuensi prosesor yang tinggi.  Siapa tahu, mungkin bahkan bos akan menjadi lebih murah hati dan menulis bonus.  Ayo pergi! <a name="habracut"></a><br><br><h2>  Kami mempertimbangkan berapa banyak midichlorian yang kami miliki </h2><br>  Pertama, Anda perlu mengetahui total biaya menyewa armada VDS dan konsumsi aktual sumber daya prosesor, RAM / memori permanen, jumlah IP.  Cari tahu frekuensi prosesor yang dialokasikan oleh VDS Anda.  Di sini, semua hoster secara individual - kami melihat jadwal, kami mempertimbangkan harganya. <br><br><h2>  Memilih tubuh yang tepat </h2><br>  Sekarang kami mengetahui persyaratan sumber daya saat ini, kami memilih server khusus yang sesuai. <br><br><h4>  CPU </h4><br>  Ketika memilih prosesor, penting untuk dipertimbangkan - frekuensi inti dapat secara signifikan lebih tinggi daripada VDS saat ini.  Jika dua kali lebih tinggi, Anda dapat mempertimbangkan satu kernel Dedic untuk dua kernel VDS.  Mungkin ada badai kemarahan, tetapi Anda harus mengerti: semua proyek berbeda, dan ini adalah cara termudah untuk memilih prosesor.  Secara umum, kami mengambil jumlah core yang sebenarnya digunakan oleh VDS lama, jika frekuensi inti sekitar 2 Ghz dibagi dua. <br>  Nilai yang dihasilkan adalah jumlah minimum kernel dedica yang diperlukan. <br><br><h4>  Memori </h4><br>  Dengan RAM dan hard drive, semuanya sederhana.  Kami meringkas sumber daya VDS, menambah 1 GB RAM dan ~ 10 GB hard disk.  Sumber daya tambahan ini diperlukan agar OS dan panel kontrol hypervisor berfungsi.  Jika Anda ingin menambah jumlah konten - berikan cadangan sumber daya untuk pertumbuhan proyek. <br><br><h4>  Alamat IP </h4><br>  Seperti dalam hal memori, kami mengambil jumlah alamat yang sama seperti pada VDS-kah + 1 untuk Dedik sendiri. <br><br>  Kami memesan server yang memenuhi persyaratan kami, dan mempertimbangkan nuansa yang disebutkan.  Kami memilih Debian 9 sebagai OS, di bawah OS inilah mereka membuat panel kontrol Proxmox yang sesuai. <br><br><h2>  Membangkitkan kekuatan </h2><br>  Setelah beberapa waktu, kami akan memiliki akses root ke Dedik baru. <br>  Saatnya untuk mengatakan beberapa kata tentang panel kontrol hypervisor Proxmox yang hangat, tabung, dan gratis.  Ya, panel itu sendiri gratis - pengembang dapat penghasilan dengan berlangganan.  Pelanggan, pada gilirannya, mendapatkan versi panel yang lebih stabil dan kemampuan untuk menambahkan lebih banyak node dalam mode cluster.  Tetapi untuk tujuan kita, versi gratisnya sudah cukup. <br><br>  Baru-baru ini, panel telah diperbarui secara signifikan, sekarang terlihat sangat modern dan fungsional.  Ini mendukung KVM dan LXC virtualisasi, memungkinkan Anda untuk mengatur cloud ceph Anda, mendukung cadangan, dalam kata itu tahu segala sesuatu yang dibutuhkan oleh pengguna biasa hosting VDS. <br><br><h4>  Memulai menginstal Proxmox </h4><br>  Kami terhubung ke server melalui ssh menggunakan dempul atau klien ssh lain dan menjalankan perintah berikut secara berurutan: <br><br><pre><code class="hljs powershell">echo <span class="hljs-string"><span class="hljs-string">"deb http://download.proxmox.com/debian/pve stretch pve-no-subscription"</span></span> &gt; /etc/apt/sources.list.d/pve<span class="hljs-literal"><span class="hljs-literal">-install</span></span><span class="hljs-literal"><span class="hljs-literal">-repo</span></span>.list wget http://download.proxmox.com/debian/proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span>.x.gpg <span class="hljs-literal"><span class="hljs-literal">-O</span></span> /etc/apt/trusted.gpg.d/proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span><span class="hljs-literal"><span class="hljs-literal">-release</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span>.x.gpg apt update &amp;&amp; apt dist<span class="hljs-literal"><span class="hljs-literal">-upgrade</span></span> apt install <span class="hljs-literal"><span class="hljs-literal">-y</span></span> proxmox<span class="hljs-literal"><span class="hljs-literal">-ve</span></span> postfix <span class="hljs-built_in"><span class="hljs-built_in">open-iscsi</span></span> apt remove <span class="hljs-literal"><span class="hljs-literal">-y</span></span> os<span class="hljs-literal"><span class="hljs-literal">-prober</span></span></code> </pre> <br>  Setelah instalasi selesai, pergi ke Proxmox, untuk otorisasi, gunakan browser pada port 8006 dari dedica <code>https://IP-:8006</code> <br><br><img src="https://habrastorage.org/webt/mh/_p/t1/mh_pt1drekhxeglfhg3fnch7rdw.png"><br><br>  Kami juga login sebagai root, antarmuka cukup baik diterjemahkan menjadi hebat dan kuat - Anda dapat menggunakannya dengan aman. <br><br>  Segera setelah Anda masuk, Anda akan melihat pesan dengan isyarat berlangganan.  Ini tidak perlu - panel tidak akan berhenti bekerja, seperti halnya dengan program versi percobaan. <br><br><img src="https://habrastorage.org/webt/a-/uv/j2/a-uvj2-6ephahggkfxrba8igeyc.png"><br><br>  Sebelum membuat VDS pertama di server baru, Anda perlu mengkonfigurasi jembatan jaringan sehingga semuanya seolah-olah dengan cara dewasa.  Pada tahap ini, Anda mungkin memerlukan KVM atau ipmi-kvm (jika terjadi kesalahan, dan Anda perlu memulihkan ketersediaan Dedic melalui jaringan). <br><br>  Kami kembali ke ssh dan mengedit config / etc / network / interfaces menggunakan plebeian nano atau Orthodox vim.  Kami membawa konfigurasi ke jenis ini: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">source</span></span> /etc/network/interfaces.d/* <span class="hljs-comment"><span class="hljs-comment"># The loopback network interface auto lo iface lo inet loopback auto vmbr0 iface vmbr0 inet static address IP- netmask - gateway  bridge_ports ens3 //  ,      .   ,  ,  IP     «ip a». bridge_stp off bridge_fd 0 bridge_maxwait 0</span></span></code> </pre><br>  Setelah menyimpan konfigurasi yang diedit, kami mengirim Dedik untuk reboot.  Selain mengatur jaringan, itu juga akan memuat kernel baru. <br><br>  Setelah memulai server, kami kembali beralih ke SSH untuk mengunduh gambar ISO OS untuk VDS di masa mendatang, serta gambar sysrescuecd.  Gambar harus diletakkan di direktori / var / lib / vz / template / iso <br>  Untuk mengunduh kami menggunakan tautan wget dan langsung.  Anda tidak dapat mengunduh gambar sistem jika Anda hanya ingin mentransfer VDS yang ada ke Dedic.  Tetapi gambar sysrescuecd mungkin diperlukan untuk layanan VDS, jadi kami sangat menyarankan untuk mengunduhnya segera. <br><br><h2>  Pergi untuk menaklukkan galaksi yang jauh </h2><br>  Saatnya membuat VDS di Dedic kami: tekan tombol "Create VM" di sudut kanan atas panel Proxmox, isi kolom pada semua tab menggunakan data dari salah satu VDS lama.  Format gambar dipilih qcow2. <br><br><img src="https://habrastorage.org/webt/bi/q3/z1/biq3z14ds14z_ilhroqytbiqjda.png"><br><br>  Disk image akan dibuat di sepanjang jalur / var / lib / vz / images / [di sini adalah ID dari VDS baru]. <br><br>  Kami meminta gambar dalam format qcow2 dari VDS hoster dan memuatnya alih-alih yang dibuat sebelumnya.  Pilih VDS di daftar kiri dan mulai dengan tombol "Start".  Sekarang kami telah mendapatkan server virtual kami dengan semua proyek, itu hanya untuk memperbaiki pengaturan jaringan di VDS itu sendiri dan mengubah DNS ke IP dari mesin virtual baru.  Anda dapat melakukan pengaturan ini melalui VNC, yang tersedia dengan mengklik tombol Konsol. <br><br><h4>  Pemantauan </h4><br>  Setelah menyelesaikan transfer dan mengubah DNS, kami mulai memonitor indikator pemuatan.  Ini tidak perlu, tetapi berguna.  Untuk pemantauan seperti itu, Anda dapat melihat ringkasan umum cluster. <br><br><img src="https://habrastorage.org/webt/iq/bj/ob/iqbjobj-21dpilq18qec995ppk4.png"><br><br>  Ringkasan node memiliki detail lebih lanjut: <br><br><img src="https://habrastorage.org/webt/pw/0o/6e/pw0o6e60se3f58bhk-7cz3uryb8.png"><br><br>  Jika tiba-tiba ternyata beberapa sumber daya simpul habis, dari ringkasan VDS Anda dapat menentukan mana yang mengkonsumsi banyak sumber daya dan mengoptimalkan layanan dari masalah VDS.  Ketika proyek melebihi server saat ini, untuk beralih ke perangkat keras yang lebih produktif itu akan cukup untuk mengatur ulang disk dari satu server ke yang lain.  Pekerjaan seperti itu memakan waktu sekitar 15 menit - jauh lebih cepat daripada memigrasikan VDS antar node <br><br>  Dedik juga memiliki kelemahan, tentu saja, tetapi Proxmox membantu meningkatkannya.  Yang pertama adalah bahwa jika Dedik berbaring, semua VDS akan jatuh.  Masalahnya diselesaikan dengan redundansi, tetapi Dedics lebih banyak dibutuhkan.  Bahkan ketika menggunakan server khusus, Anda perlu mengkonfigurasi raid 1 dan memantau status disk menggunakan smartd (dan inilah yang dapat dilakukan Proxmox).  Dalam kasus VDS, masalah yang sama diselesaikan dengan memesan mesin virtual dari beberapa penyedia, tetapi ini sangat tidak nyaman. <br><br>  Beralih ke dedicated server adalah langkah wajar ketika biaya VDS sewaan sebanding dengan harga dedicated server.  Anda dapat memilih konfigurasi yang sudah jadi atau membangun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dedic</a> Anda sendiri pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">FirstDEDIC</a> .  Jika Anda ingin proyek terbang, pilih disk NVMe berkecepatan tinggi (2-3 kali lebih cepat dari SSD). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id414741/">https://habr.com/ru/post/id414741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id414731/index.html">ngCinimex - Angular Moscow Meetup (07/02/2018)</a></li>
<li><a href="../id414733/index.html">Dalam sepuluh besar: Sebuah kisah pribadi tentang bagaimana menjadi RHCA, dan apa yang bisa Anda dapatkan dari itu</a></li>
<li><a href="../id414735/index.html">Merek IT. Apa yang harus dibicarakan dengan orang-orang di konferensi</a></li>
<li><a href="../id414737/index.html">"Mereka tidak menunggu dari mana": Yahoo akan didenda £ 250 ribu karena melanggar aturan lama tentang bekerja dengan PD</a></li>
<li><a href="../id414739/index.html">go-critic: analisa statis paling keras kepala untuk Go</a></li>
<li><a href="../id414743/index.html">Lokalisasi: Huruf Kendur</a></li>
<li><a href="../id414745/index.html">#BigGun. Kronograf "bingkai" paling sederhana di Arduino (pengukuran kecepatan peluru)</a></li>
<li><a href="../id414747/index.html">CNS, obat-obatan terlarang dan rock and roll: kisah tentang perangkat yang membuat kami minum, tidak tidur, dan tidak berkedip</a></li>
<li><a href="../id414749/index.html">Gentleman sysadmin diatur</a></li>
<li><a href="../id414751/index.html">Menjinakkan WSUS dengan Kemungkinan dan banyak lagi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>