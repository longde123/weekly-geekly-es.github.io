<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☂️ 🛴 🚺 Einführung in PHP 7.4: Leistung, Funktionen, Abwertungen 🤜🏻 📓 💝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Was bedeutet PHP 7.4 für Sie? 
 PHP entwickelt sich kontinuierlich weiter und hat gerade das neueste PHP 7.4-Update mit vielen neuen Funktionen veröff...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einführung in PHP 7.4: Leistung, Funktionen, Abwertungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483128/"><h2>  Was bedeutet PHP 7.4 für Sie? </h2><br>  PHP entwickelt sich kontinuierlich weiter und hat gerade das neueste PHP 7.4-Update mit vielen neuen Funktionen veröffentlicht.  Wie wir bereits in den letzten PHP 7-Releases bewiesen haben, werden Leistung und Geschwindigkeit weiter verbessert.  Eine der aufregendsten neuen Funktionen ist das <b>Vorladen</b> .  Es beschleunigt die Skriptausführung und ermöglicht aufgrund der vereinfachten gemeinsamen Codezeilen einen schnelleren und saubereren Code. <br><br>  Die Verantwortlichen von PHP berücksichtigten die Kommentare und Wünsche ihrer Zuhörer maximal und beantworteten sie einwandfrei.  Seitdem haben sie den Code kontinuierlich geändert, um das Umschalten zwischen den Programmiersprachen intuitiver und komfortabler zu gestalten. <br><br>  PHP wird in über 78,9% aller Websites verwendet.  Laut <b><a href="https://w3techs.com/technologies/details/pl-php">W3techs</a></b> sind die beliebtesten Websites, die PHP verwenden, Wikipedia, Pinterest und Facebook, um nur einige zu nennen. <br><br>  Wenn wir uns explizit WordPress-Sites ansehen, auf denen PHP ausgeführt wird, und PHP 5 und 7 vergleichen, können wir eine doppelte Geschwindigkeitssteigerung feststellen.  Websites mit WordPress-Unterstützung profitieren am meisten von der Verwendung der neuesten PHP-Version. <br><br><img src="https://habrastorage.org/webt/mv/aq/7i/mvaq7ifytdcg65bytr9gmxim9ri.png" alt="Bild"><br><a name="habracut"></a><br>  Diese Grafik zeigt die Wahrheit über Websites, die aktiv PHP verwenden.  Sind <b><a href="https://trends.builtwith.com/websitelist/PHP">40 Mio.</a></b>  Live-Websites genug, um Ihre Aufmerksamkeit zu erregen?  So viele nutzen gerade PHP.  Darüber hinaus bietet PHP 7.4 bereits bessere Testergebnisse als PHP 7.3 mit verbesserter Leistung und anderen Verbesserungen der Lebensqualität. <br><br>  Die folgende Grafik zeigt den allgemeinen <b><a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dphp-74-benchmarks%26num%3D1">Benchmark-Test</a></b> für neue und alte PHP-Versionen.  Einige der getesteten Kriterien waren unter anderem Benutzerfreundlichkeit, Geschwindigkeit und Leistung. <br><br><img src="https://habrastorage.org/webt/yc/pa/rn/ycparnhmqt8bezuoxtfdi_y_veo.png" alt="Bild"><br><br><h2>  Was ist neu in PHP 7.4? </h2><br>  Seit 2016 veröffentlicht PHP7 ununterbrochen jährliche Updates.  Jedes Jahr bieten sie neue Funktionen, Ergänzungen und die Möglichkeit, saubereren Code zu schreiben, der die Sprache für diejenigen, die sie auf ihren Websites ausführen, zuverlässiger und benutzerfreundlicher macht. <br><br>  Schauen wir uns einige der Änderungen an, die mit PHP 7.4 vorgenommen wurden.  Eine vollständige Liste finden Sie <b><a href="https://www.php.net/manual/en/migration74.php">hier</a></b> . <br><br><h3>  Vorladen </h3><br>  Reden wir über Code.  Wenn Sie ein Framework oder Bibliotheken verwenden, müssen die zugehörigen Dateien bei jeder Anforderung geladen und verknüpft werden.  Beim Preloading können Sie Frameworks und Bibliotheken in den OPCache laden.  Dadurch kann der Server die PHP-Dateien laden und während des Startvorgangs im Speicher ablegen und für zukünftige Anforderungen bereithalten.  Sprechen Sie darüber, wie es schnell gehen kann! <br><br>  Das Preloading wird von einer bestimmten <b>php.ini-</b> Direktive ausgeführt: <b>opcache.preload</b> .  Dies hat den PHP-Skript-Compiler und wird ausgeführt, wenn der Server gestartet wird.  Es kann auch verwendet werden, um weitere Dateien vorab zu laden und diese entweder einzuschließen oder zu kompilieren. <br><br>  Das ist großartig.  Wenn jedoch die Quelle der vorinstallierten Dateien geändert wird, muss der Server neu gestartet werden.  Die vorinstallierten Dateien bleiben auch für immer im OPCache-Speicher zwischengespeichert. <br>  Diese vorinstallierten Dateien sind jedoch weiterhin für zukünftige Anforderungen verfügbar, falls Sie sie jemals wieder verwenden müssen. <br><br><h3>  Spread-Operator in Array-Ausdrücken </h3><br>  Als PHP 5.6 veröffentlicht wurde, hat PHP begonnen, das Entpacken von Argumenten (Spread-Operator) zu unterstützen. In Version 7.4 können wir diese Funktion jedoch mit einem Array-Ausdruck verwenden.  Das Entpacken von Argumenten ist eine Syntax zum Entpacken von Arrays und Traversables in Argumentlisten.  Und dazu muss nur ... (3 Punkte) vorangestellt werden. Das war's. <br><br>  Schauen wir uns dieses Beispiel an: <br><br><pre><code class="php hljs">$animals = [<span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-string"><span class="hljs-string">'cat'</span></span>]; $animalkingdom = [<span class="hljs-string"><span class="hljs-string">'lion'</span></span>, <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, ...$animals, <span class="hljs-string"><span class="hljs-string">'giraffe'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ['lion', 'elephant', 'dog', 'cat', 'giraffe'];</span></span></code> </pre> <br>  Wir können jetzt ein Array von einer beliebigen Stelle in einem anderen Array aus erweitern, indem wir einfach die Spread Operator-Syntax verwenden. <br><br>  Hier ist ein längeres Beispiel: <br><br><pre> <code class="php hljs">$num1 = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]; $num2 = [...$num1]; <span class="hljs-comment"><span class="hljs-comment">// [1, 2, 3] $num3 = [0, ...$num1]; // [0, 1, 2, 3] $num4 = array(...$num1, ...$num2, 111); // [1, 2, 3, 1, 2, 3, 111] $num5 = [...$num1, ...$num1]; // [1, 2, 3, 1, 2, 3]</span></span></code> </pre> <br>  Nicht nur das, sondern Sie können es auch in einer Funktion verwenden.  Schauen Sie sich dieses Beispiel an: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>]; } $num6 = [...getNum(), <span class="hljs-string"><span class="hljs-string">'c'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ['a', 'b', 'c'] $num7 = [...new NumIterator(['a', 'b', 'c'])]; // ['a', 'b', 'c'] function arrGen() { for($i = 11; $i &lt; 15; $i++) { yield $i; } } $num8 = [...arrGen()]; // [11, 12, 13, 14]</span></span></code> </pre> <br>  Außerdem können Sie jetzt Arrays und Generatoren, die von einer Funktion zurückgegeben werden, direkt in ein neues Array entpacken. <br><br>  Ein Codebeispiel würde so aussehen: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAnimals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>]; } $num1 = [...getAnimals(), <span class="hljs-string"><span class="hljs-string">'lion'</span></span>, <span class="hljs-string"><span class="hljs-string">'tiger'</span></span>, <span class="hljs-string"><span class="hljs-string">'giraffe'</span></span>];</code> </pre> <br>  Und mit PHP 7.4 würde es drucken: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>) { [<span class="hljs-number"><span class="hljs-number">0</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"dog"</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"cat"</span></span> [<span class="hljs-number"><span class="hljs-number">2</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-string"><span class="hljs-string">"elephant"</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-string"><span class="hljs-string">"lion"</span></span> [<span class="hljs-number"><span class="hljs-number">4</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-string"><span class="hljs-string">"tiger"</span></span> [<span class="hljs-number"><span class="hljs-number">5</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-string"><span class="hljs-string">"giraffe"</span></span> }</code> </pre> <br>  Mit diesem neuen Array-Ausdruck sollten Spread-Operatoren eine deutlich bessere Leistung als 7.3 array_merge haben.  Dies liegt daran, dass der Spread-Operator eine Sprachstruktur ist, während array_merge eine Funktion ist.  Auch weil der Operator spread Objekte unterstützt, die traversable implementieren, und array_merge nur Arrays unterstützt. <br><br>  Zu beachten ist, dass Sie nur indizierte Arrays verwenden können, da Zeichenfolgenschlüssel nicht unterstützt werden.  Bei Verwendung wird ein behebbarer Fehler auf dem Bildschirm angezeigt, sobald ein Zeichenfolgenschlüssel gefunden wurde. <br>  Ein weiterer großer Vorteil von 7.4 ist das Entfernen von array_merge.  Verabschieden Sie sich von der gefürchteten Indexverschiebung! <br><br>  Schauen wir uns zum Beispiel diese lange verschlungene Array-Zusammenführung an: <br><br><pre> <code class="php hljs">$array = [<span class="hljs-string"><span class="hljs-string">'banana, '</span></span>orange<span class="hljs-string"><span class="hljs-string">']; $array[2] = '</span></span>orange<span class="hljs-string"><span class="hljs-string">'; $array[1] = '</span></span>apple<span class="hljs-string"><span class="hljs-string">'; //shifting var_dump($array); // prints array(3) { [0]=&gt; string(6) "banana" [1]=&gt; string(5) "apple" [2]=&gt; string(6) "orange"</span></span></code> </pre> <br>  Ein weiterer Vorteil von 7.4 ist die Verwendung der Generatorfunktion.  Eine Generatorfunktion funktioniert genau wie eine normale Funktion, außer dass eine <b><a href="https://www.php.net/manual/en/language.generators.syntax.php">Generatorfunktion nicht</a></b> einen Wert zurückgibt, sondern so viele Werte liefert, wie sie benötigt. <br><br>  Schauen Sie sich den folgenden Beispielcode an: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i = <span class="hljs-number"><span class="hljs-number">3</span></span>; $i &lt;= <span class="hljs-number"><span class="hljs-number">5</span></span>; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> $i; } } $num1 = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, ...generator()];</code> </pre> <br><h3>  Schwache Referenzen </h3><br>  PHP 7.4 hat jetzt eine WeakReference-Klasse, die nicht mit der Klasse <b>WeakRed</b> oder der <b>Weakref-</b> Erweiterung zu verwechseln ist. <br><br>  <b>Mit WeakReferences kann</b> der Programmierer eine Referenz auf ein Objekt <b>aufrufen</b> .  Dies ist nützlich, da es nicht verhindert, dass das Objekt zerstört wird.  Sie sind hilfreich für die Implementierung von Cache-ähnlichen Strukturen. <br><br><pre> <code class="php hljs">WeakReference { <span class="hljs-comment"><span class="hljs-comment">/* Methods */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> __construct ( void ) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> create ( object $referent ) : WeakReference <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> get ( void ) : ?object }</code> </pre> <br><h3>  Kontravariante Parameter und kovariante Rückgaben </h3><br>  Derzeit verwendet PHP hauptsächlich invariante Parametertypen und Rückgabetypen.  Das heißt, wenn eine Methode einen Parameter oder einen Rückgabetyp von X hat, muss der Subtyp-Parameter oder der Rückgabetyp ebenfalls vom Typ <b>X sein.</b> <br><br>  Mit PHP 7.4 wird nun vorgeschlagen, <b>kovariante</b> (von spezifisch nach generisch geordnete) und <b>kontravariante</b> (in umgekehrter Reihenfolge) Parameter- und Rückgabetypen zuzulassen. <br><br>  Hier ist ein Beispiel für beides: <br><br>  Beispiel für einen Covariant-Rückgabetyp: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Factory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">object</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserFactory</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Factory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span></span>; }</code> </pre> <br>  Beispiel für einen kontravarianten Parametertyp: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concatable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterator $input)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concatable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// accepts all iterables, not just Iterator function concat(iterable $input) {/* . . . */} }</span></span></code> </pre> <br><h3>  Typisierte Eigenschaften 2.0 </h3><br>  Seit PHP 5 sind Typhinweise ein verfügbares Feature, mit dem Sie den Variablentyp angeben können, der voraussichtlich an eine Funktion oder Klasse übergeben wird.  Bei den PHP 7.2-Migrationen gab die Hinzufügung des Objektdatentyps die Hoffnung, dass in Zukunft mehr zur Verfügung stehen würden.  Die Zukunft ist jetzt. <br><br>  In der neuen Version 7.4 kann PHP die folgende Typenliste unterstützen: <br><br><pre> <code class="php hljs">bool, int, float, string, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>, object, iterable, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> any <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">or</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class"> // </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">may</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">be</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">any</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">above</span></span></span></span></code> </pre> <br>  Beachten Sie, dass der <b>übergeordnete</b> Typ in Klassen verwendet werden kann und keinen <b>übergeordneten</b> Typ haben muss, der mit dem Parameter und dem Rückgabetyp übereinstimmt. <br><br>  Beachten Sie auch, dass <b>void</b> und <b>callable</b> nicht unterstützt werden.  <b>Die Lücke</b> wurde entfernt, weil sie nicht nützlich war und eine unklare Semantik aufwies.  <b>Callable</b> , weil sein Verhalten kontextabhängig war. <br><br>  Schauen wir uns einige weitere Beispiele an. <br><br>  Hier ist eine Klasse, die für PHP 7.3 geschrieben wurde: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> int $id */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $id; <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string $name */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id, string $name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $name)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } }</code> </pre> <br>  In PHP 7.4 kann eine Klasse jetzt so einfach geschrieben werden, ohne auf die Typensicherheit zu verzichten: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> int $id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> string $name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id, string $name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } }</code> </pre><br>  Hier einige Beispiele für alle Typen, die 7.4 jetzt unterstützt: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> int $scalarType; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ClassName $classType; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ?ClassName $nullableClassType; <span class="hljs-comment"><span class="hljs-comment">// Types are also legal on static properties public static iterable $staticProp; // Types can also be used with the "var" notation var bool $flag; // Typed properties may have default values (more below) public string $str = "foo"; public ?string $nullableStr = null; // The type applies to all properties in one declaration public float $x, $y; // equivalent to: public float $x; public float $y; }</span></span></code> </pre> <br><h3>  Pfeilfunktionen 2.0 </h3><br>  Anonyme Funktionen in PHP sind in der Regel wortreich und langwierig, selbst wenn sie nur einfache Operationen ausführen.  Dies ist teilweise auf eine große Menge an syntaktischem Boilerplate und teilweise auf die Notwendigkeit zurückzuführen, verwendete Variablen manuell zu importieren. <br><br>  Dies macht Code, der einfache Verschlüsse verwendet, verwirrend zu lesen und noch schwieriger zu verstehen. <br><br>  Schauen wir uns einen Code an, den Sie mit PHP 7.3 verwenden würden: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array_values_from_keys</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr, $keys)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $arr[$x]; }, $keys); }</code> </pre> <br>  Hier ist die präzisere Syntax von PHP 7.4: <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array_values_from_keys</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr, $keys)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_map(fn($x) =&gt; $arr[$x], $keys); }</code> </pre> <br>  Daher haben Pfeilfunktionen jetzt diese einfache Form: <br><br><pre> <code class="php hljs">fn(parameter_list) =&gt; expr</code> </pre> <br>  Unten sehen Sie ein Beispiel für zwei Funktionen $ fn1 (7.3) und $ fn2 (7.4) nebeneinander.  Sie haben das gleiche Ergebnis, sehen aber anders aus: <br><br><pre> <code class="php hljs">$y = <span class="hljs-number"><span class="hljs-number">1</span></span>; $fn1 = fn($x) =&gt; $x + $y; $fn2 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $x + $y; };</code> </pre> <br>  Dies funktioniert auch, wenn die Pfeilfunktionen verschachtelt sind: <br><br><pre> <code class="php hljs">$z = <span class="hljs-number"><span class="hljs-number">1</span></span>; $fn = fn($x) =&gt; fn($y) =&gt; $x * $y + $z;</code> </pre><br>  Hier erfasst die äußere Funktion <b>$ z</b> .  Dann erfasst die innere Funktion auch $ z von der äußeren Funktion.  Mit 7.4 kann der äußere Bereich in der inneren Funktion verfügbar werden.  Das konnte 7.3 nicht. <br><br>  Die Pfeilfunktionssyntax ermöglicht eine Vielzahl von Funktionen wie Variadics, Standardwerte, Parameter- und Rückgabetypen sowie das Übergeben und Zurückgeben von Verweisen.  Alles unter Beibehaltung eines sauberen, lesbaren Aussehens.  Nachfolgend finden Sie alle gültigen Pfeilfunktionen, die jetzt verfügbar sind: <br><br><pre> <code class="php hljs">fn(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span> $x) =&gt; $x; fn(): int =&gt; $x; fn($x = <span class="hljs-number"><span class="hljs-number">42</span></span>) =&gt; $x; fn(&amp;$x) =&gt; $x; fn&amp;($x) =&gt; $x; fn($x, ...$rest) =&gt; $rest;</code> </pre> <br>  Zu beachten ist, dass Pfeilfunktionen die niedrigste Priorität haben.  Siehe das Beispiel: <br><br><pre> <code class="php hljs">fn($x) =&gt; $x + $y <span class="hljs-comment"><span class="hljs-comment">// is fn($x) =&gt; ($x + $y) // not (fn($x) =&gt; $x) + $y</span></span></code> </pre> <br><h2>  Abschreibungen </h2><br>  Mit der Zusammenführung zu 7.4 sind viele Abstriche verbunden.  Die folgende Liste gibt einen kurzen Überblick über die Funktionen, die für die Abschaffung vorgesehen sind.  Eine ausführlichere Erklärung finden Sie <b><a href="https://wiki.php.net/rfc/deprecations_php_7_4">hier</a></b> : <br><br><ul><li>  Der <b>wahre</b> Typ </li><li>  Magic zitiert Vermächtnis </li><li>  <b>array_key_exists ()</b> mit Objekten </li><li>  <b>FILTER_SANITIZE_MAGIC_QUOTES</b> Filter </li><li>  Reflection <b>export ()</b> Methoden </li><li>  <b>mb_strrpos ()</b> mit Kodierung als 3. Argument </li><li>  <b>implode ()</b> Parameter Reihenfolge Mix </li><li>  <b>Dies</b> von nicht statischen Verschlüssen lösen </li><li>  <b>hebrevc ()</b> Funktion </li><li>  Funktion <b>convert_cyr_string ()</b> </li><li>  Funktion <b>money_format ()</b> </li><li>  Funktion <b>ezmlm_hash ()</b> </li><li>  r <b>estore_include_path () -</b> Funktion </li><li>  <b>allow_url_include</b> ini directiv </li></ul><br>  Einige wichtige Punkte sind die folgenden zweistufigen Abwertungen. <br><br><h3>  Ändern der Priorität eines Verkettungsoperators </h3><br>  Gegenwärtig sind die Operatoren '.', '+' Und '-' alle gleich.  Jede Kombination dieser Operatoren wird einfach von links nach rechts gelöst. <br><br>  Sehen wir uns diesen Code in PHP 7.3 an: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"sum: "</span></span> . $a + $b; <span class="hljs-comment"><span class="hljs-comment">// would be evaluated left-to-right echo ("sum: " . $a) + $b; // could also look like this</span></span></code> </pre> <br>  In PHP 7.4 haben '+' und '-' Vorrang vor '.'  Die Additionen und Subtraktionen werden also immer vor der Zeichenfolge ausgeführt.  Dies würde folgendermaßen aussehen: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"sum: "</span></span> . $a + $b; <span class="hljs-comment"><span class="hljs-comment">// would be executed as if the code were as follows. echo "sum :" . ($a + $b);</span></span></code> </pre> <br>  Dieser zweistufige Vorschlag zielt darauf ab, weniger fehleranfällig und instinktiver zu sein.  PHP 7.4 befindet sich derzeit in der ersten Phase mit einer Verfallserklärung für nicht in Klammern gesetzte Ausdrücke von '+', '-' und '.'  Während Sie auf die endgültige Abstimmung / Änderung in PHP 8 warten. <br><br><h3>  Linksassoziativer ternärer Operator </h3><br>  Im Gegensatz zu den meisten anderen Sprachen ist der ternäre Operator in PHP eher linksassoziativ als rechtsassoziativ.  Dies ist nicht nur ungewöhnlich, sondern auch verwirrend für Programmierer, die zwischen verschiedenen Sprachen wechseln.  PHP 7.4 schlägt vor, die Linksassoziativität zu entfernen und erfordert stattdessen die Verwendung von Klammern. <br><br>  Werfen wir einen Blick auf den folgenden Code: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">4</span></span> ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>;</code> </pre> <br>  In den meisten anderen Sprachen würde es interpretiert werden als: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">4</span></span> ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>)))</code> </pre> <br>  In PHP wird es stattdessen wie folgt interpretiert: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((($a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">2</span></span>) ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">3</span></span>) ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">4</span></span>) ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>;</code> </pre> <br>  Dies kann zu Fehlern führen, da dies in der Regel nicht beabsichtigt ist. <br><br>  Durch einen separaten zweistufigen Vorschlag hat PHP 7.4 die explizite Verwendung von Klammern als Verfallswarnung implementiert und wird hoffentlich in zukünftigen Versionen einen Laufzeitfehler beim Kompilieren verursachen. <br><br><h2>  Fazit </h2><br>  Pünktlich zu den Feiertagen bringt PHP 7.4 neue Funktionen und Verbesserungen der Lebensqualität für alle PHP-Entwickler. <br><br>  WordPress-Websites werden definitiv von diesen Verbesserungen profitieren und ihre Benutzer können mit kürzeren Ausführungszeiten und geringerem Speicherverbrauch rechnen, wenn sie PHP 7.4 im Vergleich zu früheren Versionen verwenden. <br><br>  Mit erstklassigen Deklarationen und Hinweisen zu Eigenschaftstypen, Funktionen zum Zusammenführen von Pfeilen und einer auf lächerliche Weise höheren Geschwindigkeit verbessert der 7.4 mit Sicherheit sowohl die Geschwindigkeit als auch die Qualität Ihres Workflows. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de483128/">https://habr.com/ru/post/de483128/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de483116/index.html">Zu Hause ein Teleskoprohr bauen</a></li>
<li><a href="../de483118/index.html">Was wird im Jahr 2020 zu JavaScript hinzugefügt</a></li>
<li><a href="../de483120/index.html">Wie verbinde ich Karten in einer Ellipsoidprojektion, wenn dies nicht vorgesehen ist?</a></li>
<li><a href="../de483124/index.html">Das massivste Gadget in naher Zukunft (kein Smartphone)</a></li>
<li><a href="../de483126/index.html">Kryogene Effekte können den sicheren Transport beschädigter Elektrofahrzeugbatterien gewährleisten</a></li>
<li><a href="../de483130/index.html">Was tun, wenn der Code für das Kofferschloss vergessen wurde?</a></li>
<li><a href="../de483132/index.html">Design und Herstellung eines Teleskops</a></li>
<li><a href="../de483134/index.html">Testen der Zwei-Faktor-Authentifizierung und mögliche Problemumgehungen</a></li>
<li><a href="../de483136/index.html">Überprüfung des verwendeten MacBook vor dem Kauf - Checkliste</a></li>
<li><a href="../de483140/index.html">Polygone eine andere Welt: Amiga 500</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>