<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèª üêµ üèûÔ∏è Services, microservices et programmation orient√©e batch üíë üîñ üßòüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De nombreux programmeurs ont entendu que parfois le code devrait √™tre allou√© √† des biblioth√®ques distinctes pour une r√©utilisation ult√©rieure. Cependa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Services, microservices et programmation orient√©e batch</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466455/">  De nombreux programmeurs ont entendu que parfois le code devrait √™tre allou√© √† des biblioth√®ques distinctes pour une r√©utilisation ult√©rieure.  Cependant, la question de savoir comment le m√™me code doit √™tre distingu√© en tant qu'entit√© distincte pr√™te √† confusion pour de nombreux d√©veloppeurs.  Lors de la lecture d'articles / conversations sur ce sujet, le probl√®me de la g√©n√©ralisation pr√©matur√©e est g√©n√©ralement rappel√©. <br><br>  Les programmeurs exp√©riment√©s ont g√©n√©ralement leurs propres r√®gles, apr√®s quoi ils comprennent si le code doit √™tre distingu√© comme r√©utilisable.  Par exemple, si un code (ou tr√®s similaire) est utilis√© √† trois endroits ou plus.  N√©anmoins, tous ceux avec qui j'ai eu l'occasion de m'entretenir sur ce sujet conviennent qu'un tel code r√©utilisable doit exister, sa cr√©ation est une b√©n√©diction, et cela vaut la peine de passer son temps. <br><br>  Je veux aborder le sujet de la r√©utilisation du code dans le contexte de la cr√©ation d'une architecture orient√©e services et microservices. <br><a name="habracut"></a><br><h3>  Qu'est-ce que le code r√©utilisable? </h3><br>  Le code r√©utilisable est un code isol√© dans une entit√© distincte, appel√© diff√©remment dans diff√©rentes langues - biblioth√®que, package, d√©pendance, etc.  En r√®gle g√©n√©rale, ce code est stock√© dans un r√©f√©rentiel distinct et il existe une documentation pour la connexion et l'utilisation de ce code (README.md).  En outre, le code peut √™tre couvert par des tests, il peut y avoir des instructions pour apporter des modifications (CONTRIBUTING.md) et CI peut √™tre configur√©.  Divers badges attach√©s √† la description n'am√©liorent que la repr√©sentation visuelle de la maturit√© d'une entit√© donn√©e, et le nombre d'√©toiles attribu√©es indiquera la popularit√© de cette solution.  Vous n'avez pas besoin d'aller loin pour des exemples - ouvrez simplement la page github de n'importe quel framework populaire dans votre langue pr√©f√©r√©e, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vue.js.</a>  En g√©n√©ral, les m√©thodes de conception de haute qualit√© des biblioth√®ques sont un wagon et un petit chariot. <br><br><h3>  Services et microservices </h3><br>  Dans cet article, un service est une entit√© compl√®te qui effectue un ensemble sp√©cifique de t√¢ches sp√©cifiques dans son domaine de responsabilit√© et fournit une interface pour l'interaction.  Le service ou microservice de cet article d'un point de vue architectural peut √™tre des concepts identiques, la question n'est qu'√† l'√©chelle.  Un service peut consister en un ensemble de microservices qui mettent en ≈ìuvre leur secteur de logique m√©tier, ou √™tre un microservice fier. <br><br>  L'architecture orient√©e services suppose que chaque service est connect√© de mani√®re minimale aux autres.  N√©anmoins, l'interaction interservices n'est pas exclue, mais on suppose seulement qu'elle devrait √™tre minimis√©e.  Pour recevoir des demandes, un service impl√©mente g√©n√©ralement une API standardis√©e.  Cela peut √™tre n'importe quoi - REST, SOAP, JSONRPC ou le nouveau graphQL GraphQL. <br><br>  Classiquement, les services peuvent √™tre divis√©s en infrastructure et √©picerie.  Les services produits sont ceux qui impl√©mentent la logique d'un produit client.  Par exemple, ils travaillent avec des applications pour sa connexion ou organisent la prise en charge de ce produit tout au long du cycle de vie d'un client.  Les services d'infrastructure concernent davantage les fonctionnalit√©s de base d'une entreprise (ou d'un projet), par exemple, un service contenant des informations client ou un service qui stocke des informations sur certaines commandes.  En outre, les services d'infrastructure incluent des services qui impl√©mentent des fonctionnalit√©s auxiliaires, par exemple, un service d'information client (envoi de messages push ou SMS) ou un service d'interaction avec les donn√©es. <br><br><h3>  Un peu de fantaisie </h3><br>  Supposons qu'il existe une boutique en ligne hypoth√©tique construite sur une architecture orient√©e services.  Les d√©veloppeurs de ce miracle d'ing√©nierie ont pu s'entendre entre eux et sont arriv√©s √† la conclusion que tous leurs services fonctionneront comme des API, par exemple en utilisant le protocole jsonrpc.  Cependant, comme la boutique en ligne est grande, elle ne reste pas immobile et se d√©veloppe activement, il existe plusieurs groupes de d√©veloppement, que ce soit plus de deux - deux groupes de conception, l'un accompagn√© de ce qui a d√©j√† √©t√© √©crit.  De plus, pour am√©liorer l'effet, toutes les √©quipes √©crivent sur la m√™me pile. <br><br>  <i>L'architecture d'une boutique en ligne hypoth√©tique:</i> <br><br><img src="https://habrastorage.org/webt/8t/di/2r/8tdi2rdhusrs66kvbyrwkcoauag.png"><br><br>  Seul le service API qui se d√©ploie sur Internet donne acc√®s √† tous les syst√®mes frontaux - l'interface Web de la boutique en ligne, ainsi qu'aux applications mobiles. <br><br>  Le service d'information client stocke les informations sur les clients, sait comment les d√©marrer, autoriser, d√©livrer les informations n√©cessaires √† leur sujet. <br><br>  Le service d'information sur les produits stocke des informations sur les produits, leurs soldes et la disponibilit√© pour la commande, fournit √©galement des m√©thodes pour obtenir facilement les informations n√©cessaires. <br><br>  Le service de commande fonctionne avec les commandes.  Voici la logique de la formation de la commande, sa confirmation, le choix du type de paiement et de l'adresse de livraison, etc. <br><br>  Le service d'information client peut envoyer des messages PUSH / SMS / email.  Le type de communication, par exemple, d√©pend des param√®tres d'un client particulier, et le client peut √©galement d√©finir l'heure souhait√©e pour la r√©ception des notifications. <br><br>  Ces services sont conditionnellement infrastructurels, car sans eux, une boutique en ligne ne peut pas fonctionner en tant que telle. <br><br>  Les services de promotions et d'offres et la distribution du condens√© sont cens√©s √™tre d√©velopp√©s dans un futur proche par les √©quipes projets.  Ces services sont conditionnellement √©picerie. <br><br>  De toute √©vidence, dans tous les cas, aucun nouveau service produit ne pourra exister sans interaction avec les services d'infrastructure - il devra tr√®s probablement recevoir des informations sur les clients ou envoyer des notifications. <br><br>  Dans l'exemple d√©crit ci-dessus, les d√©tails de la mise en ≈ìuvre de chaque service sont intentionnellement masqu√©s.  Ainsi, par exemple, un service d'information client a probablement un m√©canisme d'ex√©cution de code retard√©, comme une file d'attente d'ex√©cution, et un service d'information produit peut avoir son propre panneau d'administration pour une gestion pratique des marchandises, et l'api pour les syst√®mes frontaux a probablement plusieurs r√©pliques.  De plus, l'architecture d√©crite peut ne pas √™tre optimale, elle est simplement prise de la t√™te. <br><br>  Dans le contexte de l'architecture propos√©e, il devient imm√©diatement clair que les biblioth√®ques pr√™tes √† l'emploi sont essentielles pour le d√©veloppement rapide de produits.  Il est donc important d'avoir une impl√©mentation pr√™te √† l'emploi du serveur jsonrpc, ainsi que du client pour celui-ci, car il s'agit du protocole principal pour organiser l'interaction interservices.  Dans cet exemple √©galement, la question de la documentation de l'API prend tout son potentiel.  De toute √©vidence, pour la formation de la documentation, les √©quipes doivent √©galement disposer d'un outil pr√™t √† l'emploi.  Si nous supposons qu'il existe toujours un outil pr√™t √† l'emploi pour g√©n√©rer des sch√©mas smd pour les serveurs jsonrpc, alors la vitesse de d√©veloppement de nouveaux services peut encore augmenter.  Par cons√©quent, dans l'entreprise, id√©alement, il devrait y avoir un ensemble de biblioth√®ques pr√™tes √† l'emploi que toutes les √©quipes utilisent pour effectuer des t√¢ches typiques.  Ces biblioth√®ques peuvent √™tre propri√©taires ou open-source, l'essentiel est qu'elles accomplissent bien leurs t√¢ches.  De toute √©vidence, une √©quipe qui est sur la pile g√©n√©rale et qui √©crit des services √† l'aide de biblioth√®ques pr√™tes √† l'emploi sera plus efficace qu'une √©quipe qui fait constamment du v√©lo.  La pr√©sence d'un cadre unique et d'une base de donn√©es unique de biblioth√®ques utilis√©es dans toutes les √©quipes de projet, j'appelle un √©cosyst√®me unique. <br><br><h3>  Et les grandes entreprises? </h3><br>  Dans les grandes entreprises, il existe beaucoup plus de services d'infrastructure, ainsi que les protocoles d'interaction utilis√©s.  Le nombre de biblioth√®ques termin√©es peut atteindre des dizaines voire des centaines.  Mettre en √©vidence le code r√©utilisable ici est encore plus pertinent. <br><br>  Il se trouve que j'ai de l'exp√©rience dans une entreprise qui emploie environ 200 d√©veloppeurs qui √©crivent dans diff√©rentes langues - java, c #, php, python, go, js, etc. √âtonnamment, l'√©cosyst√®me commun, dans le contexte d'une seule pile, loin de toutes les √©quipes de d√©veloppement ont et utilisent.  Il semblerait que la chose √©vidente - pr√©parer du code r√©utilisable, le formater correctement et l'utiliser - soit loin d'√™tre √©vidente.  Bien s√ªr, les √©quipes de d√©veloppement r√©solvent leurs probl√®mes.  Quelqu'un utilise un mod√®le de service - un ensemble de code qui constitue le c≈ìur de chaque nouveau service, √† partir duquel tout ce qui est inutile est jet√© et le n√©cessaire est ajout√©. <br><br>  D'autres √©quipes de d√©veloppement utilisent leurs propres v√©los, les copient et les collent d'un projet √† l'autre, et ne se soucient pas de les documenter et de les tester.  En g√©n√©ral, il y a beaucoup de d√©sunion dans les outils et les approches utilis√©s au sein de la m√™me pile dans une entreprise.  De plus, g√©ographiquement situ√© dans une ville. <br><br><h3>  Les avantages d'un √©cosyst√®me unique </h3><br>  La formation d'un √©cosyst√®me unique peut r√©soudre de nombreuses difficult√©s et pr√©sente un √©norme potentiel d'augmentation de la productivit√© pour une grande entreprise.  En fait, cette pratique est tir√©e de la communaut√© Open Source - les meilleures solutions dans leur domaine survivent et sont les plus populaires.  Maintenant, il suffit d'ouvrir un gestionnaire de d√©pendances et d'√™tre simplement surpris de l'abondance des solutions propos√©es.  Mais une telle approche peut √™tre mise en ≈ìuvre au sein de l'entreprise.  Les avantages de cette approche lors de la mise en ≈ìuvre d'un nouveau service sont les suivants: <br><br><ul><li>  Haute stabilit√© - l'utilisation de biblioth√®ques couvertes par des tests et bien document√©es augmente la stabilit√© du service dans son ensemble; </li><li>  Rotation facile des coll√®gues entre les √©quipes - si toutes les √©quipes se trouvent dans un m√™me √©cosyst√®me, alors lors du passage d'une √©quipe √† l'autre, le d√©veloppeur n'aura pas √† passer beaucoup de temps √† conna√Ætre les outils utilis√©s, car il les conna√Æt d√©j√†; </li><li>  Concentration sur la logique m√©tier - en effet, le d√©veloppement d'un nouveau service se r√©sume √† la n√©cessit√© de resserrer les d√©pendances n√©cessaires pour r√©soudre toutes les t√¢ches d'infrastructure et √©crire uniquement la logique m√©tier; </li><li>  Acc√©l√©ration du d√©veloppement - pas besoin de cycle, tout est pr√™t, sauf pour la logique m√©tier; </li><li>  Simplification des tests - seule la logique m√©tier doit √™tre test√©e, car les biblioth√®ques ont d√©j√† √©t√© test√©es; </li></ul><br><h3>  Voler dans la pommade </h3><br>  Il est clair que pour parvenir √† cette approche, certaines pratiques doivent √™tre suivies, √† savoir d√©velopper des biblioth√®ques en utilisant le versionnage s√©mantique, prendre en charge la documentation et les tests et avoir ci configur√©.  Il s'agit d'une sorte d'indicateur de maturit√© non seulement de l'√©quipe de d√©veloppement, mais aussi des d√©veloppeurs de l'entreprise dans son ensemble. <br><br><h3>  PS </h3><br>  Et l'approche orient√©e package est juste parce que le code r√©utilisable sur ma pile s'appelle un package.  Eh bien, √ßa a l'air dr√¥le.  R√©cemment, j'ai eu un dialogue avec un de mes coll√®gues qui m'a incit√© √† √©crire cet article: <br><blockquote>  - Coll√®gue: vous devenez caissier sur cinq <br>  - moi: √ßa veut dire?) <br>  - Coll√®gue: bient√¥t vous demanderez "avez-vous besoin d'un colis?" <br>  - I: veuillez ouvrir une pens√©e.  je ne comprends pas <br>  - Coll√®gue: eh bien, pour la √©ni√®me fois, vous avez un paquet pr√™t √† l'emploi pour r√©soudre mon probl√®me <br></blockquote><br>  Le fait est que dans notre communaut√© de d√©veloppeurs au sein de l'entreprise, il y a environ 20 ensembles de packages pr√™ts √† l'emploi, et la cr√©ation d'un nouveau service se traduit par la mise en place des d√©pendances n√©cessaires, ainsi que l'√©criture de la logique m√©tier.  Le co√ªt de la liaison en termes d'√©criture de code est presque annul√©. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466455/">https://habr.com/ru/post/fr466455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466445/index.html">Attaques entre approbations entre domaines</a></li>
<li><a href="../fr466447/index.html">Pourquoi devrions-nous construire un CDN?</a></li>
<li><a href="../fr466449/index.html">Formation Cisco 200-125 CCNA v3.0. Jour 44. Introduction √† OSPF</a></li>
<li><a href="../fr466451/index.html">Read_You can't_throw</a></li>
<li><a href="../fr466453/index.html">Formation Cisco 200-125 CCNA v3.0. Jour 45. Configuration d'OSPF</a></li>
<li><a href="../fr466457/index.html">Agriculture et panneaux solaires - strat√©gie gagnant-gagnant pour les ing√©nieurs √©lectriciens et les agriculteurs</a></li>
<li><a href="../fr466459/index.html">Tests d'int√©gration parall√®le Postgresql dans l'application GO</a></li>
<li><a href="../fr466461/index.html">Sommet Zabbix 2019: √† quoi s'attendre cette ann√©e</a></li>
<li><a href="../fr466463/index.html">Comment nous avons cr√©√© un prototype d'application de r√©paration d'arr√™t</a></li>
<li><a href="../fr466465/index.html">Summ3r 0f H4ck 2019: r√©sultats de recherche</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>