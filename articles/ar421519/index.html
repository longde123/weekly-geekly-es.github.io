<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐๏ธ ๐๐ป ูุชุงุจ "ุฃุจุงุชุดู ูุงููุง. ูุนุงูุฌุฉ ุงูุฏูู ูุชุญููู ุงูุจูุงูุงุช " ๐ ๐ฉ๐ปโโ๏ธ ๐ฏ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃุซูุงุก ุนูู ุฃู ุชุทุจูู ูุคุณุณู ุ ูุชู ุฅูุดุงุก ุงูุจูุงูุงุช: ูุฐู ูู ูููุงุช ุงูุณุฌู ุ ูุงูููุงููุณ ุ ููุนูููุงุช ุญูู ูุดุงุท ุงููุณุชุฎุฏู ุ ูุงูุฑุณุงุฆู ุงูุตุงุฏุฑุฉ ุ ููุง ุฅูู ุฐูู. ููุง ุฃู ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุชุงุจ "ุฃุจุงุชุดู ูุงููุง. ูุนุงูุฌุฉ ุงูุฏูู ูุชุญููู ุงูุจูุงูุงุช "</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/421519/" style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/t6/ej/tx/t6ejtxboknf_ha_u7radv1gzrls.jpeg" align="left" alt="ุงูุตูุฑุฉ"></a>  ุฃุซูุงุก ุนูู ุฃู ุชุทุจูู ูุคุณุณู ุ ูุชู ุฅูุดุงุก ุงูุจูุงูุงุช: ูุฐู ูู ูููุงุช ุงูุณุฌู ุ ูุงูููุงููุณ ุ ููุนูููุงุช ุญูู ูุดุงุท ุงููุณุชุฎุฏู ุ ูุงูุฑุณุงุฆู ุงูุตุงุฏุฑุฉ ุ ููุง ุฅูู ุฐูู. ููุง ุฃู ุงููุนุงูุฌุฉ ุงูุณูููุฉ ูุฌููุน ูุฐู ุงูุจูุงูุงุช ูุง ุชูู ุฃูููุฉ ุนู ุงูุจูุงูุงุช ููุณูุง.  ุฅุฐุง ููุช ูููุฏุณูุง ูุนูุงุฑููุง ุฃู ูุทูุฑูุง ุฃู ูููุฏุณูุง ูุชุฎุฑุฌูุง ูุชุฑุบุจ ูู ุญู ูุซู ูุฐู ุงููุดุงูู ุ ููููู ูุณุช ุนูู ุฏุฑุงูุฉ ุจู Apache Kafka ุญุชู ุงูุขู ุ ูุณุชุชุนูู ูู ูุฐุง ุงููุชุงุจ ุงูุฑุงุฆุน ููููุฉ ุงูุนูู ูุน ููุตุฉ ุงูุชุฏูู ุงููุฌุงููุฉ ูุฐู ุงูุชู ุชุณูุญ ูู ุจูุนุงูุฌุฉ ููุงุฆู ุงูุชุธุงุฑ ุงูุจูุงูุงุช ูู ุงูููุช ุงูุญูููู. <br><br><h3 style=";text-align:right;direction:rtl">  ููู ูุฐุง ุงููุชุงุจุ </h3><br>  "ุฃุจุงุชุดู ูุงููุง.  ูุนุงูุฌุฉ ุงูุฏูู ูุชุญููู ุงูุจูุงูุงุช "ูููุทูุฑูู ุงูุฐูู ูุณุชุฎุฏููู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Kafka ูู ุนูููู ุ ุจุงูุฅุถุงูุฉ ุฅูู ูููุฏุณู ุงูุนูููุงุช (ูุทูู ุนูููู ุฃูุถูุง SRE ุฃู DevOps ุฃู ูุณุคููู ุงููุธุงู) ุงูุฐูู ูุดุงุฑููู ูู ุชุซุจูุช ูุชูููู ูุชูููู ููุฑุงูุจุฉ ุนูููุง ุฃุซูุงุก ุงูุชุดุบูู ุงูุตูุงุนู.  ูู ููุณู ุฃูุถูุง ูููุฏุณู ุงูุจูุงูุงุช ูุงููููุฏุณูู ุงูุชุญูููููู - ุฃููุฆู ุงููุณุคูููู ุนู ุชุตููู ูุฅูุดุงุก ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุงููุฉ ููุจูุงูุงุช ูู ุงูุดุฑูุฉ.  ุจุนุถ ุงููุตูู ุ ุฎุงุตุฉ 3 ู 4 ู 11 ุ ุชุณุชูุฏู ูุทูุฑู ุฌุงูุง.  ูููููุง ุ ูู ุงูููู ุฃู ูููู ุงููุงุฑุฆ ุนูู ุฏุฑุงูุฉ ุจุฃุณุงุณูุงุช ูุบุฉ ุจุฑูุฌุฉ Java ุ ุจูุง ูู ุฐูู ูุถุงูุง ูุซู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุก ูุงูููุงูุณุฉ. <br><a name="habracut"></a><br>  ุงููุตูู ุงูุฃุฎุฑู ุ ุฎุงุตุฉ 2 ู 8 ู 9 ู 10 ุ ุชูุชุฑุถ ุฃู ุงููุงุฑุฆ ูุฏูู ุฎุจุฑุฉ ูุน Linux ููุฃููููุง ูุฅุนุฏุงุฏ ุดุจูุฉ Linux ูุงูุชุฎุฒูู.  ุชุชู ููุงูุดุฉ ูุง ุชุจูู ูู ูุชุงุจ ูุงููุง ูููุฏุณุฉ ุงูุจุฑูุฌูุงุช ุจุนุจุงุฑุงุช ุฃูุซุฑ ุนููููุฉ ุ ูุฐูู ูุง ููุฒู ูุนุฑูุฉ ุฎุงุตุฉ ูู ุงููุฑุงุก. <br><br>  ูุฆุฉ ุฃุฎุฑู ูู ุงูุฃุดุฎุงุต ุงูุฐูู ูุฏ ูููููู ููุชููู ุจูุฐุง ุงููุชุงุจ ูู ุงููุฏูุฑูู ูุงููููุฏุณูู ุงููุนูุงุฑููู ุงูุฐูู ูุง ูุนูููู ุจุดูู ูุจุงุดุฑ ูุน ูุงููุง ุ ูููู ูุน ุฃููุฆู ุงูุฐูู ูุนูููู ูุนู.  ููุณ ุฃูู ุฃูููุฉ ุฃู ูููููุง ูุง ูู ุถูุงูุงุช ุงููุธุงู ุงูุฃุณุงุณู ููุง ุงูุฐู ูุนุฑุถ ูุฑุคูุณูู ูุฒููุงุฆู ููุฎุทุฑ ุนูุฏ ุฅูุดุงุก ุฃูุธูุฉ ูุงุฆูุฉ ุนูู ูุงููุง.  ุณูููู ูุฐุง ุงููุชุงุจ ูููุฏูุง ูููุฏูุฑูู ุงูุฐูู ูุฑุบุจูู ูู ุชุฏุฑูุจ ููุธูููู ุนูู ุงูุนูู ูุน ูุงููุง ุฃู ููุชุฃูุฏ ูู ุงูุชูุงู ูุฑูู ุงูุชุทููุฑ ูููุนูููุงุช ุงููุงุฒูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุตู 2. ุชุซุจูุช ูุงููุง </h3><br>  Apache Kafka ูู ุชุทุจูู Java ูููู ุชุดุบููู ุนูู ุงูุนุฏูุฏ ูู ุฃูุธูุฉ ุงูุชุดุบูู ุ ุจูุง ูู ุฐูู Windows ู MacOS ู Linux ูุบูุฑูุง ุ ูุณูุฑูุฒ ูู ูุฐุง ุงููุตู ุนูู ุชุซุจูุช Kafka ุนูู Linux ุ ุญูุซ ุฅูู ุงููุธุงู ุงูุฃุณุงุณู ุงูุฐู ูุชู ุชุซุจูุชู ูู ุงูุบุงูุจ ุนูู ูุธุงู ุงูุชุดุบูู ูุฐุง.  ููููุณ ูู ุฃูุถูุง ูุธุงู ุงูุชุดุบูู ุงูููุตู ุจู ููุดุฑ ูุงููุง ููุฃุบุฑุงุถ ุงูุนุงูุฉ.  ููุญุตูู ุนูู ูุนูููุงุช ุญูู ุชุซุจูุช Kafka ุนูู ูุธุงูู ุงูุชุดุบูู Windows ู MacOS ุ ุฑุงุฌุน ุงูููุญู ุฃ. <br><br>  <b>ุชุซุจูุช ุฌุงูุง</b> <br><br>  ูุจู ุชุซุจูุช ZooKeeper ุฃู Kafka ุ ูุฌุจ ุชุซุจูุช ุจูุฆุฉ Java ูุชูููููุง.  ูู ุงููุณุชุญุณู ุงุณุชุฎุฏุงู Java 8 ุ ููุฏ ูููู ูุฐุง ุฅุตุฏุงุฑูุง ุ ุฅูุง ูุถูู ูู ูุธุงู ุงูุชุดุบูู ุงูุฎุงุต ุจู ุฃู ุชู ุชูุฒููู ูุจุงุดุฑุฉ ูู java.com.  ุนูู ุงูุฑุบู ูู ุฃู ZooKeeper ู Kafka ุณูุนููุงู ูุน Java Runtime Edition ุ ุฅูุง ุฃูู ูู ุงูููุงุฆู ุฃูุซุฑ ุงุณุชุฎุฏุงู ูุฌููุนุฉ ุชุทููุฑ Java ุงููุงููุฉ (JDK) ุนูุฏ ุชุทููุฑ ุงูุฃุฏูุงุช ูุงูุชุทุจููุงุช.  ุชูุชุฑุถ ุฎุทูุงุช ุงูุชุซุจูุช ูุฐู ุฃู ูุฏูู JDK ุงูุฅุตุฏุงุฑ 8.0.51 ูุซุจุชูุง ูู ุงูุฏููู /usr/java/jdk1.8.0_51. <br><br>  <b>ูู ุจุชุซุจูุช ZooKeeper</b> <br><br>  ูุณุชุฎุฏู Apache Kafka ZooKeeper ูุชุฎุฒูู ุงูุจูุงูุงุช ุงููุตููุฉ ุญูู ูุฌููุนุฉ Kafka ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชูุงุตูู ุญูู ุนููุงุก ุงููุณุชููููู (ุงูุดูู 2.1).  ุนูู ุงูุฑุบู ูู ุฃูู ูููู ุฃูุถูุง ุฅุทูุงู ZooKeeper ุจุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุงููุตูุฉ ุงููุถููุฉ ูู ุชูุฒูุน Kafka ุ ุฅูุง ุฃู ุชุซุจูุช ุงูุฅุตุฏุงุฑ ุงููุงูู ูู ูุณุชูุฏุน ZooKeeper ูู ุงูุชูุฒูุน ุจุณูุท ููุบุงูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/a-/ye/ed/a-yeeda4ysojxtp4kcwlnmufwlc.png" alt="ุงูุตูุฑุฉ"></div><br>  ุชู ุงุฎุชุจุงุฑ Kafka ุจุฏูุฉ ูุน ุงูุฅุตุฏุงุฑ ุงููุณุชูุฑ 3.4.6 ูู ูุณุชูุฏุน ZooKeeper ุ ูุงูุฐู ูููู ุชูุฒููู ูู apache.org. <br><br>  <b>ุฎุงุฏู ูุณุชูู</b> <br><br>  ููุถุญ ุงููุซุงู ุงูุชุงูู ุชุซุจูุช ZooKeeper ุจุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ ูู ุฏููู / usr / local / zookeeper ูุญูุธ ุงูุจูุงูุงุช ูู ุฏููู / var / lib / zookeeper: <br><br><pre style=";text-align:right;direction:rtl"><code class="hljs delphi"># tar -zxf zookeeper-<span class="hljs-number"><span class="hljs-number">3.4</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>.tar.gz # mv zookeeper-<span class="hljs-number"><span class="hljs-number">3.4</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span> /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/zookeeper # mkdir -p /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/lib/zookeeper # cat &gt; /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/zookeeper/conf/zoo.cfg &lt;&lt; EOF &gt; tickTime=<span class="hljs-number"><span class="hljs-number">2000</span></span> &gt; dataDir=/<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/lib/zookeeper &gt; clientPort=<span class="hljs-number"><span class="hljs-number">2181</span></span> &gt; EOF # /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/zookeeper/bin/zkServer.sh start JMX enabled by <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Using config: /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/zookeeper/bin/../conf/zoo.cfg Starting zookeeper ... STARTED # <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> JAVA_HOME=/usr/java/jdk1.<span class="hljs-number"><span class="hljs-number">8.0</span></span>_51 # /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/zookeeper/bin/zkServer.sh start JMX enabled by <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Using config: /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/zookeeper/bin/../conf/zoo.cfg Starting zookeeper ... STARTED #</code> </pre> <br>  ุงูุขู ููููู ุงูุชุญูู ูู ุฃูู ูู ุงูููุชุฑุถ ุฃู ูุนูู ZooKeeper ูู ูุถุน ุนุฏู ุงูุงุชุตุงู ุนู ุทุฑูู ุงูุงุชุตุงู ุจูููุฐ ุงูุนููู ูุฅุฑุณุงู ุฃูุฑ srvr ุงููููู ูู ุฃุฑุจุนุฉ ุฃุญุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"># telnet localhost <span class="hljs-number"><span class="hljs-number">2181</span></span> Trying ::<span class="hljs-number"><span class="hljs-number">1.</span></span>.. Connected <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> localhost. <span class="hljs-keyword"><span class="hljs-keyword">Escape</span></span> <span class="hljs-type"><span class="hljs-type">character</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">'^]'</span></span>. srvr Zookeeper <span class="hljs-keyword"><span class="hljs-keyword">version</span></span>: <span class="hljs-number"><span class="hljs-number">3.4</span></span><span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">-1569965</span></span>, built <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>/<span class="hljs-number"><span class="hljs-number">20</span></span>/<span class="hljs-number"><span class="hljs-number">2014</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span>:<span class="hljs-number"><span class="hljs-number">09</span></span> GMT Latency min/avg/max: <span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> Received: <span class="hljs-number"><span class="hljs-number">1</span></span> Sent: <span class="hljs-number"><span class="hljs-number">0</span></span> Connections: <span class="hljs-number"><span class="hljs-number">1</span></span> Outstanding: <span class="hljs-number"><span class="hljs-number">0</span></span> Zxid: <span class="hljs-number"><span class="hljs-number">0x0</span></span> Mode: standalone Node count: <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Connection</span></span> closed <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">foreign</span></span> host. #</code> </pre> <br>  <b>ูุฑูุฉ ุญุฏููุฉ ุงูุญููุงู</b> <br><br>  ุชุณูู ูุฌููุนุฉ ZooKeeper ูุฌููุนุฉ.  ูุธุฑูุง ูุทุจูุนุฉ ุงูุฎูุงุฑุฒููุฉ ููุณูุง ุ ููุตู ุจุฃู ุชุชุถูู ุงููุฌููุนุฉ ุนุฏุฏูุง ูุฑุฏููุง ูู ุงูุฎูุงุฏู ุ ุนูู ุณุจูู ุงููุซุงู ุ 3 ุ 5 ุ ููุง ุฅูู ุฐูู ุ ูุฃูู ุญุชู ูุชููู ZooKeeper ูู ุงูุงุณุชุฌุงุจุฉ ููุทูุจุงุช ุ ูุฌุจ ุฃู ุชุนูู ุบุงูุจูุฉ ุฃุนุถุงุก ุงููุฌููุนุฉ (ุงููุตุงุจ ุงููุงูููู).  ูุฐุง ูุนูู ุฃู ูุฌููุนุฉ ูู ุซูุงุซ ุนูุฏ ูููู ุฃู ุชุนูู ูุน ุนูุฏุฉ ุฎุงููุฉ ูุงุญุฏุฉ.  ุฅุฐุง ูุงูุช ุงููุฌููุนุฉ ุชุญุชูู ุนูู ุซูุงุซ ุนูุฏ ุ ููุฏ ูููู ููุงู ุนูุฏุงู. <br><br>  ูุชูููู ุชุดุบูู ุฎูุงุฏู ZooKeeper ูู ุงููุฌููุนุฉ ุ ูุฌุจ ุฃู ูููู ูุฏููู ุชูููู ูุงุญุฏ ูุน ูุงุฆูุฉ ุจุฌููุน ุงูุฎูุงุฏู ุ ููุฌุจ ุฃู ูููู ููู ุฎุงุฏู ูู ุฏููู ุงูุจูุงูุงุช ููู myid ุจูุนุฑู ูุฐุง ุงูุฎุงุฏู.  ุฅุฐุง ุชูุช ุชุณููุฉ ุงููุถูููู ูู ุงููุฌููุนุฉ ุจุงุณู zoo1.example.com ู zoo2.example.com ู zoo3.example.com ุ ููุฏ ูุจุฏู ููู ุงูุชูููู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">tickTime=<span class="hljs-number"><span class="hljs-number">2000</span></span> dataDir=/var/lib/zookeeper clientPort=<span class="hljs-number"><span class="hljs-number">2181</span></span> initLimit=<span class="hljs-number"><span class="hljs-number">20</span></span> syncLimit=<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>=zoo1.example.com:<span class="hljs-number"><span class="hljs-number">2888</span></span>:<span class="hljs-number"><span class="hljs-number">3888</span></span> <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span>=zoo2.example.com:<span class="hljs-number"><span class="hljs-number">2888</span></span>:<span class="hljs-number"><span class="hljs-number">3888</span></span> <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>=zoo3.example.com:<span class="hljs-number"><span class="hljs-number">2888</span></span>:<span class="hljs-number"><span class="hljs-number">3888</span></span></code> </pre> <br>  ูู ูุฐุง ุงูุชูููู ุ initLimit ูู ููุฏุงุฑ ุงูููุช ุงูุฐู ูููู ููุนูุฏ ุงูุชุงุจุนุฉ ููู ุงูุงุชุตุงู ุจุงูุณูุฏ.  ุชุญุฏุฏ ูููุฉ syncLimit ุชุฃุฎุฑ ุงูุนูุฏ ุงูุชุงุจุนุฉ ูู ุงูุฑุฆูุณูุฉ.  ูุชู ุชุญุฏูุฏ ููุชุง ุงููููุชูู ูู ูุญุฏุงุช TickTime ุ ุฃู initLimit = 20 ยท 2000 ms = 40 s.  ูุณุฑุฏ ุงูุชูููู ุฃูุถูุง ุฌููุน ุฎูุงุฏู ุงููุฌููุนุงุช.  ูู ูู ุชูุณูู ุงูุฎุงุฏู. X = hostname: peerPort: leaderPort ุจุงููุนููุงุช ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  X ูู ูุนุฑูู ุงูุฎุงุฏู.  ูุฌุจ ุฃู ูููู ุนุฏุฏูุง ุตุญูุญูุง ุ ูููู ูุฏ ูุง ูููู ุงูุนุฏุฏ ูู ุงูุตูุฑ ููุง ูููู ูุชุณูุณููุง ุ </li><li style=";text-align:right;direction:rtl">  ุงุณู ุงููุถูู - ุงุณู ุงููุถูู ุฃู ุนููุงู IP ููุฎุงุฏู ุ </li><li style=";text-align:right;direction:rtl">  peerPort - ูููุฐ TCP ูุชู ูู ุฎูุงูู ุงุชุตุงู ุฎูุงุฏู ุงููุฌููุนุงุช ุจุจุนุถูุง ุงูุจุนุถ ุ </li><li style=";text-align:right;direction:rtl">  leaderPort - ูููุฐ TCP ูุชู ูู ุฎูุงูู ุชุญุฏูุฏ ุงููุถูู. </li></ul><br>  ูููู ุฃู ูุชููู ุงูุนููุงุก ูู ุงูุงุชุตุงู ุจุงููุฌููุนุฉ ูู ุฎูุงู ูููุฐ clientPort ุ ูููู ูุฌุจ ุฃู ูุชููู ุฃุนุถุงุก ุงููุฌููุนุฉ ูู ุชุจุงุฏู ุงูุฑุณุงุฆู ูุน ุจุนุถูู ุงูุจุนุถ ุนูู ุฌููุน ุงูููุงูุฐ ุงูุซูุงุซุฉ. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ููู ุชูููู ูุงุญุฏ ุ ูุฌุจ ุฃู ูููู ููู ุฎุงุฏู ูู ุฏููู dataDir ููู myid.  ูุฌุจ ุฃู ูุญุชูู ุนูู ูุนุฑู ุงูุฎุงุฏู ุงููุทุงุจู ูููุนุฑู ุงููุงุฑุฏ ูู ููู ุงูุชูููู.  ุจุนุฏ ุงูุงูุชูุงุก ูู ูุฐู ุงูุฎุทูุงุช ุ ููููู ุจุฏุก ุชุดุบูู ุงูุฎูุงุฏู ูุณุชุชูุงุนู ูุน ุจุนุถูุง ุงูุจุนุถ ูู ุงููุฌููุนุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฑููุจ ูุงููุง ุจุฑููุฑ </h3><br>  ุจุนุฏ ุงูุงูุชูุงุก ูู ุชูููู Java ู ZooKeeper ุ ููููู ูุชุงุจุนุฉ ุชุซุจูุช Apache Kafka.  ูููู ุชูุฒูู ุฃุญุฏุซ ุฅุตุฏุงุฑ ูู Apache Kafka ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">kafka.apache.org/downloads.html</a> . <br><br>  ูู ุงููุซุงู ุงูุชุงูู ุ ูู ุจุชุซุจูุช ููุตุฉ Kafka ูู ุฏููู / usr / local / kafka ุ ููู ุจุชููููู ูุงุณุชุฎุฏุงู ุฎุงุฏู ZooKeeper ุงูุฐู ุชู ุชุดุบููู ูุณุจููุง ูุญูุธ ููุงุทุน ุณุฌู ุงูุฑุณุงุฆู ูู ุฏููู / tmp / kafka-logs: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"># tar -zxf kafka_2<span class="hljs-number"><span class="hljs-number">.11</span></span><span class="hljs-number"><span class="hljs-number">-0.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>.tgz # mv kafka_2<span class="hljs-number"><span class="hljs-number">.11</span></span><span class="hljs-number"><span class="hljs-number">-0.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/kafka # mkdir /tmp/kafka-logs # export JAVA_HOME=/usr/java/jdk1<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_51 # /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/kafka/bin/kafka-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>.sh -daemon /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/kafka/config/<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>.properties #</code> </pre> <br>  ุจุนุฏ ุฅุทูุงู ูุณูุท Kafka ุ ููููู ุงุฎุชุจุงุฑ ุฃุฏุงุฆู ูู ุฎูุงู ุฅุฌุฑุงุก ุฃู ุนูููุงุช ุจุณูุทุฉ ูุน ุงููุฌููุนุฉ ุ ุจูุง ูู ุฐูู ุฅูุดุงุก ููุถูุน ุงุฎุชุจุงุฑ ุ ูุฅูุดุงุก ุงูุฑุณุงุฆู ูุงุณุชููุงููุง. <br><br>  ุฅูุดุงุก ููุญุต ุงูููุงุถูุน: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta"># /usr/local/kafka/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test Created topic </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"test"</span></span></span><span class="hljs-meta">. # /usr/local/kafka/bin/kafka-topics.sh --zookeeper localhost:2181 --describe --topic test Topic:test PartitionCount:1 ReplicationFactor:1 Configs: Topic: test Partition: 0 Leader: 0 Replicas: 0 Isr: 0 #</span></span></code> </pre> <br>  ุฅูุดุงุก ุฑุณุงุฆู ูููุถูุน ุงูุงุฎุชุจุงุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs delphi"># /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/kafka/bin/kafka-console-producer.sh --broker-list localhost:<span class="hljs-number"><span class="hljs-number">9092</span></span> --topic test Test <span class="hljs-keyword"><span class="hljs-keyword">Message</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Test <span class="hljs-keyword"><span class="hljs-keyword">Message</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> ^D #</code> </pre> <br>  ุงุณุชููุงู ุงูุฑุณุงุฆู ูู ููุถูุน ุงูุงุฎุชุจุงุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs delphi"># /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/kafka/bin/kafka-console-consumer.sh --zookeeper localhost:<span class="hljs-number"><span class="hljs-number">2181</span></span> --topic test --from-beginning Test <span class="hljs-keyword"><span class="hljs-keyword">Message</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Test <span class="hljs-keyword"><span class="hljs-keyword">Message</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> ^C Consumed <span class="hljs-number"><span class="hljs-number">2</span></span> messages #</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุชูููู ุงููุณูุท </h3><br>  ูุซุงู ุชูููู ุงููุณูุท ุงูููุฏู ูุน ุชูุฒูุน Kafka ููุงุณุจ ุชูุงููุง ููุชุดุบูู ุงูุชุฌุฑูุจู ูุฎุงุฏู ูุณุชูู ุ ูููู ุจุงููุณุจุฉ ููุนุธู ุงูุชุฑููุจุงุช ุ ูู ูููู ูุงููุงู.  ููุงู ุงูุนุฏูุฏ ูู ุฎูุงุฑุงุช ุชูููู ูุงููุง ุงูุชู ุชุญูู ุฌููุน ุฌูุงูุจ ุงูุชุซุจูุช ูุงูุชูููู.  ููููู ุชุฑู ุงูููู ุงูุงูุชุฑุงุถูุฉ ููุนุฏูุฏ ูููุง ุ ูุฃููุง ุชุชุนูู ุจุงููุฑูู ุงูุฏูููุฉ ูู ุฅุนุฏุงุฏ ูุณูุท Kafka ุงูุฐู ูุง ููุทุจู ุญุชู ุชุนูู ูุน ุณููุงุฑูู ูุญุฏุฏ ูุชุทูุจ ุงุณุชุฎุฏุงููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏุงุช ุงููุณูุท ุงูุฃุณุงุณูุฉ </h3><br>  ููุงู ุงูุนุฏูุฏ ูู ุฅุนุฏุงุฏุงุช ูุณูุท Kafka ุงูุชู ูุฌุจ ูุฑุงุนุงุชูุง ุนูุฏ ูุดุฑ ุงููุธุงู ุงูุฃุณุงุณู ูู ุฃู ุจูุฆุฉ ุ ุจุงุณุชุซูุงุก ูุณูุท ูุณุชูู ุนูู ุฎุงุฏู ูููุตู.  ุชุชุนูู ูุฐู ุงููุนููุงุช ุจุงูุฅุนุฏุงุฏุงุช ุงูุฑุฆูุณูุฉ ูููุณูุท ุ ููุฌุจ ุชุบููุฑ ูุนุธููุง ุญุชู ูุชููู ุงููุณูุท ูู ุงูุนูู ูู ูุฌููุนุฉ ูุน ูุณุทุงุก ุขุฎุฑูู. <br><br>  <b>broker.id</b> <br><br>  ูุฌุจ ุฃู ูููู ููู ูุณูุท Kafka ูุนุฑู ุตุญูุญ ูุญุฏุฏ ุจูุงุณุทุฉ ุงููุนููุฉ broker.id.  ุจุดูู ุงูุชุฑุงุถู ุ ูุฐู ุงููููุฉ ูู 0 ุ ูููู ูููู ุฃู ุชููู ุฃู ุฑูู.  ุงูุดูุก ุงูุฑุฆูุณู ูู ุฃูู ูุง ูุชูุฑุฑ ุฏุงุฎู ููุณ ูุฌููุนุฉ ูุงููุง.  ูููู ุฃู ูููู ุงุฎุชูุงุฑ ุงูุฑูู ุชุนุณูููุง ุ ูุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูู ุฃุฌู ุฑุงุญุฉ ุงูุตูุงูุฉ ุ ูููู ูููู ูู ูุณูุท ุฅูู ุขุฎุฑ.  ูู ุงููุณุชุญุณู ุฃู ูููู ูุฐุง ุงูุฑูู ูุฑุชุจุทูุง ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุจุงููุถูู ุ ุซู ุชููู ูุฑุงุณูุงุช ูุนุฑูุงุช ุงููุณูุท ูููุถูููู ูุน ุงูุชุชุจุน ุฃูุซุฑ ุดูุงููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงูุช ุฃุณูุงุก ุงููุถูููู ุชุญุชูู ุนูู ุฃุฑูุงู ูุฑูุฏุฉ (ุนูู ุณุจูู ุงููุซุงู ุ host1.example.com ุ host2.example.com ุ ุฅูุฎ) ุ ูุณุชููู ูุฐู ุงูุฃุฑูุงู ุฎูุงุฑูุง ุฌูุฏูุง ูููู broker.id. <br><br>  <b>ูููุงุก</b> <br><br>  ูุจุฏุฃ ููู ุงูุชูููู ุงููููุฐุฌู Kafka ูุน ูุณุชูุน ุนูู ูููุฐ TCP 9092. ูููู ุชุบููุฑ ูุฐุง ุงููููุฐ ุฅูู ุฃู ูููุฐ ุขุฎุฑ ูุชุงุญ ุนู ุทุฑูู ุชุบููุฑ ูููุฐ ูุนููุฉ ุงูุชูููู.  ุถุน ูู ุงุนุชุจุงุฑู ุฃูู ุนูุฏ ุงุฎุชูุงุฑ ูููุฐ ุจุฑูู ุฃูู ูู 1024 ุ ูุฌุจ ุชุดุบูู Kafka ูุฌุฐุฑ.  ูุง ููุตู ุจุชุดุบูู ูุงููุง ูุฌุฐุฑ. <br><br>  <b>zookeeper.connect</b> <br><br>  ูุชู ุชุนููู ุงููุณุงุฑ ุงูุฐู ูุณุชุฎุฏูู ZooKeeper ูุชุฎุฒูู ุจูุงูุงุช ุชุนุฑูู ุงููุณูุท ุจุงุณุชุฎุฏุงู ูุนููุฉ ุงูุชูููู zookeeper.connect.  ูู ุชูููู ุงูุนููุฉ ุ ูุนูู ZooKeeper ุนูู ุงููููุฐ 2181 ุนูู ุงููุถูู ุงููุญูู ุ ูุงูุฐู ูุดุงุฑ ุฅููู ุนูู ุฃูู localhost: 2181.  ุชูุณูู ูุฐู ุงููุนููุฉ ูู ูุงุฆูุฉ ููุตููุฉ ุจููุงุตู ููููุทุฉ ูุฎุทูุท ุงุณู ูุถูู ุงููููุฐุฌ: port / path ุ ุจูุง ูู ุฐูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุณู ุงููุถูู - ุงุณู ุงููุถูู ุฃู ุนููุงู IP ูุฎุงุฏู ZooKeeper ุ </li><li style=";text-align:right;direction:rtl">  ุงููููุฐ - ุฑูู ูููุฐ ุงูุนููู ููุฎุงุฏู ุ </li><li style=";text-align:right;direction:rtl">  / path - ูุณุงุฑ ZooKeeper ุงุฎุชูุงุฑู ููุณุชุฎุฏู ููุณุงุฑ ุฌุฐุฑ ุฌุฏูุฏ (chroot) ูู ูุฌููุนุฉ Kafka.  ุฅุฐุง ูู ูุชู ุชุญุฏูุฏู ุ ูุชู ุงุณุชุฎุฏุงู ูุณุงุฑ ุงูุฌุฐุฑ. </li></ul><br>  ุฅุฐุง ูุงู ูุณุงุฑ chroot ุงููุญุฏุฏ ุบูุฑ ููุฌูุฏ ุ ูุณูุชู ุฅูุดุงุคู ุนูุฏูุง ูุจุฏุฃ ุงููุณูุท. <br><br>  <b>ุณุฌูุงุช</b> <br><br>  ูุญูุธ Kafka ุฌููุน ุงูุฑุณุงุฆู ุนูู ูุญุฑู ุงูุฃูุฑุงุต ุงูุซุงุจุชุฉ ุ ููุชู ุชุฎุฒูู ูุฐู ุงูุฃุฌุฒุงุก ูู ุงูุณุฌู ูู ุงูุฏูุงุฆู ุงููุญุฏุฏุฉ ูู ุฅุนุฏุงุฏ log.dirs.  ููู ูุงุฆูุฉ ูุณุงุฑุงุช ููุตููุฉ ุจููุงุตู ูู ุงููุธุงู ุงููุญูู.  ุฅุฐุง ุชู ุชุญุฏูุฏ ุนุฏุฉ ูุณุงุฑุงุช ุ ุณูุญูุธ ุงููุณูุท ุงูุฃูุณุงู ูููุง ููููุง ููุจุฏุฃ ุงูุฃูู ุงุณุชุฎุฏุงููุง ุ ูุน ุงูุญูุงุธ ุนูู ููุงุทุน ุงูุณุฌู ุงูุฎุงุตุฉ ุจูุณู ูุงุญุฏ ุนูู ุทูู ูุณุงุฑ ูุงุญุฏ.  ูุงุญุธ ุฃู ุงููุณูุท ุณูุถุน ุงููุณู ุงูุฌุฏูุฏ ูู ุงูุฏููู ุงูุฐู ูุชู ููู ุชุฎุฒูู ุงูุฃูุณุงู ุงูุฃูู ูู ุงูููุช ุงูุญุงูู ุ ูููุณ ุงููุณุงุญุฉ ุงูุฃูู ุ ุจุญูุซ ูุง ูุชู ุถูุงู ุงูุชูุฒูุน ุงูููุญุฏ ููุจูุงูุงุช ุจูู ุงูุฃูุณุงู. <br><br>  <b>num.recovery.threads.per.data.dir</b> <br><br>  ูุณุชุฎุฏู Kafka ุชุฌูุน ูุคุดุฑ ุชุฑุงุจุท ูุฎุตุต ููุนุงูุฌุฉ ููุงุทุน ุงูุณุฌู.  ูุชู ุชุทุจููู ุญุงูููุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุซูุงุก ุจุฏุก ุงูุชุดุบูู ุงูุนุงุฏู - ููุชุญ ููุงุทุน ุงูุณุฌู ููู ูุณู ุ </li><li style=";text-align:right;direction:rtl">  ุงูุจุฏุก ุจุนุฏ ุงููุดู - ููุชุญูู ูู ููุงุทุน ุงูุณุฌู ููู ูุณู ูุงูุชุทุงุนูุง ุ </li><li style=";text-align:right;direction:rtl">  ุฅููุงู - ูุฅุบูุงู ููุงุทุน ุงูุณุฌู ุจุฑูู. </li></ul><br>  ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุงุณุชุฎุฏุงู ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ููุท ููู ุฏููู ุณุฌู.  ูุธุฑูุง ูุฃู ูุฐุง ูุญุฏุซ ููุท ุนูุฏ ุงูุจุฏุก ูุงูุชููู ุ ููู ุงูููุทูู ุงุณุชุฎุฏุงู ุงููุฒูุฏ ูููุง ูู ุฃุฌู ููุงุฒุงุฉ ุงูุนูููุงุช.  ุนูุฏ ุงูุชุนุงูู ูู ุฅููุงู ุชุดุบูู ุบูุฑ ุตุญูุญ ุ ูููู ุฃู ุชุตู ููุงุฆุฏ ุงุณุชุฎุฏุงู ูุฐุง ุงูููุฌ ุฅูู ุนุฏุฉ ุณุงุนุงุช ุฅุฐุง ุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงููุณูุท ุงูุฐู ูุญุชูู ุนูู ุนุฏุฏ ูุจูุฑ ูู ุงูุฃูุณุงู!  ุชุฐูุฑ ุฃูู ูุชู ุชุญุฏูุฏ ูููุฉ ูุฐู ุงููุนููุฉ ุจูุงุกู ุนูู ุฏููู ุณุฌู ูุงุญุฏ ูู ุงูุฑูู ุงููุญุฏุฏ ุจุงุณุชุฎุฏุงู log.dirs.  ุฃู ุ ุฅุฐุง ูุงูุช ูููุฉ ุงููุนููุฉ num.recovery.threads.per.data.dir ูู 8 ุ ูุชู ุชุญุฏูุฏ ุซูุงุซุฉ ูุณุงุฑุงุช ูู log.dirs ุ ูุฅู ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุคุดุฑุงุช ุงูุชุฑุงุจุท ูู 24. <br><br>  <b>auto.create.topics.enable</b> <br><br>  ููููุง ููุชูููู ุงูุงูุชุฑุงุถู ูู Kafka ุ ูุฌุจ ุนูู ุงููุณูุท ุฅูุดุงุก ุณูุฉ ุชููุงุฆููุง ุนูุฏูุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงูุตุงูุน ูู ุงููุชุงุจุฉ ูู ุณุทุฑ ุงูููุถูุน ุ </li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงููุณุชููู ูู ุงููุฑุงุกุฉ ูู ููุถูุน ุงูุฑุณุงูุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุทูุจ ุฃู ุนููู ุงูุจูุงูุงุช ุงููุตููุฉ ููููุถูุน. </li></ul><br>  ูู ูุซูุฑ ูู ุงูุญุงูุงุช ุ ูุฏ ูููู ูุฐุง ุงูุณููู ุบูุฑ ูุฑุบูุจ ููู ุ ุฎุงุตุฉ ูุฃูู ูุง ุชูุฌุฏ ุทุฑููุฉ ููุชุญูู ูู ูุฌูุฏ ููุถูุน ุจุงุณุชุฎุฏุงู ุจุฑูุชูููู ูุงููุง ุฏูู ุงูุชุณุจุจ ูู ุฅูุดุงุฆู.  ุฅุฐุง ููุช ุชุชุญูู ูู ุฅูุดุงุก ุฐูู ุจุดูู ุตุฑูุญ ุฃู ูุฏูู ุฃู ูู ุฎูุงู ูุธุงู ุงูุชููุฆุฉ ุ ูููููู ุชุนููู ุงููุนููุฉ auto.create.topics.enable ุนูู false. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏุงุช ุงูุณูุฉ ุงูุงูุชุฑุงุถูุฉ </h3><br>  ูุญุฏุฏ ุชูููู ุฎุงุฏู Kafka ุงููุซูุฑ ูู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ููููุถูุนุงุช ุงูุชู ุชู ุฅูุดุงุคูุง.  ูููู ุชุนููู ุจุนุถ ูุฐู ุงููุนููุงุช ุ ุจูุง ูู ุฐูู ุนุฏุฏ ุงูุฃูุณุงู ููุนููุงุช ุญูุธ ุงูุฑุณุงุฆู ุ ููู ููุถูุน ุนูู ุญุฏุฉ ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงูุฅุฏุงุฑุฉ (ุงูููุถุญุฉ ูู ุงููุตู 9).  ูุฌุจ ุชุนููู ุงูููู ุงูุงูุชุฑุงุถูุฉ ูู ุชูููู ุงูุฎุงุฏู ูุณุงููุฉ ููููู ุงููุฑุฌุนูุฉ ุงูููุงุณุจุฉ ููุนุธู ููุถูุนุงุช ุงููุฌููุนุฉ. <br><br>  <b>ุนุฏุฏ ุงูุฃูุณุงู</b> <br><br>  ุชุญุฏุฏ ุงููุนููุฉ num.partitions ุนุฏุฏ ุงูุฃูุณุงู ุงูุชู ูุชู ุฅูุดุงุก ููุถูุน ุฌุฏูุฏ ููุง ุ ุจุดูู ุฑุฆูุณู ุนูุฏ ุชูููู ุงูุฅูุดุงุก ุงูุชููุงุฆู ุญุณุจ ุงูุณูุงุช (ููู ุงูุณููู ุงูุงูุชุฑุงุถู).  ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููุฐู ุงููุนููุฉ ูู 1. ุถุน ูู ุงุนุชุจุงุฑู ุฃูู ูููู ุฒูุงุฏุฉ ุนุฏุฏ ุฃูุณุงู ุงูููุถูุน ููุท ุ ูููู ูุง ูุชู ุชููููู.  ูุฐุง ูุนูู ุฃูู ุฅุฐุง ูุงู ูุชุทูุจ ุฃูุณุงููุง ุฃูู ููุง ูู ูุฐููุฑ ูู num.partitions ุ ูุณูุชุนูู ุนููู ุฅูุดุงุฆู ุจุนูุงูุฉ ูุฏูููุง (ูุฐุง ููุถุญ ูู ุงููุตู 9). <br><br>  ููุง ุชูุช ููุงูุดุชู ูู ุงููุตู ุงูุฃูู ุ ุชุนุฏ ุงูุฃูุณุงู ุทุฑููุฉ ูุชูุณูุน ูุทุงู ุงูููุงุถูุน ูู ูุฌููุนุฉ ูุงููุง ุ ูุฐูู ูู ุงูููู ุฃู ูููู ูุฏูู ุงูุนุฏุฏ ุงูุฐู ุชุญุชุงุฌู ูููุงุฒูุฉ ุงูุญูู ุนูู ุงูุฑุณุงุฆู ุนุจุฑ ุงููุฌููุนุฉ ุจุฃููููุง ููุง ุชุชู ุฅุถุงูุฉ ุงููุณุทุงุก.  ููุถู ุงูุนุฏูุฏ ูู ุงููุณุชุฎุฏููู ุฃู ูููู ุนุฏุฏ ุงูุฃูุณุงู ูุณุงููุงู ุฃู ุนุฏุฏ ุงููุณุทุงุก ูู ุงููุฌููุนุฉ.  ูุฐุง ูุฌุนู ูู ุงููููู ุชูุฒูุน ุงูุฃูุณุงู ุจุงูุชุณุงูู ุจูู ุงููุณุทุงุก ุ ููุง ุณูุคุฏู ุฅูู ุชูุฒูุน ูุชุณุงูู ููุญูู ุนุจุฑ ุงูุฑุณุงุฆู.  ููุน ุฐูู ุ ูุฐุง ููุณ ุดุฑุทูุง ุฅูุฒุงูููุง ุ ูุฃู ูุฌูุฏ ุงูุนุฏูุฏ ูู ุงูููุงุถูุน ูุณูุญ ูู ุจููุงุฒูุฉ ุงูุญูู. <br><br>  <b>log.retention.ms</b> <br><br>  ุบุงูุจูุง ูุง ูููู ุชุฎุฒูู ุงูุฑุณุงุฆู ูู ูุงููุง ูุญุฏูุฏูุง ูู ุงูููุช.  ูุชู ุชุญุฏูุฏ ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู ููู ุงูุชูููู ุจุงุณุชุฎุฏุงู ุงููุนููุฉ log.retention.hours ูุชุณุงูู 168 ุณุงุนุฉ ุฃู ุฃุณุจูุน ูุงุญุฏ.  ููุน ุฐูู ุ ููููู ุงุณุชุฎุฏุงู ูุนููุชูู ุฃุฎุฑููู - log.retention.minutes ู log.retention.ms.  ุชุญุฏุฏ ูุฐู ุงููุนููุงุช ุงูุซูุงุซ ููุณ ุงูุดูุก - ุงููุชุฑุฉ ุงูุฒูููุฉ ุงูุชู ูุชู ุจุนุฏูุง ุญุฐู ุงูุฑุณุงุฆู.  ูููู ูููุตุญ ุจุงุณุชุฎุฏุงู ุงููุนููุฉ log.retention.ms ุ ูุฃูู ุฅุฐุง ุชู ุชุญุฏูุฏ ุงูุนุฏูุฏ ูู ุงููุนููุงุช ุ ูุฅู ุงูุฃููููุฉ ุชูุชูู ุฅูู ุฃุตุบุฑ ูุญุฏุฉ ููุงุณ ุ ูุฐูู ุณูุชู ุงุณุชุฎุฏุงู ูููุฉ log.retention.ms ุฏุงุฆููุง. <br><br>  <b>log.retention.bytes</b> <br><br>  ููุงู ุทุฑููุฉ ุฃุฎุฑู ููุญุฏ ูู ุตูุงุญูุฉ ุงูุฑุณุงุฆู ุชุนุชูุฏ ุนูู ุงูุญุฌู ุงูุฅุฌูุงูู (ุจุงูุจุงูุช) ููุฑุณุงุฆู ุงููุฎุฒูุฉ.  ูุชู ุชุนููู ุงููููุฉ ุจุงุณุชุฎุฏุงู ุงููุนููุฉ log.retention.bytes ููุชู ุชุทุจูููุง ุจุดูู ูููุตู.  ูุฐุง ูุนูู ุฃูู ูู ุญุงูุฉ ูุฌูุฏ ููุถูุน ูู ุซูุงููุฉ ุฃูุณุงู ูุชุณุงูู 1 ุฌูุฌุง ุจุงูุช ูู ูููุฉ log.retention.bytes ุ ูุฅู ุงูุญุฏ ุงูุฃูุตู ููููุฉ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ููุฐุง ุงูููุถูุน ุณูููู 8 ุฌูุฌุง ุจุงูุช.  ูุงุญุธ ุฃู ููุฏุงุฑ ุงูุชุฎุฒูู ูุนุชูุฏ ุนูู ุงูุฃูุณุงู ุงููุฑุฏูุฉ ูููุณ ุนูู ุงูููุถูุน.  ูุฐุง ูุนูู ุฃูู ุฅุฐุง ุฒุงุฏ ุนุฏุฏ ุฃูุณุงู ุงูููุถูุน ุ ูุณูุฒุฏุงุฏ ุฃูุถูุง ุงูุญุฏ ุงูุฃูุตู ูู ุงูุจูุงูุงุช ุงููุญููุธุฉ ุนูุฏ ุงุณุชุฎุฏุงู log.retention.bytes. <br><br>  <b>log.segment.bytes</b> <br><br>  ุฅุนุฏุงุฏุงุช ุงูุชุณุฌูู ุงููุฐููุฑุฉ ุชุชุนูู ุจููุงุทุน ุงูุณุฌู ุ ูููุณ ุงูุฑุณุงุฆู ุงููุฑุฏูุฉ.  ููุง ูุชู ุฅูุดุงุก ุงูุฑุณุงุฆู ูู ูุจู ูุณูุท Kafka ุ ุชุชู ุฅุถุงูุชูุง ุฅูู ููุงูุฉ ููุทุน ุงูููููุฉ ุงูุญุงูู ูู ุงููุณู ุงูููุงุจู.  ุนูุฏูุง ูุตู ููุทุน ุงูุณุฌู ุฅูู ุงูุญุฌู ุงููุญุฏุฏ ุจูุงุณุทุฉ ุงููุนููุฉ log.segment.bytes ููุณุงูู 1 ุบูุบุงุจุงูุช ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุฅุบูุงู ูุฐุง ุงูููุทุน ูููุชุญ ููุทุน ุฌุฏูุฏ.  ุจุนุฏ ุงูุฅุบูุงู ุ ูููู ุณุญุจ ุฌุฒุก ุงูููููุฉ.  ูููุง ุตุบุฑ ุญุฌู ููุงุทุน ุงูุณุฌู ุ ูููุง ูุงู ุนููู ุฅุบูุงู ุงููููุงุช ูุฅูุดุงุก ููุงุทุน ุฌุฏูุฏุฉ ุ ููุง ูููู ูู ุงูููุงุกุฉ ุงูุฅุฌูุงููุฉ ูุนูููุงุช ุงููุชุงุจุฉ ุนูู ุงููุฑุต. <br><br>  ูุนุฏ ุชุบููุฑ ุญุฌู ุฃุฌุฒุงุก ุงูุณุฌู ุฃูุฑูุง ููููุง ุนูุฏูุง ุชุชููุฒ ุงูููุถูุนุงุช ุจุชูุฑุงุฑ ููุฎูุถ ูุชูููุฏ ุงูุฑุณุงุฆู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุชููู ููุถูุน ูุง 100 ููุบุงุจุงูุช ููุท ูู ุงูุฑุณุงุฆู ูููููุง ุ ูุชู ุชุนููู ูุนููุฉ log.segment.bytes ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ุ ูุณูุณุชุบุฑู ููุก ููุทุน ูุงุญุฏ 10 ุฃูุงู.  ูุจูุง ุฃูู ูุง ูููู ุงุนุชุจุงุฑ ุงูุฑุณุงุฆู ุบูุฑ ุตุงูุญุฉ ุญุชู ูุชู ุฅุบูุงู ููุทุน ุงูุณุฌู ุ ูุนูุฏุฆุฐู ุจูููุฉ 604.8 ููููู (ุฃุณุจูุน ูุงุญุฏ) ูู ูุนููุฉ log.retention.ms ุ ูููู ุฃู ุชุชุฑุงูู ุงูุฑุณุงุฆู ูู 17 ููููุง ูุจู ุณุญุจ ููุทุน ุงูุณุฌู ุงููุบูู ูู ุงูุชุฏุงูู.  ูุฐูู ูุฃูู ุนูุฏ ุฅุบูุงู ุดุฑูุญุฉ ุชุญุชูู ุนูู ุฑุณุงุฆู ุชุฑุงููุช ุนูู ูุฏุงุฑ 10 ุฃูุงู ุ ูุชุนูู ุนููู ุชุฎุฒูููุง ููุฏุฉ 7 ุฃูุงู ุฃุฎุฑู ูุจู ุฃู ุชุชููู ูู ุณุญุจูุง ููููุง ููููุงุนุฏ ุงููุคูุชุฉ ุงููุนุชูุฏุฉ ุ ุญูุซ ูุง ูููู ุญุฐู ุงูุดุฑูุญุฉ ูุจู ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑุณุงูุฉ ุงูุฃุฎูุฑุฉ ูููุง . <br><br>  <b>log.segment.ms</b> <br><br>  ููุงู ุทุฑููุฉ ุฃุฎุฑู ููุชุญูู ูู ุฅุบูุงู ููุงุทุน ุงูุณุฌู ุจุงุณุชุฎุฏุงู ุงููุนููุฉ log.segment.ms ุ ุงูุชู ุชุญุฏุฏ ุทูู ุงููุชุฑุฉ ุงูุฒูููุฉ ุงูุชู ูุชู ุจุนุฏูุง ุฅุบูุงู ููุทุน ุงูุณุฌู.  ูุซู ูุนููุงุช log.retention.bytes ู log.retention.ms ุ ูุฅู ูุนููุงุช log.segment.bytes ู log.segment.ms ููุณุช ุญุตุฑูุฉ ุจุดูู ูุชุจุงุฏู.  ุชุบูู Kafka ููุทุน ุงูุณุฌู ุนูุฏูุง ูููุฏ ุงูููุช ุฃู ูุชู ุงููุตูู ุฅูู ุญุฏ ุงูุญุฌู ุงููุญุฏุฏ ุ ุงุนุชูุงุฏูุง ุนูู ุฃู ูู ูุฐู ุงูุฃุญุฏุงุซ ูุญุฏุซ ุฃููุงู.  ุจุดูู ุงูุชุฑุงุถู ุ ูุง ูุชู ุชุนููู ูููุฉ ุงููุนููุฉ log.segment.ms ุ ููุชูุฌุฉ ูุฐูู ูุชู ุชุญุฏูุฏ ุฅุบูุงู ููุงุทุน ุงูุณุฌู ุญุณุจ ุญุฌููุง. <br><br>  <b>message.max.bytes</b> <br><br>  ูุณูุญ ูุณูุท Kafka ุจุงุณุชุฎุฏุงู ุงููุนููุฉ message.max.bytes ูุชุญุฏูุฏ ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุฑุณุงุฆู ุงูุชู ูุชู ุฅูุดุงุคูุง.  ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ููุฐู ุงููุนููุฉ ูู 1ุ000ุ000 (1 ููุบุงุจุงูุช).  ุณุชุชููู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุงูุชู ุชุญุงูู ุฅุฑุณุงู ุฑุณุงูุฉ ุฃูุจุฑ ุฅุดุนุงุฑูุง ุจุงูุฎุทุฃ ูู ุงููุณูุท ุ ูููู ูู ูุชู ูุจูู ุงูุฑุณุงูุฉ.  ููุง ูู ุงูุญุงู ูู ุฌููุน ุงูุฃุญุฌุงู ุงูุฃุฎุฑู ุจุงูุจุงูุช ุงููุญุฏุฏ ูู ุฅุนุฏุงุฏุงุช ุงููุณูุท ุ ูุชุญุฏุซ ุนู ุญุฌู ุงูุฑุณุงูุฉ ุงููุถุบูุทุฉ ุ ุจุญูุซ ูููู ููุดุฑูุงุช ุงููุตูุนุฉ ุฅุฑุณุงู ุงูุฑุณุงุฆู ุ ููููู ุญุฌููุง ุบูุฑ ูุถุบูุท ุฃูุจุฑ ุจูุซูุฑ ุฅุฐุง ูุงู ูููู ุถุบุทูุง ุฅูู ุงูุญุฏูุฏ ุงููุญุฏุฏุฉ ุจูุงุณุทุฉ message.max.bytes . <br><br>  ูููู ุฃู ุชุคุซุฑ ุฒูุงุฏุฉ ุญุฌู ุงูุฑุณุงูุฉ ุจุดูู ุฎุทูุฑ ุนูู ุงูุฃุฏุงุก.  ูุนูู ุญุฌู ุงูุฑุณุงูุฉ ุงูุฃูุจุฑ ุฃู ุณูุงุณู ุฑุณุงุฆู ุงููุณูุท ุงูุชู ุชุนุงูุฌ ุงุชุตุงูุงุช ุงูุดุจูุฉ ูุงูุทูุจุงุช ุณุชุณุชุบุฑู ููุชูุง ุฃุทูู ููู ุทูุจ.  ููุง ุชุฒูุฏ ุงูุฑุณุงุฆู ุงูุฃูุจุฑ ุญุฌู ุงูุจูุงูุงุช ุงูููุชูุจุฉ ุนูู ุงููุฑุต ุ ููุง ูุคุซุฑ ุนูู ุตุจูุจ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุฎุชูุงุฑ ุงูุฃุฌูุฒุฉ </h3><br>  ุงุฎุชูุงุฑ ุงูุฃุฌูุฒุฉ ุงูููุงุณุจุฉ ูููุณูุท ูุงููุง ูู ูู ุฃูุซุฑ ููู ุนูู.  ูุง ุชุญุชูู ููุตุฉ Kafka ููุณูุง ุนูู ุฃู ูุชุทูุจุงุช ุตุงุฑูุฉ ููุฃุฌูุฒุฉ ุ ุณุชุนูู ุฏูู ูุดุงูู ุนูู ุฃู ูุธุงู.  ูููู ุฅุฐุง ุชุญุฏุซูุง ุนู ุงูุฃุฏุงุก ุ ูุฅูู ูุชุฃุซุฑ ุจุนุฏุฉ ุนูุงูู: ุงูุณุนุฉ ูุฅูุชุงุฌูุฉ ุงูุฃูุฑุงุต ูุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ูุงูุดุจูุฉ ููุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ. <br><br>  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุชุญุฏูุฏ ุฃููุงุน ุงูุฃุฏุงุก ุงูุฃูุซุฑ ุฃูููุฉ ููุธุงูู ุ ูุจุนุฏ ุฐูู ููููู ุงุฎุชูุงุฑ ุงูุชูููู ุงูุฃูุซู ููุฃุฌูุฒุฉ ุงูุฐู ููุงุณุจ ุงูููุฒุงููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅูุชุงุฌูุฉ ุงููุฑุต </h3><br>  ูุคุซุฑ ุฅูุชุงุฌูุฉ ุฃูุฑุงุต ุงููุณูุท ุ ุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ูุชุฎุฒูู ุดุฑุงุฆุญ ุงูุณุฌู ุ ุจุดูู ูุจุงุดุฑ ุนูู ุฃุฏุงุก ุนููุงุก ุงูุชุตููุน.  ูุฌุจ ุฃู ุชููู ุฑุณุงุฆู ูุงููุง ูุฎุตุตุฉ ููุชุฎุฒูู ุงููุญูู ุงูุฐู ูุคูุฏ ุชุณุฌูููุง.  ุนูุฏูุง ููุท ูููู ุงุนุชุจุงุฑ ุนูููุฉ ุงูุฅุฑุณุงู ูุงุฌุญุฉ.  ูุฐุง ูุนูู ุฃูู ูููุง ูุงูุช ุนูููุงุช ุงููุชุงุจุฉ ุนูู ุงููุฑุต ุฃุณุฑุน ุ ูู ุงูุชุฃุฎูุฑ ูู ุฅูุดุงุก ุงูุฑุณุงูุฉ. <br><br>  ุงูุฅุฌุฑุงุก ุงููุงุถุญ ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู ูู ุงููุทุงู ุงูุชุฑุฏุฏู ููุฃูุฑุงุต ูู ุงุณุชุฎุฏุงู ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุฐุงุช ููุญุงุช ุงูุฏูุฑุงู (HDD) ุฃู ูุญุฑูุงุช ุงูุฃูุฑุงุต ุฐุงุช ุงูุญุงูุฉ ุงูุตูุจุฉ (SSD).  ูุญุฑูุงุช ุงูุฃูุฑุงุต ุฐุงุช ุงูุญุงูุฉ ุงูุตูุจุฉ ููุง ุฃูุงูุฑ ุฐุงุช ุญุฌู ุจุญุซ ุฃูู / ููุช ูุตูู ูุฃุฏุงุก ุฃุนูู.  ูุญุฑูุงุช ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุฃูุซุฑ ุงูุชุตุงุฏุง ูููุง ุณุนุฉ ูุณุจูุฉ ุฃุนูู.  ูููู ุชุญุณูู ุฃุฏุงุก ูุญุฑู ุงูุฃูุฑุงุต ุงูุซุงุจุชุฉ ูุธุฑูุง ูุนุฏุฏูู ุงูุฃูุจุฑ ูู ุงููุณูุท ุ ุฃู ุจุงุณุชุฎุฏุงู ุงูุนุฏูุฏ ูู ุฏูุงุฆู ุงูุจูุงูุงุช ุ ุฃู ุนู ุทุฑูู ุชุซุจูุช ุงูุฃูุฑุงุต ูู ูุฌููุนุฉ ูู ุงูุฃูุฑุงุต ุงููุณุชููุฉ ุฐุงุช ุงูุชูุฑุงุฑ (RAID).  ุชุคุซุฑ ุงูุนูุงูู ุงูุฃุฎุฑู ุนูู ุงูุฅูุชุงุฌูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุชูููุฉ ุชุตููุน ุงููุฑุต ุงูุตูุจ (ุนูู ุณุจูู ุงููุซุงู ุ SAS ุฃู SATA) ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฎุตุงุฆุต ูุญุฏุฉ ุชุญูู ุงููุฑุต ุงูุซุงุจุช. <br><br><h3 style=";text-align:right;direction:rtl">  ุณุนุฉ ุงููุฑุต </h3><br>  ุงูุณุนุฉ ูู ุฌุงูุจ ุขุฎุฑ ูู ุงูุชุฎุฒูู.  ูุชู ุชุญุฏูุฏ ุงูููุฏุงุฑ ุงููุทููุจ ูู ูุณุงุญุฉ ุงููุฑุต ูู ุฎูุงู ุนุฏุฏ ุงูุฑุณุงุฆู ุงูุชู ูุฌุจ ุชุฎุฒูููุง ูู ููุณ ุงูููุช.  ุฅุฐุง ูุงู ูู ุงููุชููุน ุฃู ูุชููู ุงููุณูุท 1 ุชูุฑุงุจุงูุช ูู ุญุฑูุฉ ุงููุฑูุฑ ูููููุง ุ ููุน ุงูุชุฎุฒูู ููุฏุฉ 7 ุฃูุงู ุ ุณูุญุชุงุฌ ุฅูู ุงูุชุฎุฒูู ุงููุชุงุญ ูุฃุฌุฒุงุก ุงูุณุฌู ุงูุชู ูุง ุชูู ุนู 7 ุชูุฑุงุจุงูุช.  ูุฌุจ ุฃู ุชููุฑ ุฃูุถูุง ูู ุชุฌุงูุฒ ุจูุณุจุฉ 10 ูช ุนูู ุงูุฃูู ูููููุงุช ุงูุฃุฎุฑู ุ ุฏูู ุงุญุชุณุงุจ ุงููุฎุฒู ุงููุคูุช ูุชููุจุงุช ุญุฑูุฉ ุงููุฑูุฑ ุงููุญุชููุฉ ุฃู ููููุง ุจูุฑูุฑ ุงูููุช. <br><br>  ุชุนุฏ ุณุนุฉ ุงูุชุฎุฒูู ุฃุญุฏ ุงูุนูุงูู ุงูุชู ูุฌุจ ุฃุฎุฐูุง ูู ุงูุงุนุชุจุงุฑ ุนูุฏ ุชุญุฏูุฏ ุงูุญุฌู ุงูุฃูุซู ูุนููุฏุฉ ูุงููุง ูุงูุจุช ูู ุชูุณุนูุง.  ูููู ููุงุฒูุฉ ุฅุฌูุงูู ุญุฑูุฉ ูุฑูุฑ ุงููุชูุฉ ูู ุฎูุงู ุนุฏุฉ ุฃูุณุงู ููู ููุถูุน ุ ููุง ูุณูุญ ูู ุจุงุณุชุฎุฏุงู ูุณุทุงุก ุฅุถุงูููู ูุฒูุงุฏุฉ ุงูุณุนุฉ ุงููุชุงุญุฉ ูู ุงูุญุงูุงุช ุงูุชู ุชููู ูููุง ูุซุงูุฉ ุงูุจูุงูุงุช ููู ูุณูุท ุบูุฑ ูุงููุฉ.  ูุชู ุชุญุฏูุฏ ุงููุฑุงุฑ ุงูุฎุงุต ุจูุณุงุญุฉ ุงููุฑุต ุงููุทููุจุฉ ุฃูุถูุง ูู ุฎูุงู ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงููุชูุงุซู ุงููุญุฏุฏุฉ ูููุฌููุนุฉ (ุชูุช ููุงูุดุชูุง ุจูุฒูุฏ ูู ุงูุชูุตูู ูู ุงููุตู 6). <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฐุงูุฑุฉ </h3><br>  ูู ุงููุถุน ุงูุนุงุฏู ููุชุดุบูู ุ ููุฑุฃ ุงููุณุชููู ูุงููุง ูู ููุงูุฉ ุงููุณู ุ ูุงููุณุชููู ูุนูุถ ุจุงุณุชูุฑุงุฑ ุนู ุงูููุช ุงูุถุงุฆุน ููุชุฎูู ููููุงู ุนู ุงูุดุฑูุงุช ุงููุตูุนุฉ ุ ุนูู ุงูุฅุทูุงู.            ,      ,         . ,         ,    -. <br><br>   Kafka     JVM      .  ,   X        X   ,      5 .             Kafka        .      Kafka  ,      ,       ,     Kafka. <br><br><h3 style=";text-align:right;direction:rtl">     </h3><br>   ,    Kafka,     .    (    )    .     Kafka (   )       .    1       ,       ,      .       ,     (.  6)    (   8).          ,     . <br><br><h3 style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ </h3><br>     ,      ,           .             .  Kafka, ,              .            .    Kafka  '   .            . <br><br><h3 style=";text-align:right;direction:rtl"> Kafka    </h3><br> Kafka      , , Amazon Web Services (AWS). AWS     ,     CPU,     .              Kafka.       ,      .                /      SSD.         (, AWS Elastic Block Store).            CPU   . <br>    ,     AWS      m4  r3.    m4    ,        ,      .      r3      SSD-,        .            i2  d2. <br><br><h3 style=";text-align:right;direction:rtl">  Kafka </h3><br>   Kafka         ,             (. 2.2).     โ      .    โ            .         Kafka        .         Kafka.           6. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/vo/c-/cc/voc-cc5ywmwoh4ttiidnzt1gdk4.png" alt="ุงูุตูุฑุฉ"></div><br><br><h3 style=";text-align:right;direction:rtl">    ? </h3><br>   Kafka   .    โ              .     10  ,      2 ,     โ  .  ,          100 % (    ) (.  6).  ,              . <br><br>   ,   , โ     . ,                        (         ).        80 %   ,    ,             .     ,      ,   .        ,     ,          . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>               Kafka.  โ          zookeeper.connect.    ZooKeeper     .  โ           broker.id.       broker.id    ,            .      ,    ,      ,    . <br><br><h3 style=";text-align:right;direction:rtl">     </h3><br>     Linux      ,       ,           Kafka.          ,    ,        .       /etc/sysctl.conf,        Linux,       . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>     Linux     .           ,    ยซยป  ,        Kafka. <br>     ,  ,    ,    ()  . ,      ,       Kafka.  , Kafka     ,         ,       . <br><br>      โ        .  โ   ,      -   .            .      vm.swappiness  ,  1.      ( ) ,            .     ,   . <br><br>  ,      ยซยป ,      ,   .   Kafka       /.         :        (, SSD),       NVRAM   (, RAID).       ยซยป ,         .       vm.dirty_background_ratio ,     ( 10).       ( ),         5.       0,                           . <br><br>   ยซยป ,               ,      vm.dirty_ratio  ,     โ 20 (        ).       ,      60  80.               ,       /       .       vm.dirty_ratio       Kafka,     . <br><br>          ยซยป      Kafka        .        /proc/vmstat: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta"># cat /proc/vmstat | egrep </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"dirty|writeback"</span></span></span><span class="hljs-meta"> nr_dirty 3875 nr_writeback 29 nr_writeback_temp 0 #</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงูููุงุฏุฉ </h3><br>         ,    RAID-    ,           .     ,        EXT4 (fourth extended file system โ    )  XFS (Extents File System โ     ). EXT4   ,       .       ,     (5),       .  EXT4     ,            .    XFS     ,   ,   EXT4.  XFS    Kafka  ,        ,    .         ,       /. <br><br>     ,        ,     noatime.      /:   (ctime),    (mtime)       (atime).     atime     .        .  atime    ,   ,      ,         (      realtime). Kafka     atime,      .   noatime       /,        ctime  mtime. <br><br><h3 style=";text-align:right;direction:rtl">     </h3><br>       Linux โ     ,    ,             .     Kafka     ,    -    .     (   ) ,         .          .              net.core.wmem_default  net.core.rmem_default ,      2 097 152 (2 ).   ,           ,       . <br><br>              TCP    net.ipv4.tcp_wmem  net.ipv4.tcp_rmem.        ,   ,       .    โ 4096 65536 2048000 โ ,     4 ,    โ 64 ,   โ 2 .      ,      net.core.wmem_max  net.core.rmem_max.        Kafka           . <br><br>      .     TCP    1  net.ipv4.tcp_window_scaling,               .   net.ipv4.tcp_max_syn_backlog ,     1024,     .   net.core.netdev_max_backlog,     1000,       ,       ,    ,       . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>      Kafka      ,             . <br><br><h3 style=";text-align:right;direction:rtl">    </h3><br>     Java      ,           ,   .  ,     Java 7     Garbage First (G1). G1                    .         ,       ,           . <br><br>         G1   .       . <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> MaxGCPauseMillis.         .     โ   G1    .      200 .  ,  G1       ,    ,    , ,      200 . </li><li style=";text-align:right;direction:rtl"> InitiatingHeapOccupancyPercent.        ,       .     45.  ,  G1       ,    45 % ,       (Eden),    . </li></ul><br>  Kafka         ,         .               64   ,  Kafka     5 .       20  MaxGCPauseMillis.    InitiatingHeapOccupancyPercent   35,       ,     . <br><br>   Kafka       G1,            .       .       : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"># export JAVA_HOME=/usr/java/jdk1<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_51 # export KAFKA_JVM_PERFORMANCE_OPTS="-server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+DisableExplicitGC -Djava.awt.headless=true" # /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/kafka/bin/kafka-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>.sh -daemon /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/kafka/config/<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>.properties #</code> </pre> <br><h3 style=";text-align:right;direction:rtl">   </h3><br>          Kafka      ,                 .             -    ,     .         Kafka (.  6),         .        Kafka,       . <br><br>  Kafka             ,  ,                     (    , , AWS),           ,            .          .  ,   ยซยป             (.    6). <br><br>  :    Kafka      ,   ,       ,     .             (     )                   .               , ,     . <br><br><h3 style=";text-align:right;direction:rtl">    ZooKeeper </h3><br> Kafka  ZooKeeper     ,   .   ZooKeeper              Kafka.     ,      ZooKeeper    Kafka  .      ZooKeeper      Kafka (     ZooKeeper   ,      ). <br><br>      ZooKeeper     .        ZooKeeper,  Kafka,      .    ZooKeeper  ,        ZooKeeper        .       โ 1 ,               .        ZooKeeper,      ,     .   ZooKeeper      ,     .  ,      Kafka   Kafka        ZooKeeper. <br><br>         Kafka,       ,    . Kafka         ZooKeeper,          .              ZooKeeper,     .        ,            , ,     .    ,            ,   . <br><br><h3 style=";text-align:right;direction:rtl">  ุงูููุฎุต </h3><br>       ,     Apache Kafka. ,       ,         . ,   Kafka,         Kafka.             Kafka ( 3),       ( 4). <br><br>  ยปูููู ุงูุนุซูุฑ ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงููุชุงุจ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุน ุงููุงุดุฑ ุนูู ุงูููุจ</a> <br>  ยป <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุญุชููุงุช</a> <br>  ยป <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุทูุงุช</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><br></a> <br>    20%   โ <b>Apache Kafka</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar421519/">https://habr.com/ru/post/ar421519/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar421501/index.html">ูุฌุฏ Hacker ุทุฑููุฉ ูุชุชุจุน ุงูุฒุงุฆุฑูู ุฅูู ููุงูุน ุงูููุงูุณูู</a></li>
<li><a href="../ar421503/index.html">ููููุฉ ูุชุงุจุฉ ุงูุชุนูููุงุช ูููููุง</a></li>
<li><a href="../ar421505/index.html">ุงูุงุฎุชุฑุงู ุงููุตุบุฑ ููุญูุงุฉ ููุนูู ูุน Yandex.Direct</a></li>
<li><a href="../ar421507/index.html">ูุงุฐุง ูุงู ุงููุญุงููู ููุจุตุฑูุงุช</a></li>
<li><a href="../ar421513/index.html">ููุฏูุฉ ุณูุณุฉ ูู ูุจู ุงููุทูุฑูู ุฃููุณูู (ูููู ุจุญู ุงูุชูุงูุถุงุช ุ ูุฅูุดุงุก ุงููุฑูู ุ ูุชุฌูุจ ุงูุชุถุงุฑุจ)</a></li>
<li><a href="../ar421521/index.html">ุงููุญูุด ุจุนุฏ ุงูุนุทูุฉ: AMD Threadripper 2990WX 32-Core ู 2950X 16-core (part 3 - ุงุฎุชุจุงุฑุงุช)</a></li>
<li><a href="../ar421523/index.html">ุงููุญุฏุฉ: ุงูุชุนุฑู ุนูู ุงูุฃุดูุงุก ุงููุงุจูุฉ ูููุชุงุจุฉ</a></li>
<li><a href="../ar421525/index.html">ุงููููู ุนู ุงูุงุฎุชูุงูุงุช ุจูู ุงููุถูููู ุงูุฑูุณ ูุงูุฃุฌุงูุจ</a></li>
<li><a href="../ar421527/index.html">ุงูุทูุงู ุจุซ ูุดุฑูุน "ุณูุฑูุฑ ูู ุงูุณุญุงุจ"</a></li>
<li><a href="../ar421529/index.html">Netflix ู Uber ู Google ูุฃูุช ูู MBLT DEV 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>