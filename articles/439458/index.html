<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∞ üïØÔ∏è üë®üèΩ‚Äçüåæ C√≥mo tradujimos el sitio web de la Rep√∫blica a Kubernetes üë¶üèª üÜô üàöÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos los d√≠as no se publican materiales escandalosos, importantes y simplemente muy geniales, y ning√∫n editor se comprometer√° a predecir el √©xito de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo tradujimos el sitio web de la Rep√∫blica a Kubernetes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/439458/"><img src="https://habrastorage.org/webt/w6/od/az/w6odaz9seym3nomzxkvoekqzbms.png"><br><br>  Todos los d√≠as no se publican materiales escandalosos, importantes y simplemente muy geniales, y ning√∫n editor se comprometer√° a predecir el √©xito de un art√≠culo con una precisi√≥n del 100%.  Lo m√°ximo que tiene el equipo es en el nivel de instinto para decir material "fuerte" u "ordinario".  Eso es todo.  Luego comienza la magia impredecible de los medios, gracias a la cual el art√≠culo puede llegar a la cima de los resultados de b√∫squeda con docenas de enlaces de otras publicaciones o el material se hundir√° en el olvido.  Y solo en el caso de la publicaci√≥n de art√≠culos geniales, los sitios de medios peri√≥dicamente caen bajo la monstruosa afluencia de usuarios, que modestamente llamamos el "efecto habrae". <br><br>  Este verano, el sitio web de la publicaci√≥n de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Rep√∫blica se</a> convirti√≥ en una v√≠ctima de la profesionalidad de sus propios autores: los art√≠culos sobre el tema de la reforma de las pensiones, la educaci√≥n escolar y la nutrici√≥n adecuada en total reunieron una audiencia de varios millones de lectores.  La publicaci√≥n de cada uno de los materiales mencionados condujo a cargas tan altas que hasta la ca√≠da del sitio web de la Rep√∫blica, qued√≥ absolutamente un "poco espacio".  La administraci√≥n se dio cuenta de que hab√≠a que cambiar algo: era necesario cambiar la estructura del proyecto de tal manera que pudiera reaccionar vigorosamente a los cambios en las condiciones de trabajo (principalmente carga externa), mientras permanec√≠a completamente funcional y accesible para los lectores incluso en momentos de saltos muy bruscos.  Y una gran ventaja ser√≠a la m√≠nima intervenci√≥n manual del equipo t√©cnico de la Rep√∫blica en esos momentos. <br><br>  Seg√∫n los resultados de una discusi√≥n conjunta con expertos de la Rep√∫blica sobre varias opciones para implementar la lista de deseos sonora, decidimos transferir el sitio web de la publicaci√≥n a Kubernetes *.  Sobre lo que nos cost√≥ a todos, y ser√° nuestra historia de hoy. <br><br>  <i>* Durante la mudanza, ni un solo especialista t√©cnico republicano result√≥ herido</i> <br><a name="habracut"></a><br><h3>  C√≥mo se ve√≠a en t√©rminos generales </h3><br>  Todo comenz√≥, por supuesto, con negociaciones sobre c√≥mo suceder√° todo "ahora" y "m√°s tarde".  Desafortunadamente, el paradigma moderno en el mercado de TI implica que tan pronto como cualquier compa√±√≠a se vaya a un lado por alg√∫n tipo de soluci√≥n de infraestructura, la coloquen en una lista de precios de servicios llave en mano.  Parecer√≠a que el trabajo es "llave en mano": ¬øqu√© podr√≠a ser m√°s y mejor que un director condicional o due√±o de un negocio?  Pagu√© y no me duele la cabeza: planificaci√≥n, desarrollo, apoyo: todo est√° ah√≠, por parte del contratista, el negocio solo puede ganar dinero para pagar un servicio tan agradable. <br><br>  Sin embargo, la transferencia completa de la infraestructura de TI no siempre es apropiada para el cliente a largo plazo.  Es m√°s correcto desde todos los puntos de vista trabajar como un gran equipo, de modo que despu√©s de que se complete el proyecto, el cliente entienda c√≥mo vivir a√∫n m√°s con la nueva infraestructura, y los colegas en el taller no tengan la pregunta "oh, pero ¬øqu√© hicieron aqu√≠?  despu√©s de firmar el certificado de finalizaci√≥n y la demostraci√≥n de los resultados.  Los chicos de la Rep√∫blica eran de la misma opini√≥n.  Como resultado, durante dos meses conseguimos un aterrizaje de cuatro personas para el cliente, que no solo se dieron cuenta de nuestra idea, sino tambi√©n especialistas t√©cnicamente capacitados en el lado de la Rep√∫blica para un mayor trabajo y existencia en las realidades de Kubernetes. <br><br>  Y todas las partes se beneficiaron de esto: completamos r√°pidamente el trabajo, mantuvimos a nuestros especialistas listos para los nuevos logros y obtuvimos a Republic como cliente en soporte consultivo con nuestros propios ingenieros.  La publicaci√≥n, por otro lado, recibi√≥ una nueva infraestructura adaptada a los "efectos de habra", su propio personal retenido de especialistas t√©cnicos y la capacidad de buscar ayuda si es necesario. <br><br><h3>  Estamos preparando una cabeza de puente </h3><br>  "Destruir, no construir".  Este dicho se aplica a cualquier cosa.  Por supuesto, la soluci√≥n m√°s simple parece ser la toma de rehenes mencionada anteriormente de la infraestructura del cliente y encadenarlo a √©l, al cliente para s√≠ mismo, o overclocking del personal existente y el requisito de contratar a un gur√∫ en nuevas tecnolog√≠as.  Fuimos el tercero, no la forma m√°s popular hoy, y comenzamos con la capacitaci√≥n de ingenieros de la Rep√∫blica. <br><br>  Al comienzo, vimos una soluci√≥n de este tipo para garantizar el funcionamiento del sitio: <br><img src="https://habrastorage.org/webt/lh/tu/dx/lhtudxfxmjai0dymprwmpctjmr8.png"><br><br>  Es decir, Republic ten√≠a solo dos servidores de hierro: el principal y el de respaldo.  Lo m√°s importante para nosotros fue lograr un cambio de paradigma en el pensamiento de los especialistas t√©cnicos del cliente, porque antes se ocupaban de un grupo muy simple de NGINX, PHP-fpm y PostgreSQL.  Ahora se enfrentaron con la arquitectura escalable de contenedores de Kubernetes.  Entonces, primero, cambiamos el desarrollo local de la Rep√∫blica al entorno docker-compose.  Y este fue solo el primer paso. <br><br>  Antes de nuestro aterrizaje, los desarrolladores de Republic mantuvieron su entorno de trabajo local en m√°quinas virtuales configuradas a trav√©s de Vagrant, o trabajaron directamente con el servidor de desarrollo a trav√©s de sftp.  Basado en la imagen b√°sica general de una m√°quina virtual, cada desarrollador "preconfigur√≥" su m√°quina "para s√≠ mismo", lo que dio lugar a un conjunto completo de configuraciones diferentes.  Como resultado de este enfoque, la inclusi√≥n de nuevas personas en el equipo aument√≥ exponencialmente el tiempo que ingresaron al proyecto. <br><br>  En las nuevas realidades, ofrecimos al equipo una estructura m√°s transparente del entorno de trabajo.  Describi√≥ declarativamente qu√© software y qu√© versiones se necesitan para el proyecto, el orden de las conexiones e interacciones entre los servicios (aplicaciones).  Esta descripci√≥n se carg√≥ en un repositorio git separado para que pueda administrarse de manera conveniente y centralizada. <br><br>  Todas las aplicaciones necesarias comenzaron a ejecutarse en contenedores Docker separados, y este es un sitio php regular con nginx, muchas estad√≠sticas, servicios para trabajar con im√°genes (redimensionar, optimizar, etc.) y ... un servicio separado para sockets web escritos en D Todos los archivos de configuraci√≥n (nginx-conf, php-conf ...) tambi√©n se convirtieron en parte de la base del c√≥digo del proyecto. <br><br>  En consecuencia, el entorno local fue completamente "recreado", completamente id√©ntico a la infraestructura del servidor actual.  Por lo tanto, se redujo el tiempo requerido para mantener el mismo entorno tanto en las m√°quinas locales de los desarrolladores como en el producto.  Lo que, a su vez, ayud√≥ enormemente a evitar problemas completamente innecesarios causados ‚Äã‚Äãpor las configuraciones locales autoescritas de cada desarrollador. <br><br>  Como resultado, los siguientes servicios se generaron en el entorno docker-compose: <br><br><ul><li>  web para la aplicaci√≥n php-fpm; </li><li>  nginx; </li><li>  impproxy y cairosvg (servicios para trabajar con im√°genes); </li><li>  postgres </li><li>  redis </li><li>  b√∫squeda el√°stica; </li><li>  trompeta (el mismo servicio para sockets web en D). </li></ul><br>  Desde el punto de vista de los desarrolladores, el trabajo con el c√≥digo base se mantuvo sin cambios: se mont√≥ en los servicios necesarios desde un directorio separado (el repositorio base con el c√≥digo del sitio) en los servicios necesarios: el directorio p√∫blico en el servicio nginx, todo el c√≥digo de la aplicaci√≥n php en el servicio php-fpm.  Desde el directorio separado (que contiene todas las configuraciones del entorno de composici√≥n), los archivos de configuraci√≥n correspondientes se montan en los servicios nginx y php-fpm.  Los directorios con postgres de datos, elasticsearch y redis tambi√©n se montan en la m√°quina local del desarrollador, de modo que si todos los contenedores tienen que ser reconstruidos / eliminados, los datos en estos servicios no se perder√°n. <br><br>  Para trabajar con registros de aplicaciones, tambi√©n en el entorno de compilaci√≥n acoplable, se generaron los servicios de la pila ELK.  Anteriormente, parte de los registros de la aplicaci√≥n se escrib√≠an en est√°ndar / var / log / ..., los registros de la aplicaci√≥n php y las ejecuciones se escrib√≠an en Sentry, y esta opci√≥n de almacenamiento de registro "descentralizado" era extremadamente inconveniente para trabajar.  Ahora, las aplicaciones y servicios se han configurado y refinado para interactuar con la pila ELK.  El uso de registros se ha vuelto mucho m√°s f√°cil; los desarrolladores ahora tienen una interfaz conveniente para buscar y filtrar registros.  En el futuro (ya en el cubo), puede ver los registros de una versi√≥n espec√≠fica de la aplicaci√≥n (por ejemplo, un kronzhoba lanzado anteayer). <br><br>  Adem√°s, el equipo de la Rep√∫blica comenz√≥ un corto per√≠odo de adaptaci√≥n.  El equipo necesitaba comprender y aprender a trabajar en el nuevo paradigma de desarrollo, en el cual se debe considerar lo siguiente: <br><br><ol><li>  Las aplicaciones se vuelven sin estado y pueden perder datos en cualquier momento, por lo que trabajar con bases de datos, sesiones y archivos est√°ticos se debe construir de manera diferente.  Las sesiones PHP deben almacenarse centralmente y compartirse entre todas las instancias de la aplicaci√≥n.  Puede seguir siendo archivos, pero m√°s a menudo se toma redis para estos fines debido a su mayor facilidad de administraci√≥n.  Los contenedores para bases de datos deber√≠an "montar" un datadir o la base de datos deber√≠a ejecutarse fuera de la infraestructura del contenedor. </li><li>  Un almacenamiento de archivos de aproximadamente 50-60 GB de im√°genes no debe estar "dentro de la aplicaci√≥n web".  Para tales fines, es necesario utilizar alg√∫n almacenamiento externo, sistemas cdn, etc. </li><li>  Todas las aplicaciones (bases de datos, servidores de aplicaciones ...) ahora son "servicios" separados, y la interacci√≥n entre ellos debe configurarse en relaci√≥n con el nuevo espacio de nombres. </li></ol><br>  Despu√©s de que el equipo de desarrollo de Republic se acostumbr√≥ a las innovaciones, comenzamos a transferir la infraestructura de ventas de la publicaci√≥n a Kubernetes. <br><br><h3>  Y aqu√≠ est√° Kubernetes. </h3><br>  Basado en el entorno construido para el desarrollo local docker-compose, comenzamos a traducir el proyecto en un "cubo".  Todos los servicios en los que se construye el proyecto localmente, los "empaquetamos en contenedores": organizamos un procedimiento lineal y comprensible para construir aplicaciones, almacenar configuraciones, compilar estad√≠sticas.  Desde el punto de vista del desarrollo, eliminaron los par√°metros de configuraci√≥n que necesit√°bamos en variables de entorno, comenzaron a almacenar sesiones no en archivos, sino en r√°banos.  Elevamos el entorno de prueba, donde implementamos una versi√≥n viable del sitio. <br><br>  Dado que este es un proyecto monol√≠tico anterior, es obvio que hab√≠a una relaci√≥n dura entre las versiones frontend y backend, respectivamente, y estos dos componentes se implementaron al mismo tiempo.  Por lo tanto, decidimos construir los pods de la aplicaci√≥n web de tal manera que dos contenedores giraran en un pod: php-fpm y nginx. <br><br>  Tambi√©n creamos el escalado autom√°tico para que las aplicaciones web escalen a un m√°ximo de 12 en el pico de tr√°fico, establezcan ciertas pruebas de vida / preparaci√≥n, porque la aplicaci√≥n requiere al menos 2 minutos para ejecutarse (ya que necesita calentar el cach√©, generar configuraciones ...) <br><br>  Inmediatamente, por supuesto, hubo todo tipo de card√∫menes y matices.  Por ejemplo: las estad√≠sticas compiladas eran necesarias tanto para el servidor web que lo distribuy√≥ como para el servidor de aplicaciones en fpm, que en alg√∫n lugar sobre la marcha gener√≥ alg√∫n tipo de im√°genes, en alg√∫n lugar que svg le dio directamente al c√≥digo.  Nos dimos cuenta de que para no levantarnos dos veces, necesitamos crear un contenedor de construcci√≥n intermedio y contenerizar el ensamblaje final a trav√©s de m√∫ltiples etapas.  Para hacer esto, creamos varios contenedores intermedios, en cada uno de los cuales las dependencias se extraen por separado, luego las estad√≠sticas (css y js) se recopilan por separado y luego en dos contenedores, en nginx y en fpm, se copian del contenedor de compilaci√≥n intermedio. <br><br><h3>  Empezamos </h3><br>  Para trabajar con archivos en la primera iteraci√≥n, creamos un directorio com√∫n que se sincroniz√≥ con todas las m√°quinas en funcionamiento.  Por la palabra "sincronizado" quiero decir aqu√≠ exactamente lo que se puede pensar con horror en primer lugar: rsync en un c√≠rculo.  Obviamente una mala decisi√≥n.  Como resultado, obtuvimos todo el espacio en disco en GlusterFS, configuramos el trabajo con im√°genes para que siempre estuvieran accesibles desde cualquier m√°quina y nada se ralentizara.  Para la interacci√≥n de nuestras aplicaciones con los sistemas de almacenamiento (postgres, elasticsearch, redis), se crearon servicios externalName en k8s, de modo que, por ejemplo, en caso de un cambio urgente a la base de datos de respaldo, actualice los par√°metros de conexi√≥n en un solo lugar. <br><br>  Todo el trabajo con crones fue llevado a las nuevas entidades k8s: cronjob, que puede ejecutarse de acuerdo con un cronograma espec√≠fico. <br><br>  Como resultado, obtuvimos esta arquitectura: <br><br> <a href=""><img src="https://habrastorage.org/webt/q4/-1/f9/q4-1f9u514-psd-2yfkn5pg74j0.jpeg"></a> <br>  <i>Clickable</i> <br><br><h3>  Oh dificil </h3><br>  Este fue el lanzamiento de la primera versi√≥n, porque en paralelo con la reestructuraci√≥n completa de la infraestructura, el sitio todav√≠a estaba siendo redise√±ado.  Parte del sitio fue construido con algunos par√°metros - para estad√≠sticas y todo lo dem√°s, y parte - con otros.  All√≠ era necesario ... para decirlo suavemente ... pervertir con todos estos contenedores de varias etapas, copiar datos de ellos en un orden diferente, etc. <br><br>  Tambi√©n tuvimos que bailar con panderetas alrededor del sistema CI \ CD para ense√±ar todo esto a implementar y controlar desde diferentes repositorios y desde diferentes entornos.  Despu√©s de todo, se necesita un control constante sobre las versiones de la aplicaci√≥n para que pueda comprender cu√°ndo se implement√≥ un servicio u otro servicio y con qu√© versi√≥n de la aplicaci√≥n se inici√≥ uno u otro error.  Para hacer esto, configuramos el sistema de registro correcto (as√≠ como la propia cultura de registro) e implementamos ELK.  Los colegas aprendieron a establecer ciertos selectores, ver qu√© cron genera qu√© errores, c√≥mo se ejecuta generalmente, porque en el "cubo" despu√©s de que se ejecuta el contenedor cron, ya no entrar√° en √©l. <br><br>  Pero lo m√°s dif√≠cil para nosotros fue reelaborar y revisar todo el c√≥digo base. <br><br>  Perm√≠tame recordarle que Republic es un proyecto que ahora tiene 10 a√±os.  Comenz√≥ con un equipo, otro se est√° desarrollando ahora, y es realmente dif√≠cil extraer todos los c√≥digos fuente para detectar posibles errores y fallas.  Por supuesto, en este momento, nuestro grupo de desembarco de cuatro hombres conect√≥ los recursos del resto del equipo: hicimos clic y probamos todo el sitio con pruebas, incluso en aquellas secciones que la gente en vivo no hab√≠a visitado desde 2016. <br><br><h3>  No falla en ninguna parte </h3><br>  El lunes, temprano en la ma√±ana, cuando la gente fue al correo masivo con un resumen, todos obtuvimos una apuesta.  El culpable se encontr√≥ con bastante rapidez: cronjob comenz√≥ y fren√©ticamente comenz√≥ a enviar cartas a todos los que quer√≠an obtener una selecci√≥n de noticias durante la semana pasada, devorando los recursos de todo el grupo en el camino.  No pudimos soportar ese comportamiento, por lo que r√°pidamente pusimos l√≠mites estrictos a todos los recursos: cu√°nto procesador y memoria puede consumir un contenedor, etc. <br><br><h3>  ¬øC√≥mo hizo frente el equipo de desarrolladores de la Rep√∫blica? </h3><br>  Nuestras actividades trajeron muchos cambios, y lo entendimos.  De hecho, no solo redise√±amos la infraestructura de la publicaci√≥n, en lugar del paquete habitual de "servidor de respaldo principal", implementamos una soluci√≥n de contenedor que conecta recursos adicionales seg√∫n sea necesario, sino que cambiamos completamente el enfoque para un mayor desarrollo. <br><br>  Despu√©s de un tiempo, los chicos comenzaron a comprender que esto no funciona directamente con el c√≥digo, sino que funciona con una aplicaci√≥n abstracta.  Dados los procesos CI \ CD (basados ‚Äã‚Äãen Jenkins), comenzaron a escribir pruebas, obtuvieron entornos completos de desarrollo-etapa-producto donde pueden probar nuevas versiones de su aplicaci√≥n en tiempo real, ver d√≥nde se cae todo y aprender a vivir Nuevo mundo ideal. <br><br><h3>  ¬øQu√© recibi√≥ el cliente? </h3><br>  En primer lugar, ¬°Republic finalmente obtuvo un proceso de implementaci√≥n controlado!  Sol√≠a ‚Äã‚Äãser: en la Rep√∫blica hab√≠a una persona responsable que fue al servidor, comenz√≥ todo manualmente, luego recopil√≥ estad√≠sticas, comprob√≥ con sus manos que nada se hab√≠a ca√≠do ... Ahora el proceso de implementaci√≥n se construye para que los desarrolladores se involucren en el desarrollo y no pierdan el tiempo en nada m√°s .  Y la persona responsable ahora tiene una tarea: monitorear c√≥mo fue el lanzamiento en general. <br><br>  Despu√©s de que se produce un empuje a la rama maestra, ya sea de forma autom√°tica o mediante una implementaci√≥n de "bot√≥n" (peri√≥dicamente, debido a ciertos requisitos comerciales, la implementaci√≥n autom√°tica se desactiva), Jenkins entra en la refriega: comienza el ensamblaje del proyecto.  Primero, todos los contenedores acoplables se ensamblan: las dependencias (compositor, hilo, npm) se instalan en los contenedores preparatorios, lo que le permite acelerar el proceso de compilaci√≥n si la lista de bibliotecas requeridas no ha cambiado durante la implementaci√≥n;  luego se recopilan contenedores para php-fpm, nginx, otros servicios, en los que, por analog√≠a con el entorno de compilaci√≥n de acoplador, solo se copian las partes necesarias de la base de c√≥digo.  Despu√©s de eso, se inician las pruebas y, en caso de aprobarlas con √©xito, hay un impulso de im√°genes a la tienda privada y, de hecho, despliegan implementaciones en el cubo. <br><br>  Gracias a la transferencia de Republic a k8s, obtuvimos una arquitectura usando un grupo de tres m√°quinas reales en las que hasta doce copias de la aplicaci√≥n web pueden "girar" al mismo tiempo.  Al mismo tiempo, el sistema mismo, basado en las cargas actuales, decide cu√°ntas copias necesita en este momento.  Tomamos Republic de la loter√≠a ‚Äúfunciona - no funciona‚Äù con servidores primarios y de respaldo est√°ticos y construimos un sistema flexible para ellos, listo para un aumento similar a una avalancha en la carga en el sitio. <br><br>  En este momento, puede surgir la pregunta "muchachos, cambiaron dos piezas de hierro por las mismas piezas de hierro, pero con la virtualizaci√≥n, ¬øcu√°l es la ganancia? ¬øEst√°n bien all√≠?"  Y, por supuesto, ser√° l√≥gico.  Pero solo en parte.  Como resultado, no solo obtuvimos piezas de hardware con virtualizaci√≥n.  Conseguimos un entorno de trabajo estable, igual en alimentos y virgo.  Un entorno que se gestiona de forma centralizada para todos los participantes del proyecto.  Tenemos un mecanismo para ensamblar todo el proyecto y lanzar lanzamientos, nuevamente, lo mismo para todos.  Tenemos un conveniente sistema de orquestaci√≥n de proyectos.  Tan pronto como el equipo de Republic se da cuenta de que generalmente dejan de tener suficientes recursos actuales y los riesgos de cargas ultra altas (o cuando ya ha sucedido y todo se ha calmado), simplemente toman otro servidor, en 10 minutos implementan la funci√≥n de un nodo de cl√∫ster en √©l y op-op Todo es hermoso y bueno de nuevo.  La estructura del proyecto anterior no suger√≠a tal enfoque en absoluto; no hab√≠a soluciones lentas ni r√°pidas para tales problemas. <br><br>  En segundo lugar, ha aparecido una implementaci√≥n perfecta: el visitante podr√° acceder a la versi√≥n anterior de la aplicaci√≥n o a una nueva.  Y no como antes, cuando el contenido podr√≠a ser nuevo, pero los estilos son viejos. <br>  Como resultado, el negocio est√° satisfecho: todo tipo de cosas nuevas ahora se pueden hacer m√°s r√°pido y con m√°s frecuencia. <br>  En total, desde "pero intentemos" hasta "hecho", el trabajo en el proyecto tom√≥ 2 meses.  El equipo de nuestra parte es un aterrizaje heroico de cuatro personas + soporte para la "base" durante la verificaci√≥n del c√≥digo y las pruebas. <br><br><h3>  Lo que obtuvieron los usuarios </h3><br>  Y los visitantes, en principio, no vieron los cambios.  El proceso de implementaci√≥n de la estrategia de RollingUpdate se construye "a la perfecci√≥n".  El lanzamiento de una nueva versi√≥n del sitio de ninguna manera perjudica a los usuarios, la nueva versi√≥n del sitio, hasta que pasen las pruebas y las pruebas de vida / preparaci√≥n, no estar√°n disponibles.  Simplemente ven que el sitio funciona y que no se caer√° despu√©s de publicar art√≠culos geniales.  Que, en general, es lo que cualquier proyecto necesita. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/439458/">https://habr.com/ru/post/439458/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../439446/index.html">Lo que necesita saber sobre JavaScript Engine Switcher 3.0</a></li>
<li><a href="../439448/index.html">¬øQu√© preguntas sobre virtualizaci√≥n espera una respuesta de un graduado?</a></li>
<li><a href="../439450/index.html">RS-485 sobre microcontroladores dom√©sticos de la compa√±√≠a Milander</a></li>
<li><a href="../439454/index.html">Programa como arte: un nuevo paradigma de gesti√≥n de software</a></li>
<li><a href="../439456/index.html">Hipster Podcasts # 2</a></li>
<li><a href="../439460/index.html">C√≥mo los especialistas en marketing de Maksidoma pierden millones al coquetear con la comercializaci√≥n de comestibles: auditor√≠a de usabilidad independiente</a></li>
<li><a href="../439462/index.html">Civilizaci√≥n de primavera, 5/5</a></li>
<li><a href="../439464/index.html">VXinspect: control de calidad de piezas en 10 minutos</a></li>
<li><a href="../439466/index.html">La sonda en √≥rbita lunar de la NASA tom√≥ las primeras im√°genes de la estaci√≥n china Chang'e-4: dos p√≠xeles de luz</a></li>
<li><a href="../439468/index.html">Donde lleva la b√∫squeda del SCADA perfecto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>