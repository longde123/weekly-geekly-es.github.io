<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñïüèΩ ‚õàÔ∏è üî´ Encabezados HTTP para el desarrollador responsable üî≠ üíù üë®üèæ‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy, estar en l√≠nea es una condici√≥n com√∫n para muchas personas. Todos compramos, nos comunicamos, leemos art√≠culos, buscamos informaci√≥n sobre varios...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Encabezados HTTP para el desarrollador responsable</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/450816/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/9l/a1/ll/9la1llcyspwwfylwvmocsfvgnfe.jpeg"></div><br>  Hoy, estar en l√≠nea es una condici√≥n com√∫n para muchas personas.  Todos compramos, nos comunicamos, leemos art√≠culos, buscamos informaci√≥n sobre varios temas.  La red nos conecta con todo el mundo, pero, sobre todo, conecta a las personas.  Hace 20 a√±os que uso Internet, y mi relaci√≥n con √©l cambi√≥ hace ocho a√±os cuando me convert√≠ en desarrollador web. <br><br>  Los desarrolladores conectan a las personas. <br>  Los desarrolladores ayudan a las personas. <br>  Los desarrolladores dan oportunidades a las personas. <br><br>  Los desarrolladores pueden crear una red para todos, pero esta habilidad debe usarse de manera responsable.  Al final, es importante crear cosas que ayuden a las personas y las empoderen.  En este art√≠culo quiero hablar sobre c√≥mo los encabezados HTTP pueden ayudarlo a crear mejores productos para el mejor trabajo de todos los usuarios en Internet. <br><a name="habracut"></a><br><h2>  HTTP - Protocolo de transferencia de hipertexto </h2><br>  Hablemos primero de HTTP.  HTTP es un protocolo utilizado por las computadoras para solicitar y enviar datos a trav√©s de Internet. <br><br>  Cuando el navegador solicita un recurso del servidor, utiliza HTTP.  Esta solicitud incluye un conjunto de pares clave-valor que contiene informaci√≥n como la versi√≥n del navegador o los formatos de archivo que entiende.  Estos pares se denominan encabezados de solicitud. <br><br>  El servidor responde con el recurso solicitado, pero tambi√©n env√≠a encabezados de respuesta que contienen informaci√≥n sobre el recurso o el servidor en s√≠. <br><br><pre><code class="plaintext hljs">Request: GET https://the-responsible.dev/ Accept: text/html,application/xhtml+xml,application/xml Accept-Encoding: gzip, deflate, br Accept-Language: en-GB,en-US;q=0.9,en;q=0.8,de;q=0.7 ... Response: Connection: keep-alive Content-Type: text/html; charset=utf-8 Date: Mon, 11 Mar 2019 12:59:38 GMT ... Response Body</code> </pre> <br>  Hoy, HTTP es la base de Internet y ofrece muchas formas de optimizar la experiencia del usuario.  Veamos c√≥mo puede usar encabezados HTTP para crear una red segura y accesible. <br><br><h2>  La red debe ser segura. </h2><br>  Nunca me sent√≠a en peligro cuando buscaba algo en Internet.  Pero cuanto m√°s aprend√≠a sobre la World Wide Web, m√°s me preocupaba.  Puede leer c√≥mo los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">piratas inform√°ticos cambian las bibliotecas CDN globales</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los sitios aleatorios extraen criptomonedas en el navegador de sus visitantes,</a> y c√≥mo, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">trav√©s de la ingenier√≠a social, las personas obtienen acceso regularmente a proyectos exitosos de c√≥digo abierto</a> .  Esto no es bueno  ¬øPero por qu√© te importa? <br><br>  Si est√° desarrollando para la web hoy, entonces no solo escriba c√≥digo.  Hoy, en desarrollo web, mucha gente trabaja en un sitio.  Tambi√©n puede usar una gran cantidad de c√≥digo abierto.  Adem√°s, para fines de marketing, puede incluir varios scripts de terceros.  Cientos de personas proporcionan c√≥digo que se ejecuta en su sitio.  Y los desarrolladores tienen que trabajar en tales realidades. <br><br>  ¬øSe puede confiar en todas estas personas y en todo el c√≥digo fuente? <br><br>  No creo que se deba confiar en ning√∫n c√≥digo de terceros.  Afortunadamente, hay formas de proteger su sitio y hacerlo m√°s seguro.  Adem√°s, herramientas como el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">casco pueden ser √∫tiles, por ejemplo, para aplicaciones express</a> . <br><br>  <i>Si desea analizar la cantidad de c√≥digo de terceros que se ejecuta en su sitio, puede buscar en el panel de desarrolladores o probar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Request Map Generator.</a></i> <br><br><h2>  HTTPS y HSTS: aseg√∫rese de que su conexi√≥n sea segura </h2><br>  Una conexi√≥n segura es la base de un internet seguro.  Sin solicitudes cifradas que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-">pasan por</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-">HTTPS</a> , no puede estar seguro de que no haya nadie m√°s entre su sitio y los visitantes.  Una persona puede configurar r√°pidamente una red Wi-Fi p√∫blica y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lanzar un ataque de hombre en el medio</a> a cualquiera que se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conecte a esta red</a> .  ¬øCon qu√© frecuencia utiliza Wi-Fi p√∫blico?  Adem√°s, ¬øcon qu√© frecuencia verifica si es confiable? <br><br>  Afortunadamente, hoy los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">certificados TLS son gratuitos</a> ;  HTTPS se ha convertido en el est√°ndar, y los navegadores proporcionan funciones avanzadas solo para conexiones seguras, e incluso marcan los sitios web que no son HTTPS como inseguros, lo que facilita la implementaci√≥n de este protocolo.  Desafortunadamente, no siempre estamos seguros cuando estamos en Internet.  Cuando alguien quiere abrir un sitio, no ingresa el protocolo en la barra de direcciones (¬øy por qu√© deber√≠a hacerlo?).  Esto da como resultado una solicitud HTTP sin cifrar.  Los sitios que se ejecutan de forma segura redirigen al usuario a HTTPS.  Pero, ¬øqu√© pasa si alguien intercepta la primera solicitud insegura? <br><br>  Puede usar los encabezados de respuesta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HSTS</a> (HTTP Strict Transport Security) para indicar a los navegadores que su sitio solo funciona a trav√©s de HTTPS. <br><br><pre> <code class="plaintext hljs">Strict-Transport-Security: max-age=1000; includeSubDomains; preload</code> </pre> <br>  Este encabezado le dice al navegador que no desea utilizar solicitudes HTTP, y luego aplicar√° autom√°ticamente las mismas solicitudes a la misma fuente con una conexi√≥n segura.  Si intenta abrir la misma URL a trav√©s de HTTP, el navegador volver√° a utilizar HTTPS y redirigir√° al usuario. <br><br>  Puede configurar cu√°nto tiempo debe permanecer activa esta opci√≥n ( <code>max-age</code> en segundos) si desea usar HTTP nuevamente m√°s tarde.  Si desea habilitar subdominios, puede configurar esto usando <code>includeSubDomains</code> . <br><br>  Si desea hacer todo lo posible para que el navegador nunca solicite su sitio a trav√©s de HTTP, tambi√©n puede configurar el puntero de <code>preload</code> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enviar su sitio</a> a la lista global.  Si la configuraci√≥n HSTS de su sitio corresponde a la <code>max-age</code> m√≠nima de un a√±o y est√° activa para subdominios, puede incluirse en la lista interna del navegador para sitios que funcionan solo a trav√©s de HTTPS. <br><br>  ¬øAlguna vez se ha preguntado por qu√© ya no puede usar variables de entorno local como <code>my-site.dev</code> en su navegador a trav√©s de HTTP?  La raz√≥n est√° precisamente en esta lista interna: los <code>.dev</code> incluyen autom√°ticamente en esta lista, ya que en febrero de 2019 se convirti√≥ en un verdadero dominio de nivel superior. <br><br>  El encabezado HSTS no solo hace que su sitio sea un poco m√°s seguro, sino que tambi√©n acelera su trabajo.  Imagine que alguien est√° accediendo a una conexi√≥n m√≥vil lenta.  Si la primera solicitud se realiz√≥ a trav√©s de HTTP solo para recibir una redirecci√≥n, es posible que el usuario no vea nada en la pantalla durante varios segundos.  Y con HSTS, puede guardar esos segundos, y el navegador usar√° autom√°ticamente HTTPS. <br><br><h2>  CSP: indique claramente lo que est√° permitido en su sitio </h2><br>  Ahora que su sitio se est√° ejecutando a trav√©s de una conexi√≥n segura, puede encontrarse con un problema cuando los navegadores comienzan a bloquear solicitudes que llegan a una direcci√≥n insegura debido a pol√≠ticas de contenido mixto.  El <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">encabezado de la Pol√≠tica de seguridad de contenido (CSP)</a> ofrece una excelente manera de manejar estas situaciones.  Puede establecer su conjunto de reglas CSP utilizando meta elementos en el HTML proporcionado o mediante encabezados HTTP. <br><br><pre> <code class="plaintext hljs">Content-Security-Policy: upgrade-insecure-requests</code> </pre> <br>  El puntero <code>upgrade-insecure-requests</code> hace que el navegador convierta m√°gicamente todas las solicitudes HTTP en solicitudes HTTPS. <br><br>  Sin embargo, CSP no se limita al protocolo utilizado.  Ofrece formas detalladas de determinar qu√© recursos y actividades est√°n permitidos en su sitio.  Puede, por ejemplo, especificar qu√© scripts deben ejecutarse o d√≥nde descargar im√°genes.  Si algo no est√° permitido, el navegador bloquea esta acci√≥n y evita posibles ataques en su sitio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e57/f6a/ef6/e57f6aef63f9ad95c2954539290a7caa.jpg"><br><br>  Al momento de escribir, hab√≠a 24 opciones de configuraci√≥n diferentes para CSP.  Van desde guiones hasta hojas de estilo para trabajadores de servicio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/281/7f5/713/2817f571357c4b488bd6dbcbbdec6ef0.png"><br><br>  <i>Puede encontrar la rese√±a completa en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MDN.</a></i> <br><br>  Con CSP, puede especificar qu√© debe incluir su sitio y qu√© no. <br><br><pre> <code class="plaintext hljs">Content-Security-Policy: default-src 'self'; script-src 'self' just-comments.com www.google-analytics.com production-assets.codepen.io storage.googleapis.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: images.contentful.com images.ctfassets.net www.gravatar.com www.google-analytics.com just-comments.com; font-src 'self' data:; connect-src 'self' cdn.contentful.com images.contentful.com videos.contentful.com images.ctfassets.net videos.ctfassets.net service.just-comments.com www.google-analytics.com; media-src 'self' videos.contentful.com videos.ctfassets.net; object-src 'self'; frame-src codepen.io; frame-ancestors 'self'; worker-src 'self'; block-all-mixed-content; manifest-src 'self' 'self'; disown-opener; prefetch-src 'self'</code> </pre> <br>  El conjunto de reglas anterior es para mi sitio personal, y si cree que este ejemplo de definici√≥n de CSP es muy complicado, tiene toda la raz√≥n.  Implement√© este kit en mi tercer intento, implementando y retrocediendo nuevamente, porque rompi√≥ el sitio varias veces.  Pero hay una mejor manera. <br><br>  Para evitar piratear su sitio, CSP tambi√©n proporciona un modo de solo informes. <br><br><pre> <code class="plaintext hljs">Content-Security-Policy-Report-Only: default-src 'self'; ... report-uri https://stefanjudis.report-uri.com/r/d/csp/reportOnly</code> </pre> <br>  Usando el modo <code>Content-Security-Policy-Report-Only</code> , los navegadores simplemente registran los recursos que ser√≠an bloqueados, en lugar de bloquearlos realmente.  Este mecanismo de informes le permite verificar y configurar su conjunto de reglas. <br><br>  Ambos encabezados, <code>Content-Security-Policy</code> y <code>Content-Security-Policy-Report-Only</code> , tambi√©n ofrecen una forma de determinar el punto final para enviar un <code>report-uri</code> violaci√≥n e informaci√≥n de registro ( <code>report-uri</code> ).  Puede configurar el servidor de registro y utilizar la informaci√≥n de registro enviada para configurar las reglas CSP hasta que est√© listo para enviar. <br><br>  El proceso recomendado es el siguiente: primero ejecute CSP en modo de informe, analice las infracciones entrantes con tr√°fico real, y solo cuando no se detecten infracciones de sus recursos controlados, act√≠velo. <br><br>  <i>Si est√° buscando un servicio que pueda ayudarlo a lidiar con estas revistas, le recomiendo el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Informe URI</a> , me ayuda mucho.</i> <br><br><h2>  Implementaci√≥n general de CSP </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hoy en d√≠a los navegadores admiten</a> CSP, pero desafortunadamente no muchos sitios lo usan.  Para ver cu√°ntos sitios entregan contenido usando CSP, envi√© una solicitud a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://">HTTParchive</a> y descubr√≠ que solo el 6% de los sitios visitados usan esta pol√≠tica.  Creo que podemos hacer que Internet sea m√°s seguro y proteger a nuestros <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">usuarios</a> de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">miner√≠a</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">involuntaria de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">criptomonedas</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d4/e19/246/6d4e192464d326a3722530d617cbaf78.jpg"><br><br><h2>  La red debe ser accesible. </h2><br>  Mientras escribo este art√≠culo, estoy sentado frente al relativamente nuevo MacBook usando una conexi√≥n Wi-Fi dom√©stica r√°pida.  Los desarrolladores a menudo olvidan que esta situaci√≥n no es est√°ndar para la mayor√≠a de nuestros usuarios.  Las personas que visitan nuestros sitios usan tel√©fonos viejos y conexiones dudosas.  Los sitios pesados ‚Äã‚Äãy congestionados con cientos de consultas los dejan con una mala impresi√≥n. <br><br>  Y no se trata solo de la impresi√≥n.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Las personas pagan diferentes cantidades por el tr√°fico seg√∫n el lugar donde viven</a> .  Imagina que est√°s creando un sitio web para un hospital.  La informaci√≥n que contiene puede ser crucial y salvar vidas.  Si la p√°gina en el sitio web del hospital tiene un tama√±o de 5 MB, no solo funcionar√° lentamente, sino que puede ser demasiado costosa para quienes m√°s la necesitan.  El precio de cinco megabytes de tr√°fico en Europa o Estados Unidos es insignificante en comparaci√≥n con el precio en √Åfrica.  Los desarrolladores son responsables de hacer que las p√°ginas web sean accesibles para todos.  Esta responsabilidad incluye proporcionar los recursos correctos, elegir las herramientas adecuadas (¬ørealmente necesita un marco JS para el aterrizaje?) Y evitar solicitudes. <br><br><h2>  Control de cach√©: evite solicitudes de recursos inmutables </h2><br>  Hoy un sitio puede contener cientos de recursos, desde CSS hasta scripts e im√°genes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>  Cache-Control</code></a> , los desarrolladores pueden especificar por cu√°nto tiempo el recurso debe considerarse "nuevo" y puede devolverse desde la memoria cach√© del navegador. <br><br><pre> <code class="plaintext hljs">Cache-Control: max-age=30, public</code> </pre> <br>  Con la configuraci√≥n adecuada de <code>Cache-Control</code> , la transferencia de datos se conserva y los archivos se pueden usar desde la memoria cach√© del navegador durante un cierto n√∫mero de segundos ( <code>max-age</code> ).  Los navegadores deben volver a verificar los recursos en cach√© despu√©s de este per√≠odo de tiempo. <br><br>  Sin embargo, si los visitantes actualizan la p√°gina, los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">navegadores volver√°n a verificarla de todos modos, incluidos los enlaces a los recursos</a> para garantizar que los datos almacenados en cach√© sigan siendo v√°lidos.  Los servidores responden con un encabezado 304, indicando que los datos almacenados en cach√© siguen siendo v√°lidos, o un encabezado 200 cuando transmiten datos actualizados.  Esto le permite guardar los datos transferidos, pero no necesariamente las solicitudes realizadas. <br><br>  Aqu√≠ es donde entra en juego la funci√≥n <code>immutable</code> . <br><br><h2>  Inmutable: nunca solicite un recurso dos veces </h2><br>  En las aplicaciones frontend modernas, los archivos CSS y de script generalmente tienen nombres √∫nicos, por ejemplo, <code>styles.123abc.css</code> .  El nombre de este archivo depende del contenido.  Y cuando cambia el contenido de los archivos, sus nombres tambi√©n cambian. <br><br>  Estos archivos √∫nicos podr√≠an almacenarse en cach√© para siempre, incluso cuando un usuario actualiza una p√°gina.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code> immutable</code></a> puede evitar que el navegador vuelva a verificar el recurso en un intervalo de tiempo espec√≠fico.  Esto es muy importante para los objetos con sumas de verificaci√≥n, y ayuda a evitar repetidas solicitudes de validaci√≥n. <br><br><pre> <code class="plaintext hljs">Cache-Control: max-age=31536000, public, immutable</code> </pre> <br>  Implementar el almacenamiento en cach√© √≥ptimo es muy dif√≠cil, y especialmente el almacenamiento en cach√© del navegador no es muy intuitivo, ya que tiene varias configuraciones.  Le recomiendo que lea los siguientes materiales: <br><br><ul><li>  Harry Roberts ha escrito una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">excelente gu√≠a para administrar su cach√© y su configuraci√≥n</a> . <br></li><li>  Jack Archibald dio consejos sobre las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mejores t√©cnicas de almacenamiento en cach√©</a> con ilustraciones. <br></li><li>  Ilya Grigorik propuso un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/">excelente esquema tecnol√≥gico para el almacenamiento en cach√© de encabezados</a> . <br></li></ul><br><h2>  Accept-Encoding: compresi√≥n m√°xima (al m√≠nimo) </h2><br>  Con la ayuda del <code>Cache control</code> de <code>Cache control</code> podemos guardar solicitudes y reducir la cantidad de datos que se transmiten repetidamente a trav√©s de la red.  No solo podemos guardar solicitudes, sino tambi√©n reducir lo que se transmite. <br><br>  Al dar recursos, los desarrolladores deben asegurarse de enviar la menor cantidad de datos posible.  Para recursos de texto como HTML, CSS y JavaScript, la compresi√≥n juega un papel importante en el almacenamiento de datos transferidos. <br><br>  El m√©todo de compresi√≥n m√°s popular hoy en d√≠a es GZIP.  Los servidores tienen suficiente potencia para comprimir archivos de texto sobre la marcha y proporcionar datos comprimidos cuando se solicite.  Pero GZIP ya no es la mejor opci√≥n. <br><br>  Si observa las solicitudes de archivos de texto generadas por el navegador, como HTML, CSS y JavaScript, y analiza los encabezados, encontrar√° <code>accept-encoding</code> entre ellos. <br><br><pre> <code class="plaintext hljs">Accept-Encoding: gzip, deflate, br</code> </pre> <br>  Este encabezado le dice al servidor qu√© algoritmos de compresi√≥n entiende.  El par√°metro <code>br</code> poco conocido significa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">compresi√≥n Brotli</a> y se usa en sitios de alto tr√°fico como Google y Facebook.  Para usar Brotli, su sitio debe funcionar a trav√©s de HTTPS. <br><br>  Este algoritmo de compresi√≥n se cre√≥ teniendo en cuenta el peque√±o tama√±o del archivo.  Si intenta comprimir el archivo manualmente en su dispositivo local, encontrar√° que Brotli realmente comprime mejor que GZIP. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d5/681/a2b/6d5681a2b412489aae991170e16428e8.jpg"><br><br>  Es posible que haya escuchado que la compresi√≥n Brotli es m√°s lenta.  La raz√≥n es que Brotli tiene 11 modos de compresi√≥n, y por defecto se obtiene el que selecciona los archivos m√°s peque√±os, lo que alarga el procedimiento.  GZIP, por otro lado, tiene 9 modos, y por defecto se selecciona uno que tiene en cuenta tanto la velocidad de compresi√≥n como el tama√±o del archivo.  Como resultado, el modo Brotli no es adecuado para la compresi√≥n sobre la marcha de forma predeterminada, pero si cambia el modo, puede comprimir archivos peque√±os a la misma velocidad que GZIP.  Puede usarlo para la compresi√≥n sobre la marcha y considerarlo como un posible reemplazo de GZIP para los navegadores compatibles. <br><br>  Adem√°s, si desea guardar los archivos tanto como sea posible, puede olvidarse de la compresi√≥n din√°mica y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pregenerar archivos GZIP optimizados utilizando archivos zopfli</a> y Brotli para su mantenimiento est√°tico. <br><br>  <i>Si desea leer m√°s sobre la compresi√≥n Brotli y su comparaci√≥n con GZIP, los empleados de Akamai han <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">realizado una extensa investigaci√≥n sobre este tema</a></i> . <br><br><h2>  Aceptar y aceptar-CH - Servir recursos individuales para el usuario </h2><br>  La optimizaci√≥n de los recursos de texto es muy importante para ahorrar kilobytes, pero ¬øqu√© pasa con los recursos m√°s pesados ‚Äã‚Äãcomo las im√°genes para guardar a√∫n m√°s datos? <br><br><h4>  Aceptar: servicio de im√°genes en el formato correcto </h4><br>  Los navegadores no solo nos muestran qu√© algoritmos de compresi√≥n entienden.  Cuando el navegador solicita una imagen, tambi√©n proporciona informaci√≥n sobre qu√© formatos de archivo entiende. <br><br><pre> <code class="plaintext hljs">Accept: image/webp, image/apng, image/*,*/*;q=0.8</code> </pre> <br>  Durante varios a√±os, se libr√≥ una lucha en torno a un nuevo formato de imagen, pero gan√≥ webp.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Webp es un formato de imagen inventado por Google</a> , y el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">soporte para</a> este formato ahora es muy relevante. <br><br>  Usando este encabezado de solicitud, los desarrolladores pueden enviar una imagen <code>webp</code> incluso si el navegador solicit√≥ <code>image.jpg</code> , lo que resulta en un tama√±o de archivo m√°s peque√±o.  Dean Hume ha escrito una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">buena gu√≠a</a> sobre c√≥mo aplicar esto.  Muy guay! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ef/ce2/077/9efce2077a81469bfaa8840b8bb07b26.jpg"><br><br><h4>  Accept-CH - Sirviendo im√°genes del tama√±o correcto </h4><br>  Tambi√©n puede habilitar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">las solicitudes de los clientes</a> para los navegadores que admitan esta funci√≥n.  Las sugerencias del cliente son una forma de decirle a los navegadores que env√≠en informaci√≥n adicional sobre el ancho del √°rea de visualizaci√≥n, el ancho de la imagen e incluso las condiciones de la red, como RTT (tiempo de transmisi√≥n y confirmaci√≥n) y el tipo de conexi√≥n, por ejemplo <code>2g</code> . <br><br>  Puede activar las sugerencias agregando un meta elemento: <br><br><pre> <code class="plaintext hljs">&lt;meta http-equiv="Accept-CH" content="Viewport-Width, Downlink"&gt; &lt;meta http-equiv="Accept-CH-Lifetime" content="86400"&gt;</code> </pre> <br>  O estableciendo encabezados en la solicitud HTML original: <br><br><pre> <code class="plaintext hljs">Accept-CH: Width, Viewport-Width Accept-CH-Lifetime: 100</code> </pre> <br>  En solicitudes posteriores, los navegadores comenzar√°n a enviar informaci√≥n adicional durante un cierto per√≠odo de tiempo ( <code>Accept-CH-Lifetime</code> en segundos), lo que puede ayudar a los desarrolladores a adaptar las im√°genes a las condiciones del usuario sin cambiar el HTML. <br><br>  Por ejemplo, para obtener m√°s informaci√≥n, como el ancho de la imagen en el lado del servidor, puede proporcionar a sus im√°genes el atributo de <code>sizes</code> para proporcionar al navegador informaci√≥n adicional sobre c√≥mo se ver√°n estas im√°genes. <br><br><pre> <code class="plaintext hljs">&lt;!-- this images is laid over the full width | 100 viewport width --&gt; &lt;img class="w-100" src="/img/header.jpg" alt="" sizes="100vw"&gt;</code> </pre> <br>  Con el encabezado de respuesta <code>Accept-CH</code> recibido e im√°genes con el atributo de <code>sizes</code> , los navegadores incluir√°n el <code>viewport-width</code> la <code>viewport-width</code> y los encabezados de <code>width</code> en las solicitudes de imagen, mostr√°ndole qu√© imagen es la m√°s adecuada. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec1/fa5/15f/ec1fa515f2eaddf32e3f1ba8e3d9576c.jpg"><br><br>  Al tener un formato y un tama√±o de imagen compatibles, puede enviar datos adaptados sin tener que registrar elementos de imagen poco confiables y prestar atenci√≥n solo al formato y tama√±o del archivo, como se muestra a continuaci√≥n. <br><br><pre> <code class="plaintext hljs">&lt;pictur&gt; &lt;!-- serve WebP to Chrome, Edge, Firefox and Opera --&gt; &lt;source media="(min-width: 50em)" sizes="50vw" srcset="/image/thing-200.webp 200w, /image/thing-400.webp 400w, /image/thing-800.webp 800w, /image/thing-1200.webp 1200w, /image/thing-1600.webp 1600w, /image/thing-2000.webp 2000w" type="image/webp"&gt; &lt;source sizes="(min-width: 30em) 100vw" srcset="/image/thing-crop-200.webp 200w, /image/thing-crop-400.webp 400w, /image/thing-crop-800.webp 800w, /image/thing-crop-1200.webp 1200w, /image/thing-crop-1600.webp 1600w, /image/thing-crop-2000.webp 2000w" type="image/webp"&gt; &lt;!-- serve JPEG to others --&gt; &lt;surce media="(min-width: 50em)" sizes="50vw" srcset="/image/thing-200.jpg 200w, /image/thing-400.jpg 400w, /image/thing-800.jpg 800w, /image/thing-1200.jpg 1200w, /image/thing-1600.jpg 1600w, /image/thing-2000.jpg 2000w"&gt; &lt;surce sizes="(min-width: 30em) 100vw" srcset="/image/thing-crop-200.jpg 200w, /image/thing-crop-400.jpg 400w, /image/thing-crop-800.jpg 800w, /image/thing-crop-1200.jpg 1200w, /image/thing-crop-1600.jpg 1600w, /image/thing-crop-2000.jpg 2000w"&gt; &lt;!-- fallback for browsers that don't support picture --&gt; &lt;img src="/image/thing.jpg" width="50%"&gt; &lt;/pictur&gt;</code> </pre> <br>  Si tiene acceso al ancho de la ventana gr√°fica y el tama√±o de la imagen, puede poner la l√≥gica de cambiar el tama√±o de los recursos a la vanguardia en sus servidores. <br><br>  Sin embargo, tenga en cuenta que no debe crear im√°genes para ning√∫n ancho simplemente porque tiene el ancho exacto de la imagen.  El env√≠o de im√°genes para un rango de tama√±o espec√≠fico ( <code>image-200</code> , <code>image-300</code> , <code>...</code> ) ayuda a usar el almacenamiento en cach√© de CDN y ahorra tiempo de c√°lculo. <br><br>  Adem√°s, con tecnolog√≠as modernas como los trabajadores de servicios, incluso puede interceptar y modificar solicitudes directamente en el cliente para servir los mejores archivos de imagen.  Con la informaci√≥n sobre herramientas del cliente activada, los trabajadores del servicio obtienen acceso a la informaci√≥n de dise√±o, y en combinaci√≥n con la API de imagen, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cloudinary,</a> puede configurar la URL de la imagen directamente en el navegador para recibir im√°genes del tama√±o correcto. <br><br>  <i>Si est√° buscando informaci√≥n m√°s detallada sobre consejos de clientes, puede leer art√≠culos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Jeremy Wagner</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ilya Grigorik</a> sobre este tema.</i> <br><br><h2>  La red debe tener cuidado. </h2><br>  Dado que cada uno de nosotros pasa muchas horas al d√≠a en la red, existe el √∫ltimo aspecto que considero muy importante: la red debe tener cuidado. <br><br><h4>  Precarga: reduce el tiempo de espera </h4><br>  Como desarrolladores, valoramos el tiempo de nuestros usuarios.  Nadie quiere perder el tiempo.      ,           .      ,   ,        . <br><br>  :       ,     ,    .      ,    HTML      .               ,   ,     .          . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> Rel=preload</a>       ,       . <br><br>      HTML-: <br><br><pre> <code class="plaintext hljs">&lt;link rel="preload" href="/font.woff2" as="font" type="font/woff2" crossorigin="anonymous"&gt;</code> </pre> <br>  : <br><br><pre> <code class="plaintext hljs">Link: &lt;/font.woff2&gt;; rel=preload; as=font; no-push</code> </pre> <br>  ,       ,    ,      ,  .      . <br><br>                : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>   . <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>    preload   ,   prefetch  preconnect. <br></li></ul><br><h4> Feature-Policy ‚Äî    </h4><br>      ,      .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>   . <br><br> <i>     </i> .         ,  .        .      ,      ,     ‚Äî  . <br><br>  ,         ,          ?  ,       ? <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> Feature-Policy.      ,   ,       ,      ,    . <br><br><pre> <code class="plaintext hljs">Feature-Policy: vibrate 'none'; geolocation 'none'</code> </pre> <br>          .        , ,  ,         . <br><br><pre> <code class="plaintext hljs">&lt;iframe allow="camera 'none'; microphone 'none'"&gt;</code> </pre> <br>      <code>Feature-Policy</code> , , ,       .                ,     .      . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fa8/ada/e56/fa8adae56924a72210fc2009641eb8cb.jpg"><br><br> <i>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MDN.</a></i> <br><br>    ,        ‚Äî push-. ,   <code>Feature-Policy</code>  push- ,  .     ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub.</a> <br><br>  feature policy   ,           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a> , ,  ,      . <br><br><h2>      </h2><br>         ,      .          ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´HTTP- ‚Äî  ¬ª</a> . <br><br>  ,      ‚Äî   .    , , ,  ‚Ä¶     . ,      ,     ,       -,      ,    -    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/450816/">https://habr.com/ru/post/450816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450804/index.html">Impresi√≥n de metal en 3D en la industria automotriz: comience con poco</a></li>
<li><a href="../450806/index.html">Cuando una variable de entorno acelera el proceso 40 veces</a></li>
<li><a href="../450810/index.html">Las 7 mejores formas de verificar r√°pidamente las competencias de los especialistas de TI antes de la entrevista</a></li>
<li><a href="../450812/index.html">PSR-14: el evento principal en PHP</a></li>
<li><a href="../450814/index.html">C√≥mo funciona BGP</a></li>
<li><a href="../450818/index.html">Desde alta latencia de ceph hasta parche de kernel con eBPF / BCC</a></li>
<li><a href="../450820/index.html">Comit√© del programa FrontendConf: marcos, horizontes, experiencia mundial y misi√≥n de la conferencia.</a></li>
<li><a href="../450822/index.html">Marcos desaparecidos</a></li>
<li><a href="../450824/index.html">El estado de css</a></li>
<li><a href="../450826/index.html">C√≥mo hablar con el microcontrolador de JS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>