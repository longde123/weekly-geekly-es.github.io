<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЕ░я╕П ЁЯез ЁЯТГЁЯП┐ рдПрдХ рдЧрд░реНрдо рдмреВрдЯ рдХреЗ рдмрд╛рдж рд░реВрдЯ LUKS рдХрдВрдЯреЗрдирд░ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдирд▓реЙрдХ рдХрд░рдирд╛ ЁЯдЬЁЯП╝ ЁЯН╢ ЁЯШХ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд▓реЛрдЧ рдЖрдорддреМрд░ рдкрд░ рдЕрдкрдиреЗ рдкрд░реНрд╕рдирд▓ рдХрдВрдкреНрдпреВрдЯрд░ рдФрд░ рдХрднреА-рдХрднреА рд╕рд░реНрд╡рд░ рдХреЗ рдбреНрд░рд╛рдЗрд╡ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХреНрдпреЛрдВ рдХрд░рддреЗ рд╣реИрдВ? рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдХрд┐рд╕реА рдиреЗ рднреА рдбрд┐рд╕реНрдХ рд╕реЗ рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рдкрд╛рд▓рддреВ рдмрд┐рд▓реН...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХ рдЧрд░реНрдо рдмреВрдЯ рдХреЗ рдмрд╛рдж рд░реВрдЯ LUKS рдХрдВрдЯреЗрдирд░ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдирд▓реЙрдХ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457396/"><p>  рд▓реЛрдЧ рдЖрдорддреМрд░ рдкрд░ рдЕрдкрдиреЗ рдкрд░реНрд╕рдирд▓ рдХрдВрдкреНрдпреВрдЯрд░ рдФрд░ рдХрднреА-рдХрднреА рд╕рд░реНрд╡рд░ рдХреЗ рдбреНрд░рд╛рдЗрд╡ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХреНрдпреЛрдВ рдХрд░рддреЗ рд╣реИрдВ?  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдХрд┐рд╕реА рдиреЗ рднреА рдбрд┐рд╕реНрдХ рд╕реЗ рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рдкрд╛рд▓рддреВ рдмрд┐рд▓реНрд▓рд┐рдпреЛрдВ рдХреА рддрд╕реНрд╡реАрд░реЗрдВ рдирд╣реАрдВ рдЪреБрд░рд╛рдИ рд╣реИрдВ!  рдпрд╣ рд╕рд┐рд░реНрдл рджреБрд░реНрднрд╛рдЧреНрдп рд╣реИ: рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдбреНрд░рд╛рдЗрд╡ рд╕реЗ рдЖрдкрдХреЛ рдкреНрд░рддреНрдпреЗрдХ рдмреВрдЯ рдкрд░ рдХреАрдмреЛрд░реНрдб рд╕реЗ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд╛рдХреНрдпрд╛рдВрд╢ рджрд░реНрдЬ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рд▓рдВрдмрд╛ рдФрд░ рдЙрдмрд╛рдК рд╣реИред  рдЗрд╕реЗ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рддрд╛рдХрд┐ рдХрдо рд╕реЗ рдХрдо рдХрднреА-рдХрднреА рдЗрд╕реЗ рднрд░реНрддреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рди рд╣реЛред  рд╣рд╛рдВ, рддрд╛рдХрд┐ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХрд╛ рдЕрд░реНрде рдЦреЛ рди рдЬрд╛рдПред </p><br><div class="spoiler">  <b class="spoiler_title">рдзреНрдпрд╛рди рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрд▓реА</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/sr/rt/ny/srrtnywyggbrscsufm8ux8tvxmu.jpeg" alt="рдорд╛рдЗрдХ рдлрд╝рд╛рд░реНрд▓реЗ"></p></div></div><br><p>  рдареАрдХ рд╣реИ, рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╣рдЯрд╛ рджреЗрдВ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдЖрдк рдЗрд╕рдХреЗ рдмрдЬрд╛рдп USB рдлреНрд▓реИрд╢ рдбреНрд░рд╛рдЗрд╡ рдкрд░ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╝рд╛рдЗрд▓ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рднреА рдХрд╛рдо рдХрд░реЗрдЧрд╛ред  рдФрд░ рдмрд┐рдирд╛ рдлреНрд▓реИрд╢ рдбреНрд░рд╛рдЗрд╡ (рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдПрдХ рджреВрд╕рд░реЗ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рдмрд┐рдирд╛) рдХреНрдпрд╛ рдпрд╣ рд╕рдВрднрд╡ рд╣реИ?  рдпрджрд┐ рдЖрдк BIOS рдХреЗ рд╕рд╛рде рднрд╛рдЧреНрдпрд╢рд╛рд▓реА рд╣реИрдВ, рддреЛ рдЖрдк рд▓рдЧрднрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ!  рдХрдЯ рдХреЗ рддрд╣рдд рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЧреБрдгреЛрдВ рдХреЗ рд╕рд╛рде LUKS рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдбрд┐рд╕реНрдХ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдкрд░ рдПрдХ рдЧрд╛рдЗрдб рд╣реЛрдЧрд╛: </p><br><ol><li> рдкрд╛рд╕рдлрд╝реНрд░реЗрдЬрд╝ рдпрд╛ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рдмрдВрдж рд╣реЛрдиреЗ рдкрд░ рдЦреБрд▓реЗ рд░реВрдк рдореЗрдВ (рдпрд╛ рдЦреБрд▓реЗ рдХреЗ рдмрд░рд╛рдмрд░ рд░реВрдк рдореЗрдВ) рдХрд╣реАрдВ рднреА рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдкрд╣рд▓реА рдмрд╛рд░ рдЬрдм рдЖрдк рдЕрдкрдиреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рдЪрд╛рд▓реВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдкрд╛рд╕рдлрд╝реНрд░реЗрдЬрд╝ рджрд░реНрдЬ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </li><li>  рдмрд╛рдж рдХреЗ рд░рд┐рдмреВрдЯ рдкрд░ (рд╢рдЯ рдбрд╛рдЙрди рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ), рдПрдХ рдкрд╛рд╕рдлрд╝реНрд░реЗрдЬрд╝ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </li></ol><br><p>  рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдкрд░реАрдХреНрд╖рдг CentOS 7.6, Ubuntu 19.04, рдФрд░ openSUSE рд▓реАрдк 15.1 рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдФрд░ рдЕрд╕рд▓реА рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ (рдбреЗрд╕реНрдХрдЯреЙрдк, рд▓реИрдкрдЯреЙрдк рдФрд░ рджреЛ рд╕рд░реНрд╡рд░) рдкрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЙрдиреНрд╣реЗрдВ рдЕрдиреНрдп рд╡рд┐рддрд░рдгреЛрдВ рдкрд░ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрд┐рд╕рдореЗрдВ рдбреНрд░реИрдХреБрдЯ рдХрд╛ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рд╕рдВрд╕реНрдХрд░рдг рд╣реИред </p><br><p>  рдФрд░ рд╣рд╛рдВ, рдПрдХ рдЕрдЪреНрдЫреЗ рддрд░реАрдХреЗ рд╕реЗ, рдпрд╣ "рдЕрд╕рд╛рдорд╛рдиреНрдп рд╕рд┐рд╕реНрдЯрдо рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрд╢рди" рд╣рдм рдореЗрдВ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдерд╛, рд▓реЗрдХрд┐рди рдРрд╕рд╛ рдХреЛрдИ рд╣рдм рдирд╣реАрдВ рд╣реИред </p><a name="habracut"></a><br><p>  рдореИрдВ LUKS рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рд╕реНрд▓реЙрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реВрдВ рдФрд░ рдЗрд╕рдХреА рдХреБрдВрдЬреА рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рддрд╛ рд╣реВрдВ ... RAM рдореЗрдВ! </p><br><div class="spoiler">  <b class="spoiler_title">рдХрд┐рд╕ рддрд░рд╣ рдХрд╛ рд╕реНрд▓реЙрдЯ?</b> <div class="spoiler_text"><p> рдПрд▓рдпреВрдХреЗрдПрд╕ рдХрдВрдЯреЗрдирд░ рдмрд╣реБ-рд╕реНрддрд░реАрдп рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред  рдбрд┐рд╕реНрдХ рдкрд░ рдЙрдкрдпреЛрдЧреА рдбреЗрдЯрд╛ рдПрдХ рд╕рдордорд┐рдд рд╕рд┐рдлрд░ рдХреЗ рд╕рд╛рде рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЖрдорддреМрд░ рдкрд░ <code>aes-xts-plain64</code> ред  рдЗрд╕ рд╕рдордорд┐рддреАрдп рд╕рд┐рдлрд░ (рдорд╛рд╕реНрдЯрд░ рдХреБрдВрдЬреА) рдХреА рдХреБрдВрдЬреА рдмрд╛рдЗрдЯреНрд╕ рдХреЗ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрдиреБрдХреНрд░рдо рдХреЗ рд░реВрдк рдореЗрдВ рдХрдВрдЯреЗрдирд░ рдирд┐рд░реНрдорд╛рдг рдХреЗ рдЪрд░рдг рдореЗрдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИред  рдорд╛рд╕реНрдЯрд░ рдХреБрдВрдЬреА рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рдореЗрдВ - рдХрдИ рдкреНрд░рддрд┐рдпреЛрдВ (рд╕реНрд▓реЙрдЯреНрд╕) рдореЗрдВ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд░реВрдк рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдЖрда рд╕реНрд▓реЙрдЯреНрд╕ рдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рд╕рдХреНрд░рд┐рдп рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд╕рдХреНрд░рд┐рдп рд╕реНрд▓реЙрдЯ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдХреБрдВрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ (рдпрд╛ рдПрдХ рдЕрд▓рдЧ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓) рд╣реИ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдк рдорд╛рд╕реНрдЯрд░ рдХреБрдВрдЬреА рдХреЛ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░рдореБрдЦ рд╡рд╛рдХреНрдпрд╛рдВрд╢реЛрдВ (рдпрд╛ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓реЛрдВ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреНрд░рд╛рдЗрд╡ рдХреЛ рдЕрдирд▓реЙрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рдХреБрдВрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ (рд╕реНрд▓реЙрдЯ 0) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрд╛ рдореЗрдореЛрд░реА рдХреЗ рдПрдХ рдЯреБрдХрдбрд╝реЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ (рд╕реНрд▓реЙрдЯ 6) рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p></div></div><br><p>  рдЕрдзрд┐рдХрд╛рдВрд╢ рдорджрд░рдмреЛрд░реНрдб рдкрд░ BIOS рд░реАрдмреВрдЯ рдХрд░рддреЗ рд╕рдордп рдореЗрдореЛрд░реА рдХреЛ рд╕рд╛рдл рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдпрд╛ рдЖрдк рдЗрд╕реЗ рд╕рд╛рдл рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЬреНрдЮрд╛рдд рдЕрдкрд╡рд╛рдж: "рдЗрдВрдЯреЗрд▓ рдХреЙрд░реНрдкреЛрд░реЗрд╢рди S1200SP / S1200SP, BIOS S1200SP.86B.03.01.0042.013020190050 01-30/2019")ред  рдЗрд╕рд▓рд┐рдП, рдЖрдк рдХреБрдВрдЬреА рдХреЛ рд╡рд╣рд╛рдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЬрдм рдмрд┐рдЬрд▓реА рдмрдВрдж рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рд░реИрдо рдХреА рд╕рд╛рдордЧреНрд░реА рдереЛрдбрд╝реА рджреЗрд░ рдХреЗ рдмрд╛рдж рдорд┐рдЯ рдЬрд╛рддреА рд╣реИ, рд╕рд╛рде рд╣реА рдЪрд╛рдмреА рдХреА рдПрдХ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рднреАред </p><br><p>  рддреЛ рдЪрд▓рд┐рдП рдЪрд▓рддреЗ рд╣реИрдВред </p><br><h3 id="shag-pervyy-ustanovit-sistemu-na-zashifrovannyy-s-pomoschyu-luks-disk">  рдПрдХ рдХрджрдо: LUKS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдбрд┐рд╕реНрдХ рдкрд░ рд╕рд┐рд╕реНрдЯрдо рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h3><br><p>  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдбрд┐рд╕реНрдХ рд╡рд┐рднрд╛рдЬрди (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>/dev/sda1</code> ) <code>/boot</code> рдореЗрдВ рдорд╛рдЙрдВрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдЕрдирдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд░рд╣рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рджреВрд╕рд░рд╛ рд╡рд┐рднрд╛рдЬрди рдЬрд┐рд╕ рдкрд░ рдмрд╛рдХреА рд╕рдм рдХреБрдЫ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>/dev/sda2</code> ) рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдкрд╛рд░реНрдЯреАрд╢рди рдкрд░ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛрдИ рднреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЖрдк LVM рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд░реВрдЯ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо, рд╕реНрд╡реИрдк рдХреЗ рд▓рд┐рдП рд╡реЙрд▓реНрдпреВрдо рдФрд░ рд╕рд┐рд╡рд╛рдп <code>/boot</code> рдмрд╛рдХреА рд╕рднреА рдЪреАрдЬреЗрдВ рдПрдХ рд╣реА рдХрдВрдЯреЗрдирд░ рдореЗрдВ рд╣реЛрдВред  рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╡рд┐рдХрд▓реНрдк рдЪреБрдирддреЗ рд╕рдордп рдпрд╣ CentOS 7 рдФрд░ рдбреЗрдмрд┐рдпрди рдореЗрдВ рдбрд┐рдлреЙрд▓реНрдЯ рдбрд┐рд╕реНрдХ рд╡рд┐рднрд╛рдЬрди рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред  SUSE рд╕рдм рдХреБрдЫ рдЕрд▓рдЧ рддрд░рд╣ рд╕реЗ рдХрд░рддрд╛ рд╣реИ (рдПрдирдХреНрд░рд┐рдкреНрдЯ <code>/boot</code> ) рдФрд░ рдЗрд╕рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдХреЗ рдореИрдиреБрдЕрд▓ рд╡рд┐рднрд╛рдЬрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><p>  рдкрд░рд┐рдгрд╛рдо рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><pre> <code class="plaintext hljs">$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0 0 10G 0 disk тФЬтФАsda1 8:1 0 1G 0 part /boot тФФтФАsda2 8:2 0 9G 0 part тФФтФАluks-d07a97d7-3258-408c-a17c-e2fb56701c69 253:0 0 9G 0 crypt тФЬтФАcentos_centos--encrypt2-root 253:1 0 8G 0 lvm / тФФтФАcentos_centos--encrypt2-swap 253:2 0 1G 0 lvm [SWAP]</code> </pre> <br><p>  рдпреВрдИрдПрдлрдЖрдИ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рдИрдПрдлрдЖрдИ рд╕рд┐рд╕реНрдЯрдо рд╡рд┐рднрд╛рдЬрди рднреА рд╣реЛрдЧрд╛ред </p><br><blockquote>  рдбреЗрдмрд┐рдпрди рдФрд░ рдЙрдмрдВрдЯреВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП: <code>dracut</code> рд╕рд╛рде <code>dracut</code> <code>initramfs-tools</code> рдкреИрдХреЗрдЬ рдмрджрд▓реЗрдВред <br><pre> <code class="plaintext hljs"># apt install --no-install-recommends dracut</code> </pre> <br><br>  <code>initramfs-tools</code> рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЧрд▓рдд рддрд░реНрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, рдПрдХ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рд╡рд░реНрдЧреЛрдВ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред  рдРрд╕реЗ рдЕрдиреБрднрд╛рдЧреЛрдВ рдХреЛ рдпрд╛ рддреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдирджреЗрдЦрд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╛ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ initramfs (рдЕрд░реНрдерд╛рдд, рдбрд┐рд╕реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ) рдХреЛ рд╕реНрдкрд╖реНрдЯ рдореЗрдВ рдХреЙрдкреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреА рд╣рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </blockquote><br><h3 id="shag-vtoroy-sozdat-klyuchevoy-fayl-kotoryy-budet-ispolzovatsya-dlya-avtomaticheskogo-razblokirovaniya-diska-posle-goryachey-perezagruzki">  рдЪрд░рдг рджреЛ: рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ рдЬреЛ рдЧрд░реНрдо рд░рд┐рдмреВрдЯ рдХреЗ рдмрд╛рдж рдбреНрд░рд╛рдЗрд╡ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдирд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ </h3><br><p>  128 рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдмрд┐рдЯреНрд╕ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВ, рдЕрд░реНрдерд╛рддреНред  16 рдмрд╛рдЗрдЯреНрд╕ред  рдлрд╝рд╛рдЗрд▓ рдПрдХ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдбрд┐рд╕реНрдХ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХреА рдЬрд╛рдПрдЧреА, рдЗрд╕рд▓рд┐рдП рдХреЛрдИ рднреА рд╡реНрдпрдХреНрддрд┐ рдЬреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреБрдВрдЬреА рдХреЛ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИ рдФрд░ рд▓реЛрдб рд╕рд┐рд╕реНрдЯрдо рдкрд░ рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рд╣реИ, рдЗрд╕реЗ рдирд╣реАрдВ рдкрдврд╝реЗрдЧрд╛ред </p><br><pre> <code class="plaintext hljs"># touch -m 0600 /root/key # head -c16 /dev/urandom &gt; /root/key</code> </pre> <br><p>  рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рд░реВрдк рд╕реЗ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдмрд┐рдЯреНрд╕ рд╣реИрдВ рддрд╛рдХрд┐ рдзреАрдореА PBKDF рдПрд▓реНрдЧреЛрд░рд┐рджрдо, рдЬреЛ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдХрдордЬреЛрд░ рдХреБрдВрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ рд╕реЗ рд╣рд╛рд░реНрдб-рдЯреВ-рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреБрдВрдЬреА рдмрдирд╛рддрд╛ рд╣реИ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЬрдм рдПрдХ рдХреБрдВрдЬреА рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs"># cryptsetup luksAddKey --key-slot=6 --iter-time=1 /dev/sda2 /root/key Enter any existing passphrase:</code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдПрдХ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдбрд┐рд╕реНрдХ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИ рдФрд░ рдЗрд╕рд▓рд┐рдП рдХрдВрдкреНрдпреВрдЯрд░ рдмрдВрдж рд╣реЛрдиреЗ рдкрд░ рдХреЛрдИ рд╕реБрд░рдХреНрд╖рд╛ рдЬреЛрдЦрд┐рдо рдирд╣реАрдВ рд╣реИред </p><br><h3 id="shag-tretiy-vydelit-mesto-v-fizicheskoy-pamyati-dlya-hraneniya-klyucha">  рдЪрд░рдг рддреАрди: рдХреБрдВрдЬреА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдореЗрдВ рд╕реНрдерд╛рди рдЖрд╡рдВрдЯрд┐рдд рдХрд░реЗрдВ </h3><br><p>  рд▓рд┐рдирдХреНрд╕ рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рддреАрди рдЕрд▓рдЧ-рдЕрд▓рдЧ рдбреНрд░рд╛рдЗрд╡рд░ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдПрдХ рдЬреНрдЮрд╛рдд рдкрддреЗ рдкрд░ рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред  рдпрд╣ <code>linux/drivers/char/mem.c</code> , рдЬреЛ рдбрд┐рд╡рд╛рдЗрд╕ <code>/dev/mem</code> , рд╕рд╛рде рд╣реА рд╕рд╛рде <code>phram</code> рдореЙрдбреНрдпреВрд▓ рдХреЗ рд▓рд┐рдП рднреА рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ (рдПрдордЯреАрдбреА рдЪрд┐рдк рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддрд╛ рд╣реИ, рдбрд┐рд╡рд╛рдЗрд╕ <code>/dev/mtd0</code> ) рдФрд░ <code>nd_e820</code> ( <code>nd_e820</code> рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп, рдЙрдкрдпреЛрдЧ <code>/dev/pmem0</code> рджреЗрддрд╛ рд╣реИ <code>/dev/pmem0</code> )ред  рдЙрдирдХреА рд╕рднреА рдЕрдкреНрд░рд┐рдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ: </p><br><ul><li>  рд╕реБрд░рдХреНрд╖рд┐рдд рдмреВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп <code>/dev/mem</code> рдпреЛрдЧреНрдп рдирд╣реАрдВ рд╣реИ, рдЕрдЧрд░ рд╡рд┐рддрд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐рдЯ</a> рдореИрдереНрдпреВ рдЧреИрд░реЗрдЯ рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЙрдХрдбреЙрдХ рдкреИрдЪ рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ</a> (рдФрд░ рдпрд╣ рдкреИрдЪ рд╕реЗрдЯ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдпрджрд┐ рд╡рд┐рддрд░рдг рдорд╛рдЗрдХреНрд░реЛрд╕реЙрдлреНрдЯ рджреНрд╡рд╛рд░рд╛ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдмреВрдЯрд▓реЛрдбрд░ рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рдмреВрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ); </li><li>  <code>phram</code> рд╕реЗрдВрдЯреЛрд╕ рдФрд░ рдлреЗрдбреЛрд░рд╛ рдкрд░ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИ - рдХрд░реНрдиреЗрд▓ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рдЕрдиреБрд░рдХреНрд╖рдХ рдиреЗ рд╕рдВрдЧрдд рд╡рд┐рдХрд▓реНрдк рдХреЛ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рдХрд┐рдпрд╛; </li><li>  <code>nd_e820</code> рдХреЛ рдХрдо рд╕реЗ рдХрдо 128 рдореЗрдЧрд╛рдмрд╛рдЗрдЯ рдореЗрдореЛрд░реА рдХреЛ рдЖрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ - рдпрд╣ рд╣реИ рдХрд┐ NVDIMM рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╕реЗрдВрдЯреЛрд╕ рдкрд░ рд╕рд┐рдХреНрдпреЛрд░ рдмреВрдЯ рдХреЗ рд╕рд╛рде рдЪрд▓рдиреЗ рд╡рд╛рд▓рд╛ рдпрд╣ рдПрдХрдорд╛рддреНрд░ рд╡рд┐рдХрд▓реНрдк рд╣реИред </li></ul><br><p>  рдЪреВрдВрдХрд┐ рдХреЛрдИ рдЖрджрд░реНрд╢ рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рд╣реИ, рддреАрдиреЛрдВ рдХреЛ рдиреАрдЪреЗ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><blockquote>  рдХрд┐рд╕реА рднреА рддрд░реАрдХреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЕрддреНрдпрдзрд┐рдХ рджреЗрдЦрднрд╛рд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддрд╛рдХрд┐ рдЧрд▓рддреА рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдпрд╛ рдореЗрдореЛрд░реА рд░реЗрдВрдЬ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред  рдпрд╣ рдЙрди рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рдЪ рд╣реИ рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ MTD рдЪрд┐рдкреНрд╕ рдпрд╛ NVDIMM рдореЙрдбреНрдпреВрд▓ рд╣реИрдВред  рдЕрд░реНрдерд╛рддреН, <code>/dev/mtd0</code> рдпрд╛ <code>/dev/pmem0</code> рд╡рд╣ рдЙрдкрдХрд░рдг рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдХреБрдВрдЬреА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд░рдХреНрд╖рд┐рдд рдореЗрдореЛрд░реА рдХреНрд╖реЗрддреНрд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реЛред  рдореМрдЬреВрджрд╛ рдЙрдкрдХрд░рдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛, рдЬрд┐рд╕ рдкрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рднрд░реЛрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ, рднреНрд░рдорд┐рдд рднреА рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рддрджрдиреБрд╕рд╛рд░, рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдЖрдк рдЙрди рд╕рднреА рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо рдХрд░ рджреЗрдВ рдЬреЛ рдореМрдЬреВрджрд╛ рдЙрдкрдХрд░рдгреЛрдВ <code>/dev/pmem*</code> рдФрд░ <code>/dev/pmem*</code> ред </blockquote><p>  рд▓рд┐рдирдХреНрд╕ рдлрд┐рдЬрд┐рдХрд▓ рдореЗрдореЛрд░реА рдХреЛ <code>memmap</code> рдСрдкреНрд╢рди рдХреЛ <code>memmap</code> рдкрд╛рд╕ рдХрд░рдХреЗ <code>memmap</code> рдЬрд╛рддрд╛ рд╣реИред  рд╣рдо рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЗ рджреЛ рдкреНрд░рдХрд╛рд░реЛрдВ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ: </p><br><ul><li>  <code>memmap=4K$0x10000000</code> рдЖрд░рдХреНрд╖рд┐рдд (рдпрд╛рдиреА, рдЖрд░рдХреНрд╖рд┐рдд рдирд┐рд╢рд╛рди рддрд╛рдХрд┐ рдХрд░реНрдиреЗрд▓ рд╕реНрд╡рдпрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВ) 4 рдХрд┐рд▓реЛрдмрд╛рдЗрдЯ рдореЗрдореЛрд░реА, рднреМрддрд┐рдХ рдкрддреЗ 0x10000000 рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ; </li><li>  <code>memmap=128M!0x10000000</code> рднреМрддрд┐рдХ рд╕реНрдореГрддрд┐ рдХрд╛ 128 рдореЗрдЧрд╛рдмрд╛рдЗрдЯ рдирд┐рд╢рд╛рди, 0x10000000 рдкрддреЗ рдкрд░ рд╢реБрд░реВ, NVDIMM рдХреЗ рд░реВрдк рдореЗрдВ (рдЬрд╛рд╣рд┐рд░ рд╣реИ рдирдХрд▓реА, рд▓реЗрдХрд┐рди рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдХреНрдпрд╛ рдХрд░реЗрдЧрд╛)ред </li></ul><br><p>  C <code>$</code> рд╡рд┐рдХрд▓реНрдк <code>/dev/mem</code> рдФрд░ <code>phram</code> , c рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ <code>!</code>  - <code>nd_e820</code> ред  <code>$</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп <code>$</code> рдЖрд░рдХреНрд╖рд┐рдд рдореЗрдореЛрд░реА рдХрд╛ рд╢реБрд░реБрдЖрддреА рдкрддрд╛ <code>0x1000</code> (рдпрд╛рдиреА 4 рдХрд┐рд▓реЛрдмрд╛рдЗрдЯ) рдХрд╛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрдм рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ <code>!</code>  - <code>0x8000000</code> рдХреА рдПрдХ рдмрд╣реБ (рдпрд╛рдиреА 128 рдореЗрдЧрд╛рдмрд╛рдЗрдЯ)ред </p><br><p>  рдорд╣рддреНрд╡рдкреВрд░реНрдг: GRUB рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдбреЙрд▓рд░ рдЪрд┐рд╣реНрди ( <code>$</code> ) рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЪрд░рд┐рддреНрд░ рд╣реИ рдФрд░ рдЗрд╕реЗ рдмрдЪ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдФрд░ рджреЛ рдмрд╛рд░: рдПрдХ рдмрд╛рд░ - рдЬрдм <code>/etc/default/grub</code> рд╕реЗ <code>grub.cfg</code> рдЬрдирд░реЗрдЯ <code>grub.cfg</code> , рджреВрд╕рд░реА рдмрд╛рд░ - рдЬрдм рдмреВрдЯ рд╕реНрдЯреЗрдЬ рдкрд░ рдкрд░рд┐рдгрд╛рдореА рд╡рд┐рдиреНрдпрд╛рд╕ рдлрд╛рдЗрд▓ рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╛рдиреА  <code>/etc/default/grub</code> , рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрдВрдХреНрддрд┐ рдЕрдВрддрддрдГ рджрд┐рдЦрд╛рдИ рджреЗрдиреА рдЪрд╛рд╣рд┐рдП: </p><br><pre> <code class="plaintext hljs">GRUB_CMDLINE_LINUX="memmap=4K\\\$0x10000000 ...  ..."</code> </pre> <br><p>  <code>$</code> рд╕рд╛рдЗрди рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рдмрд┐рдирд╛, рд╕рд┐рд╕реНрдЯрдо рдХреЗрд╡рд▓ рдмреВрдЯ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕реЛрдЪреЗрдЧрд╛ рдХрд┐ рдЗрд╕рдореЗрдВ рдХреЗрд╡рд▓ 4 рдХрд┐рд▓реЛрдмрд╛рдЗрдЯ рдореЗрдореЛрд░реА рд╣реИред  рд╡рд┐рд╕реНрдордпрд╛рджрд┐рдмреЛрдзрдХ рдЪрд┐рд╣реНрди рдХреЗ рд╕рд╛рде рдРрд╕реА рдХреЛрдИ рдХрдард┐рдирд╛рдИ рдирд╣реАрдВ рд╣реИ: </p><br><pre> <code class="plaintext hljs">GRUB_CMDLINE_LINUX="memmap=128M!0x10000000 ...  ..."</code> </pre> <br><p>  рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдХрд╛рд░реНрдб (рдФрд░ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рдХреМрди рд╕реЗ рдкрддреЗ рдЖрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП) <code>/proc/iomem</code> pseudo <code>/proc/iomem</code> рдореЗрдВ <code>root</code> рд▓рд┐рдП рд╕реБрд▓рдн рд╣реИ: </p><br><pre> <code class="plaintext hljs"># cat /proc/iomem ... 000f0000-000fffff : reserved 000f0000-000fffff : System ROM 00100000-7ffddfff : System RAM 2b000000-350fffff : Crash kernel 73a00000-7417c25e : Kernel code 7417c25f-747661ff : Kernel data 74945000-74c50fff : Kernel bss 7ffde000-7fffffff : reserved 80000000-febfffff : PCI Bus 0000:00 fd000000-fdffffff : 0000:00:02.0 ...</code> </pre> <br><p>  рд░реИрдо рдХреЛ "рд╕рд┐рд╕реНрдЯрдо рд░реИрдо" рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдХреБрдВрдЬреА рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдкреГрд╖реНрдареЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдЖрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ BIOS рдХреА рдореЗрдореЛрд░реА рдХрд╛ рдХреМрди рд╕рд╛ рд╣рд┐рд╕реНрд╕рд╛ рд░рд┐рдмреВрдЯ рдХрд░рдиреЗ рдкрд░ рд╕реНрдкрд░реНрд╢ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЕрдЧреНрд░рд┐рдо рд░реВрдк рд╕реЗ рдордЬрд╝рдмреВрддреА рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдЬрдм рддрдХ рдХрд┐ рдПрдХ рд╣реА BIOS рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдПрдХ рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рди рд╣реЛ рдФрд░ рдПрдХ рд╣реА рдореЗрдореЛрд░реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╣реЛ, рдЬрд┐рд╕ рдкрд░ рдпрд╣ рдореИрдиреБрдЕрд▓ рдкрд╣рд▓реЗ рд╣реА рдкреВрд░рд╛ рд╣реЛ рдЪреБрдХрд╛ рд╣реЛред  рдЗрд╕рд▓рд┐рдП, рд╕рд╛рдорд╛рдиреНрдп рдорд╛рдорд▓реЗ рдореЗрдВ, рдкрд░реАрдХреНрд╖рдг рдФрд░ рддреНрд░реБрдЯрд┐ рд╕реЗ рдХрд╛рд░реНрдп рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛ред  рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдЬрдм BIOS рд░рд┐рдмреВрдЯ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдХреЗрд╡рд▓ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдореЛрд░реА рд░реЗрдВрдЬ рдХреЗ рдЕрдВрдд рдореЗрдВ рдбреЗрдЯрд╛ рдмрджрд▓рддрд╛ рд╣реИред  рдпрд╣ рдЖрдорддреМрд░ рдкрд░ рдХрд┐рдирд╛рд░реЛрдВ рд╕реЗ 128 рдореЗрдЧрд╛рдмрд╛рдЗрдЯ ( <code>0x8000000</code> ) рдкреАрдЫреЗ рд╣рдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  рдХреЗрд╡реАрдПрдо рдЖрднрд╛рд╕реА рдорд╢реАрдиреЛрдВ рдХреЗ рд▓рд┐рдП 1 рдЬреАрдмреА рдореЗрдореЛрд░реА рдпрд╛ рдЕрдзрд┐рдХ рдХреЗ рд╕рд╛рде, рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╡рд┐рдХрд▓реНрдк ( <code>memmap=4K$0x10000000</code> рдФрд░ <code>memmap=128M!0x10000000</code> ) рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  <code>phram</code> рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ <code>phram</code> , <code>phram</code> рдПрдХ рдФрд░ рдХрд░реНрдиреЗрд▓ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдкреИрд░рд╛рдореАрдЯрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореЙрдбреНрдпреВрд▓ рдХреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдХрд╛ рдХреМрди рд╕рд╛ рдЯреБрдХрдбрд╝рд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ - рд╣рдорд╛рд░рд╛, рдЖрд░рдХреНрд╖рд┐рддред  рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ <code>phram.phram</code> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рддреАрди рднрд╛рдЧ рд╣реЛрддреЗ рд╣реИрдВ: рдирд╛рдо (63 рдЕрдХреНрд╖рд░реЛрдВ рддрдХ рдХрд╛ рдордирдорд╛рдирд╛, <code>sysfs</code> рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛), рд╢реБрд░реБрдЖрддреА рдкрддрд╛ рдФрд░ рд▓рдВрдмрд╛рдИред  рд╢реБрд░реБрдЖрддреА рдкрддрд╛ рдФрд░ рд▓рдВрдмрд╛рдИ <code>memmap</code> рдореЗрдВ рд╕рдорд╛рди рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдкреНрд░рддреНрдпрдп <code>K</code> рдФрд░ <code>M</code> рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ <code>M</code> ред </p><br><pre> <code class="plaintext hljs">GRUB_CMDLINE_LINUX="memmap=4K\\\$0x10000000 phram.phram=savedkey,0x10000000,4096 ..."</code> </pre> <br><p>  рд╕рдВрдкрд╛рджрди <code>/etc/default/grub</code> рдЖрдкрдХреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЛ рдкреБрдирд░реНрдЬреАрд╡рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ GRUB рдмреВрдЯ рдкрд░ рдкрдврд╝рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рд▓рд┐рдП рд╕рд╣реА рдХрдорд╛рдВрдб рд╡рд┐рддрд░рдг рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs"># grub2-mkconfig -o /boot/grub2/grub.cfg # CentOS (Legacy BIOS) # grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg # CentOS (UEFI) # update-grub # Debian, Ubuntu # update-bootloader --reinit # SUSE</code> </pre> <br><p>  GRUB рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рд░рд┐рдмреВрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдЬрдм рд╣рдо initramfs рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рд╣рдо рдЗрд╕реЗ рдмрд╛рдж рдореЗрдВ рдХрд░реЗрдВрдЧреЗред </p><br><h3 id="shag-chetvertyy-nastroit-luks-na-chtenie-klyucha-iz-pamyati">  рдЪреМрдерд╛ рдЪрд░рдг: рдореЗрдореЛрд░реА рд╕реЗ рдХреБрдВрдЬреА рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП LUKS рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h3><br><p>  <code>/etc/crypttab</code> рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ <code>/etc/crypttab</code> рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВред  рдЗрд╕рдХреА рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдЪрд╛рд░ рдХреНрд╖реЗрддреНрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: </p><br><ul><li>  рдбрд┐рд╡рд╛рдЗрд╕ рдЬреЛ рдЕрдирд▓реЙрдХ рдХрд░рддреЗ рд╕рдордп рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, </li><li>  рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдбрд┐рд╡рд╛рдЗрд╕ </li><li>  рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдХрд╣рд╛рдВ рдорд┐рд▓реЗрдЧреА (рдХреАрдмреЛрд░реНрдб рд╕реЗ рдХреБрдВрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ рджрд░реНрдЬ рдХрд░рдиреЗ рдХрд╛ <code>none</code> рдорддрд▓рдм <code>none</code> рд╣реИ), </li><li>  рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд▓рд┐рдП рд╡реИрдХрд▓реНрдкрд┐рдХ рдХреНрд╖реЗрддреНрд░ред </li></ul><br><p>  рдпрджрд┐ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдореМрдЬреВрдж рд╣реИ, рд▓реЗрдХрд┐рди рдлрд┐рдЯ рдирд╣реАрдВ рд╣реИ, рддреЛ рдбреНрд░реИрдХреБрдЯ рдХреБрдВрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ рдХреЗ рд▓рд┐рдП рдкреВрдЫрддрд╛ рд╣реИред  рдЬреЛ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдкрд╣рд▓реЗ рдмреВрдЯ рдкрд░ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛ред </p><br><p>  рддрд╛рдЬрд╝рд╛ рд╕реНрдерд╛рдкрд┐рдд рд╡рд┐рддрд░рдг рд╕реЗ <code>/etc/crypttab</code> рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="plaintext hljs"># cat /etc/crypttab #   luks-d07....69 UUID=d07....69 none</code> </pre> <br><p>  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓ рднреМрддрд┐рдХ рдореЗрдореЛрд░реА рдХрд╛ рдПрдХ рдЯреБрдХрдбрд╝рд╛ рд╣реЛрдЧреАред  рдпрд╛рдиреА  рдЪрдпрдирд┐рдд рдореЗрдореЛрд░реА рдПрдХреНрд╕реЗрд╕ рддрдХрдиреАрдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ <code>/dev/mem</code> , <code>/dev/mtd0</code> рдпрд╛ <code>/dev/pmem0</code> ред  рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдХреМрди рд╕рд╛ рдЯреБрдХрдбрд╝рд╛ рдХреБрдВрдЬреА рд╣реИред </p><br><pre> <code class="plaintext hljs"># cat /etc/crypttab #   #   /dev/mem: luks-d07....69 UUID=d07....69 /dev/mem keyfile-offset=0x10000000,keyfile-size=16 #   phram: luks-d07....69 UUID=d07....69 /dev/mtd0 keyfile-size=16 #   nd_e820: luks-d07....69 UUID=d07....69 /dev/pmem0 keyfile-size=16</code> </pre> <br><p>  рдмрд╕ рдЗрддрдирд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЙрд╕ рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ </p><br><p>  рдмрд┐рдВрджреБ рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдЕрдирд▓реЙрдХ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддреЛ рд╕рд┐рд╕реНрдЯрдо рдХреИрд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЕрд░реНрдерд╛рддреН, рд╡рд╣ рддреАрд╕рд░реЗ рдХреЙрд▓рдо рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕реА рдбрд┐рд╡рд╛рдЗрд╕ рдпреВрдирд┐рдЯ рдХреЗ рд╕рдХреНрд░рд┐рдп рд╣реЛрдиреЗ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рддрд░реНрдХрд╕рдВрдЧрдд рд▓рдЧрддрд╛ рд╣реИ: LUKS рдХрдВрдЯреЗрдирд░ рдХреЛ рдЕрдирд▓реЙрдХ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рдПрдХ рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рд╡рд╛рд▓рд╛ рдбрд┐рд╡рд╛рдЗрд╕ рдкреНрд░рдХрдЯ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдбрд┐рд╡рд╛рдЗрд╕ рдпреВрдирд┐рдЯ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд╕рдорд╛рди рдирд╣реАрдВ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рд┐рд╕реНрдЯрдордб рдХреЗрд╡рд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдбрд┐рд╡рд╛рдЗрд╕реЗрд╕ рдмрдирд╛рддрд╛ рд╣реИ рдЬреЛ рдХрд┐ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд╕рдмрд╕рд┐рд╕реНрдЯрдо рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдХрд░реНрдиреЗрд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рд╣реЛрддрд╛ рд╣реИред  рдЙрдкрдХрд░рдг <code>/dev/mem</code> рдФрд░ <code>/dev/mtd0</code> рдЪрд░рд┐рддреНрд░-рджрд░-рд╡рд░реНрдг рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдореЙрдирд┐рдЯрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдХрднреА рднреА рддреИрдпрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╣рдЪрд╛рдирд╛ рдирд╣реАрдВ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдЖрдкрдХреЛ systemd рдХреЛ рдмрддрд╛рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рд╡рд╣ <code>/etc/udev/rules.d/99-mem.rules</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ udev рдирд┐рдпрдо рдмрдирд╛рдХрд░ рдЙрдиреНрд╣реЗрдВ рдЯреНрд░реИрдХ рдХрд░реЗ: </p><br><pre> <code class="plaintext hljs"># /dev/mem KERNEL=="mem", TAG+="systemd" # /dev/mtd* KERNEL=="mtd*", TAG+="systemd" #  /dev/pmem*      </code> </pre> <br><h3 id="shag-pyatyy-peregenerirovat-initramfs">  рдЪрд░рдг рдкрд╛рдБрдЪ: initramfs рдХреЛ рдкреБрди: рдмрдирд╛рдПрдБ </h3><br><blockquote>  рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ: рдпрд╣ рд▓реЗрдЦ рдХреЗрд╡рд▓ рдбреНрд░реИрдХреБрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рддрд░рдг рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░рддрд╛ рд╣реИред  рдЙрди рд▓реЛрдЧреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рдЬрд╣рд╛рдВ рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕реБрд▓рдн рдФрд░ рдХреБрд╢рд▓ рд╣реИред </blockquote><p>  рдЖрдкрдХреЛ <code>/etc/crypttab</code> рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП initramfs рдХреЛ рдкреБрди: рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдФрд░ рдпрд╣ рднреА - рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рдФрд░ udev рдирд┐рдпрдореЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред  рдЕрдиреНрдпрдерд╛, рдбрд┐рд╡рд╛рдЗрд╕ <code>/dev/mtd0</code> рдпрд╛ <code>/dev/pmem0</code> рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  <code>force_drivers</code> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рдХреЛ рд╕рдХреНрд╖рдо рдФрд░ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рдФрд░ <code>install_items</code> рдЕрддрд┐рд░рд┐рдХреНрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рдлрд╝рд╛рдЗрд▓ <code>/etc/dracut.conf.d/mem.conf</code> рдмрдирд╛рддреЗ рд╣реИрдВ (рдЙрджреНрдШрд╛рдЯрди рдЙрджреНрдзрд░рдг рдЪрд┐рд╣реНрди рдХреЗ рдмрд╛рдж рдПрдХ рд╕реНрдерд╛рди рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдпрд╣ рдПрдХ рд╡рд┐рднрд╛рдЬрдХ рд╣реИ): </p><br><pre> <code class="plaintext hljs">#   /dev/mem: install_items+=" /etc/udev/rules.d/99-mem.rules" #   phram: install_items+=" /etc/udev/rules.d/99-mem.rules" force_drivers+=" phram" #   nd_e820: force_drivers+=" nd_e820 nd_pmem"</code> </pre> <br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкреБрдирд░реНрдирд┐рд╡реЗрд╢ initramfs: </p><br><pre> <code class="plaintext hljs"># dracut -f</code> </pre> <br><blockquote>  рдбреЗрдмрд┐рдпрди рдФрд░ рдЙрдмрдВрдЯреВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП, рдЕрдиреБрдЪрд░ рдиреЗ рдПрдХ рд░реЗрдХ рд▓рдЧрд╛рдпрд╛: рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдкрдХреЛ рдЗрд╕рдХрд╛ рдирд╛рдо рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЗрд╕реЗ рдЙрд╕реА рддрд░рд╣ рдирд╛рдорд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП рдЬреИрд╕рд╛ рдХрд┐ GRUB рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реИ: <br><pre> <code class="plaintext hljs"># mv /boot/initramfs-5.0.0-19-generic.img /boot/initrd.img-5.0.0-19-generic</code> </pre> <br><br>  рдирдИ рдЧреБрдард▓реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╕рдордп, рдбреНрд░реИрдХреБрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрдирдЯреНрд░реНрд░рд╛рдореНрд╕ рдХреА рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░рдЪрдирд╛ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдмрдЧ рдХреЗрд╡рд▓ <code>dracut -f</code> рдХреЗ рдореИрдиреБрдЕрд▓ рд▓реЙрдиреНрдЪ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред </blockquote><br><h3 id="shag-shestoy-perezagruzit-kompyuter">  рдЪрд░рдг рдЫрд╣: рдЕрдкрдиреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░реЗрдВ </h3><br><p>  рдкреНрд░рднрд╛рд╡реА рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП GRUB рдФрд░ Dracut рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рд▓рд┐рдП рдПрдХ рд░рд┐рдмреВрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs"># reboot</code> </pre> <br><p>  рдЗрд╕ рд╕реНрддрд░ рдкрд░, рд╕реНрдореГрддрд┐ рдореЗрдВ рдХреЛрдИ рдХреБрдВрдЬреА рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдкрд╛рд╕рдлрд╝реНрд░реЗрдЬрд╝ рджрд░реНрдЬ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред </p><br><p>  рд░рд┐рдмреВрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдореЗрдореЛрд░реА рдмреИрдХрдЕрдк рдиреЗ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдХрдо рд╕реЗ рдХрдо, <code>/proc/iomem</code> pseudo <code>/proc/iomem</code> рд╡рд╛рдВрдЫрд┐рдд рдореЗрдореЛрд░реА рд▓реЛрдХреЗрд╢рди рдХреЛ "рдЖрд░рдХреНрд╖рд┐рдд" (рдЬрдм <code>/dev/mem</code> рдпрд╛ <code>phram</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП) рдпрд╛ "Persistent Memory (рд╡рд┐рд░рд╛рд╕рдд)" рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  <code>phram</code> рдпрд╛ <code>nd_e820</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ <code>phram</code> <code>nd_e820</code> рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдбрд┐рд╡рд╛рдЗрд╕ <code>/dev/mtd0</code> рдпрд╛ <code>/dev/pmem0</code> рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕реНрдореГрддрд┐ рдХреЗ рдкрд╣рд▓реЗ рдЖрд░рдХреНрд╖рд┐рдд рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдХреБрдЫ рдФрд░ рдХреЛ рдирд╣реАрдВред </p><br><pre> <code class="plaintext hljs"># cat /sys/class/mtd/mtd0/name #  : "savedkey" # cat /sys/block/pmem0/device/resource #    </code> </pre> <br><p>  рдпрджрд┐ рдпрд╣ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдпрд╣ рдЦреЛрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕реЗ рдЙрдкрдХрд░рдг <code>/dev/mtd*</code> <code>/dev/pmem*</code> рдпрд╛ <code>/dev/pmem*</code> "рд╣рдорд╛рд░рд╛" рд╣реИ, рдФрд░ рдлрд┐рд░ рдлрд┐рдХреНрд╕ / etc / crypttab, initramfs рдХреЛ рдкреБрди: рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ рдФрд░ рдПрдХ рдЕрдиреНрдп рд░рд┐рдмреВрдЯ рдХреЗ рдмрд╛рдж рдкрд░рд┐рдгрд╛рдо рдкреБрди: рдЬрд╛рдВрдЪреЗрдВред </p><br><h3 id="shag-sedmoy-nastroit-kopirovanie-klyuchevogo-fayla-v-pamyat">  рд╕рд╛рддрд╡рд╛рдВ рдЪрд░рдг: рдХреБрдВрдЬреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рдореЗрдореЛрд░реА рдореЗрдВ рдХреЙрдкреА рдХрд░рдирд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h3><br><p>  рд░рд┐рдмреВрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдореЗрдореЛрд░реА рдореЗрдВ рдХреА рдлрд╛рдЗрд▓ рдХреЙрдкреА рдХреА рдЬрд╛рдПрдЧреАред  рд╕рд┐рд╕реНрдЯрдо рд╢рдЯрдбрд╛рдЙрди рдХреЗ рдЪрд░рдг рдореЗрдВ рдХрд┐рд╕реА рднреА рдХрдорд╛рдВрдб рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИ рдЗрд╕реЗ рд╕рд┐рд╕реНрдЯрдо рд╕реЗрд╡рд╛ рдореЗрдВ <code>ExecStop</code> рдирд┐рд░реНрджреЗрд╢ рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд░рдирд╛ред  рд╕рд┐рд╕реНрдЯрдордб рдХреЗ рд▓рд┐рдП рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдпрд╣ рдПрдХ рдбреЗрдореЙрди рдирд╣реАрдВ рд╣реИ рдФрд░ <code>ExecStart</code> рдирд┐рд░реНрджреЗрд╢ рдХреЗ рдЕрднрд╛рд╡ рдореЗрдВ рдХрд╕рдо рдирд╣реАрдВ рдЦрд╛рддреЗ рд╣реИрдВ, рдЖрдкрдХреЛ <code>ExecStart</code> рд░реВрдк рдореЗрдВ рд╕реЗрд╡рд╛ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдФрд░ рдпрд╣ рднреА рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рд╕реЗрд╡рд╛ рдХреЛ рдЪрд╛рд▓реВ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдХреЛрдИ рднреА рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЗрд╕рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реА рдирд╣реАрдВ рд╣реИред  рддреЛ, рдпрд╣рд╛рдБ <code>/etc/systemd/system/savekey.service</code> рдлрд╝рд╛рдЗрд▓ рд╣реИред  <code>ExecStop</code> рдирд┐рд░реНрджреЗрд╢ рдХреЗ рджрд┐рдП рдЧрдП рд╡реЗрд░рд┐рдПрдВрдЯ рдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рдХреЛ рдЫреЛрдбрд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><pre> <code class="plaintext hljs">[Unit] Description=Saving LUKS key into RAM Documentation=https://habr.com/ru/post/457396/ [Service] Type=oneshot RemainAfterExit=true #   /dev/mem: ExecStop=/bin/sh -c 'dd if=/root/key of=/dev/mem bs=1 seek=$((0x10000000))' #   /dev/mtd0: ExecStop=/bin/dd if=/root/key of=/dev/mtd0 #   /dev/pmem0: ExecStop=/bin/dd if=/root/key of=/dev/pmem0 [Install] WantedBy=default.target</code> </pre> <br><p>  <code>dd</code> <code>/bin/sh</code> hexadecimal рд╕рдВрдХреЗрддрди рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рдмрд╛рдж рд╕реЗ <code>/bin/sh</code> рд╕рд╛рде рдирд┐рд░реНрдорд╛рдг <code>/bin/sh</code> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рд╣рдо рд╕реЗрд╡рд╛ рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░рддреЗ рд╣реИрдВ, рдЬрд╛рдВрдЪреЗрдВ: </p><br><pre> <code class="plaintext hljs"># systemctl enable savekey # systemctl start savekey # reboot</code> </pre> <br><p>  рдмрд╛рдж рдХреЗ рд░рд┐рдмреВрдЯ рдХреЗ рджреМрд░рд╛рди, рдЖрдкрдХреЛ рдбрд┐рд╕реНрдХ рд╕реЗ рдкрд╛рд╕рдлрд╝реНрд░реЗрдЬрд╝ рджрд░реНрдЬ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЖрдорддреМрд░ рдкрд░ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрд░рдХреНрд╖рд┐рдд рдореЗрдореЛрд░реА рдХреНрд╖реЗрддреНрд░ рдХрд╛ рдкреНрд░рд╛рд░рдВрдн рдкрддрд╛ рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдЪреБрдирд╛ рдЧрдпрд╛ рд╣реИред  рдХрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдареАрдХ рдХрд░рдирд╛ рдФрд░ рдкреБрди: рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рдФрд░ рджреЛ рдмрд╛рд░ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдирд╛ рдареАрдХ рд╣реИред </p><br><p>  <code>phram</code> рдпрд╛ <code>nd_e820</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ <code>phram</code> <code>nd_e820</code> рдХреЗрд╡рд▓ GRUB рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  <code>/dev/mem</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп <code>/dev/mem</code> рд╢реБрд░реБрдЖрддреА рдкрддреЗ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ <code>/etc/crypttab</code> рдореЗрдВ рднреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЗрд╕рд▓рд┐рдП, initramfs рдХреЛ рдкреБрдирд░реНрдЬреАрд╡рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛) рдФрд░ systemd рд╕реЗрд╡рд╛ рдореЗрдВред </p><br><p>  рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдм рдирд╣реАрдВ рд╣реИред </p><br><h3 id="voprosy-bezopasnosti">  рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рдореБрджреНрджреЗ </h3><br><p>  рд╕реБрд░рдХреНрд╖рд╛ рдореБрджреНрджреЛрдВ рдХреА рдХреЛрдИ рднреА рдЪрд░реНрдЪрд╛ рдЦрддрд░реЗ рдХреЗ рдореЙрдбрд▓ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред  рдпрд╛рдиреА  рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рд▓рдХреНрд╖реНрдпреЛрдВ рдФрд░ рд╕рд╛рдзрдиреЛрдВ рдкрд░ред  рдореБрдЭреЗ рдкрддрд╛ рд╣реИ рдХрд┐ рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдХреБрдЫ рдЙрджрд╛рд╣рд░рдг рджреВрд░ рдХреА рдХреМрдбрд╝реА рд╣реИрдВред </p><br><p>  рдХрд┐рд╕реА рдмрдВрдж рдХрдВрдкреНрдпреВрдЯрд░ рдореЗрдВ рднреМрддрд┐рдХ рдкрд╣реБрдБрдЪ рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рддрд┐рдпрд╛рдБ рд╕реНрдореГрддрд┐ рдореЗрдВ рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреБрдВрдЬреА рд╕рдВрдЧреНрд░рд╣рдг рдХреЗ рдмрд┐рдирд╛ рдЙрди рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИрдВред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдИрд╡рд┐рд▓ рдореИрдб</a> рдФрд░ рдПрдХ рд╣реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрд╡рд┐рдзрд╛рдУрдВ</a> рд╕рд╣рд┐рдд рдкреНрд░рдореБрдЦ рд╡рд╛рдХреНрдпрд╛рдВрд╢реЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рд╕реЗ рдПрдХ рд╣реА рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣рдорд▓реЗ рд╣реИрдВред  рд╣рдо рдЙрди рдкрд░ рдирд╣реАрдВ рд░реБрдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рдирдИ рдмрд╛рдд рдирд╣реАрдВ рд╣реИред </p><br><p>  рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рд╣реИрдВ рдЬрдм рдХрдВрдкреНрдпреВрдЯрд░ рдЪрд╛рд▓реВ рд╣реЛрддрд╛ рд╣реИред </p><br><p>  <strong>рд╕реНрдерд┐рддрд┐ 1</strong> ред  рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рдкрд╛рд╕ рдХрдВрдкреНрдпреВрдЯрд░ рддрдХ рднреМрддрд┐рдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рд╣реИ, рдкрд╛рд╕рдлрд╝реНрд░реЗрдЬрд╝ рдХреЛ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди ssh рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рд╣реИред  рд▓рдХреНрд╖реНрдп рдбрд┐рд╕реНрдХ рдХреЛ рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд░рдиреЗ рдХреА рдХреБрдВрдЬреА рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдбрд┐рд╕реНрдХ рдЫрд╡рд┐ рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕реЗрдХреНрдЯрд░-рджрд░-рд╕реЗрдХреНрдЯрд░ рдмреИрдХрдЕрдк рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдПред </p><br><p>  рджрд░рдЕрд╕рд▓, рддрд╢реНрддрд░реА рдХреА рдЪрд╛рдмреА <code>/root/key</code> рдлрд╛рдЗрд▓ рдореЗрдВ рд╣реЛрддреА рд╣реИред  рд╕рд╡рд╛рд▓ рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕ рдирд┐рд░реНрджреЗрд╢ рдХреЗ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХреНрдпрд╛ рд╣реБрдЖ рд╣реИред  рдЙрддреНрддрд░: рд▓реБрдХреНрд╕ 1 рдХреЗ рд▓рд┐рдП, рдЦрддрд░рд╛ рдирдпрд╛ рдирд╣реАрдВ рд╣реИред  рдПрдХ <code>dmsetup table --target crypt --showkeys</code> рд╣реИ <code>dmsetup table --target crypt --showkeys</code> рдЬреЛ рдорд╛рд╕реНрдЯрд░ рдХреБрдВрдЬреА рджрд┐рдЦрд╛рддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддред  рд╡рд╣ рдбреЗрдЯрд╛ рдЬреЛ рдкреБрд░рд╛рдиреЗ рдмреИрдХрдЕрдк рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  Luks2 рдХреЗ рд▓рд┐рдП, рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рдореЗрдВ рдХрдореА рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╣реЛрддреА рд╣реИ: dm-crypt рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рдХрд┐рдЪреЗрди рд╕реНрддрд░ рдкрд░ рдХреАрдЪреЗрди рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдХреНрддрд╛ рд╕реЗ рджреЗрдЦрдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИред </p><br><p>  <strong>рд╕реНрдерд┐рддрд┐ 2</strong> ред  рд╣рдорд▓рд╛рд╡рд░ рдХреАрдмреЛрд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд╕реНрдХреНрд░реАрди рдХреЛ рджреЗрдЦ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдорд╛рдорд▓рд╛ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдирд╣реАрдВ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ IPMI рд╕реЗ рд▓реАрдХ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдпрд╛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдПрдХ noVNC рд╕рддреНрд░ рдХреЛ рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯ рдХрд┐рдпрд╛ред  рд╡рд╣ рдХреБрдВрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИ, рд╡рд╣ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИред  рд▓рдХреНрд╖реНрдп рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рд╣реИред </p><br><p>  рдХреГрдкрдпрд╛: <code>Ctrl-Alt-Del</code> рдорд╛рдзреНрдпрдо рд╕реЗ рд░рд┐рдмреВрдЯ рдХрд░реЗрдВ, GRUB рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд░реНрдиреЗрд▓ рд╡рд┐рдХрд▓реНрдк <code>init=/bin/sh</code> рдЬреЛрдбрд╝рдХрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкрд╛рд╕рдлрд╝реНрд░реЗрдЬрд╝ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рдереА, рдХреНрдпреЛрдВрдХрд┐ рдХреБрдВрдЬреА рдХреЛ рдореЗрдореЛрд░реА рд╕реЗ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкрдврд╝рд╛ рдЧрдпрд╛ рдерд╛ред  рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдЗрд╕рд╕реЗ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ GRUB рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рдореЗрдиреВ рдореЗрдВ рдирд╣реАрдВ рд╣реИред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рддрд░рдгреЛрдВ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рд╕рдВрд╕реНрдХрд░рдг 7.2 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░, CentOS рдореЗрдВ <code>grub2-setpassword</code> , рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ GRUB рдХреЛ рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗ рдмрдЪрд╛рддрд╛ рд╣реИред  рд╕рдорд╛рди рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдЕрдиреНрдп рд╡рд┐рддрд░рдгреЛрдВ рдХреА рдЕрдкрдиреА рдЙрдкрдпреЛрдЧрд┐рддрд╛рдПрдБ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдпрджрд┐ рд╡реЗ рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдЖрдк рд╕реАрдзреЗ <code>/etc/grub.d</code> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ <code>grub.cfg</code> ред </p><br><p>  <code>--unrestricted</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, CLASS рд╡реИрд░рд┐рдПрдмрд▓ рдХреЛ рдмрджрд▓реЗрдВ, - рдпрджрд┐ рдпрд╣ рдирд╣реАрдВ рдерд╛ рддреЛ рдЕрдВрдд рдореЗрдВ <code>--unrestricted</code> рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝реЗрдВ: </p><br><pre> <code class="plaintext hljs">CLASS="--class gnu-linux --class gnu --class os --unrestricted"</code> </pre> <br><p>  <code>/etc/grub.d/40_custom</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХрд░реНрдиреЗрд▓ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рд╡рд╛рд▓реА рд▓рд╛рдЗрдиреЗрдВ рдЬреЛрдбрд╝реЗрдВ: </p><br><pre> <code class="plaintext hljs">set superusers="root" password_pbkdf2 root grub.pbkdf2....... #    grub2-mkpasswd-pbkdf2</code> </pre> <br><p>  рдпрд╛, рдпрджрд┐ рдЗрд╕ рддрд░рд╣ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдЕрдХреНрд╖рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдпрд╣рд╛рдВ рдПрдХ рдкрдВрдХреНрддрд┐ рдЗрд╕ рддрд░рд╣ рд╣реИ: </p><br><pre> <code class="plaintext hljs">set superusers=""</code> </pre> <br><p>  <strong>рд╕реНрдерд┐рддрд┐ 3</strong> ред  рд╣рдорд▓рд╛рд╡рд░ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрдВрдкреНрдпреВрдЯрд░ рддрдХ рдкрд╣реБрдВрдЪ рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдореАрдбрд┐рдпрд╛ рд╕реЗ рдмреВрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣ IPMI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдорд╛рдорд▓рд╛ рдЦреЛрд▓рдиреЗ рдпрд╛ рдкрд╣реБрдБрдЪ рдХреЗ рдмрд┐рдирд╛ рднреМрддрд┐рдХ рдкрд╣реБрдБрдЪ рд╣реЛ рд╕рдХрддреА рд╣реИред  рд▓рдХреНрд╖реНрдп рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рд╣реИред </p><br><p>  рдпрд╣ рдЕрдкрдиреЗ GRUB рдХреЛ USB рдлреНрд▓реИрд╢ рдбреНрд░рд╛рдЗрд╡ рдпрд╛ CD-ROM рд╕реЗ рд▓реЛрдб рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ <code>init=/bin/sh</code> рдХреЛ рдЕрдкрдиреЗ рдХрд░реНрдиреЗрд▓ рдорд╛рдкрджрдВрдбреЛрдВ рдореЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рд╣реИред  рддрджрдиреБрд╕рд╛рд░, рдХрд┐рд╕реА рднреА рднрдпрд╛рдирдХ рдореАрдбрд┐рдпрд╛ рд╕реЗ рдмреВрдЯ рдХреЛ BIOS рдореЗрдВ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд╕рд╛рде BIOS рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рднреА рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦреЗрдВред </p><br><p>  <strong>рд╕реНрдерд┐рддрд┐ рек</strong> ред  рд╣рдорд▓рд╛рд╡рд░ рдореЗрдВ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдорд╛рдорд▓реЗ рдХреЛ рдЦреЛрд▓рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред  рд▓рдХреНрд╖реНрдп рдХреБрдВрдЬреА рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рдпрд╛ рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реИред </p><br><p>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрд╣ рд╡реИрд╕реЗ рднреА рдПрдХ рдЦреЛрдиреЗ рдХреА рд╕реНрдерд┐рддрд┐ рд╣реИред  рдореЗрдореЛрд░реА рдореЙрдбреНрдпреВрд▓ рдкрд░ рдЙрдиреНрд╣реЗрдВ рдардВрдбрд╛ рдХрд░рдиреЗ рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣рдорд▓рд╛</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛрд▓реНрдб рдмреВрдЯ рд╣рдорд▓рд╛</a> ) рд░рджреНрдж рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рд░реВрдк рд╕реЗ (рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХреА рдЧрдИ), рдЖрдк рдЗрд╕ рддрдереНрдп рдХрд╛ рд▓рд╛рдн рдЙрдард╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЖрдзреБрдирд┐рдХ рдПрд╕рдПрдЯреАрдП рдбрд┐рд╕реНрдХ рдЧрд░реНрдо рдкреБрди: рд╕рдВрдпреЛрдЬрди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдЬрдм рдХрдВрдкреНрдпреВрдЯрд░ рдкреБрдирд░рд╛рд░рдВрдн рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдбрд┐рд╕реНрдХ рдХреЛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ, <code>init=/bin/sh</code> рд▓рд┐рдП <code>grub.cfg</code> рдмрджрд▓реЗрдВ, рдлрд┐рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ, рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд░рд┐рдмреВрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВред  рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ (рдпрджрд┐ рдореИрдВ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рд╕рдордЭрддрд╛ рд╣реВрдВ) рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ред </p><br><p>  рдПрдХ рд╣реА рдЪреАрдЬрд╝ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдХреНрд▓рд╛рдЙрдб рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдХреЗ рдПрдХ рдмреЗрдИрдорд╛рди рдХрд░реНрдордЪрд╛рд░реА рджреНрд╡рд╛рд░рд╛ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХрд╛ рд╕реНрдиреИрдкрд╢реЙрдЯ рдмрдирд╛рдХрд░ рдЕрдкрдиреЗ рдирдП рдореЙрдбрд┐рдлрд┐рдХреЗрд╢рди рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><h3 id="prochie-voprosy">  рдЕрдиреНрдп рдорд╛рдорд▓реЗ </h3><br><p>  <strong>рд░рд┐рдмреВрдЯ рдХреЗ рджреМрд░рд╛рди рдХреБрдВрдЬреА рдХреЛ рд╕реНрдореГрддрд┐ рдореЗрдВ рд░рдЦрдирд╛ рдПрдХ рдордЬрд╛рдХ рд╣реИред</strong>  <strong>рдЗрд╕рдХреЗ рд╢реБрджреНрдзрддрдо рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ-рдмрд╛рдж-рдореБрдХреНрддред</strong>  <strong>рдПрдХ рдХреНрд▓реАрдирд░ рд╕рдорд╛рдзрд╛рди kexec рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдФрд░ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди initramfs рдХреА рдХреБрдВрдЬреА рдЬреЛрдбрд╝рдирд╛ рд╣реИред</strong>  <strong>рдпрд╣ рдХрд░реНрдиреЗрд▓ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╕реЗ рднреА рдмрдЪрд╛рддрд╛ рд╣реИ</strong> ред  рд╣рд╛рдБ, рдпрд╣ рд╣реИ, рдЕрдЧрд░ kexec рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИред  рдЖрдзреБрдирд┐рдХ рд╡рд┐рддрд░рдгреЛрдВ рдиреЗ kexec рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрд╣реБрдд рдЬрдЯрд┐рд▓</a> рдмрдирд╛ рджрд┐рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </p><br><p>  <strong>рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░реЛрдВ рдореЗрдВ, рдФрд░ рдЗрд╕рд╕реЗ рднреА рдЕрдзрд┐рдХ рдмрд╛рджрд▓ рдореЗрдВ, рдмрд┐рдЬрд▓реА рдХрднреА рдЧрд╛рдпрдм рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред</strong>  <strong>рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдХреБрдВрдЬреА рд╡рд╛рдХреНрдпрд╛рдВрд╢ рдХреА рдЕрдм рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ?</strong>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, <em>рдпрджрд┐</em> рдЖрдк рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдирд┐рд╢реНрдЪрд┐рдд рд╣реИрдВ, <em>рддреЛ</em> рдЖрдк рдЗрд╕реЗ рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рд╕рд░реНрд╡рд░ рдмрди рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕ рдбрд┐рд╕реНрдХ рдХреА рдХреБрдВрдЬреА рдХрд┐рд╕реА рдХреЛ рдирд╣реАрдВ рдкрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рд▓рд┐рдП рд╡рд╣ рдмрд╛рд╣рд░ рдирд╣реАрдВ рджреЗрдЧрд╛, рд▓реЗрдХрд┐рди рдЙрд╕ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЬрд┐рд╕реЗ рдирд┐рдпрдорд┐рдд рд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред    тАФ        <code>sudo poweroff</code> . </p><br><p> ┬╣    <code>/root/key</code> тАФ         ,        cron. </p><br><p> <strong>   ?  IPMI,       </strong> .    IPMI      Java.        . </p><br><p> <strong>   ?     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="> SSH</a></strong> . !    .  ,      <code>sudo reboot</code> ,      ? </p><br><p>             ,         .     SSH       ,      .       ,      ,   . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi457396/">https://habr.com/ru/post/hi457396/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi457380/index.html">Ultramodern OpenGLред рднрд╛рдЧ реи</a></li>
<li><a href="../hi457382/index.html">рдЙрдЪреНрдЪ рдкреНрд░рджрд░реНрд╢рди рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреА 7 рдЖрджрддреЗрдВ</a></li>
<li><a href="../hi457386/index.html">рд▓рд┐рдирдХреНрд╕ рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдкрд░рд┐рдЪрдп: рд╕реБрд░рдВрдЧ</a></li>
<li><a href="../hi457390/index.html">рдореЗрдбрд╛рдЧрд╛рд╕реНрдХрд░ - рд╡рд┐рд░реЛрдзрд╛рднрд╛рд╕реЛрдВ рдХрд╛ рджреНрд╡реАрдк</a></li>
<li><a href="../hi457392/index.html">рдореЛрдмрд╛рдЗрд▓ рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рд╡рд┐рдХрд╛рд╕ рдкрд░ рдмрдЪрдд: рд╕реНрдХрд╛рдИреЗрдВрдЧ рдХреЗрд╕ рд╕реНрдЯрдбреА</a></li>
<li><a href="../hi457398/index.html">рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдореИрдВ рдмрдХрд╡рд╛рд╕ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ? рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЧреЗрдореНрдмрд╛ рдХреНрдпреЛрдВ рдЬрд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi457400/index.html">рдЪреЗрд░рдиреЛрдмрд┐рд▓ рдЬреИрд╕реА рдкрд░рдорд╛рдгреБ рдЖрдкрджрд╛рдУрдВ рдореЗрдВ рдкреАрдбрд╝рд┐рддреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдирд╛рдЯрдХ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рдВрдЬрд┐рдд рд╣реИ</a></li>
<li><a href="../hi457402/index.html">2Q19 рдореЗрдВ рд╡рд░реНрдбрдкреНрд░реЗрд╕ рдкрд░ рдмреНрд▓реЙрдЧ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдФрд░ рд╕рдорд░реНрдерди рдХреЛ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рдареАрдХ рди рдХрд░реЗрдВ</a></li>
<li><a href="../hi457404/index.html">OpenStreetMap рд╕рдВред 465 (06/11/2019 - 06/17/2019) рдХреА рджреБрдирд┐рдпрд╛ рд╕реЗ рд╕рдорд╛рдЪрд╛рд░</a></li>
<li><a href="../hi457406/index.html">рд╡рд┐рднрд┐рдиреНрди рд░реВрд╕реА рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдпреЛрдВ рдХреЗ рд╕реНрдирд╛рддрдХ рдХрд┐рддрдирд╛ рдХрдорд╛рддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>