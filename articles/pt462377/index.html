<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÉ üè¨ ü§¥üèæ Como as masmorras s√£o geradas em Enter The Gungeon üñêÔ∏è üßû üì©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, joguei muito em Enter The Gungeon . Este √© um jogo incr√≠vel e desafiador de balas, que me lembra muito Binding of Isaac . Mas quanto mai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como as masmorras s√£o geradas em Enter The Gungeon</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462377/">  Recentemente, joguei muito em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Enter The Gungeon</a> .  Este √© um jogo incr√≠vel e desafiador de balas, que me lembra muito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Binding of Isaac</a> .  Mas quanto mais eu tocava, mais eu percebia o g√™nio sutil do design da masmorra. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d0/d78/179/6d0d781792726ea4aa6b2bb499bc5b01.jpg"></div><br>  Existem muitos geradores de procedimentos que criam esquemas de n√≠veis l√≥gicos que garantem o ritmo correto do jogo e recompensam os jogadores, e existem outros geradores que criam n√≠veis com loops e esquemas compactos.  Mas √© raro encontrar os dois tipos em um jogo.  O √∫nico jogo que conhe√ßo em que houve uma tentativa de implementar uma coisa dessas √© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">inexplorado</a> . <br><br>  Ent√£o, naturalmente, lancei o descompilador para que o <em>Gungeon me</em> revelasse todos os seus segredos.  Neste artigo, compartilharei com voc√™ o que consegui encontrar. <br><a name="habracut"></a><br><hr><br>  √Ä primeira vista, os n√≠veis de <em>Gungeon</em> parecem bastante simples.  Aqui est√° um exemplo t√≠pico de mapa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/159/520/7a5/1595207a5c1a10a0ddbc1f5ff12d6bae.png"></div><br>  <i>Cart√£o T√≠pico de N√≠vel 1</i> <br><br>  O jogador come√ßa na entrada. <img src="https://habrastorage.org/getpro/habr/post_images/bd6/369/4b5/bd63694b581ec8cc248912d691d92a6a.png">  atravessa os ba√∫s <img src="https://habrastorage.org/getpro/habr/post_images/3e0/707/eeb/3e0707eeb4c181335ed5004c68ff2cb0.png"><img src="https://habrastorage.org/getpro/habr/post_images/ef2/a72/506/ef2a725063f1d74b143f73f70ea5818c.png">  e lojista <img src="https://habrastorage.org/getpro/habr/post_images/049/972/3fa/0499723fa301f287b6f694bce8adf961.png">  para coletar itens e, finalmente, derrota o chefe <img src="https://habrastorage.org/getpro/habr/post_images/013/e7d/45a/013e7d45a58d641f50305d936877a502.png">  .  Se voc√™ trope√ßar em um longo beco sem sa√≠da, poder√° usar o teleporte para retornar rapidamente √†s salas.  Obviamente, salas separadas foram criadas √† m√£o e habitadas por v√°rios inimigos que precisam ser atingidos.  Ao avan√ßar para os pr√≥ximos n√≠veis do jogo, o jogador v√™ o mesmo padr√£o repetidamente, apenas os est√°gios se tornam maiores. <br><br>  At√© agora, parece que isso n√£o √© nada interessante.  Na Internet, voc√™ pode encontrar muitos geradores conectando corredores a salas aleat√≥rias. <br><br>  O recurso gerador se torna vis√≠vel quando voc√™ come√ßa a tocar.  Os n√≠veis parecem ... um pouco mais planejados do que se poderia esperar do acaso.  A sala do chefe est√° sempre a uma dist√¢ncia razo√°vel desde o in√≠cio.  Salas com inimigos sempre s√£o razoavelmente intercaladas com salas calmas, bancos e cruzamentos.  E o mais importante - muitos ba√∫s est√£o localizados atr√°s das dobradi√ßas com cruz unidirecional. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21e/239/247/21e2392476dc8aea44f7b5efbe414bc9.png"></div><br>  A linha vermelha √© um corredor de m√£o √∫nica.  Se voc√™ quiser entrar em uma sala com um ba√∫, precisar√° percorrer um longo caminho.  A grande maioria dos ba√∫s est√° localizada no final de um loop unidirecional, ou profunda o suficiente dentro do n√≠vel, o que for√ßa o jogador a lutar por muitas salas, apenas para alcan√ßar o ba√∫.  N√£o h√° recompensa sem risco. <br><br>  O segredo desta passagem √© que os esquemas gerais s√£o criados manualmente.  Aqui est√° o diagrama usado para gerar o n√≠vel mostrado acima. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b0/297/f46/9b0297f4693df241ae5d3b16961a8eb9.svg"></div><br>  As salas normais s√£o salas selecionadas aleatoriamente com inimigos, salas de interse√ß√£o ou salas grandes com v√°rias sa√≠das.  As recompensas (recompensa) e o chefe (chefe) n√£o precisam ser explicados.  N√£o mostra salas "conectadas", isto √©, salas sem inimigos, geralmente com riscos naturais.  As salas restantes s√£o predefinidas ou selecionadas em uma tabela de sala especial. <br><br>  Em <em>Gungeon,</em> existem muitos desses esquemas chamados "fluxos" (fluxo).  Nos n√≠veis Hollow, eles s√£o os menos (4), e no Gungeon Proper, os mais (8).  Estes n√£o s√£o esquemas simples, seu design √© criado com base em um determinado recurso que pode ser percebido com v√°rias passagens.  Pode ser um loop gigante, ou um garfo importante de v√°rias maneiras, ou a necessidade de chegar ao banco para passar de n√≠vel.  Eles s√£o t√£o percept√≠veis que os corredores de velocidade notaram diferen√ßas e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criaram hor√°rios</a> pelos quais voc√™ pode encontrar o chefe o mais r√°pido poss√≠vel.  Eu preparei uma lista completa de esquemas que podem ser baixados <a href="">aqui</a> . <br><br>  Voc√™ deve ter notado que o padr√£o de fluxo e o mapa n√£o correspondem completamente.  Sob o banco, h√° um espa√ßo extra.  inconsistente com o esquema, e salas estranhas no corredor <img src="https://habrastorage.org/getpro/habr/post_images/c34/f40/36e/c34f4036eab070741e9091b9b1fec63f.png">  .  Vamos estudar todo o processo, ele cont√©m muitas id√©ias inteligentes. <br><br>  O processo inicia selecionando aleatoriamente um arquivo de fluxo como o mostrado acima.  Essa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√© a estrutura de dados do ‚Äúgr√°fico‚Äù</a> , ou seja, armazena as interconex√µes das salas, mas n√£o sua localiza√ß√£o.  Cada sala cont√©m metadados sobre o tipo de sala e as conex√µes que ela deve ter.  As conex√µes t√™m uma dire√ß√£o - cada diagrama de fluxo come√ßa no n√≥ raiz e forma uma √°rvore de n√≥s filhos.  Em seguida, conex√µes adicionais quebram a estrutura da √°rvore para criar loops.  Eu acho que isso se deve principalmente √†s caracter√≠sticas do desenvolvimento do jogo, mas simplifica o procedimento de an√°lise do mapa, porque todos os loops definiram claramente o come√ßo e o fim. <br><br><h4>  Convers√£o de stream </h4><br>  Um arquivo de fluxo pode ser convertido de v√°rias formas.  Primeiro, algumas salas espec√≠ficas ser√£o substitu√≠das por s√©ries de salas de comprimentos aleat√≥rios.  Esta fun√ß√£o √© usada apenas em n√≠veis posteriores e maiores.  Al√©m disso, algumas partes do arquivo de fluxo t√™m caminhos alternativos e um deles √© selecionado aleatoriamente.  Esta fun√ß√£o √© usada apenas duas vezes. <br><br>  Em seguida, alguns n√≥s adicionais s√£o "injetados".  Essa fun√ß√£o √© bastante flex√≠vel e √© usada para diversos fins. <br><br>  Cada ‚Äúinje√ß√£o‚Äù cont√©m dados que determinam que tipo de objeto deve ser inserido, onde deve ser inserido, a probabilidade de cria√ß√£o e quaisquer condi√ß√µes que devem ser atendidas (por exemplo, a presen√ßa de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rodada principal</a> , uma grande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maldi√ß√£o</a> ou que o jogador ainda n√£o salvou o personagem). )  Por exemplo, salas secretas geralmente s√£o criadas em becos sem sa√≠da, mas t√™m uma probabilidade de 1/5 de serem anexadas a qualquer sala.  Eles t√™m 90% de chance de ocorr√™ncia e n√£o requerem condi√ß√µes adicionais. <br><br>  Quase todas as salas especiais do jogo s√£o determinadas pela inje√ß√£o do local, incluindo comerciantes (n√£o incluindo a loja principal), pris√µes, salas com lareiras e elevadores. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/63c/4fd/188/63c4fd188ec12a7d5061c94be8866802.png"></div><br>  <i>Uma das celas da pris√£o que pode ser injetada em um n√≠vel</i> <br><br>  No mesmo est√°gio, o gerador seleciona uma sala espec√≠fica para cada n√≥.  Isso depende principalmente do est√°gio atual e do tipo de quarto necess√°rio.  H√° uma lista enorme de salas - quase 300 na primeira etapa -, mas o gerador tenta n√£o selecionar a mesma sala duas vezes. <br><br>  Os n√≥s do conector funcionam de maneira diferente.  Seus quartos s√£o selecionados mais tarde, enquanto o esquema √© criado.  Geralmente, esses quartos s√£o longos e estreitos, por isso √© muito importante escolher um quarto com a orienta√ß√£o correta. <br><br><h4>  Objetos compostos </h4><br>  Ap√≥s a cria√ß√£o do fluxo, ele √© dividido em "objetos compostos".  Cada objeto composto √© um loop separado das salas ou um conjunto de salas conectadas sem loops (ou seja, uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√°rvore</a> ).  Isso √© feito encontrando o menor loop no mapa e cortando-o como um objeto composto.  A opera√ß√£o √© repetida at√© que n√£o haja loops no mapa.  O restante do mapa se torna um conjunto de √°rvores divididas e conex√µes entre objetos compostos individuais. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ce/7e1/8d5/1ce7e18d589db917b1a3de7f290d20dd.svg"></div><br>  <i>O mesmo fluxo ap√≥s inje√ß√£o e divis√£o</i> <br><br><h4>  Esquema de Objeto Composto </h4><br>  Cada objeto composto √© criado separadamente, em um mapa separado.  Eles ser√£o reunidos mais tarde. <br><br>  Para planejar um objeto composto, a primeira sala √© colocada em um local arbitr√°rio.  Em seguida, as salas s√£o adicionadas ao circuito, uma a uma, selecionando um par de sa√≠das, uma delas relacionada √† nova sala e a outra ao circuito existente.  As sa√≠das s√£o locais predefinidos nos metadados de cada sala.  Em seguida, a nova sala √© colocada para que sua sa√≠da seja conectada diretamente √† sa√≠da da sala anterior.  Ent√£o o processo se repete. <br><br>  Mais especificamente, os objetos da √°rvore composta s√£o colocados atravessando a √°rvore <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em profundidade</a> .  O algoritmo seleciona apenas os pares de sa√≠das que levam ao aparecimento de uma nova sala sem se cruzar com as anteriores.  Em geral, o algoritmo prefere escolher sa√≠das que est√£o longe das existentes.  Se for imposs√≠vel colocar uma sala, ela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">voltar√°</a> e regenerar√° a escolha das salas, repetindo esse processo at√© tr√™s vezes. <br><br>  Enquanto isso, objetos de loop composto s√£o colocados adicionando elementos do loop, por sua vez, nos dois lados da linha.  Para come√ßar, os pares de sa√≠das s√£o selecionados aleatoriamente (√© dada prefer√™ncia a paredes opostas, leste-oeste ou norte-sul).  Quando o loop √© criado pela metade, ele come√ßa a dar prefer√™ncia aos pares de sa√≠das que re√∫nem duas arestas abertas do loop.  Ap√≥s criar todas as salas, o algoritmo precisa adicionar outra conex√£o entre as duas √∫ltimas salas.  Ele escolhe outro par de sa√≠das.  Se poss√≠vel, ele projeta entre essas sa√≠das uma pequena sala retangular.  Caso contr√°rio, ele procura um caminho entre as sa√≠das e cria uma ‚Äúsala‚Äù, que √© simplesmente um corredor estreito.  O comprimento do corredor deve ser de 4 a 30 unidades (em minas at√© 50). <br><br><h4>  Montagem final </h4><br>  Nesse est√°gio, pequenas partes separadas da masmorra s√£o conectadas umas √†s outras, mas os pr√≥prios objetos compostos devem ser conectados para criar um mapa completo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/600/c1b/d34/600c1bd345e65085a31b08bc3a08674b.png"></div><br>  <i>O mesmo mapa dos objetos compostos antes da montagem final</i> <br><br>  Como voc√™ pode ver, os compostos restantes neste caso n√£o oferecem uma sele√ß√£o muito grande.  Mas pode haver casos mais complexos do que antes.  O algoritmo ignora o mapa, come√ßando da sala com mais conex√µes.  Como antes, um par de sa√≠das √© selecionado para cada conex√£o criada.  Se duas salas estiverem em partes separadas do mapa, essas duas partes do mapa ser√£o alinhadas para criar um caminho curto.  Caso contr√°rio, uma pesquisa de rota √© usada para criar a rota. <br><br>  E √© a√≠ que a cria√ß√£o do diagrama de n√≠veis termina.  Resta apenas escolher inimigos e decora√ß√µes para os quartos, e esse √© um t√≥pico completamente diferente. <br><br><h2>  Em conclus√£o </h2><br>  Parece que o principal objetivo dos desenvolvedores era criar um gerador de procedimentos que proporcionasse uma jogabilidade satisfat√≥ria.  Obviamente, para ser implementado corretamente, eles tiveram que realizar muitas itera√ß√µes - encontrei uma grande quantidade de c√≥digo de gera√ß√£o, que, ao que parece, n√£o √© usado, porque os desenvolvedores mudaram sua f√≥rmula processual em busca da perfei√ß√£o. <br><br>  Um truque curioso √© que eles geram as partes mais complexas / importantes do mapa primeiro.  O gerador se concentra na cria√ß√£o de loops estreitos e corredores curtos nas partes centrais do n√≠vel e, em seguida, tenta conectar tudo o mais com eles. <br><br>  Como no caso do meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estudo sobre a gera√ß√£o dos n√≠veis de Diablo 1</a> , fiquei impressionado com a efici√™ncia de gerar parte da masmorra de forma abstrata - nesse caso, √© um gr√°fico sem informa√ß√µes sobre a localiza√ß√£o.  Tudo se torna mais espec√≠fico somente mais tarde.  A fun√ß√£o "inje√ß√£o" seria simplesmente imposs√≠vel se imediatamente trabalhassemos com um mapa de blocos.  Gra√ßas √† abstra√ß√£o dos detalhes da localiza√ß√£o das salas, permite controlar o estilo do jogo e a escala de n√≠veis. <br><br>  Al√©m disso, fiquei impressionado com a extensibilidade de todo o sistema.  A unidade incentiva uma abordagem ativa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">orientada por dados</a> .  Adicionar uma nova sala, esquema ou at√© mesmo um comportamento especial pode ser realizado simplesmente adicionando novos objetos √†s tabelas correspondentes.  Isso deve ter sido uma grande ajuda, porque o Dodge Roll j√° lan√ßou alguns DLCs gratuitos e, sem d√∫vida, suporta a cria√ß√£o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mods</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd8/876/fb0/cd8876fb047b128c2d2c358820c8bac2.png"></div><br><br><h2>  B√≥nus </h2><br>  Estudar esse gerador foi minha primeira chance de pesquisar criando um jogo profissional no Unity.  Os desenvolvedores do Dodge Roll deram o melhor de si e escreveram um bom c√≥digo.  √â bem lido e, em alguns lugares, bastante engra√ßado - parece que o amor deles aos trocadilhos se espalhou pelo c√≥digo.  Eu gostei desses: <br><br><ul><li> O mecanismo fluido do jogo √© chamado <code>DeadlyDeadlyGoopManager</code> </li><li>  O c√≥digo de gera√ß√£o de masmorra √© chamado de <code>Dungeonator</code> </li><li>  As v√°rias etapas s√£o chamadas de <code>CASTLEGEON/GUNGEON/MINEGEON/CATACOMBGEON</code> etc.  Gostaria de saber se os desenvolvedores foram inspirados no Diablo 1, que usa um esquema muito semelhante? </li><li>  Literalmente, cada quarto tem seu pr√≥prio nome, geralmente na forma de um trocadilho (ou em homenagem a algum Joe; provavelmente este √© um artista com grande vaidade). </li></ul><br>  Percebi tamb√©m que, inicialmente, o est√∫dio planejava palcos nos temas do espa√ßo, da selva e do oeste selvagem.  Infelizmente, eles n√£o estavam destinados a aparecer.  Dodge Roll decidiu que seu trabalho em <em>Gungeon estava</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conclu√≠do</a> .  Vou esperar o pr√≥ximo jogo e espero que eles coloquem tanto amor e aten√ß√£o nele. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462377/">https://habr.com/ru/post/pt462377/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462357/index.html">Primeiro prot√≥tipo: Unikernels como um est√°gio na evolu√ß√£o do Linux</a></li>
<li><a href="../pt462359/index.html">Dat - que protocolo √© e quem o utiliza</a></li>
<li><a href="../pt462365/index.html">Limita√ß√µes do Machine Learning</a></li>
<li><a href="../pt462367/index.html">13 fatos sobre capitalismo de risco para fundadores</a></li>
<li><a href="../pt462371/index.html">Iniciar Spring StateMachine</a></li>
<li><a href="../pt462379/index.html">Criptografia de arquivo de configura√ß√£o</a></li>
<li><a href="../pt462381/index.html">Redes neurais e aprendizado profundo, cap√≠tulo 5: por que as redes neurais profundas s√£o t√£o dif√≠ceis de treinar?</a></li>
<li><a href="../pt462383/index.html">De um armaz√©m no Daguest√£o - a programadores: como me tornei um desenvolvedor iOS do zero</a></li>
<li><a href="../pt462385/index.html">Uma nova abordagem pode nos ajudar a nos livrar dos c√°lculos de ponto flutuante</a></li>
<li><a href="../pt462387/index.html">O que √© programa√ß√£o musical - quem faz e por que, organizando sess√µes reais ao vivo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>