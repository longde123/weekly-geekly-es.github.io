<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐พโโ๏ธ ๐ค ๐ง๐ป ุฃุฏุงุก ุงูุฎุฑุงุจ ๐ด๐ป ๐๐ผ ๐ง๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐู ุงูููุงุญุธุฉ ูู ูุณุฎุฉ ููุชูุจุฉ ูู ุชูุฑูุฑู "ููููุฉ ุฅุชูุงู ุงูุฃุฏุงุก ุจุงุณุชุฎุฏุงู ููุฏ ุบูุฑ ูุนุงู" ูู ูุคุชูุฑ JPoint 2018. ููููู ูุดุงูุฏุฉ ููุงุทุน ุงูููุฏูู ูุงูุดุฑุงุฆุญ ุนูู ุตูุญุฉ ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฃุฏุงุก ุงูุฎุฑุงุจ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423305/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฐู ุงูููุงุญุธุฉ ูู ูุณุฎุฉ ููุชูุจุฉ ูู ุชูุฑูุฑู "ููููุฉ ุฅุชูุงู ุงูุฃุฏุงุก ุจุงุณุชุฎุฏุงู ููุฏ ุบูุฑ ูุนุงู" ูู ูุคุชูุฑ JPoint 2018. ููููู ูุดุงูุฏุฉ ููุงุทุน ุงูููุฏูู ูุงูุดุฑุงุฆุญ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุตูุญุฉ ุงููุคุชูุฑ</a> .  ูู ุงูุฌุฏูู ุ ุชู ูุถุน ุนูุงูุฉ ุนูู ุงูุชูุฑูุฑ ุจููุจ ูุฌููู ูู ุงูุนุตุงุฆุฑ ุ ูุฐูู ูู ูููู ููุงู ุฃู ุดูุก ูุนูุฏ ููุบุงูุฉ ุ ูุฐุง ุฃูุซุฑ ุงุญุชูุงููุง ูููุจุชุฏุฆูู. </p><br><p style=";text-align:right;direction:rtl">  ููุถูุน ุงูุชูุฑูุฑ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููุฉ ุฅููุงุก ูุธุฑุฉ ุนูู ุงูุฑูุฒ ููุนุซูุฑ ุนูู ุงูุงุฎุชูุงูุงุช ููู </li><li style=";text-align:right;direction:rtl">  ูุถุงุฏุงุช ุงูุงูุชุฆุงุจ ุงูุดุงุฆุนุฉ </li><li style=";text-align:right;direction:rtl">  ุฃุดุนู ุงููุงุฑ ุบูุฑ ูุงุถุญุฉ </li><li style=";text-align:right;direction:rtl">  ุฃุดุนู ุงููุงุฑ ุชุฌุงูุฒ </li></ul><br><p style=";text-align:right;direction:rtl">  ุนูู ุงููุงูุด ุ ุฃุดุงุฑูุง ุฅูู ุจุนุถ ุนุฏู ุงูุฏูุฉ / ุงูุณูู ูู ุงูุชูุฑูุฑ ุ ููุฏ ููุญุธูุง ููุง.  ุงูุชุนูููุงุช ูู ุฃูุถุง ููุถุน ุชุฑุญูุจ. </p><a name="habracut"></a><br><h2 id="vliyanie-poryadka-ispolneniya-na-proizvoditelnost" style=";text-align:right;direction:rtl">  ุชุฃุซูุฑ ุงูุฃุฏุงุก ุนูู ุงูุฃุฏุงุก </h2><br><p style=";text-align:right;direction:rtl">  ููุงู ูุฆุฉ ูุณุชุฎุฏู: </p><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ String name; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> age; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ุจุญุงุฌุฉ ุฅูู ููุงุฑูุฉ ุงููุงุฆูุงุช ูุน ุจุนุถูุง ุงูุจุนุถ ุ ูุฐูู ูุนูู ุนู ุทุฑู <code>equals</code> ู <code>hashCode</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.EqualsAndHashCode; <span class="hljs-meta"><span class="hljs-meta">@EqualsAndHashCode</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ String name; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> age; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุฏ ูุงุจู ููุชุทุจูู ุ ูุงูุณุคุงู ูุฎุชูู: ูู ุณูููู ุฃุฏุงุก ูุฐุง ุงูููุฏ ูู ุงูุฃูุถูุ  ููุฅุฌุงุจุฉ ุนููู ุ ุฏุนูุง ูุชุฐูุฑ ููุฒุงุช ุฃุณููุจ <code>Object::equals</code> : ููู ุชูุฑุฌุน ูุชูุฌุฉ ุฅูุฌุงุจูุฉ ููุท ุนูุฏูุง ุชููู ุฌููุน ุงูุญููู ุงูุชู ุชุชู ููุงุฑูุชูุง ูุชุณุงููุฉ ุ ูุฅูุง ุณุชููู ุงููุชูุฌุฉ ุณูุจูุฉ.  ูุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ููุงู ูุฑู ูุงุญุฏ ูููู ุจุงููุนู ููุญุตูู ุนูู ูุชูุฌุฉ ุณูุจูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ <code>@EqualsAndHashCode</code> ุนูู ุงูุฑูุฒ ุงูุฐู ุชู ุฅูุดุงุคู ูู <code>@EqualsAndHashCode</code> ุณูุฑู ุดูุฆูุง ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object that)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... if (name == null &amp;&amp; that.name != null) { return false; } if (name != null &amp;&amp; !name.equals(that.name)) { return false; } return age == that.age; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุงูู ุชุฑุชูุจ ุงูุชุญูู ูู ุงูุญููู ูุน ุชุฑุชูุจ ุฅุนูุงููุง ุ ููู ูู ุญุงูุชูุง ููุณ ุงูุญู ุงูุฃูุถู ุ ูุฃู ููุงุฑูุฉ ุงูุฃุดูุงุก ุจุงุณุชุฎุฏุงู <code>equals</code> "ุฃุตุนุจ" ูู ููุงุฑูุฉ ุงูุฃููุงุน ุงูุจุณูุทุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ ุฏุนูุง ูุญุงูู ุฅูุดุงุก ุทุฑู <code>equals/hashCode</code> ุจุงุณุชุฎุฏุงู ุงูููุฑุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == o) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || getClass() != o.getClass()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } User that = (User) o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> age == that.age &amp;&amp; Objects.equals(name, that.name); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชูุดุฆ ุงูููุฑุฉ ุฑูุฒูุง ุฃูุซุฑ ุฐูุงุกู ูุนุฑู ูุฏู ุชุนููุฏ ููุงุฑูุฉ ุงูุฃููุงุน ุงููุฎุชููุฉ ูู ุงูุจูุงูุงุช.  ุญุณููุง ุ <code>@EqualsAndHashCode</code> ุตุฑุงุญุฉ <code>equals/hashCode</code> .  ุงูุขู ุฏุนููุง ูุฑู ูุง ูุญุฏุซ ุนูุฏูุง ููุชุฏ ุงููุตู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ List&lt;T&gt; props; String name; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> age; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุฅูุดุงุก <code>equals/hashCode</code> </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == o) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || getClass() != o.getClass()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } User that = (User) o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> age == that.age &amp;&amp; Objects.equals(props, that.props) <span class="hljs-comment"><span class="hljs-comment">// &lt;---- &amp;&amp; Objects.equals(name, that.name); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุชู ููุงุฑูุฉ ุงูููุงุฆู ูุจู ููุงุฑูุฉ ุงูุณูุงุณู ุ ููู ุฃูุฑ ูุง ูุนูู ูู ุนูุฏูุง ุชููู ุงูุณูุงุณู ูุฎุชููุฉ.  ูููููุฉ ุงูุฃููู ุ ูุง ููุฌุฏ ูุฑู ูุจูุฑ ุ ูุฃู ุงูุณูุงุณู ุฐุงุช ุงูุทูู ุงููุชุณุงูู ุชุชู ููุงุฑูุชูุง ุจุงูุนูุงูุงุช (ุฃู ุฃู ููุช ุงูููุงุฑูุฉ ูููู ุฌูุจูุง ุฅูู ุฌูุจ ูุน ุทูู ุงูุณูุณูุฉ): </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงู ููุงู ุนุฏู ุฏูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุฅู <a href="">ุฃุณููุจ</a> <code>java.lang.String::equals</code> <a href="">ุชุฏุฎูู</a> ุ ูุฐุง ูุง ุชูุฌุฏ ููุงุฑูุฉ ุชุณุฌูู ุฏุฎูู ุนูุฏ ุงูุชูููุฐ. </p></div></div><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//java.lang.String public boolean equals(Object anObject) { if (this == anObject) { return true; } if (anObject instanceof String) { String anotherString = (String) anObject; int n = value.length; if (n == anotherString.value.length) { char v1[] = value; char v2[] = anotherString.value; int i = 0; while (n-- != 0) { // &lt;---- if (v1[i] != v2[i]) return false; i++; } return true; } } return false; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ููุฑ ูู ููุงุฑูุฉ <code>ArrayList</code> (ูุชุทุจูู ุงููุงุฆูุฉ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงููุง).  ุนูุฏ ูุญุต <code>ArrayList</code> ุ ููุงุฌุฃ ุนูุฏูุง ูุฌุฏ ุฃูู ููุณ ูุฏูู ุชุทุจูู ุฎุงุต ุจู <code>equals</code> ุ ููููู ูุณุชุฎุฏู ุชุทุจูููุง ููุฑูุซูุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/d4/hn/yg/d4hnyguezlpyxz3pgunk22ha1cm.png"></p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//AbstractList::equals public boolean equals(Object o) { if (o == this) { return true; } if (!(o instanceof List)) { return false; } ListIterator&lt;E&gt; e1 = listIterator(); ListIterator&lt;?&gt; e2 = ((List&lt;?&gt;) o).listIterator(); while (e1.hasNext() &amp;&amp; e2.hasNext()) { // &lt;---- E o1 = e1.next(); Object o2 = e2.next(); if (!(o1 == null ? o2 == null : o1.equals(o2))) { return false; } } return !(e1.hasNext() || e2.hasNext()); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููู ููุง ูู ุฅูุดุงุก ุงุซููู ูู ุงูุชูุฑุงุฑุงุช ูุงููุฑูุฑ ุงูุซูุงุฆู ุจููููุง.  ุงูุชุฑุถ ุฃู ููุงู <code>ArrayList</code> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุฑูู ูุงุญุฏ ูู 1 ุฅูู 99 </li><li style=";text-align:right;direction:rtl">  ูู ุงูุฑูู ุงูุซุงูู ูู 1 ุฅูู 100 </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ุณูููู ูู ุงููุงูู ููุงุฑูุฉ ุฃุญุฌุงู ุงููุงุฆูุชูู ุ ูุฅุฐุง ูู ูุชุทุงุจููุง ุ ููู ุจุฅุฑุฌุงุน ูุชูุฌุฉ ุณูุจูุฉ ุนูู ุงูููุฑ (ููุง ุชูุนู <code>AbstractSet</code> ) ุ ูู ุงููุงูุน ุ ุณูุชู ุฅุฌุฑุงุก 99 ููุงุฑูุฉ ุ ููู ุงููุงุฆุฉ ููุท ุณูู ูุชุถุญ ุฃู ุงูููุงุฆู ูุฎุชููุฉ. </p><br><h4 id="chyo-tam-u-kotlinovcev" style=";text-align:right;direction:rtl">  ูุงุฐุง ููุฌุฏ ูุน Kotlinitesุ </h4><br><pre style=";text-align:right;direction:rtl"> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> age: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ูู ุดูุก ูุดุจู ูููุจูู - ุชุฑุชูุจ ุงูููุงุฑูุฉ ูุชูุงูู ูุน ุชุฑุชูุจ ุงูุฅุนูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == o) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User) { User u = (User) o; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Intrinsics.areEqual(name, u.name) &amp;&amp; age == u.age) { <span class="hljs-comment"><span class="hljs-comment">// &lt;---- return true; } } return false; }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููู ุชุญุณู ุงููุถุนุ</b>  <b class="spoiler_title">- ุดููู!</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  IDEA-170178 ูุฌุจ ุฅุฌุฑุงุก ููุงุฑูุฉ ุจูู ุงููุฌููุนุงุช ูู ููุงูุฉ ูุชุณุงููุฉ ูููุฏูุง IDEA () <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-170178</a> </p><br><p style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูููุงุฑูุฉ ููEqualsAndHashCode ูุฃุฏุงุก ุฃูุถู # 1543 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/rzwitserloot/lombok/issues/1543</a> </p><br><p style=";text-align:right;direction:rtl">  KT-23184 ูุณุงูู () ูููุฏ ุชููุงุฆูุง ูุฆุฉ ุงูุจูุงูุงุช ููุณ ุงูุฃูุซู <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/KT-23184</a> </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุญู ูุคูุช ุ ููููู ุชูุธูู ุงูุฅุนูุงูุงุช ุงูููุฏุงููุฉ ูุฏูููุง. </p><br><h4 id="uslozhnim-zadachu" style=";text-align:right;direction:rtl">  ุฏุนููุง ูุนูุฏ ุงููููุฉ </h4><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Dto dto)</span></span></span><span class="hljs-function"> </span></span>{ SomeEntity entity = jpaRepository.findOne(dto.getId()); <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> valid = dto.isValid(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (valid &amp;&amp; entity.hasGoodRating()) { <span class="hljs-comment"><span class="hljs-comment">// &lt;---- //do smth } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชุถูู ุงูุฑูุฒ ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุญุชู ุนูุฏูุง ุชููู ูุชูุฌุฉ ุงูุชุญูู ูู ุงูุดุฑูุท ุงูุชู ูุดูุฑ ุฅูููุง ุงูุณูู ูุชููุนุฉ ูุณุจููุง.  ุฅุฐุง ูุงูุช ูููุฉ ุงููุชุบูุฑ <code>valid</code> ุฎุงุทุฆุฉ ุ ููู ูุชู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ูุชูุฉ <code>if</code> ูุทูููุง ุ ููุง ูุนูู ุฃูู ููููู ุงูุงุณุชุบูุงุก ุนู ุงูุทูุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Dto dto)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> valid = dto.isValid(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (valid &amp;&amp; hasGoodRating(dto)) { <span class="hljs-comment"><span class="hljs-comment">//do smth } } //       ,    boolean hasGoodRating(Dto dto) { SomeEntity entity = jpaRepository.findOne(dto.getId()); return entity.hasGoodRating(); }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุญุธุฉ ูู ุงููุงูุด</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูููู ุฃู ูููู ุงูุบุฑู ุบูุฑ ููู ุนูุฏูุง ูููู ุงูููุงู ุงูุฐู ุชู ุฅุฑุฌุงุนู ูู <code>JpaRepository::findOne</code> ุจุงููุนู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุณุชูู ุงูุฃูู - ููู ูููู ููุงู ุฃู ุทูุจ. </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุซุงู ูุดุงุจู ุจุฏูู ุชูุฑุน ุตุฑูุญ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkChild</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Dto dto)</span></span></span><span class="hljs-function"> </span></span>{ Long id = dto.getId(); Entity entity = jpaRepository.findOne(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dto.isValid() &amp;&amp; entity.hasChild(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุญ ูู ุงูุฅุฑุฌุงุน ุงูุณุฑูุน ุชุฃุฎูุฑ ุงูุทูุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkChild</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Dto dto)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dto.isValid()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jpaRepository.findOne(dto.getId()).hasChild(); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุถุงูุฉ ูุงุถุญุฉ ุฅูู ุญุฏ ูุง ูู ุชุธูุฑ ูู ุงูุชูุฑูุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุชุฎูู ุฃู ุดูููุง ูุนูููุง ูุณุชุฎุฏู ููุงููุง ูุดุงุจููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParentEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span>(fetch = LAZY) <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"CHILD_ID"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ChildEntity child; <span class="hljs-meta"><span class="hljs-meta">@Enumerated</span></span>(EnumType.String) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SomeType type;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุงูุดูู ูุณุชุฎุฏู ููุณ ุงูููุงู ุ ููุฌุจ ุนููู ุงูุชุฃูุฏ ูู ุฃู ุงูุงุณุชุฏุนุงุก ุฅูู ุงูููุงูุงุช / ุงููุฌููุนุงุช ุงููุฑุนูุฉ "ุงูุจุทูุฆุฉ" ูุชู ุฅุฌุฑุงุคูุง ุจุนุฏ ุงูุงุณุชุฏุนุงุก ููุญููู ุงูุชู ุชู ุชุญููููุง ุจุงููุนู.  ูููููุฉ ุงูุฃููู ุ ูู ูููู ูุทูุจ ูุงุญุฏ ุฅุถุงูู ุชุฃุซูุฑ ูุจูุฑ ุนูู ุงูุตูุฑุฉ ุงูุนุงูุฉ ุ ูููู ูู ุดูุก ูููู ุฃู ูุชุบูุฑ ุนูุฏ ุชูููุฐ ุงูุฅุฌุฑุงุก ูู ุญููุฉ. </p></div></div><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ: ููุจุบู ุชุฑุชูุจ ุณูุงุณู ุงูุฅุฌุฑุงุกุงุช / ุงูุดููุงุช ูู ุฃุฌู ุฒูุงุฏุฉ ุชุนููุฏ ุงูุนูููุงุช ุงููุฑุฏูุฉ ุ ุฑุจูุง ูู ูุชู ุชูููุฐ ุจุนุถูุง. </p><br><h2 id="cikly-i-massovaya-obrabotka" style=";text-align:right;direction:rtl">  ุฏูุฑุงุช ููุนุงูุฌุฉ ูุฌูุนุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุง ูุญุชุงุฌ ุงููุซุงู ุงูุชุงูู ุฅูู ุชูุณูุฑุงุช ุฎุงุตุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enrollStudents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Set&lt;Long&gt; ids)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long id : ids) { Student student = jpaRepository.findOne(id); <span class="hljs-comment"><span class="hljs-comment">// &lt;---- O(n) enroll(student); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุจูุงูุงุช ูุชุนุฏุฏุฉ ุ ูุฅู ุงูุฑูุฒ ุจุทูุก. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุญุธุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูููู ุฃู <code>enrollStudents</code> ุงูุฃุฏุงุก ุจุดูู ุฃูุจุฑ ุฅุฐุง <code>enrollStudents</code> ุชูููุฐ ุทุฑููุฉ ุงูุชุณุฌูู <code>enrollStudents</code> ุฎุงุฑุฌ ุงููุนุงููุฉ: ุซู ุณูุชู ุชูููุฐ <strong>ูู</strong> ุงุณุชุฏุนุงุก ูู <code>osdjrJpaRepository::findOne</code> ูู ูุนุงููุฉ ุฌุฏูุฏุฉ (ุงูุธุฑ <a href="">SimpleJpaRepository</a> ) ุ ููุง ูุนูู ุชููู ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅุนุงุฏุชู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฅูุดุงุก ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุณุชูู ุงูุฃูู ูุฅุนุงุฏุชูุง. </p></div></div><br><p style=";text-align:right;direction:rtl">  ุงูุฅุตูุงุญ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enrollStudents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Set&lt;Long&gt; ids)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ids.isEmpty()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Student student : jpaRepository.findAll(ids)) { enroll(student); } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฏุนูุง ูููุณ ููุช ุงูุชุดุบูู (ุจุงููููุฑูุซุงููุฉ) ููุฌููุนุฉ ูู ุงูููุงุชูุญ (10 ู 100 ูุทุนุฉ)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/p2/0b/zq/p20bzq2tlnp3-mj8zlx8c96411e.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  <a href="">ุงููุนูุงุฑ</a> </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุญุธุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุณุชุฎุฏู Oracle ููุฑุฑุช ุฃูุซุฑ ูู 1000 ููุชุงุญ <code>findAll</code> ุนูู <code>findAll</code> ุ ูุณุชุญุตู ุนูู ุงูุงุณุชุซูุงุก <code>ORA-01795: maximum number of expressions in a list is 1000</code> . <br>  ุฃูุถูุง ุ ูุฏ ูููู ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช ุงูุซูููุฉ (ูุน ุงูุนุฏูุฏ ูู ุงูููุงุชูุญ) ุฃุณูุฃ ูู n ุงูุงุณุชุนูุงูุงุช.  ูู ูุฐุง ูุชููู ุนูู ุงูุชุทุจูู ุงููุญุฏุฏ ุ ูุฐูู ูููู ุฃู ูุคุฏู ุงูุงุณุชุจุฏุงู ุงููููุงูููู ููุฏูุฑุฉ ุฅูู ุงููุนุงูุฌุฉ ุงูุฌูุงุนูุฉ ุฅูู ุชุฏููุฑ ุงูุฃุฏุงุก. </p></div></div><br><h4 id="bolee-slozhnyy-primer-na-tu-zhe-temu" style=";text-align:right;direction:rtl">  ูุซุงู ุฃูุซุฑ ุชุนููุฏูุง ุญูู ููุณ ุงูููุถูุน </h4><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long id : ids) { Region region = jpaRepository.findOne(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (region == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// &lt;----  region = new Region(); region.setId(id); } use(region); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ูููููุง ุงุณุชุจุฏุงู ุงูุญููุฉ ุจู <code>JpaRepository::findAll</code> ุ <code>JpaRepository::findAll</code> ูุฐุง ุณููุณุฑ ุงูููุทู: ุฌููุน ุงูููู ุงูุชู ุชู ุงูุญุตูู ุนูููุง ูู <code>JpaRepository::findAll</code> ูู ุชููู <code>null</code> ููู ุชุนูู ูุชูุฉ <code>if</code> . </p><br><p style=";text-align:right;direction:rtl">  ุญูููุฉ ุฃู ููู ููุชุงุญ ูุงุนุฏุฉ ุจูุงูุงุช ุณูุณุงุนุฏูุง ุนูู ุญู ูุฐู ุงูุตุนูุจุฉ <br>  ุฅุฑุฌุงุน ุงููููุฉ ุงููุนููุฉ ุฃู ุบูุงุจู.  ุจูุนูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ูุงููุณ.  ุชุนุทููุง ุฌุงูุง ูู ุงูุตูุฏูู ุชูููุฐูุง ุฌุงูุฒูุง ูููุงููุณ - <code>HashMap</code> - ุงูุฐู ุณูููู ุนูู ุฑุฃุณู ุจุจูุงุก ุงูููุทู ูุงุณุชุจุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Map&lt;Long, Region&gt; regionMap = jpaRepository.findAll(ids) .stream() .collect(Collectors.toMap(Region::getId, Function.identity())); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long id : ids) { Region region = map.get(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (region == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { region = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Region(); region.setId(id); } use(region); }</code> </pre> <br><h4 id="primer-v-obratnuyu-storonu" style=";text-align:right;direction:rtl">  ูุซุงู ุนูุณู </h4><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// class Saver @Transactional(propagation = Propagation.REQUIRES_NEW) public void save(List&lt;AuditEntity&gt; entities) { jpaRepository.save(entities); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุดุฆ ูุฐุง ุงูุฑูุฒ ุฏุงุฆููุง ูุนุงููุฉ ุฌุฏูุฏุฉ ูุญูุธ ูุงุฆูุฉ ุงูููุงูุงุช.  ูุจุฏุฃ ุงูุชุฑูู ุจููุงููุงุช ูุชุนุฏุฏุฉ ูุทุฑููุฉ ุชูุชุญ ูุนุงููุฉ ุฌุฏูุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   @Transactional public void audit(List&lt;AuditDto&gt; inserts) { inserts.map(this::toEntities).forEach(saver::save); // &lt;---- } // class Saver @Transactional(propagation = Propagation.REQUIRES_NEW) // &lt;---- public void save(List&lt;AuditEntity&gt; entities) { jpaRepository.save(entities); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุญู: ูู ุจุชุทุจูู ุทุฑููุฉ <code>Saver::save</code> ุงูููุฑ ููุฌููุนุฉ ุงูุจูุงูุงุช ุจุงููุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">audit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;AuditDto&gt; inserts)</span></span></span><span class="hljs-function"> </span></span>{ List&lt;AuditEntity&gt; bulk = inserts .map(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::toEntities) .flatMap(List::stream) <span class="hljs-comment"><span class="hljs-comment">// &lt;---- .collect(toList()); saver.save(bulk); }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุชู ุฏูุฌ ุงููุซูุฑ ูู ุงููุนุงููุงุช ูู ุตููุฉ ูุงุญุฏุฉ ุ ููุง ูุนุทู ุฒูุงุฏุฉ ููููุณุฉ (ุงูููุช ุจุงููููุฑูุซุงููุฉ):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/f7/3r/n9/f73rn9gtjw7fdgiqrfwkq7tfme4.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  <a href="">ุงููุนูุงุฑ</a> </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุตุนุจ ุฅุถูุงุก ุงูุทุงุจุน ุงูุฑุณูู ุนูู ูุซุงู ูููุนุงููุงุช ุงููุชุนุฏุฏุฉ ุ ูุงูุฐู ูุง ูููู ูููู ุนู ุงุณุชุฏุนุงุก <code>JpaRepository::findOne</code> ูู ุญููุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฐูู ุ ุณูุชุฎุฐ ุชุฏุงุจูุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-165730</a> <br>  IDEA-165730 ุชุญุฐูุฑ ูู ุงูุงุณุชุฎุฏุงู ุบูุฑ ุงููุนุงู ูู JpaRepository </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-165942</a> <br><del>  IDEA-165942 </del>  ุงูุชูุชูุด ูุงุณุชุจุฏุงู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ูู ุญููุฉ ุจุนูููุฉ ูุฌูุนุฉ <br>  <strong>ุซุงุจุช ูู 2017.1</strong> </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุง ููุทุจู ูุฐุง ุงูููุฌ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุท ุ ูุฐูู ุฐูุจ Tagir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">lany</a> Valeev ุฅูู ุฃุจุนุฏ ูู ุฐูู.  ูุฅุฐุง ูุชุจูุง ุณุงุจููุง ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">List&lt;Long&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long id : items) { list.add(id); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุดูุก ุนูู ูุง ูุฑุงู ุ ุงูุขู ุชูุชุฑุญ "ุงูููุฑุฉ" ุชุตุญูุญ ููุณูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">List&lt;Long&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); list.addAll(items);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุญุชู ูุฐุง ุงูุฎูุงุฑ ูุง ูุฑุถูู ุฏุงุฆููุง ุ ูุฃูู ููููู ุฌุนูู ุฃูุตุฑ ูุฃุณุฑุน: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">List&lt;Long&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(items);</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฑู (ุงูููุช ุจุงูุซูุงูู)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ุฅูู ArrayList ุ ูุนุทู ูุฐุง ุงูุชุญุณูู ุฒูุงุฏุฉ ููุญูุธุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gi/6j/o8/gi6jo8xwigpdckqz6jtuw4cmane.png"></p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูู HashSet ุ ุฅููุง ููุณุช ูุฑุฏูุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/u9/lo/fy/u9lofyf2wy2hffk8gd0uwvrmmke.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  <a href="">ุงููุนูุงุฑ</a> </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูููุฏ ูููุทูุฑ:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-138456</a> <br><del>  IDEA-138456 </del>  ูุญุต ุฌุฏูุฏ: Collection.addAll () ูููู ุงุณุชุจุฏุงูู ุจููุดุฆ ุจุงุฑุงูุชุฑ <br>  <strong>ุชู ุงูุฅุตูุงุญ ูู 142.1217</strong> </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-178761</a> <br><del>  IDEA-178761 </del>  ูุฌุจ ุชุดุบูู ุงููุญุต 'Collection.addAll () ุงููุงุจู ููุงุณุชุจุฏุงู ุจููุดุฆ ุจุงุฑุงูุชุฑ' ุงูุชุฑุงุถููุง <br>  <strong>ุซุงุจุช ูู 2017.3</strong> </p></div></div><br><h4 id="udalenie-iz-arraylist-a" style=";text-align:right;direction:rtl">  ุฅุฒุงูุฉ ูู <code>ArrayList</code> </h4><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = from; i &lt; to; i++) { list.remove(from); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชููู ุงููุดููุฉ ูู ุชูููุฐ ุฃุณููุจ <code>List::remove</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> E </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>{ Objects.checkIndex(index, size); modCount++; E oldValue = elementData(index); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numMoved = size - index - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (numMoved &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { System.arraycopy(array, index + <span class="hljs-number"><span class="hljs-number">1</span></span>, array, index, numMoved); <span class="hljs-comment"><span class="hljs-comment">// &lt;---- } array[--size] = null; // clear to let GC do its work return oldValue; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุญู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">list.subList(from, to).clear();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ูุงุฐุง ูู ุชู ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุจุนูุฏุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑุ </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = from; i &lt; to; i++) { E removed = list.remove(from); use(removed); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุชุญุชุงุฌ ุฅูู ูุฑุงุฌุนุฉ ุงููุงุฆูุฉ ุงูููุธูุฉ ุฃููุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">List&lt;String&gt; removed = list.subList(from, to); removed.forEach(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::use); removed.clear();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑูุฏ ุญููุง ุงูุญุฐู ูู ุงูุฏูุฑุฉ ุ ูุฅู ุชุบููุฑ ุงุชุฌุงู ุงููุฑูุฑ ุนุจุฑ ุงููุงุฆูุฉ ุณูุณุงุนุฏ ูู ุชุฎููู ุงูุฃูู.  ูุนูุงู ุชุบููุฑ ุนุฏุฏ ุฃูู ูู ุงูุนูุงุตุฑ ุจุนุฏ ุชูุธูู ุงูุฎููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   , . .       for (int i = from; i &lt; to; i++) { E removed = list.remove(from); use(removed, i); } //  , . .    for (int i = to - 1; i &gt;= from; i--) { E removed = list.remove(i); use(removed, reverseIndex(i)); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุฑู ุจูู ุงูุทุฑู ุงูุซูุงุซุฉ (ุชุญุช ุงูุฃุนูุฏุฉูช ุงูุนูุงุตุฑ ุงููุญุฐููุฉ ูู ูุงุฆูุฉ ุจุญุฌู 100): </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฌุงูุง 8</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/4h/ii/tq/4hiitqg5a7d3bk6lxi8od422yky.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฌุงูุง 9</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ow/mo/ty/owmotysgwdqquagklf1yhlrquz0.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  ุจุงูููุงุณุจุฉ ุ ูู ูุงุญุธ ุฃุญุฏูู ุงูุดุฐูุฐุ </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุฑู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xm/ni/s9/xmnis9jllk8rozgh8xacdneyhd8.png"></p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูููุง ุจุญุฐู ูุตู ุฌููุน ุงูุจูุงูุงุช ุงูุชู ุชูุชูู ูู ุงูููุงูุฉ ุ ูุณูุชู ุญุฐู ุงูุนูุตุฑ ุงูุฃุฎูุฑ ุฏุงุฆููุง ูููุณ ููุงู ุฅุฒุงุญุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// ArrayList public E remove(int index) { rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved &gt; 0) { // &lt;----     System.arraycopy(elementData, index+1, elementData, index, numMoved); } elementData[--size] = null; // clear to let GC do its work return oldValue; }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  <a href="">ุงููุนูุงุฑ</a> </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูููุฏ ูููุทูุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-177466</a> <br><del>  IDEA-177466 </del>  ูุดู ูุงุฆูุฉ. ุฅุฒุงูุฉ (ููุฑุณ) ูู ุญููุฉ <br>  <strong>ุชู ุงูุฅุตูุงุญ ูู 2018.2</strong> </p></div></div><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ: ุงูุนูููุงุช ุงูุฌูุงุนูุฉ ุบุงูุจูุง ูุง ุชููู ุฃุณุฑุน ูู ุงูุนูููุงุช ุงููุฑุฏูุฉ. </p><br><h2 id="oblast-vidimosti-i-proizvoditelnost" style=";text-align:right;direction:rtl">  ุงููุทุงู ูุงูุฃุฏุงุก </h2><br><p style=";text-align:right;direction:rtl">  ูุง ูุญุชุงุฌ ูุฐุง ุงูุฑูุฒ ุฅูู ุฃู ุชูุณูุฑุงุช ุฎุงุตุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">leaveForTheSecondYear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;Student&gt; naughty = repository.findNaughty(); List&lt;Student&gt; underAchieving = repository.findUnderAchieving(); <span class="hljs-comment"><span class="hljs-comment">// &lt;---- if (settings.leaveBothCategories()) { leaveForTheSecondYear(naughty, underAchieving); // &lt;---- return; } leaveForTheSecondYear(naughty); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุจุชุถููู ุงููุทุงู ุ ููุง ูุนุทู ูุงูุต 1 ุงุณุชุนูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">leaveForTheSecondYear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;Student&gt; naughty = repository.findNaughty(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Settings.leaveBothCategories()) { List&lt;Student&gt; underAchieving = repository.findUnderAchieving(); <span class="hljs-comment"><span class="hljs-comment">// &lt;---- leaveForTheSecondYear(naughty, underAchieving); // &lt;---- return; } leaveForTheSecondYear(naughty); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุง ูุฌุจ ุฃู ูุณุฃู ุงููุงุฑุฆ ุงูููุธ: ูุงุฐุง ุนู ุงูุชุญููู ุงูุณุงููุ  ููุงุฐุง ูู ุชุฎุจุฑูุง Idea ุนู ุงูุชุญุณู ูู ุงูุงุณุชููุงุก ุนูู ุงูุณุทุญุ </p><br><p style=";text-align:right;direction:rtl">  ูุงูุญูููุฉ ูู ุฃู ุฅููุงููุงุช ุงูุชุญููู ุงูุซุงุจุช ูุญุฏูุฏุฉ: ุฅุฐุง ูุงูุช ุงูุทุฑููุฉ ูุนูุฏุฉ (ุฎุงุตุฉ ุงูุชูุงุนู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช) ูุชุคุซุฑ ุนูู ุงูุญุงูุฉ ุงูุนุงูุฉ ุ ูุฅู ููู ุชูููุฐูุง ูููู ุฃู ููุณุฑ ุงูุชุทุจูู.  ุงููุญูู ุงูุณุงูู ูุงุฏุฑ ุนูู ุงูุฅุจูุงุบ ุนู ุนูููุงุช ุงูุฅุนุฏุงู ุงูุจุณูุทุฉ ููุบุงูุฉ ุ ููู ูุคุฏู ููููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฏุงุฎู ุงููุชูุฉ ุฅูู ูุณุฑ ุฃู ุดูุก. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงุณุชุฎุฏุงู ุฅุจุฑุงุฒ ูุชุบูุฑ ูุฅุฑุณุงุชุฒ ุ ูููู ูุฑุฉ ุฃุฎุฑู ุ ุงุณุชุฎุฏูู ุจุนูุงูุฉ ุ ูุฃู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ููููุฉ ุฏุงุฆููุง.  ููููู ุงุณุชุฎุฏุงู ุงูุชุนููู ุงูุชูุถูุญู <code>@org.jetbrains.annotations.Contract(pure = true)</code> ุ ุงููุชููุฑ ูู ููุชุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ jetbrains ููุฅุดุงุฑุฉ ุฅูู</a> ุงูุฃุณุงููุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนุฏููุฉ ุงูุญุงูุฉ</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// com.intellij.util.ArrayUtil @Contract(pure = true) public static int find(@NotNull int[] src, int obj) { return indexOf(src, obj); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ: ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูุฒูุฏ ุงูุนูู ุงูุฒุงุฆุฏ ูู ุณูุก ุงูุฃุฏุงุก. </p><br><h2 id="samyy-neobychnyy-primer" style=";text-align:right;direction:rtl">  ูุนุธู ุงูุฃูุซูุฉ ุบูุฑ ุงูุนุงุฏูุฉ </h2><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ContractCounter contractCounter; <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span>(readOnly = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-comment"><span class="hljs-comment">// &lt;---- public int countContracts(Dto dto) { if (dto.isInvalid()) { return -1; // &lt;---- } return contractCounter.countContracts(dto); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุชุญ ูุฐุง ุงูุชูููุฐ ูุนุงููุฉ ุญุชู ุนูุฏูุง ูุง ุชููู ููุงู ุญุงุฌุฉ ูููุนุงููุฉ (ุนุงุฆุฏ ุณุฑูุน -1 ูู ุงูุทุฑููุฉ). </p><br><p style=";text-align:right;direction:rtl">  ูู ูุง ุนููู ูุนูู ูู ุฅุฒุงูุฉ ุงููุนุงููุงุช ุฏุงุฎู ุทุฑููุฉ <code>ContractCounter::countContracts</code> ุ ุญูุซ ุชููู ููุงู ุญุงุฌุฉ ุฅูููุง ุ ูุฅุฒุงูุชูุง ูู ุงูุทุฑููุฉ "ุงูุฎุงุฑุฌูุฉ". </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฑู ููุช ุงูุชูููุฐ ููุญุงูุฉ ุนูุฏ ุฅุฑุฌุงุน -1 (ns):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/8k/uu/lp/8kuulppcl4vli1c5ir-txozcemi.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฑู ุงุณุชููุงู ุงูุฐุงูุฑุฉ (ุจุงูุช):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xp/du/ke/xpdukewr4nnooj2vtaktok4ngnm.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  <a href="">ุงููุนูุงุฑ</a> </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ: ูุฌุจ ุฃู ูุชู ุชุญุฑูุฑ ูุญุฏุงุช ุงูุชุญูู ูุงูุฎุฏูุงุช "ุงูุฎุงุฑุฌูุฉ" ูู ุงููุนุงููุงุช (ูุฐู ููุณุช ูุณุคูููุชูู) ููุฌุจ ุฃู ูุชู ุฃุฎุฐ ููุทู ุงูุชุญูู ูู ุจูุงูุงุช ุงูุฅุฏุฎุงู ุจุงููุงูู ุ ูุงูุฐู ูุง ูุชุทูุจ ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููููุงุช ุงููุนุงููุงุช ุ ููุงู. </p><br><h2 id="preobrazovanie-datyvremeni-v-stroku" style=";text-align:right;direction:rtl">  ุชุญููู ุงูุชุงุฑูุฎ / ุงูููุช ุฅูู ุณูุณูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุฅุญุฏู ุงูููุงู ุงูุฃุจุฏูุฉ ูู ุชุญููู ุงูุชุงุฑูุฎ / ุงูููุช ุฅูู ุณูุณูุฉ.  ูุจู G8 ุ ูููุง ุจุฐูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">SimpleDateFormat formatter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleDateFormat(<span class="hljs-string"><span class="hljs-string">"dd.MM.yyyy"</span></span>); String dateAsStr = formatter.format(date);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุน ุฅุตุฏุงุฑ JDK 8 ุ ุญุตููุง ุนูู <code>LocalDate/LocalDateTime</code> ุ ูุจุงูุชุงูู ุ <code>DateTimeFormatter</code> </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">DateTimeFormatter formatter = ofPattern(<span class="hljs-string"><span class="hljs-string">"dd.MM.yyyy"</span></span>); String dateAsStr = formatter.format(localDate);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูููุณ ุฃุฏุงุฆูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Date date = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Date(); LocalDate localDate = LocalDate.now(); SimpleDateFormat sdf = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleDateFormat(<span class="hljs-string"><span class="hljs-string">"dd.MM.yyyy"</span></span>); DateTimeFormatter dtf = DateTimeFormatter.ofPattern(<span class="hljs-string"><span class="hljs-string">"dd.MM.yyyy"</span></span>); <span class="hljs-meta"><span class="hljs-meta">@Benchmark</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleDateFormat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sdf.format(date); } <span class="hljs-meta"><span class="hljs-meta">@Benchmark</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dateTimeFormatter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dtf.format(localDate); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูููุช (ูุงููุซุงููุฉ):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zq/jq/sx/zqjqsxjevqpmuckdddvu4gysaoa.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฐุงูุฑุฉ (ุจุงูุช):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/9j/yq/sw/9jyqswjtyiwq3i8fkutenvyuj7g.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  ุณุคุงู: ูููุชุฑุถ ุฃู ุฎุฏูุชูุง ุชุชููู ุจูุงูุงุช ูู ุงูุฎุงุฑุฌ ููุง ูููููุง ุฑูุถ <code>java.util.Date</code> .  ูู ุณูููู ูู ุงููููุฏ ุจุงููุณุจุฉ ููุง ุชุญููู <code>Date</code> ุฅูู <code>LocalDate</code> ุฅุฐุง ุชู ุชุญููู ุงูุฃุฎูุฑ ุจุดูู ุฃุณุฑุน ุฅูู ุณูุณูุฉุ  ุงุญุณุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Benchmark</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">measureDateConverted</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Data data)</span></span></span><span class="hljs-function"> </span></span>{ LocalDate localDate = toLocalDate(data.date); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data.dateTimeFormatter.format(localDate); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> LocalDate </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toLocalDate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Date date)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> date.toInstant().atZone(ZoneId.systemDefault()).toLocalDate(); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูููุช (ูุงููุซุงููุฉ):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/j5/ob/mf/j5obmfec_kvfivo46wat9rmf8e8.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฐุงูุฑุฉ (ุจุงูุช):</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hx/hm/on/hxhmon8ss12qyv9s4is6byoy164.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุฅู <code>Date</code> ุงูุชุญููู -&gt; <code>LocalDate</code> ูููุฏ ุนูุฏ ุงุณุชุฎุฏุงู "ุงูุชุณุนุฉ".  ูู G8 ุ ุณุชูุชูู ุชูุงููู ุงูุชุญููู ุฌููุน ูุฒุงูุง <code>DateTimeFormatter</code> -a. </p><br><p style=";text-align:right;direction:rtl">  <a href="">ุงููุนูุงุฑ</a> </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ: ุงูุงุณุชูุงุฏุฉ ูู ุงูุญููู ุงูุฌุฏูุฏุฉ. </p><br><h2 id="eschyo-vosmyorka" style=";text-align:right;direction:rtl">  ุขุฎุฑ "ุซูุงููุฉ" </h2><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูููุฏ ุ ูุฑู ุชูุฑุงุฑูุง ูุงุถุญูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Iterator&lt;Long&gt; iterator = items <span class="hljs-comment"><span class="hljs-comment">// ArrayList&lt;Integer&gt; .stream() .map(Long::valueOf) .collect(toList()) // &lt;----    ? .iterator(); while (iterator.hasNext()) { bh.consume(iterator.next()); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุจุฅุฒุงูุชู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Iterator&lt;Long&gt; iterator = items <span class="hljs-comment"><span class="hljs-comment">// ArrayList&lt;Integer&gt; .stream() .map(Long::valueOf) .iterator(); while (iterator.hasNext()) { bh.consume(iterator.next()); }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฏุนููุง ูุฑู ูุฏู ุชุญุณู ุงูุฃุฏุงุก:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/un/mp/pf/unmppfr6sd8ybi3k7r7jrdsdfty.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฑู ูุน ุงูุชุณุนุฉ:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hc/rb/p9/hcrbp98qezjcm5fegv27cywcadu.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  ุญู ูุฏูุดุ  ููุฏ ุฌุงุฏูุช ุฃุนูุงู ุฃู ุงูุนูู ุงูุฒุงุฆุฏ ูุญุท ูู ุงูุฃุฏุงุก.  ูููู ููุง ูุฒูู ุงููุงุฆุถ - (ูุฌุฃุฉ) ูุตุจุญ ุฃุณูุฃ.  ูููู ูุง ูุญุฏุซ ุ ุฎุฐ ููุฑุฑูู ูุงูุธุฑ ุฅููููุง ุชุญุช ุนุฏุณุฉ ููุจุฑุฉ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅูุดุงุก</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Iterator iterator1 = items.stream().collect(toList()).iterator(); Iterator iterator2 = items.stream().iterator();</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rn/ah/kf/rnahkfz2qdyuw0k_cjeorqawqki.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  ุงูููุฑุฑ ุงูุฃูู ูู <code>ArrayList$Itr</code> ุงูุนุงุฏู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุฑูุฑ ุนุจุฑู ุจุณูุท:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cursor != size; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> E </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ checkForComodification(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = cursor; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &gt;= size) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NoSuchElementException(); } Object[] elementData = ArrayList.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.elementData; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i &gt;= elementData.length) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentModificationException(); } cursor = i + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (E) elementData[lastRet = i]; }</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ug/yb/pi/ugybpiiwmjj5-fbcazvmfdjd2tq.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  ูุงูุซุงูู ูู ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุ ููู <code>Spliterators$Adapter</code> ุ ูุงูุฐู ูุนุชูุฏ ุนูู <code>ArrayList$ArrayListSpliterator</code> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูู ุงูุตุนุจ ุงููุฑูุฑ ุนุจุฑู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// java.util.Spliterators$Adapter public boolean hasNext() { if (!valueReady) spliterator.tryAdvance(this); return valueReady; } public T next() { if (!valueReady &amp;&amp; !hasNext()) throw new NoSuchElementException(); else { valueReady = false; return nextElement; } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pf/5p/gj/pf5pgjkfhhfw__h8ie7m6oflxqq.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุชูุฑุงุฑ ุงูููุฑุฑ ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุญูู ุงููุชุฒุงูู</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel"><span class="hljs-number"><span class="hljs-number">15.64</span></span>% juArrayList$ArrayListSpliterator.tryAdvance <span class="hljs-number"><span class="hljs-number">10.67</span></span>% jusSpinedBuffer.<span class="hljs-keyword"><span class="hljs-keyword">clear</span></span> <span class="hljs-number"><span class="hljs-number">9.86</span></span>% juSpliterators$1Adapter.hasNext <span class="hljs-number"><span class="hljs-number">8.81</span></span>% jusStreamSpliterators$AbstractWrappingSpliterator.fillBuffer <span class="hljs-number"><span class="hljs-number">6.01</span></span>% oojiBlackhole.consume <span class="hljs-number"><span class="hljs-number">5.71</span></span>% jusReferencePipeline$3$1.accept <span class="hljs-number"><span class="hljs-number">5.57</span></span>% jusSpinedBuffer.accept <span class="hljs-number"><span class="hljs-number">5.06</span></span>% cllbir.IteratorFromStreamBenchmark.iteratorFromStream <span class="hljs-number"><span class="hljs-number">4.80</span></span>% jlLong.valueOf <span class="hljs-number"><span class="hljs-number">4.53</span></span>% cllbiIteratorFromStreamBenchmark$$Lambda$8<span class="hljs-number"><span class="hljs-number">.885721577</span></span>.apply</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ููุงุญุธุฉ ุฃูู ูุชู ูุถุงุก ูุนุธู ุงูููุช ูู ุงููุฑูุฑ ูู ุฎูุงู ุงูููุฑุฑ ุ ุนูู ุงูุฑุบู ูู ุฃููุง ูุง ูุญุชุงุฌ ุฅููู ุจุดูู ุนุงู ุ ูุฃูู ูููู ุฅุฌุฑุงุก ุงูุจุญุซ ุนูู ูุฐุง ุงููุญู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">items .stream() .map(Long::valueOf) .forEach(bh::consume);</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฑู ูุน ุงูุจุงูู:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rf/is/i0/rfisi0vsfoezlcvtd43h2lhlvfi.png"></p></div></div><br><p style=";text-align:right;direction:rtl">  <code>Stream::forEach</code> ุงููุงุถุญ ุฃู <code>Stream::forEach</code> ุงููุงุฆุฒ ุ ูููู ูุฐุง ุบุฑูุจ: ูุง ูุฒุงู ูุนุชูุฏ ุนูู <code>ArrayListSpliterator</code> ุ ูููู ุงุณุชุฎุฏุงูู ุชุญุณู ุจุดูู ููุญูุธ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฏุนูุง ูุฑู ููู ุงูุชุนุฑูู:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell"><span class="hljs-number"><span class="hljs-number">29.04</span></span>% oojiBlackhole.consume <span class="hljs-number"><span class="hljs-number">22.92</span></span>% juArrayList<span class="hljs-variable"><span class="hljs-variable">$ArrayListSpliterator</span></span>.forEachRemaining <span class="hljs-number"><span class="hljs-number">14.47</span></span>% jusReferencePipeline<span class="hljs-variable"><span class="hljs-variable">$3</span></span><span class="hljs-variable"><span class="hljs-variable">$1</span></span>.accept <span class="hljs-number"><span class="hljs-number">8.79</span></span>% jlLong.valueOf <span class="hljs-number"><span class="hljs-number">5.37</span></span>% cllbiIteratorFromStreamBenchmark<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$Lambda</span></span><span class="hljs-variable"><span class="hljs-variable">$9</span></span>.<span class="hljs-number"><span class="hljs-number">617691115</span></span>.accept <span class="hljs-number"><span class="hljs-number">4.84</span></span>% cllbiIteratorFromStreamBenchmark<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$Lambda</span></span><span class="hljs-variable"><span class="hljs-variable">$8</span></span>.<span class="hljs-number"><span class="hljs-number">1964917002</span></span>.apply <span class="hljs-number"><span class="hljs-number">4.43</span></span>% jusForEachOps<span class="hljs-variable"><span class="hljs-variable">$ForEachOp</span></span><span class="hljs-variable"><span class="hljs-variable">$OfRef</span></span>.accept <span class="hljs-number"><span class="hljs-number">4.17</span></span>% jusSink<span class="hljs-variable"><span class="hljs-variable">$ChainedReference</span></span>.end <span class="hljs-number"><span class="hljs-number">1.27</span></span>% jlInteger.longValue <span class="hljs-number"><span class="hljs-number">0.53</span></span>% jusReferencePipeline.map</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูููู ุงูุดุฎุตู ุ ูุชู ูุถุงุก ูุนุธู ุงูููุช ูู "ุงุจุชูุงุน" ุงูููู ุฏุงุฎู <code>Blackhole</code> .  ููุงุฑูุฉ ุจุงูููุฑุฑ ุ ูุชู ุฅููุงู ุฌุฒุก ุฃูุจุฑ ุจูุซูุฑ ูู ุงูููุช ูุจุงุดุฑุฉ ุนูู ุชูููุฐ ููุฏ Java.  ูููู ุงูุชุฑุงุถ ุฃู ุงูุณุจุจ ูู ุงูุฎูุงุถ ุงููุฒู ุงููุญุฏุฏ ููุฌููุนุฉ ุงูููุงูุฉ ุ ููุงุฑูุฉู ุจุงูููุฉ ุงูุบุงุดูุฉ ุงูููุฑุฑุฉ.  ุชุญูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">forEach:ยทgc.alloc.rate.norm <span class="hljs-number"><span class="hljs-number">100</span></span> avgt <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">216</span></span>,<span class="hljs-number"><span class="hljs-number">001</span></span> ยฑ <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">002</span></span> B/op iteratorFromStream:ยทgc.alloc.rate.norm <span class="hljs-number"><span class="hljs-number">100</span></span> avgt <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">416</span></span>,<span class="hljs-number"><span class="hljs-number">004</span></span> ยฑ <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">006</span></span> B/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงููุนู ุ ูููุฑ <code>Stream::forEach</code> ูุตู ุงุณุชููุงู ุงูุฐุงูุฑุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูู ุฃุณุฑุนุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุชุจุฏู ุณูุณูุฉ ุงูููุงููุงุช ูู ุงูุจุฏุงูุฉ ุฅูู ุงูุซูุจ ุงูุฃุณูุฏ ููุง ููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/2f/5w/1y/2f5w1ydxlo5oomf8bfmhbqtynze.png"></p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑู ุ ุงุฎุชูู ุงุณุชุฏุนุงุก <code>ArrayListSpliterator::tryAdvance</code> ูู ุงูุณูุณูุฉ ุ ูุธูุฑ <code>ArrayListSpliterator::forEachRemaining</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// ArrayListSpliterator public void forEachRemaining(Consumer&lt;? super E&gt; action) { int i, hi, mc; // hoist accesses and checks from loop ArrayList&lt;E&gt; lst; Object[] a; if (action == null) throw new NullPointerException(); if ((lst = list) != null &amp;&amp; (a = lst.elementData) != null) { if ((hi = fence) &lt; 0) { mc = lst.modCount; hi = lst.size; } else mc = expectedModCount; if ((i = index) &gt;= 0 &amp;&amp; (index = hi) &lt;= a.length) { for (; i &lt; hi; ++i) { @SuppressWarnings("unchecked") E e = (E) a[i]; // &lt;---- action.accept(e); } if (lst.modCount == mc) return; } } throw new ConcurrentModificationException(); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>ArrayListSpliterator::forEachRemaining</code> ุชุญููู <code>ArrayListSpliterator::forEachRemaining</code> ุนุงูู ุงูุณุฑุนุฉ ุจุงุณุชุฎุฏุงู ุชูุฑูุฑ ุนุจุฑ ุงูุตููู ุจุฃูููู ูู ุงุณุชุฏุนุงุก ุฃุณููุจ 1.  ุนูุฏ ุงุณุชุฎุฏุงู ููุฑุฑ ุ ููุชุตุฑ ุงูููุทุน ุนูู ุนูุตุฑ ูุงุญุฏ ุ ูุฐูู ููุญู ูุฑุชุงุญ ุฏุงุฆููุง ุถุฏ <code>ArrayListSpliterator::tryAdvance</code> . <br>  <code>ArrayListSpliterator::forEachRemaining</code> ูุฏูู ุญู ุงููุตูู ุฅูู ุงูุตููู ุจุฃูููู <code>ArrayListSpliterator::forEachRemaining</code> ูููู ูุน ุฏูุฑุฉ ุญุณุงุจ ุจุฏูู ููุงููุงุช ุฅุถุงููุฉ. </p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅุดุนุงุฑ ูุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฑุฌู ููุงุญุธุฉ ุฃู ุงูุงุณุชุจุฏุงู ุงููููุงูููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Iterator&lt;Long&gt; iterator = items .stream() .map(Long::valueOf) .collect(toList()) .iterator(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (iterator.hasNext()) { bh.consume(iterator.next()); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">items .stream() .map(Long::valueOf) .forEach(bh::consume);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูููู ุฏุงุฆููุง ููุงูุฆูุง ุ ูุฃูู ูู ุงูุญุงูุฉ ุงูุฃููู ูุณุชุฎุฏู ูุณุฎุฉ ูู ุงูุจูุงูุงุช ูุชูุฑูุฑูุง ุฏูู ุงูุชุฃุซูุฑ ุนูู ุงูุฏูู ููุณู ุ ููู ุงูุญุงูุฉ ุงูุซุงููุฉ ุ ูุชู ุฃุฎุฐ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ูู ุงูุฏูู. </p></div></div><br><p style=";text-align:right;direction:rtl">  <a href="">ุงููุนูุงุฑ</a> </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ: ุนูุฏ ุงูุชุนุงูู ูุน ุชูุซููุงุช ูุนูุฏุฉ ููุจูุงูุงุช ุ ูู ูุณุชุนุฏูุง ูุญูููุฉ ุฃูู ุญุชู ููุงุนุฏ "ุงูุญุฏูุฏ" (ุฃุถุฑุงุฑ ุงูุนูู ุงูุฅุถุงููุฉ) ุชุชููู ุนู ุงูุนูู.  ููุถุญ ุงููุซุงู ุฃุนูุงู ุฃู ุงููุงุฆูุฉ ุงููุชูุณุทุฉ ุงูุฒุงุฆุฏุฉ ุนูู ูุง ูุจุฏู ุชุนุทู ููุฒุฉ ุงูุชูููุฐ ุงูุณุฑูุน ููุนุฏ. </p><br><h4 id="dva-podvoha" style=";text-align:right;direction:rtl">  ุฎุฏุนุชุงู </h4><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">StackTraceElement[] trace = th.getStackTrace(); StackTraceElement[] newTrace = Arrays .asList(trace) .subList(<span class="hljs-number"><span class="hljs-number">0</span></span>, depth) .toArray(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StackTraceElement[newDepth]); <span class="hljs-comment"><span class="hljs-comment">// &lt;----</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃูู ุดูุก ูููุช <code>Collection::toArray</code> ูู "ุชุญุณู" ูุงุณุฏ ุ ุฃู ุชูุฑูุฑ ูุฌููุนุฉ ูู ุงูุทูู ุบูุฑ ุงูุตูุฑู ุฅูู ุฃุณููุจ <code>Collection::toArray</code> .  ูุดุฑุญ ุจุงูุชูุตูู ููุงุฐุง ูุฐุง ุถุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุงููุดููุฉ ุงูุซุงููุฉ ููุณุช ูุงุถุญุฉ ููุบุงูุฉ ุ ููู ุฃุฌู ููููุง ูููููุง ุฑุณู ููุงุฒู ุจูู ุนูู ุงููุฑุงุฌุน ูุงููุคุฑุฎ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฐุง ูุง ููุชุจู ุฑูุจู ูููููุฌููุฏ ุนู ูุฐุง:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> , ,   []       โ  . <strong>             </strong> .   , <strong>    ,    </strong> ... </p></div></div><br><p style=";text-align:right;direction:rtl">       <strong></strong>      .      : </p><br><p style=";text-align:right;direction:rtl"> 1)     <br> 2)    <br> 3)       </p><br><p style=";text-align:right;direction:rtl">      ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">StackTraceElement[] trace = th.getStackTrace(); StackTraceElement[] newTrace = Arrays.copyOf(trace, depth); <span class="hljs-comment"><span class="hljs-comment">//    0 //  StackTraceElement[] newTrace = Arrays.copyOfRange(trace, 0, depth); //   0</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> ():</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xg/ia/-8/xgia-8mdesgh-cpqm1cla0n8zz4.png"></p></div></div><br><p style=";text-align:right;direction:rtl"> <a href=""></a> </p><br><h4 id="strimoz-golovnogo-mozga" style=";text-align:right;direction:rtl">    </h4><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">List&lt;T&gt; list = getList(); Set&lt;T&gt; set = getSet(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list.stream().allMatch(set::contains); <span class="hljs-comment"><span class="hljs-comment">//     ?</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">       ,      ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">List&lt;T&gt; list = getList(); Set&lt;T&gt; set = getSet(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> set.containsAll(list);</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> ():</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/3c/tc/pr/3ctcprq3scexhaaifc9hiywbj98.png"></p></div></div><br><p style=";text-align:right;direction:rtl"> <a href=""></a> </p><br><h4 id="nenuzhnye-obyortki" style=";text-align:right;direction:rtl">   </h4><br><p style=";text-align:right;direction:rtl">  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileNameLoader</span></span></span><span class="hljs-class"> </span></span>{ String[] loadFileNames(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FileNameLoader loader; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String str : asList(loader.loadFileNames())) { <span class="hljs-comment"><span class="hljs-comment">// &lt;----   use(str); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">   ,   <code>forEach</code>    ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FileNameLoader loader; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String str : loader.loadFileNames()) { <span class="hljs-comment"><span class="hljs-comment">// &lt;----    use(str); } }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"> ():</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pa/kn/hc/paknhcvrp1cf7g-fw3cn4euxrse.png"></p></div></div><br><p style=";text-align:right;direction:rtl"> <a href=""></a> </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">  </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-182206</a> <br><del> IDEA-182206 </del> Simplification for Arrays.asList().subList().toArray() <br> <strong>  2018.1</strong> </p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-180847</a> <br><del> IDEA-180847 </del> Inspection 'Call to Collection.toArray with zero-length array argument' brings pessimization <br> <strong>  2018.1</strong> </p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-181928</a> <br><del> IDEA-181928 </del> Stream.allMatch(Collection::contains) can be simplified to Collection.containsAll() <br> <strong>  2018.1</strong> </p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://youtrack.jetbrains.com/issue/IDEA-184240</a> <br><del> IDEA-184240 </del> Unnecessary array-to-collection wrapping should be detected <br> <strong>  2018.1</strong> </p></div></div><br><p style=";text-align:right;direction:rtl"> :       : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  </li><li style=";text-align:right;direction:rtl">  </li><li style=";text-align:right;direction:rtl">    </li></ul><br><p style=";text-align:right;direction:rtl">       ,   ,         ,     .  ,   :         "" (        ),       ""     (      ),        . </p><br><p style=";text-align:right;direction:rtl"> โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   </a> </p><br><p style=";text-align:right;direction:rtl"> โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar423305/">https://habr.com/ru/post/ar423305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar423293/index.html">ููู ูุง ุชุทูู ุงููุงุฑ ุนูู ุณุงูู ูุน ุขูุฉ ุงูุฏููุฉ</a></li>
<li><a href="../ar423295/index.html">ูุคุชูุฑ ุชุทููุฑ ุงูุฌูุงู ุงูุฃูุซุฑ ูุงุฆุฏุฉ</a></li>
<li><a href="../ar423297/index.html">ูู Android Developer ุฅูู DevOps</a></li>
<li><a href="../ar423299/index.html">ููุณู ุงูุชุทุจูู ูู ุชุทุจููุงุช iOS</a></li>
<li><a href="../ar423303/index.html">ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุ ุฏูุฑุฉ ุนูููุฉ. ุชุญููู ุงูููุณููู ุงููุงุฆูุฉ ุนูู ุงูุนุงุทูุฉ</a></li>
<li><a href="../ar423307/index.html">ุทูุจุงุช ุณุญุจ GitHub ูู ุฑูุฒ Visual Studio</a></li>
<li><a href="../ar423309/index.html">ูุนุงููุงุช DBMS</a></li>
<li><a href="../ar423311/index.html">ุดุฑุงูุฉ Naviaddress ู ACTUM</a></li>
<li><a href="../ar423313/index.html">ุงููุณ I2C. ุงุตูุน ูุญูู ููุทู ุจุณูุท</a></li>
<li><a href="../ar423315/index.html">ูุธุฑูุฉ ุงูุฑูุงุจุท ุงูุนุงูููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>