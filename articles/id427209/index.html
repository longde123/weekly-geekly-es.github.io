<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👏🏽 🔂 👦 GeoPuzzle - buat sepotong demi sepotong dunia 🧗🏿 😕 🚨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya ingin berbicara tentang proyek yang telah berkembang selama beberapa tahun terakhir. Ini disebut GeoPuzzle dan merupakan permainan puzzle di peta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GeoPuzzle - buat sepotong demi sepotong dunia</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427209/"><img src="https://habrastorage.org/webt/yi/rt/rr/yirtrrid9bdhlygy86tfho1fg8g.png" alt="gambar"><br><br>  Saya ingin berbicara tentang proyek yang telah berkembang selama beberapa tahun terakhir.  Ini disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GeoPuzzle</a> dan merupakan permainan puzzle di peta politik dunia.  Tujuannya adalah untuk menempatkan potongan-potongan negara di tempatnya.  Gagasan itu terlihat dalam artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Puzzle Mercator untuk Geografi Profesional"</a> , juga memainkan tetris dari negara-negara (masih di bawah DOS) di masa kanak-kanak, tetapi saya tidak ingat nama programnya.  Saya sangat terinspirasi oleh gagasan bahwa saya ingin membuat produk yang lengkap, menarik tidak hanya untuk anak sekolah, tetapi juga untuk para ahli geografi.  Pengembangan proyek dapat diamati di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> . <br><a name="habracut"></a><br><h2>  Prototipe </h2><br>  Artikel "Puzzle Mercator untuk ahli geografi" diterbitkan pada 8 Februari 2013, tetapi setelah 4 bulan saya memiliki prototipe siap, di mana poligon dari semua negara di dunia berkumpul.  Beberapa saat kemudian, saya menambahkan wilayah Rusia dan negara bagian AS dan membuat pilihan posisi awal di peta untuk poligon acak.  Saya menggambarkan proses pengembangan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di blog saya</a> , memposting kode sumber di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> .  Dan itu - terjebak.  Saya mendapat waktu luang yang jauh lebih sedikit, motivasi saya hilang (tidak ada keputusan), dan kompleksitasnya meningkat secara eksponensial.  Itu adalah proyek hewan peliharaan, dan tugas utamanya adalah mempelajari sesuatu yang baru, jadi saya agak sesat dengan teknologi.  Pada klien, tentu saja, javascript (dengan mana saya tidak banyak bekerja saat itu), skrip ruby ​​(sekali lagi, bahasa baru bagi saya) bertanggung jawab untuk persiapan data, tetapi pada server ada erlang (saya ingin mencoba sesuatu yang murni fungsional).  Keluar sepenuhnya dari zona nyaman: sulit untuk bekerja secara langsung dengan benda-benda PostGIS, rasa sakit mengubah string ke erlang, mengonfigurasi YAWS adalah masalah yang terpisah sama sekali ... Pada tahap berikutnya, saya menyadari bahwa saya tidak bisa mengatasi semua kebun binatang ini untuk membuat produk lengkap, dan pergi berpikir selama beberapa tahun. <br><br><h2>  GeoPuzzle </h2><br><img src="https://habrastorage.org/webt/k3/rp/5d/k3rp5dfmluyjvoqm0tffbva4b_g.gif" alt="gambar"><br><br>  Situs ini telah berfungsi selama ini, orang-orang bahkan pergi ke sana, tetapi saya benar-benar ingin menambahkan satu detail lagi: untuk menampilkan setidaknya beberapa informasi tentang poligon yang baru ditemukan.  Karena itu, saya berencana untuk menghabiskan liburan Tahun Baru di tahun 2017 dengan manfaat.  Karena masalah dalam prototipe, saya memutuskan untuk menulis ulang semuanya dan membuat produk pada sesuatu yang akrab - Django.  Di luar kotak ada beberapa hal yang sangat menyederhanakan hidup saya, misalnya, panel admin dan bekerja dengan PostGIS melalui ORM.  Tetapi sebagai permulaan, itu perlu untuk menciptakan kembali fungsi yang sudah berfungsi.  Hanya butuh beberapa malam, dan sebagian besar waktu diambil dengan memuat data dari file KML.  Tidak terlalu banyak proses impor itu sendiri sebagai persiapan dan pemulihan pengetahuan saya tentang cara bekerja dengan mereka.  Ngomong-ngomong, saya mengambil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">poligon</a> dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gadm.org</a> pada waktu itu.  Ini bekerja dengan baik untuk negara-negara, tetapi ada masalah tertentu dengan keakuratan wilayah, jadi saya mengambil waktu tunggu untuk masalah ini. <br><br><div class="spoiler">  <b class="spoiler_title">Beberapa kata tentang level administratif di geodata (level).</b> <div class="spoiler_text">  Semua negara dibagi menjadi banyak wilayah, yang dibagi menjadi bagian yang lebih kecil lagi.  Secara total, ada 12 lapisan dalam hierarki seperti itu. <br><br>  Misalnya, untuk Rusia: <br><br><ul><li>  Rusia (2) -&gt; Distrik Federal Selatan (3) -&gt; Wilayah Krasnodar (4) -&gt; Distrik Vyselkovsky (6) -&gt; Seni.  Desa (8) </li><li>  Rusia (2) -&gt; Distrik Federal Selatan (3) -&gt; Wilayah Krasnodar (4) -&gt; Krasnodar (6) -&gt; Distrik Prikubansky (9) -&gt; Kopanskaya (10) </li><li>  Prancis (2) -&gt; Metropolis Perancis (3) -&gt; wilayah Normandia (4) -&gt; departemen Orne (6) -&gt; kanton Donfron (7) -&gt; kotamadya Donfron-en-Poiret (8) -&gt; Donfron (9) </li></ul><br>  Unit teritorial di berbagai negara dipanggil dengan caranya sendiri, tetapi untuk saya sendiri, saya menyimpulkan divisi ini: Negara (2) -&gt; Wilayah (4) -&gt; Distrik (6).  Pembagian administratif selanjutnya dibiarkan nanti. <br></div></div><br><h2>  Pengembangan proyek </h2><br>  Saat itu, aplikasi itu hanya kumpulan halaman HTML dengan minimal CSS.  Saya ingin cepat memeriksa idenya, dan tidak repot dengan desain.  Gagasan itu ternyata dapat diwujudkan, dan inilah saatnya untuk membuat cangkang yang indah untuk itu.  Karena  Saya tidak memiliki rasa keindahan di UI, lalu Bootstrap untuk membantu saya.  Tidak ada antarmuka, tetapi muncul, dan bahkan disesuaikan untuk perangkat seluler.  Tapi ini hanya langkah pertama dalam menata frontend. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana rasanya belajar JavaScript pada tahun 2016</a> ?!  Ketika kode tersebut dikompilasi ke dalam dialek lain, ia dibuat templated, direkatkan bersama sehingga nantinya bisa dipotong-potong.  Saya, sebagai backend, takut, tetapi kompleksitas bagian klien direncanakan cukup besar, yang mensyaratkan perlunya menggunakan kerangka kerja atau perpustakaan.  Saya memutuskan untuk Bereaksi karena dua alasan: Saya tidak membutuhkan SPA, tetapi serangkaian komponen untuk halaman yang berbeda, dan saya ingin segera melihat hasilnya.  Tetapi sebelum Anda memulai pemrograman, Anda harus mengatur lingkungan.  Sekarang saya mengerti front-end yang akrab, yang mengatakan bahwa dia mengatur Webpack selama 2 hari.  Ternyata itu bukan lelucon. <br><br>  Pada saat itu, saya menyerah pada persuasi dan menerapkan logika aplikasi menggunakan Redux.  Mungkin ini bukan kesalahan, karena  diizinkan untuk memasukkan topik dengan cepat.  Aturan formal memungkinkan saya untuk menulis kode dan memastikan bahwa kode itu berfungsi tanpa melihat di bawah tenda.  Redux menggunakan middleware-nya mengabstraksi saya dari interaksi jaringan, yang memungkinkan saya untuk memeriksa respons ke server.  Ya, hingga saat ini, klien bekerja sendiri - permintaan ajax mengeluarkan semua data yang diperlukan dan memeriksa jawabannya sendiri.  Pengguna bisa menipu dengan melihat data yang berasal dari server.  Selain itu, saat memuat, data terbang, diperlukan hanya setelah jawaban yang benar.  Setelah menerapkan verifikasi melalui soket web, prosesnya menjadi lebih tepat secara ideologis - jawabannya memverifikasi kode yang tidak tersedia untuk klien.  Untuk pengguna, ini masih tampak langsung: mengirim titik-titik ekstrim poligon ke server, memeriksa apakah mereka memasuki kotak dengan kesalahan, mengemas data untuk kotak info dan poligon terperinci di json dan mentransfernya ke klien - masuk ke ~ 200ms. <br><br><img src="https://habrastorage.org/webt/va/s_/kz/vas_kzccg7izp3-lys7pztcfktm.png" alt="gambar"><br><br>  Setelah mempelajari semua kekuatan javascript, sulit untuk berhenti.  Segera ada ide di mana untuk menambahkan animasi, blok lipat, berkedip, dan versi baru gim.  Salah satunya adalah "Kuis", di mana Anda harus menebak negara dengan nama, bendera, lambang atau modal.  Benar, selama proses pengujian ternyata beberapa daerah tidak memiliki bendera, sementara yang lain tidak memiliki modal, sehingga beberapa negara harus disembunyikan dari daftar yang tersedia.  Pada saat yang sama, mode permainan muncul di peta fisik dunia - tanpa batas negara, untuk pro nyata. <br><br><h2>  Buka sumber data </h2><br>  Ada ~ 50.000 poligon dalam gim ini sekarang, dan saya ingin mengucapkan terima kasih banyak kepada proyek-proyek hebat seperti Wikipedia dan Open Street Map, yang tanpanya mengisi pangkalan tidak akan mungkin.  Persyaratan mendasar adalah untuk menerima dan memperbarui data dari sumber terbuka, yaitu, tanpa pengeditan manual, karena  Saya tidak ingin melakukan logika sinkronisasi yang rumit.  Akibatnya, saya mendapat 2 skrip yang dapat memperbarui kotak info dan poligon. <br><br><h3>  Wikipedia dan SPARQL </h3><br><img src="https://habrastorage.org/webt/vh/-l/-9/vh-l-9bii6guq-jufnz3lcxtkia.png" alt="gambar"><br><br>  Apa basis data negara dan wilayah terbesar?  Wikipedia!  Awalnya, saya ingin menunjukkan kepada pengguna seluruh kotak info, tetapi segera meninggalkan gagasan ini.  Ya, ada hal-hal penting seperti nama, bendera, ibukota, dan hal-hal lain, tetapi ada juga banyak sampah (kode telepon, bentuk pemerintahan, PDB ...).  Saya mencoba mengurai yang sudah dikumpulkan, tetapi menemukan bahwa mereka memiliki struktur yang berbeda.  Ini ternyata menjadi bencana: biaya tenaga kerja untuk implementasi meningkat berkali-kali lipat.  Sudah waktunya untuk berhenti dan berpikir.  Keesokan harinya saya belajar tentang keberadaan bahasa permintaan khusus - SPARQL.  Secara tampilan, ini menyerupai SQL - juga deklaratif, dengan kata kunci <code>SELECT</code> , <code>WHERE</code> , <code>ORDER BY</code> , tetapi bekerja dengan cara yang sangat berbeda.  Contoh kecil yang mengembalikan daftar negara bagian dengan ibukotanya dalam bahasa Inggris dan Rusia: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> ?country ?capital ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> { ?country wdt:P31 wd:Q3624078 . <span class="hljs-keyword"><span class="hljs-keyword">FILTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> {?country wdt:P31 wd:Q3024240} OPTIONAL { ?country wdt:P36/rdfs:label ?capital } . BIND(lang(?capital) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> (?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'ru'</span></span> || ?<span class="hljs-keyword"><span class="hljs-keyword">row</span></span> = <span class="hljs-string"><span class="hljs-string">'en'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> ?capital</code> </pre><br>  Terlihat liar, bukan ?!  Periksa di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Saya bahkan menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">catatan</a> kecil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di blog saya</a> untuk entah bagaimana menyusun pengalaman saya dan membantu masuk ke topik, karena  ada beberapa materi terperinci di Internet.  Anda dapat belajar membaca permintaan semacam itu dengan cukup cepat, tetapi saya menghabiskan akhir pekan untuk menulis sesuatu yang bermakna.  Banyak "keajaiban" dari <code>wd:Q3624078</code> dan atribut lainnya.  Anda perlu tahu bahwa <code>wdt:P31</code> adalah "entitas", dan <code>wd:Q3624078</code> adalah "negara berdaulat".  Orang-orang yang tidak dikenal mulai dengan tanda tanya, dan pemenuhan permintaan itu terdiri dari pencarian tiga kali lipat fakta yang akan memenuhi syarat.  Misalnya <code>?country wdt:P31 wd:Q3024240</code> -" temukan semua benda yang merupakan keadaan historis ";  dan kemudian objek yang sama berpartisipasi dalam tiga kali lipat lainnya <code>?country wdt:P36/rdfs:label ?capital</code> - dari mana modal <code>?country wdt:P36/rdfs:label ?capital</code> . <br><br>  Sekitar seminggu kemudian, saya memiliki skrip versi pertama yang siap, yang mengunduh informasi regional dari Wikipedia.  Dan kemudian masalah lain menjadi jelas - kali ini dengan data.  Beberapa svg tidak memulai dengan <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code> Dan tidak dikenali oleh browser sebagai gambar yang valid.  Untungnya, file sumber dapat diedit.  Tidak ada yang rumit dalam mendaftar di wikipedia.org, tetapi Anda segera menemukan diri Anda di pemandian selama sehari.  Inilah perlindungan mereka terhadap robot.  Jadi malam berikutnya saya memerintah XML dan senang betapa sederhana itu ternyata, dan bendera dan lambang muncul di peta. <br><br><h3>  Poligon </h3><br><img src="https://habrastorage.org/webt/gd/g7/t-/gdg7t-ssoht6cbt3kifldfm_bvk.png" alt="gambar"><br><br>  Jika untuk fakta kita pergi ke Wikipedia, maka untuk geodata - di Open Street Map.  Akan lebih baik untuk mengambil salinan lokal, mempelajari bahasa permintaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">overpass</a> , tetapi saya bahkan tidak bisa membayangkan berapa lama waktu yang dibutuhkan.  Dan Anda juga perlu mengambil hierarki dari suatu tempat ... Untungnya, satu orang baik telah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menyelesaikan masalah ini untuk saya</a> .  Layanan ini bahkan menyediakan API untuk mengambil informasi.  Saya berhasil mengunduh dari sana semua poligon hingga level 6 inklusif (distrik) dan mengisi semuanya di Postgres, sedikit lebih dari 2 Gb keluar.  Itu bukan tanpa petualangan - beberapa poligon sangat besar (misalnya, Kanada memiliki berat lebih dari 100 Mb di GeoJSON yang di-zip) sehingga servernya mogok atau tidak merespons.  Saya harus memotong momen seperti itu secara manual.  Saya mengunduh semua anak dan menggabungkannya ke QGIS.  Omong-omong, ini adalah contoh lain dari proyek open source yang telah banyak membantu saya. <br><br><h2>  Masalah Big Data </h2><br>  Jadi, saya punya database dengan data, saya meluncurkan game dan ... dan tunggu ... lagi saya tunggu ... muncul!  Saya mencoba menyeret poligon - Dia sudah mati, Jim!  Chrome tidak bisa menangani volume poin sebanyak itu dan jatuh.  Strategi dahi tidak lagi berfungsi, saatnya untuk berpikir.  Yang paling jelas adalah mengurangi detail poligon.  Secara empiris diturunkan formula yang tergantung pada area gambar - itu menjadi lebih baik.  Pada komputer yang berfungsi, algoritme berfungsi dengan cepat, sementara server sangat terbatas sumber dayanya.  Redis terhubung, menjadi lebih baik sudah di server.  Tapi terpotong poligon baik untuk Drag'n'Drop, dan ketika diatur ke tempat yang tepat, perbatasan tidak sesuai dengan yang menggambar peta Google.  Nah, ini bisa dielakkan dengan menerapkan formula yang tidak terlalu agresif untuk mengurangi detail.  Karena sudah ada 2 cache, mengapa tidak mencoba untuk cache semua yang mungkin sama sekali ?!  Kotak info (dalam dua bahasa) terbang ke Redis, perbatasan tempat jawaban dihitung, pusat poligon, serta halaman statis situs.  Akibatnya, permainan mulai bekerja lebih cepat, dan banyak beban kerja dihapus dari Postgres, yang secara teoritis bisa menjadi penghambat.  Minus - aplikasi tidak bekerja tanpa Redis sama sekali. <br><br><h2>  Penempatan pertama </h2><br>  Jadi sudah waktunya untuk menunjukkan proyek kepada teman-teman untuk mendapat umpan balik.  Hanya sedikit yang tersisa: hasilkan sitemap.xml, tambahkan robots.txt, hubungkan metrik, tambahkan tombol sosial.  jaringan dan ... sebarkan!  Saya memilih AWS sebagai hosting, sebagai  berharap dapat masuk ke dalam sumber daya gratis yang disediakan.  Dan ini adalah tumpukan yang sangat bagus untuk proyek pemula: <br><br><ul><li>  server aplikasi (t2.micro: 1xCPU, 1 Gb RAM, 20Gb SSD) </li><li>  basis data (db.t2.micro: 1xCPU, 1 Gb RAM, 20Gb SSD) </li><li>  penyimpanan file dengan CDN (5 Gb S3, 50 Gb lalu lintas) </li><li>  server caching (cache.t2.micro: 1xCPU, 0,5 Gb RAM) </li><li>  Elasticsearch + Kibana (t2.small.elasticsearch: 1xCPU, 2 Gb RAM) </li></ul><br>  Ini hanya daftar apa yang berhasil saya gunakan.  Sepanjang jalan, saya memutuskan untuk menyusun rake saya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam bentuk artikel</a> , tetapi dengan cepat mati.  Waktu berlalu dengan sopan, tetapi tidak jelas apakah ada yang membutuhkannya. <br><br>  Sebagai hasilnya, untuk tahun pengabdian saya membayar sesuatu dengan urutan $ 10, dan bahkan itu karena kebodohan.  Tetapi di sini masa percobaan berakhir, dan saya harus pindah, karena  biaya kepemilikan seluruh ekonomi ini mulai mendekati beberapa ratus dolar.  Tarif yang dibandingkan, dan diselesaikan di DigitalOcean.  Untuk saat ini, saya memiliki mesin yang cukup dengan RAM 2 Gb untuk semuanya (server aplikasi, database, dan cache), tetapi saya meninggalkan statika dan CDN di AWS.  Sekarang saya mengetahui bahwa DO juga mendapatkan CDN dan penyimpanan seharga $ 5 / bln, jadi masuk akal untuk berpikir tentang memindahkan bagian ini juga. <br><br><h2>  Transfer ke Sumber Terbuka </h2><br>  Malam Januari ini saya menerima surat dari sekolah Denmark.  Esensinya berasal dari fakta bahwa mereka memiliki $ 100, dan mereka ingin memberikannya kepada saya.  Tetapi ada syarat - kode sumber proyek harus terbuka.  Sampai saat itu, saya bahkan belum memikirkan Open Source.  Beberapa malam pergi untuk memikirkan dan memilih lisensi.  Akibatnya, saya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengunggah sumber di Github di</a> bawah lisensi GPLv3 dan menerima $ 100 yang dijanjikan.  Ini sangat meningkatkan motivasi - proyek saya sangat berguna!  Dan saya bergegas ke tujuan berikutnya - editor game.  Sehingga setiap orang bisa membuat puzzle sendiri.  Misalnya, "Negara-negara yang berpartisipasi dalam Perang Dunia Kedua", "Distrik Wilayah Krasnodar", "Negara-Negara yang Terkurung Darat" ... Tetapi untuk ini, pendaftaran dan akun pribadi primitif diperlukan.  Akibatnya, pengembangan berlangsung selama 3 bulan.  Selama waktu ini, saya menulis sebuh pohon wilayah yang akan menarik data melalui ajax, menghubungkan pelokalan, mempelajari cara menyimpan peta Google sebagai gambar untuk menghasilkan pratinjau dan memotong redux.  Ya, dia membantu saya menangani data di awal, tetapi sekarang lebih cenderung untuk ikut campur.  Saya harus menyeret reduksi untuk menggambar poligon di peta, bersama dengan kode yang akan menangani pergerakan mereka.  Untungnya, menghapus ikatan ke negara global hanya membutuhkan beberapa hari, dan memindahkan kode ke kode lokal bahkan menyederhanakan aplikasi.  Dan tentu saja, ini adalah pengalaman yang baik :) <br><br><h3>  Koneksi Layanan </h3><br>  Ternyata banyak layanan berbayar menyediakan layanan mereka secara gratis untuk proyek sumber terbuka.  Saya akan mendaftar hanya orang-orang yang saya terhubung ke saya sendiri. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penjaga</a> .  Saya pikir layanan ini untuk menangkap kesalahan sudah umum bagi semua orang.  Ketika saya baru saja menyebarkan proyek, logging terdiri dari mengirim jejak stack ke surat.  Ini hanya berfungsi untuk backend, tetapi saya juga ingin melacak bug di frontend.  Dan tidak sia-sia - Saya telah kehabisan batas pesan gratis hanya dalam 2 minggu.  Sebagian besar kesalahan ada di perut perpustakaan peta Google, yang sekilas sangat aneh.  Selama penyelidikan, ternyata itu semua salah saya.  Koreksi berlangsung lebih dari sebulan, tapi itu adalah praktik penanganan kesalahan javascript yang sangat berguna. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">crowdin.com</a> - pelokalan.  Saya berencana untuk membuat proyek ini dapat diakses oleh semua orang.  Termasuk infobox yang ditampilkan dalam bahasa aslinya.  Mengisi mereka dari Wikipedia bukan masalah, tetapi untuk konsistensi saya juga ingin memiliki antarmuka dalam bahasa yang sama, dan sejauh ini telah diterjemahkan hanya ke dalam bahasa Rusia dan Inggris. <br><br><img src="https://habrastorage.org/webt/rq/c-/e7/rqc-e7xybyag2pgp9iaylqfobp4.png" alt="gambar"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CircleCI</a> .  Tidak ada proyek modern yang dapat dilakukan tanpa CI / CD, tes dan penyebaran otomatis.  Saya memilih CircleCI semata-mata karena saya sudah bekerja dengan TravisCI ketika saya menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perpustakaan untuk bekerja dengan Yandex.Disk</a> .  Saya mendapat kesan bahwa itu lebih cocok untuk menguji perpustakaan, sebagai  mudah untuk mengatur matriks lingkungan di mana kode harus diuji.  Tetapi dengan tes itu sendiri saya punya masalah - jumlahnya tidak sebanyak yang kita inginkan, meskipun infrastrukturnya sudah siap. <br><br><img src="https://habrastorage.org/webt/39/og/14/39og14nvsqwi9mkruslrydqjhh0.png" alt="gambar"><br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Baju</a> .  Layanan visualisasi cakupan kode.  Mampu juga memberikan label untuk dimasukkan ke dalam proyek README.md. <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SonarQube</a> .  Pemanen untuk kontrol kualitas kode.  Ini memeriksa kode sesuai dengan berbagai aturan, mempertimbangkan kompleksitas cyclomatic, memantau cakupan dengan tes dan bahkan mengenali duplikasi kode!  Layanan yang sangat menarik, yang belum sempat saya pahami sepenuhnya. <br><br><img src="https://habrastorage.org/webt/og/lk/gp/oglkgp9ndcldy3r14m5iojv9_xi.png" alt="gambar"><br><br>  - Bot Github.  Sejauh ini, hanya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dependabot yang</a> terhubung, yang memperbarui dependensi. <br><br><img src="https://habrastorage.org/webt/r1/eh/9j/r1eh9jidp-k_nzmyhplghbdpsiq.png" alt="gambar"><br><br>  Saya menyarankan di komentar untuk membagikan daftar layanan dan bot pada proyek mereka. <br><br><h2>  Bug </h2><br>  Analisis bug dan masalah layak mendapatkan artikel terpisah.  Ada yang lucu, rumit, dan sulit diperbaiki (oleh karena itu, Chukotka selalu berdiri di tempatnya).  Saat ini, ada satu yang benar-benar mengganggu pengguna.  Setelah menerima jawaban, poligon dihapus dan diciptakan kembali (di perpustakaan react-google-maps), dan jika pada saat itu pengguna menyeretnya, peta google terus mengasumsikan bahwa prosesnya belum selesai.  Sepertinya dalam proses drag'n'drop poligon menghilang, dan Anda tidak bisa lagi mengambil yang lain.  Anda dapat, tentu saja, meletakkan kunci pada pemrosesan respons dalam proses drag'n'drop, tetapi ini dijamin akan mematikan game multi-pemain, implementasi yang saat ini saya kerjakan.  Saya mencoba menemukan cara untuk menghentikan drag and drop secara terprogram, tetapi pada akhirnya saya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengajukan pertanyaan tentang StackOverflow</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bug di Google Maps</a> dengan harapan mereka akan memperhatikannya.  Sampai saat itu, ia menambahkan tombol “game is broken!”, Yang menginisialisasi ulang seluruh peta, tetapi tidak mereset hasilnya. <br><br><h2>  Apa selanjutnya </h2><br><ol><li>  Desain  Saya akui bahwa dengan ini, semuanya benar-benar buruk.  Adalah perlu untuk menyewa seorang desainer dan desainer tata letak, karena saya sendiri tidak berteman dengan tata letak dan tata letak. </li><li>  Monetisasi.  Awalnya, saya tidak merencanakan apa pun.  Proyek ini didedikasikan untuk pendidikan dasar, yang menurut saya harus dapat diakses oleh semua orang.  Saya sangat terinspirasi oleh surat dari sekolah Denmark, tetapi hampir setahun berlalu, dan selama waktu itu hanya ada satu transfer $ 5.  Ya, saya tidak percaya itu bisa membayar server.  Namun, ia memulai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kampanye di Patreon</a> .  Pada saat yang sama, Anda mungkin dapat berpikir tentang memperkenalkan peluang berbayar untuk guru atau organisasi.  Sebagai contoh, saya memiliki pengalaman berintegrasi dengan Learning Management Systems - satu set platform yang memungkinkan Anda membuat kursus, dan sangat populer di Eropa dan Amerika Serikat.  Sejauh yang saya mengerti, meskipun kode sumber juga di bawah GPL di Github, ini tidak mencegah saya, sebagai penulis, untuk mengembangkan versi komersial paralel. </li><li>  Ponsel.  Saya ingin merilis aplikasi untuk iOS / Android.  Dilihat oleh metrik Yandex, seperempat pengguna mencoba bermain dari ponsel atau tablet, tetapi ternyata mereka mengalami kesulitan. </li><li>  Pengembangan.  Semua pekerjaan dilakukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> .  Saya ingin terus mengembangkan proyek, tetapi melakukannya sendirian itu sulit.  Rencana tersebut termasuk menambahkan multipemain, membuat tag, memberi peringkat, dan menyaring dalam Lokakarya, menambahkan poligon untuk peta fisik (gunung, laut, semenanjung).  Masih ada banyak hal menarik, jadi salah satu tujuan artikel ini adalah untuk menemukan orang yang berpikiran sama.  Pilihan lain adalah pergi ke yayasan, misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Python Software Foundation</a> dan mendapatkan hibah. </li></ol><br>  Inilah yang saat ini.  Terima kasih sudah membaca sampai akhir!  Anda dapat bermain di sini - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">geopuzzle.org</a> , dan lihat kode sumber di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> . <br><br><blockquote><img src="https://habrastorage.org/webt/jy/sd/rr/jysdrr7tqgfjt50wtcshw89ctho.png" align="left"><h3>  Menit perawatan UFO </h3><br>  Bahan ini dapat menyebabkan perasaan yang saling bertentangan, jadi sebelum menulis komentar, segarkan sesuatu yang penting dalam ingatan Anda: <br><br><div class="spoiler">  <b class="spoiler_title">Cara menulis komentar dan bertahan hidup</b> <div class="spoiler_text"><ul><li>  Jangan menulis komentar ofensif, jangan pribadi. </li><li>  Menahan diri dari bahasa cabul dan perilaku beracun (bahkan dalam bentuk terselubung). </li><li>  Untuk melaporkan komentar yang melanggar aturan situs, gunakan tombol "Laporkan" (jika tersedia) atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">formulir umpan balik</a> . </li></ul><br>  Apa yang harus dilakukan jika: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">minus karma</a> |  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">akun yang diblokir</a> <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kode penulis Habr</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habraetiket</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Versi lengkap dari aturan situs</a> </div></div></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id427209/">https://habr.com/ru/post/id427209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id427195/index.html">Besok kami akan mulai membunuhmu, atau mengapa kami membutuhkan insinyur</a></li>
<li><a href="../id427199/index.html">Tutup kenalan dengan penyortir kartu punch elektromekanis (kunjungan ke awal abad XX)</a></li>
<li><a href="../id427203/index.html">"Light Music": berbicara tentang empat alat elektronik yang tidak biasa dengan fotosel</a></li>
<li><a href="../id427205/index.html">Habrakvest untuk menghormati peringatan 20 tahun Grup Mail.Ru: pemenang dan jawaban</a></li>
<li><a href="../id427207/index.html">Karyawan Rockstar membela perusahaan setelah kritik selama 100 jam minggu kerja</a></li>
<li><a href="../id427211/index.html">Elektron adalah flash untuk desktop</a></li>
<li><a href="../id427215/index.html">Layanan microser perlu tumbuh, bukan memulainya</a></li>
<li><a href="../id427217/index.html">Analisis Kinerja Server WSGI: Bagian Dua</a></li>
<li><a href="../id427219/index.html">Tidak berguna menangguhkan pesan non-pemblokiran di MPI: analisis ringan dan tutorial untuk mereka yang sedikit "dalam subjek"</a></li>
<li><a href="../id427221/index.html">Apa yang saya sadari dalam perjalanan saya ke mimpi kecerdasan buatan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>