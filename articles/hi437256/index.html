<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯдз ЁЯСйЁЯП╝тАНЁЯТ╗ ЁЯСитАНЁЯСитАНЁЯСжтАНЁЯСж рдПрдХ рдХреЙрд░реНрдЯреЗрдХреНрд╕- M0 / M3 / M4 / M7 рдкрд░ рдореЗрдореЛрд░реА рдкрддреЛрдВ рдХреЛ рдорд╛рдиреНрдп рдХрд░рдирд╛ ЁЯЪо ЁЯНм ЁЯШа</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдирдорд╕реНрдХрд╛рд░, рд╣реЗрдмреНрд░! 

 рджреВрд╕рд░реЗ рджрд┐рди рд╢рд╛рд╕рди рдХреА рд╢рд┐рдерд┐рд▓рддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рдПрдХ рдкрдбрд╝реЛрд╕реА рдкреЛрд╕реНрдЯ рдХреА рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рдЖрдХреНрд░реЛрд╢ рдХрд┐ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓реЗрдЦ рд╕рднреА рдПрд▓рдИрдбреА рджреНрд╡рд╛рд░рд╛...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХ рдХреЙрд░реНрдЯреЗрдХреНрд╕- M0 / M3 / M4 / M7 рдкрд░ рдореЗрдореЛрд░реА рдкрддреЛрдВ рдХреЛ рдорд╛рдиреНрдп рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437256/">  рдирдорд╕реНрдХрд╛рд░, рд╣реЗрдмреНрд░! <br><br>  рджреВрд╕рд░реЗ рджрд┐рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╢рд╛рд╕рди</a> рдХреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╢рд┐рдерд┐рд▓рддрд╛ рдХреЗ</a> рдмрд╛рд░реЗ рдореЗрдВ, рдПрдХ рдкрдбрд╝реЛрд╕реА рдкреЛрд╕реНрдЯ рдХреА рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рдЖрдХреНрд░реЛрд╢ рдХрд┐ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓реЗрдЦ рд╕рднреА рдПрд▓рдИрдбреА рджреНрд╡рд╛рд░рд╛ рд╣реА рдкрд▓рдХ рдЭрдкрдХ рд░рд╣реЗ рд╣реИрдВ, рдФрд░ рдореЗрд░реЗ рдорд╛рдирдХ рдмреНрд▓реЙрдЧ рдХреА рдЕрд╕рд╛рдордпрд┐рдХ рдореГрддреНрдпреБ рднреА рд╣реИ, рдЬреЛ рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЖрд▓рд╕реА рд╣реИ, рдореИрдВ рдпрд╣рд╛рдВ рдПрдХ рдЕрдлрд╕реЛрд╕рдЬрдирдХ рдЫреЛрдЯреА рд░реЛрд╢рдиреА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╕рд╛рдордЧреНрд░реА рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реВрдВрдЧрд╛ред рдХреЛрд░реНрдЯреЗрдХреНрд╕-рдПрдо рдХреЛрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдореЗрдВ рдПрдХ рдкреНрд░реЗрд╕ рдЯреНрд░рд┐рдХ - рд╡реИрдзрддрд╛ рдХреЗ рд▓рд┐рдП рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдкрддреЗ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rl/he/2w/rlhe2wjgxij3ej65fi5t8lverts.jpeg"></div><br>  рдХреЙрд░реНрдЯреЗрдХреНрд╕-рдПрдо рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ (рд╕рднреА) рдореЗрдВ рдХрд╣реАрдВ рднреА рд╡рд░реНрдгрд┐рдд рдирд╣реАрдВ рдХрд┐рдП рдЧрдП рдХреБрдЫ рдХрд╛рд░рдг рд╕реЗ рддреИрдпрд╛рд░ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рдФрд░ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рд╕реНрдореГрддрд┐ рдореЗрдВ рдкрддреЗ рдХреА рд╢реБрджреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рд╕рд╛рде, рдЖрдк рдлреНрд▓реИрд╢, рд░реИрдо рдФрд░ рдИрдИрдкреНрд░реЙрдо рдХреЗ рдЖрдХрд╛рд░ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд┐рд╢рд┐рд╖реНрдЯ рдмрд╛рд╣реНрдп рдЙрдкрдХрд░рдгреЛрдВ рдФрд░ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдкреНрд░реЛрд╕реЗрд╕рд░ рдкрд░ рдЙрдкрд╕реНрдерд┐рддрд┐ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдУрдПрд╕ рдХреЗ рд╕рдордЧреНрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреЛ рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реБрдП рдЧрд┐рд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╣рд░рд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЖрджрд┐ред <br><a name="habracut"></a><br>  рд╕рд╛рдорд╛рдиреНрдп рдореЛрдб рдореЗрдВ, рдЬрдм рдЖрдк рдХреЙрд░реНрдЯреЗрдХреНрд╕-рдПрдо 3 / рдПрдо 4 / рдПрдо 7 рдкрд░ рдЧреИрд░-рдореМрдЬреВрдж рдкрддреЗ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдмрд╕рдлреЙрд▓реНрдЯ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рд╣реИрдВрдбрд▓рд░ рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдпрд╣ рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рдХреЛ рдЖрдЧреЗ рдмрдврд╝рд╛рддрд╛ рд╣реИред  рдХреЙрд░реНрдЯреЗрдХреНрд╕-рдПрдо 0 рдкрд░ рдХреЛрдИ "рд╡рд┐рд╕реНрддреГрдд" рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рд╣реИрдВ (рдореЗрдордлреЙрд▓реНрдЯ, рдмрд╕рдлреЙрд▓реНрдЯ, рдпреВрд╕реЗрдЬрдлреЙрд▓реНрдЯ), рдФрд░ рдХреЛрдИ рднреА рд╡рд┐рдлрд▓рддрд╛ рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рдХреЗ рддреБрд░рдВрдд рдЖрдЧреЗ рдмрдврд╝рддреА рд╣реИред <br><br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЖрдк рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ - рдпрд╣ рдПрдХ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╡рд┐рдлрд▓рддрд╛ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдФрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЖрдЧреЗ рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рд▓реЗрдХрд┐рди рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдореЗрдВ рдпрд╣ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><h4>  рдХреЛрд░реНрдЯреЗрдХреНрд╕-рдПрдо 3 рдФрд░ рдХреЛрд░реНрдЯреЗрдХреНрд╕-рдПрдо 4: рдЕрдзреВрд░реА рдмрд╕рдлреЙрд▓реНрдЯ </h4><br>  рдХреЛрд░реНрдЯреЗрдХреНрд╕-рдПрдо 3 рдФрд░ рдЙрдЪреНрдЪрддрд░ рдкрд░, рдкрддреЗ рдХреА рд╡реИрдзрддрд╛ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдирд╛ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ - рдЖрдкрдХреЛ FAULTMASK рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рднреА рдЕрдкрд╡рд╛рджреЛрдВ (рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░, рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ, рдЧреИрд░-рдореБрдЦреМрдЯрд╛) рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ BusFault рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдЕрдХреНрд╖рдо рдХрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рдЪреЗрдХ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдкрддреЗ рдкрд░ рдкреНрд░рд╣рд╛рд░ рдХрд░реЗрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ BFAR рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ BFARVALID рдЭрдВрдбрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред , рдпрд╛рдиреА рдмрд╕ рдЧрд▓рддреА рдХрд╛ рдкрддрд╛ рд░рдЬрд┐рд╕реНрдЯрд░ред  рдпрджрд┐ рдЖрдкрдиреЗ рдЗрд╕реЗ рд▓реЗ рд▓рд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдмрд╕рдлреЙрд▓реНрдЯ рдерд╛, рдЕрд░реНрдерд╛рдд  рдкрддрд╛ рдЧрд▓рдд рд╣реИред <br><br>  рдХреЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ, рдорд╛рдирдХ (рдЧреИрд░-рд╡рд┐рдХреНрд░реЗрддрд╛) CMSIS рд╕реЗ рд╕рднреА рдкрд░рд┐рднрд╛рд╖рд┐рдд рдФрд░ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдХрд┐рд╕реА рднреА M3, M4 рдпрд╛ M7 рдкрд░ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cpu_check_address</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">volatile</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *address)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* Cortex-M3, Cortex-M4, Cortex-M4F, Cortex-M7 are supported */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> BFARVALID_MASK = (<span class="hljs-number"><span class="hljs-number">0x80</span></span> &lt;&lt; SCB_CFSR_BUSFAULTSR_Pos); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> is_valid = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Clear BFARVALID flag by writing 1 to it */</span></span> SCB-&gt;CFSR |= BFARVALID_MASK; <span class="hljs-comment"><span class="hljs-comment">/* Ignore BusFault by enabling BFHFNMIGN and disabling interrupts */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> mask = __get_FAULTMASK(); __disable_fault_irq(); SCB-&gt;CCR |= SCB_CCR_BFHFNMIGN_Msk; <span class="hljs-comment"><span class="hljs-comment">/* probe address in question */</span></span> *address; <span class="hljs-comment"><span class="hljs-comment">/* Check BFARVALID flag */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((SCB-&gt;CFSR &amp; BFARVALID_MASK) != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/* Bus Fault occured reading the address */</span></span> is_valid = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* Reenable BusFault by clearing BFHFNMIGN */</span></span> SCB-&gt;CCR &amp;= ~SCB_CCR_BFHFNMIGN_Msk; __set_FAULTMASK(mask); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> is_valid; }</code> </pre> <br><h4>  Cortex-M0 рдФрд░ Cortex-M0 + </h4><br>  Cortex-M0 рдФрд░ Cortex-M0 + рдХреЗ рд╕рд╛рде, рд╕рдм рдХреБрдЫ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдКрдкрд░ рдХрд╣рд╛ рдерд╛, рдЙрдирдХреЗ рдкрд╛рд╕ BusFault рдФрд░ рд╕рднреА рд╕рдВрдмрдВрдзрд┐рдд рд░рдЬрд┐рд╕реНрдЯрд░ рдирд╣реАрдВ рд╣реИрдВ, рдФрд░ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рддреБрд░рдВрдд HardFault рддрдХ рдмрдврд╝рд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд░рд╛рд╕реНрддрд╛ рд╣реИ - рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдЕрдкрд╡рд╛рдж рдЬрд╛рдирдмреВрдЭрдХрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдЙрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рд╕рдиреЗ рдЗрд╕реЗ рдХреЙрд▓ рдХрд┐рдпрд╛, рд╡рд╣рд╛рдВ рдПрдХ рдЭрдВрдбрд╛ рдЧреБрдЬрд░ рд░рд╣рд╛ рдерд╛ рдЬреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рд╡рд╣рд╛рдВ рдерд╛ред <br><br>  рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд╕реЗрдВрдмрд▓рд░ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд░рдЬрд┐рд╕реНрдЯрд░ R5 рдХреЛ 1 рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ R1 рдФрд░ R2 рдХреЛ рджреЛ "рдореИрдЬрд┐рдХ рдирдВрдмрд░" рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВред  рдпрджрд┐ рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рдЪреЗрдХ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдкрддреЗ рдкрд░ рдорд╛рди рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ рдЖрд░ 1 рдФрд░ рдЖрд░ 2 рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП, рдФрд░ рдпрджрд┐ рд╡реЗ рдЖрд╡рд╢реНрдпрдХ рд╕рдВрдЦреНрдпрд╛рдПрдВ рдкрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрд░ 5 рдХреЛ рд╢реВрдиреНрдп рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВред  R5 рдХрд╛ рдорд╛рди рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЪрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ syshech рдХреЛрдб рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдХрд┐ рдЗрд╕ рд░рдЬрд┐рд╕реНрдЯрд░ рд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдмрдВрдзрд╛ рд╣реБрдЖ рд╣реИ, рдХреЛрдбрд╛рдВрддрд░рдХ рдореЗрдВ рдЗрдХрдЯреНрдареЗ рд╣реЛрдиреЗ рдХрд╛ рдкрддрд╛ рдирд┐рд╣рд┐рдд рд╣реИ, рд╣рдо рд╕рд┐рд░реНрдл рдпрд╣ рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ arm-none-eabi рдореЗрдВ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдкрд╣рд▓рд╛ рдкреИрд░рд╛рдореАрдЯрд░ R0 рдореЗрдВ рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cpu_check_address</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">volatile</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *address)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* Cortex-M0 doesn't have BusFault so we need to catch HardFault */</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)address; <span class="hljs-comment"><span class="hljs-comment">/* R5 will be set to 0 by HardFault handler */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* to indicate HardFault has occured */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">register</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> result __asm(<span class="hljs-string"><span class="hljs-string">"r5"</span></span>); __<span class="hljs-function"><span class="hljs-function">asm__ </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r5, =1 \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* set default R5 value */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r1, =0xDEADF00D \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* set magic number */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r2, =0xCAFEBABE \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* 2nd magic to be sure */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldrb r3, [r0] \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* probe address */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br>  рдЕрдкрдиреЗ рд╕рд░рд▓рддрдо рд░реВрдк рдореЗрдВ рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рд╣реИрдВрдбрд▓рд░ рдХрд╛ рдХреЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs">__attribute__((naked)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hard_fault_default</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* Get stack pointer where exception stack frame lies */</span></span> __<span class="hljs-function"><span class="hljs-function">asm__ </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* decide if we need MSP or PSP stack */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"movs r0, #4 \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* r0 = 0x4 */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"mov r2, lr \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* r2 = lr */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"tst r2, r0 \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* if(lr &amp; 0x4) */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"bne use_psp \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* { */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"mrs r0, msp \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* r0 = msp */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"b out \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* } */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" use_psp: \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* else { */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"mrs r0, psp \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* r0 = psp */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" out: \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* } */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* catch intended HardFaults on Cortex-M0 to probe memory addresses */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r1, [r0, #0x04] \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* read R1 from the stack */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r2, =0xDEADF00D \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* magic number to be found */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"cmp r1, r2 \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* compare with the magic number */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"bne regular_handler \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* no magic -&gt; handle as usual */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r1, [r0, #0x08] \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* read R2 from the stack */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r2, =0xCAFEBABE \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* 2nd magic number to be found */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"cmp r1, r2 \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* compare with 2nd magic number */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"bne regular_handler \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* no magic -&gt; handle as usual */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r1, [r0, #0x18] \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* read PC from the stack */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"add r1, r1, #2 \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* move to the next instruction */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"str r1, [r0, #0x18] \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* modify PC in the stack */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ldr r5, =0 \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* set R5 to indicate HardFault */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"bx lr \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* exit the exception handler */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">" regular_handler: \n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* here comes the rest of the fucking owl */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span></code> </pre> <br>  рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд░ рдЫреЛрдбрд╝рдиреЗ рдХреЗ рдХреНрд╖рдг рдореЗрдВ, рдХреЛрд░реНрдЯреЗрдХреНрд╕ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЛ рдлреЗрдВрдХрддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ рд╕реНрдЯреИрдХ рдкрд░ рд╣реИрдВрдбрд▓рд░ (R0-R3, R12, LR, PC ...) рджреНрд╡рд╛рд░рд╛ рджреВрд╖рд┐рдд рд╣реЛрдиреЗ рдХреА рдЧрд╛рд░рдВрдЯреА рд╣реИред  рдкрд╣рд▓рд╛ рдЯреБрдХрдбрд╝рд╛ - рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рддреИрдпрд╛рд░ рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рд╣реИ, рд╢реБрджреНрдз рдирдВрдЧреЗ рдзрд╛рддреБ рдХреЗ рдиреАрдЪреЗ рд▓рд┐рдЦреЗ рдЧрдП рд▓реЛрдЧреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░ - рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕рд╛ рд╕реНрдЯреИрдХ: рдУрдПрд╕ рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп, рдпрд╣ рдпрд╛ рддреЛ рдПрдордПрд╕рдкреА рдпрд╛ рдкреАрдПрд╕рдкреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдЙрдирдХреЗ рдкрд╛рд╕ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкрддреЗ рд╣реИрдВред  рдирдВрдЧреЗ рдзрд╛рддреБ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ, рдПрдордПрд╕рдкреА рд╕реНрдЯреИрдХ (рдореЗрди рд╕реНрдЯреИрдХ рдкреЙрдЗрдВрдЯрд░) рдЖрдорддреМрд░ рдкрд░ рдПрдХ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ, рдмрд┐рдирд╛ рдЬрд╛рдБрдЪ рдХреЗ - рдХреНрдпреЛрдВрдХрд┐ PSP (рдкреНрд░реЛрд╕реЗрд╕ рд╕реНрдЯреИрдХ рдкреЙрдЗрдВрдЯрд░) рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдХрдореА рдХреЗ рдХрд╛рд░рдг рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рд╡рд╛рдВрдЫрд┐рдд рд╕реНрдЯреИрдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдФрд░ R0 рдореЗрдВ рдЗрд╕рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдордиреЗ рдЗрд╕рдореЗрдВ рд╕реЗ рдорд╛рдиреЛрдВ R1 (рдСрдлрд╕реЗрдЯ 0x04) рдФрд░ R2 (рдСрдлрд╕реЗрдЯ 0x08) рдХреЛ рдкрдврд╝рд╛, рдЬрд╛рджреВ рд╢рдмреНрджреЛрдВ рд╕реЗ рдЗрд╕рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВ, рдпрджрд┐ рджреЛрдиреЛрдВ рдореИрдЪ - рд╣рдо рд╕реНрдЯреИрдХ рд╕реЗ рдкреАрд╕реА рдорд╛рди (рдСрдлрд╕реЗрдЯ 0x18) рдкрдврд╝рддреЗ рд╣реИрдВ, 2 рдЬреЛрдбрд╝реЗрдВ (2 рдмрд╛рдЗрдЯреНрд╕ - рдХреЛрд░реНрдЯреЗрдХреНрд╕-рдПрдо * рдкрд░ рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдЖрдХрд╛рд░) рдФрд░ рдЗрд╕реЗ рд╡рд╛рдкрд╕ рд╕реНрдЯреИрдХ рдкрд░ рд╕рд╣реЗрдЬреЗрдВред  рдпрджрд┐ рдРрд╕рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрдм рд╣рдо рд╣реИрдВрдбрд▓рд░ рд╕реЗ рд▓реМрдЯрддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдЦреБрдж рдХреЛ рдЙрд╕реА рдирд┐рд░реНрджреЗрд╢ рдкрд░ рдкрд╛рдПрдВрдЧреЗ рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЕрдкрд╡рд╛рдж рдХрд╛ рдХрд╛рд░рдг рдерд╛, рдФрд░ рд╣рдо рд╣рдореЗрд╢рд╛ рд╣рд▓рдХреЛрдВ рдореЗрдВ рдЪрд▓реЗрдВрдЧреЗред  рдкрд░рд┐рд╢рд┐рд╖реНрдЯ 2 рд╣рдореЗрдВ рд╡рд╛рдкрд╕реА рдХреЗ рд╕рдордп рдЕрдЧрд▓реЗ рдирд┐рд░реНрджреЗрд╢ рдкрд░ рд▓реЗ рдЬрд╛рддрд╛ рд╣реИред <br><br>  <i><b>* рдЕрджреНрдпрддрдиред</b></i>  <i>рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ, рдХреЙрд░реНрдЯреЗрдХреНрд╕-рдПрдо рдкрд░ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рд╡рд╛рд▓ рдЙрдард╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рдореИрдВ рдпрд╣рд╛рдВ рд╕рд╣реА рдЙрддреНрддрд░ рджреВрдВрдЧрд╛: рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рджреБрд░реНрдШрдЯрдирд╛ рдХрд╛ рдХрд╛рд░рдг рдПрд▓рдбреАрдЖрд░рдмреА рдирд┐рд░реНрджреЗрд╢ рд╣реИ, рдЬреЛ рджреЛ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ - 16-рдмрд┐рдЯ рдФрд░ 32-рдмрд┐рдЯ рдореЗрдВ ARMv7-M рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИред</i>  <i>рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╢рд░реНрдд рдкреВрд░реА рд╣реЛрдиреЗ рдкрд░ рджреВрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрдирд╛ рдЬрд╛рдПрдЧрд╛:</i> <i><br><br></i> <ul><li>  <i>рд▓реЗрдЦрдХ рдиреЗ LDRB рдХреЗ рдмрдЬрд╛рдп рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрджреЗрд╢ LDRB рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ред (рд╣рдо рдирд╣реАрдВ рдХрд░рддреЗ)</i> </li><li>  <i>R7 рдХреЗ рдКрдкрд░ рдХреЗ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рд╣рдорд╛рд░реЗ рд▓рд┐рдП - R0 рдФрд░ R3)</i> </li><li>  <i>31 рдмрд╛рдЗрдЯреНрд╕ рд╕реЗ рдЕрдзрд┐рдХ рдСрдлрд╕реЗрдЯ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ (рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдСрдлрд╝рд╕реЗрдЯ рдирд╣реАрдВ рд╣реИ)</i> </li></ul> <i><br><br></i>  <i>рдЕрдиреНрдп рд╕рднреА рдорд╛рдорд▓реЛрдВ рдореЗрдВ (рдЕрд░реНрдерд╛рдд, рдЬрдм рдСрдкрд░реЗрд╢рдиреНрд╕ рдирд┐рд░реНрджреЗрд╢ рдХреЗ 16-рдмрд┐рдЯ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдкреНрд░рд╛рд░реВрдк рдХреЛ рдлрд┐рдЯ рдХрд░рддреЗ рд╣реИрдВ), рдХреЛрдбрд╛рдВрддрд░рдХ <b>рдХреЛ</b> 16-рдмрд┐рдЯ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЪрдпрди <b>рдХрд░рдирд╛ рд╣реЛрдЧрд╛</b> ред</i> <i><br><br></i>  <i>рдЗрд╕рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдореЗрд╢рд╛ рдПрдХ 2-рдмрд╛рдЗрдЯ рдЕрдиреБрджреЗрд╢ рд╣реЛрдЧрд╛ рдЬрд┐рд╕реЗ рдКрдкрд░ рд▓реЗ рдЬрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк рдХреЛрдб рдХреЛ рджреГрдврд╝рддрд╛ рд╕реЗ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╡рд┐рдХрд▓реНрдк рд╕рдВрднрд╡ рд╣реИрдВред</i> <br><br>  рдЕрдЧрд▓рд╛, рдЖрд░ 5 рдореЗрдВ 0 рд▓рд┐рдЦреЗрдВ, рдЬреЛ рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рдореЗрдВ рдЖрдиреЗ рдХреЗ рд╕рдВрдХреЗрддрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИред  R3 рдХреЗ рдмрд╛рдж рдХреЗ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЛ рд╡рд┐рд╢реЗрд╖ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рд╕реЗ рдкрд╣рд▓реЗ рд╕реНрдЯреИрдХ рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЬрдм рд╣реИрдВрдбрд▓рд░ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рддреЗ рд╣реИрдВ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдмрд╣рд╛рд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдЦрд░рд╛рдм рдХрд░рдиреЗ рдпрд╛ рдЦрд░рд╛рдм рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░рд╛ рд╡рд┐рд╡реЗрдХ рдирд╣реАрдВ рд╣реИред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо R5 рдХреЛ 1 рд╕реЗ 0 рддрдХ рдЙрджреНрджреЗрд╢реНрдпрдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдмрджрд▓рддреЗ рд╣реИрдВред <br><br>  рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВрдбрд▓рд░ рд╕реЗ рд╡рд╛рдкрд╕реА рдмрд┐рд▓реНрдХреБрд▓ рдПрдХ рддрд░реАрдХреЗ рд╕реЗ рдХреА рдЬрд╛рддреА рд╣реИред  рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╕рдордп, рдПрдХ рд╡рд┐рд╢реЗрд╖ рдорд╛рди LRC рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ EXC_RETURN рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╣реИрдВрдбрд▓рд░ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдкреАрд╕реА рдкрд░ рд▓рд┐рдЦрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ - рдФрд░ рди рдХреЗрд╡рд▓ рдЗрд╕реЗ рд▓рд┐рдЦреЗрдВ, рдмрд▓реНрдХрд┐ рдЗрд╕реЗ POP рдпрд╛ BX рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдХрд░реЗрдВ (рдЕрд░реНрдерд╛рдд, "mov pc, lr, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ")ред , рд╣рд╛рд▓рд╛рдВрдХрд┐ рдкрд╣рд▓реА рдмрд╛рд░ рдпрд╣ рдЖрдкрдХреЛ рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ)ред  рдмреАрдПрдХреНрд╕ рдПрд▓рдЖрд░ рдПрдХ рдЕрд░реНрдерд╣реАрди рдкрддреЗ рдкрд░ рдЬрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ (рдПрд▓рдЖрд░ рдореЗрдВ 0xFFFFFFF1 рдХреА рддрд░рд╣ рдХреБрдЫ рд╣реЛрдЧрд╛ рдЬрд┐рд╕рдХрд╛ рдЙрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкрддреЗ рд╕реЗ рдХреЛрдИ рд▓реЗрдирд╛-рджреЗрдирд╛ рдирд╣реАрдВ рд╣реИ рдЬреЛ рд╣рдореЗрдВ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ), рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкреНрд░реЛрд╕реЗрд╕рд░ рдкреАрд╕реА рдкрд░ рдЗрд╕ рдорд╛рди рдХреЛ рджреЗрдЦрддрд╛ рд╣реИ (рдЬрд╣рд╛рдВ рдпрд╣ рдЬрд╛рдПрдЧрд╛) рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ), рдпрд╣ рд╕реНрдЯреИрдХ рд╕реЗ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЛ рдмрд╣рд╛рд▓ рдХрд░реЗрдЧрд╛ рдФрд░ рд╣рдорд╛рд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдЧрд╛ - рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЕрдЧрд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рд╣рдордиреЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЗрд╕ рд╕реНрдЯреИрдХ рдореЗрдВ рдкреАрд╕реА рдХреЛ 2 рд╕реЗ рдмрдврд╝рд╛ рджрд┐рдпрд╛ рд╣реИред <br><br>  рдЖрдк рдирд┐рд╢реНрдЪрд┐рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░реВрдк рд╕реЗ</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬрд╣рд╛рдВ</a> рд╕рднреА рдХрд╛рд░реНрдпрд╛рд▓рдпреЛрдВ рдФрд░ рдЖрджреЗрд╢реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ</a> рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдареАрдХ рд╣реИ, рдпрд╛ рдпрджрд┐ рдореИрдЬрд┐рдХ рдирдВрдмрд░ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рд╕рдм рдХреБрдЫ regular_handler рдкрд░ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╕рд╛рдорд╛рдиреНрдп рд╣рд╛рд░реНрдбрдлреЙрд▓реНрдЯ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ - рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдпрд╣ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬреЛ рдХрдВрд╕реЛрд▓ рдХреЛ рдорд╛рди рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░рддрд╛ рд╣реИ, рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд╕рд╛рде рдЖрдЧреЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ, рдЖрджрд┐ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд░рддрд╛ рд╣реИред <br><br><h4>  рд░реИрдо рдЖрдХрд╛рд░ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг </h4><br>  рдЗрд╕ рд╕рдмрдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рд░рд▓ рдФрд░ рд╕реАрдзрд╛ рд╣реИред  рд╣рдо рдПрдХ рдлрд░реНрдорд╡реЗрдпрд░ рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬреЛ рдХрдИ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдорд╛рддреНрд░рд╛ рдореЗрдВ рд░реИрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рд╣рд░ рдмрд╛рд░ рдПрдХ рдкреВрд░реНрдг рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рд░реИрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП? <br><br>  рд╣рд╛рдБ рдЖрд╕рд╛рди: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> uint32_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cpu_find_memory_size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *base, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> block, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxsize)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *address = base; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { address += block; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!cpu_check_address(address)) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>)(address - base) &lt; maxsize); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>)(address - base); } <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> get_cpu_ram_size(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cpu_find_memory_size((<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)SRAM_BASE, <span class="hljs-number"><span class="hljs-number">4096</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>); }</code> </pre> <br>  рдпрд╣рд╛рдВ рдЕрдзрд┐рдХрддрдо рдЬрд░реВрд░рдд рд╣реИ рддрд╛рдХрд┐ рдЗрд╕рдХреЗ рдФрд░ рдкрддреЗ рдХреЗ рдЕрдЧрд▓реЗ рдмреНрд▓реЙрдХ рдХреЗ рдмреАрдЪ рд░реИрдо рдХреА рдЕрдзрд┐рдХрддрдо рд╕рдВрднрд╡ рдорд╛рддреНрд░рд╛ рдкрд░ рдХреЛрдИ рдЕрдВрддрд░рд╛рд▓ рди рд╣реЛ, рдЬрд┐рд╕ рдкрд░ cpu_check_address рдЯреВрдЯ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдпрд╣ 80 KB рд╣реИред  рд╕рднреА рдкрддреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХрд╛ рднреА рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИ - рдмрд╕ рджреЛ рдирд┐рдпрдВрддреНрд░рдХ рдореЙрдбрд▓ рдХреЗ рдмреАрдЪ рдиреНрдпреВрдирддрдо рд╕рдВрднрд╡ рдХрджрдо рдХреНрдпрд╛ рд╣реИ, рдЗрд╕реЗ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛рд╢реАрдЯ рдХреЛ рджреЗрдЦреЗрдВ рдФрд░ рдЗрд╕реЗ рдмреНрд▓реЙрдХ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд░реЗрдВред <br><br><h4>  рдмреВрдЯрд▓реЛрдбрд░ рдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдореЗрдЯрд┐рдХ рд╕рдВрдХреНрд░рдордг рдХрд╣реАрдВ рдирд╣реАрдВ рдХреЗ рдмреАрдЪ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ </h4><br>  рдХрднреА-рдХрднреА рдЖрдк рдФрд░ рднреА рдЕрдзрд┐рдХ рдореБрд╢реНрдХрд┐рд▓ рдЪрд╛рд▓реЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдЕрдкрдиреЗ рдмреВрдЯрд▓реЛрдбрд░ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реЗрд╢рд╛рди рдХрд┐рдП рдмрд┐рдирд╛ UART рдпрд╛ USB рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдлрд░реНрдорд╡реЗрдпрд░ рдЕрдкрдбреЗрдЯ рдореЛрдб рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЧреНрд░рд╛рдо рдлреИрдХреНрдЯреНрд░реА рдХреЗ рдмреВрдЯрд▓реЛрдбрд░ STM32 рдкрд░ рдХреВрджрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред <br><br>  STM32 рдмреВрдЯрд▓реЛрдбрд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдирд╛рдордХ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ, рдЬрд┐рд╕реЗ рдЖрдкрдХреЛ рдЬрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реИ - рдЗрд╕ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рди рдХреЗрд╡рд▓ рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреА рд╡рд┐рднрд┐рдиреНрди рд╢реНрд░реГрдВрдЦрд▓рд╛рдУрдВ рдкрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкрддреЗ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдПрдХ рд╣реА рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдореЙрдбрд▓реЛрдВ (рдПрдХ рдорд╣рд╛рдХрд╛рд╡реНрдп рдкреНрд▓реЗрдЯ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">AN2606</a> рдкрд░ рдорд┐рд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдХрддреА</a> рд╣реИ) рдкреЗрдЬ 22 рд╕реЗ 26)ред  рдЬрдм рдЖрдк рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдкрд░ рд╕рдВрдмрдВрдзрд┐рдд рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдФрд░ рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрддреНрдкрд╛рдж рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рддреЛ рдЖрдк рдмрд╣реБрдореБрдЦреА рдкреНрд░рддрд┐рднрд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред <br><br>  CMSIS рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ, рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдХрд╛ рдкреНрд░рд╛рд░рдВрдн рдкрддрд╛ рднреА рдЧрд╛рдпрдм рд╣реИред  рдмреВрдЯрд▓реЛрдбрд░ рдЖрдИрдбреА рджреНрд╡рд╛рд░рд╛ рдЗрд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдпрд╣ рдПрдХ рдЪрд┐рдХрди рдФрд░ рдЕрдВрдбреЗ рдХреА рд╕рдорд╕реНрдпрд╛ рд╣реИ - рдмреВрдЯрд▓реЛрдбрд░ рдЖрдИрдбреА рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдХреЗ рдЕрдВрддрд┐рдо рдмрд╛рдЗрдЯ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИ, рдЬреЛ рд╣рдореЗрдВ рдкрддреЗ рдХреЗ рд╕рд╡рд╛рд▓ рдкрд░ рд╡рд╛рдкрд╕ рд▓рд╛рддреА рд╣реИред <br><br>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЕрдЧрд░ рд╣рдо STM32 рдореЗрдореЛрд░реА рдХрд╛рд░реНрдб рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджреЗрдЦреЗрдВрдЧреЗ: <br><br><img src="https://habrastorage.org/webt/l4/nf/b3/l4nfb3xcw87qnsrey9n4mp3t0we.png"><br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╢реАрд░реНрд╖ рдкрд░ рдПрдХ рдмрд╛рд░-рдкреНрд░реЛрдЧреНрд░рд╛рдо рдпреЛрдЧреНрдп рдХреНрд╖реЗрддреНрд░ рд╣реИ (рд╕рднреА рдПрд╕рдЯреАрдПрдо 32 рдореЗрдВ рдирд╣реАрдВ) рдФрд░ рд╡рд┐рдХрд▓реНрдк рдмрд╛рдЗрдЯреНрд╕ (рд╕рднреА рдореЗрдВ)ред  рдпрд╣ рд╕рдВрд░рдЪрдирд╛ рди рдХреЗрд╡рд▓ рд╡рд┐рднрд┐рдиреНрди рдореЙрдбрд▓реЛрдВ рдореЗрдВ, рдмрд▓реНрдХрд┐ рд╡рд┐рднрд┐рдиреНрди рдПрд╕рдЯреАрдПрдо 32 рд▓рд╛рдЗрдиреЛрдВ рдореЗрдВ рднреА рджреЗрдЦреА рдЬрд╛рддреА рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдУрдЯреАрдкреА рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдФрд░ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рдмреАрдЪ рдХреЗ рдкрддреЛрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЕрдВрддрд░ рд╣реЛрддрд╛ рд╣реИред <br><br>  рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╡рд┐рдХрд▓реНрдк рдмрд╛рдЗрдЯреНрд╕ рдХрд╛ рдкреНрд░рд╛рд░рдВрдн рдкрддрд╛ рдирд┐рдпрдорд┐рдд CMSIS рд╣реЗрдбрд░ рдореЗрдВ рд╣реИ - рдЗрд╕реЗ рд╡рд╣рд╛рдВ OB_BASE рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЖрдЧреЗ рд╕рд░рд▓ рд╣реИред  рд╣рдо рдкрд╣рд▓реЗ рд╡реИрдз рдпрд╛ рдЕрдорд╛рдиреНрдп рдкрддреЗ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦрддреЗ рд╣реИрдВ рдпрд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдПрдХ рд╕реЗ рдиреАрдЪреЗ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cpu_find_next_valid_address</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *start, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *stop, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> valid)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *address = start; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (address == stop) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cpu_check_address(address) == valid) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> address; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (stop &gt; start) { address++; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { address--; } }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; }</code> </pre> <br>  рдФрд░ рдСрдкреНрд╢рди рдмрд╛рдЗрдЯреНрд╕ рд╕реЗ рдиреАрдЪреЗ рджреЗрдЦреЗрдВ, рдпрд╛ рддреЛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдХрд╛ рдЕрдВрдд, рдпрд╛ рдЗрд╕рд╕реЗ рд╕рдЯреЗ OTP рдХрд╛, рдФрд░ рдлрд┐рд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдХреА рд╢реБрд░реБрдЖрдд рджреЛ рдкрд╛рд╕ рдореЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* System memory is the valid area next _below_ Option bytes */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *a, *b, *c; a = (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)(OB_BASE - <span class="hljs-number"><span class="hljs-number">1</span></span>); b = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Here we have System memory top address */</span></span> c = cpu_find_next_valid_address(a, b, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* Here we have System memory bottom address */</span></span> c = cpu_find_next_valid_address(c, b, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  рдФрд░ рдмрд╣реБрдд рдХрдард┐рдирд╛рдИ рдХреЗ рдмрд┐рдирд╛, рд╣рдо рдЗрд╕реЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдХреА рд╢реБрд░реБрдЖрдд рдкрд╛рддрд╛ рд╣реИ рдФрд░ рдЙрд╕ рдкрд░ рдХреВрджрддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рдд, рдпрд╣ рдмреВрдЯрд▓реЛрдбрд░ рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jump_to_bootloader</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> __</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attribute__</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">((noreturn))</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Sets up and jumps to the bootloader */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jump_to_bootloader</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* System memory is the valid area next _below_ Option bytes */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *a, *b, *c; a = (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)(OB_BASE - <span class="hljs-number"><span class="hljs-number">1</span></span>); b = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Here we have System memory top address */</span></span> c = cpu_find_next_valid_address(a, b, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* Here we have System memory bottom address */</span></span> c = cpu_find_next_valid_address(c, b, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!c) { NVIC_SystemReset(); } <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> boot_addr = (<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>)c; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> boot_stack_ptr = *(<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>*)(boot_addr); <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> dfu_reset_addr = *(<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>*)(boot_addr+<span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> (*dfu_bootloader)(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) = (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> (*))(dfu_reset_addr); <span class="hljs-comment"><span class="hljs-comment">/* Reset the stack pointer */</span></span> __set_MSP(boot_stack_ptr); dfu_bootloader(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br>  рдпрд╣ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░реЛрд╕реЗрд╕рд░ рдореЙрдбрд▓ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ ... рдХреБрдЫ рднреА рдирд┐рд░реНрднрд░ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рддрд░реНрдХ рдЙрди рдореЙрдбрд▓реЛрдВ рдкрд░ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдУрдЯреАрдкреА рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдореЛрд░реА рдХреЗ рдмреАрдЪ рдПрдХ рдЫреЗрдж рд╣реИ - рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХреА рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдХреЛрдИ рднреА рд╣реИред  рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рдУрдЯреАрдкреА - рдЪреЗрдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдЧрд╛ред <br><br>  рдЕрдиреНрдп рдЯреНрд░рд┐рдХреНрд╕ рдЖрдкрдХреЗ рдХреЛрдб рд╕реЗ рдмреВрдЯрд▓реЛрдбрд░ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддреЗ рд╣реИрдВ - рд╕реНрдЯреИрдХ рдкреЙрдЗрдВрдЯрд░ рдХреЛ рд░реАрд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордд рднреВрд▓рдирд╛ рдФрд░ рдмрд╛рд╣реНрдп рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдмреВрдЯрд▓реЛрдбрд░ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ, рдШрдбрд╝реА рдХреА рдЧрддрд┐, рдЖрджрд┐ред рдЗрд╕рдХреА рдЕрддрд┐рд╕реВрдХреНрд╖реНрдорд╡рд╛рдж рдХреЗ рдХрд╛рд░рдг, рдмреВрдЯрд▓реЛрдбрд░ рдкрд░ рд░реЛрдХ рд╕рдХрддрд╛ рд╣реИ рдкрд░рд┐рдзрд┐ рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░реЗрдВ рдФрд░ рдЙрдореНрдореАрдж рдХрд░реЗрдВ рдХрд┐ рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИред  рдЕрдкрдиреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ рдХрд┐рд╕реА рдЕрдирд┐рдпрдВрддреНрд░рд┐рдд рд╕реНрдерд╛рди рд╕реЗ рдмреВрдЯрд▓реЛрдбрд░ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рдЖрд░рдЯреАрд╕реА рдмреИрдХрдЕрдк рд░рдЬрд┐рд╕реНрдЯрд░ рдпрд╛ рдХреЗрд╡рд▓ рдПрдХ рдЬрд╛рджреВ рдирдВрдмрд░ рдХреА рдпрд╛рдж рдореЗрдВ рдПрдХ рдЬреНрдЮрд╛рдд рдкрддреЗ рдкрд░ рд▓рд┐рдЦрдирд╛ рд╣реИ, рдЗрд╕ рдирдВрдмрд░ рдХреЛ рдЖрд░рдореНрдн рдХрд░рдиреЗ рдХреЗ рдкрд╣рд▓реЗ рдЪрд░рдгреЛрдВ рдореЗрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд░рд┐рдмреВрдЯ рдФрд░ рдЬрд╛рдВрдЪреЗрдВред <br><br>  PS рдЪреВрдВрдХрд┐ рдкреНрд░реЛрд╕реЗрд╕рд░ рдореЗрдореЛрд░реА рдХрд╛рд░реНрдб рдХреЗ рд╕рднреА рдкрддреЗ 4 рд╕реЗ рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рдВрд░реЗрдЦрд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЙрдкрд░реЛрдХреНрдд рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдПрдХ рдХреЗ рдмрдЬрд╛рдп 4 рдмрд╛рдЗрдЯ рдХреЗ рд╡реЗрддрди рд╡реГрджреНрдзрд┐ рдореЗрдВ рдЙрдирдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрджрдо рдмрдврд╝рд╛рдиреЗ рдХреЗ рд╡рд┐рдЪрд╛рд░ рд╕реЗ рддреЗрдЬ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br><h4>  рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕реВрдЪрдирд╛ </h4><br>  рдПрдирдмреА: рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдирд┐рдпрдВрддреНрд░рдХ рдкрд░ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрддреЗ рдХреА рд╡реИрдзрддрд╛ рдЬрд░реВрд░реА рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЙрд╕ рдкрддреЗ рдкрд░ рд╕реНрдерд┐рдд рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЙрдкрд╕реНрдерд┐рддрд┐ рдХрд╛ рд╕рдВрдХреЗрдд рд╣реЛред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреБрдЫ рд╡реИрдХрд▓реНрдкрд┐рдХ рдкрд░рд┐рдзреАрдп рдмреНрд▓реЙрдХ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд╛ рдкрддрд╛ рдорд╛рдиреНрдп рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдмреНрд▓реЙрдХ рд╕реНрд╡рдпрдВ рдЗрд╕ рдореЙрдбрд▓ рдореЗрдВ рдЕрдиреБрдкрд╕реНрдерд┐рдд рд╣реИред  рдирд┐рд░реНрдорд╛рддрд╛ рдХреА рдУрд░ рд╕реЗ, рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рдЪрд╛рд▓реЗрдВ рд╕рдВрднрд╡ рд╣реИрдВ, рдЖрдорддреМрд░ рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░реЛрд╕реЗрд╕рд░ рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реА рдХреНрд░рд┐рд╕реНрдЯрд▓ рдХреЗ рдЙрдкрдпреЛрдЧ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдпреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд╛рдо рдХрд░рддреА рд╣реИрдВ рдФрд░ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╕рд╛рдмрд┐рдд рд╣реЛрддреА рд╣реИрдВред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi437256/">https://habr.com/ru/post/hi437256/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi437244/index.html">Google рдлрд╝рд┐рд╢рд┐рдВрдЧ рдИрдореЗрд▓ рдХреЛ рдкрд╣рдЪрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╕рд┐рдЦрд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi437248/index.html">рд╕реЗрдВрдЯ рдкреАрдЯрд░реНрд╕рдмрд░реНрдЧ рдореЗрдВ FPGA mitap</a></li>
<li><a href="../hi437250/index.html">рд╣рдордиреЗ рдПрдХ рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдбрд┐рдЬрд╛рдЗрдирд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ</a></li>
<li><a href="../hi437252/index.html">рдПрд╕рдбреАрдПрд▓ 2.0 рд╕рдмрдХ рдЪрдХреНрд░: рдкрд╛рда 3 - рдПрд╕рдбреАрдПрд▓ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рд▓рд╛рдЗрдмреНрд░реЗрд░реА</a></li>
<li><a href="../hi437254/index.html">рдЯрд░реНрдирд░реА рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ: рдореВрд▓ рдмрд╛рддреЗрдВ</a></li>
<li><a href="../hi437258/index.html">CATIA DESIGN рдЯреАрдо рдХреА рдЕрдиреВрдареА рдкрд░рд┐рдпреЛрдЬрдирд╛: Bleu рдЕрд╡рдзрд╛рд░рдгрд╛ рдХрд╛рд░</a></li>
<li><a href="../hi437260/index.html">рд╡рд┐рдВрдбреЛрдЬ рдлреЛрди 8.1: рдиреЙрд╕реНрдЯреЗрд▓реНрдЬрд┐рдпрд╛ рдкреЛрд╕реНрдЯ рдбреЗрд╡рд▓рдкрдореЗрдВрдЯред рдПрдХрд▓ рдЖрд╡реЗрджрди рдЗрддрд┐рд╣рд╛рд╕</a></li>
<li><a href="../hi437262/index.html">рдирджреА рдХрд╛ рдкрд╛рдиреА рдкреАрдиреЗ рдпреЛрдЧреНрдп рдХреИрд╕реЗ рдмрдирддрд╛ рд╣реИ?</a></li>
<li><a href="../hi437264/index.html">рдЖрдИрдЯреА рдореЗрдВ рдкреЗрд╢реЗрд╡рд░ рдмрд░реНрдирдЖрдЙрдЯ (рдореЗрд░рд╛ рд╕рд░реНрдХрд▓ рдЕрдзреНрдпрдпрди рдкрд░рд┐рдгрд╛рдо)</a></li>
<li><a href="../hi437270/index.html">рд╣рдо QEMU рдФрд░ Intel GVT-g рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рд╡реАрдбрд┐рдпреЛ рдХрд╛рд░реНрдб рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд┐рдВрдбреЛрдЬ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреА рддреИрдирд╛рддреА рдХрд░рддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>