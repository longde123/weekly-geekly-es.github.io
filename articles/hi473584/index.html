<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЩПЁЯП╗ ЁЯд╜ЁЯП╜ ЁЯСНЁЯП╜ рдЙрдмрдВрдЯреВ 18.04 рдФрд░ рдкрд╛рд░рджрд░реНрд╢реА рд╕реНрдХреНрд╡рд┐рдб рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╕реНрдХреВрд▓ рдореЗрдВ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдирд╛, рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рдПрдХреАрдХрд░рдг рдХреЗ рд╕рд╛рде рдФрд░ рди рдХреЗрд╡рд▓ ЁЯд╜ ЁЯУЩ ЁЯХЦ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. рдкрд░рд┐рдЪрдп 
 рд╕реНрдХреВрд▓реЛрдВ рдореЗрдВ рдХрдВрдЯреЗрдВрдЯ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХрд╛ рд╡рд┐рд╖рдп рдмрд▓реНрдХрд┐ рд╣реИрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕ рдкрд░ рдкреВрд░реА рдЬрд╛рдирдХрд╛рд░реА рджреА рдЧрдИ рд╣реИ, рд▓реЗрдХрд┐рди рдХрдИ рд╕рд╛рдЗрдЯреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд HTTPS рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЙрдмрдВрдЯреВ 18.04 рдФрд░ рдкрд╛рд░рджрд░реНрд╢реА рд╕реНрдХреНрд╡рд┐рдб рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╕реНрдХреВрд▓ рдореЗрдВ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдирд╛, рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рдПрдХреАрдХрд░рдг рдХреЗ рд╕рд╛рде рдФрд░ рди рдХреЗрд╡рд▓</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473584/"><img src="https://habrastorage.org/webt/sl/bc/ta/slbctarcmoniq1q3aotimy8oiv8.jpeg"><br><br><h3>  1. рдкрд░рд┐рдЪрдп </h3><br>  рд╕реНрдХреВрд▓реЛрдВ рдореЗрдВ рдХрдВрдЯреЗрдВрдЯ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХрд╛ рд╡рд┐рд╖рдп рдмрд▓реНрдХрд┐ рд╣реИрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕ рдкрд░ рдкреВрд░реА рдЬрд╛рдирдХрд╛рд░реА рджреА рдЧрдИ рд╣реИ, рд▓реЗрдХрд┐рди рдХрдИ рд╕рд╛рдЗрдЯреЛрдВ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд HTTPS рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рд╕рдВрдХреНрд░рдордг рдХреЗ рдХрд╛рд░рдг рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреБрд░рд╛рдирд╛ рд╣реЛ рдЪреБрдХрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдореИрдВрдиреЗ Google рд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░ рдореЗрдВ рдорд┐рд▓реА рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдПрдХрддреНрд░ рдХрд░рддреЗ рд╣реБрдП, рдП рд╕реЗ рдЬреЗрдб рддрдХ рдХрд╛ рд╕рдмрд╕реЗ рдкреВрд░рд╛ рд▓реЗрдЦ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рд▓реЗрдЦ рдкреНрд░рд╢рд╛рд╕рди рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдмреБрдирд┐рдпрд╛рджреА рдЬреНрдЮрд╛рди рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬреНрдЮрд╛рди рд╢рд┐рдХреНрд╖рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред <br><br><h3>  2. рд╕рдВрджрд░реНрдн рдХреА рд╢рд░реНрддреЗрдВ </h3><br>  <b>рджрд┐рдпрд╛ рдЧрдпрд╛:</b> 436-FZ рдФрд░ рдПрдХ рд╕реНрдХреВрд▓ рдЬрд┐рд╕рдореЗрдВ рдХрдИ рдХрдВрдкреНрдпреВрдЯрд░ рдиреЗрдЯрд╡рд░реНрдХ рд╣реИрдВ рдФрд░ рдПрдХ рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рд░рд╛рдЙрдЯрд░ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реИрдВред <br><br>  <b>рдЙрджреНрджреЗрд╢реНрдп:</b> рдЕрдкрдиреЗ рдкреНрдпрд╛рд░реЗ рдФрд░ рд╕реНрдХреВрд▓ рдкреНрд░рдмрдВрдзрди рдХреЛ рдЫреЛрдбрд╝рдХрд░ рд╕рднреА рдХреЗ рд▓рд┐рдП рд╢реНрд╡реЗрддрд╕реВрдЪреА рджреНрд╡рд╛рд░рд╛ HTTP рдФрд░ HTTPS рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдирд╛ред <br><a name="habracut"></a><br><br><h3>  3. рд╕рдорд╕реНрдпрд╛ рд╣рд▓ рдХрд░рдирд╛ </h3><br>  рдПрдХ рдЕрдкреНрд░рдпреБрдХреНрдд рдбреЗрд╕реНрдХрдЯреЙрдк рдХрдВрдкреНрдпреВрдЯрд░ рджреЛрд╣рд░реЗ рдХреЛрд░ рдЗрдВрдЯреЗрд▓-рдУрдо, 1 рдЬреАрдмреА рд░реИрдо рдФрд░ рд╣рд╛рд░реНрдб 80 рдЬреАрдмреА рдХреЗ рд╕рд╛рде рдкрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br>  рдЗрд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><ol><li>  рд▓рд┐рдирдХреНрд╕ рдЙрдмрдВрдЯреВ рд╕рд░реНрд╡рд░ 18.04 рдПрд▓рдЯреАрдПрд╕ рд╕реНрдерд╛рдкрд┐рдд </li><li>  рдкрд╛рд░рджрд░реНрд╢реА рдкреНрд░реЙрдХреНрд╕реА рд╕реНрдХреНрд╡реАрдЯ рдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕реЗ HTTPS рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рд╕реНрд░реЛрдд рдХреЛрдб рд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </li><li>  рдкреНрд░реЙрдХреНрд╕реА рд╕реЗ рдпрд╛ рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд┐рдХрд▓реНрдк (рдмрд╣реБрдд рдЕрдВрдд рдореЗрдВ) рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЛ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рдХреЗ, рд╕рдмрдиреЗрдЯ рдореЗрдВ рд╕рд░реНрд╡рд░ рдХрд╛ рдПрдХреАрдХрд░рдг </li></ol><br>  рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br><h4>  3.1ред  рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдФрд░ Ubuntu 18.04 рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h4><br>  рд╕реНрдерд╛рдкрдирд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рд░рд▓ рд╣реИред  рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕рд╛рдЗрдЯ рд╕реЗ Ubuntu рд╕рд░реНрд╡рд░ 18.04 рдХрд╛ рд╡рд┐рддрд░рдг рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред  рдореИрдВ рдкреБрд░рд╛рдиреЗ рдЗрдВрд╕реНрдЯреЙрд▓рд░ рдХреЗ рд╕рд╛рде рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ, рдХреНрдпреЛрдВрдХрд┐ рдирдпрд╛, рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдореБрдЭрд╕реЗ, рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рджреМрд░рд╛рди рдЕрдирдВрдд рдбрд╛рдЙрдирд▓реЛрдб рдореЗрдВ рдЪрд▓рд╛ рдЧрдпрд╛ред  рд╣рдо рдХрд┐рд╕реА рднреА рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХреЗ рд╕реЗ рдЫрд╡рд┐ рдХреЛ USB рдлреНрд▓реИрд╢ рдбреНрд░рд╛рдЗрд╡ / рдбрд┐рд╕реНрдХ рдкрд░ рд▓рд┐рдЦрддреЗ рд╣реИрдВред  USB рдлреНрд▓реИрд╢ рдбреНрд░рд╛рдЗрд╡ рдкрд░ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП, рдореИрдВ Rufus рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдФрд░ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ "рд░рд┐рдХреЙрд░реНрдб рдбреАрдбреА-рдЗрдореЗрдЬ" рдХрд╛ рдЪрдпрди рдХрд░рддрд╛ рд╣реВрдВред  рдЕрдЧрд▓рд╛, рд╕реНрдХреНрд░реАрди рдкрд░ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реБрдП, рд╕рд┐рд╕реНрдЯрдо рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред  рд╣рдо рдХреЗрд╡рд▓ рдШрдЯрдХреЛрдВ рдХреА рдкрд╕рдВрдж рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рдЖрдк рддреБрд░рдВрдд рдУрдкрдирдПрд╕рдПрд╕рдПрдЪ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдпрд╣ рдмрд╛рдд рд╣реИред  рд╣рдореЗрдВ рдмрд╣реБрдд рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рд╡рд╣ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдПред <br><br>  рддреЛ, Ubuntu рд╕реНрдерд╛рдкрд┐рдд рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдбреАрдПрдЪрд╕реАрдкреА рд╣реИ, рддреЛ рдиреЗрдЯрд╡рд░реНрдХ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рд╣реИред  рд╣рдо рд╕реБрдкрд░рдпреБрд╕рд░ рдореЛрдб рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░реЗрдВрдЧреЗ рддрд╛рдХрд┐ рд╣рд░ рдмрд╛рд░ рд╣рдо рдХрдорд╛рдВрдбреЛ рдореЗрдВ sudo рдХреЛ рди рдЬреЛрдбрд╝реЗрдВред <br><br><pre><code class="javascript hljs">sudo -s</code> </pre> <br>  рдЕрдкрдирд╛ рдкрд╛рд╕рд╡рд░реНрдб рдбрд╛рд▓реЗрдВ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">apt-get update apt-get upgrade</code> </pre> <br>  рдПрдХ рдкрд╛рда рд╕рдВрдкрд╛рджрдХ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдмрдВрдзрдХ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">apt-get install nano mc</code> </pre> <br>  рдлрд╝рд╛рдЗрд▓ рдХреЛ <i><b>рдиреИрдиреЛ</b></i> рдореЗрдВ рд╕рд╣реЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <i>Y рдХреЗ</i> рдмрд╛рдж <i>Ctrl + O</i> рджрдмрд╛рдирд╛ рд╣реЛрдЧрд╛ <i>ред</i>  <i>Ctrl + X</i> рджрдмрд╛рдХрд░ рд╕рдВрдкрд╛рджрдХ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВред  рдЖрдк <i>Ctrl + X</i> рджрдмрд╛рдХрд░ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рд╕реЗ рдареАрдХ рдкрд╣рд▓реЗ рдлрд╛рдЗрд▓ рдХреЛ рд╕реЗрд╡ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <i>ред Y рдХреЗ</i> рдмрд╛рдж <i>ред</i> <br>  рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдмрдВрдзрдХ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдЯрд╛рдЗрдк рдХрд░реЗрдВ <i><b>mc</b></i> ред  рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдиреЙрд░реНрдЯрдирдХреЛрдореЗрдиреНрдбрд░ рдбреЙрд╕ рдпрд╛ рд╡рд┐рдВрдбреЛрдЬ рдЯреЛрдЯрд▓рдХрдореЗрдВрдбрд░ / рдПрдлрдПрдЖрд░ рджреЛ рдкреИрдирд▓реЛрдВ рдХреЗ рд╕рд╛рде рдЦреБрд▓рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдореИрдВ рдХрдВрд╕реЛрд▓ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реВрдВ, рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдмрдВрдзрдХ рдХрднреА-рдХрднреА рдорджрдж рднреА рдХрд░рддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд╛рдВрдЫрд┐рдд рдлрд╝рд╛рдЗрд▓ рдХреЛ рддреЗрдЬрд╝реА рд╕реЗ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдПред <br><br>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдбреАрдПрдЪрд╕реАрдкреА рдирд╣реАрдВ рд╣реИ рдпрд╛ рдЖрдк рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдЖрдИрдкреА рдкрддрд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рдЪрд╛рд╣рддрд╛ рдерд╛, рддреЛ рд╣рдо рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░ рдЬрд╛рдПрдВрдЧреЗред <br><br><div class="spoiler">  <b class="spoiler_title">рд╕реНрдЯреЗрдЯрд┐рдХ рдЖрдИрдкреА рдПрдбреНрд░реЗрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ</b> <div class="spoiler_text">  рдЙрдмрдВрдЯреВ рдХреЗ рдкрд┐рдЫрд▓реЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдирдП 18.04 рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЕрдм рд╕рд╛рдорд╛рдиреНрдп <i>/ etc / рдиреЗрдЯрд╡рд░реНрдХ / рдЗрдВрдЯрд░рдлреЗрд╕</i> рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ <i>рд╣реИ</i> , рд▓реЗрдХрд┐рди <i><b>/etc/netplan/*.yaml</b></i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ netplan рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реИред  рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЕрд▓рдЧ рдирд╛рдо рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╡рд╣рд╛рдБ рдЕрдХреЗрд▓реА рд╣реИред  / рдЖрджрд┐ / рдиреЗрдЯрд╡рд░реНрдХ / рдЗрдВрдЯрд░рдлреЗрд╕ рд╣реА рд╣рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд▓рд┐рдЦрддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/ye/m5/xr/yem5xrromrmumjbg5gcjyb_qkte.jpeg"><br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдк 18.04 рд╕реЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧ рд╡рд╣реАрдВ рд░рд╣реЗрдЧреА рдЬрд╣рд╛рдВ рд╡реЗ рдереЗред  рдиреЗрдЯрдкреНрд▓реЗрди рдХреЗрд╡рд▓ 18.04 рдХреА рд╕реНрд╡рдЪреНрдЫ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реИред <br><br>  рдЪрд▓реЛ рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЙрддрд░реЗрдВред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдЗрдП рдУрдПрд╕ рдХреЛ рд╕реМрдВрдкрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдирд╛рдо рджреЗрдЦреЗрдВ, рдФрд░ рдЗрд╕реЗ рдпрд╛рдж рд░рдЦреЗрдВред <br><br><pre> <code class="javascript hljs">ifconfig</code> </pre> <br>  рдЕрдм рд╕реЗрдЯрд┐рдВрдЧ рдлрд╛рдЗрд▓ рдХреЛ рдУрдкрди рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">nano /etc/netplan<span class="hljs-comment"><span class="hljs-comment">/*.yaml</span></span></code> </pre> <br>  рдЗрд╕рдХреА рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдбреАрдПрдЪрд╕реАрдкреА рд╕реЗрдЯрд┐рдВрдЧ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред  рдлрд╛рдЗрд▓ рдХреЛ рдирд┐рдореНрди рд░реВрдк рдореЗрдВ рд▓рд╛рддреЗ рд╣реИрдВред <br><br><pre> <code class="javascript hljs"># This file describes the network interfaces available on your system # For more information, see netplan(<span class="hljs-number"><span class="hljs-number">5</span></span>). network: version: <span class="hljs-number"><span class="hljs-number">2</span></span> renderer: networkd ethernets:   : dhcp4: no dhcp6: no addresses: [/<span class="hljs-number"><span class="hljs-number">24</span></span>] gateway4:  nameservers: addresses: [<span class="hljs-number"><span class="hljs-number">77.88</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.7</span></span>, <span class="hljs-number"><span class="hljs-number">77.88</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>]</code> </pre><br>  рдЕрдкрдирд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕, рдкрддрд╛ рдФрд░ рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рджрд░реНрдЬ рдХрд░реЗрдВред  DNS рдЗрдиреНрд╣реЗрдВ рдЫреЛрдбрд╝рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддреЗ рд╣реИрдВ - Yandex.DNS рдмрдЪреНрдЪреЗ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╣реЛрдВрдЧреЗред  рд╡рд╣реА рд░рд╛рдЙрдЯрд░ рдореЗрд░реЗ рд░рд╛рдЙрдЯрд░ рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЖрдкрдХреЛ рдЙрд╕ DNS рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рд░рд╛рдЙрдЯрд░ рд╡рд┐рддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдпрд╣рд╛рдВ рдЖрдкрдХреЛ рд░рд┐рдХреНрдд рд╕реНрдерд╛рди (рдЕрд░реНрдерд╛рддреН рд░рд┐рдХреНрдд рд╕реНрдерд╛рди, рдЯреИрдм рдирд╣реАрдВ) рдкрд░ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ, рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдкрд┐рдЫрд▓реЗ рд╕реНрдерд╛рди рд╕реЗ рдЕрд▓рдЧ рд╣реЛрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдиреЗрдорд╡реЗрд░реНрд╕ рдХреЗ рдмрд╛рдж рдкрддрд╛ рдкрдВрдХреНрддрд┐ рдХреЛ рдХрд┐рд╕реА рд╕реНрдерд╛рди рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдКрдкрд░ рдХреА рд░реЗрдЦрд╛ рдХреЗ рд╕рд╛рде рдЧрдардмрдВрдзрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддрдм, рдЬрдм рдЖрдк рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдиреЗрдЯрдкреНрд▓рд╛рди рдПрдХ рддреНрд░реБрдЯрд┐ рджреЗрдЧрд╛ред <br><br>  рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд▓рд╛рдЧреВ рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">netplan apply</code> </pre> <br>  рд╕рд░реНрд╡рд░ рдХреЛ рд░рд┐рдмреВрдЯ рдХрд░реЗрдВ, рдмрд╕ рдорд╛рдорд▓реЗ рдореЗрдВред <br><br><pre> <code class="javascript hljs">reboot</code> </pre> <br></div></div><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЙрдиреНрд╣реЛрдВрдиреЗ рдбреАрдПрдЪрд╕реАрдкреА рдФрд░ рд╕реНрдерд┐рд░ рдЖрдИрдкреА рджреЛрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝рд╛, рдЕрдЧрд░ рдиреЗрдЯрдкреНрд▓рд╛рди рд╕реВрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред <br><div class="spoiler">  <b class="spoiler_title">рд╡реИрдХрд▓реНрдкрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрдЕрдк</b> <div class="spoiler_text">  рдЙрдмрдВрдЯреВ 18.04 рдореЗрдВ, рдЖрдк <i>/ etc / рдиреЗрдЯрд╡рд░реНрдХ / рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ</i> рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдк рдкрд░ рд▓реМрдЯ рд╕рдХрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдлрд╝рд╛рдЗрд▓ рд╣реА рдЗрдВрдЧрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдЖрдкрдХреЛ <i>ifupdown</i> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ: <br><pre> <code class="javascript hljs">apt-get install ifupdown</code> </pre> <br>  рдЕрдм рдиреЗрдЯрдкреНрд▓рд╛рди рдореЗрдВ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ <br><pre> <code class="javascript hljs">nano /etc/netplan<span class="hljs-comment"><span class="hljs-comment">/*.yaml</span></span></code> </pre> <br>  рдФрд░ рдЗрд╕рдХреА рд╕рднреА рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдкрд░ рдЯрд┐рдкреНрдкрдгреА рдХрд░реЗрдВ рддрд╛рдХрд┐ рдХреЛрдИ рдЯрдХрд░рд╛рд╡ рди рд╣реЛред <br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ <br><pre> <code class="javascript hljs">nano /etc/network/interfaces</code> </pre> <br>  рдФрд░ рдЗрд╕реЗ рдЬреЛрдбрд╝реЗрдВ: <br>  рд╕реНрдерд┐рд░ рдЖрдИрдкреА рдХреЗ рд▓рд┐рдП <br><pre> <code class="javascript hljs">auto ___ iface ___ inet <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> address IP- netmask  gateway  dns-nameservers <span class="hljs-number"><span class="hljs-number">77.88</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.7</span></span> <span class="hljs-number"><span class="hljs-number">77.88</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span></code> </pre> <br>  рдЧрддрд┐рд╢реАрд▓ (рдбреАрдПрдЪрд╕реАрдкреА) рдХреЗ рд▓рд┐рдП <br><pre> <code class="javascript hljs">auto ___ iface ___ inet dhcp</code> </pre> <br>  рд╕рд░реНрд╡рд░ рдХреЛ рд░рд┐рдмреВрдЯ рдХрд░реЗрдВ <br><pre> <code class="javascript hljs">reboot</code> </pre> <br>  рдпрджрд┐ рдЖрдк рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдЧреЗ, рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ, рдЖрдк рд╡реЗрдмрдорд┐рди рд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕реНрдкреЙрдЗрд▓рд░ рдХреЗ рддрд╣рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡реЗрдмрдорд┐рди рдХреЗ рд╕рд╛рде рд╡рд┐рдХрд▓реНрдк рднреА рдХрд╛рдо рдХрд░реЗрдЧрд╛) <br></div></div><br><br>  рдЕрдм рдЖрдкрдХреЛ рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреИрдХреЗрдЯ рдкрд╛рд╕ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред  рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ <i>/etc/sysctl.conf</i> <br><pre> <code class="javascript hljs">nano /etc/sysctl.conf</code> </pre> <br>  рд╣рдо <i><b>рдЗрд╕рдореЗрдВ</b></i> рд╕реНрдЯреНрд░рд┐рдВрдЧ <i><b>net.ipv4.ip_forward = 1 рдХреА рддрд▓рд╛рд╢ рдХрд░рддреЗ рд╣реИрдВ</b></i> рдФрд░ <i><b>рдЗрд╕реЗ рдЕрдирдЗрдВрд╕реНрдЯреЙрд▓</b></i> рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ рдорд╛рди <i>0 рд╣реИ</i> , рддреЛ <i>1 рдореЗрдВ</i> рдмрджрд▓реЗрдВред <br>  рд╕реЗрдЯрд┐рдВрдЧ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рджрд░реНрдЬ рдХрд░реЗрдВ <br><pre> <code class="javascript hljs">sysctl -p /etc/sysctl.conf</code> </pre> <br><br>  рдиреЗрдЯрд╡рд░реНрдХ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рд╕реАрдзреЗ рдЯрд░реНрдорд┐рдирд▓ рдкрд░ рдЬрд╛рдПрдВ, рдФрд░ рдЗрд╕рдореЗрдВ рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдкрдиреЗ рдЗрдВрд╕реНрдЯрд╛рд▓реЗрд╢рди рдЪрд░рдг рдХреЗ рджреМрд░рд╛рди рдУрдкрдирдПрд╕рдПрд╕рдПрдЪ рдХрд╛ рдЪрдпрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">apt-get install ssh</code> </pre> <br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, SSH рдкреЛрд░реНрдЯ 22 рдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ / рдкрд╛рд╕рд╡рд░реНрдб рд▓реЙрдЧрд┐рди рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдк рдЗрд╕реЗ рдмрд╛рд╣рд░реА рд╣рдорд▓реЛрдВ рд╕реЗ рд╕рд░реНрд╡рд░ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдХреБрдВрдЬреА рдФрд░ рдПрдХ рдЕрдиреНрдп рдкреЛрд░реНрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЬрд╛рдирдХрд╛рд░реА рд╕реЗ рднрд░рд╛ рд╣реИред <br><br>  рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ XShell рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВред  рдЖрдк рдЕрдкрдиреА рдкрд╕рдВрдж рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рд╣рдореЗрдВ рдбреАрдПрдЪрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдФрд░ рджреВрд╕рд░реЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рд░рд╛рдЙрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рдкреНрд░реЙрдХреНрд╕реА рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░реЗрдВрдЧреЗред <br><br>  рдиреАрдВрд╡ рд░рдЦреА рдЬрд╛рддреА рд╣реИред  рдЕрдм рд╕реНрдХреНрд╡реАрдб рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВред <br><br><h4>  3.2ред  HTTPS рд╕рд╣рд╛рдпрддрд╛ рдФрд░ рд╕реВрдЪреА рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рд╕реНрдХреНрд╡рд┐рдб рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </h4><br>  <b>3.2.1ред</b>  <b>рд╕реНрдХреНрд╡реАрдб рдмрдирд╛рдПрдБ рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</b> <br><br>  рдЪреВрдВрдХрд┐ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдПрд╕рдПрд╕рдПрд▓ рд╕рдкреЛрд░реНрдЯ рдХреЗ рд╕рд╛рде рдХреЛрдИ рд░реЗрдбреА-рдореЗрдб рд╕реНрдХреНрд╡реАрдб рдкреИрдХреЗрдЬ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдЗрд╕реЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕реНрд░реЛрдд рд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдлрд╛рдЗрд▓ рдХреЛ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рд╕рд╛рде рдЦреЛрд▓реЗрдВред <br><br><pre> <code class="javascript hljs">nano /etc/apt/sources.list</code> </pre> <br>  рдЗрд╕рдореЗрдВ рд╣рдо рдбрд┐рдмреЗрдЯ- <i><b>src рдХреЗ</b></i> рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реА рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ (рд╢реБрд░реБрдЖрдд рдореЗрдВ # рд╣рдЯрд╛рддреЗ рд╣реИрдВ) <br><br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рд╕рдВрдХреБрд▓ рдХреЛ рдЕрджреНрдпрддрди рдХрд░реЗрдВрдЧреЗред <br><br><pre> <code class="javascript hljs">apt-get update</code> </pre> <br>  рдЕрдЧрд▓рд╛, рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдЙрдкрдХрд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">apt-get install fakeroot build-essential devscripts</code> </pre> <br>  рдФрд░ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рд▓рд┐рдП рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рдЬреЛрдбрд╝реЗрдВред <br><br><pre> <code class="javascript hljs">apt-get build-dep squid3</code> </pre> <br>  SSL рд╕рдорд░реНрдерди рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">apt-get install libssl1<span class="hljs-number"><span class="hljs-number">.0</span></span>-dev</code> </pre> <br>  рдЪрд▓реЛ рдШрд░ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЬрд╛рдПрдВ рдФрд░ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдПрдВ, рддреБрд░рдВрдд рдЗрд╕реЗ рдЖрд╡рд╢реНрдпрдХ рдЕрдзрд┐рдХрд╛рд░ рд╕реЗрдЯ рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">cd ~ mkdir build chown _apt:root build</code> </pre> <br>  рдирд┐рд░реНрдорд┐рдд рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЬрд╛рдПрдВ рдФрд░ рд╕реНрдХреНрд╡реАрдб рд╕реНрд░реЛрддреЛрдВ рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">cd build apt-get source squid3</code> </pre> <br>  рдмрд┐рд▓реНрдб рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд╕реНрдХреНрд╡реАрдб 3 рдФрд░ рд░рд┐рд▓реАрдЬ рдирдВрдмрд░ рдХреЗ рд╕рд╛рде рдПрдХ рдлреЛрд▓реНрдбрд░ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред  рдЙрдмрдВрдЯреВ 18.04.3 рдкрд░ рдпрд╣ 3.5.27 рд╣реИред  рдЪрд▓реЛ рдЗрд╕рдореЗрдВ рдЪрд▓рддреЗ рд╣реИрдВред <br><br><pre> <code class="javascript hljs">cd squid3<span class="hljs-number"><span class="hljs-number">-3.5</span></span><span class="hljs-number"><span class="hljs-number">.27</span></span></code> </pre> <br>  рдЕрд╕реЗрдВрдмрд▓реА рд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рд╡рд┐рдХрд▓реНрдк рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдЙрдирдХреЗ рд╕рд╛рде рдлрд╛рдЗрд▓ рдЦреЛрд▓реЗрдВред <br><br><pre> <code class="javascript hljs">nano debian/rules</code> </pre> <br>  рд╣рдо рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдХреА рддрд▓рд╛рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐ рддрд╕реНрд╡реАрд░ рдореЗрдВ рд╣реИ <br><br><img src="https://habrastorage.org/webt/w3/1a/xn/w31axng0b2nuqhjipuqc84sey78.jpeg"><br>  рдирд┐рдореНрди рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝реЗрдВред <br><br><pre> <code class="javascript hljs">--enable-ssl \ --enable-ssl-crtd \ --<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>-openssl</code> </pre> <br>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЪрд┐рддреНрд░ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝реЗ рдЧрдП рд╣реИрдВ, рдФрд░ <b>рдЕрдВрддрд┐рдо</b> рдкрдВрдХреНрддрд┐ рдХреЛ <b>рдЫреЛрдбрд╝рдХрд░</b> рд╡рд┐рдХрд▓реНрдкреЛрдВ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдХреЗ рдмрд╛рдж <b>"\"</b> рд╡рд░реНрдг рджрд┐рдЦрд╛рдИ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдЗрд╕рд▓рд┐рдП, рд╕рдм рдХреБрдЫ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИред  рдЕрдм рд╕реНрдХреНрд╡реАрдб рд╕реНрд░реЛрдд рдлрд╝реЛрд▓реНрдбрд░ рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><pre> <code class="javascript hljs">cd ~<span class="hljs-regexp"><span class="hljs-regexp">/build/</span></span>squid3<span class="hljs-number"><span class="hljs-number">-3.5</span></span><span class="hljs-number"><span class="hljs-number">.27</span></span></code> </pre> <br>  рдФрд░ рдирд┐рд░реНрдорд╛рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рджрд░реНрдЬ рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">debuild -d</code> </pre> <br>  рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдореЗрдВ рдмрд╣реБрдд рд▓рдВрдмрд╛ рд╕рдордп рд▓рдЧреЗрдЧрд╛, рдореБрдЭреЗ рдФрд╕рддрди 2 рд╕реЗ 4 рдШрдВрдЯреЗ рд▓рдЧрддреЗ рд╣реИрдВред  рдХрдВрдкреНрдпреВрдЯрд░ рдХреА рдЧрддрд┐ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рдЕрдВрдд рдореЗрдВ рдЖрдкрдХреЛ рдПрдХ рдкреИрдХреЗрдЬ рд╕рд╛рдЗрдирд┐рдВрдЧ рддреНрд░реБрдЯрд┐ рджрд┐рдЦрд╛рдИ рджреЗрдЧреАред  рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ - рддреНрд░реБрдЯрд┐ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░реЗрдВред <br><br>  рдЕрдм Build рдлреЛрд▓реНрдбрд░ рдореЗрдВ рдЬрд╛рдПрдВред <br><br><pre> <code class="javascript hljs">cd ~<span class="hljs-regexp"><span class="hljs-regexp">/build</span></span></code> </pre> <br>  рдФрд░ рд╕реНрдХреНрд╡реАрдб рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">dpkg -i squid*.deb</code> </pre> <br>  рдЕрд╕рдВрддреБрд╖реНрдЯ рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рддреБрд░рдВрдд рдПрдХ рддреНрд░реБрдЯрд┐ рдореЗрдВ рдЪрд▓рд╛рдПрдВ рдФрд░ рдХрдорд╛рдВрдб рджрд░реНрдЬ рдХрд░реЗрдВ <br><br><pre> <code class="javascript hljs">apt-get install -f</code> </pre> <br>  рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рдмрд╛рдж, рд╣рдо рд╕рдВрдХреБрд▓ рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╡реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдУрд╡рд░рд░рд╛рдЗрдЯ рди рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">apt-mark hold squid apt-mark hold squid-common apt-mark hold squidclient</code> </pre> <br>  <b>3.2.2ред</b>  <b>рд╕реНрдХреНрд╡реАрдб рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</b> <br><br>  рддреЛ, рд╕реНрдХреНрд╡реАрдб рд╕реНрдерд╛рдкрд┐рдд рд╣реИ, рдпрд╣ рд╣рдорд╛рд░реА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛ рд╣реБрдЖ рд╣реИред <br><br>  рд╕рднреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ <i><b>/etc/squid/squid.conf</b></i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╣реИрдВред  рдЗрд╕рдореЗрдВ рдХрдИ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ рд╣реИрдВ рдФрд░ рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ рдпрд╣ рдмрд╣реБрдд рдЬрдЯрд┐рд▓ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕рдореЗрдВ рдХреБрдЫ рднреА рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рд╣реИред  рд╢реБрд░реБрдЖрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдкрд╣рд▓реЗ рдореВрд▓ рдХреА рдирдХрд▓ рдХрд░рдХреЗ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рд╕реЗ рдЗрд╕реЗ рд╕рд╛рдл рдХрд░реЗрдВрдЧреЗ, рдпрджрд┐ рдЖрдк рдЕрдЪрд╛рдирдХ рдЗрд╕реЗ рдФрд░ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рд╣рдо рд╕реАрдзреЗ рд╕реНрдХреНрд╡реАрдб рд╡рд╛рд▓реЗ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЬрд╛рдПрдВрдЧреЗред <br><br><pre> <code class="javascript hljs">cd /etc/squid cp squid.conf squid.conf.backup cat squid.conf.backup | egrep <span class="hljs-string"><span class="hljs-string">"^[^#]"</span></span> &gt; squid.conf</code> </pre> <br>  рдЕрдм рд╕реНрдХреНрд╡реАрдб рдЦреЛрд▓реЗрдВ редconf <br><br><pre> <code class="javascript hljs">nano squid.conf</code> </pre> <br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрд╕рдиреЗ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рдордВрдЬреВрд░реА рджреЗ рджреА рдФрд░ рдЬрд┐рддрдирд╛ рд╡рд╣ рджрд┐рдЦ рд░рд╣рд╛ рдерд╛ рдЙрддрдирд╛ рд╣реА рд░реБрдХ рдЧрдпрд╛ред <br>  рд╕реНрдкреЙрдЗрд▓рд░ рдХреЗ рддрд╣рдд, рдореИрдВ рдЕрдкрдиреА рдлрд╛рдЗрд▓ рдХреЛ рдЙрди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде рдкреЛрд╕реНрдЯ рдХрд░реВрдВрдЧрд╛ рдЬреЛ рддреНрд░реБрдЯрд┐рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИрдВ, рдФрд░ рдиреАрдЪреЗ рдореИрдВ рдмреНрд▓реЙрдХ рдореЗрдВ рд╡рд░реНрдгрди рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдФрд░ рдХреИрд╕реЗред <br><br><div class="spoiler">  <b class="spoiler_title">рд╕реНрдХреНрд╡рд┐рдб.рдХреЙрдиреНрдлрд╝ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</b> <div class="spoiler_text"><pre> <code class="javascript hljs">acl localnet src <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> acl worktime time <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-number"><span class="hljs-number">-15</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> acl SSL_ports port <span class="hljs-number"><span class="hljs-number">443</span></span> acl Safe_ports port <span class="hljs-number"><span class="hljs-number">80</span></span> # http acl Safe_ports port <span class="hljs-number"><span class="hljs-number">21</span></span> # ftp acl Safe_ports port <span class="hljs-number"><span class="hljs-number">443</span></span> # https acl Safe_ports port <span class="hljs-number"><span class="hljs-number">70</span></span> # gopher acl Safe_ports port <span class="hljs-number"><span class="hljs-number">210</span></span> # wais acl Safe_ports port <span class="hljs-number"><span class="hljs-number">1025</span></span><span class="hljs-number"><span class="hljs-number">-65535</span></span> # unregistered ports acl Safe_ports port <span class="hljs-number"><span class="hljs-number">280</span></span> # http-mgmt acl Safe_ports port <span class="hljs-number"><span class="hljs-number">488</span></span> # gss-http acl Safe_ports port <span class="hljs-number"><span class="hljs-number">591</span></span> # filemaker acl Safe_ports port <span class="hljs-number"><span class="hljs-number">777</span></span> # multiling http acl CONNECT method CONNECT acl blacklist url_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/blacklist"</span></span> acl whitelist url_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/whitelist"</span></span> http_access allow localhost http_access deny manager http_access deny !Safe_ports http_access deny CONNECT !SSL_ports http_access allow CONNECT http_access deny blacklist http_access allow whitelist http_access deny all worktime http_access allow all http_port <span class="hljs-number"><span class="hljs-number">3128</span></span> http_port <span class="hljs-number"><span class="hljs-number">3129</span></span> intercept https_port <span class="hljs-number"><span class="hljs-number">3130</span></span> intercept ssl-bump options=ALL:NO_SSLv3:NO_SSLv2 connection-auth=off cert=<span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>squid/squid.pem always_direct allow all sslproxy_cert_error allow all sslproxy_flags DONT_VERIFY_PEER acl blacklist_ssl ssl::server_name_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/blacklist_ssl"</span></span> acl whitelist_ssl ssl::server_name_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/whitelist_ssl"</span></span> acl step1 at_step SslBump1 ssl_bump peek step1 ssl_bump terminate blacklist_ssl ssl_bump splice whitelist_ssl ssl_bump terminate all worktime ssl_bump splice all sslcrtd_program /usr/lib/squid/ssl_crtd -s /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/lib/ssl_db -M <span class="hljs-number"><span class="hljs-number">4</span></span>MB # cache_mem <span class="hljs-number"><span class="hljs-number">512</span></span> MB maximum_object_size_in_memory <span class="hljs-number"><span class="hljs-number">512</span></span> KB memory_replacement_policy lru cache_dir aufs /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/spool/squid <span class="hljs-number"><span class="hljs-number">2048</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> # access_log daemon:<span class="hljs-regexp"><span class="hljs-regexp">/var/</span></span>log/squid/access.log squid logfile_rotate <span class="hljs-number"><span class="hljs-number">1</span></span> coredump_dir /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/spool/squid refresh_pattern ^ftp: <span class="hljs-number"><span class="hljs-number">1440</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">10080</span></span> refresh_pattern ^gopher: <span class="hljs-number"><span class="hljs-number">1440</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>% <span class="hljs-number"><span class="hljs-number">1440</span></span> refresh_pattern -i (<span class="hljs-regexp"><span class="hljs-regexp">/cgi-bin/</span></span>|\?) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>% <span class="hljs-number"><span class="hljs-number">0</span></span> refresh_pattern (Release|Packages(.gz)*)$ <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">2880</span></span> refresh_pattern . <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">4320</span></span></code> </pre> <br></div></div><br>  <i><b>рдкрд╣рд▓рд╛ рдмреНрд▓реЙрдХ</b></i> рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИред <br><br><pre> <code class="javascript hljs">acl localnet src <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> acl worktime time <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span><span class="hljs-number"><span class="hljs-number">-15</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> acl SSL_ports port <span class="hljs-number"><span class="hljs-number">443</span></span> acl Safe_ports port <span class="hljs-number"><span class="hljs-number">80</span></span> # http acl Safe_ports port <span class="hljs-number"><span class="hljs-number">21</span></span> # ftp acl Safe_ports port <span class="hljs-number"><span class="hljs-number">443</span></span> # https acl Safe_ports port <span class="hljs-number"><span class="hljs-number">70</span></span> # gopher acl Safe_ports port <span class="hljs-number"><span class="hljs-number">210</span></span> # wais acl Safe_ports port <span class="hljs-number"><span class="hljs-number">1025</span></span><span class="hljs-number"><span class="hljs-number">-65535</span></span> # unregistered ports acl Safe_ports port <span class="hljs-number"><span class="hljs-number">280</span></span> # http-mgmt acl Safe_ports port <span class="hljs-number"><span class="hljs-number">488</span></span> # gss-http acl Safe_ports port <span class="hljs-number"><span class="hljs-number">591</span></span> # filemaker acl Safe_ports port <span class="hljs-number"><span class="hljs-number">777</span></span> # multiling http acl CONNECT method CONNECT</code> </pre> <br>  рд╡рд╣ рдорд╛рдирдХ рдПрд╕рдПрд▓ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдЗрд╕рдореЗрдВ, рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рдореЗрдВ, рд╣рдо рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд▓рд┐рдП рдмрджрд▓рддреЗ рд╣реИрдВ, рдФрд░ рд╣рдо рдХрд╛рд░реНрдп рд╕рдордп (рд╡реИрдХрд▓реНрдкрд┐рдХ) рдХреЗ рдПрд╕рдПрд▓ рдХреЛ рднреА рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдореИрдВрдиреЗ рдЗрд╕ рддрдереНрдп рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдЬреЛрдбрд╝рд╛ рдХрд┐ рд╢рд┐рдХреНрд╖рдХ рдЕрдХреНрд╕рд░ рдореБрдЭрд╕реЗ рд╢рд┐рдХрд╛рдпрдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╡реЗ рдХреБрдЫ рднреА рдирд╣реАрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рдм рдХреБрдЫ рдЕрдкреНрд░рд╛рдкреНрдп рд╣реИред  рдмреЗрд╢рдХ, рдореБрдЭреЗ рдЦреБрд╢реА рд╣реИ рдХрд┐ рд╕рдм рдХреБрдЫ рдЙрд╕реА рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬреИрд╕реЗ рдХрд┐, рд▓реЗрдХрд┐рди, рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ, рдореИрдВ рдпрд╣ рд╕реБрдирдХрд░ рдердХ рдЧрдпрд╛ рд╣реВрдВред  рдЕрдм рдореИрдВ рдЙрдирдХреЗ рджрд╛рд╡реЗ рдХреА рд░рд┐рдкреЛрд░реНрдЯрд┐рдВрдЧ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ рдХрд┐ 15:00 рдХреЗ рдмрд╛рдж рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдмрдВрдж рдХрд░ рджреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рд╡реЗ рдЕрдкрдиреА рдЬрд╝рд░реВрд░рдд рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ (рд▓рдЧрднрдЧ) рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВред  рдЖрдк рдЗрд╕ acl рдХреЛ рдЬреЛрдбрд╝реЗ рдмрд┐рдирд╛ рдЕрдкрдирд╛ рд╕рдордп рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдШрдбрд╝реА рдХреЗ рдЖрд╕рдкрд╛рд╕ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  <i><b>рджреВрд╕рд░рд╛ рдмреНрд▓реЙрдХ</b></i> HTTP рдХреЗ рд▓рд┐рдП рдЕрдиреБрдордд рдФрд░ рдирд┐рд╖рд┐рджреНрдз рд╕рд╛рдЗрдЯреЛрдВ рдХреА рд╕реВрдЪреА рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рджрд┐рдЦрддрд╛ рд╣реИред <br><br><pre> <code class="javascript hljs">acl blacklist url_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/blacklist"</span></span> acl whitelist url_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/whitelist"</span></span></code> </pre><br>  рд╣рдо рдмрд╛рдж рдореЗрдВ рдЕрдиреБрдордд рдФрд░ рдирд┐рд╖рд┐рджреНрдз рд╕рд╛рдЗрдЯреЛрдВ рдХреА рд╕реВрдЪреА рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрд╕реАрдПрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  <i><b>рддреАрд╕рд░рд╛ рдмреНрд▓реЙрдХ</b></i> HTTP рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ <br><br><pre> <code class="javascript hljs">http_access allow localhost http_access deny manager http_access deny !Safe_ports http_access deny CONNECT !SSL_ports http_access allow CONNECT http_access deny blacklist http_access allow whitelist http_access deny all worktime http_access allow all</code> </pre> <br>  рдпрд╣рд╛рдБ рдЖрдЗрдЯрдо <i>http_access рдЕрдиреБрдорддрд┐ CONNECT рдХреА</i> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХреЗ рдмрд┐рдирд╛ рд╕реНрдХреНрд╡реАрдб рдХрд┐рд╕реА рдХреЛ рднреА рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдирд╣реАрдВ рдЬрд╛рдиреЗ рджреЗрдЧрд╛ред  рдЗрд╕рдХреЗ рдЖрдЧреЗ рдмреНрд▓реИрдХ рдПрдВрдб рд╡реНрд╣рд╛рдЗрдЯ рд▓рд┐рд╕реНрдЯ рдХреЗ рдирд┐рдпрдо рд╣реИрдВред  <i>рдЗрдирдХрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ</i> рдФрд░ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ <i>рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ</i> рдФрд░ рдХреНрд░рдорд╢рдГ рдкрд╣реБрдВрдЪ рдХреА <i>рдЕрдиреБрдорддрд┐ рджреЗрддреЗ</i> рд╣реИрдВред  рдЙрдирдХреЗ рдЖрдиреЗ рдХреЗ рдмрд╛рдж рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдШрдВрдЯреЛрдВ рдХреЗ рджреМрд░рд╛рди рд╕рднреА HTTP рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдирд┐рдпрдо рдЖрддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдкрдиреЗ рдХрд╛рдо рдХреЗ рдШрдВрдЯреЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдирд╣реАрдВ рдХрд┐рдП рд╣реИрдВ, рддреЛ <i>рд╡рд░реНрдХрдЯрд╛рдЗрдо</i> рд╣рдЯрд╛ рджреЗрдВ, рдФрд░ рдкреНрд░рддрд┐рдмрдВрдз рд╕реНрдерд╛рдпреА рд╣реЛрдЧрд╛ред  рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ рдирд┐рдпрдореЛрдВ рдХрд╛ рдХреНрд░рдо рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕реНрдХреНрд╡реАрдб рдЙрдиреНрд╣реЗрдВ рдКрдкрд░ рд╕реЗ рдиреАрдЪреЗ рддрдХ рдкрдврд╝рддрд╛ рд╣реИ <br>  <i><b>рдЪреМрдерд╛ рдмреНрд▓реЙрдХ</b></i> рд╕реНрдХреНрд╡рд┐рдб рдХреЗ рд▓рд┐рдП рдкреЛрд░реНрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br><pre> <code class="javascript hljs">http_port <span class="hljs-number"><span class="hljs-number">3128</span></span> http_port <span class="hljs-number"><span class="hljs-number">3129</span></span> intercept https_port <span class="hljs-number"><span class="hljs-number">3130</span></span> intercept ssl-bump options=ALL:NO_SSLv3:NO_SSLv2 connection-auth=off cert=<span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>squid/squid.pem</code> </pre> <br>  рдкрд╣рд▓рд╛ рдкреИрд░рд╛рдореАрдЯрд░ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ "рддреНрд░реБрдЯрд┐: рдХреЛрдИ рдЕрдЧреНрд░реЗрд╖рд┐рдд-рдкреНрд░реЙрдХреНрд╕реА рдкреЛрд░реНрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛" рддреНрд░реБрдЯрд┐ рд▓реЙрдЧ рдореЗрдВ рдЕрд╕реАрдо рд░реВрдк рд╕реЗ рдкреНрд░рдХрдЯ рди рд╣реЛред  рдпрд╣ рд▓реЙрдЧ рднрд░рддрд╛ рд╣реИ рдФрд░, рдЗрд╕рд▓рд┐рдП, рдореЗрдореЛрд░реАред  рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЧрд▓рддреА, рд▓реЗрдХрд┐рди рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ, рд╣рдорд╛рд░реЗ рдЦрдВрдб-рдЦрдВрдб рдореЗрдВ рдореБрдЭреЗ рдпрд╣ рдирд╣реАрдВ рдорд┐рд▓рд╛ рдХрд┐ рдЗрд╕реЗ рдХреИрд╕реЗ рдареАрдХ рдХрд┐рдпрд╛ рдЬрд╛рдП, рд╡рд┐рджреЗрд╢реА рдордВрдЪреЛрдВ рдиреЗ рдорджрдж рдХреАред  рджреВрд╕рд░рд╛ рдкреИрд░рд╛рдореАрдЯрд░ HTTP рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдкреЛрд░реНрдЯ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред  <i>рдЕрд╡рд░реЛрдзрди рдХрд╛</i> рдЕрд░реНрде рд╣реИ рдкреНрд░реЙрдХреНрд╕реА рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛, рдЕрд░реНрдерд╛рдд, рдкреНрд░рддреНрдпреЗрдХ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдЧреАред <br>  рддреАрд╕рд░рд╛ рдкреИрд░рд╛рдореАрдЯрд░ HTTPS рдкреЛрд░реНрдЯ рдФрд░ рдЙрд╕рдХреЗ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдПрдХ рд▓рдВрдмреА рд▓рд╛рдЗрди рд╣реИред  <i>рд╕реНрдХреНрд╡реАрдб.рдкреЗрдо</i> рдлрд╝рд╛рдЗрд▓ рд╣рдорд╛рд░рд╛ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рдо рдмрд╛рдж рдореЗрдВ рдмрдирд╛рдПрдВрдЧреЗред <br><br>  <i><b>рдкрд╛рдВрдЪрд╡рд╛рдВ рдмреНрд▓реЙрдХ</b></i> рд╕реНрдХреНрд╡реАрдб рдХреЗ рд╕рд╛рде рдПрд╕рдПрд╕рдПрд▓ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╡рд╣ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЙрдЪреНрдЪ рдХреИрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рд╕рднреА рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рддреБрд░рдВрдд рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдЕрдВрддрд┐рдо рджреЛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕рддреНрдпрд╛рдкрди рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рднреА рдХрдиреЗрдХреНрд╢рди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдРрд╕реЗ рд╕рдВрд╕рд╛рдзрди рдкрд░ рдЬрд╛рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рди рдХрд┐ рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ред  рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред <br><br><pre> <code class="javascript hljs">always_direct allow all sslproxy_cert_error allow all sslproxy_flags DONT_VERIFY_PEER</code> </pre> <br>  <i><b>рдЫрдард╛ рдмреНрд▓реЙрдХ</b></i> "рдмреНрд▓реИрдХ" рдФрд░ "рд╡реНрд╣рд╛рдЗрдЯ" рд╕реВрдЪрд┐рдпреЛрдВ рдХреЗ рдПрд╕рдПрд▓рдПрд▓ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдмрд╛рдж рдореЗрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд╕рд╛рде рд╣реА рдПрдЪрдЯреАрдЯреАрдкреАрдПрд╕ рдЯреНрд░реИрдлрд┐рдХ рдХреЗ рдЕрд╡рд░реЛрдзрди рдХреА рдЧрд╣рд░рд╛рдИред <br><br><pre> <code class="javascript hljs">acl blacklist_ssl ssl::server_name_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/blacklist_ssl"</span></span> acl whitelist_ssl ssl::server_name_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/whitelist_ssl"</span></span> acl step1 at_step SslBump1</code> </pre> <br>  <i><b>рд╕рд╛рддрд╡рд╛рдВ рдмреНрд▓реЙрдХ</b></i> HTTPS рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрд╕реЗрд╕ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдпрд╣рд╛рдВ, рдкреНрд░рддрд┐рдмрдВрдз рдФрд░ рдЕрдиреБрдорддрд┐ рдХреНрд░рдорд╢рдГ <i>рд╕рдорд╛рдкреНрдд</i> рдФрд░ <i>рдмрдВрдЯрд╡рд╛рд░реЗ рдХреЗ</i> рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдлрд┐рд░, рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд╛рд░реНрдп рд╕рдордп рдирд╣реАрдВ рд╣реИ, рддреЛ <i>рд╡рд░реНрдХрдЯрд╛рдЗрдо</i> рдирд┐рдХрд╛рд▓рдирд╛ рди рднреВрд▓реЗрдВред <br><br><pre> <code class="javascript hljs">ssl_bump peek step1 ssl_bump terminate blacklist_ssl ssl_bump splice whitelist_ssl ssl_bump terminate all worktime ssl_bump splice all sslcrtd_program /usr/lib/squid/ssl_crtd -s /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/lib/ssl_db -M <span class="hljs-number"><span class="hljs-number">4</span></span>MB</code> </pre><br>  <i><b>рдЖрдард╡рд╛рдВ рдмреНрд▓реЙрдХ</b></i> рд╣рдорд╛рд░реЗ рд╕реНрдХреНрд╡реАрдб рдХрд╛ рдХреИрд╢ рдФрд░ рд▓реЙрдЧ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред  рдпрд╣рд╛рдВ рдпрд╣ рдХреЗрд╡рд▓ <i>рд▓реЙрдЧрдлрд╝рд╛рдЗрд▓_рдкреНрд░реЛрдЯреЗрдЯ</i> рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ, рдЬреЛ рдЙрд╕ рджрд┐рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рджреМрд░рд╛рди рд▓реЙрдЧ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддрд╛ рд╣реИред <br><br><pre> <code class="javascript hljs"># cache_mem <span class="hljs-number"><span class="hljs-number">512</span></span> MB maximum_object_size_in_memory <span class="hljs-number"><span class="hljs-number">512</span></span> KB memory_replacement_policy lru cache_dir aufs /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/spool/squid <span class="hljs-number"><span class="hljs-number">2048</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> # access_log daemon:<span class="hljs-regexp"><span class="hljs-regexp">/var/</span></span>log/squid/access.log squid logfile_rotate <span class="hljs-number"><span class="hljs-number">1</span></span> coredump_dir /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/spool/squid refresh_pattern ^ftp: <span class="hljs-number"><span class="hljs-number">1440</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">10080</span></span> refresh_pattern ^gopher: <span class="hljs-number"><span class="hljs-number">1440</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>% <span class="hljs-number"><span class="hljs-number">1440</span></span> refresh_pattern -i (<span class="hljs-regexp"><span class="hljs-regexp">/cgi-bin/</span></span>|\?) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>% <span class="hljs-number"><span class="hljs-number">0</span></span> refresh_pattern (Release|Packages(.gz)*)$ <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">2880</span></span> refresh_pattern . <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>% <span class="hljs-number"><span class="hljs-number">4320</span></span></code> </pre> <br>  рдпрд╣ squid.conf рдХрд╛ рд╕реЗрдЯрдЕрдк рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИред  рд╣рдо рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рд╣реЗрдЬрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдФрд░ рд╕реВрдЪрд┐рдпреЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВред <br><br>  рд╕реНрдХреНрд╡реАрдб рдХреЗ рд╕рд╛рде рдлрд╝реЛрд▓реНрдбрд░ рдкрд░ рдЬрд╛рдПрдВ <br><br><pre> <code class="javascript hljs">cd /etc/squid/</code> </pre> <br>  рдФрд░ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрди рдХрдорд╛рдВрдб рджрд░реНрдЬ рдХрд░реЗрдВ <br><br><pre> <code class="javascript hljs">openssl req -<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> -newkey rsa:<span class="hljs-number"><span class="hljs-number">1024</span></span> -days <span class="hljs-number"><span class="hljs-number">36500</span></span> -nodes -x509 -keyout squid.pem -out squid.pem</code> </pre> <br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдбреЗрдЯрд╛ рджрд░реНрдЬ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдкреНрд░рдорд╛рдг рдкрддреНрд░ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреВрд▓рдиреЗ рдХреЗ рд▓рд┐рдП 100 рд╡рд░реНрд╖реЛрдВ рдХреЗ рд▓рд┐рдП рдорд╛рдиреНрдп рд╣реИред  рдпрд╣ рдХреЗрд╡рд▓ рдкреНрд░реЙрдХреНрд╕реА рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><br>  рдЕрдм рд╣рдорд╛рд░реА рд╕реВрдЪреА рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛рдПрдБред <br><br><pre> <code class="javascript hljs">touch blacklist touch whitelist cp whitelist whitelist_ssl cp blacklist blacklist_ssl</code> </pre> <br>  рд╕рд╛рдЗрдЯреЗрдВ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, mail.ru рдХреЛ рдЕрдирд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <i>рд╢реНрд╡реЗрддрд╕реВрдЪреА</i> рдЦреЛрд▓реЗрдВ <br><br><pre> <code class="javascript hljs">nano whitelist</code> </pre> <br>  рдФрд░ рдЗрд╕рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рдЬреЛрдбрд╝реЗрдВред <br><br><pre> <code class="javascript hljs">mail\.ru</code> </pre> <br>  рдЕрдм Games.Mail.ru рдХреЛ рдмреНрд▓реЙрдХ рдХрд░реЗрдВред  рдЪрд▓рд┐рдП рд╣рдорд╛рд░реА <i>рдХрд╛рд▓реА рд╕реВрдЪреА</i> рдЦреЛрд▓рддреЗ рд╣реИрдВ <br><br><pre> <code class="javascript hljs">nano blacklist</code> </pre> <br>  рдФрд░ рдЗрд╕рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд▓рд┐рдЦреЗрдВ <br><br><pre> <code class="javascript hljs">games\.mail\.ru</code> </pre> <br>  рдЪреВрдВрдХрд┐, рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдПрдХ рдмреНрд▓реИрдХрд▓рд┐рд╕реНрдЯ рдмреНрд▓реЙрдХрд░ рд╣рдорд╛рд░реА рд╕рдлреЗрдж рд╕реВрдЪреА рд╕реЗ рдКрдкрд░ рд╣реИ, рдЬрдм рдЖрдк mail.ru рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╕рд╛рдЗрдЯ рдЕрдкреЗрдХреНрд╖рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЦреБрд▓ рдЬрд╛рдПрдЧреА (рдЪрд┐рддреНрд░реЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░, рд▓реЗрдХрд┐рди рдЙрд╕ рдкрд░ рдмрд╛рдж рдореЗрдВ рдФрд░ рдЕрдзрд┐рдХ), рдФрд░ рдпрджрд┐ рдЖрдк рдЧреЗрдореНрд╕ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рд╕реНрдХреНрд╡реАрдб рдХрд░реЗрдВред рдЬрд╛рдиреЗ рдирд╣реАрдВ рджреЗрдВрдЧреЗред <br><br>  рдХреБрдЫ рд╕рд╛рдЗрдЯреЛрдВ рдореЗрдВ рдХрдИ рдЙрдк-рдбреЛрдореЗрди, рдЙрдк-рдбреЛрдореЗрди рдЖрджрд┐ рд╣реЛрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, mail.ru рдЕрдкрдиреА рдЫрд╡рд┐рдпреЛрдВ рдХреЛ imgsmail.ru рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред  рдЕрдиреНрдп рд╕рдорд╛рди рд╕рд╛рдЗрдЯреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рдЖрдкрдХреЛ рдХрд┐рд╕реА рднреА рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рд╕рд╛рдЗрдЯ рдЦреЛрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдореИрдВ рдХреНрд░реЛрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ) рдФрд░, рдмрд╛рдж рдореЗрдВ, рдбреЗрд╡рд▓рдкрд░ рдЯреВрд▓ (рдХреНрд░реЛрдо рдореЗрдВ рдЙрдиреНрд╣реЗрдВ F12 рджрдмрд╛рдХрд░ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред <br><br><img src="https://habrastorage.org/webt/ie/43/a7/ie43a7r-zkjhouxldavryxg0kjg.jpeg"><br><br>  рд╕реНрд░реЛрдд рдЯреИрдм рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рд╕рд╛рдЗрдЯ рдХрд┐рди рдЕрдиреНрдп рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рдЬрд╛рдирдХрд╛рд░реА рд▓реЛрдб рдХрд░рддреА рд╣реИред <br><br>  рд╕рд╛рдЗрдЯреЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдЙрдиреНрд╣реЗрдВ HTTPS рдХреА рд╕реВрдЪрд┐рдпреЛрдВ рдореЗрдВ рдХреЙрдкреА рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">cp whitelist whitelist_ssl cp blacklist blacklist_ssl</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">рд╕реВрдЪреА рднрд░реЗрдВ рдЯрд┐рдк</b> <div class="spoiler_text">  рдЕрдкрдиреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдПрдХ рд╕рд╛рджрд╛ рдкрд╛рда рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ, рдЗрд╕рдореЗрдВ рдЕрдиреБрдордд рд╕рд╛рдЗрдЯреЛрдВ рдХреА рд╕реВрдЪреА рдвреВрдВрдвреЗрдВ рдФрд░ рдХреЙрдкреА рдХрд░реЗрдВ, рдЗрд╕реЗ рдЕрдкрдиреЗ рдкрд╛рд╕ рдЬреЛрдбрд╝реЗрдВред  рдлрд┐рд░, рдПрдХ рдирд┐рдпрдорд┐рдд рдиреЛрдЯрдмреБрдХ рдореЗрдВ, рдПрдХ рд╕реНрд▓реИрд╢ рдмрд┐рдВрджреБ (\) рдХреЗ рд╕рд╛рде рдмрд┐рдВрджреБ рдХреЛ рдСрдЯреЛ-рдмрджрд▓реЗрдВ рдФрд░ рдЙрд╕реА рдСрдЯреЛ-рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди (www, http, "/" рд╡рд░реНрдг, рдЖрджрд┐) рдХреЗ рд╕рд╛рде рдЕрдирд╛рд╡рд╢реНрдпрдХ рдХреЛ рд╣рдЯрд╛ рджреЗрдВред  рдлрд┐рд░, рдЯрд░реНрдорд┐рдирд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдРрд╕реА рдлрд╛рдЗрд▓, рд╕рд░реНрд╡рд░ рдкрд░ рд╢реАрдЯ рдкрд░ рддреБрд░рдВрдд рдХреЙрдкреА рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред <br></div></div><br>  рдЕрдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">squid -k check</code> </pre> <br>  рдпрджрд┐ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ, рддреЛ рд╕реНрдХреНрд╡рд┐рдб рдХреЛ рд░реЛрдХ рджреЗрдВред <br><br><pre> <code class="javascript hljs">/etc/init.d/squid stop</code> </pre> <br>  рдХреИрд╢ рдХрд╛ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХрд░реЗрдВ <br><br><pre> <code class="javascript hljs">squid -z</code> </pre> <br>  рдФрд░ рдлрд┐рд░ рд╕реЗ рд╕реНрдХреНрд╡реАрдб рдЪрд▓рд╛рдПрдВ <br><br><pre> <code class="javascript hljs">/etc/init.d/squid start</code> </pre> <br>  рд╕реВрдЪрд┐рдпреЛрдВ рдпрд╛ рд╕реНрдХреНрд╡реАрдб рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдХрд┐рд╕реА рднреА рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рдж, рдЗрд╕реЗ рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдкреБрдирдГ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП <br><br><pre> <code class="javascript hljs">/etc/init.d/squid restart</code> </pre> <br>  рдЖрдк рдкрде <i><b>/ рдпреВрдПрд╕рдЖрд░ / рд╢реЗрдпрд░ / рд╕реНрдХреНрд╡реАрдб / рддреНрд░реБрдЯрд┐рдпреЛрдВ / ~ рд░реВрд╕реА 1251 рдХреЗ</b></i> рддрд╣рдд рдПрдХреНрд╕реЗрд╕ рдкреНрд░рддрд┐рдмрдВрдз рдкреЗрдЬ (рдХреЗрд╡рд▓ HTTP рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ) рднреА рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред  <i><b>ERR_ACCESS_DENIED</b></i> рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ <i><b>рджреЗрдЦреЗрдВ</b></i> рдФрд░ рдЗрд╕реЗ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВред  рдлрд╝рд╛рдЗрд▓ рд╕рд┐рдВрдЯреИрдХреНрд╕ HTML рд╣реИред <br><br><h4>  3.3ред  рд╕рд░реНрд╡рд░ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </h4><br>  рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <b>рд╡реЗрдмрдорд┐рди</b> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ, рдЬрд┐рд╕рдХреА рдорджрдж рд╕реЗ рд╣рдо рдЕрдкрдиреЗ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрдк рд╕реАрдкреАрдпреВ, рд░реИрдо рдЖрджрд┐ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рдВрдХреБрд▓ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдШрдЯрдХреЛрдВ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рднреА рдмрд╣реБрдд рдХреБрдЫред  рдЗрд╕рдХрд╛ рдЕрдкрдирд╛ рдЯрд░реНрдорд┐рдирд▓ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЕрдирд╛рдбрд╝реА рд╣реИред  рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд┐рд╕реА рднреА рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдЖрдк рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдХрд┐рд╕реА рднреА рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдкрд░реНрдпрд╛рдкреНрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╕реБрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реИред  рдпрджрд┐ рд╡рд╛рдВрдЫрд┐рдд рд╣реИ, рддреЛ рдХрдиреЗрдХреНрд╢рди рдХреЗрд╡рд▓ рд╡реЗрдмрд┐рди рдореЗрдВ "рдЖрдИрдкреА рдПрдХреНрд╕реЗрд╕ рдХрдВрдЯреНрд░реЛрд▓" рдореЗрдВ рдХреЗрд╡рд▓ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЖрдИрдкреА рдкрддреЗ рддрдХ рд╕реАрдорд┐рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рд╕реНрдерд╛рдкрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╡реЗрдмрдорд┐рди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдЬреЛрдбрд╝реЗрдВред  рдЦреБрд▓рд╛ рд╕реНрд░реЛрддред рд╕реВрдЪреАред <br><br><pre> <code class="javascript hljs">nano /etc/apt/sources.list</code> </pre> <br>  рдФрд░ рдиреАрдЪреЗ рдХреА рд▓рд╛рдЗрди рдХреЛ рдЬреЛрдбрд╝ рджреЗрдВред <br><br><pre> <code class="javascript hljs">deb http:<span class="hljs-comment"><span class="hljs-comment">//download.webmin.com/download/repository sarge contrib</span></span></code> </pre> <br>  рдЕрдм GPG рдХреБрдВрдЬреА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╕рдВрдХреБрд▓ Webmin рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рд╣реИрдВ <br><br><pre> <code class="javascript hljs">cd /root wget http:<span class="hljs-comment"><span class="hljs-comment">//www.webmin.com/jcameron-key.asc apt-key add jcameron-key.asc</span></span></code> </pre> <br>  рдЕрдЧрд▓рд╛ рд╣рдо рд╕рдВрдХреБрд▓ рдХреА рд╕реВрдЪреА рдХреЛ рдЕрджреНрдпрддрди рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ <br><br><pre> <code class="javascript hljs">apt-get update apt-get install webmin</code> </pre> <br>  рдЖрдк рдПрдбреНрд░реЗрд╕ рдмрд╛рд░ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдХреЗ рдХрд┐рд╕реА рднреА рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╕рд░реНрд╡рд░ рд╕реЗ рдЬреБрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ <br><br><pre> <code class="javascript hljs">IP__:<span class="hljs-number"><span class="hljs-number">10000</span></span></code> </pre> <br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, Webmin SSL рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИ, рдФрд░ рдЕрдзрд┐рдХрд╛рдВрд╢ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдПрдХ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдкреНрд░рдорд╛рдгрдкрддреНрд░ рддреНрд░реБрдЯрд┐ рджреЗрддреЗ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд╛ рдЪрдпрди рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, SSL рдХреЛ рдЕрдХреНрд╖рдо рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдлрд╝рд╛рдЗрд▓ <i>/etc/webmin/miniserv.conf рдЦреЛрд▓реЗрдВ</i> <br><br><pre> <code class="javascript hljs">nano /etc/webmin/miniserv.conf</code> </pre> <br>  рдЗрд╕рдореЗрдВ рд╕реНрдЯреНрд░рд┐рдВрдЧ <i><b>ssl = 1 рдХрд╛</b></i> рдкрддрд╛ рд▓рдЧрд╛рдПрдВ рдФрд░ рдЗрд╕реЗ <i><b>ssl = 0 рд╕реЗ</b></i> рдмрджрд▓реЗрдВред  рдЙрд╕реА рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, рдЖрдк рдХрдиреЗрдХреНрд╢рди рдкреЛрд░реНрдЯ рдХреЛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдпрд╣ 10000 рд╣реИред рдЖрдк рдХрд┐рд╕реА рднреА рдореБрдлреНрдд рдореЗрдВ рдбрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рд╡реЗрдмрдорд┐рди рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, <i>рд╡реЗрдмрдорд┐рди -&gt; рд╡реЗрдмрдорд┐рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░ рдЬрд╛рдПрдВ</i> рдФрд░ рднрд╛рд╖рд╛ рдХреЛ рд░реВрд╕реА рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВред  рдлрд┐рд░ <i>рдиреЗрдЯрд╡рд░реНрдХ -&gt; рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдкрд░ рдЬрд╛рдПрдВ</i> ред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рд╣рдорд╛рд░рд╛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕рд╛рдл рд╣реИред  рд╣рдо рдмрд╣реБрдд рдиреАрдЪреЗ рддрдХ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ " <i>рдмреВрдЯ рдкрд░ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ</i> " рдХреЗ рд╡рд┐рдкрд░реАрдд <i>"рд╣рд╛рдВ" рдЪреБрдиреЗрдВ</i> ред  <i>"рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд▓рд╛рдЧреВ</i> рдХрд░реЗрдВ <i>" рдкрд░</i> рдХреНрд▓рд┐рдХ <i>рдХрд░реЗрдВ</i> ред  рдЕрдм рд╣рдорд╛рд░реЗ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ <i><b>/etc/webmin/firewall/iptables.save</b></i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИрдВ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рд▓реЙрдиреНрдЪ рдХреА рдЧрдИ рд╣реИрдВред  рдпрджрд┐ рдРрд╕реА рдХреЛрдИ рдлрд╝рд╛рдЗрд▓ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╡реЗрдмрд┐рди рдореЗрдВ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдЯреИрдм рдкрд░ рд▓рд╛рдЗрди "рдирд┐рдпрдореЛрдВ рдХреЗ рд╕рд╛рде рдлрд╝рд╛рдЗрд▓" рдореЗрдВ рдЬреЛ рд▓рд┐рдЦрд╛ рд╣реИ рдЙрд╕реЗ рджреЗрдЦреЗрдВред  рдЗрд╕реЗ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдЦреЛрд▓реЗрдВред <br><br><pre> <code class="javascript hljs">nano /etc/webmin/firewall/iptables.save</code> </pre> <br>  рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рдпрдореЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ <i><b>* рдиреЗрдЯ</b></i> рдмреНрд▓реЙрдХ рдФрд░ рдЕрдВрдд рдореЗрдВ рдЬрд╛рддреЗ рд╣реИрдВред <br><br><pre> <code class="javascript hljs">-A PREROUTING -p tcp -m tcp -i _ --dport <span class="hljs-number"><span class="hljs-number">80</span></span> -j DNAT --to-destination ip_:<span class="hljs-number"><span class="hljs-number">3129</span></span> -A PREROUTING -p tcp -m tcp -i _ --dport <span class="hljs-number"><span class="hljs-number">443</span></span> -j REDIRECT --to-ports <span class="hljs-number"><span class="hljs-number">3130</span></span></code> </pre> <br>  рдпреЗ рдирд┐рдпрдо рд╣рдорд╛рд░реЗ рд╕реНрдХреНрд╡реАрдб рдХреЗ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдкрд░ рд╕рд░реНрд╡рд░ рдХреЗ рдкреЛрд░реНрдЯ 80 (HTTP) рдФрд░ 443 (HTTPS) рдкрд░ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕реАрдзреЗ рдпрд╛рддрд╛рдпрд╛рдд рдХреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣рд╛рдБ рдореИрдВрдиреЗ DNAT рдФрд░ REDIRECT рдХреЗ рд╕рд╛рде рдирд┐рдпрдореЛрдВ рдХреЗ рджреЛ рд╕рдВрд╕реНрдХрд░рдг рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдПред  рдЖрдк рдЙрдкрдпреБрдХреНрдд рдкреЛрд░реНрдЯ рд▓рдЧрд╛рдХрд░ рджреЛрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдПрдХ рд╡рд┐рдХрд▓реНрдк рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рд╡реИрдХрд▓реНрдкрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрдЕрдк рдХреЗ рд▓рд┐рдП FIrewall рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ</b> <div class="spoiler_text">  рдпрджрд┐ рдЖрдк рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рд╡реИрдХрд▓реНрдкрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрдЕрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдЙрдкрдпреБрдХреНрдд рд╣реИред <br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдорд╛рд░реЗ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЗ рдирд┐рдпрдореЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рджреЗрдВред <br><pre> <code class="javascript hljs">touch /etc/nat chmod +x /etc/nat</code> </pre> <br>  рдЗрд╕реЗ рдЦреЛрд▓реЗрдВ <br><pre> <code class="javascript hljs">nano /etc/nat</code> </pre> <br>  рдФрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдордЧреНрд░реА рдЬреЛрдбрд╝реЗрдВ <br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">#!/bin/sh #Firewall iptables -t nat -A PREROUTING -p tcp -m tcp -i _ --dport 80 -j DNAT --to-destination ip_:3129 iptables -t nat -A PREROUTING -p tcp -m tcp -i _ --dport 443 -j REDIRECT --to-ports 3130</span></span></code> </pre> <br>  рдЬреИрд╕рд╛ рдХрд┐ рд╡реЗрдмрдорд┐рди рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореИрдВрдиреЗ DNAT рдФрд░ REDIRECT рдХреЗ рд╕рд╛рде рдирд┐рдпрдореЛрдВ рдХреЗ рджреЛ рд╕рдВрд╕реНрдХрд░рдг рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдПред  рдЖрдк рдЙрдкрдпреБрдХреНрдд рдкреЛрд░реНрдЯ рд▓рдЧрд╛рдХрд░ рджреЛрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдПрдХ рд╡рд┐рдХрд▓реНрдк рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред <br>  рдЕрдм рдиреЗрдЯрд╡рд░реНрдХ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рд╣рдорд╛рд░реА рдлрд╛рдЗрд▓ рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред  рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ <br><pre> <code class="javascript hljs">nano /etc/network/interfaces</code> </pre> <br>  рдФрд░ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдирд┐рдЪрд▓реЗ рднрд╛рдЧ рдореЗрдВ рд▓рд╛рдЗрди рдЬреЛрдбрд╝реЗрдВ <br><pre> <code class="javascript hljs">post-up /etc/nat</code> </pre> <br>  рдкреБрдирд╢реНрдЪ: рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдкреНрд▓рд╕ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рднрд╡рд┐рд╖реНрдп рдореЗрдВ / etc / nat рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдирд┐рдпрдо рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рд╡реЗрдмрдорд┐рди рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИред <br></div></div><br>  рдпрд╣ рд╕рд░реНрд╡рд░ рд╕реЗрдЯрдЕрдк рдХреЛ рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕реЗ рд░рд┐рдмреВрдЯ рдХрд░реЗрдВред <br><br><pre> <code class="javascript hljs">reboot</code> </pre> <br>  рдФрд░ рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рд░рд╛рдЙрдЯрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВред <br><br><h4>  3.4ред  рдкреНрд░реЙрдХреНрд╕реА рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рд░рд╛рдЙрдЯрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </h4><br>  рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдиреЗ рд░рд┐рдореЛрдЯ рдХрдВрдЯреНрд░реЛрд▓ рдХреЗ рд▓рд┐рдП <b>WinBox</b> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдкрд╣рд▓реЗ рд╣реА рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ <b>рд▓реА рд╣реИ</b> , рдЗрдВрдЯрд░рдиреЗрдЯ рдФрд░ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рд░рд╛рдЙрдЯрд░ рдкрд░ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕рд╛рдл рд╣реИред  рдЖрдкрдХреЛ LAN рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдирд╛рдо рдкрддрд╛ рд╣реИ (рдЖрдк рдЗрд╕реЗ <i>IP - DHCP рд╕рд░реНрд╡рд░ - DHCP</i> рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ)ред <br><br>  <b>рдХ)</b> рд╡рд┐рдирдмреЙрдХреНрд╕ рдкрд░ рдЬрд╛рдПрдВ, <i><b>рдЖрдИрдкреА тАЛтАЛ- рдбреАрдПрдЪрд╕реАрдкреА рд╕рд░реНрд╡рд░ - рдкрдЯреНрдЯреЛрдВ рдкрд░ рдЬрд╛рдПрдВ</b></i> ред  рд╕реВрдЪреА рдореЗрдВ рд╣рдо рдЖрдИрдкреА рдХрдВрдкреНрдпреВрдЯрд░ рдХреА рддрд▓рд╛рд╢ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ (рдирд┐рджреЗрд╢рдХ, рдкреНрд░рдмрдВрдзрди) рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдЙрди рдкрд░ рд░рд╛рдЗрдЯ-рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдореЗрдиреВ рдореЗрдВ <i><b>рдореЗрдХ рд╕реНрдЯреЗрдЯрд┐рдХ рдХрд╛</b></i> рдЪрдпрди <i><b>рдХрд░реЗрдВ</b></i> ред  рдЙрдирдХреЗ рдЖрдЧреЗ, рдЕрдХреНрд╖рд░ "рдбреА" рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдЧрддрд┐рд╢реАрд▓ред  рдЕрдм рдореИрдХ рдПрдбреНрд░реЗрд╕ рджреНрд╡рд╛рд░рд╛ рдкрдЯреНрдЯреЗ рдХреЗ рд╕рдордп рдХреА рдкрд░рд╡рд╛рд╣ рдХрд┐рдП рдмрд┐рдирд╛, рдЗрди рдкрддреЗ рдХреЛ рддреБрд░рдВрдд рдЗрди рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдХреЛ рд╕реМрдВрдкрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрджрд┐ рд▓реИрдкрдЯреЙрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд╛рдИ-рдлрд╛рдИ рдФрд░ рдХреЗрдмрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдореИрдХ рдкрддреЗ рдкрд░ рдореЗрдХ рд╕реНрдЯреЗрдЯрд┐рдХ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  <b>рдмреА)</b> рдЕрдЧрд▓рд╛, <i><b>рдЖрдИрдкреА тАЛтАЛ- рдлрд╝рд╛рдпрд░рд╡реЙрд▓ - рдкрддрд╛ рд╕реВрдЪрд┐рдпреЛрдВ</b></i> рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рдиреАрд▓реЗ <i><b>рдкреНрд▓рд╕</b></i> рдЪрд┐рд╣реНрди <i><b>"+"</b></i> рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  <i><b>рдирд╛рдо</b></i> рдлрд╝реАрд▓реНрдб рдореЗрдВ, <s>рдЙрдЬреНрдЬреНрд╡рд▓</s> рдЕрдирдлрд╝рд┐рд▓реНрдЯрд░реНрдб рдкрддреЛрдВ рдХреЗ рд╣рдорд╛рд░реЗ рд╕рдореВрд╣ рдХреЗ рд▓рд┐рдП рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, "рдкреНрд░рд╡реЗрд╢"ред  <i><b>рдкрддрд╛</b></i> рдлрд╝реАрд▓реНрдб рдореЗрдВ, рдЙрди рд▓реЛрдЧреЛрдВ рд╕реЗ рдПрдХ рдЖрдИрдкреА рдкрддрд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдПрдХ рд╕реНрдерд┐рд░ рдПрдХ рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рд╣реИред  рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдкрддреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рджреЛрд╣рд░рд╛рддреЗ рд╣реИрдВ, рдПрдХ рддреАрд░ рдХреЗ рд╕рд╛рде рдирд╛рдо рдлрд╝реАрд▓реНрдб рдореЗрдВ рд╣рдорд╛рд░реЗ рд╕рдореВрд╣ рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВред <br><br>  <b>c)</b> рдЙрд╕реА <i><b>IP</b></i> рдореЗрдВ <i><b>Mangle</b></i> рдЯреИрдм рдкрд░ рдЬрд╛рдПрдВ <i><b>- рдлрд╝рд╛рдпрд░рд╡реЙрд▓</b></i> рдФрд░ <i><b>"+"</b></i> рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдПрдХ рдЯреИрдм рдХреА рдЧрдИ рд╡рд┐рдВрдбреЛ рдЦреБрд▓ рдЬрд╛рдПрдЧреАред  <i><b>рд╕рд╛рдорд╛рдиреНрдп</b></i> рдЯреИрдм рдкрд░, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ: <br><br><pre> <code class="javascript hljs">Chain - Prerouting Src. Address - __proxy Protocol - <span class="hljs-number"><span class="hljs-number">6</span></span> (tcp) Dst. Port - <span class="hljs-number"><span class="hljs-number">80</span></span> In. Interface - __</code> </pre><br>  <b><i>рдХреНрд░рд┐рдпрд╛</i></b> рдЯреИрдм рдкрд░, рдорд╛рди <i><b>рд╕реНрд╡реАрдХрд╛рд░</b></i> рдХрд░реЗрдВ рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ <i><b>рдХрд░реЗрдВ</b></i> рдФрд░ рдареАрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред <br><br>  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рджреЛрд╣рд░рд╛рдПрдВ, рд▓реЗрдХрд┐рди <i>рдбреАрдПрд╕рдЯреА</i> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ <i>ред</i>  <i>рдкреЛрд░реНрдЯ</i> рдиреЗ рдореВрд▓реНрдп рдХреЛ <i>443 рдкрд░</i> рд╕реЗрдЯ рдХрд┐рдпрд╛ред <br><br>  <b>рдШ)</b> "+" рдкрд░ рдлрд┐рд░ рд╕реЗ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ <i><b>рд╕рд╛рдорд╛рдиреНрдп</b></i> рдЯреИрдм рдкрд░ рд╣рдо рдлрд┐рд░ рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ: <br><br><pre> <code class="javascript hljs">Chain - Prerouting Protocol - <span class="hljs-number"><span class="hljs-number">6</span></span> (tcp) Dst. Port - <span class="hljs-number"><span class="hljs-number">80</span></span> In. Interface - __</code> </pre> <br><font style="vertical-align: inherit;"></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдиреНрдирдд</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЯреИрдм рдкрд░ рдЬрд╛рдПрдВ </font><font style="vertical-align: inherit;">рдФрд░ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Src</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝реАрд▓реНрдб рдореЗрдВ </font><i><b><font style="vertical-align: inherit;">ред </font></b></i><i><b><font style="vertical-align: inherit;">рдкрддрд╛ рд╕реВрдЪреА</font></b></i><font style="vertical-align: inherit;"> "рд╣рдорд╛рд░реА рд╕реВрдЪреА рдкреНрд░рдмрдВрдзрди рдкрддреЛрдВ рдЪреБрдиреЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "ред </font><font style="vertical-align: inherit;">рд╕реВрдЪреА рдХреЗ рдЖрдЧреЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдмреЙрдХреНрд╕ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рд╕реНрдордпрд╛рджрд┐рдмреЛрдзрдХ рдЪрд┐рд╣реНрди </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"!"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ </font><b><font style="vertical-align: inherit;">ред </font></b><font style="vertical-align: inherit;">, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рддрд╛рд░реНрдХрд┐рдХ рдирд╣реАрдВ рдпрд╛ рдирдХрд╛рд░рд╛рддреНрдордХ рд╣реИред </font><i><b><font style="vertical-align: inherit;">рдПрдХреНрд╢рди</font></b></i></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЯреИрдм рдкрд░ рдЬрд╛рдПрдВ </font><font style="vertical-align: inherit;">рдФрд░ рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ:</font></font><i><b><font style="vertical-align: inherit;"></font></b></i><font style="vertical-align: inherit;"></font><br><br><pre> <code class="javascript hljs">Action - mark routing New Routing Mark - to_proxy Passthrough -  </code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдареАрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдЙрд╕реА рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХрд░реЗрдВ, рд▓реЗрдХрд┐рди </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dst</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝реАрд▓реНрдб рдореЗрдВ </font><i><font style="vertical-align: inherit;">ред </font></i><i><font style="vertical-align: inherit;">рдкреЛрд░реНрдЯ </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">443</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ </font><font style="vertical-align: inherit;">ред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдИ)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдВрдд рдореЗрдВ, рдЕрдВрддрд┐рдо рдирд┐рдпрдо рдЬреЛрдбрд╝реЗрдВред </font><font style="vertical-align: inherit;">рдкреНрд▓рд╕ рдЪрд┐рд╣реНрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рдорд╛рдиреНрдп</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЯреИрдм рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ </font><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="javascript hljs">Chain - Prerouting In. Interface - __ Routing Mark - to_proxy</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирддреАрдЬрддрди, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЖрдкрдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рдЖрджреЗрд╢ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ! </font></font><br><br><img src="https://habrastorage.org/webt/tp/vw/zi/tpvwzizj0x_x4hg5quooe1t8bpo.png"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪ)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдо </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдИрдкреА тАЛтАЛ- рд░реВрдЯ рдореЗрдВ рдЬрд╛рддреЗ рд╣реИрдВ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рд╣рдо "+" рджрдмрд╛рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ:</font></font><br><br><pre> <code class="javascript hljs">Dst. Address - <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> Gateway - __proxy Routing Mark - to_proxy</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдареАрдХ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдпрд╣ рд╣реИред </font><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд░ рдЪрд╛рд▓реВ рд╣реЛрдиреЗ рдХреЗ рд╕рд╛рде, рд╕рднреА HTTP рдФрд░ HTTPS рдЯреНрд░реИрдлрд╝рд┐рдХ рд╣рдорд╛рд░реЗ рд╕реНрдХреНрд╡рд┐рдб рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдПрдВрдЧреЗред</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.5ред </font><font style="vertical-align: inherit;">MikroTik рдФрд░ рдЕрдиреНрдп рд░рд╛рдЙрдЯрд░ рдХреЗ рд▓рд┐рдП рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕реЗрдЯрдЕрдк</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рд░рд╛рдЙрдЯрд░ рдФрд░ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рджреЛрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдмрд╕реЗ рд╕рд░рд▓ (рдХрд┐рд░рд╛рдП рдкрд░ рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдЯреБрдХрдбрд╝реЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░ рдЬреЛ рдЖрдк рдЦреБрдж рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рд░рд╛рдЙрдЯрд░ рдкрд░ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рд╕реНрдХреНрд╡реАрдб рдкрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рдПрдХреНрд╕реЗрд╕ рдХреЗ рд╕рд╛рдЭрд╛рдХрд░рдг рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВред</font></font> рддреЛ рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдо рдпрд╣ рдорд╛рдиреЗрдВрдЧреЗ рдХрд┐ рдЖрдк рд╕рднреА рдЙрдЪреНрдЪрд┐рдпреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдХреЗ рдЗрд╕ рдмрд┐рдВрджреБ рддрдХ рдкрд╣реБрдВрдЪ рдЧрдП рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рдореЗрдВ рдкреНрд░реЙрдХреНрд╕реА рдХреЛ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред рд╡рд░реНрдгрд┐рдд рд╡рд┐рдХрд▓реНрдк рдХреЗ рдкрд░реЗрд╢рд╛рдиреА рд╕реЗ рдореБрдХреНрдд рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ </font><font style="vertical-align: inherit;">рдЗрд╕ рд▓реЗрдЦ </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗ</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдиреБрдЪреНрдЫреЗрдж </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4 рдХреЗ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдк- </font><font style="vertical-align: inherit;">рдЕрдиреБрдЪреНрдЫреЗрдж </font><b><i><font style="vertical-align: inherit;">рдИ)</font></i></b><font style="vertical-align: inherit;"> рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдЖрдк рдкреВрд░реЗ рдмрд┐рдВрджреБ 3.4 (рдЫреЛрдбрд╝рдХрд░, рд╢рд╛рдпрдж, рд╕рдмрдкрд░ рдкреИрд░рд╛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛ рд░рджреНрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">рддрд╛рдХрд┐ рд╣рдорд╛рд░реЗ IP рдмрджрд▓ рди рдЬрд╛рдПрдВ), рд▓реЗрдХрд┐рди рдпрд╣ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИ - рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рд╣рдо рд░реВрдЯрд┐рдВрдЧ рдХреЛ рдЦреБрдж рд╣реА рд░рджреНрдж рдХрд░ рджреЗрдВред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдИрдкреА тАЛтАЛ- рд░реВрдЯ рдкрд░ рдЬрд╛рдПрдВ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рд╣рдорд╛рд░реЗ рдорд╛рд░реНрдЧ рдХреА рддрд▓рд╛рд╢ рдХрд░реЗрдВ, рдЗрд╕реЗ рдЪреБрдиреЗрдВ рдФрд░ </font></font><b><i><font color="#cc0000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рд╛рд▓ рдХреНрд░реЙрд╕</font></font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (рдкреНрд▓рд╕ рдЪрд┐рд╣реНрди рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рдЪреЗрдХрдорд╛рд░реНрдХ рдХреЗ рдмрдЧрд▓ рдореЗрдВ рдХреНрд░реЙрд╕) рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред рдорд╛рд░реНрдЧ рдЧреНрд░реЗ рд╣реЛ рдЬрд╛рдПрдЧрд╛ = рдпрд╣ рдЕрдХреНрд╖рдо рд╣реЛ рдЧрдпрд╛ рд╣реИред рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рднреА рдмрдВрдж рд╣реЛ рдЧрдИ, рдЕрдм рд╕рднреА рдЧреНрд░рд╛рд╣рдХ рдПрдХ рд░рд╛рдЙрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реАрдзреЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦ)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдм рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдЬрд╛рдПрдВ рдФрд░ рд╕реНрдХреНрд╡реАрдб рдХреЗ рд╕рд╛рде рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЬрд╛рдПрдВ </font></font><br><pre> <code class="javascript hljs">cd /etc/squid/</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ </font></font><br><pre> <code class="javascript hljs">nano squid.conf</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рд╣рдо рдЗрд╕реЗ рдмреНрд▓реЙрдХреЛрдВ рдореЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ: </font></font><br> <i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рд╕реНрдерд╛рди рдкрд░</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрд╕реАрдПрд▓ рд▓реЛрдХрдиреЗрдЯ рдХреЗ рд╕рд╛рде рд▓рд╛рдЗрди рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж ...</font></font><br><pre> <code class="javascript hljs">acl admins src <span class="hljs-string"><span class="hljs-string">"/etc/squid/admins-ip"</span></span> # IP   acl students src <span class="hljs-string"><span class="hljs-string">"/etc/squid/students-ip"</span></span> # IP  </code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрдВ рд╢рд┐рдХреНрд╖рдХреЛрдВ рдХреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рд╕рд╛рде рдПрдХ рд╕реВрдЪреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕рдордЭрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдмрд╛рдХреА рд╕рднреА рд╢рд┐рдХреНрд╖рдХ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЖрдк рдЗрд╕реЗ рдЕрдиреНрдп рдмреНрд▓реЙрдХреЛрдВ рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рдирд┐рдпрдореЛрдВ рдХреЗ рд╕рд╛рде рд╕реНрд╡рдпрдВ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред </font></font><br> <i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреВрд╕рд░реЗ рдмреНрд▓реЙрдХ рдореЗрдВ</font></font></b></i> <br><pre> <code class="javascript hljs">acl whitelist-stud url_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/whitelist-stud"</span></span> #     </code> </pre> <br> <i><b><font style="vertical-align: inherit;"></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Http_access рдХреЗ рдмрд╛рдж</font><i><b><font style="vertical-align: inherit;"> рддреАрд╕рд░реЗ рдмреНрд▓реЙрдХ</font></b></i><font style="vertical-align: inherit;"> рдореЗрдВ рдмреНрд▓реИрдХрд▓рд┐рд╕реНрдЯ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ</font></font><br><pre> <code class="javascript hljs">http_access allow admins #      http_access allow students whitelist-stud #       http_access deny students #       </code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдмреНрд▓реЙрдХ рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд░рд╣рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╢рд┐рдХреНрд╖рдХ (рд╕рднреА рдЕрдиреНрдп рдЖрдИрдкреА) рдЕрдкрдиреА рд╕рдлреЗрдж рд╕реВрдЪреА рджреНрд╡рд╛рд░рд╛ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдХрд╛рдо рдХреЗ рдШрдВрдЯреЛрдВ рдХреЗ рджреМрд░рд╛рди (рдпрджрд┐ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЖрдк рдкреНрд░рд╡реЗрд╢ рд╕рдореВрд╣ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд╛рддреНрдордХ рдирд┐рдпрдо рд╕реЗ рдКрдкрд░ рдХреЗ рдирд┐рдпрдо рдХреЛ рд╕реЗрдЯ рдХрд░рдХреЗ рдмреНрд▓реИрдХрд▓рд┐рд╕реНрдЯ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдПрд╕рдПрд▓ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЖрдИрдкреА (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ) рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдмреНрд▓реИрдХрд▓рд┐рд╕реНрдЯ рд╕реЗ рдКрдкрд░ рдХреЗ рдирд┐рдпрдореЛрдВ рдореЗрдВ рдбрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВред </font></font><br> <i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреМрдереЗ рдФрд░ рдкрд╛рдВрдЪрд╡реЗрдВ рдмреНрд▓реЙрдХ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╣реИрдВред </font></font><br> <i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЫрдареЗ рдмреНрд▓реЙрдХ рдореЗрдВ,</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬреЛрдбрд╝реЗрдВ</font></font><br><pre> <code class="javascript hljs">acl whitelist-stud_ssl ssl::server_name_regex -i <span class="hljs-string"><span class="hljs-string">"/etc/squid/whitelist-stud_ssl"</span></span></code> </pre> <br> <i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рддрд╡реЗрдВ рдмреНрд▓реЙрдХ рдореЗрдВ,</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ssl_bump рдХреЛ рдмреНрд▓реИрдХрд▓рд┐рд╕реНрдЯ_ssl рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЬреЛрдбрд╝реЗрдВ</font></font><br><pre> <code class="javascript hljs">ssl_bump splice admins ssl_bump splice students whitelist-stud_ssl ssl_bump terminate students</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрдд рддреАрд╕рд░реЗ рдмреНрд▓реЙрдХ рдХреЗ рд╕рдорд╛рди рд╣реИред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢реЗрд╖ рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╣реИред </font><font style="vertical-align: inherit;">рд╕рд╣реЗрдЬреЗрдВ рдФрд░ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧ)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдм рдЖрдИрдкреА рдкрддреЗ рдХреА рд╣рдорд╛рд░реА рд╕реВрдЪреА рдмрдирд╛рдПрдВред</font></font><br><pre> <code class="javascript hljs">touch admins-ip touch students-ip</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рдЫрд╛рддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╢реНрд╡реЗрдд рд╕реВрдЪреАред </font></font><br><pre> <code class="javascript hljs">touch whitelist-stud cp whitelist-stud whitelist-stud_ssl</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрд╡рд╢реНрдпрдХ рдЖрдИрдкреА рдкрддреЗ рдФрд░ рд╕рд╛рдЗрдЯреЛрдВ рдХреЛ рдЙрдЪрд┐рдд рд╕реВрдЪрд┐рдпреЛрдВ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред </font><font style="vertical-align: inherit;">рд╕рд╛рдЗрдЯреЛрдВ рдХреА рдЫрд╛рддреНрд░ рд╕реВрдЪреА рдореЗрдВ, рдЖрдк рдЙрди рд╕рд╛рдЗрдЯреЛрдВ рдХреЛ рд╣рдЯрд╛рдХрд░ рд╢рд┐рдХреНрд╖рдХреЛрдВ рдХреА рд╕реВрдЪреА рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рдирдХреА рдЫрд╛рддреНрд░реЛрдВ рдХреЛ рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рд▓рд┐рдирдХреНрд╕ рдкрд░ рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдХреЙрдкреА рдХрд░рдирд╛ рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</font></font><br><pre> <code class="javascript hljs">cp &lt;    &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">    &gt;</span></span></span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ </font></font><br><pre> <code class="javascript hljs">/etc/init.d/squid restart</code> </pre> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдо рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдкрд░ рдЖрдП рд╣реИрдВ, рдЕрд░реНрдерд╛рддреН, рдХреИрд╕реЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рд╣рдорд╛рд░реЗ рдкреНрд░реЙрдХреНрд╕реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдСрдирд▓рд╛рдЗрди рдЬрд╛рдирд╛ рд╣реИред рд╣рдореЗрдВ рдЕрдкрдиреЗ рдбреАрдПрдЪрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдХреЗ рдЧреЗрдЯрд╡реЗ рдХреЛ рд░рд╛рдЙрдЯрд░ рдХреЗ рдкрддреЗ рд╕реЗ рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░ рдХреЗ рдкрддреЗ рдореЗрдВ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ред рдмреЗрд╢рдХ, рдЗрд╕рдХреЗ рд▓рд┐рдП, рд╕рд░реНрд╡рд░ рдкрддрд╛ рд╕реНрдерд┐рд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдпрд╛ рдореИрдХ рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд┐рдХреНрд░реЛрдЯрд┐рдХ рдореЗрдВ: </font></font></b> <font style="vertical-align: inherit;"><i><b><font style="vertical-align: inherit;">рдЖрдИрдкреА тАЛтАЛрдкрд░</font></b></i></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬрд╛рдПрдВ </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдбреАрдПрдЪрд╕реАрдкреА рд╕рд░реНрд╡рд░ - рдиреЗрдЯрд╡рд░реНрдХ</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рд╣рдорд╛рд░реЗ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдбрдмрд▓-рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред рдЧреЗрдЯрд╡реЗ рдлрд╝реАрд▓реНрдб рдореЗрдВ, рд░рд╛рдЙрдЯрд░ рдХреЗ рдкрддреЗ рдХреЛ рдкреНрд░реЙрдХреНрд╕реА рд╕рд░реНрд╡рд░ рдХреЗ рдкрддреЗ рдореЗрдВ рдмрджрд▓ рджреЗрдВред рдареАрдХ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдпрд╣ рдмрд╛рдд рд╣реИред рдЖрдк рд░рд╛рдЙрдЯрд░ рдХреЛ рд░рд┐рдмреВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╕рднреА рд╕рдХреНрд░рд┐рдп рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдареАрдХ рд╕реЗ рдЕрдкрдбреЗрдЯ рд╣реЛ рдЬрд╛рдПрдВред рдЙрд╕рдХреЗ рдмрд╛рдж, рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ (рдпрджрд┐ рдпрд╣ рдирд┐рдЬреА рдерд╛)ред </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд░рд╛рдЙрдЯрд░ рдореЗрдВ:</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдкрдиреЗ рд░рд╛рдЙрдЯрд░ рдХреЗ рд▓рд┐рдП рдореИрдиреБрдЕрд▓ рдореЗрдВ рджреЗрдЦреЗрдВ рдЬрд╣рд╛рдВ рдбреАрдПрдЪрд╕реАрдкреА рд╕рд░реНрд╡рд░ рдХрд╛ рдЧреЗрдЯрд╡реЗ рдмрджрд▓рдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдХрд╣реВрдВрдЧрд╛ рдХрд┐ рдЗрд╕рдХреА рд╕реЗрдЯрд┐рдВрдЧ рдореЗрдВ рдХреНрдпрд╛ рд╣реИ :)</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреАрдЪреЗ рдкрдВрдХреНрддрд┐:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЗрд╕ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕рдорд╛рдзрд╛рди рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╣рдо рдЖрдИрдкреА рдФрд░ рд╕реВрдЪрд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдкрд╣реБрдВрдЪ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдереЗ, рдФрд░ рд╕реНрдХреНрд╡реАрдб рд▓реЙрдЧ рдореЗрдВ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд╕рд╛рдорд╛рдиреНрдп рдЖрдИрдкреА рдкрддреЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдкрдХреЛ рд░рд╛рдЙрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░реЙрдХреНрд╕реА рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рд╕реНрдкреЙрдЗрд▓рд░ рдкрдврд╝реЗрдВред</font></font><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдиреЗрдЯ рдкреНрд░реЙрдХреНрд╕реА рдХреЛ рджрд░рдХрд┐рдирд╛рд░ рдХрд░рддрд╛ рд╣реИ</font></font></b> <div class="spoiler_text">   ,  -      Squid ,        ,   , <br></div></div><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4. рдирд┐рд╖реНрдХрд░реНрд╖ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреЛ, рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рдХреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред </font><font style="vertical-align: inherit;">рд╣рдо рд▓рд┐рдирдХреНрд╕ Ubuntu 18.04 рдПрд▓рдЯреАрдПрд╕ рдХреЛ рдЦрд░реЛрдВрдЪ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣реЗ, HTTPS рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рд╕реНрдХреНрд╡реАрдб рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛, рд╡реНрд╣рд╛рдЗрдЯрд▓рд╛рдЗрдирд┐рдВрдЧ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛, рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдбреАрдПрдЪрд╕реАрдкреА рд╕рд░реНрд╡рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдмрд┐рдирд╛ рд╣рдорд╛рд░реЗ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рдкреНрд░реЙрдХреНрд╕реА рд╕рд░реНрд╡рд░ рдХреЛ рдПрдХреАрдХреГрдд рдХрд┐рдпрд╛ред</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5. рд╕реНрд░реЛрддреЛрдВ рдХреА рд╕реВрдЪреА </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦ рдмрдирд╛рддреЗ рд╕рдордп, рд╡рд┐рднрд┐рдиреНрди рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрдХрдиреАрдХреА рдмреНрд▓реЙрдЧ рдСрдлрд╝ рдЗрдВрдЯрд░рдлреЗрд╕ рдПрд▓рдПрд▓рд╕реА</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реЗрдм рд╕реЗрдлреНрдЯреА </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╕реНрдкреЗрд╢рд▓рд┐рд╕реНрдЯ </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">- рд╡реЗрдм рдлрд╝рд┐рд▓реНрдЯрд░ рдлреЙрд░ рдпреЛрд░ рдиреЗрдЯрд╡рд░реНрдХ</font></a><font style="vertical-align: inherit;"> рдХреЗ рд╕рд╛рде-рд╕рд╛рде рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЬреНрдЮрд╛рди рдФрд░ рдЕрдиреБрднрд╡ рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рд▓реЗрдЦ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдФрд░ рдкреВрд░рдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдирд┐рдореНрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдиреЗ рдмрд╣реБрдд рдорджрдж рдХреА: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдирд╛рд▓рд╕</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреЗрдЯреНрд░реЛрдЯ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╛рд░реНрд╕реВрдХ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдЙрдирдХреА рд╕рд╣рд╛рдпрддрд╛ рдФрд░ рдорджрдж рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдзрдиреНрдпрд╡рд╛рджред</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6. рд▓реЗрдЦрдХ рджреНрд╡рд╛рд░рд╛ рдиреЛрдЯреНрд╕ </font></font></h3><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдХреЛрдИ рднреА рдХрд╛рд░реНрдп </font><font style="vertical-align: inherit;">рдХрдорд╛рдВрдб рд╕реЗ рдкрд╣рд▓реЗ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬреЛрдбрд╝рдХрд░ </font><font style="vertical-align: inherit;">, рдпрд╛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo -s</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрдорд╛рдВрдб рдХреЛ рдПрдХ рдмрд╛рд░ рджрд░реНрдЬ рдХрд░рдХреЗ </font><font style="vertical-align: inherit;">рд╕реБрдкрд░рдпреБрд╕рд░ рдореЛрдб рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </font><font style="vertical-align: inherit;">ред</font></font></li><li> Squid \     ,    , ,     .          . </li><li>    , .    ,        1000 . </li><li> <s> ,           IP-  Squid.   Squid   IP- тАФ  Mikrotik.    ,      DHCP    ,      . ,    ,    ,     IP .</s> тАФ     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">Barsook</a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд╡реАрдб рдХреЗ рд▓рд┐рдП рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЧреНрд░рд╛рд╣рдХреЛрдВ (50 рд╕реЗ рдЕрдзрд┐рдХ) рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдиреНрдпреВрдирддрдо 1 рдЬреАрдмреА рд░реИрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдзрд┐рдХ рдЕрдзрд┐рдорд╛рдирддрдГ, рд╡реНрдпрдВрдЧреНрдп рд╕реНрдореГрддрд┐ рдХреЛ рдЦрд╛рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЖрдк </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢реАрд░реНрд╖</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрдорд╛рдВрдб рджрд░реНрдЬ рдХрд░рдХреЗ рд╕реНрдореГрддрд┐ рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореИрдВ рд░рд╛рдЙрдЯрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреЛрдиреЛрдВ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ, рдХреНрдпреЛрдВрдХрд┐ рдпрджрд┐ рдЖрдк рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ (рд░рд╛рдЙрдЯрд░ рд╣реА) рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдЧреЗрдЯрд╡реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рд▓реЙрдХ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font></font></li></ol><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD1:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ </font><font style="vertical-align: inherit;">рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD2:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рд░рд╛рдЙрдЯрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛, рдЬрд╣рд╛рдВ рд╕реНрдХреНрд╡реАрдб рд▓реЙрдЧ рдореЗрдВ рдкрддреЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ рддрдп рдХреА рдЧрдИрдВред </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD3:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдиреЗ 3.1 рдореЗрдВ рдПрдХ рдлрд┐рдХреНрд╕ рдЬреЛрдбрд╝рд╛ - рдкреИрдХреЗрдЯ рдХреЛ рд╕рд░реНрд╡рд░ рд╕реЗ рдЧреБрдЬрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдХрд░рдирд╛, рдЬрд┐рд╕реЗ рд╡рд╣ рд╢реБрд░реВ рдореЗрдВ рдЬреЛрдбрд╝рдирд╛ рднреВрд▓ рдЧрдпрд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рдЕрдиреНрдпрдерд╛, рдЗрдВрдЯрд░рдиреЗрдЯ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдЦ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд┐рдорд┐рддреНрд░реА 1986 рдХрд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдзрдиреНрдпрд╡рд╛рдж </font><font style="vertical-align: inherit;">ред</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi473584/">https://habr.com/ru/post/hi473584/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi473570/index.html">10 рдШрдВрдЯреЗ рдореЗрдВ 314 рдХрд┐рдореА search рдЦреЛрдЬреЗрдВ - рдЬрдВрдЧрд▓ рдХреЗ рдЦрд┐рд▓рд╛рдл рдЦреЛрдЬ рдЗрдВрдЬреАрдирд┐рдпрд░реЛрдВ рдХреА рдЕрдВрддрд┐рдо рд▓рдбрд╝рд╛рдИ</a></li>
<li><a href="../hi473572/index.html">"рдЬрдХрд░реЛрдорд╛ рд░реЛрдбрд┐рдирд╛" рдХреА рдЬрд╛рдПрдЧреА: рдЬрд░реНрдордиреА рдирдИ рдкрджреНрдзрддрд┐ рд╕реЗ рд░рдгрдиреАрддрд┐рдХ рднрдВрдбрд╛рд░ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░реЗрдЧреА</a></li>
<li><a href="../hi473574/index.html">рдЯреАрдПрд╕рдбреА рдкрд░ рдЖрд╡реЗрджрди рдФрд░ 1 рд╕реА рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░: рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬрд╝ 8.3 HTTP-Service рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред рднрд╛рдЧ 3 (рдмрд╛рд░рдХреЛрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛</a></li>
<li><a href="../hi473576/index.html">рдбреЗрд╡рд▓рдкрд░ рдкреНрд░рдпреЛрдЧ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░</a></li>
<li><a href="../hi473578/index.html">Nginx рдХреЗ рд▓рд┐рдП рдЧрддрд┐рд╢реАрд▓ рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдирд┐рд░реНрдорд╛рдг</a></li>
<li><a href="../hi473586/index.html">FortiConverter рдпрд╛ рдкрд░реЗрд╢рд╛рдиреА рдореБрдХреНрдд рдЪрд▓рддреА рд╣реИ</a></li>
<li><a href="../hi473588/index.html">рдШреБрд╕рдкреИрда рдХреА рдЪреАрдВрдЯрд┐рдпрд╛рдВ: рдиреАрд▓реЗ рдордХреНрдЦрд┐рдпреЛрдВ рдореЗрдВ "рдЙрд▓реНрдЯреЗ" рд▓реИрдВрдбрд┐рдВрдЧ рдХреА рдХреАрдиреЗрдореЗрдЯреАрдХреНрд╕</a></li>
<li><a href="../hi473590/index.html">рдХреИрд╕реЗ рдореИрдВ рдУрд▓рдВрдкрд┐рдпрд╛рдб рдореЗрдВ рдХрдореНрдкреНрдпреВрдЯрд┐рдВрдЧ рдореЗрдВ 4 рдЧреЛрд▓реНрдб рдореЗрдбрд▓ рдЬреАрддрд╛</a></li>
<li><a href="../hi473592/index.html">Raiffeisenbank + рдкреНрд░рд╕рд╛рд░рдг рдореЗрдВ рд╕реНрдХреНрд░рдо рд╕рдореБрджрд╛рдп рдореАрдЯрдЕрдк</a></li>
<li><a href="../hi473596/index.html">рдкрд╛рдпрдерди v3.x: рдХреЛрд░рдЖрдЙрдЯ рдФрд░ рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдкрд╡рд╛рдж рд╣реИрдВрдбрд▓рд░ред рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╕рдм рдХреБрдЫ рдХреЗ рд▓рд┐рдП</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>