<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛀🏻 💚 🗄️ Detox dan Appium: Tes Antarmuka Otomatis di Bereaksi Asli 👩🏿‍🔧 💅 🧗🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lingkungan seluler yang tidak dikenal 
 Saya, mungkin, seperti Anda, datang ke React Native sebagai pengembang JavaScript, bukan sebagai pengembang ap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Detox dan Appium: Tes Antarmuka Otomatis di Bereaksi Asli</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434816/"><img src="https://habrastorage.org/webt/xx/gv/pp/xxgvpps9vbr5q2jkamchgmd-quk.jpeg"><br><br><h3>  Lingkungan seluler yang tidak dikenal </h3><br>  Saya, mungkin, seperti Anda, datang ke React Native sebagai pengembang JavaScript, bukan sebagai pengembang aplikasi seluler asli.  Dunia yang sama sekali baru dengan nuansa dan triknya sendiri. <br><br>  Salah satu topik terpenting untuk dipelajari adalah pengujian.  Ketika semuanya lebih atau kurang jelas dengan tes unit, apa yang harus dilakukan dengan tes antarmuka dan tes end-to-end?  iOS  Android  Ada campuran berbagai jenis perangkat di pasaran. <br><br>  Terlepas dari kenyataan bahwa teknologinya sendiri relatif baru, ini masih merupakan lingkungan mobile dan banyak yang harus meminjam dan belajar dari pihak asli. <br><br>  Saya akan mempertimbangkan secara singkat dua kerangka kerja yang patut diperhatikan untuk membuat hidup saya lebih mudah sebagai pengembang. <br><a name="habracut"></a><br><h3>  Appium </h3><br>  Menggunakan Selenium WebDriver di belakang layar, Appium adalah kerangka kerja yang kuat dengan komunitas besar pengembang aplikasi seluler asli.  Dirilis sebelum React.js, itu adalah seorang pemimpin dan tidak ada bandingannya. <br><br>  Memulai dengan Appium cukup mudah.  Menggunakan npm kita menginstal paket "appium" dan "appium-doctor", kita dapat secara global, kita dapat sebagai bagian dari proyek.  Tim "appium-doctor" akan memberi tahu kami apa lagi yang perlu dipasang dan dikonfigurasikan sebelum mulai bekerja, dan, jika mungkin, akan membantu memperbaiki kerusakan.  Ketika semuanya sudah diputuskan, paket-paket sudah diinstal dan konfigurasi Jest sudah ada, kita bisa menjalankan server Appium dan menguji. <br><br>  Saya tidak akan masuk ke rincian konfigurasi, tapi di sini adalah seperti apa tes sederhana dengan konfigurasi (komentar ditambahkan): <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*  selenium webdriver  node */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> wd <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'wd'</span></span> <span class="hljs-comment"><span class="hljs-comment">/* 60  ,    ,   */</span></span> jasmine.DEFAULT_TIMEOUT_INTERVAL = <span class="hljs-number"><span class="hljs-number">60000</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   Appium.    ,  localhost */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> URL = <span class="hljs-string"><span class="hljs-string">'localhost'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PORT = <span class="hljs-number"><span class="hljs-number">4723</span></span> <span class="hljs-comment"><span class="hljs-comment">/*   webdriver */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> driver = wd.promiseChainRemote(URL, PORT) <span class="hljs-comment"><span class="hljs-comment">/*  . *    Appium, *   ,   . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> capabilities = { <span class="hljs-attr"><span class="hljs-attr">platformName</span></span>: <span class="hljs-string"><span class="hljs-string">'iOS'</span></span>, <span class="hljs-comment"><span class="hljs-comment">//  Android platformVersion: '12.1', //   deviceName: 'iPhone 8', //  “Android Emulator”     automationName: 'XCUITest', //   (UIAutomator2  Android) app: '/path/to/.app' //   .app ( Android  .apk) } beforeAll(async () =&gt; { try { //  ,    await driver.init(capabilities) //   await driver.sleep(4000) //  ,       ,   ! } catch(err) { console.log(err) //  ,   ,    } }) afterAll(async () =&gt; { try { await driver.quit() //   } catch(err) { console.error(err) } }); /* Jest,   ,   Appium! *     ,    * 'topLabel'  'subLabel'  *       Appium */ describe("Home Screen landing", () =&gt; { test("render search screen", async () =&gt; { let topLabel = await driver.elementById('topLabel') let subLabel = await driver.elementById('subLabel') expect(await topLabel.text()).toBe("OK") expect(await subLabel.text()).toBe(" ") }) })</span></span></code> </pre> <br>  Tes itu sendiri, ini adalah beberapa baris terakhir yang memeriksa apakah teks "OK" dan "layar utama" ada di layar.  Seperti yang Anda lihat, tidak ada yang istimewa dalam ujian, Jest yang sama.  Dokumentasi di situs web Appium menjelaskan semua fitur kerangka kerja, termasuk contoh JavaScript. <br><br>  Tidak suka hanya <code>await driver.sleep(4000)</code> .  Sayangnya, tes tidak tahu apa yang sedang terjadi dalam aplikasi.  Yang disebut "kotak hitam" atau Blackbox.  Bayangkan jika Anda menulis kode pada Node, dan sebelum permintaan http, Anda akan mengatur timer daripada menggunakan janji atau panggilan balik.  Ini dia, kerapuhan tes UI. <br><br>  Dalam pengujian sederhana ini, kami menunggu 4 detik untuk meluncurkan aplikasi.  Seiring waktu dan dengan peningkatan jumlah tes, kami akan mengatur timer lebih sering - permintaan http, animasi, React Native sendiri - jembatan antara kode asli dan JavaScript hanya memperumit situasi. <br><br>  <i>"Black Box", kami memiliki perakitan aplikasi tanpa akses ke struktur internal.</i> <br><img src="https://habrastorage.org/webt/pt/zs/cp/ptzscp_jlpii4ltt8ahqzhghtyq.png"><br><br>  <b>Apa yang Anda sukai dari Appium?</b> <br><br><ul><li>  7+ tahun di industri ini. </li><li>  Fitur API yang luas. </li><li>  Mudah untuk menemukan bantuan (ini juga minus, daftar di bawah) </li><li>  Dukungan untuk berbagai bahasa, termasuk JavaScript. </li><li>  Lingkungan pengembang JavaScript yang akrab untuk Jest. </li><li>  Digunakan untuk pengujian ujung ke ujung di MS AppCenter, BrowserStack, dan AWS DeviceFarm. </li><li>  Kemampuan untuk menguji pada perangkat nyata. </li></ul><br>  <b>Apa yang saya tidak suka tentang Appium</b> <br><br><ul><li>  Pencarian Web menghasilkan hasil untuk berbagai bahasa pemrograman, kebanyakan dari mereka adalah Java. </li><li>  Pengujian kotak hitam (tes tidak tahu tentang proses di dalam aplikasi). </li><li>  Tidak ada sinkronisasi dengan aplikasi, kerapuhan, React Native menciptakan lebih banyak masalah. </li><li>  testID karena alasan tertentu tidak berfungsi di Android. </li></ul><br><br>  <i>Perhatikan tiga tab: Log server Appium, metro bundler, dan tes itu sendiri.</i> <br><img src="https://habrastorage.org/webt/ap/n-/pm/apn-pmr1nkmzno2m728ljq39tb8.png"><br><br><h3>  Detoksifikasi </h3><br>  Detox Wix bekerja mirip dengan Appium.  Perbedaan utama adalah pengujian sesuai dengan strategi "kotak abu-abu".  Salah satu tugas pengembang Detox adalah untuk memecahkan masalah dengan kerapuhan - tugas dalam aplikasi tidak akan dimulai sampai yang sebelumnya telah berakhir dan sampai aplikasi gratis.  Ini dimungkinkan berkat kerangka kerja lain yang dibuat dengan nama EarlGrey. <br><br>  Seperti halnya Appium, kami mengatur pengaturan. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*     package.json,   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> detox = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"detox"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./package.json"</span></span>).detox; <span class="hljs-comment"><span class="hljs-comment">/*  Jest */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> adapter = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"detox/runners/jest/adapter"</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* , *   Jest */</span></span> jest.setTimeout(<span class="hljs-number"><span class="hljs-number">120000</span></span>); jasmine.getEnv().addReporter(adapter); beforeAll(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> detox.init(config); }); <span class="hljs-comment"><span class="hljs-comment">/* beforeEach  afterEach   Detox, *   Jest *    */</span></span> beforeEach(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> adapter.beforeEach(); }); afterAll(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> adapter.afterAll(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> detox.cleanup(); });</code> </pre><br>  Dan pengaturan di package.json: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"detox"</span></span>: { <span class="hljs-string"><span class="hljs-string">"configurations"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ios.detox"</span></span>: { <span class="hljs-comment"><span class="hljs-comment">//   iOS (  detox test -c ios.detox) "binaryPath": "path/to/.app", "build": "xcodebuild -workspace ios/app.xcworkspace -scheme scheme -configuration Debug -sdk iphonesimulator -derivedDataPath ios/build", //  workspace  project.      debug  production (release). "type": "ios.simulator", "name": "iPhone 8" //   }, "android.detox": { //   Android (  detox test -c android.detox) "binaryPath": "path/to/.apk", "build": "cd android &amp;&amp; ./gradlew assembleDebug assembleAndroidTest -DtestBuildType=debug &amp;&amp; cd ..", //      debug  production (release). "type": "android.emulator", "name": "Pixel_2_API_28" //  . “adb devices”     Android } }, "test-runner": "jest", "runner-config": { "setupTestFrameworkScriptFile" : "./detox.init.js", //   "testEnvironment": "node", "testRegex": "(.*|\\.(ui))\\.(ts|tsx)$" //  ,     } "specs": "./__tests__/" //    }</span></span></code> </pre><br>  Tes menulis semudah menulis Appium, tetapi menggunakan fitur dan batasan Detox. <br><br>  <i>"Kotak abu-abu", kami memiliki perakitan aplikasi dan akses ke struktur internal.</i> <br><img src="https://habrastorage.org/webt/wb/eo/ox/wbeooxh72x0szw2op-lbixoeiow.png"><br><br>  <b>Apa yang saya sukai dari Detox</b> <br><br><ul><li>  Dibuat oleh Wix untuk React Native. </li><li>  Berfokus pada JavaScript. </li><li>  Uji strategi "kotak abu-abu". </li><li>  Ini bekerja secara serempak dengan aplikasi. </li></ul><br>  <b>Apa yang tidak Anda sukai tentang Detox</b> <br><br><ul><li>  Kemungkinannya tidak seluas Appium. </li><li>  Komunitas kecil. </li></ul><br><h3>  Kerapuhan </h3><br>  Meskipun Detox menggunakan prinsip "kotak abu-abu", kerapuhan masih ada.  Tes dengan input teks dan gesek tidak berfungsi sebagaimana mestinya dalam 1 kasus dari 10. Anda tidak dapat 100% yakin dalam tes antarmuka. <br><br><h3>  Kecepatan </h3><br>  Appium “memperlambat” timer “.sleep” yang diatur secara manual, Detox menang dalam hal ini, karena semuanya sinkron.  Secara umum, saya tidak akan menarik kesimpulan di pihak saya, karena saya tidak menulis sejumlah besar tes identik pada kedua platform.  Dalam tes 30 detik dan tes sederhana yang dibuat untuk artikel ini, Detox melakukan detik lebih cepat.  Jika Anda melihat dua platform yang berbeda, iOS dan Android, tes mengambil + - pada saat bersamaan.  Hal utama yang perlu diingat adalah bahwa tes antarmuka mengambil waktu tes unit lebih signifikan. <br><br><h3>  Apa yang harus dipilih </h3><br>  Saya masih mempelajari kedua kerangka kerja dan perlu waktu untuk memahami semua kelebihannya, tetapi saat ini, sebagai pengembang JavaScript, saya memilih Detox. <br><br>  Coba keduanya, untungnya, hanya ada dua.  Itu semua tergantung pada aplikasi yang sedang Anda kerjakan dan tim. <br><br>  Tes antarmuka di tim pengembangan - untuk pengembang, coba Detox.  Tes ujung ke ujung yang lebih kompleks - mungkin yang terbaik untuk melihat lebih dekat pada Appium dengan kemampuan API yang kaya dan dukungan pada platform BrowserStack, MS AppCenter, dan AWS DeviceFarm. <br><br><h3>  Referensi </h3><br>  Ada banyak sumber daya dan artikel yang bermanfaat, tetapi sayangnya dalam bahasa Inggris.  Hal pertama yang saya rekomendasikan.  situs. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Appium</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Detoksifikasi</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434816/">https://habr.com/ru/post/id434816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434802/index.html">"Saya tidak akan memberikan batu" atau bagaimana sumber daya permainan "Cursed Lands" diatur</a></li>
<li><a href="../id434804/index.html">Fintech-startup Robinhood tidak dapat meluncurkan analog rekening bank</a></li>
<li><a href="../id434806/index.html">Tahun baru dibongkar dengan sampan</a></li>
<li><a href="../id434810/index.html">Pemula untuk bekerja dengan Spring Cloud</a></li>
<li><a href="../id434812/index.html">Manajemen waktu proyek</a></li>
<li><a href="../id434818/index.html">Kecelakaan di CenturyLink Data Center menyebabkan 911 gangguan layanan</a></li>
<li><a href="../id434822/index.html">Program RRT "Mobil dengan sumber energi baru." Apa yang diharapkan pada 2019</a></li>
<li><a href="../id434824/index.html">Polit-Teknik Elektro. Pemodelan proses sosial-politik oleh sirkuit listrik</a></li>
<li><a href="../id434826/index.html">Tempat tidur tepat waktu, atau 5 tanda masalah tersembunyi di tim</a></li>
<li><a href="../id434828/index.html">Menjadi seorang profesional. Kebiasaan yang berguna dari desainer UX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>