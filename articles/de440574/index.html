<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµÔ∏è üßû üë®‚Äçüé§ Russischer AI Cup 2018, Geschichte 9 Pl√§tze üññüèΩ üöµüèΩ ‚ôÇÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Also 


 Mein Name ist, wie letztes Jahr, Andrei Rybalka, nur dieses Mal bin ich 33. Und da ich unter den Top Ten war, habe ich beschlossen, meinen An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Russischer AI Cup 2018, Geschichte 9 Pl√§tze</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440574/"><h1 id="itak">  Also </h1><br><p>  Mein Name ist, wie letztes Jahr, Andrei Rybalka, nur dieses Mal bin ich 33. Und da ich unter den Top Ten war, habe ich beschlossen, meinen Ansatz, wieder einen Spielbot f√ºr den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">russischen AI Cup 2018</a> zu schreiben, zu teilen. </p><br><p>  Diesmal war die Aufgabe Fu√üball.  Die Aufgabe selbst erinnerte etwas an RAIC 2014, als es Hockey war, aber die L√∂sung war v√∂llig anders. </p><br><p>  Diesmal war die Welt dreidimensional und diese Dreidimensionalit√§t wurde vollst√§ndig genutzt.  Das Spiel selbst erinnerte am meisten an die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rocket League</a> . </p><br><p>  Ich werde den einleitenden Teil nicht langweilen, es ist einfacher zu zeigen, wie es aussah.  Sie k√∂nnen die Spiele <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf der Website</a> oder im Video ansehen: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/6g/jb/hf/6gjbhf4gdy_4qqrw74huttfudvq.jpeg"></a> </p><a name="habracut"></a><br><p>  Damit unser Leben nicht zu s√º√ü erscheint, haben die Entwickler neben dem Nichtdeterminismus der Spielwelt auch den Spiel-Tick in 100 Subwoofer aufgeteilt, was den genauen Teilnehmern zun√§chst die genaue Simulation ein Ende setzte, und noch mehr f√ºr mich, einen Bot in langsamem Java zu schreiben. </p><br><p>  Au√üerdem muss ich sagen, dass die Meisterschaft in Runden unterteilt ist, was wahrscheinlich korrekter w√§re, wenn man Runden nennt. </p><br><h3 id="kratko-o-turnirnoy-sisteme">  Kurz zum Turniersystem </h3><br><p>  F√ºr den Anfang sind 2 Wochen f√ºr die Entwicklung angegeben.  Dann vergeht die erste Runde.  Die 300 besten davon gehen noch weiter. </p><br><p>  Nach der Runde √§ndern sich die Spielregeln (insbesondere wird Nitro zum Spiel hinzugef√ºgt) und es werden weitere 2 Wochen gegeben, wonach die zweite Runde vergeht. </p><br><p>  Dann sind die Regeln wieder kompliziert (der dritte Spieler wird hinzugef√ºgt), eine weitere Woche wird gegeben und wir spielen das Finale. </p><br><p>  Dies ist jedoch nicht das Ende.  Nach dem Finale gibt es eine weitere Woche, an deren Ende der Sandkasten einfach stoppt, und die 6 besten darin, mit Ausnahme der Gewinner des Finales, werden ebenfalls vergeben.  Der grundlegende Unterschied zwischen dem Sandbox-Finale und dem Meisterschaftsfinale besteht darin, dass in der Sandbox Spiele in einem zuf√§lligen Format erstellt werden und nicht nur im Format der aktuellen Runde. </p><br><h1 id="istorii-uchastiya">  Beteiligungsgeschichten </h1><br><p>  Der technische Teil wird niedriger sein.  F√ºr wen die Geschichte uninteressant ist, k√∂nnen Sie nach unten scrollen, bis sie gut wird. </p><br><h3 id="pervyy-raund">  Erste Runde </h3><br><p>  Er begann, wie die meisten, mit einer Woche Beta.  Verbrachte viel Zeit, jeden Abend 4+ Stunden. <br>  Bevor Sie die erste Version ausf√ºllen, wurden mehrere Iterationen durchgef√ºhrt <br>  <em>Wir codieren, bis wir anfangen, die vorherige Version zu schlagen - wir sammeln - wir betrachten die aktuelle Version der vorherigen - wir wiederholen</em> . </p><br><p>  Ich hatte es mit der ersten F√ºllung nicht eilig und es passierte einige Tage vor der Runde.  Und da mein Bot bis jetzt mit niemandem gespielt hat, hatte ich keine Ahnung, in welcher Art von Welt ich mich befand und welche Positionen in der Rangliste ich beanspruchen konnte.  Als ich sah, dass ich bereits mehr als 100 Spiele hintereinander ohne eine einzige Niederlage gewonnen hatte, beruhigte ich mich. </p><br><p>  Im Allgemeinen war die erste Niederlage, die ich hatte, anscheinend zeitlich auf dem 12. Platz, und das erste verlorene Spiel in Folge war bereits in den Top 10. </p><br><p>  Kurz gesagt, ich erkannte, dass ich Chancen habe, in die zweite Runde zu kommen, in der die Top 300 gehen. <br>  Deshalb habe ich die Position darin nicht verfolgt und nichts anderes f√ºr die Runde √ºberflutet, sondern einfach weitergearbeitet. </p><br><p>  Zu dieser Zeit sah ich, dass es noch viel Raum f√ºr Verbesserungen gab, ohne Nitro anzuschlie√üen (was nach der ersten Runde erschien), also konzentrierte ich mich auf den Hauptteil der Strategie und erkannte, dass es vor der zweiten Runde mehr als 2 Wochen oder l√§nger dauern w√ºrde und ich Zeit h√§tte, das Nitro zu befestigen. </p><br><h3 id="vtoroy-raund">  Zweite Runde </h3><br><p>  In der ersten Woche habe ich aktiv programmiert, aber immer noch kein Nitro angeschlossen.  Ich wollte das in der zweiten Woche machen.  Aber alles verlief anders, denn am Ende der ersten Woche hatte ich eine Lungenentz√ºndung.  Ich konnte nicht programmieren, also habe ich einfach hochgeladen, was es war, und es kann gesagt werden, dass die aktive Teilnahme an der Meisterschaft f√ºr mich an diesem Ort beendet war. </p><br><p>  In den n√§chsten 3 Wochen vor dem Ende der Meisterschaft arbeitete ich an einer Strategie in H√∂he von vielleicht 20 Stunden. </p><br><p>  Infolgedessen wusste mein Bot in der zweiten Runde im Prinzip nicht, dass es Nitro im Spiel gibt, belegte aber irgendwie immer noch den 16. Platz. </p><br><h3 id="final">  Finale </h3><br><p>  Im Finale wurde ein dritter Spieler hinzugef√ºgt. </p><br><p>  Ich schrieb in langsamem Java und nicht in C ++, da 7 von 8 Personen in der Bewertung h√∂her sind als ich, und davor fiel mein Bot oft in eine Auszeit, so dass es mit dem Aufkommen des dritten Spielers in 100% der Spiele zu fallen begann.  Gl√ºcklicherweise werden Spiele in der Sandbox in einem zuf√§lligen Format erstellt, so dass ich automatisch <br>  verlor nur jedes dritte Spiel und flog daher nicht zu viel runter.  Es scheint auf den 18. Platz gefallen zu sein. </p><br><p>  Abgesehen von der Programmierung, der Bearbeitung der Koeffizienten in der Bewertungsfunktion und der Durchf√ºhrung der Tests setzte ich mich am Abend vor dem Finale zum ersten Mal nach Ausbruch der Krankheit an den Bot.  Er f√ºgte ein sehr einfaches Nitro hinzu, das streng nach oben gerichtet war, damit zwei Angreifer an derselben Stelle nicht mehr rennen und dort miteinander kollidieren und alles, was er f√ºr ein 3x3-Spiel konnte, von der Rendering-Tiefe bis zur Simulationsgenauigkeit reduzieren konnten Nur der Bot starb nicht durch Timeout. <br>  In dieser Form spielte es das Finale. </p><br><p>  In der Pause zwischen den H√§lften des Finales setzte ich mich wieder in den Bot und verbrachte ein paar Stunden 10. Zum gr√∂√üten Teil betrafen die √Ñnderungen die dynamische Auswahl von Koeffizienten, die fr√ºhzeitige Unterbrechung der Genetik usw.  Im Allgemeinen suchte ich nach einem Gleichgewicht zwischen Genauigkeit und Fehlberechnungstiefe und -geschwindigkeit. <br>  Neben dem Kampf gegen die Geschwindigkeit nahm er noch einige √Ñnderungen vor: </p><br><ul><li>  Schickte einen entfernten Angreifer (relativ zum Ball) zu einem Punkt in der Mitte zwischen dem Ball und dem gegnerischen Tor </li><li>  Ich habe Nitro ein wenig repariert (die Beschreibung wird im technischen Teil sein).  Es war immer noch sehr einfach, aber es wurde viel effizienter. </li></ul><br><p>  Insgesamt, nachdem ich die Tests durchgef√ºhrt und die Punktzahl 395: 254 gegen√ºber der vorherigen Version gesehen hatte, beruhigte ich mich.  Damit konnte ich im Finale den 9. Platz belegen. </p><br><h3 id="final-pesochnicy">  Sandbox Finale </h3><br><p>  Ich tat weiter weh und arbeitete die meiste Zeit der Woche nicht am Bot.  Am Tag vor dem Ende habe ich gesehen, dass mehrere Leute neue Versionen hochgeladen haben, die oft gegen mich gewinnen und Sandk√§sten aus Preisen werfen k√∂nnen.  Also habe ich noch ein paar Stunden verbracht. </p><br><p>  Die einzige gro√üe √Ñnderung ist, dass ich vor drei Wochen meinen Zweig in Git ausgegraben habe, in dem ich die Bewegung des Feindes mit meinem vereinfachten Algorithmus simuliert habe.  Zu dieser Zeit funktionierte es schlecht, aber ich erinnerte mich daran, f√ºhrte Tests durch, sah <br>  das √ºbertrifft die vorherige Version fast verdoppelt und √ºberflutet.  Insgesamt war ich zum Zeitpunkt des Stopps auf dem 10. Platz in der Gesamttabelle, was dem 4. Platz im Finale des Sandkastens entspricht. </p><br><h1 id="kak-eto-vsyo-rabotaet-tehnicheskaya-chast">  Wie das alles funktioniert (technischer Teil) </h1><br><p>  Ich entschuldige mich im Voraus f√ºr den Fall, dass die Terminologie ungenau ist.  Au√üerdem schreibe ich aus dem Speicher, sodass ich die endg√ºltige Version m√∂glicherweise nicht beschreiben werde. </p><br><p>  Genetische Algorithmen stehen also im Mittelpunkt.  Das Chromosom besteht aus mehreren Genen: </p><br><ul><li>  Bruchzahl im Bereich -PI..PI, die die Bewegungsrichtung angibt </li><li>  Eine Ganzzahl im Bereich 0..10, die die Anzahl der Wiederholungen dieser Aktion angibt </li><li>  Bruchzahl von 0 bis 1. Wenn der Wert √ºber einem bestimmten Schwellenwert liegt, machen Sie einen Sprung </li></ul><br><p>  Der Genotyp kann eine andere Anzahl von Chromosomen enthalten, jedoch so, dass die Gesamtzahl der Aktionen (einschlie√ülich Wiederholungen) 40 betr√§gt. </p><br><p>  Zun√§chst erstelle ich mehrere Dutzend zuf√§llige Genotypen.  Zu ihnen f√ºge ich hinzu: </p><br><ul><li>  Die Flugbahn direkt am Ball </li><li>  Direkte Flugbahnen in alle Richtungen, nur 10 St√ºck mit einem Versatz von 36 Grad </li><li>  Ein Genotyp, der einfach nichts tut (ohne ihn l√§uft der Bot immer irgendwo, auch wenn er bereits am optimalen Punkt steht) </li><li>  Bester Genotyp vom vorherigen Tick </li></ul><br><p>  Dann wird alles simuliert und durch die Auswertungsfunktion gef√ºhrt.  N beste Genotypen "√ºberleben" und werden M-mal mit Mutationen kloniert.  Bei der Mutation √§ndert sich jedes Gen in einem bestimmten Bereich mit einer Wahrscheinlichkeit von 10%.  Nun, dies wird seit mehreren Generationen wiederholt. <br>  Es gibt keine Kreuzung, in diesem Problem sehe ich keinen Sinn darin. </p><br><p>  Insgesamt betrug die maximal m√∂gliche Anzahl von Flugbahnen pro Tick pro Fu√üballspieler etwa 800, in den meisten F√§llen jedoch viel weniger, weil  In einigen F√§llen (zum Beispiel, wenn wir in naher Zukunft definitiv nicht in der Lage sind, den Ball zu ber√ºhren) wurde die Bewegung der Spieler durch einfache Heuristiken ersetzt.  Au√üerdem hingen N, M und die Anzahl der Generationen von der Situation auf dem Feld ab.  Zun√§chst aus der Entfernung zum Ball.  Au√üerdem wird die Fehleinsch√§tzung vorzeitig (jedoch nicht fr√ºher als in der 5. Generation) unterbrochen, wenn eine Flugbahn mit einer akzeptablen Sch√§tzung gefunden wird. </p><br><h3 id="makro">  Makro </h3><br><p>  Der Torh√ºter rennt zum Punkt vor der Tormitte.  Meine Tests haben gezeigt, dass es f√ºr mich am besten ist, vor dem Tor zu stehen und nicht darin, wie die meisten Spieler oben. </p><br><p>  Die Position des Punktes weicht von der Mitte ab und h√§ngt von mehreren Faktoren ab: der Position und Richtung des Ballfluges, dem Punkt, an dem der Ball mein Ziel getroffen hat, wenn ein Tor geplant ist, dem Ort des n√§chsten angreifenden Gegners usw. </p><br><p>  Wenn der Ball auf der Seite des Gegners liegt und in Richtung seines Ziels fliegt, k√∂nnen wir uns f√ºr Nitro entscheiden. </p><br><p>  Wenn mein Torh√ºter den Ball fr√ºher als mein Angreifer treffen kann (plus ein paar weitere Bedingungen), ignoriert der Angreifer den Ball und rennt zu einem Punkt in der Mitte zwischen dem Ball und dem gegnerischen Tor.  Ich ging viele Optionen durch, wo genau er laufen sollte.  In meinem Fall hat dieser am besten funktioniert. </p><br><p>  Wenn der Ball zu weit ist, l√§uft der Angreifer in einer geraden Linie zum n√§chsten Kontaktpunkt des Balls mit dem Boden, an dem er den Ball abfangen kann (wenn wir keine Zeit f√ºr den ersten Kontaktpunkt haben - √ºberpr√ºfen Sie den n√§chsten usw.). </p><br><p>  Andernfalls (wenn der Ball erreicht ist) rennt der Angreifer dorthin, wo die Bewertungsfunktion es ihm sagt.  Ja, und wenn Nitro in der N√§he liegt und wir es abholen k√∂nnen, w√§hlen wir es aus. </p><br><p>  In einem 3x3-Spiel zielt der zweite Angreifer eher auf den Ball und mit weniger Vorw√§rtslauf, wobei er einen Pass vom Torh√ºter erwartet.  Wenn es aber noch l√§uft, wird ein anderer Punkt gew√§hlt - n√§her an der Mittellinie. </p><br><p>  Au√üerdem simulierte jeder Tick einmal den Ball 100 Ticks vorw√§rts mit 100 Mikrotik (mit Caching). </p><br><p>  Diese Flugbahn wurde an vielen Stellen verwendet.  Z.B: </p><br><ul><li>  Um die Ber√ºhrungspunkte des Balls mit dem Boden zu bestimmen </li><li>  Um herauszufinden, ob der Ball mein Tor bedroht und ob der Torh√ºter in den Simulationsmodus geschaltet werden muss </li></ul><br><p>  Die gleiche exakte Flugbahn wurde bei der Simulation der Flugbahnen der Spieler verwendet, um den Ball nicht jedes Mal zu z√§hlen.  Aber nur bis zur ersten Kollision des Balles mit einem Fu√üballspieler. </p><br><p>  √úbrigens war das Schreiben von Footballist faul, die Worte Spieler, Roboter waren der Strategie vorbehalten, <br>  Also hie√ü meine Wrapper-Klasse einfach Dude :) </p><br><h3 id="simulyaciya">  Simulation </h3><br><p>  In den meisten F√§llen ging es mit einer Mikrotik, aber in einigen Situationen wechselte es mit einer gro√üen Anzahl von Mikrotiken in den genauen Modus (am Anfang waren es 100, dann wurde es in einem 2x2-Spiel auf 50 reduziert, da Tests zeigten, dass der Unterschied in den Ergebnissen innerhalb der Fehlergrenze lag, und auf 10 in 3x3, weil sonst in Timeouts geflogen). </p><br><p>  Im genauen Modus habe ich entweder zum Zeitpunkt des Abprallens gewechselt oder war so nah am Ball, dass eine Kollision beim n√§chsten Tick m√∂glich ist.  Dar√ºber hinaus gab es auch eine Menge kleiner Kr√ºcken, Hacks, Optimierungen, die ich selbst nicht verstehen werde. </p><br><p>  Zum Beispiel wurde der fliegende Ball immer noch mit 1 Mikrotik simuliert, aber wenn ich nach dem n√§chsten Mikrotik sah, dass es zu einer Kollision kam, rollte er zur√ºck zur vorherigen Position und simulierte sie erneut mit gr√∂√üerer Genauigkeit. </p><br><p>  Au√üerdem gab ich vor, andere Spieler zu sein (sowohl meine eigenen als auch andere), wenn sie in der Luft waren (und daher ihre Flugbahn leichter vorherzusagen ist) oder nahe am Ball waren.  F√ºr Gegner verwendete die endg√ºltige Version eine vereinfachte Version meiner eigenen Entscheidungsstrategie, die alle 5 Ticks gestartet wurde (h√§ufiger erlaubte sie keine Geschwindigkeit). </p><br><p>  Bei der Simulation jedes Charakters berechnete ich mich selbst, den Ball und andere Fu√üballspieler 40 Ticks voraus (mein Limit f√ºr die Anzahl der Aktionen im Genotyp) und simulierte dann die gleiche Anzahl von Ticks nur f√ºr einen Ball. </p><br><h3 id="nitro">  Nitro </h3><br><p>  Einfach bis unanst√§ndig. </p><br><p>  In der endg√ºltigen Version ist Nitro immer eingeschaltet, wenn dies der Fall ist, wenn der Spieler in der Luft ist und wenn er den Ball in den letzten Zecken nicht getroffen hat. </p><br><p>  Am Anfang habe ich Nitro immer direkt nach oben gerichtet, aber dann habe ich versucht zu experimentieren und die Option, genau in die Mitte des Balls zu gehen, hat am besten funktioniert.  Ich habe auch Optionen ausprobiert, damit die Richtung des Nitros von der Genetik gew√§hlt wurde. </p><br><p>  Es hat viel schlimmer funktioniert.  M√∂glicherweise aufgrund mangelnder Suchtiefe. </p><br><h3 id="funkciya-ocenki">  Bewertungsfunktion </h3><br><p>  Die Summe der Bewertungen f√ºr jeden Tick mit einer D√§mpfung von 2% pro Tick. </p><br><p>  Das gr√∂√üte Gewicht hatte nat√ºrlich ein Ziel.  Mehrere Dinge beeinflussten sein Gewicht: </p><br><ul><li>  Die Entfernung vom Ball zum gegnerischen Torh√ºter zum Zeitpunkt des Tores (je weiter desto besser) </li><li>  Y-Koordinate des Balls (weil es am oberen Ende des Tores viel schwieriger ist, ihn zu treffen) </li><li>  Die Geschwindigkeit des Balls entlang der Z-Achse (die auf das feindliche Ziel gerichtet ist) </li></ul><br><p>  Wenn ich angegriffen werde, ist alles genau gleich, nur mit dem entgegengesetzten Vorzeichen. </p><br><p>  F√ºr den Angreifer hing die Gesamtpunktzahl au√üerdem ab von: </p><br><ul><li>  Entfernungen vom Spieler zum Ball (so dass er zum Ball rennt, auch wenn er ihn nicht schlagen kann) </li><li>  Strafe f√ºr den Sprung (nur zu springen, wenn es so viele Punkte bringt, dass sie diese Strafe √ºberschreiten) </li><li>  Entfernungen beim n√§chsten Tick der Simulation vom Ball zum Gegner </li><li>  Y-Ballkoordinaten (je h√∂her sie sind, desto geringer ist die Chance, dass der Feind sie abf√§ngt) </li><li>  Kosinus des Winkels zwischen der Richtung des Balls und der Mitte des feindlichen Tores </li><li>  Flagge, wenn ich den Ball ber√ºhrt habe </li><li>  Flagge, ob der Feind den Ball ber√ºhrt hat </li><li>  Bonus f√ºr die Auswahl von Nitro </li></ul><br><p>  Es gab auch einen kleinen Bonus f√ºr das Schlagen eines feindlichen Spielers.  Obwohl es tats√§chlich passiert ist, aber selten. </p><br><p>  F√ºr Torh√ºter: </p><br><ul><li>  Bonus f√ºr die Entfernung zum Ball, Ballgeschwindigkeit in Z, Ballposition in Y. </li><li>  Strafe f√ºr den Sprung </li><li>  Strafe f√ºr das Finden des Balls im Bereich vor meinem Tor </li><li>  Die Entfernung zu den Feinden und zu meinen Angreifern wurde ber√ºcksichtigt (damit der Ball von den Feinden wegfliegt, aber wenn m√∂glich n√§her zu meinen Angreifern fliegt) </li><li>  Und noch ein paar Kleinigkeiten. </li></ul><br><h3 id="machine-learning">  Maschinelles Lernen </h3><br><p>  Es war nur ein wenig in einem der Zweige des Git als Experiment.  Aber es scheint mir trotzdem erw√§hnenswert zu sein.  Ich habe es nicht geschafft, mich daran zu erinnern (und ich bin mir nicht sicher, was Sinn machte). </p><br><p>  Im Allgemeinen habe ich versucht, mit seiner Hilfe vorherzusagen, ob der Feind den Ball basierend auf den Positionen und Geschwindigkeiten des Feindes und des Balls abfangen kann.  Ich hatte vor, dies in der Bewertungsfunktion zu verwenden.  Bestrafen Sie Trajektorien, die abgefangen werden k√∂nnen. </p><br><p>  Aber ich verstand sofort, dass ich mir nicht nur ein neuronales Netzwerk leisten konnte, sondern √ºberhaupt nichts Ernstes, da dies 80 Mal pro Flugbahn durchgef√ºhrt werden m√ºsste.  Nun, selbst wenn es 40 oder 20 ist, wenn nicht jeder Tick gez√§hlt wird, aber ich hatte √ºberhaupt keine Zeitreserven, also habe ich diese Optionen nicht einmal in Betracht gezogen. </p><br><p>  Folgendes habe ich getan: </p><br><p>  Ich habe mehrere Spiele mit einem modifizierten Bot ausgef√ºhrt, in denen ich bei der Suche nach einer Flugbahn Daten √ºber mich und den Ball sowie eine Flagge gespeichert habe, ob eine Flugbahn gefunden wurde, in der ich den Ball abfange. </p><br><p>  Ich habe alle Koordinaten in Bezug auf den Fu√üballspieler ber√ºcksichtigt.  Das hei√üt,  Ich hatte es immer in der Koordinate [0,0,0], also habe ich nur 10 Felder behalten: die relative Position des Balls, den Geschwindigkeitsvektor des Balls, den Geschwindigkeitsvektor des Fu√üballspielers, das bin√§re Abfangflag.  Ich habe den Datensatz nur f√ºr den zentralen Teil des Feldes gespeichert, weil  Ich erkannte, dass einfache Algorithmen noch nicht ziehen und Boards ber√ºcksichtigen. </p><br><p>  Dann habe ich diesen Datensatz DecisionTreeClassifier mit max_depth = 7 gef√ºttert. Der trainierte Baum ergab, soweit ich mich erinnere, eine Genauigkeit in der Gr√∂√üenordnung von 90%. </p><br><p>  Als n√§chstes exportierte ich den Baum in eine Reihe von ifs (was DecisionTree im Wesentlichen ist). </p><br><p>  Es sah ungef√§hr so ‚Äã‚Äãaus: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">predict</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dude_vel_z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_rel_pos_z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ball_vel_z)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_vel_z &lt;= <span class="hljs-number"><span class="hljs-number">6.4765448570251465</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dude_vel_y &lt;= -<span class="hljs-number"><span class="hljs-number">6.087389945983887</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_vel_z &lt;= -<span class="hljs-number"><span class="hljs-number">20.188323974609375</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dude_vel_x &lt;= <span class="hljs-number"><span class="hljs-number">13.032730102539062</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ball_rel_pos_y &lt;= -<span class="hljs-number"><span class="hljs-number">1.1829500198364258</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ball_vel_y &lt;= <span class="hljs-number"><span class="hljs-number">18.906089782714844</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ............................</span></span></code> </pre> <br><p>  Zu diesem Zeitpunkt f√ºhrte ich die Tests durch, stellte keine Verbesserung fest und verschob den Prozess auf einen sp√§teren Zeitpunkt, der aufgrund meiner Abenteuer nie eintraf. </p><br><h3 id="shryodinbag">  Schroedinbag </h3><br><p>  Irgendwann nach der ersten Runde habe ich dieses seltene Tier in meinem Haus gefangen. </p><br><p>  Wer nicht wei√ü, dass dies ein solcher Fehler ist, den sie nur durch Lesen des Codes finden, und nachdem er ihn gefunden hat, fragt sich der Entwickler, wie das Programm √ºberhaupt funktionieren k√∂nnte.  Und in meinem Fall blieb sie auch in den Top 10. </p><br><p>  Im Allgemeinen bestand der Fehler darin, dass ein Konstruktor in der Kopierfunktion des Gens aufgerufen wurde, in dem ein optionales Argument weggelassen wurde, das den Wert dieses Gens enthielt.  In Abwesenheit dieses Arguments wurde der Wert zuf√§llig ausgew√§hlt.  Beim Versuch, ein Gen anstelle einer Kopie zu kopieren, erstellte er daher eine neue zuf√§llige Instanz. </p><br><p>  Tats√§chlich hatte ich anstelle der Genetik eine zuf√§llige Suche, da jeder Tick einfach mehrere hundert zuf√§llige Pfade erzeugte und den besten ausw√§hlte. </p><br><p>  Nach der Korrektur (bestehend aus dem Hinzuf√ºgen von 2 Zeichen zum Code) wurde das Spiel ungef√§hr dreimal besser. </p><br><h3 id="ritualnye-tancy">  Rituelles Tanzen </h3><br><p>  Irgendwann bemerkte ich, dass Spieler manchmal ohne Grund abprallen und trotz der Strafe weit vom Ball entfernt sind. </p><br><p>  Die Erkl√§rung stellte sich als so heraus, dass ich den Moment des Sprunges mit einer Genauigkeit von 100 Mikrotik z√§hlte.  Und manchmal stellte sich heraus, dass gerade zum Zeitpunkt des Sprunges eine Kollision des Balls mit der Langhantel auftrat.  Und abh√§ngig von der Genauigkeit der Berechnung genau in diesem Tick f√ºhrte die vorgeschlagene Flugbahn entweder zu einem Ziel oder nicht. </p><br><p>  Grob gesagt fliegt der Ball zum gegnerischen Tor und trifft den Pfosten.  Mein Fu√üballspieler, der am anderen Ende des Feldes l√§uft, simuliert eine Flugbahn ohne Sprung (mit 1 Mikrotik) und sieht, dass der Ball das Tor nicht trifft. </p><br><p>  Dann kommt eine andere Flugbahn herein, mit einem Sprung genau in dem Moment, in dem der Ball die Latte trifft.  Und da ich einen Tick mit einem Sprung von 100 Mikrotik nicht nur f√ºr einen Fu√üballspieler, sondern auch f√ºr einen Ball z√§hle, unterscheidet sich der berechnete Sprungwinkel des Balls von dem Winkel, der auf dem Weg mit 1 Mikrotik erhalten wird, und es kann vorkommen, dass der Ball in dieser genaueren Flugbahn hineinf√§llt das Tor. </p><br><p>  Und deshalb wird diese Flugbahn ausgew√§hlt und der Bot springt. </p><br><p>  Im Allgemeinen haben die Spieler durch einen rituellen Tanz mit H√ºpfen ein Ziel benannt :) </p><br><h3 id="killer-ficha">  Killer-Feature </h3><br><p>  Sie ist nicht </p><br><h3 id="testirovanie">  Testen </h3><br><p>  Ich fuhr endlose Spiele in 8 Threads (4 auf jedem Computer und Laptop).  Ich habe die Anzahl der Spiele so gew√§hlt, dass sie statistisch signifikant ist. </p><br><p>  Mit einer deutlichen Verbesserung der Strategie konnten insgesamt insgesamt ein halbes Tausend Ziele erreicht werden, <br>  mit kleineren Korrekturen, f√ºr die Nacht verlassen und dann ging die Rechnung in die Tausende. </p><br><h3 id="geneticheskiy-podbor-konstant">  Genetische Selektion von Konstanten </h3><br><p>  Ich habe es vor der ersten Runde versucht.  Es gab nichts aus dem Grund, dass Sie f√ºr die Genetik ein Turnier aus einer gro√üen Anzahl von Spielen spielen m√ºssen. </p><br><p>  Ich habe versucht, Spiele mit 100.000 Zecken zu spielen, aber das war nicht genug.  Mit einem kleinen Unterschied in der St√§rke (und normalerweise ist dies bei der Auswahl von Konstanten genau der Fall) h√§ngt der Gewinner pro 100.000 Ticks zu stark vom Fall ab.  Sie m√ºssen viel mehr spielen, um sich des Gewinners sicher zu sein.  Und ich konnte es mir nicht leisten, die Auswahl f√ºr einen Tag oder l√§nger zu verlassen, also lehnte ich dieses Unternehmen ab. </p><br><h1 id="v-zaklyuchenie">  Abschlie√üend </h1><br><p>  Traditionell danke an die Organisatoren.  Die Aufgabe war interessant.  Es ist schade, dass ich nur fast die H√§lfte der Meisterschaft verpassen musste und wirklich nichts f√ºr Nitro oder drei Spieler getan habe. </p><br><p>  Infolgedessen habe ich bis zum Ende im Sandkasten beobachtet, wie meine Strategie im 2x2-Modus ohne Nitro mit einer Punktzahl von 13: 2 gegen jeden Mr.Smile gewinnt, der im Finale den 3. Platz belegte und nach einigen Spielen gegen ihn das gleiche 12: 2 verliert im 3x3 Modus mit Nitro :) </p><br><p>  Und nat√ºrlich das Video von meinem propriet√§ren Visualizer: </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/kh/hx/om/khhxombmg6eo4otune-_vdhdhbu.jpeg"></a> </p><br><p>  Nur Sie m√ºssen sich wahrscheinlich in zuk√ºnftigen Meisterschaften von diesem Visualizer verabschieden. <br>  Mit jedem Mal bin ich mehr und mehr davon √ºberzeugt, dass wenn Sie sich f√ºr normale Pl√§tze bewerben, die einzige M√∂glichkeit darin besteht, in ... </p><br><p><img src="https://habrastorage.org/webt/gl/zj/1w/glzj1w_lztl_mhea9rqbs9rb5qq.jpeg"></p><br><p>  ... nun, du verstehst, worum es geht. </p><br><p>  Jedes Mal m√ºde, sich auf der Langsamkeit von Java auszuruhen und die St√§rke der Strategie zu reduzieren, um die zugewiesene Zeit einzuhalten. </p><br><p>  Ich hoffe, jemand hat f√ºr sich etwas Interessantes oder N√ºtzliches in meinem Werk mit einer Note von autobiografischem Charakter gefunden :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440574/">https://habr.com/ru/post/de440574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440562/index.html">Windows Phone - ALLES, es ist immer wieder</a></li>
<li><a href="../de440564/index.html">GPT-2 neuronales Netzwerk von OpenAI. Schnellstart</a></li>
<li><a href="../de440566/index.html">Ungehindert beschleunigen oder SIMD kennenlernen</a></li>
<li><a href="../de440568/index.html">Wir schreiben eine Lernanwendung in Go und Javascript, um die tats√§chlichen Aktienrenditen zu bewerten. Teil 2 - Testen des Backends</a></li>
<li><a href="../de440570/index.html">Reflektierende Schattenkarten: Teil 2 - Implementierung</a></li>
<li><a href="../de440576/index.html">Wichtige √Ñnderungen an CTE in PostgreSQL 12</a></li>
<li><a href="../de440582/index.html">Werden Elektroautos auf den Grund des Autokonzerns gezogen?</a></li>
<li><a href="../de440584/index.html">Was ist los mit dem Raspberry Pi</a></li>
<li><a href="../de440586/index.html">Exonum-Konsens: Wie es funktioniert</a></li>
<li><a href="../de440588/index.html">Das MIT hat gelernt, wie man Schall mit einem Laser √ºbertr√§gt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>