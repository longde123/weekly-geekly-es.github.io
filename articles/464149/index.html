<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úçüèº üåø üö¥üèΩ La historia de un monolito. üßëüèº‚Äçü§ù‚Äçüßëüèª ‚ÜôÔ∏è üïã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Primera parte, en la que el lector se familiarizar√° con una breve historia de la aparici√≥n de productos internos de 2GIS y la evoluci√≥n del sistema de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La historia de un monolito.</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/2gis/blog/464149/"><img src="https://habrastorage.org/webt/ey/y4/pm/eyy4pmvrfn_bptplc1fl0vt9kpu.png"><br><br>  <i>Primera parte, en la que el lector se familiarizar√° con una breve historia de la aparici√≥n de productos internos de 2GIS y la evoluci√≥n del sistema de entrega de datos de varios scripts a una aplicaci√≥n completa.</i> <br><br>  Hoy les contar√© una historia que comenz√≥ hace 9 a√±os en DublGIS. <br><a name="habracut"></a><br>  Acabo de conseguir un trabajo all√≠.  Tuve que lidiar con el m√≥dulo para exportar datos desde un gran sistema interno para nuestros productos externos.  Y en este art√≠culo quiero compartir con ustedes c√≥mo dividimos este monolito en varias partes, c√≥mo un monstruo gener√≥ varias docenas de productos y c√≥mo se integraron todos estos productos y proyectos a nivel de datos entre ellos. <br><br>  Debo decir que este es solo un art√≠culo de revisi√≥n sin ning√∫n detalle t√©cnico.  La t√©cnica ser√° en la segunda parte, en la que hablaremos sobre la exportaci√≥n de datos.  Mientras tanto, solo lectura ligera sin matan con una menci√≥n superficial de la tecnolog√≠a. <br><br>  Vamos  Far 2010  Entonces 2GIS segu√≠a siendo un tubo DoubleGIS, de productos externos hab√≠a una versi√≥n de escritorio y una primitiva en l√≠nea y una versi√≥n para PDA.  Y el interior consist√≠a en un sistema de entrega de actualizaciones para los usuarios de nuestra versi√≥n para PC y un monstruo llamado DGPP, que combinaba herramientas para editar un directorio de organizaciones y mapas, CRM y exportar datos a productos finales.  La base de datos estaba en Firebird.  El sistema estaba descentralizado.  Cada ciudad ten√≠a su propia instalaci√≥n y su propia base de datos.  La integraci√≥n primitiva se proporcion√≥ mediante exportaciones / importaciones de archivos.  Y sobre esto, en general, eso es todo. <br><br><img src="https://habrastorage.org/webt/dr/pn/d0/drpnd0za0y8keildn8zcfldp9fs.png"><br><br>  DGPP en s√≠ era una aplicaci√≥n C ++ con un conjunto de scripts VBA.  Inicialmente, una oficina externa desarroll√≥ este sistema para DublGIS, y solo con el tiempo la empresa tom√≥ el desarrollo del sistema bajo su techo, formando su propia I + D.  Desarrollar DGPP se ha vuelto cada vez m√°s dif√≠cil. <br><br>  Y este fue el momento del r√°pido desarrollo de DublGIS.  Se estaban abriendo nuevas ciudades.  Se estaba preparando la versi√≥n m√≥vil para tel√©fonos inteligentes.  Nuevas caracter√≠sticas aparecieron.  Se estaba desarrollando un modelo publicitario.  En general, se requer√≠an una gran cantidad de cambios, que deb√≠an hacerse r√°pidamente. <br><br>  Lo primero que comenzamos a desmontar DGPP en pedazos fue la exportaci√≥n.  Lo incorporamos a una aplicaci√≥n separada, que es un servicio de Windows con un hocico en WPF.  Paralelamente, se estaba trabajando en un nuevo CRM.  Para ahorrar tiempo en ese momento, se eligi√≥ Microsoft Dynamics CRM como plataforma base. <br><br><img src="https://habrastorage.org/webt/xp/zn/js/xpznjsn9pclvxk7u958uewha0-y.png"><br><br>  En cuanto a la exportaci√≥n, solo ten√≠a que aprender a extraer datos de Firebird y extraer toda la l√≥gica para preparar los datos de los scripts de VBA.  Adem√°s, hab√≠a algunos algoritmos para el transporte de datos implementados en las ventajas.  Ten√≠an que ser reescritos en objetos punzantes. <br><br>  Aqu√≠ vale la pena prestar atenci√≥n a un punto.  Nuestro escritorio DoubleGIS consumi√≥ datos en un formato binario especial, que fue preparado por una biblioteca C ++ envuelta en un objeto COM.  Y luego fue bastante l√≥gico usarlo, simplemente conectando como referencia al proyecto.  No es la mejor soluci√≥n, pero hablar√© de esto m√°s adelante. <br><br>  Con el paso del tiempo, lanzamos una versi√≥n m√≥vil y un nuevo CRM.  Un nuevo producto externo ha aparecido en el horizonte: la API p√∫blica 2GIS.  Y desde DGPP ya han comenzado a aislar un subsistema para trabajar con un directorio de organizaciones con nombre en c√≥digo InfoRussia. <br><br>  En la exportaci√≥n, se hizo necesario leer datos publicitarios de dos sistemas: el antiguo DGPP y el nuevo CRM.  Adem√°s, la implementaci√≥n de CRM avanzaba gradualmente, es decir, en algunas ciudades, hasta ahora solo quedaba DGPP, mientras que en otras DGPP trabajaba simult√°neamente con un directorio y un mapa y CRM con informaci√≥n comercial.  Adem√°s, a la larga, el lanzamiento de InfoRussia, que tuvo lugar durante varios meses, fue brillante. <br><br><img src="https://habrastorage.org/webt/fn/h9/il/fnh9ilr5bt43khv4yburssepk1y.png"><br><br>  Los nuevos sistemas introdujeron complejidad no solo por su apariencia.  Cambiaron el concepto de despliegue.  A diferencia del DGPP descentralizado que exist√≠a en cada ciudad, estos sistemas estaban centralizados, cada uno con su propio DBMS regordete.  Adem√°s, necesitaban intercambiar datos. <br><br>  Para resolver este problema, implementamos nuestro Enterprise Service Bus (ESB).  En ese momento, pr√°cticamente no hab√≠a soluciones maduras que garantizaran el cumplimiento de algunos requisitos funcionales importantes para nosotros: la capacidad de transmitir XML, el orden de los mensajes y la garant√≠a de entrega.  Luego nos decidimos por SQL Server Broker, que proporcion√≥ todo lo necesario.  Es cierto que ten√≠a una velocidad de entrega bastante mediocre, pero en ese momento ella estaba muy contenta con nosotros. <br><br>  El √∫ltimo paso fue el lanzamiento de un servicio de mapas llamado Fiji.  Subi√≥ parcialmente sus datos al autob√∫s.  Esto se refer√≠a a directorios y clasificadores.  Los geodatos se le podr√≠an quitar a trav√©s de la API Rest, que tambi√©n fue utilizada por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el</a> propio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cliente de Fiji, escrita en WPF</a> . <br><br><img src="https://habrastorage.org/webt/q-/j7/jd/q-j7jdjhfuv-zvwmdjyfydpyc0q.png"><br><br>  En esta arquitectura, la exportaci√≥n era central.  A trav√©s de √©l, todos los flujos de datos se fusionaron en un √∫nico repositorio y se distribuyeron a los productos finales y a nuestros usuarios. <br><br>  Adem√°s, era solo una peque√±a parte del iceberg.  La automatizaci√≥n de los procesos internos, la aparici√≥n de nuevos requisitos y las nuevas caracter√≠sticas llevaron a la aparici√≥n de una gran cantidad de productos.  Era necesario hacer an√°lisis, trabajar con comentarios de los usuarios, introducir nuevos modelos de ventas y nuevos productos comerciales, desarrollar algoritmos de b√∫squeda, transporte y, en general, productos externos. <br><br>  Por un lado, la exportaci√≥n tiene una gran cantidad de proveedores de datos y, por otro, una gran cantidad de consumidores, cada uno de los cuales quer√≠a recibir datos en una forma espec√≠fica y ejecutarlos a trav√©s de algoritmos de preparaci√≥n especiales. <br><br><img src="https://habrastorage.org/webt/yf/mr/f1/yfmrf1oaxyyzgbcm_kq6riqkuuu.png"><br><br>  Y entonces mi historia lleg√≥ a su fin. <br><br>  En la segunda parte del art√≠culo, le contar√© sobre Exportar y compartir√© c√≥mo sobrevivi√≥ a todos estos cambios.  No habr√° historias, pero habr√° enfoques espec√≠ficos que hemos aplicado para resolver una lista espec√≠fica de tareas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/464149/">https://habr.com/ru/post/464149/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../464137/index.html">Soporte t√©cnico Miran: c√≥mo funciona</a></li>
<li><a href="../464141/index.html">Fantas√≠as sobre el tema de las metaclases en C #</a></li>
<li><a href="../464143/index.html">Cura personal contra el c√°ncer. C√≥mo los genes del paciente afectan el √©xito del tratamiento</a></li>
<li><a href="../464145/index.html">CMake: el caso cuando la calidad del proyecto es imperdonable</a></li>
<li><a href="../464147/index.html">CMake: el caso cuando el proyecto es imperdonable la calidad de su c√≥digo</a></li>
<li><a href="../464151/index.html">Victor Vyalichkin: "Libertad, igualdad, fraternidad est√°n solo en OpenStreetMap, donde todo est√° siempre a la vista"</a></li>
<li><a href="../464155/index.html">La IA ayuda a estudiar animales en √Åfrica</a></li>
<li><a href="../464161/index.html">SPAM y GDRP: ¬øc√≥mo hacer listas de correo "all√≠"?</a></li>
<li><a href="../464163/index.html">Esta palabra clave en JavaScript. Manual completo *</a></li>
<li><a href="../464165/index.html">Habr Weekly # 14 / Acerca de las reglas de comunicaci√≥n en los chats grupales, los monopolios y la protecci√≥n de los ni√±os contra la informaci√≥n peligrosa.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>