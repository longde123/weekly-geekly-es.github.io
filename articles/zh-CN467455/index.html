<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♓️ 👩🏽‍🏭 👉🏿 使用Milander控制器示例在QtCreator中对微控制器进行编程的QBS模板 🧔🏿 👩🏽‍🤝‍👩🏼 🤽🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="不久前，他帮助开发了一家名不见经传的公司Milander的微控制器。 官方的Keil开发环境。 我不喜欢它，但是处理器基于另一家鲜为人知的ARM公司的体系结构，这意味着有一个gcc编译器。 在有gcc的地方，QtCreator也可以用作IDE。 



 引言 
 最初，任务非常简单。 查找构建项目...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用Milander控制器示例在QtCreator中对微控制器进行编程的QBS模板</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467455/"> 不久前，他帮助开发了一家名不见经传的公司Milander的微控制器。 官方的Keil开发环境。 我不喜欢它，但是处理器基于另一家鲜为人知的ARM公司的体系结构，这意味着有一个gcc编译器。 在有gcc的地方，QtCreator也可以用作IDE。 <br><br><img alt="金属陶瓷盒很漂亮" src="https://habrastorage.org/webt/el/xq/74/elxq743z2r7bl4v7-fcntkey_28.png"><br><a name="habracut"></a><br><h3> 引言 </h3><br> 最初，任务非常简单。 查找构建项目所需的文件。 接受一个在stm32f407下已经完成的项目，并使用一个文件对其进行处理。 但是，在实施这样一个简单的计划期间，人们希望进行比最初想像的项目更有趣的项目。 <br><br><h3> 准备工作 </h3><br> 首先，您需要下载基于Cortex-M系列内核的微控制器的编译器和调试器。 最新版本在这里<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[1]</a> 。 您还将需要QtCreator，非懒惰的可以从源代码编译，懒惰的可以到达此处<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[2]</a> 。 我们还需要openocd来刷新和调试微控制器。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[3]</a> ARM站点上针对Cortex-M的GCC编译器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[9]</a> <br><br> 安装指定的软件以及所有必要的依赖项。 然后，我们开始设置环境。 <br><br><div class="spoiler">  <b class="spoiler_title">在图片中设置QtCreator'a</b> <div class="spoiler_text"> 如果未启用，请在“帮助”-&gt;“关于模块”中启用裸机支持 <br> 添加编译器 <br><br> 克++ <br><br><img src="https://habrastorage.org/webt/vn/vb/yb/vnvbybvdfgsw14uwvfi5uvbakpk.png"><br><br> 海湾合作委员会 <br><br><img src="https://habrastorage.org/webt/ev/og/y9/evogy9s8q0huptyocb8mw0ma5fc.png"><br><br> 添加gdb调试器 <br><br><img src="https://habrastorage.org/webt/df/ib/un/dfibunh8vhliggxza0r2ynmfi2g.png"><br><br> 我们创建一个openocd调试配置文件，这<s>不是一个</s>大问题。 配置文件的路径必须指定为绝对路径。 每个微控制器的文件是不同的，这带来了某些不便。 <br><br><img src="https://habrastorage.org/webt/-k/a-/s7/-ka-s72tf4nxvvwozzs_rikqi14.png"><br><br> 设置裸机 <br><br><img src="https://habrastorage.org/webt/s_/ev/uz/s_evuzqmckfqm0ohyivdz3szecc.png"><br><br> 并将其放在一个集合中 <br><br><img src="https://habrastorage.org/webt/10/vl/1a/10vl1amni2mqskr4uzo-dlj6pgu.png"><br></div></div><br><h3> 微控制器库 </h3><br> 在Milander网站上进行的粗略搜索并未产生用于与外设和微控制器内核一起使用的库的正式汇编。 该程序集支持gcc，位于github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[4]上</a> 。 组装非常容易地完成了stm32f407的项目，并且将其固定在几个地方之后，已经很高兴地渴望刷新微控制器。 编辑openocd配置文件，现在一切都在闪烁。 锁匠的工作和调试工作已经开始。 看来就这些了-轻松的胜利。 但是库支持多个微控制器。 不同内核上的微控制器也使用不同的外设库。 立刻想到创建一个项目的想法，以便您可以轻松选择所需的微控制器，环境本身将选择必要的核心库和外围设备。 当我掌握了stm32f407时，这个主意就出现了。 不能错过实现这样一个相当有趣的想法的机会。 <br><br> 在图书馆和qbs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[5]</a>进行的两晚选拔活动中获得了积极的结果。 可以为以下微控制器配置编译：MDR1901VC1T（19011），MDR1986VE1T（1986 BE1T），MDR1986VE3（1986 BE3），MDR1986BE4（1986 BE4x），MDR1986VE8T（1986 BE8x），MDR1986VE9x（1986 BE）。 尽管源库的描述不支持MDR1986VE8T，但是核心库和外围库文件中有一部分。 在ARM存储库中找到的一些头文件丢失了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[6]</a> 。 <br><br><h3> 最终项目 </h3><br> 结果是一个相当适度的模板，使您可以为多个微控制器编写项目。 将模板放在github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[7]上</a> 。 源库进行了许多修饰。 尽管我想保持与原始项目的兼容性，但我不得不分叉<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">[8]</a>并失去兼容性，但这是多功能性的代价。 您可以按以下方式下载项目。 <br><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/WicRus/emdr1986x-std-per-lib-qbs.git --recursive</code> </pre> <br> 您还可以通过指定存储库地址并递归地打勾，直接从QtCreator克隆项目。 <br><br><h3> 育种 </h3><br> 主要结果是通用模板，该模板支持具有不同内核和外围设备库的多个微控制器。 但是，应注意以下几点： <br><br><ul><li> 只能在MDR1986VE1T上检查固件和调试。 </li><li> 仅针对MDR1986VE1T和MDR1986VE9x找到了目标openocd配置文件。 对于其余的控制器，您需要自己携带或书写。 </li><li>  MDR1986VE8T的库在编译时并未对此问题有太多的了解。 必须检查正确的操作。 </li><li> 源库已发生重大变化。 可能的合并问题。 </li><li> 为MDR1901VC1T，MDR1986BE4，MDR1986VE9x进行构建时，会发出有关过时的内核库的警告。 有必要类似MDR1986VE8T更新内核库，然后检查正确的操作。 </li><li> 创建openocd配置的功能。 对于每种单独的微控制器类型，您可能需要在QtCreator中使用单独的构建套件。 </li></ul><br>  <b>参考文献</b> <br><br> 注意，链接将在此窗口中打开。 <br><br><a name="L0"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">0. KDPV网站Milander的依据</a> <br><a name="L1"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1. https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a> <br><a name="L2"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2. https://www.qt.io/download-qt-installer</a> <br><a name="L3"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3. http://openocd.org</a> <br><a name="L4"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4. https://github.com/eldarkg/emdr1986x-std-per-lib</a> <br><a name="L5"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">5. https://doc.qt.io/qbs/</a> <br><a name="L6"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">6. https://github.com/ARM-software/CMSIS_5</a> <br><a name="L7"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">7. https://github.com/WicRus/emdr1986x-std-per-lib-qbs</a> <br><a name="L8"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">8. https://github.com/WicRus/emdr1986x-std-per-lib</a> <br><a name="L9"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">9. https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a> <br><div class="spoiler">  <b class="spoiler_title">编辑历史。</b> <div class="spoiler_text">  19/09/17添加了指向GNU Arm嵌入式工具链的链接。 <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN467455/">https://habr.com/ru/post/zh-CN467455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN467439/index.html">为什么黑胶唱片会回来，流媒体服务与此相关？</a></li>
<li><a href="../zh-CN467443/index.html">多媒体中心“ Kodi”和Yocto项目</a></li>
<li><a href="../zh-CN467445/index.html">无法安装的Windows更新列表</a></li>
<li><a href="../zh-CN467449/index.html">具有内置保护的漏洞检测和对智能卡和加密处理器的黑客攻击的抵抗性评估</a></li>
<li><a href="../zh-CN467453/index.html">使用行星超级计算机解决42号问题</a></li>
<li><a href="../zh-CN467457/index.html">从手术到游戏开发者的方式或Unity上的移动开发的首次体验</a></li>
<li><a href="../zh-CN467459/index.html">微控制器如何以1.6 Gbps读取数据</a></li>
<li><a href="../zh-CN467461/index.html">RubyRussia2019。朱利安·波克罗夫斯基：如何优化整体</a></li>
<li><a href="../zh-CN467463/index.html">仅仅进行除法运算，或如何创建数学理论并从中获得40万美元。 系列三，决赛</a></li>
<li><a href="../zh-CN467465/index.html">云将节省超预算的智能手机吗</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>