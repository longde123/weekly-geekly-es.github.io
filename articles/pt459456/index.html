<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∏ üóûÔ∏è üåû Dagaz: Epis√≥dios (Parte 1) üë©üèº‚Äçü§ù‚Äçüë©üèª üôåüèª üç≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Abalamos seus filtros mentais, e o resultado foi uma resposta. O m√©todo funcionou, sempre ser√° eficaz. Tudo o que precisa ser feito √© se livrar do √¥nu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dagaz: Epis√≥dios (Parte 1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459456/"><img align="left" src="https://habrastorage.org/webt/4i/sc/k4/4isck4toxbws20hsk3nrqghdkoy.png">  <b><i>Abalamos seus filtros mentais, e o resultado foi uma resposta.</i></b>  <b><i>O m√©todo funcionou, sempre ser√° eficaz.</i></b>  <b><i>Tudo o que precisa ser feito √© se livrar do √¥nus extra do preconceito ...</i></b> <b><i><br><br></i></b>  <b><i>Raymond Jones " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">N√≠vel de ru√≠do</a> "</i></b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dagaz</a> n√£o apareceu do zero.  Sempre gostei de jogos de tabuleiro e quebra-cabe√ßas e fa√ßo programa√ß√£o o m√°ximo que me lembro, mas o pensamento de um certo mecanismo "universal" simplesmente n√£o poderia ter me passado pela cabe√ßa.  Eu era c√©tico em rela√ß√£o a essa ideia.  At√© eu ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zillions</a> .  Infelizmente, o produto, na √©poca, n√£o estava mais em desenvolvimento, o c√≥digo-fonte n√£o estava dispon√≠vel e, de fato, o programa funcionava apenas no Windows.  Depois de algum tempo, decidi pegar um projeto aberto. <br><a name="habracut"></a><br>  Como eu j√° disse, n√£o tinha c√≥digos-fonte, mas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">toquei</a> um pouco no Zillions e peguei sua ideia principal - a reutiliza√ß√£o m√°xima do c√≥digo do aplicativo, que permite usar as mesmas constru√ß√µes em diferentes, o que pareceria completamente diferente um do outro casos.  Era tudo sobre o caso de uso certo.  E eu fiz um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plano</a> . <br><br><h2>  Damas </h2><br>  Essa importante, mas extremamente subestimada fam√≠lia de jogos lan√ßou a pedra fundamental do projeto.  Todos os jogos de "damas" s√£o semelhantes entre si e diferem apenas em detalhes.  Em termos de design de jogos, todos eles est√£o unidos por tr√™s id√©ias principais: <br><br><ul><li>  Por cheque </li><li>  Prioridade </li><li>  Movimento composto </li></ul><br>  O primeiro par√°grafo n√£o levanta quest√µes especiais, mas se o desenvolvimento estiver focado nos jogos de xadrez, pode ser uma surpresa.  Nem em todos os jogos, a captura ocorre no mesmo campo em que a pe√ßa completa a jogada.  Com movimentos priorit√°rios, as coisas s√£o um pouco mais interessantes.  Nas damas, essa regra permite que voc√™ construa um jogo combinat√≥rio complexo, atraindo o inimigo para armadilhas que operam com o princ√≠pio de "dar menos - pegar mais". <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zMpxcNG2UDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Obviamente, o mecanismo de movimentos priorit√°rios foi implementado no Zillions (e migrado de l√° para Dagaz).  Sem ele, quase todos os jogos de damas (certamente inclu√≠dos no "conjunto de cavalheiros" de jogos de tabuleiro que s√£o obrigat√≥rios para implementa√ß√£o) simplesmente n√£o funcionavam corretamente.  √â tudo sobre os detalhes.  Vamos ver como esse mecanismo foi implementado: <br><br><div class="spoiler">  <b class="spoiler_title">Em zilh√µes</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">move-priorities</span></span> jump-type normal-type) ... (<span class="hljs-name"><span class="hljs-name">define</span></span> checker-shift ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) <span class="hljs-comment"><span class="hljs-comment">;        add ;   )) (define checker-jump ( $1 (verify enemy?) ;         capture ;   ( capture  -   ) $1 (verify empty?) ;           add ;   )) ... (piece (name Man) (image White "images/stapeldammen/white.bmp" Red "images/stapeldammen/red.bmp") (moves (move-type jump-type) (checker-jump nw) (checker-jump ne) (checker-jump sw) (checker-jump se) (move-type normal-type) (checker-shift nw) (checker-shift ne) ) )</span></span></code> </pre> </div></div><br>  Esta √© uma descri√ß√£o quase completa do jogo mais simples de damas.  O conceito de modos de movimenta√ß√£o ( <b>tipo de movimenta√ß√£o</b> ) √© introduzido no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ZRF</a> , e a <b>constru√ß√£o de prioridades de movimenta√ß√£o nos</b> permite dizer que, se houver movimentos de maior prioridade (takes), menos prioridade (movimentos silenciosos) n√£o deve ser considerada.  Os n√≠veis de prioridade podem ser determinados e mais de dois, nesse sentido, o design √© bastante universal, mas, trabalhando em jogos no Dagaz, me deparei com algumas limita√ß√µes desse mecanismo. <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/y6/6-/7r/y66-7rt1ejot9yb-ppoq-wmk98u.png"></a> </div><br>  Neste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogo</a> , inventado por Solomon Golomb, al√©m de damas, tamb√©m existem pe√ßas de xadrez.  A dificuldade reside no fato de que tomar, embora permane√ßa uma prioridade para as pe√ßas de xadrez, n√£o √© o mesmo para as pe√ßas de xadrez (caso contr√°rio, seria muito f√°cil captur√°-las e com√™-las).  Uma prioriza√ß√£o ing√™nua usando a palavra <b>-</b> chave <b>mover-prioridades</b> n√£o funcionar√° neste jogo. <br><br>  De fato, se as pe√ßas de xadrez n√£o estiverem inclu√≠das nos movimentos priorit√°rios, se houver a possibilidade de pegar uma pe√ßa de xadrez e uma pe√ßa de xadrez, n√£o poderemos jogar uma pe√ßa de xadrez, uma vez que uma captura de cheques √© uma prioridade.  Se os movimentos de xadrez forem considerados igualmente priorit√°rios, seremos obrigados a pegar pe√ßas de xadrez sempre que surgir a oportunidade.  Ambos contradizem as regras do jogo. <br><br>  Em Zilh√µes, esse problema praticamente n√£o est√° resolvido.  E esse foi o principal motivo pelo qual pensei em introduzir um mecanismo de extens√£o JavaScript no Dagaz.  A id√©ia, por si s√≥, √© bastante simples: como algumas mec√¢nicas de jogo s√£o bastante dif√≠ceis de expressar no ZRF, por que n√£o introduzir a fase de p√≥s-processamento dos movimentos?  O m√≥dulo de extens√£o, nesse caso, verifica toda a lista de movimentos gerados na sua totalidade e pode tomar decis√µes sobre a rejei√ß√£o de determinados movimentos.  Aqui est√° o que <a href="">parece</a> para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shashmat</a> : <br><br><div class="spoiler">  <b class="spoiler_title">C√≥digo simples e compacto</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> CheckInvariants = Dagaz.Model.CheckInvariants; Dagaz.Model.CheckInvariants = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">board</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> design = Dagaz.Model.design; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> types = []; types.push(design.getPieceType(<span class="hljs-string"><span class="hljs-string">"Bishop"</span></span>)); types.push(design.getPieceType(<span class="hljs-string"><span class="hljs-string">"Camel"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isPriority = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; _.each(board.moves, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">move</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isCapturing(board, move)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_.indexOf(types, getType(board, move)) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) isPriority = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isPriority) { _.each(board.moves, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">move</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isCapturing(board, move)) { move.failed = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }); } CheckInvariants(board); }</code> </pre></div></div><br>  No futuro, a id√©ia de extens√µes se desenvolveu e floresceu com uma cor magn√≠fica.  Eu tenho um mecanismo conveniente e poderoso para codificar muitos jogos cuja implementa√ß√£o em ZRF puro seria extremamente problem√°tica, mas isso significa que a prioriza√ß√£o no estilo ZRF est√° desatualizada?  Claro que n√£o!  Primeiro, escrever uma linha em ZRF √© mais f√°cil do que cinquenta em JavaScript, mas, mais importante, as prioridades "r√≠gidas" no estilo ZRF funcionam de maneira que movimentos de baixa prioridade nem sejam gerados!  Isso √© importante em termos de desempenho.  Gerar movimentos no Dagaz √© uma opera√ß√£o muito cara. <br><br><div class="spoiler">  <b class="spoiler_title">Outro jogo com prioridades desafiadoras</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/_w/zj/lj/_wzjljuhqpa3qmnfnousdrlkxhq.png"></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dablot</a> √© um jogo um pouco semelhante ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">italiano Drafts</a> , mas mais antigo.  Al√©m das figuras comuns, existem ‚Äúpr√≠ncipes‚Äù e ‚Äúreis‚Äù nela, e as figuras mais jovens n√£o t√™m o direito de derrotar os mais velhos.  Mas essa n√£o √© a dificuldade.  Para reis (e em algumas variedades do jogo tamb√©m para pr√≠ncipes), a captura √© opcional!  Aqui surge o mesmo problema que o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shashmat</a> .  Se declararmos o rei como uma prioridade, violaremos as regras do jogo, caso contr√°rio n√£o seremos capazes de derrot√°-lo com a possibilidade de uma batalha alternativa com uma figura simples.  Somente o mecanismo de extens√£o Dagaz resolve esse problema. <br><br>  A prop√≥sito, com "Italian Drafts" tudo n√£o √© t√£o simples.  Em muitas variedades de rascunhos, existe uma regra que declara que o jogador √© obrigado a pegar o n√∫mero m√°ximo de pe√ßas.  Ou seja, ele n√£o pode apenas interromper a cadeia de capturas, mas deve escolher o caminho em que ele pegar√° mais peda√ßos!  Pelas raz√µes que discutirei abaixo, esta regra n√£o p√¥de ser implementada no Zillions de forma universal e os desenvolvedores foram for√ßados a codific√°-la.  Nos rascunhos italianos, a "regra da maioria" parece ainda mais complicada: "voc√™ precisa vencer o n√∫mero m√°ximo poss√≠vel de rascunhos do oponente e, com op√ß√µes de batalha iguais, precisa vencer o n√∫mero m√°ximo de damas". <br></div></div><br>  Movimentos compostos s√£o o segundo componente importante dos jogos de damas.  T√£o importante que o <a href="">teste</a> para a captura correta nos " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rascunhos Turcos</a> " eu corro periodicamente at√© agora.  Algumas vezes, quando quebrei o modelo com as pr√≥ximas mudan√ßas, isso realmente ajudou. <br><br><div class="spoiler">  <b class="spoiler_title">Movimentos - compostos e parciais</b> <div class="spoiler_text"><div class="spoiler">  <b class="spoiler_title">Vamos ver como as movimenta√ß√µes compostas s√£o implementadas no ZRF</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> checker-shift ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">add</span></span> King) else add ) )) (<span class="hljs-name"><span class="hljs-name">define</span></span> checker-jump ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">add</span></span> King) else (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jump-type) ) )) (<span class="hljs-name"><span class="hljs-name">define</span></span> king-shift ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) add )) (<span class="hljs-name"><span class="hljs-name">define</span></span> king-jump ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jump-type) ))</code> </pre></div></div><br>  √â assim que √© simples.  O comando <b>add-parcial</b> diz que a movimenta√ß√£o pode ser continuada (com a mesma pe√ßa, isso √© importante) se ainda houver movimentos com o modo especificado.  Em outras palavras: "a figura deve continuar a ser usada, enquanto houver uma oportunidade".  Tudo parece estar bem, mas h√° uma ressalva.  Zillions v√™ cada um deles como um movimento "parcial" separado.  Vamos ver o que isso pode levar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pr/ff/mu/prffmuzpuk9wv7gks7do1h6djuq.png"></div><br>  Neste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogo</a> , o n√∫mero de "etapas" executadas por uma pe√ßa √© determinado pelo √≠cone em que est√°.  Agora as brancas se mexem e Damyo est√° andando (uma pe√ßa marcada com uma conta vermelha).  Em Zillions, depois de concluir dois movimentos parciais, ela pode facilmente ir para o canto superior esquerdo, do qual n√£o pode mais fazer o √∫ltimo movimento restante (voc√™ n√£o pode voltar).  Tomar a pe√ßa do oponente no segundo movimento parcial tamb√©m √© proibido.  No Zillions, n√£o h√° como proibir a sequ√™ncia de movimentos que levam a um beco sem sa√≠da. <br><br>  Na Dagaz, √© diferente!  Uma sequ√™ncia de movimentos parciais √© <b>sempre</b> montada em um movimento composto completo.  Uma jogada que n√£o pode ser conclu√≠da simplesmente n√£o vai acontecer!  Essa √© uma abordagem que consome muitos recursos e, como resultado, gerar uma lista de movimenta√ß√£o no Dagaz √© uma opera√ß√£o muito cara.  Mas suas vantagens s√£o significativas.  Por exemplo, o bot recebe todo o movimento composto na sua totalidade e n√£o deve olhar para a frente, executando os movimentos parciais restantes. <br><br>  Ainda mais importante, essa abordagem oferece a oportunidade de considerar toda a lista de movimentos condicionalmente aceit√°veis, executando verifica√ß√µes mais complexas e proibindo alguns movimentos, dependendo da presen√ßa de outros.  Por exemplo, a "regra da maioria", que mencionei acima, no Dagaz √© implementada de maneira bastante <a href="">simples</a> .  Al√©m disso, para os "damas italianos" tamb√©m.  Os desenvolvedores do Zillions "resolveram" o problema que conheciam para os jogos de damas codificando a op√ß√£o " <b>capturas m√°ximas</b> ", mas h√° um grande n√∫mero de jogos com outras verifica√ß√µes complexas que eles, na √©poca, n√£o tinham id√©ia! <br></div></div><br>  No processo de trabalhar em novos jogos, o conceito de uma jogada composta tamb√©m foi desenvolvido.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fanorona</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pasang</a> sugeriram uma mec√¢nica de jogo interessante, na qual um grupo de pe√ßas removidas do tabuleiro deve ser selecionado pelo jogador que executa o movimento: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/w2/zr/xf/w2zrxfku5fs-aklwv3983gcfk4w.gif"></a> </div><br>  Al√©m disso, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fanorona</a> √© um daqueles jogos raros em que um jogador tem o direito de interromper a cadeia de capturas.  A primeira captura √© obrigat√≥ria, a subsequente, dentro do mesmo movimento - a crit√©rio do jogador.  No Dagaz, essa op√ß√£o ( <b>passagem parcial</b> ) √© implementada movendo a figura no lugar.  O Missclick pode estar aqui, e isso, aparentemente, n√£o √© muito conveniente, mas com a introdu√ß√£o do <a href="">gerenciador de sess√µes</a> , movimentos errados agora podem ser revertidos. <br><br>  Um desenvolvimento adicional do t√≥pico foram os movimentos de "tiro".  Eu os fiz pela primeira vez em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hanga Roa</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ko Shogi</a> , mas como aconteceu depois, eu fiz errado!  A implementa√ß√£o incorreta n√£o funcionou sob o controle de bots (e como ainda n√£o tenho bots para esses dois jogos, n√£o √© de surpreender que eu n√£o tenha notado nada).  Muito mais tarde, quando fiz o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Amazons</a> , consegui localizar o problema e resolv√™-lo.  Essa id√©ia atingiu seu auge em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogo</a> inventado por um de nossos compatriotas em 1957. <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/7z/nv/k8/7znvk8vjkevscqukwkvl7qepw88.png"></a> </div><br>  H√° outro problema relacionado √† implementa√ß√£o de movimentos compostos no Dagaz.  O fato √© que a lista de jogadas permitidas, de um estado espec√≠fico do jogo, √© formada imediatamente - a coisa toda.  Em Zillions, com seus movimentos parciais, isso n√£o √© muito cr√≠tico, mas em Dagaz, se a pe√ßa tiver a oportunidade de "circular no lugar", a fase da gera√ß√£o do movimento nunca ser√° conclu√≠da (√© √≥bvio que √© imposs√≠vel corrigir esse problema com extens√µes, porque √© f√°cil lidar com eles n√£o alcan√ßa).  Aqui est√° um dos jogos para os quais isso √© importante: <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/jl/sl/n6/jlsln6ekdv4c_y8g4w2cdxtfjzm.png"></a> </div><br>  Aqui, as pe√ßas n√£o s√£o removidas do tabuleiro e a mesma pe√ßa pode ser saltada v√°rias vezes seguidas.  A solu√ß√£o √≥bvia √© proibir a visita ao mesmo campo duas vezes por turno, mas eu tive que entrar completamente no kernel para implementar essa verifica√ß√£o.  Era um pouco como a implementa√ß√£o da op√ß√£o " <a href="">captura diferida</a> ", mas desde que eu fiz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rascunhos Russos</a> muito antes, havia muito menos problemas com ela. <br><br><div class="spoiler">  <b class="spoiler_title">Infelizmente, existem jogos em que mesmo essas verifica√ß√µes n√£o salvam</b> <div class="spoiler_text">  As regras dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Stapeldammen</a> (este √© um tipo de ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pilares</a> ‚Äù) afirma explicitamente que a mesma pe√ßa pode ser vencida v√°rias vezes por turno. A pe√ßa que executa o movimento retorna √† mesma posi√ß√£o v√°rias vezes e continua a batalha, enquanto no inimigo existem figuras nas colunas .. Os movimentos compostos de Dagaz n√£o conseguem lidar com esse problema. A l√≥gica da batalha de Pole Drafts √© muito complicada para o kernel e n√£o alcan√ßa as extens√µes, porque a gera√ß√£o do loop √© repetida. Claro, existe uma sa√≠da: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/dw/r0/wqdwr0nl6vz3bentua8vpdiml18.png"></div><br>  N√£o h√° jogadas parciais no Dagaz, mas podemos imit√°-las pulando a pr√≥xima jogada do oponente (a mesma abordagem √© usada nos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">decalques</a> ).  E apenas essa l√≥gica √© facilmente implementada pela <a href="">extens√£o</a> .  Simplesmente proibimos todos os movimentos sob certas condi√ß√µes, e a op√ß√£o <b>passa-volta = for√ßada</b> gera automaticamente um movimento vazio.  Aqui est√° outro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogo</a> com emula√ß√£o semelhante. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l3/qg/ze/l3qgzeou6mpibm80fzejdzk5qp8.png"></div><br>  Dividir artificialmente os movimentos compostos em parciais n√£o √© muito bom para os bots de IA, mas, √†s vezes, simplesmente n√£o h√° outra sa√≠da. <br></div></div><br>  Em geral, o conceito de composto move vidas e se desenvolve.  Mais recentemente, tive que fazer outra nova op√ß√£o ( <b>parcial parcial</b> ) para um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogo</a> eg√≠pcio antigo. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ceBXdXL-aXE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Al√©m de completar automaticamente o movimento das figuras ao longo das setas, tamb√©m possui outras solu√ß√µes t√©cnicas interessantes.  Mas sobre isso em outro momento. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt459456/">https://habr.com/ru/post/pt459456/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt459444/index.html">Mudan√ßas recentes na pilha de E / S do Linux do ponto de vista do DBA</a></li>
<li><a href="../pt459446/index.html">Cinco tend√™ncias assustadoras do design moderno</a></li>
<li><a href="../pt459450/index.html">A vulnerabilidade do software de teleconfer√™ncia com zoom permite que qualquer site espie os usu√°rios via webcam</a></li>
<li><a href="../pt459452/index.html">Agro-rob√¥ com IA aprendeu a coletar cuidadosamente apenas salada amadurecida do jardim</a></li>
<li><a href="../pt459454/index.html">Como foi a primeira hackathon no The Standoff</a></li>
<li><a href="../pt459458/index.html">ok.tech: Os dados explicam # 2</a></li>
<li><a href="../pt459460/index.html">As dificuldades de trabalhar com o Redux e sua solu√ß√£o</a></li>
<li><a href="../pt459462/index.html">SEO para Yandex. Pesquisar tudo?</a></li>
<li><a href="../pt459464/index.html">Lua em Moscou 2019: entrevista com Roberto Jerusalem</a></li>
<li><a href="../pt459466/index.html">Lua em Moscou 2019: Entrevista com Roberto Ierusalimschy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>