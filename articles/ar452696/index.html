<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐈 🀄️ 🐠 كيفية بدء المدفوعات الصغيرة في التطبيق الخاص بك 👩🏼‍🤝‍👨🏽 🧗🏽 🛄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="في الأسبوع الماضي ، قضيت تطوير أول برنامج عام - وهو عبارة عن روبوت Telegram يعمل بمثابة محفظة Bitcoin ويسمح لك "برمي العملات المعدنية" للمشاركين الآخر...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>كيفية بدء المدفوعات الصغيرة في التطبيق الخاص بك</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452696/" style=";text-align:right;direction:rtl">  في الأسبوع الماضي ، قضيت تطوير أول برنامج عام - وهو عبارة عن روبوت Telegram يعمل بمثابة محفظة Bitcoin ويسمح لك "برمي العملات المعدنية" للمشاركين الآخرين في محادثات جماعية وأيضًا إجراء مدفوعات Bitcoin خارجية لنفسك أو لغيرهم مما يسمى  "تطبيقات البرق".  أعني أن القارئ بشكل عام على دراية بتكوين و Telegram ، كما  سأحاول الكتابة لفترة وجيزة ، دون الخوض في التفاصيل.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تتوفر مجموعة مختارة من الموارد حول Bitcoin على هذا الرابط</a> ، لكن Telegram هي أداة مراسلة فورية للأجهزة المحمولة وأجهزة الكمبيوتر التي تسمح لك بإنشاء تطبيقاتك الصغيرة (chatbots) على نظامها الأساسي. <br><br><h3 style=";text-align:right;direction:rtl">  ما هي الميزات الرئيسية لهذا التطبيق؟ </h3><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يتيح لك أن تشكر أو تكافئ المحاور بقيمة مادية حقيقية ، وليس فقط <i>"مثل الظاهري"</i> ، وهذا يأخذ الاتصالات الإلكترونية إلى مستوى جديد كليا </li><li style=";text-align:right;direction:rtl">  مثال في العالم الحقيقي لتطبيق يمكنه التفاعل مالياً مع التطبيقات الأخرى باستخدام بروتوكول دفع مفتوح </li><li style=";text-align:right;direction:rtl">  جميع مكونات التطبيق هي مشاريع مفتوحة المصدر ومن الممكن تعديلها وتطبيقها على المهام الخاصة بك.  لا يستخدم التطبيق الحلول المغلقة و / أو التجارية ، على الرغم من حقيقة أنه يناسب نطاق التجارة الإلكترونية ، والتي يصعب اليوم الاتصال بها. </li></ul><br><h3 style=";text-align:right;direction:rtl">  وكيفية تطبيقها في الأعمال التجارية؟ </h3><br>  شيء كهذا ... <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/097/02b/175/09702b1750c94616a10fc66c1275c00f.png" alt="صورة"></div><a name="habracut"></a><br>  او نحو ذلك ... <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3ef/1ff/85f/3ef1ff85f1e7b77662c63a9d4d838666.png" alt="صورة"></div><br>  ماذا تعني هذه الأرقام؟  هذه هي <b>وحدات بيتكوين - ساتوشي</b> .  في منتصف عام 2019 أسعار الصرف ، 1000 ساتوشي حوالي 0.06 دولار.  يمكن أن تنفق ساتوشي عبر الإنترنت أو يمكن استبدالها بسهولة بالعملة الوطنية.  ولهذا السبب (السيولة) ، فإن هذا ليس مجرد <i>"إدخال إلى قاعدة البيانات"</i> أو <i>"نقاط يمكنك إنفاقها في متاجر شركائنا ،"</i> ولكن <b>أموال الإنترنت الحقيقية</b> . <br>  <i>* أريد أن أشير على الفور إلى أنني لا أحاول عن عمد كتابة بعض الكلمات أو العبارات باللغة الروسية - إما أنني لا أعرف الترجمة السياقية في بعض الحالات ، أو في رأيي أن هذه الترجمة تبدو مربكة أكثر من صحيحة</i> <br><br>  قد يطرح السؤال ، كيفية استخدام مثل هذا التطبيق إذا لم يكن هناك عملات بيتكوين.  يمكن شرائها بسهولة بكميات صغيرة على واحدة من العديد من البورصات أو المبادلات ، أو يمكنك الحصول عليها من صديق بيتكوين أو حتى الحصول على عملات معدنية من المستخدمين الحاليين للروبوت.  تقدم العديد من المحافظ على الهاتف شراء عملات البيتكوين مباشرة "دون مغادرة مكتب النقد". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/883/661/461/883661461bdc686aec7d084d5d581236.png" alt="صورة"><img src="https://habrastorage.org/getpro/habr/post_images/779/716/5d9/7797165d93d292700d9a41a171d882a6.png" alt="صورة"><img src="https://habrastorage.org/getpro/habr/post_images/8fe/33b/84b/8fe33b84bb127132304634363bb4af42.png" alt="صورة"><br><br>  عندما حصلنا على عملات bitcoins (ولكن بدلاً من Satoshi (؟)) - قم بتشغيل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">@ atomic_tipbot</a> وقم بإجراء / إيداع. <br><br>  سوف يسألك bot ردا على المبلغ الذي ستضيفه satoshi إلى الرصيد وسيقوم بإرسال حساب للدفع ، والذي يمكن دفعه باستخدام محفظة نقالة عن طريق مسح رمز الاستجابة السريعة أو النقر فوق الزر ( <i>"فتح في محفظة"</i> ) على صفحة الفاتورة. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8fe/33b/84b/8fe33b84bb127132304634363bb4af42.png" alt="صورة"><img src="https://habrastorage.org/getpro/habr/post_images/4a3/da5/f76/4a3da5f76574ac9ebb2161d56bceff62.png" alt="صورة"><img src="https://habrastorage.org/getpro/habr/post_images/54d/a43/0be/54da430be68237193dee82ade50bab37.png" alt="صورة"><br><br>  لتأكيد الدفع على محفظتك ، سيتم على الفور إرسال تأكيد للدفع إلى الروبوت وسيتم عرض ذلك بشكل مرئي في إطار الحساب. <br><br>  حتى هذه اللحظة ، تطرقنا إلى مكونين من التطبيق - روبوت البرقية الخلفية ونظام معالجة دفع العملة المشفرة (بدلاً من ذلك ، الواجهة الأمامية له). <br><br>  لإنشاء روبوت Telegram ، استخدمت <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Python Telegram Bot</a> .  وبطبيعة الحال ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المصدر المفتوح</a> بوت نفسه. <br><br>  نظرًا لأن نظام معالجة الدفع وحل مشكلات UX ، فقد وقع الاختيار (في الواقع ، لا يوجد أي خيار تقريبًا) على <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">BTCPayServer</a> ، حيث <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تتوفر الوثائق على هذا الرابط</a> . <br><br>  إذا كنت تبحث عن حلول لمعالجة أحداث الدفع مباشرةً ، فعليك الانتباه إلى <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">صفحات دليل Electrum CLI</a> لما يسمى  المدفوعات على الإنترنت ، وحلول المدفوعات الصغرى الفورية (Lightning) مثل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Lightning-charge</a> أو <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Sparko</a> . <br><br><h3 style=";text-align:right;direction:rtl">  هل هي مستضافة ذاتيا أم لا؟ </h3><br>  نعم هو كذلك.  في تطبيقي ، أستخدم الاستضافة المجانية BTCPayServer - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">BTCPayJungle</a> ، لكن هذا ممكن تمامًا ولا يتطلب الكثير من الوقت لبدء تشغيل مركز المعالجة الخاص بي.  ومع ذلك ، تجدر الإشارة إلى أنك ستحتاج إلى 500 جيجابايت تقريبًا على السكك الحديدية لتخزين السلاسل البيتكوين (و Litecoin).  سيتطلب ذلك أيضًا موارد الحوسبة والشبكة طوال فترة التزامن ، ووفقًا لاحتياجاتك ، فإن "الأغلفة" اللازمة لسلاسل القطع ، بحيث تكون ملائمة للتفاعل معها.  لا يحتوي BTCPayServer على مفاتيح خاصة <i>حسب التصميم</i> أو أي معلومات أخرى تسمح لك بالتحكم في محفظتك. <br><br>  بالنسبة للمدفوعات (العادية) على السلسلة ، تحتاج إلى إضافة ما يسمى  مفتاح xpub-wallet في BTCPayServer لإنشاء عناوين الاستلام (المفاتيح العامة).  هذا يجعل من الممكن وآمن استخدام BTCPayServer حتى في شكل "مشترك".  يمكن الحصول على كل مفاتيح وعناوين xpub هذه بسهولة في محافظ جيدة مثل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Electrum</a> ، لمزيد من المعالجة. <br><br>  لقد سمع كل من صادف Bitcoin أن Bitcoin بطيء وأن المعاملات غالية الثمن ، خاصة عندما يكون هذا الضجيج ، لذلك يجب عليك استخدام معاملات Lightning Network (خارج شبكة الإنترنت) لعمليات الدفع الصغرى الفورية. <br><br><h3 style=";text-align:right;direction:rtl">  ما هي هذه الشبكة البرق؟ </h3><br>  هذا جزء من مكون البيتكوين الإضافي الذي يبني طبقة إضافية من التجريد ويسمح لك بإجراء معاملات فورية وخالية تقريبًا على شبكة بيتكوين.  كل هذا ممكن بفضل سحر التشفير مع التوقيعات المتعددة ، وغالبا ما تسمى <i>عقد ذكي</i> .  هناك العديد من تطبيقات بروتوكول Lightning Network ، يمكنني استخدام تطبيق <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">c-lightning</a> في C. <br><br>  الفرق الرئيسي بين المدفوعات على السلاسل وخارجها (Lightning) هو كيفية تخزينها.  يتم ترحيل جميع المعاملات التي تتم <b>عبر السلسلة</b> إلى جميع عقد الشبكة حتى تعلن إحدى عقد Bitcoin عن <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">كتلة ملغومة جديدة</a> مع المعاملات المضمنة فيها.  (يوجد حتى <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">BitFury على المحور</a> ، فهم ينتجون فقط الحديد للتعدين).  ولهذا السبب نسمي هذه المعاملات <b>على التسلسل</b> .  سيتم تسجيل هذه المعاملات في blockchain مشترك وتخزينها فيه حتى نهاية وجودها.  هذه المعاملات هي أيضا في المجال العام ويمكن رصدها وتتبعها وتحليلها. <br><br>  في حالة المعاملات <b>خارج السلسلة</b> (Lightning) ، يحدث كل شيء بشكل مختلف.  كل عقدة من شبكة Lightning لها عنوان واحد <i>(أو أكثر)</i> على السلسلة - هذه هي عناوين Bitcoin المعتادة التي يبدأ منها كل شيء.  عندما تظهر عملات البيتكوين في مثل هذا العنوان ، فمن الممكن فتح ما يسمى.  <i>قناة البرق</i> إلى عقدة أخرى ، مما يعني أنه بمساعدة تقنيات التشفير ، اتفقت هاتان العقدتان على توفر الأموال فيما بينهما.  في وقت لاحق ، يتم تخزين جميع المعاملات (الخاصة بها ومعاملات العقد الأجنبية) التي تمر عبر هذه القناة فقط على عقد المشاركين في المعاملة (والعقد الوسيطة).  المعاملات الوحيدة التي يتم تسجيلها على blockchain هي المعاملات حول فتح أو إغلاق قناة.  على نطاق أكثر شمولاً ، نحصل على شبكة من العقد المترابطة التي تبني بين المشاركين الآلاف من الطرق المختلفة "لتحويل" الأموال من عقدة إلى أخرى وفقًا لقواعد صارمة معينة.  يتم تخزين كل هذه المعاملات تقريبًا في ملف قاعدة بيانات العقد نفسها.  ولهذا السبب نسميها <b>خارج السلسلة</b> . <br><br><h3 style=";text-align:right;direction:rtl">  يوضح المخطط التصور لجميع مكونات التطبيق </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/3c6/636/b8c/3c6636b8c98d52aab9bd09ff9c52afcb.png" alt="صورة"><br><br>  باختصار: <br><br>  1) يقوم المستخدم بإرسال أمر إلى الروبوت في <b>Telegram</b> <br><br>  2) برقية يرسل رسالة حدث <b>بيثون</b> إلى <b>تطبيق</b> الروبوت <br><br>  3) يرسل <b>تطبيق الثعبان</b> طلبًا إلى <b>BTCPayServer</b> <br><br>  4) تنشئ BTCPayServer عناوين BTC و LTC الواردة ، بالإضافة إلى إرسال طلب فاتورة للشحن الخفيف ، والذي بدوره يتواصل مع البرنامج الخفي <b>c-lightning</b> .  في الإخراج ، نحصل على طريقة HTML جميلة لمعالجة الدفع <br><br>  5) يدفع المستخدم الفاتورة ويرى تأكيدًا <br><br>  6) يرسل <b>BTCPayServer</b> <i>إشعارًا بدفع الفواتير</i> (IPN) إلى callback_url المحدد ، في حالتنا <b>callbacks.py</b> (تطبيق آخر بيثون لتلقي الإخطارات) <br><br>  7) وفقا للبيانات الواردة ، يتغير رصيد المستخدم <br><br>  <i>... وإذا أراد المستخدم سحب الأموال (العملات المعدنية التي تلقاها من الآخرين) ...</i> <br><br>  8) ينتظر <b>تطبيق Python</b> الخاص بـ <b>boton</b> النص أو صورة رمز الاستجابة السريعة ، وعند استلام بيانات صالحة ، يتم إجراء الدفع بواسطة الأداة المساعدة <b>paylightning.py *</b> ، التي <b>تبدأ</b> المعاملة باستخدام c-lightning RPC. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/518/3dc/c81/5183dcc817817f1aa676ff74d17d08bb.png" alt="صورة"><br><br>  <i>* في الإنصاف ، تجدر الإشارة إلى أن ملف paylightning.py الخاص بي لم ينته تمامًا ويمكن أن يُرجع سلبيًا خاطئًا في سيناريوهات محددة.</i>  <i>أوصي <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">باستخدام مجمّع تم تصحيحه جيدًا</a> في الحالات القريبة من الإنتاج</i> <br><br>  ماذا لدينا؟  يمكن لمستخدمي روبوت لدينا داخل الدردشة الجماعية أو مباشرة نقل <b>قيمة المواد</b> دون قيود.  وهذا ليس كل شيء - بفضل بروتوكول شبكة Lightning Network ، والذي يعد شبكة دفع موحدة ومبسطة ، فمن الممكن أن ترسل الأموال نفسها التي يتم تلقيها في الدردشة إلى تطبيقات الطرف الثالث تمامًا.  على سبيل المثال ، حصل Telegram بالفعل على أول روبوت لمدفوعات البيتكوين - @ lntxbot.  يسمح لك "توازن واحد" باستخدام أيٍّ من برامج الروبوت بناءً على تفضيلات دردشة مجموعة معينة (نعم ، المشكلة مفتعلة تمامًا والحل عديم الجدوى ، ولكن النقطة في جوهرها).  تحويل الرصيد من روبوت إلى آخر لا يكلف شيئًا ويستغرق ثوانٍ!  من المهم أن نلاحظ أن المبدعين من هذه الروبوتات لم يتصلوا حتى مع بعضهم البعض. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f09/c3a/ef9/f09c3aef995f7a82560987646b0d8ee0.png" alt="صورة"><img src="https://habrastorage.org/getpro/habr/post_images/1e2/344/82c/1e234482c56aa0df1d4b341ecfe3beb8.png" alt="صورة"><br><br>  يكفي إعادة توجيه رسالة طلب الإيداع منlntxbot إلىatomic_tipbot و voul'a! <br><br>  هذه ليست مجرد "نقل الأرقام إلى قاعدة البيانات" ، ولكن الدفع بين قاعدتي بيانات مختلفتين لا علاقة لهما.  وبالتالي ، تم دمج العديد من "LApps" بالفعل في <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الروبوت</a> ، من بينها: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">sat2.io</a> و <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">lnsms.world</a> . <br><br>  <b>ماذا <i>يعني التكامل LApp</i> ؟</b> <br><br>  كل عقدة <i>شبكة Lightning</i> هي في الأساس محفظة Bitcoin.  لديها اثنين من الأرصدة: على سلسلة وخارج السلسلة.  يعد التوازن على الإنترنت ضروريًا لفتح قنوات جديدة وتخزين الأموال من القنوات المغلقة.  لكن التوازن خارج السلسلة هو ما يحدث بين العقد.  المتطلبات الأساسية للعقدة هي تلقي وإرسال المدفوعات ، لذلك كل عقدة كبرنامج لها وظائف <i><b>الدفع</b></i> <i><b>والفاتورة</b></i> .  سأوضح كيف يحدث هذا: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">user@ln-node:/ % lightning-cli invoice 1000000000 internal_description external_description { <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"64c0c8f5f8f708b08487ad1376f3d256f92ccb9606987ba395c2b4193efde5a0"</span></span>, <span class="hljs-string"><span class="hljs-string">"expires_at"</span></span> : 1558709834, <span class="hljs-string"><span class="hljs-string">"bolt11"</span></span> : <span class="hljs-string"><span class="hljs-string">"lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6"</span></span> }</code> </pre> <br>  نحصل على "فاتورة" من مواصفات <a href="">BOLT11</a> في هذه الحالة ، وهي عبارة عن تنسيق دفع على شبكة Bitcoin (و Litecoin ، بالمناسبة ، أيضًا).  هذا هو الخط الذي يحتوي على معلومات حول المستلم ومقدار المعاملة ووقت انتهاء الصلاحية ، وما إلى ذلك ، يمكن الحصول على معلومات مفصلة عن طريق تشغيل decodepay فيما يتعلق بهذا السطر: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">user@ln-node:/ % lightning-cli decodepay lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6 { <span class="hljs-string"><span class="hljs-string">"currency"</span></span> : <span class="hljs-string"><span class="hljs-string">"bc"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558105034, <span class="hljs-string"><span class="hljs-string">"expiry"</span></span> : 604800, <span class="hljs-string"><span class="hljs-string">"payee"</span></span> : <span class="hljs-string"><span class="hljs-string">"025a14b8ed40583d67aec92da19453e0b2d1fbbf75f96f85d3dd0ff61a51ee0490"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 1000000000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"1000000000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> : <span class="hljs-string"><span class="hljs-string">"external_description"</span></span>, <span class="hljs-string"><span class="hljs-string">"min_final_cltv_expiry"</span></span> : 10, <span class="hljs-string"><span class="hljs-string">"routes"</span></span> : [ [ { <span class="hljs-string"><span class="hljs-string">"pubkey"</span></span> : <span class="hljs-string"><span class="hljs-string">"03a20c0c2ae4508b669a70e5f82f08f69a3da5da3bf0c973673c3fe977db0f61e3"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_channel_id"</span></span> : <span class="hljs-string"><span class="hljs-string">"574012x1255x1"</span></span>, <span class="hljs-string"><span class="hljs-string">"fee_base_msat"</span></span> : 1000, <span class="hljs-string"><span class="hljs-string">"fee_proportional_millionths"</span></span> : 1, <span class="hljs-string"><span class="hljs-string">"cltv_expiry_delta"</span></span> : 144 } ] ], <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"64c0c8f5f8f708b08487ad1376f3d256f92ccb9606987ba395c2b4193efde5a0"</span></span>, <span class="hljs-string"><span class="hljs-string">"signature"</span></span> : <span class="hljs-string"><span class="hljs-string">"304502210099f31dffd18b6db8296637db3e3a1ffbaf7b7db087a2ad1eedb7639f25e78b25022079038370073681aa1e1a7a05de6588e98ead078896d0a37a15b755c212dc3d37"</span></span> }</code> البرق المبادرة القطرية decodepay lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6 <code class="bash hljs">user@ln-node:/ % lightning-cli decodepay lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6 { <span class="hljs-string"><span class="hljs-string">"currency"</span></span> : <span class="hljs-string"><span class="hljs-string">"bc"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558105034, <span class="hljs-string"><span class="hljs-string">"expiry"</span></span> : 604800, <span class="hljs-string"><span class="hljs-string">"payee"</span></span> : <span class="hljs-string"><span class="hljs-string">"025a14b8ed40583d67aec92da19453e0b2d1fbbf75f96f85d3dd0ff61a51ee0490"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 1000000000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"1000000000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> : <span class="hljs-string"><span class="hljs-string">"external_description"</span></span>, <span class="hljs-string"><span class="hljs-string">"min_final_cltv_expiry"</span></span> : 10, <span class="hljs-string"><span class="hljs-string">"routes"</span></span> : [ [ { <span class="hljs-string"><span class="hljs-string">"pubkey"</span></span> : <span class="hljs-string"><span class="hljs-string">"03a20c0c2ae4508b669a70e5f82f08f69a3da5da3bf0c973673c3fe977db0f61e3"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_channel_id"</span></span> : <span class="hljs-string"><span class="hljs-string">"574012x1255x1"</span></span>, <span class="hljs-string"><span class="hljs-string">"fee_base_msat"</span></span> : 1000, <span class="hljs-string"><span class="hljs-string">"fee_proportional_millionths"</span></span> : 1, <span class="hljs-string"><span class="hljs-string">"cltv_expiry_delta"</span></span> : 144 } ] ], <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"64c0c8f5f8f708b08487ad1376f3d256f92ccb9606987ba395c2b4193efde5a0"</span></span>, <span class="hljs-string"><span class="hljs-string">"signature"</span></span> : <span class="hljs-string"><span class="hljs-string">"304502210099f31dffd18b6db8296637db3e3a1ffbaf7b7db087a2ad1eedb7639f25e78b25022079038370073681aa1e1a7a05de6588e98ead078896d0a37a15b755c212dc3d37"</span></span> }</code> </pre><br>  لكن للدفع مقابل هذه "الفاتورة" ، نحتاج إلى وظيفة الدفع من light-c: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">user@ln-node:/ % lightning-cli pay lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j { <span class="hljs-string"><span class="hljs-string">"id"</span></span> : 163, <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"c3e644a005f56e33df89facbce2c9dfcabbef5d105285a98272cacc77ab2de63"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span> : <span class="hljs-string"><span class="hljs-string">"03021c5f5f57322740e4ee6936452add19dc7ea7ccf90635f95119ab82a62ae268"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 200000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi_sent"</span></span> : 200003, <span class="hljs-string"><span class="hljs-string">"amount_sent_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200003msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558106072, <span class="hljs-string"><span class="hljs-string">"status"</span></span> : <span class="hljs-string"><span class="hljs-string">"complete"</span></span>, <span class="hljs-string"><span class="hljs-string">"payment_preimage"</span></span> : <span class="hljs-string"><span class="hljs-string">"1a9552b9f4e9199e26839353f870b12cc85b7674a2fb134e78aa370032611019"</span></span>, <span class="hljs-string"><span class="hljs-string">"bolt11"</span></span> : <span class="hljs-string"><span class="hljs-string">"lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j"</span></span> }</code> البرق المبادرة القطرية lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j الأجور <code class="bash hljs">user@ln-node:/ % lightning-cli pay lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j { <span class="hljs-string"><span class="hljs-string">"id"</span></span> : 163, <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"c3e644a005f56e33df89facbce2c9dfcabbef5d105285a98272cacc77ab2de63"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span> : <span class="hljs-string"><span class="hljs-string">"03021c5f5f57322740e4ee6936452add19dc7ea7ccf90635f95119ab82a62ae268"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 200000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi_sent"</span></span> : 200003, <span class="hljs-string"><span class="hljs-string">"amount_sent_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200003msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558106072, <span class="hljs-string"><span class="hljs-string">"status"</span></span> : <span class="hljs-string"><span class="hljs-string">"complete"</span></span>, <span class="hljs-string"><span class="hljs-string">"payment_preimage"</span></span> : <span class="hljs-string"><span class="hljs-string">"1a9552b9f4e9199e26839353f870b12cc85b7674a2fb134e78aa370032611019"</span></span>, <span class="hljs-string"><span class="hljs-string">"bolt11"</span></span> : <span class="hljs-string"><span class="hljs-string">"lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j"</span></span> }</code> </pre><br>  تتم معالجة جميع حالات المعاملات من خلال الشبكة بالكامل والعقدة الخاصة بك على وجه الخصوص.  ليست هناك حاجة (ولكن هناك مثل هذه الفرصة) للتفاعل مع مؤلفي طلب المستفيد أو أي من واجهات برمجة التطبيقات الخاصة بهم للحصول على معلومات حول حالة الدفع.  ليست هناك حاجة للتحقق من حالة الدفع في نظام المعالجة الوسيطة.  لا حاجة لتوقع الموافقة على معاملتك من بنك أو وكالة حكومية.  في النهاية ، لا توجد عمليات تحميل التكاليف وعوامل خارجية أخرى يمكن أن تؤثر على رصيد حسابك.  هذا هو الحل لنقل القيمة عبر الإنترنت ، دون الحاجة إلى محكم خارجي يقرر ما إذا كانت المعاملة تمتثل للقواعد (في بعض الأحيان حتى القواعد الداخلية ، والتي لا يتم إعلام جميع المشاركين بها مقدمًا) أم لا.  لا توجد "قواعد داخلية" في البيتكوين.  القواعد الوحيدة التي تحتاج إلى اتباعها هي قواعد الشبكة - مفتوحة ومعروفة. <br><br>  هذا يجعل المعاملات المالية <b>المباشرة</b> <b>والخالية عملياً</b> <b>وفورية</b> بين الأشخاص أو البرامج واقعية بشكل واقعي. <br><br>  إذا كانت لديك الفرصة لتلقي بيانات الدفع من تطبيق تابع لجهة خارجية ، يصبح من الممكن التفاعل ماليًا مع هذا التطبيق.  على سبيل المثال ، ضع في اعتبارك خدمة lnsms.world ، التي تسمح لك بإرسال رسالة نصية قصيرة إلى رقم تعسفي عن طريق دفعها باستخدام عملات البيتكوين.  لدمج هذا التطبيق ، نحتاج فقط إلى نقل البيانات من نموذج الويب مباشرةً إلى البرنامج النصي لإرسال الرسائل النصية القصيرة - لمحاكاة إجراءات المستخدم على الموقع الإلكتروني: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">payload = { <span class="hljs-string"><span class="hljs-string">'number'</span></span>: phone_number, <span class="hljs-string"><span class="hljs-string">'text'</span></span>: text, <span class="hljs-string"><span class="hljs-string">'force_unicode'</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } send_req = requests.post(<span class="hljs-string"><span class="hljs-string">'https://lnsms.world/invoice'</span></span>, data=payload) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> send_req.status_code == <span class="hljs-number"><span class="hljs-number">201</span></span>: plain_invoice = str(send_req.text)</code> </pre><br>  لا أعرف لأي سبب ، لكن lnsms يستجيب برمز حالة HTTP 201 ويعيد فاتورة بتنسيق BOLT11.  حسنًا ، هذا يكفي لمستخدمي الروبوتات لدفع تكاليف إرسال الرسائل القصيرة من رصيدهم المستلم في غرف الدردشة.  المستخدم لا يعرف حتى ما يحدث هناك ، لقد دفع بضع سنتات فقط لإرسال الرسائل القصيرة.  وأنا ، كمطور ، لا أخوض في تفاصيل عمل خدمات الرسائل القصيرة.  فقط أحال الدفع واستلمت الخدمة.  يمكنك عمل ترميز على القمة ، لكن لا يمكنك القيام بذلك - هذا خياري المجاني.  لا توجد حسابات أو اتفاقيات أو واجهة برمجة تطبيقات أخرى للقيام بالمهام البسيطة مثل إرسال الرسائل القصيرة. <br><br>  والآن دعنا نتخيل في الوقت الحالي أن تطبيقنا هو شيء أكثر فائدة من روبوت الدردشة ولا يقوم بالدفع إلى روبوت آخر ، بل إلى تطبيق أو جهاز آخر متصل بالإنترنت.  أو إنها العشرات أو حتى المئات من المدفوعات غير الهامة كل ثانية بين الأجهزة أو الخدمات أو المتاجر أو نوع من مزودي الخدمة.  هذه هي قوة المدفوعات الصغيرة ، لذلك يجب أن تبدو إنترنت الأشياء.  يوجد بالفعل مشاريع مثل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Althea تنقل</a> هذه الأفكار إلى الحياة وفي المستقبل القريب ، سنرى تغييرات كبيرة ، في رأيي ، في المنطقة التي نسميها الآن التجارة الإلكترونية. <br><br>  إذا كنت تحب المنشور وترغب في تجربة عملات البيتكوين ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">فأرسل لي بيرة وكعك فرنسي ناعم</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar452696/">https://habr.com/ru/post/ar452696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar452684/index.html">تطوير لعبة على Svelte 3</a></li>
<li><a href="../ar452686/index.html">تجسس لا يحظرون عليه (قصة من الثمانينات)</a></li>
<li><a href="../ar452688/index.html">خدمة ويندوز. البحث عن أخطاء النظام وعرضها في WinForm C #</a></li>
<li><a href="../ar452690/index.html">ما هو المثير للاهتمام للغاية حول السكك الحديدية عبر سيبيريا؟</a></li>
<li><a href="../ar452692/index.html">قام مؤلف مشروع rePalm بإعادة كتابة نظام التشغيل Palm OS من البداية ويخطط لتحويله إلى منصة مراقبة ذكية</a></li>
<li><a href="../ar452698/index.html">اثنان في واحد: البيانات السياحية وتذاكر الأحداث الثقافية كانت متاحة للجمهور</a></li>
<li><a href="../ar452700/index.html">أخبار من خريطة الشارع المفتوح رقم 460 (05/07/2019 - 05/05/2019)</a></li>
<li><a href="../ar452702/index.html">اختبارات للرمز ورمز للاختبارات</a></li>
<li><a href="../ar452704/index.html">تصحيح الأخطاء بعد الوفاة على Cortex-M</a></li>
<li><a href="../ar452706/index.html">في عام 1983 ، أصبح هذا الكمبيوتر من Bella Labs أول غراند ماستر.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>