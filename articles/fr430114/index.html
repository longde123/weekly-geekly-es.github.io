<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçü§ù‚Äçüë®üèº üöß ‚ò¶Ô∏è Comment cr√©er des m√©canismes de jeu fiables dans Excel. 2e partie üòã üêû üíÜüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cette partie, nous allons r√©soudre le probl√®me du placement optimal des armes sur le char, la disposition spatiale des t√©l√©porteurs en MMORPG et ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment cr√©er des m√©canismes de jeu fiables dans Excel. 2e partie</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430114/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/uz/nc/jb/uzncjbvwkyi9mqataguysd8pjai.png"></div><br>  Dans cette partie, nous allons r√©soudre le probl√®me du placement optimal des armes sur le char, la disposition spatiale des t√©l√©porteurs en MMORPG et √©quilibrer les batailles des quatre classes de personnages RPG. <br><br><h2>  T√¢ches de placement d'objets </h2><br>  <i>Les feuilles de calcul pour cette partie peuvent √™tre t√©l√©charg√©es ici: ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SuperTank</a> ) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©porteurs, partie 1</a> ) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©porteurs, partie 2</a> )</i> <br><br><h2>  SuperTank: le probl√®me est r√©solu! </h2><br>  Dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">premier article de la</a> s√©rie, nous avons parl√© d'un exemple de t√¢che pour un jeu appel√© SuperTank.  Dans la deuxi√®me partie, nous nous sommes familiaris√©s avec les concepts de base de la mod√©lisation d√©cisionnelle et j'ai parl√© de r√©soudre un exemple simple en utilisant l'outil "Rechercher des solutions" dans Excel. <br><br>  Nous pouvons maintenant appliquer les connaissances acquises dans la deuxi√®me partie au probl√®me du SuperTank et prouver qu'avec leur aide, ce probl√®me peut √™tre r√©solu facilement et rapidement.  Rafra√Æchissez votre m√©moire: SuperTank est un jeu dans lequel vous pouvez vous battre sur un tank personnalis√©. <a name="habracut"></a>  Le supertank ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb8/a6c/2fc/fb8a6c2fcddbb776a18893059f989afc.jpg"></div><br>  Chaque supertank peut avoir n'importe quel nombre d'armes √† feu de cinq types diff√©rents: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62e/717/050/62e717050c0d1e991663a3e9ef2dfc39.png"></div><br>  Un supertank peut contenir 50 tonnes d'armes et un joueur peut d√©penser 100 cr√©dits.  En outre, le supertank dispose de 3 ¬´emplacements critiques¬ª, dans lesquels des pistolets sp√©ciaux tels que MegaRocket et UltraLaser sont plac√©s. <br><br>  La feuille de calcul de cet exemple peut √™tre t√©l√©charg√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  L'objectif est de ramasser des armes qui maximisent les d√©g√¢ts caus√©s par le super tank, sans d√©passer les limites de 50 tonnes, 100 cr√©dits et 3 emplacements critiques.  Nous supposons √©galement que ce tableau contient toutes les informations n√©cessaires et que des facteurs tels que la port√©e, la fr√©quence et la pr√©cision ne sont pas pertinents ou sont d√©j√† pris en compte dans le param√®tre D√©g√¢ts de l'arme correspondante. <br><br>  Pour optimiser ce sch√©ma, nous saisissons d'abord ces donn√©es dans la feuille de calcul.  Juste en dessous, nous ajouterons un autre tableau, dans lequel il y aura un ensemble de 5 cellules ¬´quantitatives¬ª pour indiquer la quantit√© de chacun des 5 types d'armes. <br><br>  Jusqu'√† ce que nous entrions une valeur de 1 dans ces cellules, juste pour tester leur travail, mais ce seront nos cellules de d√©cision - nous demanderons √† l'outil Solveur de trouver les valeurs correctes pour ces cellules.  Il est possible de comprendre que ce sont des cellules de d√©cision en jaune, car nous continuons de suivre les r√®gles de mise en forme d√©crites dans la deuxi√®me partie.  √Ä droite des cellules ¬´quantitatives¬ª, nous ajouterons des cellules de calcul qui multiplieront les valeurs de quantit√© dans les cellules de d√©cision par les valeurs de dommages, poids, co√ªt et emplacements critiques du tableau ci-dessus.  Ainsi, chaque ligne de ce tableau affichera correctement les d√©g√¢ts, le poids, le prix et les emplacements critiques requis pour toutes les armes utilis√©es dans toutes les cat√©gories d'armes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4e/342/27a/f4e34227a58768ee4d0a4f79fe6954e3.png"></div><br>  Nous allons √©galement cr√©er une section ci-dessous, qui r√©sumera toutes les valeurs de quantit√©, de poids, de co√ªt et de cr√©neaux critiques du tableau ci-dessus, et les comparera avec les valeurs maximales de poids, de co√ªt et de cr√©neaux critiques sp√©cifi√©es dans les conditions de la t√¢che (50, 100 et 3, respectivement). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f6/76d/b7e/7f676db7e7034d6b9a02be24c5a1eb4b.png"></div><br>  Conform√©ment aux r√®gles de mise en forme de la deuxi√®me partie de l'article, les cellules bleues en haut sont les crit√®res des conditions du probl√®me.  Les cellules grises sont des cellules de calcul qui repr√©sentent le poids total, le co√ªt et les emplacements critiques en fonction de la somme du tableau des quantit√©s (c'est-√†-dire les valeurs totales des colonnes Poids x Quantit√©, Co√ªt x Quantit√© et Emplacements critiques x Quantit√©).  Enfin, la cellule orange repr√©sente le total des d√©g√¢ts de notre super tank re√ßus sur la base du total des d√©g√¢ts de la colonne Damage x Quantity du tableau ci-dessus. <br><br>  Avant de commencer, rendons notre feuille de calcul plus conviviale.  Nous profiterons de l'occasion d'Excel pour attribuer un nom √† chaque cellule et donner des noms clairs √† sept cellules dans le dernier tableau de calcul.  C'est facultatif, mais √† long terme, cela rendra la feuille de calcul beaucoup plus claire (par exemple, si au lieu de $ F $ 21 la cellule sera appel√©e MaxCriticalSlots).  Pour ce faire, il suffit de s√©lectionner une cellule et d'aller dans le champ de saisie du nom √† gauche du champ de formule, puis de saisir un nouveau nom. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/295/3bc/e19/2953bce19ac48c3e2ed4920edbb1e26b.png"></div><br>  Enfin, allons dans Excel Solver et trouvons une solution (allez sur le c√¥t√© droit de l'onglet Donn√©es et s√©lectionnez Solver. Si vous ne le voyez pas, allez dans Options Excel , s√©lectionnez la cat√©gorie Compl√©ments ("Modules compl√©mentaires"), assurez-vous que les Compl√©ments Excel sont s√©lectionn√©s dans la liste d√©roulante "G√©rer", cliquez sur Aller ("Aller ...") et assurez-vous que La case Compl√©ment Solveur est coch√©e. <br><br>  Dans le champ D√©finir l'objectif (¬´Optimiser la fonction objectif¬ª), nous s√©lectionnerons la cellule orange de la cible, puis cliquez sur le bouton radio Max (¬´Maximum¬ª).  Dans le champ En modifiant les cellules variables, s√©lectionnez les cellules de d√©cision (cellules jaunes dans la colonne Quantit√© du deuxi√®me tableau).  Ci-dessous, cliquez sur le bouton Ajouter pour ajouter les restrictions suivantes: <br><br><ul><li>  Les valeurs des cellules de d√©cision doivent √™tre comprises entre 0 et un maximum raisonnable (nous avons choisi 50, m√™me s'il s'agit probablement d'une valeur limite beaucoup plus √©lev√©e que n√©cessaire).  Il est √©galement n√©cessaire de d√©finir chaque cellule de solution sur une restriction "= entier", car nous ne pouvons pas avoir une partie fractionnaire de l'armement, et Excel Solver consid√®re que chaque variable est un nombre r√©el par d√©faut, sauf indication contraire. </li></ul><br><ul><li>  Nous devons √©galement limiter les valeurs du co√ªt total, du poids total et du nombre total d'emplacements critiques aux valeurs des conditions du probl√®me.  L'image de la bo√Æte de dialogue montre qu'ils ont maintenant des noms pratiques que nous avons ajout√©s au tableau inf√©rieur, ce qui facilite la lecture de la bo√Æte de dialogue. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b88/86b/402/b8886b40290a1c34dd36245276ef9930.png"></div><br>  Maintenant, nous cliquons sur le bouton R√©soudre (¬´Trouver une solution¬ª) et apr√®s une courte attente, le solveur remplira les valeurs de quantit√©, ce qui nous donnera ce qui suit: <br><br><ul><li>  1 mitrailleuse </li><li>  3 fus√©es </li><li>  2 MegaRockets </li><li>  1 laser </li><li>  1 UltraLaser </li></ul><br>  Tout cela nous donne un total de d√©g√¢ts de 83 unit√©s et prend exactement 50 tonnes, 100 cr√©dits et 3 emplacements critiques.  Vous pouvez voir que la meilleure solution ne change pas avec l'ex√©cution du solveur.  Si vous r√©initialisez ces valeurs et effectuez une seconde optimisation, ou allez dans Options et modifiez la valeur de d√©part, nous obtiendrons toujours les m√™mes valeurs.  Nous ne pouvons pas √™tre s√ªrs √† 100% que cette solution est optimale, mais compte tenu du fait que Solver n'a pas r√©ussi √† l'am√©liorer apr√®s plusieurs passes d'optimisation, il est tr√®s probable qu'il s'agit d'un r√©el optimum, et pas seulement d'un maximum local. <br><br>  Le probl√®me est r√©solu! <br><br><h2>  Utilisations suppl√©mentaires </h2><br>  Ce qui est cool, c'est que non seulement nous avons r√©solu le probl√®me beaucoup plus rapidement que nous ne pouvions le traiter manuellement, mais aussi que nous l'avons configur√© de mani√®re √† ce qu'il nous permette de tester quelles armes dans le jeu SuperTank seront les plus utiles avec diff√©rents param√®tres (poids, co√ªt, emplacements critiques).  Cela signifie que nous pouvons changer relativement facilement l'effet de divers changements de ces param√®tres sur le jeu SuperTank, et si nous voulons ajouter un nouveau mod√®le alternatif de super tank qui sera plus l√©ger, plus lourd ou aura un nombre diff√©rent d'emplacements critiques, alors cela peut √™tre fait tr√®s simplement. <br><br>  En modifiant tous ces param√®tres, nous pouvons √©galement comprendre l'utilit√© relative de chacune de ces armes et d√©terminer rapidement laquelle est trop utile, pas assez utile, a un prix qui ne convient pas √† son poids et √† ses d√©g√¢ts, etc. <br><br>  Encore une fois, le fait est qu'un tel outil nous permet de rechercher l'espace de conception beaucoup plus rapidement que nous ne pourrions le faire manuellement.  Cela nous offre une opportunit√© pratique d'√©valuer l'effet de ces changements pour toute d√©cision de conception incr√©mentielle que nous pouvons prendre, que ce soit en changeant les param√®tres de l'arme ou du super tank lui-m√™me, en ajoutant de nouvelles armes ou des mod√®les de super tanks, ainsi qu'en ajoutant de nouveaux param√®tres (disons que la taille limite est en m√®tres cubes). <br><br>  Pour comprendre ce que je veux dire, acc√©dez √† la cellule bleue ¬´Co√ªt maximal¬ª et modifiez sa valeur de 100 √† 99. Ex√©cutez √† nouveau Solver et vous obtiendrez une disposition d'arme compl√®tement diff√©rente: <br><br><ul><li>  0 mitrailleuses </li><li>  2 fus√©es </li><li>  3 MegaRockets </li><li>  3 lasers </li><li>  0 UltraLasers </li></ul><br>  Un tel sch√©ma donne un indice de dommage l√©g√®rement inf√©rieur (82 au lieu de 83), mais il est radicalement diff√©rent du pr√©c√©dent. <br><br>  Si vous d√©finissez la valeur du co√ªt maximal sur 101 ou 102 et effectuez √† nouveau le calcul, il est possible que nous obtenions une configuration similaire √† la premi√®re ou co√Øncidant avec elle;  Quoi qu'il en soit, les dommages resteront √©gaux √† 83 (les r√©gimes peuvent changer, car dans de tels cas, il existe plusieurs r√©gimes optimaux).  Cependant, si vous d√©finissez Co√ªt maximum sur 103, vous devriez obtenir les √©l√©ments suivants: <br><br><ul><li>  1 mitrailleuse </li><li>  4 fus√©es </li><li>  2 MegaRockets </li><li>  0 lasers </li><li>  1 UltraLaser </li></ul><br>  Ce qui augmente le total des d√©g√¢ts √† 84. <br><br>  C'est int√©ressant: cet arrangement d'armes est tr√®s diff√©rent des deux premiers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/106/807/611/106807611d9a60e93d06f9ddeca3f7f6.png"></div><br>  Comme vous pouvez le voir, nous obtenons un r√©sultat inattendu: le choix optimal des armes dans notre sch√©ma d√©pend fortement des param√®tres du super tank et peut varier consid√©rablement m√™me avec de petits changements dans ces param√®tres.  De plus, cela nous donne toutes sortes d'informations utiles: les cinq types d'armes sont utiles dans au moins deux des trois param√®tres de super tank, et les fus√©es et les m√©ga-poches sont √©videmment utiles dans les trois.  Il semble que cela nous indique que les cinq types d'armes sont bien √©quilibr√©s, c'est-√†-dire utiles les uns par rapport aux autres, et en m√™me temps ils restent uniques. <br><br>  Et comme vous pouvez √©galement le constater, une telle mod√©lisation et optimisation des solutions nous offre une excellente opportunit√© d'effectuer rapidement des recherches dans un quartier local et de r√©-optimiser.  Pour certains types de t√¢ches, cela nous permettra de d√©tecter des strat√©gies dominantes et des exploits de joueurs difficiles ou impossibles √† trouver autrement. <br><br><h2>  T√©l√©ports - Trous de ver </h2><br>  En regardant les deux derniers exemples (l'exemple des taux d'imposition dans un jeu strat√©gique et SuperTank), vous pourriez penser que de telles techniques ne sont applicables que dans les cas o√π les utilisateurs ont affaire √† des chiffres.  Mais vous vous tromperez absolument!  Comme nous le verrons, il existe de nombreux exemples de la fa√ßon dont vous pouvez obtenir les avantages de l'optimisation d'√©l√©ments de conception qui non seulement ne ressemblent pas √† des nombres pour les utilisateurs, mais ne leur ressemblent pas du tout! <br><br>  Vous pouvez √©galement penser que la mod√©lisation des d√©cisions ne s'applique qu'aux d√©cisions que les joueurs peuvent prendre dans les jeux.  Ce n'est pas non plus vrai: dans certains cas, ils peuvent √™tre utilis√©s pour la mod√©lisation afin d'optimiser vos propres solutions en tant que concepteur. <br><br>  Supposons que vous travaillez sur un MMORPG spatial.  Un jour, votre concepteur principal vient √† vous avec une anxi√©t√© visible sur son visage.  "Nous achevons une refonte du secteur Omega", dit-il.  ¬´Et nous avons eu un probl√®me.  Nous pr√©voyons d'ajouter quelques t√©l√©porteurs de trous de ver "dans ce segment du monde, mais nous ne pouvons pas nous mettre d'accord sur l'endroit o√π les placer". <br><br>  ¬´Combien de t√©l√©porteurs?¬ª Demandez-vous. <br><br>  ¬´Nous ne savons pas encore.  Probablement trois, mais il peut y en avoir de deux √† quatre.  Nous n'en sommes pas encore s√ªrs. ¬ª  Puis il vous montre une carte qui ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/a6e/bc1/0dba6ebc16043666d174e5b3269a2965.png"></div><br>  "Qu'est-ce que c'est?", Demandez-vous. <br><br>  ¬´Il s'agit d'une carte du secteur Omega.  Ou au moins les syst√®mes stellaires qu'un joueur peut visiter dans ce quadrant.  Nous devons d√©terminer dans quelles cellules les trous de ver doivent se trouver. ¬ª <br><br>  ¬´Eh bien, et selon quelles r√®gles sont-ils plac√©s?  Est-il possible de placer le trou de ver dans un quadrant avec le syst√®me stellaire? ¬ª <br><br>  ¬´Nous voulons que vous placiez les trous de ver de mani√®re √† minimiser la distance entre tout syst√®me stellaire et le trou de ver le plus proche.  Et oui, vous pouvez les mettre dans le m√™me quadrant que le syst√®me stellaire;  ce ne sont que de petits t√©l√©porteurs suspendus dans l'espace, ils peuvent donc √™tre plac√©s n'importe o√π.  Et rappelez-vous que nous n'avons pas encore d√©cid√© combien il devrait y en avoir, alors donnez-moi des solutions pour 2, 3 et 4 trous de ver. ¬ª <br><br>  Comment formuler ce probl√®me et comment le r√©soudre? <br><br><h2>  Optimiser les t√©l√©porteurs! </h2><br>  Commen√ßons par pr√©parer les cellules de la solution.  Nous d√©signons les quatre t√©l√©ports comme A, B, C et D. Nous savons que chaque t√©l√©portation n'est essentiellement rien de plus que les coordonn√©es (x, y) sur la carte stellaire du secteur Omega.  Nous savons √©galement que nous aurons besoin d'un moyen d'indiquer le nombre de t√©l√©ports actifs, nous allons donc ajouter une cellule qui vous permet de d√©finir le nombre de t√©l√©ports.  Nous n'utilisons la t√©l√©portation D que lorsque 4 trous de ver sont utilis√©s et C uniquement lorsque nous en avons 3 ou plus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e25/6b2/68d/e256b268da6878a1a79c14d2b7bfeb48.png"></div><br>  Ci-dessous, nous pr√©parerons un tableau pour calculer la distance de chaque syst√®me stellaire au t√©l√©port le plus proche.  Ce tableau ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cdf/4d8/410/cdf4d8410caa870a35ce2dfbe2f2be19.png"></div><br>  Le bleu de gauche montre les coordonn√©es de chaque syst√®me d'√©toiles sur la carte.  Chaque rang√©e est un syst√®me en √©toile.  Nous les avons simplement transf√©r√©s de la carte du secteur Omega, qui nous a √©t√© donn√©e par le principal designer. <br><br>  √Ä droite, nous calculons la distance jusqu'√† chacun des quatre t√©l√©porteurs.  Ceci est juste un th√©or√®me de Pythagore.  La distance est calcul√©e comme la racine carr√©e des distances horizontales et verticales entre le syst√®me stellaire et le t√©l√©port: <br><br><blockquote>  <b>= SQRT (($ B14-Ax) ^ 2 + ($ C14-Ay) ^ 2)</b> </blockquote><br>  (Ne vous inqui√©tez pas - je vous promets que ce sont les math√©matiques les plus difficiles que nous rencontrerons dans la s√©rie!) <br><br>  Nous prenons les coordonn√©es X et Y de chaque syst√®me stellaire dans les cellules bleues du tableau ci-dessus, et les coordonn√©es X et Y de chaque t√©l√©port (cellules avec les noms Ax et Ay pour t√©l√©port A dans la fonction SQRT () illustr√©e ci-dessus) des cellules de solution jaunes en haut. <br><br>  Enfin, nous prenons le minimum de ces quatre valeurs dans la colonne Dist to Closest, c'est-√†-dire que nous utilisons simplement la fonction MIN () pour d√©terminer le minimum de quatre valeurs sur la gauche.  Ensuite, nous r√©sumons la colonne enti√®re ci-dessous;  la somme est la cellule cible. <br><br>  Vous avez peut-√™tre remarqu√© que dans la capture d'√©cran ci-dessus, toutes les cellules sont d√©finies sur Dist √† D. La raison en est que nous utilisons la cellule "Nombre de t√©l√©porteurs?"  dans la partie sup√©rieure du mod√®le de solution, qui permet de configurer le nombre de t√©l√©ports pris en compte.  Si le nombre de t√©l√©porteurs est 2, alors nous utilisons la valeur 99 √† la fois dans Dist vers C et Dist vers D, et si elle est 3, alors la valeur 99 est utilis√©e uniquement dans la colonne Dist vers D. Par cons√©quent, chaque syst√®me stellaire ignorera tous les t√©l√©porteurs inutiles lors du calcul de la distance jusqu'au t√©l√©port le plus proche dans le cas de 2 ou 3 t√©l√©ports. <br><br>  Nous allons maintenant lancer Solver: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/526/3f6/35c/5263f635cf3425abfe0f6ede918faf68.png"></div><br>  La cellule cible est la somme au bas de la colonne Dist to Closest.  Notez que contrairement √† d'autres exemples, nous voulons ici utiliser le bouton radio ¬´To: Min¬ª car nous avons besoin d'une distance minimum entre tous les syst√®mes stellaires et les t√©l√©porteurs, pas un maximum. <br><br>  Ci-dessous, nous indiquerons huit cellules jaunes de solutions des coordonn√©es X et Y des ¬´trous de ver¬ª A, B, C et D comme ¬´En changeant les cellules variables¬ª. Dans la section des restrictions, nous limiterons chacune des coordonn√©es comme une valeur enti√®re dans la plage de 0 √† 12. Notez que nous utilisons une contrainte enti√®re pour ces cellules de solution, car nous voulons dire que le concepteur principal souhaite simplement savoir dans quelle cellule chaque t√©l√©port se trouvera, mais nous pouvons facilement ignorer cette restriction si le concepteur a besoin de coordonn√©es mat√©rielles. <br><br>  Si nous demandons "Nombre de t√©l√©porteurs?"  valeurs 2, 3 et 4, et s√©quentiellement nous lancerons Solver √† chaque valeur, nous obtiendrons les configurations suivantes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/705/3d0/fb37053d0bb564a0ec27a7a45e4e8c32.png"></div><br>  Ayant ces informations, nous pouvons aller au concepteur principal et lui montrer les emplacements optimaux pour l'emplacement d'un nombre quelconque de t√©l√©porteurs dans la plage de 2 √† 4. C'est ainsi que les emplacements optimaux des ¬´trous de ver¬ª pour les t√©l√©porteurs 2, 3 et 4 apparaissent sur la carte (indiqu√©e en vert). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/08d/551/6ca08d5517b7f57754deab8408117e19.png"></div><br>  La feuille de calcul de cet exemple peut √™tre t√©l√©charg√©e √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici</a> . <br><br><h2>  Ai-je parl√© du ninja? </h2><br>  "Incroyable", dit le concepteur principal, mais vous voyez la souffrance sur son visage.  ¬´Euh, mais j'ai oubli√© de vous dire que certains de ces syst√®mes sont habit√©s par des ninjas de l'espace.  Et nous voulons que les syst√®mes avec le ninja soient plus √©loign√©s des "trous de ver" afin que les joueurs ne se sentent pas trop menac√©s. " <br><br>  ¬´Wow.  Cela change compl√®tement le cas. " <br><br>  "D'accord.  De plus, dans certains syst√®mes stellaires, il n'y a pas une mais deux colonies, c'est-√†-dire qu'elles sont deux fois plus importantes que la proximit√© des t√©l√©porteurs.  Ou il est deux fois plus important d'√™tre plus loin s'il s'agit d'un syst√®me avec deux colonies de ninjas spatiaux.  Voici √† quoi ressemble la carte maintenant: " <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ab/b1c/2de/1abb1c2dea24fc72efbf45d034cb2fdb.png"></div><br>  Il poursuit: ¬´Chaque nombre n√©gatif est une colonie de ninjas spatiaux.  Le syst√®me avec le num√©ro 2 contient deux colonies humaines et avec le nombre -2, il contient deux colonies de ninja.  Pouvez-vous me dire o√π placer les t√©l√©porteurs dans ce cas? ¬ª <br><br>  "Dites-moi, au moins vous avez d√©j√† d√©cid√© combien de t√©l√©ports il y aura: 2, 3 ou 4?", Demandez-vous avec ironie. <br><br>  "Je n'ai pas encore peur." <br><br><h2>  Nous r√©solvons en tenant compte du ninja </h2><br>  Pour r√©soudre ce probl√®me, nous devons ajouter une nouvelle colonne au tableau qui indique le poids du tableau.  Nous l'appellerons le ¬´multiplicateur¬ª.  Nous multiplierons simplement cette valeur par la valeur dans la colonne Dist to Closest. <br><br>  Lorsque nous faisons cela, Dist to Closest change l√©g√®rement sa signification.  Maintenant, ce n'est pas la distance au syst√®me stellaire le plus proche, car pour les syst√®mes stellaires ninja, la valeur change de -1 fois.  Cela ressemble √† des ¬´points¬ª plus g√©n√©ralis√©s (score), appelons-les ainsi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/667/7e8/edd/6677e8edddd9fa2ac4fecf1ae499f069.png"></div><br>  Ainsi, les points indiquent d√©sormais la valeur cumul√©e.  En le minimisant, nous faisons en sorte que Solver s'efforce d'√™tre le plus pr√®s possible des syst√®mes avec des colonies humaines et en m√™me temps aussi loin que possible des syst√®mes ninja peupl√©s. <br><br>  Nous obtenons maintenant les r√©sultats suivants: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/910/372/a85/910372a8558cafb6e62a3b9298c230fc.png"></div><br>  Comme vous pouvez le voir, cela nous donne la configuration des t√©l√©porteurs, dans chaque cas tr√®s diff√©rent des versions plus simples sans ninja. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/92a/1a4/727/92a1a4727400d6279a03988381e75f5b.png"></div><br>  La feuille de calcul de cette version √©tendue de l'exemple de t√©l√©portation peut √™tre t√©l√©charg√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Comme vous pouvez le voir, notre mod√®le de solution a pu r√©soudre tr√®s rapidement cette t√¢che non triviale, et nous pouvons l'adapter √† l'√©volution des besoins. <br><br>  Cette t√¢che appartient √† la classe des t√¢ches dites ¬´t√¢ches d'allocation d'objets¬ª, tr√®s bien √©tudi√©es dans le domaine de la gestion op√©rationnelle.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mais comme vous pouvez le voir, ils peuvent potentiellement √™tre utilis√©s dans la conception de jeux, ainsi que dans la conception de niveaux, et la solution est simple (sinon triviale) dans Excel. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √âquilibrage des classes pour les combats Joueur contre Joueur </font></font></h2><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La feuille de calcul de cette partie peut √™tre t√©l√©charg√©e √† partir d'ici: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien</font></font></a></i> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Feuilles de calcul et simulations </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans les trois parties pr√©c√©dentes de cette s√©rie d'articles, nous nous sommes pr√©sent√©s au concept de mod√©lisation et d'optimisation des solutions, ainsi qu'√† l'outil ¬´Solveur¬ª du package Excel. Nous avons montr√© comment ils peuvent √™tre utilis√©s pour calculer les taux d'imposition optimaux de la ville dans la strat√©gie 4X, pour d√©terminer le placement optimal des t√©l√©porteurs dans le jeu spatial et pour s√©lectionner la disposition optimale des armes pour la t√¢che de super-char d√©crite dans la premi√®re partie. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une question naturelle se pose: qu'en est-il de l'√©quilibre du jeu? Est-il possible d'appliquer des techniques similaires √† toutes sortes de t√¢ches d'√©quilibrage complexes que l'on retrouve dans de nombreux types de jeux diff√©rents, en particulier dans les strat√©gies, les RPG et les MMORPG?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La r√©ponse √† cette question est oui, bien s√ªr, mais avec de nombreuses r√©serves. Les feuilles de calcul en particulier ont de nombreuses limites, car dans la plupart des cas non triviaux, elles ne d√©crivent pas le jeu avec pr√©cision. Par cons√©quent, il nous sera difficile d'effectuer un √©quilibrage fiable √† l'aide de techniques d'optimisation; les t√¢ches d'√©quilibrage r√©elles de la grande majorit√© des jeux seront bien au-del√† de ce que nous pouvons mod√©liser dans un tableur. La simulation du jeu lui-m√™me est g√©n√©ralement trop compliqu√©e, comporte beaucoup de "pi√®ces mobiles" et est souvent effectu√©e en temps r√©el, lorsque l'on essaie de faire des simulations discr√®tes, on peut rencontrer toutes sortes de probl√®mes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par cons√©quent, si nous voulions utiliser des techniques similaires pour √©quilibrer les classes dans les MMORPG tels que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WildStar</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou dans les jeux strat√©giques comme</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Annihilation plan√©taire</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alors pour assurer au moins une certaine pr√©cision et utilit√©, il faudrait les int√©grer dans la simulation du jeu lui-m√™me.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De plus, la v√©rit√© est que certains aspects de l'√©quilibrage ne peuvent pas √™tre automatis√©s; comme nous l'avons expliqu√© dans la</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> premi√®re partie de l'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> article, il est impossible d'ajuster automatiquement l'exp√©rience de jeu.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par cons√©quent, le mieux que nous puissions esp√©rer est une d√©monstration d'un exemple simple illustrant une approche g√©n√©rale des t√¢ches de ce type: avec un exemple simple dans Excel, nous apprendrons comment aborder la formulation de ce type de probl√®mes d'√©quilibrage et les optimiser. </font><font style="vertical-align: inherit;">Nous montrerons que, au moins pour un exemple de bataille simple, Solver peut bien √©quilibrer plusieurs classes RPG les unes par rapport aux autres. </font><font style="vertical-align: inherit;">Ensuite, vous pouvez utiliser cette structure de base comme base pour r√©soudre de tels probl√®mes d'optimisation avec un sch√©ma plus complexe et plus profond√©ment int√©gr√© dans la simulation du jeu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous esp√©rons qu'avec nous, vous apprendrez toutes les astuces et verrez ce que cet exemple simple peut nous donner.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D√©s√©quilibr√© </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'y a pas de d√©finition unique et g√©n√©ralement accept√©e du mot ¬´√©quilibrage¬ª. Cela a de nombreuses significations et la v√©rit√© d√©pend g√©n√©ralement du contexte du jeu en question. Dans diff√©rentes conditions, l'√©quilibrage peut √™tre li√© √† la mise en place de plusieurs classes de personnages afin d'√©galer leurs capacit√©s dans un jeu de r√¥le, au nombre de forces des adversaires se battant les uns contre les autres dans un jeu strat√©gique, ou √† l'ajustement du co√ªt de diverses unit√©s ou ressources en fonction de leur utilit√©. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La meilleure d√©finition de ¬´l'√©quilibrage¬ª d√©pend g√©n√©ralement des objectifs de conception du jeu en question, mais comme ces objectifs peuvent √™tre quelconques, il est impossible de </font><font style="vertical-align: inherit;">d√©terminer a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">priori</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ce que l'√©quilibrage signifie r√©ellement pour les jeux en g√©n√©ral.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Certains joueurs ont tendance √† croire que l'√©quilibrage au combat signifie des d√©g√¢ts √©gaux. </font><font style="vertical-align: inherit;">Cela est particuli√®rement vrai pour les MMORPG, dans lesquels les joueurs se plaignent souvent que les d√©g√¢ts par seconde (DPS) d'une classe sont trop faibles ou trop importants par rapport aux autres. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien s√ªr, les classes ne peuvent pas √™tre √©quilibr√©es uniquement par DPS; </font><font style="vertical-align: inherit;">il est acceptable qu'une classe ait un DPS plus grand qu'une autre, mais cela devrait √™tre compens√© par d'autres facteurs limitant l'utilit√© globale de la classe, par exemple, une survie r√©duite ou un DPS √† moins long terme par rapport au DPS √† court terme.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tiny MMO </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imaginez que nous cr√©ons un nouveau projet, un jeu de r√¥le en ligne massivement multijoueur tr√®s simplifi√© appel√© "Tiny MMO". </font><font style="vertical-align: inherit;">Dans le cadre du d√©veloppement de la conception, nous nous effor√ßons d'√©quilibrer les quatre classes pour les combats de joueur √† joueur (PVP) afin que les quatre classes soient relativement √©gales au combat les unes contre les autres, et qu'il n'y ait pas de classe claire ¬´meilleure¬ª ou ¬´pire¬ª qui Vous pouvez vous battre contre d'autres classes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien que Tiny MMO soit un jeu en temps r√©el, l'action de chaque joueur dure exactement 3 secondes, nous pouvons donc le discr√©tiser en le pr√©sentant comme un jeu au tour par tour dans lequel chaque mouvement repr√©sente une part de gameplay de trois secondes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les joueurs de ce jeu peuvent choisir l'une des quatre classes de personnages:</font></font><br><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le guerrier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fait le plus de d√©g√¢ts.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le mage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lance des sorts √† distance et a la plus longue port√©e d'attaque des quatre classes</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gu√©risseur (Gu√©risseur) est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trait√© automatiquement, r√©tablissant √† chaque tour une certaine partie de sa sant√©</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Barbare (Barbare)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a le plus de sant√©</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est tout ce que nous savons sur ces quatre classes, et nous devons d√©finir les param√®tres initiaux de sant√© (HP), de d√©g√¢ts, de soins et de port√©e des attaques pour les quatre classes. </font><font style="vertical-align: inherit;">Nous devons les √©quilibrer de mani√®re √† ce que chaque classe soit unique et ses caract√©ristiques soient sensiblement diff√©rentes de toutes les autres classes, mais de sorte que chaque classe se r√©v√®le √™tre aussi ¬´√©quilibr√©e¬ª que possible par rapport aux trois autres. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En d'autres termes, nous nous effor√ßons d'optimiser le tableau suivant:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2a5/bb2/b9a/2a5bb2b9a8a5b91eed643b89f168cd5f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alors que nous utilisons des valeurs temporaires et supposons que chaque classe commence avec 50 HP, inflige 10 d√©g√¢ts par tour, soigne 0 HP par tour et a une port√©e d'attaque de 40 m√®tres. Chaque personnage se d√©place √† une vitesse de 10 m√®tres par tour. √âtant donn√© que la conception indique que les quatre classes de caract√®res peuvent se d√©placer √† la m√™me vitesse, nous consid√©rerons cette valeur constante et nous n'entrerons pas la vitesse de d√©placement dans le tableau des variables de d√©cision.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âvidemment, il s'agit d'une √©tude de cas avec un mod√®le de dommage tr√®s simplifi√©. Il s'agit d'une valeur moyenne continue de d√©g√¢ts par seconde, qui ignore la diff√©rence entre les d√©g√¢ts impulsifs et les d√©g√¢ts √† long terme, ainsi que le mana et d'autres m√©canismes qui modifient les capacit√©s d'attaque des classes. Nous n'aurons qu'un seul type de d√©g√¢ts, ce qui est assez irr√©aliste, car la plupart des classes ont des dizaines de types de d√©g√¢ts, et nous devrons impl√©menter un syst√®me d'IA qui s√©lectionne l'attaque √† chaque tour. De plus, dans la plupart des jeux, les d√©g√¢ts ont un √©l√©ment al√©atoire, mais pour l'instant nous allons l'omettre et supposer que la variabilit√© des d√©g√¢ts n'est pas si grande qu'elle affecte de mani√®re significative le r√©sultat de la bataille entre les deux classes.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien s√ªr, tout √©quilibrage effectu√© dans Excel est peu susceptible d'√™tre id√©al ou coh√©rent avec l'√©quilibre final du jeu; </font><font style="vertical-align: inherit;">elle devra passer par de nombreuses it√©rations de playtesting. </font><font style="vertical-align: inherit;">Mais si nous prenons une ou deux heures pour obtenir une </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bonne</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> premi√®re option pour notre jeu dans Excel, alors au moins nous sommes beaucoup plus susceptibles de nous rapprocher des param√®tres qualitatifs du solde initial, ce qui nous rapprochera du solde final que nous voulons obtenir.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Table de victoire </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons √©quilibrer quatre classes les unes avec les autres dans une bataille individuelle. </font><font style="vertical-align: inherit;">Comme nous n'avons que 4 classes (Guerrier, Mage, Gu√©risseur et Barbare), il existe 6 combinaisons possibles de classes diff√©rentes:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerrier - Mage </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerrier - Gu√©risseur </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerrier - Barbare </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mage - Gu√©risseur </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mage - Barbare </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gu√©risseur - Barbare </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cet √©quilibrage peut √™tre assez compliqu√©. </font><font style="vertical-align: inherit;">M√™me dans notre cas assez simple avec quatre classes, nous avons obtenu six relations interclasses, tout comme nous pouvons tracer six lignes entre quatre points d'un carr√©.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52f/bc5/6e2/52fbc56e2c50d662a5236a089c8c9fdc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaque fois que nous voulons apporter un petit changement √† l'un des param√®tres de l'une des classes, ce changement affectera √©galement l'√©quilibre PvP entre cette paire de classes et les </font><font style="vertical-align: inherit;">deux </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autres</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> classes. </font><font style="vertical-align: inherit;">Cette interconnexion de loi de puissance ne fera que cro√Ætre avec une augmentation du nombre de classes, et les d√©cisions d'√©quilibrer le PvP entre n'importe quelle paire de classes prises "dans le vide", sans prendre en compte toutes les autres interactions, peuvent devenir tr√®s dangereuses. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id√©alement, nous aimerions cr√©er une sorte de </font><i><font style="vertical-align: inherit;">table</font></i><font style="vertical-align: inherit;"> de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">victoire</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comme celui illustr√© ci-dessous. </font><font style="vertical-align: inherit;">Si nous pouvons simuler une bataille entre chacune de ces 6 paires dans un tableur, alors nous serons en mesure de g√©n√©rer une certaine variable ¬´points¬ª pour chacune des 6 paires. </font><font style="vertical-align: inherit;">Plus il y a de points, mieux c'est, donc nous pouvons combiner ces six points pour g√©n√©rer une fonction objectif.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b2f/b4f/6e8/b2fb4f6e8317a42dfc6696d1c41ade97.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notez que dans le tableau ci-dessus, les cellules le long des diagonales sont nulles, car elles d√©signent des paires de la m√™me classe qui seront √©quilibr√©es par d√©finition. </font><font style="vertical-align: inherit;">De plus, les cellules dans le coin sup√©rieur droit sont √©galement nulles, car elles d√©signent exactement les m√™mes paires que dans les cellules en bas √† gauche. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√©parons maintenant le mod√®le pour la bataille entre deux classes diff√©rentes.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Simulateur de bataille" </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous organiserons chaque paire de cours √† une distance de 100 m√®tres les uns des autres. </font><font style="vertical-align: inherit;">Chaque personnage a 3 secondes pour attaquer, nous pouvons donc imaginer cela comme une simulation au tour par tour dans laquelle chaque ¬´mouvement¬ª signifie 3 secondes. </font><font style="vertical-align: inherit;">√Ä chaque ¬´coup¬ª, chaque personnage attaque l'autre, s'il est √† port√©e de l'attaque, ou continue de se d√©placer pour r√©duire la distance. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La simulation ressemble √† ceci:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b1/7ce/236/3b17ce2366faaece720a363f57c261d9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ci-dessus, une paire de personnages qui sont entr√©s dans la bataille: dans ce cas, Mage (classe 1) et Healer (classe 2). </font><font style="vertical-align: inherit;">La colonne de gauche indique la distance actuelle entre les deux caract√®res simul√©s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour chaque caract√®re, les colonnes seront:</font></font><br><br><ul><li> <b>Max Range</b> :   ,     .           . </li><li> <b>Healing</b> :      ,      . </li><li> <b>HP</b> :      .      HP    ,        .         ,         . </li><li> <b>Damage</b> :  ,   ,       .   ,     0. </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des attaques? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Cette colonne v√©rifie si le personnage est dans la zone d'attaque. </font><font style="vertical-align: inherit;">Si c'est le cas, cela signifie que le personnage attaque dans le tour en cours; </font><font style="vertical-align: inherit;">sinon, le personnage se rapproche pour atteindre un autre personnage.</font></font></li></ul><br>  Ainsi, les deux personnages commencent √† se rapprocher, puis attaquent jusqu'√† ce que l'un d'eux ou les deux meurent.  Chaque personnage se d√©place toutes les 3 secondes sur 5 m√®tres (5 m√®tres par "tour").  Lorsque les deux personnages se rapprochent, la port√©e change √† chaque tour de 10 unit√©s, et de 5 unit√©s si un seul d'entre eux se d√©place.  Le jeu lui-m√™me est structur√© de sorte que les deux personnages puissent commencer √† se d√©placer simultan√©ment, apr√®s quoi le mouvement est autoris√© en m√™me temps, il est donc possible que les deux personnages puissent mourir en m√™me temps. <br><br>  Ensuite, nous devons configurer la notation de ce tableau et g√©n√©rer une valeur num√©rique indiquant la ¬´bonne¬ª bataille.  en d'autres termes, dans quelle mesure sommes-nous proches d'atteindre nos objectifs de conception. <br><br>  De toute √©vidence, nous voulons que les deux personnages soient morts √† la fin de la bataille, ou au moins aussi pr√®s de la mort que possible.  Si la bataille est √©quilibr√©e, les deux classes de combat devraient minimiser la sant√© de l'ennemi √† la fin de la bataille. <br><br>  Cependant, cela ne suffit pas.  Si nous organisons le score de cette mani√®re, l'optimiseur maximisera simplement les valeurs des d√©g√¢ts afin que les deux personnages s'entretuent instantan√©ment!  (Si vous √™tes curieux, essayez de changer la feuille de calcul jointe √† l'article pour voir par vous-m√™me.)  √âvidemment, nous ne visons pas la mort instantan√©e: nous avons besoin que les deux personnages soient morts ou presque morts √† la fin de la bataille, mais <i>en m√™me temps,</i> nous voulons que le combat dure un temps raisonnable. <br><br>  En d'autres termes, nous nous effor√ßons non seulement d'assurer un √©quilibre relativement √©gal de toutes les classes les unes contre les autres;  nous voulons √©galement rendre l'√©quilibre <i>int√©ressant</i> , y compris les combats qui durent un temps appropri√©. <br><br>  Pour g√©n√©rer une telle estimation de solde, nous devons cr√©er plusieurs cellules √† droite de chaque tableau.  <i>La dur√©e</i> indique la dur√©e de la bataille;  elle compte le nombre de lignes du tableau dans lesquelles les <i>deux</i> personnages sont toujours en vie.  <i>Total HP</i> calcule le total des points de vie des deux personnages survivants.  Id√©alement, il devrait √™tre √©gal √† 0, c'est-√†-dire qu'au moment o√π la bataille se termine, les deux personnages sont en train de mourir. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/957/514/77c/95751477c6324ce2fc26e41c6979122a.png"></div><br>  Et enfin, Score combine la dur√©e et le nombre total de points de vie sous la forme (Dur√©e / (1 + HP total)).  Notez que nous avons ajout√© 1 au diviseur, car Total HP pourrait √™tre √©gal √† 0, et dans ce cas, nous obtiendrions une division par erreur z√©ro.  De cette fa√ßon, nous pouvons garantir que nous r√©compensons l'optimiseur pour avoir trouv√© la dur√©e maximale de la bataille <i>et la</i> valeur minimale de la somme des points de vie. <br><br>  (Notez que puisque nous avons 17 lignes dans chaque ¬´simulation¬ª de combat de classe √† classe. Cela signifie que nous avons essentiellement pris une d√©cision de conception selon laquelle le combat devrait durer environ 17 rounds. Si nous voulons que le combat soit plus court ou plus longtemps, vous pouvez modifier le nombre de lignes, modifier la formule de calcul du score et effectuer une seconde optimisation en cons√©quence.) <br><br>  Enfin, nous prenons ces six valeurs de score (une pour chaque table) et les utilisons dans le tableau de victoire ci-dessus pour montrer les r√©sultats de la bataille entre chaque paire de classes. <br><br>  Vous pouvez simplement r√©sumer ces six valeurs de score et utiliser le r√©sultat comme valeur de score finale.  Cependant, si nous le faisons, Solver ne sera probablement pas en mesure de trouver un bon √©quilibre entre les notes les plus √©lev√©es et les plus basses pour les combats individuels, et recevra √©galement des notes tr√®s √©lev√©es pour certaines paires de classes et des notes faibles pour d'autres.  Ce n'est pas ce que nous voulons: nous avons besoin que <i>toutes les</i> notes soient √©lev√©es et nous nous effor√ßons de toutes les √©lever.  Pour r√©soudre ce probl√®me, nous multiplions la somme des notes par la note la <i>plus basse</i> du groupe (en utilisant la fonction Excel MIN ()) pour que Solver se concentre sur la note la <i>plus basse</i> . <br><br><h2>  Ajouter des restrictions </h2><br>  Nous n'avons pas encore fini.  Si vous optimisez un mod√®le de solution avec les param√®tres actuels, il est fort probable que les classes ne seront pas configur√©es correctement - en fait, il est fort probable que le mod√®le √©crira les m√™mes valeurs HP, Damage, Healing et Range dans le tableau des variables de d√©cision. <br><br>  Et nous voulons bien s√ªr que chaque classe ait sa propre personnalit√©.  Nous avons besoin du guerrier pour faire le plus de d√©g√¢ts, le mage a la plus grande port√©e, le gu√©risseur a la valeur de gu√©rison maximale et le barbare a les HP les plus √©lev√©s.  Nous voulons √©galement que ces diff√©rences ne soient pas trop petites - nous avons besoin que ces classes soient tr√®s diff√©rentes les unes des autres. <br><br>  Pour ce faire, nous allons cr√©er un petit tableau de restrictions.  Ce tableau garantit que chacune des quatre classes aura un attribut correspondant, puis donnera un score de 0 ou 1, selon que la condition de contrainte est satisfaite. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/91a/a33/010/91aa330102f6855b19ddc62b21e4b1a3.png"></div><br>  Le tableau Diff√©rence minimale √† droite montre la diff√©rence minimale de chaque attribut de la classe par rapport √† toutes les autres classes.  En d'autres termes, le guerrier doit avoir au moins 4 HP plus de d√©g√¢ts que toutes les autres classes, le mage doit avoir une port√©e d'attaque d'au moins 10 de plus, et ainsi de suite. <br><br>  Maintenant que nous avons ajout√© ces restrictions sp√©ciales, il est temps d'optimiser! <br><br><h2>  Recherche de solutions </h2><br>  Nous pouvons maintenant ex√©cuter l'outil Solver (¬´Finding Solutions¬ª) int√©gr√© √† Excel pour essayer d'optimiser les param√®tres initiaux.  En tant que cellule cible, nous s√©lectionnerons la cellule Score, qui combine les r√©sultats des six tournois.  Nous avons d√©fini les variables de d√©cision pour inclure les 16 cellules dans le tableau jaune des variables de d√©cision que nous avons cr√©√© au d√©but. <br><br>  Nous d√©finissons √©galement les contraintes (dans le champ Sujet aux contraintes) comme suit: <br><br><ul><li>  Toutes les cellules de d√©cision doivent √™tre enti√®res avec une valeur minimale de 0. </li><li>  Toutes les cellules de la colonne HP doivent avoir une valeur maximale de 200 et un minimum de 30. </li><li>  Toutes les cellules de la colonne Dommages ont une valeur maximale de 20. </li><li>  Toutes les cellules de la colonne Gu√©rison ont une valeur maximale de 15. </li><li>  Toutes les cellules de la colonne Plage ont une valeur maximale de 100. </li><li>  De plus, les quatre cellules de la section Contraintes sp√©ciales doivent √™tre d√©finies sur 1 pour satisfaire leurs conditions sp√©ciales. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc0/cae/d5a/fc0caed5a1d370e16c71d9b2f3ef7933.png"></div><br>  Enfin, d√©finissez la m√©thode de r√©solution sur Evolutionary et ex√©cutez Solver.  Veuillez noter que puisqu'il s'agit d'un algorithme √©volutif, il est possible d'am√©liorer la solution trouv√©e lors de la deuxi√®me ou troisi√®me ex√©cution du solveur, ou apr√®s avoir d√©fini des param√®tres (bouton Options) pour une optimisation √©volutive. <br><br>  En cons√©quence, nous devrions obtenir quelque chose de similaire: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ad/d71/2c6/0add712c65d58c0182fd01b362787d1c.png"></div><br>  ... et comme par magie, Solver nous a donn√© une bonne configuration d'√©quilibre initial. <br><br>  Comme vous pouvez le voir, le Guerrier fait maintenant le plus de d√©g√¢ts, le Mage a la plus grande port√©e, le Gu√©risseur gu√©rit le mieux et le Barbare a le plus de PV.  De plus, vous pouvez descendre dans les r√©sultats des tournois individuels ¬´classe contre classe¬ª et voir comment les classes se sont montr√©es au combat;  comme vous pouvez le voir, la plupart d'entre eux sont √©quilibr√©s de mani√®re tr√®s √©gale - √† la fin de la bataille, les deux classes sont en train de mourir, ou l'une d'elles survit √† peine.  De plus, tous les tournois durent assez longtemps, aucune des classes ne peut ¬´filer¬ª l'autre. <br><br>  Pas mal pour quelques heures de travail, non? <br><br><h2>  Conclusion </h2><br>  Dans cet exemple, nous avons cr√©√© une t√¢che d'√©quilibrage simple et d√©montr√© qu'en fait, nous pouvons la r√©soudre √† l'aide de la simulation et de l'optimisation.  Bien qu'il soit √©vident qu'il s'agit d'un exemple simple, il nous montre la puissance des techniques de mod√©lisation et de l'optimisation des d√©cisions.  De plus, il peut devenir une source d'inspiration utilisable dans des outils d'√©quilibrage plus complexes, √©troitement int√©gr√©s √† la simulation du jeu.  Nous esp√©rons que vous pourrez utiliser cet exemple comme guide pour formuler de telles t√¢ches dans la pratique. <br><br>  Dans les deux prochaines parties de la s√©rie, nous allons plonger dans le domaine des t√¢ches d'affectation, qui est associ√© √† la s√©lection d'affectations optimales √† partir de deux ou plusieurs ensembles d'entit√©s.  Nous allons montrer comment r√©soudre ces types de probl√®mes et montrer comment nous avons utilis√© cette approche pour cr√©er la conception de tours dans notre jeu de strat√©gie pour iOS / Android <i>City Conquest</i> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430114/">https://habr.com/ru/post/fr430114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430102/index.html">ENOG 15: ¬´Pourquoi Internet est-il toujours en ligne?¬ª</a></li>
<li><a href="../fr430104/index.html">Donn√©es m√©dicales | Ne pas d√©livrer de carte m√©dicale entre vos mains</a></li>
<li><a href="../fr430106/index.html">Nouveau √† XYZprinting √† IMTS 2018: imprimantes 3D et robots</a></li>
<li><a href="../fr430108/index.html">Pourquoi le "jeune technicien" ne pourra pas construire un laser</a></li>
<li><a href="../fr430112/index.html">Comment nous avons appris √† une voiture √† parler avec des millions de personnes</a></li>
<li><a href="../fr430116/index.html">Les ordinateurs √©crivent de la prose, mais restent inf√©rieurs aux gens. Pourquoi?</a></li>
<li><a href="../fr430118/index.html">Unity3D: Modifier le d√©l√©gu√© d'application iOS</a></li>
<li><a href="../fr430120/index.html">Apprivoisez la b√™te. Ce √† quoi nous avons √©t√© confront√©s lors du d√©veloppement d'une application d'agenda personnel sur React Native</a></li>
<li><a href="../fr430122/index.html">Le workaholism est une condition douloureuse dont il n'est pas habituel de parler.</a></li>
<li><a href="../fr430126/index.html">Une autre liste de projets √† pratiquer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>