<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🚒 ♉️ ☑️ 计划下一个版本的Vue.js 👨🏽‍🚀 📂 🈷️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="上周在伦敦Vue.js上，我谈到了Vue的下一个主要版本中将会发生什么。 这篇文章提供了该计划的详细概述。 



 为什么是新的主要版本？ 


 Vue 2.0是在两年前发布的（随着时间的流逝！）。 在此期间，Vue内核保持向后兼容，并收到5个次要版本。 我们已经积累了许多想法，这些想法将导致改...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>计划下一个版本的Vue.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425213/"><p> 上周在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">伦敦Vue.js上，</a>我谈到了Vue的下一个主要版本中将会发生什么。 这篇文章提供了该计划的详细概述。 </p><br><p><img src="https://habrastorage.org/webt/4m/sq/is/4msqisjgyk-ate5abefnqlgamik.png"></p><a name="habracut"></a><br><h1 id="pochemu-novaya-mazhornaya-versiya"> 为什么是新的主要版本？ </h1><br><p> Vue 2.0是在两年前发布的（随着时间的流逝！）。 在此期间，Vue内核保持向后兼容，并收到5个次要版本。 我们已经积累了许多想法，这些想法将导致改进，但尚未实施，因为它们将导致向后兼容性的崩溃。 同时，JavaScript生态系统和语言本身也在迅速发展。 有一些先进的工具可以改善工作流程，而许多新的语言功能则可以为Vue试图解决的问题提供更简单，更完整和更有效的解决方案。 更有趣的是，我们发现ES2015对主要浏览器的支持越来越好。 </p><br><p>  Vue 3.0旨在使用这些新的语言功能来使Vue核心更小，更快和更强大。  Vue 3.0当前正在制作原型，我们已经实现了一个接近2.x版本的运行时。 下面列出的许多元素已经实施或已确认是可能的。 尚未实施或仍在计划阶段的项目标有（*）。 </p><br><h1 id="detali"> 详细资料 </h1><br><h2 id="izmeneniya-api-vysshego-urovnya"> 顶级API更改 </h2><br><blockquote>  TL; DR：除API渲染功能和作用域插槽语法以外的所有内容都保持不变，或者可以通过兼容性程序集与2.x版本兼容。 </blockquote><p> 由于这是主要版本，因此将进行一些更改。 但是，我们非常重视向后兼容性，因此我们希望尽快发布这些更改的列表。 </p><br><p> 以下是当前计划的公共API更改： </p><br><ul><li> 模板的语法将保持99％不变。 作用域插槽的语法可能会有小的更改，但是除此之外，我们不打算为模板做任何更改。 </li><li>  3.0最初将支持基于类的组件，其目标是提供一种可在本机ES2015中很好使用的API，而无需任何转换或Stage-x功能。 在基于类的API中，大多数当前参数将具有合理的映射。  Stage-x功能（例如类字段和装饰器）仍然可以选择使用。 此外，API在设计时考虑了TypeScript。  3.x代码库本身将使用TypeScript编写，并将提供改进的TypeScript支持。  （但是，在应用程序中使用TypeScript仍然是完全可选的）。 </li><li> 对象内部转换为相应类将继续支持基于2.x对象的组件。 </li><li>  Mixins将继续受到支持。  * </li><li> 顶级API可能会收到更改，以避免在安装插件时对Vue原型造成全局干扰。 相反，将应用插件并将其绑定到组件树。 这将使测试依赖于特定插件的组件变得更加容易，并且还允许您使用相同的Vue运行时在具有不同插件的同一页面上安装多个Vue应用程序。  * </li><li> 功能组件最终可以是简单的函数-在任何情况下，现在都必须使用辅助函数显式创建异步组件。 </li><li> 变化最大的部分是渲染功能中使用的虚拟DOM。 目前，我们正在从库的主要作者那里收集反馈，并且将共享更详细的信息，因为我们对所做的更改充满信心，但是到目前为止，您并不十分依赖应用程序中的通用（非JSX）渲染功能，这应该是一个相当简单的过程。 </li></ul><br><h2 id="arhitektura-ishodnogo-koda"> 源代码架构 </h2><br><blockquote>  TL； DR：改进的单独的内部模块，TypeScript和代码库，更易于贡献。 </blockquote><p> 我们正在从头开始重写Vue，以提供一个更清洁，更方便的体系结构，尤其是试图使事情变得更容易。 为了隔离复杂性，我们在单独的程序包中违反了一些内部功能。 例如，观察者模块将成为具有自己的公共API和测试的其自己的程序包。 请注意，这不会影响框架级别的API：您不必从多个软件包中手动导入各个模块即可使用Vue。 而是使用这些内部包构建最后一个Vue包。 </p><br><p> 现在，代码库也是用TypeScript编写的。 尽管这使TypeScript知识成为贡献于新代码库的先决条件，但我们认为类型信息和IDE支持实际上将使对维护者做出有意义的贡献更加容易。 </p><br><p>将观察者和调度程序分离到单独的程序包中，也可以轻松地尝试这些部分的替代实现。 例如，我们可以使用停机时间期间使用<code>requestIdleCallback</code>输出到浏览器的相同API或替代调度程序来实现与IE11兼容的观察者模式。  * </p><br><p><img src="https://habrastorage.org/webt/z2/dc/am/z2dcamy7x0utrk5apv4t-iecshc.png"></p><br><h2 id="mehanizm-nablyudeniya"> 观察机制 </h2><br><blockquote>  TL； DR：用于创建可观察对象的更全面，准确，高效和经过调试的反应性跟踪和API。 </blockquote><p>  Vue 3.0将附带基于代理的观察者实现，该实现提供反应性跟踪。 这消除了基于<code>Object.defineProperty</code>的当前Vue 2实现的许多限制： </p><br><ul><li> 检测添加/删除属性 </li><li> 数组/.length索引突变检测 </li><li> 支持地图，集合，WeakMap和WeakSet </li></ul><br><p> 新的观察者还具有以下优点： </p><br><ul><li> 用于创建可观察对象的开放API。 这意味着针对小型方案管理多个组件的简单解决方案。 </li><li> 默认情况下是惰性观察。 在2.x中，任何反应性数据，无论大小，都将在启动时进行跟踪。 如果您有大量的响应数据，这可能会在启动应用程序时导致明显的开销。 在3.x中，您将只需要跟踪用于呈现应用程序最初可见部分的数据，更不用说观察本身也快得多的事实。 </li><li> 更准确的变更通知。 示例：在2.x中，使用<code>Vue.set</code>强制添加新属性将导致任何观察者依赖于要重新评估的对象。 在3.x中，将仅通知依赖此特定属性的观察者。 </li><li> 不可变的可观察对象：我们可以创建对象的“不可变”版本，即使具有附加属性，也可以防止突变，除非系统暂时将其内部解锁。 此机制可用于冻结突变外的props或Vuex状态树。 </li><li> 改进的调试功能：我们可以准确地跟踪何时以及为何进行组件重绘，或者启动新的<code>renderTracked</code>和<code>renderTriggered</code>处理程序： </li></ul><br><p><img src="https://habrastorage.org/webt/hd/pd/xr/hdpdxrasoxn9-noakjv2m_g7ouo.png"></p><br><h2 id="drugie-uluchsheniya"> 其他改进 </h2><br><blockquote>  TL； DR：更小，更快，友好的摇树，代码片段和门户，Render API。 </blockquote><br><ul><li> 更少：新的代码库从头开始就设计为<em>摇树友好的</em> 。 现在可以按需导入诸如内置组件（ <code>&lt;transition&gt;</code> ， <code>&lt;keep-alive&gt;</code> ）和辅助指令（ <code>v-model</code> ）之类的功能。 在gzip中，新的运行时库的大小小于10kb。 将来，我们还可以提供更多内置功能，而无需为不使用它们的用户提供更大的有效负载。 </li><li> 更快：在初步测试中，我们发现所有领域的性能都有100％的提高，包括原始更新和Virtual DOM修复（我们从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Inferno</a> （Virtual DOM的最快实现）中学到了很多技巧），初始化组件实例和跟踪数据。 应用程序加载时，3.0将减少JavaScript花费的时间的一半。 </li><li> 片段和门户：尽管减小了尺寸，但3.0仍内置了对片段（返回几个根节点的组件）和门户（在DOM的另一部分中而不是在组件内部呈现子树）的内置支持。 </li><li> 改进的插槽机制：现在，使用编译器创建的所有插槽都是函数，在呈现子组件时会调用它们。 这样可以确保将插槽中的依赖性作为子项而不是父项的依赖性收集。 这意味着： <br><ol><li> 更改插槽内容时，仅重绘子组件 </li><li> 重绘父组件时，如果子组件的插槽内容未更改，则子组件不应重绘。 此更改可以更准确地检测组件树级别的更改，因此减少了不必要的重新渲染！ </li></ol></li><li> 渲染API：新的ES类API将简化<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Weex</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NativeScript Vue</a>等项目的渲染。 它还将使创建用于各种目的的自定义渲染功能更加容易。 </li></ul><br><h2 id="uluchsheniya-kompilyatora-"> 编译器改进* </h2><br><blockquote>  TL; DR：摇树友好的输出，AOT优化，具有更好的错误信息的解析器以及对源映射的支持。 </blockquote><br><ul><li> 使用对特定于树的中间件组件的引用时，使用其他功能的模板将生成使用ES模块的语法导入这些功能的代码。 因此，未使用的可选功能将从捆绑包中删除。 </li><li> 由于新的Virtual DOM实现的改进，我们还可以执行更有效的编译优化，例如静态树提升，静态属性提升，编译器提示以跳过规范化子元素，更快的创建VNode的方式等。 </li><li> 我们计划重写解析器以改善模板编译错误信息。 这也应该导致对源映射的支持，并且新的解析器可以用作集成第三方工具（如<code>eslint-plugin-vue</code>和IDE）的基础。 </li></ul><br><h2 id="podderzhka-ie11-">  IE11支持* </h2><br><blockquote>  TL; DR：将受支持，但在具有相同Vue 2.x反应性限制的单独组件中。 </blockquote><p> 新代码库目前仅适用于常绿浏览器，并且涉及对ES2015的基本支持。 但是，a，我们知道在可预见的将来，我们的许多用户仍需要支持IE11。  ES2015中使用的大多数功能都可以针对IE11进行重写/编译，但Proxies除外。 我们的计划是使用相同的API，但使用旧的<code>Object.defineProperty</code> API，以实现替代观察器。 使用此实现，将提供单独的Vue 3.x构建。 但是，此版本将经历与Vue 2.x相同的更改，因此与“现代”版本3.x不完全兼容。 我们知道，这给库的作者带来了一些不便，因为他们需要了解两种不同版本的兼容性，但是当我们到达这一阶段时，我们一定会在这个问题上提供明确的建议。 </p><br><h1 id="kak-my-namereny-eto-delat"> 我们打算如何做？ </h1><br><p> 首先，尽管我们今天宣布了这一点，但我们还没有最终的行动计划。 目前，我们知道我们将采取什么步骤： </p><br><h2 id="1-vnutrennyaya-obratnaya-svyaz">  1.内部反馈 </h2><br><p> 这是我们现在所处的阶段。 当前，我们已经有了一个包含新观察者实现，虚拟DOM和组件实现的原型。 我们邀请了一批有影响力的社区项目的作者来提供有关内部变更的反馈，并希望他们对变更感到满意，然后再继续前进。 我们要确保在发布3.0的同时准备好生态系统中的重要库，以便依赖这些项目的用户可以轻松升级。 </p><br><h2 id="2-publichnaya-obratnaya-svyaz-cherez-rfc">  2.通过RFC的公众反馈 </h2><br><p> 一旦我们对新设计有了一定的信心，对于每次更改，我们都会提出一个特殊的RFC问题，其中包括： </p><br><ul><li> 变化规模 </li><li> 基于变化：我们得到什么以及正在做出哪些取舍 </li><li> 更新路径：可以完全向后兼容的方式显示它吗？有什么帮助？ </li></ul><br><p> 我们将等待广大社区的反馈，以帮助我们转换这些想法。 </p><br><h2 id="3-vvod-sovmestimyh-funkciy-v-2x-i-2x-next">  3.在2.x和2.x-next中输入兼容功能 </h2><br><p> 我们不会忘记2.x！ 实际上，我们计划使用2.x逐步使用户适应新的变化。 我们将通过<code>opt-in</code>适配器逐步在2.x中引入已确认的API更改，并且2.x-next将允许用户尝试基于Proxy的新观察者实现。 </p><br><p>  Vue 3.0发布时，最新的2.x小版本将成为LTS，并将在18个月内继续收到错误修复和错误修复。 </p><br><h2 id="4-alfa-faza">  4. Alpha相 </h2><br><p> 我们将完成编译器和服务器端3.0，并开始创建alpha版本。 这主要是为了测试小型应用程序的稳定性。 </p><br><h2 id="5-beta-faza">  5. Beta阶段 </h2><br><p> 在测试阶段，我们的主要任务是更新支持库和工具，例如Vue Router，Vuex，Vue CLI，Vue DevTools，并确保它们与新内核一起正常使用。 我们还将与社区图书馆的主要作者合作，以帮助他们为3.0版做准备。 </p><br><h2 id="6-rc-faza">  6. RC阶段 </h2><br><p> 在达到API和代码库的稳定性之后，我们将冻结API进入RC阶段。 在这一点上，我们还将致力于一个兼容的构建：构建3.0，其中包括API 2.x的兼容性级别。 此版本还将附带一个标志，您可以启用该标志来发出在应用程序中使用API​​ 2.x的弃用警告。 程序集映射可以用作将应用程序升级到3.0版的指南。 </p><br><h2 id="7-ie11-sborka">  7. IE11组装 </h2><br><p> 如上所述，最终版本之前的最终任务是与IE11兼容的程序集。 </p><br><h2 id="8-okonchatelnyy-reliz">  8.最终版本 </h2><br><p> 老实说，我们不知道何时会发生，但可能在2019年。 同样，我们更关心交付可靠和稳定的内容，而不是承诺特定的日期。 有很多工作要做，但是我们对接下来的工作感到兴奋！ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN425213/">https://habr.com/ru/post/zh-CN425213/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN425203/index.html">旧的UPnP漏洞以新方式</a></li>
<li><a href="../zh-CN425205/index.html">项目管理中的软技能：成功使用业务的概念，目标和技巧</a></li>
<li><a href="../zh-CN425207/index.html">设计测试：Heisenbug 2018 Piter十大话题</a></li>
<li><a href="../zh-CN425209/index.html">手动＃2：Sunrise，据IDE的核心人物，Cmake和我对动物的失望</a></li>
<li><a href="../zh-CN425211/index.html">286和网络</a></li>
<li><a href="../zh-CN425215/index.html">优化Webpack应用程序的4个技巧</a></li>
<li><a href="../zh-CN425217/index.html">升级Kubernetes集群时的应用程序容错</a></li>
<li><a href="../zh-CN425219/index.html">什么是心理健康：心理学/心理疗法的视角</a></li>
<li><a href="../zh-CN425221/index.html">如何制造用于3D打印的塑料</a></li>
<li><a href="../zh-CN425223/index.html">JPHP Android应用程序</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>