<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óÄÔ∏è üçø üèôÔ∏è √úber die Unver√§nderlichkeit: Geschichte des 9. Platzes des russischen AI Cup 2019 ‚ô®Ô∏è üïí ü§∑üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mein Name ist Andrey Rybalka, ich nehme am russischen AI Cup unter dem Spitznamen Lama teil und ich werde Ihnen noch einmal sagen , wie man kein Macbo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√úber die Unver√§nderlichkeit: Geschichte des 9. Platzes des russischen AI Cup 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/485372/"><p>  Mein Name ist Andrey Rybalka, ich nehme am russischen AI Cup unter dem Spitznamen <a href="https://russianaicup.ru/profile/lama">Lama teil</a> und ich <a href="https://habr.com/ru/post/345598/">werde</a> Ihnen noch <a href="https://habr.com/ru/post/345598/">einmal</a> <a href="https://habr.com/ru/post/440574/">sagen</a> , wie man kein Macbook gewinnt.  Gl√ºcklicherweise bin ich eine erfahrene Person - mit diesen H√§nden habe ich nicht einmal 7 St√ºcke gewonnen. </p><br><p>  Die diesj√§hrige Aufgabe war also ein Platformer / 2D-Shooter, f√ºr den man einen Bot schreiben musste.  Das Spiel sah so aus: </p><br><p><img src="https://habrastorage.org/webt/81/rg/vp/81rgvptb0d2fztphudph9deltvc.jpeg"></p><br><p>  Der Bot sah so aus: </p><br><p><img src="https://habrastorage.org/webt/au/a7/qp/aua7qpjn5khyazt7nqnefeyvra0.png"></p><br><p>  Wenn Sie daran interessiert sind, wie Bild Nr. 2 in Bild Nr. 1 gespielt wird, klicken Sie bitte unter Katze. </p><a name="habracut"></a><br><p>  Wenn Sie nicht teilgenommen und andere Artikel nicht gelesen haben, empfehle ich Ihnen, zun√§chst zu sehen, wie die Dynamik <a href="https://russianaicup.ru/profile/lama">auf der Website</a> oder in der Tube aussieht: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vfImU0kAFI0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="turnirnaya-sistema">  Turniersystem </h2><br><p>  F√ºr den Anfang sind mehr als 2 Wochen f√ºr die Programmierung vorgesehen.  Dann beginnt die erste Runde.  Es dauert 2 Tage und die 300 besten gehen weiter.  Nach der Runde √§ndern sich die Spielregeln (jetzt kontrollieren wir zwei Charaktere gleichzeitig) und es wird eine weitere Woche gegeben, nach der die zweite Runde vergeht.  Dann sind die Regeln wieder kompliziert (jetzt spielen wir auf viel komplexeren Karten), es wird eine weitere Woche gegeben und schlie√ülich spielen wir das Finale. </p><br><p> Aber das ist nicht das Ende.  Nach dem Finale gibt es eine weitere Woche, an deren Ende der Sandkasten einfach stoppt, und die 6 besten, ausgenommen die Sieger des Finales, werden ebenfalls ausgezeichnet.  Der grundlegende Unterschied zwischen dem Sandbox-Finale und dem Meisterschaftsfinale besteht darin, dass in der Sandbox Spiele in einem zuf√§lligen Format erstellt werden und nicht nur im Format der aktuellen Runde. </p><br><h1 id="istoriya-uchastiya">  Teilnahmegeschichte </h1><br><p>  Wo ohne?  Sie k√∂nnen √ºberspringen, wer nicht interessiert ist.  Der technische Teil wird niedriger sein. </p><br><h2 id="nedelya-beta-testirovaniya-i-pervyy-raund">  Beta-Testwoche und erste Runde </h2><br><p>  Wie es scheint, habe ich am Tag nach dem Start des Open Beta-Tests mit dem Programmieren begonnen.  Aber pers√∂nlich war es f√ºr mich etwas demotivierend, dass die Organisatoren dieses Mal im Gegensatz zur Vergangenheit beschlossen, wieder von der Praxis des Publizierens eines Pseudocodes eines Simulators abzur√ºcken.  Unter den Teilnehmern waren sicherlich diejenigen, die gerne einen Simulator durch Reverse Engineering schreiben, aber ich bin nicht einer von ihnen, und mir war es langweilig, dies zu tun.  Da dies nicht meine erste Meisterschaft war, wusste ich, dass ich mich fr√ºher oder sp√§ter beteiligen w√ºrde, aber aus dem oben beschriebenen Grund wurde ich zu sp√§t beteiligt.  Infolgedessen konnte ich mich, was einige Teilnehmer in den ersten Tagen taten, zwingen, in nur eineinhalb Wochen fertig zu werden.  Als Ergebnis habe ich 5 Tage vor der ersten Runde die erste Codezeile des Bots geschrieben.  Kurz gesagt, zu Beginn der ersten Runde war ich noch nicht fertig und die Runde verlief ohne meine Teilnahme.  Ich entschied, dass ich mich durch Durchwahl direkt in die zweite Runde begeben w√ºrde. </p><br><h2 id="vtoroy-raund">  Zweite Runde </h2><br><p>  Zu diesem Zeitpunkt habe ich bereits in vollem Umfang programmiert, durchschnittlich 4 bis 6 Stunden pro Tag.  Einige Tage vor dem Start der zweiten Runde habe ich die erste Version des Bots hochgeladen.  Sie stieg sofort z√ºgig auf und stieg schnell in die Top-10-Sandk√§sten.  Dann begann die Runde, wo ich den f√ºnften Platz belegte. </p><br><h2 id="final">  Final </h2><br><p>  Ich verbrachte den ersten Abend der letzten Woche (von vier, weil ein Start f√ºr Freitag geplant war), um den Weg zu finden.  Es gab noch viele Ideen, aber worauf man sich konzentrieren sollte und welche der Ideen m√∂glicherweise das gr√∂√üte Ergebnis bringen w√ºrde, war nicht klar. Deshalb habe ich zun√§chst versucht, das zu verbessern, was die meisten Niederlagen verursachte.  Am Dienstag und Mittwoch waren dies Verbesserungen beim Zielen und Schie√üen sowie bei der Kontrolle der Erste-Hilfe-Ausr√ºstung. </p><br><p>  Dann sah ich, dass etwas passiert war, mit dem ich lange gerechnet hatte, aber ich hoffte, dass dies nicht passieren w√ºrde - einige Gegner begannen, Minen aktiv zu nutzen. </p><br><p>  Tatsache ist, dass die Organisatoren w√§hrend der OBT auf den Vorschlag der Teilnehmer eingegangen sind und eine der Spielmechaniken ge√§ndert haben.  Im Allgemeinen ist dies nat√ºrlich gut, wenn die Teilnehmer angeh√∂rt werden.  Aber gerade diesmal war das Vorhandensein von R√ºckmeldungen ein grausamer Scherz.  Kurz gesagt, die Organisatoren erm√∂glichten die Detonation von Minen mit einem Schuss. </p><br><p>  Das ist an sich logisch.  Wenn ich eine Mine w√§re und sie auf mich schie√üen w√ºrden, w√ºrde ich auch explodieren.  Das Problem ist jedoch, dass wir nach Punkten gespielt haben und Punkte nicht nur f√ºr T√∂tungen, sondern auch f√ºr Sch√§den vergeben wurden.  So stellte sich heraus, dass Sie, wenn Sie dem Feind nahe genug kommen, Minen unter sich platzieren und auf ihn schie√üen, sowohl den Feind als auch sich selbst mit einer Explosion t√∂ten.  Es ist unm√∂glich auszuweichen.  Sie bekommen beide 1000 Punkte f√ºr beide Charaktere, die sterben, aber Sie bekommen auch Punkte f√ºr Schaden.  Wenn der Feind gesund war, erhalten Sie 1000 Punkte f√ºr das T√∂ten und 100 f√ºr den Schaden und den Feind - nur 1000. </p><br><p>  Zwar wussten alle Bescheid, doch oben setzte bis zuletzt fast niemand Minen ein.  Ich wei√ü nicht wie andere, aber pers√∂nlich habe ich es nicht benutzt, nur weil ich die ungewollte Fehleinsch√§tzung nicht missbrauchen wollte.  Aber wie sie in einem Film sagten, wusste ich, dass wir fr√ºher oder sp√§ter zu diesem M√ºll √ºbergehen werden. </p><br><p>  Kurz gesagt, mitten in der Nacht von Mittwoch auf Donnerstag habe ich mich selbst gest√∂rt.  Rein situativ, nichts fortgeschrittenes.  Nur nach dem Prinzip, dass mein Charakter es verdient, sich selbst zu t√∂ten, und das kann er auch.  Wie die Praxis gezeigt hat, planten einige andere Teilnehmer den Einsatz von Minen im Voraus, so dass sie einen fortgeschritteneren Selbstmord einf√ºhrten, planten jedoch strategisch, ihn kurz vor dem Finale auszul√∂sen.  Infolgedessen stellte sich heraus, was passiert ist - Platz 9 im Finale wie auch im letzten Jahr. </p><br><h2 id="final-pesochnicy">  Sandbox-Finale </h2><br><p>  Nach dem Finale verlie√ü ich die Stadt f√ºr die Ferien.  Eine Woche sp√§ter kehrte er zur√ºck und am ersten Abend, buchst√§blich in 2-3 Stunden Arbeit, wurden die Minen stark verbessert, wor√ºber ich im technischen Teil mehr schreiben werde.  Die restlichen √Ñnderungen betrafen haupts√§chlich die Bearbeitung von Fehlern und die Vervollst√§ndigung der Evaluierungsfunktion.  Kurz gesagt, ein wenig Programmierung und viele Tests. </p><br><h1 id="tehnicheskaya-chast">  Technischer Teil </h1><br><p>  Entweder die Geschwindigkeit von Java oder der Kr√ºmmungsradius der H√§nde, sondern beide zusammen lie√üen mich wieder nicht mit einer reinen Simulation zurechtkommen.  Daher sind die Bewegung, das normale Schie√üen und die Installation von Minen von mir getrennt. </p><br><h2 id="simulyaciya">  Simulation </h2><br><p>  Mit den Augen eines Bots sah die Welt so aus: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jwnUo2b96eA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Auf dem Video denke ich, und so ist alles ungef√§hr klar.  In der oberen linken Ecke befindet sich das Debug der Auswertungsfunktion.  Sie k√∂nnen sehen, woraus der Score jeder Flugbahn besteht.  Gelbe Silhouetten (zum Beispiel um 2:30 Uhr) - dies sind die gleichen Flugbahnen in 9 Richtungen, um die sie niedriger sein werden.  Linien von Pfeilen irgendwo ab 2:50 sind eine Suche nach einem Weg (rot - zum Feind, gr√ºn - zum Verbandskasten, gelb-gr√ºn - zur Waffe, blau - zur Mine).  Die gr√ºnen Quadrate am Ende des Videos sind meine PVS-Kacheln, die von der ausgew√§hlten Kachel aus sichtbar sind.  Die roten Punkte in ihrer Mitte zeigen an, woher die umgekehrte Sichtbarkeit stammt. </p><br><p>  Zeichenbewegungen simulieren ohne Mikrotechnik.  Aufz√§hlungsfl√ºge auch, aber bei ihnen verwende ich mehrere Hacks, so dass Situationen weniger wahrscheinlich sind, in denen die Kugel bei vollem H√§kchen den Charakter ‚Äûdurchl√§uft‚Äú, ohne ihn zu ber√ºhren, obwohl sie ihn mit Mikrotik h√§tte ber√ºhren sollen.  Wenn Sie zum Beispiel dar√ºber nachdenken, kann die beschriebene Situation nur an den Ecken auftreten: </p><br><p><img src="https://habrastorage.org/webt/ve/b3/wf/veb3wfaqijpe7p-qk2scwgfrueq.png"></p><br><p> Bei Tick 1 befindet sich die Kugel an Position 1, bei Tick 2 an Position 2.  Ohne Mikrotik - Boris-Meerrettich - bekommt man, mit Mikrotik - Ohrschuss.  Zu diesem Zweck muss sich die Position des Aufz√§hlungszeichens in Teilstrichen 1 und 2 auf einer anderen Seite befinden als mindestens eine der Seiten des Zeichens oder der Kachel (ein Minze-Rechteck).  Auf diese Weise ist es m√∂glich, eine Kugel ohne Mikrotechnik zu simulieren, bis im obigen Bild die Bedingung <code>old_bullet.x &gt; character_left_side.x != new_bullet.x &gt; character_left_side.x</code> ist. In diesem <code>old_bullet.x &gt; character_left_side.x != new_bullet.x &gt; character_left_side.x</code> sollten Sie dieses H√§kchen genauer analysieren . </p><br><p>  Dann berechnete ich bei jedem Tick die Flugbahnen aller fliegenden Kugeln neu, bevor sie mit der Wand kollidierten, und speicherte ihre Position in jedem Tick im Array, sodass Sie in der Simulation schnell nach Kollisionen mit ihnen suchen konnten. </p><br><p>  F√ºr eine Panzerfaust berechnete ich nach dem Aufprall auf eine Mauer mathematisch ohne Mikrotechnik den genauen Aufprallpunkt, um das Epizentrum der Explosion korrekt zu berechnen. </p><br><p>  Au√üerdem f√ºllte ich mit jedem Tick das Array <code>dodge_trajectories</code> - simulierte die Bewegung jedes Charakters, einschlie√ülich der Feinde, in 8 Richtungen f√ºr 25 Ticks (gelbe Silhouetten im Video des Visualizers, nachdem das Kontrollk√§stchen f√ºr den m√∂glichen Traj aktiviert wurde. Zum Beispiel um 2:30 Uhr).  Und wie bei Kugeln behielt er bei jedem Tick alle m√∂glichen Positionen bei.  Es wurde dann an vielen Orten verwendet, von denen ich einige erw√§hnen werde. </p><br><p>  Ich habe die <a href="https://www.wikiwand.com/en/Potentially_visible_set">PVS auch</a> im Voraus nach Kacheln berechnet.  F√ºr jede Zelle habe ich eine Liste mit Kacheln erstellt, deren Mitte darin zu sehen ist.  Es wurde durch Raytracing berechnet.  Dies ist im Video vom Visualizer am Ende zu sehen.  Gr√ºne Quadrate sind Kacheln, die von der ausgew√§hlten Zelle aus sichtbar sind.  Die roten Punkte in ihrer Mitte zeigen an, woher die umgekehrte Sichtbarkeit stammt. </p><br><h2 id="poisk-puti">  Suche nach einem Weg </h2><br><p>  Wird durch den Dijkstra-Algorithmus gem√§√ü Wegpunkten implementiert.  Die Kachel, auf der Sie stehen k√∂nnen, wurde als Wegpunkt betrachtet.  Die Anpassung des Algorithmus f√ºr den 2D-Plattformer ist eigenst√§ndig und daher aus Optimierungsgr√ºnden auf Kr√ºcken aufgebaut.  Aber es hat schnell genug funktioniert: Ich habe zuvor Dijkstra (ich habe nicht herausgefunden, wie man es richtig sagt) von jedem Thema auf der Ebene zu jedem Pl√§ttchen erstellt.  Ich habe nur Stra√üen gebaut, die √ºber eine Zwei-Wege-Gel√§ndef√§higkeit verf√ºgen.  Dies war notwendig, damit man sp√§ter sehr schnell von jedem Pl√§ttchen zu jeder Erste-Hilfe-Ausr√ºstung / Waffe / Mine gelangen konnte.  Es war m√∂glich, diese Einschr√§nkung aufzuheben, aber in der Praxis hielt ich es f√ºr vern√ºnftiger, Zeit f√ºr andere Dinge zu verwenden, da diese Einschr√§nkung nicht viel Schaden anrichtete. </p><br><p>  Au√üerdem z√§hlte ich jedes Mal, wenn ich auf ein anderes Pl√§ttchen mit einem beliebigen Charakter (meinem und dem des Feindes) wechselte, f√ºr ihn den Weg zum n√§chsten Feind, zur Erste-Hilfe-Ausr√ºstung sowie zur Mine und zu den Waffen, falls er sie noch brauchte. </p><br><p>  Auf meinem Heimcomputer dauerte bei einem Spiel mit 1000 Ticks die gesamte Pfadsuche insgesamt etwa 100 ms. </p><br><p>  Wenn der Pfad einen Feind oder Freund kreuzt, f√ºge ich einfach ein paar Dutzend Einheiten zu seinem Gewicht hinzu.  Wenn es also einen relativ kurzen Umweg gibt oder wenn es danach rentabler ist, zu einem anderen Objekt zu rennen, werde ich dies tun.  Im Video aus dem obigen Visualizer ist dies um 2:55 zu sehen, wo der Weg zum n√§chsten Feind umgangen wurde, weil  Ein gerader Pfad kreuzt das zweite Zeichen. </p><br><p>  Suchpfad-Visualisierung: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Dyk03lk14Ho" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Durchscheinende violette Quadrate sind Wegpunkte, sie sind auch die Eckpunkte des Graphen.  Lindgr√ºne Pfeile - Kanten <sup>1</sup> Spalte <sup>2</sup> <br>  <em><sup>1</sup> nicht zu verwechseln mit Rippen, <sup>2</sup> Zuf√§lle monarchischer Natur sind zuf√§llig [ca.]</em> </p><br><h2 id="peredvizhenie">  Bewegung </h2><br><p>  Zwei Charaktere gingen der Reihe nach.  Wenn Sie nur dachten - "und jetzt ist es in die Top 10 gekommen?!", Dann haben Sie richtig gedacht.  :) Es gab nicht genug Ressourcen, um mit beiden zu laufen.  Eine Ausnahme war das Erscheinen einer neuen fliegenden Kugel. </p><br><p>  Die Basis f√ºr die Auswahl einer Flugbahn ist die Genetik ohne Kreuzung.  Aber wenn sich die Genetik letztes Jahr im Fu√üball perfekt gezeigt hat, dann hat sie dieses Jahr einen sehr kleinen Vorteil gebracht.  Meine Experimente zeigten ein sehr nahes Ergebnis sowohl in der Genetik als auch bei zuf√§lligen Suchen.  Ich sehe mehrere Gr√ºnde daf√ºr, aber der wichtigste scheint mir der folgende zu sein: Im Fu√üball hatten wir ein festes Ziel - den Ball.  Die meiste Zeit war sein Verhalten vorhersehbar - wenn wir eine gute Flugbahn gefunden haben, um den Ball auf das Tor zu schlagen und ihm zu folgen, wird diese Flugbahn nach 20 Zecken wahrscheinlich immer noch gut sein, weil  Der Ball kann seinen Weg nicht spontan √§ndern.  Aber dieses Jahr haben wir nicht mit dem Ball gespielt, sondern mit feindlichen Charakteren.  Sie √§nderten ihr Verhalten mit jedem Tick.  Die Relevanz der Flugbahn blieb also sehr kurz. </p><br><p>  Ich habe aus zwei Gr√ºnden immer noch Genetik verwendet: </p><br><ol><li>  Ich habe gerade ihren Code vom letzten Jahr kopiert.  Es war sogar komisch, wie wenig ich bis auf die Auswertungsfunktion √Ñnderungen vornehmen musste, damit sich der Bot ertr√§glich bewegte.  Kurz gesagt, ich habe anderthalb Wochen lang einen Simulator geschrieben und dann ungef√§hr eine Stunde lang die Logik der Bewegung aus dem letzten Jahr kopiert. In einer weiteren Stunde habe ich eine einfache Sch√§tzung abgegeben, und der Bot begann beim Schie√üen eines Schnellstarts ziemlich stabil damit zu gewinnen. </li><li>  Ich liebe anscheinend den Schmerz.  Ansonsten kann ich nicht erkl√§ren, warum ich wieder in Java geschrieben habe und nicht wie alle normalen Top-Versionen: </li></ol><br><p><img src="https://habrastorage.org/webt/kt/qp/2n/ktqp2np94dkdbxjbajr9pgp0fky.png"></p><br><p>  Also musste ich alles in jeder Hinsicht tun, damit die Strategie nicht bei jedem ersten Spiel mit einer Auszeit zusammenbrach.  Dank der genetischen Herangehensweise konnte ich einen Schnappschuss der Simulation der Welt und der gez√§hlten Punkte speichern und dann bei der Berechnung der n√§chsten Generationen die Schnappsch√ºsse nur f√ºr das erste <em>mutierte</em> Gen deaktivieren. </p><br><p>  Das hei√üt  Grob gesagt, wenn ich in der ersten Generation 10 Ticks nach rechts gegangen bin und dann hochgesprungen bin und in der zweiten Generation eine Mutante ausgewertet habe, die 10 Ticks nach rechts gegangen ist und dann runtergesprungen ist, dann ist der Bezugspunkt f√ºr die Mutante der zuvor berechnete Schnappschuss der Welt und der Punkte danach 10 Bewegungen nach rechts.  Somit habe ich die Kalkulation deutlich reduziert. </p><br><p>  Igogo, ein ungef√§hrer Bewegungsalgorithmus: </p><br><ol><li>  Wir erzeugen N zuf√§llige Genotypen.  Jedes besteht aus M zuf√§lligen Genen.  Bei jedem Gen handelt es sich um Action-codierte Nummern: Eine Nummer ist f√ºr die Bewegungsrichtung verantwortlich, die zweite f√ºr das Springen / Gehen / Abspringen, die dritte f√ºr das Grundschie√üen (nur f√ºr die Bewertungsfunktion, der Grundschie√üalgorithmus wird weiter unten beschrieben), die vierte f√ºr die Anzahl der Wiederholungen Aktion.  Die Gesamtzahl der Aktionen im Genotyp √ºberschreitet zusammen mit den Wiederholungen nicht die Simulationstiefe - 40 Ticks. </li><li>  Wir f√ºgen ihnen eine Reihe von hartcodierten Genotypen hinzu: direkte Bewegung in 9 Richtungen (8 Seiten + Stillstand) und ein paar einfache Voreinstellungen, die in der Praxis dazu beigetragen haben, einige typische Situationen im Labyrinth etwas schneller zu √ºberwinden.  Zum Beispiel sind dies die Flugbahnen: ‚Æ§ ‚Æ§ </li><li>  F√ºgen Sie den besten Genotyp aus dem vorherigen Zug hinzu. </li><li>  Bewerten Sie alles, lassen Sie das M am besten. </li><li>  Wir schaffen die n√§chste Generation, in der in jedem Genotyp ein oder mehrere Gene mutiert sind. </li><li>  Wir f√ºgen sie dem allgemeinen Pool hinzu, der bereits das M-Beste der letzten Generation enth√§lt. </li><li>  Wir wiederholen ab Punkt 4 noch einige Male. </li></ol><br><h2 id="ocenochnaya-funkciya">  Bewertungsfunktion </h2><br><p>  Eigentlich der Ort, an dem die Strategie lebt. </p><br><p>  W√§hrend der Meisterschaft wurde eine ganze Reihe von Metriken aller Art hinzugef√ºgt (um genau zu sein 57).  Einige von ihnen haben das Finale nicht miterlebt.  Der andere Teil √ºberlebte, aber vor dem Hintergrund der Inflation des Ergebnisses w√§hrend der Meisterschaft hatte dies praktisch keinen Einfluss auf das Ergebnis, aber der Rest in der Gr√∂√üenordnung von 20 bis 25 war genau f√ºr die Bewegung und das Grundschie√üen verantwortlich. </p><br><p>  Ich werde einige Beispiele f√ºr wichtige Metriken in zuf√§lliger Reihenfolge geben: </p><br><ol><li>  Strafe f√ºr eine Kugel / Panzerfaust-Explosion in mir. </li><li>  Bonus f√ºr Freiheitsgrade.  Das hei√üt  f√ºr die Anzahl der Richtungen (auf / ab / links / rechts), in die ich mich von der aktuellen Kachel bewegen kann.  Je mehr Freiheitsgrade vorhanden sind, desto gr√∂√üer ist die Wahrscheinlichkeit, einer Kugel auszuweichen.  Dieser Bonus zwang den Bot, auf Plattformen und Treppen zu bleiben.  Der Bonus ist dreimal h√∂her, wenn der Gegner eine Panzerfaust hat. </li><li>  Strafe f√ºr die Entfernung (durch die Suche nach dem Weg) zum n√§chsten Erste-Hilfe-Kasten;  f√ºr die durchschnittliche Entfernung (durch die Suche nach dem Pfad) zu allen Erste-Hilfe-Sets;  weil der Weg von ihm zu der ihm am n√§chsten gelegenen Reiseapotheke k√ºrzer ist als der Weg von mir zu seiner (!) Reiseapotheke. </li><li>  Strafe daf√ºr, dass der Feind meinen Kopf sieht. </li><li>  Strafe daf√ºr, dass der Feind meine Beine sieht (Punkte 4 und 5 zwangen den Bot, sich hinter Teilschutz zu verstecken). </li><li>  Angriffsbonus beim Nachladen feindlicher Waffen. </li><li>  Bonus f√ºr Sch√ºsse gemacht. </li><li>  Strafe f√ºr zu viel oder zu wenig Distanz zum Feind.  Es hing von mehreren Faktoren ab: der Gesundheit beider, ob die Waffen beider nachgeladen wurden usw. </li><li>  Bonus f√ºr gef√§hrliche Arbeitsbedingungen. </li><li>  Strafen f√ºr den Fallzustand und f√ºr den Flugzustand auf dem Sprungfeld (da diese beiden Zust√§nde nicht unterbrochen werden k√∂nnen und daher viel weniger wahrscheinlich sind, dass sie sich der Kugel entziehen). </li><li>  Der Bonus f√ºr die Anzahl der Verbandsk√§sten, die sich auf der anderen Seite von mir befinden, im Vergleich zum Feind (d. H., Wenn sich der Feind zu meiner Rechten befindet, bekomme ich einen Bonus f√ºr die Anzahl der Verbandsk√§sten, die sich zu meiner Linken befinden. Dies ergab im Wesentlichen Sinn Runde 1 und 2, in denen der einzige Weg vom Feind zu diesen Verbandsk√§sten durch mich f√ºhrte). </li><li>  Bonus f√ºr den Weg zum Feind, zur Erste-Hilfe-Ausr√ºstung (wenn ich verwundet bin), zu einer Mine (wenn ich weniger als zwei habe), zu Waffen (wenn es keine gibt). </li><li>  Strafe f√ºr die N√§he der Mauern, falls der Feind eine Panzerfaust hat.  Genauer gesagt habe ich √ºberlegt, wie viele Zecken die feindliche Rakete, wenn sie sie abfeuert, in die N√§he der Mauer fliegen wird, und auf dieser Grundlage wurde die Zone in der N√§he der Mauer, aus der es unm√∂glich ist, der Explosion zu entkommen, als gef√§hrlich eingestuft und ich erhielt eine Geldstrafe daf√ºr, dass ich darin war. </li><li>  Neujahrsbonus. </li></ol><br><h2 id="uklonenie-ot-pul">  Bullet Evasion </h2><br><p>  Aus den oben genannten Gr√ºnden geschieht dies automatisch </p><br><h2 id="pricelivanie">  Zielen </h2><br><p>  Es ist viel los.  Das vielleicht wichtigste ist ein einfacher und effektiver Algorithmus, der entscheidet, ob ich eine Waffe auf den Feind richten soll (weil das Zielen die Verbreitung von Waffen erh√∂ht): </p><br><ol><li>  Wir betrachten den Winkel zwischen (last_angle - min_spread) und (last_angle + max_spread). </li><li>  Wir schie√üen die Strahlen von der Mitte meines Charakters zu den beiden Ecken des feindlichen <a href="https://www.wikiwand.com/ru/AABB">AABB</a> , die der Senkrechten am n√§chsten liegen.  Wenn einer von ihnen au√üerhalb des Bereichs liegt (last_angle - min_spread) ... (last_angle + max_spread), wird dieser Bereich abgeschnitten. </li><li>  Wir betrachten den Winkel zwischen diesen Strahlen. </li><li>  Teilen Sie die erste zweite Ecke durch die erste, wir erhalten Deckung (Coverage).  Stellt die <em>aktuelle</em> Wahrscheinlichkeit in Prozent dar, dass sich die Flugbahn des abgefeuerten Geschosses mit der des Gegners schneidet. </li><li>  Wir simulieren eine Aktion, bei der das Zielen auf einen Feind mit einer √Ñnderung der Streuung einhergeht. </li><li>  Wiederholen Sie die Schritte 1..4 f√ºr die neue Menge [last_angle, min_spread, max_spread].  Aus diesem Grund √ºberlegen wir uns, welche Berichterstattung wir anstreben. </li><li>  Als Ergebnis haben wir die aktuelle Abdeckung sowie die vorhergesagte Abdeckung f√ºr den Fall, dass wir die Waffe auf den Feind richten.  Wenn die gesch√§tzte Abdeckung gr√∂√üer als die aktuelle ist, zielen wir ab. </li></ol><br><p>  Demo 2 Punkte: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/au1eInNY9XQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Wenn die Linien gr√ºn sind, f√§llt der Feind vollst√§ndig in den Zielbereich.  Orange - teilweise rot - f√§llt √ºberhaupt nicht. </p><br><p>  Aber ich ziele normalerweise nicht auf den Bauch des Feindes, sondern auf einen optimaleren Punkt. </p><br><p>  Wenn f√ºr eine Pistole und ein Sturmgewehr der Feind in der Luft ist, √ºberlege ich, wie viele Zecken die Kugel ihre aktuelle Position erreichen wird, dann entnehme ich aus dem <code>dodge_trajectories</code> Array, das oben beschrieben wurde, alle m√∂glichen Positionen durch diese Anzahl von Zecken, <code>dodge_trajectories</code> alle 8 Positionen und ber√ºcksichtige beim Zielen dass der Feind an diesem gemittelten Punkt ist. </p><br><p>  Wenn er auf dem Boden steht, ziele ich "auf den Kopf", basierend auf den √úberlegungen, dass er nur nach oben springen kann, so dass ein Schuss in den Kopf viel schwieriger auszuweichen ist als ein Schuss in den Bauch und noch schwieriger in die Beine. </p><br><p>  F√ºr eine Panzerfaust nehme ich ebenfalls 8 m√∂gliche Positionen durch so viele Zecken ein, wie die Rakete den Feind erreicht.  F√ºr sie baue ich einen Kegel (genauer gesagt einen Kreisabschnitt), der all diese Positionen beschreibt, und innerhalb dieses Kegels sortiere ich die Trajektorien mit einigen Schritten.  F√ºr jede Flugbahn simuliere ich einen Raketenflug sowie eine Explosion im Falle eines Treffers in der Wand.  Die Flugbahn, in der der Feind am wenigsten ausweichen kann, benutze ich zum Zielen. </p><br><p>  Sogar in einigen F√§llen, wenn ich vom Sprungbrett st√ºrze und fliege (d. H. Wenn der Feind nicht unterbrechen kann), betrachte ich einfach den Abfangpunkt durch die Kugel des Feindes, indem ich das System der Bewegungsgleichungen l√∂se.  Der Code wurde von seinem eigenen Hockey-Bot aus dem Jahr 2014 kopiert, wo er zum Abfangen des Pucks verwendet wurde.  :) </p><br><p>  Unter anderem habe ich in bestimmten Situationen das Zielen abgebrochen, wenn sich f√ºr die n√§chsten 10 Ticks eine Position auf meinem Weg befindet, in der sich der Strahl von der Mitte dieser Position in Richtung des <em>aktuellen</em> letzten Winkels mit dem Feind schneidet.  Dies erm√∂glichte es mir, mit Bewegung zu zielen, ohne den Winkel zu √§ndern und daher die Streuung zu erh√∂hen. </p><br><h2 id="strelba">  Schie√üen </h2><br><p>  Das Grundschie√üen wurde in die gefundene Flugbahn eingen√§ht und war rein situativ.  Aber auch jeder Tick, den mein Bot versuchte zu berechnen, ob es Sinn macht, jetzt zu schie√üen, und wenn ja, schoss er.  Z.B: </p><br><ul><li>  wenn der Feind nicht garantiert ausweichen kann; </li><li>  wenn die Deckung √ºber einem festen Wert lag. </li></ul><br><p>  Wenn es sich bei meiner Waffe um eine Panzerfaust handelte, simulierte ich im Falle eines sofortigen Schusses mit einigem Schritt alle m√∂glichen Flugbahnen innerhalb der Ausbreitung.  Und wenn das Ergebnis zeigt, dass der potenzielle Nutzen den potenziellen Schaden √ºbersteigt, habe ich geschossen.  Ich bewertete den Vorteil anhand von 4 Metriken in absteigender Reihenfolge der Wichtigkeit f√ºr mich und den Feind: garantierter Tod (mein oder der Feind), m√∂glicher Tod, garantierter Schaden, m√∂glicher Schaden.  Wenn es mindestens eine Flugbahn gab, in der ich mich <em>garantiert</em> umgebracht und <em>m√∂glicherweise</em> nur den Feind get√∂tet habe, habe ich nicht geschossen. </p><br><p>  Es gab noch andere Schecks.  Zum Beispiel k√∂nnte ich einen Schuss stornieren, wenn die potenzielle Reichweite im n√§chsten Tick meiner Flugbahn h√∂her ist als in der aktuellen. </p><br><p>  Im Allgemeinen sagte mir die Logik, dass das grundlegende Schie√üen ausgeschaltet werden sollte, aber Tests zeigten das Gegenteil.  Ich kann mir nicht vorstellen warum. </p><br><h2 id="miny">  Minen </h2><br><p>  Zum Zeitpunkt des Finales steckten sie noch in den Kinderschuhen: Ich habe jede Zecke angekreuzt, was passieren w√ºrde, wenn ich jetzt je nach Gesundheit des Gegners 1 oder 2 Minen platziere und sie erschie√üe.  Wenn es mir garantiert ist, den Feind zu t√∂ten und wenn es f√ºr mich von Vorteil ist (entweder nach Punkten oder weil nur der Feind sterben wird), habe ich es getan. </p><br><p>  Nach dem neuen Jahr, als ich von einer Reise zur√ºckkam, schrieb ich am ersten Abend den Algorithmus, der mich an 2-4 Stellen in der Tabelle brachte.  Der Algorithmus war einfach: Ich habe nur jeden Tick simuliert, was passieren w√ºrde, wenn ich sofort in den Berserker-Modus wechseln und auf den Feind rennen w√ºrde, um ihn so schnell wie m√∂glich mit einer Mine in die Luft zu jagen.  F√ºr den Feind simulierte ich ein einfaches Ausweichen mit den gleichen Ausweichstrecken: Ich nahm drei Strecken, die den Abstand zu mir vergr√∂√üerten.  Wenn ich mich zum Beispiel links vom Feind befand, analysierte ich drei F√§lle: Der Feind rennt nach rechts davon;  der Feind l√§uft nach rechts und springt;  rennt nach rechts und springt nach unten.  Wenn ich in allen drei F√§llen garantiert Zeit hatte, ihn mit einer Mine zu t√∂ten, und er garantiert nicht in der Lage war, Minen vor mich zu legen, tat ich es. </p><br><p>  Au√üerdem konnte der Algorithmus auf der Ebene der Schnellstartstrategie springen oder springen - einfach basierend auf dem Unterschied in der Y-Koordinate. </p><br><p>  Infolgedessen endete auf den endg√ºltigen Karten fast jedes Spiel mit weniger als 1000 Ticks und Selbstbeschuss meiner beiden Charaktere. </p><br><h2 id="pacifizm">  Pazifismus </h2><br><p>  Um zu sehen, wie effektiv meine Minen waren, entschloss ich mich, meine zuvor auf dem <a href="https://t.me/aicups">Telegrammkanal</a> getroffene Annahme zu √ºberpr√ºfen <a href="https://t.me/aicups">,</a> dass es im Finale m√∂glich war, einen Platz an der Spitze einzunehmen, ohne zu schie√üen.  Also habe ich nur das Schie√üen in meinem Bot genommen und ausgeschaltet, mit Ausnahme eines Minenschusses.  Das einzige ist - um die Wertung nicht zu verlieren, wurde dieser Modus nur aktiviert, wenn ich genug Minen hatte, um den Feind zu t√∂ten. </p><br><p>  Kurz gesagt, mein Bot ist Pazifist geworden.  Um seinen Frieden und seine Demut zu demonstrieren, schaute er nicht einmal auf den Feind (siehe Video).  Na ja, er hat manchmal Minen geschossen, denken Sie.  Ich habe nicht auf Gegner geschossen!  Und wenn sie gleichzeitig starben - was k√∂nnen Sie tun, ein tragischer Unfall? </p><br><p>  Im Allgemeinen habe ich diese Version auf die Seite hochgeladen, 4 Spiele mit jeweils den dann Top 3 erstellt und ... </p><br><p><img src="https://habrastorage.org/webt/sv/e8/69/sve869ijby1cp9lduijtx5wfusc.png"></p><br><p>  ... haben jeweils 3 von 4 Spielen gewonnen.  Im Allgemeinen ist es seltsam, dass die Nachbarn mitten in der Nacht nicht gekommen sind, um sich √ºber mein homerisches Lachen zu beschweren.  :) </p><br><p>  Bewundern Sie sich: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ZpvvN21vufg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Wenn ich diese 2-3 Stunden vor dem Finale und nicht danach verbringe, w√ºrde dieser Artikel vielleicht erkl√§ren, wie man ein MacBook gewinnt und nicht, wie man es auf alle F√§lle vermeidet, wer wei√ü.  Leider kennt die Geschichte die Konjunktivstimmung nicht. </p><br><h1 id="testirovanie">  Testen </h1><br><p>  Im Allgemeinen habe ich alle √Ñnderungen so oft getestet, dass das Ergebnis statistisch signifikant war.  Genauer gesagt sollte die Untergrenze des Konfidenzintervalls 50% √ºberschreiten.  F√ºr das Finale der Sandbox w√§hlte das Skript die Koeffizienten aus.  In fr√ºheren Jahren habe ich Genetik ausprobiert, aber es hat schlecht funktioniert - f√ºr ein normales Ergebnis musste man zu viele Spiele spielen.  Diesmal habe ich also nur einen Koeffizienten nach dem anderen ge√§ndert und 200 Spiele gewonnen.  In den F√§llen, in denen das Ergebnis gut war, f√ºhrte ich zus√§tzliche Tests durch.  Kurz gesagt, lie√ü √ºber Nacht zwei Dutzend Koeffizienten und hatte ein Ergebnis am Morgen. </p><br><h1 id="v-zaklyuchenie">  Abschlie√üend </h1><br><p>  Das hat irgendwie alles mit Trauer in zwei H√§lften geklappt. </p><br><p>  In den letzten Tagen vor dem Ende des Sandkastens verbrachte ich die meiste Zeit auf dem zweiten Platz in der Tabelle, aber ein paar Stunden vor dem Ende des Sandkastens hatte ich kein Gl√ºck und startete eine Reihe von Spielen nach den Regeln der Runden 1 und 2, w√§hrend Meine Strategie orientierte sich am besten an den Regeln des Finales.  Zum Beispiel gibt es hier von 13 Spielen nur 1 nach den endg√ºltigen Regeln.  Also habe ich auch meine Gewinnquote in diesen Spielen viel schlechter als √ºblich herausgefunden.  Im Allgemeinen ist der allm√§chtige Zufall: </p><br><p><img src="https://habrastorage.org/webt/4-/xl/wi/4-xlwimvw-jwctcn8qerejyjsma.jpeg"></p><br><p>  Infolgedessen verlor ich zu viele Spiele, verlor meinen ganzen Vorteil und fiel von 2 auf 4 Pl√§tze und hatte keine Zeit, mich zu erholen, weil die Meisterschaft vorbei war.  Es ist gut, dass der Sandkasten nicht den ersten Platz in der Gewinnerliste verloren hat. </p><br><p>  Ich m√∂chte mich noch einmal bei Mail.ru Group f√ºr diese n√§chste wundervolle Meisterschaft bedanken.   , ,   ,          ( 1100 ).      ‚Äî ,   .  ,         .  , , ,  ! </p><br><p>   ,    .  , ,       .       "   8 ". </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de485372/">https://habr.com/ru/post/de485372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de485354/index.html">Motorrad hergestellt mit SLS 3D-Druck</a></li>
<li><a href="../de485358/index.html">Ist mobile Entwicklung einfach und langweilig? Yandex-Bericht</a></li>
<li><a href="../de485362/index.html">JavaScript ES2020 Innovationen mit einfachen Beispielen</a></li>
<li><a href="../de485364/index.html">So verschwenden Sie keine Zeit mehr mit technischen Schulden</a></li>
<li><a href="../de485370/index.html">Wie kann ein Entwickler einem Manager helfen, einen Deal abzuschlie√üen?</a></li>
<li><a href="../de485374/index.html">Cache ist der K√∂nig der Leistung: Brauchen Prozessoren ein viertes Caching-Level?</a></li>
<li><a href="../de485376/index.html">Wie wird das Frontend dreimal schneller und wann werden Befehle anstelle von Repositorys angewendet? Video</a></li>
<li><a href="../de485378/index.html">Fallstudie: So werden Sie bei Google Play vorgestellt und passen ASO an verschiedene L√§nder an</a></li>
<li><a href="../de485380/index.html">Handwerk und IT-Erfolg</a></li>
<li><a href="../de485384/index.html">NeurIPS 2019: ML-Trends, die uns das n√§chste Jahrzehnt begleiten werden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>