<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèø üë®üèæ‚Äçüî¨ ü§πüèΩ Droits Linux (chown, chmod, SUID, GUID, sticky bit, ACL, umask) üë®‚Äçüé§ üßõüèΩ üí∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. Ceci est une traduction d'un article de RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 et EX300. 

 De moi-m√™me: j'esp√®re que l'a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Droits Linux (chown, chmod, SUID, GUID, sticky bit, ACL, umask)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469667/">  Bonjour √† tous.  Ceci est une traduction d'un article de RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 et EX300. <br><br>  <b>De moi-m√™me:</b> j'esp√®re que l'article sera utile non seulement pour les d√©butants, mais aidera √©galement les administrateurs plus exp√©riment√©s √† organiser leurs connaissances. <br><br>  Alors allons-y. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/95b/e9d/a00/95be9da00b36434d2b2445fe1379b5ae.png" alt="image"><br><a name="habracut"></a><br>  Pour acc√©der aux fichiers sous Linux, des autorisations sont utilis√©es.  Ces autorisations sont attribu√©es √† trois objets: un fichier, un groupe et un autre objet (c'est-√†-dire tout le monde).  Dans cet article, vous apprendrez √† appliquer des autorisations. <br><br>  L'article commence par un examen des concepts de base, apr√®s quoi les autorisations sp√©ciales et les listes de contr√¥le d'acc√®s (ACL) sont discut√©es.  √Ä la fin de cet article, vous apprendrez comment configurer les autorisations par d√©faut via umask, ainsi que la gestion des attributs utilisateur avanc√©s. <br><br><h2>  Gestion de la propri√©t√© des fichiers </h2><br>  Avant de discuter des autorisations, vous devez conna√Ætre le r√¥le du propri√©taire du fichier et du r√©pertoire.  Poss√©der des fichiers et des r√©pertoires est essentiel pour travailler avec des autorisations.  Dans cette section, vous apprendrez d'abord comment voir le propri√©taire.  Vous apprendrez ensuite comment changer le propri√©taire et l'utilisateur du groupe pour les fichiers et les r√©pertoires. <br><br><h3>  Afficher le propri√©taire d'un fichier ou d'un r√©pertoire </h3><br>  Sous Linux, chaque fichier et chaque r√©pertoire ont deux propri√©taires: un utilisateur et un groupe. <br><br>  Ces propri√©taires sont d√©finis lors de la cr√©ation du fichier ou du r√©pertoire.  L'utilisateur qui cr√©e le fichier devient le propri√©taire de ce fichier et le groupe principal, qui comprend le m√™me utilisateur, devient √©galement le propri√©taire de ce fichier.  Pour d√©terminer si vous, en tant qu'utilisateur, avez des droits d'acc√®s √† un fichier ou un r√©pertoire, le shell v√©rifie sa propri√©t√©. <br><br>  <b>Cela se produit dans l'ordre suivant:</b> <br><br><ol><li>  Le shell v√©rifie si vous poss√©dez le fichier auquel vous souhaitez acc√©der.  Si vous √™tes ce propri√©taire, vous obtenez des autorisations et le shell cesse de v√©rifier. </li><li>  Si vous n'√™tes pas propri√©taire du fichier, le shell v√©rifiera si vous √™tes membre d'un groupe disposant des autorisations sur ce fichier.  Si vous √™tes membre de ce groupe, vous acc√©dez au fichier avec les autorisations d√©finies pour le groupe et le shell cesse de v√©rifier. </li><li>  Si vous n'√™tes ni l'utilisateur ni le propri√©taire du groupe, vous b√©n√©ficiez des droits des autres utilisateurs (Autre). </li></ol><br>  Pour voir les affectations de propri√©taire actuelles, vous pouvez utiliser la <b>commande ls -l</b> .  Cette commande affiche le groupe d'utilisateurs et de propri√©taires.  Ci-dessous, vous pouvez voir les param√®tres du propri√©taire des r√©pertoires dans le r√©pertoire / home. <br><br><pre><code class="bash hljs">[root@server1 home]<span class="hljs-comment"><span class="hljs-comment"># ls -l total 8 drwx------. 3 bob bob 74 Feb 6 10:13 bob drwx------. 3 caroline caroline 74 Feb 6 10:13 caroline drwx------. 3 fozia fozia 74 Feb 6 10:13 fozia drwx------. 3 lara lara 74 Feb 6 10:13 lara drwx------. 5 lisa lisa 4096 Feb 6 10:12 lisa drwx------. 14 user user 4096 Feb 5 10:35 user</span></span></code> </pre> <br>  √Ä l'aide de la <b>commande ls,</b> vous pouvez afficher le propri√©taire des fichiers dans ce r√©pertoire.  Parfois, il peut √™tre utile d'obtenir une liste de tous les fichiers du syst√®me dans lesquels l'utilisateur ou le groupe est sp√©cifi√© comme propri√©taire.  Vous pouvez utiliser <b>find pour cela</b> .  L' <b>argument find -user</b> peut √™tre utilis√© √† cet effet.  Par exemple, la commande suivante affiche tous les fichiers dont l'utilisateur linda est sp√©cifi√© comme propri√©taire: <br><br><pre> <code class="bash hljs">find / -user linda</code> </pre> <br>  Vous pouvez √©galement utiliser <b>find</b> pour rechercher des fichiers dans lesquels un groupe particulier les poss√®de. <br><br>  Par exemple, la commande suivante recherche tous les fichiers appartenant au groupe d' <i>utilisateurs</i> : <br><br><pre> <code class="bash hljs">find / -group users</code> </pre> <br><h3>  Changement de propri√©taire </h3><br>  Pour appliquer des autorisations, la premi√®re chose √† consid√©rer est la propri√©t√©.  Il existe une <b>commande chown</b> pour cela.  La syntaxe de cette commande est facile √† comprendre: <br><br><pre> <code class="bash hljs">chown  </code> </pre> <br>  Par exemple, la commande suivante change le propri√©taire du r√©pertoire / home / account en utilisateur linda: <br><br><pre> <code class="bash hljs">chown linda /home/account</code> </pre> <br>  La <b>commande chown</b> poss√®de plusieurs options, dont l'une est particuli√®rement utile: <b>-R</b> .  Vous pouvez deviner ce qu'il fait, car cette option est √©galement disponible pour de nombreuses autres √©quipes.  Cela vous permet de d√©finir r√©cursivement le propri√©taire, ce qui vous permet de d√©finir le propri√©taire du r√©pertoire actuel et de tout ce qui suit.  La commande suivante change le propri√©taire du r√©pertoire / home et tout ce qui se trouve en dessous en lisa: <br><br>  Maintenant, les propri√©taires ressemblent √† ceci: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 account account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br>  Ex√©cuter: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># chown -R lisa /home/account [root@localhost ~]#</span></span></code> </pre><br>  Maintenant, Lisa est devenue propri√©taire du r√©pertoire des comptes: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 lisa account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br><h3>  Changement de propri√©taire de groupe </h3><br>  Il existe deux fa√ßons de modifier la propri√©t√© d'un groupe.  Vous pouvez le faire en utilisant <b>chown</b> , mais il existe une commande sp√©ciale appel√©e <b>chgrp</b> qui fait le travail.  Si vous souhaitez utiliser la <b>commande chown</b> , utilisez <b>.</b>  ou <b>:</b> avant le nom du groupe. <br><br>  La commande suivante remplace tout propri√©taire du groupe / home / account par le groupe de comptes: <br><br><pre> <code class="bash hljs">chown .account /home/account</code> </pre><br>  Vous pouvez utiliser <b>chown</b> pour changer le propri√©taire d'un utilisateur et / ou d'un groupe de plusieurs mani√®res.  Voici quelques exemples: <br><br><ul><li>  <b>chown lisa myfile1</b> d√©finit lisa pour poss√©der myfile1. </li><li>  <b>chown lisa.sales myfile</b> d√©finit l'utilisateur lisa sur le propri√©taire du fichier myfile et d√©finit √©galement le groupe de ventes sur le propri√©taire du m√™me fichier. </li><li>  <b>chown lisa: sales myfile est</b> identique √† la commande pr√©c√©dente. </li><li>  <b>chown .sales myfile</b> d√©finit le groupe de ventes comme le propri√©taire du fichier myfile sans changer le propri√©taire de l'utilisateur. </li><li>  <b>chown: sales myfile est</b> le m√™me que la commande pr√©c√©dente. </li></ul><br>  Vous pouvez utiliser la commande <b>chgrp</b> pour changer le propri√©taire du groupe.  Prenons l'exemple suivant, o√π vous pouvez utiliser <b>chgrp pour</b> d√©finir le groupe de ventes en tant que propri√©taire du r√©pertoire de compte: <br><br><pre> <code class="bash hljs">chgrp .sales /home/account</code> </pre> <br>  Comme avec <b>chown</b> , vous pouvez utiliser l'option <b>-R</b> avec <b>chgrp</b> et √©galement changer le propri√©taire du groupe de mani√®re r√©cursive. <br><br><h3>  Comprendre le propri√©taire par d√©faut </h3><br>  Vous pouvez remarquer que lorsque l'utilisateur cr√©e le fichier, la propri√©t√© par d√©faut est appliqu√©e. <br>  L'utilisateur qui cr√©e le fichier devient automatiquement le propri√©taire de ce fichier et le groupe principal de cet utilisateur devient automatiquement le propri√©taire de ce fichier.  Il s'agit g√©n√©ralement d'un groupe sp√©cifi√© dans le fichier / etc / passwd comme groupe principal de l'utilisateur.  Cependant, si l'utilisateur est membre de plusieurs groupes, il peut modifier le groupe central effectif. <br><br>  Pour afficher le groupe principal effectif actuel, l'utilisateur peut utiliser la commande <b>groups</b> : <br><br><pre> <code class="bash hljs">[root@server1 ~]<span class="hljs-comment"><span class="hljs-comment"># groups lisa lisa : lisa account sales</span></span></code> </pre><br>  Si l'utilisateur actuel linda souhaite modifier le groupe principal effectif, il utilisera la commande <b>newgrp</b> , suivie du nom du groupe qu'il souhaite d√©finir comme nouveau groupe principal effectif.  Apr√®s avoir utilis√© la commande <b>newgrp</b> , le groupe principal sera actif jusqu'√† ce que l'utilisateur <b>√©mette la</b> commande <b>exit</b> ou se d√©connecte. <br><br>  Voici comment lisa utilise cette commande pour que le groupe de vente devienne le groupe principal: <br><br><pre> <code class="bash hljs">lisa@server1 ~]$ groups lisa account sales [lisa@server1 ~]$ newgrp sales [lisa@server1 ~]$ groups sales lisa account [lisa@server1 ~]$ touch file1 [lisa@server1 ~]$ ls -l total 0 -rw-r--r--. 1 lisa sales 0 Feb 6 10:06 file1</code> </pre><br>  Apr√®s avoir modifi√© le groupe principal actuel, tous les nouveaux fichiers cr√©√©s par l'utilisateur recevront ce groupe en tant que groupe propri√©taire. Pour revenir au param√®tre initial du groupe principal, utilisez <b>exit</b> . <br><br>  Pour pouvoir utiliser la commande <b>newgrp</b> , l'utilisateur doit √™tre membre du groupe qu'il souhaite utiliser comme principal.  De plus, le mot de passe du groupe peut √™tre utilis√© pour le groupe √† l'aide de la commande <b>gpasswd</b> .  Si l'utilisateur utilise la commande <b>newgrp</b> mais n'est pas membre du groupe cible, le shell demande le mot de passe du groupe.  Apr√®s avoir entr√© le mot de passe de groupe correct, un nouveau groupe principal effectif sera d√©fini. <br><br><h2>  Gestion des droits fondamentaux </h2><br>  Le syst√®me d'autorisation Linux a √©t√© invent√© dans les ann√©es 1970.  √âtant donn√© que les besoins informatiques √©taient limit√©s au cours de ces ann√©es, le syst√®me d'autorisation de base √©tait plut√¥t limit√©.  Ce syst√®me d'autorisation utilise trois autorisations qui peuvent √™tre appliqu√©es aux fichiers et aux r√©pertoires.  Dans cette section, vous apprendrez √† utiliser et √† modifier ces autorisations. <br><br><h3>  Comprendre les droits de lecture, d'√©criture et d'ex√©cution </h3><br>  Trois autorisations de base vous permettent de lire, d'√©crire et d'ex√©cuter des fichiers.  L'effet de ces autorisations diff√®re lorsqu'elles sont appliqu√©es √† des fichiers ou des r√©pertoires.  Pour un fichier, l'autorisation de lecture vous donne le droit d'ouvrir le fichier en lecture.  Par cons√©quent, vous pouvez lire son contenu, mais cela signifie que votre ordinateur peut ouvrir le fichier pour en faire quelque chose. <br><br>  Un fichier programme qui a besoin d'acc√©der √† une biblioth√®que doit, par exemple, avoir un acc√®s en lecture √† cette biblioth√®que.  Il s'ensuit que l'autorisation de lecture est l'autorisation la plus √©l√©mentaire dont vous avez besoin pour travailler avec des fichiers. <br><br>  Pour un r√©pertoire, la lecture vous permet d'afficher le contenu de ce r√©pertoire.  Vous devez savoir que cette autorisation ne vous permet pas de lire des fichiers dans un r√©pertoire.  Les autorisations Linux ne connaissent pas l'h√©ritage et la seule fa√ßon de lire un fichier est d'utiliser les autorisations de lecture pour ce fichier. <br><br>  Comme vous pouvez probablement le deviner, l'autorisation d'√©criture, si elle est appliqu√©e au fichier, vous permet d'√©crire dans le fichier.  En d'autres termes, il vous permet de modifier le contenu des fichiers existants.  Cependant, il ne permet pas de cr√©er ou de supprimer de nouveaux fichiers ni de modifier les autorisations de fichier.  Pour ce faire, vous devez accorder une autorisation d'√©criture au r√©pertoire dans lequel vous souhaitez cr√©er le fichier.  Dans les r√©pertoires, cette autorisation vous permet √©galement de cr√©er et de supprimer de nouveaux sous-r√©pertoires. <br><br>  L'autorisation d'ex√©cution est ce dont vous avez besoin pour ex√©cuter le fichier.  Il ne sera jamais install√© par d√©faut, ce qui rend Linux presque compl√®tement immunis√© contre les virus.  Seule une personne disposant d'autorisations d'√©criture dans le r√©pertoire peut appliquer l'autorisation d'ex√©cuter. <br><br>  <b>Ce qui suit r√©sume l'utilisation des autorisations de base:</b> <br><br><img src="https://habrastorage.org/webt/rr/-a/ty/rr-atyy5ru2por4kcyrmd-x87n8.jpeg"><br><br><h2>  Utiliser chmod </h2><br>  Pour g√©rer les droits, utilisez la <b>commande chmod</b> .  Lorsque vous utilisez <b>chmod,</b> vous pouvez d√©finir des autorisations pour l'utilisateur (utilisateur), le groupe (groupe) et les autres (autres).  Vous pouvez utiliser cette commande dans deux modes: le mode relatif et le mode absolu.  En mode absolu, trois chiffres sont utilis√©s pour d√©finir les autorisations de base. <br><br><img src="https://habrastorage.org/webt/3r/6l/va/3r6lvaw_mpvo7sxfsggtxik3ofs.jpeg"><br><br>  Lors de la d√©finition des autorisations, calculez la valeur dont vous avez besoin.  Si vous souhaitez d√©finir la lecture, l'√©criture et l'ex√©cution pour l'utilisateur, la lecture et l'ex√©cution pour le groupe, et la lecture et l'ex√©cution pour les autres dans le fichier / somefile, vous utilisez la <b>commande chmod</b> suivante: <br><br><pre> <code class="bash hljs">chmod 755 /somefile</code> </pre> <br>  Lorsque vous utilisez <b>chmod</b> de cette mani√®re, toutes les autorisations actuelles sont remplac√©es par les autorisations que vous d√©finissez. <br><br>  Si vous souhaitez modifier les autorisations par rapport aux autorisations actuelles, vous pouvez utiliser <b>chmod</b> en mode relatif.  Lorsque vous utilisez <b>chmod</b> en mode relatif, vous travaillez avec trois indicateurs pour indiquer ce que vous voulez faire: <br><br><ol><li>  D'abord, vous indiquez pour qui vous souhaitez modifier les autorisations.  Pour ce faire, vous pouvez choisir entre l'utilisateur ( <b>u</b> ), le groupe ( <b>g</b> ) et les autres ( <b>o</b> ). </li><li>  Ensuite, vous utilisez l'op√©rateur pour ajouter ou supprimer des autorisations du mode actuel, ou les d√©finir compl√®tement. </li><li>  En fin de compte, vous utilisez <b>r</b> , <b>w</b> et <b>x</b> pour indiquer les autorisations que vous souhaitez d√©finir. </li></ol><br>  Lorsque vous modifiez des autorisations en mode relatif, vous pouvez ignorer la partie ¬´√†¬ª pour ajouter ou supprimer l'autorisation pour tous les objets.  Par exemple, cette commande ajoute une autorisation d'ex√©cution pour tous les utilisateurs: <br><br><pre> <code class="bash hljs">chmod +x somefile</code> </pre> <br>  Lorsque vous travaillez en mode relatif, vous pouvez √©galement utiliser des commandes plus complexes.  Par exemple, cette commande ajoute une autorisation d'√©criture √† un groupe et supprime les lectures pour les autres: <br><br><pre> <code class="bash hljs">chmod g+w,or somefile</code> </pre> <br>  Lorsque vous utilisez <b>chmod -R o + rx / data,</b> vous d√©finissez l'autorisation d'ex√©cution pour tous les r√©pertoires, ainsi que pour les fichiers du r√©pertoire / data.  Pour d√©finir l'autorisation d'ex√©cuter uniquement pour les r√©pertoires, pas pour les fichiers, utilisez <b>chmod -R o + rX / data</b> . <br><br>  Les majuscules X garantissent que les fichiers ne sont pas autoris√©s √† s'ex√©cuter si le fichier n'a pas d√©j√† d√©fini l'autorisation d'ex√©cution pour certains objets.  Cela fait de X un moyen plus intelligent de travailler avec des autorisations d'ex√©cution;  cela √©vitera d'installer cette autorisation sur des fichiers o√π elle n'est pas requise. <br><br><h2>  Droits √©tendus </h2><br>  En plus des autorisations de base que vous venez de lire, Linux dispose √©galement d'un ensemble d'autorisations avanc√©es.  Ce ne sont pas les autorisations par d√©faut que vous d√©finissez, mais elles fournissent parfois un ajout utile.  Dans cette section, vous apprendrez ce qu'ils sont et comment les configurer. <br><br><h3>  Comprendre les autorisations √©tendues SUID, GUID et Sticky Bit </h3><br>  Il existe trois autorisations avanc√©es.  Le premier d'entre eux est l'autorisation de d√©finir un identifiant utilisateur (SUID).  Dans certains cas particuliers, vous pouvez appliquer cette autorisation aux fichiers ex√©cutables.  Par d√©faut, l'utilisateur ex√©cutant l'ex√©cutable ex√©cute le fichier avec ses propres autorisations. <br><br>  Pour les utilisateurs ordinaires, cela signifie g√©n√©ralement que l'utilisation du programme est limit√©e.  Cependant, dans certains cas, l'utilisateur n'a besoin d'autorisations sp√©ciales que pour effectuer une t√¢che sp√©cifique. <br><br>  Consid√©rez, par exemple, une situation o√π l'utilisateur doit changer le mot de passe.  Pour ce faire, l'utilisateur doit √©crire son nouveau mot de passe dans le fichier / etc / shadow.  Cependant, ce fichier n'est pas accessible en √©criture pour les utilisateurs non root: <br><br><pre> <code class="bash hljs">root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /etc/shadow ----------. 1 root root 1184 Apr 30 16:54 /etc/shadow</span></span></code> </pre><br>  La r√©solution SUID offre une solution √† ce probl√®me.  Dans l'utilitaire / usr / bin / passwd, cette autorisation est utilis√©e par d√©faut.  Cela signifie que lorsque le mot de passe est modifi√©, l'utilisateur obtient temporairement les privil√®ges root, ce qui lui permet d'√©crire dans le fichier / etc / shadow.  Vous pouvez voir la r√©solution SUID avec <b>ls -l en</b> tant que <b>s</b> dans la position o√π vous vous attendez g√©n√©ralement √† voir <b>x</b> pour les autorisations utilisateur: <br><br><pre> <code class="bash hljs">[root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /usr/bin/passwd -rwsr-xr-x. 1 root root 32680 Jan 28 2010 /usr/bin/passwd</span></span></code> </pre><br>  Les autorisations SUID peuvent sembler utiles (et dans certains cas, elles le sont), mais en m√™me temps, elles sont potentiellement dangereuses.  En cas d'utilisation incorrecte, vous pouvez accidentellement accorder des autorisations d'acc√®s root.  Par cons√©quent, je recommande de l'utiliser uniquement avec une extr√™me prudence. <br><br>  La plupart des administrateurs n'auront jamais √† l'utiliser;  vous ne le verrez que dans certains fichiers o√π le syst√®me d'exploitation devrait le d√©finir par d√©faut. <br><br>  La deuxi√®me autorisation sp√©ciale est l'identifiant de groupe (SGID).  Cette r√©solution a deux effets.  Lorsqu'il est appliqu√© √† un fichier ex√©cutable, il donne √† l'utilisateur qui ex√©cute le fichier les autorisations du propri√©taire du groupe de ce fichier.  Ainsi, le SGID peut faire plus ou moins la m√™me chose que le SUID.  Cependant, SGID n'est pratiquement pas utilis√© √† cette fin. <br><br>  Comme avec l'autorisation SUID, SGID est appliqu√© √† certains fichiers syst√®me comme param√®tre par d√©faut. <br><br>  Lorsqu'il est appliqu√© √† un r√©pertoire, SGID peut √™tre utile car vous pouvez l'utiliser pour d√©finir le propri√©taire du groupe par d√©faut pour les fichiers et sous-r√©pertoires cr√©√©s dans ce r√©pertoire.  Par d√©faut, lorsqu'un utilisateur cr√©e un fichier, son groupe principal effectif est d√©fini comme propri√©taire du groupe pour ce fichier. <br><br>  Ce n'est pas toujours tr√®s utile, notamment parce que les utilisateurs de Red Hat / CentOS ont un groupe avec le m√™me nom que l'utilisateur, et dont l'utilisateur est le seul membre.  Ainsi, par d√©faut, les fichiers que l'utilisateur cr√©e seront partag√©s. <br><br>  Imaginez une situation o√π les utilisateurs de linda et lori travaillent en comptabilit√© et sont membres du groupe de <i>comptes</i> .  Par d√©faut, ces utilisateurs sont membres du groupe priv√© dont ils sont le seul membre.  Cependant, les deux utilisateurs sont membres du groupe de comptes, mais √©galement en tant que param√®tre du groupe secondaire. <br><br>  La situation par d√©faut est que lorsque l'un de ces utilisateurs cr√©e un fichier, le groupe principal devient le propri√©taire.  Par cons√©quent, par d√©faut, linda ne peut pas acc√©der aux fichiers cr√©√©s par lori, et vice versa.  Cependant, si vous cr√©ez un r√©pertoire partag√© d'un groupe (par exemple / groups / account) et assurez-vous que l'autorisation SGID est appliqu√©e √† ce r√©pertoire et que la comptabilit√© de groupe est d√©finie en tant que propri√©taire du groupe pour ce r√©pertoire, tous les fichiers cr√©√©s dans ce r√©pertoire et dans tous ses sous-r√©pertoires , obtenez √©galement des groupes de comptes en tant que propri√©taire du groupe par d√©faut. <br><br>  Pour cette raison, l'autorisation SGID est une autorisation tr√®s utile √† installer sur les r√©pertoires de groupes partag√©s. <br><br>  L'autorisation SGID est indiqu√©e dans la sortie <b>ls -ld</b> sous la forme <b>s</b> √† l'emplacement o√π vous trouvez g√©n√©ralement l'autorisation d'ex√©cuter le groupe: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account drwxr-sr-x. 2 root account 4096 Apr 30 21:28 account</span></span></code> </pre><br>  Le troisi√®me des autorisations sp√©ciales est un peu collant.  Cette autorisation est utile pour prot√©ger les fichiers d'une suppression accidentelle dans un environnement o√π plusieurs utilisateurs ont des autorisations d'√©criture dans le m√™me r√©pertoire.  Si un bit collant est utilis√©, un utilisateur ne peut supprimer un fichier que s'il est le propri√©taire du fichier ou du r√©pertoire dans lequel le fichier se trouve.  Pour cette raison, il est utilis√© comme autorisation par d√©faut pour le r√©pertoire / tmp et peut √©galement √™tre utile pour les r√©pertoires de groupe partag√©s. <br><br>  Sans bit collant, si un utilisateur peut cr√©er des fichiers dans un r√©pertoire, il peut √©galement supprimer des fichiers de ce r√©pertoire.  Dans un environnement de groupe public, cela peut √™tre g√™nant.  Imaginez les utilisateurs linda et lori, qui ont tous deux des autorisations d'√©criture dans le r√©pertoire / data / account et re√ßoivent ces autorisations via l'appartenance au groupe de comptes.  Par cons√©quent, linda peut supprimer des fichiers cr√©√©s par lori et vice versa. <br><br>  Lorsque vous utilisez le bit collant, l'utilisateur ne peut supprimer des fichiers que si l'une des conditions suivantes est remplie: <br><br><ul><li>  L'utilisateur est le propri√©taire du fichier; </li><li>  L'utilisateur est le propri√©taire du r√©pertoire dans lequel se trouve le fichier. </li></ul><br>  Lorsque vous utilisez <b>ls -ld</b> , vous pouvez voir le bit collant comme <b>t</b> dans la position o√π vous voyez g√©n√©ralement la permission d'ex√©cution pour les autres: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account/ drwxr-sr-t. 2 root account 4096 Apr 30 21:28 account/</span></span></code> </pre><br><h3>  Droits renforc√©s </h3><br>  Pour appliquer SUID, SGID et sticky bit, vous pouvez √©galement utiliser <b>chmod</b> .  SUID a une valeur num√©rique de 4, SGID a une valeur num√©rique de 2 et le bit collant a une valeur num√©rique de 1. <br><br>  Si vous souhaitez appliquer ces autorisations, vous devez ajouter un argument √† quatre chiffres √† <b>chmod</b> , dont le premier chiffre fait r√©f√©rence √† des autorisations sp√©ciales.  La ligne suivante, par exemple, ajoutera l'autorisation SGID au r√©pertoire et d√©finira rwx pour l'utilisateur et rx pour le groupe et les autres: <br><br><pre> <code class="bash hljs">chmod 2755 /somedir</code> </pre> <br>  C'est assez peu pratique si vous devez regarder les autorisations actuelles qui sont d√©finies avant de travailler avec <b>chmod</b> en mode absolu.  (Vous risquez d'√©craser les autorisations si vous ne le faites pas.) Par cons√©quent, je recommande de travailler en mode relatif si vous devez appliquer l'une des autorisations sp√©ciales: <br><br><ol><li>  Pour SUID, utilisez <b>chmod u + s</b> . </li><li>  Pour SGID, utilisez <b>chmod g + s</b> . </li><li>  Pour le bit collant, utilisez <b>chmod + t</b> puis le nom du fichier ou du r√©pertoire pour lequel vous souhaitez d√©finir des autorisations. </li></ol><br>  Le tableau r√©sume tout ce qu'il est important de savoir sur la gestion des autorisations sp√©ciales. <br><br><img src="https://habrastorage.org/webt/ls/bk/1d/lsbk1dyrexjjgwx6g1__fws8ols.jpeg"><br><br><h3>  Exemple de travail avec des droits sp√©ciaux </h3><br>  Dans cet exemple, vous utilisez des autorisations sp√©ciales pour faciliter le partage de fichiers dans un r√©pertoire de groupe partag√© par les membres de l'√©quipe.  Vous affectez le bit ID de l'identificateur de groupe d√©fini, ainsi que le bit collant, et vous voyez qu'apr√®s leur installation, des fonctions sont ajout√©es qui facilitent le travail conjoint des membres du groupe. <br><br><ol><li>  Ouvrez le terminal o√π vous √™tes un utilisateur de Linda.  Vous pouvez cr√©er un utilisateur en utilisant <b>useradd linda</b> , ajoutez le mot de passe <b>passwd linda</b> . </li><li>  Cr√©ez un r√©pertoire / data et un sous-r√©pertoire / data / sales √† la racine avec la commande <b>mkdir -p / data / sales</b> .  Ex√©cutez <b>cd / data / sales</b> pour acc√©der au r√©pertoire des ventes.  Ex√©cutez <b>touch linda1</b> et <b>touch linda2</b> pour cr√©er deux fichiers vides appartenant √† linda. </li><li>  Ex√©cutez <b>su-lisa</b> pour faire basculer l'utilisateur actuel sur lisa, qui est √©galement membre du groupe de vente. </li><li>  Ex√©cutez <b>cd / data / sales</b> et √† partir de ce r√©pertoire, ex√©cutez <b>ls -l</b> .  Vous verrez deux fichiers cr√©√©s par linda et appartenant au groupe linda.  Ex√©cutez <b>rm -f linda *</b> .  Cela supprimera les deux fichiers. </li><li>  Ex√©cutez <b>touch lisa1</b> et <b>touch lisa2</b> pour cr√©er deux fichiers appartenant √† l'utilisateur lisa. </li><li>  Ex√©cutez <b>su -</b> pour √©lever vos privil√®ges au niveau racine. </li><li>  Ex√©cutez <b>chmod g + s, o + t / data / sales</b> pour d√©finir le bit d'identifiant de groupe (GUID) ainsi que le bit collant dans le r√©pertoire de groupe partag√©. </li><li>  Courez <b>su - linda</b> .  Ensuite, <b>touchez linda3</b> et <b>touchez linda4</b> .  Vous devez maintenant voir que les deux fichiers que vous avez cr√©√©s appartiennent au groupe de ventes, qui est le propri√©taire du groupe de r√©pertoires / data / sales. </li><li>  Ex√©cutez <b>rm -rf lisa *</b> .  Sticky Bit emp√™che la suppression de ces fichiers au nom de Linda car vous ne poss√©dez pas ces fichiers.  Veuillez noter que si linda est le propri√©taire du r√©pertoire / data / sales, il peut quand m√™me supprimer ces fichiers! </li></ol><br><h2>  Gestion des ACL (setfacl, getfacl) sous Linux </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√™me si les droits √©tendus d√©crits ci-dessus ajoutent des fonctionnalit√©s utiles √† la fa√ßon dont Linux fonctionne avec les autorisations, cela ne vous permet pas d'accorder des autorisations √† plusieurs utilisateurs ou groupes dans un seul fichier. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les listes de contr√¥le d'acc√®s offrent cette fonctionnalit√©. </font><font style="vertical-align: inherit;">En outre, ils permettent aux administrateurs de d√©finir des autorisations par d√©faut d'une mani√®re complexe dans laquelle les autorisations d√©finies peuvent varier dans diff√©rents r√©pertoires.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comprendre les ACL </font></font></h3><br>   ACL      ,     :     . ,     ACL     ,             ACL. <br><br>  tar   ACL.  ,   ACL       ,  <b>star</b>  tar. <b>star</b>     ,   tar;      ACL. <br><br>       ACL   <b>getfacl</b> ,       setfacl.    ,  <b>getfacl -R /directory &gt; file.acls</b> .       ,  <b>setfacl --restore=file.acl</b> . <br><br>        .  ACL       ,     . <br>     ,    ,      . ,    ACL,    ,  ,          . <br><br><h3>     ACL </h3><br>     ACL        ACL.      ,        ACL   .     ACL       ¬´operation not supported¬ª, ,       ACL. <br><br>   ,     <b>acl mount</b>   /etc/fstab,        ACL  . <br><br><h3>     ACL   setfacl  getfacl </h3><br>   ACL,    <b>setfacl</b> .     ACL,   <b>getfacl</b> .  <b>ls -l</b>     ACL;    +   ,  ,   ACL    . <br><br>    ACL      ACL   <b>getfacl</b> .         ,     <b>ls -ld</b> ,      <b>getfacl</b> .     ,  ,      . <br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># ls -ld /dir drwxr-xr-x. 2 root root 6 Feb 6 11:28 /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx other::rx</span></span></code> </pre><br>     <b>getfacl</b>  ,       : ,   .    ACL,          sales.    <b>setfacl -mg:sales:rx /dir</b> .    <b>-m</b> ,    ACL  .   <b>g:sales:rx</b>    ACL     ( <b>rx</b> )   ( <b>g</b> ) sales.    ,   ,     getfacl     ACL. <br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># setfacl -mg:sales:rx /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx group:sales:rx mask::rx other::rx</span></span></code> </pre><br> ,   ,    ACL,   ACL     . ,  <b>setfacl -mu:linda:rwx /data</b>    linda   /data,          . <br><br>  <b>setfacl</b>     .    ,  <b>-R</b> .  ,    ACL     ,       ,    ACL.         ACL   . <br><br><h3>   ACL   </h3><br>      ACL  ,           .     ,     ,   ACL  . <br><br>  ACL  ,   ,       ,   .   ,  ACL          .   ,     ACL! <br><br> <b>  .</b>     ACL             ,    ACL .   <b>setfacl -R -m</b> ,   ACL   .   <b>setfacl -md:</b> ,      ,    . <br><br>   ACL  ,      <b>d</b>   <b>-m</b> (  !).   <b>setfacl -md:g:sales:rx /data</b> ,   ,   sales       ,  -     /data. <br><br>    ACL        ACL  .      ,         ,  <b>chmod</b> . ,        <b>chmod</b> ,   ,          ,  -  .   ,        -,   /data, ,  <b>setfacl -md:o::- /data</b> . <br><br> ACL       .   ,    ACL    ,        ,      . ,     ,       ACL.   ,    ,    ACL   (       ). <br><br><h3>       ACL </h3><br>         /data/account  /data/sales,    .     ,   sales    /data/sales,   account    /data/account. <br><br>  ,   account       /data/sales,   sales       /data/account. <br><br>     ACL  ,  ,            . <br><br><ol><li>  . </li><li>  <b>setfacl -mg:account:rx /data/sales</b>  <b>setfacl -mg:sales:rx /data/account</b> . </li><li>  <b>getfacl</b> ,  ,      ,   . </li><li>  <b>setfacl -md:g:account:rwx,g:sales:rx /data/sales</b> ,   ACL     sales. </li><li>  ACL     /data/account,  <b>setfacl -md:g:sales:rwx,g:account:rx /data/account</b> . </li><li> ,   ACL ,     /data/sales.  <b>touch /data/sales/newfile</b>   <b>getfacl /data/sales/newfile</b>    . </li></ol><br><h2>       umask </h2><br>   ,    ACL  .     ACL,   ,     ,   : <b>umask</b> ( ).     ,        <b>umask</b> . <br><br> , , ,          .     <b>umask</b> .           .   <b>umask</b>   ,     ,       ;     ‚Äî 666,    ‚Äî 777. <br><br>       .       <b>umask</b>   . <br><br>  ,   <b>umask</b> ,         <b>chmod</b> ,      ,      ,       ,   .  <b>umask</b>   022  644      755    ,    . <br><br>      <b>umask</b>      . <br><br><img src="https://habrastorage.org/webt/yi/l8/x0/yil8x0tn7hy6ecxndifimssztnk.jpeg"><br><br>   ,    umask,   :       ,   666,   umask,    .            777. <br><br>      umask:       .     umask   ,   ,   umask      ,    /etc/profile.   ‚Äî      umask.sh   /etc/profile.d   umask,        .      umask,         . <br><br>   umask  /etc/profile   ,      ,   ,    umask     .profile,       . <br><br> ,    ,     ; ,   ,     .     ,    umask     root  027,       umask   022. <br><br><h2>      </h2><br>       Linux. <br><br>              ,           .       Linux ‚Äî   . <br>       ,    . <br><br>      ACL,        <b>mount</b> . <br><br>   <b>user_xattr</b> .     ¬´operation not supported¬ª      ,    <b>mount</b>   /etc/fstab. <br><br>   .   ,    .   ;     . <br><br> <b>    ,    :</b> <br><br> <b>A</b>   ,        . <br>   ,   ,          .     ;   ,     ,  <b>A</b>      . <br><br> <b>a</b>    ,    . <br><br> <b>c</b>     ,       ,    ,         . <br><br> <b>D</b>   ,        ,       .        ,  ,          . <br><br> <b>d</b>   ,        ,    . <br><br> <b>I</b>      ,    .           ,   Ext3,      B-tree     . <br><br> <b>i</b>     . ,     ,    ,     . <br><br> <b>j</b>   ,     ext3     ,   ‚Äî      . <br><br> <b>s</b>  ,     ,  0    .  ,      ,    . <br><br> <b>u</b>      .    ,         . <br><br>     ,     <b>chattr</b> . ,  <b>chattr +s somefile</b> ,     somefile.   ?   <b>chattr -s somefile</b> ,    .     ,     ,   <b>lsattr</b> . <br><br><h2>  R√©sum√© </h2><br>     ,    .      ,     ,   ACL-   .   ,    umask     .      ,            . <br><br>     ,       .      . <br><br><blockquote>        .          . <br><br>  ¬´ -          .¬ª   ¬´ -          .¬ª,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">berez</a> . <br></blockquote><br><blockquote> : <br>      ,  ,     ,     . <br><br> : <br>      ,  ,     ,       .      ,       ,    ,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">CryptoPirate</a> <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr469667/">https://habr.com/ru/post/fr469667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr469651/index.html">WIBAttack. La nouvelle vuln√©rabilit√© de la carte SIM est-elle vraiment terrible?</a></li>
<li><a href="../fr469655/index.html">Pourquoi avez-vous besoin d'un service d'assistance qui ne prend pas en charge?</a></li>
<li><a href="../fr469657/index.html">Analyse: quels actifs de change apportent le plus grand retour aux investisseurs russes</a></li>
<li><a href="../fr469659/index.html">Voitures RC: Introduction</a></li>
<li><a href="../fr469663/index.html">L'histoire de DashaMail: du lancement d'un clone d'une start-up de messagerie am√©ricaine aux querelles avec les investisseurs et un nouveau d√©part</a></li>
<li><a href="../fr469669/index.html">Edward Snowden explique pourquoi il est devenu informateur</a></li>
<li><a href="../fr469671/index.html">Pourquoi utiliser le langage Ada pour programmer votre syst√®me</a></li>
<li><a href="../fr469677/index.html">Tabagisme, mode de vie sain, motivation et rapidit√© de d√©veloppement de logiciels</a></li>
<li><a href="../fr469681/index.html">Sortie de la version finale de TensorFlow 2.0</a></li>
<li><a href="../fr469683/index.html">S√ªret√© nucl√©aire et vid√©osurveillance industrielle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>