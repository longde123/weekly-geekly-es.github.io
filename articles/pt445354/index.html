<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👽 😩 👌🏻 Localizando objetos nas imagens 🧙🏽 👨‍👨‍👧‍👦 👩🏽‍🎨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Estamos envolvidos na compra de tráfego do Adwords (uma plataforma de publicidade do Google). Uma das tarefas regulares nesta área é a criação de novo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Localizando objetos nas imagens</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/joom/blog/445354/"><p>  Estamos envolvidos na compra de tráfego do Adwords (uma plataforma de publicidade do Google).  Uma das tarefas regulares nesta área é a criação de novos banners.  Os testes mostram que os banners perdem eficácia com o tempo, à medida que os usuários se acostumam;  As estações e as tendências estão mudando.  Além disso, temos o objetivo de capturar diferentes nichos de público, e os banners segmentados por pouco funcionam melhor. </p><br><p>  Em conexão com a entrada de novos países, surgiu a questão da localização de banners.  Para cada banner, você precisa criar versões em diferentes idiomas e com moedas diferentes.  Você pode solicitar que os designers façam isso, mas este trabalho manual adicionará uma carga adicional a um recurso já escasso. </p><br><p>  Parece uma tarefa fácil de automatizar.  Para isso, basta criar um programa que imponha no banner um preço localizado para o "preço" e apelo à ação (frase como "compre agora") no botão.  Se a impressão de um texto em uma imagem é bastante simples, determinar onde você deve colocá-lo nem sempre é trivial.  Peppercorns acrescenta que o botão vem em cores diferentes e tem uma forma ligeiramente diferente. </p><br><p>  Este artigo é dedicado a: como encontrar o objeto especificado na imagem?  Métodos populares serão resolvidos;  Áreas de aplicação, recursos, prós e contras.  Os métodos acima podem ser usados ​​para outros fins: desenvolvimento de programas para câmeras de segurança, automação da interface do usuário de teste e similares.  As dificuldades descritas podem ser encontradas em outras tarefas e os métodos utilizados podem ser usados ​​para outros fins.  Por exemplo, o Canny Edge Detector é freqüentemente usado para pré-processar imagens, e o número de pontos-chave pode ser usado para avaliar a "complexidade" visual de uma imagem. </p><br><p>  Espero que as soluções descritas reponham seu arsenal de ferramentas e truques para resolver problemas. </p><br><p><img src="https://habrastorage.org/webt/2q/_t/fm/2q_tfmvffjyb1i9k_dlczqceoha.png"></p><a name="habracut"></a><br><p>  O código está no Python 3.6 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">repositório</a> );  Biblioteca OpenCV necessária.  O leitor deve entender os conceitos básicos de álgebra linear e visão computacional. </p><br><p>  Vamos nos concentrar em encontrar o botão em si.  Lembraremos de encontrar etiquetas de preço (já que encontrar um retângulo também pode ser resolvido de maneiras mais simples), mas omiti-lo, pois a solução terá a mesma aparência. </p><br><h1 id="template-matching">  Correspondência de modelos </h1><br><p>  O primeiro pensamento que vem à mente é por que não escolher e encontrar na imagem a região que é mais semelhante ao botão em termos de diferença de cor dos pixels?  É isso que faz a correspondência de modelos - um método baseado em encontrar espaço na imagem que é mais semelhante ao modelo.  A "semelhança" de uma imagem é definida por uma métrica específica.  Ou seja, o modelo é “sobreposto” na imagem e a discrepância entre a imagem e o modelo é considerada.  A posição do modelo em que essa discrepância será mínima e indicará a localização do objeto desejado. </p><br><p>  Você pode usar opções diferentes como métrica, por exemplo, a soma das diferenças ao quadrado entre um modelo e uma imagem (soma das diferenças ao quadrado, SSD) ou usar a correlação cruzada (CCORR).  Seja <em>f</em> e <em>g</em> a imagem e o padrão com as dimensões <em>(k, l)</em> e <em>(m, n),</em> respectivamente (ignoraremos os canais de cores por enquanto);  <em>i, j</em> - posição na imagem à qual "anexamos" o modelo. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-4"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-6" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;">s </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;">u </font></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">m </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;">a </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-18"><font style="vertical-align: inherit;">= </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-19"><font style="vertical-align: inherit;">0 .. </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;">m </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-21"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;">b </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-23"><font style="vertical-align: inherit;">= </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;">0 .. </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;">n</font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> ( </font></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">f </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31"><font style="vertical-align: inherit;">i </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-32"><font style="vertical-align: inherit;">+ </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33"><font style="vertical-align: inherit;">a </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-34"><font style="vertical-align: inherit;">, </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;">j </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-36"><font style="vertical-align: inherit;">+ </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;">b</font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-38" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"> - </font></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">g </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42"><font style="vertical-align: inherit;">a </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-43"><font style="vertical-align: inherit;">, </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;">b</font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-45"><span class="MJXp-mo" id="MJXp-Span-46" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"> ) </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-45"><span class="MJXp-mn MJXp-script" id="MJXp-Span-47" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;">2</font></span></span></span></font><span class="MJXp-mtext" id="MJXp-Span-11">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-18"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-19"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-21"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-23"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-32"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-34"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-36"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-38" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-43"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-45"><span class="MJXp-mo" id="MJXp-Span-46" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-47" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="42.005ex" height="3.142ex" viewBox="0 -987.6 18085.2 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-53" x="645" y="0"></use><g transform="translate(1291,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="3230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="4536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-75" x="5005" y="0"></use><g transform="translate(5578,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(11074,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3123" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2212" x="3714" y="0"></use><g transform="translate(4714,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="808" y="0"></use></g></g><g transform="translate(6167,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="550" y="583"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> SSD_ {i, j} = \ sum_ {a = 0..m, b = 0..n} {(f_ {i + a, j + b} - g_ {a, b}) ^ 2} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-48"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">R</span><span class="MJXp-msubsup" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-55" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">i</span><span class="MJXp-mo" id="MJXp-Span-57">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-59" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-60">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">u</span><span class="MJXp-msubsup" id="MJXp-Span-63"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-65" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">a</span><span class="MJXp-mo" id="MJXp-Span-67">=</span><span class="MJXp-mn" id="MJXp-Span-68">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">m</span><span class="MJXp-mo" id="MJXp-Span-70">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">b</span><span class="MJXp-mo" id="MJXp-Span-72">=</span><span class="MJXp-mn" id="MJXp-Span-73">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-77"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-79" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">i</span><span class="MJXp-mo" id="MJXp-Span-81">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">a</span><span class="MJXp-mo" id="MJXp-Span-83">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">j</span><span class="MJXp-mo" id="MJXp-Span-85">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">b</span></span></span><span class="MJXp-mtext" id="MJXp-Span-87">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">t</span><span class="MJXp-msubsup" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-94" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">a</span><span class="MJXp-mo" id="MJXp-Span-96">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">b</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-98"><span class="MJXp-mo" id="MJXp-Span-99" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-100" style="vertical-align: 0.5em;">2</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.846ex" height="3.142ex" viewBox="0 -987.6 20600.3 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-43" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-4F" x="1521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-52" x="2284" y="0"></use><g transform="translate(3044,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="4914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="6220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-75" x="6689" y="0"></use><g transform="translate(7262,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(12758,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3123" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="3741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-64" x="4175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6F" x="4698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-74" x="5184" y="0"></use><g transform="translate(5545,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="808" y="0"></use></g></g><g transform="translate(6998,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="550" y="583"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> CCORR_ {i, j} = \ sum_ {a = 0..m, b = 0..n} {(f_ {i + a, j + b} \ cdot g_ {a, b}) ^ 2} </script></p><br><p>  Vamos tentar aplicar a diferença de quadrados para encontrar um gatinho <br><img src="https://habrastorage.org/webt/yl/jh/rs/yljhrsjvvk02qqkppdp7tameuei.png"></p><br><p>  Na foto <br><img src="https://habrastorage.org/webt/e6/rl/er/e6rleromcb4st7cpxuisl9qsk-i.png"></p><br><p>  (foto tirada da PETA Caring for Cats). </p><br><p>  A imagem da esquerda é o valor métrico da semelhança do local na imagem com o modelo (ou seja, os valores de SSD para diferentes i, j).  A área escura é o lugar onde a diferença é mínima.  Este é um ponteiro para o local que mais se assemelha a um modelo - na figura à direita, este local é circulado. </p><br><p><img src="https://habrastorage.org/webt/6b/fe/fb/6bfefbafbzjwe710fa4yoqjvuay.png"><img src="https://habrastorage.org/webt/nn/hl/wq/nnhlwqagheaudmhfnvxk6mbwfxu.png"></p><br><p>  A correlação cruzada é na verdade uma convolução de duas imagens.  Convoluções podem ser implementadas rapidamente usando a rápida transformação de Fourier.  De acordo com o teorema da convolução, após a transformação de Fourier, a convolução se transforma em uma multiplicação elementar simples: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">R</span><span class="MJXp-msubsup" id="MJXp-Span-106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-108" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">i</span><span class="MJXp-mo" id="MJXp-Span-110">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">f</span><span class="MJXp-mtext" id="MJXp-Span-114">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">g</span><span class="MJXp-mo" id="MJXp-Span-126" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">T</span><span class="MJXp-mo" id="MJXp-Span-131" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">T</span><span class="MJXp-mo" id="MJXp-Span-135" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">f</span><span class="MJXp-mtext" id="MJXp-Span-137">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">g</span><span class="MJXp-mo" id="MJXp-Span-149" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-150" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-151" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">T</span><span class="MJXp-mo" id="MJXp-Span-156" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">T</span><span class="MJXp-mo" id="MJXp-Span-160" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">f</span><span class="MJXp-mo" id="MJXp-Span-162" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-163">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">T</span><span class="MJXp-mo" id="MJXp-Span-171" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">g</span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-174" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="90.193ex" height="2.78ex" viewBox="0 -832 38833.1 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-43" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-4F" x="1521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-52" x="2284" y="0"></use><g transform="translate(3044,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="4914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="5970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="6770" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="7204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-72" x="7549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="8001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6C" x="8434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-65" x="8733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-64" x="9199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="9723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="10252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-74" x="10722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="11083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="11842" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="12898" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="13403" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="14152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-54" x="14902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="15606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="15996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="16745" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-54" x="17495" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="18199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="18589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="19389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="19823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-72" x="20168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="20620" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6C" x="21053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-65" x="21352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-64" x="21818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="22342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="22871" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-74" x="23341" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="23702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="24183" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="24572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="25239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="26296" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="26800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="27550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-54" x="28299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="29004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="29393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="30143" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-54" x="30892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="31597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="31986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="32537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="33176" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-64" x="33610" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6F" x="34133" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-74" x="34619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="34980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-46" x="35730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-54" x="36479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="37184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="37573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="38054" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="38443" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> CCORR_ {i, j} = f \ circledast g = IFFT (FFT (f \ circledast g)) = IFFT (FFT (f) \ cdot FFT (g)) </script></p><br><p>  Onde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-175"><span class="MJXp-mtext" id="MJXp-Span-176">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.598ex" height="2.057ex" viewBox="0 -780.1 4563 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-72" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-63" x="1480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6C" x="1914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-65" x="2212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-64" x="2679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="3202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="3732" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-74" x="4201" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ circledast </script>  - operador de convolução.  Dessa forma, podemos calcular rapidamente a correlação cruzada.  Isso fornece a complexidade geral de <em>O (kllog (kl) + mnlog (mn))</em> versus <em>O (klmn)</em> quando implementado de frente.  O quadrado da diferença também pode ser realizado por convolução, pois após abrir os colchetes, ele se transformará na diferença entre a soma dos quadrados dos valores de pixel da imagem e a correlação cruzada: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-187"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">S</span><span class="MJXp-msubsup" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191" style="margin-right: 0.05em;">D</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-192" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">i</span><span class="MJXp-mo" id="MJXp-Span-194">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-196" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-197">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">u</span><span class="MJXp-msubsup" id="MJXp-Span-200"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-202" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">a</span><span class="MJXp-mo" id="MJXp-Span-204">=</span><span class="MJXp-mn" id="MJXp-Span-205">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">m</span><span class="MJXp-mo" id="MJXp-Span-207">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">b</span><span class="MJXp-mo" id="MJXp-Span-209">=</span><span class="MJXp-mn" id="MJXp-Span-210">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-212"><span class="MJXp-mo" id="MJXp-Span-213" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-214"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-216" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">i</span><span class="MJXp-mo" id="MJXp-Span-218">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">a</span><span class="MJXp-mo" id="MJXp-Span-220">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">j</span><span class="MJXp-mo" id="MJXp-Span-222">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-224" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-225"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-227" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">a</span><span class="MJXp-mo" id="MJXp-Span-229">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">b</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-231"><span class="MJXp-mo" id="MJXp-Span-232" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-233" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mo" id="MJXp-Span-234" style="margin-left: 0.333em; margin-right: 0.333em;">=</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.458ex" height="3.142ex" viewBox="0 -987.6 19141.5 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-53" x="645" y="0"></use><g transform="translate(1291,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="3230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="4536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-75" x="5005" y="0"></use><g transform="translate(5578,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(11074,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3123" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2212" x="3714" y="0"></use><g transform="translate(4714,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="808" y="0"></use></g></g><g transform="translate(6167,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="550" y="583"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="18362" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> SSD_ {i, j} = \ sum_ {a = 0..m, b = 0..n} {(f_ {i + a, j + b} - g_ {a, b}) ^ 2} = </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-235"><span class="MJXp-mo" id="MJXp-Span-236" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-237">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">u</span><span class="MJXp-msubsup" id="MJXp-Span-240"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-242" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">a</span><span class="MJXp-mo" id="MJXp-Span-244">=</span><span class="MJXp-mn" id="MJXp-Span-245">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">m</span><span class="MJXp-mo" id="MJXp-Span-247">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">b</span><span class="MJXp-mo" id="MJXp-Span-249">=</span><span class="MJXp-mn" id="MJXp-Span-250">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-252"><span class="MJXp-msubsup" id="MJXp-Span-253"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254" style="margin-right: 0.05em;">f</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-263">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">i</span><span class="MJXp-mo" id="MJXp-Span-257">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">a</span><span class="MJXp-mo" id="MJXp-Span-259">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">j</span><span class="MJXp-mo" id="MJXp-Span-261">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">b</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-264" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-265">2</span><span class="MJXp-msubsup" id="MJXp-Span-266"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-268" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">i</span><span class="MJXp-mo" id="MJXp-Span-270">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">a</span><span class="MJXp-mo" id="MJXp-Span-272">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">j</span><span class="MJXp-mo" id="MJXp-Span-274">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">b</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-278" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">a</span><span class="MJXp-mo" id="MJXp-Span-280">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-282" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284" style="margin-right: 0.05em;">g</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-289">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-285"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">a</span><span class="MJXp-mo" id="MJXp-Span-287">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">b</span></span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-290" style="margin-left: 0.333em; margin-right: 0.333em;">=</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="48.674ex" height="3.383ex" viewBox="0 -883.9 20956.9 1456.5" role="img" focusable="false" style="vertical-align: -1.33ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="1306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-75" x="1775" y="0"></use><g transform="translate(2348,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(7844,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="804" y="488"></use><g transform="translate(490,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3123" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2212" x="3324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="4325" y="0"></use><g transform="translate(4825,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3123" y="0"></use></g></g><g transform="translate(7928,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="808" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="9603" y="0"></use><g transform="translate(10603,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="680" y="488"></use><g transform="translate(477,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="808" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="20178" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> = \ sum_ {a = 0..m, b = 0..n} {f_ {i + a, j + b} ^ 2 - 2 f_ {i + a, j + b} g_ {a, b} + g_ {a, b} ^ 2} = </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-291"><span class="MJXp-mo" id="MJXp-Span-292" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-293">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">u</span><span class="MJXp-msubsup" id="MJXp-Span-296"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-298" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">a</span><span class="MJXp-mo" id="MJXp-Span-300">=</span><span class="MJXp-mn" id="MJXp-Span-301">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">m</span><span class="MJXp-mo" id="MJXp-Span-303">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">b</span><span class="MJXp-mo" id="MJXp-Span-305">=</span><span class="MJXp-mn" id="MJXp-Span-306">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-308"><span class="MJXp-msubsup" id="MJXp-Span-309"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310" style="margin-right: 0.05em;">f</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-319">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-311"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">i</span><span class="MJXp-mo" id="MJXp-Span-313">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">a</span><span class="MJXp-mo" id="MJXp-Span-315">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">j</span><span class="MJXp-mo" id="MJXp-Span-317">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">b</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-320" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-321"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322" style="margin-right: 0.05em;">g</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-327">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-323"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">a</span><span class="MJXp-mo" id="MJXp-Span-325">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">b</span></span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-328" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-329">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">O</span><span class="MJXp-msubsup" id="MJXp-Span-333"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-335" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">i</span><span class="MJXp-mo" id="MJXp-Span-337">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">j</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.646ex" height="3.383ex" viewBox="0 -883.9 19222.5 1456.5" role="img" focusable="false" style="vertical-align: -1.33ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="1306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-75" x="1775" y="0"></use><g transform="translate(2348,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(7844,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="804" y="488"></use><g transform="translate(490,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="3123" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2B" x="3324" y="0"></use><g transform="translate(4325,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="680" y="488"></use><g transform="translate(477,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-62" x="808" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2212" x="13844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-32" x="14845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-43" x="15345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-43" x="16106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-4F" x="16866" y="0"></use><g transform="translate(17630,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6A" x="624" y="0"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-7"> = \ sum_ {a = 0..m, b = 0..n} {f_ {i + a, j + b} ^ 2 + g_ {a, b} ^ 2} - 2CCOR_ {i, j} </script></p><br><p>  Detalhes podem ser vistos nesta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apresentação</a> . </p><br><p>  Vamos para a implementação.  Felizmente, colegas do departamento Nizhny Novgorod Intel cuidaram de nós ao criar a biblioteca OpenCV, ele já implementa uma pesquisa por um modelo usando o método matchTemplate (a propósito, ele usa a implementação da FFT, embora isso não seja mencionado na documentação), usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diferentes métricas de discrepância</a> : </p><br><ul><li>  CV_TM_SQDIFF - a soma dos quadrados da diferença nos valores de pixel </li><li>  CV_TM_SQDIFF_NORMED - a soma do quadrado das diferenças de cores, normalizada para o intervalo 0..1. </li><li>  CV_TM_CCORR - a soma dos produtos elemento a elemento do segmento de modelo e imagem </li><li>  CV_TM_CCORR_NORMED - a soma do elemento funciona, normalizada no intervalo -1..1. </li><li>  CV_TM_CCOEFF - correlação cruzada de imagens sem média </li><li>  CV_TM_CCOEFF_NORMED - correlação cruzada entre imagens sem média, normalizada para -1..1 (correlação de Pearson) </li></ul><br><p>  Vamos usá-los para encontrar um gatinho: </p><br><p><img src="https://habrastorage.org/webt/y8/8f/vi/y88fviifqz-jleg9frdobcnyh9s.png"></p><br><p>  Pode-se observar que apenas o TM_CCORR não lidou com sua tarefa.  Isso é compreensível: como é um produto escalar, o maior valor dessa métrica será ao comparar um modelo com um retângulo branco. </p><br><p>  Você pode perceber que essas métricas exigem a correspondência de padrões pixel por pixel na imagem desejada.  Qualquer desvio de gama, luz ou tamanho resultará em métodos não funcionando.  Deixe-me lembrá-lo de que esse é exatamente o nosso caso: os botões podem ter tamanhos e cores diferentes. </p><br><p>  O problema de cores e luzes diferentes pode ser resolvido aplicando um filtro de detecção de borda.  Esse método deixa apenas informações sobre onde na imagem houve mudanças nítidas de cor.  Vamos aplicar o Canny Edge Detector (vamos analisá-lo um pouco mais) nos botões de diferentes cores e brilho.  À esquerda, os banners originais e à direita, o resultado da aplicação do filtro Canny. </p><br><p><img src="https://habrastorage.org/webt/bi/dq/wq/bidqwqba0as5nqgbcfkxgkkibvu.png"></p><br><p>  No nosso caso, também há um problema de tamanhos diferentes, mas ele já foi resolvido.  A transformação log-polar transforma uma imagem em um espaço no qual o zoom e a rotação aparecerão como um deslocamento.  Usando essa transformação, podemos restaurar a escala e o ângulo.  Depois disso, ao dimensionar e girar o modelo, você pode encontrar a posição do modelo na imagem original.  Você também pode usar a FFT em todo este procedimento, conforme descrito em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Uma técnica baseada</a> em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FFT para tradução, rotação e registro de imagens invariáveis ​​em escala</a> .  Na literatura, o caso é considerado quando os padrões horizontal e vertical são alterados proporcionalmente, enquanto o fator de escala varia dentro de pequenos limites (2,0 ... 0,8).  Infelizmente, o redimensionamento de um botão pode ser grande e desproporcional, o que pode levar a um resultado incorreto. </p><br><p>  Aplicamos a construção resultante (filtro Canny, restaurando apenas a escala através da transformação log-polar, obtendo a posição através da localização do local com a discrepância quadrática mínima), para encontrar o botão em três figuras.  Usaremos o grande botão amarelo como modelo: </p><br><p><img src="https://habrastorage.org/webt/lb/07/vf/lb07vfkchqexignjqteoi7iilek.png"></p><br><p>  Ao mesmo tempo, os botões nos banners serão de diferentes tipos, cores e tamanhos: </p><br><p><img src="https://habrastorage.org/webt/nz/wv/mj/nzwvmjpywnjdcicgjk1r7qinq5q.png"></p><br><p>  No caso de redimensionar o botão, o método não funcionou corretamente.  Isso se deve ao fato de o método envolver o redimensionamento de botões no mesmo número de vezes na horizontal e na vertical.  No entanto, esse nem sempre é o caso.  Na imagem certa, o tamanho do botão não mudou na vertical, mas na horizontal diminuiu bastante.  Se o redimensionamento for muito grande, as distorções causadas pela transformação log-polar tornam a pesquisa instável.  Nesse sentido, o método não pôde detectar o botão no terceiro caso. </p><br><h1 id="keypoint-detection">  Detecção de ponto-chave </h1><br><p>  Você pode tentar uma abordagem diferente: em vez de procurar o botão inteiro, vamos encontrar suas partes típicas, por exemplo, os cantos do botão ou os elementos da borda (há um traço decorativo ao longo do contorno do botão).  Parece que encontrar cantos e bordas é mais fácil, pois esses são objetos pequenos (e, portanto, simples).  O que fica entre os quatro cantos e a borda será um botão.  A classe de métodos para encontrar pontos-chave é chamada “detecção de ponto-chave”, e os algoritmos para comparar e procurar imagens usando pontos-chave são chamados “correspondência de ponto-chave”.  A pesquisa de um padrão em uma imagem reduz a aplicação de um algoritmo para detectar pontos-chave em um padrão e em uma imagem e a comparação de pontos-chave de um padrão e uma imagem. </p><br><p>  Normalmente, os "pontos-chave" são automaticamente encontrados ao encontrar pixels cujo ambiente possui determinadas propriedades.  Muitos métodos e critérios para encontrá-los foram inventados.  Todos esses algoritmos são heurísticas que encontram alguns elementos característicos da imagem, como ângulos de regra ou mudanças nítidas de cor.  Um bom detector deve funcionar rapidamente e ser resistente a transformações de imagem (ao alterar a imagem, os pontos principais não devem deixar de ser / se mover). </p><br><h2 id="harris-corner-detector">  Harris corner detector </h2><br><p>  Um dos algoritmos mais básicos é o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">detector de canto Harris</a> .  Para a foto (daqui em diante consideramos que estamos operando com “intensidade” - uma imagem traduzida em escala de cinza), ele tenta encontrar pontos nas proximidades dos quais as diferenças de intensidade são maiores que um determinado limite.  O algoritmo é assim: </p><br><ol><li><p>  De intensidade <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-339"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">I</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.172ex" height="2.057ex" viewBox="0 -780.1 504.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> I </script>  são derivadas ao longo dos eixos x e y ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-341"><span class="MJXp-msubsup" id="MJXp-Span-342"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-344" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> I_x </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-345"><span class="MJXp-msubsup" id="MJXp-Span-346"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-348" style="vertical-align: -0.4em;">y</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.072ex" height="2.66ex" viewBox="0 -780.1 892.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-79" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> I_y </script>  respectivamente).  Eles podem ser encontrados, por exemplo, aplicando o filtro Sobel. </p><br></li><li><p>  Para um pixel, considere o quadrado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-349"><span class="MJXp-msubsup" id="MJXp-Span-350"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-352" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> I_x </script>  quadrado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-353"><span class="MJXp-msubsup" id="MJXp-Span-354"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-356" style="vertical-align: -0.4em;">y</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.072ex" height="2.66ex" viewBox="0 -780.1 892.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-79" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> I_y </script>  e trabalha <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-357"><span class="MJXp-msubsup" id="MJXp-Span-358"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-360" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> I_x </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-361"><span class="MJXp-msubsup" id="MJXp-Span-362"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-364" style="vertical-align: -0.4em;">y</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.072ex" height="2.66ex" viewBox="0 -780.1 892.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-79" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> I_y </script>  .  Algumas fontes os rotulam como <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-365"><span class="MJXp-msubsup" id="MJXp-Span-366"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-368" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">x</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.136ex" height="2.419ex" viewBox="0 -780.1 1350.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="572" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-15"> I_ {xx} </script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-371"><span class="MJXp-msubsup" id="MJXp-Span-372"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-374" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">y</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.013ex" height="2.66ex" viewBox="0 -780.1 1297.1 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-79" x="572" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-16"> I_ {xy} </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-377"><span class="MJXp-msubsup" id="MJXp-Span-378"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-380" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">y</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.013ex" height="2.66ex" viewBox="0 -780.1 1297.1 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-79" x="572" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-17"> I_ {xy} </script>  - o que não acrescenta clareza, pois se pode pensar que essas são as segundas derivadas da intensidade (e não é assim). </p><br></li><li><p>  Para cada pixel, consideramos as somas em um determinado bairro (mais de 1 pixel) com as seguintes características: </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-383"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">A</span><span class="MJXp-mo" id="MJXp-Span-385" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-386">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">u</span><span class="MJXp-msubsup" id="MJXp-Span-389"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-391" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">x</span><span class="MJXp-mo" id="MJXp-Span-393">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">y</span></span></span><span class="MJXp-mrow" id="MJXp-Span-395"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">w</span><span class="MJXp-mo" id="MJXp-Span-397" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">x</span><span class="MJXp-mo" id="MJXp-Span-399" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">y</span><span class="MJXp-mo" id="MJXp-Span-401" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-402"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-404" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-msubsup" id="MJXp-Span-405"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-407" style="vertical-align: -0.4em;">x</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.713ex" height="2.78ex" viewBox="0 -832 10209.9 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-3D" x="1028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-73" x="2334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-75" x="2804" y="0"></use><g transform="translate(3376,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-79" x="851" y="0"></use></g></g><g transform="translate(5308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-77" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-28" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-2C" x="1678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-79" x="2123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMAIN-29" x="2621" y="0"></use><g transform="translate(3010,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="622" y="-213"></use></g><g transform="translate(3955,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;usg=ALkJrhhe7vQW-vagLmhKa3OFaIrggrC29g#MJMATHI-78" x="622" y="-213"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-18"> A = \ sum_ {x, y} {w (x, y) I_xI_x} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-408"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">B</span><span class="MJXp-mo" id="MJXp-Span-410" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-411">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">u</span><span class="MJXp-msubsup" id="MJXp-Span-414"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-416" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">x</span><span class="MJXp-mo" id="MJXp-Span-418">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">y</span></span></span><span class="MJXp-mrow" id="MJXp-Span-420"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">w</span><span class="MJXp-mo" id="MJXp-Span-422" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">x</span><span class="MJXp-mo" id="MJXp-Span-424" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">y</span><span class="MJXp-mo" id="MJXp-Span-426" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-427"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-429" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-msubsup" id="MJXp-Span-430"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-432" style="vertical-align: -0.4em;">y</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-19"> B = \ sum_ {x, y} {w (x, y) I_xI_y} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-433"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">C</span><span class="MJXp-mo" id="MJXp-Span-435" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-436">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">u</span><span class="MJXp-msubsup" id="MJXp-Span-439"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-441" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">x</span><span class="MJXp-mo" id="MJXp-Span-443">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">y</span></span></span><span class="MJXp-mrow" id="MJXp-Span-445"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">w</span><span class="MJXp-mo" id="MJXp-Span-447" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">x</span><span class="MJXp-mo" id="MJXp-Span-449" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">y</span><span class="MJXp-mo" id="MJXp-Span-451" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-452"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-454" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-msubsup" id="MJXp-Span-455"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-457" style="vertical-align: -0.4em;">y</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-20"> C = \ sum_ {x, y} {w (x, y) I_yI_y} </script></p><br>  Como na Detecção de gabarito, esse procedimento para janelas grandes pode ser realizado com eficiência usando o teorema da convolução. <br></li><li><p>  Para cada pixel, calcule o valor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-458"><span class="MJXp-msubsup" id="MJXp-Span-459"><span class="MJXp-mi" id="MJXp-Span-460" style="margin-right: 0.05em;"></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-461" style="vertical-align: 0.5em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> ^ \ estrela </script>  heurística R </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-469"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">R</span><span class="MJXp-mo" id="MJXp-Span-471" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">t</span><span class="MJXp-mo" id="MJXp-Span-475" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">H</span><span class="MJXp-mo" id="MJXp-Span-477" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-478" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">k</span><span class="MJXp-mo" id="MJXp-Span-480" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">r</span><span class="MJXp-mo" id="MJXp-Span-483" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">H</span><span class="MJXp-mo" id="MJXp-Span-485" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-486"><span class="MJXp-mo" id="MJXp-Span-487" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-488" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-489" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-490" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">B</span><span class="MJXp-mo" id="MJXp-Span-493" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-494"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-496" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-497" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-498" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">k</span><span class="MJXp-mo" id="MJXp-Span-500" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">A</span><span class="MJXp-mo" id="MJXp-Span-502" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">B</span><span class="MJXp-msubsup" id="MJXp-Span-504"><span class="MJXp-mo" id="MJXp-Span-505" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-506" style="vertical-align: 0.5em;">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-22"> R = Det (H) - k (Tr (H)) ^ 2 = (AB - C ^ 2) - k (A + B) ^ 2 </script></p><br>  Valor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-507"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> k </script>  selecionado empiricamente no intervalo [0,04, 0,06] <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-509"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> R </script>  algum pixel tem um certo limite, então a vizinhança <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-511"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512">w</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> w </script>  esse pixel contém um ângulo e o marcamos como um ponto-chave. <br></li><li><p>  A fórmula anterior pode criar agrupamentos de pontos-chave próximos um do outro, caso em que vale a pena removê-los.  Isso pode ser feito verificando para cada ponto se ele tem um valor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-513"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> R </script>  máximo entre vizinhos imediatos.  Caso contrário, o ponto principal é filtrado.  Este procedimento é chamado <em>de supressão não máxima</em> . </p><br></li></ol><br><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-515"><span class="MJXp-mtext" id="MJXp-Span-516">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-517">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-519">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-520">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> \ estrela </script>  Formula <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-524"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> R </script>  então escolhido por uma razão. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-526"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">A</span><span class="MJXp-mo" id="MJXp-Span-528" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">B</span><span class="MJXp-mo" id="MJXp-Span-530" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">C</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> A, B, C </script>  - componentes do tensor estrutural - matriz que descreve o comportamento do gradiente na vizinhança: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-532"><span class="noError" id="MJXp-Span-533" style="display: inline-block;">H&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;A&nbsp;&amp;&nbsp;C&nbsp;\\&nbsp;C&nbsp;&amp;&nbsp;B&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-30"> H = \ begin {pmatrix} A & C \\ C & B \ end {pmatrix} </script></p><br><p>  Essa matriz é semelhante em muitos aspectos à sua matriz de covariância.  Por exemplo, ambas são matrizes positivamente semidefinidas, mas a semelhança não se limita a isso.  Deixe-me lembrá-lo de que a matriz de covariância possui uma interpretação geométrica.  Os autovetores da matriz de covariância indicam as direções da maior variância dos dados de origem (nos quais a covariância foi calculada), e os autovalores indicam a dispersão ao longo do eixo: </p><br><p><img src="https://habrastorage.org/webt/y7/yv/g1/y7yvg148wkaold6x0scnqffqq1m.png"></p><br><p>  Imagem retirada de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://www.visiondummy.com/2014/04/geometric-interpretation-covariance-matrix/</a> </p><br><p>  Os autovalores do tensor estrutural também se comportam da mesma maneira: descrevem a dispersão dos gradientes.  Em uma superfície plana, os valores próprios do tensor estrutural serão pequenos (porque a dispersão dos gradientes em si será pequena).  Os autovalores do tensor estrutural construído em uma parte de uma imagem com uma face variam muito: um número será grande (e corresponderá ao seu próprio vetor direcionado perpendicularmente à face) e o segundo será pequeno.  No tensor angular, os dois valores próprios serão grandes.  Com base nisso, podemos criar uma heurística ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-534"><span class="MJXp-mtext" id="MJXp-Span-535">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-539">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-540">d</span><span class="MJXp-msubsup" id="MJXp-Span-541"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-543" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-544" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-545">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">d</span><span class="MJXp-msubsup" id="MJXp-Span-551"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-553" style="vertical-align: -0.4em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> \ lambda_1, \ lambda_2 </script>  São os autovalores do tensor estrutural). </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-554"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">R</span><span class="MJXp-mo" id="MJXp-Span-556" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-557">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">d</span><span class="MJXp-msubsup" id="MJXp-Span-563"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-564" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-565" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mtext" id="MJXp-Span-566">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">d</span><span class="MJXp-msubsup" id="MJXp-Span-572"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-574" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-575" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-576">k</span><span class="MJXp-mo" id="MJXp-Span-577" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-578">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-579">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">d</span><span class="MJXp-msubsup" id="MJXp-Span-584"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-586" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-587" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-588">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-591">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-592">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-593">d</span><span class="MJXp-msubsup" id="MJXp-Span-594"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-595" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-596" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-597"><span class="MJXp-mo" id="MJXp-Span-598" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-599" style="vertical-align: 0.5em;">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-32"> R = \ lambda_1 \ lambda_2 - k (\ lambda_1 + \ lambda_2) ^ 2 </script></p><br><p>  O valor dessa heurística será grande quando os dois valores próprios forem grandes. </p><br><p>  A soma dos valores próprios é o traço da matriz, que pode ser calculada como a soma dos elementos na diagonal (e se você observar as fórmulas A e B, fica claro que essa também é a soma dos quadrados dos comprimentos dos gradientes na região): </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-600"><span class="MJXp-mtext" id="MJXp-Span-601">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606">d</span><span class="MJXp-msubsup" id="MJXp-Span-607"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-608" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-609" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-610" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-611">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-612">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-613">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-615">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">d</span><span class="MJXp-msubsup" id="MJXp-Span-617"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-618" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-619" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-620" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-622">r</span><span class="MJXp-mo" id="MJXp-Span-623" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624">H</span><span class="MJXp-mo" id="MJXp-Span-625" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-626" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">A</span><span class="MJXp-mo" id="MJXp-Span-628" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629">B</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-33"> \ lambda_1 + \ lambda_2 = Tr (H) = A + B </script></p><br><p>  O produto de autovalores é o determinante de uma matriz, que também é fácil de escrever no caso de 2x2: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-630"><span class="MJXp-mtext" id="MJXp-Span-631">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-632">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-634">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-636">d</span><span class="MJXp-msubsup" id="MJXp-Span-637"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-639" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mtext" id="MJXp-Span-640">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-644">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-645">d</span><span class="MJXp-msubsup" id="MJXp-Span-646"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-647" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-648" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-649" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-650">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">t</span><span class="MJXp-mo" id="MJXp-Span-653" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-654">H</span><span class="MJXp-mo" id="MJXp-Span-655" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-656" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-658">B</span><span class="MJXp-mo" id="MJXp-Span-659" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-660"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-661" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-662" style="vertical-align: 0.5em;">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-34"> \ lambda_1 \ lambda_2 = Det (H) = AB - C ^ 2 </script></p><br><p>  Assim, podemos calcular efetivamente <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-663"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> R </script>  , expressando-o em termos dos componentes do tensor estrutural. </p><br><h2 id="fast">  Rápido </h2><br><p>  O método de Harris é bom, mas existem muitas alternativas.  Não consideraremos tudo da mesma maneira que o método acima, mencionaremos apenas alguns populares para mostrar truques interessantes e compará-los em ação. </p><br><p><img src="https://habrastorage.org/webt/k5/4e/a1/k54ea1vfb82j0lsk6o-xhngk0cw.png"><br>  Pixels verificados pelo algoritmo FAST </p><br><p>  Uma alternativa ao método de Harris é o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FAST</a> .  Como o nome sugere, o FAST é muito mais rápido que o método acima.  Esse algoritmo tenta encontrar os pontos que ficam nas bordas e nos cantos dos objetos, ou seja,  em lugares de diferença de contraste.  Sua localização é a seguinte: FAST constrói um círculo de raio R em torno do pixel candidato e verifica se ele possui um segmento contínuo de pixels de comprimento t que é mais escuro (ou mais claro) do pixel candidato por K unidades.  Se essa condição for atendida, o pixel será considerado um "ponto chave".  Para certos t, podemos implementar essa heurística com eficiência, adicionando algumas verificações preliminares que cortam os pixels que são garantidos como não-cantos.  Por exemplo, quando <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-665"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">R</span><span class="MJXp-mo" id="MJXp-Span-667" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-668">3</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> R = 3 </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-669"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">t</span><span class="MJXp-mo" id="MJXp-Span-671" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-672">12</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> t = 12 </script>  , basta verificar se há 3 pixels consecutivos entre os 4 pixels extremos que são estritamente mais escuros / claros que o centro de K (na imagem - 1, 5, 9, 13).  Essa condição permite excluir efetivamente os candidatos que definitivamente não são pontos-chave. </p><br><h2 id="sift">  SIFT </h2><br><p>  Ambos os algoritmos anteriores não são resistentes ao redimensionamento da imagem.  Eles não permitem encontrar um modelo na imagem se a escala do objeto tiver sido alterada.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SIFT</a> (transformação de recurso invariável em escala) oferece uma solução para esse problema.  Pegue a imagem da qual extraímos os pontos-chave e comece a reduzir gradualmente seu tamanho com um pequeno passo, e para cada opção de escala, encontraremos os pontos-chave.  Escalar é um procedimento difícil, mas reduzi-lo em 2/4/8 / ... vezes pode ser feito com eficiência pulando pixels (no SIFT, essas múltiplas escalas são chamadas de "oitavas").  As escalas intermediárias podem ser aproximadas aplicando um bluer gaussiano com um tamanho de núcleo diferente à imagem.  Como descrito acima, isso pode ser feito computacionalmente com eficiência.  O resultado será parecido se primeiro reduzíssemos a imagem e a ampliassemos para o tamanho original - pequenos detalhes são perdidos, a imagem fica "borrada". </p><br><p><img src="https://habrastorage.org/webt/p3/tn/ao/p3tnao1rjzyg9q6sbhtlttktf_q.png"></p><br><p>  Após este procedimento, calculamos a diferença entre escalas vizinhas.  Valores grandes (em valor absoluto) nessa diferença resultarão se alguns pequenos detalhes deixarem de ser visíveis no próximo nível de escala ou, inversamente, o próximo nível de escala começará a capturar uma parte que não era visível no anterior.  Essa técnica é chamada de Dog, Diferença de Gaussiana.  Podemos supor que a grande importância dessa diferença já é um sinal de que há algo interessante neste local na imagem.  Mas estamos interessados ​​na escala em que esse ponto-chave será mais expressivo.  Para fazer isso, consideraremos um ponto-chave não apenas como um ponto que difere de seus arredores, mas também que difere mais fortemente entre diferentes escalas de imagem.  Em outras palavras, escolheremos um ponto-chave não apenas no espaço X e Y, mas no espaço <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-673"><span class="MJXp-mo" id="MJXp-Span-674" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-675">X</span><span class="MJXp-mo" id="MJXp-Span-676" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">Y</span><span class="MJXp-mo" id="MJXp-Span-678" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-682">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-683">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">a</span><span class="MJXp-mo" id="MJXp-Span-685" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> (X, Y, Escala) </script>  .  No SIFT, isso é feito encontrando pontos no DoG (Diferença de Gaussianos), que são altos ou baixos locais em <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-686"><span class="MJXp-mn" id="MJXp-Span-687">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688">x</span><span class="MJXp-mn" id="MJXp-Span-689">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">x</span><span class="MJXp-mn" id="MJXp-Span-691">3</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> 3x3x3 </script>  cubo de espaço <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-692"><span class="MJXp-mo" id="MJXp-Span-693" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">X</span><span class="MJXp-mo" id="MJXp-Span-695" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696">Y</span><span class="MJXp-mo" id="MJXp-Span-697" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-698">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-699">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-700">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-701">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-702">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703">a</span><span class="MJXp-mo" id="MJXp-Span-704" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> (X, Y, Escala) </script>  ao seu redor: </p><br><p><img src="https://habrastorage.org/webt/bd/zk/gd/bdzkgddgrifmsizaxknwzbrbboy.png"></p><br><p>  Algoritmos para encontrar pontos-chave e construir descritores SIFT e SURF são patenteados.  Ou seja, para uso comercial é necessário obter uma licença.  É por isso que eles não estão disponíveis no pacote opencv principal, mas apenas em um pacote opencv_contrib separado.  No entanto, até agora nossa pesquisa é puramente acadêmica por natureza, portanto, nada nos impede de participar do SIFT em comparação. </p><br><h2 id="deskriptory">  Descritores </h2><br><p>  Vamos tentar aplicar algum tipo de detector (por exemplo, Harris) ao modelo e à imagem. </p><br><p><img src="https://habrastorage.org/webt/dl/jy/t9/dljyt9d6ngfzvnom-mx1_wt1uh4.png"><img src="https://habrastorage.org/webt/fx/cv/p5/fxcvp5gfb55nzpmfkpvn6jllyiq.png"></p><br><p>  Depois de encontrar os pontos principais na figura e no modelo, é necessário compará-los de alguma forma.  Deixe-me lembrá-lo que até agora extraímos apenas as posições dos pontos-chave.  O que esse ponto significa (por exemplo, em qual direção o ângulo encontrado é direcionado), ainda não determinamos.  E essa descrição pode ajudar ao comparar pontos e padrões de imagem entre si.  Alguns dos pontos do modelo na imagem podem ser alterados por distorções, cobertas por outros objetos, portanto confiar apenas na posição dos pontos em relação um ao outro parece não confiável.  Portanto, vamos dar uma vizinhança para cada ponto-chave para criar uma certa descrição (descritor), o que nos permite pegar alguns pontos (um ponto do modelo, um da imagem) e comparar sua semelhança. </p><br><h3 id="brief">  BREVE </h3><br><p>         (..   0  1),       ,  XOR  ,      .    ? ,    N      . ,  i-  ,      ,    —   i-    1.        N.            -     (,   —   ),       :       ,    “”.  ,       (       ).      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BRIEF</a> . </p><br><p><img src="https://habrastorage.org/webt/ua/su/sh/uasushvojprrhmms6vfjhxhxwsc.png"><br>      .      .  ,   GII     . </p><br><p>  ,    ,    (..        ,    ,  ).    OpenCV        <a href=""></a> . </p><br><h3 id="deskriptor-sift">  SIFT </h3><br><p> SIFT     ,          .    SIFT   1616   ,      44 .      (       ,      ).       8    (, -, ,  ..).       —  8 ,     ,     .        . ,     8-   .         128 (  4*4 = 16 ,    8 ).      . </p><br><h3 id="sravnenie">  Comparação </h3><br><p>          ( —   ,      ),  -     : </p><br><p><img src="https://habrastorage.org/webt/qx/er/fs/qxerfsd6yqjzlxroadwnhveb3am.png"></p><br><p>   —            .      ? </p><br><p> ,    .      ,        ,     .  ,     ,      ,    ,    .         ?   BRIEF,          ,        ,      .  ,  BRIEF  1/16    .  SIFT    — -   1/4    . </p><br><p>         SIFT. </p><br><h2 id="sravnenie-detektorov">   </h2><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora aplicamos todo o conhecimento adquirido para resolver nosso problema. </font><font style="vertical-align: inherit;">No nosso caso, os requisitos para o detector de ponto-chave são suficientes: não precisamos de invariância para redimensionar, além de desempenho extremamente alto. </font><font style="vertical-align: inherit;">Compare todos os três detectores.</font></font></p><br><table><thead><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Harris corner detector </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rápido </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SIFT </font></font></th></tr></thead><tbody><tr><td> <a href=""><img src="https://habrastorage.org/webt/-a/bs/dk/-absdkxkvccrzrfa6t0i8arpc_e.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/pa/dl/lk/padllkwce61vmi9t3vv5hskhyv0.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/lu/3d/i-/lu3di-b7fxf3graaaxqsumerpd8.png"></a> </td></tr><tr><td> <a href=""><img src="https://habrastorage.org/webt/6_/6k/5l/6_6k5lr13o0urqqmnbnap3cbb4i.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/vn/i9/hq/vni9hq6ozwaheetajhu6dk-3ckk.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/ch/cr/dq/chcrdqlia0fjz18fmv0clf0bz-a.png"></a> </td></tr><tr><td> <a href=""><img src="https://habrastorage.org/webt/do/as/hs/doashsborvmicatlqa5tdfqfuxc.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/m9/qj/ii/m9qjiitzdkekcwv1kj7gywfjcp8.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/dg/u9/2_/dgu92__jquo-geofs1exakj0vj0.png"></a> </td></tr></tbody></table><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIFT encontrou extremamente poucos pontos-chave no botão. </font><font style="vertical-align: inherit;">Isso é compreensível - o botão é um objeto bastante pequeno e plano, e o zoom não ajuda a encontrar pontos-chave.</font></font></p><br><p> Além disso, nem um único detector gerenciava o terceiro caso.  Isso é explicável e esperado.  Normalmente, os métodos acima são usados ​​para encontrar um objeto de um modelo em uma imagem onde ele pode ser parcialmente oculto, girado ou ligeiramente distorcido.  No nosso caso, queremos encontrar não <em>exatamente o mesmo objeto</em> , mas <em>um objeto que seja bastante semelhante ao modelo (botão)</em> .  Esta é uma tarefa ligeiramente diferente.  Portanto, alterar a forma do botão em si (por exemplo, o raio de arredondamento dos cantos ou a espessura da moldura dos pontos) altera os pontos principais neles e seus descritores.  Além disso, os pontos principais estarão localizados no canto do botão.  Devido à posição na borda, os pontos serão instáveis: sua localização exata e descritores são afetados pelo que é desenhado ao lado do botão. </p><br><p>  Conclusão - o método é bom e atende corretamente a situações em que o objeto desejado é girado, seu tamanho é alterado ou o objeto é parcialmente oculto (o que é bom para encontrar objetos complexos ou um preço, por exemplo).  No entanto, se houver poucos pontos no objeto que possam ser "capturados" ou a forma do objeto mudar muito, os pontos principais e eles no modelo e na imagem poderão não coincidir.  Além disso, um plano de fundo com muitos pequenos detalhes pode mudar os "pontos-chave" ou alterar seus descritores. </p><br><p>  Podemos criar uma correspondência que use as coordenadas dos pontos principais.  Em vez de procurar pares de pontos no modelo e na imagem, cuja vizinhança é semelhante, você pode procurar por esses conjuntos de pontos, a interposição dos pontos-chave no modelo e na imagem será semelhante.  No caso geral, essa é uma tarefa bastante complicada (tanto computacional quanto do ponto de vista da programação), especialmente em uma situação em que alguns pontos podem ser alterados ou ausentes.  Mas, dado que temos pontos-ângulos-chave, é suficiente encontrarmos grupos que formarão aproximadamente um retângulo das proporções desejadas e dentro dos quais não haverá pontos-chave.  Gradualmente, chegamos ao seguinte método: </p><br><h1 id="contour-detection">  Detecção de contorno </h1><br><p>  Normalmente, um botão é algum tipo de objeto retangular (às vezes com cantos arredondados), cujos lados são paralelos aos eixos das coordenadas.  Então, vamos tentar distinguir as zonas de diferença de contraste (arestas) e, entre elas, encontraremos faces cujos contornos são semelhantes ao contorno do objeto de que precisamos.  Este método é chamado detecção de contorno. </p><br><h2 id="edge-detection">  Detecção de borda </h2><br><p>  Ao contrário da detecção de ponto-chave, estamos interessados ​​não apenas em ângulos de ponto-chave, mas também em arestas.  No entanto, as idéias básicas que podemos tirar daí.  Alise a imagem com um filtro gaussiano e como no detector de canto Harris.  Então calculamos as derivadas da intensidade <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-705"><span class="MJXp-msubsup" id="MJXp-Span-706"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-707" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-708" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> I_x </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-709"><span class="MJXp-msubsup" id="MJXp-Span-710"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-711" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I de </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-712" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> I_y </script>  .  Como não precisamos distinguir ângulos de arestas, não precisamos considerar o tensor estrutural - basta calcular a força do gradiente: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-713"><span class="MJXp-msubsup" id="MJXp-Span-714"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-716" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-717" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-718"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-719" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font></span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-721"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-720"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-722" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-723"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font></span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-726"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-725"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></span></span></span></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> I_l = I_x ^ 2 + I_y ^ 2 </script>  (a propósito, essa é a raiz do <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-727"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-728"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r </font></font></span><span class="MJXp-mo" id="MJXp-Span-730" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H </font></font></span><span class="MJXp-mo" id="MJXp-Span-732" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> Tr (H) </script>  ou da soma da diagonal do tensor estrutural).  Depois disso, deixamos apenas os pixels que são máximos locais em termos de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-733"><span class="MJXp-msubsup" id="MJXp-Span-734"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-736" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> I_l </script>  (usando a supressão não máxima já considerada), mas como local, escolheremos não 8 pixels vizinhos, mas esses pixels desses 8, para os quais eu estou direcionado, e do lado oposto: </p><br><p><img src="https://habrastorage.org/webt/au/vm/v7/auvmv7glpynxvkwwg8thg2yfyze.png"></p><br><p>  O pixel em questão é azul, a seta é a direção I. Os pixels verdes são aqueles que serão levados em consideração durante a supressão não máxima. </p><br><p>  Uma escolha tão incomum de pixels para comparação se deve ao fato de que não queremos abrir espaços na borda.  Na figura da esquerda, a face vai de cima para baixo e, como a supressão não máxima não compara as intensidades com os pixels acima e abaixo do azul, obtemos uma face contínua. </p><br><p>  Obviamente, uma supressão não máxima não é suficiente, e você precisa aplicar algum tipo de filtragem para remover arestas com um valor muito baixo de IL.  Para fazer isso, aplicamos a técnica de “duplo limiar”: removemos todos os pixels com Il, com uma intensidade de gradiente abaixo do limiar baixo, e atribuímos todos os pixels acima do limiar alto como “bordas fortes”.  Os pixels nos quais a intensidade do gradiente se encontra entre Baixa e Alta serão chamados de "bordas fracas"; só os deixamos se estiverem conectados a "bordas fortes": </p><br><p><img src="https://habrastorage.org/webt/cx/qt/kb/cxqtkbtz7qhbyv69raqyqxbxhs4.png"></p><br><p>  Azul claro indica "costelas fracas", azul escuro - forte.  As nervuras na parte inferior são peneiradas, uma vez que não estão conectadas a nenhuma nervura forte. </p><br><p>  Acabamos de descrever o Canny Edge Detector.  É amplamente utilizado até hoje como um procedimento simples e rápido que permite encontrar os contornos dos objetos. </p><br><h2 id="border-tracking">  Rastreamento de fronteira </h2><br><p>  A próxima ação é selecionar os contornos no mapa com as faces encontradas.  Encontre os componentes relacionados (ilhas de pixels adjacentes que passaram em todas as verificações) e verifique cada um deles quanto parece um botão.  Depois de aplicar a supressão não máxima no Canny, temos garantias de que as bordas terão um pixel de espessura, mas vamos confiar nisso.  Para cada pixel que foi atribuído a uma face e próximo ao qual existe um pixel sem face, atribuímos a uma "borda".  Movendo-se de um pixel da borda para outro, voltamos ao mesmo pixel (e encontramos o caminho) ou a um beco sem saída (então você pode tentar voltar se houver uma bifurcação em algum lugar ao longo do caminho): </p><br><p><img src="https://habrastorage.org/webt/iz/jj/i_/izjji_u52eu0h9aj-iphph2fjs4.png"></p><br><p>  O algoritmo de rastreamento de borda completa, levando em consideração diferentes casos de borda (por exemplo, quando um objeto com uma face espessa gerou dois contornos, interno e externo), é descrito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Depois de aplicar esse algoritmo, teremos um conjunto de contornos que podem ser botões. </p><br><h2 id="filtraciya-konturov">  Filtragem de caminho </h2><br><p>  Como saber que nosso circuito é um botão?  Para retângulos e polígonos, existe um excelente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">método</a> baseado na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">simplificação do contorno</a> .  É o suficiente para "desmoronar" gradualmente as costelas, se estiverem quase em linha reta, e depois calcular o número de costelas restantes e verificar os ângulos entre elas.  Infelizmente, para o nosso caso, esses métodos não são adequados - nosso retângulo possui cantos arredondados.  Além disso, há <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">correspondência de contorno</a> para figuras com geometria complexa - mas isso também não é sobre nós, pois temos apenas um retângulo (exemplos com um esboço humano são dados no artigo).  Portanto, é melhor criar um filtro com base nas propriedades da própria figura.  Sabemos que: </p><br><ul><li>  O botão é grande o suficiente (área com mais de 100 pixels) </li><li>  Os lados são paralelos aos eixos de coordenadas </li><li>  A proporção da área da figura para a área do retângulo delimitador deve estar bastante próxima da unidade.  Definimos o limite como 0,8, pois o botão é um retângulo com lados paralelos aos eixos das coordenadas e os 20% ausentes são os cantos arredondados. </li></ul><br><p>  Além disso, a partir da experiência de usar detectores de ponto principal, lembramos que pode haver problemas com situações em que há um objeto de contraste sob o botão.  Portanto, depois de aplicar o Canny, desfocamos as bordas para fechar pequenos orifícios que possam surgir desses objetos. </p><br><p>  Aplicamos a abordagem resultante: </p><br><p><img src="https://habrastorage.org/webt/2t/29/if/2t29ify9hc0vz1qtj55whhu7npi.png"></p><br><p>  O aplicativo de filtro Canny (figura 2) encontrou a forma necessária, mas devido à forma complexa do botão e ao gradiente, muitos contornos foram encontrados ao mesmo tempo e, devido à supressão não máxima, alguns deles não foram fechados.  A aplicação de desfoque (3 fotos) resolveu o problema. </p><br><h1 id="testirovanie-podhoda">  Abordagem de teste </h1><br><p>  Execute a pesquisa de contornos na imagem resultante.  Pinte os contornos que passaram no teste em vermelho.  Se houver vários deles, precisamos escolher a opção mais bem-sucedida entre eles.  Selecionamos o contorno da maior área e pintamos em verde. </p><br><p>  | <img src="https://habrastorage.org/webt/bi/ku/ls/bikuls_blki6of3jtlyhuuffino.png">  | <img src="https://habrastorage.org/webt/bp/mt/wp/bpmtwpq00xs7zbcjp4gpwsgk6ei.png">  | <img src="https://habrastorage.org/webt/ie/kl/ts/iekltsc8zyvnbha0f3lce22505g.png">  | </p><br><p>  O design resultante encontrou botões nas imagens de teste.  Uma execução em todos os banners mostrou que, ocasionalmente (1 caso entre ~ 20), em vez de um botão, ele seleciona dados retangulares da iOS Appstore e Google Apps, ou outros objetos retangulares (casos de telefone).  Portanto, adicionando a capacidade de indicar manualmente a posição naquele raro caso de uma determinação incorreta, implementamos essa opção na ferramenta de localização. </p><br><h1 id="zaklyuchenie">  Conclusão </h1><br><p>  Para resumir.  O currículo “clássico” sem aprendizado profundo ainda funciona e, com base nele, você pode resolver problemas.  Eles são despretensiosos e não requerem uma grande quantidade de dados marcados, hardware poderoso e são mais fáceis de depurar.  No entanto, eles introduzem suposições adicionais e, portanto, com a ajuda deles, nem todos os problemas podem ser resolvidos com eficácia. </p><br><ul><li>  <strong>A correspondência de modelo</strong> é a maneira mais fácil, com base na localização de um local na imagem que seja mais semelhante (por alguma métrica simples) a um modelo.  Eficaz com correspondência pixel por pixel.  Pode ser resistente a dobras e pequenas alterações de tamanho, mas com grandes alterações pode não funcionar corretamente. </li><li>  <strong>Detecção / correspondência de</strong> ponto-chave - encontre os pontos-chave, os pontos da imagem e o modelo.  Os detectores são resistentes a rotações, zoom (dependendo do detector e descritor selecionado) e coincidem - com sobreposições parciais.  Mas esse método funciona bem apenas se houver "pontos-chave" suficientes no objeto, e as localidades dos pontos do modelo e da imagem coincidem muito bem (ou seja, o mesmo objeto no modelo e na imagem). </li><li>  <strong>Detecção de contorno</strong> - localizando os contornos dos objetos e localizando um contorno semelhante ao contorno do objeto desejado.  Essa solução leva em consideração apenas a forma do objeto e ignora seu conteúdo e cor (que podem ser tanto um mais quanto um menos). <br>  Um leitor experiente pode perceber que nosso problema pode ser resolvido com a ajuda de métodos modernos de visão computacional treinados.  Por exemplo, a rede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">YOLO</a> retorna a caixa delimitadora do objeto desejado - e é isso que nos interessa.  Sim, testamos e lançamos com êxito uma solução baseada em aprendizado profundo - mas como uma segunda iteração (já após o lançamento da ferramenta de localização e o início da operação).  Essas soluções são mais resistentes a alterações nos parâmetros dos botões e têm muitas propriedades positivas: por exemplo, em vez de pegar limites e parâmetros com as mãos, você pode simplesmente adicionar exemplos de banners nos quais a rede está errada (Aprendizado Ativo) no conjunto de treinamento.  Usar o aprendizado profundo para nossa tarefa tem seus problemas e pontos interessantes.  Por exemplo, muitos métodos modernos de visão computacional requerem um grande número de imagens marcadas, mas não tivemos marcação (como em muitos casos reais), e o número total de banners diferentes não excede vários milhares.  Portanto, decidimos organizar um pequeno número de imagens e escrever um gerador que criará outros banners semelhantes com base.  Nesta direção, existem muitos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">truques interessantes</a> .  Existem muitas outras armadilhas, e a própria tarefa de determinar a posição de um objeto de visão computacional é extensa e tem muitas soluções.  Portanto, decidiu-se limitar o campo de visão do artigo, e as decisões baseadas na aprendizagem profunda não foram consideradas. </li></ul><br><p>  O código com blocos de notas que implementam os métodos descritos e desenham figuras do artigo pode ser encontrado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">repositório</a> ). </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445354/">https://habr.com/ru/post/pt445354/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445344/index.html">Plataforma de comunicações unificadas OpenVox</a></li>
<li><a href="../pt445346/index.html">Como escrever uma API incorreta</a></li>
<li><a href="../pt445348/index.html">SNA Hackathon 2019: Simplifique a Arquitetura - Simplifique os Recursos</a></li>
<li><a href="../pt445350/index.html">Sonata - servidor de provisionamento SIP</a></li>
<li><a href="../pt445352/index.html">Aplicações de Streaming Estruturado Spark no Kubernetes. Experimente FASTEN RUS</a></li>
<li><a href="../pt445356/index.html">Visão geral da seção Móvel no DUMP-2019: máximo aplicado e útil no trabalho diário</a></li>
<li><a href="../pt445358/index.html">Organização do sistema de eventos no Unity - através dos olhos de um designer de jogos</a></li>
<li><a href="../pt445360/index.html">5 tarefas típicas para entrevistas em JavaScript: análise e soluções</a></li>
<li><a href="../pt445362/index.html">O livro "Sistemas Distribuídos. Padrões de Design</a></li>
<li><a href="../pt445366/index.html">Como acelerar a criptografia de acordo com GOST 28147-89 no processador Baikal-T1 devido ao bloco SIMD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>