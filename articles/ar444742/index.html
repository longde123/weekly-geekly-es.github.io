<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉโโค๏ธโ๐โ๐ฉ ๐ ๐ฉ ุงูููุงุฑุณ ูู PostgreSQL - 5 (GiST) ๐คธ๐ผ ๐ ๐ฃ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงูููุงูุงุช ุงูุณุงุจูุฉ ุ ูุงูุดูุง ูุญุฑู ููุฑุณุฉ PostgreSQL ููุงุฌูุฉ ุทุฑู ุงููุตูู ูุทุฑููุชู ูุตูู: ููุฑุณ ุงูุชุฌุฒุฆุฉ ู B-tree . ูู ูุฐู ุงูููุงูุฉ ุ ุณูุตู ููุงุฑุณ GiST. 

 ุฌููุฑ 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูููุงุฑุณ ูู PostgreSQL - 5 (GiST)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/444742/" style=";text-align:right;direction:rtl">  ูู ุงูููุงูุงุช ุงูุณุงุจูุฉ ุ ูุงูุดูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุฑู ููุฑุณุฉ</a> PostgreSQL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุฌูุฉ ุทุฑู</a> ุงููุตูู ูุทุฑููุชู ูุตูู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฑุณ ุงูุชุฌุฒุฆุฉ</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">B-tree</a> .  ูู ูุฐู ุงูููุงูุฉ ุ ุณูุตู ููุงุฑุณ GiST. <br><br><h1 style=";text-align:right;direction:rtl">  ุฌููุฑ </h1><br>  GiST ูู ุงุฎุชุตุงุฑ ูู "ุดุฌุฑุฉ ุงูุจุญุซ ุงููุนููุฉ".  ูุฐู ุดุฌุฑุฉ ุจุญุซ ูุชูุงุฒูุฉ ุ ุชูุงููุง ูุซู "b-tree" ุงูุชู ูููุดุช ุณุงุจููุง. <br><br>  ูุง ูู ุงููุฑูุ  ูุฑุชุจุท ูุคุดุฑ "Btree" ุงุฑุชุจุงุทูุง ูุซูููุง ุจุฏูุงูุงุช ุงูููุงุฑูุฉ: ุฏุนู ุงููุดุบููู "ุงูุฃูุจุฑ" ู "ุงูุฃูู" ู "ุงููุชุณุงูููู" ูู ูู ูุง ูู ูุงุฏุฑ ุนูู (ููููู ูุงุฏุฑ ุฌุฏูุง!) ููุน ุฐูู ุ ูุฅู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุญุฏูุซุฉ ุชุฎุฒู ุฃููุงุน ุงูุจูุงูุงุช ุงูุชู ูููู ูุคูุงุก ุงููุดุบููู ุจุชุฎุฒูููุง. ูุง ูุนูู ูู: ุงูุจูุงูุงุช ุงูุฌุบุฑุงููุฉ ูุงููุณุชูุฏุงุช ุงููุตูุฉ ูุงูุตูุฑ ... <br><br>  ุชุฃุชู ุทุฑููุฉ ููุฑุณ GiST ูู ูุณุงุนุฏุชูุง ูุฃููุงุน ุงูุจูุงูุงุช ูุฐู.  ูุณูุญ ุจุชุญุฏูุฏ ูุงุนุฏุฉ ูุชูุฒูุน ุงูุจูุงูุงุช ูู ููุน ุชุนุณูู ุนุจุฑ ุดุฌุฑุฉ ูุชูุงุฒูุฉ ูุทุฑููุฉ ูุงุณุชุฎุฏุงู ูุฐุง ุงูุชูุซูู ูููุตูู ูู ูุจู ุจุนุถ ุงููุดุบููู.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ููุคุดุฑ GiST ุฃู "ูุณุชูุนุจ" R-tree ููุจูุงูุงุช ุงูููุงููุฉ ุจุฏุนู ูู ูุดุบูู ุงูููุงูุน ุงููุณุจูุฉ (ุงูููุฌูุฏ ุนูู ุงููุณุงุฑ ุ ุนูู ุงููููู ุ ูุญุชูู ุนูู ุ ููุง ุฅูู ุฐูู) ุฃู RD-tree ูููุฌููุนุงุช ุงูุชู ุชุฏุนู ูุดุบูู ุงูุชูุงุทุน ุฃู ุงูุชุถููู. <br><br>  ุจูุถู ุงููุงุจููุฉ ููุชูุณุนุฉ ุ ูููู ุฅูุดุงุก ุทุฑููุฉ ุฌุฏูุฏุฉ ุชูุงููุง ูู ุงูุจุฏุงูุฉ ูู PostgreSQL: ุชุญููููุง ููุฐู ุงูุบุงูุฉ ุ ูุฌุจ ุชูููุฐ ูุงุฌูุฉ ูุน ูุญุฑู ุงูููุฑุณุฉ.  ูููู ูุฐุง ูุง ูุชุทูุจ ุฅุฌุฑุงุก ุชุนููู ููุทู ุงูููุฑุณุฉ ูุญุณุจ ุ ุจู ูุชุทูุจ ุฃูุถูุง ุชุนููู ุจููุฉ ุงูุจูุงูุงุช ุนูู ุงูุตูุญุงุช ุ ูุงูุชูููุฐ ุงููุนุงู ููุฃููุงู ุ ูุฏุนู ุณุฌู ุงููุชุงุจุฉ ุงููุณุจูุฉ.  ูู ูุฐุง ููุชุฑุถ ููุงุฑุงุช ุงููุทูุฑ ุนุงููุฉ ูุฌูุฏ ุฅูุณุงูู ูุจูุฑ.  ุชุนูู GiST ุนูู ุชุจุณูุท ุงููููุฉ ูู ุฎูุงู ุงูุชุบูุจ ุนูู ุงููุดููุงุช ุฐุงุช ุงููุณุชูู ุงูููุฎูุถ ูุชูุฏูู ูุงุฌูุฉ ุฎุงุตุฉ ุจูุง: ุงูุนุฏูุฏ ูู ุงููุธุงุฆู ุงูุชู ูุง ุชุชุนูู ุจุงูุชูููุงุช ุ ูููู ุจูุทุงู ุงูุชุทุจูู.  ูุจูุฐุง ุงููุนูู ุ ูููููุง ุงุนุชุจุงุฑ GiST ูุฅุทุงุฑ ูุจูุงุก ุทุฑู ูุตูู ุฌุฏูุฏุฉ. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ูููู </h2><br>  GiST ูู ุดุฌุฑุฉ ูุชูุงุฒูุฉ ุงูุงุฑุชูุงุน ุชุชููู ูู ุตูุญุงุช ุงูุนูุฏุฉ.  ุชุชููู ุงูุนูุฏ ูู ุตููู ุงูููุฑุณ. <br><br>  ูุญุชูู ูู ุตู ูู ุนูุฏุฉ ุงููุฑูุฉ (ุตู ุงููุฑูุฉ) ุ ุจุดูู ุนุงู ุ ุนูู ุจุนุถ <em>ุงููุณูุฏ</em> (ุชุนุจูุฑ ููุทูู) ูุฅุดุงุฑุฉ ุฅูู ุตู ุฌุฏูู (TID).  ูุฌุจ ุฃู ุชูู ุงูุจูุงูุงุช ุงููููุฑุณุฉ (ุงูููุชุงุญ) ุจูุฐุง ุงููุณูุฏ. <br><br>  ูุญุชูู ูู ุตู ูู ุงูุนูุฏุฉ ุงูุฏุงุฎููุฉ (ุตู ุฏุงุฎูู) ุฃูุถูุง ุนูู <em>ูุณูุฏ</em> ูุฅุดุงุฑุฉ ุฅูู ุนูุฏุฉ ุชุงุจุนุฉ ุ ููุฌุจ ุฃู ุชูุจู ุฌููุน ุงูุจูุงูุงุช ุงููููุฑุณุฉ ููุดุฌุฑุฉ ุงููุฑุนูุฉ ูุฐุง ุงููุณูุฏ.  ุจูุนูู ุขุฎุฑ ุ <em>ุชุชุถูู</em> ูุณูุฏ ุงูุตู ุงูุฏุงุฎูู ูุณูุฏุงุช ุฌููุน ุตููู ุงูุฃุทูุงู.  ูุฐู ุงูุณูุฉ ุงููููุฉ ููุคุดุฑ GiST ุชุณุชุจุฏู ุงูุชุฑุชูุจ ุงูุจุณูุท ูุดุฌุฑุฉ B. <br><br>  ูุณุชุฎุฏู ุงูุจุญุซ ูู ุดุฌุฑุฉ GiST <em>ูุธููุฉ ุชูุงุณู</em> ูุชุฎุตุตุฉ ("ูุชุณูุฉ") - ูุงุญุฏุฉ ูู ุงููุธุงุฆู ุงููุญุฏุฏุฉ ุจูุงุณุทุฉ ุงููุงุฌูุฉ ููุชู ุชูููุฐูุง ุจุทุฑููุชูุง ุงูุฎุงุตุฉ ููู ุนุงุฆูุฉ ูุดุบู ูุฏุนููุฉ. <br><br>  ูุชู ุงุณุชุฏุนุงุก ูุธููุฉ ุงูุชูุงุณู ูุตู ููุฑุณ ูุชุญุฏุฏ ูุง ุฅุฐุง ูุงู ุชูููู ูุฐุง ุงูุตู ูุชูุงูููุง ูุน ุชูููู ุงูุจุญุซ (ุงููุญุฏุฏ ูู " <em>ุชุนุจูุฑ ุนุงูู ุงูุญูู ุงููููุฑุณ</em> ").  ุจุงููุณุจุฉ ููุตู ุงูุฏุงุฎูู ุ ุชุญุฏุฏ ูุฐู ุงููุธููุฉ ูู ุงููุงูุน ูุง ุฅุฐุง ูุงูุช ููุงู ุญุงุฌุฉ ููุฅูุฒุงู ุฅูู ุงูุดุฌุฑุฉ ุงููุฑุนูุฉ ุงูููุงุจูุฉ ุ ูุจุงููุณุจุฉ ููุตู ุงูุดุฌุฑู ุ ุชุญุฏุฏ ุงููุธููุฉ ูุง ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ุงููููุฑุณุฉ ุชูู ุจุงูุชูููู. <br><br>  ูุจุฏุฃ ุงูุจุญุซ ุจุนูุฏุฉ ุงูุฌุฐุฑ ุ ูุจุญุซ ุดุฌุฑุฉ ุนุงุฏู.  ุชุณูุญ ูุธููุฉ ุงูุงุชุณุงู ุจุงูุชุดุงู ุงูุนูุฏ ุงููุฑุนูุฉ ุงูุชู ูู ุงูููุทูู ุฅุฏุฎุงููุง (ูุฏ ูููู ููุงู ุงูุนุฏูุฏ ูููุง) ูุฃููุง ูุง ุชูุนู ุฐูู.  ุซู ูุชู ุชูุฑุงุฑ ุงูุฎูุงุฑุฒููุฉ ููู ุนูุฏุฉ ูุฑุนูุฉ ููุฌูุฏุฉ.  ูุฅุฐุง ูุงูุช ุงูุนูุฏุฉ ูุฑูุฉ ุ ูุณูุชู ุฅุฑุฌุงุน ุงูุตู ุงููุญุฏุฏ ุจูุงุณุทุฉ ุฏุงูุฉ ุงูุชูุงุณู ูุฃุญุฏ ุงููุชุงุฆุฌ. <br><br>  ุงูุจุญุซ ูู ุงูุนูู ุฃููุงู: ุชุญุงูู ุงูุฎูุงุฑุฒููุฉ ุฃููุงู ุงููุตูู ุฅูู ุนูุฏุฉ ูุฑูุฉ.  ูุณูุญ ูุฐุง ุจุฅุฑุฌุงุน ุงููุชุงุฆุฌ ุงูุฃููู ูุฑูุจูุง ูููุง ูุงู ุฐูู ูููููุง (ุงูุฃูุฑ ุงูุฐู ูุฏ ูููู ููููุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ููุชููุง ุจุนุฏุฉ ูุชุงุฆุฌ ููุท ูููุณ ูููุง). <br><br>  ุฏุนูุง ููุงุญุธ ูุฑุฉ ุฃุฎุฑู ุฃู ูุธููุฉ ุงูุชูุงุณู ูุง ุชุญุชุงุฌ ุฅูู ุฃู ุนูุงูุฉ ุจุนูุงูู ุชุดุบูู "ุฃูุจุฑ" ุฃู "ุฃูู" ุฃู "ูุชุณุงููุฉ".  ูุฏ ุชููู ุฏูุงูุงุช ุฏุงูุฉ ุงูุชูุงุณู ูุฎุชููุฉ ุชูุงููุง ุ ูุจุงูุชุงูู ุ ูุง ูููุชุฑุถ ุฃู ููุฑุฌุน ุงูููุฑุณ ููููุง ุจุชุฑุชูุจ ูุนูู. <br><br>  ูู ููุงูุด ุฎูุงุฑุฒููุงุช ุงูุฅุฏุฑุงุฌ ูุญุฐู ุงูููู ูู GiST: ููุงู ุนุฏุฏ ูููู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุธุงุฆู ุงููุงุฌูุฉ</a> ุชุคุฏู ูุฐู ุงูุนูููุงุช.  ููุงู ููุทุฉ ูุงุญุฏุฉ ูููุฉ ูููู.  ุนูุฏูุง ูุชู ุฅุฏุฑุงุฌ ูููุฉ ุฌุฏูุฏุฉ ูู ุงูููุฑุณ ุ ูุชู ุชุญุฏูุฏ ููุถุน ูุฐู ุงููููุฉ ูู ุงูุดุฌุฑุฉ ุจุญูุซ ูุชู ุชูุฏูุฏ ูุณูุฏ ุงูุตููู ุงูุฑุฆูุณูุฉ ุงูุฎุงุตุฉ ุจูุง ุจุฃูู ูุฏุฑ ูููู (ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุง ูุชู ุชูุฏูุฏูุง ุนูู ุงูุฅุทูุงู).  ูููู ุนูุฏูุง ูุชู ุญุฐู ุงููููุฉ ุ ูู ูุชู ุชุฎููุถ ุชูููู ุงูุตู ุงูุฃุตู.  ูุญุฏุซ ูุฐุง ููุท ูู ูุซู ูุฐู ุงูุญุงูุงุช: ูุชู ุชูุณูู ุงูุตูุญุฉ ุฅูู ุญุงูุชูู (ุนูุฏูุง ูุง ุชุญุชูู ุงูุตูุญุฉ ุนูู ูุณุงุญุฉ ูุงููุฉ ูุฅุฏุฎุงู ุตู ููุฑุณ ุฌุฏูุฏ) ุฃู ูุชู ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูููุฑุณ ูู ุงูุจุฏุงูุฉ (ุจุงุณุชุฎุฏุงู ุฃูุฑ REINDEX ุฃู VACUUM FULL).  ูุฐูู ุ ูููู ุฃู ุชุชุญูู ููุงุกุฉ ูุคุดุฑ GiST ูุชุบููุฑ ุงูุจูุงูุงุช ุจุดูู ูุชูุฑุฑ ุจูุฑูุฑ ุงูููุช. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ุณููุธุฑ ูู ุจุนุถ ุงูุฃูุซูุฉ ูู ุงูููุงุฑุณ ูุฃููุงุน ุงูุจูุงูุงุช ุงููุฎุชููุฉ ูุงูุฎุตุงุฆุต ุงููููุฏุฉ ูู GiST: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูููุงุท (ูุงูููุงูุงุช ุงูููุฏุณูุฉ ุงูุฃุฎุฑู) ูุงูุจุญุซ ุนู ุฃูุฑุจ ุงูุฌูุฑุงู. </li><li style=";text-align:right;direction:rtl">  ุงูููุงุตู ุงูุฒูููุฉ ููููุฏ ุงูุงุณุชุจุนุงุฏ. </li><li style=";text-align:right;direction:rtl">  ุงูุจุญุซ ุนู ุงููุต ุงููุงูู. </li></ul><br><h2 style=";text-align:right;direction:rtl">  R- ุดุฌุฑุฉ ููุญุตูู ุนูู ููุงุท </h2><br>  ุณูููู ุจุชูุถูุญ ูุง ุณุจู ุจูุซุงู ููุฑุณ ููููุงุท ูู ุงููุณุชูู (ูููููุง ุฃูุถูุง ุฅูุดุงุก ููุงุฑุณ ูุชุดุงุจูุฉ ููููุงูุงุช ุงูููุฏุณูุฉ ุงูุฃุฎุฑู).  B- ุดุฌุฑุฉ ุนุงุฏูุฉ ูุง ุชุชูุงุณุจ ูุน ูุฐุง ุงูููุน ูู ุงูุจูุงูุงุช ูุฃูู ูุง ุชูุฌุฏ ุนูุงูู ููุงุฑูุฉ ูุญุฏุฏุฉ ููููุงุท. <br><br>  ููุฑุฉ R-tree ูู ุชูุณูู ุงูุทุงุฆุฑุฉ ุฅูู ูุณุชุทููุงุช ุชุบุทู ุฌููุน ุงูููุงุท ุงูุชู ุชุชู ููุฑุณุชูุง ุจุดูู ุฅุฌูุงูู.  ูุฎุฒู ุตู ุงูููุฑุณ ูุณุชุทูููุง ุ ููููู ุชุนุฑูู ุงููุณูุฏ ููุง ููู: "ุชูุน ุงูููุทุฉ ุงููุทููุจุฉ ุฏุงุฎู ุงููุณุชุทูู ุงููุญุฏุฏ". <br><br>  ุณูุญุชูู ุฌุฐุฑ ุดุฌุฑุฉ R ุนูู ุนุฏุฉ ูุณุชุทููุงุช ุฃูุจุฑ (ุฑุจูุง ูุชูุงุทุนุฉ).  ุณุชุญุชูู ุงูุนูุฏ ุงููุฑุนูุฉ ุนูู ูุณุชุทููุงุช ุฃุตุบุฑ ุญุฌููุง ูุถูููุฉ ูู ุงูุฃุตู ุงูุฃุตู ููู ุชุบุทูุฉ ุฅุฌูุงููุฉ ุฌููุน ุงูููุงุท ุงูุฃุณุงุณูุฉ. <br><br>  ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูุฌุจ ุฃู ุชุญุชูู ุงูุนูุฏ ุงููุฑููุฉ ุนูู ููุงุท ูุชู ููุฑุณุชูุง ุ ูููู ูุฌุจ ุฃู ูููู ููุน ุงูุจูุงูุงุช ูู ููุณู ูู ุฌููุน ุตููู ุงูููุฑุณ ุ ูุจุงูุชุงูู ุ ูุชู ุชุฎุฒูู ุงููุณุชุทููุงุช ูุฑุฉ ุฃุฎุฑู ุ ูููู "ุชููุงุฑ" ูู ููุงุท. <br><br>  ูุชุตูุฑ ูุซู ูุฐุง ุงููููู ุ ูุญู ูููุฑ ุตูุฑูุง ูุซูุงุซุฉ ูุณุชููุงุช ูู ุดุฌุฑุฉ R-.  ุงูููุงุท ูู ุฅุญุฏุงุซูุงุช ุงููุทุงุฑุงุช (ุนูู ุบุฑุงุฑ ุชูู ุงูููุฌูุฏุฉ ูู ุฌุฏูู "ุงููุทุงุฑุงุช" ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ</a> ุ ูููู ูุชู ุชูููุฑ ุงููุฒูุฏ ูู ุงูุจูุงูุงุช ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">openflights.org</a> ). <br><br><img src="https://habrastorage.org/web/492/fd0/a28/492fd0a2883b4ee39d75618f8f501e50.png"><br>  <em>ุงููุณุชูู ุงูุฃูู: ูุณุชุทููุงู ูุจูุฑุงู ูุชูุงุทุนุงู ูุฑุฆูุงู.</em> <br><br><img src="https://habrastorage.org/web/e42/78d/843/e4278d8439a3485e88128182f741b696.png"><br>  <em>ุงููุณุชูู ุงูุซุงูู: ูุชู ุชูุณูู ุงููุณุชุทููุงุช ุงููุจูุฑุฉ ุฅูู ููุงุทู ุฃุตุบุฑ.</em> <br><br><img src="https://habrastorage.org/web/60e/c9d/99b/60ec9d99b4fe46c88bed2a9cc65dd0f5.png"><br>  <em>ุงููุณุชูู ุงูุซุงูุซ: ูุญุชูู ูู ูุณุชุทูู ุนูู ุงูุนุฏูุฏ ูู ุงูููุงุท ูุชูุงุณุจ ุตูุญุฉ ููุฑุณ ูุงุญุฏุฉ.</em> <br><br>  ุงูุขู ูููุธุฑ ูู ูุซุงู ุจุณูุท ููุบุงูุฉ ูู "ูุณุชูู ูุงุญุฏ": <br><br><img src="https://habrastorage.org/web/d89/478/666/d894786665774a76943e72338aec874c.png"><br><br><pre style=";text-align:right;direction:rtl"><code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> points(p <span class="hljs-type"><span class="hljs-type">point</span></span>); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> points(p) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(1,1)'</span></span>), (<span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(3,2)'</span></span>), (<span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(6,3)'</span></span>), (<span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(5,5)'</span></span>), (<span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(7,8)'</span></span>), (<span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(8,6)'</span></span>); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> points <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> gist(p);</code> </pre> <br>  ูุน ูุฐุง ุงูุชูุณูู ุ ุณูุจุฏู ูููู ุงูููุฑุณ ููุง ููู: <br><br><img src="https://habrastorage.org/web/caf/919/8a5/caf9198a538d46f48985d42a301a0b2d.png"><br><br>  ูููู ุงุณุชุฎุฏุงู ุงูููุฑุณ ุงูุฐู ุชู ุฅูุดุงุคู ูุชุณุฑูุน ุงูุงุณุชุนูุงู ุงูุชุงูู ุ ุนูู ุณุจูู ุงููุซุงู: "ุงูุจุญุซ ุนู ุฌููุน ุงูููุงุท ุงูููุฌูุฏุฉ ูู ุงููุณุชุทูู ุงููุญุฏุฏ".  ูููู ุฅุถูุงุก ุงูุทุงุจุน ุงูุฑุณูู ุนูู ูุฐุง ุงูุดุฑุท ุนูู ุงููุญู ุงูุชุงูู: <code>p &lt;@ box '(2,1),(6,3)'</code> (ุชุนูู ุงููุดุบู <code>&lt;@</code> ูู ุนุงุฆูุฉ "points_ops" "ุงููุงุฑุฏุฉ ูู"): <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> enable_seqscan = <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> points <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p &lt;@ <span class="hljs-type"><span class="hljs-type">box</span></span> <span class="hljs-string"><span class="hljs-string">'(2,1),(7,4)'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ---------------------------------------------- Index Only Scan using points_p_idx on points Index Cond: (p &lt;@ '(7,4),(2,1)'::box) (2 rows)</code> </pre><br>  ูุชู ุชุนุฑูู ูุธููุฉ ุงูุชูุงุณู ูููุดุบู (" <em>ุงูุญูู ุงููููุฑุณ</em> &lt;@ <em>ุชุนุจูุฑ</em> " ุ ุญูุซ ูููู <em>ุงูุญูู ุงููููุฑุณ</em> ููุทุฉ <em>ูุงูุชุนุจูุฑ</em> ูุณุชุทูู) ููุง ููู.  ุจุงููุณุจุฉ ููุตู ุงูุฏุงุฎูู ุ ุชูุฑุฌุน "ูุนู" ุฅุฐุง ูุงู ูุณุชุทูููุง ูุชูุงุทุน ูุน ุงููุณุชุทูู ุงููุญุฏุฏ <em>ุจุงูุชุนุจูุฑ</em> .  ุจุงููุณุจุฉ ูุตู ุงููุฑูุฉ ุ ุชูุฑุฌุน ุงูุฏุงูุฉ "ูุนู" ุฅุฐุง ูุงูุช ููุทุชูุง (ูุณุชุทูู "ูุทูู") ูุถููุฉ ูู ุงููุณุชุทูู ุงููุญุฏุฏ ุจูุงุณุทุฉ ุงูุชุนุจูุฑ. <br><br><img src="https://habrastorage.org/web/226/f28/493/226f28493e15430193a69781e1600b9f.png"><br><br>  ูุจุฏุฃ ุงูุจุญุซ ุจุงูุนูุฏุฉ ุงูุฌุฐุฑูุฉ.  ูุชูุงุทุน ุงููุณุชุทูู (2ุ1) - (7ุ4) ูุน (1ุ1) - (6ุ3) ุ ูููู ูุง ูุชูุงุทุน ูุน (5ุ5) - (8ุ8) ุ ูุจุงูุชุงูู ุ ููุณุช ููุงู ุญุงุฌุฉ ูููุฒู ุฅูู ุงูุดุฌุฑุฉ ุงูุซุงููุฉ. <br><br><img src="https://habrastorage.org/web/d52/792/511/d527925110fb46deadb382762561a621.png"><br><br>  ุนูุฏ ุงููุตูู ุฅูู ุนูุฏุฉ ูุฑูุฉ ุ ูุฐูุจ ุฅูู ุงูููุงุท ุงูุซูุงุซ ุงูููุฌูุฏุฉ ููุงู ููุนูุฏ ุงุซููู ูููู ููุชูุฌุฉ: (3.2) ู (6.3). <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> points <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> p &lt;@ <span class="hljs-type"><span class="hljs-type">box</span></span> <span class="hljs-string"><span class="hljs-string">'(2,1),(7,4)'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> p ------- (3,2) (6,3) (2 rows)</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงูุฏุงุฎููุฉ </h3><br>  ูุณูุก ุงูุญุธ ุ ูุง ูุณูุญ "pageinspect" ุงูุนุฑูู ุจุงูุจุญุซ ูู ููุฑุณ GiST.  ูููู ููุงู ุทุฑููุฉ ุฃุฎุฑู ูุชุงุญุฉ: ุงูุชูุฏูุฏ "gevel".  ูุง ูุชู ุชุถูููู ูู ุงูุชุณููู ุงูููุงุณู ุ ูุฐูู ุฑุงุฌุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนูููุงุช ุงูุชุซุจูุช</a> . <br><br>  ุฅุฐุง ุชู ูู ุดูุก ุจุดูู ุตุญูุญ ุ ูุณุชููู ููุงู ุซูุงุซ ูุธุงุฆู ูุชุงุญุฉ ูู.  ุฃููุงู ุ ูููููุง ุงูุญุตูู ุนูู ุจุนุถ ุงูุฅุญุตุงุกุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> gist_stat(<span class="hljs-string"><span class="hljs-string">'airports_coordinates_idx'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> gist_stat ------------------------------------------ Number of levels: 4 + Number of pages: 690 + Number of leaf pages: 625 + Number of tuples: 7873 + Number of invalid tuples: 0 + Number of leaf tuples: 7184 + Total size of tuples: 354692 bytes + Total size of leaf tuples: 323596 bytes + Total size of index: 5652480 bytes+ (1 row)</code> </pre><br>  ูู ุงููุงุถุญ ุฃู ุญุฌู ุงูููุฑุณ ุนูู ุฅุญุฏุงุซูุงุช ุงููุทุงุฑ ูู 690 ุตูุญุฉ ูุฃู ุงูููุฑุณ ูุชููู ูู ุฃุฑุจุนุฉ ูุณุชููุงุช: ุงูุฌุฐุฑ ูุงููุณุชููุงู ุงูุฏุงุฎููุงู ูุนุฑูุถุงู ูู ุงูุฃุดูุงู ุฃุนูุงู ุ ูุงููุณุชูู ุงูุฑุงุจุน ูู ุงููุฑูุฉ. <br><br>  ูู ุงููุงูุน ุ ุณูููู ุงููุคุดุฑ ุงูุฎุงุต ุจุซูุงููุฉ ุขูุงู ููุทุฉ ุฃุตุบุฑ ุจูุซูุฑ: ููุง ุชู ุฅูุดุงุคู ุจุงุณุชุฎุฏุงู fillfactor 10 ูช ูู ุฃุฌู ุงููุถูุญ. <br><br>  ุซุงูููุง ุ ูููููุง ุฅุฎุฑุงุฌ ุดุฌุฑุฉ ุงูููุฑุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> gist_tree(<span class="hljs-string"><span class="hljs-string">'airports_coordinates_idx'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> gist_tree ----------------------------------------------------------------------------------------- 0(l:0) blk: 0 numTuple: 5 free: 7928b(2.84%) rightlink:4294967295 (InvalidBlockNumber) + 1(l:1) blk: 335 numTuple: 15 free: 7488b(8.24%) rightlink:220 (OK) + 1(l:2) blk: 128 numTuple: 9 free: 7752b(5.00%) rightlink:49 (OK) + 1(l:3) blk: 57 numTuple: 12 free: 7620b(6.62%) rightlink:35 (OK) + 2(l:3) blk: 62 numTuple: 9 free: 7752b(5.00%) rightlink:57 (OK) + 3(l:3) blk: 72 numTuple: 7 free: 7840b(3.92%) rightlink:23 (OK) + 4(l:3) blk: 115 numTuple: 17 free: 7400b(9.31%) rightlink:33 (OK) + ...</code> </pre><br>  ูุซุงูุซุง ุ ูููููุง ุฅุฎุฑุงุฌ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูู ุตููู ุงูููุฑุณ.  ูุงุญุธ ุงููุฑูู ุงูุฏูููุฉ ุงูุชุงููุฉ: ูุฌุจ ุชุญููู ูุชูุฌุฉ ุงููุธููุฉ ุฅูู ููุน ุงูุจูุงูุงุช ุงููุทููุจ.  ูู ุญุงูุชูุง ุ ูุฐุง ุงูููุน ูู "ูุฑุจุน" (ูุณุชุทูู ูุญุงุท).  ุนูู ุณุจูู ุงููุซุงู ุ ูุงุญุธ ุฎูุณุฉ ุตููู ูู ุงููุณุชูู ุงูุนููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span>, a <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> gist_print(<span class="hljs-string"><span class="hljs-string">'airports_coordinates_idx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> t(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">valid</span></span> <span class="hljs-type"><span class="hljs-type">bool</span></span>, a <span class="hljs-type"><span class="hljs-type">box</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> level | a -------+----------------------------------------------------------------------- 1 | (47.663586,80.803207),(-39.2938003540039,-90) 1 | (179.951004028,15.6700000762939),(15.2428998947144,-77.9634017944336) 1 | (177.740997314453,73.5178070068359),(15.0664,10.57970047) 1 | (-77.3191986083984,79.9946975708),(-179.876998901,-43.810001373291) 1 | (-39.864200592041,82.5177993774),(-81.254096984863,-64.2382965088) (5 rows)</code> </pre><br>  ูู ุงููุงูุน ุ ุชู ุฅูุดุงุก ุงูุฃุฑูุงู ุงููุฐููุฑุฉ ุฃุนูุงู ููุท ูู ูุฐู ุงูุจูุงูุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ูุดุบูู ููุจุญุซ ูุงูุทูุจ </h2><br>  ุงููุดุบููู ุงูุฐูู ุชูุช ููุงูุดุชูู ุญุชู ุงูุขู (ูุซู <code>&lt;@</code> ูู ุงููุณูุฏ <code>p &lt;@ box '(2,1),(7,4)'</code> ) ูููู ุฃู ูุทูู ุนูููู ูุดุบูู ุงูุจุญุซ ูุฃููู ูุญุฏุฏูู ุดุฑูุท ุงูุจุญุซ ูู ุงุณุชุนูุงู. <br><br>  ููุงู ุฃูุถูุง ููุน ูุดุบู ุขุฎุฑ: ูุดุบูู ุงูุทูุจ.  ูุชู ุงุณุชุฎุฏุงููุง ูููุงุตูุงุช ุชุฑุชูุจ ุงููุฑุฒ ูู ุฌููุฉ ORDER BY ุจุฏูุงู ูู ุงูููุงุตูุงุช ุงูุชูููุฏูุฉ ูุฃุณูุงุก ุงูุฃุนูุฏุฉ.  ูููุง ููู ูุซุงู ุนูู ูุฐุง ุงูุงุณุชุนูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> points <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> p &lt;-&gt; <span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(4,7)'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> p ------- (5,5) (7,8) (2 rows)</code> </pre><br>  <code>p &lt;-&gt; point '(4,7)'</code> ููุง ูู ุชุนุจูุฑ ูุณุชุฎุฏู ุนุงูู ุชุดุบูู <code>&lt;-&gt;</code> ุ ูุงูุฐู ูุดูุฑ ุฅูู ุงููุณุงูุฉ ูู ูุณูุทุฉ ุฅูู ุฃุฎุฑู.  ูุนูู ุงูุงุณุชุนูุงู ูู ุฅุฑุฌุงุน ููุทุชูู ุงูุฃูุฑุจ ุฅูู ุงูููุทุฉ (4.7).  ููุนุฑู ุงูุจุญุซ ูุซู ูุฐุง ุจุงุณู k-NN - ุจุญุซ ุฃูุฑุจ ุฌุงุฑ. <br><br>  ูุฏุนู ุงูุงุณุชุนูุงูุงุช ูู ูุฐุง ุงูููุน ุ ูุฌุจ ุฃู ุชุญุฏุฏ ุทุฑููุฉ ุงููุตูู <em>ูุธููุฉ ูุณุงูุฉ</em> ุฅุถุงููุฉ ุ ููุฌุจ ุชุถููู ุนุงูู ุงูุทูุจ ูู ูุฆุฉ ุงููุดุบู ุงูููุงุณุจุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูุฆุฉ "points_ops" ููููุงุท).  ูุนุฑุถ ุงูุงุณุชุนูุงู ุฃุฏูุงู ุงูุนูุงูู ุ ุฅูู ุฌุงูุจ ุฃููุงุนูุง ("s" - ุงูุจุญุซ ู "o" - ุงูุทูุจ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> amop.amopopr::<span class="hljs-type"><span class="hljs-type">regoperator</span></span>, amop.amoppurpose, amop.amopstrategy <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_opclass opc, pg_opfamily opf, pg_am am, pg_amop amop <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> opc.opcname = <span class="hljs-string"><span class="hljs-string">'point_ops'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> opf.oid = opc.opcfamily <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> am.oid = opf.opfmethod <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> amop.amopfamily = opc.opcfamily <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> am.amname = <span class="hljs-string"><span class="hljs-string">'gist'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> amop.amoplefttype = opc.opcintype;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> amopopr | amoppurpose | amopstrategy -------------------+-------------+-------------- &lt;&lt;(point,point) | s | 1 strictly left &gt;&gt;(point,point) | s | 5 strictly right ~=(point,point) | s | 6 coincides &lt;^(point,point) | s | 10 strictly below &gt;^(point,point) | s | 11 strictly above &lt;-&gt;(point,point) | o | 15 distance &lt;@(point,box) | s | 28 contained in rectangle &lt;@(point,polygon) | s | 48 contained in polygon &lt;@(point,circle) | s | 68 contained in circle (9 rows)</code> </pre><br>  ูุชุธูุฑ ุฃูุถุง ุนุฏุฏ ูู ุงูุงุณุชุฑุงุชูุฌูุงุช ุ ูุน ุดุฑุญ ูุนุงูููุง.  ูู ุงููุงุถุญ ุฃู ููุงู ุงุณุชุฑุงุชูุฌูุงุช ุฃูุซุฑ ุจูุซูุฑ ูู "btree" ุ ุญูุซ ูุชู ุฏุนู ุจุนุถูุง ููุท ููุญุตูู ุนูู ููุงุท.  ูููู ุชุนุฑูู ุงุณุชุฑุงุชูุฌูุงุช ูุฎุชููุฉ ูุฃููุงุน ุงูุจูุงูุงุช ุงูุฃุฎุฑู. <br><br>  ูุชู ุงุณุชุฏุนุงุก ูุธููุฉ ุงููุณุงูุฉ ูุนูุตุฑ ุงูููุฑุณ ุ ููุฌุจ ุฃู ุชุญุณุจ ุงููุณุงูุฉ (ูุน ูุฑุงุนุงุฉ ุฏูุงูุงุช ุงููุดุบู) ูู ุงููููุฉ ุงููุญุฏุฏุฉ ุจูุงุณุทุฉ ุงูุชุนุจูุฑ (" <em>ุชุนุจูุฑ ุนุงูู ุชุฑุชูุจ ุงูุญูู ุงููููุฑุณ</em> ") ุฅูู ุงูุนูุตุฑ ุงููุญุฏุฏ.  ุจุงููุณุจุฉ ูุนูุตุฑ ุงููุฑูุฉ ุ ูุฐู ูู ุงููุณุงูุฉ ุฅูู ุงููููุฉ ุงููููุฑุณุฉ.  ุจุงููุณุจุฉ ููุนูุตุฑ ุงูุฏุงุฎูู ุ ูุฌุจ ุฃู ุชูุฑุฌุน ุงูุฏุงูุฉ ุงูุญุฏ ุงูุฃุฏูู ูููุณุงูุงุช ุฅูู ุนูุงุตุฑ ุงููุฑูุฉ ุงููุฑุนูุฉ.  ูุธุฑูุง ูุฃู ุงููุฑูุฑ ุจุฌููุน ุงูุตููู ุงูุชุงุจุนุฉ ุณูููู ูููููุง ููุบุงูุฉ ุ ููุณูุญ ูููุธููุฉ ุจุชูููู ุงููุณุงูุฉ ุจุชูุงุคู ุ ูููู ุนูู ุญุณุงุจ ุชูููู ููุงุกุฉ ุงูุจุญุซ.  ููุน ุฐูู ุ ูุง ููุณูุญ ุฃุจุฏูุง ูููุธููุฉ ุจุฅูุฑุงุท ูู ุชูุฏูุฑ ุงููุณุงูุฉ ูุธุฑูุง ูุฃู ุฐูู ุณูุคุฏู ุฅูู ุชุนุทูู ุนูู ุงูููุฑุณ. <br><br>  ูููู ุฃู ุชููู ุฏุงูุฉ ุงููุณุงูุฉ ุจุฅุฑุฌุงุน ููู ูู ุฃู ููุน ูุงุจู ูููุฑุฒ (ูุทูุจ ุงูููู ุ ุณูุณุชุฎุฏู PostgreSQL ุฏูุงูุงุช ุงูููุงุฑูุฉ ูู ุนุงุฆูุฉ ุงููุดุบู ุงูููุงุณุจุฉ ูุทุฑููุฉ ุงููุตูู "btree" ุ ููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ููุถุญ ุณุงุจููุง</a> ). <br><br>  ุจุงููุณุจุฉ ููููุงุท ูู ุงููุณุชูู ุ ูุชู ุชูุณูุฑ ุงููุณุงูุฉ ุจุงููุนูู ุงููุนุชุงุฏ: ูููุฉ <code>(x1,y1) &lt;-&gt; (x2,y2)</code> ุชุณุงูู ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ููุฌููุน ูุฑุจุนุงุช ุงูุงุฎุชูุงูุงุช ูู ุงูุฅุญุฏุงุซูุงุช ูุงููุฎุทูุทุงุช.  ูุชู ุฃุฎุฐ ุงููุณุงูุฉ ูู ููุทุฉ ุฅูู ูุณุชุทูู ูุญุงูุฏ ูุชููู ุงูุญุฏ ุงูุฃุฏูู ูููุณุงูุฉ ูู ุงูููุทุฉ ุฅูู ูุฐุง ุงููุณุชุทูู ุฃู ุงูุตูุฑ ุฅุฐุง ูุงูุช ุงูููุทุฉ ุชูุน ุฏุงุฎู ุงููุณุชุทูู.  ูู ุงูุณูู ุญุณุงุจ ูุฐู ุงููููุฉ ุฏูู ุงููุฑูุฑ ุนุจุฑ ููุงุท ุชุงุจุนุฉ ุ ููุง ุชุฒูุฏ ุงููููุฉ ุจุงูุชุฃููุฏ ุนู ุงููุณุงูุฉ ุฅูู ุฃู ููุทุฉ ูุฑุนูุฉ. <br><br>  ูููุธุฑ ูู ุฎูุงุฑุฒููุฉ ุงูุจุญุซ ููุงุณุชุนูุงู ุฃุนูุงู. <br><br><img src="https://habrastorage.org/web/84b/56a/075/84b56a075dbd42d6b5d8cc8cb10c4b01.png"><br><br>  ูุจุฏุฃ ุงูุจุญุซ ุจุงูุนูุฏุฉ ุงูุฌุฐุฑูุฉ.  ุชุญุชูู ุงูุนูุฏุฉ ุนูู ูุณุชุทูููู ูุญูุทูู.  ุงููุณุงูุฉ ุฅูู (1ุ1) - (6ุ3) ูู 4.0 ูุฅูู (5ุ5) - (8ุ8) 1.0. <br><br>  ูุชู ุชูุฑูุฑ ุงูุนูุฏ ุงูุชุงุจุนุฉ ุจุชุฑุชูุจ ุฒูุงุฏุฉ ุงููุณุงูุฉ.  ุจูุฐู ุงูุทุฑููุฉ ุ ููุฒู ุฃููุงู ุฅูู ุฃูุฑุจ ุนูุฏุฉ ุชุงุจุนุฉ ููุญุณุจ ุงููุณุงูุงุช ุฅูู ุงูููุงุท (ุณูุธูุฑ ุงูุฃุฑูุงู ูู ุงูุดูู ููุฑุคูุฉ): <br><br><img src="https://habrastorage.org/web/491/959/f07/491959f070754781b794e0dff01d5aec.png"><br><br>  ูุฐู ุงููุนูููุงุช ุชููู ูุฅุฑุฌุงุน ุฃูู ููุทุชูู ุ (5ุ5) ู (7ุ8).  ูุธุฑูุง ูุฃููุง ูุฏุฑู ุฃู ุงููุณุงูุฉ ุฅูู ุงูููุงุท ุงูุชู ุชูุน ุฏุงุฎู ุงููุณุชุทูู (1ุ1) - (6ุ3) ูู 4.0 ุฃู ุฃูุจุฑ ุ ููุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ุงููุฒูู ุฅูู ุงูุนูุฏุฉ ุงููุฑุนูุฉ ุงูุฃููู. <br><br>  ููู ูุงุฐุง ูู ุงุญุชุฌูุง ุฅูู ุฅูุฌุงุฏ ุงูููุงุท <em>ุงูุซูุงุซ</em> ุงูุฃูููุ <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> points <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> p &lt;-&gt; <span class="hljs-type"><span class="hljs-type">point</span></span> <span class="hljs-string"><span class="hljs-string">'(4,7)'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> p <span class="hljs-comment"><span class="hljs-comment">------- (5,5) (7,8) (8,6) (3 rows)</span></span></code> </pre><br>  ุนูู ุงูุฑุบู ูู ุฃู ุงูุนูุฏุฉ ุงููุฑุนูุฉ ุงูุซุงููุฉ ุชุญุชูู ุนูู ูู ูุฐู ุงูููุงุท ุ ุฅูุง ุฃูู ูุง ูููููุง ุฅุฑุฌุงุน (8ุ6) ุฏูู ุงููุธุฑ ุฅูู ุงูุนูุฏุฉ ุงููุฑุนูุฉ ุงูุฃููู ูุธุฑูุง ูุฃู ูุฐู ุงูุนูุฏุฉ ูููู ุฃู ุชุญุชูู ุนูู ููุงุท ุฃูุฑุจ (ููุฐ 4.0 &lt;4.1). <br><br><img src="https://habrastorage.org/web/9bb/43a/775/9bb43a775fc445769e37af8bb50daae0.png"><br><br>  ุจุงููุณุจุฉ ููุตููู ุงูุฏุงุฎููุฉ ุ ููุถุญ ูุฐุง ุงููุซุงู ูุชุทูุจุงุช ูุธููุฉ ุงููุณุงูุฉ.  ูู ุฎูุงู ุชุญุฏูุฏ ูุณุงูุฉ ุฃุตุบุฑ (4.0 ุจุฏูุงู ูู 4.5 ุงููุนูู) ููุตู ุงูุซุงูู ุ ูููุง ุจุชูููู ุงูููุงุกุฉ (ุจุฏุฃุช ุงูุฎูุงุฑุฒููุฉ ุฏูู ุฏุงุน ูู ูุญุต ุนูุฏุฉ ุฅุถุงููุฉ) ุ ููููุง ูู ููุณุฑ ุตุญุฉ ุงูุฎูุงุฑุฒููุฉ. <br><br>  ุญุชู ููุช ูุฑูุจ ุ ูุงูุช GiST ูู ุทุฑููุฉ ุงููุตูู ุงููุญูุฏุฉ ุงููุงุฏุฑุฉ ุนูู ุงูุชุนุงูู ูุน ูุดุบูู ุงูุทูุจุงุช.  ููู ุงููุถุน ูุฏ ุชุบูุฑ: ููุฏ ุงูุถูุช ุจุงููุนู ุทุฑููุฉ ุงููุตูู ุฅูู RUM (ููุฒูุฏ ูู ุงูููุงูุดุฉ) ุฅูู ูุฐู ุงููุฌููุนุฉ ูู ุงูุทุฑู ุ ูููุณ ูู ุงููุฑุฌุญ ุฃู ุชูุถู B-tree ุงููุฏููุฉ ุงูุฌูุฏุฉ ุฅูููู: ูุชู ุชุทููุฑ ุชุตุญูุญ ูุงู ุจูุถุนู ููููุชุง ุฌููุฎูู ุ ุฒููููุง ุ ูุงูุดูุง ุงููุฌุชูุน. <br><blockquote style=";text-align:right;direction:rtl">  ุงุนุชุจุงุฑูุง ูู ูุงุฑุณ 2019 ุ ุชูุช ุฅุถุงูุฉ ุฏุนู k-NN ูู SP-GiST ูู PostgreSQL 12 ุงููุงุฏู (ุชุฃููู Nikita ุฃูุถูุง).  ุงูุชุตุญูุญ ูุดุฌุฑุฉ ุจ ูุง ูุฒุงู ููุฏ ุงูุชูุฏู. <br></blockquote><br><h2 style=";text-align:right;direction:rtl">  R- ุดุฌุฑุฉ ููุชุฑุงุช </h2><br>  ูุซุงู ุขุฎุฑ ูุงุณุชุฎุฏุงู ุทุฑููุฉ ุงููุตูู ุฅูู GiST ูู ููุฑุณุฉ ุงูููุงุตู ุงูุฒูููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูููุงุตู ุงูุฒูููุฉ (ููุน "tsrange").  ูู ุงูุงุฎุชูุงู ูู ุฃู ุงูุนูุฏ ุงูุฏุงุฎููุฉ ุณุชุญุชูู ุนูู ููุงุตู ุฒูููุฉ ูุญุฏุฏุฉ ุจุฏูุงู ูู ุญุฏูุฏ ุงููุณุชุทููุงุช. <br><br>  ุฏุนูุง ููุธุฑ ูุซุงู ุจุณูุท.  ุณูููู ุจุชุฃุฌูุฑ ููุงุตู ุญุฌุฒ ููุฎ ูุชุฎุฒูููุง ูู ุฌุฏูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reservations(during <span class="hljs-type"><span class="hljs-type">tsrange</span></span>); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> reservations(during) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'[2016-12-30, 2017-01-09)'</span></span>), (<span class="hljs-string"><span class="hljs-string">'[2017-02-23, 2017-02-27)'</span></span>), (<span class="hljs-string"><span class="hljs-string">'[2017-04-29, 2017-05-02)'</span></span>); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> gist(during);</code> </pre><br>  ูููู ุงุณุชุฎุฏุงู ุงูููุฑุณ ูุชุณุฑูุน ุงูุงุณุชุนูุงู ุงูุชุงูู ุ ุนูู ุณุจูู ุงููุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> during &amp;&amp; <span class="hljs-string"><span class="hljs-string">'[2017-01-01, 2017-04-01)'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> during ----------------------------------------------- ["2016-12-30 00:00:00","2017-01-08 00:00:00") ["2017-02-23 00:00:00","2017-02-26 00:00:00") (2 rows)</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> during &amp;&amp; <span class="hljs-string"><span class="hljs-string">'[2017-01-01, 2017-04-01)'</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ------------------------------------------------------------------------------------ Index Only Scan using reservations_during_idx on reservations Index Cond: (during &amp;&amp; '["2017-01-01 00:00:00","2017-04-01 00:00:00")'::tsrange) (2 rows)</code> </pre><br>  <code>&amp;&amp;</code> ุนุงูู ุงูุชุดุบูู ููููุงุตู ูุดูุฑ ุฅูู ุงูุชูุงุทุน ุ  ูุฐูู ุ ูุฌุจ ุฃู ููุฑุฌุน ุงูุงุณุชุนูุงู ุฌููุน ุงูููุงุตู ุงูุฒูููุฉ ุงููุชูุงุทุนุฉ ูุน ุงููุชุฑุฉ ุงููุนุทุงุฉ.  ุจุงููุณุจุฉ ุฅูู ูุฐุง ุงููุดุบู ุ ุชุญุฏุฏ ูุธููุฉ ุงูุชูุงุณู ูุง ุฅุฐุง ูุงู ุงููุงุตู ุงูุฒููู ุงููุญุฏุฏ ูุชูุงุทุน ูุน ูููุฉ ูู ุตู ุฏุงุฎูู ุฃู ูุฑูุฉ. <br><br>  ูุงุญุธ ุฃู ูุฐุง ูุง ูุชุนูู ุจุงูุญุตูู ุนูู ูุชุฑุงุช ุฒูููุฉ ุจุชุฑุชูุจ ูุนูู ุ ุนูู ุงูุฑุบู ูู ุฃู ุนูุงูู ุงูููุงุฑูุฉ ูุญุฏุฏุฉ ููููุงุตู ุงูุฒูููุฉ.  ูููููุง ุงุณุชุฎุฏุงู ููุฑุณ "btree" ููููุงุตู ุงูุฒูููุฉ ุ ูููู ูู ูุฐู ุงูุญุงูุฉ ุ ูุชุนูู ุนูููุง ุงูุงุณุชุบูุงุก ุนู ุฏุนู ุนูููุงุช ูุซู ูุฐู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> amop.amopopr::<span class="hljs-type"><span class="hljs-type">regoperator</span></span>, amop.amoppurpose, amop.amopstrategy <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_opclass opc, pg_opfamily opf, pg_am am, pg_amop amop <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> opc.opcname = <span class="hljs-string"><span class="hljs-string">'range_ops'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> opf.oid = opc.opcfamily <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> am.oid = opf.opfmethod <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> amop.amopfamily = opc.opcfamily <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> am.amname = <span class="hljs-string"><span class="hljs-string">'gist'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> amop.amoplefttype = opc.opcintype;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> amopopr | amoppurpose | amopstrategy -------------------------+-------------+-------------- @&gt;(anyrange,anyelement) | s | 16 contains element &lt;&lt;(anyrange,anyrange) | s | 1 strictly left &amp;&lt;(anyrange,anyrange) | s | 2 not beyond right boundary &amp;&amp;(anyrange,anyrange) | s | 3 intersects &amp;&gt;(anyrange,anyrange) | s | 4 not beyond left boundary &gt;&gt;(anyrange,anyrange) | s | 5 strictly right -|-(anyrange,anyrange) | s | 6 adjacent @&gt;(anyrange,anyrange) | s | 7 contains interval &lt;@(anyrange,anyrange) | s | 8 contained in interval =(anyrange,anyrange) | s | 18 equals (10 rows)</code> </pre><br>  (ุจุงุณุชุซูุงุก ุงููุณุงูุงุฉ ุ ุงูููุฌูุฏุฉ ูู ูุฆุฉ ุงููุดุบู ูุทุฑููุฉ ุงููุตูู "btree".) <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฏุงุฎููุฉ </h3><br>  ูููููุง ุฃู ููุธุฑ ูู ุงูุฏุงุฎู ุจุงุณุชุฎุฏุงู ููุณ ุงูุชูุฏูุฏ "gevel".  ูุญุชุงุฌ ููุท ุฅูู ุชุฐูุฑ ุชุบููุฑ ููุน ุงูุจูุงูุงุช ูู ุงูููุงููุฉ ุฅูู gist_print: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span>, a <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> gist_print(<span class="hljs-string"><span class="hljs-string">'reservations_during_idx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> t(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">valid</span></span> <span class="hljs-type"><span class="hljs-type">bool</span></span>, a <span class="hljs-type"><span class="hljs-type">tsrange</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> level | a -------+----------------------------------------------- 1 | ["2016-12-30 00:00:00","2017-01-09 00:00:00") 1 | ["2017-02-23 00:00:00","2017-02-27 00:00:00") 1 | ["2017-04-29 00:00:00","2017-05-02 00:00:00") (3 rows)</code> </pre><br><h2 style=";text-align:right;direction:rtl">  ูููุฏ ุงูุงุณุชุจุนุงุฏ </h2><br>  ูููู ุงุณุชุฎุฏุงู ููุฑุณ GiST ูุฏุนู ูููุฏ ุงูุงุณุชุจุนุงุฏ (ุจุงุณุชุซูุงุก). <br><br>  ูุถูู ููุฏ ุงูุงุณุชุซูุงุก ุงูุญููู ุงููุนููุฉ ูุฃู ูู ุตููู ุงูุฌุฏูููู ุฃูุง "ุชุชูุงูู" ูุน ุจุนุถูุง ุงูุจุนุถ ูู ุญูุซ ุจุนุถ ุงูุนูุงูู.  ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุนุงูู ุงูุชุดุบูู "ูุณุงูู" ุ ูุณูุญุตู ุจุงูุถุจุท ุนูู ุงูููุฏ ุงููุฑูุฏ: ูุง ุชุณุงูู ุงูุญููู ุงููุญุฏุฏุฉ ูุฃู ุตููู ูุนูุง. <br><br>  ูุชู ุฏุนู ูููุฏ ุงูุงุณุชุจุนุงุฏ ุจูุงุณุทุฉ ุงูููุฑุณ ุ ููุฐูู ุงูููุฏ ุงููุฑูุฏ.  ูููููุง ุงุฎุชูุงุฑ ุฃู ูุดุบู ุจุญูุซ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชู ุฏุนูู ุจูุงุณุทุฉ ุทุฑููุฉ ุงูููุฑุณ - ุฎุงุตูุฉ "can_exclude" (ุนูู ุณุจูู ุงููุซุงู ุ "btree" ุฃู GiST ุฃู SP-GiST ุ ูููู ููุณ GIN). </li><li style=";text-align:right;direction:rtl">  ูู ุงูููุทูู ุ ููุฐุง ูู ุ ุชู ุงุณุชููุงุก ุงูุดุฑุท: ุงููุดุบู ุจ = ุจ ุงููุดุบู ุฃ. </li></ol><br>  ูุฐู ูุงุฆูุฉ ูู ุงูุงุณุชุฑุงุชูุฌูุงุช ูุงูุฃูุซูุฉ ุงูููุงุณุจุฉ ูููุดุบููู (ููุง ูุฐูุฑ ุ ูููู ุฃู ูููู ูููุดุบููู ุฃุณูุงุก ูุฎุชููุฉ ููู ูููููุง ูุชุงุญูู ูุฌููุน ุฃููุงุน ุงูุจูุงูุงุช): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนู "btree": <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  "ูุณุงูู" <code>=</code> </li></ul></li><li style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ุฅูู GiST ู SP-GiST: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  "ุชูุงุทุน" <code>&amp;&amp;</code> </li><li style=";text-align:right;direction:rtl">  "ุตุฏูุฉ" <code>~=</code> </li><li style=";text-align:right;direction:rtl">  ุงููุฌุงูุฑ <code>-|-</code> </li></ul></li></ul><br>  ูุงุญุธ ุฃูู ูููููุง ุงุณุชุฎุฏุงู ุนุงูู ุงููุณุงูุงุฉ ูู ููุฏ ุงูุงุณุชุจุนุงุฏ ุ ููููู ุบูุฑ ุนููู: ุณูููู ุงูููุฏ ุงููุฑูุฏ ุฃูุซุฑ ููุงุกุฉ.  ูุฐุง ูู ุจุงูุถุจุท ุงูุณุจุจ ูู ุฃููุง ูู ูุชุทุฑู ุฅูู ูููุฏ ุงูุงุณุชุจุนุงุฏ ุนูุฏูุง ูุงูุดูุง ุงูุฃุดุฌุงุฑ ุจ. <br><br>  ุฏุนูุง ููุฏู ูุซุงููุง ุนูู ุงุณุชุฎุฏุงู ููุฏ ุงูุงุณุชุซูุงุก.  ูู ุงููุนููู ุนุฏู ุงูุณูุงุญ ุจุงูุญุฌุฒ ููุชุฑุงุช ูุชูุงุทุนุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exclude</span></span> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> gist(during <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> &amp;&amp;);</code> </pre><br>  ุจูุฌุฑุฏ ุฅูุดุงุก ููุฏ ุงูุงุณุชุจุนุงุฏ ุ ูููููุง ุฅุถุงูุฉ ุตููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> reservations(during) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'[2017-06-10, 2017-06-13)'</span></span>);</code> </pre><br>  ููู ูุญุงููุฉ ุฅุฏุฑุงุฌ ูุงุตู ุฒููู ูุชูุงุทุน ูู ุงูุฌุฏูู ุณููุชุฌ ุนูู ุฎุทุฃ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> reservations(during) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'[2017-05-15, 2017-06-15)'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ERROR: conflicting key value violates exclusion constraint "reservations_during_excl" DETAIL: Key (during)=(["2017-05-15 00:00:00","2017-06-15 00:00:00")) conflicts with existing key (during)=(["2017-06-10 00:00:00","2017-06-13 00:00:00")).</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ููุญู "Btree_gist" </h3><br>  ุฏุนููุง ุชุนููุฏ ุงููุดููุฉ.  ููุณุน ุฃุนูุงููุง ุงููุชูุงุถุนุฉ ุ ูุณูุคุฌุฑ ุงูุนุฏูุฏ ูู ุงูููุงุฒู ุงูุฑูููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> house_no <span class="hljs-type"><span class="hljs-type">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre><br>  ูุญุชุงุฌ ุฅูู ุชุบููุฑ ููุฏ ุงูุงุณุชุจุนุงุฏ ุญุชู ูุชู ุฃุฎุฐ ุฃุฑูุงู ุงูููุงุฒู ูู ุงูุงุนุชุจุงุฑ.  ููุน ุฐูู ุ ูุง ูุฏุนู GiST ุนูููุฉ ุงููุณุงูุงุฉ ููุฃุนุฏุงุฏ ุงูุตุญูุญุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">drop</span></span> <span class="hljs-keyword"><span class="hljs-keyword">constraint</span></span> reservations_during_excl; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exclude</span></span> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> gist(during <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> &amp;&amp;, house_no <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> =);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ERROR: data type integer has no default operator class for access method "gist" HINT: You must specify an operator class for the index or define a default operator class for the data type.</code> </pre><br>  ูู ูุฐู ุงูุญุงูุฉ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุณุงุนุฏ</a> ุงูุชูุฏูุฏ " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">btree_gist</a> " ุ ููุง ูุถูู ุฏุนู GiST ููุนูููุงุช ุงูููุงุฒูุฉ ูุฃุดุฌุงุฑ B.  GiST ุ ูู ููุงูุฉ ุงููุทุงู ุ ูููู ุฃู ุชุฏุนู ุฃู ูุดุบููู ุ ูููุงุฐุง ูุง ููุจุบู ููุง ุฃู ูุนููู ูุฏุนู "ุฃูุจุฑ" ุ "ุฃูู" ุ ู "ูุชุณุงููุฉ"ุ <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> btree_gist; postgres=# <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> reservations <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exclude</span></span> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> gist(during <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> &amp;&amp;, house_no <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> =);</code> </pre><br>  ุงูุขู ูุง ุฒููุง ูุง ูุณุชุทูุน ุญุฌุฒ ุงูููุฎ ุงูุฃูู ูููุณ ุงูุชูุงุฑูุฎ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> reservations(during, house_no) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'[2017-05-15, 2017-06-15)'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ERROR: conflicting key value violates exclusion constraint "reservations_during_house_no_excl"</code> </pre><br>  ููุน ุฐูู ุ ูููููุง ุญุฌุฒ ุงูุซุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> reservations(during, house_no) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'[2017-05-15, 2017-06-15)'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);</code> </pre><br>  ููู ุนููู ุฃู ุชุฏุฑู ุฃูู ุนูู ุงูุฑุบู ูู ุฃู GiST ูููููุง ุฏุนู ุงููุดุบููู "ุงูุฃุนุธู" ู "ุงูุฃูู" ู "ูุชุณุงููู" ุจุทุฑููุฉ ูุง ุ ุฅูุง ุฃู B-tree ูุง ุฒุงู ููุนู ุฐูู ุจุดูู ุฃูุถู.  ูุฐูู ุ ูุง ูุฌุฏุฑ ุงุณุชุฎุฏุงู ูุฐู ุงูุชูููุฉ ุฅูุง ุฅุฐุง ูุงู ูุคุดุฑ GiST ุถุฑูุฑููุง ุจุดูู ุฃุณุงุณู ุ ููุง ูู ูุซุงููุง. <br><br><h2 style=";text-align:right;direction:rtl">  RD- ุดุฌุฑุฉ ููุจุญุซ ุนู ุงููุต ุงููุงูู </h2><br><h3 style=";text-align:right;direction:rtl">  ุญูู ุงูุจุญุซ ุนู ุงููุต ุงููุงูู </h3><br>  ููุจุฏุฃ ุจููุฏูุฉ ุจุณูุทุฉ ููุจุญุซ ูู ุงููุต ุงููุงูู ูู PostgreSQL (ุฅุฐุง ููุช ุชุนุฑู ุฐูู ุ ูููููู ุชุฎุทู ูุฐุง ุงููุณู). <br><br>  ุชุชูุซู ูููุฉ ุงูุจุญุซ ุนู ุงููุต ุงููุงูู ูู ุงูุชุญุฏูุฏ ูู ูุฌููุนุฉ ุงููุณุชูุฏุงุช ุชูู ุงููุณุชูุฏุงุช ุงูุชู <em>ุชุทุงุจู</em> ุงุณุชุนูุงู ุงูุจุญุซ.  (ุฅุฐุง ูุงู ููุงู ุงูุนุฏูุฏ ูู ุงููุณุชูุฏุงุช ุงููุทุงุจูุฉ ุ ููู ุงูููู ุงูุนุซูุฑ <em>ุนูู ุฃูุถู ุงููุทุงุจูุฉ</em> ุ ููููุง ูู ูููู ุดูุฆูุง ุนููุง ูู ูุฐู ุงููุฑุญูุฉ.) <br><br>  ูุฃุบุฑุงุถ ุงูุจุญุซ ุ ูุชู ุชุญููู ุงููุณุชูุฏ ุฅูู ููุน ูุชุฎุตุต "tsvector" ุ ูุงูุฐู ูุญุชูู ุนูู lexemes ูููุงูุนูุง ูู ุงููุณุชูุฏ.  Lexemes ูู ูููุงุช ูุชู ุชุญููููุง ุฅูู ุงููููุฐุฌ ุงูููุงุณุจ ููุจุญุซ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุชู ุนุงุฏุฉู ุชุญููู ุงููููุงุช ุฅูู ุฃุญุฑู ุตุบูุฑุฉ ุ ููุชู ูุทุน ุงูููุงูุงุช ุงููุชุบูุฑุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> to_tsvector(<span class="hljs-string"><span class="hljs-string">'There was a crooked man, and he walked a crooked mile'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> to_tsvector ----------------------------------------- 'crook':4,10 'man':5 'mile':11 'walk':8 (1 row)</code> </pre><br>  ูููููุง ุฃูุถูุง ุฃู ูุฑู ุฃู ุจุนุถ ุงููููุงุช (ุชุณูู <em>ูููุงุช ุงูุฅููุงู</em> ) ูุชู ุฅุณูุงุทูุง ุชูุงููุง ("ููุงู" ุ "ูุงู" ุ "ุฃ" ุ "ู" ุ "ูู") ูุฃููุง ูู ุงูููุชุฑุถ ุฃู ุชุญุฏุซ ูุซูุฑูุง ููุจุญุซ ุนููู ุจุดูู ููุทูู.  ูููู ุจุงูุชุฃููุฏ ุชูููู ูู ูุฐู ุงูุชุญูููุงุช ุ ููู ูุฐู ูุตุฉ ุฃุฎุฑู. <br><br>  ูุชู ุชูุซูู ุงุณุชุนูุงู ุงูุจุญุซ ุจููุน ุขุฎุฑ: "tsquery".  ุจุดูู ุชูุฑูุจู ุ ูุชููู ุงูุงุณุชุนูุงู ูู ูุงุญุฏุฉ ุฃู ุนุฏุฉ ููุตูุงุช ูุดุชุฑูุฉ ูู ุฎูุงู ุงูุฑูุงุจุท: "ู" &amp; "" ุฃู "| ุ" ูุง "! .. ูููููุง ุฃูุถูุง ุงุณุชุฎุฏุงู ุงูุฃููุงุณ ูุชูุถูุญ ุฃุณุจููุฉ ุงูุนูููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> to_tsquery(<span class="hljs-string"><span class="hljs-string">'man &amp; (walking | running)'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> to_tsquery ---------------------------- 'man' &amp; ( 'walk' | 'run' ) (1 row)</code> </pre><br>  ูุชู ุงุณุชุฎุฏุงู ุนุงูู ุชุทุงุจู ูุงุญุฏ <code>@@</code> ุนู ุงููุต ุงููุงูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> to_tsvector(<span class="hljs-string"><span class="hljs-string">'There was a crooked man, and he walked a crooked mile'</span></span>) @@ to_tsquery(<span class="hljs-string"><span class="hljs-string">'man &amp; (walking | running)'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ?column? ---------- t (1 row)</code> </pre><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> to_tsvector(<span class="hljs-string"><span class="hljs-string">'There was a crooked man, and he walked a crooked mile'</span></span>) @@ to_tsquery(<span class="hljs-string"><span class="hljs-string">'man &amp; (going | running)'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ?column? ---------- f (1 row)</code> </pre><br>  ูุฐู ุงููุนูููุงุช ูุงููุฉ ุงูุขู.  ุณูุชุนูู ููููุงู ูู ุงูุจุญุซ ุนู ุงููุต ุงููุงูู ูู ููุงูุฉ ุชุงููุฉ ุชุชุถูู ููุฑุณ GIN. <br><br><h3 style=";text-align:right;direction:rtl">  RD-ุงูุฃุดุฌุงุฑ </h3><br>  ููุจุญุซ ุจุณุฑุนุฉ ุงููุต ุงููุงูู ุ ุฃููุงู ุ ูุญุชุงุฌ ุงูุฌุฏูู ุฅูู ุชุฎุฒูู ุนููุฏ ูู ุงูููุน "tsvector" (ูุชุฌูุจ ุฅุฌุฑุงุก ุชุญููู ูููู ูู ูู ูุฑุฉ ุนูุฏ ุงูุจุญุซ) ูุซุงููุงู ุ ูุฌุจ ุฃู ูุชู ุจูุงุก ููุฑุณ ุนูู ูุฐุง ุงูุนููุฏ.  ุฅุญุฏู ุทุฑู ุงููุตูู ุงูููููุฉ ููุฐุง ูู GiST. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> ts(doc <span class="hljs-type"><span class="hljs-type">text</span></span>, doc_tsv <span class="hljs-type"><span class="hljs-type">tsvector</span></span>); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> ts <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> gist(doc_tsv); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ts(doc) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'Can a sheet slitter slit sheets?'</span></span>), (<span class="hljs-string"><span class="hljs-string">'How many sheets could a sheet slitter slit?'</span></span>), (<span class="hljs-string"><span class="hljs-string">'I slit a sheet, a sheet I slit.'</span></span>), (<span class="hljs-string"><span class="hljs-string">'Upon a slitted sheet I sit.'</span></span>), (<span class="hljs-string"><span class="hljs-string">'Whoever slit the sheets is a good sheet slitter.'</span></span>), (<span class="hljs-string"><span class="hljs-string">'I am a sheet slitter.'</span></span>), (<span class="hljs-string"><span class="hljs-string">'I slit sheets.'</span></span>), (<span class="hljs-string"><span class="hljs-string">'I am the sleekest sheet slitter that ever slit sheets.'</span></span>), (<span class="hljs-string"><span class="hljs-string">'She slits the sheet she sits on.'</span></span>); postgres=# <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> ts <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> doc_tsv = to_tsvector(doc);</code> </pre><br>  ูู ุงููุฑูุญ ุ ุจุงูุชุฃููุฏ ุ ุชูููู ุฃุญุฏ ุงููุดุบููู ุจุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ (ุชุญููู ุงููุณุชูุฏ ุฅูู "tsvector"). <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">postgres=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ts;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">-[ RECORD 1 ]---------------------------------------------------- doc | Can a sheet slitter slit sheets? doc_tsv | 'sheet':3,6 'slit':5 'slitter':4 -[ RECORD 2 ]---------------------------------------------------- doc | How many sheets could a sheet slitter slit? doc_tsv | 'could':4 'mani':2 'sheet':3,6 'slit':8 'slitter':7 -[ RECORD 3 ]---------------------------------------------------- doc | I slit a sheet, a sheet I slit. doc_tsv | 'sheet':4,6 'slit':2,8 -[ RECORD 4 ]---------------------------------------------------- doc | Upon a slitted sheet I sit. doc_tsv | 'sheet':4 'sit':6 'slit':3 'upon':1 -[ RECORD 5 ]---------------------------------------------------- doc | Whoever slit the sheets is a good sheet slitter. doc_tsv | 'good':7 'sheet':4,8 'slit':2 'slitter':9 'whoever':1 -[ RECORD 6 ]---------------------------------------------------- doc | I am a sheet slitter. doc_tsv | 'sheet':4 'slitter':5 -[ RECORD 7 ]---------------------------------------------------- doc | I slit sheets. doc_tsv | 'sheet':3 'slit':2 -[ RECORD 8 ]---------------------------------------------------- doc | I am the sleekest sheet slitter that ever slit sheets. doc_tsv | 'ever':8 'sheet':5,10 'sleekest':4 'slit':9 'slitter':6 -[ RECORD 9 ]---------------------------------------------------- doc | She slits the sheet she sits on. doc_tsv | 'sheet':4 'sit':6 'slit':2</code> </pre><br>  ููู ููุจุบู ููููุฉ ุงูููุฑุณุ  ุฅู ุงุณุชุฎุฏุงู R-tree ูุจุงุดุฑุฉ ููุณ ุฎูุงุฑูุง ูุฃูู ูู ุบูุฑ ุงููุงุถุญ ููููุฉ ุชุญุฏูุฏ "ูุณุชุทูู ูุญุงุท" ูููุณุชูุฏุงุช.  ูููู ูููููุง ุชุทุจูู ุจุนุถ ุงูุชุนุฏููุงุช ุนูู ูุฐุง ุงูููุฌ ูููุฌููุนุงุช ุ ูุง ูุณูู ุดุฌุฑุฉ RD (RD ุชุนูู "ุฏููุฉ ุฑูุณูุฉ").  ูู ุงูููููู ุฃู ุงููุฌููุนุฉ ูู ูุฌููุนุฉ ูู ุงููุนุฌูุงุช ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุจุดูู ุนุงู ุ ูููู ุฃู ุชููู ุงููุฌููุนุฉ ููุฌูุฏุฉ. <br><br>  ุชุชูุซู ููุฑุฉ ุฃุดุฌุงุฑ RD ูู ุงุณุชุจุฏุงู ุงููุณุชุทูู ุงููุญูุท ุจูุฌููุนุฉ ูุญูุท ุ ุฃู ูุฌููุนุฉ ุชุญุชูู ุนูู ุฌููุน ุนูุงุตุฑ ูุฌููุนุงุช ุงูุฃุทูุงู. <br><br>  ูุทุฑุญ ุณุคุงู ููู ุญูู ููููุฉ ุชูุซูู ุงููุฌููุนุงุช ูู ุตููู ุงูููุฑุณ.  ุงูุทุฑููุฉ ุงูุฃูุซุฑ ูุถูุญุง ูู ููุท ูุชุนุฏุงุฏ ุฌููุน ุนูุงุตุฑ ุงููุฌููุนุฉ.  ูุฏ ูุจุฏู ูุฐุง ููุง ููู: <br><br><img src="https://habrastorage.org/webt/cp/ul/cx/cpulcxgydwxo8fl0ul0bdlsn3ws.png"><br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ูููุตูู ุฅูู ูู ุญุงูุฉ ุนูู <code>doc_tsv @@ to_tsquery('sit')</code> ูููููุง ุงููุฒูู ุฅูุง ุฅูู ุชูู ุงูุนูุฏ ุงูุชู ุชุญุชูู ุนูู lexeme "sit": <br><br><img src="https://habrastorage.org/webt/h9/2g/4j/h92g4jpzw_7wj-x3katxlwrw3ac.png"><br><br>  ูุฐุง ุงูุชูุซูู ูุฏูู ูุถุงูุง ูุงุถุญุฉ.  ูููู ุฃู ูููู ุนุฏุฏ ุงููููุงุช ูู ุงููุณุชูุฏ ูุจูุฑูุง ุฌุฏูุง ุ ูุฐูู ุณูููู ุญุฌู ุตููู ุงูููุฑุณ ูุจูุฑูุง ูุณูุตู ุฅูู TOAST ุ ููุง ูุฌุนู ุงูููุฑุณ ุฃูู ููุงุกุฉ ุจูุซูุฑ.  ุญุชู ูู ูุงู ูู ูุณุชูุฏ ูุญุชูู ุนูู ุนุฏุฏ ูููู ูู ุงููููุงุช ุงููุนุฌููุฉ ุงููุฑูุฏุฉ ุ ููุฏ ูุธู ุงุชุญุงุฏ ุงููุฌููุนุงุช ูุจูุฑูุง ุฌุฏูุง: ูููุง ุงุฑุชูุน ูุคุดุฑ ุงูููุฑุณ ุงูุฃูุจุฑ ุฅูู ุงูุฌุฐุฑ. <br><br>  ูุชู ุงุณุชุฎุฏุงู ุชูุซูู ูุซู ูุฐุง ูู ุจุนุถ ุงูุฃุญูุงู ุ ูููู ูุฃููุงุน ุงูุจูุงูุงุช ุงูุฃุฎุฑู.  ููุณุชุฎุฏู ุงูุจุญุซ ุนู ุงููุต ุงููุงูู ุญููุง ุขุฎุฑ ุฃูุซุฑ ุฅุญูุงูุง ุ ููู ูุง ูุณูู <em>ุดุฌุฑุฉ ุงูุชูููุน</em> .  ููุฑุชูุง ูุฃูููุฉ ุฌุฏุง ูุฌููุน ุงูุฐูู ุชุนุงูููุง ูุน ูุฑุดุญ ุจููู. <br><br>  ูููู ุชูุซูู ูู ูุนุฌู <em>ุจุชูููุนู</em> : ุณูุณูุฉ ุจุช ุฐุงุช ุทูู ูุนูู ุญูุซ ุชููู ูู ุงูุจุชุงุช ุจุงุณุชุซูุงุก ูุงุญุฏุฉ.  ูุชู ุชุญุฏูุฏ ููุถุน ูุฐุง ุงูุจุช ุจูุงุณุทุฉ ูููุฉ ุฏุงูุฉ ุงูุชุฌุฒุฆุฉ ูู lexeme (ูุงูุดูุง ุงูุฃุฌุฒุงุก ุงูุฏุงุฎููุฉ ููุธุงุฆู ุงูุชุฌุฒุฆุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณุงุจููุง</a> ). <br><br>  ุชูููุน ุงููุณุชูุฏ ูู bitwise OR ููุชูููุนุงุช ูู ุฌููุน lexemes ุงููุณุชูุฏ. <br><br>  ูููุชุฑุถ ุงูุชูุงููุน ุงูุชุงููุฉ ูู lexemes: <br><br><pre style=";text-align:right;direction:rtl"> ูููู 1ุ000ุ000
 ูู ุฃู ููุช ูุถู 0001000
 ุฌูุฏ 0000010
 ูุงูู 0000100
 ูุฑูุฉ 0000100
 ุฃููุณ 0100000
 ุงูุฌููุณ 0010000
 ุดู 0001000
 ุงููุดูู 0000001
 ูู 0000010
 ูู ูู 0010000
</pre><br>  ุซู ุชูุงููุน ุงููุซุงุฆู ูุซู ูุฐู: <br><br><pre style=";text-align:right;direction:rtl"> ูููู ูุฑูุฉ ุงูุดู ุงูุดู ูุฑูุฉุ  0001101
 ูู ูุฑูุฉ ูููู ุดู ูุฑูุฉ ุดูุ  1001101
 ุฃูุง ุดู ูุฑูุฉ ุ ุฃูุง ุดู ูุฑูุฉ.  0001100
 ุนูู ูุฑูุฉ ุดู ุฃูุง ุฃุฌูุณ.  0011110
 ูู ุดู ุงูุฃูุฑุงู ูู ุดู ูุฑูุฉ ุฌูุฏ.  0011111
 ุฃูุง ุงููุดูู ูุฑูุฉ.  0000101
 ุฃูุง ุดู ูุฑูุฉ.  0001100
 ุฃูุง ุฃูุซุฑ ุฃูุงูุฉ ุงูุดู ูุฑูุฉ ุดูุงู ูู ุฃู ููุช ูุถู.  0101101
 ุงููุง ุงูุดููู ูุฑูุฉ ุชุฌูุณ ุนูููุง.  0011100
</pre><br>  ูููู ุชูุซูู ุดุฌุฑุฉ ุงูููุฑุณ ุนูู ุงููุญู ุงูุชุงูู: <br><br><img src="https://habrastorage.org/webt/ou/f9/gz/ouf9gz7l7wgmgmgzi5gik7nrg50.png"><br><br>  ูุฒุงูุง ูุฐุง ุงูููุฌ ูุงุถุญุฉ: ุตููู ุงููุคุดุฑ ููุง ุฃุญุฌุงู ุตุบูุฑุฉ ูุชุณุงููุฉ ุ ููุฐุง ุงููุคุดุฑ ูุถุบูุท.  ููู ุงูุนูุจ ูุงุถุญ ุฃูุถูุง: ูุชู ุงูุชุถุญูุฉ ุจุงูุฏูุฉ ูู ุฃุฌู ุงูุงูุชูุงุฒ. <br><br>  ุฏุนูุง ูููุฑ ูู ููุณ ุงูุญุงูุฉ <code>doc_tsv @@ to_tsquery('sit')</code> .  ูุฏุนูุง ูุญุณุจ ุชูููุน ุงุณุชุนูุงู ุงูุจุญุซ ุจููุณ ุงูุทุฑููุฉ ุจุงููุณุจุฉ ูููุณุชูุฏ: 0010000 ูู ูุฐู ุงูุญุงูุฉ.  ูุฌุจ ุฃู ุชููู ุฏุงูุฉ ุงูุชูุงุณู ุจุฅุฑุฌุงุน ูุงูุฉ ุงูุนูุฏ ุงููุฑุนูุฉ ุงูุชู ุชุญุชูู ุชูููุนุงุชูุง ุนูู ุจุช ูุงุญุฏ ุนูู ุงูุฃูู ูู ุชูููุน ุงูุงุณุชุนูุงู: <br><br><img src="https://habrastorage.org/webt/qi/qm/l4/qiqml4l5yu8_qiyvidk-3j8iqhs.png"><br><br>  ูุงุฑู ูุน ุงูุดูู ุฃุนูุงู: ูููููุง ุฃู ูุฑู ุฃู ุงูุดุฌุฑุฉ ุชุญููุช ุฅูู ุงูููู ุงูุฃุตูุฑ ุ ููุง ูุนูู ุญุฏูุซ ุฅูุฌุงุจูุงุช ูุงุฐุจุฉ ูุชุฌุงูุฒุช ุงูุนูุฏ ุงูููุฑุทุฉ ุฃุซูุงุก ุงูุจุญุซ.  ููุง ุงูุชูุทูุง "ูู" ูููุณู ุ ุงูุฐู ูุงู ูุณูุก ุงูุญุธ ููุณ ุชูููุน ูููุณู.  ูู ุงูููู ุนุฏู ุญุฏูุซ ุฃู ุณูุจูุงุช ุฎุงุทุฆุฉ ูู ุงููููุฐุฌ ุ ุฃู ุฃููุง ุนูู ูููู ูู ุนุฏู ุชูููุช ุงูููู ุงููุทููุจุฉ. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฏ ูุญุฏุซ ุฃู ุชุญุตู ุงููุณุชูุฏุงุช ุงููุฎุชููุฉ ุฃูุถูุง ุนูู ููุณ ุงูุชูุงููุน: ูู ุงููุซุงู ุงูุฎุงุต ุจูุง ุ ุงููุณุชูุฏุงุช ุบูุฑ ุงููุญุธูุธุฉ ูู "ููุฏ ููุช ุจุดู ูุฑูุฉ ุ ูุดู ุฃูุง ุดุทุจ" ู "ุฃูุง ุดูุช ูุฑูุฉ" (ูููุงููุง ูุญูู ุชูููุน 0001100).  ูุฅุฐุง ูุงู ุตู ููุฑุณ ุงููุฑูุฉ ูุง ูุฎุฒู ูููุฉ "tsvector" ุ ูุฅู ุงููุคุดุฑ ููุณู ุณูู ูุนุทู ุฅูุฌุงุจูุงุช ุฎุงุทุฆุฉ.  ุจุงูุทุจุน ุ ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุทูุจ ุงูุทุฑููุฉ ูู ูุดุบู ุงูููุฑุณุฉ ุฅุนุงุฏุฉ ูุญุต ุงููุชูุฌุฉ ูุน ุงูุฌุฏูู ุ ูุจุงูุชุงูู ูู ูุฑู ุงููุณุชุฎุฏู ูุฐู ุงูุฅูุฌุงุจูุงุช ุงูุฎุงุทุฆุฉ.  ููู ูุฏ ุชุชุนุฑุถ ููุงุกุฉ ุงูุจุญุซ ููุฎุทุฑ. <br><br>  ูู ุงููุงูุน ุ ูููู ุงูุชูููุน ูุจูุฑูุง ุจููุฏุงุฑ 124 ุจุงูุช ูู ุงูุชูููุฐ ุงูุญุงูู ุจุฏูุงู ูู 7 ุจุชุงุช ูู ุงูุฃุดูุงู ุ ูุฐูู ูู ุบูุฑ ุงููุญุชูู ุฃู ุชุญุฏุซ ุงููุดููุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ููุงุฑูุฉู ุจุงููุซุงู.  ูููู ูู ุงููุงูุน ุ ูุชู ููุฑุณุฉ ุงููุฒูุฏ ูู ุงููุณุชูุฏุงุช ุฃูุถูุง.  ูุชูููู ุนุฏุฏ ุงูุฅูุฌุงุจูุงุช ุงูุฎุงุทุฆุฉ ุจุทุฑููุฉ ุงูููุฑุณ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ูุตุจุญ ุงูุชูููุฐ ุตุนุจูุง ุจุนุถ ุงูุดูุก: ูุชู ุชุฎุฒูู "tsvector" ุงููููุฑุณุฉ ูู ุตู ููุฑุณ ุงูุฃูุฑุงู ุ ูููู ููุท ุฅุฐุง ูุงู ุญุฌูู ุบูุฑ ูุจูุฑ (ุฃูู ููููุงู ูู 1/16 ูู ุตูุญุฉ ุ ุฃู ุญูุงูู ูุตู ููููุจุงูุช ูุตูุญุงุช 8 ููููุจุงูุช). <br><br><h3 style=";text-align:right;direction:rtl">  ูุซุงู </h3><br>  ููุฑู ููู ุชุนูู ุงูููุฑุณุฉ ุนูู ุงูุจูุงูุงุช ุงููุนููุฉ ุ ุฏุนูุง ูุฃุฎุฐ ุฃุฑุดูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู "pgsql-hackers".  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุชูู ุงูุฅุตุฏุงุฑ ุงููุณุชุฎุฏู ูู ุงููุซุงู</a> ุนูู 356125 ุฑุณุงูุฉ ูุน ุชุงุฑูุฎ ุงูุฅุฑุณุงู ูุงูููุถูุน ูุงููุคูู ูุงููุต: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">fts=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> mail_messages <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> sent <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">-[ RECORD 1 ]------------------------------------------------------------------------ id | 1572389 parent_id | 1562808 sent | 1997-06-24 11:31:09 subject | Re: [HACKERS] Array bug is still there.... author | "Thomas G. Lockhart" &lt;Thomas.Lockhart@jpl.nasa.gov&gt; body_plain | Andrew Martin wrote: + | &gt; Just run the regression tests on 6.1 and as I suspected the array bug + | &gt; is still there. The regression test passes because the expected output+ | &gt; has been fixed to the *wrong* output. + | + | OK, I think I understand the current array behavior, which is apparently+ | different than the behavior for v1.0x. + ...</code> </pre><br>  ุฅุถุงูุฉ ูููุก ุนููุฏ ูู ููุน "tsvector" ูุจูุงุก ุงูููุฑุณ.  ุณููุถู ููุง ุฅูู ุซูุงุซ ููู ูู ูุชุฌู ูุงุญุฏ (ุงูููุถูุน ุ ุงููุคูู ุ ููุต ุงูุฑุณุงูุฉ) ูุฅุธูุงุฑ ุฃู ุงููุณุชูุฏ ูุง ูุญุชุงุฌ ุฅูู ุญูู ูุงุญุฏ ุ ููู ูููู ุฃู ูุชููู ูู ุฃุฌุฒุงุก ุชุนุณููุฉ ูุฎุชููุฉ ุชูุงููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">fts=# <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> mail_messages <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> tsv <span class="hljs-type"><span class="hljs-type">tsvector</span></span>; fts=# <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> mail_messages <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> tsv = to_tsvector(subject||<span class="hljs-string"><span class="hljs-string">' '</span></span>||author||<span class="hljs-string"><span class="hljs-string">' '</span></span>||body_plain);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">NOTICE: word is too long to be indexed DETAIL: Words longer than 2047 characters are ignored. ... UPDATE 356125</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">fts=# <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> mail_messages <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> gist(tsv);</code> </pre><br>  ููุง ูุฑู ุ ุชู ุฅุณูุงุท ุนุฏุฏ ูุนูู ูู ุงููููุงุช ุจุณุจุจ ุงูุญุฌู ุงููุจูุฑ ุฌุฏูุง.  ูููู ูุชู ุฅูุดุงุก ุงูููุฑุณ ูู ุงูููุงูุฉ ูููููู ุฏุนู ุงุณุชุนูุงูุงุช ุงูุจุญุซ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">fts=# <span class="hljs-keyword"><span class="hljs-keyword">explain</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">costs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> mail_messages <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> tsv @@ to_tsquery(<span class="hljs-string"><span class="hljs-string">'magic &amp; value'</span></span>);</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> QUERY PLAN ---------------------------------------------------------- Index Scan using mail_messages_tsv_idx on mail_messages (actual time=0.998..416.335 rows=898 loops=1) Index Cond: (tsv @@ to_tsquery('magic &amp; value'::text)) Rows Removed by Index Recheck: 7859 Planning time: 0.203 ms Execution time: 416.492 ms (5 rows)</code> </pre><br>  ูููููุง ุฃู ูุฑู ุฃูู ูุน 898 ุตููุง ูุชุทุงุจููุง ูุน ุงูุดุฑุท ุ ุฃุนุงุฏุช ุทุฑููุฉ ุงููุตูู 7859 ุตููุง ุฅุถุงูููุง ุชู ุชุตููุชูุง ุนู ุทุฑูู ุฅุนุงุฏุฉ ุงููุญุต ุจุงุณุชุฎุฏุงู ุงูุฌุฏูู.  ูุฐุง ูุฏู ุนูู ุชุฃุซูุฑ ุณูุจู ูููุฏุงู ุงูุฏูุฉ ุนูู ุงูููุงุกุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฏุงุฎููุฉ </h3><br>  ูุชุญููู ูุญุชููุงุช ุงูููุฑุณ ุ ุณูุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู ููุญู "gevel": <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">fts=# <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">level</span></span>, a <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> gist_print(<span class="hljs-string"><span class="hljs-string">'mail_messages_tsv_idx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> t(<span class="hljs-keyword"><span class="hljs-keyword">level</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">valid</span></span> <span class="hljs-type"><span class="hljs-type">bool</span></span>, a gtsvector) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;</code> </pre><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> level | a -------+------------------------------- 1 | 992 true bits, 0 false bits 2 | 988 true bits, 4 false bits 3 | 573 true bits, 419 false bits 4 | 65 unique words 4 | 107 unique words 4 | 64 unique words 4 | 42 unique words ...</code> </pre><br>  ููู ุงูููุน ุงููุชุฎุตุต "gtsvector" ุงููุฎุฒููุฉ ูู ุตููู ุงูููุฑุณ ูู ูู ุงููุงูุน ุนูุงูุฉ ุฒุงุฆุฏ ุ ูุฑุจูุง ุ ูุตุฏุฑ "tsvector".  ุฅุฐุง ูุงู ุงููุชุฌู ูุชุงุญูุง ุ ูุฅู ุงูุฅุฎุฑุงุฌ ูุญุชูู ุนูู ุนุฏุฏ ุงููููุงุช (ุงููููุงุช ุงููุฑูุฏุฉ) ุ ูุฅูุง ุ ูุฅู ุนุฏุฏ ุงูุจุชุงุช ุงูุตุญูุญุฉ ูุงูุฎุทุฃ ูู ุงูุชูููุน. <br><br>  ูู ุงููุงุถุญ ุฃูู ูู ุงูุนูุฏุฉ ุงูุฌุฐุฑูุฉ ุ ุงูุญุทู ุงูุชูููุน ุฅูู "ุงููู" ุ ุฃู ุฃู ูุณุชูู ููุฑุณ ูุงุญุฏ ุฃุตุจุญ ุนุฏูู ุงูุฌุฏูู ุนูู ุงูุฅุทูุงู (ูุฃุตุจุญ ูุงุญุฏ ุขุฎุฑ ุนุฏูู ุงููุงุฆุฏุฉ ุชูุฑูุจูุง ุ ูุน ูุฌูุฏ ุฃุฑุจุนุฉ ุจุชุงุช ุฎุงุทุฆุฉ ููุท). <br><br><h2 style=";text-align:right;direction:rtl">  ุฎุตุงุฆุต </h2><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฎุตุงุฆุต ุทุฑููุฉ ุงููุตูู ุฅูู GiST ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชู ุชูุฏูู</a> ุงูุงุณุชุนูุงูุงุช ูุณุจููุง): <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> amname | name | pg_indexam_has_property --------+---------------+------------------------- gist | can_order | f gist | can_unique | f gist | can_multi_col | t gist | can_exclude | t</code> </pre><br>  ูุง ูุชู ุฏุนู ูุฑุฒ ุงูููู ูุงูููุฏ ุงููุฑูุฏ.  ููุง ุฑุฃููุง ุ ูููู ุจูุงุก ุงูููุฑุณ ุนูู ุนุฏุฉ ุฃุนูุฏุฉ ูุงุณุชุฎุฏุงูู ูู ูููุฏ ุงูุงุณุชุจุนุงุฏ. <br><br>  ุชุชููุฑ ุฎุตุงุฆุต ุทุจูุฉ ุงูููุฑุณ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> name | pg_index_has_property ---------------+----------------------- clusterable | t index_scan | t bitmap_scan | t backward_scan | f</code> </pre><br>  ูุงูุฎูุงุต ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุชูู ุงูุฎุงุตุฉ ุจุทุจูุฉ ุงูุนููุฏ.  ุจุนุถ ุงูุฎุตุงุฆุต ูุณุชููุฉ ุนู ูุฆุงุช ุงููุดุบููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> name | pg_index_column_has_property --------------------+------------------------------ asc | f desc | f nulls_first | f nulls_last | f orderable | f search_array | f search_nulls | t</code> </pre><br>  (ุงููุฑุฒ ุบูุฑ ูุนุชูุฏ ุ ูุง ูููู ุงุณุชุฎุฏุงู ุงูููุฑุณ ููุจุญุซ ูู ุตููู ุ ูุชู ุฏุนู ุงูููู ุงูุฎุงููุฉ). <br><br>  ููู ุงูุฎุตุงุฆุต ุงููุชุจููุฉ ุงุซููู ุ "distance_orderable" ู "ุฅุฑุฌุงุน" ุ ุณูู ุชุนุชูุฏ ุนูู ูุฆุฉ ุงููุดุบู ุงููุณุชุฎุฏูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุจุงููุณุจุฉ ููููุงุท ุงูุชู ุณูุญุตู ุนูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> name | pg_index_column_has_property --------------------+------------------------------ distance_orderable | t returnable | t</code> </pre><br>  ุชุฎุจุฑ ุงูุฎุงุตูุฉ ุงูุฃููู ุฃู ุงููุดุบู ุนู ุจุนุฏ ูุชุงุญ ููุจุญุซ ุนู ุฃูุฑุจ ุงูุฌูุฑุงู.  ููุฎุจุฑ ุงูุซุงูู ุฃูู ูููู ุงุณุชุฎุฏุงู ุงูููุฑุณ ูููุญุต ููุท.  ุนูู ุงูุฑุบู ูู ุฃู ุตููู ููุฑุณ ุงูุฃูุฑุงู ุชุฎุฒู ุงููุณุชุทููุงุช ุจุฏูุงู ูู ุงูููุงุท ุ ูุฅู ุทุฑููุฉ ุงููุตูู ูููููุง ุฅุฑุฌุงุน ูุง ูู ูุทููุจ. <br><br>  ูููุง ููู ุฎุตุงุฆุต ุงูููุงุตู ุงูุฒูููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> name | pg_index_column_has_property --------------------+------------------------------ distance_orderable | f returnable | t</code> </pre><br>  ุจุงููุณุจุฉ ููููุงุตู ุงูุฒูููุฉ ุ ูู ูุชู ุชุญุฏูุฏ ูุธููุฉ ุงููุณุงูุฉ ูุจุงูุชุงูู ุ ูุฅู ุงูุจุญุซ ุนู ุฃูุฑุจ ุงูุฌูุฑุงู ุบูุฑ ูููู. <br><br>  ูููุจุญุซ ุนู ุงููุต ุงููุงูู ุ ูุญุตู ุนูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> name | pg_index_column_has_property --------------------+------------------------------ distance_orderable | f returnable | f</code> </pre><br>  ุชู ููุฏ ุฏุนู ุงููุณุญ ุงูุถูุฆู ููุท ุญูุซ ูููู ุฃู ุชุญุชูู ุตููู ุงูุฃูุฑุงู ุนูู ุงูุชูููุน ููุท ุจุฏูู ุงูุจูุงูุงุช ููุณูุง.  ููุน ุฐูู ุ ููุฐู ุฎุณุงุฑุฉ ุจุณูุทุฉ ูุธุฑูุง ูุนุฏู ุงูุชูุงู ุฃู ุฃุญุฏ ุจูููุฉ ููุน "tsvector" ุนูู ุฃู ุญุงู: ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงููููุฉ ูุชุญุฏูุฏ ุงูุตููู ุ ูู ุญูู ุฃู ุงููุต ุงููุตุฏุฑ ูุฌุจ ุฃู ูุธูุฑ ุ ูููู ููููุฏ ูู ุงูููุฑุณ ุนูู ุฃู ุญุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฃููุงุน ุงูุจูุงูุงุช ุงูุฃุฎุฑู </h2><br>  ุฃุฎูุฑูุง ุ ุณูู ูุฐูุฑ ุจุนุถ ุงูุฃููุงุน ุงูุฃุฎุฑู ุงูุชู ูุชู ุฏุนููุง ุญุงูููุง ุจูุงุณุทุฉ ุทุฑููุฉ ุงููุตูู ุฅูู GiST ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃููุงุน ุงูููุฏุณูุฉ ุงูุชู ุชูุช ููุงูุดุชูุง ุจุงููุนู (ุนูู ุณุจูู ุงููุซุงู ูู ุงูููุงุท) ูุงูููุงุตู ุงูุฒูููุฉ ูุฃููุงุน ุงูุจุญุซ ุนู ุงููุต ุงููุงูู. <br><br>  ูู ุงูุฃููุงุน ุงูููุงุณูุฉ ุ ููุฐุง ูู ููุน " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุขููุช</a> " ูุนูุงููู IP.  ุชุชู ุฅุถุงูุฉ ูู ุงูุจุงูู ูู ุฎูุงู ุงูุงูุชุฏุงุฏุงุช: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุฑ cube ููุน ุจูุงูุงุช "cube" ููููุนุจุงุช ูุชุนุฏุฏุฉ ุงูุฃุจุนุงุฏ.  ุจุงููุณุจุฉ ููุฐุง ุงูููุน ุ ููุง ูู ุงูุญุงู ุจุงููุณุจุฉ ููุฃููุงุน ุงูููุฏุณูุฉ ูู ุงููุณุชูู ุ ูุชู ุชุนุฑูู ูุฆุฉ ูุดุบู GiST: R-tree ุ ุงูุจุญุซ ุงูุฏุงุนู ุนู ุฃูุฑุจ ุงูุฌูุฑุงู. <br></li><li style=";text-align:right;direction:rtl">  ูููุฑ seg ููุน ุงูุจูุงูุงุช "seg" ููููุงุตู ุงูุฒูููุฉ ุฐุงุช ุงูุญุฏูุฏ ุงููุญุฏุฏุฉ ูุฏูุฉ ูุนููุฉ ููุถูู ุฏุนููุง ููุคุดุฑ GiST ูููุน ุงูุจูุงูุงุช ูุฐุง (R-tree). <br></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุนูู intraray ุนูู ุชูุณูุน</a> ูุธุงุฆู ุงูุตููู ุงูุตุญูุญ ููุถูู ุฏุนู GiST ููู.  ูุชู ุชุทุจูู ูุฆุชูู ูู ุนูุงูู ุงูุชุดุบูู: "gist__int_ops" (ุดุฌุฑุฉ RD ูุน ุชูุซูู ูุงูู ููููุงุชูุญ ูู ุตููู ุงูููุฑุณ) ู "gist__bigint_ops" (ุชูููุน RD- ุดุฌุฑุฉ).  ูููู ุงุณุชุฎุฏุงู ุงูุทุจูุฉ ุงูุฃููู ููุตูุงุฆู ุงูุตุบูุฑุฉ ุ ูุงูุซุงููุฉ - ููุฃุญุฌุงู ุงููุจูุฑุฉ. <br></li><li style=";text-align:right;direction:rtl">  ูุถูู ltree ููุน ุงูุจูุงูุงุช "ltree" ููููุงูู ุงูุดุจููุฉ ุจุงูุฏุนู ูุฏุนู GiST ูููุน ุงูุจูุงูุงุช ูุฐุง (RD-tree). <br></li><li style=";text-align:right;direction:rtl">  ุชุถูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pg_trgm</a> ูุฆุฉ ุงููุดุบููู ุงููุชุฎุตุตุฉ "gist_trgm_ops" ูุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ุงูุจุญุซ ุนู ุงููุต ุงููุงูู.  ูููู ูุฐุง ุณูู ูุชู ููุงูุดุชู ุฃูุซุฑ ุ ูุน ูุคุดุฑ GIN. <br></li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑุฃ ุนูู</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar444742/">https://habr.com/ru/post/ar444742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar444728/index.html">ููุง ูุชุจุช ููุดุฑุช ูุชุงุจูุง ุนู ุฌุงูุนุฉ ููุณูู ุงูุญููููุฉ ุ ุฃู 12 ุฎุทุฃ ูุงุฏุญูุง</a></li>
<li><a href="../ar444730/index.html">ููุงุฐุง ุงูุชูููููุฌูุง ุจุฏูู ุฎุงุฏู ูู ุซูุฑุฉ ูู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</a></li>
<li><a href="../ar444732/index.html">ุชุญุณูู ุงูุฃุฏุงุก apache2</a></li>
<li><a href="../ar444734/index.html">Habraseminar: ูุตุต ุญููููุฉ ุนู ุชุณููู ุงููุญุชูู</a></li>
<li><a href="../ar444738/index.html">ุจูุณู ุงููู: ูู ูุดุฑูุน ูุฃุตูู ุงููุนุจุฉ</a></li>
<li><a href="../ar444744/index.html">ุฅุฑุณุงู ุงูุจุฑูุฏ ุจุงุณุชุฎุฏุงู PHP</a></li>
<li><a href="../ar444746/index.html">ูุญู ูุฏุนูู ุฅูู MskDotNet Meetup # 34 ูู Raiffeisenbank update Broadcast</a></li>
<li><a href="../ar444748/index.html">3 ุงูุตูุงุช ุงูุฑุฆูุณูุฉ ููุฌุงุญ ูุฏูุฑ ุงูููุชุฌ: ููุฑู ุฌูููููู ุ ูุงุฆุจ ุฑุฆูุณ ูุณู ุงูููุฏุณุฉ</a></li>
<li><a href="../ar444752/index.html">ุชุงุฑูุฎ SXSW: ููู ุจุฏุฃ ูู ุดูุก</a></li>
<li><a href="../ar444756/index.html">ุณูู DARPA ุชุทููุฑ ูุญุฑู ูููู ุตุงุฑูุฎู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>