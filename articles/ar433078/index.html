<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ค๐ฝ ๐๏ธ ๐๐ป ููุชุจ ุฑูุจูุชุงุช ุงูุชุฏุงูู ุจุงุณุชุฎุฏุงู ุฅุทุงุฑ StockSharp ุงูุฑุณููู. ุงูุฌุฒุก 2 ๐ ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุงุตู ุงูุญุฏูุซ ุนู ุฅูุดุงุก ุฑูุจูุชุงุช ุชุฌุงุฑูุฉ ุจุงุณุชุฎุฏุงู ููุตุฉ StockSharp . ุชูุงููุช ุงููุงุฏุฉ ุงูุฃููู ุฅูุดุงุก ุงููุดุฑูุน ูุฑุณู ุงูุนูุงุตุฑ ุงูุฑุฆูุณูุฉ ูููุธุงู ุงูุชุฌุงุฑู. ูู ุงููุงุฏุฉ ุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุชุจ ุฑูุจูุชุงุช ุงูุชุฏุงูู ุจุงุณุชุฎุฏุงู ุฅุทุงุฑ StockSharp ุงูุฑุณููู. ุงูุฌุฒุก 2</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/iticapital/blog/433078/" style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/bv/ll/xa/bvllxaiaoeshjg0_71xwfocozqa.png"></a> <br><br>  ููุงุตู ุงูุญุฏูุซ ุนู ุฅูุดุงุก ุฑูุจูุชุงุช ุชุฌุงุฑูุฉ ุจุงุณุชุฎุฏุงู ููุตุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">StockSharp</a> .  ุชูุงููุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุงุฏุฉ ุงูุฃููู</a> ุฅูุดุงุก ุงููุดุฑูุน ูุฑุณู ุงูุนูุงุตุฑ ุงูุฑุฆูุณูุฉ ูููุธุงู ุงูุชุฌุงุฑู.  ูู ุงููุงุฏุฉ ุงูููุงุฆูุฉ ููุฏูุฑุฉ ุ ุณูููู ุจุชูููุฐ ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุฏุงูู ูุจุงุดุฑุฉ. <a name="habracut"></a><br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููุญุฉ ูุญูุธุฉ </h2><br>  ุนู ุทุฑูู ุงูููุงุณ ูุน ุดุฑูุท ุงูุฃุฏูุงุช ุ ูู ุจุฅูุดุงุก ููุญุฉ ุณุฌู.  ููููุงู ุจุฐูู ุ ูู ุจุฅุถุงูุฉ UserControl ุขุฎุฑ ุฅูู ูุฌูุฏ XAML.  ุงุนุทุงุฆูุง ุงุณู PortfolioGridControl.  ุฃุถู ุนูุตุฑ PortfolioGrid ุฅููู. <br><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs">&lt;UserControl x:Class=<span class="hljs-string"><span class="hljs-string">"ShellNew.XAML.PortfolioGridControl"</span></span> xmlns=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span> xmlns:x=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span> xmlns:mc=<span class="hljs-string"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span> xmlns:d=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span> xmlns:xaml=<span class="hljs-string"><span class="hljs-string">"http://schemas.stocksharp.com/xaml"</span></span> mc:Ignorable=<span class="hljs-string"><span class="hljs-string">"d"</span></span> d:DesignHeight=<span class="hljs-string"><span class="hljs-string">"450"</span></span> d:DesignWidth=<span class="hljs-string"><span class="hljs-string">"800"</span></span>&gt; &lt;xaml:PortfolioGrid x:Name=<span class="hljs-string"><span class="hljs-string">"PortfolioGrid"</span></span> /&gt; &lt;/UserControl&gt;</code> </pre> <br>  ูู ูููุดุฆ PortfolioGridControl ุ ูุญุชุงุฌ ุฅูู ุงูุงุดุชุฑุงู ูู ุฃุญุฏุงุซ ุธููุฑ ูุญูุธุฉ ุฌุฏูุฏุฉ ูุญุฏุซ ุธููุฑ ูุธููุฉ ุฌุฏูุฏุฉ ูู ุงูููุตู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PortfolioGridControl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); MainWindow.Instance.Connector.NewPortfolio += PortfolioGrid.Portfolios.Add; MainWindow.Instance.Connector.NewPosition += PortfolioGrid.Positions.Add; }</code> </pre> <br>  ูุจุงูุชุงูู ุ ุนูุฏ ุฅูุดุงุก ูุญูุธุฉ ุฌุฏูุฏุฉ ุ ุณุชุธูุฑ ูู ููุญุฉ ุงููุญูุธุฉ ุ ูุนูุฏูุง ูุธูุฑ ูุฑูุฒ ุฌุฏูุฏ ูู ููุญุฉ ุงููุญูุธุฉ ุ ุณูุชู ุชุญุฏูุซู. <br><br>  ูู ุงูุฌุฒุก ุงูุฑุฆูุณู ูู MainWindow ุ ุฃุถู ููุญุฉ PortfolioGridControl ุงูุชู ุชู ุฅูุดุงุคูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;dxlc:LayoutGroup HorizontalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> View=<span class="hljs-string"><span class="hljs-string">"Tabs"</span></span>&gt; &lt;!--  --&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Securities"</span></span>&gt; &lt;myxaml:SecurityGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"SecurityPanel"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Portfolios"</span></span>&gt; &lt;myxaml:PortfolioGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"PortfolioGridControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutGroup&gt;</code> </pre> <br>  ุชุดุบูู ููุชุญูู: <br><br><img src="https://habrastorage.org/webt/bz/vs/tl/bzvstlk5xgb54mycansuoqjozhu.png"><br><br>  ูุฏููุง ุนูุงูุฉ ุชุจููุจ ูุน ุงููุญุงูุธ. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููุญุฉ ุฃูุงูุฑ </h2><br>  ูุชูุชุน ุดุฑูุท ุงูุทูุจุงุช ูู S # .API ุจุงููุฏุฑุฉ ุนูู ุชูุฏูู ุงูุทูุจุงุช ูุณุญุจ ุงูุทูุจุงุช ูุฅุนุงุฏุฉ ุงูุชุณุฌูู.  ุนู ุทุฑูู ุงูููุงุณ ุนูู ุดุฑูุท ุงูุฃุฏูุงุช ุ ูู ุจุฅูุดุงุก ููุญุฉ ุชุฑุชูุจ ุ ููู ุจุฅุถุงูุฉ UserControl ุขุฎุฑ ุฅูู ูุฌูุฏ XAML.  ุงุนุทุงุฆูุง ุงุณู OrderGridControl.  ุฃุถู ุนูุตุฑ OrderGrid ุฅููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;UserControl x:Class=<span class="hljs-string"><span class="hljs-string">"ShellNew.XAML.OrderGridControl"</span></span> xmlns=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span> xmlns:x=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span> xmlns:mc=<span class="hljs-string"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span> xmlns:d=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span> xmlns:xaml=<span class="hljs-string"><span class="hljs-string">"http://schemas.stocksharp.com/xaml"</span></span> mc:Ignorable=<span class="hljs-string"><span class="hljs-string">"d"</span></span> d:DesignHeight=<span class="hljs-string"><span class="hljs-string">"450"</span></span> d:DesignWidth=<span class="hljs-string"><span class="hljs-string">"800"</span></span>&gt; &lt;xaml:OrderGrid x:Name=<span class="hljs-string"><span class="hljs-string">"OrderGrid"</span></span> /&gt; &lt;/UserControl&gt;</code> </pre> <br>  ูุญุชูู OrderGrid ุนูู ุญุฏุซ ุชุณุฌูู OrderRegistering ูุญุฏุซ ุฅุนุงุฏุฉ ุงูุชุณุฌูู OrderReRegistering ูุญุฏุซ ุฅูุบุงุก OrderCanceling. <br><br>  ูููู ุจุฅูุดุงุก ูุนุงูุฌุงุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;UserControl x:Class=<span class="hljs-string"><span class="hljs-string">"ShellNew.XAML.OrderGridControl"</span></span> xmlns=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span> xmlns:x=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span> xmlns:mc=<span class="hljs-string"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span> xmlns:d=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span> xmlns:xaml=<span class="hljs-string"><span class="hljs-string">"http://schemas.stocksharp.com/xaml"</span></span> mc:Ignorable=<span class="hljs-string"><span class="hljs-string">"d"</span></span> d:DesignHeight=<span class="hljs-string"><span class="hljs-string">"450"</span></span> d:DesignWidth=<span class="hljs-string"><span class="hljs-string">"800"</span></span>&gt; &lt;xaml:OrderGrid x:Name=<span class="hljs-string"><span class="hljs-string">"OrderGrid"</span></span> OrderRegistering=<span class="hljs-string"><span class="hljs-string">"OrderGrid_OnOrderRegistering"</span></span> OrderReRegistering=<span class="hljs-string"><span class="hljs-string">"OrderGrid_OnOrderReRegistering"</span></span> OrderCanceling=<span class="hljs-string"><span class="hljs-string">"OrderGrid_OnOrderCanceling"</span></span> /&gt; &lt;/UserControl&gt;</code> </pre> <br>  ูู ูุนุงูุฌ ุฃุญุฏุงุซ ุชุณุฌูู ุงูุทูุจ ุ ูููู ุจุฅูุดุงุก ูุงูุฐุฉ OrderWindow ุชุญุชุงุฌ ูููุง ุฅูู ุชุญุฏูุฏ ูุตุงุฏุฑ ุงูุจูุงูุงุช ููุฃุฏูุงุช ูุงููุญุงูุธ ูุจูุงูุงุช ุงูุณูู.  ูู ุญุงูุชูุง ุ ุณูููู ูู ุฑุงุจุท. <br><br>  ุซู ูุฏุนู OrderWindow ูุน ุฃุณููุจ ShowModal.  ุฅุฐุง ุชู ุงูุถุบุท ุนูู ุงูุฒุฑ "ููุงูู" ูู ูุฐู ุงููุงูุฐุฉ ุ ูุนูุฏุฆุฐู ูู ุฎูุงู ุงูููุตู ูููู ุจุงูุชุณุฌูู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ RegisterOrder: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OrderGrid_OnOrderRegistering</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newOrder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderWindow { Title = <span class="hljs-string"><span class="hljs-string">"Order registering"</span></span>, Order = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Order(), SecurityProvider = MainWindow.Instance.Connector, MarketDataProvider = MainWindow.Instance.Connector, Portfolios = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PortfolioDataSource(MainWindow.Instance.Connector), }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newOrder.ShowModal(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) MainWindow.Instance.Connector.RegisterOrder(newOrder.Order); }</code> </pre> <br>  ูู ูุนุงูุฌ ุญุฏุซ ุฅุนุงุฏุฉ ุงูุชุณุฌูู ุ ููุนู ูู ุดูุก ุจููุณ ุงูุทุฑููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ููุท ุ ูุฃุชู ูุงุฆู Order ุฅูู ุงูุญุฏุซ - ููุฐุง ุฃูุฑ ูุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุงูุชุณุฌูู.  ูุฐูู ุ ูู OrderWindow ุ ูุญุฏุฏ <code>Order = order.ReRegisterClone(newVolume: order.Balance)</code> ูููุก ุญููู ูุงูุฐุฉ OrderWindow. <br><br>  ุซู ูุฏุนู OrderWindow ูุน ุฃุณููุจ ShowModal.  ุฅุฐุง ุชู ุงูููุฑ ููู ุงูุฒุฑ "ููุงูู" ูู ูุฐู ุงููุงูุฐุฉ ุ ูุณูููู ุจุฅุนุงุฏุฉ ุชุณุฌูู ุงูุชุทุจูู ูู ุฎูุงู ุงูููุตู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ReRegisterClone.  ูููู ุฅููู ุงูุชุทุจูู ุงููุฏูู ุ ุงูุฐู ูุฌุจ ุฅูุบุงุคู ุ ูุงูุฌุฏูุฏ ุ ูุงูุฐู ูุฌุจ ุชุนูููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OrderGrid_OnOrderReRegistering</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Order order)</span></span></span><span class="hljs-function"> </span></span>{ var window = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderWindow { Title = <span class="hljs-string"><span class="hljs-string">"Order re-registering"</span></span>, SecurityProvider = MainWindow.Instance.Connector, MarketDataProvider = MainWindow.Instance.Connector, Portfolios = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PortfolioDataSource(MainWindow.Instance.Connector), Order = order.ReRegisterClone(newVolume: order.Balance) }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (window.ShowModal(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) MainWindow.Instance.Connector.ReRegisterOrder(order, window.Order); }</code> </pre> <br>  ูู ูุนุงูุฌ ุฃุญุฏุงุซ ุฅูุบุงุก ุงูุทูุจ ุ ูุง ุนููู ุณูู ุงุณุชุฏุนุงุก ุฃุณููุจ CancelOrder ูุชูุฑูุฑ ุงูุทูุจ ุฅููู ุ ูุงูุฐู ูุฌุจ ุฅูุบุงุคู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OrderGrid_OnOrderCanceling</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Order order</span></span></span><span class="hljs-function">)</span></span> { MainWindow.Instance.Connector.CancelOrder(order); }</code> </pre> <br>  ููู ูุชู ุนุฑุถ ุงูุทูุจุงุช ูู OrderGrid ุ ุชุญุชุงุฌ ุฅูู ุงูุงุดุชุฑุงู ูู ุฃุญุฏุงุซ ุธููุฑ ุทูุจ ุฌุฏูุฏ ูุญุฏุซ ุฎุทุฃ ุงูุชุณุฌูู ูู ูููุดุฆ OrderGridControl ุ ุซู ููู ูุฐู ุงูุฃุญุฏุงุซ ุฅูู OrderGrid: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OrderGridControl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); MainWindow.Instance.Connector.NewOrder += OrderGrid.Orders.Add; MainWindow.Instance.Connector.OrderRegisterFailed += OrderGrid.AddRegistrationFail; }</code> </pre> <br>  ูู ุงูุฌุฒุก ุงูุฑุฆูุณู ูู MainWindow ุ ุฃุถู ููุญุฉ OrderGridControl ุงูุชู ุชู ุฅูุดุงุคูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;dxlc:LayoutGroup HorizontalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> View=<span class="hljs-string"><span class="hljs-string">"Tabs"</span></span>&gt; &lt;!--  --&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Securities"</span></span>&gt; &lt;myxaml:SecurityGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"SecurityPanel"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Portfolios"</span></span>&gt; &lt;myxaml:PortfolioGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"PortfolioGridControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Orders"</span></span>&gt; &lt;myxaml:OrderGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"OrderGridControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutGroup&gt;</code> </pre> <br>  ุชุดุบูู ููุชุญูู: <br><br><img src="https://habrastorage.org/webt/hp/hu/m7/hphum7vg9x0p-ym0vwdg5_bhdv4.png"><br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููุญุฉ ุงููุนุงููุงุช ุงูุฎุงุตุฉ ุจู </h2><br>  ุนู ุทุฑูู ุงูููุงุณ ูุน ุดุฑูุท ุงูุฃุฏูุงุช ุ ูู ุจุฅูุดุงุก ููุญุฉ ูู ุงููุนุงููุงุช ุงูุฎุงุตุฉ ุจูุง.  ูู ูุฌูุฏ XAML ุ ุฃุถู UserControl ุขุฎุฑ.  ุงุนุทุงุฆูุง ุงุณู MyTradeGridControl.  ุฃุถู ุนูุตุฑ MyTradeGrid ุฅููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;UserControl x:Class=<span class="hljs-string"><span class="hljs-string">"ShellNew.XAML.MyTradeGridControl"</span></span> xmlns=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span> xmlns:x=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span> xmlns:mc=<span class="hljs-string"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span> xmlns:d=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span> xmlns:xaml=<span class="hljs-string"><span class="hljs-string">"http://schemas.stocksharp.com/xaml"</span></span> mc:Ignorable=<span class="hljs-string"><span class="hljs-string">"d"</span></span> d:DesignHeight=<span class="hljs-string"><span class="hljs-string">"450"</span></span> d:DesignWidth=<span class="hljs-string"><span class="hljs-string">"800"</span></span>&gt; &lt;xaml:MyTradeGrid x:Name=<span class="hljs-string"><span class="hljs-string">"MyTradeGrid"</span></span> /&gt; &lt;/UserControl&gt;</code> </pre> <br>  ูู ูููุดุฆ MyTradeGridControl ุ ูุญุชุงุฌ ุฅูู ุงูุงุดุชุฑุงู ูู ุฃุญุฏุงุซ ุธููุฑ ูุนุงููุฉ ุฌุฏูุฏุฉ ูููููุง ุฅูู MyTradeGrid: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyTradeGridControl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); MainWindow.Instance.Connector.NewMyTrade += MyTradeGrid.Trades.Add; }</code> </pre> <br>  ูู ุงูุฌุฒุก ุงูุฑุฆูุณู ูู MainWindow ุ ุฃุถู ููุญุฉ OrderGridControl ุงูุชู ุชู ุฅูุดุงุคูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="css hljs">&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">HorizontalAlignment</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">Stretch</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">View</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">Tabs</span></span>"&gt; &lt;!<span class="hljs-selector-tag"><span class="hljs-selector-tag">--</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">--</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Header</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">Securities</span></span>"&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">myxaml</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:SecurityGridControl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Name</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">SecurityPanel</span></span>" /&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Header</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">Portfolios</span></span>"&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">myxaml</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:PortfolioGridControl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Name</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">PortfolioGridControl</span></span>" /&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Header</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">Orders</span></span>"&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">myxaml</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:OrderGridControl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Name</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">OrderGridControl</span></span>" /&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Header</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">MyTrades</span></span>"&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">myxaml</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:MyTradeGridControl</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Name</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">MyTradeGridControl</span></span>" /&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span>&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">dxlc</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:LayoutGroup</span></span>&gt;</code> </pre> <br>  ุชุดุบูู ููุชุญูู: <br><br><img src="https://habrastorage.org/webt/-4/dr/x1/-4drx1smuyevvg-e5esktgw4ey4.png"><br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููุญุฉ ูุน ุงุณุชุฑุงุชูุฌูุฉ </h2><br>  ุณูููู ุจุฅูุดุงุก ููุญุฉ ุฅุณุชุฑุงุชูุฌูุฉ ุจููุณ ุทุฑููุฉ ุฅูุดุงุก ุฌููุน ุงูููุญุงุช ุงูุณุงุจูุฉ.  ูู ูุฌูุฏ XAML ุ ุฃุถู UserControl ุขุฎุฑ.  ุงุนุทุงุฆูุง ุงุณู StrategyControl.  ุจุงุณุชุฎุฏุงู LayoutControl ุ ูููู ุจุชูุณูู ุงูุดุงุดุฉ ุฅูู ูุณููู.  ุนูู ุงูุฌุงูุจ ุงูุฃูุณุฑ ุ ุณุชููู ููุงู ุนูุงูุฉ ุชุจููุจ ูุน ูุฎุทุท ุงูุดููุน ูุนูุงูุฉ ุชุจููุจ ุชุญุชูู ุนูู ุฅุญุตุงุฆูุงุช ุฅุณุชุฑุงุชูุฌูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;dxlc:LayoutGroup Orientation=<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>&gt; &lt;dxlc:LayoutGroup View=<span class="hljs-string"><span class="hljs-string">"Tabs"</span></span> Name=<span class="hljs-string"><span class="hljs-string">"StatistisAndChartLayoutGroup"</span></span>&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Chart"</span></span>&gt; &lt;xaml:Chart x:Name=<span class="hljs-string"><span class="hljs-string">"Chart"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Statistic"</span></span>&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> dxlc:LayoutControl.AllowHorizontalSizing=<span class="hljs-string"><span class="hljs-string">"True"</span></span> &gt; &lt;xaml:StatisticParameterGrid x:Name=<span class="hljs-string"><span class="hljs-string">"StatisticParameterGrid"</span></span> MaxHeight=<span class="hljs-string"><span class="hljs-string">"2000"</span></span>/&gt; &lt;/dxlc:LayoutItem&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> &gt; &lt;xaml:EquityCurveChart x:Name=<span class="hljs-string"><span class="hljs-string">"EquityCurveChart"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutGroup&gt;</code> </pre> <br>  ููุง ุ ูุชู ุงุณุชุฎุฏุงู StatisticParameterGrid ูุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุฅุณุชุฑุงุชูุฌูุฉ ุ ููุณุชุฎุฏู EquityCurveChart ูุนุฑุถ ูุฎุทุท ุงูุฑุจุญ ูุงูุฎุณุงุฑุฉ.  ูุญุชุงุฌ StatisticParameterGrid ุฅูู ุชุนููู ุจุนุถ ุงููููุฉ MaxHeight ุ ูุฅูุง ูู ูุชู ุชุดุบูู ุงูุชุทุจูู. <br><br>  ุณูููู ุงูุฌุงูุจ ุงูุฃููู ุจุชูููู ุฎุตุงุฆุต ุงูุงุณุชุฑุงุชูุฌูุฉ ูู PropertyGridEx.  ุณูุชู ูุถุน ุฃุฒุฑุงุฑ ุจุฏุก ูุฅููุงู ุงูุงุณุชุฑุงุชูุฌูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;dxlc:LayoutGroup View=<span class="hljs-string"><span class="hljs-string">"Group"</span></span> dxlc:LayoutControl.AllowHorizontalSizing=<span class="hljs-string"><span class="hljs-string">"True"</span></span> dxlc:DockLayoutControl.Dock=<span class="hljs-string"><span class="hljs-string">"Right"</span></span> Orientation=<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span>&gt; &lt;xaml:PropertyGridEx x:Name=<span class="hljs-string"><span class="hljs-string">"PropertyGridEx"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> Height=<span class="hljs-string"><span class="hljs-string">"20"</span></span>&gt; &lt;dx:SimpleButton x:Name=<span class="hljs-string"><span class="hljs-string">"StartStrategyButton"</span></span> Content=<span class="hljs-string"><span class="hljs-string">"Start strategy"</span></span> ToolTip=<span class="hljs-string"><span class="hljs-string">"Start strategy"</span></span> Click=<span class="hljs-string"><span class="hljs-string">"StartStrategyButton_Click"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> Height=<span class="hljs-string"><span class="hljs-string">"20"</span></span>&gt; &lt;dx:SimpleButton x:Name=<span class="hljs-string"><span class="hljs-string">"StopStrategyButton"</span></span> Content=<span class="hljs-string"><span class="hljs-string">"Stop strategy"</span></span> ToolTip=<span class="hljs-string"><span class="hljs-string">"Stop strategy"</span></span> Click=<span class="hljs-string"><span class="hljs-string">"StopStrategyButton_Click"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;/dxlc:LayoutGroup&gt;</code> </pre> <br>  ููุฏ ูุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;UserControl x:Class=<span class="hljs-string"><span class="hljs-string">"ShellNew.XAML.StrategyControl"</span></span> xmlns=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span> xmlns:x=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span> xmlns:mc=<span class="hljs-string"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span> xmlns:d=<span class="hljs-string"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span> xmlns:dxlc=<span class="hljs-string"><span class="hljs-string">"http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"</span></span> xmlns:xaml=<span class="hljs-string"><span class="hljs-string">"http://schemas.stocksharp.com/xaml"</span></span> xmlns:dx=<span class="hljs-string"><span class="hljs-string">"http://schemas.devexpress.com/winfx/2008/xaml/core"</span></span> mc:Ignorable=<span class="hljs-string"><span class="hljs-string">"d"</span></span>&gt; &lt;dxlc:LayoutControl&gt; &lt;dxlc:LayoutGroup Orientation=<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>&gt; &lt;dxlc:LayoutGroup View=<span class="hljs-string"><span class="hljs-string">"Tabs"</span></span> Name=<span class="hljs-string"><span class="hljs-string">"StatistisAndChartLayoutGroup"</span></span>&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Chart"</span></span>&gt; &lt;xaml:Chart x:Name=<span class="hljs-string"><span class="hljs-string">"Chart"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Statistic"</span></span>&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> dxlc:LayoutControl.AllowHorizontalSizing=<span class="hljs-string"><span class="hljs-string">"True"</span></span> &gt; &lt;xaml:StatisticParameterGrid x:Name=<span class="hljs-string"><span class="hljs-string">"StatisticParameterGrid"</span></span> MaxHeight=<span class="hljs-string"><span class="hljs-string">"2000"</span></span>/&gt; &lt;/dxlc:LayoutItem&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> &gt; &lt;xaml:EquityCurveChart x:Name=<span class="hljs-string"><span class="hljs-string">"EquityCurveChart"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup View=<span class="hljs-string"><span class="hljs-string">"Group"</span></span> dxlc:LayoutControl.AllowHorizontalSizing=<span class="hljs-string"><span class="hljs-string">"True"</span></span> dxlc:DockLayoutControl.Dock=<span class="hljs-string"><span class="hljs-string">"Right"</span></span> Orientation=<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span>&gt; &lt;xaml:PropertyGridEx x:Name=<span class="hljs-string"><span class="hljs-string">"PropertyGridEx"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> Height=<span class="hljs-string"><span class="hljs-string">"20"</span></span>&gt; &lt;dx:SimpleButton x:Name=<span class="hljs-string"><span class="hljs-string">"StartStrategyButton"</span></span> Content=<span class="hljs-string"><span class="hljs-string">"Start strategy"</span></span> ToolTip=<span class="hljs-string"><span class="hljs-string">"Start strategy"</span></span> Click=<span class="hljs-string"><span class="hljs-string">"StartStrategyButton_Click"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;dxlc:LayoutItem VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> Height=<span class="hljs-string"><span class="hljs-string">"20"</span></span>&gt; &lt;dx:SimpleButton x:Name=<span class="hljs-string"><span class="hljs-string">"StopStrategyButton"</span></span> Content=<span class="hljs-string"><span class="hljs-string">"Stop strategy"</span></span> ToolTip=<span class="hljs-string"><span class="hljs-string">"Stop strategy"</span></span> Click=<span class="hljs-string"><span class="hljs-string">"StopStrategyButton_Click"</span></span> /&gt; &lt;/dxlc:LayoutItem&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutControl&gt; &lt;/UserControl&gt;</code> </pre> <br>  ูู ูููุดุฆ StrategyControl ุ ุนููู ุงูุฑุงุจุท ููุตุฏุฑ ุจูุงูุงุช ูู PropertyGridEx ุ ููู ูู ุนูุตุฑ ุชุญูู ุชูุฑูุจูุง ุ ูููุง ุจุชูููุฐ ุฅุฌุฑุงุกุงุช ููุงุซูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StrategyControl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); PropertyGridEx.SecurityProvider = MainWindow.Instance.Connector; PropertyGridEx.Portfolios = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PortfolioDataSource(MainWindow.Instance.Connector); }</code> </pre> <br>  ูุญู ุจุญุงุฌุฉ ุฅูู ููู ุงูุงุณุชุฑุงุชูุฌูุฉ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุฅูู ุณูุทุฑุชูุง.  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก ุทุฑููุฉ BindStraregy ูู StrategyControl ุ ูุงูุชู ุณุชุฃุฎุฐ ุงูุฅุณุชุฑุงุชูุฌูุฉ ุ ูุงุญูุธ ุงูุงุฑุชุจุงุท ุจูุง ูู ูุชุบูุฑ ูุญูู ุ ููู ุฃูุถูุง ุจุชุนููู ุงูุฅุณุชุฑุงุชูุฌูุฉ ูู PropertyGridEx ู StatisticParameterGrid. <br><br>  ุจุงุณุชุฎุฏุงู ุทุฑููุฉ SetChart ุ ูููู ุจููู ูุฎุทุท ุงูุดููุน ุฅูู ุงูุฅุณุชุฑุงุชูุฌูุฉ ุ ุจุนุฏ ุฐูู ุ ููููู ุงูุญุตูู ุนูู ุฅุณุชุฑุงุชูุฌูุฉ ุงูุฑุณู ุงูุจูุงูู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ GetChart.  ูุญู ุฃูุถุง ุชุนููู ุฑุงุจุท ููุงุณุชุฑุงุชูุฌูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Strategy _strategy; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BindStraregy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Strategy strategy</span></span></span><span class="hljs-function">)</span></span> { _strategy = strategy; PropertyGridEx.SelectedObject = strategy; StatisticParameterGrid.Parameters. AddRange(_strategy.StatisticManager.Parameters); _strategy.SetChart(Chart); _strategy.Connector = MainWindow.Instance.Connector; }</code> </pre> <br>  ุนูุฏ ุงูุนูู ููููุง ูุฌุฏูู ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงูุงุณุชุฑุงุชูุฌูุฉ ุณุชุจุฏุฃ ูุชุชููู ุ ูุฑุจูุง ุนุฏุฉ ูุฑุงุช ุ ููุฌุจ ุฃู ูุชู ูุณุญ ุงููุตูุฏุฉ ูุน ูู ุฅุทูุงู ููุงุณุชุฑุงุชูุฌูุฉ.  ููุฐุง ุงูุบุฑุถ ุ ุณูููู ุจุฅูุดุงุก ุทุฑููุฉ ResetEquityCurveChart ุงูุชู ุณูููู ุฃููุงู ุจูุณุญ EquityCurveChart ุจูุง.  ุจุนุฏ ุฐูู ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุนูุงุตุฑ ุฑุณูููุฉ ูู EquityCurveChart ุ ูููููู ุชุญุฏูุฏ ุงุณู ูููู ูููุน ุงูุฎุท. <br><br>  ุจุนุฏ ุฐูู ุ ูุญู ูุดุชุฑู ูู ุญุฏุซ ุชุบููุฑ PnL ุงูุฎุงุต ุจุงูุงุณุชุฑุงุชูุฌูุฉ ููู ุฑุณู ูุฐุง ุงูุญุฏุซ ุ ูุฑุณู ูููุฉ ุฌุฏูุฏุฉ ุนูู ูุฎุทุท ุงูุฑุจุญ / ุงูุฎุณุงุฑุฉ EquityCurveChart: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ResetEquityCurveChart</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { EquityCurveChart.Clear(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pnl = EquityCurveChart. CreateCurve(<span class="hljs-string"><span class="hljs-string">"PNL"</span></span>, Colors.Green, ChartIndicatorDrawStyles.Area); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> unrealizedPnL = EquityCurveChart. CreateCurve(<span class="hljs-string"><span class="hljs-string">"unrealizedPnL"</span></span>, Colors.Black, ChartIndicatorDrawStyles.Line); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> commissionCurve = EquityCurveChart .CreateCurve(<span class="hljs-string"><span class="hljs-string">"commissionCurve"</span></span>, Colors.Red, ChartIndicatorDrawStyles.Line); _strategy.PnLChanged += () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChartDrawData(); data.Group(_strategy.CurrentTime) .Add(pnl, _strategy.PnL) .Add(unrealizedPnL, _strategy.PnLManager.UnrealizedPnL ?? <span class="hljs-number"><span class="hljs-number">0</span></span>) .Add(commissionCurve, _strategy.Commission ?? <span class="hljs-number"><span class="hljs-number">0</span></span>); EquityCurveChart.Draw(data); }; }</code> </pre> <br>  ูู ูุนุงูุฌ ุงูุฃุญุฏุงุซ ููููุฑ ููู ุงูุฒุฑ "ุงุจุฏุฃ" ุ ุณูู ูุณูู ูุฐู ุงูุทุฑููุฉ.  ูุณูู ูููู ุฃูุถูุง ุจุฅุนุงุฏุฉ ุถุจุท ุญุงูุฉ ุงูุงุณุชุฑุงุชูุฌูุฉ ูุชุดุบูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartStrategyButton_Click</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { ResetEquityCurveChart(); _strategy.Reset(); _strategy.Start(); }</code> </pre> <br>  ูู ูุนุงูุฌ ุงูุฃุญุฏุงุซ ููููุฑ ููู ุงูุฒุฑ "ุฅููุงู" ุ ุณูููู ุงูุงุณุชุฑุงุชูุฌูุฉ. <br>  ุงููุฑุงุบ ุงูุฎุงุต StopStrategyButton_Click (ูุฑุณู ุงููุงุฆู ุ RoutedEventArgs e): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">{ _strategy.Stop(); }</code> </pre> <br>  ูู ุงูุฌุฒุก ุงูุฑุฆูุณู ูู MainWindow ุ ุฃุถู ููุญุฉ StrategyControl ุงูุชู ุชู ุฅูุดุงุคูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">&lt;dxlc:LayoutGroup HorizontalAlignment=<span class="hljs-string"><span class="hljs-string">"Stretch"</span></span> View=<span class="hljs-string"><span class="hljs-string">"Tabs"</span></span>&gt; &lt;!--  --&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Securities"</span></span>&gt; &lt;myxaml:SecurityGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"SecurityPanel"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Portfolios"</span></span>&gt; &lt;myxaml:PortfolioGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"PortfolioGridControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"Orders"</span></span>&gt; &lt;myxaml:OrderGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"OrderGridControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"MyTrades"</span></span>&gt; &lt;myxaml:MyTradeGridControl x:Name=<span class="hljs-string"><span class="hljs-string">"MyTradeGridControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"MarketDepth"</span></span>&gt; &lt;myxaml:MarketDepthControl x:Name=<span class="hljs-string"><span class="hljs-string">"MarketDepthControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;dxlc:LayoutGroup Header=<span class="hljs-string"><span class="hljs-string">"SimpleStrategyControl"</span></span>&gt; &lt;myxaml:StrategyControl x:Name=<span class="hljs-string"><span class="hljs-string">"SimpleStrategyControl"</span></span> /&gt; &lt;/dxlc:LayoutGroup&gt; &lt;/dxlc:LayoutGroup&gt;</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุฎูู ุงุณุชุฑุงุชูุฌูุฉ </h2><br>  ุนูู ุณุจูู ุงููุซุงู ุ ููุฑ ูู ุฅูุดุงุก ุงุณุชุฑุงุชูุฌูุฉ ุจุณูุทุฉ ููุดูุนุฏุงู.  ุณุชุดุชุฑู ุฅุฐุง ูุงูุช ุงูุดูุนุฉ ุชููู (ุฎุถุฑุงุก) ูุชุจูุน ุฅุฐุง ูุงูุช ุงูุดูุนุฉ ุชุชูุงูุต (ุญูุฑุงุก). <br><br>  ูููู ุจุฅูุดุงุก ูุฌูุฏ ุขุฎุฑ ูู ุงููุดุฑูุน - ุณูููู ุจุชุฎุฒูู ุฌููุน ุงุณุชุฑุงุชูุฌูุงุชูุง ููู.  ูู ูุฐุง ุงููุฌูุฏ ุ ูู ุจุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ ุ ุฃุทูู ุนูููุง ุงุณู SimpleStrategy.  ูุฌุจ ุฃู ุชุฑุซ ุฌููุน ุงุณุชุฑุงุชูุฌูุงุช S # ูู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ูุงุณุชุฑุงุชูุฌูุฉ ุงูุงุณุชุฑุงุชูุฌูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SimpleStrategy</span></span> : <span class="hljs-title"><span class="hljs-title">Strategy</span></span> {}</code> </pre> <br>  ูุธุฑูุง ูุฃู ุงุณุชุฑุงุชูุฌูุชูุง ุชุณุชุฎุฏู ุงูุดููุน ุ ูุฅููุง ุณููุดุฆ CandleSeries ููููููุฉ ุงูุนุงูุฉ ููู ูููุดุฆ ุงุณุชุฑุงุชูุฌูุชูุง ุณูููู ุจุชุนููููุง ุนูู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SimpleStrategy</span></span> : <span class="hljs-title"><span class="hljs-title">Strategy</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CandleSeries Series { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SimpleStrategy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Series = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CandleSeries(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(TimeFrameCandle), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Security(), TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">15</span></span>)) { BuildCandlesMode = MarketDataBuildModes.Build }; } }</code> </pre> <br>  ุฃุดุฑูุง ููุง ุฅูู ุฃู ุงูุดููุน ูู CandleSeries ุณุชููู TimeFrameCandle ุ ูุน ูุงุตู ุฒููู ูุฏุฑู 15 ุซุงููุฉ (TimeSpan.FromSeconds (15)).  ุจุงููุณุจุฉ ุฅูู CandleSeries ุ ููููู ุชุญุฏูุฏ ูุถุน ุฅูุดุงุก ุงูุดููุน BuildCandlesMode.  ุฃุดุฑูุง ุฅูู ุฃูู ุณูุชู ุจูุงุก ุงูุดููุน (MarketDataBuildModes.Build).  ุจุดูู ุงูุชุฑุงุถู ุ ุณูุชู ุฅูุดุงุคูุง ูู ุนูุงูุงุช ุงูุชุฌุฒุฆุฉ ุ ูููู ููููู ุชุญุฏูุฏ ุฃููุงุน ุงูุจูุงูุงุช ุงูุฃุฎุฑู. <br><br>  ูุธุฑูุง ูุฃููุง ุฌุนููุง CandleSeries ููููุฉ ุนุงูุฉ ุ ูููู ุชุฎุตูุต CandleSeries ุฃูุถูุง ูู PropertyGridEx ุงูููุถุญ ูู ุงูููุฑุฉ ุงูุณุงุจูุฉ.  ุฌููุน ุงูุงุณุชุฑุงุชูุฌูุงุช ููุง ุทุฑู ูููู ุชุฌุงูุฒูุง ุ ูุญุชุงุฌ ุฅูู ุชุฌุงูุฒ ุทุฑููุฉ OnStarted.  ูุชู ุงุณุชุฏุนุงุคู ูุจู ุจุฏุก ุงูุฅุณุชุฑุงุชูุฌูุฉ ููุณูุญ ูู ุจุถุจุทูุง ูุณุจููุง ุนูู ุญุงูุฉ ุงูุจุฏุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnStarted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _connector = (Connector)Connector; Series.Security = Security; _connector .WhenCandlesFinished(Series) .Do(ProcessCandle) .Apply(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); _connector.SubscribeCandles(Series); <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnStarted(); }</code> </pre> <br>  ููุง ุ ูู ุฃุฌู CandleSeries ุ ูููู ุจุชุนุฑูู ุงูุฃุฏุงุฉ ุงููุญุฏุฏุฉ ูู PropertyGridEx.  ุซู ูู ุจุฅูุดุงุก ูุงุนุฏุฉ ููุนุงูุฌุฉ ุงูุดูุนุฉ ุงูููุงุฆูุฉ.  ูู ุงููุงุนุฏุฉ ุ ุญุฏุฏ ุงูุทุฑููุฉ ุงูุชู ุณุชููู ุจูุนุงูุฌุฉ ูู ุดูุนุฉ ููุชููุฉ - ูู ุญุงูุชูุง ุ ูุฐู ูู ุงูุทุฑููุฉ ProcessCandle.  ุณูุชู ูุตููุง ูุงุญูุง.  ุจุนุฏ ุชุนููู ูู ุดูุก ุ ูุญู ูุดุชุฑู ูู ุธููุฑ ุงูุดููุน ุนูู CandleSeries ูู ุงูููุตู ูู ุฎูุงู ุทุฑููุฉ SubscCandles.  ูู ุญุงูุชูุง ุ ุชุญุชูู ุทุฑููุฉ ProcessCandle ุนูู ุงูููุทู ุงูุฑุฆูุณู ููุงุณุชุฑุงุชูุฌูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessCandle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Candle candle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsRealTime(candle)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (candle.OpenPrice &lt; candle.ClosePrice &amp;&amp; Position &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { RegisterOrder(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.BuyAtMarket(Volume + Math.Abs(Position))); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (candle.OpenPrice &gt; candle.ClosePrice &amp;&amp; Position &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { RegisterOrder(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SellAtMarket(Volume + Math.Abs(Position))); } }</code> </pre> <br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ูุชู ุจูุงุก ุงูุดูุนุฉ ูู ุงูููุช ุงูุญูููู ุฃู ุฃููุง ุชุงุฑูุฎูุฉ.  ุฅุฐุง ูุงูุช ุงูุดูุนุฉ ุชุงุฑูุฎูุฉ ุ ูุฅููุง ูุชุฌุงูููุง.  ูุง ุชุชุทูุจ ูู ุงูุงุณุชุฑุงุชูุฌูุงุช ุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุง ุชุชุทูุจ ุงูุงุณุชุฑุงุชูุฌูุงุช ุงููุงุฆูุฉ ุนูู ุงููุธุงุฑุงุช ุฐูู ุ ูุฃู ุงููุธุงุฑุงุช ุฏุงุฆููุง ูุง ุชููู ูู ุงูููุช ุงููุนูู.  ูุง ุชูุฌุฏ ุทุฑููุฉ ุนุงูููุฉ ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูุดูุนุฉ "ูู ุงูููุช ุงูุญูููู" ุฃู ุชุงุฑูุฎูุฉ ุ ููู ูู ุงุณุชุฑุงุชูุฌูุฉ ูุฌุจ ุญู ูุฐู ุงููุดููุฉ ุจุดูู ูุณุชูู ุ ููููุง ูููุชุทูุจุงุช.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ุจุจุณุงุทุฉ ุจููุงุฑูุฉ ุงูููุช ุงูุฐู ุชุบูู ููู ุงูุดูุนุฉ ุจุงูููุช ุงูููุฌูุฏ ูู ุงูููุตู ูุฅุฐุง ูู ุชุชุฌุงูุฒ ูุชุฑุฉ ุชุฃุฎุฑ ูุนููุฉ ุ ูุณุชููู ุงูุดูุนุฉ ูู ุงูููุช ุงููุนูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsRealTime</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Candle candle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (Connector.CurrentTime - candle.CloseTime).TotalSeconds &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ููุธุฑ ุฅูู ููุน ุงูุดูุนุฉ ุ ููุง ูู ุงููููู ุงูุญุงูู ููุงุณุชุฑุงุชูุฌูุฉ.  ุฅุฐุง ูุงูุช ุงูุดูุนุฉ ุชููู ุ ููุน ูุถุน ูุณุงูู 0 ุ ูุณูู ููุชุญ ุงูุตููุฉ ุจุฃูุฑ ูู ุงูุณูู ููุญุฏุฉ ุงูุชุฎุฒูู ุงูุชู ูุถุนูุงูุง ูู PropertyGridEx.  ุฅุฐุง ูุงูุช ุงูุดูุนุฉ ุชููู ููุงู ุงูููุถุน ุฃูู ูู 0 ุ ูุฅููุง "ูุนูุณ" ุงูููุถุน: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (candle.OpenPrice &lt; candle.ClosePrice &amp;&amp; Position &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { RegisterOrder(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.BuyAtMarket(Volume + Math.Abs(Position))); }</code> </pre> <br><br>  ููุนู ุงูุนูุณ ูุดูุนุฉ ุถุนููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (candle.OpenPrice &gt; candle.ClosePrice &amp;&amp; Position &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { RegisterOrder(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SellAtMarket(Volume + Math.Abs(Position))); }</code> </pre> <br>  ูู ุงูููุช ุงูุญุงูู ุ ุงุณุชุฑุงุชูุฌูุชูุง ุฌุงูุฒุฉ ููุนูู.  ูุฌุจ ุฃู ูุชู ุชูุฑูุฑู ุฅูู SimpleStrategyControl ุ ูุงูุฐู ุฃูุดุฃูุงู ูู ุงูููุฑุฉ ุงูุณุงุจูุฉ ุจุงุณุชุฎุฏุงู ุทุฑููุฉ BindStraregy.  ูููู ุจุฐูู ูู ูููุดุฆ MainWindow ููุฑ ุชููุฆุฉ ููููุงุช MainWindow. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">SimpleStrategyControl.BindStraregy(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleStrategy());</code> </pre> <br><br>  ุชุดุบูู ููุชุญูู: <br><br><img src="https://habrastorage.org/webt/b1/-p/t6/b1-pt6ohswyhv5ylanblhvjhsf4.png"><br><br><img src="https://habrastorage.org/webt/ig/qx/kd/igqxkdcsehmsbeeayj-wnhgmhuk.png"><br><br>  ุชุนูู ุงูุฅุณุชุฑุงุชูุฌูุฉ ูุงูุตููุงุช ุ ููู ุญุชู ุงูุขู ูุง ุชูุฌุฏ ุดููุน ูุตููุงุช ุนูู ุงูุฑุณู ุงูุจูุงูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ุงูุดููุน ูุตููุงุช ุฅูู ุงููุฎุทุท ูู ุงูุงุณุชุฑุงุชูุฌูุฉ </h2><br>  ูู ุงููุณู ุงูุฎุงุต ุจููุญุฉ ุงูุฅุณุชุฑุงุชูุฌูุฉ ุจุงุณุชุฎุฏุงู ุทุฑููุฉ SetChart ุ ูููุง ุจุฎูุงูุฉ ูุฎุทุท ุงูุดููุน ูู ุงูุฅุณุชุฑุงุชูุฌูุฉ.  ูู ุทุฑููุฉ OnStarted ููุงุณุชุฑุงุชูุฌูุฉ ุ ูุชุญูู ููุง ุฅุฐุง ูุงู ุงููุฎุทุท ูุฏ ุชู ุชุนูููู ููุฅุณุชุฑุงุชูุฌูุฉ ูุฅุฐุง ุชู ุชุนูููู ุ ูุฅููุง ูููู ุจุนุฏ ุฐูู ุจุชููุฆุฉ ุงููุฎุทุท ุ ูุงูุงุดุชุฑุงู ูู ุฃุญุฏุงุซ ุธููุฑ ูุนุงููุฉ ุฌุฏูุฏุฉ ุฎุงุตุฉ ูุชุบููุฑ ุดูุนุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnStarted</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _connector = (Connector)Connector; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetChart() <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Chart chart) { InitChart(chart); NewMyTrade += DrawMyTrade; _connector.CandleSeriesProcessing += CandleSeriesProcessing; } Series.Security = Security; _connector .WhenCandlesFinished(Series) .Do(ProcessCandle) .Apply(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); _connector.SubscribeCandles(Series); <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnStarted(); }</code> </pre> <br>  ุทุฑููุฉ ุชููุฆุฉ ูุฎุทุท InitChart: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ChartCandleElement _chartCandleElement; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ChartTradeElement _tradesElem; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Chart _chart; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitChart</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Chart chart</span></span></span><span class="hljs-function">)</span></span> { _chart = chart; _chart.GuiSync(() =&gt; { _chart.ClearAreas(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> candlesArea = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChartArea(); _chart.AddArea(candlesArea); _chartCandleElement = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChartCandleElement(); _chart.AddElement(candlesArea, _chartCandleElement); _tradesElem = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChartTradeElement { FullTitle = <span class="hljs-string"><span class="hljs-string">"Trade"</span></span> }; _chart.AddElement(candlesArea, _tradesElem); }); }</code> </pre> <br>  ููุง ูุญูุธ ุงูุฑุงุจุท ุฅูู ุงูุฑุณู ุงูุจูุงูู ูู ูุชุบูุฑ ูุญูู.  ูุญู ูุณุญ ุงูุฌุฏูู ุงูุฒููู.  ูุญู ุฃูุถุง ุฅูุดุงุก ูููู ุฅูู ุนูุงุตุฑ ุงููุฎุทุท ุงูุฑุณู ุงูุจูุงูู ููุดููุน ูุงูุตููุงุช.  Construction _chart.GuiSync (() =&gt; {...})ุ  ุงููุงุฒูุฉ ูู ุฃุฌู ุชููุฆุฉ ุงูุฌุฏูู ูู ุงูููุถูุน ุงูุฑุฆูุณู. <br><br>  CandleSeries ูุฎุทุท ุงูุฑุณู ุงูุจูุงูู ูุฑุณู ุงูุดููุน ุนูู ุงูุฑุณู ุงูุจูุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CandleSeriesProcessing</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">CandleSeries candleSeries, Candle candle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChartDrawData(); data.Group(candle.OpenTime) .Add(_chartCandleElement, candle); _chart.Draw(data); }</code> </pre> <br>  ููุง ูุญุตู ุนูู ุดูุนุฉ ูู ุงูุญุฏุซ CandleSeriesProcessing ุงูููุตู ุ ุฅูุดุงุก ChartDrawData ูุนุฑุถู ุนูู ุงููุฎุทุท.  ูุดูุฑ ุฅูู ุจูุงูุงุช time.Group (candle.OpenTime) ุ ููุดูุฑ ุฅูู ุฃูู ูุฌุจ ุฅุถุงูุฉ ุงูุดูุนุฉ ุฅูู ุนูุตุฑ ุงูุดููุน ูู ุงููุฎุทุท .Add (_chartCandleElementุ candle)ุ.  ููุดูุฑ ุฅูู ุฃู ุงูุฑุณููุงุช ุชุญุชุงุฌ ุฅูู ุฑุณู ุจูุงูุงุช ุฌุฏูุฏุฉ. <br><br>  ูููู ุจุชูููุฐ ุฅุฌุฑุงุกุงุช ููุงุซูุฉ ูููุนุงููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DrawMyTrade</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MyTrade myTrade</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChartDrawData(); data.Group(myTrade.Trade.Time) .Add(_tradesElem, myTrade); _chart.Draw(data); }</code> </pre> <br>  ุชุดุบูู ููุชุญูู: <br><br><img src="https://habrastorage.org/webt/bv/ll/xa/bvllxaiaoeshjg0_71xwfocozqa.png"><br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ ููุฌุฒ </h2><br>  ูุฅูุดุงุก ุชุทุจูู ูุนูุฏ ููุญุชุฑู ุ ูุง ุชุญุชุงุฌ ุฅูู ูุถุงุก ุงููุซูุฑ ูู ุงูููุช.  ูุนุฏุฉ ุณุงุนุงุช ุ ุฃูุดุฃูุง ุชุทุจูููุง ูุงููุงู ูู ุงููุฏุฑุฉ ุนูู ุงูุชูููู ูุนุฑุถ ุงูุชุฏุงูู ุงููุจุงุดุฑ ูุงูุฎูุงุฑุฒููุฉ. <br>  ูุง ุชุฎู ูู ูุญุงููุฉ ุฅูุดุงุก ุจุฑุงูุฌ ุชุฏุงูู ุฎุงุตุฉ ุจู.  ูุฃูู ุฃู ุชุณุงุนุฏู ูุฐู ุงูููุงูุฉ ููุญุตูู ุนูู ุงูุฑุงุญุฉ ูู ูุฐุง ุงูุดุฃู. <br><br>  <b>ุงููุคูู</b> : ุฅููุงู ุฒุงููุชุณูู </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar433078/">https://habr.com/ru/post/ar433078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar433066/index.html">ูุฃุณ HighLoad # 2. ุจุทููุฉ ูููุทูุฑูู ุงูุฎูููุฉ ูุฑุฉ ุฃุฎุฑู ูู ุงูุฎุฏูุฉ</a></li>
<li><a href="../ar433070/index.html">ููููุฉ ุงูุชูููุฒ ุจูู ุงูุดุงูุจู ูุงูุดุงูุจู ูุงูุฃุณูุงุฎ ูู ุงูุดูุจุงููุง ... Elasticsearch - ุงุจุญุซ ุนู ููุชุฌุงุช ูู ููุงุนุฏ ุจูุงูุงุช ุงููุชุฌุฑ</a></li>
<li><a href="../ar433072/index.html">ููููุฉ ุงุฎุชุฑุงู ุณูุฌุง ุฏุฑูู ูุงุณุช ูุญุฏุฉ ุญูุงูุฉ ูุณุฎุฉ</a></li>
<li><a href="../ar433074/index.html">ุงูุชุญูู ุฅูู Kotlin ูู ูุดุฑูุน Android: ูุตุงุฆุญ ูุญูู</a></li>
<li><a href="../ar433076/index.html">ููู ุตูุนูุง ููุชุจุฉ Android Gallery ูุนุฑุถ ูุญุชูู ุงููุณุงุฆุท</a></li>
<li><a href="../ar433082/index.html">ุฃุตุจุญ ุถุฎ ุญุณุงุจุงุช ุงูุขุฎุฑูู ุฌุฑููุฉ ุฌูุงุฆูุฉ ูู ููุฑูุง ุงูุฌููุจูุฉ</a></li>
<li><a href="../ar433084/index.html">ูุชุญ ุงูุฏุฑุณ "ููุฏุณุฉ ุงูููุฒุงุช ูู ูุซุงู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูููุงุณูููุฉ"</a></li>
<li><a href="../ar433086/index.html">ุชููููู ููู ุดูุก ุ ูู ุดูุก ุ ูู ุดูุก: ุฅูุชุฑูุช ุงูุฃุดูุงุก ุ ุงูุชุญูููุงุช ูุงููุฑุงูุจุฉ ููุจููู</a></li>
<li><a href="../ar433088/index.html">ูุง ุงูุฐู ูุนุฌุจู ุ Elon Musk: ุทูุฑุช ุจู ุงู ุฏุจููู ูุจูุฑุด ุดุญูุฉ ุชุถูู 100 ูู ูู ุงูุณูุฑ ูู 3 ุฏูุงุฆู</a></li>
<li><a href="../ar433090/index.html">ุฃูุฑุงูู ุชูููุงุช ุงูุตูุฑ ุงูููุทูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>