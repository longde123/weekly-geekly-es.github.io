<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèæ ‚ú¥Ô∏è üßôüèø Desde "Color Extender para ZX-Spectrum" hasta ZX-Poly üà∫ ‚ñ∂Ô∏è üçñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Color Extender para ZX-Spectrum": este es el t√≠tulo del art√≠culo publicado en echo fido7.zx.spectrum el 3 de agosto de 1997. El art√≠culo describi√≥ la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desde "Color Extender para ZX-Spectrum" hasta ZX-Poly</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472232/"><p>  "Color Extender para ZX-Spectrum": este es el <em>t√≠tulo del</em> art√≠culo publicado en echo <em>fido7.zx.spectrum</em> el 3 de agosto de 1997.  El art√≠culo describi√≥ la idea de resolver uno de los principales problemas de la plataforma ZX-Spectrum: el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">choque de atributos</a> .  La publicaci√≥n despert√≥ cierto inter√©s en ese momento, y me gustar√≠a contar sobre detalles t√©cnicos y la historia del problema. </p><br><p><img src="https://habrastorage.org/webt/ft/at/_v/ftat_vfl5fato4m_aobobohxfhm.png" alt="Logotipo de ZX-Poly"></p><br><p>  No profundizar√© en los detalles t√©cnicos y solo describir√© estructuralmente la idea y la soluci√≥n. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Parte no t√©cnica de la historia, puede omitir</b> <div class="spoiler_text"><p>  La historia del desarrollo comenz√≥ a principios de la primavera de 1994, cuando el pa√≠s todav√≠a experimentaba "cambios en el borrador", lo que condujo al cierre masivo de aplazamientos y al atractivo de los estudiantes de escuelas vocacionales y escuelas t√©cnicas.  Tuve suerte: estaba en mi √∫ltimo a√±o en el Leningrad Radiotechnical College y de tal manera que el estado acord√≥ dar un retraso a corto plazo para la recepci√≥n acelerada de un diploma con el reemplazo del dise√±o del diploma con un examen en todas las materias.  Abandon√≥ el ej√©rcito el 1 de marzo de 1994 como t√©cnico de radio certificado. </p><br><p>  En las fuerzas armadas en ese momento hab√≠a una afluencia sin precedentes de los mismos especialistas del nivel t√©cnico medio, aunque esto arruin√≥ ligeramente el sistema de reclutamiento oto√±o-primavera en las cabezas de los "abuelos" que ya ten√≠an una gradaci√≥n clara en los nombres, llamaron a esta llamada no est√°ndar "duende".  Entre los "en auge" hab√≠a suficiente gente aficionada al ZX-Spectrum y Alexander Gumin era as√≠ en mi divisi√≥n (escribi√≥ juegos en el ZX-Spectrum bajo la etiqueta ANCCAN con Denis Markelov y se hizo conocido por su adaptaci√≥n de Mortal Kombat para esta plataforma en 1997), con qui√©n hablar sobre programaci√≥n y hardware. </p><br><p>  M√°s cerca de mediados de abril de 1994, al final del "curso del joven luchador", Alexander y yo fuimos transferidos al batall√≥n de construcci√≥n ubicado en Strelna, un suburbio de San Petersburgo.  All√≠ tuvimos que dominar la dif√≠cil especialidad de cable-splicer durante varios meses.  La vida en esta parte flu√≠a sin prisa y el estudio alternaba con atuendos, que en su mayor√≠a tensaban las manos, pero le daban tiempo al cerebro para reflexionar.  Entonces, en uno de los conjuntos de la cocina, mi piso y pensando en el ZX-Spectrum y sus capacidades, se me ocurri√≥ la idea de c√≥mo superar el "conflicto de atributos". </p><br><p>  Reflexion√© sobre esta idea hasta el final del servicio y me convenc√≠ cada vez m√°s de que "podr√≠a funcionar".  Desafortunadamente, la idea de la viabilidad de la plataforma en s√≠, a la que iba a aplicar esta idea, me visit√≥ con menos frecuencia.  Sin embargo, en Rusia, el ZX-Spectrum brill√≥ m√°s v√≠vidamente en el cielo desde aproximadamente 1991 hasta 1996.  Algunos productores rusos de sus clones han aumentado tanto que patrocinaron programas de televisi√≥n (por ejemplo, la compa√±√≠a Bi-Em patrocin√≥ el programa "The Jungle's Name" por un tiempo).  Pero durante el servicio hubo otros problemas, as√≠ que decid√≠ posponer todos los problemas relacionados con el comercio hasta que me enviaran a la reserva.  Peri√≥dicamente y sin revelar detalles, estaba interesado en varios expertos sobre el tema de la viabilidad t√©cnica y la validez del enfoque.  Mantuvo la idea en secreto y ni siquiera la comparti√≥ con Alexander Gumin, solo le indic√≥ vagamente que hab√≠a encontrado una soluci√≥n muy simple para aumentar la cantidad de colores y mantener la compatibilidad con versiones anteriores. </p><br><p>  Despu√©s de ingresar al "ciudadano" en 1997 y conseguir un trabajo como ingeniero de software de la segunda categor√≠a en la empresa "Tecnolog√≠as y modelos de informaci√≥n" de San Petersburgo, comenc√© a interesarme un poco en la cuesti√≥n de comercializar la soluci√≥n.  Por alguna raz√≥n, estaba seguro de que si solo insinuaba la soluci√≥n que hab√≠a encontrado, todos comenzar√≠an a llorar con las manos y el dinero fluir√≠a.  Comenc√© a llamar a los conocidos, en ese momento en el campo de los fabricantes y comerciantes de "Ingenier√≠a del espectro", como Sergey Zonov, Vyacheslav Skutin (Nemo) y otros.  Sergey Zonov simplemente me dijo que "el tren ya se fue" y que ya no hay ning√∫n sentido comercial en esta empresa.  Vyacheslav Skutin, siendo un ortopedista ortodoxo, se mostr√≥ hostil con cualquier idea en la que intentaran cambiar algo en la plataforma y esta tambi√©n era una versi√≥n completamente muerta.  Decid√≠ que se hablaba poco y que al menos hab√≠a que hacer algo y que era mejor comenzar con un emulador para obtener materiales promocionales y datos experimentales. </p><br><p>  En 1998, tomando como base uno de los emuladores ZX-Spectrum de c√≥digo abierto existentes en ese momento escritos en Pascal, hice un emulador primitivo de cuatro computadoras trabajando en paralelo.  Adapt√© parcialmente el juego After The War 2, coloreando algunos de sus sprites.  El sistema funcion√≥ y, adem√°s de disfrutar de la idea de trabajo, obtuve capturas de pantalla a mi disposici√≥n que confirmaban la idea de colorear los juegos existentes. </p><br><p>  En 1998, visit√© la compa√±√≠a Peters, que estaba desarrollando su nueva plataforma Sprinter en ese momento.  Intent√≥ interesar a su director Nikolai Noskov.  Invertieron mucho en el nuevo desarrollo y, de acuerdo con la ley de la mezquindad, la arquitectura s√∫per flexible de Sprinter, capaz de emular casi cualquier plataforma de procesador √∫nico en el Z80, no pod√≠a extender cuatro procesadores.  Sin embargo, una visita a esta empresa fue muy √∫til, ya que se reuni√≥ con el autor de la plataforma Sprinter Ivan Makarchenko y aprendi√≥ sobre nuevas oportunidades en el campo del desarrollo de FPGA. </p><br><p>  Pronto la crisis de 1998 "se marchit√≥" y hab√≠a una ingenua esperanza de que el inter√©s en el ZX-Spectrum pudiera revivir.  A principios de 1999, nosotros (con mi socio en ese momento, Andrei Savichev) incluso ten√≠amos planes de crear el "Fondo Nacional del Espectro" y se celebr√≥ una reuni√≥n sobre este tema en la nueva oficina de la misma compa√±√≠a Peters.  Pero no entran en el mismo r√≠o dos veces y, por supuesto, nada sali√≥ de √©l.  Ya en 1999, todas las ideas sobre el tema de la implementaci√≥n de hardware de la plataforma fueron descartadas (trabajamos en este desarrollo con Sergey Egorov, pero no fuimos m√°s all√° de los esquemas).  Hasta 2007, pr√°cticamente no trat√© con la plataforma, pero hubo tiempo y decid√≠ volver a escribir el emulador y resolver los detalles de la plataforma, comprobar los enfoques y dejarlos "virtualmente". </p></div></div><br><p>  El modo de video est√°ndar ZX-Spectrum, muestra 256 por 192 p√≠xeles.  En modo monocromo, esto requiere solo 6144 bytes, que es aproximadamente el 10% del campo de memoria total (frente al 50% en el BK-0010).  La informaci√≥n de color se almacena en 768 bytes adicionales ubicados inmediatamente despu√©s de los datos de p√≠xeles.  La paleta consta de ocho colores y dos tonos.  El color de los p√≠xeles iluminados y descartados se determina inmediatamente para el bloque de 8 por 8 p√≠xeles, y el tono se determina inmediatamente para el color de los p√≠xeles iluminados y descartados. </p><br><p>  Se ve colorido y una cantidad relativamente peque√±a de datos se env√≠a muy r√°pidamente, pero requiere un incre√≠ble esfuerzo y arte de artistas y programadores al desarrollar juegos de color y protectores de pantalla.  La menor inconsistencia en el gr√°fico conduce a un conflicto de atributos.  La mayor√≠a de los desarrolladores hicieron su trabajo perfectamente y con el tel√≥n de fondo de BK-0010, con sus solo cuatro colores (¬°pero para cada punto!), El espectro cuasi-color parec√≠a muy ventajoso y fresco. </p><br><p><img src="https://habrastorage.org/webt/rb/wz/qv/rbwzqvjgroepwudiddfwnl9vhsi.png" alt="Ejemplo de atributo ZX-Spectrum"></p><br><p>  Con el desarrollo de la plataforma para ZX-Spectrum 128, se agreg√≥ la capacidad de cambiar el hardware entre dos p√°ginas de memoria de video.  Los programadores encontraron r√°pidamente una forma de obtener varios colores utilizando un cambio muy r√°pido de las p√°ginas de video mostradas y un cambio din√°mico de los atributos de color. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_aeNtFCaYt8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Debido a esto, incluso fue posible aumentar program√°ticamente la resoluci√≥n de la pantalla (que se muestra perfectamente, por ejemplo, en la demostraci√≥n "Dead Morose", donde al mismo tiempo el texto se ejecuta con una resoluci√≥n de 256, 512 y 768 puntos horizontalmente). </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/WHj4gBB612U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Pero cualquier soluci√≥n de software que requiera un aumento en el flujo de informaci√≥n de video condujo a un aumento en el consumo del procesador, lo cual es muy cr√≠tico en el caso de los juegos din√°micos.  No hab√≠a una fuente no utilizada de reservas de energ√≠a inform√°tica en el sistema.  Todo se cuelga del procesador en el ZX-Spectrum y le da un poco de descarga, excepto quiz√°s el procesador de m√∫sica en el campo de los efectos de sonido. </p><br><p>  Mi idea era que podr√≠a agregar tres procesadores m√°s, lanzando sobre cada uno de ellos el procesamiento de su componente de color.  Los datos recibidos de la memoria de video de cada procesador deben integrarse, formando un valor YRGB <strong>para cada p√≠xel</strong> .  Los atributos de color est√°ndar se ignoran.  El procesamiento paralelo de la informaci√≥n debe garantizar que no se produzca una disminuci√≥n del rendimiento. </p><br><p><img src="https://habrastorage.org/webt/fs/g3/yc/fsg3ycbdz2wwt7ysrtsfpeyms1a.png" alt="Esquema de color en ZX-Poly 256x192"></p><br><p>  No puedo decir que fue original en la idea, ya que se inspir√≥ en la lectura del libro traducido "The Computer Gains Mind" (Mir Publishing House, 1990), que describe una determinada plataforma gr√°fica Pixar desarrollada en Lucasfilm.  Y seg√∫n <abbr title="La teor√≠a de la resoluci√≥n inventiva de problemas, o TRIZ, es un conjunto de m√©todos para resolver problemas t√©cnicos y mejorar los sistemas t√©cnicos.">TRIZ,</abbr> es solo una transici√≥n de un mono-sistema a un polisistema. </p><br><p><img src="https://habrastorage.org/webt/lg/7d/1k/lg7d1ktwhzyxrnzzwt2yljv8qaw.png" alt="secci√≥n de la p√°gina del libro &quot;The Computer Gains Mind&quot;"></p><br><p>  Una pregunta muy dolorosa para cualquier desarrollo, ¬øy qui√©n escribir√° el programa?  (en particular, la plataforma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sprinter se</a> encontr√≥ con esta "trampa").  En mi caso, el problema con el software se resolvi√≥ autom√°ticamente por el hecho de que muy raramente los programas existentes verificaban qu√© tipo de datos grababan en la memoria de video y simplemente trabajaban con ellos "como un cartero con una carta sellada".  Seg√∫n mis c√°lculos, result√≥ que la mayor√≠a de los programas de juegos existentes podr√≠an sobrevivir f√°cilmente a la adaptaci√≥n de sus datos de video sin cambios en el c√≥digo ejecutable.  Por supuesto, se cortaron los juegos con un paquete de gr√°ficos u optimizaciones internas en su salida a la pantalla.  Adaptar tales programas requerir√≠a investigaci√≥n y alteraci√≥n del c√≥digo ejecutable.  El desarrollo de ROM especializadas no era necesario en absoluto. </p><br><p>  Creo que este concepto es aplicable a cualquier plataforma dom√©stica antigua (por ejemplo, AGAT, Radio86RK, BK-0010, etc.), donde no hay un acelerador de video dedicado y el procesador funciona directamente con la memoria de video para formar una imagen. </p><br><p>  En la primera versi√≥n del emulador, acabo de hacer que cuatro ZX-Spectrum 48 funcionen sincr√≥nicamente, pero lo que es f√°cil de simular en el emulador es muy dif√≠cil de repetir en hardware real.  Es bastante dif√≠cil asegurar la carga de datos en cuatro m√≥dulos inform√°ticos y hacer un inicio sincr√≥nico desde la misma direcci√≥n.  Una soluci√≥n similar que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Spec256</a> presenta para este <abbr title="Instrucci√≥n √∫nica, datos m√∫ltiples: secuencia de instrucciones √∫nica, secuencia de datos m√∫ltiples">SIMD</abbr> Z80 virtual especializado de 64 bits, que no existe en la naturaleza.  Como parte de una soluci√≥n m√°s realista (y m√°s compleja) a este problema, se form√≥ la plataforma ZX-Poly. </p><br><h1 id="ot-cvetorasshiritelya-k-zx-poly">  Del "extensor de color" a ZX-Poly </h1><br><h2 id="processornye-moduli">  M√≥dulos de procesador </h2><br><p>  ZX-Poly es una plataforma inform√°tica basada en el ZX-Spectrum 128 que contiene cuatro m√≥dulos de procesador.  Cada m√≥dulo tiene sus propios puertos de E / S del sistema direccionables visibles desde el exterior.  Aunque los m√≥dulos del procesador comparten las se√±ales de control del sistema (RESET, NMI, CLK e INT), funcionan de manera independiente. </p><br><p><img src="https://habrastorage.org/webt/9r/na/nt/9rnantil7npmty1cnmtip6hdxvg.png" alt="Diagrama de bloques"></p><br><p>  Hay una cierta clasificaci√≥n seg√∫n el √≠ndice del m√≥dulo: cuanto menor es el √≠ndice, mayor es el rango, respectivamente, el "m√≥dulo 0" es el maestro en el sistema.  El acceso de escritura a los puertos del sistema del m√≥dulo solo est√° permitido para el m√≥dulo con el mismo rango o superior, no hay restricciones de lectura.  Esto se hizo porque hab√≠a pensamientos sobre el desarrollo de un sistema operativo especializado. </p><br><p><img src="https://habrastorage.org/webt/hz/wg/l9/hzwgl9ajm1vcyx_cycpsmh8c3uk.png" alt="Ranking de m√≥dulos"></p><br><p>  Un detalle muy importante es que todos los dispositivos de procesador utilizados deben ser del mismo fabricante (y ser√≠a bueno tener una serie de producci√≥n), ya que la m√°s m√≠nima diferencia en su organizaci√≥n interna u optimizaci√≥n puede violar la consistencia del sistema. </p><br><p>  Inmediatamente despu√©s del inicio del sistema, solo se inicia el m√≥dulo maestro (CPU0), los m√≥dulos restantes est√°n en modo de ESPERA, por lo que para el usuario todo pasa desapercibido. </p><br><p>  En el espacio IO, ZX-Poly agrega los siguientes puertos disponibles para escritura y lectura: </p><br><ul><li>  puerto de configuraci√≥n principal $ 3D00 </li><li>  m√≥dulo 0 - $ 00FF, $ 10FF, $ 20FF, $ 30FF </li><li>  m√≥dulo 1 - $ 01FF, $ 11FF, $ 21FF, $ 31FF </li><li>  m√≥dulo 2 - $ 02FF, $ 12FF, $ 22FF, $ 32FF </li><li>  m√≥dulo 3 - $ 03FF, $ 13FF, $ 23FF, $ 33FF </li></ul><br><p>  El puerto de configuraci√≥n principal de ZX-Poly es $ 3D00.  Solo el m√≥dulo maestro puede escribir en √©l, pero est√° disponible para leer en todos los m√≥dulos y se devuelve cada una de sus propias informaciones especializadas.  En particular, un m√≥dulo puede encontrar su √≠ndice, si su memoria est√° asignada a los puertos IO del m√≥dulo principal, el desplazamiento de su memoria en el mont√≥n, etc.  Adem√°s, el puerto de configuraci√≥n de la plataforma base $ 7FFD ha sufrido cambios menores, que utilizan bits no utilizados en el original. </p><br><h2 id="pamyat">  El recuerdo </h2><br><p>  Como en la arquitectura original del ZX-Spectrum 128, hay ROM y RAM.  Si la organizaci√≥n y el trabajo con la ROM pr√°cticamente no cambiaron, la RAM se convirti√≥ en un "mont√≥n" com√∫n de 512 KB en el que cada procesador funciona con una ventana dedicada de 128 KB (esto es 8 p√°ginas de 16 KB en el ZX-Spectrum 128).  El desplazamiento de la ventana se puede cambiar en incrementos de 64 Kb y se puede proyectar que todos los m√≥dulos de procesador funcionen con una pieza de memoria superpuesta total o parcialmente en el mont√≥n.  La ROM se puede desactivar y la p√°gina RAM0 RAM se conectar√° en su lugar (esto le permite hacer una versi√≥n "a todo color" del sistema operativo base, por ejemplo, un int√©rprete b√°sico).  Despu√©s de un RESET de hardware, todos los m√≥dulos reciben compensaciones autom√°ticas para separar las ventanas de memoria en el mont√≥n. </p><br><p>  El m√≥dulo maestro del procesador (CPU0) tiene la capacidad de asignar los espacios de direcciones de otros m√≥dulos (CPU1-3) en el √°rea de sus puertos IO.  Es decir  √©l puede escribir en el puerto, cambiando el estado de la celda de memoria de un m√≥dulo dado, y al mismo tiempo, es posible generar una se√±al NMI en un m√≥dulo mapeado.  Al leer desde las celdas de memoria de un m√≥dulo mapeado, es posible la generaci√≥n INT.  Esto se hizo para emular dispositivos virtuales utilizando los m√≥dulos 1-3. </p><br><h2 id="video-kontroller">  Controlador de video </h2><br><p>  La "cereza" principal es, por supuesto, un controlador de video, todo se inici√≥ para ello.  En total, la plataforma admite cinco modos de video. </p><br><h3 id="video-rezhimy-zx-spectrum-128-mode-0123">  Modos de video ZX-Spectrum 128 (modo 0,1,2,3) </h3><br><p>  Estos modos de video son irrelevantes y no difieren en absoluto del modo de video est√°ndar ZX-Spectrum 128. Se muestra la p√°gina de video actual del m√≥dulo de procesador seleccionado con color de atributo.  Inmediatamente despu√©s del inicio del sistema, se activa el modo 0, es decir.  Se muestra la p√°gina de video del m√≥dulo maestro (CPU0). </p><br><p><img src="https://habrastorage.org/webt/1f/lk/vn/1flkvncwify4gom7fmw2zp-i77c.png" alt="ATW2 en modo ZX est√°ndar"></p><br><h3 id="zx-poly-256x192-mode-4">  ZX-Poly 256x192 (modo 4) </h3><br><p>  Este modo de video no utiliza ning√∫n dato del √°rea de atributos.  El bit de p√≠xel de cada m√≥dulo se combina con los datos de p√≠xel de otros m√≥dulos y los cuatro bits generados se utilizan para generar una se√±al YRGB de brillo de color. </p><br><p>  Cada m√≥dulo es responsable de su componente: </p><br><ul><li>  m√≥dulo 0 (maestro) para verde (verde). </li><li>  m√≥dulo 1 para rojo (rojo) </li><li>  m√≥dulo 2 para azul (azul) </li><li>  m√≥dulo 3 para brillo </li></ul><br><p><img src="https://habrastorage.org/webt/gy/kw/jx/gykwjxvnd5r_4967oxnlgo2z8gs.gif" alt="versi√≥n coloreada"></p><br><p>  Si comienzas un juego no adaptado en este modo, simplemente ser√° en blanco y negro. <br><img src="https://habrastorage.org/webt/jt/_i/s4/jt_is4xsowghhld2aimz0dnpplc.png" alt="juego no adaptado"></p><br><h3 id="zx-poly-256x192-s-maskirovaniem-po-inkpaper-mode-6">  ZX-Poly 256x192 con enmascaramiento por TINTA + PAPEL (modo 6) </h3><br><p>  Al igual que el anterior, proporciona 16 colores para cada punto, pero hay un "truco".  En algunos programas de ZX-Spectrum, los elementos gr√°ficos se ocultan utilizando los valores id√©nticos de INK y PAPER en los atributos, especialmente en los juegos de desplazamiento.  Si elimina esta oportunidad, los elementos gr√°ficos comienzan a acumularse en la pantalla, rompiendo la imagen.  Por lo tanto, el estado de TINTA y PAPEL se analiza a partir del atributo del m√≥dulo maestro le√≠do desde la memoria de video (CPU0) y si son id√©nticos, todos los puntos se resaltan con el color tomado de TINTA / PAPEL (por supuesto, teniendo en cuenta el brillo). </p><br><p><img src="https://habrastorage.org/webt/ol/sy/26/olsy265bag3_dg_bnxl-grzsjlq.gif"></p><br><h3 id="zx-poly-256x192-s-maskirovaniem-po-flashinkpaper-mode-7">  ZX-Poly 256x192 con enmascaramiento por FLASH + TINTA + PAPEL (modo 7) </h3><br><p>  El modo es una combinaci√≥n del modo 4 y el modo 6. Para los atributos legibles del m√≥dulo maestro (CPU0), se analiza el bit FLASH y, si est√° configurado (lo cual es raro en juegos din√°micos en el campo de juego), el bloque de 8 por 8 p√≠xeles se muestra en el modo modo 6 ( con enmascaramiento con TINTA y PAPEL id√©nticos).  Si se reinicia FLASH, el bloque se muestra como en un ZX-Spectrum normal.  El bit FLASH no se practica en su funci√≥n directa y no habr√° parpadeo. <br>  Este modo es muy conveniente para evitar volver a pintar los paneles de informaci√≥n del juego y algunos efectos en el juego (por ejemplo, cuando los desarrolladores de juegos destellan en el campo de juego a trav√©s de atributos). </p><br><p><img src="https://habrastorage.org/webt/cs/fr/cv/csfrcvh0rtury8g_9g20t1xoecm.gif" alt="Tibur√≥n volador adaptado animado"></p><br><h3 id="zx-poly-512x384-s-atributami-mode-5">  ZX-Poly 512x384 con atributos (modo 5) </h3><br><p>  Los atributos se usan casi de la misma manera que en la plataforma original, sin ning√∫n cambio (incluso el bit FLASH).  Los datos de p√≠xeles de video de cada m√≥dulo se colorean con un atributo de la memoria de video de este m√≥dulo y, despu√©s de pasar por el color, se muestran en un patr√≥n de tablero de ajedrez, debido a que un bloque de familiaridad es de 16 por 16 puntos. </p><br><p><img src="https://habrastorage.org/webt/5i/gv/cl/5igvcljru-gbuybss377ujcbbr0.png" alt="formaci√≥n de ajedrez"></p><br><p>  Este modo le permite duplicar la resoluci√≥n de las aplicaciones sin cambiar el c√≥digo ejecutable.  Es cierto que los experimentos con el mismo juego "Pinocho" mostraron que en juegos brillantes con grandes detalles, el efecto ser√° poco notable.  Como se trata de una especie de p√≠xeles virtuales, los juegos no saben nada sobre esto y el movimiento m√≠nimo posible de los elementos del juego es del nivel de dos p√≠xeles virtuales.  Creo que este modo es bueno para juegos con peque√±os objetos de juego en un lugar familiar. </p><br><p><img src="https://habrastorage.org/webt/o4/25/hk/o425hkbmpkl00uju8aaon-_siui.png" alt="ejemplo del juego &quot;Pinocho&quot;"></p><br><p>  Se obtuvo un efecto mucho mejor en este modo de video en aplicaciones de texto, por ejemplo, en el editor de texto ZX-Word, donde la fuente se proces√≥ sin cambios en el c√≥digo ejecutable. </p><br><p><img src="https://habrastorage.org/webt/xd/ol/li/xdollinm5mle6snma7prgemgyyw.gif" alt="ZX-Word adaptado"></p><br><h2 id="mnogozadachnost">  Multitarea </h2><br><p>  A pesar de que los procesadores del sistema utilizan la misma fuente de se√±ales de control, funcionan de manera independiente.  El sistema no puede llamarse un <abbr title="Single Instruction, Multiple Data -   ,   ">SIMD</abbr> completo, ya que cada procesador procesa instrucciones desde su propio bloque de memoria, simplemente aprovecha la capacidad de "sacar" las mismas instrucciones.         ,  "  "        ‚Äî  . </p><br><p><img src="https://habrastorage.org/webt/gp/yg/5k/gpyg5khuq7hn9jvvbgny5hddqrs.png" alt=" "></p><br><p>          ,     ,         "".  ,     . </p><br><h2 id="mehanizmy-sinhronizacii">   </h2><br><h3 id="lokalnyy-reset">  RESET </h3><br><p>       RESET    ,            .     JP ADDR          . </p><br><h3 id="stop-adres"> - </h3><br><p>       master- (CPU0).       ,      (   M1),      <strong></strong>  WAIT,                RESET.       ,   ,   16     . </p><br><h1 id="emulyator-sistemy">   </h1><br><p>  2007  JavaSE     .        Z80 (      -)  FDD  181893.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JDK 1.8+</a> . </p><br><p><img src="https://habrastorage.org/webt/0m/qa/rp/0mqarpebzf0p9ewtwkojknscb_u.png" alt=" "></p><br><p>            ZX-Spectrum        ,  80%   ,    .         ZX-Spectrum 128,      <strong>Options-&gt;ZX 128 Mode</strong> ,    ZX-Poly      . </p><br><p>       -,    ZX-Spectrum ‚Äî   .      ,    <strong>File-&gt;Options</strong> </p><br><p><img src="https://habrastorage.org/webt/re/3a/er/re3aerw3r_zksnkvghxn35u3n2w.gif" alt="ZX-Poly test ROM"></p><br><p>     -  ,     .           ,         . </p><br><p>   ,           .    TAP  TR-DOS   . </p><br><p><img src="https://habrastorage.org/webt/_o/py/bv/_opybvhjgijkprgwb2lyaipdpy4.gif" alt="  "></p><br><p>       (   Java)    . </p><br><p><img src="https://habrastorage.org/webt/3b/dg/fa/3bdgfacgkovaenmlf1ewkcoiriw.png" alt="ZX-Poly  "></p><br><p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GNU GPLv3</a> . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/xr/1n/zx/xr1nzxg1xx9xmbv0hzgdas_dmu4.png"></a> <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472232/">https://habr.com/ru/post/472232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472222/index.html">‚ÄúLee si te gusta escuchar‚Äù: libros para aquellos que no son indiferentes a la m√∫sica, desde cl√°sica hasta hip-hop.</a></li>
<li><a href="../472224/index.html">Uso de la nueva SSD NVMe como disco de arranque en sistemas m√°s antiguos con BIOS heredado (para cualquier sistema operativo)</a></li>
<li><a href="../472226/index.html">Mejora de controles de formulario en Microsoft Edge y Chromium</a></li>
<li><a href="../472228/index.html">9 trucos para trabajar con c√≥digo de Visual Studio</a></li>
<li><a href="../472230/index.html">Chips for ML - habla sobre nuevos productos</a></li>
<li><a href="../472234/index.html">Criptomoneda: ¬øsigue siendo un cargador gratuito o un socio?</a></li>
<li><a href="../472240/index.html">Sobre la gamificaci√≥n. ¬øQu√© es, por qu√© y c√≥mo hacerlo? Look de desarrollador</a></li>
<li><a href="../472242/index.html">Hemos acelerado el planificador de Tokio diez veces</a></li>
<li><a href="../472246/index.html">React + IndexDb + auto-update = casi AsyncRedux</a></li>
<li><a href="../472248/index.html">C√≥mo fusionamos la programaci√≥n IT-Planet final</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>