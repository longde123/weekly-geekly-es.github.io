<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☀️ 🧑 🏦 我如何决定保护文件不被伪造并“发明”电子数字签名 🦑 👨‍💼 🖌️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="有什么事 
 创建我自己的小型Internet项目以保护文档免受伪造的想法是由缺陷检查员论坛上的讨论引起的，该讨论会专门伪造了他们发布的质量控制结论。 

 在项目实施过程中，我意识到我想到了电子数字签名的概念，也就是自行车，虽然我没有发明，但是关于我的道路的故事却很有启发性。 

 防止假货的任务...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我如何决定保护文件不被伪造并“发明”电子数字签名</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442210/"><h2> 有什么事 </h2><br> 创建我自己的小型Internet项目以保护文档免受伪造的想法是由缺陷检查员论坛上的讨论引起的，该讨论会专门伪造了他们发布的质量控制结论。 <br><br> 在项目实施过程中，我意识到我想到了电子数字签名的概念，也就是自行车，虽然我没有发明，但是关于我的道路的故事却很有启发性。 <br><br><h2> 防止假货的任务的相关性 </h2><br> 事实上，在本世纪无纸化信息而不是单一的基本建设（无论是天然气管道还是购物中心）中，无需准备一套完整的竣工文件即可完成这些工作，包括无损检测（视觉，射线照相，超声）结论。 <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/cm/7n/ee/cm7nee3ngx3tpo1yb-ihvnpregc.png"><br><br> 该结论是以某种形式起草的文件，其中包含例如焊缝的适用性或不适用性的结论。 非破坏性测试服务要花钱，而且通常相当可观。 不道德的客户/中介机构可能会雇用经过认可的实验室，从中获得一些意见，然后停止或暂停工作。 <br><br> 探伤仪操作员或实验室负责人可能会感到惊讶的是，当他们得知即使终止工作后，仍会代表他们发布结论，并在其上盖上伪造的印章和伪造的签名。 实验室的声誉受到损害，实际上是在违反法律。 只是在许多情况下，没人会知道。 <br><br> 作为讨论的一部分-如何保护文档，表达了将QR码放在文档上的想法，其中将记录有关控制对象是否适用的结论编号，日期和结论。 这种方法为什么好-扫描，复印文档时，QR码仍可清晰区分。 <br><br> 但是，诈骗者也将能够简单地生成带有必要内容的QR码。 <br><br><h2> 一个想法的诞生 </h2><br> 然后我想到一个主意-为什么不使用可靠的算法对此类QR码的内容进行加密。 如果是这样，则需要提出一种在扫描时（例如通过智能手机的摄像头）对其进行解密的方法。 这里的想法诞生于在Web服务方面进行解密，该服务将存储用于解密的密钥。 <br><br> 我上一次在2000年用记事本建立网站时，对现代网站建设技术不太熟悉，因此我选择了Wix，以为在服务的帮助下，我将获得一幅美丽的图画，并且使用数据库的可能性很小，并使用Wix代码对它进行编码我需要什么 <br><br> 我必须马上说我做起来没有太大困难，并且在几个晚上，作为一个业余爱好者，我能够从或多或少的现成模块中组装所需的解决方案。 <br><br><h2> 加密方式 </h2><br> 我在Github上使用Java Script实现了完成的AES 128位加密<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">算法</a> ，并将其放在网站的后端部分。 <br><br> 这也许是工作中最容易的部分。 加密本身的工作方式对我来说并不完全不有趣。 我担心这个计划的宏伟。 <br><br> 最主要的是不要忘记将编码的文本转换为字节，并且加密结果为十六进制。 <br><br><pre><code class="plaintext hljs">// Convert text to bytes var textBytes = aesjs.utils.utf8.toBytes(text); // The counter is optional, and if omitted will begin at 1 var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(5)); var encryptedBytes = aesCtr.encrypt(textBytes); // To print or store the binary data, you may convert it to hex var encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);</code> </pre> <br><h2>  QR码生成 </h2><br> 我使用了现成的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">API</a> 。 <br><br> 要工作，只需创建一个html1对象-显示任意html代码并调用API函数 <br><br><pre> <code class="plaintext hljs">let val = “ " $w("#html1").src = "https://api.qrserver.com/v1/create-qr-code/?size=100x100&amp;data=" + val.toString(); $w("#html1").show();</code> </pre> <br><h2> 与用户合作 </h2><br>  Wix支持基本的用户注册和配置文件编辑功能。 该工具有些漏洞，但可以使用。 <br><br> 我只需要添加一个字段来描述注册用户代表的组织的名称，但是该字段是只读的，当服务管理员收到确认注册用户确实代表指定组织的信息时，它将由服务管理员填写。 <br><br> 还必须加强与付费/免费使用功能（每月最多可免费保护20个文档）和服务付费期限相关的最简单逻辑。 <br><h2> 工作原理 </h2><br> 唯一的专用加密密钥绑定到用户的帐户。 <br><br> 登录的用户填写有关结论的信息（数字，日期，结果）的表单： <br><br><img src="https://habrastorage.org/webt/fo/id/ct/foidct3dccu6c3_6lorfm6c7pai.png"><br><br> 然后，该算法返回一个包含TEXT密文并充当公用密钥USER_ID的URL，如下例所示： <br><br> <code>https:// <i>* *</i> /checkqr?user=3b01b0aa-68a0-4521-ab12-f17b86d3eabc&amp;v=1.0&amp;text=8a026594c26be959f4280e28fe8402c1acef233e369a31613d654d3b0a5bbaca206f3058d27d2fde66b65cb64a5a6caecb69b07ad39c0015e923dad89eb723</code> <br> <br> 该URL变成了QR码，用户已经通过将其复制到剪贴板上而将其放在文档上（您可以将其包含在源文件中，也可以将其作为不干胶标签粘贴在完成的打印文档上）。 <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/lp/f-/0o/lpf-0ojmmbrd1bh7ylqqa-pmyzu.png"></a> <br><br> 此处重要的是-信息不会进入站点数据库，而是仅以此链接和包含此链接的QR码的形式保留。 因此，在服务器上没有存储关于受保护文档的内容的信息。 <br><br><h2> 解析链接时由站点检查代码 </h2><br> 为了在网站识别出链接时进行解析，我使用了有关Wix代码的帮助 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.wix.com/code/reference/wix-">www.wix.com/code/reference/wix-http-functions.html</a> <br><br> 如果在解密过程中出了点问题，可能是对原始QR码做了一些更改 <br><blockquote>  “文档代码被解密，但有错误。 可能是假的。 请与准备该文档的组织联系以进行澄清。” </blockquote> 如果解密成功完成，则发出解密的文本，其中包含实验室的名称，文件编号，签发日期和结果，并要求用户将解密结果与他在真实文件中看到的进行比较。 <br><br><h2> 结论 </h2><br> 从这个想法的诞生开始，我就开始使用一些预制的砖块进行工作了。 <br><br> 我邀请您就我提出的想法进行讨论，以尝试测试/破解我的服务。 <br><br><h4> 有待完成的工作 </h4><br><ul><li>  <s>在habr上写出执行结果</s> </li><li> 了解一次链接检查后如何重置查询 </li><li> 要弄清楚如何缩小密文，因为对长URL进行编码时，QR码的大小太大 </li><li> 添加将代码复制到剪贴板或通过单击按钮通过电子邮件发送的功能（直到我弄清楚如何在javascript中完成代码） </li><li> 改进移动版本的工作 </li></ul><br><h4> 对可能的批评的初步回应： </h4><br><blockquote> 实验室在其网站上保存结论注册不是更容易，并且类似的QR标签会导致该注册管理机构甚至显示报告的副本吗？ </blockquote> 可以做到，但是需要大量的人工工作或引入您自己的IT解决方案（例如由我开发的解决方案），但显然比使用现成的解决方案要花费更多。 <br><br> 不可能完全公开获取这样的注册信息，因为该信息不是公开的，而是只能由承包商，客户和Rostekhnadzor来考虑。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442210/">https://habr.com/ru/post/zh-CN442210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442200/index.html">Bereshit月球任务-SpaceIL和以色列航空航天工业（IAI）MCC的工程师解决了这些问题</a></li>
<li><a href="../zh-CN442202/index.html">从SpringBoot服务器推送通知</a></li>
<li><a href="../zh-CN442204/index.html">Compaq LTE 5000笔记本电脑，第1部分-简介</a></li>
<li><a href="../zh-CN442206/index.html">准备检查Roskomnadzor：勇敢者的严厉做法</a></li>
<li><a href="../zh-CN442208/index.html">在出版物中张贴错别字</a></li>
<li><a href="../zh-CN442212/index.html">数据科学文摘</a></li>
<li><a href="../zh-CN442214/index.html">我们如何设置东欧最高海拔的基站</a></li>
<li><a href="../zh-CN442218/index.html">FunTech iOS大会＃1</a></li>
<li><a href="../zh-CN442222/index.html">来自IT世界的好奇变态-3</a></li>
<li><a href="../zh-CN442224/index.html">不好的建议：如何编写技术文档？ 第二部分</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>