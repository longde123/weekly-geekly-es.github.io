<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§–ğŸ¾ ğŸš˜ âï¸ Streaming vidÃ©o via un navigateur Ã  trÃ¨s faible latence (et WebRTC!) ğŸ¥‹ ğŸ˜† ğŸ‘¨â€ğŸ³</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alors que les premiers premiers adoptants essaient nos nouvelles vidÃ©oconfÃ©rences (jusqu'Ã  100 personnes!) Dans leurs projets, nous continuons Ã  parle...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Streaming vidÃ©o via un navigateur Ã  trÃ¨s faible latence (et WebRTC!)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/421121/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/oa/hu/kv/oahukvx05phesrj7ttv_qg9o3pq.gif"></div><br>  Alors que les premiers premiers adoptants essaient nos nouvelles vidÃ©oconfÃ©rences (jusqu'Ã  100 personnes!) Dans leurs projets, nous continuons Ã  parler de choses intÃ©ressantes du monde de la transmission vocale et vidÃ©o avec un navigateur.  Nous parlerons Ã©galement de visioconfÃ©rence, mais plus tard - lorsqu'une masse critique d'utilisateurs s'accumule et que des statistiques intÃ©ressantes sont collectÃ©es.  Et maintenant, j'ai traduit et adaptÃ© pour nous l'histoire du Dr  Alex sur la place des diffÃ©rents protocoles lors de la transmission vidÃ©o Ã  faible latence.  L'histoire est essentiellement une rÃ©ponse Ã  un autre article, et l'auteur, avec l'histoire, souligne les erreurs et les inexactitudes que ses collÃ¨gues de l'atelier ont faites. <br><a name="habracut"></a><br><h2>  DonnÃ©es rÃ©seau: alarme sÃ©parÃ©ment, vidÃ©o sÃ©parÃ©ment </h2><br>  Dans les systÃ¨mes modernes, si vous voyez de la vidÃ©o dans un navigateur, le flux vidÃ©o et l'alarme seront trÃ¨s probablement traitÃ©s par diffÃ©rents serveurs.  Si tout est clair avec la vidÃ©o, le Â«serveur d'alarmeÂ» fournit deux choses: Â«dÃ©couverteÂ» et Â«poignÃ©e de mainÂ».  La premiÃ¨re, la Â«dÃ©couverteÂ», est le choix de la mÃ©thode de transfert des donnÃ©es: adresses IP, un serveur intermÃ©diaire (si nÃ©cessaire).  Â«PoignÃ©e de mainÂ» - sur la nÃ©gociation entre les participants Ã  la transmission vidÃ©o et sonore: codecs, rÃ©solution, frÃ©quence d'images, qualitÃ©.  Fait intÃ©ressant, dans Flash ancien, la signalisation et la transmission multimÃ©dia n'Ã©taient pas sÃ©parÃ©es comme dans VoxIP ou WebRTC et Ã©taient fournies par un protocole: RTMP. <br><br><h2>  La diffÃ©rence entre le protocole de signalisation et le transport de signalisation </h2><br>  Le protocole de signalisation dÃ©finit la langue avec laquelle le navigateur et les autres participants Ã  la transmission vidÃ©o se mettront d'accord sur la dÃ©couverte et la prise de contact.  Cela peut Ãªtre SIP pour la dÃ©couverte en VoIP ou WebRTC, et c'est avec une offre / rÃ©ponse pour une poignÃ©e de main.  Il y a longtemps, Flash utilisait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTMP / AMF</a> .  Et si vous le souhaitez, pour WebRTC, vous pouvez utiliser non pas SIP, mais JSEP inhabituel. <br><br>  Le protocole de transport de signalisation de la mÃªme pile, mais infÃ©rieur: c'est ainsi que les paquets de protocole de signalisation seront physiquement transmis.  Traditionnellement, pour Flash + SIP, TCP ou UDP Ã©tait utilisÃ©, mais maintenant dans le bundle WebRTC + SIP, les WebSockets sont de plus en plus prÃ©sents.  Le protocole de transport WebSockets occupe la niche TCP des navigateurs oÃ¹ vous ne pouvez pas utiliser de sockets TCP et UDP Â«pursÂ». <br><br>  Une pile de signalisation complÃ¨te est dÃ©sormais couramment dÃ©crite avec des expressions comme Â«SIP au-dessus des sockets WebÂ», Â«JSEP au-dessus des sockets WebÂ», obsolÃ¨te Â«SIP au-dessus de TCP / UDPÂ» ou l'ancienne Â«partie de RTMPÂ». <br><br><h2>  Programmeur anglicisme: Media Codec </h2><br>  La plupart des protocoles de streaming vidÃ©o sont liÃ©s Ã  un ou plusieurs codecs.  La vidÃ©o reÃ§ue de la camÃ©ra est traitÃ©e image par image.  Et les problÃ¨mes de rÃ©seau, tels que la rÃ©duction de la bande passante, la perte de paquets ou le retard entre eux, sont rÃ©solus par les paramÃ¨tres du codec pour chaque trame.  Pour en savoir plus sur les problÃ¨mes de rÃ©seau dans le temps, nous utilisons des mÃ©canismes de protocole de transport (RTP / RTCP) et des mÃ©canismes d'estimation de bande passante (REMB, Transport-CC, TIMBR).  L'un des problÃ¨mes fondamentaux avec la vidÃ©o Flash Ã©tait que RTMP ne pouvait pas faire non plus, donc la vidÃ©o s'arrÃªtait simplement lorsque la bande passante du canal diminuait. <br><br><h2>  Un autre anglicisme: le protocole de streaming multimÃ©dia </h2><br>  DÃ©termine comment diviser le flux vidÃ©o en petits paquets qui sont envoyÃ©s sur le rÃ©seau par le protocole de transport.  En rÃ¨gle gÃ©nÃ©rale, le protocole de streaming fournit toujours des mÃ©canismes pour gÃ©rer les problÃ¨mes de rÃ©seau: perte et retard de paquets.  Tampon de gigue, retransmission (RTC), redondance (RED) et correction d'erreur directe (FEC). <br><br><h2>  Protocole de transfert de mÃ©dia </h2><br>  Une fois la vidÃ©o reÃ§ue de la camÃ©ra divisÃ©e en petits paquets, ils doivent Ãªtre transmis sur le rÃ©seau.  Le protocole de transport utilisÃ© pour cela est similaire Ã  celui de signalisation, mais comme la Â«charge utileÂ» est complÃ¨tement diffÃ©rente, certains protocoles sont meilleurs que d'autres.  Par exemple, TCP fournit l'accessibilitÃ© des paquets, mais il n'ajoute pas de valeur Ã  la pile, car des mÃ©canismes similaires (RTX / RED / FEC) sont dÃ©jÃ  dans le protocole de streaming.  Mais les retards dans la retransmission vers TCP sont une faille Ã©vidente que UDP n'a pas.  Mais il y a la pratique de bloquer UDP comme Â«protocole pour les torrentsÂ». <br><br>  Le choix du protocole et des ports rÃ©seau Ã©tait prÃ©cÃ©demment dÃ©cidÃ© par Â«hardcodingÂ», mais maintenant nous utilisons des protocoles tels que ICE dans WebRTC, ce qui nous permet de nous mettre d'accord sur les ports et le transport dans chaque connexion spÃ©cifique.  Dans un avenir proche, il est possible d'utiliser le protocole QUIC (rÃ©trocompatible avec UDP), qui est activement discutÃ© par l'IETF et prÃ©sente des avantages par rapport Ã  TCP et UDP en termes de vitesse et de fiabilitÃ©.  Enfin, nous pouvons mentionner les protocoles de streaming multimÃ©dia tels que MPEG-DASH et HLS, qui utilisent HTTP comme transport et bÃ©nÃ©ficieront de l'introduction de HTTP / 2.0. <br><br><h2>  SÃ©curitÃ© de transmission des mÃ©dias </h2><br>  Certains moteurs protÃ¨gent les donnÃ©es lors de leur transmission sur le rÃ©seau: soit le flux multimÃ©dia lui-mÃªme, soit les paquets de la couche transport.  Le processus comprend le transfert mÃªme de clÃ©s de chiffrement, pour lesquelles des protocoles distincts sont utilisÃ©s: SDES en VoIP et DTLS en WebRTC.  Ce dernier a un avantage, car en plus des donnÃ©es, il protÃ¨ge Ã©galement la transmission des clÃ©s de chiffrement. <br><br><h2>  Ce qui me dÃ©range dans tout Ã§a </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/od/pd/xx/odpdxx5jrsjgoo8xu22boycell4.png"></div><br>  Certains dÃ©veloppeurs, tels que les auteurs de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet article</a> , placent les protocoles purement WebSocket et QUIC au mÃªme niveau que WebRTC, Flash ou HLS.  Pour moi, un tel regroupement semble Ã©trange, car les trois derniers protocoles sont une histoire de streaming multimÃ©dia.  L'encodage et la mise en paquets ont lieu avant d'utiliser WebSocket ou QUIC.  L'implÃ©mentation WebRTC de rÃ©fÃ©rence de Google (libwebrtc / chrome) et l'ORTC de Microsoft utilisent QUIC comme protocole de transport. <br><br>  Tout aussi surprenant est le manque de mention de HTTP / 2.0 comme optimisation pour les protocoles basÃ©s sur HTTP tels que HLS et MPEG-DASH.  Et le CMAF mentionnÃ© n'est rien de plus qu'un format de fichier pour HLS et MPEG-DASH, mais pas leur remplacement du tout. <br><br>  Enfin, SRT n'est qu'un protocole de transport.  Bien sÃ»r, il ajoute un certain nombre de puces par rapport Ã  celles basÃ©es sur les fichiers HLS et MPEG-DASH, mais toutes ces puces sont dÃ©jÃ  Ã  un niveau de pile diffÃ©rent et sont implÃ©mentÃ©es dans RTMP ou WebRTC.  SRT partage Ã©galement l'encodage du flux multimÃ©dia et des statistiques, ce qui ne permet pas au codec de garder ces informations aussi proches que possible les unes des autres.  Une telle dÃ©cision peut nuire Ã  la capacitÃ© d'adapter la vidÃ©o transfÃ©rÃ©e Ã  l'Ã©volution de la bande passante du rÃ©seau. <br><br>  Les protocoles basÃ©s sur des fichiers, tels que HLS, codent plusieurs flux et sÃ©lectionnent ceux nÃ©cessaires pour s'adapter Ã  la largeur du canal.  WebRTC vous permet d'adapter l'encodage de chaque trame en temps rÃ©el: c'est beaucoup plus rapide que de sÃ©lectionner un autre flux en HLS, ce qui nÃ©cessite de compter jusqu'Ã  10 secondes de donnÃ©es dÃ©jÃ  envoyÃ©es. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr421121/">https://habr.com/ru/post/fr421121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr421109/index.html">(Mise Ã  jour) Intel interdit la publication de rÃ©fÃ©rences pour les mises Ã  jour du microcode</a></li>
<li><a href="../fr421111/index.html">SystÃ¨me de conception Ã  Figma. Un regard sur l'interface Ã  travers les composants</a></li>
<li><a href="../fr421113/index.html">PrÃ©sentation de DJI Mavic 2 Pro / Zoom</a></li>
<li><a href="../fr421115/index.html">Contexte dans une application Android</a></li>
<li><a href="../fr421119/index.html">DÃ©veloppement SmartTV de rÃ¢teau sous-marin</a></li>
<li><a href="../fr421123/index.html">RÃ©sumÃ© des Ã©vÃ©nements informatiques de septembre</a></li>
<li><a href="../fr421125/index.html">Nous segmentons 600 millions d'utilisateurs en temps rÃ©el chaque jour</a></li>
<li><a href="../fr421127/index.html">Webinaires Skillbox Friday: Design & Developers</a></li>
<li><a href="../fr421129/index.html">Comment rÃ©duire la rÃ©vision du code de deux semaines Ã  plusieurs heures. L'expÃ©rience de l'Ã©quipe Yandex.Market</a></li>
<li><a href="../fr421131/index.html">VulnÃ©rabilitÃ© critique des serveurs 1Cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>