<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüç≥ üôÖüèæ ‚ú¥Ô∏è Linux-Rechte (chown, chmod, SUID, GUID, Sticky Bit, ACL, umask) üëÇüèø üë©üèø‚Äçüè´ üëåüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle. Dies ist eine √úbersetzung eines Artikels von RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 und EX300. 

 Von mir selbst: Ich hoff...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Linux-Rechte (chown, chmod, SUID, GUID, Sticky Bit, ACL, umask)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469667/">  Hallo an alle.  Dies ist eine √úbersetzung eines Artikels von RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 und EX300. <br><br>  <b>Von mir selbst:</b> Ich hoffe, dass der Artikel nicht nur f√ºr Anf√§nger n√ºtzlich ist, sondern auch erfahreneren Administratoren hilft, ihr Wissen zu organisieren. <br><br>  Also lass uns gehen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/95b/e9d/a00/95be9da00b36434d2b2445fe1379b5ae.png" alt="Bild"><br><a name="habracut"></a><br>  F√ºr den Zugriff auf Dateien unter Linux werden Berechtigungen verwendet.  Diese Berechtigungen werden drei Objekten zugewiesen: einer Datei, einer Gruppe und einem anderen Objekt (dh allen anderen).  In diesem Artikel erfahren Sie, wie Sie Berechtigungen anwenden. <br><br>  Der Artikel beginnt mit einer √úberpr√ºfung der Grundkonzepte. Anschlie√üend werden spezielle Berechtigungen und Zugriffssteuerungslisten (ACLs) erl√§utert.  Am Ende dieses Artikels erfahren Sie, wie Sie Standardberechtigungen √ºber umask konfigurieren und erweiterte Benutzerattribute verwalten. <br><br><h2>  Dateibesitzungsverwaltung </h2><br>  Bevor Sie √ºber Berechtigungen sprechen, sollten Sie sich der Rolle des Eigent√ºmers der Datei und des Verzeichnisses bewusst sein.  Der Besitz von Dateien und Verzeichnissen ist f√ºr die Arbeit mit Berechtigungen von entscheidender Bedeutung.  In diesem Abschnitt erfahren Sie zun√§chst, wie Sie den Eigent√ºmer sehen k√∂nnen.  Anschlie√üend erfahren Sie, wie Sie den Gruppenbesitzer und -benutzer f√ºr Dateien und Verzeichnisse √§ndern. <br><br><h3>  Eigent√ºmer einer Datei oder eines Verzeichnisses anzeigen </h3><br>  Unter Linux hat jede Datei und jedes Verzeichnis zwei Eigent√ºmer: einen Benutzer und eine Gruppe. <br><br>  Diese Eigent√ºmer werden festgelegt, wenn die Datei oder das Verzeichnis erstellt wird.  Der Benutzer, der die Datei erstellt, wird Eigent√ºmer dieser Datei, und die prim√§re Gruppe, zu der derselbe Benutzer geh√∂rt, wird auch Eigent√ºmer dieser Datei.  Um festzustellen, ob Sie als Benutzer Zugriffsrechte auf eine Datei oder ein Verzeichnis haben, √ºberpr√ºft die Shell deren Besitz. <br><br>  <b>Dies geschieht in der folgenden Reihenfolge:</b> <br><br><ol><li>  Die Shell pr√ºft, ob Sie die Datei besitzen, auf die Sie zugreifen m√∂chten.  Wenn Sie dieser Eigent√ºmer sind, erhalten Sie Berechtigungen und die Shell h√∂rt auf zu pr√ºfen. </li><li>  Wenn Sie die Datei nicht besitzen, pr√ºft die Shell, ob Sie Mitglied einer Gruppe sind, die √ºber Berechtigungen f√ºr diese Datei verf√ºgt.  Wenn Sie Mitglied dieser Gruppe sind, erhalten Sie Zugriff auf die Datei mit den f√ºr die Gruppe festgelegten Berechtigungen, und die Shell beendet die √úberpr√ºfung. </li><li>  Wenn Sie weder Benutzer noch Eigent√ºmer der Gruppe sind, erhalten Sie die Rechte anderer Benutzer (Andere). </li></ol><br>  Um die aktuellen Eigent√ºmerzuweisungen anzuzeigen, k√∂nnen Sie den <b>Befehl ls -l verwenden</b> .  Dieser Befehl zeigt die Benutzer- und Eigent√ºmergruppe an.  Unten sehen Sie die Eigent√ºmereinstellungen f√ºr Verzeichnisse im Verzeichnis / home. <br><br><pre><code class="bash hljs">[root@server1 home]<span class="hljs-comment"><span class="hljs-comment"># ls -l total 8 drwx------. 3 bob bob 74 Feb 6 10:13 bob drwx------. 3 caroline caroline 74 Feb 6 10:13 caroline drwx------. 3 fozia fozia 74 Feb 6 10:13 fozia drwx------. 3 lara lara 74 Feb 6 10:13 lara drwx------. 5 lisa lisa 4096 Feb 6 10:12 lisa drwx------. 14 user user 4096 Feb 5 10:35 user</span></span></code> </pre> <br>  Mit dem <b>Befehl ls k√∂nnen</b> Sie den Eigent√ºmer der Dateien in diesem Verzeichnis anzeigen.  Manchmal kann es n√ºtzlich sein, eine Liste aller Dateien im System abzurufen, in denen der Benutzer oder die Gruppe als Eigent√ºmer angegeben ist.  Sie k√∂nnen <b>find daf√ºr verwenden</b> .  Zu diesem Zweck kann das <b>Argument find -user</b> verwendet werden.  Der folgende Befehl zeigt beispielsweise alle Dateien an, f√ºr die der Benutzer linda als Eigent√ºmer angegeben wurde: <br><br><pre> <code class="bash hljs">find / -user linda</code> </pre> <br>  Sie k√∂nnen <b>find</b> auch verwenden, <b>um</b> nach Dateien zu suchen, in denen sie einer bestimmten Gruppe geh√∂ren. <br><br>  Der folgende Befehl sucht beispielsweise nach allen Dateien, die zur <i>Benutzergruppe geh√∂ren</i> : <br><br><pre> <code class="bash hljs">find / -group users</code> </pre> <br><h3>  Eigent√ºmerwechsel </h3><br>  Um Berechtigungen anzuwenden, m√ºssen Sie zun√§chst das Eigentum ber√ºcksichtigen.  <b>Hierf√ºr</b> gibt es einen <b>Chown-Befehl</b> .  Die Syntax dieses Befehls ist leicht zu verstehen: <br><br><pre> <code class="bash hljs">chown  </code> </pre> <br>  Mit dem folgenden Befehl wird beispielsweise der Eigent√ºmer des Verzeichnisses / home / account in Benutzer linda ge√§ndert: <br><br><pre> <code class="bash hljs">chown linda /home/account</code> </pre> <br>  Der <b>Befehl chown</b> verf√ºgt √ºber mehrere Optionen, von denen eine besonders n√ºtzlich ist: <b>-R</b> .  Sie k√∂nnen sich vorstellen, was es tut, da diese Option auch f√ºr viele andere Teams verf√ºgbar ist.  Auf diese Weise k√∂nnen Sie den Eigent√ºmer rekursiv festlegen, wodurch Sie den Eigent√ºmer des aktuellen Verzeichnisses und alles darunter festlegen k√∂nnen.  Der folgende Befehl √§ndert den Eigent√ºmer f√ºr das Verzeichnis / home und alles darunter in lisa: <br><br>  Jetzt sehen die Besitzer so aus: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 account account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br>  Ausf√ºhren: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># chown -R lisa /home/account [root@localhost ~]#</span></span></code> </pre><br>  Jetzt ist Lisa die Besitzerin des Kontoverzeichnisses geworden: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 lisa account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br><h3>  Gruppeninhaberwechsel </h3><br>  Es gibt zwei M√∂glichkeiten, den Gruppenbesitz zu √§ndern.  Sie k√∂nnen dies mit <b>chown</b> tun, aber es gibt einen speziellen Befehl namens <b>chgrp</b> , der die Arbeit erledigt.  Wenn Sie den <b>Befehl chown</b> verwenden m√∂chten, verwenden Sie <b>.</b>  oder <b>:</b> vor dem Namen der Gruppe. <br><br>  Der folgende Befehl √§ndert jeden Eigent√ºmer der Gruppe / home / account in die Account-Gruppe: <br><br><pre> <code class="bash hljs">chown .account /home/account</code> </pre><br>  Sie k√∂nnen <b>chown verwenden</b> , um den Eigent√ºmer eines Benutzers und / oder einer Gruppe auf verschiedene Arten zu √§ndern.  Hier einige Beispiele: <br><br><ul><li>  <b>chown lisa myfile1</b> setzt lisa auf myfile1. </li><li>  <b>chown lisa.sales myfile</b> setzt den lisa-Benutzer auf den Eigent√ºmer der myfile-Datei und die Verkaufsgruppe auf den Eigent√ºmer derselben Datei. </li><li>  <b>chown lisa: sales myfile ist</b> das gleiche wie der vorherige Befehl. </li><li>  <b>chown .sales myfile</b> legt die Verkaufsgruppe als Eigent√ºmer von myfile fest, ohne den Eigent√ºmer des Benutzers zu √§ndern. </li><li>  <b>chown: sales myfile ist</b> das gleiche wie der vorherige Befehl. </li></ul><br>  Mit dem Befehl <b>chgrp</b> k√∂nnen Sie den Gruppeneigent√ºmer √§ndern.  Betrachten Sie das folgende Beispiel, in dem Sie mit <b>chgrp</b> die Verkaufsgruppe als Eigent√ºmer des Kontoverzeichnisses festlegen k√∂nnen: <br><br><pre> <code class="bash hljs">chgrp .sales /home/account</code> </pre> <br>  Wie bei <b>chown</b> k√∂nnen Sie die Option <b>-R</b> mit <b>chgrp verwenden</b> und den Gruppenbesitzer auch rekursiv √§ndern. <br><br><h3>  Grundlegendes zum Standardeigent√ºmer </h3><br>  M√∂glicherweise stellen Sie fest, dass beim Erstellen der Datei der Standardbesitz angewendet wird. <br>  Der Benutzer, der die Datei erstellt, wird automatisch Eigent√ºmer dieser Datei, und die Hauptgruppe dieses Benutzers wird automatisch Eigent√ºmer dieser Datei.  Dies ist normalerweise eine Gruppe, die in der Datei / etc / passwd als Hauptgruppe des Benutzers angegeben ist.  Wenn der Benutzer jedoch Mitglied mehrerer Gruppen ist, kann er die effektive Kerngruppe √§ndern. <br><br>  Um die aktuell effektive Prim√§rgruppe anzuzeigen, kann der Benutzer den Befehl <b>groups verwenden</b> : <br><br><pre> <code class="bash hljs">[root@server1 ~]<span class="hljs-comment"><span class="hljs-comment"># groups lisa lisa : lisa account sales</span></span></code> </pre><br>  Wenn der aktuelle Benutzer Linda die effektive Prim√§rgruppe √§ndern m√∂chte, verwendet er den Befehl <b>newgrp,</b> gefolgt vom Namen der Gruppe, die er als neue effektive Prim√§rgruppe festlegen m√∂chte.  Nach Verwendung des <b>Befehls newgrp</b> ist die prim√§re Gruppe aktiv, bis der Benutzer den <b>Befehl exit</b> ausgibt oder sich abmeldet. <br><br>  Das Folgende zeigt, wie Lisa diesen Befehl verwendet, damit die Verkaufsgruppe zur prim√§ren Gruppe wird: <br><br><pre> <code class="bash hljs">lisa@server1 ~]$ groups lisa account sales [lisa@server1 ~]$ newgrp sales [lisa@server1 ~]$ groups sales lisa account [lisa@server1 ~]$ touch file1 [lisa@server1 ~]$ ls -l total 0 -rw-r--r--. 1 lisa sales 0 Feb 6 10:06 file1</code> </pre><br>  Nach dem √Ñndern der aktuellen Hauptgruppe erhalten alle vom Benutzer erstellten neuen Dateien diese Gruppe als Eigent√ºmergruppe. Um zur urspr√ºnglichen Einstellung der prim√§ren Gruppe zur√ºckzukehren, verwenden Sie <b>exit</b> . <br><br>  Um den Befehl <b>newgrp verwenden</b> zu k√∂nnen, muss der Benutzer Mitglied der Gruppe sein, die er als prim√§r verwenden m√∂chte.  Dar√ºber hinaus kann das Gruppenkennwort mit dem Befehl <b>gpasswd</b> f√ºr die Gruppe verwendet werden.  Wenn der Benutzer den Befehl <b>newgrp verwendet,</b> aber kein Mitglied der Zielgruppe ist, fordert die Shell das Gruppenkennwort an.  Nachdem Sie das richtige Gruppenkennwort eingegeben haben, wird eine neue effektive Prim√§rgruppe festgelegt. <br><br><h2>  Grundrechtsmanagement </h2><br>  Das Linux-Berechtigungssystem wurde in den 1970er Jahren erfunden.  Da die Computeranforderungen in diesen Jahren begrenzt waren, war das grundlegende Berechtigungssystem eher begrenzt.  Dieses Berechtigungssystem verwendet drei Berechtigungen, die auf Dateien und Verzeichnisse angewendet werden k√∂nnen.  In diesem Abschnitt erfahren Sie, wie Sie diese Berechtigungen verwenden und √§ndern. <br><br><h3>  Grundlegendes zu Lese-, Schreib- und Ausf√ºhrungsrechten </h3><br>  Mit drei Grundberechtigungen k√∂nnen Sie Dateien lesen, schreiben und ausf√ºhren.  Die Auswirkungen dieser Berechtigungen unterscheiden sich, wenn sie auf Dateien oder Verzeichnisse angewendet werden.  Mit einer Leseberechtigung f√ºr eine Datei haben Sie das Recht, die Datei zum Lesen zu √∂ffnen.  Daher k√∂nnen Sie den Inhalt lesen, aber das bedeutet, dass Ihr Computer die Datei √∂ffnen kann, um etwas damit zu tun. <br><br>  Eine Programmdatei, die Zugriff auf eine Bibliothek ben√∂tigt, sollte beispielsweise Lesezugriff auf diese Bibliothek haben.  Daraus folgt, dass die Leseberechtigung die grundlegendste Berechtigung ist, die Sie zum Arbeiten mit Dateien ben√∂tigen. <br><br>  Beim Lesen eines Verzeichnisses k√∂nnen Sie den Inhalt dieses Verzeichnisses anzeigen.  Sie sollten wissen, dass Sie mit dieser Berechtigung keine Dateien in einem Verzeichnis lesen k√∂nnen.  Linux-Berechtigungen kennen die Vererbung nicht. Die einzige M√∂glichkeit, eine Datei zu lesen, besteht darin, Leseberechtigungen f√ºr diese Datei zu verwenden. <br><br>  Wie Sie wahrscheinlich erraten k√∂nnen, k√∂nnen Sie mit der Schreibberechtigung, wenn sie auf die Datei angewendet wird, in die Datei schreiben.  Mit anderen Worten, Sie k√∂nnen den Inhalt vorhandener Dateien √§ndern.  Es ist jedoch nicht m√∂glich, neue Dateien zu erstellen oder zu l√∂schen oder Dateiberechtigungen zu √§ndern.  Dazu m√ºssen Sie dem Verzeichnis, in dem Sie die Datei erstellen m√∂chten, eine Schreibberechtigung erteilen.  In Verzeichnissen k√∂nnen Sie mit dieser Berechtigung auch neue Unterverzeichnisse erstellen und l√∂schen. <br><br>  Die Ausf√ºhrungsberechtigung ist das, was Sie ben√∂tigen, um die Datei auszuf√ºhren.  Es wird niemals standardm√§√üig installiert, wodurch Linux fast vollst√§ndig gegen Viren immun ist.  Nur jemand mit Schreibberechtigungen f√ºr das Verzeichnis kann die Ausf√ºhrungsberechtigung anwenden. <br><br>  <b>Im Folgenden wird die Verwendung grundlegender Berechtigungen zusammengefasst:</b> <br><br><img src="https://habrastorage.org/webt/rr/-a/ty/rr-atyy5ru2por4kcyrmd-x87n8.jpeg"><br><br><h2>  Mit chmod </h2><br>  Verwenden Sie den <b>Befehl chmod,</b> um Rechte zu verwalten.  Bei Verwendung von <b>chmod k√∂nnen</b> Sie Berechtigungen f√ºr den Benutzer (Benutzer), die Gruppe (Gruppe) und andere (andere) festlegen.  Sie k√∂nnen diesen Befehl in zwei Modi verwenden: im relativen Modus und im absoluten Modus.  Im absoluten Modus werden drei Ziffern verwendet, um die Grundberechtigungen festzulegen. <br><br><img src="https://habrastorage.org/webt/3r/6l/va/3r6lvaw_mpvo7sxfsggtxik3ofs.jpeg"><br><br>  Berechnen Sie beim Festlegen von Berechtigungen den gew√ºnschten Wert.  Wenn Sie f√ºr den Benutzer Lesen, Schreiben und Ausf√ºhren festlegen, f√ºr die Gruppe lesen und ausf√ºhren und f√ºr andere in der Datei / somefile lesen und ausf√ºhren m√∂chten, verwenden Sie den folgenden <b>Befehl chmod</b> : <br><br><pre> <code class="bash hljs">chmod 755 /somefile</code> </pre> <br>  Wenn Sie <b>chmod</b> auf diese Weise verwenden, werden alle aktuellen Berechtigungen durch die von Ihnen festgelegten Berechtigungen ersetzt. <br><br>  Wenn Sie Berechtigungen relativ zu aktuellen Berechtigungen √§ndern m√∂chten, k√∂nnen Sie <b>chmod</b> im relativen Modus verwenden.  Wenn Sie <b>chmod</b> im relativen Modus verwenden, arbeiten Sie mit drei Indikatoren, um anzugeben, was Sie tun m√∂chten: <br><br><ol><li>  Zuerst geben Sie an, f√ºr wen Sie die Berechtigungen √§ndern m√∂chten.  Dazu k√∂nnen Sie zwischen Benutzer ( <b>u</b> ), Gruppe ( <b>g</b> ) und anderen ( <b>o</b> ) w√§hlen. </li><li>  Anschlie√üend verwenden Sie den Operator, um Berechtigungen zum aktuellen Modus hinzuzuf√ºgen oder daraus zu entfernen oder sie vollst√§ndig festzulegen. </li><li>  Am Ende verwenden Sie <b>r</b> , <b>w</b> und <b>x,</b> um anzugeben, welche Berechtigungen Sie festlegen m√∂chten. </li></ol><br>  Wenn Sie die Berechtigungen im relativen Modus √§ndern, k√∂nnen Sie den Teil "an" √ºberspringen, um Berechtigungen f√ºr alle Objekte hinzuzuf√ºgen oder zu entfernen.  Mit diesem Befehl wird beispielsweise die Ausf√ºhrungsberechtigung f√ºr alle Benutzer hinzugef√ºgt: <br><br><pre> <code class="bash hljs">chmod +x somefile</code> </pre> <br>  Wenn Sie im relativen Modus arbeiten, k√∂nnen Sie auch komplexere Befehle verwenden.  Mit diesem Befehl wird beispielsweise einer Gruppe eine Schreibberechtigung hinzugef√ºgt und Lesevorg√§nge f√ºr andere entfernt: <br><br><pre> <code class="bash hljs">chmod g+w,or somefile</code> </pre> <br>  Bei Verwendung von <b>chmod -R o + rx / data</b> legen Sie die Ausf√ºhrungsberechtigung f√ºr alle Verzeichnisse sowie f√ºr Dateien im Verzeichnis / data fest.  Verwenden Sie <b>chmod -R o + rX / data</b> , um die Berechtigung zum Ausf√ºhren nur f√ºr Verzeichnisse und nicht f√ºr Dateien <b>festzulegen</b> . <br><br>  Gro√übuchstaben X stellt sicher, dass die Dateien keine Ausf√ºhrungsberechtigung erhalten, wenn die Datei f√ºr einige Objekte noch keine Ausf√ºhrungsberechtigung festgelegt hat.  Dies macht X zu einer intelligenteren Methode, um mit Ausf√ºhrungsberechtigungen zu arbeiten.  Dadurch wird vermieden, dass diese Berechtigung f√ºr Dateien installiert wird, f√ºr die sie nicht erforderlich ist. <br><br><h2>  Erweiterte Rechte </h2><br>  Zus√§tzlich zu den grundlegenden Berechtigungen, √ºber die Sie gerade gelesen haben, verf√ºgt Linux auch √ºber eine Reihe erweiterter Berechtigungen.  Dies sind nicht die von Ihnen festgelegten Standardberechtigungen, aber manchmal bieten sie eine n√ºtzliche Erg√§nzung.  In diesem Abschnitt erfahren Sie, was sie sind und wie Sie sie konfigurieren. <br><br><h3>  Grundlegendes zu erweiterten SUID-, GUID- und Sticky-Bit-Berechtigungen </h3><br>  Es gibt drei erweiterte Berechtigungen.  Die erste davon ist die Berechtigung zum Festlegen einer Benutzer-ID (SUID).  In einigen besonderen F√§llen k√∂nnen Sie diese Berechtigung auf ausf√ºhrbare Dateien anwenden.  Standardm√§√üig f√ºhrt der Benutzer, der die ausf√ºhrbare Datei ausf√ºhrt, die Datei mit eigenen Berechtigungen aus. <br><br>  F√ºr normale Benutzer bedeutet dies normalerweise, dass die Verwendung des Programms begrenzt ist.  In einigen F√§llen ben√∂tigt der Benutzer jedoch spezielle Berechtigungen, um nur eine bestimmte Aufgabe auszuf√ºhren. <br><br>  Stellen Sie sich zum Beispiel eine Situation vor, in der der Benutzer das Kennwort √§ndern muss.  Dazu muss der Benutzer sein neues Passwort in die Datei / etc / shadow schreiben.  Diese Datei kann jedoch nicht von Nicht-Root-Benutzern geschrieben werden: <br><br><pre> <code class="bash hljs">root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /etc/shadow ----------. 1 root root 1184 Apr 30 16:54 /etc/shadow</span></span></code> </pre><br>  Aufl√∂sung SUID bietet eine L√∂sung f√ºr dieses Problem.  Im Dienstprogramm / usr / bin / passwd wird diese Berechtigung standardm√§√üig verwendet.  Dies bedeutet, dass der Benutzer beim √Ñndern des Kennworts vor√ºbergehend Root-Berechtigungen erh√§lt, mit denen er in die Datei / etc / shadow schreiben kann.  Sie k√∂nnen die SUID-Aufl√∂sung mit <b>ls -l</b> als <b>s</b> an der Position anzeigen, an der Sie normalerweise <b>x</b> f√ºr Benutzerberechtigungen erwarten: <br><br><pre> <code class="bash hljs">[root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /usr/bin/passwd -rwsr-xr-x. 1 root root 32680 Jan 28 2010 /usr/bin/passwd</span></span></code> </pre><br>  SUID-Berechtigungen m√∂gen n√ºtzlich aussehen (und in einigen F√§llen auch), sind aber gleichzeitig potenziell gef√§hrlich.  Bei falscher Verwendung k√∂nnen Sie versehentlich Root-Zugriffsberechtigungen erteilen.  Daher empfehle ich, es nur mit √§u√üerster Vorsicht zu verwenden. <br><br>  Die meisten Administratoren m√ºssen es niemals verwenden.  Sie werden es nur in einigen Dateien sehen, in denen das Betriebssystem es standardm√§√üig festlegen sollte. <br><br>  Die zweite Sonderberechtigung ist die Gruppenkennung (SGID).  Diese Aufl√∂sung hat zwei Auswirkungen.  Bei Anwendung auf eine ausf√ºhrbare Datei erh√§lt der Benutzer, der die Datei ausf√ºhrt, die Berechtigungen des Gruppeneigent√ºmers dieser Datei.  Somit kann die SGID mehr oder weniger dasselbe tun wie die SUID.  SGID wird jedoch praktisch nicht f√ºr diesen Zweck verwendet. <br><br>  Wie bei der SUID-Berechtigung wird SGID als Standardeinstellung auf einige Systemdateien angewendet. <br><br>  Bei Anwendung auf ein Verzeichnis kann SGID hilfreich sein, da Sie damit den Standardgruppeneigent√ºmer f√ºr die in diesem Verzeichnis erstellten Dateien und Unterverzeichnisse festlegen k√∂nnen.  Wenn ein Benutzer eine Datei erstellt, wird standardm√§√üig seine effektive Prim√§rgruppe als Gruppeneigent√ºmer f√ºr diese Datei festgelegt. <br><br>  Dies ist nicht immer sehr n√ºtzlich, insbesondere weil Red Hat / CentOS-Benutzer eine Gruppe mit demselben Namen wie der Benutzer haben und deren einziges Mitglied der Benutzer ist.  Daher werden die vom Benutzer erstellten Dateien standardm√§√üig freigegeben. <br><br>  Stellen Sie sich eine Situation vor, in der Benutzer von Linda und Lori in der Buchhaltung arbeiten und Mitglieder der <i>Kontogruppe</i> sind.  Standardm√§√üig sind diese Benutzer Mitglieder der privaten Gruppe, deren einziges Mitglied sie sind.  Beide Benutzer sind jedoch Mitglieder der Kontogruppe, aber auch als Parameter der sekund√§ren Gruppe. <br><br>  Die Standardsituation ist, dass beim Erstellen einer Datei durch einen dieser Benutzer die Hauptgruppe zum Eigent√ºmer wird.  Daher kann Linda standardm√§√üig nicht auf die von Lori erstellten Dateien zugreifen und umgekehrt.  Wenn Sie jedoch das freigegebene Verzeichnis einer Gruppe (z. B. / groups / account) erstellen und sicherstellen, dass die SGID-Berechtigung auf dieses Verzeichnis angewendet wird und die Gruppenabrechnung als Gruppeneigent√ºmer f√ºr dieses Verzeichnis festgelegt ist, werden alle Dateien in diesem Verzeichnis und in allen Unterverzeichnissen erstellt Erhalten Sie auch Kontogruppen als Standardgruppeneigent√ºmer. <br><br>  Aus diesem Grund ist die SGID-Berechtigung eine sehr n√ºtzliche Berechtigung zum Installieren in freigegebenen Gruppenverzeichnissen. <br><br>  Die SGID-Berechtigung wird in der Ausgabe <b>ls -ld</b> als <b>s</b> an der Position <b>angezeigt,</b> an der Sie normalerweise die Berechtigung zum Ausf√ºhren der Gruppe finden: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account drwxr-sr-x. 2 root account 4096 Apr 30 21:28 account</span></span></code> </pre><br>  Die dritte der Sonderberechtigungen ist klebrig.  Diese Berechtigung ist n√ºtzlich, um Dateien vor versehentlichem L√∂schen in einer Umgebung zu sch√ºtzen, in der mehrere Benutzer Schreibberechtigungen f√ºr dasselbe Verzeichnis haben.  Wenn ein Sticky-Bit verwendet wird, kann ein Benutzer eine Datei nur l√∂schen, wenn er Eigent√ºmer der Datei oder des Verzeichnisses ist, in dem sich die Datei befindet.  Aus diesem Grund wird es als Standardberechtigung f√ºr das Verzeichnis / tmp verwendet und kann auch f√ºr freigegebene Gruppenverzeichnisse n√ºtzlich sein. <br><br>  Wenn ein Benutzer ohne Sticky Bit Dateien in einem Verzeichnis erstellen kann, kann er auch Dateien aus diesem Verzeichnis l√∂schen.  In einer √∂ffentlichen Gruppenumgebung kann dies √§rgerlich sein.  Stellen Sie sich die Benutzer Linda und Lori vor, die beide Schreibberechtigungen f√ºr das Verzeichnis / data / account haben und diese Berechtigungen durch Mitgliedschaft in der Kontogruppe erhalten.  Daher kann Linda von Lori erstellte Dateien l√∂schen und umgekehrt. <br><br>  Wenn Sie ein Sticky-Bit verwenden, kann der Benutzer Dateien nur l√∂schen, wenn eine der folgenden Bedingungen erf√ºllt ist: <br><br><ul><li>  Der Benutzer ist der Eigent√ºmer der Datei. </li><li>  Der Benutzer ist der Eigent√ºmer des Verzeichnisses, in dem sich die Datei befindet. </li></ul><br>  Wenn Sie <b>ls -ld verwenden</b> , sehen Sie ein klebriges Bit als <b>t</b> an der Position, an der Sie normalerweise die Ausf√ºhrungsberechtigung f√ºr andere sehen: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account/ drwxr-sr-t. 2 root account 4096 Apr 30 21:28 account/</span></span></code> </pre><br><h3>  Erweiterte Rechte </h3><br>  Um SUID, SGID und Sticky Bit anzuwenden, k√∂nnen Sie auch <b>chmod verwenden</b> .  SUID hat einen numerischen Wert von 4, SGID hat einen numerischen Wert von 2 und Sticky Bit hat einen numerischen Wert von 1. <br><br>  Wenn Sie diese Berechtigungen anwenden m√∂chten, m√ºssen Sie <b>chmod</b> ein vierstelliges Argument hinzuf√ºgen, dessen erste Ziffer sich auf spezielle Berechtigungen bezieht.  In der folgenden Zeile wird beispielsweise die SGID-Berechtigung zum Verzeichnis hinzugef√ºgt und rwx f√ºr den Benutzer und rx f√ºr die Gruppe und andere festgelegt: <br><br><pre> <code class="bash hljs">chmod 2755 /somedir</code> </pre> <br>  Dies ist ziemlich unpraktisch, wenn Sie sich die aktuellen Berechtigungen ansehen m√ºssen, die festgelegt wurden, bevor Sie mit <b>chmod</b> im absoluten Modus arbeiten.  (Sie laufen Gefahr, Berechtigungen zu √ºberschreiben, wenn Sie dies nicht tun.) Daher empfehle ich, im relativen Modus zu arbeiten, wenn Sie eine der speziellen Berechtigungen anwenden m√ºssen: <br><br><ol><li>  Verwenden Sie f√ºr SUID <b>chmod u + s</b> . </li><li>  Verwenden Sie f√ºr SGID <b>chmod g + s</b> . </li><li>  Verwenden Sie f√ºr Sticky Bit <b>chmod + t</b> und dann den Namen der Datei oder des Verzeichnisses, f√ºr die Sie Berechtigungen festlegen m√∂chten. </li></ol><br>  In der Tabelle sind alle wichtigen Informationen zum Verwalten von Sonderberechtigungen zusammengefasst. <br><br><img src="https://habrastorage.org/webt/ls/bk/1d/lsbk1dyrexjjgwx6g1__fws8ols.jpeg"><br><br><h3>  Beispiel f√ºr die Arbeit mit Sonderrechten </h3><br>  In diesem Beispiel verwenden Sie spezielle Berechtigungen, um Teammitgliedern das Freigeben von Dateien in einem freigegebenen Gruppenverzeichnis zu erleichtern.  Sie weisen das ID-Bit der gesetzten Gruppenkennung sowie das Sticky-Bit zu und sehen, dass nach der Installation Funktionen hinzugef√ºgt werden, die die gemeinsame Arbeit der Gruppenmitglieder erleichtern. <br><br><ol><li>  √ñffnen Sie das Terminal, in dem Sie ein Linda-Benutzer sind.  Sie k√∂nnen einen Benutzer mit <b>useradd linda</b> erstellen und das Kennwort <b>passwd linda</b> hinzuf√ºgen. </li><li>  Erstellen Sie mit dem Befehl <b>mkdir -p / data / sales</b> ein Verzeichnis / data und ein Unterverzeichnis / data / sales im Stammverzeichnis.  F√ºhren Sie <b>cd / data / sales aus</b> , um zum Verkaufsverzeichnis zu gelangen.  F√ºhren Sie <b>touch linda1</b> und <b>touch linda2 aus</b> , um zwei leere Dateien zu erstellen, die linda geh√∂ren. </li><li>  F√ºhren Sie <b>su - lisa aus</b> , um den aktuellen Benutzer zu <b>lisa</b> zu wechseln, die auch Mitglied der Verkaufsgruppe ist. </li><li>  F√ºhren Sie <b>cd / data / sales aus</b> und f√ºhren Sie in diesem Verzeichnis <b>ls -l aus</b> .  Sie sehen zwei Dateien, die von Linda erstellt wurden und zur Linda-Gruppe geh√∂ren.  F√ºhren Sie <b>rm -f linda * aus</b> .  Dadurch werden beide Dateien gel√∂scht. </li><li>  F√ºhren Sie <b>touch lisa1</b> und <b>touch lisa2 aus</b> , um zwei Dateien zu erstellen, die dem Benutzer lisa geh√∂ren. </li><li>  F√ºhren Sie <b>su aus</b> , um Ihre Berechtigungen auf Root-Ebene zu erh√∂hen. </li><li>  F√ºhren Sie <b>chmod g + s, o + t / data / sales aus</b> , um das Gruppenidentifikationsbit (GUID) sowie das Sticky-Bit im freigegebenen Gruppenverzeichnis festzulegen. </li><li>  F√ºhren Sie <b>su - linda</b> .  <b>Ber√ºhren Sie dann Linda3</b> und <b>Linda4</b> .  Jetzt sollten Sie sehen, dass die beiden von Ihnen erstellten Dateien zur Verkaufsgruppe geh√∂ren, die der Eigent√ºmer der Verzeichnisgruppe / data / sales ist. </li><li>  F√ºhren Sie <b>rm -rf lisa * aus</b> .  Sticky Bit verhindert, dass diese Dateien im Auftrag von Linda gel√∂scht werden, da Sie diese Dateien nicht besitzen.  Bitte beachten Sie, dass Linda, wenn sie Eigent√ºmerin des Verzeichnisses / data / sales ist, diese Dateien trotzdem l√∂schen kann! </li></ol><br><h2>  Verwalten von ACLs (setfacl, getfacl) unter Linux </h2><br>    ,   ,     ,  Linux   ,                . <br><br>      .  ,         ,         . <br><br><h3>  ACL </h3><br>   ACL      ,     :     . ,     ACL     ,             ACL. <br><br>  tar   ACL.  ,   ACL       ,  <b>star</b>  tar. <b>star</b>     ,   tar;      ACL. <br><br>       ACL   <b>getfacl</b> ,       setfacl.    ,  <b>getfacl -R /directory &gt; file.acls</b> .       ,  <b>setfacl --restore=file.acl</b> . <br><br>        .  ACL       ,     . <br>     ,    ,      . ,    ACL,    ,  ,          . <br><br><h3>     ACL </h3><br>     ACL        ACL.      ,        ACL   .     ACL       ¬´operation not supported¬ª, ,       ACL. <br><br>   ,     <b>acl mount</b>   /etc/fstab,        ACL  . <br><br><h3>     ACL   setfacl  getfacl </h3><br>   ACL,    <b>setfacl</b> .     ACL,   <b>getfacl</b> .  <b>ls -l</b>     ACL;    +   ,  ,   ACL    . <br><br>    ACL      ACL   <b>getfacl</b> .         ,     <b>ls -ld</b> ,      <b>getfacl</b> .     ,  ,      . <br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># ls -ld /dir drwxr-xr-x. 2 root root 6 Feb 6 11:28 /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx other::rx</span></span></code> </pre><br>     <b>getfacl</b>  ,       : ,   .    ACL,          sales.    <b>setfacl -mg:sales:rx /dir</b> .    <b>-m</b> ,    ACL  .   <b>g:sales:rx</b>    ACL     ( <b>rx</b> )   ( <b>g</b> ) sales.    ,   ,     getfacl     ACL. <br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># setfacl -mg:sales:rx /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx group:sales:rx mask::rx other::rx</span></span></code> </pre><br> ,   ,    ACL,   ACL     . ,  <b>setfacl -mu:linda:rwx /data</b>    linda   /data,          . <br><br>  <b>setfacl</b>     .    ,  <b>-R</b> .  ,    ACL     ,       ,    ACL.         ACL   . <br><br><h3>   ACL   </h3><br>      ACL  ,           .     ,     ,   ACL  . <br><br>  ACL  ,   ,       ,   .   ,  ACL          .   ,     ACL! <br><br> <b>  .</b>     ACL             ,    ACL .   <b>setfacl -R -m</b> ,   ACL   .   <b>setfacl -md:</b> ,      ,    . <br><br>   ACL  ,      <b>d</b>   <b>-m</b> (  !).   <b>setfacl -md:g:sales:rx /data</b> ,   ,   sales       ,  -     /data. <br><br>    ACL        ACL  .      ,         ,  <b>chmod</b> . ,        <b>chmod</b> ,   ,          ,  -  .   ,        -,   /data, ,  <b>setfacl -md:o::- /data</b> . <br><br> ACL       .   ,    ACL    ,        ,      . ,     ,       ACL.   ,    ,    ACL   (       ). <br><br><h3>       ACL </h3><br>         /data/account  /data/sales,    .     ,   sales    /data/sales,   account    /data/account. <br><br>  ,   account       /data/sales,   sales       /data/account. <br><br>     ACL  ,  ,            . <br><br><ol><li>  . </li><li>  <b>setfacl -mg:account:rx /data/sales</b>  <b>setfacl -mg:sales:rx /data/account</b> . </li><li>  <b>getfacl</b> ,  ,      ,   . </li><li>  <b>setfacl -md:g:account:rwx,g:sales:rx /data/sales</b> ,   ACL     sales. </li><li>  ACL     /data/account,  <b>setfacl -md:g:sales:rwx,g:account:rx /data/account</b> . </li><li> ,   ACL ,     /data/sales.  <b>touch /data/sales/newfile</b>   <b>getfacl /data/sales/newfile</b>    . </li></ol><br><h2>       umask </h2><br>   ,    ACL  .     ACL,   ,     ,   : <b>umask</b> ( ).     ,        <b>umask</b> . <br><br> , , ,          .     <b>umask</b> .           .   <b>umask</b>   ,     ,       ;     ‚Äî 666,    ‚Äî 777. <br><br>       .       <b>umask</b>   . <br><br>  ,   <b>umask</b> ,         <b>chmod</b> ,      ,      ,       ,   .  <b>umask</b>   022  644      755    ,    . <br><br>      <b>umask</b>      . <br><br><img src="https://habrastorage.org/webt/yi/l8/x0/yil8x0tn7hy6ecxndifimssztnk.jpeg"><br><br>   ,    umask,   :       ,   666,   umask,    .            777. <br><br>      umask:       .     umask   ,   ,   umask      ,    /etc/profile.   ‚Äî      umask.sh   /etc/profile.d   umask,        .      umask,         . <br><br>   umask  /etc/profile   ,      ,   ,    umask     .profile,       . <br><br> ,    ,     ; ,   ,     .     ,    umask     root  027,       umask   022. <br><br><h2>      </h2><br>       Linux. <br><br>              ,           .       Linux ‚Äî   . <br>       ,    . <br><br>      ACL,        <b>mount</b> . <br><br>   <b>user_xattr</b> .     ¬´operation not supported¬ª      ,    <b>mount</b>   /etc/fstab. <br><br>   .   ,    .   ;     . <br><br> <b>    ,    :</b> <br><br> <b>A</b>   ,        . <br>   ,   ,          .     ;   ,     ,  <b>A</b>      . <br><br> <b>a</b>    ,    . <br><br> <b>c</b>     ,       ,    ,         . <br><br> <b>D</b>   ,        ,       .        ,  ,          . <br><br> <b>d</b>   ,        ,    . <br><br> <b>I</b>      ,    .           ,   Ext3,      B-tree     . <br><br> <b>i</b>     . ,     ,    ,     . <br><br> <b>j</b>   ,     ext3     ,   ‚Äî      . <br><br> <b>s</b>  ,     ,  0    .  ,      ,    . <br><br> <b>u</b>      .    ,         . <br><br>     ,     <b>chattr</b> . ,  <b>chattr +s somefile</b> ,     somefile.   ?   <b>chattr -s somefile</b> ,    .     ,     ,   <b>lsattr</b> . <br><br><h2>  Zusammenfassung </h2><br>     ,    .      ,     ,   ACL-   .   ,    umask     .      ,            . <br><br>     ,       .      . <br><br><blockquote>        .          . <br><br>  ¬´ -          .¬ª   ¬´ -          .¬ª,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">berez</a> . <br></blockquote><br><blockquote> : <br>      ,  ,     ,     . <br><br> : <br>      ,  ,     ,       .      ,       ,    ,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">CryptoPirate</a> <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469667/">https://habr.com/ru/post/de469667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469651/index.html">WIBAttack. Ist die neue Sicherheitsl√ºcke auf der SIM-Karte wirklich schrecklich?</a></li>
<li><a href="../de469655/index.html">Warum ben√∂tigen Sie einen Support-Service, der nicht unterst√ºtzt?</a></li>
<li><a href="../de469657/index.html">Analyse: Welche B√∂rsenanlagen bringen russischen Investoren die gr√∂√üte Rendite?</a></li>
<li><a href="../de469659/index.html">RC Cars: Einf√ºhrung</a></li>
<li><a href="../de469663/index.html">Die Geschichte von DashaMail: vom Start eines Klons eines amerikanischen E-Mail-Start-ups √ºber Streitigkeiten mit Investoren bis hin zu einem Neuanfang</a></li>
<li><a href="../de469669/index.html">Edward Snowden spricht dar√ºber, warum er Informant wurde</a></li>
<li><a href="../de469671/index.html">Warum sollten Sie die Ada-Sprache verwenden, um Ihr System zu programmieren?</a></li>
<li><a href="../de469677/index.html">Rauchen, gesunder Lebensstil, Motivation und Geschwindigkeit der Softwareentwicklung</a></li>
<li><a href="../de469681/index.html">TensorFlow 2.0 Final Release ver√∂ffentlicht</a></li>
<li><a href="../de469683/index.html">Nukleare Sicherheit und industrielle Video√ºberwachung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>