<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🍳 🙅🏾 ✴️ Linux-Rechte (chown, chmod, SUID, GUID, Sticky Bit, ACL, umask) 👂🏿 👩🏿‍🏫 👌🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle. Dies ist eine Übersetzung eines Artikels von RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 und EX300. 

 Von mir selbst: Ich hoff...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Linux-Rechte (chown, chmod, SUID, GUID, Sticky Bit, ACL, umask)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469667/">  Hallo an alle.  Dies ist eine Übersetzung eines Artikels von RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200 und EX300. <br><br>  <b>Von mir selbst:</b> Ich hoffe, dass der Artikel nicht nur für Anfänger nützlich ist, sondern auch erfahreneren Administratoren hilft, ihr Wissen zu organisieren. <br><br>  Also lass uns gehen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/95b/e9d/a00/95be9da00b36434d2b2445fe1379b5ae.png" alt="Bild"><br><a name="habracut"></a><br>  Für den Zugriff auf Dateien unter Linux werden Berechtigungen verwendet.  Diese Berechtigungen werden drei Objekten zugewiesen: einer Datei, einer Gruppe und einem anderen Objekt (dh allen anderen).  In diesem Artikel erfahren Sie, wie Sie Berechtigungen anwenden. <br><br>  Der Artikel beginnt mit einer Überprüfung der Grundkonzepte. Anschließend werden spezielle Berechtigungen und Zugriffssteuerungslisten (ACLs) erläutert.  Am Ende dieses Artikels erfahren Sie, wie Sie Standardberechtigungen über umask konfigurieren und erweiterte Benutzerattribute verwalten. <br><br><h2>  Dateibesitzungsverwaltung </h2><br>  Bevor Sie über Berechtigungen sprechen, sollten Sie sich der Rolle des Eigentümers der Datei und des Verzeichnisses bewusst sein.  Der Besitz von Dateien und Verzeichnissen ist für die Arbeit mit Berechtigungen von entscheidender Bedeutung.  In diesem Abschnitt erfahren Sie zunächst, wie Sie den Eigentümer sehen können.  Anschließend erfahren Sie, wie Sie den Gruppenbesitzer und -benutzer für Dateien und Verzeichnisse ändern. <br><br><h3>  Eigentümer einer Datei oder eines Verzeichnisses anzeigen </h3><br>  Unter Linux hat jede Datei und jedes Verzeichnis zwei Eigentümer: einen Benutzer und eine Gruppe. <br><br>  Diese Eigentümer werden festgelegt, wenn die Datei oder das Verzeichnis erstellt wird.  Der Benutzer, der die Datei erstellt, wird Eigentümer dieser Datei, und die primäre Gruppe, zu der derselbe Benutzer gehört, wird auch Eigentümer dieser Datei.  Um festzustellen, ob Sie als Benutzer Zugriffsrechte auf eine Datei oder ein Verzeichnis haben, überprüft die Shell deren Besitz. <br><br>  <b>Dies geschieht in der folgenden Reihenfolge:</b> <br><br><ol><li>  Die Shell prüft, ob Sie die Datei besitzen, auf die Sie zugreifen möchten.  Wenn Sie dieser Eigentümer sind, erhalten Sie Berechtigungen und die Shell hört auf zu prüfen. </li><li>  Wenn Sie die Datei nicht besitzen, prüft die Shell, ob Sie Mitglied einer Gruppe sind, die über Berechtigungen für diese Datei verfügt.  Wenn Sie Mitglied dieser Gruppe sind, erhalten Sie Zugriff auf die Datei mit den für die Gruppe festgelegten Berechtigungen, und die Shell beendet die Überprüfung. </li><li>  Wenn Sie weder Benutzer noch Eigentümer der Gruppe sind, erhalten Sie die Rechte anderer Benutzer (Andere). </li></ol><br>  Um die aktuellen Eigentümerzuweisungen anzuzeigen, können Sie den <b>Befehl ls -l verwenden</b> .  Dieser Befehl zeigt die Benutzer- und Eigentümergruppe an.  Unten sehen Sie die Eigentümereinstellungen für Verzeichnisse im Verzeichnis / home. <br><br><pre><code class="bash hljs">[root@server1 home]<span class="hljs-comment"><span class="hljs-comment"># ls -l total 8 drwx------. 3 bob bob 74 Feb 6 10:13 bob drwx------. 3 caroline caroline 74 Feb 6 10:13 caroline drwx------. 3 fozia fozia 74 Feb 6 10:13 fozia drwx------. 3 lara lara 74 Feb 6 10:13 lara drwx------. 5 lisa lisa 4096 Feb 6 10:12 lisa drwx------. 14 user user 4096 Feb 5 10:35 user</span></span></code> </pre> <br>  Mit dem <b>Befehl ls können</b> Sie den Eigentümer der Dateien in diesem Verzeichnis anzeigen.  Manchmal kann es nützlich sein, eine Liste aller Dateien im System abzurufen, in denen der Benutzer oder die Gruppe als Eigentümer angegeben ist.  Sie können <b>find dafür verwenden</b> .  Zu diesem Zweck kann das <b>Argument find -user</b> verwendet werden.  Der folgende Befehl zeigt beispielsweise alle Dateien an, für die der Benutzer linda als Eigentümer angegeben wurde: <br><br><pre> <code class="bash hljs">find / -user linda</code> </pre> <br>  Sie können <b>find</b> auch verwenden, <b>um</b> nach Dateien zu suchen, in denen sie einer bestimmten Gruppe gehören. <br><br>  Der folgende Befehl sucht beispielsweise nach allen Dateien, die zur <i>Benutzergruppe gehören</i> : <br><br><pre> <code class="bash hljs">find / -group users</code> </pre> <br><h3>  Eigentümerwechsel </h3><br>  Um Berechtigungen anzuwenden, müssen Sie zunächst das Eigentum berücksichtigen.  <b>Hierfür</b> gibt es einen <b>Chown-Befehl</b> .  Die Syntax dieses Befehls ist leicht zu verstehen: <br><br><pre> <code class="bash hljs">chown  </code> </pre> <br>  Mit dem folgenden Befehl wird beispielsweise der Eigentümer des Verzeichnisses / home / account in Benutzer linda geändert: <br><br><pre> <code class="bash hljs">chown linda /home/account</code> </pre> <br>  Der <b>Befehl chown</b> verfügt über mehrere Optionen, von denen eine besonders nützlich ist: <b>-R</b> .  Sie können sich vorstellen, was es tut, da diese Option auch für viele andere Teams verfügbar ist.  Auf diese Weise können Sie den Eigentümer rekursiv festlegen, wodurch Sie den Eigentümer des aktuellen Verzeichnisses und alles darunter festlegen können.  Der folgende Befehl ändert den Eigentümer für das Verzeichnis / home und alles darunter in lisa: <br><br>  Jetzt sehen die Besitzer so aus: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 account account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br>  Ausführen: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># chown -R lisa /home/account [root@localhost ~]#</span></span></code> </pre><br>  Jetzt ist Lisa die Besitzerin des Kontoverzeichnisses geworden: <br><br><pre> <code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /home total 0 drwx------. 2 lisa account 62 Sep 25 21:41 account drwx------. 2 lisa lisa 62 Sep 25 21:42 lisa</span></span></code> </pre><br><h3>  Gruppeninhaberwechsel </h3><br>  Es gibt zwei Möglichkeiten, den Gruppenbesitz zu ändern.  Sie können dies mit <b>chown</b> tun, aber es gibt einen speziellen Befehl namens <b>chgrp</b> , der die Arbeit erledigt.  Wenn Sie den <b>Befehl chown</b> verwenden möchten, verwenden Sie <b>.</b>  oder <b>:</b> vor dem Namen der Gruppe. <br><br>  Der folgende Befehl ändert jeden Eigentümer der Gruppe / home / account in die Account-Gruppe: <br><br><pre> <code class="bash hljs">chown .account /home/account</code> </pre><br>  Sie können <b>chown verwenden</b> , um den Eigentümer eines Benutzers und / oder einer Gruppe auf verschiedene Arten zu ändern.  Hier einige Beispiele: <br><br><ul><li>  <b>chown lisa myfile1</b> setzt lisa auf myfile1. </li><li>  <b>chown lisa.sales myfile</b> setzt den lisa-Benutzer auf den Eigentümer der myfile-Datei und die Verkaufsgruppe auf den Eigentümer derselben Datei. </li><li>  <b>chown lisa: sales myfile ist</b> das gleiche wie der vorherige Befehl. </li><li>  <b>chown .sales myfile</b> legt die Verkaufsgruppe als Eigentümer von myfile fest, ohne den Eigentümer des Benutzers zu ändern. </li><li>  <b>chown: sales myfile ist</b> das gleiche wie der vorherige Befehl. </li></ul><br>  Mit dem Befehl <b>chgrp</b> können Sie den Gruppeneigentümer ändern.  Betrachten Sie das folgende Beispiel, in dem Sie mit <b>chgrp</b> die Verkaufsgruppe als Eigentümer des Kontoverzeichnisses festlegen können: <br><br><pre> <code class="bash hljs">chgrp .sales /home/account</code> </pre> <br>  Wie bei <b>chown</b> können Sie die Option <b>-R</b> mit <b>chgrp verwenden</b> und den Gruppenbesitzer auch rekursiv ändern. <br><br><h3>  Grundlegendes zum Standardeigentümer </h3><br>  Möglicherweise stellen Sie fest, dass beim Erstellen der Datei der Standardbesitz angewendet wird. <br>  Der Benutzer, der die Datei erstellt, wird automatisch Eigentümer dieser Datei, und die Hauptgruppe dieses Benutzers wird automatisch Eigentümer dieser Datei.  Dies ist normalerweise eine Gruppe, die in der Datei / etc / passwd als Hauptgruppe des Benutzers angegeben ist.  Wenn der Benutzer jedoch Mitglied mehrerer Gruppen ist, kann er die effektive Kerngruppe ändern. <br><br>  Um die aktuell effektive Primärgruppe anzuzeigen, kann der Benutzer den Befehl <b>groups verwenden</b> : <br><br><pre> <code class="bash hljs">[root@server1 ~]<span class="hljs-comment"><span class="hljs-comment"># groups lisa lisa : lisa account sales</span></span></code> </pre><br>  Wenn der aktuelle Benutzer Linda die effektive Primärgruppe ändern möchte, verwendet er den Befehl <b>newgrp,</b> gefolgt vom Namen der Gruppe, die er als neue effektive Primärgruppe festlegen möchte.  Nach Verwendung des <b>Befehls newgrp</b> ist die primäre Gruppe aktiv, bis der Benutzer den <b>Befehl exit</b> ausgibt oder sich abmeldet. <br><br>  Das Folgende zeigt, wie Lisa diesen Befehl verwendet, damit die Verkaufsgruppe zur primären Gruppe wird: <br><br><pre> <code class="bash hljs">lisa@server1 ~]$ groups lisa account sales [lisa@server1 ~]$ newgrp sales [lisa@server1 ~]$ groups sales lisa account [lisa@server1 ~]$ touch file1 [lisa@server1 ~]$ ls -l total 0 -rw-r--r--. 1 lisa sales 0 Feb 6 10:06 file1</code> </pre><br>  Nach dem Ändern der aktuellen Hauptgruppe erhalten alle vom Benutzer erstellten neuen Dateien diese Gruppe als Eigentümergruppe. Um zur ursprünglichen Einstellung der primären Gruppe zurückzukehren, verwenden Sie <b>exit</b> . <br><br>  Um den Befehl <b>newgrp verwenden</b> zu können, muss der Benutzer Mitglied der Gruppe sein, die er als primär verwenden möchte.  Darüber hinaus kann das Gruppenkennwort mit dem Befehl <b>gpasswd</b> für die Gruppe verwendet werden.  Wenn der Benutzer den Befehl <b>newgrp verwendet,</b> aber kein Mitglied der Zielgruppe ist, fordert die Shell das Gruppenkennwort an.  Nachdem Sie das richtige Gruppenkennwort eingegeben haben, wird eine neue effektive Primärgruppe festgelegt. <br><br><h2>  Grundrechtsmanagement </h2><br>  Das Linux-Berechtigungssystem wurde in den 1970er Jahren erfunden.  Da die Computeranforderungen in diesen Jahren begrenzt waren, war das grundlegende Berechtigungssystem eher begrenzt.  Dieses Berechtigungssystem verwendet drei Berechtigungen, die auf Dateien und Verzeichnisse angewendet werden können.  In diesem Abschnitt erfahren Sie, wie Sie diese Berechtigungen verwenden und ändern. <br><br><h3>  Grundlegendes zu Lese-, Schreib- und Ausführungsrechten </h3><br>  Mit drei Grundberechtigungen können Sie Dateien lesen, schreiben und ausführen.  Die Auswirkungen dieser Berechtigungen unterscheiden sich, wenn sie auf Dateien oder Verzeichnisse angewendet werden.  Mit einer Leseberechtigung für eine Datei haben Sie das Recht, die Datei zum Lesen zu öffnen.  Daher können Sie den Inhalt lesen, aber das bedeutet, dass Ihr Computer die Datei öffnen kann, um etwas damit zu tun. <br><br>  Eine Programmdatei, die Zugriff auf eine Bibliothek benötigt, sollte beispielsweise Lesezugriff auf diese Bibliothek haben.  Daraus folgt, dass die Leseberechtigung die grundlegendste Berechtigung ist, die Sie zum Arbeiten mit Dateien benötigen. <br><br>  Beim Lesen eines Verzeichnisses können Sie den Inhalt dieses Verzeichnisses anzeigen.  Sie sollten wissen, dass Sie mit dieser Berechtigung keine Dateien in einem Verzeichnis lesen können.  Linux-Berechtigungen kennen die Vererbung nicht. Die einzige Möglichkeit, eine Datei zu lesen, besteht darin, Leseberechtigungen für diese Datei zu verwenden. <br><br>  Wie Sie wahrscheinlich erraten können, können Sie mit der Schreibberechtigung, wenn sie auf die Datei angewendet wird, in die Datei schreiben.  Mit anderen Worten, Sie können den Inhalt vorhandener Dateien ändern.  Es ist jedoch nicht möglich, neue Dateien zu erstellen oder zu löschen oder Dateiberechtigungen zu ändern.  Dazu müssen Sie dem Verzeichnis, in dem Sie die Datei erstellen möchten, eine Schreibberechtigung erteilen.  In Verzeichnissen können Sie mit dieser Berechtigung auch neue Unterverzeichnisse erstellen und löschen. <br><br>  Die Ausführungsberechtigung ist das, was Sie benötigen, um die Datei auszuführen.  Es wird niemals standardmäßig installiert, wodurch Linux fast vollständig gegen Viren immun ist.  Nur jemand mit Schreibberechtigungen für das Verzeichnis kann die Ausführungsberechtigung anwenden. <br><br>  <b>Im Folgenden wird die Verwendung grundlegender Berechtigungen zusammengefasst:</b> <br><br><img src="https://habrastorage.org/webt/rr/-a/ty/rr-atyy5ru2por4kcyrmd-x87n8.jpeg"><br><br><h2>  Mit chmod </h2><br>  Verwenden Sie den <b>Befehl chmod,</b> um Rechte zu verwalten.  Bei Verwendung von <b>chmod können</b> Sie Berechtigungen für den Benutzer (Benutzer), die Gruppe (Gruppe) und andere (andere) festlegen.  Sie können diesen Befehl in zwei Modi verwenden: im relativen Modus und im absoluten Modus.  Im absoluten Modus werden drei Ziffern verwendet, um die Grundberechtigungen festzulegen. <br><br><img src="https://habrastorage.org/webt/3r/6l/va/3r6lvaw_mpvo7sxfsggtxik3ofs.jpeg"><br><br>  Berechnen Sie beim Festlegen von Berechtigungen den gewünschten Wert.  Wenn Sie für den Benutzer Lesen, Schreiben und Ausführen festlegen, für die Gruppe lesen und ausführen und für andere in der Datei / somefile lesen und ausführen möchten, verwenden Sie den folgenden <b>Befehl chmod</b> : <br><br><pre> <code class="bash hljs">chmod 755 /somefile</code> </pre> <br>  Wenn Sie <b>chmod</b> auf diese Weise verwenden, werden alle aktuellen Berechtigungen durch die von Ihnen festgelegten Berechtigungen ersetzt. <br><br>  Wenn Sie Berechtigungen relativ zu aktuellen Berechtigungen ändern möchten, können Sie <b>chmod</b> im relativen Modus verwenden.  Wenn Sie <b>chmod</b> im relativen Modus verwenden, arbeiten Sie mit drei Indikatoren, um anzugeben, was Sie tun möchten: <br><br><ol><li>  Zuerst geben Sie an, für wen Sie die Berechtigungen ändern möchten.  Dazu können Sie zwischen Benutzer ( <b>u</b> ), Gruppe ( <b>g</b> ) und anderen ( <b>o</b> ) wählen. </li><li>  Anschließend verwenden Sie den Operator, um Berechtigungen zum aktuellen Modus hinzuzufügen oder daraus zu entfernen oder sie vollständig festzulegen. </li><li>  Am Ende verwenden Sie <b>r</b> , <b>w</b> und <b>x,</b> um anzugeben, welche Berechtigungen Sie festlegen möchten. </li></ol><br>  Wenn Sie die Berechtigungen im relativen Modus ändern, können Sie den Teil "an" überspringen, um Berechtigungen für alle Objekte hinzuzufügen oder zu entfernen.  Mit diesem Befehl wird beispielsweise die Ausführungsberechtigung für alle Benutzer hinzugefügt: <br><br><pre> <code class="bash hljs">chmod +x somefile</code> </pre> <br>  Wenn Sie im relativen Modus arbeiten, können Sie auch komplexere Befehle verwenden.  Mit diesem Befehl wird beispielsweise einer Gruppe eine Schreibberechtigung hinzugefügt und Lesevorgänge für andere entfernt: <br><br><pre> <code class="bash hljs">chmod g+w,or somefile</code> </pre> <br>  Bei Verwendung von <b>chmod -R o + rx / data</b> legen Sie die Ausführungsberechtigung für alle Verzeichnisse sowie für Dateien im Verzeichnis / data fest.  Verwenden Sie <b>chmod -R o + rX / data</b> , um die Berechtigung zum Ausführen nur für Verzeichnisse und nicht für Dateien <b>festzulegen</b> . <br><br>  Großbuchstaben X stellt sicher, dass die Dateien keine Ausführungsberechtigung erhalten, wenn die Datei für einige Objekte noch keine Ausführungsberechtigung festgelegt hat.  Dies macht X zu einer intelligenteren Methode, um mit Ausführungsberechtigungen zu arbeiten.  Dadurch wird vermieden, dass diese Berechtigung für Dateien installiert wird, für die sie nicht erforderlich ist. <br><br><h2>  Erweiterte Rechte </h2><br>  Zusätzlich zu den grundlegenden Berechtigungen, über die Sie gerade gelesen haben, verfügt Linux auch über eine Reihe erweiterter Berechtigungen.  Dies sind nicht die von Ihnen festgelegten Standardberechtigungen, aber manchmal bieten sie eine nützliche Ergänzung.  In diesem Abschnitt erfahren Sie, was sie sind und wie Sie sie konfigurieren. <br><br><h3>  Grundlegendes zu erweiterten SUID-, GUID- und Sticky-Bit-Berechtigungen </h3><br>  Es gibt drei erweiterte Berechtigungen.  Die erste davon ist die Berechtigung zum Festlegen einer Benutzer-ID (SUID).  In einigen besonderen Fällen können Sie diese Berechtigung auf ausführbare Dateien anwenden.  Standardmäßig führt der Benutzer, der die ausführbare Datei ausführt, die Datei mit eigenen Berechtigungen aus. <br><br>  Für normale Benutzer bedeutet dies normalerweise, dass die Verwendung des Programms begrenzt ist.  In einigen Fällen benötigt der Benutzer jedoch spezielle Berechtigungen, um nur eine bestimmte Aufgabe auszuführen. <br><br>  Stellen Sie sich zum Beispiel eine Situation vor, in der der Benutzer das Kennwort ändern muss.  Dazu muss der Benutzer sein neues Passwort in die Datei / etc / shadow schreiben.  Diese Datei kann jedoch nicht von Nicht-Root-Benutzern geschrieben werden: <br><br><pre> <code class="bash hljs">root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /etc/shadow ----------. 1 root root 1184 Apr 30 16:54 /etc/shadow</span></span></code> </pre><br>  Auflösung SUID bietet eine Lösung für dieses Problem.  Im Dienstprogramm / usr / bin / passwd wird diese Berechtigung standardmäßig verwendet.  Dies bedeutet, dass der Benutzer beim Ändern des Kennworts vorübergehend Root-Berechtigungen erhält, mit denen er in die Datei / etc / shadow schreiben kann.  Sie können die SUID-Auflösung mit <b>ls -l</b> als <b>s</b> an der Position anzeigen, an der Sie normalerweise <b>x</b> für Benutzerberechtigungen erwarten: <br><br><pre> <code class="bash hljs">[root@hnl ~]<span class="hljs-comment"><span class="hljs-comment"># ls -l /usr/bin/passwd -rwsr-xr-x. 1 root root 32680 Jan 28 2010 /usr/bin/passwd</span></span></code> </pre><br>  SUID-Berechtigungen mögen nützlich aussehen (und in einigen Fällen auch), sind aber gleichzeitig potenziell gefährlich.  Bei falscher Verwendung können Sie versehentlich Root-Zugriffsberechtigungen erteilen.  Daher empfehle ich, es nur mit äußerster Vorsicht zu verwenden. <br><br>  Die meisten Administratoren müssen es niemals verwenden.  Sie werden es nur in einigen Dateien sehen, in denen das Betriebssystem es standardmäßig festlegen sollte. <br><br>  Die zweite Sonderberechtigung ist die Gruppenkennung (SGID).  Diese Auflösung hat zwei Auswirkungen.  Bei Anwendung auf eine ausführbare Datei erhält der Benutzer, der die Datei ausführt, die Berechtigungen des Gruppeneigentümers dieser Datei.  Somit kann die SGID mehr oder weniger dasselbe tun wie die SUID.  SGID wird jedoch praktisch nicht für diesen Zweck verwendet. <br><br>  Wie bei der SUID-Berechtigung wird SGID als Standardeinstellung auf einige Systemdateien angewendet. <br><br>  Bei Anwendung auf ein Verzeichnis kann SGID hilfreich sein, da Sie damit den Standardgruppeneigentümer für die in diesem Verzeichnis erstellten Dateien und Unterverzeichnisse festlegen können.  Wenn ein Benutzer eine Datei erstellt, wird standardmäßig seine effektive Primärgruppe als Gruppeneigentümer für diese Datei festgelegt. <br><br>  Dies ist nicht immer sehr nützlich, insbesondere weil Red Hat / CentOS-Benutzer eine Gruppe mit demselben Namen wie der Benutzer haben und deren einziges Mitglied der Benutzer ist.  Daher werden die vom Benutzer erstellten Dateien standardmäßig freigegeben. <br><br>  Stellen Sie sich eine Situation vor, in der Benutzer von Linda und Lori in der Buchhaltung arbeiten und Mitglieder der <i>Kontogruppe</i> sind.  Standardmäßig sind diese Benutzer Mitglieder der privaten Gruppe, deren einziges Mitglied sie sind.  Beide Benutzer sind jedoch Mitglieder der Kontogruppe, aber auch als Parameter der sekundären Gruppe. <br><br>  Die Standardsituation ist, dass beim Erstellen einer Datei durch einen dieser Benutzer die Hauptgruppe zum Eigentümer wird.  Daher kann Linda standardmäßig nicht auf die von Lori erstellten Dateien zugreifen und umgekehrt.  Wenn Sie jedoch das freigegebene Verzeichnis einer Gruppe (z. B. / groups / account) erstellen und sicherstellen, dass die SGID-Berechtigung auf dieses Verzeichnis angewendet wird und die Gruppenabrechnung als Gruppeneigentümer für dieses Verzeichnis festgelegt ist, werden alle Dateien in diesem Verzeichnis und in allen Unterverzeichnissen erstellt Erhalten Sie auch Kontogruppen als Standardgruppeneigentümer. <br><br>  Aus diesem Grund ist die SGID-Berechtigung eine sehr nützliche Berechtigung zum Installieren in freigegebenen Gruppenverzeichnissen. <br><br>  Die SGID-Berechtigung wird in der Ausgabe <b>ls -ld</b> als <b>s</b> an der Position <b>angezeigt,</b> an der Sie normalerweise die Berechtigung zum Ausführen der Gruppe finden: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account drwxr-sr-x. 2 root account 4096 Apr 30 21:28 account</span></span></code> </pre><br>  Die dritte der Sonderberechtigungen ist klebrig.  Diese Berechtigung ist nützlich, um Dateien vor versehentlichem Löschen in einer Umgebung zu schützen, in der mehrere Benutzer Schreibberechtigungen für dasselbe Verzeichnis haben.  Wenn ein Sticky-Bit verwendet wird, kann ein Benutzer eine Datei nur löschen, wenn er Eigentümer der Datei oder des Verzeichnisses ist, in dem sich die Datei befindet.  Aus diesem Grund wird es als Standardberechtigung für das Verzeichnis / tmp verwendet und kann auch für freigegebene Gruppenverzeichnisse nützlich sein. <br><br>  Wenn ein Benutzer ohne Sticky Bit Dateien in einem Verzeichnis erstellen kann, kann er auch Dateien aus diesem Verzeichnis löschen.  In einer öffentlichen Gruppenumgebung kann dies ärgerlich sein.  Stellen Sie sich die Benutzer Linda und Lori vor, die beide Schreibberechtigungen für das Verzeichnis / data / account haben und diese Berechtigungen durch Mitgliedschaft in der Kontogruppe erhalten.  Daher kann Linda von Lori erstellte Dateien löschen und umgekehrt. <br><br>  Wenn Sie ein Sticky-Bit verwenden, kann der Benutzer Dateien nur löschen, wenn eine der folgenden Bedingungen erfüllt ist: <br><br><ul><li>  Der Benutzer ist der Eigentümer der Datei. </li><li>  Der Benutzer ist der Eigentümer des Verzeichnisses, in dem sich die Datei befindet. </li></ul><br>  Wenn Sie <b>ls -ld verwenden</b> , sehen Sie ein klebriges Bit als <b>t</b> an der Position, an der Sie normalerweise die Ausführungsberechtigung für andere sehen: <br><br><pre> <code class="bash hljs">[root@hnl data]<span class="hljs-comment"><span class="hljs-comment"># ls -ld account/ drwxr-sr-t. 2 root account 4096 Apr 30 21:28 account/</span></span></code> </pre><br><h3>  Erweiterte Rechte </h3><br>  Um SUID, SGID und Sticky Bit anzuwenden, können Sie auch <b>chmod verwenden</b> .  SUID hat einen numerischen Wert von 4, SGID hat einen numerischen Wert von 2 und Sticky Bit hat einen numerischen Wert von 1. <br><br>  Wenn Sie diese Berechtigungen anwenden möchten, müssen Sie <b>chmod</b> ein vierstelliges Argument hinzufügen, dessen erste Ziffer sich auf spezielle Berechtigungen bezieht.  In der folgenden Zeile wird beispielsweise die SGID-Berechtigung zum Verzeichnis hinzugefügt und rwx für den Benutzer und rx für die Gruppe und andere festgelegt: <br><br><pre> <code class="bash hljs">chmod 2755 /somedir</code> </pre> <br>  Dies ist ziemlich unpraktisch, wenn Sie sich die aktuellen Berechtigungen ansehen müssen, die festgelegt wurden, bevor Sie mit <b>chmod</b> im absoluten Modus arbeiten.  (Sie laufen Gefahr, Berechtigungen zu überschreiben, wenn Sie dies nicht tun.) Daher empfehle ich, im relativen Modus zu arbeiten, wenn Sie eine der speziellen Berechtigungen anwenden müssen: <br><br><ol><li>  Verwenden Sie für SUID <b>chmod u + s</b> . </li><li>  Verwenden Sie für SGID <b>chmod g + s</b> . </li><li>  Verwenden Sie für Sticky Bit <b>chmod + t</b> und dann den Namen der Datei oder des Verzeichnisses, für die Sie Berechtigungen festlegen möchten. </li></ol><br>  In der Tabelle sind alle wichtigen Informationen zum Verwalten von Sonderberechtigungen zusammengefasst. <br><br><img src="https://habrastorage.org/webt/ls/bk/1d/lsbk1dyrexjjgwx6g1__fws8ols.jpeg"><br><br><h3>  Beispiel für die Arbeit mit Sonderrechten </h3><br>  In diesem Beispiel verwenden Sie spezielle Berechtigungen, um Teammitgliedern das Freigeben von Dateien in einem freigegebenen Gruppenverzeichnis zu erleichtern.  Sie weisen das ID-Bit der gesetzten Gruppenkennung sowie das Sticky-Bit zu und sehen, dass nach der Installation Funktionen hinzugefügt werden, die die gemeinsame Arbeit der Gruppenmitglieder erleichtern. <br><br><ol><li>  Öffnen Sie das Terminal, in dem Sie ein Linda-Benutzer sind.  Sie können einen Benutzer mit <b>useradd linda</b> erstellen und das Kennwort <b>passwd linda</b> hinzufügen. </li><li>  Erstellen Sie mit dem Befehl <b>mkdir -p / data / sales</b> ein Verzeichnis / data und ein Unterverzeichnis / data / sales im Stammverzeichnis.  Führen Sie <b>cd / data / sales aus</b> , um zum Verkaufsverzeichnis zu gelangen.  Führen Sie <b>touch linda1</b> und <b>touch linda2 aus</b> , um zwei leere Dateien zu erstellen, die linda gehören. </li><li>  Führen Sie <b>su - lisa aus</b> , um den aktuellen Benutzer zu <b>lisa</b> zu wechseln, die auch Mitglied der Verkaufsgruppe ist. </li><li>  Führen Sie <b>cd / data / sales aus</b> und führen Sie in diesem Verzeichnis <b>ls -l aus</b> .  Sie sehen zwei Dateien, die von Linda erstellt wurden und zur Linda-Gruppe gehören.  Führen Sie <b>rm -f linda * aus</b> .  Dadurch werden beide Dateien gelöscht. </li><li>  Führen Sie <b>touch lisa1</b> und <b>touch lisa2 aus</b> , um zwei Dateien zu erstellen, die dem Benutzer lisa gehören. </li><li>  Führen Sie <b>su aus</b> , um Ihre Berechtigungen auf Root-Ebene zu erhöhen. </li><li>  Führen Sie <b>chmod g + s, o + t / data / sales aus</b> , um das Gruppenidentifikationsbit (GUID) sowie das Sticky-Bit im freigegebenen Gruppenverzeichnis festzulegen. </li><li>  Führen Sie <b>su - linda</b> .  <b>Berühren Sie dann Linda3</b> und <b>Linda4</b> .  Jetzt sollten Sie sehen, dass die beiden von Ihnen erstellten Dateien zur Verkaufsgruppe gehören, die der Eigentümer der Verzeichnisgruppe / data / sales ist. </li><li>  Führen Sie <b>rm -rf lisa * aus</b> .  Sticky Bit verhindert, dass diese Dateien im Auftrag von Linda gelöscht werden, da Sie diese Dateien nicht besitzen.  Bitte beachten Sie, dass Linda, wenn sie Eigentümerin des Verzeichnisses / data / sales ist, diese Dateien trotzdem löschen kann! </li></ol><br><h2>  Verwalten von ACLs (setfacl, getfacl) unter Linux </h2><br>    ,   ,     ,  Linux   ,                . <br><br>      .  ,         ,         . <br><br><h3>  ACL </h3><br>   ACL      ,     :     . ,     ACL     ,             ACL. <br><br>  tar   ACL.  ,   ACL       ,  <b>star</b>  tar. <b>star</b>     ,   tar;      ACL. <br><br>       ACL   <b>getfacl</b> ,       setfacl.    ,  <b>getfacl -R /directory &gt; file.acls</b> .       ,  <b>setfacl --restore=file.acl</b> . <br><br>        .  ACL       ,     . <br>     ,    ,      . ,    ACL,    ,  ,          . <br><br><h3>     ACL </h3><br>     ACL        ACL.      ,        ACL   .     ACL       «operation not supported», ,       ACL. <br><br>   ,     <b>acl mount</b>   /etc/fstab,        ACL  . <br><br><h3>     ACL   setfacl  getfacl </h3><br>   ACL,    <b>setfacl</b> .     ACL,   <b>getfacl</b> .  <b>ls -l</b>     ACL;    +   ,  ,   ACL    . <br><br>    ACL      ACL   <b>getfacl</b> .         ,     <b>ls -ld</b> ,      <b>getfacl</b> .     ,  ,      . <br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># ls -ld /dir drwxr-xr-x. 2 root root 6 Feb 6 11:28 /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx other::rx</span></span></code> </pre><br>     <b>getfacl</b>  ,       : ,   .    ACL,          sales.    <b>setfacl -mg:sales:rx /dir</b> .    <b>-m</b> ,    ACL  .   <b>g:sales:rx</b>    ACL     ( <b>rx</b> )   ( <b>g</b> ) sales.    ,   ,     getfacl     ACL. <br><br><pre> <code class="bash hljs">[root@server1 /]<span class="hljs-comment"><span class="hljs-comment"># setfacl -mg:sales:rx /dir [root@server1 /]# getfacl /dir getfacl: Removing leading '/' from absolute path names # file: dir # owner: root # group: root user::rwx group::rx group:sales:rx mask::rx other::rx</span></span></code> </pre><br> ,   ,    ACL,   ACL     . ,  <b>setfacl -mu:linda:rwx /data</b>    linda   /data,          . <br><br>  <b>setfacl</b>     .    ,  <b>-R</b> .  ,    ACL     ,       ,    ACL.         ACL   . <br><br><h3>   ACL   </h3><br>      ACL  ,           .     ,     ,   ACL  . <br><br>  ACL  ,   ,       ,   .   ,  ACL          .   ,     ACL! <br><br> <b>  .</b>     ACL             ,    ACL .   <b>setfacl -R -m</b> ,   ACL   .   <b>setfacl -md:</b> ,      ,    . <br><br>   ACL  ,      <b>d</b>   <b>-m</b> (  !).   <b>setfacl -md:g:sales:rx /data</b> ,   ,   sales       ,  -     /data. <br><br>    ACL        ACL  .      ,         ,  <b>chmod</b> . ,        <b>chmod</b> ,   ,          ,  -  .   ,        -,   /data, ,  <b>setfacl -md:o::- /data</b> . <br><br> ACL       .   ,    ACL    ,        ,      . ,     ,       ACL.   ,    ,    ACL   (       ). <br><br><h3>       ACL </h3><br>         /data/account  /data/sales,    .     ,   sales    /data/sales,   account    /data/account. <br><br>  ,   account       /data/sales,   sales       /data/account. <br><br>     ACL  ,  ,            . <br><br><ol><li>  . </li><li>  <b>setfacl -mg:account:rx /data/sales</b>  <b>setfacl -mg:sales:rx /data/account</b> . </li><li>  <b>getfacl</b> ,  ,      ,   . </li><li>  <b>setfacl -md:g:account:rwx,g:sales:rx /data/sales</b> ,   ACL     sales. </li><li>  ACL     /data/account,  <b>setfacl -md:g:sales:rwx,g:account:rx /data/account</b> . </li><li> ,   ACL ,     /data/sales.  <b>touch /data/sales/newfile</b>   <b>getfacl /data/sales/newfile</b>    . </li></ol><br><h2>       umask </h2><br>   ,    ACL  .     ACL,   ,     ,   : <b>umask</b> ( ).     ,        <b>umask</b> . <br><br> , , ,          .     <b>umask</b> .           .   <b>umask</b>   ,     ,       ;     — 666,    — 777. <br><br>       .       <b>umask</b>   . <br><br>  ,   <b>umask</b> ,         <b>chmod</b> ,      ,      ,       ,   .  <b>umask</b>   022  644      755    ,    . <br><br>      <b>umask</b>      . <br><br><img src="https://habrastorage.org/webt/yi/l8/x0/yil8x0tn7hy6ecxndifimssztnk.jpeg"><br><br>   ,    umask,   :       ,   666,   umask,    .            777. <br><br>      umask:       .     umask   ,   ,   umask      ,    /etc/profile.   —      umask.sh   /etc/profile.d   umask,        .      umask,         . <br><br>   umask  /etc/profile   ,      ,   ,    umask     .profile,       . <br><br> ,    ,     ; ,   ,     .     ,    umask     root  027,       umask   022. <br><br><h2>      </h2><br>       Linux. <br><br>              ,           .       Linux —   . <br>       ,    . <br><br>      ACL,        <b>mount</b> . <br><br>   <b>user_xattr</b> .     «operation not supported»      ,    <b>mount</b>   /etc/fstab. <br><br>   .   ,    .   ;     . <br><br> <b>    ,    :</b> <br><br> <b>A</b>   ,        . <br>   ,   ,          .     ;   ,     ,  <b>A</b>      . <br><br> <b>a</b>    ,    . <br><br> <b>c</b>     ,       ,    ,         . <br><br> <b>D</b>   ,        ,       .        ,  ,          . <br><br> <b>d</b>   ,        ,    . <br><br> <b>I</b>      ,    .           ,   Ext3,      B-tree     . <br><br> <b>i</b>     . ,     ,    ,     . <br><br> <b>j</b>   ,     ext3     ,   —      . <br><br> <b>s</b>  ,     ,  0    .  ,      ,    . <br><br> <b>u</b>      .    ,         . <br><br>     ,     <b>chattr</b> . ,  <b>chattr +s somefile</b> ,     somefile.   ?   <b>chattr -s somefile</b> ,    .     ,     ,   <b>lsattr</b> . <br><br><h2>  Zusammenfassung </h2><br>     ,    .      ,     ,   ACL-   .   ,    umask     .      ,            . <br><br>     ,       .      . <br><br><blockquote>        .          . <br><br>  « -          .»   « -          .»,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">berez</a> . <br></blockquote><br><blockquote> : <br>      ,  ,     ,     . <br><br> : <br>      ,  ,     ,       .      ,       ,    ,    . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">CryptoPirate</a> <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469667/">https://habr.com/ru/post/de469667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469651/index.html">WIBAttack. Ist die neue Sicherheitslücke auf der SIM-Karte wirklich schrecklich?</a></li>
<li><a href="../de469655/index.html">Warum benötigen Sie einen Support-Service, der nicht unterstützt?</a></li>
<li><a href="../de469657/index.html">Analyse: Welche Börsenanlagen bringen russischen Investoren die größte Rendite?</a></li>
<li><a href="../de469659/index.html">RC Cars: Einführung</a></li>
<li><a href="../de469663/index.html">Die Geschichte von DashaMail: vom Start eines Klons eines amerikanischen E-Mail-Start-ups über Streitigkeiten mit Investoren bis hin zu einem Neuanfang</a></li>
<li><a href="../de469669/index.html">Edward Snowden spricht darüber, warum er Informant wurde</a></li>
<li><a href="../de469671/index.html">Warum sollten Sie die Ada-Sprache verwenden, um Ihr System zu programmieren?</a></li>
<li><a href="../de469677/index.html">Rauchen, gesunder Lebensstil, Motivation und Geschwindigkeit der Softwareentwicklung</a></li>
<li><a href="../de469681/index.html">TensorFlow 2.0 Final Release veröffentlicht</a></li>
<li><a href="../de469683/index.html">Nukleare Sicherheit und industrielle Videoüberwachung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>