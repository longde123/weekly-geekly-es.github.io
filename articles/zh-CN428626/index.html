<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”¹ ğŸš¡ ğŸ‚ğŸ½ å¦‚ä½•ä½¿PHP7ä¸­çš„æ‰©å±•æ¯”â€œ helloï¼Œworldâ€æ›´å›°éš¾ï¼Œå¹¶ä¸”ä¸è‡´äºçœ¼èŠ±redä¹±ã€‚ ç¬¬ä¸€éƒ¨åˆ† ğŸ§•ğŸ½ ğŸ•“ âï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ€ä¹ˆäº† 
 æˆ‘å†™è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºäº†ä½¿æˆ‘æ€»å…±èŠ±äº†è‡³å°‘ä¸€å¹´çš„æ—¶é—´ï¼Œè¯»è€…å¯ä»¥èµ°å‡ ä¸ªå°æ—¶ã€‚ æ­£å¦‚æˆ‘çš„äº²èº«ç»éªŒæ‰€è¡¨æ˜çš„é‚£æ ·ï¼Œä»…ä½¿ç”¨Cè¯­è¨€è¿›è¡Œç¼–ç¨‹è¦æ¯”å¯¹PHPå·¥ä½œè¿›è¡Œè®¤çœŸçš„æ‰©å±•è¦å®¹æ˜“ä¸€äº›ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘å°†ä½¿ç”¨å®ç°å‰ç¼€æ ‘çš„libtrieåº“ç¤ºä¾‹ï¼ˆæœ€å¥½ç§°ä¸ºtrieï¼‰æ¥å°½å¯èƒ½å¤šåœ°å‘Šè¯‰æ‚¨å¦‚ä½•è¿›è¡Œæ‰©å±•ã€‚ æˆ‘å°†åœ¨æ–°å®‰è£…çš„Lubun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•ä½¿PHP7ä¸­çš„æ‰©å±•æ¯”â€œ helloï¼Œworldâ€æ›´å›°éš¾ï¼Œå¹¶ä¸”ä¸è‡´äºçœ¼èŠ±redä¹±ã€‚ ç¬¬ä¸€éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428626/"><h2> æ€ä¹ˆäº† </h2><br> æˆ‘å†™è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºäº†ä½¿æˆ‘æ€»å…±èŠ±äº†è‡³å°‘ä¸€å¹´çš„æ—¶é—´ï¼Œè¯»è€…å¯ä»¥èµ°å‡ ä¸ªå°æ—¶ã€‚ æ­£å¦‚æˆ‘çš„äº²èº«ç»éªŒæ‰€è¡¨æ˜çš„é‚£æ ·ï¼Œä»…ä½¿ç”¨Cè¯­è¨€è¿›è¡Œç¼–ç¨‹è¦æ¯”å¯¹PHPå·¥ä½œè¿›è¡Œè®¤çœŸçš„æ‰©å±•è¦å®¹æ˜“ä¸€äº›ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘å°†ä½¿ç”¨å®ç°å‰ç¼€æ ‘çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">libtrie</a>åº“ç¤ºä¾‹ï¼ˆæœ€å¥½ç§°ä¸ºtrieï¼‰æ¥å°½å¯èƒ½å¤šåœ°å‘Šè¯‰æ‚¨å¦‚ä½•è¿›è¡Œæ‰©å±•ã€‚ æˆ‘å°†åœ¨æ–°å®‰è£…çš„Lubuntu 18.04ç³»ç»Ÿä¸Šç¼–å†™å¹¶åŒæ—¶æ‰§è¡Œæ‰€æè¿°çš„æ“ä½œã€‚ <br><br> è®©æˆ‘ä»¬å¼€å§‹å§ã€‚ <br><a name="habracut"></a><br><h2> è½¯ä»¶å®‰è£… </h2><br><h4>  p </h4><br><ol><li> é¦–å…ˆï¼Œæˆ‘ä»¬æ”¾å…¥php7.2-devè½¯ä»¶åŒ…ï¼Œå…¶ä¸­åŒ…å«æ„å»ºæ‰©å±•æ‰€éœ€çš„phpizeè„šæœ¬ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªå·¥ä½œç‰ˆæœ¬çš„phpï¼Œåœ¨è¯¥ç‰ˆæœ¬ä¸Šæˆ‘ä»¬å°†æ£€æŸ¥æˆ‘ä»¬çš„æ‰©å±•åã€‚ å®‰è£…æ­¤è½¯ä»¶åŒ…å°†æ‹‰å‡ºè®¸å¤šç›¸å…³çš„è½¯ä»¶åŒ…ï¼Œæˆ‘ä»¬å°†æä¾›çš„æ‰€æœ‰å†…å®¹æ”¾å…¥å…¶ä¸­ã€‚ <br><br><pre><code class="bash hljs">sudo apt install php7.2-dev</code> </pre> <br></li><li> æˆ‘ä»¬è½¬åˆ°php.netç½‘ç«™ï¼Œè½¬åˆ°â€œä¸‹è½½â€éƒ¨åˆ†ï¼Œå¹¶æ‹‰å‡ºæŒ‡å‘å¸¦æœ‰æœ€æ–°ç¨³å®šç‰ˆæœ¬phpï¼ˆç°åœ¨ä¸º7.2.11ï¼‰çš„æ¡£æ¡ˆçš„é“¾æ¥ã€‚ <br> ä¸‹è½½phpæºæ¡£æ¡ˆï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /tmp &amp;&amp; wget http://it2.php.net/get/php-7.2.11.tar.gz/from/this/mirror -O php7.tar.gz</code> </pre><br></li><li> ç°åœ¨å°†å­˜æ¡£è§£å‹ç¼©åˆ°æˆ‘ä»¬è‡ªå·±ï¼š <br><br><pre> <code class="bash hljs">sudo tar -xvf php7.tar.gz -C /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src</code> </pre><br></li></ol><br><h4> ä»£ç ç¼–è¾‘å™¨ </h4><br> æˆ‘é€šå¸¸ä½¿ç”¨2ä¸ªä»£ç ç¼–è¾‘å™¨ã€‚ ç®€å•å¿«é€Ÿçš„geanyå’Œæ¼‚äº®çš„ä¹¦å‘†å­ï¼Œä½†JetBrainsæä¾›äº†éå¸¸å…ˆè¿›çš„æç¤ºã€‚  Geanyå¯ä»æ ‡å‡†èŠœèUbuntuå®‰è£…ã€‚ <br><br><pre> <code class="bash hljs">sudo apt install geany</code> </pre><br> ä»JetBrainså®˜æ–¹ç½‘ç«™ä¸‹è½½Clionï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Downloads &amp;&amp; wget https://download.jetbrains.com/cpp/CLion-2018.2.5.tar.gz -O clion.tar.gz</code> </pre><br><pre> <code class="bash hljs">sudo tar -xvf clion.tar.gz -C /usr/share</code> </pre><br> æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªé“¾æ¥ï¼Œä»¥æ–¹ä¾¿ä»æ§åˆ¶å°è¿è¡Œclionã€‚ <br><br><pre> <code class="bash hljs">sudo ln -s /usr/share/clion-2018.2.5/bin/clion.sh /usr/bin/clion</code> </pre><br> é¦–æ¬¡å¯åŠ¨åï¼Œclionæœ¬èº«å°†é€šè¿‡LXpanel Shellèœå•ä¸ºå…¶è‡ªèº«åˆ›å»ºå¿«æ·æ–¹å¼ï¼Œä½†è¿™æ˜¯æ‚¨é¦–æ¬¡éœ€è¦æ‰‹åŠ¨è¿è¡Œå®ƒã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># clion</span></span></code> </pre><br><h2> åˆ›å»ºæ‰©å±• </h2><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è‡³å°‘æœ‰3ä¸ªé€‰æ‹©ï¼š <br><br><ol><li> ä»æˆ‘ä»¬ä¸‹è½½çš„phpæ¥æºä¸­è·å–åŸå§‹æ ‡å‡†å…‰ç›˜ã€‚ </li><li> ç”¨ç‰¹æ®Šçš„ext_skelè„šæœ¬ç¨å¾®çœ‹äº†æ ‡å‡†å…‰ç›˜ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»è¿™é‡Œ</a>è·å–ä¼˜è´¨çš„æç®€ä¸»ä¹‰å…‰ç›˜ã€‚ </li></ol><br> æˆ‘æœ€å–œæ¬¢ç¬¬ä¸‰ä¸ªé€‰é¡¹ï¼Œä½†æ˜¯åœ¨å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæˆ‘å°†ä½¿ç”¨ç¬¬äºŒä¸ªé€‰é¡¹ä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å¯èƒ½è¢«è¯¯è§£çš„åœ°æ–¹ã€‚ å°½ç®¡é€‰æ‹©å¼€å‘äººå‘˜çš„ç©ºç™½ä»ç„¶æ˜¯ä¸€ç§ä¹è¶£ï¼š-) <br><br><ol><li> è®©æˆ‘ä»¬è½¬åˆ°å¸¦æœ‰æ ‡å‡†phpæ‰©å±•åçš„ç›®å½•ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src/php-7.2.11/ext</code> </pre><br> é™¤äº†è„šæœ¬çš„åç§°ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡åŸå§‹æ–‡ä»¶æŒ‡å®šä¸€äº›æ‰©å±•å‚æ•°ã€‚ æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½ä¸å¯èƒ½å®Œæˆã€‚ æˆ‘å°†æ‰‹å·¥åšæ‰€æœ‰äº‹æƒ…ï¼Œä½†æˆ‘å°†å±•ç¤ºåŸå‹çš„å·¥ä½œåŸç†ã€‚ æˆ‘ä»¬åšç‰¹é‡Œï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å‘½åæ‰©å±•libtrieã€‚ è¦åœ¨/ usr / local / srcç›®å½•ä¸­å·¥ä½œï¼Œæ‚¨éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œä»¥å…æœ€ç»ˆå†™sudoï¼Œæˆ‘å°†åŒ…æ‹¬å…·æœ‰æå‡æƒé™çš„bashã€‚ <br><br><pre> <code class="bash hljs">sudo bash</code> </pre><br></li><li> åœ¨è¿™é‡Œï¼Œæˆ‘å°†ä»…è®¾ç½®æ‰€åˆ›å»ºæ‰©å±•å°†å®ç°çš„1ä¸ªå‡½æ•°çš„å‚æ•°ã€‚ è¿™åªæ˜¯ä¸€ä¸ªæ¼”ç¤ºåŠŸèƒ½ï¼Œä»¥æ¼”ç¤ºå¦‚ä½•å®Œæˆæ­¤æ“ä½œã€‚ <br><br> æˆ‘ä»¬å°†å®Œå…¨æ¨¡æ‹Ÿæ ‡å‡†åŠŸèƒ½ <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">array</span></span> array_fill ( int $start_index , int $num , mixed $value )</code> </pre><br>  protoæ–‡ä»¶ä¸­çš„è¯­æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦æŒ‡å®šå‡½æ•°çš„åç§°å³å¯ã€‚ æˆ‘ä¼šå†™ä¸€äº›æ›´å¤šçš„ä¸œè¥¿ï¼Œä½¿å®ƒçœ‹èµ·æ¥æ›´æœ‰ç”¨ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> my_array_fill \( int start_index , int num , mixed value \) &gt;&gt; libtrie.proto</code> </pre><br></li><li> ç°åœ¨è¿è¡Œext_skelè„šæœ¬ï¼Œä¸ºå…¶æŒ‡å®šæ‰©å±•åå’Œæˆ‘ä»¬åˆ›å»ºçš„åŸå‹æ–‡ä»¶ã€‚ <br><br><pre> <code class="bash hljs">./ext_skel --extname=libtrie --proto=./libtrie.proto</code> </pre><br></li><li> æˆ‘ä»¬å·²ç»åˆ›å»ºäº†å¸¦æœ‰æ‰©å±•åçš„ç›®å½•ã€‚ è®©æˆ‘ä»¬å¼€å§‹å§ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> libtrie</code> </pre><br></li></ol><br><h4> æ–‡ä»¶ç»“æ„ä¸æ±‡ç¼–åŸç† </h4><br><div class="spoiler">  <b class="spoiler_title">æ¡£æ¡ˆç»“æ„</b> <div class="spoiler_text"><pre> <code class="bash hljs">config.m4 -           phpize   ./configure,       makefile. CREDITS -  ,     ,    libtrie.c -      php_libtrie.h -     config.w32 -        windows EXPERIMENTAL -  .    ,    . libtrie.php -  php      . tests -  </code> </pre><br></div></div><br> è¦æˆåŠŸæ„å»ºæ‰©å±•ï¼Œåªéœ€è¦3ä¸ªæ–‡ä»¶ã€‚ åœ¨ä¸Šé¢æåˆ°çš„æ‰©å±•çš„æç®€å…‰ç›˜ä¸­ï¼Œåªæœ‰3ä¸ªæ–‡ä»¶ã€‚ <br><br><pre> <code class="bash hljs">config.m4 php_libtrie.h libtrie.c</code> </pre><br> æˆ‘ä¸å–œæ¬¢phpä¸­æ¥å—çš„æ ‡å‡†å‘½åï¼Œæˆ‘å–œæ¬¢æ ‡å¤´æ–‡ä»¶å’Œå¸¦æœ‰ç¨‹åºä¸»ä½“çš„æ–‡ä»¶å‘½åç›¸åŒã€‚ å› æ­¤é‡å‘½å <br> <code>libtrie.c</code> <br> åœ¨ <br> <code>php_libtrie.c</code> <br> <br><pre> <code class="bash hljs">mv libtrie.c php_libtrie.c</code> </pre><br><h4> ç¼–è¾‘config.m4 </h4><br> é»˜è®¤çš„config.m4æ–‡ä»¶å®é™…ä¸ŠæŒ¤æ»¡äº†å†…å®¹ï¼Œå…¶ä¸­çš„å¤§é‡å†…å®¹ä»¤äººå›°æƒ‘ã€‚ å¦‚æˆ‘æ‰€è¯´ï¼Œæ­¤æ–‡ä»¶æ˜¯å½¢æˆé…ç½®è„šæœ¬æ‰€å¿…éœ€çš„ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>é˜…è¯»æœ‰å…³æ­¤å†…å®¹çš„æ›´å¤šä¿¡æ¯ã€‚ <br><br><pre> <code class="bash hljs">geany config.m4 &amp;</code> </pre><br> æˆ‘ä»¬åªå‰©ä¸‹è¿™ä¸ªï¼š <br><br><pre> <code class="bash hljs">PHP_ARG_ENABLE(libtrie, whether to <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> libtrie support, [ --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-libtrie Enable libtrie support]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PHP_LIBTRIE</span></span></span><span class="hljs-string">"</span></span> != <span class="hljs-string"><span class="hljs-string">"no"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-comment"><span class="hljs-comment">#    -    # PHP_ADD_INCLUDE() #   PHP_NEW_EXTENSION(libtrie, php_libtrie.c, $ext_shared) # PHP_NEW_EXTENSION(libtrie, php_libtrie.c, $ext_shared,, -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1) fi</span></span></code> </pre><br><img src="https://habrastorage.org/webt/mb/fz/y_/mbfzy_te6ilmvy8oelvaf91_g20.png"><br><br> ç¬¬ä¸€ä¸ªå®ä½¿æ‚¨èƒ½å¤Ÿåœ¨è¿è¡Œç”Ÿæˆçš„é…ç½®è„šæœ¬æ—¶å¯ç”¨å’Œç¦ç”¨æˆ‘ä»¬çš„æ‰©å±•ã€‚ <br><br> ç¬¬äºŒä¸ªå—æ˜¯æœ€é‡è¦çš„ï¼Œå®ƒç¡®å®šå“ªäº›æ–‡ä»¶å°†ä½œä¸ºæ‰©å±•çš„ä¸€éƒ¨åˆ†è¿›è¡Œç¼–è¯‘ï¼Œæ‰©å±•æ˜¯é€šè¿‡.soæ–‡ä»¶åŠ¨æ€è¿æ¥è¿˜æ˜¯æ‰©å±•æ˜¯é™æ€çš„ï¼Œä»¥åŠæ˜¯å¦å°†åœ¨phpæ„å»ºè¿‡ç¨‹ä¸­è¿›è¡Œé›†æˆã€‚ æˆ‘ä»¬çš„å°†å……æ»¡æ´»åŠ›ã€‚ <br> ä¿å­˜æ–‡ä»¶ã€‚ <br><br> æˆ‘ä»¬å°†æ–‡ä»¶å¤åˆ¶åˆ°ç”¨æˆ·ç›®å½•ï¼Œä»¥ä½¿å…¶åœ¨rootæ¨¡å¼ä¸‹ä¸èµ·ä½œç”¨ã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    exit</span></span></code> </pre><br> å¤åˆ¶ï¼š <br><br><pre> <code class="bash hljs">cp /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src/php-7.2.11/ext/libtrie ~/Documents/ -r</code> </pre><br><h3> æ¼”ç¤ºåŠŸèƒ½ </h3><br> è®©æˆ‘æé†’æ‚¨ï¼Œæˆ‘ä»¬å°†å®Œå…¨æ¨¡æ‹Ÿarray_fillï¼ˆï¼‰ã€‚ æˆ‘å°†é€šè¿‡clionè¿›è¡Œç ”ç©¶ï¼Œä½†æ˜¯æœ¬æŒ‡å—å¯ä»¥åœ¨ä»»ä½•ç¼–è¾‘å™¨ä¸­å®Œæˆã€‚  Clionå¾ˆå¥½ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨è‡ªåŠ¨æ‰§è¡ŒåŸºæœ¬è¯­æ³•æ£€æŸ¥ï¼Œå¹¶ä¸”è¿˜æ”¯æŒé€šè¿‡ctrl +å•å‡»å¿«é€Ÿæµè§ˆæ–‡ä»¶æˆ–å‡½æ•°ã€‚ ä¸ºäº†ä½¿æ­¤ç±»è½¬æ¢åœ¨æˆ‘ä»¬çš„æ‰©å±•ç¨‹åºä¸­èµ·ä½œç”¨ï¼Œæ‚¨å°†å¿…é¡»é…ç½®CMakeLists.txtæ–‡ä»¶ <br><br> ä¸ºäº†ä½¿clionæ­£å¸¸å·¥ä½œï¼Œæ‚¨å°†éœ€è¦å®‰è£…cmakeæ„å»ºç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå°†å®‰è£…ä¸€å †ç›¸å…³è½¯ä»¶åŒ…ã€‚ ä½¿ç”¨å‘½ä»¤å®‰è£…æ‰€æœ‰è¿™äº›ï¼š <br><br><pre> <code class="bash hljs">sudo apt install cmake</code> </pre><br><h4> é…ç½®cmake </h4><br> æˆ‘ä»¬ä»¥æ‰©å±•å½¢å¼æ‰“å¼€æˆ‘ä»¬çš„ç›®å½•ã€‚ é€šè¿‡å•å‡»å±å¹•é¡¶éƒ¨çš„æ ¹ç›®å½•åç§°ï¼Œé€šè¿‡ä¸Šä¸‹æ–‡èœå•åˆ›å»ºå…·æœ‰ä»¥ä¸‹å†…å®¹çš„CMakeLists.txtæ–‡ä»¶ï¼š <br><br><pre> <code class="bash hljs">cmake_minimum_required(VERSION 3.12) project(php-ext-libtrie C) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(CMAKE_C_STANDARD 11) <span class="hljs-comment"><span class="hljs-comment">#   phproot,       php set(phproot /usr/local/src/php-7.2.11/) #   ,      #      clion       php include_directories(${phproot}) include_directories(${phproot}TSRM/) include_directories(${phproot}main/) include_directories(${phproot}Zend/) #    clion          add_executable(php-ext-libtrie php_libtrie.c)</span></span></code> </pre><br><img src="https://habrastorage.org/webt/ag/nc/qj/agncqji78vvzfcbyevpwi-9gszy.png"><br><br> ä¹Ÿè®¸æœ‰äººçŸ¥é“å¦‚ä½•ç¼©çŸ­æ­¤æ–‡ä»¶çš„é•¿åº¦ï¼Œä»¥ä¾¿clionå¼€å§‹ç´¢å¼•é¡¹ç›®æ–‡ä»¶ã€‚ æˆ‘æ²¡æœ‰æ‰¾åˆ°æ›´çŸ­çš„æ–¹æ³•ã€‚ å¦‚æœæœ‰äººçŸ¥é“ï¼Œè¯·åœ¨è¯„è®ºä¸­å†™ã€‚ <br><br><h4> æ¼”ç¤ºåŠŸèƒ½ä»£ç  </h4><br> ç”¨æ‰©å±•å<code>php_libtrie.c</code>çš„ä¸»ä½“æ‰“å¼€æ–‡ä»¶ï¼Œç„¶å <br> åˆ é™¤æ‰€æœ‰è¯„è®ºï¼Œä»¥å…æ··æ·†æˆ‘ä»¬ã€‚ <br><br><img src="https://habrastorage.org/webt/8x/sj/c2/8xsjc2q571audrqfbliblnct4-8.png"><br><br><img src="https://habrastorage.org/webt/vu/ql/mu/vuqlmu48nqu2fkkasdosjsma8zw.png"><br><br>  Clionæ£€æŸ¥ä»£ç ä¸­ä½¿ç”¨çš„æ‰€æœ‰å‡½æ•°å’Œå®æ˜¯å¦éƒ½å·²å£°æ˜ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚ æ˜¾ç„¶ï¼ŒPHPå¼€å‘äººå‘˜ä¸ä½¿ç”¨clionï¼Œå¦åˆ™ä»–ä»¬å¯èƒ½ä¼šå¯¹æ­¤åšä¸€äº›äº‹æƒ…ã€‚ ä¸ºäº†é˜²æ­¢è¿™äº›é”™è¯¯åœ¨æ‰©å±•ç¨‹åºä¸­å‘ç”Ÿï¼Œæˆ‘ä»¬å°†å‘æˆ‘ä»¬æä¾›ç¼ºå°‘çš„å¤´æ–‡ä»¶ã€‚ <br><br> ä¸ºäº†ç®€åŒ–ä¸€åˆ‡ï¼Œæˆ‘è¿™æ ·åšï¼š <br> æˆ‘å°†æ‰€æœ‰åŒ…å«å¤´æ–‡ä»¶çš„å¤´æ–‡ä»¶ä»<code>php_libtrie.c</code>æ–‡ä»¶ä¼ è¾“åˆ°<code>php_libtrie.h</code> ï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­åªæœ‰ä¸€ä¸ªæ¡ç›®ï¼š <br><br><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"php_libtrie.h"</span></span></span></span></code> </pre><br><img src="https://habrastorage.org/webt/ft/fe/yg/ftfeygfd1fznk5jxaccj8i9mt8k.png"><br><br>  <code>php_libtrie.h</code>æ–‡ä»¶å°†åŒ…å«æ‰€æœ‰å…¶ä»–å¿…è¦çš„åŒ…å«ã€‚ <br><br><img src="https://habrastorage.org/webt/_v/_4/jg/_v_4jgpsak4g3aa7clykblcuq8y.png"><br><br><div class="spoiler">  <b class="spoiler_title">æˆ‘çš„å¤´æ–‡ä»¶çš„å†…å®¹</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> <span class="hljs-type"><span class="hljs-type">PHP_LIBTRIE_H</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">PHP_LIBTRIE_H</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#ifdef</span></span> <span class="hljs-type"><span class="hljs-type">HAVE_CONFIG_H</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"config.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;stdarg.h&gt; //   va_start() <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;inttypes.h&gt; //    //  <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= <span class="hljs-number"><span class="hljs-number">4</span></span> # define <span class="hljs-type"><span class="hljs-type">ZEND_API</span></span> __attribute__ ((visibility(<span class="hljs-comment"><span class="hljs-comment">"default"</span></span>))) # define <span class="hljs-type"><span class="hljs-type">ZEND_DLEXPORT</span></span> __attribute__ ((visibility(<span class="hljs-comment"><span class="hljs-comment">"default"</span></span>))) <span class="hljs-symbol"><span class="hljs-symbol">#else</span></span> # define <span class="hljs-type"><span class="hljs-type">ZEND_API</span></span> # define <span class="hljs-type"><span class="hljs-type">ZEND_DLEXPORT</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> # define <span class="hljs-type"><span class="hljs-type">SIZEOF_SIZE_T</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> //   <span class="hljs-type"><span class="hljs-type">ZVAL_COPY_VALUE</span></span>() <span class="hljs-symbol"><span class="hljs-symbol">#ifndef</span></span> <span class="hljs-type"><span class="hljs-type">ZEND_DEBUG</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#define</span></span> <span class="hljs-type"><span class="hljs-type">ZEND_DEBUG</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> //  ,      <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"php.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"php_ini.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"zend.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"zend_types.h"</span></span> //<span class="hljs-type"><span class="hljs-type">ZVAL_COPY_VALUE</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"ext/standard/info.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"zend_API.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"zend_modules.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"zend_string.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"spprintf.h"</span></span> extern zend_module_entry libtrie_module_entry; ...</code> </pre><br></div></div><br> å¦‚æœä¸€åˆ‡æ“ä½œæ­£ç¡®ï¼Œåˆ™ç¦»å­æ£€æµ‹ä»ªçš„å³ä¸Šè§’å°†æ˜¾ç¤ºé»„è‰²æˆ–ç»¿è‰²æ–¹å—ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰ä¸¥é‡é”™è¯¯ã€‚ <br><br><img src="https://habrastorage.org/webt/pt/gm/sa/ptgmsa8nlhkn1gs_ykyc8igavao.png"><br><br><h4> ç†è®ºä¸Šçš„ä¸€ç‚¹åç¦» </h4><br> ä¸ºäº†ä½¿æ‰©å±•æ­£å¸¸å·¥ä½œï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹ä¸¤é¡¹æ“ä½œï¼š <br><br><ol><li> æ‚¨éœ€è¦åˆå§‹åŒ–ç‰¹æ®Šç»“æ„zend_module_entryï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š <br><br><pre> <code class="hljs ruby">zend_module_entry libtrie_module_entry = { STANDARD_MODULE_HEADER, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-string"><span class="hljs-string">"libtrie"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  libtrie_functions, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     PHP_MINIT(libtrie), <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>,     PHP_MSHUTDOWN(libtrie), <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   PHP_RINIT(libtrie), <span class="hljs-regexp"><span class="hljs-regexp">/* Replace with NULL if there's nothing to do at request start */</span></span> PHP_RSHUTDOWN(libtrie), <span class="hljs-regexp"><span class="hljs-regexp">/* Replace with NULL if there's nothing to do at request end */</span></span> PHP_MINFO(libtrie), <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ,    php  phpinfo() PHP_LIBTRIE_VERSION, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ,     STANDARD_MODULE_PROPERTIES /<span class="hljs-regexp"><span class="hljs-regexp">/    };</span></span></code> </pre><br></li><li> åˆå§‹åŒ–åŒ…å«æˆ‘ä»¬æ‰©å±•çš„æ‰€æœ‰åŠŸèƒ½çš„åŒä¸€æ•°ç»„ã€‚ <br><br> åœ¨è¿™é‡Œï¼Œé€šè¿‡ç‰¹æ®Šçš„å®åŒ…è£…å™¨PHP_FEï¼ˆï¼‰ï¼Œè®¾ç½®äº†æ‰©å±•ä¸­æ‰€æœ‰å‡½æ•°çš„åç§°ã€‚ é€šå¸¸ï¼Œå®åœ¨PHPä¸­éå¸¸æ´»è·ƒåœ°ä½¿ç”¨ï¼Œæœ‰å¾ˆå¤šä»…å¼•ç”¨å…¶ä»–å®çš„å®ï¼Œè€Œåä¹‹åˆ™æ›´è¿œã€‚ æ‚¨å¿…é¡»ä¹ æƒ¯å®ƒã€‚ æ‚¨å¯ä»¥é€šè¿‡ctrl +å•å‡»æ¥ç¡®å®šæ˜¯å¦é€šè¿‡äº†å®ã€‚ åœ¨è¿™é‡Œï¼Œclionæ˜¯å¿…ä¸å¯å°‘çš„ã€‚ <br><br> è¿˜è®°å¾—åŸå§‹æ–‡ä»¶å—ï¼Ÿ æˆ‘ä»¬åœ¨é‚£é‡Œè®¾ç½®äº†1ä¸ªå‡½æ•°my_array_fillï¼ˆï¼‰ã€‚ æ‰€ä»¥ç°åœ¨æˆ‘ä»¬åœ¨è¿™é‡Œæœ‰3ä¸ªå…ƒç´ ï¼š <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> zend_function_entry libtrie_functions[] = { PHP_FE(confirm_libtrie_compiled, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-comment"><span class="hljs-comment">/* For testing, remove later. */</span></span> PHP_FE(my_array_fill, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) PHP_FE_END <span class="hljs-comment"><span class="hljs-comment">/* Must be the last line in libtrie_functions[] */</span></span> };</code> </pre><br> ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæµ‹è¯•å‡½æ•°ï¼Œå®ƒå°†æ˜¾ç¤ºæ‰©å±•åæœ‰æ•ˆï¼Œç¬¬äºŒè¡Œæ˜¯æˆ‘ä»¬çš„å‡½æ•°ï¼Œç¬¬ä¸‰è¡Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®ï¼Œå®ƒåº”è¯¥æ˜¯æ­¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªã€‚ <br></li></ol><br> æ‰¾åˆ°æˆ‘ä»¬çš„åŠŸèƒ½ï¼š <br><br><pre> <code class="hljs lisp">PHP_FUNCTION(<span class="hljs-name"><span class="hljs-name">my_array_fill</span></span>)</code> </pre><br> å¦‚æ‚¨æ‰€è§ï¼Œå®ƒä¹Ÿæ˜¯é€šè¿‡å®åˆå§‹åŒ–çš„ã€‚ äº‹å®æ˜¯ï¼Œæ‰€æœ‰phpå‡½æ•°éƒ½ä¸ä¼šåœ¨Cå†…éƒ¨è¿”å›ä»»ä½•å†…å®¹ï¼ˆç¡®åˆ‡åœ°è¯´ï¼Œè¿”å›voidï¼‰ï¼Œå¹¶ä¸”ä¸èƒ½æ›´æ”¹å…¶å‚æ•°ã€‚ åœ¨æŸä¸ªåœ°æ–¹ç”šè‡³æ›´æ–¹ä¾¿ã€‚ <br><br> å¦‚æœæ‚¨æŸ¥çœ‹æ–‡ä»¶ç»“æ„ï¼ˆå·¦ä¾§çª—å£çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œåˆ™ä¼šåœ¨æ­¤å¤„åˆ—å‡ºæ–‡ä»¶çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†ä»¥åœ¨é¢„ç¼–è¯‘å®åçš„å½¢å¼æ˜¾ç¤ºå®ƒä»¬ã€‚ å±å¹•å¿«ç…§æ˜¾ç¤ºæˆ‘ä»¬çš„å‡½æ•°my_array_fillå®é™…ä¸Šå°†æ˜¯zif_my_array_fillã€‚ <br><br><img src="https://habrastorage.org/webt/ur/cl/m4/urclm4yrxdayv7heohr0puutrm8.png"><br><br> ä»phpçš„å‚æ•°åˆ°æˆ‘ä»¬çš„Cå‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå®ã€‚ å¯ä»¥åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°æœ‰å…³æ­¤å®çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š <br><br><pre> <code class="bash hljs">/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/src/php-7.2.11/README.PARAMETER_PARSING_API</code> </pre><br> ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„æ¨¡æ‹ŸåŠŸèƒ½ä»£ç ï¼Œå¹¶é™„æœ‰è¯¦ç»†è¯´æ˜ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="hljs ruby">PHP_FUNCTION(my_array_fill) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   ,     /<span class="hljs-regexp"><span class="hljs-regexp">/    2 : /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ zend_execute_data *execute_data, zval *return_value /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     ,      /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/zend_long  int64_t  x64   int32_t  x86  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      zend_long zend_long start_index; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/1  , zend_long num; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/2   zval *value; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   mixed ,   zval,      /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    ,          if (zend_parse_parameters(ZEND_NUM_ARGS(), "llz", &amp;start_index, &amp;num, &amp;value) == FAILURE) { /</span></span>*     *    RETURN<span class="hljs-number"><span class="hljs-number">_</span></span>    * return_value     *<span class="hljs-regexp"><span class="hljs-regexp">/ RETURN_FALSE; } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   ,   -    if (num &lt;= 0) { php_error_docref(NULL TSRMLS_CC, E_WARNING, "argument 2 must be &gt; 0"); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     RETURN_FALSE; } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/zval *return_value  ,        /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/       zval,     ,  -  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   zend_long  unsigned int32. /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      + -. ..   1,    3,     4  array_init_size(return_value, (uint32_t)(start_index + num)); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,   ,   for(zend_long i = start_index, last = start_index + num; i &lt; last; ++i) { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   zval       add_index_zval(return_value, i, value); } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   ,      return_value return; }</span></span></code> </pre><br></div></div><br><br><br><h2> æ„å»ºå’Œæµ‹è¯•æ‰©å±• </h2><br> é¦–å…ˆï¼Œè¿è¡Œphpizeï¼Œè¿™å°†ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ã€‚ <br><br><pre> <code class="bash hljs">phpize</code> </pre><br> ç°åœ¨è¿è¡Œ./configureï¼Œå®ƒå°†ç”Ÿæˆmakefileã€‚ <br><br><pre> <code class="bash hljs">./configure</code> </pre><br> æœ€åï¼Œè¿è¡Œmakeï¼Œå®ƒå°†æ”¶é›†æˆ‘ä»¬çš„æ‰©å±•åã€‚ <br><br><pre> <code class="bash hljs">make</code> </pre><br> è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬åšäº†ä»€ä¹ˆã€‚ <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    php,       # modules.  -a  php      php -d extension=modules/libtrie.so -a</span></span></code> </pre><br> æˆ‘ä»¬è¾“å…¥phpæ§åˆ¶å°ï¼š <br><br><pre> <code class="php hljs">print_r(my_array_fill(<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"hello, baby!"</span></span>));</code> </pre><br> äº«å—ç»“æœã€‚ <br><br><img src="https://habrastorage.org/webt/gn/sx/cy/gnsxcy1ihjtn6tgm7mpqjsz9hl4.png"><br><br> æœ‰äººé—®ï¼Œç‰¹é‡Œåœ¨å“ªé‡Œï¼Ÿ å…³äºå®ç°trieå·¥ä½œçš„å‡½æ•°ï¼Œæˆ‘å°†åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­ç¼–å†™ã€‚ <br><br>  <b>è¯·ç»§ç»­å…³æ³¨ã€‚</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428626/">https://habr.com/ru/post/zh-CN428626/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428612/index.html">JavaScriptä¸­çš„é«˜é˜¶å‡½æ•°ï¼šè¿™æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="../zh-CN428614/index.html">æ˜ŸæœŸäº” ç¨‹åºå‘˜çš„ç‹‚æ¬¢4.2</a></li>
<li><a href="../zh-CN428616/index.html">ä½¿ç”¨Google Appsè„šæœ¬å°†XLSæ–‡ä»¶è½¬æ¢ä¸ºGoogle Spreadsheet</a></li>
<li><a href="../zh-CN428620/index.html">å¦‚ä½•åˆ›å»ºRoguelike</a></li>
<li><a href="../zh-CN428624/index.html">Jeffrey Richterï¼ŒPavel Yosifovichï¼ŒGreg Youngå’Œæ‰€æœ‰äººã€‚ DotNext 2018è«æ–¯ç§‘çš„ç¡¬æ ¸å’Œå»ºç­‘</a></li>
<li><a href="../zh-CN428628/index.html">ä½¿ç”¨æŠ½è±¡çš„JavaScriptè¯­æ³•æ ‘</a></li>
<li><a href="../zh-CN428630/index.html">ä¸ï¼Œåˆ°2033å¹´ï¼Œæ¯”ç‰¹å¸ä¸ä¼šç ´åæˆ‘ä»¬çš„æ°”å€™ã€‚</a></li>
<li><a href="../zh-CN428632/index.html">åœ¨Reactä¸­å¤„ç†æ‹¦æˆªå™¨</a></li>
<li><a href="../zh-CN428634/index.html">ç§»æ¤Quake3</a></li>
<li><a href="../zh-CN428636/index.html">Roskomnadzorå°†å‘Googleå¤„ä»¥ç½šæ¬¾</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>