<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅง ๐ง๐ฝ ๐งฆ ููุณ ORM ูุงุญุฏ โป๏ธ ๐๐ฝ ๐ฆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุณ ORM ูุงุญุฏ 


 ูุฑุญุจุง ุจุงูุฌููุน! ุฃูุง ุงููุณุคูู ุนู ูุณู ุชุทููุฑ ุงูุดุฑูุงุก ูู ุฎุฏูุฉ ุญุฌุฒ ุงูููุงุฏู ูู Ostrovok.ru . ูู ูุฐู ุงูููุงูุฉ ุ ุฃูุฏ ุฃู ุฃุชุญุฏุซ ุนู ุงูุทุฑููุฉ ุงูุชู ุงุณ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุณ ORM ูุงุญุฏ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ostrovok/blog/447706/" style=";text-align:right;direction:rtl"><h1 id="ne-ormom-edinym" style=";text-align:right;direction:rtl">  ููุณ ORM ูุงุญุฏ </h1><br><p style=";text-align:right;direction:rtl">  ูุฑุญุจุง ุจุงูุฌููุน!  ุฃูุง ุงููุณุคูู ุนู ูุณู ุชุทููุฑ ุงูุดุฑูุงุก ูู ุฎุฏูุฉ ุญุฌุฒ ุงูููุงุฏู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ostrovok.ru</a> .  ูู ูุฐู ุงูููุงูุฉ ุ ุฃูุฏ ุฃู ุฃุชุญุฏุซ ุนู ุงูุทุฑููุฉ ุงูุชู ุงุณุชุฎุฏููุง ุจูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Django ORM</a> ูู ูุดุฑูุน ูุงุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ููุช ุฃุฎุฏุน ุ ูุงู ูุฌุจ ุฃู ูููู ุงูุงุณู " <del>  ููุณ </del>  ORM single ". ุฅุฐุง ููุช ุชุชุณุงุกู ููุงุฐุง ูุชุจุช ูุฐุง ุ ููุฐูู ุฅุฐุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> ูุฏูู Django ุนูู ุงูููุฏุณ ุ ูุชุฑูุฏ ุถุบุท ุงูุญุฏ ุงูุฃูุตู ูู ORM ุ ูููุณ ููุท <code>Model.objects.all()</code> ุ </li><li style=";text-align:right;direction:rtl">  ุชุฑูุฏ ููู ุฌุฒุก ูู ููุทู ุงูุนูู ุฅูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ </li><li style=";text-align:right;direction:rtl">  ุฃู ูู ุชุฑุบุจ ูู ูุนุฑูุฉ ุงูุณุจุจ ุงูุฃูุซุฑ ุนุฐุฑูุง ูููุทูุฑูู ูู B2B.Ostrovok.ru ูู <em>"ุชุงุฑูุฎูุงู"</em> ุ </li></ul><br><p style=";text-align:right;direction:rtl">  ... ูุฑุญุจุง ุจูู ูู ุงููุท. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/66b/308/b1c/66b308b1cd5afefead46ef7bffdbbddf.jpg" alt="kdpv"></p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ูู ุนุงู 2014 ุ ุฃุทูููุง B2B.Ostrovok.ru - ุฎุฏูุฉ ุงูุญุฌุฒ ุนุจุฑ ุงูุฅูุชุฑูุช ููููุงุฏู ูุงูููู ูุงูุชุญูููุงุช ูุฎุฏูุงุช ุงูุณูุฑ ุงูุฃุฎุฑู ูููุญุชุฑููู ูู ุณูู ุงูุณูุงุญุฉ (ูููุงุก ุงูุณูุฑ ูุงููุดุบููู ูุนููุงุก ุงูุดุฑูุงุช). </p><br><p style=";text-align:right;direction:rtl">  ูู B2B ุ ูููุง ุจุชุตููู ูููุฐุฌ ุทูุจ ูุฌุฑุฏุฉ ูุงุณุชุฎุฏุงูู ุจูุฌุงุญ ุจูุงุกู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>GenericForeignKey</code></a> - meta - <code>MetaOrder</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ุฃูุฑ ุงูุชุนุฑูู ููุงููุง ูุฌุฑููุฏูุง ูููู ุงุณุชุฎุฏุงูู ุจุบุถ ุงููุธุฑ ุนู ููุน ุงูุทูุจ ุงูุฐู ููุชูู ุฅููู: ููุฏู ( <code>Hotel</code> ) ุฃู ุฎุฏูุฉ ุฅุถุงููุฉ ( <code>Upsell</code> ) ุฃู ุณูุงุฑุฉ ( <code>Car</code> ).  ูู ุงููุณุชูุจู ุ ูุฏ ุชุธูุฑ ุฃููุงุน ุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ููู ุงูุญุงู ุฏุงุฆูุง.  ุนูุฏูุง ุชู ุฅุทูุงู ุฎุฏูุฉ B2B ุ ูููู ุญุฌุฒ ุงูููุงุฏู ููุท ูู ุฎูุงููุง ุ ููุงู ูู ููุทู ุงูุนูู ูุฑูุฒ ุนูููุง.  ุชู ุฅูุดุงุก ุงูุนุฏูุฏ ูู ุงูุญููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุนุฑุถ ุฃุณุนุงุฑ ุตุฑู ูุจูุบ ุงููุจูุนุงุช ููุจูุบ ุงุณุชุฑุฏุงุฏ ุงูุญุฌุฒ.  ุจูุฑูุฑ ุงูููุช ุ ุฃุฏุฑููุง ุฃูุถู ุทุฑููุฉ ูุชุฎุฒูู ูุฐู ุงูุจูุงูุงุช ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ุ ุจุงููุธุฑ ุฅูู ุฃูุงูุฑ ุงูุชุนุฑูู.  ููู ูุง ูููู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูููุฏ ุจุงููุงูู ุ ูุฌุฒุก ูู ูุฐุง ุงูุชุฑุงุซ ุฏุฎู ูู ุงูุนูุงุฑุฉ ุงูุฌุฏูุฏุฉ.  ูู ุงููุงูุน ุ ุฃุฏู ุฐูู ุฅูู ุตุนูุจุงุช ูู ุงูุญุณุงุจุงุช ุ ูุงูุชู ุชุณุชุฎุฏู ุนุฏุฉ ุฃููุงุน ูู ุงูุทูุจุงุช.  ูุง ูุฌุจ ุงูููุงู ุจู - <em>ุชุงุฑูุฎูุง</em> ... </p><br><p style=";text-align:right;direction:rtl">  ูุฏูู ูู ุฅุธูุงุฑ ููุฉ Django ORM ูู ูุซุงููุง. </p><br><h2 id="predystoriya" style=";text-align:right;direction:rtl">  ูุจู ุงูุชุงุฑูุฎ </h2><br><p style=";text-align:right;direction:rtl">  ููุชุฎุทูุท ููููุงุชูู ุ ููุชูุฑ ุนููุงุคูุง B2B ุฅูู ูุนูููุงุช ุญูู ููุฏุงุฑ ูุง ูุญุชุงุฌูู ุฅูู ุฏูุนู ุงูุขู / ุบุฏูุง / ูุงุญููุง ุ ููุง ุฅุฐุง ูุงูุช ูุฏููู ุฏููู ูุณุชุญูุฉ ุนูู ุงูุทูุจุงุช ูููุฏุงุฑูุง ุ ูุฃูุถูุง ูุง ูููููู ุฅููุงูู ูู ุญุฏูุฏ ุญุฏูุฏูู.  ูุฑุฑูุง ุฅุธูุงุฑ ูุฐู ุงููุนูููุงุช ูู ุดูู ููุญุฉ ูุนูููุงุช - ูุซู ุงูููุจุณ ุงูุจุณูุท ุฐู ุงูุฑุณู ุงูุชุฎุทูุทู ุงููุงุถุญ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/2a/rj/yo/2arjyoaa9_xfe8ddcaz5qn4w5mu.gif" alt="dash1"><br>  <em>(ุฌููุน ุงูููู ูู ุงุฎุชุจุงุฑ ููุง ุชูุทุจู ุนูู ุดุฑูู ูุญุฏุฏ)</em> </p><br><p style=";text-align:right;direction:rtl">  ูููููุฉ ุงูุฃููู ุ ูู ุดูุก ุจุณูุท ููุบุงูุฉ - ูููู ุจุชุตููุฉ ุฌููุน ุทูุจุงุช ุงูุดุฑูู ูุชูุฎูุตูุง ูุฅุธูุงุฑูุง. </p><br><h2 id="varianty-resheniya" style=";text-align:right;direction:rtl">  ุฎูุงุฑุงุช ุงูุญู </h2><br><p style=";text-align:right;direction:rtl">  ุดุฑุญ ุจุณูุท ุญูู ููููุฉ ุฅุฌุฑุงุก ุงูุญุณุงุจุงุช.  ูุญู ุดุฑูุฉ ุฏูููุฉ ุ ูุดุฑูุงุคูุง ูู ูุฎุชูู ุงูุจูุฏุงู ูููููู ุจุนูููุงุช - ุดุฑุงุก ูุจูุน ุงูุญุฌูุฒุงุช - ุจุนููุงุช ูุฎุชููุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฌุจ ุฃู ูุชูููุง ุจูุงูุงุช ูุงููุฉ ุจุนููุชูู ุงููุฎุชุงุฑุฉ (ุนุงุฏุฉ ูุง ุชููู ูุญููุฉ).  ุณูููู ูู ุงูุบุจุงุก ูุบูุฑ ุงูุนููู ุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ ุนูู ุฃุณุนุงุฑ ุฌููุน ุงูุนููุงุช ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุงุฎุชูุงุฑ ุนููุฉ ูุฑุฌุนูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฑูุจู.  ูุจุงูุชุงูู ุ ููููู ุชุฎุฒูู ุฃุณุนุงุฑ ุฌููุน ุงูุนููุงุช ููุท ุนูู ุงูุฑูุจู.  ููููุง ูุฐูู ุ ุนูุฏูุง ูุฑุบุจ ุฃุญุฏ ุงูุดุฑูุงุก ูู ุงูุญุตูู ุนูู ููุฎุต ุ ูููู ุจุชุญููู ุงููุจุงูุบ ุจุงูุณุนุฑ ุงููุญุฏุฏ ูู ููุช ุงูุจูุน. </p><br><h3 id="v-lob" style=";text-align:right;direction:rtl">  "ูู ุงูุฌุจูุฉ" </h3><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ูุฐุง ูู <code>Model.objects.all()</code> ูุญููุฉ ุงูุดุฑูุท: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Model.objects.all () ูุน ุงูุธุฑูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">output</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(partner_id)</span></span></span><span class="hljs-function">:</span></span> today = dt.date.today() <span class="hljs-comment"><span class="hljs-comment"># query_get_one -    partner = query_get_one(Partner.objects.filter(id=partner_id)) #    -  query = MetaOrder.objects.filter(partner=partner) result = defaultdict(Decimal) for morder in query: #  ,     #     payment_pending = morder.get_payment_pending() payment_due = morder.get_payment_due() #        # (     ) payable = morder.get_payable_in_cur() #       if payment_pending &gt; today: result['payment_pending'] += payable # ,     if payment_pending &lt; today and payment_due &gt; today: result['payment_due'] += payable return result</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุณูุนูุฏ ูุฐุง ุงูุงุณุชุนูุงู ูููุฏ ูุญุชูู ุนูู ูุฆุงุช ุงูุญุฌูุฒุงุช ุงููุญุชููุฉ.  ุณูุชู ุชูุฏูู ุทูุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ูู ูุฐู ุงูุญุฌูุฒุงุช ุ ูุจุงูุชุงูู ุณุชูุฌุญ ุงูุฏูุฑุฉ ููุชุฑุฉ ุทูููุฉ ุฌุฏูุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุชุณุฑูุน ุงูุฃููุฑ ููููุงู ุนู ุทุฑูู ุฅุถุงูุฉ ุงูุฃุณููุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>prefetch_related</code></a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># object -      GenericForeignKey. query = query.prefetch_related('object')</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณูููู ููุงู ุนุฏุฏ ุฃูู ููููุงู ูู ุงูุทูุจุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ( <code>GenericForeignKey</code> ุนูู <code>GenericForeignKey</code> ) ุ ูููู ูุง ูุฒุงู ุ ูู ุงูููุงูุฉ ุ ุณูู ูุชููู ุนูุฏ ุนุฏุฏูุง ุ ูุฃู ุงูุทูุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณูุธู ูู ูู ุชูุฑุงุฑ ููุฏูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู (ููุฌุจ) ุชุฎุฒูููุง ูุคูุชูุง ูู ุทุฑููุฉ <code>output</code> ุ ูููู ูุง ูุฒุงู ุงููุฏุงุก ุงูุฃูู ููู ุจุชุฑุชูุจ ุฏูููุฉ ุ ููู ุฃูุฑ ุบูุฑ ููุจูู ุชูุงููุง. </p><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ูุชุงุฆุฌ ูุฐุง ุงูููุฌ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yz/ur/wq/yzurwquhxoeqczgncqi66je8570.png" alt="timing_before"></p><br><p style=";text-align:right;direction:rtl">  ูุชูุณุท โโููุช ุงูุงุณุชุฌุงุจุฉ ูู 4 ุซูุงู ุ ูููุงู ููู ุชุตู ุฅูู 21 ุซุงููุฉ.  ููุช ุทููู ุฌุฏุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุทุฑุญ ููุญุฉ ุงูููุงุฏุฉ ูุฌููุน ุงูุดุฑูุงุก ุ ูุจุงูุชุงูู ูู ููู ูุฏููุง ุงููุซูุฑ ูู ุงูุทูุจุงุช ูุฐูู ุ ูููู ูุง ูุฒุงู ูููู ุฃู ูููู ุฃู ูุซู ูุฐุง ุงูููุฌ ุบูุฑ ูุนุงู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/f0/rz/yn/f0rzynfsqypr3z0mh1cnwoi6ee0.png" alt="count_before"><br>  <em>ุงูุฃุฑูุงู ูู ุฃุณูู ุงููููู ูู ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช: ุงูุญุฏ ุงูุฃุฏูู ุ ุงูุญุฏ ุงูุฃูุตู ุ ุงููุชูุณุท โโุ ุงูุฅุฌูุงูู.</em> </p><br><h3 id="s-umom" style=";text-align:right;direction:rtl">  ูุน ุงูุนูู </h3><br><p style=";text-align:right;direction:rtl">  ูุงู ุงููููุฐุฌ ุงูุฃููู ููุฌุจูุฉ ุฌูุฏูุง ูููู ูุฏู ุชุนููุฏ ุงููููุฉ ุ ููููู ููุณ ูุซุงูููุง ููุงุณุชุฎุฏุงู.  ูุฑุฑูุง ุฃูู ุณูููู ุฃุณุฑุน ุจูุซูุฑ ูุฃูู ูุซุงูุฉ ูู ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ูุฌุนู ุงูุนุฏูุฏ ูู ุงูุงุณุชุนูุงูุงุช ุงููุนูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุนุฏูุฏ ูู ุงูุงุณุชุนูุงูุงุช ุงูุจุณูุทุฉ. </p><br><h4 id="plan-zaprosa" style=";text-align:right;direction:rtl">  ุทูุจ ุฎุทุฉ </h4><br><p style=";text-align:right;direction:rtl">  ูููู ูุตู ุงูุญุฏูุฏ ุงููุงุณุนุฉ ูุฎุทุฉ ุงูุงุณุชุนูุงู ุจุงูุดูู ุงูุชุงูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌูุน ุงูุทูุจุงุช ููููุง ููุดุฑูุท ุงูุฃูููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุญููู ููุญุณุงุจ ูู ุฎูุงู <code>annotate</code> ุ </li><li style=";text-align:right;direction:rtl">  ุญุณุงุจ ููู ุงูุญููู </li><li style=";text-align:right;direction:rtl">  ุฌุนู <code>aggregate</code> ุญุณุจ ุงููููุฉ ูุงููููุฉ </li></ul><br><h4 id="nachalnye-usloviya" style=";text-align:right;direction:rtl">  ุงูุธุฑูู ุงูุฃูููุฉ </h4><br><p style=";text-align:right;direction:rtl">  ูููู ููุดุฑูุงุก ุงูุฐูู ูุฒูุฑูู ุงููููุน ุงูุงุทูุงุน ุนูู ุงููุนูููุงุช ุงููุชุนููุฉ ุจุนููุฏูู ููุท. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">partner = query_get_one(Partner.objects.filter(id=partner_id))</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุนุฏู ุฑุบุจุชูุง ูู ุนุฑุถ ุฃููุงุน ุฌุฏูุฏุฉ ูู ุงูุทูุจุงุช / ุงูุญุฌูุฒุงุช ุ ูุญุชุงุฌ ููุท ุฅูู ุชุตููุฉ ุงูุทูุจุงุช ุงููุฏุนููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">query = MetaOrder.objects.filter( partner=partner, content_type__in=[ Hotel.get_content_type(), Car.get_content_type(), Upsell.get_content_type(), ] )</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุญุงูุฉ ุงูุทูุจ ูููุฉ (ุงููุฒูุฏ ุญูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Q</code></a> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">query = query.filter( Q(hotel__status__in=[<span class="hljs-string"><span class="hljs-string">'completed'</span></span>, <span class="hljs-string"><span class="hljs-string">'cancelled'</span></span>]) <span class="hljs-comment"><span class="hljs-comment">#     ,    # | Q(car__status__in=[...]) )</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุบุงูุจูุง ูุง ูุณุชุฎุฏู ุงูุทูุจุงุช ุงููุนุฏุฉ ูุณุจููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุงุณุชุจุนุงุฏ ุฌููุน ุงูุทูุจุงุช ุงูุชู ูุง ูููู ุฏูุนูุง.  ููุฌุฏ ุงููุซูุฑ ูู ููุทู ุงูุนูู ุ ููู ุฃูุฑ ุบูุฑ ูุซูุฑ ููุงูุชูุงู ุจุงููุณุจุฉ ููุง ูู ุฅุทุงุฑ ูุฐู ุงูููุงูุฉ ุ ูููู ูู ุฌููุฑูุง ูุฐู ูุฌุฑุฏ ุนูุงูู ุชุตููุฉ ุฅุถุงููุฉ.  ูุฏ ุชุจุฏู ุงูุทุฑููุฉ ุงูุชู ุชูุฑุฌุน ุงุณุชุนูุงููุง ุฌุงูุฒูุง ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">query = MetaOrder.exclude_non_payable_metaorders(query)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ุ ูุฐู ุทุฑููุฉ ุตููุฉ ุณุชูุฑุฌุน ุฃูุถูุง <code>QuerySet</code> . </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ุฃูุถูุง ุจุฅุนุฏุงุฏ ูุชุบูุฑูู ููุฅูุดุงุกุงุช ุงูุดุฑุทูุฉ ููุชุฎุฒูู ูุชุงุฆุฌ ุงูุญุณุงุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> dt <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> typing.decimal <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Decimal today = dt.date.today() result = defaultdict(Decimal)</code> </pre> <br><h4 id="podgotovka-poley-annotatehttpsdocsdjangoprojectcomen21refmodelsquerysetsannotate" style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงููุฌุงู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>annotate</code></a> ) </h4><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุญูููุฉ ุฃููุง ูุฌุจ ุฃู ูุดูุฑ ุฅูู ุงูุญููู ููููุง ูููุน ุงูุทูุจ ุ ุณูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Coalesce</code></a> .  ูุจุงูุชุงูู ุ ูููููุง ุชุฌุฑูุฏ ุฃู ุนุฏุฏ ูู ุฃููุงุน ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ูู ุญูู ูุงุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ููุง ูู ุงูุฌุฒุก ุงูุฃูู ูู ูุชูุฉ <code>annotate</code> : </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃูู ุชุนููู ุชูุถูุญู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     , #      from app.helpers.numbers import ZERO, ONE query_annoted = query.annotate( _payment_pending=Coalesce( 'hotel__payment_pending', 'car__payment_pending', 'upsell__payment_pending', ), _payment_due=Coalesce( 'hotel__payment_due', 'car__payment_due', 'upsell__payment_due', ), _refund=Coalesce( 'hotel__refund', Value(ZERO) ), _refund_currency_rate=Coalesce( 'hotel__refund_currency_rate', Value(ONE) ), _sell=Coalesce( 'hotel__sell', Value(ZERO) ), _sell_currency_rate=Coalesce( 'hotel__sell_currency_rate', Value(ONE) ), )</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุชุนูู <code>Coalesce</code> ููุง ูุน ุงุซุงุฑุฉ ุถุฌุฉ ุ ูุฃู ุทูุจุงุช ุงูููุงุฏู ููุง ุงูุนุฏูุฏ ูู ุงูุฎุตุงุฆุต ุงูุฎุงุตุฉ ุ ููู ุฌููุน ุงูุญุงูุงุช ุงูุฃุฎุฑู (ุงูุฎุฏูุงุช ูุงูุณูุงุฑุงุช ุงูุฅุถุงููุฉ) ูุฐู ุงูุฎุตุงุฆุต ููุณุช ูููุฉ ุจุงููุณุจุฉ ููุง.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุชุธูุฑ ุจูุง <code>Value(ZERO)</code> ูููุจุงูุบ <code>Value(ONE)</code> ูุฃุณุนุงุฑ ุงูุตุฑู.  <code>ZERO</code> ู <code>ONE</code> <code>Decimal('0')</code> <code>Decimal(1)</code> ุ ููุท ูู ุดูู ุซูุงุจุช.  ููุฌ ุงูููุงุฉ ุ ูููู ูู ูุดุฑูุนูุง ูู ููุจูู ูู ูุฐุง ุงููุจูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ูููู ูุฏูู ุณุคุงู ุ ููุงุฐุง ูุง ุชุถุน ุจุนุถ ุงูุญููู ูู ูุณุชูู ูุงุญุฏ ุจุชุฑุชูุจ ุงูุชุนุฑููุ  ุนูู ุณุจูู ุงููุซุงู ุ <code>payment_pending</code> ุ ููู ูู ูู ููุงู.  ูู ุงููุงูุน ุ ูุน ูุฑูุฑ ุงูููุช ุ ูููู ุจููู ูุฐู ุงูุญููู ุฅูู ุชุฑุชูุจ ููุชุง ุ ูููู ุงูุดูุฑุฉ ุชุนูู ุงูุขู ุจุดูู ุฌูุฏ ุ ูุจุงูุชุงูู ูุฅู ูุฐู ุงูููุงู ููุณุช ูู ุฃููููุงุชูุง. </p><br><h4 id="esche-odna-podgotovka-i-raschety" style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุขุฎุฑ ูุงูุญุณุงุจุงุช </h4><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุงูุขู ุฅูู ุฅุฌุฑุงุก ุจุนุถ ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุจุงููุจุงูุบ ุงูุชู ุชููููุงูุง ูู ุขุฎุฑ <code>annotate</code> .  ูุงุญุธ ุฃูู ูู ุชุนุฏ ุจุญุงุฌุฉ ุฅูู ุงูุงุฑุชุจุงุท ุจููุน ุงูุทูุจ (ุจุงุณุชุซูุงุก ุงุณุชุซูุงุก ูุงุญุฏ). </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุชุนููู ุงูุชูุถูุญู ุงูุซุงูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs">.annotate( <span class="hljs-comment"><span class="hljs-comment">#  _base     _sell_base=( F('_sell') * F('_sell_currency_rate') ), _refund_base=( F('_refund') * F('_refund_currency_rate') ), _payable_base=( F('_sell_base') - F('_refund_base') ), _reporting_currency_rate=Case( When( content_type=Hotel.get_content_type(), then=RawSQL( '(hotel.currency_data-&gt;&gt;%s)::numeric', (partner.reporting_currency,), ), ), output_field=DecimalField(), default=Decimal('1'), ), )</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงูุฌุฒุก ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ูู ูุฐุง ุงูุญุธุฑ ูู ุงูุญูู <code>_reporting_currency_rate</code> ุ ุฃู ุณุนุฑ ุงูุตุฑู ููุนููุฉ ุงููุฑุฌุนูุฉ ูู ููุช ุงูุจูุน.  ูุชู ุชุฎุฒูู ุงูุจูุงูุงุช ุนูู ุฃุณุนุงุฑ ุตุฑู ุฌููุน ุงูุนููุงุช ุฅูู ุงูุนููุฉ ุงููุฑุฌุนูุฉ ูุทูุจ ููุฏู ูู <code>currency_data</code> .  ูุฐุง ูุฌุฑุฏ ุฌุณูู.  ููุงุฐุง ูุญุงูุธ ุนูู ูุฐุงุ  <em>ูุฐุง ูู ุงูุญุงู ุชุงุฑูุฎูุง</em> . </p><br><p style=";text-align:right;direction:rtl">  ูููุง ุ ุนูู ูุง ูุจุฏู ุ ููุงุฐุง ูุง ุชุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>F</code></a> ูุงุณุชุจุฏู ูููุฉ ุนููุฉ ุงูุนูุฏุ  ุจูุนูู ุฃูู ุณูููู ุฑุงุฆุนูุง ุฅุฐุง ุฃูููู ุงูููุงู ุจุฐูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">F(<span class="hljs-string"><span class="hljs-string">f'currency_data__</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{partner.reporting_currency}</span></span></span><span class="hljs-string">'</span></span>)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู <code>f-strings</code> ุบูุฑ ูุฏุนููุฉ ูู <code>F</code>  ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู Django ORM ูุฏูู ุจุงููุนู ุงููุฏุฑุฉ ุนูู ุงููุตูู ุฅูู ุญููู json ุงููุชุฏุงุฎูุฉ ุ ุฅูุง ุฃูู ุฃูุฑ ุฑุงุฆุน ููุบุงูุฉ - <code>F('currency_data__USD')</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุขุฎุฑ ูุชูุฉ <code>annotate</code> ูู ุญุณุงุจ <code>_payable_in_cur</code> ุ ูุงูุฐู ุณูุชู ุชูุฎูุตู ูุฌููุน ุงูุทูุจุงุช.  ูุฌุจ ุฃู ุชููู ูุฐู ุงููููุฉ ูู ุนููุฉ ุงูุนูุฏ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/3g/hi/rd/3ghirdq4rnexrp2vnhwucju7rkw.png" alt="dash2"></p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">.annotate( _payable_in_cur=( F(<span class="hljs-string"><span class="hljs-string">'_payable_base'</span></span>) / F(<span class="hljs-string"><span class="hljs-string">'_reporting_currency_rate'</span></span>) ) )</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅู ุฎุตูุตูุฉ ุทุฑููุฉ <code>annotate</code> ูู ุฃูู ูููุฏ ุงููุซูุฑ ูู <code>SELECT something AS something_else</code> ุฅูุดุงุก <code>SELECT something AS something_else</code> ุบูุฑ ูุจุงุดุฑ ุจุดูู ูุจุงุดุฑ ูู ุงูุทูุจ.  ูููู ููุงุญุธุฉ ุฐูู ุนู ุทุฑูู ุฅูุบุงุก ุชุญููู ุงุณุชุนูุงู SQL - <code>query.__str__()</code> . </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐุง ูู ูุง ูุจุฏู ุนููู</a> ููุฏ SQL ุงูุฐู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ Django ORM ูู <code>base_query_annotated</code> .  ุนููู ุฃู ุชูุฑุฃูุง ูุซูุฑูุง ุญุชู ุชููู ุฃูู ููููู ุชุญุณูู ุงุณุชูุณุงุฑู. </p><br><h4 id="zaklyuchitelnye-podschety" style=";text-align:right;direction:rtl">  ุงูุญุณุงุจุงุช ุงูููุงุฆูุฉ </h4><br><p style=";text-align:right;direction:rtl">  ุณูููู ููุงู ุบูุงู ุตุบูุฑ <code>aggregate</code> ุ ุจุญูุซ ูู ุงููุณุชูุจู ุ ุฅุฐุง ูุงู ุงูุดุฑูู ูุญุชุงุฌ ุฅูู ุจุนุถ ุงูููุงููุณ ุงูุฃุฎุฑู ุ ููููู ุฅุถุงูุชู ุจุณูููุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ky/qm/pi/kyqmpiht-jwpwuripuf6wlfiqv0.png" alt="dash3"></p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_data_from_query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: QuerySet)</span></span></span><span class="hljs-function"> -&gt; Decimal:</span></span> result = query.aggregate( _sum_payable=Sum(F(<span class="hljs-string"><span class="hljs-string">'_payable_in_cur'</span></span>)), ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result[<span class="hljs-string"><span class="hljs-string">'_sum_payable'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> ZERO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุดูุก ุขุฎุฑ - ูุฐุง ูู ุงูุชุตููุฉ ุงูุฃุฎูุฑุฉ ุญุณุจ ุญุงูุฉ ุงูุนูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุญุชุงุฌ ุฅูู ุฌููุน ุงูุทูุจุงุช ุงูุชู ูุชุนูู ุฏูุนูุง ูุฑูุจูุง. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xz/rj/ss/xzrjssl1barwnpvtegjkg1tkvs0.png" alt="dash4"></p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">before_payment_pending_query = _get_data_from_query( base_query_annotated.filter(_payment_pending__gt=today) )</code> </pre> <br><h4 id="otladka-i-proverka" style=";text-align:right;direction:rtl">  ุงูุชุตุญูุญ ูุงูุชุญูู </h4><br><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ููุงุฆูุฉ ููุบุงูุฉ ููุชุญูู ูู ุตุญุฉ ุงูุทูุจ ุงูุฐู ุชู ุฅูุดุงุคู ุชุชูุซู ูู ููุงุฑูุชู ุจุฅุตุฏุงุฑ ุฃูุซุฑ ูุงุจููุฉ ูููุฑุงุกุฉ ููุญุณุงุจุงุช. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> morder <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> query: payable = morder.get_payable_in_cur() payment_pending = morder.get_payment_pending() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> payment_pending &gt; today: result[<span class="hljs-string"><span class="hljs-string">'payment_pending'</span></span>] += payable</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุชุนุฑู ุทุฑููุฉ "ุงูุฌุจูู"ุ </p><br><h3 id="finalnyy-kod" style=";text-align:right;direction:rtl">  ุงูุฑูุฒ ุงูููุงุฆู </h3><br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู ุดูุก ูุซู ุงูุชุงูู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุฑูุฒ ุงูููุงุฆู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_data_from_query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: QuerySet)</span></span></span><span class="hljs-function"> -&gt; tuple:</span></span> result = query.aggregate( _sum_payable=Sum(F(<span class="hljs-string"><span class="hljs-string">'_payable_in_cur'</span></span>)), ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result[<span class="hljs-string"><span class="hljs-string">'_sum_payable'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> ZERO <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">output</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(partner_id: int)</span></span></span><span class="hljs-function">:</span></span> today = dt.date.today() partner = query_get_one(Partner.objects.filter(id=partner_id)) query = MetaOrder.objects.filter(partner=partner, content_type__in=[ Hotel.get_content_type(), Car.get_content_type(), Upsell.get_content_type(), ]) result = defaultdict(Decimal) query_annoted = query.annotate( _payment_pending=Coalesce( <span class="hljs-string"><span class="hljs-string">'hotel__payment_pending'</span></span>, <span class="hljs-string"><span class="hljs-string">'car__payment_pending'</span></span>, <span class="hljs-string"><span class="hljs-string">'upsell__payment_pending'</span></span>, ), _payment_due=Coalesce( <span class="hljs-string"><span class="hljs-string">'hotel__payment_due'</span></span>, <span class="hljs-string"><span class="hljs-string">'car__payment_due'</span></span>, <span class="hljs-string"><span class="hljs-string">'upsell__payment_due'</span></span>, ), _refund=Coalesce( <span class="hljs-string"><span class="hljs-string">'hotel__refund'</span></span>, Value(ZERO) ), _refund_currency_rate=Coalesce( <span class="hljs-string"><span class="hljs-string">'hotel__refund_currency_rate'</span></span>, Value(Decimal(<span class="hljs-string"><span class="hljs-string">'1'</span></span>)) ), _sell=Coalesce( <span class="hljs-string"><span class="hljs-string">'hotel__sell'</span></span>, Value(ZERO) ), _sell_currency_rate=Coalesce( <span class="hljs-string"><span class="hljs-string">'hotel__sell_currency_rate'</span></span>, Value(Decimal(<span class="hljs-string"><span class="hljs-string">'1'</span></span>)) ), ).annotate( <span class="hljs-comment"><span class="hljs-comment"># Calculated fields _sell_base=( F('_sell') * F('_sell_currency_rate') ), _refund_base=( F('_refund') * F('_refund_currency_rate') ), _payable_base=( F('_sell_base') - F('_refund_base') ), _reporting_currency_rate=Case( # Only hotels have currency_data, therefore we need a # check and default value When( content_type=Hotel.get_content_type(), then=RawSQL( '(hotel.currency_data-&gt;&gt;%s)::numeric', (partner.reporting_currency,), ), ), output_field=DecimalField(), default=Decimal('1'), ), ) .annotate( _payable_in_cur=( F('_payable_base') / F('_reporting_currency_rate') ) ) before_payment_pending_query = _get_data_from_query( base_query_annotated.filter(_payment_pending__gt=today) ) after_payment_pending_before_payment_due_query = _get_data_from_query( base_query_annotated.filter( Q(_payment_pending__lte=today) &amp; Q(_payment_due__gt=today) ) )</span></span></code> </pre></div></div><br><p style=";text-align:right;direction:rtl">  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุชุนูู ุงูุขู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xg/1i/rf/xg1irfnazuk-rqk14wdlxn32nhi.png" alt="timing_after"></p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/mt/k7/cq/mtk7cqefuzlx96roihjpgvpeaz8.png" alt="count_after"></p><br><h2 id="vyvody" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h2><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูููุทู ูุชุญุณููู ุ ุชูููุง ูู ุฅุฌุฑุงุก ูุนุงูุฌุฉ ุณุฑูุนุฉ ุฅูู ุญุฏ ูุง ููููุงููุณ ุงูุชุงุจุนุฉ ูุชูููู ุนุฏุฏ ุงูุงุณุชุนูุงูุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ูุจูุฑ.  ุชุจูู ุฃู ุงูุญู ุฌูุฏ ุ ูุณูู ูุนูุฏ ุงุณุชุฎุฏุงู ูุฐุง ุงูููุทู ูู ุฃุฌุฒุงุก ุฃุฎุฑู ูู ุงููุดุฑูุน.  ORM ูู ูู ุดูุก ูุฏููุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุจ ุชุนูููุงุช ุ ุงุทุฑุญ ุฃุณุฆูุฉ - ุณูุญุงูู ุงูุฅุฌุงุจุฉ!  ุดูุฑุง ูู </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar447706/">https://habr.com/ru/post/ar447706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar447696/index.html">ููุงุฐุง ุชุนุงุฑุถ ุงููุฏู Amazon Go ุ ุฃูู ูุชุงุฌุฑ ุบูุฑ ููุฏูุฉ</a></li>
<li><a href="../ar447698/index.html">ุฑูุฏ ููุฌูุฑุชุณ: ุฃูุงุฏููู ุจุฏูู ุฏุจููู</a></li>
<li><a href="../ar447700/index.html">ุงููุฑููุฉ ุงูุนุงุทููุฉ ูู ููุชุงุญ ุงูููู ุงูุดุฎุตู.</a></li>
<li><a href="../ar447702/index.html">ุงูุฏุงุฆุฑุฉ ุงูุฑูุงุถูุฉ ุงููุซุงููุฉ ุบูุฑ ููุฌูุฏุฉ</a></li>
<li><a href="../ar447704/index.html">ุชุณูู Elbrus - ุงุณุชุทูุงุน ูู ุงููุนุฑูุฉ. ุงูุฌุฒุก ุงูููู 1. ุงูุณุฌูุงุช ูุงููุฏุงุฎู ูุงูุชูุงุตูู ุงููููุฉ ุงูุฃุฎุฑู</a></li>
<li><a href="../ar447708/index.html">ูุฏูุช ูุงูุฏูุณ ููุนููุงุก ุงูุดุจุงุจ ูุงููุงุฏุฉ ุงูุนููููู ุฃูู ุฌูุงุฆุฒ ุฅูููุง ุณูุฌุงููููุชุด</a></li>
<li><a href="../ar447712/index.html">ูุฑุญุจุง ุ ุงุฏุงุฑุฉ ุงูุนูุงูุงุช ูุน | ุงุฏุงุฑุฉ ุงูุนูุงูุงุช ุงูุฑูุณูุฉ 2018 - ุงููุชุงุฆุฌ</a></li>
<li><a href="../ar447714/index.html">ุญูู ุชุทุจูู ูุธุฑูุฉ ุนูููุงุช ARMA ูู ุงูููุงุฑุณุฉ ุงูููุฏุณูุฉ</a></li>
<li><a href="../ar447716/index.html">ุงููุญุฏุฉ: ุงุฑุณู ุงูุนุฏูุฏ ูู ุงูุญุงูุงุช ุงูุตุญูุฉ ูู ูุนุจุฉ ูุงุญุฏุฉ</a></li>
<li><a href="../ar447718/index.html">ูู ุดูุก ุณูู ูุฐูุจ ูููุง ููุฎุทุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>