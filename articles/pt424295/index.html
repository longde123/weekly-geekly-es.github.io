<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõë üìï üßúüèª Curso MIT "Seguran√ßa de sistemas de computadores". Aula 9: Seguran√ßa de Aplicativos Web, Parte 2 ‚úäüèø üï£ üç©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula n¬∫ 6.858. "Seguran√ßa de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguran√ßa de sistemas de computadores". Aula 9: Seguran√ßa de Aplicativos Web, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424295/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula n¬∫ 6.858.  "Seguran√ßa de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security √© um curso sobre o desenvolvimento e implementa√ß√£o de sistemas de computador seguros.  As palestras abrangem modelos de amea√ßas, ataques que comprometem a seguran√ßa e t√©cnicas de seguran√ßa baseadas em trabalhos cient√≠ficos recentes.  Os t√≥picos incluem seguran√ßa do sistema operacional (SO), recursos, gerenciamento de fluxo de informa√ß√µes, seguran√ßa de idiomas, protocolos de rede, seguran√ßa de hardware e seguran√ßa de aplicativos da web. <br><br>  Palestra 1: ‚ÄúIntrodu√ß√£o: modelos de amea√ßas‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: ‚ÄúControle de ataques de hackers‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: ‚ÄúEstouros de Buffer: Explora√ß√µes e Prote√ß√£o‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: ‚ÄúSepara√ß√£o de Privil√©gios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: ‚ÄúSandbox do Cliente Nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: ‚ÄúModelo de Seguran√ßa de Rede‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: ‚ÄúSeguran√ßa de aplicativos da Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Por exemplo, o Django pega esses colchetes angulares, os traduz para o formato HTML e refaz o restante dos caracteres.  Ou seja, se o valor do nome personalizado contiver colchetes angulares, aspas duplas e semelhantes, todos esses caracteres ser√£o exclu√≠dos.  Isso far√° com que o conte√∫do n√£o seja interpretado como c√≥digo HTML no lado do navegador do cliente. <br><br><img src="https://habrastorage.org/webt/bg/sq/ed/bgsqedpvcmvdbjwjps3a84ok0ow.jpeg"><br><br>  Portanto, agora sabemos que essa n√£o √© uma defesa muito confi√°vel contra alguns ataques de script entre sites.  O motivo, como mostramos no exemplo, √© que essas gram√°ticas para HTML, CSS e JavaScript s√£o t√£o complexas que podem facilmente confundir o analisador de navegador. <br><br>  Por exemplo, temos uma coisa muito comum feita dentro da estrutura do Django.  Ent√£o, voc√™ tem alguma fun√ß√£o div e queremos definir uma classe din√¢mica para ela.  Damos √† classe o valor de var, e assim por diante.  A id√©ia √© que, quando o Django processa isso, ele precisa descobrir qual √© o estilo atual e col√°-lo aqui. <br><br>  Nesse caso, um invasor pode criar uma string definindo essa classe, por exemplo, grava "classe 1".  Tudo vai bem at√© este ponto, porque parece uma express√£o CSS v√°lida. <br><br>  Mas o invasor coloca aqui o operador onclick, que √© igual ao c√≥digo JavaScript que faz a chamada do sistema. <br><br><img src="https://habrastorage.org/webt/xx/ix/6z/xxix6zb30_tylvsmsbrynpucipc.jpeg"><br><br>  Como isso est√° errado, o navegador deve parar por aqui.  Mas o problema √© que, se voc√™ j√° viu o HTML de uma p√°gina da Web real, tudo est√° quebrado e confuso, mesmo para sites leg√≠timos e "amig√°veis".  Portanto, se o navegador parar antes de cada express√£o HTML incorreta, nenhum site que voc√™ goste simplesmente nunca funcionar√°.  Se voc√™ quiser se decepcionar com o mundo e eu n√£o o ajudar, basta abrir o console do JavaScript no navegador ao visualizar o site para ver quantos erros ele causar√°. <br><br>  Voc√™ pode, por exemplo, acessar a CNN e ver quantos erros voc√™ recebe.  Sim, basicamente a CNN funciona, mas de maneira muito desigual.  Por exemplo, para abrir o Acrobat Reader, voc√™ precisa constantemente lan√ßar exce√ß√µes de ponteiro nulo e, ao mesmo tempo, se sentir√° um pouco enganado pela vida.  Mas, na Internet, aprendemos a aceitar isso sem muita indigna√ß√£o. <br>  Portanto, como os navegadores devem ser muito tolerantes com essas coisas, eles tentar√£o transformar c√≥digo malicioso em algo que lhes pare√ßa razo√°vel.  E essa √© a vulnerabilidade de seguran√ßa. <br><br>  √â assim que a desinfec√ß√£o do conte√∫do funciona, e ainda √© melhor que nada.  Ela pode pegar muitas coisas prejudiciais, mas n√£o pode se defender de tudo. <br><br>  H√° mais uma coisa em que pensar - o uso de uma linguagem de marca√ß√£o menos expressiva.  Vamos ver o que se entende. <br><br>  <b>P√∫blico-alvo:</b> o que devo fazer se a limpeza de conte√∫do n√£o funcionar? <br><br>  <b>Professor:</b> sim, isso √© poss√≠vel, por exemplo, neste caso, o Django n√£o poder√° determinar estaticamente que √© ruim.  Por exemplo, neste caso em particular.  Mas no caso em que insiro uma tag de imagem maliciosa ... <br><br>  <b>P√∫blico:</b> neste caso em particular, eu esperaria que a tarefa da classe estivesse entre aspas e, nesse caso, n√£o deveria ter nenhum efeito ... <br><br>  <b>Professor:</b> bem, veja bem, existem pequenos truques.  Supondo que a gram√°tica de HTML e CSS seja cuidadosamente definida, voc√™ pode imaginar um mundo em que os analisadores ideais possam, de alguma forma, capturar esses problemas ou transform√°-los em coisas normais.  Mas, de fato, a gram√°tica HTML e CSS sofrem de imprecis√µes.  Al√©m disso, os navegadores n√£o implementam especifica√ß√µes.  Portanto, se voc√™ usar gram√°tica menos expressiva, ser√° muito mais f√°cil higienizar o conte√∫do. <br><br>  Aqui o termo Markdown √© usado - "marca√ß√£o f√°cil de ler" em vez do termo Markup - marca√ß√£o comum.  A id√©ia principal do Markdown √© que ele foi projetado como uma linguagem que, por exemplo, permite que os usu√°rios publiquem coment√°rios, mas n√£o cont√©m a capacidade de usar uma tag vazia, suporte a applet e similares.  Portanto, no Markdown, na verdade, √© muito mais f√°cil identificar exclusivamente a gram√°tica e aplic√°-la. <br><br><img src="https://habrastorage.org/webt/pw/ul/9c/pwul9ccnk3ss1uycrvipf39mchu.jpeg"><br><br>  A desinfec√ß√£o √© muito mais f√°cil em uma linguagem simples do que em HTML, CSS e JavaScript completos.  E de certa forma, isso √© como a diferen√ßa entre entender o c√≥digo C e o c√≥digo Python.  Realmente h√° uma grande diferen√ßa na compreens√£o de uma linguagem mais expressiva.  Portanto, limitando a expressividade, voc√™ geralmente melhora a seguran√ßa. <br><br>  Para se proteger contra ataques de script entre sites, tamb√©m √© usado o CSP, Content Security Policy.  A id√©ia do CSP √© que ele permita que o servidor web ... <br>  P√∫blico: estou curioso para saber mais sobre essa linguagem do Markdown.  Todos os navegadores s√£o capazes de executar a an√°lise de idiomas? <br><br>  <b>Professor:</b> n√£o, n√£o, n√£o.  Voc√™ pode simplesmente converter v√°rios tipos de idiomas em HTML, mas os navegadores n√£o os entendem em sua forma original.  Em outras palavras, voc√™ tem um sistema de coment√°rios e ele usa Markdown.  Ou seja, os coment√°rios, antes de serem exibidos na p√°gina, v√£o para o compilador Markdown, que os converte para o formato HTML. <br><br>  <b>P√∫blico:</b> ent√£o por que nem sempre usar o Markdown? <br><br>  <b>Professor: O</b> Markdown permite que voc√™ use HTML incorporado e, at√© onde eu sei, existe uma maneira de desativ√°-lo no compilador.  Mas eu posso estar errado sobre isso.  O fato √© que nem sempre √© poss√≠vel usar um idioma limitado, e nem todo mundo quer fazer isso. <br><br>  Ent√£o, vamos continuar a discuss√£o sobre como aumentar a seguran√ßa com a ajuda da Pol√≠tica de Seguran√ßa de Conte√∫do.  Essa pol√≠tica permite que o servidor informe ao navegador da web que tipos de conte√∫do podem ser carregados na p√°gina que ele envia de volta, e de onde esse conte√∫do deve vir. <br><br>  Por exemplo, na resposta HTTP, o servidor pode usar algo como isto: inclui o cabe√ßalho Conte√∫do - Seguran√ßa - Pol√≠tica, a fonte padr√£o √© auto e receber√° dados de * .mydomain.com. <br><br><img src="https://habrastorage.org/webt/6c/u3/z8/6cu3z8oazkleohxh9fnrvk1_hay.jpeg"><br><br>  Com a pr√≥pria operadora, o servidor indica que o conte√∫do deste site deve vir apenas do dom√≠nio de uma p√°gina espec√≠fica ou de qualquer subdom√≠nio de mydomain.com.  Isso significa que, se tiv√©ssemos uma liga√ß√£o autom√°tica ao foo.com, o servidor enviaria essa p√°gina de volta ao navegador. <br><br>  Suponha que um ataque de script entre sites tente criar um link para bar.com.  Nesse caso, o navegador ver√° que bar.com n√£o √© auto e n√£o √© um dom√≠nio de meudom√≠nio.com e n√£o ignorar√° mais essa solicita√ß√£o.  Este √© um mecanismo bastante poderoso, onde voc√™ pode especificar controles mais detalhados.  Voc√™ define par√¢metros indicando que suas imagens devem provir de tal e qual fonte, scripts de tal e tal e assim por diante.  √â realmente conveniente. <br><br>  Al√©m disso, essa pol√≠tica evita o JavaScript incorporado, portanto, voc√™ n√£o pode abrir a tag, escrever algum tipo de script e fechar a tag, porque tudo o que pode ser direcionado ao navegador deve vir apenas de uma fonte condicional.  O CSP evita coisas perigosas, como usar o argumento para a fun√ß√£o eval (), que permite que uma p√°gina da Web execute o c√≥digo JavaScript gerado dinamicamente.  Portanto, se o cabe√ßalho CSP estiver definido, o navegador n√£o executar√° eval (). <br><br>  <b>P√∫blico:</b> √â disso que todo o CSP protege? <br><br>  <b>Professor:</b> n√£o.  Existe uma lista completa de recursos que ele realmente protege, e voc√™ pode configurar a prote√ß√£o contra muitas coisas indesejadas, por exemplo, especificar onde √© permitido aceitar CSS de sa√≠da e v√°rias outras coisas. <br><br>  <b>P√∫blico:</b> Mas, al√©m de eval (), existem outras coisas que amea√ßam a seguran√ßa? <br><br>  <b>Professor:</b> sim, eles existem.  Portanto, sempre surge a quest√£o da integridade da prote√ß√£o.  Portanto, por exemplo, eval n√£o s√≥ pode gerar dinamicamente o c√≥digo JavaScript.  H√° tamb√©m um construtor de fun√ß√µes, existem certas maneiras de chamar um determinado tempo limite, voc√™ acessa a linha e pode analisar o c√≥digo dessa maneira.  O CSP pode desativar todos esses vetores de ataque perigosos.  Mas isso n√£o √© uma panac√©ia para o isolamento completo de explora√ß√µes maliciosas. <br><br>  <b>P√∫blico:</b> √â verdade que o CSP pode ser configurado para impedir que todos os scripts internos sejam verificados na p√°gina? <br><br>  <b>Professor:</b> sim, ajuda a impedir a execu√ß√£o de c√≥digo gerado dinamicamente, enquanto o c√≥digo incorporado deve ser ignorado.  O navegador sempre deve obter o c√≥digo do atributo de origem.  Na verdade, n√£o sei se todos os navegadores fazem isso.  A experi√™ncia pessoal mostra que os navegadores exibem comportamentos diferentes. <br><br>  Em geral, a seguran√ßa da Internet √© semelhante √†s ci√™ncias naturais, ent√£o as pessoas apenas apresentam teorias sobre como os navegadores funcionam.  E ent√£o voc√™ v√™ como isso realmente acontece.  E a imagem real pode decepcionar, porque somos ensinados que existem algoritmos, evid√™ncias e coisas do g√™nero.  Mas esses navegadores se comportam t√£o mal que os resultados de seu trabalho s√£o imprevis√≠veis. <br><br>  Os desenvolvedores de navegadores tentam estar um passo √† frente dos invasores e, mais adiante, na palestra, voc√™ ver√° exemplos disso.  De fato, o CSP √© uma coisa bem legal. <br><br>  Outra coisa √∫til √© que o servidor pode definir um cabe√ßalho HTTP chamado X-Content-Type-Options, cujo valor √© nosniff. <br><br><img src="https://habrastorage.org/webt/ow/tj/4n/owtj4npqv9thfxhl6hfa8n5elfg.jpeg"><br><br>  Esse cabe√ßalho impede que o MIME descarte a resposta do tipo de conte√∫do anunciado, pois o cabe√ßalho diz ao navegador para n√£o substituir o tipo de conte√∫do da resposta.  Com a op√ß√£o nosniff, se o servidor disser que o conte√∫do √© text / html, o navegador exibir√° como texto / html. <br>  Simplificando, esse cabe√ßalho evita que o navegador ‚Äúcheire‚Äù a resposta do tipo de conte√∫do declarado, para que a situa√ß√£o n√£o aconte√ßa quando o navegador diz: ‚Äúsim, cheirei uma incompatibilidade entre a extens√£o do arquivo e o conte√∫do real, ent√£o vou transform√°-lo em outro entendimento. me uma coisa. "  Acontece que voc√™ de repente deu aos b√°rbaros as chaves do reino. <br><br>  Portanto, ao definir esse cabe√ßalho, voc√™ est√° dizendo ao navegador para n√£o fazer nada assim.  Isso pode atenuar bastante os efeitos de certos tipos de ataques.  Aqui est√° uma breve vis√£o geral de algumas vulnerabilidades para ataques de script entre sites. <br><br>  Agora, vejamos outro vetor de ataque popular - SQL.  Voc√™ provavelmente j√° ouviu falar de ataques chamados "inje√ß√£o de SQL" ou ataque de inje√ß√£o de SQL.  A ess√™ncia desses ataques √© usar o banco de dados do site.  Para criar dinamicamente a p√°gina mostrada ao usu√°rio, s√£o emitidas consultas ao banco de dados emitidas para esse servidor interno.  Imagine que voc√™ tenha uma solicita√ß√£o para selecionar todos os valores de uma tabela espec√≠fica, em que o campo ID do usu√°rio seja igual ao determinado na Internet a partir de uma fonte potencialmente n√£o confi√°vel. <br><br><img src="https://habrastorage.org/webt/mc/uo/s3/mcuos3xx1tdpkoorj-cg6z_tdeu.jpeg"><br><br>  Todos sabemos como essa hist√≥ria terminar√° - terminar√° muito mal, n√£o haver√° sobreviventes.  Porque o que vem de uma fonte n√£o verificada pode causar muitos problemas.  Como alternativa, voc√™ pode atribuir √† cadeia de caracteres do ID do usu√°rio o seguinte valor: user id = ‚Äú0;  EXCLUIR A TABELA ‚Äú. <br><br>  Ent√£o o que vai acontecer aqui?  Basicamente, o banco de dados do servidor dir√°: ‚ÄúOK, definirei o ID do usu√°rio como zero e executarei o comando‚Äú excluir tabela ‚Äù.‚Äù  E √© isso, voc√™ est√° pronto! <br><br>  Eles dizem que h√° alguns anos uma certa imagem viral apareceu.  Algumas pessoas na Alemanha instalaram placas nos carros, nas quais 0 foi escrito;  EXCLUIR TABELA.  A id√©ia era que as c√¢meras vi√°rias usassem o OCR para reconhecer seu n√∫mero e depois colocassem esse n√∫mero no banco de dados.  Em geral, o pessoal da Volkswagen decidiu explorar essa vulnerabilidade colocando c√≥digos maliciosos em seus n√∫meros. <br><br>  N√£o sei se funcionou porque parece engra√ßado.  Mas eu gostaria de acreditar que isso √© verdade.  Ent√£o, repito: a id√©ia de desinfec√ß√£o √© impedir a execu√ß√£o de conte√∫do de fontes n√£o confi√°veis ‚Äã‚Äãno seu site. <br><br><img src="https://habrastorage.org/webt/dx/2c/aj/dx2cajp2tth8bgt_-echscd6m-i.jpeg"><br><br>  Portanto, preste aten√ß√£o ao fato de que pode haver algumas coisas simples que n√£o funcionam como deveriam.  Ent√£o, voc√™ pode pensar: ‚Äúbem, por que n√£o posso simplesmente colocar outra cita√ß√£o no in√≠cio da linha e mais uma no final para excluir a execu√ß√£o de c√≥digo malicioso do atacante entre aspas triplas‚Äù? <br><br>  ID do usu√°rio = '"+ ID do usu√°rio +'" <br><br>  Mas isso n√£o funcionar√°, porque um invasor sempre pode simplesmente colocar aspas dentro da cadeia de ataque.  Portanto, na maioria dos casos, esse "meio hacking" n√£o oferece a seguran√ßa que voc√™ espera. <br><br>  A solu√ß√£o aqui √© que voc√™ precisa criptografar cuidadosamente seus dados.  E mais uma vez repito que, quando voc√™ receber informa√ß√µes de uma fonte n√£o confi√°vel, n√£o as insira no sistema da forma em que est√£o.  Certifique-se de que ele n√£o pode sair da caixa de areia se voc√™ a colocar l√° para executar uma explora√ß√£o maliciosa. <br><br>  Por exemplo, voc√™ deseja inserir uma fun√ß√£o de escape para impedir o uso do operador de v√≠rgula bruta.  Para fazer isso, muitas das estruturas da web, como o Django, possuem bibliotecas internas que permitem evitar consultas SQL para impedir que essas coisas aconte√ßam.  Essas estruturas incentivam os desenvolvedores a nunca interagirem diretamente com o banco de dados.  Por exemplo, o pr√≥prio Django fornece uma interface de alto n√≠vel que o desinfeta. <br><br>  Mas as pessoas sempre se preocupam com o desempenho e, √†s vezes, pensam que essas estruturas da web s√£o muito lentas.  Portanto, como voc√™ ver√° em breve, as pessoas ainda far√£o consultas SQL brutas, o que pode levar a problemas. <br><br>  Podem ocorrer problemas se o servidor da web aceitar nomes de caminhos de imagens n√£o confi√°veis.  Imagine que em algum lugar do seu servidor voc√™ esteja fazendo algo semelhante: abra com ‚Äúwww / images /‚Äù + filename, em que filename √© representado por algo como ... / ... / ... / ... / etc / senha. <br><br><img src="https://habrastorage.org/webt/sa/ro/bv/sarobvldxpltyhqughpaublh9ew.jpeg"><br><br>  Ou seja, voc√™ d√° o comando para abrir a imagem neste endere√ßo a partir de um arquivo de usu√°rio n√£o confi√°vel, o que, na realidade, pode prejudic√°-lo seriamente.  Portanto, se voc√™ quiser usar um servidor ou estrutura da web, poder√° detectar esses caracteres perigosos e evit√°-los para impedir a execu√ß√£o desses comandos n√£o manipulados. <br><br>  Vamos parar de discutir a desinfec√ß√£o de conte√∫do e falar um pouco sobre cookies.  Os cookies s√£o uma maneira muito popular de gerenciar sess√µes para vincular um usu√°rio a um determinado conjunto de recursos que existem no lado do servidor.  Muitas estruturas, como Django ou Zoobar, que voc√™ encontrar√° mais tarde, na verdade colocam um identificador de sess√£o aleat√≥ria dentro dos cookies.  A ideia √© que esse ID de sess√£o seja um √≠ndice em algum tipo de tabela do lado do servidor: <br><br>  tabela [ID da sess√£o] = informa√ß√µes do usu√°rio. <br><br>  Ou seja, o identificador da sess√£o √© igual a algumas informa√ß√µes do usu√°rio.  Como resultado, esse ID de sess√£o e cookies s√£o pe√ßas muito sens√≠veis em sua extens√£o.  Muitos ataques incluem roubo de cookies para obter esse ID de sess√£o.  Como discutimos em nossa √∫ltima palestra, a mesma pol√≠tica da mesma fonte de origem pode ajud√°-lo, em certa medida, contra alguns desses ataques de roubo de cookies.  Porque existem regras baseadas na mesma pol√≠tica de origem que impedem a modifica√ß√£o arbitr√°ria de cookies. <br><br>  A sutileza √© que voc√™ n√£o deve compartilhar um dom√≠nio ou subdom√≠nio com algu√©m em quem n√£o confia.  Porque, como dissemos na √∫ltima palestra, existem regras que permitem que dois dom√≠nios ou subdom√≠nios da mesma origem acessem os cookies um do outro.  E, portanto, se voc√™ confia em um dom√≠nio no qual n√£o deve confiar, talvez seja poss√≠vel definir diretamente o identificador da sess√£o nesses cookies, aos quais voc√™ tem acesso.  Isso permitir√° que o invasor force o usu√°rio a usar o identificador de sess√£o de sua escolha. <br><br><img src="https://habrastorage.org/webt/zu/vk/z6/zuvkz6jxe3v6rqnrvhfdfrzk5j8.jpeg"><br><br>  Suponha que um invasor defina um cookie de usu√°rio do Gmail.  Um usu√°rio faz login no Gmail e digita algumas letras.  Um invasor pode usar esse cookie, em particular, usar esse identificador de sess√£o, baixar o Gmail e acessar o Gmail como se fosse um usu√°rio v√≠tima.  Portanto, existem muitas sutilezas que voc√™ pode fazer com esses cookies para gerenciar suas sess√µes.  Discutiremos alguns deles hoje e em palestras subsequentes. <br><br>  Talvez voc√™ pense que pode se livrar de cookies?  Afinal, eles trazem mais problemas do que benef√≠cios.  Por que eles n√£o podem ser abandonados? <br><br>   stateless cookie,  ¬´   ¬ª,  -             , ,  ,     . <br><br> ,     ,        ,     .      ,       .  ,    ,            .        , ,  ,         ,  . <br><br>      ‚Äî     MA ‚Äî Message Authentication Codes,    .   ,  .       HCK  -  m.     ,  ,          K.  ,        ,     .   ,     ,          . <br><br><img src="https://habrastorage.org/webt/ll/z-/f3/llz-f3q7wj73o5ghn8d5urhxb7g.jpeg"><br><br>     ,   .    ,   stateless cookie,    Amazon, , x3.   - Amazon,   AWS,     .  ‚Äì    K,  ‚Äì   AWS,    . <br><br><img src="https://habrastorage.org/webt/dz/qy/tg/dzqytgmk-gbiyefqqk3o-jn9lle.jpeg"><br><br>    ,       AWS  HTTP,       . <br><br> ,        ,   ,      : <br><br> GET /photos/ cat; .jpg HTTP/1.1,        -  AWS: <br><br> HOST: ‚Äî - ‚Äî - ‚Äî ,     , : <br><br> DATE: Mon, June 4,            ,  ,     .    ,   ID ,  ,     ,   . <br><br><img src="https://habrastorage.org/webt/ah/rb/k2/ahrbk2c77e0qvutlug1awoh147s.jpeg"><br><br>      ?       ,        3-  . <br><br>  ,   String To Sign   : <br><br> ‚Äî  HTTP,     GET; <br> ‚Äî     MDS; <br> ‚Äî  ,  html   jpg; <br> ‚Äî ; <br> ‚Äî  ,     ,    . <br><br><img src="https://habrastorage.org/webt/1a/6o/qt/1a6oqtqqp9ee4eq_xegvmbuvmmw.jpeg"><br><br>  ,     ,     HCK MAC.  ,            .         ,         .  ,        .  ? <br><br>   ,  ,     ,          -   .     Amazon  ,      stateless cookie,     MD5       . <br><br>    , ,      ,         cookie,    .      ‚Äì    ,  ,     . <br><br>        ,       .  ,      ,         ‚ÄúHCK, m‚Äù. <br><br><img src="https://habrastorage.org/webt/yt/ez/21/ytez21vos7pryus3awum_33cd0u.jpeg"><br><br>         .                GET /photos/ cat; .jpg HTTP/1.1  ,    ,    .    ,  ,      .    , ?     : ¬´,  ,            ,    ¬ª. <br><br> 56:15 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Seguran√ßa de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> 9: ¬´ Web-¬ª,  3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6HhmIlbE0l0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  A vers√£o completa do curso est√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD de 1Gbps at√© dezembro de gra√ßa</b> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt424295/">https://habr.com/ru/post/pt424295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt424277/index.html">Emigra√ß√£o e tudo mais nos blogs de telegrama</a></li>
<li><a href="../pt424279/index.html">Como abrir um IP na Alemanha, se voc√™ √© um programador, e n√£o encher cones</a></li>
<li><a href="../pt424285/index.html">Dicas de inicializa√ß√£o do Y Combinator: desenvolva mercados de brinquedos</a></li>
<li><a href="../pt424287/index.html">Como participamos do InnovateFPGA 2018 e n√£o vencemos novamente</a></li>
<li><a href="../pt424289/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Aula 9: Seguran√ßa de Aplicativos Web, Parte 1</a></li>
<li><a href="../pt424297/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Aula 9: Seguran√ßa de Aplicativos Web, Parte 3</a></li>
<li><a href="../pt424301/index.html">Algoritmo de filtro de imagem de rede neural adaptativa</a></li>
<li><a href="../pt424305/index.html">RIBs de arquitetura m√≥vel de plataforma cruzada Uber</a></li>
<li><a href="../pt424307/index.html">GitLab 11.3 lan√ßado com reposit√≥rio Maven e ambientes seguros</a></li>
<li><a href="../pt424309/index.html">DevCore: parte do software do projeto DevBoy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>