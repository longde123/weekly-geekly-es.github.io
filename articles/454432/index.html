<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß¶ üë®‚Äçüöí üç∑ Arqueolog√≠a entretenida: la gu√≠a de estilo R bajo la lupa üïê ü§¶üèæ üÜö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como sabe, el c√≥digo se lee con mucha m√°s frecuencia de lo que se escribe. Para que al menos alguien que no sea el autor pueda leerlo, y hay gu√≠as de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arqueolog√≠a entretenida: la gu√≠a de estilo R bajo la lupa</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454432/"> Como sabe, el c√≥digo se lee con mucha m√°s frecuencia de lo que se escribe.  Para que al menos alguien que no sea el autor pueda leerlo, y hay gu√≠as de estilo.  Para R, esto puede ser, por ejemplo, el manual de Hadley. <br><br>  Una gu√≠a de estilo no es solo un acuerdo t√°cito entre desarrolladores: muchas de las reglas tienen un curioso trasfondo.  Por qu√© la flecha <code>&lt;-</code> mejor que el signo igual <code>=</code> , por qu√© a los veteranos de R no les gusta el gui√≥n bajo, c√≥mo se relaciona la longitud de l√≠nea recomendada con la tarjeta perforada y mucho m√°s, m√°s. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Descargo de responsabilidad: Gu√≠as de estilo R</b> <div class="spoiler_text">  A diferencia de Python, R no tiene un solo est√°ndar.  En consecuencia, no hay una gu√≠a √∫nica.  Adem√°s de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gu√≠a Hadley</a> (o su versi√≥n extendida de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tidyverse</a> ), hay otras, como <a href="">Google</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bioconductor</a> . <br><br>  Sin embargo, la gu√≠a Hadley puede considerarse la m√°s extendida (como la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">verificaci√≥n de</a> RStudio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">incorporada</a> , por ejemplo), lo que se ve facilitado en gran medida por la popularidad de las bibliotecas creadas por el propio Hadley (dplyr, ggplot, tidyr y otras de la colecci√≥n tidyverse). <br></div></div><br><h2>  1. Operador de asignaci√≥n: <code>&lt;-</code> vs <code>=</code> </h2><br>  Todas las gu√≠as disponibles recomiendan utilizar el operador no est√°ndar <code>&lt;-</code> , pero no el signo igual <code>=</code> , que es com√∫n para otros idiomas modernos.  Ni siquiera se mencionan otros tres operadores ( <code>&lt;&lt;-</code> , <code>-&gt;</code> , <code>-&gt;&gt;</code> ) (como el que exist√≠a en versiones anteriores <code>:=</code> ).  Parecer√≠a, ¬øpor qu√© necesitamos esta flecha no est√°ndar? <br><br>  La historia nos revela las cartas: en R, la flecha vino de S, que a su vez la hered√≥ de la APL.  En APL, nos permiti√≥ distinguir la asignaci√≥n de la igualdad.  En R, el operador de igualdad es est√°ndar, por lo que la diferencia es diferente.  Si la flecha era inicialmente un operador de asignaci√≥n, entonces el signo igual asign√≥ valores <i>solo a</i> par√°metros <i>con</i> nombre.  En 2001, el signo igual se convirti√≥ en el operador de asignaci√≥n, pero nunca se convirti√≥ en sin√≥nimo de la flecha. <br><br>  ¬øQu√© nos permite considerar <code>=</code> reemplazo completo de la flecha?  En primer lugar, <code>=</code> c√≥mo funciona el operador de asignaci√≥n solo en el nivel superior.  Por ejemplo, dentro de la funci√≥n, todo funcionar√° como antes: <br><br><pre> <code class="julia hljs">mean(x = <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-comment"><span class="hljs-comment"># [1] 3 x # Error: object 'x' not found mean (x &lt;- 1:5) # [1] 3 x # [1] 1 2 3 4 5</span></span></code> </pre><br>  Aqu√≠ <code>=</code> solo establece el par√°metro de la funci√≥n, mientras que <code>&lt;-</code> tambi√©n asigna el valor a la variable x.  Podemos lograr el mismo efecto colocando la operaci√≥n de asignaci√≥n entre par√©ntesis <s>(no, esto todav√≠a no es Lisp)</s> : <br><br><pre> <code class="julia hljs">mean ((x = <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>)) <span class="hljs-comment"><span class="hljs-comment"># [1] 3 x # [1] 1 2 3 4 5</span></span></code> </pre><br>  ... o entre llaves: <br><br><pre> <code class="julia hljs">mean ({x = <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>}) <span class="hljs-comment"><span class="hljs-comment"># [1] 3 x # [1] 1 2 3 4 5</span></span></code> </pre><br>  Adem√°s, la flecha tiene prioridad sobre el signo igual: <br><br><pre> <code class="julia hljs">x &lt;- y &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-comment"><span class="hljs-comment"># OK x = y = 2 # OK x = y &lt;- 3 # OK x &lt;- y = 4 # Error in x &lt;- y = 4 : could not find function "&lt;-&lt;-"</span></span></code> </pre><br>  La √∫ltima expresi√≥n fall√≥ porque es equivalente a <code>(x &lt;- y) = 4</code> , y el analizador la interpreta como <br><br><pre> <code class="julia hljs"><span class="hljs-string"><span class="hljs-string">`&lt;-&lt;-`</span></span>(x, y = <span class="hljs-number"><span class="hljs-number">4</span></span>, value = <span class="hljs-number"><span class="hljs-number">4</span></span>)</code> </pre><br>  En otras palabras, estamos tratando de realizar una operaci√≥n incorrecta: primero asigne x a y luego intente asignar x e y a 4. La expresi√≥n se procesar√° sin errores solo si cambia la prioridad de las operaciones con par√©ntesis: <code>x &lt;- (y = 4)</code> . <br><br><h2>  2. Espaciado </h2><br>  La gu√≠a recomienda poner espacios entre operadores (excepto, por supuesto, corchetes,:, :: y :: :), as√≠ como antes del corchete de apertura.  Obviamente, esto es parte de los est√°ndares de codificaci√≥n GNU.  Sin embargo, esta cl√°usula est√° estrechamente relacionada con el uso de <code>&lt;-</code> como operador de asignaci√≥n.  Por ejemplo <br><br><pre> <code class="julia hljs">x &lt;-<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  Que es esto  X es menor que -1?  O establecer x a 1? <br><br>  Sin embargo, el espacio extra no es mejor que el que falta, por ejemplo: <br><br><pre> <code class="julia hljs">x &lt;- <span class="hljs-number"><span class="hljs-number">0</span></span> ifelse(x &lt;-<span class="hljs-number"><span class="hljs-number">1</span></span>, T, F) <span class="hljs-comment"><span class="hljs-comment"># [1] TRUE x &lt;- 0 ifelse(x &lt; -1, T, F) # [1] FALSE</span></span></code> </pre><br>  En el primer caso, no hay espacio entre <code>&lt;</code> y <code>-</code> , lo que crea un operador de asignaci√≥n. <br><br><h2>  3. Nombres de funciones y variables. </h2><br>  Las gu√≠as de estilo no est√°n de acuerdo con la cuesti√≥n de los nombres: la gu√≠a Hadley recomienda guiones bajos para todos los nombres;  Gu√≠a de Google: separaci√≥n por puntos para variables y estilo camel con la primera min√∫scula para funciones;  Bioconductor recomienda lowerCamel para funciones y variables.  No hay unidad en la comunidad R en este tema, y ‚Äã‚Äãse pueden encontrar todos los estilos posibles: <br><br><pre> <code class="julia hljs">lowerCamel period.separation lower_case_with_underscores allowercase UpperCamel</code> </pre><br>  No hay un estilo uniforme incluso para los nombres base R (por ejemplo, los nombres de fila y row.names son funciones diferentes).  Si no tiene en cuenta el permitido ilegible (solo a los usuarios de Matlab les puede encantar), hay tres estilos m√°s populares: lowerCamel, min√∫sculas con _ y min√∫sculas con separaci√≥n de puntos. <br><br><img src="https://habrastorage.org/webt/kv/mr/a1/kvmra14xyiec6k6eiya0s6nxmys.png"><br><br>  La popularidad de diferentes estilos para los nombres y par√°metros de funciones (un nombre puede corresponder a diferentes estilos).  Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">rendimiento de</a> Rasmus B√•√•th en useR! 2017. <br><br><div class="spoiler">  <b class="spoiler_title">Lo mismo en 2012</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wx/tj/tt/wxtjttoeaoxb1zzoyokrrbxh2pg.png"><br>  Fuente: Baath (2012).  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El estado de las convenciones de nomenclatura en R</a> ".  The R Journal vol.  4/2, p. 74-75. <br></div></div><br>  La separaci√≥n punto a punto recuerda ominosamente el uso de m√©todos en la programaci√≥n orientada a objetos, pero es hist√≥ricamente com√∫n.  Es tan com√∫n que este estilo particular puede considerarse verdaderamente R'vsky.  Por ejemplo, la mayor√≠a de las funciones b√°sicas lo usan espec√≠ficamente (y todos se reunieron con data.table y as.factor). <br><br>  Pero la separaci√≥n _ es uno de los estilos menos populares (y aqu√≠ Hadley va en contra de la mayor√≠a).  Para muchos usuarios de R, los guiones bajos ser√°n molestos: en la popular extensi√≥n Emacs Speaks Statistics, se reemplaza por defecto con el operador de asignaci√≥n <code>&lt;-</code> .  Y la configuraci√≥n predeterminada, por supuesto, <s>casi</s> nadie cambia. <br><br>  Sin embargo, la influencia de Emacs ESS sigue siendo una explicaci√≥n de la categor√≠a de "menea la cola del perro".  Hay una raz√≥n m√°s antigua: en versiones anteriores de R, el gui√≥n bajo era sin√≥nimo de la flecha <code>&lt;-</code> .  Por ejemplo, en 2000 podr√≠a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cumplir con</a> esto: <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment">#      R c &lt;- c(1,2,3,4,5) mean(c) [1] 3 c_mean &lt;- mean(c) c [1] 3</span></span></code> </pre><br>  Aqu√≠, en lugar de crear la variable <code>c_mean</code> R asign√≥ el valor 3 primero a la variable media, y luego a la variable c.  En la R moderna, tales metamorfosis, por supuesto, no ocurrir√°n. <br><br>  Debido a la impopularidad, las funciones _ de este estilo casi no se encuentran entre las b√°sicas: <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment">#  3.5.1  25  grep("^[^\\.]*$", apropos("_"), value = T)</span></span></code> </pre><br>  Finalmente, el estilo lowerCamel es poco legible cuando se usan nombres largos: <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment"># ! GrossNationalIncomePerCapitaAtlasMethodCurrentUnitedStatesDollars</span></span></code> </pre><br>  Por lo tanto, en t√©rminos de nombres, las recomendaciones de la gu√≠a no pueden considerarse inequ√≠vocas;  despu√©s de todo, esto es una cuesti√≥n de gustos (siempre y cuando haya consistencia en esto). <br><br><h2>  4. llaves </h2><br>  Seg√∫n la gu√≠a, una nueva l√≠nea debe seguir a la llave de apertura, y la de cierre debe estar en una l√≠nea separada (a menos que la siga).  Es decir  algo como esto: <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { log(x) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { message(<span class="hljs-string"><span class="hljs-string">"Not applicable!"</span></span>) }</code> </pre> <br>  Todo aqu√≠ no es muy interesante: este es el estilo de sangr√≠a est√°ndar de K&amp;R, que se remonta al lenguaje C y el famoso libro de Kernigan y Ritchie "The C Programming Language" (o K&amp;R por los nombres de los autores). <br><br>  Los or√≠genes de este estilo tambi√©n son bastante obvios: le permite guardar l√≠neas y mantener la legibilidad.  Para las primeras computadoras, el espacio vertical era demasiado lujoso.  Por ejemplo, C se desarroll√≥ en PDP-11, en cuyo terminal solo hab√≠a 24 l√≠neas.  Y al imprimir un libro de K&amp;R, ¬°este estilo ahorr√≥ papel! <br><br><h2>  5. cadena de 80 caracteres </h2><br>  La longitud de l√≠nea recomendada seg√∫n la gu√≠a es de 80 caracteres.  El n√∫mero m√°gico 80 se encuentra no solo en R, sino tambi√©n en una gran cantidad de otros lenguajes (Java, Perl, PHP, etc., etc.).  Y no solo idiomas: incluso la l√≠nea de comandos de Windows consta de 80 caracteres. <br><br>  Por primera vez en programaci√≥n, este n√∫mero apareci√≥ en 1928 en lugar de con la tarjeta perforada est√°ndar de IBM, donde hab√≠a exactamente 80 columnas para datos.  Una pregunta mucho m√°s interesante es ¬øpor qu√© se eligi√≥ tal est√°ndar?  Despu√©s de todo, se utilizaron previamente tarjetas perforadas de diferente longitud (para 24 o 45 columnas). <br><br><img src="https://habrastorage.org/webt/6z/ny/ji/6znyjixcpaypxaaorp_y4_zdmc4.jpeg"><br><br>  La respuesta m√°s popular relaciona la longitud de una tarjeta perforada con la longitud de l√≠nea de las m√°quinas de escribir.  Las primeras m√°quinas fueron dise√±adas para el papel est√°ndar estadounidense de 8¬Ω x 11 pulgadas, y se les permiti√≥ imprimir de 72 a 90 caracteres, dependiendo del tama√±o de los m√°rgenes.  Por lo tanto, la versi√≥n de 80 caracteres por l√≠nea parece bastante plausible, aunque no es cierto en el √∫ltimo recurso.  Es posible que 80 caracteres sea solo el t√©rmino medio en t√©rminos de ergonom√≠a. <br><br><h2>  6. Sangr√≠a de l√≠nea: espacios frente a pesta√±as </h2><br>  El estilo recomendado por la gu√≠a es dos espacios, no una pesta√±a.  El rechazo de la tabulaci√≥n es bastante comprensible: la longitud de la TAB var√≠a en diferentes editores de texto (puede ser de 2 a 8 espacios).  Al rechazarlos, obtenemos dos ventajas a la vez: en primer lugar, el c√≥digo se ver√° exactamente igual a como lo escribimos;  en segundo lugar, no habr√° violaci√≥n accidental de la longitud de cadena recomendada.  En este caso, por supuesto, aumentamos el tama√±o del archivo (¬øqui√©n quiere ocuparse de tales microoptimizaciones en 2k19?) <br><br>  Los espacios de disputa vs pesta√±as tienen una larga historia, y pueden equipararse con los religiosos (como Win vs Linux, Android vs iOS y similares).  Sin embargo, ya sabemos qui√©n lo gan√≥: seg√∫n el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estudio de</a> Stack Overflow, los desarrolladores que usan espacios ganan m√°s que aquellos que usan pesta√±as.  Un argumento m√°s poderoso que las reglas de una gu√≠a de estilo, ¬øverdad? <br><br>  <b>En lugar de una conclusi√≥n: las</b> reglas de las gu√≠as de estilo pueden parecer extra√±as e il√≥gicas.  De hecho, ¬øpor qu√© la flecha <code>&lt;-</code> si hay un operador est√°ndar <code>=</code> ?  Pero si profundizas m√°s, entonces detr√°s de cada regla hay una l√≥gica, a menudo ya olvidada. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/454432/">https://habr.com/ru/post/454432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454422/index.html">Sobre la interpretaci√≥n pervertida de la Primera Ley de Newton en f√≠sica moderna</a></li>
<li><a href="../454424/index.html">5 errores comunes al usar componentes arquitect√≥nicos de Android</a></li>
<li><a href="../454426/index.html">Artificial: en los albores de la inteligencia artificial</a></li>
<li><a href="../454428/index.html">Lo que Apple present√≥ en WWDC y lo que los desarrolladores de iOS piensan al respecto</a></li>
<li><a href="../454430/index.html">3D Particle Life</a></li>
<li><a href="../454434/index.html">PDA (Pocket Travel Computer): registrador GPS de circuitos</a></li>
<li><a href="../454436/index.html">Petty Petty Joy # 1: loguru</a></li>
<li><a href="../454440/index.html">Petty Little Fun # 2: Starlette</a></li>
<li><a href="../454442/index.html">C√≥mo elegir una red proxy para su negocio: 3 consejos pr√°cticos</a></li>
<li><a href="../454444/index.html">Perfilamos la carga de Habr o c√≥mo 189 solicitudes en la p√°gina representan influencia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>