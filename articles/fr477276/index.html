<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ö±Ô∏è üéÇ üöõ Comment se d√©barrasser du code CSS inutilis√©? 2e partie ‚ôåÔ∏è üö™ ‚ò∫Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous publions la deuxi√®me partie de la traduction de mat√©riel sur la lutte contre le code CSS inutilis√©. 

  

 ‚Üí La premi√®re partie 

 P...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment se d√©barrasser du code CSS inutilis√©? 2e partie</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/477276/">  Aujourd'hui, nous publions la deuxi√®me partie de la traduction de mat√©riel sur la lutte contre le code CSS inutilis√©. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/477276/"><img src="https://habrastorage.org/webt/vw/sy/lo/vwsylop4f7fowarmknm_4fifpso.jpeg"></a> <br><br>  ‚Üí <a href="https://habr.com/ru/company/ruvds/blog/477274/">La premi√®re partie</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Post-traitement CSS</font> </h2><br>  Supposons que dans certains projets, CSS soit √©crit en utilisant Less ou Sass, puis un postprocesseur est utilis√© pour compiler le code existant en CSS ordinaire.  Dans un tel projet, il existe probablement un syst√®me automatique pour se d√©barrasser du CSS inutilis√©, qui d√©marre apr√®s le pr√©traitement CSS.  Cela peut ressembler √† ceci: <br><br><ol><li>  Sass. </li><li>  PostCSS / syst√®me de pr√©fixe automatique. </li><li>  Suppression du CSS inutilis√©. </li><li>  Code CSS pr√™t pour la production. </li></ol><br>  Cela, d'une part, a du sens, et d'autre part - cela semble un peu √©trange √† mes yeux.  Le fait est qu'avec cette approche, le code source contenant les commandes de stylisation n'est pas corrig√©, sur la base duquel le code CSS r√©sultant est cr√©√©, qui inclut √©galement le CSS inutilis√©.  Au lieu de cela, le CSS inutile est simplement supprim√© √† la fin du processus de construction.  Je soup√ßonne qu'en JavaScript, lors de la mise en ≈ìuvre de l'algorithme de tremblement d'arbre, quelque chose de similaire a √©t√© fait depuis un certain temps.  Autrement dit, une telle manipulation avec CSS n'est pas du tout une nouveaut√©.  Mais pour moi, tout cela semble √™tre faux, car la base de code CSS est quelque chose qui peut se dire √† la surface des projets Web.  Une telle approche incite presque les d√©veloppeurs √† √©crire n√©gligemment CSS, pour s'assurer que tout est vid√© dans le code CSS source.  Et la v√©rit√© est que le syst√®me supprimera automatiquement les CSS inutiles.  Mais cela prive compl√®tement les d√©veloppeurs du d√©sir de comprendre exactement comment leurs conceptions sont con√ßues, comment exactement CSS est utilis√© en elles. <br><br><h2>  <font color="#3AC1EF">Purgecss</font> </h2><br>  <a href="https://www.purgecss.com/">PurgeCSS</a> est un autre projet qui vise √† lutter contre les CSS inutilis√©s.  Bien que cela ne soit pas directement li√© aux capacit√©s de ce projet, je l'aime parce que sa documentation explique clairement ses <a href="https://www.purgecss.com/comparison">diff√©rences avec</a> ses concurrents.  Ci-dessus, nous avons d√©j√† donn√© un fragment d'une comparaison entre PurgeCSS et PurifyCSS.  Et voici un autre extrait de la documentation PurgeCSS d√©di√© √† PurifyCSS.  Le fait est que le principal probl√®me avec PurifyCSS est la faible modularit√© de ce projet.  Cependant, c'est la principale force de PurifyCSS.  Comme d√©j√† mentionn√©, PurifyCSS consid√®re les mots CSS comme tous les mots qu'il trouve dans les fichiers.  Cette approche est lourde d'erreurs.  Mais PurifyCSS r√©sout ce probl√®me en permettant de cr√©er des fonctions d'extraction.  Une telle fonction prend le contenu d'un fichier et en extrait une liste de s√©lecteurs CSS utilis√©s.  Cela vous permet de r√©soudre tr√®s bien le probl√®me de se d√©barrasser du code CSS inutilis√©. <br><br>  Le projet PurgeCSS ressemble d√©sormais √† un acteur majeur sur le march√© du nettoyage de code CSS.  Beaucoup l'utilisent, beaucoup l'√©crivent. <br><br><ul><li>  <a href="https://medium.com/dwarves-foundation/remove-unused-css-styles-from-bootstrap-using-purgecss-88395a2c5772">Voici des</a> informations sur l'utilisation de PurgeCSS, en particulier lorsque vous travaillez avec Bootstrap. </li><li>  √Ä partir de <a href="https://www.viget.com/articles/a-better-approach-for-using-purgecss-with-tailwind/">cet</a> article, vous pouvez apprendre que PurgeCSS ne supprimera pas les s√©lecteurs dans des circonstances inhabituelles √† l'aide de listes blanches. </li><li>  <a href="https://flaviocopes.com/tailwind-setup/">Ici,</a> vous pouvez d√©couvrir comment PurgeCSS est utilis√© conjointement avec les scripts npm et avec PostCSS. </li><li>  <a href="https://frontstuff.io/how-i-dropped-250-kb-of-dead-css-weight-with-purgecss">Il</a> explique comment PurgeCSS fonctionne avec Tailwind. </li></ul><br>  Malgr√© le fait que PurgeCSS n√©cessite un r√©glage sp√©cial pour fonctionner avec Tailwind, il semble que ces deux outils soient parfaitement combin√©s l'un avec l'autre.  En fait, m√™me dans la <a href="https://tailwindcss.com/docs/controlling-file-size/">documentation</a> Tailwind <a href="https://tailwindcss.com/docs/controlling-file-size/">,</a> vous pouvez trouver une recommandation pour les partager.  Et PurgeCSS dispose d' <a href="https://www.purgecss.com/cli">un outil en ligne de commande</a> pour l'appliquer dans le processus de construction de projets. <br><br>  Je pense que l'essentiel de cela se r√©sume √† ce qui suit: Tailwind cr√©e un grand fichier CSS plein de s√©lecteurs d'assistance.  Mais il n'est pas suppos√© que tous ces s√©lecteurs seront utilis√©s dans le projet.  Le d√©veloppeur les utilise pour r√©soudre tous les probl√®mes de style de son code HTML, puis PurgeCSS analyse ce code HTML et supprime les s√©lecteurs inutiles, formant CSS pr√™t pour la production. <br><br>  Certes, PurgeCSS doit toujours √™tre inform√© de chaque fichier HTML et JavaScript utilis√© sur le site.  En d'autres termes, vous devez configurer ind√©pendamment tout ce qui concerne les ressources externes et prendre en compte le fait que les donn√©es entrant dans le projet √† partir de certains stockages ne seront probablement pas analys√©es lors de l'assemblage du projet.  En cons√©quence, l'utilisation de PurgeCSS dans l'assemblage de projets implique une quantit√© consid√©rable de travail manuel. <br><br><h2>  <font color="#3AC1EF">Mon approche pr√©f√©r√©e pour se d√©barrasser des CSS inutilis√©s</font> </h2><br>  Ce que j'aime le plus, c'est l'approche suivante pour supprimer les CSS inutiles.  Cela signifie qu'il y aurait quelqu'un dans l'√©quipe de d√©veloppement du projet qui conna√Æt tr√®s bien le code CSS de ce projet.  Cette personne doit √™tre consciente des probl√®mes actuels de style et les r√©soudre progressivement.  C'est peut-√™tre une vue d√©pass√©e de la situation qui appartient √† une personne qui devrait suivre son temps.  Mais pour moi, en tout cas, cela me semble l'approche la plus pratique.  √âtant donn√© que la t√¢che que nous envisageons est si difficile √† r√©soudre, je pense que la r√©ponse au d√©fi que cette t√¢che pose aux d√©veloppeurs peut √™tre un travail difficile.  La r√©ponse est une compr√©hension du probl√®me et de sa solution progressive.  Un d√©veloppeur front-end qui conna√Æt le projet et sait ce qui est utilis√© et ce qui ne l'est pas peut r√©soudre ce probl√®me. <br><br>  J'ai vu une approche extr√™me pour d√©terminer si un s√©lecteur de site est utilis√©.  Le bloc CSS a utilis√© une conception comme <code>background-image: url(/is-this-being-used.gif?selector);</code>  .  Apr√®s son application, les journaux du serveur ont √©t√© p√©riodiquement v√©rifi√©s afin de savoir si une demande a √©t√© faite pour recevoir l'image correspondante.  S'il y avait une telle demande, alors le bloc CSS sous enqu√™te est utilis√©.  Si ce n'√©tait pas le cas, alors il n'est pas utilis√©. <br><br>  Mais peut-√™tre que mon outil pr√©f√©r√© dans la bo√Æte √† outils CSS explorer inutilis√©e est celui qui sera discut√© dans la section suivante. <br><br><h2>  <font color="#3AC1EF">Etude de projets par r√©gression visuelle</font> </h2><br>  Cette m√©thode consiste dans le fait que le d√©veloppeur prend autant de captures d'√©cran du site que possible.  Ils font des copies des √©crans des pages les plus importantes, et de ces pages, dont l'apparence d√©pend de l'√©tat de l'application.  Les captures d'√©cran sont prises dans diff√©rents navigateurs, avec diff√©rentes tailles d'√©cran.  Ces captures d'√©cran sont cr√©√©es sur la base des mat√©riaux de la branche principale du r√©f√©rentiel de projet. <br><br>  Ensuite, avant de fusionner toute autre branche avec la branche principale, de nouvelles captures d'√©cran sont cr√©√©es en fonction des mat√©riaux de la nouvelle branche et compar√©es √† celles faites pour la branche principale.  Bien s√ªr, cela ne se fait pas manuellement, mais par programme. <br><br>  √Ä proprement parler, <a href="https://youtu.be/Vbg81kc56FU">voici une</a> vid√©o dans laquelle elle est montr√©e. <br><br>  Il convient de noter que beaucoup a d√©j√† √©t√© dit sur le th√®me des outils d'√©tude de la r√©gression visuelle, mais l' <a href="https://percy.io/">auteur de</a> cette vid√©o est la seule personne √† tout expliquer de fa√ßon tr√®s intelligible.  Vous devez non seulement prendre des captures d'√©cran;  vous devez les comparer et rechercher les diff√©rences entre eux.  Il ne faut pas seulement trouver des diff√©rences;  vous devez les accepter ou les refuser.  De plus, il est n√©cessaire que l'adoption ou l'approbation de modifications affecte le processus de fusion des succursales dans les r√©f√©rentiels.  De plus, le d√©veloppeur devrait √™tre en mesure de configurer le navigateur avant de prendre une copie d'√©cran et la possibilit√© d'automatiser le travail avec des captures d'√©cran. <br><br><h2>  <font color="#3AC1EF">CSS atomique et CSS-dans-JS</font> </h2><br>  Je suis s√ªr que de nombreux lecteurs de ce mat√©riel peuvent dire: "Je n'ai pas de CSS inutilis√©, car les outils que j'utilise g√©n√®rent exactement le code dont j'ai besoin et rien de plus." <br><br>  Si oui, alors c'est tout simplement merveilleux. <br><br>  Nous parlons peut-√™tre d' <a href="https://acss.io/guides/atomizer.html">Atomizer</a> .  Il s'agit peut-√™tre d'un outil <a href="https://tachyons.io/">Tachyons</a> , dont les r√©sultats sont transmis via <a href="https://github.com/uncss/uncss">UnCSS</a> et sont prudents.  Peut-√™tre - c'est une combinaison de <a href="https://tailwindcss.com/">Tailwind</a> + <a href="https://www.purgecss.com/">PurgeCSS</a> , qui est maintenant <a href="https://www.purgecss.com/">largement</a> entendu. <br><br>  Peut-√™tre - ils fonctionnent toujours avec des styles.  Si quelqu'un relie √©troitement des composants et des styles JavaScript, par exemple, comme lors de l'utilisation de React et Emotion, ou m√™me s'il applique simplement des modules CSS avec quoi que ce soit, parmi les avantages de ces approches CSS-in-JS, il y a une r√©duction du volume de CSS inutilis√©. dans les projets finis.  De plus, puisque de nombreux projets bas√©s sur JavaScript utilisent l'algorithme d'agitation d'arbre et les techniques de s√©paration de code, ces projets auront non seulement moins de CSS inutiles.  Au cours de leur travail, seul ce qui est n√©cessaire dans chaque situation sp√©cifique sera charg√©.  Mais, bien s√ªr, <a href="https://css-tricks.com/the-differing-perspectives-on-css-in-js/">il</a> existe des <a href="https://css-tricks.com/the-differing-perspectives-on-css-in-js/">inconv√©nients</a> √† de telles approches pour travailler avec CSS. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Voyons maintenant comment √©viter l'apparition de code CSS inutile dans nos futurs projets.  Je crois que l'avenir du style est la s√©paration entre les styles globaux et les styles appliqu√©s aux composants individuels.  La plupart des styles sont limit√©s √† la port√©e des composants, mais il existe des styles globaux qui peuvent √™tre utilis√©s pour exploiter la nature en cascade de CSS.  Par exemple, il peut s'agir de param√®tres typographiques standard mondiaux. <br><br>  Si la plupart des styles sont limit√©s par la port√©e des composants, je pense que les styles inutiles sont moins susceptibles de p√©n√©trer les projets pr√™ts √† l'emploi, car il est facile pour un d√©veloppeur de se plonger dans les relations entre de petits fragments HTML et CSS √©troitement li√©s.  Et lorsque le composant est supprim√© du projet ou d√©velopp√©, la stylisation quitte le projet ou se d√©veloppe avec lui.  Par cons√©quent, les assemblys CSS sont cr√©√©s en fonction des composants r√©ellement utilis√©s dans le projet. <br><br>  La technologie CSS-in-JS √©volue tout naturellement dans cette direction.  Lors de l'application de ces technologies, les styles sont li√©s aux composants.  Et c'est la chose la plus importante dans ce cas.  Mais la liaison des styles aux composants est facultative.  J'aime l'approche universelle, qui implique l'utilisation de <a href="https://github.com/css-modules/css-modules">modules CSS</a> .  Il vise presque compl√®tement √† s√©parer la port√©e des styles et n'oblige pas le d√©veloppeur √† utiliser un cadre JavaScript sp√©cifique. <br><br>  Peut-√™tre que tout ce qui pr√©c√®de vous semble quelque chose de th√©orique ou loin des besoins r√©els des d√©veloppeurs Web.  Vous venez d'avoir un site qui utilise Bootstrap et souhaitez r√©duire la taille du CSS que les utilisateurs de ce site chargent.  Si c'est le cas, je vous conseille d'utiliser le code source Bootstrap plut√¥t que sa version standard.  Ce code source est √©crit en utilisant SCSS et se compose de nombreux plug-ins.  Cela signifie que si vous n'avez pas besoin de certaines parties de Bootstrap, vous pouvez simplement d√©sactiver les modules correspondants. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/169/779/0bc/1697790bc12ac9c8b11b053e3aeff6ee.png"></div><br>  <i><font color="#999999">Suppression des modules d√©roulants, badges et fil d'Ariane de Bootstrap avant de cr√©er un projet</font></i> <br><br>  Je vous souhaite √† tous bonne chance dans la lutte difficile avec le code CSS inutile. <br><br>  <b>Chers lecteurs!</b>  Comment g√©rez-vous le code CSS inutilis√© qui entre en production? <br><br><div style="text-align:center;"> <a href="https://ruvds.com/vps_start/"><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr477276/">https://habr.com/ru/post/fr477276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr477264/index.html">La pelle s'est transform√©e en un robot autonome capable de creuser des tranch√©es ind√©pendamment</a></li>
<li><a href="../fr477266/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 390 (18-24 novembre 2019)</a></li>
<li><a href="../fr477268/index.html">Optimisation de la solution de recherche sur github</a></li>
<li><a href="../fr477272/index.html">Premi√®re introduction √† AssemblyScript</a></li>
<li><a href="../fr477274/index.html">Comment se d√©barrasser du code CSS inutilis√©? Partie 1</a></li>
<li><a href="../fr477278/index.html">Tests frontaux</a></li>
<li><a href="../fr477282/index.html">Profiling Go code de projet et r√©solution des probl√®mes d'allocation de m√©moire</a></li>
<li><a href="../fr477284/index.html">Pourquoi JavaScript est-il requis en mode strict?</a></li>
<li><a href="../fr477286/index.html">Axios ou Fetch: quoi utiliser en 2019?</a></li>
<li><a href="../fr477288/index.html">John Lewis √† la conf√©rence Undoing Aging 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>