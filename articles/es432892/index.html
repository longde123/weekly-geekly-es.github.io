<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üó°Ô∏è üêÑ üçß Su b√∫squeda regres√≥: implementaci√≥n de b√∫squeda difusa üèπ üë©‚Äçüëß‚Äçüëß üêøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos cometemos errores: en este caso estamos hablando de consultas de b√∫squeda. El n√∫mero de sitios para la venta de bienes y servicios est√° creciend...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Su b√∫squeda regres√≥: implementaci√≥n de b√∫squeda difusa</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432892/">  Todos cometemos errores: en este caso estamos hablando de consultas de b√∫squeda.  El n√∫mero de sitios para la venta de bienes y servicios est√° creciendo junto con las necesidades de los usuarios, pero no siempre pueden encontrar lo que est√°n buscando, solo porque ingresan incorrectamente el nombre del producto necesario.  La soluci√≥n a este problema se logra implementando una b√∫squeda difusa, es decir, utilizando el algoritmo para encontrar los valores m√°s cercanos, teniendo en cuenta los posibles errores o errores tipogr√°ficos del usuario.  El alcance de dicha b√∫squeda es lo suficientemente amplio: logramos trabajar en la b√∫squeda de una gran tienda en l√≠nea en el segmento minorista de alimentos. <br><a name="habracut"></a><br>
<h3>  Estado de b√∫squeda inicial </h3><br>  La tienda en l√≠nea se desarroll√≥ en la plataforma 1C-Bitrix: Site Management.  Para implementar la b√∫squeda, utilizamos el m√≥dulo de b√∫squeda est√°ndar bitrix y el motor de texto completo sphinxsearch.  En sphinxsearch, se utiliz√≥ el tipo de √≠ndice Tiempo real (RT), que no requiere una fuente de datos est√°tica, pero se puede completar en cualquier momento en tiempo real.  Esto le permite actualizar de manera flexible el √≠ndice de b√∫squeda sin reindexarlo por completo.  Dado que el √≠ndice RT usa solo SphinxQL como protocolo de consulta, la integraci√≥n se llev√≥ a cabo a trav√©s de √©l.  SphinxQL es un protocolo de consulta similar a mysql que implementa la capacidad de conectarse a trav√©s de clientes mysql est√°ndar, mientras proporciona sintaxis sql con algunas limitaciones y sus propias peculiaridades.  El m√≥dulo de b√∫squeda utiliza consultas de selecci√≥n / inserci√≥n / reemplazo / eliminaci√≥n. <br><br>  En el sistema bitrix, se llev√≥ a cabo el proceso de indexaci√≥n de estos productos, categor√≠as y marcas.  La informaci√≥n sobre estas entidades se transfiri√≥ a sphinx, que a su vez actualiz√≥ el √≠ndice RT.  Cuando los datos se actualizan en la tienda en l√≠nea, se activa un evento que actualiza los datos en Sphinx.  La coherencia de los datos se lleva a cabo a trav√©s del identificador de entidad en la tienda en l√≠nea. <br><br>  Cuando un usuario busca en una tienda en l√≠nea, el sistema realiza una solicitud con una frase de b√∫squeda en Sphinx y obtiene identificadores de entidades, tambi√©n selecciona de la informaci√≥n de la base de datos y forma una p√°gina con los resultados de los resultados de b√∫squeda. <br>  En el momento en que comenz√≥ la soluci√≥n al problema de b√∫squeda difusa, el esquema general de la arquitectura de b√∫squeda en el proyecto era el siguiente: <br><br><img src="https://habrastorage.org/webt/eg/wr/zb/egwrzb1_6dhcjpe5qlshpalyyxy.jpeg"><br><br><h3>  Selecci√≥n de tecnolog√≠a </h3><br>  Nuestra tarea era adivinar la solicitud del usuario, que puede contener errores tipogr√°ficos.  Para hacer esto, necesitamos analizar cada palabra en la solicitud y decidir si el usuario la escribi√≥ correctamente o no.  En caso de error, se deben seleccionar las opciones m√°s adecuadas.  Es imposible determinar la ortograf√≠a correcta de las palabras sin una base de datos de palabras y formas de palabras del idioma en el que queremos adivinarlas.  Simpl√≠sticamente, una base de datos de este tipo puede llamarse diccionario: era a √©l a quien necesit√°bamos. <br><br>  Para seleccionar las opciones de sustituci√≥n de palabras ingresadas con un error, se eligi√≥ la popular f√≥rmula de c√°lculo de distancia Damerau - Levenshtein.  Esta f√≥rmula es un algoritmo para comparar dos palabras.  El resultado de la comparaci√≥n es el n√∫mero de operaciones para convertir una palabra en otra.  Inicialmente, la distancia de Levenshtein implica el uso de 3 operaciones: <br><br><ul><li>  inserci√≥n </li><li>  eliminaci√≥n </li><li>  reemplazo </li></ul><br>  La distancia Damerau-Levenshtein es una versi√≥n extendida de la distancia Levenshtein y agrega otra operaci√≥n: transposici√≥n, es decir, una permutaci√≥n de dos caracteres adyacentes. <br><br>  Por lo tanto, el n√∫mero de operaciones recibidas se convierte en el n√∫mero de errores cometidos por el usuario al escribir la palabra.  Elegimos la limitaci√≥n de dos errores, ya que un n√∫mero mayor no ten√≠a sentido: en este caso, tenemos demasiadas opciones para el reemplazo, lo que aumenta la probabilidad de una falla. <br><br>  Para una b√∫squeda m√°s relevante de variantes de palabras similares en sonido, se us√≥ la funci√≥n de meg√°fono: esta funci√≥n convierte una palabra en su forma fon√©tica.  Desafortunadamente, el meg√°fono solo funciona con las letras del alfabeto ingl√©s, as√≠ que antes de calcular la forma fon√©tica, transcribimos la palabra.  El valor de la forma fon√©tica se almacena en el diccionario y tambi√©n se calcula en la solicitud del usuario.  Los valores resultantes se comparan con la funci√≥n de distancia Damerau-Levenshtein. <br><br>  El diccionario se almacena en la base de datos MySQL.  Para no cargar el diccionario en la memoria de la aplicaci√≥n, se decidi√≥ calcular la distancia Damerau-Levenshtein en el lado de la base.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La funci√≥n definida por el usuario para calcular la distancia Damerau-Levenshtein</a> , escrita sobre la base <a href="">de la funci√≥n C escrita por Linus Torvalds</a> , cumpli√≥ plenamente con nuestros requisitos.  Creado por Diego Torres. <br><br>  Despu√©s de calcular la distancia Damerau-Levenshtein, fue necesario ordenar los resultados por grado de similitud para seleccionar el m√°s adecuado.  Para hacer esto, utilizamos el algoritmo Oliver: calcular la similitud de dos l√≠neas.  En php, este algoritmo est√° representado por la funci√≥n similar_texto.  Los dos primeros par√°metros de la funci√≥n aceptan las l√≠neas de entrada que deben compararse. El orden de comparaci√≥n de cadenas es importante, ya que la funci√≥n proporciona valores diferentes seg√∫n el orden en que se pasan las l√≠neas a la funci√≥n.  El tercer par√°metro debe pasar la variable en la que se coloca el resultado de la comparaci√≥n.  Este ser√° un n√∫mero de 0 a 100, lo que significa el porcentaje de similitud entre las dos l√≠neas.  Despu√©s del c√°lculo, los resultados se ordenan en orden descendente de similitud, luego se seleccionan las opciones con los mejores valores. <br><br>  Dado que el c√°lculo de la distancia Damerau-Levenshtein se realiz√≥ de acuerdo con la transcripci√≥n de la palabra, las palabras con significados no del todo relevantes cayeron en los resultados.  En este sentido, limitamos la selecci√≥n de opciones con un porcentaje de coincidencia de m√°s del 70%. <br><br>  Durante el proceso de desarrollo, notamos que nuestro algoritmo puede adivinar palabras en diferentes dise√±os.  Por lo tanto, necesit√°bamos expandir el diccionario agregando el significado de las palabras en el dise√±o inverso.  Los requisitos de b√∫squeda incluyeron solo dos dise√±os: ruso e ingl√©s.  Duplicamos cada palabra de la consulta de b√∫squeda del usuario en el dise√±o inverso y agregamos procesamiento para calcular la distancia Damerau-Levenshtein.  Las opciones de dise√±o directo e inverso se procesan de forma independiente, se seleccionan las opciones con el mayor porcentaje de similitud.  Solo para las opciones de dise√±o inverso, el valor en el dise√±o directo ser√° el valor de la consulta de b√∫squeda corregida. <br><br><h3>  Algoritmo de b√∫squeda difusa </h3><br>  As√≠, se form√≥ un algoritmo de acciones de 6 pasos principales.  Durante las pruebas, descubrimos que no todas las palabras en las solicitudes de los usuarios deben procesarse en su forma original o procesarse en general.  Para resolver estos casos, se introdujo un paso adicional, que llamamos convertidor o filtro.  Como resultado, el algoritmo final consisti√≥ en 7 pasos: <br><br><ol><li>  Divide la consulta en palabras separadas; </li><li>  Pase cada palabra a trav√©s del convertidor (al respecto); </li><li>  Para cada palabra, haga su forma en un dise√±o diferente; </li><li>  Componer una transcripci√≥n; </li><li>  Haga una consulta de b√∫squeda en la tabla del diccionario, comparando cada entrada a trav√©s de la distancia Damerau-Levenshtein; </li><li>  Deje solo registros con una distancia menor o igual a dos; </li><li>  A trav√©s del algoritmo Oliver, deje solo palabras con un porcentaje de similitud de m√°s del 70% </li></ol><br>  Esquem√°ticamente, este algoritmo es el siguiente: <br><br><img src="https://habrastorage.org/webt/jv/_e/zi/jv_ezix9ooxqmvb5qjwfdzpjho8.jpeg"><br><br><h3>  Conversi√≥n de palabras y funcionalidad de filtrado </h3><br>  Cuando comenzamos a probar el primer prototipo sin un convertidor, se hizo evidente que no era necesario tratar de adivinar todas las palabras en la solicitud del usuario.  Se ha creado un convertidor para estas restricciones.  Le permite convertir palabras a la forma que necesitamos y filtrar aquellas que, en nuestra opini√≥n, no necesitan ser adivinadas. <br><br>  Inicialmente, se decidi√≥ que la longitud m√≠nima de palabra que se deber√≠a pasar a trav√©s del algoritmo deber√≠a ser de al menos dos caracteres.  Despu√©s de todo, si el usuario ingres√≥ un pretexto o una uni√≥n de un personaje, entonces la probabilidad de adivinar es pr√°cticamente m√≠nima.  El segundo paso fue dividir la consulta en palabras.  En primer lugar, elegimos un conjunto de caracteres que pueden contener palabras: letras, n√∫meros, punto y gui√≥n (gui√≥n).  Los espacios y otros caracteres son delimitadores de palabras. <br><br>  Muy a menudo, los usuarios ingresan n√∫meros para indicar volumen o cantidad.  En este caso, ser√° incorrecto corregir dicha solicitud.  Por ejemplo, un usuario ingres√≥ la consulta ‚Äúagua 1.1 litros‚Äù.  Si corregimos su solicitud por 1.5 o 1.0, ser√° incorrecto.  En tales casos, decidimos omitir palabras con un n√∫mero.  Ellos, sin pasar por nuestro algoritmo, se transfieren a la b√∫squeda de texto completo de Sphinx. <br><br>  Otra conversi√≥n est√° asociada con puntos en las marcas, por ejemplo: Dr. Pepper o Mr.Proper.  En los casos en que hay un s√≠mbolo de punto en el medio de la palabra, lo dividimos en dos, agregando un espacio.  El segundo caso con un punto en el medio de la palabra: aqu√≠ recordamos las marcas abreviadas.  Por ejemplo, la marca ROCS: en este caso, cortamos los puntos y obtenemos una sola palabra.  Esta conversi√≥n funciona si solo hay una letra entre los puntos. <br><br>  En los casos en que hay un gui√≥n (gui√≥n) en la palabra, debe dividir la palabra en varios e intentar adivinarlos individualmente, y luego pegar las mejores opciones. <br><br>  Como resultado, se desarroll√≥ un convertidor para el reconocimiento m√°s preciso de la solicitud: este desarrollo en particular tom√≥ la mayor parte del trabajo para configurar toda la funcionalidad.  En gran parte gracias a √©l, se realiza el ajuste y ajuste de toda la b√∫squeda difusa.  Repita brevemente las reglas mediante las cuales se realizan la detecci√≥n y la conversi√≥n de palabras: <br><br><ul><li>  la palabra debe tener m√°s de 2 caracteres </li><li>  la palabra debe contener solo letras, un car√°cter de punto y un gui√≥n (gui√≥n) </li><li>  si el punto est√° en el medio de la palabra, se agrega un espacio despu√©s </li><li>  si es una abreviatura, los puntos se cortan y las letras se pegan </li><li>  no intentes adivinar la palabra si hay un n√∫mero en ella </li><li>  si la palabra contiene un gui√≥n (gui√≥n), luego div√≠dalo en varios, busque por separado y pegue al final </li></ul><br><h3>  Compilaci√≥n de diccionario </h3><br>  Como se mencion√≥ anteriormente, para corregir la solicitud de un usuario, es necesario determinar qu√© palabras est√°n mal escritas y cu√°les no.  Para esto, se cre√≥ un diccionario en el sistema donde deber√≠an incluirse palabras con la ortograf√≠a correcta. <br><br>  En la primera etapa, surgi√≥ la cuesti√≥n de llenar el diccionario; como resultado, decidimos usar el contenido del cat√°logo para compilarlo.  Como la informaci√≥n sobre productos se importaba de vez en cuando desde un sistema externo e indexada para el sistema de b√∫squeda de texto completo Sphinx, se decidi√≥ agregar la funcionalidad de compilaci√≥n del diccionario en esta etapa.  Seguimos la siguiente l√≥gica: si la palabra no est√° en el contenido de los productos, ¬øpor qu√© tratar de adivinarla? <br>  La informaci√≥n del producto se combin√≥ en un texto com√∫n y se realiz√≥ a trav√©s de un convertidor.  El modo operativo del convertidor se modific√≥ ligeramente: al separar las palabras a trav√©s de un gui√≥n (gui√≥n), cada una de las partes se guardaba en el diccionario por separado, al reemplazar los puntos en el diccionario, se agregan los datos originales y modificados.  Y como al comparar palabras para calcular la distancia Damerau-Levenshtein, se usa la transcripci√≥n de la palabra, adem√°s del diccionario, se agrega la transcripci√≥n. <br><br>  Hubo muchos errores tipogr√°ficos en el contenido de los productos, para este prop√≥sito se coloc√≥ una bandera en el diccionario, cuando se instal√≥ la palabra ya no se usa en la b√∫squeda.  El contenido de 35 mil productos permiti√≥ crear un diccionario de 100 mil palabras √∫nicas, que al final no fue suficiente para algunas consultas de los usuarios.  En este sentido, era necesario proporcionar una funci√≥n de carga para su enriquecimiento.  Se cre√≥ un comando de consola para cargar diccionarios.  El formato de los archivos con los datos de los diccionarios debe corresponder a csv.  Cada entrada contiene solo un campo con el campo del diccionario en s√≠.  Para distinguir los datos descargados de los datos generados en funci√≥n del contenido de los productos, se agreg√≥ una bandera especial. <br>  Como resultado, la tabla del diccionario tiene el siguiente esquema: <br><br><table><tbody><tr><th>  Nombre del campo </th><th>  Tipo de campo </th></tr><tr><td>  La palabra </td><td>  cuerda </td></tr><tr><td>  Transcripci√≥n </td><td>  cuerda </td></tr><tr><td>  Agregado manualmente </td><td>  bool </td></tr><tr><td>  No utilizar </td><td>  bool </td></tr></tbody></table><br>  Antes del desarrollo de la funcionalidad de b√∫squeda difusa, hab√≠a campos en los productos que conten√≠an un conjunto de palabras con errores tipogr√°ficos.  En la primera ejecuci√≥n de la generaci√≥n del diccionario, entraron en su contenido.  Como resultado, se obtuvo un diccionario con errores tipogr√°ficos, cuyo contenido no era adecuado para que el funcional funcionara correctamente.  Por lo tanto, se agreg√≥ otro comando de consola que ten√≠a la funcionalidad de generaci√≥n inversa de diccionario.  Utilizando el contenido de un campo de productos determinado, el equipo busc√≥ palabras en el diccionario y las borr√≥ del diccionario.  Despu√©s de la limpieza, dichos campos fueron excluidos de la indexaci√≥n. <br><br><h3>  Integraci√≥n de Bitrix </h3><br>  Para implementar la funcionalidad m√≠nima requerida, se crearon tres clases: <br><br><ul><li>  DictionaryTable: sistemas ORM de Bitrix para trabajar con un diccionario </li><li>  Diccionario - clase de generaci√≥n de diccionario </li><li>  Buscar - clase de implementaci√≥n de b√∫squeda </li></ul><br>  Para la integraci√≥n en Bitrix, fue necesario realizar cambios en 2 componentes: <br><br><ul><li>  bitrix: search.page </li><li>  bitrix.search.title </li></ul><br>  Antes de ejecutar la solicitud, se llama al m√©todo de procesamiento para detectar errores y seleccionar las opciones apropiadas: <br><br><img src="https://habrastorage.org/webt/8r/zg/9j/8rzg9jwnaetecysp7xqbqq1px-k.jpeg"><br><br>  Para compilar un diccionario, el m√≥dulo de b√∫squeda grab√≥ un evento para indexar los elementos del bloque de informaci√≥n con bienes (b√∫squeda: BeforeIndex). <br><br><img src="https://habrastorage.org/webt/ph/gw/ex/phgwexmqmprsu7sti7-hjn5if5s.jpeg"><br><br><img src="https://habrastorage.org/webt/a6/et/a3/a6eta39r-sxk3mwlgk4e6at4npa.jpeg"><br><br><h3>  Planes futuros </h3><br>  Este enfoque no es ideal en t√©rminos de rendimiento.  Con el aumento del tama√±o del diccionario a 1M + palabras, el tiempo de respuesta de la base de datos puede aumentar significativamente.  Si bien el diccionario es peque√±o, el rendimiento nos conviene.  Puede ser necesario implementar el algoritmo en el futuro a trav√©s de un aut√≥mata Levenshtein o un √°rbol de prefijos. <br><br><h3>  Conclusi√≥n </h3><br>  Por lo tanto, ning√∫n motor de b√∫squeda se ahorra la aparici√≥n de consultas que violan las reglas de ortograf√≠a generalmente aceptadas, ya sea un error tipogr√°fico aleatorio o una falta real de conocimiento de la ortograf√≠a de las palabras.  Por lo tanto, sin siquiera recurrir a las cl√°sicas opciones de b√∫squeda difusa Google o Yandex, puede crear la suya propia, gracias a la cual tanto el usuario como el propietario del sitio podr√°n obtener el resultado deseado. <br><br>  El c√≥digo de nuestra implementaci√≥n se puede ver en el repositorio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/qsoft-dev/damlev-bitrix</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es432892/">https://habr.com/ru/post/es432892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es432880/index.html">¬øQu√© sabes sobre electricidad al por mayor y al por menor?</a></li>
<li><a href="../es432882/index.html">Copos de nieve de bricolaje al estilo StarWars (upd.2018)</a></li>
<li><a href="../es432886/index.html">C√≥mo actualizar su equipo de producto: cultura, experimentaci√≥n y estructura</a></li>
<li><a href="../es432888/index.html">¬øC√≥mo es Heisenbug?</a></li>
<li><a href="../es432890/index.html">Linux, Microsoft y el marxismo</a></li>
<li><a href="../es432894/index.html">19 de diciembre, Mosc√∫ - OpsFormations</a></li>
<li><a href="../es432896/index.html">AXIS P1425-LE Mk II versus IDIS DC-T3233HRXL: Comparar c√°maras CCTV</a></li>
<li><a href="../es432898/index.html">Panoramas en StereoPi</a></li>
<li><a href="../es432900/index.html">Caracter√≠sticas del trabajo en un equipo internacional. Jap√≥n</a></li>
<li><a href="../es432902/index.html">El vuelo fallido a la luna: lo que se supo de una de las misiones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>