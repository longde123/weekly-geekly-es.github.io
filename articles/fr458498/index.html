<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÖ üëäüèº üôÖüèΩ Lignes directrices pratiques pour le d√©veloppement d'applications React √† grande √©chelle. Partie 2: gestion des √©tats, routage üêÄ üöó ü§©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous publions la deuxi√®me partie de la traduction du mat√©riel, qui est consacr√©e au d√©veloppement d'applications React √† grande √©chelle. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lignes directrices pratiques pour le d√©veloppement d'applications React √† grande √©chelle. Partie 2: gestion des √©tats, routage</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458498/">  Aujourd'hui, nous publions la deuxi√®me partie de la traduction du mat√©riel, qui est consacr√©e au d√©veloppement d'applications React √† grande √©chelle.  Ici, nous parlerons de la gestion de l'√©tat des applications, du routage et du d√©veloppement d'interface. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/be/rk/zj/berkzjayeeo2ap1yvpeeunb3b6e.png"></a> <br><br>  Partie 1: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lignes directrices pratiques pour le d√©veloppement d'applications React √† grande √©chelle.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Planification, actions, sources de donn√©es et API</a> <br><br>  Partie 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lignes directrices pratiques pour le d√©veloppement d'applications React √† grande √©chelle.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2: gestion des √©tats, routage</a> <br><br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Gestion de l'√©tat des applications, int√©gration Redux, organisation du routage</font> </h2><br>  Ici, nous parlerons de la fa√ßon dont vous pouvez √©tendre les fonctionnalit√©s de Redux afin de pouvoir effectuer de mani√®re ordonn√©e des op√©rations complexes dans l'application.  Si ces m√©canismes sont mal mis en ≈ìuvre, ils peuvent violer le mod√®le utilis√© dans la conception du r√©f√©rentiel. <br><br>  Les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonctions du g√©n√©rateur</a> JavaScript peuvent r√©soudre de nombreux probl√®mes associ√©s √† la programmation asynchrone.  Le fait est que ces fonctions peuvent √™tre d√©marr√©es et arr√™t√©es √† la demande du programmeur.  Le middleware Redux-saga utilise ce concept pour g√©rer les aspects probl√©matiques d'une application.  En particulier, nous parlons de r√©soudre de tels probl√®mes, qui ne peuvent pas √™tre r√©solus √† l'aide de r√©ducteurs, pr√©sent√©s sous la forme de fonctions pures. <br><br><h3>  <font color="#3AC1EF">‚ñçR√©soudre des t√¢ches qui ne peuvent pas √™tre r√©solues avec des fonctions pures</font> </h3><br>  Consid√©rez le sc√©nario suivant.  On vous a propos√© de travailler sur une application con√ßue pour une entreprise qui travaille sur le march√© immobilier.  Le client veut obtenir un nouveau site Web meilleur.  A votre disposition il y a une API REST, vous avez des mises en page de toutes les pages pr√©par√©es avec l'aide de Zapier, vous avez esquiss√© un plan d'application.  Mais un gros probl√®me s'est alors pos√©. <br><br>  L'entreprise cliente utilise depuis longtemps un certain syst√®me de gestion de contenu (CMS).  Les employ√©s de l'entreprise connaissent bien ce syst√®me, de sorte que le client ne souhaite pas passer √† un nouveau CMS simplement pour faciliter la r√©daction de nouveaux articles sur un blog d'entreprise.  En outre, vous devez √©galement copier les publications existantes du blog vers un nouveau site, ce qui peut √©galement entra√Æner un probl√®me. <br><br>  La bonne chose est que le CMS utilis√© par le client dispose d'une API pratique √† travers laquelle vous pouvez acc√©der aux publications du blog.  Mais, si vous avez cr√©√© un agent pour travailler avec cette API, la situation est compliqu√©e par le fait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">qu'il</a> se trouve sur un certain serveur sur lequel les donn√©es ne sont pas pr√©sent√©es du tout comme vous en avez besoin. <br><br>  Ceci est un exemple de probl√®me, quelque chose qui pourrait polluer le code de l'application, car ici vous devez inclure dans les m√©canismes du projet pour travailler avec la nouvelle API utilis√©e pour t√©l√©charger les articles de blog.  Vous pouvez g√©rer cette situation avec redux-saga. <br>  Jetez un ≈ìil au sch√©ma suivant.  C'est ainsi que notre application et notre API interagissent.  Nous t√©l√©chargeons les publications en arri√®re-plan √† l'aide de redux-saga. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56e/2b9/fdf/56e2b9fdfc5ea809c842a39cfed53bfe.jpg"></div><br>  <i><font color="#999999">Diagramme d'application utilisant le stockage Redux et redux-saga</font></i> <br><br>  Ici, le composant distribue l'action <code>GET.BLOGS</code> .  L'application utilise redux-saga, donc cette demande sera intercept√©e.  Apr√®s cela, la fonction de g√©n√©rateur t√©l√©chargera les donn√©es du magasin de donn√©es en arri√®re-plan et mettra √† jour l'√©tat de l'application pris en charge par Redux. <br><br>  Voici un exemple de la fa√ßon dont la fonction de g√©n√©rateur de chargement de publications (ces fonctions sont appel√©es ¬´sagas¬ª) pourrait ressembler dans la situation d√©crite.  Les sagas peuvent √™tre utilis√©es dans d'autres sc√©narios.  Par exemple, pour organiser le stockage des donn√©es utilisateur (par exemple, il peut s'agir de jetons), car il s'agit d'un autre exemple de t√¢che pour laquelle les fonctions pures ne conviennent pas. <br><br><pre> <code class="javascript hljs">... function* fetchPosts(action) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === WP_POSTS.LIST.REQUESTED) {   <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> call(wpGet, {       <span class="hljs-attr"><span class="hljs-attr">model</span></span>: WP_POSTS.MODEL,       <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: APPLICATION_JSON,       <span class="hljs-attr"><span class="hljs-attr">query</span></span>: action.payload.query,     });     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.error) {       <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({         <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.FAILED,         <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: response.error.response.data.msg,       });       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;         <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({       <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.SUCCESS,       <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: {         <span class="hljs-attr"><span class="hljs-attr">posts</span></span>: response.data,         <span class="hljs-attr"><span class="hljs-attr">total</span></span>: response.headers[<span class="hljs-string"><span class="hljs-string">'x-wp-total'</span></span>],         <span class="hljs-attr"><span class="hljs-attr">query</span></span>: action.payload.query,       },       <span class="hljs-attr"><span class="hljs-attr">view</span></span>: action.view,     });   } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e) {     <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> put({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: WP_POSTS.LIST.FAILED, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: e.message });  ...</code> </pre> <br>  La saga pr√©sent√©e ici attend des actions comme <code>WP_POSTS.LIST.REQUESTED</code> .  En recevant une telle action, il charge les donn√©es de l'API.  Apr√®s avoir re√ßu les donn√©es, elle envoie une autre action - <code>WP_POSTS.LIST.SUCCESS</code> .  Son traitement conduit √† mettre √† jour le r√©f√©rentiel √† l'aide du r√©ducteur appropri√©. <br><br><h3>  <font color="#3AC1EF">‚ñç Introduction de r√©ducteurs</font> </h3><br>  Lors du d√©veloppement de grandes applications, il est impossible de planifier √† l'avance le dispositif de tous les mod√®les n√©cessaires.  De plus, √† mesure que la taille de l'application augmente, l'utilisation de la technologie d'introduction de r√©ducteurs permet d'√©conomiser une grande quantit√© d'heures de travail.  Cette technique permet aux d√©veloppeurs d'ajouter de nouveaux r√©ducteurs au syst√®me sans r√©√©crire l'int√©gralit√© du r√©f√©rentiel. <br><br>  Il existe des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®ques</a> con√ßues pour cr√©er des r√©f√©rentiels Redux dynamiques.  Cependant, je pr√©f√®re le m√©canisme d'introduction des r√©ducteurs, car il donne au d√©veloppeur un certain niveau de flexibilit√©.  Par exemple, une application existante peut √™tre √©quip√©e de ce m√©canisme sans avoir √† r√©organiser s√©rieusement l'application. <br><br>  L'introduction de r√©ducteurs est une forme de s√©paration de code.  La communaut√© des d√©veloppeurs React adopte avec enthousiasme cette technologie.  J'utiliserai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> morceau de code pour d√©montrer l'apparence et les caract√©ristiques du m√©canisme d'impl√©mentation des r√©ducteurs. <br><br>  Tout d'abord, regardons son int√©gration avec Redux: <br><br><pre> <code class="javascript hljs">... const withConnect = connect( mapStateToProps, mapDispatchToProps, ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> withReducer = injectReducer({ <span class="hljs-attr"><span class="hljs-attr">key</span></span>: BLOG_VIEW, <span class="hljs-attr"><span class="hljs-attr">reducer</span></span>: blogReducer, }); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlogPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  ... } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> compose( withReducer, withConnect, )(BlogPage);</code> </pre> <br>  Ce code fait partie du fichier <code>BlogPage.js</code> qui contient le composant d'application. <br><br>  Ici, dans la commande d'exportation, nous n'utilisons pas la fonction <code>connect</code> , mais la fonction <code>compose</code> .  C'est l'une des fonctions de la biblioth√®que Redux qui vous permet de composer plusieurs fonctions.  La liste des fonctions pass√©es √† <code>compose</code> doit √™tre lue de droite √† gauche ou de bas en haut. <br><br>  Vous pouvez apprendre de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> Redux que la fonction de <code>compose</code> vous permet de cr√©er des transformations de fonctions profond√©ment imbriqu√©es.  Dans ce cas, le programmeur est lib√©r√© de la n√©cessit√© d'utiliser des structures tr√®s longues.  Ces constructions ressemblent √† des lignes de code repr√©sentant des appels √† certaines fonctions et leur transmettent les r√©sultats des appels √† d'autres fonctions comme arguments.  La documentation note que la fonction de <code>compose</code> doit √™tre utilis√©e avec prudence. <br><br>  La fonction la plus √† droite dans une composition peut prendre de nombreux arguments, mais un seul argument peut √™tre transmis aux fonctions qui la suivent.  Par cons√©quent, en appelant la fonction r√©sultant de l'utilisation de la <code>compose</code> , nous lui transmettons ce qu'elle prend des fonctions d'origine, ce qui est √† la droite de toutes les autres.  C'est pourquoi nous avons pass√© la fonction compose √† la fonction <code>withConnect</code> comme dernier param√®tre.  Par cons√©quent, la fonction de <code>compose</code> peut √™tre utilis√©e comme la fonction de <code>connect</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Routage et Redux</font> </h3><br>  Il existe un certain nombre d'outils utilis√©s pour r√©soudre les probl√®mes de routage dans les applications.  Dans cette section, cependant, nous nous concentrerons sur la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-router-dom</a> .  Nous allons √©tendre ses capacit√©s afin qu'il puisse fonctionner avec Redux. <br><br>  Le plus souvent, le routeur React est utilis√© comme ceci: le composant racine est enferm√© dans la balise <code>BrowserRouter</code> et les conteneurs enfants sont envelopp√©s dans la m√©thode <code>withRouter()</code> et export√©s ( <a href="">voici</a> un exemple). <br><br>  Avec cette approche, le composant enfant re√ßoit, via le m√©canisme d' <code>props</code> , un objet <code>history</code> contenant certaines propri√©t√©s sp√©cifiques √† la session utilisateur en cours.  Il existe certaines m√©thodes dans cet objet qui peuvent √™tre utilis√©es pour contr√¥ler la navigation. <br><br>  Cette option de routage peut entra√Æner des probl√®mes dans les grandes applications.  Cela est d√ª au fait qu'ils n'ont pas d'objet <code>history</code> centralis√©.  En outre, les composants qui ne sont pas rendus avec <code>&lt;Route&gt;</code> ne peuvent pas fonctionner avec l'objet <code>history</code> .  Voici un exemple utilisant <code>&lt;Route&gt;</code> : <br><br><pre> <code class="javascript hljs">&lt;Route path=<span class="hljs-string"><span class="hljs-string">"/"</span></span> exact component={HomePage} /&gt;</code> </pre> <br>  Pour r√©soudre ce probl√®me, nous utiliserons la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">connected-react-router</a> , qui nous permettra d'√©tablir le routage √† l'aide de la m√©thode de <code>dispatch</code> .  L'int√©gration de cette biblioth√®que dans le projet n√©cessitera quelques modifications.  En particulier, il sera n√©cessaire de cr√©er un nouveau r√©ducteur con√ßu sp√©cifiquement pour les itin√©raires (c'est assez √©vident), et √©galement d'ajouter quelques m√©canismes auxiliaires au syst√®me. <br><br>  Une fois sa configuration termin√©e, le nouveau syst√®me de routage peut √™tre utilis√© via Redux.  Ainsi, la navigation dans l'application peut √™tre impl√©ment√©e en envoyant des actions. <br><br>  Afin de tirer parti des capacit√©s de la biblioth√®que de routeur connect√©-r√©actif dans le composant, nous mappons simplement la m√©thode de <code>dispatch</code> au r√©f√©rentiel, ceci en fonction des besoins de l'application.  Voici un exemple de code qui illustre l'utilisation de la biblioth√®que connected-react-router (pour que ce code fonctionne, vous avez besoin que le reste du syst√®me soit configur√© pour utiliser connected-react-router). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { push } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'connected-react-router'</span></span> ... const mapDispatchToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch</span></span></span><span class="hljs-function"> =&gt;</span></span> ({  <span class="hljs-attr"><span class="hljs-attr">goTo</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">payload</span></span></span><span class="hljs-function"> =&gt;</span></span> {    dispatch(push(payload.path));  }, }); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DemoComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  render() {    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">      &lt;Child        onClick={          (</span></span></span><span class="hljs-function">) =&gt;</span></span> {            <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.goTo({ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">`/gallery/`</span></span>});                      <span class="hljs-regexp"><span class="hljs-regexp">/&gt;    } ...</span></span></code> </pre> <br>  Ici, la m√©thode <code>goTo</code> distribue une action qui pousse l'URL requise <code>goTo</code> pile d'historique <code>goTo</code> navigateur.  Auparavant, la m√©thode <code>goTo</code> √©tait <code>goTo</code> au r√©f√©rentiel.  Par cons√©quent, cette m√©thode est transmise au <code>DemoComponent</code> dans l'objet <code>props</code> . <br><br><h2>  <font color="#3AC1EF">Interface utilisateur dynamique et besoins d'une application en pleine croissance</font> </h2><br>  Au fil du temps, malgr√© la pr√©sence d'un backend ad√©quat pour l'application et d'une partie client de haute qualit√©, certains √©l√©ments de l'interface utilisateur commencent √† affecter gravement le travail de l'utilisateur.  Cela est d√ª √† l'impl√©mentation irrationnelle des composants qui, √† premi√®re vue, semble tr√®s simple.  Dans cette section, nous discuterons des recommandations pour la cr√©ation de certains widgets.  Leur mise en ≈ìuvre correcte, √† mesure que l'application se d√©veloppe, devient plus compliqu√©e. <br><br><h3>  <font color="#3AC1EF">‚ñç Chargement paresseux et React.Suspense</font> </h3><br>  La meilleure partie de la nature asynchrone de JavaScript est qu'il tire parti de tout le potentiel du navigateur.  Peut-√™tre que le v√©ritable avantage est que pour d√©marrer un certain processus, vous n'avez pas besoin d'attendre la fin de la t√¢che pr√©c√©dente.  Cependant, les d√©veloppeurs ne peuvent pas influencer le r√©seau et la vitesse de chargement des diff√©rents mat√©riaux n√©cessaires au fonctionnement des sites. <br><br>  Les sous-syst√®mes r√©seau sont g√©n√©ralement per√ßus comme peu fiables et sujets aux erreurs. <br><br>  Le d√©veloppeur, dans un souci de rendre sa candidature la plus haute qualit√© possible, peut la soumettre √† de nombreux contr√¥les et r√©ussir son passage.  Mais il y a encore certaines choses, comme l'√©tat de la connexion r√©seau ou le temps de r√©ponse du serveur, que le d√©veloppeur ne peut pas influencer. <br><br>  Mais les cr√©ateurs du logiciel ne cherchent pas √† justifier le travail de mauvaise qualit√© des applications avec des phrases comme ¬´ce n'est pas mon affaire¬ª.  Ils ont trouv√© des moyens int√©ressants de r√©soudre les probl√®mes de r√©seau. <br><br>  Dans certaines parties de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">application frontale, vous</a> devrez peut-√™tre afficher certains mat√©riaux de sauvegarde (tels que le chargement beaucoup plus rapide que les mat√©riaux r√©els).  Cela √©vitera √† l'utilisateur d'envisager le "tics" des pages de chargement ou, pire encore, de telles ic√¥nes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f47/123/d6a/f47123d6ab6e8e85a0d445742e33031c.png"></div><br>  <i><font color="#999999">Les utilisateurs feraient mieux de ne rien voir de tel.</font></i> <br><br>  La technologie React Suspense vous permet de faire face √† ces probl√®mes.  Par exemple, il vous permet d'afficher un certain indicateur lors du chargement des donn√©es.  Bien que cela puisse √©galement √™tre fait manuellement en d√©finissant la propri√©t√© <code>isLoaded</code> sur <code>true</code> , l'utilisation de l'API Suspense rend le code beaucoup plus propre. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici,</a> vous pouvez regarder une bonne vid√©o sur Suspense, dans laquelle Jared Palmer pr√©sente au public cette technologie et montre certaines de ses fonctionnalit√©s √† l'aide d'un exemple d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">application r√©elle</a> . <br><br>  Voici comment fonctionne l'application sans utiliser Suspense. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d49/7bc/734/d497bc7344af043e19445fa8299a35d0.gif"></div><br>  <i><font color="#999999">Application dans laquelle Suspense n'est pas utilis√©</font></i> <br><br>  √âquiper un composant avec la prise en charge de Suspense est beaucoup plus facile que d'utiliser <code>isLoaded</code> √©chelle de l' <code>isLoaded</code> .  Commen√ßons par placer le conteneur d' <code>App</code> parent dans <code>React.StrictMode</code> .  Nous veillons √† ce que parmi les modules React utilis√©s dans l'application, il n'y en ait pas qui soient consid√©r√©s comme obsol√®tes. <br><br><pre> <code class="javascript hljs">&lt;React.Suspense fallback={&lt;Spinner size=<span class="hljs-string"><span class="hljs-string">"large"</span></span> /&gt;}&gt;  &lt;ArtistDetails id={this.props.id}/&gt;  &lt;ArtistTopTracks /&gt;  &lt;ArtistAlbums id={this.props.id}/&gt; &lt;/React.Suspense&gt;</code> </pre> <br>  Les composants envelopp√©s dans des balises <code>React.Suspense</code> , lors du chargement du contenu principal, chargent et affichent ce qui est sp√©cifi√© dans la propri√©t√© de <code>fallback</code> .  Nous devons nous efforcer de faire en sorte que les composants utilis√©s dans la propri√©t√© de <code>fallback</code> aient le plus petit volume possible et soient dispos√©s aussi simplement que possible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b9/d1c/54e/9b9d1c54ea0a5d7c26ea7e0a7bbdebee.gif"></div><br>  <i><font color="#999999">Application qui utilise Suspense</font></i> <br><br><h3>  <font color="#3AC1EF">‚ñçComposants adaptatifs</font> </h3><br>  Dans les grandes applications frontales, la manifestation de motifs r√©p√©titifs est courante.  Dans le m√™me temps, au tout d√©but des travaux, cela peut √™tre presque totalement non √©vident.  Il n'y a rien √† faire √† ce sujet, mais vous devez l'avoir rencontr√©. <br><br>  Par exemple, il existe deux mod√®les dans l'application.  L'un d'eux est destin√© √† la description des pistes de course, et le second - √† la description des voitures.  La page de liste de voitures utilise des √©l√©ments carr√©s.  Chacun d'eux contient une image et une br√®ve description. <br><br>  La liste de trace utilise des √©l√©ments similaires.  Leur principale caract√©ristique est qu'en plus de l'image et de la description de la piste, ils ont √©galement un petit champ indiquant s'il est possible pour les spectateurs d'une course se d√©roulant sur cette piste d'acheter quelque chose √† manger. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6c9/8b3/8ab/6c98b38ab2cf0c2670751908581d26d0.png"></div><br>  <i><font color="#999999">√âl√©ment pour d√©crire une voiture et √©l√©ment pour d√©crire une piste</font></i> <br><br>  Ces deux composants sont l√©g√®rement diff√©rents l'un de l'autre en termes de style (ils ont des couleurs de fond diff√©rentes).  Le composant qui d√©crit l'itin√©raire contient des informations suppl√©mentaires sur l'objet du monde r√©el qu'il d√©crit, tandis que le composant qui symbolise la voiture ne dispose pas de ces informations.  Cet exemple montre seulement deux mod√®les.  Dans une grande application, de nombreux mod√®les similaires peuvent √™tre saisis, ne diff√©rant que par de petites choses. <br><br>  La cr√©ation de composants ind√©pendants s√©par√©s pour chacune de ces entit√©s est contraire au bon sens. <br><br>  Un programmeur peut se sauver le besoin d'√©crire des fragments de code qui se r√©p√®tent presque compl√®tement.  Cela peut se faire gr√¢ce au d√©veloppement de composants adaptatifs.  Ils, au cours du travail, tiennent compte de l'environnement dans lequel ils ont √©t√© charg√©s.  Consid√©rez la barre de recherche d'une certaine application. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a27/334/4e5/a273344e57f1ea8aa88269f8dad8e7dd.png"></div><br>  <i><font color="#999999">Barre de recherche</font></i> <br><br>  Il sera utilis√© sur de nombreuses pages.  Dans le m√™me temps, des modifications mineures seront apport√©es √† son apparence et √† l'ordre de son travail sur diff√©rentes pages.  Par exemple, sur la page d'accueil du projet, il sera l√©g√®rement plus grand que sur les autres pages.  Afin de r√©soudre ce probl√®me, vous pouvez cr√©er un seul composant qui sera affich√© en fonction des propri√©t√©s qui lui sont transf√©r√©es. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> propTypes = {  <span class="hljs-attr"><span class="hljs-attr">open</span></span>: PropTypes.bool.isRequired,  <span class="hljs-attr"><span class="hljs-attr">setOpen</span></span>: PropTypes.func.isRequired,  <span class="hljs-attr"><span class="hljs-attr">goTo</span></span>: PropTypes.func.isRequired, };</code> </pre> <br>  En utilisant cette technique, vous pouvez contr√¥ler l'utilisation des classes HTML lors du rendu de ces √©l√©ments, ce qui vous permet d'influencer leur apparence. <br><br>  Une autre situation int√©ressante dans laquelle les composants adaptatifs peuvent trouver une application est le m√©canisme de d√©composition de certains mat√©riaux en pages.  Une barre de navigation peut √™tre pr√©sente sur chaque page de l'application.  Les instances de ce panneau sur chacune des pages seront presque exactement les m√™mes que sur les autres pages. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c86/7ee/d8d/c867eed8d85f120940a321d95fc274f2.png"></div><br>  <i><font color="#999999">Panneau de pagination</font></i> <br><br>  Supposons qu'une certaine application ait besoin d'un panneau similaire.  Lorsqu'ils travaillent sur cette application, les d√©veloppeurs respectent les exigences articul√©es en temps opportun.  Dans une telle situation, le composant adaptatif utilis√© pour diviser le mat√©riau en pages n'a besoin que de quelques propri√©t√©s.  Il s'agit de l' <code>URL</code> et du nombre d'√©l√©ments par page. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  L'√©cosyst√®me React est devenu si mature ces jours-ci qu'il est peu probable que quiconque ait jamais besoin ¬´d'inventer un v√©lo¬ª √† n'importe quel stade du d√©veloppement de l'application.  Bien que cela joue entre les mains des d√©veloppeurs, cela conduit au fait qu'il devient difficile de choisir exactement ce qui fonctionne bien pour chaque projet sp√©cifique. <br><br>  Chaque projet est unique en termes de port√©e et de fonctionnalit√©.  Il n'y a pas d'approche unique ni de r√®gle universelle dans le d√©veloppement d'applications React.  Par cons√©quent, avant de commencer le d√©veloppement, il est important de le planifier correctement. <br><br>  Lors de la planification, il est tr√®s facile de comprendre quels outils sont directement cr√©√©s pour le projet et lesquels ne sont clairement pas adapt√©s √† lui, √©tant trop grands pour lui.  Par exemple, une application compos√©e de 2-3 pages et effectuant tr√®s peu de requ√™tes vers certaines API n'a pas besoin de magasins de donn√©es similaires √† ceux dont nous avons parl√©.  Je suis pr√™t √† aller encore plus loin dans ces consid√©rations et √† dire que dans les petits projets, vous n'avez pas besoin d'utiliser Redux. <br>  Au stade de la planification de l'application, tout en dessinant les dispositions de ses pages, il est facile de voir que de nombreux composants similaires sont utilis√©s sur ces pages.  Si vous essayez de r√©utiliser le code de tels composants ou que vous vous efforcez d'√©crire des composants universels, cela vous permettra d'√©conomiser beaucoup de temps et d'efforts. <br><br>  Et enfin, je voudrais noter que les donn√©es sont au c≈ìur de toute application.  Et les applications React ne font pas exception.  Au fur et √† mesure que l'√©chelle de l'application augmente, les volumes de donn√©es trait√©es augmentent, des m√©canismes logiciels suppl√©mentaires pour travailler avec eux apparaissent.  Quelque chose comme √ßa, si l'application est mal con√ßue, peut facilement ¬´√©craser¬ª les programmeurs, les remplissant de t√¢ches complexes et d√©routantes.  Si, au cours de la planification, les probl√®mes d'utilisation des entrep√¥ts de donn√©es √©taient d√©cid√©s √† l'avance, si l'ordre de travail des actions, des r√©ducteurs, de l'affaissement √©tait pens√© √† l'avance, alors travailler sur l'application serait beaucoup plus facile. <br><br>  <b>Chers lecteurs!</b>  Si vous connaissez des biblioth√®ques ou des m√©thodologies de d√©veloppement qui fonctionnent bien lors de la cr√©ation d'applications React √† grande √©chelle, veuillez les partager. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458498/">https://habr.com/ru/post/fr458498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458488/index.html">Data Science Digest (juillet 2019)</a></li>
<li><a href="../fr458490/index.html">Tenez fermement le volant ... Notre projet de surveillance de la condition des conducteurs</a></li>
<li><a href="../fr458492/index.html">¬´Nous avons toujours cru √† la concurrence et au droit de choisir un utilisateur¬ª ¬© Yandex</a></li>
<li><a href="../fr458494/index.html">Un exemple pratique d'utilisation des fonctions de rendu de Vue: cr√©ation d'une grille typographique pour un syst√®me de conception</a></li>
<li><a href="../fr458496/index.html">Lignes directrices pratiques pour le d√©veloppement d'applications React √† grande √©chelle. Planification, actions, sources de donn√©es et API</a></li>
<li><a href="../fr458500/index.html">M√©tamorphose des tests de redux-saga</a></li>
<li><a href="../fr458502/index.html">Le secret principal pour d√©velopper de bonnes applications Electron</a></li>
<li><a href="../fr458504/index.html">13 astuces pour gagner du temps</a></li>
<li><a href="../fr458506/index.html">Pas Portal 3, mais close: t√©l√©portation quantique d'informations √† l'int√©rieur d'un diamant</a></li>
<li><a href="../fr458508/index.html">Un regard int√©rieur: √©cole doctorale √† l'EPFL. Partie 4.2: l'aspect financier</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>