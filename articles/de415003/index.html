<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📊 🛀 🤘 Uneingeschränkter Datei-Upload bei Apple.com 📠 🚗 👩🏿‍🤝‍👨🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Achtung - Dies ist eine leichtfertige Übersetzung einer Notiz darüber, wie Jonathan Bouman die öffentliche AWS S3 gefunden hat, die in einer der Apple...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Uneingeschränkter Datei-Upload bei Apple.com</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415003/"> Achtung - Dies ist eine <u>leichtfertige Übersetzung einer</u> Notiz darüber, wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jonathan Bouman</a> die öffentliche AWS S3 gefunden hat, die in einer der Apple.com-Subdomains verwendet wurde.  Außerdem ist der Hinweis insofern gut, als er die Vorteile mehrerer kleiner Dienstprogramme in Verbindung mit Geduld demonstriert. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e31/c98/793/e31c98793f41314f4fc544503f2803de.gif"><br><a name="habracut"></a><br>  Nehmen Sie Kaffee und starten Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aquatone</a> .  Dieses Dienstprogramm kann Subdomains in einer bestimmten Domäne mithilfe von Open Source und Brute Force mit einem Wörterbuch erkennen. <br><br><img src="https://habrastorage.org/webt/74/w6/pi/74w6pis7qxygs0akdl4spqcomfi.png"><br><br>  Aquatone hat vier verschiedene Teams: <br><br><ol><li>  Aquatone-Discover - Sucht nach verschiedenen Subdomains </li><li>  Aquatone-Scan - Scannt das Ergebnis von Punkt 1.  Ports öffnen </li><li>  Aquatone-Gather - Erstellt Screenshots jeder Subdomain und sammelt alle Ergebnisse in einem HTML-Bericht </li><li>  Aquatone-Übernahme - versucht, inaktive Subdomains zu finden, die von externen Hosts gehostet werden.  Einen gefunden?  Registrieren Sie sich und erhalten Sie Ihre Belohnung! </li></ol><br><img src="https://habrastorage.org/webt/tp/tu/l6/tptul6mj8p2h5acita-m9ku-usg.png"><br>  <sup>Berichtsausgabe von Aquatone</sup> <br>  Wir sitzen, warten, träumen. <br><br>  Normalerweise dauert das Suchen, Scannen und Sammeln einige Minuten. <br>  Was ist mit Apple.com?  Es dauerte 30 Minuten, 84 Berichte, 18.000 einzigartige Hosts. <br><br>  Verwenden wir als erste Aquatone für den apple.com-Scan?  Auf keinen Fall.  Haben andere Leute alle 84 Seiten gelesen?  Auf keinen Fall. <br><br>  Beginnen Sie also mit Seite 50 und lesen Sie nur die letzten 34 Seiten. <br><br>  <b>Suchen Sie nach Musteranomalien</b> <br><br>  Nach 50 Minuten Lesen von Berichten wird eine Vorlage bemerkt.  Eine davon ist, dass apple.com manchmal AWS S3 verwendet, um Dateien zu speichern, die von ihren Subdomains verwendet werden.  Wenn Sie also Schreibzugriff auf eine von S3 erhalten, können Sie Zugriff auf eine der Apple.com-Subdomains gewähren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba6/63e/31c/ba663e31cf3c690db10fdbaa8a306bc1.gif"><br><br>  Das Lesen aller 84x-Berichte ist langweilig.  Alle Berichte enthalten vom Server gesendete http-Header.  S3 - sendet immer den X-Amz-Bucket-Region-Header.  Suchen Sie nach diesem Titel in Berichten: <br><br><img src="https://habrastorage.org/webt/sc/ra/qd/scraqd7fwockju7te9wqwck5vvu.png"><br><br>  Jetzt muss jedes manuell angeklickt werden, um zu sehen, was passiert, wenn Sie die URL öffnen.  Fast alle Subdomains geben Zugriff verweigert. <br><br><img src="https://habrastorage.org/webt/4c/2r/lf/4c2rlfg1db6ublcdugpwnufyhgk.png"><br><br>  Außer einem: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">live-promotions.apple.com</a> <br><br><img src="https://habrastorage.org/webt/wt/-v/la/wt-vla7xye3kfleiqhmhvtr0hmu.png"><br>  <sup>S3-Antwort, die den Bucket-Namen und den Verzeichnisinhalt enthält.</sup> <br><br>  Jetzt gibt es also den Namen S3 Bucket.  Auf diese Weise können Sie eine direkte Verbindung herstellen. <br><br>  Informationen zum Zugriff finden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie hier</a> . <br><br>  Sie müssen die Befehlszeilenschnittstelle von AWS installieren und können versuchen, diesen Bucket unter Verwendung des Namens aus der obigen Antwort zu öffnen <br><br>  Danach können Sie versuchen, die gefälschte Anmeldeseite herunterzuladen und im Browser zu öffnen. <br><br><pre><code class="hljs ruby">aws s3 cp login.html <span class="hljs-symbol"><span class="hljs-symbol">s3:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/$bucketName --grants read=uri=http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/acs.amazonaws.com/groups</span></span><span class="hljs-regexp"><span class="hljs-regexp">/global/</span></span>AllUsers</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/e31/c98/793/e31c98793f41314f4fc544503f2803de.gif"><br>  <sup>Alarm Koch</sup> <br><br>  <b>Fazit</b> <br>  Es wurde der vollständige Zugriff zum Lesen / Schreiben auf den S3-Bucket von Apple erhalten, der auf einer ihrer Subdomains verfügbar ist.  Genug, um die Phishing-Site zu überfluten oder Cookies zu stehlen. <br><br>  <b>Lösung</b> <br>  Gewähren Sie niemals anonymen Benutzern Lese- / Schreibberechtigungen <br>  Glücklicherweise ist der S3-Schutz ziemlich einfach und standardmäßig. <br>  Siehe doc: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">docs.aws.amazon.com/AmazonS3/latest/dev/access-control-overview.html</a> <br><br>  <b>Was war das:</b> <br><br>  - Hochgeladene Phishing-Seite auf live-promotions.apple.com <br>  - Sie könnten Besucher-Cookies stehlen <br>  - Es war möglich, vertrauliche Dateien aus dem Bucket zu ziehen (es enthielt Projekte auf xcode) <br><br>  <b>Hall of Fame</b> <br><br>  Nach 4 Stunden erhielt ich eine Antwort von Apple, die den Fehler bestätigte.  Es wurde an diesem Tag korrigiert und wird jetzt in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hall of Fame erwähnt</a> <br><br><div class="spoiler">  <b class="spoiler_title">Brief + Bildschirm vom Publikum</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/3f/67/xf/3f67xf9rf1umonhzjvmvasqtyoy.png"><br><img src="https://habrastorage.org/webt/6x/hu/mp/6xhump7dcssa8g1lxrps_z3noka.png"><br></div></div><br>  <b>Zeitleiste</b> <br><br>  19.06.2008 Fehler entdeckt und gemeldet <br>  19.06.2008 Apple hat den Fehler bestätigt <br>  19.06.2008 Apple hat den Fehler behoben <br>  22.06.2008 Apple hat mich in der Hall of Fame erwähnt <br>  22.06.2008 Diesen Blog veröffentlicht </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415003/">https://habr.com/ru/post/de415003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414993/index.html">Identifizierung und Klassifizierung toxischer Kommentare. Vortrag in Yandex</a></li>
<li><a href="../de414995/index.html">Amateurnotizen oder Die Geschichte, wie der Scala FPGA-Entwickler konfiguriert hat</a></li>
<li><a href="../de414997/index.html">ML-Blitz: Analyse der Aufgaben der ersten Qualifikationsrunde</a></li>
<li><a href="../de414999/index.html">3D Watchman und Thermistor Tester</a></li>
<li><a href="../de415001/index.html">Der Fahrer des Uber-Roboterautos, der einen Radfahrer abgeschossen hatte, sah sich zum Zeitpunkt der Kollision die Voice-Show an</a></li>
<li><a href="../de415005/index.html">Sonnenkollektoren, Sprachbefehle und Offroad-Rennen: Gegenwart und Zukunft von Elektrofahrrädern</a></li>
<li><a href="../de415007/index.html">So richten Sie Bluetooth unter Linux auf komplizierte Weise ein</a></li>
<li><a href="../de415009/index.html">Wer ist das in Nordamerika? Rekrutierung - Teil 1</a></li>
<li><a href="../de415011/index.html">Bericht des Club of Rome 2018, Kapitel 3.10: „Steuer auf Beats“</a></li>
<li><a href="../de415015/index.html">Bewertung von IT-Arbeitgebern in Nischni Nowgorod: eine Studie über die Präferenzen von Studenten technischer Fachrichtungen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>