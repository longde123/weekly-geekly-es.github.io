<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🚒 💆 🎰 JavaScript in 3D: eine Einführung in Three.js 🔲 👐🏾 ✌️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo habr Ich präsentiere Ihnen die Übersetzung des Artikels "JavaScript in 3D: eine Einführung in Three.js" von Bret Cameron. 

 Einleitung  
 Three...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JavaScript in 3D: eine Einführung in Three.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477956/">  <i>Hallo habr</i>  <i>Ich präsentiere Ihnen die Übersetzung des <a href="https://medium.com/javascript-in-plain-english/javascript-in-3d-an-introduction-to-three-js-780f1e4a2e6d">Artikels</a> "JavaScript in 3D: eine Einführung in Three.js" von Bret Cameron.</i> <br><br><h2>  Einleitung </h2> <br>  Three.js ist ein mächtiges Werkzeug.  Es ist hilfreich, 3D-Design in einem Browser mit akzeptabler Leistung zu verwenden.  Erste Schritte Three.js kann schwierig sein, insbesondere wenn Sie noch nie zuvor in die 3D-Programmierwelt eingetaucht sind. <br><br>  Ich habe einige grundlegende Erfahrungen mit der Unity- und C # -Spiel-Engine, aber dennoch sind viele der Konzepte für mich neu.  Ich bin zu dem Schluss gekommen, dass es für Anfängerentwickler nur sehr wenige Ressourcen gibt, und habe mich daher entschlossen, diesen Artikel zu schreiben.  Darin werden die Grundelemente von Three.js Szenen von Polygonnetzen und Materialien über Geometrie bis hin zu Ladern und vielem mehr betrachtet. <br><a name="habracut"></a><br>  Am Ende dieses Artikels erhalten Sie ein solides Verständnis der grundlegenden Aspekte, die erforderlich sind, um Ihrem zukünftigen Webprojekt eine zusätzliche Dimension hinzuzufügen. <br><br>  Drei Beispiele von <a href="https://threejs.org/examples/">Ben Houston</a> , <a href="https://threejs.org/examples/">Thomas Diewald</a> und <a href="https://threejs.org/examples/">StrykerDoesAnimation</a> . <br><br><h3>  Vektoren und Container - Grundbausteine </h3><br>  Oft gibt es zwei Hauptklassen in Three.js - <i>Vector3</i> und <i>Box3</i> .  Wenn Sie 3D noch nicht kennen, klingt dies vielleicht ein bisschen abstrakt, aber Sie werden sie öfter treffen. <br><br><h3>  Vector3 </h3><br>  Die grundlegendste 3D-Klasse mit drei Zahlen: <i>x, y und z</i> .  Zahlen sind die Koordinaten eines Punktes im 3D-Raum oder die Richtung und Länge.  Zum Beispiel: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Vector3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  Die meisten Konstruktoren in Three.js akzeptieren Objekte vom Typ <i>Vector3</i> als Eingabeargumente, z. B. <i>Box3</i> <br><br><h3>  Box3 </h3><br>  Diese Klasse repräsentiert Quader (3D-Container).  Seine Hauptaufgabe besteht darin, einen Container um andere Objekte zu erstellen - und das ist alles, der kleinste Quader, in den ein 3D-Objekt passt.  Jede <i>Box3 ist</i> um die <i>x-, y- und z-</i> Achse ausgerichtet <i>.</i>  Ein Beispiel zum Erstellen eines Containers mit <i>Vector3</i> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Vector3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> box = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Box3(vect);</code> </pre> <br>  Ein Beispiel zum Erstellen eines Containers um ein vorhandenes 3D-Objekt: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> box = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Box3(); box.setFromObject(object);</code> </pre> <br>  Sie können Grids ohne dieses fundierte Wissen erstellen. Sobald Sie jedoch mit der Entwicklung oder Änderung Ihrer Modelle beginnen, sind diese Klassen auf jeden Fall hilfreich.  Jetzt werden wir uns von Abstraktionen zu sichtbareren Dingen entfernen. <br><br><h3>  Polygonnetz </h3><br>  In Three.js ist <i>Mesh</i> das wichtigste visuelle Element auf der Bühne.  Dies ist ein 3D-Objekt aus dreieckigen Rechtecken (Polygonnetz).  Es besteht aus zwei Objekten: <br>  <i>Geometrie</i> - bestimmt die Form, <i>Material</i> - bestimmt das Aussehen. <br><br>  Ihre Definitionen wirken möglicherweise etwas verwirrend (z. B. enthält die <i>Geometrieklasse</i> möglicherweise Informationen zu Farben), aber der Hauptunterschied besteht genau darin. <br><br><h3>  Geometrie </h3><br>  Abhängig von der gewünschten Aufgabe können Sie die Geometrie in Three.js definieren oder eine andere aus einer Datei importieren. <br><br>  Mit Funktionen wie <i>THREE.TorusKnotGeometry</i> können wir komplexe Objekte mit einer einzigen Codezeile erstellen.  Wir werden bald darauf eingehen, aber zunächst über einfachere Formen nachdenken. <br>  Die einfachste 3D-Figur, Quader oder Container, kann durch die Parameter <i>Breite</i> , <i>Höhe</i> und <i>Tiefe</i> angegeben werden. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.BoxGeometry( <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span> );</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/BretCameron/embed/preview/eYOxYZL" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Für eine Kugel ist der Wert der Parameter <i>radius</i> , <i>widthSegments</i> und <i>heightSegments minimal</i> .  Die letzten beiden Variablen geben an, mit wie vielen Dreiecken das Modell die Kugel darstellen soll: Je größer die Zahl, desto glatter wird sie. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.SphereGeometry( <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span> );</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/BretCameron/embed/preview/KKPJKgQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Wenn wir scharfe oder dreieckige Formen herstellen möchten, können wir einen Kegel verwenden.  Seine Argumente sind eine Kombination der Argumente der beiden vorhergehenden Figuren.  Nachfolgend geben wir <i>Radius</i> , <i>WidthSegments</i> und <i>RadialSegments vor</i> . <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.ConeBufferGeometry( <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span> );</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/BretCameron/embed/preview/MWgLWJB" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Dies ist nur ein Teil der häufigsten Zahlen.  Three.js enthält viele Formen, die in der Dokumentation zu finden sind.  In diesem Artikel werden weitere interessante Formulare vorgestellt, die auf der <i>TorusKnotGeometry-</i> Methode <i>basieren</i> . <br><br>  Warum sehen diese Formen genau so aus, wie sie aussehen?  Diese Frage würde den Rahmen dieses Artikels sprengen, aber ich rate Ihnen dringend, mit Parameterwerten zu experimentieren, da Sie mit einer Codezeile sehr interessante Formen erhalten können! <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.TorusKnotGeometry(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">1.3</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>);</code> </pre> <br>  <a href="https://codepen.io/BretCameron/pen/gOYqORg">https://codepen.io/BretCameron/pen/gOYqORg</a> <br><br><h3>  Material </h3><br>  Geometrie definiert die Form unserer 3D-Objekte, nicht jedoch deren Erscheinungsbild.  Um dies zu beheben, benötigen wir Materialien. <br><br>  Three.js bietet 10 Materialien an, von denen jedes seine eigenen Vorteile und anpassbaren Parameter hat.  Wir werden nur einen Teil der nützlichsten betrachten. <br><br><img src="https://habrastorage.org/webt/7o/1r/av/7o1rav-we2n9_hn6e74l-6ivo6q.png"><br><br><h4>  MeshNormalMaterial </h4><br>  <i>Nützlich für den schnellen Start und Start.</i> <br><br>  Wir beginnen mit <i>MeshNormalMaterial</i> , dem mehrfarbigen Material, das wir in den obigen Beispielen verwendet haben.  Sie entspricht den normalen Vektoren im RGB-Bedienfeld, dh, die Position des Vektors im 3D-Raum wird anhand von Farben bestimmt. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshNormalMaterial();</code> </pre> <br>  Beachten Sie, dass Sie den CSS-Filter verwenden und die Sättigung ändern können, wenn Sie die Farbe des Materials ändern möchten: <pre> <code class="javascript hljs"> filter: hue-rotate(<span class="hljs-number"><span class="hljs-number">90</span></span>deg) .</code> </pre> <br><br>  Meiner Erfahrung nach ist dieses Material für eine schnelle Schicht und den Start nützlicher.  Für eine bessere Kontrolle Ihrer Objekte ist es besser, etwas anderes zu verwenden. <br><br><h4>  Meshbasismaterial </h4><br>  <i>Nützlich, wenn nur das Skelett angezeigt wird.</i> <br><br>  Wenn Sie der Figur eine einzelne Farbe geben möchten, können Sie <i>MeshBasicMaterial</i> nur verwenden, wenn keine Beleuchtung angewendet wird.  Ich fand es nützlich, dieses Material beim Rendern des Modellskeletts zu verwenden.  Um nur das Skelett zu zeichnen, müssen Sie <i>{wireframe: true}</i> als Parameter übergeben. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshBasicMaterial({ <span class="hljs-attr"><span class="hljs-attr">wireframe</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xdaa520</span></span> });</code> </pre> <br>  Der Hauptnachteil dieses Materials ist, dass Informationen über die Tiefe des Materials vollständig verloren gehen.  Jedes Material hat die Option, nur das Skelett anzuzeigen, aber nur ein Material löst das Problem der fehlenden Tiefe - <i>MeshDepthMaterial</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/BretCameron/embed/preview/ZEzwERw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Meshhambertmaterial </h4><br>  <i>Nützlich für hohe Leistung bei geringer Genauigkeit.</i> <br><br>  Dies ist das erste Material, das Licht berücksichtigt, daher müssen Sie unserer Szene etwas Licht hinzufügen.  Im folgenden Code fügen wir Scheinwerfer mit einem gelben Farbton hinzu, um einen wärmeren Effekt zu erzielen. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scene = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Scene(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> frontSpot = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.SpotLight(<span class="hljs-number"><span class="hljs-number">0xeeeece</span></span>); frontSpot.position.set(<span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>); scene.add(frontSpot); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> frontSpot2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.SpotLight(<span class="hljs-number"><span class="hljs-number">0xddddce</span></span>); frontSpot2.position.set(<span class="hljs-number"><span class="hljs-number">-500</span></span>, <span class="hljs-number"><span class="hljs-number">-500</span></span>, <span class="hljs-number"><span class="hljs-number">-500</span></span>); scene.add(frontSpot2);</code> </pre> <br>  Fügen Sie nun Material für unsere Figur hinzu.  Da unsere Figur wie eine Dekoration ist, schlage ich vor, eine goldenere Farbe hinzuzufügen.  Ein weiterer <i>emittierender</i> Parameter ist die Farbe des Objekts, das vom Objekt selbst stammt (ohne Lichtquelle).  Oft funktioniert dies besser als dunkle Farbe - zum Beispiel als dunkle Graustufen, wie im folgenden Beispiel <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshLambertMaterial({ <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xdaa520</span></span>, <span class="hljs-attr"><span class="hljs-attr">emissive</span></span>: <span class="hljs-number"><span class="hljs-number">0x111111</span></span>, });</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/BretCameron/embed/preview/OJLdJGz" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Wie Sie im folgenden Beispiel sehen können, ist die Farbe mehr oder weniger korrekt, aber die Art und Weise, wie sie mit dem Licht interagiert, trägt nicht zum Realismus bei.  Um dies zu beheben, müssen Sie <i>MeshPhongMaterial</i> oder <i>MeshStandardMaterial verwenden.</i> <br><br><h4>  MeshPhongMaterial </h4><br>  <i>Nützlich für mittlere Leistung und mittlere Genauigkeit.</i> <br><br>  Dieses Material bietet einen Kompromiss zwischen Leistung und Rendering-Genauigkeit. Daher ist dieses Material eine gute Option für eine Anwendung, die produktiv sein muss und ein genaueres Rendering als <i>MeshLambertMaterial bietet.</i> <br><br>  Jetzt können wir die <i>Spiegeleigenschaft</i> ändern, die die Helligkeit und Farbe der Oberflächenreflexion beeinflusst.  Wenn die Emissionseigenschaft normalerweise dunkel ist, eignet sich <i>Specular am</i> besten für helle Farben.  Unten verwenden wir hellgrau. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshPhongMaterial({ <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xdaa520</span></span>, <span class="hljs-attr"><span class="hljs-attr">emissive</span></span>: <span class="hljs-number"><span class="hljs-number">0x000000</span></span>, <span class="hljs-attr"><span class="hljs-attr">specular</span></span>: <span class="hljs-number"><span class="hljs-number">0xbcbcbc</span></span>, });</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/BretCameron/embed/preview/YzKBwwQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Optisch reflektiert das Bild von oben das Licht überzeugender, aber immer noch nicht perfekt.  Weißes Licht ist zu hell und das Material sieht eher gerippt als metallisch aus (und wir bemühen uns darum).  Mit <i>MeshStandardMaterial</i> können wir ein besseres Ergebnis <i>erzielen.</i> <br><br><h4>  MeshStandartMaterial </h4><br>  <i>Nützlich für hohe Genauigkeit bei geringer Produktivität.</i> <br><br>  Dies ist das genaueste Material von allen, obwohl seine Verwendung die Kosten eines höheren Stromverbrauchs mit sich bringt.  <i>MeshStandartMaterial wird</i> mit zusätzlichen <i>Metall-</i> und <i>Rauheitsparametern verwendet</i> , die jeweils einen Wert zwischen 0 und 1 <i>annehmen</i> . <br><br>  Der <i>Metalness-</i> Parameter beeinflusst, wie das Objekt reflektiert und nähert sich der Natur des Metalls an.  Dies liegt daran, dass leitende Materialien wie Metalle im Gegensatz zu Dielektrika wie Keramik unterschiedliche Reflexionseigenschaften aufweisen. <br><br>  <i>Rauheit</i> fügt eine zusätzliche Ebene für die Anpassung hinzu.  Sie können sich das Gegenteil von Glanz vorstellen: 0 - sehr glänzend, 1 - sehr matt. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshStandardMaterial({ <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xfcc742</span></span>, <span class="hljs-attr"><span class="hljs-attr">emissive</span></span>: <span class="hljs-number"><span class="hljs-number">0x111111</span></span>, <span class="hljs-attr"><span class="hljs-attr">specular</span></span>: <span class="hljs-number"><span class="hljs-number">0xffffff</span></span>, <span class="hljs-attr"><span class="hljs-attr">metalness</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">roughness</span></span>: <span class="hljs-number"><span class="hljs-number">0.55</span></span>, });</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://codepen.io/BretCameron/embed/preview/gOYqPMv" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Dies ist das realistischste Material von allen in Three.js vorgestellten, aber auch das ressourcenintensivste <br><br>  Die Materialien, die wir unten besprochen haben, sind die, die ich am häufigsten getroffen habe, und Sie können alle Optionen im Dock sehen. <br><br><h3>  Lader </h3><br>  Wie oben erläutert, können Sie Geometrie- und Polygonnetze manuell definieren.  In der Praxis laden Benutzer ihre Geometrien häufig aus Dateien.  Glücklicherweise hat Three.js nur wenige unterstützte Downloader, die viele 3D-Formate unterstützen. <br><br>  Der Haupt- <i>ObjectLoader</i> lädt die JSON-Datei im <i>JSON-Objekt- / Szenenformat</i> .  Die meisten Bootloader müssen manuell importiert werden.  Hier finden Sie eine vollständige Liste der unterstützten Bootloader, die Sie importieren können.  Nachstehend finden Sie eine kleine Liste der importierbaren Elemente. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// GLTF import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'; // OBJ import { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js'; // STL import { STLLoader } from 'three/examples/jsm/loaders/STLLoader.js'; // FBX import { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js'; // 3MF import { 3MFLoader } from 'three/examples/jsm/loaders/3MFLoader.js';</span></span></code> </pre> <br>  Das empfohlene Format für die Online-Anzeige ist GLTF, da das Format darauf abzielt, "Assets zur Laufzeit bereitzustellen, kompakt zu übertragen und schnell herunterzuladen". <br><br>  Natürlich kann es viele Gründe geben, einen bestimmten Dateityp zu bevorzugen (z. B. wenn Qualität Priorität hat oder Genauigkeit für den 3D-Druck erforderlich ist).  Die beste Online-Leistung wird beim Importieren von GLTF erzielt. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { GLTFLoader } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'three/examples/jsm/loaders/GLTFLoader.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> model <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../models/sample.gltf'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GLTFLoader(); loader.load(model, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">geometry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// if the model is loaded successfully, add it to your scene here }, undefined, function (err) { console.error(err); });</span></span></code> </pre> <br><h3>  Alles zusammen </h3><br>  Einer der Gründe, warum Three.js einschüchternd wirkt, ist, dass Sie mit nur wenigen Codezeilen etwas von Grund auf neu erstellen können.  In jedem obigen Beispiel mussten wir eine Szene und eine Kamera erstellen.  Der Einfachheit halber habe ich diesen Code außerhalb des Bereichs der Überprüfung belassen, aber im Moment werden wir sehen, wie er zusammen aussehen wird. <br><br>  Die Art und Weise, wie Sie Ihren Code organisieren, liegt bei Ihnen.  In einfacheren Beispielen, wie in diesem Artikel, ist es sinnvoll, den gesamten Code an einer Stelle zu schreiben.  In der Praxis ist es jedoch sinnvoll, die einzelnen Elemente zu trennen, um die Codebasis und deren Verwaltung zu erweitern. <br><br>  Der Einfachheit halber betrachten wir Elemente, die als ein einzelnes Objekt gezeichnet werden, sodass wir den gesamten Code in einer Datei speichern. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Import dependencies import * as THREE from 'three'; import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'; //   const scene = new THREE.Scene(); scene.background = new THREE.Color(0x282c34); //  ,       const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000); camera.position.z = 5; //  ""      const renderer = new THREE.WebGLRenderer(); renderer.setSize(window.innerWidth, window.innerHeight); //   DOM   renderer.domElement   document.getElementById('threejs').appendChild(renderer.domElement); //  ,      DOM  let controls = new OrbitControls(camera, document.getElementById('threejs')); controls.target.set(0, 0, 0); controls.rotateSpeed = 0.5; controls.update(); //  ( )   const geometry = new THREE.TorusKnotGeometry(10, 1.3, 500, 6, 6, 20); //    const material = new THREE.MeshStandardMaterial({ color: 0xfcc742, emissive: 0x111111, specular: 0xffffff, metalness: 1, roughness: 0.55, }); //   ,       const mesh = new THREE.Mesh(geometry, material); mesh.scale.x = 0.1; mesh.scale.y = 0.1; mesh.scale.z = 0.1; scene.add(mesh); //  ,       const frontSpot = new THREE.SpotLight(0xeeeece); const frontSpot2 = new THREE.SpotLight(0xddddce); frontSpot.position.set(1000, 1000, 1000); frontSpot2.position.set(-500, -500, -500); scene.add(frontSpot); scene.add(frontSpot2); //   ,           const animate = function () { requestAnimationFrame(animate); mesh.rotation.x += 0.005; mesh.rotation.y += 0.005; mesh.rotation.z += 0.005; renderer.render(scene, camera); }; //    animate();</span></span></code> </pre> <br><h3>  Muss ich ein Framework verwenden? </h3><br>  Schließlich ist es Zeit zu diskutieren, ob Three.js mit Ihrem bevorzugten Framework verwendet werden soll.  Im Moment gibt es ein gutes React <i>-Three-Fibre-</i> Paket für React.  Für React-Benutzer bietet die Verwendung eines solchen Pakets offensichtliche Vorteile: Sie pflegen eine Struktur für die Arbeit mit Komponenten, mit der Sie Code wiederverwenden können. <br><br>  Anfängern <i>rate</i> ich, mit dem üblichen <i>Vanila JS zu beginnen</i> , da die meisten Online-Materialien, die über Three.js geschrieben wurden, sich auf Three.js auf Vanila JS beziehen.  Aufgrund meiner Lernerfahrung kann es verwirrend und schwierig sein, dies durch ein Paket zu lernen. Beispielsweise müssen Sie Three.js-Objekte und -Methoden in Komponenten und Requisiten übersetzen.  (Sobald Sie Three.js lernen, können Sie jedes Paket verwenden). <br><br><h3>  Hinzufügen von Three.js zum Framework </h3><br>  Three.js bietet ein HTML-Objekt (am häufigsten als <i>renderer.domElement bezeichnet</i> ), das zu jedem HTML-Objekt in Ihrer Anwendung hinzugefügt werden kann.  Wenn Sie zum Beispiel ein <i>div</i> mit <i>id = ”threejs” haben</i> , können Sie einfach den folgenden Code in Ihren Three.js-Code einfügen: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'threejs'</span></span>).appendChild(renderer.domElement);</code> </pre> <br>  Einige Frameworks haben bevorzugte Pfade, um auf die DOM-Knoten des Baums zuzugreifen.  Zum Beispiel <i>ref</i> in React, <i>$ ref</i> in Vue oder <i>ngRef</i> in Angular und es sieht aus wie ein gewaltiges Plus vor dem Hintergrund des direkten Zugriffs auf DOM-Elemente.  Schauen wir uns als Beispiel eine schnelle Implementierung für React an. <br><br><h3>  Strategie für die Reaktion </h3><br>  Wenn Sie Reagieren verwenden, gibt es eine Möglichkeit, Three.js-Dateien in eine Ihrer Komponenten einzubetten.  In die Datei <i>ThreeEntryPoint.js</i> schreiben wir den folgenden Code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ThreeEntryPoint</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sceneRef</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.WebGLRenderer(); <span class="hljs-comment"><span class="hljs-comment">// ... sceneRef.appendChild(renderer.domElement); }</span></span></code> </pre><br>  Wir exportieren dies als eine Funktion, die ein Argument akzeptiert: einen Verweis auf ein Element in unserer Komponente.  Jetzt können wir unsere Komponente erstellen <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ThreeEntryPoint <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./threejs/ThreeEntryPoint'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThreeContainer</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { ThreeEntryPoint(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scene); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;&gt; &lt;div ref={element =&gt; this.scene = element} /&gt; &lt;/&gt; ); } }</code> </pre> <br>  Die importierte <i>ThreeEntryPoint-</i> Funktion <i>muss</i> in der <i>componentDidMount-</i> Methode aufgerufen und das neue <i>div</i> unter Verwendung von Referenzen als Argument übergeben werden <br>  Als Beispiel für diesen Ansatz können Sie das Repository klonen und selbst ausprobieren: <a href="https://github.com/BretCameron/three-js-sample">https://github.com/BretCameron/three-js-sample</a> . <br><br><h2>  Fazit </h2><br>  Ich kann noch viel über Three.js sagen, aber ich hoffe, dieser Artikel hat Ihnen genügend Informationen geliefert, um mit der Verwendung dieser leistungsstarken Technologie zu beginnen.  Als ich anfing, Three.js zu lernen, konnte ich keine einzige Ressource wie diesen Artikel finden. Ich hoffe, ich habe dazu beigetragen, diese Technologie für Anfänger zugänglicher zu machen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de477956/">https://habr.com/ru/post/de477956/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de477938/index.html">Der Markt für gebrauchte Server in Russland: Alles begann mit Habr</a></li>
<li><a href="../de477940/index.html">Benchmarking ORM, das beim Erstellen von Android-Anwendungen verwendet wird</a></li>
<li><a href="../de477944/index.html">Situation: Der Python 2.7-Support wurde seit 2020 eingestellt</a></li>
<li><a href="../de477946/index.html">„Verwische deine Spuren und fahre übers Wochenende“: So entfernst du dich von den beliebtesten Diensten</a></li>
<li><a href="../de477954/index.html">Wie Antworten auf Posts das Internet intelligenter machen</a></li>
<li><a href="../de477958/index.html">Top 10 Trends aus dem neuen High-Tech-Tech Crime Trends Report 2019/2020 Group-IB</a></li>
<li><a href="../de477964/index.html">Zwei Monate von der Idee bis zum ersten Verkauf: Erfahrung im Genesis-Team</a></li>
<li><a href="../de477966/index.html">HolyJS 2019 Moskau aus der Sicht des Teilnehmers</a></li>
<li><a href="../de477968/index.html">Fallen in einen Kaninchenbau: Eine Geschichte über einen Fehler beim Neustart eines Lackes - Teil 1</a></li>
<li><a href="../de477974/index.html">Vivado: Picasso-Modus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>