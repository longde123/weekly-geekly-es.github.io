<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•Ö üëÜ üçï Generador de widgets CRUD para Yii üë©üèΩ‚Äçü§ù‚Äçüë©üèª ‚ùáÔ∏è ü§æ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øQu√© tienen en com√∫n los comentarios sobre el art√≠culo sobre Habr√© y las opciones adicionales al comprar un autom√≥vil? 



 Desde el punto de vista de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Generador de widgets CRUD para Yii</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450696/">  ¬øQu√© tienen en com√∫n los comentarios sobre el art√≠culo sobre Habr√© y las opciones adicionales al comprar un autom√≥vil? <br><br><img src="https://habrastorage.org/webt/4x/ex/_2/4xex_2tbdcc_iwesc63zed-dqzm.png"><br><br>  Desde el punto de vista del modelado de datos, ambos son entidades "anidadas" que no tienen una significaci√≥n independiente aislada del objeto principal. <br><br>  Yii ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">php framework</a> ) tiene Gii, un generador de c√≥digo incorporado que le permite crear interfaces CRUD b√°sicas utilizando un modelo de datos con unos pocos clics del mouse, lo que acelera significativamente el desarrollo, pero solo son aplicables a entidades independientes, como el art√≠culo o la m√°quina en los ejemplos anteriores. <br><br>  Ser√≠a genial poder generar algo similar para los objetos de datos "anidados", ¬øverdad?  Ahora, puedes, bienvenido a Kat para m√°s detalles. <br><a name="habracut"></a><br>  Para los m√°s impacientes al final del art√≠culo, se dan instrucciones para un inicio r√°pido. <br><br>  Y para aquellos interesados ‚Äã‚Äãen el art√≠culo, se consideran aspectos de una aplicaci√≥n comercial a un dispositivo interno: <br><br><ul><li>  Business Case: Publicaci√≥n por tema <br><ul><li>  La lista de temas en el principal </li><li>  Lista de publicaciones relacionadas </li></ul></li><li>  Debajo del cap√≥: un generador gii basado en CRUD <br><ul><li>  Gii Generator Template </li><li>  Clase base de widget </li><li>  Controlador de fachada integrado. </li></ul></li><li>  Inicio r√°pido <br><ul><li>  Sobre soporte y desarrollo </li></ul></li></ul><br><h2>  Business Case: Publicaci√≥n por tema </h2><br>  Quiz√°s comentarios sobre un habr y un mal ejemplo desde  a menudo son m√°s √∫tiles que el art√≠culo en s√≠, pero, en cualquier caso, al desarrollar una aplicaci√≥n, a menudo hay situaciones en las que un determinado objeto del modelo de datos es de poco inter√©s para el usuario como entidad independiente. <br><br>  Considere una tarea empresarial simplificada: crear un sitio web para publicar mensajes agrupados por diversos temas. <br><br>  El sitio debe tener las siguientes interfaces: <br><br><ol><li>  La p√°gina principal: deber√≠a admitir varios widgets en el futuro, pero en la etapa actual de implementaci√≥n solo hay uno: una lista de temas filtrada por alg√∫n criterio. </li><li>  Lista completa de temas: una lista completa de temas en forma de tabla; </li><li>  P√°gina de tema: informaci√≥n sobre el tema y una lista de publicaciones publicadas en √©l. </li></ol><br>  Bastante est√°ndar, ¬øverdad? <br><br>  Veamos el modelo de datos: <br><br><img src="https://habrastorage.org/webt/f0/db/dp/f0dbdpmz9gbbxhsmxhu7vmzurem.png"><br><br>  Adem√°s no hay sorpresas.  Dos clases de modelos contendr√°n nuestra l√≥gica de negocios: <br><br><ul><li>  La clase de <b>tema</b> : datos sobre el tema, validaci√≥n, una lista de publicaciones en √©l, as√≠ como un m√©todo separado que devuelve una lista de temas filtrados por los criterios para el widget en la p√°gina principal. </li><li>  La clase <b>Post</b> es solo datos y validaci√≥n. </li></ul><br>  La aplicaci√≥n ser√° atendida por dos controladores: <br><br><ul><li>  <b>SiteController</b> : p√°ginas est√°ndar (sobre nosotros, contactos, etc.), autorizaci√≥n (no requerida por las especificaciones t√©cnicas, pero sabemos algo) e √≠ndice: la p√°gina principal.  Porque  asumimos en el futuro muchos widgets diferentes, tiene sentido dejar la p√°gina principal en este controlador y no transferirla a un modelo espec√≠fico para uno. </li><li>  <b>TopicController</b> es un conjunto est√°ndar de acciones: enumerar, crear, editar, ver y eliminar temas. </li></ul><br>  Potencialmente, tambi√©n puede generar un <b>PostController</b> , para fines de administraci√≥n y / o copiar y pegar piezas de c√≥digo en widgets personalizados, pero deje esto fuera del alcance de este art√≠culo. <br>  Hasta ahora, la mayor parte del c√≥digo se puede generar usando gii, lo que acelera el desarrollo y reduce los riesgos (menos c√≥digo manual = menos posibilidades de cometer un error). <br><br>  Quedan dos preguntas: <br><br><ol><li>  ¬øC√≥mo mostrar una lista filtrada de temas en la p√°gina principal? </li><li>  ¬øC√≥mo mostrar una lista de publicaciones por tema? </li></ol><br>  Si puede resolverlos usando un generador autom√°tico, este ser√° un logro s√≥lido. <br><br><h3>  La lista de temas en el principal </h3><br>  La p√°gina principal que sirve la direcci√≥n del sitio / √≠ndice debe contener una lista de temas filtrados por un criterio predeterminado.  Criterios de filtrado, como parte de la l√≥gica de negocios, hemos incluido en el modelo. <br><br>  Para la visualizaci√≥n, hay varias opciones de implementaci√≥n. <br><br>  El primero, sucio y r√°pido, es hacer todo directamente en el archivo de vista ( <b>views / site / index.php</b> ): <br><br><ol><li>  Crear <b>ActiveDataProvider</b> ; </li><li>  Ll√©nalo con datos del modelo de <b>tema</b> ; </li><li>  Visualice usando un widget est√°ndar <b>ListView</b> / <b>GridView</b> , especificando los campos requeridos manualmente. </li></ol><br>  Puede ir un poco m√°s all√° y empaquetarlo todo en un archivo de vista separado, algo as√≠ como <b>views / site / _topic-list-widget.php</b> , invocando su render desde el archivo principal.  Esto le dar√° un poco m√°s de capacidad de administraci√≥n y extensibilidad, pero a√∫n se ve bastante sucio. <br><br>  Es probable que la mayor√≠a de nosotros creemos un widget separado de acuerdo con todas las reglas, en un espacio de nombres separado ( <b>aplicaci√≥n \ widgets</b> o <b>aplicaci√≥n \ componentes</b> para la plantilla b√°sica, dependiendo de la versi√≥n que est√© usando), donde encapsulan la creaci√≥n de <b>ActiveDataProvider</b> por modelo y se muestran en un <b>archivo</b> separado sumisi√≥n  Todo lo que queda es llamar a este widget desde la p√°gina principal.  Esta soluci√≥n es la m√°s correcta desde el punto de vista de la descomposici√≥n de clases, la capacidad de administraci√≥n y la extensibilidad del c√≥digo. <br><br>  ¬øPero parece que el c√≥digo de este widget repetir√° mucho el c√≥digo de <b>TopicController</b> en t√©rminos de manejo de <b>actionIndex ()</b> ?  Y es muy molesto escribir este c√≥digo manualmente. <br><br>  Ser√≠a mucho mejor generar este c√≥digo autom√°ticamente y luego simplemente llamar al widget terminado: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= \app\widgets\TopicControllerWidget::widget([ <span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'index'</span></span>, <span class="hljs-string"><span class="hljs-string">'params'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'query'</span></span> =&gt; app\models\Topic::findBySomeSpecificCriteria() ], ]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br><h3>  Lista de publicaciones relacionadas </h3>  La p√°gina para ver el tema servido por la direcci√≥n del <b>tema / vista</b> debe contener informaci√≥n sobre el tema en s√≠ y una lista de mensajes publicados en √©l.  Obtenemos la lista de mensajes para el tema en el modelo autom√°ticamente si hemos configurado correctamente las relaciones entre las tablas, de modo que solo quede la pregunta de visualizaci√≥n. <br><br>  Por analog√≠a con la lista filtrada de temas, tenemos casi las mismas opciones. <br><br>  El primero es hacer todo en el c√≥digo del archivo de vista para ver el tema ( <b>views / topic / view.php</b> ): <br><br><ol><li>  Crear <b>ActiveDataProvider</b> ; </li><li>  <b>Ll√©nelo</b> con datos del modelo <b>$ model-&gt; getPosts ()</b> ; </li><li>  Visualice usando un widget est√°ndar <b>ListView</b> / <b>GridView</b> , especificando los campos requeridos manualmente. </li></ol><br>  El segundo es aislar este c√≥digo en un archivo de presentaci√≥n separado: <b>views / topic / _posts-list-widget.php</b> , solo para no ser una monstruosidad; reutilizarlo en alg√∫n lugar todav√≠a fallar√°. <br><br>  El tercero es un widget completo que duplicar√° en gran medida el c√≥digo del <b>PostController</b> condicional en la parte <b>actionIndex ()</b> , pero escrito manualmente. <br><br>  O genere el c√≥digo autom√°ticamente y llame al widget terminado: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= app\widgets\PostControllerWidget::widget([ <span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'index'</span></span>, <span class="hljs-string"><span class="hljs-string">'params'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'query'</span></span> =&gt; $model-&gt;getPosts(), ], ]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><h2>  Debajo del cap√≥: un generador gii basado en CRUD </h2><br>  Se define la tarea comercial, se describen los requisitos para el widget generado, descubriremos c√≥mo exactamente lo generaremos.  Gii ya tiene un generador para el controlador CRUD.  Para un widget CRUD, necesitamos crear un nuevo generador basado en el existente. <br><br>  Un par de enlaces a la documentaci√≥n antes de comenzar; tambi√©n ser√° √∫til si decide escribir su propia extensi√≥n: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Extensi√≥n Yii</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Plantilla Yii gii</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Yii gii generador</a> . </li></ul><br>  Obviamente, toda la funcionalidad est√° empaquetada en la extensi√≥n Yii, que se instala a trav√©s del compositor y se coloca en la carpeta del proveedor de su proyecto. <br><br>  La extensi√≥n consta de tres partes: <br><br><ol><li>  El <b>directorio templates / crud que</b> contiene la plantilla del generador gii; </li><li>  Archivo <b>Controller.php</b> : controlador de fachada incorporado para llamadas de widget; </li><li>  El archivo <b>Widget.php</b> es la clase base para todos los widgets generados. </li></ol><br><img src="https://habrastorage.org/webt/uh/le/4c/uhle4cnzxzmubqgtoitn3ox5b_u.png"><br><br><h3>  Gii Generator Template </h3><br>  La extensi√≥n debe generar c√≥digo, por lo que su parte central es el generador Gii. <br><br>  Inicialmente, se supon√≠a que para implementar la extensi√≥n ser√≠a suficiente escribir su propia plantilla para el generador CRUD-Controller incorporado.  Por cierto, esta es la raz√≥n por la cual el directorio se llama plantillas, no generadores.  Pero result√≥ que el generador CRUD-Controller realiza una validaci√≥n muy intensiva de los datos de entrada, lo que no permiti√≥ implementar muchos requisitos, por ejemplo, cambiar la clase de herencia.  Por lo tanto, la extensi√≥n contiene un generador completo, y no solo una plantilla. <br><br>  El generador gii consta de las siguientes partes (todas est√°n dentro del directorio templates / crud): <br><br><ul><li>  El directorio <b>predeterminado</b> es una plantilla donde ocurre toda la magia: cada archivo en este directorio corresponder√° a un archivo generado en su proyecto; </li><li>  Archivo <b>form.php</b> : como puede adivinar por el nombre, este es un formulario para ingresar par√°metros de generaci√≥n (nombres de clase, etc.); </li><li>  File <b>Generator.php</b> : una orquesta de generaci√≥n que recibe datos del formulario, los valida y luego llama secuencialmente a los archivos de plantilla para crear el resultado. </li></ul><br>  Los <b>archivos</b> <b>Generator.php</b> y <b>form.php</b> contienen principalmente cambios cosm√©ticos en relaci√≥n con los originales del generador CRUD: nombres de archivo, validaci√≥n, descripciones y mensajes de texto, etc. <br><br>  Los archivos de plantilla son responsables de la vista generada y del c√≥digo del widget en s√≠.  En primer lugar, el archivo <b>templates / crud / default / controller.php es</b> importante, ya que es responsable de generar la clase de widget directamente, que corresponde a la clase de controlador desde el generador original. <br><br>  El widget debe tener las mismas acciones que el controlador CRUD, pero se generan de forma un poco diferente.  Los siguientes ejemplos muestran el resultado de la generaci√≥n con comentarios: <br><br><ul><li>  actionIndex: en lugar de la salida incondicional de todos los modelos, el m√©todo acepta el par√°metro $ query; <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($query)</span></span></span><span class="hljs-function"> </span></span>{ $dataProvider = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ActiveDataProvider([ <span class="hljs-string"><span class="hljs-string">'query'</span></span> =&gt; $query, ]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'index'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'dataProvider'</span></span> =&gt; $dataProvider, ]); }</code> </pre> </li><li>  actionCreate y actionUpdate: en caso de √©xito, en lugar de una redirecci√≥n, simplemente devuelven el c√≥digo de √©xito, el controlador de fachada incorporado proporciona un procesamiento adicional; <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $model = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Post(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($model-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $model-&gt;save()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'success'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'create'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; $model, ]); }</code> </pre> <br></li><li>  actionDelete: admite el m√©todo GET para mostrar el widget de eliminaci√≥n (un bot√≥n de forma predeterminada) y POST para realizar la acci√≥n;  si tiene √©xito, tampoco realiza una redirecci√≥n, pero devuelve un c√≥digo. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionDelete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ $model = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;findModel($id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Yii::$app-&gt;request-&gt;method == <span class="hljs-string"><span class="hljs-string">'GET'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'delete'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; $model, ]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $model-&gt;delete(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'success'</span></span>; } }</code> </pre> </li></ul><br>  Finalmente, los archivos de vista contienen las siguientes ediciones b√°sicas: <br><br><ul><li>  Todos los encabezados traducidos a h2 en lugar de h1; </li><li>  Se elimin√≥ el c√≥digo responsable de mostrar el t√≠tulo de la p√°gina y de las migas de pan; el widget no deber√≠a afectar estas cosas; </li><li>  La creaci√≥n y edici√≥n de modelos se realiza mediante una ventana modal (widget Modal incorporado); </li><li>  Se agreg√≥ una plantilla de widget de eliminaci√≥n, con un gran bot√≥n rojo. </li></ul><br><h3>  Clase base de widget </h3><br>  Cuando el generador termine su trabajo, crear√° una clase de widget en el espacio de nombres de la aplicaci√≥n.  La cadena de herencia tiene este aspecto: los widgets generados para la aplicaci√≥n se heredan del widget de extensi√≥n base, clase <b>\ ianikanov \ wce \ Widget</b> , que, a su vez, se hereda del widget base Yii, clase <b>\ yii \ base \ Widget</b> . <br><br>  La clase base del widget de extensi√≥n resuelve las siguientes tareas: <br><br><ol><li>  Define dos campos principales: $ action y $ params, a trav√©s de los cuales se transfiere el control al widget desde la vista de llamada; </li><li>  Define una serie de par√°metros est√°ndar que pueden anularse en la clase generada, como la ruta a los archivos de vista del widget, el nombre y la ruta al controlador de fachada (m√°s abajo) y los mensajes de error; </li><li>  Define par√°metros est√°ndar al representar vistas: render y renderFile; </li><li>  Proporciona una infraestructura de eventos similar a la infraestructura del controlador para que funcionen los filtros est√°ndar como <b>AccessControl</b> y <b>VerbFilter</b> ; </li><li>  Define un m√©todo de ejecuci√≥n que recopila todo esto juntos. </li></ol><br><h3>  Controlador de fachada integrado. </h3>  No hay problemas con la visualizaci√≥n de estos datos: los widgets est√°n destinados para este prop√≥sito.  Pero para editar, de todos modos, necesitas un controlador.  Genere un controlador √∫nico para cada widget: se pierde toda su esencia.  Usar un CRUD est√°ndar no siempre es relevante, y no quiero depender del lanzamiento adicional de gii.  Por lo tanto, la opci√≥n se utiliz√≥ con una fachada de controlador universal integrada. <br><br>  Este controlador est√° registrado en el mapa de la aplicaci√≥n a trav√©s del archivo de configuraci√≥n y contiene solo un m√©todo: actionIndex, que realiza las siguientes acciones: <br><br><ol><li>  Acepta una solicitud de un cliente; </li><li>  Transfiere el control a la clase de widget correspondiente; </li><li>  Maneja errores de negocios como resultado del widget; </li><li>  Redirige a la aplicaci√≥n principal. </li></ol><br>  Quiz√°s sea m√°s importante indicar lo que NO hace este controlador: <br><br><ol><li>  No verifica los niveles de acceso: esta l√≥gica pertenece a widgets espec√≠ficos; </li><li>  No realiza ninguna manipulaci√≥n de entrada: los par√°metros se pasan al widget tal como est√°; </li><li>  No manipula la salida, excepto para verificar un c√≥digo de √©xito predefinido. </li></ol><br>  Este enfoque le permite mantener la versatilidad de la fachada, dejando la implementaci√≥n de los requisitos comerciales, incluidos los requisitos de seguridad, el c√≥digo de la aplicaci√≥n. <br><br><h2>  Inicio r√°pido </h2>  El desaf√≠o comercial es claro, ¬ølisto para comenzar?  Usar la extensi√≥n tiene cuatro pasos: <br><br><ol><li>  Instalaci√≥n; </li><li>  Configuraci√≥n; </li><li>  Generaci√≥n; </li><li>  Solicitud </li></ol><br>  La instalaci√≥n de la extensi√≥n se realiza mediante el compositor: <br><br><pre> <code class="bash hljs">php composer.phar require --prefer-dist ianikanov/yii2-wce <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span></code> </pre> <br>  A continuaci√≥n, debe realizar varios cambios en el archivo de configuraci√≥n de la aplicaci√≥n. <br><br>  Primero, agregue una referencia al generador gii: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (YII_ENV_DEV) { $config[<span class="hljs-string"><span class="hljs-string">'modules'</span></span>][<span class="hljs-string"><span class="hljs-string">'gii'</span></span>] = [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii\gii\Module'</span></span>, <span class="hljs-string"><span class="hljs-string">'allowedIPs'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'127.0.0.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'::1'</span></span>, <span class="hljs-string"><span class="hljs-string">'192.168.0.*'</span></span>, <span class="hljs-string"><span class="hljs-string">'192.168.178.20'</span></span>], <span class="hljs-string"><span class="hljs-string">'generators'</span></span> =&gt; [ <span class="hljs-comment"><span class="hljs-comment">//here 'widgetCrud' =&gt; [ 'class' =&gt; '\ianikanov\wce\templates\crud\Generator', 'templates' =&gt; [ 'WCE' =&gt; '@vendor/ianikanov/yii2-wce/templates/crud/default', // template name ], ], ], ]; }</span></span></code> </pre> <br>  En segundo lugar, agregue el controlador de fachada integrado al mapa: <br><br><pre> <code class="php hljs">$config = [ ... <span class="hljs-string"><span class="hljs-string">'controllerMap'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'wce-embed'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'\ianikanov\wce\Controller'</span></span>, ], ... ];</code> </pre> <br>  Esto completa la instalaci√≥n y configuraci√≥n. <br><br>  Para generar un widget: <br><br><ol><li>  Abrir gii; </li><li>  Seleccione "Widget del controlador CRUD"; </li><li>  Rellene los campos del formulario; </li><li>  Ver y generar c√≥digo. </li></ol><br>  Adem√°s, para usar el widget, se debe invocar especificando acci√≥n y par√°metros, casi lo mismo que se llama al controlador. <br><br>  Widget para ver la lista de modelos: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= app\widgets\PostControllerWidget::widget([ <span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'index'</span></span>, <span class="hljs-string"><span class="hljs-string">'params'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'query'</span></span> =&gt; $otherModel-&gt;getPosts(), ], ]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Widget para ver un modelo: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= app\widgets\PostControllerWidget::widget([<span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'view'</span></span>, <span class="hljs-string"><span class="hljs-string">'params'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; $post_id]]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Widget de creaci√≥n de modelos (bot√≥n + formulario envuelto en modal): <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= app\widgets\PostControllerWidget::widget([<span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'create'</span></span>]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Widget de cambio de modelo (bot√≥n + formulario envuelto en modal): <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= app\widgets\PostControllerWidget::widget([<span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'update'</span></span>, <span class="hljs-string"><span class="hljs-string">'params'</span></span>=&gt;[<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; $post_id]]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Widget de eliminaci√≥n de modelo (bot√≥n): <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= app\widgets\PostControllerWidget::widget([<span class="hljs-string"><span class="hljs-string">'action'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'delete'</span></span>, <span class="hljs-string"><span class="hljs-string">'params'</span></span>=&gt;[<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; $post_id]]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  El c√≥digo del widget y todas las vistas pertenece a la aplicaci√≥n y se puede cambiar f√°cilmente: todo es exactamente igual que al generar el controlador. <br><br><h3>  Sobre soporte y desarrollo </h3><br>  Algunas palabras sobre c√≥mo se apoyar√° y desarrollar√° la expansi√≥n.  Tengo el trabajo principal y algunos de mis proyectos "secundarios" (proyectos favoritos).  Entonces, esta extensi√≥n es un proyecto paralelo de mis proyectos paralelos, por lo que desarrollar√© mejoras solo para las necesidades de mis proyectos. <br><br>  En las mejores tradiciones de c√≥digo abierto, el c√≥digo est√° disponible en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> , y lo apoyar√© en t√©rminos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">correcci√≥n</a> de errores, y tambi√©n tratar√© de hacer revisiones oportunas si alguien quiere enviar una solicitud de extracci√≥n, por lo que quienes est√©n interesados, √∫nase. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/450696/">https://habr.com/ru/post/450696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450682/index.html">El libro "CSS para profesionales"</a></li>
<li><a href="../450684/index.html">Cool Smart Jumps: Tangram Smart Rope Smart Rope Review</a></li>
<li><a href="../450686/index.html">Otras tres caracter√≠sticas no obvias de Zimbra Collaboration Suite que ayudar√°n a aumentar la productividad de los empleados</a></li>
<li><a href="../450692/index.html">C√≥mo las corporaciones usan 7 pecados capitales en la venta de productos</a></li>
<li><a href="../450694/index.html">¬øPor qu√© Jeff Bezos recomienda escalar fallas y ver ciencia ficci√≥n?</a></li>
<li><a href="../450698/index.html">Engranajes en Box2D</a></li>
<li><a href="../450700/index.html">Nuevamente sobre las abstracciones holey (o sobre un entorno impredecible)</a></li>
<li><a href="../450702/index.html">El lugar est√° condenado?</a></li>
<li><a href="../450704/index.html">Semana de la seguridad 19: Vulnerabilidades en c√°maras IP, rastreadores GPS y monitores inal√°mbricos</a></li>
<li><a href="../450708/index.html">Python en Visual Studio Code - Versi√≥n de abril de 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>