<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüöí üë®üèΩ‚Äçüéì üëâüèø Sobre Godot, GLSL e WebGL, shaders usados ‚Äã‚Äãno minijogo üï∏Ô∏è üë®üèΩ‚Äç‚öïÔ∏è üëåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O artigo √© principalmente sobre shaders GLSL, e como eu os usei neste mini-demo game. 

 O artigo est√° dividido na seguinte ordem: 


- Links e uma br...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre Godot, GLSL e WebGL, shaders usados ‚Äã‚Äãno minijogo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467779/"><h1 id="statya-v-osnovnom-pro-glsl-sheydery-i-kak-ya-ih-ispolzoval-v-etoy-mini-demke-igre">  O artigo √© principalmente sobre shaders GLSL, e como eu os usei neste mini-demo game. </h1><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0jKyTBFrpjU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="statya-razbita-po-takoy-ocherednosti">  O artigo est√° dividido na seguinte ordem: </h3><br><ul><li>  Links e uma breve descri√ß√£o. </li><li>  Uma descri√ß√£o muito breve da l√≥gica do jogo e recursos usados ‚Äã‚Äãde Godot. </li><li>  Sobre os shaders usados. </li><li>  Um pouco mais sobre Godot e suas caracter√≠sticas. </li><li>  O WebGL2 funciona </li><li>  Multijogador </li></ul><a name="habracut"></a><br><hr><br><h1 id="1-ssylki-i-opisanie">  1. Links e descri√ß√£o </h1><br><p>  <strong>Voc√™ pode baixar a vers√£o Win / Linux</strong> no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link para itch.io</a> </p><br><p>  <strong>O c√≥digo fonte do jogo inteiro</strong> est√° dispon√≠vel no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> ou no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gitlab</a> . </p><br><h3 id="igrovoy-process">  Jogabilidade: </h3><br><p>  M√≠nimo, este n√£o √© um jogo completo.  (nenhum som no jogo) </p><br><p>  <em>O objetivo do jogo</em> √© manter o n√∫mero m√°ximo de rodadas.  Os rounds come√ßam quando as esferas da HP s√£o zero e n√£o h√° rob√¥s no jogo. </p><br><p>  Quando as pe√ßas s√£o destru√≠das, os b√¥nus aparecem, <em>uma vez por rodada</em> , fornecem a velocidade da anima√ß√£o do tiro, o dano (apenas na esfera principal) e a altura do salto, na cor azul, vermelho / verde e amarelo.  Bots tamb√©m d√£o um b√¥nus, mas aleatoriamente.  O personagem do jogador restaura + 1HP a cada nova rodada. </p><br><hr><br><h1 id="2-logika-igry-i-ispolzuemye-resursy">  2. A l√≥gica do jogo e os recursos utilizados </h1><br><p>  <strong>Recursos utilizados:</strong> </p><br><p>  <strong>O Blender foi</strong> usado apenas para reduzir o n√∫mero de pol√≠gonos nos modelos e criar pe√ßas quebradas. </p><br><p>  O m√≥dulo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">futari-addon</a> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usado</a> .  (Vou escrever sobre isso abaixo) </p><br><p>  <strong>No jogo, dois modelos t√™m anima√ß√µes.</strong> <br>  Movimentos de <em>personagem de jogador</em> que fiz em Godot, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modelo original</a> <br>  O segundo modelo √© o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sphere-bot,</a> que possui anima√ß√µes de alta qualidade. </p><br><p>  Todos <strong>os modelos de objetos</strong> prontos para uso usados <a href="">est√£o listados aqui</a> . </p><br><h3 id="logika-igry-i-vozmozhnosti-godot">  L√≥gica do jogo e recursos Godot: </h3><br><p>  A l√≥gica do jogo n√£o √© feita da melhor maneira, vou listar os pontos que s√£o feitos normalmente. </p><br><p>  Somente uma Viewport √© usada para uma cena 3D e v√°rias Viewports (baixa resolu√ß√£o) nas quais existem c√¢meras ortogonais para 2D Viewports (tamb√©m baixa resolu√ß√£o) nas quais os shaders Multipass / Feedback s√£o processados, mais sobre eles abaixo. </p><br><p> <strong>Todas as texturas t√™m mipmap</strong> e at√© funcionam no navegador.  Existem configura√ß√µes gr√°ficas adicionais <em>(Esc - Configura√ß√µes)</em> .  Por exemplo, voc√™ pode fazer <em>qualquer resolu√ß√£o para o jogo</em> , at√© <code>32x32</code> pixels. Por exemplo, defino a resolu√ß√£o <code>320x240</code> nas configura√ß√µes, executando o jogo em um navegador e ativei o m√°ximo de <em>MSAA com</em> anti-aliasing. <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/998/719/596/998719596112cbdc46218a7df4c8561b.png"></a> </p><br><p>  <strong>Todas as fontes de luz funcionam em tempo real</strong> , s√£o 16 no total. </p><br><p>  <strong>O piso e a cerca</strong> s√£o as part√≠culas mais simples que duplicam o mesmo modelo muitas vezes; o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo √© trivial</a> . </p><br><p>  A matriz de rota√ß√£o de part√≠culas (peda√ßos de piso) nos meus shaders √© apenas uma pequena entrada desta f√≥rmula: </p><br><pre> <code class="plaintext hljs">mat4 rotationAxisAngle( vec3 v, float angle ) { float s = sin( angle ); float c = cos( angle ); float ic = 1.0 - c; return mat4( vx*vx*ic + c, vy*vx*ic - s*vz, vz*vx*ic + s*vy, 0.0, vx*vy*ic + s*vz, vy*vy*ic + c, vz*vy*ic - s*vx, 0.0, vx*vz*ic - s*vy, vy*vz*ic + s*vx, vz*vz*ic + c, 0.0, 0.0, 0.0, 0.0, 1.0 ); }</code> </pre> <br><p>  por exemplo, <code>v=vec3(0.0,0.0,1.0)</code> √© a rota√ß√£o ao longo do eixo <code>z</code> e <code>angle=PI/2.</code>  substitua-os e obtenha o turno desejado. </p><br><h3 id="animaciya-razrushaemyh-blokov-schitaetsya-fizicheskim-dvizhkom-v-realnom-vremeni">  A anima√ß√£o de blocos destrut√≠veis √© considerada um mecanismo de f√≠sica em tempo real </h3><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/gRd0oMq.mp4" type="video/mp4"></video></div></div></div><br><p>  <strong>A f√≠sica em Godot √©</strong> bastante limitada e come√ßa a reduzir significativamente o <em>FPS</em> mesmo com uma d√∫zia de objetos ativos; portanto, todas as colis√µes entre pe√ßas destru√≠das s√£o desativadas e outras s√£o definidas, os n√≠veis de f√≠sica s√£o definidos, tamb√©m h√° um limite no n√∫mero de destrui√ß√£o simult√¢nea e o n√∫mero m√°ximo de bots ao mesmo tempo (seis). </p><br><p>  <strong>A f√≠sica da in√©rcia e a intera√ß√£o do personagem do jogador com objetos din√¢micos.</strong>  √â desativado por padr√£o em Godot, escrevi uma intera√ß√£o m√≠nima, o c√≥digo nos arquivos: </p><br><p>  <a href="">A</a> fun√ß√£o <a href="">bot_hit.gd _integrate_forces</a> e tudo o que se chama s√£o movimentos <a href="">adversos</a> -bot <br>  <a href="">player_l.gd</a> primeiro, a fun√ß√£o <code>move_and_slide</code> desativa a in√©rcia infinita e a fun√ß√£o <code>process_collision</code> repele objetos. </p><br><p>  <strong>O pr√©-carregamento (pr√©-carregamento)</strong> no in√≠cio do jogo √© usado para evitar atrasos quando o objeto √© exibido pela primeira vez; isso ajuda no entanto, quando voc√™ ativa as <em>Sombras</em> (e algumas outras op√ß√µes), os atrasos aparecer√£o novamente na primeira apari√ß√£o do objeto.  Tamb√©m no navegador, isso n√£o ajuda devido √†s peculiaridades dos navegadores que trabalham com shaders. </p><br><p>  V√°rios objetos duplicados em um e v√°rios GIProbe, todos os formatos e par√¢metros das fontes de luz s√£o <em>projetados</em> , feitos para contornar as limita√ß√µes do OpenGL ou as restri√ß√µes do Godot. </p><br><hr><br><h1 id="3-ispolzuemye-sheydery">  3. Shaders usados </h1><br><h3 id="panorama-okruzheniya">  Panorama do ambiente: </h3><br><p>  Este jogo usa um panorama est√°tico, a imagem √© obtida a partir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">deste sombreador</a> <em>(cores c1 c2, posi√ß√£o ldir)</em> </p><br><pre> <code class="plaintext hljs">vec3 sky(vec3 d, vec3 c1, vec3 c2) { vec3 ldir = normalize(vec3(0.,0.,-1.)); vec3 col = mix(c1*100., c2*100., min(abs(dy)*2. + .5, 1.)) / 255.*.5; col *= (1. + vec3(1., .7, .3) / sqrt(length(d - ldir))*2.); //sun return clamp(col,vec3(0.),vec3(1.)); }</code> </pre> <br><p>  para obter um panorama, remova o coment√°rio da linha 57 <code>panorama_uv(fragCoord,ro,rd);</code>  e colocar um coment√°rio na linha 58 </p><br><p>  Panoramas din√¢micos para Godot em demonstra√ß√µes anteriores (YouTube e h√° links para o c√≥digo) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">panorama de nuvens</a> . <br>  E o panorama do ciclo dia / noite com o movimento das nuvens foi usado nesta demonstra√ß√£o: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jTmppCifnYE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  outro panorama dia / noite, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">por exemplo, no shadertoy</a> eu n√£o o usei em nenhum lugar </p><br><p>  Se voc√™ precisar <strong>converter o CubeMap em um panorama do ambiente para Godot</strong> , <strong>criei</strong> um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">simples conversor da web</a> . </p><br><h3 id="sovsem-prostye-sheydery">  Shaders muito simples: </h3><br><p>  <strong>Os shaders de part√≠culas determinam estaticamente sua posi√ß√£o</strong> para anima√ß√£o ou n√£o.  Por exemplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">spawn.shader)</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/chYJ7iU.mp4" type="video/mp4"></video></div></div></div><br><p>  Para <strong>um brilho adicional ao redor dos objetos</strong> , n√£o apenas das bolas, esta √© uma linha do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gglow.shader</a> (os n√∫meros podem ser alterados conforme necess√°rio) </p><br><pre> <code class="plaintext hljs">float intensity = pow(0.122 + max(dot(NORMAL, normalize(VIEW)),0.), 010.85);</code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/webt/gf/sj/dh/gfsjdhbifiw_x2hrnj5i2xdsuwq.png"></a> <a href=""><img src="https://habrastorage.org/webt/h9/e9/vn/h9e9vn13ugqh7vqxuuoxpzunlno.png"></a> </p><br><p>  <strong>Exibindo d√≠gitos de texto em 3D</strong> , como eu o entendo em Godot, n√£o h√° meios para isso (sem criar um FBO (viewport) adicional); portanto, um simples sombreador imprime n√∫meros a partir de uma textura (para que seja <em>mipmapping</em> ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o c√≥digo do sombreador</a> </p><br><h3 id="elementy-ui">  Elementos da interface do usu√°rio: </h3><br><p>  Tornar o formul√°rio personalizado dos pain√©is da interface do usu√°rio o mais f√°cil para mim √© em shaders, talvez <strong>isso n√£o esteja certo</strong> .  O m√©todo correto √© mostrado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui como um exemplo</a> (na se√ß√£o UI). <br>  Neste jogo, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anima√ß√£o de fundo do menu mais simples</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o indicador HP</a> .  Acima, no link para o v√≠deo do panorama dia / noite, tamb√©m √© feito, existem faixas nas laterais e toda a anima√ß√£o no shader. </p><br><h3 id="pro-modul-futari-addon">  Sobre o m√≥dulo futari-addon: </h3><br><p>  Funciona quase da mesma forma que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esse sombreador</a> para part√≠culas 2D em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√≠deo</a> (veja 1:41). </p><br><p>  Um mapa 2D-SDF de todos os pol√≠gonos √© constru√≠do no v√≠deo uma vez no in√≠cio e a textura resultante √© simplesmente enviada para as part√≠culas, as pr√≥prias part√≠culas se normalizam na posi√ß√£o atual e alteram o movimento. </p><br><p>  <strong>O futari-addon</strong> faz quase a mesma coisa; somente em vez de um mapa de textura 2D, s√£o transmitidas as coordenadas das esferas e dos planos 3D que s√£o processados ‚Äã‚Äãpor condi√ß√£o no sombreador de part√≠culas, para que voc√™ possa alterar livremente sua posi√ß√£o e outros par√¢metros. </p><br><p>  Al√©m disso, o vento (no meu exemplo 2D, adicionar vento √© muito simples, como outra textura com valores + - √† velocidade, e as part√≠culas simplesmente adicionam o valor da velocidade deste mapa em sua posi√ß√£o). </p><br><p>  <strong>O m√≥dulo futari-addon √© muito bom</strong> , usou-o em vez de criar seu pr√≥prio sistema de part√≠culas. </p><br><h3 id="effekt-schita">  Efeito de escudo: </h3><br><p>  Part√≠culas para as quais as coordenadas do impacto na esfera e a posi√ß√£o do jogador s√£o transmitidas e desaparecendo usando o buffer de <em>feedback de transforma√ß√£o</em> .  C√≥digo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sombreador</a> no arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">en_m.shader</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/cdtVH5V.mp4" type="video/mp4"></video></div></div></div><br><h3 id="schit-u-botov">  Bots Shield: </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/ah/-f/ob/ah-fob8goggag27vzivk3-4kl00.png"></a> <a href=""><img src="https://habrastorage.org/webt/gq/fu/ac/gqfuacowtln68ajquams-xfr9zm.png"></a> <br>  Shader como um ru√≠do tridimensional <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sheild.shader</a> essencialmente tudo funciona gra√ßas √† fun√ß√£o de <code>flow</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">original aqui</a> <br>  O plano de fundo √© determinado por <code>gl_FrontFacing</code> e √© pintado mais escuro e mais verde, e n√£o azul. <br>  Resposta a um soco - o temporizador de eventos de choque √© simplesmente transmitido. </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/YWtZyJP.mp4" type="video/mp4"></video></div></div></div><br><hr><br><h1 id="sheydery-chitayuschie-svoy-proshlyy-kadr-ili-feedbackmultipass-sheydery">  Shaders lendo seu √∫ltimo quadro ou Feedback / Multipass shaders: </h1><br><p>  <strong>Quase todos os efeitos s√£o feitos usando essa l√≥gica.</strong> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um dos shaders do jogo</a> . <br>  Como fonte, configurei uma <em>c√¢mera ortogonal</em> que <em>fotografa</em> objetos em um determinado grupo a uma curta dist√¢ncia (sem processar a cena inteira) <br> <a href=""><img src="https://habrastorage.org/webt/zf/rd/xg/zfrdxgfctkb-ey1zpqoqiaoqvv8.png"></a>  . </p><br><h3 id="effekt-polya-lda">  Efeito do campo de gelo: </h3><br><p>  O sombreador est√° indicado acima, no arquivo do projeto √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ice_feedback.shader</a> e um sombreador de <em>fragmento</em> para o plano que cria a ilus√£o de profundidade do piso usando um loop simples de profundidade: </p><br><pre> <code class="plaintext hljs">while(current_depth &lt; depth){ ofs -= delta; depth = textureLod(texture_depth, ofs,0.0).r; current_depth += layer_depth; }</code> </pre> <br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/73beIUq.mp4" type="video/mp4"></video></div></div></div><br><h3 id="effekt-polya-chastic">  Efeito de campo de part√≠culas: </h3><br><p>  O sombreador √© <em>o mesmo</em> , a coordenada <code>y</code> (altura) das part√≠culas de acordo com o brilho da cor do buffer de quadro do sombreador, a cor tamb√©m de acordo com o brilho da cor ( <em>n√£o</em> <code>floor/visible_/floor3/grass/grass</code> <em>o sombreador de part√≠culas separadamente, ele est√° no projeto no objeto</em> <code>floor/visible_/floor3/grass/grass</code> ). </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/8zo6Lf9.mp4" type="video/mp4"></video></div></div></div><br><h3 id="dinamicheskaya-animaciya-flaga">  Anima√ß√£o din√¢mica de sinalizador: </h3><br><p>  Godot tem o <em>SoftBody para animar o tecido, mas √© uma CPU,</em> ent√£o eu n√£o o usei.  Usei um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link de</a> c√≥digo pronto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">para o original</a> .  Essa bandeira √© empurrada de tr√™s bolas ao lado e a cabe√ßa do personagem √© a quarta bola. <br>  A l√≥gica do sombreador de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√°rias passagens</a> , como no exemplo acima, com apenas tr√™s eixos, o c√≥digo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√°rias passagens</a> do sombreador (1) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">flag.shader</a> , o sombreador que desenha o flag mostra apenas a textura e altera a geometria do avi√£o (2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">flag.shader</a> . </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/dVtroFS.mp4" type="video/mp4"></video></div></div></div><br><h3 id="poyavlenie-figur">  Apar√™ncia das figuras: </h3><br><p>  <strong>As formas n√£o t√™m UV, portanto, mapeamento de textura triplanar para mapeamento de textura e triangling</strong> ( <em>v√©rtice</em> ), todos os c√≥digos no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cchess.shader</a> </p><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/rTiCkef.mp4" type="video/mp4"></video></div></div></div><br><h3 id="animaciya-hitbox-a-krasnaya-ramka-kotoryy-nanosit-uron-personazhu-igrokai-sled-ot-ramki-chasticy-ochevidno">  Anima√ß√£o de um <em>hitbox</em> (quadro vermelho) que causa danos ao personagem do jogador e um tra√ßo do quadro (as part√≠culas s√£o √≥bvias): </h3><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Seu navegador n√£o suporta v√≠deo HTML5. <source src="https://i.imgur.com/r4pEvvw.mp4" type="video/mp4"></video></div></div></div><br><p>  Ele usa apenas o shader j√° especificado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gglow.shader</a> . <br>  PS <em>Criou a mesma anima√ß√£o em um shader</em> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link para shadertoy</a> </p><br><p>  <em>Para part√≠culas, apenas duas texturas s√£o usadas, um c√≠rculo e um quadrado.</em> </p><br><hr><br><h1 id="4-pro-godot-i-ego-osobennosti">  4. Sobre Godot, e suas caracter√≠sticas </h1><br><p>  <strong>Godot √© muito bom e simples (n√£o para iniciantes).</strong>  <strong>Eu realmente gostei de Godot por suas caracter√≠sticas.</strong> </p><br><p>  <em>Existem muitos</em> bugs, a documenta√ß√£o do Godot √© incompleta e, √†s vezes, enganosa devido a erros e n√£o indica pontos cr√≠ticos (o que n√£o √© √≥bvio para mim), a fim de entender qual c√≥digo-fonte do Godot teve que ser relido v√°rias vezes (o c√≥digo n√£o √© grande e bem escrito). <br>  Esta √© apenas a minha impress√£o, pode ser errado, n√£o quero enganar ningu√©m. </p><br><p>  Enfatizo que mesmo erros muito cr√≠ticos em Godot podem ser contornados em Godot por meio do GDScript, com o m√≠nimo esfor√ßo.  O que √© sem d√∫vida uma grande vantagem </p><br><p>  Tamb√©m observo que Godot <em>n√£o est√° de maneira alguma protegido</em> das peculiaridades de fatores externos, como WASM em navegadores, restri√ß√µes ANGLE, fortes limita√ß√µes dos pr√≥prios navegadores e, √© claro, dezenas de bugs nos drivers da placa de v√≠deo, tudo isso deve ser contornado manualmente. </p><br><p>  <strong>Lags</strong> - h√° um grande problema com a ger√™ncia, √© 100% do lado Godot, eu n√£o consertei.  (cunhas de controle durante a compila√ß√£o de shaders e atrasos de FPS (por exemplo, no navegador)), tamb√©m outros atrasos relacionados aos recursos de renderiza√ß√£o em 3D no Godot, fiz um desvio de alguns deles, mas eles ainda existem / podem ser. </p><br><hr><br><h1 id="5-webgl2-rabotaet-tolko-v-linux">  5. O WebGL2 funciona <del>  Apenas Linux </del></h1><br><p>  <strong>N√£o inicie o</strong> jogo pelo link se voc√™ tiver o Windows.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link para a vers√£o WebGL2 / WASM.</a> </p><br><p>  <strong>Atualiza√ß√£o de informa√ß√µes</strong> : a vers√£o WebGL foi lan√ßada no Windows10 (apenas no Firefox, com o ANGLE desativado) em um PC super poderoso (v√≠deo i9 / 16gb ram / 8gb), embora o piso n√£o tenha mais renderizado (por algum motivo) e o firefox esteja com mem√≥ria perdida (&gt; 16 GB ) em cinco minutos ... √© melhor n√£o correr, por seu pr√≥prio risco e risco </p><br><p>  Funciona apenas no <em>Chrome 76+ e Firefox</em> (Linux). </p><br><p><del>  Um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">relat√≥rio de bug (link) foi enviado</a> sobre o Windows; se esse √© um bug do navegador, o Google reage ap√≥s 2 meses.  <em>Mas, aparentemente, isso √© um bug no ANGLE, e isso √© quase certo.</em> </del><br>  O relat√≥rio de erros j√° est√° fechado e ANGLE tamb√©m n√£o ser√° editado.  <strong>Portanto, no Windows, o navegador n√£o funcionar√°.</strong> </p><br><p>  No decorrer deste projeto, um bug no Chrome foi corrigido devido ao qual o feedback de transforma√ß√£o e minha √∫ltima demonstra√ß√£o <em>(acima do v√≠deo com um panorama dia / noite)</em> , que n√£o funcionava antes, come√ßaram a funcionar. </p><br><hr><br><h1 id="6-multipleer">  6. Multiplayer </h1><br><p>  Adicionado multiplayer, exclusivamente para fins de teste (e amostra de multiplayer em Godot).  C√≥digo-fonte e vers√µes bin√°rias pr√≥ximas √† vers√£o principal no github e itch (links no in√≠cio). </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Xc1GsZnVa9c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Quando o Godot 3.2 for lan√ßado, adicionarei o WebRTC para o teste tamb√©m. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt467779/">https://habr.com/ru/post/pt467779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt467767/index.html">Mais facilidades para seguidores JSON-RPC</a></li>
<li><a href="../pt467769/index.html">Em um √∫nico recurso de informa√ß√£o federal que cont√©m informa√ß√µes da popula√ß√£o</a></li>
<li><a href="../pt467771/index.html">Como um auto-reloader j√∫nior verde, escreveu o seu <s> quente </s>. Parte 2. CSS</a></li>
<li><a href="../pt467773/index.html">Fornecimento de recursos incomuns e primeiro contato</a></li>
<li><a href="../pt467775/index.html">5 mitos sobre neg√≥cios: por que o cliente est√° errado e como superar a Apple</a></li>
<li><a href="../pt467781/index.html">Curso de C ++ no CS Center, primeira parte</a></li>
<li><a href="../pt467783/index.html">Como um profissional de TI pode trabalhar e viver na Su√≠√ßa</a></li>
<li><a href="../pt467785/index.html">Como otimizar pandas ao trabalhar com grandes conjuntos de dados (ensaio)</a></li>
<li><a href="../pt467787/index.html">Como configurar a pesquisa de endere√ßos por coordenadas (e onde obter o diret√≥rio necess√°rio)</a></li>
<li><a href="../pt467789/index.html">Acabou de chegar o Java 13. O ZGC come√ßou a compartilhar mem√≥ria, o pr√≥prio CDS se lembra de classes e outras maravilhas t√©cnicas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>