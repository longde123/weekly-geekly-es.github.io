<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🚒 😑 🎇 Un guide complet des tableaux et des tranches de Golang ⏬ 👨🏽‍⚕️ 🤷🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La traduction de l'article a été préparée spécialement pour les étudiants du cours de développeur de Golang , dont les cours commencent aujourd'hui! 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Un guide complet des tableaux et des tranches de Golang</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/465613/">  <i>La traduction de l'article a été préparée spécialement pour les étudiants du cours de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">développeur de Golang</a> , dont les cours commencent aujourd'hui!</i> <br><br><img src="https://habrastorage.org/webt/nw/go/6i/nwgo6id2sgrr844g5lshkaxlheg.png"><br><hr><br>  Au début, il est facile de percevoir les tableaux et les tranches comme une seule et même chose, mais avec des noms différents: les deux sont une structure de données pour représenter les collections.  Cependant, en réalité, ils sont très différents les uns des autres. <br><br>  Dans cet article, nous examinerons leurs différences et leurs implémentations dans Go. <br><br>  Nous allons nous tourner vers des exemples afin que vous puissiez prendre une décision plus éclairée sur l'endroit où les appliquer. <a name="habracut"></a><br><br><h2>  Tableaux </h2><br>  Un tableau est une collection de taille fixe.  L'accent est mis ici sur une taille fixe, car dès que vous définissez la longueur du tableau, vous ne pourrez plus la modifier. <br><br>  Regardons un exemple.  Nous allons créer un tableau de quatre valeurs entières: <br><br><pre><code class="go hljs">arr := [<span class="hljs-number"><span class="hljs-number">4</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>}</code> </pre> <br><br><h2>  Longueur et type </h2><br>  Dans l'exemple ci-dessus, la variable <code>arr</code> définie comme un tableau de type <code>[4]int</code> , ce qui signifie que le tableau se compose de quatre éléments.  Il est important de noter que la taille <code>4</code> incluse dans la définition de type. <br><br>  Il en résulte que, en fait, des tableaux de longueurs différentes sont des tableaux de types différents.  Vous ne pouvez pas assimiler des tableaux de longueurs différentes et vous ne pouvez pas attribuer la valeur d'un tableau à un autre dans ce cas: <br><br><pre> <code class="go hljs">longerArr := [<span class="hljs-number"><span class="hljs-number">5</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>} longerArr = arr <span class="hljs-comment"><span class="hljs-comment">// This gives a compilation error longerArr == arr // This gives a compilation error</span></span></code> </pre> <br><br>  J'ai trouvé que les tableaux sont faciles à parler en termes de structures.  Si vous essayez de créer une <b>structure</b> similaire à un tableau, vous obtiendrez probablement ce qui suit: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// Struct equivalent for an array of length 4 type int4 struct { e0 int e1 int e2 int e3 int } // Struct equivalent for an array of length 5 type int5 struct { e0 int e1 int e2 int e3 int e5 int } arr := int4{3, 2, 5, 4} longerArr := int5{5, 7, 1, 2, 0}</span></span></code> </pre> <br><blockquote>  En fait, ce n'est pas recommandé, mais c'est un bon moyen de comprendre pourquoi les tableaux de différentes longueurs sont des tableaux de différents types. </blockquote><br><br><h2>  Représentation de la mémoire </h2><br>  Le tableau est stocké comme une séquence de <code>n</code> blocs d'un certain type: <br><br><img src="https://habrastorage.org/webt/3f/1e/qw/3f1eqwxmlmyc0ufznxw8d67gbvs.png"><br><br>  Cette mémoire est allouée lorsque vous initialisez une variable de tableau. <br><br><h2>  Passer par lien </h2><br>  Go ne signifie pas passer par référence, mais tout est passé par valeur.  Si vous affectez la valeur du tableau à une autre variable, la valeur affectée sera simplement copiée. <br><br><img src="https://habrastorage.org/webt/c-/f1/kn/c-f1knapumwlhthfhijpn8wlxgi.png"><br><br>  Si vous souhaitez transmettre uniquement une «référence» au tableau, utilisez des pointeurs: <br><br><img src="https://habrastorage.org/webt/li/_y/bb/li_ybbothzsi9rn0qrotolzc8fy.png"><br><br>  Lors de l'allocation de mémoire et dans une fonction, un tableau est en fait un type de données simple et fonctionne de la même manière que les structures. <br><br><h2>  Tranches </h2><br>  Les tranches peuvent être considérées comme une implémentation étendue des tableaux. <br>  Des tranches ont été implémentées dans Go pour couvrir certains des cas d'utilisation extrêmement courants rencontrés par les développeurs lorsqu'ils travaillent avec des collections, comme le redimensionnement dynamique des collections. <br><br>  Une déclaration de tranche est très similaire à une déclaration de tableau, sauf que le spécificateur de longueur est omis: <br><br><pre> <code class="go hljs">slice := []<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>}</code> </pre> <br><br>  Si vous regardez simplement le code, il semble que les tranches et les tableaux soient assez similaires, mais leur principale différence réside dans la mise en œuvre et les conditions d'utilisation. <br><br><h2>  Représentation de la mémoire </h2><br>  Une tranche est allouée différemment d'un tableau et est essentiellement un pointeur modifié.  Chaque tranche contient trois blocs d'informations: <br><br><ol><li>  Pointeur vers une séquence de données. </li><li>  La longueur, qui détermine le nombre d'éléments actuellement contenus dans la tranche. </li><li>  Capacité (capacité), qui détermine le nombre total de cellules de mémoire fournies. </li></ol><br><br><img src="https://habrastorage.org/webt/5i/fn/xa/5ifnxa493pqtyx4caxgupk0yzyu.png"><br><br>  Il s'ensuit que des tranches de longueurs différentes peuvent être affectées les unes aux autres.  Ils sont du même type et le pointeur, la longueur et le volume peuvent varier: <br><br><pre> <code class="go hljs">slice1 := []<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>} slice2 := []<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>} <span class="hljs-comment"><span class="hljs-comment">// slices of any length can be assigned to other slice types slice1 = slice2</span></span></code> </pre> <br><br>  Une tranche, contrairement à un tableau, n'alloue pas de mémoire lors de l'initialisation.  En fait, les tranches sont initialisées avec une valeur <code>nil</code> . <br><br><h2>  Passer par lien </h2><br>  Lorsque vous affectez une tranche à une autre variable, vous transmettez toujours la valeur.  Ici, la valeur se réfère uniquement au pointeur, à la longueur et au volume, et non à la mémoire occupée par les éléments eux-mêmes. <br><br><img src="https://habrastorage.org/webt/us/oz/fo/usozfobs5jz3sni3_udkcdhw4_i.png"><br><br><h2>  Ajout de nouveaux éléments </h2><br>  Pour ajouter de nouveaux éléments à la tranche, vous devez utiliser la fonction <code>append</code> . <br><br><pre> <code class="go hljs">nums := []<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>} nums = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(nums, <span class="hljs-number"><span class="hljs-number">8</span></span>)</code> </pre> <br><br>  Sous le capot, cela ressemblera à l'attribution d'une valeur spécifiée pour un nouvel élément, et après cela - le retour d'une nouvelle tranche.  La longueur de la nouvelle tranche sera une de plus. <br><br><img src="https://habrastorage.org/webt/le/sc/wj/lescwj4rjudwjziyw2dy9gtdm_i.png"><br><br>  Si lors de l'ajout d'un élément la longueur augmente de un et dépasse ainsi le volume déclaré, il est nécessaire de prévoir un nouveau volume (dans ce cas, le volume actuel double généralement). <br><br>  C'est pourquoi il est le plus souvent recommandé de créer une tranche avec la longueur et le volume spécifiés à l'avance (surtout si vous avez clairement une idée de la taille de la tranche dont vous avez besoin): <br><br><pre> <code class="go hljs">arr := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-comment"><span class="hljs-comment">// This creates a slice with length 0 and capacity 5</span></span></code> </pre><br><br><h2>  Que faut-il utiliser: des tableaux ou des tranches? </h2><br>  Les tableaux et les tranches sont des choses complètement différentes, et donc leurs cas d'utilisation varient également. <br><br>  Regardons quelques exemples open source et la bibliothèque standard Go pour comprendre quoi utiliser et quand. <br><br><h4>  Cas 1: UUID </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les UUID</a> sont des données de 128 bits qui sont souvent utilisées pour marquer un objet ou une entité.  Ils sont généralement représentés sous forme de valeurs hexadécimales, séparées par des tirets: <br><br><pre> <code class="go hljs">e39bdaf4<span class="hljs-number"><span class="hljs-number">-710d</span></span><span class="hljs-number"><span class="hljs-number">-42</span></span>ea-a29b<span class="hljs-number"><span class="hljs-number">-58</span></span>c368b0c53c</code> </pre> <br><br>  Dans la bibliothèque <a href="">Google UUID</a> , l'UUID est représenté par un tableau de 16 octets: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> UUID [<span class="hljs-number"><span class="hljs-number">16</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span></code> </pre><br>  Cela a du sens puisque nous savons que l'UUID se compose de 128 bits (16 octets).  Nous n'allons pas ajouter ou supprimer d'octets de l'UUID, et donc l'utilisation du tableau pour le représenter le sera. <br><br><h4>  Cas 2: tri des valeurs entières </h4><br>  Dans cet exemple, nous utiliserons la fonction <code>sort.Ints</code> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la bibliothèque standard</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tri</a> : <br><br><pre> <code class="go hljs">s := []<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>} <span class="hljs-comment"><span class="hljs-comment">// unsorted sort.Ints(s) fmt.Println(s) // [1 2 3 4 5 6]</span></span></code> </pre> <br><br>  La fonction <code>sort.Ints</code> prend une tranche d'entiers et les trie par ordre croissant de valeurs.  Les tranches sont préférables à utiliser ici pour deux raisons: <br><br><ol><li>  Le nombre d'entiers n'est pas spécifié (le nombre d'entiers pour le tri peut être quelconque); </li><li>  Les nombres doivent être triés par ordre croissant.  L'utilisation d'un tableau garantit que la collection entière d'entiers est transmise en tant que valeur, de sorte que la fonction trie sa propre copie, et non la collection qui lui est transmise. </li></ol><br><br><h2>  Conclusion </h2><br>  Maintenant que nous avons examiné les principales différences entre les tableaux et les tranches, ainsi que leurs cas d'utilisation, je veux donner quelques conseils pour vous aider à décider plus facilement de la conception à utiliser: <br><br><ol><li>  Si une entité est décrite par un ensemble d'éléments non vides d'une longueur fixe, utilisez des tableaux. </li><li>  Lorsque vous décrivez une collection à laquelle vous souhaitez ajouter ou à partir de laquelle supprimer des éléments, utilisez des tranches. </li><li>  Si la collection peut contenir un certain nombre d'éléments, utilisez des tranches. </li><li>  Allez-vous changer la collection de quelque façon que ce soit?  Si c'est le cas, des tranches doivent être utilisées. </li></ol><br><br>  Comme vous pouvez le voir, les tranches couvrent la plupart des scénarios de création d'applications Go.  Cependant, les tableaux ont le droit d'exister et, en outre, ils sont incroyablement utiles, en particulier lorsqu'un cas d'utilisation approprié apparaît. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465613/">https://habr.com/ru/post/fr465613/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465603/index.html">Cours vs stage. Comment enseignons-nous les midbells chez SimbirSoft</a></li>
<li><a href="../fr465605/index.html">Le livre "Deep reinforcement learning in Python. OpenAI Gym et TensorFlow pour les pros »</a></li>
<li><a href="../fr465607/index.html">Comprendre le Lean et l'Agile dans le développement de logiciels</a></li>
<li><a href="../fr465609/index.html">Pourquoi 1C-Bitrix du 1er décembre 2019 peut se transformer en citrouille</a></li>
<li><a href="../fr465611/index.html">Musique pour le programmeur</a></li>
<li><a href="../fr465615/index.html">Verrous intelligents: ce qu'ils sont, comment ils fonctionnent (et qui les installe)</a></li>
<li><a href="../fr465617/index.html">Go Gett Juno Meetup - 12 septembre, Minsk</a></li>
<li><a href="../fr465619/index.html">Sport pour le programmeur de la deuxième fraîcheur</a></li>
<li><a href="../fr465621/index.html">10 erreurs de jeune PO (conclusion)</a></li>
<li><a href="../fr465623/index.html">Accordéon, FAQ, spoiler et autres widgets déroulants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>