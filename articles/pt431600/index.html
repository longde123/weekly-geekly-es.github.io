<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•í ü•¶ üßù Aumentar IDS / NMS: Mikrotik e Suricata com uma interface da web ü§µ üåã üëº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aparentemente, eu tenho esse karma: n√£o importa como eu implemente a implementa√ß√£o de algum servi√ßo em c√≥digo aberto, definitivamente encontrarei v√°ri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aumentar IDS / NMS: Mikrotik e Suricata com uma interface da web</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431600/">  Aparentemente, eu tenho esse karma: n√£o importa como eu implemente a implementa√ß√£o de algum servi√ßo em c√≥digo aberto, definitivamente encontrarei v√°rios manuais, cada um dos quais individualmente em meu caso particular n√£o funcionar√°, a solu√ß√£o pronta n√£o ser√° iniciada ou gostar√°, o que mais acontecer√° -Nunca digestibilidade, e no final voc√™ tem que avan√ßar para o resultado sozinho. <br><br>  Desta vez, todos os manuais estavam no ELK5 ou at√© mais antigo, mas eu realmente n√£o queria instalar o software das vers√µes anteriores.  Eu queria levar o software com os per√≠odos de suporte mais promissores: de prefer√™ncia o mais recente do est√°vel. <br><br>  Como resultado, para poder repetir a fa√ßanha perfeita sem repetir todo o tormento no futuro, voc√™ deve escrever folhas de dicas passo a passo que eu compartilho com voc√™. <br><br>  Ent√£o hoje Mikrotik (RouterOS), Suricata 4.1, Elasticsearch + Filebeat + Kibana 6.5. <br><a name="habracut"></a><br><h3>  Em vez de se juntar </h3><br>  Termos: <br><br><ul><li>  Mikrotik no i386 em uma m√°quina virtual no host A. Todas as interfaces no Mikrotik est√£o espalhadas pelas VLANs, o host possui uma interface de rede f√≠sica. </li><li>  Recursos livres para IDS / IPS / NMS no host B com uma √∫nica interface de rede f√≠sica. </li><li>  Sa√≠da de canal de 20 megabytes. </li><li>  O desejo de receber an√°lises sobre o tr√°fego que passa pela interface externa do Mikrotik. </li><li>  O or√ßamento em rublos de r√°bano silvestre e kopecks da FIG. </li><li>  Uma certa quantidade de tempo livre de aborrecimentos. </li></ul><br>  N√£o falarei aqui sobre o que √© IDS / IPS / NMS, por que √© necess√°rio e o que acontece.  Todo mundo sabe disso sem mim, e quem n√£o conhece vai pesquisar no google. <br><br>  Al√©m disso, n√£o justificarei minha escolha entre Snort e Suricata em favor deste √∫ltimo.  Isso √© uma quest√£o de gosto. <br><br>  Mas explique superficialmente como funciona: <br><br>  Suricata de alguma forma recebe tr√°fego.  Existem tr√™s op√ß√µes: a) passe por voc√™ mesmo no modo inline, b) receba uma c√≥pia do tr√°fego da porta do switch ec) analise os despejos com o tr√°fego.  Suricata analisa o tr√°fego recebido e, com base na an√°lise, fornece dados sobre o que foi encontrado nesse tr√°fego. <br><br>  Suricata pode emitir dados em JSON.  Consequentemente, tendo dados estruturados, eles podem ser fornecidos a algum sistema para processamento, sistematiza√ß√£o, an√°lise e visualiza√ß√£o. <br>  Para a an√°lise e visualiza√ß√£o de dados, pelo que entendi, sem ser um especialista nesse campo, a pilha ELK √© perfeita.  A pilha do ELK consistia originalmente em Elasticsearch, Logstash, Kibana.  Agora, o Beat foi adicionado a ele (uma fam√≠lia de programas de interface que atua como intermedi√°rio entre a fonte de dados e o Logstash ou Elasticsearch).  Olhando para o futuro, direi que n√£o houve Logstash, j√° que o Beat alimenta perfeitamente os dados diretamente no Elasticsearch, e o Elasticsearch os consome perfeitamente.  O Elasticsearch transfere os dados picados para o Kibana, a interface da Web para toda a pilha ELK.  Kibana, usando os modelos passados ‚Äã‚Äãa ele pelo Filebeat, fornece ao usu√°rio a visualiza√ß√£o de dados, os chamados Dashboards.  Considerando que Elasticsearch, Logstash, Beat e Kibana s√£o o fruto do trabalho de um fabricante, todo esse farm est√° bem conectado entre si e o processo de vincula√ß√£o est√° bem documentado (√© claro para os padr√µes de c√≥digo aberto). <br><br>  Assim, com base no exposto, a tarefa pode ser descrita da seguinte forma: obter uma c√≥pia do tr√°fego da porta do roteador, transferi-lo para Suricata, receber dados no formato JSON da Suricata, transferi-los para o Filebeat, para que, por sua vez, os transfira para Elasticsearch e ajudou o Kibana a criar sua exibi√ß√£o visual. <br><br><h3>  Mikrotik RouterOS </h3><br>  Se eu tivesse um hardware de roteador Mikrotik, a quest√£o do espelhamento de porta (espelhamento de porta) n√£o seria de todo.  Tudo seria decidido ao permitir o espelhamento do tr√°fego que passa pela interface externa para qualquer porta livre do pr√≥prio Mikrotik.  Se n√£o houvesse uma porta livre no Mikrotik, voc√™ poderia ativar o espelhamento de porta no switch.  Mas no meu caso, o Mikrotik n√£o tinha portas f√≠sicas, e a porta do switch recebeu tr√°fego de todo o host, no qual, al√©m do Mikrotik, havia v√°rias outras m√°quinas virtuais. <br><br>  E ent√£o eu mais uma vez disse mentalmente: ‚ÄúObrigado Mikrotik!‚Äù.  Obrigado pelo sniffer embutido no RouterOS.  Por tradi√ß√£o, fazemos sem capturas de tela, apenas comandos do console. <br><br>  Abra o terminal no WinBox e ligue o sniffer: <br><br> <code>/tool sniffer set filter-interface=if-out filter-stream=yes streaming-enabled=yes streaming-server=192.168.1.253 <br> /tool sniffer start</code> <br> <br>  Indique em vez de <i>se o</i> nome da interface da qual voc√™ planeja interceptar o tr√°fego e em vez de <i>192.168.1.253</i> - o endere√ßo IP da m√°quina para a qual o tr√°fego interceptado ser√° enviado via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TZSP</a> . <br><br>  Com Mikrotik'om tudo. <br><br><h3>  Suricata </h3><br>  Em geral, eu n√£o sou muito orientado para Linux, ent√£o, acima de tudo, gosto de distribui√ß√µes pop.  Bem, talvez eu goste do Debian mais asc√©tico.  Ent√£o eu comecei com isso.  Bem, e √© claro, devido √† capacidade n√£o-linux, eu tamb√©m queria instalar bin√°rios do reposit√≥rio.  A montagem √© sempre pregui√ßosa para mim.  Portanto, se for poss√≠vel escolher o Debian, - <u>n√£o escolha</u> .  N√£o me lembro agora em que lugar tive a morda√ßa em instalar o farm inteiro no Debian, mas ele estava.  E toda a hist√≥ria subsequente sobre a instala√ß√£o de tudo no Ubunta. <br><br>  Uma m√°quina virtual de 4 n√∫cleos com 4 GB de RAM foi criada, o <a href="">Ubuntu Server 18.04.1 LTS (x64) foi</a> baixado e instalado nela <br><br><blockquote>  <b>Contrato</b> : todas as a√ß√µes adicionais s√£o executadas em nome do superusu√°rio, portanto, efetue login como root ou adicione <i>sudo</i> a cada comando. </blockquote><br>  Como em cada est√°gio eu fiz instant√¢neos e depois voltei repetidamente para eles, no final, acendi muitas falhas com um tempo fora de sincronia em uma m√°quina virtual em tempo real. <br>  Portanto, definimos imediatamente o fuso hor√°rio correto e a sincroniza√ß√£o NTP: <br><br> <code>systemctl start systemd-timesyncd <br> systemctl status systemd-timesyncd <br> dpkg-reconfigure tzdata</code> <br> <br>  Para garantir que n√£o haja problemas de depend√™ncia ao instalar o Suricata, adicione os reposit√≥rios do <i>universo</i> em <i><b>/etc/apt/sources.list</b></i> : <br><br> <code>nano /etc/apt/sources.list</code> <br> <blockquote>  ... <br>  deb <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">archive.ubuntu.com/ubuntu</a> bionic main universe <br>  deb <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">archive.ubuntu.com/ubuntu</a> bionic-security main universe <br>  deb <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">archive.ubuntu.com/ubuntu</a> bionic-updates principal universo </blockquote><br>  Tamb√©m adicionamos o reposit√≥rio, onde obteremos o Suricata: <br> <code>add-apt-repository ppa:oisf/suricata-stable</code> <br> <br>  Atualizando o banco de dados do pacote: <br> <code>apt-get update</code> <br> <br>  Instale Suricata: <br> <code>apt-get install -y suricata</code> <br> <br>  O pr√≥ximo passo √© definir as regras para Suricata e sua atualiza√ß√£o: <br> <code>apt-get install -y python-pip <br> pip install pyyaml <br> pip install https://github.com/OISF/suricata-update/archive/master.zip</code> <br> <br>  Iniciamos a atualiza√ß√£o do <i>suricata-update</i> : <br> <code>pip install --pre --upgrade suricata-update</code> <br> <br>  A execu√ß√£o sem configura√ß√£o adicional nos dar√° o conjunto de regras Emerging Threats Open: <br> <code>suricata-update</code> <br> <br>  Para ver a lista de fontes, fa√ßa: <br> <code>suricata-update list-sources</code> <br> <br>  Atualizando fontes de regra: <br> <code>suricata-update update-sources</code> <br> <br>  Vamos ver o que foi atualizado l√° nas fontes, execute novamente: <br> <code>suricata-update list-sources</code> <br> <br>  Inclu√≠mos todas as fontes gratuitas: <br> <code>suricata-update enable-source ptresearch/attackdetection <br> suricata-update enable-source oisf/trafficid <br> suricata-update enable-source sslbl/ssl-fp-blacklist</code> <br> <br>  E, novamente, atualizamos as regras: <br> <code>suricata-update</code> <br> <br>  Suricata est√° instalado. <br><br>  Agora voc√™ precisa obter tr√°fego. <br><br><h3>  Trafr </h3><br>  Trafr √© um aplicativo escrito por Mikrotik para converter tr√°fego TZSP em pcap.  O aplicativo √© de 32 bits, portanto, para inici√°-lo, ser√° necess√°rio ativar o suporte para aplicativos de 32 bits no Ubunta de 64 bits: <br><br> <code>dpkg --add-architecture i386 <br> apt-get update &amp;&amp; apt-get install -y libc6:i386</code> <br> <br>  Fa√ßa o download e descompacte o <i><b>trafr</b></i> : <br><br> <code>wget http://www.mikrotik.com/download/trafr.tgz <br> tar xzf trafr.tgz</code> <br> <br>  Verifique se o tr√°fego est√° sendo capturado: <br><br> <code>./trafr -s</code> <br> <br>  Ap√≥s esse lan√ßamento, a sa√≠da simb√≥lica no modo gr√°fico quebrou no console da m√°quina virtual, tive que reiniciar.  N√£o houve problemas ao conectar remotamente via ssh ao PuTTY. <br><br>  Se voc√™ v√™ oscila√ß√µes irregulares na tela, o tr√°fego chega e o tr√°fego <i><b>√©</b></i> capturado.  <i><b>Nesse</b></i> caso, transfira o <i><b>tr√°fego</b></i> para a resid√™ncia permanente e execute-o com a transmiss√£o do tr√°fego capturado pelo gasoduto imediatamente para Suricata: <br><br> <code>mv trafr /usr/local/bin/ <br> /usr/local/bin/trafr -s | suricata -c /etc/suricata/suricata.yaml -r /dev/stdin <br></code> <br><br>  Agora verificamos se o tr√°fego chega a Suricata, para isso, fazemos o seguinte no terminal vizinho: <br><br> <code>tail -f /var/log/suricata/fast.log</code> <br> <br>  Voc√™ deve ver uma rolagem inteligente de um texto significativo - um registro de recebimento de tr√°fego de suricatos. <br><br>  Tamb√©m n√£o ser√° errado garantir que o tr√°fego da Suricata n√£o apenas receba, mas tamb√©m analise: <br><br> <code>tail -f /var/log/suricata/eve.json</code> <br> <br>  Essa √© exatamente a sa√≠da dos eventos da Suricata no formato JSON que iremos alimentar no Filebeat. <br><br><h3>  Elasticsearch + Filebeat + Kibana 6.5 </h3><br>  Instalamos a chave PGP necess√°ria para usar o reposit√≥rio Elastic e instalamos as depend√™ncias necess√°rias: <br><br> <code>wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add - <br> echo "deb https://artifacts.elastic.co/packages/6.x/apt stable main" | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list <br> apt-get update &amp;&amp; apt-get install -y openjdk-8-jre apt-transport-https wget nginx</code> <br> <br>  Observe que Java √© a vers√£o 8. Qualquer coisa acima de 8 n√£o √© suportada.  Portanto, se voc√™ conseguiu instalar um Java mais recente anteriormente, fa√ßa uma demoli√ß√£o e coloque 8. <br><br>  Garantimos que o Java esteja instalado como deveria: <br><br> <code>java -version</code> <br> <br>  Temos aproximadamente a seguinte conclus√£o: <br><blockquote>  vers√£o java "1.8.0_191" <br>  Java (TM) SE Runtime Environment (compila√ß√£o 1.8.0_191-b12) <br>  VM do servidor Java HotSpot (TM) de 64 bits (compila√ß√£o 25.191-b12, modo misto) </blockquote><br>  Crie um usu√°rio e senha para acessar o Kibana.  Em vez de <i>administrador,</i> escolha algo que voc√™ prefere: <br><br> <code>echo "admin:`openssl passwd -apr1`" | sudo tee -a /etc/nginx/htpasswd.users</code> <br> <br>  Como o ELK girar√° no localhost, configure o proxy reverso no nginx: <br><br> <code>nano /etc/nginx/sites-available/kibana</code> <br> <blockquote>  servidor { <br>  ou√ßa 80; <br><br>  server_name suricata.server; <br><br>  auth_basic "Acesso Restrito"; <br>  auth_basic_user_file /etc/nginx/htpasswd.users; <br><br>  local / { <br>  proxy_pass <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">localhost</a> : 5601; <br>  proxy_http_version 1.1; <br>  proxy_set_header Atualize $ http_upgrade; <br>  proxy_set_header Conex√£o 'atualiza√ß√£o'; <br>  proxy_set_header Host $ host; <br>  proxy_cache_bypass $ http_upgrade; <br>  } <br>  } </blockquote><br> <code>rm /etc/nginx/sites-enabled/default <br> ln -s /etc/nginx/sites-available/kibana /etc/nginx/sites-enabled/kibana <br></code> <br><br>  Reinicie o nginx: <br><br> <code>systemctl restart nginx</code> <br> <br>  Colocamos Elasticsearch: <br><br> <code>apt-get install -y elasticsearch</code> <br> <br>  Ative a execu√ß√£o autom√°tica ao carregar o sistema operacional: <br><br> <code>systemctl daemon-reload <br> systemctl enable elasticsearch.service</code> <br> <br>  Lan√ßamos: <br><br> <code>systemctl start elasticsearch.service</code> <br> <br>  Verifique se aumentou: <br><br> <code>curl -X GET "localhost:9200/"</code> <br> <br>  Dependendo do desempenho do seu hardware, iniciar o ES pode levar algum tempo.  Se a <i>conex√£o for recusada</i> , basta repetir a solicita√ß√£o e aguardar at√© obter algo como: <br><blockquote>  { <br>  "Nome": "lcZuxxm", <br>  "Cluster_name": "elasticsearch", <br>  "Cluster_uuid": "kmJHqJnlQe2Rk7F-CRi4EA", <br>  "Vers√£o": { <br>  "Number": "6.5.1", <br>  "Build_flavor": "padr√£o", <br>  "Build_type": "deb", <br>  "Build_hash": "8c58350", <br>  "Build_date": "2018-11-16T02: 22: 42.182257Z", <br>  "Build_snapshot": false, <br>  "Lucene_version": "7.5.0", <br>  "Minimum_wire_compatibility_version": "5.6.0", <br>  "Minimum_index_compatibility_version": "5.0.0" <br>  } <br>  Tagline: Voc√™ sabe, para pesquisa <br>  } </blockquote><br>  Colocamos Kibana: <br><br> <code>apt-get install -y kibana</code> <br> <br>  Ative a execu√ß√£o autom√°tica ao carregar o sistema operacional: <br><br> <code>systemctl daemon-reload <br> systemctl enable kibana.service</code> <br> <br>  Lan√ßamos: <br><br> <code>systemctl start kibana.service</code> <br> <br>  Agora voc√™ pode ir para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">192.168.1.253</a> (√© claro, o endere√ßo IP √© aquele atribu√≠do √† sua m√°quina com um meerkat).  A p√°gina de rosto do Kibana deve abrir. <br><br>  Colocamos o Filebeat: <br><br> <code>apt-get install -y filebeat</code> <br> <br>  Ative a execu√ß√£o autom√°tica ao carregar o sistema operacional: <br><br> <code>systemctl daemon-reload <br> systemctl enable filebeat</code> <br> <br>  Ativamos o m√≥dulo Suricata, que faz parte do conjunto de m√≥dulos Filebeat: <br><br> <code>filebeat modules enable suricata</code> <br> <br>  Instale plugins para Suricata no Elasticsearch: <br><br> <code><s>/usr/share/elasticsearch/bin/elasticsearch-plugin install ingest-geoip <br> /usr/share/elasticsearch/bin/elasticsearch-plugin install ingest-user-agent</s></code> <br>  <b>Ver UPD 22 de maio de 2019.</b> <br><br>  Reiniciando o Elasticsearch: <br><br> <code>systemctl restart elasticsearch.service</code> <br> <br>  Realizamos a configura√ß√£o inicial do Filebeat, ao mesmo tempo carregando modelos no Kibana: <br><br> <code>filebeat setup -e</code> <br> <br>  Verificamos que o Filebeat encontrou <i>/var/log/suricata/eve.json</i> e est√° processando-o.Para fazer isso, execute o Filebeat no modo de sa√≠da de dados com o marcador de <i>publica√ß√£o</i> : <br><br> <code>filebeat -e -d "publish"</code> <br> <br>  A sa√≠da formatada em json do Filebeat ser√° a primeira, depois uma simples sa√≠da de texto de seus logs e somente ap√≥s algum tempo a sa√≠da da Suricata, ent√£o aguarde e verifique se tudo funciona.  Depois disso, aborte o Filebeat e volte ao bash. <br><br>  Ative a execu√ß√£o autom√°tica ao carregar o sistema operacional: <br><br> <code>systemctl daemon-reload <br> systemctl enable filebeat.service</code> <br> <br>  Executar filebeat: <br><br> <code>systemctl start filebeat.service</code> <br> <br>  V√° para Kibana, selecione Painel no menu √† esquerda, selecione <i><b>filebeat- *</b></i> index.  Selecione Painel novamente, selecione <b>Vis√£o geral</b> do <b>alerta [Suricata]</b> na lista e deve obter algo como isto: <br><br><img src="https://habrastorage.org/webt/tb/5v/st/tb5vsthdvuyveyetcbba1p_asts.png" alt="imagem"><br><br><h3>  Opcional </h3><br>  N√£o se esque√ßa de fazer o logrotate e, por mais amplo que seja o disco r√≠gido, o Suricata o pontuar√° muito rapidamente: <br><br> <code>nano /etc/logrotate.d/suricata</code> <br> <blockquote>  /var/log/suricata/*.log /var/log/suricata/*.json <br>  { <br>  semanalmente <br>  rodar 3 <br>  missingok <br>  nocompress <br>  criar <br>  sharedscripts <br>  postrotado <br>  / bin / kill -HUP `cat /var/run/suricata.pid 2&gt; / dev / null` 2&gt; / dev / null ||  verdade <br>  final <br>  } <br></blockquote><br>  Al√©m disso, havia rumores de que algu√©m farejava regularmente no Mikrotik com o status de <i>execu√ß√£o</i> deixa de fornecer tr√°fego.  Em seguida, escrevemos um script para reiniciar o sniffer e execut√°-lo de acordo com o cronograma: <br><br> <code>/tool sniffer stop <br> :delay 30s <br> /tool sniffer start</code> <br> <br><h3>  Conclus√£o </h3><br>  Francamente, n√£o estou muito satisfeito com a estabilidade do pacote acima.  A saber: vale a pena reiniciar, e os milagres come√ßam.  Uma vez, tudo, exceto alguns, parou de processar minhas regras.  Eu tive que reinstalar tudo.  Na segunda vez, o Elasticsearch geralmente parou de receber dados do Filebeat e teve que reverter para o instant√¢neo do estado antes de reiniciar. <br><br>  Ainda n√£o resolvi esses problemas. <br><br>  Al√©m disso, h√° planos de implementar o IPS com base nos endere√ßos IP dos vil√µes identificados por Suricata transferidos para o Mikrotik. <br><br>  <b>UPD</b> : Acusa√ß√µes de instabilidade s√£o descartadas.  Minha conclus√£o sobre o t√©rmino do processamento de regras foi incorreta.  De fato, o motivo do vazio no painel ap√≥s a reinicializa√ß√£o se deve ao fato de o Filebeat e o Elasticsearch precisarem de um tempo muito percept√≠vel para analisar um arquivo json de v√°rios gigabytes do meerkat.  Se voc√™ abrir o Painel com eventos por um per√≠odo que inclua a data em que o arquivo <i>eve.json</i> foi <i>criado</i> , poder√° ver como as colunas do gr√°fico crescem √† medida que o arquivo √© processado.  Juntamente com os eventos processados, os alertas aparecem no painel correspondente.  Al√©m disso, o sniffer no RouterOS no x86 nunca parou. <br><br>  <b>UPD 22 de maio de 2019</b> : A partir da vers√£o Elasticsearch 6.7, os plugins ingest-geoip e ingest-user-agent foram convertidos em m√≥dulos.  Consequentemente, o item com sua instala√ß√£o √© ignorado. <br><br>  Al√©m disso, ao atualizar, voc√™ recebe um erro de inicializa√ß√£o do Elasticsearch.  Voc√™ ver√° um erro nos logs: <br><br><blockquote>  banco de dados esperado [GeoLite2-ASN.mmdb] n√£o existe em [/ etc / elasticsearch / ingest-geoip] </blockquote><br>  Para restaurar o desempenho, realizamos: <br><br> <code>/usr/share/elasticsearch/bin/elasticsearch-plugin remove --purge ingest-geoip <br></code> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt431600/">https://habr.com/ru/post/pt431600/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt431586/index.html">Como lidar com erros na JVM mais rapidamente</a></li>
<li><a href="../pt431588/index.html">Ato por conta pr√≥pria. Informa√ß√µes para considera√ß√£o</a></li>
<li><a href="../pt431590/index.html">Moderniza√ß√£o de parques e√≥licos obsoletos do Reino Unido aumentar√° a gera√ß√£o de energia em 171%</a></li>
<li><a href="../pt431596/index.html">Teste de carga de replica√ß√£o e backup da Veeam</a></li>
<li><a href="../pt431598/index.html">Trazemos para a Internet uma m√°quina virtual p√∫blica QEMU sem placa de rede e tentamos extrair</a></li>
<li><a href="../pt431602/index.html">Desenvolvedores russos apresentaram em Londres um sistema de reabilita√ß√£o virtual</a></li>
<li><a href="../pt431604/index.html">Localiza√ß√£o no Go com pacotes b√°sicos</a></li>
<li><a href="../pt431608/index.html">A empresa americana DriveSavers √© a primeira do mundo a lan√ßar o servi√ßo de hackers para iPhone de indiv√≠duos</a></li>
<li><a href="../pt431610/index.html">Gerente de projeto Lifehacks</a></li>
<li><a href="../pt431612/index.html">Caixa musical e codificador rotativo na placa FPGA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>