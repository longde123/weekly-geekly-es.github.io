<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßùüèø üîë üëâ Comment vendre un git dans un autre git ‚ÜïÔ∏è üêô üåñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="D√©couverte de l'extension du git vendor . 


 Cross-post de mon blog moyen: https://medium.com/opsops/git-vendor-295db4bcec3a 


 Je voudrais pr√©sente...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment vendre un git dans un autre git</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442306/"><p> D√©couverte de l'extension du <code>git vendor</code> . </p><br><p>  <em>Cross-post de mon blog moyen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://medium.com/opsops/git-vendor-295db4bcec3a</a></em> </p><br><p>  Je voudrais pr√©senter la bonne fa√ßon de g√©rer la vente de r√©f√©rentiels git. </p><br><h1 id="what-is-is-vendoring">  Qu'est-ce que la ¬´vente¬ª? </h1><br><p>  La vente est un moyen d'int√©grer le travail des autres dans le v√¥tre.  C'est l'oppos√© de ¬´lier¬ª une biblioth√®que tierce.  Au lieu d'avoir cette biblioth√®que comme d√©pendance, l'application utilise cette biblioth√®que en tant que partie de son propre code source et conserve ce code `` √† l'int√©rieur '' lui-m√™me. </p><br><p>  Normalement, la vente se fait par l'outillage linguistique: bundler, cargo, pip, etc.  Mais parfois, vous devez vendre quelque chose qui n'est couvert par aucun jeu d'outils existant, ou quelque chose de multilingue, qu'il est impossible de trouver l'outil de langage ¬´de base¬ª pour cela. </p><br><p>  La solution √† cette situation est la vente au niveau git.  Vous avez votre propre r√©f√©rentiel git (je l'appelle ¬´ <em>destination repo</em> ¬ª), et vous souhaitez incorporer un autre r√©f√©rentiel (je l'appelle ¬´ <em>source repo</em> ¬ª) en tant que r√©pertoire dans votre (destination repo). </p><br><p>  Les choses que vous attendez d'un syst√®me de vente bien con√ßu (peu importe Git ou non): </p><br><ul><li>  Visibilit√©  Vous voulez savoir qu'un certain code est vendu, cela signifie qu'il n'a pas √©t√© √©crit par committer. <a name="habracut"></a></li><li>  Provenance  Vous voulez savoir d'o√π cela vient.  Quel √©tait le r√©f√©rentiel que quelqu'un avait int√©gr√© √† votre r√©f√©rentiel il y a deux ans?  Et quelle version / commit √©tait? </li><li>  Mise √† jour  Vous voulez pouvoir mettre √† jour ce code quand il corrige un bug dans le r√©f√©rentiel d'origine (ou a une nouvelle fonctionnalit√© attendue depuis longtemps).  Comme cas particulier pour la mise √† jour, vous voulez pouvoir supprimer le code commercial (et seulement lui). </li><li>  R√©p√©tabilit√©  La vente ne devrait pas √™tre l'art, elle devrait √™tre le processus rigide √† l'abri des erreurs.  le vendeur foo dans la barre devrait donner le m√™me r√©sultat, peu importe qui l'a fait. </li><li>  Transportabilit√©.  Une personne qui clonera votre r√©f√©rentiel devrait pouvoir continuer √† g√©rer la commercialisation exactement de la m√™me mani√®re que vous.  Cela signifie que toutes les informations li√©es au fournisseur doivent rester dans le git et √™tre transf√©r√©es pendant le push / pull. </li><li>  Gouvernance.  Toutes les modifications apport√©es par le fournisseur doivent rester ¬´telles quelles¬ª jusqu'√† ce que quelqu'un les mette √† jour.  De plus, vous ne voulez pas avoir de mises √† jour inattendues (cass√©es), vous voulez absolument garder les choses vendues disponibles m√™me si le d√©p√¥t source n'est plus disponible. </li><li>  Patchachabilit√©.  Vous voulez pouvoir modifier le code du fournisseur et toujours le mettre √† jour vers une version plus r√©cente.  De pr√©f√©rence, sans conflits, mais au moins, avec une visibilit√© claire o√π ces conflits se sont produits. </li></ul><br><p>  Et, √©tant donn√© la nature git de Git, vous voulez que ce syst√®me soit compatible avec les succursales.  Si la branche A a du code fournisseur √† la version a1 et la branche B √† la version b1, vous souhaitez basculer entre elles chaque fois que vous basculez entre A et B. De plus, vous voulez pouvoir changer la version a1 en a2 et la version b1 en b2 sans se soucier des versions dans une autre branche. </p><br><p>  ... Et vous voulez pouvoir vendre plus d'un r√©f√©rentiel externe, donc la vente ne doit pas √™tre un √©v√©nement unique par repo. </p><br><p>  Comme vous pouvez le voir, c'est une longue liste d'exigences.  J'ai analys√© les (autres) solutions existantes avant d'arriver √† la meilleure solution (git vendor). </p><br><h2 id="copy-paste">  Copier coller </h2><br><p>  Le copier-coller est un moyen si vicieux de vendre n'importe quoi que je n'ai rien de bon √† dire √† ce sujet.  Vous perdez la provenance, la visibilit√©, la possibilit√© de mise √† jour.  Vous ne perdez pas la transportabilit√©, car il n'y a pas de lien avec l'ancien d√©p√¥t en premier lieu.  Ne faites pas de vente comme √ßa. </p><br><h2 id="git-in-git">  Git-in-git </h2><br><p>  C'est une astuce stupide mais quelque peu efficace.  Cr√©ez un dossier vendored_foobar dans votre r√©f√©rentiel, allez dans vendored_foobar et clonez cette foobar.  Revenez au niveau sup√©rieur et validez toutes les modifications que vous avez. </p><br><p>  Avantages: simple √† faire, fournit une provenance locale, une bonne gouvernance et une excellente patchablit√©. </p><br><p>  Inconv√©nients: il est fragile, il ne survit pas √† la pouss√©e (le dossier .git imbriqu√© n'est pas inclus dans votre r√©f√©rentiel, donc pour les observateurs externes, le code fourni par le vendeur est impossible √† distinguer du v√¥tre).  Vous perdrez donc la transportabilit√© et la provenance √† long terme. </p><br><h2 id="submodules">  Sous-modules </h2><br><p>  L'id√©e est que vous avez certains dossiers de votre git g√©r√©s dans un autre git.  C'est le plus ancien `` quelque chose '' que git avait fourni.  Malheureusement, il n'est pas favorable aux succursales et il manque de gouvernance sur le code commercial.  Si le d√©p√¥t √† distance a disparu, vous ne pouvez pas utiliser vos sous-modules. </p><br><p>  Et n'oubliez pas combien il est difficile de cloner ce d√©p√¥t. </p><br><h2 id="git-subtree">  sous-arbre git </h2><br><p>  Git peut utiliser la m√©thode 'subtree' pour fusionner des gits externes en tant que dossiers dans le r√©f√©rentiel git local.  Il est presque parfait, √† l'exception de la mise √† jour, de la r√©p√©tabilit√©, de la provenance et de la visibilit√©.  √Ä moins que le manuel ne fouille dans une histoire git, il est impossible de voir quelle partie du d√©p√¥t git est vendue et laquelle ne l'est pas.  Et vous ne savez pas d'o√π viennent ces changements.  Si committer n'a pas √©crit cela, les informations sont perdues.  Et si c'est le cas, ce n'est pas reproductible car des changements mineurs peuvent se produire lors du remplissage de ces informations. </p><br><p>  Alors, entrez le gagnant pris√©, git vendor. </p><br><h1 id="git-vendor">  Vendeur Git </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Git vendor</a> est une extension √©tonnante pour git √©crite par Brett Langdon il y a environ trois ans.  C'est juste environ 200 lignes en bash, mais c'est tellement bien √©crit que je ne m'en plains pas du tout (il a tout ce qu'un bon programme devrait avoir: pages de manuel, aide, ach√®vement de bash, gestion raisonnable des erreurs et protections de s√©curit√©). </p><br><p>  Il utilise git subtree et l'√©tend avec des fonctions pour couvrir les c√¥t√©s l√¢ches de la vente par git subtree. </p><br><p>  Chaque point important est v√©rifi√©: </p><br><ul><li>  visibilit√©.  Appelez simplement la <code>git vendor list</code> et voyez toutes les choses vendues. </li><li>  provenance.  Il montre le d√©p√¥t √† distance et permet de voir quel commit a √©t√© vendu. </li><li>  possibilit√© de mise √† jour.  <code>git vendor update</code> , et il prend en charge les branches, les balises et les commits comme un moyen de d√©terminer exactement ce qu'il faut prendre.  Et vous pouvez bien s√ªr <code>git vendor remove</code> . </li><li>  r√©p√©tabilit√©.  Il n'y a aucune op√©ration manuelle impliqu√©e, donc tout le monde obtiendra le m√™me r√©sultat lors de la premi√®re livraison ou des mises √† jour suivantes. </li><li>  transportabilit√©.  Toutes les modifications sont stock√©es sous forme de balises sp√©ciales dans l'historique git, elles sont donc enti√®rement compatibles push / pull.  Et ils fonctionnent tr√®s bien avec les succursales et les retraits d'historique arbitraires. </li><li>  govenrance.  Tout le code commercial est stock√© dans votre r√©f√©rentiel. </li><li>  patchachabilit√©.  C'est le cas (vous verrez une fusion claire des conflits avec vos modifications), mais c'est le c√¥t√© le plus faible de git vendor.  Je pr√©f√©rerais avoir une 'file d'attente de correctifs' (comme dans debian / pathes pour les paquets deb), mais n√©anmoins, il y a un support minimal pour cela. </li></ul><br><p>  Il a une politique sp√©cifique sur la fa√ßon dont les choses sont vendues: si vous voulez cloner <code>https://github.com/serverscom/dibctl</code> il va dans <code>vendor/github.com/serverscom/dibctl/</code> .  Vous pouvez changer la partie ' <code>vendor/</code> ', mais le reste est une politique difficile.  Les liens symboliques peuvent cependant faciliter cela. </p><br><p>  Il y a quelques bugs mineurs: vous ne pouvez pas l'utiliser sur des d√©p√¥ts vides, vous ne pouvez pas utiliser les gits locaux comme sources, vous ne pouvez pas voir d'aide tant que vous n'√™tes pas dans git repo.  Aucun d'entre eux ne pose de probl√®mes lors d'un travail normal avec de vrais repos. </p><br><h1 id="conclusion">  Conclusion </h1><br><p>  git-vendor est un outil parfait pour vendre un d√©p√¥t git dans un autre.  Il fournit toutes les fonctionnalit√©s requises pour les meilleures pratiques de vente: conserver la provenance, assurer la visibilit√© et la mise √† jour. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442306/">https://habr.com/ru/post/fr442306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442292/index.html">Stage Sberseasons: Python, UX / UI, Data et bien plus encore pour les √©tudiants</a></li>
<li><a href="../fr442294/index.html">Ce qu'Oleg Artamonov a l√©g√®rement tort</a></li>
<li><a href="../fr442298/index.html">Gatsby.js en d√©tail</a></li>
<li><a href="../fr442300/index.html">Je regarde et j'√©coute o√π je veux. Int√©gration de Chromecast dans une application Android</a></li>
<li><a href="../fr442304/index.html">Smartphones pliants: qu'en est-il des applications?</a></li>
<li><a href="../fr442310/index.html">Micrologiciel Sonoff Basic via Raspberry Pi</a></li>
<li><a href="../fr442312/index.html">DoT pour la distribution RPZ</a></li>
<li><a href="../fr442316/index.html">Une biblioth√®que C ++ compacte pour programmer des m√©thodes de diff√©rences finies de type op√©rateur. Partie 1. S√©mantique</a></li>
<li><a href="../fr442318/index.html">Comment faire un changement avec une r√©trospective</a></li>
<li><a href="../fr442320/index.html">Ordinateur portable Compaq LTE 5000, deuxi√®me partie - sur les lacunes et leur traitement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>