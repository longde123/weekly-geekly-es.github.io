<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💇🏾 ↔️ 👨‍⚖️ Pemrosesan Kesalahan yang Tidak Dapat Dipulihkan di Swift 👩🏿‍🤝‍👨🏽 💜 👑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata pengantar 


 Artikel ini adalah contoh bagaimana kita dapat melakukan penelitian tentang fungsi fungsi Perpustakaan Swift Standar membangun peng...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemrosesan Kesalahan yang Tidak Dapat Dipulihkan di Swift</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440884/"><h2 id="preface">  Kata pengantar </h2><br><p> Artikel ini adalah contoh bagaimana kita dapat melakukan penelitian tentang fungsi fungsi Perpustakaan Swift Standar membangun pengetahuan kita tidak hanya pada dokumentasi Perpustakaan tetapi juga pada kode sumbernya. </p><br><h2 id="unrecoverable-errors">  Kesalahan yang Tidak Dapat Dipulihkan </h2><br><p>  Semua peristiwa yang oleh pemrogram disebut "kesalahan" dapat dipisahkan menjadi dua jenis. </p><br><ul><li>  Peristiwa yang disebabkan oleh faktor eksternal seperti kegagalan koneksi jaringan. </li><li>  Peristiwa yang disebabkan oleh kesalahan programmer seperti mencapai kasus operator switch yang harus dijangkau. </li></ul><a name="habracut"></a><br><p>  Kejadian dari tipe pertama diproses dalam aliran kontrol reguler.  Misalnya, kami bereaksi terhadap kegagalan jaringan dengan menunjukkan pesan kepada pengguna dan mengatur aplikasi untuk menunggu pemulihan koneksi jaringan. </p><br><p>  Kami mencoba mencari tahu dan menghilangkan peristiwa tipe kedua sedini mungkin sebelum kode tersebut diproduksi.  Salah satu pendekatan di sini adalah menjalankan beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengecekan runtime yang menghentikan eksekusi program</a> dalam status debuggable dan mencetak pesan dengan indikasi di mana dalam kode kesalahan telah terjadi. </p><br><p>  Sebagai contoh, seorang programmer dapat menghentikan eksekusi jika initializer yang diperlukan tidak disediakan tetapi dipanggil.  Itu akan selalu diperhatikan dan diperbaiki selama uji coba pertama. </p><br><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">required</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>?(coder aDecoder: <span class="hljs-type"><span class="hljs-type">NSCoder</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"init(coder:) has not been implemented"</span></span>) }</code> </pre> <br><p>  Contoh lain adalah beralih antar indeks (mari kita asumsikan bahwa karena alasan tertentu Anda tidak dapat menggunakan enumerasi). </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> index { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-comment"><span class="hljs-comment">// something is done here case 1: // other thing is done here case 2: // and other thing is done here default: assertionFailure("Impossible index") }</span></span></code> </pre> <br><p>  Sekali lagi, seorang programmer akan menyebabkan crash selama debugging di sini untuk melihat bug dalam pengindeksan. </p><br><p>  Ada lima fungsi terminating dari Swift Standard Library (seperti untuk Swift 4.2). </p><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">precondition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> condition: @autoclosure </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span>, <span class="hljs-number"><span class="hljs-number">_</span></span> message: <span class="hljs-meta"><span class="hljs-meta">@autoclosure</span></span> () -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, file: <span class="hljs-type"><span class="hljs-type">StaticString</span></span> = #file, line: <span class="hljs-type"><span class="hljs-type">UInt</span></span> = #line)</code> </pre> <br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">preconditionFailure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message: @autoclosure </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, file: <span class="hljs-type"><span class="hljs-type">StaticString</span></span> = #file, line: <span class="hljs-type"><span class="hljs-type">UInt</span></span> = #line) -&gt; <span class="hljs-type"><span class="hljs-type">Never</span></span></code> </pre> <br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> condition: @autoclosure </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span>, <span class="hljs-number"><span class="hljs-number">_</span></span> message: <span class="hljs-meta"><span class="hljs-meta">@autoclosure</span></span> () -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, file: <span class="hljs-type"><span class="hljs-type">StaticString</span></span> = #file, line: <span class="hljs-type"><span class="hljs-type">UInt</span></span> = #line)</code> </pre> <br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assertionFailure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message: @autoclosure </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, file: <span class="hljs-type"><span class="hljs-type">StaticString</span></span> = #file, line: <span class="hljs-type"><span class="hljs-type">UInt</span></span> = #line)</code> </pre> <br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fatalError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message: @autoclosure </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, file: <span class="hljs-type"><span class="hljs-type">StaticString</span></span> = #file, line: <span class="hljs-type"><span class="hljs-type">UInt</span></span> = #line) -&gt; <span class="hljs-type"><span class="hljs-type">Never</span></span></code> </pre> <br><p>  <strong>Manakah dari lima fungsi terminating yang harus kita sukai?</strong> </p><br><h2 id="source-code-vs-documentation">  Kode Sumber vs Dokumentasi </h2><br><p>  Mari kita lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode sumbernya</a> .  Kita dapat melihat hal berikut segera: </p><br><ol><li>  Masing-masing dari lima fungsi ini mengakhiri eksekusi program atau tidak melakukan apa pun. </li><li>  Kemungkinan pemutusan terjadi dalam dua cara. <br><ul><li>  Dengan mencetak pesan debug yang nyaman dengan memanggil <code>_assertionFailure(_:_:file:line:flags:)</code> . </li><li>  Tanpa pesan debug hanya dengan memanggil <code>Builtin.condfail(error._value)</code> atau <code>Builtin.int_trap()</code> . </li></ul></li><li>  Perbedaan antara lima fungsi terminating terletak pada kondisi di mana semua hal di atas terjadi. </li><li>  <code>fatalError(_:file:line)</code> memanggil <code>_assertionFailure(_:_:file:line:flags:)</code> tanpa syarat. </li><li>  Empat fungsi terminating lainnya mengevaluasi kondisi dengan memanggil fungsi evaluasi konfigurasi berikut.  (Mereka mulai dengan garis bawah yang berarti bahwa mereka internal dan tidak seharusnya dipanggil langsung oleh seorang programmer yang menggunakan Swift Standard Library). <br><ul><li> <code>_isReleaseAssertConfiguration()</code> </li> <li> <code>_isDebugAssertConfiguration()</code> </li> <li> <code>_isFastAssertConfiguration()</code> </li> </ul></li></ol><br><p>  Sekarang mari kita lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> .  Kita bisa melihat yang berikut ini segera. </p><br><ol><li>  <code>fatalError(_:file:line)</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tanpa syarat mencetak pesan yang diberikan dan menghentikan eksekusi</a> . </li><li>  Efek dari empat fungsi terminating lainnya bervariasi tergantung pada flag build yang digunakan: <code>-Onone</code> , <code>-O</code> , <code>-Ounchecked</code> .  Misalnya, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> <code>preconditionFailure(_:file:line:)</code> . </li><li>  Kita dapat mengatur flag build ini dalam Xcode melalui <code>SWIFT_OPTIMIZATION_LEVEL</code> pengaturan build compiler. </li><li>  Kami juga tahu dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> Xcode 10 bahwa satu lagi bendera pengoptimalan - <code>-Osize</code> - diperkenalkan. </li><li>  Jadi kami memiliki empat flag build optimisasi untuk dipertimbangkan. <br><ul><li>  <code>-Onone</code> (tidak mengoptimalkan) </li><li>  <code>-O</code> (optimalkan kecepatan) </li><li>  <code>-Osize</code> (mengoptimalkan ukuran) </li><li>  <code>-Ounchecked</code> (matikan banyak pemeriksaan kompiler) </li></ul></li></ol><br><p>  Kami dapat menyimpulkan bahwa konfigurasi yang dievaluasi dalam empat fungsi terminating diatur oleh flag build ini. </p><br><h2 id="running-configuration-evaluation-functions">  Menjalankan Fungsi Evaluasi Konfigurasi </h2><br><p>  Meskipun fungsi evaluasi konfigurasi dirancang untuk penggunaan internal, beberapa di antaranya bersifat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">publik untuk tujuan pengujian</a> , dan kami dapat mencobanya melalui CLI dengan memberikan perintah berikut di Bash. </p><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'print(_isFastAssertConfiguration())'</span></span> &gt;conf.swift $ swift conf.swift <span class="hljs-literal"><span class="hljs-literal">false</span></span> $ swift -Onone conf.swift <span class="hljs-literal"><span class="hljs-literal">false</span></span> $ swift -O conf.swift <span class="hljs-literal"><span class="hljs-literal">false</span></span> $ swift -Osize conf.swift <span class="hljs-literal"><span class="hljs-literal">false</span></span> $ swift -Ounchecked conf.swift <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'print(_isDebugAssertConfiguration())'</span></span> &gt;conf.swift $ swift conf.swift <span class="hljs-literal"><span class="hljs-literal">true</span></span> $ swift -Onone conf.swift <span class="hljs-literal"><span class="hljs-literal">true</span></span> $ swift -O conf.swift <span class="hljs-literal"><span class="hljs-literal">false</span></span> $ swift -Osize conf.swift <span class="hljs-literal"><span class="hljs-literal">false</span></span> $ swift -Ounchecked conf.swift <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br><p>  Tes dan inspeksi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode sumber ini</a> membawa kita pada kesimpulan kasar berikut. </p><br><p>  Ada tiga konfigurasi yang saling eksklusif. </p><br><ul><li>  Konfigurasi <em>rilis</em> diatur dengan menyediakan flag build <code>-O</code> atau <code>-Osize</code> . </li><li>  Konfigurasi <em>debug</em> diatur dengan menyediakan flag build <code>-Onone</code> atau tidak ada flag optimasi sama sekali. </li><li>  <code>_isFastAssertConfiguration()</code> dievaluasi ke <code>true</code> jika flag build <code>-Ounchecked</code> diatur.  Meskipun fungsi ini memiliki kata "cepat" dalam namanya, itu tidak ada hubungannya dengan mengoptimalkan kecepatan <code>-O</code> build flag. </li></ul><br><p>  <strong>NB:</strong> Kesimpulan ini bukan definisi ketat tentang kapan <em>debug</em> membangun atau <em>melepaskan</em> build terjadi.  Ini masalah yang lebih kompleks.  Tetapi kesimpulan ini benar untuk konteks penggunaan fungsi terminating. </p><br><h2 id="simplifying-the-picture">  Menyederhanakan gambar </h2><br><h3 id="-ounchecked"> <code>-Ounchecked</code> </h3> <br><p>  Mari kita tidak melihat untuk <strong>apa flag <code>-Ounchecked</code></strong> (tidak relevan di sini) tetapi pada <strong>perannya</strong> dalam konteks penghentian penggunaan fungsi. </p><br><ul><li>  Dokumentasi untuk <code>precondition(_:_:file:line:)</code> dan <code>assert(_:_:file:line:)</code> mengatakan, "Dalam <code>-Ounchecked</code> bangun, kondisi tidak dievaluasi, tetapi pengoptimal dapat berasumsi bahwa itu selalu bernilai true. Kegagalan untuk memenuhi asumsi itu adalah kesalahan pemrograman yang serius. " </li><li>  Dokumentasi untuk <code>preconditionFailure(_:file:line)</code> dan <code>assertionFailure(_:file:line:)</code> mengatakan, "In <code>-Ounchecked</code> builds, pengoptimal mungkin menganggap bahwa fungsi ini tidak pernah dipanggil. Kegagalan untuk memenuhi asumsi itu adalah kesalahan pemrograman yang serius. " </li><li>  Kita dapat melihat dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode sumber</a> bahwa evaluasi <code>_isFastAssertConfiguration()</code> ke <code>true</code> <strong>seharusnya tidak terjadi</strong> .  (Jika hal itu terjadi, <code>_conditionallyUnreachable()</code> aneh disebut. Lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lihat baris 136 dan</a> <code>_conditionallyUnreachable()</code> ) </li></ul><br><p>  Berbicara lebih langsung, Anda <strong>tidak boleh membiarkan jangkauan</strong> dari empat fungsi penghentian berikut ini dengan flag build yang sudah <code>-Ounchecked</code> sebelumnya untuk program Anda. </p><br><ul><li> <code>precondition(_:_:file:line:)</code> </li> <li> <code>preconditionFailure(_:file:line)</code> </li> <li> <code>assert(_:_:file:line:)</code> </li> <li> <code>assertionFailure(_:file:line:)</code> </li> </ul><br><p>  Gunakan hanya <code>fatalError(_:file:line)</code> saat menerapkan <code>-Ounchecked</code> dan pada saat yang sama memungkinkan bahwa titik program Anda dengan <code>fatalError(_:file:line)</code> instruksi mungkin dapat dijangkau. </p><br><h3 id="the-role-of-a-condition-check">  Peran pemeriksaan kondisi </h3><br><p>  Dua fungsi terminating mari kita periksa kondisinya.  Inspeksi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode sumber</a> memungkinkan kita untuk melihat bahwa jika kondisi gagal maka perilaku fungsi sama dengan perilaku sepupunya masing-masing: </p><br><ul><li>  <code>precondition(_:_:file:line:)</code> menjadi <code>preconditionFailure(_:file:line)</code> , </li><li>  <code>assert(_:_:file:line:)</code> menjadi <code>assertionFailure(_:file:line:)</code> . </li></ul><br><p>  Pengetahuan itu membuat analisis lebih mudah. </p><br><h3 id="release-vs-debug-configurations">  Rilis vs Konfigurasi Debug </h3><br><p>  Akhirnya, dokumentasi lebih lanjut dan inspeksi kode sumber memungkinkan kami untuk merumuskan tabel berikut. </p><br><p><img src="https://habrastorage.org/webt/x3/tq/vs/x3tqvsckgpqpyxso3flqfhyyddo.png" alt="Mengakhiri fungsi"></p><br><p>  Jelas sekarang bahwa pilihan yang paling penting bagi seorang programmer adalah seperti apa perilaku program seharusnya <strong>dalam <em>rilis</em></strong> jika pemeriksaan runtime mengungkapkan kesalahan. </p><br><p>  Kunci takeaway di sini adalah <code>assertionFailure(_:file:line:)</code> <code>assert(_:_:file:line:)</code> dan <code>assertionFailure(_:file:line:)</code> membuat dampak kegagalan program tidak terlalu parah.  Misalnya, aplikasi iOS mungkin telah merusak UI (karena beberapa pemeriksaan runtime penting gagal) tetapi tidak akan macet. </p><br><p>  Tapi skenario itu mungkin bukan yang Anda inginkan.  Anda punya pilihan. </p><br><h2 id="never-return-type">  <code>Never</code> kembali ketik </h2><br><p>  <code>Never</code> digunakan sebagai tipe kembali fungsi yang tanpa syarat melempar kesalahan, jebakan, atau yang tidak berakhir secara normal.  Fungsi-fungsi semacam itu tidak benar-benar kembali, mereka <strong>tidak pernah</strong> kembali. </p><br><p>  Di antara lima fungsi terminating, hanya <code>preconditionFailure(_:file:line)</code> dan <code>fatalError(_:file:line)</code> kembali <code>Never</code> karena hanya dua fungsi ini yang tanpa syarat menghentikan eksekusi program dan karenanya tidak pernah kembali. </p><br><p>  Ini adalah contoh yang bagus untuk menggunakan <code>Never</code> ketik di aplikasi baris perintah.  (Meskipun contoh ini tidak menggunakan fungsi terminasi Swift Standard Library tetapi fungsi standar C <code>exit()</code> ). </p><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printUsagePromptAndExit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Never</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Usage: command directory"</span></span>) exit(<span class="hljs-number"><span class="hljs-number">1</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-type"><span class="hljs-type">CommandLine</span></span>.argc == <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { printUsagePromptAndExit() } <span class="hljs-comment"><span class="hljs-comment">// ...</span></span></code> </pre> <br><p>  Jika <code>printUsagePromptAndExit()</code> mengembalikan <code>Void</code> bukannya <code>Never</code> , Anda mendapatkan galat buildtime dengan pesan, " <em>badan 'penjaga' tidak boleh jatuh, pertimbangkan menggunakan 'kembali' atau 'lempar' untuk keluar dari ruang lingkup</em> ".  Dengan menggunakan <code>Never</code> Anda katakan sebelumnya bahwa Anda <strong>tidak pernah</strong> keluar dari cakupan dan karenanya kompiler tidak akan memberi Anda kesalahan waktu bangun.  Jika tidak, Anda harus menambahkan <code>return</code> di akhir blok kode penjaga, yang tidak terlihat bagus. </p><br><h2 id="takeaways">  Takeaways </h2><br><ul><li>  Tidak masalah fungsi terminating mana yang digunakan jika Anda yakin bahwa semua pemeriksaan runtime Anda hanya relevan untuk konfigurasi <em>Debug</em> . </li><li>  Gunakan hanya <code>fatalError(_:file:line)</code> saat menerapkan <code>-Ounchecked</code> dan pada saat yang sama memungkinkan bahwa titik program Anda dengan <code>fatalError(_:file:line)</code> instruksi mungkin dapat dijangkau. </li><li>  Gunakan <code>assert(_:_:file:line:)</code> dan <code>assertionFailure(_:file:line:)</code> jika Anda khawatir pemeriksaan runtime akan gagal dalam rilis.  Setidaknya aplikasi Anda tidak akan macet. </li><li>  Gunakan <code>Never</code> untuk membuat kode Anda terlihat rapi. </li></ul><br><h2 id="useful-links">  Tautan yang bermanfaat </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Video WWDC "What's New in Swift"</a> menceritakan tentang pengaturan bangunan <code>SWIFT_OPTIMIZATION_LEVEL</code> (mulai 11 menit). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagaimana Tidak Pernah Bekerja Secara Internal di Swift</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>NSHipster's article about nature of Never</code></a> </li> <li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Diskusi Swift Forum</a> tentang saran untuk tidak berlaku lagi - <code>-Ounchecked</code> . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440884/">https://habr.com/ru/post/id440884/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440872/index.html">PostGIS dan JPA</a></li>
<li><a href="../id440874/index.html">Menerapkan Gerakan Partikel Gratis di ReactJS</a></li>
<li><a href="../id440878/index.html">Analisis web untuk bisnis</a></li>
<li><a href="../id440880/index.html">10 sensor IoT teratas pada tahun 2019</a></li>
<li><a href="../id440882/index.html">Melarikan diri dari Crypto Pro. Edisi GOST 34.10-2012</a></li>
<li><a href="../id440886/index.html">Hapus lunak di REST API</a></li>
<li><a href="../id440888/index.html">Tes Independen Baikal-T1 - Dewan Evaluasi 28 nm SoC Rusia pertama - dan BFK 3.1</a></li>
<li><a href="../id440890/index.html">Patriotisme dalam permainan komputer: pendapat seorang mantan gamer</a></li>
<li><a href="../id440892/index.html">Efisiensi tak terduga dari urutan kuasi-acak</a></li>
<li><a href="../id440894/index.html">Merancang Suara untuk Pathfinder: Kingmaker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>