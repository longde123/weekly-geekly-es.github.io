<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÅ üèì üìà Inteligencia artificial en el juego de lucha Shadow Fight 3 üßë üíì ‚ÜôÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los dise√±adores de juegos se enfrentan regularmente al desaf√≠o de crear una IA interesante. Este proceso puede ser relativamente simple o extremadamen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Inteligencia artificial en el juego de lucha Shadow Fight 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/banzai/blog/468023/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/lq/y9/71/lqy971j1var5p0ii8pswvtscth0.jpeg"></a> <br><br>  Los dise√±adores de juegos se enfrentan regularmente al desaf√≠o de crear una IA interesante.  Este proceso puede ser relativamente simple o extremadamente complejo, seg√∫n las necesidades del proyecto y los objetivos que persiga.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El</a> dise√±ador de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">juegos</a> senior de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Banzai Games</a> , Mikhail Dragovalovskiy, habl√≥ sobre su experiencia trabajando en IA para el popular juego de lucha m√≥vil Shadow Fight 3. <br><a name="habracut"></a><br><h3>  <b>Diferencia entre SF3 y la mayor√≠a de los juegos de lucha</b> </h3><br>  La serie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Shadow Fight</a> se cre√≥ de inmediato con una serie de caracter√≠sticas que la distinguen de muchos juegos de lucha: <br><br><ul><li>  <b>La presencia de autobloques.</b>  Si el personaje simplemente se mueve y no ataca, bloquea autom√°ticamente cualquier ataque normal del enemigo; </li><li>  <b>Ritmo m√°s lento y animaciones.</b>  Apuesta por el componente t√°ctico: el jugador debe tener tiempo para comprender qu√© tipo de golpe inflige el enemigo y qu√© ataque elegir para contraatacar con √©xito.  Esto nos permiti√≥ darle al jugador la oportunidad de considerar animaciones que intentamos hacer de la manera m√°s bella y f√≠sica posible; </li><li>  <b>Colisiones honestas.</b>  Esto crea situaciones muy interesantes en las que un personaje evade bellamente el ataque del segundo y ataca en respuesta, y gracias a animaciones suaves, el jugador logra considerar todo; </li><li>  <b>Forma de sombra.</b>  Cuando se llena una escala especial, el jugador puede ingresar a la forma de sombra y gastar varios trucos espectaculares que rompen el bloqueo del oponente </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/850/057/658/85005765836621306ec499978f25a54a.gif" alt="imagen"></div><br><h3>  IA en juegos anteriores de la serie </h3><br>  Ya trabajamos en IA en nuestro juego de lucha anterior: Shadow Fight 2, pero debido a la transici√≥n a 3D, la aparici√≥n de colisiones entre jugadores y la adici√≥n de una forma de sombra, pudimos transferir solo una parte de la l√≥gica de IA, y el resto tuvo que ser recreado. <br><br><h3>  ¬øD√≥nde comenzar a trabajar en IA? </h3><br>  Si no haces un bot usando machine learning, destacar√≠a dos enfoques de capit√°n: <br><br><ol><li>  Haga un bot d√©bil, luego fortalezca al nivel deseado con nuevas caracter√≠sticas; </li><li>  Haz un bot invencible y luego debil√≠talo. </li></ol><br>  La segunda opci√≥n suena muy rom√°ntica: parece que eres m√°s inteligente que todos y haces una inteligencia artificial genial que dobla a los jugadores y luego, afortunadamente, reduce la complejidad del bot.  Desde el punto de vista del desarrollo, esto puede ser m√°s conveniente, porque  puede pensar en todas las caracter√≠sticas del comportamiento del bot que necesita de antemano e imaginar completamente su comportamiento final. <br><br>  Por supuesto, elegimos esta opci√≥n, aunque luego nos dimos cuenta de que no todo es tan simple: con nuestro equilibrio de animaciones, bloqueos autom√°ticos y una variedad de habilidades, casi siempre puedes encontrar las t√°cticas y abusos necesarios que te permiten derrotar a la IA con una gran habilidad.  No entendimos esto de inmediato, pero solo cuando medimos correctamente la tasa de ganancia de los jugadores en diferentes etapas del juego.  Esto a pesar del hecho de que para muchas personas, a juzgar por sus comentarios sobre el juego, el bot realmente era invencible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ss/ka/ew/sskaewr7co7yu6-fblz5dhflua8.gif" alt="imagen"></div><br><h3>  <b>¬øC√≥mo funciona nuestra IA?</b> </h3><br>  <b>Disparadores o reglas de conducta.</b> <br><br><ul><li>  Se basa en las reglas bajo las cuales el bot realiza acciones aleatorias.  Llamamos a este sistema de reglas desencadenantes.  Por ejemplo: </li><li>  El bot mira la distancia entre √©l y el jugador y selecciona solo los golpes que puede golpear, y luego entrega uno aleatorio de estos golpes; </li><li>  El bot no env√≠a spam con armas arrojadizas; </li><li>  El bot se mete en la frente con las armas arrojadizas del enemigo, y luego comienza a evadirse por un tiempo; </li><li>  Y un mont√≥n de cosas que un bot deber√≠a o no deber√≠a hacer ... </li></ul><br>  Si liberas un bot as√≠ contra un principiante, con el mismo nivel de bombeo, el resultado depender√° de las armas con las que est√©n armados los oponentes.  Quien es m√°s r√°pido que la animaci√≥n, ganar√°.  Porque, de hecho, ambos presionan todos los botones, bueno, excepto que el bot lo hace un poco m√°s significativo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e9/63c/ab4/9e963cab4827b2cefc8ad89e3c1e6e24.gif" alt="imagen"></div><br>  <b>Toma de decisiones</b> <br><br>  El paso l√≥gico para mejorar la IA es reducir la aleatoriedad y agregar un sistema de toma de decisiones que lleve al bot a la victoria.  Para hacer esto, debe comprender qu√© decisiones son correctas en qu√© situaciones.  Para pelear hay dos situaciones que ocurren todo el tiempo: <br><br><ol><li>  El enemigo espera; </li><li>  El enemigo est√° atacando. </li></ol><br>  Tambi√©n hay dos soluciones: <br><br><ol><li>  Necesita vencer cuando se garantiza que golpear√°; </li><li>  Debes bloquear cuando te golpean y no puedes contraatacar. </li></ol><br>  Resulta que para la victoria, la IA debe interrumpir los ataques enemigos con sus contraataques, o bloquear si no puede interrumpirlos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8a/814/ba1/c8a814ba1826ebdc8b2b20f6bed95004.gif" alt="imagen"></div><br>  Tomamos dos grupos de decisiones que toma el bot: uno, si el enemigo est√° de pie, el otro, si el enemigo est√° atacando.  Para que AI sepa exactamente qu√© contrarrestar, se nos ocurrieron tablas de colisi√≥n. <br><br>  <b>Tablas de colisi√≥n</b> <br><br>  ¬øRecuerdas c√≥mo el Doctor Strange examin√≥ todos los resultados posibles de la batalla con Thanos?  Del mismo modo, las tablas de colisi√≥n funcionan as√≠: la computadora calcula previamente los resultados de cada animaci√≥n de ataque en el juego a todas las distancias posibles. <br><br>  Si con m√°s detalle: lanzamos un golpe con una espada y al mismo tiempo un golpe con una katana, y luego miramos qui√©n golpear√° a qui√©n.  Hacemos este procedimiento para todos los golpes en el juego, a todas las distancias y con retrasos en un n√∫mero diferente de cuadros (lanc√© un golpe con una espada, y el enemigo a trav√©s de N cuadros: un golpe con una katana).  Todos los resultados se registran en tablas.  Hacemos un procedimiento similar antes de cada actualizaci√≥n y colocamos los archivos resultantes despu√©s de un algoritmo de compresi√≥n dif√≠cil en la forma finalizada en la compilaci√≥n para no consumir los recursos del dispositivo en tiempo de ejecuci√≥n.  El jugador en el cliente ya tiene una lista de todos los resultados, lo que significa que la IA sabe qu√© golpe puede contrarrestar cualquier golpe del jugador a una distancia espec√≠fica, o entiende que en este momento la mejor manera es bloquear el ataque. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c65/37a/d84/c6537ad846df2cab45d2221eee8ff933.gif" alt="imagen"></div><br>  Como resultado, la IA responde de manera efectiva a las acciones de los jugadores.  Es decir, contrarrestaron los contraataques.  Ahora debes ense√±arle al bot a atacar de la manera √≥ptima, en lugar de golpes aleatorios. <br><br>  <b>La elecci√≥n de la distancia y el golpe correcto</b> <br><br>  Un lector atento e inteligente dir√°: "¬°Alto!  ¬øPor qu√© incluso atacarte si el enemigo siempre est√° en el bloqueo autom√°tico?  ¬°Debemos esperar el golpe del enemigo y castigarlo con un golpe r√°pido, que interrumpir√° su ataque! "  S√≠, lo es, pero un bot que no se mueve y no ataca sin las acciones del jugador parece al menos extra√±o.  La IA debe poder elegir golpes efectivos para lanzar un ataque, incluso si la estrategia √≥ptima es jugar desde los contraataques.  Para hacer esto, hemos desarrollado un sistema para elegir la mejor distancia y huelgas. <br><br>  Como pensamos: el jugador usa con mayor frecuencia varios golpes favoritos, lo que significa que el bot realizar√° espec√≠ficamente esos ataques que a una distancia seleccionada no pueden ser interrumpidos por golpes t√≠picos del jugador.  Para hacer esto, nosotros: <br><br><ul><li>  Recopilamos estad√≠sticas de todos los golpes del jugador; </li><li>  Observamos hasta qu√© punto tenemos los contraataques m√°s efectivos contra sus ataques t√≠picos; </li><li>  Pasamos esta distancia al bot y hacemos que permanezca all√≠ durante toda la batalla. </li></ul><br>  En teor√≠a, suena genial, pero en la pr√°ctica result√≥ no tan bueno: los jugadores rara vez permanecen inactivos; casi siempre presionan botones y presionan el bot, por lo que el bot suele guiarse por el sistema de toma de decisiones basado en los ataques del jugador, en lugar de tomar la iniciativa.  Por lo tanto, elegir el golpe correcto solo funciona contra jugadores pasivos, pero elegir la mejor distancia ha mejorado los contraataques: se han vuelto m√°s diversos porque  El bot tiene m√°s opciones. <br><br>  En esta etapa, el bot ya es bastante efectivo: sabe c√≥mo comenzar mejor su ataque, sabe cu√°ndo contraatacar y cu√°ndo bloquear.  A continuaci√≥n, hablaremos sobre los sistemas que le permiten establecer el nivel de complejidad requerido y debilitar o fortalecer el bot. <br><br>  <b>Resentimiento y perd√≥n</b> <br><br>  Este es un concepto interesante que subyace en nuestro sistema de balance.  A trav√©s de √©l, creamos un nivel suficiente de complejidad para principiantes y profesionales, as√≠ como motivamos al jugador a usar diferentes golpes, lo que aumenta el inter√©s y el entretenimiento del juego. <br><br>  La esencia del concepto radica en el nombre: el bot se ofende por los golpes del jugador, que el jugador repite de vez en cuando.  El resentimiento es un contador que reduce la posibilidad de tomar una decisi√≥n sub√≥ptima y aumenta la posibilidad de que la IA realice un contraataque perfecto. <br><br>  En el otro lado de la escala se encuentra el perd√≥n: el bot comienza a aumentar la posibilidad de elegir soluciones no √≥ptimas y reduce la posibilidad de un contraataque si el jugador deja de enviar correos no deseados y cambia a usar otros golpes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e76/3f7/876/e763f78764a508e3d41aae5c3f311061.gif" alt="imagen"></div><br>  Si queremos hacer un bot complejo, reducimos la velocidad del perd√≥n y tambi√©n establecemos un alto nivel de resentimiento inicial, si queremos hacer un bot d√©bil, lo contrario es cierto. <br><br>  <b>Retraso</b> <br><br>  Cada bot en SF3 tiene un retraso en tomar una decisi√≥n.  Este es un par√°metro que hace que el bot pause N cuadros antes de elegir una opci√≥n de acci√≥n.  Una cosa √∫til: le permite crear la apariencia que piensa su oponente.  Cuanto m√°s simple sea el bot que queramos hacer, m√°s demora lo estableceremos. <br><br>  <b>Verificaci√≥n de condici√≥n</b> <br><br>  Para hacer que algunas partes del juego sean m√°s emotivas, utilizamos un control de los estados y las relaciones de varias variables del juego. <br><br>  Podemos obligar a algunos bots a no usar armas arrojadizas a ciertas distancias o reducir la velocidad del perd√≥n si un jugador tiene m√°s puntos de golpe que un bot, o hacer que la IA sea m√°s agresiva si tiene pocos puntos de golpe. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50e/74e/a79/50e74ea792b37131215e0351aa9157a3.gif" alt="imagen"></div><br>  En general, este es un complemento que utilizamos para generar situaciones en las que el bot cambia dr√°sticamente su comportamiento y efectividad.  Si es necesario, restringimos algunas acciones del bot en diversas situaciones, por ejemplo, es m√°s dif√≠cil para un bot hacer un lanzamiento que para un jugador, de lo contrario, el jugador nunca podr√≠a lanzar un bot, porque  las distancias a las que se puede aplicar el lanzamiento ser√≠an las mismas, y el bot solo tendr√≠a tiempo para comenzar su animaci√≥n antes. <br><br>  En base a todos los mecanismos anteriores, hemos creado 9 preajustes b√°sicos de IA que usamos en diferentes situaciones y secciones del juego.  Este enfoque le permite cambiar el equilibrio punto por punto y medir los cambios. <br><br><h3>  <b>Resultado</b> </h3><br>  El proceso de creaci√≥n de t√°cticas bot fue largo.  Introdujimos estas caracter√≠sticas gradualmente, as√≠ que a veces nuestros jugadores sufrieron, y despu√©s de ellos sufrimos, leyendo sus cr√≠ticas y maldiciones.  Cuando descargamos las √∫ltimas iteraciones de ediciones, el flujo de cr√≠ticas negativas con respecto al comportamiento de los oponentes se detuvo, de lo cual estamos muy orgullosos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bad/91e/018/bad91e01899935cd42bd81ee4e28826e.gif" alt="imagen"></div><br>  Nuestra experiencia muestra que las mejoras adicionales al bot con el enfoque actual no dan un aumento tangible en la calidad.  Por lo tanto, comenzamos a trabajar en una red neuronal que simular√° las acciones de un jugador. <br><br>  Hay varias cosas que nos empujan a esta decisi√≥n: <br><br><ol><li>  Estamos desarrollando un nuevo juego de lucha PvP: Shadow Fight: Arena.  Su caracter√≠stica es h√©roes con t√°cticas muy diferentes con diferentes habilidades y mec√°nicas.  Hacer un bot realista en estas condiciones es muchas veces m√°s dif√≠cil que en el caso de SF3; </li><li>  Ya tenemos experiencia positiva en el uso de redes neuronales para resolver problemas de animaci√≥n en nuestro producto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cascadeur</a> .  Este es un programa para crear animaciones realistas que usamos para todos nuestros juegos; </li><li>  Queremos reunir un equipo de especialistas competentes en ML para aumentar a√∫n m√°s nuestra experiencia en esta √°rea y usarla para mejorar Cascadeur y nuestros juegos. </li></ol><br>  <i>El equipo de Banzai Games requiere un investigador de aprendizaje profundo.</i>  <i>Lea m√°s sobre la vacante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/468023/">https://habr.com/ru/post/468023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../468013/index.html">Una forma f√°cil y segura de automatizar las implementaciones canarias con Helm</a></li>
<li><a href="../468015/index.html">Lo que se sabe sobre ITIL 4 en este momento y qui√©n ya est√° usando la nueva biblioteca</a></li>
<li><a href="../468017/index.html">The Maybe Monad a trav√©s de async / wait en C # (¬°sin Task ov!)</a></li>
<li><a href="../468019/index.html">Desarrollo de sitios web en WebAssembly usando NetCore 3 y Blazor</a></li>
<li><a href="../468021/index.html">PHP, ¬øcu√°nta abstracci√≥n para la gente?</a></li>
<li><a href="../468025/index.html">¬øC√≥mo configurar SNI en Zimbra OSE?</a></li>
<li><a href="../468027/index.html">M√©todos de optimizaci√≥n de c√≥digo para Redd. Parte 2: memoria no almacenable en cach√© y operaci√≥n de bus paralelo</a></li>
<li><a href="../468031/index.html">Llevamos un juego multijugador de C ++ a la web con Cheerp, WebRTC y Firebase</a></li>
<li><a href="../468035/index.html">Descargue la prensa con un controlador de juego u 8 patentes inusuales para dispositivos de entrada</a></li>
<li><a href="../468039/index.html">Meetup de Mosc√∫ Kubernetes # 6 en Acronis (Fiztehpark) 10/03/2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>