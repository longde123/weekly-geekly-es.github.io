<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯС╡ЁЯП┐ ЁЯСйтАНтЭдя╕ПтАНЁЯТЛтАНЁЯСи ЁЯТЗЁЯП╗ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡рд┐рд╖рдо рд╡реЗрдм рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдирд╛ ЁЯСитАНтЪЦя╕П ЁЯПж ЁЯЪ┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╡рд┐рд╖рдп рд╣реИрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдмрд╣реБрдд рдХреБрдЫ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдмреИрдХрдЕрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдкрд╣рд┐рдпрд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИ, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡рд┐рд╖рдо рд╡реЗрдм рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nixys/blog/424717/"><p>  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╡рд┐рд╖рдп рд╣реИрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдмрд╣реБрдд рдХреБрдЫ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдмреИрдХрдЕрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдкрд╣рд┐рдпрд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИ, рдмрд╕ рдЗрд╕реЗ рд▓реЗ рд▓реЛ рдФрд░ рдЗрд╕реЗ рдХрд░реЛред  рдлрд┐рд░ рднреА, рд╣рд░ рдмрд╛рд░ рдЬрдм рдХрд┐рд╕реА рд╡реЗрдм рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рд╕рд┐рд╕реНрдЯрдо рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдмреИрдХрдЕрдк рд╕реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рддреЛ рдХрдИ рдХреЗ рд▓рд┐рдП рдпрд╣ рдПрдХ рдмрдбрд╝реЗ рд╕рд╡рд╛рд▓рд┐рдпрд╛ рдирд┐рд╢рд╛рди рдХреЗ рд╕рд╛рде рд╣рд╡рд╛ рдореЗрдВ рд▓рдЯрдХ рдЬрд╛рддрд╛ рд╣реИред  рдбреЗрдЯрд╛ рдмреИрдХрдЕрдк рдХреЛ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдХреИрд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдВ?  рдмреИрдХрдЕрдк рдХрд╣рд╛рдВ рд╕реНрдЯреЛрд░ рдХрд░реЗрдВ?  рдкреНрд░рддрд┐рдпреЛрдВ рдХреЗ рдкреВрд░реНрд╡рд╡реНрдпрд╛рдкреА рднрдВрдбрд╛рд░рдг рдХрд╛ рдЖрд╡рд╢реНрдпрдХ рд╕реНрддрд░ рдХреИрд╕реЗ рдкреНрд░рджрд╛рди рдХрд░реЗрдВ?  рд╡рд┐рднрд┐рдиреНрди рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЗ рдкреВрд░реЗ рдЪрд┐рдбрд╝рд┐рдпрд╛рдШрд░ рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХреИрд╕реЗ рдПрдХрдЬреБрдЯ рдХрд░реЗрдВ? </p><br><p><img src="https://habrastorage.org/webt/xk/rn/7r/xkrn7rrnask1pgpv4uvrby6tnrc.jpeg"></p><a name="habracut"></a><br><p>  рдЦреБрдж рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдкрд╣рд▓реА рдмрд╛рд░ 2011 рдореЗрдВ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд┐рдпрд╛ рдерд╛ред рдлрд┐рд░ рд╣рдордиреЗ рдмреИрдардХрд░ рдЕрдкрдиреА рдмреИрдХрдЕрдк рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦреАред  рдЗрди рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, рд╣рдордиреЗ рдХреЗрд╡рд▓ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛, рдФрд░ рдЙрдиреНрд╣реЛрдВрдиреЗ рд╣рдорд╛рд░реЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреА рд╡реЗрдм рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рдмреИрдХрдЕрдк рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдФрд░ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреНрд░рджрд╛рди рдХреАред  рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдЯреНрдпреВрдирд┐рдВрдЧ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреЗ рд╕рд╛рде, рдмреИрдХрдЕрдк рд╣рдорд╛рд░реЗ рдпрд╛ рдХреБрдЫ рдЕрдиреНрдп рдмрд╛рд╣рд░реА рднрдВрдбрд╛рд░рдг рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдП рдЧрдП рдереЗред </p><br><p>  рдореБрдЭреЗ рдХрд╣рдирд╛ рд╣реЛрдЧрд╛, рдЗрди рд▓рд┐рдкрд┐рдпреЛрдВ рдиреЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛ред  рд▓реЗрдХрд┐рди рдЖрдЧреЗ рд╣рдо рдмрдврд╝реЗ, рд╡рд┐рднрд┐рдиреНрди рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдФрд░ рдмрд╛рд╣рд░реА рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рд╕рд╛рде рдЕрдзрд┐рдХ рд╡рд┐рд╡рд┐рдз рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рдЬреЛ рд╣рдорд╛рд░реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреА рдереАрдВ, рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреАрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ Redis рдФрд░ рдмрд╛рдж рдореЗрдВ рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╣реЙрдЯ MySQL рдФрд░ PostgreSQL рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдирд╣реАрдВ рдерд╛ред  рдмреИрдХрдЕрдк рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдирд╣реАрдВ рдХреА рдЧрдИ рдереА, рдХреЗрд╡рд▓ рдИрдореЗрд▓ рдЕрд▓рд░реНрдЯ рдереЗред </p><br><p>  рдПрдХ рдЕрдиреНрдп рд╕рдорд╕реНрдпрд╛ рдереА рд╕рдорд░реНрдерди рдкреНрд░рдХреНрд░рд┐рдпрд╛ред  рдЗрди рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, рд╣рдорд╛рд░реА рдПрдХ рдмрд╛рд░ рдХреЙрдореНрдкреИрдХреНрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдврд╝реА рд╣реИ рдФрд░ рдПрдХ рд╡рд┐рд╢рд╛рд▓ рдЕрдЬреАрдм рд░рд╛рдХреНрд╖рд╕ рдореЗрдВ рдмрджрд▓ рдЧрдИ рд╣реИред  рдФрд░ рдЬрдм рд╣рдо рдПрдХ рд╕рд╛рде рдЖрдП рдФрд░ рдПрдХ рдирдпрд╛ рд╕рдВрд╕реНрдХрд░рдг рдЬрд╛рд░реА рдХрд┐рдпрд╛, рддреЛ рдпрд╣ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рдЙрд╕ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд▓рд┐рдП рдЕрджреНрдпрддрди рдХреЛ рд░реЛрд▓ рдХрд░рдиреЗ рдХреЗ рдкреНрд░рдпрд╛рд╕ рдХреЗ рд▓рд╛рдпрдХ рдерд╛, рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рдкрд┐рдЫрд▓реЗ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рд╕реА рддрд░рд╣ рдХреЗ рдЕрдиреБрдХреВрд▓рди рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдерд╛ред </p><br><p>  рдирддреАрдЬрддрди, рдЗрд╕ рд╡рд░реНрд╖ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рд╣рдордиреЗ рдПрдХ рдордЬрдмреВрдд рдЗрд░рд╛рджреЛрдВ рд╡рд╛рд▓рд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛: рд╣рдорд╛рд░реА рдкреБрд░рд╛рдиреА рдмреИрдХрдЕрдк рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдХреБрдЫ рдФрд░ рдЖрдзреБрдирд┐рдХ рдХреЗ рд╕рд╛рде рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдПред  рдЗрд╕рд▓рд┐рдП, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд╣рдо рдмреИрда рдЧрдП рдФрд░ рдПрдХ рдирдП рд╕рдорд╛рдзрд╛рди рдХреЗ рд▓рд┐рдП рд╕рднреА рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рдХреЛ рд▓рд┐рдЦрд╛ред  рдпрд╣ рд▓рдЧрднрдЧ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рдХрд▓рд╛: </p><br><ul><li>  рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЗ рдбреЗрдЯрд╛ рдХрд╛ рдмреИрдХрдЕрдк рд▓реЗрдВ: <br><ul><li>  рдлрд╝рд╛рдЗрд▓реЗрдВ (рдЕрд╕рддрдд рдФрд░ рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐) </li><li>  MySQL (рдардВрдбрд╛ / рдЧрд░реНрдо рдмреИрдХрдЕрдк) </li><li>  PostgreSQL (рдардВрдбрд╛ / рдЧрд░реНрдо рдмреИрдХрдЕрдк) </li><li>  MongoDB </li><li>  Redis </li></ul></li><li>  рд▓реЛрдХрдкреНрд░рд┐рдп рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд╕реНрдЯреЛрд░ рдмреИрдХрдЕрдк: <br><ul><li>  рд╕реНрдерд╛рдиреАрдп </li><li>  рдПрдлрд╝рдЯреАрдкреА </li><li>  SSH </li><li>  рдПрд╕рдПрдордмреА </li><li>  рдПрдирдПрдлрдПрд╕ </li><li>  WebDAV </li><li>  S3 </li></ul></li><li>  рдмреИрдХрдЕрдк рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рдХрд┐рд╕реА рднреА рд╕рдорд╕реНрдпрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЕрд▓рд░реНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </li><li>  рдПрдХрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдХреЗрдВрджреНрд░реАрдп рд░реВрдк рд╕реЗ рдмреИрдХрдЕрдк рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ </li><li>  рдмрд╛рд╣рд░реА рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЬреЛрдбрд╝рдХрд░ рдирдП рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдЬреЛрдбрд╝реЗрдВ </li><li>  рдбрдВрдк рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рдХрд▓реНрдк рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ </li><li>  рдирд┐рдпрдорд┐рдд рдорд╛рдзреНрдпрдо рд╕реЗ рдмреИрдХрдЕрдк рдХреЛ рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИ </li><li>  рдЖрд╕рд╛рди рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╡рд┐рдиреНрдпрд╛рд╕ </li></ul><br><h1 id="analiziruem-imeyuschiesya-resheniya">  рд╣рдо рдЙрдкрд▓рдмреНрдз рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╣реИрдВ </h1><br><p>  рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рдЦреБрд▓реЗ рд╕реНрд░реЛрдд рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХреЛ рджреЗрдЦрд╛: </p><br><ul><li>  рдмрдХреБрд▓рд╛ рдФрд░ рдЗрд╕рдХреЗ рдХрд╛рдВрдЯреЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмреЗрд░реЛрд╕ </li><li>  рдЕрдорд╛рдВрдбрд╛ </li><li>  рдмреЛрд░реНрдЧ </li><li>  Duplicaty </li><li>  рдХрдкрдЯ </li><li>  Rsnapshot </li><li>  Rdiff-рдмреИрдХрдЕрдк </li></ul><br><p>  рд▓реЗрдХрд┐рди рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ рдЗрд╕рдХреА рдХрдорд┐рдпрд╛рдВ рдереАрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмрдХреБрд▓рд╛ рдХреЛ рдЙрди рдХрд╛рд░реНрдпреЛрдВ рд╕реЗ рдЕрддрд┐рднрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рдирдХреА рд╣рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдореИрдиреНрдпреБрдЕрд▓ рдХрд╛рдо (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдбреЗрдЯрд╛рдмреЗрд╕ рдмреИрдХрдЕрдк рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦрдиреЗ / рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП) рдХреЗ рдХрд╛рд░рдг рдПрдХ рд╢реНрд░рдорд╕рд╛рдзреНрдп рдХрд╛рд░реНрдп рд╣реИ, рдФрд░ рдкреНрд░рддрд┐рдпреЛрдВ рдХреЛ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдЖрджрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><p>  рдЕрдВрдд рдореЗрдВ, рд╣рдо рджреЛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд┐рд╖реНрдХрд░реНрд╖реЛрдВ рдкрд░ рдЖрдП: </p><br><ol><li> рдореМрдЬреВрджрд╛ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╣рдорд╛рд░реЗ рдЕрдиреБрдХреВрд▓ рдирд╣реАрдВ рд╣реИ; </li><li>  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдЦреБрдж рдХреЛ рдЕрдкрдирд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдЕрдиреБрднрд╡ рдФрд░ рдкрд╛рдЧрд▓рдкрди рдерд╛ред </li></ol><br><p>  рддреЛ рд╣рдордиреЗ рдХрд┐рдпрд╛ред </p><br><h1 id="rozhdenie-nxs-backup">  Nxs- рдмреИрдХрдЕрдк рдХрд╛ рдЬрдиреНрдо </h1><br><p>  рдкрд╛рдпрдерди рдХреЛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪреБрдирд╛ рдЧрдпрд╛ рдерд╛ - рдпрд╣ рд▓рд┐рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реИ рдФрд░ рдмрдирд╛рдП рд░рдЦрдирд╛, рд▓рдЪреАрд▓рд╛ рдФрд░ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред  рдпрдорд▓ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ред </p><br><p>  рдирдП рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЗ рдмреИрдХрдЕрдк рдХреЛ рд╕рдорд░реНрдерди рдФрд░ рдЬреЛрдбрд╝рдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рдПрдХ рдореЙрдбреНрдпреВрд▓рд░ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдЪреБрдирд╛ рдЧрдпрд╛ рдерд╛ рдЬрд╣рд╛рдВ рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, MySQL) рдХреЗ рдмреИрдХрдЕрдк рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдПрдХ рдЕрд▓рдЧ рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><h2 id="podderzhka-faylov-bd-i-udalyonnyh-hranilisch">  рдлрд╝рд╛рдЗрд▓реЛрдВ, рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рджреВрд░рд╕реНрде рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди </h2><br><p>  рд╡рд░реНрддрдорд╛рди рдореЗрдВ, рдлрд╝рд╛рдЗрд▓реЛрдВ, рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рджреВрд░рд╕реНрде рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рдмреИрдХрдЕрдк рдХреЗ рдирд┐рдореНрди рдкреНрд░рдХрд╛рд░ рд╕рдорд░реНрдерд┐рдд рд╣реИрдВ: </p><br><p>  рдбреАрдмреА: </p><br><ul><li>  MySQL (рдЧрд░реНрдо / рдардВрдбрд╛ рдмреИрдХрдЕрдк) </li><li>  PostgreSQL (рдЧрд░реНрдо / рдардВрдбрд╛ рдмреИрдХрдЕрдк) </li><li>  Redis </li><li>  MongoDB </li></ul><br><p>  рдлрд╛рдЗрд▓реЗрдВ: </p><br><ul><li>  рдирдХрд▓ рдЙрддрд╛рд░рдирд╛ </li><li>  рдЗрдВрдХреНрд░реАрдореЗрдВрдЯрд▓ рдирдХрд▓ </li></ul><br><p>  рджреВрд░рд╕реНрде рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА: </p><br><ul><li>  рд╕реНрдерд╛рдиреАрдп </li><li>  S3 </li><li>  рдПрд╕рдПрдордмреА </li><li>  рдПрдирдПрдлрдПрд╕ </li><li>  рдПрдлрд╝рдЯреАрдкреА </li><li>  SSH </li><li>  WebDAV </li></ul><br><h2 id="diskretnoe-rezervnoe-kopirovanie">  рдЕрд╕рддрдд рдмреИрдХрдЕрдк </h2><br><p>  рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╛ рддреЛ рдЕрд╕рддрдд рдпрд╛ рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рдЙрдкрдпреБрдХреНрдд рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП, рдЙрдиреНрд╣реЛрдВрдиреЗ рджреЛрдиреЛрдВ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ред  рдЖрдк рд╡реНрдпрдХреНрддрд┐рдЧрдд рдлрд╝рд╛рдЗрд▓ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реНрддрд░ рдкрд░ рдХрд┐рд╕ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЕрд╕рддрдд рдкреНрд░рддрд┐рдпреЛрдВ (рджреЛрдиреЛрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕) рдХреЗ рд▓рд┐рдП, рдЖрдк рджрд┐рдиреЛрдВ / рд╕рдкреНрддрд╛рд╣ / рдорд╣реАрдиреЛрдВ рдХреЗ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдкреВрд░реНрд╡рд╡реНрдпрд╛рдкреА рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><h2 id="inkrementnoe-rezervnoe-kopirovanie">  рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк </h2><br><p>  рдлрд╛рдЗрд▓реЛрдВ рдХреА рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдкреНрд░рддрд┐рдпрд╛рдВ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдмрдирд╛рдИ рдЧрдИ рд╣реИрдВ: <br><img src="https://habrastorage.org/webt/c7/wk/ss/c7wksse4j_mxjkgdffptngpglkw.jpeg"></p><br><p>  рд╡рд░реНрд╖ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдПрдХ рдкреВрд░реНрдг рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП рдЬрд╛ рд░рд╣рд╛ рд╣реИред  рдЕрдЧрд▓реЗ, рдкреНрд░рддреНрдпреЗрдХ рдорд╣реАрдиреЗ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ - рд╡рд╛рд░реНрд╖рд┐рдХ рдПрдХ рд╕рд╛рдкреЗрдХреНрд╖ рдорд╛рд╕рд┐рдХ рдкреНрд░рддрд┐ред  рдорд╛рд╕рд┐рдХ рдзрд░реНрдо рдХреЗ рднреАрддрд░ - рдорд╛рд╕рд┐рдХ рдХреЗ рд╕рд╛рдкреЗрдХреНрд╖ рд╡реГрджреНрдзрд┐рд╢реАрд▓ рд╡рд┐рдХреГрддрд┐ред  рджрд╕ рджрд┐рди рдХреА рдЕрд╡рдзрд┐ рдХреЗ рд╕рд╛рдкреЗрдХреНрд╖ рдкреНрд░рддреНрдпреЗрдХ рджрд╕-рджрд┐рди рдХреЗ рд╡реГрджреНрдзрд┐рд╢реАрд▓ рджрд┐рди рдХреЗ рднреАрддрд░ред </p><br><p>  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВ (рджрд╕рд┐рдпреЛрдВ рд╣рдЬрд╛рд░реЛрдВ) рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдкреНрд░рддрд┐рдпреЛрдВ рдХрд╛ рд╕рдВрдЧреНрд░рд╣ рдХрд╛рдлреА рдзреАрдорд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдПрдХ рджрд┐рди рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рд▓реЗ рд╕рдХрддрд╛ рд╣реИред  рд╣рдо рдЗрд╕ рдХрдореА рдХреЛ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рд╕рдВрдмреЛрдзрд┐рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВред </p><br><h2 id="vosstanavlivaemsya-iz-inkrementnyh-bekapov">  рд╣рдо рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рд╕реЗ рдЙрдмрд░рддреЗ рд╣реИрдВ </h2><br><p>  рдЕрд╕рддрдд рдмреИрдХрдЕрдк рд╕реЗ рдЙрдмрд░рдиреЗ рдореЗрдВ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИ - рдмрд╕ рдЖрд╡рд╢реНрдпрдХ рддрд┐рдерд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЙрдкреА рд▓реЗрдВ рдФрд░ рдЗрд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рдХрдВрд╕реЛрд▓ рдЯрд╛рд░ рдХреЗ рд╕рд╛рде рддреИрдирд╛рдд рдХрд░реЗрдВред  рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдкреНрд░рддрд┐рдпрд╛рдВ рдереЛрдбрд╝реА рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 24 рдЬреБрд▓рд╛рдИ, 2018 рдХреЛ рдареАрдХ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдХрд░рдиреЗ рд╣реЛрдВрдЧреЗ: </p><br><ol><li>  рдПрдХ рд╕рд╛рд▓ рдХреЗ рдмреИрдХрдЕрдк рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реЗрдВ, рднрд▓реЗ рд╣реА рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдпрд╣ 1 рдЬрдирд╡рд░реА, 2018 рд╕реЗ рд╢реБрд░реВ рд╣реЛ (рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ, рдпрд╣ рдХрд┐рд╕реА рднреА рддрд╛рд░реАрдЦ рдХреЛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рдЗрд╕ рдмрд╛рдд рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХрдм рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛) </li><li>  рдЙрд╕ рдкрд░ рдЬреБрд▓рд╛рдИ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╛рд╕рд┐рдХ рдмреИрдХрдЕрдк рд░реЛрд▓ рдХрд░реЗрдВ </li><li>  21 рдЬреБрд▓рд╛рдИ рдХреЗ рдмреИрдХрдЕрдк рдХреЛ рд░реЛрд▓ рдЕрдк рдХрд░реЗрдВ </li><li>  24 рдЬреБрд▓рд╛рдИ рдХреЗ рд▓рд┐рдП рджреИрдирд┐рдХ рдмреИрдХрдЕрдк рд░реЛрд▓ рдХрд░реЗрдВ </li></ol><br><p>  рдЙрд╕реА рд╕рдордп, 2-4 рдЕрдВрдХреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЯ рдХрдорд╛рдВрдб рдХреЛ -G рд╕реНрд╡рд┐рдЪ рдЬреЛрдбрд╝реЗрдВ, рдЬрд┐рд╕рд╕реЗ рдпрд╣ рд╕рдВрдХреЗрдд рдорд┐рд▓рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдПрдХ рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рд╣реИред  рдмреЗрд╢рдХ, рдпрд╣ рд╕рдмрд╕реЗ рддреЗрдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЬрдм рдЖрдк рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рдмреИрдХрдЕрдк рд╕реЗ рдЙрдмрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдРрд╕рд╛ рдЕрдХреНрд╕рд░ рдЬрд░реВрд░реА рдирд╣реАрдВ рд╣реИ рдФрд░ рд▓рд╛рдЧрдд-рдкреНрд░рднрд╛рд╡рд╢реАрд▓рддрд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рддреЛ рдРрд╕реА рдпреЛрдЬрдирд╛ рдХрд╛рдлреА рдкреНрд░рднрд╛рд╡реА рд╣реЛ рдЬрд╛рддреА рд╣реИред </p><br><h2 id="isklyucheniya">  рдЕрдкрд╡рд╛рдж </h2><br><p>  рдЕрдХреНрд╕рд░, рдЖрдкрдХреЛ рдмреИрдХрдЕрдк рд╕реЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдпрд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рдмрд╛рд╣рд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреИрд╢ рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВред  рдпрд╣ рдЙрдЪрд┐рдд рдЕрдкрд╡рд╛рдж рдирд┐рдпрдореЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text"><pre><code class="hljs ruby">- <span class="hljs-symbol"><span class="hljs-symbol">target:</span></span> - <span class="hljs-regexp"><span class="hljs-regexp">/var/www</span></span><span class="hljs-regexp"><span class="hljs-regexp">/*/data</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ excludes: - exclude1/exclude</span></span>_file - exclude2 - <span class="hljs-regexp"><span class="hljs-regexp">/var/www</span></span><span class="hljs-regexp"><span class="hljs-regexp">/exclude_3</span></span></code> </pre> </div></div><br><h2 id="rotaciya-bekapov">  рдмреИрдХрдЕрдк рд░реЛрдЯреЗрд╢рди </h2><br><p>  рд╣рдорд╛рд░реА рдкреБрд░рд╛рдиреА рд▓рд┐рдкрд┐рдпреЛрдВ рдореЗрдВ, рд░реЛрдЯреЗрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рддрд╛рдХрд┐ рдкреБрд░рд╛рдиреА рдХреЙрдкреА рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рдирдП рдХреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдпрд╣ рдЙрди рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдкрд░ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдХрд╛рд░рдг рдмрдирд╛, рдЬрд╣рд╛рдВ рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП рдЬрдЧрд╣, рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдПрдХ рдкреНрд░рддрд┐ рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрдХреБрд▓ рдЖрд╡рдВрдЯрд┐рдд рдХреА рдЧрдИ рдереА - рдЬрдЧрд╣ рдХреА рдХрдореА рдХреЗ рдХрд╛рд░рдг рдПрдХ рдирдИ рдкреНрд░рддрд┐ рд╡рд╣рд╛рдВ рдПрдХрддреНрд░ рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреА рдереАред </p><br><p>  рдирдП рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ, рд╣рдордиреЗ рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рдмрджрд▓рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛: рдкрд╣рд▓реЗ рдкреБрд░рд╛рдиреЗ рдХреЛ рд╣рдЯрд╛ рджреЗрдВ рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рд╣реА рдПрдХ рдирдИ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдПрдХрддреНрд░ рдХрд░реЗрдВред  рдФрд░ рдХрд┐рд╕реА рднреА рд╕рдорд╕реНрдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЕрд╕рддрдд рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреБрд░рд╛рд▓реЗрдЦ рдХреЛ рдПрдХ рдкреБрд░рд╛рдиреА рдкреНрд░рддрд┐ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рджрд┐рдиреЛрдВ / рд╣рдлреНрддреЛрдВ / рдорд╣реАрдиреЛрдВ рдХреЗ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рднрдВрдбрд╛рд░рдг рдпреЛрдЬрдирд╛ рд╕реЗ рдЖрдЧреЗ рдирд┐рдХрд▓ рдЬрд╛рддреА рд╣реИред  рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдмреИрдХрдЕрдк рдХреЛ рдПрдХ рд╡рд░реНрд╖ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдорд╣реАрдиреЗ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдкреБрд░рд╛рдиреА рдкреНрд░рддрд┐рдпрд╛рдВ рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВ, рдЬрдмрдХрд┐ рдкрд┐рдЫрд▓реЗ рд╡рд░реНрд╖ рдХреЗ рдЙрд╕реА рдорд╣реАрдиреЗ рдХреЗ рдЕрднрд┐рд▓реЗрдЦрд╛рдЧрд╛рд░ рдХреЛ рдкреБрд░рд╛рдиреЗ рдмреИрдХрдЕрдк рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 1 рдЕрдЧрд╕реНрдд 2018 рдХреЛ рдорд╛рд╕рд┐рдХ рдмреИрдХрдЕрдк рдПрдХрддреНрд░ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╕рд┐рд╕реНрдЯрдо рдпрд╣ рдЬрд╛рдВрдЪ рдХрд░реЗрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдЕрдЧрд╕реНрдд 2017 рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рд╣реИрдВ, рдФрд░ рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ рдпрд╣ рдЙрдиреНрд╣реЗрдВ рд╣рдЯрд╛ рджреЗрдЧрд╛ред  рдпрд╣ рдбрд┐рд╕реНрдХ рд╕реНрдерд╛рди рдХрд╛ рдЗрд╖реНрдЯрддрдо рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </p><br><h2 id="logirovanie">  рд▓реЙрдЧрд┐рдВрдЧ </h2><br><p>  рдХрд┐рд╕реА рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдФрд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдмреИрдХрдЕрдк рдореЗрдВ, рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдХреБрдЫ рдЧрд▓рдд рд╣реЛрдиреЗ рдкрд░ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛред  рд╕рд┐рд╕реНрдЯрдо рдЕрдкрдиреЗ рдХрд╛рдо рдХрд╛ рдПрдХ рд▓реЙрдЧ рд░рдЦрддрд╛ рд╣реИ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░рддрд╛ рд╣реИ: рдлрдВрдб рдХрд╛ рдкреНрд░рд╛рд░рдВрдн / рд░реЛрдХрдирд╛, рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдп рдХреА рд╢реБрд░реБрдЖрдд / рд╕рдорд╛рдкреНрддрд┐, рдПрдХ рдЕрд╕реНрдерд╛рдпреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХрд╛ рдкрд░рд┐рдгрд╛рдо, рдПрдХ рдЕрд╕реНрдерд╛рдпреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рдХреЙрдкреА рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ / рдПрдХ рд╕реНрдерд╛рдпреА рд╕реНрдерд╛рди рдкрд░ рдХреЙрдкреА рдХрд░рдиреЗ рдХрд╛ рдкрд░рд┐рдгрд╛рдо, рдмреИрдХрдЕрдк рд░реЛрдЯреЗрд╢рди рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдЖрджрд┐ред .. </p><br><p>  рдШрдЯрдирд╛рдУрдВ рдХреЛ 2 рд╕реНрддрд░реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: </p><br><ul><li>  <em>рдЬрд╛рдирдХрд╛рд░реА</em> : рд╕реВрдЪрдирд╛ рдХрд╛ рд╕реНрддрд░ - рдЙрдбрд╝рд╛рди рд╕рд╛рдорд╛рдиреНрдп рд╣реИ, рдЕрдЧрд▓рд╛ рдЪрд░рдг рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкреВрд░рд╛ рд╣реЛ рдЧрдпрд╛, рд▓реЙрдЧ рдореЗрдВ рдПрдХ рд╕рдВрдмрдВрдзрд┐рдд рд╕реВрдЪрдирд╛ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреА рдЬрд╛рддреА рд╣реИ </li><li>  <em>рддреНрд░реБрдЯрд┐</em> : рддреНрд░реБрдЯрд┐ рд╕реНрддрд░ - рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЧрдпрд╛, рдЕрдЧрд▓рд╛ рдЪрд░рдг рд╡рд┐рдлрд▓ рд╣реЛ рдЧрдпрд╛, рд▓реЙрдЧ рдореЗрдВ рдПрдХ рд╕рдВрдмрдВрдзрд┐рдд рддреНрд░реБрдЯрд┐ рд░рд┐рдХреЙрд░реНрдб рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ </li></ul><br><h2 id="e-mail-notifikacii">  рдИрдореЗрд▓ рд╕реВрдЪрдирд╛рдПрдВ </h2><br><p>  рдмреИрдХрдЕрдк рд╕рдВрдЧреНрд░рд╣ рдХреЗ рдЕрдВрдд рдореЗрдВ, рд╕рд┐рд╕реНрдЯрдо рдИрдореЗрд▓ рд╕реВрдЪрдирд╛рдПрдВ рднреЗрдЬ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  2 рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рд╕реВрдЪреА рд╕рдорд░реНрдерд┐рдд рд╣реИрдВ: </p><br><ul><li>  <em>рдкреНрд░рд╢рд╛рд╕рдХ</em> рд╡реЗ рд╣реИрдВ рдЬреЛ рд╕рд░реНрд╡рд░ рдХреА рд╕реЗрд╡рд╛ рдХрд░рддреЗ рд╣реИрдВред  рдЙрдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рд╕реВрдЪрдирд╛рдПрдВ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреА рд╣реИрдВ, рд╡реЗ рд╕рдлрд▓ рд╕рдВрдЪрд╛рд▓рди рдХреА рд╕реВрдЪрдирд╛рдУрдВ рдореЗрдВ рд░реБрдЪрд┐ рдирд╣реАрдВ рд░рдЦрддреЗ рд╣реИрдВ </li><li>  <em>рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛</em> - рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпреЗ рдЧреНрд░рд╛рд╣рдХ рд╣реИрдВ рдЬреЛ рдХрднреА-рдХрднреА рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реВрдЪрдирд╛рдПрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдмреИрдХрдЕрдк рдХреЗ рд╕рд╛рде рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИред  рдпрд╛, рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирд╣реАрдВред  рд╡реЗ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдкреВрд░реНрдг рд▓реЙрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реИ рдпрд╛ рдХреЗрд╡рд▓ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд▓реЙрдЧ рд╣реИред </li></ul><br><h2 id="struktura-konfiguracionnyh-faylov">  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛ </h2><br><p>  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕рдВрд░рдЪрдирд╛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">рд╕рдВрд░рдЪрдирд╛ рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text"><pre> <code class="bash hljs">/etc/nxs-backup тФЬтФАтФА conf.d тФВ тФЬтФАтФА desc_files_local.conf тФВ тФЬтФАтФА external_clickhouse_local.conf тФВ тФЬтФАтФА inc_files_smb.conf тФВ тФЬтФАтФА mongodb_nfs.conf тФВ тФЬтФАтФА mysql_s3.conf тФВ тФЬтФАтФА mysql_xtradb_scp.conf тФВ тФЬтФАтФА postgresql_ftp.conf тФВ тФЬтФАтФА postgresql_hot_webdav.conf тФВ тФФтФАтФА redis_local_ftp.conf тФФтФАтФА nxs-backup.conf</code> </pre> </div></div><br><p>  рдпрд╣рд╛рдБ <em>/etc/nxs-backup/nxs-backup.conf</em> рдореБрдЦреНрдп рд╡рд┐рдиреНрдпрд╛рд╕ рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡реИрд╢реНрд╡рд┐рдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рджрд░реНрд╢рд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓</b> <div class="spoiler_text"><pre> <code class="hljs sql">main: server_name: SERVER_NAME admin_mail: project-tech@nixys.ru client_mail: - '' mail_from: <span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>@domain.ru level_message: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> block_io_read: <span class="hljs-string"><span class="hljs-string">''</span></span> block_io_write: <span class="hljs-string"><span class="hljs-string">''</span></span> blkio_weight: <span class="hljs-string"><span class="hljs-string">''</span></span> general_path_to_all_tmp_dir: /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/nxs-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span> cpu_shares: <span class="hljs-string"><span class="hljs-string">''</span></span> log_file_name: /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>/nxs-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>/nxs-backup.log jobs: !<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> [conf.d<span class="hljs-comment"><span class="hljs-comment">/*.conf]</span></span></code> </pre> </div></div><br><p>  рдХрд╛рд░реНрдпреЛрдВ рдХреА рд╕рд░рдгреА (рдиреМрдХрд░рд┐рдпреЛрдВ) рдореЗрдВ рдХрд╛рд░реНрдпреЛрдВ (рдиреМрдХрд░реА) рдХреА рдПрдХ рд╕реВрдЪреА рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬреЛ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП, рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдХрд┐рд╕ рдорд╛рддреНрд░рд╛ рдореЗрдВ рд╣реИ, рдЗрд╕рдХрд╛ рд╡рд░реНрдгрди рд╣реИред  рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдЙрдиреНрд╣реЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдлрд╛рдЗрд▓реЛрдВ (рдПрдХ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рддрд┐ рдХрд╛рдо) рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдореБрдЦреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред </p><br><p>  рдЙрдиреНрд╣реЛрдВрдиреЗ рдЗрди рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдпрдерд╛рд╕рдВрднрд╡ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдзреНрдпрд╛рди рд░рдЦрд╛ рдФрд░ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЬрдирд░реЗрдЯрд░ рд▓рд┐рдЦрд╛ред  рдЗрд╕рд▓рд┐рдП, рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЛ рдХреБрдЫ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордп рдмрд┐рддрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, MySQL, рд▓реЗрдХрд┐рди рдмрд╕ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ: </p><br><pre> <code class="bash hljs">nxs-backup generate --storage <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> scp --<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> mysql --path /etc/nxs-backup/conf.d/mysql_local_scp.conf</code> </pre> <br><p>  рдЖрдЙрдЯрдкреБрдЯ рдлрд╝рд╛рдЗрд▓ <em>/etc/nxs-backup/conf.d/mysql_local_scp.conf</em> рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">рдлрд╝рд╛рдЗрд▓ рд╕рд╛рдордЧреНрд░реА</b> <div class="spoiler_text"><pre> <code class="hljs sql"> - job: PROJECT-mysql type: mysql tmp_dir: /var/nxs-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span>/mysql/dump_tmp sources: - <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>: db_host: <span class="hljs-string"><span class="hljs-string">''</span></span> db_port: <span class="hljs-string"><span class="hljs-string">''</span></span> socket: <span class="hljs-string"><span class="hljs-string">''</span></span> db_user: <span class="hljs-string"><span class="hljs-string">''</span></span> db_password: <span class="hljs-string"><span class="hljs-string">''</span></span> auth_file: <span class="hljs-string"><span class="hljs-string">''</span></span> target: - all excludes: - information_schema - performance_schema - mysql - <span class="hljs-keyword"><span class="hljs-keyword">sys</span></span> gzip: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> is_slave: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> extra_keys: <span class="hljs-string"><span class="hljs-string">'--opt --add-drop-database --routines --comments --create-options --quote-names --order-by-primary --hex-blob'</span></span> storages: - <span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span>: yes backup_dir: /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/nxs-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span>/mysql/dump <span class="hljs-keyword"><span class="hljs-keyword">store</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">days</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> weeks: <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">month</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>: scp <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span>: yes backup_dir: /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/nxs-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span>/mysql/dump <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> host: <span class="hljs-string"><span class="hljs-string">''</span></span> port: <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> path_to_key: <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">store</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">days</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> weeks: <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">month</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span></code> </pre> </div></div><br><p>  рдЬрд┐рд╕рдореЗрдВ рдпрд╣ рдХреЗрд╡рд▓ рдХреБрдЫ рдЖрд╡рд╢реНрдпрдХ рдореВрд▓реНрдпреЛрдВ рдХреЛ рд╕реНрдерд╛рди рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рд░рд╣рддрд╛ рд╣реИред </p><br><p>  рдПрдХ рдЙрджрд╛рд╣рд░рдг рд▓реЗрддреЗ рд╣реИрдВред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ / var / www рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╣рдорд╛рд░реЗ рд╕рд░реНрд╡рд░ рдкрд░ 1C-Bitrix рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдХреА рджреЛ рд╕рд╛рдЗрдЯреЗрдВ рд╣реИрдВ (bitrix-1.ru, bitrix-2.ru), рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдЕрд▓рдЧ-рдЕрд▓рдЧ MySQL рдЗрдВрд╕реНрдЯреЗрдВрд╕реЗрд╕ рдореЗрдВ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ (рдкреЛрд░реНрдЯ 3306 рдХреЗ рд▓рд┐рдП) bitrix_1_db рдФрд░ bitrix_2_db рдХреЗ рд▓рд┐рдП 3307 рдкреЛрд░реНрдЯ)ред </p><br><p>  рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдмрд┐рдЯреНрд░рд┐рдХреНрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рдлрд╝рд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛ рд▓рдЧрднрдЧ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: </p><br><pre> <code class="bash hljs">тФЬтФАтФА ... тФЬтФАтФА bitrix тФВ тФЬтФАтФА .. тФВ тФЬтФАтФА admin тФВ тФЬтФАтФА backup тФВ тФЬтФАтФА cache тФВ тФЬтФАтФА .. тФВ тФЬтФАтФА managed_cache тФВ тФЬтФАтФА .. тФВ тФЬтФАтФА stack_cache тФВ тФФтФАтФА .. тФЬтФАтФА upload тФФтФАтФА ...</code> </pre> <br><p>  рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, <em>рдЕрдкрд▓реЛрдб</em> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХрд╛ рд╡рдЬрди рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдХреЗрд╡рд▓ рд╕рдордп рдХреЗ рд╕рд╛рде рдмрдврд╝рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдмрдврд╝рд╛рдХрд░ рдмреИрдХрдЕрдк рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЕрдиреНрдп рд╕рднреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВ рдЕрд╕рддрдд рд╣реИрдВ, рджреЗрд╢реА рдмрд┐рдЯреНрд░рд┐рдХреНрд╕ рдЯреВрд▓ рджреНрд╡рд╛рд░рд╛ рдПрдХрддреНрд░ рдХрд┐рдП рдЧрдП рдХреИрд╢ рдФрд░ рдмреИрдХрдЕрдк рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░ред  рдмрддрд╛ рджреЗрдВ рдХрд┐ рдЗрди рджреЛрдиреЛрдВ рд╕рд╛рдЗрдЯреЛрдВ рдХреЗ рд▓рд┐рдП рдмреИрдХрдЕрдк рд╕реНрдЯреЛрд░реЗрдЬ рд╕реНрдХреАрдо рд╕рдорд╛рди рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рдЬрдмрдХрд┐ рдлрд╛рдЗрд▓реЛрдВ рдХреА рдкреНрд░рддрд┐рдпрд╛рдВ рд╕реНрдерд╛рдиреАрдп рд╕реНрддрд░ рдкрд░ рдФрд░ рд░рд┐рдореЛрдЯ рдПрдлрдЯреАрдкреА-рд╕реНрдЯреЛрд░реЗрдЬ рджреЛрдиреЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдП, рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдХреЗрд╡рд▓ рд░рд┐рдореЛрдЯ рдПрд╕рдПрдордмреА-рд╕реНрдЯреЛрд░реЗрдЬ рдкрд░ рд╕реНрдЯреЛрд░ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рд╕реЗрдЯрдЕрдк рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдореА рд╡рд┐рдиреНрдпрд╛рд╕ рдлрд╛рдЗрд▓ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧреА: </p><br><div class="spoiler">  <b class="spoiler_title">bitrix-desc-files.conf (рдЕрд╕рддрдд рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП рдиреМрдХрд░реА рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓)</b> <div class="spoiler_text"><pre> <code class="hljs powershell"> - job: Bitrix<span class="hljs-literal"><span class="hljs-literal">-desc</span></span><span class="hljs-literal"><span class="hljs-literal">-files</span></span> type: desc_files tmp_dir: /var/nxs<span class="hljs-literal"><span class="hljs-literal">-backup</span></span>/files/desc/dump_tmp sources: - target: - /var/www/*/ excludes: - bitrix/backup - bitrix/cache - bitrix/managed_cache - bitrix/stack_cache - upload gzip: yes storages: - storage: local enable: yes backup_dir: /var/nxs<span class="hljs-literal"><span class="hljs-literal">-backup</span></span>/files/desc/dump store: days: <span class="hljs-number"><span class="hljs-number">6</span></span> weeks: <span class="hljs-number"><span class="hljs-number">4</span></span> month: <span class="hljs-number"><span class="hljs-number">6</span></span> - storage: ftp enable: yes backup_dir: /nxs<span class="hljs-literal"><span class="hljs-literal">-backup</span></span>/databases/mysql/dump host: ftp_host user: ftp_usr password: ftp_usr_pass store: days: <span class="hljs-number"><span class="hljs-number">6</span></span> weeks: <span class="hljs-number"><span class="hljs-number">4</span></span> month: <span class="hljs-number"><span class="hljs-number">6</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">bitrix-inc-files.conf (рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП рдиреМрдХрд░реА рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓)</b> <div class="spoiler_text"><pre> <code class="hljs coffeescript"> - job: Bitrix-inc-files type: inc_files sources: - target: - <span class="hljs-regexp"><span class="hljs-regexp">/var/www/</span></span>*<span class="hljs-regexp"><span class="hljs-regexp">/upload/</span></span> gzip: <span class="hljs-literal"><span class="hljs-literal">yes</span></span> storages: - storage: ftp enable: <span class="hljs-literal"><span class="hljs-literal">yes</span></span> backup_dir: /nxs-backup/files/inc host: ftp_host user: ftp_usr password: ftp_usr_pass - storage: local enable: <span class="hljs-literal"><span class="hljs-literal">yes</span></span> backup_dir: /var/nxs-backup/files/inc</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">bitrix-mysql.conf (MySQL рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП рдиреМрдХрд░реА рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓)</b> <div class="spoiler_text"><pre> <code class="hljs sql"> - job: Bitrix-mysql type: mysql tmp_dir: /var/nxs-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span>/mysql/dump_tmp sources: - <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>: db_host: localhost db_port: <span class="hljs-number"><span class="hljs-number">3306</span></span> db_user: bitrux_usr_1 db_password: password_1 target: - bitrix_1_db excludes: - information_schema - performance_schema - mysql - <span class="hljs-keyword"><span class="hljs-keyword">sys</span></span> gzip: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> is_slave: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> extra_keys: <span class="hljs-string"><span class="hljs-string">'--opt --add-drop-database --routines --comments --create-options --quote-names --order-by-primary --hex-blob'</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>: db_host: localhost db_port: <span class="hljs-number"><span class="hljs-number">3307</span></span> db_user: bitrix_usr_2 db_password: password_2 target: - bitrix_2_db excludes: - information_schema - performance_schema - mysql - <span class="hljs-keyword"><span class="hljs-keyword">sys</span></span> gzip: yes is_slave: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> extra_keys: <span class="hljs-string"><span class="hljs-string">'--opt --add-drop-database --routines --comments --create-options --quote-names --order-by-primary --hex-blob'</span></span> storages: - <span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>: smb <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span>: yes backup_dir: /nxs-<span class="hljs-keyword"><span class="hljs-keyword">backup</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">databases</span></span>/mysql/dump host: smb_host port: smb_port <span class="hljs-keyword"><span class="hljs-keyword">share</span></span>: smb_share_name <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: smb_usr <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: smb_usr_pass <span class="hljs-keyword"><span class="hljs-keyword">store</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">days</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> weeks: <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">month</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span></code> </pre> </div></div><br><h2 id="parametry-dlya-zapuska-sbora-bekapov">  рдмреИрдХрдЕрдк рдПрдХрддреНрд░рд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд╡рд┐рдХрд▓реНрдк </h2><br><p>  рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдордиреЗ рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рд╕рднреА рддрддреНрд╡реЛрдВ рдХреЗ рдмреИрдХрдЕрдк рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреМрдХрд░реА рд╡рд┐рдиреНрдпрд╛рд╕ рдлрд╛рдЗрд▓ рддреИрдпрд╛рд░ рдХреА: рдлрд╛рдЗрд▓реЗрдВ (рдЕрд╕рддрдд рдФрд░ рд╡реГрджреНрдзрд┐рд╢реАрд▓), рджреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕реНрдерд╛рдиреАрдп рдФрд░ рдмрд╛рд╣рд░реА (ftp, smb) рд╕реНрдЯреЛрд░реЗрдЬ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдирд╛ред </p><br><p>  рдпрд╣ рдкреВрд░реА рдмрд╛рдд рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИред  рд▓реЙрдиреНрдЪ рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="bash hljs">nxs-backup start <span class="hljs-variable"><span class="hljs-variable">$JOB_NAME</span></span> -c <span class="hljs-variable"><span class="hljs-variable">$PATH_TO_MAIN_CONFIG</span></span></code> </pre> <br><p>  рдХрдИ рдЖрд░рдХреНрд╖рд┐рдд рдиреМрдХрд░реА рдХреЗ рдирд╛рдо рд╣реИрдВ: </p><br><ul><li>  <strong>рдлрд╛рдЗрд▓реЗрдВ</strong> - рдкреНрд░рдХрд╛рд░ <em>desc_files рдХреЗ</em> рд╕рд╛рде рд╕рднреА <em>рдиреМрдХрд░рд┐рдпреЛрдВ рдХреЗ</em> рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрди, <em>inc_files</em> (рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдХреЗрд╡рд▓ рдлрд╛рдЗрд▓реЗрдВ <em>рд╕рдорд░реНрдерд┐рдд</em> рд╣реИрдВ) </li><li>  <strong>рдбреЗрдЯрд╛рдмреЗрд╕</strong> - рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ <em>mysql</em> , <em>mysql_xtradb</em> , <em>postgresql</em> , <em>postgresql_hot</em> , <em>mongodb</em> , <em>redis</em> (рдЬреЛ рдХреЗрд╡рд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдмреИрдХрдЕрдк рд╣реИ) рдХреЗ рд╕рд╛рде рд╕рднреА рдиреМрдХрд░рд┐рдпреЛрдВ рдХреЛ рдмреЗрддрд░рддреАрдм рдврдВрдЧ рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реИ </li><li>  <strong>рдмрд╛рд╣рд░реА</strong> - рдмреЗрддрд░рддреАрдм рдврдВрдЧ рд╕реЗ <em>рдмрд╛рд╣рд░реА</em> рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рд╕рднреА рдиреМрдХрд░рд┐рдпреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ (рдХреЗрд╡рд▓ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╕реНрдЯрдо рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдирд╛, рдиреАрдЪреЗ рдЗрд╕ рдкрд░ рдФрд░ рдЕрдзрд┐рдХ) </li><li>  <strong>рд╕рднреА</strong> - рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдХрд╛рдо <em>рдлрд╛рдЗрд▓реЛрдВ</em> , <em>рдбреЗрдЯрд╛рдмреЗрд╕</em> , <em>рдмрд╛рд╣рд░реА</em> (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди) рдХреЗ рд╕рд╛рде рдХрдорд╛рдВрдб рдЪрд▓рд╛рдиреЗ рдХреА рдирдХрд▓ </li></ul><br><p>  рдЪреВрдВрдХрд┐ рд╣рдореЗрдВ рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рдПрдХ рд╣реА рд╕рдордп (рдпрд╛ рдиреНрдпреВрдирддрдо рдЕрдВрддрд░ рдХреЗ рд╕рд╛рде) рджреЛрдиреЛрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдбреЗрдЯрд╛ рдмреИрдХрдЕрдк рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП <strong>рд╕рднреА</strong> рдиреМрдХрд░реА рдХреЗ рд╕рд╛рде nxs-backup рдЪрд▓рд╛рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ, рдЬреЛ рд╡рд░реНрдгрд┐рдд рдиреМрдХрд░реА рдХреЗ рдирд┐рд░рдВрддрд░ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдЧрд╛ (Bitrix-desc-) рдлрд╝рд╛рдЗрд▓реЗрдВ, Bitrix-inc_files, Bitrix-mysql)ред </p><br><p>  рдпрд╣реА рд╣реИ, рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ - рдмреИрдХрдЕрдк рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдПрдХрддреНрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ, рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдиреНрдпреВрдирддрдо рд╕рдордп рдЕрдВрддрд░ рдХреЗ рд╕рд╛рдеред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдЧрд▓реА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЪрд▓ рд░рд╣реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрджрд┐ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ, рддреЛ рдпрд╣ рд▓реЙрдЧ рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рдЪрд┐рд╣реНрди рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рдХрд╛рдо рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрдЧрд╛ред  рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдкреНрд░рдгрд╛рд▓реА рдкрд░ рд▓реЛрдб рдХреЛ рдХрд╛рдлреА рдХрдо рдХрд░рддрд╛ рд╣реИред  рдорд╛рдЗрдирд╕ - рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрддреНрд╡реЛрдВ рдХреЗ рдмреИрдХрдЕрдк рдПрдХ рдмрд╛рд░ рдореЗрдВ рдПрдХрддреНрд░ рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреБрдЫ рд╕рдордп рдЕрдВрддрд░ рдХреЗ рд╕рд╛рдеред  рд▓реЗрдХрд┐рди рдЬрдм рд╣рдорд╛рд░рд╛ рдЕрднреНрдпрд╛рд╕ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЖрд▓реЛрдЪрдирд╛рддреНрдордХ рдирд╣реАрдВ рд╣реИред </p><br><h2 id="vneshnie-moduli">  рдмрд╛рд╣рд░реА рдореЙрдбреНрдпреВрд▓ </h2><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдореЙрдбреНрдпреВрд▓рд░ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рд╕рд┐рд╕реНрдЯрдо рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рддреЗ рд╣реИрдВред  рд▓рдХреНрд╖реНрдп рдпрд╣ рд╣реИ рдХрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдирдП рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЗ рд▓рд┐рдП nxs- рдмреИрдХрдЕрдк рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд┐рдирд╛ рдмреИрдХрдЕрдк рд╕рдорд░реНрдерди рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛред </p><br><div class="spoiler">  <b class="spoiler_title">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> - job: TEST-<span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> dump_cmd: <span class="hljs-string"><span class="hljs-string">''</span></span> storages: тАж.</code> </pre> </div></div><br><p>  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ <strong>рдбрдВрдк_cmd</strong> рдХреБрдВрдЬреА рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд╣рд╛рдВ рдорд╛рди рдмрд╛рд╣рд░реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рдХрдорд╛рдВрдб рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕ рдЖрджреЗрд╢ рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдкрд░, рдпрд╣ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╣реИ рдХрд┐: </p><br><ul><li>  рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдбреЗрдЯрд╛ рдХрд╛ рдПрдХ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╕рдВрдЧреНрд░рд╣ рдПрдХрддреНрд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ </li><li>  рдбреЗрдЯрд╛ рдХреЛ рдлреЙрд░реНрдо рдХреЗ json рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛: <br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"full_path"</span></span>: <span class="hljs-string"><span class="hljs-string">"ABS_PATH_TO_ARCHIVE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"basename"</span></span>: <span class="hljs-string"><span class="hljs-string">"BASENAME_ARCHIVE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"extension"</span></span>: <span class="hljs-string"><span class="hljs-string">"EXTERNSION_OF_ARCHIVE"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"gzip"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>/<span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><ul><li>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХреБрдВрдЬреА рдмреИрдХрдЕрдк рдирд╛рдо, <em>рд╡рд┐рд╕реНрддрд╛рд░</em> , <em>gzip</em> рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЕрдВрддрд┐рдо рдмреИрдХрдЕрдк рдирд╛рдо рдХреЗ рдЧрдарди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ <em>рд╣реИрдВ</em> ред </li></ul></li><li>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд╕рдлрд▓ рд╕рдорд╛рдкрди рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд░рд┐рдЯрд░реНрди рдХреЛрдб 0 рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдХрд┐рд╕реА рднреА рд╕рдорд╕реНрдпрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХреЛрдИ рдЕрдиреНрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li></ul><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдорд╛рди рд▓реЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕реНрдиреИрдкрд╢реЙрдЯ etcd <em>/etc/nxs-backup-ext/etcd.py</em> рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#! /usr/bin/env python3 # -*- coding: utf-8 -*- import json import os import subprocess import sys import tarfile def archive(snapshot_path): abs_tmp_path = '%s.tar' %(snapshot_path) with tarfile.open(abs_tmp_path, 'w:') as tar: tar.add(snapshot_path) os.unlink(snapshot_path) return abs_tmp_path def exec_cmd(cmdline): data_dict = {} current_process = subprocess.Popen([cmdline], stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True, executable='/bin/bash') data = current_process.communicate() data_dict['stdout'] = data[0][0:-1].decode('utf-8') data_dict['stderr'] = data[1][0:-1].decode('utf-8') data_dict['code'] = current_process.returncode return data_dict def main(): snapshot_path = "/var/backups/snapshot.db" dump_cmd = "ETCDCTL_API=3 etcdctl --cacert=/etc/ssl/etcd/ssl/ca.pem --cert=/etc/ssl/etcd/ssl/member-node1.pem"+\ " --key=/etc/ssl/etcd/ssl/member-node1-key.pem --endpoints 'https://127.0.0.1:2379' snapshot save %s" %snapshot_path command = exec_cmd(dump_cmd) result_code = command['code'] if result_code: sys.stderr.write(command['stderr']) else: try: new_path = archive(snapshot_path) except tarfile.TarError as e: sys.exit(1) else: result_dict = { "full_path": new_path, "basename": "etcd", "extension": "tar", "gzip": False } print(json.dumps(result_dict)) sys.exit(result_code) if __name__ == '__main__': main()</span></span></code> </pre> </div></div><br><p>  рдЗрд╕ рд▓рд┐рдкрд┐ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдиреНрдпрд╛рд╕ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> - job: etcd-<span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> dump_cmd: <span class="hljs-string"><span class="hljs-string">'/etc/nxs-backup-ext/etcd.py'</span></span> storages: - <span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span>: yes backup_dir: /var/nxs-backup/<span class="hljs-keyword"><span class="hljs-keyword">external</span></span>/dump store: days: <span class="hljs-number"><span class="hljs-number">6</span></span> weeks: <span class="hljs-number"><span class="hljs-number">4</span></span> month: <span class="hljs-number"><span class="hljs-number">6</span></span></code> </pre> </div></div><br><p>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдиреМрдХрд░реА <em>рд╡рдЧреИрд░рд╣</em> рдЪрд▓рд╛рдиреЗ рдХреЗ рджреМрд░рд╛рди рдХрд╛рд░реНрдпрдХреНрд░рдо: </p><br><ul><li>  рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдмрд┐рдирд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ <em>/etc/nxs-backup-ext/etcd.py</em> рдЪрд▓рд╛рдПрдБ </li><li>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдкреВрд░реА рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдпрд╣ рдкреВрд░рд╛ рдХреЛрдб рдФрд░ stdout рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдбреЗрдЯрд╛ рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдЧрд╛ </li><li>  рдпрджрд┐ рд╕рднреА рдЪреЗрдХ рд╕рдлрд▓ рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рдЙрд╕реА рддрдВрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд╣рд▓реЗ рд╕реЗ рдирд┐рд░реНрдорд┐рдд рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ full_path рдХреБрдВрдЬреА рдорд╛рди tmp_path рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдпрд╣ рдЗрд╕ рдХрд╛рд░реНрдп рдХреЛ рд▓реЙрдЧ рдореЗрдВ рд╕рдВрдмрдВрдзрд┐рдд рдЪрд┐рд╣реНрди рдХреЗ рд╕рд╛рде рдкреВрд░рд╛ рдХрд░реЗрдЧрд╛ред </li></ul><br><h1 id="podderzhka-i-obnovlenie">  рд╕рдорд░реНрдерди рдФрд░ рдЕрджреНрдпрддрди </h1><br><p>  рдирдИ рдмреИрдХрдЕрдк рдкреНрд░рдгрд╛рд▓реА рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдФрд░ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реАрдЖрдИ / рд╕реАрдбреА рдХреЗ рд╕рднреА рдХреИрдирди рдХреЗ рд╕рд╛рде рд▓рд╛рдЧреВ рдХреА рдЧрдИ рд╣реИред  рдХреЛрдИ рдФрд░ рдЕрдзрд┐рдХ рдЕрджреНрдпрддрди рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдпреБрджреНрдз рд╕рд░реНрд╡рд░ рдкрд░ рд╕рдВрдкрд╛рджрд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрди Gitlab рдореЗрдВ рд╣рдорд╛рд░реЗ рдХреЗрдВрджреНрд░реАрдп рдЧрд┐рдЯ рднрдВрдбрд╛рд░ рд╕реЗ рд╣реЛрдХрд░ рдЧреБрдЬрд░рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ deb / rpm рд╕рдВрдХреБрд▓ рдХреЗ рдирдП рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреА рдЕрд╕реЗрдВрдмрд▓реА рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рд╣реИ, рдЬреЛ рддрдм рд╣рдорд╛рд░реЗ deb / rpm рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдЕрдкрд▓реЛрдб рдХреА рдЬрд╛рддреА рд╣реИрдВред  рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж, рдкреИрдХреЗрдЬ рдореИрдиреЗрдЬрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдЙрдиреНрд╣реЗрдВ рдЕрдВрддрд┐рдо рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд░реНрд╡рд░ рддрдХ рдкрд╣реБрдВрдЪрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><h1 id="kak-skachat-nxs-backup">  Nxs-backup рдХреИрд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ? </h1><br><p>  рд╣рдордиреЗ nxs- рдмреИрдХрдЕрдк рдУрдкрди-рд╕реЛрд░реНрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдпрд╛ред  рдХреЛрдИ рднреА рдЕрдкрдиреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдмреИрдХрдЕрдк рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдмрд╛рд╣рд░реА рдореЙрдбреНрдпреВрд▓ рд▓рд┐рдЦ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  Nxs- рдмреИрдХрдЕрдк рдХреЗ рд▓рд┐рдП рд╕реЛрд░реНрд╕ рдХреЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ рд▓рд┐рдВрдХ рдкрд░</a> Github рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╕реНрдерд╛рдкрдирд╛ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдирд┐рд░реНрджреЗрд╢ рднреА рд╣реИред </p><br><p>  рд╣рдордиреЗ рдПрдХ рдбреЙрдХрд░ рдЫрд╡рд┐ рднреА рддреИрдпрд╛рд░ рдХреА рдФрд░ рдЗрд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрдХрд░рд╣рдм</a> рдкрд░ рдкреЛрд╕реНрдЯ рдХрд┐рдпрд╛ред </p><br><p>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕реЗрдЯрдЕрдк рдпрд╛ рдЙрдкрдпреЛрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рдХреЛрдИ рдкреНрд░рд╢реНрди рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рд▓рд┐рдЦреЗрдВред  рд╣рдо рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рд╕рдордЭрдиреЗ рдФрд░ рдЕрдВрддрд┐рдо рд░реВрдк рджреЗрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВрдЧреЗред </p><br><h1 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br><p>  рдирд┐рдХрдЯ рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдВрдЧреЗ: </p><br><ul><li>  рдирд┐рдЧрд░рд╛рдиреА рдПрдХреАрдХрд░рдг </li><li>  рдмреИрдХрдЕрдк рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди </li><li>  рдмреИрдХрдЕрдк рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рд╡реЗрдм-рдЖрдзрд╛рд░рд┐рдд рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </li><li>  Nxs-backup рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмреИрдХрдЕрдк рддреИрдирд╛рдд рдХрд░рдирд╛ </li><li>  рдФрд░ рднреА рдмрд╣реБрдд рдХреБрдЫ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi424717/">https://habr.com/ru/post/hi424717/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi424701/index.html">рдЗрдореНрдкреЛрд╕реНрдЯрд░реНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХрд╛рд▓реНрдкрдирд┐рдХ рдЖрдИрдЯреА рдХрд╣рд╛рдирд┐рдпрд╛рдВ рдФрд░ рдпреЗ рдЕрд╕реНрдкрд╖реНрдЯ рдЕрднреНрдпрд╛рд╕ рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рдореЗрдВ рдХреНрдпреЛрдВ рджрд┐рдЦрд╛рдИ рджрд┐рдП</a></li>
<li><a href="../hi424703/index.html">рдФрд░ рдлрд┐рд░ рд╕реЗ рдкреНрд░рддрд┐рд░реВрдкрдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi424709/index.html">рд╡рд┐рд╢реНрд╡ рд╕реНрддрдВрдн рдирд┐рд░реНрдорд╛рдг рдХреА рдЙрддреНрдХреГрд╖реНрдЯ рдХреГрддрд┐рдпрд╛рдБ: 28 000 рд░реВрдмрд▓ рдХреЗ рд▓рд┐рдП 225 рдбрдмреНрд▓реНрдпреВ рдЖрд░рдПрдордПрд╕</a></li>
<li><a href="../hi424711/index.html">рд╣рд╛рдЗрдбреНрд░реЛрдЬреЗрд▓ рд╕реЗ рд╕реБрдЕрд░ рдХреА рдЖрдВрдд рддрдХ: рд░реЛрдмреЛрдЯрд┐рдХреНрд╕ рдореЗрдВ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╕рд╛рдордЧреНрд░реА</a></li>
<li><a href="../hi424713/index.html">RTOS рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрд░реА рд╕рдЪреНрдЪрд╛рдИред рдЕрдиреБрдЪреНрдЫреЗрдж # 12 рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрд╡рд╛рдПрдБ</a></li>
<li><a href="../hi424723/index.html">рд╕реНрдХрд┐рд▓рдмреЙрдХреНрд╕ рдлреНрд░рд╛рдЗрдбреЗ рд╡реЗрдмрд┐рдирд╛рд░: рд╢реБрд░реБрдЖрддреА рдФрд░ рдЕрдзрд┐рдХ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА</a></li>
<li><a href="../hi424725/index.html">Oracle JDK 11+ (рд▓рд╛рдЗрд╕реЗрдВрд╕рд┐рдВрдЧ рдФрд░ рд╡рд┐рддрд░рдг) рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi424729/index.html">рдХрдВрдкрд╛рдЗрд▓рд░ рдиреЗ рдореЗрд░реЗ рд╕рд╢рд░реНрдд рд▓реВрдк рдХреЛ рдЕрдирдВрдд рдореЗрдВ рдХреНрдпреЛрдВ рдмрджрд▓ рджрд┐рдпрд╛?</a></li>
<li><a href="../hi424731/index.html">рд╣реЙрдЯ рдЯреЗрдХ рд╕рдкреЛрд░реНрдЯ рд╣рд┐рд╕реНрдЯреНрд░реА рдпрд╛ рдСрдЯреЛрдХреИрдб рдкреНрд░реЙрдХреНрд╕реА рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдбрд┐рд▓реАрдЯ рдХреНрдпреЛрдВ рдХрд░рддрд╛ рд╣реИ?</a></li>
<li><a href="../hi424733/index.html">рдкреАрдПрд▓рд╕реА рдХреЗ рд░реВрдк рдореЗрдВ рдмреНрд▓реВ рдЧреЛрд▓реА STM32F103</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>