<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛀🏾 🎵 🏐 Nous gérons des prises intelligentes et des centaines d'autres appareils IoT à l'aide d'appareils, de sites, de bots et de messagers instantanés de bricolage 🧗🏾 🦎 👩🏼‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut les Geektimes! La fabrication, par exemple, d'une prise intelligente pour les dispositifs de commutation avec alimentation 220V est le plus gros...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous gérons des prises intelligentes et des centaines d'autres appareils IoT à l'aide d'appareils, de sites, de bots et de messagers instantanés de bricolage</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409289/"><img src="https://habrastorage.org/webt/t_/iw/qb/t_iwqbfvqwybt6x9qx6hnfhyzj8.png"><br>  Salut les Geektimes!  La fabrication, par exemple, d'une prise intelligente pour les dispositifs de commutation avec alimentation 220V est le plus gros problème dans le développement de la domotique, de la maison intelligente et des systèmes similaires. <br><br>  Ce problème a deux aspects - la complexité de l'auto-fabrication et la garantie de la fiabilité et de la sécurité de ces points de vente.  Par conséquent, seuls des artisans expérimentés peuvent les réaliser de leurs propres mains. <br><br>  Le plus souvent, l'incitation à créer une prise intelligente seule est le manque d'une API saine pour la plupart des modèles série. <br><a name="habracut"></a><br>  Dans un article sur Geektimes sur les prises intelligentes, j'ai vu ce commentaire: <br><br>  « <i>S'il n'y a pas d'API ouverte, comment vous différenciez-vous des centaines d'autres fournisseurs?</i>  <i>Je rêve d'un point de vente que je peux gérer une demande https régulière.</i>  <i>De n'importe quel OS et de n'importe quel appareil</i> . " <br><br>  C'est de cette façon que je veux partager presque n'importe quelle prise intelligente et de nombreux appareils IoT.  La méthode décrite ci-dessous est pertinente à la fois pour la simple prise Wi-Fi HS100 de TP Link de n'importe quel magasin d'électronique et pour de nombreux autres appareils: lampes LED intelligentes de Philips, hubs de maison intelligente, thermostats Nest, bracelets de fitness, systèmes d'irrigation et même des voitures . <br><br>  Sur le site Web de n'importe quel grand magasin d'électronique en ligne comme AliExpress ou eBay, à la recherche de «maison intelligente», vous pouvez voir des centaines d'appareils IoT intéressants pour les maisons intelligentes.  La plupart d'entre eux ont un prix attractif, ils ont l'air cool, ont des certificats de sécurité, mais ils n'ont pas d'API ouverte - ce qui est vraiment important pour les geeks. <br><br>  En fait, ce n'est pas entièrement vrai.  La plupart des appareils ont une API, bien sûr, et dans la plupart des cas, elle est ouverte, mais pas pour tout le monde.  Le plus souvent, Amazon y a accès, car il existe un grand nombre d'appareils compatibles avec la commande vocale <br>  Assistant Alexa Echo.  Plus de détails peuvent être lus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  À son tour, le backend d'Amazon pour la gestion d'Alexa est également ouvert - AWS pour prendre en charge les appareils IoT et toutes sortes de compétences Alexa, Lambda, etc.  Le problème est que tout cela est assez difficile à comprendre. <br><br>  Je vais maintenant vous expliquer comment gérer à l'aide de requêtes JSON tout ce qu'Alexa Echo peut gérer.  En écrivant simplement une commande comme «allumer le salon», vous pouvez contrôler presque n'importe quelle prise intelligente d'où vous voulez - depuis le site, l'appareil Arduino, le bot ou le messager. <br><br>  À titre d'exemple simple, beaucoup utilisent déjà le célèbre commutateur Sonof pour 5 $.  Habituellement, les artisans le reprogramment et utilisent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un firmware personnalisé</a> pour leur serveur. <br><br>  En fait, ils peuvent contrôler le texte ou la voix à partir d'une application gratuite, et également utiliser l'API pour transférer des commandes à l'aide de requêtes json simples à partir de votre site, Arduino, bot, etc., et vous n'avez pas besoin de souder ou de flasher quoi que ce soit - tout fonctionne " hors de la boîte. " <br><br><img src="https://habrastorage.org/webt/2h/5h/lp/2h5hlp4obj6d6daic04fd5euzp8.jpeg"><br><br>  L'écosystème Alexa évolue constamment et de plus en plus de nouvelles équipes de gestion apparaissent.  Des instructions détaillées sur la configuration des appareils Sonof pour travailler avec Alexa sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Alors, que faut-il pour gérer des centaines de titres d'appareils et de systèmes IoT (prenant en charge Alexa Echo) à partir de vos sites, appareils de bricolage, bots, etc.? <br><br>  Vous devez d'abord télécharger l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">application</a> et vous enregistrer (l'identifiant et le mot de passe sélectionnés lors de l'inscription seront nécessaires lors de l'autorisation de l'API). <br><br>  Vous aurez également besoin du nom d'utilisateur et du mot de passe de votre compte sur Amazon.  Vous pouvez les saisir lors de la première activation du mode Alexa dans l'application (icône «a») ou vous inscrire et créer un nouveau compte sur Amazon. <br><br><img src="https://habrastorage.org/webt/59/d4/70/59d4707292d45085890392.png"><br><br>  Maintenant, nous créons un chat avec quelqu'un, dans lequel nous enverrons des commandes de l'API pour gérer les appareils. <br><br>  Nous avons besoin d'un identifiant de chat.  Nous l'obtenons avec la commande getSessions.  Exemple d'exécution de commande: <br><br><pre><code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"new"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"top"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"delivery"</span></span>: <span class="hljs-number"><span class="hljs-number">1514009104111</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"orig"</span></span>: <span class="hljs-string"><span class="hljs-string">"3996189326"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lifetime"</span></span>: <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"mid"</span></span>: <span class="hljs-string"><span class="hljs-string">"1514009104111-b6cbe7fcccd49f9824"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"time"</span></span>: <span class="hljs-number"><span class="hljs-number">1514009104111</span></span>, <span class="hljs-attr"><span class="hljs-attr">"event"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-attr"><span class="hljs-attr">"content"</span></span>: <span class="hljs-string"><span class="hljs-string">"weather in london"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"created"</span></span>: <span class="hljs-number"><span class="hljs-number">1513996519209</span></span>, <span class="hljs-attr"><span class="hljs-attr">"missed"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"count"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-attr"><span class="hljs-attr">"parties"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"3996189326"</span></span>, <span class="hljs-string"><span class="hljs-string">"3929915709"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;b&gt;1513996519209-ab612ee9434113c8d1&lt;/b&gt;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"time"</span></span>: <span class="hljs-number"><span class="hljs-number">1514009104111</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dialogid"</span></span>: <span class="hljs-string"><span class="hljs-string">"1513996519209-4b0cbad7b6e43ed36e"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"updated"</span></span>: <span class="hljs-number"><span class="hljs-number">1513999445871</span></span>, <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"keyGeoEnable"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"push"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"nodisturb"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> },</code> </pre> <br>  Recherchez le chat que vous souhaitez (ici, il s'affiche comme "id": "1513996519209-ab612ee9434113c8d1") et copiez son ID - 1513996519209-ab612ee9434113c8d1.  Maintenant, nous pouvons émettre une commande <br>  pour le contrôle avec les paramètres suivants: <br><br>  <b>méthode</b> sendMessage <br>  <b>id</b> session1513996519209-ab612ee9434113c8d1 <br>  <b>type</b> 16 <br>  <b>contenu</b> météo à Londres <br><br>  Si tout est fait correctement, votre smartphone signalera la météo actuelle à Londres.  En savoir plus sur les commandes API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Vous devez maintenant lier l'appareil à votre compte Alexa.  Des instructions détaillées sont dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cet</a> article sur Geektimes.  Après la liaison, vous pouvez modifier l'expression dans le contenu. <br><br>  Par exemple, si l'appareil est attaché au groupe Living Room, la demande json ressemblera à ceci: <br><br>  <b>méthode</b> sendMessage <br>  <b>id</b> session1513996519209-ab612ee9434113c8d1 <br>  <b>type</b> 16 <br>  <b>contenu</b> allume le salon <br><br>  L'appareil correspondant lié au salon sera allumé - une prise intelligente, un interrupteur intelligent, etc. <br><br>  Important!  Dans les paramètres de l'application doit être cochée Always On: <br><br><img src="https://habrastorage.org/webt/be/l6/fx/bel6fxfdu9ueoahewcpxrh5jrke.png"><br><br>  Maintenant, vous pouvez non seulement gérer les systèmes à partir du site, du bot, des appareils comme Arduino et d'autres méthodes, mais aussi effectuer des achats sur Amazon - en général, utilisez tout ce que la colonne intelligente Alexa Echo peut faire. <br><br>  Merci de votre attention!  J'espère que cela vous sera utile. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr409289/">https://habr.com/ru/post/fr409289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr409279/index.html">L'interrupteur de masse sur la voiture en 5 minutes (protection de la batterie contre l'autodécharge)</a></li>
<li><a href="../fr409281/index.html">Vulnérabilité dans les processeurs Intel: affectée par Windows et Linux, la fermeture de la vulnérabilité entraînera une baisse des performances allant jusqu'à 30%</a></li>
<li><a href="../fr409283/index.html">Le ralentissement forcé de l'ancien iPhone augmente les chances de promulgation du droit de réparation</a></li>
<li><a href="../fr409285/index.html">Une méta-sélection des meilleurs gadgets de l'année - d'Alta à Zelda</a></li>
<li><a href="../fr409287/index.html">La FDA approuve la thérapie génique pour la cécité congénitale</a></li>
<li><a href="../fr409291/index.html">Robot Courier - livraison en 30 minutes, ou comment construire l'avenir en Russie</a></li>
<li><a href="../fr409295/index.html">La triste histoire de Zenith</a></li>
<li><a href="../fr409297/index.html">Interprète Brainfuck sur Arduino</a></li>
<li><a href="../fr409299/index.html">La notation est enseignée incorrectement *</a></li>
<li><a href="../fr409301/index.html">Science jamais citée</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>