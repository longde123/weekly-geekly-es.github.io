<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüî¨ üë®‚Äçüè≠ üßùüèæ "√öltimo recurso" o por qu√© se necesita el primer dise√±o de base de datos ü§öüèæ üñ±Ô∏è üò¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este √∫ltimo art√≠culo, explicar√© por qu√©, en mi opini√≥n, en la mayor√≠a de los casos, al desarrollar un modelo de datos para una aplicaci√≥n, debe seg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"√öltimo recurso" o por qu√© se necesita el primer dise√±o de base de datos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413597/"><p>  En este √∫ltimo art√≠culo, explicar√© por qu√©, en mi opini√≥n, en la mayor√≠a de los casos, al desarrollar un modelo de datos para una aplicaci√≥n, debe seguir el primer enfoque de la base de datos.  En lugar del enfoque "Java [cualquier otro idioma] primero", que lo lleva a una larga ruta llena de dolor y sufrimiento, tan pronto como el proyecto comienza a crecer. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2ae/fcf/aaf/2aefcfaafbeb94adc7a73ec265b5feb1.png" alt="imagen"><br>  <em>"Demasiado ocupado para ser mejor" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CC con licencia</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Alan O'Rourke / Audience Stack</a> .</em>  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Imagen original</a></em> <em><br></em> </p><a name="habracut"></a><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Este art√≠culo est√° inspirado en una pregunta reciente de StackOverflow</a> . </p><br><p>  Interesantes discusiones en reddit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">/ r / java</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">/ r / programacion</a> . </p><br><h2 id="kodogeneraciya">  Generaci√≥n de c√≥digo </h2><br><p>  Para mi sorpresa, un peque√±o grupo de usuarios parece haberse sorprendido por el hecho de que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">jOOQ est√°</a> fuertemente vinculado a la generaci√≥n de c√≥digo fuente. </p><br><p>  Si bien puede usar jOOQ exactamente como lo desee, la forma preferida (de acuerdo con la documentaci√≥n) es comenzar con el esquema de base de datos existente, luego generar las clases de cliente necesarias (correspondientes a sus tablas) usando jOOQ, y despu√©s de eso es f√°cil escribir con seguridad de escritura consultas para estas tablas: </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Record2&lt;String, String&gt; record : DSL.using(configuration) <span class="hljs-comment"><span class="hljs-comment">// ^^^^^^^^^^^^^^^^^^^^^^^ Type information derived from the // generated code referenced from the below SELECT clause .select(ACTOR.FIRST_NAME, ACTOR.LAST_NAME) // vvvvv ^^^^^^^^^^^^ ^^^^^^^^^^^^^^^ Generated names .from(ACTOR) .orderBy(1, 2)) { // ... }</span></span></code> </pre> <br><p>  El c√≥digo se puede generar manualmente fuera del ensamblaje o autom√°ticamente con cada ensamblaje.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dicha generaci√≥n puede ocurrir inmediatamente despu√©s de instalar las migraciones de Flyway</a> , que tambi√©n se pueden iniciar de forma manual o autom√°tica. </p><br><h3 id="generaciya-ishodnogo-koda">  Generaci√≥n de c√≥digo fuente </h3><br><p>  Existen diferentes filosof√≠as, ventajas y desventajas con respecto a estos enfoques para la generaci√≥n de c√≥digo que no quiero discutir en este art√≠culo.  Pero, en esencia, el significado del c√≥digo generado es que es una representaci√≥n de Java de lo que consideramos una especie de "est√°ndar" (tanto dentro como fuera de nuestro sistema).  En cierto modo, los compiladores hacen lo mismo cuando generan bytecode, c√≥digo de m√°quina o alg√∫n otro c√≥digo fuente de la fuente; como resultado, tenemos una idea de nuestro "est√°ndar" en otro lenguaje espec√≠fico. </p><br><p>  Hay bastantes generadores de c√≥digo de este tipo.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">XJC puede generar c√≥digo Java a partir de archivos XSD o WSDL</a> .  El principio es siempre el mismo: </p><br><ul><li>  Existe alg√∫n est√°ndar (externo o interno), como especificaciones, modelo de datos, etc. </li><li>  Es necesario tener su propia idea de este est√°ndar en nuestro lenguaje de programaci√≥n habitual. </li></ul><br><p>  Y casi siempre tiene sentido <em>generar</em> esta vista para evitar trabajos innecesarios y errores innecesarios. </p><br><h3 id="type-providers-i-obrabotka-annotaciy">  Proveedores de tipos y procesamiento de anotaciones </h3><br><p>  Cabe mencionar que otro enfoque m√°s moderno para la generaci√≥n de c√≥digo en jOOQ es Type Providers ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">como se hace en F #</a> ), donde el compilador genera el c√≥digo en la compilaci√≥n y nunca existe en la forma original.  Una herramienta similar (pero menos sofisticada) en Java son los procesadores de anotaciones como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lombok</a> . </p><br><p>  En ambos casos, todo es igual que en la generaci√≥n de c√≥digo normal, excepto: </p><br><ul><li>  No ve el c√≥digo generado (¬øquiz√°s para muchos esto es una gran ventaja?) </li><li>  Debe asegurarse de que su "referencia" est√© disponible en cada compilaci√≥n.  Esto no causa ning√∫n problema en el caso de Lombok, que anota directamente el c√≥digo fuente, que es el "est√°ndar" en este caso.  Un poco m√°s complicado con los modelos de bases de datos que dependen de una conexi√≥n en vivo siempre activa. </li></ul><br><h2 id="v-chem-problema-s-generaciey-koda">  ¬øCu√°l es el problema con la generaci√≥n de c√≥digo? </h2><br><p>  Adem√°s de la dif√≠cil cuesti√≥n de si generar el c√≥digo de forma manual o autom√°tica, algunas personas piensan que no es necesario generar el c√≥digo.  La raz√≥n por la que escucho con m√°s frecuencia es que esa generaci√≥n es dif√≠cil de implementar en la tuber√≠a de CI / CD.  Y s√≠, es verdad, porque  Obtenemos gastos generales por crear y soportar infraestructura adicional, especialmente si usted es nuevo en las herramientas utilizadas (jOOQ, JAXB, Hibernate, etc.). </p><br><p>  Si la sobrecarga de estudiar el generador de c√≥digo es demasiado alta, entonces realmente habr√° pocos beneficios.  Pero este es el √∫nico argumento en contra.  En la mayor√≠a de los otros casos, no tiene ning√∫n sentido escribir c√≥digo manualmente, que es la representaci√≥n habitual de un modelo de algo. </p><br><p>  Muchas personas afirman que no tienen tiempo para esto, porque  En este momento, debe implementar otro MVP lo antes posible.  Y podr√°n finalizar su canalizaci√≥n de CI / CD en alg√∫n momento posterior.  En tales casos, generalmente digo: "Est√°s demasiado ocupado para mejorar". </p><br><h2 id="no-ved-hibernatejpa-delaet-java-first-razrabotku-gorazdo-prosche">  "Pero Hibernate / JPA hace que el primer desarrollo de Java sea mucho m√°s f√°cil". </h2><br><p>  Si es verdad  Esto es tanto una alegr√≠a como un dolor para los usuarios de Hibernate.  Con √©l, simplemente puede escribir varios objetos del formulario: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; String title; }</code> </pre> <br><p>  Y eso casi est√° hecho.  A continuaci√≥n, Hibernate asumir√° toda la rutina sobre c√≥mo definir este objeto en DDL y en el dialecto SQL deseado: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> book ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">INTEGER</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GENERATED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ALWAYS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IDENTITY</span></span>, title <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> pk_book PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> i_book_title <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> book (title);</code> </pre> <br><p>  Esta es realmente una excelente manera de iniciar r√°pidamente el desarrollo: solo tiene que iniciar la aplicaci√≥n. </p><br><p>  Pero no todo es tan color de rosa.  Todav√≠a hay muchas preguntas: </p><br><ul><li>  ¬øHibernate generar√° el nombre que necesito para la clave primaria? </li><li>  ¬øCrear√© el √≠ndice que necesito en el campo T√çTULO? </li><li>  ¬øSe generar√° un valor de ID √∫nico para cada registro? </li></ul><br><p>  Parece que no  Pero mientras el proyecto est√° en desarrollo, siempre puede tirar su base de datos actual y generar todo desde cero agregando las anotaciones necesarias al modelo. <br>  Entonces, la clase Libro en su forma final se ver√° as√≠: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"book"</span></span>, indexes = { <span class="hljs-meta"><span class="hljs-meta">@Index</span></span>(name = <span class="hljs-string"><span class="hljs-string">"i_book_title"</span></span>, columnList = <span class="hljs-string"><span class="hljs-string">"title"</span></span>) }) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span>(strategy = IDENTITY) <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; String title; }</code> </pre> <br><h2 id="no-vy-zaplatite-za-eto-chut-pozzhe">  Pero lo pagar√°s un poco m√°s tarde </h2><br><p>  Tarde o temprano, su aplicaci√≥n entra en producci√≥n y el esquema descrito dejar√° de funcionar: </p><br><blockquote>  En un sistema vivo y real, ya no puede simplemente recoger y soltar su base de datos, porque  se utilizan datos y pueden costar mucho dinero. </blockquote><p>  A partir de ahora, debe escribir scripts de migraci√≥n para cada cambio en el modelo de datos, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">por ejemplo, utilizando Flyway</a> .  Sin embargo, ¬øqu√© pasa con las clases de tus clientes?  Puede adaptarlos manualmente (lo que conducir√° a un doble trabajo) o pedirle a Hibernate que los genere (pero ¬øqu√© posibilidades hay de que los resultados de dicha generaci√≥n cumplan con las expectativas?).  Como resultado, puede esperar grandes problemas. </p><br><p>  Tan pronto como el c√≥digo entre en producci√≥n, es casi inmediatamente necesario hacer correcciones, y lo m√°s r√°pido posible. </p><br><p>  Y porque  la instalaci√≥n de las migraciones de la base de datos no est√° integrada en su l√≠nea de ensamblaje; deber√° instalar dichos parches manualmente bajo su propio riesgo.  No habr√° tiempo suficiente para regresar y hacer todo bien.  Solo es suficiente culpar a Hibernate por todos sus problemas. </p><br><p>  En cambio, podr√≠a haber actuado de manera bastante diferente desde el principio.  Es decir, use ruedas redondas en lugar de cuadradas. </p><br><h2 id="vpered-k-database-first">  Ir a la base de datos primero </h2><br><p>  La referencia y el control del esquema de datos se encuentra en la oficina de su DBMS.  Una base de datos es el √∫nico lugar donde se define un esquema, y ‚Äã‚Äãtodos los clientes tienen una <em>copia de</em> ese esquema, pero no al rev√©s.  Los datos est√°n en su base de datos, y no en su cliente, por lo que tiene sentido proporcionar control del esquema y su integridad exactamente donde est√°n los datos. </p><br><p>  Esta es la vieja sabidur√≠a, nada nuevo.  Las claves primarias y √∫nicas son buenas.  Las claves for√°neas son hermosas.  Verificar las restricciones en el lado de la base de datos es maravilloso.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La afirmaci√≥n (cuando finalmente se implementan) son</a> geniales. </p><br><p>  Y eso no es todo.  Por ejemplo, si est√° utilizando Oracle, puede especificar: </p><br><ul><li>  ¬øEn qu√© espacio de tabla est√° tu mesa? </li><li>  ¬øCu√°l es el significado de PCTFREE que tiene? </li><li>  ¬øCu√°l es el tama√±o de la secuencia de cach√©? </li></ul><br><p>  Quiz√°s todo esto no importa en sistemas peque√±os, pero en sistemas m√°s grandes no tiene que seguir el camino de los "grandes datos" hasta que exprima todos los jugos de su almacenamiento actual.  Ni un solo ORM que haya visto (incluido jOOQ) le permitir√° utilizar el conjunto completo de par√°metros DDL que proporciona su DBMS.  Los ORM ofrecen solo algunas herramientas para ayudarlo a escribir DDL. </p><br><p>  Finalmente, un esquema bien dise√±ado solo debe escribirse manualmente usando un DDL espec√≠fico de DBMS.  Todos los DDL generados autom√°ticamente son solo una aproximaci√≥n a esto. </p><br><h2 id="chto-naschet-klientskoy-modeli">  ¬øQu√© pasa con el modelo del cliente? </h2><br><p>  Como se mencion√≥ anteriormente, necesitar√° una cierta representaci√≥n del esquema de la base de datos en el lado del cliente.  No hace falta decir que esta vista debe estar sincronizada con el modelo real.  Como hacerlo  Por supuesto, usando generadores de c√≥digo. </p><br><p>  Todas las bases de datos proporcionan acceso a su metainformaci√≥n a trav√©s del buen SQL anterior.  Entonces, por ejemplo, puede obtener una lista de todas las tablas de diferentes bases de datos: </p><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- H2, HSQLDB, MySQL, PostgreSQL, SQL Server SELECT table_schema, table_name FROM information_schema.tables -- DB2 SELECT tabschema, tabname FROM syscat.tables -- Oracle SELECT owner, table_name FROM all_tables -- SQLite SELECT name FROM sqlite_master -- Teradata SELECT databasename, tablename FROM dbc.tables</span></span></code> </pre> <br><p>  Esas consultas (as√≠ como consultas similares para vistas, vistas materializadas y funciones de tabla) se ejecutan cuando se llama al m√©todo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DatabaseMetaData.getTables ()</a> de un controlador JDBC espec√≠fico, o en el m√≥dulo jOOQ-meta. </p><br><p>  A partir de los resultados de tales consultas, es relativamente f√°cil crear cualquier representaci√≥n del cliente del modelo de base de datos, independientemente de la tecnolog√≠a de acceso a datos utilizada. </p><br><ul><li>  Si usa JDBC o Spring, puede crear un grupo de constantes de cadena </li><li>  Si usa JPA, puede crear objetos usted mismo </li><li>  Si usa jOOQ, puede crear metamodelos jOOQ </li></ul><br><p>  Dependiendo de la cantidad de caracter√≠sticas que ofrece su API de acceso a datos (jOOQ, JPA u otra cosa), el metamodelo generado puede ser realmente rico y completo.  Como ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la funci√≥n de uni√≥n impl√≠cita en jOOQ 3.11, que se basa en metainformaci√≥n sobre las relaciones de claves for√°neas entre sus tablas</a> . </p><br><p>  Ahora, cualquier cambio en el esquema de la base de datos conducir√° autom√°ticamente a una actualizaci√≥n del c√≥digo del cliente. </p><br><p>  Imagine que necesita cambiar el nombre de una columna en una tabla: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> book <span class="hljs-keyword"><span class="hljs-keyword">RENAME</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> title <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> book_title;</code> </pre> <br><p>  ¬øEst√°s seguro de que quieres hacer este trabajo dos veces?  De ninguna manera  Simplemente confirme este DDL, ejecute la compilaci√≥n y disfrute del objeto actualizado: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"book"</span></span>, indexes = { <span class="hljs-comment"><span class="hljs-comment">// Would you have thought of this? @Index(name = "i_book_title", columnList = "book_title") }) class Book { @Id @GeneratedValue(strategy = IDENTITY) int id; @Column("book_title") String **bookTitle**; }</span></span></code> </pre> <br><p>  Adem√°s, el cliente recibido no necesita ser compilado cada vez (al menos hasta el pr√≥ximo cambio en el esquema de la base de datos), ¬°lo que ya puede ser una gran ventaja! <br>  La mayor√≠a de los cambios DDL tambi√©n son cambios sem√°nticos, no solo sint√°cticos.  Por lo tanto, es genial ver en el c√≥digo del cliente generado cu√°les son exactamente los √∫ltimos cambios en la base de datos afectados. </p><br><h2 id="pravda-vsegda-odna">  La verdad siempre esta sola </h2><br><p>  No importa qu√© tecnolog√≠a use, siempre debe haber un solo modelo, que es el est√°ndar para el subsistema.  O, al menos, debemos esforzarnos por esto y evitar confusiones en los negocios, donde el "est√°ndar" est√° en todas partes y en ninguna parte al mismo tiempo.  Hace que todo sea mucho m√°s f√°cil.  Por ejemplo, si est√° compartiendo archivos XML con alg√∫n otro sistema, probablemente est√© utilizando XSD.  Como metamodelo INFORMATION_SCHEMA jOOQ en formato XML: <a href="">https://www.jooq.org/xsd/jooq-meta-3.10.0.xsd</a> </p><br><ul><li>  XSD se entiende bien </li><li>  XSD describe perfectamente el contenido XML y permite la validaci√≥n en todos los idiomas del cliente </li><li>  XSD hace que el control de versiones sea f√°cil y compatible con versiones anteriores </li><li>  XSD se puede convertir en c√≥digo Java usando XJC </li></ul><br><p>  Prestamos especial atenci√≥n al √∫ltimo punto.  Cuando nos comunicamos con un sistema externo a trav√©s de mensajes XML, debemos estar seguros de la validez de los mensajes.  Y es realmente muy f√°cil de hacer con cosas como JAXB, XJC y XSD.  Ser√≠a una locura pensar en la idoneidad del enfoque Java-first en este caso.  El XML generado en base a los objetos XML ser√° de baja calidad, estar√° pobremente documentado y ser√° dif√≠cil de extender.  Y si hay un SLA para dicha interacci√≥n, se sentir√° decepcionado. </p><br><p>  Honestamente, esto es similar a lo que est√° sucediendo con las diversas API de JSON ahora, pero esta es una historia completamente diferente ... </p><br><h3 id="chem-bazy-dannyh-huzhe">  ¬øQu√© empeora las bases de datos? </h3><br><p>  Cuando se trabaja con una base de datos, todo es igual aqu√≠.  La base de datos posee los datos y tambi√©n debe ser el maestro del esquema de datos.  Todas las modificaciones de esquema deben realizarse directamente a trav√©s de DDL para actualizar la referencia. </p><br><p>  Despu√©s de actualizar la referencia, todos los clientes deben actualizar sus ideas sobre el modelo.  Algunos clientes pueden escribirse en Java utilizando jOOQ y / o Hibernate o JDBC.  Se pueden escribir otros clientes en Perl (buena suerte para ellos) o incluso en C #.  No importa  El modelo principal est√° en la base de datos.  Si bien los modelos creados con ORM son de baja calidad, no est√°n bien documentados y son dif√≠ciles de ampliar. </p><br><p>  Por lo tanto, no haga esto, y desde el comienzo del desarrollo.  En cambio, comience con una base de datos.  Cree una canalizaci√≥n automatizada de CI / CD.  Use la generaci√≥n de c√≥digo para generar autom√°ticamente un modelo de base de datos para clientes para cada compilaci√≥n.  Y deja de preocuparte, todo estar√° bien.  Todo lo que se requiere es un peque√±o esfuerzo inicial para configurar la infraestructura, pero como resultado obtendr√° una ganancia en el proceso de desarrollo para el resto de su proyecto en los pr√≥ximos a√±os. </p><br><p>  No gracias </p><br><h2 id="poyasneniya">  Explicaciones </h2><br><p>  Para consolidar: este art√≠culo de ninguna manera afirma que el modelo de base de datos debe aplicarse a todo su sistema (√°rea tem√°tica, l√≥gica de negocios, etc.).  Mis declaraciones consisten solo en el hecho de que el c√≥digo del cliente que interact√∫a con la base de datos debe ser solo una <em>representaci√≥n</em> del esquema de la base de datos, pero no definirlo y formarlo de ninguna manera. </p><br><p>  En las arquitecturas de dos niveles que todav√≠a tienen un lugar para estar, el esquema de la base de datos puede ser la √∫nica fuente de informaci√≥n sobre el modelo de su sistema.  Sin embargo, en la mayor√≠a de los sistemas, veo el nivel de acceso a datos como un "subsistema" que encapsula un modelo de base de datos.  Algo asi. </p><br><h2 id="isklyucheniya">  Excepciones </h2><br><p>  Como en cualquier otra buena regla, la nuestra tambi√©n tiene sus excepciones (y ya advert√≠ que el primer enfoque de la base de datos y la generaci√≥n de c√≥digo no siempre es la opci√≥n correcta).  Estas excepciones (quiz√°s la lista no est√° completa): </p><br><ul><li>  Cuando el circuito no se conoce de antemano y necesita ser investigado.  Por ejemplo, usted es un proveedor de una herramienta para ayudar a los usuarios a navegar cualquier esquema.  Por supuesto, no puede haber generaci√≥n de c√≥digo.  Pero, en cualquier caso, debe lidiar con la base de datos en s√≠ y su esquema. </li><li>  Cuando para alguna tarea necesita crear un esquema sobre la marcha.  Esto puede ser similar a una de las variaciones del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">patr√≥n Entity-attribute-value</a> , como  no tienes un patr√≥n claramente definido.  Adem√°s, no hay certeza de que RDBMS en este caso sea la elecci√≥n correcta. </li></ul><br><p>  La peculiaridad de estas excepciones es que rara vez se encuentran en la vida silvestre.  En la mayor√≠a de los casos, cuando se usan bases de datos relacionales, el esquema se conoce de antemano y es el "est√°ndar" de su modelo, y los clientes deben trabajar con una copia de este modelo generada usando generadores de c√≥digo. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413597/">https://habr.com/ru/post/es413597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413585/index.html">Colaboraci√≥n de Hansen: bien o nada (parte 2)</a></li>
<li><a href="../es413587/index.html">Evaluaci√≥n de la cobertura de prueba de un proyecto Java usando Apache Ignite como ejemplo</a></li>
<li><a href="../es413589/index.html">Revisi√≥n de c√≥digo: experiencia exitosa</a></li>
<li><a href="../es413591/index.html">Rob√≥tica industrial: ¬°57 a√±os! Recordemos de d√≥nde viene el conteo</a></li>
<li><a href="../es413593/index.html">Continuando con la conquista del fondo del mar. Microsoft y su proyecto de centro de datos submarino Natick 2</a></li>
<li><a href="../es413599/index.html">Hay S.L.O.N.a en partes. Introducir ITAM y no ahogarse</a></li>
<li><a href="../es413601/index.html">¬øEl centro de datos de Microsoft calienta el mar?</a></li>
<li><a href="../es413603/index.html">Generaci√≥n de C√≥digo en Uber</a></li>
<li><a href="../es413605/index.html">Preg√∫ntele a Ethan: ¬øQu√© sucede cuando una estrella atraviesa el sistema solar?</a></li>
<li><a href="../es413607/index.html">Resumen de tecnolog√≠a financiera: las monedas digitales no amenazan el sistema financiero de la Federaci√≥n de Rusia; PayPal descubri√≥ cu√°nto gastan los jugadores en juegos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>