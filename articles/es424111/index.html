<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õπüèº üéÖüèΩ üßòüèø Ondas de contratos inteligentes. Primera experiencia ‚úä üßñüèª ‚è™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En abril de 2018, el equipo de Waves present√≥ sus contratos inteligentes no completos. 

 Un poco m√°s tarde, cuando se anunci√≥ el hackathon de Waves, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ondas de contratos inteligentes. Primera experiencia</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424111/"><img src="https://habrastorage.org/webt/ip/ma/mp/ipmampafkwgxtl86xk0emyupu9u.png" alt="imagen"><br><br>  En abril de 2018, el equipo de Waves present√≥ sus contratos inteligentes no completos. <br><br>  Un poco m√°s tarde, cuando se anunci√≥ el hackathon de Waves, decid√≠ que era hora de sumergirse en la nueva tecnolog√≠a.  Debajo del corte, encontrar√° informaci√≥n detallada sobre el contrato inteligente que gan√≥ el tercer lugar en el hackathon. <br><br>  El art√≠culo ser√° √∫til para que los desarrolladores implementen sus propios contratos inteligentes y se familiaricen con la tecnolog√≠a. <br><a name="habracut"></a><br><h4>  Idea </h4><br>  La idea del proyecto es distribuir autom√°ticamente los salarios de los desarrolladores de software que usan Github, en proporci√≥n al trabajo realizado.  La tarea principal, la tarea que el contrato inteligente resuelve al mismo tiempo, elimina la necesidad de confiar en el programa de distribuci√≥n de dinero e incluso permite al usuario sin habilidades de programaci√≥n verificar la distribuci√≥n correcta de los fondos antes de transferir dinero. <br><br><h4>  Pila de tecnolog√≠a </h4><br>  Html y JavaScript ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">biblioteca</a> Node.js Waves), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥digo</a> abierto en GitHub y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">demostraci√≥n del proyecto</a> en Firebase Hosting <br><br><h4>  El proceso </h4><br><ol><li>  El usuario selecciona el repositorio de GitHub y determina la cantidad total de salarios. </li><li>  El usuario realiza un pago de 0.01 Waves (aproximadamente 0.02 d√≥lares) para guardar datos en la cadena de bloques y crear un contrato inteligente </li><li>  El usuario verifica la exactitud de los datos y luego transfiere el monto de los salarios a la direcci√≥n del contrato inteligente </li><li>  Los salarios se comparten entre los desarrolladores. </li></ol><br><h4>  Desarrollo </h4><br>  El mejor punto de entrada para un desarrollador novato es la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">consola de demostraci√≥n</a> , que contiene un buen ejemplo y una consola para probar el c√≥digo.  Durante el desarrollo, es mejor usar una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">blockchain de prueba</a> , donde puede obtener 10 ondas de prueba gratuitas con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un solo clic</a> .  Aunque Google todav√≠a no encuentra muchos ejemplos debido a la novedad de la tecnolog√≠a, los contratos inteligentes est√°n bien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentados</a> y contienen toda la informaci√≥n necesaria. <br><br>  La biblioteca NodeJs (1.4.0) ya funciona bien en los navegadores (con la excepci√≥n de crear Alias), pero, desafortunadamente, NO es compatible con Google Functions o React Native todav√≠a (los desarrolladores de Waves <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">prometen</a> solucionarlo pronto). <br><br><h4>  Contrato inteligente </h4><br>  Se crea un contrato inteligente para una cuenta y verifica cada acci√≥n con esta cuenta (con la excepci√≥n de las transferencias de dinero entrantes): <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> signature = base58<span class="hljs-string"><span class="hljs-string">'${currentWallet.keyPair.publicKey}'</span></span>; match tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> tx:<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TransferTransaction</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> employerAddress = addressFromPublicKey(tx.senderPk); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dateKey = toBase58String(addressFromRecipient(tx.recipient).bytes); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> salary = extract(getLong(employerAddress, dateKey)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((salary == tx.amount) &amp;&amp; sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], signature)) then <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><h4>  An√°lisis inteligente de contrato l√≠nea por l√≠nea </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> signature = base58<span class="hljs-string"><span class="hljs-string">'${currentWallet.keyPair.publicKey}'</span></span>;</code> </pre><br>  Aqu√≠ guardamos la clave p√∫blica de la billetera (su JavaScript debe contener la variable currentWallet creada usando el comando Waves.Seed.create ()), de modo que solo la cuenta de contrato inteligente de la billetera (Smart Rewarding Project en nuestro caso) pueda transferir fondos. <br><br><pre> <code class="javascript hljs">match tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> tx:<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TransferTransaction</span></span></span><span class="hljs-function"> =&gt;</span></span> {some validations} <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br>  Esta es la construcci√≥n b√°sica de cualquier contrato inteligente de Waves. Nos dice que este contrato proh√≠be cualquier actividad que no sea la transferencia de fondos (TransferTransaction).  Por lo tanto, despu√©s de crear un contrato, es imposible cambiar los datos de los desarrolladores (DataTransaction) o cambiar el contrato inteligente en s√≠ (SetScript). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> employerAddress = addressFromPublicKey(tx.senderPk);</code> </pre><br>  Utiliza el m√©todo base addressFromPublicKey de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">biblioteca</a> integrada para obtener la direcci√≥n del creador de la solicitud de su clave p√∫blica. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dateKey = toBase58String(addressFromRecipient(tx.recipient).bytes);</code> </pre><br>  El m√©todo base addressFromRecipient obtiene la direcci√≥n del destinatario de los fondos. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> salary = extract(getLong(employerAddress, dateKey));</code> </pre><br>  El m√©todo b√°sico getLong nos proporciona datos almacenados en la cadena de bloques en la direcci√≥n del creador de la solicitud, que es el monto del salario del desarrollador.  El contrato puede acceder a los datos almacenados en la cadena de bloques de Waves (y NO puede acceder a los datos ubicados en ning√∫n sitio web o servidor de terceros). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((salary == tx.amount) &amp;&amp; sigVerify(tx.bodyBytes, tx.proofs[<span class="hljs-number"><span class="hljs-number">0</span></span>], signature)) then <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  Aqu√≠ es donde se verifica la cantidad correcta y la firma.  Verdadero significa que se permitir√° la transacci√≥n, y falso significa que la transacci√≥n ser√° denegada.  Por lo tanto, durante cualquier transferencia de dinero desde esta cuenta, se verifica que el dinero se enviar√° solo a la billetera del desarrollador y en la cantidad ya almacenada en la cadena de bloques, en el formato de un par de claves f√°cilmente legible (direcci√≥n como clave y cantidad como valor), lo que permite conf√≠e en el programa, verifique todos los datos usted mismo durante 5-10 segundos antes de transferir los salarios. <br><br>  Demostraci√≥n en l√≠nea del proyecto en la cadena de bloques de prueba, disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠</a> puedes ver el c√≥digo del proyecto. <br><br>  Espero que el art√≠culo sea informativo y le sea √∫til para escribir su primer contrato inteligente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424111/">https://habr.com/ru/post/es424111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424099/index.html">Determinar la madurez de una sand√≠a usando Keras: un ciclo completo, de una idea a un programa en Google Play</a></li>
<li><a href="../es424103/index.html">Silicon Valley ha sido "imperdonable" para sus empleados desde la d√©cada de 1970</a></li>
<li><a href="../es424105/index.html">La NASA sabe c√≥mo hacer que Marte sea verde nuevamente</a></li>
<li><a href="../es424107/index.html">Ha pasado un a√±o desde el vac√≠o en el almacenamiento de la red dom√©stica My Cloud de WD</a></li>
<li><a href="../es424109/index.html">VSCE # 2: Podcast de emprendedores de medios</a></li>
<li><a href="../es424113/index.html">Proceso de dise√±o, investigaci√≥n y b√∫squeda de empleo.</a></li>
<li><a href="../es424115/index.html">Casos de uso o falta de equilibradores de carga</a></li>
<li><a href="../es424119/index.html">¬øHubo un Scrum *?</a></li>
<li><a href="../es424121/index.html">Crear una funci√≥n desencadenante en pgModeler</a></li>
<li><a href="../es424127/index.html">C√≥mo hacer amigos Ovirt y Let's Encrypt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>