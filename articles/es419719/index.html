<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèΩ üë®üèæ‚ÄçüöÄ üë∑ [marcador] 23 recomendaciones para proteger aplicaciones Node.js üìõ üïö üë†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En estos d√≠as, los servicios web est√°n constantemente expuestos a una variedad de ataques. Por lo tanto, la seguridad es algo para recordar en todas l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[marcador] 23 recomendaciones para proteger aplicaciones Node.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/419719/">  En estos d√≠as, los servicios web est√°n constantemente expuestos a una variedad de ataques.  Por lo tanto, la seguridad es algo para recordar en todas las etapas del ciclo de vida del proyecto.  Los autores del material, cuya traducci√≥n publicamos hoy, mantienen un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio</a> en GitHub, que contiene alrededor de 80 recomendaciones para proteger las aplicaciones que se ejecutan en la plataforma Node.js.  Este material, basado en muchas publicaciones de seguridad, tiene m√°s de dos docenas de recomendaciones sobre Node.js y algunos consejos generales.  Adem√°s, este material cubre las 10 vulnerabilidades principales de la lista del proyecto OWASP. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/un/rv/yq/unrvyqhru9dijyht3zx9k9x4tlg.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">1. Use las reglas para el linter, destinadas a verificar la seguridad del c√≥digo</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recomendaciones </h3><br>  Durante el desarrollo, use un complemento orientado a la seguridad para el linter, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">eslint-plugin-security</a> .  Esto le permite identificar vulnerabilidades y problemas de seguridad muy pronto, al momento de escribir el c√≥digo apropiado.  Este enfoque ayuda a encontrar debilidades en la seguridad del programa.  Entre ellos est√°n el uso del comando <code>eval</code> , la invocaci√≥n de procesos secundarios, la importaci√≥n de m√≥dulos con la transferencia al comando correspondiente de algo diferente de un literal de cadena (digamos, una cierta cadena formada en base a los datos transmitidos al servidor por el usuario). <br><br>  ‚Üí <a href="">Aqu√≠ hay</a> material √∫til sobre las reglas de linter <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Adam Baldwin</a> dice lo siguiente sobre linting: ‚ÄúLinter no debe ser solo una herramienta que siga meticulosamente las reglas con respecto al n√∫mero de espacios utilizados, punto y coma, y ‚Äã‚Äãel uso del comando eval.  ESLint proporciona al desarrollador una plataforma poderosa que puede detectar y eliminar una amplia gama de patrones potencialmente peligrosos en el c√≥digo.  Estamos hablando, por ejemplo, de expresiones regulares, sobre la comprobaci√≥n de la entrada del usuario, etc.  Creo que linter ofrece a los desarrolladores que est√°n preocupados por los problemas de seguridad una herramienta nueva y poderosa a la que vale la pena prestarle atenci√≥n ". <br><br><h3>  Posibles problemas </h3><br>  Lo que parece una falla de seguridad menor durante el desarrollo se est√° convirtiendo en una grave vulnerabilidad en la producci√≥n.  Adem√°s, si todos los desarrolladores de proyectos no siguen reglas de seguridad uniformes cuando trabajan con c√≥digo, esto puede generar vulnerabilidades en √©l o, por ejemplo, la penetraci√≥n de datos confidenciales en repositorios p√∫blicos. <br><br><h2>  <font color="#3AC1EF">2. Limite el n√∫mero de solicitudes simult√°neas del servidor</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/49a/a03/c6b49aa0355cb99de053d330a5305b15.png"></div><br><h3>  Recomendaciones </h3><br>  Los ataques DoS son muy populares entre los ciberdelincuentes y son relativamente f√°ciles de llevar a cabo.  Puede implementar un sistema para limitar la cantidad de solicitudes a una aplicaci√≥n que utiliza un servicio externo, como un equilibrador de carga en la nube, un firewall en la nube, un servidor nginx o, para aplicaciones peque√±as que no son cr√≠ticas, usar middleware para limitar la cantidad de solicitudes como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">express-rate -limit</a> . <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material sobre la implementaci√≥n del sistema para limitar la frecuencia de las solicitudes al servidor <br><br><h3>  Posibles problemas </h3><br>  Una aplicaci√≥n que no proporciona un sistema para limitar el n√∫mero de solicitudes simult√°neas puede ser atacada, lo que conducir√° a su falla.  Esto se expresa en el hecho de que los usuarios de dicha aplicaci√≥n tendr√°n dificultades para trabajar con ella o no podr√°n interactuar con ella en absoluto. <br><br><h2>  <font color="#3AC1EF">3. Eliminar informaci√≥n confidencial de los archivos de configuraci√≥n o cifrarlos</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  Recomendaciones </h3><br>  Nunca almacene datos confidenciales en texto plano en archivos de configuraci√≥n o en c√≥digo.  En su lugar, use sistemas de gesti√≥n de datos confidenciales, como los productos Vault o los sistemas Kubernetes / Docker Secrets, o use variables de entorno para almacenar dichos datos.  Los datos confidenciales almacenados en el sistema de control de versiones deben estar encriptados, se deben tomar medidas para su almacenamiento y uso seguro.  Entre tales medidas est√°n el uso de claves din√°micas, el uso de fechas de vencimiento de contrase√±as, auditor√≠as de seguridad, etc.  Utilice los sistemas para verificar el c√≥digo antes de confirmarlo o antes de enviarlo al repositorio para evitar el env√≠o accidental de datos confidenciales al repositorio p√∫blico. <br><br>  ‚Üí <a href="">Aqu√≠ hay</a> material sobre la gesti√≥n de datos confidenciales <br><br><h3>  Posibles problemas </h3><br>  Incluso si el c√≥digo se almacena en un repositorio cerrado, un d√≠a, por error, puede estar disponible p√∫blicamente.  En este punto, todos los datos confidenciales almacenados en √©l pasar√°n a ser de dominio p√∫blico.  Como resultado, el acceso de terceros al repositorio con el c√≥digo inadvertidamente los llevar√° a obtener acceso a los sistemas asociados con √©l (bases de datos, API, servicios, etc.). <br><br><h2>  <font color="#3AC1EF">4. Prevenir vulnerabilidades de inyecci√≥n de c√≥digo</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recomendaciones </h3><br>  Para evitar inyecciones SQL / NoSQL y otros ataques similares, use siempre bibliotecas ORM / ODM o mecanismos DBMS destinados a la limpieza de datos o al soporte de consultas parametrizadas con nombre o indexadas, y verifique lo que viene del usuario.  Nunca use, para incrustar ciertos valores en textos de consulta, solo cadenas de plantilla JavaScript o concatenaci√≥n de cadenas, ya que este enfoque abre su aplicaci√≥n a una amplia gama de vulnerabilidades.  Todas las bibliotecas respetables para Node.js utilizadas para trabajar con datos (por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sequelize</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Knex</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mangosta</a> ) contienen protecci√≥n incorporada contra ataques mediante la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">inyecci√≥n de</a> c√≥digo. <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material sobre prevenci√≥n de inyecci√≥n usando bibliotecas ORM / ODM <br><br><h3>  Posibles problemas </h3><br>  El uso de datos no verificados y sin limpiar recibidos del usuario en consultas puede conducir a un ataque al introducir un operador cuando se trabaja con una base de datos NoSQL como MongoDB.  Si no utiliza un sistema de limpieza de datos o una biblioteca ORM cuando trabaja con una base de datos SQL, esto dar√° lugar a la posibilidad de un ataque por inyecci√≥n SQL, lo que crea un gran agujero de seguridad en la aplicaci√≥n. <br><br><h2>  <font color="#3AC1EF">5. Evite los ataques DoS estableciendo expl√≠citamente las condiciones para la finalizaci√≥n anormal del proceso.</font> </h2><br><h3>  Recomendaciones </h3><br>  El proceso Nodo se bloquea cuando se produce un error no controlado.  Pero en muchas recomendaciones que reflejan las mejores pr√°cticas para Node, se recomienda que los procesos se terminen incluso cuando se haya interceptado y procesado un error.  Express, por ejemplo, se bloquear√° cuando ocurra cualquier error asincr√≥nico, a menos que las rutas est√©n envueltas en expresiones <code>catch</code> .  Este hecho ofrece a los atacantes una oportunidad muy atractiva.  Ellos, habiendo descubierto que cuando llega una determinada solicitud, el proceso se bloquea, comienzan a enviarle esas solicitudes.  No hay ninguna recomendaci√≥n que resuelva este problema de una sola vez, sin embargo, algunos trucos pueden mitigarlo.  Entonces, al final del proceso debido a un error no manejado, debe notificar al administrador, d√°ndole a dicha notificaci√≥n la m√°s alta prioridad de importancia.  Es necesario verificar lo que llega al proceso en las solicitudes y evitar situaciones de terminaci√≥n anormal del proceso debido a solicitudes que, accidental o intencionalmente, se forman incorrectamente.  Todas las rutas deben estar envueltas en expresiones <code>catch</code> y el sistema debe estar configurado para que, si la solicitud fue la causa del error, el proceso no se bloquee (a diferencia de lo que sucede a nivel de aplicaci√≥n global). <br><br><h3>  Posibles problemas </h3><br>  Analicemos la siguiente situaci√≥n.  Hay muchas aplicaciones de Node.js.  ¬øQu√© sucede si comenzamos a enviarles solicitudes POST con JSON vac√≠o como cuerpo de la solicitud?  Esto har√° que muchas de estas aplicaciones se bloqueen. <br><br>  Ahora, si tuvi√©ramos que desempe√±ar el papel de ciberdelincuentes, para evitar que las aplicaciones se bloqueen, ser√≠a suficiente continuar envi√°ndoles solicitudes similares. <br><br><h2>  <font color="#3AC1EF">6. Configure los encabezados de respuesta HTTP para aumentar la seguridad del proyecto</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  Recomendaciones </h3><br>  Una aplicaci√≥n debe usar encabezados HTTP orientados a la seguridad para evitar que los atacantes recurran a t√©cnicas de ataque comunes como scripting entre sitios (XSS), clickjacking y otros.  Personalizar los encabezados es f√°cil con m√≥dulos especiales como el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">casco</a> . <br><br>  ‚Üí <a href="">Aqu√≠ hay</a> material sobre el uso de encabezados seguros <br><br><h3>  Posibles problemas </h3><br>  Si no se utilizan encabezados HTTP seguros, los atacantes podr√°n llevar a cabo ataques contra los usuarios de sus aplicaciones, lo que genera enormes vulnerabilidades. <br><br><h2>  <font color="#3AC1EF">7. Continuamente, autom√°ticamente, verifique sus proyectos para el uso de dependencias vulnerables en ellos</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/810/c93/fcf/810c93fcf88a0b68e15d345fccc1b597.png"></div><br><h3>  Recomendaciones </h3><br>  En el ecosistema NPM, los proyectos con muchas dependencias son muy comunes.  Las dependencias siempre deben controlarse, dado el descubrimiento de nuevas vulnerabilidades.  Use herramientas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">npm audit</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nsp</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">snyk</a> para detectar, monitorear y corregir dependencias vulnerables.  Incruste estas herramientas en su sistema de integraci√≥n continua.  Esto le permitir√° detectar dependencias vulnerables antes de que entren en producci√≥n. <br><br>  ‚Üí <a href="">Aqu√≠ hay</a> material sobre seguridad de dependencia del proyecto <br><br><h3>  Posibles problemas </h3><br>  Un atacante puede determinar el marco web utilizado en el proyecto y realizar ataques a todas las vulnerabilidades conocidas. <br><br><h2>  <font color="#3AC1EF">8. Intente no usar el m√≥dulo criptogr√°fico est√°ndar Node.js para el procesamiento de contrase√±as, use Bcrypt en su lugar</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recomendaciones </h3><br>  Las contrase√±as u otros datos confidenciales (claves API, por ejemplo) deben almacenarse proces√°ndolos con funciones criptogr√°ficas utilizando "salt", como Bcrypt.  Vale la pena usar exactamente algo similar, y no el m√≥dulo <code>crypto</code> est√°ndar Node.js por razones de seguridad y rendimiento. <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material sobre Bcrypt <br><br><h3>  Posibles problemas </h3><br>  Las contrase√±as o algunos datos confidenciales que se almacenan sin la aplicaci√≥n de medidas apropiadas para protegerlos son vulnerables a los ataques de fuerza bruta y ataques de diccionario, que, como resultado, conducen a la divulgaci√≥n de dichos datos. <br><br><h2>  <font color="#3AC1EF">9. Utilice sistemas de escape de caracteres en datos HTML, JS y CSS enviados al usuario</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b7/846/638/0b7846638c9f820198235d61d8a2d0f0.png"></div><br><h3>  Recomendaciones </h3><br>  Si algunos datos se env√≠an al navegador del usuario desde una fuente no confiable, entonces, incluso si simplemente se deben mostrar, dichos datos pueden ser un c√≥digo que se puede ejecutar.  Esto se conoce com√∫nmente como scripting entre sitios (XSS).  Puede reducir el riesgo de que tales ataques sean posibles utilizando bibliotecas especiales que procesan datos para que no puedan ejecutarse.  Esto se llama codificaci√≥n o protecci√≥n de datos. <br><br>  ‚Üí <a href="">Aqu√≠ hay</a> material sobre c√≥mo proteger la salida <br><br><h3>  Posibles problemas </h3><br>  Si no le importa el blindaje de datos, un atacante puede, por ejemplo, guardar c√≥digo JavaScript malicioso en su base de datos, que puede transmitirse a los clientes sin cambios y lanzarse. <br><br><h2>  <font color="#3AC1EF">10. Verifique los datos JSON que llegan al servidor</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d5/56d/a15/9d556da155eb3922f32262c33522f797.png"></div><br><h3>  Recomendaciones </h3><br>  Controle el contenido de los cuerpos de las solicitudes entrantes, verificando si corresponden a lo que espera ver en dichas solicitudes.  Si la solicitud no se ve como se esperaba, deje de procesarla r√°pidamente.  Para evitar la operaci√≥n de escribir el c√≥digo de verificaci√≥n de solicitud para cada ruta, puede usar herramientas JSON livianas para la validaci√≥n de datos, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">jsonschema</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">joi</a> . <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material para verificar los datos JSON entrantes <br><br><h3>  Posibles problemas </h3><br>  Si el servidor acepta cordialmente cualquier solicitud sin examinarla minuciosamente, esto aumenta enormemente la superficie de ataque de la aplicaci√≥n e inspira a los atacantes a tratar de encontrar muchas de ellas que conducen a un "bloqueo" del sistema. <br><br><h2>  <font color="#3AC1EF">11. Mantener tokens JWT en la lista negra</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recomendaciones </h3><br>  Cuando se usan tokens JWT (por ejemplo, si trabaja con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Passport.js</a> ), de manera predeterminada, no existe un mecanismo est√°ndar para revocar los privilegios de acceso al sistema para tokens ya emitidos.  Incluso si encuentra que cierto usuario est√° haciendo algo obviamente anormal, no tiene forma, a trav√©s del mecanismo de token, de bloquear su acceso al sistema, siempre que tenga un token v√°lido.  Este problema puede mitigarse implementando una lista negra de tokens no confiables, cuya validaci√≥n se realiza en cada solicitud. <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material sobre los tokens JWT en la lista negra <br><br><h3>  Posibles problemas </h3><br>  Un atacante puede usar las fichas que caen en las manos equivocadas.  Podr√° acceder a la aplicaci√≥n y hacerse pasar por un usuario com√∫n: el propietario del token. <br><br><h2>  <font color="#3AC1EF">12. Limite el n√∫mero de intentos de inicio de sesi√≥n</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recomendaciones </h3><br>  En aplicaciones basadas en express, para protegerse contra ataques de fuerza bruta y ataques de diccionario, vale la pena usar el middleware apropiado, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">express-brute</a> .  Del mismo modo, debe proteger rutas cr√≠ticas como <code>/admin</code> o <code>/login</code> .  La protecci√≥n debe basarse en el an√°lisis de las propiedades de la consulta, como el nombre de usuario utilizado en la consulta u otros identificadores, como los par√°metros del cuerpo de la consulta. <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material para limitar el n√∫mero de intentos de inicio de sesi√≥n <br><br><h3>  Posibles problemas </h3><br>  Si la aplicaci√≥n no limita el n√∫mero de intentos de inicio de sesi√≥n, el atacante puede enviar autom√°ticamente un n√∫mero ilimitado de solicitudes de inicio de sesi√≥n a su sistema, por ejemplo, intentando obtener acceso a una cuenta privilegiada. <br><br><h2>  <font color="#3AC1EF">13. Ejecute Node.js como usuario no root</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c0/dca/b4d/4c0dcab4d9a0d1fce8fcaf8b6abbdcce.png"></div><br><h3>  Recomendaciones </h3><br>  Un escenario extremadamente com√∫n es cuando Node.js se ejecuta como usuario root con privilegios ilimitados.  Por ejemplo, as√≠ es como todo est√° configurado de forma predeterminada en los contenedores Docker.  Se recomienda crear un usuario que no tenga privilegios de root, e incrustarlo en la imagen de Docker, o iniciar el proceso en nombre de ese usuario llamando al contenedor con el indicador de <code>-u username</code> . <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material sobre el lanzamiento de Node.js como usuario no root <br><br><h3>  Posibles problemas </h3><br>  Si Node.js se ejecuta bajo la cuenta de usuario root, entonces un atacante que pudo ejecutar un script en el servidor tiene posibilidades ilimitadas en la m√°quina local.  Digamos que puede cambiar la configuraci√≥n de <code>iptable</code> y redirigir el tr√°fico a su propia computadora. <br><br><h2>  <font color="#3AC1EF">14. Limite la cantidad de datos transmitidos en las solicitudes utilizando un servidor proxy inverso o middleware</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d5/56d/a15/9d556da155eb3922f32262c33522f797.png"></div><br><h3>  Recomendaciones </h3><br>  Cuanto mayor sea la cantidad de datos en el cuerpo de la solicitud, m√°s dif√≠cil ser√° para un servidor de un solo subproceso procesar dicha solicitud.  El uso de solicitudes grandes le da al atacante la oportunidad de inundar el servidor con trabajo innecesario sin enviarle una gran cantidad de solicitudes (es decir, sin realizar un ataque DoS / DDoS).  Puede reducir el riesgo de tales ataques limitando el tama√±o de los cuerpos de las solicitudes entrantes en un determinado sistema de borde (en un firewall o en un equilibrador de carga), o configurando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">body-parser</a> express para recibir solo paquetes que contengan una peque√±a cantidad de datos. <br><br>  ‚Üí <a href="">Aqu√≠ hay</a> material sobre la limitaci√≥n de la cantidad de datos transmitidos en las solicitudes <br><br><h3>  Posibles problemas </h3><br>  Si no limita la cantidad de datos transmitidos en las solicitudes, un atacante puede cargar la aplicaci√≥n procesando solicitudes grandes.  En este momento, no podr√° resolver las tareas para las que est√° dise√±ado.  Esto conduce a un bajo rendimiento y hace que la aplicaci√≥n sea vulnerable a los ataques DoS. <br><br><h2>  <font color="#3AC1EF">15. Evite usar la funci√≥n eval en JavaScript</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70a/580/560/70a580560fba67e09f87bdd6c5ecda04.png"></div><br><h3>  Recomendaciones </h3><br>  La funci√≥n <code>eval</code> es incorrecta porque le permite ejecutar c√≥digo JS arbitrario que se le pasa durante la ejecuci√≥n del programa.  Adem√°s, est√° lejos de ser solo que este c√≥digo puede ralentizar la aplicaci√≥n.  Esta funci√≥n plantea un grave riesgo de seguridad, ya que el c√≥digo JS malicioso enviado al servidor por un atacante podr√≠a entrar en √©l. <br><br>  Adem√°s, debe evitar el <code>new Function</code> constructor de <code>new Function</code> .  Las funciones <code>setTimeout</code> y <code>setInterval</code> nunca necesitan pasar c√≥digo JS generado din√°micamente. <br><br>  ‚Üí <a href="">Aqu√≠ est√° el</a> material sobre eval <br><br><h3>  Posibles problemas </h3><br>  Si alguien encuentra una manera de transferir c√≥digo JS malicioso, en forma de texto, una funci√≥n de <code>eval</code> o alg√∫n otro motor JS similar, tendr√° acceso completo a la p√°gina, a todo lo que se puede hacer usando JavaScript.  Esta vulnerabilidad a menudo se asocia con ataques XSS. <br><br><h2>  <font color="#3AC1EF">16. No sobrecargue las aplicaciones Node.js de subproceso √∫nico con expresiones regulares maliciosas</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/49a/a03/c6b49aa0355cb99de053d330a5305b15.png"></div><br><h3>  Recomendaciones </h3><br>  Las expresiones regulares, aunque convenientes, representan una amenaza para las aplicaciones JavaScript en general, y en particular para la plataforma Node.js.  Procesar con expresi√≥n regular lo que vino del usuario puede crear una gran carga en el procesador.  Por ejemplo, procesar expresiones regulares puede ser tan ineficiente que verificar diez palabras puede bloquear el ciclo de eventos durante varios segundos y sobrecargar el procesador.  Por lo tanto, es mejor usar paquetes de terceros para verificar datos de cadena, como <a href="">validator.js</a> , en lugar de escribir sus propias expresiones regulares.  Puede usar el paquete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">safe-regex</a> para detectar patrones de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">expresiones regulares</a> vulnerables. <br><br>  ‚Üí <a href="">Aqu√≠ est√°</a> el material anti-malware regex <br><br><h3>  Posibles problemas </h3><br>  Las expresiones regulares mal escritas pueden estar sujetas a un tipo especial de ataques DoS, durante el cual el bucle de eventos est√° completamente bloqueado.  Por ejemplo, en noviembre de 2017, se descubri√≥ que el paquete de <code>moment</code> popular era vulnerable a tales ataques. <br><br><h2>  <font color="#3AC1EF">17. Evite cargar m√≥dulos usando variables</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recomendaciones </h3><br>  Evite importar archivos cuya ruta se especifique como par√°metro, en funci√≥n de las consideraciones seg√∫n las cuales este par√°metro se puede establecer en funci√≥n de los datos del usuario.  Esta regla se puede ampliar para incluir aqu√≠ y, en general, el acceso a los archivos (usando <code>fs.readFile()</code> ) y el acceso a cualquier otro recurso importante usando los par√°metros recibidos del usuario.  El uso de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">eslint-plugin-security</a> hace posible detectar estos patrones inseguros muy temprano. <br><br>  ‚Üí <a href="">Aqu√≠ hay</a> material sobre la carga segura del m√≥dulo <br><br><h3>  Posibles problemas </h3><br>  Los datos enviados al servidor por un atacante pueden estar en la configuraci√≥n que es responsable de importar ciertos archivos, entre los cuales puede haber un archivo malicioso que se carg√≥ previamente en el servidor.  Estos datos tambi√©n se pueden usar para acceder a los archivos del sistema que ya est√°n en la computadora. <br><br><h2> <font color="#3AC1EF">18.     </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70a/580/560/70a580560fba67e09f87bdd6c5ecda04.png"></div><br><h3>  </h3><br>      ,        (,  ),  ¬´¬ª,         .    ,    ( <code>cluster.fork()</code> ),     npm-,   . <br><br> ‚Üí <a href=""></a>        <br><br><h3>   </h3><br>  ,   ,      .   ‚Äî  ,  ,    ,      . <br><br><h2> <font color="#3AC1EF">19.        </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  </h3><br> ,   ,   .      ,     ,          ,       .      <code>child_process.execFile</code> , ,  ,    ,        ,  . <br><br> ‚Üí <a href=""></a>    ,       <br><br><h3>   </h3><br>                ,  ,    ,   ,   . <br><br><h2> <font color="#3AC1EF">20.      </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>    express,  ,    . ,   ,       ,    <code>Error</code> (    ).    , ,        ,      -  ,       . <br><br> ‚Üí <a href=""></a>         <br><br><h3>   </h3><br>  ,    , ,      ,            ,    ,      . <br><br><h2> <font color="#3AC1EF">21.     npm  Yarn</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>     ,      -,      (MFA, multi-factor authentication).   npm  Yarn     ,      .  ,      ,       ,       .        ,      .   , ,  npm,                   . <br><br><h3>   </h3><br>  ,        ? <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>    eslint,     . <br><br><h2> <font color="#3AC1EF">22.   ,   </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>   -       .    ,      ‚Äî     ,   -  .   ,   ,      <code>X-Powered-By</code> ,          ,      .   ,        ( , , Node.js  express). <br><br> ‚Üí <a href=""></a>   -    <br><br><h3>   </h3><br> -     .  ,         ,  -,   ‚Äî    .            . <br><br><h2> <font color="#3AC1EF">23.     </font> </h2><br>           ,      .  ‚Äî  ,     Node.js. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>     ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> OWASP</a> . <br><br><ul><li>      root-      . </li><li>        ( SSH-). </li><li>  ,      ,   ,   . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  OWASP,  . </li><li>       ,     .  ,      . <br></li><li>       OAuth, OpenID,   .     Basic Authentication. <br></li><li>    .      ,    (   ‚Äî       ),   X   ,  Y . <br></li><li>        ‚Äî     ,    ‚Äî   .     ,      . <br></li><li>    ,  ,    .             ( ‚Äî     GitHub, AWS, Jenkins,   ). <br></li></ul><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>      . ,        Node.js-. <br><br>  <b>Estimados lectores!</b>       -,        ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ft/qm/bo/ftqmbopklpm88ixbi5vqyx2zcb8.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419719/">https://habr.com/ru/post/es419719/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419707/index.html">Gamificaci√≥n de aplicaciones: 5 cosas para recordar</a></li>
<li><a href="../es419711/index.html">La primera IT Bike Quest en San Petersburgo. Como fue</a></li>
<li><a href="../es419713/index.html">Mail.Ru Design Conference + Dribbble Meetup 2018</a></li>
<li><a href="../es419715/index.html">No sabes c√≥mo trabajar con las transacciones.</a></li>
<li><a href="../es419717/index.html">Dise√±ar una arquitectura de aplicaci√≥n integrada</a></li>
<li><a href="../es419721/index.html">Biomarcadores del envejecimiento. Fragilidad de panel. Parte 1</a></li>
<li><a href="../es419725/index.html">Dardos, dados y monedas: algoritmos de distribuci√≥n discreta</a></li>
<li><a href="../es419727/index.html">Harbor: un registro de contenedores Docker listos para usar</a></li>
<li><a href="../es419729/index.html">Evento de caridad "Dale alas a los ni√±os"</a></li>
<li><a href="../es419731/index.html">Mini revisi√≥n de la impresora 3D de fotopol√≠mero dental MoonRay S</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>