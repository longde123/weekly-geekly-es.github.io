<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌇 🐋 🙍🏽 Prêt de voiture d'occasion en 1 minute 🥨 👨🏾‍🎓 ⛷️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au lieu d'introduire 


 Comme toutes les histoires intéressantes, celle-ci a commencé il y a longtemps et de manière inattendue. Une fois que notre b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prêt de voiture d'occasion en 1 minute</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kolesa/blog/431342/"><p><img src="https://habrastorage.org/webt/sb/mw/tr/sbmwtrme9nvzfag22j8cxpouqzk.jpeg"></p><br><h2 id="vmesto-vvedeniya">  Au lieu d'introduire </h2><br><p>  Comme toutes les histoires intéressantes, celle-ci a commencé il y a longtemps et de manière inattendue.  Une fois que notre banque partenaire est venue nous voir et nous a dit: «Les gars, nous avons appris à faire des scores dans notre système en une minute.  Que diriez-vous d'unir vos forces et d'intégrer des projets?  Avec nous - une décision et un crédit, avec vous - des voitures. »  Dire que nous étions inspirés - ne rien dire!  Nous avons eu toutes les chances de devenir le premier presque au monde à pouvoir accorder un prêt en ligne pour une voiture d'occasion en une minute (UNE MINUTE, CARL)!  Ci-dessous, je vais vous dire ce qui en est ressorti, mais je vais d'abord vous dire qui nous sommes, en fait, NOUS. <a name="habracut"></a></p><br><p><img src="https://habrastorage.org/webt/n7/t5/sl/n7t5sljpvereqprdx0rbocrdm84.jpeg"></p><br><p>  Nous sommes «Roues |  Toit |  Market »est la plus grande entreprise informatique basée au Kazakhstan.  Chaque jour, nos produits aident six millions de Kazakhstanais à acheter et vendre des voitures, des appartements, des berceaux et des milliers d'autres choses.  Kolesa.kz est la plus grande ressource et application automobile; elle occupe depuis plusieurs années la première place dans la notation mobile du Kazakhstan. </p><br><h2 id="chto-iz-sebya-predstavlyaet-proekt-avtokredit">  Qu'est-ce que le projet «Prêt de voiture»? </h2><br><p>  À l'heure actuelle, la base des voitures d'occasion est de 103 400 voitures, dont plus de 60% sont disponibles à crédit! </p><br><div class="spoiler">  <b class="spoiler_title">À quoi cela ressemble en images</b> <div class="spoiler_text"><h3 id="1-vybiraem-mashinu-kotoruyu-hotim-vzyat-v-kredit">  1. Choisissez la voiture que nous voulons prendre à crédit </h3><br><p><img src="https://habrastorage.org/webt/j6/ft/id/j6ftidhsd9nk8dsrqghfo5jyfes.png"></p><br><p>  <em>Figure 1. Résultats de la recherche de voitures disponibles à crédit</em> </p><br><h3 id="2-na-stranice-obyavleniya-vidim-formu-dlya-podachi-zayavki-na-kredit">  2. Sur la page d'annonce, nous voyons un formulaire de demande de prêt </h3><br><p><img src="https://habrastorage.org/webt/qo/ja/cr/qojacrzpfgmut_8xd7-nlbcr-1s.png">  <em>Figure 2. Écran de la page d'annonces</em> </p><br><h3 id="3-vybiraem-period-i-pervonachalnyy-vznos-i-nazhimaem-poluchit-odobrenie">  3. Sélectionnez la période et l'acompte et cliquez pour obtenir l'approbation </h3><br><p><img src="https://habrastorage.org/webt/yd/ve/ol/ydveol7jxtupaoguc81pyowbsmc.png"><br>  <em>Figure 3. Calculatrice de crédit pour l'annonce</em> </p><br><h3 id="4-popadaem-na-formu-gde-nam-nuzhno-vvesti-svoi-kontaktnye-dannye">  4. Nous arrivons au formulaire où nous devons entrer nos coordonnées </h3><br><p><img src="https://habrastorage.org/webt/sq/sk/zj/sqskzj6wk-zophmc7dibyd1teys.png"><br>  <em>Figure 4. Formulaire d'initialisation d'une demande de prêt</em> </p><br><p>  Ici, nous entrons votre numéro de téléphone mobile Nom et IIN (en Russie, ce serait un TIN) </p><br><h3 id="5-dalee-vam-neobhodimo-vvesti-kod-sms-kotoryy-pridyot-na-ukazannyy-vami-nomer">  5. Ensuite, vous devez entrer le code SMS qui viendra à votre numéro </h3><br><p><img src="https://habrastorage.org/webt/od/ey/kc/odeykcr1vtkveylifnf6oza8xxm.png"><br>  <em>Figure 5. Formulaire de confirmation du numéro de téléphone en saisissant SMS</em> </p><br><h3 id="6-posle-etogo-nachinaetsya-sam-process-skoringa-kotoryy-dlitsya-ne-bolee-1-minuty">  6. Après cela, le processus de notation lui-même commence, qui ne dure pas plus d'une minute </h3><br><p><img src="https://habrastorage.org/webt/9s/po/6s/9spo6soaw7vjupijhkpfnehkdyq.png">  <em>Figure 6. Écran du processus de notation des candidatures</em> </p><br><h3 id="7-est-neskolko-variantov-rezultata-skoringa">  7. Il existe plusieurs options pour noter les résultats: </h3><br><ol><li>  Vous approuvez un prêt </li><li>  On vous refuse un prêt </li><li>  Des conditions alternatives vous sont proposées </li><li>  Vous êtes invité à fournir des informations supplémentaires, après quoi vous recevez l'une des options précédentes (a, b, c) </li></ol><br><p><img src="https://habrastorage.org/webt/7s/ba/d_/7sbad_bmbosrd4kcgdt4wa65884.png"><br>  <em>Figure 7. Exemple d'écran d'approbation de prêt automatique</em> </p><br><p>  Une fois qu'une personne a reçu l'approbation de sa demande, le directeur de la banque le rappelle dans les 10 minutes et l'informe des mesures à prendre pour obtenir un prêt.  Pratique, non?  Voyons comment tout cela a été mis en œuvre. </p></div></div><br><h2 id="ty-pomnish-kak-vsyo-nachinalos">  Vous rappelez-vous comment tout a commencé ... </h2><br><p>  Tout était pour la première fois et encore!  Si, plus tôt, nous avions simplement un formulaire de rétroaction comme formulaire de crédit, alors notre nouvelle idée était quelque chose de complètement nouveau et incompréhensible.  Parce que  Nous n'avions pas d'analogues, nous avions une tâche très excitante à accomplir - planifier, concevoir, distribuer et mettre en œuvre.  Dans un premier temps, nous avons divisé l'ensemble du processus de notre intégration commune en 2 blocs, qui se sont déroulés en parallèle, à savoir: </p><br><ul><li>  Intégration d'infrastructure </li><li><p>  Intégration de logiciels </p><br><p>  Initialement, nous avons convenu avec la banque partenaire qu'il (la banque partenaire) nous fournira une sorte d'API, dans laquelle nous enverrons des données et recevrons des réponses.  Ils ont décidé de cela.  Nous avons commencé à attendre la documentation de l'API de la banque, réuni nos et leurs ingénieurs réseau!  En termes d'intégration logicielle, un schéma assez simple a émergé, nous envoyons des données à la banque, la banque les fait défiler dans son système, et nous les restitue, et tout cela pendant 60 secondes garanties.  En cas de dépassement de délai (où cela pourrait-il se passer sans cela), nous avons convenu d'afficher un questionnaire d'urgence, dans lequel nous obtenons des données dont la banque pourrait avoir besoin en plus. </p><br></li></ul><br><h3 id="seti">  Réseaux </h3><br><p>  A cette époque, alors que les développeurs choisissaient des outils pour l'implémentation, ils concevaient leur système et attendaient la documentation sur le système partenaire, le travail au sein du département infrastructure battait déjà son plein!  Ma banque partenaire et moi en avions deux: 2 cisi se tenant côte à côte dans un DC, un câble reliant tsiska, un tunnel VPN, des certificats de sécurité et pribludy pour travailler avec eux de toutes les couleurs et de toutes les tailles ... Le plan était le suivant, nous transmettons le canal VPN crypté entre nos serveurs, et construire une intégration directe entre nos services.  Schématiquement, cela peut être représenté comme suit: </p><br><p><img src="https://habrastorage.org/webt/hl/oy/wn/hloywn-uxue8ceolpvmdodhla5w.png"></p><br><h3 id="pogovorim-pro-kod">  Parlons du code </h3><br><p>  Ci-dessous, nous parlerons de la manière et de ce qui est organisé par notre service.  Ainsi, après avoir reçu un document décrivant le service du partenaire prêt à être intégré, nous avons appris que, contrairement à nous, la banque ne fonctionne qu'avec les demandes SOAP et ne souhaite pas entendre parler de services RESTful.  Et comme dans nos services, nous utilisons le SAVON un peu moins souvent que jamais, nous avons eu beaucoup de découvertes merveilleuses sur la façon d'apprendre à préparer du SAVON dans notre nouveau produit.  Par conséquent, nous devions apprendre à notre service à analyser les demandes SOAP et à reconvertir nos réponses en SOAP. </p><br><h4 id="vybora-freymvorka">  Sélection du cadre </h4><br><p>  Pour commencer, il fallait choisir au moins un langage d'implémentation, il y avait beaucoup d'idées, à commencer par C et C # se terminant par golang et erlang.  Nous avons décidé de suivre un chemin simple.  Le système devra être pris en charge, et afin de ne pas se heurter au facteur bus avec un manque de spécialistes sur le marché, nous avons décidé de nous concentrer sur la technologie la plus courante dans notre entreprise - PHP.  Dieu merci, en dehors de la fenêtre, ce n'était pas déjà 2001, mais 2017 et il y a tellement de frameworks php qu'ils peuvent satisfaire les besoins d'ingénieurs même très sophistiqués.  Après avoir parcouru tout un tas, nous avons choisi l'un des plus simples et en même temps pris en charge - Yii 2. </p><br><p>  <strong>Car cette décision était:</strong> </p><br><ul><li>  Facile à maîtriser, tout un tas de littérature; </li><li>  Il est assez facile de créer des formulaires et des validateurs; </li><li>  Il y a un Active Record et une voiture prête à fonctionner avec toutes sortes d'outils; </li><li>  Il est vraiment rapide; </li><li>  Sur cette base, une API est simplement construite, il est pratique d'écrire des commandes de console. </li></ul><br><p>  <strong>Contre était:</strong> </p><br><ul><li>  Le framework est construit sur des méthodes statiques - cela est très gênant, y compris lors de l'écriture de tests </li><li>  Il n'était pas clair de quels outils supplémentaires nous aurions besoin dans un proche avenir après le lancement, et, par conséquent, il y avait un risque de ne pas trouver les bibliothèques nécessaires ... </li></ul><br><h4 id="vybor-hranilisch">  Sélection de stockage </h4><br><p>  Le framework a été choisi, il est maintenant temps de choisir un référentiel pour les applications.  Il y avait plusieurs options, MySQL, mongoDB, postgreSQL ... D'une part, une application est un document, à coup sûr sa structure peut changer, ponctuellement complétée par de nouveaux champs et se débarrasser de ceux non pertinents.  En revanche, l'utilisation de bases de données non relationnelles imposera ses limites.  Après avoir pesé le pour et le contre, nous avons décidé de nous asseoir sur 2 chaises et d'utiliser MySQL pour lancer, et après le lancement, nous migrons vers un tas de mongoDB + ElasticSearch.  En conséquence, 2 répliques MySQL ont été générées en tant que stockage et vissées à l'application à l'aide d'ActiveRecord.  Au moment où nous avons commencé la transition vers mongoDB, la quantité de données a beaucoup augmenté et a pris un taux de croissance tel qu'il y avait un autre besoin de diviser les applications en référentiels conditionnels.  En tant qu'outil d'indexation de documents en temps quasi réel, ElasticSearch a décidé d'utiliser un service écrit en Golang - monstache. </p><br><h4 id="stroim-infrastrukturu">  Construction d'infrastructures </h4><br><p>  Nous avons décidé de faire l'infrastructure suivante: 10 backends avec l'application par le processeur d'application, 2 équilibreurs, 2 répliques MySQL, 3 fragments Elasticsearch, 3 répliques mongoDB et 2 répliques de service monstache. <img src="https://habrastorage.org/webt/n4/c4/gz/n4c4gzsszplllqrpbxxgd4uhnkw.png"></p><br><h2 id="process">  Le processus </h2><br><p>  En général, le processus de prêt automobile peut être divisé en 2 parties: </p><br><ol><li>  Pour commencer, vous devez trouver une voiture adaptée, disponible à crédit.  Vous serez probablement guidé par son état et les conditions du prêt. </li><li>  Après avoir sélectionné une voiture, vous devez obtenir une approbation de prêt, pour cela, vous devrez remplir une demande </li></ol><br><p>  Concernant l'implémentation de la deuxième partie, nous avons plus ou moins décrit ci-dessus, parlons de l'implémentation de la première partie.  La mise en œuvre de la première partie comprend plusieurs sous-parties: </p><br><ol><li>  Lors de la recherche d'une voiture, une personne doit pouvoir se concentrer, en plus des paramètres techniques, sur la disponibilité d'une voiture à acheter à crédit et sur le montant minimum d'un paiement mensuel.  Pour ce faire, nous devons savoir au moment de l'annonce que la voiture est disponible à crédit et quel sera le paiement minimum pour celle-ci. </li><li>  Après qu'une personne a choisi une voiture, nous devons lui fournir un calculateur de prêt, où il pourrait choisir la taille de l'acompte et la durée du prêt, choisissant ainsi le montant du paiement mensuel le plus confortable. </li></ol><br><p>  À cet effet, un microservice spécial dans la langue go a été développé.  Son essence était la suivante: lorsqu'une annonce est soumise au microservice, un objet contenant toutes les données sur la voiture est envoyé, le microservice, basé sur les règles qui sont écrites séparément pour lui, renvoie le paiement mensuel minimum pour l'indexation dans la recherche, et renvoie également l'acompte minimum et les délais acceptables les prêts, qui sont la base de la construction d'un calculateur de prêt. </p><br><p><img src="https://habrastorage.org/webt/v3/3s/oj/v33sojevpnsmwuqh8il4vhciili.png"></p><br><p>  Nous mettons en cache les options de calcul erroné à l'avance pour les valeurs d'acompte standard et de paiement mensuel.  Cela se fait pour chacune des périodes de crédit disponibles.  Si une personne modifie le paiement initial (dans la plage acceptable), le microservice calculera à nouveau toutes les données.  Si le paiement initial est spécifié inférieur au montant autorisé, la calculatrice affichera une erreur de validation. </p><br><p><img src="https://habrastorage.org/webt/o0/0o/vv/o00ovv3safkjazq87fpkhqvvp2o.png"></p><br><p>  En raison de la charge élevée sur notre service, le calculateur de prêt a 2 degrés de mise en cache: le premier a lieu sur le backend, où les clients choisissent initialement la calculatrice, le second dans le microservice lui-même. </p><br><h2 id="tak-chto-v-itoge">  Alors, quel est le résultat net? </h2><br><p>  Nous avons lancé le projet le 11 septembre 2017.  Depuis ce moment, à ce jour (4 décembre 2018), 2 973 868 demandes ont été déposées.  Nous sommes dans un processus continu d'amélioration de notre service et de simplification du parcours utilisateur.  Nous le rendons plus rapide, plus facile et plus stable!  Le temps de disponibilité du projet pour toute la période écoulée depuis le lancement était de 99,99%. </p><br><p>  En conséquence, nous avons les résultats suivants: </p><br><ol><li>  Chemin utilisateur considérablement réduit </li><li>  Nous avons augmenté le volume de voitures disponibles pour le prêt à 60% de la base entière </li><li>  À ce jour, le nombre de demandes a augmenté de plus de 7 fois! </li></ol><br><h2 id="vmesto-zaklyucheniya">  Au lieu d'une conclusion </h2><br><p>  En 3 mois, nous avons réussi à construire un projet vraiment incroyable et unique.  Son objectif principal était de donner à nos clients la possibilité d'acheter des voitures d'occasion sans quitter notre plateforme.  En seulement 1 minute, l'utilisateur peut prendre une décision sur sa demande, appeler le vendeur et établir tous les documents nécessaires le même jour. <br>  A en juger par le nombre de demandes pour l'année et 2 mois, nous pouvons conclure que nous sommes en mesure de rendre le service vraiment pratique et en demande. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr431342/">https://habr.com/ru/post/fr431342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr431330/index.html">Week-end mobile: diffusion gratuite Mobius</a></li>
<li><a href="../fr431332/index.html">Aperçu des rapports DotNext 2018 les plus intéressants: version EastBanc Technologies</a></li>
<li><a href="../fr431334/index.html">Huawei: Protection de l'avion de contrôle</a></li>
<li><a href="../fr431338/index.html">Le livre "ADN. L'histoire de la révolution génétique »</a></li>
<li><a href="../fr431340/index.html">Son choix de 11 polygones, rien à voir avec le présent</a></li>
<li><a href="../fr431344/index.html">Acoustique intégrée: qu'est-ce que c'est et comment ça marche</a></li>
<li><a href="../fr431346/index.html">Développement d'une application compatible avec l'action pour Slack</a></li>
<li><a href="../fr431348/index.html">Anycubic Photon: un mini-aperçu d'une imprimante 3D photopolymère peu coûteuse</a></li>
<li><a href="../fr431350/index.html">Plans de développement du processeur électronique Baïkal</a></li>
<li><a href="../fr431354/index.html">Le premier codec vidéo d'apprentissage automatique a considérablement surpassé tous les codecs existants, y compris H.265 et VP9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>