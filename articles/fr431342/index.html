<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåá üêã üôçüèΩ Pr√™t de voiture d'occasion en 1 minute ü•® üë®üèæ‚Äçüéì ‚õ∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au lieu d'introduire 


 Comme toutes les histoires int√©ressantes, celle-ci a commenc√© il y a longtemps et de mani√®re inattendue. Une fois que notre b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pr√™t de voiture d'occasion en 1 minute</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kolesa/blog/431342/"><p><img src="https://habrastorage.org/webt/sb/mw/tr/sbmwtrme9nvzfag22j8cxpouqzk.jpeg"></p><br><h2 id="vmesto-vvedeniya">  Au lieu d'introduire </h2><br><p>  Comme toutes les histoires int√©ressantes, celle-ci a commenc√© il y a longtemps et de mani√®re inattendue.  Une fois que notre banque partenaire est venue nous voir et nous a dit: ¬´Les gars, nous avons appris √† faire des scores dans notre syst√®me en une minute.  Que diriez-vous d'unir vos forces et d'int√©grer des projets?  Avec nous - une d√©cision et un cr√©dit, avec vous - des voitures. ¬ª  Dire que nous √©tions inspir√©s - ne rien dire!  Nous avons eu toutes les chances de devenir le premier presque au monde √† pouvoir accorder un pr√™t en ligne pour une voiture d'occasion en une minute (UNE MINUTE, CARL)!  Ci-dessous, je vais vous dire ce qui en est ressorti, mais je vais d'abord vous dire qui nous sommes, en fait, NOUS. <a name="habracut"></a></p><br><p><img src="https://habrastorage.org/webt/n7/t5/sl/n7t5sljpvereqprdx0rbocrdm84.jpeg"></p><br><p>  Nous sommes ¬´Roues |  Toit |  Market ¬ªest la plus grande entreprise informatique bas√©e au Kazakhstan.  Chaque jour, nos produits aident six millions de Kazakhstanais √† acheter et vendre des voitures, des appartements, des berceaux et des milliers d'autres choses.  Kolesa.kz est la plus grande ressource et application automobile; elle occupe depuis plusieurs ann√©es la premi√®re place dans la notation mobile du Kazakhstan. </p><br><h2 id="chto-iz-sebya-predstavlyaet-proekt-avtokredit">  Qu'est-ce que le projet ¬´Pr√™t de voiture¬ª? </h2><br><p>  √Ä l'heure actuelle, la base des voitures d'occasion est de 103 400 voitures, dont plus de 60% sont disponibles √† cr√©dit! </p><br><div class="spoiler">  <b class="spoiler_title">√Ä quoi cela ressemble en images</b> <div class="spoiler_text"><h3 id="1-vybiraem-mashinu-kotoruyu-hotim-vzyat-v-kredit">  1. Choisissez la voiture que nous voulons prendre √† cr√©dit </h3><br><p><img src="https://habrastorage.org/webt/j6/ft/id/j6ftidhsd9nk8dsrqghfo5jyfes.png"></p><br><p>  <em>Figure 1. R√©sultats de la recherche de voitures disponibles √† cr√©dit</em> </p><br><h3 id="2-na-stranice-obyavleniya-vidim-formu-dlya-podachi-zayavki-na-kredit">  2. Sur la page d'annonce, nous voyons un formulaire de demande de pr√™t </h3><br><p><img src="https://habrastorage.org/webt/qo/ja/cr/qojacrzpfgmut_8xd7-nlbcr-1s.png">  <em>Figure 2. √âcran de la page d'annonces</em> </p><br><h3 id="3-vybiraem-period-i-pervonachalnyy-vznos-i-nazhimaem-poluchit-odobrenie">  3. S√©lectionnez la p√©riode et l'acompte et cliquez pour obtenir l'approbation </h3><br><p><img src="https://habrastorage.org/webt/yd/ve/ol/ydveol7jxtupaoguc81pyowbsmc.png"><br>  <em>Figure 3. Calculatrice de cr√©dit pour l'annonce</em> </p><br><h3 id="4-popadaem-na-formu-gde-nam-nuzhno-vvesti-svoi-kontaktnye-dannye">  4. Nous arrivons au formulaire o√π nous devons entrer nos coordonn√©es </h3><br><p><img src="https://habrastorage.org/webt/sq/sk/zj/sqskzj6wk-zophmc7dibyd1teys.png"><br>  <em>Figure 4. Formulaire d'initialisation d'une demande de pr√™t</em> </p><br><p>  Ici, nous entrons votre num√©ro de t√©l√©phone mobile Nom et IIN (en Russie, ce serait un TIN) </p><br><h3 id="5-dalee-vam-neobhodimo-vvesti-kod-sms-kotoryy-pridyot-na-ukazannyy-vami-nomer">  5. Ensuite, vous devez entrer le code SMS qui viendra √† votre num√©ro </h3><br><p><img src="https://habrastorage.org/webt/od/ey/kc/odeykcr1vtkveylifnf6oza8xxm.png"><br>  <em>Figure 5. Formulaire de confirmation du num√©ro de t√©l√©phone en saisissant SMS</em> </p><br><h3 id="6-posle-etogo-nachinaetsya-sam-process-skoringa-kotoryy-dlitsya-ne-bolee-1-minuty">  6. Apr√®s cela, le processus de notation lui-m√™me commence, qui ne dure pas plus d'une minute </h3><br><p><img src="https://habrastorage.org/webt/9s/po/6s/9spo6soaw7vjupijhkpfnehkdyq.png">  <em>Figure 6. √âcran du processus de notation des candidatures</em> </p><br><h3 id="7-est-neskolko-variantov-rezultata-skoringa">  7. Il existe plusieurs options pour noter les r√©sultats: </h3><br><ol><li>  Vous approuvez un pr√™t </li><li>  On vous refuse un pr√™t </li><li>  Des conditions alternatives vous sont propos√©es </li><li>  Vous √™tes invit√© √† fournir des informations suppl√©mentaires, apr√®s quoi vous recevez l'une des options pr√©c√©dentes (a, b, c) </li></ol><br><p><img src="https://habrastorage.org/webt/7s/ba/d_/7sbad_bmbosrd4kcgdt4wa65884.png"><br>  <em>Figure 7. Exemple d'√©cran d'approbation de pr√™t automatique</em> </p><br><p>  Une fois qu'une personne a re√ßu l'approbation de sa demande, le directeur de la banque le rappelle dans les 10 minutes et l'informe des mesures √† prendre pour obtenir un pr√™t.  Pratique, non?  Voyons comment tout cela a √©t√© mis en ≈ìuvre. </p></div></div><br><h2 id="ty-pomnish-kak-vsyo-nachinalos">  Vous rappelez-vous comment tout a commenc√© ... </h2><br><p>  Tout √©tait pour la premi√®re fois et encore!  Si, plus t√¥t, nous avions simplement un formulaire de r√©troaction comme formulaire de cr√©dit, alors notre nouvelle id√©e √©tait quelque chose de compl√®tement nouveau et incompr√©hensible.  Parce que  Nous n'avions pas d'analogues, nous avions une t√¢che tr√®s excitante √† accomplir - planifier, concevoir, distribuer et mettre en ≈ìuvre.  Dans un premier temps, nous avons divis√© l'ensemble du processus de notre int√©gration commune en 2 blocs, qui se sont d√©roul√©s en parall√®le, √† savoir: </p><br><ul><li>  Int√©gration d'infrastructure </li><li><p>  Int√©gration de logiciels </p><br><p>  Initialement, nous avons convenu avec la banque partenaire qu'il (la banque partenaire) nous fournira une sorte d'API, dans laquelle nous enverrons des donn√©es et recevrons des r√©ponses.  Ils ont d√©cid√© de cela.  Nous avons commenc√© √† attendre la documentation de l'API de la banque, r√©uni nos et leurs ing√©nieurs r√©seau!  En termes d'int√©gration logicielle, un sch√©ma assez simple a √©merg√©, nous envoyons des donn√©es √† la banque, la banque les fait d√©filer dans son syst√®me, et nous les restitue, et tout cela pendant 60 secondes garanties.  En cas de d√©passement de d√©lai (o√π cela pourrait-il se passer sans cela), nous avons convenu d'afficher un questionnaire d'urgence, dans lequel nous obtenons des donn√©es dont la banque pourrait avoir besoin en plus. </p><br></li></ul><br><h3 id="seti">  R√©seaux </h3><br><p>  A cette √©poque, alors que les d√©veloppeurs choisissaient des outils pour l'impl√©mentation, ils concevaient leur syst√®me et attendaient la documentation sur le syst√®me partenaire, le travail au sein du d√©partement infrastructure battait d√©j√† son plein!  Ma banque partenaire et moi en avions deux: 2 cisi se tenant c√¥te √† c√¥te dans un DC, un c√¢ble reliant tsiska, un tunnel VPN, des certificats de s√©curit√© et pribludy pour travailler avec eux de toutes les couleurs et de toutes les tailles ... Le plan √©tait le suivant, nous transmettons le canal VPN crypt√© entre nos serveurs, et construire une int√©gration directe entre nos services.  Sch√©matiquement, cela peut √™tre repr√©sent√© comme suit: </p><br><p><img src="https://habrastorage.org/webt/hl/oy/wn/hloywn-uxue8ceolpvmdodhla5w.png"></p><br><h3 id="pogovorim-pro-kod">  Parlons du code </h3><br><p>  Ci-dessous, nous parlerons de la mani√®re et de ce qui est organis√© par notre service.  Ainsi, apr√®s avoir re√ßu un document d√©crivant le service du partenaire pr√™t √† √™tre int√©gr√©, nous avons appris que, contrairement √† nous, la banque ne fonctionne qu'avec les demandes SOAP et ne souhaite pas entendre parler de services RESTful.  Et comme dans nos services, nous utilisons le SAVON un peu moins souvent que jamais, nous avons eu beaucoup de d√©couvertes merveilleuses sur la fa√ßon d'apprendre √† pr√©parer du SAVON dans notre nouveau produit.  Par cons√©quent, nous devions apprendre √† notre service √† analyser les demandes SOAP et √† reconvertir nos r√©ponses en SOAP. </p><br><h4 id="vybora-freymvorka">  S√©lection du cadre </h4><br><p>  Pour commencer, il fallait choisir au moins un langage d'impl√©mentation, il y avait beaucoup d'id√©es, √† commencer par C et C # se terminant par golang et erlang.  Nous avons d√©cid√© de suivre un chemin simple.  Le syst√®me devra √™tre pris en charge, et afin de ne pas se heurter au facteur bus avec un manque de sp√©cialistes sur le march√©, nous avons d√©cid√© de nous concentrer sur la technologie la plus courante dans notre entreprise - PHP.  Dieu merci, en dehors de la fen√™tre, ce n'√©tait pas d√©j√† 2001, mais 2017 et il y a tellement de frameworks php qu'ils peuvent satisfaire les besoins d'ing√©nieurs m√™me tr√®s sophistiqu√©s.  Apr√®s avoir parcouru tout un tas, nous avons choisi l'un des plus simples et en m√™me temps pris en charge - Yii 2. </p><br><p>  <strong>Car cette d√©cision √©tait:</strong> </p><br><ul><li>  Facile √† ma√Ætriser, tout un tas de litt√©rature; </li><li>  Il est assez facile de cr√©er des formulaires et des validateurs; </li><li>  Il y a un Active Record et une voiture pr√™te √† fonctionner avec toutes sortes d'outils; </li><li>  Il est vraiment rapide; </li><li>  Sur cette base, une API est simplement construite, il est pratique d'√©crire des commandes de console. </li></ul><br><p>  <strong>Contre √©tait:</strong> </p><br><ul><li>  Le framework est construit sur des m√©thodes statiques - cela est tr√®s g√™nant, y compris lors de l'√©criture de tests </li><li>  Il n'√©tait pas clair de quels outils suppl√©mentaires nous aurions besoin dans un proche avenir apr√®s le lancement, et, par cons√©quent, il y avait un risque de ne pas trouver les biblioth√®ques n√©cessaires ... </li></ul><br><h4 id="vybor-hranilisch">  S√©lection de stockage </h4><br><p>  Le framework a √©t√© choisi, il est maintenant temps de choisir un r√©f√©rentiel pour les applications.  Il y avait plusieurs options, MySQL, mongoDB, postgreSQL ... D'une part, une application est un document, √† coup s√ªr sa structure peut changer, ponctuellement compl√©t√©e par de nouveaux champs et se d√©barrasser de ceux non pertinents.  En revanche, l'utilisation de bases de donn√©es non relationnelles imposera ses limites.  Apr√®s avoir pes√© le pour et le contre, nous avons d√©cid√© de nous asseoir sur 2 chaises et d'utiliser MySQL pour lancer, et apr√®s le lancement, nous migrons vers un tas de mongoDB + ElasticSearch.  En cons√©quence, 2 r√©pliques MySQL ont √©t√© g√©n√©r√©es en tant que stockage et viss√©es √† l'application √† l'aide d'ActiveRecord.  Au moment o√π nous avons commenc√© la transition vers mongoDB, la quantit√© de donn√©es a beaucoup augment√© et a pris un taux de croissance tel qu'il y avait un autre besoin de diviser les applications en r√©f√©rentiels conditionnels.  En tant qu'outil d'indexation de documents en temps quasi r√©el, ElasticSearch a d√©cid√© d'utiliser un service √©crit en Golang - monstache. </p><br><h4 id="stroim-infrastrukturu">  Construction d'infrastructures </h4><br><p>  Nous avons d√©cid√© de faire l'infrastructure suivante: 10 backends avec l'application par le processeur d'application, 2 √©quilibreurs, 2 r√©pliques MySQL, 3 fragments Elasticsearch, 3 r√©pliques mongoDB et 2 r√©pliques de service monstache. <img src="https://habrastorage.org/webt/n4/c4/gz/n4c4gzsszplllqrpbxxgd4uhnkw.png"></p><br><h2 id="process">  Le processus </h2><br><p>  En g√©n√©ral, le processus de pr√™t automobile peut √™tre divis√© en 2 parties: </p><br><ol><li>  Pour commencer, vous devez trouver une voiture adapt√©e, disponible √† cr√©dit.  Vous serez probablement guid√© par son √©tat et les conditions du pr√™t. </li><li>  Apr√®s avoir s√©lectionn√© une voiture, vous devez obtenir une approbation de pr√™t, pour cela, vous devrez remplir une demande </li></ol><br><p>  Concernant l'impl√©mentation de la deuxi√®me partie, nous avons plus ou moins d√©crit ci-dessus, parlons de l'impl√©mentation de la premi√®re partie.  La mise en ≈ìuvre de la premi√®re partie comprend plusieurs sous-parties: </p><br><ol><li>  Lors de la recherche d'une voiture, une personne doit pouvoir se concentrer, en plus des param√®tres techniques, sur la disponibilit√© d'une voiture √† acheter √† cr√©dit et sur le montant minimum d'un paiement mensuel.  Pour ce faire, nous devons savoir au moment de l'annonce que la voiture est disponible √† cr√©dit et quel sera le paiement minimum pour celle-ci. </li><li>  Apr√®s qu'une personne a choisi une voiture, nous devons lui fournir un calculateur de pr√™t, o√π il pourrait choisir la taille de l'acompte et la dur√©e du pr√™t, choisissant ainsi le montant du paiement mensuel le plus confortable. </li></ol><br><p>  √Ä cet effet, un microservice sp√©cial dans la langue go a √©t√© d√©velopp√©.  Son essence √©tait la suivante: lorsqu'une annonce est soumise au microservice, un objet contenant toutes les donn√©es sur la voiture est envoy√©, le microservice, bas√© sur les r√®gles qui sont √©crites s√©par√©ment pour lui, renvoie le paiement mensuel minimum pour l'indexation dans la recherche, et renvoie √©galement l'acompte minimum et les d√©lais acceptables les pr√™ts, qui sont la base de la construction d'un calculateur de pr√™t. </p><br><p><img src="https://habrastorage.org/webt/v3/3s/oj/v33sojevpnsmwuqh8il4vhciili.png"></p><br><p>  Nous mettons en cache les options de calcul erron√© √† l'avance pour les valeurs d'acompte standard et de paiement mensuel.  Cela se fait pour chacune des p√©riodes de cr√©dit disponibles.  Si une personne modifie le paiement initial (dans la plage acceptable), le microservice calculera √† nouveau toutes les donn√©es.  Si le paiement initial est sp√©cifi√© inf√©rieur au montant autoris√©, la calculatrice affichera une erreur de validation. </p><br><p><img src="https://habrastorage.org/webt/o0/0o/vv/o00ovv3safkjazq87fpkhqvvp2o.png"></p><br><p>  En raison de la charge √©lev√©e sur notre service, le calculateur de pr√™t a 2 degr√©s de mise en cache: le premier a lieu sur le backend, o√π les clients choisissent initialement la calculatrice, le second dans le microservice lui-m√™me. </p><br><h2 id="tak-chto-v-itoge">  Alors, quel est le r√©sultat net? </h2><br><p>  Nous avons lanc√© le projet le 11 septembre 2017.  Depuis ce moment, √† ce jour (4 d√©cembre 2018), 2 973 868 demandes ont √©t√© d√©pos√©es.  Nous sommes dans un processus continu d'am√©lioration de notre service et de simplification du parcours utilisateur.  Nous le rendons plus rapide, plus facile et plus stable!  Le temps de disponibilit√© du projet pour toute la p√©riode √©coul√©e depuis le lancement √©tait de 99,99%. </p><br><p>  En cons√©quence, nous avons les r√©sultats suivants: </p><br><ol><li>  Chemin utilisateur consid√©rablement r√©duit </li><li>  Nous avons augment√© le volume de voitures disponibles pour le pr√™t √† 60% de la base enti√®re </li><li>  √Ä ce jour, le nombre de demandes a augment√© de plus de 7 fois! </li></ol><br><h2 id="vmesto-zaklyucheniya">  Au lieu d'une conclusion </h2><br><p>  En 3 mois, nous avons r√©ussi √† construire un projet vraiment incroyable et unique.  Son objectif principal √©tait de donner √† nos clients la possibilit√© d'acheter des voitures d'occasion sans quitter notre plateforme.  En seulement 1 minute, l'utilisateur peut prendre une d√©cision sur sa demande, appeler le vendeur et √©tablir tous les documents n√©cessaires le m√™me jour. <br>  A en juger par le nombre de demandes pour l'ann√©e et 2 mois, nous pouvons conclure que nous sommes en mesure de rendre le service vraiment pratique et en demande. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr431342/">https://habr.com/ru/post/fr431342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr431330/index.html">Week-end mobile: diffusion gratuite Mobius</a></li>
<li><a href="../fr431332/index.html">Aper√ßu des rapports DotNext 2018 les plus int√©ressants: version EastBanc Technologies</a></li>
<li><a href="../fr431334/index.html">Huawei: Protection de l'avion de contr√¥le</a></li>
<li><a href="../fr431338/index.html">Le livre "ADN. L'histoire de la r√©volution g√©n√©tique ¬ª</a></li>
<li><a href="../fr431340/index.html">Son choix de 11 polygones, rien √† voir avec le pr√©sent</a></li>
<li><a href="../fr431344/index.html">Acoustique int√©gr√©e: qu'est-ce que c'est et comment √ßa marche</a></li>
<li><a href="../fr431346/index.html">D√©veloppement d'une application compatible avec l'action pour Slack</a></li>
<li><a href="../fr431348/index.html">Anycubic Photon: un mini-aper√ßu d'une imprimante 3D photopolym√®re peu co√ªteuse</a></li>
<li><a href="../fr431350/index.html">Plans de d√©veloppement du processeur √©lectronique Ba√Økal</a></li>
<li><a href="../fr431354/index.html">Le premier codec vid√©o d'apprentissage automatique a consid√©rablement surpass√© tous les codecs existants, y compris H.265 et VP9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>