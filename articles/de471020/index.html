<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ú üë©üèæ‚Äçü§ù‚Äçüë®üèø üëº So finden Sie einen Fehler in einem Mikroprozessor, der vor 35 Jahren ver√∂ffentlicht wurde üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® üë®üèº‚Äçüî¨ ü•ú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es ist kaum zu glauben, aber manchmal leben Fehler in den Prozessoren im Wesentlichen l√§nger als die Prozessoren selbst. K√ºrzlich war ich davon am Bei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So finden Sie einen Fehler in einem Mikroprozessor, der vor 35 Jahren ver√∂ffentlicht wurde</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471020/"><p><img src="https://habrastorage.org/webt/zj/dz/om/zjdzomhyfadpxobr7ok9wppvvve.jpeg" alt="K1801VM1A"></p><br><p>  Es ist kaum zu glauben, aber manchmal leben Fehler in den Prozessoren im Wesentlichen l√§nger als die Prozessoren selbst.  K√ºrzlich war ich davon am Beispiel des 16-Bit-Mikroprozessors <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1801BM1A √ºberzeugt</a> , auf dessen Grundlage die Haushaltscomputerfamilie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BK-0010 / 11M</a> in der UdSSR <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einst</a> erstellt wurde.  √úber diese Familie schrieb Habr√© wiederholt. </p><a name="habracut"></a><br><p> Die Periode von BeKasheks aktivem Leben f√§llt auf das Ende der 80er Jahre - den Beginn der 90er Jahre des letzten Jahrhunderts.  In diesen Jahren wurde durch die Bem√ºhungen zahlreicher einzelner Enthusiasten sowie Gruppen von Kreismitgliedern und Mitarbeitern das Hauptangebot an BC-Anwendungsprogrammen entwickelt: Spiele, Dienstprogramme, verschiedene "DOSs" (Festplattenbetriebssysteme).  Parallel zur Entwicklung von Software wurden Peripherieger√§te erstellt, unter denen ihre Systemsoftware geschrieben wurde.  Im Allgemeinen entwickelte sich das √ñkosystem dieser 16-Bit-PDP-√§hnlichen Computer nach √§hnlichen Prinzipien, wie beispielsweise die fr√ºhen offenen 8-Bit-Architekturen, die auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Intel 8080</a> und dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">S-100-</a> Bus basieren.  Sp√§ter, als wir uns von der utilitaristischen Rolle der CD entfernen, hat sich der Schwerpunkt der Programmierung auf die Demoszene verlagert. </p><br><p>  Das Softwarevolumen f√ºr BC kann durch den Besuch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√∂ffentlicher</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Websites</a> mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programmkollektionen</a> gesch√§tzt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> .  Nat√ºrlich ist dieses Volumen im Vergleich zum Beispiel mit dem ZX-Spectrum viel bescheidener.  Trotzdem sollte selbst ein solches Volumen ausreichen, um alle denkbaren Ecken und Winkel des Maschinencodes zu umgehen.  Ist es m√∂glich, nach mehr als drei√üigj√§hriger Erfahrung im Umgang mit dem Prozessor etwas Ungew√∂hnliches zu finden?  Wie sich herausstellte - ja!  Dies wird unten diskutiert. </p><br><p>  Vielleicht ist es sinnvoll, diese Geschichte in chronologischer Reihenfolge zu erz√§hlen.  Zun√§chst muss ich sofort feststellen, dass ich √ºberhaupt kein ‚ÄûProgrammierer mit Erfahrung‚Äú bin, weder beruflich noch einer Kohorte von Enthusiasten des BC, √ºber die ich oben geschrieben habe.  Ich kam auf Umwegen nach BC, teils durch Nostalgie nach den Hobbys von Kindheit und Jugend (analoge und digitale Elektronik, das Magazin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Young Technician</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UT-88</a> und andere Handwerke und Unvollkommenheiten), teils durch mein Interesse an der Architektur und dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Befehlssystem PDP-11</a> .  Ich habe kein BK "in Hardware" und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">f√ºhre</a> normalerweise Programme f√ºr BK aus und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">debugge</a> es im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bkemu-</a> Emulator auf einem Tablet f√ºr Android. </p><br><p>  Vor einiger Zeit interessierte ich mich f√ºr das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kaleidoskop-</a> Programm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, das</a> von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Li-Chen Wang-a verfasst wurde</a> .  Das Programm wurde 1976 in Maschinencode f√ºr einen Intel 8080-Mikroprozessor als Teil eines <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Altair 8800-</a> Computers mit einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cromemco Dazzler-</a> Grafikadapter geschrieben.  Ich wollte den Li-Chen Wang-a-Algorithmus im Detail analysieren und gleichzeitig auf das BC portieren.  Ich muss sagen, dass der Wunsch, das Kaleidoskop nach BC zu portieren, fr√ºher bei Demoscenern zum Ausdruck gebracht wurde, und es gab sogar Versuche, den Algorithmus zu analysieren, aber sie waren erfolglos. </p><br><p>  In meinem n√§chsten Artikel werde ich diesen Algorithmus wahrscheinlich im Detail analysieren (und f√ºr Ungeduldige werde ich unter libSDL in C einen Link zu den Quellen des plattform√ºbergreifenden Kaleidoskops ver√∂ffentlichen).  F√ºr die Zukunft wird es ausreichen, anzuzeigen, dass das Problem gel√∂st wurde und das Kaleidoskop erfolgreich nach BC portiert wurde.  Dar√ºber hinaus wurde dem Algorithmus auf der CD eine Tonerzeugung hinzugef√ºgt. Da sowohl das Bild als auch der Ton von demselben Code generiert werden, k√∂nnen wir sagen, dass das Bild selbst klingt (die gesamte Demo passt in weniger als 256 Byte Maschinencode und) Ich hoffe, dass es Ende Oktober auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CAFe Demoparty 2019</a> in Kasan der √ñffentlichkeit vorgestellt wird. </p><br><p>  Nachdem ich mein Programm im Emulator fertig geschrieben und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">debuggt hatte</a> , wandte ich mich an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Damir ("Adamych") Nasyrov</a> (er ist einer der Organisatoren von CAFe Demoparty und eine sehr bekannte Person unter den Demoscenern) mit der Bitte, die Programmausf√ºhrung auf einem echten BC zu √ºberpr√ºfen.  Ich war besonders an der Tonwiedergabe interessiert, da die Timings im Emulator von den Timings auf realer Hardware abweichen k√∂nnen.  Stellen Sie sich meine Entt√§uschung vor, als Damir mir mitteilte, dass es ein Bild auf einem echten BC gibt, aber keinen Ton! </p><br><p>  In den n√§chsten N√§chten wurde versucht, von der Systemdokumentation des BK-0011M und dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schaltplan</a> zu subtrahieren, wo m√∂glicherweise ein Tonfehler aufgetreten ist.  Der Ton im BC ist ganz einfach organisiert: Das 6. Bit im E / A-Register mit der Oktaladresse 177716 (Kassettenrekorder-Steuerregister) wird √ºber einen Puffer an einen piezoelektrischen Lautsprecher (Piepser) ausgegeben.  Zus√§tzlich zur 6. Kategorie sind die Bits 2 und 5 desselben Registers mit dem einfachsten Digital-Analog-Wandler mit 4 Widerst√§nden verbunden.  √úber den Ausgang dieses Konverters kann Ton auf das Tonbandger√§t √ºbertragen werden.  Alles ist au√üergew√∂hnlich klar und logisch, aber auf einem echten BK war kein hartn√§ckiger Ton zu h√∂ren, unabh√§ngig von den Kombinationen von Bitmasken, die ich auf die Datenausgabe in diesem Register anwenden wollte.  Parallel dazu wurden alle mir bekannten BK-Emulatoren installiert und getestet - und der Sound funktionierte in allen! </p><br><p>  Irgendwann h√§tte ich es sogar fast geschafft, Damir davon zu √ºberzeugen, dass sein BK fehlerhaft war, aber das Verhalten wurde auf einem anderen Live-BK-0011M sowie auf BK-0010 wiederholt.  Mir gingen die Ideen aus, und auch die Bewohner des Telegrammkanals zum Thema BC konnten nichts sagen ... Der Vorfall half jedoch wie √ºblich.  W√§hrend eines der Experimente startete Damir eine Demo auf dem Emulator, um sicherzustellen, dass der Emulator Ton enth√§lt.  Und hier bemerkte er, dass nicht nur der Emulator, sondern auch der BC Ton enth√§lt, sondern auch die Bilder im Emulator und im Live-BC unterschiedlich sind!  Hier muss ich Sie daran erinnern, dass in meinem Programm sowohl das Bild als auch der Ton durch denselben Code erzeugt werden.  Dementsprechend habe ich die ganze Zeit am falschen Ort nach einem Grund gesucht: Der Grund war der Code, der die Daten f√ºr den Bildschirminhalt generiert hat. </p><br><p>  Damir schickte mir einen Screenshot, und es wurde klar, dass der Algorithmus Bytes mit null Inhalten der h√∂chsten 4 Bits erzeugt, und zuf√§llig wurden diese Bits an den Ton ausgegeben (d. H. Immer Nullen).  Der Grund, warum sich der Algorithmus so verhielt, blieb jedoch vage.  Dies ist die Stelle im Code (Assembler- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Makro11</a> von PDP-11, Register r0-r5 umbenannt!): </p><br><pre><code class="plaintext hljs">; renamed registers a = %0 b = %1 c = %2 d = %3 e = %4 h = %5 ... ... asr b ; sets CF bic #177760, b bis b, c bis (h)+, c ; screen address in c movb (c), a ; get a byte from screen RAM bcc 1$ ; check CF bic #177760, a ; keep bits 0-3, clear rest bisb d, a ; fill bits 4-7 br 2$ 1$: bic #177417, a ; keep bits 4-7, clear rest bisb e, a ; fill bits 0-3 2$: ... ...</code> </pre> <br><p>  Aus irgendeinem Grund wurde bei einem echten BC immer ein bedingter Sprung bei der 1-Dollar-Marke durchgef√ºhrt.  Das hei√üt, der bcc-Befehl hat das √úbertragsflag immer als zur√ºckgesetzt wahrgenommen, obwohl der ASR-Verschiebungsbefehl dieses Flag entweder auf 0 oder 1 setzen k√∂nnte. Wie k√∂nnte dies sein, da gem√§√ü der Prozessordokumentation weder BIC noch BIS noch MOVB sollte die Carry Flag beeinflussen ?! </p><br><p>  Dar√ºber hinaus ist es in allen Emulatoren (die gem√§√ü der Dokumentation f√ºr den Prozessor geschrieben wurden!) So: Diese Anweisungen ber√ºhren nicht das C-Flag. Es wurde klar, dass der reale Prozessor 1801BM1A in diesem Fall gem√§√ü der Dokumentation nicht funktioniert.  Dies muss noch best√§tigt werden. </p><br><p>  F√ºr den Anfang eine offensichtliche schnelle L√∂sung: </p><br><pre> <code class="plaintext hljs"> ... asr b ; sets CF mfps -(sp) ; store PSW on stack bic #177760, b bis b, c bis (h)+, c ; screen address in c movb (c), a ; get a byte from screen RAM mtps (sp)+ ; restore PSW from stack bcc 1$ ; check CF ...</code> </pre> <br><p>  Das Speichern von Flags auf dem Stapel unmittelbar nach der Schaltanweisung und das Wiederherstellen dieser Flaggen vor dem bedingten Sprung l√∂ste sofort das Problem, das zeigte, dass ich auf dem richtigen Weg war.  Es bleibt, den "Kreis der Verd√§chtigen" einzugrenzen.  Um die Hypothese zu testen, wurde zuerst ein solcher synthetischer Test geschrieben (die Register wurden hier nicht umbenannt; die Initialisierung wurde weggelassen, um den Code nicht zu √ºberladen; emt 64 ist ein Programminterrupt zum Drucken einer Zeile): </p><br><pre> <code class="plaintext hljs"> ... mov #1, r1 jsr pc, test clr r1 jsr pc, test halt test: mov #40000, r2 ; r2 points to screen RAM mov #dummy, r5 ; r5 points to dummy = 200 ; *** begin *** asr r1 ; affects CF bic #177760, r1 bis r1, r2 bis (r5)+, r2 movb (r2), r0 ; *** end *** jsr pc, prt rts pc prt: mov #msg1, r0 bcs l1 mov #msg2, r0 l1: emt 64 rts pc msg1: .asciz /Flag CF set/ msg2: .asciz /Flag CF clear/ dummy: .word 200 ...</code> </pre> <br><p>  Und der Test ... hat nicht funktioniert!  Programm auf dem Bildschirm gedruckt </p><br><p>  Flag CF gesetzt <br>  Flag CF klar </p><br><p>  Was hat sich herausgestellt?  Es stellte sich heraus, dass die anf√§ngliche Annahme, dass das Codefragment zwischen <strong><em>Anfang</em></strong> und <strong><em>Ende</em></strong> nur das C-Flag verdirbt, falsch ist und gekl√§rt werden muss.  Was ist der Unterschied zwischen diesem Test und dem Quellcode?  Und die Tatsache, dass andere Anweisungen zwischen dem Block "verd√§chtiger" Befehle und dem bedingten Sprung erschienen.  Das Flag C wird nicht beeinflusst, aber der interne Status des Prozessors wird ge√§ndert.  Daher war der folgende Test wie folgt: </p><br><pre> <code class="plaintext hljs"> ... mov #1, r1 jsr pc, test clr r1 jsr pc, test halt test: mov #40000, r2 mov #dummy, r5 ; *** begin *** asr r1 ; affects CF bic #177760, r1 bis r1, r2 bis (r5)+, r2 movb (r2), r0 bcc l1 ; *** end *** mov #msg1, r0 emt 64 rts pc l1: mov #msg2, r0 emt 64 rts pc msg1: .asciz /Flag CF set/ msg2: .asciz /Flag CF clear/ dummy: .word 200 ...</code> </pre> <br><p>  Und jetzt wurde dieser Test bereits auf einem echten BK-0011M gedruckt: </p><br><p>  Flag CF klar <br>  Flag CF klar </p><br><p>  Auf dem Emulator wie zuvor </p><br><p>  Flag CF gesetzt <br>  Flag CF klar </p><br><p>  Weiter ist eine Frage der Technologie.  Durch schrittweise Vereinfachungen wurde ein solcher Minimaltest erhalten, bei dem ein Fehler reproduziert wird (ich zitiere die gesamte Quelle): </p><br><pre> <code class="plaintext hljs"> .title test .psect code .=.+1000 mov #15, r0 emt 63 sec jsr pc, test clc jsr pc, test halt test: movb r0, r0 bcc l1 mov #msg1, r0 emt 64 rts pc l1: mov #msg2, r0 emt 64 rts pc msg1: .asciz /Flag CF set/ msg2: .asciz /Flag CF clear/ .end</code> </pre> <br><p>  Auf einem echten BK-0011M wird dieser Test angezeigt </p><br><p>  Flag CF klar <br>  Flag CF klar </p><br><p>  Das hei√üt, der MOVB-Befehl, der sich direkt vor dem bedingten Verzweigungsbefehl befand, war schuld, und das Erscheinen des ersten Operanden ist nicht wichtig.  Wenn beispielsweise NOP zwischen MOVB und BCC eingef√ºgt wird, kehrt das Verhalten zum dokumentierten zur√ºck und das Programm wird gedruckt </p><br><p>  Flag CF gesetzt <br>  Flag CF klar </p><br><p>  Das erm√∂glichte es, eine verfeinerte Hypothese zu formulieren (ich zitiere mich aus einem Telegrammkanal): </p><br><blockquote>  ... Bez√ºglich des Fehlers: Das Verhalten scheint sich gekl√§rt zu haben.  Wie ich mir vorstelle, verdirbt MOVB src, dst (√ºbrigens scheinen die Operanden nicht wichtig zu sein) aufgrund einiger architektonischer Merkmale vor√ºbergehend das C-Flag im Prozessor, aber nicht t√∂dlich, da der Prozentsatz eine Kopie dieses Flags zu speichern scheint.  Wenn sich zwischen dem MOVB und dem bedingten Zweig andere Befehle befinden (die C nicht beeinflussen), z. B. NOP, ist das Verhalten wie in der Dokumentation beschrieben. </blockquote><p>  Was ist als n√§chstes passiert?  Au√üerdem halfen Kollegen des Senders, Vyacheslav (@ K1801BM1, den legend√§ren Mann, der diesen Prozessor zuvor auf Transistorebene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">umgedreht hatte</a> ) in die Diskussion einzubeziehen.  Die Reaktion von Vyacheslav (Yuot), als er das Verhalten auf einem Stand mit einem echten 1801BM1A testete (Rechtschreibung und Zeichensetzung erhalten): </p><br><blockquote>  <u>Stanislav Maslovski:</u> <br>  F√ºr die Wiedergabe werden mindestens zwei Befehle ben√∂tigt <br>  movb und bedingter Sprung in C. <br>  Setzen Sie vorher Flag C auf einen bekannten Zustand <br><br>  <u>Yuot:</u> <br>  Das Flag mit immer zur√ºckgesetzt wird erhalten <br><br>  <u>Stanislav Maslovski:</u> <br>  ja <br>  jetzt nop einf√ºgen <br><br>  <u>Yuot:</u> <br>  Jetzt niemals <br><br>  <u>Yuot:</u> <br>  Abwechselnd 0 1 <br>  Das ist eine Schande </blockquote><p>  Mit Hilfe von Vyacheslav wurden die Details herausgefunden, n√§mlich dass der Grund f√ºr den Fehler darin besteht, dass im Prozessor neben dem PSW ein weiteres 4-Bit-Register vorhanden ist, in dem normalerweise eine Kopie der Flags aus dem PSW gespeichert wird.  Dieses Register ist mit der automatischen Firmware verbunden und bedingte √úberg√§nge √ºbernehmen die Flag-Werte daraus.  Bei der Ausf√ºhrung der Anweisungen MVB, SWAB, MFPS mit dem Empf√§ngerregister wird aufgrund der Besonderheiten der Verarbeitung der Vorzeichenerweiterung und aufgrund eines Fehlers im Mikrocode eine Kopie des Flags C in diesem Register verworfen, und bedingte √úberg√§nge, die dieses Flag verwenden, funktionieren nicht richtig.  Wenn Sie jedoch die folgenden Anweisungen befolgen, wird der tempor√§re Registerwert aus dem PSW wiederhergestellt.  Aus diesem Grund stellt das Einf√ºgen von NOP das korrekte Verhalten wieder her. </p><br><p>  Abschlie√üend m√∂chte ich mich auch bei den Abonnenten des Telegrammkanals <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BK0010 / 11M World</a> f√ºr die Teilnahme an der Diskussion dieses Fehlers und f√ºr die Kommentare zum Text des Artikels bedanken.  Das Titelfoto f√ºr den Artikel wurde freundlicherweise von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Manwe_SandS zur Verf√ºgung gestellt</a> .  Interessanterweise war Manwe kurz davor, denselben Fehler zu entdecken, fast zur gleichen Zeit, als Damir und ich uns bem√ºhten, das Soundproblem zu l√∂sen! </p><br><p>  Jetzt liegt es an den Kleinen (nur ein Scherz) - bringen Sie alle Emulatoren mit dem tats√§chlichen Verhalten des Prozessors in Einklang.  Schlie√ülich kann der Prozessor selbst leider nicht mehr repariert werden. </p><br><p>  <em>Damit werde ich enden.</em>  <em>Ich hoffe es war interessant.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de471020/">https://habr.com/ru/post/de471020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de471010/index.html">Grover-Algorithmus und Datensuche</a></li>
<li><a href="../de471012/index.html">Engineering-Ansatz f√ºr die Softwareentwicklung. Von der Theorie zur Praxis</a></li>
<li><a href="../de471014/index.html">Wir bauen eine autonome Wasserdrohne oder wie ich davon getr√§umt habe, dem Baikal zu helfen, aber ich bin kein Gazprom. Teil 1</a></li>
<li><a href="../de471016/index.html">Datenbankdesign. Best Practices</a></li>
<li><a href="../de471018/index.html">Vergleich der Leistung von PC und Smartphone, einschlie√ülich iPhone 11</a></li>
<li><a href="../de471022/index.html">Enth√ºllung eines 140 Jahre alten Geheimnisses in der Physik</a></li>
<li><a href="../de471024/index.html">Analyse: Was sind Futures und wie werden sie f√ºr Tauschinvestitionen verwendet?</a></li>
<li><a href="../de471026/index.html">TypeScript Macht niemals</a></li>
<li><a href="../de471028/index.html">ROS LKW Wagen. Teil 6. Kilometerz√§hler mit Radgebern, Raumkarte, Lidar</a></li>
<li><a href="../de471032/index.html">Unsichtbares Foto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>