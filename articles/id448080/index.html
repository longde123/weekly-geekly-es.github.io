<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¼ğŸ¼ ğŸ· ğŸ» Pemain sepak bola Robo dari pemula. Kompetisi di MIPT. Android & Arduino & Bluetooth ğŸ––ğŸ½ ğŸ‘©ğŸ¼â€ğŸ­ ğŸ§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini adalah semi-sekuel karya Love, Death and Robots, "Mesin berbasis Arduino yang dikendalikan oleh perangkat Android melalui Bluetooth adalah...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pemain sepak bola Robo dari pemula. Kompetisi di MIPT. Android & Arduino & Bluetooth</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448080/">  Artikel ini adalah semi-sekuel karya <s>Love, Death and Robots,</s> "Mesin berbasis Arduino yang dikendalikan oleh perangkat Android melalui Bluetooth adalah siklus penuh" yang terdiri dari dua bagian ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">satu</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dua</a> ).  Hal-hal yang dijelaskan di sana sedikit dimodifikasi, redone, dan robot itu sendiri dari mesin bepergian berubah menjadi pemain sepak bola.  Secara umum, ada materi yang menarik tentang cara melakukannya. <br><br>  Instruksi sebelumnya dibagi menjadi dua bagian: perangkat lunak dan fisik.  Tidak ada banyak perubahan di kedua arah, jadi kali ini semuanya dalam satu salinan.  Saya akan mengingatkan Anda secara singkat mengapa bagian yang dijelaskan itu diperlukan, tetapi untuk pemahaman yang lengkap lebih baik membahas dua bagian pertama. <br><a name="habracut"></a><br><h2>  Bagian fisik </h2><br>  Berdasarkan semua prinsip yang sama yang dijelaskan dalam artikel pertama: <br><br><ul><li>  sandwich dari Arduino Uno dan Motor Shield. </li><li>  dua motor yang terhubung ke pelindung motor. </li></ul><br>  Dan inilah perubahannya: <br><br><ul><li>  bagian kejutan muncul, anehnya, bertanggung jawab untuk memukul bola. </li><li>  kasingnya sekarang sepenuhnya milik saya, dicetak pada printer 3D. </li></ul><br><h3>  Perumahan </h3><br>  Bentuk adalah lingkaran di mana papan dan dua roda pas.  Perpanjangan untuk bagian di mana gaya benturan akan berdiri. <br><br><img src="https://habrastorage.org/webt/_y/3l/ei/_y3lei6subbvm0y1qfltplolwcg.jpeg"><br><br>  Saat mendesain ini, perhatikan: <br><br><ul><li>  Sisi tinggi.  Robot bertabrakan selama pertandingan, sisi tidak hanya melindungi kabel Anda, tetapi juga lawan Anda dari kabel Anda. </li><li>  Pusat gravitasi dan stabilitas.  Pusat gravitasi tentu saja di mana papan itu berada.  Roda terletak di dekatnya, sehingga tidak akan terpeleset.  Plus, baterai diletakkan di atas papan. </li><li>  Untuk mencegah robot mematuk hidung atau punggungnya, kami menempatkan bola di kit dari ampere di sana-sini (jika tidak ada, Anda dapat menggantinya dengan desain geser lainnya). </li><li>  Kekakuan suatu desain.  Platform tidak boleh melorot di bawah beban papan sirkuit dan motor.  Jangan menjalankan tugas, baik menggunakan bahan keras (kayu lapis), atau memperkuat struktur plastik dengan rak </li></ul><br><img src="https://habrastorage.org/webt/cl/pn/a0/clpna0fp8fdkx_jys3g5dq505iy.jpeg"><br><br><h3>  Dan sekarang omong kosong utama </h3><br>  Bola ditambahkan karena kurangnya "mematuk" mengangkat platform sehingga roda tidak mencapai lantai.  Untuk menghindari hal ini, kami menggunakan roda berdiameter lebih besar atau memperpendek struktur pendukung.  Secara umum, kami menghitung ini sebelumnya! <br><br>  Bagian kejutan.  Dia tidak memukul.  Ketukan, tetapi tidak cukup dingin.  Dalam model pertama kami ada mesin servo yang terhubung dengan bagian yang mirip dengan bajak salju.  Dengan mengubah posisi servo (dari 0 hingga 30 derajat), Anda dapat mensimulasikan pukulan.  Tapi servos itu ternyata lambat, jadi pukulannya menuju ke deuce. <br><br>  Ada dua jalan keluar: tambahkan brengsek pada dampak atau ganti servos dengan solenoida.  Opsi pertama adalah meningkatkan momentum dengan memasok kecepatan ke roda selama satu pukulan.  Dalam praktiknya, ini adalah sebagai berikut: pengguna menekan tombol tekan, robot mulai dari titik (sedikit) dan pada saat yang sama melakukan pemogokan. <br><br>  Pilihan kedua - solenoida mendorong bagian kejut, dan di sini semuanya tergantung pada kekuatan (kecepatan) dari kejut, yang pada gilirannya tergantung pada karakteristik solenoid. <br><br><img src="https://habrastorage.org/webt/ma/da/23/mada23ag3yr3pttwrtk9oxcfzyq.jpeg"><br><br><h2>  Bagian perangkat lunak </h2><br>  Dengan tradisi yang baik, yang sudah menjadi satu artikel, kami akan membagi bagian ini menjadi dua bagian.  Pertama aplikasi Android, lalu sketsa Arduino. <br><br><h3>  Android </h3><br>  Biarkan saya mengingatkan Anda, aplikasi ini ditulis oleh saya dari awal.  Selama enam bulan terakhir, saya sedikit lebih mengerti tentang masalah ini, jadi saya akan menjelaskan apa yang <s>dipikirkan</s> oleh <s>doper</s> . <br><br>  Pertama, mari kita pergi ke penyederhanaan.  Sekarang protokol komunikasi adalah sebagai berikut: "karakter pembuka" + "nilai" + "karakter penutup" (Untuk memahami bagaimana saya mendapatkan nilai-nilai ini dan tentang apa semua ini, lihat analisis lengkap aplikasi di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> ).  Ini berfungsi untuk kecepatan dan sudut.  Karena hanya ada satu jenis serangan, ia tidak memerlukan kebijaksanaan seperti itu, sehingga tim terdiri dari satu karakter "/" (tentang tim hit melalui paragraf). <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String speed, String angle)</span></span></span><span class="hljs-function"> </span></span>{ String speedCommand = <span class="hljs-string"><span class="hljs-string">"#"</span></span> + speed + <span class="hljs-string"><span class="hljs-string">"#"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     String angleCommand = "@" + angle + "@"; try { outputStream.write(speedCommand.getBytes()); //   outputStream.write(angleCommand.getBytes()); } catch(Exception e) { e.printStackTrace(); } }</span></span></code> </pre> <br>  Perintah khas akan terlihat seperti ini: # 125 # @ 180 @, di mana 125 adalah kecepatan dan 180 adalah sudut.  Tentu saja, ini masih bisa disederhanakan, tetapi salah satu tugasnya adalah menjaga cahaya dan keterbacaan, sehingga nantinya bisa dengan mudah dijelaskan, termasuk kepada anak-anak. <br><br>  Perintah sendHit () baru telah muncul, yang dipicu ketika tombol "Hit" ditekan.  Dia mengirim satu "/".  Karena bluetooth 2.0+ biasa tidak menderita dari data yang diterima pada saat yang sama, yaitu, ia tahu bagaimana menempatkan mereka dalam antrian dan tidak kehilangan, kita tidak perlu mengendalikan ini.  Jika Anda akan bekerja dengan Bluetooth Low Energy 4.0+ (yah, tiba-tiba), sudah ada antrian yang perlu diatur secara manual, jika tidak data akan hilang. <br><br><pre> <code class="java hljs">... bHit = findViewById(R.id.b_high_hit); <span class="hljs-comment"><span class="hljs-comment">//   bHit.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { threadCommand.sendHit(); //     "" } }); ... private void sendHit() { try { outputStream.write("/".getBytes()); //   }catch (Exception e) { e.printStackTrace(); } } }</span></span></code> </pre><br><h3>  Arduino </h3><br>  Jadi protokol untuk mengirim perintah telah berubah, algoritma penerimaan juga telah berubah.  Dia disederhanakan.  Satu jika pelacakan tendangan juga ditambahkan.  Analisis lengkap sketsa ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  bt.read () membaca satu karakter.  Jika "#", maka simbol kecepatan dimulai.  Kami membacanya sampai karakter penutup "#" muncul.  Perulangan for tidak dapat digunakan di sini, karena panjang kecepatan tidak diketahui sebelumnya (dapat berupa angka tunggal, dua digit, atau tiga digit).  Nilai yang dihasilkan ditulis ke variabel. <br><br>  Hal yang sama terjadi dengan belokan.  Setelah kecepatan dan sudut dibaca, kami meneruskan semuanya ke fungsi belok (kecepatan int, sudut int). <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(BTSerial.available() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<span class="hljs-comment"><span class="hljs-comment">//    char a = BTSerial.read(); //   if(a == '#') { //  sp=""; char b = BTSerial.read(); while( b != '#') { //   ,     sp+=b; b = BTSerial.read(); } } else if (a == '@') {//  val = ""; char b = BTSerial.read(); while(b != '@') { //    val+=b; //    b = BTSerial.read(); } turn(val.toInt(), sp.toInt()); //   ,   } else if (a == '/') { //,    Serial.println(a); servo.write(30); //  delay(150); servo.write(0); //    } lastTakeInformation = millis(); } else { if(millis() - lastTakeInformation &gt; 150) { //     150 //  lastTakeInformation = 0; analogWrite(speedRight, 0); analogWrite(speedLeft, 0); } } delay(5); }</span></span></code> </pre><br>  Fungsi turn () menentukan arah mana yang harus digerakkan (maju, mundur) dan ke mana harus belok (kanan, kiri, lurus).  Pembatasan jika (kecepatan&gt; 0 &amp;&amp; kecepatan &lt;70) diperlukan agar robot tidak melambat jika byte hilang.  Menghadapi ini ketika saya meningkatkan kecepatan transmisi (dimainkan dengan penundaan 100-300ms antara tim) - kadang-kadang nilai kecepatan tidak mencapai dan berubah menjadi 0, 40 (walaupun, misalnya, 240 sebenarnya dikirim).  Kruk, tapi berhasil. <br>  Ini bisa disebut "perlindungan terhadap faktor-faktor yang tidak terkendali." <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">turn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> angle, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(speed &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; speed &lt; <span class="hljs-number"><span class="hljs-number">70</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(speed &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { digitalWrite(dirLeft, HIGH); digitalWrite(dirRight, HIGH); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sp &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { digitalWrite(dirLeft, LOW); digitalWrite(dirRight, LOW); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(angle &gt; <span class="hljs-number"><span class="hljs-number">149</span></span>) { analogWrite(speedLeft, speed); analogWrite(speedRight, speed - <span class="hljs-number"><span class="hljs-number">65</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  } else if (angle &lt; 31) { analogWrite(speedLeft, speed - 65); //  analogWrite(speedRight, speed); } else { analogWrite(speedLeft, speed); analogWrite(speedRight, speed); } }</span></span></code> </pre><br><h3>  Kompetisi di MIPT bukan total </h3><br>  Dengan robot kami, kami pergi ke kompetisi sepakbola robot, yang diatur dan diadakan di Institut Fisika dan Teknologi Moskow, Dolgoprudny, 14/4/2019.  Kami berhasil mencapai final 1 \ 4, tetapi tidak maju lebih jauh. <br><br><img src="https://habrastorage.org/webt/f0/n2/lx/f0n2lxvkzlyxv0jbm9rsnd6xffe.jpeg"><br><br>  Prosesnya sendiri menarik bagi kami, tetapi di sini saya akan menggambarkan kesimpulan yang berhasil kami buat dengan melihat robot di lapangan: <br><br><ul><li>  perlu lebih kuat.  Empat roda atau mesin yang lebih kuat dan roda lainnya diinginkan.  Meski, tentu saja, model roda empat yang terlihat lebih menguntungkan </li><li>  manajemen tidak tinggi.  Diperlukan untuk memindahkan robot ke putaran tangki (belok di satu titik karena roda berputar ke arah yang berlawanan), jika tidak, radius belokan terlalu besar.  Dan secara umum, opsi dengan empat panah, daripada lingkaran dengan kecepatan proporsional, lebih disukai <b>untuk sepak bola</b> .  Opsi yang dijelaskan lebih cocok untuk balap di mana Anda mengemudi terus menerus, dan di sini Anda perlu kejelasan (saya berbalik 10 derajat di sekitar poros saya, mengarah ke bola dan menekan tombol ke depan. Tapi kemudian, ketika saya sudah meraih bola, saya ingin manuver fleksibel, tetapi di sini Anda perlu proporsional kecepatan ... Anda perlu menggabungkan hal ini entah bagaimana). </li></ul><br>  Komentar dan saran akan sangat bahagia.  Di bawah artikel sebelumnya, komentar terkadang lebih menarik daripada artikel itu sendiri.  Terima kasih, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sasha</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dana atas pekerjaannya</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448080/">https://habr.com/ru/post/id448080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448070/index.html">Substitusi impor dalam praktek. Bagian 3. Sistem Operasi</a></li>
<li><a href="../id448072/index.html">Pemahaman tentang gabungan rusak. Ini jelas bukan persimpangan lingkaran, jujur</a></li>
<li><a href="../id448074/index.html">ALU dengan 12 transistor (sebenarnya tidak)</a></li>
<li><a href="../id448076/index.html">Sistem Simulasi Go Sederhana</a></li>
<li><a href="../id448078/index.html">Pada estimasi autoregresif kepadatan spektral dari sinyal stasioner</a></li>
<li><a href="../id448082/index.html">[Sebelum Senin] Sindrom Mata Kering</a></li>
<li><a href="../id448084/index.html">Foto lubang hitam - apakah bisa digunakan?</a></li>
<li><a href="../id448088/index.html">Produksi mesin plasma di Rusia</a></li>
<li><a href="../id448090/index.html">Frontend Weekly Digest (8 - 14 Apr 2019)</a></li>
<li><a href="../id448094/index.html">Docker: cara menggunakan aplikasi tumpukan penuh dan tidak berubah menjadi abu-abu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>