<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐚 🧡 👂🏼 Cara memulai dengan Hibernate Search 🌤️ 🌿 🚳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saat ini, banyak yang mengembangkan aplikasi Java enterprise menggunakan spring boot. Dalam perjalanan proyek, tugas sering muncul untuk membuat mesin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara memulai dengan Hibernate Search</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rostelecom/blog/428578/"> Saat ini, banyak yang mengembangkan aplikasi Java enterprise menggunakan spring boot.  Dalam perjalanan proyek, tugas sering muncul untuk membuat mesin pencari dengan kompleksitas yang berbeda-beda.  Misalnya, jika Anda mengembangkan sistem yang menyimpan data tentang pengguna dan buku, maka cepat atau lambat mungkin memerlukan pencarian berdasarkan nama pengguna / nama keluarga, dengan nama / anotasi untuk buku. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/748/751/d9b/748751d9be49150a23d86e58cff726ed.png"><br><br>  Dalam posting ini, saya akan secara singkat berbicara tentang alat yang dapat membantu menyelesaikan masalah seperti itu.  Dan kemudian saya akan menyajikan proyek demo layanan pencarian, di mana fitur yang lebih menarik dan kompleks diterapkan - sinkronisasi entitas, database, dan indeks pencarian.  Dengan menggunakan contoh proyek demo ini, Anda dapat berkenalan dengan Pencarian Hibernate, cara mudah untuk berkomunikasi dengan indeks teks lengkap Solr, Lucene, ElasticSearch. <br><a name="habracut"></a><br>  Di antara alat untuk menyebarkan mesin pencari, saya akan memilih tiga. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lucene</a> adalah perpustakaan java yang menyediakan antarmuka basis data denormalized pencarian teks lengkap tingkat rendah.  Dengan bantuannya, Anda dapat membuat indeks dan mengisinya dengan catatan (dokumen).  Baca lebih lanjut tentang Lucene di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Solr</a> adalah produk perangkat lunak berbasis Lucene, database teks lengkap, server web terpisah yang berdiri sendiri.  Ini memiliki antarmuka http untuk pengindeksan dan permintaan teks lengkap, memungkinkan Anda untuk mengindeks dokumen dan mencari mereka.  Solr memiliki API sederhana dan UI bawaan, yang menghilangkan kebutuhan untuk manipulasi indeks secara manual.  Pada Habré ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">analisis komparatif yang</a> baik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari</a> Solr dan Lucene. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ElasticSearch</a> adalah analog Solr yang lebih modern.  Itu juga didasarkan pada Apache Lucene.  Dibandingkan dengan Solr, ElasticSearch dapat menahan muatan yang lebih tinggi saat mengindeks dokumen dan karenanya dapat digunakan untuk mengindeks file log.  Di internet Anda dapat menemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tabel</a> terperinci yang membandingkan Solr dan ElasticSearch. <br><br>  Ini, tentu saja, bukan daftar lengkap, di atas, saya hanya memilih sistem yang pantas paling diperhatikan.  Ada banyak sistem untuk mengatur pencarian.  PostgreSQL memiliki kemampuan pencarian teks lengkap;  Jangan lupa tentang Sphinx. <br><br><h2>  Masalah utama </h2><br>  Kami lolos ke hal utama.  Untuk penyimpanan data yang andal / konsisten, RDB (basis data relasional) biasanya digunakan.  Ini memberikan transaksionalitas sesuai dengan prinsip-prinsip ACID.  Agar mesin pencari berfungsi, indeks digunakan untuk menambahkan entitas dan bidang tabel yang digunakan untuk melakukan pencarian.  Yaitu, ketika objek baru memasuki sistem, itu harus disimpan baik dalam database relasional dan dalam indeks teks lengkap. <br><br>  Jika sifat transaksional dari perubahan tersebut tidak diatur dalam aplikasi Anda, maka berbagai macam desinkronisasi dapat terjadi.  Misalnya, Anda memilih dari database, tetapi objek ini tidak ada dalam indeks.  Atau sebaliknya: ada catatan objek dalam indeks, dan itu dihapus dari RDB. <br><br>  Ada beberapa cara untuk mengatasi masalah ini.  Anda dapat secara manual mengatur perubahan transaksional menggunakan mekanisme JTA dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Spring Transaction Management</a> .  Atau Anda bisa menggunakan cara yang lebih menarik - gunakan Hibernate Search, yang akan melakukan semuanya dengan sendirinya.  Secara default, Lucene digunakan, yang menyimpan data indeks di dalam sistem file, secara umum, koneksi ke indeks dikonfigurasi.  Ketika sistem dimulai, Anda memulai metode sinkronisasi startAndWait (), dan saat sistem sedang berjalan, catatan akan disimpan dalam RDB dan indeks. <br><br>  Untuk menggambarkan solusi ini, saya menyiapkan proyek demo dengan Pencarian Hibernate.  Kami akan membuat layanan yang berisi metode untuk membaca, memperbarui, dan mencari pengguna.  Ini dapat membentuk dasar dari basis data internal dengan kemungkinan pencarian teks lengkap dengan nama depan, nama belakang atau meta-data lainnya.  Untuk berinteraksi dengan basis data relasional, kami menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kerangka kerja Spring Data Jpa</a> . <br><br>  Mari kita mulai dengan kelas entitas untuk mewakili pengguna: <br><br><pre><code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.search.annotations.Field <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.search.annotations.Indexed <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Entity <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Id <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Table <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table(name = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"users"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@Indexed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span></span>(        <span class="hljs-meta"><span class="hljs-meta">@Id</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> id: <span class="hljs-built_in"><span class="hljs-built_in">Long</span></span>,        <span class="hljs-meta"><span class="hljs-meta">@Field</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String,        <span class="hljs-meta"><span class="hljs-meta">@Field</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> surname: String,        <span class="hljs-meta"><span class="hljs-meta">@Field</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> phoneNumber: String)</code> </pre> <br>  Semuanya standar, kami menunjukkan entitas dengan semua anotasi yang diperlukan untuk data pegas.  Menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Entity, kami</a> menunjukkan entitas, menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Tabel kami</a> menunjukkan label dalam database.  Anotasi yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">diindeks</a> menunjukkan bahwa suatu entitas dapat diindeks dan akan jatuh ke dalam indeks teks lengkap. <br><br>  Repositori JPA diperlukan untuk operasi CRUD pada pengguna di database: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserRepository</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">JpaRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">User, Long</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Layanan untuk bekerja dengan pengguna, UserService.java: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.stereotype.Service <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.transaction.Transactional <span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> userRepository: UserRepository, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> userSearch: UserSearch) {   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;User&gt; {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> userRepository.findAll()   }   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">search</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List&lt;User&gt; {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> userSearch.searchUsers(text)   }   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(user: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">User</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: User {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> userRepository.save(user)   } }</code> </pre> <br>  FindAll mendapatkan semua pengguna langsung dari database.  Pencarian menggunakan komponen userSearch untuk mengambil pengguna dari indeks.  Komponen untuk bekerja dengan indeks pencarian pengguna: <br><br><pre> <code class="hljs pgsql">@Repository @Transactional <span class="hljs-type"><span class="hljs-type">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> UserSearch(@PersistenceContext val entityManager: EntityManager) {   fun searchUsers(<span class="hljs-type"><span class="hljs-type">text</span></span>: String): List&lt;<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>&gt; {       // fullTextEntityManager,  entityManager       val fullTextEntityManager = org.hibernate.<span class="hljs-keyword"><span class="hljs-keyword">search</span></span>.jpa.<span class="hljs-keyword"><span class="hljs-keyword">Search</span></span>.getFullTextEntityManager(entityManager)       //     Hibernate <span class="hljs-keyword"><span class="hljs-keyword">Search</span></span> query DSL       val queryBuilder = fullTextEntityManager.searchFactory               .buildQueryBuilder().forEntity(<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>.java).<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>()       // ,            val query = queryBuilder               .keyword()               .onFields("name")               .matching(<span class="hljs-type"><span class="hljs-type">text</span></span>)               .createQuery()       // Lucene Query  Hibernate Query <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>       val jpaQuery: FullTextQuery = fullTextEntityManager.createFullTextQuery(query, <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>.java)       //         <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jpaQuery.resultList.map { result -&gt; result <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> }.toList()   } }</code> </pre><br>  Kontroler REST, UserController.java: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.web.bind.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.GetMapping <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.web.bind.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.PostMapping <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.web.bind.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.RequestBody <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.web.bind.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.RestController <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.* <span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserController</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> userService: UserService) {   <span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/users"</span></span></span><span class="hljs-meta">)</span></span>   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;User&gt; {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> userService.findAll()   }   <span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/users/search"</span></span></span><span class="hljs-meta">)</span></span>   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">search</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List&lt;User&gt; {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> userService.search(text)   }   <span class="hljs-meta"><span class="hljs-meta">@PostMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/users"</span></span></span><span class="hljs-meta">)</span></span>   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">insertUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@RequestBody</span></span></span></span><span class="hljs-function"><span class="hljs-params"> user: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">User</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: User {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> userService.saveUser(user)   } }</code> </pre> <br>  Kami menggunakan dua metode untuk mengekstrak dari database dan mencari berdasarkan string. <br><br>  Sebelum aplikasi berjalan, perlu menginisialisasi indeks, kami melakukan ini menggunakan ApplicationListener. <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.rti <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.search.jpa.Search <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.context.event.ApplicationReadyEvent <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.ApplicationListener <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.stereotype.Component <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.EntityManager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.PersistenceContext <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.transaction.Transactional <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BuildSearchService</span></span></span></span>( <span class="hljs-meta"><span class="hljs-meta">@PersistenceContext</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> entityManager: EntityManager) : ApplicationListener&lt;ApplicationReadyEvent&gt; { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApplicationEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ApplicationReadyEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> fullTextEntityManager = Search.getFullTextEntityManager(entityManager) fullTextEntityManager.createIndexer().startAndWait() } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (e: InterruptedException) { println(<span class="hljs-string"><span class="hljs-string">"An error occurred trying to build the search index: "</span></span> + e.toString()) } } }</code> </pre> <br>  Untuk pengujian kami menggunakan PostgreSQL: <br><br><pre> <code class="java hljs">spring.datasource.url=jdbc:postgresql:users spring.datasource.username=postgres spring.datasource.password=postgres spring.datasource.driver-<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span></span>=org.postgresql.Driver spring.datasource.name=users</code> </pre><br>  Akhirnya, <code>build.gradle</code> : <br><br><pre> <code class="java hljs">buildscript {   ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.2.61'</span></span>   ext.spring_boot_version = <span class="hljs-string"><span class="hljs-string">'1.5.15.RELEASE'</span></span>   repositories {       jcenter()   }   dependencies {       classpath <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span></span>       classpath <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-allopen:$kotlin_version"</span></span>       classpath <span class="hljs-string"><span class="hljs-string">"org.springframework.boot:spring-boot-gradle-plugin:$spring_boot_version"</span></span>       classpath <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-noarg:$kotlin_version"</span></span>   } } apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">"kotlin-spring"</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">"kotlin-jpa"</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'org.springframework.boot'</span></span> noArg {   invokeInitializers = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } jar {   baseName = <span class="hljs-string"><span class="hljs-string">'gs-rest-service'</span></span>   version = <span class="hljs-string"><span class="hljs-string">'0.1.0'</span></span> } repositories {   jcenter() } dependencies {   compile <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"</span></span>   compile <span class="hljs-string"><span class="hljs-string">'org.springframework.boot:spring-boot-starter-web'</span></span>   compile <span class="hljs-string"><span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-jpa'</span></span>   compile group: <span class="hljs-string"><span class="hljs-string">'postgresql'</span></span>, name: <span class="hljs-string"><span class="hljs-string">'postgresql'</span></span>, version: <span class="hljs-string"><span class="hljs-string">'9.1-901.jdbc4'</span></span>   compile group: <span class="hljs-string"><span class="hljs-string">'org.hibernate'</span></span>, name: <span class="hljs-string"><span class="hljs-string">'hibernate-core'</span></span>, version: <span class="hljs-string"><span class="hljs-string">'5.3.6.Final'</span></span>   compile group: <span class="hljs-string"><span class="hljs-string">'org.hibernate'</span></span>, name: <span class="hljs-string"><span class="hljs-string">'hibernate-search-orm'</span></span>, version: <span class="hljs-string"><span class="hljs-string">'5.10.3.Final'</span></span>   compile group: <span class="hljs-string"><span class="hljs-string">'com.h2database'</span></span>, name: <span class="hljs-string"><span class="hljs-string">'h2'</span></span>, version: <span class="hljs-string"><span class="hljs-string">'1.3.148'</span></span>   testCompile(<span class="hljs-string"><span class="hljs-string">'org.springframework.boot:spring-boot-starter-test'</span></span>) }</code> </pre><br>  Demo ini adalah contoh sederhana menggunakan teknologi Hibernate Search, yang dengannya Anda dapat memahami cara berteman dengan Apache Lucene dan Spring Data Jpa.  Jika perlu, proyek berdasarkan demo ini dapat dihubungkan ke Apache Solr atau ElasticSearch.  Arah potensial untuk proyek ini adalah untuk mencari indeks besar (&gt; 10 GB) dan mengukur kinerja di dalamnya.  Anda dapat membuat konfigurasi untuk ElasticSearch atau konfigurasi indeks yang lebih kompleks dengan menjelajahi kemungkinan Pencarian Hibernate di tingkat yang lebih dalam. <br><br>  <b>Tautan yang bermanfaat:</b> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Proyek ini ada di github</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cara menggunakan Kotlin dengan Spring Data Jpa</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Menggunakan Kotlin dan Spring boot</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Demo boot Kotlin dan Spring di Github</a> <br></li><li>  <a href="">Konfigurasi Data Musim Semi Jpa dan Kotlin - maven</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Plugin kompiler Kotlin - Jpa dan Spring</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Integrasi Boot musim semi dan Pencarian Hibernate</a> (+ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github</a> ) <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kompatibilitas Versi Pencarian Hibernasi</a> <br></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id428578/">https://habr.com/ru/post/id428578/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id428568/index.html">Bereaksi Panduan Pengembangan Aplikasi Web Asli</a></li>
<li><a href="../id428570/index.html">Fungsi Tingkat Tinggi dalam JavaScript</a></li>
<li><a href="../id428572/index.html">Komponen Orde Tinggi dalam Bereaksi</a></li>
<li><a href="../id428574/index.html">Bawa komunikasi korporat ke tingkat selanjutnya dengan Zextras Chat</a></li>
<li><a href="../id428576/index.html">[bookmark] versi PDF dari tutorial Node.js dan panduan JavaScript baru</a></li>
<li><a href="../id428580/index.html">Panduan Komunikasi yang Baik</a></li>
<li><a href="../id428582/index.html">Sejarah OOP yang Terlupakan</a></li>
<li><a href="../id428588/index.html">Intisari acara TI pada bulan November (bagian dua)</a></li>
<li><a href="../id428590/index.html">Interaksi mikro dan permintaan mikro di antarmuka</a></li>
<li><a href="../id428592/index.html">Berhentilah mempekerjakan "manajer yang efektif." Mereka tidak hanya tidak berguna, tetapi juga berbahaya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>