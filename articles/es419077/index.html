<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ£Ô∏è ü§±üèª üçí Localizaci√≥n de aplicaciones en iOS. Parte 1. ¬øQu√© tenemos? üêç üíå üçù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Localizaci√≥n de aplicaciones en iOS 
 Parte 1. ¬øQu√© tenemos? 


 Gu√≠a de recursos de cadena localizada 
 Introduccion 


 Hace unos a√±os, me sumerg√≠ e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Localizaci√≥n de aplicaciones en iOS. Parte 1. ¬øQu√© tenemos?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419077/"><h1 id="lokalizaciya-prilozheniy-v-ios">  Localizaci√≥n de aplicaciones en iOS </h1><br><h2 id="chast-1-chto-my-imeem">  Parte 1. ¬øQu√© tenemos? </h2><br><p>  <strong><em>Gu√≠a de recursos de cadena localizada</em></strong> </p><br><h3 id="vvedenie">  Introduccion </h3><br><p>  Hace unos a√±os, me sumerg√≠ en el mundo m√°gico del desarrollo de iOS, que con toda su esencia me prometi√≥ un futuro feliz en el campo de las TI.  Sin embargo, profundizando en las caracter√≠sticas de la plataforma y el entorno de desarrollo, me enfrent√© a muchas dificultades e inconvenientes para resolver tareas aparentemente muy triviales: el "conservadurismo innovador" de Apple a veces hace que los desarrolladores sean muy sofisticados para satisfacer al cliente desenfrenado "WANT". </p><br><p>  Uno de estos problemas es el problema de localizar los recursos de cadena de la aplicaci√≥n.  Me gustar√≠a dedicar varias de mis primeras publicaciones sobre las extensiones de Habr a este problema. </p><a name="habracut"></a><br><p>  Inicialmente, esperaba ajustar mis pensamientos en un art√≠culo, pero la cantidad de informaci√≥n que me gustar√≠a presentar era bastante grande.  En este art√≠culo intentar√© descubrir la esencia de los mecanismos est√°ndar para trabajar con recursos localizados con √©nfasis en algunos aspectos que la mayor√≠a de las gu√≠as y tutoriales descuidan.  El material est√° dirigido principalmente a desarrolladores principiantes (o aquellos que no se han encontrado con tales tareas).  Para desarrolladores experimentados, esta informaci√≥n puede no ser particularmente valiosa.  Pero sobre los inconvenientes y desventajas que se pueden encontrar en la pr√°ctica, lo dir√© en el futuro ... </p><br><h3 id="iz-pod-korobki-kak-organizovano-hranenie-strokovyh-resursov-v-ios-prilozheniyah">  Fuera de la caja  C√≥mo se organiza el almacenamiento de recursos de cadena en aplicaciones iOS </h3><br><p>  Para empezar, notamos que la presencia de mecanismos de localizaci√≥n en la plataforma ya es una gran ventaja, porque  salva al programador del desarrollo adicional y establece un formato √∫nico para trabajar con datos.  Y a menudo, los mecanismos b√°sicos son suficientes para la implementaci√≥n de proyectos relativamente peque√±os. </p><br><p>  Y entonces, ¬øqu√© oportunidades nos brinda Xcode "fuera de la caja"?  Primero, veamos el est√°ndar para almacenar recursos de cadena en un proyecto. </p><br><p> En proyectos con contenido est√°tico, los datos de cadena se pueden almacenar directamente en la interfaz (archivos de marcado <em><code>.storyboard</code></em> y <em><code>.xib</code></em> , que a su vez son archivos XML representados con las herramientas de <em>Interface Builder</em> ) o en c√≥digo.  El primer enfoque nos permite simplificar y acelerar el proceso de marcado de pantallas y pantallas individuales, como  el desarrollador puede observar la mayor parte del cambio sin compilar la aplicaci√≥n.  Sin embargo, en este caso no es dif√≠cil encontrarse con redundancia de datos (si varios elementos utilizan el mismo texto, las pantallas).  El segundo enfoque simplemente elimina el problema de la redundancia de datos, pero lleva a la necesidad de llenar pantallas manualmente (configurando <em><code>IBOutlet</code></em> adicionales y asign√°ndoles los valores de texto correspondientes), lo que a su vez conduce a la redundancia de c√≥digo (por supuesto, excepto en los casos en que el texto deber√≠a ser instalado directamente por el c√≥digo de la aplicaci√≥n). </p><br><p>  Adem√°s, Apple proporciona una extensi√≥n de archivo est√°ndar <em><code>.strings</code></em> .  Este est√°ndar regula el formato para almacenar datos de cadena en forma de una matriz asociativa ( <code>"-"</code> ): </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"key"</span></span> = <span class="hljs-string"><span class="hljs-string">"value"</span></span>;</code> </pre> <br><p>  La clave distingue entre may√∫sculas y min√∫sculas, permite el uso de espacios, guiones bajos, signos de puntuaci√≥n y caracteres especiales. </p><br><p>  Es importante tener en cuenta que, a pesar de la sintaxis directa, los archivos de <em>cadenas</em> son fuentes regulares de errores durante la compilaci√≥n, el ensamblaje o el funcionamiento de una aplicaci√≥n.  Hay varias razones para esto. </p><br><p>  En primer lugar, los errores de sintaxis.  La falta de punto y coma, signos de igual, comillas extra o sin escape conducir√°n inevitablemente a un error del compilador.  Adem√°s, Xcode apuntar√° al archivo con el error, pero no resaltar√° la l√≠nea en la que algo est√° mal.  Encontrar un error tipogr√°fico puede llevar un tiempo considerable, especialmente si el archivo contiene una cantidad significativa de datos. </p><br><p>  En segundo lugar, duplicaci√≥n de claves.  La aplicaci√≥n, por supuesto, no se bloquear√° por ello, pero se pueden mostrar datos incorrectos al usuario.  La cuesti√≥n es que cuando se accede a una l√≠nea por clave, se extrae el valor correspondiente a la √∫ltima aparici√≥n de la clave en el archivo. </p><br><p>  Como resultado, un dise√±o simple requiere que el programador sea muy minucioso y atento al llenar archivos con datos. </p><br><p><del>  Bien informado </del>  los desarrolladores pueden exclamar inmediatamente: <em>"¬øPero qu√© pasa con JSON y PLIST? ¬øQu√© no les gust√≥?"</em>  Bueno, en primer lugar, <em><code>JSON</code></em> y <em><code>PLIST</code></em> (de hecho, <em><code>XML</code></em> ordinario) son est√°ndares universales que permiten almacenar cadenas y datos num√©ricos, l√≥gicos ( <em><code>BOOL</code></em> ), binarios, hora y fecha, as√≠ como colecciones indexadas ( <em><code>Array</code></em> ) y asociativas ( <em><code>Dictionary</code></em> ) matrices.  En consecuencia, la sintaxis de estos est√°ndares est√° m√°s saturada y, por lo tanto, es m√°s f√°cil mordisquearlos.  En segundo lugar, la velocidad de procesamiento de dichos archivos es ligeramente inferior a la de los archivos de cadenas, nuevamente debido a la sintaxis m√°s compleja.  Esto sin mencionar el hecho de que para trabajar con ellos es necesario realizar una serie de manipulaciones en el c√≥digo. </p><br><h3 id="lokalizovali-lokalizovali-da-ne-vylokalizovali-lokalizaciya-polzovatelskogo-interfeysa">  Localizado, localizado, pero no localizado.  Localizaci√≥n de interfaz de usuario </h3><br><p>  Y as√≠, con los est√°ndares resueltos, ahora veamos c√≥mo usarlo todo. </p><br><p>  Vamos en orden.  Primero, cree una <em>aplicaci√≥n de vista √∫nica</em> simple y agregue algunos componentes de texto al <em>Main.storyboard</em> en el <em>ViewController</em> . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/310/a0b/c0d/310a0bc0df4192cd2ab87ad46407666a.png" width="50%" height="50%"><br><br><p>  El contenido en este caso se almacena directamente en la interfaz.  Para localizarlo, debe hacer lo siguiente: </p><br><p>  1) Ir a la configuraci√≥n del proyecto </p><br><img src="https://habrastorage.org/getpro/habr/post_images/b9e/0bb/f6e/b9e0bbf6eb66b5d8acb88ee3b29fd45c.png" width="50%" height="50%"><br><br><p>  2) Luego - del <strong><em>objetivo</em></strong> al <strong><em>proyecto</em></strong> </p><br><img src="https://habrastorage.org/getpro/habr/post_images/bb5/bf0/334/bb5bf033410cedeb98e3e46399637d7b.png" width="50%" height="50%"><br><br><p>  3) Abra la pesta√±a <strong><em>Informaci√≥n</em></strong> </p><br><img src="https://habrastorage.org/getpro/habr/post_images/324/5bd/cdd/3245bdcdd605153e52668fd795f65720.png" width="50%" height="50%"><br><br><p>  En la <strong><em>secci√≥n de Localizaciones</em></strong> , vemos de inmediato que ya tenemos la entrada <em>"Ingl√©s - Idioma de desarrollo"</em> .  Esto significa que el ingl√©s est√° configurado como el idioma de desarrollo (o predeterminado). </p><br><p>  Agreguemos otro idioma ahora.  Para hacer esto, haga clic en " <strong>+</strong> " y seleccione el idioma deseado (por ejemplo, eleg√≠ ruso).  Caring Xcode nos ofrece de inmediato elegir qu√© archivos localizar para el idioma agregado. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/781/801/3ae/7818013aee9b0574048779957404bb31.png" width="50%" height="50%"><br><br><p>  Haga clic en <strong>Finalizar</strong> , vea lo que sucedi√≥.  En el navegador del proyecto, los botones para mostrar el anidamiento aparecieron cerca de los archivos seleccionados.  Al hacer clic en ellos, vemos que los archivos seleccionados previamente contienen los archivos de localizaci√≥n creados. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/5b0/882/089/5b0882089822427b954eb7ce5e497048.png" width="35%" height="35%"><br><br><p>  Por ejemplo, <strong><em><code>Main.storyboard (Base)</code></em></strong> es el archivo de marcado de interfaz predeterminado en el lenguaje de desarrollo base, y al <strong><em><code>Main.strings (Russian)</code></em></strong> la localizaci√≥n, el <strong><em><code>Main.strings (Russian)</code></em></strong> asociado se cre√≥ en pares, un archivo de cadena para la localizaci√≥n rusa.  Al abrirlo, puede ver lo siguiente: </p><br><pre> <code class="hljs vbscript">/* <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span> = <span class="hljs-string"><span class="hljs-string">"UILabel"</span></span>; text = <span class="hljs-string"><span class="hljs-string">"Label"</span></span>; ObjectID = <span class="hljs-string"><span class="hljs-string">"tQe-tG-eeo"</span></span>; */ <span class="hljs-string"><span class="hljs-string">"tQe-tG-eeo.text"</span></span> = <span class="hljs-string"><span class="hljs-string">"Label"</span></span>; /* <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span> = <span class="hljs-string"><span class="hljs-string">"UITextField"</span></span>; placeholder = <span class="hljs-string"><span class="hljs-string">"TextField"</span></span>; ObjectID = <span class="hljs-string"><span class="hljs-string">"cpp-y2-Z0N"</span></span>; */ <span class="hljs-string"><span class="hljs-string">"cpp-y2-Z0N.placeholder"</span></span> = <span class="hljs-string"><span class="hljs-string">"TextField"</span></span>; /* <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span> = <span class="hljs-string"><span class="hljs-string">"UIButton"</span></span>; normalTitle = <span class="hljs-string"><span class="hljs-string">"Button"</span></span>; ObjectID = <span class="hljs-string"><span class="hljs-string">"EKl-Rz-Dc2"</span></span>; */ <span class="hljs-string"><span class="hljs-string">"EKl-Rz-Dc2.normalTitle"</span></span> = <span class="hljs-string"><span class="hljs-string">"Button"</span></span>;</code> </pre> <br><p>  Aqu√≠, en general, todo es simple, pero en aras de la claridad, consideraremos con m√°s detalle, prestando atenci√≥n a los comentarios generados por el cuidado Xcode: </p><br><pre> <code class="hljs vbscript">/* <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span> = <span class="hljs-string"><span class="hljs-string">"UILabel"</span></span>; text = <span class="hljs-string"><span class="hljs-string">"Label"</span></span>; ObjectID = <span class="hljs-string"><span class="hljs-string">"tQe-tG-eeo"</span></span>; */ <span class="hljs-string"><span class="hljs-string">"tQe-tG-eeo.text"</span></span> = <span class="hljs-string"><span class="hljs-string">"Label"</span></span>;</code> </pre> <br><p>  Aqu√≠ hay una instancia de la clase <strong><em><code>UILabel</code></em></strong> con el valor <strong><em><code>"Label"</code></em></strong> para el par√°metro de <strong><em><code>text</code></em></strong> .  <strong><em><code>ObjectID</code></em></strong> : el identificador del objeto en el archivo de marcado: esta es una l√≠nea √∫nica asignada a cualquier componente en el momento en que se coloca en el <em><code>Storyboard/Xib</code></em> .  Es a partir del <em><code>ObjectID</code></em> y el nombre del par√°metro del objeto (en este caso, <em><code>text</code></em> ) que se forma la clave, y el registro en s√≠ puede interpretarse formalmente de la siguiente manera: </p><br><p>  Establezca el par√°metro de texto del objeto tQe-tG-eeo en Etiqueta. </p><br><p>  En este registro, solo el " <em>valor</em> " est√° sujeto a cambios.  Reemplace " <em>Etiqueta</em> " con " <em>Etiqueta</em> ".  Haremos lo mismo con otros objetos. </p><br><pre> <code class="hljs vbscript">/* <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span> = <span class="hljs-string"><span class="hljs-string">"UILabel"</span></span>; text = <span class="hljs-string"><span class="hljs-string">"Label"</span></span>; ObjectID = <span class="hljs-string"><span class="hljs-string">"tQe-tG-eeo"</span></span>; */ <span class="hljs-string"><span class="hljs-string">"tQe-tG-eeo.text"</span></span> = <span class="hljs-string"><span class="hljs-string">""</span></span>; /* <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span> = <span class="hljs-string"><span class="hljs-string">"UITextField"</span></span>; placeholder = <span class="hljs-string"><span class="hljs-string">"TextField"</span></span>; ObjectID = <span class="hljs-string"><span class="hljs-string">"cpp-y2-Z0N"</span></span>; */ <span class="hljs-string"><span class="hljs-string">"cpp-y2-Z0N.placeholder"</span></span> = <span class="hljs-string"><span class="hljs-string">" "</span></span>; /* <span class="hljs-keyword"><span class="hljs-keyword">Class</span></span> = <span class="hljs-string"><span class="hljs-string">"UIButton"</span></span>; normalTitle = <span class="hljs-string"><span class="hljs-string">"Button"</span></span>; ObjectID = <span class="hljs-string"><span class="hljs-string">"EKl-Rz-Dc2"</span></span>; */ <span class="hljs-string"><span class="hljs-string">"EKl-Rz-Dc2.normalTitle"</span></span> = <span class="hljs-string"><span class="hljs-string">""</span></span>;</code> </pre> <br><p>  Lanzamos nuestra aplicaci√≥n. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/9e7/85a/332/9e785a3328aff1923329541d31447672.png" width="50%" height="50%"><br><br><p>  Pero que vemos?  La aplicaci√≥n utiliza localizaci√≥n b√°sica.  ¬øC√≥mo verificar si realizamos la transferencia correctamente? </p><br><p>  Aqu√≠ vale la pena hacer una peque√±a digresi√≥n y cavar un poco en la direcci√≥n de las caracter√≠sticas de la plataforma iOS y la estructura de la aplicaci√≥n. </p><br><p>  Para comenzar, considere cambiar la estructura del proyecto en el proceso de agregar localizaci√≥n.  As√≠ es como se ve el directorio del proyecto antes de agregar la localizaci√≥n rusa: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/bb3/0b2/f07/bb30b2f0799f2c7ce2433aa7ec2350fc.png" width="50%" height="50%"><br><br><p>  Y as√≠ despu√©s: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/ae7/a10/b14/ae7a10b14491da04c89ce8e456cf5ac1.png" width="50%" height="50%"><br><br><p>  Como podemos ver, Xcode cre√≥ un nuevo directorio <em><code>ru.lproj</code></em> , en el que coloc√≥ las cadenas localizadas creadas. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/ceb/ca2/ff5/cebca2ff5edaae9d6a1398f9e41e7652.png" width="50%" height="50%"><br><br><p>  ¬øY d√≥nde est√° la estructura del proyecto Xcode para la aplicaci√≥n iOS terminada?  Y a pesar del hecho de que esto ayuda a comprender mejor las caracter√≠sticas de la plataforma, as√≠ como los principios de distribuci√≥n y almacenamiento de recursos directamente en la aplicaci√≥n finalizada.  La conclusi√≥n es que al ensamblar un proyecto Xcode, adem√°s de generar un archivo ejecutable, el entorno transfiere recursos (archivos de dise√±o de la interfaz <em>Storyboard / Xib</em> , im√°genes, archivos de l√≠nea, etc.) a la aplicaci√≥n terminada, preservando la jerarqu√≠a especificada en la etapa de desarrollo. </p><br><p>  Para trabajar con esta jerarqu√≠a, Apple proporciona la clase <em><code>Bundle(NSBundle)</code></em> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">traducci√≥n gratuita</a> ): </p><br><blockquote>  Apple usa el <strong><code>Bundle</code></strong> para proporcionar acceso a aplicaciones, marcos, complementos y muchos otros tipos de contenido.  Los paquetes organizan los recursos en subdirectorios claramente definidos, y las estructuras de los paquetes var√≠an seg√∫n la plataforma y el tipo.  Con el <em><code>bundle</code></em> , puede acceder a los recursos de un paquete sin conocer su estructura.  <em><code>Bundle</code></em> es una interfaz √∫nica para buscar elementos, teniendo en cuenta la estructura del paquete, las necesidades del usuario, las localizaciones disponibles y otros factores relevantes. <br>  <strong>B√∫squeda y descubrimiento de un recurso.</strong> <br>  Antes de comenzar a trabajar con un recurso, debe especificar su <em><code>bundle</code></em> .  La clase <strong><code>Bundle</code></strong> tiene muchos constructores, pero <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">main se</a></strong> usa con mayor frecuencia.  <em><code>Bundle.main</code></em> proporciona una ruta a los directorios que contienen el c√≥digo ejecutable actual.  De esta manera, <em><code>Bundle.main</code></em> proporciona acceso a los recursos utilizados por la aplicaci√≥n actual. </blockquote><p>  Considere la estructura <em><code>Bundle.main</code></em> usando la clase <strong><em><code>FileManager</code></em></strong> : </p><br><img src="https://habrastorage.org/getpro/habr/post_images/60f/e0f/8b3/60fe0f8b3bb62a0db757f06f999e8065.png" width="65%" height="65%"><br><br><p>  Con base en lo anterior, podemos concluir: cuando se carga la aplicaci√≥n, se forma su <em><code>Bundle.main</code></em> se <em><code>Bundle.main</code></em> la localizaci√≥n actual del dispositivo (lenguaje del sistema), la localizaci√≥n de la aplicaci√≥n y los recursos localizados.  Luego, la aplicaci√≥n selecciona de todas las localizaciones disponibles la que corresponde al idioma actual del sistema y extrae los recursos localizados correspondientes.  Si no hay coincidencias, se utilizan los recursos del directorio predeterminado (en nuestro caso, la localizaci√≥n en ingl√©s, ya que el ingl√©s se defini√≥ como un lenguaje de desarrollo, y la necesidad de una localizaci√≥n adicional de recursos se puede descuidar).  Si cambia el idioma del dispositivo a ruso y reinicia la aplicaci√≥n, la interfaz ya corresponder√° a la localizaci√≥n en ruso. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/47e/e24/6fe/47ee246fec532a890503019af1bfc91c.png" width="50%" height="50%"><br><br><p>  Pero antes de cerrar el tema de localizar la interfaz de usuario a trav√©s de <em>Interface Builder</em> , vale la pena se√±alar otra forma notable.  Al crear archivos de localizaci√≥n (al agregar un nuevo idioma al proyecto o en el inspector de archivos localizado), es f√°cil notar que Xcode brinda la posibilidad de elegir el tipo de archivo a crear: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/272/aa5/cb3/272aa5cb38ea6b2a4178edc911296982.png" width="35%" height="35%"><br><br><p>  En lugar de un archivo de l√≠nea, puede crear f√°cilmente un <em><code>Storyboard/Xib</code></em> localizado que guardar√° todo el marcado del archivo base.  Una gran ventaja de este enfoque es que el desarrollador puede ver de inmediato c√≥mo se mostrar√° el contenido en un idioma en particular y corregir de inmediato el dise√±o de la pantalla, especialmente si la cantidad de texto difiere u otra direcci√≥n del texto (por ejemplo, en √°rabe, hebreo), etc. .  Pero al mismo tiempo, la creaci√≥n de archivos <em>Storyboard / Xib</em> adicionales aumenta significativamente el tama√±o de la aplicaci√≥n en s√≠ misma (de todos modos, los archivos de cadena ocupan mucho menos espacio). </p><br><p>  Por lo tanto, al elegir uno u otro m√©todo de localizaci√≥n de interfaz, vale la pena considerar qu√© enfoque ser√° m√°s apropiado y pr√°ctico en una situaci√≥n particular. </p><br><h3 id="do-it-yourself-rabota-s-lokalizovannymi-strokovymi-resursami-v-kode">  H√°galo usted mismo  Trabajando con recursos de cadena localizados en c√≥digo </h3><br><p>  Esperemos que con contenido est√°tico, todo est√© m√°s o menos claro.  Pero, ¬øqu√© pasa con el texto que se establece directamente en el c√≥digo? </p><br><p>  Los desarrolladores del sistema operativo iOS se encargaron de esto. </p><br><p>  Para trabajar con recursos de texto localizados, el marco de Foundation proporciona la familia de m√©todos <strong><em><code>NSLocalizedStrings</code></em></strong> en <strong><em>Swift</em></strong> </p><br><pre> <code class="hljs sql">NSLocalizedString(_ key: String, <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>) NSLocalizedString(_ <span class="hljs-keyword"><span class="hljs-keyword">key</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, tableName: <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>?, bundle: Bundle, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>)</code> </pre> <br><p>  y macros en <strong><em>Objective-C</em></strong> </p><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSLocalizedString</span></span>(key, comment) <span class="hljs-built_in"><span class="hljs-built_in">NSLocalizedStringFromTable</span></span>(key, tbl, comment) <span class="hljs-built_in"><span class="hljs-built_in">NSLocalizedStringFromTableInBundle</span></span>(key, tbl, bundle, comment) <span class="hljs-built_in"><span class="hljs-built_in">NSLocalizedStringWithDefaultValue</span></span>(key, tbl, bundle, val, comment)</code> </pre> <br><p>  Comencemos con lo obvio.  El par√°metro <strong><em><code>key</code></em></strong> es la clave de cadena en el archivo de cadenas;  <strong><em><code>val</code></em></strong> (valor predeterminado): el valor predeterminado que se utiliza si la clave especificada no est√° en el archivo;  <strong><em><code>comment</code></em></strong> : (menos obvio) una breve descripci√≥n de la cadena localizada (de hecho, no tiene una funcionalidad √∫til y pretende explicar el prop√≥sito de usar una cadena espec√≠fica). </p><br><p>  En cuanto a los par√°metros <em><code>tableName</code></em> ( <em><code>tbl</code></em> ) y <em><code>bunble</code></em> , deben considerarse con m√°s detalle. </p><br><p>  <strong><em><code>tableName</code></em></strong> ( <strong><em><code>tbl</code></em></strong> ) es el nombre del archivo String (para ser sincero, no s√© por qu√© Apple lo llama una tabla), que contiene la fila que necesitamos por la clave especificada;  cuando se transfiere, la extensi√≥n <em><code>.string</code></em> no se especifica.  La capacidad de navegar entre tablas le permite no almacenar recursos de cadena en un archivo, sino distribuirlos a su propia discreci√≥n.  Esto le permite deshacerse de la congesti√≥n de archivos, simplifica la edici√≥n y minimiza la posibilidad de errores. </p><br><p>  El par√°metro de <strong><em><code>bundle</code></em></strong> extiende la navegaci√≥n de recursos a√∫n m√°s.  Como se mencion√≥ anteriormente, el <em>paquete</em> es un mecanismo para acceder a los recursos de la aplicaci√≥n, es decir, podemos determinar de forma independiente la fuente de los recursos. </p><br><p>  Un poco mas.  Iremos directamente a la <strong><em>Fundaci√≥n</em></strong> y consideraremos la declaraci√≥n de m√©todos (macros) para obtener una imagen m√°s clara, porque  La gran mayor√≠a de los tutoriales simplemente ignoran este punto.  El marco <em>Swift</em> no es muy informativo: </p><br><pre> <code class="hljs vhdl">/// Returns a localized <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, using the main bundle <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> one <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> specified. public func NSLocalizedString(_ key: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, tableName: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>? = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, bundle: Bundle = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, value: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, comment: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span></code> </pre> <br><p>  <em>"El paquete principal devuelve una cadena localizada"</em> , todo lo que tenemos.  <em>Objective-C</em> es un poco diferente. </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#define NSLocalizedString(key, comment) \ [NSBundle.mainBundle localizedStringForKey:(key) value:@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta"> table:nil] #define NSLocalizedStringFromTable(key, tbl, comment) \ [NSBundle.mainBundle localizedStringForKey:(key) value:@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta"> table:(tbl)] #define NSLocalizedStringFromTableInBundle(key, tbl, bundle, comment) \ [bundle localizedStringForKey:(key) value:@</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta"> table:(tbl)] #define NSLocalizedStringWithDefaultValue(key, tbl, bundle, val, comment) \ [bundle localizedStringForKey:(key) value:(val) table:(tbl)]</span></span></code> </pre> <br><p>  Aqu√≠ ya puede ver claramente que nada menos que <strong><em><code>bundle</code></em></strong> (en los primeros dos casos <em><code>mainBundle</code></em> ) funciona con archivos de recursos de cadena, lo mismo que en el caso de la localizaci√≥n de la interfaz.  Por supuesto, podr√≠a decir esto inmediatamente, considerando la clase <em><code>Bundle</code></em> ( <em><code>NSBundle</code></em> ) en el p√°rrafo anterior, pero en ese momento esta informaci√≥n no ten√≠a un valor pr√°ctico particular.  Pero en el contexto de trabajar con l√≠neas en el c√≥digo, esto no se puede decir.  De hecho, las funciones globales proporcionadas por la <strong><em>Fundaci√≥n</em></strong> son solo envoltorios sobre los m√©todos de paquete est√°ndar, cuya tarea principal es hacer que el c√≥digo sea m√°s conciso y seguro.  Nadie proh√≠be inicializar el <em><code>bundle</code></em> manual y acceder directamente a los recursos en su nombre, pero de esta manera parece (aunque muy, muy peque√±a) la probabilidad de la formaci√≥n de enlaces circulares y p√©rdidas de memoria. </p><br><p>  Los siguientes ejemplos describir√°n c√≥mo trabajar con funciones globales y macros. </p><br><p>  Veamos c√≥mo funciona todo. <br>  Primero, cree un archivo de cadena que contendr√° nuestros recursos de cadena.  Ll√°melo Localizable.strings * y agr√©guelo. </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"testKey"</span></span> = <span class="hljs-string"><span class="hljs-string">"testValue"</span></span>;</code> </pre> <br><p>  ( <em>Los archivos de cadena se localizan exactamente de la misma manera que</em> Storyboard / Xib <em>, por lo que no describir√© este proceso. Reemplazaremos el "valor de</em> prueba <em>" en el</em> <em>archivo de localizaci√≥n ruso</em> <em>con "</em> valor de prueba *"). </p><br><p>  <strong>Importante!</strong>  En iOS, un archivo con este nombre es el archivo de recursos de cadena predeterminado, es decir  si no especifica el nombre de la tabla <em><code>tableName</code></em> ( <em><code>tbl</code></em> ), la aplicaci√≥n activar√° autom√°ticamente <strong><em><code>Localizable.strings</code></em></strong> . </p><br><p>  Agregue el siguiente c√≥digo a nuestro proyecto </p><br><pre> <code class="hljs lisp">//Swift print(<span class="hljs-string"><span class="hljs-string">"String for 'testKey': "</span></span> + NSLocalizedString(<span class="hljs-string"><span class="hljs-string">"testKey"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>))</code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//Objective-C NSLog(@"String for 'testKey': %@", NSLocalizedString(@"testKey", @""));</span></span></code> </pre> <br><p>  y ejecutar el proyecto  Despu√©s de ejecutar el c√≥digo, aparecer√° una l√≠nea en la consola. </p><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-string"><span class="hljs-string">'testKey'</span></span>: testValue</code> </pre> <br><p>  ¬°Todo funciona bien! </p><br><p>  De manera similar con el ejemplo de localizaci√≥n de la interfaz, cambie la localizaci√≥n y ejecute la aplicaci√≥n.  El resultado de la ejecuci√≥n del c√≥digo ser√° </p><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-string"><span class="hljs-string">'testKey'</span></span>:  </code> </pre> <br><p>  Ahora intentemos obtener el valor mediante la clave, que no est√° en el archivo <em><code>Localizable.strings</code></em> : </p><br><pre> <code class="hljs lisp">//Swift print(<span class="hljs-string"><span class="hljs-string">"String for 'unknownKey': "</span></span> + NSLocalizedString(<span class="hljs-string"><span class="hljs-string">"unknownKey"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>))</code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//Objective-C NSLog(@"String for 'unknownKey': %@", NSLocalizedString(@"unknownKey", @""));</span></span></code> </pre> <br><p>  El resultado de la ejecuci√≥n de dicho c√≥digo ser√° </p><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-string"><span class="hljs-string">'unknownKey'</span></span>: unknownKey</code> </pre> <br><p>  Como no hay una clave en el archivo, el m√©todo devuelve la clave como resultado.  Si tal resultado es inaceptable, entonces es mejor usar el m√©todo </p><br><pre> <code class="hljs lisp">//Swift print(<span class="hljs-string"><span class="hljs-string">"String for 'testKey': "</span></span> + NSLocalizedString(<span class="hljs-string"><span class="hljs-string">"unknownKey"</span></span>, tableName: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, bundle: Bundle.main, value: <span class="hljs-string"><span class="hljs-string">"noValue"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>))</code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//Objective-C NSLog(@"String for 'testKey': %@", NSLocalizedStringWithDefaultValue(@"unknownKey", nil, NSBundle.mainBundle, @"noValue", @""));</span></span></code> </pre> <br><p>  donde hay un par√°metro de <strong><em><code>value</code></em></strong> ( <em>valor predeterminado</em> ).  Pero en este caso, debe especificar la fuente de recursos: <em><code>bundle</code></em> . </p><br><p>  Las cadenas localizadas admiten el mecanismo de interpolaci√≥n, similar a las cadenas est√°ndar de iOS.  Para hacer esto, agregue un registro al archivo de cadena usando literales de cadena ( <em><code>%@</code></em> , <em><code>%li</code></em> , <em><code>%f</code></em> , etc.), por ejemplo: </p><br><pre> <code class="hljs perl"><span class="hljs-string"><span class="hljs-string">"stringWithArgs"</span></span> = <span class="hljs-string"><span class="hljs-string">"String with %@: %li, %f"</span></span>;</code> </pre> <br><p>  Para generar esa l√≠nea, debe agregar un c√≥digo del formulario </p><br><pre> <code class="hljs lisp">//Swift print(<span class="hljs-name"><span class="hljs-name">String</span></span>(<span class="hljs-name"><span class="hljs-name">format</span></span>: NSLocalizedString(<span class="hljs-string"><span class="hljs-string">"stringWithArgs"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>), <span class="hljs-string"><span class="hljs-string">"some"</span></span>, <span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-number"><span class="hljs-number">123.098</span></span> ))</code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//Objective-C NSLog(@"%@", [NSString stringWithFormat: NSLocalizedString(@"stringWithArgs", @""), @"some", 123, 123.098]);</span></span></code> </pre> <br><p>  ¬°Pero cuando use tales dise√±os, debe tener mucho cuidado!  El hecho es que iOS monitorea estrictamente el n√∫mero, el orden de los argumentos, la correspondencia de sus tipos con los literales especificados.  Entonces, por ejemplo, si sustituye la cadena como el segundo argumento en lugar del valor entero </p><br><pre> <code class="hljs lisp">//Swift print(<span class="hljs-name"><span class="hljs-name">String</span></span>(<span class="hljs-name"><span class="hljs-name">format</span></span>: NSLocalizedString(<span class="hljs-string"><span class="hljs-string">"stringWithArgs"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>), <span class="hljs-string"><span class="hljs-string">"some"</span></span>, <span class="hljs-string"><span class="hljs-string">"123"</span></span>, <span class="hljs-number"><span class="hljs-number">123.098</span></span> ))</code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//Objective-C NSLog(@"%@", [NSString stringWithFormat: NSLocalizedString(@"stringWithArgs", @""), @"some", @"123", 123.098]);</span></span></code> </pre> <br><p>  entonces la aplicaci√≥n sustituir√° el c√≥digo entero de la cadena <strong><em>"123"</em></strong> en lugar del desajuste </p><br><pre> <code class="hljs sql">"String <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span>: <span class="hljs-number"><span class="hljs-number">4307341664</span></span>, <span class="hljs-number"><span class="hljs-number">123.089000</span></span><span class="hljs-string"><span class="hljs-string">"</span></span></code> </pre> <br><p>  Si lo omites, obtenemos </p><br><pre> <code class="hljs sql">"String <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">123.089000</span></span><span class="hljs-string"><span class="hljs-string">"</span></span></code> </pre> <br><p>  Pero si omite el objeto correspondiente a <strong><em><code>%@</code></em></strong> en la lista de argumentos </p><br><pre> <code class="hljs lisp">//Swift print(<span class="hljs-name"><span class="hljs-name">String</span></span>(<span class="hljs-name"><span class="hljs-name">format</span></span>: NSLocalizedString(<span class="hljs-string"><span class="hljs-string">"stringWithArgs"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>), <span class="hljs-string"><span class="hljs-string">"123"</span></span>, <span class="hljs-number"><span class="hljs-number">123.098</span></span> ))</code> </pre> <br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">//Objective-C NSLog(@"%@", [NSString stringWithFormat: NSLocalizedString(@"stringWithArgs", @""), @"123", 123.098]);</span></span></code> </pre> <br><p>  entonces la aplicaci√≥n simplemente se bloquear√° en el momento de la ejecuci√≥n del c√≥digo. </p><br><h3 id="push-me-baby-lokalizaciya-uvedomleniy">  ¬°Emp√∫jame, beb√©!  Localizaci√≥n de notificaciones </h3><br><p>  Otra tarea importante al trabajar con recursos de cadena localizados, de la que me gustar√≠a hablar brevemente, es la tarea de localizar notificaciones.  La conclusi√≥n es que la mayor√≠a de los tutoriales (tanto en <em><code>Push Notifications</code></em> como en <em><code>Localizable Strings</code></em> ) a menudo descuidan este problema, y ‚Äã‚Äãtales tareas no son tan raras.  Por lo tanto, cuando se enfrenta a esto por primera vez, el desarrollador puede tener una pregunta razonable: ¬ø <em>es esto posible en principio?</em>  Aqu√≠ no considerar√© el mecanismo de operaci√≥n del <em><code>Apple Push Notification Service</code></em> , especialmente desde que comenc√© con iOS 10.0, las notificaciones push y locales se implementan a trav√©s del mismo marco: <strong><code>UserNotifications</code></strong> . </p><br><p>  Debe desarrollar un problema similar al desarrollar aplicaciones multiling√ºes cliente-servidor.  Cuando tal tarea me enfrent√≥ por primera vez, lo primero que me vino a la mente fue descartar el problema de la localizaci√≥n de mensajes en el lado del servidor.  La idea era extremadamente simple: la aplicaci√≥n env√≠a la localizaci√≥n actual al <em>backend</em> al inicio, y el servidor selecciona el mensaje apropiado al enviar el env√≠o.  Pero el problema madur√≥ de inmediato: si la localizaci√≥n del dispositivo cambi√≥ y la aplicaci√≥n no se reinici√≥ (no actualiz√≥ los datos en la base de datos), el servidor envi√≥ el texto correspondiente a la √∫ltima localizaci√≥n "registrada".  Y si la aplicaci√≥n se instala en varios dispositivos con diferentes idiomas de sistema a la vez, entonces toda la implementaci√≥n funcionar√≠a como el infierno sabe qu√©.  Como tal soluci√≥n me pareci√≥ la muleta m√°s salvaje de inmediato, inmediatamente comenc√© a buscar soluciones adecuadas (divertido, pero en muchos foros los "desarrolladores" me aconsejaron localizar a los agresores exactamente en el <em>backend</em> ). </p><br><p>  La decisi√≥n correcta fue terriblemente simple, aunque no del todo obvia.  En lugar del <em>JSON</em> est√°ndar enviado por el servidor en <em>APNS</em> </p><br><pre> <code class="hljs objectivec"> <span class="hljs-string"><span class="hljs-string">"aps"</span></span> : { <span class="hljs-string"><span class="hljs-string">"alert"</span></span> : { <span class="hljs-string"><span class="hljs-string">"body"</span></span> : <span class="hljs-string"><span class="hljs-string">"some message"</span></span>; }; };</code> </pre> <br><p>  necesita enviar <em>JSON del</em> formulario </p><br><pre> <code class="hljs objectivec"> <span class="hljs-string"><span class="hljs-string">"aps"</span></span> : { <span class="hljs-string"><span class="hljs-string">"alert"</span></span> : { <span class="hljs-string"><span class="hljs-string">"loc-key"</span></span> : <span class="hljs-string"><span class="hljs-string">"message localized key"</span></span>; }; };</code> </pre> <br><p>  donde la <strong><em><code>loc-key</code></em></strong> se usa para pasar la clave de cadena <strong><em><code>Localizable.strings</code></em></strong> archivo <strong><em><code>Localizable.strings</code></em></strong> .  En consecuencia, el mensaje de inserci√≥n se muestra de acuerdo con la localizaci√≥n actual del dispositivo. </p><br><p>  El mecanismo para interpolar cadenas localizadas en notificaciones <em>push</em> funciona de manera similar: </p><br><pre> <code class="hljs powershell"> <span class="hljs-string"><span class="hljs-string">"aps"</span></span> : { <span class="hljs-string"><span class="hljs-string">"alert"</span></span> : { <span class="hljs-string"><span class="hljs-string">"loc-key"</span></span> : <span class="hljs-string"><span class="hljs-string">"message localized key"</span></span>; <span class="hljs-string"><span class="hljs-string">"loc-args"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"First argument"</span></span>, <span class="hljs-string"><span class="hljs-string">"Second argument"</span></span> ]; }; };</code> </pre> <br><p>  La clave <strong><em><code>loc-args</code></em></strong> pasa una serie de argumentos que deben incrustarse en el texto de notificaci√≥n localizado. </p><br><h3 id="podytozhim">  Para resumir ... </h3><br><p>  Y entonces, ¬øqu√© tenemos al final? </p><br><ul><li>  est√°ndar para almacenar datos de cadena en archivos <strong><em><code>.string</code></em></strong> especializados con sintaxis simple y accesible; </li><li>  la capacidad de localizar la interfaz sin manipulaciones adicionales en el c√≥digo; </li><li>  acceso r√°pido a recursos localizados desde el c√≥digo; </li><li>  generaci√≥n autom√°tica de archivos de localizaci√≥n y estructuraci√≥n de los recursos del directorio del proyecto (aplicaci√≥n) usando herramientas Xcode; </li><li>  La capacidad de localizar el texto de notificaci√≥n. </li></ul><br><p>  , Xcode           ,          . </p><br><p>               . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419077/">https://habr.com/ru/post/es419077/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419065/index.html">Mundo virtual Intel. Practica</a></li>
<li><a href="../es419067/index.html">C√≥mo vender datos personales o por qu√© es dif√≠cil poner un precio a la informaci√≥n</a></li>
<li><a href="../es419069/index.html">El calentamiento global har√° que nuestro mundo sea m√°s verde, pero no se regocije</a></li>
<li><a href="../es419071/index.html">Siguiendo el truco tp-link</a></li>
<li><a href="../es419075/index.html">Sobre la formaci√≥n de secuencias en la hip√≥tesis de Collatz (3n + 1)</a></li>
<li><a href="../es419085/index.html">La idea de singularidad antes del Big Bang est√° desactualizada</a></li>
<li><a href="../es419087/index.html">Comprender la mente de otra persona es un mito</a></li>
<li><a href="../es419089/index.html">C√≥mo hacer trampa al jugar a los dados - consejos de expertos del juego</a></li>
<li><a href="../es419091/index.html">Objetos radiactivos entre nosotros</a></li>
<li><a href="../es419095/index.html">Escribimos CSS mejor y m√°s hermoso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>