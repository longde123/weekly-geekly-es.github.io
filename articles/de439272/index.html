<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùî üçë ü§ï Jupyter Notebook auf Netflix üî∏ üëÖ üöß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In letzter Zeit ist Jupyter Notebook unter Data Science-Experten sehr beliebt geworden und zum De-facto-Standard f√ºr Rapid Prototyping und Datenanalys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jupyter Notebook auf Netflix</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439272/"><p>  In letzter Zeit ist Jupyter Notebook unter Data Science-Experten sehr beliebt geworden und zum De-facto-Standard f√ºr Rapid Prototyping und Datenanalyse geworden.  Bei Netflix versuchen wir, die Grenzen seiner Funktionen noch weiter zu erweitern, indem wir √ºberdenken, was Notebook sein kann, wer verwendet werden kann und was sie damit tun k√∂nnen.  Wir haben uns sehr bem√ºht, unsere Vision in die Realit√§t umzusetzen. </p><br><p>  In diesem Artikel m√∂chten wir Ihnen erkl√§ren, warum wir Jupyter Notebooks f√ºr so attraktiv halten und uns auf diesem Weg inspirieren.  Dar√ºber hinaus beschreiben wir die Komponenten unserer Infrastruktur und pr√ºfen neue M√∂glichkeiten zur Verwendung von Jupyter Notebook in Netflix. </p><br><p><img src="https://habrastorage.org/webt/8x/w3/za/8xw3zaiacgzfdvghsg7a1inacra.jpeg"><br>  Anmerkung des √úbersetzers: Vorsicht, <b>viel Text und wenige Bilder</b> <br><a name="habracut"></a><br></p><br><p>  Wenn Sie nicht viel Zeit haben, empfehlen wir Ihnen, sofort zum Abschnitt " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anwendungsf√§lle" zu wechseln</a> . </p><br><h1>  Warum das alles? </h1><br><p>  Daten sind die St√§rke von Netflix.  Sie durchdringen unsere Gedanken, beeinflussen unsere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entscheidungen</a> und stellen unsere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hypothesen in</a> Frage.  Sie laden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Experimente</a> und die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entstehung eines neuen</a> in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">beispiellosem Ausma√ü auf</a> .  Die Daten erm√∂glichen es uns, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unerwartete Bedeutungen</a> zu entdecken und eine unglaubliche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">personalisierte Erfahrung f√ºr</a> 130 Millionen unserer Benutzer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf der ganzen Welt zu</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erleben</a> . </p><br><p>  All dies zu verwirklichen, ist eine beachtliche Leistung, die beeindruckende technische und infrastrukturelle Unterst√ºtzung erfordert.  T√§glich werden mehr als 1 Billion Ereignisse in einem Stream (Streaming Ingestion Pipeline) empfangen, der in einem 100PB-Cloud-Speicher verarbeitet und aufgezeichnet wird.  T√§glich f√ºhren unsere Benutzer mehr als 150.000 Aufgaben mit diesen Daten aus, von Berichten √ºber maschinelles Lernen bis hin zu Empfehlungsalgorithmen. </p><br><p>  Um solche Nutzungsszenarien in einem solchen Ma√üstab zu unterst√ºtzen, haben wir eine der branchenweit besten entwickelt, eine flexible, leistungsstarke und bei Bedarf hochentwickelte Datenplattform (Netflix Data Platform).  Wir haben auch zus√§tzliche Tools und Services entwickelt, wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Genie</a> (Task Execution Service) und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Metacat</a> (Meta-Storage).  Diese Tools reduzieren die Komplexit√§t und erm√∂glichen so die Unterst√ºtzung einer gr√∂√üeren Anzahl von Benutzern im gesamten Unternehmen. </p><br><img src="https://habrastorage.org/webt/dh/v0/x4/dhv0x4f7uwhgzn9w67ikrtdem6k.jpeg"><br><p>  Die Vielfalt der Benutzer ist beeindruckend, aber Sie m√ºssen daf√ºr bezahlen: Die Netflix-Datenplattform und ihr √ñkosystem aus Tools und Diensten m√ºssen skaliert werden, um zus√§tzliche Nutzungsszenarien, Sprachen, Zugriffsschemata und vieles mehr zu unterst√ºtzen.  Zum besseren Verst√§ndnis des Problems betrachten wir drei g√§ngige Positionen: einen Analysteningenieur, einen Dateningenieur und einen Datenwissenschaftler. </p><br><img src="https://habrastorage.org/webt/kf/nc/l4/kfncl4wisrdj24isuek5tjr_hcc.jpeg"><br>  <i>Der Unterschied in der Pr√§ferenz von Sprachen und Werkzeugen f√ºr verschiedene Positionen</i> <br><br><p>  In der Regel bevorzugt jede Position ihre eigenen Tools und Sprachen.  Ein Dateningenieur kann beispielsweise mit Scala in IntelliJ ein neues Datenensemble erstellen, das Billionen von Ereignisstr√∂men enth√§lt.  Der Analyst kann sie mit SQL und Tableau in einem neuen globalen Bericht zur Streaming-Qualit√§t verwenden.  Dieser Bericht kann an einen Datenwissenschaftler gehen, der ein neues Streaming-Komprimierungsmodell mit R und RStudio erstellt.  Auf den ersten Blick scheinen diese Prozesse fragmentiert zu sein, wenn auch komplement√§r. Wenn Sie jedoch genauer hinschauen, hat jeder dieser Prozesse mehrere √ºberlappende Aufgaben: <br><br>  <b>Datenexploration</b> - erfolgt in einem fr√ºhen Stadium des Projekts;  kann eine √úbersicht √ºber Probendaten, Abfragen zur statistischen Analyse und Datenvisualisierung enthalten <br><br>  <b>Datenaufbereitung</b> - Eine sich wiederholende Aufgabe kann das Bereinigen, Standardisieren, Transformieren, Denormalisieren und Aggregieren von Daten umfassen.  normalerweise der zeitaufw√§ndigste Teil des Projekts <br><br>  <b>Datenvalidierung</b> - eine regelm√§√üig auftretende Aufgabe;  kann eine Erhebung von Stichprobendaten, statistische Analyse, aggregierte Analyse und Datenvisualisierung umfassen;  tritt normalerweise im Rahmen der Datenexploration, Datenaufbereitung, -entwicklung, Vorbereitstellung und Nachbereitstellung auf <br><br>  <b>Produktionalisierung</b> - erfolgt zu einem sp√§ten Zeitpunkt des Projekts;  Dies kann die Codebereitstellung, das Hinzuf√ºgen von Beispielen, das Modelltraining, die Datenvalidierung und das Planen von Workflows umfassen </p><br><p>  Um die F√§higkeiten unserer Benutzer zu erweitern, m√∂chten wir diese Aufgaben so einfach wie m√∂glich gestalten. <br>  Um die Funktionen unserer Plattform zu erweitern, m√∂chten wir die Anzahl der Tools minimieren, die unterst√ºtzt werden m√ºssen.  Aber wie?  Kein einzelnes Tool kann alle diese Aufgaben abdecken.  Dar√ºber hinaus erfordert eine Aufgabe h√§ufig die Verwendung mehrerer Werkzeuge.  Wenn wir uns jedoch deaktivieren, entsteht f√ºr alle Tools und Sprachen ein gemeinsames Muster: Code ausf√ºhren, Daten untersuchen, Ergebnis pr√§sentieren. </p><br><p>  So kam es, dass speziell daf√ºr ein Open-Source-Projekt entwickelt wurde: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Project Jupyter</a> . </p><br><h1>  Jupyter-Notizb√ºcher </h1><br><p><img src="https://habrastorage.org/webt/ru/4x/-f/ru4x-fxrpxia_tuf_o7fpg7v6xg.png"><br><br>  Das Jupyter-Notizbuch in nteract zeigt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vega</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Altair an</a> </p><br><p>  Das Jupyter-Projekt wurde 2014 mit dem Ziel gestartet, einen konsistenten Satz von Open-Source-Tools f√ºr Forschung, reproduzierbaren Workflow und Datenanalyse zu erstellen.  Diese Tools wurden von der Branche hoch gelobt und heute ist Jupyter ein wesentlicher Bestandteil des Toolkits eines jeden Datenwissenschaftlers.  Um das Ausma√ü seines Einflusses zu verstehen, stellen wir fest, dass Jupyter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2017</a> mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ACM Software Systems Award ausgezeichnet wurde</a> - einer prestigetr√§chtigen Auszeichnung, die er mit Java, Unix und the_Web teilt. </p><br><p>  Um zu verstehen, warum das Jupyter-Notebook f√ºr uns so attraktiv ist, betrachten Sie seine Hauptmerkmale: <br><br></p><ul><li>  Messaging-Protokoll zum Analysieren und Ausf√ºhren von Code unabh√§ngig von der Sprache </li><li>  Dateiformat mit der F√§higkeit zum Bearbeiten, Beschreiben, Anzeigen und Ausf√ºhren von Code, Ausgabe- und Abschriftennotizen </li><li>  Webinterface f√ºr interaktives Schreiben, Codeausf√ºhrung und Visualisierung von Ergebnissen </li></ul><br><p>  Das Jupyter-Protokoll bietet eine standardisierte Messaging-API mit Kerneln, die als Rechenmodule fungieren, und stellt eine zusammensetzbare Architektur bereit, wodurch gemeinsam genutzt wird, wo der Code (UI) gespeichert ist und wo er ausgef√ºhrt wird (der Kernel).  Durch die Trennung von Schnittstelle und Kern k√∂nnen Notebooks in mehreren Sprachen arbeiten und gleichzeitig die Flexibilit√§t bei der Konfiguration der Laufzeit beibehalten.  Wenn eine Sprache f√ºr eine Sprache vorhanden ist, die Nachrichten mithilfe des Jupyter-Protokolls austauschen kann, kann Notebook Code ausf√ºhren, indem Nachrichten an diesen Kernel gesendet und empfangen werden. </p><br><p>  Zus√§tzlich zu allem wird all dies durch ein Dateiformat unterst√ºtzt, mit dem Sie sowohl den Code selbst als auch die Ergebnisse seiner Ausf√ºhrung an einem Ort speichern k√∂nnen.  Dies bedeutet, dass Sie die Ergebnisse der Ausf√ºhrung sp√§ter anzeigen k√∂nnen, ohne den Code selbst neu starten zu m√ºssen.  Notizb√ºcher k√∂nnen auch eine detaillierte Beschreibung des Kontexts und dessen genaue Vorg√§nge speichern.  Dies macht es zu einem idealen Format, um einen Gesch√§ftskontext zu vermitteln, Annahmen festzulegen, Code zu kommentieren, Schlussfolgerungen zu beschreiben und vieles mehr. </p><br><h1><a name="Use"></a>  Anwendungsf√§lle </h1><br>  Unter den vielen Szenarien sind die beliebtesten Anwendungsf√§lle: Datenzugriff, Notizbuchvorlagen und Planen von Notizb√ºchern. <br><br><h2>  Datenzugriff </h2><br><p>  Jupyter Notebook erschien urspr√ºnglich auf Netflix, um Data Science-Workflows zu unterst√ºtzen.  Als ihre Verwendung unter Data Science-Experten zunahm, sahen wir das Potenzial, die F√§higkeiten unserer Tools zu erweitern.  Wir haben erkannt, dass wir die Vielseitigkeit und Architektur des Jupyter-Notebooks nutzen und seine Funktionen f√ºr den Datenaustausch erweitern k√∂nnen.  Im dritten Quartal 2017 haben wir ernsthaft damit begonnen, Notebook zu einem Werkzeug f√ºr einen engen Kreis von Spezialisten zu einem erstklassigen Vertreter der Netflix-Datenplattform zu machen. </p><br><p>  Aus Sicht unserer Benutzer bieten Notebooks eine komfortable Oberfl√§che f√ºr die interaktive Befehlsausf√ºhrung, Ausgabeforschung und Datenvisualisierung - alles in einer Cloud-Entwicklungsumgebung.  Wir unterst√ºtzen auch die Python-Bibliothek, die den Zugriff auf die Plattform-API kombiniert.  Dies bedeutet, dass Benutzer √ºber Notebook programmgesteuert auf praktisch die gesamte Netflix-Plattform zugreifen k√∂nnen.  Dank dieser Kombination aus Flexibilit√§t, Leistung und Benutzerfreundlichkeit verzeichnete das Unternehmen einen starken Anstieg seiner Nutzung durch alle Arten von Plattformbenutzern. </p><br><p>  Heute ist Notebook das beliebteste Datentool in Netflix. </p><br><h2>  Notizbuchvorlagen </h2><br><p>  Als die Unterst√ºtzung f√ºr Jupyter-Notebooks innerhalb der Plattform erweitert wurde, haben wir begonnen, neue Funktionen einzuf√ºhren, um sie f√ºr neue Nutzungsszenarien zu verwenden.  Von hier kamen parametrisierte Laptops.  Parametrisierte Laptops stellen genau das dar, was ihr Name sagt: Ein Notizbuch, mit dem Sie Parameter im Code festlegen und zur Laufzeit Eingaben empfangen k√∂nnen.  Dies bietet Benutzern einen guten Mechanismus, um Notebooks als wiederverwendbare Vorlagen zu definieren. </p><br><p>  Unsere Benutzer haben viele M√∂glichkeiten gefunden, solche Muster zu verwenden.  Wir listen einige der am h√§ufigsten verwendeten auf: <br><br></p><ul><li>  <b>Data Scientist</b> : Experimentieren Sie mit verschiedenen Koeffizienten und fassen Sie die Ergebnisse zusammen </li><li>  <b>Data Engineer</b> : F√ºhren Sie im Rahmen des Bereitstellungsprozesses eine Sammlung von Datenqualit√§tspr√ºfungen durch. </li><li>  <b>Datenanalyst</b> : Teilen Sie vorbereitete Abfragen und Visualisierungen, damit Stakeholder die Daten genauer untersuchen k√∂nnen, als es Tableau zul√§sst </li><li>  <b>Software Engineer</b> : Senden Sie die Ergebnisse eines Skripts, um einen Absturz zu beheben </li></ul><br><h2>  Planen von Notizb√ºchern (Scheduler) </h2><br><p>  Eine der urspr√ºnglichen M√∂glichkeiten zur Verwendung von Notebook besteht darin, eine Zusammenf√ºhrungsebene f√ºr die Planung von Workflows zu erstellen. </p><br><p>  Da jeder Laptop auf einem beliebigen Kernel ausgef√ºhrt werden kann, k√∂nnen wir jede benutzerdefinierte Laufzeitumgebung unterst√ºtzen.  Und da Notizb√ºcher einen linearen Ausf√ºhrungsfluss beschreiben, der in Zellen unterteilt ist, k√∂nnen wir den Fehler auf eine bestimmte Zelle beziehen.  Auf diese Weise k√∂nnen Benutzer die Ausf√ºhrung und Visualisierung in einer narrativeren Form beschreiben, die beim Start zu einem sp√§teren Zeitpunkt genau erfasst werden kann. </p><br><p>  Ein solches Paradigma erm√∂glicht es Ihnen, einen Laptop f√ºr interaktive Arbeiten zu verwenden und reibungslos zur Mehrfachausf√ºhrung und Verwendung des Schedulers zu wechseln.  Was sich f√ºr die Benutzer als sehr praktisch herausstellte.  Viele Benutzer erstellen ganze Workflows nur in Notebooks, um sie dann in separate Dateien zu duplizieren und zum richtigen Zeitpunkt auszuf√ºhren.  Indem wir Notebook als sequentielle Prozessbeschreibung behandeln, k√∂nnen wir sie einfach so planen, dass sie wie jeder andere Workflow ausgef√ºhrt werden. </p><br><p>  Wir k√∂nnen die Ausf√ºhrung anderer Arten von Arbeiten √ºber Notizb√ºcher planen.  Wenn ein Spark- oder Presto-Job vom Scheduler ausgef√ºhrt wird, wird der Quellcode in das neu erstellte Notizbuch eingef√ºgt und ausgef√ºhrt.  Dieses Notizbuch wird zu einem Verlaufs-Repository, das Quellcode, Parameter, Konfigurationen, Ausf√ºhrungsprotokolle, Fehlermeldungen usw. enth√§lt.  Bei der Fehlerbehebung bietet dies einen schnellen Ausgangspunkt f√ºr die Untersuchung, da alle relevanten Informationen enthalten sind und das Notebook f√ºr das interaktive Debuggen ausgef√ºhrt werden kann. </p><br><h1>  Notebook-Infrastruktur </h1><br><p>  Die Unterst√ºtzung der oben beschriebenen Szenarien auf der Netflix-Skala erfordert eine umfangreiche unterst√ºtzende Infrastruktur.  Stellen Sie kurz einige Projekte vor, die in den folgenden Abschnitten behandelt werden: </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>nteract ist die</b></a> neue Generation der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>reaktionsbasierten</b></a> Benutzeroberfl√§che f√ºr Jupyter-Notebooks.  Es bietet eine einfache, intuitive Benutzeroberfl√§che und verschiedene Verbesserungen f√ºr die klassische Jupyter-Benutzeroberfl√§che, z. B. Inline-Zellen-Symbolleisten, Drag &amp; Drop-Zellen und einen integrierten Explorer. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Papermill-</b></a> Bibliothek zur Parametrisierung, Ausf√ºhrung und Analyse von Jupyter-Notebooks.  Mit deren Hilfe Sie mehrere Notebooks mit verschiedenen Parametern verbreiten und gleichzeitig ausf√ºhren k√∂nnen.  Mit Papermill k√∂nnen Sie auch Metriken f√ºr eine gesamte Notebook-Sammlung sammeln und zusammenfassen. </p><br><p>  <a href=""><b>Commuter ist ein</b></a> leichter, vertikal skalierbarer Dienst zum Anzeigen und Freigeben von Notebooks.  Es bietet eine Jupyter-kompatible Version der API f√ºr Inhalte und erleichtert das Lesen lokal auf Amazon S3 gespeicherter Notebooks.  Bietet auch einen Explorer zum Suchen und Freigeben von Dateien. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Titus ist eine</b></a> Containerverwaltungsplattform, die einen skalierbaren und zuverl√§ssigen Start von Containern und eine Cloud-native Integration in Amazon AWS bietet.  Titus wurde bei Netflix entwickelt und wird im Kampf zur Unterst√ºtzung von Netflix-Streaming-, Empfehlungs- und Inhaltssystemen verwendet. </p><br><p>  Eine detailliertere Beschreibung der Architektur finden Sie im Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Planen von Notebooks bei Netflix</a> .  F√ºr den Zweck dieses Beitrags beschr√§nken wir uns auf die drei grundlegenden Komponenten des Systems: Speicherung, Ausf√ºhrung und Schnittstelle. </p><br><br><img src="https://habrastorage.org/webt/ix/n2/il/ixn2ilrqck4xlxodxzps1siraay.jpeg"><br>  <i>Notebook-Infrastruktur auf Netflix</i> <br><br><h2>  Lagerung </h2><br><p>  Die Netflix-Datenplattform verwendet Amazon S3- und EFS-Cloud-Speicher, den Notebooks als virtuelle Dateisysteme behandeln.  Dies bedeutet, dass jeder Benutzer √ºber ein EFS-Ausgangsverzeichnis verf√ºgt, das einen pers√∂nlichen Arbeitsbereich f√ºr Notebooks enth√§lt.  In diesem Bereich speichern wir alle vom Benutzer erstellten oder geladenen Notizb√ºcher.  Dies ist auch der Ort, an dem Lesen und Schreiben stattfinden, wenn der Benutzer den Laptop interaktiv startet.  Wir verwenden die Kombination [Arbeitsbereich + Dateiname] f√ºr den Namespace, d. H.  /efs/users/kylek/notebooks/MySparkJob.ipynb zum Anzeigen, Freigeben und im Ausf√ºhrungsplaner.  Eine solche Vereinbarung verhindert Kollisionen und erleichtert die Identifizierung sowohl des Benutzers als auch des Notebook-Standorts in EFS. </p><br><p>  √úber den Pfad zum Arbeitsbereich k√∂nnen Sie die Komplexit√§t des Cloud-Speichers f√ºr den Benutzer ignorieren.  Beispielsweise werden nur die Namen der Notebook-Dateien im Verzeichnis angezeigt, d. H.  MySparkJob.ipynb.  Dieselbe Datei ist √ºber das Terminal verf√ºgbar: ~ / notebooks / MySparkJob.ipynb. </p><br><p><img src="https://habrastorage.org/webt/4a/bu/cs/4abucsxtgasl8fhalvh9jatsm2e.png"><br>  Notebook-Speicher vs.  Zugang </p><br><p>  Wenn der Benutzer die Aufgabe zum Starten des Notizbuchs festlegt, kopiert der Scheduler das Notizbuch des Benutzers von EFS in das freigegebene Verzeichnis in S3.  Das Notizbuch in S3 wird zur Quelle der Wahrheit f√ºr den Scheduler oder das Quellennotizbuch.  Jedes Mal, wenn der Scheduler (Dispatcher) das Notizbuch startet, erstellt er ein neues Notizbuch aus der Quelle.  Dieses neue Notizbuch startet tats√§chlich und wird zu einem unver√§nderlichen Datensatz einer bestimmten Ausf√ºhrung, der den ausf√ºhrbaren Code, die Ausgabe und die Protokolle jeder Zelle enth√§lt.  Wir nennen es Ausgabe (Ausgabe) Notebook. </p><br><p>  Co-Creation ist ein grundlegendes Merkmal von Netflix.  Daher war es nicht √ºberraschend, als Benutzer anfingen, URL-Links zu Notebooks auszutauschen.  Mit der Zunahme dieser Praxis stehen wir vor dem Problem des versehentlichen Umschreibens, das durch den gleichzeitigen Zugriff mehrerer Benutzer auf dasselbe Notebook verursacht wird.  Unsere Benutzer wollten eine M√∂glichkeit, ihr aktives Notizbuch im schreibgesch√ºtzten Modus freizugeben.  Dies f√ºhrte zur Schaffung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Commuter</b></a> .  Unter der Haube zeigt Commuter die Jupyter-API an, um / files und / api / content in einer Verzeichnisliste aufzulisten, den Inhalt von Dateien anzuzeigen und auf Dateimetadaten zuzugreifen.  Dies bedeutet, dass Benutzer Notizb√ºcher ohne Konsequenzen f√ºr Kampfaufgaben oder live laufende Notizb√ºcher anzeigen k√∂nnen. </p><br><h2>  Berechnen </h2><br><p>  Das Verwalten von Computerressourcen ist einer der schwierigsten Teile der Arbeit mit Daten.  Dies gilt insbesondere f√ºr Netflix, wo wir die hoch skalierbare Containerarchitektur in AWS verwenden.  Alle Jobs auf der Datenplattform werden in Containern ausgef√ºhrt, einschlie√ülich Abfragen, Pipelines und Notizb√ºchern.  Nat√ºrlich wollten wir von dieser Komplexit√§t so viel wie m√∂glich abstrahieren. </p><br><p>  Ein Container wird bereitgestellt, wenn der Benutzer den Notebook-Server startet.  Wir bieten rationale Standardeinstellungen f√ºr Containerressourcen, die f√ºr ~ 87,3% der Ausf√ºhrungsmuster funktionieren.  Wenn dies nicht ausreicht, k√∂nnen Benutzer √ºber eine einfache Oberfl√§che weitere Ressourcen anfordern. </p><br><p><img src="https://habrastorage.org/webt/lv/qd/a7/lvqda7s2wfhpgoegmxq-wufyqqw.png"><br>  Benutzer k√∂nnen so viel oder so wenig Rechenleistung + Speicher ausw√§hlen, wie sie ben√∂tigen <br></p><br><p>  Wir bieten auch eine einheitliche Laufzeit mit einem fertigen Container-Image.  Das Image verf√ºgt √ºber gemeinsam genutzte Bibliotheken und einen vordefinierten Satz von Standardkerneln.  Nicht alles im Image ist statisch - unsere Kernel verwenden die neuesten Spark-Versionen und die neuesten Cluster-Konfigurationen f√ºr unsere Plattform.  Dies reduziert die Unordnung und die Optimierungszeit f√ºr neue Laptops und h√§lt uns im Allgemeinen in einer einzigen Laufzeitumgebung. </p><br><p>  Unter der Haube verwalten wir Orchestrierung und Umgebungen mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Titus</a> , unserem Docker-Containerverwaltungsdienst.  Dar√ºber hinaus erstellen wir einen Wrapper f√ºr diesen Service, der bestimmte Benutzerserverkonfigurationen und Images verwaltet.  Das Bild enth√§lt auch Benutzersicherheitsgruppen und -rollen sowie allgemeine Umgebungsvariablen zur Identifizierung in den enthaltenen Bibliotheken.  Dies bedeutet, dass unsere Benutzer weniger Zeit f√ºr die Infrastruktur und mehr Zeit f√ºr Daten aufwenden k√∂nnen. </p><br><h2>  Schnittstelle </h2><br><p>  Zuvor haben wir unsere Vision beschrieben, dass Notebooks das effektivste und optimalste Werkzeug f√ºr die Arbeit mit Daten sein sollten.  Dies ist jedoch eine interessante Herausforderung: Wie kann eine Benutzeroberfl√§che alle Benutzer unterst√ºtzen?  Wir kennen die genaue Antwort nicht, haben aber einige Ideen. </p><br><p>  Wir wissen, dass Einfachheit erforderlich ist.  Es bedeutet eine intuitive Benutzeroberfl√§che mit minimalistischem Stil und erfordert eine durchdachte Benutzeroberfl√§che, die komplexe Aufgaben einfach macht.  Diese Philosophie passt gut zu den Zielen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>nteract</b></a> , die im React-Frontend f√ºr Jupyter-Notebook geschrieben wurden.  Es betont die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kompositionsf√§higkeit</a> als Grundprinzipien des Designs und macht es zu einem idealen Teil unserer Vision. </p><br><p>  Die h√§ufigste Beschwerde unserer Benutzer ist das Fehlen einer nativen Visualisierung f√ºr alle Sprachen, insbesondere f√ºr Nicht-Python-Sprachen.  Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Daten-Explorer von</a> Nteract ist ein gutes Beispiel daf√ºr, wie komplexe Dinge vereinfacht werden k√∂nnen, indem eine sprachunabh√§ngige M√∂glichkeit zum schnellen Durchsuchen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Daten</a> bereitgestellt wird. </p><br><p>  Sie k√∂nnen den Daten-Explorer in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Beispiel</a> in MyBinder in Aktion betrachten.  (Das Laden kann einige Minuten dauern.) </p><br><p><img src="https://habrastorage.org/webt/ox/xs/sw/oxxssw7z57vkebgbdbgtnnm2ido.gif"><br>  Visualisierung des World Happiness Report-Datasets mit dem Daten-Explorer von nteract </p><br><p>  Wir f√ºhren auch eine integrierte Unterst√ºtzung f√ºr die Parametrisierung ein, die die Planung des Starts von Notebooks vereinfacht und wiederverwendbare Vorlagen erstellt. </p><br><p><img src="https://habrastorage.org/webt/jp/tw/a8/jptwa8er0juvuh5ze3mwezv-yxq.gif"><br>  Native Unterst√ºtzung f√ºr parametrisierte Notebooks in nteract </p><br><p>     Jupyter notebook    ,     .         ,         notebook.     12      ,    .      ,      ,  ,     .        ,    ,    Spark DataFrames,    Scala.          . </p><br><h1> Open Source Projects </h1><br><p> Netflix     .   ,  ,       .        Netflix Data Platform     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Netflix OSS</a> .            ‚ÄúNot Invented Here‚Äù.                 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spark</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jupyter</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pandas</a> . </p><br><p> ,   ,     Jupyter Project,        . ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>nteract</b></a>   notebook UI  Netflix.       ,        .   ,       Jupyter Notebook, ,    ,   .            nteract. </p><br><p>     ,    Netflix,    . ,   ,    ,         ,    . , Papermill,      . </p><br><hr><br><h1> What's Next ( ) </h1><br><p>    ,   ‚Äì   (Netflixers)     . Notebook      Netflix.         ,       .       ,     . </p><br><p> !       .     ,     notebook.          notebook  Netflix,         .       : <br><br>  I: Notebook Innovation ( ) <br><br>  II: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Scheduling Notebooks</a> </p><br><br>  : <br><br>  Scheduling  workflows     ,       ‚Äî    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de439272/">https://habr.com/ru/post/de439272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de439262/index.html">Stellen Sie den Code direkt im Docker-Container bereit. Oder wie man nicht nach jedem Commit z√∂gert</a></li>
<li><a href="../de439264/index.html">So verwalten Sie komplexe technische Projekte, ohne PMs einzustellen: DataLine-Erfahrung</a></li>
<li><a href="../de439266/index.html">Die Erfahrung, ein Spiel f√ºr Android von Grund auf neu zu erstellen und wie es Google Play gutgeschrieben wurde</a></li>
<li><a href="../de439268/index.html">Wie VR-, AR- und 3D-Druck zusammenarbeiten: VR Concept-Erfahrung</a></li>
<li><a href="../de439270/index.html">Ein Beispiel f√ºr das Parsen von C ++ - Code mit libclang in Python</a></li>
<li><a href="../de439278/index.html">ACS meines LCD - Sicherheit an zwei Schrauben</a></li>
<li><a href="../de439280/index.html">Trautonium: die deutsche Welle in der Geschichte der Synthesizer</a></li>
<li><a href="../de439282/index.html">SVG-Filtereffekte. Teil 1. SVG-Filter 101</a></li>
<li><a href="../de439286/index.html">√úber statische Analyse in aller Ehrlichkeit</a></li>
<li><a href="../de439288/index.html">SciPy, Optimierung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>