<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“¬ â—½ï¸ ğŸ‘©ğŸ½â€âš•ï¸ ä½¿ç”¨OpenCVåˆ›å»ºGIF ğŸ—ƒï¸ ğŸ‘¨ğŸ½â€ğŸ³ ğŸ‘¨ğŸ¼â€ğŸ’»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ•™ç¨‹å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨OpenCVï¼ŒPythonå’ŒImageMagickåˆ›å»ºåŠ¨ç”»GIFã€‚ ç„¶åç»“åˆè¿™äº›æ–¹æ³•ï¼Œç”¨OpenCVåˆ›å»ºä¸€ä¸ªæ¨¡å› ç”Ÿæˆå™¨ï¼ 

 æˆ‘ä»¬æ‰€æœ‰äººéƒ½éœ€è¦æ—¶å¸¸å¤§ç¬‘ã€‚ ä¹Ÿè®¸æ‰¾åˆ°lulzaçš„æœ€å¥½æ–¹æ³•æ˜¯ä½¿ç”¨æ¨¡å› ã€‚ æˆ‘çš„ä¸€äº›æœ€çˆ±ï¼š 



- é’è›™é’è›™ï¼ˆKermit the Frogï¼‰ï¼šâ€œä½†è¿™...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨OpenCVåˆ›å»ºGIF</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429024/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/g1/sx/hd/g1sxhdlqfra2bohbg5d7yjliv6g.gif"></div><br><br> æœ¬æ•™ç¨‹å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨OpenCVï¼ŒPythonå’ŒImageMagickåˆ›å»ºåŠ¨ç”»GIFã€‚ ç„¶åç»“åˆè¿™äº›æ–¹æ³•ï¼Œç”¨OpenCVåˆ›å»ºä¸€ä¸ªæ¨¡å› ç”Ÿæˆå™¨ï¼ <br><br> æˆ‘ä»¬æ‰€æœ‰äººéƒ½éœ€è¦æ—¶å¸¸å¤§ç¬‘ã€‚ ä¹Ÿè®¸æ‰¾åˆ°lulzaçš„æœ€å¥½æ–¹æ³•æ˜¯ä½¿ç”¨æ¨¡å› ã€‚ æˆ‘çš„ä¸€äº›æœ€çˆ±ï¼š <br><br><ul><li> é’è›™é’è›™ï¼ˆKermit the Frogï¼‰ï¼šâ€œä½†è¿™ä¸å…³æˆ‘çš„äº‹â€ </li><li> è„¾æ°”æš´èºçš„çŒ« </li><li> å²è¯—å¤±è´¥ </li><li> å¥½å®¶ä¼™æ ¼é›·æ ¼ </li></ul><br>  <b>ä½†æ˜¯å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œè¿™äº›æ¨¡å› æ— æ³•ä¸â€œä¸ä¹‹è¾¾æˆåè®®â€æ¨¡å› ï¼ˆâ€œä¸ä¹‹è¾¾æˆåè®®â€æˆ–â€œè‡ªå·±ç†è§£â€ï¼‰ç›¸æå¹¶è®ºï¼Œæœ¬æ–‡å¼€å¤´ç»™å‡ºäº†ä¸€ä¸ªä¾‹å­ã€‚</b> <br><a name="habracut"></a><br> é€šå¸¸åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨ï¼š <br><br><ol><li> ä½œä¸ºå¯¹ä¸åŒæ„æ‚¨å·²å®Œæˆ/è¯´è¿‡çš„äº‹æƒ…çš„äººçš„å›ç­”æˆ–åå¯¹ï¼ˆâ€œä¸ä¹‹è¾¾æˆåè®®â€ï¼‰ </li><li> æˆ´ä¸Šçœ¼é•œå°±åƒæ‚¨è¦ç¦»å¼€ä¸€æ ·ï¼Œè®©ä¸€ä¸ªäººç‹¬è‡ªé¢å¯¹é—®é¢˜ï¼ˆâ€œè‡ªå·±äº†è§£â€ï¼‰ </li></ol><br> å‡ å¹´å‰ï¼Œæˆ‘åœ¨ä½œè€…çš„åšå®¢ä¸Šè¯»äº†ä¸€ç¯‡æœ‰è¶£çš„æ–‡ç« ï¼Œæˆ‘ä¸è®°å¾—å¦‚ä½•ä½¿ç”¨è®¡ç®—æœºè§†è§‰ç”Ÿæˆæ­¤ç±»æ¨¡å› ã€‚ ä¸Šå‘¨æˆ‘åœ¨ä»»ä½•åœ°æ–¹éƒ½æ‰¾ä¸åˆ°æ­¤æŒ‡å—ï¼Œå› æ­¤ï¼Œä½œä¸ºåšå®¢ï¼Œè®¡ç®—æœºè§†è§‰ä¸“å®¶å’Œæ¨¡å› ä¸“å®¶ï¼Œæˆ‘å†³å®šè‡ªå·±ç¼–å†™ä¸€ä¸ªæ•™ç¨‹ï¼  ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœæ‚¨ä¸å°å¿ƒçŸ¥é“äº†åŸå§‹å‡ºå¤„ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œä»¥ä¾¿æ„Ÿè°¢ä½œè€…<b>ã€‚UPDï¼š</b>åˆšåˆšä»Kirk Kaiserçš„åšå®¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MakeArtWithPythonä¸­</a>æ‰¾åˆ°äº†åŸå§‹æ–‡ç« ï¼‰ã€‚ <br><br> åœ¨OpenCVä¸Šå¼€å‘æ¨¡å› ç”Ÿæˆå™¨å°†æ•™ä¼šæˆ‘ä»¬è®¸å¤šå®è´µçš„å®è·µæŠ€èƒ½ï¼ŒåŒ…æ‹¬ï¼š <br><br><ol><li> ä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„äººè„¸æ£€æµ‹ </li><li> ä½¿ç”¨dlibåº“æ£€æµ‹é¢éƒ¨æ ‡å¿—å¹¶æå–çœ¼ç›åŒºåŸŸ </li><li> å¦‚ä½•æ ¹æ®æ”¶åˆ°çš„ä¿¡æ¯è®¡ç®—çœ¼ç›ä¹‹é—´çš„æ—‹è½¬è§’åº¦ </li><li> æœ€åï¼Œå¦‚ä½•ä½¿ç”¨OpenCVç”ŸæˆåŠ¨ç”»GIFï¼ˆåœ¨ImageMagickçš„å¸®åŠ©ä¸‹ï¼‰ </li></ol><br> è¯¥æŒ‡å—åº”è¯¥æ—¢æœ‰è¶£åˆæœ‰è¶£-åŒæ—¶æ•™ä¼šæ‚¨åœ¨ç°å®ä¸–ç•Œä¸­æœ‰ç”¨çš„å®è´µçš„è®¡ç®—æœºè§†è§‰ç¼–ç¨‹æŠ€èƒ½ã€‚ <br><br><h1> ä½¿ç”¨OpenCVåˆ›å»ºGIF </h1><br> åœ¨æŒ‡å—çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è®¨è®ºè¯¥é¡¹ç›®çš„å¿…è¦æ¡ä»¶å’Œä¾èµ–å…³ç³»ï¼ŒåŒ…æ‹¬å¼€å‘ç¯å¢ƒçš„æ­£ç¡®é…ç½®ã€‚ <br><br> ç„¶åè€ƒè™‘æˆ‘ä»¬çš„OpenCV GIFç”Ÿæˆå™¨çš„é¡¹ç›®/ç›®å½•ç»“æ„ã€‚ <br><br> ä¸€æ—¦äº†è§£äº†é¡¹ç›®ç»“æ„ï¼Œæˆ‘ä»¬å°†è€ƒè™‘ï¼š1ï¼‰æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼›  2ï¼‰Pythonè„šæœ¬ï¼Œè´Ÿè´£ä½¿ç”¨OpenCVåˆ›å»ºGIFã€‚ <br><br> æœ€åï¼Œæˆ‘ä»¬å°†æ ¹æ®æµè¡Œçš„æ¨¡å› â€œ Deal With Itâ€è¯„ä¼°è¯¥è®¡åˆ’çš„ç»“æœã€‚ <br><br><h4> å…ˆå†³æ¡ä»¶å’Œä¾èµ–é¡¹ </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/ad6/c3e/193/ad6c3e193373bc04c877e60070d73071.png"><br>  <b>å›¾</b>  <b>1.æˆ‘ä»¬å°†ä½¿ç”¨OpenCVï¼Œdlibå’ŒImageMagickåˆ›å»ºGIF</b> <br><br><h3>  Opencvå’Œdlib </h3><br> éœ€è¦OpenCVæ¥ç¡®å®šå¸§ä¸­çš„é¢å­”å’ŒåŸºæœ¬çš„å›¾åƒå¤„ç†ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¦‚æœ</a>ç³»ç»Ÿä¸Šæœªå®‰è£…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenCVï¼Œè¯·</a>éµå¾ªæˆ‘çš„ä¸€ä»½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenCVå®‰è£…æŒ‡å—</a> ã€‚ <br><br> æˆ‘ä»¬ä½¿ç”¨Dlibæ¥æ£€æµ‹é¢éƒ¨æ ‡å¿—ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨è„¸ä¸Šæ‰¾åˆ°ä¸¤åªçœ¼ç›å¹¶æˆ´ä¸Šå¤ªé˜³é•œã€‚ æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨æ­¤æŒ‡ä»¤å®‰è£…dlib</a> ã€‚ <br><br><h4> å½±åƒé­”æœ¯å¸ˆ </h4><br> å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ImageMagick</a> ï¼Œé‚£å°±ç™½è´¹äº†ã€‚ å®ƒæ˜¯å…·æœ‰è®¸å¤šå›¾åƒå¤„ç†åŠŸèƒ½çš„è·¨å¹³å°å‘½ä»¤è¡Œå·¥å…·ã€‚ <br><br> æ‚¨æ˜¯å¦è¦ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤å°†PNG / JPGè½¬æ¢ä¸ºPDFï¼Ÿ æ²¡é—®é¢˜ <br><br> æ‚¨éœ€è¦ä»å‡ å¼ å›¾åƒä¸­åˆ¶ä½œå¤šé¡µPDFï¼Ÿ è½»æ¾ä¸€ç‚¹ <br><br> éœ€è¦ç»˜åˆ¶å¤šè¾¹å½¢ï¼Œç›´çº¿å’Œå…¶ä»–å½¢çŠ¶å—ï¼Ÿ è¿™æ˜¯å¯èƒ½çš„ã€‚ <br><br> å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤å¯¹æ‰€æœ‰å›¾ç‰‡è¿›è¡Œæ‰¹å¤„ç†é¢œè‰²åˆ†çº§æˆ–è°ƒæ•´å…¶å¤§å°ï¼Ÿ ä¸ºæ­¤ï¼Œæ‚¨æ— éœ€åœ¨Pythonä¸­ä¸ºOpenCVç¼–å†™å‡ è¡Œã€‚ <br><br>  ImageMagickè¿˜å¯ä»¥ä»ä»»ä½•å›¾åƒç”ŸæˆGIFã€‚ <br><br> è¦åœ¨Ubuntuï¼ˆæˆ–Raspbianï¼‰ä¸Šå®‰è£…ImageMagickï¼Œåªéœ€ä½¿ç”¨aptï¼š <br><br> ä½¿ç”¨OpenCVShellåˆ›å»ºGIF <br><br><pre><code class="bash hljs">$ sudo apt-get install imagemagick</code> </pre> <br> åœ¨macOSä¸Šï¼Œæ‚¨å¯ä»¥ä½¿ç”¨HomeBrewï¼š <br><br><pre> <code class="bash hljs">$ brew install imagemagick</code> </pre> <br><h4> ä¸å®ç”¨ </h4><br> åœ¨å¤§å¤šæ•°æ–‡ç« ï¼Œè¯¾ç¨‹å’Œä¹¦ç±ä¸­ï¼Œæˆ‘éƒ½ä½¿ç”¨æ–¹ä¾¿çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">imutils</a>å›¾åƒå¤„ç†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŒ…</a> ã€‚ å®ƒä½¿ç”¨pipå®‰è£…åœ¨ç³»ç»Ÿæˆ–è™šæ‹Ÿç¯å¢ƒä¸­ï¼š <br><br><pre> <code class="bash hljs">$ pip install imutils</code> </pre> <br><h2> é¡¹ç›®ç»“æ„ </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e42/281/af0/e42281af07fb94c9ae60a526098f662d.png"><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">2.é¡¹ç›®ç»“æ„åŒ…æ‹¬ä¸¤ä¸ªç›®å½•ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶å’Œä¸€ä¸ªPythonè„šæœ¬</font></i> <br><br> æˆ‘ä»¬çš„é¡¹ç›®ä¸­æœ‰ä¸¤ä¸ªç›®å½•ï¼š <br><br><ul><li>  <code>images/</code> ï¼šæˆ‘ä»¬è¦ä¸ºå…¶åˆ¶ä½œåŠ¨ç”»GIFçš„è¾“å…¥å›¾åƒçš„ç¤ºä¾‹ã€‚ æˆ‘å‘ç°äº†ä¸€äº›å›¾åƒï¼Œä½†å¯ä»¥éšæ„æ·»åŠ è‡ªå·±çš„å›¾åƒã€‚ </li><li>  <code>assets/</code> ï¼šæ­¤æ–‡ä»¶å¤¹åŒ…å«æˆ‘ä»¬çš„è„¸éƒ¨æ£€æµ‹å™¨ï¼Œè„¸éƒ¨ç•Œæ ‡æ£€æµ‹å™¨ä»¥åŠæ‰€æœ‰å›¾åƒå’Œç›¸å…³è’™ç‰ˆã€‚ æœ‰äº†è¿™äº›èµ„äº§ï¼Œæˆ‘ä»¬å°†æŠŠç‚¹å’Œæ–‡æœ¬æ”¾åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„åŸå§‹å›¾åƒä¸Šã€‚ </li></ul><br> ç”±äºå¤§é‡çš„å¯é…ç½®å‚æ•°ï¼Œæˆ‘å†³å®šåˆ›å»ºä¸€ä¸ªJSONé…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ï¼š1ï¼‰å°†æœ‰åŠ©äºå‚æ•°çš„ç¼–è¾‘ï¼›  2ï¼‰å°†éœ€è¦æ›´å°‘çš„å‘½ä»¤è¡Œå‚æ•°ã€‚ è¯¥é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰é…ç½®å‚æ•°éƒ½åŒ…å«åœ¨<code>config.json</code> ã€‚ <br><br> è€ƒè™‘<code>config.json</code>å’Œ<code>create_gif.py</code>çš„å†…å®¹ã€‚ <br><br><a name="1"></a>  <font color="gray">æ³¨æ„äº‹é¡¹</font>  <font color="gray">æ¯ã€‚ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ³¨å†Œåå°†</a>å‘å¸ƒæœ‰å…³è®¡ç®—æœºè§†è§‰ï¼Œæœºå™¨å­¦ä¹ å’ŒOpenCVçš„é¡¹ç›®ä»£ç å’Œ17é¡µçš„æ‰‹å†Œï¼ˆé•œåƒï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æºä»£ç </a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">manual</a> ï¼‰ã€‚</font> <br><br><h2> ä½¿ç”¨OpenCVç”ŸæˆGIF </h2><br> å› æ­¤ï¼Œè®©æˆ‘ä»¬ç»§ç»­å¹¶å¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„OpenCV GIFç”Ÿæˆå™¨ï¼ <br><br><h4>  JSONé…ç½®æ–‡ä»¶å†…å®¹ </h4><br> è®©æˆ‘ä»¬ä»JSONé…ç½®æ–‡ä»¶å¼€å§‹ï¼Œç„¶åç»§ç»­ä½¿ç”¨Pythonè„šæœ¬ã€‚ <br><br> æ‰“å¼€ä¸€ä¸ªæ–°çš„<code>config.json</code>æ–‡ä»¶ï¼Œå¹¶æ’å…¥ä»¥ä¸‹é”®/å€¼å¯¹ï¼š <br><br> ä½¿ç”¨OpenCVPythonåˆ›å»ºGIF <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"face_detector_prototxt"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deploy.prototxt"</span></span>, <span class="hljs-string"><span class="hljs-string">"face_detector_weights"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/res10_300x300_ssd_iter_140000.caffemodel"</span></span>, <span class="hljs-string"><span class="hljs-string">"landmark_predictor"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/shape_predictor_68_face_landmarks.dat"</span></span>,</code> </pre> <br> è¿™äº›æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ·±åº¦å­¦ä¹ </a>ä¸­çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenCVäººè„¸æ£€æµ‹å™¨</a>æ¨¡å‹æ–‡ä»¶ã€‚ <br><br> æœ€åä¸€è¡Œæ˜¯dlibäººè„¸é¢„æµ‹å™¨çš„è·¯å¾„ã€‚ <br><br> ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€äº›å›¾åƒæ–‡ä»¶çš„è·¯å¾„ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"sunglasses"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"sunglasses_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses_mask.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it_mask.png"</span></span>,</code> </pre> <br> è¿™äº›æ˜¯æˆ‘ä»¬çš„å¤ªé˜³é•œï¼Œæ–‡æœ¬å’Œä¸ä¹‹åŒ¹é…çš„è’™ç‰ˆçš„è·¯å¾„ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ <br><br> é¦–å…ˆï¼ŒèŠ±å¼å¤ªé˜³é•œå’Œå£ç½©ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c18/c4c/647/c18c4c6471e203aedea66a80c9080192.png"></div><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">3.æ‚¨ä¸å–œæ¬¢å¸¦åƒç´ çš„çœ¼é•œå—ï¼Ÿ</font></i>  <i><font color="gray">åˆšå¿å—</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58b/91a/d9c/58b91ad9c2e66238b3f3ac22fe1ee439.png"></div><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">4.æ‚¨ä¸æ˜ç™½ä¸ºä»€ä¹ˆéœ€è¦æˆ´å¤ªé˜³çœ¼é•œçš„å£ç½©ï¼Ÿ</font></i>  <i><font color="gray">åªéœ€å¿å—å®ƒ-æˆ–é˜…è¯»æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ä»¥è·å–ç­”æ¡ˆã€‚</font></i> <br><br> ç°åœ¨æˆ‘ä»¬çš„æ–‡å­—æ˜¯â€œ DEAL WITH ITâ€å’Œæ©ç ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec3/4e4/923/ec34e4923e2d05a5b33c065de8f5af66.png"></div><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">5.æ‚¨è®¨åŒHelvetica Neue Condensedå—ï¼Ÿ</font></i>  <i><font color="gray">å¤„ç†å®ƒ</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6c/f70/819/c6cf708198bda68d849029b3ded02265.png"></div><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">6ï¼šä½¿ç”¨æ­¤é®ç½©å¯ä»¥åœ¨æ–‡æœ¬å‘¨å›´ç»˜åˆ¶è¾¹æ¡†ã€‚</font></i>  <i><font color="gray">å“¦ï¼Œä¹Ÿè®¸æ‚¨ä¸æƒ³ï¼Œæƒ³è¦è¾¹ç•Œå—ï¼Ÿ</font></i>  <i><font color="gray">å¥½å§ï¼Œå¿å—å®ƒ</font></i> <br><br> éœ€è¦ä½¿ç”¨é®ç½©æ‰èƒ½å°†ç›¸åº”çš„å›¾åƒè¦†ç›–åœ¨ç…§ç‰‡ä¸Šï¼šæˆ‘ä»¬å°†åœ¨ä»¥åå¤„ç†ã€‚ <br><br> ç°åœ¨ä¸ºæ¨¡å› ç”Ÿæˆå™¨è®¾ç½®ä¸€äº›å‚æ•°ï¼š <br><br><pre> <code class="python hljs"> <span class="hljs-string"><span class="hljs-string">"min_confidence"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">"steps"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">"delay"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">"final_delay"</span></span>: <span class="hljs-number"><span class="hljs-number">250</span></span>, <span class="hljs-string"><span class="hljs-string">"loop"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"temp_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"temp"</span></span> }</code> </pre> <br> ä»¥ä¸‹æ˜¯æ¯ä¸ªå‚æ•°çš„å®šä¹‰ï¼š <br><br><ul><li>  <code>min_confidence</code> ï¼šæ‰€éœ€çš„æœ€å°é¢éƒ¨æ£€æµ‹æ¦‚ç‡ã€‚ </li><li>  <code>steps</code> ï¼šæœ€ç»ˆåŠ¨ç”»ä¸­çš„å¸§æ•°ã€‚ æ¯ä¸ªâ€œæ­¥éª¤â€éƒ½å°†å¤ªé˜³é•œä»ä¸Šè¾¹ç•Œå‘ä¸‹ç§»åŠ¨åˆ°ç›®æ ‡ï¼ˆå³ï¼Œçœ¼ç›ï¼‰ã€‚ </li><li>  <code>delay</code> ï¼šå¸§ä¹‹é—´çš„å»¶è¿Ÿï¼Œä»¥ç™¾åˆ†ä¹‹ä¸€ç§’ä¸ºå•ä½ã€‚ </li><li>  <code>final_delay</code> ï¼šæœ€åä¸€å¸§çš„å»¶è¿Ÿï¼Œä»¥ç™¾åˆ†ä¹‹ä¸€ç§’ä¸ºå•ä½ï¼ˆåœ¨æ­¤æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›æ–‡æœ¬æ˜¾ç¤ºçš„æ—¶é—´æ¯”å…¶ä½™å¸§çš„æ˜¾ç¤ºæ—¶é—´é•¿ï¼‰ã€‚ </li><li>  <code>loop</code> ï¼šé›¶å€¼è¡¨ç¤ºGIFæ°¸è¿œé‡å¤ï¼Œå¦åˆ™ä¸ºåŠ¨ç”»çš„é‡å¤æ¬¡æ•°æŒ‡å®šä¸€ä¸ªæ­£æ•´æ•°ã€‚ </li><li>  <code>temp_dir</code> ï¼šåˆ›å»ºæœ€ç»ˆGIFä¹‹å‰å°†åœ¨å…¶ä¸­å­˜å‚¨æ¯ä¸ªå¸§çš„ä¸´æ—¶ç›®å½•ã€‚ </li></ul><br><h4> æ¨¡å› ï¼ŒGIFå’ŒOpenCV </h4><br> æˆ‘ä»¬åˆ›å»ºäº†JSONé…ç½®æ–‡ä»¶ï¼Œç°åœ¨è®©æˆ‘ä»¬ç»§ç»­è¿›è¡Œå®é™…ä»£ç ã€‚ <br><br> æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå°†å…¶å‘½åä¸º<code>create_gif.py</code>å¹¶ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    from imutils import face_utils from imutils import paths import numpy as np import argparse import imutils import shutil import json import dlib import cv2 import sys import os</span></span></code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯¼å…¥å¿…è¦çš„åŒ…ã€‚ ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨imutilsï¼Œdlibå’ŒOpenCVã€‚ è¦å®‰è£…è¿™äº›ä¾èµ–é¡¹ï¼Œè¯·å‚é˜…ä¸Šé¢çš„â€œå…ˆå†³æ¡ä»¶å’Œä¾èµ–é¡¹â€éƒ¨åˆ†ã€‚ <br><br> ç°åœ¨è¯¥è„šæœ¬å…·æœ‰å¿…éœ€çš„åŒ…ï¼Œå› æ­¤<code>overlay_image</code>å®šä¹‰<code>overlay_image</code>å‡½æ•°ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">overlay_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(bg, fg, fgMask, coords)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#     (, )  #    (sH, sW) = fg.shape[:2] (x, y) = coords #          #  ,   , **  # ,    overlay = np.zeros(bg.shape, dtype="uint8") overlay[y:y + sH, x:x + sW] = fg # - , **  ** # ,    ,    # ,       alpha = np.zeros(bg.shape[:2], dtype="uint8") alpha[y:y + sH, x:x + sW] = fgMask alpha = np.dstack([alpha] * 3) #  -   , #   - output = alpha_blend(overlay, bg, alpha) #   return output</span></span></code> </pre> <br>  <code>overlay_image</code>å‡½æ•°åœ¨<code>coords</code>åæ ‡<i>ï¼ˆ</i>åæ ‡<i>ï¼ˆxï¼Œyï¼‰</i> ï¼‰å¤„åœ¨èƒŒæ™¯å›¾åƒï¼ˆ <code>bg</code> ï¼‰çš„é¡¶éƒ¨å¼ºåŠ ä¸€ä¸ªå‰æ™¯ï¼ˆ <code>fg</code> ï¼‰ï¼Œä»è€Œåœ¨å‰æ™¯è’™ç‰ˆ<code>fgMask</code>å®ç°äº†alphaé€æ˜æ€§ã€‚ <br><br> è¦ç†Ÿæ‚‰OpenCVçš„åŸºç¡€çŸ¥è¯†ï¼ˆä¾‹å¦‚ä½¿ç”¨é®ç½©ï¼‰ï¼Œè¯·åŠ¡å¿…é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ¬æŒ‡å—</a> ã€‚ <br><br> è¦å®Œæˆæ··åˆè¿‡ç¨‹ï¼Œè¯·æ‰§è¡ŒAlphaæ··åˆï¼š <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alpha_blend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fg, bg, alpha)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  ,    - #        [0, 1] fg = fg.astype("float") bg = bg.astype("float") alpha = alpha.astype("float") / 255 #  - fg = cv2.multiply(alpha, fg) bg = cv2.multiply(1 - alpha, bg) #     ,    output = cv2.add(fg, bg) #   return output.astype("uint8")</span></span></code> </pre> <br> è¯¥alphaæ··åˆå®ç°ä¹Ÿå¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨LearnOpenCVåšå®¢ä¸Šæ‰¾åˆ°</a> ã€‚ <br><br> æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬å°†å‰æ™¯ï¼ŒèƒŒæ™¯å’ŒAlphaé€šé“è½¬æ¢ä¸º<i>[0ï¼Œ1]</i>èŒƒå›´å†…çš„æµ®ç‚¹æ•°ã€‚ ç„¶åæˆ‘ä»¬æ‰§è¡ŒAlphaæ··åˆï¼Œæ·»åŠ å‰æ™¯å’ŒèƒŒæ™¯ä»¥è·å¾—è¿”å›åˆ°è°ƒç”¨å‡½æ•°çš„ç»“æœã€‚ <br><br> æˆ‘ä»¬è¿˜å°†åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œè¯¥å‡½æ•°å…è®¸ä½¿ç”¨ImageMagickå’Œ<code>convert</code>å‘½ä»¤ä»ä¸€ç»„å›¾åƒè·¯å¾„ç”ŸæˆGIFï¼š <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_gif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(inputPath, outputPath, delay, finalDelay, loop)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#        imagePaths = sorted(list(paths.list_images(inputPath))) #      lastPath = imagePaths[-1] imagePaths = imagePaths[:-1] #   imagemagick 'convert'  #  GIF      #   ( ) cmd = "convert -delay {} {} -delay {} {} -loop {} {}".format( delay, " ".join(imagePaths), finalDelay, lastPath, loop, outputPath) os.system(cmd)</span></span></code> </pre> <br>  <code>create_gif</code>å‡½æ•°è·å–ä¸€ç»„å›¾åƒå¹¶å°†å…¶æ”¶é›†åˆ°GIFåŠ¨ç”»ä¸­ï¼Œå¹¶åœ¨å¸§å’Œå¾ªç¯ä¹‹é—´å…·æœ‰æŒ‡å®šçš„å»¶è¿Ÿã€‚  ImageMagickå¤„ç†æ‰€æœ‰è¿™ä¸€åˆ‡-æˆ‘ä»¬ä»…å°†<code>convert</code>å‘½ä»¤åŒ…è£…åœ¨ä¸€ä¸ªåŠ¨æ€å¤„ç†å„ç§å‚æ•°çš„å‡½æ•°ä¸­ã€‚ <br><br> è¦æŸ¥çœ‹å¯ç”¨çš„<code>convert</code>å‚æ•°ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯·å‚é˜…æ–‡æ¡£</a> ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å°†çœ‹åˆ°è¿™ä¸ªå›¢é˜Ÿæœ‰å¤šå°‘åŠŸèƒ½ï¼ <br><br> ç‰¹åˆ«æ˜¯åœ¨æ­¤åŠŸèƒ½ä¸­ï¼Œæˆ‘ä»¬ï¼š <br><br><ul><li> é‡‡å–<code>imagePaths</code> ã€‚ </li><li> é€‰æ‹©æœ€åä¸€å¼ å›¾åƒçš„è·¯å¾„ï¼Œå®ƒå°†æœ‰ä¸€ä¸ªå•ç‹¬çš„å»¶è¿Ÿã€‚ </li><li> é‡æ–°åˆ†é…<code>imagePaths</code>ä»¥æ’é™¤æœ€åä¸€ä¸ªè·¯å¾„ã€‚ </li><li> æˆ‘ä»¬å°†å‘½ä»¤ä¸å‘½ä»¤è¡Œå‚æ•°ç»„åˆåœ¨ä¸€èµ·ï¼Œç„¶åæŒ‡ç¤ºæ“ä½œç³»ç»Ÿè¿›è¡Œ<code>convert</code>ä»¥åˆ›å»ºGIFåŠ¨ç”»ã€‚ </li></ul><br> ä¸ºè„šæœ¬åˆ†é…è‡ªå·±çš„å‘½ä»¤è¡Œå‚æ•°ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      ap = argparse.ArgumentParser() ap.add_argument("-c", "--config", required=True, help="path to configuration file") ap.add_argument("-i", "--image", required=True, help="path to input image") ap.add_argument("-o", "--output", required=True, help="path to output GIF") args = vars(ap.parse_args())</span></span></code> </pre> <br> æˆ‘ä»¬æœ‰ä¸‰ä¸ªåœ¨è¿è¡Œæ—¶å¤„ç†çš„å‘½ä»¤è¡Œå‚æ•°ï¼š <br><br><ul><li>  <code>--config</code> ï¼šJSONé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚ æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­å›é¡¾äº†é…ç½®æ–‡ä»¶ã€‚ </li><li>  <code>--image</code> ï¼šåˆ›å»ºåŠ¨ç”»æ‰€ä¾æ®çš„è¾“å…¥å›¾åƒçš„è·¯å¾„ï¼ˆå³æ£€æµ‹é¢éƒ¨ï¼Œæˆ´å¢¨é•œï¼Œç„¶åè¾“å…¥æ–‡æœ¬ï¼‰ã€‚ </li><li>  <code>--output</code> ï¼šç”Ÿæˆçš„GIFçš„è·¯å¾„ã€‚ </li></ul><br> åœ¨å‘½ä»¤è¡Œ/ç»ˆç«¯ä¸Šè¿è¡Œè„šæœ¬æ—¶ï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯å¿…éœ€çš„ã€‚ <br><br> ä¸‹è½½é…ç½®æ–‡ä»¶ä»¥åŠçœ¼é•œå’Œç›¸åº”çš„æ©ç ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    JSON, #     config = json.loads(open(args["config"]).read()) sg = cv2.imread(config["sunglasses"]) sgMask = cv2.imread(config["sunglasses_mask"]) #    (  ),   #  ,  ,     #   GIF- shutil.rmtree(config["temp_dir"], ignore_errors=True) os.makedirs(config["temp_dir"])</span></span></code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆå°†æ¥å¯èƒ½ä¼šä½œä¸ºPythonè¯å…¸æä¾›ï¼‰ã€‚ ç„¶åè£…å…¥å¢¨é•œå’Œå£ç½©ã€‚ <br><br> å¦‚æœä»¥å‰çš„è„šæœ¬ä¸­ä»ç„¶æœ‰å…¶ä»–å†…å®¹ï¼Œè¯·åˆ é™¤ä¸´æ—¶ç›®å½•ï¼Œç„¶åé‡æ–°åˆ›å»ºç©ºçš„ä¸´æ—¶ç›®å½•ã€‚ ä¸´æ—¶æ–‡ä»¶å¤¹å°†åŒ…å«GIFåŠ¨ç”»ä¸­çš„æ¯ä¸ªå•ç‹¬çš„å¸§ã€‚ <br><br> ç°åœ¨å°†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenCVæ·±åº¦å­¦ä¹ äººè„¸æ£€æµ‹å™¨</a>åŠ è½½åˆ°å†…å­˜ä¸­ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># load our OpenCV face detector and dlib facial landmark predictor print("[INFO] loading models...") detector = cv2.dnn.readNetFromCaffe(config["face_detector_prototxt"], config["face_detector_weights"]) predictor = dlib.shape_predictor(config["landmark_predictor"])</span></span></code> </pre> <br> ä¸ºæ­¤ï¼Œè¯·è°ƒç”¨<code>cv2.dnn.readNetFromCaffe</code> ã€‚  <code>dnn</code>æ¨¡å—ä»…åœ¨OpenCV 3.3æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­å¯ç”¨ã€‚ äººè„¸æ£€æµ‹å™¨å°†æ£€æµ‹å›¾åƒä¸­æ˜¯å¦å­˜åœ¨äººè„¸ï¼š <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a91/d3a/0cd/a91d3a0cde3dcb3cac9799c823e47c8c.jpg"><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">7.ä½¿ç”¨OpenCV DNNè¿›è¡Œé¢éƒ¨æ£€æµ‹å™¨æ“ä½œ</font></i> <br><br> ç„¶ååŠ è½½<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">dlibäººè„¸ç•Œæ ‡é¢„æµ‹å™¨</a> ã€‚ å®ƒä½¿æ‚¨å¯ä»¥å®šä½å•ä¸ªç»“æ„ï¼šçœ¼ç›ï¼Œçœ‰æ¯›ï¼Œé¼»å­ï¼Œå˜´å·´å’Œä¸‹å·´çº¿ï¼š <br><br><img src="https://habrastorage.org/getpro/habr/post_images/056/816/890/0568168909b7f01d2f70f6e58faa9ed9.jpg"><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">8. dlibå‘ç°çš„åœ°æ ‡å åŠ åœ¨æˆ‘çš„è„¸ä¸Š</font></i> <br><br> åœ¨æ­¤è„šæœ¬çš„åé¢ï¼Œæˆ‘ä»¬ä»…æå–çœ¼ç›åŒºåŸŸã€‚ <br><br> ç»§ç»­å‰è¿›ï¼Œè®©æˆ‘ä»¬æ‰¾åˆ°é¢å­”ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       image = cv2.imread(args["image"]) (H, W) = image.shape[:2] blob = cv2.dnn.blobFromImage(cv2.resize(image, (300, 300)), 1.0, (300, 300), (104.0, 177.0, 123.0)) #        print("[INFO] computing object detections...") detector.setInput(blob) detections = detector.forward() #       ,  #  ,      i = np.argmax(detections[0, 0, :, 2]) confidence = detections[0, 0, i, 2] #    if confidence &lt; config["min_confidence"]: print("[INFO] no reliable faces found") sys.exit(0)</span></span></code> </pre> <br> åœ¨æ­¤å—ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><ul><li> ä¸‹è½½åŸå§‹<code>image</code> ã€‚ </li><li> æˆ‘ä»¬æ„é€ ä¸€ä¸ª<code>blob</code>ä»¥å‘é€åˆ°ç¥ç»ç½‘ç»œçš„é¢éƒ¨æ£€æµ‹å™¨ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ¬æ–‡</a>ä»‹ç»äº†OpenCVä¸­çš„<code>blobFromImage</code>å¦‚ä½•å·¥ä½œã€‚ </li><li> æ‰§è¡Œé¢éƒ¨æ£€æµ‹ç¨‹åºã€‚ </li><li> æˆ‘ä»¬æ‰¾åˆ°å…·æœ‰æœ€é«˜æ¦‚ç‡å€¼çš„äººï¼Œå¹¶å°†å…¶ä¸æœ€å°å¯æ¥å—æ¦‚ç‡é˜ˆå€¼è¿›è¡Œæ¯”è¾ƒã€‚ å¦‚æœä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™é€€å‡ºè„šæœ¬ã€‚ å¦åˆ™ï¼Œè¯·ç»§ç»­ã€‚ </li></ul><br> ç°åœ¨ï¼Œæˆ‘ä»¬å°†æå–äººè„¸å¹¶è®¡ç®—ç•Œæ ‡ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   (x, y)  #    box = detections[0, 0, i, 3:7] * np.array([W, H, W, H]) (startX, startY, endX, endY) = box.astype("int") #    dlib    #       rect = dlib.rectangle(int(startX), int(startY), int(endX), int(endY)) shape = predictor(image, rect) shape = face_utils.shape_to_np(shape) #        ,  #     (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS["left_eye"] (rStart, rEnd) = face_utils.FACIAL_LANDMARKS_IDXS["right_eye"] leftEyePts = shape[lStart:lEnd] rightEyePts = shape[rStart:rEnd]</span></span></code> </pre> <br> è¦æå–è„¸éƒ¨å¹¶æ‰¾åˆ°è„¸éƒ¨ç•Œæ ‡ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><ul><li> æˆ‘ä»¬æå–è„¸éƒ¨å‘¨å›´çš„è¾¹ç•Œæ¡†çš„åæ ‡ã€‚ </li><li> åœ¨dlibä¸­åˆ›å»ºä¸€ä¸ª<code>rectangle</code>å¯¹è±¡å¹¶åº”ç”¨é¢æœ¬åœ°åŒ–ã€‚ </li><li> æˆ‘ä»¬åˆ†åˆ«è·å–<code>leftEyePts</code>å’Œ<code>rightEyePts</code>çš„<i>ï¼ˆxï¼Œyï¼‰</i>åæ ‡ã€‚ </li></ul><br> ç»™å®šçœ¼ç›çš„åæ ‡ï¼Œæ‚¨å¯ä»¥è®¡ç®—å‡ºæ”¾ç½®å¤ªé˜³é•œçš„ä½ç½®å’Œæ–¹å¼ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       leftEyeCenter = leftEyePts.mean(axis=0).astype("int") rightEyeCenter = rightEyePts.mean(axis=0).astype("int") #      dY = rightEyeCenter[1] - leftEyeCenter[1] dX = rightEyeCenter[0] - leftEyeCenter[0] angle = np.degrees(np.arctan2(dY, dX)) - 180 #      ,  #      sg = imutils.rotate_bound(sg, angle) #     **  ,    #   â€”       # 90%       sgW = int((endX - startX) * 0.9) sg = imutils.resize(sg, width=sgW) #      ( ,   #  ),      #     - â€”   #       , #     sgMask = cv2.cvtColor(sgMask, cv2.COLOR_BGR2GRAY) sgMask = cv2.threshold(sgMask, 0, 255, cv2.THRESH_BINARY)[1] sgMask = imutils.rotate_bound(sgMask, angle) sgMask = imutils.resize(sgMask, width=sgW, inter=cv2.INTER_NEAREST)</span></span></code> </pre> <br> é¦–å…ˆï¼Œæˆ‘ä»¬è®¡ç®—æ¯åªçœ¼ç›çš„ä¸­å¿ƒï¼Œç„¶åè®¡ç®—è´¨å¿ƒä¹‹é—´çš„è§’åº¦ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¡†æ¶ä¸­çš„é¢éƒ¨</a>æ°´å¹³<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¹é½æ—¶</a>æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ <br><br> ç°åœ¨ï¼Œæ‚¨å¯ä»¥æ—‹è½¬çœ¼é•œå¹¶è°ƒæ•´å…¶å¤§å°ã€‚ è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a>ä¸æ˜¯<code>rotate</code> ï¼Œè€Œæ˜¯<code>rotate</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»‘å®šå‡½æ•°</a> ï¼Œå› æ­¤OpenCVä¸ä¼šä¿®å‰ªä»¿å°„å˜æ¢åä¸å¯è§çš„éƒ¨åˆ†ã€‚ <br><br> åº”ç”¨äºçœ¼é•œçš„ç›¸åŒæ“ä½œä¹Ÿé€‚ç”¨äºé¢ç½©ã€‚ ä½†æ˜¯é¦–å…ˆï¼Œæ‚¨éœ€è¦å°†å…¶è½¬æ¢ä¸ºç°è‰²é˜´å½±å¹¶è¿›è¡ŒäºŒå€¼åŒ–å¤„ç†ï¼Œå› ä¸ºé®ç½©å§‹ç»ˆæ˜¯äºŒè¿›åˆ¶çš„ã€‚ ç„¶åï¼Œæˆ‘ä»¬ä»¥ä¸çœ¼é•œç›¸åŒçš„æ–¹å¼æ—‹è½¬å¹¶è°ƒæ•´è’™ç‰ˆçš„å¤§å°ã€‚ <br><br>  <i><b>æ³¨æ„ï¼š</b>è¯·æ³¨æ„ï¼Œåœ¨è°ƒæ•´é®ç½©å¤§å°æ—¶ï¼Œæˆ‘ä»¬å¯¹æœ€è¿‘çš„ç›¸é‚»ç‚¹ä½¿ç”¨æ’å€¼ï¼Œå› ä¸ºé®ç½©åº”è¯¥åªæœ‰ä¸¤ä¸ªå€¼ï¼ˆ0å’Œ255ï¼‰ã€‚</i>  <i>å…¶ä»–æ’å€¼æ–¹æ³•æ›´ç¾è§‚ï¼Œä½†ä¸é€‚ç”¨äºè’™ç‰ˆã€‚</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨è¿™é‡Œï¼Œ</a>æ‚¨å¯ä»¥è·å¾—æœ‰å…³æœ€è¿‘é‚»ç‚¹æ’å€¼çš„æ›´å¤šä¿¡æ¯ã€‚</i> <br><br> å‰©ä¸‹çš„ä¸‰ä¸ªä»£ç å—ä¸ºGIFåŠ¨ç”»åˆ›å»ºæ¡†æ¶ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    ,   #  N       #    steps = np.linspace(0, rightEyeCenter[1], config["steps"], dtype="int") # start looping over the steps for (i, y) in enumerate(steps): #      #  ,    **    #  ,       #   shiftX = int(sg.shape[1] * 0.25) shiftY = int(sg.shape[0] * 0.35) y = max(0, y - shiftY) # add the sunglasses to the image output = overlay_image(image, sg, sgMask, (rightEyeCenter[0] - shiftX, y))</span></span></code> </pre> <br> çœ¼é•œä»å›¾åƒé¡¶éƒ¨æ‰è½ã€‚ åœ¨æ¯å¸§ä¸Šï¼Œå®ƒä»¬éƒ½é è¿‘è„¸éƒ¨æ˜¾ç¤ºï¼Œç›´åˆ°é®ä½çœ¼ç›ä¸ºæ­¢ã€‚ ä½¿ç”¨JSONé…ç½®æ–‡ä»¶ä¸­çš„<code>"steps"</code>å˜é‡ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªæ¡†æ¶ç”Ÿæˆyåæ ‡ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ— éœ€èŠ±è´¹å¤ªå¤šç²¾åŠ›å³å¯ä½¿ç”¨NumPyçš„<code>linspace</code>å‡½æ•°ã€‚ <br><br> ä»å·¦åˆ°å³ç¨å¾®åç§»çš„çº¿æ¡å¯èƒ½çœ‹èµ·æ¥æœ‰äº›å¥‡æ€ªï¼Œä½†æ˜¯éœ€è¦ç¡®ä¿çœ¼é•œèƒ½è¦†ç›–æ•´ä¸ªçœ¼ç›ï¼Œè€Œä¸ä»…ä»…æ˜¯ç§»åŠ¨åˆ°çœ¼ç›ä¸­å¿ƒçš„ä½ç½®ã€‚ æˆ‘å‡­ç»éªŒç¡®å®šç™¾åˆ†æ¯”ä»¥è®¡ç®—æ²¿æ¯ä¸ªè½´çš„åç§»é‡ã€‚ ä¸‹ä¸€è¡Œç¡®ä¿æ²¡æœ‰è´Ÿå€¼ã€‚ <br><br> ä½¿ç”¨<code>overlay_image</code>å‡½æ•°ï¼Œ <code>overlay_image</code>ç”Ÿæˆæœ€ç»ˆçš„<code>output</code>å¸§ã€‚ <br><br> ç°åœ¨ï¼Œä½¿ç”¨å¦ä¸€ä¸ªè’™ç‰ˆåº”ç”¨æ–‡æœ¬â€œ DEAL WITH ITâ€ï¼š <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#    ,    #  "DEAL WITH IT"   if i == len(steps) - 1: #   "DEAL WITH IT"  , #   dwi = cv2.imread(config["deal_with_it"]) dwiMask = cv2.imread(config["deal_with_it_mask"]) dwiMask = cv2.cvtColor(dwiMask, cv2.COLOR_BGR2GRAY) dwiMask = cv2.threshold(dwiMask, 0, 255, cv2.THRESH_BINARY)[1] #       80%   #  oW = int(W * 0.8) dwi = imutils.resize(dwi, width=oW) dwiMask = imutils.resize(dwiMask, width=oW, inter=cv2.INTER_NEAREST) #  ,   ,  #   oX = int(W * 0.1) oY = int(H * 0.8) output = overlay_image(output, dwi, dwiMask, (oX, oY))</span></span></code> </pre> <br> åœ¨æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬å¼ºåŠ äº†æ–‡æœ¬ï¼Œå®é™…ä¸Šæ˜¯å¦ä¸€å¹…å›¾åƒã€‚ <br><br> æˆ‘å†³å®šä½¿ç”¨å›¾åƒï¼Œå› ä¸ºOpenCVå­—ä½“çš„æ¸²æŸ“åŠŸèƒ½éå¸¸æœ‰é™ã€‚ å¦å¤–ï¼Œæˆ‘æƒ³åœ¨æ–‡æœ¬å‘¨å›´æ·»åŠ é˜´å½±å’Œè¾¹æ¡†ï¼Œè¿™ä¹Ÿæ˜¯OpenCVä¸çŸ¥é“çš„æ–¹æ³•ã€‚ <br><br> åœ¨æ­¤ä»£ç çš„å…¶ä½™éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†åŒæ—¶åŠ è½½å›¾åƒå’Œè’™ç‰ˆï¼Œç„¶åæ‰§è¡Œalphaæ··åˆä»¥ç”Ÿæˆæœ€ç»ˆç»“æœã€‚ <br><br> å‰©ä¸‹çš„åªæ˜¯å°†æ¯ä¸ªå¸§ä¿å­˜åˆ°ç£ç›˜ï¼Œå¹¶éšååˆ›å»ºGIFåŠ¨ç”»ï¼š <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#      p = os.path.sep.join([config["temp_dir"], "{}.jpg".format( str(i).zfill(8))]) cv2.imwrite(p, output) #      ,     #   GIF- print("[INFO] creating GIF...") create_gif(config["temp_dir"], args["output"], config["delay"], config["final_delay"], config["loop"]) #  --    print("[INFO] cleaning up...") shutil.rmtree(config["temp_dir"], ignore_errors=True)</span></span></code> </pre> <br> æˆ‘ä»¬å°†ç»“æœå†™å…¥ç£ç›˜ã€‚ ç”Ÿæˆæ‰€æœ‰å¸§åï¼Œæˆ‘ä»¬è°ƒç”¨<code>create_gif</code>å‡½æ•°æ¥åˆ›å»ºGIFåŠ¨ç”»æ–‡ä»¶ã€‚ è¯·è®°ä½ï¼Œè¿™æ˜¯ä¸€ä¸ªå°†å‚æ•°ä¼ é€’ç»™ImageMagick <code>convert</code>å‘½ä»¤è¡Œå·¥å…·çš„å¤–å£³ã€‚ <br><br> æœ€åï¼Œåˆ é™¤ä¸´æ—¶è¾“å‡ºç›®å½•å’Œå•ä¸ªå›¾åƒæ–‡ä»¶ã€‚ <br><br><h2> ç»“æœ </h2><br> ç°åœ¨æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼šè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„æ¨¡å› ç”Ÿæˆå™¨åˆ›å»ºäº†ä»€ä¹ˆï¼ <br><br> ç¡®ä¿<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸‹è½½</a>æºä»£ç ï¼Œç¤ºä¾‹å›¾åƒå’Œæ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚ ç„¶åæ‰“å¼€ä¸€ä¸ªç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/dca/b24/46e/dcab2446ec5dc96065e37a473375eea6.gif"><br>  <i><font color="gray">å›¾9.ä½¿ç”¨æ­¤Pythonè„šæœ¬ç”±OpenCVå’ŒImageMagickç”Ÿæˆçš„GIFåŠ¨ç”»</font></i> <br><br> åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ä½¿ç”¨OpenCVå’ŒImageMagickåˆ›å»ºçš„GIFã€‚ åœ¨å…¶ä¸Šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><ol><li> æ­£ç¡®æ£€æµ‹æˆ‘çš„è„¸ã€‚ </li><li> çœ¼ç›çš„å®šä½åŠå…¶ä¸­å¿ƒçš„è®¡ç®—ã€‚ </li><li> çœ¼é•œæ­£ç¡®è½åœ¨è„¸ä¸Šã€‚ </li></ol><br> æˆ‘åšå®¢çš„è¯»è€…çŸ¥é“æˆ‘æ˜¯ä¾ç½—çºªå…¬å›­çš„ä¸€ä¸ªå¤§ä¹¦å‘†å­ï¼Œç»å¸¸åœ¨æˆ‘çš„ä¹¦ï¼Œè¯¾ç¨‹å’Œå­¦ä¹ æŒ‡å—ä¸­æåˆ°å®ƒã€‚ <br><br> ä¸å–œæ¬¢<i>ä¾ç½—çºªå…¬å›­</i>å—ï¼Ÿ <br><br> å¥½çš„ï¼Œè¿™æ˜¯æˆ‘çš„ç­”æ¡ˆï¼š <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian_jp.jpg \ --output adrian_jp_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/da9/0d7/740/da90d7740e8ac813b9f99a727b9e04bc.gif"><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">10. OpenCV GIFåŠ¨ç”»åŸºäºæœ€è¿‘ä¾ç½—çºªä¸–ç•Œ2æ”¾æ˜ ä¸­çš„ç…§ç‰‡</font></i> <br><br> åœ¨è¿™é‡Œï¼Œæˆ‘èº«ç€ä¸»é¢˜Tæ¤å‚åŠ äº†å±•è§ˆã€Šä¾ç½—çºªä¸–ç•Œï¼š2ã€‹ï¼Œä¸Šé¢æ”¾ç€ä¸€æ¯å…‰ï¼Œè¿˜æœ‰ä¸€æœ¬æ”¶è—ä¹¦ã€‚ <br><br> æœ‰è¶£çš„æ•…äº‹ï¼š <br><br> äº”å…­å¹´å‰ï¼Œæˆ‘å’Œæˆ‘çš„å¦»å­å‚è§‚äº†ä½›ç½—é‡Œè¾¾è¿ªæ–¯å°¼ä¸–ç•Œçš„Epcotä¸­å¿ƒä¸»é¢˜å…¬å›­ã€‚ <br><br> æˆ‘ä»¬å†³å®šå‡ºå·®ï¼Œä»¥æ‘†è„±åº·æ¶…ç‹„æ ¼å·ä¸¥é…·çš„å†¬å­£å’Œæ€¥éœ€çš„é˜³å…‰ã€‚ <br><br> ä¸å¹¸çš„æ˜¯ï¼Œåœ¨ä½›ç½—é‡Œè¾¾å·ä¸€ç›´ä¸‹ç€é›¨ï¼Œæ¸©åº¦å‡ ä¹ä¸è¶…è¿‡10Â°Cã€‚ <br><br> åœ¨åŠ æ‹¿å¤§èŠ±å›­é™„è¿‘ï¼Œç‰¹ä¸½èï¼ˆTrishaï¼‰æ‹äº†ä¸€å¼ æˆ‘çš„ç…§ç‰‡ï¼šå¥¹è¯´æˆ‘çœ‹ä¸Šå»åƒä¸ªå¸è¡€é¬¼ï¼Œçš®è‚¤è‹ç™½ï¼Œæ·±è‰²è¡£æœå’Œå…œå¸½ï¼ŒèƒŒåæ˜¯éƒéƒè‘±è‘±çš„èŠ±å›­ï¼š <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/vampire.jpg \ --output vampire_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/ad1/1ce/ca2/ad11ceca2ed48792a5aa28c0c8dc7f40.gif"><br>  <i><font color="gray">å›¾</font></i>  <i><font color="gray">11.ä½¿ç”¨OpenCVå’ŒPythonï¼Œæ‚¨å¯ä»¥åˆ¶ä½œæ­¤æ¨¡å› æˆ–å…¶ä»–åŠ¨ç”»GIF</font></i> <br><br> å½“å¤©æ™šä¸Šï¼ŒTrishaåœ¨ç¤¾äº¤ç½‘ç»œä¸Šå‘å¸ƒäº†ä¸€å¼ ç…§ç‰‡-æˆ‘ä¸å¾—ä¸å¿å—ã€‚ <br><br> å‚åŠ äº†PyImageConf 2018çš„é‚£äº›äººï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é˜…è¯»è¯„è®º</a> ï¼‰çŸ¥é“æˆ‘æ€»æ˜¯å¾ˆå–œæ¬¢å¼€ç©ç¬‘ã€‚ è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š <br><br>  <i>é—®é¢˜ï¼šä¸ºä»€ä¹ˆå…¬é¸¡è¿‡é©¬è·¯ï¼Ÿ</i> <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/rooster.jpg \ --output rooster_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/5dd/e92/ef0/5dde92ef04cb35436e87b0b70cc5926d.gif"><br>  <i><font color="gray">å›¾</font></i> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.å³ä½¿å¯¹æ¯”åº¦ä½ä¹Ÿå¯ä»¥è¯†åˆ«å‡ºè„¸éƒ¨ï¼ŒOpenCVä¼šæ­£ç¡®å¤„ç†ç…§ç‰‡å¹¶</font></font></font></i> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ”¾ä¸‹</font></font></i> <font style="vertical-align: inherit;"><i><font color="gray"><font style="vertical-align: inherit;">å¢¨é•œ</font></font></i><i><font style="vertical-align: inherit;">ç­”æ¡ˆï¼šæˆ‘ä¸ä¼šè¯´ç­”æ¡ˆ-å¯¹æ­¤è¡¨ç¤ºèµåŒã€‚</font></i></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åï¼Œæˆ‘ä»¬ä»¥è‰¯å¥½çš„æ¨¡å› æ€»ç»“äº†æœ¬æŒ‡å—ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤§çº¦å…­å¹´å‰ï¼Œæˆ‘å’Œçˆ¶äº²æ”¶å…»äº†ä¸€åªå°çŒçŠ¬å‰ç›ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°Gemmaåœ¨æˆ‘çš„è‚©è†€ä¸Šï¼š</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/pupper.jpg \ --output pupper_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/08a/b5a/728/08ab5a728e8bd48ac2550a2962e76165.gif"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›¾ </font><font style="vertical-align: inherit;">13. Gemmaå¾ˆå¥½åƒã€‚</font><font style="vertical-align: inherit;">ä½ ä¸è¿™æ ·è®¤ä¸ºå— </font><font style="vertical-align: inherit;">ç„¶åâ€œé¡ºå…¶è‡ªç„¶ï¼â€ </font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸åŒæ„å¥¹æ˜¯å¯çˆ±çš„å—ï¼Ÿ</font><font style="vertical-align: inherit;">å¤„ç†å®ƒã€‚</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æœ‰AttributeErroré”™è¯¯å—ï¼Ÿ </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ç”¨æ‹…å¿ƒï¼</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœçœ‹åˆ°æ­¤é”™è¯¯ï¼š</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif ... Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"create_gif.py"</span></span>, line 142, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS[<span class="hljs-string"><span class="hljs-string">"left_eye"</span></span>] AttributeError: module <span class="hljs-string"><span class="hljs-string">'imutils.face_utils'</span></span> has no attribute <span class="hljs-string"><span class="hljs-string">'FACIAL_LANDMARKS_IDXS'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ...é‚£ä¹ˆæ‚¨åªéœ€è¦æ›´æ–°imutilsè½¯ä»¶åŒ…ï¼š </font></font><br><br><pre> <code class="bash hljs">$ pip install --upgrade imutils Collecting imutils ... Successfully installed imutils-0.5.1</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ€ä¹ˆäº† </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒ</font></font><code>imutils.face_utils</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨å†…ç½®äºdlibä¸­çš„68ç‚¹åœ°æ ‡æ£€æµ‹å™¨ï¼ˆå¦‚æœ¬æ–‡æ‰€è¿°ï¼‰ã€‚</font><font style="vertical-align: inherit;">æœ‰</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ªæ›´å¿«çš„5ç‚¹æ£€æµ‹å™¨</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œç°åœ¨ä¹Ÿå¯ä»¥ä¸imutilsä¸€èµ·ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">æˆ‘æœ€è¿‘æ›´æ–°äº†imutilsä»¥æ”¯æŒä¸¤ä¸ªæ£€æµ‹å™¨ï¼ˆå› æ­¤æ‚¨å¯èƒ½ä¼šçœ‹åˆ°é”™è¯¯ï¼‰ã€‚</font></font><br><br><h1> æ€»ç»“ </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨ä»Šå¤©çš„æ•™ç¨‹ä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨OpenCVåˆ›å»ºGIFã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºäº†ä½¿è¯¾ç¨‹æœ‰è¶£ï¼Œæˆ‘ä»¬ä½¿ç”¨OpenCVç”Ÿæˆäº†GIFåŠ¨ç”»â€œ Deal With Itâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªæµè¡Œçš„æ¨¡å› ï¼ˆä¹Ÿæ˜¯æˆ‘çš„æœ€çˆ±ï¼‰ï¼Œåœ¨å‡ ä¹æ¯ä¸ªç¤¾äº¤ç½‘ç«™ä¸Šéƒ½ä»¥ä¸€ç§æˆ–å¦ä¸€ç§å½¢å¼å‡ºç°ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ è§£å†³äº†ä¸€äº›å®é™…é—®é¢˜ï¼š</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> èº«ä»½è¯†åˆ« </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é¢„æµ‹è„¸ä¸Šçš„åœ°æ ‡ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¯†åˆ«é¢éƒ¨åŒºåŸŸï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºçœ¼ç›ï¼‰ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è®¡ç®—çœ¼ç›ä¹‹é—´çš„è§’åº¦ä»¥å¯¹é½è„¸éƒ¨ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä½¿ç”¨Alphaæ··åˆåˆ›å»ºé€æ˜æ··åˆ </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€åï¼Œæˆ‘ä»¬æ‹æ‘„äº†ä¸€ç»„ç”Ÿæˆçš„å›¾åƒï¼Œå¹¶ä½¿ç”¨OpenCVå’ŒImageMagickåˆ›å»ºäº†åŠ¨ç”»GIFã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸Œæœ›æ‚¨å–œæ¬¢ä»Šå¤©çš„æ•™ç¨‹ï¼</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæ‚¨å–œæ¬¢å®ƒï¼Œè¯·å‘è¡¨è¯„è®ºï¼Œè®©æˆ‘çŸ¥é“ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¥½å§ï¼Œå¦‚æœæ‚¨ä¸å–œæ¬¢å®ƒï¼Œæ²¡å…³ç³»ï¼Œå°±å¿å—å®ƒã€‚</font></font> ;ï¼‰ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN429024/">https://habr.com/ru/post/zh-CN429024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN429014/index.html">Gitå­æ ‘è¯¦ç»†</a></li>
<li><a href="../zh-CN429016/index.html">æ²ƒå°”æ²ƒå’Œç™¾åº¦å°†å…±åŒå¼€å‘æ— äººé©¾é©¶æ±½è½¦</a></li>
<li><a href="../zh-CN429018/index.html">ä¸ºä»€ä¹ˆæ–°çš„Gmailè®¾è®¡è¿™ä¹ˆæ…¢ï¼Ÿ</a></li>
<li><a href="../zh-CN429020/index.html">ä»€ä¹ˆæ˜¯æµåˆ©çš„äºŒä¼ æ‰‹</a></li>
<li><a href="../zh-CN429022/index.html">GridGain on Highloadï¼šåœ¨å“ªé‡Œå¯ä»¥è®¨è®ºåˆ†å¸ƒå¼DBMSï¼Œå†…å­˜ä¸­å’Œå¼€æº</a></li>
<li><a href="../zh-CN429028/index.html">ç§‘ç½—å»–å¤«ã€‚ ç½‘ç»œåŒ»å­¦</a></li>
<li><a href="../zh-CN429030/index.html">Logomachineä¸ºæ¯ä¸ªè¯„è®ºæä¾›å…è´¹å¾½æ ‡</a></li>
<li><a href="../zh-CN429032/index.html">Splunk Essentials for Financial Services Industry Appï¼Œæˆ–Splunkå¦‚ä½•è¿›å…¥é‡‘èåˆ†æå¸‚åœº</a></li>
<li><a href="../zh-CN429034/index.html">å…³äºåœ°ä¸‹ç¨‹åºå‘˜çš„ä¸€äº›æ•…äº‹</a></li>
<li><a href="../zh-CN429036/index.html">ç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“æˆ‘åœ¨åšä»€ä¹ˆï¼šæ¨¡å—åŒ–æœºå™¨äººå¯¹ä»»åŠ¡æ‰§è¡Œç¯å¢ƒçš„è‡ªé€‚åº”</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>