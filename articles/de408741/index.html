<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äç‚öïÔ∏è üòê üèí Qualcomm Centriq 2400 Prozessor Pionier. Intel Killer? üë©üèº‚Äçü§ù‚Äçüë©üèª üòã ‚èπÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anfang November 2017 hat Qualcomm Datacenter Technologies (QDT) die Arbeiten an seiner neuen Idee - einem Prozessor auf Basis der 10-nm-Technologie - ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qualcomm Centriq 2400 Prozessor Pionier. Intel Killer?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/408741/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/g7/5n/3n/g75n3ntbmfmydlytlwfk8w_ddya.jpeg"></div><br>  Anfang November 2017 hat Qualcomm Datacenter Technologies (QDT) die Arbeiten an seiner neuen Idee - einem Prozessor auf Basis der 10-nm-Technologie - Centriq 2400 abgeschlossen. Welche Zukunft erwartet die Branche nach Ansicht der Entwickler dieser Innovation?  Was sind die Vorteile von Servern und warum ist der Centriq 2400 so einzigartig?  Lesen Sie mehr dar√ºber und mehr. <a name="habracut"></a><br><br>  Am 8. November fand in San Jose (Kalifornien) eine Pressekonferenz von QDT statt, bei der der Beginn der Auslieferung des neuen Prozessors offiziell angek√ºndigt wurde.  Anand Chandrasekher, Senior Vice President und Chief Executive Officer, sagte: <br><br><blockquote>  Die heutige Pr√§sentation ist eine wichtige Errungenschaft und der H√∂hepunkt von mehr als 4 Jahren sorgf√§ltigen Entwurfs, der Entwicklung und des Supports des Systems ... Wir haben den fortschrittlichsten Serverprozessor der Welt entwickelt, der hohe Leistung bei gleichzeitig hoher Energieeffizienz bietet und es unseren Kunden erm√∂glicht, ihre Kosten erheblich zu senken. </blockquote><br><br>  Neben dem offensichtlichen Stolz auf ihr Produkt scheuen sich Unternehmensvertreter nicht, zu erkl√§ren, dass ihr Centriq 2400-Prozessor Konkurrenzprodukten wie Intel Xeon Platinum 8180 deutlich √ºberlegen ist. Nach ihren Berechnungen erh√§lt der Benutzer f√ºr jeden ausgegebenen Dollar (und die Kosten des Prozessors 1995 US-Dollar) Leistung 4 mal.  Und bei einer Neuberechnung der Leistung um 1 Watt - um 45% mehr.  Mutige Aussagen, die viele Vertreter verschiedener Unternehmen, die an dem neuen Produkt interessiert sind, sind jedoch mehr als erfreut, sie zu h√∂ren. <br><br><h2>  Technische Daten des Qualcomm Centriq 2400 </h2><br>  <b>CPU-Architektur:</b> <br><br><ul><li>  bis zu 48 64-Bit-Kerne mit einer Spitzenfrequenz von 2,6 GHz; </li><li>  Armv8-Kompatibilit√§t </li><li>  Nur AArch64; </li><li>  Armv8 FP / SIMD; </li><li>  Erweiterung von CRC und Armv8 Crypto; </li></ul><br>  <b>CPU-Cache:</b> <br><br><ul><li>  64 Kb Cache mit Anweisungen (Anweisungen) L1 und 24 Kb Einzelzyklus-Cache L0; </li><li>  32 Kb L1-Datencache; </li><li>  512 KB des gesamten L2-Cache pro 2 Kerne; </li><li>  60 MB gemeinsam genutzter L3-Cache; </li><li>  Filtern von Interprozessoranforderungen L2; </li><li>  QoS; </li></ul><br>  <i>wobei L (L1, L2, L3, L0) der Pegel ist, d.h.</i>  <i>L0 ist der Nullpegel.</i> <br><br>  <b>Technologie:</b> <br><br><ul><li>  Samsungs 10-nm-FinFET-Technologie; </li></ul><br>  <b>Speicherbandbreite:</b> <br><br><ul><li>  6 Kan√§le zum Anschluss von DDR4-Speichermodulen; </li><li>  bis zu 2667 MT / s pro Verbindung; </li><li>  128 GB / s - maximale Gesamtbandbreite; </li><li>  Integrierte Bandbreitenkomprimierung </li></ul><br>  <b>Speicherkapazit√§t:</b> <br><br><ul><li>  768 GB = 128 GB x 6 Verbindungen; </li></ul><br>  <b>Speichertyp:</b> <br><br><ul><li>  64-Bit-DDR4-Verbindungen mit 8-Bit-ECC; </li><li>  RDIMM und LRDIMM; </li></ul><br>  <b>Unterst√ºtzte Schnittstelle:</b> <br><br><ul><li>  GPIO </li><li>  I¬≤C; </li><li>  SPI </li><li>  8-Band-SATA-Gen 3; </li><li>  32 PCIe Gen3 mit der M√∂glichkeit, bis zu 6 PCIe-Controller anzuschlie√üen; </li></ul><br>  Zus√§tzlich zu den obigen Eigenschaften ist anzumerken, dass dieser Prozessor 18 Milliarden Transistoren auf jedem Chip hat.  Und alle seine Kerne sind durch einen bidirektionalen Ringbus verbunden.  Bei maximaler Belastung verbraucht der Centriq 2400 nur 120 Watt. <br><br>  Das Hauptaugenmerk des neuen Prozessors liegt nach wie vor auf Cloud-L√∂sungen.  Laut Unternehmensvertretern k√∂nnen Sie mit Centriq 2400 Serversysteme erstellen, die sich durch hohe Leistung, Effizienz und Skalierbarkeit auszeichnen. <br><br>  Dies konnte nicht umhin, viele Unternehmen anzulocken, deren Cloud-Technologien fast die Grundlage ihrer Aktivit√§ten bilden.  An der Pr√§sentation nahmen teil: Alibaba, LinkedIn, Cloudflare, American Megatrends Inc., Arm, Cadence Design Systems, Canonical, Chelsio Communications, Excelero, Hewlett Packard Enterprise, Illumina, MariaDB, Mellanox, Microsoft Azure, MongoDB, Netronome, Packet, Red Hat, ScyllaDB, 6WIND, Samsung, Solarflare, Smartcore, SUSE, Synopsys, Uber, Xilinx.  Die Liste ist ziemlich beeindruckend, was auf eine erh√∂hte Aufmerksamkeit f√ºr dieses Produkt hinweist. <br><br>  Derzeit gewinnt der Qualcomm Centriq 2400-Prozessor nur an Dynamik, sowohl in der Verbreitung als auch in der Popularit√§t.  Was nat√ºrlich dazu f√ºhren wird, dass bei den Konkurrenten von QDT etwas Neues, √Ñhnliches oder sogar Produktiveres auftaucht. <br><br>  Aber nicht jeder glaubt blind an die Coolness neuer Gegenst√§nde.  Wenn diejenigen, die glauben, dass die Durchf√ºhrung von Tests und vergleichenden Analysen mehrerer Prozessoren viel aussagekr√§ftigere Ergebnisse liefert als die Worte der Centriq 2400-Promotoren. <br><br>  Cloudflare f√ºhrte eine vergleichende Analyse von drei Plattformen durch: Grantley (Intel), Purley (Intel) und Centriq (Qualcomm). <br><br>  Nachfolgend werden Grafiken dieser Analyse und die Schlussfolgerungen ihres Autors - <b>Vlad Krasnov - vorgestellt</b> .  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Original dieser Analyse auf Cloudflares Blog</a> ) <br><br><h2>  Kryptographie mit √∂ffentlichen Schl√ºsseln </h2><br><img src="https://habrastorage.org/webt/_q/42/2j/_q422juc1e9u-oqrqbeoxvsarba.png"><br><br><img src="https://habrastorage.org/webt/bf/up/_y/bfup_ysr_-7byinpj4h03-4ut2q.png"><br><br>  Die Kryptographie mit √∂ffentlichen Schl√ºsseln ist die reinste Leistung von ALU (arithmetisches Logikger√§t).  Es ist interessant, aber nicht √ºberraschend, dass in einem grundlegenden Benchmark der Broadwell-Kern schneller als Skylake ist und beide schneller als Falkor.  Dies liegt daran, dass Broadwell mit einer h√∂heren Frequenz arbeitet, obwohl es in Bezug auf die Architektur Skylake nicht viel unterlegen ist. <br><br>  Falkor ist den anderen in diesem Test unterlegen.  Erstens wurde der Turbomodus in einem der grundlegenden Benchmarks aktiviert, was bedeutet, dass Intel-Prozessoren mit einer h√∂heren Frequenz arbeiten.  Dar√ºber hinaus hat Intel bei Broadwell zwei spezielle Anweisungen eingef√ºhrt, um die Verarbeitung gro√üer Zahlen zu beschleunigen: ADCX und ADOX.  Sie f√ºhren zwei unabh√§ngige Add-with-Carry-Operationen pro Zyklus aus, w√§hrend ARM nur eine ausf√ºhren kann.  In √§hnlicher Weise verf√ºgt der ARMv8-Befehlssatz nicht √ºber einen einzigen Befehl zum Durchf√ºhren einer 64-Bit-Multiplikation, sondern es wird ein Paar von MUL- und UMULH-Befehlen verwendet. <br><br>  Auf SoC-Ebene gewinnt Falkor jedoch.  Es ist in Bezug auf RSA2048 etwas langsamer als Skylake und nur, weil RSA2048 keine f√ºr ARM optimierte Implementierung hat.  Die Leistung von ECDSA ist l√§cherlich hoch.  Ein einziger Centriq-Chip kann mit ECDSA die Anforderungen fast aller Unternehmen auf der Welt erf√ºllen. <br><br>  Es ist auch sehr interessant zu sehen, dass Skylake Broadwell um 30% √ºbertrifft, obwohl es im Test einen Kern verloren hat und nur 20% mehr Kerne als Broadwell hat.  Dies kann durch einen effizienteren Turbomodus und ein verbessertes Hyper-Threading erkl√§rt werden. <br><br><h2>  Symmetrische Kryptographie </h2><br><img src="https://habrastorage.org/webt/pe/mn/ib/pemnibyrsgxfmkwl1luagfrvxbi.png"><br><br><img src="https://habrastorage.org/webt/ri/1u/1p/ri1u1pturbightaxqt2bmqu90o0.png"><br><br>  Die Leistung von Intel-Kernen in der symmetrischen Kryptographie ist einfach hervorragend. <br><br>  AES-GCM verwendet eine Kombination spezieller Hardwareanweisungen, um AES und CLMUL zu beschleunigen.  Intel hat diese Anweisungen bereits 2010 mit seinem Westmere-Prozessor eingef√ºhrt und mit jeder Generation ihre Leistung verbessert.  ARM hat k√ºrzlich eine Reihe √§hnlicher Befehle mit ihrem 64-Bit-Befehlssatz als optionale Erg√§nzung eingef√ºhrt.  Gl√ºcklicherweise hat jeder mir bekannte Ausr√ºstungslieferant sie implementiert.  Es ist sehr wahrscheinlich, dass Qualcomm die Leistung kryptografischer Anweisungen in zuk√ºnftigen Generationen verbessern wird. <br><br>  ChaCha20-Poly1305 ist ein allgemeinerer Algorithmus, der so konzipiert ist, dass breite SIMD-Module besser genutzt werden k√∂nnen.  Qualcomm verf√ºgt nur √ºber 128-Bit-NEON-SIMD, Broadwell √ºber 256-Bit-AVX2 und Skylake √ºber 512-Bit-AVX-512.  Dies erkl√§rt, warum Skylake mit einem solchen Vorsprung bei der Bewertung der Arbeit mit einem einzigen Kern an der Spitze blieb.  Beim Test aller Kerne wurde gleichzeitig der Abstand von Skylake zum Rest verringert, da die Taktfrequenz bei der Ausf√ºhrung von AVX-512-Workloads verringert werden sollte.  Wenn der AVX-512 auf allen Kernen ausgef√ºhrt wird, verringert sich die Grundfrequenz auf 1,4 GHz.  Denken Sie daran, wenn Sie AVX-512 und anderen Code mischen. <br><br>  Die Schlussfolgerung bez√ºglich der symmetrischen Kryptographie lautet, dass Broadwell und Falkor, obwohl Skylake f√ºhrend ist, sehr gute Ergebnisse zeigten und in realen F√§llen eine recht hohe Leistung zeigten, da RSA auf unserer Seite mehr Prozessorzeit verbraucht als alle anderen kryptografischen Algorithmen zusammen . <br><br><h2>  Komprimierung (Komprimierung) </h2><br>  Der n√§chste Test, den ich machen wollte, war die Komprimierung.  Aus zwei Gr√ºnden.  Erstens ist dies eine wichtige Arbeitslast, denn je besser die Komprimierung ist, desto weniger L√ºcken in der F√§higkeit und dies erm√∂glicht eine schnellere Bereitstellung von Inhalten an den Client.  Zweitens ist dies eine sehr anspruchsvolle Arbeitsbelastung bei der Vorhersage von Hochfrequenzzweigen. <br><br>  Offensichtlich wird der erste Test die beliebte zlib-Bibliothek sein.  Bei Cloudflare verwenden wir eine verbesserte Version der Bibliothek, die f√ºr Intel 64-Bit-Prozessoren optimiert ist. Obwohl sie haupts√§chlich in C geschrieben ist, werden einige Intel-spezifische integrierte Funktionen verwendet.  Es w√§re unfair, diese optimierte Version mit der urspr√ºnglichen zlib zu vergleichen.  Aber keine Sorge, mit ein wenig Aufwand habe ich die Bibliothek so angepasst, dass sie mit den Eigenschaften NEON und CRC32 auf der ARMv8-Architektur funktioniert.  Dar√ºber hinaus ist die Geschwindigkeit bei einigen Dateien doppelt so hoch wie beim Original. <br><br>  Der zweite Test ist die neue brotli-Bibliothek, die in C geschrieben ist und die Verwendung gleicher Bedingungen f√ºr alle Plattformen erm√∂glicht. <br><br>  Alle Tests wurden auf HTML blog.cloudflare.com im Speicher durchgef√ºhrt, √§hnlich wie NGINX die Streaming-Komprimierung durchf√ºhrt.  Es sei denn, die spezifische Version der HTML-Datei ist 29329 Byte, was ein guter Indikator ist, da sie der Gr√∂√üe der meisten von uns komprimierten Dateien entspricht.  Der parallele Komprimierungstest ist die parallele Komprimierung mehrerer Dateien gleichzeitig. Die einzelne Komprimierung ist die Komprimierung einer Datei in mehrere Streams, √§hnlich wie NGINX. <br><br>  <b>gzip</b> <br><br><img src="https://habrastorage.org/webt/jz/ns/mo/jznsmosepbzqy5mykgygmspskhc.png"><br><br><img src="https://habrastorage.org/webt/mq/cw/rm/mqcwrmjprwyfhogfakh9rez8yas.png"><br><br>  Mit gzip auf der Single-Core-Ebene gewinnt Skylake zweifellos.  Mit einer niedrigeren Frequenz als Broadwell profitiert Skylake von einer geringeren Exposition gegen√ºber Fehlvorhersagen f√ºr Zweige.  Der Falkor-Kern ist nicht weit dahinter.  Auf Systemebene bietet Falkor mit mehr Kernen eine viel bessere Leistung.  Beachten Sie, wie sich gzip √ºber mehrere Kerne hinweg gut skalieren l√§sst. <br><br>  <b>Brotli</b> <br><br>  Mit brotli auf einem Kern ist die Situation √§hnlich wie auf dem vorherigen.  Skylake ist der schnellste, aber Falkor ist nicht weit dahinter.  Und auf Standard 9 ist Falkor noch schneller.  Standard 4 Brotli ist gzip Level 5 sehr √§hnlich, w√§hrend die tats√§chliche Komprimierung immer noch besser ist (8010B gegen√ºber 8187B). <br><br>  Beim Komprimieren auf mehreren Kernen wird die Situation etwas verwirrend.  F√ºr die Stufen 4, 5 und 6 skaliert brotli sehr gut.  Auf Stufe 7 und 8 beginnt es produktiv auf den Kern zu fallen und sinkt auf Stufe 9 auf den Boden, wo wir dreimal weniger Produktivit√§t aller Kerne erhalten als auf einen. <br><br>  Meiner Meinung nach liegt dies daran, dass brotli mit jedem Level mehr Speicher verbraucht und den Cache zum Absturz bringt.  Die Indikatoren beginnen sich bereits auf den Ebenen 10 und 11 zu erholen. <br><br><img src="https://habrastorage.org/webt/fj/8b/h_/fj8bh_k2ztukrrvk5mrnsewzh1m.png"><br><br><img src="https://habrastorage.org/webt/gc/re/b9/gcreb99cb-d-ve1ofgmz5rkgity.png"><br><br>  Als Fazit gewann Falkor, da die dynamische Komprimierung nicht √ºber Level 7 hinausgeht. <br><br><h2>  Golang </h2><br>  Golang ist eine weitere sehr wichtige Sprache f√ºr Cloudflare.  Es ist auch eine der ersten Sprachen, die ARMv8 unterst√ºtzt, sodass Sie eine gute Leistung erwarten k√∂nnen.  Ich habe einige eingebaute Tests verwendet, diese jedoch f√ºr mehrere Goroutinen ge√§ndert. <br><br>  <b>Gehen Sie Krypto</b> <br><br>  Ich m√∂chte mit Tests der Verschl√ºsselungsleistung beginnen.  Dank OpenSSL verf√ºgen wir √ºber hervorragende Quelldaten, und es wird sehr interessant sein zu sehen, wie gut die Go-Bibliothek ist. <br><br><img src="https://habrastorage.org/webt/xy/fj/pf/xyfjpfgcv19xdvypw4tu35ejyrm.png"><br><img src="https://habrastorage.org/webt/9v/xg/tr/9vxgtrubcqgpmuemhspyvlzzr9w.png"><br><img src="https://habrastorage.org/webt/tv/gk/11/tvgk11dl9zsya8m1bvz6cmzwwqk.png"><br><img src="https://habrastorage.org/webt/cn/ws/ue/cnwsuep6om3uhmwimyyxx1oj0yk.png"><br><br>  In Bezug auf Go-Krypto geh√∂ren ARM und Intel nicht einmal zur gleichen Gewichtsklasse.  Go verf√ºgt √ºber einen hochoptimierten Assembler-Code f√ºr ECDSA, AES-GCM und Chacha20-Poly1305 unter Intel.  Es gibt auch optimierte mathematische Funktionen, die in RSA-Berechnungen verwendet werden.  ARMv8 verf√ºgt nicht √ºber all dies, was es in eine sehr nachteilige Position bringt. <br><br>  Trotzdem kann die L√ºcke mit relativ geringem Aufwand verringert werden, und wir wissen, dass bei richtiger Optimierung die Leistung mit OpenSSL gleichwertig sein kann.  Selbst geringf√ºgige √Ñnderungen, wie die Implementierung der Funktion addMulVVW in der Assembly, f√ºhren zu einer Verzehnfachung der RSA-Leistung, wodurch Falkor (mit einer Punktzahl von 8009) sowohl √ºber Broadwell als auch √ºber Skylake liegt. <br><br>  Eine weitere interessante Sache ist erw√§hnenswert: Bei Skylake funktioniert der Go Chacha20-Poly1305-Code, der AVX2 verwendet, √§hnlich wie der OpenSSL AVX512-Code.  Dies liegt wiederum an der Tatsache, dass der AVX2 bei h√∂heren Taktfrequenzen arbeitet. <br><br>  <b>Gehen Sie gzip</b> <br><br>  Schauen wir uns nun die Go-Leistung von gzip an.  Es gibt auch eine gro√üartige Anleitung f√ºr ziemlich gut optimierten Code, und wir k√∂nnen ihn mit Go vergleichen.  Bei der gzip-Bibliothek gibt es keine spezifischen Optimierungen f√ºr Intel. <br><br><img src="https://habrastorage.org/webt/q5/r4/zi/q5r4zife3uy5oyx7xibltas7z0i.png"><br><br><img src="https://habrastorage.org/webt/np/lh/zw/nplhzwlsbteyuqd5rys9n_atkea.png"><br><br>  Die Gzip-Leistung ist ziemlich gut.  Die Leistung auf einem Single-Core-Falkor liegt deutlich hinter beiden Intel-Prozessoren zur√ºck, aber auf Systemebene gelang es ihm, Broadwell zu schlagen und sich unter Skylake zu befinden.  Da wir bereits wissen, dass Falkor den beiden anderen Prozessoren √ºberlegen ist, wenn C ausgef√ºhrt wird. Dies kann nur eines bedeuten: Das Go-Backend f√ºr ARMv8 ist im Vergleich zu gcc noch nicht abgeschlossen. <br><br>  <b>Gehen Sie regexp</b> <br><br>  Regexp wird h√§ufig f√ºr eine Vielzahl von Aufgaben eingesetzt, da seine Leistung ebenfalls √§u√üerst wichtig ist.  Ich habe integrierte Tests f√ºr 32-KB-Streams durchgef√ºhrt. <br><br><img src="https://habrastorage.org/webt/eb/lh/hw/eblhhwqsqlkorgzoskrl1ftjqew.png"><br><br><img src="https://habrastorage.org/webt/ck/so/w-/cksow-2fqsy9q71ayf82_girtme.png"><br><br><img src="https://habrastorage.org/webt/iu/gh/ma/iughmavke4vuhnid0wggsclwgc8.png"><br><br><img src="https://habrastorage.org/webt/hl/zu/39/hlzu39oybk_wktuewhnpnfxm7ia.png"><br><br>  Auf Falkor ist die Leistung von Go regexp nicht sehr gut.  Dank einer gr√∂√üeren Anzahl von Kernen belegt er bei mittleren und komplexen Tests den zweiten Platz, aber Skylake ist dennoch viel schneller. <br><br>  Ein genauerer Blick auf den Prozess zeigt, dass viel Zeit f√ºr die Funktion bytes.IndexByte aufgewendet wird.  Diese Funktion verf√ºgt √ºber eine Assembler-Implementierung f√ºr amd64 (runtime.indexbytebody), die Hauptimplementierung ist jedoch f√ºr Go.  Bei leichten Tests hat regexp noch mehr Zeit mit dieser Funktion verbracht, was die gr√∂√üere L√ºcke erkl√§rt. <br><br>  <b>Gehen Sie Saiten</b> <br><br>  Eine weitere wichtige Bibliothek f√ºr den Webserver sind Go-Strings.  Ich habe nur die Haupt-Replacer-Klasse getestet. <br><br><img src="https://habrastorage.org/webt/36/tv/ho/36tvhoaz63ev1njmhzck3zw00iu.png"><br><br><img src="https://habrastorage.org/webt/ii/e9/pv/iie9pvryauw1fjclroxrwt4mnn0.png"><br><br>  In diesem Test bleibt Falkor sogar hinter Broadwell zur√ºck.  Ein genauerer Blick zeigt einen langen Aufenthalt in der Funktion runtime.memmove.  Wei√üt du was?  Sie hat einen perfekt optimierten Assembler-Code f√ºr amd64, der AVX2 verwendet, aber nur den einfachsten Assembler, der jeweils 8 Bytes kopiert.  Durch √Ñndern von 3 Zeilen in diesem Code und Verwenden der LDP / STP-Anweisungen (Laden von Paaren / Speichern von Paaren) k√∂nnen Sie jeweils 16 Byte kopieren, wodurch die Memmove-Leistung um 30% erh√∂ht wird, was wiederum EscapeString und UnescapeString um 20% beschleunigt.  Und das ist nur die Spitze des Eisbergs. <br><br>  <b>Gehen Sie zum Schluss</b> <br><br>  Die Unterst√ºtzung von aarch64 ist ziemlich entt√§uschend.  Ich freue mich, Ihnen mitteilen zu k√∂nnen, dass alles einwandfrei kompiliert und funktioniert hat, aber auf der Leistungsseite k√∂nnte es besser sein.  Man hat den Eindruck, dass der gr√∂√üte Teil des Aufwands f√ºr das Compiler-Backend aufgewendet wurde und die Bibliothek fast unber√ºhrt blieb.  Es gibt viele Optimierungen auf niedriger Ebene, zum Beispiel meinen Fix addMulVVW, der 20 Minuten dauerte.  Qualcomm und andere ARMv8-Anbieter beabsichtigen, erhebliche technische Ressourcen zur Behebung der Situation aufzuwenden, aber jeder kann tats√§chlich zu Go beitragen.  Wenn Sie also Ihre Spuren in der Geschichte hinterlassen m√∂chten, ist jetzt die richtige Zeit daf√ºr. <br><br><h2>  Luajit </h2><br>  Lua ist der Klebstoff, der Cloudflare zusammenh√§lt. <br><br><img src="https://habrastorage.org/webt/zk/pv/7t/zkpv7t0xtx50qqqyyqnhanp0ydm.png"><br><br><img src="https://habrastorage.org/webt/we/4n/mv/we4nmvud-5vh6l7wds4cnak1fmq.png"><br><br>  Mit Ausnahme des binary_trees-Tests ist die LuaJIT-Leistung auf ARM sehr wettbewerbsf√§hig.  Er gewinnt zwei Tests und der dritte geht Nase an Nase mit den Konkurrenten. <br><br>  Es ist erw√§hnenswert, dass der Test binary_trees √§u√üerst wichtig ist, da er viele Zyklen der Speicherzuweisung und Speicherbereinigung umfasst.  Dies erfordert in Zukunft eine genauere Pr√ºfung. <br><br><h2>  Nginx </h2><br>  Als NGINX-Workload habe ich beschlossen, eine zu erstellen, die dem tats√§chlichen Server √§hnelt. <br><br>  Ich habe einen Server konfiguriert, der die im gzip-Test verwendete HTML-Datei √ºber https mit der Verschl√ºsselungssuite ECDHE-ECDSA-AES128-GCM-SHA256 bereitstellt. <br><br>  Au√üerdem wird LuaJIT verwendet, um die eingehende Anforderung umzuleiten, alle Zeilenumbr√ºche und zus√§tzlichen Leerzeichen aus der HTML-Datei zu entfernen, wenn ein Zeitstempel hinzugef√ºgt wird.  HTML wird dann mit brotli 5 komprimiert. <br><br>  Jeder Server wurde so konfiguriert, dass er mit so vielen Benutzern wie virtuellen Prozessoren funktioniert.  40 f√ºr Broadwell, 48 f√ºr Skylake und 46 f√ºr Falkor. <br><br>  Als Client f√ºr diesen Test habe ich das Programm hey verwendet, das auf 3 Broadwell-Servern ausgef√ºhrt wird. <br><br>  Gleichzeitig mit dem Test haben wir die Stromwerte von den entsprechenden BMC-Bl√∂cken jedes Servers abgelesen. <br><br><img src="https://habrastorage.org/webt/ch/9p/mv/ch9pmvqb1ro5yjn-cve_pw70dio.png"><br><br>  Mit der Arbeitslast behandelte NGINX Falkor fast die gleiche Anzahl von Anfragen wie der Skylake-Server, und beide waren Broadwell deutlich voraus.  Die aus dem BMC entnommenen Leistungswerte zeigen, dass dies geschah, wenn der Stromverbrauch halb so hoch war wie bei anderen Prozessoren.  Dies bedeutet, dass Falkor 214 Anfragen / W, Skylake - 99 Anfragen / W und Broadwell - 77 Anfragen / W erhalten hat. <br><br>  Ich war √ºberrascht, dass Skylake und Broadwell ungef√§hr die gleiche Menge an Energie verbrauchen, da sie auf die gleiche Weise hergestellt werden und Skylake mehr Kerne hat. <br><br>  Der geringe Stromverbrauch von Falkor ist nicht √ºberraschend, da Qualcomm-Prozessoren f√ºr ihre hohe Energieeffizienz bekannt sind, die es ihnen erm√∂glichte, eine beherrschende Stellung auf dem Markt f√ºr Prozessoren f√ºr mobile Ger√§te einzunehmen. <br><br><h2>  Fazit </h2><br>  Das Falkor-Beispiel, das wir bekommen haben, hat mich wirklich beeindruckt.  Dies ist eine enorme Verbesserung gegen√ºber fr√ºheren Versuchen mit ARM-basierten Servern.  Wenn man den Kern mit dem Kern vergleicht, ist Intel Skylake nat√ºrlich viel besser, aber wenn wir uns die Systemebene ansehen, wird die Leistung sehr attraktiv. <br><br>  Die Serienversion von Centriq SoC wird 48 Falkor-Kerne enthalten, die mit Frequenzen bis zu 2,6 GHz arbeiten, was eine potenzielle Leistungssteigerung von 8% ergibt. <br><br>  Nat√ºrlich ist der von uns getestete Skylake mit seinen 28 Kernen kein Flaggschiff wie Platinum, aber diese 28 Kerne kosten viel und verbrauchen 200 W, w√§hrend wir versuchen, unsere Kosten zu optimieren und die Leistung um 1 Watt zu steigern. <br><br>  Im Moment bin ich am meisten besorgt √ºber die schlechte Leistung der Go-Sprache, aber dies wird sich √§ndern, sobald ARM-basierte Server ihre Marktnische besetzen. <br><br>  Performance C und LuaJIT sind sehr wettbewerbsf√§hig und in vielen F√§llen Skylake √ºberlegen.  In fast allen Tests erwies sich Falkor als w√ºrdiger Ersatz f√ºr Broadwell. <br><br>  Das gr√∂√üte Plus f√ºr Falkor ist derzeit der geringe Stromverbrauch.  Obwohl die TDP 120 W betr√§gt, hat diese Zahl w√§hrend meiner Tests 89 W nie √ºberschritten (f√ºr Go-Tests).  Zum Vergleich: Skylake und Broadwell haben 160 W √ºberschritten, w√§hrend ihre TDP 170 W betr√§gt. <br><br>  <b>Als Werbung.</b>  Dies sind nicht nur virtuelle Server!  Dies sind VPS (KVM) mit dedizierten Laufwerken, die nicht schlechter als dedizierte Server sein k√∂nnen, und in den meisten F√§llen - besser!  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir haben VPS (KVM) mit dedizierten Laufwerken in den Niederlanden und den USA</a> (Konfigurationen von VPS (KVM) - E5-2650v4 (6 Kerne) / 10 GB DDR4 / 240 GB SSD oder 4 TB HDD / 1 Gbit / s 10 TB zu einem einzigartig niedrigen Preis - ab 29 USD / Monat verf√ºgbar gemacht (Optionen mit RAID1 und RAID10 sind verf√ºgbar)</b> , verpassen Sie nicht die Gelegenheit, eine Bestellung f√ºr einen neuen virtuellen Servertyp <b>aufzugeben</b> , bei dem alle Ressourcen Ihnen geh√∂ren, wie bei einem dedizierten Server, und der Preis mit einer viel produktiveren Hardware viel niedriger ist! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie man die Infrastruktur des Geb√§udes baut.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern f√ºr 9.000 Euro f√ºr einen Cent?</a>  <b>Dell R730xd 2 mal g√ºnstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de408741/">https://habr.com/ru/post/de408741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de408731/index.html">Milit√§rroboter und ihre Entwickler. Teil 2</a></li>
<li><a href="../de408733/index.html">Ein Skelett ist gut und zwei sind besser: moderne Exoskelette</a></li>
<li><a href="../de408735/index.html">Der 800-Dollar-Humanoidroboter hatte nicht die Gr√∂√üe eines Menschen. Entschuldigung ...</a></li>
<li><a href="../de408737/index.html">QardioBase 2 Smart Scales: Immer besser werden</a></li>
<li><a href="../de408739/index.html">Supraleitende Photosynthese oder wie man ein kugelf√∂rmiges Vakuumpferd</a></li>
<li><a href="../de408743/index.html">Der kleinste GPD WIN Gaming Laptop - Was kann er und wer braucht ihn?</a></li>
<li><a href="../de408745/index.html">Freisprechen, aber kein Telefon. Gehorsames Zuhause, wenn nicht gen√ºgend H√§nde vorhanden sind</a></li>
<li><a href="../de408747/index.html">Das Erscheinen des neuen Rovers, des ersten Fluges von Falcon Heavy, bezweifelt die Zuverl√§ssigkeit von Dragon und Starliner</a></li>
<li><a href="../de408749/index.html">Alles Gute zum Geburtstag, Computermaus</a></li>
<li><a href="../de408751/index.html">Amazon stellt die 3D-, VR- und AR-Entwicklungsplattform vor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>