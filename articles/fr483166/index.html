<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèº üëáüèª ü§ôüèæ D√©tection automatique de l'encodage de texte üíù üßôüèæ üÖ∞Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pr√©sentation 


 J'aime beaucoup la programmation, je suis amateur et la premi√®re et derni√®re fois que j'ai gagn√© de l'argent en 1996. Mais parfois j'...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©tection automatique de l'encodage de texte</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483166/"><img src="https://habrastorage.org/webt/qf/ve/vy/qfvevyr3zqvd2fwh89fkdc0btxg.jpeg" alt="image"><br><h2 id="vvedenie">  Pr√©sentation </h2><br><p>  J'aime beaucoup la programmation, je suis amateur et la premi√®re et derni√®re fois que j'ai gagn√© de l'argent en 1996.  Mais parfois j'√©cris quelque chose pour automatiser les t√¢ches quotidiennes.  Il y a environ un an, le golang a √©t√© d√©couvert.  En tant qu'outil de cr√©ation d'utilitaires, le golang s'est av√©r√© tr√®s pratique.  Alors. </p><br><p>  Il y avait un besoin de traiter un grand nombre (plus d'un millier, et je vois les sourires d'un pro) de fichiers d'archives avec des informations g√©ophysiques sp√©ciales.  Le format de fichier est texte, simple.  Si vous √™tes soudainement int√©ress√©, il s'agit d'un <a href="http://www.cwls.org/las/" rel="nofollow">format LAS</a> . <br>  Le fichier LAS contient un en-t√™te et des donn√©es. </p><br><p> Les donn√©es sont pratiquement CSV, uniquement des d√©limiteurs de tabulation ou des espaces. </p><br><p>  Et l'en-t√™te contient une description des donn√©es et ici, il contient g√©n√©ralement du texte russe.  Il peut s'agir du nom du domaine, du nom des √©tudes enregistr√©es dans un fichier, etc. </p><br><p>  Ces fichiers ont √©t√© cr√©√©s √† diff√©rents moments et dans diff√©rents programmes, il s'agit du fait que dans un fichier une partie est cod√©e en CP1251 et une partie en CP866.  J'ai besoin de traiter ces fichiers, ce qui signifie comprendre.  Il √©tait donc n√©cessaire de d√©terminer automatiquement l'encodage du fichier. </p><br><p>  En cons√©quence, il a invent√© un v√©lo sur golang et, en cons√©quence, une petite biblioth√®que est n√©e avec la capacit√© de d√©tecter une page de codes. </p><a name="habracut"></a><br><p>  <i>√Ä propos des encodages.</i>  <i>Il n'y a pas si longtemps sur habr, il y avait un bon article sur les encodages</i> <a href="https://habr.com/ru/post/478636/">Comment fonctionnent les encodages de texte.</a>  <a href="https://habr.com/ru/post/478636/">D'o√π viennent les "crocodiles"?</a>  <a href="https://habr.com/ru/post/478636/">Les principes de codage.</a>  <a href="https://habr.com/ru/post/478636/">G√©n√©ralisation et analyse d√©taill√©e</a> <i>Si vous voulez comprendre ce qu'est un "os" ou un "os", alors cela vaut la peine d'√™tre lu.</i> </p><br><p>  Au d√©but, j'ai jet√© ma d√©cision.  Ensuite, j'ai essay√© de trouver une solution de travail pr√™te √† l'emploi sur Golang, mais j'ai √©chou√©.  Il y avait deux solutions, mais les deux ne fonctionnent pas. </p><br><ul><li>  Le premier ¬´pr√™t √† l'emploi¬ª est la fonction golang.org/x/net/html/charset DetermineEncoding () </li><li>  Deuxi√®me biblioth√®que - Saintfish / Chardet sur Github </li></ul><br><p>  Les deux se trompent s√ªrement sur certains encodages.  Le standard ne peut presque pas d√©terminer quoi que ce soit √† partir de fichiers texte, c'est compr√©hensible, cela a √©t√© fait pour les pages html. </p><br><p>  Lors de la recherche, j'ai souvent rencontr√© des utilitaires pr√™ts √† l'emploi du monde Linux - <strong>enca</strong> .  Trouv√© sa version compil√©e pour WIN32, version 1.12.  Je vais aussi y r√©fl√©chir, il y a des choses amusantes l√†-bas.  Je m'excuse tout de suite pour mon ignorance totale de linux, ce qui signifie qu'il y a probablement plus de solutions que vous pouvez √©galement essayer de visser au code golang, je n'ai plus regard√©. </p><br><h2 id="sravnenie-naydennyh-resheniy-na-avtoopredelenie-kodirovki">  Comparaison des solutions trouv√©es pour l'encodage de la d√©tection automatique </h2><br><p>  Pr√©par√© un catalogue <a href="" rel="nofollow">softlandia \ cpd test data</a> avec des fichiers dans diff√©rents encodages.  Le contenu des fichiers est tr√®s court et identique.  Une ligne ¬´Russe dans le codage CodePageName¬ª.  J'ai ajout√© des fichiers avec un m√©lange d'encodages et de cas complexes et j'ai essay√© de d√©terminer. </p><br><p>  Je pense que √ßa s'est av√©r√© dr√¥le. </p><br><div class="scrollable-table"><table><thead><tr><th>  # </th><th>  Encodage </th><th>  html / charset </th><th>  saintfish / chardet </th><th>  softlandia / cpd </th><th>  enca </th></tr></thead><tbody><tr><td>  1 </td><td>  CP1251 </td><td>  windows-1252 </td><td>  CP1251 </td><td>  CP1251 </td><td>  CP1251 </td></tr><tr><td>  2 </td><td>  CP866 </td><td>  windows-1252 </td><td>  windows-1252 </td><td>  CP866 </td><td>  CP866 </td></tr><tr><td>  3 </td><td>  KOI8-R </td><td>  windows-1252 </td><td>  KOI8-R </td><td>  KOI8-R </td><td>  KOI8-R </td></tr><tr><td>  4 </td><td>  ISO-8859-5 </td><td>  windows-1252 </td><td>  ISO-8859-5 </td><td>  ISO-8859-5 </td><td>  ISO-8859-5 </td></tr><tr><td>  5 </td><td>  UTF-8 avec BOM </td><td>  utf-8 </td><td>  utf-8 </td><td>  utf-8 </td><td>  utf-8 </td></tr><tr><td>  6 </td><td>  UTF-8 sans nomenclature </td><td>  utf-8 </td><td>  utf-8 </td><td>  utf-8 </td><td>  utf-8 </td></tr><tr><td>  7 </td><td>  UTF-16LE avec BOM </td><td>  utf-16le </td><td>  utf-16le </td><td>  utf-16le </td><td>  ISO-10646-UCS-2 </td></tr><tr><td>  8 </td><td>  UTF-16LE sans BOM </td><td>  windows-1252 </td><td>  ISO-8859-1 </td><td>  utf-16le </td><td>  <strong>inconnu</strong> </td></tr><tr><td>  9 </td><td>  UTF-16BE avec BOM </td><td>  utf-16le </td><td>  utf-16be </td><td>  utf-16be </td><td>  ISO-10646-UCS-2 </td></tr><tr><td>  10 </td><td>  UTF-16BE sans BOM </td><td>  windows-1252 </td><td>  ISO-8859-1 </td><td>  utf-16be </td><td>  ISO-10646-UCS-2 </td></tr><tr><td>  11 </td><td>  UTF-32LE avec BOM </td><td>  utf-16le </td><td>  utf-32le </td><td>  utf-32le </td><td>  ISO-10646-UCS-4 </td></tr><tr><td>  12 </td><td>  UTF-32LE sans BOM </td><td>  windows-1252 </td><td>  utf-32le </td><td>  utf-32le </td><td>  ISO-10646-UCS-4 </td></tr><tr><td>  13 </td><td>  UTF-32BE avec BOM </td><td>  windows-1252 </td><td>  utf-32be </td><td>  utf-32be </td><td>  ISO-10646-UCS-4 </td></tr><tr><td>  14 </td><td>  UTF-32BE sans nomenclature </td><td>  windows-1252 </td><td>  utf-32be </td><td>  utf-32be </td><td>  ISO-10646-UCS-4 </td></tr><tr><td>  15 </td><td>  KOI8-R (UPPER) </td><td>  windows-1252 </td><td>  KOI8-R </td><td>  KOI8-R </td><td>  <strong>CP1251</strong> </td></tr><tr><td>  16 </td><td>  CP1251 (UPPER) </td><td>  windows-1252 </td><td>  CP1251 </td><td>  CP1251 </td><td>  <strong>KOI8-R</strong> </td></tr><tr><td>  17 </td><td>  CP866 &amp; CP1251 </td><td>  windows-1252 </td><td>  CP1251 </td><td>  CP1251 </td><td>  inconnu </td></tr></tbody></table></div><br><h3 id="nablyudenie-1">  Observation 1 </h3><br><p>  <strong>enca</strong> n'a pas d√©termin√© l'encodage du fichier UTF-16LE sans la nomenclature - c'est √©trange, d'accord.  J'ai essay√© d'ajouter plus de texte, mais je n'ai pas obtenu le r√©sultat. </p><br><h3 id="nablyudenie-2-problemy-s-kodirovkami-cp1251-i-koi8-r">  Observation 2. Probl√®mes avec les codages CP1251 et KOI8-R </h3><br><p>  Lignes 15 et 16. La commande enca a des probl√®mes. <br>  Je vais ici faire une explication, le fait est que les encodages CP1251 (alias Windows 1251) et KOI8-R sont tr√®s proches si l'on consid√®re uniquement les caract√®res alphab√©tiques. </p><br><h4 id="tablica-cp-1251">  Tableau CP 1251 </h4><br><p><img src="https://habrastorage.org/webt/7g/fz/xw/7gfzxwkggre8ghkda0iwbddb2d0.png" alt="image"></p><br><h4 id="tablica-koi8-r">  Table KOI8-r </h4><br><p><img src="https://habrastorage.org/webt/_p/zy/9j/_pzy9joyqeddhtgjbqxahwg1cji.png" alt="image"></p><br><p>  Dans les deux encodages, l'alphabet est situ√© de <strong>0xC0</strong> √† <strong>0xFF</strong> , mais l√† o√π un encodage a des lettres majuscules, l'autre a des minuscules.  Apparemment, l' <strong>enca</strong> fonctionne en lettres minuscules.  Il s'av√®re donc que si vous envoyez la ligne ¬´STP¬ª encod√©e dans <em>CP1251 au</em> programme <strong>enca</strong> , alors il d√©cidera que c'est une ligne ¬´sauvagement¬ª encod√©e dans <em>KOI8-r</em> , qui sera signal√©e.  L'inverse fonctionne √©galement. </p><br><h3 id="nablyudenie-3">  Observation 3 </h3><br><p>  La biblioth√®que standard <em>html / charset</em> ne peut √™tre approuv√©e qu'avec une d√©finition <strong>UTF-8</strong> , mais attention!  Il doit √™tre utilis√© exactement <em>charset.DetermineEncoding ()</em> , car la <em>m√©thode utf8.Valid (b [] octet)</em> sur les <strong>fichiers encod√©s utf-16be</strong> renvoie <em>true</em> . </p><br><h2 id="sobstvennyy-velosiped">  Propre v√©lo </h2><br><p><img src="https://habrastorage.org/webt/r2/2k/di/r22kdit6akwh4zq5sf1mexbka3c.jpeg" alt="image"></p><br><p>  La d√©tection automatique de l'encodage n'est possible que par des m√©thodes heuristiques, inexactes.  Si nous ne savons pas dans quelle langue et dans quel encodage le fichier texte est √©crit, alors il est possible de d√©terminer l'encodage avec une grande pr√©cision, mais ce sera difficile ... et vous aurez besoin de beaucoup de texte. </p><br><p>  Pour moi, cet objectif n'√©tait pas fix√©.  Il me suffit de d√©terminer les encodages en supposant qu'il y a du russe.  Et deuxi√®mement, vous devez d√©terminer par un petit nombre de caract√®res - 10 caract√®res devraient avoir une d√©finition assez s√ªre, et de pr√©f√©rence 5-6 caract√®res en g√©n√©ral. </p><br><h3 id="algoritm">  Algorithme </h3><br><p>  Quand j'ai d√©couvert la co√Øncidence des encodages KOI8-r et CP1251 par l'emplacement de l'alphabet, j'√©tais triste pendant quelques jours ... il est devenu clair que je devais r√©fl√©chir un peu.  Cela s'est av√©r√© comme √ßa. </p><br><p>  D√©cisions cl√©s: </p><br><ol><li>  Nous travaillerons avec une tranche d'octets, pour la compatibilit√© avec charset.DetermineEncoding () </li><li>  Le codage UTF-8 et les cas de nomenclature sont v√©rifi√©s s√©par√©ment </li><li>  Les donn√©es d'entr√©e sont transmises tour √† tour √† chaque codage.  Chacun calcule lui-m√™me deux crit√®res entiers.  Dont la somme de deux crit√®res est sup√©rieure, il a gagn√©. </li></ol><br><h3 id="kriterii-sootvetstviya">  Crit√®res de conformit√© </h3><br><h4 id="pervyy-kriteriy">  Premier crit√®re </h4><br><p>  Le premier crit√®re est le nombre des lettres les plus populaires de l'alphabet russe. </p><br><p>  Les lettres les plus courantes sont: <strong>o, e, a et, n, t, s, p, b, l, k, m, d, p, y</strong> .  Ces lettres donnent une couverture de 82%.  Pour tous les encodages sauf KOI8-r et CP1251, j'ai utilis√© uniquement les 9 premi√®res lettres: o, e, a et, n, t, s, p, c.  Cela suffit pour une d√©termination fiable. </p><br><p>  Mais pour KOI8-r et CP1251, j'ai d√ª modifier le fichier.  Les codes de certaines de ces lettres co√Øncident, par exemple, la lettre <strong>o</strong> a le code 0xEE dans CP1251, tandis que dans KOI8-r ce code a la lettre <strong>n</strong> .  Les lettres populaires suivantes ont √©t√© prises pour ces encodages.  Pour CP1251, j'ai utilis√© a, et, n, c, p, b, l, k, i.  Pour KOI8-r - o, a, u, t, s, b, l, k, m. </p><br><h4 id="vtoroy-kriteriy">  Deuxi√®me crit√®re </h4><br><p>  Malheureusement, pour les cas tr√®s courts (la longueur totale du texte russe est de 5 √† 6 caract√®res), l'occurrence des lettres populaires est au niveau de 1 √† 3 pi√®ces et il y a un chevauchement des encodages KOI8-r et CP1251.  J'ai d√ª introduire un deuxi√®me crit√®re.  <strong>Comptage des consonnes + voyelles</strong> . <br>  De telles combinaisons devraient se produire le plus souvent dans la langue russe et, par cons√©quent, dans le codage dans lequel le nombre de telles paires est plus grand, ce codage a un crit√®re plus large. </p><br><p>  Les deux crit√®res sont calcul√©s, additionn√©s et le montant re√ßu est le crit√®re final. <br>  Le r√©sultat est indiqu√© dans le tableau ci-dessus. </p><br><h2 id="osobennosti-s-kotorymi-ya-stolknulsya">  Caract√©ristiques que j'ai rencontr√©es </h2><br><p>  Une petite touche sur les charmes et les probl√®mes associ√©s au golang.  La section peut √™tre int√©ressante uniquement pour les d√©butants pour √©crire en golang. </p><br><h3 id="problemy">  Les probl√®mes </h3><br><p>  J'ai personnellement parcouru certains des cailloux sous-marins des <a href="https://habr.com/ru/company/mailru/blog/314804/">50 nuances de Go: pi√®ges, pi√®ges et erreurs courantes pour les d√©butants</a> . <br>  Trop inquiet et essayant de souffler dans l'eau, entendant parler des terribles br√ªlures du lait, est all√© trop loin avec la v√©rification du param√®tre d'entr√©e du type io.Reader.  J'ai v√©rifi√© une variable comme io.Reader avec r√©flexion. </p><br><pre><code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//CodePageDetect - detect code page of ascii data from reader 'r' func CodePageDetect(r io.Reader, stopStr ...string) (IDCodePage, error) { if !reflect.ValueOf(r).IsValid() { return ASCII, fmt.Errorf("input reader is nil") } ...</span></span></code> </pre> <br><p>  Mais comme il s'est av√©r√© dans mon cas, il suffit de v√©rifier z√©ro.  Maintenant, tout est plus facile </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CodePageDetect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r io.Reader, stopStr ...</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IDCodePage, error)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//test input interfase if r == nil { return ASCII, nil } //make slice of byte from input reader buf, err := bufio.NewReader(r).Peek(ReadBufSize) if (err != nil) &amp;&amp; (err != io.EOF) { return ASCII, err } ...</span></span></code> </pre> <br><p>  un appel √† bufio.NewReader (r) .Peek (ReadBufSize) passe discr√®tement le test suivant: </p><br><pre> <code class="go hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data *os.File res, err := CodePageDetect(data)</code> </pre> <br><p>  Dans ce cas, Peek () renvoie une erreur. </p><br><p>  Une fois mont√© sur un r√¢teau avec le transfert de tableaux en valeur.  Un peu stupide d'essayer de changer les √©l√©ments stock√©s dans la carte, de les parcourir √† port√©e ... </p><br><h3 id="prelesti">  D√©lices </h3><br><p>  Il est difficile de dire exactement si la constante poign√©e de main du linter et du compilateur ou l'utilisation active de range, ou tous ensemble, mais il n'y a pratiquement aucune incursion pour sortir l'index des limites. </p><br><p>  Bien s√ªr, c'est tr√®s agr√©able de vivre avec le garbage collector.  Je suppose que je dois encore ma√Ætriser le rake de l'automatisation de l'allocation / lib√©ration de la m√©moire, mais jusqu'√† pr√©sent, le sourire idiot ne quitte pas mon visage. <br>  Une frappe forte est aussi un bonheur. </p><br><p>  Les variables ayant un type de fonction sont, par cons√©quent, une impl√©mentation facile de divers comportements pour des objets du m√™me type. </p><br><p>  √âtrange peu devait s'asseoir dans le d√©bogueur, relire le code donne g√©n√©ralement le r√©sultat. </p><br><p>  Puppy se r√©jouit d'avoir beaucoup d'outils pr√™ts √† l'emploi, c'est un sentiment merveilleux lorsque le compilateur, le langage, la biblioth√®que et le code IDE Visual Studio fonctionnent pour vous ensemble, harmonieusement. </p><br><p>  Merci <a href="https://habr.com/ru/users/falconandy/" class="user_link">Falconandy</a> pour les conseils constructifs et utiles. <br>  Merci √† lui </p><br><ol><li>  traduit des tests sur <a href="https://github.com/stretchr/testify" rel="nofollow">t√©moigner</a> et ils sont vraiment devenus plus lisibles </li><li>  tests corrig√©s des chemins de fichiers de donn√©es pour la compatibilit√© avec Linux </li><li>  parcouru par un <a href="https://github.com/golangci/golangci-lint/releases" rel="nofollow">linter</a> - pourtant il a trouv√© une vraie erreur (putain de copie / pass√©) </li></ol><br><p>  Je continue d'ajouter des tests, un cas de non d√©finition de l'UTF16 a √©t√© r√©v√©l√©.  Mis √† jour.  Maintenant UTF16 et LE et BE sont d√©tect√©s m√™me en l'absence de lettres russes </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr483166/">https://habr.com/ru/post/fr483166/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr483146/index.html">Conf√©rence DEFCON 27. Outil de piratage WiFi sans fil Kraken</a></li>
<li><a href="../fr483148/index.html">Nous discutons de jumeaux num√©riques et de simulation avec le fondateur d'une soci√©t√© de conseil</a></li>
<li><a href="../fr483154/index.html">J'ai d√©pens√© 40 000 $ et j'ai ruin√© une excellente id√©e pour une startup</a></li>
<li><a href="../fr483156/index.html">Mettez le chat sur ses pieds</a></li>
<li><a href="../fr483160/index.html">Espace 2020: Mars, constellations de satellites et nouvelles fus√©es</a></li>
<li><a href="../fr483168/index.html">Comment faire un bot qui transforme une photo en bande dessin√©e. Deuxi√®me partie Formation mod√®le</a></li>
<li><a href="../fr483170/index.html">Base de donn√©es Messenger (partie 2): nous partitionnons le ¬´profit¬ª</a></li>
<li><a href="../fr483172/index.html">Comment localiser une application ou un jeu? Dix principales sources d'apprentissage en ligne gratuites</a></li>
<li><a href="../fr483174/index.html">Enregistrez et transf√©rez le son d'un appareil √† l'autre √† l'aide de la connectivit√© Multipeer</a></li>
<li><a href="../fr483176/index.html">Base de donn√©es Messenger (partie 1): nous concevons le cadre de base</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>