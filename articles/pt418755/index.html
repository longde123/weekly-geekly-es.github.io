<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç® üßëüèª üìú Como o com√©rcio eletr√¥nico sobrevive √†s promo√ß√µes em larga escala. Preparando-se para picos de carga na web [Parte 1] üìê üíÖüèΩ üó≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal, estou em contato com Alexey Pristavko, diretor de projetos da Web DataLine. 
 A Black Friday, o maior evento de com√©rcio eletr√¥nico do mu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como o com√©rcio eletr√¥nico sobrevive √†s promo√ß√µes em larga escala. Preparando-se para picos de carga na web [Parte 1]</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/418755/"><img src="https://habrastorage.org/webt/xo/km/zi/xokmzi3k5y0axobkc_okaweyr3s.png"><br><br>  Ol√° pessoal, estou em contato com Alexey Pristavko, diretor de projetos da Web DataLine. <br>  A Black Friday, o maior evento de com√©rcio eletr√¥nico do mundo, acontece anualmente nos √∫ltimos dias de novembro.  Este √© o momento para descontos recordes, as lojas abrem quase √† meia-noite e os sites participantes da a√ß√£o caem, apesar do forte aumento no fluxo de tr√°fego. <br><br>  Portanto, usando o exemplo dela, analisaremos como se preparar para um aumento s√©rio na carga em um site ou aplicativo da web. <br>  Debaixo do gato, falaremos em detalhes sobre como os gerentes de TI, desenvolvedores e administradores de lojas on-line podem sobreviver a eventos de grande escala. <br><a name="habracut"></a><br><h2>  O que amea√ßa a Black Friday </h2><br>  Como escrevi acima, a Black Friday √© um dia que causa muitos problemas para todos os envolvidos na manuten√ß√£o de sites de com√©rcio eletr√¥nico. <br><br>  Para sentir isso, considere a tabela abaixo.  Isso reflete o aumento no n√∫mero de solicita√ß√µes no site durante a Black Friday. <br><br><img src="https://habrastorage.org/webt/ro/hz/3h/rohz3h6wrf481mhayxaie3jm0ia.png"><br><br>  Comparado aos picos di√°rios normais, quando n√£o h√° a√ß√µes, o tr√°fego da Black Friday est√° crescendo de 100 a 200%, e esse n√£o √© o limite. <br><br>  Se um site grande j√° tiver muito tr√°fego, uma loja on-line modesta durante o per√≠odo da campanha receber√° com facilidade o m√°ximo de visitantes e engasgar.  Parafraseando um pouco a velha piada: "os neg√≥cios fizeram todas as lojas diferentes e a Black Friday on-line igualou a todos". <br><br>  Ganhou na Black Friday "alimenta" o vendedor no ano que vem.  A empresa est√° extremamente interessada em atrair o n√∫mero m√°ximo de novos clientes que retornar√£o ao site para comprar novamente.  Por√©m, para isso, a primeira experi√™ncia com o site deve ocorrer sem problemas e garantir que essa seja a tarefa dos especialistas em TI. <br><br>  Quanto mais clientes estiverem simultaneamente no site, maiores ser√£o os requisitos de estabilidade e velocidade de resposta.  Certamente, voc√™ percebeu que o site da loja, para o qual voc√™ acessou a partir da p√°gina de destino do blackfridaysales, funcionou muito devagar ou n√£o funcionou.  Duvido que voc√™ tenha ficado esperando o download, mas n√£o saiu depois de alguns segundos. <br><br>  Falaremos sobre como proteger os clientes de experi√™ncias negativas e o site contra falhas devido a sobrecarga, abaixo.  No entanto, outras dicas s√£o v√°lidas para qualquer pico de carga esperado. <br><br>  Em geral, existem dois est√°gios de prepara√ß√£o de um site para aumentar o tr√°fego: <b>t√©cnico</b> e <b>organizacional.</b>  Neste artigo, discutiremos o est√°gio t√©cnico e descreverei os detalhes da organiza√ß√£o em detalhes na segunda parte, que ser√° lan√ßada em uma semana. <br><br><h2>  Prepara√ß√£o t√©cnica do site </h2><br><img src="https://habrastorage.org/webt/bs/7p/o3/bs7po31te56sxn9utnni3txekqm.png"><br><br>  <i><b>Um pequeno aviso:</b> n√£o espere encontrar aqui instru√ß√µes detalhadas sobre o que, onde e como refor√ß√°-lo, para que ‚Äúa felicidade de todos seja em v√£o e ningu√©m se ofenda‚Äù.</i>  <i>Primeiro de tudo, sites e projetos s√£o diferentes para todos.</i>  <i>Em segundo lugar, conselhos t√©cnicos espec√≠ficos sobre um software espec√≠fico s√£o mais que suficientes.</i>  <i>Incluindo Habr√©.</i>  <i>Antes de tudo, quero transmitir aos leitores os princ√≠pios fundamentais de trabalhar com projetos da web e mostrar os pontos de partida, introduzir t√©cnicas b√°sicas e nuances independentes de plataforma.</i> <br><br>  Vamos come√ßar com o axioma: o usu√°rio n√£o gosta de esperar, por isso √© extremamente importante trabalhar com hor√°rios e velocidade de resposta.  Na Black Friday, haver√° muito mais solicita√ß√µes para o site do que o habitual, e voc√™ poder√° encontrar n√£o apenas uma queda nas convers√µes devido a uma carga longa, mas tamb√©m um excesso de tempos limite de HTTP (o site n√£o responde). <br><br>  Na maioria das vezes, os sites ficam sobrecarregados n√£o devido a falhas f√≠sicas, mas porque o tempo de resposta come√ßou a exceder o tempo limite devido √† sobrecarga em algum n√≥.  Isso √© semelhante a um engarrafamento, e por um tempo voc√™ ter√° que assumir o controle de suas pr√≥prias m√£os: expandir (escalar) equipamentos, ajustar, cortar e configurar (intervalos), otimizar a carga nos ve√≠culos (pacotes e solicita√ß√µes) e trabalhar com exce√ß√µes. <br><br>  Como no contexto do desempenho do site h√° dois aspectos - velocidade de resposta e n√∫mero de solicita√ß√µes processadas simultaneamente, melhoraremos esses par√¢metros. <br><blockquote>  Na maioria das vezes, uma empresa representa a velocidade de resposta como a velocidade do site, de acordo com o Google Analytics, e o n√∫mero de solicita√ß√µes simult√¢neas como o n√∫mero de usu√°rios simultaneamente no site. <br><br>  No trabalho t√©cnico, n√£o √© muito conveniente operar com esses par√¢metros. <br>  A seguir, proponerei uma m√©trica mais adequada para os c√°lculos. </blockquote><h3>  Otimizamos a velocidade de resposta </h3><br><img src="https://habrastorage.org/webt/j4/do/3l/j4do3lxf6g5ycfmttgtobr16wfq.png"><br><br>  Ao otimizar a velocidade de resposta, estamos interessados ‚Äã‚Äãem dois indicadores: <b>velocidade de resposta do servidor</b> e <b>tempo de carregamento da p√°gina.</b> <br><br>  O Tempo de carregamento da p√°gina consiste nos seguintes links: <br><br><ul><li>  Tempo de gera√ß√£o da p√°gina do servidor; </li><li>  Tempo de transfer√™ncia de p√°gina do servidor para o cliente; </li><li>  O tempo de processamento da p√°gina no navegador do cliente. </li></ul><br>  Quando tudo funciona normalmente, o fator decisivo para o Tempo de carregamento da p√°gina n√£o √© o tempo em que a p√°gina foi gerada pelo servidor e o tempo em que a p√°gina foi entregue pela rede, mas a qualidade do front-end e a velocidade do site no navegador.  Como o √∫ltimo √© totalmente do lado do usu√°rio, voc√™ n√£o pode ter medo dos freios na Black Friday.  No entanto, podem surgir problemas devido a sobrecargas no canal da Internet ou na entrega de um componente externo (contadores de afiliados, bate-papos on-line, plug-ins de CRM, etc.). <br>  Como lidar com isso?  Aqui est√£o algumas dicas de trabalho: <br><br><ol><li>  Verifique a carga do canal da Internet.  Conte o crescimento estimado.  Em caso de d√∫vida, expanda o canal.  Alguns provedores, al√©m de extens√µes caras em uma base cont√≠nua, podem oferecer uma extens√£o tempor√°ria para o per√≠odo de pico (muito mais barato) ou at√© permitir que voc√™ exceda brevemente a velocidade m√°xima. </li><li>  Usando uma CDN?  Entre em contato com o suporte t√©cnico e avise sobre o crescimento planejado do tr√°fego.  Eles tamb√©m est√£o se preparando para o pico geral, e sua previs√£o ser√° √∫til.  Se a CDN prometer que tudo ficar√° bem, mas, apesar de tudo, "se deitar", a presen√ßa de correspond√™ncia ajudar√° a apresentar pedidos de indeniza√ß√£o. </li><li>  Com anteced√™ncia, elabore um script para desativar temporariamente os componentes externos em caso de problemas.  Alinhe o cen√°rio com os neg√≥cios.  N√£o ser√° sup√©rfluo se comunicar com o suporte t√©cnico dos servi√ßos utilizados; de qualquer maneira, √© geralmente imposs√≠vel influenci√°-los de alguma forma. </li><li>  Em muitos sites, a est√°tica √© renderizada usando o servidor de aplicativos.  Sob carga alta, o n√∫mero de solicita√ß√µes de est√°tica aumenta muitas vezes e elas come√ßam a competir por recursos com o pr√≥prio aplicativo.  Certifique-se de configurar o retorno est√°tico diretamente do Nginx.  Em primeiro lugar, ele vai lidar muito melhor com isso e, em segundo lugar, haver√° um trabalho muito mais √∫til para os threads do Apache, Tomcat ou Jetty. </li></ol><br><h3>  Melhorando a velocidade de resposta </h3><br><img src="https://habrastorage.org/webt/fg/s3/tf/fgs3tfdn9y_uw4e0i2bqg5lhzlc.png"><br><br>  A otimiza√ß√£o da velocidade de resposta em si refere-se √† melhoria geral no desempenho do site.  Teoricamente, ajuda a reduzir a quantidade de trabalho realizado pelo aplicativo e, assim, melhora a escala - porque se cada solicita√ß√£o se tornar "mais barata", voc√™ poder√° processar mais solicita√ß√µes com os mesmos recursos. <br><br>  Mas, na pr√°tica, otimizar a velocidade de resposta requer uma grande quantidade de trabalho independente.  √â imposs√≠vel otimizar tudo de uma s√≥ vez, mas quebrar algo no processo √© f√°cil. <br><blockquote>  Dica: pense sistematicamente.  Digamos que o desempenho do c√≥digo tenha aumentado e o aplicativo tenha come√ßado a fazer mais consultas simult√¢neas ao banco de dados.  Mas aqui est√° o problema: o desempenho do banco de dados n√£o permite processar um n√∫mero t√£o grande de solicita√ß√µes e o site como um todo s√≥ piorou, e um tempo valioso foi gasto antes do in√≠cio da a√ß√£o. </blockquote>  Portanto, √© melhor focar na escala e na escalabilidade e executar a otimiza√ß√£o geral separadamente da prepara√ß√£o para a Black Friday, para n√£o atrapalhar devido a prazos r√≠gidos.  Lembre-se, agora nossa tarefa √© garantir que, no pico das cargas, o site n√£o funcione pior do que fora. <br><br>  A velocidade de gera√ß√£o da p√°gina nos interessar√° apenas em conjunto com outro indicador - a quantidade de carga recebida. <br><br>  <b>Observe:</b> para o site, apenas o n√∫mero de solicita√ß√µes simult√¢neas criadas pelos usu√°rios √© importante, e n√£o o n√∫mero de usu√°rios online no site.  E para calcular com precis√£o aceit√°vel, o <b>n√∫mero de solicita√ß√µes por segundo</b> pelo <b>n√∫mero de visitantes √©</b> bastante dif√≠cil (escrevi sobre isso acima).  √â melhor solicitar √† empresa outras m√©tricas - visualiza√ß√µes de p√°gina por hora e hora do servidor. <br><br>  Como resultado, temos um objetivo compreens√≠vel: garantir a gera√ß√£o de p√°ginas para o tempo X com o n√∫mero de solicita√ß√µes por segundo Y. Tendo m√©tricas num√©ricas espec√≠ficas em m√£os, √© muito mais f√°cil avaliar o n√≠vel de prontid√£o e o resultado atual. <br><br>  Aqui est√° um plano geral de treinamento t√©cnico: <br><br><ol><li>  Descubra os indicadores atuais (realize o teste de carga da vers√£o atual do site); </li><li>  Para entender exatamente o que est√° faltando e quantos recursos s√£o necess√°rios para solicitar; </li><li>  Adicionar recursos; </li><li>  Repita o teste de estresse e veja se isso ajuda. </li></ol><br>  Parece f√°cil demais?  Voc√™ est√° certo, cada ponto √© repleto de muitas surpresas. <br><br>  Muitas vezes, a adi√ß√£o de recursos melhora parcialmente a situa√ß√£o, mas n√£o salva tudo.  Ou, em um ambiente de teste, o site funciona como um rel√≥gio e, no impulso - novamente os freios. <br><br>  Em seguida, mostrarei como identificar problemas em potencial e corrigir fraquezas.  Vamos come√ßar como realizar testes de estresse e obter um resultado realista. <br><br><h3>  Realizamos testes de carga corretamente </h3><br><img src="https://habrastorage.org/webt/t9/mf/fe/t9mffe4gx1ujdnadqnyvplep6sa.png"><br><br><h4>  Onde testar? </h4><br>  Freq√ºentemente, testes de estresse s√£o realizados em um sistema produtivo.  Isso pode ser bom para controlar a situa√ß√£o como um todo, mas n√£o para resolver iterativamente problemas espec√≠ficos.  Lembre-se, geralmente ap√≥s problemas rec√©m-descobertos ap√≥s a elimina√ß√£o, novos podem aparecer.  Balas de prata raramente atingem o alvo. <br><br>  Um teste de carga com falha pode causar transtornos aos usu√°rios do site ou at√© "interromp√™-lo" por um tempo.  √â melhor usar uma √°rea dedicada como um coelho experimental. <br><br>  Ele deve atender aos seguintes requisitos: <br><br><ul><li>  A √°rea dedicada deve ser completamente independente e isolada da produtiva; <br></li><li>  Idealmente, uma √°rea dedicada deve ser consistente com o tamanho do produto.  Um modelo em larga escala tamb√©m √© adequado, mas reduzir√° a qualidade e o significado dos testes.  Se a carga em um recurso aumentar de maneira n√£o linear (como normalmente acontece), seu modelo n√£o mostrar√° que, sob carga total, o recurso se esgotar√° antes do tempo; <br></li><li>  √â melhor usar exatamente o mesmo (mas n√£o o mesmo!) Equipamento para testes como no prod.  Caso contr√°rio, mesmo que os valores quantitativos dos recursos sejam observados, n√£o ser√° poss√≠vel fornecer qualidade.  Pode fazer uma piada cruel no momento crucial.  Se isso n√£o for poss√≠vel, teste o desempenho do equipamento sob sua carga e determine o coeficiente de ajuste. <br></li></ul><br>  Agora vamos falar sobre maneiras de gerar uma carga de teste.  Vou dar algumas t√©cnicas b√°sicas, cada uma com seus pr√≥s e contras. <br><br><h4>  Como gerar uma carga? </h4><br>  <b>1. Teste em solicita√ß√µes dos logs</b> <br><br>  √â poss√≠vel emular o fluxo de tr√°fego atrav√©s dos logs do servidor de batalha.  Uma vantagem √≥bvia dessa abordagem √© que voc√™ n√£o precisa se preocupar com an√°lises, modelagem estat√≠stica e um perfil de tr√°fego sint√©tico. <br><br>  Mas voc√™ ainda precisa limpar os logs de solicita√ß√µes que n√£o podem ser feitas ou n√£o s√£o necess√°rias. <br>  Por exemplo, voc√™ n√£o precisa "comprar" mercadorias no produtivo, isso causar√° problemas com o conte√∫do do produto no banco de dados. <br><br>  Ser√° dif√≠cil reproduzir atrasos realistas entre solicita√ß√µes. <br>  Emular sess√µes do usu√°rio tamb√©m √© extremamente dif√≠cil, esse m√©todo est√° muito pr√≥ximo do teste baseado em resultados. <br><br>  <b>2. Usando Yandex.Tank e Phantom</b> <br><br>  O tanque em conjunto com o Phantom √© uma ferramenta muito conveniente e popular para testes baseados em resultados.  Possui uma interface inteligente e permite gerenciar a carga.  Para come√ßar a descascar em um tanque, voc√™ deve preparar ‚Äúcartuchos‚Äù - arquivos especiais que cont√™m solicita√ß√µes de gerador. <br><br>  Mas, apesar de toda a conveni√™ncia, o Tank tem uma grande desvantagem: ele n√£o sabe como usar as sess√µes do usu√°rio. <br><br>  Voc√™ pode esquecer a autoriza√ß√£o, o trabalho completo com cookies e os atrasos vari√°veis.  Um tanque s√≥ pode "bicar" solicita√ß√µes de um √∫nico endere√ßo. <br><br>  Servir√° para voc√™ se: <br><br><ul><li>  N√£o h√° diferen√ßa no tempo de resposta do servidor para usu√°rios autorizados e n√£o autorizados ou √© insignificante; </li><li>  Testando API sem sess√µes HTTP explicitamente; </li><li>  Essa abordagem geralmente √© consistente com a l√≥gica do seu site (geralmente n√£o √© adequada para lojas online). </li></ul><br><img src="https://habrastorage.org/webt/c4/nh/em/c4nhemg4hescy14wza4hbwsfmfg.png"><br><br>  <b>3. Usando o Apache JMeter</b> <br><br>  Essa √© a ferramenta mais flex√≠vel que permite emular sess√µes de usu√°rio em detalhes.  Assim, com sua ajuda, voc√™ ainda pode responder √† pergunta da empresa "quantos usu√°rios o site suporta?"  Al√©m disso, o JMeter pode trabalhar em conjunto com o Yandex.Tank. <br>  Seu ponto negativo √© o consumo de recursos e a complexidade da prepara√ß√£o de testes. <br><br>  O principal conselho diretamente no JMeter: tente evitar a an√°lise dos corpos das p√°ginas com suas for√ßas; √© melhor usar conjuntos de dados pr√©-preparados para reproduzir a l√≥gica da sess√£o.  Em princ√≠pio, √© melhor minimizar o trabalho realizado pelo JMeter em geral.  Como o Tank, √© poss√≠vel conectar "cartuchos" pr√©-gerados a ele.  √â aqui que eles precisam levar em considera√ß√£o a distribui√ß√£o de p√°ginas espec√≠ficas em um tipo, a variabilidade de solicita√ß√µes e assim por diante. <br><br>  No pr√≥prio JMeter, os modelos de comportamento do usu√°rio precisam ser programados.  Se a tarefa √© testar n√£o apenas a parte do servidor, mas tamb√©m o retorno do conte√∫do est√°tico, execute esse teste separadamente usando o Phantom, se necess√°rio simultaneamente com o teste JMeter.  Isso ajudar√° a reduzir significativamente o consumo de recursos do gerador de carga e a aumentar a reprodutibilidade do teste. <br><br>  <b>Recomenda√ß√µes para teste de estresse</b> <br><br>  Um bom teste de carga √© baseado em uma an√°lise de tr√°fego competente e na prepara√ß√£o de alta qualidade de um modelo estat√≠stico e perfis para emula√ß√£o. <br><br>  Destaque 5-7 tipos principais de p√°ginas (n√£o se esque√ßa tamb√©m das p√°ginas de destino dos estoques), calcule a porcentagem do tr√°fego total distribu√≠do entre eles.  Lembre-se de que pode haver v√°rias solicita√ß√µes de conte√∫do din√¢mico por p√°gina.  Para voc√™, a p√°gina √© o grupo inteiro de tais solicita√ß√µes.  Analise quanto tempo os usu√°rios gastam em cada tipo de p√°gina: m√©dia, m√©dia m√≠nima, m√©dia m√°xima. <br><br>  Se a p√°gina for criada em v√°rias solicita√ß√µes, considere o atraso entre elas.  Veja quantas p√°ginas um usu√°rio geralmente visita por sess√£o, qual √© a distribui√ß√£o desse n√∫mero.  Destaque de 5 a 10 dos caminhos de usu√°rio mais comuns por tipo de p√°gina. <br><br>  Usando os dados obtidos, construa os cen√°rios de forma a reproduzir com extrema precis√£o todos os par√¢metros estat√≠sticos descritos.  N√£o se esque√ßa da variabilidade dos cen√°rios, eles devem variar tanto no n√∫mero quanto na composi√ß√£o dos cliques. <br><br>  Em cada tipo de p√°gina, realce endere√ßos individuais.  Quanto mais, melhor, mas alguns milhares dos endere√ßos mais populares j√° estar√£o sobre os olhos.  Voc√™ pode preparar listas de consultas a partir deles, adicionando cada endere√ßo √† lista quantas vezes for necess√°rio. <br><br>  Se houver muitas p√°ginas, divida-as em v√°rios grupos de acordo com a porcentagem de tr√°fego. <br><br>  Os perfis desempenham uma fun√ß√£o apenas para o JMeter, mas, ao criar listas de consultas, voc√™ pode equipar cartuchos "tanque". <br><blockquote>  E novamente: ao usar o JMeter no modo de emula√ß√£o do usu√°rio, n√£o se esque√ßa dos atrasos entre as solicita√ß√µes.  Se voc√™ n√£o os adicionar, sua carga gerada ser√° muitas vezes maior que o planejado! </blockquote>  Ap√≥s uma avalia√ß√£o, verifique os logs do servidor da web para ver se o tr√°fego emulado √© produtivo. <br><br>  As acrobacias preparam scripts com anteced√™ncia para levar o banco de dados do site ao estado que voc√™ precisa.  Geralmente, os dados preparados da maneira descrita acima funcionam apenas com o estado do banco de dados para o qual as informa√ß√µes sobre mercadorias foram coletadas.  Pode ser proibitivamente longo recarregar o despejo de SQL sempre.  Al√©m disso, √© muito desej√°vel aprender como gerenciar estoques em execu√ß√£o usando scripts na √°rea de teste.  Frequentemente, s√£o importantes para a opera√ß√£o do sistema, e voc√™ precisa entender <b>com que conjunto</b> e <b>como exatamente</b> os estoques em funcionamento s√£o testados. <br><br>  Est√° tudo pronto?  √ìtimo, v√° em frente! <br><br><h3>  Usamos monitoramento em testes </h3><br><img src="https://habrastorage.org/webt/tg/f0/3c/tgf03cquqgwujw_gyjflqij1s5c.png"><br><br>  Por isso, realizamos testes competentes e obtivemos os resultados.  Se tudo estiver bem e o seu site estiver enfrentando uma carga alta, nenhuma sexta-feira negra √© assustadora para voc√™.  Mas este artigo ficaria incompleto se n√£o consider√°ssemos um <s>triste</s> cen√°rio realista. <br><br>  Imagine que um site possa suportar uma velocidade aceit√°vel ... bem, mesmo que seja apenas um quinto do que a empresa deseja obter.  √â realmente necess√°rio ligar para o hoster em p√¢nico e pedir cinco vezes mais capacidade? <br><br>  Em princ√≠pio, o host gostar√° dessa abordagem.  Voc√™ pode at√© obter o status de um cliente de ouro. <br><br>  Mas antes de agir precipitadamente, vamos tentar descobrir o que exatamente deu errado. <br><br>  Sua b√≥ia de vida no mar de poss√≠veis causas √© um sistema de monitoramento. <br><br><img src="https://habrastorage.org/webt/sp/kt/og/spktoglx5xwtzcea9x6itlmzcfs.png"><br><br>  Portanto, recuamos e instalamos o maior n√∫mero poss√≠vel de amostras antes do teste.  Idealmente, todos os recursos esgot√°veis ‚Äã‚Äãdevem ser monitorados. <br><br>  Abaixo est√° uma lista para ajudar voc√™ a come√ßar: <br><br><ul><li>  Carga da CPU (uso da CPU, carga da CPU); </li><li>  Carregamento de RAM; </li><li>  Carregamento de disco (IOPS, lat√™ncia); </li><li>  N√∫mero de conex√µes de rede (espera em tempo, espera final, espera pr√≥xima, estabelecida); </li><li>  O n√∫mero de soquetes abertos; </li><li>  O n√∫mero de processos do usu√°rio; </li><li>  O n√∫mero de arquivos abertos; </li><li>  Tr√°fego de rede (em megabits e em pacotes, mais erros e quedas). </li></ul><br>  E tamb√©m: <br><br><ul><li>  O n√∫mero de consultas, respostas e conex√µes com o banco de dados e outros componentes; </li><li>  Velocidade de resposta do componente (banco de dados, servidor de pesquisa, caches, etc.); </li><li>  Todos os logs dispon√≠veis para erros. </li></ul><br>         .       ,    ¬´ ¬ª.  ,    ¬´¬ª  ,    . <br><br> ,    ,   . <br><br> -   ,   : ,  HDD  SSD.       -,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">.</a> <br><br>          <b> </b>      <b>.</b>       . <br><br> <b>  :</b> ,  ,      ?     ,    , ,  2-         ,  - (,  0,5 )      1,5    .              - ¬´,   ¬ª. <br><br>          1 ,   .        ,    . ,              .   ,     (      )    ,   . <br><br><h3>   </h3><br>  ,    ,   ,   . <br><br>     ¬´¬ª ,     .    2-3 ,      ,    . <br><br>     , :        .     ,     . , , ,      ,   . <br><br>           .          .  ,   SLA, ,  ,  ,      ,      ¬´¬ª . <br><br>       .        ,     .      . <br><br>     ,  ,           .       ,      ,        . <br><br>       ,    . <br> -,       (   ),  -,      .            . <br><br> ,   .       -    ,            . <br><br>     ,       ,   ,    ¬´   e-commerce.  ¬ª,   16   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418755/">https://habr.com/ru/post/pt418755/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418741/index.html">Adicione criptografia e envie para SIP regular</a></li>
<li><a href="../pt418743/index.html">Hist√≥ria do Primeiro Lugar no ML Boot Camp VI</a></li>
<li><a href="../pt418747/index.html">Solu√ß√£o de problemas: como efetivamente resolver problemas em equipe?</a></li>
<li><a href="../pt418751/index.html">Dex espi√£o chin√™s insolente</a></li>
<li><a href="../pt418753/index.html">vSAN na nuvem VMware</a></li>
<li><a href="../pt418757/index.html">Prazos de dilui√ß√£o (criptomoedas, forex, trocas)</a></li>
<li><a href="../pt418759/index.html">Quanto custa para um aluno emitir um chip?</a></li>
<li><a href="../pt418761/index.html">O livro ‚ÄúPure Python. As sutilezas da programa√ß√£o para profissionais ¬ª</a></li>
<li><a href="../pt418763/index.html">M√©dio / s√™nior: como sair do p√¢ntano?</a></li>
<li><a href="../pt418765/index.html">As dicas do Dadata ajudam a preencher qualquer formul√°rio de entrada. Agora cure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>