<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👪 👇🏽 😵 ¿Cómo verificar rápidamente las advertencias interesantes que brinda el analizador PVS-Studio para el código C y C ++? 🙆 ⭕️ 🧝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De vez en cuando, los programadores que comienzan a familiarizarse con el analizador de código PVS-Studio me preguntan: "¿Hay una lista de advertencia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¿Cómo verificar rápidamente las advertencias interesantes que brinda el analizador PVS-Studio para el código C y C ++?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/457330/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df3/c29/8f2/df3c298f21cb71d0c7c699b7e27269d3.png"></div><br>  De vez en cuando, los programadores que comienzan a familiarizarse con el analizador de código PVS-Studio me preguntan: "¿Hay una lista de advertencias que indiquen errores con precisión?"  No existe dicha lista porque las advertencias poco interesantes (falsas) en un proyecto son muy importantes y útiles en otro.  Sin embargo, uno definitivamente puede comenzar a cavar en el analizador desde las advertencias más emocionantes.  Echemos un vistazo más de cerca a este tema. <br><a name="habracut"></a><br>  El problema es que, por regla general, al principio un programador se ahoga en una gran cantidad de advertencias que recibe.  Naturalmente, quiere comenzar a revisar las advertencias más interesantes para comprender si debería dedicar su tiempo a resolver todo esto.  Bien, aquí hay tres pasos simples que le permitirán ver las advertencias más emocionantes. <br><br><h2>  Paso 1 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/648/436/d98/648436d98521380495f1c9f8ee384646.png"></div><br><br>  Deshabilite todos los tipos de advertencias excepto las generales (GA).  Un error común es habilitar todo tipo de advertencias.  Los usuarios inexpertos piensan que cuanto más se habilite, mejor.  Ese no es el caso.  Hay conjuntos de diagnóstico, como las comprobaciones de 64 bits y las reglas MISRA, que solo deben usarse cuando uno sabe claramente qué son y cómo trabajar con ellos.  Por ejemplo, al habilitar los diagnósticos MISRA para un programa de aplicación ordinario, se ahogará en decenas, miles o cientos de miles de advertencias como: <ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2506</a> .  Misra  Una función debe tener un único punto de salida al final. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2507</a> .  Misra  El cuerpo de una instrucción loop \ condicional debe estar entre llaves. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2523</a> .  Misra  Todas las constantes enteras de tipo sin signo deben tener el sufijo 'u' o 'U'. </li></ul><br>  La mayoría de las advertencias de MISRA indican no errores, sino olores de código.  Naturalmente, un programador comienza a hacer preguntas.  ¿Cómo encuentras algo interesante en la pila de todas estas advertencias?  ¿Qué números debería mirar?  Estas son las preguntas equivocadas.  Solo necesita deshabilitar el conjunto MISRA.  Este es el estándar para escribir código de calidad para dispositivos integrados.  El objetivo del estándar es hacer que el código sea extremadamente simple y comprensible.  No intentes aplicarlo donde sea inapropiado. <br><br>  Nota  Sí, MISRA tiene reglas diseñadas para identificar errores reales.  Ejemplo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V2538</a> : el valor de la variable no inicializada no debe utilizarse.  Pero no tenga miedo de deshabilitar el estándar MISRA.  No vas a perder nada.  Los errores reales aún se encontrarán como parte de los Diagnósticos generales (GA).  Por ejemplo, el diagnóstico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V614</a> encontrará una variable no inicializada. <br><br><h2>  Paso 2 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f30/9c1/d2f/f309c1d2fed7a2736170dad987cd4460.png"></div><br><br>  Cualquier analizador estático emite falsos positivos en las primeras ejecuciones y requiere cierta configuración.  No se puede hacer nada al respecto, pero no es tan aterrador como parece.  Incluso una configuración rápida simple le permite eliminar la mayoría de los falsos positivos y comenzar a ver un informe bastante relevante.  No hablaré más sobre eso, como lo he escrito muchas veces, por ejemplo, en este artículo: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Características del analizador PVS-Studio por el ejemplo de las bibliotecas principales de EFL, 10-15% de falsos positivos</a> ". <br><br>  Pase un poco de tiempo desactivando advertencias obviamente irrelevantes y luchando contra falsos positivos relacionados con macros.  En términos generales, las macros son la razón principal de los falsos positivos, ya que aparece una advertencia en todos los casos cuando se utiliza una macro mal implementada.  Para suprimir advertencias en macros, puede escribir comentarios de un tipo especial al lado de su declaración.  El formato más de comentarios está cubierto en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación</a> . <br><br>  Sí, la configuración inicial llevará un poco de tiempo, pero mejorará drásticamente la percepción del informe al eliminar el ruido que distrae.  Tómate un tiempo para hacerlo.  Si hay alguna dificultad o pregunta, siempre estamos listos para ayudarlo y decirle cómo configurar el analizador de la mejor manera.  Siéntase libre de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">escribir</a> y hacernos preguntas. <br><br><h2>  Paso 3 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f87/0ec/c49/f870ecc49989743ae8caea3c745e602e.png"></div><br><br>  Comience a ver las advertencias desde el Nivel 1. Solo después de ver 2 y 3. Los niveles de advertencia no son más que la veracidad de una advertencia.  Las advertencias del Nivel 1 tienen más probabilidades de indicar un error real que las advertencias del Nivel 2. <br><br>  Puede decir que cuando elige "ver el Nivel 1", presiona el botón "ver los errores más interesantes". <br><br>  Más detalladamente, la clasificación de las advertencias de PVS-Studio por niveles se describe en el artículo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La forma en que los analizadores estáticos luchan contra los falsos positivos y por qué lo hacen</a> ". <br><br><h2>  Entonces, ¿por qué no hay una lista? </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df2/95f/70b/df295f70b19562c12916ec578022829f.png"></div><br><br>  Sin embargo, la idea de tener una lista de las advertencias más útiles aún puede parecer razonable.  Permítame mostrarle en un ejemplo práctico que la utilidad de un diagnóstico es relativa y depende del proyecto. <br><br>  Consideremos la advertencia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V550</a> .  La advertencia detecta un posible error relacionado con el hecho de que, para comparar números con un punto flotante, se utilizan los operadores == o! =. <br><br>  La mayoría de los desarrolladores con los que he hablado piensan que este diagnóstico es inútil y lo deshabilitan porque todos los disparadores para su proyecto son falsos.  Es por eso que este diagnóstico tiene un bajo nivel de certeza y se relaciona con el Nivel 3. <br><br>  De hecho, en la mayoría de las aplicaciones, los tipos flotante / doble se utilizan en algoritmos muy simples.  A menudo, la comparación con la constante se usa únicamente para verificar si un determinado valor se establece de manera predeterminada o si ha cambiado.  En este caso, la verificación exacta es bastante apropiada.  Lo explicaré con pseudocódigo. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsUserInputNewValue()) value = GetUserValue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value == <span class="hljs-number"><span class="hljs-number">1.0f</span></span>) DefaultBehavior(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Foo(value);</code> </pre> <br>  Aquí la comparación <i>(valor de 1.0f)</i> es correcta y segura. <br><br>  ¿Significa esto que el diagnóstico V550 no es interesante?  No  Todo depende del proyecto.  Permítanme citar un fragmento del artículo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo intentamos el análisis estático en nuestro proyecto de simulador de entrenamiento de cirugía endovascular de rayos X</a> ", escrito por nuestro usuario. <br><br>  Entonces, a qué presta atención nuestro analizador estático aquí: <br><br>  V550 Una comparación precisa extraña: t! = 0. Probablemente sea mejor usar una comparación con precisión definida: fabs (A - B)&gt; Epsilon.  objectextractpart.cpp 3401 <br><br><pre> <code class="cpp hljs">D3DXVECTOR3 N = VectorMultiplication( VectorMultiplication(V-VP, VN), VN); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Qsqrt(Scalar(N, N)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { N/=t; V = V - N * DistPointToSurface(V, VP, N); }</code> </pre> <br>  Los errores de este tipo se repiten con bastante frecuencia en esta biblioteca.  No puedo decir que fue una sorpresa para mí.  Anteriormente, me encontré con el manejo incorrecto de números con un punto flotante en este proyecto.  Sin embargo, no había recursos para verificar sistemáticamente las fuentes.  Como resultado de la verificación, quedó claro que era necesario darle al desarrollador algo para ampliar sus horizontes en términos de trabajo con números de coma flotante.  Ha sido vinculado a un par de buenos artículos.  Veremos cómo salen las cosas.  Es difícil decir con certeza si este error causa interrupciones reales en el programa.  La solución actual expone una serie de requisitos para la malla poligonal original de las arterias, que simula la propagación de la materia de contraste de rayos X.  Si no se cumplen los requisitos, el programa puede caerse o el trabajo es claramente incorrecto.  Algunos de estos requisitos se obtienen analíticamente y otros, empíricamente.  Es posible que este conjunto empírico de requisitos esté creciendo solo debido al manejo incorrecto de los números con un punto flotante.  Cabe señalar que no todos los casos encontrados de usar una comparación precisa de números con un punto flotante fueron un error. <br><br>  Como puede ver, lo que no es interesante en algunos proyectos es de interés en otros.  Esto hace que sea imposible crear una lista de los "más interesantes". <br><br>  Nota  También puede establecer el nivel de advertencia utilizando la configuración.  Por ejemplo, si cree que el diagnóstico V550 merece mucha atención, puede moverlo del Nivel 3 al 1.  Este tipo de configuración se describe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación</a> (consulte "Cómo configurar su nivel para diagnósticos específicos"). <br><br><h2>  Conclusión </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37d/d9e/ecd/37dd9eecd44e33d66c2993ad552e11f7.png"></div><br>  Ahora ya sabe cómo comenzar a estudiar las advertencias del analizador observando las más interesantes.  Y no olvide consultar la documentación para obtener una descripción detallada de las advertencias.  A veces sucede que detrás de un anónimo, a primera vista, la advertencia yace en el infierno.  Un ejemplo de tales diagnósticos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V597</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">V1026</a> .  Gracias por su atencion </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/457330/">https://habr.com/ru/post/457330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457312/index.html">Introducción a la teoría de conjuntos</a></li>
<li><a href="../457316/index.html">Cómo se organiza el juego de rol en el mundo real para los invitados de Armenia con viajes por la mitad del país</a></li>
<li><a href="../457324/index.html">Eventos digitales en Moscú del 24 al 30 de junio</a></li>
<li><a href="../457326/index.html">Clúster de conmutación por error PostgreSQL + Patroni. Experiencia de implementacion</a></li>
<li><a href="../457328/index.html">Categorías en lugar de directorios, o el sistema de archivos semántico para Linux</a></li>
<li><a href="../457332/index.html">¿Cómo ver rápidamente advertencias interesantes generadas por el analizador PVS-Studio para código C y C ++?</a></li>
<li><a href="../457334/index.html">TacacsGUI, Administrador de configuración</a></li>
<li><a href="../457336/index.html">Las consecuencias de la extracción prematura de las muelas del juicio</a></li>
<li><a href="../457338/index.html">Blitz con Ilya Krasinsky: ¿cómo disparar malas hipótesis, por qué descartar un producto y cómo crecer para un mínimo de acción?</a></li>
<li><a href="../457340/index.html">10 complementos PostCSS que le ahorrarán tiempo de diseño</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>