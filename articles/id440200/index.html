<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤴🏻 📈 😰 Mari kita bicara tentang pencatatan 🤷🏼 👩🏼‍🤝‍👨🏻 🧙🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Posting ini terinspirasi oleh topik Go Forum yang diluncurkan oleh Nate Finch. Posting ini difokuskan pada Go, tetapi jika Anda melewati ini, saya pik...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mari kita bicara tentang pencatatan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440200/">  Posting ini terinspirasi oleh topik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Go Forum yang</a> diluncurkan oleh Nate Finch.  Posting ini difokuskan pada Go, tetapi jika Anda melewati ini, saya pikir ide-ide yang disajikan di sini dapat diterapkan secara luas. <br><br><h2>  Kenapa tidak ada cinta? </h2><br>  Paket log di Go tidak memiliki level untuk log, Anda dapat secara manual menambahkan DEBUG, INFO, WARN, dan ERROR sendiri.  Juga, tipe logger di Go tidak memiliki kemampuan untuk mengaktifkan atau menonaktifkan level ini secara terpisah untuk paket yang dipilih.  Sebagai perbandingan, mari kita lihat beberapa penggantian dari pengembang pihak ketiga. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/df2/fc3/3ed/df2fc33ed7ebb1457c25060bbb1f98a7.png" alt="gambar"><br><br>  Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">glog</a> memiliki level: <br><br><ul><li>  Info </li><li>  Peringatan </li><li>  Kesalahan </li><li>  Fatal (mengakhiri program) </li></ul><br>  Mari kita lihat perpustakaan lain, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">loggo</a> , dikembangkan untuk Juju, level tersedia di dalamnya: <br><br><ul><li>  Jejak </li><li>  Debug </li><li>  Info </li><li>  Peringatan </li><li>  Kesalahan </li><li> Sangat penting </li></ul><br>  Loggo juga memiliki kemampuan untuk mengatur tingkat rincian log untuk paket yang diinginkan secara individual. <br><br>  Berikut adalah dua contoh, jelas dibuat di bawah pengaruh perpustakaan lain untuk masuk dalam bahasa lain. <br><br>  Bahkan, asal mereka dapat ditelusuri kembali ke syslog (3), bahkan mungkin lebih awal.  Dan saya pikir mereka salah. <br><br>  Saya ingin mengambil posisi kontroversial.  Saya pikir semua pustaka log buruk karena mereka menawarkan terlalu banyak fitur;  serangkaian fitur menakjubkan yang mengejutkan programmer tepat pada saat ketika ia harus berpikir jernih tentang bagaimana berkomunikasi dengan pembaca dari masa depan, dengan siapa yang akan melihat majalah ini. <br><br>  Saya berpendapat bahwa paket log yang sukses membutuhkan fitur yang jauh lebih sedikit dan, tentu saja, lebih sedikit level. <br><a name="habracut"></a><br><h2>  Mari kita bicara tentang peringatan (PERINGATAN) </h2><br>  Mari kita mulai dengan yang paling sederhana.  Tidak ada yang membutuhkan level PERINGATAN log (peringatan). <br><br>  Tidak ada yang membaca peringatan, karena menurut definisi tidak ada hal buruk yang terjadi.  Mungkin ada sesuatu yang salah di masa depan, tetapi kedengarannya seperti orang lain, bukan masalah saya. <br><br>  Selain itu, jika Anda menggunakan semacam multi-level logging, mengapa Anda perlu mengatur level PERINGATAN?  Anda akan mengatur level ke INFO atau ERROR.  Mengatur level PERINGATAN berarti Anda mungkin melaporkan kesalahan di tingkat PERINGATAN. <br><br>  Kecualikan tingkat peringatan - ini adalah pesan informasi, atau kesalahan. <br><br><h2>  Mari kita bicara tentang tingkat kesalahan fatal </h2><br>  Level FATAL sebenarnya mencatat pesan, dan kemudian memanggil os.Exit (1).  Pada prinsipnya, ini berarti: <br><br><ul><li>  ekspresi yang ditangguhkan dalam rutinitas lain (goroutine) tidak dieksekusi; </li><li>  buffer tidak memerah; </li><li>  file dan direktori sementara tidak dihapus. </li></ul><br>  Intinya, log. Fatal kurang verbose, tetapi secara semantik setara dengan panik. <br><br>  Secara umum diterima bahwa perpustakaan tidak boleh menggunakan panic1, tetapi jika memanggil log.Fatal2 memiliki efek yang sama, itu juga harus dinonaktifkan. <br><br>  Asumsi bahwa masalah pembersihan ini dapat diselesaikan dengan mendaftarkan penangan shutdown di logger memberikan hubungan yang erat antara logger yang digunakan dan setiap tempat di mana operasi pembersihan terjadi.  Itu juga melanggar pemisahan kepentingan. <br><br>  Jangan merekam pesan dengan tingkat FATAL, lebih suka mengembalikan kesalahan ke pemanggil.  Jika kesalahan mencapai main.main, maka ini adalah tempat yang tepat untuk melakukan pembersihan sebelum menutup program. <br><br><h2>  Mari kita bicara tentang kesalahan (tingkat KESALAHAN) </h2><br>  Penanganan kesalahan dan pencatatan terkait erat, oleh karena itu, sekilas, pencatatan tingkat kesalahan (ERROR) harus mudah dibenarkan.  Saya tidak setuju. <br><br>  Di Go, jika memanggil fungsi atau metode mengembalikan nilai kesalahan, maka Anda benar-benar memiliki dua opsi: <br><br><ul><li>  menangani kesalahan. </li><li>  mengembalikan kesalahan ke peneleponnya.  Anda dapat dengan indah membungkus kesalahan dalam pembungkusan hadiah (pembungkus), tetapi ini tidak penting untuk diskusi ini. </li></ul><br>  Jika Anda memutuskan untuk memproses kesalahan dengan menulisnya ke log, maka menurut definisi itu bukan lagi kesalahan - Anda telah memprosesnya.  Tindakan mendaftarkan kesalahan itu sendiri adalah pemrosesan kesalahan, oleh karena itu, tidak lagi disarankan untuk menuliskannya ke log sebagai kesalahan. <br><br>  Biarkan saya meyakinkan Anda dengan potongan kode ini: <br><br><pre><code class="go hljs">err := somethingHard() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Error(<span class="hljs-string"><span class="hljs-string">"oops, something was too hard"</span></span>, err) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err <span class="hljs-comment"><span class="hljs-comment">// what is this, Java ? }</span></span></code> </pre> <br>  Anda tidak boleh mendaftarkan apa pun di tingkat kesalahan karena Anda harus menangani kesalahan atau meneruskannya ke pemanggil. <br><br>  Anda perlu memahami dengan jelas, saya tidak mengatakan bahwa Anda tidak boleh menulis ke log bahwa telah terjadi perubahan status: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err := planA(); err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Infof(<span class="hljs-string"><span class="hljs-string">"could't open the foo file, continuing with plan b: %v"</span></span>, err) planB() }</code> </pre><br>  Namun pada kenyataannya, log.Info dan log.Error memiliki tujuan yang sama. <br><br>  Saya tidak mengatakan "jangan daftar kesalahan"!  Sebagai gantinya, saya mengajukan pertanyaan, apakah API sekecil mungkin untuk logging?  Dan ketika datang ke kesalahan, saya percaya bahwa sebagian besar hal yang dicatat di tingkat ERROR dilakukan hanya karena mereka terkait dengan kesalahan.  Bahkan, mereka hanya informatif, sehingga kami dapat menghapus logging tingkat kesalahan (ERROR) dari API kami. <br><br><h2>  Apa yang tersisa </h2><br>  Kami mengecualikan PERINGATAN, berpendapat bahwa tidak ada yang harus dicatat pada tingkat kesalahan (ERROR), dan menunjukkan bahwa hanya aplikasi tingkat atas yang harus memiliki semacam log. Perilaku fatal.  Apa yang tersisa <br><br>  Saya percaya bahwa hanya ada dua hal yang harus Anda masuki: <br><br><ul><li>  hal-hal yang diperhatikan pengembang ketika mereka mengembangkan atau men-debug suatu program; </li><li>  hal-hal yang diperhatikan pengguna saat menggunakan program Anda. </li></ul><br>  Jelas, ini adalah level debugging (DEBUG) dan informasi (INFO), masing-masing. <br><br>  log.Info seharusnya menulis baris ini ke output log.  Seharusnya tidak mungkin untuk menonaktifkannya, karena pengguna hanya harus memberi tahu apa yang bermanfaat baginya.  Jika terjadi kesalahan yang tidak dapat diproses, itu akan muncul di main.main di mana program keluar.  Ketidaknyamanan kecil karena harus memasukkan awalan FATAL sebelum pesan log akhir atau menulis langsung ke os.Stderr menggunakan fmt.Fprintf bukan alasan yang cukup untuk memperluas paket dengan metode log.Fatal. <br><br>  log. Debug, ini masalah yang sama sekali berbeda.  Pengembang atau teknisi pendukung memerlukannya untuk mengontrol program.  Selama pengembangan, ekspresi debug harus banyak tanpa beralih ke level jejak atau debug2 (Anda tahu siapa Anda).  Paket logging harus mendukung kontrol granular untuk mengaktifkan atau menonaktifkan ekspresi debug, untuk paket yang diinginkan dalam paket, atau bahkan mungkin dalam lingkup yang lebih sempit. <br><br><h2>  Kesimpulan </h2><br>  Jika itu adalah jajak pendapat Twitter, saya akan meminta Anda untuk memilih di antara <br><br><ul><li>  penebangan itu penting </li><li>  logging sulit </li></ul><br>  Tetapi kenyataannya adalah bahwa penebangan keduanya.  Solusi untuk masalah ini HARUS untuk menghancurkan dan tanpa ampun mengurangi gangguan yang tidak perlu. <br><br>  Apa yang kamu pikirkan  Apakah itu cukup boros untuk bekerja, atau itu hanya boros? <br><br><h2>  Catatan </h2><br>  Beberapa perpustakaan mungkin menggunakan panik / memulihkan sebagai mekanisme aliran kontrol internal, tetapi mantra utama adalah bahwa mereka tidak boleh membiarkan operasi aliran kontrol ini bocor keluar dari batas paket. <br><br>  Ironisnya, meskipun tidak memiliki tingkat output DEBUG, paket Go logging standar memiliki fitur Fatal dan Panic.  Dalam paket ini, jumlah fungsi yang menyebabkan penghentian program mendadak melebihi jumlah yang tidak. <br><br><h2>  Tentang penulis </h2><br>  Penulis artikel ini, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dave Cheney</a> , adalah penulis banyak paket populer untuk Go, misalnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/pkg/errors</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://github.com/davecheney/">github.com/davecheney/httpstat</a> .  Anda dapat mengevaluasi sendiri otoritas dan pengalaman penulis. <br><br><h2>  Dari penerjemah </h2><br>  Banyak pengembang khawatir tentang pencatatan, beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mendiskusikan</a> penambahan antarmuka Logger ke pustaka Go standar untuk merampingkan pencatatan dalam pustaka dan merangsang pengembang mereka.  Para lelaki bahkan menyusun proposal mereka dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menyiapkan kertas</a> untuk diskusi. <br><br>  Ditambah refleksi presentasi. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apakah kita perlu logger baru dan apa yang seharusnya?</a>  dari Chris Hines. <br><br>  Ada beberapa implementasi gagasan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">go-log</a> Dave dan sedikit di luar topik tentang masalah tingkat ERROR dan paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">logr yang</a> lebih rumit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440200/">https://habr.com/ru/post/id440200/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440188/index.html">Mencapai Bintang: Menguasai Operator yang Mungkin untuk Mengelola Aplikasi di Kubernetes</a></li>
<li><a href="../id440190/index.html">Berkenalan dengan jaringan saraf paling sederhana dan penerapannya selangkah demi selangkah</a></li>
<li><a href="../id440192/index.html">Bagaimana kita membuat radio perusahaan untuk kita</a></li>
<li><a href="../id440196/index.html">Rahasia Pikiran dan Matematika</a></li>
<li><a href="../id440198/index.html">Printer 3D DWS Baru untuk Profesional</a></li>
<li><a href="../id440202/index.html">Kontrol Proaktif OWASP: Daftar Prasyarat untuk Pengembang Perangkat Lunak</a></li>
<li><a href="../id440204/index.html">Hobi DIY CNC router. Humaniora untuk Humaniora</a></li>
<li><a href="../id440206/index.html">Umbi “Sepanjang tahun”</a></li>
<li><a href="../id440208/index.html">Menjelajahi batas bandwidth Kafka di Dropbox</a></li>
<li><a href="../id440210/index.html">Pendekatan mesin-sinestetik untuk mendeteksi serangan jaringan DDoS. Bagian 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>