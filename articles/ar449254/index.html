<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐ง๐พ ๐ค๐ผ ุงูุชุนูููุงุช ุนูู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ูุงูุนูู ููููุชุงูุชู ๐ฐ๐ฟ ๐คพ๐ฟ ๐ช</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุงุฑูุฎ ููููุชุงูุชู ููุฌูุฏ ุนูู ููููุจูุฏูุง ุ ููุฏ ุฃุฎุจุฑู ุจุงููู ููุณู. ูุจุฏู ุฃู ุงูุฌููุน ูุนุฑููุง ุจุงููุนู. ุชุญุฏุซ ุจุงูู ุนู ุงูุฏูุงุฎู ุ ูุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ูุชุตููู ุงููููุน ุนูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุชุนูููุงุช ุนูู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ูุงูุนูู ููููุชุงูุชู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/449254/" style=";text-align:right;direction:rtl">  ุชุงุฑูุฎ ููููุชุงูุชู ููุฌูุฏ ุนูู ููููุจูุฏูุง ุ ููุฏ ุฃุฎุจุฑู ุจุงููู ููุณู.  ูุจุฏู ุฃู ุงูุฌููุน ูุนุฑููุง ุจุงููุนู.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุญุฏุซ</a> ุจุงูู ุนู ุงูุฏูุงุฎู ุ ูุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ูุชุตููู ุงููููุน ุนูู HighLoad ++ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑุฉ ุฃุฎุฑู ูู ุนุงู 2010</a> .  ุชุณุฑุจุช ุงููุซูุฑ ูู ุงูุฎูุงุฏู ููุฐ ุฐูู ุงูุญูู ุ ูุฐูู ุณูููู ุจุชุญุฏูุซ ุงููุนูููุงุช: ูููู ุจุชุดุฑูุญ ุ ูุณุญุจ ุงูุฏูุงุฎู ุ ูุงููุฒู - ูุญู ููุธุฑ ุฅูู ุฌูุงุฒ VK ูู ูุฌูุฉ ูุธุฑ ุชูููุฉ. <br><br><img src="https://habrastorage.org/webt/_x/zc/wp/_xzcwpb5ze_4e-yx_jw_-8nvnei.jpeg"><br><br>  <strong>ุฃูููุณู ุฃููููููุชุด</strong> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">AterCattus</a> ) ูู ูุทูุฑ ุฎูููุฉ ูู ูุฑูู ููููุชุงูุชู.  ูุต ูุฐุง ุงูุชูุฑูุฑ ูู ุฅุฌุงุจุฉ ุฌูุงุนูุฉ ููุฃุณุฆูุฉ ุงููุชุฏุงููุฉ ุญูู ุชุดุบูู ุงููุธุงู ุงูุฃุณุงุณู ูุงูุจููุฉ ุงูุชุญุชูุฉ ูุงูุฎูุงุฏู ูุงูุชูุงุนู ุจููููุง ุ ูููู ููุณ ุญูู ุงูุชุทููุฑ ุ ูุชุญุฏูุฏุงู <strong>ุญูู ุงูุฃุฌูุฒุฉ</strong> .  ุจุดูู ูููุตู - ุญูู ููุงุนุฏ ุงูุจูุงูุงุช ููุง VK ูู ููุงููุง ุ ุญูู ุฌูุน ุงูุณุฌูุงุช ููุฑุงูุจุฉ ุงููุดุฑูุน ุจุฃูููู ููู.  ุงูุชูุงุตูู ุชุญุช ุฎูุถ. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_GqcriadL-s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  ููุฐ ุฃูุซุฑ ูู ุฃุฑุจุน ุณููุงุช ุ ููุช ุฃููู ุจุฌููุน ุฃููุงุน ุงูููุงู ุงููุชุนููุฉ ุจุงููุงุฌูุฉ ุงูุฎูููุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุชูุฒูู ูุชุฎุฒูู ููุนุงูุฌุฉ ูุชูุฒูุน ุงููุณุงุฆุท: ุงูููุฏูู ุ ุงูุจุซ ุงููุจุงุดุฑ ุ ุงูุตูุช ุ ุงูุตูุฑ ุ ุงููุณุชูุฏุงุช. </li><li style=";text-align:right;direction:rtl">  ุจููุฉ ุฃุณุงุณูุฉ ุ ููุตุฉ ุ ูุฑุงูุจุฉ ูุทูุฑ ุ ุณุฌูุงุช ุ ูุฎุงุจุฆ ุฅูููููุฉ ุ CDN ุ ุจุฑูุชูููู RPC ุฎุงุต. </li><li style=";text-align:right;direction:rtl">  ุงูุชูุงูู ูุน ุงูุฎุฏูุงุช ุงูุฎุงุฑุฌูุฉ: ุงูุฏูุน ุนุจุฑ ุงูุจุฑูุฏ ุ ุชุญููู ุงูุฑูุงุจุท ุงูุฎุงุฑุฌูุฉ ุ ุชุบุฐูุฉ RSS. </li><li style=";text-align:right;direction:rtl">  ุณุงุนุฏ ุงูุฒููุงุก ูู ุงูุนุฏูุฏ ูู ุงููุถุงูุง ุ ููุญุตูู ุนูู ุงูุฅุฌุงุจุงุช ุงูุชู ูุฌุจ ุนููู ุฃู ุชุบูุต ูู ุฑูุฒ ุบูุฑ ูุนุฑูู. </li></ul><br>  ุฎูุงู ูุฐุง ุงูููุช ุ ูุงู ูู ูุฏ ูู ุงูุนุฏูุฏ ูู ููููุงุช ุงููููุน.  ุฃุฑูุฏ ุฃู ุฃุดุงุฑู ูุฐู ุงูุชุฌุฑุจุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุนูุงุฑุฉ ุงูุนุงูุฉ </h2><br>  ูู ุดูุก ุ ูุงูุนุงุฏุฉ ุ ูุจุฏุฃ ุจุฎุงุฏู ุฃู ูุฌููุนุฉ ูู ุงูุฎูุงุฏู ุงูุชู ุชูุจู ุงูุทูุจุงุช. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฎุงุฏู ุงูุฃูุงูู </h3><br>  ููุจู ุงูุฎุงุฏู ุงูุฃูุงูู ุงูุทูุจุงุช ุนุจุฑ HTTPS ู RTMP ู WSS. <br><br>  <strong>HTTPS</strong> ูู ุทูุจุงุช ูุฅุตุฏุงุฑุงุช ุงูููุจ ุงูุฑุฆูุณูุฉ ูุงูุฌููุงูุฉ ูููููุน: vk.com ู m.vk.com ุ ูุบูุฑููุง ูู ุงูุนููุงุก ุงูุฑุณูููู ูุบูุฑ ุงูุฑุณูููู ููุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุฏููุง: ุนููุงุก ุงูุฌูุงู ุ ูุงููุฑุงุณููู ุงูููุฑููู.  ูุฏููุง ุญุฑูุฉ ูุฑูุฑ <strong>RTMP</strong> ููุจุซ ุงููุจุงุดุฑ ูุน ุฎูุงุฏู ุฃูุงููุฉ ูููุตูุฉ ูุงุชุตุงูุงุช <strong>WSS</strong> ููุงุฌูุฉ ุงูุจุซ ุงููุจุงุดุฑ. <br><br>  ุจุงููุณุจุฉ ุฅูู HTTPS ู WSS ุ <strong>ูุชู</strong> ุชุซุจูุช <strong>nginx</strong> ุนูู ุงูุฎูุงุฏู.  ุจุงููุณุจุฉ ุฅูู ุนูููุงุช ุงูุจุซ RTMP ุ ุงูุชูููุง ูุคุฎุฑูุง ุฅูู ุญู <strong>kive</strong> ุงูุฎุงุต <strong>ุจูุง</strong> ุ ููููู ูุชุฌุงูุฒ ูุทุงู ุงูุชูุฑูุฑ.  ููุชุณุงูุญ ูุน ุงูุฃุฎุทุงุก ุ ุชุนูู ูุฐู ุงูุฎูุงุฏู ุนู ุนูุงููู IP ูุดุชุฑูุฉ ูุชุนูู ููุฌููุนุงุช ุจุญูุซ ูู ุญุงูุฉ ูุฌูุฏ ูุดููุฉ ุนูู ุฃุญุฏ ุงูุฎูุงุฏู ุ ูุง ุชุถูุน ุทูุจุงุช ุงููุณุชุฎุฏู.  ุจุงููุณุจุฉ ุฅูู HTTPS ู WSS ุ ุชููู ููุณ ุงูุฎูุงุฏู ุจุชุดููุฑ ุญุฑูุฉ ุงููุฑูุฑ ูููุดุงุฑูุฉ ูู ุชุญููู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ููุณูุง. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ูุชุญุฏุซ ุนู WSS ู RTMP ุ ูููู ููุท ุนู ุทูุจุงุช HTTPS ุงูููุงุณูุฉ ุ ูุงูุชู ุชุฑุชุจุท ุนุงุฏุฉู ุจูุดุฑูุน ููุจ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฎูููุฉ </h3><br>  ูุฑุงุก ุงูุฌุจูุฉ ูุนุงุฏุฉ ูุง ุชููู ุฎูุงุฏู ุงูุฎูููุฉ.  ูุนุงูุฌูู ุงูุทูุจุงุช ุงูุชู ูุชููุงูุง ุงูุฎุงุฏู ุงูุฃูุงูู ูู ุงูุนููุงุก. <br><br>  ูุฐู <strong>ุฎูุงุฏู kPHP</strong> ุชููู ุจุชุดุบูู ุงูุจุฑูุงูุฌ ุงูุฎูู HTTP ูุฃู HTTPS ูุฏ ุชู ูู ุชุดููุฑู ุจุงููุนู.  kPHP ูู ุฎุงุฏู ูุนูู ููููุง <strong>ูุทุฑุงุฒ prefork</strong> : ููู ูุจุฏุฃ ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ ููุฌููุนุฉ ูู ุงูุนูููุงุช ุงููุฑุนูุฉ ูููุฑุฑ ูุขุฎุฐ ุงูุงุณุชูุงุน ุฅูููู ููููููู ุจูุนุงูุฌุฉ ุทูุจุงุชูู.  ูู ุงูููุช ููุณู ุ ูุง ุชุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูููุงุช ุจูู ูู ุทูุจ ูู ุงููุณุชุฎุฏู ุ ูููู ุจุจุณุงุทุฉ ุฅุนุงุฏุฉ ุชุนููู ุญุงูุชูุง ุฅูู ุญุงูุฉ ุงููููุฉ ุงูุตูุฑูุฉ ุงูุฃูููุฉ - ุทูุจ ุญุณุจ ุงูุทูุจ ุ ุจุฏูุงู ูู ุฅุนุงุฏุฉ ุงูุชุดุบูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุชูุงุณู ุงูุญูู </h4><br>  ููุณุช ุฌููุน ุฃุนูุงููุง ุงูุฎูููุฉ ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูุขูุงุช ุงูุชู ูููููุง ุงูุชุนุงูู ูุน ุฃู ุทูุจ.  <strong>ููุณููู ุฅูู ูุฌููุนุงุช ูููุตูุฉ</strong> : ุนุงูุฉ ุ ูุชุญุฑูุฉ ุ api ุ ููุฏูู ุ ุงูุทูุงู ... ูู ุชุคุซุฑ ุงููุดููุฉ ุนูู ูุฌููุนุฉ ูููุตูุฉ ูู ุงูุฃุฌูุฒุฉ ุนูู ุฃู ุดุฎุต ุขุฎุฑ.  ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู ูู ุงูููุฏูู ุ ูุฅู ุงููุณุชุฎุฏู ุงูุฐู ูุณุชูุน ุฅูู ุงูููุณููู ูุง ูุนุฑู ุญุชู ูุฐู ุงููุดููุงุช.  ุฃู ุงููุงุฌูุฉ ุงูุฎูููุฉ ูุฅุฑุณุงู ุงูุทูุจ ุฅูู ูุชู ุญููุง ุจูุงุณุทุฉ nginx ุนูู ุงูููุฏูุฉ ูู ุงูุชูููู. <br><br><h4 style=";text-align:right;direction:rtl">  ุฌูุน ุงูููุงุณุงุช ูุฅุนุงุฏุฉ ุงูุชูุงุฒู </h4><br>  ูููู ุนุฏุฏ ุงูุณูุงุฑุงุช ุงูุชู ุชุญุชุงุฌูุง ูู ูู ูุฌููุนุฉ ุ ูุญู <strong>ูุง ูุนุชูุฏ ุนูู QPS</strong> .  ุฎูููุฉ ูุฎุชููุฉ ุ ูุฏููู ุทูุจุงุช ูุฎุชููุฉ ุ ูู ุทูุจ ูุฏูู ุชุนููุฏ ุญุณุงุจ QPS ูุฎุชููุฉ.  ูุฐูู ุ ูุญู ูุณุชุฎุฏู <strong>ููููู ุงูุญูู ุนูู ุงูุฎุงุฏู ููู - ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ู perf</strong> . <br><br>  ูุฏููุง ุงูุขูุงู ูู ูุฐู ุงูุฎูุงุฏู.  ุชุนูู ูุฌููุนุฉ kPHP ุนูู ูู ุฎุงุฏู ูุนูู ููุงุณุชูุงุฏุฉ ูู ุฌููุน ุงูููุงุฉ (ูุฃู kPHP ูุชุฑุงุจุท ูุงุญุฏ). <br><br><h3 style=";text-align:right;direction:rtl">  ุฎุงุฏู ุงููุญุชูู </h3><br>  <strong>CS ุฃู ุฎุงุฏู ุงููุญุชูู ูู ุงูุชุฎุฒูู</strong> .  CS ูู ุฎุงุฏู ูููู ุจุชุฎุฒูู ุงููููุงุช ุ ููุฐูู ูุนุงูุฌ ุงููููุงุช ุงูุชู ุชู ุชุญููููุง ุ ูุฌููุน ุฃููุงุน ููุงู ุงูุฎูููุฉ ุงููุชุฒุงููุฉ ุงูุชู ุชูุซููุง ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ููููุจ ุงูุฑุฆูุณูุฉ. <br><br>  ูุฏููุง ุนุดุฑุงุช ุงูุขูุงู ูู ุงูุฎูุงุฏู ุงููุนููุฉ ุงูุชู ุชุฎุฒู ุงููููุงุช.  ูุญุจ ุงููุณุชุฎุฏููู ุชุญููู ุงููููุงุช ุ ููุญู ูุญุจ ุชุฎุฒูููุง ููุดุงุฑูุชูุง.  ูุชู ุฅุบูุงู ุจุนุถ ูุฐู ุงูุฎูุงุฏู ุจูุงุณุทุฉ ุฎูุงุฏู pu / pp ุงูุฎุงุตุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุจู / ุต </h3><br>  ุฅุฐุง ููุช ุจูุชุญ ุนูุงูุฉ ุชุจููุจ ุงูุดุจูุฉ ูู VK ุ ูุนูุฏุฆุฐ ุฑุฃูุช pu / pp. <br><br><img src="https://habrastorage.org/webt/fd/am/xo/fdamxolkfxlplnc5h5flbihru3g.png"><br><br>  ูุง ูู ุจู / ุตุ  ุฅุฐุง ูููุง ุจุฅุบูุงู ุฎุงุฏู ูุงุญุฏ ุชูู ุงูุขุฎุฑ ุ ูููุงู ุฎูุงุฑุงู ูุชุญููู ูุชูุฒูู ููู ุฅูู ุฎุงุฏู ุชู ุฅุบูุงูู: <strong>ูุจุงุดุฑุฉ ูู</strong> ุฎูุงู <code>http://cs100500.userapi.com/path</code> ุฃู ูู <strong>ุฎูุงู ุฎุงุฏู ูุณูุท</strong> - <code>http://pu.vk.com/c100500/path</code> . <br><br>  <strong>Pu ูู ุงูุงุณู ุงูุชุงุฑูุฎู ูุชุญููู ุงูุตูุฑ ุ ู pp ูู ูููู ุงูุตูุฑ</strong> .  ููุฐุง ูู ุ ุฎุงุฏู ูุงุญุฏ ูุชุญููู ุงูุตูุฑ ุ ูุขุฎุฑ - ูุฅุนุทุงุก.  ุงูุขู ูุง ูุชู ุชุญููู ุงูุตูุฑ ููุท ุ ูููู ุชู ุงูุญูุงุธ ุนูู ุงูุงุณู. <br><br>  <strong>ุฅููุงุก</strong> ูุฐู ุงูุฎูุงุฏู <strong>ุฌูุณุงุช HTTPS</strong> ูุฅุฒุงูุฉ ุชุญููู ุงููุนุงูุฌ ูู ุงูุชุฎุฒูู.  ุฃูุถูุง ุ ูุธุฑูุง ูุฃู ูููุงุช ุงููุณุชุฎุฏู ุชุชู ูุนุงูุฌุชูุง ุนูู ูุฐู ุงูุฎูุงุฏู ุ ูุชู ุชุฎุฒูู ุงููุนูููุงุช ุงูุฃูู ุญุณุงุณูุฉ ุนูู ูุฐู ุงูุฃุฌูุฒุฉ ุ ูููุง ูุงู ุฐูู ุฃูุถู.  ุนูู ุณุจูู ุงููุซุงู ุ ููุงุชูุญ ุชุดููุฑ HTTPS. <br><br>  ูุธุฑูุง ูุฃู ุงูุขูุงุช ูุบููุฉ ูู ููุจู ุฃุฌูุฒุชูุง ุงูุฃุฎุฑู ุ ููุง ูููููุง ุชุญูู ุนุฏู ููุญูุง ุนูุงููู IP ุฎุงุฑุฌูุฉ "ุจูุถุงุก" ุ <strong>ูุฅุนุทุงุก</strong> ุนูุงููู <strong>"ุฑูุงุฏูุฉ"</strong> .  ูุฐุง ููุฏ ูููุง ุจุญูุธูุง ุนูู ุชุฌูุน IP ูุถููุง ุญูุงูุฉ ุงูุฃุฌูุฒุฉ ูู ุงููุตูู ูู ุงูุฎุงุฑุฌ - ุจุจุณุงุทุฉ ูุง ููุฌุฏ ุนููุงู IP ูููุตูู ุฅููู. <br><br>  <strong>ุฎุทุฃ ุงูุชุณุงูุญ ูู ุฎูุงู IP ุงููุดุชุฑูุฉ</strong> .  ูููุง ูุชุนูู ุจุชุณุงูุญ ุงูุฃุฎุทุงุก ุ ูุนูู ุงููุฎุทุท ุจููุณ ุงูุทุฑููุฉ - ุญูุซ ุฃู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฏู ุงููุนููุฉ ููุง ุนููุงู IP ูุนูู ูุดุชุฑู ุ ูุชุฎุชุงุฑ ูุทุนุฉ ุงูุญุฏูุฏ ุงูููุฌูุฏุฉ ุฃูุงููุง ููุงู ุฅุฑุณุงู ุงูุทูุจ.  ูู ููุช ูุงุญู ุณุฃุชุญุฏุซ ุนู ุงูุฎูุงุฑุงุช ุงูุฃุฎุฑู. <br><br>  ุงูููุทุฉ ุงููุซูุฑุฉ ููุฌุฏู ูู ุฃูู ูู ูุฐู ุงูุญุงูุฉ ุ <strong>ูุญูู ุงูุนููู ุงุชุตุงูุงุช ุฃูู</strong> .  ุฅุฐุง ูุงู ููุงู ููุณ ุนููุงู IP ุนูู ุงูุนุฏูุฏ ูู ุงูุฃุฌูุฒุฉ - ูุน ููุณ ุงููุถูู: pu.vk.com ุฃู pp.vk.com ุ ูุฅู ูุชุตูุญ ุงูุนููู ูุฏูู ุญุฏูุฏ ูุนุฏุฏ ุงูุทูุจุงุช ุงููุชุฒุงููุฉ ููุถูู ูุงุญุฏ.  ูููู ุฎูุงู HTTP / 2 ูู ูู ููุงู ุ ูุฃุนุชูุฏ ุฃู ูุฐุง ูู ูุนุฏ ูู ุงูุญุงู. <br><br>  ูุงูุต ูุงุถุญ ูููุฎุทุท ูู ุฃูู ูุฌุจ ุนููู <strong>ุถุฎ ูู ุญุฑูุฉ ุงููุฑูุฑ</strong> ุงูุชู ุชุฐูุจ ุฅูู ุงูุชุฎุฒูู ูู ุฎูุงู ุฎุงุฏู ุขุฎุฑ.  ูุธุฑูุง ูุฃููุง ูุถุฎ ุญุฑูุฉ ุงููุฑูุฑ ุนุจุฑ ุงูุณูุงุฑุงุช ุ ููุง ูููููุง ุญุชู ุงูุขู ุถุฎ ุญุฑูุฉ ุงููุฑูุฑ ุงููุซููุฉ ุจููุณ ุงูุทุฑููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูููุฏูู.  ูููููุง ูุจุงุดุฑุฉ - ุงุชุตุงู ูุจุงุดุฑ ูููุตู ูููุณุชูุฏุนุงุช ุงููุฑุฏูุฉ ุฎุตูุตูุง ููููุฏูู.  ูููู ูุญุชูู ุฃุฎู ูู ุฎูุงู ูููู. <br><br>  ููุฐ ููุช ููุณ ุจุจุนูุฏ ุ ูุฏููุง ูุณุฎุฉ ูุญุณูุฉ ูู ุงูุจุฑููุณู.  ุงูุขู ุณูู ุฃุฎุจุฑูู ููู ุชุฎุชูู ุนู ุชูู ุงูุนุงุฏูุฉ ูููุงุฐุง ูุฐุง ุถุฑูุฑู. <br><br><h3 style=";text-align:right;direction:rtl">  ุดูุณ </h3><br>  ูู ุณุจุชูุจุฑ 2017 ุ ูุงูุช ุดุฑูุฉ ุฃูุฑุงูู ุ ุงูุชู ุงุดุชุฑุช Sun ุณุงุจููุง ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุชุณุฑูุญ ุนุฏุฏ ูุจูุฑ ูู ููุธูู Sun.</a>  ูููููุง ุงูููู ุฃูู ูู ูุฐู ุงููุญุธุฉ ูู ุชุนุฏ ุงูุดุฑูุฉ ููุฌูุฏุฉ.  ุนูุฏ ุงุฎุชูุงุฑ ุงุณู ูููุธุงู ุงูุฌุฏูุฏ ุ ูุฑุฑ ูุฏุฑุงุกูุง ุชูุฑูู ูุฐู ุงูุดุฑูุฉ ูุงุญุชุฑุงููุง ุ ูุงุณูู ูุธุงู Sun ุงูุฌุฏูุฏ.  ุจูููุง ุ ูุณูููุง ุจุจุณุงุทุฉ "ุฃุดุนุฉ ุงูุดูุณ". <br><br><img src="https://habrastorage.org/webt/d3/6f/0j/d36f0jjqbwlst9mk2-lcncltkq4.png"><br><br>  ูุงู Pp ุจุนุถ ุงููุดุงูู.  <strong>IP ูุงุญุฏ ููู ูุฌููุนุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุบูุฑ ูุนุงูุฉ</strong> .  ุงูุนุฏูุฏ ูู ุงูุฎูุงุฏู ุงููุนููุฉ ููุง ุนููุงู IP ูุดุชุฑู ุ ูููุณ ููุงู ุทุฑููุฉ ููุชุญูู ูู ุงูุฎุงุฏู ุงูุฐู ุณูุฃุชู ุงูุทูุจ ุฅููู.  ูุฐูู ุ ุฅุฐุง ุฌุงุก ูุณุชุฎุฏููู ูุฎุชูููู ูููุณ ุงูููู ุ ุซู ุฅุฐุง ูุงู ููุงู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ุนูู ูุฐู ุงูุฎูุงุฏู ุ ูุฅู ุงูููู ูุณุชูุฑ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููู ุฎุงุฏู.  ูุฐุง ูุฎุทุท ุบูุฑ ูุนุงู ููุบุงูุฉ ุ ููู ูุง ูููู ูุนู ุดูุก. <br><br>  ูุชูุฌุฉู ูุฐูู ุ <strong>ูุง ูููููุง ูุดุงุฑูุฉ ุงููุญุชูู</strong> ุ ูุฃูู ูุง ูููููุง ุชุญุฏูุฏ ุฎุงุฏู ูุนูู ููุฐู ุงููุฌููุนุฉ - ูุฏููู ุนููุงู IP ูุดุชุฑู.  ุฃูุถูุง ุ ูุจุนุถ ุงูุฃุณุจุงุจ ุงูุฏุงุฎููุฉ ุ <strong>ูู ุชุชุญ ููุง ุงููุฑุตุฉ ููุถุน ูุซู ูุฐู ุงูุฎูุงุฏู ูู ุงูููุงุทู</strong> .  ูููุช ููุท ูู ุณุงู ุจุทุฑุณุจุฑุฌ. <br><br>  ูุน ุงูุดููุณ ุ ูููุง ุจุชุบููุฑ ูุธุงู ุงูุงุฎุชูุงุฑ.  ุงูุขู ูุฏููุง <strong>ุงูุชูุฌูู anycast</strong> : <strong>ุงูุชูุฌูู</strong> ุงูุฏููุงูููู ุ anycast ุ ุงูุดูุทุงู ุงูุงุฎุชูุงุฑ ุงูุฐุงุชู.  ูู ุฎุงุฏู ูุฏูู IP ุงููุฑุฏูุฉ ุงูุฎุงุตุฉ ุจู ุ ูููู ูู ุงูููุช ููุณู ุดุจูุฉ ูุฑุนูุฉ ูุดุชุฑูุฉ.  ุชู ุชูููู ูู ุดูุก ุจุทุฑููุฉ ุจุญูุซ ูู ุญุงูุฉ ููุฏุงู ุฎุงุฏู ูุงุญุฏ ุ ุชูุชุดุฑ ุญุฑูุฉ ุงููุฑูุฑ ุฅูู ุฎูุงุฏู ุฃุฎุฑู ูู ููุณ ุงููุฌููุนุฉ ุชููุงุฆููุง.  ูู ุงููููู ุงูุขู ุชุญุฏูุฏ ุฎุงุฏู ูุนูู ุ <strong>ููุง ุชูุฌุฏ ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ููุฑุทุฉ</strong> ุ ููุง ุชุชุฃุซุฑ ุงูููุซูููุฉ. <br><br>  <strong>ุฏุนู ุงููุฒู</strong> .  ุงูุขู ูููููุง ุฃู ูุถุน ุงูุณูุงุฑุงุช ุฐุงุช ุงูุณุนุงุช ุงููุฎุชููุฉ ุญุณุจ ุงูุถุฑูุฑุฉ ุ ูุฃูุถูุง ูู ุญุงูุฉ ุญุฏูุซ ูุดุงูู ูุคูุชุฉ ุ ูู ุจุชุบููุฑ ุฃูุฒุงู "ุดูุณ" ุงูุนุงููุฉ ูุชูููู ุงูุญูู ุนูููุง ุญุชู "ุชุณุชุฑูุญ" ูุชุนูู ูุฑุฉ ุฃุฎุฑู. <br><br>  <strong>ุงููุดุงุฑูุฉ ุจูุงุณุทุฉ ูุนุฑู ุงููุญุชูู</strong> .  ุงูุฃูุฑ ุงููุถุญู ูู ุงููุดุงุฑูุฉ ูู ุฃููุง ุนุงุฏุฉู ูุง ูููู ุจูุดุงุฑูุฉ ุงููุญุชูู ุจุญูุซ ูุชุจุน ุงููุณุชุฎุฏููู ุงููุฎุชูููู ููุณ ุงูููู ูู ุฎูุงู ููุณ "ุงูุดูุณ" ุจุญูุซ ูููู ูุฏููู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูุดุชุฑูุฉ. <br><br>  ุฃุทูููุง ูุคุฎุฑูุง ุชุทุจูู Clover.  ูุฐุง ุงุฎุชุจุงุฑ ุจุซ ูุจุงุดุฑ ุนุจุฑ ุงูุฅูุชุฑูุช ุญูุซ ูููู ููุฏู ุงูุนุฑุถ ุจุทุฑุญ ุงูุฃุณุฆูุฉ ููุณุชุฌูุจ ุงููุณุชุฎุฏููู ูู ุงูููุช ุงููุนูู ุนู ุทุฑูู ุงุฎุชูุงุฑ ุงูุฎูุงุฑุงุช.  ุงูุชุทุจูู ูุญุชูู ุนูู ุฏุฑุฏุดุฉ ุญูุซ ูููู ูููุณุชุฎุฏููู ุงูููุถุงูุงุช.  <strong>ูููู ูุฃูุซุฑ ูู 100 ุฃูู ุดุฎุต</strong> ุงูุงุชุตุงู ูู ููุช ูุงุญุฏ ููุจุซ.  ุงููู ุฌููุนุง ูุชุงุจุฉ ุงูุฑุณุงุฆู ุงูุชู ูุชู ุฅุฑุณุงููุง ุฅูู ุฌููุน ุงููุดุงุฑููู ุ ุฌูุจุง ุฅูู ุฌูุจ ูุน ุงูุฑุณุงูุฉ ูุฃุชู ุงูุฑูุฒูุฉ ุขุฎุฑ.  ุฅุฐุง ูุงู 100 ุฃูู ุดุฎุต ูุฃุชูู ูู ุฃุฌู ุตูุฑุฉ ุฑูุฒูุฉ ูุงุญุฏุฉ ูู "ุดูุณ" ูุงุญุฏุฉ ุ ููููููุง ุฃุญูุงููุง ุงูุชูุฑูุฑ ููู ุณุญุงุจุฉ. <br><br>  ูููุงููุฉ ุฑุดูุงุช ูู ุงูุทูุจุงุช ูู ููุณ ุงูููู ุ ูุฅููุง ูุถูู ูุธุงููุง ุบุจููุง ููุดุฑ ุงููููุงุช ุนุจุฑ ุฌููุน "suns" ุงููุชููุฑุฉ ูู ุงูููุทูุฉ ุ ูุฐูู ูู ุฃุฌู ููุน ูุง ูู ุงููุญุชูู. <br><br><h4 style=";text-align:right;direction:rtl">  ุงูุดูุณ ูู ุงูุฏุงุฎู </h4><br>  ุนูุณ ุงููููู ุฅูู nginx ุฃู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ุงูุฃูุฑุงุต RAM ุฃู Optane / NVMe ุงูุณุฑูุนุฉ.  ูุซุงู: <code>http://sun4-2.userapi.com/c100500/path</code> - ุฑุงุจุท ุฅูู "ุงูุดูุณ" ุ ูุงูุชู ูู ูู ุงูููุทูุฉ ุงูุฑุงุจุนุฉ ุ ูุฌููุนุฉ ุงูุฎูุงุฏู ุงูุซุงููุฉ.  ูุชู ุฅุบูุงู ููู ุงููุณุงุฑ ุ ูุงูุฐู ููุน ูุนูููุง ุนูู ุงูุฎุงุฏู 100500. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฎุจุฃ </h3><br>  ูุถูู ุนูุฏุฉ ุฃุฎุฑู ุฅูู ูุฎุทุทูุง ุงููุนูุงุฑู - ุจูุฆุฉ ุงูุชุฎุฒูู ุงููุคูุช. <br><br><img src="https://habrastorage.org/webt/jp/4p/xv/jp4pxvydhstms-z9bpbmpjy0htk.png"><br><br>  ููุฌุฏ ุฃุฏูุงู ุชุฎุทูุท <strong>ูููุฎุงุจุฆ ุงูุฅูููููุฉ</strong> ุ ููุฌุฏ ุญูุงูู 20 ูููุง.  ูุฐู ูู ุงูุฃูุงูู ุงูุชู ุชูุฌุฏ ุจูุง ุจุงูุถุจุท ุฐุงูุฑุงุช ุงูุชุฎุฒูู ุงููุคูุช ู "suns" ุ ูุงูุชู ูููู ุฃู ุชุฎุจุฆ ุญุฑูุฉ ุงููุฑูุฑ ุนุจุฑูุง. <br><br><img src="https://habrastorage.org/webt/yh/9i/qk/yh9iqkv3dyqd3uox9wgd2cmgqba.png"><br><br>  ูุฐุง ูู ุงูุชุฎุฒูู ุงููุคูุช ููุญุชูู ุงููุณุงุฆุท ุงููุชุนุฏุฏุฉ ุ ูุง ูุชู ุชุฎุฒูู ุจูุงูุงุช ุงููุณุชุฎุฏู ููุง - ููุท ุงูููุณููู ูุงูููุฏูู ูุงูุตูุฑ. <br><br>  ูุชุญุฏูุฏ ููุทูุฉ ุงููุณุชุฎุฏู ุ ูููู <strong>ุจุชุฌููุน ุจุงุฏุฆุงุช ุดุจูุฉ BGP ุงููุนููุฉ ูู ุงูููุงุทู</strong> .  ูู ุญุงูุฉ ุงูุงุณุชุนุงุถุฉ ุ ูุง ูุฒุงู ูุฏููุง ุชุญููู ููุงุนุฏุฉ geoip ุ ุฅุฐุง ูู ูุชููู ูู ุงูุนุซูุฑ ุนูู IP ุจูุงุณุทุฉ ุงูุจุงุฏุฆุงุช.  <strong>ุจูุงุกู ุนูู ุนููุงู IP ุงูุฎุงุต ุจุงููุณุชุฎุฏู ุ ูุญุฏุฏ ุงูููุทูุฉ</strong> .  ูู ุงูููุฏ ุ ูููููุง ุฃู ููุธุฑ ุฅูู ููุทูุฉ ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ูู ุงููุณุชุฎุฏู - ุชูู ุงูููุงุท ุงูุชู ูู ุงูุฃูุฑุจ ุฌุบุฑุงููุง ุฅูููุง. <br><br><h4 style=";text-align:right;direction:rtl">  ููู ูุนููุ </h4><br>  <strong>ูุญู ูุนุชุจุฑ ุดุนุจูุฉ ุงููููุงุช ุญุณุจ ุงูููุทูุฉ</strong> .  ููุฌุฏ ุฑูู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ุฅูููููุฉ ุญูุซ ููุฌุฏ ุงููุณุชุฎุฏู ููุนุฑู ููู - ูุฃุฎุฐ ูุฐุง ุงูุฒูุฌ ููุฒูุฏ ุงูุชุตููู ููู ุชูุฒูู. <br><br>  ูู ุงูููุช ููุณู ุ ุชุฃุชู ุงูุดูุงุทูู - ุงูุฎุฏูุงุช ูู ุงูููุงุทู - ูู ููุช ูุขุฎุฑ ุฅูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ููููู: "ูุฏู ูุซู ูุฐู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฐู ุ ุฃุนุทูู ูุงุฆูุฉ ุจุฃูุซุฑ ุงููููุงุช ุดููุนูุง ูู ููุทูุชู ุงูุชู ูู ุฃูุชูููุง ุจุนุฏ."  ููุฏู API ูุฌููุนุฉ ูู ุงููููุงุช ูุฑุชุจุฉ ุญุณุจ ุงูุชุตููู ุ ููููู ุงูุจุฑูุงูุฌ ุงูุฎูู ุจุถุฎูุง ูููููุง ุฅูู ุงูููุงุทู ููุนุทููุง ูููุงุช ูู ููุงู.  ูุฐุง ูู ุงููุฑู ุงูุฃุณุงุณู ุจูู pu / pp ู Sun ูู ุฐุงูุฑุงุช ุงูุชุฎุฒูู ุงููุคูุช: ููู ูุนุทูู ุงูููู ูู ุฎูุงู ุฃููุณูู ููุฑูุง ุ ุญุชู ูู ูู ููู ุงูููู ููุฌูุฏูุง ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ุจูููุง ุชููู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฃููุงู ุจุถุฎ ุงูููู ูููุณูุง ุ ุซู ูุจุฏุฃ ูู ุฅุนุทุงุฆู ุงูููู. <br><br>  ูู ุงูููุช ููุณู ุ ูุญุตู ุนูู <strong>ูุญุชูู ุฃูุฑุจ ูููุณุชุฎุฏููู</strong> ููููุฏ ุนุจุก ุงูุดุจูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ููุท ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุณูู ูููู ุจุชูุฒูุน ุฃูุซุฑ ูู 1 ุชูุฑุง ุจุงูุช / ุซุงููุฉ ุฎูุงู ุณุงุนุงุช ุงูุงุฒุฏุญุงู. <br><br>  ูููู ููุงู ูุดุงูู - <strong>ุฎูุงุฏู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุณุช ูุทุงุทูุฉ</strong> .  ูููุญุชูู ุงูุดุงุฆุน ููุบุงูุฉ ุ ูู ุจุนุถ ุงูุฃุญูุงู ูุง ุชูุฌุฏ ุดุจูุฉ ูุงููุฉ ุนูู ุฎุงุฏู ูููุตู.  ูุฏููุง 40-50 ุฌูุฌุงุจุช / ุซุงููุฉ ูู ุฎูุงุฏู ุงูุชุฎุฒูู ุงููุคูุช ุ ูููู ููุงู ูุญุชูู ูุณุฏ ูุซู ูุฐู ุงูููุงุฉ ุชูุงููุง.  ูุญู ูุณุนู ุฌุงูุฏูู ูุชุญููู ุชุฎุฒูู ุฃูุซุฑ ูู ูุณุฎุฉ ูุงุญุฏุฉ ูู ุงููููุงุช ุงูุดุงุฆุนุฉ ูู ุงูููุทูุฉ.  ุขูู ุฃู ูุฏุฑู ุฐูู ุจุญููู ููุงูุฉ ุงูุนุงู. <br><br>  ุฏุฑุณูุง ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุงูุนุงูุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฏู ุงูุฃูุงููุฉ ุงูุชู ุชูุจู ุงูุทูุจุงุช. </li><li style=";text-align:right;direction:rtl">  ุงูุฎูููุฉ ุงูุชู ุชุนุงูุฌ ุงูุทูุจุงุช. </li><li style=";text-align:right;direction:rtl">  ุงูุฃูุจูุฉ ุงูุชู ูุชู ุฅุบูุงููุง ุจูุงุณุทุฉ ููุนูู ูู ุงููููุงุก. </li><li style=";text-align:right;direction:rtl">  ูุฎุงุจุฆ ุฅูููููุฉ. </li></ul><br>  ูุง ูู ููููุฏ ูู ูุฐุง ุงููุฎุทุทุ  ุจุงูุทุจุน ุ ููุงุนุฏ ุงูุจูุงูุงุช ุงูุชู ูููู ุจุชุฎุฒูู ุงูุจูุงูุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ููุงุนุฏ ุงูุจูุงูุงุช ุฃู ุงููุญุฑูุงุช </h2><br>  ูุญู ูุง ูุณูููุง ููุงุนุฏ ุจูุงูุงุช ุ ุจู ูุญุฑูุงุช ูุญุฑูุงุช ุ ูุฃูู ุจุงููุนูู ุงูุนุงู ุงูููุจูู ููุณ ูุฏููุง ุนูููุง ููุงุนุฏ ุจูุงูุงุช. <br><br><img src="https://habrastorage.org/webt/n6/zm/lj/n6zmlj5pwxsnqoqp0xgfhxza_ic.png"><br><br>  <strong>ูุฐุง ูู ุงูุชุฏุจูุฑ ุงูุถุฑูุฑู</strong> .  ุญุฏุซ ุฐูู ูุฃูู ูู ุงููุชุฑุฉ 2008-2009 ุ ุนูุฏูุง ุญููุช VK ููููุง ูุงุฆูุงู ูู ุดุนุจูุชูุง ุ ุนูู ุงููุดุฑูุน ุจุงููุงูู ุนูู MySQL ู Memcache ุ ููุงูุช ููุงู ูุดุงูู.  MySQL ุฃุญุจ ุฃู ูุณูุท ููุฏูุฑ ุงููููุงุช ุ ูุจุนุฏ ุฐูู ูู ูุฑุชูุน ุ ูุชุฏููุฑ Memcache ูู ุงูุฃุฏุงุก ุ ููุงู ูุง ุจุฏ ูู ุฅุนุงุฏุฉ ุงูุชุดุบูู. <br><br>  ุงุชุถุญ ุฃูู ูู ุงููุดุฑูุน ุงูุฐู ูุงู ููุชุณุจ ุดุนุจูุฉ ุ ูุงู ููุงู ูุณุงุญุฉ ุชุฎุฒูู ุซุงุจุชุฉ ุชุงููุฉ ุงูุจูุงูุงุช ุ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุชู ุชุจุงุทุฃุช.  ูู ูุซู ูุฐู ุงูุธุฑูู ุ ูู ุงูุตุนุจ ุชุทููุฑ ูุดุฑูุน ูุชุฒุงูุฏ.  ุชูุฑุฑ ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุฃุดูุงุก ุงููุงูุฉ ุงูุชู ุงุณุชูุฏ ุฅูููุง ุงููุดุฑูุน ุนูู ุฏุฑุงุฌุงุชู ุงูุฎุงุตุฉ. <br><br>  <strong>ูุงู ุงูุญู ูุงุฌุญุง</strong> .  ูุงูุช ุงููุฏุฑุฉ ุนูู ุงูููุงู ุจุฐูู ุ ููุง ูุงูุช ููุงู ุญุงุฌุฉ ููุญุฉ ุ ูุฃู ุทุฑู ุงูููุงุณ ุงูุฃุฎุฑู ูู ุชูู ููุฌูุฏุฉ ูู ุฐูู ุงูููุช.  ูู ููู ููุงู ูููุฉ ูู ุงูููุงุนุฏ ุ NoSQL ูู ุชูู ููุฌูุฏุฉ ุจุนุฏ ุ ูู ููู ููุงู ุณูู MySQL ู Memcache ู PostrgreSQL - ููุฐุง ูู ุดูุก. <br><br>  <strong>ุนูููุฉ ุนุงูููุฉ</strong> .  ูุงู ูููุฏ ุงูุชุทููุฑ ูุฑูููุง ูู ุงููุทูุฑูู C ุ ููุฏ ุชู ูู ุดูุก ุจููุณ ุงูุทุฑููุฉ.  ุจุบุถ ุงููุธุฑ ุนู ุงููุญุฑู ุ ูุงู ููุงู ูู ูู ููุงู ุชูุฑูุจูุง ููุณ ุชูุณูู ุงููููุงุช ุงูููุชูุจุฉ ุนูู ุงููุฑุต ุ ูููุณ ูุนููุงุช ุจุฏุก ุงูุชุดุบูู ุ ูุชูุช ูุนุงูุฌุฉ ุงูุฅุดุงุฑุงุช ุนูู ุญุงููุง ูุชุตุฑูุช ูู ุญุงูุฉ ุงูููุงูู ูุงููุดุงูู ุงูุญุงูุฉ.  ูุน ููู ุงููุญุฑูุงุช ุ ูู ุงูููุงุฆู ูููุณุคูููู ุชุดุบูู ุงููุธุงู - ูุง ุชูุฌุฏ ุญุฏููุฉ ุญููุงู ุชุญุชุงุฌ ุฅูู ุตูุงูุฉ ุ ูุชุนูู ููููุฉ ุชุดุบูู ูู ูุงุนุฏุฉ ุฎุงุฑุฌูุฉ ุฌุฏูุฏุฉ ูุฑุฉ ุฃุฎุฑู ุ ููุง ุฃุชุงุญ ุฒูุงุฏุฉ ุฃุนุฏุงุฏูู ุจุณุฑุนุฉ ูุณูููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃููุงุน ุงููุญุฑูุงุช </h3><br>  ููุฏ ูุชุจ ุงููุฑูู ุนุฏุฏูุง ูุง ุจุฃุณ ุจู ูู ุงููุญุฑูุงุช.  ูููุง ููู ุจุนุถ ูููุง: ุงูุฃุตุฏูุงุก ุ ุงูุชูููุญุงุช ุ ุงูุตูุฑุฉ ุ ipdb ุ ุงูุฑุณุงุฆู ุ ุงูููุงุฆู ุ ุงูุณุฌูุงุช ุ memcached ุ meowdb ุ ุงูุฃุฎุจุงุฑ ุ nostradamus ุ ุงูุตูุฑุฉ ุ ููุงุฆู ุงูุชุดุบูู ุ pmemcached ุ Sandbox ุ ุงูุจุญุซ ุ ุงูุชุฎุฒูู ุ ุงูุฅุนุฌุงุจุงุช ุ ุงูููุงู ุ ... <br><br>  ููู ูููุฉ ุชุชุทูุจ ุจููุฉ ุจูุงูุงุช ูุญุฏุฏุฉ ุฃู ูุนุงูุฌุฉ ุทูุจุงุช ุบูุฑ ููุทูุฉ ุ ููุชุจ ูุฑูู C ูุญุฑููุง ุฌุฏูุฏูุง.  ูู ูุง. <br><br>  ูุฏููุง ูุญุฑู ูููุตู <strong>memcached</strong> ุ ูุงูุฐู ูุดุจู ุงููุญุฑู ุงููุนุชุงุฏ ุ ูููู ูุน ูุฌููุนุฉ ูู ุงููุนู ุ ูุงูุชู ูุง ุชุจุทุฆ.  ูุง ClickHouse ุ ูููู ูุนูู ุฃูุถุง.  ููุงู <strong>pmemcached</strong> ุจุดูู ูููุตู - ููู <strong>memcached ุงููุณุชูุฑ</strong> ุงูุฐู ูููู ุชุฎุฒูู ุงูุจูุงูุงุช ุฃูุถุง ุนูู ุงููุฑุต ุ ูุฃูุซุฑ ูู ุฐูู ูุญุตู ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุญุชู ูุง ุชููุฏ ุงูุจูุงูุงุช ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู.  ููุงู ูุญุฑูุงุช ูุฎุชููุฉ ููููุงู ุงููุฑุฏูุฉ: ููุงุฆู ุงูุงูุชุธุงุฑ ุ ูุงูููุงุฆู ุ ูุงููุฌููุนุงุช - ูู ูุง ูู ูุทููุจ ูู ูุดุฑูุนูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฌููุนุงุช </h3><br>  ูู ูุฌูุฉ ูุธุฑ ุงูููุฏ ุ ููุณุช ููุงู ุญุงุฌุฉ ูุชุฎูู ุงููุญุฑูุงุช ุฃู ููุงุนุฏ ุงูุจูุงูุงุช ูุนูููุงุช ุฃู ููุงูุงุช ุฃู ุญุงูุงุช ูุนููุฉ.  ูุนูู ุงูุฑูุฒ ุจุดูู ุฎุงุต ูุน ุงููุชู ุ ูุน ูุฌููุนุงุช ูู ุงููุญุฑูุงุช - <strong>ููุน ูุงุญุฏ ููู ูุชูุฉ</strong> .  ุฏุนูุง ูููู ุฃู ููุงู ูุชูุฉ memcached - ุงููุง ูุฌุฑุฏ ูุฌููุนุฉ ูู ุงูุขูุงุช. <br><br><blockquote style=";text-align:right;direction:rtl">  ูุง ูุญุชุงุฌ ุงูุฑูุฒ ุฅูู ูุนุฑูุฉ ุงููููุน ุงููุนูู ูุญุฌู ูุนุฏุฏ ุงูุฎูุงุฏู.  ูุฐูุจ ุฅูู ุงููุชูุฉ ูู ูุจู ุจุนุถ ุงููุนุฑู. </blockquote><br>  ููู ููุฌุญ ูุฐุง ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ููุงู ุขุฎุฑ ุ ูุงูุฐู ููุน ุจูู ุงูุฑูุฒ ูุงููุญุฑูุงุช - <strong>ุงููููู</strong> . <br><br><h3 style=";text-align:right;direction:rtl">  ูููู RPC </h3><br>  ูููู - <strong>ุญุงููุฉ ูุชุตูุฉ</strong> ุ ูุงูุชู ุชุฏูุฑ ุงููููุน ุจุฃูููู ุชูุฑูุจุง.  ูู ุงูููุช ููุณู ุ <strong>ูุง ููุฌุฏ ูุฏููุง ุงูุชุดุงู ููุฎุฏูุฉ</strong> - ุจุฏูุงู ูู ุฐูู ุ ููุงู ุชููุฆุฉ ููุฐุง ุงููููู ุ ูุงูุชู ุชุนุฑู ูููุน ุฌููุน ุงููุฌููุนุงุช ููู ุดุธุงูุง ูุฐู ุงููุฌููุนุฉ.  ูุชู ุฐูู ุนู ุทุฑูู ูุฏุฑุงุก. <br><br>  ูุง ููุชู ุงููุจุฑูุฌูู ุนููููุง ุจุงูููุฏุงุฑ ูุฃูู ููุง ููููู - ููู ูุฐูุจูู ุฅูู ุงููุฌููุนุฉ.  ูุฐุง ูุชูุญ ููุง ุงููุซูุฑ.  ุนูุฏ ุงุณุชูุงู ุงูุทูุจ ุ ูุนูุฏ ุงููููู ุชูุฌูู ุงูุทูุจ ููุนุฑูุฉ ุฃูู - ูุญุฏุฏ ุฐูู. <br><br><img src="https://habrastorage.org/webt/7k/pf/ia/7kpfiagxzy2a4mrosc_f4otqnw8.png"><br><br>  ูู ุงูููุช ููุณู ุ ุงููููู ูู ููุทุฉ ุญูุงูุฉ ุถุฏ ูุดู ุงูุฎุฏูุฉ.  ุฅุฐุง ุชุจุงุทุฃ ุฃู ูุญุฑู ุฃู ุชุนุทู ุ ูุฅู ุงููููู ูููู ุฐูู ููุณุชุฌูุจ ูุฐูู ูู ุฌุงูุจ ุงูุนููู.  ูุณูุญ ูู ูุฐุง ุจุฅุฒุงูุฉ ุงููููุฉ - ูุง ููุชุธุฑ ุงูุฑูุฒ ุงุณุชุฌุงุจุฉ ุงููุญุฑู ุ ูููู ูุฏุฑู ุฃูู ูุง ูุนูู ููุฌุจ ุนููู ุฃู ุชุชุตุฑู ุจุดูู ูุฎุชูู.  ูุฌุจ ุฅุนุฏุงุฏ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุญูููุฉ ุฃู ููุงุนุฏ ุงูุจูุงูุงุช ูุง ุชุนูู ุฏุงุฆููุง. <br><br><h4 style=";text-align:right;direction:rtl">  ุชุทุจููุงุช ูุญุฏุฏุฉ </h4><br>  ุฃุญูุงููุง ูุง ุฒููุง ูุฑูุฏ ุญููุง ุงูุญุตูู ุนูู ููุน ูู ุงูุญููู ุงููุฎุตุตุฉ ููุญุฑู.  ูู ุงูููุช ููุณู ุ ุชูุฑุฑ ุนุฏู ุงุณุชุฎุฏุงู ูููููุง rpc ุงูุฌุงูุฒ ุ ุงููุตูู ุฎุตูุตูุง ููุญุฑูุงุชูุง ุ ูููู ูุฅูุดุงุก ูููู ูููุตู ููุฐู ุงููููุฉ. <br><br>  ุจุงููุณุจุฉ ุฅูู MySQL ุ ุงูุชู ูุง ุชุฒุงู ูุฏููุง ูู ุจุนุถ ุงูุฃูุงูู ุ ูุณุชุฎุฏู db-proxy ุ ู ClickHouse - <strong>Kittenhouse</strong> . <br><br>  ูุฐุง ูุนูู ุจุดูู ุนุงู ูู ูุฐุง ุงููุจูู.  ููุงู ุฎุงุฏู ุ kPHP ุ Go ุ Python ุชุนูู ุนููู - ุจุดูู ุนุงู ุ ุฃู ุฑูุฒ ูููู ุฃู ูุชุจุน ุจุฑูุชูููู RPC ุงูุฎุงุต ุจูุง.  ููุชูู ุงูุฑูุฒ ูุญูููุง ุฅูู RPC-proxy - ุนูู ูู ุฎุงุฏู ููุฌุฏ ุจู ุฑูุฒ ุ ูุชู ุชุดุบูู ุงููููู ุงููุญูู ุงูุฎุงุต ุจู.  ุจูุงุกู ุนูู ุงูุทูุจ ุ ูููู ุงููููู ุฅูู ุฃูู ูุฐูุจูู. <br><br><img src="https://habrastorage.org/webt/f-/dx/ro/f-dxrox3o97ckejzygz8mgf4tcs.png"><br><br>  ุฅุฐุง ุฃุฑุงุฏ ุฃุญุฏ ุงููุญุฑูุงุช ุงูุงูุชูุงู ุฅูู ูุญุฑู ุขุฎุฑ ุ ุญุชู ูู ูุงู ุฌุงุฑูุง ุ ูุฅูู ููุฑ ุนุจุฑ ูููู ุ ูุฃู ุงูุฌุงุฑ ูููู ุฃู ูููู ูู ูุฑูุฒ ุจูุงูุงุช ูุฎุชูู.  ูุง ููุจุบู ุฑุจุท ุงููุญุฑู ุจูุนุฑูุฉ ูููุน ุฃู ุดูุก ุขุฎุฑ ุบูุฑ ููุณู - ูุฏููุง ูุฐุง ุงูุญู ุงูููุงุณู.  ูููู ุจุงูุทุจุน ููุงู ุงุณุชุซูุงุกุงุช :) <br><br>  ูุซุงู ุนูู ูุฎุทุท TL ุงูุฐู ูุนูู ููููุง ูุฌููุน ุงููุญุฑูุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">memcache.not_found = memcache.Value; memcache.strvalue value:string flags:int = memcache.Value; memcache.addOrIncr key:string flags:int delay:int value:long = memcache.Value; tasks.task fields_mask:# flags:int tag:%(Vector int) data:string id:fields_mask.0?long retries:fields_mask.1?int scheduled_time:fields_mask.2?int deadline:fields_mask.3?int = tasks.Task; tasks.addTask type_name:string queue_id:%(Vector int) task:%tasks.Task = Long;</code> </pre> <br>  ูุฐุง ูู ุจุฑูุชูููู ุซูุงุฆู ุ ูุฃูุฑุจ ุงูุชูุงุซููุฉ ูู <strong>protobuf.</strong>  ูุตู ุงููุฎุทุท ูุณุจููุง ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ ูุงูุฃููุงุน ุงููุนูุฏุฉ - ุงูุชุฏุงุฏุงุช ุงูุนุฏุฏูุฉ ุงููุฏูุฌุฉ ูุงูุงุณุชุนูุงูุงุช.  ูู ุดูุก ูุนูู ูููุง ููุฐุง ุงูุจุฑูุชูููู. <br><br><h4 style=";text-align:right;direction:rtl">  RPC ุนุจุฑ TL ุนุจุฑ TCP / UDP ... UDPุ </h4><br>  ูุฏููุง ุจุฑูุชูููู RPC ููุงุณุชุนูุงู ุนู ุงููุญุฑู ุ ูุงูุฐู ูุนูู ุฃุนูู ูุฎุทุท TL.  ูู ูุฐุง ูุนูู ุนูู ููุฉ ุงุชุตุงู TCP / UDP.  TCP - ูู ุงููุงุถุญ ุณุจุจ ุณุคุงูู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุนู UDP. <br><br>  ูุณุงุนุฏ UDP ุนูู <strong>ุชุฌูุจ ูุดููุฉ ุนุฏุฏ ูุจูุฑ ูู ุงูุงุชุตุงูุงุช ุจูู ุงูุฎูุงุฏู</strong> .  ุฅุฐุง ูุงู ููุงู ูููู RPC ุนูู ูู ุฎุงุฏู ูุนููููุง ููููู ุงูุงูุชูุงู ุฅูู ุฃู ูุญุฑู ุ ุซู ุชุญุตู ุนูู ุนุดุฑุงุช ุงูุขูุงู ูู ุงุชุตุงูุงุช TCP ุจุงูุฎุงุฏู.  ููุงู ุญูููุฉ ุ ููููุง ุบูุฑ ูุฌุฏูุฉ.  ูู ุญุงูุฉ UDP ุ ูุฐู ููุณุช ูุดููุฉ. <br><br>  <strong>ูุง ูุตุงูุญุฉ TCP ุงูุฒุงุฆุฏุฉ</strong> .  ูุฐู ูุดููุฉ ูููุฐุฌูุฉ: ุนูุฏ ุธููุฑ ูุญุฑู ุฌุฏูุฏ ุฃู ุฎุงุฏู ุฌุฏูุฏ ุ ูุชู ุฅูุดุงุก ุงูุนุฏูุฏ ูู ุงุชุตุงูุงุช TCP ูู ุขู ูุงุญุฏ.  ุจุงููุณุจุฉ ููุทูุจุงุช ุงูุตุบูุฑุฉ ุฎูููุฉ ุงููุฒู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุญูููุฉ ุงููุงูุนุฉ UDP ุ ูู ุงุชุตุงู ุจูู ุงูููุฏ ูุงููุญุฑู ูู <strong>ุฑุฒูุชุงู UDP:</strong> ูุงุญุฏุฉ ูู ุงุชุฌุงู ูุงุญุฏ ุ ูุงูุฃุฎุฑู ูู ุงูุงุชุฌุงู ุงูุขุฎุฑ.  ุฑุญูุฉ ูุงุญุฏุฉ ุฐูุงุจูุง ูุฅูุงุจูุง - ูุชููู ุงูุฑูุฒ ุงุณุชุฌุงุจุฉ ูู ุงููุญุฑู ุฏูู ูุตุงูุญุฉ. <br><br>  ูุนู ุ ูู ุดูุก ูุนูู ููุท <strong>ูุน ูุณุจุฉ ูุฆููุฉ ุตุบูุฑุฉ ุฌุฏุง ูู ููุฏุงู ุงูุญุฒูุฉ</strong> .  ูุญุชูู ุงูุจุฑูุชูููู ุนูู ุฏุนู ูุนูููุงุช ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู ุ ูุงููุชุฑุฉ ุงูุฒูููุฉ ุงููุญุฏุฏุฉ ุ ูููู ุฅุฐุง ููุฏูุง ุงููุซูุฑ ุ ูุณูุญุตู ุนูู TCP ุนููููุง ุ ููู ุฃูุฑ ุบูุฑ ูุฑุจุญ.  ุนุจุฑ ุงููุญูุทุงุช ุ ูุง ุชุฏูุน UDP. <br><br>  ูุฏููุง ุงูุขูุงู ูู ูุฐู ุงูุฎูุงุฏู ุ ูููุงู ููุณ ุงููุฎุทุท: ูุชู ูุถุน ุญุฒูุฉ ูู ุงููุญุฑูุงุช ุนูู ูู ุฎุงุฏู ูุนูู.  ุจุดูู ุฃุณุงุณู ุ ูุชู ุฑุจุทูุง ุจุดูู ุฃุญุงุฏู ููุนูู ุจุฃุณุฑุน ูุง ูููู ุฏูู ุงูุญุฌุจ ุ ููุชู ุชูุฒูููุง ูุญููู ุฐุงุช ุชุฑุงุจุท ููุฑุฏ.  ูู ุงูููุช ููุณู ุ ููุณ ูุฏููุง ุดูุก ุฃูุซุฑ ููุซูููุฉ ูู ูุฐู ุงููุญุฑูุงุช ุ ููุชู ุฅููุงุก ุงููุซูุฑ ูู ุงูุงูุชูุงู ูุชุฎุฒูู ุงูุจูุงูุงุช ุงููุณุชูุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงูุจูุงูุงุช ุงููุณุชูุฑ </h3><br>  <strong>ูุญุฑูุงุช ุงููุชุงุจุฉ binlogs</strong> .  Binlog ูู ููู ูู ููุงูุชู ูุถุงู ุญุฏุซ ูุชุบููุฑ ุญุงูุฉ ุฃู ุจูุงูุงุช.  ูู ุญููู ูุฎุชููุฉ ูุทูู ุนููู ุจุดูู ูุฎุชูู: ุณุฌู ุซูุงุฆู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">WAL</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">AOF</a> ุ ูููู ุงููุจุฏุฃ ูุงุญุฏ. <br><br>  ููู ูุง ูููู ุงููุญุฑู ุจุฅุนุงุฏุฉ ูุฑุงุกุฉ ุงูุณุฌู ุจุงููุงูู ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุชุดุบูู ุฎูุงู ุณููุงุช ุนุฏูุฏุฉ ุ ุชููู ุงููุญุฑูุงุช ุจูุชุงุจุฉ <strong>ููุทุงุช - ุงูุญุงูุฉ ุงูุญุงููุฉ</strong> .  ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูุฑุฃูุง ุฃููุงู ููู ุ ุซู ูุฑุฃูุง ูู binlog.  ุชุชู ูุชุงุจุฉ ุฌููุน ุงูุณุฌูุงุช ุงูุซูุงุฆูุฉ ุจููุณ ุงูุชูุณูู ุงูุซูุงุฆู - ููููุง ููุธุงู TL- ุ ุจุญูุซ ูููู ูููุดุฑููู ุฅุฏุงุฑุชูุง ุจุงูุชุณุงูู ูุน ุฃุฏูุงุชูู.  ููุณุช ููุงู ุญุงุฌุฉ ููุซู ูุฐู ุงูููุทุงุช.  ููุงู ุนููุงู ุนุงู ูุดูุฑ ุฅูู ุฃู ููุทุฉ ุงูุดุงุดุฉ ูู int ุ ุณุญุฑ ุงููุญุฑู ุ ูุฃู ุฌุณู ููุณ ููููุง ูุฃุญุฏ.  ูุฐู ูู ูุดููุฉ ุงููุญุฑู ุงูุฐู ุณุฌู ุงูููุทุฉ. <br><br>  ุณูู ุฃุตู ุจุฅูุฌุงุฒ ูุจุฏุฃ ุงูุนูู.  ููุฌุฏ ุฎุงุฏู ูุนูู ุนููู ุงููุญุฑู.  ุงูู ููุชุญ binlog ูุงุฑุบุฉ ุฌุฏูุฏุฉ ููุชุณุฌูู ุ ูููุชุจ ุญุฏุซ ุชุบููุฑ ููู. <br><br><img src="https://habrastorage.org/webt/dd/w9/9p/ddw99p7g6upg9hci9ou6aln6d_c.png"><br><br>  ูู ูุฑุญูุฉ ูุง ุ ููุฑุฑ ุฅูุง ุฃุฎุฐ ููุทุฉ ุ ุฃู ูุชููู ุฅุดุงุฑุฉ.  ูููุดุฆ ุงูุฎุงุฏู ููููุง ุฌุฏูุฏูุง ุ ูููุชุจ ุญุงูุชู ุชูุงููุง ุ ููุถูู ุงูุญุฌู ุงูุญุงูู ูู binlog - ุงูุฅุฒุงุญุฉ ุฅูู ููุงูุฉ ุงูููู ุ ููุณุชูุฑ ูู ุงููุชุงุจุฉ.  ูู ูุชู ุฅูุดุงุก binlog ุฌุฏูุฏ. <br><br><img src="https://habrastorage.org/webt/ec/fq/yt/ecfqytibh2tsm5ncd8mfli-b1ta.png"><br><br>  ูู ูุฑุญูุฉ ูุง ุ ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงููุญุฑู ุ ุณูููู ููุงู binlog ูููุทุฉ ุนูู ุงููุฑุต.  ููุฑุฃ ุงููุญุฑู ูู ููุทุฉ ูุงููุฉ ุ ููุซูุฑ ุญุงูุชู ูู ูุฑุญูุฉ ูุนููุฉ. <br><br><img src="https://habrastorage.org/webt/bg/ph/-u/bgph-uu68nqedhby4a2kf3r9c5u.png"><br><br>  ูุทุฑุญ ุงูููุถุน ุงูุฐู ูุงู ูู ููุช ุฅูุดุงุก ุงูููุทุฉ ุ ูุญุฌู binlog. <br><br><img src="https://habrastorage.org/webt/ar/gs/lq/argslqv8ewosmtic8-zaobq4g5o.png"><br><br>  ููุฑุฃ ููุงูุฉ binlog ููุญุตูู ุนูู ุงูุญุงูุฉ ุงูุญุงููุฉ ููุณุชูุฑ ูู ูุชุงุจุฉ ุงููุฒูุฏ ูู ุงูุฃุญุฏุงุซ.  ูุฐุง ูุฎุทุท ุจุณูุท ุ ุฌููุน ูุญุฑูุงุชูุง ุชุนูู ุนููู. <br><br><h4 style=";text-align:right;direction:rtl">  ุชูุฑุงุฑ ุงูุจูุงูุงุช </h4><br>  ูุชูุฌุฉู ูุฐูู ุ <strong>ูุณุชูุฏ</strong> ุงููุณุฎ ุงููุชูุงุซู <strong>ููุจูุงูุงุช ุฅูู ุจูุงู</strong> - ูุญู ูุง ููุชุจ ุฃู ุชุบููุฑุงุช ูู ุงูุตูุญุฉ ุนูู binlog ุ ุจู ูุทูุจ <strong>ุงูุชุบููุฑุงุช</strong> .  ุชุดุจู ุฅูู ุญุฏ ูุจูุฑ ูุง ูุฃุชู ุนุจุฑ ุงูุดุจูุฉ ุ ููุท ุชุบูุฑ ููููุง. <br><br>  ูุชู ุงุณุชุฎุฏุงู ููุณ ุงููุฎุทุท ููุณ ููุท ูููุณุฎ ุงููุชูุงุซู ุ ูููู ุฃูุถูุง <strong>ูุฅูุดุงุก ูุณุฎ ุงุญุชูุงุทูุฉ</strong> .  ูุฏููุง ูุญุฑู - ุณูุฏ ุงููุชุงุจุฉ ุงูุฐู ููุชุจ ูู binlog.  ูู ุฃู ููุงู ุขุฎุฑ ูุชู ููู ุฅุนุฏุงุฏ ุงููุดุฑููู ุ ูุฑุชูุน ูุณุฎ binlog ุ ููุฐุง ูู ุดูุก - ูุฏููุง ูุณุฎุฉ ุงุญุชูุงุทูุฉ. <br><br><img src="https://habrastorage.org/webt/og/al/sz/ogalszm0wfe3f_064sbjnpo4p9c.png"><br><br>  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู <strong>ูุณุฎุฉ ูุชูุงุซูุฉ ูููุฑุงุกุฉ ูู</strong> ุฃุฌู ุชูููู ุงูุญูู ุนูู ุงููุฑุงุกุฉ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูุฅู ูุญุฑู ุงููุฑุงุกุฉ ูุฑุชูุน ุ ูุงูุฐู ููุฑุฃ ููุงูุฉ binlog ููููุฐ ูุฐู ุงูุฃูุงูุฑ ูุญูููุง. <br><br>  ุงูุชุฃุฎุฑ ููุง ุตุบูุฑ ุฌุฏูุง ุ ูููุงู ูุฑุตุฉ ููุนุฑูุฉ ููุฏุงุฑ ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุฎูู ุงููุนูู ุงูุฑุฆูุณู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุดุงุฑูุฉ ุงูุจูุงูุงุช ูู RPC-proxy </h3><br>  ููู ูุนูู ุงูุชูุดูุฑุ  ููู ูููู ุงูุจุฑููุณู ูุง ูู ุงููุชูุฉ ุงูุนูููุฏูุฉ ุงูุชู ุณุชุฑุณู ุฅูููุงุ  ุงูููุฏ ูุง ูููู: "ุฃุฑุณู ุฅูู 15 ูุดุฑุฉ!"  - ูุง ุ ููุนู ูููู. <br><br>  <strong>ุฃุจุณุท ูุฎุทุท ูู firstint</strong> ุ ุงูุฑูู ุงูุฃูู ูู ุงูุทูุจ. <br><br> <code>get(photo100_500) =&gt; 100 % N.</code> <br> <br>  ูุฐุง ูุซุงู ุนูู ุจุฑูุชูููู ูุตู ุจุณูุท ุ ูููู ุจุงูุทุจุน ุงูุทูุจุงุช ูุนูุฏุฉ ููููููุฉ.  ุงููุซุงู ูุฃุฎุฐ ุงูุฑูู ุงูุฃูู ูู ุงูุงุณุชุนูุงู ูุงูุจุงูู ูู ุงููุณูุฉ ุญุณุจ ุญุฌู ุงููุชูุฉ. <br><br>  ูุฐุง ูููุฏ ุนูุฏูุง ูุฑูุฏ ุงูุญุตูู ุนูู ุจูุงูุงุช ูุญููุฉ ูููุงู ูุงุญุฏ.  ูููุชุฑุถ ุฃู 100 ูู ูุนุฑู ูุณุชุฎุฏู ุฃู ูุฌููุนุฉ ุ ููุฑูุฏ ุฃู ุชููู ุฌููุน ุจูุงูุงุช ููุงู ูุงุญุฏ ูู ููุณ ุงููุฌููุนุฉ ูุงุณุชุนูุงูุงุช ูุนูุฏุฉ. <br><br>  ุฅุฐุง ูู ููู ููุชููู ุจููููุฉ ุงูุชุดุงุฑ ุงูุทูุจุงุช ุนุจุฑ ุงููุฌููุนุฉ ุ ูููุงู ุฎูุงุฑ ุขุฎุฑ - <strong>ุชุฌุฒุฆุฉ ุงููุดุฑุฉ ุจุฃููููุง</strong> . <br><br> <code>hash(photo100_500) =&gt; 3539886280 % N</code> <br> <br>  ูุญุตู ุฃูุถูุง ุนูู ุงูุชุฌุฒุฆุฉ ูุงูุจุงูู ูู ุงููุณูุฉ ูุนุฏุฏ ุงููุดุฑุฉ. <br><br>  ูุนูู ููุง ูุฐูู ุงูุฎูุงุฑูู ููุท ุฅุฐุง ููุง ูุณุชุนุฏูู ูุญูููุฉ ุฃููุง ุนูุฏูุง ูุฒูุฏ ุญุฌู ุงููุชูุฉ ุ ูุฅููุง ุณููุณููุง ุฃู ูุฒูุฏูุง ุนุฏุฉ ูุฑุงุช.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏููุง 16 ูุทุนุฉ ุ ูุญู ูู ุนุฏุงุฏ ุงูููููุฏูู ุ ูุฑูุฏ ุงููุฒูุฏ - ููููู ุงูุญุตูู ุนูู 32 ุจุฃูุงู ุฏูู ุชููู.  ุฅุฐุง ุฃุฑุฏูุง ุฃู ูุชุฑุงูู ุนุฏุฉ ูุฑุงุช ุ ูุณุชููู ููุงู ูุชุฑุฉ ุชููู ุ ูุฃูู ูู ูููู ูู ุงููููู ุณุญู ูู ุดูุก ุจุนูุงูุฉ ุฏูู ุฎุณุงุฑุฉ.  ูุฐู ุงูุฎูุงุฑุงุช ูููุฏุฉ ุ ูููู ููุณ ุฏุงุฆููุง. <br><br>  ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ุนุฏุฏ ุนุดูุงุฆู ูู ุงูุฎูุงุฏู ุ <strong>ูุณูุชู ุงุณุชุฎุฏุงู ุชุฌุฒุฆุฉ ูุชูุงุณูุฉ ุนูู ุญููุฉ la Ketama</strong> .  ูููู ูู ุงูููุช ููุณู ุ ูููุฏ ุชูุงููุง ููุถุน ุงูุจูุงูุงุช ุ ูุชุนูู ุนูููุง ุชูุฏูู ุทูุจ ุฏูุฌ ุฅูู ุงููุชูุฉ ุจุญูุซ ุชูุฑุฌุน ูู ูุทุนุฉ ุฅุฌุงุจุชูุง ุงูุตุบูุฑุฉ ุ ูุชุฌูุน ุจุงููุนู ุงูุฑุฏูุฏ ุนูู ุงููููู. <br><br>  - .   : RPC-proxy  , ,       .     , ,     ,      .    proxy. <br><br><img src="https://habrastorage.org/webt/jx/6t/f9/jx6tf9jlkkmva1qfifzmwrx58wc.png"><br><br><h2 style=";text-align:right;direction:rtl">  </h2><br>     .     โ <strong>   memcache</strong> . <br><br> <code>ring-buffer: prefix.idx = line</code> <br> <br>    โ  , ,      โ  .     0     1.   memcache โ       .        . <br><br>    ,   <strong>Multi Get</strong>  ,   ,         .  ,   -      ,   ,         ,      . <br><br>         <strong>logs-engine</strong> .      ,       .       600   . <br><br>   ,  ,    6โ7 .    ,    , ,    ClickHouse   . <br><br><h3 style=";text-align:right;direction:rtl">    ClickHouse </h3><br>   ,      . <br><br><img src="https://habrastorage.org/webt/jm/-j/s0/jm-js04tjh8lb8pii1_dzl_sfa4.png"><br><br>  ,   RPC    RPC-proxy,   ,    .       ClickHouse,        : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  -   ClickHouse; </li><li style=";text-align:right;direction:rtl">  RPC-proxy,      ClickHouse,  - ,  ,   RPC. </li></ul><br>    โ          ClickHouse. <br><br>     ClickHouse,   <strong>KittenHouse</strong> .      KittenHouse  ClickHouse โ   .   ,  HTTP-     .   ,    ClickHouse <strong>  reverse proxy</strong> ,   ,     .         . <br><br><img src="https://habrastorage.org/webt/zj/fy/5y/zjfy5yuay9-6wqe3nrgjkeznvny.png"><br><br>      RPC-   , ,  nginx.   KittenHouse      UDP. <br><br><img src="https://habrastorage.org/webt/hq/wl/v_/hqwlv_vnujb-maxakxksbmrf6xo.png"><br><br>         ,    UDP-      .       RPC     ,      UDP.      . <br><br><h2 style=";text-align:right;direction:rtl">  ูุฑุงูุจุฉ </h2><br>     : ,        ,     .     : <strong>  </strong> . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Netdata</a> ,        <strong>Graphite Carbon</strong> .      ClickHouse,   Whisper, .       ClickHouse,   <strong>Grafana</strong>  ,   .  ,   Netdata  Grafana  . <br><br><h3 style=";text-align:right;direction:rtl">   </h3><br>      . ,    ,    Counts, UniqueCounts   ,   - . <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">statlogsCountEvent ( 'stat_name', $key1, $key2, โฆ) statlogsUniqueCount ( 'stat_name', $uid, $key1, $key2, โฆ) statlogsValuetEvent ( 'stat_name', $value, $key1, $key2, โฆ) $stats = statlogsStatData($params)</code> </pre><br>      ,    ,     โ  ,  Wathdogs. <br><br>    <strong> ,</strong>    600   1   .       <strong>   </strong> ,     .     โ  ,     . ,      . <br><br>    ,     <strong>  memcache</strong> ,    .         <strong>stats-daemon</strong>   .         <strong>logs-collectors</strong> ,       ,      . <br><br><img src="https://habrastorage.org/webt/ih/ab/oy/ihaboy4luh5hriorej9seodbx6u.png"><br><br>        logs-collectors. <br><br><img src="https://habrastorage.org/webt/fq/ta/bj/fqtabjgq556wqfdz5_kfq3mj94c.png"><br><br>          stas-daemom โ   ,      collector.  ,    -        memcache stats-daemon,   ,    . <br><br>  logs-collectors    <strong>meowDB</strong> โ   ,      . <br><br><img src="https://habrastorage.org/webt/v_/gb/_y/v_gb_ya-9ywkra7xdh5h_qtqsc4.png"><br><br>      ยซ-SQLยป  . <br><br><img src="https://habrastorage.org/webt/1q/gw/wp/1qgwwpyj3ewcwuonshvty_zcfhc.png"><br><br><h3 style=";text-align:right;direction:rtl">  </h3><br>  2018     ,          -,      ClickHouse.      ClickHouse โ    ? <br><br><img src="https://habrastorage.org/webt/wg/mz/kl/wgmzklw41x7ilj0-5hbr_kfdif8.png"><br><br>    ,     KittenHouse. <br><br><img src="https://habrastorage.org/webt/kq/s7/uj/kqs7ujzbhnqzt5f8djepldmwxia.png"><br><br>   <strong>     ยซ*Houseยป</strong> ,        ,       UDP.   *House    inserts,  ,   KittenHouse.        ClickHouse,     . <br><br><img src="https://habrastorage.org/webt/ff/k3/th/ffk3thypln9exuhyuhr-nuj9hr4.png"><br><br>   memcache, stats-daemon  logs-collectors    . <br><br><img src="https://habrastorage.org/webt/r4/g3/e9/r4g3e9yakpzbx5gscmgyl6keqsa.png"><br><br>   memcache, stats-daemon  logs-collectors    . <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">     ,     StatsHouse. </li><li style=";text-align:right;direction:rtl"> StatsHouse   KittenHouse UDP-,    SQL-inserts, . </li><li style=";text-align:right;direction:rtl"> KittenHouse    ClickHouse. </li><li style=";text-align:right;direction:rtl">     ,      StatsHouse โ   ClickHouse  SQL. </li></ul><br>    <strong></strong> ,   ,  .    , , ,    .     . <br><br>  <strong>  </strong> .   ,    stats-daemons  logs-collectors,  ClickHouse   ,  ,     . <strong>  ,       </strong> . <br><br><h2 style=";text-align:right;direction:rtl">  </h2><br>     PHP.    <strong>git</strong> :  <strong>GitLab</strong>  <strong>TeamCity</strong>  .     -,       ,   โ  . <br><br>        ,     diff  โ : , , .     binlog   copyfast,          .     ,  <strong>gossip replication</strong> ,       ,  โ  ,   .            .      ,       <strong>  </strong> .       . <br><br>     kPHP         <strong>git</strong>   .    <strong> HTTP-</strong> ,      diff โ     .     โ    <strong>binlog copyfast</strong> .     ,      .  <strong>  </strong> .  copyfast' ,   binlog   ,     gossip replication     ,    -,      .   <strong>graceful </strong>   . <br><br>   ,     ,   : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> git master branch; </li><li style=";text-align:right;direction:rtl">   <strong>.deb</strong> ; </li><li style=";text-align:right;direction:rtl">    binlog copyfast; </li><li style=";text-align:right;direction:rtl">   ; </li><li style=";text-align:right;direction:rtl">     .dep; </li><li style=";text-align:right;direction:rtl"> <strong>dpkg -i</strong> ; </li><li style=";text-align:right;direction:rtl"> graceful    . </li></ul><br>   ,        <strong>.deb</strong> ,     <strong>dpkg -i</strong>   .    kPHP  ,   โ dpkg?  .  โ  . <br><br> <b> :</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ยซ  Vkontakte. ?ยป</a>    copyfast  gossip. </li><li style=";text-align:right;direction:rtl">    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ยซ VK    CLickHouse    ยป</a> . </li><li style=";text-align:right;direction:rtl">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ยซ     ยป</a> ,     ,   . </li></ul><br><blockquote style=";text-align:right;direction:rtl">     ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PHP Russia</a>  17          PHP-. ,     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> (     PHP!) โ ,      PHP,   . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar449254/">https://habr.com/ru/post/ar449254/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar449234/index.html">ุฎุฏูุฉ VPN Wireguard ูุฌุงููุฉ ุนูู AWS</a></li>
<li><a href="../ar449236/index.html">ุญุณูุง ุฌูุฌู: ููููุฉ ุงูุญุตูู ุนูู ูููุฉ ุงูุชุญููุ</a></li>
<li><a href="../ar449246/index.html">AX200 - Intel Wi-Fi 6</a></li>
<li><a href="../ar449248/index.html">ุจูุฆุฉ ุชุทููุฑ ูุชูุงููุฉ ุงูุญุฏูุซุฉ. ุจุงูุชุฃููุฏ D ุ ุฅูู ุญุฏ ูุง E ุ ูุจุงูุชุฃููุฏ ููุณ ุฃูุง</a></li>
<li><a href="../ar449252/index.html">ูุดุงุฑูุน Zombie - ุฏูุฌ ุจูุงูุงุช ุงููุณุชุฎุฏู ุญุชู ุจุนุฏ ููุงุชู</a></li>
<li><a href="../ar449256/index.html">ูุฑุฃุช 80 ูุณุชุฃูู ุ ูุฏู ุฃุณุฆูุฉ</a></li>
<li><a href="../ar449260/index.html">ูุง ูู ุงูุชุนูู ุงูุขูู ุงูุขูู (AutoML)</a></li>
<li><a href="../ar449262/index.html">ุฃุญุฏุซ ุชุฑููุฉ IRM - Siebel ุฅูู IP17 +</a></li>
<li><a href="../ar449264/index.html">ุฅูุดุงุก ูุธุงู ุฅุนุฏุงุฏ ุชูุงุฑูุฑ ูู 1C: ERP ูุนุชูุฏ ุนูู OLAP ู Excel</a></li>
<li><a href="../ar449266/index.html">3 ุชูุงุฑูุฑ ูุน RusCrypto: ูุคุชูุฑุงุช ูุน ุฎุจุฑุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>