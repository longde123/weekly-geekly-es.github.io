<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇüèº üë∏üèø üôÜ Comment casser un iPhone et ex√©cuter un service pour 15 millions d'utilisateurs üìø üå™Ô∏è üö¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√Ä l'√©t√© 2014, mes amis et moi sommes all√©s nous promener et un √©v√©nement historique s'est produit. Pendant le tournage de la vid√©o, soudain, l'iPhone ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment casser un iPhone et ex√©cuter un service pour 15 millions d'utilisateurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/405437/">  √Ä l'√©t√© 2014, mes amis et moi sommes all√©s nous promener et un √©v√©nement historique s'est produit.  Pendant le tournage de la vid√©o, soudain, l'iPhone 5C est tomb√© des mains de ma femme et s'est √©cras√© sur le sol en b√©ton. <br><br>  √Ä ce moment, cela m'a sembl√© une triste situation.  Mais c'est pr√©cis√©ment l'impulsion pour le lancement du service qui dessert aujourd'hui plus de 15 millions d'utilisateurs. <br><br>  Qu'est-ce que l'iPhone a √† voir avec √ßa?  Quel genre de service?  Comment tout cela est-il connect√©?  R√©ponses sous la coupe! <br><br><img src="https://habrastorage.org/web/905/ba3/631/905ba3631ca6438784c1d73556f914c2.jpg"><a name="habracut"></a><br><br><h3>  Pr√©face </h3><br>  Dans cet article, je veux partager avec vous les √©v√©nements qui ont commenc√© en 2014.  Je vais tout vous raconter tel qu'il √©tait pendant que ma m√©moire est fra√Æche, et partager √©galement des informations qui n'ont encore √©t√© publi√©es nulle part. <br><br><h3>  R√©parer </h3><br>  Comme tous ceux qui ressentaient l'amertume du verre bris√© sur leur gadget pr√©f√©r√©, je voulais r√©soudre ce probl√®me le plus rapidement possible.  L'√©cran lui-m√™me n'a pas √©t√© endommag√© et la r√©paration remplace simplement la vitre de l'√©cran tactile.  Un ami a recommand√© SC √† Kiev et j'y ai envoy√© un t√©l√©phone.  Ils l'ont recoll√© et me l'ont renvoy√©.  J'avais h√¢te de recevoir le t√©l√©phone par mail. <br><br>  D√®s que je l'ai re√ßu, une autre d√©ception m'attendait.  L'√©cran tactile a √©t√© remplac√©, mais il y avait des taches jaunes sur les bords de l'√©cran.  Dans le SC, ils m'ont promis de le r√©parer ou de le remplacer par l'original avec l'√©cran.  Comme j'ai toujours trouv√© des rayures sous la vitre, j'ai d√©cid√© de remplacer compl√®tement l'√©cran. <br><br>  Une semaine plus tard, j'ai r√©cup√©r√© le t√©l√©phone, il s'est av√©r√© que l'√©cran n'√©tait pas d'origine.  M√™me √† la surface elle-m√™me, il √©tait clair qu'elle √©tait inclin√©e par rapport au corps.  Et les couleurs √©taient plus sombres, ce qui distinguait clairement l'affichage de l'original.  Il s'est av√©r√© que les √©crans d'origine de l'iPhone sont difficiles √† trouver.  J'ai d√©cid√© de supporter cette situation et, dans le futur, de changer l'iPhone en un mod√®le plus r√©cent. <br><br>  Quelques jours se sont √©coul√©s, je me suis lentement habitu√© √† l'affichage chinois.  J'√©tais assis sur un fauteuil et le t√©l√©phone a gliss√© de ma poche.  Il tomba sur le plancher en bois, le verre se fissura √† nouveau.  Le t√©l√©phone avec la vitre d'origine est tomb√© plusieurs fois, mais ne s'est pas √©cras√© jusqu'au combat de b√©ton.  Mais le verre chinois, coll√© de travers, s'est cass√© du premier coup. <br><br><img src="https://habrastorage.org/web/e30/41c/ae7/e3041cae7e0d452d94bb97b377e7d6a5.jpg"><br><br>  La prise de conscience que je ne pouvais pas acheter le verre d'origine m'a fait penser √† trouver un donneur.  J'ai commenc√© √† chercher un iPhone qui se vend sur olx pour les pi√®ces.  Il s'est av√©r√© qu'il y en a beaucoup qui ont un probl√®me avec la fonction iCloud Find My iPhone.  Ces t√©l√©phones ne peuvent pas √™tre activ√©s et restent dans un √©tat dormant jusqu'√† ce que vous saisissiez l'identifiant Apple du propri√©taire ou si le propri√©taire supprime le t√©l√©phone de son compte. <br><br>  J'ai trouv√© un donneur, l'iPhone 5C est en excellent √©tat, il est verrouill√© sous l'op√©rateur et sous iCloud.  L'√©cran s'est approch√© avec succ√®s de mon t√©l√©phone, et finalement tout s'est mis en place.  J'ai d√©cid√© de garder l'iPhone vert, au cas o√π, en tant que donateur.  Enfin, j'ai pu me calmer et oublier ce probl√®me. <br><br><h3>  Et ensuite? </h3><br>  Plusieurs semaines se sont √©coul√©es, l'iPhone 5C vert √©tait allong√© sur mon bureau sous le moniteur.  Mais de temps en temps je me souvenais de lui, parce que par habitude je n'aime pas que les choses tra√Ænent au ralenti.  Le t√©l√©phone √©tait donc li√© √† un op√©rateur inconnu, et m√™me avec du verre bris√©, l'iCloud n'avait aucun sens.  Mais l'id√©e que le t√©l√©phone en th√©orie puisse √™tre d√©verrouill√©, toujours d'une mani√®re inconnue, ne m'a pas quitt√©. <br><br><h3>  doulCi </h3><br>  En g√©n√©ral, j'ai commenc√© √† google, lire les forums.  J'ai trouv√© des informations sur doulCi (le nom n'est pas √©trange, mais c'est presque √† l'envers iCloud).  C'est une √©quipe de passionn√©s qui a lanc√© un serveur pour contourner FMI pour le premier firmware iOS 7. Ils ont lanc√© MITM et √©chang√© des packages d'un iPhone d√©verrouill√© √† un iPhone verrouill√©.  En g√©n√©ral, √† cette √©poque, Apple n'a pas v√©rifi√© la conformit√© des packages avec Serial / IMEI et doulCi a utilis√© cela avec succ√®s.  Ils n'ont pas travaill√© pour leur serveur pendant longtemps, mais ils ont r√©ussi √† d√©bloquer quelque 70 000 appareils.  Ceux qui ont r√©ussi √† se connecter √† leur serveur ont re√ßu un appareil fonctionnel sur lequel la carte SIM ne fonctionnait pas.  Ensuite, une de leur √©quipe a divulgu√© la source sur Internet et Apple a r√©ussi √† corriger un tel trou.  √Ä ce stade, leur √©quipe s'est s√©par√©e et tout le monde est all√© de diff√©rentes mani√®res.  Leur serveur ne fonctionnait plus. <br><br>  Bien s√ªr, je ne le savais pas alors.  Je suis all√© sur leur site officiel et j'ai vu des minuteries l√†-bas, en disant: "Attendez jusqu'√† 16h00 vendredi, puis nous allons d√©marrer le serveur et le d√©verrouiller gratuitement."  Et il y avait partout des champs pour entrer l'IMEI et s'inscrire.  J'ai donc d√©cid√© d'attendre cette heure.  D√®s que le moment est venu, j'ai r√©gl√© une alarme pour ne pas rater, j'ai gard√© le c√¢ble USB pr√™t.  Le moment est venu, je suis all√© sur leur site, et l√† <s>tout fonctionne une</s> nouvelle fois pour d√©marrer le serveur.  J'ai essay√© d'attendre encore, et tout s'est av√©r√© √™tre une tentation publicitaire.  Cela me d√©rangeait beaucoup, mais je n'allais pas m'arr√™ter. <br><br><h3>  Serveur proxy </h3><br>  Plus tard, des nouvelles sur les serveurs proxy ont commenc√© √† appara√Ætre, disant qu'en se connectant √† eux, vous pouvez acc√©der √† la page Web. <br><br>  Dans la page qu'Apple distribue <br><br><img src="https://habrastorage.org/web/23f/644/591/23f64459189a4de49342803924e8d54f.png"><br><br>  En cliquant sur ¬´Aide √† l'activation¬ª, l'utilisateur a √©t√© redirig√© vers une page contenant du texte.  Mais les d√©veloppeurs d'Apple ont rat√© un petit d√©tail, le lien n'a pas conduit √† HTTPS, mais √† une adresse HTTP. <br> <code>http://static.ips.apple.com/deviceservices/buddy/barney_activation_help_en_us.buddyml</code> <br>  Cela a permis d'intercepter et de remplacer le trafic, car il n'√©tait pas chiffr√©. <br><br>  Les serveurs tombaient constamment, le meilleur que j'ai trouv√© √©tait le serveur niltpH.  Mais il changeait constamment de ports, soit pour que les utilisateurs visitent souvent son site, soit pour que le serveur ne le supporte pas et il a donc supprim√© la charge. <br><br>  Je me demandais constamment pourquoi faire un proxy si vous pouviez transf√©rer des requ√™tes DNS? <br>  Il n'y aura pas de charge importante et le serveur sera toujours en ligne.  Mais il n'y avait que des serveurs proxy. <br><br>  Puis une vague d'escroqueurs a commenc√©, ils ont commenc√© √† massivement mandater le serveur. <br>  En affichant une page avec le paiement pour une analyse compl√®te inexistante, de nombreuses personnes ont souffert de ces faux services.  Les serveurs proxy vous ont permis d'avoir un contr√¥le total sur le trafic.  Ainsi, les m√©chants ont vol√© des mots de passe et des cartes de cr√©dit, et les utilisateurs pensaient que cela fonctionnerait car tout changement dans leur appareil √©tait cr√©dible. <br><br>  Apple n'a rien fait pour faire la diff√©rence, mais je l'ai fait.  √Ä la suite de mes autres actions, personne d'autre n'a pu trouver les fraudeurs du serveur proxy dans le moteur de recherche. <br><br><h3>  Premier serveur de contournement DNS iCloud </h3><br>  R√©solu, je vais d√©marrer mon serveur.  Un soir d'hiver en d√©cembre, j'ai commenc√© le d√©veloppement.  Pour impl√©menter mon id√©e, j'avais besoin d'un serveur HTTP et d'un serveur DNS.  J'ai d√©cid√© d'√©crire les deux services en C ++ √† l'aide de Visual Studio 2010. Travailler avec des sockets directement octet par octet sans biblioth√®ques tierces. <br><br>  Le protocole DNS n'est pas compliqu√©, pour une requ√™te UDP, une r√©ponse, avec la m√™me structure √† chaque fois.  Pendant quelques heures, j'ai √©crit un simple serveur DNS, il a r√©pondu avec une adresse IP statique sur static.ips.apple.com et le reste que j'ai pris avec DNS de Google. <br><br>  Puis j'ai commenc√© √† √©crire un serveur HTTP.  La premi√®re √©tape consistait simplement √† produire une page HTML.  Il a √©t√© charg√© en m√©moire lorsque le programme a d√©marr√©, puis il a √©t√© envoy√© √† des paquets pr√™ts √† l'emploi √† tous ceux qui ont envoy√© une demande au port 80.  Mon programme a donc renvoy√© une page √† tous ceux qui ont envoy√© la demande, quel que soit l'h√¥te sp√©cifi√©.  Tout fonctionnait dans le navigateur, mais en enregistrant DNS dans les param√®tres Wi-Fi iOS, en cliquant sur ¬´Aide √† l'activation¬ª, j'ai re√ßu une erreur dans le t√©l√©phone. <br><br>  Apr√®s avoir analys√© le trafic, il s'est av√©r√© qu'Apple utilise des fichiers XML, g√©n√©rant une interface distante pour eux. <br><br>  Un exemple de code peut √™tre vu sur le lien d'aide √† l'activation: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">static.ips.apple.com/deviceservices/buddy/barney_activation_help_en_us.buddyml</a> <br><br>  Et voici la r√©ponse du serveur demandant le mot de passe sur l'appareil verrouill√©: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmlui</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript">&lt;![CDATA[</span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">enableNextButton</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> fieldPassword = xmlui.getFieldValue(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'password'</span></span></span><span class="actionscript">); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> (fieldPassword &amp;&amp; fieldPassword.length &gt;= </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">3</span></span></span><span class="actionscript">) </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">true</span></span></span><span class="actionscript">; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">false</span></span></span><span class="actionscript">; } </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">validateForm</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> fieldLogin = xmlui.getFieldValue(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'login'</span></span></span><span class="actionscript">); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> fieldPassword = xmlui.getFieldValue(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'password'</span></span></span><span class="actionscript">); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> (fieldLogin == </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'test'</span></span></span><span class="actionscript">) { xmlui.setFieldInvalid(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'login'</span></span></span><span class="actionscript">, </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">false</span></span></span><span class="actionscript">); xmlui.alert(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"Test!"</span></span></span><span class="actionscript">); } </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">else</span></span></span><span class="actionscript"> { xmlui.setFieldInvalid(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'login'</span></span></span><span class="actionscript">, </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">true</span></span></span><span class="actionscript">); xmlui.alert(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">"Value entered is not 'test'."</span></span></span><span class="actionscript">); } }]]&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">page</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigationBar</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Activation Lock"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loadingTitle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Activating..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">hidesBackButton</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkBarItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"right"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Next"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">httpMethod</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">url</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/deviceservices/deviceActivation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"blue"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enabledFunction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enableNextButton"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigationBar</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">footer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"This iPhone is linked to an Apple ID. Enter the Apple ID and password that were used to set up this iPhone."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">footer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  : This iPhone has been lost. Please call me. (123) 456-1234"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">footer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">footerLinkURL</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://static.ips.apple.com/deviceservices/buddy/barney_activation_help_ru_ru.buddyml"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editableTextRow</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"login"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Apple ID"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"example@icloud.com"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disableAutocapitalization</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disableAutocorrection</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyboardType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"email"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editableTextRow</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">secure</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">page</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">serverInfo</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isAuthRequired</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">activation-info-base64</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"      "</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmlui</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Apr√®s avoir √©tudi√© la source, vous pouvez comprendre que le code a JavaScript et qu'il fonctionne √† l'int√©rieur des balises &lt;! [CDATA [..]]&gt; <br><br>  Et √† cette √©poque, les mandataires existants utilisaient une seule page avec du code HTML. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmlui</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">page</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigationBar</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Games"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loadingTitle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Loading..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">hidesBackButton</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkBarItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"right"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Next"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">httpMethod</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">url</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/deviceservices/deviceActivation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"blue"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enabledFunction</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enableNextButton"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigationBar</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">htmlLabelRow</span></span></span><span class="hljs-tag">&gt;</span></span> &lt;![CDATA[&lt;html&gt;   HTML  &lt;/html&gt;]]&gt;<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">htmlLabelRow</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">page</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xmlui</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Sur le t√©l√©phone, vous pouvez voir un site simple au lieu du texte d'activation.  Les cookies fonctionnaient.  Mais en cliquant sur un lien externe, tous les styles se sont √©gar√©s et les transitions ult√©rieures √©taient impossibles.  C'est ainsi que les serveurs proxy fonctionnaient √† l'√©poque. <br><br>  Apr√®s quelques heures, j'avais un serveur DNS et HTTP fonctionnel, qui renvoyait 1 page pour toute demande.  XMLUI s'est av√©r√© √™tre un balisage avec des param√®tres inconnus qui ne pouvaient √™tre trouv√©s nulle part.  Et maintenant, il n'y a plus de documentation nulle part.  Apple ne l'utilise qu'√† l'int√©rieur de ses produits. <br><br>  En fait, les √©l√©ments iOS standard sont g√©n√©r√©s par XMLUI, m√™me ceux qui fonctionnent hors ligne.  Listes, boutons, ic√¥nes, choix de la date et de l'heure, sous-menus, tout cela n'est que le r√©sultat de la conversion √† la vol√©e du XML d'un script similaire en une interface. <br><br>  La prise de conscience que de nombreuses interfaces dans iOS ont √©t√© r√©alis√©es de mani√®re si maladroite m'a l√©g√®rement d√©√ßu.  C'est √† ce moment que vous vous attendez √† ce que tout ait d√©j√† √©t√© fait de la mani√®re la plus optimale possible, et il s'av√®re qu'il y a un calque sur le calque. <br><br>  Ensuite, j'ai r√©alis√© qu'en th√©orie, si vous connaissez la disposition de l'interface, vous pouvez g√©n√©rer une interface iOS native tr√®s confortable avec une liste d'ic√¥nes et de liens.  Tels que les param√®tres dans iOS.  Et remplacez-le compl√®tement par la bo√Æte de dialogue d'activation. <br><br>  Tout ce que j'ai compris du code d√©j√† enregistr√©, c'est qu'il existe une certaine table avec la possibilit√© d'ajouter beaucoup de pied de page &lt;section, qui peut faire r√©f√©rence √† d'autres fichiers XMLUI.  Il est tout √† fait possible de cr√©er votre serveur XMLUI avec quelques informations.  Mais je voulais obtenir exactement la liste des sites, et pour pouvoir aller sur Google, par exemple. <br><br><h3>  Comment faire une interface de balisage sans conna√Ætre les commandes? </h3><br>  La premi√®re chose qui m'est venue √† l'esprit est que puisque iOS g√©n√®re des commandes, il compare les cha√Ænes de param√®tres XML, donc elles doivent √™tre stock√©es quelque part dans le firmware.  Id√©alement, vous trouveriez un fichier avec une liste de commandes que vous pouvez essayer d'ajouter au code XMLUI, mais non, cela ne s'est pas produit. <br><br>  √Ä cette √©poque, l'iPhone 4 √©tait d√©j√† compl√®tement pirat√©.  L√†, sous le chargeur de d√©marrage, vous pouvez d√©marrer et obtenir un acc√®s complet au syst√®me de fichiers, peu importe qu'il y ait ou non un mot de passe d'iOS. <br><br>  J'ai trouv√© le firmware iOS 7 t√©l√©charg√© depuis l'iPhone 4 et j'ai commenc√© √† le choisir.  J'ai compil√© une liste de mots c√©l√®bres √† partir de ces fichiers XMLUI que j'ai collect√©s et j'ai commenc√© √† rechercher mot par mot tous les fichiers du firmware.  √Ä premi√®re vue, un exercice inutile, c'est comparable √† trouver une aiguille dans une botte de foin, mais pour une raison quelconque, j'√©tais s√ªr que je trouverais quelque chose.  Plus d'une heure s'est √©coul√©e, je n'ai rien trouv√©, mais le fichier dyld_shared_cache_armv7 a retenu mon attention.  Il pesait jusqu'√† 300 Mo, tandis que le firmware entier pesait environ 1 Go. <br><br>  Il s'est av√©r√© √™tre un ¬´package¬ª de biblioth√®ques dynamiques.  Afin de ne pas surcharger le syst√®me de fichiers, Apple regroupe toutes les biblioth√®ques dynamiques de tous les programmes syst√®me dans un fichier.  √Ä l'aide des outils de d√©veloppement d'Apple, j'ai d√©compress√© ce fichier et re√ßu un grand nombre de fichiers.  J'ai recommenc√© √† chercher dans leurs donn√©es les mots de ma liste, j'ai essay√© de les combiner et de les s√©lectionner.  J'ai commenc√© √† chercher une orthographe de style similaire - quelques mots, le premier avec une petite lettre, le reste avec une majuscule, sans espaces ni soulignement. <br><br>  Apr√®s d'innombrables tentatives, j'ai pu trouver le mot htmlButtonRow.  Si vous le collez dans le code, vous obtenez une erreur, il est donc en quelque sorte influenc√© et reconnu.  L'√©tape suivante a √©t√© la s√©lection d'un endroit, o√π le coller? <br><br>  Enfin, le code a fonctionn√©, et j'ai obtenu la barre de menu convoit√©e: <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">htmlButtonRow</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">htmlButtonRow</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableView</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Une seule ligne √©tait affich√©e et le texte, une fois appuy√©, rien ne se passait.  Mais le nom de la section htmlButtonRow parlait de HTML, ce qui signifie que vous pouvez probablement y ajouter le code de la page. <br>  L'insertion de code HTML dans un bouton √† l'aide de &lt;! [CDATA a fonctionn√©.  M√™me gagn√© la transition du bouton vers le site. <br><br>  J'ai obtenu ce que je voulais, un moyen d'afficher une liste de diff√©rents sites et d'y aller.  Ensuite, j'ai commenc√© √† d√©velopper un moteur de g√©n√©ration de code XMLUI.  J'ai √©crit une liste des param√®tres n√©cessaires pour un bouton, y ai mis un lien vers l'image, du texte et un lien vers le site. <br><br>  Le r√©sultat a √©t√© un fichier de configuration de texte de ce type: <br><br><pre> <code class="hljs ruby">[Section] Name=Facebook Url=<span class="hljs-symbol"><span class="hljs-symbol">menu:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/https:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/m.facebook.com/</span></span> Img=<span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/iclouddnsbypass.com/</span></span>Icons/B5w8iLX.png</code> </pre> <br>  Dans ce document, j'ai cr√©√© une liste de sites populaires. <br><br>  Ensuite, j'ai cr√©√© des mod√®les de page dans lesquels des boutons ont √©t√© ajout√©s, tout a √©t√© stock√© en m√©moire de mani√®re statique et √©mis √† la demande sans acc√©der au disque. <br><br>  Apr√®s quelques jours, j'ai corrig√© tous les bugs et le serveur √©tait pr√™t pour un lancement constant.  La premi√®re version d'iCloud DNS Bypass a √©t√© lanc√©e le 25 d√©cembre 2014.  J'ai √©crit l'adresse du serveur DNS sur w3bsit3-dns.com dans le fil de discussion sur le contournement iCloud, le m√™me jour que les mod√©rateurs du site m'ont √©crit et sugg√©r√© de cr√©er une branche distincte.  Peu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">importe</a> , voici un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien vers le fil de discussion w3bsit3-dns.com</a> . <br><br>  En cons√©quence, tout ressemblait √† ceci: <br><br><img src="https://habrastorage.org/web/498/569/73e/49856973ee45455d868ba2c0101c7800.jpg"><br><br>  Mais en raison des limites de l'interface elle-m√™me, il √©tait seulement possible de suivre le lien, et la transition ult√©rieure vers des sites tiers √©tait impossible.  En cons√©quence, tout le monde ne pouvait utiliser que la liste des sites que j'avais ajout√©s au serveur. <br><br><h3>  D√©panner le contournement DNS iCloud </h3><br>  Quelques jours apr√®s le lancement, mon ami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Dybik a</a> lanc√© un site avec des informations sur le serveur.  J'ai cr√©√© un groupe dans VK et parl√© avec les utilisateurs du serveur.  Il s'est av√©r√© que sur le nouveau firmware iOS, les liens de redirection HTML ne fonctionnent plus. <br><br>  √Ä cette √©poque, environ 500 utilisateurs uniques s'√©taient d√©j√† connect√©s, et toutes les critiques m'ont aid√© √† croire que je faisais quelque chose d'utile.  Et j'ai toujours r√™v√© de lancer un grand projet.  Ces pens√©es m'ont donn√© la force de ne pas abandonner.  J'ai recommenc√© √† chercher des noms de valeurs XMLUI, j'√©tais s√ªr qu'il y avait beaucoup plus de commandes utiles. <br><br>  Apr√®s avoir pass√© encore 3-4 heures de recherches et de rebonds diligents, j'ai finalement trouv√© une balise utile <br>  &lt;linkRow et son param√®tre accessoire = "divulgation", faisant du bouton un sous-dossier.  C'√©tait exactement ce dont vous aviez besoin, la liste fonctionnait sur tous les iOS et adoptait un aspect plus natif, car il n'y avait plus de HTML. <br><br>  Le code du bouton final √©tait comme ceci: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkRow</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">accessory</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"disclosure"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">image</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">shouldScaleHTMLPageToFit</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">url</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://   .buddyml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">httpMethod</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Ils ont commenc√© √† m'envoyer des liens utiles, que j'ai ajout√©s au menu, et ont form√© une grande liste.  Ils ont √©galement envoy√© des plantages, que j'ai ajout√©s au menu, et tout le monde pouvait les essayer. <br><br>  J'ai √©galement r√©alis√© un moteur de langue, avec le remplacement des textes, en fonction de la langue de l'utilisateur.  Il a invit√© tout le monde √† traduire, et au fil du temps, ils m'ont envoy√© des traductions de diff√©rents pays.  Maintenant, l'interface du serveur a d√©j√† √©t√© traduite en 50 langues, gr√¢ce √† des b√©n√©voles.  J'ai √©galement fait des restrictions sur la liste des sites pour la langue, par exemple, le russe est affich√© pour les sites russes, du chinois vers le chinois.  Ajout d'un chat bas√© sur tlk.io, mais plus tard, a cr√©√© son propre moteur en raison de spammeurs. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5cc/054/6df/5cc0546df247f681e52a1369c820f818.png" alt="image"><img src="https://habrastorage.org/getpro/geektimes/post_images/4c0/be4/647/4c0be4647de0edbfcd5c3eb934c1b89f.png" alt="image"><img src="https://habrastorage.org/getpro/geektimes/post_images/eb1/36a/f10/eb136af1009fceebbe36b81d06213f2f.png" alt="image"><br><br>  De plus, j'ai √©galement trouv√© le param√®tre shouldScaleHTMLPageToFit = "true" qui a amen√© la vue du navigateur sur mobile l√† o√π elle √©tait n√©cessaire.  Et en cours de route, j'ai trouv√© un autre param√®tre le plus important isModalHTMLView = "true".  Avec cela, j'ai pu √©tendre la page Web en plein √©cran, la rotation de l'√©cran et tous les clics sur les liens sans bugs et restrictions y ont fonctionn√©.  Les cookies ont √©galement fonctionn√© apr√®s le red√©marrage, je les ai donc utilis√©s pour compter le nombre d'utilisateurs.  Pour la premi√®re fois au monde, il est devenu possible d'utiliser un navigateur complet sans onglets sur un appareil iOS verrouill√©. <br><br>  De plus, gr√¢ce au bouton de t√©l√©chargement de photos HTML, tout le monde peut utiliser l'appareil photo et allumer la lampe de poche de la m√™me mani√®re.  J'ai ajout√© une liste de favoris, et vous pouvez l'ajouter dans l'interface.  Il y avait des stations de radio dans le menu, il √©tait possible d'ouvrir de la musique, puis d'ouvrir un autre onglet avec un bouton sp√©cial, tandis que le pr√©c√©dent fonctionnait, et le multit√¢che s'est av√©r√©. <br><br>  Il s'est ensuite av√©r√© que certains utilisateurs ne pouvaient pas se connecter au serveur.  La raison en √©tait soit des routeurs soit des fournisseurs qui ont remplac√© toutes les requ√™tes DNS par les leurs.  Et il n'a pas √©t√© possible de remplacer le domaine par mon serveur.  J'ai ensuite d√©velopp√© un petit programme pour Windows qui lance le serveur DNS int√©gr√©, qui aide √† se connecter au r√©seau local. <br><br>  Voici une vid√©o YouTube de la cha√Æne EverythingApplePro sur le contournement DNS iCloud, o√π vous pouvez regarder √† quoi ressemblait l'interface √† ce moment-l√†. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/uSrOGN6K4To" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Deux mois plus tard, plus de 200 000 appareils √©taient d√©j√† connect√©s au serveur. <br><br><img src="https://habrastorage.org/web/fa8/be3/da4/fa8be3da44254b719b7ba344de6d92a5.png"><br><br>  Voici une vid√©o, en temps r√©el vous pouvez voir les requ√™tes sur le serveur qui √©taient √† ce moment-l√† <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FUysTl-TsIQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Mais pour qu'Apple remarque qu'ils ont un balisage dans le balisage, il √©tait n√©cessaire de connecter 300 000 autres appareils. <br><br><h3>  Une autre vague d'arnaqueurs </h3><br>  Deux mois apr√®s le lancement sur Internet, il √©tait impossible de trouver autre chose sur une solution de contournement autre que mon serveur.  Cela a mis fin √† la procuration frauduleuse extorquant de l'argent.  Mais une vague de publicit√©s sur eBay a commenc√©, ils ont commenc√© √† vendre "iCloud bypass" pour 30-50 USD.  Les propri√©taires na√Øfs et d√©sesp√©r√©s des appareils verrouill√©s sont faciles √† manipuler et les fraudeurs l'ont utilis√©. <br><br>  Apr√®s avoir pay√© le ¬´service de d√©verrouillage¬ª, les escrocs ont donn√© aux acheteurs des instructions sur la fa√ßon de se connecter √† mon serveur gratuit.  Beaucoup ne soup√ßonnaient m√™me pas qu'ils avaient √©t√© vol√©s.  J'√©tais en col√®re et je voulais faire quelque chose pour les arr√™ter. <br><br>  J'ai √©crit une page de message dans toutes les langues, de sorte que lorsque tout le monde se connecte, ils comprennent que le serveur est gratuit.  Une telle inscription reste toujours dans l'interface du serveur.  Il s'est √©galement plaint de fraude sur eBay, mais cette guerre a √©t√© sans fin. <br><br>  J'ai re√ßu beaucoup de lettres et jet√© tout ce qu'ils trouvaient sur les hacks, j'ai publi√© sur le serveur et j'ai tout essay√©.  Parfois, il s'est av√©r√© aller sur le bureau, et parfois tout s'est d√©verrouill√© (cela ne fonctionnait qu'avec des appareils effac√©s sur le site, l'interface le bloque en √©tat de fonctionnement jusqu'√† ce qu'il red√©marre). <br><br>  En utilisant les informations qui m'ont √©t√© envoy√©es, il s'est av√©r√© qu'il existe de nombreuses sources proposant de d√©verrouiller des appareils pour de l'argent qui ont vraiment fonctionn√©.  J'ai essay√© de comprendre comment partager avec toute la communaut√© afin de dissiper les id√©es fausses sur les services payants. <br><br>  Les utilisateurs re√ßoivent un appareil verrouill√© pour les raisons suivantes: <br><br><ul><li>  Vous avez oubli√© votre mot de passe Apple ID et perdu votre ch√®que </li><li>  J'ai achet√© un appareil sans savoir qu'il est verrouill√© </li><li>  Ils ont √©t√© victimes de ransomwares et ont perdu l'acc√®s √† leur identifiant Apple </li><li>  Trouv√© l'appareil en mode de perte </li></ul><br>  Maintenant, je peux dire avec confiance qu'il n'y a que deux fa√ßons de le d√©lier compl√®tement: <br><br><ul><li>  Phishing, vol de mots de passe du propri√©taire et suppression d'un appareil de son compte </li><li>  Apr√®s avoir re√ßu le ch√®que d'origine, un appel en faveur d'Apple d√©lie un appareil qui n'est pas en mode perte </li><li>  Souder un modem ou une m√©thode de r√©sistance pour iPad √† partir de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Pasha4ur</a> </li></ul><br>  L'ann√©e derni√®re, les services de phishing ont √©t√© massivement distribu√©s et Apple a m√™me supprim√© le message du propri√©taire sur l'√©cran de l'appareil verrouill√©.  Mais ce n'√©tait pas la raison de la fr√©quence des attaques de phishing.  Il existe des sources qui vendent des informations du compte Apple ID pour l'argent utilis√© pour les attaques.  Ils ont cess√© de travailler uniquement les jours f√©ri√©s du calendrier chinois.  Il s'agit tr√®s probablement d'employ√©s d'Apple en Chine qui copient des informations depuis la zone d'administration d'Apple Care.  J'ai d√©cid√© de v√©rifier les informations re√ßues et tout s'est av√©r√© √™tre vrai.  Il y avait des informations d'adresse, des num√©ros de t√©l√©phone, des questions de s√©curit√©, aucun mot de passe et aucune r√©ponse.  Ensuite, j'ai essay√© de contacter Apple pour savoir ce qui se passait, et mes lettres ont √©t√© ignor√©es avec succ√®s.  Alors, prenez soin de votre IMEI / UDID loin des regards indiscrets, et dans Apple ID, il est pr√©f√©rable de ne pas √©crire de vraies informations. <br><br><h3>  Plan d'urgence </h3><br>  Je soup√ßonnais qu'Apple remarquerait un d√©faut dans la liaison HTTPS et que le serveur de contournement DNS iCloud en un seul coup cesserait de fonctionner pour tous les appareils.  L'exploration d'alternatives m'a conduit √† cr√©er le portail captif.  Ce m√©canisme est utilis√© dans de nombreux h√¥tels, a√©roports, lorsque vous devez saisir votre num√©ro sur le site, avant de vous connecter √† Internet. <br><br>  Il √©tait √©galement difficile de trouver des informations sur le portail captif.  Personne n'a jamais essay√© de lancer un portail d'autorisation via un serveur DNS.  Apr√®s plusieurs jours de recherche, j'ai r√©ussi √† lancer mon propre portail captif.  Tout fonctionnait comme dans un navigateur normal, cliquer sur tous les liens fonctionnait sans restrictions.  En g√©n√©ral, j'√©tais pr√™t pour qu'Apple corrige le d√©faut, mais le fait que les cookies aient √©t√© effac√©s lorsque le portail a √©t√© ferm√© m'a d√©rout√©. <br><br>  A cette √©poque, la m√©thode XMLUI fonctionnait parfaitement, je r√©pondais aux mails, j'√©tais int√©ress√© √† communiquer avec les gens.  Sur YouTube, beaucoup ont tourn√© une vid√©o sur mon serveur et tout le monde a partag√© des informations sur les recherches pour une analyse compl√®te. <br><br><h3>  Mode hors ligne, un gestionnaire de fichiers √† part enti√®re sans Internet </h3><br>  Pr√®s de six mois se sont √©coul√©s depuis le d√©marrage du serveur et Apple n'a pas pens√© √† corriger la page de balisage.  Je ne me souviens pas exactement quand, mais je m'ennuyais et j'ai commenc√© √† essayer de lire le syst√®me de fichiers iOS via XMLUI.  J'ai r√©ussi et j'ai pu ouvrir des fichiers √† partir du syst√®me de fichiers, connaissant leur chemin √† l'avance. <br><br>  J'ai eu une id√©e, si vous d√©posez tous les fichiers via le programme de l'ordinateur dans les dossiers accessibles en √©criture sur l'appareil, vous pouvez cr√©er un gestionnaire de fichiers.  Ensuite, il √©tait toujours possible d'acc√©der aux fichiers sans confirmation sur un appareil verrouill√©, maintenant sur iOS 10, cela ne fonctionnera plus. <br><br>  J'ai fait un champ de saisie de code pour d√©verrouiller les boutons de test o√π se trouvait le gestionnaire de fichiers et j'ai invit√© plusieurs volontaires √† tester. <br><br><img src="https://habrastorage.org/web/74d/037/1b2/74d0371b252b4e6ba90351265da04a29.jpg"><br><br>  Il √©tait possible de t√©l√©charger des fichiers de n'importe quel format et de les ouvrir sur l'appareil.  J'ai √©galement fusionn√© tous les menus et sous-menus dans un seul fichier, ce qui a permis de les t√©l√©charger 1 fois sur l'appareil, puis de les utiliser sans Internet.  Je voulais partager les nouvelles fonctionnalit√©s avec les utilisateurs du serveur le plus rapidement possible.  Tout d'abord, il √©tait n√©cessaire de cr√©er un programme qui synchroniserait la structure du syst√®me de fichiers avec le serveur et d'identifier l'utilisateur en lui fournissant une liste de fichiers depuis son appareil. <br><br>  J'√©tais tr√®s impliqu√© et j'ai commenc√© √† me d√©velopper.  De nombreuses heures se sont √©coul√©es et un lecteur audio avec une liste de lecture et la possibilit√© de s√©lectionner une piste √©tait pr√™t.  Le lendemain matin, des e-mails m'ont plu avec des messages indiquant que le serveur √©tait en panne.  J'ai tout v√©rifi√©, le serveur fonctionnait, plusieurs centaines d'utilisateurs √©taient en ligne.  Mais seuls les chanceux n'ont pas quitt√© le serveur. <br>  Le 13 mai 2015, les d√©veloppeurs d'Apple ont remarqu√© une faille et corrig√© le texte du lien de HTTP √† HTTPS. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Du jour au lendemain, tous les appareils ont cess√© de se connecter au serveur et sont redevenus des morceaux de fer inutiles avec le logo Apple. Et √† un moment donn√©, tout le d√©veloppement du gestionnaire de fichiers est devenu inutile. Personne n'a jamais d√©couvert que j'allais d√©marrer ce mode. Maintenant, pour renvoyer cette m√©thode, vous devez installer un certificat auto-sign√© dans l'appareil pour le domaine albert.apple.com, jusqu'√† pr√©sent, cela n'a pas √©t√© possible. Au moment de la correction du bogue, √† cause duquel l'ancienne m√©thode ne fonctionne plus, un demi-million d'appareils uniques √©taient connect√©s. </font></font><br><br><img src="https://habrastorage.org/web/3ca/13b/d68/3ca13bd688dd4968a29cbc8f348189c2.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai imm√©diatement commenc√© √† lancer le portail captif et √† d√©placer l'ensemble du menu vers l'option Web. L'interface est bas√©e sur Framework7, je l'ai adapt√©e √† l'ancien fichier de configuration du menu. Le m√™me jour, le serveur a √©t√© lanc√© dans un nouveau look, dans lequel il est toujours situ√©.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/kPmFFAwWp2c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur Facebook, j'avais une page iCloud DNS Bypass o√π je ne publiais que des nouvelles et des mises √† jour du serveur. Plus d'un an s'est √©coul√©. Pour une raison quelconque, Apple ne l'aimait pas et un jour (tr√®s bien), j'ai vu le message suivant sans aucun avertissement: plus </font></font><br><br><img src="https://habrastorage.org/web/5b3/c31/db0/5b3c31db04134ced819c9741a3819866.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tard, CloudFlare a envoy√© un e-mail avec le message que quelqu'un de l'unit√© Apple avait demand√© la v√©ritable adresse IP de mon site, car cela violait leurs droits d'auteur. √† droite. M√™me si je ne comprenais pas ce qu'√©tait la violation, j'√©tais heureux que tout cela soit limit√©. Depuis toujours, Apple n'a jamais essay√© de contacter directement et demander de supprimer ce qu'il n'aime pas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une telle ironie du destin, si ma femme n'avait pas laiss√© tomber le t√©l√©phone, si je n'avais pas √©t√© distrait du projet principal afin de me d√©tendre et de r√©aliser mon id√©e, alors le serveur iCloud DNS Bypass n'existerait pas aujourd'hui.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant, le nombre d'utilisateurs uniques a franchi la fronti√®re de 15 millions. 50 √† 60 000 appareils uniques sont connect√©s par jour. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La version actuelle du serveur fonctionne sur tous les iOS existants. Et il n'y a toujours pas d'alternative au contournement DNS iCloud bas√© sur le portail captif. Le serveur fonctionne 24 heures sur 24 depuis son lancement et les dons sont suffisants pour louer du mat√©riel. Jusqu'√† pr√©sent, toutes les connexions HTTP sont desservies par un seul programme √©crit en C ++. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici les statistiques des pays avec les appareils Apple les plus bloqu√©s qui se sont connect√©s √† iCloud DNS Bypass. Total actuellement 15,3 millions.</font></font><br><br><img src="https://habrastorage.org/web/a3a/cfc/9cd/a3acfc9cd1cd4fd4b3070572e29598e2.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et oui, vous pouvez essayer le portail captif sur votre appareil non verrouill√© en faisant tout selon les instructions sur la vid√©o de cet article. </font><font style="vertical-align: inherit;">Et vous pouvez √©galement simplement passer par n'importe quel navigateur √† la page </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ui.iclouddnsbypass.com</font></font></a> <br><br><h3>  Postface </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'esp√®re que je ne vous ai pas ennuy√© avec mon histoire, et c'√©tait int√©ressant pour vous. </font><font style="vertical-align: inherit;">Il n'y a pas de r√®gles dans notre univers, et un projet sur lequel vous travaillez depuis quelques ann√©es peut √™tre recouvert d'un bassin en cuivre, et un passe-temps pour lequel vous passez deux semaines peut se transformer en un service au service de plusieurs millions de personnes. </font><font style="vertical-align: inherit;">Je souhaite que vous ne vous ennuyiez pas dans votre travail et que vous soyez souvent distrait par ce que vous aimez vraiment.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr405437/">https://habr.com/ru/post/fr405437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr405423/index.html">Team Media Player Classic a annonc√© la mort possible du projet</a></li>
<li><a href="../fr405425/index.html">La science dans le monde, partie 2</a></li>
<li><a href="../fr405431/index.html">Il n'y aura pas de "jet d'atterrissage" sur Dragon</a></li>
<li><a href="../fr405433/index.html">Fibre optique: pass√© et pr√©sent</a></li>
<li><a href="../fr405435/index.html">Imprimantes √† √¢me large. Guide rapide de l'impression grand format Canon</a></li>
<li><a href="../fr405439/index.html">Pal√©ontologues: un homme pourrait s'√©chapper d'un tyrannosaure s'il essayait</a></li>
<li><a href="../fr405441/index.html">Blocage des messagers et des anonymiseurs approuv√©s par la Douma d'√âtat, √† l'automne, il y aura un tour des r√©seaux sociaux</a></li>
<li><a href="../fr405443/index.html">La route de Westeros et Essos: Cartographie des mondes fictifs et r√©els</a></li>
<li><a href="../fr405447/index.html">Elon Musk pr√©tend avoir re√ßu l'autorisation de construire un tunnel de New York √† Washington</a></li>
<li><a href="../fr405449/index.html">Movidius Neural Compute Stick - intelligence artificielle sur une cl√© USB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>