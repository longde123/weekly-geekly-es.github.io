<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖüèº üçû üïù Como remover e "colar" um panorama esf√©rico no DJI Mavic Air üë©üèº‚Äçüé§ üòò üöï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Com o lan√ßamento do Dji Mavic Air, o processo de cria√ß√£o de panoramas esf√©ricos parece ter sido simplificado at√© o limite - ele apertou um bot√£o e a e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como remover e "colar" um panorama esf√©rico no DJI Mavic Air</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/coptertime/blog/418775/">  Com o lan√ßamento do Dji Mavic Air, o processo de cria√ß√£o de panoramas esf√©ricos parece ter sido simplificado at√© o limite - ele apertou um bot√£o e a esfera est√° pronta.  Foi o que o an√∫ncio disse.  Para ser sincero, eu j√° esperava que toda a nossa bola fosse baleada nos primeiros meses de vendas, mas por algum motivo isso n√£o aconteceu. <br><br><img src="https://habrastorage.org/webt/jx/h4/lo/jxh4lof5xrcketwjgopnrbsckgq.jpeg"><br>  <i>foto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Paul Oostveen</a></i> <br><a name="habracut"></a><br>  Provavelmente, existem v√°rias raz√µes - o software embutido √© extremamente primitivo e n√£o √© capaz de criar um panorama decente se as condi√ß√µes forem pelo menos ligeiramente diferentes do ideal.  Acima da √°gua ou sobre a neve em tempo nublado, voc√™ pode obter peda√ßos de c√©u no ch√£o e outras "belezas", bem, eu n√£o estou falando sobre as cores med√≠ocres do arquivo jpeg final e absolutamente nenhuma resolu√ß√£o.  Tamb√©m existe um problema em objetos localizados perto da c√¢mera - por exemplo, para remover uma esfera onde a torre estar√° em primeiro plano ou algo semelhante na m√°quina provavelmente n√£o funcionar√°.  A raz√£o para isso √© a paralaxe, ou seja, a deriva do helic√≥ptero durante as filmagens (apesar da √≥tima reten√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mavic Air</a> GPS - uma d√∫zia de cent√≠metros ser√° suficiente para entrar na automa√ß√£o est√∫pida dos sistemas embarcados). <br><br>  Na publicidade, a resolu√ß√£o panor√¢mica √© de 32mp, mas √© tanto quando filmamos em 360 graus e em todos os lugares com telas com uma resolu√ß√£o de 4K ou at√© mais?  Al√©m disso, o firmware n√£o sabe como colar o c√©u e n√£o entende quais s√£o as cores certas, e isso √© imposs√≠vel.  Embora o helic√≥ptero possa disparar a +15 graus, ainda n√£o √© suficiente obter um "teto". <br><br><img src="https://habrastorage.org/webt/ih/ov/wu/ihovwufh8nhz3r-d83_9sxaj6vs.png"><br><br>  Mas nem tudo √© t√£o ruim.  Se voc√™ est√° determinado a obter um bom panorama - √© bem poss√≠vel com o Mavic Air.  No come√ßo, fiquei um pouco c√©tico em rela√ß√£o √† filmagem padr√£o de 25 quadros, mas depois conclu√≠ que isso √© suficiente.  Antes, ao fotografar no DJI Phantom¬Æ ou no DJI Mavic Pro usando o Litchi, tentei tirar de 32 a 48 fotos.  Mais ou menos.  Os 25 oferecidos pela Mavic Air no come√ßo pareciam um pouco para mim, tentei o Litchi, mas n√£o houve aumento significativo.  No processo de treinamento, desenvolvi uma t√©cnica clara e otimizei o processo.  Agora, para uma bateria n√£o muito grande, consigo compor de 4 a 5 esferas, e a colagem com corre√ß√£o de cores leva cerca de 10 a 15 minutos.  Na sa√≠da, temos um panorama com uma resolu√ß√£o de at√© 177mp com boas cores, c√©u normal e controle total do que est√° acontecendo. <br><br>  Ent√£o, o que √© necess√°rio para obter um bom resultado? <br><br><ul><li>  Software DJI GO 4 padr√£o e salvar fotos no DNG Raw </li><li>  Adobe lightroom </li><li>  PtGui Pro </li><li>  Adobe Photoshop ...  10-20 minutos para cada panorama </li></ul><br>  Antes de tudo, √© aconselh√°vel remover tudo corretamente para minimizar o tempo de processamento.  Obviamente, fotografar ao nascer / p√¥r do sol √© muito bonito, mas devido ao pouco sol e ao poss√≠vel brilho, a colagem pode ser dif√≠cil.  Voc√™ pode usar um para-sol adicional - isso facilitar√° o trabalho, mas ainda haver√° quadros onde o sol brilha diretamente na c√¢mera.  Para os primeiros experimentos, escolha um rel√≥gio mais pr√≥ximo do meio dia - para que o sol n√£o consiga entrar no quadro.  Tamb√©m vale a pena evitar objetos muito pr√≥ximos ao helic√≥ptero.  Selecione planos com objetos equidistantes.  Grandes espa√ßos podem ser muito dif√≠ceis de se unir sem uma textura √≥bvia - lago / mar / neve / areia.  Eu recomendo desligar a exposi√ß√£o autom√°tica da c√¢mera.  Olhe ao redor e selecione a velocidade m√©dia do obturador e a abertura (no caso do DJI Phantom 4 Pro), corrija a sensibilidade (ISO).  Mesmo que em alguma dire√ß√£o a exposi√ß√£o n√£o seja ideal, ela poder√° ser corrigida no Lightroom ao converter a partir de RAW.  Isso √© muito mais f√°cil do que combater os erros de automa√ß√£o que podem ocorrer se a c√¢mera apontar para o sol ou para o fundo for floresta / √°gua s√≥lidas e superf√≠cies semelhantes. <br><br>  Certifique-se de que salvar os originais esteja ativado.  Quando todos os par√¢metros estiverem definidos - voc√™ pode come√ßar a fotografar.  No processo, recomendo monitorar o que o dispositivo remove.  Se houver algum objeto principal no quadro, √© necess√°rio garantir que ele seja filmado com todo o quadro, ou seja, n√£o caia na jun√ß√£o de dois quadros e n√£o fique muito pr√≥ximo da borda do quadro.  Se, no entanto, isso aconteceu - √© melhor n√£o mover o helic√≥ptero no final da pesquisa, usando apenas rota√ß√£o em torno de seu eixo e inclinando a c√¢mera para tirar alguns quadros do objeto manualmente - isso pode simplificar bastante a colagem.  Para obter um panorama bonito, n√£o √© necess√°rio ir muito alto.  Os panoramas est√£o √≥timos, onde voc√™ mergulha por dentro, pode estar localizado n√£o mais alto, mas entre os objetos de tiro, mas voc√™ precisa garantir que o helic√≥ptero possa remover as bordas superiores dos objetos para que n√£o fiquem desfocados. <br><br><img src="https://habrastorage.org/webt/r1/12/cu/r112cueigjsmwytgjbde7hggtmc.jpeg"><br>  <i>Um exemplo em que o helic√≥ptero estava muito baixo.</i>  <i>O panorama √© colado com o software DJI Mavic Air integrado.</i>  <i>Embora seja prov√°vel que, se voc√™ pegar o c√≥digo-fonte e o colar com um programa de panorama externo, voc√™ pode salv√°-lo.</i> <br><br>  E agora - os quadros s√£o recebidos - prosseguimos para o processamento.  O DJI Go 4 salva todas as fontes em uma pasta separada - ‚ÄúPanorama‚Äù - copia o conte√∫do da pasta desejada para o disco r√≠gido e solta-o no Lightroom.  Nossa tarefa √© preparar quadros individuais para colar no PTGUI - para isso, √© importante n√£o apenas lidar com a exposi√ß√£o e a cor de cada quadro, mas tamb√©m tornar todas as partes do futuro panorama o mais pr√≥ximo poss√≠vel do brilho e do contraste. <br><br><img src="https://habrastorage.org/webt/a0/z9/q1/a0z9q16uscbohtlohciwtafqggy.png"><br><br>  Se a corre√ß√£o de brilho local for usada - retire qualquer objeto - verifique se, em todos os quadros em que est√° presente, isso √© feito o mais pr√≥ximo poss√≠vel.  O PTGUI possui uma fun√ß√£o de equaliza√ß√£o de brilho, mas √© melhor fazer isso com anteced√™ncia.  Al√©m disso, o material resultante pode ser exportado (eu recomendo usar o Tiff com compress√£o LZW de 8/16 bits por canal, dependendo da pot√™ncia do seu PC). <br><br><img src="https://habrastorage.org/webt/ei/za/h2/eizah2wfiaszg0f1mmbjclpvj1g.png"><br><br>  O pr√≥ximo passo ser√° a montagem direta do panorama.  Fa√ßa o upload de arquivos para o PTGUI PRO e clique em Alinhar imagens. <br><br><img src="https://habrastorage.org/webt/un/ar/z2/unarz2i0cb4uwldz0rzi3yng_eu.png"><br><br>  O sistema analisa os dados e tenta comparar os quadros por pontos de controle. <br><br>  Em alguns casos (√°gua / neve, etc.), o programa pode exibir uma mensagem sobre a aus√™ncia de correspond√™ncias em alguns quadros - isso significa que voc√™ precisar√° definir os pontos de controle manualmente. <br><br>  Se n√£o for esse o caso, o programa fornecer√° uma janela com uma varredura panor√¢mica, onde √© desej√°vel definir o centro - o local que ser√° exibido ao carregar - a face do panorama, voc√™ tamb√©m pode ajustar o horizonte. <br><br><img src="https://habrastorage.org/webt/eh/iu/bh/ehiubhvol5md_hd68rj_kcl9hdk.png"><br><br>  Em seguida, podemos abrir uma visualiza√ß√£o do panorama, que pode ser distorcida e pr√©-avaliar o resultado. <br><br><img src="https://habrastorage.org/webt/qu/rd/p5/qurdp5vci_el4jhywlvxccueusk.png"><br><br>  Aqui voc√™ pode observar problemas especialmente fortes e, se houver, acessar a edi√ß√£o dos pontos de controle e tentar corrigi-lo. <br><br><img src="https://habrastorage.org/webt/yq/sx/4p/yqsx4pdng2errceagbvlie1liiq.png"><br><br>  Se n√£o houver problemas especiais - a √∫ltima guia - Criar panorama - √© definida como no Lightroom - Tiff com compacta√ß√£o LZW. <br><br><img src="https://habrastorage.org/webt/tw/r3/91/twr391f4kmzgn6w0bxuomof3r04.png"><br><br>  O pr√≥ximo passo √© a inspe√ß√£o e o ajuste final no Photoshop.  Lentamente, analisamos todo o panorama em partes por inconsist√™ncias - o horizonte e os problemas nos principais objetos s√£o especialmente impressionantes.  Bem, se a articula√ß√£o no objeto sem uma textura especial. <br><br><img src="https://habrastorage.org/webt/u0/sw/-5/u0sw-5hap33vcbepdtaj0unwits.png"><br><br>  Aqui, todas as ferramentas j√° s√£o boas - primeiro tentamos alocar por diverg√™ncia por sele√ß√£o poligonal, depois transforma√ß√£o - distor√ß√£o e outras op√ß√µes - personalizamos a pe√ßa ‚Äúdescartada‚Äù.  O sombreamento da sele√ß√£o pode ser pequeno - de 1 a 2 pixels e, √†s vezes, √© melhor deixar as bordas n√≠tidas por completo, fechamos as √°reas resultantes como resultado da mudan√ßa, como sempre com um carimbo ou um pincel de recupera√ß√£o. <br><br><img src="https://habrastorage.org/webt/o0/ev/-u/o0ev-us8vs3jrgyfqr85fz4optw.png"><br><br>  √â claro que existem casos mais complicados - ent√£o abrimos um arquivo separado com o objeto, copiamos para uma nova camada, ajustamos a escala, exclu√≠mos o excesso - obtemos um patch.  No caso do uso de deforma√ß√µes - especialmente deforma√ß√µes de fantoches, √© muito importante limitar os pontos e n√£o tocar nas bordas do panorama - caso contr√°rio, ele n√£o ficar√° mais preso. <br><br>  √â hora de dar o efeito e a riqueza ao panorama.  Agora, podemos torcer com seguran√ßa os n√≠veis / curvas / cores para obter o efeito desejado.  Voc√™ pode precisar usar as ferramentas Dodge / burn, trabalhar em objetos individuais - na verdade, neste momento, exportamos todo o caminho para o Tiff e suportamos grandes tamanhos de arquivo. <br><br><img src="https://habrastorage.org/webt/su/br/zr/subrzrgwexa9ypzhwz9sv5sidnw.png"><br><br>  No final, voc√™ precisa pegar o c√©u.  J√° acumulei uma certa quantia de minhas reservas + encontrei algo na rede.  Se n√£o houver a√ß√µes ou op√ß√µes salvas, basta esticar o c√©u at√© a parada.  n√£o ser√° muito bonito, mas pelo menos n√£o um domo preto. <br><br><img src="https://habrastorage.org/webt/xy/xy/xx/xyxyxxp0vsdvldheoauwfdrxxt0.png"><br><br>  N√≥s inserimos o objeto do c√©u, imediatamente o rasterizamos (se antes voc√™ tiver feito o panorama do c√©u corretamente, nenhuma altera√ß√£o ser√° necess√°ria), fa√ßa a m√°scara, use o gradiente para mover do c√©u para o fundo e ajuste o brilho da camada inserida com curvas.  Preste aten√ß√£o √† jun√ß√£o do c√©u e ao seu panorama, √†s vezes, mesmo ao usar uma m√°scara e um gradiente - objetos escuros podem brilhar e voc√™ pode facilmente obter montanhas transl√∫cidas acima da cidade.  √â melhor desligar a camada panor√¢mica lentamente, se voc√™ precisar apagar toda a borracha suspeita. <br><br><img src="https://habrastorage.org/webt/nt/nx/l_/ntnxl__-qsve95gnluixnfm2iko.png"><br><br>  Isso pode ser feito.  Cole em uma camada a fun√ß√£o "reduzir" para minimizar o volume, economize Tiff por precau√ß√£o e reduza a imagem para 10.000 pontos no lado comprido, pois a maioria dos servi√ßos (Sferika.ru ou o mesmo Google Maps) n√£o perder√° um panorama de volume muito grande - Sim, e n√£o h√° necessidade de enviar uma carga t√£o grande (para telefones com 4G, geralmente √© insuport√°vel).  Salvamos o resultado do trabalho em JPEG - a qualidade √© suficiente 10 e a sa√≠da possui um panorama de 50 megapixels e um tamanho de arquivo de 10 a 15 mb (dependendo dos detalhes). <br><br><img src="https://habrastorage.org/webt/ui/ea/vx/uieavxgqssxn5o-rgzc9c_ifpn4.png"><br><br>  Nosso panorama est√° pronto - resta apenas encontrar um servi√ßo para publica√ß√£o. <br><img src="https://habrastorage.org/webt/9w/pj/bx/9wpjbx-ml7dzugyjwm-11cdpp-q.png"><br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Panorama pronto aqui</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418775/">https://habr.com/ru/post/pt418775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418761/index.html">O livro ‚ÄúPure Python. As sutilezas da programa√ß√£o para profissionais ¬ª</a></li>
<li><a href="../pt418763/index.html">M√©dio / s√™nior: como sair do p√¢ntano?</a></li>
<li><a href="../pt418765/index.html">As dicas do Dadata ajudam a preencher qualquer formul√°rio de entrada. Agora cure</a></li>
<li><a href="../pt418767/index.html">O enorme legado de jogos do Adobe Flash e minhas tentativas de salv√°-lo</a></li>
<li><a href="../pt418769/index.html">Exemplo de c√°lculo do "fator de disponibilidade" para um sistema de TI</a></li>
<li><a href="../pt418777/index.html">‚ÄúN√£o h√° chefe aqui‚Äù: sobre como trabalhar com c√≥digo-fonte aberto e Apache Ignite na Sberbank Technologies</a></li>
<li><a href="../pt418779/index.html">Caixa com base no tablet: por que os varejistas da rede precisam dela (contamos no exemplo da nossa caixa)</a></li>
<li><a href="../pt418781/index.html">Adicione criptografia de email e assinatura eletr√¥nica ao Zimbra</a></li>
<li><a href="../pt418783/index.html">"Quem ontem foi um gigante monop√≥lio, amanh√£ pode se tornar nada." Entrevista com Evgeny Chereshnev da Biolink.Tech</a></li>
<li><a href="../pt418785/index.html">Amigo tudo. Agora √© oficial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>