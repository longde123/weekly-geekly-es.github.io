<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöî üßíüèø üí† OpenAI Gym + ROS + Gazebo: entra√Ænez un robot autonome √† la maison. Partie 1 üõåüèΩ üë®üèª‚Äçüè´ üò©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au cours des derni√®res ann√©es, nous avons assist√© √† l'introduction de technologies d'intelligence artificielle dans notre vie quotidienne - des aspira...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenAI Gym + ROS + Gazebo: entra√Ænez un robot autonome √† la maison. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441218/">  Au cours des derni√®res ann√©es, nous avons assist√© √† l'introduction de technologies d'intelligence artificielle dans notre vie quotidienne - des aspirateurs robotiques aux drones sans pilote.  Tous, contr√¥l√©s par l'intelligence artificielle, sont d√©j√† monnaie courante pour nous.  Mais malgr√© cela, le processus de d√©veloppement, de la conception √† la mise en ≈ìuvre, prend des ann√©es et n'est pas bon march√©.  De plus, les algorithmes d'apprentissage automatique n√©cessitent des donn√©es volumineuses et rien ne garantit que tout fonctionnera √† long terme. <br><br>  T√¥t ou tard, chaque d√©veloppeur arrive √† la conclusion qu'avant de cr√©er un vrai robot, vous devez tester le concept dans une simulation, d√©boguer tous les syst√®mes et, √† la fin, comprendre si la voie de d√©veloppement a √©t√© choisie. <br><br>  Le Dr Andrew Howard avait des id√©es similaires quand, avec son √©tudiant Nathon Koenig, il a commenc√© en 2002 le d√©veloppement d'un simulateur de gazebo 3D √† l'Universit√© de Californie du Sud.  Le concept d'un simulateur de haute pr√©cision est n√© de la n√©cessit√© de tester des robots dans diverses conditions ext√©rieures difficiles.  Dans les premi√®res √©tapes du d√©veloppement, cette approche permet d'√©conomiser du temps et de l'argent sur l'achat de l'√©quipement n√©cessaire. <br><br>  Dans cette s√©rie d'articles, je voudrais partager mon exp√©rience dans la simulation et la formation d'un v√©hicule sans pilote avec une seule cam√©ra ordinaire comme capteur. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/w6/mr/no/w6mrnofkyjq2p79saxfdw8xns7u.png"><br><br>  Bonjour √† tous.  Je suis titulaire d'une ma√Ætrise √®s sciences (informatique, MS) en informatique appliqu√©e √† l'Universit√© des sciences appliqu√©es de Berlin (HTW-Berlin). <br><br>  Dans le cadre de mon cours, je travaille sur les m√©thodes de formation de robots autonomes dans un environnement simul√© √† l'aide de ROS [1], Gazebo [2] et OpenAI Gym [3].  Ce cours est divis√© en deux parties. <br><br>  La premi√®re partie est consacr√©e au d√©veloppement d'un framework qui simplifierait le test d'algorithmes d'apprentissage par renforcement (formation avec renforcement) sur diff√©rents robots autonomes √† l'int√©rieur de la simulation Gazebo. <br><br>  Dans la deuxi√®me partie, je me concentrerai sur la mise en ≈ìuvre de l'algorithme de conduite autonome.  Je vais y travailler pour le prochain semestre, donc cet article et les prochains se concentreront principalement sur la mise en ≈ìuvre de l'environnement OpenAI Gym pour Gazebo.  L'apprentissage par renforcement (RL) lui-m√™me sera affect√© de mani√®re superficielle. <br><br>  Le code de projet complet peut √™tre trouv√© <a href="">ici</a> . <br><br><h3>  Configuration requise </h3><br><ul><li>  Ubuntu 18.04 ou Windows WSL Ubuntu 18.04 </li><li>  Python 2.7 </li><li>  pip </li><li>  CPU ou GPU Tenserflow </li></ul><br>  Nous utiliserons la version ROS de Melodic.  Cette version a plusieurs limitations et la plus importante d'entre elles est Ubuntu 18 (il est √©galement possible d'installer ROS sur Windows WSL et sur Ubuntu Headless, mais plus √† ce sujet une autre fois).  De plus, ROS ne prend toujours pas en charge Python 3. <br><br><h3>  Premi√®re partie: Introduction </h3><br>  Dans cette partie pilote, je parlerai bri√®vement des technologies qui seront utilis√©es pour cr√©er l'environnement.  Je d√©crirai √©galement le processus d'installation et, √† la fin, nous lancerons une simulation √† part enti√®re, qui peut √™tre contr√¥l√©e via l'API Gym. <br><br><h4>  ROS: ¬´ne r√©inventez pas la roue¬ª </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Robot Operating System (ROS)</a> est un cadre de programmation de robots.  ROS est une ¬´colle logicielle¬ª qui permet aux d√©veloppeurs de se concentrer sur leur t√¢che sp√©cifique.  Bien que ROS ne soit pas un syst√®me d'exploitation, il fournit des services tels que l'abstraction mat√©rielle, la gestion des appareils de bas niveau, la mise en ≈ìuvre de fonctions fr√©quemment utilis√©es, la transmission de messages entre les processus et la gestion des packages (plugins). <br><br>  ROS est con√ßu comme un syst√®me √† couplage l√¢che dans lequel un processus appel√© n≈ìud doit √™tre responsable d'une t√¢che.  Les n≈ìuds communiquent entre eux √† l'aide de messages passant par des canaux logiques appel√©s sujets.  Chaque n≈ìud peut envoyer ou recevoir des donn√©es d'un autre n≈ìud √† l'aide du mod√®le de publication - abonnement <br><br>  Pour ROS, des pilotes ont d√©j√† √©t√© impl√©ment√©s qui permettent de travailler de mani√®re unique avec de nombreux appareils, tels que contr√¥leurs, GPS, cam√©ras, t√©l√©m√®tres laser, etc. <br><br>  Et donc, installez ROS Melodic ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">instructions compl√®tes</a> ) <br><br><pre><code class="bash hljs">sudo sh -c <span class="hljs-string"><span class="hljs-string">'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/ros-latest.list'</span></span> sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update sudo apt install ros-melodic-desktop-full sudo rosdep init rosdep update <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"source /opt/ros/melodic/setup.bash"</span></span> &gt;&gt; ~/.bashrc <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> /opt/ros/melodic/setup.bash</code> </pre> <br>  Pour une raison quelconque, le package d'installation complet n'inclut pas certains packages n√©cessaires.  Installez-les s√©par√©ment: <br><br><pre> <code class="bash hljs">sudo apt install ros-melodic-ackermann-msgs sudo apt install ros-melodic-effort-controllers sudo apt install ros-melodic-joy sudo apt install ros-melodic-tf2-sensor-msgs</code> </pre> <br>  Nous ne nous attarderons pas sur eux en d√©tail.  Ils sont n√©cessaires pour contr√¥ler notre robot, ce qui sera discut√© plus tard. <br><br><h4>  Gazebo </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Gazebo</a> est un simulateur 3D dynamique open source d√©velopp√© par l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Open Source Robotic Foundation</a> et interagit assez √©troitement avec ROS.  Gazebo vous permet de simuler avec pr√©cision et efficacit√© des robots dans des conditions int√©rieures et ext√©rieures difficiles. <br><br>  Le simulateur se compose du serveur <i>gzserver</i> , qui est impliqu√© dans le calcul de la physique, les collisions et la simulation de capteurs.  Les clients peuvent se connecter au serveur, par exemple <i>gzclient</i> (pour le bureau) et <i>gzweb</i> (pour le navigateur).  Ce sont eux qui rendent les mod√®les. <br><br>  Tout cela permet de tester des syst√®mes robotiques complexes dans un espace virtuel beaucoup plus rapidement et sans risque d'endommager de vrais robots co√ªteux. <br><br>  Gazebo est inclus dans le package d'installation complet de ROS, vous n'avez donc pas besoin d'installer autre chose.  Pour la configuration sans t√™te, <i>gzweb</i> est requis.  Je parlerai de lui dans les parties suivantes. <br><br><h4>  OpenAI Gym </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenAI</a> est une soci√©t√© de recherche en intelligence artificielle √† but non lucratif co-fond√©e par Ilon Max. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenAI Gym</a> est une biblioth√®que Python qui fournit une API pour d√©velopper et comparer des algorithmes RL avec un grand nombre d'environnements virtuels et une API commune.  Gym poss√®de d√©j√† de nombreux environnements pr√™ts √† l'emploi, y compris pour les jeux Atari. <br><br><h4>  openai_ros </h4><br>  Mon projet est bas√© sur le package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">openai_ros</a> .  Ce package impl√©mente l'architecture propos√©e par l'√©quipe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">The Construct</a> .  Les gars de Construct ont d√©velopp√© un cadre commun qui impl√©mente l'API n√©cessaire pour g√©rer la simulation et d√©crit une API pour int√©grer Gazebo dans Gym, n√©cessitant une impl√©mentation minimale.  La structure propos√©e se compose de trois couches logiques (vous pouvez r√©ellement utiliser n'importe quel nombre), la plus basse d'entre elles est une autre ¬´colle¬ª qui relie l'API Gym √† Gazebo.  Plus d'informations √† ce sujet dans la partie suivante, lorsque nous analyserons le code. <br><br><h3>  Tout mettre ensemble </h3><br>  Nous devons d'abord cr√©er un r√©pertoire de travail pour catkin.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">catkin</a> est un syst√®me d'automatisation de construction comme CMake, qui est inclus par d√©faut dans le package d'installation de ROS: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ mkdir catkin_ws <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> catkin_ws/ mkdir src <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> src/</code> </pre> <br>  et clonez les packages ROS n√©cessaires. <br><br><h4>  Voiture de course Mit </h4><br>  Nous avons besoin d'un mod√®le de robot d√©velopp√© par le MIT avec tous les capteurs. <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/mit-racecar/racecar.git git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/mit-racecar/racecar-simulator.git</code> </pre> <br><h4>  openai_ros </h4><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://bitbucket.org/theconstructcore/openai_ros.git</code> </pre> <br><h4>  neuroracer </h4><br>  Eh bien, en fait, le projet lui-m√™me <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/karray/neuroracer.git</code> </pre> <br>  Ensuite, vous devez compiler tous ces packages <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/catkin_ws catkin_make</code> </pre> <br>  Vous devez √©galement installer toutes les biblioth√®ques python n√©cessaires. <br><br><pre> <code class="bash hljs">pip install -U numpy tensorflow gym keras</code> </pre> <br><h3>  Ex√©cution de la simulation </h3><br>  Pour ex√©cuter n'importe quel package ROS, nous devons d'abord charger dans la session de terminal actuelle tous les packages ROS que nous avons compil√©s: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">source</span></span> ~/catkin_ws/devel/setup.bash</code> </pre> <br>  Nous pouvons maintenant ex√©cuter la simulation du robot Racecar: <br><br><pre> <code class="bash hljs">roslaunch racecar_gazebo racecar_tunnel.launch</code> </pre> <br>  Cette commande lancera le serveur ma√Ætre ROS, le serveur Gazebo avec son interface utilisateur (sur le bureau), chargera le robot et le monde pour lui. <br><br>  Capture d'√©cran: <br><br><div class="spoiler">  <b class="spoiler_title">En-t√™te de spoiler</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ii/4m/70/ii4m70_-eybulu76xoi_d2_qmq8.png"><br></div></div><br>  Et la m√™me chose dans le deuxi√®me terminal pour notre algorithme RL: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">source</span></span> ~/catkin_ws/devel/setup.bash roslaunch neuroracer_gym_rl qlearning.launch</code> </pre> <br>  Cette √©quipe lancera notre package <i>neuroracer_gym_rl</i> , qui impl√©mente un algorithme Q-Learning simple dans notre environnement Gym.  Nous allons l'analyser dans la prochaine partie. <br><br>  Ceux qui ne peuvent pas attendre peuvent trouver le code source <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Pour l'avenir, je dirai qu'apr√®s plusieurs jours de formation sur un serveur avec une carte m√©moire GeForce GTX 1080 Ti 11 Go, cet algorithme simple n'a vraiment rien appris.  Dans la partie suivante, je vais √©num√©rer les raisons possibles, mais vous pouvez maintenant exp√©rimenter votre impl√©mentation. <br><br><h3>  Conclusion </h3><br>  Et donc, nous avons une simulation enti√®rement fonctionnelle d'une voiture autonome et un mod√®le d'algorithme RL pr√™t √† l'emploi.  Dans la partie suivante, nous analyserons plus en d√©tail openai_ros et discuterons des capteurs install√©s sur le robot, puis je montrerai comment impl√©menter mes algorithmes et quels probl√®mes peuvent survenir pendant la formation. <br><br>  PS: C'est ma premi√®re exp√©rience d'√©criture d'un article.  Par cons√©quent, n'h√©sitez pas √† √©crire si vous trouvez des erreurs ou si vous avez des id√©es ou des critiques constructives.  J'essaierai d'en tenir compte dans les parties suivantes. <br><br><h3>  Les r√©f√©rences </h3><br>  [1] (M. Quigley, K. Conley, B. Gerkey, J. Faust, T. Foote, J. Leibs, R. Wheeler et AY Ng. Ros: un syst√®me d'exploitation de robot open source. Dans un atelier de l'ICRA sur logiciel open source, volume 3, page 5. Kobe, Japon, 2009. <br><br>  [2] NP Koenig et A. Howard.  Concevez et utilisez des paradigmes pour gazebo, un simulateur multi-robots open source.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dans IROS, volume 4, pages 2149‚Äì2154</a> .  Citeseer, 2004. <br><br>  [3] LPJSJSJTWZ Greg Brockman, Vicki Cheung.  Openai gym, 2016, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://https/%2520">arXiv: 1606.01540</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441218/">https://habr.com/ru/post/fr441218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441208/index.html">Comment nous avons r√©duit l'√©mission de pr√™ts √† 2 clics</a></li>
<li><a href="../fr441210/index.html">Pacemaker de stockage en cluster + DRBD (double primaire) + samba</a></li>
<li><a href="../fr441212/index.html">Travailler avec la protection des informations cryptographiques et les supports de cl√©s mat√©rielles sous Linux</a></li>
<li><a href="../fr441214/index.html">Guide de l'utilisateur Kibana. Visualisation. Partie 1</a></li>
<li><a href="../fr441216/index.html">Miroir noir ou pub Picooc?</a></li>
<li><a href="../fr441220/index.html">Analyse des r√©centes attaques de masse avec capture DNS</a></li>
<li><a href="../fr441222/index.html">Pourquoi Kubernetes est-il si compliqu√© avec les r√©f√©rentiels?</a></li>
<li><a href="../fr441224/index.html">Cr√©er un exemple ARCore de visages augment√©s dans Unity</a></li>
<li><a href="../fr441226/index.html">Forbes a publi√© une liste des soci√©t√©s Internet russes les plus ch√®res en 2019</a></li>
<li><a href="../fr441234/index.html">Effets de filtrage SVG. Partie 6. Cr√©er des textures avec feTurbulence</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>