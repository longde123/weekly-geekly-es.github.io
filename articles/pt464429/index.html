<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿 🏇🏼 🧖🏻 Os 10 erros mais comuns ao trabalhar com a plataforma Spring. Parte 1 👰🏼 🥘 📉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá pessoal. Hoje compartilhamos a primeira parte do artigo, cuja tradução foi preparada especificamente para os alunos do curso "Developer on the Spr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Os 10 erros mais comuns ao trabalhar com a plataforma Spring. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/464429/">  <i>Olá pessoal.</i>  <i>Hoje compartilhamos a primeira parte do artigo, cuja tradução foi preparada especificamente para os alunos do curso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Developer on the Spring Framework"</a> .</i>  <i>Vamos começar!</i> <br><br><img src="https://habrastorage.org/webt/sp/gg/np/spggnpu1e19b9c_yb66nbynmbqq.png"><br><br><hr><br>  A primavera é talvez uma das plataformas de desenvolvimento Java mais populares.  Esta é uma ferramenta poderosa, mas bastante difícil de aprender.  Seus conceitos básicos são bastante fáceis de entender e aprender, mas são necessários tempo e esforço para se tornar um desenvolvedor experiente do Spring. <br><br>  Neste artigo, examinaremos alguns dos erros mais comuns cometidos ao trabalhar no Spring e relacionados, em particular, ao desenvolvimento de aplicativos da Web e ao uso da plataforma Spring Boot.  Conforme observado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do Spring Boot</a> , o Spring Boot adota uma abordagem <i>padronizada</i> para criar aplicativos prontos para uso, e este artigo seguirá essa abordagem.  Ele fornecerá várias recomendações que podem ser efetivamente usadas no desenvolvimento de aplicativos Web padrão baseados no Spring Boot. <a name="habracut"></a><br><br>  Caso você não esteja familiarizado com a plataforma Spring Boot, mas queira experimentar os exemplos deste artigo, criei um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">repositório GitHub com materiais adicionais para este artigo</a> .  Se em algum momento você estiver um pouco confuso ao ler este artigo, aconselho a criar um clone deste repositório e experimentar o código no seu computador. <br><br><h2>  Erro comum nº 1: programação em nível muito baixo </h2><br>  Nós sucumbimos facilmente a esse erro generalizado, já que a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"síndrome de rejeição do desenvolvimento de outra pessoa" é</a> bastante típica para o ambiente de programação.  Um de seus sintomas é a constante reescrita de partes do código comumente usado, e esse é um sintoma observado por muitos programadores. <br>  Estudar a estrutura interna e os recursos de implementação de uma biblioteca específica geralmente é um processo útil, necessário e interessante, mas se você escrever constantemente o mesmo tipo de código ao executar a implementação de funções de baixo nível, isso pode ser prejudicial para você como desenvolvedor de software.  É por isso que abstrações e plataformas como o Spring existem e são usadas - elas evitam o trabalho manual repetitivo e permitem que você se concentre nos objetos da sua área de assunto e na lógica do código do programa em um nível superior. <br><br>  Portanto, abstrações não devem ser evitadas.  Da próxima vez que você precisar resolver um problema específico, faça uma pesquisa rápida e descubra se a biblioteca que resolve esse problema já está incorporada no Spring - você provavelmente encontrará uma solução pronta para uso.  Uma dessas bibliotecas úteis é o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Projeto Lombok</a> , cujas anotações serão usadas nos exemplos deste artigo.  O Lombok é usado como um gerador de código de modelo; portanto, o desenvolvedor preguiçoso que mora em cada um de nós ficará muito feliz em se familiarizar com esta biblioteca.  Veja, por exemplo, como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">componente JavaBean padrão se</a> parece no Lombok: <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-meta"><span class="hljs-meta">@Setter</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> firstBeanProperty; String secondBeanProperty; }</code> </pre> <br>  Como você já deve ter entendido, o código acima é convertido no seguinte formato: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> firstBeanProperty; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String secondBeanProperty; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFirstBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSecondBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.secondBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFirstBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> firstBeanProperty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.firstBeanProperty = firstBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSecondBeanProperty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String secondBeanProperty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.secondBeanProperty = secondBeanProperty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre> <br>  Observe que você provavelmente precisará instalar o plug-in apropriado se desejar usar o Lombok em seu ambiente de desenvolvimento integrado.  A versão deste plug-in para o IntelliJ IDEA pode ser encontrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  Erro comum número 2. “Vazamento” de estruturas internas </h2><br>  Dar acesso a estruturas internas nunca foi uma boa ideia, pois prejudica a flexibilidade do modelo de serviço e, como resultado, contribui para a formação de um estilo de programação ruim.  O "vazamento" de estruturas internas se manifesta no fato de que a estrutura do banco de dados se torna acessível a partir de determinados pontos de extremidade da API.  Por exemplo, suponha que o seguinte “bom e velho objeto Java” (POJO) represente uma tabela no seu banco de dados: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Integer id; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TopTalentEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; } }</code> </pre> <br>  Suponha que exista um terminal que precise acessar os dados de um objeto <code>TopTalentEntity</code> .  Retornar instâncias do <code>TopTalentEntity</code> parece uma ideia tentadora, mas uma solução mais flexível seria criar uma nova classe que represente os dados do TopTalentEntity para o terminal da API: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@NoArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; }</code> </pre> <br>  Portanto, fazer alterações nos componentes internos do banco de dados não exigirá alterações adicionais no nível do serviço.  Vamos ver o que acontece se o campo de senha for adicionado à classe <code>TopTalentEntity</code> para armazenar hashes de senha de usuário no banco de dados: se não houver conector, como <code>TopTalentData</code> , e o desenvolvedor esquecer de alterar a parte da interface do serviço, isso poderá levar à divulgação indesejada de informações secretas! <br><br><h2>  Erro comum número 3. Combinar funções que seriam melhores para distribuir no código </h2><br>  Organizar o código do aplicativo à medida que cresce se torna uma tarefa cada vez mais importante.  Curiosamente, a maioria dos princípios de programação eficaz para de funcionar quando uma certa escala de desenvolvimento é atingida, especialmente se a arquitetura do aplicativo não foi bem pensada.  E um dos erros cometidos com mais frequência é a combinação de funções no código que são mais razoáveis ​​para implementar separadamente. <br><br>  O motivo da violação do princípio da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">separação de responsabilidades é</a> geralmente a adição de novas funcionalidades às classes existentes.  Talvez essa seja uma boa solução momentânea (em particular, requer escrever uma quantidade menor de código), mas no futuro inevitavelmente se tornará um problema, inclusive nos estágios de teste e manutenção do código e entre eles.  Considere o seguinte controlador que retorna <code>TopTalentData</code> do repositório: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentRepository topTalentRepository; <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/toptal/get"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentRepository.findAll() .stream() .map(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::entityToData) .collect(Collectors.toList()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> TopTalentData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">entityToData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentEntity topTalentEntity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentData(topTalentEntity.getName()); } }</code> </pre> <br>  À primeira vista, parece que não há erros óbvios nesse fragmento de código.  Ele fornece uma lista de objetos <code>TopTalentData</code> , extraídos de instâncias da classe <code>TopTalentEntity</code> .  Mas se você observar o código mais de perto, veremos que, na realidade, o <code>TopTalentController</code> executa várias ações aqui, a saber, correlaciona solicitações com um endpoint específico, recupera dados do repositório e converte objetos recebidos do <code>TopTalentRepository</code> em um formato diferente.  Uma solução mais limpa deve separar essas funções em classes separadas.  Por exemplo, pode ser assim: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RestController</span></span> <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/toptal"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentService topTalentService; <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(<span class="hljs-string"><span class="hljs-string">"/get"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentService.getTopTalent(); } } <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentRepository topTalentRepository; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TopTalentEntityConverter topTalentEntityConverter; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;TopTalentData&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTopTalent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> topTalentRepository.findAll() .stream() .map(topTalentEntityConverter::toResponse) .collect(Collectors.toList()); } } <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TopTalentEntityConverter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> TopTalentData </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toResponse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TopTalentEntity topTalentEntity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TopTalentData(topTalentEntity.getName()); } }</code> </pre> <br>  Uma vantagem adicional dessa hierarquia é que ela nos permite entender onde uma função está localizada simplesmente observando o nome da classe.  Posteriormente, durante o teste, podemos substituir facilmente o código de qualquer uma dessas classes por código substituto, se necessário. <br><br><h2>  Número de erro comum 4. Código uniforme e tratamento inadequado de erros </h2><br>  O tópico uniformidade de código não é exclusivo do Spring (ou Java em geral), mas, no entanto, é um aspecto importante que deve ser considerado ao trabalhar com projetos no Spring.  A escolha de um estilo de programação específico pode ser um tópico de discussão (e geralmente é consistente na equipe de desenvolvimento ou em toda a empresa), mas, em qualquer caso, a presença de um padrão comum para escrever código contribui para um aumento na eficiência do trabalho.  Isto é especialmente verdade se várias pessoas trabalham no código.  O código uniforme pode ser transmitido de desenvolvedor para desenvolvedor sem gastar muito esforço em mantê-lo ou em longas explicações sobre por que essas ou aquelas classes são necessárias. <br><br>  Imagine que existe um projeto Spring no qual existem vários arquivos de configuração, serviços e controladores.  Seguindo a uniformidade semântica em nomeá-los, criamos uma estrutura pela qual você pode pesquisar facilmente e na qual qualquer desenvolvedor pode entender facilmente o código.  Por exemplo, você pode adicionar o sufixo Config aos nomes das classes de configuração, o sufixo Service aos nomes do serviço e o sufixo Controller aos nomes do controlador. <br><br>  O tratamento de erros no servidor está intimamente relacionado à uniformidade do código e merece atenção especial.  Se você já lidou com exceções provenientes de uma API mal escrita, provavelmente sabe como é difícil entender o significado dessas exceções corretamente e ainda mais difícil determinar por que elas realmente ocorreram. <br>  Como desenvolvedor de API, idealmente, você gostaria de cobrir todos os pontos de extremidade com os quais o usuário está trabalhando e levá-los a usar um único formato de mensagem de erro.  Geralmente, isso significa que você precisa usar códigos de erro padrão e sua descrição e abandonar decisões duvidosas, como fornecer ao usuário uma mensagem "500 Internal Server Error" ou os resultados de um rastreamento de pilha (a última opção, a propósito, deve ser evitada por todos os meios, pois você está revelando dados internos, além disso, é difícil processar esses resultados no lado do cliente). <br>  Aqui, por exemplo, como pode ser o formato geral da mensagem de erro: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ErrorResponse</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Integer errorCode; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String errorMessage; }</code> </pre> <br>  Um formato semelhante a este geralmente é encontrado nas APIs mais populares e, por regra, funciona muito bem porque pode ser documentado de maneira fácil e sistemática.  Você pode converter uma exceção nesse formato adicionando a anotação <code>@ExceptionHandler</code> ao método (para um exemplo da anotação, consulte a seção "Erro comum nº 6"). <br><br><h2>  Erro comum número 5. Trabalho incorreto com multithreading </h2><br>  A implementação de multithreading pode ser uma tarefa difícil, independentemente de ser usada em aplicativos de desktop ou web, em projetos Spring ou em outras plataformas.  Os problemas causados ​​pela execução paralela de programas são difíceis de rastrear, e lidar com eles com um depurador geralmente é muito difícil.  Se você entender que está lidando com um erro relacionado à execução paralela, provavelmente terá que abandonar o depurador e examinar o código manualmente até encontrar a causa raiz do erro.  Infelizmente, não existe uma maneira padrão de resolver esses problemas.  Em cada caso, é necessário avaliar a situação e "atacar" o problema com o método que parece melhor nas condições especificadas. <br><br>  Idealmente, é claro, você gostaria de evitar completamente os erros associados ao multithreading.  E, embora não exista uma receita universal aqui, ainda posso oferecer algumas recomendações práticas. <br><br><h3>  Evite usar estados globais </h3><br>  Primeiro, lembre-se sempre do problema dos "estados globais".  Se você estiver desenvolvendo um aplicativo multithread, precisará monitorar cuidadosamente absolutamente todas as variáveis ​​globalmente modificáveis ​​e, se possível, livrar-se delas completamente.  Se você ainda tiver um motivo pelo qual a variável global deve ser modificável, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sincronize</a> e monitore adequadamente o desempenho do seu aplicativo - verifique se ele não diminui a velocidade devido a períodos de espera adicionais. <br><br><h3>  Evite objetos mutáveis </h3><br>  Essa idéia vem diretamente dos princípios da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">programação funcional</a> e, sendo adaptada aos princípios da OOP, afirma que classes mutáveis ​​e estados mutáveis ​​devem ser evitados.  Em resumo, isso significa que você deve abster-se de definir métodos (setters) e ter campos particulares com o modificador final em todas as classes de modelo.  O único momento em que seus valores mudam é quando o objeto é criado.  Nesse caso, você pode ter certeza de que não há problemas associados à competição por recursos e, ao acessar as propriedades do objeto, sempre serão obtidos os valores corretos. <br><br><h3>  Registrar dados importantes </h3><br>  Avalie onde os problemas podem ocorrer no aplicativo e configure um log de todos os dados importantes com antecedência.  Se ocorrer um erro, você ficará feliz em ter informações sobre quais solicitações foram recebidas e poderá entender melhor os motivos do mau funcionamento do seu aplicativo.  No entanto, lembre-se de que o log envolve E / S de arquivo adicional e não deve ser abusado, pois isso pode afetar adversamente o desempenho do aplicativo. <br><br><h3>  Use implementações de threads prontas </h3><br>  Quando você precisar gerar seus encadeamentos (por exemplo, para criar solicitações assíncronas para vários serviços), use implementações de encadeamentos seguros prontas em vez de criar seus próprios.  Na maioria dos casos, você pode usar as abstrações <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ExecutorService</a> e as espetaculares abstrações funcionais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CompletableFuture</a> para Java 8. A plataforma Spring também permite lidar com solicitações assíncronas usando a classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DeferredResult</a> . <br><br>  O fim da primeira parte. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Leia a segunda parte.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464429/">https://habr.com/ru/post/pt464429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464413/index.html">PVS-Studio - mecanismo de progresso</a></li>
<li><a href="../pt464415/index.html">Novo serviço de dica para pesquisar hh.ru</a></li>
<li><a href="../pt464417/index.html">10 estruturas PHP populares em 2019</a></li>
<li><a href="../pt464421/index.html">Radio Viber - todas as estações de rádio do messenger online</a></li>
<li><a href="../pt464423/index.html">Como gerenciar o tempo? Resposta do freelancer</a></li>
<li><a href="../pt464433/index.html">Plataformas de teste móvel na nuvem</a></li>
<li><a href="../pt464435/index.html">Como não se afogar em um mar de tecnologia e abordagens: a experiência de 50 especialistas</a></li>
<li><a href="../pt464437/index.html">Como a equipe de desenvolvimento pode ganhar mais criando sites de tráfego [Guia de Implementação]</a></li>
<li><a href="../pt464443/index.html">Natas Web. Passagem da plataforma CTF destinada a explorar vulnerabilidades da Web. Parte 2</a></li>
<li><a href="../pt464445/index.html">Por que é realmente impossível ser vegetariano</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>