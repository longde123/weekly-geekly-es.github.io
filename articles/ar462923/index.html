<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🔬 🖐🏿 ✌️ دخول Aeronet الحلقة 3: العثور على الكرة ☝🏾 🐈 🏠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="اليوم سنبحث في كيفية اكتشاف كرة حمراء باستخدام كاميرا Raspberry PI ، وكيفية البدء في توجيه الطائرة بدون طيار لدينا. 



 في المقالات السابقة ، درسنا ب...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>دخول Aeronet الحلقة 3: العثور على الكرة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462923/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  اليوم سنبحث في كيفية اكتشاف كرة حمراء باستخدام كاميرا Raspberry PI ، وكيفية البدء في توجيه الطائرة بدون طيار لدينا. <br><img src="https://habrastorage.org/webt/zd/kx/lw/zdkxlwtyy5po69awqvocprrbivq.png" alt="البحث بالون"></p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  في المقالات السابقة ، درسنا بالتفصيل إطلاق طائرة استطلاع <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">افتراضية</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">وحقيقية</a> مستقلة.  لقد حان الوقت لطائرة بدون طيار لدينا لإيجاد هدف حقيقي. <br>  سيكون الهدف ، كما ذكرنا ، كرة حمراء. </p><br><h2 id="podgotovka-raspberry" style=";text-align:right;direction:rtl">  توت العليق </h2><br><p style=";text-align:right;direction:rtl">  سنكتب برنامجًا للتصفية على إصدار سطح المكتب من Raspbian.  منذ تكوين المرشح نذهب في الوقت نفسه إلى تحريف الإعدادات ومعرفة نتيجة الغش لدينا. <br>  على محرك أقراص فلاش منفصل ، سنقوم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">بتثبيت Raspbian Desktop</a> . <br>  للعمل مع سطح المكتب Raspbian ، تحتاج إلى شاشة منفصلة + لوحة مفاتيح + ماوس متصلة بـ Raspberry ، وهي ليست مريحة للغاية.  ولكن يمكنك العمل مع سطح المكتب بدون رأس وعبر الشبكة ، عبر VNC. <br>  للقيام بذلك ، تحتاج إلى: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  تمكين VNC في raspi-config </li><li style=";text-align:right;direction:rtl">  تكوين نقطة اتصال واي فاي على التوت.  لا يتم التركيز على wpa_supplicant على إصدار سطح المكتب ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هنا</a> تكمن التعليمات الخاصة بإعداد نقاط wifi في Raspberry. </li><li style=";text-align:right;direction:rtl">  كعميل ، يمكنك استخدام <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">realvnc</a> . </li></ol><br><p style=";text-align:right;direction:rtl">  لتطوير مرشح في بيثون - ضع OpenCV: </p><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">sudo apt-get install python-opencv</code> </pre> <br><h2 id="hsv-filtr-dlya-videopotoka" style=";text-align:right;direction:rtl">  مرشح HSV لدفق الفيديو </h2><br><p style=";text-align:right;direction:rtl">  هناك طريقة بسيطة وطريقة سريعة لتسليط الضوء على كائن ملون في صورة ما هي نقل الصورة إلى <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">فراغ لون HSV</a> ، ثم التصفية حسب النطاق المطلوب من الصبغة والتشبع والقيمة باستخدام cv2.inRange.  أخذت <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هذا المثال</a> كأساس. </p><br><p style=";text-align:right;direction:rtl">  خصوصية مهمتنا هي أن الكرة لدينا حمراء ، وإذا نظرنا بعناية إلى مقياس النغمة (HUE) ، سنرى أن اللون الأحمر على حوافه: <br><img src="https://habrastorage.org/webt/ep/ha/i4/ephai4xomvv7ouhb3igivfeaxfe.png" alt="مقياس HSV"></p><br><p style=";text-align:right;direction:rtl">  لذلك ، إذا قمت بتصفية جزء واحد فقط من النطاق ، عندما تتغير الإضاءة ، فقد "تختفي" الكرة من المرشح ، مما يؤثر سلبًا على هدف الطائرة بدون طيار لدينا.  لذلك ، بالإضافة إلى المعلمات H و S و V ، سنضيف علامة الانعكاس العكسية إلى الفلتر - حتى نتمكن من تصفية كل شيء ما عدا الكرة ، ثم عكس الفلتر ببساطة. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">يظهر رمز برنامج التصفية أدناه:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#coding=utf-8 import cv2 import numpy as np def nothing(*arg): pass cv2.namedWindow( "result" ) #    cv2.namedWindow( "img" ) #   cv2.namedWindow( "settings" ) #    cap = cv2.VideoCapture(0)#video.create_capture(0) #  6         cv2.createTrackbar('invert', 'settings', 0, 1, nothing) cv2.createTrackbar('h1', 'settings', 0, 255, nothing) cv2.createTrackbar('s1', 'settings', 0, 255, nothing) cv2.createTrackbar('v1', 'settings', 0, 255, nothing) cv2.createTrackbar('h2', 'settings', 255, 255, nothing) cv2.createTrackbar('s2', 'settings', 255, 255, nothing) cv2.createTrackbar('v2', 'settings', 255, 255, nothing) while True: flag, img = cap.read() hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV ) #    invert = cv2.getTrackbarPos('invert', 'settings') h1 = cv2.getTrackbarPos('h1', 'settings') s1 = cv2.getTrackbarPos('s1', 'settings') v1 = cv2.getTrackbarPos('v1', 'settings') h2 = cv2.getTrackbarPos('h2', 'settings') s2 = cv2.getTrackbarPos('s2', 'settings') v2 = cv2.getTrackbarPos('v2', 'settings') #       h_min = np.array((h1, s1, v1), np.uint8) h_max = np.array((h2, s2, v2), np.uint8) #       HSV thresh = cv2.inRange(hsv, h_min, h_max) if invert&gt;0: cv2.bitwise_not(thresh,thresh) cv2.imshow('result', thresh) cv2.imshow('img', img) ch = cv2.waitKey(5) if ch == 27: break cap.release() cv2.destroyAllWindows()</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  وضع عامل التصفية على الكرة يبدو كالتالي: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/DlWqoHN2omM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="raschyot-polozheniya-sharika-v-prostranstve" style=";text-align:right;direction:rtl">  حساب موقع الكرة في الفضاء </h2><br><p style=";text-align:right;direction:rtl">  بعد تلقي المرشح ، يمكننا العثور على الكرة في صورة المرشح باستخدام وظيفة تمييز الكفاف <code>cv2.findContours</code> . </p><br><p style=";text-align:right;direction:rtl">  في برنامجنا ، سنقوم بالتكرار على جميع المعالم الموجودة ، ونختار أكثر من 10x10 نقطة ، ونختار أكبرها - ستكون هذه هي الكرة المرغوبة.  إذا ضربت عدة أشياء الكاميرا - للتوجيه ، فإننا نستخدم أقرب واحد ، أي  أكبر واحد. </p><br><p style=";text-align:right;direction:rtl">  نرسم المعلومات المفيدة للمرشح إلى الصورة الناتجة: ارسم الخطوط العريضة التي تم العثور عليها ودائرة أكبرها ، وحدد مركز الخط (إلى أين تطير) مع الخطوط ، واشتق قطر الكرة عند النقاط وحساب المسافة إليه ، زاوية الانحراف.  بالإضافة إلى ذلك ، في وسط الشاشة ، أضفت "نطاق" + أحسب وعرضت معدل الإطار - للتحكم في سرعة مرشحنا. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ويرد النص الكامل لبرنامج التصفية أدناه:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#coding=utf-8 import cv2 import numpy as np import math if __name__ == '__main__': def nothing(*arg): pass cv2.namedWindow( "result" ) #    cv2.namedWindow( "source" ) # source video cv2.namedWindow( "settings" ) #    cap = cv2.VideoCapture(0) cap.set(cv2.CAP_PROP_FRAME_WIDTH, 320) cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 240) cap.set(cv2.CAP_PROP_FPS,40) #  6         cv2.createTrackbar('invert', 'settings', 0, 1, nothing) cv2.createTrackbar('h1', 'settings', 0, 255, nothing) cv2.createTrackbar('s1', 'settings', 0, 255, nothing) cv2.createTrackbar('v1', 'settings', 0, 255, nothing) cv2.createTrackbar('h2', 'settings', 255, 255, nothing) cv2.createTrackbar('s2', 'settings', 255, 255, nothing) cv2.createTrackbar('v2', 'settings', 255, 255, nothing) crange = [0,0,0, 0,0,0] #set up initial values cv2.setTrackbarPos('invert','settings',1) cv2.setTrackbarPos('h1','settings',7) cv2.setTrackbarPos('h2','settings',158) cv2.setTrackbarPos('s1','settings',0) cv2.setTrackbarPos('s2','settings',255) cv2.setTrackbarPos('v1','settings',0) cv2.setTrackbarPos('v2','settings',255) color_blue = (255,255,0) color_red = (0,0,255) color_green = (0,255,0) color_white = (255,255,255) color_yellow = (0,255,255) color_black = (0,0,0) real_ballon_r = 0.145 #baloon real radius in meters while True: flag, img = cap.read() hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV ) #    invert = cv2.getTrackbarPos('invert', 'settings') h1 = cv2.getTrackbarPos('h1', 'settings') s1 = cv2.getTrackbarPos('s1', 'settings') v1 = cv2.getTrackbarPos('v1', 'settings') h2 = cv2.getTrackbarPos('h2', 'settings') s2 = cv2.getTrackbarPos('s2', 'settings') v2 = cv2.getTrackbarPos('v2', 'settings') #       h_min = np.array((h1, s1, v1), np.uint8) h_max = np.array((h2, s2, v2), np.uint8) #       HSV thresh = cv2.inRange(hsv, h_min, h_max) if invert&gt;0: cv2.bitwise_not(thresh,thresh) #find contours _, contours0, hierarchy = cv2.findContours( thresh.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE) max_area = 0 max_center_x=None max_center_y=None max_baloon_r=None max_yaw_shift=None for cnt in contours0: rect = cv2.minAreaRect(cnt) box = cv2.boxPoints(rect) box = np.int0(box) center = (int(rect[0][0]),int(rect[0][1])) area = int(rect[1][0]*rect[1][1]) if area &gt; 100: baloon_r = int(math.sqrt(area)/2) yaw_shift = int( (center[0] - 320/2) * 130 / 320) # 130 degree camera for 320 pics image cv2.circle(img, center, baloon_r , color_red, 1) if area&gt;max_area: max_area=area max_center_x = center[0] max_center_y = center[1] max_baloon_r = baloon_r max_yaw_shift = yaw_shift #draw main baloon if max_area&gt;0: cv2.circle(img, (max_center_x,max_center_y), max_baloon_r+2 , color_blue, 2) cv2.putText(img, "D=%d" % int(max_baloon_r*2), (10, 20), cv2.FONT_HERSHEY_SIMPLEX, 0.5, color_red, 1) cv2.putText(img, "angle=%d '" % max_yaw_shift, (10, 40), cv2.FONT_HERSHEY_SIMPLEX, 0.5, color_green, 1) max_distance = real_ballon_r/math.tan(max_baloon_r/320.0*(math.pi*160.0/360.0)) #distance to baloon #print max_distance cv2.putText(img, "%fm" % max_distance, (10, 60), cv2.FONT_HERSHEY_SIMPLEX, 0.5, color_blue, 1) cv2.line(img, (max_center_x, 1), (max_center_x, 239) , color_white, 1) cv2.line(img, (1,max_center_y), (319, max_center_y) , color_white, 1) #draw target cv2.line(img, (320/2-10, 240/2-10), (320/2+10, 240/2+10) , color_yellow, 1) cv2.line(img, (320/2+10, 240/2-10), (320/2-10, 240/2+10) , color_yellow, 1) # show results cv2.imshow('source', img) cv2.imshow('result', thresh) ch = cv2.waitKey(5) if ch == 27: break cap.release() cv2.destroyAllWindows()</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ينظر برنامج الصورة من الكاميرا إلى المسافة إلى الكرة وزوايا الانحراف والميل التي تنحرف بها الكرة عن مركز صورة الكاميرا.  هذه المعلومات كافية لنا لهدف الطائرة بدون طيار على الكرة.  كذلك سوف نشارك في برنامج التوجيه. </p><br><h2 id="paket-ros-obnaruzhivayuschiy-sharik" style=";text-align:right;direction:rtl">  كشف الكرة ROS الحزمة </h2><br><p style=";text-align:right;direction:rtl">  يمكن نقل الوظيفة المطورة إلى نظام التوت بدون رأس مع تثبيت ROS.  سنقوم بإنشاء حزمة baloon ROS التي ستؤدي الوظائف التالية: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إطلاق mavros ، تزويدنا وحدة تحكم الطيران </li><li style=";text-align:right;direction:rtl">  تشغيل برنامج الكشف عن الكرة لدينا.  في البرنامج ، سنضيف نشر إحداثيات الكرة وتصحيح الصور في موضوعات ROS المقابلة </li><li style=";text-align:right;direction:rtl">  قم بتشغيل web_video_server - أحد مكونات ROS التي تسمح لنا بمراقبة مرشحنا من الخارج باستخدام متصفح </li></ol><br><p style=";text-align:right;direction:rtl">  قبل إنشاء حزمة ROS ، أضف الوظيفة التالية إلى برنامج تصفية ROS لدينا للعمل في بيئة ROS: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>قراءة إعدادات الكاميرا.</strong>  يتم تعيين المعلمات في ROS في شكل ملف yaml ، والتي يتم الحصول عليها عادة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">أثناء معايرة الكاميرا</a> .  نحن مهتمون فقط بأحجام الصور (العرض والارتفاع) ، ولكن من أجل اتباع مفهوم ROS ، سنحصل عليها من ملف yaml. </li><li style=";text-align:right;direction:rtl">  <strong>الحصول على المعلمات مرشح المحدد.</strong>  سنقوم بتدوين معلمات المرشح المحددة مسبقًا في ملف الإطلاق لحزمة ROS الخاصة بنا. </li><li style=";text-align:right;direction:rtl">  <strong>نشر إحداثيات الكرة المستلمة</strong> في موضوع ROS <code>/baloon_detector/twist</code> </li><li style=";text-align:right;direction:rtl">  <strong>نشر صور التصحيح</strong> على موضوعات ROS <code>/baloon_detector/image_filter</code> و <code>/baloon_detector/image_result</code> </li></ol><br><p style=";text-align:right;direction:rtl">  يمكنك تشغيل البرنامج للتنفيذ باستخدام <code>python baloon_pose_cv.py</code> المعتاد - ولكن هناك أيضًا طريقة أكثر ملاءمة - لحزم الوظائف التي نحتاجها في حزمة ROS وتكوين تشغيله التلقائي عند بدء تشغيل النظام. </p><br><p style=";text-align:right;direction:rtl">  هناك الكثير من الدروس حول <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">إنشاء حزم ROS على الشبكة</a> ، لذلك سأقتصر على قائمة الخطوات اللازمة. </p><br><p style=";text-align:right;direction:rtl">  دعنا ننشئ دليل مساحة عمل ROS لحزمتنا ، وحزمة ROS نفسها: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">mkdir -p ~/baloon_ws/src <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/baloon_ws/ catkin_make <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> devel/setup.bash <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> src catkin_create_pkg baloon std_msgs rospy</code> </pre> <br><p style=";text-align:right;direction:rtl">  نضع في الدليل ~ / baloon_ws / src / baloon / src الملفات الضرورية لتشغيل الحزمة الخاصة بنا: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  baloon_pose_cv.py - برنامج الكشف عن الكرة </li><li style=";text-align:right;direction:rtl">  baloon_cv.launch - ملف الإطلاق لإطلاق حزمة ROS الخاصة بنا </li><li style=";text-align:right;direction:rtl">  fe130_320_01.yaml - ملف تم الحصول عليه نتيجة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">لمعايرة الكاميرا</a> .  نحن مهتمون به فقط في حجم الصورة ، ولكن في المستقبل يمكن استخدام هذا الملف لإجراء تحليل أعمق للصور ، واستعادة المشاهد ثلاثية الأبعاد من صورة ، إلخ. </li><li style=";text-align:right;direction:rtl">  baloon.service ، roscore.env - يتم استخدام هذه الملفات للتشغيل التلقائي لحزمة ROS </li></ol><br><p style=";text-align:right;direction:rtl">  فيما يلي نصوص كل ملف: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">baloon_pose_cv.py - برنامج الكشف الرئيسي عن الكرة</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python # coding=UTF-8 # zuza baloon seeker import rospy from sensor_msgs.msg import CameraInfo, Image import time import cv2 from cv_bridge import CvBridge, CvBridgeError import numpy as np #import tf.transformations as t from geometry_msgs.msg import TwistStamped, Quaternion, Point, PoseStamped, TransformStamped import copy from std_msgs.msg import ColorRGBA import tf2_ros import math import yaml my_cam_info=None my_fps=0 my_last_fps=0 my_time_fps=time.time() bridge = CvBridge() mtx=None dist=None def raspicam_loop_cv(): global my_fps, my_last_fps, my_time_fps, mtx, dist # initialize the camera and grab a reference to the raw camera capture camera = cv2.VideoCapture(0) camera.set(cv2.CAP_PROP_FRAME_WIDTH, my_cam_info.width) camera.set(cv2.CAP_PROP_FRAME_HEIGHT, my_cam_info.height) camera.set(cv2.CAP_PROP_FPS, rospy.get_param('/baloon_detector/framerate')) # allow the camera to warmup time.sleep(0.1) color_blue = (255,255,0) color_red = (0,0,255) color_green = (0,255,0) color_white = (255,255,255) color_yellow = (0,255,255) color_black = (0,0,0) #    invert = rospy.get_param('/baloon_detector/invert') h1 = rospy.get_param('/baloon_detector/h1') s1 = rospy.get_param('/baloon_detector/s1') v1 = rospy.get_param('/baloon_detector/v1') h2 = rospy.get_param('/baloon_detector/h2') s2 = rospy.get_param('/baloon_detector/s2') v2 = rospy.get_param('/baloon_detector/v2') real_ballon_r = rospy.get_param('/baloon_detector/real_ballon_r') #       h_min = np.array((h1, s1, v1), np.uint8) h_max = np.array((h2, s2, v2), np.uint8) while not rospy.is_shutdown(): ret, image_raw = camera.read() # calculate FPS cur_time2 = time.time() if cur_time2-my_time_fps&gt;5: my_last_fps=my_fps my_fps=1 my_time_fps=cur_time2 else: my_fps+=1 image_hsv = cv2.cvtColor(image_raw, cv2.COLOR_BGR2HSV ) #       HSV thresh = cv2.inRange(image_hsv, h_min, h_max) if invert&gt;0: cv2.bitwise_not(thresh,thresh) #find contours _, contours0, hierarchy = cv2.findContours( thresh.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE) max_area = 0 max_center_x=None max_center_y=None max_baloon_r=None max_yaw_shift=None for cnt in contours0: rect = cv2.minAreaRect(cnt) box = cv2.boxPoints(rect) box = np.int0(box) center = (int(rect[0][0]),int(rect[0][1])) area = int(rect[1][0]*rect[1][1]) if area &gt; 100: baloon_r = int(math.sqrt(area)/2) yaw_shift = int( (center[0] - my_cam_info.width/2) * 130 / my_cam_info.width) # 130 degree camera for my_cam_info.width pics image cv2.circle(image_raw, center, baloon_r , color_red, 1) if area&gt;max_area: max_area=area max_center_x = center[0] max_center_y = center[1] max_baloon_r = baloon_r max_yaw_shift = yaw_shift #draw main baloon if max_area&gt;0: cv2.circle(image_raw, (max_center_x,max_center_y), max_baloon_r+2 , color_blue, 2) cv2.putText(image_raw, "D=%d" % int(max_baloon_r*2), (10, 20), cv2.FONT_HERSHEY_SIMPLEX, 0.5, color_red, 1) cv2.putText(image_raw, "angle=%d '" % max_yaw_shift, (10, 40), cv2.FONT_HERSHEY_SIMPLEX, 0.5, color_green, 1) max_distance = real_ballon_r/math.tan(max_baloon_r/float(my_cam_info.width)*(math.pi*160.0/360.0)) #distance to baloon #print max_distance cv2.putText(image_raw, "%fm" % max_distance, (10, 60), cv2.FONT_HERSHEY_SIMPLEX, 0.5, color_blue, 1) cv2.line(image_raw, (max_center_x, 1), (max_center_x, my_cam_info.height-1) , color_white, 1) cv2.line(image_raw, (1,max_center_y), (my_cam_info.width-1, max_center_y) , color_white, 1) # post baloon Twist tws = TwistStamped() tws.header.stamp = rospy.Time.now() tws.header.frame_id = 'fcu' tws.twist.linear.x = max_distance tws.twist.angular.z = float(-max_yaw_shift)/360.0*math.pi#yaw tws.twist.angular.y = float( (max_center_y - my_cam_info.height/2) * 130.0 / my_cam_info.height) /360.0*math.pi #pitch publisher_baloontwist.publish(tws) #draw target cv2.line(image_raw, (my_cam_info.width/2-10, my_cam_info.height/2-10), (my_cam_info.width/2+10, my_cam_info.height/2+10) , color_yellow, 1) cv2.line(image_raw, (my_cam_info.width/2+10, my_cam_info.height/2-10), (my_cam_info.width/2-10, my_cam_info.height/2+10) , color_yellow, 1) #Draw FPS on image cv2.putText(image_raw,"fps: "+str(my_last_fps/5),(120,20), cv2.FONT_HERSHEY_SIMPLEX, 0.5,(0,255,0),1,cv2.LINE_AA) #  1   5,      if my_fps%5==0: try: publisher_image_raw_result.publish(bridge.cv2_to_imgmsg(image_raw,"bgr8")) publisher_image_raw_filter.publish(bridge.cv2_to_imgmsg(thresh, "mono8")) except CvBridgeError as e: print(e) def publish_dummy_vp(event): ps = PoseStamped() ps.header.stamp = rospy.Time.now() ps.header.frame_id = 'local_origin' ps.pose.orientation.w = 1; publisher_vp.publish(ps); def callback_handle_pose(mavros_pose): rospy.loginfo("Got mavros pose, stop publishing zeroes.") dummy_timer.shutdown() handle_pose_sub.unregister() def process_camera_info_yaml(): global mtx, dist, my_cam_info my_cam_info = CameraInfo() filename = rospy.get_param('/baloon_detector/camera_info_url') with open(filename, 'r') as ymlfile: cfg = yaml.load(ymlfile) my_cam_info.width = cfg['image_width'] my_cam_info.height= cfg['image_height'] my_cam_info.K = cfg['camera_matrix']['data'] my_cam_info.D = cfg['distortion_coefficients']['data'] mtx=np.zeros((3,3)) dist=np.zeros((1,5)) for i in range(3): for j in range(3): mtx[i,j]=my_cam_info.K[i*3+j] for i in range(5): dist[0,i]=my_cam_info.D[i] print mtx, dist if __name__ == '__main__': rospy.init_node('baloon_detector') ## init pose publishing from FCU publisher_vp = rospy.Publisher('/mavros/vision_pose/pose', PoseStamped, queue_size=1) dummy_timer=rospy.Timer(rospy.Duration(0.5), publish_dummy_vp) handle_pose_sub = rospy.Subscriber('mavros/local_position/pose', PoseStamped, callback_handle_pose) ## init camera process_camera_info_yaml() print my_cam_info rospy.loginfo("image translation starting.........") publisher_image_raw_filter = rospy.Publisher('baloon_detector/image_filter', Image, queue_size=1) publisher_image_raw_result = rospy.Publisher('baloon_detector/image_result', Image, queue_size=1) publisher_baloontwist= rospy.Publisher('baloon_detector/twist', TwistStamped ,queue_size=1) raspicam_loop_cv() try: rospy.spin() except KeyboardInterrupt: print("Shutting down")</span></span></code> </pre> </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">baloon_cv.launch - ملف الإطلاق لإطلاق حزمة ROS الخاصة بنا</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">launch</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- mavros --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(find mavros)/launch/px4.launch"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fcu_url"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/dev/ttyAMA0:921600"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"gcs_url"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tcp-l://0.0.0.0:5760"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- baloon pose estimator --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"baloon_detector"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"baloon"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"baloon_pose_cv.py"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">output</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"invert"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"h1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"h2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"158"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"255"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"v1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"v2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"255"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"real_ballon_r"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.145"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"camera_info_url"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(find baloon)/src/fe130_320_01.yaml"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"framerate"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- web video server --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"web_video_server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"web_video_server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"web_video_server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">required</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">respawn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">respawn_delay</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">launch</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">fe130_320_01.yaml - ملف معايرة الكاميرا</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">image_width: 320 image_height: 240 camera_name: main_camera_optical camera_matrix: rows: 3 cols: 3 data: [251.8636348237197, 0, 161.853506252244, 0, 252.36606604425, 102.0038140308112, 0, 0, 1] distortion_model: plumb_bob distortion_coefficients: rows: 1 cols: 5 data: [-0.4424451138703088, 0.1594038086314775, 0.006694781700363117, 0.00174908936506397, 0] rectification_matrix: rows: 3 cols: 3 data: [1, 0, 0, 0, 1, 0, 0, 0, 1] projection_matrix: rows: 3 cols: 4 data: [174.0442047119141, 0, 163.822732720786, 0, 0, 175.2916412353516, 105.5565883832869, 0, 0, 0, 1, 0]</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  بعد وضع الملفات في الدليل baloon_ws / src / baloon / src ، تحتاج إلى إضافة السمة "ملف قابل للتنفيذ" (cmod + x) إلى الملفات baloon_pose_cv.py و baloon.service.  ثم ، كاختبار أول ، نطلق عقدة ROS الخاصة بنا يدويًا: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">roslaunch baloon baloon_cv.launch</code> </pre><br><p style=";text-align:right;direction:rtl">  بعد بدء العقدة ، يمكننا أن نلاحظ صورة مرشحنا والكرة من خلال متصفح الويب: <br><img src="https://habrastorage.org/webt/bk/mi/-c/bkmi-c9yhazorag5didbbi4g6lq.png"></p><br><p style=";text-align:right;direction:rtl">  وكذلك الحصول على إحداثيات الكرة المكتشفة في الموضوع <code>/baloon_detector/twist</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">pi@raspberry:~ $ rostopic list |grep baloon /baloon_detector/image_filter /baloon_detector/image_result /baloon_detector/twist pi@raspberry:~ $ rostopic <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> /baloon_detector/twist header: seq: 1 stamp: secs: 1554730508 nsecs: 603406906 frame_id: <span class="hljs-string"><span class="hljs-string">"fcu"</span></span> twist: linear: x: 6.6452559203 y: 0.0 z: 0.0 angular: x: 0.0 y: 0.137081068334 z: -0.165806278939 ---</code> </pre> <br><p style=";text-align:right;direction:rtl">  يبقى لإضافة التشغيل التلقائي للعقدة لدينا في بداية التوت. <br>  للقيام بذلك ، قم بإنشاء ملف وصف خدمة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">systemd</a> baloon.service ، مع المحتويات التالية: </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">[Unit] Description=BALOON ROS package Requires=roscore.service After=roscore.service [Service] EnvironmentFile=/home/pi/baloon_ws/src/baloon/src/roscore.env ExecStart=/opt/ros/kinetic/bin/roslaunch baloon baloon_cv.launch --wait Restart=on-abort [Install] WantedBy=multi-user.target</code> </pre> <br><p style=";text-align:right;direction:rtl">  يشير الملف إلى وصف متغير البيئة roscore.env: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">ROS_ROOT=/opt/ros/kinetic/share/ros ROS_DISTRO=kinetic ROS_PACKAGE_PATH=/home/pi/baloon_ws/src:/opt/ros/kinetic/share ROS_PORT=11311 ROS_MASTER_URI=http://localhost:11311 CMAKE_PREFIX_PATH=/home/pi/baloon_ws/devel:/opt/ros/kinetic PATH=/opt/ros/kinetic/bin:/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sbin:/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/games:/snap/bin LD_LIBRARY_PATH=/opt/ros/kinetic/lib PYTHONPATH=/home/pi/catkin_ws/devel/lib/python2.7/dist-packages:/opt/ros/kinetic/lib/python2.7/dist-packages ROS_IP=192.168.11.1</code> </pre> <br><p style=";text-align:right;direction:rtl">  يتم توصيل وبدء الخدمة باستخدام الأوامر: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> ~/baloon_ws/src/baloon/src/baloon.service sudo systemctl start baloon</code> </pre> <br><p style=";text-align:right;direction:rtl">  الآن يجب أن تبدأ العقدة تلقائيًا عند بدء تشغيل التوت. <br>  يمكنك إيقاف العقدة باستخدام الأمر <code>sudo systemctl stop baloon</code> ، وإلغاء تشغيل تلقائي - <code>sudo systemctl disable balloon</code> . </p><br><p style=";text-align:right;direction:rtl">  نتيجة لإجراءاتنا ، حصلنا على "كاشف كروي تلقائي" يتم إطلاقه عند بدء تشغيل النظام على الكمبيوتر الموجود على متن الطائرة. </p><br><p style=";text-align:right;direction:rtl">  في الجزء التالي ، سنشرع في الإطلاق النهائي لطائرة بدون طيار صاروخ موجه. </p><br><p style=";text-align:right;direction:rtl">  يتم تحميل شفرة المصدر للبرامج <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">إلى جيثب</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar462923/">https://habr.com/ru/post/ar462923/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar462907/index.html">ngFanatic الأسبوعية</a></li>
<li><a href="../ar462909/index.html">ثمار تطور أسيك: حول المصنعين ، عمال المناجم ل SHA-256 وشذوذ التجزئة الفلكية</a></li>
<li><a href="../ar462911/index.html">عام خلف عجلة سيارة كهربائية</a></li>
<li><a href="../ar462915/index.html">أداء AMD EPYC 7452 من خلال عيون Cinebench R20</a></li>
<li><a href="../ar462917/index.html">تجريد الويب باستخدام R. مقارنة بين تصنيفات الأفلام على Kinopoisk و IMDB</a></li>
<li><a href="../ar462929/index.html">أراك: تكتيكات اخفاء الخفافيش</a></li>
<li><a href="../ar462933/index.html">كيف يعمل حظر الإنترنت: مراجعة الأساليب الحديثة مع مثال حقيقي</a></li>
<li><a href="../ar462935/index.html">كيف تحافظ على تركيزك أثناء العمل في مكتب مفتوح؟</a></li>
<li><a href="../ar462937/index.html">مفهوم النسيج المستمر للسيطرة على البنية التحتية لتكنولوجيا المعلومات</a></li>
<li><a href="../ar462939/index.html">أعلى 10 C ++ روسيا التقارير وقائمة التشغيل مؤتمر الوصول المفتوح</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>