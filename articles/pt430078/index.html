<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ûüèª üçÖ üèµÔ∏è Como controlar aparelhos el√©tricos, modelos controlados por r√°dio, carrinhos motorizados üë©üèº‚Äçüåæ üéì üíÖüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nos artigos anteriores, falei sobre como ajudar as pessoas paralisadas a se comunicarem com o mundo exterior: comunicar seus desejos, escrever cartas,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como controlar aparelhos el√©tricos, modelos controlados por r√°dio, carrinhos motorizados</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430078/"><img src="https://habrastorage.org/webt/0c/pu/lz/0cpulz3okxsy9r7qjjbrkoufiww.jpeg"><br><br>  Nos artigos anteriores, falei sobre como ajudar as pessoas paralisadas a se comunicarem com o mundo exterior: comunicar seus desejos, escrever cartas, navegar na Internet usando apenas os olhos e um dispositivo que rastreia seu olhar (rastreador de olhos).  Nesse caso, fisicamente, uma pessoa ainda permanece limitada pelo mundo do computador e da cama. <br><br>  Aqui vou falar sobre as maneiras mais simples (na minha opini√£o) de mudar algo no mundo exterior: acender a luz ou uma guirlanda em uma √°rvore de Natal, controlar um ve√≠culo todo-o-terreno em um controle de r√°dio, fazer com que um carrinho motorizado se mova na dire√ß√£o certa. <br><a name="habracut"></a><br><h3>  Conte√∫do </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1. Introdu√ß√£o</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Componentes Necess√°rios</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conecte o Arduino a um computador</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Esquema de controle da tomada</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Circuito de controle do motor</a> <br><br><a name="p0"></a><h2>  1. Introdu√ß√£o </h2><br>  Al√©m do dispositivo de rastreamento visual e do software livre, descrito aqui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">neste</a> artigo, precisamos de algo que conecte o computador a objetos externos. <br><br>  Apesar da venda de v√°rios dispositivos que podem ser controlados a partir de um computador, a op√ß√£o mais simples e barata para mim era usar duas partes: uma placa Arduino e uma placa de m√∫ltiplos rel√©s. <br><br>  Se voc√™ nunca encontrou o Arduino, ainda n√£o desiste de ler, no futuro ver√° que, neste contexto, √© bastante simples trabalhar com ele, n√£o √© √† toa que existem muitos designers infantis baseados no Arduino √† venda. <br><br>  Ao mesmo tempo, se voc√™ n√£o conhece a seguran√ßa el√©trica e nunca fez a fia√ß√£o el√©trica em casa, n√£o tente repetir os circuitos que usam a conex√£o √†s tomadas! <br><br>  Tudo o que voc√™ precisa saber sobre o Arduino: este √© um pequeno dispositivo que pode ser conectado √† porta USB do computador, ap√≥s o qual pode ligar / desligar os sinais el√©tricos em seus contatos de acordo com as instru√ß√µes recebidas. <br><br>  Os sinais s√£o de baixa pot√™ncia, portanto, para controlar algo mais poderoso (l√¢mpadas el√©tricas, por exemplo), colocamos uma unidade de rel√© que, em resposta ao sinal do Arduino, fecha e abre os contatos de controle de dispositivos externos.  Al√©m disso, os rel√©s isolam os circuitos el√©tricos do computador Arduino + dos circuitos el√©tricos do dispositivo gerenciado. <br>  Portanto, a base dos circuitos de controle para tomadas e motores el√©tricos, que ser√£o descritos mais adiante, √© a seguinte: duas partes conectadas por fios entre si, conectadas por um cabo USB a um computador e fios ao que queremos controlar: <br><br><img src="https://habrastorage.org/webt/xo/hp/8j/xohp8jg5wedmd0x2v98jdlhatvy.png"><br><br>  No mundo real, pode ser assim: <br><br><img src="https://habrastorage.org/webt/bq/5r/yk/bq5ryknx1noe_wserikpat_8d1c.jpeg"><br><br>  Enviamos um comando de um computador, um dos contatos do Arduino liga / desliga o rel√©, que √© a chave de qualquer dispositivo ou um bot√£o separado no dispositivo. <br><br><a name="p1"></a><h2>  Componentes Necess√°rios </h2><br>  N√≥s precisaremos (entre par√™nteses est√£o os pre√ßos de 2018 em uma loja local. Quem compra na China pode economizar muito dinheiro, mas perde tempo): <br><br>  1) Placa UNO Arduino com um cabo USB (√© poss√≠vel p√≥s-venda, com CH340 barato em vez de caro FTDI) (450 rublos) <br><br>  2) Uma placa com quatro rel√©s operando em uma voltagem de 5 volts e capaz de controlar dispositivos com uma voltagem de 220 volts.  (450 rublos).  Ainda existem placas trabalhando em 12 Volts, n√£o confunda! <br><br>  3) Um monte de fios para conectar duas placas.  No meu caso, eram necess√°rios fios com um soquete de um lado e um pino do outro, pois o bloco de rel√©s possui contatos de pinos e o Arduino possui soquetes.  Observe os conectores em suas placas ao comprar fios (150 rublos). <br><br><img src="https://habrastorage.org/webt/2a/ma/kf/2amakfyji4k_hbtvozjophg_5hu.jpeg"><br><br><a name="p2"></a><h2>  Conecte o Arduino a um computador </h2><br>  Primeiro, instale o software de programa√ß√£o Arduino em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.arduino.cc</a> : <br><br>  Na p√°gina <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://www.arduino.cc/en/Main/Software,</a> clique em ‚ÄúWindows Installer‚Äù: <br><br><img src="https://habrastorage.org/webt/vj/nw/vc/vjnwvcfu76izpyiarxlymwfftpe.png"><br><br>  Clique em "Basta fazer o download": <br><br><img src="https://habrastorage.org/webt/wu/3q/aj/wu3qajjogz-8xyrpv2rankehjeq.png"><br><br>  Fa√ßa o download e execute o instalador: <br><br><img src="https://habrastorage.org/webt/db/_d/lx/db_dlxuein4fw7aofwgu-8syzio.png"><br><br>  N√≥s concordamos em tudo: <br><br><img src="https://habrastorage.org/webt/xq/nr/n6/xqnrn6hcxu9_1h0zzf2eda0kkm8.png"><br><br><img src="https://habrastorage.org/webt/p7/7h/-d/p77h-dqmssaisjxucixrqdoebvk.png"><br><br><img src="https://habrastorage.org/webt/05/lh/q4/05lhq4bozxrk4jm5rvj1xxzgh6k.png"><br><br><img src="https://habrastorage.org/webt/sl/mu/57/slmu57e2qjf9oemniy3rqsugm5c.png"><br><br>  Quando o programa estiver instalado, conecte a placa Arduino e o computador com um cabo USB. <br><br>  As luzes na placa do Arduino acendem e, no gerenciador de dispositivos, voc√™ ver√° que uma nova porta apareceu e foi atribu√≠do um determinado n√∫mero, por exemplo, COM3: <br><br><img src="https://habrastorage.org/webt/fv/yf/fu/fvyffux9p-o-_kx6cjtqgejgv38.png"><br><br>  Vamos mudar seu n√∫mero para COM9, pois no futuro tudo estar√° vinculado especificamente √† COM9.  Para fazer isso, clique com o bot√£o direito do mouse, chame o menu de contexto e selecione "propriedades": <br><br><img src="https://habrastorage.org/webt/wx/2v/ce/wx2vceqt65nzglwuevp0rwh3tja.png"><br><br>  Na guia "par√¢metros da porta", clique no bot√£o "avan√ßado": <br><br><img src="https://habrastorage.org/webt/yw/d_/6-/ywd_6-uh4-83w2kcx4ng_i1rijw.png"><br><br>  E, finalmente, selecione "COM9" como o n√∫mero da porta COM. <br><br><img src="https://habrastorage.org/webt/5n/tw/bg/5ntwbgktedghwn61bkqtkhbjf5e.png"><br><br>  Feche todas as janelas abertas com o bot√£o ‚ÄúOK‚Äù e remova e insira o cabo USB para verificar se o Arduino continuar√° se conectando atrav√©s da porta COM9, se estiver inserido na mesma porta USB do computador: <br><br><img src="https://habrastorage.org/webt/fo/cg/jj/focgjjlfl9e1cvk1goluncdtqb8.png"><br><br>  Agora chame e configure o programa Arduino recentemente instalado no site: <br><br><img src="https://habrastorage.org/webt/zd/xa/yy/zdxayy6epjys_elzlitystsu4mm.png"><br><br>  No menu "Ferramentas", defina a placa "Arduino UNO" e a porta "COM9": <br><br><img src="https://habrastorage.org/webt/u5/kn/jq/u5knjq5m5ctlnevdrp-cnsewopy.png"><br><br>  Agora tudo est√° pronto para coletar os esquemas e dar vida a eles. <br><br><a name="p3"></a><h2>  Esquema de controle da tomada </h2><br>  <strong>Se voc√™ n√£o conhece a seguran√ßa el√©trica e nunca fez a instala√ß√£o el√©trica em casa, n√£o tente repetir este diagrama!</strong>  <strong>O circuito usa tens√£o com risco de vida!</strong> <br><br>  Mais uma vez, controle as perguntas: <br><br><ul><li>  Voc√™ sabe como distinguir um fio com uma fase de um fio com zero em um soquete? </li><li>  Voc√™ sabe tocar os fios e certificar-se de que n√£o haja curto-circuito ap√≥s a conex√£o? </li></ul><br>  Se voc√™ estiver respondendo incerta a essas perguntas, pe√ßa a uma pessoa mais experiente para montar o circuito. <br><br>  Agora ao ponto. <br><br>  Funciona assim: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cG7eZB9ynrg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  O diagrama de conex√£o do soquete √© assim: <br><br><img src="https://habrastorage.org/webt/au/la/h8/aulah8yv5nvdhv7pktidilna2hs.png"><br><br>  Fornecemos zero diretamente √†s tomadas e a fase atrav√©s do rel√©.  Se voc√™ fizer o contr√°rio, ele funcionar√°, mas haver√° o risco de choque el√©trico dos dispositivos OFF MALFUNCTIONAL.  Ou seja, pegue a TV com defeito desligada e ela ficar√° chocada. <br><br>  Se a casa tiver um aterramento de prote√ß√£o, use uma tomada de aterramento. <br><br>  Em seguida √© o meu design de refer√™ncia.  Nele, cometi um erro com a cor dos fios: a cor do fio neutro ficou marrom e as fases azuis.  Preste aten√ß√£o nisso. <br><br>  Pegamos um peda√ßo da placa do tamanho apropriado para caber nela (da esquerda para a direita): Arduino, bloco de rel√©s, quatro soquetes, um suporte para pressionar o fio na placa. <br><br><img src="https://habrastorage.org/webt/4n/ad/yj/4nadyjfwr_9zqsjfqirzp5kmcjg.jpeg"><br><br>  Cortamos o excesso e usamos um cinzel para fazer um sulco para os fios, para que eles se encaixem livremente sob os soquetes. <br><br><img src="https://habrastorage.org/webt/c1/cn/4k/c1cn4krbvgwhyerhsjgdf1blh2k.jpeg"><br><br>  Aparafusamos as placas do Arduino e o bloco de rel√©s com parafusos, colocando arruelas de pl√°stico. <br><br><img src="https://habrastorage.org/webt/xl/ss/xt/xlssxtywewk_wiqbg8xbq-sjbxe.jpeg"><br><br>  Se as arruelas n√£o estavam √† m√£o, voc√™ pode cortar as cavilhas: <br><br><img src="https://habrastorage.org/webt/j8/nu/4c/j8nu4c3dgliutidvgzey80c3qiq.jpeg"><br><br>  Prepare os fios: corte no comprimento desejado e retire-o do isolamento.  √â aconselh√°vel estanh√°-los com um ferro de soldar em locais de contato com soquetes e rel√©s. <br><br><img src="https://habrastorage.org/webt/7g/u-/js/7gu-jsezhlrrzxq-tqy37bi__py.jpeg"><br><br>  Pressione o fio na placa com um suporte para que n√£o possa ser puxado. <br><br><img src="https://habrastorage.org/webt/xt/mb/hm/xtmbhmcglfylqsh4txocs50bn9k.jpeg"><br><br>  Conectamos os fios e aparafusamos os soquetes.  N√≥s chamamos a cadeia. <br><br><img src="https://habrastorage.org/webt/h_/_b/hl/h__bhl0ovpuzpdp9m9zwi0xwrsy.jpeg"><br><br><img src="https://habrastorage.org/webt/gd/6c/ga/gd6cgayr0-nalqayyxt8lsiquli.jpeg"><br><br>  Conectamos a placa Arduino √† unidade de rel√© com um feixe de fios, de acordo com o diagrama acima. <br><br><img src="https://habrastorage.org/webt/bq/5r/yk/bq5ryknx1noe_wserikpat_8d1c.jpeg"><br><br>  Cobrimos as placas com uma caixa de prote√ß√£o de material n√£o condutor.  <strong>Isso deve ser feito aqui, pois a tens√£o com risco de vida √© adequada para o bloco de rel√©s!</strong>  Em um caso extremo, pelo menos enrole os contatos el√©tricos do rel√©. <br><br>  Usei um recipiente para produtos feitos de pl√°stico r√≠gido como inv√≥lucro, prendendo-o com parafusos: <br><br><img src="https://habrastorage.org/webt/dh/mj/4j/dhmj4j30zlicmjwgjrkylk5g7km.jpeg"><br><br>  Lembre-se de fazer um orif√≠cio para o cabo USB. <br><br><img src="https://habrastorage.org/webt/mg/yb/5h/mgyb5hkbsv4zws5b0zbpdixbrq8.jpeg"><br><br>  Conecte o dispositivo ao computador, mas <strong>n√£o o conecte a uma tomada</strong> . <br><br>  Lan√ßamos o programa ‚ÄúArduino‚Äù e copiamos este texto do programa: <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     2,3,4,5 int Relay1=2, Relay2=3, Relay3=4, Relay4=5; void setup() { pinMode(Relay1,OUTPUT); pinMode(Relay2,OUTPUT); pinMode(Relay3,OUTPUT); pinMode(Relay4,OUTPUT); Serial.begin(9600); } void loop() { delay (200); // 1.     while(Serial.available()) { switch(Serial.read()) { case '0': //    digitalWrite(Relay1,0); break; case '1': //    digitalWrite(Relay1,1); break; case '2': //    digitalWrite(Relay2,0); break; case '3': //    digitalWrite(Relay2,1); break; case '4': //    digitalWrite(Relay3,0); break; case '5': //    digitalWrite(Relay3,1); break; case '6': //    digitalWrite(Relay4,0); break; case '7': //    digitalWrite(Relay4,1); break; } // switch } // while }</span></span></code> </pre> <br>  Em seguida, clique no bot√£o de download do programa no Arduino (veja a figura abaixo).  Se tudo correu sem erros, vemos a inscri√ß√£o "Download conclu√≠do". <br><br><img src="https://habrastorage.org/webt/sa/lq/ps/salqpsq3wdq3kpsylezoakvmn1i.png"><br><br>  Verifique se nosso dispositivo executa comandos.  Para fazer isso, chame o monitor de porta: <br><br><img src="https://habrastorage.org/webt/68/wq/mw/68wqmw6ebryw_wohhhew71h9mx0.png"><br><br>  Agora, digitaremos o n√∫mero <strong>1</strong> e pressionar Enter ou o bot√£o "Enviar": <br><br><img src="https://habrastorage.org/webt/u3/iq/6t/u3iq6tjtyiw16d9rq_maya-mqgu.png"><br><br>  Um clique caracter√≠stico do rel√© ser√° ouvido e o contato no primeiro soquete ser√° conectado ao fio da fase.  Verifique isso com um testador.  Em seguida, disque o n√∫mero 0 e o rel√© desconectar√° o contato. <br><br>  Observando o texto do programa, voc√™ pode ver o que acontecer√° se digitarmos outros n√∫meros: <br><br>  3.2 - ligue, desligue a segunda tomada <br><br>  5,4 - ligue, desligue a terceira tomada <br><br>  7.6 - ligue, desligue a quarta tomada <br><br>  Verifique com um testador a conex√£o dessas tomadas.  Ap√≥s a verifica√ß√£o, voc√™ pode conectar o fio √† tens√£o na rede e come√ßar a ligar / desligar dispositivos reais. <br><br>  Nossa pr√≥xima tarefa √© ligar e desligar os aparelhos de relance.  Para fazer isso, configuramos o programa <strong>bkb</strong> descrito aqui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">neste</a> artigo <strong>(A √öLTIMA VERS√ÉO DO PROGRAMA √â NECESS√ÅRIA !!!)</strong> . <br><br>  Suponha que queremos ligar e desligar uma l√¢mpada e uma guirlanda de √°rvore de Natal. <br>  No programa Paint padr√£o, desenhamos quatro desenhos de 200x200 no formato <strong>BMP</strong> : <br><br><img src="https://habrastorage.org/webt/ns/ly/ri/nslyribneenospzbhf8dxftucic.png"><br><br>  Tamb√©m criaremos quatro arquivos em lote: <strong>c.cmd, d.cmd, e.cmd, f.cmd</strong> <br><br>  Eles conter√£o comandos para enviar caracteres 1,0,3,2 para a porta COM9.  E lembramos que eles ligam e desligam o primeiro e o segundo soquetes.  √â importante que n√£o haja linhas vazias entre as duas linhas nesses arquivos! <br><br>  c.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 1 &gt; com9:</code> </pre><br>  d.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 0 &gt; com9:</code> </pre><br>  e.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 3 &gt; com9:</code> </pre><br>  f.cmd: <br><br><pre> <code class="plaintext hljs">MODE COM9: BAUD=9600 DATA=8 STOP=1 PARITY=N to=off xon=off odsr=off octs=off rts=off idsr=off dtr=off echo 2 &gt; com9:</code> </pre><br>  <strong>Sobrescrevemos os</strong> arquivos <strong>.bmp</strong> e <strong>.cmd</strong> criados no diret√≥rio de <strong>grade</strong> do programa <strong>bkb</strong> . <br><br>  Depois de iniciar o programa <strong>bkb</strong> no modo de tabela, uma nova quinta linha com nossas imagens ser√° exibida: <br><br><img src="https://habrastorage.org/webt/cn/jz/aq/cnjzaqskmsg3wwqe2odhwijsk4g.jpeg"><br><br>  Quando olhamos para a foto, a a√ß√£o correspondente √© iniciada. <br><br>  <strong>ATEN√á√ÉO!</strong>  A primeira vez ap√≥s o in√≠cio do programa, a a√ß√£o n√£o funciona.  Todos os tempos subsequentes - ele funciona.  Isso se deve ao fato de que, durante a primeira inicializa√ß√£o da porta, o sinal na linha DTR muda, o que faz com que o Arduino seja reinicializado, que dura cerca de tr√™s segundos. <br><br>  Dizem que isso pode ser resolvido com um ferro de soldar, mas n√£o me atrevi a fazer esse trabalho de joalheria.  Portanto, por enquanto, lembre-se de que na primeira vez voc√™ precisa ativar duas vezes. <br><br>  <u>Observa√ß√£o</u> <br><br>  Voc√™ provavelmente j√° entendeu que em arquivos .cmd voc√™ pode chamar qualquer programa externo.  Se voc√™ tiver algum dispositivo que possa ser controlado a partir da linha de comando, voc√™ mesmo poder√° executar esses comandos atribuindo as a√ß√µes necess√°rias a qualquer figura da tabela. <br><br><a name="p4"></a><h2>  Circuito de controle do motor </h2><br>  Meu amigo atualizou a scooter girosc√≥pica e a substituiu pelo eixo traseiro do carrinho de beb√™.  O gerenciamento era realizado por controles remotos atrav√©s do conselho do Arduino. <br><br><img src="https://habrastorage.org/webt/6g/gi/ef/6ggiefa4rwsv9n7bkjpz9hdenzi.jpeg"><br><br>  Decidimos tentar dar √† crian√ßa a oportunidade de controlar o carrinho sozinha com um olhar.  Para fazer isso, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o</a> modo de controle de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong>cadeira de rodas</strong></a> foi adicionado ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">programa <strong>bkb</strong></a> . <br><br><img src="https://habrastorage.org/webt/k_/vw/4c/k_vw4cp32if1tiyx_tld9x8js6w.png"><br><br>  Ap√≥s iniciar neste modo, as setas aparecem na tela, uma vis√£o que faz com que o programa envie caracteres de controle para a porta COM9, que s√£o interpretadas pelo carrinho para avan√ßar / retroceder, virar √† esquerda / direita e parar. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2QgKxeQeUAQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Enquanto o carrinho est√° sendo finalizado, decidi usar o mesmo programa para controle remoto do modelo de tanque de esteira.  Isso tamb√©m √© uma coisa bastante √∫til.  Primeiro, a crian√ßa recebe habilidades √∫teis para controlar o carrinho.  Em segundo lugar, este √© apenas um jogo emocionante. <br><br><img src="https://habrastorage.org/webt/hg/gp/ov/hggpovliv-swlqqzlziurfgag2o.jpeg"><br><br>  Cada uma das trilhas do tanque √© controlada por uma alavanca que pode ser movida para frente ou para tr√°s.  Ao mover a alavanca para frente, ele pressiona o bot√£o, for√ßando o motor a girar para frente.  Ao mover a alavanca para tr√°s, ele pressiona o bot√£o, o que faz o motor girar na dire√ß√£o oposta.  N√£o √© poss√≠vel pressionar dois bot√µes ao mesmo tempo - avan√ßar e retroceder √© imposs√≠vel. <br>  A unidade de rel√© foi conectada aos bot√µes do controle remoto, conforme o diagrama abaixo.  O circuito n√£o permite ativar os bot√µes ‚Äúmotor para frente‚Äù e ‚Äúmotor para tr√°s‚Äù simultaneamente.  Um rel√© liga / desliga o motor e o segundo seleciona a dire√ß√£o para frente ou para tr√°s. <br><br>  Encontre no painel do painel de controle onde os bot√µes est√£o conectados e conecte-os, de acordo com o diagrama acima. <br><br>  Observe que, ao contr√°rio do circuito anterior, o Arduino controla o bloco de rel√©s com os pinos 6 a 9. <br><br><img src="https://habrastorage.org/webt/te/ch/ag/techagksw5fgfqfnumnz0oywovg.png"><br><br>  Conectei o bloco de rel√©s ao controle remoto atrav√©s do conector para que o controle remoto possa ser facilmente desconectado e usado separadamente: <br><br><img src="https://habrastorage.org/webt/_y/5z/z-/_y5zz-xbgdn7b8lwz-k9n5aignk.jpeg"><br><br>  O programa que o Arduino precisa baixar recebe os mesmos comandos do computador que s√£o usados ‚Äã‚Äãpara controlar o carrinho motorizado: <br><br>  F-forward <br>  B-back <br>  L-esquerda <br>  R-direita <br>  S-stop <br><br>  O texto do programa √© dado abaixo. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     6,7,8,9 int Relay1=6, Relay2=7, Relay3=8, Relay4=9; int heartbeat=0; //     void setup() { pinMode(Relay1,OUTPUT); pinMode(Relay2,OUTPUT); pinMode(Relay3,OUTPUT); pinMode(Relay4,OUTPUT); Serial.begin(9600); } void RCStop() { digitalWrite(Relay1,0); digitalWrite(Relay2,0); digitalWrite(Relay3,0); digitalWrite(Relay4,0); } void RCForward() { digitalWrite(Relay1,1); digitalWrite(Relay2,1); digitalWrite(Relay3,1); digitalWrite(Relay4,1); } void RCBack() { digitalWrite(Relay1,1); digitalWrite(Relay2,0); digitalWrite(Relay3,1); digitalWrite(Relay4,0); } void RCLeft() { digitalWrite(Relay1,1); digitalWrite(Relay2,0); digitalWrite(Relay3,1); digitalWrite(Relay4,1); } void RCRight() { digitalWrite(Relay1,1); digitalWrite(Relay2,1); digitalWrite(Relay3,1); digitalWrite(Relay4,0); } void loop() { // 1.     while(Serial.available()) { switch(Serial.read()) { case 'S': //  ! RCStop(); heartbeat=0; break; case 'F': //  ! RCForward(); heartbeat=0; break; case 'B': //  ! RCBack(); heartbeat=0; break; case 'L': //  ! RCLeft(); heartbeat=0; break; case 'R': //  ! RCRight(); heartbeat=0; break; } // switch } // while // 2.    //       -   delay(10); heartbeat++; if(heartbeat&gt;30) { heartbeat=30; //    ! RCStop(); //   -   } }</span></span></code> </pre><br>  Se a conex√£o com o computador for interrompida (nenhum caractere chega em 0,3 segundos, o Arduino desliga os motores).  Essa situa√ß√£o pode ser modelada fechando os olhos enquanto os controla.  O Aitreker n√£o poder√° determinar a dire√ß√£o da vis√£o e os sinais n√£o ser√£o enviados.  Os motores ir√£o parar. <br><br>  Equipei o modelo do tanque com uma c√¢mera de v√≠deo, que geralmente √© chamada de taxa de c√¢mbio, ou FPV (First Person View), que transmite um sinal anal√≥gico a uma frequ√™ncia de cerca de 5,8 GHz.  Peguei uma das c√¢meras mais baratas, tamb√©m equipada com transmissor e antena: AKK BA-3.  Custou-me 1050 rublos.  A c√¢mera com o transmissor √© t√£o pequena que cabe nas m√£os da figura Lego: <br><br><img src="https://habrastorage.org/webt/ch/0q/mq/ch0qmqoqvfhexoxoeofqqvasmr8.jpeg"><br><br>  Tudo o que precisa ser feito para a c√¢mera funcionar √© conect√°-la √† energia (de 3,2 a 5,5 Volts).  Depois, com um √∫nico bot√£o, selecione a faixa, a frequ√™ncia e a pot√™ncia do transmissor. <br><br>  A c√¢mera aquece significativamente, por isso recomendo definir a pot√™ncia m√≠nima (25 miliwatts).  Al√©m disso, eu o conectei √† bateria do tanque com uma voltagem de 6 volts, que excede os valores permitidos.  Portanto, n√£o sei quanto tempo isso vai durar.  Eu recomendo que voc√™ use um estabilizador de tens√£o para alimentar a c√¢mera. <br><br>  Ao conectar a c√¢mera, colei um elemento do construtor Lego no tanque, e os elementos restantes j√° estavam anexados a ele com uma conex√£o simples.  Isso facilita a remo√ß√£o e a retirada da c√¢mera.  Al√©m disso, ao encontrar um obst√°culo, a c√¢mera pode simplesmente dobrar, o que evitar√° danos. <br><br><img src="https://habrastorage.org/webt/j0/4n/1z/j04n1zkr_zt7dl1itjgxfv8tr5c.jpeg"><br><br>  Para receber o sinal de v√≠deo da c√¢mera, usei o receptor Eachine ROTG01.  Ele n√£o tomou novo por 1800 rublos.  √â apenas uma caixa com uma antena que se conecta √† porta USB do computador e √© vis√≠vel como uma c√¢mera USB.  Ou seja, lan√ßamos o aplicativo C√¢mera no Windows e vemos o que o receptor aceita.  Mesmo no come√ßo, voc√™ precisa manter pressionado o √∫nico bot√£o no receptor para que ele procure o √©ter e encontre a frequ√™ncia com que nossa c√¢mera transmite um sinal. <br><br>  Em geral, precisamos de tr√™s portas USB no computador: <br><br>  - para um rastreador de TI <br>  - para Arduino, controlando o painel de controle do tanque <br>  - para receptor de v√≠deo <br><br><img src="https://habrastorage.org/webt/ya/6l/9j/ya6l9jsx4gh3xrvgtcwilaqfvci.jpeg"><br><br>  Iniciamos a sa√≠da da imagem da c√¢mera, por exemplo, o programa "C√¢mera".  Lan√ßamos o programa <strong>bkb</strong> e selecionamos o modo de controle para o carrinho motorizado. <br><br>  O que pode acontecer a seguir √© mostrado no v√≠deo: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vWreZ72HPvM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Pode-se ver que a velocidade do movimento, e especialmente a velocidade das curvas, √© muito grande.  Portanto, se voc√™ escolher um modelo controlado por r√°dio, escolha o mais lento.  Uma escavadeira ou algo assim. <br><br><h3>  E por que n√£o levar o "rob√¥ espi√£o" acabado? </h3><br>  Ca√≠ nas m√£os de um desses, HappyCow 777-325. <br><br><img src="https://habrastorage.org/webt/se/u_/ep/seu_eptbnfyu4lqwiekwmqttqbk.jpeg"><br><br>  Fiquei encantado: ele tem tudo, o controle remoto e a transmiss√£o de v√≠deo, e cavalga bem devagar.  H√°, no entanto, um recurso - ele √© controlado apenas atrav√©s de um aplicativo no Android ou iOS.  Bem, resolveremos isso atrav√©s do controle remoto do Android, por exemplo, usando o <strong>scrcpy</strong> . <br><br>  Por√©m, al√©m de defici√™ncias corrig√≠veis (√¢ngulo de vis√£o estreito da c√¢mera), a m√°quina possui uma incorrig√≠vel.  O v√≠deo transmitido via Wi-Fi tem um atraso terr√≠vel. <br>  Ou seja, esse rob√¥ colidiu com algo por um longo tempo e todos pressionam o acelerador, pensando que ele n√£o atingiu um obst√°culo. <br><br>  Para uma crian√ßa que est√° aprendendo a controlar uma m√°quina remotamente, isso, na minha opini√£o, √© inaceit√°vel. <br><br>  Ent√£o o rob√¥ recebe uma demiss√£o.  Embora eu emprestasse o chassi dele. <br><br><h2>  Conclus√£o </h2><br>  Desejo a todos sucesso em repetir e desenvolver as solu√ß√µes t√©cnicas descritas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430078/">https://habr.com/ru/post/pt430078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430068/index.html">Ordem da cris√°lida</a></li>
<li><a href="../pt430070/index.html">Pilha e fila s√£o dois paradigmas ruins e o que pode ser feito sobre isso</a></li>
<li><a href="../pt430072/index.html">Swift do lado do servidor subestimado: Entrevista com Paul Hudson</a></li>
<li><a href="../pt430074/index.html">Como quase peguei um v√≠rus tentando vender botas</a></li>
<li><a href="../pt430076/index.html">Transmiss√£o gratuita do DotNext 2018 Moscow</a></li>
<li><a href="../pt430080/index.html">Movendo-se para um cluster executando o 1C-Bitrix: Ambiente da Web</a></li>
<li><a href="../pt430082/index.html">Travinibay: Habr e RUVDS - lobos marinhos russos em TI</a></li>
<li><a href="../pt430084/index.html">O Oracle JDK ter√° que pagar. Quais s√£o as op√ß√µes agora?</a></li>
<li><a href="../pt430086/index.html">O que h√° de novo no Android 9 Pie para Sony Xperia Smartphones</a></li>
<li><a href="../pt430092/index.html">Bancos do Credit Suisse e UBS acusaram Apple Pay e Samsung Pay de boicote coordenado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>