<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõí üëåüèª üöô Introdu√ß√£o ao Google Analytics: App + Web üë®üèø‚Äçü§ù‚Äçüë®üèΩ üéóÔ∏è üßóüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Google lan√ßou recentemente em acesso p√∫blico uma nova vers√£o do Google Analytics chamada App + Web . Simo Ahab j√° escreveu uma excelente instru√ß√£o p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introdu√ß√£o ao Google Analytics: App + Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463143/">  O Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lan√ßou recentemente em acesso p√∫blico uma</a> nova vers√£o do Google Analytics chamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">App + Web</a> .  Simo Ahab j√° escreveu uma excelente instru√ß√£o passo a passo sobre como come√ßar a trabalhar com a ferramenta, ent√£o decidi traduzi-la para o russo.  Por conta pr√≥pria, acrescentarei que o produto acabou de aparecer na vers√£o beta e, aparentemente, ainda estar√° substancialmente conclu√≠do.  J√° come√ßamos a testar a nova estrutura de dados e os recursos da fun√ß√£o interna de exporta√ß√£o de dados no Google BigQuery e esperamos falar mais sobre as vantagens e desvantagens em breve.  Em geral, hoje os analistas avaliam inova√ß√µes positivamente.  Por exemplo, Vlad Flax, da OWOX BI, acredita que, com essa atualiza√ß√£o, o Google simplificou o processo de coleta de dados e entrega do Google Analytics para o BigQuery para os projetos que est√£o prontos para alterar a estrutura de seus dados.  Al√©m disso, agrega valor ao Google BigQuery como DWH para dados de marketing. <a name="habracut"></a><br><br>  Abaixo est√° uma tradu√ß√£o do artigo de Simo com suas classifica√ß√µes e impress√µes de seu uso. <br><br>  Apesar do t√≠tulo embara√ßoso, √© uma ferramenta realmente √≥tima para todas as metas e objetivos do Google Analytics V2 ou Firebase Analytics for Web.  Aqui, n√£o estamos falando sobre a maneira charmosa de criar relat√≥rios resumidos entre o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Google Analytics para Firebase</a> e o Universal Analytics, ou sobre como melhorar o Universal Analytics. <br><br>  N√£o, estamos falando de um novo modelo de medi√ß√£o de tr√°fego da Web que funciona bem com o Google Analytics para Firebase. <br><br>  Esse ainda √© um produto pouco polido e a documenta√ß√£o ainda est√° um pouco ausente. Por isso, pensei em fornecer uma vantagem e mostrar como configurar a coleta de dados usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o Gerenciador de tags do Google</a> .  Pretendo lan√ßar um guia completo, adequado e abrangente assim que o recurso sair do teste beta.  No entanto, este artigo deve ajudar aqueles que j√° est√£o ansiosos para experimentar todos os seus novos recursos e coisas interessantes no momento. <br><br>  O nome Google Analytics: App + Web √© um pouco estranho.  Parece-me que isso √© apenas uma quest√£o de tempo, quando vamos cham√°-lo de Firebase para a Web ou algo assim, porque √© isso que √© em ess√™ncia.  Neste artigo, chamarei GAv2 nos locais em que simplesmente relutarei em digitar o nome na √≠ntegra (sim, sou pregui√ßoso). <br><br><img src="https://habrastorage.org/webt/n2/8n/g4/n28ng4pnp0xw7zhsw9myfhx3a0o.jpeg"><br><br>  Antes de come√ßar, abra o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maravilhoso blog de</a> Crista Seyden em uma nova guia e preste aten√ß√£o especial aos tr√™s artigos que ela publicou sobre os recursos de relat√≥rios do Google Analytics: App + Web. <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Novas propriedades do aplicativo + da Web no Google Analytics</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Caminho no google analytics</a> </li><li>  <a href="">Streamview no Google Analytics</a> . </li></ol><br>  <i>ATUALIZA√á√ÉO: Imediatamente ap√≥s a publica√ß√£o deste artigo, a Krista lan√ßou outro √≥timo guia, e o melhor √© que complementa isso porque cobre com muito mais detalhes as etapas envolvidas na cria√ß√£o de um projeto Firebase.</i>  <i>Em geral, confira: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Configura√ß√£o passo a passo do App + Web</a> .</i> <br><br>  Come√ßarei com algumas palavras de abertura; portanto, se voc√™ quiser, pule-as e v√° direto para as etapas de implementa√ß√£o. <br><br><h3>  Advert√™ncias </h3><br>  Primeiro de tudo, o Google Analytics: App + Web est√° em teste <b>beta</b> .  Isso significa que ainda n√£o est√° completamente pronto.  S√©rio, ainda n√£o est√° pronto.  Muitas das coisas pelas quais estou me metendo agora, sem d√∫vida, cair√£o na plataforma em algum momento, bem como as respostas para muitas perguntas que voc√™ ter√°, provavelmente ser√£o dadas em vers√µes futuras. <br><br>  Aqui est√£o alguns pontos que encontrei na interface do usu√°rio de relat√≥rios e nas configura√ß√µes do Gerenciador de tags do Google: <br><br><ul><li>  N√£o h√° relat√≥rios especializados, como Relat√≥rio de pesquisa no site ou Com√©rcio eletr√¥nico </li><li>  N√£o h√° como distinguir entre eventos coletados, recomendados e personalizados automaticamente na interface do usu√°rio de relat√≥rios do usu√°rio. </li><li>  Voc√™ pode configurar o recurso do usu√°rio, veja abaixo como faz√™-lo. </li><li>  N√£o √© poss√≠vel enviar aos itens uma matriz (ou qualquer outro objeto multidimensional) como par√¢metro de evento no Google Analytics ao usar o GTM. </li><li>  Definir valores constantes na tag de configura√ß√£o no GTM parece imposs√≠vel. </li><li>  Voc√™ pode atualizar os recursos existentes do Firebase Analytics de acordo com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este documento de suporte</a> .  Ao abrir um recurso no Google Analytics (desde que voc√™ o vinculou no Google Analytics), voc√™ ver√° uma faixa azul na parte superior da tela solicitando a atualiza√ß√£o. </li></ul><br>  Certifique-se de seguir o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">blog oficial</a> , bem como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">blog</a> de Krista, porque eles se tornar√£o suas varinhas m√°gicas para obter mais informa√ß√µes, incluindo quest√µes dedicadas aos problemas listados neste cap√≠tulo. <br><br><img src="https://habrastorage.org/webt/mp/g3/bu/mpg3bujaubzo9qnva_gpt1j2yao.jpeg"><br><br>  E, finalmente, o ponto √≥bvio.  <b>Isso n√£o √© o Universal Analytics</b> .  Muitas das coisas que voc√™ costuma ver no Universal Analytics n√£o est√£o no Firebase.  Pessoalmente, espero que a paridade da funcionalidade esteja ao virar da esquina, porque agora o Google tem a chance de criar algo novo e melhor.  Mas, √© claro, todos n√≥s gostar√≠amos que essa plataforma substitu√≠sse o Universal Analytics em algum momento; portanto, deve ser √∫til pelo menos nos mesmos casos de uso. <br><br>  Aqui, na minha opini√£o, as principais diferen√ßas entre o Universal Analytics e a nova plataforma. <br><br>  <b>Universal Analytics:</b> <br>  Tudo √© constru√≠do em torno do conceito de uma sess√£o <br>  Defini√ß√µes personalizadas para escopo de ocorr√™ncia, sess√£o e escopo do usu√°rio. <br>  Relat√≥rios de superf√≠cie em tempo real. <br>  Segmentos. <br>  Nenhuma estrutura√ß√£o sem√¢ntica. <br>  Cotas e limites bastante favor√°veis ‚Äã‚Äã(exceto para a amostra). <br><br>  <b>Google Analytics V2:</b> <br>  Tudo √© constru√≠do em torno dos conceitos de "usu√°rio" e "evento" <br>  Propriedades customizadas e par√¢metros de eventos customizados <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">StreamView e DebugView</a> fornecem detalhes mais detalhados. <br>  A audi√™ncia. <br>  Eventos coletados e recomendados automaticamente. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cotas e restri√ß√µes estritas</a> (sem amostragem). <br><br>  As limita√ß√µes s√£o especialmente dolorosas quando comparadas ao que o Universal Analytics fez. <br><br>  De qualquer forma, tenho certeza de que esses problemas ser√£o resolvidos antes do Google Analytics: o App + Web sair do teste beta, mas uma coisa √© certa: <b>esse n√£o √© o Universal Analytics</b> .  Tente olhar para o novo modelo de medi√ß√£o como uma oportunidade de ir al√©m do que o Universal Analytics poderia oferecer, e n√£o apenas como uma maneira de preencher o antigo modelo de dados do GA. <br><br>  Devido a esses avisos, <b>recomendo fortemente que voc√™ pare de coletar dados no Universal Analytics e colete dados exclusivamente no Google Analytics: App + Web</b> .  De qualquer forma, √© melhor executar esse novo modelo de medi√ß√£o em paralelo com qualquer configura√ß√£o que j√° estivesse no site, para que voc√™ possa comparar a paridade entre os dois conjuntos de dados. <br><br><h3>  Criando novas configura√ß√µes do Analytics: App + Web </h3><br>  Para criar uma nova propriedade do Google Analytics: App + Web, fa√ßa o seguinte: <br><br>  <b>Preste aten√ß√£o!</b>  Com base na documenta√ß√£o publicada, √© prov√°vel que essas etapas sejam bastante simplificadas no futuro. <br><br><h3>  Etapa 1: Crie um novo projeto Firebase </h3><br>  V√° para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o console do Firebase</a> e crie um novo projeto.  Este ser√° o projeto base do Firebase para sua nova configura√ß√£o. <br><br><img src="https://habrastorage.org/webt/3b/3v/yn/3b3vynm7uvhajdryv-x5lbugtze.jpeg"><br><br>  D√™ ao projeto um nome e um ID (o ID deve ser √∫nico, ser√° gerado com base no nome do projeto). <br><br>  Leia e aceite os termos do Firebase e clique em Continuar. <br><br><img src="https://habrastorage.org/webt/ef/hv/tz/efhvtzmljd3aumtxmioqduqtfpo.jpeg"><br><br>  Na pr√≥xima etapa, verifique se a caixa de sele√ß√£o "Configurar o Google Analytics para o meu projeto" est√° marcada e clique em Continuar. <br><br><img src="https://habrastorage.org/webt/wt/4j/ps/wt4jps7l5yylvdsqaesf0yv1gji.jpeg"><br><br>  Dependendo se voc√™ j√° possui contas do Google ou n√£o, agora pode escolher em qual conta criar o recurso ou criar uma nova conta como um todo.  Se voc√™ n√£o possui contas do Google Analytics associadas ao seu login, precisar√° aceitar os termos de servi√ßo do GA, ap√≥s o qual uma nova conta e um recurso ser√£o criados para voc√™. <br><br><img src="https://habrastorage.org/webt/d9/bz/f-/d9bzf-tavmmbmyjqpm03sob2nec.jpeg"><br><br>  Depois de clicar em <b>Criar projeto</b> e o processamento ser conclu√≠do, voc√™ pode acessar o Google Analytics e encontrar o novo recurso App + Web na sua conta escolhida. <br><br><img src="https://habrastorage.org/webt/bp/js/y_/bpjsy_kg-eccdxlagnoqgpkgnny.jpeg"><br><br><h3>  Etapa 2. Crie um novo fluxo da web </h3><br>  O novo modelo de medi√ß√£o gira em torno de <b>fluxos</b> que podem vir de seus aplicativos (iOS e Android) ou da Internet.  Espero que, no futuro, possamos ver novos fluxos, como o "Protocolo de Medi√ß√£o", que aceitar√° solicita√ß√µes HTTP de qualquer dispositivo conectado √† Internet. <br><br>  Nos dois casos, selecione a op√ß√£o <b>Fluxos de Dados</b> na coluna do recurso e selecione <b>Web</b> . <br><br><img src="https://habrastorage.org/webt/ou/wv/1g/ouwv1guhselkp0mda09ag4dzxyq.jpeg"><br><br>  Para configurar um fluxo, digite o URL do seu site e atribua um nome descritivo ao fluxo.  Em seguida, clique na engrenagem pequena para configurar a medi√ß√£o aprimorada. <br><br><img src="https://habrastorage.org/webt/r6/tn/nl/r6tnnlyvn6s7tvdq4lo254hje7w.jpeg"><br><br>  A Medida aprimorada basicamente adiciona alguns recursos de rastreamento autom√°tico ao site que s√£o ativados quando a tag de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">configura√ß√£o b√°sica</a> √© criada. <br><br><img src="https://habrastorage.org/webt/gy/kv/lh/gykvlhuh7mitdzp-v_o3eyg0cy4.jpeg"><br><br>  A lista de itens que podem ser rastreados automaticamente √© bastante clara e bem explicada na configura√ß√£o de medi√ß√£o avan√ßada (veja a captura de tela acima). <br><br>  Quando estiver pronto, crie um fluxo de dados e voc√™ ver√° v√°rias instru√ß√µes de marca√ß√£o e outros pontos na tela.  O mais importante a ser observado √© o ID da medi√ß√£o.  Mantenha essa guia aberta para que voc√™ possa copiar os c√≥digos de dimens√£o nas tags do Gerenciador de tags do Google, se necess√°rio. <br><br><img src="https://habrastorage.org/webt/xw/mt/pg/xwmtpgjlosplxdl0mvikm14gg-y.jpeg"><br><br>  Voc√™ terminou?  Ok, agora vamos ao Gerenciador de tags do Google. <br><br><h3>  Crie uma tag de configura√ß√£o b√°sica </h3><br>  No Gerenciador de tags do Google, ao criar uma nova tag, voc√™ ver√° dois novos modelos de tags no seletor. <br><br><img src="https://habrastorage.org/webt/uw/fa/n-/uwfan-erdvibiojmzalem4bptsq.jpeg"><br><br>  Google Analytics: App + Web Configuration √© semelhante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ao comando</a> <code>config</code> usado na implementa√ß√£o <code>gtag.js</code>  Voc√™ o usa para configurar o rastreador, enviar uma visualiza√ß√£o de p√°gina inicial e definir valores constantes para todos os seus eventos. <br><br>  Quando voc√™ abre o modelo, certamente n√£o √© bem-vindo com muitas op√ß√µes.  Na verdade, voc√™ tem um campo para determinar o ID da medida, uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">op√ß√£o</a> para escolher se deseja enviar a visualiza√ß√£o de p√°gina inicial ou n√£o e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">os campos de configura√ß√£o</a> que voc√™ pode definir na tag. <br><br><img src="https://habrastorage.org/webt/lb/7b/od/lb7bodf5qbqg4xwpbnslhqt61rs.jpeg"><br><br>  Para configurar a tag base, especifique-a no campo ID da medida do fluxo da web criado na parte anterior.  Voc√™ pode definir um valor no campo <code>user_id</code> associado ao ID de autentica√ß√£o do usu√°rio, caso deseje abrir caminho para a medi√ß√£o entre dispositivos e aplicativos. <br><br>  De acordo com a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> , voc√™ poder√° definir qualquer par√¢metro de evento nos campos para definir a tag de configura√ß√£o, se desejar que esses par√¢metros sejam enviados a cada chamada subseq√ºente que use o mesmo ID de dimens√£o.  Infelizmente, no momento da reda√ß√£o, isso n√£o parece funcionar. <br><br><h3>  Definir propriedades personalizadas </h3><br>  Para definir propriedades do usu√°rio, voc√™ deve primeiro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cri√°-las</a> na interface do usu√°rio de relat√≥rios. <br><br><img src="https://habrastorage.org/webt/vf/_g/k3/vf_gk3ltoh6kpmfwcmlx9ydqyhi.jpeg"><br><br>  Em seguida, v√° para Campos para definir na sua configura√ß√£o e adicione um novo campo.  O nome do campo deve ser <code>user_properties</code> . <br><br><img src="https://habrastorage.org/webt/vs/w7/8e/vsw78exc-nrgoxryhiecqkaf0vu.jpeg"><br><br>  Voc√™ deve usar uma vari√°vel JavaScript personalizada (ou um modelo de vari√°vel personalizada) como o valor do campo, que retorna um objeto em que cada chave do objeto corresponde ao nome da Propriedade do usu√°rio que voc√™ criou na interface do usu√°rio de relat√≥rio e o valor √© o mesmo que voc√™ deseja enviar como propriedade personalizada em quest√£o. <br><br>  Por exemplo, para definir a propriedade <code>user_type</code> (veja a captura de tela acima), posso criar uma vari√°vel JavaScript personalizada que se parece com isso: <br><br><pre> <code class="plaintext hljs">"function() { return { user_type: 'Premium user' }; }"</code> </pre><br>  Ent√£o voc√™ precisa adicionar essa vari√°vel como o valor do campo <code>user_properties</code> na tag de configura√ß√£o. <br><br>  Um m√©todo alternativo √© usar um modelo de vari√°vel personalizado (consulte meu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guia</a> se voc√™ n√£o se lembrar do que s√£o modelos de usu√°rio).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° o modelo que</a> eu criei para retornar o objeto de propriedades do usu√°rio.  Voc√™ pode us√°-lo para criar uma vari√°vel na qual define chaves individuais e valores de propriedade do usu√°rio e, em seguida, define essa vari√°vel como o valor da chave <code>user_properties</code> na tag de configura√ß√£o. <br><br><img src="https://habrastorage.org/webt/rx/zl/1o/rxzl1oz2kciqbzjd2zxdad4pbo8.jpeg"><br><br>  Depois de criar a tag de configura√ß√£o, ative-a com a op√ß√£o Todas as p√°ginas e entre no modo de visualiza√ß√£o.  Vamos ver como esse novo modelo de medi√ß√£o funciona em um site! <br><br><h3>  Teste! </h3><br>  Ao visitar o site e fazer o download do cont√™iner de visualiza√ß√£o, abra as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ferramentas de desenvolvedor</a> do navegador e observe os cookies usados ‚Äã‚Äãpelo GAv2. <br><br><img src="https://habrastorage.org/webt/kl/ab/xo/klabxouaktnaphimbe0wwk5zvik.jpeg"><br><br>  O <code>cookie _ga</code> quase o mesmo que o Universal Analytics, com uma pequena diferen√ßa.  O cookie _ga codifica o n√∫mero de partes do dom√≠nio no valor do cookie como o n√∫mero ap√≥s o <code>GA1</code> .  Por exemplo, se um cookie √© gravado em simoahava.com, o dom√≠nio consiste em duas partes e o prefixo do cookie √© GA1.2. <br><br>  No entanto, com o GAv2, isso n√£o √© como usar o valor padr√£o <code>cookie_domain</code> (configura√ß√£o autom√°tica). <br>  Eu acho que isso pode ser uma omiss√£o, como se voc√™ definisse manualmente o dom√≠nio, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.simoahava.com</a> , o cookie tenha o GA1.3 usual.  prefixo. <br><br>  Outro <code>cookie, _ga_MEASUREMENT-ID **</code> , parece suportar o estado da sess√£o.  O primeiro n√∫mero longo √© o registro de data e hora (em segundos) quando o cookie foi criado, e o segundo n√∫mero mais longo √© o registro de data e hora quando o √∫ltimo hit foi enviado ao GA. <br><br>  Em outras palavras, parece que o GAv2 pelo menos controla se a sess√£o est√° ativa no momento.  Resta saber se ele usar√° a persist√™ncia do lado do cliente em maior extens√£o para informa√ß√µes da sess√£o e se esse cookie pode ser usado para determinar o estado da sess√£o em um navegador da web. <br><br>  O JavaScript √© usado para cookies, ent√£o eles s√£o afetados por medidas para reduzir o desempenho de cookies no lado do cliente, como a Preven√ß√£o de rastreamento inteligente do Safari. <br><br>  Em seguida, siga as solicita√ß√µes da Web enviadas pelo navegador ou use a extens√£o do depurador do Google Analytics para ver como a biblioteca envia hits para o Google Analytics. <br><br><img src="https://habrastorage.org/webt/vi/os/2q/vios2qqoxfidrj52xjdesfbcthq.jpeg"><br><br>  Primeiro, voc√™ pode ver que a solicita√ß√£o est√° sendo enviada para o terminal familiar <code>/collect</code> , exceto que est√° no caminho / g /. <br><br>  O tipo de solicita√ß√£o √© POST e o terminal ainda √© um pixel de imagem.  Em outras palavras, o hit parece usar a API Beacon por padr√£o, o que √© uma grande melhoria para o Universal Analytics, onde voc√™ tinha que ativar manualmente esse recurso. <br><br>  A API Beacon protege solicita√ß√µes ass√≠ncronas enviadas quando a p√°gina √© descarregada, o que permite que elas sejam executadas mesmo se o navegador estiver fechado.  Isso evita o inc√¥modo de ignorar chamadas (por exemplo, eventos associados a um clique em um link), porque o usu√°rio saiu da p√°gina antes da conclus√£o da solicita√ß√£o. <br><br><img src="https://habrastorage.org/webt/-9/au/c2/-9auc2solqzij8-nmq_pshjgvxk.jpeg"><br><br>  Se voc√™ observar os par√¢metros reais enviados para o GA, h√° muitas coisas familiares aqui, se voc√™ se lembrar de como as solicita√ß√µes do protocolo de medi√ß√£o s√£o constru√≠das. <br>  O par√¢metro <code>v</code> tem um valor 2, enquanto no Universal Analytics √© 1. Esta √© a vers√£o do protocolo. <br>  O par√¢metro <code>tid</code> est√° definido para o seu ID da dimens√£o. <br>  O par√¢metro <code>gtm</code> hash do ID do seu cont√™iner GTM. <br>  O par√¢metro <code>cid</code> √© o identificador do cliente armazenado no <code>cookie _ga</code> . <br><br>  Outras op√ß√µes que permaneceram praticamente inalteradas incluem itens como <code>uid</code> (ID do usu√°rio), dl / dr / dt (metadados do documento) e <code>sr</code> (resolu√ß√£o da tela). <br><br>  N√£o h√° mais uma dimens√£o Tipo de ocorr√™ncia, em vez disso, o par√¢metro en (nome do evento) √© usado para distinguir tipos diferentes de ocorr√™ncias.  Essa √© a principal diferen√ßa do Universal Analytics, porque no GAv2 voc√™ tem um √∫nico fluxo de eventos, onde os par√¢metros do evento que voc√™ envia juntamente com o nome do evento determinam como os dados s√£o exibidos nos relat√≥rios. <br><br>  Os par√¢metros do evento s√£o prefixados com ep.  ou epn.  para par√¢metros de texto e par√¢metros num√©ricos, respectivamente.  Na captura de tela, criei um par√¢metro de evento chamado country e defina-o como US. <br><br>  As propriedades do usu√°rio s√£o prefixadas com up.  ou upn.  para propriedades personalizadas em formato de texto ou n√∫mero, respectivamente.  A captura de tela mostra uma propriedade de texto do usu√°rio chamado <code>user_type</code> , definida como usu√°rio Premium. <br>  Finalmente, o par√¢metro sid parece conter o registro de data e hora quando a sess√£o atual foi iniciada (extra√≠da do <code>cookie _ga_MEASUREMENT-ID</code> ). <br><br>  Ainda n√£o est√° claro o que as outras op√ß√µes est√£o fazendo. <br><br>  Uma coisa que voc√™ pode notar √© o atraso no envio da ocorr√™ncia.  Ao carregar a p√°gina, voc√™ pode ver como o navegador aguardar√° alguns segundos antes de enviar o hit para o GA.  Isso se deve ao fato de o GAv2 agrupar solicita√ß√µes automaticamente, o que, novamente, √© uma √≥tima atualiza√ß√£o de recurso. <br><br>  Ao agrupar v√°rias ocorr√™ncias em uma √∫nica solicita√ß√£o, os recursos do navegador s√£o salvos para outros fins.  O atraso ocorre porque o navegador aguarda o envio de outros hits junto com a visualiza√ß√£o de p√°gina. <br><br>  Antes de criar sua primeira tag de evento, veja como a Medida aprimorada funciona.  Primeiro, role para baixo at√© o final da p√°gina atual e veja o evento enviado ao Google Analytics. <br><br><img src="https://habrastorage.org/webt/6g/cv/uy/6gcvuyafq8jicmqyvmiupnlcpoa.jpeg"><br><br>  Em seguida, clique no link que leva ao seu site (use CTRL / CMD + clique para abri-lo em uma nova guia).  D√™ uma olhada nas op√ß√µes. <br><br><img src="https://habrastorage.org/webt/gp/h1/_i/gph1_iunj1kbcqrp3ruvcx3fote.jpeg"><br><br>  Por fim, se o YouTube estiver incorporado no seu site com enablejsapi = 1, verifique o rastreamento autom√°tico de v√≠deo! <br><br><img src="https://habrastorage.org/webt/it/9k/hd/it9khdbigieyah5sja-l1x7hy34.jpeg"><br><br>  √â tudo incrivelmente legal, mas espero que tenhamos mais alguns controles para ajustar a medi√ß√£o aprimorada. <br><br>  Agora, vamos criar nossa pr√≥pria tag de evento! <br><br><h3>  Crie uma tag de evento </h3><br>  funcionam de maneira semelhante ao uso de eventos gtag.js e Firebase. <br><br>  Em outras palavras, h√° uma combina√ß√£o de eventos coletados automaticamente, eventos recomendados e eventos do usu√°rio. <br><br>  Ao criar novos eventos, primeiro verifique se o evento ainda n√£o foi coletado automaticamente. <br><br>  Em seguida, verifique se h√° uma estrutura de eventos recomendada que voc√™ possa usar em vez de um evento personalizado.  Se voc√™ encontrar o evento recomendado apropriado, certifique-se de usar o nome do evento e os par√¢metros sugeridos ao configurar a tag de evento. <br><br>  Agora, se desejar, voc√™ ainda pode enviar um nome de evento totalmente configurado com par√¢metros de evento completamente arbitr√°rios.  Lembre-se de que voc√™ perder√° alguma flexibilidade na interface do usu√°rio de relat√≥rios, pois existem algumas restri√ß√µes estritas no n√∫mero de propriedades personalizadas que voc√™ pode definir para relat√≥rios na interface do usu√°rio. <br><br>  Vamos come√ßar com um <b>evento personalizado simples</b> . <br><br>  Crie um novo teg do Google Analytics: App + Evento da Web e preencha-o da seguinte maneira: <br><br><img src="https://habrastorage.org/webt/vo/sw/xg/voswxgm0yjxlmcu0j7bi7jhs9hq.jpeg"><br><br>  Defina a etiqueta de configura√ß√£o para o valor criado na se√ß√£o anterior.  Isso funciona da mesma forma que a vari√°vel de configura√ß√µes do Google Analytics, pois voc√™ s√≥ precisa definir as configura√ß√µes do rastreador uma vez, ap√≥s o que ser√£o aplicadas a todas as tags que usam a tag de configura√ß√£o. <br><br>  Atribua ao evento um nome arbitr√°rio (ou seja, n√£o um dos eventos coletados ou recomendados automaticamente).  Nesse caso, usamos <code>data_loaded</code> como o nome do evento. <br><br>  Em seguida, adicione alguns par√¢metros: <br><br><ul><li>  <code>all_data</code> √© um par√¢metro de texto personalizado definido como true. </li><li>  <code>debug_mode</code> √© um par√¢metro que, quando instalado em uma tag, exibe uma ocorr√™ncia no fluxo de relat√≥rios da interface do usu√°rio DebugView (mais sobre isso abaixo). </li></ul><br>  Marque a caixa para iniciar o bot√£o de op√ß√£o Window Loaded, atualizar o modo de visualiza√ß√£o e fazer upload do cont√™iner para o site.  Veja as solicita√ß√µes de rede para <code>/collect</code> . <br><br>  Depois de carregar a p√°gina, voc√™ dever√° ver uma solicita√ß√£o com duas ocorr√™ncias combinadas em uma (modo em lote). <br><br><img src="https://habrastorage.org/webt/w7/hy/rh/w7hyrhclui132v52ceu_45zfs8c.jpeg"><br><br>  Como voc√™ pode ver, na primeira linha h√° um hit <code>page_view</code> e na segunda linha o evento do usu√°rio <code>data_loaded</code> . <br><br>  Agora v√° para a interface do usu√°rio de relat√≥rios do Google Analytics e selecione DebugView no navegador de relat√≥rios. <br><br>  <i>Leia o excelente artigo sobre relat√≥rios de streaming do Krista para entender como interpretar os seguintes dados.</i>  <i>Voc√™ tamb√©m pode ler a documenta√ß√£o do Firebase DebugView para obter mais informa√ß√µes.</i> <i><br></i> <br>  No seletor Debug Device, na parte superior da tela, √© poss√≠vel ver quantos dispositivos (por exemplo, inst√¢ncias do navegador) est√£o enviando hits de depura√ß√£o para o GA.  Use o seletor para rolar pelos dispositivos listados at√© encontrar o dispositivo que enviou recentemente o evento <code>data_loaded</code> . <br><br>  <i>No momento, esse seletor de dispositivos de depura√ß√£o n√£o pode ser usado.</i>  <i>Felizmente, em um futuro pr√≥ximo, ser√° mais f√°cil encontrar dispositivos de depura√ß√£o.</i> <br><br>  Tendo encontrado o evento <code>data_loaded</code> , voc√™ pode ver outros hits inclu√≠dos no DebugView.  Isso ocorre porque, se o pacote contiver outros hits diferentes do hit <code>data_loaded</code> , eles tamb√©m ser√£o listados automaticamente no DebugView. <br><br><img src="https://habrastorage.org/webt/oy/-g/i-/oy-gi-5w_os53sp1o3byjbiwuv0.jpeg"><br><br>  Voc√™ pode clicar nos par√¢metros no evento <code>data_loaded</code> para ver que tipo de informa√ß√£o √© enviada ao Google Analytics com um hit. <br><br>  Antes de terminar, vamos tentar enviar um <b>evento recomendado tamb√©m</b> .  Enviaremos um evento de pesquisa para simular uma pesquisa no site. <br><br>  Se voc√™ ler as instru√ß√µes na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lista de eventos recomendados</a> , ver√° que o nome do evento de pesquisa √© pesquisa e √© necess√°rio um par√¢metro: <code>search_term</code> .  Ent√£o, vamos criar uma nova tag de evento e preencher esses valores!  Aqui est√° a apar√™ncia da tag: <br><br><img src="https://habrastorage.org/webt/us/h_/wb/ush_wbm2mzugcdl-nnr3bt21ypy.jpeg"><br><br>  Como voc√™ pode ver, eu apenas codifiquei a palavra de pesquisa nos par√¢metros do evento.  Estou executando uma tag com um <b>gatilho de evento personalizado</b> definido como um evento chamado <code>search</code> . <br><br>  Ap√≥s atualizar o modo de visualiza√ß√£o e recarregar meu site, posso disparar o evento usando um simples <code>window.dataLayer.push ({event: 'search'})</code> executado no console JavaScript da p√°gina. <br><br>  No DebugView, vejo que o evento foi registrado: <br><br><img src="https://habrastorage.org/webt/ks/mz/gi/ksmzgix7vgnvrgfo_ky3v3r4nb0.jpeg"><br><br>  E ... isso √© tudo.  Nada distingue esse evento dos eventos do usu√°rio.  N√£o h√° relat√≥rios que correspondam a dados de pesquisa no site semelhantes ao Universal Analytics.  Em algum momento, tenho certeza de que alguns eventos de pesquisa ser√£o registrados em seu pr√≥prio relat√≥rio, onde os dados da pesquisa s√£o combinados com o evento coletado automaticamente <code>view_search_results</code> (exibi√ß√£o de p√°gina registrada com par√¢metros de consulta correspondentes √† pesquisa no site). <br><br><h3>  Sum√°rio </h3><br>  Neste artigo, eu queria mostrar como configurar um novo recurso do Google Analytics: App + Web ao usar o Gerenciador de tags do Google como a ferramenta de implementa√ß√£o escolhida. <br><br>  Felizmente, deixei claro que esse recurso ainda est√° em teste <b>beta</b> e, portanto, n√£o foi intencionalmente conclu√≠do.  Novos recursos ser√£o introduzidos ao longo do tempo, at√© que no futuro saiamos da vers√£o beta com uma plataforma totalmente funcional. <br><br>  Esta plataforma pretende substituir o Universal Analytics?  Ainda √© desconhecido.  Mas seria conceitualmente dif√≠cil justificar vers√µes futuras do servi√ßo ou fun√ß√µes do Universal Analytics, quando houver um novo modelo de medi√ß√£o brilhante que voc√™ ter√° que suportar. <br><br>  <i>Tenho o prazer de apresentar o</i> Firebase com <i>cautela</i> na Internet.  √â isso que estou ansioso desde que comecei a trabalhar com o Firebase (e o Firebase Analytics) h√° muito tempo.  Penso que o modelo de medi√ß√£o de usu√°rio e evento √© superior ao modelo altamente agregado e de sess√£o usado pelo Google Analytics. <br><br>  No entanto, resta ver quanto da altern√¢ncia de contexto precisamos executar mentalmente para entender como os casos de uso considerados pelo Google Analytics: App + Web s√£o compar√°veis ‚Äã‚Äãaos casos de uso do Universal Analytics. <br><br>  Definitivamente alocarei mais recursos para escrever conte√∫do para o Firebase, pois essa nova maneira de combinar an√°lises entre aplicativos e sites √© muito interessante para ignorar. <br><br>  Vamos discutir o Google Analytics: App + Web nos coment√°rios, mas lembre-se de que estamos falando de um produto <b>beta</b> .  Voc√™ pode expressar livremente sua decep√ß√£o com as decis√µes de desenvolvimento e os recursos ausentes, mas lembre-se de que fornecer suas cr√≠ticas de forma construtiva pode levar a mudan√ßas destinadas a eliminar essas cr√≠ticas no produto final, pois o objetivo da vers√£o beta √© obter feedback da comunidade. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463143/">https://habr.com/ru/post/pt463143/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463125/index.html">OOP em imagens</a></li>
<li><a href="../pt463127/index.html">Monitoramento de UPS. Parte dois - Automatize o Analytics</a></li>
<li><a href="../pt463135/index.html">Em quais pa√≠ses √© rent√°vel registrar empresas de TI em 2019?</a></li>
<li><a href="../pt463137/index.html">Mesmo se voc√™ quer ser um designer de jogos, ningu√©m vai te ensinar como</a></li>
<li><a href="../pt463141/index.html">Habr Weekly # 13 / Sob amea√ßa de 1,5 milh√£o de usu√°rios de um servi√ßo de encontros, investiga√ß√£o Medusa, decano dos russos</a></li>
<li><a href="../pt463147/index.html">ROS Trolley Robot - Parte 3. Acelere, troque a c√¢mera, conserte a marcha</a></li>
<li><a href="../pt463149/index.html">Alan Kay recomenda a leitura de livros de programa√ß√£o antigos e esquecidos, mas importantes</a></li>
<li><a href="../pt463151/index.html">iOS 13 sob a lupa</a></li>
<li><a href="../pt463155/index.html">O ru√≠do branco desenha um quadrado preto. Parte 2. Solu√ß√£o</a></li>
<li><a href="../pt463157/index.html">Servidor de Streaming de V√≠deo ESP32-CAM Conectando Monitores I2C e SPI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>