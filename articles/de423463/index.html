<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙏🏼 🛌🏼 👩🏿‍🤝‍👩🏼 Da haben wir einen anderen RFM-Analysealgorithmus geschrieben 🙏🏻 🖼️ ☺️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir haben kürzlich darüber gesprochen, warum wir einen eigenen RFM-Segmentierer entwickelt haben, mit dem RFM-Analysen in 20 Sekunden durchgeführt wer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Da haben wir einen anderen RFM-Analysealgorithmus geschrieben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mindbox/blog/423463/"><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img align="left" alt="KDPV" width="400" src="https://habrastorage.org/webt/jz/8z/ry/jz8zryizwksvh074dadvanrqwye.png"></a>  Wir haben kürzlich darüber gesprochen, warum wir einen eigenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RFM-Segmentierer entwickelt haben, mit dem RFM-Analysen in 20 Sekunden durchgeführt werden können</a> , und gezeigt, wie die Ergebnisse im Marketing verwendet werden können. </p><br><p>  Jetzt erzählen wir, wie es angeordnet ist. <br><br><br clear="left"></p><a name="habracut"></a><br><h1 id="zadacha-napisat-novyy-algoritm-rfm-analiza">  Aufgabe: Schreiben Sie einen neuen RFM-Analysealgorithmus </h1><br><p>  Wir waren mit den verfügbaren Ansätzen zur RFM-Analyse nicht zufrieden.  Aus diesem Grund haben wir uns entschlossen, einen eigenen Segmentierer zu entwickeln, der: </p><br><ul><li>  Es funktioniert vollautomatisch. </li><li>  Baut aus 3 bis 15 Segmenten. </li><li>  Passt sich jedem Tätigkeitsbereich des Kunden an (egal was es ist: ein Blumen- oder Elektrowerkzeugladen). </li><li>  Es bestimmt die Anzahl und Position von Segmenten basierend auf verfügbaren Daten und nicht vordefinierten Parametern, die nicht universell sein können. </li><li>  Es wählt Segmente so aus, dass sie immer Verbraucher haben (im Gegensatz zu einigen Ansätzen, wenn einige Segmente leer sind). </li></ul><br><h1 id="kak-reshali-zadachu">  So lösen Sie das Problem </h1><br><p> Als wir die Aufgabe erkannten, erkannten wir, dass sie außerhalb der Macht des Menschen lag, und baten die künstliche Intelligenz um Hilfe.  Um dem Auto beizubringen, Verbraucher in Segmente zu unterteilen, haben wir uns für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Clustering-</a> Methoden entschieden. </p><br><p>  Clustering-Methoden werden verwendet, um nach einer Struktur in den Daten zu suchen und Gruppen ähnlicher Objekte darin auszuwählen - genau das, was Sie für die RFM-Analyse benötigen. </p><br><p>  Clustering bezieht sich auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">maschinelle Lernmethoden</a> der Klasse " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lernen ohne Lehrer</a> ".  Eine Klasse wird so genannt, weil es Daten gibt, aber niemand weiß, was damit zu tun ist, deshalb kann sie keine Maschine unterrichten. </p><br><p>  Wir konnten keine Unternehmen mit diesem Ansatz auf dem Markt finden.  Obwohl sie einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel gefunden haben,</a> in dem der Autor wissenschaftliche Forschung zu diesem Thema betreibt.  Aber wie wir aus eigener Erfahrung verstanden haben, ist der Übergang von der Wissenschaft zur Wirtschaft keineswegs ein Schritt. </p><br><h2 id="etap-1-predobrabotka-dannyh">  Stufe 1. Datenverarbeitung </h2><br><p>  Daten müssen für das Clustering vorbereitet werden. </p><br><p>  Zuerst überprüfen wir sie auf falsche Werte: negative Werte usw. </p><br><p>  Dann entfernen wir Emissionen - Verbraucher mit ungewöhnlichen Eigenschaften.  Es gibt nur wenige von ihnen, aber sie können das Ergebnis stark beeinflussen und nicht zum Besseren.  Um sie zu trennen, verwenden wir eine spezielle Methode des maschinellen Lernens - den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lokalen Ausreißerfaktor</a> . </p><br><p><img src="https://habrastorage.org/webt/bw/ff/sm/bwffsmjiyzunwf00brnvxp7-jjw.png" alt="Bild der Emissionstrennung"></p><br><p>  Hier auf den Bildern verwende ich nur zwei der drei Dimensionen (R und M) von drei, um die Wahrnehmung zu erleichtern. </p><br><p>  Emissionen sind nicht am Aufbau von Segmenten beteiligt, sondern werden ihnen nach Bildung der Segmente zugewiesen. </p><br><h2 id="etap-2-klasterizaciya-potrebiteley">  Stufe 2. Consumer Clustering </h2><br><p>  Ich werde die Terminologie klarstellen: Mit Clustern meine ich Gruppen von Objekten, die durch die Verwendung von Clustering-Algorithmen erhalten werden, und Segmente als Endergebnis, dh das Ergebnis der RFM-Analyse. </p><br><p>  Es gibt mehrere Dutzend Clustering-Algorithmen.  Beispiele für einige davon finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in der Dokumentation zum scikit-learn-Paket</a> . </p><br><p>  Wir haben acht Algorithmen mit verschiedenen Modifikationen ausprobiert.  Die meisten hatten nicht genug Speicher.  Oder die Zeit ihrer Arbeit war unendlich.  Fast alle Algorithmen, die es technisch geschafft haben, die Aufgabe zu bewältigen, lieferten schreckliche Ergebnisse: Beispielsweise betrachtete der beliebte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DBSCAN</a> 55% der Objekte als Rauschen und teilte den Rest in 4302 Cluster auf. </p><br><p><img src="https://habrastorage.org/webt/ur/9l/3g/ur9l3gmnohsqkffhjsthn5bocwc.png" alt="DBSCAN-Betriebsbeispiel"></p><br><p>  <em>Violette Objekte werden als "Rauschen" definiert.</em> </p><br><p>  Aus diesem Grund haben wir den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">K-Means</a> -Algorithmus (K-Means) gewählt, da er nicht nach Punktclustern sucht, sondern einfach die Punkte um die Zentren gruppiert.  Wie sich herausstellte, war dies die richtige Entscheidung. </p><br><p>  Aber zuerst haben wir ein paar Probleme gelöst: </p><br><ol><li><p>  <strong>Instabilität.</strong>  Dies ist ein bekanntes Problem bei den meisten Clustering-Algorithmen, einschließlich K-Means.  Die Instabilität liegt in der Tatsache, dass bei wiederholten Starts die Ergebnisse unterschiedlich sein können, da ein Element der Zufälligkeit verwendet wird. <br>  Daher gruppieren wir viele Male und dann wieder, aber bereits die Zentren der Cluster.  Als endgültige Zentren der Cluster nehmen wir die Zentren der resultierenden Cluster (dh Cluster, die durch die Zentren der ersten Cluster gebildet werden). </p><br></li><li><p>  <strong>Die Anzahl der Cluster.</strong>  Die Daten können unterschiedlich sein, und die Anzahl der Cluster muss ebenfalls unterschiedlich sein. <br>  Um die optimale Anzahl von Clustern für jeden Kundenstamm zu finden, führen wir Clustering mit einer anderen Anzahl von Clustern durch und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wählen</a> dann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das beste Ergebnis aus</a> . </p><br></li><li><p>  <strong>Geschwindigkeit.</strong>  Der K-Means-Algorithmus ist nicht sehr schnell, aber akzeptabel (einige Minuten für eine durchschnittliche Basis von mehreren hunderttausend Verbrauchern).  Wir führen es jedoch viele Male aus: Erstens, um die Stabilität zu erhöhen, und zweitens, um die Anzahl der Cluster auszuwählen.  Und die Betriebszeit nimmt sehr zu. <br>  Zur Beschleunigung verwenden wir eine Modifikation der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mini Batch K-Means</a> .  Die Cluster-Zentren werden bei jeder Iteration nicht für alle Objekte neu berechnet, sondern nur für eine kleine Teilstichprobe.  Die Qualität sinkt erheblich, aber die Zeit wird erheblich verkürzt. </p><br></li></ol><br><p>  Sobald wir diese Probleme behoben hatten, begann das Clustering erfolgreich. </p><br><p><img src="https://habrastorage.org/webt/sm/gd/w1/smgdw1bf8lxc71abccsn9yqfb_m.png" alt="KMeans Ergebnis"></p><br><h2 id="etap-3-postobrabotka-klasterov">  Stufe 3. Nachbearbeitung von Clustern </h2><br><p>  Die mit dem Algorithmus erhaltenen Cluster müssen in eine Form gebracht werden, die für die Wahrnehmung geeignet ist. </p><br><p>  Zuerst verwandeln wir diese Cluster von Kurven in rechteckige.  Eigentlich macht dies sie zu Segmenten.  Die Rechteckigkeit der Segmente ist eine Anforderung an unser System und trägt zusätzlich zur Verständlichkeit der Segmente selbst bei.  Zum Konvertieren verwenden wir einen anderen Algorithmus für maschinelles Lernen - den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entscheidungsbaum</a> . </p><br><p><img src="https://habrastorage.org/webt/bf/uq/gi/bfuqgiaft8d6cmb-pucpzxb8_ho.png" alt="Ergebnis des Entscheidungsbaums"></p><br><p>  <em>Der Entscheidungsbaum basiert auf ausreißerfreien Daten, und die Ausreißer werden dann den fertigen Segmenten zugeordnet</em> </p><br><p>  Zweitens haben wir eine andere coole Sache gemacht - die Beschreibung der Segmente.  Ein spezieller Algorithmus, der ein Wörterbuch verwendet, beschreibt jedes Segment in Live-Russisch, damit die Menschen beim Betrachten seelenloser Zahlen keine Sehnsucht verspüren. </p><br><p><img src="https://habrastorage.org/webt/as/-y/g3/as-yg31sxa3rjjarnmaxz8h9uuw.png" alt="Beispiele für Segmentbeschreibungen"></p><br><h1 id="testirovanie-rezultatov">  Testergebnisse </h1><br><p>  Das Produkt ist fertig.  Aber bevor Sie anfangen zu verkaufen, muss es getestet werden.  Überprüfen Sie also, ob die RFM-Analyse wie beabsichtigt durchgeführt wird. </p><br><p>  Wir wissen, dass der beste Weg, um zu verstehen, ob wir etwas Wertvolles getan haben, darin besteht, herauszufinden, wie nützlich die Analyse für unsere Kunden ist.  Und wir werden es tun.  Aber das ist eine lange Zeit, und die Ergebnisse werden später vorliegen, und wir möchten wissen, wie erfolgreich wir die Aufgabe jetzt bewältigt haben. </p><br><p>  Daher haben wir als einfachere und schnellere Metrik die Methode der „historischen Kontrollgruppe“ verwendet. </p><br><p>  Zu diesem Zweck haben wir mehrere Datenbanken mithilfe von RFM-Analysen an verschiedenen Stellen in der Vergangenheit segmentiert: eine Datenbank für den Status vor sechs Monaten, die andere vor einem Jahr usw. </p><br><p>  Basierend auf jeder Segmentierung für jede Basis haben wir unsere Prognose der Kundenaktionen vom ausgewählten Zeitpunkt bis zur Gegenwart erstellt.  Dann verglichen sie diese Prognosen mit dem tatsächlichen Verhalten der Kunden. </p><br><p><img src="https://habrastorage.org/webt/sf/g8/x0/sfg8x0petj3fj1hoot8ytxzhfkw.png" alt="Historische KG"></p><br><p>  <em>Testbeispiel an einer historischen Kontrollgruppe mit einer Kontrolldauer von sechs Monaten</em> </p><br><p>  Im Bild: </p><br><ul><li>  Die Spalten R, F und M geben üblicherweise die Grenzen der Segmente entlang jeder Achse an.  Dies ist das Ergebnis der Basissegmentierung in der Form, wie sie vor einem halben Jahr war. </li><li>  Die Spalte "Größe" zeigt die Größe des Segments vor sechs Monaten im Verhältnis zur Gesamtgröße der Datenbank. </li><li>  Die Spalten „Kaufwahrscheinlichkeit“ und „Betrag“ sind Daten zum tatsächlichen Verbraucherverhalten in den nächsten sechs Monaten. <br><ul><li>  Die Kaufwahrscheinlichkeit ist definiert als das Verhältnis der Anzahl der Verbraucher aus dem Segment, die einen Kauf getätigt haben, zur Gesamtzahl der Verbraucher im Segment. </li><li>  Betrag - Der Gesamtbetrag, den Verbraucher aus dem Segment ausgeben, bezogen auf den Betrag, den Verbraucher aus allen Segmenten ausgeben. </li></ul></li></ul><br><p>  Die Ergebnisse sind konsistent.  Beispielsweise haben Kunden aus Segmenten, für die wir eine hohe Häufigkeit von Einkäufen prognostiziert haben, tatsächlich häufiger gekauft. </p><br><p>  Obwohl wir den korrekten Betrieb des Algorithmus aufgrund solcher Tests nicht zu 100 Prozent garantieren können, haben wir entschieden, dass er erfolgreich war. </p><br><h1 id="chto-my-ponyali">  Was verstehen wir? </h1><br><p>  Maschinelles Lernen kann einem Unternehmen wirklich helfen, unlösbare oder sehr schlecht gelöste Probleme zu lösen. </p><br><p>  Die eigentliche Herausforderung ist jedoch nicht der Kaggle-Wettbewerb.  Hier müssen Sie nicht nur eine bessere Qualität in einer bestimmten Metrik erzielen, sondern auch darüber nachdenken, wie gut der Algorithmus funktioniert, ob er für Menschen geeignet ist und ob das Problem im Allgemeinen mit ML gelöst werden muss oder ob Sie sich einen einfacheren Weg vorstellen können. </p><br><p>  Und schließlich erschwert das Fehlen einer formalen Qualitätsmetrik die Aufgabe mehrmals, da es schwierig ist, das Ergebnis richtig zu bewerten. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423463/">https://habr.com/ru/post/de423463/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423453/index.html">ZFS- und Festplattenzugriffsgeschwindigkeit in Hypervisoren</a></li>
<li><a href="../de423455/index.html">Richtige Tablette</a></li>
<li><a href="../de423457/index.html">Timlid Arbeit im Jahr 2018</a></li>
<li><a href="../de423459/index.html">Unterschiede zwischen Phoenix und Rails durch die Augen eines Konvertiten</a></li>
<li><a href="../de423461/index.html">Suborbitaler Herbst</a></li>
<li><a href="../de423465/index.html">Was Sie über ITSM lesen sollten: Bücher, Blogs und aktuelle Artikel</a></li>
<li><a href="../de423467/index.html">Russische Entwickler werden einen Katalog zur Produktkompatibilität veröffentlichen</a></li>
<li><a href="../de423469/index.html">Schnellste Gleitkommazahlen im Wilden Westen</a></li>
<li><a href="../de423475/index.html">Den Alterungscode hacken: eine neue Wissenschaft über das Altern und was es bedeutet, jung zu bleiben</a></li>
<li><a href="../de423477/index.html">Sei ein Sicherheits-Ninja: Begib dich auf den Weg zu den Höhen von IB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>