<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🎤 🥜 👨🏼‍🔧 VR sans fil et capture de mouvement sur le matériel HTC Vive ⏳ 😢 🤽🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Préface 
 J'avais l'habitude d'écrire sur mon projet d' impulsion - une combinaison de capture de mouvement basée sur des capteurs inertiels. Tout d'a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VR sans fil et capture de mouvement sur le matériel HTC Vive</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/406843/"><iframe width="560" height="315" src="https://www.youtube.com/embed/5hQimVTOCVg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Préface </h4><br>  J'avais l'habitude d'écrire sur mon projet d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">impulsion</a> - une combinaison de capture de mouvement basée sur des capteurs inertiels.  Tout d'abord, je tiens à remercier tous ceux qui ont laissé leurs commentaires, d'une manière ou d'une autre, ont aidé le projet.  Je dois dire que le projet n'a pas reçu beaucoup de développement, le problème de dérive n'a pas été résolu par des capteurs à 9 axes, mais les compensations à l'aide d'une boussole numérique ont beaucoup aidé, et l'utilisation d'un suivi optique simple (par exemple, 2 marqueurs LED sur la tête) vous permet d'obtenir la valeur moyenne de dérive.  Mais aujourd'hui, ce n'est pas ça.  Je veux parler d'un moyen relativement peu coûteux de capturer le mouvement pour les systèmes de réalité virtuelle basés sur HTC Vive sans ferme collective et sans fer à souder, ainsi que de la façon de se débarrasser du fil qui relie inévitablement la tête et l'ordinateur, ce qui crée beaucoup d'inconvénients.  Je vais également vous expliquer comment nous avons réussi à obtenir une zone de suivi d'environ 80 mètres carrés. <br><a name="habracut"></a><br><h3>  Commençons </h3><br>  Le système fonctionnera sur l'équipement HTC Vive, c'est un casque à temps plein, 2 contrôleurs et 2 stations de base, je recommande l'achat de <b>HTC Vive 2</b> , il a bien fonctionné, probablement en raison des stations de base mises à jour.  Maintenant, le prix a été réduit à 50 000 roubles. <br><br>  En plus de l'ensemble standard, je recommande l'add-on <b>VIVE Deluxe Audio</b> , ce n'est pas seulement un casque (qui est déjà pratique), c'est une solution extrêmement pratique pour une utilisation plus confortable du casque, en particulier cet ajout est pertinent lorsque le casque est utilisé par plusieurs joueurs ou visiteurs de l'attraction.  En outre, ce support vous permet de monter en toute sécurité le système sans fil, et il a l'air cool: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/656/15a/f81/65615af817cb46b88ed294f91380cea1.jpg" alt="image"></div><br>  <i><b>VIVE Deluxe Audio</b> .</i>  <i>Le prix d'émission est de 10 mille roubles.</i> <br><br><h3>  À bas le fil </h3><br>  Tout d'abord, vous devez briser cette «laisse» et ressentir une réelle liberté dans l'espace VR sans ordinateur portable lourd et chauffé derrière.  Pour ce faire, vous avez besoin du <b>module</b> complémentaire <b>TPCast</b> - un appareil qui vous permet de mettre Vive en mode sans fil. <br><div style="text-align:center;"><img src="https://habrastorage.org/web/32f/afb/f62/32fafbf622c34f77b0dc5e3e1dd2bcad.jpg" alt="image"></div><br>  <i><b>TPCast</b></i>  <i>Les options</i> <br><br>  L'ensemble du système se compose de plusieurs modules, plus sur chacun: <br><br><div class="spoiler">  <b class="spoiler_title">Récepteur</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/c8d/66d/7c3/c8d66d7c3d594dc6b7b5d76303362c81.jpg" alt="image"></div></div><br>  Se monte parfaitement sur VIVE Deluxe Audio.  Il est connecté au casque avec des fils courts USB et HDMI, les 2 autres fils (USB et alimentation) sont connectés à l'adaptateur à la batterie. <br><br><div class="spoiler">  <b class="spoiler_title">Boîtier d'alimentation</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/c9e/d86/875/c9ed86875fdc49058a03e40c0ab3f34e.jpg" alt="image"></div></div><br>  Ensuite, vous devez mettre de côté la boîte de liaison Vive standard et connecter le module (émetteur) suivant directement à l'ordinateur via HDMI: <br><br><div class="spoiler">  <b class="spoiler_title">Émetteur</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/18b/4fa/e89/18b4fae894af485f8a4191d282e99bd3.jpg" alt="image"></div></div>  Vous pouvez utiliser le câble standard ou HDMI 10 mètres.  L'alimentation d'une boîte de liaison standard doit être connectée à l'émetteur TPCast.  Je dois dire que vous pouvez utiliser une combinaison avec une linkbox, simplement en connectant un émetteur au lieu d'un casque (sans connecter l'un des trois fils - USB).  L'émetteur doit être placé à un endroit de la pièce où le casque sera toujours visible, comme  l'émetteur fonctionne à des fréquences élevées, alors toute obstruction sera un obstacle à la transmission d'un signal, la même tête si une personne se détourne.  En d'autres termes, offrez une visibilité directe.  La meilleure option est de placer l'émetteur exactement au centre de la pièce au plafond, en l'envoyant perpendiculairement au sol. <br><br>  Ce n'est pas tout, le kit dispose également d'un routeur qui doit être connecté à la connexion Internet du PC.  Autrement dit, le câble Ethernet est dans le port WAN du routeur, et le PC est connecté au routeur via LAN.  Si cette connexion est inacceptable, utilisez une carte réseau supplémentaire.  Maintenant, presque tout est prêt, il ne reste plus qu'à télécharger le logiciel et les pilotes depuis le site officiel de TPCast: <br><br><div class="spoiler">  <b class="spoiler_title">Assistant de connexion sans fil pour VIVE</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/b42/901/548/b4290154811f49b99554fc6d0654c6a9.png" alt="image"></div></div><br>  Après l'installation, l'application vous demandera d'entrer des données pour vous connecter au point d'accès, le nom d'utilisateur et le mot de passe sont indiqués sur l'autocollant sur l'adaptateur pour la batterie.  Il ne reste plus qu'à cliquer sur Démarrer et démarrer SteamVR après une connexion réussie.  Si quelque chose s'est mal passé, alors dans le menu supérieur droit il y a un élément Changer de canal.  En général, la perte de connexion est facile à restaurer avec le toucher d'un bouton, vous pouvez également changer la batterie à la volée. <br><br><div class="spoiler">  <b class="spoiler_title">Schéma de câblage</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/cce/401/26c/cce40126c1e54c8cbff55583d7e6e119.png" alt="image"></div></div><br><img src="https://habrastorage.org/web/1ca/145/27b/1ca14527be4f45abaaa10904ded5d8b5.jpg" alt="image"><br>  <i>Assemblée <b>TPCast</b> .</i>  <i>Le prix d'émission est de 35 à 40 000 roubles, mais voici les caractéristiques:</i> <br><br><ul><li>  Résolution 2K (normale pour HTC Vive) </li><li>  90 FPS </li><li>  Retard inférieur à 2 ms </li></ul><br>  Bien sûr, pour un usage domestique, cela n'est pas pratique, vous pouvez tolérer le fil, mais pour une solution commerciale - une excellente option, surtout si vous élargissez le domaine du suivi. <br><br>  Maintenant, vous pouvez essayer de marcher sur Steam Home et ne pas vous souvenir du fil, des plis, des nœuds et plus, sauf que la batterie est chargée, mais il est préférable d'en acheter d'autres.  Ils suffisent pour 4 à 5 heures d'utilisation active. <br><br><h3>  Nous allons au-delà des limites de ce qui est permis </h3><br>  Sans fil, vous vous sentirez rapidement à l'étroit, vous aurez envie de faire une petite promenade, mais dans les 16 mètres carrés standard, cela ne fonctionnera pas.  La première chose dont vous avez besoin est une pièce (100 mètres carrés conviennent) et avec des plafonds plus élevés (3,5 mètres).  C'est la partie la plus difficile.  Au centre du plafond de la pièce se trouve l'émetteur TPCast.  Sur les côtés, les stations de base HTC Vive sont montées sous le plafond.  la distance entre - 5 mètres, de sorte que les stations sont situées sur une ligne (perpendiculaire à deux murs et parallèle aux deux autres), passant par le centre de la pièce (au centre de l'émetteur).  De plus, les stations doivent être inclinées à un angle de 30 degrés les unes par rapport aux autres (c'est-à-dire qu'elles sont davantage dirigées vers le sol). <br><br>  Les stations doivent être connectées avec un fil pour la synchronisation (l'optique ne fonctionnera pas de manière stable), les canaux des stations doivent être réglés sur A et b.  Après l'installation, calibrez la pièce à l'aide d'outils standard.  Il convient de noter qu'au stade de la construction d'un chaperon (une grille bleue, indiquant les limites d'une vraie pièce), il convient de choisir le mode avancé, qui vous permettra de spécifier uniquement les coins de la pièce, la grille sera un carré pair.  La zone de jeu est mieux placée au centre.  Cette configuration fournira une large zone de suivi suffisamment précise avec un nombre minimum d'angles morts et permettra une utilisation efficace des stations régulières.  Avant de plonger, je recommande d'installer <b>les paramètres OpenVR Advanced</b> , leur interface sera disponible directement dans l'espace VR du menu standard.  Ces paramètres amélioreront la résolution, le suréchantillonnage et configureront le chaperon (zone d'activation, couleur, hauteur, visibilité, etc.) Bien sûr, vous pouvez toujours jouer avec le placement des stations de base, changer l'angle ou une petite distance entre elles pour une certaine pièce.  Le résultat est impressionnant, selon la norme Steam Home, il est possible de naviguer sans rappeler la téléportation.  Dans la plupart des jeux, cette zone est plus que suffisante.  En novembre, Vive menace d'ajouter un support pour travailler avec un grand nombre de stations de base, mais il n'est pas encore clair si l'équipement actuel pourra en accepter plus de deux, ou seuls de nouveaux casques et contrôleurs pourront le faire. <br><br><h3>  Arrête d'être un fantôme </h3><br>  En général, tous les jeux VR peuvent être définis comme un seul sous-genre - «simulateur de fantôme», vous pouvez ramasser des objets, les jeter et ainsi de suite.  Il y a des exceptions où vous pouvez voir votre corps immobile, ce qui est très dissonant.  D'une manière ou d'une autre, pour dessiner un protagoniste virtuel un corps en mouvement fiable, vous avez besoin de quelque chose de la zone de capture de mouvement.  Capturer le mouvement n'est pas le plaisir le moins cher si vous jetez le kinekt à courte vue et similaires, ce qui est inefficace dans un tel domaine de suivi.  Deux choses viennent à la rescousse - <b>HTC Vive Tracker</b> et la cinématique inverse (IR).  Le premier est nécessaire pour déterminer la position de quoi que ce soit dans la zone de suivi, le second est de recréer la position du corps dans l'espace virtuel, en connaissant la position de seulement 6 points (c'est le minimum pour tout le corps). <br><br><img src="https://habrastorage.org/web/f5c/4c1/0c5/f5c4c10c5a484acc91d3d3d7015a8f96.png" alt="image"><br>  <i><b>Vive Tracker</b> .</i>  <i>Un tracker coûte environ 8 mille roubles</i> <br><br>  Pour un ensemble minimum, vous aurez besoin de 3 de ces trackers.  En général, ce sont les mêmes contrôleurs standard, seulement coupés et dans un cas légèrement différent.  Chacun de ces trackers est défini dans SteamVR, la seule différence est qu'ils ont besoin de dongles spéciaux (inclus) pour les connecter, bien que vous puissiez les attacher à un casque au lieu de contrôleurs.  À l'arrière, il y a une zone de contact pour connecter des boutons personnalisés (vous pouvez également utiliser le connecteur USB sur le tracker).  Cela peut être une gâchette de pistolet, un bouton d'activation du sabre laser, n'importe quoi.  Les pressions sur ces boutons sont traitées de la même manière que les pressions sur les boutons du contrôleur, du point de vue du développement logiciel, il n'y a pas de différence.  En général, ils peuvent être utilisés pour suivre des objets de jeu, tels que des armes ou des outils, même des meubles et des portes, mais nous nous intéressons à la capture de mouvement. <br><br><img src="https://habrastorage.org/web/d0c/e11/d7f/d0ce11d7f6654937b182c12110062bd7.png" alt="image"><br><br>  Il est possible de déterminer la position de la tête à l'aide d'un casque, des mains - à l'aide de contrôleurs.  2 trackers doivent être placés sur la chaussure (au-dessus des pieds), le dernier se sentira bien sur la ceinture à l'arrière.  Une telle configuration vous permettra déjà de jouer à certains jeux qui prennent en charge cette configuration, mais si nous parlons de développer votre propre logiciel, vous aurez besoin de solutions IR pour animer le personnage.  La différence fondamentale entre la cinématique inverse et une ligne droite est que dans le cas d'une ligne droite, la position est calculée, connaissant les angles, et dans le cas de l'inverse, les angles sont calculés, connaissant la position.  Ainsi, vous pouvez créer vous-même un modèle très simple, connaissant la position de deux points pour calculer l'intermédiaire, compte tenu de la façon dont le corps humain se plie habituellement.  Mais il existe des solutions prêtes à l'emploi telles que <b>Final IK</b> , <b>VRIK</b> et d'autres outils d'animation procédurale.  Il existe des studios qui proposent des solutions de ce type.  L'un d'eux est <b>IKinema</b> et son produit appelé <b>Project Orion</b> - un logiciel qui vous permet de capturer le mouvement basé sur les données reçues de SteamVR et de le diffuser via le protocole <b>VRPN</b> vers toute autre application (il existe des plugins et des actifs prêts à l'emploi pour Unity et Unreal).  Pour une solution économique, il vaut mieux utiliser les outils précédents qui se montrent assez bien. <br><br><img src="https://habrastorage.org/web/620/596/86b/62059686b70e4be2b1db0489e3f624cf.jpg" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">IKinema Orion (vidéo)</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/Khoer5DpQkE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><br>  De plus, déjà dans le moteur, l'animation résultante peut être nettoyée un peu, bien qu'Orion y fasse face, supprime les arrêts de glissement, calcule la compensation de la rugosité du sol virtuel.  IKinema a une solution de plugin pour Unreal: <br><br><div class="spoiler">  <b class="spoiler_title">Action en direct</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/oWqKCdFpyfI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><br>  Dans l'ensemble, les plug-ins sont plus faciles à faire face à des tâches similaires, encore plus faciles. <br>  Ces gants, par exemple: <br><br><img src="https://habrastorage.org/web/fa3/9c3/8ac/fa39c38ac2a04714b982323a9d7c4958.jpg" alt="image"><br>  <i><b>Manus vr</b></i> <br><br><h3>  Conclusion </h3><br>  Aujourd'hui, la capture de mouvement devient plus accessible, tout comme la réalité virtuelle, ce qui est certainement agréable.  Un certain nombre de jeux sont à venir, dans lesquels il y aura un support pour les trackers et les animations du protagoniste en fonction des mouvements du joueur.  Bien sûr, tout cela n'est toujours pas aussi pratique et accessible que nous le souhaiterions, mais maintenant il est possible d'assembler un tel système à un coût relativement faible.  Il n'est pas nécessaire de dire que le joueur de masse pourrait se permettre d'équiper ainsi son espace de jeu, mais sous la forme d'une attraction, ce sera un tout nouveau niveau. <br><br>  Quelques observations: <br><br>  Pour abandonner le fil, il y avait plus de fils en général. <br>  Après avoir acquis un corps virtuel, il semble que le degré de réalisme augmente, mais voir votre ombre en mouvement dans l'espace virtuel est une autre tâche pour le cerveau, les étourdissements commencent, il est donc préférable de l'éteindre (c'est individuel) <br><br>  Le suivi du corps et des objets ouvre un grand nombre de possibilités pour créer des mécanismes de jeu et l'effet de l'immersion en général. <br><br>  Le résultat de l'assemblage d'un tel système sur vidéo au début du post.  Également un exemple d'animation de personnage en temps réel: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/AQuCKXnuqKM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr406843/">https://habr.com/ru/post/fr406843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr406833/index.html">«Malgré l'âge»: comment protéger votre audition</a></li>
<li><a href="../fr406835/index.html">Il peut y avoir deux types de médicaments: les scientifiques critiquent l'homéopathie et mettent en garde contre les risques importants pour la santé</a></li>
<li><a href="../fr406837/index.html">Bataille: des drones tueurs contre le DJI "immortel" Phantom 4</a></li>
<li><a href="../fr406839/index.html">Mise en route Étudier STM32 ou gérer la lumière intelligemment</a></li>
<li><a href="../fr406841/index.html">Modélisation - aux masses</a></li>
<li><a href="../fr406845/index.html">Équation de Poisson et distribution de Boltzmann (partie 2.1)</a></li>
<li><a href="../fr406847/index.html">L'agrégateur de crypto-monnaie XRONOS lance la prévente de pièces</a></li>
<li><a href="../fr406851/index.html">Mini-système Denon D-M41: retour au concept de centre musical, Hi-Fi pour la classe moyenne</a></li>
<li><a href="../fr406853/index.html">L'ESA invite les entreprises commerciales à participer à l'exploration de la lune</a></li>
<li><a href="../fr406855/index.html">Des «opportunités» invisibles dans l'étude de Mars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>