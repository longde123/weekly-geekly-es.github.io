<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¥üèº üëßüèº ‚ò™Ô∏è Stasiun cuaca seluler di Arduino ‚èèÔ∏è üö¨ üóº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mungkin setiap orang yang mulai berkenalan dengan Arduino, mengedipkan LED dan menghubungkan sebuah tombol, mulai membuat stasiun cuaca sendiri. Saya ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Stasiun cuaca seluler di Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/392831/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mungkin setiap orang yang mulai berkenalan dengan Arduino, mengedipkan LED dan menghubungkan sebuah tombol, mulai membuat stasiun cuaca sendiri. Saya tidak terkecuali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah meninjau berbagai proyek di Internet, persyaratan tertentu dibuat. Perangkat harus menampilkan waktu, suhu, tekanan dan jadwal perubahannya. Saya juga sangat ingin menghitung fase bulan dan waktu matahari terbit-terbenam. Dan persyaratan yang paling penting adalah mobilitas. Stasiun cuaca portabel yang dibuat seharusnya digunakan untuk membantu menangkap ikan, jadi stasiun itu harus berukuran kecil dan memiliki otonomi tertentu.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menciptakan tubuh untuk produk buatan sendiri merupakan tantangan tersendiri. Di tempat sampah, ponsel Motorola T192 ditemukan. </font></font><br>
 <br>
<img src="https://habrastorage.org/files/76f/02d/8bd/76f02d8bd87a4e0aae22c2e4a192d876.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata layar dari Nokia 3310 semakin bagus di dalamnya (tentu saja, menggunakan Nokia 3310 itu sendiri, mungkin akan lebih nyaman). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengelola semuanya dipercayakan kepada Arduino Pro Mini. </font></font><br>
<br>
<img src="https://habrastorage.org/files/e3c/723/d4f/e3c723d4f19a4c43a6bc9034c941f4cb.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mencegah tombol gagal, papan tempat memotong roti dimasukkan. Saat menempel kembali keyboard, terlihat bahwa nada lubang tata letak hampir bersamaan dengan tombol. Di masa depan, ini memungkinkan penggunaan tombol. </font></font><br>
<br>
<img src="https://habrastorage.org/files/013/fd5/ae4/013fd5ae401643a48dbb21a211ee0373.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengukur tekanan, sensor bmp180 digunakan. Modul ds1302 diambil sebagai jam, tetapi untuk menghemat ruang, hanya rangkaian mikro yang diambil darinya. Kuarsa telah dihapus dari motherboard, dan baterai dihapus dari laptop (tentu saja, Anda juga dapat menggunakan cr2032 yang biasa dalam casing termal).</font></font><br>
<br>
<img src="https://habrastorage.org/files/10d/bc5/403/10dbc54035a64b71b6f870c5bfe3a2cd.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena ada output gratis, lampu latar layar tergantung pada salah satu yang gratis dan tombol pada yang kedua. </font></font><br>
<br>
<img src="https://habrastorage.org/files/9a9/bf7/6eb/9a9bf76eb1564b1692d471200e8d8b76.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengisi daya baterai lithium, modul muatan Li-ion pada TP4056 digunakan. </font></font><br>
<br>
<img src="https://habrastorage.org/files/e53/12a/297/e5312a297b954a6ca182e8efe68a5b9c.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bentuk akhir perangkat (kabel yang menempel di kanan adalah untuk firmware, sehingga mereka akan segera dihapus.) </font></font><br>
<br>
<img src="https://habrastorage.org/files/62d/dbf/6d5/62ddbf6d5e4a4248a012d41071b00dfd.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat menulis program, cara biasa digunakan. Satu-satunya hal yang ingin saya perhatikan adalah perpustakaan TimeLord.h (https://github.com/probonopd/TimeLord). Dengan menggunakan fungsinya, menunjukkan tanggal, koordinat dan zona waktu, Anda dapat menentukan waktu matahari terbit dan terbenam matahari, fase bulan. Deskripsi dapat diunduh di sini: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TimeLord.pdf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengenai daya tahan baterai, tes singkat menunjukkan bahwa perangkat akan bekerja selama seminggu tepatnya. </font><font style="vertical-align: inherit;">Hasil ini cukup memuaskan, jadi percobaan lebih lanjut tentang konservasi energi telah ditunda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sketsa saat ini menggunakan 81% dari memori perangkat, sehingga Anda dapat menambahkan sesuatu yang lain. </font></font><br>
<br>
<img src="https://habrastorage.org/files/f60/9ed/809/f609ed8093614b8f9877c903b6378257.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antena (indikator kekuatan sinyal) ditampilkan di layar. </font><font style="vertical-align: inherit;">Ini meninggalkan cadangan untuk menguji modul radio 433 MHz, untuk mendapatkan suhu dan kelembaban yang benar dari modul eksternal.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sumber</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;BMP085.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Adafruit_GFX.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Adafruit_PCD8544.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;DS1302.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;TimeLord.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Wire.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//84x48</span></span>
Adafruit_PCD8544 display = Adafruit_PCD8544(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// Create a DS1302 object.</span></span>
<span class="hljs-function"><span class="hljs-function">DS1302 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rtc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">12</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">11</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;<span class="hljs-comment"><span class="hljs-comment">// Chip Enable, Input/Output, Serial Clock</span></span><font></font>
Time t = rtc.time();<font></font>
<span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dayAsString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Time::Day day)</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (day) {
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Time::kSunday: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Sunday"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Time::kMonday: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Monday"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Time::kTuesday: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Tuesday"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Time::kWednesday: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Wednesday"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Time::kThursday: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Thursday"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Time::kFriday: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Friday"</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Time::kSaturday: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Saturday"</span></span>;<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"(unknown day)"</span></span>;<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//-------------</span></span><font></font>
TimeLord tardis;<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> LATITUDE = <span class="hljs-number"><span class="hljs-number">52.70</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> LONGITUDE = <span class="hljs-number"><span class="hljs-number">25.40</span></span>;
<span class="hljs-comment"><span class="hljs-comment">//byte today[] = {0,0,12,22,03,16};</span></span>
byte today[<span class="hljs-number"><span class="hljs-number">6</span></span>];
<span class="hljs-comment"><span class="hljs-comment">//-------------</span></span>
<span class="hljs-comment"><span class="hljs-comment">//long previousMillis = 0, previousMillis2 = 0;      //    </span></span>
<span class="hljs-comment"><span class="hljs-comment">//long interval = 1800000;           //   </span></span>
<span class="hljs-comment"><span class="hljs-comment">//long interval = 3600000;           //   </span></span>
<span class="hljs-comment"><span class="hljs-comment">//long interval2 = 1000;           //   </span></span>
byte prevSecond = <span class="hljs-number"><span class="hljs-number">99</span></span>, prevHour = <span class="hljs-number"><span class="hljs-number">99</span></span>;
<span class="hljs-comment"><span class="hljs-comment">//-------------</span></span><font></font>
BMP085 dps = BMP085();<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Temperature = <span class="hljs-number"><span class="hljs-number">0</span></span>, Pressure = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t_f = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//-------------buttons--------------------</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> buttonPushCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> buttonState = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastButtonState = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//-------------moon----------------------</span></span>
<span class="hljs-comment"><span class="hljs-comment">//0.0 New Moon 0.99 - Almost new</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon0[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001000, B00010000,<font></font>
  B00010000, B00001000,<font></font>
  B00100000, B00000100,<font></font>
  B01000000, B00000010,<font></font>
  B10000000, B00000001,<font></font>
  B10000000, B00000001,<font></font>
  B10000000, B00000001,<font></font>
  B10000000, B00000001,<font></font>
  B10000000, B00000001,<font></font>
  B01000000, B00000010,<font></font>
  B00100000, B00000100,<font></font>
  B00010000, B00001000,<font></font>
  B00001000, B00010000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//Waxing Crescent</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon1[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001000, B01110000,<font></font>
  B00010000, B00111000,<font></font>
  B00100000, B00011100,<font></font>
  B01000000, B00001110,<font></font>
  B10000000, B00001111,<font></font>
  B10000000, B00001111,<font></font>
  B10000000, B00001111,<font></font>
  B10000000, B00001111,<font></font>
  B10000000, B00001111,<font></font>
  B01000000, B00001110,<font></font>
  B00100000, B00011100,<font></font>
  B00010000, B00111000,<font></font>
  B00001000, B01110000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//0.25 First Quarter</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon2[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001000, B11110000,<font></font>
  B00010000, B11111000,<font></font>
  B00100000, B11111100,<font></font>
  B01000000, B11111110,<font></font>
  B10000000, B11111111,<font></font>
  B10000000, B11111111,<font></font>
  B10000000, B11111111,<font></font>
  B10000000, B11111111,<font></font>
  B10000000, B11111111,<font></font>
  B01000000, B11111110,<font></font>
  B00100000, B11111100,<font></font>
  B00010000, B11111000,<font></font>
  B00001000, B11110000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//Waxing Gibbous</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon3[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001011, B11110000,<font></font>
  B00010111, B11111000,<font></font>
  B00101111, B11111100,<font></font>
  B01001111, B11111110,<font></font>
  B10001111, B11111111,<font></font>
  B10001111, B11111111,<font></font>
  B10001111, B11111111,<font></font>
  B10001111, B11111111,<font></font>
  B10001111, B11111111,<font></font>
  B01001111, B11111110,<font></font>
  B00101111, B11111100,<font></font>
  B00010111, B11111000,<font></font>
  B00001011, B11110000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//0.5 Full Moon</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon4[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001111, B11110000,<font></font>
  B00011111, B11111000,<font></font>
  B00111111, B11111100,<font></font>
  B01111111, B11111110,<font></font>
  B11111111, B11111111,<font></font>
  B11111111, B11111111,<font></font>
  B11111111, B11111111,<font></font>
  B11111111, B11111111,<font></font>
  B11111111, B11111111,<font></font>
  B01111111, B11111110,<font></font>
  B00111111, B11111100,<font></font>
  B00011111, B11111000,<font></font>
  B00001111, B11110000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//Waning Gibbous</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon5[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001111, B11010000,<font></font>
  B00011111, B11101000,<font></font>
  B00111111, B11110100,<font></font>
  B01111111, B11110010,<font></font>
  B11111111, B11110001,<font></font>
  B11111111, B11110001,<font></font>
  B11111111, B11110001,<font></font>
  B11111111, B11110001,<font></font>
  B11111111, B11110001,<font></font>
  B01111111, B11110010,<font></font>
  B00111111, B11110100,<font></font>
  B00011111, B11101000,<font></font>
  B00001111, B11010000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//0.75 Third Quarter  (Last Quarter)</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon6[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001111, B00010000,<font></font>
  B00011111, B00001000,<font></font>
  B00111111, B00000100,<font></font>
  B01111111, B00000010,<font></font>
  B11111111, B00000001,<font></font>
  B11111111, B00000001,<font></font>
  B11111111, B00000001,<font></font>
  B11111111, B00000001,<font></font>
  B11111111, B00000001,<font></font>
  B01111111, B00000010,<font></font>
  B00111111, B00000100,<font></font>
  B00011111, B00001000,<font></font>
  B00001111, B00010000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//Waning Crescent</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> PROGMEM moon7[] =<font></font>
{ B00000111, B11100000,<font></font>
  B00001110, B00010000,<font></font>
  B00011100, B00001000,<font></font>
  B00111000, B00000100,<font></font>
  B01110000, B00000010,<font></font>
  B11110000, B00000001,<font></font>
  B11110000, B00000001,<font></font>
  B11110000, B00000001,<font></font>
  B11110000, B00000001,<font></font>
  B11110000, B00000001,<font></font>
  B01110000, B00000010,<font></font>
  B00111000, B00000100,<font></font>
  B00011100, B00001000,<font></font>
  B00001110, B00010000,<font></font>
  B00000111, B11100000<font></font>
};<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawMoon</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> moon_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> moon_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> phase)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  display.fillRect(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, WHITE);<font></font>
  display.drawBitmap(moon_x, moon_y, moon4,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, WHITE);
  <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (phase) {
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon0,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon1,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon2,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon3,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon4,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon5,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon6,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon7,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, BLACK);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>:<font></font>
      display.drawBitmap(moon_x, moon_y, moon4,  <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, WHITE);<font></font>
  }<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//===========================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawMoonDate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> moon_x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> moon_y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * datetoday)</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> phase;<font></font>
  phase = tardis.MoonPhase(datetoday);<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt;= <span class="hljs-number"><span class="hljs-number">0.0</span></span>   &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.0625</span></span>)  {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0.000  New moon</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.0625</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.1875</span></span>)  {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0,125</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.1875</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.3125</span></span> ) {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">2</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0.250  First Quarter</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.3125</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.4375</span></span>)  {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">3</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0,375</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.4375</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.5625</span></span>)  {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">4</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0.500  Full</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.5625</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.6875</span></span>)  {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">5</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0,625</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.6875</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.8125</span></span>)  {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">6</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0.750  Last Quarter</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.8125</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">0.9375</span></span>)  {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">7</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0.875</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (phase &gt; <span class="hljs-number"><span class="hljs-number">0.9375</span></span> &amp;&amp; phase &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>)       {<font></font>
    drawMoon(moon_x, moon_y, <span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  }; <span class="hljs-comment"><span class="hljs-comment">//0.990  Almost new</span></span><font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawSignal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> streng)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  display.fillRect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, WHITE);<font></font>
  display.drawTriangle(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, BLACK);<font></font>
  display.drawLine(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, BLACK);<font></font>
<font></font>
  display.drawLine(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, BLACK);<font></font>
  display.drawLine(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, BLACK);<font></font>
  display.drawLine(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, BLACK);<font></font>
  display.drawLine(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, BLACK);<font></font>
<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBatteryState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v_bat)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  display.fillRect(<span class="hljs-number"><span class="hljs-number">68</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, WHITE);<font></font>
  display.drawRect(<span class="hljs-number"><span class="hljs-number">83</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, BLACK);<font></font>
  display.drawRoundRect(<span class="hljs-number"><span class="hljs-number">68</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, BLACK);
  <span class="hljs-comment"><span class="hljs-comment">// 3, 44  4, 2 0, 76  0, 152</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//4,200 full  4</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//4,048       3</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//3,896       2</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//3,744       1</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//3,592       0</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//3,440 zero  -</span></span><font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v_bat &gt; <span class="hljs-number"><span class="hljs-number">4500</span></span>)   {<font></font>
    display.fillRect(<span class="hljs-number"><span class="hljs-number">70</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, BLACK);<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v_bat &gt; <span class="hljs-number"><span class="hljs-number">4048</span></span>)   {<font></font>
    display.drawRect(<span class="hljs-number"><span class="hljs-number">79</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, BLACK);<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v_bat &gt; <span class="hljs-number"><span class="hljs-number">3896</span></span>)   {<font></font>
    display.drawRect(<span class="hljs-number"><span class="hljs-number">76</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, BLACK);<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v_bat &gt; <span class="hljs-number"><span class="hljs-number">3744</span></span>)    {<font></font>
    display.drawRect(<span class="hljs-number"><span class="hljs-number">73</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, BLACK);<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (v_bat &gt; <span class="hljs-number"><span class="hljs-number">3592</span></span>)    {<font></font>
    display.drawRect(<span class="hljs-number"><span class="hljs-number">70</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, BLACK);<font></font>
  }<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte x, byte y)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  display.fillRect(<span class="hljs-number"><span class="hljs-number">0</span></span> + x, <span class="hljs-number"><span class="hljs-number">0</span></span> + y, <span class="hljs-number"><span class="hljs-number">48</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, WHITE);
  <span class="hljs-comment"><span class="hljs-comment">//display.fillRect(0+x, 0+y, 30, 7, WHITE);</span></span><font></font>
  Time t = rtc.time();<font></font>
  display.setTextColor(BLACK);<font></font>
  display.setTextSize(<span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  display.setCursor(x, y);<font></font>
  display.print(t.hr);<font></font>
  display.print(<span class="hljs-string"><span class="hljs-string">":"</span></span>);<font></font>
  display.print(t.min);<font></font>
  display.print(<span class="hljs-string"><span class="hljs-string">":"</span></span>);<font></font>
  display.print(t.sec);<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//===========================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateMoonSunDate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{<font></font>
  Time t = rtc.time();<font></font>
  today[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  today[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  today[<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">12</span></span>;<font></font>
  today[<span class="hljs-number"><span class="hljs-number">3</span></span>] = t.date;<font></font>
  today[<span class="hljs-number"><span class="hljs-number">4</span></span>] = t.mon;<font></font>
  today[<span class="hljs-number"><span class="hljs-number">5</span></span>] = t.yr - <span class="hljs-number"><span class="hljs-number">2000</span></span>;<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawSunRiseSet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte x, byte y)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  updateMoonSunDate();<font></font>
  display.setTextSize(<span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  display.setTextColor(BLACK);<font></font>
  display.fillRect(x, y, <span class="hljs-number"><span class="hljs-number">33</span></span>, y + <span class="hljs-number"><span class="hljs-number">8</span></span>, WHITE);<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tardis.SunRise(today)) <span class="hljs-comment"><span class="hljs-comment">// if the sun will rise today (it might not, in the [ant]arctic)</span></span><font></font>
  {<font></font>
    display.setCursor(x, y);<font></font>
    display.print((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) today[tl_hour]);<font></font>
    display.print(<span class="hljs-string"><span class="hljs-string">":"</span></span>);<font></font>
    display.println((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) today[tl_minute]);<font></font>
  }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tardis.SunSet(today)) <span class="hljs-comment"><span class="hljs-comment">// if the sun will set today (it might not, in the [ant]arctic)</span></span><font></font>
  {<font></font>
    display.setCursor(x, y + <span class="hljs-number"><span class="hljs-number">8</span></span>);<font></font>
    display.print((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) today[tl_hour]);<font></font>
    display.print(<span class="hljs-string"><span class="hljs-string">":"</span></span>);<font></font>
    display.println((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) today[tl_minute]);<font></font>
  }<font></font>
<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawPressure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte x, byte y)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  display.setTextSize(<span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  display.setTextColor(BLACK);<font></font>
  display.fillRect(x, y, <span class="hljs-number"><span class="hljs-number">33</span></span>, y + <span class="hljs-number"><span class="hljs-number">8</span></span>, WHITE);<font></font>
  display.setCursor(x, y);<font></font>
  t_f = Temperature;<font></font>
  display.println( t_f / <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  display.setCursor(x, y + <span class="hljs-number"><span class="hljs-number">8</span></span>);
  <span class="hljs-comment"><span class="hljs-comment">//display.println(ceil(Pressure / 133.3), 0);</span></span>
  display.println(Pressure / <span class="hljs-number"><span class="hljs-number">133.3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readVcc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// Read 1.1V reference against AVcc</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// set the reference to Vcc and the measurement to the internal 1.1V reference</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(__AVR_ATmega32U4__) || defined(__AVR_ATmega1280__) || defined(__AVR_ATmega2560__)</span></span><font></font>
  ADMUX = _BV(REFS0) | _BV(MUX4) | _BV(MUX3) | _BV(MUX2) | _BV(MUX1);<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> defined (__AVR_ATtiny24__) || defined(__AVR_ATtiny44__) || defined(__AVR_ATtiny84__)</span></span><font></font>
  ADMUX = _BV(MUX5) | _BV(MUX0);<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> defined (__AVR_ATtiny25__) || defined(__AVR_ATtiny45__) || defined(__AVR_ATtiny85__)</span></span><font></font>
  ADMUX = _BV(MUX3) | _BV(MUX2);<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span></span><font></font>
  ADMUX = _BV(REFS0) | _BV(MUX3) | _BV(MUX2) | _BV(MUX1);<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span><font></font>
<font></font>
  delay(<span class="hljs-number"><span class="hljs-number">75</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Wait for Vref to settle</span></span>
  ADCSRA |= _BV(ADSC); <span class="hljs-comment"><span class="hljs-comment">// Start conversion</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (bit_is_set(ADCSRA, ADSC)); <span class="hljs-comment"><span class="hljs-comment">// measuring</span></span><font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> low  = ADCL; <span class="hljs-comment"><span class="hljs-comment">// must read ADCL first - it then locks ADCH</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> high = ADCH; <span class="hljs-comment"><span class="hljs-comment">// unlocks both</span></span><font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> result = (high &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) | low;<font></font>
<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//scale_constant = internal1.1Ref * 1023 * 1000</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//internal1.1Ref = 1.1 * Vcc1 (_) / Vcc2 (__readVcc())</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//4.967/4600-------1215079.369565217</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// result = 1125300L / result; // Calculate Vcc (in mV); 1125300 = 1.1*1023*100000</span></span>
  result = <span class="hljs-number"><span class="hljs-number">1132060</span></span> / result;<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; <span class="hljs-comment"><span class="hljs-comment">// Vcc in millivolts</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//http://blog.unlimite.net/?p=25</span></span><font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//===========================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawVcc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte x, byte y, word vcc)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  display.setTextSize(<span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  display.setTextColor(BLACK);<font></font>
  display.fillRect(x, y, <span class="hljs-number"><span class="hljs-number">33</span></span>, y + <span class="hljs-number"><span class="hljs-number">8</span></span>, WHITE);<font></font>
  display.setCursor(x, y);<font></font>
  display.println(vcc);<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pressure_drawLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte x, byte h)</span></span></span><span class="hljs-function">
</span></span>{<font></font>
  display.drawLine(x, <span class="hljs-number"><span class="hljs-number">47</span></span> - h, x, <span class="hljs-number"><span class="hljs-number">47</span></span>, BLACK);<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pressure_drawGraph</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{<font></font>
  display.fillRect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span>, <span class="hljs-number"><span class="hljs-number">47</span></span>, WHITE);
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">83</span></span>; i++) {<font></font>
    pressure_drawLine(i, EEPROM.read(i));<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//===========================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{<font></font>
  Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
 <font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">8</span></span>, INPUT_PULLUP);<font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">9</span></span>, INPUT_PULLUP);<font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">2</span></span>, OUTPUT);
  <span class="hljs-comment"><span class="hljs-comment">//-----------------------------------------------------------------------------</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//rtc.writeProtect(false);</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//rtc.halt(false);</span></span><font></font>
  String day = dayAsString(t.day);<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//-----------------------------------------------------------------------------</span></span>
  tardis.TimeZone(<span class="hljs-number"><span class="hljs-number">3</span></span> * <span class="hljs-number"><span class="hljs-number">55</span></span>);<font></font>
  tardis.Position(LATITUDE, LONGITUDE);<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//-----------------------------------------------------------------------------</span></span><font></font>
  Wire.begin();<font></font>
  display.begin();<font></font>
  display.setContrast(<span class="hljs-number"><span class="hljs-number">55</span></span>);<font></font>
  display.clearDisplay();<font></font>
<font></font>
  display.drawLine(<span class="hljs-number"><span class="hljs-number">0</span></span>, display.height() / <span class="hljs-number"><span class="hljs-number">2</span></span>, display.width(), display.height() / <span class="hljs-number"><span class="hljs-number">2</span></span>, BLACK);<font></font>
  dps.init();<font></font>
<font></font>
  updateMoonSunDate();<font></font>
  drawMoonDate(<span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, today);<font></font>
  pressure_drawGraph();<font></font>
  display.display();<font></font>
<font></font>
  prevHour = rtc.time().hr;<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//EEPROM.write(0, 9);</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// for (int i=0; i &lt;= 83; i++){</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// EEPROM.write(i, random(1, 23));</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//   pressure_drawLine(i,EEPROM.read(i));</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//     Serial.println(EEPROM.read(i));</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// }</span></span><font></font>
<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> currentMillis = millis();
  <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> currentMillis2 = millis();<font></font>
  byte temp;<font></font>
<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//timer---------------------- 1 hour</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//  if (currentMillis - previousMillis &gt; interval) {</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//  previousMillis = currentMillis;</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rtc.time().hr != prevHour) {<font></font>
    prevHour = rtc.time().hr;<font></font>
<font></font>
    dps.getPressure(&amp;Pressure);<font></font>
    dps.getTemperature(&amp;Temperature);<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">82</span></span>; i++) {<font></font>
      temp = EEPROM.read(i + <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
      EEPROM.write(i, temp);<font></font>
    }<font></font>
    EEPROM.write(<span class="hljs-number"><span class="hljs-number">83</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">ceil</span></span>(Pressure / <span class="hljs-number"><span class="hljs-number">133.3</span></span>) - <span class="hljs-number"><span class="hljs-number">740</span></span>);<font></font>
    pressure_drawGraph();<font></font>
    display.display();<font></font>
<font></font>
<font></font>
  }<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//timer---------------------- 1 sec</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// if (currentMillis2 - previousMillis2 &gt; interval2) {</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//   previousMillis2 = currentMillis2;</span></span><font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rtc.time().sec != prevSecond) {<font></font>
    prevSecond = rtc.time().sec;<font></font>
<font></font>
    dps.getPressure(&amp;Pressure);<font></font>
    dps.getTemperature(&amp;Temperature);<font></font>
    updateMoonSunDate();<font></font>
<font></font>
    drawPressure(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>);<font></font>
    drawTime(<span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
    drawSunRiseSet(<span class="hljs-number"><span class="hljs-number">53</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>);<font></font>
    drawMoonDate(<span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, today);<font></font>
    drawBatteryState(readVcc());<font></font>
    drawSignal(<span class="hljs-number"><span class="hljs-number">5</span></span>);
    <span class="hljs-comment"><span class="hljs-comment">//    drawVcc(0, 16, readVcc());</span></span><font></font>
    display.display();<font></font>
  }<font></font>
  <span class="hljs-comment"><span class="hljs-comment">//timer----------------------</span></span><font></font>
<font></font>
  buttonState = digitalRead(<span class="hljs-number"><span class="hljs-number">8</span></span>);
  <span class="hljs-comment"><span class="hljs-comment">// Serial.println(buttonState);</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonState != lastButtonState) {
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonState == HIGH) {<font></font>
      buttonPushCounter++;<font></font>
    }<font></font>
  }<font></font>
  lastButtonState = buttonState;<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonPushCounter % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
    digitalWrite(<span class="hljs-number"><span class="hljs-number">2</span></span>, HIGH);<font></font>
  } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
    digitalWrite(<span class="hljs-number"><span class="hljs-number">2</span></span>, LOW);<font></font>
  }<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">//=====================================================================================</span></span>
</code></pre><br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id392831/">https://habr.com/ru/post/id392831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi486156/index.html">‡§ú‡•à‡§∏‡§æ ‡§ï‡§ø ‡§Æ‡•à‡§Ç‡§®‡•á ‡§™‡§¢‡§º‡§æ‡§Ø‡§æ, ‡§î‡§∞ ‡§´‡§ø‡§∞ ‡§™‡§æ‡§Ø‡§•‡§® ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§Æ‡•à‡§®‡•Å‡§Ö‡§≤ ‡§≤‡§ø‡§ñ‡§æ</a></li>
<li><a href="../hi486158/index.html">‡§µ‡§ø‡§ú‡§º‡•Å‡§Ö‡§≤‡§æ‡§á‡§ú‡§º‡§ø‡§Ç‡§ó ‡§®‡•ç‡§Ø‡•Ç‡§∞‡§≤ ‡§Æ‡§∂‡•Ä‡§® ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§≤‡•á‡§∂‡§® (seq2seq ‡§Æ‡•â‡§°‡§≤ ‡§µ‡§ø‡§• ‡§Ö‡§ü‡•á‡§Ç‡§∂‡§® ‡§Æ‡•à‡§ï‡•á‡§®‡§ø‡§ú‡§º‡•ç‡§Æ)</a></li>
<li><a href="../hi486164/index.html">‡§ï‡•ã‡§∞‡•ã‡§®‡§æ‡§µ‡§æ‡§Ø‡§∞‡§∏ 2019-nCoV‡•§ ‡§∂‡•ç‡§µ‡§∏‡§® ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§î‡§∞ ‡§ï‡•Ä‡§ü‡§æ‡§£‡•Å‡§∂‡•ã‡§ß‡§® ‡§™‡§∞ ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§™‡•Ç‡§õ‡•á ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§®</a></li>
<li><a href="../hi486174/index.html">‡§Æ‡•á‡§∞‡§æ ‡§ú‡•Ä‡§∞‡•ã ‡§ü‡§∞‡•ç‡§®‡§ì‡§µ‡§∞ ‡§π‡•à</a></li>
<li><a href="../id392829/index.html">PO2RT: rekan kerja di ketinggian</a></li>
<li><a href="../id392833/index.html">Arduino atau AVR Wireless Programming Adapter dengan ESP8266 Loader</a></li>
<li><a href="../id392837/index.html">Mempertahankan posisi dalam servo drive: kontrol bawahan vs mode langkah</a></li>
<li><a href="../id392839/index.html">Modul pengontrol universal untuk Internet of things</a></li>
<li><a href="../id392841/index.html">–ü—Ä–æ–µ–∫—Ç–æ—Ä—ã Epson –∏ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî —Å–æ–≤–µ—Ç—ã –ø–æ –≤—ã–±–æ—Ä—É –ø—Ä–æ–µ–∫—Ç–æ—Ä–∞</a></li>
<li><a href="../id392843/index.html">Berapa jarak yang ditempuh mobil otonom untuk membuktikan keandalannya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>