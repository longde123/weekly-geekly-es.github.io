<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏑 📣 💹 Sollte die Arraylänge in einer lokalen Variablen in C # gespeichert werden? 👩🏻‍🏭 🤞🏽 🔒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich stelle fest, dass die Leute oft so konstruieren: 



var length = array.Length; for (int i = 0; i < length; i++) { //do smth }  
 Sie glauben, das...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sollte die Arraylänge in einer lokalen Variablen in C # gespeichert werden?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454582/">  Ich stelle fest, dass die Leute oft so konstruieren: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> length = array.Length; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length; i++) {    <span class="hljs-comment"><span class="hljs-comment">//do smth }</span></span></code> </pre> <br>  Sie glauben, dass ein Aufruf der Array.Length bei jeder Iteration dazu führt, dass die CLR mehr Zeit benötigt, um den Code auszuführen.  Um dies zu vermeiden, speichern sie den Längenwert in einer lokalen Variablen. <br>  Lassen Sie uns herausfinden (ein für alle Mal!), Ob dies sinnvoll ist oder ob die Verwendung einer temporären Variablen Zeitverschwendung ist. <br><a name="habracut"></a><br>  Lassen Sie uns zunächst diese C # -Methoden untersuchen: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WithoutVariable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; array.Length; i++) {       sum += array[i];   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WithVariable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = array.Length;   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length; i++) {       sum += array[i];   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; }</code> </pre> <br>  So sieht es aus, nachdem es vom JIT-Compiler verarbeitet wurde (für .NET Framework 4.7.2 unter LegacyJIT-x86): <br><div class="scrollable-table"><table><tbody><tr><td>  WithoutVariable () <br>  <font color="#666666">; int sum = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#46aa03">edi</font> <br>  <font color="#666666">; int i = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#666666">; int [] localRefToArray = this.array;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; int arrayLength = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; if (arrayLength == 0) return sum;</font> <br>  <font color="#00007f">test</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#46aa03">ecx</font> <br>  <font color="#00007f">jle</font> Ausgang <br>  <font color="#666666">; int arrayLength2 = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; if (i&gt; = arrayLength2)</font> <br>  <font color="#666666">;;</font>  <font color="#666666">neue IndexOutOfRangeException () auslösen;</font> <br>  <font color="#00007f">Schleife</font> <font color="#339933">:</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">eax</font> <br>  <font color="#00007f">jae</font> 056e2d31 <br>  <font color="#666666">; sum + = localRefToArray [i];</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">edi hinzu</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#46aa03">esi</font> <font color="#339933">*</font> <font color="#ff0000">4</font> <font color="#339933">+</font> <font color="#ff0000">8</font> <font color="#009900">]</font> <br>  <font color="#666666">; i ++;</font> <br>  <font color="#00007f">inc</font> <font color="#46aa03">esi</font> <br>  <font color="#666666">; if (i &lt;arrayLength) gehe zur Schleife</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#00007f">JG-</font> <font color="#00007f">Schleife</font> <br>  <font color="#666666">; Rückgabesumme;</font> <br>  Ausfahrt <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">edi</font> </td><td>  WithVariable () <br>  <font color="#666666">; int sum = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#666666">; int [] localRefToArray = this.array;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; int arrayLength = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; int i = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">eax</font> <br>  <font color="#666666">; if (arrayLength == 0) return sum;</font> <br>  <font color="#00007f">test</font> <font color="#46aa03">edi</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">jle</font> Ausgang <br>  <font color="#666666">; int arrayLength2 = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; if (i&gt; = arrayLength2)</font> <br>  <font color="#666666">;;</font>  <font color="#666666">neue IndexOutOfRangeException () auslösen;</font> <br>  <font color="#00007f">Schleife</font> <font color="#339933">:</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">ecx</font> <br>  <font color="#00007f">jae</font> 05902d31 <br>  <font color="#666666">; sum + = localRefToArray [i];</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">esi hinzu</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#46aa03">eax</font> <font color="#339933">*</font> <font color="#ff0000">4</font> <font color="#339933">+</font> <font color="#ff0000">8</font> <font color="#009900">]</font> <br>  <font color="#666666">; i ++;</font> <br>  <font color="#00007f">inc</font> <font color="#46aa03">eax</font> <br>  <font color="#666666">; if (i &lt;arrayLength) gehe zur Schleife</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">eax</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">jl</font> <font color="#00007f">Schleife</font> <br>  <font color="#666666">; Rückgabesumme;</font> <br>  Ausfahrt <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> </td></tr></tbody></table></div><br><div class="spoiler">  <b class="spoiler_title">Vergleich in Meld:</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gc/4s/mi/gc4smi2gsptfuyqiuwyizrv2q80.png"><br></div></div><br>  Es ist trivial zu bemerken, dass sie genau die gleiche Anzahl von Assembler-Anweisungen haben - 15. Sogar die Logik dieser Anweisungen ist fast dieselbe.  Es gibt einen kleinen Unterschied in der Reihenfolge der Initialisierung von Variablen und der Vergleiche, ob der Zyklus fortgesetzt werden soll.  Wir können feststellen, dass in beiden Fällen die Array-Länge zweimal vor dem Zyklus registriert wird: <br><br><ul><li>  Um nach 0 zu suchen (arrayLength) <br></li><li>  In die temporäre Variable zum Überprüfen der Zyklusbedingung (arrayLength2). <br></li></ul><br>  Es stellt sich heraus, dass beide Methoden in genau denselben Code kompiliert werden, aber die erste wird schneller geschrieben, obwohl es keinen Vorteil hinsichtlich der Ausführungszeit gibt. <br>  Der obige Assembler-Code führte mich zu einigen Gedanken und ich beschloss, ein paar weitere Methoden zu überprüfen: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WithoutVariable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; array.Length; i++) {       sum += array[i] + array.Length;   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WithVariable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = array.Length;   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length; i++) {       sum += array[i] + length;   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; }</code> </pre> <br>  Jetzt werden das aktuelle Element und die Array-Länge addiert, aber im ersten Fall wird die Array-Länge jedes Mal angefordert und im zweiten Fall wird sie einmal in einer lokalen Variablen gespeichert.  Schauen wir uns den Assembler-Code dieser Methoden an: <br><div class="scrollable-table"><table><tbody><tr><td>  WithoutVariable () <br>  <font color="#00007f">int</font> sum = <font color="#ff0000">0</font> <font color="#666666">;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">int</font> i = <font color="#ff0000">0</font> <font color="#666666">;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#00007f">int</font> <font color="#009900">[</font> <font color="#009900">]</font> localRefToArray = this <font color="#339933">.</font>  Array <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#00007f">int</font> arrayLength = localRefToArray <font color="#339933">.</font>  Länge <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ebx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  if <font color="#009900">(</font> arrayLength == <font color="#ff0000">0</font> <font color="#009900">)</font> return sum <font color="#666666">;</font> <br>  <font color="#46aa03">teste ebx</font> <font color="#339933">,</font> <font color="#46aa03">ebx</font> <br>  <font color="#00007f">jle</font> Ausgang <br>  <font color="#00007f">int</font> arrayLength2 = localRefToArray <font color="#339933">.</font>  Länge <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  if <font color="#009900">(</font> i&gt; = arrayLength2 <font color="#009900">)</font> <br>  neue IndexOutOfRangeException <font color="#009900">(</font> <font color="#009900">)</font> auslösen <font color="#666666">;</font> <br>  <font color="#00007f">Schleife</font> <font color="#339933">:</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">esi</font> <font color="#46aa03">ecx</font> <br>  <font color="#00007f">jae</font> 05562d39 <br>  <font color="#00007f">int</font> t = Array <font color="#009900">[</font> i <font color="#009900">]</font> <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#46aa03">esi</font> <font color="#339933">*</font> <font color="#ff0000">4</font> <font color="#339933">+</font> <font color="#ff0000">8</font> <font color="#009900">]</font> <br>  t <font color="#339933">+</font> = Summe <font color="#666666">;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">edi hinzu</font> <br>  t <font color="#339933">+</font> = arrayLength <font color="#666666">;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">ebx hinzu</font> <br>  Summe = t <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#46aa03">eax</font> <br>  i <font color="#339933">++</font> <font color="#666666">;</font> <br>  <font color="#00007f">inc</font> <font color="#46aa03">esi</font> <br>  if <font color="#009900">(</font> i &lt;arrayLength <font color="#009900">)</font> gehe zur <font color="#00007f">Schleife</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">ebx</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#00007f">JG-</font> <font color="#00007f">Schleife</font> <br>  Rückgabesumme <font color="#666666">;</font> <br>  Ausfahrt <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">edi</font> <br></td><td>  WithVariable () <br>  <font color="#00007f">int</font> sum = <font color="#ff0000">0</font> <font color="#666666">;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#00007f">int</font> <font color="#009900">[</font> <font color="#009900">]</font> localRefToArray = this <font color="#339933">.</font>  Array <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#00007f">int</font> arrayLength = localRefToArray <font color="#339933">.</font>  Länge <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ebx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#00007f">int</font> i = <font color="#ff0000">0</font> <font color="#666666">;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#46aa03">ecx</font> <br>  if <font color="#009900">(</font> arrayLength == <font color="#ff0000">0</font> <font color="#009900">)</font> <font color="#009900">(</font> Rückgabesumme <font color="#666666">;)</font> <br>  <font color="#46aa03">teste ebx</font> <font color="#339933">,</font> <font color="#46aa03">ebx</font> <br>  <font color="#00007f">jle</font> Ausgang <br>  <font color="#00007f">int</font> arrayLength2 = localRefToArray <font color="#339933">.</font>  Länge <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  if <font color="#009900">(</font> i&gt; = arrayLength2 <font color="#009900">)</font> <br>  neue IndexOutOfRangeException <font color="#009900">(</font> <font color="#009900">)</font> auslösen <font color="#666666">;</font> <br>  <font color="#00007f">Schleife</font> <font color="#339933">:</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">ecx</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">jae</font> 04b12d39 <br>  <font color="#00007f">int</font> t = Array <font color="#009900">[</font> i <font color="#009900">]</font> <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#46aa03">ecx</font> <font color="#339933">*</font> <font color="#ff0000">4</font> <font color="#339933">+</font> <font color="#ff0000">8</font> <font color="#009900">]</font> <br>  t <font color="#339933">+</font> = Summe <font color="#666666">;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">eax hinzu</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  t <font color="#339933">+</font> = arrayLength <font color="#666666">;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">ebx hinzu</font> <br>  Summe = t <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">eax</font> <br>  i <font color="#339933">++</font> <font color="#666666">;</font> <br>  <font color="#00007f">inc</font> <font color="#46aa03">ecx</font> <br>  if <font color="#009900">(</font> i &lt;arrayLength <font color="#009900">)</font> gehe zur <font color="#00007f">Schleife</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#46aa03">ebx</font> <br>  <font color="#00007f">jl</font> <font color="#00007f">Schleife</font> <br>  Rückgabesumme <font color="#666666">;</font> <br>  Ausfahrt <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br></td></tr></tbody></table></div><br><div class="spoiler">  <b class="spoiler_title">Vergleich in Meld:</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/co/8z/ix/co8zixjrk_p7fexmgmyhs1xfqqa.png"><br></div></div><br>  Auch hier sind die Anzahl der Anweisungen und (fast) die Anweisungen selbst gleich.  Der einzige Unterschied besteht in der Reihenfolge der Initialisierung der Variablen und der Prüfbedingung für die Fortsetzung des Zyklus.  Sie können feststellen, dass bei der Berechnung der Summe nur die erste Länge des Arrays berücksichtigt wird.  Es ist offensichtlich, dass dies: <br><blockquote>  <font color="#00007f">int</font> arrayLength2 = localRefToArray <font color="#339933">.</font>  Länge <font color="#666666">;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  if <font color="#009900">(</font> i&gt; = arrayLength2 <font color="#009900">)</font> löst eine neue IndexOutOfRangeException <font color="#009900">(</font> <font color="#009900">) aus</font> <font color="#666666">;</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">ecx</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">jae</font> 04b12d39 </blockquote><br>  Bei allen vier Methoden wird ein Inline-Array überprüft und für jedes Element des Arrays ausgeführt. <br><br>  Wir können bereits die erste Schlussfolgerung ziehen: Die Verwendung einer zusätzlichen Variablen, um den Zyklus zu beschleunigen, ist Zeitverschwendung, da der Compiler dies sowieso für Sie erledigt.  Der einzige Grund, ein Längenarray in einer Variablen zu speichern, besteht darin, den Code besser lesbar zu machen. <br><br>  <i>ForEach</i> ist eine ganz andere Situation.  Betrachten Sie die folgenden drei Methoden: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ForEachWithoutLength</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> array) {       sum += i;   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ForEachWithLengthWithoutLocalVariable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> array) {       sum += i + array.Length;   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ForEachWithLengthWithLocalVariable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = array.Length;   <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> array) {       sum += i + length;   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; }</code> </pre> <br>  Und hier ist der Code nach JIT: <br><br><div class="spoiler">  <b class="spoiler_title">ForEachWithoutLength ()</b> <div class="spoiler_text">  <font color="#666666">; int sum = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#666666">; int [] localRefToArray = this.array;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; int i = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">edx</font> <font color="#339933">,</font> <font color="#46aa03">edx</font> <br>  <font color="#666666">; int arrayLength = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; if (arrayLength == 0) goto exit;</font> <br>  <font color="#00007f">test</font> <font color="#46aa03">edi</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">jle</font> Ausgang <br>  <font color="#666666">; int t = Array [i];</font> <br>  <font color="#00007f">Schleife</font> <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#46aa03">edx</font> <font color="#339933">*</font> <font color="#ff0000">4</font> <font color="#339933">+</font> <font color="#ff0000">8</font> <font color="#009900">]</font> <br>  <font color="#666666">; Summe + = i;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">eax hinzu</font> <br>  <font color="#666666">; i ++;</font> <br>  <font color="#00007f">inc</font> <font color="#46aa03">edx</font> <br>  <font color="#666666">; if (i &lt;arrayLength) gehe zur Schleife</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">edi</font> <font color="#46aa03">edx</font> <br>  <font color="#00007f">JG-</font> <font color="#00007f">Schleife</font> <br>  <font color="#666666">; Rückgabesumme;</font> <br>  Ausfahrt <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> </div></div><br><div class="spoiler">  <b class="spoiler_title">ForEachWithLengthWithoutLocalVariable ()</b> <div class="spoiler_text">  <font color="#666666">; int sum = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#666666">; int [] localRefToArray = this.array;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; int i = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">edx</font> <font color="#339933">,</font> <font color="#46aa03">edx</font> <br>  <font color="#666666">; int arrayLength = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; if (arrayLength == 0) gehe zum Beenden</font> <br>  <font color="#00007f">test</font> <font color="#46aa03">edi</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">jle</font> Ausgang <br>  <font color="#666666">; int t = Array [i];</font> <br>  <font color="#00007f">Schleife</font> <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#46aa03">edx</font> <font color="#339933">*</font> <font color="#ff0000">4</font> <font color="#339933">+</font> <font color="#ff0000">8</font> <font color="#009900">]</font> <br>  <font color="#666666">; Summe + = i;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">eax hinzu</font> <br>  <font color="#666666">; sum + = localRefToArray.Length;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">esi hinzu</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; i ++;</font> <br>  <font color="#00007f">inc</font> <font color="#46aa03">edx</font> <br>  <font color="#666666">; if (i &lt;arrayLength) gehe zur Schleife</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">edi</font> <font color="#46aa03">edx</font> <br>  <font color="#00007f">JG-</font> <font color="#00007f">Schleife</font> <br>  <font color="#666666">; Rückgabesumme;</font> <br>  Ausfahrt <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> </div></div><br><div class="spoiler">  <b class="spoiler_title">ForEachWithLengthWithLocalVariable ()</b> <div class="spoiler_text">  <font color="#666666">; int sum = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> <br>  <font color="#666666">; int [] localRefToArray = this.array;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">ecx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; int length = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">ebx</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; int i = 0;</font> <br>  <font color="#00007f">xor</font> <font color="#46aa03">ecx</font> <font color="#339933">,</font> <font color="#46aa03">ecx</font> <br>  <font color="#666666">; int arrayLength = localRefToArray.Length;</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">edi</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#ff0000">4</font> <font color="#009900">]</font> <br>  <font color="#666666">; if (arrayLength == 0) goto exit;</font> <br>  <font color="#00007f">test</font> <font color="#46aa03">edi</font> <font color="#46aa03">edi</font> <br>  <font color="#00007f">jle</font> Ausgang <br>  <font color="#666666">; int t = Array [i];</font> <br>  <font color="#00007f">Schleife</font> <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#0000ff">dword</font> ptr <font color="#009900">[</font> <font color="#46aa03">edx</font> <font color="#339933">+</font> <font color="#46aa03">ecx</font> <font color="#339933">*</font> <font color="#ff0000">4</font> <font color="#339933">+</font> <font color="#ff0000">8</font> <font color="#009900">]</font> <br>  <font color="#666666">; Summe + = i;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">eax hinzu</font> <br>  <font color="#666666">; Summe + = Länge;</font> <br>  <font color="#00007f">füge</font> <font color="#46aa03">esi</font> <font color="#339933">,</font> <font color="#46aa03">ebx hinzu</font> <br>  <font color="#666666">; i ++;</font> <br>  <font color="#00007f">inc</font> <font color="#46aa03">ecx</font> <br>  <font color="#666666">; if (i &lt;arrayLength) gehe zur Schleife</font> <br>  <font color="#00007f">cmp</font> <font color="#46aa03">edi</font> <font color="#46aa03">ecx</font> <br>  <font color="#00007f">JG-</font> <font color="#00007f">Schleife</font> <br>  <font color="#666666">; Rückgabesumme;</font> <br>  Ausfahrt <font color="#339933">:</font> <br>  <font color="#00007f">mov</font> <font color="#46aa03">eax</font> <font color="#339933">,</font> <font color="#46aa03">esi</font> </div></div><br>  Das erste, was mir in den Sinn kommt, ist, dass weniger Assembler-Anweisungen als <i>für</i> den <i>for-</i> Zyklus erforderlich sind (für die einfache Elementsummierung wurden beispielsweise 12 Anweisungen in <i>foreach</i> , aber 15 in <i>for benötigt</i> ). <br><div class="spoiler">  <b class="spoiler_title">Vergleich</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/mw/ga/qy/mwgaqykzztnhwmztdcg4ns5thwa.png"><br></div></div><br>  Insgesamt sind hier die Ergebnisse von <i>for vs foreach-</i> Benchmark für Arrays mit 1 Million Elementen: <br><pre> <code class="cs hljs">sum+=array[i];</code> </pre><div class="scrollable-table"><table><tbody><tr><td>  Methode <br></td><td>  ItemsCount <br></td><td>  Mittelwert <br></td><td>  Fehler <br></td><td>  Stddev <br></td><td>  Median <br></td><td>  Verhältnis <br></td><td>  RatioSD <br></td></tr><tr><td>  Foreach <br></td><td>  1.000.000 <br></td><td>  1,401 ms <br></td><td>  0,2691 ms <br></td><td>  0,7935 ms <br></td><td>  1,694 ms <br></td><td>  1,00 <br></td><td>  0,00 <br></td></tr><tr><td>  Für <br></td><td>  1.000.000 <br></td><td>  1,586 ms <br></td><td>  0,3204 ms <br></td><td>  0,9447 ms <br></td><td>  1,740 ms <br></td><td>  1.23 <br></td><td>  0,65 <br></td></tr></tbody></table></div>  Und für <br><pre> <code class="cs hljs">sum+=array[i] + array.Length;</code> </pre><div class="scrollable-table"><table><tbody><tr><td>  Methode <br></td><td>  ItemsCount <br></td><td>  Mittelwert <br></td><td>  Fehler <br></td><td>  Stddev <br></td><td>  Median <br></td><td>  Verhältnis <br></td><td>  RatioSD <br></td></tr><tr><td>  Foreach <br></td><td>  1.000.000 <br></td><td>  1,703 ms <br></td><td>  0,3010 ms <br></td><td>  0,8874 ms <br></td><td>  1,726 ms <br></td><td>  1,00 <br></td><td>  0,00 <br></td></tr><tr><td>  Für <br></td><td>  1.000.000 <br></td><td>  1,715 ms <br></td><td>  0,2859 ms <br></td><td>  0,8430 ms <br></td><td>  1,956 ms <br></td><td>  1.13 <br></td><td>  0,56 <br></td></tr></tbody></table></div><br>  <i>ForEach</i> geht viel schneller durch das Array als <i>for</i> .  Warum?  Um dies herauszufinden, müssen wir den Code nach JIT vergleichen: <br><br><div class="spoiler">  <b class="spoiler_title">Vergleich aller drei foreach-Optionen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ae/wx/5s/aewx5szyufp55plv9zsq2wznplq.png"><br></div></div><br>  Schauen wir uns ForEachWithoutLength an.  Die Array-Länge wird nur einmal angefordert, und die Array-Grenzen werden nicht überprüft.  Dies geschieht, weil der ForEach-Zyklus erstens das Ändern der Sammlung innerhalb des Zyklus einschränkt und der zweite niemals die Sammlung verlässt.  Aus diesem Grund kann es sich JIT leisten, die Grenzen des Prüfarrays zu entfernen. <br><br>  Schauen wir uns nun ForEachWithLengthWIthoutLocalVariable genau an.  Es gibt nur einen seltsamen Teil, bei dem sum + = length nicht für die zuvor gespeicherte lokale Variable arrayLength gilt, sondern für einen neuen, den die App jedes Mal aus dem Speicher anfordert.  Das heißt, es gibt N + 1 Speicheranforderungen für die Arraylänge, wobei N eine Arraylänge ist. <br><br>  Und jetzt kommen wir zu ForEachWithLengthWithLocalVariable.  Der Code dort ist genau der gleiche wie im vorherigen Beispiel, außer dass die Array-Länge behandelt wird.  Der Compiler hat erneut eine lokale Variable arrayLength generiert, mit der überprüft wird, ob das Array leer ist. Der Compiler hat jedoch die angegebene Länge der lokalen Variablen ehrlich gespeichert, und dies wird in der Summierung innerhalb des Zyklus verwendet.  Es stellt sich heraus, dass diese Methode die Array-Länge nur zweimal aus dem Speicher anfordert.  Der Unterschied ist in der realen Welt sehr schwer zu bemerken. <br><br>  In allen Fällen stellte sich Assembler-Code als so einfach heraus, weil die Methoden selbst einfach sind.  Wenn die Methoden mehr Parameter hätten, müsste sie mit dem Stapel funktionieren, Variablen könnten Speicher außerhalb der Register erhalten, es hätte mehr Überprüfungen gegeben, aber die Hauptlogik würde dieselbe bleiben: Die Einführung einer lokalen Variablen für die Array-Länge ist nur möglich nützlich, um besser lesbaren Code zu erstellen.  Es stellte sich auch heraus, dass <i>Foreach</i> häufig schneller als <i>For</i> durch das Array läuft. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454582/">https://habr.com/ru/post/de454582/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454568/index.html">Mozilla bezeichnete Googles digital signierte Webpaket-Distribution als "schlecht".</a></li>
<li><a href="../de454570/index.html">Neuerstellung eines alten DOS-Spiels in C ++ 17</a></li>
<li><a href="../de454574/index.html">Maschinelles Lernen in der Mikrofinanzierung: Aufbau eines Bewertungsmodells für Kunden mit einer leeren Bonitätshistorie</a></li>
<li><a href="../de454576/index.html">GandCrab-Autoren hören auf zu arbeiten: Sie behaupten, genug gestohlen zu haben</a></li>
<li><a href="../de454578/index.html">So verbinden Sie die PhotoSwipe-Galerie in der Android-Webansicht</a></li>
<li><a href="../de454584/index.html">Schule für Schnittstellenentwicklung: Analyse der Aufgaben für Minsk und ein neues Set in Moskau</a></li>
<li><a href="../de454586/index.html">Lösen japanischer Kreuzworträtsel mit P̶y̶t̶h̶o̶̶n̶ Rust und WebAssembly</a></li>
<li><a href="../de454588/index.html">Gazprom Neft lädt Sie ein: GPN Data Science Meetup</a></li>
<li><a href="../de454590/index.html">Zimbra Collaboration Suite und Mobile Control mit ABQ</a></li>
<li><a href="../de454592/index.html">WAF durch die Augen von Hackern</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>