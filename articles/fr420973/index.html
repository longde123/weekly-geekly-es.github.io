<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚔 ⛽️ 👶🏻 Configurer UFW sur Ubuntu Server 16.04 avec l'exemple BigBlueButton 👨🏿‍🔧 ⛹🏾 👧🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UFW (Uncomplicated Firewall) est une interface iptables conçue pour simplifier le processus de configuration d'un pare-feu. L'outil iptables est fiabl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Configurer UFW sur Ubuntu Server 16.04 avec l'exemple BigBlueButton</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420973/"> <b>UFW</b> (Uncomplicated Firewall) est une interface iptables conçue pour simplifier le processus de configuration d'un pare-feu.  L'outil iptables est fiable et flexible, mais il ne sera pas facile pour un nouveau venu de le configurer lui-même.  Je suis juste nouveau dans cette entreprise. <br><br>  Par défaut, la politique ACCEPT est activée dans iptables et elle ressemble à ceci: <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/wf/ie/xt/wfiextb29c6pm9uslq76-9cjdze.png"><br><br>  Dans notre exemple, il n'y a aucune restriction.  La politique par défaut est ACCEPT. <br><br>  CONNEXIONS ENTRÉE - ENTRÉE. <br>  SORTIE - COMPOSÉS SORTANTS. <br>  AVANT - ROUTAGE (PAR EXEMPLE, IL EST NÉCESSAIRE D'ÉCRIRE UN ITINÉRAIRE à l'ordinateur derrière la passerelle). <br><br>  Vous pouvez activer ufw avec la commande <code>sudo ufw enable</code> <br>  Et immédiatement après cette commande, la politique d'iptables change. <br>  Voici à quoi cela ressemble sur BigBlueButton une fois que ufw est activé: <br><br><pre> <code class="hljs powershell">Chain INPUT (policy DROP) target prot opt source destination ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-reject</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-track</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere Chain FORWARD (policy DROP) target prot opt source destination ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-reject</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-track</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> all -- anywhere anywhere Chain OUTPUT (policy ACCEPT) target prot opt source destination ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-reject</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> all -- anywhere anywhere ufw<span class="hljs-literal"><span class="hljs-literal">-track</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> udp -- anywhere anywhere udp dpt:netbios<span class="hljs-literal"><span class="hljs-literal">-ns</span></span> ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> udp -- anywhere anywhere udp dpt:netbios<span class="hljs-literal"><span class="hljs-literal">-dgm</span></span> ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> tcp -- anywhere anywhere tcp dpt:netbios<span class="hljs-literal"><span class="hljs-literal">-ssn</span></span> ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> tcp -- anywhere anywhere tcp dpt:microsoft<span class="hljs-literal"><span class="hljs-literal">-ds</span></span> ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> udp -- anywhere anywhere udp dpt:bootps ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> udp -- anywhere anywhere udp dpt:bootpc ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere ADDRTYPE match dst<span class="hljs-literal"><span class="hljs-literal">-type</span></span> BROADCAST Chain ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination LOG all -- anywhere anywhere limit: avg <span class="hljs-number"><span class="hljs-number">3</span></span>/min burst <span class="hljs-number"><span class="hljs-number">10</span></span> LOG level warning prefix <span class="hljs-string"><span class="hljs-string">"[UFW BLOCK] "</span></span> Chain ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination LOG all -- anywhere anywhere limit: avg <span class="hljs-number"><span class="hljs-number">3</span></span>/min burst <span class="hljs-number"><span class="hljs-number">10</span></span> LOG level warning prefix <span class="hljs-string"><span class="hljs-string">"[UFW BLOCK] "</span></span> Chain ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-after</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination ACCEPT all -- anywhere anywhere ctstate RELATED,ESTABLISHED ACCEPT icmp -- anywhere anywhere icmp destination<span class="hljs-literal"><span class="hljs-literal">-unreachable</span></span> ACCEPT icmp -- anywhere anywhere icmp source<span class="hljs-literal"><span class="hljs-literal">-quench</span></span> ACCEPT icmp -- anywhere anywhere icmp time<span class="hljs-literal"><span class="hljs-literal">-exceeded</span></span> ACCEPT icmp -- anywhere anywhere icmp <span class="hljs-keyword"><span class="hljs-keyword">parameter</span></span><span class="hljs-literal"><span class="hljs-literal">-problem</span></span> ACCEPT icmp -- anywhere anywhere icmp echo<span class="hljs-literal"><span class="hljs-literal">-request</span></span> ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination ACCEPT all -- anywhere anywhere ACCEPT all -- anywhere anywhere ctstate RELATED,ESTABLISHED ufw<span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-deny</span></span> all -- anywhere anywhere ctstate INVALID DROP all -- anywhere anywhere ctstate INVALID ACCEPT icmp -- anywhere anywhere icmp destination<span class="hljs-literal"><span class="hljs-literal">-unreachable</span></span> ACCEPT icmp -- anywhere anywhere icmp source<span class="hljs-literal"><span class="hljs-literal">-quench</span></span> ACCEPT icmp -- anywhere anywhere icmp time<span class="hljs-literal"><span class="hljs-literal">-exceeded</span></span> ACCEPT icmp -- anywhere anywhere icmp <span class="hljs-keyword"><span class="hljs-keyword">parameter</span></span><span class="hljs-literal"><span class="hljs-literal">-problem</span></span> ACCEPT icmp -- anywhere anywhere icmp echo<span class="hljs-literal"><span class="hljs-literal">-request</span></span> ACCEPT udp -- anywhere anywhere udp spt:bootps dpt:bootpc ufw<span class="hljs-operator"><span class="hljs-operator">-not</span></span><span class="hljs-literal"><span class="hljs-literal">-local</span></span> all -- anywhere anywhere ACCEPT udp -- anywhere <span class="hljs-number"><span class="hljs-number">224.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.251</span></span> udp dpt:mdns ACCEPT udp -- anywhere <span class="hljs-number"><span class="hljs-number">239.255</span></span>.<span class="hljs-number"><span class="hljs-number">255.250</span></span> udp dpt:<span class="hljs-number"><span class="hljs-number">1900</span></span> ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-before</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination ACCEPT all -- anywhere anywhere ACCEPT all -- anywhere anywhere ctstate RELATED,ESTABLISHED ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-allow</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination LOG all -- anywhere anywhere limit: avg <span class="hljs-number"><span class="hljs-number">3</span></span>/min burst <span class="hljs-number"><span class="hljs-number">10</span></span> LOG level warning prefix <span class="hljs-string"><span class="hljs-string">"[UFW ALLOW] "</span></span> Chain ufw<span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-deny</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span> references) target prot opt source destination <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> all -- anywhere anywhere ctstate INVALID limit: avg <span class="hljs-number"><span class="hljs-number">3</span></span>/min burst <span class="hljs-number"><span class="hljs-number">10</span></span> LOG all -- anywhere anywhere limit: avg <span class="hljs-number"><span class="hljs-number">3</span></span>/min burst <span class="hljs-number"><span class="hljs-number">10</span></span> LOG level warning prefix <span class="hljs-string"><span class="hljs-string">"[UFW BLOCK] "</span></span> Chain ufw<span class="hljs-operator"><span class="hljs-operator">-not</span></span><span class="hljs-literal"><span class="hljs-literal">-local</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> all -- anywhere anywhere ADDRTYPE match dst<span class="hljs-literal"><span class="hljs-literal">-type</span></span> LOCAL <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> all -- anywhere anywhere ADDRTYPE match dst<span class="hljs-literal"><span class="hljs-literal">-type</span></span> MULTICAST <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> all -- anywhere anywhere ADDRTYPE match dst<span class="hljs-literal"><span class="hljs-literal">-type</span></span> BROADCAST ufw<span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-deny</span></span> all -- anywhere anywhere limit: avg <span class="hljs-number"><span class="hljs-number">3</span></span>/min burst <span class="hljs-number"><span class="hljs-number">10</span></span> DROP all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-reject</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-reject</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-reject</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination DROP all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> references) target prot opt source destination DROP all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-skip</span></span><span class="hljs-literal"><span class="hljs-literal">-to</span></span><span class="hljs-literal"><span class="hljs-literal">-policy</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination ACCEPT all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-track</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-track</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-track</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination ACCEPT tcp -- anywhere anywhere ctstate NEW ACCEPT udp -- anywhere anywhere ctstate NEW Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination &lt;b&gt;ACCEPT tcp -- anywhere anywhere tcp dpt:ssh ACCEPT udp -- anywhere anywhere udp dpt:ssh ACCEPT tcp -- anywhere anywhere tcp dpt:<span class="hljs-number"><span class="hljs-number">1935</span></span> ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">1935</span></span> ACCEPT udp -- anywhere anywhere multiport dports <span class="hljs-number"><span class="hljs-number">16384</span></span>:<span class="hljs-number"><span class="hljs-number">32768</span></span> ACCEPT tcp -- anywhere anywhere tcp dpt:https ACCEPT udp -- anywhere anywhere udp dpt:https ACCEPT tcp -- anywhere anywhere tcp dpt:http ACCEPT udp -- anywhere anywhere udp dpt:http ACCEPT tcp -- anywhere anywhere tcp dpt:<span class="hljs-number"><span class="hljs-number">5090</span></span> ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">5090</span></span> ACCEPT tcp -- anywhere anywhere tcp dpt:sip ACCEPT udp -- anywhere anywhere udp dpt:sip ACCEPT tcp -- anywhere anywhere tcp dpt:<span class="hljs-number"><span class="hljs-number">5066</span></span> ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">5066</span></span> ACCEPT tcp -- anywhere anywhere tcp dpt:tproxy ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">8081</span></span> ACCEPT tcp -- anywhere anywhere tcp dpt:<span class="hljs-number"><span class="hljs-number">8082</span></span> ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">8082</span></span> ACCEPT tcp -- anywhere anywhere tcp dpt:<span class="hljs-number"><span class="hljs-number">3000</span></span> ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">3000</span></span> ACCEPT tcp -- anywhere anywhere tcp dpt:<span class="hljs-number"><span class="hljs-number">2855</span></span> ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">2855</span></span> ACCEPT tcp -- anywhere anywhere tcp dpt:<span class="hljs-number"><span class="hljs-number">2856</span></span> ACCEPT udp -- anywhere anywhere udp dpt:<span class="hljs-number"><span class="hljs-number">2856</span></span>&lt;/b&gt; Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-limit</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination LOG all -- anywhere anywhere limit: avg <span class="hljs-number"><span class="hljs-number">3</span></span>/min burst <span class="hljs-number"><span class="hljs-number">5</span></span> LOG level warning prefix <span class="hljs-string"><span class="hljs-string">"[UFW LIMIT BLOCK] "</span></span> REJECT all -- anywhere anywhere reject<span class="hljs-literal"><span class="hljs-literal">-with</span></span> icmp<span class="hljs-literal"><span class="hljs-literal">-port</span></span><span class="hljs-literal"><span class="hljs-literal">-unreachable</span></span> Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-limit</span></span><span class="hljs-literal"><span class="hljs-literal">-accept</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination ACCEPT all -- anywhere anywhere Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-forward</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-input</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-logging</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> references) target prot opt source destination Chain ufw<span class="hljs-literal"><span class="hljs-literal">-user</span></span><span class="hljs-literal"><span class="hljs-literal">-output</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> references) target prot opt source destination</code> </pre> <br>  La zone sélectionnée est le lieu des règles utilisateur, elles sont enregistrées avec les commandes: <br><br>  Pour le port: <br><br>  <code>sudo ufw allow ssh</code> (par nom de port) <br>  <code>sudo ufw allow 22</code> (spécifiez le numéro de port spécifiquement) <br>  <code>sudo ufw allow 80/udp</code> (en spécifiant spécifiquement le numéro de port et le protocole tcp ou udp) <br><br>  Pour la plage de ports: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sudo</span></span> ufw allow <span class="hljs-number"><span class="hljs-number">16384</span></span>:<span class="hljs-number"><span class="hljs-number">32768</span></span>/udp</code> </pre> <br>  Suppression des règles: <br><br><pre> <code class="hljs sql">sudo ufw <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> <span class="hljs-keyword"><span class="hljs-keyword">allow</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span></code> </pre> <br>  <b>J'ai diffusé la procédure de configuration d'ufw en utilisant l'exemple de bbb.</b> <br><br>  Tout d'abord, nous examinons quels services les ports écoutent: <br><br><pre> <code class="hljs pgsql">netstat -ntlp | grep <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span></code> </pre> <br> <code>tcp 0 0 xxx.xxx.xxx.x:5090 0.0.0.0:* LISTEN 1258/freeswitch <br> tcp 0 0 127.0.0.1:8100 0.0.0.0:* LISTEN 1720/soffice.bin <br> <b>tcp 0 0 xxx.xxx.xxx.x:5060 0.0.0.0:* LISTEN 1258/freeswitch</b> <br> tcp 0 0 127.0.0.1:8101 0.0.0.0:* LISTEN 1766/soffice.bin <br> tcp 0 0 127.0.0.1:8102 0.0.0.0:* LISTEN 1811/soffice.bin <br> tcp 0 0 127.0.0.1:8103 0.0.0.0:* LISTEN 1856/soffice.bin <br> <b>tcp 0 0 xxx.xxx.xxx.x:2855 0.0.0.0:* LISTEN 1258/freeswitch</b> <br> tcp 0 0 127.0.0.1:8104 0.0.0.0:* LISTEN 1902/soffice.bin <br> <b>tcp 0 0 xxx.xxx.xxx.x:2856 0.0.0.0:* LISTEN 1258/freeswitch</b> <br> tcp 0 0 127.0.0.1:27017 0.0.0.0:* LISTEN 1186/mongod <br> <b>tcp 0 0 xxx.xxx.xxx.x:5066 0.0.0.0:* LISTEN 1258/freeswitch</b> <br> tcp 0 0 127.0.0.1:6379 0.0.0.0:* LISTEN 1227/redis-server 1 <br> tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN 1359/nginx -g daemo <br> <b>tcp 0 0 xxx.xxx.xxx.x:8081 0.0.0.0:* LISTEN 1258/freeswitch</b> <br> <b>tcp 0 0 xxx.xxx.xxx.x:8082 0.0.0.0:* LISTEN 1258/freeswitch</b> <br> <b>tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 1176/sshd</b> <br> <b>tcp 0 0 0.0.0.0:3000 0.0.0.0:* LISTEN 1195/node</b> <br> tcp6 0 0 ::1:5090 :::* LISTEN 1258/freeswitch <br> tcp6 0 0 ::1:5060 :::* LISTEN 1258/freeswitch <br> tcp6 0 0 127.0.0.1:8005 :::* LISTEN 1341/java <br> tcp6 0 0 :::5070 :::* LISTEN 1461/java <br> tcp6 0 0 :::9999 :::* LISTEN 1461/java <br> tcp6 0 0 :::1935 :::* LISTEN 1461/java <br> tcp6 0 0 :::8080 :::* LISTEN 1341/java <br> tcp6 0 0 :::80 :::* LISTEN 1359/nginx -g daemo <br> tcp6 0 0 ::1:8081 :::* LISTEN 1258/freeswitch <br> tcp6 0 0 ::1:8082 :::* LISTEN 1258/freeswitch <br> tcp6 0 0 :::8021 :::* LISTEN 1258/freeswitch <br> tcp6 0 0 :::22 :::* LISTEN 1176/sshd <br> tcp6 0 0 :::5080 :::* LISTEN 1461/java</code> <br> <br>  Nous sommes intéressés par les lignes avec xxx.xxx.xxx.x (xxx.xxx.xxx.x est l'adresse IP de votre serveur), car cela indique que le service écoute sur la carte réseau les demandes entrantes de tous les réseaux (0.0.0.0:*) .  Les lignes avec 127.0.0.1 ne nous intéressent pas puisque c'est l'interface interne, donc nous sommes également intéressés par les lignes avec 0.0.0.0 dans la 4ème colonne (surlignées en gras), par exemple <br><br> <code>tcp 0 0 <b>0.0.0.0:80</b> 0.0.0.0:* LISTEN 1359/nginx -g daemo</code> <br> <br>  car il indique que le port 80 est ouvert à toutes les interfaces de serveur et accepte les demandes de tous les réseaux. <br><br>  Donc, selon cela, nous établissons les règles: <br><br>  <code>sudo ufw allow 22</code> pour ssh <br>  <code>sudo ufw allow 80</code> pour nginx ou serveur web apache <br><br>  Un certain nombre de règles pour le freeswitch: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sudo</span></span> ufw allow <span class="hljs-number"><span class="hljs-number">5060</span></span> sudo ufw allow <span class="hljs-number"><span class="hljs-number">5090</span></span> sudo ufw allow <span class="hljs-number"><span class="hljs-number">2855</span></span> sudo ufw allow <span class="hljs-number"><span class="hljs-number">2856</span></span> sudo ufw allow <span class="hljs-number"><span class="hljs-number">5066</span></span> sudo ufw allow <span class="hljs-number"><span class="hljs-number">8081</span></span> sudo ufw allow <span class="hljs-number"><span class="hljs-number">8082</span></span></code> </pre> <br>  pour le service de noeud: <br><br> <code>sudo ufw allow 3000</code> <br>  Ensuite, vous devez consulter la documentation, dans laquelle nous verrons qu'il est nécessaire d'ouvrir les ports suivants: <br><br>  <code>sudo ufw allow 16384:32768/udp</code> - pour travailler WebRTC <br> <code>sudo ufw allow 443</code> <br> <code>sudo ufw allow 1935</code> <br> <br>  Ceci termine la configuration ufw de base pour le serveur BigBlueButton 2.0. <br><br>  J'ajouterai seulement qu'il est souhaitable de désactiver ssh ou de changer le port, ou d'autoriser ce port uniquement pour un réseau spécifique, par exemple, pour le réseau de votre entreprise. <br><br>  Par exemple, votre passerelle a deux interfaces réseau, une virtuelle (pour les utilisateurs) 192.168.3.2, et l'autre réelle 105.xxx.xxx.xxx (pour le fournisseur), ici pour la règle ufw, nous prenons une véritable ip, ou plutôt, indiquons le réseau auquel cela appartient ip. <br><br>  Tout d'abord, changez le port dans le fichier de configuration du serveur SSH, vous pouvez utiliser n'importe quel éditeur de texte: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">vim</span></span> /etc/ssh/sshd_config</code> </pre> <br>  Ensuite, nous supprimons la règle autorisant le port 22: <br><br>  <code>Sudo ufw delete allow 22</code> - parfois appelé OpenSSH. <br><br>  Nous créons une règle permettant la connexion au nouveau port uniquement à partir du réseau d'entreprise: <br><br><pre> <code class="hljs pgsql">sudo ufw allow <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">105.</span></span>../<span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> port <span class="hljs-number"><span class="hljs-number">4321</span></span></code> </pre> <br>  Ensuite, nous redémarrons le service ssh: <br><br><pre> <code class="hljs swift">/etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/ssh restart</code> </pre> <br>  Et voyez le résultat <br><br><pre> <code class="hljs pgsql">netstat -ntlp | grep <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span></code> </pre> <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">tcp</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0.0.0.0:4321</span></span> <span class="hljs-number"><span class="hljs-number">0.0.0.0</span></span>:* listen <span class="hljs-number"><span class="hljs-number">5676</span></span>/sshd</code> </pre> <br>  et dans les règles ufw, nous verrons qui a accès au port: <br><br><pre> <code class="hljs lua">ufw <span class="hljs-built_in"><span class="hljs-built_in">status</span></span></code> </pre> <br><pre> <code class="hljs">4321 ALLOW 105.xxx.xxx.xxx/26</code> </pre> <br>  Chers lecteurs, je vous demande d'écrire des ajouts dans les commentaires: pensez-vous que tout est décrit correctement ici, ou est-il nécessaire d'ajouter ou de supprimer quelque chose? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr420973/">https://habr.com/ru/post/fr420973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr420963/index.html">Analyse commerciale: comment abandonner Excel sans l'abandonner</a></li>
<li><a href="../fr420965/index.html">Les six rapports les plus utiles avec Frontend Conf 2018</a></li>
<li><a href="../fr420967/index.html">Aider à nager: comment initier les nouveaux arrivants à un projet complexe</a></li>
<li><a href="../fr420969/index.html">Le magazine Cosmonautics News cesse d'exister</a></li>
<li><a href="../fr420971/index.html">Crash Response: cluster étendu sur le site DR</a></li>
<li><a href="../fr420975/index.html">Ne le faites pas en production</a></li>
<li><a href="../fr420977/index.html">QComboBox + QTreeView Tricks</a></li>
<li><a href="../fr420979/index.html">Redux Basics (manuel, 2e édition)</a></li>
<li><a href="../fr420981/index.html">«Je peux vous parler de la douleur commune à tous les développeurs iOS» - 10 questions pour le programmeur, numéro 2</a></li>
<li><a href="../fr420983/index.html">Les chercheurs disent qu'il est presque impossible de se cacher de l'espionnage de Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>