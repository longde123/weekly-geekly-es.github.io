<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò© üë©üèø‚Äçü§ù‚Äçüë®üèº üöè Virtuelle Telefonanlage von Rostelecom: Was und wie kann √ºber die API geschehen? ü•† ‚úçüèª üõçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Moderne Unternehmen empfinden Festnetztelefone als veraltete Technologie: Mobilkommunikation sorgt f√ºr Mobilit√§t und st√§ndige Verf√ºgbarkeit der Mitarb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Virtuelle Telefonanlage von Rostelecom: Was und wie kann √ºber die API geschehen?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rostelecom/blog/484180/"><img src="https://habrastorage.org/webt/9p/4z/il/9p4zilg_eledccytuo6hslf19f0.png"><br><br>  Moderne Unternehmen empfinden Festnetztelefone als veraltete Technologie: Mobilkommunikation sorgt f√ºr Mobilit√§t und st√§ndige Verf√ºgbarkeit der Mitarbeiter, soziale Netzwerke und Instant Messenger sind ein einfacher und schnellerer Kommunikationskanal.  Um mit den Mitbewerbern Schritt zu halten, werden Office-PBX-Anlagen immer √§hnlicher: Sie gehen in die Cloud, werden √ºber das Webinterface verwaltet und √ºber die API in andere Systeme integriert.  In diesem Beitrag erfahren Sie, √ºber welche Funktionen die virtuelle PBX-API von Rostelecom verf√ºgt und wie Sie mit den Grundfunktionen einer virtuellen PBX arbeiten. <br><a name="habracut"></a><br>  Die Hauptaufgabe der virtuellen PBX-API von Rostelecom besteht in der Interaktion mit CRM- oder Unternehmensstandorten.  Beispielsweise enth√§lt die API Widgets "R√ºckruf" und "Aufruf von der Site" f√ºr die wichtigsten Steuerungssysteme: WordPress, Bitrix, OpenCart.  Mit der API k√∂nnen Sie: <br><br><ul><li>  Erhalten Sie Informationen, informieren Sie sich √ºber den Status und t√§tigen Sie Anrufe auf Anfrage von einem externen System. <br></li><li>  Erhalten Sie einen tempor√§ren Link zur Gespr√§chsaufzeichnung. <br></li><li>  Verwalten und Empfangen von Einschr√§nkungseinstellungen von Benutzern. <br></li><li>  Informationen √ºber den Benutzer einer virtuellen TK-Anlage abrufen; <br></li><li>  Fordern Sie eine Liste der Geb√ºhren und Geb√ºhren bei Anrufen an. <br></li><li>  Anrufliste herunterladen. <br></li></ul><br><h2>  Wie die API funktioniert </h2><br>  Die Integrations-API und das externe System interagieren √ºber HTTP-Anforderungen miteinander.  In Ihrem pers√∂nlichen Konto legt der Administrator die Adressen fest, an die Anforderungen an die API gesendet werden sollen.  Das externe System muss √ºber eine √∂ffentliche Adresse verf√ºgen, auf die √ºber das Internet zugegriffen werden kann, und ein SSL-Zertifikat muss installiert sein. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aef/32c/8c5/aef32c8c5b54534a5b002a87166cb724.png"><br><br>  Au√üerdem kann der Dom√§nenadministrator in Ihrem pers√∂nlichen Konto die IP-Quellen von Anforderungen beim Zugriff auf die API einschr√§nken. <br><br><h2>  Wir erhalten Informationen √ºber die Benutzer der virtuellen TK-Anlage </h2><br>  Um eine Liste der Benutzer oder Gruppen zu erhalten, m√ºssen Sie mit der Methode <i>/ users_info</i> eine Anforderung an die virtuelle <i>TK-Anlage senden</i> . <br><br><pre><code class="plaintext hljs">{         "domain":"example.ru" }</code> </pre> <br>  Es wird eine Liste zur√ºckgegeben, die Sie speichern k√∂nnen. <br><br><pre> <code class="plaintext hljs">{ "result":0, "resultMessage":"", "users":[                           {                            "display_name":"test_user_1",                            "name":"admin",                            "pin":^_^quot öquot^_^,                           "is_supervisor":true,                            "is_operator":false,                            "email":"test_user_1@mail.gov","recording":1                             },                            {                            "display_name":"test_user_2",                            "name":"test",                            "pin":^_^quot øquot^_^,                            "is_supervisor":true,                            "is_operator":false,                            "email":"",                           "recording":1                            }              ], "groups":              [                            {                            "name":"testAPI",                            "pin":^_^quot«¥quot^_^,                            "email":"Ivanov@mail.gov",                            "distribution":1,                           "users_list":[^_^quot öquot^_^,^_^quot øquot^_^]                            }              ]</code> </pre><br>  Bei dieser Methode werden zwei Arrays √ºbergeben.  Einer mit Dom√§nenbenutzern, einer mit Dom√§nengruppen.  Die Gruppe kann auch die E-Mail angeben, die in der Anforderung gesendet wird. <br><br><h2>  Wir verarbeiten Informationen √ºber einen eingehenden Anruf </h2><br>  Durch die Anbindung der Unternehmenstelefonie an verschiedene CRM-Systeme sparen Mitarbeiter Zeit bei der Interaktion mit Kunden und beschleunigen die Verarbeitung eingehender Anrufe.  Beispielsweise kann CRM bei einem Anruf vom aktuellen Kunden seine Karte √∂ffnen, und Sie k√∂nnen von CRM aus einen Anruf an den Kunden senden und ihn mit dem Mitarbeiter verbinden. <br><br>  Um Informationen zu Aufrufen √ºber die API <i>abzurufen</i> , m√ºssen Sie die Methode <i>/ get_number_info</i> verwenden, mit der eine Anrufliste mit Informationen zu der Gruppe erstellt wird, an die der Anruf verteilt wird.  Angenommen, ein eingehender Anruf von der Nummer 1234567890 ist bei der virtuellen PBX-Nummer angekommen, dann wird eine Anfrage von der PBX gesendet: <br><br><pre> <code class="plaintext hljs">{        "session_id":"SDsnZugDFmTW7Sec",        "timestamp":"2019-12-27 15:34:44.461",        "type":"incoming",        "state":"new",        "from_number":"sip:&lt;/i^_^gt lt&amp;i;gt^_^@192.168.0.1",        "from_pin":"",        "request_number":"sip:&lt;/i^_^gt lt&amp;i;gt^_^@1192.168.0.1",        "request_pin":^_^quot…üquot^_^,        "disconnect_reason":"",        "is_record":"" }</code> </pre><br>  Als N√§chstes m√ºssen Sie den Handler <i>/ get_number_info</i> verbinden.  Die Anforderung muss ausgef√ºhrt werden, wenn ein eingehender Anruf auf einer eingehenden Leitung eingeht, bevor Anrufe weitergeleitet werden.  Wenn die Antwort auf die Anforderung nicht innerhalb der festgelegten Zeit eingeht, wird der Anruf gem√§√ü den in der Dom√§ne festgelegten Regeln weitergeleitet. <br><br>  Beispielhandler auf der CRM-Seite. <br><br><pre> <code class="plaintext hljs">if ($account) {        $data = [            'result' =&gt; 0,            'resultMessage' =&gt; ' ',            'displayName' =&gt; $account-&gt;name,            //'PIN' =&gt; $crm_users,        ];    }        else                {        $data = [            'result' =&gt; 0,            'resultMessage' =&gt; '  ',            'displayName' =&gt; '  '.$contact,            //'PIN' =&gt; crm_users,        ];    }    return $data;</code> </pre><br>  Die Antwort des Handlers. <br><br><pre> <code class="plaintext hljs">{        "result":0,        "resultMessage":" ",        "displayName":"   +1&lt;/i&gt; 234-56-78-90&lt;i&gt;" }</code> </pre><br><h2>  Wir √ºberwachen den Status und laden Gespr√§chsaufzeichnungen herunter </h2><br>  In der virtuellen Telefonzentrale von Rostelecom ist die Aufzeichnung von Gespr√§chen in Ihrem pers√∂nlichen Konto aktiviert.  Mit der API k√∂nnen Sie den Status dieser Funktion verfolgen.  Wenn Sie die <i>Anrufbeendigung</i> in <i>call_events verarbeiten, sehen</i> Sie das Flag <i>'is_record',</i> das den Benutzer √ºber den Aufzeichnungsstatus <i>informiert</i> : <i>true</i> bedeutet, dass der Benutzer die Gespr√§chsaufzeichnungsfunktion <i>aktiviert hat</i> . <br><br>  Um einen Datensatz herunterzuladen, m√ºssen Sie eine Anforderung an <i>api.cloudpbx.rt.ru/get_record</i> senden, <i>wobei Sie die</i> Sitzungs-ID des Aufrufs <i>session_id verwenden</i> <i>.</i> <i><br></i> <br><pre> <code class="plaintext hljs">{        "session_id":"SDsnZugDFmTW7Sec" }</code> </pre><br>  Die Antwort ist ein tempor√§rer Link zum Herunterladen der Gespr√§chsaufzeichnungsdatei. <br><br><pre> <code class="plaintext hljs">{        "result": ^_^quot&amp;#0;quot^_^,        "resultMessage": "  ",    "url": "https://api.cloudpbx.rt.ru/records_new_scheme/record/download/501a8fc4a4aca86eb35955419157921d/188254033036" }</code> </pre><br><br>  Die Dateispeicherzeit wird in den Einstellungen Ihres pers√∂nlichen Kontos festgelegt.  Nachdem die Datei gel√∂scht wurde. <br><br><h2>  Statistik und Berichterstattung </h2><br>  In Ihrem Konto auf einer separaten Seite k√∂nnen Sie Statistiken und Berichte f√ºr alle Anrufe anzeigen und Filter nach Status und Uhrzeit anwenden.  √úber die API m√ºssen Sie den Aufruf zun√§chst mit der Methode <i>/ call_events verarbeiten</i> : <br><br><pre> <code class="plaintext hljs">    {        "session_id":"SDsnZugDFmTW7Sec",        "timestamp":"2019-12-27 15:34:59.349",        "type":"incoming",        "state":"end",        "from_number":"sip:&lt;/i^_^gt lt&amp;i;gt^_^@192.168.0.1",        "from_pin":"",        "request_number":"sip:&lt;/i^_^gt lt&amp;i;gt^_^@192.168.0.1",        "request_pin":^_^quot öquot^_^,        "disconnect_reason":"",        "is_record":"true"        }</code> </pre><br>  Rufen Sie dann die Methode <i>call_info</i> auf, um das Array zu verarbeiten und den Aufruf im CRM-System anzuzeigen. <br><br><pre> <code class="plaintext hljs">   {        "session_id":"SDsnZugDFmTW7Sec" }</code> </pre><br>  Die Antwort besteht aus einem Array von Daten, die zum Speichern von Daten im CRM-Protokoll verarbeitet werden k√∂nnen. <br><br><pre> <code class="plaintext hljs">{        "result":0,        "resultMessage":"",        "info":        {                "call_type":1,                "direction":1,                "state":1,                "orig_number":"sip:&lt;/i^_^gt lt&amp;i;gt^_^@192.168.0.1",                "orig_pin":null,                "dest_number":"sip:&lt;/i^_^gt lt&amp;i;gt^_^@192.168.0.1",                "answering_sipuri":"admin@example.ru",                "answering_pin":^_^quot…üquot^_^,                "start_call_date":^_^quot quot^_^,                "duration":14,                 "session_log":"0:el:123456789;0:ru:admin;7:ct:admin;9:cc:admin;14:cd:admin;",                "is_voicemail":false,                "is_record":true,                "is_fax":false,                "status_code":^_^quot&amp;#0;quot^_^,                "status_string":""        } }</code> </pre><br><br><h2>  Weitere n√ºtzliche Funktionen der virtuellen Telefonanlage </h2><br>  Neben der API verf√ºgt die virtuelle TK-Anlage √ºber einige weitere n√ºtzliche Funktionen, die Sie verwenden k√∂nnen.  Dies ist beispielsweise ein interaktives Sprachmen√º und eine Kombination aus Mobilfunk- und Festnetzkommunikation. <br><br>  Interactive Voice Response (IVR) ist das, was wir im Empf√§nger h√∂ren, bevor eine Person antwortet.  Tats√§chlich ist dies ein elektronischer Operator, der Anrufe an die entsprechenden Abteilungen umleitet und einige der Fragen automatisch beantwortet.  In K√ºrze wird es m√∂glich sein, mit IVR √ºber die API zu arbeiten: Jetzt entwickeln wir eine Software, mit der Sie den Fortschritt eines Anrufs √ºber IVR verfolgen und Informationen zu Tastenanschl√§gen erhalten k√∂nnen, wenn sich der Anrufer im Sprachmen√º befindet. <br><br>  Um Unternehmenstelefonie auf Mobiltelefone zu √ºbertragen, k√∂nnen Sie entweder Softphone-Anwendungen verwenden oder den FMC-Dienst (Fixed Mobile Convergence) separat verbinden.  Mit jeder der Methoden sind Anrufe innerhalb des Netzes kostenlos, es ist m√∂glich, mit Kurznummern zu arbeiten, und Anrufe k√∂nnen aufgezeichnet und allgemeine Statistiken dar√ºber gef√ºhrt werden. <br><br>  Der Unterschied besteht darin, dass Softphones f√ºr die Kommunikation das Internet ben√∂tigen, jedoch nicht an einen Operator gebunden sind. FMC ist an einen bestimmten Operator gebunden, kann jedoch auch auf √§lteren Tastentelefonen verwendet werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de484180/">https://habr.com/ru/post/de484180/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de484170/index.html">Aktualisieren Sie Check Point von R77.30 auf 80.20</a></li>
<li><a href="../de484172/index.html">Kontinuierliche Integration in Unity: Verk√ºrzung der Montagezeit und Einsparung von Ressourcen + Gewinnlinie als Geschenk</a></li>
<li><a href="../de484174/index.html">Castle trinkt unter "extremen" Bedingungen oder wie wir an der "DOZOR" Show teilgenommen haben</a></li>
<li><a href="../de484176/index.html">Implementieren der Statusvorlage in Unity</a></li>
<li><a href="../de484178/index.html">Intelligenter Ethernet-Switch f√ºr Planet Earth</a></li>
<li><a href="../de484182/index.html">Xenobots: Lebende Nanoroboter aus Froschzellen</a></li>
<li><a href="../de484186/index.html">LDAP - "Authentifizierung" ist ein Antipattern</a></li>
<li><a href="../de484188/index.html">Standards f√ºr das Datenbankdesign</a></li>
<li><a href="../de484192/index.html">Einfache und leicht zu implementierende Anwendungen auf Tarantool Cartridge (Teil 2)</a></li>
<li><a href="../de484194/index.html">Kubernetes √ºbersetzt in Kinder</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>