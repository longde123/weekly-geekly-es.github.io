<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìô üö• üõï Drone de corrida FPV DIY (parte 2) - configura√ß√£o üõ≥Ô∏è ü§¥üèΩ ‚úÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na primeira parte , falei sobre como montar um quadrocopter para v√¥os FPV. Agora √© hora de configur√°-lo. Se estiver interessado, welkam sob cat.
 
 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Drone de corrida FPV DIY (parte 2) - configura√ß√£o</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395487/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeira parte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , falei sobre como montar um quadrocopter para v√¥os FPV. </font><font style="vertical-align: inherit;">Agora √© hora de configur√°-lo. </font><font style="vertical-align: inherit;">Se estiver interessado, welkam sob cat.</font></font><br>
<br>
<img src="https://habrastorage.org/files/4a4/068/96b/4a406896bf854d38b75a5c4617cba4b7.jpg"><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fa√ßa imediatamente uma reserva que n√£o pretendo ser especialista, este √© apenas o terceiro quadroc√≥ptero que montei. </font><font style="vertical-align: inherit;">Al√©m disso, o ajuste √© uma coisa muito subjetiva. </font><font style="vertical-align: inherit;">No entanto, espero que algu√©m ache o artigo √∫til e ajude a economizar tempo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosseguimos diretamente para a configura√ß√£o. </font><font style="vertical-align: inherit;">Coisas mais simples primeiro, e depois Sua Majestade o controlador de v√¥o.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piscando e configurando o MinimOSD</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O firmware mais popular (mas n√£o o √∫nico) do MinimOSD √© o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MWOSD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Primeiro, voc√™ precisa piscar a placa dela e depois configur√°-la. </font><font style="vertical-align: inherit;">Se voc√™ pode configurar o OSD atrav√©s de um PC (mais sobre isso na se√ß√£o sobre configura√ß√£o de um PC), para o firmware, voc√™ precisa de um adaptador FTDI ou Arduinka. </font><font style="vertical-align: inherit;">Como fazer isso atrav√©s do programador FTDI, e mais importante de onde conseguir os drivers antigos, √© mostrado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste v√≠deo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O principal √© n√£o esquecer antes de desinstalar o firmware no Config.h as seguintes linhas: </font><font style="vertical-align: inherit;">
A partir dos par√¢metros a serem exibidos na tela, comecei apenas a tens√£o da bateria, o tempo de v√¥o e o modo de v√¥o selecionado.</font></font><br>
<br>
<code>#define MINIMOSD<br>
#define CLEANFLIGHT<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/files/a24/578/7cd/a245787cd08e40d99a5e6f8b59213c6a.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√µes de firmware e controlador</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para controladores de firmware, tamb√©m tenho um adaptador USB especial, mas voc√™ pode ficar sem ele conectando-se atrav√©s de um PC. </font><font style="vertical-align: inherit;">Muito tempo para colocar Multishot ou Oneshot125 j√° testado? </font><font style="vertical-align: inherit;">Por um lado, n√£o h√° muita diferen√ßa de velocidade no chip F330 desatualizado, por outro lado, uma m√∫sica de Star Wars quando voc√™ o liga e, como dizem nos f√≥runs, um "sinal mais limpo". </font><font style="vertical-align: inherit;">Resolvemos todas as reclama√ß√µes n√£o individuais de que os motores espontaneamente come√ßam a girar na velocidade m√°xima quando conectados √† CLI. </font><font style="vertical-align: inherit;">Como resultado, ele instalou a vers√£o mais recente do BLHeli (no momento da compila√ß√£o 14.5), ativou o Damped Light e ajustou o tempo do motor para m√©dio. </font><font style="vertical-align: inherit;">Posteriormente calibrou os reguladores de acordo com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta instru√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware do controlador de voo</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta fase, fiquei mais tempo preso, pois houve problemas com o firmware. Aconteceu que a primeira vez que voc√™ precisa costurar com o fechamento dos contatos de inicializa√ß√£o (como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste v√≠deo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). A prop√≥sito, √†s vezes acontece que o PC est√° protegido contra grava√ß√£o e √© imposs√≠vel exibir um novo firmware. Aqui est√° uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instru√ß√£o sobre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como corrigi-lo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez o firmware mais popular hoje, merecidamente, seja o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cleanflight</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ap√≥s a instala√ß√£o, basta configurar o protocolo do receptor e o quadrocopter j√° pode voar com bastante toler√¢ncia. Para configurar, use o conveniente shell gr√°fico </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cleanflight Configurator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas ao c√≥digo de firmware aberto, ele possui v√°rias ramifica√ß√µes (garfos). O mais interessante deles √© o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betaflight.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de uma pessoa com o apelido Boris B. O firmware est√° se desenvolvendo muito dinamicamente e algumas de suas "caracter√≠sticas" entram no Cleanflight "pai" (por exemplo, modo de v√¥o Airmode). A desvantagem do Betaflight √© que os lan√ßamentos s√£o lan√ßados com frequ√™ncia suficiente e sua estabilidade nem sempre √© alta. A prop√≥sito, esse motivo atrasou a reda√ß√£o deste artigo por v√°rias semanas. No momento da conclus√£o da montagem do quadrocopter, a vers√£o 2.8.0 acabou de ser lan√ßada, que apresentava alguns erros e diferia nas configura√ß√µes padr√£o hostis. A vers√£o corrigida 2.8.1 RC1 apareceu muito rapidamente, mas a experi√™ncia de trabalhar como programador me disse que era melhor aguardar o lan√ßamento. N√£o falhei, pois ao mesmo tempo em que </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">lan√ßamos a</font></a><font style="vertical-align: inherit;"> vers√£o 2.8.1, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betaflight Configurator apareceu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Podemos dizer que esta √© uma nova etapa na hist√≥ria deste firmware. </font><font style="vertical-align: inherit;">O fato √© que, √† medida que o Betaflight se desenvolve cada vez mais, ele se afasta do Cleanflight e o configurador deste √∫ltimo se torna cada vez mais in√∫til, uma vez que a maior parte das configura√ß√µes ainda era feita atrav√©s do console da CLI. </font><font style="vertical-align: inherit;">A prop√≥sito, no momento da prepara√ß√£o deste artigo, a vers√£o 2.9.0 do Betaflight j√° havia sido lan√ßada, mas devido a cr√≠ticas negativas, eu n√£o a atualizei. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo, descreverei em detalhes como eu configurei meu quadrocopter atrav√©s do Betaflight Configurator.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o do PC atrav√©s do Betaflight Configurator</font></font></h4><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia Configura√ß√£o</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fiz a calibra√ß√£o do aceler√¥metro.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia Portas</font></font></h5><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para que o OSD funcione, ele inclui o MSP para a porta UART2.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca desative o MSP da porta UART1. </font><font style="vertical-align: inherit;">√â paralelo ao USB e, ao desativar a transfer√™ncia de dados, voc√™ n√£o est√° mais conectado ao PC via conector USB.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/0dc/829/18b/0dc82918b7604d158d4544d3262f7b04.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia Configura√ß√£o</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, quase todas as configura√ß√µes s√£o feitas aqui.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na se√ß√£o "Alinhamento da placa e do sensor", indiquei que meu PC era girado 90 graus ao longo do eixo da guinada. </font><font style="vertical-align: inherit;">A corre√ß√£o desse par√¢metro pode ser verificada na guia Configura√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No "Modo receptor", escolhi o RX_PPM.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu escolhi o ONESHOT125 como o protocolo dos reguladores (por que n√£o o MULTISHOT, escrevi acima).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desativado "Sa√≠da PWM n√£o sincronizada", novamente, porque n√£o estou usando MULTISHOT.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para que os motores sempre rodem no estado alimentado, desliguei o MOTOR_STOP.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ativou a op√ß√£o "Desarmar motores, independentemente do valor do acelerador", como farei os motores de bra√ßo em um canal separado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzido o valor de "Acelera√ß√£o m√≠nima" para 1030. √â a velocidade de marcha lenta, selecionada subjetivamente.</font></font></li>
<li>  ¬´VBAT¬ª     .     ¬´Battery Voltage¬ª   ,      .      ,     ¬´Voltage Scale¬ª.</li>
<li> ¬´Other Features¬ª  BLACKBOX, SUPEREXPO_RATES,   LED_STRIP   AIRMODE.      .</li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/551/eb5/f47/551eb5f47fdc409182fd8907ec6b18e3.png"><br>
<br>
<h5> Failsafe</h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com a seguran√ßa, tudo se tornou um pouco mais complicado do que eu j√° havia visto. </font><font style="vertical-align: inherit;">Em f√≥runs especializados, √†s vezes h√° holivares no t√≥pico "onde √© melhor configurar √† prova de falhas: no receptor ou no PC?" </font><font style="vertical-align: inherit;">De fato, essa pergunta soa corretamente assim: "onde √© melhor configurar √† prova de falhas: somente no receptor ou no receptor e no PC?" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A configura√ß√£o √† prova de falhas no receptor √© necess√°ria em qualquer caso. </font><font style="vertical-align: inherit;">Aqui √© necess√°rio esclarecer que estamos falando do receptor Frsky D4R-II operando sob o protocolo PPM. </font><font style="vertical-align: inherit;">Para receptores com S.Bus, o failafe √© configurado de maneira diferente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Frsky D4R-II possui tr√™s op√ß√µes para perda de sinal do transmissor:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transmitir para um PC um sinal que simula as posi√ß√µes predefinidas de man√≠pulos e interruptores (modo de posi√ß√µes predefinidas, que √© descrito no manual)</font></font></li>
<li>     ,    ( Hold Last Position)</li>
<li>     ( No Pulse)</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por padr√£o, o Frsky D4R-II est√° definido no modo Hold Last Position, o que contribui para o v√¥o do dispositivo a dist√¢ncias distantes. Portanto, se voc√™ usar apenas √† prova de falhas no receptor, precisar√° configurar o modo de posi√ß√µes predefinidas. Outra coisa √© que o fail-safe √© ativado mesmo com uma perda moment√¢nea de sinal. Ser√° muito desagrad√°vel se o sinal se recuperar ap√≥s uma fra√ß√£o de segundo, e o quadrocopter j√° zadarmi motores e cai. A configura√ß√£o √† prova de falhas em um PC pode melhorar a situa√ß√£o, pois nesse modo h√° uma resposta atrasada, que serve como filtro contra perdas de sinal de curto prazo. Al√©m disso, existe um script personaliz√°vel, segundo o qual o quadrocopter se comportar√° se a prote√ß√£o contra falhas estiver ativada. Por exemplo, voc√™ pode ativar o modo de estabiliza√ß√£o e tentar sentar-se com mais ou menos suavidade ou at√© mesmo ativar o RTH, se houver.Mas, na pr√°tica, essas demandas s√£o grandes em dispositivos grandes com GPS, e em pequenos e r√°pidos, pilotos experientes aconselham a n√£o serem inteligentes e desligam os motores depois de perder o sinal. Devido √† alta velocidade dos voos, ser√° mais seguro para os outros.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A nuance √© que, se o receptor estiver definido como Posi√ß√µes predefinidas ou Manter √∫ltima posi√ß√£o, o PC nem saber√° que ocorreu uma perda de sinal. </font><font style="vertical-align: inherit;">Portanto, a seguran√ßa contra falhas no PC s√≥ pode ser usada se No Pulse estiver definido no receptor. </font><font style="vertical-align: inherit;">No Frsky D4R-II, ele √© instalado pressionando brevemente (menos de 1 segundo) o bot√£o √† prova de falhas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com o transmissor desligado</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instru√ß√µes em v√≠deo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na guia Failsafe Betaflight Configurator, fiz o seguinte:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na se√ß√£o Configura√ß√µes de fallback de canal, defino os valores dos comutadores do transmissor que precisar√£o ser simulados. </font><font style="vertical-align: inherit;">No meu caso, acabei de ligar o squeaker no AUX3.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est√°gio 2 √† prova de falhas ativado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina o atraso de ativa√ß√£o do modo √† prova de falhas por 1 segundo (valor 10 no item "Tempo de guarda para a ativa√ß√£o do est√°gio 2 ...")</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina o tempo de opera√ß√£o dos motores ap√≥s ativar 1 segundo √† prova de falhas (valor 10 no item Atraso baixo do acelerador √† prova de falhas).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No procedimento √† prova de falhas, escolhi o cen√°rio com Drop (Drop), e n√£o com uma tentativa de aterrar suavemente (Land).</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/f38/c3f/7fe/f38c3f7fe3754ce79d53a2806e354d20.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia Ajuste PID</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A configura√ß√£o do PID √© um processo no qual voc√™ n√£o deve entrar sem conhecer um vau. </font><font style="vertical-align: inherit;">Antes de tudo, √© necess√°ria uma compreens√£o te√≥rica desses tr√™s componentes. </font><font style="vertical-align: inherit;">Aqui est√£o alguns artigos que podem ajudar com isso:</font></font><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PID para quadrocopters (tradu√ß√£o)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre os controladores PID colocados na palavra</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E mais sobre controladores PID</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No√ß√µes b√°sicas da configura√ß√£o do controlador PID usando logs do Blackbox (tradu√ß√£o)</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√≠deo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apenas sobre o ajuste PID</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como n√£o me sinto preparado para essa configura√ß√£o, deixei os valores padr√£o, j√° que o Betaflight tamb√©m recomenda viajar com eles. </font><font style="vertical-align: inherit;">Mas ainda fiz duas altera√ß√µes:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flutuador selecionado na se√ß√£o Matem√°tica do PID. </font><font style="vertical-align: inherit;">Este √© o receptor no modo LuxFloat da Cleanflight e √© recomend√°vel instal√°-lo apenas para PCs com processadores F3 ou F4.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MEDI√á√ÉO selecionada na se√ß√£o "M√©todo derivativo". </font><font style="vertical-align: inherit;">Em resumo, MEASUREMENT √© preferido para o estilo livre e ERROR para corridas.</font></font></li>
</ul><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia Modos</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desliguei os motores e o Blackbox (AUX1) nos interruptores, ativei o modo de v√¥o Horizon (AUX2) e liguei o tweeter (AUX3). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tamb√©m gostaria de dizer sobre o AIRMODE. </font><font style="vertical-align: inherit;">Inicialmente, era um recurso exclusivo do Betaflight, mas em algum momento se tornou t√£o popular que o Boris B compartilhou com os autores do Cleanflight e agora esse modo tamb√©m est√° dispon√≠vel l√°.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar do AIRMODE ser exibido como um modo de voo separado - essa √© mais uma op√ß√£o adicional, e n√£o um modo completo. Ele permite que o quadroc√≥ptero mantenha um determinado √¢ngulo, mesmo com o m√≠nimo de g√°s. Por isso, n√£o √© recomend√°vel usar o AIRMODE junto com os modos de estabiliza√ß√£o. Al√©m disso, pousar com o AIRMODE tamb√©m √© um processo dif√≠cil: o quadroc√≥ptero come√ßa a pular como um sapo. Pilotos experientes preferem simplesmente ‚Äúsoltar‚Äù o quadroc√≥ptero, desligando os motores algumas dezenas de cent√≠metros acima do solo. A prop√≥sito, se voc√™ tiver o motor parado com g√°s zero (a op√ß√£o MOTOR_STOP na guia Configura√ß√£o) e o AIRMODE estiver funcionando ao mesmo tempo, n√£o haver√° parada do motor, pois o AIRMODE tem uma prioridade mais alta.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vers√£o 2.8.1 do Betaflight possui um novo recurso: voc√™ pode ativar o AIRMODE em segundo plano (algo como uma vantagem passiva nos jogos) e, em seguida, ele estar√° sempre ativo e n√£o aparecer√° na guia Modos ou, como antes, desligue-o. qualquer canal. </font><font style="vertical-align: inherit;">Isso √© feito na guia "Outros recursos" da configura√ß√£o. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na minha casa, n√£o liguei o AIRMODE em segundo plano, pois tamb√©m estou usando o modo de estabiliza√ß√£o HORIZON. </font><font style="vertical-align: inherit;">Portanto, tenho dois modos de voo no AUX1: HORIZON (para voos com estabiliza√ß√£o e aterrissagem) e ACRO + AIRMODE.</font></font><br>
<br>
<img src="https://habrastorage.org/files/054/7c0/af8/0547c0af8bfb4269947b59362f80f433.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia Faixa de LED</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Defino minha luz de fundo para exibir avisos, indicadores de virar / freio e brilhar em azul quando nada disso existir.</font></font><br>
<br>
<img src="https://habrastorage.org/files/f05/cd4/6de/f05cd46de9dc4a948c6b4eae3537f037.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guia Blackbox</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blackbox √© uma "caixa preta" de um quadrocopter. </font><font style="vertical-align: inherit;">√â necess√°rio que diagn√≥sticos, configura√ß√µes PID mais precisas e que infogr√°ficos sejam aplicados ao v√≠deo de voo (como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Os dados s√£o gravados em um registrador externo ou, se a quantidade de mem√≥ria permitir, na mem√≥ria interna do PC. </font><font style="vertical-align: inherit;">Por exemplo, o Naze32 Acro n√£o possui, enquanto o Naze32 Deluxe e o SPRacingF3 Acro t√™m o suficiente, embora n√£o muito. </font><font style="vertical-align: inherit;">Nas configura√ß√µes padr√£o, os dados de voo com dura√ß√£o de 3 a 4 minutos podem ser gravados em 2 MB de mem√≥ria, o que √© muito pequeno. </font><font style="vertical-align: inherit;">A situa√ß√£o √© agravada pelo fato de ser imposs√≠vel implementar a grava√ß√£o ‚Äúem c√≠rculo‚Äù, como nos gravadores de autom√≥veis, devido √† baixa velocidade da mem√≥ria de leitura / grava√ß√£o. </font><font style="vertical-align: inherit;">A √∫nica op√ß√£o √© reduzir a velocidade de grava√ß√£o v√°rias vezes. </font><font style="vertical-align: inherit;">Para o diagn√≥stico, esses dados j√° ser√£o de pouca utilidade, mas para o v√≠deo - √© isso. </font><font style="vertical-align: inherit;">Nesta guia, fiz o seguinte:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu escolhi gravar na mem√≥ria interna (op√ß√£o "Chip de fluxo de dados integrado") na se√ß√£o "Dispositivo de registro de caixa preta".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na se√ß√£o ‚ÄúParte das itera√ß√µes do loop de v√¥o para registrar‚Äù, escolhi 50%, o que reduz essencialmente a velocidade de grava√ß√£o pela metade.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/ac9/adf/181/ac9adf181c9440c5a830e43c3fdc588a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como escrevi acima, o registro √© iniciado pelo mesmo interruptor no hardware que a blindagem, para que a grava√ß√£o comece no in√≠cio dos motores. </font><font style="vertical-align: inherit;">Voc√™ pode ler mais sobre a opera√ß√£o e as configura√ß√µes do Blackbox no </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tamb√©m alguns links relacionados √∫teis:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artigo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setup Blackbox em Cleanflight</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tradu√ß√£o do artigo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Sobreposi√ß√£o de dados do Blackbox no v√≠deo"</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tradu√ß√£o do artigo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúFundamentos da configura√ß√£o do controlador PID usando logs do Blackbox‚Äû</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o da caixa preta e uso de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">v√≠deo</font></a></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Blackbox Explorer</a>   </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Blackbox tools</a>    . ,    png</li>
</ul><br>
<br>
<h5> CLI</h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A CLI √© um console por meio do qual voc√™ pode alterar configura√ß√µes mais avan√ßadas e fazer uma c√≥pia de backup de todas as configura√ß√µes. </font><font style="vertical-align: inherit;">Fiz o seguinte: O </font><font style="vertical-align: inherit;">
Betaflight tamb√©m possui uma capacidade muito √∫til para conectar-se ao OSD via PC. </font><font style="vertical-align: inherit;">Agora voc√™ pode esconder esse cachecol sem se preocupar com a necessidade de se conectar a ele. </font><font style="vertical-align: inherit;">Para conectar-se √† placa OSD atrav√©s de um PC, voc√™ precisa conectar a bateria ao quadcopter, digite </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;">serialpassthrough</font></i></a><font style="vertical-align: inherit;"> na CLI </font><font style="vertical-align: inherit;">com os par√¢metros necess√°rios, depois desconecte (Disconnect) Betaflight do PC e inicie o MWOSD. </font><font style="vertical-align: inherit;">Eu fiz isso pela primeira vez. </font><font style="vertical-align: inherit;">Quanto aos par√¢metros, ent√£o, para o Micro MinimOSD conectado ao UART2 (meu caso), s√£o os seguintes: </font><font style="vertical-align: inherit;">
Isso completa a configura√ß√£o do controlador de v√¥o.</font></font><br>
<br>
<code>set small_angle = 180 #        <br>
set vbat_pid_compensation = ON #   PID   <br>
save #  <br>
</code><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"></font></i></a><font style="vertical-align: inherit;"></font><br>
<br>
<code>serialpassthrough 1 115200<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o do transmissor</font></font></h4><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada piloto configura um transmissor (tamb√©m conhecido como "remoto") individualmente: temporizadores, mixagens, notifica√ß√µes por voz e muito mais. A √∫nica coisa que √© extremamente desej√°vel √© verificar os valores m√≠nimo, m√©dio e m√°ximo dos man√≠pulos de controle no configurador. Isso √© feito na guia Receptor. Os valores ideais s√£o 1000 - 1500 - 2000. No meu caso, eram 996 - 1508 - 2020, o que n√£o √© muito bom. Em primeiro lugar, "cair fora" da faixa (valores menores que 1000 e maiores que 2000) √© ruim em si. Em segundo lugar, a posi√ß√£o central, diferente de 1500, ser√° percebida pelo PC como um t√°xi f√°cil, o que funcionar√° e o quadroc√≥ptero ser√° constantemente demolido em alguma dire√ß√£o. Em uma palavra, faz sentido mexer e configurar "como deveria". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como definir esses valores no transmissor Taranis √© mostrado.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Eu tenho o Turnigy 9XR PRO, l√° √© feito em limites. Voc√™ tamb√©m pode configurar atrav√©s do programa eePskye (guia Limites), mas isso √© inconveniente, pois o resultado n√£o √© imediatamente vis√≠vel no Betaflight Configurator. Isso deve ser feito para cada um dos quatro canais de controle. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o ajuste, os valores centrais foram o mais pr√≥ximo poss√≠vel de 1500, mas comigo come√ßaram a "pular" em cerca de 5 unidades em uma ou outra dire√ß√£o. N√£o sei com o que isso est√° conectado, provavelmente os valores do controle remoto s√£o limitados para o PC e, ap√≥s o arredondamento, esse efeito √© obtido. Para resolver esse problema, o Betaflight (e o CleanFlight tamb√©m) possui um comando especial que configura a filtragem de tais coisas.</font></font><br>
<br>
<code>set deadband = 6<br>
</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O valor pode ser de 0 a 32 e, com seu aumento, a sensibilidade do controle diminui. </font><font style="vertical-align: inherit;">A gest√£o se torna mais suave. </font><font style="vertical-align: inherit;">Deve-se entender que, depois de um certo limiar, a suavidade se transformar√° em algod√£o, ent√£o, para mim, escolhi o valor m√≠nimo no qual as contra√ß√µes desapareceram. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© tudo, bons v√¥os!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt395487/">https://habr.com/ru/post/pt395487/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt395475/index.html">Cubo RGB LED 4x4x4 para visualiza√ß√£o de m√∫sica</a></li>
<li><a href="../pt395477/index.html">Projeto "Olho". O fim</a></li>
<li><a href="../pt395479/index.html">Dispositivos VR s√£o mais ben√©ficos para os olhos do que telas comuns</a></li>
<li><a href="../pt395481/index.html">Anel inteligente Nimb do cofundador KermlinRussia apareceu no Kickstarter</a></li>
<li><a href="../pt395485/index.html">Os cientistas anunciaram o lan√ßamento do projeto HGP-write, cujo objetivo final √© criar um genoma humano sint√©tico completo</a></li>
<li><a href="../pt395489/index.html">Uma startup da Ucr√¢nia prop√¥s o carregamento sem fio que pode carregar at√© 8 iPhone simultaneamente em um raio de 10 metros</a></li>
<li><a href="../pt395491/index.html">Penaudio: Verdadeiro som finland√™s</a></li>
<li><a href="../pt395493/index.html">–ö 2035 –≥–æ–¥—É –≤ –†–æ—Å—Å–∏–∏ –±—É–¥–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–≤–∞–Ω—Ç–æ–≤–∞—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è</a></li>
<li><a href="../pt395495/index.html">Tecnofascismo - o futuro da humanidade? (n√£o pol√≠tica)</a></li>
<li><a href="../pt395497/index.html">Computadores lend√°rios da hist√≥ria</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>