<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ­ ğŸ° ğŸš§ ç”¨Observableå’ŒReact Hooksæ›¿æ¢Redux ğŸ–¼ï¸ ğŸ“½ï¸ ğŸ‘¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="çŠ¶æ€ç®¡ç†æ˜¯Reactå¼€å‘ä¸­è§£å†³çš„æœ€é‡è¦çš„ä»»åŠ¡ä¹‹ä¸€ã€‚ å·²ç»åˆ›å»ºäº†è®¸å¤šå·¥å…·æ¥å¸®åŠ©å¼€å‘äººå‘˜è§£å†³æ­¤é—®é¢˜ã€‚ æœ€å—æ¬¢è¿çš„å·¥å…·æ˜¯Reduxï¼Œè¿™æ˜¯ç”±Dan Abramovåˆ›å»ºçš„ä¸€ä¸ªå°å‹åº“ï¼Œå¯å¸®åŠ©å¼€å‘äººå‘˜åœ¨å…¶åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Fluxè®¾è®¡æ¨¡å¼ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£æˆ‘ä»¬æ˜¯å¦çœŸçš„éœ€è¦Reduxï¼Œå¹¶äº†è§£å¦‚ä½•ç”¨åŸºäºObserv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç”¨Observableå’ŒReact Hooksæ›¿æ¢Redux</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484952/"><p><img align="right" src="https://habrastorage.org/webt/fo/2d/t7/fo2dt7_8xrgtb3goulj7cwpxrpg.png"> çŠ¶æ€ç®¡ç†æ˜¯Reactå¼€å‘ä¸­è§£å†³çš„æœ€é‡è¦çš„ä»»åŠ¡ä¹‹ä¸€ã€‚ å·²ç»åˆ›å»ºäº†è®¸å¤šå·¥å…·æ¥å¸®åŠ©å¼€å‘äººå‘˜è§£å†³æ­¤é—®é¢˜ã€‚ æœ€å—æ¬¢è¿çš„å·¥å…·æ˜¯Reduxï¼Œè¿™æ˜¯ç”±Dan Abramovåˆ›å»ºçš„ä¸€ä¸ªå°å‹åº“ï¼Œå¯å¸®åŠ©å¼€å‘äººå‘˜åœ¨å…¶åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Fluxè®¾è®¡æ¨¡å¼ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£æˆ‘ä»¬æ˜¯å¦çœŸçš„éœ€è¦Reduxï¼Œå¹¶äº†è§£å¦‚ä½•ç”¨åŸºäºObservableå’ŒReact Hooksçš„æ›´ç®€å•æ–¹æ³•æ›¿æ¢å®ƒã€‚ </p><a name="habracut"></a><br><h1 id="zachem-nam-voobsche-nuzhen-redux"> ä¸ºä»€ä¹ˆæˆ‘ä»¬å®Œå…¨éœ€è¦Reduxï¼Ÿ </h1><br><p> Reduxä¸Reactç»å¸¸è”ç³»åœ¨ä¸€èµ·ï¼Œä»¥è‡³äºè®¸å¤šå¼€å‘äººå‘˜åœ¨æ²¡æœ‰è€ƒè™‘ä¸ºä»€ä¹ˆéœ€è¦Reduxçš„æƒ…å†µä¸‹ä½¿ç”¨å®ƒã€‚ é€šè¿‡Reactï¼Œå¯ä»¥è½»æ¾åœ°å°†ç»„ä»¶åŠå…¶çŠ¶æ€ä¸<code>setState()</code> / <code>useState()</code>è¿›è¡ŒåŒæ­¥ã€‚ ä½†æ˜¯ï¼Œä¸€æ—¦çŠ¶æ€è¢«å¤šä¸ªç»„ä»¶åŒæ—¶ä½¿ç”¨ï¼Œä¸€åˆ‡å°±ä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚ åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«å…¬å…±çŠ¶æ€çš„æœ€æ˜æ˜¾è§£å†³æ–¹æ¡ˆæ˜¯å°†å…¶ï¼ˆçŠ¶æ€ï¼‰ç§»åŠ¨åˆ°å…¶å…¬å…±çˆ¶çº§ã€‚ ä½†æ˜¯ï¼Œè¿™ç§â€œç›´æ¥â€è§£å†³æ–¹æ¡ˆä¼šå¾ˆå¿«å¯¼è‡´å›°éš¾ï¼šå¦‚æœç»„ä»¶åœ¨ç»„ä»¶å±‚æ¬¡ç»“æ„ä¸­å½¼æ­¤è¿œç¦»ï¼Œåˆ™æ›´æ–°ä¸€èˆ¬çŠ¶æ€å°†éœ€è¦å¤§é‡æ»šåŠ¨ç»„ä»¶çš„å±æ€§ã€‚  React Contextå¯ä»¥å¸®åŠ©å‡å°‘æº¢å‡ºçš„æ¬¡æ•°ï¼Œä½†æ˜¯æ¯æ¬¡çŠ¶æ€å¼€å§‹ä¸å¦ä¸€ä¸ªç»„ä»¶ä¸€èµ·ä½¿ç”¨æ—¶å£°æ˜ä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡å°†éœ€è¦æ›´å¤šçš„åŠªåŠ›ï¼Œå¹¶æœ€ç»ˆå¯èƒ½å¯¼è‡´é”™è¯¯ã€‚ </p><br><p>  Reduxé€šè¿‡å¼•å…¥ä¸€ä¸ª<code>Store</code>å¯¹è±¡è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œè¯¥å¯¹è±¡åŒ…å«åº”ç”¨ç¨‹åºçš„æ•´ä¸ªçŠ¶æ€ã€‚ åœ¨éœ€è¦è®¿é—®çŠ¶æ€çš„ç»„ä»¶ä¸­ï¼Œæ­¤<code>Store</code>æ˜¯ä½¿ç”¨<code>connect</code>å‡½æ•°å®ç°çš„ã€‚ æ­¤åŠŸèƒ½è¿˜ç¡®ä¿çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¾èµ–äºè¯¥çŠ¶æ€çš„æ‰€æœ‰ç»„ä»¶éƒ½å°†è¢«é‡ç»˜ã€‚ æœ€åï¼Œä¸ºäº†æ›´æ”¹çŠ¶æ€ï¼Œç»„ä»¶å¿…é¡»å‘é€è§¦å‘reducerçš„æ“ä½œä»¥è®¡ç®—æ–°çš„æ›´æ”¹çŠ¶æ€ã€‚ </p><br><img src="https://habrastorage.org/getpro/habr/post_images/b6f/531/9dc/b6f5319dc6eb751b9a18482cb7863f8d.gif"><br><p>  <em>å½“æˆ‘ç¬¬ä¸€æ¬¡äº†è§£Reduxçš„æ¦‚å¿µæ—¶</em> </p><br><h1 id="chto-ne-tak-s-redux">  Reduxæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ </h1><br><p> ç¬¬ä¸€æ¬¡é˜…è¯»æ­£å¼çš„<a href="https://redux.js.org/basics/basic-tutorial/" rel="nofollow">Reduxæ•™ç¨‹æ—¶</a> ï¼Œæˆ‘ä¸ºæ›´æ”¹çŠ¶æ€è€Œä¸å¾—ä¸ç¼–å†™å¤§é‡ä»£ç è€Œæ„Ÿåˆ°éœ‡æƒŠã€‚ æ›´æ”¹çŠ¶æ€éœ€è¦å£°æ˜ä¸€ä¸ªæ–°åŠ¨ä½œï¼Œå®ç°ç›¸åº”çš„reducerï¼Œæœ€åå‘é€è¯¥åŠ¨ä½œã€‚  Reduxè¿˜é¼“åŠ±<a href="https://redux.js.org/basics/actions/" rel="nofollow">ç¼–å†™åŠ¨ä½œåˆ›å»ºè€…</a> ï¼Œä½¿æ‚¨æ¯æ¬¡æäº¤åŠ¨ä½œæ—¶éƒ½å¯ä»¥è½»æ¾åˆ›å»ºåŠ¨ä½œã€‚ </p><br><p> é€šè¿‡æ‰€æœ‰è¿™äº›æ­¥éª¤ï¼ŒReduxä½¿ä»£ç ç†è§£ï¼Œé‡æ„å’Œè°ƒè¯•å˜å¾—å¤æ‚ã€‚ é˜…è¯»å…¶ä»–äººç¼–å†™çš„ä»£ç æ—¶ï¼Œé€šå¸¸å¾ˆéš¾å¼„æ¸…æ¥šæäº¤åŠ¨ä½œåä¼šå‘ç”Ÿä»€ä¹ˆã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»æ·±å…¥ç ”ç©¶åŠ¨ä½œåˆ›å»ºè€…ä»£ç ï¼Œä»¥æ‰¾åˆ°é€‚å½“çš„åŠ¨ä½œç±»å‹ï¼Œç„¶åæ‰¾åˆ°å¤„ç†æ­¤ç±»åŠ¨ä½œçš„å‡é€Ÿå™¨ã€‚ å¦‚æœä½¿ç”¨æŸäº›ä¸­é—´ä»¶ï¼Œä¾‹å¦‚redux-sagaï¼Œäº‹æƒ…å¯èƒ½ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œè¿™ä½¿å¾—è§£å†³æ–¹æ¡ˆä¸Šä¸‹æ–‡æ›´åŠ éšå«ã€‚ </p><br><p> æœ€åï¼Œå½“ä½¿ç”¨TypeScriptæ—¶ï¼ŒReduxå¯èƒ½ä»¤äººå¤±æœ›ã€‚ æŒ‰ç…§è®¾è®¡ï¼ŒåŠ¨ä½œåªæ˜¯ä¸å…¶ä»–å‚æ•°å…³è”çš„å­—ç¬¦ä¸²ã€‚ æœ‰å¤šç§æ–¹æ³•å¯ä»¥ä½¿ç”¨TypeScriptç¼–å†™ç±»å‹è‰¯å¥½çš„Reduxä»£ç ï¼Œä½†å®ƒå¯èƒ½éå¸¸ç¹çï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´æˆ‘ä»¬ä¸å¾—ä¸ç¼–å†™çš„ä»£ç æ•°é‡å¢åŠ ã€‚ </p><br><img src="https://habrastorage.org/getpro/habr/post_images/b0e/9ff/261/b0e9ff26168370d91b5433ad8b1ae4fe.gif"><br><p>  <em>ç”¨Reduxç¼–å†™çš„å­¦ä¹ ä»£ç çš„å¿«æ„Ÿ</em> </p><br><h1 id="observable-i-hook-prostoy-podhod-k-upravleniyu-sostoyaniem"> å¯è§‚å¯Ÿå’Œé’©ä½ï¼šä¸€ç§ç®¡ç†çŠ¶æ€çš„ç®€å•æ–¹æ³•ã€‚ </h1><br><h3 id="zamenyaem-store-c-pomoschyu-observable"> ç”¨å¯è§‚å¯Ÿçš„æ›¿æ¢å•†åº— </h3><br><p> ä¸ºäº†ä»¥ä¸€ç§æ›´ç®€å•çš„æ–¹å¼è§£å†³çŠ¶æ€å…±äº«çš„é—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ‰¾åˆ°ä¸€ç§åœ¨å…¶ä»–ç»„ä»¶æ›´æ”¹å…¶ä¸€èˆ¬çŠ¶æ€æ—¶é€šçŸ¥ç»„ä»¶çš„æ–¹æ³•ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>Observable</code>ç±»ï¼Œè¯¥ç±»åŒ…å«ä¸€ä¸ªå€¼ï¼Œå¹¶å…è®¸ç»„ä»¶é¢„è®¢å¯¹è¯¥å€¼çš„æ›´æ”¹ã€‚  subscriptionæ–¹æ³•å°†è¿”å›ä¸ºäº†ä»<code>Observable</code>é€€è®¢å¿…é¡»è°ƒç”¨çš„å‡½æ•°ã€‚ </p><br><p> åœ¨TypeScriptä¸Šï¼Œå®ç°è¿™æ ·çš„ç±»éå¸¸ç®€å•ï¼š </p><br><pre> <code class="javascript hljs">type Listener&lt;T&gt; = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val: T</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>; type Unsubscriber = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ private _listeners: Listener&lt;T&gt;[]; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private _val: T) {} get(): T { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val; } set(val: T) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val !== val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._listeners.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l</span></span></span><span class="hljs-function"> =&gt;</span></span> l(val)); } } subscribe(listener: Listener&lt;T&gt;): Unsubscriber { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._listeners.push(listener); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._listeners = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._listeners.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l</span></span></span><span class="hljs-function"> =&gt;</span></span> l !== listener); }; } }</code> </pre> <br><p> å¦‚æœå°†æ­¤ç±»ä¸Redux <code>Store</code>è¿›è¡Œæ¯”è¾ƒï¼Œæ‚¨ä¼šå‘ç°å®ƒä»¬éå¸¸ç›¸ä¼¼ï¼š <code>get()</code>å¯¹åº”äº<code>getState()</code> ï¼Œ <code>subscribe()</code>ç›¸åŒã€‚ ä¸»è¦åŒºåˆ«æ˜¯<code>dispatch()</code>æ–¹æ³•ï¼Œå·²ç”±æ›´ç®€å•çš„<code>set()</code>æ–¹æ³•ä»£æ›¿ï¼Œè¯¥æ–¹æ³•ä½¿æ‚¨æ— éœ€ä¾èµ–reducerå³å¯æ›´æ”¹å…¶ä¸­åŒ…å«çš„å€¼ã€‚ ä¸Reduxç›¸æ¯”ï¼Œå¦ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¤§é‡çš„<code>Observable</code>è€Œä¸æ˜¯åŒ…å«æ‰€æœ‰çŠ¶æ€çš„å•ä¸ª<code>Store</code> ã€‚ </p><br><h3 id="zamenyaem-reducer-servisami"> æ›´æ¢å‡é€ŸæœºæœåŠ¡ </h3><br><p> ç°åœ¨å¯ä»¥å°†<code>Observable</code>ç”¨æ¥å­˜å‚¨ä¸€èˆ¬çŠ¶æ€ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶éœ€è¦ç§»åŠ¨åŒ–ç®€å™¨ä¸­åŒ…å«çš„é€»è¾‘ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨æœåŠ¡çš„æ¦‚å¿µã€‚ æœåŠ¡æ˜¯å®ç°æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æ•´ä¸ªä¸šåŠ¡é€»è¾‘çš„ç±»ã€‚ è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨<code>Observable</code>å°†Reduceæ•™ç¨‹ä¸­çš„reducer <code>Todo</code>é‡å†™ä¸º<code>Todo</code>æœåŠ¡ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./observable"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface Todo { readonly text: string; readonly completed: boolean; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> enum VisibilityFilter { SHOW_ALL, SHOW_COMPLETED, SHOW_ACTIVE, } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoService</span></span></span><span class="hljs-class"> </span></span>{ readonly todos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Observable&lt;Todo[]&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">readonly</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">visibilityFilter</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Observable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">VisibilityFilter.SHOW_ALL</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">addTodo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text: string</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todos</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[...</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.todos.get(</span></span></span><span class="hljs-function">), { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">completed</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">false</span></span></span><span class="hljs-function"> }]); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">toggleTodo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">index: number</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todos</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.todos.get(</span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> (todo, i</span></span></span><span class="hljs-function">) =&gt;</span></span> (i === index ? { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: todo.text, <span class="hljs-attr"><span class="hljs-attr">completed</span></span>: !todo.completed } : todo) )); } setVisibilityFilter(filter: VisibilityFilter) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.visibilityFilter.set(filter); } }</code> </pre> <br><p> ä¸reducer <code>Todo</code>è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ä»¥ä¸‹å·®å¼‚ï¼š </p><br><ul><li> åŠ¨ä½œè¢«æ–¹æ³•æ›¿æ¢ï¼Œä»è€Œæ— éœ€å£°æ˜åŠ¨ä½œç±»å‹ï¼ŒåŠ¨ä½œæœ¬èº«å’ŒåŠ¨ä½œåˆ›å»ºè€…ã€‚ </li><li> æ‚¨ä¸å†éœ€è¦ç¼–å†™å¤§å‹å¼€å…³æ¥åœ¨æ“ä½œç±»å‹ä¹‹é—´è¿›è¡Œè·¯ç”±ã€‚ åŠ¨æ€Javascriptåˆ†é…ï¼ˆå³æ–¹æ³•è°ƒç”¨ï¼‰å¯ä»¥è§£å†³æ­¤é—®é¢˜ã€‚ </li><li> æœ€é‡è¦çš„æ˜¯ï¼ŒæœåŠ¡åŒ…å«å¹¶æ›´æ”¹å…¶ç®¡ç†çš„çŠ¶æ€ã€‚ ä¸çº¯å‡½æ•°çš„åŒ–ç®€å™¨ç›¸æ¯”ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ¦‚å¿µå·®å¼‚ã€‚ </li></ul><br><h2 id="dostup-k-servisam-i-observable-iz-komponentov"> è®¿é—®æœåŠ¡å¹¶å¯ä»¥ä»ç»„ä»¶ä¸­è§‚å¯Ÿ </h2><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å·²å°†â€œæ¥è‡ªReduxçš„å­˜å‚¨å’Œç¼©å‡å™¨â€æ›¿æ¢ä¸ºâ€œå¯è§‚å¯Ÿå’ŒæœåŠ¡â€ï¼Œæˆ‘ä»¬éœ€è¦ä½¿æ‰€æœ‰Reactç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›æœåŠ¡ã€‚ æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IoCæ¡†æ¶ï¼Œä¾‹å¦‚Inversifyï¼› ä½¿ç”¨Reactä¸Šä¸‹æ–‡æˆ–ä½¿ç”¨ä¸<code>Store</code> Reduxä¸­ç›¸åŒçš„æ–¹æ³•-æ¯ä¸ªæœåŠ¡ä¸€ä¸ªå…¨å±€å®ä¾‹ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è€ƒè™‘æœ€åä¸€ç§æ–¹æ³•ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { TodoService } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./todoService"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todoService = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TodoService();</code> </pre> <br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¼å…¥<code>todoService</code>å®ä¾‹æ¥è®¿é—®å…±äº«çŠ¶æ€å¹¶ä»æ‰€æœ‰Reactç»„ä»¶ä¸­æ›´æ”¹å®ƒã€‚ ä½†æ˜¯ï¼Œå½“ä¸€èˆ¬çŠ¶æ€è¢«å¦ä¸€ä¸ªç»„ä»¶æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥é‡ç»˜æˆ‘ä»¬çš„ç»„ä»¶ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç®€å•çš„é’©å­ï¼Œè¯¥é’©å­å°†çŠ¶æ€å˜é‡æ·»åŠ åˆ°ç»„ä»¶ï¼Œè®¢é˜…<code>Observable</code>å¹¶åœ¨<code>Observable</code>å€¼æ›´æ”¹æ—¶æ›´æ–°çŠ¶æ€å˜é‡ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useEffect, useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./observable"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">useObservable</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">observable: Observable&lt;T&gt;</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [val, setVal] = useState(observable.get()); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { setVal(observable.get()); <span class="hljs-comment"><span class="hljs-comment">//   @mayorovp return observable.subscribe(setVal); }, [observable]); return val; }</span></span></code> </pre> <br><h1 id="sobiraem-vse-vmeste"> å…¨éƒ¨æ”¾åœ¨ä¸€èµ· </h1><br><p> æˆ‘ä»¬çš„å·¥å…·åŒ…å·²å‡†å¤‡å°±ç»ªã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Observable</code>åœ¨æœåŠ¡ä¸­å­˜å‚¨ä¸€èˆ¬çŠ¶æ€ï¼Œå¹¶ä½¿ç”¨<code>useObservable</code>æ¥ç¡®ä¿ç»„ä»¶å§‹ç»ˆä¸æ­¤çŠ¶æ€ä¿æŒåŒæ­¥ã€‚ </p><br><p> è®©æˆ‘ä»¬ä½¿ç”¨æ–°çš„é’©å­ä»Reduxæ•™ç¨‹é‡å†™TodoListç»„ä»¶ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useObservable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./observableHook"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { todoService } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./services"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Todo, VisibilityFilter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./todoService"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TodoList = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todos = useObservable(todoService.todos); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> filter = useObservable(todoService.visibilityFilter); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> visibleTodos = getVisibleTodos(todos, filter); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div&gt; &lt;ul&gt; {visibleTodos.map((todo, index</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TodoItem</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{index}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">todo</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{todo}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{index}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> ))} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;p&gt; Show: <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FilterLink</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">filter</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{VisibilityFilter.SHOW_ALL}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">All</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FilterLink</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, &lt;FilterLink filter={VisibilityFilter.SHOW_ACTIVE}&gt;Active&lt;<span class="hljs-regexp"><span class="hljs-regexp">/FilterLink&gt;, &lt;FilterLink filter={VisibilityFilter.SHOW_ALL}&gt;Completed&lt;/</span></span>FilterLink&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; ); }; const TodoItem = ({ todo: { text, completed }, index }: { todo: Todo; index: number }) =&gt; { return ( &lt;li style={{ textDecoration: completed ? "line-through" : "none", }} onClick={() =&gt; todoService.toggleTodo(index)} &gt; {text} &lt;/</span></span>li&gt; ); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FilterLink = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ filter, children }: { filter: VisibilityFilter; children: React.ReactNode }</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> activeFilter = useObservable(todoService.visibilityFilter); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> active = filter === activeFilter; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> active ? <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;span&gt;{children}&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/span&gt; ) : ( &lt;a href="" onClick={() =&gt; todoService.setVisibilityFilter(filter)}&gt; {children} &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">a&gt; </span></span></span><span class="hljs-function">); }; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getVisibleTodos</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todos: Todo[], filter: VisibilityFilter</span></span></span><span class="hljs-function">): </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Todo</span></span></span><span class="hljs-function">[] { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">switch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">filter</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">case</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">VisibilityFilter</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SHOW_ALL</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todos</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">case</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">VisibilityFilter</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SHOW_COMPLETED</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todos</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">filter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t =&gt; t.completed</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">case</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">VisibilityFilter</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SHOW_ACTIVE</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todos</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">filter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t =&gt; !t.completed</span></span></span><span class="hljs-function">); } }</span></span></code> </pre> <br><p> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œæˆ‘ä»¬å·²ç»ç¼–å†™äº†ä¸€äº›å¼•ç”¨å¸¸è§„çŠ¶æ€å€¼çš„ç»„ä»¶ï¼ˆ <code>todos</code>å’Œ<code>todos</code> ï¼‰ã€‚ åªéœ€é€šè¿‡ä»<code>todoService</code>è°ƒç”¨æ–¹æ³•å³å¯æ›´æ”¹è¿™äº›å€¼ã€‚ ç”±äºé’©å­useObservableå¯ä»¥è®¢é˜…å€¼æ›´æ”¹ï¼Œå› æ­¤åœ¨å¸¸è§„çŠ¶æ€æ›´æ”¹æ—¶ä¼šè‡ªåŠ¨é‡ç»˜è¿™äº›ç»„ä»¶ã€‚ </p><br><h1 id="vyvod"> ç»“è®º </h1><br><p> å¦‚æœå°†æ­¤ä»£ç ä¸Reduxæ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å‡ ä¸ªä¼˜ç‚¹ï¼š </p><br><ul><li>  <strong>ç®€æ´ï¼š</strong>æˆ‘ä»¬å”¯ä¸€è¦åšçš„å°±æ˜¯å°†çŠ¶æ€å€¼åŒ…è£…åœ¨<code>Observable</code>å¹¶åœ¨ä»ç»„ä»¶è®¿é—®è¿™äº›å€¼æ—¶ä½¿ç”¨é’©å­<code>useObservable</code> ã€‚ æ— éœ€å£°æ˜åŠ¨ä½œï¼ŒåŠ¨ä½œåˆ›å»ºè€…ï¼Œç¼–å†™æˆ–ç»„åˆreduceræˆ–ä½¿ç”¨<code>mapStateToProps</code>å’Œ<code>mapDispatchToProps</code>å°†æˆ‘ä»¬çš„ç»„ä»¶è¿æ¥åˆ°å­˜å‚¨åº“ã€‚ </li><li> ç®€ä¾¿<strong>æ€§ï¼š</strong>ç°åœ¨ï¼Œè·Ÿè¸ªä»£ç æ‰§è¡Œæ›´åŠ å®¹æ˜“ã€‚ äº†è§£æŒ‰ä¸‹æŒ‰é’®æ—¶å®é™…å‘ç”Ÿçš„äº‹æƒ…åªæ˜¯åˆ‡æ¢åˆ°è¢«è°ƒç”¨æ–¹æ³•çš„å®ç°ã€‚ ä½¿ç”¨è°ƒè¯•å™¨çš„é€æ­¥æ‰§è¡Œä¹Ÿå¾—åˆ°äº†æ˜¾ç€æ”¹å–„ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç»„ä»¶å’ŒæœåŠ¡ä¹‹é—´æ²¡æœ‰ä¸­é—´å±‚ã€‚ </li><li>  <strong>å¼€ç®±å³ç”¨çš„ç±»å‹å®‰å…¨æ€§ï¼š</strong> TypeScriptå¼€å‘äººå‘˜ä¸éœ€è¦å…¶ä»–å·¥ä½œå³å¯æ­£ç¡®é”®å…¥ä»£ç ã€‚ æ— éœ€ä¸ºçŠ¶æ€å’Œæ¯ä¸ªåŠ¨ä½œå£°æ˜ç±»å‹ã€‚ </li><li>  <strong>æ”¯æŒå¼‚æ­¥/ç­‰å¾…ï¼š</strong>å°½ç®¡æ­¤å¤„æœªè¿›è¡Œæ¼”ç¤ºï¼Œä½†æ­¤è§£å†³æ–¹æ¡ˆå¯ä¸å¼‚æ­¥åŠŸèƒ½é…åˆä½¿ç”¨ï¼Œæå¤§åœ°ç®€åŒ–äº†å¼‚æ­¥ç¼–ç¨‹ã€‚ æ— éœ€ä¾èµ–ä¸­é—´ä»¶ï¼Œä¾‹å¦‚redux-thunkï¼Œè¿™éœ€è¦å¯¹åŠŸèƒ½ç¼–ç¨‹çš„æ·±å…¥äº†è§£æ‰èƒ½ç†è§£ã€‚ </li></ul><br><p> å½“ç„¶ï¼ŒReduxä»ç„¶å…·æœ‰ä¸€äº›é‡è¦çš„ä¼˜åŠ¿ï¼Œç‰¹åˆ«æ˜¯Redux DevToolsï¼Œå®ƒä½¿å¼€å‘äººå‘˜å¯ä»¥ç›‘è§†å¼€å‘æœŸé—´çš„çŠ¶æ€å˜åŒ–å¹¶åŠæ—¶ç§»è‡³è¿‡å»çš„åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œè¿™å¯ä»¥æ˜¯è°ƒè¯•çš„ç»ä½³å·¥å…·ã€‚ ä½†æ˜¯æ ¹æ®æˆ‘çš„ç»éªŒï¼Œæˆ‘å¾ˆå°‘ä½¿ç”¨å®ƒï¼Œä»˜å‡ºçš„ä»£ä»·ä¼¼ä¹å¤ªé«˜äº†ï¼Œä»¥è‡³äºæ— æ³•è·å¾—å°å¹…æ”¶ç›Šã€‚ </p><br><p> åœ¨æˆ‘ä»¬æ‰€æœ‰çš„Reactå’ŒReact Nativeåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬éƒ½æˆåŠŸåœ°ä½¿ç”¨äº†ä¸æœ¬æ–‡æ‰€è¿°ç±»ä¼¼çš„æ–¹æ³•ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬ä»æ¥æ²¡æœ‰è§‰å¾—éœ€è¦æ¯”è¿™æ›´å¤æ‚çš„çŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚ </p><br><h1 id="primechaniya"> æ³¨æ„äº‹é¡¹ </h1><br><p> è¿™ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„<code>Observable</code>ç±»éå¸¸ç®€å•ã€‚ å¯ä»¥ç”¨æ›´é«˜çº§çš„å®ç°æ–¹å¼æ¥ä»£æ›¿å®ƒï¼Œä¾‹å¦‚å¾®è§‚å¯Ÿè€…ï¼ˆæˆ‘ä»¬è‡ªå·±çš„åº“ï¼‰æˆ–RxJSã€‚ </p><br><p> è¿™é‡Œä»‹ç»çš„è§£å†³æ–¹æ¡ˆä¸MobXå¯ä»¥å®ç°çš„è§£å†³æ–¹æ¡ˆéå¸¸ç›¸ä¼¼ã€‚ ä¸»è¦åŒºåˆ«åœ¨äºMobXæ”¯æŒå¯¹è±¡çŠ¶æ€çš„æ·±å±‚å¯å˜æ€§ã€‚ å½“äº‹æƒ…æ— æ³•æŒ‰é¢„æœŸè¿›è¡Œæ—¶ï¼Œå®ƒè¿˜ä¾é ES6ä»£ç†æ¥é€šçŸ¥æ›´æ”¹ï¼Œéšå¼é‡æ–°æ¸²æŸ“ä»¥åŠä½¿è°ƒè¯•å¤æ‚åŒ–ã€‚ æ­¤å¤–ï¼ŒMobXä¸èƒ½ä¸å¼‚æ­¥åŠŸèƒ½å¾ˆå¥½åœ°é…åˆä½¿ç”¨ã€‚ </p><br><blockquote> ä»ç¿»è¯‘è€…é‚£é‡Œï¼šè¯¥å‡ºç‰ˆç‰©å¯ä»¥çœ‹ä½œæ˜¯ä½¿ç”¨Observableè¿›è¡ŒçŠ¶æ€ç®¡ç†çš„ç®€ä»‹ï¼Œæ˜¯å¯¹<a href="https://habr.com/ru/post/483526/">ç”¨RxJS / Immerç®¡ç†åº”ç”¨ç¨‹åºçŠ¶æ€ä½œä¸ºRedux / MobXçš„ç®€å•æ›¿ä»£å“</a>ä¸­çš„ä¸»é¢˜çš„å»¶ç»­ï¼Œè¯¥æ–‡ç« æè¿°äº†å¦‚ä½•ç®€åŒ–è¿™ç§æ–¹æ³•çš„ä½¿ç”¨ã€‚ </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN484952/">https://habr.com/ru/post/zh-CN484952/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN484934/index.html">åœ¨TeamLead Confä¸Šè¿›è¡Œä¸ºæœŸä¸¤å¤©çš„ä»ä¸ªäººå‘å±•åˆ°XXXLè§„æ¨¡çš„æ•æ·</a></li>
<li><a href="../zh-CN484936/index.html">å›¢é˜Ÿä¸­çš„çŸ¥è¯†å’Œèƒ½åŠ›ï¼šæŸ¥æ‰¾ï¼ŒæŸ¥çœ‹ï¼Œæå‡</a></li>
<li><a href="../zh-CN484944/index.html">æˆ‘çš„ACIDæ˜¯ä»€ä¹ˆæˆ–ä¸é€‚åˆæˆ‘ä»¬</a></li>
<li><a href="../zh-CN484946/index.html">GPRå»ºæ¨¡</a></li>
<li><a href="../zh-CN484948/index.html">NECå‘å¸ƒäº†æµ·åº•ç”µç¼†ï¼Œè®°å½•äº†20å¯¹å…‰çº¤è®°å½•</a></li>
<li><a href="../zh-CN484954/index.html">Kubernetesçš„è§†è§‰æ•…éšœæ’é™¤æŒ‡å—</a></li>
<li><a href="../zh-CN484964/index.html">åœ¨InfoWatch Traffic Monitorä¸Šé…ç½®è´Ÿè½½å¹³è¡¡</a></li>
<li><a href="../zh-CN484966/index.html">ä½¿ç”¨Springè¿›è¡Œæµ‹è¯•çš„ç°æˆæ¨¡æ¿</a></li>
<li><a href="../zh-CN484968/index.html">WPFæ•°æ®ç½‘æ ¼ã€‚ ä¸ºæ¨¡æ¿è€Œæˆ˜</a></li>
<li><a href="../zh-CN484972/index.html">Wine 5.0å‘å¸ƒ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>