<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìö ü§ôüèæ üë®üèæ‚Äçüç≥ Tuning parameter kernel Linux untuk mengoptimalkan PostgreSQL ‚≠ïÔ∏è üë©üèº‚Äçüöí üë©üèΩ‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kinerja optimal PostgreSQL tergantung pada parameter sistem operasi yang ditetapkan dengan benar. Parameter kernel OS yang disetel dengan buruk dapat ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tuning parameter kernel Linux untuk mengoptimalkan PostgreSQL</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458860/"><img width="30%" align="left" src="https://habrastorage.org/webt/dy/qf/mh/dyqfmhq5wntmbisfsdahfiwc_-y.jpeg">  Kinerja optimal PostgreSQL tergantung pada parameter sistem operasi yang ditetapkan dengan benar.  Parameter kernel OS yang disetel dengan buruk dapat menurunkan kinerja server database.  Oleh karena itu, sangat penting bahwa parameter ini dikonfigurasi sesuai dengan server database dan beban kerjanya.  Dalam posting ini, kita akan membahas beberapa parameter kernel Linux penting yang dapat mempengaruhi kinerja server database dan cara menyetelnya. <br><br><h2>  SHMMAX / SHMALL </h2><br>  <b>SHMMAX</b> adalah parameter kernel yang digunakan untuk menentukan ukuran maksimum dari satu segmen memori bersama yang dapat dialokasikan oleh proses Linux.  Sebelum versi 9.2, PostgreSQL menggunakan System V (SysV), yang membutuhkan konfigurasi SHMMAX.  Setelah 9.2, PostgreSQL beralih ke memori bersama POSIX.  Jadi sekarang diperlukan lebih sedikit byte memori bersama System V. <br><br>  Sebelum versi 9.3, SHMMAX adalah parameter kernel yang paling penting.  Nilai SHMMAX ditentukan dalam byte. <br><a name="habracut"></a><br>  Demikian pula, <b>SHMALL</b> adalah parameter kernel lain yang digunakan untuk menentukan <br>  halaman memori bersama di seluruh sistem.  Gunakan perintah <i>ipcs</i> untuk melihat nilai SHMMAX, SHMALL, atau SHMMIN saat ini. <br><br>  <sup><b>SHM * Detail - Linux</b></sup> <br><br><pre><code class="bash hljs">$ ipcs -lm ------ Shared Memory Limits -------- max number of segments = 4096 max seg size (kbytes) = 1073741824 max total shared memory (kbytes) = 17179869184 min seg size (bytes) = 1</code> </pre> <br>  <sup><b>SHM * Detail - MacOS X</b></sup> <br><br><pre> <code class="bash hljs">$ ipcs -M IPC status from as of Thu Aug 16 22:20:35 PKT 2018 shminfo: shmmax: 16777216 (max shared memory segment size) shmmin: 1 (min shared memory segment size) shmmni: 32 (max number of shared memory identifiers) shmseg: 8 (max shared memory segments per process) shmall: 1024 (max amount of shared memory <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pages)</code> </pre><br>  PostgreSQL menggunakan <b>System V IPC</b> untuk mengalokasikan memori bersama.  Parameter ini adalah salah satu parameter kernel yang paling penting.  Setiap kali Anda menerima pesan kesalahan berikut, itu berarti Anda memiliki versi PostgreSQL yang lebih lama dan Anda memiliki nilai SHMMAX yang sangat rendah.  Diharapkan bahwa pengguna akan menyesuaikan dan meningkatkan nilai sesuai dengan memori bersama yang akan mereka gunakan. <br><br><h3>  Kemungkinan kesalahan konfigurasi </h3><br>  Jika SHMMAX tidak dikonfigurasi dengan benar, Anda mungkin menerima kesalahan ketika mencoba untuk menginisialisasi cluster PostgreSQL menggunakan perintah <i>initdb</i> . <br><br>  <sup><b>kegagalan initdb</b></sup> <br> <code>DETAIL: Failed system call was shmget(key=1, size=2072576, 03600). <br> <br> HINT: This error usually means that PostgreSQL's request for a shared memory segment exceeded your kernel's SHMMAX parameter. <br> You can either reduce the request size or reconfigure the kernel with larger SHMMAX. To reduce the request size (currently 2072576 bytes), <br> reduce PostgreSQL's shared memory usage, perhaps by reducing shared_buffers or max_connections. <br> <br> If the request size is already small, it's possible that it is less than your kernel's SHMMIN parameter, <br> in which case raising the request size or reconfiguring SHMMIN is called for. <br> <br> The PostgreSQL documentation contains more information about shared memory configuration. child process exited with exit code 1</code> <br> <br>  Demikian pula, Anda mungkin menerima kesalahan saat memulai server PostgreSQL menggunakan perintah <i>pg_ctl</i> . <br><br>  <sup><b>kegagalan pg_ctl</b></sup> <br> <code>DETAIL: Failed system call was shmget(key=5432001, size=14385152, 03600). <br> <br> HINT: This error usually means that PostgreSQL's request for a shared memory segment exceeded your kernel's SHMMAX parameter. <br> <br> You can either reduce the request size or reconfigure the kernel with larger SHMMAX.; To reduce the request size (currently 14385152 bytes), reduce PostgreSQL's shared memory usage, perhaps by reducing shared_buffers or max_connections. <br> <br> If the request size is already small, it's possible that it is less than your kernel's SHMMIN parameter, <br> in which case raising the request size or reconfiguring SHMMIN is called for. <br> <br> The PostgreSQL documentation contains more information about shared memory configuration.</code> <br> <br><h3>  Memahami Perbedaan dalam Definisi </h3><br>  Definisi parameter SHMMAX / SHMALL sedikit berbeda di Linux dan MacOS X: <br><br><ul><li>  Linux: kernel.shmmax, kernel.shmall </li><li>  MacOS X: kern.sysv.shmmax, kern.sysv.shmall </li></ul><br>  Perintah <i>sysctl</i> dapat digunakan untuk sementara mengubah nilai.  Untuk menetapkan nilai konstan, tambahkan entri di <i>/etc/sysctl.conf</i> .  Detail diberikan di bawah ini. <br><br>  <sup><b>Ubah pengaturan kernel pada MacOS X</b></sup> <br><br><pre> <code class="plaintext hljs"># Get the value of SHMMAX sudo sysctl kern.sysv.shmmax kern.sysv.shmmax: 4096 # Get the value of SHMALL sudo sysctl kern.sysv.shmall kern.sysv.shmall: 4096 # Set the value of SHMMAX sudo sysctl -w kern.sysv.shmmax=16777216 kern.sysv.shmmax: 4096 -&gt; 16777216 # Set the value of SHMALL sudo sysctl -w kern.sysv.shmall=16777216 kern.sysv.shmall: 4096 -&gt; 16777216</code> </pre> <br>  <sup><b>Mengubah parameter kernel Linux</b></sup> <br><br><pre> <code class="plaintext hljs"># Get the value of SHMMAX sudo sysctl kernel.shmmax kernel.shmmax: 4096 # Get the value of SHMALL sudo sysctl kernel.shmall kernel.shmall: 4096 # Set the value of SHMMAX sudo sysctl -w kernel.shmmax=16777216 kernel.shmmax: 4096 -&gt; 16777216 # Set the value of SHMALL sudo sysctl -w kernel.shmall=16777216 kernel.shmall: 4096 -&gt; 16777216</code> </pre> <br>  <sub><b>Ingat</b> : untuk membuat perubahan permanen, tambahkan nilai-nilai ini ke <font color="blue">/etc/sysctl.conf</font></sub> <br><br><h2>  Halaman Besar (Halaman Besar) </h2><br>  Linux default ke halaman 4K, BSD menggunakan <i>Super Pages</i> , dan Windows menggunakan <i>Halaman Besar</i> .  Halaman adalah sepotong RAM yang dialokasikan untuk suatu proses.  Suatu proses dapat memiliki beberapa halaman, tergantung pada kebutuhan memori.  Semakin banyak memori yang dibutuhkan suatu proses, semakin banyak halaman yang telah dialokasikan.  OS mendukung tabel alokasi halaman untuk proses.  Semakin kecil ukuran halaman, semakin besar tabel, semakin lama waktu yang dibutuhkan untuk menemukan halaman di tabel halaman ini.  Oleh karena itu, halaman yang besar memungkinkan Anda untuk menggunakan sejumlah besar memori dengan overhead yang berkurang;  lebih sedikit tampilan halaman, lebih sedikit kesalahan halaman, operasi baca / tulis lebih cepat melalui buffer besar.  Hasilnya adalah peningkatan kinerja. <br><br>  PostgreSQL hanya mendukung halaman besar di Linux.  Secara default, Linux menggunakan 4 KB halaman memori, jadi jika Anda memiliki terlalu banyak operasi memori, Anda harus menginstal halaman yang lebih besar.  Ada peningkatan kinerja saat menggunakan halaman besar 2 MB dan hingga 1 GB.  Ukuran halaman besar dapat diatur saat boot.  Anda dapat dengan mudah memeriksa parameter halaman besar dan penggunaannya di komputer Linux Anda menggunakan perintah <i>cat / proc / meminfo |</i>  <i>grep -sangat besar</i> . <br><br>  <sup><b>Mendapatkan informasi tentang halaman besar (hanya Linux)</b></sup> <br><br><pre> <code class="bash hljs">Note: This is only <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Linux, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> other OS this operation is ignored$ cat /proc/meminfo | grep -i huge AnonHugePages:        0 kB ShmemHugePages:       0 kB HugePages_Total:      0 HugePages_Free:       0 HugePages_Rsvd:       0 HugePages_Surp:       0 Hugepagesize:      2048 kB</code> </pre> <br>  Dalam contoh ini, meskipun ukuran halaman besar diatur ke 2048 (2 MB), jumlah total halaman besar adalah 0. Ini berarti bahwa halaman besar dinonaktifkan. <br><br><h3>  Script untuk menentukan jumlah halaman besar </h3><br>  Skrip sederhana ini mengembalikan jumlah halaman besar yang diperlukan.  Jalankan skrip di server Linux Anda saat PostgreSQL berjalan.  Pastikan direktori data PostgreSQL disetel untuk variabel lingkungan <i>$ PGDATA</i> . <br><br>  <sup><b>Mendapatkan jumlah halaman besar yang dibutuhkan</b></sup> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash pid=`head -1 $PGDATA/postmaster.pid` echo "Pid:           $pid" peak=`grep ^VmPeak /proc/$pid/status | awk '{ print $2 }'` echo "VmPeak:          $peak kB" hps=`grep ^Hugepagesize /proc/meminfo | awk '{ print $2 }'` echo "Hugepagesize:  $hps kB" hp=$((peak/hps)) echo Set Huge Pages:    $hp</span></span></code> </pre> <br>  Output skrip adalah sebagai berikut: <br><br>  <sup><b>Output skrip</b></sup> <br><br><pre> <code class="bash hljs">Pid:           12737 VmPeak:        180932 kB Hugepagesize:  2048 kB Set Huge Pages: 88</code> </pre> <br>  Nilai yang disarankan untuk halaman besar adalah 88, jadi Anda harus mengaturnya ke 88. <br><br>  <sup><b>Pasang halaman besar</b></sup> <br><br><pre> <code class="bash hljs">sysctl -w vm.nr_hugepages=88</code> </pre> <br>  Periksa halaman besar sekarang, Anda akan melihat bahwa halaman besar tidak digunakan (HugePages_Free = HugePages_Total). <br><br>  <sup><b>Informasi tentang halaman besar lagi (hanya Linux)</b></sup> <br><br><pre> <code class="bash hljs">$ cat /proc/meminfo | grep -i huge AnonHugePages:        0 kB ShmemHugePages:       0 kB HugePages_Total:     88 HugePages_Free:      88 HugePages_Rsvd:       0 HugePages_Surp:       0 Hugepagesize:      2048 kB</code> </pre> <br>  Sekarang atur huge_pages ‚Äúon‚Äù ke $ PGDATA / postgresql.conf dan restart server. <br><br>  <sup><b>Dan lagi, informasi tentang halaman besar (hanya Linux)</b></sup> <br><br><pre> <code class="bash hljs">$ cat /proc/meminfo | grep -i huge AnonHugePages:        0 kB ShmemHugePages:       0 kB HugePages_Total:     88 HugePages_Free:      81 HugePages_Rsvd:       64 HugePages_Surp:       0 Hugepagesize:      2048 kB</code> </pre> <br>  Sekarang Anda dapat melihat bahwa sangat sedikit halaman besar yang digunakan.  Sekarang mari kita coba menambahkan beberapa data ke database. <br><br>  <sup><b>Beberapa operasi basis data untuk mendaur ulang halaman besar</b></sup> <br><br><pre> <code class="sql hljs">postgres=<span class="hljs-comment"><span class="hljs-comment"># CREATE TABLE foo(a INTEGER); CREATE TABLE postgres=# INSERT INTO foo VALUES(generate_Series(1,10000000)); INSERT 0 10000000</span></span></code> </pre> <br>  Mari kita lihat apakah kita menggunakan halaman yang lebih besar sekarang daripada sebelumnya. <br><br>  <sup><b>Sekali lagi informasi pada halaman besar (hanya Linux)</b></sup> <br><br><pre> <code class="bash hljs">$ cat /proc/meminfo | grep -i huge AnonHugePages:        0 kB ShmemHugePages:       0 kB HugePages_Total:     88 HugePages_Free:      18 HugePages_Rsvd:       1 HugePages_Surp:       0 Hugepagesize:      2048 kB</code> </pre> <br>  Sekarang Anda dapat melihat bahwa sebagian besar halaman besar sedang digunakan. <br><br>  <sub>Catatan: nilai perkiraan untuk HugePages yang digunakan di sini sangat rendah, yang bukan merupakan nilai normal untuk mesin di lingkungan makanan.</sub>  <sub>Harap evaluasi jumlah halaman yang dibutuhkan untuk sistem Anda dan atur sesuai dengan itu tergantung pada beban dan sumber daya.</sub> <br><br><h3>  vm. kebahagiaan </h3><br>  <b>vm.swappiness</b> adalah parameter kernel lain yang dapat mempengaruhi kinerja database.  Parameter ini digunakan untuk mengontrol perilaku swappiness (menukar halaman ke dan dari memori) di Linux.  Nilainya berkisar dari 0 hingga 100. Ini menentukan berapa banyak memori yang akan dibongkar atau dibongkar.  Nol berarti menonaktifkan pertukaran, dan 100 berarti pertukaran agresif. <br><br>  Anda bisa mendapatkan kinerja yang baik dengan menetapkan nilai yang lebih rendah. <br><br>  Menyetel nilai ke 0 di kernel yang lebih baru dapat menyebabkan OOM Killer (proses pembersihan memori Linux) mematikan proses.  Dengan demikian, Anda dapat dengan aman mengatur nilai ke 1 jika Anda ingin meminimalkan swapping.  Nilai default di Linux adalah 60. Nilai yang lebih tinggi menyebabkan MMU (unit manajemen memori) menggunakan lebih banyak ruang paging daripada RAM, sementara nilai yang lebih rendah menyimpan lebih banyak data / kode dalam memori. <br><br>  Nilai yang lebih rendah adalah taruhan yang bagus untuk meningkatkan kinerja di PostgreSQL. <br><br><h3>  vm.overcommit_memory / vm.overcommit_ratio </h3><br>  Aplikasi menerima memori dan membebaskannya ketika tidak lagi diperlukan.  Tetapi dalam beberapa kasus, aplikasi mendapat terlalu banyak memori dan tidak membebaskannya.  Ini dapat menyebabkan pembunuh OOM.  Berikut adalah nilai yang mungkin untuk parameter <b>vm.overcommit_memory</b> dengan deskripsi untuk masing-masing: <br><br><ol><li>  Heuristic overcommit (default);  heuristik berbasis inti </li><li>  Biarkan overcommit </li><li>  Jangan berlebihan, jangan melebihi rasio kelebihan komitmen. </li></ol><br>  <i>Tautan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.kernel.org/doc/Documentation/vm/overcommit-accounting</a></i> <br><br>  <b>vm.overcommit_ratio</b> - persentase RAM yang tersedia untuk overloading.  Nilai 50% dalam sistem dengan 2 GB RAM dapat mengalokasikan hingga 3 GB RAM. <br><br>  Nilai 2 untuk vm.overcommit_memory memberikan kinerja yang lebih baik untuk PostgreSQL.  Nilai ini memaksimalkan penggunaan RAM oleh proses server tanpa risiko signifikan terbunuh oleh proses pembunuh OOM.  Aplikasi akan dapat memulai kembali, tetapi hanya dalam pengeluaran berlebih, yang mengurangi risiko bahwa pembunuh OOM akan membunuh proses.  Oleh karena itu, nilai 2 memberikan kinerja yang lebih baik daripada nilai standar 0. Namun, keandalan dapat ditingkatkan dengan memastikan bahwa memori di luar rentang yang dapat diterima tidak kelebihan beban.  Ini menghilangkan risiko bahwa proses tersebut akan dibunuh oleh pembunuh-OOM. <br><br>  Pada sistem non-paging, masalah dapat terjadi dengan vm.overcommit_memory sama dengan 2. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.postgresql.org/docs/current/static/kernel-resources.html#LINUX-MEMORY-OVERCOMMIT</a> <br><br><h3>  vm.dirty_background_ratio / vm.dirty_background_bytes </h3><br>  <b>vm.dirty_background_ratio</b> adalah persentase memori yang diisi dengan halaman kotor yang perlu ditulis ke disk.  Atur ulang ke disk di latar belakang.  Nilai parameter ini berkisar dari 0 hingga 100;  Namun, nilai di bawah 5 mungkin tidak efisien, dan beberapa kernel tidak mendukungnya.  10 adalah nilai default pada kebanyakan sistem Linux.  Anda dapat meningkatkan kinerja untuk operasi perekaman intensif pada tingkat yang lebih rendah, yang berarti bahwa Linux akan membuang halaman kotor di latar belakang. <br><br>  Anda perlu mengatur nilai <b>vm.dirty_background_bytes</b> tergantung pada kecepatan disk Anda. <br><br>  Tidak ada nilai "baik" untuk dua parameter ini, karena keduanya bergantung pada perangkat keras.  Namun, pengaturan vm.dirty_background_ratio ke 5 dan vm.dirty_background_bytes pada 25% dari kecepatan disk akan meningkatkan kinerja hingga ~ 25% dalam kebanyakan kasus. <br><br><h3>  vm.dirty_ratio / dirty_bytes </h3><br>  Ini sama dengan <b>vm.dirty_background_ratio / dirty_background_bytes</b> , kecuali bahwa pengaturan ulang dilakukan dalam sesi kerja, memblokir aplikasi.  Karena itu, vm.dirty_ratio harus lebih tinggi dari <b>vm.dirty_background_ratio</b> .  Ini memastikan bahwa proses latar belakang akan dimulai lebih awal untuk menghindari pemblokiran aplikasi sebanyak mungkin.  Anda dapat menyesuaikan perbedaan antara dua rasio ini tergantung pada beban I / O disk. <br><br><h2>  Ringkasan </h2><br>  Anda dapat mengonfigurasi parameter lain untuk meningkatkan produktivitas, tetapi peningkatannya akan minimal dan Anda tidak akan mendapatkan banyak manfaat.  Kita harus ingat bahwa tidak semua parameter berlaku untuk semua jenis aplikasi.  Beberapa aplikasi bekerja lebih baik ketika kita mengkonfigurasi beberapa pengaturan, dan beberapa tidak.  Anda harus menemukan keseimbangan yang tepat antara konfigurasi parameter-parameter ini untuk beban kerja yang diharapkan dan jenis aplikasi, dan ketika mengatur, Anda harus mempertimbangkan perilaku OS.  Mengkonfigurasi parameter kernel tidak semudah menyetel parameter basis data: lebih sulit untuk memberikan rekomendasi Anda di sini. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id458860/">https://habr.com/ru/post/id458860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id458846/index.html">Bagaimana cara mengembangkan platformer lain menggunakan Unity. Tutorial lain</a></li>
<li><a href="../id458848/index.html">Rilis Rust 1.36.0: Sifat masa depan, stabilisasi alokasi, dan MaybeUninit <T></a></li>
<li><a href="../id458850/index.html">Belajar bahasa Inggris dengan murah dan efisien. Bagian 2</a></li>
<li><a href="../id458854/index.html">MotionLayout: animasi lebih baik, lebih sedikit kode</a></li>
<li><a href="../id458856/index.html">Baterai AAA yang murah dan mahal</a></li>
<li><a href="../id458864/index.html">Kontes pengembang bot untuk TamTam</a></li>
<li><a href="../id458866/index.html">Cara kerja tim penyeimbang di World of Tanks Blitz</a></li>
<li><a href="../id458868/index.html">Kebisingan dalam data besar. Analisis Entropi</a></li>
<li><a href="../id458870/index.html">Masalah Komputer Paling Populer Yang Kita Hadapi Setiap Hari</a></li>
<li><a href="../id458874/index.html">Daftar Periksa ASO: Optimasi Teks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>