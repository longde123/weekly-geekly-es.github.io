<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèñÔ∏è ü§µüèΩ üêπ Welche Farbe hat deine Funktion? ü§Ωüèø ü§∏üèª üë®üèΩ‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich wei√ü nichts √ºber dich, aber f√ºr mich gibt es keinen besseren Start in den Tag, als mich um das Programmieren zu k√ºmmern. Das Blut kocht beim Anbli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Welche Farbe hat deine Funktion?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466337/"><p>  Ich wei√ü nichts √ºber dich, aber f√ºr mich gibt es keinen besseren Start in den Tag, als mich um das Programmieren zu k√ºmmern.  Das Blut kocht beim Anblick einer erfolgreichen Kritik an einer der "k√ºhnen" Sprachen, die von den Plebejern verwendet wird und die den ganzen Arbeitstag zwischen sch√ºchternen Besuchen bei StackOverflow damit gequ√§lt wird. </p><br><p>  (In der Zwischenzeit verwenden Sie und ich nur die aufgekl√§rteste Sprache und die ausgefeiltesten Werkzeuge, die f√ºr die geschickten H√§nde von Meistern wie uns entwickelt wurden.) </p><br><p>  Nat√ºrlich gehe ich als Autor der Predigt Risiken ein.  Vielleicht gef√§llt dir die Sprache, √ºber die ich mich lustig mache!  Eine r√ºcksichtslose Brosch√ºre k√∂nnte versehentlich eine w√ºtende Menge von Handys mit Heugabeln und Fackeln in meinem Blog erscheinen lassen. </p><br><p>  Um mich vor dem gerechten Feuer zu sch√ºtzen und Ihre (wahrscheinlich heiklen) Gef√ºhle nicht zu beleidigen, werde ich √ºber die Sprache sprechen ... </p><a name="habracut"></a><br><p>  ... der gerade aufgetaucht ist.  √úber ein Strohbildnis, dessen einzige Aufgabe es ist, Kritiker auf dem Scheiterhaufen zu verbrennen. </p><br><p>  Ich wei√ü, das klingt albern, aber glauben Sie mir, am Ende werden wir sehen, wessen Gesicht (oder Gesichter) auf einen Strohkopf gemalt wurden. </p><br><h1 id="novyy-yazyk">  Neue Sprache </h1><br><p> Es wird ein Overkill sein, eine v√∂llig neue (und bl√∂de) Sprache nur f√ºr einen Blog-Artikel zu lernen. Nehmen wir also an, dass sie der Sprache, die wir bereits kennen, sehr √§hnlich ist.  Zum Beispiel Javascript.  Geschweifte Klammern und Semikolons.  <code>if</code> , <code>while</code> usw.  - <em>Lingua Franca</em> unserer Menge. </p><br><p>  Ich habe JS nicht gew√§hlt, weil dieser Artikel √ºber ihn ist.  Es ist nur eine Sprache, in die der durchschnittliche Leser wahrscheinlich geraten wird.  Voila: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thisIsAFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"!"</span></span>; }</code> </pre> <br><p>  Da unser Stofftier eine <em>coole</em> (schlecht gelesene) Sprache ist, hat es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erstklassige Funktionen</a> .  Sie k√∂nnen also so etwas schreiben: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,     , //    function filter(collection, predicate) { var result = []; for (var i = 0; i &lt; collection.length; i++) { if (predicate(collection[i])){ result.push(collection[i]); } } return result; }</span></span></code> </pre> <br><p>  Dies ist eine der <em>erstklassigen</em> Funktionen, und wie der Name schon sagt, sind sie cool und √§u√üerst n√ºtzlich.  Sie sind es wahrscheinlich gewohnt, Datensammlungen mit ihrer Hilfe zu transformieren, aber sobald Sie das Konzept verstanden haben, verwenden Sie sie √ºberall, verdammt noch mal. </p><br><p>  Vielleicht in Tests: </p><br><pre> <code class="javascript hljs">describe(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ it(<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ expect(<span class="hljs-string"><span class="hljs-string">""</span></span>).not.toBe(<span class="hljs-string"><span class="hljs-string">""</span></span>); }); };</code> </pre> <br><p>  Oder wenn Sie die Daten analysieren m√ºssen: </p><br><pre> <code class="javascript hljs">tokens.match(Token.LEFT_BRACKET, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">token</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Parse a list literal... tokens.consume(Token.RIGHT_BRACKET); });</span></span></code> </pre> <br><p>  Nach dem Beschleunigen schreiben Sie alle Arten von coolen wiederverwendbaren Bibliotheken und Anwendungen, die sich um Funktionen, Funktionsaufrufe und Funktionsr√ºckgaben von Funktionen drehen - eine Funktionskabine. </p><br><blockquote>  √úbersetzer: im Original "Functapalooza".  Das Pr√§fix <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-a-palooza</a> ist so cool, dass Sie es mit allen teilen m√∂chten. </blockquote><br><h1 id="kakogo-cveta-vasha-funkciya">  Welche Farbe hat deine Funktion? </h1><br><p>  Und hier beginnen die Kuriosit√§ten.  Unsere Sprache hat eine Besonderheit: </p><br><h3 id="1-kazhdaya-funkciya-imeet-cvet">  1. Jede Funktion hat eine Farbe. </h3><br><p>  Jede Funktion - ein anonymer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">R√ºckruf</a> oder eine regul√§re Funktion mit einem Namen - ist entweder rot oder blau.  Da die Hervorhebung des Codes in unserem Blog nicht die unterschiedliche Farbe der Funktionen hervorhebt, stimmen wir zu, dass die Syntax wie folgt lautet: </p><br><pre> <code class="javascript hljs">blue*<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomethingAzure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   ... } red*function doSomethingCarnelian(){ //    ... }</span></span></code> </pre> <br><p>  Unsere Sprache hat keine farblosen Funktionen.  M√∂chten Sie eine Funktion erstellen?  - muss eine Farbe w√§hlen.  Das sind die Regeln.  Und es gibt noch ein paar Regeln, denen Sie folgen m√ºssen: </p><br><h3 id="2-cvet-vliyaet-na-sposob-vyzova-funkcii">  2. Farbe beeinflusst die Art und Weise, wie die Funktion aufgerufen wird </h3><br><p>  Stellen Sie sich vor, es gibt zwei Syntaxen zum Aufrufen von Funktionen - "blau" und "rot".  So etwas wie: </p><br><pre> <code class="javascript hljs">doSomethingAzure(...)*blue; doSomethingCarnelian()*red;</code> </pre> <br><p>  Wenn Sie eine Funktion aufrufen, m√ºssen Sie einen Aufruf verwenden, der ihrer Farbe entspricht.  Wenn Sie es nicht erraten haben - sie haben die rote Funktion mit <code>*blue</code> nach den Klammern aufgerufen (oder umgekehrt) - wird etwas sehr Schlimmes passieren.  Ein l√§ngst vergessener Albtraum in der Kindheit, wie ein Clown mit Schlangen anstelle von H√§nden, die sich unter Ihrem Bett versteckten.  Er wird aus dem Monitor springen und deine Augen lutschen. </p><br><p>  Dumme Regel, oder?  Oh, aber noch etwas: </p><br><h3 id="3-tolko-krasnaya-funkciya-mozhet-vyzvat-krasnuyu-funkciyu">  3. Nur die rote Funktion kann die rote Funktion verursachen. </h3><br><p>  Sie <em>k√∂nnen</em> die blaue Funktion von rot aufrufen.  Das ist koscher: </p><br><pre> <code class="javascript hljs">red*<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomethingCarnelian</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ doSomethingAzure()*blue; }</code> </pre> <br><p>  Aber nicht umgekehrt.  Wenn Sie versuchen: </p><br><pre> <code class="javascript hljs">blue*<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomethingAzure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ doSomethingCarnelian()*red; }</code> </pre> <br><p>  - Sie werden vom alten Clown Spider Maw besucht. </p><br><p>  Dies macht es schwieriger, h√∂here Funktionen wie <code>filter()</code> aus dem Beispiel zu schreiben.  Wir m√ºssen f√ºr jede neue Funktion eine Farbe ausw√§hlen. Dies wirkt sich auf die Farbe der Funktionen aus, die wir an sie √ºbergeben k√∂nnen.  Die naheliegende L√∂sung besteht darin, <code>filter()</code> rot zu machen.  Dann k√∂nnen wir mindestens rote, mindestens blaue Funktionen aufrufen.  Aber dann werden wir wegen des n√§chsten Dorns in der Dornenkrone verletzt, der die gegebene Sprache ist: </p><br><h3 id="4-krasnye-funkcii-bolnee-vyzyvat">  4. Rote Funktionen verursachen Schmerzen </h3><br><p>  Wir werden diesen ‚ÄûSchmerz‚Äú nicht genau bestimmen. Stellen Sie sich vor, der Programmierer muss jedes Mal durch den Rahmen springen, wenn er die rote Funktion aufruft.  Der Aufruf ist m√∂glicherweise zu mehrsilbig oder Sie k√∂nnen die Funktion in einigen Ausdr√ºcken nicht ausf√ºhren.  Oder Sie k√∂nnen nur √ºber ungerade Zeilen auf die rote Funktion zugreifen. </p><br><p>  Es spielt keine Rolle, was es ist, aber wenn Sie sich entscheiden, die Funktion rot zu machen, m√∂chte jeder, der Ihre API verwendet, in Ihren Kaffee spucken oder etwas Schlimmeres tun. </p><br><p>  Die offensichtliche L√∂sung in diesem Fall besteht darin, niemals rote Funktionen zu verwenden.  Machen Sie einfach alles blau, und Sie befinden sich wieder in der normalen Welt, in der alle Funktionen dieselbe Farbe haben. Dies entspricht der Tatsache, dass sie keine Farbe haben und unsere Sprache nicht v√∂llig dumm ist. </p><br><p>  Leider die Sadisten, die diese Sprache entwickelt haben (jeder wei√ü, dass die Autoren von Programmiersprachen Sadisten sind, oder?) Stecken Sie uns den letzten Dorn im Auge: </p><br><h3 id="5-nekotorye-funkcii-yadra-yazyka----krasnye">  5. Einige der Kernfunktionen der Sprache sind rot. </h3><br><p>  Einige in die Plattform integrierte Funktionen, Funktionen, die wir verwenden <em>m√ºssen und</em> die nicht von uns selbst geschrieben werden k√∂nnen, sind nur in rot verf√ºgbar.  An diesem Punkt kann eine intelligente Person anfangen zu vermuten, dass diese Sprache uns hasst. </p><br><h1 id="eto-vse-vina-funkcionalnyh-yazykov">  Dies ist alles die Schuld der funktionalen Sprachen! </h1><br><p>  Sie k√∂nnten denken, dass das Problem darin besteht, dass wir versuchen, Funktionen h√∂herer Ordnung zu verwenden.  Wenn wir einfach aufh√∂ren, mit all diesem funktionalen Unsinn herumzuspielen, und anfangen, normale blaue Funktionen <em>erster Ordnung</em> (Funktionen, die nicht mit anderen Funktionen funktionieren - Anmerkung des √úbersetzers) zu schreiben, wie von Gott geplant, werden wir all diesen Schmerz los. </p><br><p>  Wenn wir nur blaue Funktionen aufrufen, machen wir alle unsere Funktionen blau.  Ansonsten machen wir rot.  Bis wir Funktionen erstellen, die Funktionen akzeptieren, m√ºssen wir uns keine Gedanken √ºber "Polymorphismus zur Farbe der Funktion" (polychromatisch?) Oder anderen Unsinn machen. </p><br><p>  Aber leider sind Funktionen h√∂herer Ordnung nur ein Beispiel.  Das Problem tritt jedes Mal auf, wenn wir unser Programm in Funktionen zur Wiederverwendung aufteilen m√∂chten. </p><br><p>  Zum Beispiel haben wir einen netten kleinen Code, der, ich wei√ü nicht, den Dijkstra-Algorithmus √ºber ein Diagramm implementiert, das darstellt, wie sehr Ihre sozialen Verbindungen sich gegenseitig unter Druck setzen.  (Ich habe viel Zeit damit verbracht, zu entscheiden, was das Ergebnis bedeuten w√ºrde. Transitive Unerw√ºnschtheit?) </p><br><p>  Sp√§ter mussten Sie diesen Algorithmus woanders verwenden.  Nat√ºrlich verpacken Sie den Code in eine separate Funktion.  Rufen Sie sie vom alten und vom neuen Ort an.  Aber welche Farbe soll die Funktion haben?  Sie werden wahrscheinlich versuchen, es blau zu machen, aber was ist, wenn es eine dieser fiesen "nur roten" Funktionen aus der Kernel-Bibliothek verwendet? </p><br><p>  Angenommen, der neue Ort, von dem aus Sie die Funktion aufrufen m√∂chten, ist blau.  Jetzt m√ºssen Sie den aufrufenden Code in Rot umschreiben.  Und wiederholen Sie dann die Funktion, die diesen Code aufruft.  Puh  Sie m√ºssen sich sowieso st√§ndig an die Farbe erinnern.  Dies wird der Sand in Ihrer Badehose bei einem Strandurlaubsprogramm sein. </p><br><h1 id="cvetnaya-allegoriya">  Farb-Allegorie </h1><br><p>  Tats√§chlich spreche ich nicht √ºber Farbe.  Dies ist eine Allegorie, ein literarisches Mittel.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fuck</a> - hier geht es nicht um die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sterne auf den B√§uchen</a> , hier geht es um das Rennen.  Sie vermuten wahrscheinlich schon ... </p><br><h3 id="krasnye-funkcii---asinhronnye">  Rote Funktionen - Asynchron </h3><br><p>  Wenn Sie in JavaScript oder Node.js programmieren, schreiben Sie jedes Mal, wenn Sie eine Funktion definieren, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine R√ºckruffunktion</a> (R√ºckruf) aufruft, um das Ergebnis zur√ºckzugeben, eine rote Funktion.  Schauen Sie sich diese Liste von Regeln an und beachten Sie, wie sie in meine Metapher passen: </p><br><ol><li>  Synchrone Funktionen geben ein Ergebnis zur√ºck, asynchrone Funktionen nicht. Im Gegenzug rufen sie einen R√ºckruf auf. </li><li>  Synchrone Funktionen geben das Ergebnis als R√ºckgabewert zur√ºck, asynchrone Funktionen geben es zur√ºck und verursachen den R√ºckruf, den Sie an sie √ºbergeben haben. </li><li>  Sie k√∂nnen eine asynchrone Funktion nicht von einer synchronen aus aufrufen, da Sie das Ergebnis erst kennen, wenn die asynchrone Funktion sp√§ter ausgef√ºhrt wird. </li><li>  Asynchrone Funktionen werden aufgrund von R√ºckrufen nicht zu Ausdr√ºcken kompiliert, erfordern eine unterschiedliche Behandlung ihrer Fehler und k√∂nnen nicht in einem <code>try/catch</code> Block oder in einer Reihe anderer Ausdr√ºcke verwendet werden, die das Programm steuern. </li><li>  Das Ganze an Node.js ist, dass die Kernel-Bibliothek vollst√§ndig asynchron ist.  (Obwohl sie zur√ºck spenden und damit beginnen, <code>_Sync()</code> Versionen zu vielen Dingen hinzuzuf√ºgen.) </li></ol><br><p>  Wenn Leute √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"R√ºckrufh√∂lle"</a> sprechen, sprechen sie dar√ºber, wie √§rgerlich es ist, "rote" Funktionen in ihrer Sprache zu haben.  Wenn sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">4089 Bibliotheken f√ºr die asynchrone Programmierung</a> erstellen (bereits 2019 11217 - ca. √úbersetzer), versuchen sie, das Problem auf Bibliotheksebene zu bew√§ltigen, dass sie mit der Sprache nicht weiterkommen. </p><br><h1 id="i-promise-the-future-is-better">  Ich verspreche, dass die Zukunft besser ist </h1><br><blockquote>  in √úbersetzung: "Ich verspreche, dass die Zukunft besser ist" Das Wortspiel aus Titel und Inhalt des Abschnitts geht verloren </blockquote><p>  Die Leute bei Node.js haben lange erkannt, dass R√ºckrufe weh tun, und suchten nach L√∂sungen.  Eine der Techniken, die viele Menschen inspiriert hat, sind <code>promises</code> , die Sie vielleicht auch unter dem Spitznamen <code>futures</code> . </p><br><blockquote>  Anstatt "Versprechen" als "Versprechen" zu √ºbersetzen, wurde in der russischen IT das R√ºckverfolgungspapier aus dem Englischen - "Versprechen" - eingerichtet.  Das Wort "Futures" wird so verwendet, wie es ist, wahrscheinlich weil die "Futures" bereits von Finanzsprache besetzt sind. </blockquote><p>  Promis ist ein Wrapper f√ºr Callback und Fehlerbehandlungsroutine.  Wenn Sie daran denken, einen R√ºckruf f√ºr das Ergebnis und einen weiteren R√ºckruf f√ºr den Fehler zu √ºbergeben, ist die <code>future</code> die Verk√∂rperung dieser Idee.  Dies ist ein Basisobjekt, das eine asynchrone Operation ist. </p><br><p>  Ich habe gerade ein paar ausgefallene Formulierungen bekommen und es mag nach einer gro√üartigen L√∂sung klingen, aber meistens ist es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schlangen√∂l</a> .  Versprechen erleichtern das Schreiben von asynchronem Code ein wenig.  Sie lassen sich leichter zu Ausdr√ºcken zusammensetzen, daher ist Regel 4 etwas weniger streng. </p><br><p>  Aber um ehrlich zu sein, ist es wie der Unterschied zwischen einem Schlag in den Bauch oder in der Leiste.  Ja, es tut nicht so weh, aber niemand wird sich √ºber eine solche Wahl freuen. </p><br><p>  Sie k√∂nnen immer noch keine Versprechen f√ºr die Ausnahmebehandlung oder andere verwenden <br>  Betreiber verwalten.  Sie k√∂nnen keine Funktion aufrufen, die aus synchronem Code <code>future</code> zur√ºckgibt.  (Sie <em>k√∂nnen</em> , aber dann erfindet der n√§chste Betreuer Ihres Codes eine Zeitmaschine, kehrt in dem Moment zur√ºck, in dem Sie es getan haben, und steckt Ihnen aus Grund 2 einen Bleistift ins Gesicht.) </p><br><p>  Versprechen teilen deine Welt immer noch in asynchrone und synchrone H√§lften mit all dem daraus resultierenden Leiden.  Selbst wenn Ihre Sprache <code>promises</code> oder <code>futures</code> , sieht sie meiner ausgestopften sehr √§hnlich. </p><br><p>  (Ja, dazu geh√∂rt auch der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dart</a> , den ich benutze. Deshalb bin ich so froh, dass ein Teil des Teams <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">andere Ans√§tze zur Parallelit√§t ausprobiert.</a> ) </p><br><blockquote>  Projektlink offiziell aufgegeben </blockquote><br><h1 id="im-awaiting-a-solution">  Ich warte auf eine L√∂sung </h1><br><p>  C # -Programmierer f√ºhlen sich wahrscheinlich selbstgef√§llig (der Grund, warum sie immer mehr Opfer werden, ist, dass <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Halesberg</a> und das Unternehmen alles und die Sprache mit syntaktischem Zucker bestreuen).  In C # k√∂nnen Sie das Schl√ºsselwort <code>await</code> , um eine asynchrone Funktion aufzurufen. </p><br><p>  Dies macht asynchrone Anrufe so einfach wie synchron, indem ein niedliches kleines Schl√ºsselwort hinzugef√ºgt wird.  Sie k√∂nnen einen <code>await</code> Aufruf in Ausdr√ºcke einf√ºgen, sie bei der Ausnahmebehandlung im Anweisungsfluss verwenden.  Du kannst verr√ºckt werden.  Lassen Sie den Regen wie Geld f√ºr Ihr neues Rapper-Album warten. </p><br><p>  Async-await ist nett, also f√ºgen wir es Dart hinzu.  Es ist viel einfacher <em>,</em> asynchronen Code damit <em>zu schreiben</em> .  Aber wie immer gibt es ein "Aber".  Hier ist es.  <em>Aber ...</em> Sie teilen die Welt immer noch in zwei H√§lften.  Asynchrone Funktionen sind jetzt einfacher zu schreiben, aber <em>sie sind immer noch asynchrone Funktionen.</em> </p><br><p>  Sie haben noch zwei Farben.  Async-await l√∂st das nervige Problem Nr. 4 - sie machen das Aufrufen von roten Funktionen nicht schwieriger als das Aufrufen von blauen.  Aber der Rest der Regeln ist immer noch hier: </p><br><ol><li>  Synchrone Funktionen geben Werte zur√ºck, asynchrone Funktionen geben einen Wrapper ( <code>Task&lt;T&gt;</code> in C # oder <code>Future&lt;T&gt;</code> in Dart) um den Wert zur√ºck. </li><li>  Synchron gerade aufgerufen, asynchrone Notwendigkeit <code>await</code> . </li><li>  Durch Aufrufen einer asynchronen Funktion erhalten Sie ein Wrapper-Objekt, wenn Sie wirklich einen Wert m√∂chten.  Sie k√∂nnen den Wert erst erweitern, wenn Sie <em>Ihre</em> Funktion asynchron gemacht und mit <code>await</code> aufgerufen haben (siehe jedoch den n√§chsten Absatz). </li><li>  Neben ein wenig wartender Dekoration haben wir zumindest dieses Problem gel√∂st. </li><li>  Die C # -Kernbibliothek ist √§lter als Asynchronit√§t, daher glaube ich, dass sie dieses Problem nie hatten. </li></ol><br><p>  <code>Async</code> <em>wirklich</em> besser.  Ich w√ºrde es vorziehen, an jedem Tag der Woche asynchron auf nackte R√ºckrufe zu warten.  Aber wir l√ºgen uns selbst an, wenn wir denken, dass alle Probleme gel√∂st sind.  Sobald Sie anfangen, Funktionen h√∂herer Ordnung zu schreiben oder Code wiederzuverwenden, stellen Sie erneut fest, dass die Farbe noch vorhanden ist und durch Ihren gesamten Quellcode blutet. </p><br><h1 id="kakoy-yazyk-_ne_-cvetnoy">  Welche Sprache ist <em>keine</em> Farbe? </h1><br><p>  JS, Dart, C # und Python haben dieses Problem.  CoffeeScript und die meisten anderen Sprachen werden auch in JS kompiliert (und Dart geerbt).  Ich denke sogar ClojureScript hat diesen Haken, trotz ihrer aktiven Bem√ºhungen mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">core.async</a> </p><br><p>  M√∂chten Sie wissen, welche nicht?  <em>Java</em>  Ich Recht?  Wie oft sagen Sie: "Ja, Java allein macht es richtig"?  Und so geschah es.  Zu ihrer Verteidigung versuchen sie aktiv, ihr Versehen zu korrigieren, indem sie <code>futures</code> und asynchrone E / A f√∂rdern.  Es ist wie ein Rennen, das immer schlimmer ist. </p><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">alles</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ist</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schon</a> in Java </blockquote><p>  C # <em>kann</em> dieses Problem auch umgehen.  Sie <em>entschieden sich f√ºr</em> Farbe.  Bevor sie async-await und all diesen <code>Task&lt;T&gt;</code> -Junk hinzugef√ºgt haben, k√∂nnen Sie einfach regul√§re synchrone API-Aufrufe verwenden.  Drei weitere Sprachen, die kein Farbproblem haben: Go, Lua und Ruby. </p><br><p>  Ratet mal, was sie gemeinsam haben? </p><br><p>  <em>Streams.</em>  Genauer gesagt: viele unabh√§ngige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Call-Stacks</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die wechseln k√∂nnen</a> .  Dies sind nicht unbedingt Threads des Betriebssystems.  Coroutinen in Go, Coroutinen in Lua und Threads in Ruby sind alle ausreichend. </p><br><p>  (Deshalb gibt es diese kleine Einschr√§nkung f√ºr C # - Sie k√∂nnen den asynchronen Schmerz in C # vermeiden, indem Sie Threads verwenden.) </p><br><h1 id="pamyat-o-proshlyh-operaciyah">  Erinnerung an vergangene Operationen </h1><br><p>  Das grundlegende Problem besteht darin, "wie am selben Ort fortzufahren, wenn der (asynchrone) Vorgang abgeschlossen ist"?  Sie st√ºrzten sich in den Abgrund des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aufrufstapels</a> und riefen dann eine Art E / A-Operation auf.  Zur Beschleunigung verwendet dieser Vorgang die zugrunde liegende asynchrone API Ihres Betriebssystems.  Sie <em>k√∂nnen es kaum</em> erwarten, bis es abgeschlossen ist.  Sie m√ºssen zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ereignisschleife</a> Ihrer Sprache zur√ºckkehren und dem Betriebssystem Zeit geben, um den Vorgang abzuschlie√üen. </p><br><p>  Sobald dies passiert ist, m√ºssen Sie wieder aufnehmen, was Sie getan haben.  Normalerweise merkt sich die Sprache √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufrufstapel,</a> wo sie war.  Er geht alle Funktionen durch, die im Moment aufgerufen wurden, und schaut, wo der Befehlsz√§hler in jeder von ihnen zeigt. </p><br><p>  Um jedoch asynchrone E / A auszuf√ºhren, m√ºssen Sie den gesamten Aufrufstapel in C abwickeln und verwerfen. Geben Sie Trick-22 ein.  Sie haben superschnelle E / A, aber Sie k√∂nnen das Ergebnis nicht verwenden!  Alle Sprachen mit asynchroner E / A unter der Haube - oder im Fall von JS die Browser-Ereignisschleife - sind gezwungen, dies irgendwie zu handhaben. </p><br><p>  Mit seinen f√ºr immer marschierenden R√ºckrufen stopft Node all diese Anrufe in Schlie√üungen.  Wenn Sie schreiben: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeSundae</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback</span></span></span><span class="hljs-function">) </span></span>{ scoopIceCream(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">iceCream</span></span></span><span class="hljs-function">) </span></span>{ warmUpCaramel(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">caramel</span></span></span><span class="hljs-function">) </span></span>{ callback(pourOnIceCream(iceCream, caramel)); }); }); }</code> </pre> <br><p>  Jeder dieser funktionalen Ausdr√ºcke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>schlie√üt</em></a> seinen gesamten umgebenden Kontext.  Dadurch werden Parameter wie <code>iceCream</code> und <code>caramel</code> vom Aufrufstapel auf den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heap √ºbertragen</a> .  Wenn eine externe Funktion ein Ergebnis zur√ºckgibt und der Aufrufstapel zerst√∂rt wird, ist das cool.  Die Daten befinden sich noch irgendwo auf dem Haufen. </p><br><p>  Das Problem ist, dass Sie jeden dieser verdammten Anrufe erneut beleben m√ºssen.  Es gibt sogar einen speziellen Namen f√ºr diese Konvertierung: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Continuation-Passing-Stil</a> </p><br><blockquote>  verbinde wilde Funktionalit√§t </blockquote><p>  Dies wurde in den 70er Jahren von Sprachhackern als Zwischendarstellung f√ºr den Einsatz unter der Haube von Compilern erfunden.  Dies ist eine sehr bizarre Art, Code einzuf√ºhren, der es einfacher macht, einige Compiler-Optimierungen durchzuf√ºhren. </p><br><p>  Niemand h√§tte jemals gedacht, dass ein Programmierer <em>solchen Code schreiben</em> k√∂nnte.  Und dann erschien Node und pl√∂tzlich geben wir alle vor, ein Compiler-Backend zu schreiben.  Wo haben wir den falschen Weg eingeschlagen? </p><br><p>  Beachten Sie, dass Versprechen und <code>futures</code> nicht wirklich viel helfen.  Wenn Sie sie verwenden, wissen Sie, dass Sie immer noch riesige Schichten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">funktionaler Ausdr√ºcke aufstapeln</a> .  Sie √ºbergeben sie einfach an <code>.then()</code> anstelle der asynchronen Funktion selbst. </p><br><h1 id="awaiting-a-generated-solution">  Warten auf eine generierte L√∂sung </h1><br><p>  Async-Warten hilft <em>wirklich</em> .  Wenn Sie unter der Haube auf den Compiler schauen, wenn er auf ihn <code>await</code> , werden Sie <code>await</code> , dass er tats√§chlich die CPS-Konvertierung durchf√ºhrt.  Aus diesem <em>Grund m√ºssen</em> Sie <code>await</code> in C # verwenden - dies ist ein Hinweis f√ºr den Compiler - "Stoppen Sie die Funktion hier in der Mitte."  Alles nach dem <code>await</code> wird zu einer neuen Funktion, die der Compiler in Ihrem Namen synthetisiert. </p><br><p>  Aus diesem Grund ben√∂tigt async-await keine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Laufzeitunterst√ºtzung</a> innerhalb des .NET Frameworks.  Der Compiler kompiliert dies zu einer Kette verwandter Abschl√ºsse, mit denen er bereits umgehen kann.  (Interessanterweise erfordern Closures auch keine Laufzeitunterst√ºtzung. Sie werden in anonyme Klassen kompiliert. In C # sind Closures nur Objekte.) </p><br><p>  Sie fragen sich wahrscheinlich, wann ich die Generatoren erw√§hne.  Gibt es in Ihrer Sprache <code>yield</code> ?  Dann kann er etwas sehr √Ñhnliches tun. </p><br><p>  (Ich glaube, dass Generatoren und asynchrones Warten tats√§chlich isomorph sind. Irgendwo in den staubigen Ecken und Winkeln meiner Festplatte befindet sich ein Code, der eine Spielschleife f√ºr Generatoren implementiert, die nur asynchrones Warten verwenden.) </p><br><p>  Also wo bin ich?  Oh ja.  Mit R√ºckrufen, Versprechungen, asynchronem Warten und Generatoren √ºbernehmen Sie am Ende Ihre asynchrone Funktion und teilen sie in eine Reihe von Abschl√ºssen auf, die auf dem Haufen leben. </p><br><p>  Ihre Funktion ruft zur Laufzeit extern auf.  Wenn die Ereignisschleife oder die E / A-Operation beendet ist, wird Ihre Funktion aufgerufen und an der Stelle fortgesetzt, an der sie sich befand.  Dies bedeutet jedoch, dass alles, was √ºber Ihre Funktion hinausgeht, <em>auch</em> zur√ºckkehren sollte.  Sie m√ºssen noch den gesamten Stapel wiederherstellen. </p><br><p>  Daher kommt die Regel "Es ist m√∂glich, die rote Funktion nur von der roten Funktion aus aufzurufen".  Sie m√ºssen den gesamten Aufrufstapel in Closures f√ºr <code>main()</code> oder den Event-Handler speichern. </p><br><h1 id="realizaciya-steka-vyzovov">  Stack-Implementierung aufrufen </h1><br><p>  Bei Verwendung von Threads ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gr√ºn</a> oder Betriebssystem) m√ºssen Sie dies jedoch nicht tun.  Sie k√∂nnen einfach den gesamten Thread anhalten und zum Betriebssystem oder zur Ereignisschleife springen, <em>ohne von all diesen Funktionen zur√ºckkehren zu m√ºssen</em> . </p><br><p>  Die Go-Sprache macht dies meines Wissens am perfektesten.  Sobald Sie eine E / A-Operation ausf√ºhren, parkt Go diese Coroutine und setzt alle anderen fort, die nicht durch E / A blockiert sind. </p><br><p>  Wenn Sie sich die E / A-Operationen in der Golang-Standardbibliothek ansehen, scheinen sie synchron zu sein.  Mit anderen Worten, sie funktionieren einfach und geben das Ergebnis zur√ºck, wenn sie fertig sind.  Diese Synchronisation bedeutet jedoch nicht dasselbe wie in Javascript.  Go-  ,    IO .  Go       . </p><br><p>   Go ‚Äî   <em></em>    ,        .       ,   ,    . </p><br><p>     ,               API,   ,     .           . </p><br><hr><br><h1 id="ot-perevodchika">   </h1><br><p>  ,           ,          .       ,        . ,      50%          . </p><br><p> ,      ,      ,                 . </p><br><p>  Javascript   -,   , ,   JS   ,    JS   ,          .   ,    JS   . </p><br><p>      ,      (     )   ‚Äî  ,     ,   ,        <code>async</code>         .     <code>import threading</code>      (  ,          AsyncIO, Twisted  Tornado,    ). </p><br><p>     ,             ,     ,     ,        ,                  ,      . </p><br><p>       ,     Go,     Go . </p><br><p>  ,        ,  ,  ( -    )          ,          "async-await  ".      . </p><br><p>    ,       . </p><br><p> ,       ,     . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466337/">https://habr.com/ru/post/de466337/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466319/index.html">Deal: VMware kauft Cloud-basierten Start</a></li>
<li><a href="../de466323/index.html">Wir erstellen ein tragbares Plattformspiel auf dem Cortex M0 + Mikrocontroller</a></li>
<li><a href="../de466329/index.html">Elektronische Karte der Weinherstellung in Russland. Design und Inhalt</a></li>
<li><a href="../de466333/index.html">So arrangieren Sie einen Arbeitsplatz f√ºr sich</a></li>
<li><a href="../de466335/index.html">Erstellen einer Slack-Anwendung mit 8base-Funktionen</a></li>
<li><a href="../de466339/index.html">Wie in Microsoft SQL Server Daten von Google Analytics mit R abrufen</a></li>
<li><a href="../de466341/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 33. Vorbereitung auf die ICND1-Pr√ºfung</a></li>
<li><a href="../de466347/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 34. Erweitertes VLAN-Konzept</a></li>
<li><a href="../de466349/index.html">So f√ºhren Sie A / B-Tests in 15.000 Offline-Stores durch</a></li>
<li><a href="../de466355/index.html">Krokodile fliegen, aber niedrig-niedrig (√ºber Ekranoplans ohne Emotionen, aber mit Abschweifungen)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>