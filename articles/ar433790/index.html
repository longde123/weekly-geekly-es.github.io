<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ ๐จ๐ฝโ๐ญ ๐๐ฝ ููุงูุจ ุงูุจูุงุก ุงููุชูุฏูุฉ ูุชุนุฏุฏุฉ ุงููุฑุงุญู ๐ธ ๐ฃ โ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุชูุญ ูู ูุธููุฉ ุงูุฅูุดุงุก ูุชุนุฏุฏ ุงููุฑุงุญู ูู ูููุงุช Dockerfile ุฅูุดุงุก ุตูุฑ ุญุงููุฉ ุตุบูุฑุฉ ุจูุณุชูู ุฃุนูู ูู ุงูุชุฎุฒูู ุงููุคูุช ูุญูุงูุฉ ุฃูู. ูู ูุฐู ุงูููุงูุฉ ุ ุณุฃุฑูู ุจุนุถ ุงูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงูุจ ุงูุจูุงุก ุงููุชูุฏูุฉ ูุชุนุฏุฏุฉ ุงููุฑุงุญู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/433790/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ae4/9db/b18/ae49dbb18f8454823b9e133b737cacf0.png" alt="ุงูุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุชุชูุญ ูู ูุธููุฉ ุงูุฅูุดุงุก ูุชุนุฏุฏ ุงููุฑุงุญู ูู ูููุงุช Dockerfile ุฅูุดุงุก ุตูุฑ ุญุงููุฉ ุตุบูุฑุฉ ุจูุณุชูู ุฃุนูู ูู ุงูุชุฎุฒูู ุงููุคูุช ูุญูุงูุฉ ุฃูู.  ูู ูุฐู ุงูููุงูุฉ ุ ุณุฃุฑูู ุจุนุถ ุงูููุงูุจ ุงููุชูุฏูุฉ - ุดูุก ุฃูุซุฑ ูู ูุณุฎ ุงููููุงุช ุจูู ุงูุฅูุดุงุก ูุงูุชุดุบูู.  ุฃููุง ุชุณูุญ ูู ูุชุญููู ุฃูุตู ูุฏุฑ ูู ุงูููุงุกุฉ ูุธููุฉ.  ููุน ุฐูู ุ ุฅุฐุง ููุช ูุจุชุฏุฆูุง ูู ูุฌุงู ุงูุชุฌููุน ูุชุนุฏุฏ ุงููุฑุงุญู ุ ููู ุงููุญุชูู ุฃููุงู ุฃูู ูู ูููู ูู ุงูุฎุทุฃ ูุฑุงุกุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฏููู</a> ุงููุณุชุฎุฏู. </p><a name="habracut"></a><br><h3 id="sovmestimost-versiy" style=";text-align:right;direction:rtl">  ุชูุงูู ุงูุฅุตุฏุงุฑ </h3><br><p style=";text-align:right;direction:rtl">  ุชูุช ุฅุถุงูุฉ ุฏุนู ุจูุงุก ูุชุนุฏุฏ ุงููุฑุงุญู ุฅูู Docker ูู ุงูุฅุตุฏุงุฑ v17.05.  ุชุนูู ุฌููุน ุงูููุงูุจ ูุน ุฃู ุฅุตุฏุงุฑ ูุงุญู ุ ููู ุจุนุถูุง ุฃูุซุฑ ูุงุนููุฉ ุ ุจูุถู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑูุงุจุท ุงูุชู</a> ุชุณุชุฎุฏู ุฌุงูุจ ุฎุงุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">BuildKit</a> .  ุฏุนูุง ูููู BuildKit ูุชุฎุทู ุจุดูู ูุนุงู ุงููุฑุงุญู ุบูุฑ ุงููุณุชุฎุฏูุฉ ุ ูุฅุฐุง ุฃููู ุ ูุฎูู ูุฑุงุญู ูู ููุณ ุงูููุช (ููุฏ ุฃุจุฑุฒุช ูุฐู ุงูุฃูุซูุฉ ุจุดูู ูููุตู).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุชู</a> ุญุงูููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุถุงูุฉ</a> BuildKit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅูู Moby</a> ููุงุฌูุฉ ุฎูููุฉ ุชุฌุฑูุจูุฉ ููุจูุงุก ููุฌุจ ุฃู ุชููู ูุชููุฑุฉ ูู Docker CE v18.06.  ูููู ุงุณุชุฎุฏุงูู ุฃูุถูุง ุจุดูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชูู</a> ุฃู ูุฌุฒุก ูู ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">img</a> . </p><br><hr><br><h4 id="nasledovanie-ot-etapa" style=";text-align:right;direction:rtl">  ุงูููุฑุงุซ ุงููุฑุญูุฉ </h4><br><p style=";text-align:right;direction:rtl"> ูุถูู ุงูุจูุงุก ูุชุนุฏุฏ ุงููุฑุงุญู ุงูุนุฏูุฏ ูู ููุงููู ุจูุงุก ุงูุฌููุฉ ุงูุฌุฏูุฏุฉ.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ููููู ุฅุนุทุงุก ุงููุฑุญูุฉ ุงูุชู ุชุจุฏุฃ ุจุงูุฃูุฑ <code>FROM</code> ุงุณู <code>AS stagename</code> ูุงุณุชุฎุฏุงู <code>--from=stagename</code> ูู <code>COPY</code> ููุณุฎ ุงููููุงุช ูู ูุฐู ุงููุฑุญูุฉ.  ูู ุงููุงูุน ุ ููุฌุฏ ุฃูุฑ ูุดุชุฑู ุจูู ุงูุฃูุฑ <code>FROM</code> ูุงูุชุณููุฉ <code>--from</code> ุ ูููุณ ูุฃู ุดูุก ูููุง ููุณ ุงูุงุณู.  ููุงููุง ูุฃุฎุฐ ููุณ ุงููุณูุทุฉ ุ ูุชุนุฑู ุนูููุง ุ ููุจุฏุฃ ูุฑุญูุฉ ุฌุฏูุฏุฉ ูู ูุฐู ุงูููุทุฉ ุ ุฃู ูุณุชุฎุฏููุง ููุตุฏุฑ ููุณุฎ ุงูููู.  ุฃู ูุงุณุชุฎุฏุงู ุงููุฑุญูุฉ ุงูุณุงุจูุฉ ูู ุฌูุฏุฉ ุงูุตูุฑุฉ ุงูุฃุตููุฉ ูููุฑุญูุฉ ุงูุญุงููุฉ ุ ูุง ููููู ุฃุฎุฐ ููุท - ูู <code>--from=stagename</code> ุ ูููู ุฃูุถูุง ุงุณู ุงููุฑุญูุฉ <code>FROM stagename</code> .  ูููู ูููุฏูุง ูู ุญุงูุฉ ุงุณุชุฎุฏุงู ููุณ ุงูุฃุฌุฒุงุก ุงูุดุงุฆุนุฉ ูู ุงูุนุฏูุฏ ูู ุงูุฃูุงูุฑ ูู Dockerfile: ููู ูููู ูู ุงูููุฏ ุงูุดุงุฆุน ููุจุณุท ุตูุงูุชู ุ ูุน ุฅุจูุงุก ุงูุฎุทูุงุช ุงููุฑุนูุฉ ูููุตูุฉ.  ูุจุงูุชุงูู ุ ูุง ูุคุซุฑ ุฅุนุงุฏุฉ ุฅูุดุงุก ูุฑุญูุฉ ูุงุญุฏุฉ ุนูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุชุฉ ููุชุฌููุน ููุขุฎุฑูู.  ููููุง ูุฐูู ุ ูููู ุชุฌููุน ูู ูุฑุญูุฉ ุนูู ุญุฏุฉ ุจุงุณุชุฎุฏุงู ุชุณููุฉ - <code>--target</code> ุนูุฏ ุงุณุชุฏุนุงุก <code>docker build</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM ubuntu AS base RUN apt-get update &amp;&amp; apt-get install git FROM base AS src1 RUN git clone โฆ FROM base as src2 RUN git clone โฆ</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงููุซุงู ุ ูุชู ุฅูุดุงุก ุงููุฑุญูุชูู ุงูุซุงููุฉ ูุงูุซุงูุซุฉ ูู BuildKit ูู ููุณ ุงูููุช. </p><br><h3 id="neposredstvennoe-ispolzovanie-obrazov" style=";text-align:right;direction:rtl">  ุงูุงุณุชุฎุฏุงู ุงููุจุงุดุฑ ููุตูุฑ </h3><br><p style=";text-align:right;direction:rtl">  ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุฃุณูุงุก ูุฑุญูุฉ ุงูุชุฌููุน ูู ุฃูุงูุฑ <code>FROM</code> ุงูุชู ูุงูุช ุชุฏุนู ูุฑุงุฌุน ุงูุตูุฑ ุณุงุจููุง ููุท ุ ููููู ุงุณุชุฎุฏุงู ุงูุตูุฑ ูุจุงุดุฑุฉ ุจุงุณุชุฎุฏุงู ุงูุชุณููุฉ - ูู.  ุงุชุถุญ ููุณุฎ ุงููููุงุช ูุจุงุดุฑุฉ ูู ูุฐู ุงูุตูุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ <code>linuxkit/ca-certificatesimage</code> ูู ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ูุจุงุดุฑุฉ ุฌุฐูุฑ TLS CA ุฅูู ุงูุฎุทูุฉ ุงูุญุงููุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM alpine COPY --from=linuxkit/ca-certificates / /</code> </pre> <br><h3 id="psevdonim-obschego-obraza" style=";text-align:right;direction:rtl">  ุตูุฑุฉ ุงูุงุณู ุงููุณุชุนุงุฑ ุงูุดุงุฆุนุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูุง ุชุชุถูู ูุฑุญูุฉ ุงูุฅูุดุงุก ุจุงูุถุฑูุฑุฉ ุฃู ุฃูุงูุฑ ุ  ูุฏ ุชุชููู <code>FROM</code> ุฎุท <code>FROM</code> ูุงุญุฏ.  ุฅุฐุง ููุช ุชุณุชุฎุฏู ุงูุตูุฑุฉ ูู ุนุฏุฉ ุฃูุงูู ุ ูุณูุคุฏู ุฐูู ุฅูู ุชุจุณูุท ุนูููุฉ ุงููุฑุงุกุฉ ูุฌุนููุง ุจุญูุซ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชุญุฏูุซ ุงูุตูุฑุฉ ุงูุฅุฌูุงููุฉ ุ ูุฅูู ุชุญุชุงุฌ ููุท ุฅูู ุชุบููุฑ ุณุทุฑ ูุงุญุฏ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM alpine:3.6 AS alpine FROM alpine RUN โฆ FROM alpine RUN โฆ</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงููุซุงู ุ ูู ููุงู ูุณุชุฎุฏู ุตูุฑุฉ ุฌุจุงู ุงูุฃูุจ ููุชุฒู ูุนูููุง ุจู <code>alpine:3.6</code> ุ ูููุณ <code>alpine:latest</code> .  ุนูุฏูุง ูุญูู ุงูููุช ููุชุฑููุฉ ุฅูู <code>alpine:3.7</code> ุ ุณุชุญุชุงุฌ ุฅูู ุชุบููุฑ ุณุทุฑ ูุงุญุฏ ุ ููุง ุดู: ุงูุขู ุชุณุชุฎุฏู ุฌููุน ุนูุงุตุฑ ุงูุชุฌููุน ุฅุตุฏุงุฑูุง ูุญุฏุซูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุงูุฃูู ุนูุฏ ุงุณุชุฎุฏุงู ูุณูุทุฉ ุงูุฅูุดุงุก ูู ุงูุงุณู ุงููุณุชุนุงุฑ.  ูุดุจู ุงููุซุงู ุงูุชุงูู ุงููุซุงู ุงูุณุงุจู ุ ููููู ูุณูุญ ูููุณุชุฎุฏู ุจุฅุนุงุฏุฉ ุชุนุฑูู ุฌููุน ูุซููุงุช ุงูุชุฌููุน ุงูุชู ุชุดุงุฑู ูููุง ุตูุฑุฉ ุฌุจุงู ุงูุฃูุจ ุนู ุทุฑูู ุชุนููู <code>--build-arg ALPINE_VERSION=value</code> ุฎูุงุฑ <code>--build-arg ALPINE_VERSION=value</code> .  ุชุฐูุฑ: ูุฌุจ ุชุญุฏูุฏ ุฃู ูุณูุทุงุช ูุณุชุฎุฏูุฉ ูู ุฃูุงูุฑ <code>FROM</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุจู ูุฑุญูุฉ ุงูุฅูุดุงุก ุงูุฃููู</a> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ARG ALPINE_VERSION=3.6 FROM alpine:${ALPINE_VERSION} AS alpine FROM alpine RUN โฆ</code> </pre> <br><h3 id="ispolzovanie-argumentov-sborki-v-from" style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ูุณูุทุงุช ุงูุฅูุดุงุก ูู "- ูู" </h3><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃูุง ุชุญุชูู ุงููููุฉ ุงููุญุฏุฏุฉ ูู - ูู ุชุณููุฉ <code>COPY</code> ุนูู ูุณูุทุงุช ุงูุชุฌููุน.  ุนูู ุณุจูู ุงููุซุงู ุ ุงููุซุงู ุงูุชุงูู ุบูุฑ ุตุงูุญ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// THIS EXAMPLE IS INTENTIONALLY INVALID FROM alpine AS build-stage0 RUN โฆ FROM alpine ARG src=stage0 COPY --from=build-${src} . .</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃูู ูุฌุจ ุชุญุฏูุฏ ุงูุชุจุนูุงุช ุจูู ุงููุฑุงุญู ูุจู ุจุฏุก ุงูุชุฌููุน.  ุซู ุงูุชูููู ุงููุณุชูุฑ ูุฌููุน ุงููุฑู ุบูุฑ ูุทููุจ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฃู ูุคุซุฑ ูุชุบูุฑ ุงูุจูุฆุฉ ุงููุญุฏุฏ ูู ุตูุฑุฉ <code>alpine</code> ุนูู ุชูููู ุงููููุฉ - ูู.  ุงูุณุจุจ ูู ุฃูู ูููููุง ุชูููู ูุณูุทุงุช ุงูุฃูุฑ <code>FROM</code> ูู ุฃู ูุฐู ุงููุณุงุฆุท ูุชู ุชุนุฑูููุง ุนุงููููุง ูุจู ุจุฏุก ุฃู ูุฑุญูุฉ.  ูุญุณู ุงูุญุธ ุ ููุง ุงูุชุดููุง ุณุงุจููุง ุ ูููู ุชุญุฏูุฏ ูุฑุญูุฉ ุงูุงุณู ุงููุณุชุนุงุฑ ุจุงุณุชุฎุฏุงู ุฃูุฑ <code>FROM</code> ูุงุญุฏ ูุงูุฅุดุงุฑุฉ ุฅููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ARG src=stage0 FROM alpine AS build-stage0 RUN โฆ FROM build-${src} AS copy-src FROM alpine COPY --from=copy-src . .</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุฅุฐุง ุชุฌุงูุฒุช ูุณูุทุฉ ุงูุชุฌููุน <code>src</code> ุ <code>src</code> ุงูุฎุทูุฉ ุงูุฃูููุฉ ูุนูุตุฑ <code>COPY</code> ุงูููุงุฆู.  ูุฑุฌู ููุงุญุธุฉ: ุฅุฐุง ูู ุชุนุฏ ุชุณุชุฎุฏู ุจุนุถ ุงูุฎุทูุงุช ุ ููู ูุชููู ูู ุชุฎุทููุง ุฅูุง ุงูุฑูุงุจุท ุงููุงุฆูุฉ ุนูู BuildKit. </p><br><h3 id="usloviya-ispolzuyuschie-argumenty-sborki" style=";text-align:right;direction:rtl">  ุงูุดุฑูุท ุจุงุณุชุฎุฏุงู ุจูุงุก ุงูุญุฌุฌ </h3><br><p style=";text-align:right;direction:rtl">  ุทูุจ ููุง ุฅุถุงูุฉ ุฏุนู ูุดุฑูุท ููุท <code>IF/ELSE</code> ุฅูู Dockerfile.  ูุง ูุนุฑู ุญุชู ุงูุขู ูุง ุฅุฐุง ููุง ุณูุถูู ุดูุฆูุง ูุดุงุจููุง ุ ูููู ูู ุงููุณุชูุจู ุณูุญุงูู ุงุณุชุฎุฏุงู ุฏุนู ุงูุนููู ูู BuildKit.  ููู ุงูููุช ููุณู ุ ูู ุฃุฌู ุชุญููู ุณููู ููุงุซู ุ ููููู ุงุณุชุฎุฏุงู ุงูููุงููู ุงูุญุงููุฉ ูุชุนุฏุฏุฉ ุงููุฑุงุญู (ูุน ุจุนุถ ุงูุชุฎุทูุท). </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// THIS EXAMPLE IS INTENTIONALLY INVALID FROM alpine RUN โฆ ARG BUILD_VERSION=1 IF $BUILD_VERSION==1 RUN touch version1 ELSE IF $BUILD_VERSION==2 RUN touch version2 DONE RUN โฆ</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุถุญ ุงููุซุงู ุงูุณุงุจู ุงูููุฏ ุงูุฒุงุฆู ูุธุฑูู ุงูุชุณุฌูู ุจุงุณุชุฎุฏุงู <code>IF/ELSE</code> .  ูุชุญููู ุณููู ูุดุงุจู ูุน ุนูููุงุช ุงูุฅูุดุงุก ุงูุญุงููุฉ ูุชุนุฏุฏุฉ ุงููุฑุงุญู ุ ูุฏ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุดุฑูุท ุงููุฑุน ุงููุฎุชููุฉ ูุฎุทูุงุช ูููุตูุฉ ูุงุณุชุฎุฏุงู ูุณูุทุฉ ูุชุญุฏูุฏ ูุณุงุฑ ุงูุชุจุนูุฉ ุงูุตุญูุญ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ARG BUILD_VERSION=1 FROM alpine AS base RUN โฆ FROM base AS branch-version-1 RUN touch version1 FROM base AS branch-version-2 RUN touch version2 FROM branch-version-${BUILD_VERSION} AS after-condition FROM after-condition RUN โฆ</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุณุชูุฏ ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูู Dockerfile ุฅูู ุงูุฎุทูุฉ <code>after-condition</code> ุ ููู ุงูุงุณู ุงููุณุชุนุงุฑ ููุตูุฑุฉ (ูุชู ุงูุชุนุฑู ุนููู ุงุณุชูุงุฏูุง ุฅูู <code>BUILD_VERSION</code> ุจูุงุก <code>BUILD_VERSION</code> ).  ุงุนุชูุงุฏูุง ุนูู ูููุฉ <code>BUILD_VERSION</code> ุ ูุชู ุชุญุฏูุฏ ูุฐู ุงููุฑุญูุฉ ุฃู ุชูู ูู ุงููุณู ุงูุฃูุณุท. </p><br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ููุงุญุธุฉ: ููุท ุงูุฑูุงุจุท ุงููุงุฆูุฉ ุนูู BuildKit ูููููุง ุชุฎุทู ุงููุฑูุน ุบูุฑ ุงููุณุชุฎุฏูุฉ.  ูู ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ ูู ุงูุฑูุงุจุท ุ ุณูุชู ุจูุงุก ุฌููุน ุงููุฑุงุญู ุ ูููู ูุจู ุฅูุดุงุก ุงูุตูุฑุฉ ุงูููุงุฆูุฉ ุ ุณูุชู ุชุฌุงูู ูุชุงุฆุฌูุง. </p><br><h3 id="pomoschnik-po-razrabotketestirovaniyu-dlya-minimalnogo-proizvodstvennogo-etapa" style=";text-align:right;direction:rtl">  ูุณุงุนุฏ ุงูุชุทููุฑ / ุงูุงุฎุชุจุงุฑ ููุฑุญูุฉ ุงูุฅูุชุงุฌ ุงูุฏููุง </h3><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฎุชุงู ุ ุฏุนูุง ููุธุฑ ุฅูู ูุซุงู ุนูู ุฏูุฌ ุงูููุงูุจ ุงูุณุงุจูุฉ ูุดุฑุญ ููููุฉ ุฅูุดุงุก ููู Dockerfile ูููู ุจุฅูุดุงุก ุตูุฑุฉ ุฅูุชุงุฌูุฉ ุฏููุง ููููู ุจุนุฏ ุฐูู ุงุณุชุฎุฏุงู ูุญุชููุงุชู ูุงุฎุชุจุงุฑ ุตูุฑุฉ ุชุทููุฑ ูุฅูุดุงุกูุง.  ููุจุฏุฃ ุจูุซุงู Dockerfile ุงูุฃุณุงุณู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM golang:alpine AS stage0 โฆ FROM golang:alpine AS stage1 โฆ FROM scratch COPY --from=stage0 /binary0 /bin COPY --from=stage1 /binary1 /bin</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุชู ุฅูุดุงุก ุตูุฑุฉ ุฅูุชุงุฌ ุงูุญุฏ ุงูุฃุฏูู ุ ููุฐุง ุฎูุงุฑ ุดุงุฆุน ุฅูู ุญุฏ ูุง.  ูููู ูุงุฐุง ูู ููุช ุจุญุงุฌุฉ ุฃูุถูุง ุฅูู ุงูุญุตูู ุนูู ุตูุฑุฉ ูุทูุฑุฉ ุจุฏููุฉ ุฃู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ูุน ูุฐู ุงูุซูุงุฆูุงุช ูู ุงููุฑุญูุฉ ุงูููุงุฆูุฉุ  ุฃูู ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ุจุจุณุงุทุฉ ูุณุฎ ุซูุงุฆูุงุช ููุงุซูุฉ ูู ูุฑุงุญู ุงูุงุฎุชุจุงุฑ ูุงูุชุทููุฑ.  ุงููุดููุฉ ูู ูุฐู: ููุณ ููุงู ูุง ูุถูู ุฃูู ุณูู ุชุฎุชุจุฑ ุฌููุน ุซูุงุฆูุงุช ุงูุฅูุชุงุฌ ูู ููุณ ุงููุฌููุนุฉ.  ูู ุงููุฑุญูุฉ ุงูุฃุฎูุฑุฉ ุ ูุฏ ูุชุบูุฑ ุดูุก ูุง ุ ูููู ุณุชูุณู ุฅุฌุฑุงุก ุชุบููุฑุงุช ููุงุซูุฉ ูู ูุฑุงุญู ุฃุฎุฑู ุฃู ุงุฑุชูุงุจ ุฎุทุฃ ูู ุทุฑููุฉ ูุณุฎ ุงููููุงุช ุงูุซูุงุฆูุฉ.  ูู ุงูููุงูุฉ ุ ูุญู ูุง ูุฎุชุจุฑ ููููุง ุซูุงุฆูุงู ูููุตูุงู ุ ุจู ุงูุตูุฑุฉ ุงูููุงุฆูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุจุฏูู ูู ุชุญุฏูุฏ ูุฑุญูุฉ ุงูุชุทููุฑ ูุงูุงุฎุชุจุงุฑ ุจุนุฏ ูุฑุญูุฉ ุงูุฅูุชุงุฌ ููุณุฎ ูุญุชููุงุช ูุฑุญูุฉ ุงูุฅูุชุงุฌ ุจุฃููููุง.  ุซู ุงุณุชุฎุฏู ุฃูุฑ <code>FROM</code> ูุงุญุฏ ูุฎุทูุฉ ุงูุฅูุชุงุฌ ูุฌุนู ุฎุทูุฉ ุงูุฅูุชุงุฌ ุงูุงูุชุฑุงุถูุฉ ูู ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูุฑุฉ ุฃุฎุฑู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM golang:alpine AS stage0 โฆ FROM scratch AS release COPY --from=stage0 /binary0 /bin COPY --from=stage1 /binary1 /bin FROM golang:alpine AS dev-env COPY --from=release / / ENTRYPOINT ["ash"] FROM golang:alpine AS test COPY --from=release / / RUN go test โฆ FROM release</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุดูู ุงูุชุฑุงุถู ุ ุณูุณุชูุฑ Dockerfile ูู ุชูููู ุตูุฑุฉ ุงูุชุฑุงุถูุฉ ุฏููุง ุ ุจูููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุงูุชุฌููุน ุงูุฐู ูุญุชูู ุนูู ุงูุฎูุงุฑ - <code>--target=dev-env</code> ุจุฅูุดุงุก ุตูุฑุฉ ุชุญุชูู ุนูู ุบูุงู ูุญุชูู ุนูู ุฌููุน ุซูุงุฆูุงุช ุงูุฅุตุฏุงุฑ ุงูููุงุฆู. </p><br><hr><br><p style=";text-align:right;direction:rtl">  ุขูู ุฃู ูููู ูุฐุง ูููุฏูุง ูุงูุชุฑุญ ููููุฉ ุฅูุดุงุก Dockerfiles ูุชุนุฏุฏุฉ ุงููุฑุงุญู ุฃูุซุฑ ููุงุกุฉ.  ุฅุฐุง ููุช ุชุดุงุฑู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DockerCon2018</a> ูุชุฑุบุจ ูู ูุนุฑูุฉ ุงููุฒูุฏ ุญูู ุนูููุงุช ุงูุฅูุดุงุก ูุชุนุฏุฏุฉ ุงููุฑุงุญู ุฃู Dockerfiles ุฃู BuildKit ุฃู ุฃู ููุงุถูุน ุฐุงุช ุตูุฉ ุ ููู ุจุงูุชุณุฌูู ูู ุฑุงุจุท <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุงุฑ Hallway</a> ุฃู ูุชุงุจุนุฉ ุงูุงุฌุชูุงุนุงุช ุงูุฏุงุฎููุฉ ูููุตุฉ Docker ุนูู ูุณุงุฑุงุช <a href="">Contribute ู Collaborate</a> ุฃู <a href="">Black Belt</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar433790/">https://habr.com/ru/post/ar433790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar433776/index.html">MongoDB ุงูุฐูุงุจ ุณุงุฆู ุชุนูููู</a></li>
<li><a href="../ar433780/index.html">ุงูุงูุชูุงู ูู ูุฌููุนุฉ UI ุฅูู ูุธุงู ุงูุชุตููู ูู QIWI</a></li>
<li><a href="../ar433782/index.html">ูุซุงู ุนููู ูุฅูุดุงุก ูููู ุงูุนุฑุถ ุงูุฎุงุต ุจู</a></li>
<li><a href="../ar433786/index.html">Fintech Digest: cryptocurrency ูู ุฎุงุตูุฉ ุ ุชู ุฅุตุฏุงุฑ ุนุฏุฏ ููุงุณู ูู ุจุทุงูุงุช ุงูุงุฆุชูุงู ูู ุงูุงุชุญุงุฏ ุงูุฑูุณู</a></li>
<li><a href="../ar433788/index.html">ุตููุฉ ุขููุฉ ููุฑุงุฌุนุงุช ุฌุฏูุฏุฉ ูุญุณุงุจูู ุงูุฎุงุต</a></li>
<li><a href="../ar433792/index.html">ูุตูุต ุดู ูู Ansible</a></li>
<li><a href="../ar433796/index.html">ููู ุบุฒุง ูููู ุณุงุจููุณ ุงูุนุงูู. ููุงุฑุงุช ุงูุงุชุตุงู ูุงูุชูุงูุถ</a></li>
<li><a href="../ar433798/index.html">HomeKit ู ioBroker ูููู ุตุฏุงูุงุช ูู ุงูููุฒู</a></li>
<li><a href="../ar433800/index.html">ุงุณุชุฎุฏุงู ูุญุฏุงุช ุชุญูู Cypress ูู UDB PSoC ูุชูููู ุงูุงููุทุงุนุงุช ูู ุทุงุจุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ</a></li>
<li><a href="../ar433802/index.html">ููู ูููุงุฐุง ูุฒูุง ูู ูุณุงุฑ ุงูุจูุงูุงุช ุงููุจูุฑุฉ ูู Urban Tech Challenge Hackathon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>