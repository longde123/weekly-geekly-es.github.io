<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💾 😯 🅰️ 如何制作将照片转换为漫画书的机器人：傻瓜的分步说明 👩🏽‍💻 👩‍🚒 👋🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="第一部分，补充。 
  Cotans，嗨。 
 我是Sasha，我沉迷于神经元。 

 在工作人员的要求下，我终于集思广益，并决定编写一系列简短且几乎循序渐进的说明。 

 有关如何从头开始训练和部署神经网络的说明，同时与电报机器人交朋友。 

 有关像我这样的假人的说明。  今天，我们将选择神经网...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何制作将照片转换为漫画书的机器人：傻瓜的分步说明</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479218/">  <i>第一部分，补充。</i> <i><br></i> <blockquote>  Cotans，嗨。 <br> 我是Sasha，我沉迷于神经元。 <br><br> 在工作人员的要求下，我终于集思广益，并决定编写一系列简短且几乎循序渐进的说明。 <br><br> 有关如何从头开始训练和部署神经网络的说明，同时与电报机器人交朋友。 <br><br> 有关像我这样的假人的说明。 </blockquote> 今天，我们将选择神经网络的体系结构，对其进行测试，并收集我们的第一个训练数据集。 <br><br><h2> 架构选择 </h2><br> 在成功完成了<a href="https://t.me/selfie2animebot" rel="nofollow">selfie2anime</a> bot的启动后（使用现成的<a href="https://github.com/taki0112/UGATIT" rel="nofollow">UGATIT</a>模型），我想做同样的事情，但是我的。 例如，将您的照片变成漫画的模型。 <br><br> 这是我的<a href="https://t.me/photo2comicsbot" rel="nofollow">photo2comicsbot的</a>一些示例，我们将做类似的事情。 <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/7h/yh/sk/7hyhskjvb1hhlhfyiytr5afcl4q.png"><br><img src="https://habrastorage.org/webt/5c/qd/av/5cqdavi7b-i_fna2ienr4_5hrmu.png"><br><img src="https://habrastorage.org/webt/ej/vy/tn/ejvytnyo92bdr-jmitilezpt60k.png"><br><br> 由于<a href="https://github.com/taki0112/UGATIT" rel="nofollow">UGATIT</a>模型对于我的视频卡来说太重了，因此我提请注意一个较旧但不那么<a href="https://github.com/junyanz/pytorch-CycleGAN-and-pix2pix" rel="nofollow">令人讨厌的</a>类比<a href="https://github.com/junyanz/pytorch-CycleGAN-and-pix2pix" rel="nofollow">-CycleGAN</a> <br><br> 在此实现中，存在几种模型体系结构以及浏览器中学习过程的便捷可视化显示。 <br><br> 与<a href="https://github.com/lengstrom/fast-style-transfer" rel="nofollow">用于</a>在单个图像上<a href="https://github.com/lengstrom/fast-style-transfer" rel="nofollow">传递样式的体系结构</a>一样<a href="https://github.com/lengstrom/fast-style-transfer" rel="nofollow">，</a> CycleGAN不需要成对的图像进行训练。 这很重要，因为否则我们将不得不将所有照片重新绘制到漫画中以创建训练集。 <br><br> 我们将为算法设置的任务包括两部分。 <br> 在输出中，我们应该得到一张图片： <br><br>  a）类似于漫画书 <br>  b）与原始图片相似 <br><br> 可以使用通常的GAN来实现“ a”点，受过训练的评论家将负责“模仿漫画”。 <br><br><div class="spoiler">  <b class="spoiler_title">有关GAN的更多信息</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/-g/j-/hq/-gj-hqvnumsgc7k1xuaau7d8tfe.jpeg"><br><br>  GAN（即生成对抗网络）是两个神经网络的对：生成器网络和评论家网络。 <br> 生成器将输入内容（例如，从照片转换为漫画书），然后批评者将得到的“伪造”结果与真实漫画书进行比较。 生成器的工作是欺骗评论家，反之亦然。 <br><br> 在学习过程中，生成器学习创建与真实漫画越来越相似的漫画，而评论家则学会更好地区分漫画。 <br></div></div><br> 第二部分比较复杂。 如果我们将图片配对，则在“ A”组中有照片，而在“ B”组中有照片，但是将它们重绘为漫画（也就是我们希望从模型中得到的照片），我们可以只是将生成器产生的结果与训练集“ B”中的配对图像进行比较。 <br><br> 在我们的情况下，集合“ A”和“ B”绝没有相互连接。 在“ A”组中-随机照片，在“ B”组中-随机漫画。 <br><br> 将假漫画与“ B”中的一些随机漫画进行比较是毫无意义的，因为这将至少复制评论家的功能，更不用说不可预测的结果了。 <br><br> 这就是CycleGAN架构的得力之处。 <br><br> 简而言之，这是GAN对，其中第一对将图像从类别“ A”（例如照片）转换为类别“ B”（例如漫画书），第二对将图像从类别“ B”转换为类别“ A”。 <br><br><img src="https://habrastorage.org/webt/jl/0d/eg/jl0deg09yccaa8sez0djtsti4fo.jpeg"><br><br> 模型的训练既基于原始照片与还原照片的比较（作为循环“ A”-“ B”-“ A”，“照片漫画照片”的结果），也包括在常规GAN中的评论家数据。 <br><br> 这样就可以完成我们的任务的两个部分：生成与其他漫画没有区别的漫画书，同时又类似于原始照片。 <br><br><h2> 模型安装和验证 </h2><br> 要实施我们的狡猾计划，我们需要： <br><br><ul><li> 具有CUDA的图形卡，具有8GB RAM </li><li>  Linux操作系统 </li><li> 带有Python 3.5+的Miniconda / Anaconda </li></ul><br> 如果您不满意设置，则RAM小于8GB的视频卡也可以工作。 它也可以在Windows上运行，但速度较慢，相差至少1.5到2倍。 <br><br>  <i>如果您没有支持CUDA的GPU，或者太懒惰而无法全部设置，则可以随时使用Google Colab。</i>  <i>如果有足够多的人想要，我将填写该教程以及如何在Google云中启动以下所有步骤。</i> <br><br>  <a href="https://docs.conda.io/en/latest/miniconda.html" rel="nofollow">迷你康达可以在这里</a> <br>  <a href="https://conda.io/projects/conda/en/latest/user-guide/install/index.html" rel="nofollow">安装说明</a> <br><br> 安装Anaconda / Miniconda（以下称为conda）后，为我们的实验创建一个新环境并激活它： <br><br>  <i>（Windows用户需要首先从“开始”菜单启动Anaconda Prompt）</i> <br><br><pre><code class="bash hljs">conda create --name cyclegan conda activate cyclegan</code> </pre> <br> 现在，所有软件包都将安装在活动环境中，而不会影响环境的其余部分。 如果您需要各种软件包的特定版本组合，例如，如果您使用别人的旧代码，并且需要安装过时的软件包而又不破坏您的生活和主要工作环境，那么这将很方便。 <br><br> 接下来，只需按照发行版中的README.MD说明进行操作： <br><br> 保存CycleGAN分发： <br><br>  <i>（或只是从GitHub下载档案）</i> <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/junyanz/pytorch-CycleGAN-and-pix2pix <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> pytorch-CycleGAN-and-pix2pix</code> </pre> <br> 安装必要的软件包： <br><br><pre> <code class="bash hljs">conda install numpy pyyaml mkl mkl-include setuptools cmake cffi typing conda install pytorch torchvision -c pytorch conda install visdom dominate -c conda-forge</code> </pre> <br> 下载完成的数据集和相应的模型： <br><br><pre> <code class="bash hljs">bash ./datasets/download_cyclegan_dataset.sh horse2zebra bash ./scripts/download_cyclegan_model.sh horse2zebra</code> </pre> <br> 注意下载的数据集中的照片。 <br><br> 如果打开上一段中的脚本文件，则可以看到还有其他现成的数据集和模型。 <br><br> 最后，在下载的数据集上测试模型： <br><br><pre> <code class="bash hljs">python test.py --dataroot datasets/horse2zebra/testA --name horse2zebra_pretrained --model <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> --no_dropout</code> </pre><br> 结果将保存在/ results / horse2zebra_pretrained /文件夹中 <br><br><h2> 创建训练集 </h2><br> 选择未来模型的体系结构（并在github上搜索完成的实现）之后，同样重要的一步是编译一个数据集或数据集，我们将在该数据集或数据集上进行训练和测试。 <br><blockquote> 几乎所有内容都取决于我们使用什么数据。 例如，用于<a href="https://t.me/selfie2animebot" rel="nofollow">selfie2动漫</a>机器人的<a href="https://t.me/selfie2animebot" rel="nofollow">UGATIT</a>在女性自拍照和动漫女性面孔方面接受了培训。 因此，在拍摄男性照片时，她的行为至少很有趣，用高领的小女孩代替了残酷的胡须男人。 在照片中，您谦卑的仆人得知他正在观看动漫后，便开始活动。 <br><br><img src="https://habrastorage.org/webt/iz/b1/yl/izb1yltkkhenla6oo5ajvbqrujg.jpeg"><br><br> 正如您已经了解的那样，值得选择要在输入中使用并在输出中使用的照片/漫画。 您是否打算处理自拍照-从漫画，建筑物照片添加自拍照和脸部特写-在建筑物中添加建筑物照片和漫画中的页面。 <br></blockquote> 作为示例照片，我使用了<a href="" rel="nofollow">DIV2K</a>和<a href="" rel="nofollow">Urban100</a> ，并用Google明星的照片进行了<a href="" rel="nofollow">修饰</a> ，以增强多样性。 <br><br> 我从漫威宇宙中拿出了漫画，整个页面，丢掉了广告和公告，而这些照片和图片看起来都不像漫画书。 出于明显的原因，我无法附加该链接，但是如果您知道我的意思，那么在Marvel Comics的要求下，您可以轻松地在喜爱的网站上找到带有漫画的扫描选项。 <br><br> 重要的是要注意绘图，它在不同的系列和配色方案中有所不同。 <br><br><img src="https://habrastorage.org/webt/qn/na/7e/qnna7eye4d7reejujjdafcv682a.png"><br><br> 我有很多死侍和蜘蛛侠，所以皮肤变得非常红。 <br><br> 其他公共数据集的不完整列表可以在<a href="http://datasets.visionbib.com/info-index.html" rel="nofollow">此处</a>找到。 <br><br> 我们的数据集中的文件夹结构应如下所示： <br><br>  selfie2comics <br>  ├──火车A <br>  ├──火车B <br>  ├──测试A <br>  └──testB <br><br>  trainA-我们的照片（约1000个） <br>  testA-一些用于模型测试的照片（30张就足够了） <br>  trainB-我们的漫画（约1000个） <br>  testB-测试漫画（30个） <br><br> 如果可能，建议将数据集放置在SSD上。 <br><br> 今天就这些了，在下一期中，我们将开始训练模型并获得第一个结果！ <br><br> 如果您遇到问题，请务必写信，这将有助于提高领导能力并减轻后续读者的痛苦。 <br><br> 如果您已经尝试训练模型，请随时在评论中分享结果。 待会见！ <br><br>  <a href="https://habr.com/ru/post/483168/">⇨下一部分</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN479218/">https://habr.com/ru/post/zh-CN479218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN479200/index.html">分形图像压缩</a></li>
<li><a href="../zh-CN479202/index.html">C ++和数值方法：近似牛顿-科茨积分</a></li>
<li><a href="../zh-CN479210/index.html">自2020年1月1日起，外国在线商店的购买将发生什么</a></li>
<li><a href="../zh-CN479214/index.html">莫斯科＃2开发人员即将到来的免费活动精选</a></li>
<li><a href="../zh-CN479216/index.html">第二次风Pandora DXL 3000或我如何固定自己的遥测</a></li>
<li><a href="../zh-CN479220/index.html">Nano-neuron-7个简单的JavaScript函数，显示机器如何“学习”</a></li>
<li><a href="../zh-CN479222/index.html">＃325移动开发人员的有趣材料摘要（12月2日至8日）</a></li>
<li><a href="../zh-CN479226/index.html">Habr分析：用户从Habr订购什么作为礼物</a></li>
<li><a href="../zh-CN479230/index.html">使用草率的注释记录您的Express API</a></li>
<li><a href="../zh-CN479232/index.html">Spring Boot上的MQ JMS应用程序开发</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>