<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí∏ üè≥Ô∏è üïî Smart Home: Eine neue Dimension des Komforts und das Streben nach Spitzenleistungen. Teil zwei üõ≥Ô∏è üë∂üèº üåé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im ersten Teil habe ich √ºber den √úbergang von reinen √úberwachungssystemen zu einem Smart Home selbst gesprochen. Zu diesem Zeitpunkt wurde das enorme ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Smart Home: Eine neue Dimension des Komforts und das Streben nach Spitzenleistungen. Teil zwei</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/419151/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Im ersten Teil habe</a> ich √ºber den √úbergang von reinen √úberwachungssystemen zu einem Smart Home selbst gesprochen.  Zu diesem Zeitpunkt wurde das enorme Potenzial zur Verbesserung des Komforts verstanden, und die F√§higkeiten des ausgew√§hlten Technologie-Stacks erregten die Aufregung bei der Entwicklung und Integration neuer Komponenten. <br><br><img src="https://habrastorage.org/webt/hy/yv/pf/hyyvpfrqg1tx-jp1b5zpbtyzag8.jpeg"><br><a name="habracut"></a><br>  Betrachten Sie den Aspekt der "Aufregung" genauer.  Nach den unternommenen Schritten ist es schwierig geworden, das Smart Home in der Entwicklung zu stoppen.  Nach den USR IOT WiFi-Ger√§ten war der von DIY-Chic geliebte ESP8266-Mikrocontroller an der Reihe.  Ich habe die ESP8266-12-Builds mit den LoLin v3 NodeMCU- und Wemos D1-Mini-USB-Anschl√ºssen verwendet.  Beginnen Sie mit dem Hervorheben des oben bereits erw√§hnten Bildes.  Skizzen f√ºr ESP8266 werden bequem in der Arduino IDE entwickelt, nachdem das entsprechende Plug-In angeschlossen wurde.  Dort finden Sie viele Beispiele, die die Entwicklung auch ohne Vorbereitung sehr einfach machen.  Daher ist die Auflistung von Spreads √ºbrigens wenig sinnvoll. <br><br>  <i>Abgebildet ist LoLin v3 NodeMCU mit ESP8266-12.</i>  <i>Anschluss - Micro-USB.</i> <br><img src="https://habrastorage.org/webt/6d/gy/9y/6dgy9y-oaxk8jdbqef4jch2z6iq.jpeg" align="left">  Es ist nur wichtig, ein Protokoll f√ºr die Interaktion mit openHAB zu vereinbaren.  Ich habe MQTT nicht verwendet, sondern die Integration direkt durchgef√ºhrt, da dies mit dem ausgew√§hlten zentralisierten Verwaltungsmodell konsistenter ist. <img src="https://habrastorage.org/webt/sd/xl/bu/sdxlbuwmwlsnbmvfmwg8ycvjy8e.jpeg" align="right">  Auf dem Controller mit ESP8266 steigt der einfachste Server an, der die Anforderung empf√§ngt, analysiert und den extrahierten Befehl ausf√ºhrt.  Die Anforderung wird mit dem Curl-Dienstprogramm an openHAB gesendet (entweder "manuell" oder als Ergebnis der Regel).  Der Controller sendet die Best√§tigung √ºber den Empfang des Befehls, den Wert der gemessenen Parameter und den Status der verbundenen ausf√ºhrenden Ger√§te √ºber das lokale Netzwerk √ºber seine REST-API an openHAB zur√ºck.  Insgesamt sind zum Zeitpunkt des Schreibens nach √§hnlichen Schemata in einem Smart Home 4 Controller auf Basis von ESP8266 und einer auf Arduino mit angeschlossenem Ethernet-Modul integriert.  Ich m√∂chte Sie daran erinnern, dass dies alles nicht nur geschieht, um etwas von Ihrem Smartphone aus ein- oder auszuschalten, sondern vor allem, damit sich die Ger√§te automatisch einschalten, wenn die Bedingungen daf√ºr eintreten. <br><br>  <i>Abgebildet ist ein herk√∂mmlicher Legrand-Schalter, der mit dem Wemos D1 Mini automatisiert wurde.</i>  <i>Alle Komponenten passen in eine Standardbox f√ºr die Installation im Freien.</i>  <i>Gleichzeitig misst es Temperatur / Luftfeuchtigkeit (Sensor unten) und Beleuchtung (f√ºr die Zukunft).</i> <br><br>  Beispielsweise wird die Beleuchtung eines Bildes nur einmal am Tag eingeschaltet, wenn das Haus entwaffnet ist und wenn die Lichtst√§rke unter einer bestimmten Stufe liegt und wenn die Zeit kurz vor Sonnenuntergang liegt.  Dar√ºber hinaus haben einige Ger√§te, beispielsweise Stra√üenlaternen, √ºberhaupt keine physischen Schalter und werden haupts√§chlich im automatischen Modus verwendet. <br><br>  Jeder, der im Ob oder Leroy Merlin war, muss ferngesteuerte Steckdosen oder sogar Starter-Sets mit dem gro√üen Namen ‚ÄûSmart Home‚Äú gesehen haben.  Die meisten von ihnen kombinieren 433-MHz-Kommunikation und diese Kommunikation ist einseitig.  Das hei√üt,  Beim Senden eines Befehls kann nicht festgestellt werden, ob er vom Stellantrieb empfangen wird oder nicht.  Kompensiert diesen Nachteil bei geringen Kosten.  Zum Beispiel k√∂nnen Sie kontrollierte Steckdosen und einen leeren Batterieschalter f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1300</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1400</a> Rubel kaufen. <img src="https://habrastorage.org/webt/mi/dk/oh/midkohmwgow3r67kg5ixjkrvk6a.jpeg" align="left">  Solche Schemata sind praktisch f√ºr die Beleuchtung mit einem separaten Draht, zum Bewegen oder Erscheinen w√§hrend der Entwicklung der Designidee.  Meine Wandlampen wurden zu solchen Elementen, die aus einem antiken Kerzenhalter und einer kleinen Stehlampe hergestellt wurden.  Beides im Schlafzimmer.  Und der Schalter befindet sich bequem am Nachttisch.  Warum so eine lange Einf√ºhrung?  Es macht keinen Sinn, Ger√§te aufzugeben, die das Leben komfortabler und voller machen, nur weil sie vom installierten Smart-Home-System nicht unterst√ºtzt werden.  Es ist einfach, in diese Situation zu geraten, indem Sie auf einen einzelnen Lieferanten oder eine einzelne Technologie setzen. <br><br>  <i>Auf dem Foto ein Satz gesteuerter Steckdosen und ein Brenin-Schalter.</i>  <i>433 MHz.</i> <br><br>  Aber wir haben ein technologieunabh√§ngiges Smart Home!  Aus diesem Grund suchen wir mutig nach einem Hub-Ger√§t f√ºr alle 433-MHz-Komponenten.  Solche Hubs sind beispielsweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Broadlink</a> .  Ihr wesentlicher Nachteil ist jedoch die indirekte Steuerung. Der Hub muss mit der Cloud verbunden sein.  Wie Sie sich aus dem vorherigen Artikel erinnern, halte ich diesen Ansatz f√ºr falsch, obwohl er einfach und bequem ist.  Infolgedessen endet die Suche mit der Entscheidung, einen vereinfachten Hub auf dem Arduino zu erstellen.  Als Peripherieger√§t verbinden wir einen 433-MHz-Empf√§nger und -Sender mit dem Arduino.  Als n√§chstes h√∂ren wir anhand einer speziellen Skizze den vom Sender im Brenin-Schalter gesendeten Code und lernen, ihn selbst zu senden.  Alle Skizzen basieren vollst√§ndig auf Beispielen von Bibliotheken und verursachen keine Schwierigkeiten.  Dar√ºber hinaus kann der Steuersignalcode in openHAB als Konstante dargestellt werden und bei Bedarf die Anzahl der Aktuatoren erweitern. <br><br><img src="https://habrastorage.org/webt/ca/sn/vz/casnvzcfsiibttvtqa1mbji55py.jpeg" align="right">  <i>Selbst gemachter Hub f√ºr 433-MHz-Ger√§te.</i>  <i>Im Laufe der Zeit wurden Bewegungserkennung und Lichtsteuerung im Heizraum hinzugef√ºgt.</i>  <i>Und Klimaanlagensteuerung (IR-LED auf der Abdeckung).</i>  <i>Zus√§tzlich wurde zur Erh√∂hung der Stabilit√§t der Datenaustausch mit openHAB von nRF24L01 + auf eine Ethernet-Karte ENC82J60 √ºbertragen, ein LAN-Kabel ist sichtbar.</i> <br><br>  Was ist passiert?  Es stellte sich heraus, dass die Beleuchtung durch das drahtlose Kit im Raum gesteuert wurde.  Dar√ºber hinaus wurde es m√∂glich, diese Beleuchtung von einem Smart Home aus zu steuern.  Wie Sie sich erinnern, ist das Problem bei solchen Systemen das Fehlen von R√ºckmeldungen.  Dies wird in diesem Fall teilweise dadurch gel√∂st, dass die an den 433-MHz-Leistungsschalter √ºbertragenen Befehle vom entwickelten Hub abgefangen und an den openHAB gesendet werden k√∂nnen, in dem die Regel funktioniert, und den Status des Leistungsschalters in der Schnittstelle √§ndern.  Das hei√üt,  Das Ergebnis war ein Pseudo-Feedback-System.  Das ist besser als nichts.  Und nat√ºrlich ist klar, dass dieser Ansatz nicht f√ºr die Verwaltung kritischer Ger√§te geeignet ist.  Es ist nicht zuverl√§ssig und unsicher in Bezug auf das Abfangen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f8/mu/av/f8muavvft8ct9flkw4ttr8ytzao.png"></div><br>  <i>Ein Gestaltungselement, das im Laufe der Zeit auftauchte, eine Wandleuchte.</i>  <i>Wird von einer Brenin-Steckdose und einem Schalter gesteuert</i> <br><br>  Weiter mehr.  Ich wollte sch√∂ne Schalter im zweiten Stock machen.  Und nat√ºrlich ferngesteuert.  Die Wahl fiel auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Livolo</a> Touch-Schalter.  Sie liegen ebenfalls bei 433 MHz und k√∂nnen vor allem ‚Äûohne Null‚Äú angeschlossen werden.  Dies gilt, wenn die volle Null und Phase nicht an die Steckdose angeschlossen sind und sich der Schalter im offenen Stromkreis der Kronleuchterstromversorgung befindet.  Obwohl dies nicht mein Fall ist, sind solche Eingabebedingungen eine √úberlegung wert.  Infolgedessen erschienen im Haus sch√∂ne Schalter, die √ºber einen zuvor entwickelten Hub mit dem Smart Home verbunden waren. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sw/nx/jr/swnxjroitfoeq5a5bhdatpje-nw.jpeg"></div><br>  <i>Set mit zwei Touch-Schaltern und einer Livolo-Fernbedienung.</i> <br><br>  Es gibt jedoch zwei "Aber".  Der erste.  Livolo Leistungsschalter sind wirklich r√ºckkopplungsfrei, sie √ºbertragen nichts.  Das hei√üt,  Wenn Sie sie mit Ihrem Finger auf die altmodische Weise einschalten, √§ndert sich der Status im Smart Home nicht.  Dies ist nat√ºrlich kein Hindernis f√ºr den Heimwerker, aber ich habe beschlossen, den Garten nicht mit zus√§tzlichen Einschlusssensoren zu versehen und keine √§hnlichen Livolo-Ger√§te zu integrieren.  Der zweite.  Es war nicht m√∂glich, die Steuersignale von der Livolo-Fernbedienung, die komplett mit Schaltern gekauft wurde, mit einer Standardbibliothek zu entschl√ºsseln. Ich musste nach Bibliotheken suchen, die von Enthusiasten speziell f√ºr Livolo-Schalter entwickelt wurden. <br><br>  Ich m√∂chte das Gespr√§ch √ºber die Integration neuer Komponenten genau dort beenden, wo wir im vorherigen Artikel begonnen haben: mit Z-Wave. <img src="https://habrastorage.org/webt/3d/qb/z0/3dqbz0fpnvaekdsen_fp30t_wgo.jpeg" align="left">  Egal wie teuer die Z-Wave-Ger√§te sind, ihre Reichweite erweitert sich allm√§hlich und es gibt Aktuatoren, die f√ºr sich genommen keinen Sinn ergeben oder aus irgendeinem Grund keine konkurrierenden Technologien haben.  Das auff√§lligste Beispiel sind die geregelten Thermostatk√∂pfe zum Heizen von Heizk√∂rpern.  Drahtlos  Ein weiteres Beispiel sind kompakte Relais und Dimmer in Steckdosen, mit denen vorhandene Schalter in intelligente umgewandelt werden k√∂nnen, ohne das Design zu √§ndern.  Dar√ºber hinaus mit R√ºckkopplung, d.h.  Mit erhaltener mechanischer Steuerung kann das Smart Home den Status der Schalter anzeigen. <br>  <i>Auf dem Foto Z-Wave Thermostatkopf Grundfos am Heizk√∂rper im Flur.</i> <br><br>  Wie funktioniert die Integration?  OpenHAB verf√ºgt √ºber eine entsprechende Bindung zum Anschlie√üen eines USB Z-Wave-Sticks.  Dar√ºber hinaus enth√§lt openHAB eine spezielle HABmin-Anwendung zum Konfigurieren des Netzwerks von Z-Wave-Ger√§ten.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schlie√üen Sie also</a> den USB-Stick <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Z-Wave.Me an</a> , stellen Sie die Bindung Z-Wave ein, f√ºhren Sie HABmin aus und f√ºgen Sie dem Netzwerk Ger√§te hinzu.  Als n√§chstes konfigurieren wir die entsprechenden Elemente gem√§√ü der Dokumentation zum Binden, schreiben die Regeln f√ºr Schalter, Thermok√∂pfe, Multisensoren und Voila.  Es scheint, dass alles einfach ist.  Dies geschah jedoch nur teilweise.  Das Problem ist, dass HABmin nur mit Ger√§ten funktioniert, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in einer offenen Datenbank</a> registriert sind.  Wenn Sie ein neues Ger√§t oder eine √Ñnderung eines alten Ger√§ts gekauft haben, das sich nicht in der Datenbank befindet, k√∂nnen Sie ein solches Ger√§t nicht konfigurieren. <img src="https://habrastorage.org/webt/zm/vf/qq/zmvfqqmdnohuze6w20enx-ajbws.jpeg" align="right">  Sie k√∂nnen eine Pull-Anfrage an diese Datenbank stellen. Ich habe diesen Ansatz jedoch als grundlegend falsch angesehen, da Z-Wave-Ger√§te √ºber eine Selbsterkennungsfunktion verf√ºgen.  Dies ist einer der Gr√ºnde f√ºr die hohe Kompatibilit√§t von Ger√§ten und Controllern verschiedener Hersteller von Z-Wave.  Infolgedessen musste ich eine Lizenz f√ºr den Z-Wave-Software-Controller <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Z-Way-Server</a> kaufen, den ich auf demselben Server / Nettop wie openHAB installiert hatte.  Es wird nur verwendet, wenn Sie ein Ger√§t zum Z-Wave-Netzwerk hinzuf√ºgen / entfernen und / oder konfigurieren m√ºssen.  In der restlichen Zeit ist der Software-Controller ausgeschaltet. <br><br>  <i>Auf dem Foto - gew√∂hnliche Legrand-Schalter.</i>  <i>Automatisiert mit Z-Wave-Mikromodulen in den Rosetten.</i>  <i>Der untere wurde ein Dimmer.</i> <br><br>  Als Ergebnis bekam ich W√§rmek√∂pfe an Heizk√∂rpern, einen Dimmer und Schalter in der Steckdose, gesteuerte Steckdosen, die Spannung und Leistung messen, und sogar einen Multisensor (Bewegung, Temperatur, Beleuchtung).  Es ist zu beachten, dass ich keine Assoziationen auf Z-Wave-Ebene eingerichtet habe, da ich immer noch ein zentrales Steuerungsmodell habe.  Das hei√üt, trotz der M√∂glichkeit der direkten Steuerung von Ger√§t-Ger√§t werden alle zentral von openHAB mithilfe von Regeln gesteuert.  Gut oder zus√§tzlich mechanisch, wie es bei Schaltern in der Steckdose der Fall ist. <br><br>  <b>Was ist in Bezug auf Smart Home passiert:</b> <br><br><ol><li>  Automatische Lichtsteuerung. </li><li>  Kontrolliert von der Treppe im zweiten Stock.  Je nach Schutzzustand wird entweder eine Reihe alarmierender Regeln ausgel√∂st oder das Licht im Erdgeschoss wird beleuchtet, damit Sie nachts leicht die Treppe hinuntergehen k√∂nnen.  Da ein Multisensor verwendet wird, wird auch die Lufttemperatur gemessen. </li><li>  Automatisierte Steuerung mehrerer Heizk√∂rper.  Beim Scharfschalten schalten sie auf die in den Einstellungen eingestellte niedrige Temperatur um, um aufgrund einer rationaleren W√§rmeverteilung Energie zu sparen.  Dar√ºber hinaus wurde die Nachttemperatur im Schlafzimmer geregelt - sie verringert sich automatisch um 1 Grad f√ºr einen angenehmen Schlaf.  Und nat√ºrlich kann die Temperatur von einem Smart Home aus eingestellt werden. </li><li>  Automatische beheizte Handtuchhaltersteuerung.  Jetzt muss es nicht mehr manuell ein- und ausgeschaltet werden.  Dar√ºber hinaus kann es vor der Ankunft aus der Ferne eingeschaltet werden. </li></ol><br>  Es gibt noch eine Sache.  Bisher haben wir √ºber die Integration physischer Komponenten in ein Smart Home gesprochen.  OpenHAB erm√∂glicht jedoch die Integration in Softwaresysteme.  Zum Beispiel mit Software-DVRs oder IP-Kameras.  Es geht nicht nur um die Anzeige von Bildern in der openHAB-Oberfl√§che, was nat√ºrlich geschehen ist, sondern auch um die Reaktion auf Ereignisse.  Wenn der Rekorder oder die Kamera beispielsweise so konfiguriert ist, dass sie Bewegungen erkennen, kann dieses Ereignis an openHAB gesendet und in der Verwaltung verwendet werden.  In der obigen Regel, das Licht nachts beim Treppenabstieg einzuschalten, verwendet die Kamera die Bewegungserkennung im ersten Stock (um beim Treppensteigen nicht zu leuchten).  Ein weiteres Beispiel: Im Sicherheitsmodus k√∂nnen Sie Bilder des Eindringlings aufnehmen und das Foto per Post senden. Die Verletzung kann mit einem herk√∂mmlichen PIR-Bewegungssensor erkannt werden, der wesentlich effektiver ist als die Bewegungserkennung mit einer Kamera oder einem DVR.  Dar√ºber hinaus kann der PIR-Sensor mit beliebiger Technologie an ein Smart Home angeschlossen werden. <br><br><div class="spoiler">  <b class="spoiler_title">Ein Beispiel f√ºr eine st√∂rende E-Mail mit einem Foto eines Eindringlings in einem G√§stehaus.</b> <div class="spoiler_text">  Zum Gl√ºck ist der Eindringling vierzig.  Wird von einem PIR-Sensor erkannt. <br><br><img src="https://habrastorage.org/webt/yk/nn/je/yknnjecws_dpjgvmfds_unmd5mi.jpeg"><br></div></div><br>  Die Integration in das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kodi</a> Media Center wurde ebenfalls <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">durchgef√ºhrt</a> , hierf√ºr gibt es eine spezielle Bindung.  Wenn Sie das Video starten, wird das Licht im Wohnzimmer ausgeschaltet. Wenn es stoppt, wird es eingeschaltet.  Auch f√ºr alle F√§lle von Kodi aus von einem Smart Home aus gesteuert.  Die Verwendung ist weniger bequem als die normale Kore-Fernbedienung, aber es ist m√∂glich, Kodi √ºber die Smart-Home-Oberfl√§che zu starten, die Kore nicht kann. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2e/xe/zz/2exezzpreyb2y_wxtnjzzmlisoi.jpeg"></div><br>  <i>Schnittstellenseite mit Kodi-Steuerung und Starttaste.</i>  <i>Oben sehen Sie den Status des Players, den Namen des Songs, die verbleibende Zeit und Dauer.</i> <br><br><img src="https://habrastorage.org/webt/8a/1m/jg/8a1mjgdhurjmitlmcpda60jg7q4.jpeg" align="left">  Ich antizipiere Fragen zur Verwendung des MQTT-Protokolls und erinnere mich, dass mit einem zentralisierten Verwaltungsmodell Zwischenverbindungen zwischen Server und Ger√§ten m√∂glich sind, aber nat√ºrlich die Zuverl√§ssigkeit verringern.  Daher waren bisher alle Integrationsbeziehungen direkt und ohne Vermittler.  Wenn wir jedoch √ºber einen m√∂glichen zuk√ºnftigen √úbergang oder einen teilweisen √úbergang zum dezentralen Management als potenziell erweiterbarer und fehlertoleranter sprechen, ist die Wahl von MQTT Standard.  Dies ist ein √ºblicher Transport f√ºr Peers in einem lokalen Netzwerk. <br><br>  <i>Multifunktionscontroller basierend auf dem Raspberry Pi 3B.</i>  <i>Ein Temperatur- und Feuchtigkeitssensor, ein Bewegungssensor, eine Kamera, eine gesteuerte Steckdose und ein Schalter, der zu einem Sensor geworden ist, sind sichtbar.</i> <br><br>  OpenHAB ist nat√ºrlich f√ºr MQTT bindend.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mosquitto</a> selbst wird als MQTT-Server selbst ausgew√§hlt.  Aber worauf es installiert werden soll, ist eine Frage.  Wenn Sie das Ziel der Dezentralisierung des Managements explizit oder explizit verfolgen, ist es falsch, Mosquitto auf einen Nettop zu setzen, der bereits zu einem einzigen Fehlerpunkt geworden ist.  Und hier hat die folgende Logik funktioniert.  Der einzige nicht automatisierte Raum ist eine Garage.  Dort muss etwas getan werden: Bewegung erkennen, das Licht im Haus innen und au√üen einschalten, den Status der Garagentore √∂ffnen und √ºberwachen, Video√ºberwachung durchf√ºhren, die Steckdose f√ºr Gartenger√§te steuern.  Und noch etwas, das nur mit einem vollwertigen Betriebssystem m√∂glich ist und sich auf die Informationssicherheit bezieht.  Infolgedessen f√§llt die Wahl auf den Raspberry Pi.  Es verf√ºgt √ºber Pins zum Verbinden von Standard-DIY-Peripherieger√§ten und vollwertigem Linux mit einer Vielzahl portierter Anwendungen.  Der Camcorder kann daran angeschlossen werden und den Stream an das Netzwerk senden.  Und vor allem k√∂nnen Sie mit den Ressourcen des Systems im Gegensatz zu Arduino Gesch√§ftslogiken mit nahezu jeder angemessenen Komplexit√§t erstellen und openHAB loswerden.  Und das alles kann in vertrauten Programmiersprachen programmiert werden. <br><br>  Infolgedessen wurden alle oben genannten Aufgaben gel√∂st, und im Netzwerk wurde ein MQTT-Server angezeigt, √ºber den die Interaktion mit openHAB organisiert wird und der in Zukunft verwendet wird, wenn neue Ger√§te mit dezentraler Steuerung angezeigt werden. <br><br><div class="spoiler">  <b class="spoiler_title">Interessantes Detail</b> <div class="spoiler_text">  W√§hrend des Entwicklungsprozesses wurde es notwendig, analoge Signale (Lichtsensor, Stromsensor, Luftqualit√§tssensor) zu messen.  Au√üerdem weigerte sich ein Teil der Peripherieger√§te, mit dem Standard-Raspberry Pi 3.3V zu arbeiten. Sie ben√∂tigen 5V.  Diese Probleme wurden einfach und kosteng√ºnstig gel√∂st.  Beide Aufgaben wurden vom optionalen Arduino Nano erledigt, der √ºber das I2C-Protokoll mit den Raspberry Pi-Dr√§hten verbunden war.  Das hei√üt,  Arduino hat immer noch keine Logik au√üer dem Messen physikalischer Parameter und dem Ausf√ºhren von Befehlen.  Alle Gesch√§ftslogik auf Raspberry Pi und openHAB. <br></div></div><br>  Was ist am Ende passiert, wenn Sie die Eigenschaften des gesamten Systems zum Zeitpunkt des Schreibens in Vorlagenbegriffen beschreiben? <br><br>  <b>Zusammenfassung:</b> <br><br><ul><li>  Anzahl der Temperatursensoren: 25. </li><li>  Anzahl der Lichtsteuerpunkte: 37, einschlie√ülich Tandemschalter, Dimmer und Punkte ohne mechanische Schalter. </li><li>  Neben Licht werden eine Brunnenpumpe, eine Warmwasser-Umw√§lzpumpe, Zapfstellen an Heizzweigen, ein Kessel, ein Kessel, automatische Tore, Heizk√∂rper usw. gesteuert.  Gemessene Luftfeuchtigkeit, Spannung, Strom, Beleuchtung, Luftqualit√§t usw. </li></ul><br>  <b>Verwendete Technologien:</b> <br><br><ul><li>  Zentrale Software: openHAB mit Bindungen, Xeoma, Z-Way-Server, TTS, Mosquitto-Server, Kodi, separate C / C ++ - Anwendungen.  OS - Ubuntu. </li><li>  Lokale Controller: Arduino + nRF24L01 +, Arduino + ENC82J60, ESP8266-12, Raspberry Pi 3 B, in C ++ geschriebene Software. </li><li>  Vorgefertigte Ger√§te: WiFi-Ger√§te USR IOT, Z-Wave (Relais, Sockel, Dimmer, Sensor, Thermok√∂pfe) verschiedener Hersteller, 433 MHz (Schalter mit Livolo-Fernbedienung, Sockel und Brenin-Schalter), TCP-Modbus Schneider Electric Gateway, Bewegungssensoren, √ñffnung usw. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Was weiter?</b> <div class="spoiler_text">  Der n√§chste Schritt besteht darin, die Heizk√∂rper auszuschalten, wenn Sie die Fenster dar√ºber √∂ffnen, die Luftqualit√§t im Wohnzimmer mit einem Kamin zu kontrollieren, die Bewegungserkennung im Wohnzimmer sicherer zu gestalten usw.  Es gibt allgemeinere Aufgaben: Wenn das Gew√§chshaus erscheint, automatisieren Sie die Bew√§sserung entsprechend der Temperatur und der Bodenfeuchtigkeit. <br></div></div><br>  Anstelle einer Schlussfolgerung.  Wir haben noch nicht viele Aspekte ber√ºcksichtigt, z. B. Sprachsteuerung, Text-to-Speech, IR-Steuerung der Klimaanlage usw.  All dies ist erledigt und funktioniert.  Der Zweck dieses Artikels war es, den Gedankengang aufzuzeigen, Erfahrungen bei der Auswahl von L√∂sungen auszutauschen und die Vorteile offener Standards und Technologien durch die Beschreibung der einfachen Integration aufzuzeigen.  Alles, was getan wurde, konnte anders gemacht werden, besser oder schlechter, teurer oder billiger, funktionaler oder zuverl√§ssiger.  Sie gew√∂hnen sich schnell an gute Dinge und stellen Familienmitgliedern nach einiger Zeit Fragen wie: "K√∂nnen Sie das nicht von Ihrem Smartphone aus tun?"  oder "warum sollte dieses Blumenbeet manuell bew√§ssert werden?"  gezwungen, weiterzumachen, zu unerreichbarer Perfektion. <br><br>  Und ich glaube auch an die grenzenlosen M√∂glichkeiten des Internet der Dinge.  Alles, was getan wurde, f√§llt in diese Kategorie, aber dies ist nur ein kleiner Teil.  Wenn nach dem Lesen dieses Artikels die Anzahl der IoT-Enthusiasten etwas zunimmt, werde ich meine Aufgabe als vollst√§ndig erledigt betrachten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419151/">https://habr.com/ru/post/de419151/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419141/index.html">Sex Phishing gewinnt in den USA zunehmend an Bedeutung</a></li>
<li><a href="../de419143/index.html">Erstellen eines Emulator-Arcade-Automaten. Teil 4</a></li>
<li><a href="../de419145/index.html">Fintech Digest: Apples Kapitalisierung √ºberstieg 1 Billion US-Dollar. AI half eBay dabei, den Umsatz um Milliarden zu steigern</a></li>
<li><a href="../de419147/index.html">1000-dimensionaler W√ºrfel: Ist es heute m√∂glich, ein Rechenmodell des menschlichen Ged√§chtnisses zu erstellen?</a></li>
<li><a href="../de419149/index.html">Leitfaden f√ºr Mikrotik RoMON</a></li>
<li><a href="../de419153/index.html">Cyborg Rights Memorandum</a></li>
<li><a href="../de419155/index.html">JS nach Elbrus portieren</a></li>
<li><a href="../de419159/index.html">JS-Code, r√∂mische Ziffern, geometrische R√§tsel: Wie wir unser Alter verschl√ºsseln</a></li>
<li><a href="../de419161/index.html">Modellierung der Wasseroberfl√§che mit FFT und NeuroMatrix DSP-Prozessor</a></li>
<li><a href="../de419165/index.html">Wir senden "anonyme" SMS von der Konsole an die gew√ºnschte Nummer mit dem Bytehand- und C ++ - Dienst</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>