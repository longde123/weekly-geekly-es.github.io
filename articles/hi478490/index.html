<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тШЭЁЯП╝ ЁЯНп ЁЯСиЁЯП╜тАНЁЯТ╝ Levenshtein рджреВрд░реА рдФрд░ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ ЁЯН░ ЁЯСзЁЯП╗ ЁЯСйЁЯП╜тАНтЬИя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╕рдВрднрд╡рддрдГ, рдмреЗрд▓рд╛рд░реВрд╕ рдХреЗ рд╣рд░ рд╢рд╣рд░ рдореЗрдВ рдЬрд╣рд╛рдВ рдЯреНрд░реЙрд▓реАрдмрд╕ рд╣реИрдВ, рд╡рд╣рд╛рдВ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдкрд░ рд╡реАрдХреЗ рд╕рдореВрд╣ рдпрд╛ рдЪреИрдЯ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд▓реЛрдЧ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд╕реНрдерд╛рди рдХреЛ рдЯреНрд░реИрдХ рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рдореБрдЦреНрдп рд░реВрдк...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Levenshtein рджреВрд░реА рдФрд░ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478490/">  рд╕рдВрднрд╡рддрдГ, рдмреЗрд▓рд╛рд░реВрд╕ рдХреЗ рд╣рд░ рд╢рд╣рд░ рдореЗрдВ рдЬрд╣рд╛рдВ рдЯреНрд░реЙрд▓реАрдмрд╕ рд╣реИрдВ, рд╡рд╣рд╛рдВ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдкрд░ рд╡реАрдХреЗ рд╕рдореВрд╣ рдпрд╛ рдЪреИрдЯ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд▓реЛрдЧ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд╕реНрдерд╛рди рдХреЛ рдЯреНрд░реИрдХ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдРрд╕рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдпрд╛рддреНрд░рд╛ рдФрд░ рдореБрдлреНрдд рдпрд╛рддреНрд░рд╛ рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╕рдореВрд╣реЛрдВ рдХреЗ рд╡рд┐рд╡рд░рдг рдореЗрдВ рд▓рдЧрднрдЧ "рдпрд╛рддреНрд░рд╛ рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди" рдкреЛрд╕реНрдЯрд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред <br><a name="habracut"></a><br>  рд╡реАрд╕реА рдореЗрдВ, рдпрд╣ рдЖрдорддреМрд░ рдкрд░ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/ti/eh/cd/tiehcdyeskmccfofp3adt2ko_qe.png" alt="рдЫрд╡рд┐"><br><br>  рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЯрд┐рдкреНрдкрдгреА рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддреА рд╣реИ: <br><br><img src="https://habrastorage.org/webt/ki/kp/s0/kikps0wwqqptfwyro8hrf81rtzg.png" alt="рдЫрд╡рд┐"><br><br>  рд╕рдВрд░рдЪрдирд╛ рдЕрддреНрдпрдВрдд рд╕рд░рд▓ рд╣реИред  рдХрдореЗрдВрдЯрд░реА рдореЗрдВ рдЙрди рд╕реНрдЯреЙрдкреНрд╕ рдХреЗ рдирд╛рдо рджрд┐рдП рдЧрдП рд╣реИрдВ, рдЬрд╣рд╛рдВ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХрд╛ рдзреНрдпрд╛рди рдерд╛, рд╡реЗ рдЬрд┐рд╕ рджрд┐рд╢рд╛ рдореЗрдВ рдЦрдбрд╝реЗ рд╣реИрдВ, рд╡рд╣ рднреА рд╣реИ: <br><br><img src="https://habrastorage.org/webt/no/gy/2l/nogy2l1lrraa8gte90lcyuwsume.png" alt="рдЫрд╡рд┐"><br><br>  рдкрд░рд┐рдгрд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рдЯрд┐рдкреНрдкрдгреА, рдПрдХ рд╕реНрдЯреЙрдк, рд╕рдордп рдФрд░ рджрд┐рдирд╛рдВрдХ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд╕реНрддреБ рд╣реИ, рд╕рд╛рде рд╣реА рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдЖрдИрдбреА рдЬрд┐рд╕рдХреЗ рджреНрд╡рд╛рд░рд╛ рд╣рдо рдЗрд╕реЗ рдкрд╣рдЪрд╛рди рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рд╕рд╛рде, рдЖрдк рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рд┐рдд рд╕реНрдерд╛рди рдХреА рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рдирд┐рдпрдВрддреНрд░рдХ рдЕрдм рд╣реИрдВред <br><br><h4>  рдЯреНрд░реЗрдирд┐рдВрдЧ </h4><br>  рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рд▓рдХреНрд╖реНрдп рдХреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рд╣рдо рдбреЗрдЯрд╛ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░реЗрдВрдЧреЗред  рд╕рдореВрд╣ рдореЗрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдЧрддрд┐рд╡рд┐рдзрд┐ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛ рд╣рдо рдмрд╣реБрдд рдХрдо рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдЬреЛрдЦрд┐рдо рдЙрдард╛рддреЗ рд╣реИрдВ <br><br>  рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ "рдХрдВрдЯреНрд░реЛрд▓ рдЧреЛрдореЗрд▓" рд╕рдореВрд╣ рд╣реИред <br><br>  рд╣рдо рдкрд╛рдпрдерди рдХреЗ рд▓рд┐рдП рдЖрдзрд┐рдХрд╛рд░рд┐рдХ VKontakte API рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░реЗрдВрдЧреЗ <br><br>  рд╣рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкрд╣реБрдВрдЪ рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдХреБрдЫ рд╕рдореВрд╣ рдмрдВрдж рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЙрдирдХреА рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗрд╡рд▓ рддрднреА рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ рдЬрдм рдЖрдкрдХреЛ рд╕рдореВрд╣ рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред <br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЖрдк рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ рдирд┐рдХрд╛рд▓рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><h4>  рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </h4><br>  рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ vk.wall.getComments рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдореВрд╣ рдореЗрдВ рдЕрдВрддрд┐рдо рдЙрдкрд▓рдмреНрдз рдкреЛрд╕реНрдЯ рдорд┐рд▓рддреА рд╣реИ, рдФрд░ DataFrame рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдбреЗрдЯрд╛ рдХреЛ рд╕реЗрд╡ рдХрд░реЗрдВрдЧреЗред <br><br>  рдкреНрд░рддреНрдпреЗрдХ рдЯрд┐рдкреНрдкрдгреА рдкреЛрд╕реНрдЯ рдореЗрдВ рд╢рд┐рд▓рд╛рд▓реЗрдЦ рд╣реИ "рдПрдХ рдЕрдЪреНрдЫрд╛ рджрд┐рди рд╣реИ, рдХрд┐рд░рд╛рдпрд╛ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд░реЗрдВ рдФрд░ рдирд┐рдпрдВрддреНрд░рдг рдореЗрдВ рди рдЖрдПрдВ", рдЗрд╕рд▓рд┐рдП рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ, рдкреЛрд╕реНрдЯ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ рдФрд░ рдЙрди рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ рдЬрд┐рдирд╕реЗ рдЖрдк рдбреЗрдЯрд╛ рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдореИрдВрдиреЗ рдкрд┐рдЫрд▓реЗ 3 рдорд╣реАрдиреЛрдВ рдореЗрдВ рдкреЛрд╕реНрдЯ рд╕реЗ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ рд▓реАрдВ, рдпрд╣ рджреЗрдЦрддреЗ рд╣реБрдП рдХрд┐ 1 рдкреЛрд╕реНрдЯ рд╣рд░ рджрд┐рди рдкреЛрд╕реНрдЯ рдХреА рдЬрд╛рддреА рд╣реИ (рдЕрдм рдирд╡рдВрдмрд░ рдХреЗ рдЕрдВрдд рдореЗрдВ, рд╕реНрдХреВрд▓ рд╡рд░реНрд╖ рд╕рд┐рддрдВрдмрд░ рдореЗрдВ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХреЛрдВ рдХреЛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рдП рдФрд░ рдЙрдирдХреЗ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд╛рдиреЛрдВ рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдП)ред  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдЕрдиреНрдп рд╕рдВрдХреЗрддреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд░реНрд╖ рдХрд╛ рд╕рдордпред <br><br>  рдХреБрдЫ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рд╕рдВрджреЗрд╢реЛрдВ рд╕реЗ рднрд░рд╛ рд╣реБрдЖ рд╣реИ рдЬреИрд╕реЗ "рдХреНрдпрд╛ рдмреИрд░реАрдХрд┐рди рдкрд░ рдХреЛрдИ рд╣реИ?"  рдпрджрд┐ рдЖрдк рдРрд╕реА (рдЕрдирд╛рд╡рд╢реНрдпрдХ) рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдХреБрдЫ рд╕рдВрдХреЗрддреЛрдВ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><ul><li>  рдкрд╛рда рдореЗрдВ "рд╕реНрд╡рдЪреНрдЫ", "рдмрд╛рдПрдВ", "рдХреЛрдИ рдирд╣реАрдВ" рдФрд░ рдЬреИрд╕реЗ рд╢рдмреНрдж рд╢рд╛рдорд┐рд▓ рд╣реИрдВ </li><li>  рд╢рдмреНрдж "рдореБрдЭреЗ рдмрддрд╛рдУ", "рдХреМрди", "рдХреНрдпрд╛", "рдХреИрд╕реЗ" </li><li>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХ, рдЬреИрд╕реЗ рдЗрдореЛрдЯрд┐рдХреЙрдиреНрд╕ </li></ul><br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдЙрдирд╕реЗ рд╕рдкреНрддрд╛рд╣ рдХреА рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдЖрдИрдбреА, рдкрд╛рда, рд╕рдордп, рддрд┐рдерд┐ рдФрд░ рджрд┐рди рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрдирд╛рдП рдЧрдП рдбреЗрдЯрд╛рдлрд╝реНрд░реЗрдо рдореЗрдВ рдбрд╛рд▓ рджрд┐рдпрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> vk_api <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> check_correctness <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">auth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> vk_session = vk_api.VkApi(lp.login, lp.password) vk_session.auth() vk = vk_session.get_api() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vk <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataFromComments</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vk, groupID)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#     posts = vk.wall.get(owner_id=groupID, offset=1, count=90) print("\n") data = pd.DataFrame(columns=['text', 'post_id', "date", "day_in_week", "hour","minute", "day_in_month"]) for post in posts.get("items"): # id     postID = post.get("id") if "  ,       " not in post.get("text"): continue #  commentary       comments = vk.wall.getComments(owner_id=groupID, post_id=postID, count=200) #           dataframe for comment in comments.get("items"): text = comment.get("text") text = re.sub(r"A-Za-z--0123456789 ", "", str(text)) commentaryIsNice = check_correctness.detection(text) if commentaryIsNice: print(text) date = comment.get("date") time_struct = time.gmtime(date) post_id = comment.get("post_id") data = data.append({"text": text, "post_id" : post_id, "date": date,"day_in_week" : time_struct.tm_wday, "hour": (time_struct.tm_hour+3), "minute": time_struct.tm_min, "day_in_month": time_struct.tm_mday}, ignore_index=True) # print(data[:10]) # print(data.info()) print("dataset is ready") return data</span></span></code> </pre> <br></div></div><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдореЗрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЗ рдкрд╛рда рдХреЗ рд╕рд╛рде рдПрдХ рдбреЗрдЯрд╛рдлрд╝реНрд░реЗрдо рдкреНрд░рд╛рдкреНрдд рд╣реБрдЖ, рдЙрдирдХреА рдЖрдИрдбреА, рд╕рдкреНрддрд╛рд╣ рдХрд╛ рджрд┐рди, рдШрдВрдЯреЗ рдФрд░ рдорд┐рдирдЯ рдЬрд┐рд╕рдореЗрдВ рдЯрд┐рдкреНрдкрдгреА рд▓рд┐рдЦреА рдЧрдИ рдереАред  рд╣рдореЗрдВ рдХреЗрд╡рд▓ рд╕рдкреНрддрд╛рд╣ рдХрд╛ рджрд┐рди, рд▓реЗрдЦрди рдХрд╛ рд╕рдордп рдФрд░ рдкрд╛рда рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/cd/hs/cy/cdhscyg3rx4f5kejgvjdguuscui.png" alt="рдЫрд╡рд┐"><br><br><h4>  рдбреЗрдЯрд╛ рдХреА рд╕рдлрд╛рдИ </h4><br>  рдЕрдм рд╣рдореЗрдВ рдбреЗрдЯрд╛ рд╕рд╛рдлрд╝ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд▓реЗрд╡реЗрдВрд╕рд╣реЗрдЯрд┐рди рджреВрд░реА рдХреА рдЦреЛрдЬ рдХрд░рддреЗ рд╕рдордп рдХрдо рдЧрд▓рддрд┐рдпрд╛рдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯрд┐рдкреНрдкрдгреА рд╕реЗ рджрд┐рд╢рд╛ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд╣рдореЗрдВ рднрд╛рд╡ "рдУрд░", "рдЬрд╛рдиреЗ", "рдХреИрд╕реЗ", "рдирд┐рдХрдЯ" рдорд┐рд▓рддреЗ рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐ рд╡реЗ рдЖрдо рддреМрд░ рдкрд░ рджреВрд╕рд░реЗ рдкрдбрд╝рд╛рд╡ рдХреЗ рдирд╛рдо рд╕реЗ рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рд╣рдо рдЙрдиреНрд╣реЗрдВ рдЙрдирдХреЗ рд╕рд╛рде рдЖрдиреЗ рд╡рд╛рд▓реА рдЪреАрдЬрд╝реЛрдВ рдХреЗ рд╕рд╛рде рд╣рдЯрд╛ рджреЗрддреЗ рд╣реИрдВ, рд╕рд╛рде рд╣реА рдХреБрдЫ рдЬрд╛рд░реНрдЧрд╛рди рдХреЗ рдирд╛рдореЛрдВ рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рдХреЗ рд╕рд╛рде рд░реЛрдХрддреЗ рд╣реИрдВред ред <br><br><div class="spoiler">  <b class="spoiler_title">рдбреЗрдЯрд╛ рд╕рд╛рдлрд╝ рдХрд░реЗрдВ</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> fuzzywuzzy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> process <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear_commentary</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""    -     """</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span> splitted = text.split(<span class="hljs-string"><span class="hljs-string">" "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(splitted): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(splitted) == <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> np.NaN <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> s) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> s) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> ( <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> s) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> ( <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> s)) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>): index = i <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> index <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> index &lt; len(splitted) - <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>): splitted.remove(splitted[index]) string = <span class="hljs-string"><span class="hljs-string">" "</span></span>.join(splitted) text = (string.lower()) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> index <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: splitted = splitted[:index] string = <span class="hljs-string"><span class="hljs-string">" "</span></span>.join(splitted) text = string.lower() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: text = <span class="hljs-string"><span class="hljs-string">" "</span></span>.join(splitted).lower() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> text <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clean_data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">:</span></span> data.dropna(inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) data[<span class="hljs-string"><span class="hljs-string">"text"</span></span>] = data[<span class="hljs-string"><span class="hljs-string">"text"</span></span>].map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> s: clear_commentary(s)) data.dropna(inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) print(<span class="hljs-string"><span class="hljs-string">"cleaned"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data</code> </pre> <br></div></div><br><h4>  рд▓реЗрд╡реЗрдВрд╕рд╣рд╛рдЗрдЯ рджреВрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдирд╛ </h4><br>  рд╣рдо рд╕реАрдзреЗ рд▓реЗрд╡реЗрдиреНрд╢реЗрди рджреВрд░реА рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВред  рдПрдХ рдЫреЛрдЯреА рд╕реА рдорджрдж: рд▓реЗрд╡реЗрдВрд╕рд╣рд╛рдЗрдЯ рджреВрд░реА - рдПрдХ рд╡рд░реНрдг рдХреЛ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдЪрд╛рд▓рди рдХреА рдиреНрдпреВрдирддрдо рд╕рдВрдЦреНрдпрд╛, рдПрдХ рд╡рд░реНрдг рдХреЛ рд╣рдЯрд╛рдПрдВ рдФрд░ рдПрдХ рд╡рд░реНрдг рдХреЛ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдкрдВрдХреНрддрд┐ рдХреЛ рджреВрд╕рд░реА рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><br>  рд╣рдо рдЗрд╕реЗ <a href="https://github.com/seatgeek/fuzzywuzzy">рдлрдЬреАрд╡рд┐рдЬреНрдЬреА</a> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ <a href="https://github.com/seatgeek/fuzzywuzzy">рдкрд╛рдПрдВрдЧреЗ</a> ред  рдпрд╣ рдЖрдкрдХреЛ рд▓реЗрд╡реЗрдВрд╢реЗрдЯрд┐рди рджреВрд░реА рдХреА рдЬрд▓реНрджреА рдФрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдЧрдгрдирд╛ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред  рдХрд╛рд░реНрдп рдХреЛ рдЧрддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рд▓реЗрдЦрдХ рднреА рдЕрдЬрдЧрд░-рд▓реЗрд╡реЗрдВрд╕рдЯреЗрдЗрди рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддреЗ рд╣реИрдВред <br><br>  рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рд╕реЗ рд╕реНрдЯреЙрдк рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рд╕реНрдЯреЙрдк рдХреА рд╕реВрдЪреА рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рдХреГрдкрдпрд╛ рдореБрдЭреЗ GoTrans рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдбреЗрд╡рд▓рдкрд░ рдЕрд▓реЗрдХреНрдЬреЗрдВрдбрд░ рдХреЛрдЬрд╝рд▓реЛрд╡ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br>  рд╕реВрдЪреА рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдирд╛ рдерд╛, рд╡рд╣рд╛рдВ рдХреБрдЫ рд╕реНрдЯреЙрдкреНрд╕ рдЬреЛрдбрд╝рдирд╛ рдЬреЛ рд╡рд╣рд╛рдВ рдирд╣реАрдВ рдереЗ, рдФрд░ рдирд╛рдореЛрдВ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдмрджрд▓рдирд╛ рддрд╛рдХрд┐ рд╡реЗ рдмреЗрд╣рддрд░ рд╕реНрдерд┐рдд рдереЗред <br><br><div class="spoiler">  <b class="spoiler_title">рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ</b> <div class="spoiler_text">  рд╕реНрдЯреЙрдкреНрд╕ = ['рд╕реБрдкрд░рдорд╛рд░реНрдХреЗрдЯ', 'рдореАрдбреЛ', 'рд░реЗрдореАрдмрдЦреНрддрдирд┐рдХрд╛', 'рд▓реЗрдирд┐рдирдЧреНрд░рд╛рдж', 'рдпрд╛рд░реЛрд╕реНрд▓рд╛рд╡', 'рдкреЛрд▓реЗрд╕реНрдХрд╛рдпрд╛', <br>  'рдпрд╛рд░реЛрд╕реНрд▓рд╛рд╡', 'рдЯрд╛рдЗрдордлрд┐рдирдХреЛ', '8 рдорд╛рд░реНрдЪ', <br>  'рд░реЗрдХрд┐рдЯреНрд╕реНрдХреА рдЯреНрд░реЗрдбрд┐рдВрдЧ рд╣рд╛рдЙрд╕', 'рд░реЗрдХрд┐рдЯреНрд╕реНрдХреА рдПрд╡реЗрдиреНрдпреВ', 'рд╕рд░реНрдХрд╕', 'рдбрд┐рдкрд╛рд░реНрдЯрдореЗрдВрдЯрд▓ рд╕реНрдЯреЛрд░', 'рдЪреЛрдВрдЧрд░реНрд╕рдХрд╛рдпрд╛', <br>  'рдЪреЛрдВрдЧрд╛рдХрд╛', 'рдЧреБрдЧ', 'рд╕реНрдХреЛрд░реАрдирд╛', 'рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдп', 'рдЙрдкрдХрд░рдг', '1000 рдЫреЛрдЯреА рдЪреАрдЬреЗрдВ', 'рдорд╛рдпрд╛', 'рд╕реНрдЯреЗрд╢рди', <br>  'рдЧреНрд░реЗрдЬреБрдПрдЯ рдкрд╛рд░реНрдХ', 'рдЯреНрд░реЗрдб рдПрдВрдб рдЗрдХреЛрдиреЙрдорд┐рдХ', 'рдПрдирд┐рд╡рд░реНрд╕рд░реА', 'рдорд╛рдЗрдХреНрд░реЛрдбрд┐рд╕рд┐рд╕реНрдЯ 18', 'рдПрдпрд░рдкреЛрд░реНрдЯ', 'рдЗрдирдХрдорд┐рдВрдЧ', <br>  'рдЧреЛрдореЗрд▓рдЬреЛрдбреЗрд╕реЗрдиреНрдЯреНрд░', 'рдХреНрд░рд┐рд╕реНрдЯрд▓', 'рд▓реЗрдХ рд▓рд┐рдмреЗрдВрд╕рдХреЛрдп', 'рдбреИрд╡рд┐рдбреЛрд╡реНрд╕реНрдХреА рдорд╛рд░реНрдХреЗрдЯ', 'рдбреИрд╡рд┐рдбреЛрд╡реНрдХрд╛', <br>  'рдирджреА рд╕реЛрдЭ', 'рдЧреЛрдореЗрд▓реНрдбреНрд░реЗрд╡', <br>  'рд╕реЗрд╡рд░реБрдХреА', 'рдЧрдореВ рдирдВрдмрд░ 1', 'рдЖрджрд┐ рд░рд┐рдЪреНрддреНрд╕реНрдХреА', 'рдкреЛрд╢рд╛рдХ', 'рд╕рдВрдХреНрд░рд╛рдордХ рд░реЛрдЧ рдЕрд╕реНрдкрддрд╛рд▓', 'рдЧрд▓ рд╢рд┐рд╡рд┐рд░', <br>  рд╡реЛрд▓реНрддреЛрд╡рд╛, рдХреЛрд░рд▓, рдЧреЛрдореЗрд▓реНрдЯреЙрд░реНрдЧрдорд╛рд╢, рдЧреЛрдореЗрд▓рдкреНрд░реЛрдХреНрдЯ, рд╡рдиреЗрд╢рдЧреЛрдореЗрд▓рд╕реНрдЯреНрд░реЙрдп, рдиреНрдпреВрдЬрдкреЗрдкрд░, <br>  'рдХрд╛рд▓реЗрдирд┐рдХреЛрд╡рд╛', 'рдПрд░реЗрдорд┐рдиреЛ', 'рдбрд┐рд╕реНрдЯрд┐рд▓рд░реА', 'рд╕реНрдкреЗрд╢рд▓ рдЗрдВрдбрд╕реНрдЯреНрд░рд┐рдпрд▓ рдСрдЯреЛрдореЗрд╢рди', 'рд╕реЗрдХрдВрдб рд╕реНрдХреВрд▓', 'рдмреЗрд░реАрдХрд┐рдирд╛', <br>  'рдорд╢реАрди рдпреВрдирд┐рдЯреНрд╕', 'рдпреВрде', 'рдХрд╛рд╕реНрдЯрд┐рдВрдЧ рдмреЙрдбреА', 'рдХреЗрдорд┐рд╕реНрдЯреНрд╕', 'рдЧреЛрд▓реЛрд╡реИрдЯреНрд╕рдХреА', 'рдмреЗрдиреА', <br>  'рд╕реНрдкреВ67', '35 рд╡рд╛рдВ ',' рдЧрд╛рдЧрд░рд┐рди ', '50 рд╕рд╛рд▓ рд╕реЗ рдЧреЛрдореЗрд▓рдорд╢ рдкреНрд▓рд╛рдВрдЯ', 'рд╣рд┐рд▓', 'рд░реЗрдбрд┐рдпреЛ рдлреИрдХреНрдЯреНрд░реА' <br>  'рджрд╛рджреА', 'рдХрд╛рдВрдЪ рдХреЗ рдмрдиреЗ рдкрджрд╛рд░реНрде', 'рд╢рд╛рд╣рдмрд▓реВрдд', 'рд╢реБрд░реБрдЖрддреА рдЗрдВрдЬрди', 'рдЕрдВрддрд░рд┐рдХреНрд╖ рдпрд╛рддреНрд░реА', <br>  'рдЖрд░рдЯреАрдПрд╕рдЖрд░рдПрдо рдкреНрд░рд╛рд░рдВрднрд┐рдХ тАЩ, k рдмреНрдпрдЦреЛрд╡реНрд╕реНрдХрд╛рдпрд╛тАЩ, initial рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдордВрддреНрд░рд╛рд▓рдп рдХрд╛ рд╕рдВрд╕реНрдерд╛рди тАЩ, m рдбреАрдХреЗ рдЧреЛрдореЗрд▓реНрдорд╛рд╢тАЩ,' рд╕реНрдЯреЛрд░ тАЩ, ch рд░реЗрдХрд┐рдЯреНрд╕реНрдХреАтАЩ <br>  'рд╕реЗрд╡реНрд░рдХреНрд╕', 'рдУрд╕реЛрд╡реЗрддреНрд╕реА', 'рдЯреВрд░рд┐рд╕реНрдЯ', 'рдореАрдЯ рдлреИрдХреНрдЯреНрд░реА', 'рд╣реЛрд▓реА рдЯреНрд░рд┐рдирд┐рдЯреА', 'рдореЗрдбрд┐рдХрд▓ рдЯрд╛рдЙрди', 'рдЕрдХреНрдЯреВрдмрд░' <br>  'рддреЗрд▓ рдбрд┐рдкреЛ', 'рдЧреЛрдореЗрд▓реЛрдмреНрд▓рд╛рд╡рддреЛрдЯреНрд░рд╛рдиреНрд╕', 'рдорд┐рд▓реНрдХрд╡рд┐рддрд╛', 'рдмреЗрдХреБрдирд┐рди', 'рдЬрд┐рдк', 'рдУрдорд╛', 'рд░реЗрдЬрд┐рди' <br>  'рдХрдВрд╕реНрдЯреНрд░рдХреНрд╢рди рдорд╛рд░реНрдХреЗрдЯ ksk', 'рд░реЛрдб рдмрд┐рд▓реНрдбрд░', 'рдлрд╝реАрд▓реНрдб', 'kamenetskaya', 'bolshevik', 'jakubovka', <br>  'рдмреЛрд░реЛрдбрд┐рдирд╛', 'рд╣рд┐рдкреНрдкреЛ рд╣рд╛рдЗрдкрд░рдорд╛рд░реНрдХреЗрдЯ', 'рднреВрдорд┐рдЧрдд рдирд╛рдпрдХ', '9 рдордИ', 'рдЪреЗрд╕реНрдЯрдирдЯ', 'рдкреНрд░реЛрд╕реНрдереЗрдЯрд┐рд╕реНрдЯ', <br>  'рдЖрдИрдкреБрдд рд╕реНрдЯреЗрд╢рди', 'рдХрдореНрдпреБрдирд┐рд╕реНрдЯ рдЗрдВрдЯрд░рдиреЗрд╢рдирд▓', 'рдореНрдпреВрдЬрд╝рд┐рдХ рдкреЗрдбрд╛рдЧреЙрдЬрд┐рдХрд▓ рдХреЙрд▓реЗрдЬ', 'рдПрдЧреНрд░реАрдХрд▓реНрдЪрд░рд▓ рдлрд╝рд░реНрдо', 'рдмрд╛рдИрдкрд╛рд╕ рд░реЛрдб', 'рдЬреАрдд', <br>  'рд╡реЗрд╕реНрдЯрд░реНрди', 'рдкрд░реНрд▓', 'рд╡реНрд▓рд╛рджрд┐рдореАрд░', 'рдбреНрд░рд╛рдИ', 'рдбрд┐рд╕реНрдкреЗрдВрд╕рд░реА', 'рдЗрд╡рд╛рдиреЛрд╡рд╛', <br>  'рдорд╢реАрди-рдмрд┐рд▓реНрдбрд┐рдВрдЧ', 'рдмрд┐рд░реНрдЪ', '60 рд╕рд╛рд▓ ',' рдкрд╛рд╡рд░ рдЗрдВрдЬреАрдирд┐рдпрд░ ',' рд╕реЗрдВрдЯреНрд░реЛрд▓рд╛рдЗрдЯ ', <br>  'рдСрдиреНрдХреЛрд▓реЙрдЬрд┐рдХрд▓ рдХреНрд▓рд┐рдирд┐рдХ тАЩ, range рд╢реВрдЯрд┐рдВрдЧ рд░реЗрдВрдЬтАЩ, ints рдЧреЛрд▓реЛрд╡реЗрдиреНрд╕реА тАЩ, ological рдХреЛрд░рд▓тАЩ, spring рд╕рд╛рдЙрдерд░реНрди тАЩ, ic рд╕реНрдкреНрд░рд┐рдВрдЧтАЩ, <br>  рдПрдлрд╝реНрд░реЗрдореЛрд╡рд╛, рдмреЙрд░реНрдбрд░, рдмреЗрд▓рдЧреБрдЯ, рдЧреЛрдореЗрд▓рд╕реНрдЯреНрд░реЙрдп, рдмреЛрд░рд┐рд╕реЗрдВрдХреЛ, рдПрдерд▓реЗрдЯрд┐рдХреНрд╕ рдкреИрд▓реЗрд╕, <br>  'рдорд┐рдЪреБрд░рд┐рдиреНрд╕реНрдХреА', 'рд╕реЛрд▓рд░', 'рдЧреИрд╕реНрдЯреЗрд▓реЛ', 'рдорд┐рд▓рд┐рдЯреНрд░реА', 'рдСрдЯреЛ рд╕реЗрдВрдЯрд░', 'рдкреНрд▓рдВрдмрд┐рдВрдЧ', 'рдЙрдЬрд╛', <br>  'рдореЗрдбрд┐рдХрд▓ рдХреЙрд▓реЗрдЬ', 'рдХрд┐рдВрдбрд░рдЧрд╛рд░реНрдЯрди 11', 'рдмреЛрд▓реНрд╢реЗрд╡рд┐рдХ', 'рдкрд┐рд▓реНрд▓реЛрдВ', 'рдбреЗрд╡рд┐рдбреЛрд╡реНрд╕реНрдХреА', 'рдорд╣рд╛рд╕рд╛рдЧрд░', 'рдкреНрд░рдЧрддрд┐' <br>  'рджреЛрдмреНрд░реБрд╕реНрдХрд╛рдпрд╛', 'рд╢реНрд╡реЗрдд', 'рдЬреАрдПрд╕рдХреЗ', 'рджреНрд╡рд┐рджрд▓реЛрд╡рдХрд╛', 'рд╡рд┐рджреНрдпреБрдд рдЙрдкрдХрд░рдг', 'рдореИрддреНрд░реА', <br>  '70 рд╕рд╛рд▓ ',' рдХрд╛рд░ рдХреА рдорд░рдореНрдордд ',' рд╕рдиреА рдкрд╣рд╛рдбрд╝реА ',' рд╕рд░реНрдХрд┐рдЯ ',' рд╡рд╛рдЯрд░ рдХреИрдирд╛рд▓ ',' рдорд╢реАрди рдЧреЛрдореЗрд▓ ', <br>  рд╡реЛрд▓реНрддреЛрд╡рд╛, рдкрд╛рдпрдирд┐рдпрд░, рдЖрд░рд╕реАрдПрдо, рдЦрд┐рдореНрддреЛрд░реНрдЧ, рджреВрд╕рд░рд╛ рдореАрдбреЛ рд▓реЗрди, рдмреЛрдЪрдХрд┐рдирд╛, рд╕реНрдирд╛рди, <br>  'рдСрдиреНрдХреЛрд▓реЙрдЬрд┐рдХрд▓ рдХреНрд▓рд┐рдирд┐рдХ', 'рд╕реНрдХреНрд╡рд╛рдпрд░', 'рд▓реЗрдирд┐рди', '1 рд╕реНрдХреВрд▓', 'рд╕рд╛рдЙрде рд╕реНрдЯреЛрд░', <br>  rans рдЧреЛрдореЗрд▓реИрдЧреНрд░реЛрдЯреНрд░рд╛рдиреНрд╕ тАЩ, ers рдорд┐рд▓рд░реНрд╕тАЩ, ens рд▓рд┐рдпреВрдмреЗрдВрд╕реНрдХреА тАЩ, el рдорд┐рд▓рд┐рдЯреНрд░реА рдПрдиреЙрд▓рд┐рд╕реНрдЯрдореЗрдВрдЯ рдСрдлрд┐рд╕тАЩ, рд╣реЙрд╕реНрдкрд┐рдЯрд▓ тАЩ, hospital рдЙрдЬрд╛тАЩ, r рдЖрд░рдЯреАрдПрд╕рдПрдо тАЩ, <br>  'lysyukovyh', 'shop iput', 'raton', 'gas station', 'randovsky', 'рдлрд╛рд░реНрдорд╣рд╛рдЙрд╕', 'рдЪреЗрд╕реНрдЯрдирдЯ', 'ropovsky', <br>  'рд░реЛрдорд╛рдиреЛрд╡рд┐рдЪреА', 'рдЗрд▓рд┐рдЪ', 'рд░реЛрдЗрдВрдЧ', 'рдХрдВрд╕реНрдЯреНрд░рдХреНрд╢рди рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ', 'рд╕рдВрдХреНрд░рд╛рдордХ' <br>  'рдлреИрдЯ рдлреИрдХреНрдЯреНрд░реА', 'рдХрд╛рд░ рд╕рд░реНрд╡рд┐рд╕', 'рдПрдЧреНрд░реЛрд╕ рд╕рд░реНрд╡рд┐рд╕', 'рд╕реНрдЯрд┐рдХреА', 'рдирд┐рдХреЛрд▓рд╕рдХрд╛рдпрд╛', <br>  'рд╕реНрд╡-рдЪрд╛рд▓рд┐рдд рд╣рд╛рд░реНрд╡реЗрд╕реНрдЯрд░', 'рд░рд╛рдЬрдорд┐рд╕реНрддреНрд░реА', 'рдирд┐рд░реНрдорд╛рдг рд╕рд╛рдордЧреНрд░реА', 'рдорд░рдореНрдордд рдорд╢реАрдирд░реА', 'рдкреНрд░рд╢рд╛рд╕рди', <br>  'рдЕрдХреНрдЯреВрдмрд░', 'рд╡рди рдкрд░реА рдХрдерд╛', 'рддрд╛рддрд┐рдпрд╛рдирд╛', 'рдмреЛрд░рд┐рд╕ рддреНрд╕рд╛рд░реАрдХреЛрд╡', 'рдЭрд░рдХреЛрд╡рд╕реНрдХреА', 'рдЬреИрддрд╕реЗрд╡рд╛', <br>  'рд░рд┐рд▓реЛрдХреЗрд╢рди', 'рдХрд░рдкреЛрд╡рд┐рдЪ', 'рд╣рд╛рдЙрд╕-рдмрд┐рд▓реНрдбрд┐рдВрдЧ рдкреНрд▓рд╛рдВрдЯ', 'рд╕рд┐рдЯреА рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдЯреНрд░рд╛рдВрд╕рдкреЛрд░реНрдЯ', 'рдЬрд╝реНрд▓рд┐рди' <br>  'рд╕реНрдЯреЗрдбрд┐рдпрдо рдЧреЛрдореЗрд▓рдорд╢', 'рдПрдкреА 6', 'рд╣рд╛рдЗрдбреНрд░реЛрд▓рд┐рдХ рдбреНрд░рд╛рдЗрд╡', 'рд▓реЛрдХреЛрдореЛрдЯрд┐рд╡ рдбрд┐рдкреЛ', 'рдХрд╛рд░ рдмрд╛рдЬрд╛рд░ рдСрд╕реЛрд╡реНрддреНрд╕реА', <br>  'рдирдпрд╛ рдЬреАрд╡рди', 'рдЭреЛрдХреЛрд╡рд╛', 'рдорд┐рд▓рд┐рдЯреНрд░реА рдпреВрдирд┐рдЯ', 'рдереНрд░реА рд╕реНрдХреВрд▓', 'рд╡рди', 'рд░реЗрдб рд▓рд╛рдЗрдЯрд╣рд╛рдЙрд╕', <br>  yd рдХреНрд╖реЗрддреНрд░реАрдп тАЩ, ovsk рдбреЗрд╡рд┐рдбреЙрд╕реНрдХрд╛рдпрд╛тАЩ, he рдХрд░рдмрд┐рд╢реНрд╡рд╛ тАЩ,, рджреБрдирд┐рдпрд╛ рдХрд╛ рдЙрдкрдЧреНрд░рд╣тАЩ, st рдпреБрд╡рд╛ тАЩ, 'рд╕реНрдЯреЗрдбрд┐рдпрдо рд▓реЛрдХреЛрдореЛрдЯрд┐рд╡тАЩ, <br>  'рд╕реЛрд▓рд░', 'рд▓рд╛рдбреНрд╕ рд╕рд░реНрд╡рд┐рд╕', '╬╝R 21', 'рдПрд░реЗрд╕рд╛', 'рдЗрдВрдЯрд░рдиреЗрд╢рдирд▓рд┐рд╕реНрдЯ', 'рдХреЛрд╕рд░реЗрд╡рд╛', <br>  'рдмреЛрдЧрджрд╛рдиреЛрд╡рд╛', 'рдЧреЛрдореЗрд▓ рдЖрдпрд░рди-рдХрдВрдХреНрд░реАрдЯ', '╬╝r 20a', '╬╝r Rechitsky', 'рдЪрд┐рдХрд┐рддреНрд╕рд╛ рдЙрдкрдХрд░рдг', 'Juraeva', <br>  'рдХреЙрд▓реЗрдЬ рдСрдл рдЖрд░реНрдЯ рдХреНрд░рд╛рдлреНрдЯреНрд╕', 'рдЖрдЗрд╕', 'рдбреАрдХреЗ рдлреЗрд╕реНрдЯрд┐рд╡рд▓', 'рд╢реЙрдкрд┐рдВрдЧ рд╕реЗрдВрдЯрд░', <br>  'рдХреБрдЗрдмрд┐рд╢реЗрд╡рд╕реНрдХреА', 'рдлреЗрд╕реНрдЯрд┐рд╡рд▓', 'рдЧреИрд░рд╛рдЬ рдХреЛрдк 27', 'рднреВрдХрдВрдкреАрдп рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ', 'рдорд┐рд▓реНрдЦрд╛', 'рдЯреНрдпреВрдм рд╣реЙрд╕реНрдкрд┐рдЯрд▓', <br>  'ptu179', 'рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдЙрддреНрдкрд╛рдж', 'рдЕрдЧреНрдирд┐рд╢рдорди рд╡рд┐рднрд╛рдЧ', 'рдЕрд╕реНрдкрддрд╛рд▓', 'рдмрд╕ рдбрд┐рдкреЛ', <br>  'рдЕрдЦрдмрд╛рд░ рдкрд░рд┐рд╕рд░', 'рдЬреАрдд', 'рдХреЗрд▓рдХреЛрд╡рд╕реНрдХреА', 'рд╣реАрд░рд╛', 'рдЗрдВрдЬрди рдХреА рдорд░рдореНрдордд', 'рдПрдордХреЗрдЖрд░ 19'] <br></div></div><br>  .Map рдФрд░ fuzzywuzzy.process.extractOne рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рд╕реВрдЪреА рдореЗрдВ рдиреНрдпреВрдирддрдо Levenshtein рджреВрд░реА рдХреЗ рд╕рд╛рде рд░реЛрдХ рдкрд╛рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╣рдо рдЯрд┐рдкреНрдкрдгреА рдкрд╛рда рдХреЛ рд╕реНрдЯреЙрдк рдХреЗ рдирд╛рдо рд╕реЗ рдмрджрд▓ рджреЗрддреЗ рд╣реИрдВ, рдЬреЛ рд╣рдореЗрдВ рд╕реНрдЯреЙрдк рдХреЗ рдирд╛рдо рдХреЗ рд╕рд╛рде рдПрдХ рдбреЗрдЯрд╛рд╕реЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><br>  рдкрд░рд┐рдгрд╛рдореА рдбреЗрдЯрд╛рд╕реЗрдЯ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/gd/pd/c8/gdpdc8lwdppzpastghnasxbqsbi.png"><br><br><div class="spoiler">  <b class="spoiler_title">рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ рд╕реНрдЯреЙрдк рдореЗрдВ рдмрджрд▓ рдЬрд╛рддреА рд╣реИрдВ</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_category_from_comment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""              """</span></span> dict = process.extractOne(text.lower(), stops) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> dict[<span class="hljs-number"><span class="hljs-number">1</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">75</span></span>: text = dict[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: text = np.nan print(<span class="hljs-string"><span class="hljs-string">"wait"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> text <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_category_dataset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""      """</span></span> print(<span class="hljs-string"><span class="hljs-string">"remap started. wait"</span></span>) data.text = data.text.map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> comment: get_category_from_comment(str(comment))) print(<span class="hljs-string"><span class="hljs-string">"remap ends"</span></span>) data.dropna(inplace=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) data[<span class="hljs-string"><span class="hljs-string">"text"</span></span>] = data.text.map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> s: <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> s==<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> s) data[<span class="hljs-string"><span class="hljs-string">"text"</span></span>] = data.text.map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> s: <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> s==<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> s) data[<span class="hljs-string"><span class="hljs-string">"text"</span></span>] = data.text.map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> s: <span class="hljs-string"><span class="hljs-string">" "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> s==<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> s) data[<span class="hljs-string"><span class="hljs-string">"text"</span></span>] = data.text.map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> s: <span class="hljs-string"><span class="hljs-string">" "</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> s==<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> s) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data</code> </pre> <br></div></div><br><h4>  рдбреЗрдЯрд╛ рдЖрдЙрдЯрдкреБрдЯ </h4><br>  рдЕрдм рд╣рдо рдорд╛рди рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдирд┐рдпрдд рд╕рдордп рдкрд░ рдирд┐рдпрдВрддреНрд░рдХ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрдЧреАред <br><br>  рд╣рдо рд╕рдкреНрддрд╛рд╣ рдХреЗ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдШрдВрдЯреЗ рдФрд░ рджрд┐рди рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдореА рдбреЗрдЯрд╛ рд░рд┐рдХреЙрд░реНрдб рджреЗрдЦ рд░рд╣реЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдордВрдЧрд▓рд╡рд╛рд░ рдХреЛ рд╕реБрдмрд╣ 9 рдмрдЬреЗ: <br><br><pre> <code class="python hljs">&lt;code&gt;data[(data[<span class="hljs-string"><span class="hljs-string">"day_in_week"</span></span>] == day) &amp; (data[<span class="hljs-string"><span class="hljs-string">"hour"</span></span>] == hour)]&lt;/code&gt;</code> </pre> <br><img src="https://habrastorage.org/webt/t4/gg/dg/t4ggdgmwezje8lgllisorbqrqwa.png"><br>  <i>(рдпрд╣ рд╕рдм рдбреЗрдЯрд╛ рдирд╣реАрдВ рд╣реИ)</i> <br><br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо рдЕрджреНрд╡рд┐рддреАрдп рд╕реНрдЯреЙрдк рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдХреЗрд╡рд▓ рд╕реНрдЯреЙрдк рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЙрдирдХреА рд╕рдВрдЦреНрдпрд╛: <br><br><pre> <code class="python hljs">df[(df[<span class="hljs-string"><span class="hljs-string">"day_in_week"</span></span>] == <span class="hljs-number"><span class="hljs-number">2</span></span>) &amp; (df[<span class="hljs-string"><span class="hljs-string">"hour"</span></span>] == <span class="hljs-number"><span class="hljs-number">9</span></span>)][<span class="hljs-string"><span class="hljs-string">"text"</span></span>].value_counts()</code> </pre> <br><img src="https://habrastorage.org/webt/yq/az/if/yqazifl3gkclyqw4ifykvemsrky.png"><br><br>  рдЕрдм рд╣рдо рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдордВрдЧрд▓рд╡рд╛рд░ рд╕реБрдмрд╣ 9 рдмрдЬреЗ, рдореАрдЯ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдкреНрд▓рд╛рдВрдЯ, рдЙрд▓ рдХреЗ рд╕реНрдЯреЙрдк рдкрд░ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреА рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛрдЧреАред  рд▓реБрдЧреЛрд╡рдпрд╛, рдмреЗрд▓рдЧреБрдЯ, рдЯреАрдбреА "рдУрдорд╛"ред <br><br>  рдЗрд╕ рдкрджреНрдзрддрд┐ рдХрд╛ рдореБрдЦреНрдп рджреЛрд╖ рдбреЗрдЯрд╛ рдХреА рдХрдореА рд╣реИред  рд╕рднреА рджрд┐рдиреЛрдВ рдФрд░ рдШрдВрдЯреЛрдВ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рднреАрдбрд╝ рдХреЗ рд╕рдордп рдореЗрдВ рджреА рдЧрдИ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпрд╛рдВ рд╣реЛрддреА рд╣реИрдВ, рдЬрдм рд▓реЛрдЧ рдХрдо рд▓реЛрдХрдкреНрд░рд┐рдп рдШрдВрдЯреЛрдВ рдореЗрдВ рдбреЗрдЯрд╛ рд╕реЗ рдЕрдзрд┐рдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкрд░рд┐рд╡рд╣рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк рдбреЗрдЯрд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рди рдХреЗрд╡рд▓ рдПрдХ рд╕рдореВрд╣ рдХреА рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рд╕реЗ, рдмрд▓реНрдХрд┐ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕рдореВрд╣реЛрдВ рдпрд╛ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдЪреИрдЯ рд╕реЗ, рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде, рд╕рдм рдХреБрдЫ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рдПрдЧрд╛ред <br><br><h4>  рд╡реАрдХреЗ рд▓реЙрдиреНрдЧрдкреЙрд▓ рдПрдкреАрдЖрдИ рдХреЗ рд╕рд╛рде рдмреЙрдЯ </h4><br>  рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рд╕рдордп рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реБрдП рдмрд┐рдирд╛, рдореИрдВрдиреЗ VKontakte рдкрд░ рдПрдХ рд╕рдореВрд╣ рдХреЗ рд▓рд┐рдП рдПрдХ рдмреЙрдЯ рдмрдирд╛рдпрд╛ рдЬреЛ рд░рд┐рдХреЙрд░реНрдб рдХреЗ рд╕реНрдЯреЙрдк рдХреА рд╕рдВрдЦреНрдпрд╛ рднреЗрдЬрдХрд░ рдХрд┐рд╕реА рднреА рд╕рдВрджреЗрд╢ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рд╡рд░реНрддрдорд╛рди рдШрдВрдЯреЗ рдФрд░ рд╕рдкреНрддрд╛рд╣ рдХрд╛ рджрд┐рди рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдмреЙрдЯ рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> randint <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> vk_api <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> get_stops_from_data <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> get_stops_by_time <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start_bot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data, token)</span></span></span><span class="hljs-function">:</span></span> vk_session = vk_api.VkApi(token=token) vk = vk_session.get_api() print(<span class="hljs-string"><span class="hljs-string">"bot started"</span></span>) longPoll = vk.groups.getLongPollServer(group_id=<span class="hljs-number"><span class="hljs-number">183524419</span></span>) server, key, ts = longPoll[<span class="hljs-string"><span class="hljs-string">'server'</span></span>], longPoll[<span class="hljs-string"><span class="hljs-string">'key'</span></span>], longPoll[<span class="hljs-string"><span class="hljs-string">'ts'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-comment"><span class="hljs-comment">#  :   ts longPoll = post('%s' % server, data={'act': 'a_check', 'key': key, 'ts': ts, 'wait': 25}).json() if longPoll['updates'] and len(longPoll['updates']) != 0: for update in longPoll['updates']: if update['type'] == 'message_new': #        vk.messages.markAsRead(peer_id=update['object']['user_id']) user = update['object']["user_id"] text = get_stops_by_time(data) if text is None or text == {}: message = "├н├е├▓ ├з├а├п├и├▒├е├й" vk.messages.send(user_id=user, random_id=randint(-2147483648, 2147483647), message=message) print(message) ts = longPoll['ts'] continue message = "   -     \n" \ "\n \n" for i in text.items(): message += i[0] + " " message += str(i[1]) message += "\n" #    vk.messages.send(user_id=user, random_id=randint(-2147483648, 2147483647), message=message) ts = longPoll['ts']</span></span></code> </pre> <br></div></div><br><h4>  рдирд┐рд╖реНрдХрд░реНрд╖ </h4><br>  рдЗрд╕ рддрд░рд╣ рдХреА рдкрд░рд┐рдХрд▓реНрдкрдирд╛рдУрдВ рдХреА рдЧреБрдгрд╡рддреНрддрд╛ рдХрд╛ рдореЗрд░реЗ рджреНрд╡рд╛рд░рд╛ рдПрдХ рдмрд╛рд░ рд╕реЗ рдЕрдзрд┐рдХ рдЕрднреНрдпрд╛рд╕ рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИред  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдирд┐рдпрдВрддреНрд░рдХ, рдореВрд▓ рд░реВрдк рд╕реЗ, рдПрдХ рд╣реА рд╕реНрдЯреЙрдк рдкрд░ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдмрд┐рд▓реНрдХреБрд▓ рд╕рд╣реА рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди рдирд╣реАрдВ рджрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рд╕рдлрд▓рддрд╛ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ 100% рдирд╣реАрдВ рд╣реИред  рдПрдХ рд╢рдмреНрдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╕рд╣реА рдХрд░рдиреЗ рд╕реЗ рд▓реЗрдХрд░ рдЬреАрди, рдЧреБрдгрд╕реВрддреНрд░ рдФрд░ рдкреНрд░реЛрдЯреАрди рдХреА рддреБрд▓рдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓реЗрд╡реЗрдиреНрд╕рд╣рд╛рдЗрдЯ рджреВрд░реА рдХреЗ рджрд░реНрдЬрдиреЛрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕ рддрд░рд╣ рдХреА рд▓рд╛рдЧреВ рд╕рдорд╕реНрдпрд╛рдУрдВ рдореЗрдВ рдЗрд╕рдХреА рдХреНрд╖рдорддрд╛ рднреА рд╣реИред <br><br>  рдЖрдкрдХрд╛ рджрд┐рди рд╢реБрдн рд╣реЛ, рдФрд░ рдХрд┐рд░рд╛рдпрд╛ рдЪреБрдХрд╛рдПрдВред <br><br>  рд╕рднреА рдмреЙрдЯ рдХреЛрдб рдФрд░ рдбреЗрдЯрд╛ рдЬреЛрдбрд╝рддреЛрдбрд╝ рдпрд╣рд╛рдВ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд┐рдП рдЧрдП <a href="https://github.com/dingdongyouarewrong/vk_controllers_bot">рд╣реИрдВ</a> ред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi478490/">https://habr.com/ru/post/hi478490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi478474/index.html">рднрд╛рдИ рдкрд╛рдмреНрд▓реЛ рдПрд╕реНрдХреЛрдмрд╛рд░ рдиреЗ рдПрдХ рд▓рдЪреАрд▓рд╛ рд╕реНрдорд╛рд░реНрдЯрдлреЛрди рднреА рдЬрд╛рд░реА рдХрд┐рдпрд╛</a></li>
<li><a href="../hi478480/index.html">рдЖрд░реНрдЯрд┐рдлрд┐рд╢рд┐рдпрд▓ рдЗрдВрдЯреЗрд▓рд┐рдЬреЗрдВрд╕, ITSM рдФрд░, рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ, LEAN рдХрд╣рд╛рдБ рд╣реИ?</a></li>
<li><a href="../hi478482/index.html">рдбреЗрд╡рд▓рдкрд░ рдиреЗ рдПрдВрдЧреБрд▓рд░, рд▓реЗрдЖрдЙрдЯ, рдкреАрдПрдЪрдкреА рдкрд░ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдФрд░ рдореЗрдЬрдмрд╛рди рдмреИрдардХреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд╛рд░ рдЦреЛрд▓рд╛</a></li>
<li><a href="../hi478484/index.html">рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд░ рд╕реНрдХрд╛рдбрд╛: рдорд┐рдердХ рдпрд╛ рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛?</a></li>
<li><a href="../hi478486/index.html">10-рдПрдирдПрдо рдЪрд┐рдкреНрд╕ рдХрд╛ рдпреБрдЧ - рдЬреЛ рдЗрд╕ рддрд░рд╣ рдХреЗ рдкреНрд░реЛрд╕реЗрд╕рд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЙрджреНрдпреЛрдЧ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi478492/index.html">рдПрдХ CO2 рдЖрд╣рд╛рд░ рдкрд░ Escherichia рдХреЛрд▓рд╛рдИ: рдЧреНрд▓реЛрдмрд▓ рд╡рд╛рд░реНрдорд┐рдВрдЧ рдХреЗ рдЦрд┐рд▓рд╛рдл рд▓рдбрд╝рд╛рдИ рдореЗрдВ рдПрдХ рдирдпрд╛ рдЙрдкрдХрд░рдг?</a></li>
<li><a href="../hi478494/index.html">рд╡рд┐рдиреНрдирдо рдЯреАрдЖрд░рдкреА рд╣реАрдЯ рдЯреНрд░реАрдЯрдореЗрдВрдЯ рд╕реЙрд▓реНрдпреВрд╢рди: рд╕реЗрдЯрдЕрдк рдФрд░ рдЙрдкрдпреЛрдЧ</a></li>
<li><a href="../hi478496/index.html">50 рд╕рд╛рд▓ рдкрд╣рд▓реЗ рдХрдорд░рд╛ рдирдВрдмрд░ 3420 рдореЗрдВ рдЗрдВрдЯрд░рдиреЗрдЯ рдХрд╛ рдЬрдиреНрдо рд╣реБрдЖ рдерд╛</a></li>
<li><a href="../hi478498/index.html">1. рдлреЛрд░реНрдЯрд┐рдиреЗрдЯ рд╕реНрдЯрд╛рд░реНрдЯрд┐рдВрдЧ рд╡реА 6.0ред рдкрд░рд┐рдЪрдп</a></li>
<li><a href="../hi478500/index.html">рдЧрд░реНрдорд┐рдпреЛрдВ рдореЗрдВ рдЗрддрдиреЗ рдХрдо рд╕рдореНрдореЗрд▓рди рдХреНрдпреЛрдВ рд╣реЛрддреЗ рд╣реИрдВ?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>