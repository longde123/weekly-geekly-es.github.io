<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕎 👨‍👨‍👧‍👦 🐺 L'histoire d'une application réussie de SPR dans un projet Legacy 👲🏽 👇🏽 👨‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je vais vous raconter, en prenant l'exemple de l'évolution de mon projet, l'histoire de la transition et la vision de la programmati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'histoire d'une application réussie de SPR dans un projet Legacy</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468853/"> Dans cet article, je vais vous raconter, en prenant l'exemple de l'évolution de mon projet, l'histoire de la transition et la vision de la programmation contractuelle. <br><br>  Au début, je voulais nommer l'article - «Programmation des contrats», dans la mesure où l'approche utilisée est de diviser toute la logique métier en contrats de données et en services clients utilisant ces contrats et interagissant les uns avec les autres à travers ces structures de données, de sorte que les mêmes La structure est traitée avec succès dans différents services. <br><br>  Quelque chose que je vais décrire dans ma propre langue. <br><a name="habracut"></a><br>  L'histoire de ma transition vers la programmation sous contrat a commencé avec le fait que j'avais un projet hérité envahi par une vaste gamme de fonctionnalités différentes dans le même domaine d'activité.  De plus, tout cela était encore du multithreading et de la personnalisation pour différents clients.  Plus précisément, le domaine d'activité était l'échange de documents électroniques juridiquement pertinents entre le système comptable, les services de fichiers et les services cloud. <br><br>  Au cours du développement du système, de nouvelles exigences commerciales sont apparues et, en conséquence, le projet s'est rapidement développé et a été compliqué par de nouvelles fonctionnalités, ce qui a conduit à un moment donné à une architecture où le projet a commencé à ressembler à plusieurs applications distinctes avec des fonctionnalités connexes.  Seule cette fonctionnalité a été implémentée, non pas à partir d'éléments communs, mais à partir de structures similaires mais implémentées différemment dans différents assemblys et espaces de noms. <br><br>  Visuellement, une telle architecture peut être représentée comme plusieurs verticales de fonctionnalités <br><br><img src="https://habrastorage.org/webt/i9/ma/pf/i9mapfv3huwzddt7xcbghogdxjg.jpeg" alt="image"><br><br>  Une caractéristique d'une telle architecture était que si une exigence ou une erreur supplémentaire apparaissait, elle devait alors implémenter une telle tâche dans tous les «modules fonctionnels» du système, et non dans un domaine.  Une autre caractéristique a été la présence dans le projet d'un grand nombre de constructeurs, ce qui a conduit à une telle division verticale du secteur d'activité.  Le développeur implémente de nouveaux algorithmes pour les nouvelles exigences métier dans le code des constructeurs, ce qui conduit à l'émergence de nouvelles entités avec des structures différentes pour le même objet métier.  Certes, cette approche peut être considérée comme plus orientée objet qu'une approche code-behind simple avec du code spaghetti.  Ainsi, si vous voyez un grand nombre de constructeurs dans vos projets, la transition vers une approche contact simplifiera l'accompagnement et accélérera le développement de votre projet. <br><br>  Une fois, dans l'entreprise, nous avons été confrontés au fait que le client avec lequel nous mettions en œuvre a commencé à exprimer que le système que j'ai développé produisait souvent des erreurs.  Je ne pouvais pas contester cela, bien que des erreurs soient apparues périodiquement, mais elles ont été corrigées et certains clients ont fait installer et utiliser le système.  Je dois dire merci que le client était nuisible et difficile, et a testé très soigneusement notre système pendant la période de mise en œuvre. <br><br>  Moi aussi, je n'aimais pas le fait que je n'ai pas eu assez de temps pour le développement et le soutien, malgré beaucoup d'efforts, et à un moment donné, je n'avais tout simplement aucune idée de ce qui pourrait améliorer le système et le rendre plus stable. <br><br>  La décision est venue soudainement et de façon inattendue. <br><br>  J'ai bien compris que les mêmes objets métier sont implémentés différemment dans différents modules du système - documents de différents types, reçus, travailleurs, clients de service, clients de base de données, clients de fichiers avec la possibilité de stocker des documents dans différents formats (personnalisation pour différents clients;) ) <br><br>  Une partie de la logique a été implémentée dans des entités, ce qui a empêché l'utilisation des mêmes entités dans différents algorithmes. <br><br>  J'ai alors décidé - il fallait créer quelque chose comme un seul constructeur avec des détails à partir desquels tous les algorithmes implémentés dans le système peuvent être assemblés.  Ce qui est logique, car il réduit le nombre de classes similaires et simplifie la prise en charge. <br><br>  J'ai décidé de diviser strictement "l'univers" de ma candidature en <br><br><ul><li>  <b>contrats de données</b> - structures de données qui contiennent et sont utilisées uniquement pour le stockage de données <br><br>  Documents <br>  Enveloppes <br>  Reçus <br>  EP <br>  ... <br></li><li>  <b>clients-services</b> - J'écris spécifiquement que les clients sont des services, car lors de la mise en œuvre de chaque système qui interagit dans le domaine d'activité, je l'ai représenté comme une enveloppe sur ce système, dans lequel les méthodes de travail avec les contrats de date ont été mises en œuvre.  Et en plus du fait que ces classes sont des wrappers sur les services, elles contenaient également la logique de liaison, les conversions et les transformations nécessaires pour simplifier la logique métier <br></li></ul><br>  De plus, les bûcherons s'accrochaient à ces clients.  Cela vous a permis de trouver rapidement le point d'erreur par le journal.  (à l'avenir, de nombreux appels ont disparu lorsque, par les journaux, les utilisateurs eux-mêmes ont commencé à comprendre où ils avaient commis une erreur - un système de fichiers, un réseau, un système de comptabilité ou le service Web de l'opérateur) <br><br>  Par exemple <br>  CloudClient - un client d'un service cloud auquel les documents sont envoyés et traités <br>  - Télécharger <br>  - envoyer <br>  - Obtenez <br>  - Télécharger <br>  - D'accord <br>  ... <br><br>  FileSystemClient - client de système de fichiers <br>  ERPClient - système de comptabilité client <br><br>  Les clients ont implémenté toutes les méthodes précédemment utilisées dans les algorithmes dans tous les modules, ce qui a permis d'implémenter rapidement et facilement les algorithmes nouvellement implémentés à partir des mêmes parties. <br><br>  Et l'allocation de méthodes de fonctionnalité similaires dans les clients respectifs a conduit à une plus grande spécialisation et réutilisation du code. <br><br>  L'architecture était maintenant un diagramme comme dans l'image <br><br><img src="https://habrastorage.org/webt/wg/rq/ej/wgrqejf4f6gvfyezzwejorljsa8.jpeg" alt="image"><br><br>  J'ai alloué tous les objets de base de mon concepteur à l'assemblage avec la fin du SDK (Software Developers Kit) et c'est devenu plus facile à travailler et surtout plus agréable.  Le travail a déjà cessé d'être la création de béquilles et de solutions temporaires, et maintenant l'attitude envers le projet de l'intérieur est devenue plus sérieuse du fait que je voyais maintenant une énorme offre d'évolutivité et d'architecture compétitive.  En effet, un tel fait a considérablement accru la motivation et ouvert de nouveaux horizons professionnels. <br><br>  Sur la base du SDK créé, j'ai confié la mise en œuvre d'une couche de logique métier qui automatise la mise en œuvre de tâches directement métier.  Étant donné que toutes les nuances techniques ont été apportées aux couches inférieures situées dans les clients, la mise en œuvre des mêmes algorithmes a été simplifiée et a commencé à paraître beaucoup plus agréable. <br><br>  L'approche est simple, et permet de simplifier les développements futurs et ce qui est très important est d'augmenter la flexibilité de l'architecture.  Oui, cela nécessitera une refactorisation approfondie.  Dans mon cas, il a fallu 2 semaines de développement en mode fanatique.  Mais après cela, je n'ai presque pas codé, car tout fonctionnait de manière stable. <br><br>  Et grâce à la séparation des responsabilités (SPR) et des journaux, j'ai pu supprimer rapidement les erreurs des services tiers, entraînant des erreurs de mon côté.  Auparavant, cela nécessitait des analyses qui prenaient beaucoup de temps. <br><br>  Cette approche est bonne à utiliser sur certaines couches.  Sur les couches supérieures de l'application, un modèle anémique peut être plus pratique, mais il est préférable de mettre en œuvre un modèle anémique basé sur une approche contractuelle. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468853/">https://habr.com/ru/post/fr468853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468843/index.html">Avez-vous peur de mettre en place un système CRM? Votre entreprise est peut-être malade</a></li>
<li><a href="../fr468845/index.html">Un court cours de physiologie de la ville, ou parties du corps</a></li>
<li><a href="../fr468847/index.html">Marchés publics dans d'autres pays: pourquoi les lois ont besoin de cadres</a></li>
<li><a href="../fr468849/index.html">Rétro-ingénierie de processeur inconnu dans un seul programme</a></li>
<li><a href="../fr468851/index.html">Implémentation d'animation dans React Native</a></li>
<li><a href="../fr468859/index.html">«Routeur de pompage»: réglage de l'équipement TP-Link pour les fournisseurs Internet</a></li>
<li><a href="../fr468861/index.html">Positive Technologies donne vie à la «ville piratable» dans The Cyberbattle Standoff à HITB + CyberWeek</a></li>
<li><a href="../fr468863/index.html">Internals Go: boucler les variables de boucle en fermeture</a></li>
<li><a href="../fr468873/index.html">Un train privé qui a ruiné la commodité</a></li>
<li><a href="../fr468875/index.html">Épisode de hachage et d'amortissement effondré</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>