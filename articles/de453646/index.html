<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>„ÄΩÔ∏è ‚úåüèΩ üö© Normalisierung von Daten in einer verteilten Datenbank, Microservices und ERP üçå ü§ì ‚ùå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! 

 Diese kleine Notiz entstand w√§hrend der Diskussion des Artikels ‚ÄûVerteilte Monolithen ...‚Äú . Da das Thema weitere √úberlegungen erforder...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Normalisierung von Daten in einer verteilten Datenbank, Microservices und ERP</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453646/">  Hallo Habr! <br><br>  Diese kleine Notiz entstand w√§hrend der Diskussion des Artikels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûVerteilte Monolithen ...‚Äú</a> . Da das Thema weitere √úberlegungen erfordert, habe ich beschlossen, sie in meinem Blog zu ver√∂ffentlichen.  Der Autor des Artikels beschreibt tats√§chlich eine verteilte Datenbank und beweist, dass das Ereignisprotokoll die einzig richtige Speicherstruktur darin ist.  Die Argumente lauten ungef√§hr wie folgt: <br><br><ul><li>  Da das Ereignis immer r√§umlich / zeitlich lokalisiert ist, kann es alle Daten in sich selbst speichern (manchmal in Form von Links zu fr√ºheren Ereignissen), wodurch das Ereignis serialisierbar wird, die Lokalit√§t erh√∂ht, die Konnektivit√§t verringert usw. </li><li>  Sobald ein Ereignis aufgetreten ist, √§ndert es sich nicht mehr (Verfeinerungen werden durch andere Ereignisse dokumentiert), wodurch der Replikationsverkehr verringert wird. </li><li>  Das Ereignisspeicherformat kann mehr oder weniger einheitlich und von einem bestimmten Themenbereich getrennt sein. </li><li>  Ereignisprotokolle k√∂nnen relativ problemlos aufgeteilt / zusammengef√ºhrt werden. Sie k√∂nnen verschiedene Arten von Ereignissen auf verschiedenen Knoten speichern, dh es handelt sich im Wesentlichen um eine verteilte Datenbank. </li><li>  Ereignisse sind nach Zeit geordnet, und diese Reihenfolge spiegelt auch einen Kausalzusammenhang wider (auf das aktuelle Ereignis kann sp√§ter nicht verwiesen werden). </li><li>  Bei der Aufzeichnung eines Ereignisses ist es nicht erforderlich, andere Daten transaktional zu aktualisieren (tats√§chlich ist dies erforderlich, aber in einer begrenzten Anzahl von F√§llen muss beispielsweise der Kontostand des Abonnenten im Abrechnungssystem sofort relevant sein, es m√ºssen Linkz√§hler aktualisiert werden usw.). </li><li>  Die Berichterstellung kann direkt aus dem Ereignisprotokoll erstellt werden, ohne dass die Daten in eine normalisierte Form konvertiert werden m√ºssen. </li></ul><a name="habracut"></a><br>  In Bezug auf den letzten Punkt zeigen zahlreiche Leistungstests (einschlie√ülich meines Blogs), dass auf moderner Hardware die Verarbeitung von einer Milliarde Ereignissen (Fakten) mit einem Single-Pass-Algorithmus mit Kurzzeitged√§chtnis Minuten dauert, was f√ºr die Berichterstellung durchaus akzeptabel ist.  Und da die Verarbeitung von Ereignissen verschiedener Typen, die nicht √ºber Links verbunden sind, einfach zu parallelisieren ist, kann die Berichtszeit auf mehrere zehn Sekunden reduziert werden, ohne dass der Aufwand f√ºr das Normalisieren von Daten / Indizieren / Sammeln von Statistiken / Debuggen und Andeutungen von Abfragen anf√§llt, wie dies bei regul√§ren RDBMS der Fall ist.  Das Erstellen von Berichten auf der Grundlage solcher Daten macht mir daher keine Angst.  Betrachten Sie das Problem jedoch allgemeiner. <br><br>  Eine typische Gesch√§ftsanwendung kann als Datentransformationskette dargestellt werden: <br>  "Eingabe =&gt; Modell =&gt; Ausgabe".  Jedes Speicherschema ist ein Kompromiss zwischen drei Extremen: <br><br><ul><li>  Wir speichern die Daten im Ausgabeformat.  So funktionieren verschiedene Storefronts und OLAPs, bei denen die Reaktionszeit wichtig ist.  Nachteile sind bekannt - √ºberm√§√üiger Speicherbedarf und niedrige Aktualisierungsrate (normalerweise Batch). </li><li>  Wir speichern Daten im Format des Dom√§nenmodells und vereinfachen so die Berechnungsalgorithmen.  Es gibt viele Nachteile: Eine doppelte Datentransformation ist erforderlich (von der Eingabe zum Modell und vom Modell zur Ausgabe), die Transaktionskosten steigen, es ist schwierig, verteilten Speicher bereitzustellen, das √Ñndern des Schemas ist teuer usw.  Dies ist jedoch die beliebteste Option. </li><li>  Wir speichern die Daten im Eingabeformat (tats√§chlich bietet der Autor des Artikels ein Ereignisprotokoll an).  In diesem Fall sind die Transaktionskosten minimal, Daten k√∂nnen leicht aufgeteilt und zusammengef√ºhrt werden, ein einfaches, klares und stabiles Speicherschema.  Gewinn!  Nat√ºrlich muss man wieder programmieren lernen. </li></ul><br>  In Bezug auf meinen Interessenbereich (Unternehmensinformationssysteme) ist eine Veranstaltung ein Hauptdokument, und das Nachschlagewerk kann als fr√ºhere Veranstaltung betrachtet werden.  Ich habe die Tabellenstruktur eines typischen westlichen ERP bereits in dem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûNoERP oder ein neues Erscheinungsbild ...‚Äú beschrieben</a> , in dem ich vorgeschlagen habe, die √ºberm√§√üige Normalisierung von Daten (mit Ausnahme von Registern f√ºr Sofortbilanzen) abzuschaffen und die meisten Berechnungen / Berichte in Einzeldurchlaufzyklen neu zu schreiben, in denen die prim√§ren direkt verarbeitet werden Dokumente.  Ich werde die Argumente nicht wiederholen, alles ist im Artikel angegeben, aber das von mir vorgeschlagene Schema stimmte praktisch mit der These des Autors des ersten Artikels √ºberein, n√§mlich dass das Ereignisprotokoll die Daten sind.  Es ist sch√∂n, wenn jemand anderes in diese Richtung denkt. <br><br>  Es ist klar, dass dieser Ansatz im Vergleich zu modernen intelligenten DBMS ein R√ºckschritt zu sein scheint, aber in der Highloid-Welt muss man manchmal auf popul√§re / abstrakte / universelle Tools verzichten - zugunsten einer brutalen und effektiven imperativen Programmierung, die dar√ºber hinaus keine teure Lizenzierung f√ºr Knoten erfordert / kernels / users. <br><br>  Ich m√∂chte separat √ºber die Methode zum Organisieren von Beziehungen innerhalb des Ereignisprotokolls sprechen - es muss in beide Richtungen erfolgen, dh jedes Ereignis muss einen Referenzz√§hler f√ºr sich selbst speichern.  Dies ist f√ºr die Implementierung von Single-Pass-Algorithmen erforderlich. Wir wechseln von alten zu neuen Ereignissen, zwischenspeichern gleichzeitig jedes Ereignis mit einer Anzahl von eingehenden Links ungleich Null im Speicher und l√∂schen es erst aus dem Cache, nachdem alle verweisenden verarbeitet wurden.  Das Vorhandensein des Referenzz√§hlers verringert unangenehm die Transaktionsleistung. Wenn beispielsweise das Gegenparteiverzeichnis in jedem Dokument verwendet wird, muss der Referenzz√§hler in der Gegenpartei jedes Mal aktualisiert werden, wenn ein Dokument hinzugef√ºgt wird, manchmal auf einem anderen Knoten.  Dieser Ort kann jedoch universell optimiert werden, wobei verteilte Transaktionen in allen anderen F√§llen vermieden werden. <br><br>  Auf der Ideenebene ist dies alles f√ºr den Moment, ich hoffe immer noch auf ein bestimmtes Projekt (zum Beispiel auf der Grundlage von Geldeing√§ngen oder Rechnungen), und wenn sich diese Gelegenheit bietet, werde ich √ºber die Ergebnisse berichten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de453646/">https://habr.com/ru/post/de453646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de453626/index.html">Abenteuer in einem separaten Stream. Yandex-Bericht</a></li>
<li><a href="../de453628/index.html">Wof√ºr wirst du in 20 Jahren bezahlen?</a></li>
<li><a href="../de453634/index.html">Alfa Bank School of System Analysis</a></li>
<li><a href="../de453642/index.html">Intelligenter Parser f√ºr eine in Worten geschriebene Zahl</a></li>
<li><a href="../de453644/index.html">Interview - 10 Fragen zu Swift. Teil 3</a></li>
<li><a href="../de453650/index.html">Softwarekern der On-Board-Cyber-Infrastruktur des einheitlichen Streikk√§mpfers F-35</a></li>
<li><a href="../de453652/index.html">LogRock: Testen durch Protokollierung</a></li>
<li><a href="../de453656/index.html">Statisches Web: Zur√ºck zu den Grundlagen?</a></li>
<li><a href="../de453660/index.html">Intel zeigte den neuen i9-9900KS-Prozessor mit 5 GHz Turbo-Frequenz pro Kern</a></li>
<li><a href="../de453662/index.html">Mars - noch mehr Eis am Nordpol, aber tief</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>