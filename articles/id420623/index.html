<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🔧 ✌🏾 👋🏼 Aplikasi C ++ terdistribusi dengan upaya minimal 🧜🏽 🤕 🏜️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tujuan posting saya adalah untuk berbicara tentang C ++ API dari database terdistribusi Apache Ignite yang disebut Ignite C ++, serta fitur-fiturnya. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aplikasi C ++ terdistribusi dengan upaya minimal</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/gridgain/blog/420623/"><p>  Tujuan posting saya adalah untuk berbicara tentang C ++ API dari database terdistribusi Apache Ignite yang disebut Ignite C ++, serta fitur-fiturnya. </p><br><p>  Tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apache Ignite</a> on habr sudah menulis lebih dari sekali, jadi pasti beberapa dari Anda sudah tahu apa itu dan mengapa itu perlu. </p><br><h2>  Secara singkat tentang Apache Ignite untuk mereka yang belum terbiasa dengannya </h2><br><p>  Saya tidak akan masuk ke rincian tentang bagaimana Apache Ignite muncul dan bagaimana hal itu berbeda dari database klasik.  Semua pertanyaan ini telah diajukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> , di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> atau di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><p>  Jadi, Apache Ignite pada dasarnya adalah database terdistribusi cepat yang dioptimalkan untuk bekerja dengan RAM.  Ignite tumbuh dari In-memory Data Grid dan, hingga saat ini, diposisikan sebagai cache terdistribusi yang sangat cepat dan sepenuhnya dalam memori berdasarkan tabel hash yang didistribusikan.  Itulah sebabnya, selain menyimpan data, ia memiliki banyak fitur yang nyaman untuk pemrosesan terdistribusi cepat: Peta-Mengurangi, operasi data atom, transaksi ACID lengkap, kueri data SQL, yang disebut Continues Queries, yang memungkinkan untuk memantau perubahan pada data tertentu dan lainnya. </p><br><p>  Namun, baru-baru ini, platform tersebut telah menambahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dukungan untuk penyimpanan data yang terus-menerus pada disk</a> .  Setelah itu, Apache Ignite mendapatkan semua manfaat dari database berorientasi objek penuh, sambil menjaga kenyamanan, kekayaan alat, fleksibilitas dan kecepatan tanggal grid. </p><a name="habracut"></a><br><h2>  Sedikit teori </h2><br><p> Bagian penting untuk memahami bekerja dengan Apache Ignite adalah bahwa ia ditulis dalam Java.  Anda akan bertanya: "Apa bedanya dengan apa yang ditulis database jika saya tetap berkomunikasi dengannya melalui SQL?"  Ada beberapa kebenaran dalam hal ini.  Jika Anda ingin menggunakan Ignite hanya sebagai database, Anda dapat mengambil ODBC atau JDBC driver yang datang dengan Ignite, meningkatkan jumlah node server yang Anda butuhkan menggunakan skrip <code>ignite.sh</code> dibuat khusus, konfigurasikan menggunakan konfigurasi fleksibel dan terutama melambung tentang bahasa, bekerja dengan Ignite bahkan dari PHP, bahkan dari Go. </p><br><p>  Antarmuka Ignite asli menyediakan banyak fitur lebih dari sekadar SQL.  Dari yang paling sederhana: operasi atom cepat dengan objek dalam database, objek sinkronisasi terdistribusi, dan komputasi terdistribusi dalam sebuah cluster pada data lokal, ketika Anda tidak perlu menarik ratusan megabyte data ke klien untuk perhitungan.  Seperti yang Anda pahami, bagian API ini tidak berfungsi melalui SQL, tetapi ditulis dalam bahasa pemrograman tujuan umum yang sangat spesifik. </p><br><p>  Tentu saja, karena Ignite ditulis dalam Java, API paling komprehensif diimplementasikan dalam bahasa pemrograman ini.  Namun, selain Java, ada juga versi API untuk C # .NET dan C ++.  Ini adalah apa yang disebut "tebal" klien - pada kenyataannya, simpul Ignite di JVM, diluncurkan dari C ++ atau C #, komunikasi dengan yang terjadi melalui JNI.  Node jenis ini diperlukan, antara lain, agar cluster dapat menjalankan komputasi terdistribusi dalam bahasa yang sesuai - C ++ dan C #. </p><br><p>  Selain itu, ada protokol terbuka untuk apa yang disebut klien "tipis".  Ini sudah perpustakaan ringan dalam berbagai bahasa pemrograman yang berkomunikasi dengan cluster melalui TCP / IP.  Mereka mengambil lebih sedikit ruang memori, memulai hampir secara instan, tidak memerlukan JVM pada mesin, tetapi mereka memiliki latensi yang sedikit lebih buruk dan API yang tidak terlalu kaya dibandingkan dengan klien "tebal".  Saat ini ada klien tipis di Java, C #, dan Node.js, klien di C ++, PHP, Python3, Go secara aktif dikembangkan. </p><br><p>  Dalam sebuah posting, saya akan melihat API tebal Ignite untuk C ++ API, karena itu yang saat ini menyediakan API paling komprehensif. </p><br><h2>  Memulai </h2><br><p>  Saya tidak akan membahas secara terperinci tentang pemasangan dan konfigurasi kerangka itu sendiri - prosesnya rutin, tidak terlalu menarik dan dijelaskan dengan baik, misalnya, dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi resmi</a> .  Ayo langsung ke kode. </p><br><p>  Karena Apache Ignite adalah platform terdistribusi, untuk memulai, hal pertama yang perlu Anda lakukan adalah menjalankan setidaknya satu node.  Ini dilakukan dengan sangat sederhana menggunakan kelas <code>ignite::Ignition</code> : </p><br><pre> <code class="hljs rust">#include &lt;iostream&gt; #include &lt;ignite/ignition.h&gt; using namespace ignite; int main() { IgniteConfiguration cfg; Ignite node = Ignition::Start(cfg); std::cout &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Node started. Press 'Enter' to stop"</span></span> &lt;&lt; std::endl; std::cin.get(); Ignition::StopAll(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); std::cout &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Node stopped"</span></span> &lt;&lt; std::endl; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Selamat, Anda meluncurkan simpul Cache Apache Ignite pertama Anda dengan pengaturan default.  Kelas Ignite, pada gilirannya, adalah titik masuk utama untuk mengakses seluruh API cluster. </p><br><h2>  Bekerja dengan data </h2><br><p>  Komponen utama Ignite C ++ yang menyediakan API untuk bekerja dengan data adalah cache, <code>ignite::cache::Cache&lt;K,V&gt;</code> .  Cache menyediakan serangkaian metode dasar untuk bekerja dengan data.  Karena <code>Cache</code> pada dasarnya adalah antarmuka ke tabel hash terdistribusi, metode dasar untuk bekerja dengannya mirip dengan bekerja dengan wadah biasa seperti <code>map</code> atau <code>unordered_map</code> . </p><br><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;string&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;cassert&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;cstdint&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ignite/ignition.h&gt;</span></span></span><span class="hljs-meta"> using namespace ignite; struct Person { int32_t age; std::string firstName; std::string lastName; } //... int main() { IgniteConfiguration cfg; Ignite node = Ignition::Start(cfg); cache::Cache</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;int32_t, Person&gt;</span></span></span><span class="hljs-meta"> personCache = node.CreateCache</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;int32_t, Person&gt;</span></span></span><span class="hljs-meta">(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"PersonCache"</span></span></span><span class="hljs-meta">); Person p1 = { 35, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"John"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Smith"</span></span></span><span class="hljs-meta"> }; personCache.Put(42, p1); Person p2 = personCache.Get(42); std::cout </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&lt; p2 &lt;&lt; std::endl; assert(p1 == p2); return 0; }</span></span></span></span></code> </pre> <br><p>  Terlihat sangat sederhana, bukan?  Bahkan, hal-hal menjadi sedikit rumit jika kita melihat lebih dekat pada batasan C ++. </p><br><h2>  C ++ Tantangan Integrasi </h2><br><p>  Seperti yang saya sebutkan, Apache Ignite sepenuhnya ditulis di Jawa - bahasa berbasis OOP yang kuat.  Adalah logis bahwa banyak fitur bahasa ini, yang terkait, misalnya, dengan refleksi waktu pelaksanaan program, secara aktif digunakan untuk mengimplementasikan komponen Apache Ignite.  Misalnya, untuk serialisasi / deserialisasi objek untuk penyimpanan pada disk dan transmisi melalui jaringan. </p><br><p>  Di C ++, tidak seperti Java, tidak ada refleksi yang kuat.  Secara umum, tidak, belum, sayangnya.  Secara khusus, tidak ada cara untuk mengetahui daftar dan jenis bidang suatu objek, yang dapat memungkinkan secara otomatis menghasilkan kode yang diperlukan untuk membuat serial / deserializing objek jenis pengguna.  Oleh karena itu, satu-satunya pilihan di sini adalah meminta pengguna untuk secara eksplisit menyediakan set metadata yang diperlukan tentang jenis pengguna dan bagaimana cara menggunakannya. </p><br><p>  Di Ignite C ++, ini diterapkan melalui spesialisasi template <code>ignite::binary::BinaryType&lt;T&gt;</code> .  Pendekatan ini digunakan baik pada klien "tebal" dan "tipis".  Untuk kelas Person yang disajikan di atas, spesialisasi serupa mungkin terlihat seperti ini: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> ignite { <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> binary { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BinaryType</span></span></span><span class="hljs-class">&lt;Person&gt; {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> int32_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTypeId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GetBinaryStringHashCode(<span class="hljs-string"><span class="hljs-string">"Person"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTypeName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; name)</span></span></span><span class="hljs-function"> </span></span>{ name = <span class="hljs-string"><span class="hljs-string">"Person"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> int32_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetFieldId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GetBinaryStringHashCode(name); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsNull</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Person&amp; obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetNull</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Person&amp; dst)</span></span></span><span class="hljs-function"> </span></span>{ dst = Person(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BinaryWriter&amp; writer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Person&amp; obj)</span></span></span><span class="hljs-function"> </span></span>{ writer.WriteInt32(<span class="hljs-string"><span class="hljs-string">"age"</span></span>, obj.age; writer.WriteString(<span class="hljs-string"><span class="hljs-string">"firstName"</span></span>, obj.firstName); writer.WriteString(<span class="hljs-string"><span class="hljs-string">"lastName"</span></span>, obj.lastName); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Read(BinaryReader&amp; reader, Person&amp; dst) { dst.age = reader.ReadInt32(<span class="hljs-string"><span class="hljs-string">"age"</span></span>); dst.firstName = reader.ReadString(<span class="hljs-string"><span class="hljs-string">"firstName"</span></span>); dst.lastName = reader.ReadString(<span class="hljs-string"><span class="hljs-string">"lastName"</span></span>); } }; } <span class="hljs-comment"><span class="hljs-comment">// namespace binary } // namespace ignite</span></span></code> </pre> <br><p>  Seperti yang Anda lihat, selain metode serialisasi / deserialisasi <code>BinaryType&lt;Person&gt;::Write</code> , <code>BinaryType&lt;Person&gt;::Read</code> , ada beberapa metode lain.  Mereka diperlukan untuk menjelaskan kepada platform cara bekerja dengan tipe C ++ khusus dalam bahasa lain, khususnya Java.  Mari kita perhatikan lebih dekat setiap metode: </p><br><ul><li>  <code>GetTypeName()</code> - Mengembalikan nama tipe.  Nama tipe harus sama pada semua platform tempat tipe tersebut digunakan.  Jika Anda hanya menggunakan tipe di Ignite C ++, namanya bisa apa saja. </li><li>  <code>GetTypeId()</code> - Metode ini mengembalikan pengidentifikasi unik lintas platform untuk jenisnya.  Untuk pekerjaan yang benar dengan tipe pada platform yang berbeda, perlu bahwa itu dihitung sama di mana-mana.  Metode <code>GetBinaryStringHashCode(TypeName)</code> mengembalikan Tipe ID yang sama seperti pada semua platform lainnya secara default, yaitu, penerapan metode ini memungkinkan Anda untuk bekerja dengan benar dengan tipe ini dari platform lain. </li><li>  <code>GetFieldId()</code> - Mengembalikan pengidentifikasi unik untuk nama jenis.  Sekali lagi, untuk pekerjaan lintas platform yang benar perlu menggunakan metode <code>GetBinaryStringHashCode()</code> ; </li><li>  <code>IsNull()</code> - Memeriksa apakah instance kelas adalah objek bertipe <code>NULL</code> .  Digunakan untuk membuat serialisasi nilai <code>NULL</code> dengan benar.  Tidak terlalu berguna dengan instance kelas itu sendiri, tetapi bisa sangat nyaman jika pengguna ingin bekerja dengan pointer pintar dan mendefinisikan spesialisasi, misalnya, untuk <code>BinaryType&lt; std::unique_ptr&lt;Person&gt; &gt;</code> . </li><li>  <code>GetNull()</code> - Dipanggil ketika mencoba deserialize nilai <code>NULL</code> .  Semua yang dikatakan tentang <code>IsNull</code> juga berlaku untuk <code>GetNull()</code> . </li></ul><br><h2>  SQL </h2><br><p>  Jika kita menggambar analogi dengan database klasik, maka cache adalah skema basis data dengan nama kelas yang berisi satu tabel - dengan nama tipe.  Selain skema cache, ada skema umum yang disebut <code>PUBLIC</code> di mana Anda dapat membuat / menghapus jumlah tabel yang tidak terbatas menggunakan perintah DDL standar, seperti <code>CREATE TABLE</code> , <code>DROP TABLE</code> dan sebagainya.  Ke skema PUBLIC bahwa mereka biasanya terhubung melalui ODBC / JDBC jika mereka ingin menggunakan Ignite hanya sebagai database terdistribusi. </p><br><p>  Ignite mendukung kueri SQL lengkap, termasuk DML dan DDL.  Belum ada dukungan untuk transaksi SQL, tetapi komunitas sekarang aktif bekerja pada implementasi MVCC, yang akan menambah transaksi, dan, sejauh yang saya tahu, perubahan utama baru-baru ini diperkenalkan pada master. </p><br><p>  Untuk bekerja dengan data cache melalui SQL, Anda harus secara eksplisit menentukan dalam konfigurasi cache yang bidang objek akan digunakan dalam query SQL.  Konfigurasi ditulis dalam file XML, setelah itu path ke file konfigurasi ditentukan ketika node mulai: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">beans</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/beans"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:util</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/util"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"grid.cfg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.ignite.configuration.IgniteConfiguration"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cacheConfiguration"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.ignite.configuration.CacheConfiguration"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PersonCache"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"queryEntities"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.ignite.cache.QueryEntity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keyType"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"java.lang.Integer"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"valueType"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Person"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fields"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">map</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">entry</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"age"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"java.lang.Integer"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">entry</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"firstName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"java.lang.String"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">entry</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lastName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"java.lang.String"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">map</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">beans</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Konfigurasi diurai oleh mesin Java, jadi tipe dasar juga harus ditentukan untuk Java.  Setelah file konfigurasi dibuat, Anda perlu memulai node, dapatkan instance cache dan Anda dapat mulai menggunakan SQL: </p><br><pre> <code class="hljs lua">//... int main() { IgniteConfiguration cfg; cfg.springCfgPath = <span class="hljs-string"><span class="hljs-string">"config.xml"</span></span>; Ignite node = Ignition::Start(cfg); cache::Cache&lt;int32_t, Person&gt; personCache = node.GetCache&lt;int32_t, Person&gt;(<span class="hljs-string"><span class="hljs-string">"PersonCache"</span></span>); personCache.Put(<span class="hljs-number"><span class="hljs-number">1</span></span>, Person(<span class="hljs-number"><span class="hljs-number">35</span></span>, <span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"Smith"</span></span>)); personCache.Put(<span class="hljs-number"><span class="hljs-number">2</span></span>, Person(<span class="hljs-number"><span class="hljs-number">31</span></span>, <span class="hljs-string"><span class="hljs-string">"Jane"</span></span>, <span class="hljs-string"><span class="hljs-string">"Doe"</span></span>)); personCache.Put(<span class="hljs-number"><span class="hljs-number">3</span></span>, Person(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">"Harry"</span></span>, <span class="hljs-string"><span class="hljs-string">"Potter"</span></span>)); personCache.Put(<span class="hljs-number"><span class="hljs-number">4</span></span>, Person(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">"Ronald"</span></span>, <span class="hljs-string"><span class="hljs-string">"Weasley"</span></span>)); cache::query::SqlFieldsQuery qry( <span class="hljs-string"><span class="hljs-string">"select firstName, lastName from Person where age = ?"</span></span>); qry.AddArgument&lt;int32_t&gt;(<span class="hljs-number"><span class="hljs-number">12</span></span>); cache::query::QueryFieldsCursor cursor = cache.Query(qry); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (cursor.HasNext()) { QueryFieldsRow row = cursor.GetNext(); std::cout &lt;&lt; row.GetNext&lt;std::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;() &lt;&lt; <span class="hljs-string"><span class="hljs-string">", "</span></span>; std::cout &lt;&lt; row.GetNext&lt;std::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;() &lt;&lt; std::endl; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Dengan cara yang sama, Anda bisa menggunakan <code>insert</code> , <code>update</code> , <code>create table</code> dan kueri lainnya.  Tentu saja, permintaan lintas-cache juga didukung.  Namun, dalam hal ini, nama cache harus ditunjukkan dalam permintaan dengan tanda kutip sebagai nama skema.  Misalnya, alih-alih </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Person <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> Profession</code> </pre> <br><p>  harus menulis </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"PersonCache"</span></span>.Person <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> <span class="hljs-string"><span class="hljs-string">"ProfessionCache"</span></span>.Profession</code> </pre> <br><h2>  Dan sebagainya </h2><br><p>  Ada banyak kemungkinan di Apache Ignite dan, tentu saja, dalam satu posting tidak mungkin untuk membahas semuanya.  C ++ API sedang aktif dikembangkan sekarang, jadi akan segera ada yang lebih menarik.  Mungkin saja saya akan menulis beberapa posting lagi di mana saya akan menganalisis beberapa fitur secara lebih rinci. </p><br><p>  <em>PS Saya telah menjadi committer Apache Ignite sejak 2017 dan saya aktif mengembangkan C ++ API untuk produk ini.</em>  <em>Jika Anda cukup terbiasa dengan C ++, Java, atau .NET dan ingin berpartisipasi dalam pengembangan produk terbuka dengan komunitas yang ramah dan aktif, kami akan selalu menemukan beberapa tugas menarik lainnya untuk Anda.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id420623/">https://habr.com/ru/post/id420623/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id420611/index.html">Pemodelan keterikatan kuantum dalam C #</a></li>
<li><a href="../id420613/index.html">11 pustaka (kumpulan komponen) untuk React Native yang harus Anda ketahui di 2018</a></li>
<li><a href="../id420615/index.html">JavaScript: menjelajahi objek</a></li>
<li><a href="../id420617/index.html">Panduan Desain Web untuk Pengembang</a></li>
<li><a href="../id420619/index.html">Gambar Responsif: Trik CSS Yang Menghemat Waktu</a></li>
<li><a href="../id420625/index.html">KDD 2018, Hari Pertama, tutorial</a></li>
<li><a href="../id420627/index.html">C # Asynchronous Programming: Bagaimana kinerja Anda?</a></li>
<li><a href="../id420629/index.html">PHP Digest No. 137 (6 - 20 Agustus 2018)</a></li>
<li><a href="../id420631/index.html">Kami tidak takut pada "awan"</a></li>
<li><a href="../id420633/index.html">Menulis eksportir GeoIP untuk Prometheus dengan visualisasi di Grafana dalam 15 menit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>