<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тПм ЁЯСиЁЯП┐тАНЁЯдЭтАНЁЯСиЁЯП╜ ЁЯУ┐ DIY рд╡рд╛рдпрд░рд▓реЗрд╕ рд░рд╛рдЙрдЯрд░ ЁЯд╡ЁЯП╛ ЁЯзЧЁЯП╜ ЁЯдУ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. рдШрдЯрдХ рдЪрдпрди 
2. рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рд▓реЙрдиреНрдЪ рдХрд░реЗрдВ 
3. 802.11ac рдПрдХреНрд╕реЗрд╕ рдкреНрд╡рд╛рдЗрдВрдЯ (5 GHz) рд╕реЗрдЯ рдХрд░рдирд╛ 
4. Hostapd рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ SSID рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ 
 рдкрд┐рдЫрд▓...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DIY рд╡рд╛рдпрд░рд▓реЗрд╕ рд░рд╛рдЙрдЯрд░</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437634/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/967/b65/9d2/967b659d291d3021a9a93f68b4b305b2.jpg"></div><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдШрдЯрдХ рдЪрдпрди</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рд▓реЙрдиреНрдЪ рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">802.11ac рдПрдХреНрд╕реЗрд╕ рдкреНрд╡рд╛рдЗрдВрдЯ (5 GHz) рд╕реЗрдЯ рдХрд░рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Hostapd рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ SSID рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</a> </li></ol><br>  рдкрд┐рдЫрд▓реЗ рджрд╕ рд╡рд░реНрд╖реЛрдВ рд╕реЗ, рдореИрдВрдиреЗ рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рд╕реЗ рд╣рдЯрд╛рдП рдЧрдП $ 500 рд╕реЗ рдЕрдзрд┐рдХ рдХреЗ рд▓рд┐рдП "рдлрд╝рдВрдХреНрд╢рдВрд╕" рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрд╕ рдкрд░ рд╕рд╕реНрддреЗ рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрдХрд░рдг рдЦрд░реАрджреЗ рд╣реИрдВ рдФрд░ рдЙрд╕ рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреАрдбреА-рдбрдмреНрд▓реНрдпреВрдЖрд░рдЯреА</a> рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рдЬрд┐рд╕ рдкрд░ рд╕реНрдЯреЙрдХ рдлрд╝рд░реНрдорд╡реЗрдпрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред <br><br>  рдЕрд╕реНрдерд┐рд░ рдмрд┐рд▓реНрдб, рдмрд┐рдирд╛ рддреНрд░реБрдЯрд┐ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://web.archive.org/web/20160303173311/">рд╡рд┐рд╡рд╛рджреЛрдВ рдХреЗ</a> рдмрд╛рд╡рдЬреВрдж, рдбреАрдбреА-рдбрдмреНрд▓реНрдпреВрдЖрд░рдЯреА рдЕрднреА рднреА рд╕реНрдЯреЙрдХ рдлрд░реНрдорд╡реЗрдпрд░ рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдм рдпреЛрдЧреНрдп рдШрдЯрдХ рдкрд╣рд▓реЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд╕рд╕реНрддрд╛ рд╣реИрдВ, рдФрд░ DIY рд╕рдореБрджрд╛рдп рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд▓рд┐рдирдХреНрд╕ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░ рд░рд╣рд╛ рд╣реИ (рдореИрдВ рдЖрдкрдХреЛ, рд╢реНрд░реА рд░рд╛рд╕реНрдкрдмреЗрд░реА рдХреЛ рджреЗрдЦ рд░рд╣рд╛ рд╣реВрдВ), рдЗрд╕рд▓рд┐рдП рдПрдХ рдмрд╛рд░ рдФрд░ рд╕рднреА рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╡рд╛рдпрд░рд▓реЗрд╕ рд░рд╛рдЙрдЯрд░ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЬрд╛рдП? <br><a name="habracut"></a><br><a name="1"></a><h1>  рдШрдЯрдХ рдЪрдпрди </h1><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдкрд░ рдирд┐рд░реНрдгрдп рд▓реЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">x86</a> рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдЖрд░рдПрдо</a> ?  рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рдореБрдЦ рдЕрдВрддрд░реЛрдВ рдкрд░ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЪрд░реНрдЪрд╛</a> рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рд▓реЗрдХрд┐рди рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ: рдкреВрд░реНрд╡ рдореЗрдВ рдмреЗрд╣рддрд░ рдкреНрд░рджрд░реНрд╢рди рд╣реИ, рдЬрдмрдХрд┐ рдмрд╛рдж рд╡рд╛рд▓рд╛ рд╕рд╕реНрддрд╛ рдФрд░ рдЕрдзрд┐рдХ рдКрд░реНрдЬрд╛ рдХреБрд╢рд▓ рд╣реИред  рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ рдмреЛрд░реНрдб (рдФрд░ рд╕рдорддреБрд▓реНрдп) рд╕рдмрд╕реЗ рд╡рд╛рдпрд░рд▓реЗрд╕ рд╡рд╛рдгрд┐рдЬреНрдпрд┐рдХ рд░рд╛рдЙрдЯрд░ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмреЗрд╣рдж рд╕рд╕реНрддреЗ рдФрд░ рд╢рд╛рдпрдж рдЕрдзрд┐рдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╣реИрдВ, рд▓реЗрдХрд┐рди x86 рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рд╡реНрдпрд╛рдкрдХ рд╣реИрдВ рдФрд░ рдорд╛рдирдХреАрдХреГрдд рдлреЙрд░реНрдо рдХрд╛рд░рдХреЛрдВ рдФрд░ рд╡рд┐рд╕реНрддрд╛рд░ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХрд╛ рд▓рд╛рдн рд╣реИред <br><br>  рдмреЗрд╢рдХ, рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╡рд░рдг рдЪрд┐рдкрд╕реЗрдЯ рд╣реИред  рдЖрдЬ, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рддрдереНрдп рдорд╛рдирдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">802.11n</a> (2.4 рдЧреАрдЧрд╛рд╣рд░реНрдЯреНрдЬ) рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">802.11ac</a> (5 рдЧреАрдЧрд╛рд╣рд░реНрдЯреНрдЬ) рд╣реИрдВ, рд▓реЗрдХрд┐рди рд▓рд┐рдирдХреНрд╕ рдХреЗ рд▓рд┐рдП рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рдХреЛ рдЪреБрдирдирд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрднреА рднреА рдПрдХ рдЪреБрдиреМрддреА рд╣реИ</a> , рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдПрдкреА (рдПрдХреНрд╕реЗрд╕ рдкреНрд╡рд╛рдЗрдВрдЯ) рдореЛрдб рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдердиред  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдпрджрд┐ рдЖрдк рд╕рдорд╕реНрдпрд╛рдПрдВ рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдереЗрд░реЛрд╕</a> рдЪрд┐рдкрд╕реЗрдЯ рдЪреБрдиреЗрдВред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Ath9k</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Ath10k рдбреНрд░рд╛рдЗрд╡рд░</a> рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕рдорд░реНрдерд┐рдд рд╣реИрдВ, рдЖрдк рдЙрдиреНрд╣реЗрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рдпреВрдПрд╕рдмреА рдФрд░ / рдпрд╛ рдорд┐рдиреА-рдкреАрд╕реАрдЖрдИ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд╕рд╛рде рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдХрдо рд╕реЗ рдХрдо рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдирд┐рдпрдВрддреНрд░рдХ (рдПрдирдЖрдИрд╕реА) рдПрдХ рдЖрд╡рд╢реНрдпрдХ рдиреНрдпреВрдирддрдо рд╣реИ, рдФрд░ рдЕрдкрдиреЗ рд╕реНрд╡рд╛рдж рдХреЗ рд▓рд┐рдП рд░реИрдо рдФрд░ рднрдВрдбрд╛рд░рдг рдЪреБрдиреЗрдВред <br><br><h2>  рд╕рд╛рдордЧреНрд░реА рд╕реВрдЪреА </h2><br>  рдХреАрдордд рдФрд░ рдмрд┐рдЬрд▓реА рдХреА рдЦрдкрдд рдХрд╛ рддреНрдпрд╛рдЧ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВрдиреЗ рдЕрдкрдЧреНрд░реЗрдб рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рдореЙрдбреНрдпреВрд▓рд░, рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП x86 рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреЛ рдЪреБрдирд╛ред <br><br>  <i>рдпрджрд┐ рдЖрдкрдХреЛ рдПрдЖрд░рдПрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдПрдХ рдкреНрд░рд╢рдВрд╕рдХ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИред</i> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener">рдЧреАрдЧрд╛рдмрд╛рдЗрдЯ GA-J1900N-D3V</a> (J1900 рдХреНрд╡рд╛рдб-рдХреЛрд░ 2 рдЧреАрдЧрд╛рд╣рд░реНрдЯреНрдЬ рд╕реЗрд▓реЗрд░реЙрди, рджреЛ рдПрдирдЖрдИрд╕реА) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener">Airetos AEX-QCA9880-NX</a> (рдбреБрдЕрд▓ рдмреИрдВрдб 802.11ac, MIMO) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener">4 рдЬреАрдмреА рд░реИрдо</a> (DDR3-LP, 1333 MHz, 1.35 V) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener">рдПрдХреНрд╕рдЯреЗрдВрд╢рди mPCIe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener">MX500 рдорд┐рдиреА-рдЖрдИрдЯреАрдПрдХреНрд╕ рдЪреЗрд╕рд┐рд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener">рддреАрди 6 рдбреАрдмреА рдЖрд░рдкреА-рдПрд╕рдПрдордП рдбреНрдпреВрд▓ рдмреИрдВрдб рдПрдВрдЯреЗрдирд╛ + рдЖрд░рдкреА-рдПрд╕рдПрдордП</a> рдХреЗрдмрд▓ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow noopener">PicoPSU -90</a> </li><li>  рд╕реНрдкреЗрдпрд░ рдПрдЪрдбреАрдбреА 2.5 тАЭ </li></ul><br>  рдЖрд╡рд╛рд╕ рд╡рд┐рд╢рд╛рд▓ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдПрд╕реА / рдбреАрд╕реА рдкреНрд▓рдЧ рдХреЗ рд▓рд┐рдП рджреЛ рддреИрдпрд╛рд░ рдЫреЗрдж рд╣реИрдВред  рдорджрд░рдмреЛрд░реНрдб, рд░реИрдо рдФрд░ рдкрд┐рдХреЛ-рдкреАрдПрд╕рдпреВ рдХреЛ рд╕реБрдЪрд╛рд░реВ рд░реВрдк рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ad/455/84b/7ad45584b277d11fa3f1a7b119759ebc.jpg"><br>  <i><font color="gray">рд▓реЛрд╣реЗ рдХреА рдкреЛрд░реНрди</font></i> <br><br>  рдорд┐рдиреА-рдкреАрд╕реАрдЖрдИ рд╡рд╛рдИрдлрд╛рдИ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╕рдмрд╕реЗ рдореБрд╢реНрдХрд┐рд▓ рдирд┐рдХрд▓рд╛, рдХреНрдпреЛрдВрдХрд┐ рдмреЛрд░реНрдб рдХреЗрд╡рд▓ рдЖрдзреЗ рдЖрдХрд╛рд░ рдХреЗ рдХрд╛рд░реНрдб рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ: рдпрд╣рд╛рдВ рдПрдордкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗрдмрд▓ рдмрдЪрд╛рд╡ рдХреЗ рд▓рд┐рдП рдЖрдпрд╛ рдерд╛ред  рдореИрдВрдиреЗ рдПрдбреЗрдкреНрдЯрд░ рдХреЗ рджреЛрдиреЛрдВ рдХрд┐рдирд╛рд░реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ 20 рд╕реЗрдореА рдПрдлрдПрдлрд╕реА рдХреЗрдмрд▓ (рд╢рд╛рдорд┐рд▓) рд▓рд┐рдпрд╛ рдФрд░ рдорд┐рдиреА-рдкреАрд╕реАрдЖрдИ рдХреЛ рдЪреЗрд╕рд┐рд╕ рдкрд░ рдбрдмрд▓-рд╕рд╛рдЗрдб рдЯреЗрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рддрдп рдХрд┐рдпрд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/db1/c7a/8f7/db1c7a8f756c70176d86ce9441d5cf7a.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/5bb/b09/5c7/5bbb095c759ac5cd9be3cf316070ab22.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3a4/e91/9b8/3a4e919b817344fdc03d98bb1e9d001f.jpg"><br>  <i><font color="gray">рдорд┐рдиреА-рдкреАрд╕реАрдЖрдИ рд╡рд┐рд╕реНрддрд╛рд░рдХ</font></i> <br><br>  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЪреЗрд╕рд┐рд╕ рддреАрди рдкреНрд░реА-рдХрдЯ рдПрдВрдЯреАрдирд╛ рдЫреЗрдж рдХреЗ рд╕рд╛рде рдЖрддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/967/b65/9d2/967b659d291d3021a9a93f68b4b305b2.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c3d/82d/a98/c3d82da9842de641d8d3a4dec3cfe517.jpg"><br><br><a name="2"></a><h1>  рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ </h1><br>  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рд╣рдо рд▓рд┐рдирдХреНрд╕ рдбрд╛рд▓рддреЗ рд╣реИрдВред  рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░рд╛рд╕реНрдкрд┐рдпрди</a> (рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ рдХреЗ рд▓рд┐рдП) рдпрд╛ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдкрд╕рдВрдж рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рд▓рд┐рдирдХреНрд╕ рд╡рд┐рддрд░рдг рдХреА рддрд░рд╣ рдПрдХ рдЕрдиреБрдХреВрд▓рд┐рдд рд╡рд┐рддрд░рдг рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЪреВрдВрдХрд┐ рдореИрдВ рдХрдИ рд╡рд░реНрд╖реЛрдВ рд╕реЗ рдЙрдмрдВрдЯреВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ, рдореИрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрдмрдВрдЯреВ рд╕рд░реНрд╡рд░ 18.04 рдПрд▓рдЯреАрдПрд╕ рдХреЛ</a> рдЪреБрдирд╛, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореИрдВ рдЕрдзрд┐рдХ рдЖрджреА рд╣реВрдВ рдФрд░ рдЬрд┐рд╕рдХреЗ рдкрд╛рд╕ рджреАрд░реНрдШрдХрд╛рд▓рд┐рдХ рд╕рдорд░реНрдерди рд╣реИред <br><br>  <i>рдЗрд╕ рд▓реЗрдЦ рдХреЗ рдмрд╛рдХреА рдиреЗ рдорд╛рдирд╛ рдХрд┐ рдЖрдк рдбреЗрдмрд┐рдпрди-рдЖрдзрд╛рд░рд┐рдд рд╡рд┐рддрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВред</i> <br><br>  рдпрджрд┐ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдареАрдХ рдЪрд▓рд╛ рдФрд░ рдЖрдк рдХрдВрд╕реЛрд▓ рдкрд░ рдЧрдП, рддреЛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдирд╛рдореЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВ: <br><br><pre><code class="bash hljs">$ ip -br a | awk <span class="hljs-string"><span class="hljs-string">'{print $1}'</span></span> lo enp1s0 enp2s0 wlp5s0</code> </pre> <br>  рдорджрд░рдмреЛрд░реНрдб рдкрд░ рджреЛ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдПрдирдЖрдИрд╕реА рд╣реИрдВ: рдпреЗ рд╣реИрдВ <code>enp1s0</code> рдФрд░ <code>enp2s0</code> ред  рд╡рд╛рдпрд░рд▓реЗрд╕ рдХрд╛рд░реНрдб <code>wlp5s0</code> рд░реВрдк рдореЗрдВ рдкреНрд░рдХрдЯ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдПрдкреА рдореЛрдб рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдЗрд░рд╛рджрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">$ iw list ... Supported interface modes: * managed * AP * AP/VLAN * monitor * mesh point</code> </pre> <br>  рдЕрдм рд╣рдо рдпрд╣ рд░реЗрдЦрд╛рдВрдХрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдореЗрдВ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП: рд╣рдордиреЗ рдкрд╣рд▓рд╛ NIC рдПрдХ WAN рдкреЛрд░реНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдбрд╛рд▓рд╛, рдФрд░ рджреВрд╕рд░рд╛ рд╣рдо рд╡рд╛рдпрд░рд▓реЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e6/f00/dd4/5e6f00dd4994b5dc252d70dda1d325ec.png"><br><br><h2>  рдиреЗрдЯрд╡рд░реНрдХ </h2><br>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЙрдмрдВрдЯреВ 18.04 рд╣реИ, рддреЛ / etc / рдиреЗрдЯрд╡рд░реНрдХ / рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдкрд░ рд▓реМрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рддреБрд░рдВрдд <code>netplan</code> рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ <code>netplan</code> : <br><br><pre> <code class="bash hljs">$ sudo apt-get install ifupdown bridge-utils $ sudo systemctl stop networkd-dispatcher $ sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> networkd-dispatcher $ sudo systemctl mask networkd-dispatcher $ sudo apt-get purge nplan netplan.io</code> </pre> <br>  DHCP / DNS рд╕рд░реНрд╡рд░ рдХреЗ рд░реВрдк рдореЗрдВ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">dnsmasq рдХрд╛</a> рдЪрдпрди рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">$ sudo apt-get install dnsmasq</code> </pre> <br>  рдЪреВрдВрдХрд┐ рд╣рдо <code>post-up</code> рд╣реБрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ <code>dnsmasq</code> рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВрдЧреЗ, рдмреВрдЯ рд╕рдордп рдкрд░ рдбреЗрдореЙрди рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдирд╛ рдпрд╛рдж рд░рдЦреЗрдВ: <br><br><pre> <code class="bash hljs">$ sudo sed -i <span class="hljs-string"><span class="hljs-string">"s/^ENABLED=1$/ENABLED=0/g"</span></span> /etc/default/dnsmasq</code> </pre> <br>  рд╣рдо рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ <b>рдкреНрд░рд╛рд░рдВрднрд┐рдХ</b> рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рдЖрд░реЗрдЦ рдХреЗ рдЕрдиреБрд╕рд╛рд░ <code>dnsmasq</code> , рдЬрд┐рд╕рдореЗрдВ <code>dnsmasq</code> рдХрд╛ рдиреНрдпреВрдирддрдо рд╡рд┐рдиреНрдпрд╛рд╕ рднреА <code>dnsmasq</code> : <br><br><pre> <code class="bash hljs">$ cat /etc/network/interfaces <span class="hljs-comment"><span class="hljs-comment"># Loopback auto lo iface lo inet loopback # WAN interface auto enp1s0 iface enp1s0 inet dhcp # Bridge (LAN) auto br0 iface br0 inet static address 192.168.1.1 network 192.168.1.0 netmask 255.255.255.0 broadcast 192.168.1.255 bridge_ports enp2s0 post-up /usr/sbin/dnsmasq \ --pid-file=/var/run/dnsmasq.$IFACE.pid \ --dhcp-leasefile=/var/lib/misc/dnsmasq.$IFACE.leases \ --conf-file=/dev/null \ --interface=$IFACE --except-interface=lo \ --bind-interfaces \ --dhcp-range=192.168.1.10,192.168.1.150,24h pre-down cat /var/run/dnsmasq.$IFACE.pid | xargs kill</span></span></code> </pre> <br>  <i>рдкреНрд░рд▓реЗрдЦрди <code>/etc/network/interfaces</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a></i> <br><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк <code>post-up</code> рдЕрдиреБрднрд╛рдЧ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдкреБрд▓ рдХреЗ рдЙрдарддреЗ рд╣реА dnsmasq рд╢реБрд░реВ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗрд╡рд▓ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рддрд░реНрдХреЛрдВ ( <code>--conf-file=/dev/null</code> ) рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдВрдж рд╣реЛрдиреЗ рдкрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдВрдж рд╣реЛ рдЬрд╛рдПрдЧреАред <br><br>  <code>bridge_ports</code> рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ <code>wlp5s0</code> рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ <code>hostapd</code> рдЗрд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреБрд▓ рдореЗрдВ рдЬреЛрдбрд╝ рджреЗрдЧрд╛ (рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдореЛрдб рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП hostapd рдкреНрд░рд╛рд░рдВрдн рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ brctl рдЗрд╕реЗ рдХрд░рдиреЗ рд╕реЗ рдордирд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ)ред <br><br>  <i><code>dnsmasq</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рджреЗрдЦреЗрдВред</i> <br><br>  рдЕрдм рдЖрдк рдиреЗрдЯрд╡рд░реНрдХ ( <code>sudo service networking restart</code> ) рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдХреЗрд╡рд▓ рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░рд┐рдмреВрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдиреЗрдЯрд╡рд░реНрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕рд╣реА рд╣реИред <br><br>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ: рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╣рдо рд╡рд░реНрддрдорд╛рди рдореЗрдВ <code>enp2s0</code> рд╕реЗ рдбреАрдПрдЪрд╕реАрдкреА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ <b>рди рддреЛ рд╡рд╛рдпрд░рд▓реЗрд╕ рдХрдиреЗрдХреНрд╢рди рд╣реЛрдЧрд╛</b> (рдЗрд╕ рдкрд░ рдмрд╛рдж рдореЗрдВ), <b>рдФрд░ рди рд╣реА рдЗрдВрдЯрд░рдиреЗрдЯ рдПрдХреНрд╕реЗрд╕</b> (рдиреАрдЪреЗ рджреЗрдЦреЗрдВ)ред <br><br><h2>  рдорд╛рд░реНрдЧ </h2><br>  рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░, рдЖрдкрдХреЛ LAN ( <code>enp2s0</code> ) рдФрд░ WAN ( <code>enp1s0</code> ) <code>enp1s0</code> рдмреАрдЪ рдкреИрдХреЗрдЯ рдХреЛ рд░реВрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреЗрдЯрд╡рд░реНрдХ рдПрдбреНрд░реЗрд╕ рдЯреНрд░рд╛рдВрд╕рд▓реЗрд╢рди рдХреЛ</a> рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  рдкреИрдХреЗрдЯ рдЕрдЧреНрд░реЗрд╖рдг рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ: <br><br><pre> <code class="bash hljs">$ sudo sysctl -w net.ipv4.ip_forward=1 $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"net.ipv4.ip_forward=1"</span></span> | sudo tee -a /etc/sysctl.conf</code> </pre> <br>  <i>рдЕрдВрддрд┐рдо рдХрдорд╛рдВрдб рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЕрдЧрд▓реЗ рд░рд┐рдмреВрдЯ рддрдХ рд╕рд╣реЗрдЬрд╛ рдЧрдпрд╛ рд╣реИред</i> <br><br>  рдиреЗрдЯрд╡рд░реНрдХ рдПрдбреНрд░реЗрд╕ рдЯреНрд░рд╛рдВрд╕рд▓реЗрд╢рди рдПрдХ рдФрд░ рдмрд╛рдд рд╣реИ, рдЖрдорддреМрд░ рдкрд░ рдЖрдкрдХреЛ <code>iptables</code> рд╕реЗ рдирд┐рдкрдЯрдирд╛ рд╣реЛрддрд╛ рд╣реИ (рдпрд╛ рд▓рдбрд╝рдирд╛)ред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдкрд╛рд╖рд╛рдг рдпреБрдЧ рд▓рдВрдмреЗ рд╕рдордп рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рдФрд░ рдлрд╛рдпрд░рд╣реЛрд▓ рдХреЗ рд▓реЛрдЧреЛрдВ рдиреЗ рдЕрдореВрд░реНрддрддрд╛ рдХреЗ рдЖрд╡рд╢реНрдпрдХ рд╕реНрддрд░ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдореЗрдВ рдмрд╣реБрдд рдкреНрд░рдпрд╛рд╕ рдХрд┐рдпрд╛: <br><br><pre> <code class="bash hljs">$ sudo apt-get install firehol</code> </pre> <br>  рдлрд╛рдпрд░рд╣реЛрд▓ рдПрдХ рдЕрддреНрдпрд╛рдзреБрдирд┐рдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рднрд╛рд╖рд╛ рд╣реИ, рдЗрд╕рдХрд╛ рд╡рд┐рдиреНрдпрд╛рд╕ рд╕рдордЭрдиреЗ рдореЗрдВ рдЖрд╕рд╛рди рдФрд░ рд╕реБрд▓рдн рд╣реИред  рдЖрдкрдХреЛ рдЕрдм <code>iptables</code> рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ: рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╣реА <code>iptables</code> рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдореЗрдВ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкреГрд╖реНрдарднреВрдорд┐ рдореЗрдВ рдХреЛрдИ рдбреЗрдореЙрди рдирд╣реАрдВред <br><br>  рдиреНрдпреВрдирддрдо рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдирд┐рдпрдореЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд╕рд╛рде рд▓реИрди рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдкрддреЗ рдХрд╛ рдЕрдиреБрд╡рд╛рдж рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">$ cat /etc/firehol/firehol.conf version 6 <span class="hljs-comment"><span class="hljs-comment"># Accept all client traffic on WAN interface enp1s0 wan client all accept # Accept all traffic on LAN interface br0 lan server all accept client all accept # Route packets between LAN and WAN router lan2wan inface br0 outface enp1s0 masquerade route all accept</span></span></code> </pre> <br>  <i>рдлрд╛рдпрд░рд╣реЛрд▓ рд▓реЛрдЧреЛрдВ рджреНрд╡рд╛рд░рд╛ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдкреНрд░рд▓реЗрдЦрди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ рд╣реИ</a> ред</i> <br><br>  рдЖрдк рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ <code>firehol</code> ( <code>sudo firehol start</code> ) <code>sudo firehol start</code> рдХрд░рдХреЗ рдФрд░ LAN рдкреЛрд░реНрдЯ рд╕реЗ рд▓реИрдкрдЯреЙрдк рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдХреЗ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреА рдЬрд╛рдВрдЪ <b>рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</b> : <b>рдЕрдм рдЖрдк</b> WAN рдкреЛрд░реНрдЯ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдкрд░ <b>рдСрдирд▓рд╛рдЗрди рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ</b> ред <br><br>  рд░рд┐рдмреВрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдлрд╛рдпрд░рд╣реЙрд▓ рдХреЛ рдмреВрдЯ рдкрд░ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП <code>/etc/default/firehol</code> рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд <b>рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд</b> рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">$ sudo sed -i -E <span class="hljs-string"><span class="hljs-string">"s/^START_FIREHOL=.+$/START_FIREHOL=YES/g"</span></span> /etc/default/firehol</code> </pre> <br>  <i>рдореИрдВ рдкреВрд░реЗ <code>firehol</code> рд╕рд┐рдВрдЯреИрдХреНрд╕ рдХреЗ рд╡рд┐рд╡рд░рдг рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдКрдВрдЧрд╛, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд╕реНрд╡рдпрдВ рдмрддрд╛рддреА рд╣реИ, рдореИрдВ рдПрдХ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди рдХрд╛</a> <code>firehol</code> рджреЗрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВред</i>  <i>рдпрджрд┐ рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ рдХрд┐ <code>firehol</code> рдиреЗ <code>iptables</code> рд╕рд╛рде рдХреНрдпрд╛ рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдкрд░ <code>sudo firehol status</code> рд▓рд┐рдЦреЗрдВред</i> <br><br><h2>  рд╡рд╛рдпрд░рд▓реЗрд╕ рд╣реЙрдЯрд╕реНрдкреЙрдЯ </h2><br>  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">hostapd</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрд╣реБрдВрдЪ рдмрд┐рдВрджреБ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░реЗрдВрдЧреЗ: <br><br><pre> <code class="bash hljs">$ sudo apt-get install hostapd</code> </pre> <br>  рдиреАрдЪреЗ рдЖрдкрдХреЛ рдПрдХ рдиреНрдпреВрдирддрдо рдФрд░ рд▓рдЧрднрдЧ рдЕрд╕реНрдкрд╖реНрдЯреАрдХреГрдд 802.11 n / 2.4 Ghz / WPA2-AES рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдорд┐рд▓реЗрдЧреА: <br><br><pre> <code class="bash hljs">$ cat /etc/hostapd/hostapd-simple.conf <span class="hljs-comment"><span class="hljs-comment">#### Interface configuration #### interface=wlp5s0 bridge=br0 driver=nl80211 ##### IEEE 802.11 related configuration ##### ssid=iCanHearYouHavingSex hw_mode=g channel=1 auth_algs=1 wmm_enabled=1 ##### IEEE 802.11n related configuration ##### ieee80211n=1 ##### WPA/IEEE 802.11i configuration ##### wpa=2 wpa_key_mgmt=WPA-PSK rsn_pairwise=CCMP wpa_passphrase=YouCantGuess</span></span></code> </pre> <br>  <i><code>hostpad.conf</code> рдкреНрд░рд▓реЗрдЦрди рдХреЗ <code>hostpad.conf</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреЗрдЦреЗрдВ</a></i> ред <br><br>  рд╡рд░реНрдгрд┐рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">$ sudo hostapd /etc/hostapd/hostapd-simple.conf</code> </pre> <br>  рдпрджрд┐ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдПрдХ <b>рд╡рд╛рдпрд░рд▓реЗрд╕ рдХрдиреЗрдХреНрд╢рди рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛</b> ред  рдпрджрд┐ рдЖрдк рдкрд░рд┐рдгрд╛рдо рд╕реЗ рд╕рдВрддреБрд╖реНрдЯ рд╣реИрдВ, <b>рддреЛ</b> рдЗрдВрдЯрд░рдлрд╝реЗрд╕ <code>hostapd</code> рд╣реА <code>hostapd</code> рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдмрджрд▓рдирд╛ <b>рди рднреВрд▓реЗрдВ</b> (рдЬреИрд╕рд╛ рдХрд┐ рдиреАрдЪреЗ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред <br><br>  <b>рдпрд╣рд╛рдБ рдЖрдкрдХрд╛ рдЕрдВрддрд┐рдо <code>/etc/network/interfaces:</code></b> <br><br><pre> <code class="bash hljs">$ cat /etc/network/interfaces <span class="hljs-comment"><span class="hljs-comment"># Loopback auto lo iface lo inet loopback # WAN interface auto enp1s0 iface enp1s0 inet dhcp # Bridge (LAN) auto br0 iface br0 inet static address 192.168.1.1 network 192.168.1.0 netmask 255.255.255.0 broadcast 192.168.1.255 bridge_ports enp2s0 post-up /usr/sbin/hostapd \ -P /var/run/hostapd.$IFACE.pid \ -B /etc/hostapd/hostapd-simple.conf post-up /usr/sbin/dnsmasq \ --pid-file=/var/run/dnsmasq.$IFACE.pid \ --dhcp-leasefile=/var/lib/misc/dnsmasq.$IFACE.leases \ --conf-file=/dev/null \ --interface=$IFACE --except-interface=lo \ --bind-interfaces \ --dhcp-range=192.168.1.10,192.168.1.150,24h pre-down cat /var/run/dnsmasq.$IFACE.pid | xargs kill pre-down cat /var/run/hostapd.$IFACE.pid | xargs kill</span></span></code> </pre> <br><a name="3"></a><h1>  802.11ac рдПрдХреНрд╕реЗрд╕ рдкреНрд╡рд╛рдЗрдВрдЯ (5 GHz) рд╕реЗрдЯ рдХрд░рдирд╛ </h1><br><h2>  рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╕реНрдХреИрди </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Airetos AEX-QCA9880-NX</a> рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЪрд┐рдкрд╕реЗрдЯ 802.11ac рд╕рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╣рдо рднреАрдбрд╝ рд╡рд╛рд▓реЗ 2.4 GHz рдЪреИрдирд▓ рдХреЛ рд╕реНрд╡рд░реНрдЧ 5 GHz рдореЗрдВ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдЖрд╡реГрддреНрддрд┐рдпреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">$ iw list ... Frequencies: * 2412 MHz [1] (20.0 dBm) * 2417 MHz [2] (20.0 dBm) * 2422 MHz [3] (20.0 dBm) * 2427 MHz [4] (20.0 dBm) * 2432 MHz [5] (20.0 dBm) * 2437 MHz [6] (20.0 dBm) * 2442 MHz [7] (20.0 dBm) * 2447 MHz [8] (20.0 dBm) * 2452 MHz [9] (20.0 dBm) * 2457 MHz [10] (20.0 dBm) * 2462 MHz [11] (20.0 dBm) * 2467 MHz [12] (disabled) * 2472 MHz [13] (disabled) * 2484 MHz [14] (disabled) ... Frequencies: * 5180 MHz [36] (17.0 dBm) (no IR) * 5200 MHz [40] (17.0 dBm) (no IR) * 5220 MHz [44] (17.0 dBm) (no IR) * 5240 MHz [48] (17.0 dBm) (no IR) * 5260 MHz [52] (23.0 dBm) (no IR, radar detection) * 5280 MHz [56] (23.0 dBm) (no IR, radar detection) * 5300 MHz [60] (23.0 dBm) (no IR, radar detection) * 5320 MHz [64] (23.0 dBm) (no IR, radar detection) * 5500 MHz [100] (23.0 dBm) (no IR, radar detection) * 5520 MHz [104] (23.0 dBm) (no IR, radar detection) * 5540 MHz [108] (23.0 dBm) (no IR, radar detection) * 5560 MHz [112] (23.0 dBm) (no IR, radar detection) * 5580 MHz [116] (23.0 dBm) (no IR, radar detection) * 5600 MHz [120] (23.0 dBm) (no IR, radar detection) * 5620 MHz [124] (23.0 dBm) (no IR, radar detection) * 5640 MHz [128] (23.0 dBm) (no IR, radar detection) * 5660 MHz [132] (23.0 dBm) (no IR, radar detection) * 5680 MHz [136] (23.0 dBm) (no IR, radar detection) * 5700 MHz [140] (23.0 dBm) (no IR, radar detection) * 5720 MHz [144] (23.0 dBm) (no IR, radar detection) * 5745 MHz [149] (30.0 dBm) (no IR) * 5765 MHz [153] (30.0 dBm) (no IR) * 5785 MHz [157] (30.0 dBm) (no IR) * 5805 MHz [161] (30.0 dBm) (no IR) * 5825 MHz [165] (30.0 dBm) (no IR) ...</code> </pre> <br>  рдКрдкрд░ рджреА рдЧрдИ рд╕реВрдЪреА рдореЗрдВ, рд╣рдо рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдЪрд┐рдкрд╕реЗрдЯ 1-14 (2.4 GHz) рдЪреИрдирд▓реЛрдВ рдФрд░ 36-165 (5 GHz) рдЪреИрдирд▓реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдЖрдкрдиреЗ <code>no IR</code> рдзреНрд╡рдЬ <code>no IR</code> рджреЗрдЦрд╛ рд╣реИ? <br><br>  <code>no IR</code> рдзреНрд╡рдЬ <i>рдиреЛ-рдЖрд░рдВрдн-рд╡рд┐рдХрд┐рд░рдг</i> (рдпрд╛рдиреА <i>рдирд┐рд╖реНрдХреНрд░рд┐рдп рд╕реНрдХреИрдирд┐рдВрдЧ</i> ) рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрд╣ рдореЛрдб рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдирд┐рд╖рд┐рджреНрдз рд╣реИ рдЬрдм рдбрд┐рд╡рд╛рдЗрд╕ рд╡рд┐рдХрд┐рд░рдг ( <b>рдмреАрдХрди</b> рд╕рд╣рд┐рдд) рд╢реБрд░реВ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдкрд╣рд▓рд╛ рд╣реИред  рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, <b>рдЖрдк рдЗрди рдЪреИрдирд▓реЛрдВ рдкрд░ рдкрд╣реБрдБрдЪ рдмрд┐рдВрджреБ рдирд╣реАрдВ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ</b> ! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03f/743/e75/03f743e7505714ae9864dcce2b5b4964.gif"></div><br><br><h2>  рдирд┐рдпрд╛рдордХ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ </h2><br>  рдЙрдкрд░реЛрдХреНрдд рд╕реНрдерд┐рддрд┐ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдирдХреНрд╕</a> рдХреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирд┐рдпрд╛рдордХ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ</a> рджреНрд╡рд╛рд░рд╛ рд╕рдордЭрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреЗрд╢ рдХреЗ рдЖрдзрд╛рд░ рдкрд░</a> рд░реЗрдбрд┐рдпреЛ рдЖрд╡реГрддреНрддрд┐ рд╕реНрдкреЗрдХреНрдЯреНрд░рдо рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░рддрд╛ рд╣реИ</a> ред <br><br>  рд▓реЗрдХрд┐рди рд╣реЗ! <br><br>  рдореИрдВ рдпреВрдПрд╕рдП рдореЗрдВ рд░рд╣рддрд╛ рд╣реВрдВ, рдФрд░ рд▓рд┐рдВрдХ рдХрд╣рддрд╛ рд╣реИ рдХрд┐ рдореБрдЭреЗ 36-48 рдЪреИрдирд▓реЛрдВ рдкрд░ рд╡рд┐рдХрд┐рд░рдг рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рд╣реИ, рддреЛ рдХреНрдпрд╛ рдмрд╛рдд рд╣реИ?  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХреМрди рд╕рд╛ рдирд┐рдпрд╛рдордХ рдбреЛрдореЗрди рдЙрдкрдпреЛрдЧ рдореЗрдВ рд╣реИ: <br><br><pre> <code class="plaintext hljs">$ iw reg get country 00: DFS-UNSET (2402 - 2472 @ 40), (N/A, 20), (N/A) (2457 - 2482 @ 40), (N/A, 20), (N/A), NO-IR (2474 - 2494 @ 20), (N/A, 20), (N/A), NO-OFDM, NO-IR (5170 - 5250 @ 80), (N/A, 20), (N/A), NO-IR (5250 - 5330 @ 80), (N/A, 20), (0 ms), DFS, NO-IR (5490 - 5730 @ 160), (N/A, 20), (0 ms), DFS, NO-IR (5735 - 5835 @ 80), (N/A, 20), (N/A), NO-IR (57240 - 63720 @ 2160), (N/A, 0), (N/A)</code> </pre> <br>  рдпрд╣ рдореБрджреНрджрд╛ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдореЗрдВ <i>рд╡рд┐рд╢реНрд╡</i> рдбреЛрдореЗрди рд╕рдХреНрд░рд┐рдп рд╣реИ (рдпрд╛ рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рд╣реИ), рдЕрд░реНрдерд╛рдд, <b>рдкреНрд░рддреНрдпреЗрдХ рджреЗрд╢ рдореЗрдВ рдиреНрдпреВрдирддрдо рдорд╛рди</b> ред <br><br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЖрдк рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ <code>sudo iw reg set</code> рдбреЛрдореЗрди рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ, рдХреНрдпреЛрдВрдХрд┐ рдбреЛрдореЗрди EEPROM рдореЗрдВ рд╕рдВрд░рдХреНрд╖рд┐рдд рд╣реИ: <br><br><pre> <code class="plaintext hljs">$ dmesg | grep EEPROM [ 12.123068] ath: EEPROM regdomain: 0x6c</code> </pre> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5de/5a9/ae2/5de5a9ae216cf2c3f2f9416b4ffa54bc.gif"></div><br><h2>  рдкреИрдЪ! </h2><br>  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдирд┐рдпрд╛рдордХ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдЪрд╛рд▓рдХ рд╕реНрддрд░ рдкрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдУрдкрди-рдбрдмреНрд▓реНрдпреВрдЖрд░рдЯреА рд╕реНрд░реЛрдд рдХреЛрдб</a> рдореЗрдВ рдкреИрдЪ рдкрд╛рддреЗ рд╣реИрдВред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <code>/etc/apt/sources.list</code> рд╕реЗ рд╕реНрд░реЛрдд рдХреЛрдб рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рдЬреЛрдбрд╝рдирд╛ рди рднреВрд▓реЗрдВ: <br><br><pre> <code class="bash hljs">$ cat /etc/apt/sources.list ... deb-src http://us.archive.ubuntu.com/ubuntu/ bionic main restricted ...</code> </pre> <br>  рдлрд┐рд░ рдЖрд╡рд╢реНрдпрдХ рдирд┐рд░реНрднрд░рддрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдХреЗ рдкрд░реНрдпрд╛рд╡рд░рдг рддреИрдпрд╛рд░ рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">$ sudo apt-get install build-essential fakeroot $ sudo apt-get build-dep linux</code> </pre> <br>  рдЕрдкрдиреЗ рдХрд░реНрдиреЗрд▓ рд╕реНрд░реЛрдд рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">$ apt-get <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> linux</code> </pre> <br>  рдЪреВрдВрдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореВрд▓</a> рдУрдкрди-рдбрдмреНрд▓реНрдпреВрдЖрд░рдЯреА рдкреИрдЪ рдХреЛ "рдЙрддрдиреЗ" рддрдХ рдирд╣реАрдВ рд▓рдЧрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЙрдмрдВрдЯреВ рдЧрд┐рд░реА рдХреЗ рдкреЗрдбрд╝ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рд╕реВрдХреНрд╖реНрдо рдЕрдВрддрд░ рдХреЗ рдХрд╛рд░рдг, рдореБрдЭреЗ рдЗрд╕реЗ рдареАрдХ рдХрд░рдирд╛ рдкрдбрд╝рд╛: <br><br><pre> <code class="bash hljs">$ VERSION=$(uname -r) $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> linux-<span class="hljs-variable"><span class="hljs-variable">${VERSION%%-*}</span></span> $ wget -O - https://gist.github.com/renaudcerrato/02de8b2e8dc013bc71326defd2ef062c/raw/a2db325e520e6442c8c12f7599d64ac1b7596a3e/402-ath_regd_optional.patch | patch -p1 -b</code> </pre> <br>  рд╕рдм рдХреБрдЫ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИ: <br><br><pre> <code class="bash hljs">$ fakeroot debian/rules clean $ fakeroot debian/rules binary-generic</code> </pre> <br>  рдпрджрд┐ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЕрдм рдЖрдк рдкрд┐рдЫрд▓реЗ рдХрд░реНрдиреЗрд▓ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдирд┐рд╢реНрдЪрд┐рдд рдХрд░реНрдиреЗрд▓ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. $ sudo dpkg -i linux*.deb</code> </pre> <br>  рд░рд┐рдмреВрдЯ, рдФрд░ рд╡реЛрдЗрд▓рд╛: <br><br><pre> <code class="bash hljs">$ sudo iw reg <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> US $ iw list ... Frequencies: * 5180 MHz [36] (17.0 dBm) * 5200 MHz [40] (17.0 dBm) * 5220 MHz [44] (17.0 dBm) * 5240 MHz [48] (17.0 dBm) * 5260 MHz [52] (23.0 dBm) (radar detection) * 5280 MHz [56] (23.0 dBm) (radar detection) * 5300 MHz [60] (23.0 dBm) (radar detection) * 5320 MHz [64] (23.0 dBm) (radar detection) * 5500 MHz [100] (23.0 dBm) (radar detection) * 5520 MHz [104] (23.0 dBm) (radar detection) * 5540 MHz [108] (23.0 dBm) (radar detection) * 5560 MHz [112] (23.0 dBm) (radar detection) * 5580 MHz [116] (23.0 dBm) (radar detection) * 5600 MHz [120] (23.0 dBm) (radar detection) * 5620 MHz [124] (23.0 dBm) (radar detection) * 5640 MHz [128] (23.0 dBm) (radar detection) * 5660 MHz [132] (23.0 dBm) (radar detection) * 5680 MHz [136] (23.0 dBm) (radar detection) * 5700 MHz [140] (23.0 dBm) (radar detection) * 5720 MHz [144] (23.0 dBm) (radar detection) * 5745 MHz [149] (30.0 dBm) * 5765 MHz [153] (30.0 dBm) * 5785 MHz [157] (30.0 dBm) * 5805 MHz [161] (30.0 dBm) * 5825 MHz [165] (30.0 dBm) ...</code> </pre> <br>  <i>рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдкрдбреЗрдЯ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рд╕рдВрд╕реНрдХрд░рдг</a> рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдареАрдХ рдХрд░рдиреЗ рдХреА</a> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИред</i> <br><br><h2>  рд╡рд┐рдиреНрдпрд╛рд╕ </h2><br>  рдирдИ <code>hostapd</code> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди <code>hostapd</code> рдХрд╛рдлреА рд╕рд░рд▓ рд╣реЛрдЧреА: <code>hw_mode=a</code> рдЬрд┐рд╕рдореЗрдВ 5 рдЧреАрдЧрд╛рд╣рд░реНрдЯреНрдЬрд╝ рдмреИрдВрдб рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдФрд░ <code>ieee80211ac=1</code> рдореЗрдВ 802.11ac (VHT) рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  <code>ieee80211d=1</code> <code>country_code=US</code> рд╕рд╛рде <code>ieee80211d=1</code> рд╡рд┐рдХрд▓реНрдк рдЙрд╕ рдирд┐рдпрд╛рдордХ рдбреЛрдореЗрди рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рддрд╣рдд рд╣рдо рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдмреИрдВрдбрд╡рд┐рдбреНрде рдХрд╛ рдЕрдзрд┐рдХрддрдо рд▓рд╛рдн <code>ht_capab</code> , <code>ht_capab</code> рдФрд░ <code>vht_capab</code> рдХреЛ рдЙрдкрдХрд░рдгреЛрдВ рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдкреНрд░рддрд┐рдмрд┐рдВрдмрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="bash hljs">$ iw list ... Band 1: Capabilities: 0x19e3 RX LDPC HT20/HT40 Static SM Power Save RX HT20 SGI RX HT40 SGI TX STBC RX STBC 1-stream Max AMSDU length: 7935 bytes DSSS/CCK HT40 ... Band 2: VHT Capabilities (0x338001b2): Max MPDU length: 11454 Supported Channel Width: neither 160 nor 80+80 RX LDPC short GI (80 MHz) TX STBC RX antenna pattern consistency TX antenna pattern consistency</code> </pre> <br>  рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, <b>рдпрд╣рд╛рдБ рдЕрдВрддрд┐рдо</b> <code>hostapd.conf</code> : <br><br><pre> <code class="bash hljs">$ cat /etc/hostapd/hostapd.conf <span class="hljs-comment"><span class="hljs-comment">#### Interface configuration #### interface=wlp5s0 bridge=br0 driver=nl80211 ##### IEEE 802.11 related configuration ##### ssid=iCanHearYouHavingSex hw_mode=a channel=0 auth_algs=1 wmm_enabled=1 country_code=US ieee80211d=1 ieee80211h=0 ##### IEEE 802.11n related configuration ##### ieee80211n=1 ht_capab=[HT40+][SHORT-GI-20][SHORT-GI-40][TX-STBC][RX-STBC1][DSSS_CK-40][LDPC][MAX-AMSDU-7935] ##### IEEE 802.11ac related configuration ##### ieee80211ac=1 vht_capab=[MAX-MPDU-11454][RXLDPC][SHORT-GI-80][TX-STBC-2BY1][RX-STBC-1][MAX-A-MPDU-LEN-EXP7][TX-ANTENNA-PATTERN][RX-ANTENNA-PATTERN] vht_oper_chwidth=1 ##### WPA/IEEE 802.11i configuration ##### wpa=2 wpa_key_mgmt=WPA-PSK rsn_pairwise=CCMP wpa_passphrase=YouCantGuess</span></span></code> </pre> <br>  <i><code>hostpad.conf</code> рдкреНрд░рд▓реЗрдЦрди рдХреЗ <code>hostpad.conf</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреЗрдЦреЗрдВ</a></i> ред <br><br>  рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░, рд╡рд╛рдпрд░рд▓реЗрд╕ рд░рд╛рдЙрдЯрд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЪрд╛рд▓реВ рд╣реИ, рдФрд░ рдпрджрд┐ рдЖрдкрдХреЛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдЖрдк рдЕрдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдЧреЛрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br><a name="4"></a><h1>  Hostapd рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ SSID рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ </h1><br>  рднрд▓реЗ рд╣реА рдЖрдк рдХрд┐рд╕реА рдЕрддрд┐рдерд┐ рдкрд╣реБрдВрдЪ рдмрд┐рдВрджреБ рдпрд╛ рдЕрдкрдиреЗ рд╡реАрдкреАрдПрди рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рд╡рд╛рдпрд░рд▓реЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реЛрдВ, рдХрд┐рд╕реА рдмрд┐рдВрджреБ рдкрд░ рдЖрдкрдХреЛ рдПрдХ рдЖрднрд╛рд╕реА рдПрд╕рдПрд╕рдЖрдИрдбреА рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br><h2>  рдЪрд╛рд░реНрдЯ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд░реНрддрдорд╛рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ</a> рдЖрдзрд╛рд░ рдкрд░, рдпрд╣рд╛рдВ рдПрдХ рдЕрджреНрдпрддрди рдЖрд░реЗрдЦ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдорд╛рди рд▓реЗрдВ рдХрд┐ <code>wlp5s0</code> рднреМрддрд┐рдХ рд╡рд╛рдпрд░рд▓реЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ, рд╡рд░реНрдЪреБрдЕрд▓ SSID рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ <code>192.168.2.0/24</code> рд╕рдмрдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>wlan0</code> рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкрд░ рдЪрд▓реЗрдЧрд╛: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/096/450/32b/09645032b28e7310ad93b2109efb0860.png"><br><br><h2>  рдЯреНрд░реЗрдирд┐рдВрдЧ </h2><br>  рдкрд╣рд▓реЗ, рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЖрдкрдХрд╛ рд╡рд╛рдпрд░рд▓реЗрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХрдИ SSID рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">$ iw list ... valid interface combinations: * <span class="hljs-comment"><span class="hljs-comment">#{ AP, mesh point } &lt;= 8, total &lt;= 8, #channels &lt;= 1, STA/AP BI must match ...</span></span></code> </pre> <br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЪрд┐рдкрд╕реЗрдЯ рдПрдХ рдЪреИрдирд▓ рдкрд░ рдЖрда рдкрд╣реБрдВрдЪ рдмрд┐рдВрджреБрдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк рдЕрдзрд┐рдХрддрдо рд╕рд╛рдд рд╡рд░реНрдЪреБрдЕрд▓ SSID рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдпреЗ рд╕рднреА рдПрдХ рд╣реА рдЪреИрдирд▓ рдкрд░ рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред <br><br><h2>  рдиреЗрдЯрд╡рд░реНрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </h2><br>  Hostapd.conf рдореЗрдВ рдкреНрд░рд▓реЗрдЦрди рдХреЗ рдЕрдиреБрд╕рд╛рд░, рднреМрддрд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдореИрдХ рдкрддреЗ рдФрд░ рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА рдХреЗ рдмреАрдЪ рдПрдХ рд╕рдЦреНрдд рд╕рдВрдмрдВрдз рд╣реИ: <br><br><blockquote>  рд╣реЛрд╕реНрдЯрдкреЗрдб рдЙрди рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА рдореБрдЦреМрдЯрд╛ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛ рдЬреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рд╣реИрдВред  <b>hostapd рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░реЗрдЧрд╛ рдХрд┐ dev_addr &amp; MASK == dev_addr</b> ред  рдпрджрд┐ рдпрд╣ рдорд╛рдорд▓рд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╣реЛрд╕реНрдЯрдкреИрдб рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд░реЗрдбрд┐рдпреЛ рдХрд╛ рдореИрдХ рдкрддрд╛ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ред  рдпрджрд┐ рдкреНрд░рддреНрдпреЗрдХ рдорд╛рдзреНрдпрдорд┐рдХ BSS рдХреЗ рд▓рд┐рдП BSSID рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╕реАрдорд╛ hostapd рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ рдФрд░ рдЕрдиреНрдп рдорд╛рд╕реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдпрджрд┐ рдбреНрд░рд╛рдЗрд╡рд░ рдЙрдирдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдкреНрд░рд╢рд╛рд╕рд┐рдд рдмрд┐рдЯ рд╕реНрд╡реИрдк) <br><br>  рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА рдХреЛ рдкреНрд░рддреНрдпреЗрдХ рдмреАрдПрд╕рдПрд╕ рдХреЗ рдХреНрд░рдо рдореЗрдВ рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрдм рддрдХ рдХрд┐ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА 'рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА' рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдпрджрд┐ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИ, рддреЛ рдЙрд╕реЗ рдЗрд╕ рддрд░рд╣ рдЪреБрдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП: <br>  - рдПрдХ рдорд╛рдиреНрдп MASK рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЗрд╕реЗ рдФрд░ dev_addr рдХреЛ рдХрд╡рд░ рдХрд░рддрд╛ рд╣реИ <br>  - рд░реЗрдбрд┐рдпреЛ рдХреЗ рдореИрдХ рдкрддреЗ рдХреЗ рд╕рдорд╛рди рдирд╣реАрдВ рд╣реИ <br>  - рдХрд┐рд╕реА рдЕрдиреНрдп рджреНрд╡рд╛рд░рд╛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА рдХреЗ рд╕рдорд╛рди рдирд╣реАрдВ рд╣реИ </blockquote><br>  рдЗрди рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ <code>hostapd</code> рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ (s) рдХреЗ BSSID рдХреЛ рдЕрд╕рд╛рдЗрди <code>hostapd</code> рдЕрдиреБрдорддрд┐ <code>hostapd</code> , рд╣рдо рдЪрд╛рд░ рдХрдо рд╕реЗ рдХрдо рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдЯреНрд╕ рдХреЛ рд╢реВрдиреНрдп рдХрд░рдХреЗ рднреМрддрд┐рдХ рд╡рд╛рдпрд░рд▓реЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рдореИрдХ рдкрддреЗ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ 15 рдЖрднрд╛рд╕реА рдмреАрдПрд╕рдПрд╕рдЖрдИрдбреА рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ - рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕реЗ рдмрд╣реБрдд рдЕрдзрд┐рдХред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╡рд░реНрддрдорд╛рди рдореИрдХ рдкрддреЗ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░реЗрдВ: <br><br><pre> <code class="bash hljs">$ ip addr show wlp5s0 | grep link | awk <span class="hljs-string"><span class="hljs-string">'{print $2}'</span></span> 44:c3:06:00:03:eb</code> </pre> <br>  рдпрджрд┐ рдЖрдк рдЕрдВрддрд┐рдо рдЪрд╛рд░ рдмрд┐рдЯреНрд╕ рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">U / L рдмрд┐рдЯ</a> рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ MAC рдкрддрд╛ <code>46:c3:06:00:03:e0</code> ред <br><br>  рдЕрдм рд╣рдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рд╣реА рдореИрдХ рдкрддреЗ рдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВрдЧреЗ, рдФрд░ рд╣рдорд╛рд░реЗ рдЖрд░реЗрдЦ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдПрдХ рдЖрднрд╛рд╕реА рд╡рд╛рдпрд░рд▓реЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рднреА рдШреЛрд╖рд┐рдд рдХрд░реЗрдВрдЧреЗ: <br><br><pre> <code class="bash hljs">$ cat /etc/network/interfaces ... <span class="hljs-comment"><span class="hljs-comment"># Physical Wireless auto wlp5s0 iface wlp5s0 inet manual pre-up ip link set dev wlp5s0 address 46:c3:06:00:03:e0 # Virtual Wireless allow-hotplug wlan0 iface wlan0 inet static address 192.168.2.1 network 192.168.2.0 netmask 255.255.255.0 broadcast 192.168.2.255 post-up /usr/sbin/dnsmasq \ --pid-file=/var/run/dnsmasq-wlan0.pid \ --conf-file=/dev/null \ --interface=wlan0 --except-interface=lo \ --bind-interfaces \ --dhcp-range=192.168.2.10,192.168.2.150,24h post-down cat /var/run/dnsmasq-wlan0.pid | xargs kill ...</span></span></code> </pre> <br>  рдмрд╣реБрдд рдмрдврд╝рд┐рдпрд╛ред  рдореИрдВ рдПрдХ DHCP рд╕рд░реНрд╡рд░ рдХреЗ рд░реВрдк рдореЗрдВ <code>dnsmasq</code> рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ <code>dnsmasq</code> - рдЬреЛ рднреА рдЖрдкрдХреЛ рдкрд╕рдВрдж рд╣реИ рдЙрд╕реЗ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВред  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <code>allow-hotplug</code> рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br><h2>  рдкрд╣реБрдВрдЪ рдмрд┐рдВрджреБ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди </h2><br>  рдЕрдм рд╕рд░рд▓рддрдо рдмрд╛рдд: рд╡рд░реНрддрдорд╛рди <code>hostapd</code> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ SSID рдЬреЛрдбрд╝реЗрдВред  <b>рдЗрд╕реЗ</b> рдореМрдЬреВрджрд╛ <code>hostapd.conf</code> рдлрд╝рд╛рдЗрд▓ <b>рдХреЗ рдЕрдВрдд рдореЗрдВ</b> рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="bash hljs">$ cat /etc/hostapd/hostapd.conf ... <span class="hljs-comment"><span class="hljs-comment">### Virtual SSID(s) ### bss=wlan0 ssid=MyVirtualSSID wpa=2 wpa_key_mgmt=WPA-PSK rsn_pairwise=CCMP wpa_passphrase=you_cant_guess</span></span></code> </pre> <br>  рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдореИрдВрдиреЗ WPA2 рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЕрдзрд┐рдХрд╛рдВрд╢ рд░реЗрдбрд┐рдпреЛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╡рд┐рдХрд▓реНрдк рдпрд╣рд╛рдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>channel</code> )ред  рдЖрдк рдШреЛрд╖рд┐рдд рдФрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рд╡рд░реНрдЪреБрдЕрд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдХрд░ рдЕрдзрд┐рдХ рдЖрднрд╛рд╕реА рдПрд╕рдПрд╕рдЖрдИрдбреА рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЕрдм рд░рд┐рдмреВрдЯ рдХрд░реЗрдВ - рдФрд░ рдЕрдкрдиреЗ рдирдП рдПрд╕рдПрд╕рдЖрдИрдбреА рдХреЛ рдирдП рд╡рд╛рдпрд░рд▓реЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ (рдореИрдХ рдкрддреЗ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ) рдХреЗ рд╕рд╛рде рджреЗрдЦреЗрдВ: <br><br><pre> <code class="bash hljs">$ ip addr show wlan0 | grep link | awk <span class="hljs-string"><span class="hljs-string">'{print $2}'</span></span> 46:c3:06:00:03:e1</code> </pre> <br>  <b>рдпрд╣реА рд╣реИ рджреЛрд╕реНрддреЛрдВ!</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi437634/">https://habr.com/ru/post/hi437634/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi437622/index.html">Azure Machine Learning рд╕реЗрд╡рд╛ рдХреЗ рд╕рд╛рде рд╢реБрд░реБрдЖрдд рдХрд░рдирд╛</a></li>
<li><a href="../hi437624/index.html">OpenSceneGraph: рдмрдирд╛рд╡рдЯ рдореВрд▓ рдмрд╛рддреЗрдВ</a></li>
<li><a href="../hi437626/index.html">рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рд╛рде рдЯреНрд░реЗрдбрд┐рдВрдЧ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдкреНрд░рджрд░реНрд╢рди</a></li>
<li><a href="../hi437630/index.html">BETT рд╕рдореНрдореЗрд▓рди рд╕реЗ Microsoft рдХреА рдореБрдЦреНрдп рдШреЛрд╖рдгрд╛рдПрдБ</a></li>
<li><a href="../hi437632/index.html">рдореИрд╢, рднрд╛рд╖рд╛ рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ</a></li>
<li><a href="../hi437636/index.html">Microsoft Store рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рдирд╛: рд╡рд░реНрд╖ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкрд░рд┐рд╡рд░реНрддрди</a></li>
<li><a href="../hi437638/index.html">"рдХреМрди рд╕рд╛ рдмрд┐рдВрджреБ рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ?" рдирд┐рдпреЛрдЬрдХ рдХрд╛ рдЙрддреНрддрд░ред рдПрдЯрдореЛрдЯреНрдпреВрдм рдФрд░ рд╕реЛрд▓реНрдбрд░рд┐рдВрдЧ</a></li>
<li><a href="../hi437640/index.html">рдХреИрд╕реЗ рдмреНрд░рд╛рдВрдб рдЯреЗрдХ рдореАрдбрд┐рдпрд╛ рдмрдмрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рддреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi437642/index.html">рдЕрдЧрд░ рдЦрд┐рдбрд╝рдХрд┐рдпрд╛рдВ рдЦреБрд▓рддреА рд╣реИрдВ, рддреЛ рдХрд┐рд╕реА рдХреЛ рдЗрд╕рдХреА рдЬрд░реВрд░рдд рд╣реИ</a></li>
<li><a href="../hi437646/index.html">3 рдбреА рдкреНрд░рд┐рдВрдЯрд░ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдФрд░ рдЧреИрд░-рд╕реНрдкрд╖реНрдЯ рдЪреАрдЬреЗрдВ: 3 рдбреА рдкреНрд░рд┐рдВрдЯрд░ рдХреЗ рд▓рд┐рдП рдЫреЛрдЯреА рдЪреАрдЬреЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>