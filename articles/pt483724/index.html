<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòØ üõ∏ üê∞ Trabalhar com o complexo de pneus personalizados Redd üòò üÜö üåÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No √∫ltimo artigo, come√ßamos a nos familiarizar com como voc√™ pode trabalhar com pneus conhecidos e comuns usando o complexo Redd, depois do qual prome...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trabalhar com o complexo de pneus personalizados Redd</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483724/"> No <a href="https://habr.com/ru/post/477662/">√∫ltimo artigo,</a> come√ßamos a nos familiarizar com como voc√™ pode trabalhar com pneus conhecidos e comuns usando o complexo Redd, depois do qual prometi seguir em frente para obter acesso a pneus mais ex√≥ticos.  Mas, depois de conversar com alguns conhecidos, repentinamente percebi que nem todo mundo lia o artigo que foi escrito sobre o complexo de Redd fora deste ciclo.  E, consequentemente, nem todo mundo sabe por que esses pneus foram adicionados ao complexo.  √â claro que voc√™ pode apenas se referir a <a href="https://habr.com/ru/post/440156/">esse artigo</a> , mas parece-me que ser√° mais correto recontar sua parte correspondente com refer√™ncia ao tema desse ciclo em particular.  Portanto, hoje consideraremos n√£o apenas quest√µes pr√°ticas, mas tamb√©m te√≥ricas sobre pneus vendidos pelo complexo Redd. <br><br><img src="https://habrastorage.org/webt/af/-c/vx/af-cvxucoo4l55__goxrdffbbtc.png"><br><a name="habracut"></a><br><h2>  Parte te√≥rica chata </h2><br><h3>  O que consideraremos </h3><br>  Vamos brevemente (na medida do poss√≠vel) examinar algumas quest√µes te√≥ricas para entender claramente por que tudo √© feito no complexo Redd, de uma maneira ou de outra.  Primeiro de tudo, a principal tarefa do complexo ... Por incr√≠vel que pare√ßa, como parte dessa s√©rie de artigos, nunca escrevi sobre isso.  Sim, e n√£o pretendo escrever.  O fato √© que a principal tarefa √© um acesso remoto conjunto √† depura√ß√£o de determinado hardware (de microcontroladores a enormes sistemas de processadores com v√°rios n√∫cleos).  Reserva de tempo de trabalho, proporcionando acesso f√≠sico atrav√©s de canais de p√©ssima qualidade (e n√£o apenas ideal) e outras del√≠cias.  A depura√ß√£o pode ser por meio do JTAG ou de outras ferramentas fornecidas pelos ambientes de desenvolvimento.  Uma grande equipe est√° trabalhando nisso, tudo √© muito interessante por l√°, mas eu n√£o gosto de nenhuma burocracia, ent√£o n√£o quero escrever sobre esses t√≥picos.  Talvez no futuro, algu√©m mais preencha essa lacuna ... Enquanto isso, estou escrevendo sobre as ferramentas <b>auxiliares</b> do complexo. <br><br>  Sim, sim, tudo o que descrevo h√° mais de seis meses s√£o apenas coisas que foram projetadas para <b>ajudar os</b> desenvolvedores. <br><br><div class="spoiler">  <b class="spoiler_title">Artigos anteriores do ciclo</b> <div class="spoiler_text"><ol><li>  <a href="https://habr.com/ru/post/452656/">Desenvolvimento do ‚Äúfirmware‚Äù mais simples para FPGAs instalados no Redd e depura√ß√£o usando o teste de mem√≥ria como exemplo.</a> </li><li>  <a href="https://habr.com/ru/post/453682/">Desenvolvimento do ‚Äúfirmware‚Äù mais simples para FPGAs instalados em Redd.</a>  <a href="https://habr.com/ru/post/453682/">Parte 2. C√≥digo do programa.</a> </li><li>  <a href="https://habr.com/ru/post/454938/">Desenvolvimento de n√∫cleo pr√≥prio para incorpora√ß√£o em um sistema de processador baseado em FPGA.</a> </li><li>  <a href="https://habr.com/ru/post/456008/">Desenvolvimento de programas para o processador central Redd no exemplo de acesso ao FPGA.</a> </li><li>  <a href="https://habr.com/ru/post/462253/">As primeiras experi√™ncias usando o protocolo de streaming no exemplo da comunica√ß√£o da CPU e do processador no FPGA do Redd.</a> </li><li>  <a href="https://habr.com/ru/post/464795/">Merry Quartusel, ou como o processador ganhou vida.</a> </li><li>  <a href="https://habr.com/ru/post/467353/">M√©todos de otimiza√ß√£o de c√≥digo para Redd.</a>  <a href="https://habr.com/ru/post/467353/">Parte 1: efeito de cache.</a> </li><li>  <a href="https://habr.com/ru/post/468027/">M√©todos de otimiza√ß√£o de c√≥digo para Redd.</a>  <a href="https://habr.com/ru/post/468027/">Parte 2: mem√≥ria n√£o armazenada em cache e opera√ß√£o de barramento paralelo.</a> </li><li>  <a href="https://habr.com/ru/post/469985/">Otimiza√ß√£o abrangente de c√≥digo: substituindo um gerador de rel√≥gio para melhorar o desempenho do sistema.</a> </li><li>  <a href="https://habr.com/ru/post/477662/">Acesso a barramentos redd implementados em controladores FTDI</a> </li></ol><br></div></div><br><h3>  Por que no complexo padr√£o Redd os pneus s√£o implementados </h3><br>  Muitas vezes voc√™ precisa desenvolver um equipamento sem ter acesso a ele.  Vejamos um exemplo espec√≠fico de um projeto que possui bons links.  Aqui, por exemplo, est√£o meus <a href="https://www.astrosoft.ru/about/clients/cassel-aero/" rel="nofollow">helic√≥pteros</a> favoritos.  Estamos aqui e helic√≥pteros est√£o na Su√©cia.  Al√©m disso, pedimos desenvolvimento no inverno, quando os helic√≥pteros fisicamente n√£o podiam desempenhar as fun√ß√µes que implementamos para eles (a saber, fertilizar o solo nas florestas: o solo naquela √©poca estava sob nevascas).  Acontece que os dispositivos instalados no helic√≥ptero devem ser emulados durante a depura√ß√£o e o voo - virtualmente. <br><br>  Mas isso √© depura√ß√£o.  Ao testar um projeto, a emula√ß√£o √© a √∫nica op√ß√£o.  O testador deve verificar tudo no n√∫mero m√°ximo de modos, classificando atrav√©s de v√°rias combina√ß√µes.  Al√©m disso, ele deve criar situa√ß√µes com condi√ß√µes cr√≠ticas e de emerg√™ncia (um trabalho t√£o destrutivo para os testadores).  Como fazer isso em equipamentos reais?  Somente em emuladores. <br><br>  Como est√° indo a comunica√ß√£o com dispositivos modernos?  Geralmente - atrav√©s de barramentos padr√£o, porque os desenvolvedores de dispositivos tendem a se conectar atrav√©s de algo j√° conhecido pelos consumidores.  Isso √© apenas Redd e atuar√° como um emulador de muitos dispositivos.  Seus barramentos est√£o conectados ao bloco desenvolvido.  E a unidade ter√° certeza de que trabalha com equipamentos reais, sem saber que na outra extremidade dos pneus n√£o h√° um monte de ferro, mas o complexo Redd, no qual v√°rios emuladores est√£o girando. <br><br>  Ao trabalhar com equipamentos reais, os pneus podem atuar como analisadores, registrando o trabalho com hardware real para analisar voos em caso de problemas. <br><br>  Em geral, deve haver o maior n√∫mero poss√≠vel de pneus, e sua configura√ß√£o o mais variada poss√≠vel.  Embora, em tudo que voc√™ precisa saber a medida.  Bem, apenas porque cada barramento custa algum dinheiro e ocupa espa√ßo no gabinete e tamb√©m no conector.  Agora vamos considerar quais estrat√©gias s√£o melhor usadas para controlar esses barramentos programaticamente. <br><br><h3>  Quem liderar√° o desenvolvimento de c√≥digo para Redd </h3><br>  Nas empresas modernas, Sua Majestade horas-homem est√° na vanguarda.  O fato √© que esse √© um recurso muito caro em muitos aspectos (dinheiro, tempo de desenvolvimento, disponibilidade de um especialista neste momento espec√≠fico para esta e outras tarefas da empresa etc.); portanto, se a ger√™ncia puder economizar horas, ela far√° isso.  Se for poss√≠vel n√£o adicionar desenvolvedores √† equipe, eles n√£o ser√£o adicionados.  Se for poss√≠vel fazer tudo em menos tempo, eles nocautear√£o os desenvolvedores para que possam faz√™-lo em menos tempo. <br><br>  Daqui resulta que √© improv√°vel que eles forne√ßam especialistas individuais para escrever emuladores.  E se o fizerem, ser√£o programadores comuns que trabalham na mesma empresa. <br><br>  Por que estou escrevendo isso?  Em alguns artigos, √© considerado chique quando alguns idiomas especializados s√£o usados ‚Äã‚Äãpara as tarefas de manuten√ß√£o de pneus fora do padr√£o.  Eu tive a chance de trabalhar com algo assim.  Deixe-me descrever minhas impress√µes sobre o exemplo de coisas que j√° foram publicadas.  Aqui, por exemplo, <a href="https://www.astrosoft.ru/about/clients/bvg-group/case-959/" rel="nofollow">https://www.astrosoft.ru/about/clients/bvg-group/case-959/</a> .  Al√©m disso, a linguagem GOST saiu recentemente at√© GOST.  Minha opini√£o √© a seguinte: o que era necess√°rio no final dos anos 70 - in√≠cio dos anos 80, depois absolutamente n√£o necess√°rio no final do primeiro quartel do s√©culo XXI.  Aqui est√° um maravilhoso artigo de Konstantin Chizhov, no qual a coisa mais importante dessa linguagem (grupos de contato) √© perfeita e quase gratuita, implementada por metaprograma√ß√£o em C ++ <a href="http://easyelectronics.ru/rabota-s-portami-vvoda-vyvoda-mikrokontrollerov-na-si.html" rel="nofollow">http://easyelectronics.ru/rabota-s-portami-vvoda-vyvoda-mikrokontrollerov-na- si.html</a> .  Este artigo verifica tudo quanto ao AVR.  Fiz uma √≥tima verifica√ß√£o da op√ß√£o da biblioteca para o Cortex M, os resultados tamb√©m s√£o surpreendentes.  Os otimizadores empacotam tudo de tal maneira que o desenvolvimento direto no assembler n√£o trar√° nenhum ganho.  E isso se aplica n√£o apenas aos grupos de contatos, mas em geral a todos os drivers do mcucpp.  √â uma pena que as autoridades n√£o tenham permitido essa ideologia no MAX RTOS, portanto os resultados da pesquisa n√£o foram publicados.  Mas em casa eu uso apenas essa biblioteca. <br><br>  Todas as outras coisas implementadas no YASTEK tamb√©m s√£o perfeitamente empacotadas na constru√ß√£o C ++.  Mas a interatividade para o operador na jun√ß√£o dos anos setenta e oitenta n√£o era.  √â verdade que n√£o estava nos compiladores de Pascal, C e outros idiomas da √©poca.  Na maioria das vezes, os compiladores eram em lote e simplesmente geravam texto do assembler sem nenhuma ferramenta de depura√ß√£o.  Ao fazer o remake do YASTEC, adicionamos operadores para a sa√≠da de dados na tela e at√© mesmo um depurador interativo, mas, de qualquer maneira, essas s√£o meias medidas no contexto do que est√° acontecendo em ambientes de desenvolvimento prontos para linguagens de programa√ß√£o comuns.  Em suma, os tempos em que havia raz√µes t√©cnicas para tornar a linguagem especial do YASTEK h√° muito tempo.  Hoje, em uma linguagem de programa√ß√£o comum, √© poss√≠vel obter o mesmo e muito mais. <br><br>  Algu√©m pode dizer que n√£o foram especialistas em C ++ que escreveram o c√≥digo l√°, mas personalizadores comuns ... √â assim que √©, mas eu j√° notei que programadores comuns escrever√£o o c√≥digo para Redd.  N√£o h√° sentido para a ger√™ncia manter um especialista restrito para tarefas ocasionais.  E n√£o faz sentido para um especialista comum aprender outro idioma. <br><br>  E que outras caracter√≠sticas expressivas isso ter√°?  Ao desenvolver emuladores, voc√™ pode precisar de coisas completamente ex√≥ticas.  Por exemplo, para o emulador de GPS no modo interativo, controlamos o uso do joystick.  Que linguagem orientada a problemas a suporta?  E a flexibilidade desses idiomas ainda √©.  Por fim, a reutiliza√ß√£o do c√≥digo no YESTEK discutido n√£o est√° √† altura, mas a busca de solu√ß√µes prontas na rede ... Mesmo em idiomas comuns, n√£o √© apenas um <b>bom</b> exemplo, mas tamb√©m ex√≥tico. <br><br>  O mesmo se aplica a <a href="https://www.astrosoft.ru/about/clients/cassel-aero/case-786/" rel="nofollow">esse caso</a> , que suavemente se transformou em <a href="https://www.astrosoft.ru/about/clients/cassel-aero/case-787/" rel="nofollow">tal</a> <a href="https://www.astrosoft.ru/about/clients/cassel-aero/case-786/" rel="nofollow">caso</a> .  No √¢mbito da automa√ß√£o empresarial, o SIMATIC, com seu sistema avan√ßado de configura√ß√£o e programa√ß√£o, √© bom, mas, para um projeto pequeno, criou mais problemas do que resolveu, sendo substitu√≠do por uma solu√ß√£o mais universal. <br><br><blockquote>  No total, conclu√≠mos que o trabalho de programadores comuns em suas linguagens usuais √© normal para Redd.  Para outras tarefas - √© discutido e, especificamente, para tarefas auxiliares resolvidas pelo complexo Redd, √© normal. </blockquote><br><br><h3>  Como implementar pneus </h3><br>  Mas se dissermos que programadores comuns usar√£o os pneus em suas linguagens habituais, as bibliotecas para trabalhar com esses barramentos dever√£o ser o mais t√≠pico poss√≠vel.  Em particular, a frase foi notada imediatamente: "E vamos colocar microcontroladores no complexo, e os programadores escrever√£o tudo sobre eles".  Esta op√ß√£o novamente requer especialistas nesses controladores.  Al√©m disso, requer sincroniza√ß√£o s√©ria entre subsistemas.  Foi decidido que, se poss√≠vel, o programador deve trabalhar no familiar processador central do PC.  "Mas e os FPGAs?", Voc√™ pergunta.  Bem, opa, provavelmente todo mundo percebeu que, para os FPGAs, escolhi a ideologia do "desenvolvimento m√≠nimo no Verilog, o m√°ximo familiar aos programadores".  L√° voc√™ n√£o pode fazer isso de forma mais conveniente.  Mas estamos trabalhando duro. <br><br>  Portanto, implementa√ß√µes t√≠picas de pneus.  Com o UART, tudo est√° claro.  Com o SPI / I <sup>2</sup> C, v√°rias op√ß√µes foram consideradas, uma vez que n√£o existe um padr√£o de fato estabelecido para os PCs.  Mas havia um desejo de fazer sem a op√ß√£o de escrever um conjunto completo: "firmware" do controlador, driver e bibliotecas.  Eu queria levar algo pronto.  No entanto, at√© o final, consideramos a op√ß√£o com microcontroladores que implementam no n√≠vel USB e no depurador Cypress.  O ponto disso foi colocado pelas descobertas descritas no <a href="https://habr.com/ru/post/437112/">artigo sobre DMA</a> .  √â imposs√≠vel garantir a largura de banda solicitada no TOR se todos os barramentos com fluxos de dados anteriormente desconhecidos funcionarem simultaneamente.  E se espalharmos por v√°rios controladores - descansamos na largura de banda do USB 2.0 FS.  Portanto, apenas pontes FTDI.  Uma ponte √© uma fun√ß√£o e o USB 2.0 HS fornece largura de banda. <br><br>  A prop√≥sito, na √∫ltima se√ß√£o, sempre me referi √† linguagem C ++ comum.  O fato √© que, nesta fase da jornada da minha vida, essa √© minha principal linguagem de programa√ß√£o (embora nem sempre fosse esse o caso).  Mas solu√ß√µes padr√£o, s√£o padr√£o para funcionar perfeitamente em outras linguagens comuns hoje em dia, seja Python, Java ou outra coisa.  Portanto, se um especialista nessas l√≠nguas for jogado em batalha, ele, usando essas l√≠nguas, far√° tudo com menos facilidade.  Essa √© a beleza das solu√ß√µes universais. <br><br>  Mas existem alguns pneus que s√£o bobos para colocar chips caros de FTDI.  Falaremos sobre como eles s√£o implementados no complexo. <br><br><h2>  Mil pequenas coisas </h2><br><h3>  Por que o complexo Redd tem um cart√£o SD comutado </h3><br>  V√°rios dispositivos em desenvolvimento est√£o atualizando seu ‚Äúfirmware‚Äù usando um cart√£o SD.  Na maioria das vezes, o ‚Äúfirmware‚Äù √© derramado no cart√£o na forma de um arquivo, ap√≥s o qual o dispositivo √© desligado e, quando ligado, ele detecta o arquivo de atualiza√ß√£o e o aplica.  Recentemente, envolvi-me em uma nova placa para uma das minhas impressoras 3D.  L√°, o "firmware" do Marlin 2.0, ap√≥s alguns dos comandos M (n√£o me lembro do c√≥digo exato), abriu o conte√∫do do SD atrav√©s do barramento USB, para que eu pudesse injetar atualiza√ß√µes sem truques.  Conectei via USB, ap√≥s o que sabia que havia desligado / ligado (como faz√™-lo com a ajuda do complexo Redd, examinamos no <a href="https://habr.com/ru/post/477662/">artigo anterior</a> ), dei o comando para conectar o cart√£o SD ao USB, esperei o disco aparecer, preencheu o ‚Äúfirmware‚Äù, desligou / ligou novamente e esperou .  O firmware foi atualizado.  Mas nem tudo √© t√£o bonito.  √Äs vezes, um cart√£o SD precisa ser preparado com anteced√™ncia.  A prop√≥sito, se voc√™ adicionar a curva ‚Äúfirmware‚Äù √† impressora 3D, a op√ß√£o ideal descrita acima tamb√©m n√£o funcionar√°, e voc√™ tamb√©m precisar√° preparar o cart√£o com anteced√™ncia.  E, ao desenvolver, crie um "firmware" que n√£o funcione - algumas ninharias. <br><br>  Nesse caso, o complexo Redd possui um cart√£o SD comutado.  No diagrama do circuito el√©trico, est√° inclu√≠do da seguinte forma: <br><br><img src="https://habrastorage.org/webt/9e/su/xj/9esuxjssl9kznrnz4dodepejj9k.png"><br><br>  Inicialmente, tentamos encontrar uma solu√ß√£o t√≠pica que permitisse alternar o barramento SDIO (n√£o SPI, ou seja, SDIO, os dispositivos tamb√©m podem funcionar por essa interface) via FPGA.  Descobriu-se que uma solu√ß√£o bonita n√£o existe.  Mesmo as solu√ß√µes dos fabricantes de FPGA s√£o complexas e pouco cred√≠veis.  Portanto, foram fornecidas chaves anal√≥gicas que conectam fisicamente a placa a um conector externo ou a um leitor como parte do Redd.  Portanto, o algoritmo de opera√ß√£o √© o seguinte: conectado a um leitor, arquivos preparados usando o SO Linux, conectado ao dispositivo de destino.  N√≥s usamos l√°. <br><br>  Como trabalhar com o sistema de arquivos n√£o pertence a coisas cr√≠ticas (estamos apenas preparando os dados, portanto n√£o √© necess√°ria velocidade especial), foi decidido criar um leitor baseado no microcontrolador STM32F103.  O suporte para SDIO completo est√° apenas na vers√£o m√°xima deste chip.  E como esse controlador possui muitos contatos gratuitos, foi decidido fazer outras fun√ß√µes de baixa velocidade neles.  Considere um fragmento de um diagrama de circuito el√©trico, a partir do qual sua lista ser√° vis√≠vel. <br><br><img src="https://habrastorage.org/webt/q_/lt/lq/q_ltlqt32trstidfnkm7aeffhtw.png"><br><br>  Na verdade, os sinais relacionados √† troca de SDIO e cart√£o SD s√£o destacados em vermelho.  Passamos a considerar as cores de luz de fundo restantes. <br><br><h3>  Unidade flash SPI </h3><br>  A segunda t√©cnica comum para atualizar o "firmware" dos dispositivos de destino √© com uma unidade flash SPI.  Atualmente, isso n√£o √© cada vez mais SPI, mas Quad-SPI.  O princ√≠pio √© o mesmo.  Preencha os dados, conecte a unidade flash ao dispositivo e ligue-a.  O mecanismo Bootstrap "sugar√°" o firmware para a RAM na inicializa√ß√£o. <br><br>  O mesmo esquema √© aplicado aqui - com comutadores anal√≥gicos: <br><br><img src="https://habrastorage.org/webt/l8/zn/v_/l8znv_7bcjtawlsxmrfbypheab0.png"><br><br>  Bem, as linhas relacionadas ao trabalho com uma unidade flash foram destacadas em verde. <br><br><h3>  Rel√©s de estado s√≥lido baixos </h3><br>  Periodicamente, surge a tarefa de simular o pressionamento de bot√µes no dispositivo.  Uma situa√ß√£o t√≠pica: os testadores precisam verificar a opera√ß√£o do menu do dispositivo de destino.  N√£o, uma vez que voc√™ pode revisar todos os pontos, mas se os desenvolvedores fizerem altera√ß√µes?  Para automatizar o processo, √© melhor que os bot√µes para navegar no menu sejam feitos automaticamente (as capturas de tela podem ser feitas pelo sistema operacional no dispositivo de destino ou digitalizando o barramento que vai para a tela usando o sniffer para o FPGA).  Bem, existem muitas outras tarefas nas quais voc√™ precisa simular programaticamente um pressionamento de bot√£o.  Para isso, rel√©s de estado s√≥lido s√£o adicionados ao circuito: <br><br><img src="https://habrastorage.org/webt/uf/4g/yo/uf4gyofip5mjrwxmejjm96l0i5w.png"><br><br>  ... e suas linhas de controle foram destacadas em azul. <br><br><h3>  Configurando pontes USB-SPI / I <sup>2</sup> C </h3><br>  Em um artigo anterior, observei que as pontes FTDI nas quais os barramentos SPI e I <sup>2</sup> C s√£o implementados possuem pernas de controle CFG0 e CFG1.  Em geral, provavelmente, ningu√©m precisar√° alterar seus valores padr√£o (todos os zeros), mas, se necess√°rio, as linhas que controlam esses sinais tamb√©m deixam o controlador STM32 em quest√£o e foram destacadas em roxo. <br><br><h3>  Redefini√ß√£o do dispositivo USB </h3><br>  Durante o desenvolvimento do sistema, foi decidido que, puramente teoricamente, os dispositivos poderiam "congelar".  Por exemplo, as pontes FTDI da primeira s√©rie tinham a propriedade de ‚Äúcongelar‚Äù com ‚Äúterreno‚Äù inst√°vel.  Sim, isso foi h√° mais de dez anos.  Sim, dentro do complexo, a terra √© extremamente est√°vel, pois a ponte est√° no mesmo pr√©dio que o computador.  Mas de repente.  Em geral, no ToR havia a possibilidade de redefinir qualquer um dos dispositivos.  Os pedidos correspondentes s√£o gerados pelo mesmo controlador STM32 e destacados em amarelo. <br><br><h2>  Acesso program√°tico ao controlador STM32 </h2><br>  Como voc√™ pode ver, a maioria dos dispositivos descritos acima n√£o √© padr√£o.  Mais precisamente, a maioria deles pode ser classificada como GPIO, mas n√£o existe um padr√£o de fato para ele.  A parte mais dif√≠cil dos dispositivos √© o leitor de cart√£o SD.  Portanto, foi decidido implementar a funcionalidade SD Reader no controlador STM32 (felizmente, o ambiente STM Cube MX permite fazer isso escrevendo apenas algumas linhas do seu pr√≥prio c√≥digo) e implementar o restante das fun√ß√µes conforme o fornecedor solicitar ao dispositivo de armazenamento em massa subjacente ao leitor.  Mas, como foi decidido h√° v√°rios artigos, as enormes narrativas s√£o inconvenientes para a leitura.  Portanto, os princ√≠pios de envio de comandos para o dispositivo de armazenamento em massa do Linux e exemplos de acesso program√°tico ao dispositivo resultante ser√£o examinados na pr√≥xima vez. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483724/">https://habr.com/ru/post/pt483724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483712/index.html">HighLoad ++, Yuri Nasretdinov (VK): como o VK insere dados no ClickHouse de dezenas de milhares de servidores</a></li>
<li><a href="../pt483714/index.html">Pr√™mios e concursos para projetos inovadores. Experi√™ncia de fornecedores mundiais</a></li>
<li><a href="../pt483716/index.html">Usando o scanner de vulnerabilidades nas bibliotecas de verifica√ß√£o de depend√™ncia usadas no GitlabCI</a></li>
<li><a href="../pt483718/index.html">Como a VDI est√° transformando o ambiente do escrit√≥rio</a></li>
<li><a href="../pt483722/index.html">Geoanal√≠tica de varejo, parte 1: automatizamos o processo de escolha de um local para uma empresa. 2GIS + MS Azure + ML</a></li>
<li><a href="../pt483726/index.html">JavaScript e HTML de baunilha. Sem estruturas. Sem bibliotecas. N√£o tem problema</a></li>
<li><a href="../pt483730/index.html">Programadores Union 2: Chinelos pararam de rir e ficaram pensativos</a></li>
<li><a href="../pt483732/index.html">Leia o firmware seguro do flash STM32F1xx usando o ChipWhisperer</a></li>
<li><a href="../pt483734/index.html">Que pre√ßo pagamos pelo uso de ass√≠ncrono / aguardar em JS / C # / Rust</a></li>
<li><a href="../pt483736/index.html">Pesquisa reversa de imagens: Um guia da Ag√™ncia de detetives Bellingcat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>