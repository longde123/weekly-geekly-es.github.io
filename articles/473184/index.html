<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµüèΩ üë®üèø‚Äçüåæ üë©‚Äç‚ù§Ô∏è‚Äçüë® Docker + php-fpm + PhpStorm + Xdebug üèÜ üëåüèø üö∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No hace mucho tiempo, el l√≠der del equipo dijo: chicos, quiero que todos tengan el mismo entorno de desarrollo para nuestros proyectos de combate, deb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Docker + php-fpm + PhpStorm + Xdebug</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473184/">  No hace mucho tiempo, el l√≠der del equipo dijo: chicos, quiero que todos tengan el mismo entorno de desarrollo para nuestros proyectos de combate, debemos poder depurar todo, tanto las aplicaciones web como las solicitudes de API y los scripts de consola para salvar nuestros nervios y nuestro tiempo.  Y ay√∫danos con este acoplador. <br><br>  Apenas dicho que hecho.  Detalles debajo del corte. <br><a name="habracut"></a><br>  Hay muchos manuales de contenedorizaci√≥n en la red, pero ¬øc√≥mo aplicarlos al desarrollo de combate real?  Para cada proyecto, escriba su propio docker-compose.yml?  Pero todos nuestros proyectos se comunican entre s√≠ a trav√©s de la API, todos utilizan la pila de tecnolog√≠a est√°ndar: nginx + php-fpm + mysql. <br><br>  Por lo tanto, aclaremos las condiciones del problema: <br><br><ol><li>  Trabajamos en una empresa, en equipo, acompa√±amos varios proyectos de combate.  Todos trabajamos bajo Ubuntu + PhpStorm </li><li>  Para el desarrollo local, queremos usar la ventana acoplable para tener el mismo entorno de desarrollo para cada miembro del equipo, y tambi√©n para que cuando llegue un nuevo desarrollador, pueda implementar r√°pidamente un entorno de trabajo </li><li>  Queremos desarrollar con comodidad, queremos debutar todo: aplicaciones web, scripts de consola y solicitudes de API. </li></ol><br>  Una vez m√°s: queremos llevar <b>varios</b> proyectos de trabajo a la ventana acoplable. <br><br>  En los servidores de combate, se usa el paquete est√°ndar nginx + php-fpm + mysql.  Y cual es el problema? <br><br>  Implementamos exactamente el mismo entorno + Xdebug en la m√°quina local, configuramos nuestros proyectos en PhpStorm y trabajamos.  Para la depuraci√≥n, encienda el "tubo" en PhpStorm, todo funciona de f√°brica, todo est√° bien. <br><br><img src="https://habrastorage.org/webt/4m/tv/4e/4mtv4efpe_tiqc8mnwskabrxoqu.png"><br><br>  Todo esto es cierto: todo funciona de la caja.  Pero intentemos mirar debajo del cap√≥ de nuestro entorno de trabajo. <br><br>  Nginx + php-fpm se comunican a trav√©s del socket, xdebug escucha en el puerto 9000, PhpStorm tambi√©n, por defecto, escucha en el puerto 9000 para la depuraci√≥n y todo parece estar bien.  ¬øY si tenemos varias aplicaciones abiertas en PhpStorm, y las escuchas telef√≥nicas ("tubo") est√°n habilitadas para varias aplicaciones?  ¬øQu√© har√° PhpStorm?  √âl comenzar√° a jurar que se ha detectado una nueva conexi√≥n para Xdebug, ¬øquiere ignorarla o no? <br><br>  Es decir, con la configuraci√≥n predeterminada en PhpStorm, en un momento determinado, solo puedo presentar una aplicaci√≥n.  Para todas las dem√°s aplicaciones abiertas, la depuraci√≥n debe estar desactivada.  Maldici√≥n, pero es inconveniente.  Quiero escuchar todas las aplicaciones para la depuraci√≥n, y si hay un punto de interrupci√≥n en una de ellas, quiero que PhpStorm se detenga en esta aplicaci√≥n, en la l√≠nea donde la necesito. <br><br>  ¬øY qu√© se necesita para esto?  Pero necesita que cada aplicaci√≥n comience con su propia configuraci√≥n para Xdebug.  Para que cada aplicaci√≥n escuche su puerto, busque su servidor, y no como si tuvi√©ramos todo en com√∫n, todo en un mont√≥n. <br><br>  ¬°Y para esto hay un maravilloso acoplador!  Podemos lanzar cada una de nuestras aplicaciones de combate en un contenedor separado, basado en una imagen com√∫n, por ejemplo, php: 7.1-fpm.  Gracias a la tecnolog√≠a docker, podemos aislar nuestras aplicaciones con una sobrecarga m√≠nima. <br><br>  Ok, comencemos nuestros proyectos de combate bajo el docker, ejecutemos cada proyecto en un contenedor separado, configuremos cada proyecto en PhpStorm individualmente para la depuraci√≥n, todo deber√≠a estar bien. <br><br>  Y, vaya, el primer problema: los contenedores en la ventana acoplable se ejecutan como root, y localmente trabajamos, generalmente como un usuario con uid 1000, gid 1000. Las aplicaciones est√°n luchando, y dar a cada aplicaci√≥n 777 derechos para todo no es una opci√≥n.  Nuestras aplicaciones est√°n bajo el git, y si otorgamos los derechos 777 localmente, el git registrar√° todo esto y lo transferir√° al servidor de batalla. <br><br>  Muletas, aqu√≠ hay un ejemplo de imagen php: 7.1-fpm que se compilar√°. <br><br><h4>  Actualizaci√≥n </h4><br>  Como la comunidad se√±al√≥ correctamente, no hay absolutamente ninguna necesidad de muletas. <br>  Por ejemplo 1ntrovert <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">habrozer</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el comentario</a> <br><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de imagen php inicial: 7.1-fpm (uid y gid est√°n codificados)</b> <div class="spoiler_text"><pre><code class="php hljs">FROM php:<span class="hljs-number"><span class="hljs-number">7.1</span></span>-fpm RUN apt-get update &amp;&amp; apt-get install -y \ git \ curl \ wget \ libfreetype6-dev \ libjpeg62-turbo-dev \ libmcrypt-dev \ libpng-dev zlib1g-dev libicu-dev g++ libmagickwand-dev libxml2-dev \ &amp;&amp; docker-php-ext-configure intl \ &amp;&amp; docker-php-ext-install intl \ &amp;&amp; docker-php-ext-install mbstring zip xml gd mcrypt pdo_mysql \ &amp;&amp; docker-php-ext-configure gd --with-freetype-dir=/usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/ --with-jpeg-dir=/usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/ \ &amp;&amp; docker-php-ext-install -j$(nproc) gd \ &amp;&amp; pecl install imagick \ &amp;&amp; docker-php-ext-enable imagick \ &amp;&amp; pecl install xdebug \ &amp;&amp; docker-php-ext-enable xdebug ADD ./php.ini /usr/local/etc/php/php.ini RUN wget https:<span class="hljs-comment"><span class="hljs-comment">//getcomposer.org/installer -O - -q \ | php -- --install-dir=/bin --filename=composer --quiet RUN usermod -u 1000 www-data &amp;&amp; groupmod -g 1000 www-data WORKDIR /var/www USER 1000:1000 CMD ["php-fpm"]</span></span></code> </pre> <br></div></div><br><br>  Ejemplo de Dockerfile corregido <br><br><pre> <code class="bash hljs">FROM php:7.1-fpm ARG USER_ID ARG GROUP_ID RUN apt-get update &amp;&amp; apt-get install -y \ git \ curl \ wget \ libfreetype6-dev \ libjpeg62-turbo-dev \ libmcrypt-dev \ libpng-dev zlib1g-dev libicu-dev g++ libmagickwand-dev --no-install-recommends libxml2-dev \ &amp;&amp; docker-php-ext-configure intl \ &amp;&amp; docker-php-ext-install intl \ &amp;&amp; docker-php-ext-install mbstring zip xml gd mcrypt pdo_mysql \ &amp;&amp; pecl install imagick \ &amp;&amp; docker-php-ext-enable imagick \ &amp;&amp; pecl install xdebug-2.5.0 \ &amp;&amp; docker-php-ext-enable xdebug ADD ./php.ini /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/etc/php/php.ini RUN wget https://getcomposer.org/installer -O - -q \ | php -- --install-dir=/bin --filename=composer --quiet RUN usermod -u <span class="hljs-variable"><span class="hljs-variable">${USER_ID}</span></span> www-data &amp;&amp; groupmod -g <span class="hljs-variable"><span class="hljs-variable">${GROUP_ID}</span></span> www-data WORKDIR /var/www USER <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${USER_ID}</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${GROUP_ID}</span></span></span><span class="hljs-string">"</span></span> CMD [<span class="hljs-string"><span class="hljs-string">"php-fpm"</span></span>]</code> </pre><br><br>  <s>Al iniciar un contenedor desde esta imagen, el usuario de www-data obtiene uid = 1000, gid = 1000.</s>  <s>Por lo general, el primer usuario creado en Linux tiene estos derechos.</s>  <s>Y, exactamente con tales derechos, nuestros contenedores php-fpm funcionar√°n.</s>  <s>Estar√≠a muy agradecido si alguien me dijera c√≥mo trabajar sin muletas con derechos de acceso a la ventana acoplable.</s> <br><br>  Al iniciar un contenedor desde esta imagen, el usuario de www-data obtiene uid y gid, que se transferir√°n desde el exterior. <br><br>  <b>Tambi√©n en los comentarios se plante√≥ el tema</b> : por qu√© cambiar los derechos del usuario de www-data en absoluto, por qu√© los derechos est√°ndar no son adecuados para 33. Solo una cosa: cuando vamos al contenedor y creamos, por ejemplo, un archivo de migraci√≥n, no seremos el propietario del archivo en la m√°quina host.  Y cada vez ser√° necesario ejecutar algo como <pre> <code class="bash hljs"> sudo chown -R user:user ./</code> </pre> <br><br>  Y el segundo peque√±o problema: para que Xdebug funcione correctamente, debe registrar la direcci√≥n IP correcta para la m√°quina host.  Cada miembro del equipo es diferente.  127.0.0.1 no rueda.  Y aqu√≠ el mismo acoplador viene en nuestra ayuda.  Por ejemplo, podemos configurar expl√≠citamente la red: 192.168.220.0/28.  Y entonces nuestra m√°quina siempre tendr√° la direcci√≥n 192.168.220.1.  Utilizaremos esta direcci√≥n para configurar PhpStorm, as√≠ como para configurar otras aplicaciones.  Por ejemplo, cuando se trabaja con MySql. <br><br>  Docker-compose.yml en s√≠, despu√©s de considerar los comentarios, se ve as√≠: <br><br><pre> <code class="python hljs">version: <span class="hljs-string"><span class="hljs-string">'3'</span></span> services: php71-first: build: context: ./images/php71 args: - USER_ID - GROUP_ID volumes: - ./www:/var/www - ./aliases/php71/bash.bashrc:/etc/bash.bashrc environment: XDEBUG_CONFIG: <span class="hljs-string"><span class="hljs-string">"remote_host=192.168.220.1 remote_enable=1 remote_autostart=off remote_port=9008"</span></span> PHP_IDE_CONFIG: <span class="hljs-string"><span class="hljs-string">"serverName=first"</span></span> networks: - test-network php71-two: build: context: ./images/php71 args: - USER_ID - GROUP_ID volumes: - ./www:/var/www - ./aliases/php71/bash.bashrc:/etc/bash.bashrc environment: XDEBUG_CONFIG: <span class="hljs-string"><span class="hljs-string">"remote_host=192.168.220.1 remote_enable=1 remote_autostart=off remote_port=9009"</span></span> PHP_IDE_CONFIG: <span class="hljs-string"><span class="hljs-string">"serverName=two"</span></span> networks: - test-network nginx-test: image: nginx volumes: - ./hosts:/etc/nginx/conf.d - ./www:/var/www - ./logs:/var/log/nginx ports: - <span class="hljs-string"><span class="hljs-string">"8080:80"</span></span> depends_on: - php71-first - php71-two networks: test-network: aliases: <span class="hljs-comment"><span class="hljs-comment">#         . ,    api - first.loc - two.loc # mysql: # image: mysql:5.7 # ports: # - "3306:3306" # volumes: # - ./mysql/data:/var/lib/mysql # environment: # MYSQL_ROOT_PASSWORD: secret # networks: # - test-network networks: test-network: driver: bridge ipam: driver: default config: - subnet: 192.168.220.0/28</span></span></code> </pre><br><br>  Vemos que en esta configuraci√≥n se crean dos contenedores php71-first y php71-two, basados ‚Äã‚Äãen una imagen php: 7.1-fpm.  Cada contenedor tiene su propia configuraci√≥n para Xdebug.  Cada contenedor individual escuchar√°, para la depuraci√≥n, su puerto y su servidor. <br><br>  Adem√°s, llamo su atenci√≥n sobre las directivas <br><pre> <code class="python hljs"> args: - USER_ID - GROUP_ID</code> </pre><br><br>  Sin estas variables, la imagen php-fpm no se iniciar√°.  Pregunta: ¬øc√≥mo pasarlos a docker-compose.yml?  Respuesta: ya que es m√°s conveniente para usted.  Puedes al inicio: <br><pre> <code class="bash hljs">USER_ID=$(id -u) GROUP_ID=$(id -g) docker-compose up -d</code> </pre> <br>  Puede escribir estas variables en el archivo .env, que se encuentra en el mismo nivel que el archivo docker-compose.yml <br> <code>USER_ID=1000 <br> GROUP_ID=1000 <br></code> <br>  Me gusta m√°s la versi√≥n con el archivo .env.  Por supuesto, puedes usar el Makefile.  Como m√°s te guste. <br><br>  El c√≥digo completo para la versi√≥n demo se publica en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> . <br><br>  Listado de proyecto de demostraci√≥n: <br><br><img src="https://habrastorage.org/webt/-k/ky/wz/-kkywzcbln7nintf6fbwgpagv_k.png"><br><br>  Repase brevemente la lista del proyecto. <br><br>  Alias ‚Äã‚Äã-&gt; php71 -&gt; directorio bash.bashrc.  Momento controvertido.  Prefiero comunicarme con contenedores php-fpm a trav√©s de alias. <br><br>  Este archivo se reenv√≠a a docker-compose.yml: - ./aliases/php71/bash.bashrc:/etc/bash.bashrc <br>  Herramienta est√°ndar de Linux. <br><br>  El directorio de hosts: archivos de configuraci√≥n para Nginx.  Cada configuraci√≥n tiene su propio contenedor php-fpm.  Un ejemplo: <br><br><pre> <code class="php hljs">server { listen <span class="hljs-number"><span class="hljs-number">80</span></span>; index index.php; server_name first.loc; error_log /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/log/nginx/first_error.log; root /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/www/first.loc; location / { try_files $uri /index.php?$args; } location ~ \.php$ { fastcgi_split_path_info ^(.+\.php)(/.+)$; <span class="hljs-comment"><span class="hljs-comment">#  php-fpm fastcgi_pass php71-first:9000; fastcgi_index index.php; fastcgi_read_timeout 1000; include fastcgi_params; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param PATH_INFO $fastcgi_path_info; } }</span></span></code> </pre><br>  El directorio de im√°genes - instrucciones para ensamblar im√°genes php-fpm, el directorio mysql - almacenar bases de datos, el directorio www - todos nuestros proyectos web, en nuestro ejemplo first.loc y two.loc. <br><br>  <b>Resumamos los resultados intermedios</b> : utilizando las capacidades de la ventana acoplable, lanzamos todos nuestros proyectos de trabajo en un entorno.  Todos nuestros proyectos se ven, se registran configuraciones √∫nicas para Xdebug para cada uno de los proyectos. <br><br>  Queda por configurar correctamente PhpStorm para cada uno de los proyectos.  Al configurar, debemos registrar el puerto para la depuraci√≥n y el nombre del servidor en varios lugares. <br><br>  Crea un proyecto en PhpStorm <br><br><img src="https://habrastorage.org/webt/_j/8p/is/_j8piswn2nem_vwbnj08oh8i7uu.png"><br><br><img src="https://habrastorage.org/webt/wl/3k/yd/wl3kydjytydrmthhcpzsfe3v85m.png"><br><br><img src="https://habrastorage.org/webt/_j/np/ra/_jnpranostnhpzg7l2hecdbsgb8.png"><br><br>  Configuraremos las secciones del men√∫. <br>  - PHP (debe registrar correctamente el int√©rprete CLI), <br>  - Depuraci√≥n (cambie el puerto a 9008, como en el archivo docker-compose.yml), <br>  <s>- Proxy DBGp (clave IDE, Host, Puerto),</s> <br>  <b>actualizaci√≥n</b> Gracias al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">navegador de</a> hub CrazyLazy por el punto importante.  El elemento del men√∫ proxy DBGp no necesita ser configurado. <br>  - Servidores (debe especificar correctamente el nombre del servidor, como en el archivo docker-compose.yml, y usar las asignaciones de ruta) <br><br><img src="https://habrastorage.org/webt/lj/k1/qi/ljk1qiesnz_oqzeoi-i0ytmxgey.png"><br><br>  Ocultar√© todas las capturas de pantalla adicionales debajo del spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n del int√©rprete de CLI desde el archivo docker-compose.yml</b> <div class="spoiler_text">  No hay nada complicado: es importante, al configurar, seleccionar la imagen deseada y registrar correctamente el nombre del servidor.  Por defecto, el nombre del servidor Docker, lo tenemos. <br><br><img src="https://habrastorage.org/webt/qn/ot/08/qnot080fzz-bymkgbtsevyzwkla.png"><br><br><img src="https://habrastorage.org/webt/-r/e-/wn/-re-wnhsmpa5xowhv9y0hc4zqjg.png"><br><br><img src="https://habrastorage.org/webt/o7/rd/ah/o7rdahdcbjltlgvgksjdymqb92w.png"><br><br><img src="https://habrastorage.org/webt/bu/eh/md/buehmdu3ohudyx_9ezu9wz7mk-u.png"><br><br><img src="https://habrastorage.org/webt/1i/xi/qh/1ixiqhy2psmqjjhiftuttkk8nhu.png"><br><br><img src="https://habrastorage.org/webt/3b/_t/17/3b_t17w1nt6ju_86gddfmxkzo-y.png"><br><br><img src="https://habrastorage.org/webt/bs/6m/_v/bs6m_vv-zfuhuqrddsqh1d1zwic.png"><br><br><img src="https://habrastorage.org/webt/ml/va/ch/mlvach925rq-t52s3s6nnajlzlm.png"><br><br><img src="https://habrastorage.org/webt/rf/zg/5n/rfzg5n1utpkmtq3bbcucqtkfla0.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Configure la secci√≥n del men√∫ Depurar</b> <div class="spoiler_text">  Nuevamente, prescribimos todo desde la configuraci√≥n de docker-compose.yml para un contenedor espec√≠fico.  En el mismo paso, validamos c√≥mo funciona nuestra depuraci√≥n. <br><br><img src="https://habrastorage.org/webt/t8/76/d3/t876d3mggafgcrw6vn_prztxowa.png"><br><br><img src="https://habrastorage.org/webt/h9/sz/e3/h9sze3ekrkttlvs1mxqlccinqxk.png"><br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Configurar la secci√≥n del men√∫ Servidores</b> <div class="spoiler_text">  Es importante registrar correctamente las asignaciones de ruta de uso, nuevamente tomamos el nombre del servidor de la configuraci√≥n <br><br><img src="https://habrastorage.org/webt/qf/7-/on/qf7-onhf100vot3sqjs0zpminpy.png"><br><br><img src="https://habrastorage.org/webt/qb/p7/7x/qbp77xg1h1usxej75fua3o-2mm8.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Salimos de la secci√≥n de men√∫ Archivo -&gt; Configuraci√≥n, vamos a la secci√≥n de men√∫ Ejecutar -&gt; Editar configuraci√≥n, creamos una p√°gina web de Php</b> <div class="spoiler_text">  Seleccionamos nuestro servidor, creado en el paso anterior. <br><br><img src="https://habrastorage.org/webt/y4/df/hh/y4dfhhqmp_20nf5-eqkfateeepw.png"><br><br><img src="https://habrastorage.org/webt/9e/xm/b4/9exmb4ftet-yw1798zr1-qxse-s.png"><br><br><img src="https://habrastorage.org/webt/0s/wy/r8/0swyr8zrk65k0-jcilaqjjyqjtw.png"><br></div></div><br><h4>  Bueno eso es todo.  Est√° escrito muchas letras, parece que no todo es f√°cil </h4><br>  De hecho, lo principal es entender una cosa muy simple.  Gracias a la tecnolog√≠a Docker, podemos ejecutar todas nuestras aplicaciones de trabajo en un solo espacio, pero con diferentes configuraciones para Xdebug.  Cada aplicaci√≥n funciona en su propio contenedor, y tenemos que prescribir cuidadosamente la configuraci√≥n de cada aplicaci√≥n en PhpStorm. <br><br>  Y a la salida tenemos una foto maravillosa. <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clonamos</a> un repositorio en un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> .  Crear un archivo .env con variables <br> <code>USER_ID= uid <br> GROUP_ID= gid <br></code> <br><br>  2. Registramos los nodos first.loc y two.loc en el archivo / etc / hosts <br><br><pre> <code class="plaintext hljs">127.0.0.1 first.loc 127.0.0.1 two.loc</code> </pre> <br>  3. En la carpeta git, ejecute el <code>docker-compose up -d</code> <br><br>  4. Configuramos ambos proyectos first.loc y two.loc en PhpStorm, como se describi√≥ anteriormente, y ejecutamos ambos proyectos en PhpStorm.  Es decir  Tenemos dos ventanas PhpStorm abiertas, con dos proyectos, cada uno de ellos escucha las conexiones entrantes (el tel√©fono est√° encendido). <br><br>  5. En el proyecto two.loc colocamos un punto de interrupci√≥n en la segunda l√≠nea, por ejemplo.  En el primer proyecto first.loc, comenzamos la solicitud http desde el archivo http.http <br><br>  ¬°Y he aqu√≠!  Nos lanzan al segundo proyecto, en nuestro punto de quiebre. <br><br>  Para depurar scripts de consola, hacemos exactamente lo mismo.  Activamos las escuchas telef√≥nicas para escuchas telef√≥nicas, establecemos un punto de interrupci√≥n, vamos al contenedor correcto, ejecutamos el script correcto. <br><br>  Algo como: <br><br><pre> <code class="bash hljs">alex@alex-Aspire-ES1-572 ~ $ php71first www-data@a0e771cfac72:~$ cdf www-data@a0e771cfac72:~/first.loc$ php index.php I<span class="hljs-string"><span class="hljs-string">'am first host www-data@a0e771cfac72:~/first.loc$</span></span></code> </pre><br>  Donde php71first es el alias en la m√°quina host: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> php71first=<span class="hljs-string"><span class="hljs-string">"cd ~/docker_git &amp;&amp; docker-compose exec php71-first bash"</span></span></code> </pre> <br>  <code>cdf</code> : un alias que funciona en un contenedor.  Escrib√≠ anteriormente que prefiero usar alias para comunicarme con contenedores. <br><br>  Eso es todo, cr√≠ticas constructivas, los comentarios son bienvenidos. <br><br>  PD: Me gustar√≠a expresar mi profunda gratitud a Denis Bondar por su art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PhpStorm + Docker + Xdebug</a> , que fue el punto de partida para escribir este tutorial. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473184/">https://habr.com/ru/post/473184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473156/index.html">C√≥mo evaluar el conocimiento en la pr√°ctica, recibir beneficios por admisi√≥n al programa de maestr√≠a e invitaciones laborales</a></li>
<li><a href="../473160/index.html">Marca personal para ayudar a las empresas: 8 pasos para crear un concepto</a></li>
<li><a href="../473166/index.html">Compilaci√≥n de FFmpeg en WebAssembly (= ffmpeg.js): Parte 3 - Convertir avi a mp4</a></li>
<li><a href="../473176/index.html">Es hora de hacer una nueva Terminal de Windows profiles.json</a></li>
<li><a href="../473182/index.html">El principio de aumentar la flexibilidad de las caracter√≠sticas de los ICE automotrices modernos</a></li>
<li><a href="../473186/index.html">Dise√±o no trivial de elementos en flexbox sin solicitudes de medios</a></li>
<li><a href="../473190/index.html">Proyecto TAME metformina: las opiniones est√°n divididas</a></li>
<li><a href="../473192/index.html">La electricidad se puede obtener de la nieve.</a></li>
<li><a href="../473196/index.html">Convirtiendo guiones en hermosas herramientas de aprendizaje autom√°tico</a></li>
<li><a href="../473198/index.html">Motor paso a paso. Probar el chip L9110</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>