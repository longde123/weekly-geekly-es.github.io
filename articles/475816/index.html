<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚èØÔ∏è ü•Ç üë®üèæ‚Äçüî¨ Xcode 11 y XCFrameworks: un nuevo formato de empaquetado de framework üçô üÜö üë©üèº‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la vida de muchas compa√±√≠as que tienen y desarrollan su propia pila de bibliotecas y componentes, llega un momento en que el volumen de esta pila s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Xcode 11 y XCFrameworks: un nuevo formato de empaquetado de framework</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/475816/"><p><img src="https://habrastorage.org/webt/nd/9g/nt/nd9gntw7zmcbecyibkxwc8aheno.png"></p><br><p>  En la vida de muchas compa√±√≠as que tienen y desarrollan su propia pila de bibliotecas y componentes, llega un momento en que el volumen de esta pila se vuelve dif√≠cil de mantener. </p><br><p>  En el caso del desarrollo para la plataforma iOS, y en general, el ecosistema de Apple, hay dos opciones para conectar bibliotecas como dependencias: </p><br><ol><li>  Rec√≥jalos cada vez que construyas la aplicaci√≥n. </li><li>  Rec√≥jalos por adelantado utilizando las dependencias ya recopiladas. </li></ol><br><p>  Al elegir el segundo enfoque, resulta l√≥gico usar sistemas CI / CD para ensamblar bibliotecas en artefactos listos para usar. </p><br><p>  Sin embargo, la necesidad de construir bibliotecas para varias plataformas o arquitecturas de procesador en el ecosistema de Apple, a menudo requiere operaciones no siempre triviales, tanto al construir la biblioteca como al producto final que la usa. </p><br><p>  En este contexto, fue dif√≠cil no darse cuenta y fue extremadamente interesante estudiar una de las innovaciones de Apple presentadas en WWDC 2019 como parte de la presentaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Binary Frameworks en Swift</a> : el formato de empaque de los marcos es XCFramework. </p><br><p>  XCFramework tiene varias ventajas sobre los enfoques establecidos: </p><br><ol><li>  Empaque de dependencia para todas las plataformas y arquitecturas de destino en un solo paquete listo para usar. </li><li>  Paquete de conexi√≥n en formato XCFramework, como una dependencia √∫nica para todas las plataformas y arquitecturas de destino. </li><li>  No es necesario construir un marco gordo / universal. </li><li>  No es necesario deshacerse del segmento x86_64 antes de cargar las aplicaciones finales en la AppStore. </li></ol><br><p>  En este art√≠culo, explicaremos por qu√© se introdujo este nuevo formato, qu√© es y tambi√©n qu√© le da al desarrollador. </p><a name="habracut"></a><br><h1 id="kak-poyavilsya-novyy-format">  C√≥mo apareci√≥ el nuevo formato </h1><br><p>  Apple lanz√≥ anteriormente el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">administrador de</a> dependencias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Swift Package Manager</a> . <br>  La conclusi√≥n es que Swift PM le permite entregar bibliotecas en forma de c√≥digo fuente abierto con una descripci√≥n de las dependencias. </p><br><p>  Desde la perspectiva del desarrollador que suministra la biblioteca, me gustar√≠a destacar dos aspectos de Swift PM. </p><br><ul><li>  El inconveniente obvio es que, por una raz√≥n u otra, no todos los proveedores de bibliotecas desean abrir su c√≥digo fuente a los consumidores. </li><li>  Una ventaja obvia: al compilar dependencias de fuentes, nos deshacemos de la necesidad de observar la compatibilidad binaria de las bibliotecas. </li></ul><br><p>  XCFramework Apple ofrece como un nuevo formato binario para bibliotecas de envases, consider√°ndolo como una alternativa a los paquetes Swift. </p><br><p>  Este formato, as√≠ como la capacidad de conectar la biblioteca ensamblada en XCFramework, est√° disponible a partir de Xcode 11 y sus versiones beta. </p><br><h1 id="chto-izsebya-predstavlyaet-xcframework">  ¬øQu√© es XCFramework? </h1><br><p>  En esencia, XCFramework es una nueva forma de empaquetar y entregar bibliotecas, en sus diversas versiones. </p><br><p>  Entre otras cosas, el nuevo formato tambi√©n permite el empaquetado de bibliotecas est√°ticas junto con sus archivos de encabezado, incluidos los escritos en C / Objective-C. </p><br><p>  Considere el formato con m√°s detalle. </p><br><ol><li><p>  <strong>Empaque de dependencia para todas las plataformas y arquitecturas de destino en un solo paquete listo para usar</strong> </p><br><p> Todos los conjuntos de bibliotecas para cada una de las plataformas y arquitecturas de destino ahora se pueden empaquetar en un solo paquete con la extensi√≥n .xcframework. <br>  Sin embargo, para esto, en este momento, debe usar scripts para invocar el <code>xcodebuild</code> con el nuevo <code>-create-xcframework</code> para Xcode 11. </p><br><p>  El proceso de ensamblaje y empaque ser√° considerado m√°s a fondo. </p><br></li><li><p>  <strong>Paquete de conexi√≥n en formato XCFramework, como una dependencia √∫nica para todas las plataformas y arquitecturas de destino</strong> </p><br><p>  Dado que el paquete .xcframework contiene todas las opciones de ensamblaje de dependencias necesarias, no debemos preocuparnos por su arquitectura y plataforma de destino. </p><br><p>  En Xcode 11, una biblioteca empaquetada en .xcframework est√° conectada como un .framework normal. <br>  M√°s espec√≠ficamente, esto se puede lograr de las siguientes maneras en la configuraci√≥n de destino: </p><br><ul><li>  agregar .xcframework a la secci√≥n "Marcos y bibliotecas" de la pesta√±a "General" </li><li>  agregar .xcframework a "Vincular binario con bibliotecas" en la pesta√±a "Fases de compilaci√≥n" </li></ul><br></li><li><p>  <strong>No es necesario construir un marco gordo / universal</strong> </p><br><p>  Anteriormente, para admitir varias bibliotecas y varias arquitecturas en una biblioteca de complementos, era necesario preparar los llamados marcos universales o gordos. <br>  Esto se hizo usando el <code>lipo</code> para coser todas las opciones del marco ensamblado en un solo binario grueso. </p><br><p>  Se pueden encontrar m√°s detalles sobre esto, por ejemplo, en los siguientes art√≠culos: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo construir su propio marco de iOS</a> (habr.ru) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Escribir marco universal personalizado en Xcode 10.2 y iOS 12</a> (medium.com) </li></ul><br></li><li><p>  <strong>No es necesario deshacerse del segmento x86_64 antes de cargar aplicaciones finales en la AppStore</strong> </p><br><p>  Por lo general, dicho segmento se utiliza para proporcionar bibliotecas en el simulador de iOS. <br>  Cuando intenta descargar una aplicaci√≥n con dependencias que contienen un segmento x86_64 en la AppStore, puede encontrar el conocido error <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ITMS-90087</a> . </p><br></li></ol><br><h1 id="sozdanie-iupakovka-xcframework-teoriya">  Crear y empaquetar XCFramework: teor√≠a </h1><br><p>  En la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">presentaci√≥n</a> mencionada anteriormente, se requieren varios pasos necesarios para ensamblar y empaquetar la biblioteca en formato XCFramework: </p><br><ol><li><p>  <strong>Preparaci√≥n del proyecto</strong> </p><br><p>  Para comenzar, en todas las √°reas de destino del proyecto que son responsables de construir la biblioteca para las plataformas de destino, debe habilitar la nueva configuraci√≥n Construir bibliotecas para distribuci√≥n para Xcode 11. </p><br><p><img src="https://habrastorage.org/webt/wl/vs/ak/wlvsakcfadbfihsrebpvtey6uec.png"></p><br></li><li><p>  <strong>Montaje de proyectos para plataformas y arquitecturas de destino.</strong> </p><br><p>  A continuaci√≥n, tenemos que recopilar todos los objetivos para las plataformas y arquitecturas de destino. <br>  Consideremos ejemplos de comandos de llamada utilizando el ejemplo de una configuraci√≥n de proyecto espec√≠fica. </p><br><p>  Digamos que en el proyecto tenemos dos esquemas "XCFrameworkExample-iOS" y "XCFramework-macOS". </p><br><p><img src="https://habrastorage.org/webt/on/ug/s8/onugs8ismapkgs0hngnvdixne9m.png"></p><br><p>  Tambi√©n en el proyecto hay dos objetivos que recopilan la biblioteca para iOS y macOS. </p><br><p><img src="https://habrastorage.org/webt/m8/li/dj/m8lidjpvlt6svz9nc052imlcnik.png"></p><br><p>  Para construir todas las configuraciones de biblioteca requeridas, necesitamos recolectar ambos objetivos usando los esquemas correspondientes. <br>  Sin embargo, para iOS, necesitamos dos ensamblajes: uno para dispositivos finales (ARM) y el otro para el simulador (x86_64). </p><br><p>  En total, necesitamos recopilar 3 marcos. </p><br><p>  Para hacer esto, puede usar el comando <code>xcodebuild</code> : </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO</span></span></code> </pre> <br><p>  Como resultado, obtuvimos 3 marcos ensamblados, que empacaremos en el contenedor .xcframework. </p><br></li><li><p>  <strong>Embalaje ensamblado .framework en .xcframework</strong> </p><br><p>  Puede hacer esto con el siguiente comando: </p><br><pre> <code class="bash hljs">xcodebuild -create-xcframework \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -output <span class="hljs-string"><span class="hljs-string">"./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><p>  Puede haber muchas <code>-framework</code> par√°metros de <code>-framework</code> que apuntan a todos los ensamblados .framework que desea adjuntar al contenedor .xcframework. </p><br></li></ol><br><h1 id="podgotovka-proekta-biblioteki-dlya-buduschey-sborki-iupakovki-xcframework">  Preparaci√≥n de un proyecto de biblioteca para el futuro ensamblaje y empaque de XCFramework </h1><br><p>  <strong>TL; DR: el proyecto terminado se puede descargar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde el repositorio en Github</a> .</strong> </p><br><p>  Como ejemplo, estamos implementando una biblioteca que estar√° disponible para dos plataformas: iOS y macOS. <br>  Utilizaremos la configuraci√≥n del proyecto mencionada en la secci√≥n anterior del art√≠culo: dos esquemas y dos objetivos Framework correspondientes para plataformas iOS y macOS. </p><br><p>  ¬øLa biblioteca misma nos proporcionar√° una extensi√≥n simple para <code>String?</code>  ( <code>Optional where Wrapped == String</code> ), con una sola propiedad. </p><br><p>  Llamamos a esta propiedad <code>isNilOrEmpty</code> y, como su nombre lo indica, ¬ønos <code>isNilOrEmpty</code> cuando est√© dentro de <code>String?</code>  valor perdido o la cadena almacenada dentro est√° vac√≠a. </p><br><p>  El c√≥digo se puede implementar de la siguiente manera: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapped</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isNilOrEmpty: <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> .some(string) = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string.isEmpty } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><p>  Procedemos directamente a la creaci√≥n y configuraci√≥n del proyecto. </p><br><ol><li><p>  <strong>Para empezar, necesitamos crear un proyecto del tipo "Marco" para una de las dos plataformas de destino que elija: iOS o macOS.</strong> </p><br><p>  Puede hacer esto en Xcode a trav√©s del elemento de men√∫ ‚ÄúArchivo‚Äù =&gt; ‚ÄúNuevo‚Äù =&gt; ‚ÄúProyecto‚Äù, o usando el atajo de teclado <strong>‚áß +  + N</strong> (por defecto). </p><br><p>  A continuaci√≥n, en la parte superior del cuadro de di√°logo, seleccione la plataforma deseada (iOS o macOS), seleccione el tipo de proyecto de Framework y vaya al bot√≥n "Siguiente". </p><br><p>  En la siguiente pantalla, debemos establecer el nombre del proyecto en el campo "Nombre del producto". </p><br><p>  Alternativamente, puede usar el nombre "base" del proyecto, en la configuraci√≥n mencionada anteriormente es "XCFrameworkExample". </p><br><p>  En el futuro, al configurar el proyecto, agregaremos sufijos que denoten plataformas al nombre base utilizado en el nombre del objetivo. </p><br></li><li><p>  <strong>Despu√©s de eso, debe crear otro Target de tipo "Framework" en el proyecto para otra de las plataformas enumeradas (excepto para la que se cre√≥ originalmente el proyecto).</strong> </p><br><p>  Para hacer esto, use el elemento de men√∫ "Archivo" =&gt; "Nuevo" =&gt; "Destino". </p><br><p>  A continuaci√≥n, seleccionamos en el di√°logo otra (relativa a la seleccionada en el p√°rrafo 1) de las dos plataformas, despu√©s de lo cual seleccionamos nuevamente el tipo de proyecto "Marco". </p><br><p>  Para el campo "Nombre del producto", podemos usar inmediatamente el nombre con el sufijo de la plataforma, para lo cual agregamos objetivo en este p√°rrafo.  Entonces, si la plataforma es macOS, entonces el nombre podr√≠a ser "XCFrameworkExample-macOS" (% base_name% -% platform%). </p><br></li><li><p>  <strong>Configuraremos objetivos y gr√°ficos para que sean m√°s f√°ciles de distinguir.</strong> </p><br><p>  Primero, cambie el nombre de nuestros esquemas y los objetivos asociados a ellos para que sus nombres reflejen las plataformas, por ejemplo, as√≠: </p><br><ul><li>  "XCFrameworkExample-iOS" </li><li>  "XCFrameworkExample-macOS" </li></ul><br></li><li><p>  <strong>Luego, agregue el archivo con el c√≥digo de nuestra extensi√≥n para <code>String?</code> al proyecto .swift <code>String?</code></strong> </p><br><p>  Agregue un nuevo archivo .swift al proyecto con el nombre "Opcional.swift". <br>  Y en el archivo en s√≠ ponemos la extensi√≥n mencionada anteriormente para <code>Optional</code> . </p><br><p>  Es importante no olvidar agregar el archivo de c√≥digo a ambos objetivos. </p><br><p><img src="https://habrastorage.org/webt/qp/eh/qs/qpehqsezf7pb-pg4pc8wao7l4cs.png"></p><br></li></ol><br><p>  Ahora tenemos un proyecto que podemos armar en XCFramework usando los comandos de la etapa anterior. </p><br><h1 id="process-sborki-iupakovki-biblioteki-vformat-xcframework">  El proceso de ensamblar y empaquetar la biblioteca en formato .xcframework </h1><br><p>  En esta etapa, puede usar el script bash en un archivo separado para construir la biblioteca y empaquetarla en el formato .xcframework.  Adem√°s, esto permitir√° en el futuro utilizar estos desarrollos para integrar la soluci√≥n en el sistema CI / CD. </p><br><p>  El script parece feo y simple y, de hecho, re√∫ne los comandos de ensamblaje mencionados anteriormente: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # ---------------------------------- # BUILD PLATFORM SPECIFIC FRAMEWORKS # ---------------------------------- # iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO # ------------------- # PACKAGE XCFRAMEWORK # ------------------- xcodebuild -create-xcframework \ -framework "./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -output "./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><h1 id="soderzhimoe-xcframework">  Contenido de Xcframework </h1><br><p>  Como resultado de la secuencia de comandos de ensamblaje del p√°rrafo anterior del art√≠culo, obtenemos el codiciado paquete .xcframework, que se puede agregar al proyecto. </p><br><p>  Si miramos dentro de este paquete, que, como .framework, es esencialmente una carpeta simple, veremos la siguiente estructura: </p><br><p><img src="https://habrastorage.org/webt/pg/sr/g6/pgsrg6uc4prxhairmnoy57p9wus.png"></p><br><p>  Aqu√≠ vemos que dentro de .xcframework hay ensamblados en formato .framework, desglosados ‚Äã‚Äãpor plataforma y arquitectura.  Tambi√©n para describir el contenido del paquete .xcframework, dentro hay un archivo Info.plist. </p><br><div class="spoiler">  <b class="spoiler_title">El archivo Info.plist tiene los siguientes contenidos</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AvailableLibraries<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-x86_64-simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatformVariant<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos-x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundlePackageType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XFWK<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkFormatVersion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Puede observar que para la tecla "CFBundlePackageType", en contraste con el formato .framework, se usa el nuevo valor "XFWK", no "FMWK". </p><br><h1 id="itogi">  Resumen </h1><br><p>  Por lo tanto, el formato de empaquetado de la biblioteca en XCFramework no es m√°s que un contenedor normal para las bibliotecas compiladas en formato .framework. </p><br><p>  Sin embargo, este formato le permite almacenar por separado y usar de forma independiente cada una de las arquitecturas y plataformas presentadas en su interior.  Esto elimina una serie de problemas inherentes al enfoque generalizado para construir marcos gordos / universales. </p><br><p>  Sea como fuere, en este momento, hay un matiz importante con respecto al tema del uso de XCFramework en proyectos reales: gesti√≥n de dependencia, que Apple no ha implementado en formato XCFramework. </p><br><p>  Para estos fines, se utilizan habitualmente Swift PM, Carthage, CocoaPods y otros sistemas de gesti√≥n de dependencias y sus conjuntos.  Por lo tanto, no es sorprendente que el soporte para el nuevo formato ya est√© en marcha precisamente en los proyectos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CocoaPods</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Carthage</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/475816/">https://habr.com/ru/post/475816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../475804/index.html">Importe informes de llamadas programadas de CoMagic a BigQuery en un horario usando Google Cloud Functions</a></li>
<li><a href="../475808/index.html">GitHub ha creado un repositorio milenario en el que guardar√° repositorios de c√≥digo abierto para la posteridad</a></li>
<li><a href="../475810/index.html">C√≥mo se exportar√°n 82.000 toneladas de existencias nucleares de la URSS desde los Urales</a></li>
<li><a href="../475812/index.html">C√≥mo permanecer loco en Open Space: hacer una nueva oficina desde cero</a></li>
<li><a href="../475814/index.html">Transformaci√≥n de Docker: venta de Docker Enterprise en Mirantis y una ruta actualizada</a></li>
<li><a href="../475826/index.html">Por qu√© no se puede confiar en las calificaciones de Amazon (y otras)</a></li>
<li><a href="../475830/index.html">Consola retro port√°til de bricolaje</a></li>
<li><a href="../475832/index.html">Las expresiones de medios CSS son m√°s que ancho m√°ximo</a></li>
<li><a href="../475834/index.html">Scrum no te ayudar√°. Entendemos por qu√©</a></li>
<li><a href="../475836/index.html">Entrevista con Arthur Khachuyan: ¬øc√≥mo calcular un multimillonario en las redes sociales?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>