<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëáüèø üé¶ üññüèø CCTV-Kameras in der Praxis hacken üë©üèæ‚Äçüè´ üçÖ ‚è©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fans von Ocean's Eleven Friends m√ºssen den Rahmen erkannt haben, den wir zur Illustration dieses Artikels gew√§hlt haben. Der Moment, in dem die harten...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>CCTV-Kameras in der Praxis hacken</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/devline/blog/405083/">  Fans von Ocean's Eleven Friends m√ºssen den Rahmen erkannt haben, den wir zur Illustration dieses Artikels gew√§hlt haben.  Der Moment, in dem die harten Jungs das analoge Signal der CCTV-Kameras des Casinos gekonnt ersetzten, kam vielen in den Sinn.  Einige versuchen dies sogar im wirklichen Leben. <br><br><img src="https://habrastorage.org/web/121/cd6/5f9/121cd65f9c634829977ee5eb5de23af4.jpg" alt="Bild"><br><br>  Die Technologien haben sich ge√§ndert, jetzt werden IP-Kameras gegen√ºber Analoga bevorzugt. Methoden zum Aufl√∂sen werden sp√§ter ausf√ºhrlich erl√§utert. <br><br><h3>  Wenn Sie nicht paranoid sind, bedeutet dies nicht, dass Sie nicht beobachtet werden </h3><br>  Die meisten Hacker tun dies zum Spa√ü oder um im Internet ein bisschen Ruhm zu erlangen.  Sie verwenden bekannte "L√∂cher" in Kamera-Unterst√ºtzungssystemen und ver√∂ffentlichen ihrer Meinung nach lustige Videos in beliebten Internet-Ressourcen.  YouTube ist voller <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√§hnlicher</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Videos</a> . <br><br>  Wir werden die schwerwiegenderen Folgen der Sicherheitsanf√§lligkeit betrachten, n√§mlich wenn der Cracker sich selbst und sein Eindringen in das System nicht verr√§t.  Ein solcher Angriff wird normalerweise sorgf√§ltig im Voraus, eine Woche oder sogar einen Monat vor dem Hack geplant. <br><br>  Wie in unserem Beispiel zu Ocean's Eleven Friends werden wir √ºber das Ersetzen eines Streams in Video√ºberwachungssystemen sprechen, nicht nur eines analogen, sondern eines digitalen Signals, n√§mlich eines RTSP-Streams. <br><a name="habracut"></a><br>  Da alle Informationen in diesem Artikel informativer Natur sind und in erster Linie darauf abzielen, Sicherheitsfehler beim Aufbau eines Video√ºberwachungssystems zu beseitigen, empfehlen wir nicht, die Sicherheitsanf√§lligkeit zu verwenden, die sp√§ter erl√§utert wird.  Aus diesem Grund wird das Hacken des Video√ºberwachungsnetzwerks selbst nur oberfl√§chlich betrachtet, und die beschriebenen Methoden umfassen den offenen Zugriff auf das Netzwerk des Unternehmens oder der Privatperson.  Denken Sie daran, dass der unbefugte Zugriff auf Daten m√∂glicherweise strafrechtlich verfolgt wird. <br><br>  Die Erfahrung unseres Unternehmens zeigt, dass das Thema sehr relevant ist, da bei der Inbetriebnahme eines Video√ºberwachungssystems viele Menschen Kameras √ºber RTSP-Links an ihr System anschlie√üen.  Um Zeit zu sparen, entweder aus Unwissenheit oder um sicherzugehen, dass dies notwendig ist, denken viele nicht einmal daran, Kennw√∂rter zu √§ndern oder zu sehen, welche Sicherheitseinstellungen ihre Kamera unterst√ºtzt. <br><br>  √úbrigens ist RTSP (Real Time Streaming Protocol) ein Protokoll, mit dem Sie das Streaming von Videos in Echtzeit steuern k√∂nnen.  Alles was wir dar√ºber wissen m√ºssen ist, dass wir mit Hilfe des RTSP-Links den Videostream von der Kamera nehmen. <br><br>  Schlie√ülich m√ºssen wir <b>√ºben</b> , n√§mlich nach dem Plan, nach dem wir handeln werden: <br><br>  1. Abrufen des RTSP-Links f√ºr die Kamera, deren Stream wir ersetzen m√∂chten. <br>  2. Vorbereiten der Videodatei f√ºr die nachfolgende √úbertragung. <br>  3. Senden Sie die aufgezeichnete Datei. <br>  4. Schutz gegen Sekund√§rstromaustausch. <br><br><h3>  RTSP-URI-Stream abrufen </h3><br>  Um das Signal von der Kamera zu ersetzen, m√ºssen Sie zuerst den Videostream finden, den wir ben√∂tigen.  Dies erfordert eine Verbindung √ºber das RTSP-Protokoll.  Die Kamera √ºbertr√§gt normalerweise mehrere Bilder (hohe und niedrige Aufl√∂sung).  Die erste dient zur Aufnahme und die zweite zur √úbertragung auf Video√ºberwachungsbildschirmen.  Die minimale Aufl√∂sung (meistens 320 x 240 Pixel) reduziert die Belastung des Ger√§ts.  F√ºr jeden RTSP-Stream wird die Verbindung h√§ufig durch eine Ziffer im Schl√ºssel unterschieden. <br><br>  Verschiedene Kameras k√∂nnen unterschiedliche RTSP-Verbindungen haben, aber die allgemeine Ansicht ist ungef√§hr die folgende: <br>  <b>rtsp: // [Login: Passwort @] IP-Adresse: RTSP-Port [/ Schl√ºssel]</b> . <br><br>  Die Dekodierung ist wie folgt: <br><br><ul><li>  Login und Passwort - diejenigen, die f√ºr den Zugriff auf die Kamera verwendet werden (m√∂glicherweise nicht); </li><li>  Wenn der Link den Benutzernamen und das Passwort enth√§lt, wird nach ihnen das @ -Symbol angezeigt, um Autorisierung und IP-Adresse zu trennen. </li><li>  Der RTSP-Port, √ºber den Streaming-Videosteuerungsbefehle √ºbertragen werden, ist standardm√§√üig 554; </li><li>  Der Schl√ºssel ist ein eindeutiger Bestandteil der RTSP-Verbindung, der je nach Hersteller und Modell der Kamera variieren kann. Beispiel: <br>  /? user = admin &amp; password = admin &amp; channel = channel_number &amp; stream = stream_number.sdp <br>  /play1.sdp - anstelle von "1" wird die Stream-Nummer angezeigt; <br>  / live / ch00_0 00 - Kanalnummer, 0 - Streamnummer; <br>  / channel1 - anstelle von "1" wird die Stream-Nummer angezeigt. </li></ul><br>  <b>Wie finde ich einen RTSP-Link heraus, ohne Zugriff auf die Kamera zu haben?</b>  Ein paar einfache M√∂glichkeiten: <br><br>  1. Suchen Sie den Link auf der Website des Kameraherstellers. <br>  2. Durchsuchen Sie das Internet nach Websites, die Links f√ºr verschiedene Kameramodelle enthalten. Ein Beispiel f√ºr solche Websites finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br>  3. Laden Sie das Benutzerhandbuch auf der Website des Herstellers herunter und finden Sie dort die erforderlichen Informationen. <br><br>  F√ºr F√§lle, in denen keine der einfachen Methoden geholfen hat, ist es etwas komplizierter.  Hier wird mindestens Zugriff auf das Netzwerk ben√∂tigt, in dem sich die Kamera befindet.  Da die meisten modernen Kameras ONVIF unterst√ºtzen, k√∂nnen wir die RTSP-Verbindung mithilfe dieses Protokolls ermitteln. <br>  Senden Sie dazu standardm√§√üig mehrere Anfragen ohne Autorisierung oder mit Autorisierung auf der vorgeschlagenen Kamera, z. B. "admin: admin" oder "admin: 12345".  In der Praxis gab es √ºbrigens Kameras mit einem g√ºltigen IP-Adressfilter und einem nicht standardm√§√üigen Login und Passwort. Aufgrund von Fehlern in der Firmware beim Zugriff √ºber das ONVIF-Protokoll wurden jedoch weder die Autorisierung noch der Filter √ºberpr√ºft. <br><br>  <b>Wie erhalte ich die gew√ºnschte Verbindung zu beiden Streams von der Kamera √ºber das ONVIF-Protokoll?</b> <br><br><div class="spoiler">  <b class="spoiler_title">1. Mit dem Befehl GetProfiles ermitteln wir den Namen des Profils, dessen URL wir ben√∂tigen</b> <div class="spoiler_text"><pre> POST / onvif / media_service HTTP / 1.1
 Host: 192.168.1.77
 User-Agent: gSOAP / 2.8
 Inhaltstyp: Anwendung / Seife + XML;  Zeichensatz = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Inhaltsl√§nge: 2120
 Verbindung: am Leben bleiben
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetProfiles"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Envelope xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    √úberspringen Sie die Beschreibung des gesamten Namespace.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Body&gt;
         &lt;trt: GetProfiles /&gt;
     &lt;/ SOAP-ENV: Body&gt;
 &lt;/ SOAP-ENV: Umschlag&gt;
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. In der erhaltenen langen Antwort finden wir eine Zeile mit dem Namen des ersten und zweiten Profils</b> <div class="spoiler_text"><pre> HTTP / 1.1 200 OK
 Server: gSOAP / 2.8
 Inhaltstyp: Anwendung / Seife + XML;  Zeichensatz = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Inhaltsl√§nge: 17405
 Verbindung: schlie√üen<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Envelope xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    √úberspringen Sie die Beschreibung des gesamten Namespace.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Body&gt;
         &lt;trt: GetProfilesResponse&gt;
             &lt;trt: Profile fixed = "true" token = "profile_cam1_stream1"&gt;
                 &lt;tt: Name&gt; profile_cam1_stream1 &lt;/ tt: Name&gt;
                 &lt;tt: VideoSourceConfiguration token = "videosource_config_cam1"&gt;
                     &lt;tt: Name&gt; videosource_config_cam1 &lt;/ tt: Name&gt;
                     .
                     Profilbeschreibung √ºberspringen.
                     .
             &lt;/ trt: Profile&gt;
             &lt;trt: Profile fixed = "true" token = "profile_cam1_stream2"&gt;
                 &lt;tt: Name&gt; profile_cam1_stream2 &lt;/ tt: Name&gt;
                 .
                 Wir √ºberspringen die Beschreibung des zweiten Profils.
                 .
             &lt;/ trt: Profile&gt;
             .
             Wir ber√ºcksichtigen das dritte Profil nicht.
             .
         &lt;/ trt: GetProfilesResponse&gt;
     &lt;/ SOAP-ENV: Body&gt;
 &lt;/ SOAP-ENV: Umschlag&gt;<font></font>
<font></font>
 - profile_cam1_stream1 ist der Name des ersten Profils auf der Kamera.
 - profile_cam1_stream2 ist der Name des zweiten Profils auf der Kamera.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Jetzt m√ºssen Sie mit dem Befehl GetStreamUri rtsp uri f√ºr diese Profile anfordern und das gew√ºnschte Profil im Feld ProfileToken angeben</b> <div class="spoiler_text"><pre> Beispiel f√ºr den ersten Thread:<font></font>
<font></font>
 POST / onvif / media_service HTTP / 1.1
 Host: 192.168.1.77
 User-Agent: gSOAP / 2.8
 Inhaltstyp: Anwendung / Seife + XML;  Zeichensatz = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Inhaltsl√§nge: 2479
 Verbindung: am Leben bleiben
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Envelope xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    √úberspringen Sie die Beschreibung des gesamten Namespace.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Body&gt;
         &lt;trt: GetStreamUri&gt;
             &lt;trt: StreamSetup xsi: type = "tt: StreamSetup"&gt;
                 &lt;tt: Stream xsi: type = "tt: StreamType"&gt; RTP-Unicast &lt;/ tt: Stream&gt;
                 &lt;tt: Transport xsi: type = "tt: Transport"&gt;
                     &lt;tt: Protokoll xsi: type = "tt: TransportProtocol"&gt; UDP &lt;/ tt: Protokoll&gt;
                 &lt;/ tt: Transport&gt;
             &lt;/ trt: StreamSetup&gt;
             &lt;trt: ProfileToken xsi: type = "tt: ReferenceToken"&gt; profile_cam1_stream1 &lt;/ trt: ProfileToken&gt;
         &lt;/ trt: GetStreamUri&gt;
     &lt;/ SOAP-ENV: Body&gt;
 &lt;/ SOAP-ENV: Umschlag&gt;<font></font>
<font></font>
 Als Antwort erhalten wir den Link, den wir brauchen:<font></font>
<font></font>
 HTTP / 1.1 200 OK
 Server: gSOAP / 2.8
 Inhaltstyp: Anwendung / Seife + XML;  Zeichensatz = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Inhaltsl√§nge: 3701
 Verbindung: schlie√üen<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Envelope xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    √úberspringen Sie die Beschreibung des gesamten Namespace.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Body&gt;
         &lt;trt: GetStreamUriResponse&gt;
             &lt;trt: MediaUri&gt;
                 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/1 &lt;/ tt: Uri&gt;
                 &lt;tt: InvalidAfterConnect&gt; false &lt;/ tt: InvalidAfterConnect&gt;
                 &lt;tt: InvalidAfterReboot&gt; false &lt;/ tt: InvalidAfterReboot&gt;
                 &lt;tt: Timeout&gt; PT0S &lt;/ tt: Timeout&gt;
             &lt;/ trt: MediaUri&gt;
         &lt;/ trt: GetStreamUriResponse&gt;
     &lt;/ SOAP-ENV: Body&gt;
 &lt;/ SOAP-ENV: Umschlag&gt;<font></font>
<font></font>
 Wir machen dasselbe f√ºr den zweiten Stream und erhalten den Link:
 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/2 &lt;/ tt: Uri&gt;
</pre><br></div></div><br><h3>  Schreiben Sie den RTSP-Stream in die Datei </h3><br>  Wenn wir die erforderlichen RTSP-Links erhalten haben, m√ºssen wir ein mehrst√ºndiges Video aufnehmen.  Vergessen Sie nicht, dass in modernen Systemen Dual-Threading verwendet wird. Sie m√ºssen daher beide Streams gleichzeitig aufzeichnen. <br><br>  Sie k√∂nnen einen Videostream mithilfe des RTSP-Protokolls mit verschiedener Software aufzeichnen.  Betrachten Sie die beliebtesten: <b>ffmpeg, gstreamer und vlc</b> . <br><br><div class="spoiler">  <b class="spoiler_title">1. Stream-Aufnahme √ºber ffmpeg</b> <div class="spoiler_text"><pre> $ man ffmpeg
 Wir interessieren uns f√ºr:
 - vcodec copy - Video in Datei kopieren;
 - Acodec-Kopie - Audio in eine Datei kopieren;
 - rtsp_transport tcp - Auswahl einer Methode zur √úbertragung eines Streams;
 - r 25 - Einstellen der Bildrate pro Sekunde;
 - Kopien - Kopieren von Zeitstempeln;
 - start_at_zero - Zeitstempel ab 00: 00: 00: 000 kopieren<font></font>
<font></font>
 Wir ersetzen unseren RTSP-Link und geben durch Kopieren den Pfad und den Namen der Datei an, in die der Datensatz gehen soll
 % ffmpeg -i rtsp: //192.168.1.77: 554 / snl / live / 1/1 -copyts -start_at_zero -rtsp_transport tcp -r 25 -vcodec copy -acodec copy /home/line/example/1.avi
</pre><br><img src="https://habrastorage.org/web/6a1/d19/f7f/6a1d19f7fe8b4153823d0307adccf174.png" alt="Bild"><br><br>  Das Schreiben in eine Datei hat begonnen. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. Aufnahme √ºber vlc</b> <div class="spoiler_text"><pre> Mit dem Befehl k√∂nnen Sie sich mit den Befehlen vertraut machen, die der vlc Media Player uns bietet
 $ vlc ‚Äìh.<font></font>
<font></font>
 Wir interessieren uns f√ºr:
 - Sout = # Datei {Pfad} - Zeigen Sie auf die Datei, in die wir das Video kopieren m√∂chten.
 - rtsp-tcp - empfange rtsp von tcp;
 - rtsp-frame-buffer-size = 1000 - Puffer, damit das Video w√§hrend der Wiedergabe nicht br√∂ckelt;
 - h264-fps = 25 - Add-On f√ºr 25 Frames.<font></font>
<font></font>
 Ersetzen Sie unsere Daten und f√ºhren Sie sie aus
 $ cvlc rtsp: //192.168.1.77: 554 / snl / live / 1/1 --rtsp-tcp --rtsp-frame-buffer-size = 1000 --h264-fps = 25: Sout = # file {dst = /home/line/example/1.avi}.<font></font>
<font></font>
 Das vlc-Fenster wird ge√∂ffnet und die Aufnahme wird gestartet. Wenn Sie das Fenster schlie√üen, wird die Aufnahme gestoppt.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Aufnahme √ºber gstreamer</b> <div class="spoiler_text"><pre> Informationen zur Arbeit mit gstreamer finden Sie &lt;a href="https://gstreamer.freedesktop.org/documentation/plugins.html"&gt; hier &lt;/a&gt;.
 - rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? Channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif" - Geben Sie den RTSP-Stream als Datenquelle an.
 - rtph264depay - In RTSP wird das Video in kleinen Teilen (RTP-Paketen) abgelegt. √úber rtph264depay erhalten wir Videos von diesen Paketen.
 - h264parse - Analysieren Sie, wie der Name schon sagt, den H.264-Stream.
 - avimux - sammle den Stream in avi, du kannst auch mp4mux oder matroskamux (mkv) verwenden.
 - filesink location = 1.avi - Geben Sie die Datei an, in der das Video gespeichert werden soll.<font></font>
<font></font>
 gst-launch-1.0 -v rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif"!  rtph264depay!  h264parse!  mp4mux!  Dateisinkort = 1.mp4
</pre><br><img src="https://habrastorage.org/web/032/b02/115/032b021155034149bc35e8068548d5eb.png" alt="Bild"><br></div></div><br><h3>  Broadcast-RTSP-Stream aus einer Datei </h3><br>  Es ist Zeit, die aufgezeichnete Datei im RTSP-Format zu senden.  Zu diesem Zweck verwenden wir dieselben Programme wie im obigen Abschnitt beschrieben. <br><br>  1. Um einen Videostream von der Kamera mit ffmpeg zu senden, m√ºssen Sie ffserver verwenden.  Die Beschreibung finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  Um die √úbersetzungsparameter festzulegen, muss <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Datei</a> ffserver.conf ausgef√ºllt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> . <br><br><div class="spoiler">  <b class="spoiler_title">ffserver</b> <div class="spoiler_text"><pre> Datei Ffserver.conf
 RTSPPort - Legen Sie die Nummer des RTSP-Ports fest, √ºber den die √úbertragung gesendet wird.
 &lt;Stream snl / live / 1/1&gt; - Nach dem Stream setzen wir den erforderlichen Schl√ºssel.
 Format rtp - √úbertragungsformat.
 Datei "/home/line/example/1.avi" - rtsp_transport tcp - Geben Sie den Pfad zu der Datei an, die Sie √ºbertragen m√∂chten, und den Schl√ºssel, der √ºber TCP √ºbertragen werden soll.
 NoAudio - keinen Ton √ºbertragen.<font></font>
<font></font>
 Datei Ffserver.conf<font></font>
<font></font>
 RTSPPort 554<font></font>
<font></font>
 &lt;Stream snl / live / 1/1&gt;
 Format rtp
 Datei "/home/line/example/1.avi" -rtsp_transport tcp
 NoAudio 
 &lt;/ Stream&gt;
 F√ºhren Sie als N√§chstes% ffserver -f ffserver.conf aus.
</pre><br><img src="https://habrastorage.org/web/bff/0c4/0bb/bff0c40bb4b5431fb1b564ed19d442c7.png" alt="Bild"><br></div></div><br>  2. Jetzt verwenden wir den vlc-media player.  Trotz der Tatsache, dass dies der einfachste Weg ist, kann vlc einen Stream leider nur √ºber UDP senden. <br><br><div class="spoiler">  <b class="spoiler_title">VLC Media Player</b> <div class="spoiler_text"><pre> Befehl zum Starten des RTSP-Streams:
 - Sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} - Legen Sie den Link fest, √ºber den die √úbertragung stattfinden soll.
 - Wiederholen - Stellen Sie das Video bei Bedarf so ein, dass es wiederholt abgespielt wird.
 vlc /home/line/example/1.avi --sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} - wiederholen
</pre><br></div></div><br>  3. Verwenden Sie schlie√ülich gst-server. <br><br><div class="spoiler">  <b class="spoiler_title">gst-server</b> <div class="spoiler_text"><pre> Zuerst m√ºssen Sie es installieren.
 $ sudo apt-get install gstreamer1.0
 $ wget https://gstreamer.freedesktop.org/src/gst-rtsp-server/gst-rtsp-server-1.8.3.tar.xz
 /gst-rtsp-server-1.8.3$ sudo apt installiere gtk-doc-tools
 /gst-rtsp-server-1.8.3$ sudo apt-get install libgstreamer-plugins-base1.0-dev
 /gst-rtsp-server-1.8.3$ make
 Jetzt k√∂nnen wir die Datei /gst-rtsp-server-1.8.3/examples/test-launch.c √§ndern
 Hier k√∂nnen Sie den Standard-RTSP-Port √§ndern
 #define DEFAULT_RTSP_PORT "8554"
 und der Schl√ºssel ist im Link
 gst_rtsp_mount_points_add_factory (mounts, "/ test", factory).
 Nachdem wir unsere Werte ersetzt haben, werden wir machen.
 F√ºhren Sie nun die Teststartdatei mit den Schl√ºsseln aus.
 - rtspsrc location = "/ home / line / example / 1.avi" - der Pfad zu der Datei, die abgespielt wird.
 - H264-Encoder - Codierung in h.264.
 - rtph264pay name = pay0 pt = 96 - teile unseren Stream in Teile.
 $ ~ / gst-rtsp-server-1.8.3 / examples $ ./test-launch "(rtspsrc location =" / home / line / example / 1.avi "! x264enc! rtph264pay name = pay0 pt = 96)"
</pre><br></div></div><br>  Die aufgezeichnete Datei wird im RTSP-Format gesendet. Danach l√∂sen wir das Problem des Kamerafehlers.  Im Folgenden finden Sie einige Optionen, die je nach dem Objekt, das wir angreifen m√∂chten, variieren.  In der Tat gibt es viel mehr M√∂glichkeiten, betrachten Sie nur die grundlegendsten.  Das erste, was wir brauchen, ist, in das Netzwerk zu gelangen, das wir brauchen. <br><br>  Wenn das Objekt territorial gro√ü ist, besteht h√§ufig die M√∂glichkeit, sich einigen Kameras physisch zu n√§hern und sogar zu versuchen, die Schaltger√§te zu finden, an die die Kamera angeschlossen ist. <br><br>  Wenn das Objekt klein ist, k√∂nnen Sie versuchen, √ºber WLAN in das Netzwerk einzutreten und es beispielsweise mit nmap zu scannen. <br><br>  Wenn physischer Zugriff auf die Kamera besteht, k√∂nnen Sie sie mit einem Einplattencomputer in mehreren Schritten hacken: <br><br>  1) Wireshark-Aufzeichnung aktivieren; <br>  2) Trennen Sie das Kabel kurz von der Kamera und schlie√üen Sie es an eine einzelne Platine an. <br>  3) Bringen Sie das Kabel wieder an seinen Platz. <br>  4) Studieren Sie die erhaltenen Protokolle. <br><br>  Wenn Sie Zugriff auf das Netzwerk haben, k√∂nnen Sie die klassische Substitutionsmethode verwenden: <br><br>  - Verwenden eines Arpspoof-St√§nders zwischen Kamera und Server; <br>  - Verwenden Sie ip_forward, um Anforderungen vom √úberwachungsserver an die IP-Kamera weiterzuleiten und umgekehrt. <br>  - Mit iptables werden alle Anforderungen √ºber den RTSP-Port nicht von der Kamera, sondern von unserem Computer an den √úberwachungsserver umgeleitet. <br><br><h3>  Hacking √úberwachungskameras </h3><br>  Um sich vor Thread-Spoofing gem√§√ü dem oben beschriebenen Verfahren zu sch√ºtzen, k√∂nnen verschiedene Methoden angewendet werden: <br><br>  <b>1. Kamera-Integration</b> <br>  Den gr√∂√üten Schutz bietet die Integration der Kamera in ein Softwareprodukt.  √úberpr√ºfen Sie hier, ob Ihre Kamera in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das Leitungs√ºberwachungssystem</a> integriert <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ist</a> . <br>  Wenn Ihre Kamera oder Ihr Hersteller nicht aufgef√ºhrt ist, k√∂nnen Sie sich mit der Bitte um Integration Ihres IP-Kameramodells an den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">technischen Support</a> wenden. <br><br>  <b>2. Firmware-Aktualisierung</b> <br>  Es ist notwendig, die Kamera-Firmware st√§ndig auf dem neuesten Stand zu halten, da die Entwickler mithilfe von Updates verschiedene Schwachstellen beheben und dadurch die Stabilit√§t der Kameras erh√∂hen. <br><br>  <b>3. √Ñnderung der Standardanmeldungen und -kennw√∂rter</b> <br>  Das erste, was ein Angreifer tut, ist zu versuchen, den Standardbenutzernamen und das Standardkennwort der Kamera zu verwenden.  Sie sind in der Gebrauchsanweisung angegeben, daher ist es nicht schwierig, sie zu finden.  Verwenden Sie daher immer einen eindeutigen Benutzernamen und ein Kennwort. <br><br>  <b>4. Aktivieren der obligatorischen Autorisierung</b> <br>  Diese Funktion ist in vielen modernen Kameras vorhanden, aber leider wissen nicht alle Benutzer davon.  Wenn Sie diese Option deaktivieren, fordert die Kamera beim Herstellen einer Verbindung keine Autorisierung an, wodurch sie f√ºr Hacking anf√§llig wird.  Es ist erw√§hnenswert, dass es Kameras mit doppelter Berechtigung f√ºr den http-Zugriff und f√ºr den Zugriff √ºber das ONVIF-Protokoll gibt.  Bei einigen Kameras gibt es au√üerdem eine separate Einstellung f√ºr die Autorisierungsanforderung, wenn eine Verbindung √ºber eine direkte RTSP-Verbindung hergestellt wird. <br><br>  <b>5. IP-Adressfilter</b> <br>  Wenn die Kamera die Funktion der sogenannten Whitelist unterst√ºtzt, ist es besser, sie nicht zu vernachl√§ssigen.  Mit seiner Hilfe wird die IP-Adresse ermittelt, von der aus Sie eine Verbindung zur Kamera herstellen k√∂nnen.  Dies sollte die Adresse des Servers sein, an den die Kamera angeschlossen ist, und gegebenenfalls die zweite IP-Adresse der Workstation, von der aus die Konfiguration vorgenommen wird.  Dies ist jedoch nicht die zuverl√§ssigste Methode, da ein Angreifer beim Ersetzen eines Ger√§ts dieselbe IP-Adresse verwenden kann.  Daher ist es am besten, diese Option zusammen mit anderen Empfehlungen zu verwenden. <br><br>  <b>6. Netzwerkschutz</b> <br>  Die Schaltger√§te m√ºssen ordnungsgem√§√ü konfiguriert werden.  Die meisten Switches unterst√ºtzen jetzt den Arp-Spoofing-Schutz - verwenden Sie diesen unbedingt. <br><br>  <b>7. Netzwerkfreigabe</b> <br>  Sie sollten diesem Element besondere Aufmerksamkeit widmen, da dies eine gro√üe Rolle f√ºr die Sicherheit Ihres Systems spielt.  Die Trennung des Unternehmensnetzwerks und des √úberwachungsnetzwerks sch√ºtzt Sie vor Eindringlingen oder sogar vor Ihren eigenen Mitarbeitern, die Zugriff auf das gemeinsam genutzte Netzwerk haben und Sie hacken m√∂chten. <br><br>  <b>8. Aktivieren Sie das OSD-Men√º</b> <br>  Sie m√ºssen das OSD-Men√º mit der aktuellen Uhrzeit und dem aktuellen Datum auf der Kamera aktivieren, damit Sie immer die Relevanz des Bildes √ºberpr√ºfen k√∂nnen.  Dies ist ein guter Schutz vor √Ñnderungen des Filmmaterials, da das OSD alle Videos einer bestimmten Kamera √ºberlagert.  Selbst wenn ein Angreifer den RTSP-Stream aufschreibt, macht sich das Spoofing dank der Daten bemerkbar, die noch in den Videobildern verbleiben. <br><br>  Leider haben viele Angreifer gelernt, Schwachstellen in IP-Video√ºberwachungssystemen schnell zu finden und auszunutzen.  Um das Netzwerk zu sichern, m√ºssen Sie sich mit den in diesem Artikel beschriebenen Schutzmethoden vertraut machen.  Nehmen Sie sich gen√ºgend Zeit f√ºr die Inbetriebnahme des Systems und insbesondere f√ºr die korrekte Konfiguration aller seiner Komponenten.  So k√∂nnen Sie dem Netzwerk maximale Sicherheit vor Hacking bieten. <br><br>  <b>Abschlie√üend empfehlen wir Ihnen, in den Kommentaren mitzuteilen, wie Sie den Schutz Ihres Video√ºberwachungsnetzwerks vor Hacking angehen w√ºrden.</b>  <b>Welche Angriffsmethoden halten Sie f√ºr die gef√§hrlichste?</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de405083/">https://habr.com/ru/post/de405083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de405073/index.html">Rechenzentrum f√ºr die Weltmeisterschaft</a></li>
<li><a href="../de405075/index.html">Senden und Empfangen von SMS-Nachrichten √ºber OpenVox VoIP-Gateways</a></li>
<li><a href="../de405077/index.html">Budget Temperatur√ºberwachung: Arduino + Zabbix</a></li>
<li><a href="../de405079/index.html">Kalifornien bezahlt Nachbarstaaten daf√ºr, √ºbersch√ºssigen Strom aus Solarkraftwerken aufzunehmen</a></li>
<li><a href="../de405081/index.html">[FALL] Wie wir eine Kopie des Worker and Collective Farm Girl f√ºr das Museum des Europ√§ischen Parlaments angefertigt haben</a></li>
<li><a href="../de405085/index.html">Video√ºberpr√ºfung auf der Clevermic UNO PTZ-Kamera</a></li>
<li><a href="../de405087/index.html">So schlie√üen Sie die Video√ºberwachung mithilfe der 2G / 3G / 4G-Signalverst√§rkung an</a></li>
<li><a href="../de405089/index.html">Wie funktioniert der Dog Walking Service?</a></li>
<li><a href="../de405091/index.html">Die NASA wird im Oktober 2022 einen Asteroiden treffen, um die Planetenverteidigung zu testen</a></li>
<li><a href="../de405093/index.html">Warum ist das Higgs-Teilchen so wichtig?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>