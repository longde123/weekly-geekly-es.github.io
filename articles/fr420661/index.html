<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë±üèø üòñ ü¶å Infrastructure cloud continue ü•¶ üèÇüèø üë∞üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="D√©monstration de l'utilisation d'outils open source tels que Packer et Terraform pour apporter en permanence des modifications d'infrastructure aux en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Infrastructure cloud continue</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/420661/">  D√©monstration de l'utilisation d'outils open source tels que Packer et Terraform pour apporter en permanence des modifications d'infrastructure aux environnements cloud pr√©f√©r√©s des utilisateurs. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FJvl13EYtBU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Le mat√©riel √©tait bas√© sur une pr√©sentation de Paul Stack lors de notre conf√©rence d'automne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevOops</a> 2017. Paul est un d√©veloppeur d'infrastructure qui travaillait chez HashiCorp et a particip√© au d√©veloppement d'outils utilis√©s par des millions de personnes (par exemple, Terraform).  Il s'exprime souvent lors de conf√©rences et transmet des pratiques √† l'avant-garde des impl√©mentations CI / CD, les principes de la bonne organisation de la partie op√©rations, et est capable d'expliquer clairement pourquoi les administrateurs le font.  Le reste de l'article est racont√© √† la premi√®re personne. <br><a name="habracut"></a><br>  Commen√ßons donc tout de suite par quelques constatations cl√©s. <br><br><h3>  Le serveur de longue dur√©e est nul </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/7f5/1dc/232/7f51dc232bf87288dc7f5c1bf7140a0d.jpg"><br><br>  J'ai pr√©c√©demment travaill√© dans une organisation o√π nous avons d√©ploy√© Windows Server 2003 en 2008, et aujourd'hui, ils sont toujours en production.  Et une telle entreprise n'est pas seule.  √Ä l'aide du bureau √† distance sur ces serveurs, ils installent le logiciel manuellement, t√©l√©chargeant des fichiers binaires depuis Internet.  C'est une tr√®s mauvaise id√©e, car les serveurs ne sont pas typiques.  Vous ne pouvez pas garantir que la m√™me chose se produit en production que dans votre environnement de d√©veloppement, dans l'environnement interm√©diaire, dans l'environnement QA. <br><br><h3>  Infrastructure immuable </h3><br>  En 2013, un article est paru sur le blog de Chad Foiler intitul√© ¬´Jetez vos serveurs et gravez votre code: infrastructure immuable et composants jetables¬ª (Chad Foiler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´</a> D√©posez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vos serveurs et gravez votre code: infrastructure immuable et composants jetables¬ª</a> ).  Il s'agit principalement d'une conversation selon laquelle une infrastructure immuable est la voie √† suivre.  Nous avons cr√©√© l'infrastructure et si nous devons la changer, nous cr√©ons une nouvelle infrastructure.  Cette approche est tr√®s courante dans le cloud, car ici, elle est rapide et bon march√©.  Si vous avez des centres de donn√©es physiques, c'est un peu plus compliqu√©.  De toute √©vidence, si vous ex√©cutez la virtualisation du centre de donn√©es, les choses deviennent plus faciles.  Cependant, si vous d√©marrez toujours des serveurs physiques √† chaque fois, il faut un peu plus de temps pour en entrer un nouveau que pour en modifier un existant. <br><br><h3>  Infrastructure jetable </h3><br>  Selon les programmeurs fonctionnels, ¬´immuable¬ª est en fait le mauvais terme pour d√©signer ce ph√©nom√®ne.  Parce que pour √™tre vraiment immuable, votre infrastructure a besoin d'un syst√®me de fichiers en lecture seule: aucun fichier ne sera √©crit localement, personne ne pourra utiliser SSH ou RDP, etc.  Ainsi, il semble qu'en fait l'infrastructure ne soit pas immuable. <br><br>  La terminologie a √©t√© discut√©e sur Twitter pendant six ou m√™me huit jours par plusieurs personnes.  En fin de compte, ils ont convenu qu'une ¬´infrastructure ponctuelle¬ª est une formulation plus appropri√©e.  Lorsque le cycle de vie d'une ¬´infrastructure ponctuelle¬ª prend fin, il peut √™tre facilement d√©truit.  Vous n'avez pas besoin de vous y accrocher. <br><br>  Je vais faire une analogie.  Les vaches d'√©levage ne sont g√©n√©ralement pas consid√©r√©es comme des animaux de compagnie. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be9/a17/baf/be9a17baf223a45e34c63684197cc2ce.png"><br><br>  Lorsque vous avez du b√©tail √† la ferme, vous ne leur donnez pas de noms individuels.  Chaque individu a un num√©ro et une √©tiquette.  Il en va de m√™me pour les serveurs.  Si vous avez toujours cr√©√© des serveurs manuellement en production en 2006, ils ont des noms importants, par exemple, ¬´Base de donn√©es SQL sur la production 01¬ª.  Et ils ont une signification tr√®s sp√©cifique.  Et si l'un des serveurs tombe en panne, l'enfer commence. <br><br>  Si l'un des animaux du troupeau meurt, l'agriculteur en ach√®te simplement un nouveau.  Il s'agit de ¬´l'infrastructure ponctuelle¬ª. <br><br><h3>  Livraison continue </h3><br>  Alors, comment combinez-vous cela avec la livraison continue? <br>  Tout ce dont je parle maintenant existe depuis un certain temps.  J'essaie simplement de combiner les id√©es de d√©veloppement d'infrastructure et de d√©veloppement logiciel. <br><br>  Les d√©veloppeurs de logiciels se sont depuis longtemps engag√©s √† fournir et √† int√©grer en permanence.  Par exemple, Martin Fowler a √©crit sur l'int√©gration continue sur son blog au d√©but des ann√©es 2000.  Jez Humble a longtemps promu la livraison continue. <br><br>  Si vous regardez de plus pr√®s, rien n'est cr√©√© sp√©cifiquement pour le code source du logiciel.  Il existe une d√©finition standard de Wikip√©dia: <i>la livraison continue est un ensemble de pratiques et de principes visant √† cr√©er, tester et publier des logiciels le plus rapidement possible</i> . <br><br>  La d√©finition ne signifie pas les applications Web ou les API, il s'agit de logiciels en g√©n√©ral.  La cr√©ation d'un logiciel de puzzle n√©cessite de nombreuses pi√®ces de puzzle.  De cette fa√ßon, vous pouvez pratiquer la livraison continue du code d'infrastructure de la m√™me mani√®re. <br><br>  Le d√©veloppement de l'infrastructure et des applications sont des directions assez proches.  Et les personnes qui √©crivent du code d'application √©crivent √©galement du code d'infrastructure (et vice versa).  Ces mondes commencent √† s'unir.  Il n'y a plus une telle s√©paration et les pi√®ges sp√©cifiques de chacun des mondes. <br><br><h3>  Principes et pratiques de livraison continue </h3><br>  La livraison continue a un certain nombre de principes: <br><br><ul><li>  Le processus de lancement / d√©ploiement du logiciel doit √™tre reproductible et fiable. <br></li><li>  Automatisez tout! <br></li><li>  Si une proc√©dure est difficile ou douloureuse, faites-la plus souvent. <br></li><li>  Gardez tout sous contr√¥le de source. <br></li><li>  Termin√© - signifie ¬´non publi√©¬ª. <br></li><li>  Int√©grez le travail √† la qualit√©! <br></li><li>  Tout le monde est responsable du processus de publication. <br></li><li>  Augmentez la continuit√©. <br></li></ul><br>  Mais plus important encore, la livraison continue a quatre pratiques.  Prenez-les et transf√©rez-les directement dans l'infrastructure: <br><br><ul><li>  Cr√©ez des fichiers binaires une seule fois.  Cr√©ez votre serveur une fois.  Ici, nous parlons de ¬´jetabilit√©¬ª depuis le tout d√©but. <br></li><li>  Utilisez le m√™me m√©canisme de d√©ploiement dans chaque environnement.  Ne pratiquez pas diff√©rents d√©ploiements en d√©veloppement et en production.  Vous devez utiliser le m√™me chemin dans chaque environnement.  C'est tr√®s important. <br></li><li>  Testez votre d√©ploiement.  J'ai cr√©√© de nombreuses applications.  J'ai cr√©√© beaucoup de probl√®mes car je n'ai pas suivi le m√©canisme de d√©ploiement.  Vous devez toujours v√©rifier ce qui se passe.  Et je ne dis pas que vous devriez passer cinq ou six heures sur un test √† grande √©chelle.  Assez "test de fum√©e".  Vous avez un √©l√©ment cl√© du syst√®me qui, comme vous le savez, vous permet, √† vous et √† votre entreprise, de gagner de l'argent.  Ne soyez pas trop paresseux pour commencer les tests.  Sinon, il peut y avoir des interruptions qui co√ªteront de l'argent √† votre entreprise. <br></li><li>  Et enfin, la chose la plus importante.  Si quelque chose se casse, arr√™tez-vous et r√©parez-le imm√©diatement!  Vous ne pouvez pas laisser le probl√®me s'aggraver et empirer de plus en plus.  Vous devez le r√©parer.  C'est vraiment important. <br></li></ul><br>  Quelqu'un a-t-il lu le livre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Livraison continue</a> ? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cad/9eb/b6f/cad9ebb6f6c3562724d78ef5a0454e7e.png"><br><br>  Je suis s√ªr que vos entreprises vous en paieront une copie que vous pourrez transf√©rer au sein de l'√©quipe.  Je ne dis pas que vous devriez vous asseoir et passer une journ√©e libre √† le lire.  Si vous le faites, vous voudrez probablement quitter l'informatique.  Mais je recommande de ma√Ætriser p√©riodiquement de petits morceaux du livre, de les dig√©rer et de r√©fl√©chir √† la fa√ßon de les transf√©rer dans votre environnement, votre culture et votre processus.  Un petit morceau √† la fois.  Parce que l'approvisionnement continu est une conversation sur l'am√©lioration continue.  Ce n'est pas seulement de s'asseoir au bureau avec des coll√®gues et le patron et d'entamer une conversation avec la question: ¬´Comment allons-nous mettre en ≈ìuvre la livraison continue?¬ª, Puis √©crivez 10 choses au tableau et apr√®s 10 jours, comprenez que vous l'avez mise en ≈ìuvre.  Cela prend beaucoup de temps, provoque beaucoup de protestations, car avec l'introduction des changements de culture. <br><br>  Aujourd'hui, nous utiliserons deux outils: Terraform et Packer (les deux sont des d√©veloppements Hashicorp).  Une autre discussion portera sur les raisons pour lesquelles nous devrions utiliser Terraform et comment l'int√©grer dans notre environnement.  Ce n'est pas par hasard que je parle de ces deux outils.  Jusqu'√† r√©cemment, j'ai √©galement travaill√© chez Hashicorp.  Mais m√™me apr√®s avoir quitt√© Hashicorp, je continue de contribuer au code de ces outils, car je les trouve r√©ellement tr√®s utiles. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d0/4b0/807/5d04b08076e6d28da7cc17589d79de6d.png"><br><br>  Terraform prend en charge l'interaction avec les fournisseurs.  Les fournisseurs sont les clouds, les services Saas, etc. <br><br>  Au sein de chaque fournisseur de services cloud, il existe plusieurs ressources, telles qu'un sous-r√©seau, un VPC, un √©quilibreur de charge, etc. En utilisant DSL (langage sp√©cifique au domaine), vous indiquez √† Terraform √† quoi ressemblera votre infrastructure. <br><br>  Terraform utilise la th√©orie des graphes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c7/142/7d2/1c71427d2d18431acfe78d79797f9948.png"><br><br>  Vous connaissez probablement la th√©orie des graphes.  Les n≈ìuds font partie de notre infrastructure, tels qu'un √©quilibreur de charge, un sous-r√©seau ou un VPC.  Les nervures sont les relations entre ces syst√®mes.  C'est tout ce que je consid√®re personnellement n√©cessaire de savoir sur la th√©orie des graphes pour utiliser Terraform.  Nous laissons le reste aux experts. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8de/db7/fe6/8dedb7fe6a72bd36d371f3576e841cfa.png"><br><br>  Terraform utilise en fait un graphe orient√© car il conna√Æt non seulement les relations, mais aussi leur ordre: que A (supposons que A est un VPC) doit √™tre d√©fini sur B, qui est un sous-r√©seau.  Et B doit √™tre cr√©√© avant C (instance), car il existe une proc√©dure prescrite pour cr√©er des abstractions dans Amazon ou tout autre cloud. <br>  Plus d'informations sur ce sujet sont disponibles sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">YouTube par</a> Paul Hinze, qui est toujours directeur de l'infrastructure chez Hashicorp.  Par r√©f√©rence - une grande conversation sur l'infrastructure et la th√©orie des graphes. <br><br><h3>  Pratique </h3><br>  √âcrire un code est bien mieux que discuter d'une th√©orie. <br><br>  J'ai pr√©c√©demment cr√©√© AMI (Amazon Machine Images).  J'utilise Packer pour les cr√©er et je vais vous montrer comment le faire. <br><br>  AMI est une instance d'un serveur virtuel sur Amazon, elle est pr√©d√©finie (en termes de configuration, d'applications, etc.) et est cr√©√©e √† partir d'une image.  J'adore pouvoir cr√©er de nouvelles AMI.  Essentiellement, les AMI sont mes conteneurs Docker. <br><br>  Donc, j'ai AMI, ils ont une pi√®ce d'identit√©.  En allant √† l'interface Amazon, nous voyons que nous n'avons qu'une seule AMI et rien de plus: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cb/b65/563/4cbb65563af0eea258e8c5cdc936a318.png"><br><br>  Je peux vous montrer ce qu'il y a dans cette AMI.  Tout est tr√®s simple. <br><br>  J'ai un mod√®le de fichier JSON: <br><br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"variables"</span></span>: { <span class="hljs-string"><span class="hljs-string">"source_ami"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"region"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"builders"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"amazon-ebs"</span></span>, <span class="hljs-string"><span class="hljs-string">"region"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'region'}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"source_ami"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'source_ami'}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_pty"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"instance_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"t2.micro"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_username"</span></span>: <span class="hljs-string"><span class="hljs-string">"ubuntu"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"5m"</span></span>, <span class="hljs-string"><span class="hljs-string">"associate_public_ip_address"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"ami_virtualization_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"hvm"</span></span>, <span class="hljs-string"><span class="hljs-string">"ami_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"application_instance-{{isotime \"2006-01-02-1504\"}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: { <span class="hljs-string"><span class="hljs-string">"Version"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'version'}}"</span></span> } }], <span class="hljs-string"><span class="hljs-string">"provisioners"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"shell"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_retry_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"10m"</span></span>, <span class="hljs-string"><span class="hljs-string">"inline"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"sudo apt-get update -y"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo apt-get install -y ntp nginx"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"file"</span></span>, <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"application-files/nginx.conf"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span>: <span class="hljs-string"><span class="hljs-string">"/tmp/nginx.conf"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"file"</span></span>, <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"application-files/index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span>: <span class="hljs-string"><span class="hljs-string">"/tmp/index.html"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"shell"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_retry_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"5m"</span></span>, <span class="hljs-string"><span class="hljs-string">"inline"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"sudo mkdir -p /usr/share/nginx/html"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo mv /tmp/index.html /usr/share/nginx/html/index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo mv /tmp/nginx.conf /etc/nginx/nginx.conf"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo systemctl enable nginx.service"</span></span> ] } ] }</code> </pre> <br>  Nous avons des variables que nous transmettons, et Packer a une liste de soi-disant constructeurs pour diff√©rents domaines;  il y en a beaucoup.  Builder utilise une source AMI sp√©ciale, √† laquelle je transmets un identifiant AMI.  Je lui donne le nom d'utilisateur et le mot de passe SSH, et indique √©galement s'il a besoin d'une adresse IP publique pour que les gens puissent y acc√©der de l'ext√©rieur.  Dans notre cas, cela n'a pas vraiment d'importance, car il s'agit d'une instance AWS pour Packer. <br>  Nous avons √©galement d√©fini le nom et les balises AMI. <br><br>  Vous n'√™tes pas oblig√© d'analyser ce code.  Il n'est l√† que pour vous montrer comment il travaille.  La partie la plus importante ici est la version.  Cela deviendra pertinent plus tard lorsque nous entrerons dans Terraform. <br><br>  Une fois que le g√©n√©rateur a appel√© l'instance, les agents de provisionnement y sont lanc√©s.  En fait, j'installe NCP et nginx pour vous montrer ce que je peux faire ici.  Je copie des fichiers et j'installe simplement la configuration de nginx.  Tout est tr√®s simple.  Ensuite, j'active nginx pour qu'il d√©marre au d√©marrage de l'instance. <br><br>  Donc, j'ai un serveur d'applications et √ßa marche.  Je peux l'utiliser √† l'avenir.  Cependant, je v√©rifie toujours mes mod√®les Packer.  Parce que c'est une configuration JSON o√π vous pouvez rencontrer des probl√®mes. <br>  Pour ce faire, j'ex√©cute la commande: <br><br> <code>make validate <br></code> <br>  J'obtiens la r√©ponse que le mod√®le Packer a √©t√© v√©rifi√© avec succ√®s: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f0/aa3/1a7/2f0aa31a768c26246877688d0c81cc9e.png"><br><br>  Ceci est juste une commande, donc je peux le connecter √† l'outil CI (n'importe qui).  En fait, ce sera un processus: si le d√©veloppeur modifie le mod√®le, la demande d'extraction est g√©n√©r√©e, l'outil CI v√©rifie la demande, effectue l'√©quivalent de la v√©rification du mod√®le et publie le mod√®le en cas de v√©rification r√©ussie.  Tout cela peut √™tre combin√© dans le "Master". <br>  Nous obtenons un flux pour les mod√®les AMI - il vous suffit d'augmenter la version. <br><br>  Supposons que le d√©veloppeur ait cr√©√© une nouvelle version d'AMI. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc9/3b9/546/dc93b95464ccf7b7e6fbe959d4a5ddf0.png"><br><br>  Je vais juste corriger la version dans les fichiers de 1.0.0 √† 1.0.1 pour vous montrer la diff√©rence: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tittle</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to DevOops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tittle</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to DevOops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Version: 1.0.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Je reviendrai sur la ligne de commande et commencerai la cr√©ation d'AMI. <br>  Je n'aime pas diriger les m√™mes √©quipes.  J'aime cr√©er rapidement AMI, donc j'utilise des makefiles.  Jetons un coup d'oeil avec <code>cat</code> dans mon makefile: <br><br> <code>cat Makefile <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/163/0e4/bea/1630e4bea410b10ffcbb5fce2a27d595.png"><br><br>  Ceci est mon makefile.  J'ai m√™me fourni de l'aide: je tape <code>make</code> et je clique sur l'onglet, et √ßa me montre toute la cible. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/74d/cbb/611/74dcbb6110c7350483735a0f96d9fe90.png"><br><br>  Nous allons donc cr√©er une nouvelle version AMI 1.0.1. <br><br> <code>make ami <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/879/16c/482/87916c482f6410c8a2fc73c150308409.png"><br><br>  Revenons √† Terraform. <br><br>  J'insiste sur le fait qu'il ne s'agit pas d'un code de production.  Ceci est une d√©monstration.  Il existe des moyens de faire mieux la m√™me chose. <br><br>  J'utilise des modules Terraform partout.  Comme je ne travaille plus sur Hashicorp, je peux donc exprimer mon opinion sur les modules.  Pour moi, les modules sont au niveau de l'encapsulation.  Par exemple, j'aime encapsuler tout ce qui concerne le VPC: r√©seaux, sous-r√©seaux, tables de routage, etc. <br><br>  Que se passe-t-il √† l'int√©rieur?  Les d√©veloppeurs qui travaillent avec cela peuvent ne pas s'en soucier.  Ils doivent avoir une compr√©hension de base du fonctionnement du cloud, de ce qu'est un VPC.  Mais il n'est pas n√©cessaire de se plonger dans les d√©tails.  Seules les personnes qui ont vraiment besoin de changer un module doivent le comprendre. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a8/90c/b85/1a890cb85c3fb6a6580e8b6a25492f4f.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/177/a14/a24/177a14a241d80ee6bcc2cf64f194ce4e.png"><br><br>  Ici, je vais cr√©er une ressource AWS et un module VPC.  Que se passe-t-il ici?  Prenez <code>cidr_block</code> niveau <code>cidr_block</code> et cr√©ez trois sous-r√©seaux priv√©s et trois sous-r√©seaux publics.  Voici une liste des zones de disponibilit√©.  Mais nous ne savons pas quelles sont ces zones d'accessibilit√©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/26b/ec1/4ea/26bec14eab18a025c33c2a871c4d3ed4.png"><br><br>  Nous allons cr√©er un VPN.  N'utilisez simplement pas ce module VPN.  C'est openVPN, qui cr√©e une instance AWS qui n'a pas de certificat.  Il utilise uniquement l'adresse IP publique et n'est mentionn√© ici que pour vous montrer que nous pouvons nous connecter au VPN.  Il existe des outils plus pratiques pour cr√©er un VPN.  Il m'a fallu environ 20 minutes et deux bi√®res pour √©crire la mienne. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ae3/a5f/8a6/ae3a5f8a6561b2b9f726e2e129dfcb2f.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/6a8/f0e/7b9/6a8f0e7b965f44255365d50ad64669e0.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/078/e4c/073/078e4c073df61b68e97372c7e4730f5b.png"><br><br>  Ensuite, nous cr√©ons un <code>application_tier</code> , qui est un groupe de mise √† l'√©chelle automatique - un √©quilibreur de charge.  Certaines configurations de d√©marrage sont bas√©es sur AMI-ID, et combinent plusieurs sous-r√©seaux et zones de disponibilit√©, et utilisent √©galement une cl√© SSH. <br>  Revenons √† cela dans une seconde. <br><br>  J'ai d√©j√† mentionn√© les zones de disponibilit√©.  Ils diff√®rent pour diff√©rents comptes AWS.  Mon compte aux √âtats-Unis dans l'Est peut avoir acc√®s aux zones A, B et D. Votre compte AWS peut avoir acc√®s √† B, C et E. Ainsi, en fixant ces valeurs dans le code, nous rencontrerons des probl√®mes.  Chez Hashicorp, nous avons sugg√©r√© de cr√©er de telles sources de donn√©es afin de demander √† Amazon ce qui √©tait disponible pour nous.  Sous le capot, nous demandons une description des zones de disponibilit√©, puis renvoyons une liste de toutes les zones pour votre compte.  Gr√¢ce √† cela, nous pouvons utiliser des sources de donn√©es pour AMI. <br><br>  Nous arrivons maintenant au bas de ma d√©monstration.  J'ai cr√©√© un groupe de mise √† l'√©chelle automatique dans lequel trois instances sont en cours d'ex√©cution.  Par d√©faut, ils ont tous la version 1.0.0. <br><br>  Lorsque nous d√©ploierons la nouvelle version d'AMI, je recommencerai la configuration Terraform, cela changera la configuration de lancement, et le nouveau service recevra la prochaine version du code, etc. Et nous pouvons la contr√¥ler. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53e/030/d08/53e030d08a8820f28ce8970bdb2bcee8.png"><br><br>  Nous voyons que Packer est termin√© et nous avons une nouvelle AMI. <br>  Je retourne sur Amazon, rafra√Æchis la page et vois une deuxi√®me AMI. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab7/966/88d/ab796688d7e117c00b12343d54547a3a.png"><br><br>  Revenons √† Terraform. <br><br>  √Ä partir de la version 0.10, Terraform a divis√© les fournisseurs en r√©f√©rentiels distincts.  Et la commande <code>init terraform</code> obtient une copie du fournisseur n√©cessaire √† l'ex√©cution. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a71/f24/5c1/a71f245c166bffd9cce8d2da21612bb3.png"><br><br>  Fournisseurs charg√©s.  Nous sommes pr√™ts √† aller de l'avant. <br>  Ensuite, nous devons ex√©cuter <code>terraform get</code> - charger les modules n√©cessaires.  Ils sont maintenant sur ma machine locale.  Terraform r√©cup√©rera donc tous les modules localement.  En g√©n√©ral, les modules peuvent √™tre stock√©s dans leurs propres r√©f√©rentiels sur GitHub ou ailleurs.  C'est pourquoi j'ai parl√© du module VPC.  Vous pouvez donner √† l'√©quipe du r√©seau un acc√®s pour effectuer des modifications.  Et c'est l'API pour l'√©quipe de d√©veloppement pour travailler avec eux.  Vraiment utile. <br><br>  L'√©tape suivante consiste √† cr√©er un graphique. <br><br>  Commencez avec <br><br> <code>terraform plan <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/854/852/ea8/854852ea82a25694dbef99af5832eb27.png"><br><br>  Terraform prendra l'√©tat local actuel et le comparera avec le compte AWS, indiquant les diff√©rences.  Dans notre cas, il cr√©era 35 nouvelles ressources. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ce/d53/2cc/3ced532cc5cbe65758669980fda88f9e.png"><br><br>  Maintenant, nous appliquons les modifications: <br><br> <code>terraform apply <br></code> <br><br>  Vous n'avez pas √† faire tout cela depuis la machine locale.  Ce ne sont que des commandes, passant des variables √† Terraform.  Vous pouvez porter ce processus sur les outils CI. <br>  Si vous souhaitez le d√©placer vers CI, vous devez utiliser l'√©tat distant.  J'aimerais que tous ceux qui utilisent Terraform travaillent avec un √©tat distant.  Veuillez ne pas utiliser l'√©tat local. <br><br>  Un de mes amis a not√© que m√™me apr√®s toutes ces ann√©es de travail avec Terraform, il d√©couvre encore quelque chose de nouveau.  Par exemple, si vous cr√©ez une instance AWS, vous devez lui fournir un mot de passe et il peut l'enregistrer dans votre √©tat.  Lorsque j'ai travaill√© chez Hashicorp, nous avons suppos√© qu'il y aurait un processus collaboratif qui changerait ce mot de passe.  Par cons√©quent, n'essayez pas de tout stocker localement.  Et puis, vous pouvez mettre tout cela dans les outils CI. <br><br>  Donc, l'infrastructure est cr√©√©e pour moi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/040/c1d/c55040c1d4544a4d7c53f77a494c2be7.png"><br><br>  Terraform peut construire un graphique: <br><br> <code>terraform graph <br></code> <br><br>  Comme je l'ai dit, il construit un arbre.  En fait, cela vous donne la possibilit√© d'√©valuer ce qui se passe dans votre infrastructure.  Il vous montrera la relation entre toutes les diff√©rentes parties - tous les n≈ìuds et les bords.  Puisque les connexions ont des directions, nous parlons d'un graphe orient√©. <br><br>  Le graphique sera une liste JSON qui peut √™tre enregistr√©e dans un fichier PNG ou DOC. <br><br>  Revenons √† Terraform.  Nous cr√©ons vraiment un groupe de mise √† l'√©chelle automatique. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9fe/253/799/9fe253799368629b6c98d7472cbc3634.png"><br><br>  Le groupe de mise √† l'√©chelle automatique a une capacit√© de 3. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0dd/2a3/e47/0dd2a3e47ef49ba119c37c6ee1118fe9.png"><br><br>  Une question int√©ressante: pouvons-nous utiliser Vault pour g√©rer les secrets dans Terraform?  H√©las, non.  Il n'y a pas de source de donn√©es Vault pour lire les secrets dans Terraform.  Il existe d'autres fa√ßons, telles que les variables d'environnement.  Avec leur aide, vous n'avez pas besoin d'entrer de secrets dans le code; vous pouvez les lire en tant que variables d'environnement. <br><br>  Nous avons donc quelques infrastructures: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/107/2ef/61e/1072ef61ea789635cb6e9894005734b2.png"><br><br>  J'entre dans mon VPN tr√®s secret (ne craquez pas mes VPN). <br><br>  La chose la plus importante ici est que nous avons trois instances de la demande.  Certes, j'aurais d√ª noter quelle version de l'application s'ex√©cute sur eux.  C'est tr√®s important. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/009/bef/b7d/009befb7dcb30e11c9454e3b27f036cf.png"><br>  Tout est vraiment derri√®re le VPN: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9f/5d3/e43/b9f5d3e436b981cfc21db8e42b782db5.png"><br><br>  Si je prends ceci ( <code>application-elb-1069500747.eu-west-1.elb.amazonaws.com</code> ) et le colle dans la barre d'adresse du navigateur, j'obtiens ce qui suit: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/016/40e/203/01640e2034e1cd80ff454b5c6b74c386.png"><br><br>  Permettez-moi de vous rappeler que je suis connect√© √† un VPN.  Si je me d√©connecte, l'adresse sp√©cifi√©e ne sera pas disponible. <br>  Nous voyons la version 1.0.0.  Et peu importe combien nous actualisons la page, nous obtenons 1.0.0. <br>  Que se passe-t-il si je change la version 1.0.0 en 1.0.1 dans le code? <br><br><pre> <code class="javascript hljs">filter { name = <span class="hljs-string"><span class="hljs-string">"tag:Version"</span></span> values = [<span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>] }</code> </pre> <br>  De toute √©vidence, les outils CI vous assureront de cr√©er la bonne version. <br>  Je ne note aucune mise √† jour manuelle!  Nous sommes imparfaits, nous faisons des erreurs et nous pouvons mettre la version 1.0.6 au lieu de 1.0.1 lors de la mise √† jour manuelle. <br><br><pre> <code class="javascript hljs">filter { name = <span class="hljs-string"><span class="hljs-string">"tag:Version"</span></span> values = [<span class="hljs-string"><span class="hljs-string">"1.0.6"</span></span>] }</code> </pre><br>  Mais passons √† notre version (1.0.1). <br><br> <code>terraform plan <br></code> <br><br>  Terraform met √† jour l'√©tat: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb8/7f5/221/fb87f522107164e64498825e1e4e0562.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c39/8ec/61b/c398ec61bfdbd060b526417c56631b14.png"><br><br>  Donc, en ce moment, il me dit qu'il va changer la version dans la configuration de lancement.  En raison de la modification de l'identifiant, il forcera un red√©marrage de la configuration et le groupe de mise √† l'√©chelle automatique changera (cela est n√©cessaire pour activer la nouvelle configuration de lancement). <br><br>  Cela ne change pas les instances en cours d'ex√©cution.  C'est vraiment important.  Vous pouvez suivre ce processus et le tester sans modifier les instances en production. <br><br>  Remarque: vous devez toujours cr√©er une nouvelle configuration de lancement avant de d√©truire l'ancienne, sinon il y aura une erreur. <br><br>  Appliquons les changements: <br><br> <code>terraform apply <br></code> <br><br>  Revenons maintenant √† AWS.  Lorsque toutes les modifications sont appliqu√©es, nous passons au groupe de mise √† l'√©chelle automatique. <br>  Passons √† la configuration AWS.  Nous voyons qu'il y a trois instances avec une configuration de lancement.  Ce sont les m√™mes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/365/ae7/49c/365ae749cd5c77ea0634247410b58da6.png"><br><br>  Amazon garantit que si nous voulons ex√©cuter trois instances du service, elles seront effectivement lanc√©es.  C'est pourquoi nous leur payons de l'argent. <br><br>  Passons aux exp√©riences. <br><br>  Une nouvelle configuration de lancement a √©t√© cr√©√©e.  Par cons√©quent, si je supprime l'une des instances, les autres ne seront pas endommag√©es.  C'est important.  Cependant, si vous utilisez directement les instances, tout en modifiant les donn√©es utilisateur, cela d√©truira les instances "actives".  Veuillez ne pas le faire. <br><br>  Supprimez donc l'une des instances: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eb3/373/05a/eb337305af7a4e537d2f5963661f909f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/244/711/a7c/244711a7c5beb5edd4863239e2997fc1.png"><br><br>  Que se passera-t-il dans le groupe de mise √† l'√©chelle automatique lors de sa fermeture?  Une nouvelle instance appara√Ætra √† sa place. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86d/1dd/8f5/86d1dd8f57f1af6e56ddf9054b777e91.png"><br><br>  Ici, vous vous trouvez dans une situation int√©ressante.  L'instance sera lanc√©e avec la nouvelle configuration.  Autrement dit, dans le syst√®me, vous pouvez avoir plusieurs images diff√©rentes (avec diff√©rentes configurations).  Parfois, il vaut mieux ne pas supprimer imm√©diatement l'ancienne configuration de d√©marrage afin de se connecter au besoin. <br><br>  Ici, tout devient encore plus int√©ressant.  Pourquoi ne pas le faire avec des scripts et des outils CI, et non manuellement, comme je le montre?  Il existe des outils qui peuvent le faire, tels que les excellents outils AWS-missing-sur GitHub. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/948/2b7/96d/9482b796d437daa84cf7c26dc85aa08f.png"><br><br>  Et que fait cet outil?  Il s'agit d'un script bash qui parcourt toutes les instances de l'√©quilibreur de charge, les d√©truit une √† la fois, garantissant la cr√©ation de nouvelles √† leur place. <br>  Si j'ai perdu une de mes instances avec la version 1.0.0 et qu'une nouvelle est apparue - 1.1.1, je voudrais tuer tous les 1.0.0, tout transf√©rer vers la nouvelle version.  Parce que j'avance toujours.  Permettez-moi de vous rappeler que je n'aime pas quand le serveur d'applications vit longtemps. <br><br>  Dans l'un des projets, tous les sept jours, j'avais un script de contr√¥le qui d√©truisait toutes les instances de mon compte.  Le serveur n'avait donc pas plus de sept jours.  Une autre chose (ma pr√©f√©r√©e) est de marquer les serveurs comme "tach√©s" en utilisant SSH dans une bo√Æte et de les d√©truire toutes les heures en utilisant un script - nous ne voulons pas que les gens le fassent manuellement. <br><br>  De tels scripts de contr√¥le vous permettent d'avoir toujours la derni√®re version avec des bogues corrig√©s et des mises √† jour de s√©curit√©. <br><br>  Vous pouvez utiliser le script simplement en ex√©cutant: <br><br> <code>aws-ha-relesae.sh -a my-scaling-group <br></code> <br><br>  <code>-a</code> est votre groupe de mise √† l'√©chelle automatique.  Le script passera par toutes les instances de votre groupe de mise √† l'√©chelle automatique et le remplacera.  Vous pouvez l'ex√©cuter non seulement manuellement, mais √©galement √† partir de l'outil CI. <br>  Vous pouvez le faire en QA ou en production.  Vous pouvez le faire m√™me dans votre compte AWS local.  Vous faites ce que vous voulez, en utilisant √† chaque fois le m√™me m√©canisme. <br><br>  Retour sur Amazon.  Nous avons une nouvelle instance: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f4b/1aa/079/f4b1aa079ec971f111abce895d28c771.png"><br><br>  Apr√®s avoir mis √† jour la page dans le navigateur, o√π nous avons pr√©c√©demment vu la version 1.0.0, nous obtenons: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff4/923/d78/ff4923d78d16d508c0e8bae753044c15.png"><br><br>  La chose int√©ressante est que depuis que nous avons cr√©√© le script de cr√©ation AMI, nous pouvons tester la cr√©ation d'AMI. <br><br>  Il existe d'excellents outils, tels que ServerScript ou Serverspec. <br><br>  Serverspec vous permet de cr√©er des sp√©cifications de style Ruby pour tester l'apparence de votre serveur d'applications.  Par exemple, ci-dessous, je donne un test qui v√©rifie que nginx est install√© sur le serveur. <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'spec_helper'</span></span> describe package(<span class="hljs-string"><span class="hljs-string">'nginx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { should be_installed } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> describe service(<span class="hljs-string"><span class="hljs-string">'nginx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { sould be_enabled } it { sould be_running } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> describe port(<span class="hljs-number"><span class="hljs-number">80</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { should be_listening } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  Nginx doit √™tre install√© et ex√©cut√© sur le serveur et √† l'√©coute sur le port 80.  Vous pouvez dire que l'utilisateur X doit √™tre disponible sur le serveur.  Et vous pouvez mettre tous ces tests √† leur place.  Ainsi, lorsque vous cr√©ez une AMI, l'outil CI peut v√©rifier si cette AMI est adapt√©e √† un objectif donn√©.  Vous saurez qu'AMI est pr√™t pour la production. <br><br><h3>  Au lieu d'une conclusion </h3><br>  Mary Poppendieck est probablement l'une des femmes les plus incroyables dont j'ai jamais entendu parler.  √Ä un moment donn√©, elle a expliqu√© comment le d√©veloppement de logiciels lean s'est d√©velopp√© au fil des ans.  Et comment elle √©tait associ√©e √† 3M dans les ann√©es 60, lorsque l'entreprise √©tait vraiment engag√©e dans le d√©veloppement Lean. <br><br>  Et elle a pos√© la question: combien de temps faut-il √† votre organisation pour d√©ployer les modifications associ√©es √† une ligne de code?  Pouvez-vous rendre ce processus fiable et reproductible? <br><br>  En r√®gle g√©n√©rale, cette question concernait toujours le code du logiciel.  Combien de temps me faudra-t-il pour corriger une erreur dans cette application lors du d√©ploiement en production?  Mais il n'y a aucune raison pour laquelle nous ne pouvons pas utiliser la m√™me question pour les infrastructures ou les bases de donn√©es. <br><br>  J'ai travaill√© pour une entreprise appel√©e OpenTable.  Dans ce document, nous avons appel√© cela la dur√©e du cycle.  Et dans OpenTable, elle avait sept semaines.  Et c'est relativement bon.  Je connais des entreprises qui mettent des mois √† envoyer un code en production.  Chez OpenTable, nous avons revu le processus pendant quatre ans.  Cela a pris beaucoup de temps, car l'organisation est grande - 200 personnes.  Et nous avons r√©duit le temps de cycle √† trois minutes.  Cela a √©t√© possible gr√¢ce aux mesures de l'effet de nos transformations. <br><br>  Maintenant, tout est script√©.  Nous avons tellement d'outils et d'exemples, il y a GitHub.  Par cons√©quent, prenez des id√©es de conf√©rences comme DevOops, mettez-les en ≈ìuvre dans votre organisation.  N'essayez pas de tout mettre en ≈ìuvre.  Prenez une toute petite chose et vendez-la.  Montrez quelqu'un.  L'impact d'un petit changement peut √™tre mesur√©, mesur√© et passer √† autre chose! <br><blockquote>  Paul Stack arrivera √† Saint-P√©tersbourg √† la conf√©rence <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevOops 2018</a> avec un rapport <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Tests de syst√®mes durables avec le Chaos¬ª</a> .  Paul parlera de la m√©thodologie Chaos Engineering et montrera comment utiliser cette m√©thodologie sur des projets r√©els. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr420661/">https://habr.com/ru/post/fr420661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr420651/index.html">Les scientifiques d√©couvrent des preuves d'un pr√©c√©dent d√©sagr√©able li√© au changement climatique</a></li>
<li><a href="../fr420653/index.html">Cinq choses que vous devez faire pour √©quiper votre maison sur Mars</a></li>
<li><a href="../fr420655/index.html">Des robots louent des appartements via Airbnb pour apprendre √† mieux saisir les objets</a></li>
<li><a href="../fr420657/index.html">Analyse: sur l'argent duquel Elon Musk pourra retirer Tesla de la bourse</a></li>
<li><a href="../fr420659/index.html">Campagne USB de HRF (Human Rights Foundation) ¬´Flash Drives for Freedom¬ª</a></li>
<li><a href="../fr420663/index.html">Des mesures simples et un moyen de gagner du temps lors de la recherche de probl√®mes dans l'infrastructure</a></li>
<li><a href="../fr420665/index.html">Cr√©ation d'une application sur .NET Core et Kubernetes: notre exp√©rience</a></li>
<li><a href="../fr420667/index.html">Principes de fonctionnement du protocole EIGRP</a></li>
<li><a href="../fr420669/index.html">Aper√ßu du march√© de l'automatisation d'entreprise: solutions pour les soci√©t√©s de construction et de gestion de logements et de services publics</a></li>
<li><a href="../fr420671/index.html">[Ekaterinbourg, annonce] UralJS # 9 - trois rapports sur les microservices, les tests et la journalisation des erreurs √† l'avant</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>