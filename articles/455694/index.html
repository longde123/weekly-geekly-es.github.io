<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç£ üë©üèΩ‚Äçüî¨ ü•ï Arquitectura de facturaci√≥n de la pr√≥xima generaci√≥n: transici√≥n a Tarantool üïã ü•£ üåâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øPor qu√© una corporaci√≥n como MegaFon, Tarantool en facturaci√≥n? Desde el exterior, parece que el vendedor generalmente viene, trae una caja grande, c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arquitectura de facturaci√≥n de la pr√≥xima generaci√≥n: transici√≥n a Tarantool</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/455694/">  ¬øPor qu√© una corporaci√≥n como MegaFon, Tarantool en facturaci√≥n?  Desde el exterior, parece que el vendedor generalmente viene, trae una caja grande, conecta el enchufe al enchufe, ¬°aqu√≠ viene la facturaci√≥n!  Sol√≠a ‚Äã‚Äãser, pero ahora es arcaico, y tales dinosaurios ya se han extinguido o se est√°n extinguiendo.  Inicialmente, la facturaci√≥n es un sistema de facturaci√≥n: un lector o una calculadora.  En las telecomunicaciones modernas, este es <b>un sistema de automatizaci√≥n para todo el ciclo de vida de la interacci√≥n con el suscriptor desde la conclusi√≥n del contrato hasta la terminaci√≥n</b> , incluida la facturaci√≥n en tiempo real, la aceptaci√≥n de pagos y mucho m√°s.  La facturaci√≥n en las compa√±√≠as de telecomunicaciones es similar a un robot de combate: grande, poderoso y lleno de armas. <br><br><img src="https://habrastorage.org/webt/fm/qq/n0/fmqqn0374oz43yleqaghmzfmh3i.jpeg"><br><br>  ¬øY aqu√≠ est√° Tarantool?  <b>Oleg Ivlev</b> y <b>Andrey Knyazev</b> hablar√°n sobre esto.  Oleg es el arquitecto jefe de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MegaFon</a> con una amplia experiencia trabajando en empresas extranjeras, Andrey es el director de sistemas comerciales.  A partir de la transcripci√≥n de su informe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conferencia de Tarantool 2018,</a> aprender√° por qu√© se necesita investigaci√≥n y desarrollo en las corporaciones, qu√© es Tarantool, c√≥mo el punto muerto para la escala vertical y la globalizaci√≥n se convirtieron en los requisitos previos para el surgimiento de esta base de datos en la empresa, sobre los desaf√≠os tecnol√≥gicos, la transformaci√≥n de la arquitectura y c√≥mo el tecnostek de MegaFon se asemeja a Netflix, Google y Amazon. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/bW24mJwSllQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Proyecto de facturaci√≥n √∫nica </h2><br>  El proyecto que se discutir√° se llama "Facturaci√≥n √∫nica".  Fue en √©l que Tarantool mostr√≥ sus mejores cualidades. <br><br><img src="https://habrastorage.org/webt/gz/zv/uz/gzzvuztrluedxrko5az64xmlqs4.jpeg"><br><br>  El crecimiento del rendimiento de los equipos Hi-End no sigui√≥ el ritmo del crecimiento de la base de suscriptores y el crecimiento en la cantidad de servicios, se esperaba un mayor crecimiento en la cantidad de suscriptores y servicios debido a M2M, IoT, y las caracter√≠sticas de las sucursales llevaron a un deterioro del tiempo de comercializaci√≥n.  La compa√±√≠a decidi√≥ crear un sistema comercial unificado con una arquitectura modular √∫nica de clase mundial, en lugar de 8 sistemas de facturaci√≥n diferentes actuales. <br><br>  <b>MegaFon es ocho empresas en una</b> .  En 2009, se complet√≥ la reorganizaci√≥n: las sucursales en toda Rusia se fusionaron en una sola compa√±√≠a MegaFon OJSC (ahora PJSC).  Por lo tanto, la empresa cuenta con 8 sistemas de facturaci√≥n con sus propias soluciones "personalizadas", caracter√≠sticas de sucursal y una estructura organizativa, TI y marketing diferente. <br><br>  Todo estuvo bien hasta que tuve que lanzar un producto federal com√∫n.  Aqu√≠ aparecieron muchas dificultades: para algunos, aranceles con redondeo, para otros, en menor medida, y para otros, de acuerdo con la media aritm√©tica.  Hay miles de esos momentos. <br><br>  A pesar de que la versi√≥n del sistema de facturaci√≥n es la misma, un proveedor, las configuraciones divergieron para que el pegamento durante mucho tiempo.  Intentamos reducir su n√∫mero y encontramos un segundo problema que es familiar para muchas corporaciones. <br><br>  <b>Escalado vertical</b> .  Incluso el hierro m√°s fresco en ese momento no satisfizo las necesidades.  Utilizamos el equipo Hewlett-Packard, la l√≠nea Superdome Hi-End, pero no supuso la necesidad de incluso dos sucursales.  Quer√≠a escala horizontal sin grandes costos de transacci√≥n e inversiones de capital. <br><br>  <b>Expectativa de crecimiento en el n√∫mero de suscriptores y servicios</b> .  Los consultores han tra√≠do historias sobre IoT y M2M al mundo de las telecomunicaciones: llegar√° un momento en que cada tel√©fono y plancha tendr√°n una tarjeta SIM y dos en el refrigerador.  Hoy tenemos un n√∫mero de suscriptores, y en un futuro pr√≥ximo habr√° un orden de magnitud m√°s. <br><br><h2>  Desaf√≠os tecnol√≥gicos </h2><br>  Estas cuatro razones nos llevaron a cambios importantes.  Hab√≠a una opci√≥n entre actualizar el sistema y dise√±ar desde cero.  Pensaron durante mucho tiempo, tomaron decisiones serias, jugaron licitaciones.  Como resultado, decidieron dise√±ar desde el principio y asumieron desaf√≠os interesantes: desaf√≠os tecnol√≥gicos. <br><br><h3>  Escalabilidad </h3><br>  Si antes hab√≠a, digamos, <b>8 cuentas de facturaci√≥n para 15 millones de suscriptores</b> , y ahora deber√≠an haber resultado <b>100 millones de suscriptores y m√°s</b> : la carga es un orden de magnitud mayor. <br><br><blockquote>  Nos hemos convertido en una escala comparable a los principales jugadores de Internet como Mail.ru o Netflix. </blockquote><br>  Pero nuevos movimientos para aumentar la carga y la base de suscriptores nos plantearon serios desaf√≠os. <br><br><h3>  La geograf√≠a de nuestro vasto pa√≠s. </h3><br>  Entre Kaliningrado y Vladivostok <b>7500 km y 10 zonas horarias</b> .  La velocidad de la luz es finita y con tales demoras las distancias ya son significativas.  150 ms en los mejores canales √≥pticos modernos es un poco demasiado para la facturaci√≥n en tiempo real, especialmente porque ahora est√° en las telecomunicaciones en Rusia.  Adem√°s, debe actualizar en un d√≠a h√°bil y con diferentes zonas horarias; esto es un problema. <br><br>  No solo brindamos servicios por una tarifa mensual, tenemos tarifas complejas, paquetes y varios modificadores.  No solo necesitamos permitir o prohibir que el suscriptor hable, sino tambi√©n darle una cierta cuota: calcular llamadas y acciones en tiempo real para que no se d√© cuenta. <br><br><h3>  Tolerancia a fallos </h3><br><blockquote>  Este es el otro lado de la centralizaci√≥n. </blockquote><br>  Si reunimos a todos los suscriptores en un sistema, cualquier evento de emergencia y desastre es desastroso para los negocios.  Por lo tanto, dise√±amos el sistema de tal manera que excluya el efecto de los accidentes en toda la base de suscriptores. <br><br>  Esto es nuevamente una consecuencia del rechazo de la escala vertical.  Cuando entramos en la escala horizontal, aumentamos la cantidad de servidores de cientos a miles.  Deben ser gestionados e intercambiables, respaldados autom√°ticamente por la infraestructura de TI y restaurado el sistema distribuido. <br><br>  Tales desaf√≠os interesantes nos confrontaron.  Dise√±amos el sistema, y ‚Äã‚Äãen ese momento tratamos de encontrar las mejores pr√°cticas del mundo para verificar cu√°nto estamos en tendencia, cu√°nto seguimos las tecnolog√≠as avanzadas. <br><br><h2>  Experiencia mundial </h2><br><blockquote>  Sorprendentemente, en el mundo de las telecomunicaciones no encontramos una sola referencia. </blockquote><br>  Europa cay√≥ por el n√∫mero de suscriptores y la escala, los Estados Unidos, por el plano de sus tarifas.  Buscamos algo en China, pero encontramos algo en India y tomamos especialistas de Vodafone India. <br><br>  Para analizar la arquitectura, se form√≥ el Dream Team, dirigido por IBM, arquitectos de diversos campos.  Estas personas podr√≠an evaluar adecuadamente lo que estamos haciendo y aportar cierto conocimiento a nuestra arquitectura. <br><br><h2>  Escala </h2><br>  Algunos n√∫meros para ilustrar. <br><br>  Dise√±amos un sistema para <b>80 millones de suscriptores con una reserva de mil millones</b> .  Entonces eliminamos los umbrales futuros.  Esto no se debe a que vamos a tomar China, sino a la presi√≥n de IoT y M2M. <br><br>  <b>Se procesan 300 millones de documentos en tiempo real</b> .  Aunque tenemos 80 millones de suscriptores, trabajamos con clientes potenciales y aquellos que nos dejaron si necesitamos cobrar cuentas por cobrar.  Por lo tanto, los vol√∫menes reales son mucho m√°s grandes. <br><br>  <b>2.000 millones de transacciones</b> cambian diariamente el saldo: estos son pagos, cargos, llamadas y otros eventos.  <b>200 TB de datos cambian activamente</b> , <b>8 PB de datos</b> cambian un poco m√°s lentamente, y esto no es un archivo, sino datos en vivo en una sola facturaci√≥n.  La escala del <b>centro de</b> datos es de <b>5 mil servidores en 14 sitios</b> . <br><br><h2>  Pila de tecnolog√≠a </h2><br>  Cuando planificamos la arquitectura y comenzamos a ensamblar el sistema, importamos las tecnolog√≠as m√°s interesantes y avanzadas.  El resultado fue una pila tecnol√≥gica que es familiar para cualquier jugador de Internet y corporaciones que hacen sistemas altamente cargados. <br><br><img src="https://habrastorage.org/webt/cq/km/ys/cqkmyscpadcxt7nokj1_y_fwlny.jpeg"><br><br>  La pila es similar a las pilas de otros jugadores importantes: Netflix, Twitter, Viber.  Consta de 6 componentes, pero queremos reducirlo y unificarlo. <br><br><blockquote>  La flexibilidad es buena, pero en una gran corporaci√≥n no hay forma sin unificaci√≥n. </blockquote><br>  No vamos a cambiar el mismo Oracle a Tarantool.  En las realidades de las grandes empresas, esto es una utop√≠a, o una cruzada durante 5-10 a√±os con un resultado incomprensible.  Pero Cassandra y Couchbase se pueden reemplazar con Tarantool, y estamos comprometidos con esto. <br><br><h2>  ¬øPor qu√© Tarantool? </h2><br>  Hay 4 criterios simples por los que elegimos esta base de datos. <br><br>  <b>Velocidad</b> .  Realizamos pruebas de resistencia en sistemas industriales MegaFon.  Tarantool gan√≥: mostr√≥ el mejor rendimiento. <br><br>  Esto no quiere decir que otros sistemas no satisfagan las necesidades de MegaFon.  Las soluciones de memoria actuales son tan productivas que este stock de la compa√±√≠a es m√°s que suficiente.  Pero estamos interesados ‚Äã‚Äãen tratar con el l√≠der, y no con el que teje la cola, incluida la prueba de carga. <br><br><blockquote>  Tarantool cubre las necesidades de la empresa incluso a largo plazo. </blockquote><br>  <b>Costo total de propiedad</b> .  El soporte para Couchbase en los vol√∫menes de MegaFon cuesta dinero espacial, con Tarantool la situaci√≥n es mucho mejor, y en t√©rminos de funcionalidad est√°n cerca. <br><br>  Otra buena caracter√≠stica que influy√≥ ligeramente en nuestra elecci√≥n: Tarantool funciona mejor que otras bases de datos con memoria.  Muestra la <b>m√°xima eficiencia</b> . <br><br>  <b>Fiabilidad</b>  MegaFon est√° invertido en confiabilidad, probablemente como ning√∫n otro.  Por lo tanto, cuando miramos Tarantool, nos dimos cuenta de lo que hay que hacer para que cumpla con nuestros requisitos. <br><br>  Invertimos nuestro tiempo y finanzas, y junto con Mail.ru creamos una versi√≥n empresarial, que ahora utilizan otras compa√±√≠as. <br><br><blockquote>  Tarantool-enterprise nos satisfizo por completo con seguridad, confiabilidad y registro. </blockquote><br><h3>  Asociaci√≥n </h3><br>  Lo m√°s importante para m√≠ es <b>el contacto directo con el desarrollador</b> .  Esto es exactamente lo que los chicos de Tarantool sobornaron. <br><br>  Si vienes a un jugador, especialmente a uno que trabaja con un cliente ancla, y dices que necesitas la base de datos para poder hacer esto, esto y aquello, generalmente responde: <br><br>  <i>- Bueno, pon los requisitos debajo de ese mont√≥n; alg√∫n d√≠a, probablemente, los alcanzaremos.</i> <br><br>  Muchos tienen una hoja de ruta para los pr√≥ximos 2-3 a√±os, y es casi imposible integrarse all√≠, y los desarrolladores de Tarantool sobornan con apertura, y no solo con MegaFon, y adaptan su sistema al cliente.  Esto es genial y realmente nos gusta. <br><br><h2>  ¬øD√≥nde aplicamos Tarantool? </h2><br>  En nosotros Tarantool se usa en varios elementos.  <b>El primero est√° en el piloto</b> , que hicimos en el sistema de directorio de direcciones.  En un momento, quer√≠a que fuera un sistema similar a Yandex.Maps y Google Maps, pero result√≥ un poco diferente. <br><br>  Por ejemplo, el directorio de direcciones en la interfaz de ventas.  En Oracle, encontrar la direcci√≥n que necesita tarda entre 12 y 13 s.  - n√∫meros inc√≥modos.  Cuando cambiamos a Tarantool, reemplazamos Oracle con otra base de datos en la consola y realizamos la misma b√∫squeda, ¬°obtenemos 200 veces la aceleraci√≥n!  La ciudad aparece despu√©s de la tercera letra.  Ahora estamos adaptando la interfaz para que esto ocurra despu√©s del primero.  Sin embargo, la velocidad de respuesta es completamente diferente: ya es milisegundos en lugar de segundos. <br><br>  <b>La segunda aplicaci√≥n es un tema de moda llamado TI de dos velocidades</b> .  Esto se debe a que los consultores de cada hierro dicen que las corporaciones deber√≠an ir all√≠. <br><br><img src="https://habrastorage.org/webt/3j/mb/oc/3jmboctdb2q3n6iwdlf1auvf_x0.jpeg"><br><br>  Hay una capa de infraestructura, dominios por encima, por ejemplo, un sistema de facturaci√≥n, como telecomunicaciones, sistemas corporativos, informes corporativos.  Este es el n√∫cleo que no necesita ser tocado.  Eso es, por supuesto, posible, pero paranoico en proporcionar calidad, porque aporta dinero a la corporaci√≥n. <br><br>  Luego viene la capa de microservicios, la que diferencia al operador u otro jugador.  Los microservicios se pueden crear r√°pidamente sobre la base de ciertos cach√©s, levantando datos de diferentes dominios all√≠.  Aqu√≠ hay un <b>campo para experimentos</b> : si algo no funcion√≥, cerr√≥ un microservicio y abri√≥ otro.  Esto proporciona un tiempo de comercializaci√≥n verdaderamente mejorado y aumenta la fiabilidad y la velocidad de la empresa. <br><br><blockquote>  Los microservicios son quiz√°s el papel principal de Tarantool en MegaFon. </blockquote><br><h2>  Donde planeamos aplicar Tarantool </h2><br>  Si comparamos nuestro exitoso proyecto de facturaci√≥n con programas de transformaci√≥n en Deutsche Telekom, Svyazkome, Vodafone India, es sorprendentemente din√°mico y creativo.  En el proceso de implementaci√≥n de este proyecto, no solo se transformaron MegaFon y su estructura, sino que tambi√©n apareci√≥ Tarantool-enterprise en Mail.ru, y nuestro proveedor Nexign (anteriormente Peter-Service) ten√≠a un BSS Box (soluci√≥n de facturaci√≥n en caja). <br><br>  En cierto sentido, este es un proyecto hist√≥rico para el mercado ruso.  Se puede comparar con lo que se describe en el libro de Frederick Brooks "Mythical Man-Month".  Luego, en los a√±os 60, IBM atrajo a 5,000 personas para desarrollar un nuevo sistema operativo OS / 360 para mainframes.  Tenemos menos - 1,800, pero los nuestros est√°n en chalecos, y teniendo en cuenta el uso de c√≥digo abierto y nuevos enfoques, trabajamos de manera m√°s productiva. <br><br>  Los dominios de facturaci√≥n o, m√°s ampliamente, los sistemas empresariales se muestran a continuaci√≥n.  Las personas en la empresa conocen muy bien el CRM.  Todos deber√≠an tener otros sistemas: Open API, Gateway API. <br><br><img src="https://habrastorage.org/webt/lj/g1/ec/ljg1ecnbyprze3f4js1j7899h9e.jpeg"><br><br><h3>  API abierta </h3><br>  Veamos nuevamente los n√∫meros y c√≥mo funciona la API abierta ahora.  Su carga es de <b>10.000 transacciones por segundo</b> .  Como planeamos desarrollar activamente la capa de microservicio y construir la API p√∫blica MegaFon, esperamos un mayor crecimiento en el futuro en esta parte en particular.  <b>100,000 transacciones definitivamente ser√°n</b> . <br><br>  No s√© si el SSO es comparable a Mail.ru: los chicos, como, tienen 1,000,000 de transacciones por segundo.  Estamos extremadamente interesados ‚Äã‚Äãen su soluci√≥n y planeamos aprender de su experiencia, por ejemplo, para hacer una reserva de SSO funcional utilizando Tarantool.  Ahora los desarrolladores de Mail.ru est√°n haciendo esto con nosotros. <br><br><h2>  CRM </h2><br>  CRM: estos son los 80 millones de suscriptores que queremos llevar a mil millones, porque ya hay 300 millones de documentos que incluyen una historia de tres a√±os.  Realmente esperamos nuevos servicios, y aqu√≠ <b>el punto de crecimiento son los servicios conectados</b> .  Esta es una pelota que crecer√°, porque habr√° m√°s y m√°s servicios.  En consecuencia, se necesitar√° una historia, no queremos tropezar con esto. <br><br>  Facturarse a s√≠ mismo en t√©rminos de facturaci√≥n, trabajar con las cuentas por cobrar de los clientes se <b>transform√≥ en un dominio separado</b> .  Para maximizar el rendimiento, <b>se aplica la plantilla arquitect√≥nica de arquitectura de dominio</b> . <br><br><blockquote>  El sistema se divide en dominios, la carga se distribuye y se proporciona tolerancia a fallas.  Adem√°s, trabajamos con arquitectura distribuida. </blockquote><br>  Todo lo dem√°s son soluciones de nivel empresarial.  En la tienda de llamadas: <b>2 mil millones por d√≠a</b> , 60 mil millones por mes.  A veces tienes que contarlos por un mes, y mejor r√°pidamente.  <b>El monitoreo financiero</b> es precisamente los 300 millones que crecen y crecen constantemente: los suscriptores a menudo corren entre operadores, lo que aumenta esta parte. <br><br>  El componente m√°s telecom de las comunicaciones m√≥viles es <b>la facturaci√≥n en l√≠nea</b> .  Estos son los sistemas que le permiten llamar o no llamar, tomar una decisi√≥n en tiempo real.  Aqu√≠, la carga es de 30,000 transacciones por segundo, pero teniendo en cuenta el crecimiento en la transferencia de datos, planificamos <b>250,000 transacciones</b> y, por lo tanto, estamos muy interesados ‚Äã‚Äãen Tarantool. <br><br>  La imagen anterior es los dominios donde vamos a usar Tarantool.  El CRM en s√≠ mismo, por supuesto, es m√°s amplio y lo vamos a aplicar en el n√∫cleo mismo. <br><br>  Nuestro TTX estimado de 100 millones de suscriptores me confunde como arquitecto, ¬øy si 101 millones?  ¬øRehacer todo de nuevo?  Para evitar esto, utilizamos cach√©s, al mismo tiempo que aumenta la accesibilidad. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/167/a80/b0e/167a80b0e38db7f135407b097284a3ff.jpg"><br><br>  En general, hay dos enfoques para usar Tarantool.  El primero es <b>construir todas las memorias cach√© en el nivel de microservicio</b> .  Seg√∫n tengo entendido, VimpelCom sigue este camino, creando un cach√© de cliente. <br><br>  Dependemos menos de los proveedores, estamos cambiando el n√∫cleo de BSS, por lo que tenemos un √≠ndice de tarjeta de cliente √∫nico listo para usar.  Pero queremos bordarlo.  Por lo tanto, usamos un enfoque ligeramente diferente: <b>hacemos cach√©s dentro de los sistemas</b> . <br><br><blockquote>  Por lo tanto, hay menos de un rassynchron: un sistema es responsable tanto de la memoria cach√© como de la fuente maestra principal. </blockquote><br>  El m√©todo encaja bien con el enfoque de esqueleto transaccional de Tarantool, cuando solo se actualizan las partes relacionadas con las actualizaciones, es decir, los cambios de datos.  Todo lo dem√°s se puede almacenar en otro lugar.  No hay un gran lago de datos, cach√© global no administrado.  Los cach√©s est√°n dise√±ados para el sistema, ya sea para productos o para clientes, o para facilitar la vida del servicio.  Cuando un suscriptor llama molesto por la calidad, quiero servirlo cualitativamente. <br><br><h2>  RTO y RPO </h2><br>  Hay dos t√©rminos en TI: <b>RTO</b> y <b>RPO</b> . <br><br>  <b>El objetivo</b> del tiempo de recuperaci√≥n es el tiempo para recuperar un servicio despu√©s de una falla.  RTO = 0 significa que incluso si algo cae, el servicio contin√∫a funcionando. <br><br>  <b>El objetivo del punto</b> de recuperaci√≥n es el tiempo para recuperar datos, cu√°ntos datos podemos perder en un per√≠odo de tiempo.  RPO = 0 significa que no estamos perdiendo datos. <br><br><h2>  Desaf√≠o de Tarantool </h2><br>  Intentemos resolver el problema de Tarantool. <br><br>  <b>Dado</b> : todos entienden la cesta de aplicaciones, por ejemplo, en Amazon o en otro lugar.  <b>Se requiere</b> que la canasta trabaje las 24 horas, los 7 d√≠as de la semana, o el 99.99% del tiempo.  Los pedidos que nos llegan deben mantener el orden, porque no podemos habilitar o deshabilitar al azar la comunicaci√≥n para el suscriptor; todo debe ser estrictamente coherente.  La suscripci√≥n anterior afecta a la siguiente, por lo que los datos son importantes: no se debe perder nada. <br><br>  <b>Soluci√≥n</b>  Puede intentar resolverlo de frente y preguntar a los desarrolladores de la base de datos, pero el problema no se resuelve matem√°ticamente.  Uno puede recordar teoremas, leyes de conservaci√≥n, f√≠sica cu√°ntica, pero por qu√©, no se puede resolver a nivel DB. <br><br>  El buen enfoque arquitect√≥nico antiguo funciona aqu√≠: debe conocer bien el √°rea tem√°tica y, a su costa, resolver este acertijo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/944/6e3/d25/9446e3d25815306bbe9dce45df4350ab.jpg"><br><br>  <b>Nuestra soluci√≥n: crear un registro distribuido de aplicaciones para Tarantool, un cl√∫ster geodistribuido</b> .  En el diagrama, estos son tres centros de datos diferentes: dos para los Urales, uno m√°s all√° de los Urales, y distribuimos todas las aplicaciones a estos centros. <br><br>  Netflix, que ahora se considera uno de los l√≠deres en TI, solo ten√≠a un centro de datos hasta 2012.  En la v√≠spera de la Navidad cat√≥lica el 24 de diciembre, este centro de datos se cay√≥.  Los usuarios de Canad√° y Estados Unidos se quedaron sin sus pel√≠culas favoritas, muy molestos y escribieron sobre esto en las redes sociales.  Netflix ahora tiene tres centros de datos en la costa oeste-este y uno en Europa occidental. <br><br><blockquote>  Inicialmente creamos una soluci√≥n geo-distribuida: la tolerancia a fallas es importante para nosotros. </blockquote><br>  Entonces, tenemos un cl√∫ster, pero ¬øqu√© pasa con RPO = 0 y RTO = 0?  La soluci√≥n es simple, que depende del tema. <br><br>  ¬øQu√© es importante en las aplicaciones?  Dos partes: tirar la canasta <b>ANTES de</b> tomar una decisi√≥n de compra y <b>DESPU√âS</b> .  Una parte de DO en una telecomunicaci√≥n generalmente se llama <b>captura de</b> <b>√≥rdenes</b> o <b>negociaci√≥n de √≥rdenes</b> .  En telecomunicaciones, esto puede ser mucho m√°s complicado que en la tienda en l√≠nea, porque all√≠ debe atender al cliente, ofrecer 5 opciones, y todo esto sucede por un tiempo, pero la canasta est√° llena.  En este punto, es posible una falla, pero no da miedo, porque ocurre de manera interactiva bajo la supervisi√≥n de una persona. <br><br>  Si el centro de datos de Mosc√∫ falla repentinamente y luego cambia autom√°ticamente a otro centro de datos, continuaremos trabajando.  Te√≥ricamente, un producto en una cesta puede perderse, pero usted ve esto, complemente la cesta nuevamente y contin√∫e trabajando.  En este caso, RTO = 0. <br><br>  En el mismo momento, hay una segunda opci√≥n: cuando hacemos clic en "enviar", queremos que los datos no se pierdan.  A partir de este momento, la automatizaci√≥n comienza a funcionar: esto ya es RPO = 0. La aplicaci√≥n de estos dos patrones diferentes en un caso puede ser solo un cl√∫ster geodistribuido con un maestro conmutable, en el otro caso alg√∫n tipo de entrada de qu√≥rum.  Los patrones pueden variar, pero resolvemos el problema. <br><br>  Adem√°s, al tener un registro distribuido de aplicaciones, tambi√©n podemos escalarlo todo, para tener muchos despachadores y contratistas que acceden a este registro. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/28f/ab6/da3/28fab6da317b89510738c9b2497fe529.jpg"><br><br><h2>  Cassandra y Tarantool juntas </h2><br>  Hay otro caso: el <b>"escaparate de los equilibrios"</b> .  Este es solo un caso interesante del uso conjunto de Cassandra y Tarantool. <br><br>  Usamos Cassandra, porque 2 mil millones de llamadas por d√≠a no es el l√≠mite, y habr√° m√°s.  A los vendedores les encanta colorear el tr√°fico por fuente, por ejemplo, cada vez hay m√°s detalles en las redes sociales.  Todo esto aumenta la historia. <br><br><blockquote>  Cassandra le permite escalar horizontalmente a cualquier volumen. </blockquote><br>  Nos sentimos c√≥modos con Cassandra, pero ella tiene un problema: no es buena para leer.    , 30 000     ‚Äî <b>  </b> . <br><br>     ,      :    ,      -   ,     Cassandra.        ,     IBM manager file transfer ‚Äî   ,     ,   UDP, ,   TCP.  ,    ,       ,   -    ,       ‚Äî  . <br><br>    ,  <b>   </b> .      Kafka  Tarantool,     , ,  ,   <b> </b> ,       , , 100        2 . <br><br>   ,       2         ,    ,   . <br><br><h2>  Conclusi√≥n </h2><br>     Tarantool.     Mail.ru,     . <br><br>   BCG  McKinsey, Accenture  IBM     -  ‚Äî   ,   ,    ,  ,   . ,  Tarantool             .       . <br><br><blockquote>     ‚Äî     Tarantool Conference  ,   17      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">T+ Conference 2019</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´ Tarantool  Enterprise¬ª</a> .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´ Tarantool    Oracle¬ª</a> . ,  ,    .  ‚Äî  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>    :  ,    Tarantool, , ,   . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/455694/">https://habr.com/ru/post/455694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455678/index.html">En el camino de Sergey Pavlovich Korolev. Proyecto tripulado ruso moderno. Parte 1. "Federaci√≥n"</a></li>
<li><a href="../455682/index.html">¬øCu√°nto gastas en infraestructura? ¬øY c√≥mo ahorrar en esto?</a></li>
<li><a href="../455684/index.html">¬øPor qu√© realizamos un hackathon para probadores?</a></li>
<li><a href="../455686/index.html">¬øC√≥mo elegir la mejor herramienta de gesti√≥n de proyectos si eres un milenio?</a></li>
<li><a href="../455692/index.html">ASZP: el restyling o el teatro comienzan con una percha</a></li>
<li><a href="../455696/index.html">El estado electr√≥nico del futuro. Parte 2</a></li>
<li><a href="../455698/index.html">El libro "C√≥mo funciona JavaScript"</a></li>
<li><a href="../455700/index.html">4 trucos que nos ayudaron a optimizar la interfaz</a></li>
<li><a href="../455702/index.html">Generaci√≥n efectiva de n√∫meros en un intervalo dado</a></li>
<li><a href="../455710/index.html">¬øPor qu√© en Leroy Merlin necesitamos nuestro propio departamento de desarrollo ruso para 200 personas?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>