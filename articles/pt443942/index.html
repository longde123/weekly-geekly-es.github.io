<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèΩ üßöüèº ü¶ñ Configurando 802.1X em comutadores Cisco usando NPS de failover (Windows RADIUS com AD) üëñ ü•ô üö¥üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vamos considerar na pr√°tica o uso do Windows Active Directory + NPS (2 servidores para toler√¢ncia a falhas) + padr√£o 802.1x para controle de acesso e ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Configurando 802.1X em comutadores Cisco usando NPS de failover (Windows RADIUS com AD)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443942/"><img src="https://habrastorage.org/getpro/habr/post_images/fab/761/19d/fab76119df15e93b40fdfdeb0b91156e.png" alt="imagem"><br>  Vamos considerar na pr√°tica o uso do Windows Active Directory + NPS (2 servidores para toler√¢ncia a falhas) + padr√£o 802.1x para controle de acesso e autentica√ß√£o de usu√°rios - computadores de dom√≠nio - dispositivos.  Voc√™ pode se familiarizar com a teoria do padr√£o na Wikipedia, no link: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IEEE 802.1X</a> <br><br>  Como meu "laborat√≥rio" √© limitado em recursos, as fun√ß√µes do NPS e de um controlador de dom√≠nio s√£o compat√≠veis, mas eu recomendo que voc√™ compartilhe esses servi√ßos cr√≠ticos. <br><br>  N√£o conhe√ßo as maneiras padr√£o de sincronizar configura√ß√µes (pol√≠ticas) do Windows NPS; portanto, usaremos scripts do PowerShell iniciados pelo agendador de tarefas (o autor √© meu ex-colega).  Para autenticar computadores de dom√≠nio e para dispositivos que n√£o sabem usar o <b>802.1x</b> (telefones, impressoras etc.), a Diretiva de Grupo ser√° configurada e os grupos de seguran√ßa ser√£o criados. <br><br>  No final do artigo, falarei sobre alguns dos meandros do trabalho com o 802.1x - como usar switches n√£o gerenciados, ACLs din√¢micas, etc. Compartilharei informa√ß√µes sobre as "falhas" detectadas ... <br><a name="habracut"></a><br>  Vamos come√ßar instalando e configurando o NPS de failover no Windows Server 2012R2 (tudo ser√° o mesmo para 2016): no Gerenciador do Servidor -&gt; Assistente para Adicionar Fun√ß√µes e Recursos, selecione apenas o Servidor de Diretivas de Rede. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/b51/17f/c55b5117f0ebab8d5b10c808617418c5.png" alt="imagem"><br><br>  ou usando o PowerShell: <br><br><pre><code class="actionscript hljs">Install-WindowsFeature NPAS -IncludeManagementTools</code> </pre> <br><blockquote>  Um pequeno esclarecimento - j√° que, para o <b>EAP Protegido (PEAP),</b> voc√™ definitivamente precisar√° de um certificado confirmando a autenticidade do servidor (com os direitos de uso apropriados), que ser√° confi√°vel nos computadores clientes, ent√£o voc√™ provavelmente precisar√° instalar a fun√ß√£o de <b>Autoridade de Certifica√ß√£o</b> tamb√©m.  Mas vamos supor que voc√™ j√° tenha a <b>CA</b> instalada ... </blockquote>  Faremos o mesmo no segundo servidor.  Crie uma pasta para o script C: \ Scripts nos servidores e uma pasta de rede no segundo servidor <b>\\ SRV2 \ NPS-config $</b> <br><br>  No primeiro servidor, crie um script do PowerShell <i>C: \ Scripts \ Export-NPS-config.ps1</i> com o seguinte conte√∫do: <br><br><pre> <code class="actionscript hljs">Export-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"\\SRV2\NPS-config$\NPS.xml"</span></span></code> </pre> <br>  Depois disso, configure a tarefa no Task Sheduler: ‚Äú <i>Export-NpsConfiguration</i> ‚Äù <br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Export-NPS-config.ps1"</span></span></code> </pre> <br>  <i>Desempenho para todos os usu√°rios - execute com as permiss√µes mais altas</i> <i><br></i>  <i>Diariamente - repita a tarefa a cada 10 minutos.</i>  <i>dentro de 8 horas</i> <br><br>  No NPS em espera, configure a importa√ß√£o de configura√ß√£o (pol√≠ticas): <br>  crie um script do PowerShell: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Import-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"c:\NPS-config\NPS.xml"</span></span> &gt;&gt; C:\Scripts\Import-NPS-config.ps1</code> </pre> <br>  e a tarefa de sua implementa√ß√£o a cada 10 minutos: <br><br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Import-NPS-config.ps1"</span></span></code> </pre> <br>  <i>Desempenho para todos os usu√°rios - execute com as permiss√µes mais altas</i> <i><br></i>  <i>Diariamente - repita a tarefa a cada 10 minutos.</i>  <i>dentro de 8 horas</i> <br><br>  Agora, para verifica√ß√£o, adicionaremos alguns comutadores aos clientes RADIUS (IP e Segredo Compartilhado) no NPS em um dos servidores (!). Duas pol√≠ticas de solicita√ß√£o de conex√£o: <b>WIRED-Connect</b> (Condi√ß√£o: ‚Äútipo de porta NAS √© Ethernet‚Äù) e <b>WiFi -Empresa</b> (condi√ß√£o: ‚ÄúTipo de porta NAS √© IEEE 802.11‚Äù), bem como a pol√≠tica de rede <b><i>Access Network Network Devices</i></b> (Network Admins): <br><br><pre> <code class="xml hljs">:  Windows - domain\sg-network-admins :    -    (PAP, SPAP) :  RADIUS:  - Service-Type - Login    - Cisco-AV-Pair - Cisco - shell:priv-lvl=15</code> </pre> <br><br><div class="spoiler">  <b class="spoiler_title">No lado dos comutadores, as seguintes configura√ß√µes:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">aaa new-model aaa local authentication attempts max-fail 5 ! ! aaa group server radius NPS server-private 192.168.38.151 auth-port 1812 acct-port 1813 key %shared_secret% server-private 192.168.10.151 auth-port 1812 acct-port 1813 key %shared_secret% ! aaa authentication login default group NPS local aaa authentication dot1x default group NPS aaa authorization console aaa authorization exec default group NPS local if-authenticated aaa authorization network default group NPS ! aaa session-id common ! identity profile default ! dot1x system-auth-control ! ! line vty 0 4 exec-timeout 5 0 transport input ssh escape-character 99 line vty 5 15 exec-timeout 5 0 logging synchronous transport input ssh escape-character 99</code> </pre> <br></div></div><br>  Ap√≥s a configura√ß√£o, ap√≥s 10 minutos, todos os clients \ policy \ settings devem aparecer no NPS de backup e poderemos efetuar logon nos comutadores usando a conta ActiveDirectory, um membro do grupo \ sg-network-admins do dom√≠nio (que criamos anteriormente). <br><br>  Vamos para a configura√ß√£o do Active Directory - crie uma pol√≠tica de grupo e senha, crie os grupos necess√°rios. <br><br>  Diretiva de Grupo <i><b>Computers-8021x-Settings</b></i> : <br><br><pre> <b><code class="plaintext hljs">Computer Configuration (Enabled) Policies Windows Settings Security Settings System Services Wired AutoConfig (Startup Mode: Automatic) Wired Network (802.3) Policies</code></b> </pre> <br><div class="spoiler">  <b class="spoiler_title">NPS-802-1x</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Name NPS-802-1x Description 802.1x Global Settings SETTING VALUE Use Windows wired LAN network services for clients Enabled Shared user credentials for network authentication Enabled Network Profile Security Settings Enable use of IEEE 802.1X authentication for network access Enabled Enforce use of IEEE 802.1X authentication for network access Disabled IEEE 802.1X Settings Computer Authentication Computer only Maximum Authentication Failures 10 Maximum EAPOL-Start Messages Sent Held Period (seconds) Start Period (seconds) Authentication Period (seconds) Network Authentication Method Properties Authentication method Protected EAP (PEAP) Validate server certificate Enabled Connect to these servers Do not prompt user to authorize new servers or trusted certification authorities Disabled Enable fast reconnect Enabled Disconnect if server does not present cryptobinding TLV Disabled Enforce network access protection Disabled Authentication Method Configuration Authentication method Secured password (EAP-MSCHAP v2) Automatically use my Windows logon name and password(and domain if any) Enabled</code> </pre> <br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/88f/cd4/c48/88fcd4c486e62979b592d5a633270e59.png" alt="Pol√≠tica NPS-802-1x_AD"><br><br>  Crie um grupo de seguran√ßa <b><i>sg-computers-8021x-vl100</i></b> , onde adicionaremos os computadores que queremos distribuir √† vlan 100 e configuraremos a filtragem para a pol√≠tica de grupo criada anteriormente para este grupo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79b/5d5/11c/79b5d511c9c2551781cfa4b8b4113552.png" alt="802.1x-Authentication-GPO-Filtering"><br><br>  Voc√™ pode verificar se a pol√≠tica foi implementada com √™xito abrindo a "Central de Rede e Compartilhamento (Configura√ß√µes de Rede e Internet) - Alterar as configura√ß√µes do adaptador (Definir configura√ß√µes do adaptador) - Propriedades do adaptador", onde podemos ver a guia "Autentica√ß√£o": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/2c9/6bf/d6f2c96bff36ee31b6549391c63f398a.png" alt="Autentica√ß√£o de acesso √† rede para o adaptador Ethernet"><br><br>  Quando estiver convencido de que a pol√≠tica foi aplicada com √™xito, voc√™ poder√° configurar a pol√≠tica de rede no NPS e nas portas do switch de acesso. <br><br>  Crie uma pol√≠tica de rede <b><i>neag-computers-8021x-vl100</i></b> : <br><br><pre> <code class="xml hljs">Conditions: Windows Groups - sg-computers-8021x-vl100 NAS Port Type - Ethernet Constraints: Authentication Methods - Microsoft: Protected EAP (PEAP) - Unencrypted authentication (PAP, SPAP) NAS Port Type - Ethernet Settings: Standard: Framed-MTU 1344 TunnelMediumType 802 (includes all 802 media plus Ethernet canonical format) TunnelPrivateGroupId 100 TunnelType Virtual LANs (VLAN)</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/1f9/8b9/4e3/1f98b94e3a813be72c498a4c92b71454.png" alt="Diretiva de rede de autentica√ß√£o 802.1x"><br><br>  Configura√ß√µes t√≠picas da porta do switch (chamo a aten√ß√£o para o fato de que o tipo de autentica√ß√£o √© "multi-dom√≠nio" - Data &amp; Voice, e tamb√©m √© poss√≠vel autenticar no endere√ßo Mac. Para o "per√≠odo de transi√ß√£o", faz sentido usar os seguintes par√¢metros: <br><br><pre> <code class="actionscript hljs">authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre><br>  o ID √© inserido n√£o em "quarentena", mas no mesmo local em que o computador do usu√°rio deve entrar ap√≥s o login bem-sucedido - at√© garantir que tudo funcione como deveria.  Os mesmos par√¢metros podem ser usados ‚Äã‚Äãem outros cen√°rios, por exemplo, quando um switch n√£o gerenciado √© inserido nessa porta e voc√™ deseja que todos os dispositivos conectados a ele e n√£o autenticados caiam em uma determinada vlan ("quarentena"). <br><br><div class="spoiler">  <b class="spoiler_title">configura√ß√µes da porta do switch em v√°rios dom√≠nios do modo host 802.1x</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">default</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> shu des PC-IPhone_802<span class="hljs-number"><span class="hljs-number">.1</span></span>x switchport mode access switchport nonegotiate switchport voice vlan <span class="hljs-number"><span class="hljs-number">55</span></span> switchport port-security maximum <span class="hljs-number"><span class="hljs-number">2</span></span> authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication host-mode multi-domain authentication port-control auto authentication violation restrict mab dot1x pae authenticator dot1x timeout quiet-period <span class="hljs-number"><span class="hljs-number">15</span></span> dot1x timeout tx-period <span class="hljs-number"><span class="hljs-number">3</span></span> storm-control broadcast level pps <span class="hljs-number"><span class="hljs-number">100</span></span> storm-control multicast level pps <span class="hljs-number"><span class="hljs-number">110</span></span> no vtp lldp receive lldp transmit spanning-tree portfast no shu exit</code> </pre> <br></div></div><br>  Voc√™ pode verificar se o computador / telefone foi autenticado com √™xito usando o comando: <br><br><pre> <code class="actionscript hljs">sh authentication sessions int Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span> det</code> </pre> <br>  Agora crie um grupo (por exemplo, <i>sg-fgpp-mab</i> ) no Active Directory para telefones e adicione um dispositivo de teste a ele (no meu caso, √© o <b><i>Grandstream GXP2160</i></b> com o endere√ßo em massa <b>000b.82ba.a7b1</b> e o <b>dom√≠nio de</b> conta correspondente <b>\ 000b82baa7b1</b> ) . <br><br>  Para o grupo criado, reduziremos os requisitos de diretiva de senha (usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diretivas de senha refinadas</a> atrav√©s do Centro Administrativo do Active Directory -&gt; dom√≠nio -&gt; Sistema -&gt; Cont√™iner de configura√ß√µes de senha) com os seguintes par√¢metros <b><i>Senha-Configura√ß√µes-para-MAB</i></b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cf/998/705/0cf998705b059c03465acd6057356d91.jpg" alt="Pol√≠ticas de senha refinada (FGPP) para dispositivos MAB"><br><br>  permitindo assim usar o endere√ßo mas de dispositivos como senhas.  Depois disso, podemos criar uma pol√≠tica de rede para autentica√ß√£o mab do m√©todo 802.1x, vamos cham√°-lo de neag-devices-8021x-voice.  Os par√¢metros s√£o os seguintes: <br><br><ul><li>  Tipo de porta NAS - Ethernet </li><li>  Grupos do Windows - sg-fgpp-mab </li><li>  Tipos de EAP: autentica√ß√£o n√£o criptografada (PAP, SPAP) </li><li>  Atributos RADIUS - Espec√≠ficos do fornecedor: Cisco - Par Cisco-AV - Valor do atributo: device-traffic-class = voice </li></ul><br>  ap√≥s a autentica√ß√£o bem-sucedida (n√£o esque√ßa de configurar a porta do switch), consulte as informa√ß√µes da porta: <br><br><div class="spoiler">  <b class="spoiler_title">autentica√ß√£o sh se int Gi1 / 0/34</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">---------------------------------------- Interface: GigabitEthernet1/0/34 MAC Address: 000b.82ba.a7b1 IP Address: 172.29.31.89 User-Name: 000b82baa7b1 Status: Authz Success Domain: VOICE Oper host mode: multi-domain Oper control dir: both Authorized By: Authentication Server Session timeout: N/A Idle timeout: N/A Common Session ID: 0000000000000EB2000B8C5E Acct Session ID: 0x00000134 Handle: 0xCE000EB3 Runnable methods list: Method State dot1x Failed over mab Authc Success</code> </pre> <br></div></div><br>  Agora, como prometido, considere algumas situa√ß√µes n√£o t√£o √≥bvias.  Por exemplo, precisamos conectar computadores \ dispositivos de usu√°rios atrav√©s de um switch n√£o gerenciado (switch).  Nesse caso, as configura√ß√µes de porta ser√£o assim: <br><br><div class="spoiler">  <b class="spoiler_title">alternar configura√ß√µes de porta no modo de autentica√ß√£o m√∫ltipla no modo host 802.1x</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GigabitEthernet1</span></span></span><span class="hljs-class">/0/1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">description</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SW</span></span></span><span class="hljs-class"> ‚Äì 802.1</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> ‚Äì 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mac</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">access</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonegotiate</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">voice</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 55 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">security</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">maximum</span></span></span><span class="hljs-class"> 8 !  -  - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fail</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">response</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">host</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multi</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auth</span></span></span><span class="hljs-class"> ! ‚Äì   </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">violation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">restrict</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mab</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pae</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authenticator</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">quiet</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 15 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tx</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">broadcast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multicast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 110 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vtp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">spanning</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tree</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">portfast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span></span></code> </pre> <br></div></div><br>  PS: uma falha muito estranha foi notada - se o dispositivo estava conectado atrav√©s de um comutador e, em seguida, estava preso em um comutador gerenciado, N√ÉO funcionar√° at√© reiniciarmos o comutador (!) At√© encontrar outras maneiras de resolver esse problema. <br><br>  Outro ponto relacionado ao DHCP (se estiver usando o snooping ip dhcp) √© sem estas op√ß√µes: <br><br><pre> <code class="actionscript hljs">ip dhcp snooping vlan <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-100</span></span> no ip dhcp snooping information option</code> </pre> <br>  por alguma raz√£o, o endere√ßo IP n√£o pode ser recebido corretamente ... embora isso possa ser um recurso do nosso servidor DHCP <br><br>  E o Mac OS e Linux (no qual o suporte a 802.1x √© nativo) est√£o tentando se autenticar com o usu√°rio, mesmo se a autentica√ß√£o por endere√ßo em massa estiver configurada. <br><br>  Na pr√≥xima parte do artigo, consideraremos o uso do 802.1x for Wireless (dependendo do grupo em que a conta do usu√°rio estiver, iremos ‚Äúsolt√°-la‚Äù na rede correspondente (vlan), embora eles se conectem ao mesmo SSID). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt443942/">https://habr.com/ru/post/pt443942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt443926/index.html">Carros "catamar√£s"</a></li>
<li><a href="../pt443928/index.html">Como andar de t√°xi √†s custas de outra pessoa - vulnerabilidades no exemplo de um servi√ßo</a></li>
<li><a href="../pt443934/index.html">CJDNS est√° morto, viva Yggdrasil</a></li>
<li><a href="../pt443938/index.html">NetXMS como um sistema de monitoramento para os pregui√ßosos ... e uma pequena compara√ß√£o com o Zabbix</a></li>
<li><a href="../pt443940/index.html">Como N√ÉO traduzir t√≠tulos de filmes</a></li>
<li><a href="../pt443946/index.html">A situa√ß√£o: as GPUs virtuais n√£o t√™m desempenho inferior √†s solu√ß√µes de ferro</a></li>
<li><a href="../pt443948/index.html">Competi√ß√£o "Sou um Intel Studio Expert" com super pr√™mios para desenvolvedores</a></li>
<li><a href="../pt443950/index.html">Confie, aconselhe, sugira - procure an√°lises reais de software</a></li>
<li><a href="../pt443952/index.html">Internet Soberana - pelo nosso dinheiro</a></li>
<li><a href="../pt443954/index.html">Singularidade tecnol√≥gica: o mito moderno do fim do mundo sob o disfarce da hip√≥tese de progresso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>