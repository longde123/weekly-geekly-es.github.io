<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’ˆ â– â˜„ï¸ Selamat Tahun Baru, Selamat Baru MQTT / UDP ğŸ‘¡ ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ ğŸ‰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai 

 Seperti yang saya tulis baru-baru ini ( Artikel pendek pertama tentang MQTT / UDP ), MQTT / UDP adalah protokol yang didasarkan pada MQTT, teta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Selamat Tahun Baru, Selamat Baru MQTT / UDP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435450/">  Hai <br><br>  Seperti yang saya tulis baru-baru ini ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel pendek pertama tentang MQTT / UDP</a> ), MQTT / UDP adalah protokol yang didasarkan pada MQTT, tetapi: <br><br><ul><li>  Mengikuti siaran UDP (tidak perlu perantara, hampir tidak membutuhkan konfigurasi) </li><li>  Sangat tidak mudah untuk diimplementasikan (10 baris pada C + UDP / IP stack - dan Anda mengirim data dari sensor) </li><li>  Semua orang mendengar semua orang </li></ul><br>  Di satu sisi, ini BISA, tetapi di atas Ethernet. <br><br>  Mengapa <br><a name="habracut"></a><br>  Apartemen saya sebenarnya telah hidup selama beberapa tahun di bawah kendali sistem seperti "rumah itu tidak benar-benar oligofrenik."  Akan berlebihan untuk menyebutnya intelijen, tetapi cahaya dan iklim otomatis.  Untuk membayangkan skala bencana - sistem ini menempati rak penuh berdebar sekitar 19 inci dan tinggi dua meter.  Dua dinding rak ditempati hampir ke lantai. <br><br>  Ketika saya merancang semua ini, masalah toleransi kesalahan menjadi prioritas utama.  Beberapa tahun operasi telah menunjukkan: itu benar.  Bantah semuanya.  Cepat atau lambat.  Tetapi relay elektromekanis belum gagal, dan itu adalah pada mereka eselon terakhir perlindungan terhadap kegagalan. <br><br>  Masalah selanjutnya setelah toleransi kesalahan adalah kebun binatang.  Karena perjalanan hidup yang alami, keingintahuan saya dan kebutuhan mendesak, Unix yang biasa pada PC biasa, Aries PLC, Raspberr + Orange PI, modul Atmega, modul berbasis NodeMCU (ESP8266) hidup dalam sistem, dan semua ini berjalan satu sama lain melalui modbus 485, modbus TCP, http, dan di sampingnya menggantung broker MQTT yang gelisah, sebagai warisan dari upaya gagal untuk beralih ke itu dengan seluruh kamp. <br><br>  Mengapa upaya untuk beralih ke MQTT tidak berhasil.  Pertama, untuk sebagian besinya berat atau rumit.  Pada fragmen Pascal yang bersembunyi di CodeSys PLC, hanya seorang masokis yang dapat menulis MQTT.  Tapi kemudian Anda perlu men-debug.  Demikian pula pada atmega: Anda bisa menjejalkan, tetapi erat.  Tapi ini bukan masalah keseluruhan. <br><br>  MQTT sebagaimana adanya (dan dapat diterima di mana saja 3.1.1) bersikeras mengirim paket PUBLISH (yaitu, pesan kami ke broker) ke semua penerima, termasuk pengirim.  Efek dari kegilaan ini mempesona - OpenHAB yang sama tidak dapat mengirim dan menerima data dalam MQTT dengan nama yang sama.  Ini berarti bahwa tidak mungkin untuk mengatur bus berdasarkan MQTT (beberapa modul yang memperbarui nilai objek yang sama dan menggunakannya).  Dan itulah tepatnya bagaimana komunikasi PLC harus diatur, di mana kontrol lampu utama hidup, OpenHAB, yang mengontrol cahaya dari antarmuka web dan aplikasi seluler, dan sakelar cerdas, yang ingin saya tambahkan di sini dan di sini.  Itu, tentu saja, masalah ini dapat diatasi, tetapi sebenarnya itu berarti membangun protokol Anda sendiri SURFACE MQTT, dan ini sepertinya sudah terlalu banyak. <br><br>  Pada saat yang sama, apa yang saya butuhkan?  Kirim pembaruan nilai parameter dan dapatkan di semua titik yang tertarik.  Untuk apa, sebenarnya, kakek melakukan UDP ke alamat siaran. <br><br>  Setelah posting terakhir tentang HabrÃ©, salah satu pembaca untuk waktu yang lama mencela saya dengan tidak dapat diandalkannya protokol UDP.  Secara spekulatif saya menjawabnya bahwa untuk IoT, UDP LEBIH dapat diandalkan daripada TCP: dengan hilangnya paket 50% pada jaringan, TCP tidak hanya berbaring, tetapi secara umum, dan sensor suhu yang mengirimkan pengukuran melalui UDP hanya akan kehilangan setengah jumlah, yang akan mempengaruhi pengoperasian sistem dengan cara apa pun.  Umumnya. <br><br>  Tapi itu spekulatif.  Namun, liburan Tahun Baru juga diberikan kepada seseorang untuk menyelesaikan minum sampanye untuk bertanya pada dirinya sendiri: akankah kita menempatkan LAN rumah kita di sekop hari ini?  Dan apa pun yang terjadi. <br><br>  Saya mengambil MQTT / UDP dan menulis tes primitif.  Satu sisi mengirimkan paket berturut-turut tanpa jeda di antara paket sebanyak mungkin.  Yang kedua mempertimbangkan kecepatan dan kehilangan paket.  Eksperimennya sederhana: kami meluncurkan ejekan ini, dan secara paralel dua TV HD menampilkan film dari Internet, dan komputer desktop menulis file besar ke NAS. <br><br>  Nilai hasilnya.  Saya menunggu semuanya, tapi ... kerugian maksimal untuk UDP mencapai setengah persen, dan kedua TV berhenti tampil.  Jadi saya masih pesimis.  Dalam jaringan rumah nyata, keandalan pengiriman UDP mendekati absolut.  Namun demikian, saya mungkin akan membuat versi dengan konfirmasi dan mengirim ulang paket.  Ada beberapa kesulitan, tetapi pertanyaannya dihapus sepenuhnya. <br><br>  Pertanyaan kedua adalah keamanan, tetapi benar, jika mereka membobol jaringan rumah saya, hilangnya data dari sensor suhu adalah hal terakhir yang saya akan berduka.  Namun, sekali lagi, tugas untuk menandatangani paket secara digital di pelacak masalah sudah ada, dan saya sudah mengerti bagaimana memperluas paket MQTT untuk implementasinya. <br><br>  Secara umum, saya merencanakan pasangan perangkat pertama di jaringan rumah untuk beralih ke MQTT / UDP beberapa hari yang lalu. <br><br>  Dan saya sarankan Anda mencobanya di program dan perangkat Anda: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Repositori</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi dalam bahasa Inggris</a> . <br><br>  Apa yang tersedia: <br><br>  Implementasi yang cukup lengkap di Java, Python, dan C.  Implementasi dasar pada Lua.  Sejauh ini, hanya mengirim untuk Arduino dan CodeSys PLC (diuji dan bekerja pada Aries, tetapi harus melakukan apa saja). <br><br>  Alat GUI untuk melihat apa yang terjadi dan mengintervensi: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f04/333/9c9/f043339c94a34a24a3887043f095baae.png" alt="gambar"><br><br>  Program untuk mengirim dan menerima data dalam Python, Lua dan Java. <br><br>  Konektor Python untuk integrasi dengan MQTT biasa dan langsung dengan OpenHAB.  Mereka bekerja perlindungan terhadap siklus, melarang siaran balik pesan selama 5 detik setelah melewati arah maju.  Selain itu, ada perpustakaan untuk membatasi aliran data yang diulang.  Dia memeriksa apakah sudah ada pembaruan dari topik ini untuk waktu yang ditentukan, dan jika dia lakukan, dia melewatkan pembaruan baru hanya jika data telah berubah. <br><br>  Saya berencana untuk secara bertahap pindah ke protokol ini sepenuhnya, dan ini adalah salah satu contoh dari apa yang ingin saya dapatkan dengan sensor: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3dc/6ed/528/3dc6ed528bb36067f12038fad62857c7.png"><br><br>  Ada tiga sensor dalam satu ruangan (baik, atau di jalan, itu tidak masalah).  Mereka mengirim sampel melalui MQTT / UDP.  Bacaan ini diterima secara bersamaan oleh sistem rumah pintar utama (OpenHAB), database historis dan monitor dinding yang menampilkan suhu untuk penduduk. <br><br>  Seluruh pesona MQTT / UDP adalah bahwa dalam skema seperti itu, kegagalan setiap blok tidak menimbulkan masalah bagi orang lain.  Dan ini dengan kesederhanaan mempesona protokol. <br><br>  Selain itu, skema kontrol yang berlebihan dengan duplikasi mudah diimplementasikan dalam skema yang sama.  Server database dapat diduplikasi tanpa masalah sama sekali.  Akan lebih sulit untuk menduplikasi modul yang berhubungan dengan manajemen.  Misalnya, mendengarkan suhu memberikan aksi kontrol pada radiator.  Tapi mungkin ini cerita selanjutnya.  Hari ini saya berencana untuk fokus mengumpulkan sinyal dari sensor dan bertukar antar modul rumah pintar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id435450/">https://habr.com/ru/post/id435450/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id435438/index.html">PHP: mengubah struktur basis data dalam pengembangan tim</a></li>
<li><a href="../id435442/index.html">Saluran perubahan</a></li>
<li><a href="../id435444/index.html">Kami menerapkan OSGI di platform Karaf</a></li>
<li><a href="../id435446/index.html">Algoritma Verhuff untuk sistem bilangan genap acak</a></li>
<li><a href="../id435448/index.html">Tentang pengalaman berkomunikasi dengan generator sinyal melalui QTcpSocket dan SCPI</a></li>
<li><a href="../id435452/index.html">Pengujian ujung ke ujung dari layanan microser dengan Catcher</a></li>
<li><a href="../id435454/index.html">AOP vs Fitur</a></li>
<li><a href="../id435456/index.html">Apakah berbahaya meninggalkan smartphone di sebelah Anda di malam hari?</a></li>
<li><a href="../id435460/index.html">Tur Foto Coworkidea Coworking (Barcelona)</a></li>
<li><a href="../id435462/index.html">Menguji proyek Node.js. Bagian 1. Tes anatomi dan jenis tes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>