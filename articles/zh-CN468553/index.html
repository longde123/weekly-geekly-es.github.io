<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👜 🙂 🦓 与版本控制系统类似的业务应用程序中的参数管理 ☣️ 🏇🏻 🌊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在各种应用中，任务经常出现来支持对象相对于某个主题（或多个主题）的某些属性的时间变化逻辑。 例如，这可能是商店中商品零售价的变化或员工的KPI指标。 

 在本文中，我将展示可以构建哪些域逻辑和接口来解决此问题。 我将立即做出保留，它将涉及用户对属性的管理影响，而不是历史变化的反映。 

 该实现将...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>与版本控制系统类似的业务应用程序中的参数管理</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lsfusion/blog/468553/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ht/ww/gi/htwwgiirud8bctw_f6ndjlbsoee.jpeg" alt="图片"></div><br> 在各种应用中，任务经常出现来支持对象相对于某个主题（或多个主题）的某些属性的时间变化逻辑。 例如，这可能是商店中商品零售价的变化或员工的KPI指标。 <br><br> 在本文中，我将展示可以构建哪些域逻辑和接口来解决此问题。 我将立即做出保留，它将涉及用户对属性的管理影响，而不是历史变化的反映。 <br><br> 该实现将在开放和免费的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">lsFusion</a>平台的基础上进行介绍，但是在使用任何其他技术时也可以应用类似的方案。 <br><a name="habracut"></a><br><h3> 引言 </h3><br> 为了更简单地介绍和理解文章，我们将价格作为属性，将产品作为对象，而仓库将成为主题。 在这种情况下，用于设置属性的最小可能间隔将是日期。 因此，用户将能够确定特定日期的任何产品和仓库的价格是多少。 <br><br> 价格更改的用户输入方案将类似于经典版本控制系统中使用的方案。 从域逻辑的角度来看，任何更改都将是一次<i>commit</i> ，基于该<i>commit</i>可以计算特定日期的状态。 在许多主题领域，此类提交称为文档或交易。 在这种情况下，通过此提交，我们将得到所谓的价格表。 每个价目表都会指定其中包含的货物和仓库，以及有效期。 <br><br> 所描述的方案具有以下优点： <br><br><ul><li>  <b>原子性</b> 。 每次更改均作为单独的文档发布。 因此，这些文档可以暂时保存，但不能发布。 输入错误时，很容易回滚整个更改。 </li><li>  <b>透明性</b> 可以轻松确定谁进行了更改以及何时进行更改，并通过在文档上进行注释来指出原因。 </li></ul><br> 与版本控制系统的主要区别在于，显式提交彼此独立。 因此，可以在任何时间相对轻松地删除所有提交。 另外，每个此类提交都可以设置为在其停止运行时结束，当然，这不在版本控制系统中。 <br><br><h3> 实作 </h3><br> 我们从仓库开始定义域逻辑。 让我们通过将仓库组合到一组动态深度的层次结构中，使解决方案更加复杂。 在相应的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a>中将描述按照什么原理完成操作，因此，我只给出一段代码来声明组并创建用于编辑它们的表单： <br><br><div class="spoiler">  <b class="spoiler_title">仓库组广告</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><code><font color="#a626a4">CLASS</font> Group <font color="#50a14f">' '</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Group); <br> <br> parent = <font color="#a626a4">DATA</font> Group (Group); <br> nameParent <font color="#50a14f">' '</font> (Group g) = name(parent(g)); <br> <br> level <font color="#50a14f">''</font> (Group child, Group parent) = <br> <font color="#a626a4">RECURSION</font> <font color="#986801">1l</font> <font color="#a626a4">IF</font> child <font color="#a626a4">IS</font> Group <font color="#a626a4">AND</font> parent = child <br> <font color="#a626a4">STEP</font> <font color="#986801">2l</font> <font color="#a626a4">IF</font> parent = parent($parent) <font color="#a626a4">MATERIALIZED</font> ; <br> <br> <font color="#a626a4">FORM</font> group <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (g) name, nameParent <br> <br> <font color="#a626a4">EDIT</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">FORM</font> groups <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">READONLY</font> name, nameParent <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> groups; <br> } <br></code> </td></tr></tbody></table></div></div></div><br><div class="spoiler">  <b class="spoiler_title">组层次结构示例</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fh/5e/ct/fh5ect60pun-rowwwblr7uucr9w.png" alt="图片"></div><br></div></div><br> 接下来，声明可以绑定到任何组的仓库： <br><br><div class="spoiler">  <b class="spoiler_title">仓库公告</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> Stock <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Stock); <br> <br> group <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Group (Stock); <br> nameGroup <font color="#50a14f">''</font> (Stock st) = name(group(st)); <br> <br> <font color="#a626a4">FORM</font> stock <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (s) name, nameGroup <br> <br> <font color="#a626a4">EDIT</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">FORM</font> stocks <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> stocks; <br> } <br></code> </td></tr></tbody></table></div><br></div></div><br><div class="spoiler">  <b class="spoiler_title">仓库实例</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/30/mc/iy/30mciyqfgm2bjiu9_-fonon1mga.png" alt="图片"></div><br></div></div><br> 最后，声明商品的逻辑： <br><br><div class="spoiler">  <b class="spoiler_title">产品公告</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> Product <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Product); <br> <br> <font color="#a626a4">FORM</font> product <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) name <br> <br> <font color="#a626a4">EDIT</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">FORM</font> products <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> name <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> products; <br> } <br></code> </td></tr></tbody></table></div></div></div><br><div class="spoiler">  <b class="spoiler_title">产品实例</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/sz/y6/3gszy6zobgdvqnmtzqzoynhdrzw.png" alt="图片"></div><br></div></div><br> 我们直接着手创建价格清单的逻辑。 首先，我们设置<i>价目表</i>类本身及其有效期： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> PriceList <font color="#50a14f">'-'</font> ; <br> fromDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList); <br> toDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList);</code> </td> </tr></tbody></table></div> 我们认为，如果未设置<i>日期</i> ，那么价目表将是无限的。 <br> 我们添加了一个事件，该事件在创建价格表时将自动放下它将开始运行的当前日期。 <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> <br> fromDate(p) &lt;- currentDate(); <br></code> </td></tr></tbody></table></div>  <i>LOCAL</i>关键字表示在将保存应用于数据库时不会触发该事件，而在进行更改时立即触发。 <br><br> 然后添加创建它的用户和创建时间： <br><div class="scrollable-table"><table><tbody><tr><td> <code>createdTime <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATETIME</font> (PriceList); <br> createdUser = <font color="#a626a4">DATA</font> User (PriceList); <br> nameCreatedUser <font color="#50a14f">''</font> (PriceList p) = name(createdUser(p)); <br></code> </td></tr></tbody></table></div> 现在创建一个将自动填充它们的事件： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">WHEN</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> { <br> createdTime(p) &lt;- currentDateTime(); <br> createdUser(p) &lt;- currentUser(); <br> } <br></code> </td></tr></tbody></table></div> 与上一个事件不同，仅在单击“保存”按钮时才会触发此事件。 也就是说，在保存事务到数据库期间。 <br><br> 接下来，创建将在其中设置商品和价格的价目表行： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> PriceListDetail <font color="#50a14f">' -'</font> ; <br> priceList = <font color="#a626a4">DATA</font> PriceList (PriceListDetail) <font color="#a626a4">NONULL</font> <font color="#a626a4">DELETE</font> ; <br> <br> product = <font color="#a626a4">DATA</font> Product (PriceListDetail); <br> nameProduct <font color="#50a14f">''</font> (PriceListDetail d) = name(product(d)); <br> <br> price <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">2</font> ] (PriceListDetail); <br></code> </td></tr></tbody></table></div>  <i>NONULL</i>属性指示<i>应该</i>始终设置<i>priceList</i>属性，而<i>DELETE</i>指示当该属性值为零时（例如，删除价格列表时），应自动删除相应的行。 <br><br> 为了将来使用，我们将创建将确定价目表行有效期的属性： <br><div class="scrollable-table"><table><tbody><tr><td> <code>fromDate <font color="#50a14f">' '</font> (PriceListDetail d) = fromDate(priceList(d)); <br> toDate <font color="#50a14f">' '</font> (PriceListDetail d) = toDate(priceList(d)); <br></code> </td></tr></tbody></table></div> 现在，我们将价格表绑定到将要运行的仓库。 首先，添加主属性，如果整个仓库组都包含在价格清单中，则该属性为true： <br><div class="scrollable-table"><table><tbody><tr><td> <code>dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Group); <br></code> </td></tr></tbody></table></div> 我们在考虑选定父级的情况下计算组的“包含”（如有关层次结构的文章中所述）： <br><div class="scrollable-table"><table><tbody><tr><td> <code>in <font color="#50a14f">' ()'</font> (PriceList p, Group child) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> dataIn(p, Group parent) <font color="#a626a4">ORDER</font> <font color="#a626a4">DESC</font> level(child, parent) <font color="#a626a4">WHERE</font> dataIn(p, parent); <br></code> </td></tr></tbody></table></div> 添加主要属性，您可以使用该属性指定价目表作用于特定仓库： <br><div class="scrollable-table"><table><tbody><tr><td> <code>dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Stock); <br></code> </td></tr></tbody></table></div> 我们计算最终属性，这将确定价格清单更改相应仓库中的价格，并考虑以下组： <br><div class="scrollable-table"><table><tbody><tr><td> <code>in <font color="#50a14f">''</font> (PriceList p, Stock s) = dataIn(p, s) <font color="#a626a4">OR</font> in(p, group(s)); <br></code> </td></tr></tbody></table></div> 创建一个属性，该属性将显示价格清单的所有选定组和仓库的名称，以使用户更方便地查看价格清单的列表： <br><div class="scrollable-table"><table><tbody><tr><td> <code>stocks <font color="#50a14f">''</font> (PriceList p) = <font color="#a626a4">CONCAT</font> <font color="#50a14f">' / '</font> , <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Group g) <font color="#a626a4">IF</font> dataIn(p, g), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> g, <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Stock s) <font color="#a626a4">IF</font> dataIn(p, s), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> s <br> <font color="#a626a4">CHARWIDTH</font> <font color="#986801">30</font> ; <br></code> </td></tr></tbody></table></div> 域逻辑描述的最后一步将直接计算仓库中货物的当前价格。 为此，创建一个属性，该属性查找包含所需货物，仓库和有效期的价格清单的最后一个日期行： <br><div class="scrollable-table"><table><tbody><tr><td> <code>priceListDetail (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> PriceListDetail d <br> <font color="#a626a4">ORDER</font> fromDate(d), d <br> <font color="#a626a4">WHERE</font> product(d) = p <font color="#a626a4">AND</font> in(priceList(d), s) <font color="#a626a4">AND</font> <br> fromDate(d) &lt;= dt <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> toDate(d) &lt; dt; <br></code> </td></tr></tbody></table></div> 在计算此属性的逻辑中，各种变化都是可能的。 您可以更改击中行的过滤器（例如，在发布价格清单的<i>WHERE</i>中添加条件）和订单。 应当注意，对象本身，或者更确切地说是其内部标识符，已经由第二参数添加到选择顺序中。 这是必需的，以便始终以唯一的方式确定价格值。 <br><br> 根据收到的价格清单行，我们确定价格值及其有效期： <br><div class="scrollable-table"><table><tbody><tr><td> <code>price <font color="#50a14f">''</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = price(priceListDetail(p, s, dt)); <br> fromDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = fromDate(priceListDetail(p, s, dt)); <br> toDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = toDate(priceListDetail(p, s, dt)); <br></code> </td></tr></tbody></table></div> 它们将在用户界面表中进一步使用。 <br><br> 接下来，我们继续构建用户界面。 首先，我们绘制一个用于编辑价格表的表格。 创建一个表单，然后在其中添加文档的“标题”： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">FORM</font> priceList <font color="#50a14f">'-'</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) fromDate, toDate <br> <br> <font color="#a626a4">EDIT</font> PriceList <font color="#a626a4">OBJECT</font> p <br> ; <br></code> </td></tr></tbody></table></div> 将价格清单行添加到表单中： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) nameProduct, price <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">NEW</font> , <font color="#a626a4">DELETE</font> <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br></code> </td></tr></tbody></table></div> 接下来，添加一棵树，其中将有组和仓库： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">TREE</font> stocks g = Group <font color="#a626a4">PARENT</font> parent, s = Stock <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g), name(s) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, g), in(p, g) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, s), in(p, s) <br> <font color="#a626a4">FILTERS</font> group(s) = g <br> ; <br></code> </td></tr></tbody></table></div> 组和仓库的属性同时添加到树中。 平台将根据对象的不同，以将其添加到表单的顺序显示此属性。 <br><br> 我们定制表单的设计，以便在单独的选项卡中绘制货物和仓库： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">DESIGN</font> priceList { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d) { caption = <font color="#50a14f">''</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> stocks) { caption = <font color="#50a14f">''</font> ; } <br> } <br> } <br> } <br></code> </td></tr></tbody></table></div> 编辑表单如下所示： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nr/dc/l9/nrdcl9twis0_96fwj8lhz2sb1w4.png" alt="图片"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rl/0c/qj/rl0cqj4vcyhb80a0rignrd3yt0w.png" alt="图片"></div><br> 建立价格管理的基本形式仍有待完成。 它包含两个选项卡。 第一个将显示所有价格表的列表（类似于提交列表）。 第二个选项卡将显示所选日期特定仓库的当前价格。 <br><br> 要实现第一个选项卡，请在表单中添加带有行的价格表列表以进行快速预览： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">FORM</font> managePrices <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> fromDate, toDate, stocks, createdTime, nameCreatedUser <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">READONLY</font> nameProduct, price <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br></code> </td></tr></tbody></table></div> 对于第二个选项卡，我们首先添加显示价格的日期，仓库组的树以及仓库本身： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> dt = <font color="#a626a4">DATE</font> <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">VALUE</font> (dt) <br> <br> <font color="#a626a4">TREE</font> groups g = Group <font color="#a626a4">PARENT</font> parent <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g) <br> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">FILTERS</font> level(group(s), g) <br> ; <br></code> </td></tr></tbody></table></div> 仓库列表将显示属于顶部所选组的所有后代的所有仓库。 <br><br> 接下来，在表单上添加在选定日期仓库有效价格的货物清单： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> pr = Product <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(pr), price(pr, s, dt), fromDate(pr, s, dt), toDate(pr, s, dt) <br> <font color="#a626a4">FILTERS</font> price(pr, s, dt) <br> ; <br></code> </td></tr></tbody></table></div> 价格本身和有效期都添加到列中。 您还可以添加价目表编号-该表将类似于版本控制系统中注释的逻辑。 <br><br> 为了让用户了解这种价格的来源，我们在价格表行的列表中添加了合适的商品和仓库： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> prd = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> <font color="#a626a4">BACKGROUND</font> (priceListDetail(pr, s, dt) = prd) <br> fromDate(prd), toDate(prd), <font color="#50a14f">''</font> = stocks(priceList(prd)), price(prd) <br> <font color="#a626a4">FILTERS</font> product(prd) = pr <font color="#a626a4">AND</font> in(priceList(prd), s) <br> ; <br></code> </td></tr></tbody></table></div> 使用<i>Background</i>属性<i>，</i>突出显示确定表中价格的行。 <br><br> 另外，为了方便用户，我们将添加一个功能，可以从该故事立即在新会话中打开相应价格表的编辑表单： <br><div class="scrollable-table"><table><tbody><tr><td> <code>edit (PriceListDetail d) + { edit(priceList(d)); } <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">PROPERTIES</font> (prd) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">EDIT</font> <br> ; <br></code> </td></tr></tbody></table></div> 为此，您需要通过实现内置的<i>编辑</i>操作来指定在尝试编辑行时将执行的操作。 然后，用于通过对话框调用编辑对象的标准按钮将以标准方式添加到表单。 <br><br> 最后，我们形成表单的最终设计： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">DESIGN</font> managePrices { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">NEW</font> priceLists { <br> caption = <font color="#50a14f">'-'</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (p); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d); <br> } <br> <font color="#a626a4">NEW</font> prices { <br> caption = <font color="#50a14f">''</font> ; <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">SPLITH</font> ; <br> <font color="#a626a4">NEW</font> leftPane { <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (dt); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> groups); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (s); <br> } <br> <font color="#a626a4">NEW</font> rightPane { <br> fill = <font color="#986801">3</font> ; <br> type = <font color="#a626a4">SPLITV</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (pr) { fill = <font color="#986801">3</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (prd); <br> } <br> } <br> } <br> } <br> } <br></code> </td></tr></tbody></table></div> 在这里，首先添加<i>窗格</i>容器，该<i>窗格</i>容器包含两个选项卡： <i>priceLists</i>和<i>prices</i> 。 其中第一个只是添加价目表和价目表。 在第二个中，创建两个面板： <i>leftPane</i>和<i>rightPane</i> 。 左侧面板包含日期和仓库，右侧面板包含货物和价格历史记录。 <br><br><h3> 结果 </h3><br> 考虑使用所得逻辑的主要选项。 <br><br> 假设我们针对不同的商品组有两个单独的价格表。 然后，根据所选仓库，在带有价格的标签中，将仅显示相应价格清单中的产品： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fj/pq/nc/fjpqnc-cp2whdwy9ihbl-xboeqg.gif" alt="图片"></div><br> 现在，创建一个具有有限有效期的新价格清单，一个精简的仓库清单和一个新价格。 在第二个选项卡上，如果我们在新价格表的范围内选择一个日期，则将从中获得新价格。 有效期到期后，旧价格将再次从原始价格中恢复： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jn/wm/om/jnwmom0uyge-bd2cr5d0oh7fvfu.gif" alt="图片"></div><br> 使用相同的机制，您可以从某个日期“取消”特定价格的操作。 例如，如果您输入一个新价格而不指定价格，结果是该价格将被重置，商品将从过滤器中消失。 在这种情况下，删除输入的文档时，所有内容都会恢复到旧状态： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rl/sf/0i/rlsf0ie34x-qwfhmdidm6qv7lpu.gif" alt="图片"></div><br> 具有仓库在日期的价格的价格所得的属性可以进一步用于各种事件或其他形式。 例如，您可以根据以下定价逻辑对订单进行自动定价： <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">CHANGED</font> (sku(UserOrderDetail d)) <font color="#a626a4">OR</font> <font color="#a626a4">CHANGED</font> (stock(d)) <font color="#a626a4">OR</font> <font color="#a626a4">CHANGED</font> (dateTime(d)) <font color="#a626a4">DO</font> <br> price(d) &lt;- price(sku(d), stock(d), dateTime(d)); <br></code> </td></tr></tbody></table></div> 这种逻辑的一个好处是，当您向组中添加新仓库时，已经创建的价格清单中的价格将自动应用于该仓库。 当您更改仓库组时，将会发生相同的事情。 <br><br> 如果您愿意，可以将选项卡上带有价格的列与当前价格进行编辑，并添加一个按钮，该按钮将为更改后的价格创建新的提交。 <br><br><h3> 结论 </h3><br> 在平台级别的解决方案中，既不使用参考书，也不使用带字符串的文档，寄存器，报告和其他不必要的抽象。 一切都只在类和属性的概念上完成。 请注意，在lsFusion上大约150行有意义的代码行中实现了这种相当复杂的逻辑。 在其他平台（例如1C）中以相同的方式实现它是一项艰巨的任务。 <br><br> 上述方案在基于lsFusion的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ERP解决方案中</a>得到了广泛的应用。 通过对其进行各种修改，可以使用它来支持供应商的价目表，管理零售价，库存和许多其他管理参数。 <br><br> 通过将多个实体添加到文档（例如，可以将供应商添加到仓库）以及一次在一个文档中定义多个属性，可以使模板变得复杂。 特别是，您可以添加实体价格类型，并在单据行中设置该行的元组的价格以及相应的价格类型。 在上述逻辑中，您只需要向一些属性添加一些其他参数即可。 <br><br> 借助其他几行代码，可以将所有变更记录归一化为一个表，以在该表上构建相应的索引。 然后，将在对数时间内选择任何日期的任何值。 当此表中有几亿条记录时，这种优化是必要的。 <br><br> 您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在</a>网站的相应<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">页面</a> （平台部分）上在线尝试构建的示例。 这是您需要粘贴到所需字段中的全部源代码： <br><br><div class="spoiler">  <b class="spoiler_title">源代码</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">REQUIRE</font> Authentication, Time; <br> <br> <font color="#a626a4">CLASS</font> Group <font color="#50a14f">' '</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Group); <br> <br> parent = <font color="#a626a4">DATA</font> Group (Group); <br> nameParent <font color="#50a14f">' '</font> (Group g) = name(parent(g)); <br> <br> level <font color="#50a14f">''</font> (Group child, Group parent) = <br> <font color="#a626a4">RECURSION</font> <font color="#986801">1l</font> <font color="#a626a4">IF</font> child <font color="#a626a4">IS</font> Group <font color="#a626a4">AND</font> parent = child <br> <font color="#a626a4">STEP</font> <font color="#986801">2l</font> <font color="#a626a4">IF</font> parent = parent($parent) <font color="#a626a4">MATERIALIZED</font> ; <br> <br> <font color="#a626a4">FORM</font> group <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (g) name, nameParent <br> <br> <font color="#a626a4">EDIT</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">FORM</font> groups <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">READONLY</font> name, nameParent <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> groups; <br> } <br> <br> <font color="#a626a4">CLASS</font> Stock <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Stock); <br> <br> group <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Group (Stock); <br> nameGroup <font color="#50a14f">''</font> (Stock st) = name(group(st)); <br> <br> <font color="#a626a4">FORM</font> stock <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (s) name, nameGroup <br> <br> <font color="#a626a4">EDIT</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">FORM</font> stocks <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> stocks; <br> } <br> <br> <font color="#a626a4">CLASS</font> Product <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Product); <br> <br> <font color="#a626a4">FORM</font> product <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) name <br> <br> <font color="#a626a4">EDIT</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">FORM</font> products <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> name <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> products; <br> } <br> <br> <font color="#a626a4">CLASS</font> PriceList <font color="#50a14f">'-'</font> ; <br> fromDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList); <br> toDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList); <br> <br> createdTime <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATETIME</font> (PriceList); <br> createdUser = <font color="#a626a4">DATA</font> User (PriceList); <br> nameCreatedUser <font color="#50a14f">''</font> (PriceList p) = name(createdUser(p)); <br> <br> <font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> <br> fromDate(p) &lt;- currentDate(); <br> <br> <font color="#a626a4">WHEN</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> { <br> createdTime(p) &lt;- currentDateTime(); <br> createdUser(p) &lt;- currentUser(); <br> } <br> <br> <font color="#a626a4">CLASS</font> PriceListDetail <font color="#50a14f">' -'</font> ; <br> priceList = <font color="#a626a4">DATA</font> PriceList (PriceListDetail) <font color="#a626a4">NONULL</font> <font color="#a626a4">DELETE</font> ; <br> <br> product = <font color="#a626a4">DATA</font> Product (PriceListDetail); <br> nameProduct <font color="#50a14f">''</font> (PriceListDetail d) = name(product(d)); <br> <br> price <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">2</font> ] (PriceListDetail); <br> <br> fromDate <font color="#50a14f">' '</font> (PriceListDetail d) = fromDate(priceList(d)); <br> toDate <font color="#50a14f">' '</font> (PriceListDetail d) = toDate(priceList(d)); <br> <br> dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Group); <br> <br> in <font color="#50a14f">' ()'</font> (PriceList p, Group child) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> dataIn(p, Group parent) <font color="#a626a4">ORDER</font> <font color="#a626a4">DESC</font> level(child, parent) <font color="#a626a4">WHERE</font> dataIn(p, parent); <br> <br> dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Stock); <br> in <font color="#50a14f">''</font> (PriceList p, Stock s) = dataIn(p, s) <font color="#a626a4">OR</font> in(p, group(s)); <br> <br> stocks <font color="#50a14f">''</font> (PriceList p) = <font color="#a626a4">CONCAT</font> <font color="#50a14f">' / '</font> , <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Group g) <font color="#a626a4">IF</font> dataIn(p, g), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> g, <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Stock s) <font color="#a626a4">IF</font> dataIn(p, s), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> s <br> <font color="#a626a4">CHARWIDTH</font> <font color="#986801">30</font> ; <br> <br> priceListDetail (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> PriceListDetail d <br> <font color="#a626a4">ORDER</font> fromDate(d), d <br> <font color="#a626a4">WHERE</font> product(d) = p <font color="#a626a4">AND</font> in(priceList(d), s) <font color="#a626a4">AND</font> <br> fromDate(d) &lt;= dt <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> toDate(d) &lt; dt; <br> <br> price <font color="#50a14f">''</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = price(priceListDetail(p, s, dt)); <br> fromDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = fromDate(priceListDetail(p, s, dt)); <br> toDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = toDate(priceListDetail(p, s, dt)); <br> <br> <font color="#a626a4">FORM</font> priceList <font color="#50a14f">'-'</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) fromDate, toDate <br> <br> <font color="#a626a4">EDIT</font> PriceList <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) nameProduct, price <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">NEW</font> , <font color="#a626a4">DELETE</font> <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">TREE</font> stocks g = Group <font color="#a626a4">PARENT</font> parent, s = Stock <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g), name(s) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, g), in(p, g) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, s), in(p, s) <br> <font color="#a626a4">FILTERS</font> group(s) = g <br> ; <br> <br> <font color="#a626a4">DESIGN</font> priceList { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d) { caption = <font color="#50a14f">''</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> stocks) { caption = <font color="#50a14f">''</font> ; } <br> } <br> } <br> } <br> <br> <font color="#a626a4">FORM</font> managePrices <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> fromDate, toDate, stocks, createdTime, nameCreatedUser <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">READONLY</font> nameProduct, price <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> dt = <font color="#a626a4">DATE</font> <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">VALUE</font> (dt) <br> <br> <font color="#a626a4">TREE</font> groups g = Group <font color="#a626a4">PARENT</font> parent <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g) <br> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">FILTERS</font> level(group(s), g) <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> pr = Product <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(pr), price(pr, s, dt), fromDate(pr, s, dt), toDate(pr, s, dt) <br> <font color="#a626a4">FILTERS</font> price(pr, s, dt) <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> prd = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> <font color="#a626a4">BACKGROUND</font> (priceListDetail(pr, s, dt) = prd) <br> fromDate(prd), toDate(prd), <font color="#50a14f">''</font> = stocks(priceList(prd)), price(prd) <br> <font color="#a626a4">FILTERS</font> product(prd) = pr <font color="#a626a4">AND</font> in(priceList(prd), s) <br> ; <br> <br> edit (PriceListDetail d) + { edit(priceList(d)); } <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">PROPERTIES</font> (prd) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">EDIT</font> <br> ; <br> <br> <font color="#a626a4">DESIGN</font> managePrices { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">NEW</font> priceLists { <br> caption = <font color="#50a14f">'-'</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (p); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d); <br> } <br> <font color="#a626a4">NEW</font> prices { <br> caption = <font color="#50a14f">''</font> ; <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">SPLITH</font> ; <br> <font color="#a626a4">NEW</font> leftPane { <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (dt); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> groups); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (s); <br> } <br> <font color="#a626a4">NEW</font> rightPane { <br> fill = <font color="#986801">3</font> ; <br> type = <font color="#a626a4">SPLITV</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (pr) { fill = <font color="#986801">3</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (prd); <br> } <br> } <br> } <br> } <br> } <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> managePrices; <br> } <br></code> </td></tr></tbody></table></div></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN468553/">https://habr.com/ru/post/zh-CN468553/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN468541/index.html">拖放-和-拖放组件供盲人使用？ 你在开玩笑吗</a></li>
<li><a href="../zh-CN468543/index.html">平日程序委员会FrontendConf。 谢尔盖·波波夫专访</a></li>
<li><a href="../zh-CN468545/index.html">“爱丽丝，我们去前端吧！”</a></li>
<li><a href="../zh-CN468547/index.html">FrontendConf的英语，CSS，网格和可访问性</a></li>
<li><a href="../zh-CN468549/index.html">GPU绑定。 如何将所有内容传输到视频卡等等。 动画制作</a></li>
<li><a href="../zh-CN468555/index.html">C / C ++中的确定性程序集简介。 第二部分</a></li>
<li><a href="../zh-CN468557/index.html">WEB 3.0-射弹的第二种方法</a></li>
<li><a href="../zh-CN468559/index.html">备份云，朋友</a></li>
<li><a href="../zh-CN468561/index.html">安全周39：安全和常识错误</a></li>
<li><a href="../zh-CN468563/index.html">守望者观看：空间跟踪设施的现状</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>