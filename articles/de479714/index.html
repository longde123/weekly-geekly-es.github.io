<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÇ üêä üßïüèæ Vereinheitlichung visueller Komponenten. Teil 1. Stile üòá üõå üåö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist in erster Linie f√ºr Entwickler hilfreich, die nicht mit vorgefertigten Komponentens√§tzen wie material-ui arbeiten, sondern ihre eig...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vereinheitlichung visueller Komponenten. Teil 1. Stile</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479714/"><img src="https://habrastorage.org/webt/00/7v/55/007v55-c7k0gjfzqkhtoy0irbma.png"><br><br>  Dieser Artikel ist in erster Linie f√ºr Entwickler hilfreich, die nicht mit vorgefertigten Komponentens√§tzen wie material-ui arbeiten, sondern ihre eigenen implementieren.  Zum Beispiel wurde ein Design f√ºr ein Produkt entwickelt, das widerspiegelt, wie Schaltfl√§chen, modale Fenster usw. aussehen sollen.  Um ein solches Entwurfssystem korrekt zu implementieren, m√ºssen alle seine Atome eine gute Unterst√ºtzung f√ºr ihre Zusammensetzung bieten.  Mit anderen Worten, es muss sichergestellt werden, dass sich jedes einzelne Bauteil perfekt in ein gr√∂√üeres Verbundbauteil integrieren l√§sst.  Und wenn er nicht passt, w√§re es sch√∂n, eine einfache Unterst√ºtzung f√ºr seine Anpassung zu haben.  Wie dem auch sei, dies ist ein eigenst√§ndiges gro√ües Thema, und ich werde vielleicht ein anderes Mal darauf zur√ºckkommen. <br><a name="habracut"></a><br><h3>  Texte </h3><br>  Hallo allerseits.  Ich beginne meine Reise am Hub mit einem einfachen, aber n√ºtzlichen Artikel.  Was mich betrifft, hat es sich als zu detailliert herausgestellt, aber ich habe trotzdem versucht, mich an den Leser und nicht an mich selbst anzupassen.  Bevor ich den n√§chsten Artikel (falls vorhanden) zu einem komplexeren Thema schreibe, m√∂chte ich meine Pr√§sentation auf das Feedback (falls vorhanden) abstimmen. <br><br>  Verwendete Begriffe: <br><br><ul><li>  Eine visuelle Komponente ist eine Komponente, die ein im DOM eingebettetes Element zur√ºckgibt.  Zum Beispiel <code>return (&lt;div /&gt;)</code> .  Eine Komponente, die nur eine andere Komponente zur√ºckgibt, sollte nicht visuell interpretiert werden. </li></ul><br><h3>  Einleitung </h3><br>  Wenn Sie eine Komponente entwickeln, k√∂nnen Sie sie nicht vollst√§ndig universell machen.  In Ihrem Kopf gehen Sie immer von bestimmten Verwendungsm√∂glichkeiten aus.  Es stellt sich oft heraus, dass Ihre Kollegen nach der Entwicklung anfangen, "diese Komponente √ºberall hin zu schieben".  Sie sind sauer auf sie: ‚ÄûNun, ich habe es daf√ºr nicht entwickelt!  Es ist nicht f√ºr diese Aufgabe gedacht! ‚Äú  Nat√ºrlich sind Verbesserungen unvermeidlich und sogar notwendig.  Dies sollte jedoch keine Verbesserung sein, wie das Werfen neuer Requisiten, um den Einzug von 4 auf 8 Pixel zu erh√∂hen, der in ein oder zwei von f√ºnfzig F√§llen verwendet wird.  Komponenten m√ºssen eine benutzerdefinierte externe Geometrie haben. <br><br><h3>  TypeScript, helfen Sie aus </h3><br>  Betrachten Sie die Schnittstelle, die sich in ihrer Bedeutung beispielsweise in <code>src/Library/Controls.ts</code> .  Es werden kurze Kommentare zu den Feldern gegeben. Im Folgenden werden sie genauer analysiert. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface VisualComponentProps { <span class="hljs-comment"><span class="hljs-comment">//  .   - children?: React.ReactNode; //    css className?: string; //   ,     . doNotRender?: boolean; //     doNotRender true fallback?: JSX.Element; //    css style?: React.CSSProperties; }</span></span></code> </pre><br>  Dies ist die Komponenten-Requisiten-Schnittstelle.  Welche?  Alle visuellen Komponenten.  Sie sollten auf das Stammelement angewendet werden. <br><br>  Die Requisiten jeder entwickelten visuellen Komponente sollten √ºber diese Schnittstelle erweitert werden. <br><br>  Bitte beachten Sie ab sofort, dass alle diese Requisiten optional sind.  Betrachten Sie sie. <br><br><ul><li>  <code>children</code> befinden sich in React.Component-Klassenkomponenten, React.FC-Komponentenkomponenten, aber sie befinden sich nicht in normalen Funktionen, ohne die React.FC-Typisierung anzugeben.  Deshalb fragen wir ihn. </li><li>  <code>className/style</code> √§hnliche Namen wie im √ºblichen JSX'nom &lt;div /&gt;.  Wir produzieren keine Semantik.  Dieses Prinzip der Identit√§t des Namens wird beispielsweise <a href="https://reactjs.org/docs/refs-and-the-dom.html">in Requisiten verwendet, um den Verweis-Link anzugeben</a> . </li><li>  <code>doNotRender</code> als Alternative zur schmerzhaften Kr√ºcke beim JSX- <a href="https://reactjs.org/docs/conditional-rendering.html">Rendering nach Bedingungen verwendet</a> .  Bei Anwendung dieser L√∂sung m√ºssen die Rendermethoden nicht in geschweifte Klammern gesetzt werden, was die Lesbarkeit des Codes beeintr√§chtigt.  Vergleichen Sie 2 Code-Schnipsel: <br><br>  Virgin bedingte Wiedergabe: <br><br> <code>App.tsx</code> <br> <br><pre> <code class="javascript hljs">renderComponent() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {props, state} = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> needRender = state.something; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;PageLayout&gt; &lt;UIButton children={'This is a button'} /&gt; {needRender &amp;&amp; &lt;UIButton children={'This is another button'} /&gt; } &lt;/PageLayout&gt; ); }</code> </pre><br>  Tschad Requisiten doNotRender: <br><br> <code>App.tsx</code> <br> <br><pre> <code class="javascript hljs">renderComponent() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {props, state} = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> needRender = state.something; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;PageLayout&gt; &lt;UIButton children={'This is a button'} /&gt; &lt;UIButton children={'This is another button'} doNotRender={!needRender} /&gt; &lt;/PageLayout&gt; ); }</code> </pre><br>  In der ersten Version erh√∂hen wir die Verschachtelungsebene der unteren Schaltfl√§che, obwohl ihre Verschachtelung in Bezug auf die Bedeutung auf derselben Ebene liegt wie die der oberen.  In meinem Editor sieht es schlecht aus, wenn ich einen Tabulator mit einer Breite von 2 Leerzeichen verwende, und hier ist es noch schlimmer. <br><br>  In der zweiten Option haben wir die gleiche Verschachtelung, abz√ºglich, dass doNotRender m√∂glicherweise nicht ins Auge f√§llt und der Entwickler nicht versteht, was passiert.  Wenn jedoch in Ihrem Projekt jede visuelle Komponente nach diesem Prinzip erstellt wird, verschwindet dieses Problem sofort. <br></li><li>  <code>fallback</code> erforderlich, wenn wir mit <code>doNotRender true</code> nicht <code>null</code> rendern <code>doNotRender true</code> , sondern eine Art benutzerdefiniertes Element.  Es wird analog zu <a href="https://reactjs.org/docs/concurrent-mode-suspense.html">React Suspense verwendet</a> , da es eine √§hnliche Bedeutung hat (wir produzieren keine Semantik). </li></ul><br>  Ich m√∂chte zeigen, wie man es richtig benutzt.  Lassen Sie uns einen einfachen Knopf machen. <br><br>  Hinweis: Im folgenden Code verwende ich auch CSS-Module, SASS und Klassennamen. <br><br> <code>UIButton.tsx</code> <br> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { VisualComponentProps } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'Library/Controls'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> css <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Button.sass'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cn <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'classnames'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  ()  export interface ButtonBasicProps { disabled?: boolean; } export interface ButtonProps extends ButtonBasicProps, VisualComponentProps {} export function UIButton(props: ButtonProps) { //   undefined,     // "Nothing was returned from render." if (props.doNotRender) return props.fallback || null; //      const rootClassNames = cn( // ,   sass css.Button, // ,     props props.className, //      props.disabled &amp;&amp; css._disabled ); return ( &lt;div children={props.children} className={rootClassNames} style={props.style} /&gt; ) }</span></span></code> </pre><br> <code>App.tsx</code> <br> <br><pre> <code class="javascript hljs">renderComponent() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {props, state} = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> needRenderSecond = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;PageLayout&gt; &lt;UIButton children={'This is a button'} style={{marginRight: needRenderSecond ? 5 : null}} /&gt; &lt;UIButton disabled children={'This is another button'} doNotRender={!needRenderSecond} /&gt; &lt;/PageLayout&gt; ); }</code> </pre><br>  Ergebnis: <br><br><img src="https://habrastorage.org/webt/fe/to/j7/fetoj7kw1albfk8gj0xq2ifypgo.png"><br><br><h3>  Reflexion und Fazit </h3><br>  Es ist praktisch, mit Komponenten wie divs zu arbeiten und verschiedene Wrapper, Kompositionen und Spezialisierungen zu erstellen, <u>die √ºber den Rahmen der in ihnen eingebetteten urspr√ºnglichen Funktionalit√§t hinausgehen</u> . <br><br>  Es kann argumentiert werden, dass, da es keine bedingten gelben Schaltfl√§chen im Entwurfssystem gibt und der Entwickler sie erstellen muss, das Problem nicht in den Komponenten liegt, sondern in der Tatsache, dass diese ben√∂tigt werden.  In der Realit√§t treten solche Situationen jedoch h√§ufig auf.  "... aber wir m√ºssen leben! Wir m√ºssen leben."  Dar√ºber hinaus kann das CSS-Kaskadenprinzip in der Praxis nicht immer implementiert werden, und es kann vorkommen, dass sich Ihre Stile einfach mit der h√∂heren Spezifit√§t eines anderen Selektors (oder der oben beschriebenen) √ºberschneiden.  Hier hilft nur Stil. <br><br>  Abschlie√üend m√∂chte ich einige (buchst√§blich) Momente hinzuf√ºgen. <br><br><ol><li>  Beachten Sie, dass doNotRender das Verhalten beim bedingten Rendern nicht vollst√§ndig wiederholt.  Sie werden auch Lebenszyklusmethoden ausf√ºhren. Beim Rendern wird nur ein Fallback oder Null zur√ºckgegeben.  In einigen komplexen Komponenten m√∂chten Sie m√∂glicherweise die Ausf√ºhrung von Lebenszyklusmethoden vermeiden.  Dazu m√ºssen Sie lediglich eine <a href="https://reactjs.org/docs/composition-vs-inheritance.html">Spezialisierung</a> Ihrer Komponente vornehmen. <br><br>  Verwenden des UIButton-Beispiels: Benennen Sie den UIButton in UIButtonInner um, und f√ºgen Sie den folgenden Code hinzu: <br><br> <code>UIButton.tsx</code> <br> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UIButton</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props: ButtonProps</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (props.doNotRender) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props.fallback || <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">UIButtonInner</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} /&gt;</span></span></span><span class="xml">; }</span></span></code> </pre><br>  PS Machen Sie in dieser Funktion keinen rekursiven UIButton-Aufruffehler! <br></li><li>  In seltenen F√§llen, in denen Stile auf dem Wrapper und auf der umschlossenen Komponente unabh√§ngig voneinander ge√§ndert werden k√∂nnen, ist die folgende Benutzeroberfl√§che m√∂glicherweise hilfreich f√ºr Sie <br><br> <code>Library/Controls.ts</code> <br> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface VisualComponentWrapperProps extends VisualComponentProps { wrappedVisual?: VisualComponentProps; }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Und seine Verwendung</b> <div class="spoiler_text"> <code>UIButton.tsx</code> <br> <br><pre> <code class="javascript hljs">interface ButtonSomeWrapperProps extends ButtonBasicProps, VisualComponentWrapperProps { myCustomProp?: number; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UIButtonSomeWrapper</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props: ButtonSomeWrapperProps</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (props.doNotRender) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props.fallback || <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  VisualComponentProps  style, className, children, fallback, doNotRender, // VisualComponentProps   wrappedVisual, //    myCustomProp, //     ...uiButtonProps } = props; return ( &lt;div style={style} className={className} &gt; {myCustomProp} &lt;UIButton {...wrappedVisual} {...uiButtonProps} /&gt; {children} &lt;/div&gt; ); }</span></span></code> </pre></div></div></li></ol><br>  Durch die Entwicklung einer Anwendung mit diesem Ansatz wird die Wiederverwendbarkeit Ihrer Komponenten erheblich verbessert, die Anzahl unn√∂tiger Kr√ºckenstile (die in den Stildateien der Komponente ausschlie√ülich f√ºr die Anforderungen anderer Komponenten beschriebenen Stile) und Requisiten verringert und strukturierter Code hinzugef√ºgt.  Das ist alles  Im n√§chsten Artikel werden wir beginnen, die Probleme der Wiederverwendbarkeit von Komponenten mehr in Bezug auf Code als in Bezug auf CSS zu l√∂sen.  Oder ich schreibe √ºber etwas Interessanteres.  Vielen Dank f√ºr Ihre Aufmerksamkeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479714/">https://habr.com/ru/post/de479714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479700/index.html">CIMON-2: (un) Doomsday oder wie IBM Watson √ºber den Wolken kletterte</a></li>
<li><a href="../de479702/index.html">Toaster, My Circle und Freelansim werden Teil von Habr</a></li>
<li><a href="../de479704/index.html">Eskalation von Berechtigungen im EA Origin Windows-Client (CVE-2019-19247 und CVE-2019-19248)</a></li>
<li><a href="../de479708/index.html">Inoffizieller Beitrag zum Rebranding von Habr + Competition</a></li>
<li><a href="../de479712/index.html">Maschinelles Lernen als Smart Monitoring Assistant</a></li>
<li><a href="../de479716/index.html">Eine weitere "Weltneuheit" SuperApp</a></li>
<li><a href="../de479718/index.html">Erstellen einer Arduino-Umgebungsanwendung mit CI Github</a></li>
<li><a href="../de479724/index.html">Tru Hacker sind vorbei</a></li>
<li><a href="../de479726/index.html">Vladimir aka wowik: "OpenStreetMap braucht Ideen, die in anderen Systemen nicht umsetzbar sind"</a></li>
<li><a href="../de479728/index.html">Wie organisiere ich einen erfolgreichen Start?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>