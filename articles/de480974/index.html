<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍭 🕵️ 👨🏼‍⚖️ Anwendungsentwicklung in VK Mini Apps 🌐 👨🏾 👩🏻‍🤝‍👨🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warum sollte ich mich mit der Entwicklung von Anwendungen für die Arbeit in VK befassen? Ich habe viele Jahre Front-End-Entwicklung für Massendienste ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Anwendungsentwicklung in VK Mini Apps</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480974/">  Warum sollte ich mich mit der Entwicklung von Anwendungen für die Arbeit in VK befassen?  Ich habe viele Jahre Front-End-Entwicklung für Massendienste hinter mir und das, was das soziale Netzwerk von VKontakte dem Entwickler derzeit bietet, ist eine schnelle und effektive Möglichkeit, einen weiteren Kommunikationskanal mit einem wirklich großen Publikum aufzubauen.  Im Folgenden erkläre ich Ihnen, was die Idee von VK Mini-Apps ist, welche Technologien bei der Entwicklung der Anwendung verwendet werden sollen und worauf Sie achten sollten. <br><br><img src="https://habrastorage.org/webt/au/2v/2d/au2v2d1ko6i5ifqn2lnydurcczg.jpeg" alt="Bild"><br><br>  <i>Die Erstveröffentlichung des Artikels im Blog von Blog.ru Cloud Solutions: <a href="https://mcs.mail.ru/blog/razrabotka-prilozhenij-v-vk-mini-apps" rel="nofollow">https://mcs.mail.ru/blog/razrabotka-prilozhenij-v-vk-mini-apps</a></i> <br><br><a name="habracut"></a><h2>  VK Mini-Apps-Plattform </h2><br>  VKontakte bietet Drittentwicklern die Möglichkeit, Webanwendungen zu schreiben und im Anwendungsverzeichnis abzulegen und / oder innerhalb des Netzwerks zu bewerben.  Anwendungsbenutzer müssen keine einzelnen nativen Anwendungen aus dem Google Play / App Store herunterladen. Die Funktionen der ausgewählten Anwendung stehen in der Benutzersitzung der Hauptanwendung in VKontakte oder über einen Browser auf der Website des sozialen Netzwerks zur Verfügung.  Das soziale Netzwerk bietet detaillierte Anweisungen für den Einstieg in <a href="https://vk.com/dev/vk_apps_docs" rel="nofollow">die VK mini-Apps-Plattform</a> . <br><br><h2>  Anwendungsinfrastruktur VK Mini App </h2><br>  Die VK Mini-App ist eine reguläre Webressource, die sich an einer bestimmten Adresse befindet.  Wir müssen es im "Application Control Panel" des sozialen Netzwerks platzieren. <br><br>  Mit VKontakte können Sie drei Versionen der Anwendung platzieren: <br><br><ul><li>  für mobile Clients - dh zum Öffnen in der nativen VKontakte-Anwendung; </li><li>  Desktop-Option - <a href="https://vk.com/" rel="nofollow">vk.com</a> im Browser; </li><li>  Option für Browser in Mobiltelefonen (https://m.vk.com). </li></ul><br>  Beim Platzieren können Sie auch den "Entwicklungsmodus" aktivieren.  VKontakte-Benutzer, die als Anwendungsadministratoren festgelegt wurden, können eine separate Adresse zum Testen jeder der drei Storefronts verwenden.  Das heißt, beim Öffnen der Anwendung sieht ein normaler Benutzer, was sich unter der bedingten Adresse yourapp.com befindet, und der Administrator sieht test.yourapp.com. <br><br>  Ihre Webressource wird über das übliche WebView in die VKontakte-Anwendung eingebettet, wenn Sie über iFrame vom Desktop aus geöffnet werden.  Daher ist zu beachten, dass ein Teil der JavaScript-Funktionalität möglicherweise nicht verfügbar ist. Daher ist ein gründliches Testen erforderlich. <br><br>  Nach dem Testen der Webanwendung auf verschiedenen Geräten kann sie zur Moderation gesendet und in das Verzeichnis gestellt werden.  Der Antrag auf Moderation wird über das "Application Control Panel" gesendet.  Die von VKontakte angekündigte Moderationsfrist beträgt 7 Tage.  Die Berechnung neuer Anwendungen (Dienste in der Terminologie von VKontakte) erfolgt einmal wöchentlich donnerstags. <br><blockquote>  Es gibt ein <a href="https://vk.com/%40vkappsdev-vk-apps-kak-popast-v-katalog" rel="nofollow">detailliertes Memo</a> zum Erstellen der richtigen Anwendung.  Ich empfehle Ihnen, sich sorgfältig mit ihr in Verbindung zu setzen, bevor Sie den Antrag auf Moderation stellen. </blockquote><br><h2>  Anwendungsentwicklung VK Mini App </h2><br>  Die VK Mini Apps-Anwendung ist also eine normale Webanwendung, die über iFrame oder WebView in die Plattform eingebettet ist.  Daher liegt die Wahl der Technologie, auf die geschrieben wird, bei Ihnen. <br><br>  Für die Entwicklung des Frontends empfiehlt VKontakte jedoch eine eigene <a href="https://vkcom.github.io/vkui-styleguide/" rel="nofollow">Bibliothek mit vorgefertigten Komponenten für die VK-Benutzeroberfläche</a> , die auf React erstellt wurde: <br><br>  Dies ist praktisch - viele typische Komponenten sind bereits fertig und müssen nur noch in die Struktur Ihrer Seite oder Ihres SPA eingebettet werden. <br><br>  Die Komponenten sind bereits gemäß dem VKontakte-Styleguide stilisiert. So kann der Benutzer vertrauter und bequemer mit den Steuerelementen und der Interaktivität arbeiten, mit denen er bereits im sozialen Netzwerk vertraut ist. <br><br>  VKontakte verlangt vom Entwickler nicht, dass er einer starren Frontend-Architektur folgt. Wir nehmen nur das, was benötigt wird, und passen die Komponenten nach Bedarf an.  Zum Beispiel können Sie Ihre Klasse, Ihren Event-Handler immer einer dummen Ansichtskomponente hinzufügen, verschachtelte Komponenten beliebiger Tiefe erstellen und so weiter. <br>  Es gibt eine ziemlich detaillierte (wenn auch nicht vollständige) <a href="https://vkcom.github.io/vkui-styleguide/" rel="nofollow">Dokumentation zu VKUI</a> .  Quellcode auf GitHub: <a href="https://github.com/VKCOM/VKUI" rel="nofollow">https://github.com/VKCOM/VKUI</a> .  Dementsprechend einfach ist die Installation: <br><br><pre><code class="javascript hljs">npm i —save-dev @vkontakte/vkui</code> </pre> <br>  Stellen Sie sicher, dass Sie das folgende Meta-Tag in den Kopf der Layout-Seite Ihrer Anwendung einfügen, da andernfalls auf iOS-Geräten die native VKontakte-Navigation nicht korrekt angezeigt wird: <br><br><pre> <code class="javascript hljs">&lt;meta content=»width=device-width, initial-scale=<span class="hljs-number"><span class="hljs-number">1</span></span>, shrink-to-fit=no, user-scalable=no, viewport-fit=cover» name=»viewport» /&gt;</code> </pre> <br>  Als nächstes müssen wir nur die React-Anwendung auf der Seite einbetten. <br><br><h3>  Optionen zum Öffnen von Anwendungen </h3><br>  VKontakte selbst fügt der Adressleiste, über die Ihre Anwendung geöffnet wird, Startparameter hinzu.  Die Liste lautet wie folgt: <i>vk_user_id, vk_app_id, vk_are_notifications_enabled, vk_language, vk_ref, vk_access_token_settings, vk_group_id, vk_viewer_group_role, vk_platform, vk_is_favorite, sign</i> .  Das ist der Rahmen mit Ihrer Anmeldung wird ungefähr die gleiche Adresse öffnen: <i><a href="https://youvkapp.ru/%3Fvk_access_token_settings%3Dnotify%26vk_app_id%3D888888%26vk_are_notifications_enabled%3D1%26vk_is_app_user%3D1%26vk_is_favorite%3D1%26vk_language%3Dru%26vk_platform%3Ddesktop_web%26vk_ref%3Dother%26vk_user_id%3D111111%26sign%3Dfsdfsdgfgfiuoitu8345u34j" rel="nofollow">youvkapp.ru/?vk_access_token_settings=notify&amp;vk_app_id=888888&amp;vk_are_notifications_enabled=1&amp;vk_is_app_user=1&amp;vk_is_favorite=1&amp;vk_language=ru&amp;vk_platform=desktop_web&amp;vk_ref=other&amp;vk_user_id=111111&amp;sign=fsdfsdgfgfiuoitu8345u34j</a></i> <br><br>  Auf diese Weise können Sie bereits beim Starten der Anwendung einen ziemlich vollständigen Datensatz aus der URL extrahieren, um eine persönliche Interaktion mit einem bestimmten Benutzer zu beginnen.  Sprechen Sie zum Beispiel dieselbe Sprache mit ihm - Russisch, Englisch oder eine andere Sprache, oder fragen Sie nach Ihren Benachrichtigungen. <br><br>  Für November 2019 plant Vkontakte nicht, zusätzliche Parameter in diese Liste von VKontakte aufzunehmen.  In der URL können Sie jedoch einen beliebigen Hash übergeben, zum Beispiel: <i><a href="https://youvkapp.ru/" rel="nofollow">youvkapp.ru # custom_param</a></i> <br><br><h3>  Routing </h3><br>  Wenn die Anwendung mehr als einen Bildschirm hat (ich denke, das ist nur Ihr Fall), brauchen Sie einen Übergang zwischen den Bildschirmen.  Der Status unserer React-Anwendung ist für die Anzeige dieses oder jenes Bildschirms verantwortlich.  In Bezug auf die Organisation von View bietet VKontakte zwei Möglichkeiten: Ändern der aktiven Komponente von VKUI View und VKUI Panel. <br><br>  Jede Ansicht ist für ihr eigenes Benutzerszenario verantwortlich: Primär-, Sekundär-, Anrufverzeichnisse, Suchseiten und andere.  In der Ansicht befindet sich eine eigene Gruppe von Bedienfeldern. Hierbei handelt es sich um bestimmte Schritte (Bildschirme) im Benutzerskript.  Abstrakt sieht es so aus: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Root, View, Panel} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@vkontakte/vkui'</span></span>; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Root</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">activeView</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.views.activeView}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»main»</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">activePanel</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.views.main.activePanel}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»step-1″</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»step-2″</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»search»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»search-panel»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»info»</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">activePanel</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.views.info.activePanel}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»oferta»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»conditions»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">»about»</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> … </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Panel</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Root</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  In state in activePanel geben wir die ID des Elements an, das angezeigt werden soll. <br><br><h3>  Layout und Komponenten </h3><br>  Jetzt sehen Sie eine typische Seite innerhalb des Panels, die mit den VK-UI-Komponenten erstellt wurde. <br><br>  Die VK-Benutzeroberflächenbibliothek enthält fast alle Komponenten, die zum Erstellen einer interaktiven Anwendung erforderlich sind: alle Arten von Formularelementen, Popups, stilisierten Warnungen, Galerien, Navigationsfeldern, Drehfeldern, Avataren, Fußzeilen usw. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Button, Div, FormLayout, Input, Panel, PanelHeader, PanelHeaderBack, Search, View } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@vkontakte/vkui"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Icon36Done <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@vkontakte/icons/dist/36/done"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CustomTextarea <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./YourComponents/CustomTextarea"</span></span>; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div&gt; &lt;PanelHeader left={&lt;PanelHeaderBack onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Actions.historyBack()}} /&gt;} &gt;App Title&lt;<span class="hljs-regexp"><span class="hljs-regexp">/PanelHeader&gt; &lt;Icon36Done width={48} height={48} /</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">This is the first page</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"page-hint"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">You can do some interaction here</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;FormLayout&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defaultValue</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">""</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Enter your name"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"active"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomTextarea</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"textarea1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"custom"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.blocks.textarea.disabled}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.userData.textarea}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"xl"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">level</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"secondary"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml">Submit</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FormLayout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Search</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.search.text}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.onSearch}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre><br>  Wie Sie sehen, ist ein weiteres vkontakte-Paket erschienen: <br><br><pre> <code class="javascript hljs">npm i —save-dev @vkontakte/icons</code> </pre> <br>  Mit dem <a href="https://vkcom.github.io/icons/" rel="nofollow">praktischen Manager können</a> Sie das gewünschte Symbol auswählen. <br><br>  <b>Die Hauptregel</b> besteht darin, die Komponente richtig zu verwenden oder das Layout der Kopfzeile selbst festzulegen.  Die native VKontakte-Anwendung platziert Steuerungsschaltflächen auf der rechten Seite der Kopfzeile. <br><br><img src="https://habrastorage.org/webt/ge/cc/_o/gecc_oj3rinrnjov7k-ddrsm3h0.jpeg" alt="Bild"><br><br>  Benutzerdefinierter Block: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Textarea } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> «@vkontakte/vkui»; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomTextarea</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div className=»form-group custom_textarea»&gt; &lt;div className=»FormLayout__row-top»&gt;Custom textarea is here&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; &lt;Textarea disabled={this.props.disabled} name={name} id={name} onChange={(e) =&gt; this.bindData(e, this.props.name)} value={this.props.value} className={this.props.className} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">div&gt; </span></span></span><span class="hljs-function">); } }</span></span></code> </pre><br>  Es ist zu beachten: VKontakte weist darauf hin, dass die Komponenten auf Desktops möglicherweise nicht ausreichend angezeigt werden.  Sie können jedoch durch Hinzufügen eigener CSS-Regeln gestaltet werden.  Zum Beispiel wurde die Animation von Übergängen zwischen Panels in einer Anwendung folgendermaßen stilisiert: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.desktop_web</span></span> { .View__panel—prev { <span class="hljs-attribute"><span class="hljs-attribute">max-width</span></span>: <span class="hljs-number"><span class="hljs-number">458px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> auto; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(50% — 230px) <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation</span></span>: root-android-animation-hide-back <span class="hljs-number"><span class="hljs-number">3s</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(.4, 0, .2, 1); <span class="hljs-attribute"><span class="hljs-attribute">animation</span></span>: root-android-animation-hide-back <span class="hljs-number"><span class="hljs-number">3s</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(.4, 0, .2, 1); } <span class="hljs-selector-class"><span class="hljs-selector-class">.View__panel</span></span>—<span class="hljs-selector-tag"><span class="hljs-selector-tag">next</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">max-width</span></span>: <span class="hljs-number"><span class="hljs-number">460px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(50% — 230px) <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; } }</code> </pre><br>  Diese Stile sind im allgemeinen Stream der Stile verknüpft, die mit Ihrer Anwendung verbunden sind. <br><br><h2>  VK Connect-Bibliothek </h2><br>  <a href="https://vk.com/dev/vk_apps_docs%3Ff%3D4.%2520VK%2520Connect" rel="nofollow">Die VK Connect-Bibliothek</a> bietet Zugriff auf die umfangreichen Funktionen des VKontakte-Netzwerks selbst sowie auf die Funktionen des Geräts, wenn wir von einer mobilen Anwendung aus arbeiten.  Um eine Verbindung <a href="https://habr.com/ru/users/vkontakte/" class="user_link">herzustellen</a> , müssen Sie das <i>Paket</i> <a href="https://habr.com/ru/users/vkontakte/" class="user_link">vkontakte</a> / vk-connect installieren: <i>npm i —save-dev <a href="https://habr.com/ru/users/vkontakte/" class="user_link">vkontakte</a> / vk-connect</i> . <br><br>  Zu den zahlreichen Funktionen von VK Connect gehören das Scannen eines QR-Codes, das Abrufen einer Geolocation und das Aufrufen einer Kontaktkarte.  Es gibt auch zahlreiche Möglichkeiten, die Funktionen des sozialen Netzwerks zu nutzen: Benachrichtigungen aktivieren / deaktivieren, Beiträge an der Pinnwand veröffentlichen, Community-Autorisierung, Nachrichten abonnieren.  Sie müssen mit Bedacht eingesetzt werden: Beispielsweise ist die Anzahl der Benachrichtigungen begrenzt - nicht mehr als eine pro Tag.  Es gibt <a href="https://vk.com/%40vkappsdev-uvedomleniya-za-kotorye-polzovateli-skazhut-spasibo" rel="nofollow">separate Empfehlungen für Benachrichtigungen</a> .  Eine vollständige Liste der Funktionen finden Sie <a href="https://vk.com/dev/vk_connect_events" rel="nofollow">in der Dokumentation</a> . <br><br>  Damit unsere Anwendung im Allgemeinen funktioniert, müssen wir zuerst eine Initialisierung durchführen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> connect <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@vkontakte/vk-connect'</span></span>; connect.send(«VKWebAppInit», {});</code> </pre><br>  Alle weiteren Interaktionen mit der Bibliothek erfolgen auf ähnliche Weise.  Mit der Methode connect.send rufen wir die gewünschte Aktion auf und hören uns die Antworten an.  Dazu müssen wir Ereignisse abonnieren: <br><br><pre> <code class="javascript hljs">connect.subscribe(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (e.detail.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> «VKWebAppGetUserInfoResult» : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bindConnectUserData(e.detail.data); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } });</code> </pre><br>  Im Detailobjekt wird type zurückgegeben - der Name des Ereignistyps, auf den wir warten, und data - ein Datensatz.  Im obigen Beispiel hören wir uns die Antwort auf die Anfrage connect.send ("VKWebAppGetUserInfo", {}) an, die Informationen zum Benutzer der Anwendung zurückgeben soll: Name, Geschlecht, Geburtsdatum, Wohnort, Link zum Bild des Avatars im sozialen Netzwerk. <br><br>  VKontakte garantiert nicht die Unterstützung aller Ereignisse auf allen Geräten (iOS, Android, Web). Es ist daher besser, diese Unterstützung zu überprüfen, bevor Sie den Code ausführen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (connect.supports(«VKWebAppGetUserInfo»)) …</code> </pre> <br>  VK Connect bietet auch Unterstützung für Anfragen an <a href="https://vk.com/dev/first_guide" rel="nofollow">die VK-API</a> , wenn Sie mehr benötigen, als die VK Connect-Bibliothek selbst bieten kann: <br><br><pre> <code class="javascript hljs">connect.send(«VKWebAppCallAPIMethod», {«method»: «users.get», «request_id»: «your_unique_req_id», «params»: {«user_ids»: «<span class="hljs-number"><span class="hljs-number">1</span></span>», «v»:»<span class="hljs-number"><span class="hljs-number">5.103</span></span>″, «access_token»:»your_token»}});</code> </pre> <br><h2>  VK Pay </h2><br>  VK Pay ist in der Tat ein praktisches Frontend für die Nutzung des Online-Zahlungsdienstes mit Money Mail.Ru.  Um das Zahlungsformular aufzurufen, öffnen Sie einfach das Zahlungsfenster über einen Anruf in der VK Connect-Bibliothek: <br><br><pre> <code class="javascript hljs">connect.send(«VKWebAppOpenPayForm», {«app_id»: <span class="hljs-number"><span class="hljs-number">888888</span></span>, «action»: «pay-to-service», «params»: {}});</code> </pre> <br>  So können Sie Ihre Dienstleistungen und Waren über ein internes Zahlungsmittel im VKontakte-Netzwerk verkaufen.  Weitere Details in der <a href="https://vk.com/dev/vkpay" rel="nofollow">offiziellen Dokumentation</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480974/">https://habr.com/ru/post/de480974/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480958/index.html">Satellitenverbindung. Übersicht der Betreiberfirmen und ein bisschen über das Rating</a></li>
<li><a href="../de480960/index.html">Finden Sie verlorene Dateien in mehreren Xcode-Zielen</a></li>
<li><a href="../de480962/index.html">Entwicklung des C-Compilers für den neuen Multiclet-Neuroprozessor</a></li>
<li><a href="../de480964/index.html">Was ist die Fresnel-Zone und CCQ (Client Connection Quality) oder die grundlegenden Faktoren für eine hochwertige drahtlose Brücke</a></li>
<li><a href="../de480970/index.html">10 Best Practices zum Sichern von Docker-Images. Teil 1</a></li>
<li><a href="../de480976/index.html">JSON-RPC-API-Testbibliothek</a></li>
<li><a href="../de480978/index.html">Gibt es ein Leben nach Signora?</a></li>
<li><a href="../de480980/index.html">Moderne Analysetechnologien in der Cybersicherheit</a></li>
<li><a href="../de480982/index.html">3. Fortinet Getting Started v6.0. Layoutvorbereitung</a></li>
<li><a href="../de480984/index.html">Vermeiden beliebter Netzwerksicherheitsfehler</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>