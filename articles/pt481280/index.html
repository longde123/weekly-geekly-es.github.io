<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîé üë©üèø‚Äçü§ù‚Äçüë®üèª üåó Como preparamos a etapa de qualifica√ß√£o da CTFZone-2020 üë≥üèø üë©‚Äçüè´ üéÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="30 de novembro - 1 de dezembro passou a fase de qualifica√ß√£o do torneio CTFZone , que registrou 1043 equipes de todo o mundo. Segundo nossos dados, os...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como preparamos a etapa de qualifica√ß√£o da CTFZone-2020</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bizone/blog/481280/"><p>  30 de novembro - 1 de dezembro passou a fase de qualifica√ß√£o do torneio <a href="https://ctf.bi.zone/">CTFZone</a> , que registrou 1043 equipes de todo o mundo.  Segundo nossos dados, os problemas foram resolvidos mesmo no Zimb√°bue (26 IPs √∫nicos).  Indo mais fundo, era uma equipe universit√°ria da cidade de Bulawayo. </p><br><p>  Este ano, a CTFZone se tornou a fase de qualifica√ß√£o do <a href="https://www.oooverflow.io/dc-ctf-2020-quals/">DEF CON CTF</a> , portanto a equipe que vencer a final (que ser√° realizada no <a href="https://offzone.moscow/ru/">OFFZONE de</a> 16 a 17 de abril de 2020) ir√° para o torneio em Las Vegas.  Para que os sortudos tivessem tempo para obter vistos, as datas da confer√™ncia foram transferidas para uma data anterior. </p><br><p>  DEF CON CTF √© a competi√ß√£o de seguran√ßa mais antiga e mais respeitada de muitas equipes.  Os vencedores n√£o recebem um ramo de palmeira, mas mesmo sem ele tudo est√° indo bem.  Agora, no mundo, existem apenas 6 torneios nos quais voc√™ pode se qualificar para o DEF CON CTF. </p><br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xt/iy/2x/xtiy2x-ewxvtrylyhnclq6rfiku.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i_/de/cm/i_decmpgdkn4esd5c8dfjoe12zs.png"></div><br>  <i>Geografia dos participantes CTFZone</i> <br><br><h2>  Sobre o conceito </h2><br><p> No movimento internacional CTF, aconteceu que equipes de diferentes regi√µes se especializaram em determinadas √°reas.  Por exemplo, historicamente, os russos s√£o melhores em resolver a web, enquanto as equipes asi√°ticas e americanas s√£o mais fortes na PWN.  No mesmo DEF CON, quase todas as tarefas s√£o bin√°rias.  Talvez seja por isso que recentemente as equipes americanas e asi√°ticas tenham se sa√≠do melhor l√°.  Na CTFZone, estamos tentando mostrar que o CTF n√£o √© apenas o PWN, mas tamb√©m muitas outras categorias interessantes: web, criptografia, reverse, OSINT, forense, PPC. </p><br><h3>  <u>Web</u> </h3><br><p>  Em tarefas baseadas na Web, os autores - especialistas em testes de penetra√ß√£o durante o hor√°rio de trabalho - tentaram transferir vulnerabilidades de projetos do mundo real.  Por exemplo, na tarefa <b>Web-Shop</b> , usamos a popular biblioteca python-markdown2, onde nosso especialista, algumas semanas antes da competi√ß√£o, encontrou uma vulnerabilidade de dia zero para ignorar o filtro XSS.  Durante a CTF, no entanto, cada uma das quatro equipes decisoras encontrou sua pr√≥pria vers√£o dessa vulnerabilidade, o que nos faz pensar na qualidade da filtragem na biblioteca. </p><br><p>  Para o trabalho de <b>cart√£o</b> da <b>Web</b> , usamos a vulnerabilidade de dia zero na classe de valida√ß√£o Java XML padr√£o.  Foi descoberto ao testar um firewall de aplicativos Web real, por isso convidamos os participantes a contornar o WAF, que desenvolvemos especificamente para a tarefa.  A vers√£o detalhada do wrightup ser√° posterior. </p><br><p>  Bem, a tarefa <b>EmeraldRush</b> mostrou como o GitLab e o Github se tornaram no ano passado - as vulnerabilidades associadas ao Ruby, nas quais eles s√£o escritos.  Um deles √© baseado no CVE-2018-18649 (no entanto, n√£o existe explora√ß√£o de acesso aberto); o segundo foi recentemente descoberto e publicado na plataforma HackerOne (para obter uma descri√ß√£o, consulte o <a href="https://blog.teddykatz.com/2019/11/05/github-oauth-bypass.html">artigo</a> ).  Obviamente, os desenvolvedores foram notificados dessas e de todas as outras vulnerabilidades da web antes da competi√ß√£o, de acordo com os princ√≠pios de Divulga√ß√£o Respons√°vel. </p><br><h3>  <u>Crypto</u> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bm/88/yk/bm88ykz-uzxelmwibh5blfghnue.jpeg"></div><br><p>  Por sua vez, a equipe de desenvolvimento do cryptotask tomou como base n√£o apenas os erros constantemente encontrados no CTF relacionados √† implementa√ß√£o do RSA, mas tamb√©m os ataques sensacionais dos √∫ltimos anos.  Por exemplo, a tarefa <b>OCB2 teve</b> que lidar com um ataque ao sistema de criptografia sim√©trica com o mesmo nome, cuja descoberta na confer√™ncia Crypto eles deram o Best Paper Award. </p><br><p>  E na tarefa <b>NTRU</b> , era necess√°rio estudar o ataque em um sistema de treli√ßa assim√©trico.  Ela foi descrita em setembro, mas n√£o foi suficiente encontrar e ler o artigo correspondente.  O pr√≥prio autor do problema se deparou com problemas quando descobriu que a publica√ß√£o adotou o caso mais conveniente para descri√ß√£o, que n√£o funcionou com os par√¢metros selecionados na tarefa final.  Eu tive que refazer o algoritmo!  √â interessante que um dos participantes (Alexey Udovenko, da equipe de LC / BC) resolveu o problema sem um artigo, tendo apresentado um m√©todo de solu√ß√£o ligeiramente diferente, baseado no mesmo princ√≠pio. <br><br></p><h3>  <u>Forense</u> </h3><br><p>  Bem, a categoria mais complicada em nosso CTF foi forense.  Todo mundo est√° acostumado a pensar que essas tarefas s√£o resolvidas usando tr√™s utilit√°rios: primeiro, volatilidade e seq√º√™ncias de caracteres.  Mas t√≠nhamos tarefas diferentes - por exemplo, uma tarefa <b>In-The-Shadows</b> incomum, cuja solu√ß√£o era necess√°ria para lidar com a t√©cnica descrita <a href="https://github.com/libyal/libvshadow/blob/master/documentation/Volume%2520Shadow%2520Snapshot%2520(VSS)%2520format.asciidoc">aqui</a> .  Os detalhes tamb√©m ser√£o divulgados no comit√™ distrital posteriormente. </p><br><h2>  Sobre o treinamento </h2><br><p>  A prepara√ß√£o direta para as qualifica√ß√µes da CTFZone consistiu em v√°rias etapas principais (reunir uma equipe de projeto, desenvolver tarefas, testar e implantar infraestrutura, lan√ßar um foguete no espa√ßo) e muitas auxiliares (buscar inspira√ß√£o, estabelecer comunica√ß√£o, atormentar e duvidar, depress√£o, superar a crise existencial). </p><br><p>  Tr√™s meses antes do in√≠cio da assembl√©ia geral, as datas foram escolhidas - 7 e 8 de dezembro.  A equipe chegou √† conclus√£o de que nada teria tempo, mas continuava trabalhando.  E sete dias depois, esses prazos irreais foram alterados uma semana antes, uma vez que as datas selecionadas e todas as seguintes j√° haviam recebido outros CTFs.  Tudo o que restava era sorrir, cerrar os dentes e trabalhar com energia triplicada.  N√£o havia como voltar atr√°s: desenvolvimento do startanul. </p><br><br><img src="https://habrastorage.org/webt/bj/pr/j7/bjprj7dhi5vsmc2-4nkohbuzxxm.png"><br><br><p>  Como resultado, a tarefa foi mais do que o habitual - 30 pe√ßas.  Cada tarefa √© √∫nica, mas n√£o dura muito: 3 meses de prepara√ß√£o e apenas 36 horas de voo.  Mas o que!  Os bot√µes que voc√™ pintou cuidadosamente no front-end ser√£o tocados pelos principais CTFers do mundo - eles mergulhar√£o na sua ideia e fornecer√£o um feedback pessoal.  Esta √© uma √≥tima experi√™ncia e uma oportunidade de falar sobre seu trabalho com uma grande comunidade.  Afinal, geralmente com as vulnerabilidades que est√£o nas tarefas, algum tipo de hist√≥ria est√° conectada.  Algumas tarefas eram t√£o dif√≠ceis que ningu√©m conseguia descobri-las.  Ao final da qualifica√ß√£o dos problemas n√£o resolvidos, dois permaneciam: <b>Popular Forense</b> e <b>Web-Card</b> . </p><br><h2>  Sobre infraestrutura </h2><br><p>  A organiza√ß√£o da infraestrutura do torneio poderia ser abordada de diferentes maneiras.  Por exemplo, √† moda antiga, corte m√°quinas virtuais para desenvolvedores de tarefas e d√™ acesso a elas.  Nessa situa√ß√£o, cada desenvolvedor se torna um administrador satisfeito do host local, tudo funciona como ele deseja e resta apenas fornecer conectividade de rede.  √â claro, no entanto, que n√£o se fala em nenhuma replica√ß√£o e toler√¢ncia a falhas nesse caso.  O respons√°vel por nossa infraestrutura acabou de falhar em um dos CTFs da ZeroNights em 2016 e, desta vez, ministrado por uma experi√™ncia amarga, decidiu fazer as coisas de maneira diferente. </p><br><p>  Decidimos por muito tempo onde morar√≠amos e, no final, decidimos dar a volta na nuvem.  As raz√µes s√£o claras: competi√ß√µes para hackers, por isso √© melhor quebrar o Google, e j√° havia desenvolvimentos prontos no zashnik.  A principal ferramenta para criar a plataforma foi o Terraform, que permite descrever a infraestrutura na forma de c√≥digo em um formato declarativo e cuida de todos os outros gestos.  Ou seja, por exemplo, voc√™ n√£o precisa pensar em como acessar a API do Google e dizer a ele quantas e quais m√°quinas virtuais voc√™ deseja implantar. <br>  Tamb√©m foi necess√°rio decidir como iniciar tarefas.  Tivemos muita sorte por todos os desenvolvedores j√° conseguirem escrever tarefas no Docker.  Esse √© um cont√™iner de hype que permite empacotar um servi√ßo com todas as depend√™ncias em um ambiente isolado que n√£o muda entre as reinicializa√ß√µes.  N√£o h√° muitas maneiras de trabalhar com o Docker: s√£o principalmente orquestradores como o Compose e o k8s.  Para tornar tudo bonito, ou seja, implementar o Wishlist com balanceamento, r√©plicas, toler√¢ncia a falhas e outras empresas, a escolha da orquestra era √≥bvia - Kubernetes. </p><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mw/ra/ed/mwraedirnl7haxeqf7fg7yedopk.jpeg"></div><br><p>  Aqui, no entanto, houve algum mal-entendido entre o criador da infraestrutura e os desenvolvedores.  Os pentesters s√£o uma casta especial do mundo de TI: eles s√£o em parte como administradores, redes e sabem como fazer banco de dados, e s√£o orientados em programa√ß√£o.  Em geral, n√£o pessoas, mas facas su√≠√ßas.  Eles s√£o extremamente extraordin√°rios e ambiciosos, mas, infelizmente, quando foi decidido escrever Helm para cada tarefa, esqueci de alguma forma que os pentesters ainda n√£o s√£o administradores profissionais.  Isso levou a uma pequena guerra, durante a qual foi necess√°rio explicar por que certas decis√µes s√£o tomadas √† for√ßa e s√£o impostas restri√ß√µes. </p><br><p>  Os caras n√£o tinham experi√™ncia em escrever Helm, mas todos sabiam escrever Compose.  Voc√™ mesmo entende que entre o Compose local e o Helm-chart h√° uma lacuna em algumas semanas ou at√© meses de estudo do material.  Este foi o primeiro sinal que indicou que havia alguns problemas (onde a CTF estaria sem eles, especialmente quando a equipe e o administrador s√£o novos quase sempre). </p><br><p>  Devido √† falta de tempo, n√£o foi poss√≠vel automatizar tudo - algumas coisas tiveram que ser repassadas aos ombros dos pr√≥prios desenvolvedores.  Os pentesters tiveram que se sentar em reuni√µes, onde lhes foi dito como escrever elmos, enquanto eles pr√≥prios, aparentemente, amaldi√ßoavam esse desvio do que √© a luz.  Mas, apesar de tudo, conseguimos - todas as tarefas foram descritas e empacotadas nos gr√°ficos Helm, o monitoramento foi configurado na forma de Grafana e Prometheus.  O momento da verdade chegou. </p><br><p>  E aqui, para al√≠vio de todos, descobriu-se que a infraestrutura resultante √© muito f√°cil de gerenciar.  Quando tudo foi descrito e implantado no Google, realizamos um briefing para quem estava de plant√£o.  Havia dez deles e todos fizeram um √≥timo trabalho: levantaram os ca√≠dos, coletaram e lan√ßaram a vers√£o corrigida em um cubo. </p><br><h2>  Sobre os finalistas </h2><br><p>  Como resultado, equipes de 10 estrelas foram selecionadas para as finais.  Por que estelar?  O fato √© que 6 em cada 10 equipes est√£o nos dez melhores campeonatos mundiais no CTFtime, e as quatro restantes est√£o um pouco atr√°s dos dez primeiros, mas tamb√©m no topo. </p><br><p>  A principal caracter√≠stica do torneio foi que a luta mais feroz n√£o foi por um lugar entre os tr√™s primeiros, mas pela d√©cima linha.  Era importante que os participantes chegassem √†s finais, e a situa√ß√£o √© redefinida, e a distribui√ß√£o de vagas que temos com base nos resultados das competi√ß√µes classificat√≥rias pode mudar bastante. </p><br><br><img src="https://habrastorage.org/webt/er/bh/re/erbhrehftsca65fee8fimrrdvrw.png"><br>  <i>CTFZone 2019 Quals Finalistas Classifica√ß√£o Final</i> <br><br><h2>  O que vem a seguir? </h2><br><p>  Al√©m disso, ser√° poss√≠vel expirar um pouco, depois respirar fundo novamente e iniciar os preparativos para a final.  Ser√° realizado no formato Ataque / Defesa, e essa √© uma hist√≥ria completamente diferente.  Algu√©m pode perguntar: por que isso √© tudo?  A pergunta √© boa, mas provavelmente n√£o h√° resposta l√≥gica para ela.  √â que, se pelo menos por 5 segundos, voc√™ pode realmente se destacar no que est√° acontecendo, sentir-se vivo e ver de qual time voc√™ faz parte, n√£o √© em v√£o! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481280/">https://habr.com/ru/post/pt481280/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481258/index.html">Colamos a moldura da escuna sem registro e SMS</a></li>
<li><a href="../pt481260/index.html">Explorando formatos bin√°rios usando o arquivo .class bytecode como exemplo.</a></li>
<li><a href="../pt481264/index.html">Quantas pessoas veem seu √≠cone na App Store durante o aplicativo "App of the Day"</a></li>
<li><a href="../pt481272/index.html">Congelamento ou moderniza√ß√£o - o que fazemos nas f√©rias?</a></li>
<li><a href="../pt481276/index.html">Como eu criei meu YP e compilador para ele por 12 anos</a></li>
<li><a href="../pt481282/index.html">Qual √© o valor da ideia e como transform√°-la em conceito: ferramentas de designer de jogos</a></li>
<li><a href="../pt481286/index.html">Pegue a mesa! Office pequenas coisas que n√£o s√£o pequenas coisas</a></li>
<li><a href="../pt481288/index.html">Redux Toolkit como uma ferramenta para o desenvolvimento eficaz do Redux</a></li>
<li><a href="../pt481290/index.html">Configura√ß√µes de HOW-to / Network e VLAN em um servidor Hetzner e Mikrotik dedicado</a></li>
<li><a href="../pt481294/index.html">10 melhores ferramentas de automa√ß√£o de teste de software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>