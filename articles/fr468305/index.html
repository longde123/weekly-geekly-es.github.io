<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò¶Ô∏è üò¢ üì• Fabrication de lune proc√©durale üò¥ üë®üèΩ‚Äç‚öïÔ∏è üë©üèª‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il n'y a pas si longtemps, nous avons cr√©√© un syst√®me de cr√©ation de lune. Notre objectif √©tait de cr√©er des lunes de taille et de composition similai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fabrication de lune proc√©durale</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468305/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png" alt="image"></div><br>  Il n'y a pas si longtemps, nous avons cr√©√© un syst√®me de cr√©ation de lune.  Notre objectif √©tait de cr√©er des lunes de taille et de composition similaires √† celles existant dans notre syst√®me solaire.  La principale difficult√© a √©t√© d'obtenir les vastes surfaces de ces lunes et leurs int√©rieurs, de sorte qu'elles restent int√©ressantes.  De plus, nous avions besoin que les lunes soient rendues avec des d√©tails clairs, quelle que soit leur distance. <br><br>  Le syst√®me suppose que les lunes ont une base sph√©rique.  La cr√©ation d'un maillage g√©od√©sique est appliqu√©e √† la sph√®re de base, ce qui garantit la m√™me zone de toutes les parties de la surface.  Le syst√®me applique cette structure uniquement comme une grille de calcul pour la g√©n√©ration proc√©durale; la surface r√©elle de la lune sera beaucoup plus lisse que la grille de g√©n√©ration. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b16/ef1/c39/b16ef1c39e3002d49b6d30ecb2a36a5e.png"></div><br>  <i>Sph√®re g√©od√©sique</i> <br><br>  Pour obtenir de petites lunes dentel√©es, les formes g√©om√©triques de base sont d√©form√©es par le bruit 3D basse fr√©quence. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39e/971/5de/39e9715de990094a4c155425d6dd9d0f.jpg"></div><br>  <i>Sph√®re d'arpentage d√©form√©e par le bruit</i> <br><br>  √Ä partir de cette fondation, le syst√®me utilise une s√©rie de coques concentriques.  Chaque cellule d√©termine les caract√©ristiques volum√©triques de la coque concentrique suivante.  L'enveloppe ext√©rieure d√©finit les propri√©t√©s de surface de la lune. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ff/e29/a6c/1ffe29a6cb9f66fbcda22b4f1e6d7ac4.jpg"></div><br>  <i>Coquille concentrique</i> <br><br>  Chaque rev√™tement peut √™tre d√©form√© par le bruit 3D basse fr√©quence propre √† ce rev√™tement.  Si vous choisissez cette option de g√©n√©ration, la coque interne peut m√™me √™tre plus grande que la coque externe. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/064/56f/4ab/06456f4aba57b3eeab4ebbd25a47978a.png"></div><br>  <i>Distorsion de coque</i> <br><br>  Dans les diagrammes ci-dessus, la distance entre les coques et la quantit√© de distorsion sont exag√©r√©es pour montrer plus clairement le processus de construction.  En pratique, les coques seront beaucoup plus proches les unes des autres et l'ampleur de leur distorsion sera proportionnellement plus petite. <br><br>  Ci-dessous, nous parlerons de la fa√ßon de cr√©er le shell le plus externe.  Les m√™mes principes s'appliquent lors de la cr√©ation de coques internes, nous ne les examinerons donc pas en d√©tail. <br><br>  Un syst√®me lunaire proc√©dural n√©cessite un composant en temps r√©el et un composant hors ligne.  Le composant en temps r√©el s'ex√©cute sur l'ordinateur du lecteur.  Le composant hors ligne s'ex√©cute sur les ordinateurs des d√©veloppeurs de jeux.  Le composant de g√©n√©ration hors ligne cr√©e des informations qui peuvent √™tre rapidement compl√©t√©es par un composant en temps r√©el. <br><br>  Chaque sommet d'une coquille sph√©rique est class√© comme appartenant √† un biome distinct.  Un biome est un ensemble de propri√©t√©s de surface, notamment: la hauteur, la distribution des mat√©riaux, le placement des √©chantillons et la coloration des mat√©riaux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/292/18d/4d3/29218d4d3fb1e588fc742ccf46d94e61.jpg"></div><br>  <i>Exemple de biome</i> <br><br>  Les informations sur le biome contiennent des propri√©t√©s riches en entropie, telles que des crat√®res, des mers s√®ches, des fissures de surface caus√©es par des mar√©es gravitationnelles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a10/4cd/a32/a104cda328cc7e51e19a3c321321d64a.jpg"></div><br>  <i>Grand crat√®re enregistr√© dans les informations sur le biome</i> <br><br>  La d√©finition du biome contient √©galement des r√®gles pour le placement des objets qui d√©terminent l'emplacement, la fr√©quence et la randomisation des petites pi√®ces - pierres, pav√©s, corniches, etc. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a8/3bb/76a/9a83bb76a7843923d8774f2e0d2e3754.jpg"></div><br>  <i>Instances Rock</i> <br><br>  Chaque biome est cr√©√© √† partir d'√©l√©ments plac√©s par des tuiles (tuiles) afin que le composant en temps r√©el puisse appliquer les m√™mes informations dans diff√©rentes parties de la lune, ainsi que sur d'autres lunes.  Les informations sur le biome doivent √™tre g√©n√©r√©es de mani√®re √† permettre une distorsion et un r√©arrangement rapides, r√©duisant ainsi le nombre de mod√®les environnementaux r√©p√©titifs et pr√©visibles. <br><br>  Le syst√®me utilise deux types de tuiles biome: transitionnel et isol√©. <br><br>  Les informations transitoires sur les biomes se produisent dans les zones o√π le biome passe dans le biome voisin.  Des informations sur les biomes isol√©s se produisent dans les zones o√π le syst√®me garantit l'absence de biomes voisins. <br><br>  Ces deux modes distincts sont n√©cessaires car certains √©l√©ments des biomes, par exemple les crat√®res, ne peuvent √™tre situ√©s que dans des zones o√π le biome ne se transf√®re pas vers un autre biome, car les transitions entre les biomes peuvent affecter le profil de hauteur et l'apparence des √©l√©ments en relief. <br><br>  Voici un exemple simplifi√© de la lune, qui utilise trois biomes diff√©rents: polaire, tropical et √©quatorial, color√©s respectivement en rouge, bleu et vert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/d51/35f/f5dd5135fa458abddc2384468f770b11.png"></div><br>  <i>Lune avec trois biomes</i> <br><br>  Les zones √† biome isol√© ont une couleur uniforme; dans les zones √† biomes de transition, les couleurs se m√©langent. <br><br>  Le syst√®me utilise un ensemble de bruit pr√©-calcul√© pour introduire la variabilit√© dans les zones de transition entre les biomes, cr√©ant des transitions int√©ressantes et uniques d'un biome √† l'autre. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abb/a7c/d18/abba7cd18459dccae567bbb832a843fe.png"></div><br>  <i>Bruit proc√©dural appliqu√© aux transitions entre biomes</i> <br><br>  Dans les images ci-dessus, la taille de chaque partie du biome est exag√©r√©e par rapport √† la taille de la lune, afin de montrer plus clairement la technique de cr√©ation des biomes.  Un site de biome distinct couvrira une superficie d'environ 10 sur 10 km.  Une lune d'un rayon de 1 500 km aura une superficie de 30 000 000 km <sup>2</sup> .  Pour couvrir cette surface, il faudrait pr√®s de 300 000 de ces zones. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/707/9d2/f98/7079d2f982a17f506ab76405a96a14c6.png"></div><br>  <i>R√©solution de la grille du biome pour la lune avec un rayon de 1 500 km</i> <br><br>  La r√©solution de la grille du biome peut conduire √† un tr√®s grand nombre de sites de biome.  Le syst√®me ne suivra pas chacun d'eux individuellement, car l'emplacement de chaque site peut √™tre calcul√© analytiquement.  Un biome pour la plupart des sites peut √™tre attribu√© √† partir d'une carte de biome de haut niveau. <br><br>  Les cartes du biome de haut niveau d√©terminent les principales caract√©ristiques des lunes vues de loin.  Le syst√®me utilise ces cartes pour g√©n√©rer des d√©tails suppl√©mentaires sous des formes plus proches, pr√©servant l'uniformit√© de la d√©finition de la lune lors de la visualisation √† diff√©rentes distances. <br><br>  Les cartes de biome de haut niveau sont des images 2D qui peuvent √™tre plac√©es √† la surface de la lune en utilisant le param√©trage 2D.  Chaque point de la carte contient un identifiant num√©rique du biome dominant √† l'emplacement correspondant de la surface ou de la coque int√©rieure. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/214/4a5/682/2144a56825fc99a706f7498ddddf4c54.png"></div><br>  <i>Carte du biome 2D</i> <br><br>  L'image ci-dessus montre une carte avec quatre types de biomes diff√©rents (bleu, rouge, jaune et blanc).  L'image est superpos√©e √† la sph√®re √† l'aide d'un param√©trage 2D.  Un param√©trage possible est illustr√© ci-dessous: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97c/b14/da1/97cb14da1a178f0e11e5925bc6997c40.png"></div><br>  <i>Param√©trage 2D pour la carte d'identification du biome</i> <br><br>  En plus de la carte d'identification du biome, le syst√®me permet l'utilisation d'autres cartes, par exemple, contenant des hauteurs et des couleurs de surface. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a9/3b5/012/7a93b5012ca67394a4ac79ebbcb6a5e1.png"></div><br>  <i>Ombre de lune longue distance et rendu</i> <br><br>  Un pixel dans chaque image peut couvrir 4 km <sup>2</sup> , ce qui rend leur cr√©ation rentable.  Ces cartes de hauteur et de couleur peuvent √™tre g√©n√©r√©es de mani√®re proc√©durale ou dessin√©es par des artistes.  Dans un projet qui n'utilise qu'une douzaine de lunes et o√π chaque lune devrait avoir des propri√©t√©s naturelles riches et uniques, il est pr√©f√©rable d'utiliser le travail des artistes √† ce stade. <br><br>  L'image ci-dessous montre le processus de g√©n√©ration de la hauteur de surface de la gaine et d'autres propri√©t√©s: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png"></div><br>  <i>Trois √©chelles utilis√©es pour construire la lune</i> <br><br>  La lune sera compos√©e d'au moins une coquille sph√©rique.  S'il y a plusieurs coques, le syst√®me extrude les coques internes en fonction de leur rayon maximal et de la fonction de la hauteur de coque, qui est obtenue en effectuant le processus avec diff√©rentes √©chelles d√©crites ci-dessus. <br><br>  Pour chaque coquille, le concepteur de la lune cr√©e une carte de haut niveau de la distribution des biomes, la d√©finition des biomes pour les biomes trouv√©s sur cette carte et la d√©finition des mat√©riaux trouv√©s dans ce biome. <br><br>  Le syst√®me consid√®re que l'air est un mat√©riau acceptable, il peut donc √™tre utilis√© pour cr√©er des cavit√©s dans n'importe quelle coquille. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/069/94f/db9/06994fdb95020a907fa281bc0e0baf0b.png"></div><br>  <i>Coupe transversale du relief de la lune, sur lequel divers obus sont visibles</i> <br><br>  Une coque s√©par√©e peut √©galement √™tre un objet volum√©trique, dont la profondeur est d√©finie par une pile de mat√©riaux.  Les informations de la pile sont stock√©es dans un biome. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/308/002/d5b30800245d119f324fb378ff56d35e.png"></div><br>  <i>Une pile de mat√©riaux compos√©e de six mat√©riaux</i> <br><br>  √âtant donn√© que les mat√©riaux souterrains remontent rarement √† la surface, ils peuvent √™tre d√©crits avec une r√©solution beaucoup plus faible que les mat√©riaux de surface des biomes, et l'utilisation du bruit proc√©dural local restera invisible pour le joueur. <br><br>  La fonctionnalit√© de la pile de mat√©riaux peut √™tre suffisante pour la mise en page, car certains mat√©riaux de la pile peuvent √™tre assez rares.  Le concepteur du biome peut personnaliser la pr√©valence et le motif de tout mat√©riau sur la pile. <br><br>  La g√©n√©ration proc√©durale est effectu√©e par des shaders GPU et des algorithmes CPU voxel. <br><br>  Le shader calcule la couleur du fragment pour chacune des trois √©chelles et m√©lange ces √©chantillons en fonction de la distance entre la cam√©ra et le fragment. <br><br>  Toutes les pi√®ces trop petites pour √™tre enregistr√©es dans la g√©om√©trie.  mais affectant toujours la complexit√© per√ßue des surfaces, elles sont enregistr√©es dans des cartes normales g√©n√©r√©es en temps r√©el sur la base de la d√©termination proc√©durale des mat√©riaux, des biomes ou des cartes de d√©finition de la lune de haut niveau.  Pour cette raison, un faible nombre de polygones est maintenu dans la sc√®ne. <br><br>  Vous devez en payer le prix, tant que la lune est visible dans la cam√©ra, le biome et les cartes de d√©finition de haut niveau doivent √™tre stock√©s dans le GPU.  Vous pouvez utiliser le chargement s√©lectif uniquement des textures de mip n√©cessaires au rendu de l'√©chelle actuelle de la lune.  La quantit√© totale de m√©moire GPU requise est r√©duite au minimum en raison du chargement et du d√©chargement en continu du GPU lors du changement de position de l'observateur. <br><br>  Lorsque, en raison de la proximit√© de la cam√©ra, les √©l√©ments individuels deviennent suffisamment grands, ils commencent √† appara√Ætre dans la sortie de la g√©om√©trie √† l'aide de la g√©n√©ration de voxels en temps r√©el.  La m√™me chose s'applique √† toutes les parties de la lune terraform√©es ou creus√©es par les joueurs.  Si les changements sont suffisamment importants et peuvent √™tre observ√©s depuis l'orbite, le gestionnaire de sc√®nes adaptatif Voxel Farm augmente le niveau de d√©tail (LOD) de toutes les zones, dont le changement est consid√©r√© comme important par l'application. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468305/">https://habr.com/ru/post/fr468305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468289/index.html">AM</a></li>
<li><a href="../fr468291/index.html">Synopsis du livre de Mark Gaulston ¬´Je peux vous entendre¬ª</a></li>
<li><a href="../fr468293/index.html">Vive Cosmos - examen du nouvel ensemble VR de HTC</a></li>
<li><a href="../fr468295/index.html">50 nuances de matplotlib - The Master Plots (avec le code Python complet)</a></li>
<li><a href="../fr468299/index.html">Que d√©velopper Oracle pour un d√©veloppeur en 2019 (et apr√®s)</a></li>
<li><a href="../fr468309/index.html">Pr√©sentation de la police de code Cascadia</a></li>
<li><a href="../fr468311/index.html">Effacement du dossier de t√©l√©chargements √† l'aide d'un programme Python</a></li>
<li><a href="../fr468313/index.html">Pr√©sentation de la police Cascadia Code</a></li>
<li><a href="../fr468315/index.html">Comment g√©n√©rer la signature correcte (SIG) dans l'API OK.RU. Nous travaillons avec une erreur 104</a></li>
<li><a href="../fr468317/index.html">Comment d√©boguer et profiler n'importe quel EXE avec Visual Studio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>