<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîå ‚Ñ¢Ô∏è üõÖ ¬øC√≥mo implementar una arquitectura limpia en Android? ‚öíÔ∏è üâê ‚è©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øQu√© encontrar√°s en este art√≠culo? 


 En 2016, comenc√© a aprender Java y, a principios de 2017, Android. Desde el principio, ya sab√≠a que hab√≠a un co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øC√≥mo implementar una arquitectura limpia en Android?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459402/"><p><img src="https://habrastorage.org/getpro/habr/post_images/6aa/407/587/6aa4075878c8ab4f96a9937252cee4dc.jpg" alt="¬øC√≥mo implementar una arquitectura limpia en Android?"></p><br><h3 id="chto-vy-naydyote-v-etoy-state">  ¬øQu√© encontrar√°s en este art√≠culo? </h3><br><p>  En 2016, comenc√© a aprender Java y, a principios de 2017, Android.  Desde el principio, ya sab√≠a que hab√≠a un concepto de arquitectura de aplicaci√≥n, pero no sab√≠a c√≥mo aplicarlo en mi c√≥digo.  Encontr√© muchas gu√≠as diferentes, pero esto no fue m√°s claro. </p><br><p> Este art√≠culo es exactamente el que me gustar√≠a leer al comienzo de mi viaje. </p><a name="habracut"></a><br><h3 id="vazhnost-arhitektury-prilozheniy">  La importancia de la arquitectura de aplicaciones </h3><br><p>  Muchas compa√±√≠as realizan pruebas t√©cnicas para los candidatos que est√°n siendo seleccionados.  Las pruebas pueden variar, pero hay una cosa que las une.  Todos ellos requieren comprensi√≥n y la capacidad de utilizar una buena arquitectura de software. </p><br><blockquote>  <em>La buena arquitectura de software facilita la comprensi√≥n, el desarrollo, el mantenimiento y la implementaci√≥n del sistema [Libro "Arquitectura limpia", cap√≠tulo 15]</em> </blockquote><p>  El prop√≥sito de este art√≠culo es ense√±ar a alguien que nunca ha usado la arquitectura a desarrollar aplicaciones de Android para hacer esto.  Para hacer esto, consideraremos un ejemplo pr√°ctico de una aplicaci√≥n, al crear la cual implementamos la soluci√≥n menos flexible y una soluci√≥n m√°s √≥ptima usando arquitectura. </p><br><h3 id="primer">  Ejemplo </h3><br><p>  Elementos en un RecyclerView: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/acd/c21/d41/acdc21d4190da16ee6a4abb9a41c8f6a.png" alt="Elementos en RecyclerView"></p><br><ol><li>  Recibiremos datos de la API y mostraremos los resultados al usuario. </li><li>  El resultado ser√° una lista de cervezas con un nombre, descripci√≥n, imagen y contenido de alcohol para cada una. </li><li>  La cerveza debe ordenarse por grado de fortaleza. </li></ol><br><p>  <strong>Para resolver este problema:</strong> </p><br><ol><li>  Necesitamos obtener datos de la API. </li><li>  Ordenar elementos desde el grado m√°s bajo al m√°s alto de la fortaleza. </li><li>  Si el contenido de alcohol es inferior al 5%, se dibujar√° un c√≠rculo verde, si est√° entre 5% y 8%, el c√≠rculo ser√° naranja y superior al 8%, un c√≠rculo rojo. </li><li>  Finalmente, necesitamos mostrar una lista de art√≠culos. </li></ol><br><h3 id="kakoe-naimenee-gibkoe-reshenie">  ¬øCu√°l es la soluci√≥n menos flexible? </h3><br><p>  La soluci√≥n menos flexible es crear una clase que cumpla con los cuatro puntos anteriores.  Esta es la decisi√≥n que cualquiera de nosotros tomar√≠a si no supi√©ramos cu√°l es la arquitectura de las aplicaciones. </p><br><p>  El resultado para el usuario ser√° aceptable: ver√° una lista ordenada en la pantalla.  Pero si necesitamos escalar este sistema, entenderemos que la estructura no es f√°cil de entender, desarrollar, mantener e implementar. </p><br><h3 id="kak-ponyat-arhitekturu-prilozheniy-v-android">  ¬øC√≥mo entender la arquitectura de las aplicaciones en Android? </h3><br><p>  Dar√© un ejemplo muy simple.  Imagine una f√°brica de autom√≥viles con cinco zonas: </p><br><ol><li>  La primera zona crea el chasis. </li><li>  La segunda zona conecta las partes mec√°nicas. </li><li>  La tercera zona recoge un circuito electr√≥nico. </li><li>  La cuarta √°rea es la pintura. </li><li>  Y la √∫ltima √°rea agrega detalles est√©ticos. </li></ol><br><p>  Esto significa que cada zona tiene su propia responsabilidad, y trabajan en una cadena desde la primera zona hasta la quinta para lograr un resultado. </p><br><p>  Tal sistema tiene una ventaja definitiva.  Si el autom√≥vil da un error despu√©s de que est√° terminado, entonces, dependiendo de su comportamiento, sabremos qu√© departamento debe solucionarlo sin molestar a los dem√°s. </p><br><p>  Si queremos agregar m√°s detalles est√©ticos, pasaremos directamente a la quinta secci√≥n.  Y si queremos cambiar el color, pasamos al cuarto.  Y si cambiamos el chasis, esto no cambiar√° la forma en que funciona el √°rea de pintura.  Es decir, podemos modificar nuestra m√°quina puntualmente sin molestar a toda la f√°brica. </p><br><p>  Adem√°s, si con el tiempo deseamos abrir una segunda f√°brica para crear un nuevo modelo de autom√≥vil, ser√° m√°s f√°cil dividir las √°reas de trabajo. </p><br><h2 id="primenenie-arhitektury-v-android">  Arquitectura de aplicaciones de Android </h2><br><p>  Vamos a asegurarnos de que no haya una clase que haga todo el trabajo solo: solicitar datos de la API, ordenarlos y mostrarlos.  Todo esto se distribuir√° en varias √°reas llamadas capas. </p><br><h3 id="chto-eto-za-sloi">  ¬øQu√© son estas capas? </h3><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ede/f83/ca0/edef83ca090ea12e54fbba0d3cc82193.png" alt="Capas de arquitectura de Android"></p><br><p>  Para este ejemplo, vamos a crear una arquitectura limpia, que consta de tres niveles, que a su vez se dividir√°n en cinco: </p><br><ol><li>  Nivel de presentaci√≥n </li><li>  El nivel de la l√≥gica empresarial. </li><li>  Y el nivel de datos. </li></ol><br><h3 id="1-uroven-predstavleniya">  1. Nivel de presentaci√≥n </h3><br><p>  El nivel de presentaci√≥n es el nivel de usuario, una interfaz gr√°fica que captura los eventos del usuario y le muestra los resultados.  Tambi√©n verifica que no haya errores de formato en los datos ingresados ‚Äã‚Äãpor el usuario, y que los datos mostrados se muestren correctamente. </p><br><p>  En nuestro ejemplo, estas operaciones se dividen entre la capa de interfaz de usuario y el nivel ViewModel: </p><br><ul><li>  La capa de interfaz de usuario contiene Actividad y fragmentos que capturan eventos de usuario y muestran datos. </li><li>  La capa ViewModel formatea los datos para que la interfaz de usuario los muestre de una manera espec√≠fica. </li></ul><br><p>  En lugar de usar ViewModel, podemos usar otra capa que realice esta funci√≥n, es simplemente importante comprender las responsabilidades de cada capa. </p><br><p>  En nuestro ejemplo, la capa de interfaz de usuario muestra una lista de cervezas, y la capa ViewModel informa de un color que debe usar dependiendo del rango de alcohol. </p><br><h3 id="2-uroven-biznes-logiki">  2. El nivel de l√≥gica empresarial </h3><br><p>  En este nivel se encuentran todos los requisitos comerciales que debe cumplir la aplicaci√≥n.  Para esto, las operaciones necesarias se realizan aqu√≠.  En nuestro ejemplo, esta es la clasificaci√≥n de cervezas de menor a mayor intensidad. </p><br><h3 id="3-uroven-dannyh">  3. Capa de datos </h3><br><p>  En este nivel est√°n los datos y la forma de acceder a ellos. </p><br><p>  Estas operaciones se dividen entre el nivel de repositorio y el nivel de origen de datos: </p><br><ul><li>  La capa de repositorio implementa la l√≥gica de acceso a datos.  Su responsabilidad es obtener datos.  Es necesario verificar d√≥nde buscarlos en un momento determinado.  Por ejemplo, primero puede verificar la base de datos local y, si no hay datos all√≠, realizar una solicitud a la API y guardar los datos en la base de datos.  Es decir, determina la forma de acceder a los datos.  En nuestro ejemplo, solicita datos de cerveza directamente del nivel que interact√∫a con la API. </li><li>  La capa de origen de datos es directamente responsable de recibir los datos.  En nuestro ejemplo, implementa la l√≥gica de acceso API para obtener datos de cerveza. </li></ul><br><h2 id="kak-sloi-vzaimodeystvuyut">  ¬øC√≥mo interact√∫an las capas? </h2><br><p>  Veamos los enfoques te√≥ricos y pr√°cticos de la interacci√≥n. </p><br><h3 id="v-teorii">  En teor√≠a: </h3><br><p><img src="https://habrastorage.org/getpro/habr/post_images/22d/47a/b4b/22d47ab4beddf6b66ef12fbe7635d8e3.jpg" alt="Interacci√≥n entre capas"></p><br><p>  Cada capa debe comunicarse solo con sus vecinos inmediatos.  En este caso, si miramos el diagrama de arquitectura de software: </p><br><ul><li>  La interfaz de usuario solo puede comunicarse con ViewModel. </li><li>  ViewModel solo puede comunicarse con el nivel de l√≥gica empresarial. </li><li>  El nivel de l√≥gica de negocios solo puede comunicarse con el nivel de repositorio. </li><li>  Y el repositorio solo puede comunicarse con la fuente de datos. </li></ul><br><h3 id="na-praktike">  En la pr√°ctica: </h3><br><p>  Estructura del paquete en Android Studio IDE con una arquitectura limpia: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/775/d5d/5f9/775d5d5f915902d186a4921e905117f7.jpg" alt="Estructura del paquete"></p><br><p>  Tenemos una estructura de paquete en la que se crean las clases, cada una de las cuales tiene su propia √°rea de responsabilidad. </p><br><h2 id="zaklyuchitelnye-zamechaniya-po-arhitekture-prilozheniy">  Observaciones finales sobre la arquitectura de la aplicaci√≥n </h2><br><p>  Vimos que cada nivel de arquitectura de software tiene su propia √°rea de responsabilidad y todos est√°n interconectados. </p><br><p>  Es importante destacar que nunca hemos hablado sobre las bibliotecas o los lenguajes de programaci√≥n utilizados, ya que la arquitectura se centra en la estructuraci√≥n correcta del c√≥digo para que sea escalable.  Las bibliotecas cambian con el tiempo, pero los principios de la arquitectura permanecen. </p><br><p>  Adem√°s, se recomienda leer sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la inyecci√≥n de dependencia</a> para evitar crear instancias de objetos directamente en clases de arquitectura y, por lo tanto, para poder realizar pruebas unitarias utilizando Mockito y JUnit. </p><br><p>  Estoy compartiendo un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio</a> donde puedes ver: </p><br><ul><li>  Un ejemplo de arquitectura limpia de Android con Kotlin. </li><li>  Use LiveData para conectar la interfaz de usuario con ViewModel. </li><li>  El uso de la corutina. </li><li>  Kodein para inyecci√≥n de dependencia. </li><li>  JUnit y Mockito para probar la l√≥gica empresarial. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/459402/">https://habr.com/ru/post/459402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459388/index.html">Star Wars: Caballeros de la Antigua Rep√∫blica</a></li>
<li><a href="../459392/index.html">Repensar el proceso de entrevista en la divisi√≥n de desarrollo de Microsoft</a></li>
<li><a href="../459394/index.html">Arquitectura de soluci√≥n pura, pruebas sin mobs y c√≥mo llegu√© a esto</a></li>
<li><a href="../459396/index.html">"ADVERTENCIA: desinfectar HTML elimin√≥ alg√∫n contenido" y c√≥mo tratarlo correctamente</a></li>
<li><a href="../459400/index.html">Qu√© incidentes de Border Gateway Protocol pueden destacarse en los √∫ltimos a√±os</a></li>
<li><a href="../459404/index.html">Idea: registro / autorizaci√≥n an√≥nima utilizando la red Ethereum + Metamask, sin correos electr√≥nicos, etc.</a></li>
<li><a href="../459408/index.html">C√≥mo intent√© arreglar un mapa de b√∫squeda de controladores. Parte 3 (final)</a></li>
<li><a href="../459410/index.html">C√≥mo escribir c√≥digo para que tus colegas no juren</a></li>
<li><a href="../459414/index.html">Escribir una API para React Components, Parte 4: Cuidado con el Apropacalypse</a></li>
<li><a href="../459416/index.html">Escribir una API para React Components, Parte 5: solo use la composici√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>