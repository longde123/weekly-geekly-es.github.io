<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯОк ЁЯМия╕П ЁЯЫ╡ Stm32 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрд░рд┐рдЪрдп ЁЯСзЁЯП┐ ЁЯМЬ ЁЯзСЁЯП┐тАНЁЯдЭтАНЁЯзСЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдХрд╛рдлреА рдмрд╛рд░ рд▓реЛрдЧ рдореБрдЭреЗ stm32 рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рд╛рде рдореБрдбрд╝рддреЗ рд╣реИрдВред рдЙрдирдХреЗ рд╕рд╡рд╛рд▓реЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдирд╛ рдФрд░ рдЙрдирдХреА рдкрд░рд┐рдпреЛрдЬрдирд╛...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Stm32 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрд░рд┐рдЪрдп</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/407045/">  рдХрд╛рдлреА рдмрд╛рд░ рд▓реЛрдЧ рдореБрдЭреЗ stm32 рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рд╛рде рдореБрдбрд╝рддреЗ рд╣реИрдВред  рдЙрдирдХреЗ рд╕рд╡рд╛рд▓реЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдирд╛ рдФрд░ рдЙрдирдХреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдорджрдж рдХрд░рдирд╛, рдореИрдВрдиреЗ рдорд╣рд╕реВрд╕ рдХрд┐рдпрд╛ рдХрд┐ рдПрдХ рд▓реЗрдЦ рд▓рд┐рдЦрдирд╛ рдмреЗрд╣рддрд░ рд╣реЛрдЧрд╛ рдЬреЛ рд╣рд░ рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ рдЬреЛ stm32 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдЗрд╕рдХреА рд╕рднреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдмрд╛рд╡рдЬреВрдж, stm32 рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдореЗрдВ рдПрдХ рдЙрдЪреНрдЪ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╕реАрдорд╛ рд╣реИ, рдЬреЛ рдХрдИ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИред  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рдкрд╛рдардХ рдХреЛ рдПрдХ рд╡рд┐рд╕реНрддреГрдд рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ рджреЗрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХреИрд╕реЗ stm32 рдкрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ рдФрд░ рдЕрдкрдиреЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВред <br><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ stm32f103c8t6 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдФрд░ рдмреНрд▓реВ рдкрд┐рд▓ рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо IAR рд╡рд┐рдХрд╛рд╕ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рджреЗрдЦреЗрдВрдЧреЗ рдФрд░ рдПрдХ рдХрд╛рдордХрд╛рдЬреА рдлрд░реНрдорд╡реЗрдпрд░ рдмрдирд╛рдПрдВрдЧреЗред <br><br>  рд╣рд░ рдХреЛрдИ рдЬреЛ stm32 рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдЪреНрдЫреБрдХ рд╣реИ, рдмрд┐рд▓реНрд▓реА рдХрд╛ рд╕реНрд╡рд╛рдЧрдд рдХрд░рддрд╛ рд╣реИред <br><a name="habracut"></a><br><h4>  рд╣рдореЗрдВ рдЖрдЧреЗ рдХреЗ рдХрд╛рдо рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП </h4><br>  рдПрдЖрд░рдПрдо v7.30 рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдЖрдИрдПрдЖрд░ рдПрдВрдмреЗрдбреЗрдб рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдкрд╛рд▓рди рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдЙрджрд╛рд╣рд░рдгред  рдкрд░реНрдпрд╛рд╡рд░рдг рд╡рд┐рдВрдбреЛрдЬрд╝ рдПрдХреНрд╕рдкреА рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рд╣реИ, рдЬреЛ рдореИрдХ рдУрдПрд╕ рдПрдХреНрд╕ рдПрд▓ рдХрдкреНрддрд╛рди рд╕реЗ рд▓реЙрдиреНрдЪ рдХреА рдЧрдИ рд╡рд░реНрдЪреБрдЕрд▓рдмреЙрдХреНрд╕ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рд╣реИред  ST-LINK рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ ~ 120тВ╜ рдХреЗ рд▓рд┐рдП AliExpress рдкрд░ рдЦрд░реАрджреЗ рдЧрдП рдмреНрд▓реВ рдкрд┐рд▓ рдмреЛрд░реНрдб рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИред <br><br>  рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: <br><br><ul><li>  <b>рдмреНрд▓реВ рдкрд┐рд▓ рдореЙрдбреНрдпреВрд▓ рдпрд╛ рд╕рдорд╛рди</b> <br><br>  рд╡реЗ рдЖрд╕рд╛рдиреА рд╕реЗ AliExpress рдкрд░ "stm32f103c8t6 рдмреЛрд░реНрдб" рдФрд░ рд▓рдЧрднрдЧ 100 рд░реВрдмрд▓ рдХреА рд▓рд╛рдЧрдд рдХреЗ рдЕрдиреБрд░реЛрдз рдкрд░ рд╕реНрдерд┐рдд рд╣реИрдВред <br><div style="text-align:center;"><img src="https://habrastorage.org/web/729/f10/a78/729f10a784994ac5ba9c0f2ed34731ab.jpg" width="500"></div><br></li><li>  <b>рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдПрд╕рдЯреА-рд▓рд┐рдВрдХ</b> <br><br>  рдпрд╣ рдЕрд▓реАрд╕реНрдЯрдкреНрд░реЗрд╕ рдкрд░ "рд╕реНрдЯрд┐рдВрдХрд▓ рд╡реА 2" рдХреЗ рдЕрдиреБрд░реЛрдз рдкрд░ рднреА рдЖрд╕рд╛рдиреА рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реИ рдФрд░ рдЗрд╕рдХреА рд▓рд╛рдЧрдд рд▓рдЧрднрдЧ 100 рд░реВрдмрд▓ рд╣реИред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/ca3/e8f/74b/ca3e8f74bb65475eb9b93fb6c9c4f7ba.jpg" width="500"></div><br>  рдПрдХ рдЕрдзрд┐рдХ рдкреВрд░реНрдг рд╕рдВрд╕реНрдХрд░рдг рд╣реИ, рдЬреЛ рдПрдХ рдорд╛рдирдХ рд░рд┐рдмрди рдХрдиреЗрдХреНрдЯрд░ IDC20 рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ <br><div style="text-align:center;"><img src="https://habrastorage.org/web/fda/5fb/237/fda5fb237daf4826a9375fb34c7e548e.jpg" width="500"></div><br></li><li>  <b>IAR рд╡рд┐рдХрд╛рд╕ рдкрд░реНрдпрд╛рд╡рд░рдг 7.30 рдпрд╛ рдмрд╛рдж рдореЗрдВ</b> <br><br>  рд╕реАрдорд┐рдд рд╕рдВрд╕реНрдХрд░рдг 8.10 рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╡реЗрдмрд╕рд╛рдЗрдЯ рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br></li><li>  <b>рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЯреЗрдореНрдкрд▓реЗрдЯ рдЬрд┐рд╕рдореЗрдВ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдШрдЯрдХ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ</b> <br><br>  рдпрд╣рд╛рдВ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИред</a> <br></li><li>  <b>STDPeripheralLibrary3.5.0 рдлрд╝рдВрдХреНрд╢рди рд╕рдВрджрд░реНрдн</b> <br><br>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ StdPeriph3.5.0 рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╢рд╛рдорд┐рд▓ рд╣реИред  рдЧрдВрднреАрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рдкреБрд░рд╛рдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╢реБрд░реБрдЖрддреА рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдпрд╣ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ рдФрд░ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреА рдкрд░рд┐рдзрд┐ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдкрд░ рд╕рд┐рд░рджрд░реНрдж рд╕реЗ рдмрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИред  WinHelp (CHM) рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╣реИрдВрдбрдмреБрдХ рдбрд╛рдЙрдирд▓реЛрдб рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ рд╕реЗ</a> <br></li><li>  <b>RM0008 рд╕рдВрджрд░реНрдн рдореИрдиреБрдЕрд▓</b> <br><br>  Stm32f103c8 рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдХреЗ рд▓рд┐рдП рд╕рдВрджрд░реНрдн рдореИрдиреБрдЕрд▓ред  рд╕рдВрджрд░реНрдн рдкреБрд╕реНрддрдХ рдореЗрдВ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреА рдХреЛрд░ рдФрд░ рдкрд░рд┐рдзрд┐ рдХрд╛ рд╡рд┐рд╡рд░рдг, рдЗрд╕рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдФрд░ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХрд╛ рд╡рд┐рд╡рд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИред  рдпрд╣ рд╕рд▓рд╛рд╣ рджреА рдЬрд╛рддреА рд╣реИ, рд╕рдордп рдХреЗ рд╕рд╛рде, рд╕рд╛рде рдФрд░ рднрд░ рдореЗрдВ рдкрдврд╝рдиреЗ рдФрд░ рдпрд╣ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рдзреАрдп рдШрдЯрдХ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдирдЧреНрди CMSIS рдХреЗ рд╕рдорд░реНрдердХ рд╣реИрдВ, рддреЛ рдЗрд╕ PDF рдХреЗ рдмрд┐рдирд╛ рдЖрдк рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред  рдпрджрд┐ рдиреМрд╕рд┐рдЦрд┐рдпрд╛ рдЬреЛ рдкреЗрд░рд▓рд┐рдм рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдЕрднреА рднреА рдпрд╣ рдкрдврд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдпрд╛ рд╡рд╣ рдкрд░рд┐рдзреАрдп рдореЙрдбреНрдпреВрд▓ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">STMicroelectonics рд╡реЗрдмрд╕рд╛рдЗрдЯ рд╕реЗ</a> рд╕рдВрджрд░реНрдн рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <br></li></ul><br><h4>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкреНрд▓реЗрдЯ </h4><br>  рд╕рдВрд▓рдЧреНрди рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдХрд╣реАрдВ рд╕реЗ рдирд╣реАрдВ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдЕрдкрдиреЗ рд╣рд╛рдереЛрдВ рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ рдЬреЛ рдХрд┐ рдкреЗрд░рд┐рдлреЗрд░рд▓ рд░реВрдЯреНрд╕ рдореЗрдВ рдЧрдП, CMSIS рдкреИрдХреЗрдЬ рд╕реЗ рдлрд╛рдЗрд▓реЗрдВ рдФрд░ рд╣рдорд╛рд░реЗ рдЕрдкрдиреЗ рд╕реБрдзрд╛рд░ред  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдореЗрдВ рдРрд╕реА рдлрд╛рдЗрд▓реЗрдВ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реИрдВ рдЬреЛ рдХрд┐рд╕реА рднреА рд╡рд┐рдХрд╛рд╕ рдХреЗ рдорд╛рд╣реМрд▓ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВ рдФрд░ рдЙрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдореИрдВрдиреЗ рдЗрд╕рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ)ред <br><br>  рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╡рд░рдг рд╢реБрд░реБрдЖрддреА рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЬрдЯрд┐рд▓ рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЗрд╕рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ред <br><br><div class="spoiler">  <b class="spoiler_title">рдкрд░рд┐рдпреЛрдЬрдирд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛</b> <div class="spoiler_text"><ul><li>  <b>config</b> <br>  <i>stm32f10x_conf.h</i> <br><br>  рдпрд╣ рдлрд╝рд╛рдЗрд▓ StdPeripheral рдкреИрдХреЗрдЬ рдХреА рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдкрд░рд┐рдзреАрдп рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдЕрдкреНрд░рдпреБрдХреНрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдкрд░ рдЯрд┐рдкреНрдкрдгреА рдХрд░реЗрдЧрд╛, рдкрд░рд┐рдпреЛрдЬрдирд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рд╕рднреА рдлрд╛рдЗрд▓реЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред <br></li><li>  <b>рдХреЛрд░</b> <br><br>  рдЗрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ CMSIS рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣реИрдВ рдЬреЛ ARM CortexM3 рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛрд░ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИрдВред <br></li><li>  <b>perlib</b> <br><br>  рдЗрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╢реАрд░реНрд╖ рдФрд░ <i>src</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдореЗрдВ рдкреЗрд░рд▓рд┐рдм рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реЗрдВ рдФрд░ рд╕реНрд░реЛрдд рдХреЛрдб рд╢рд╛рдорд┐рд▓ рд╣реИрдВред <br></li><li>  <b>рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк</b> <br><br>  рдпрд╣рд╛рдВ рдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рдкреНрд░рд╛рдЗрдорд░реА рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЛрдб рд╡рд╛рд▓реА рдлрд╛рдЗрд▓реЗрдВ рд╣реИрдВ, рдЬреЛ ARM рдХрд░реНрдиреЗрд▓ рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВрдбрд▓рд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдХрд░реНрдиреЗрд▓ рдХреНрд▓реЙрдХ рд╕рд┐рд╕реНрдЯрдо рдФрд░ PLL рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ рдХреЗ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреА рдЕрдкрдиреА рдЕрд▓рдЧ рдлрд╛рдЗрд▓ рд╣реЛрддреА рд╣реИред <br><br>  рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреЛрдб рдЖрдкрдХреЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдореБрдЦреНрдп () рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br>  рдПрдЖрд░рдПрдо рдХрд░реНрдиреЗрд▓ рдмрд╛рдзрд╛ рд╣реИрдВрдбрд▓рд░, рд╕рд╛рде рд╣реА рдШрдбрд╝реА рдЖрд░рдВрднреАрдХрд░рдг рдХрд╛рд░реНрдп, рдЗрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕рд┐рд╕реНрдЯрдо рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреА рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕ рдкрд░ рдмрд╛рдж рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреАред <br><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 72 рдореЗрдЧрд╛рд╣рд░реНрдЯреНрдЬ рдкрд░ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП stm32f103c8t6 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд▓рд┐рдП, рдФрд░ рдбрд┐рдлрд╝реЙрд▓реНрдЯ 8 рдореЗрдЧрд╛рд╣рд░реНрдЯреНрдЬ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк_stm32f10x_md.s рдлрд╝рд╛рдЗрд▓ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br></li><li>  <b>рдкреНрд░рдгрд╛рд▓реА</b> <br><br>  рдЗрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЖрд░рдВрднреАрдХрд░рдг рдХреЗ рд╕рднреА рдХрд╛рд░реНрдп рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдПрдЖрд░рдПрдо рдХрд░реНрдиреЗрд▓ рдХреЗ рд▓рд┐рдП рдмрд╛рдзрд╛ рд╣реИрдВрдбрд▓рд░, рд╕рд╛рде рд╣реА рд╕рд╛рде рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рдирд╛рдо рдФрд░ рдлрд╝реАрд▓реНрдбреНрд╕ рдХрд╛ рд╡рд┐рд╡рд░рдгред <br><br>  <i>stm32f10x.h</i> <br><br>  рдпрд╣ CMSIS рдкреИрдХреЗрдЬ рдХреА рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдкрддреЗ, рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рдирд╛рдо рдФрд░ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреА рдкрд░рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдЙрдирдХреЗ рдХреНрд╖реЗрддреНрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рдзреАрдп рдореЙрдбреНрдпреВрд▓ рдХреЛ рдпрд╣рд╛рдВ рдПрдХ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдХреНрд╖реЗрддреНрд░ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рд╣реИрдВред  рдпрд╣ рд░рдЬрд┐рд╕реНрдЯрд░ рдлрд╝реАрд▓реНрдб рдХреЗ рд▓рд┐рдП рд╕реНрдерд┐рд░рд╛рдВрдХ рдФрд░ рдмрд┐рдЯ рдорд╛рд╕реНрдХ рдХреЛ рднреА рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  <i>stm32f10x_it</i> <br><br>  рдПрдЖрд░рдПрдо рдХрд░реНрдиреЗрд▓ рдмрд╛рдзрд╛ рд╣реИрдВрдбрд▓рд░ рдпрд╣рд╛рдВ рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВред  SysTick рд╣реИрдВрдбрд▓рд░ рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рд╛рде, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдореИрдВрдиреЗ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдерд╛, рдпреЗ рдмрд╛рдзрд╛ рд╣реИрдВрдбрд▓рд░ рдЦрд╛рд▓реА рд╣реИрдВред  рдпрджрд┐, рдЕрдЪрд╛рдирдХ, рдЖрдкрдХреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдХрд░реНрдиреЗрд▓ рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдлрд╝рд╛рдЗрд▓ рдЖрдкрдХреЗ рд▓рд┐рдП рд╣реИред <br><br>  <b>рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛрд░ рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдФрд░ рдкреЗрд░реАрдлреЗрд░рд▓ рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреЛ рднреНрд░рдорд┐рдд рди рдХрд░реЗрдВред</b>  <b>рдкреЗрд░рд┐рдлреЗрд░рд▓ рд░реБрдХрд╛рд╡рдЯ, рдЬреИрд╕реЗ рдХрд┐ рдЯрд╛рдЗрдорд░ рдпрд╛ USART, рдЕрдкрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рд╕реЗ рдЖрдк рд╕реНрд╡рдпрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреА рдЬрдбрд╝ рдореЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред</b> <br><br>  <i>system_stm32f10x</i> <br><br>  рдЗрди рджреЛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдХрд░реНрдиреЗрд▓ рдХреНрд▓реЙрдХ рдФрд░ PLL рдХреЗ рд╕рдорд╛рди рдЖрд░рдВрднреАрдХрд░рдг рдХрд╛рд░реНрдп рд╣реЛрддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ рдЖрд░рдВрднреАрдХрд░рдг рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЕрд░реНрдерд╛рддреН, рдлрд╝рдВрдХреНрд╢рдВрд╕ SystemInit рдФрд░ SystemCoreClockUpdateред <br></li></ul><br></div></div><br><h4>  рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ </h4><br>  рд╣рдорд╛рд░реА рдкрд╣рд▓реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред  рдЪрд▓реЛ рдЗрд╕реЗ EX01 рдХрд╣рддреЗ рд╣реИрдВред <br>  рд╣рдо IAR рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ <b>рдкреНрд░реЛрдЬреЗрдХреНрдЯ</b> рдореЗрдиреВ рдореЗрдВ <b>Create New Project рдХрд╛</b> рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░ 1. рдПрдХ рдирдИ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рдирд┐рд░реНрдорд╛рдг</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/c67/e37/c9c/c67e37c9c977478bacbf677bd8891e63.jpg"><br></div></div><br>  рдЯреВрд▓рдЪреЗрди рдХрд╛ рдореВрд▓реНрдп рдПрдЖрд░рдПрдо рдкрд░ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рд╣рдо рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕реА тЖТ рдореБрдЦреНрдп рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВред  рдЕрдЧрд▓рд╛, рдареАрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░ 2. рдХрд┐рд╕реА рдЦрд╛рд▓реА рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рд╕рд╣реЗрдЬрдирд╛</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/bcb/580/f3c/bcb580f3cf9345988716dc873e1ccde0.jpg"><br></div></div><br>  рдПрдХ рд╕реЗрд╡ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╡рд┐рдВрдбреЛ рджрд┐рдЦрд╛рдИ рджреЗрдЧреАред  рдЗрд╕рдореЗрдВ, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рдмрдирд╛рдП рдЧрдП рдлрд╝реЛрд▓реНрдбрд░ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЖрдЗрдП рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рдирд╛рдо ex01 рд░рдЦреЗрдВред  рдЕрдм, рдЖрдк <b>Save рдкрд░</b> рдХреНрд▓рд┐рдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдирддреАрдЬрддрди, рдПрдХ рдЦрд╛рд▓реА рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓ рдФрд░ рдПрдХ рдЦрд╛рд▓реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдИ рдЬрд╛рдПрдЧреА, рдЬрд┐рд╕рдореЗрдВ рдЕрднреА рддрдХ рдХреЛрдИ рд╕реЗрдЯрд┐рдВрдЧ рдирд╣реАрдВ рд╣реИред  рдЕрдЧрд▓рд╛ рдХрджрдо рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИ рддрд╛рдХрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдпрд╣ рд╣рдорд╛рд░реЗ рд╕рд╡рд╛рд▓реЛрдВ рдореЗрдВ рд╣рд╕реНрддрдХреНрд╖реЗрдк рди рдХрд░реЗред  <b>рдлрд╝рд╛рдЗрд▓ тЖТ рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рд╕рд╣реЗрдЬреЗрдВ рдкрд░</b> рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдЗрд╕реЗ ex01 рдкрд░ рдХреЙрд▓ рдХрд░реЗрдВ рдФрд░ <b>рд╕реЗрд╡ рдкрд░</b> рдХреНрд▓рд┐рдХ <b>рдХрд░реЗрдВ</b> ред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░ 3. рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдХреЛ рд╕рд╣реЗрдЬрдирд╛</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/318/79b/2e5/31879b2e57824c01845fbf01a107f25b.png"><br></div></div><br>  рдЕрдм рд╣рдо рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред  рдЗрд╕реЗ рд╕рдВрдЧреНрд░рд╣ рд╕реЗ рд╣рдорд╛рд░реЗ EX01 рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдХреЙрдкреА рдХрд░реЗрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░рд╛ 4. рдПрдХ рдирдИ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕реЗ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдирдХрд▓</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/857/328/568/8573285685844c26b24171bd6e22efcc.jpg"><br></div></div><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рдмрдирд╛рдиреЗ рд╡рд╛рд▓реА рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рд╕реНрд╡рдпрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореЗрдиреВ <b>рдкреНрд░реЛрдЬреЗрдХреНрдЯ тЖТ рд╡рд┐рдХрд▓реНрдк рдХрд╛</b> рдЪрдпрди рдХрд░реЗрдВред  рдПрдХ рд╡рд┐рдВрдбреЛ рдЦреБрд▓ рдЬрд╛рдПрдЧреА рдЬрд┐рд╕рдореЗрдВ рдмрд╛рдИрдВ рдУрд░ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реЛрдЧреА, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ рдХреБрдЫ рдмреБрдХрдорд╛рд░реНрдХ рд╣реЛрдВрдЧреЗред <br><br>  рдЗрд╕рдореЗрдВ <b>рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рдХрд▓реНрдк</b> рд╢реНрд░реЗрдгреА рдФрд░ <b>рд▓рдХреНрд╖реНрдп</b> рдЯреИрдм рдЪреБрдиреЗрдВред  <b>рдкреНрд░реЛрд╕реЗрд╕рд░ рд╡реЗрд░рд┐рдПрдВрдЯ</b> рд╕рдореВрд╣ рдореЗрдВ, <b>рдбрд┐рд╡рд╛рдЗрд╕</b> рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдФрд░ рдЙрд╕рдХреЗ рдмрдЧрд▓ рдореЗрдВ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ ST тЖТ STM32F103 тЖТ ST STM32F103x8 рд╣реЛрдЧрд╛ред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░рд╛ 5. рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рд▓рдХреНрд╖реНрдп рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/fc8/d85/19a/fc8d8519a25742309611690c941e4853.jpg"><br></div></div><br>  рдЕрдЧрд▓реА рд╢реНрд░реЗрдгреА рдЬрд┐рд╕реЗ рд╣рдорд╛рд░реЗ рдзреНрдпрд╛рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рд╡рд╣ рд╣реИ <b>C / C ++ рдХрдВрдкрд╛рдЗрд▓рд░</b> рд╢реНрд░реЗрдгреА рдФрд░ <b>рдкреНрд░реАрдкреНрд░реЛрд╕реЗрд╕рд░</b> рдЯреИрдмред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░рд╛ 6. рдкреНрд░реАрдкреНрд░реЛрд╕реЗрд╕рд░ рдмреБрдХрдорд╛рд░реНрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/993/df8/ed3/993df8ed3a04468692671738119e9347.jpg"><br></div></div><br>  <b>рдЕрддрд┐рд░рд┐рдХреНрдд рд╢рд╛рдорд┐рд▓ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ</b> рдХреЛ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЯреЗрдореНрдкрд▓реЗрдЯ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдВрдХ рдХреЗ рд╕рд╛рде рднрд░рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  <b>PreInclude рдлрд╝рд╛рдЗрд▓,</b> рдЖрдкрдХреЛ PerLib рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ <b>рдкрд░рд┐рднрд╛рд╖рд┐рдд рдкреНрд░рддреАрдХреЛрдВ рдХреЛ</b> STM32F10X_MD рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ <b>рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП</b> рддрд╛рдХрд┐ рдЖрд░рдВрднреАрдХрд░рдг рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕рд╣реА рдХрд░реНрдиреЗрд▓ рдШрдбрд╝реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдФрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ PLL рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред <br><br>  рдЪреВрдВрдХрд┐ рд╣рдо рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд░реВрдк рдореЗрдВ рдПрд╕рдЯреА-рд▓рд┐рдВрдХ рд╡реА 2 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдЙрд╕ рдЪрд╛рд▓рдХ рдХреЛ рдЪреБрдирдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреЛ рдбреЗрд╡рд▓рдкрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред  <b>рдбреАрдмрдЧ</b> рд╢реНрд░реЗрдгреА рдФрд░ <b>рд╕реЗрдЯрдЕрдк</b> рдЯреИрдм рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ, рдЬрд┐рд╕ рдкрд░ рдбреНрд░реЙрдк-рдбрд╛рдЙрди рд╕реВрдЪреА рдореЗрдВ <b>рдбреНрд░рд╛рдЗрд╡рд░ рдПрд╕рдЯреА-рд▓рд┐рдВрдХ рдХрд╛</b> рдЪрдпрди рдХрд░реЗрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░ 7. рдбрд┐рдмрдЧрд┐рдВрдЧ рдЯреВрд▓ рдЪреБрдирдирд╛</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/280/f5c/b81/280f5cb81ba84c0790fd3f7f7d413015.jpg"><br></div></div><br>  рдЕрдм рдЖрдкрдХреЛ рдирд┐рдпрдВрддреНрд░рдХ рдкрд░ рдлрд░реНрдорд╡реЗрдпрд░ рдЕрдкрд▓реЛрдб рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЖрдк рдЗрд╕реЗ <b>рдбрд╛рдЙрдирд▓реЛрдб</b> рдЯреИрдм рдкрд░ рдЙрд╕реА рд╢реНрд░реЗрдгреА рдореЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо <b>Verify рдбрд╛рдЙрдирд▓реЛрдб</b> рдФрд░ <b>рдлрд╝реНрд▓реИрд╢ рд▓реЛрдбрд░ (рдУрдВ) рдХреЗ</b> рд╡рд┐рдХрд▓реНрдкреЛрдВ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░рд╛ 8. рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдореЗрдВ рдлрд░реНрдорд╡реЗрдпрд░ рдЕрдкрд▓реЛрдб рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/330/0af/4d7/3300af4d78fe436687c4a39dfc530d2f.jpg"><br></div></div><br>  рдЪреВрдВрдХрд┐ рд╣рдордиреЗ рдПрд╕рдЯреА-рд▓рд┐рдВрдХ рдХреЛ рдирд┐рдпрдВрддреНрд░рдХ рдФрд░ рдбреАрдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдлрд░реНрдорд╡реЗрдпрд░ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд╕рд╛рдзрди рдХреЗ рд░реВрдк рдореЗрдВ рдЪреБрдирд╛ рд╣реИ, рдЖрдкрдХреЛ рдЗрд╕рдХреЗ рдЪрд╛рд▓рдХ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдпрд╣ рд╣рдорд╛рд░реЗ рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗред  рдмреНрд▓реВ рдкрд┐рд▓ рдмреЛрд░реНрдб рдореЗрдВ рдПрдХ рдкреВрд░реНрдг JTAG рдХрдиреЗрдХреНрдЯрд░ рдирд╣реАрдВ рд╣реИ рдЬреЛ рдкреВрд░реНрдг JTAG рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдЗрд╕рдХреЗ рд╕рд░рд▓реАрдХреГрдд рдореЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ, рдЬрд┐рд╕реЗ SWD рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ JTAG рдореЛрдб рдХреЗрд╡рд▓ рддреАрди рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдпреЗ GND, SWDCLK рдФрд░ SWDIO рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдкреВрд░реНрдг JTAG рдореЛрдб рд╕рдХреНрд╖рдо рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдЗрд╕реЗ SWD рдореЗрдВ рдмрджрд▓рдиреЗ рдФрд░ рдХреЛрд░ рдЖрд╡реГрддреНрддрд┐ рдХреЛ 72MHz рдкрд░ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br>  рд╢реНрд░реЗрдгреА рд╕реВрдЪреА рдореЗрдВ, <b>ST-LINK рдХрд╛</b> рдЪрдпрди рдХрд░реЗрдВ рдФрд░ <b>рдЗрдВрдЯрд░рдлрд╝реЗрд╕</b> рд╕рдореВрд╣ рдореЗрдВ SWD рдореЗрдВ рд╡рд┐рдХрд▓реНрдк рдмрджрд▓реЗрдВред <br><br>  рдЕрдм рдЖрдк <b>рдареАрдХ</b> рдХреНрд▓рд┐рдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░ 9. ST-LINK рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/60e/e90/b49/60ee90b49dce4987bbca7c96ff28e25a.jpg"><br></div></div><br>  рдЕрдм рдпрд╣ рдЕрдВрддрд┐рдо, рд▓реЗрдХрд┐рди рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрд╛рд░реНрдп рд╣реИ, рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рд╣рдо рдЕрдкрдирд╛ рдкрд╣рд▓рд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдВред  рдЖрдкрдХреЛ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рд╕реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рдлрд╝рд╛рдЗрд▓ рдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯрд╕реНрдкреЗрд╕ рдкреИрдирд▓ рдореЗрдВ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡рд╣рд╛рдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╣рдореЗрдВ рдкреЗрд░рд▓рд┐рдм рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рдЖрд░рдВрднрд┐рдХ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рдЖрд░рдВрднрд┐рдХ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рдо рд╕рд┐рд░реНрдл рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдлреЗрдВрдХ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рд╣рдореЗрдВ рдиреБрдХрд╕рд╛рди рдЙрдард╛рдирд╛ рдкрдбрд╝реЗрдЧрд╛ рдФрд░ рдЕрдЧрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрд╣реБрдд рдмрдбрд╝реА рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рдЗрд╕ рддрд░рд╣ рдХреЗ рдбрдВрдк рдмрд╣реБрдд рд░рд╛рд╕реНрддреЗ рдореЗрдВ рд╣реЛрдВрдЧреЗред <br><br>  IAR рд╡рд┐рдХрд╛рд╕ рд╡рд╛рддрд╛рд╡рд░рдг рдЖрдкрдХреЛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рдореВрд╣ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╕рдореВрд╣ рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рдЖрднрд╛рд╕реА рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИрдВред  рд╡реЗ рдХреЗрд╡рд▓ рдЖрдкрдХреЛ рдХрд┐рд╕реА рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред  рдбрд┐рд╕реНрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд╕рд╛рде рд╕рдореВрд╣реЛрдВ рдХрд╛ рдХреЛрдИ рд▓реЗрдирд╛-рджреЗрдирд╛ рдирд╣реАрдВ рд╣реИред <br><br>  рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕реЗ рд╕рдореВрд╣ рдмрдирд╛рдПрдВрдЧреЗ рдФрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╡рд╣рд╛рдВ рд░рдЦреЗрдВрдЧреЗред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╡рд┐рдиреНрдпрд╛рд╕ рд╕рдореВрд╣ рдмрдирд╛рдПрдБ рдФрд░ рдЙрд╕рдореЗрдВ stm32f10x_conf.h рдлрд╝рд╛рдЗрд▓ рдХреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рдбрд╛рд▓реЗрдВред <br>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрд╛рд░реНрдпрд╕реНрдерд╛рди рд╡рд┐рдВрдбреЛ рдореЗрдВ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдирд╛рдо рдкрд░ рд░рд╛рдЗрдЯ-рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдбреНрд░реЙрдк-рдбрд╛рдЙрди рдореЗрдиреВ рдореЗрдВ Add тЖТ Add Group рдЪреБрдиреЗрдВред  рд╕рдореВрд╣ рдХрд╛ рдирд╛рдо рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред <br><br>  рдЗрд╕ рд╕рдореВрд╣ рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕ рдкрд░ рд░рд╛рдЗрдЯ-рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ Add тЖТ Add рдлрд╝рд╛рдЗрд▓реЗрдВ рдЪреБрдиреЗрдВред  рдЦреБрд▓рдиреЗ рд╡рд╛рд▓реА рд╡рд┐рдВрдбреЛ рдореЗрдВ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдлрд╝реЛрд▓реНрдбрд░ рдЦреЛрд▓реЗрдВ рдФрд░ stm32f10x_conf.h рдлрд╝рд╛рдЗрд▓ рдЪреБрдиреЗрдВред <br><br><img src="https://habrastorage.org/web/e13/e92/013/e13e92013b8e4a96b544d5626dcda21f.jpg"><br><br>  рдЗрд╕реА рддрд░рд╣, рд╣рдо рдкрд░реНрд▓рд┐рдм, рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдлреЛрд▓реНрдбрд░ рдХреА рд╕рд╛рдордЧреНрд░реА рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдЖрдкрдХреЛ рдХреЛрд░ рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреЗрд╡рд▓ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реЗрдВ рд╣реИрдВ рдЬреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рдкрд░реНрд▓ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдЪрд┐рддреНрд░рд╛ 11. рдПрдХ рдЦрд╛рд▓реА рдФрд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рдкреВрд░рд╛ рджреГрд╢реНрдп</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/02f/09d/d52/02f09dd5286d4b17a1e2ea6d6c1e3542.jpg"><br></div></div><br>  рдЕрдм рдпрд╣ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЖрдЧреЗ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдкреВрд░реА рддрд░рд╣ рд╕реЗ рддреИрдпрд╛рд░ рд╣реИред <br><br><h4>  рд╕рд┐рджреНрдзрд╛рдВрдд рдХреА рдмрд┐рдЯ </h4><br>  рдХрдИ рд╢реБрд░реБрдЖрддреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЗрд╕ рддрдереНрдп рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рдПрдХ рдЪрдХреНрд░ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЕрдЧрд▓реЗ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд┐рдЫрд▓реЗ рдПрдХ рдХреЗ рдмрд╛рдж рд╣реА рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдкрдирд╛ рдХрд╛рдо рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдкреНрд░рддрд┐рдорд╛рди Arduino рдпрд╛ рд╢реБрд░реБрдЖрддреА рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд╛рда рдХреЗ рд╕рд╛рде рд╡рд┐рднрд┐рдиреНрди рд▓реЗрдЦреЛрдВ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдмрдбрд╝реА рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рд╢рд╛рдпрдж рд╣реА рдХрднреА рдПрдХрд▓-рдереНрд░реЗрдбреЗрдб рд╣реЛрддреА рд╣реИрдВред  рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдЕрдзрд┐рдХ рдпрд╛ рдХрдо рдЧрдВрднреАрд░ рдлрд░реНрдорд╡реЗрдпрд░ рдореЗрдВ рдХрдИ рдереНрд░реЗрдб рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░, рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдХреЗ рдЖрдпреЛрдЬрди рдХреЗ рд▓рд┐рдП, рдереНрд░реЗрдбрдПрдХреНрд╕ рдпрд╛ рдлреНрд░реАрдЖрд░рдЯреАрдУрдПрд╕ рдЬреИрд╕реЗ рд░рд┐рдпрд▓ рдЯрд╛рдЗрдо рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо (рдЖрд░рдЯреАрдУрдПрд╕) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рд╡реЗ рд╕рднреА рдЖрдкрдХреЛ рдХрдИ рдРрд╕реЗ рдЪрдХреНрд░ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдХрд╛рд░реНрдп рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдЪрдХреНрд░ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред  рдХрдИ Arduins рдХреА рддрд░рд╣ рдПрдХ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдореЗрдВ рдШреБрд╕рд╛ред <br><br>  рдЕрдкрдиреА рд╕рднреА рд╢рдХреНрддрд┐ рдХреЗ рд▓рд┐рдП, RTOS рдХреБрдЫ рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХрд╛ рдкрд░рд┐рдЪрдп рджреЗрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдереНрд░реЗрдб рдХрд╛ рдЕрдкрдирд╛ рд╕реНрдЯреИрдХ, рдЕрдкрдирд╛ рдореЗрдореЛрд░реА рдХреНрд╖реЗрддреНрд░ рд╣реЛрддрд╛ рд╣реИред  рдпрджрд┐ рдХрдИ рдереНрд░реЗрдбреНрд╕ рдХреЛ рд╕рдорд╛рди рдореЗрдореЛрд░реА рд╕реНрдерд╛рди рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдореНрдпреВрдЯреЗрдХреНрд╕ рдпрд╛ рд╕реЗрдорд╛рдлреЛрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рддреБрд▓реНрдпрдХрд╛рд▓рди рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдЕрдиреБрдЪрд┐рдд рдЙрдкрдпреЛрдЧ рд╕реЗ рдереНрд░реЗрдб рдкреНрд░рд╛рдердорд┐рдХрддрд╛рдПрдВ рдЧрддрд┐рд░реЛрдз рдпрд╛ рдЙрд▓рдЯрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкрд░рд┐рдзрд┐ рд╕реЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рд░реБрдХрд╛рд╡рдЯ рднреА рдПрдХ рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕рдорд╕реНрдпрд╛ рд╕реНрдЯреИрдХ рдХреЛ рдмрдЪрд╛рдиреЗ рдФрд░ рдЙрди рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ рдЬрд┐рдирдХреЗ рддрд╣рдд рдЕрдВрддрд░рд╛рдпрди рдХреЙрд▓ рдмрд╛рдзрд┐рдд рд╕реНрдЯреНрд░реАрдо рд╕реНрдЯреИрдХ рдХреЛ рдирд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдФрд░ рдЕрдВрддрдГрдХреНрд╖реЗрдкрдХ рд╣реИрдВрдбрд▓рд░ рдХреЛ рднреА рдЕрдВрдд рддрдХ рдХрд╛рдо рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  RTOS рдкреНрд░рддреНрдпреЗрдХ рдереНрд░реЗрдб рдХреЗ рд▓рд┐рдП рдПрдХ рдЫреЛрдЯрд╛ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдЕрдВрддрд░рд╛рд▓ рдХреЗ рдмрд╛рдж, рдЖрд░рдЯреАрдУрдПрд╕ рдЕрдЧрд▓реА рдзрд╛рд░рд╛ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИ (рдЗрд╕рд╕реЗ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдкрд┐рдЫрд▓реЗ рдПрдХ рдиреЗ рдЕрдкрдиреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд┐рдпрд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВ) рдФрд░ рдЗрд╕реА рддрд░рд╣ред  рд╡рд┐рднрд┐рдиреНрди рдзрд╛рд░рд╛рдПрдБ рдЕрдкрдиреА рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреА рд╣реИрдВред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдХреЛ рдмрд╛рд╣рд░ рднреАрдбрд╝ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдереЛрдбрд╝реЗ рд╕рдордп рдХреЗ рдЕрдВрддрд░рд╛рд▓ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдФрд░ рдЙрди рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрд░рдЯреАрдУрдПрд╕ рдШрдЯрдХ, рдЬрд┐рд╕реЗ "рдЕрдиреБрд╕реВрдЪрдХ" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред <br><br>  рдиреМрд╕рд┐рдЦрд┐рдП рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд▓рд┐рдП stm32 рдХреЗ рд╡рд┐рд╢рд╛рд▓ рдФрд░ рдЬрдЯрд┐рд▓ рдмрд╛рд╣реНрдп рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рддреБрд░рдВрдд рдорд╛рд╕реНрдЯрд░ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ рдФрд░ рд╕рд╛рде рд╣реА рд╕рд╛рде рдЖрд░рдЯреАрдУрдПрд╕ рднреА рд╕реАрдЦрддреЗ рд╣реИрдВред <br><br>  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЖрд░рдЯреАрдУрдПрд╕ рдХреЗ рдмрд┐рдирд╛ рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдирд╣реАрдВ рд╣реИрдВред  рдЗрд╕рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реА рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд▓рд┐рдП "рд╕рд╣рдХрд╛рд░реА рдмрд╣реБрдЖрдпрд╛рдореА" рдЖрддрд╛ рд╣реИред  рд╕рд╣рдХрд╛рд░реА рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдЖрдкрдХреЛ рдЖрд░рдЯреАрдУрдПрд╕ рдХреА рднрд╛рдЧреАрджрд╛рд░реА рдХреЗ рдмрд┐рдирд╛ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдЫреЛрдЯреЗ рдорд▓реНрдЯреАрдереНрд░реЗрдбреЗрдб рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><br>  рд╕рд╣рдХрд╛рд░реА рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдХрд╛ рд╕рд╛рд░ рдХреНрдпрд╛ рд╣реИ?  рдЗрд╕ рддрд░рд╣ рдХреЗ рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдХреЗ рд╕рд╛рде, рдкреНрд░рддреНрдпреЗрдХ рдереНрд░реЗрдб рдореЗрдВ рдЙрддрдирд╛ рд╣реА рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ рдЬрд┐рддрдирд╛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдмрд╛рд░ рдореЗрдВ рдЗрд╕рдХреЗ рд╕рдВрдкреВрд░реНрдг рдХрд╛рд░реНрдп рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред  рдпрд╣ рд╕рд╣рдХрд╛рд░реА рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреА рд▓реЗрдЦрди рд╢реИрд▓реА рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдХрдареЛрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рд╕рд╛рдордиреЗ рд░рдЦрддрд╛ рд╣реИред <br><br>  рд╕рд╣рдХрд╛рд░реА рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдХреЗ рдХрдИ рдлрд╛рдпрджреЗ рдФрд░ рдиреБрдХрд╕рд╛рди рд╣реИрдВред  рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдкреНрд░рддрд┐рдорд╛рди рдХреА рдкрд╕рдВрдж рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдбреЗрд╡рд▓рдкрд░ рдФрд░ рдЙрд╕ рдХрд╛рд░реНрдп рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреА рд╣реИ рдЬреЛ рд╡рд╣ рдХрд░рддрд╛ рд╣реИред <br>  рд╕рд╣рдХрд╛рд░реА рдорд▓реНрдЯреАрдереНрд░реЗрдбрд┐рдВрдЧ рдХреЗ рдореБрдЦреНрдп рд▓рд╛рдн рдПрдХ рдЕрдиреБрд╕реВрдЪрдХ рдХреА рдХрдореА, рд╕рднреА рдереНрд░реЗрдбреНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдХрд▓ рд╕реНрдЯреИрдХ, рдереНрд░реЗрдбреНрд╕ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХрд╛ рдЕрднрд╛рд╡ рдФрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреА рд╕рд░рд▓рддрд╛ рдкрд░рд┐рдзрд┐ рд╕реЗ рдмрд╛рдзрд┐рдд рд╣реЛрддреА рд╣реИред <br><br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕рдХреЗ рдиреБрдХрд╕рд╛рди рднреА рд╣реИрдВред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдереНрд░реЗрдбреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдлреНрд░реАрдЬрд╝ рдХрд░рдиреЗ рд╕реЗ рдкреВрд░реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рдПрдХ рдкреВрд░реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдардВрдб рдорд┐рд▓ рдЬрд╛рдПрдЧреАред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рдпрд╛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдереНрд░реЗрдбреНрд╕ рдХреА рдЧрд▓рдд рд╡рд░реНрддрдиреА рдмрд╛рдХреА рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдореЗрдВ рджреЗрд░реА рдХрд░ рд╕рдХрддреА рд╣реИред  рдФрд░ рдпрд╣ рдкреВрд░реА рд╕реВрдЪреА рдирд╣реАрдВ рд╣реИред <br><br><h4>  рд╕рд╣рдХрд╛рд░реА рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╕рдВрд░рдЪрдирд╛ </h4><br>  рд╕рд╣рдХрд╛рд░реА рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдПрдХ рд░рд╛рдЬреНрдп рдорд╢реАрди рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрддреЗ рд╣реИрдВред  рдореИрдВ рдЗрд╕рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрди рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореИрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ред  рдПрдХ рд░рд╛рдЬреНрдп рдорд╢реАрди рдПрдХ рдЕрдореВрд░реНрдд рд╡рд╕реНрддреБ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рд░рд╛рдЬреНрдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░рд┐рдорд┐рдд рд╣реИред  рдПрдХ рд╡рд╕реНрддреБ рдмрд╛рд╣рд░реА рдХрд╛рд░рдХреЛрдВ рдХреЗ рдкреНрд░рднрд╛рд╡ рдореЗрдВ, рдпрд╛ рдЖрдВрддрд░рд┐рдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдХрд╛рд░рдг рдПрдХ рд░рд╛рдЬреНрдп рд╕реЗ рджреВрд╕рд░реЗ рдореЗрдВ рдЬрд╛рддреА рд╣реИред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рд╕рд╣рдХрд╛рд░реА рдЖрд╡реЗрджрди рдзрд╛рдЧрд╛ рдПрдХ рд░рд╛рдЬреНрдп рдорд╢реАрди рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИред <br><br>  рдПрдХ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рд░рд╛рдЬреНрдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд░рд╛рдЬреНрдп рдореЗрдВ, рдпрд╛ рддреЛ рдПрдХ рдЫреЛрдЯреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдпрд╛ рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд░рд╛рдЬреНрдпреЛрдВ рдХрд╛ рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ рдпрд╛ рддреЛ рдмрд╛рд╣рд░реА рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╛ рдЬрдм рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рддрд╣рдд рдзрд╛рд░рд╛ рдХрд╛ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реЛрдирд╛ рдФрд░ рдХрд┐рд╕реА рдЕрдиреНрдп рд░рд╛рдЬреНрдп рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред <br><br>  Stm32 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдХрдИ рд╡рд░реНрд╖реЛрдВ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдПрдХ рд╕рд╣рдХрд╛рд░реА рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдХреБрдЫ рд╕рдВрд░рдЪрдирд╛ рд╡рд┐рдХрд╕рд┐рдд рдХреА рд╣реИ, рдЬрд┐рд╕реЗ рдореИрдВ рдЖрдкрдХреЛ рдкреЗрд╢ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред <br><br>  рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдЯреНрд░реАрдо рдПрдХ рдЕрд▓рдЧ рдореЙрдбреНрдпреВрд▓ (рд╣реЗрдбрд░ рдлрд╝рд╛рдЗрд▓ рдФрд░ рдХреЛрдб рдлрд╝рд╛рдЗрд▓) рд╣реИред <br><br>  рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рд╣реЗрдбрд░ рдлрд╝рд╛рдЗрд▓ рдФрд░ рдирд┐рдЬреА рд▓реЛрдЧреЛрдВ рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдХреЙрд▓ рдмрд╛рд╣рд░ рд╕реЗ рдЕрд╕рдВрднрд╡ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рджреЛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХрд╛рд░реНрдп рд╣реЛрддреЗ рд╣реИрдВ: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">XXX_Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">XXX_Control</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre> <br>  XXX_Init () рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдореБрдЦреНрдп рд▓реВрдк рдореЗрдВ рдореБрдЦреНрдп рдлрд╝рдВрдХреНрд╢рди () рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рдкрд╣рд▓реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ XXX_Control () рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдореБрдЦреНрдп рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдореБрдЦреНрдп рд▓реВрдк рдореЗрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   XXX XXX_Init(); //   YYY YYY_Init(); //   ZZZ ZZZ_Init(); while(true){ XXX_Control(); YYY_Control(); ZZZ_Control(); } }</span></span></code> </pre><br>  XXX рдореЙрдбреНрдпреВрд▓ рдлрд╝рд╛рдЗрд▓ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддреА рд╣реИ: <br><br>  <b>xxx.c</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"xxx.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> XXX_WATER_MAX_THRESHOLD 100500 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> XXX_WATER_MIN_THRESHOLD 9000 typedef enum{ idle, state1, state2, : stateX, }XXX_States; static XXX_States xxxCurrentState = idle; static int xxxToiletWaterLevel=0; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//---------    -------- void private_init1() { } void private_init2() { } void private_measureLevel() { } void private_flush() { } void private_superFlush() { } //--------    --------- void XXX_Init() { xxxCurrentState=idle; } void XXX_Reset() { private_superFlush(); xxxCurrentState=idle; } void XXX_Control() { switch(xxxCurrentState) { case idle: private_measureLevel(); if(xxxToiletWaterLevel&gt;XXX_WATER_MIN_THRESHOLD) xxxCurrentState=state1; break; case state1: if(xxxToiletWaterLevel&lt;XXX_WATER_MAX_THRESHOLD) { private_flush(); xxxCurrentState=idle; } else xxxCurrentState=state2; break; case state2: //   break; } }</span></span></span></span></code> </pre><br><h4>  рд╕рд╣рдХрд╛рд░реА рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЙрджрд╛рд╣рд░рдг </h4><br>  рдмрд╣реБрдд рд╕рд╛рд░рдЧрд░реНрднрд┐рдд рдирд╣реАрдВ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЪреБрдиреМрддреА рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВред  рдорд╛рди рд▓реЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдзрд╛рд░рд╛ рд╣реИ рдЬреЛ рдПрдХ рдПрд▓рдИрдбреА (рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб рджреЛ рдмрд╛рд░) рдЪрдордХрддреА рд╣реИ, рдЬреЛ рдПрдХ рдХреИрдереЛрдб рджреНрд╡рд╛рд░рд╛ рдкреАрд╕реА 13 рдкреЛрд░реНрдЯ рд╕реЗ рдЬреБрдбрд╝реА рд╣реИред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╕реНрдЯреНрд░реАрдо рднреА рд╣реИ рдЬреЛ рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдорд╛рдВрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдЪрд░рд┐рддреНрд░ '0' (0x30) рдЖрддрд╛ рд╣реИ, рддреЛ рдкрд▓рдХ рдЭрдкрдХрдирд╛ рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЧреНрд░рд╛рд╣рдХ рдХреЛ рдПрдХ '-' рдЪрд┐рдиреНрд╣ рднреЗрдЬ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдЪрд░рд┐рддреНрд░ '1' (0x31) рдЖрддрд╛ рд╣реИ, рддреЛ рдкрд▓рдХ рдЭрдкрдХрддреА рд╣реИ рдФрд░ рдЪрд░рд┐рддреНрд░ '*' рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдХреБрдВрдЬреА рдХреЛ рджрдмрд╛рдиреЗ рд╕реЗ рдЪрд░рд┐рддреНрд░ 'E' рд▓реМрдЯрддрд╛ рд╣реИред <br><br>  рд╣рдо рдПрд▓рдИрдбреА рдлреНрд▓реИрд╢рд┐рдВрдЧ рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рд╡рд╛рд╣ рдХреЛ modLed.h рдФрд░ modLed.c рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд░рдЦреЗрдВрдЧреЗред  рдпрд╣ рдзрд╛рдЧрд╛ рд╢реБрд░реВ рдореЗрдВ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рд╣реИ рдФрд░ рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕рдХрд╛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХрд╛рд░реНрдп MODLED_command, рдЬрдм modled_on рддрд░реНрдХ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рд╕реНрдЯреНрд░реАрдо рдХреА рд╕реНрдерд┐рддрд┐ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рддрд╛ рд╣реИ <br>  modled_st_onред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╕реНрдЯреНрд░реАрдо рдПрд▓рдИрдбреА рдХреЛ рд░реЛрд╢рдиреА рджреЗрддрд╛ рд╣реИ, Global_count рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореВрд▓реНрдп рдХреЛ рдпрд╛рдж рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╕реНрдЯреИрдВрдбрдмрд╛рдп рд╕реНрдерд┐рддрд┐ modled_st_wait1 рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдпрд╣ рд▓рдЧрд╛рддрд╛рд░ global_count рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рд╡рд░реНрддрдорд╛рди рдореВрд▓реНрдп рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЬрдм рдЪрд╛рд▓реВ рдЦрд╛рддреЗ рдФрд░ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЦрд╛рддреЗ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ MODLED_BLINK_DELAY_ON рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╕реНрдЯреНрд░реАрдо modled_st_off рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╕реНрдЯреНрд░реАрдо рдПрд▓рдИрдбреА рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИ, рдЦрд╛рддреЗ рдХреЗ рд╡рд░реНрддрдорд╛рди рдореВрд▓реНрдп рдХреЛ рдпрд╛рдж рд░рдЦрддрд╛ рд╣реИ рдФрд░ modled_st_wait2 рд╕реНрдерд┐рддрд┐ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдереНрд░реЗрдб рдкреНрд░рд╛рд░рдВрдн рдХреЗ рд╕рд╛рде global_count рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рд╡рд░реНрддрдорд╛рди рдорд╛рди рдХреА рддреБрд▓рдирд╛ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЬрдм рдЕрдВрддрд░ MODLED_BLINK_DELAY_OFF рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ modled_st_on рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЪрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдФрд░ рдЗрд╕рд▓рд┐рдП рдпрд╣ рддрдм рддрдХ рдЬрд╛рд░реА рд░рд╣реЗрдЧрд╛ рдЬрдм рддрдХ рдХреЛрдИ modled_off рддрд░реНрдХ рдХреЗ рд╕рд╛рде MODLED_command рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ред  рдлрд┐рд░, рдлрд╝рдВрдХреНрд╢рди рд╕реНрдЯреНрд░реАрдо рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ modled_st_clamp рдореЗрдВ рдмрджрд▓ рджреЗрдЧрд╛ред  рдзрд╛рдЧрд╛ рдПрд▓рдИрдбреА рдХреЛ рдмрдВрдж рдХрд░ рджреЗрдЧрд╛ рдФрд░ modled_st_idle рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЪрд▓рд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдореЙрдбрд▓реНрдб рд╕реНрдЯреНрд░реАрдо рдХрд╛ рдкреНрд░рд╛рд░рдВрдн рдореБрдЦреНрдп рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ MODLED_init () рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рдлрд╝рдВрдХреНрд╢рди GPIOC рдкреЛрд░реНрдЯ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕реНрдЯреНрд░реАрдо рдХреА рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдерд┐рддрд┐ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред  рдлрд┐рд░, рд▓реВрдк рдореЗрдВ, MODLED_control () рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдореЗрдВ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЫреЛрдЯреЗ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рд╡рд╛рд╣ рд╕рдорд╛рди рд╣реИред <br><br>  рдЗрд╕рдореЗрдВ рдирд┐рдЬреА GPIO рдкреЛрд░реНрдЯ рдЖрд░рдВрднреАрдХрд░рдг рдХрд╛рд░реНрдп рдФрд░ USART1 рдореЙрдбреНрдпреВрд▓ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕рдХреЗ рдЕрдВрджрд░ рдкрд░рд┐рдзреАрдп рдореЙрдбреНрдпреВрд▓ USART1 рд╕реЗ рдмрд╛рдзрд┐рдд рд╣реИрдВрдбрд▓рд░ рдЫрд┐рдкрд╛ рд╣реБрдЖ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдмрд╛рдЗрдЯ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕реНрдЯреНрд░реАрдо рдХреА рд╕реНрдерд┐рддрд┐ moduart_st_command рдкрд░ рд╕реЗрдЯ рдХреА рдЬрд╛рддреА рд╣реИред <br><br>  рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ, moduart рд╕реНрдЯреНрд░реАрдо moduart_st_idle рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдпрд╣ рдПрдХ рдмрд╛рдЗрдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдиреЗ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣реА рд╣реИред  рдЬреИрд╕реЗ рд╣реА рдПрдХ рдмрд╛рдЗрдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдПрдХ рдЪрд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддрд╛ рд╣реИ, рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВрдбрд▓рд░ рд╕реНрдЯреНрд░реАрдо рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ moduart_st_command рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИ рдФрд░ рд╕реНрдЯреНрд░реАрдо рдкреНрд░рд╛рдкреНрдд рдмрд╛рдЗрдЯ рдХреЛ рдЪреЗрдХ рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдкреНрд░рд╛рдкреНрдд рдмрд╛рдЗрдЯ '0' рдХрдорд╛рдВрдб рд╣реИ, рддреЛ MODLED_command рдлрд╝рдВрдХреНрд╢рди рдХреЛ modled_off рддрд░реНрдХ рдФрд░ '-' рд╡рд░реНрдг рдХреЗ рд╕рд╛рде рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ рдкреНрд░рд╛рдкреНрдд рдмрд╛рдЗрдЯ '1' рдХрдорд╛рдВрдб рд╣реИ, рддреЛ MODLED_command рдлрд╝рдВрдХреНрд╢рди рдХреЛ modled_on рддрд░реНрдХ рдХреЗ рд╕рд╛рде рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ '*' рд╡рд░реНрдг рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИред  рдЕрдиреНрдп рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЪрд░рд┐рддреНрд░ 'рдИ' рдмрд╕ рд╡рд╛рдкрд╕ рдЖ рдЧрдпрд╛ рд╣реИред <br><br>  MODUART_init () рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ MODUART рд╕реНрдЯреНрд░реАрдо рдХрд╛ рдкреНрд░рд╛рд░рдВрдн рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рднреА рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдкреЛрд░реНрдЯ рдФрд░ рдкрд░рд┐рдзреАрдп рдореЙрдбреНрдпреВрд▓ USART1 рдХреЛ рдЖрд░рдВрдн рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕реНрдЯреНрд░реАрдо рдХреЛ рд╕реНрдЯреИрдВрдбрдмрд╛рдп рдореЛрдб рдореЗрдВ рдбрд╛рд▓рддрд╛ рд╣реИред  рдореБрдЦреНрдп рд▓реВрдк рдореЗрдВ, рд╕реНрдЯреНрд░реАрдо MODUART_control () рдХрд╛ рдирд┐рдпрдВрддреНрд░рдг рдлрд╝рдВрдХреНрд╢рди рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ рдЬреБрдбрд╝реЗ рдХреЛрдб рдХреЗ рдПрдХ рдЫреЛрдЯреЗ рдЯреБрдХрдбрд╝реЗ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдкреНрд░рддреНрдпреЗрдХ рд░рд╛рдЬреНрдп рдХреЗ рд▓рд┐рдП рдХреЛрдб рдХреЗ рдЫреЛрдЯреЗ рдЯреБрдХрдбрд╝реЗ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣рдХрд╛рд░реА рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХрд╛ рд╕рдВрдкреВрд░реНрдг рд░рд╣рд╕реНрдп рдареАрдХ рд╣реИред <br><br>  <b>Global_count рдЪрд░</b> <br><br>  рд╕рдВрднрд╡рддрдГ рдЗрд╕ global_count рдЪрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдЪрд░реНрдЪрд╛ рдХреЗ рд▓рд╛рдпрдХ рд╣реИред <br><br>  <i>рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк \ startup_stm32f10x_md.s</i> рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдПрдХ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдЗрдВрдЯрд░рдкреНрдЯ рдЯреЗрдмрд▓ рд╣реЛрддрд╛ рд╣реИред  рдЗрд╕рдореЗрдВ рд╕рднреА рдкрд░рд┐рдзреАрдп рдЕрд╡рд░реЛрдзреЛрдВ рдХреЗ рд▓рд┐рдП рд╣реИрдВрдбрд▓рд░ рдХреЗ рдкрддреЗ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ <br>  рдФрд░ рдЧреБрдард▓реАред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдкрд░рд┐рдзрд┐ рдореЗрдВ рд╡реНрдпрд╡рдзрд╛рди рдХреЗрд╡рд▓ рддрдм рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдкрд░рд┐рдзрд┐ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╣реЛрддреА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╢реБрд░реВ рдореЗрдВ, рд╣реИрдВрдбрд▓рд░ рдЕрд╕реНрдерд╛рдпреА рд╕реНрдЯрдм рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдХреЙрд░реНрдЯреЗрдХреНрд╕ рдПрдо 3 рдХрд░реНрдиреЗрд▓ рдмрд╛рдзрд╛ рд╣реИрдВрдбрд▓рд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдореМрдЬреВрдж рд╣реИрдВ рдФрд░ <i>рд╕рд┐рд╕реНрдЯрдо \ stm32f10x_it рдлрд╝рд╛рдЗрд▓</i> рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИрдВред  рдРрд╕рд╛ рд╣реА рдПрдХ рд╡реНрдпрд╡рдзрд╛рди SysTick рд╕рд┐рд╕реНрдЯрдо рдЯрд╛рдЗрдорд░ рдХрд╛ рд░реБрдХрд╛рд╡рдЯ рд╣реИред  рдЗрд╕ рдЯрд╛рдЗрдорд░ рдХрд╛ рдЙрдкрдпреЛрдЧ RTOS рджреНрд╡рд╛рд░рд╛ рдХрд╛рд░реНрдп рд╢реЗрдбреНрдпреВрд▓рд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди, рдореИрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЯрд╛рдЗрдорд┐рдВрдЧрдбреЗрд▓реЗ_рдбреЗрдХрдореЗрдВрдЯ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддрд╛ рд╣реВрдВ, рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//------------------------------------------------------------------- //   volatile unsigned long global_count=0; //       SysTick,  //    stm32f10x_it.c void TimingDelay_Decrement(void) { //    global_count++; if (TimingDelay != 0x00) { TimingDelay--; } }</span></span></code> </pre><br>  рдореБрдЦреНрдп рд╕рдорд╛рд░реЛрд╣ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ SysTick рдЯрд╛рдЗрдорд░ рдЖрд╡реГрддреНрддрд┐ рдХреЛ 1 рдПрдордПрд╕ рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, <br>  SysTick рдмреАрдЪ рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рд╕реЗрдХрдВрдб рдХреЗ рд╣рд░ рд╣рдЬрд╛рд░рд╡реЗрдВ рд╣рд┐рд╕реНрд╕реЗ рдкрд░ рдХрд╛рдЙрдВрдЯрд░ рдмрдврд╝реЗрдЧрд╛ред <br><br>  рдпрд╣ рдХреЗрд╡рд▓ рдЗрд╕ рдХрд╛рдЙрдВрдЯрд░ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдпрд╛рдж рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ рдФрд░ рдЙрдирдХреЗ рдЕрдВрддрд░ рдХреЛ рдорд┐рд▓реАрд╕реЗрдХрдВрдб рдореЗрдВ рдЪреЗрдХ рдХреЗ рдмреАрдЪ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рджреЗрдЧрд╛ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рдмреНрд▓реЙрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рд╕реА рднреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдереНрд░реЗрдбреНрд╕ рдореЗрдВ рдХрд┐рд╕реА рднреА рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдХреЛ рдЭреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><h4>  рдЙрдкрд╕рдВрд╣рд╛рд░ </h4><br>  рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдкреЗрд░рд┐рдлреЗрд░рд▓рд▓рд┐рдм рдФрд░ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдШрдбрд╝реА рдЖрд░рдВрднреАрдХрд░рдг рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ рд╕рдорд╛рдзрд╛рди рдореМрдЬреВрдж рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдиреНрдп рд╡рд┐рдХрд╛рд╕ рдкрд░рд┐рд╡реЗрд╢реЛрдВ рдпрд╛ рд╕реНрдерд┐рд░рд╛рдВрдХ рдХреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рд╡рд┐рдХрд▓реНрдк рдЬреЛ рд╡рд┐рдХрд╛рд╕ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рд╕рдВрдХрд▓рди рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░рддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рд╡рд┐рдзрд┐, рдЬрд┐рд╕реЗ рдореИрдВрдиреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдпрд╣рд╛рдВ рдЙрджреНрдзреГрдд рдХрд┐рдпрд╛ рд╣реИ, рдЕрдкрдиреЗ рдЖрдк рдореЗрдВ рдХрд╛рдлреА рджреГрд╢реНрдп рд╣реИ рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рдЖрд░рдВрднреАрдХрд░рдг рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдЬрд▓реНрджреА рд╕реЗ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдВрддрд░рд┐рдХ рдЬрдирд░реЗрдЯрд░ рд╕реЗ рдШрдбрд╝реА рдХреЛ рдлрд┐рд░ рд╕реЗ рдХрд░реЗрдВред <br><br>  рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдкрд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреНрдп рд╕рдорд╛рди "рдПрд▓рдИрдбреА рдкрд░ рдПрд▓рдИрдбреА рдХреА рдЪрдордХрддреА рд░реЛрд╢рдиреА" рдХреА рддреБрд▓рдирд╛ рдореЗрдВ, рдЬреЛ рдХрд┐ рдЦрджрд╛рдиреЛрдВ рдХреЗ рдмрдЬрд╛рдп рдЦрджрд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рдХрд▓реА рд╣реИрдВред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЦрд╛рдХреЗ рдкрд░, рдореИрдВ рдирдИ рдФрд░ рдЬрдЯрд┐рд▓ рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдБ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реВрдБ рдФрд░ 2-5 рдорд┐рдирдЯ рдмрд┐рддрд╛рдиреЗ рд╕реЗ рдпрд╣ рдирд╣реАрдВ рд▓рдЧрддрд╛ рдХрд┐ рдпрд╣ рдореЗрд░реЗ рд▓рд┐рдП рдЗрддрдирд╛ рднрдпрд╛рдирдХ рдиреБрдХрд╕рд╛рди рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">ModLed.h рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╕реНрд░реЛрдд рдХреЛрдб</b> <div class="spoiler_text">  ModLed.h рдлрд╝рд╛рдЗрд▓ <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> __MODLED_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __MODLED_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"stm32f10x.h"</span></span></span><span class="hljs-meta"> typedef enum{ modled_off, modled_on, }MODLED_Commands; void MODLED_init(); void MODLED_command(MODLED_Commands aCmd); void MODLED_control(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">ModLed.c рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╕реНрд░реЛрдд рдХреЛрдб</b> <div class="spoiler_text">  ModLed.c рдлрд╝рд╛рдЗрд▓ <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"modLed.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//      #define MODLED_BLINK_DELAY_ON 250 #define MODLED_BLINK_DELAY_OFF 250 //   typedef enum{ modled_st_idle, modled_st_on, modled_st_wait1, modled_st_off, modled_st_wait2, modled_st_clamp, }MODLED_States; //  ,    1  . extern unsigned long global_count; static MODLED_States modledState=modled_st_idle; static uint32_t modledStart, modledEnd; /* PC13 - led (Open drain) */ void modled_init_gpio() { //    GPIOC RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE); GPIO_DeInit(GPIOC); GPIO_InitTypeDef gpio; GPIO_StructInit(&amp;gpio); /*  Blue Pill    ,   PC13. :  PC13      (3 )           .    . */ //   ,  . gpio.GPIO_Mode=GPIO_Mode_Out_OD; gpio.GPIO_Speed=GPIO_Speed_2MHz; gpio.GPIO_Pin=GPIO_Pin_13; GPIO_Init(GPIOC, &amp;gpio); //   GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_SET); } void MODLED_init() { modled_init_gpio(); modledState=modled_st_idle; modledStart=global_count; } //   . void MODLED_command(MODLED_Commands aCmd) { switch(aCmd) { case modled_on: modledState=modled_st_on; break; case modled_off: modledState=modled_st_clamp; break; } } void MODLED_control() { switch(modledState) { case modled_st_idle: break; case modled_st_on: //     GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_RESET); //     modledStart=global_count; //       modledState=modled_st_wait1; break; case modled_st_wait1: //    modledEnd=global_count; //           if((modledEnd-modledStart)&gt;=MODLED_BLINK_DELAY_ON) { //         modledState=modled_st_off; } break; case modled_st_off: //   GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_SET); //     modledStart=global_count; //       modledState=modled_st_wait2; break; case modled_st_wait2: //    modledEnd=global_count; //           if((modledEnd-modledStart)&gt;=MODLED_BLINK_DELAY_OFF) { //         modledState=modled_st_on; } break; case modled_st_clamp: //       GPIO_WriteBit(GPIOC, GPIO_Pin_13, Bit_SET); modledState=modled_st_idle; break; default: modledState=modled_st_idle; } }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">ModUart.h рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╕реНрд░реЛрдд рдХреЛрдб</b> <div class="spoiler_text">  ModUart.h рдлрд╝рд╛рдЗрд▓ <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> __MOD_UART_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __MOD_UART_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"stm32f10x.h"</span></span></span><span class="hljs-meta"> void MODUART_init(); void MODUART_control(); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">ModUart.c рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╕реНрд░реЛрдд рдХреЛрдб</b> <div class="spoiler_text">  ModUart.c рдлрд╝рд╛рдЗрд▓ <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"modUart.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"modLed.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MODUART_BAUDRATE 115200 typedef enum{ moduart_st_idle, moduart_st_command, }MODUART_STATES; static MODUART_STATES moduartState=moduart_st_idle; static uint16_t moduartCmd=0; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* PA9 UART1_TX PA10 UART1_RX */</span></span></span><span class="hljs-meta"> void moduart_init_gpio() { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE); //    GPIOA RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE); GPIO_InitTypeDef gpio; GPIO_StructInit(&amp;gpio); gpio.GPIO_Mode=GPIO_Mode_AF_PP; gpio.GPIO_Speed=GPIO_Speed_2MHz; gpio.GPIO_Pin=GPIO_Pin_9; GPIO_Init(GPIOA, &amp;gpio); gpio.GPIO_Mode=GPIO_Mode_IN_FLOATING; gpio.GPIO_Pin=GPIO_Pin_10; GPIO_Init(GPIOA, &amp;gpio); } void moduart_init_uart1() { //     UART1 RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE); USART_InitTypeDef uart; USART_StructInit(&amp;uart); uart.USART_BaudRate=MODUART_BAUDRATE; uart.USART_HardwareFlowControl=USART_HardwareFlowControl_None; uart.USART_Mode=USART_Mode_Rx|USART_Mode_Tx; uart.USART_Parity=USART_Parity_No; uart.USART_StopBits=USART_StopBits_1; uart.USART_WordLength=USART_WordLength_8b; USART_Init(USART1, &amp;uart); //     // --     USART1 USART_ITConfig(USART1, USART_IT_RXNE, ENABLE); //         NVIC_EnableIRQ(USART1_IRQn); //   USART1. USART_Cmd(USART1, ENABLE); } //    USART1 void USART1_IRQHandler() { //    if(USART_GetITStatus(USART1, USART_IT_RXNE)!=RESET) { //    USART_ClearITPendingBit(USART1, USART_IT_RXNE); //    moduartCmd = USART_ReceiveData(USART1); moduartState = moduart_st_command; } } void moduart_processCmd() { //   uint16_t r = 'E'; switch(moduartCmd) { //    case '0': { MODLED_command(modled_off); r = '-'; } break; //    case '1': { MODLED_command(modled_on); r = '*'; } break; } //    USART_SendData(USART1, r); moduartCmd=0; } void MODUART_init() { moduartState=moduart_st_idle; moduart_init_gpio(); moduart_init_uart1(); } void MODUART_control() { switch(moduartState) { case moduart_st_idle: break; case moduart_st_command: moduart_processCmd(); moduartState=moduart_st_idle; break; default: moduartState=moduart_st_idle; } }</span></span></span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Main.c рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╕реНрд░реЛрдд рдХреЛрдб</b> <div class="spoiler_text">  рдлрд╝рд╛рдЗрд▓ main.c <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"modUart.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"modLed.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// Imported value static __IO uint32_t TimingDelay; RCC_ClocksTypeDef RCC_Clocks; int main() { RCC_GetClocksFreq(&amp;RCC_Clocks); //   SysTick      SysTick_Config(RCC_Clocks.HCLK_Frequency / 1000); //    MODLED_init(); //     MODUART_init(); do{ //      MODLED_control(); //      MODUART_control(); }while(1); #pragma diag_suppress=Pe111 return 0; } //------------------------------------------------------------------- void Delay(__IO uint32_t nCount) { TimingDelay = nCount; while(TimingDelay != 0); } //------------------------------------------------------------------- //   volatile unsigned long global_count=0; //       SysTick,  //    stm32f10x_it.c void TimingDelay_Decrement(void) { //    global_count++; if (TimingDelay != 0x00) { TimingDelay--; } } //------------------------------------------------------------------- #ifdef USE_FULL_ASSERT void assert_failed(uint8_t *file, uint32_t line) { while(1){} } #endif</span></span></span></span></code> </pre><br></div></div><br>  рдкреВрд░рд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ рд╕реЗ</a> рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi407045/">https://habr.com/ru/post/hi407045/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi407035/index.html">рд░реВрд╕ рдореЗрдВ - рдЕрдзрд┐рдХ рдорд╣рдВрдЧрд╛ред IPhone 8 рдЦрд░реАрджрдиреЗ рдкрд░ рдкреИрд╕реЗ рдХреИрд╕реЗ рдмрдЪрд╛рдПрдВ</a></li>
<li><a href="../hi407037/index.html">рд╕рд┐рд▓рд┐рдХреЙрди рд╡реИрд▓реА: рддреАрди рд╡рд░реНрд╖реЛрдВ рдореЗрдВ рдХреНрдпрд╛ рдмрджрд▓ рдЧрдпрд╛ рд╣реИ, рднрд╛рдЧ 2</a></li>
<li><a href="../hi407039/index.html">рд▓реЙрдХрд╣реАрдб рдорд╛рд░реНрдЯрд┐рди рдиреЗ рдорд╛рд░реНрдЯрд┐рдпрди рдСрд░реНрдмрд┐рдЯрд▓ рд╕реНрдЯреЗрд╢рди рдФрд░ рд▓реИрдВрдбрд░ рдХреЗ рд▓рд┐рдП рдпреЛрдЬрдирд╛ рдХрд╛ рдЦреБрд▓рд╛рд╕рд╛ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi407041/index.html">Xiaomi MiJia рд╕реНрдорд╛рд░реНрдЯ рдХреЗрдЯрд▓ рдХреЗрддрд▓реА рдХреЗ рд╕рд╛рде рд╣рд░ рд╕рдордп рдЧрд░реНрдо рдкрд╛рдиреА</a></li>
<li><a href="../hi407043/index.html">рдбреЙред рдлреНрд░реЙрдбрд╕реНрдЯрд░: рдПрдХ рдкреНрд░рд╕рд┐рджреНрдз рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдХрд╛ рдЙрджрдп рдФрд░ рдкрддрди рдЬрд┐рд╕рдиреЗ рд▓рдЧрднрдЧ рд╕рднреА рдХреЛ рдзреЛрдЦрд╛ рджрд┐рдпрд╛</a></li>
<li><a href="../hi407047/index.html">IP57 рдмрдирд╛рдо IPX8, рдпрд╛ рджреБрдирд┐рдпрд╛ рдореЗрдВ рдПрдХрдорд╛рддреНрд░ рд╕рд╣реА рдорд╛рдпрдиреЗ рдореЗрдВ "рдСрдл-рд░реЛрдб" рдкрд╛рдардХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi407049/index.html">рдмреБрд░реА рдЦрдмрд░: рдордЫрд▓реА рдмрд╣реБрдд рдкреНрд▓рд╛рд╕реНрдЯрд┐рдХ рдЦрд╛рддреА рд╣реИ; рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рднреА рдмрджрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рд╡реЗ рдЗрд╕реЗ рдкрд╕рдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi407051/index.html">рдЬрд┐рд╕ рджрд┐рди рдкреГрдереНрд╡реА рдиреЗ рддрд░реНрдХ рджрд┐рдпрд╛</a></li>
<li><a href="../hi407053/index.html">рдЖрдВрддрд░рд┐рдХ рдЧрд░реНрдореА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рд╕рд╛</a></li>
<li><a href="../hi407055/index.html">рдкреНрд░рдХрд╛рд╢ рдХреА рдЧрддрд┐ рд╕реЗ рднреА рддреЗрдЬ рдЧрддрд┐ рд╕реЗ рдЪрд▓рдирд╛? - рдХреБрдЫ рднреА рдЖрд╕рд╛рди рдирд╣реАрдВ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>