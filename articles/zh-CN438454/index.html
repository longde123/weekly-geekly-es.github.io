<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€ğŸŒ¾ ğŸ» ğŸ‘¨â€âš–ï¸ OpenSceneGraphï¼šå¯¹è±¡çš„è¯¦ç»†ç¨‹åº¦ï¼ˆLODï¼‰å’ŒèƒŒæ™¯åŠ è½½ ğŸ‚ ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ¼ ğŸ¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¼•è¨€ 
 é€šè¿‡ä¸‰ç»´å›¾å½¢è§£å†³çš„æœ€æœ‰è¶£çš„ä»»åŠ¡ä¹‹ä¸€æ˜¯åˆ›å»ºâ€œå¤§ä¸–ç•Œâ€-åŒ…å«å¤§é‡ç‰©ä½“çš„é•¿æ™¯ï¼Œå¹¶æœ‰å¯èƒ½åœ¨èˆå°ä¸Šæ— é™ç§»åŠ¨ã€‚ è¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå–å†³äºè®¡ç®—æœºç¡¬ä»¶å›ºæœ‰çš„å¯ç†è§£çš„é™åˆ¶ã€‚ 

 ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼šåœ¨OSGå¼•æ“ä¸Šå¯è§†åŒ–é“è·¯æ—¶çš„â€œå¤§ä¸–ç•Œâ€ã€‚ å”¯ä¸€ç¼ºå°‘çš„æ˜¯è¯­è¨€ç‹‚äººåå™¬äº†ç«è½¦èƒŒåçš„ä¸–ç•Œ... 


 åœ¨è¿™æ–¹é¢ï¼Œå°±éœ€è¦...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenSceneGraphï¼šå¯¹è±¡çš„è¯¦ç»†ç¨‹åº¦ï¼ˆLODï¼‰å’ŒèƒŒæ™¯åŠ è½½</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438454/"><img src="https://habrastorage.org/webt/py/ks/3w/pyks3wlvjf_zfef-sqocutbnimk.jpeg" alt="å›¾ç‰‡"><br><h1> å¼•è¨€ </h1><br> é€šè¿‡ä¸‰ç»´å›¾å½¢è§£å†³çš„æœ€æœ‰è¶£çš„ä»»åŠ¡ä¹‹ä¸€æ˜¯åˆ›å»ºâ€œå¤§ä¸–ç•Œâ€-åŒ…å«å¤§é‡ç‰©ä½“çš„é•¿æ™¯ï¼Œå¹¶æœ‰å¯èƒ½åœ¨èˆå°ä¸Šæ— é™ç§»åŠ¨ã€‚ è¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå–å†³äºè®¡ç®—æœºç¡¬ä»¶å›ºæœ‰çš„å¯ç†è§£çš„é™åˆ¶ã€‚ <br><br>  <i>ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼šåœ¨OSGå¼•æ“ä¸Šå¯è§†åŒ–é“è·¯æ—¶çš„â€œå¤§ä¸–ç•Œâ€ã€‚</i>  <i>å”¯ä¸€ç¼ºå°‘çš„æ˜¯è¯­è¨€ç‹‚äººåå™¬äº†ç«è½¦èƒŒåçš„ä¸–ç•Œ...</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YEaYugmhO2Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> åœ¨è¿™æ–¹é¢ï¼Œå°±éœ€è¦ç®¡ç†åº”ç”¨ç¨‹åºèµ„æºï¼Œè¿™å½’ç»“ä¸ºä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆï¼šä»…ä»¥è§‚å¯Ÿè€…çš„å½“å‰ä½ç½®åŠ è½½å½“å‰æ‰€éœ€çš„èµ„æºï¼ˆæ¨¡å‹ï¼Œçº¹ç†ç­‰ï¼‰ï¼› å‡å°‘è¿œç¨‹å¯¹è±¡çš„è¯¦ç»†ç¨‹åº¦ï¼› ä»ç³»ç»Ÿå†…å­˜ä¸­å¸è½½ä¸å†éœ€è¦çš„å¯¹è±¡ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå›¾å½¢å’Œæ¸¸æˆå¼•æ“æä¾›äº†ä¸€ç»„è§£å†³æ­¤ç±»é—®é¢˜çš„å·¥å…·ã€‚ ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹OpenSceneGraphä¸­å“ªäº›å¯ç”¨ã€‚ <br><a name="habracut"></a><br><h1>  1.ä½¿ç”¨è¯¦ç»†çº§åˆ«ï¼ˆLODï¼‰ </h1><br> ä½¿ç”¨ç»†èŠ‚çº§åˆ«çš„æŠ€æœ¯ä½¿æ‚¨å¯ä»¥æˆ–å¤šæˆ–å°‘æ˜¾ç¤ºåŒä¸€å¯¹è±¡ï¼Œå…·ä½“å–å†³äºå®ƒä¸è§‚å¯Ÿè€…ä¹‹é—´çš„è·ç¦»ã€‚ è¯¥æŠ€æœ¯çš„ä½¿ç”¨åŸºäºä»¥ä¸‹ç®€å•è€ƒè™‘ï¼šä¸‰ç»´æ¨¡å‹çš„å°ç»†èŠ‚åœ¨å¾ˆé•¿çš„è·ç¦»ä¸Šæ˜¯æ— æ³•åŒºåˆ†çš„ï¼Œè¿™æ„å‘³ç€æ— éœ€ç»˜åˆ¶å®ƒä»¬ã€‚ ä¸€æ–¹é¢ï¼Œè¯¥æŠ€æœ¯ä½¿æ‚¨å¯ä»¥å‡å°‘åœ¨å¸§ç¼“å†²åŒºä¸­æ˜¾ç¤ºçš„å‡ ä½•å›¾å…ƒçš„æ€»æ•°ï¼Œå¦ä¸€æ–¹é¢ï¼Œåˆä¸ä¼šä¸¢å¤±åœºæ™¯å¯¹è±¡çš„æ˜¾ç¤ºèŒƒå›´ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹å¼€æ”¾ä¸–ç•Œæ—¶éå¸¸æœ‰ç”¨ã€‚ <br><br>  OSGæä¾›äº†é€šè¿‡osg :: LODç±»æ¥å®ç°è¯¥æŠ€æœ¯çš„å·¥å…·ï¼Œè¯¥ç±»ç»§æ‰¿è‡ªç›¸åŒçš„osg :: Groupã€‚ æ­¤ç±»å…è®¸æ‚¨åœ¨å¤šä¸ªè¯¦ç»†çº§åˆ«ä¸­è¡¨ç¤ºåŒä¸€å¯¹è±¡ã€‚ æ¯ä¸ªç»†èŠ‚ç­‰çº§çš„ç‰¹å¾æ˜¯ä¸è§‚å¯Ÿè€…çš„æœ€å°å’Œæœ€å¤§è·ç¦»ï¼Œåœ¨è§‚å¯Ÿæ—¶ï¼Œåœ¨è¯¥ç»†èŠ‚ç­‰çº§ä¸­åˆ‡æ¢å¯¹è±¡çš„æ˜¾ç¤ºã€‚ <br><br>  osg :: LODå…è®¸æ‚¨åœ¨å®šä¹‰å­èŠ‚ç‚¹æ—¶ç«‹å³æŒ‡å®šæ­¤èŒƒå›´ï¼Œæˆ–ç¨åä½¿ç”¨setRangeï¼ˆï¼‰æ–¹æ³• <br><br><pre><code class="cpp hljs">osg::ref_ptr&lt;osg::LOD&gt; lodNode = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::LOD; lodNode-&gt;addChild(node2, <span class="hljs-number"><span class="hljs-number">500.0f</span></span>, FLT_MAX); lodNode-&gt;addChild(node1); . . . lodNode-&gt;setRange(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">500.0f</span></span>);</code> </pre> <br> æˆ‘ä»¬å°†ç»§ç»­æŠ˜ç£¨å¡æ–¯çº³ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜æ‰€æè¿°çš„æŠ€æœ¯ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä¸Šå¸çš„ä¾‹å­</b> <div class="spoiler_text">  <strong>ä¸»æ–‡ä»¶</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/LOD&gt; #include &lt;osgDB/ReadFile&gt; #include &lt;osgUtil/Simplifier&gt; #include &lt;osgViewer/Viewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>ä¸»æ–‡ä»¶</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { (void) argc; (void) argv; osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::Node&gt; modelL3 = osgDB::readNodeFile("../data/cessna.osg"); osg::ref_ptr&lt;osg::Node&gt; modelL2 = dynamic_cast&lt;osg::Node *&gt;(modelL3-&gt;clone(osg::CopyOp::DEEP_COPY_ALL)); osg::ref_ptr&lt;osg::Node&gt; modelL1 = dynamic_cast&lt;osg::Node *&gt;(modelL3-&gt;clone(osg::CopyOp::DEEP_COPY_ALL)); osgUtil::Simplifier simplifer; simplifer.setSampleRatio(0.5f); modelL2-&gt;accept(simplifer); simplifer.setSampleRatio(0.1f); modelL1-&gt;accept(simplifer); osg::ref_ptr&lt;osg::LOD&gt; root = new osg::LOD; root-&gt;addChild(modelL1.get(), 200.0f, FLT_MAX); root-&gt;addChild(modelL2.get(), 50.0f, 200.0f); root-&gt;addChild(modelL3.get(), 0.0f, 50.0f); osgViewer::Viewer viewer; viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br> é¦–å…ˆï¼ŒåŠ è½½æ¨¡å‹ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Node&gt; modelL3 = osgDB::readNodeFile(<span class="hljs-string"><span class="hljs-string">"../data/cessna.osg"</span></span>);</code> </pre><br> ç°åœ¨ï¼Œæ‚¨éœ€è¦ç”Ÿæˆå‡ ä¸ªï¼ˆè¾ƒä½çš„ç¤ºä¾‹çº§åˆ«ï¼‰æ¨¡å‹ï¼ˆæˆ‘ä»¬å°†é™äºä¸¤ä¸ªç¤ºä¾‹ï¼‰ã€‚ ä¸ºæ­¤ï¼Œè¯·ä½¿ç”¨ç±»çš„æ‰€è°“â€œæ·±å±‚â€å‰¯æœ¬çš„æŠ€æœ¯ï¼Œå¯¹ç”±cloneï¼ˆï¼‰æ–¹æ³•å®ç°çš„èŠ‚ç‚¹å¤åˆ¶å·²åŠ è½½çš„èŠ‚ç‚¹ä¸¤æ¬¡ã€‚ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::Node&gt; modelL2 = <span class="hljs-keyword"><span class="hljs-keyword">dynamic_cast</span></span>&lt;osg::Node *&gt;(modelL3-&gt;clone(osg::CopyOp::DEEP_COPY_ALL)); osg::ref_ptr&lt;osg::Node&gt; modelL1 = <span class="hljs-keyword"><span class="hljs-keyword">dynamic_cast</span></span>&lt;osg::Node *&gt;(modelL3-&gt;clone(osg::CopyOp::DEEP_COPY_ALL));</code> </pre><br> ç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨osgUtil :: Simpliferç±»å‡å°‘è¿™äº›æ¨¡å‹çš„å‡ ä½•å½¢çŠ¶ã€‚ æ¨¡å‹çš„ç®€åŒ–ç¨‹åº¦ç”±æ­¤ç±»çš„setSampleRatioï¼ˆï¼‰æ–¹æ³•è®¾ç½®-ä¼ é€’çš„å‚æ•°è¶Šå°ï¼Œåº”ç”¨ç®€åŒ–ç¨‹åºåæ¨¡å‹çš„è¯¦ç»†ç¨‹åº¦å°±è¶Šä½ <br><br><pre> <code class="cpp hljs">osgUtil::Simplifier simplifer; simplifer.setSampleRatio(<span class="hljs-number"><span class="hljs-number">0.5f</span></span>); modelL2-&gt;accept(simplifer); simplifer.setSampleRatio(<span class="hljs-number"><span class="hljs-number">0.1f</span></span>); modelL1-&gt;accept(simplifer);</code> </pre><br> å½“æˆ‘ä»¬å…·æœ‰ä¸åŒè¯¦ç»†ç¨‹åº¦çš„æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬æ”¶è´¹åˆ°ä½œä¸ºosg :: LODçš„æ™ºèƒ½æŒ‡é’ˆåˆ›å»ºçš„æ ¹èŠ‚ç‚¹ã€‚ å¯¹äºæ¯ä¸ªç»†èŠ‚çº§åˆ«ï¼Œè®¾ç½®è¯¥çº§åˆ«çš„æ˜¾ç¤ºè·ç¦» <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::LOD&gt; root = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::LOD; root-&gt;addChild(modelL1.get(), <span class="hljs-number"><span class="hljs-number">200.0f</span></span>, FLT_MAX); root-&gt;addChild(modelL2.get(), <span class="hljs-number"><span class="hljs-number">50.0f</span></span>, <span class="hljs-number"><span class="hljs-number">200.0f</span></span>); root-&gt;addChild(modelL3.get(), <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">50.0f</span></span>);</code> </pre><br>  FLT_MAXåœ¨æŸç§ç¨‹åº¦ä¸Šæ„å‘³ç€åˆ°è§‚å¯Ÿè€…çš„â€œæ— é™â€å¤§è·ç¦»ã€‚ å¯åŠ¨æŸ¥çœ‹å™¨åï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹å›¾ç‰‡ <br><br> è¯¦ç»†ç¨‹åº¦3 <br><br><img src="https://habrastorage.org/webt/ww/d7/bq/wwd7bqrlttw9sgedue6m5xoxjgu.png"><br><br> è¯¦ç»†ç¨‹åº¦2 <br><br><img src="https://habrastorage.org/webt/us/ku/h0/uskuh0x_zfchoklahjzoqjeq--c.png"><br><br> è¯¦ç»†ç¨‹åº¦1 <br><br><img src="https://habrastorage.org/webt/lh/gi/ca/lhgica7l6z4dnl9w8yekiodyxn0.png"><br><br> å¯ä»¥çœ‹å‡ºï¼Œå½“æ‘„åƒæœºä»ç‰©ä½“ç§»å¼€æ—¶ï¼Œæ˜¾ç¤ºçš„å‡ ä½•å›¾å½¢çš„ç»†èŠ‚ä¼šå‡å°‘ã€‚ ä½¿ç”¨æ­¤æŠ€æœ¯ï¼Œå¯ä»¥ä»¥è¾ƒä½çš„èµ„æºæ¶ˆè€—å®ç°è¾ƒé«˜çš„åœºæ™¯çœŸå®æ„Ÿã€‚ <br><br><h1>  2.åœºæ™¯èŠ‚ç‚¹çš„åå°åŠ è½½æŠ€æœ¯ </h1><br>  OSGå¼•æ“æä¾›äº†osg :: ProxyNodeå’Œosg :: PagedLODç±»ï¼Œæ—¨åœ¨å¹³è¡¡æ¸²æŸ“åœºæ™¯æ—¶çš„è´Ÿè½½ã€‚ è¿™ä¸¤ä¸ªç±»éƒ½ç»§æ‰¿è‡ªosg :: Groupã€‚ <br><br> å¦‚æœåœºæ™¯ä¸­æœ‰å¤§é‡ä»ç£ç›˜åŠ è½½å’Œæ˜¾ç¤ºçš„æ¨¡å‹ï¼Œåˆ™osg :: ProxyNodeç±»å‹çš„èŠ‚ç‚¹ä¼šå‡å°‘æ¸²æŸ“ä¹‹å‰åº”ç”¨ç¨‹åºçš„å¯åŠ¨æ—¶é—´ã€‚ å®ƒç”¨ä½œå¤–éƒ¨æ–‡ä»¶çš„æ¥å£ï¼Œä»è€Œå…è®¸å»¶è¿ŸåŠ è½½æ¨¡å‹ã€‚ è¦æ·»åŠ å­èŠ‚ç‚¹ï¼Œè¯·ä½¿ç”¨setFileNameï¼ˆï¼‰æ–¹æ³•ï¼ˆè€Œä¸æ˜¯addChildï¼‰åœ¨ç£ç›˜ä¸Šè®¾ç½®æ¨¡å‹æ–‡ä»¶åå¹¶åŠ¨æ€åŠ è½½å®ƒã€‚ <br><br>  osg :: PagedNodeèŠ‚ç‚¹ç»§æ‰¿äº†osg :: LODæ–¹æ³•å¹¶ä»¥é¿å…è¿‡è½½OpenGLç®¡çº¿å¹¶ç¡®ä¿åœºæ™¯çš„å¹³æ»‘æ¸²æŸ“çš„æ–¹å¼åŠ è½½å’Œå¸è½½ç»†èŠ‚çº§åˆ«ã€‚ <br><br><h1>  3.æ¨¡å‹çš„åŠ¨æ€ï¼ˆè¿è¡Œæ—¶ï¼‰åŠ è½½ </h1><br> è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨osg :: ProxyNodeåŠ è½½æ¨¡å‹ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">Proxynodeç¤ºä¾‹</b> <div class="spoiler_text">  <strong>ä¸»æ–‡ä»¶</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/ProxyNode&gt; #include &lt;osgViewer/Viewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> int main(int argc, char *argv[]) { (void) argc; (void) argv; osg::ref_ptr</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg::ProxyNode&gt; root = new osg::ProxyNode; root-&gt;setFileName(0, "../data/cow.osg"); osgViewer::Viewer viewer; viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br></div></div><br> è¿™é‡Œçš„ä¸‹è½½è¿‡ç¨‹æœ‰äº›ä¸åŒ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::ProxyNode&gt; root = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::ProxyNode; root-&gt;setFileName(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"../data/cow.osg"</span></span>);</code> </pre><br> æˆ‘ä»¬æ²¡æœ‰æ˜ç¡®åŠ è½½Cowæ¨¡å‹ï¼Œè€Œæ˜¯ä¸ºæ ¹èŠ‚ç‚¹æŒ‡å®šäº†æ¨¡å‹åç§°å’Œå­èŠ‚ç‚¹ç´¢å¼•æ‰€åœ¨æ–‡ä»¶çš„åç§°ï¼Œè¯¥æ¨¡å‹åœ¨åŠ è½½ååº”æ”¾ç½®åœ¨è¯¥æ–‡ä»¶ä¸­ã€‚ å½“æ‰§è¡Œç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°è¿™ä¸ªç»“æœ <br><br><img src="https://habrastorage.org/webt/4u/z_/yb/4uz_ybvtau_okn8gtbsyvesuqo8.png"><br><br> å¯ä»¥çœ‹å‡ºï¼Œå¹¶ä¸æ˜¯ä»¥æœ€ä½³æ–¹å¼é€‰æ‹©è§†ç‚¹-ç›¸æœºç›´æ¥æ”¾åœ¨ç‰›çš„é•œä¾§ã€‚ å‘ç”Ÿè¿™ç§æƒ…å†µçš„åŸå› æ˜¯ï¼Œå½“å°šæœªæ˜¾ç¤ºèŠ‚ç‚¹0æ—¶ï¼Œåœ¨å¯åŠ¨æ¸²æŸ“å¹¶åˆå§‹åŒ–ç›¸æœºä¹‹ååŠ è½½äº†æ¨¡å‹ã€‚ è§‚ä¼—æ ¹æœ¬æ— æ³•è®¡ç®—å‡ºå¿…è¦çš„ç›¸æœºå‚æ•°ã€‚ ä½†æ˜¯ï¼Œæ¨¡å‹å·²åŠ è½½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“çºµé¼ æ ‡æ¥é…ç½®æ˜¾ç¤ºæ¨¡å¼ <br><br><img src="https://habrastorage.org/webt/kj/qp/hm/kjqphmpi5-thkedfpuqflwfywoa.png"><br><br> ä¸Šä¾‹ä¸­ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œosg :: ProxyNodeå’Œosg :: PagedLODä½œä¸ºå®¹å™¨å·¥ä½œã€‚  OSGå†…éƒ¨æ•°æ®ç®¡ç†å™¨å°†å‘é€è¯·æ±‚ï¼Œå¹¶åœ¨éœ€è¦æ¨¡å‹æ–‡ä»¶å’Œè¯¦ç»†ç¨‹åº¦æ—¶å°†æ•°æ®åŠ è½½åˆ°åœºæ™¯å›¾ä¸­ã€‚ <br><br> è¯¥æœºåˆ¶åœ¨å¤šä¸ªåå°æµä¸­èµ·ä½œç”¨ï¼Œå¹¶æ§åˆ¶ä½äºç£ç›˜ä¸Šæ–‡ä»¶ä¸­çš„é™æ€æ•°æ®çš„åŠ è½½ä»¥åŠåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ç”Ÿæˆå’Œæ·»åŠ çš„åŠ¨æ€æ•°æ®çš„åŠ è½½ã€‚ <br><br> å½“æ¸²æŸ“è¶…è½½æ—¶ï¼Œå¼•æ“ä¼šè‡ªåŠ¨å¤„ç†å½“å‰è§†å£ä¸­æœªæ˜¾ç¤ºçš„èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶ä»åœºæ™¯å›¾ä¸­åˆ é™¤ã€‚ ä½†æ˜¯ï¼Œæ­¤è¡Œä¸ºä¸ä¼šå½±å“osg :: ProxyNodeèŠ‚ç‚¹ã€‚ <br><br> ä¸ä»£ç†èŠ‚ç‚¹ä¸€æ ·ï¼Œosg :: PagedLODç±»ä¹Ÿå…·æœ‰setFileNameï¼ˆï¼‰æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šå·²åŠ è½½æ¨¡å‹çš„è·¯å¾„ï¼Œä½†æ˜¯ï¼Œæ‚¨å¿…é¡»åƒosg :: LODèŠ‚ç‚¹ä¸€æ ·ä¸ºå…¶è®¾ç½®å¯è§æ€§èŒƒå›´ã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªcessna.osgæ–‡ä»¶å’Œä¸€ä¸ªL1çº§åˆ«çš„ä½èšæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼ç»„ç»‡åˆ†é¡µèŠ‚ç‚¹ <br><br><pre> <code class="cpp hljs">osg::ref_ptr&lt;osg::PagedLOD&gt; pagedLOD = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::PagedLOD; pagedLOD-&gt;addChild(modelL1, <span class="hljs-number"><span class="hljs-number">200.0f</span></span>, FLT_MAX ); pagedLOD-&gt;setFileName( <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"cessna.osg"</span></span> ); pagedLOD-&gt;setRange( <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0.0f</span></span>, <span class="hljs-number"><span class="hljs-number">200.0f</span></span> );</code> </pre><br> æ‚¨éœ€è¦äº†è§£ï¼Œæ— æ³•ä»å†…å­˜ä¸­å¸è½½modelL1èŠ‚ç‚¹ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„éä»£ç†å­èŠ‚ç‚¹ã€‚ <br><br> æ¸²æŸ“æ—¶ï¼Œå¦‚æœä»…ä½¿ç”¨æ¨¡å‹çš„ä¸€ä¸ªç»†èŠ‚å±‚æ¬¡ï¼Œåˆ™ä»å¤–éƒ¨çœ‹ä¸åˆ°osg :: LODå’Œosg :: PagedLODä¹‹é—´çš„å·®å¼‚ã€‚ ä¸€ä¸ªæœ‰è¶£çš„æƒ³æ³•æ˜¯ä½¿ç”¨osg :: MatrixTransformç±»æ¥ç»„ç»‡å¤§é‡çš„Cessnaæ¨¡å‹ã€‚ ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¾‹å¦‚è¿™æ ·çš„åŠŸèƒ½ <br><br><pre> <code class="cpp hljs">osg::<span class="hljs-function"><span class="hljs-function">Node* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createLODNode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> osg::Vec3&amp; pos )</span></span></span><span class="hljs-function"> </span></span>{ osg::ref_ptr&lt;osg::PagedLOD&gt; pagedLOD = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::PagedLOD; â€¦ osg::ref_ptr&lt;osg::MatrixTransform&gt; mt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::MatrixTransform; mt-&gt;setMatrix( osg::Matrix::translate(pos) ); mt-&gt;addChild( pagedLOD.get() ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mt.release(); }</code> </pre><br> ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œå®ç°äº†10,000æ¶é£æœºçš„åå°åŠ è½½ <br><br>  <strong>ä¸»æ–‡ä»¶</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/PagedLOD&gt; #include &lt;osg/MatrixTransform&gt; #include &lt;osgViewer/Viewer&gt; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ osg::Node *createLODNode(const std::string &amp;filepath, const osg::Vec3 &amp;pos) { osg::ref_ptr&lt;osg::PagedLOD&gt; pagedLOD = new osg::PagedLOD; pagedLOD-&gt;setFileName(0, filepath); pagedLOD-&gt;setRange(0, 0.0f, FLT_MAX); osg::ref_ptr&lt;osg::MatrixTransform&gt; mt = new osg::MatrixTransform; mt-&gt;setMatrix(osg::Matrix::translate(pos)); mt-&gt;addChild(pagedLOD.get()); return mt.release(); } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ int main(int argc, char *argv[]) { (void) argc; (void) argv; osg::ref_ptr&lt;osg::Group&gt; root = new osg::Group; float dist = 50.0f; int N = 100; for (int i = 0; i &lt; N; ++i) { float x = i * dist; for (int j = 0; j &lt; N; ++j) { float y = j * dist; osg::Vec3 pos(x, y, 0.0f); osg::ref_ptr&lt;osg::Node&gt; node = createLODNode("../data/cessna.osg", pos); root-&gt;addChild(node.get()); } } osgViewer::Viewer viewer; viewer.setSceneData(root.get()); return viewer.run(); }</span></span></span></span></code> </pre><br> å‡è®¾é£æœºå°†ä»¥50ä¸ªåæ ‡å•ä½çš„é—´éš”ä½äºé£æœºä¸Šã€‚ åŠ è½½æ—¶ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä»…åŠ è½½è¿›å…¥æ¡†æ¶çš„é‚£äº›cessnaã€‚ ä»å¸§ä¸­æ¶ˆå¤±çš„é‚£äº›å¹³é¢ä»åœºæ™¯æ ‘ä¸­æ¶ˆå¤±ã€‚ <br><br><img src="https://habrastorage.org/webt/zx/cc/j4/zxccj4cjwh5a0ejfpl6mjudq8zi.png"><br><br><h1> ç»“è®º </h1><br>  OpenSceneGraphç³»åˆ—ä¸­çš„è¿™ä¸€è¯¾å°†æ˜¯â€œå¦‚ä½•â€æ ¼å¼çš„æœ€åä¸€è¯¾ã€‚ åœ¨åäºŒç¯‡æ–‡ç« ä¸­ï¼Œæœ‰å¯èƒ½åœ¨å®è·µä¸­é€‚åº”ä½¿ç”¨å’Œä½¿ç”¨OpenSceneGraphçš„åŸºæœ¬åŸç†ã€‚ æˆ‘çœŸçš„å¸Œæœ›è¿™ä¸ªå¼•æ“å¯¹äºè¯´ä¿„è¯­çš„å¼€å‘äººå‘˜æ¥è¯´æ›´åŠ æ¸…æ™°ã€‚ <br><br> è¿™å¹¶ä¸æ„å‘³ç€æˆ‘åœ¨èµ„æºä¸Šå…³é—­äº†OpenSceneGraphçš„ä¸»é¢˜ï¼Œç›¸åï¼Œè®¡åˆ’å°†ä»¥åçš„æ–‡ç« ä¸“é—¨ä»‹ç»åœ¨å›¾å½¢åº”ç”¨ç¨‹åºå¼€å‘ä¸­ä½¿ç”¨OSGçš„æ›´é«˜çº§çš„æŠ€æœ¯å’Œæ–¹æ³•ã€‚ ä½†æ˜¯ï¼Œä¸ºæ­¤ï¼Œæ‚¨éœ€è¦ç§¯ç´¯è‰¯å¥½çš„ææ–™å¹¶å¤„ç†è®¸å¤šè‹±è¯­æ¥æºï¼Œè¿™éœ€è¦æ—¶é—´ã€‚ <br><br> ä½†æ˜¯æˆ‘ä¸ä¼šè¯´å†è§ï¼Œè°¢è°¢æ‚¨çš„å…³æ³¨ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¾ˆå¿«</a>å†è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438454/">https://habr.com/ru/post/zh-CN438454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438438/index.html">Bitrixé¹¦é¹‰çš„é£Ÿç‰©ã€‚ æˆ‘ä»¬æµ‹è¯•æ€§èƒ½ï¼Œé€‰æ‹©é“</a></li>
<li><a href="../zh-CN438442/index.html">ä»Apacheè½¬å‘è¯·æ±‚åˆ°Ubuntuä¸­çš„Payara Server 5</a></li>
<li><a href="../zh-CN438446/index.html">åŸºå‡†ä½œä¸ºå†³å®šä»£ç æ›´æ”¹çš„åŸºç¡€</a></li>
<li><a href="../zh-CN438448/index.html">PC Speakerå…·å¤‡çš„åŠŸèƒ½</a></li>
<li><a href="../zh-CN438450/index.html">ä¸ºä»€ä¹ˆéšç§ç­–ç•¥æ¨¡æ¿ä¸é€‚åˆæ‚¨ï¼Ÿ</a></li>
<li><a href="../zh-CN438456/index.html">åœ¨Zimbra Collaboration Suiteä¸­è®¾ç½®å•ä¸€ç™»å½•</a></li>
<li><a href="../zh-CN438458/index.html">DUMP 2019å¤§ä¼šå°†äº4æœˆ19æ—¥ä¸¾è¡Œã€‚ æˆ‘ä»¬é‚€è¯·æ‚¨åœ¨â€œå‰ç«¯â€ï¼Œâ€œåç«¯â€å’Œâ€œç§‘å­¦â€éƒ¨åˆ†å‘è¡¨æ¼”è®²ã€‚</a></li>
<li><a href="../zh-CN438460/index.html">æ•°æ®åº“çº§åºåˆ—åŒ–</a></li>
<li><a href="../zh-CN438462/index.html">å‘Androidåº”ç”¨æ·»åŠ é€šçŸ¥çš„å¿«é€Ÿæ–¹æ³•</a></li>
<li><a href="../zh-CN438464/index.html">SciPyï¼Œå›¾ç®—æ³•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>