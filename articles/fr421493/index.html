<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêØ ü§ôüèæ üß† Analyse du trafic r√©seau d'une application mobile sur iOS. Partie 1 - Procurations üßÄ üë∏ ü§•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il existe des situations o√π, lors du d√©veloppement ou du test d'une application mobile, il devient n√©cessaire de visualiser le trafic r√©seau de l'appl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analyse du trafic r√©seau d'une application mobile sur iOS. Partie 1 - Procurations</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421493/"><p><img src="https://habrastorage.org/webt/o6/nl/fw/o6nlfwhw_nzwxjhjdcbp6htqkf8.jpeg"></p><br><p>  Il existe des situations o√π, lors du d√©veloppement ou du test d'une application mobile, il devient n√©cessaire de visualiser le trafic r√©seau de l'application.  Vous visualisez toujours le trafic des applications mobiles en l'affichant dans la console de votre IDE?  Il existe des outils plus efficaces pour cette t√¢che, par exemple des procurations.  Dans cet article, nous analyserons les proxys HTTP (S) les plus populaires, apprendrons √† les utiliser dans le d√©veloppement iOS et les comparerons en fonction de diff√©rents crit√®res. </p><br><p>  Plus loin, nous parlerons de l'utilisation de procurations dans le d√©veloppement iOS, mais beaucoup de choses sont √©galement applicables dans le d√©veloppement Android. </p><br><p>  Attention, sous la coupe beaucoup de photos. </p><a name="habracut"></a><br><p>  Les outils pour analyser le trafic r√©seau d'une application mobile peuvent √™tre divis√©s en: </p><br><ol><li>  Ne n√©cessitant pas d'int√©gration dans le code source de l'application test√©e - proxy: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mitmproxy</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Charles</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suite Burp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Owasp zap</a> </li></ul></li><li>  N√©cessite une int√©gration dans le code source de l'application test√©e.  Il s'agit principalement de d√©bogage des frameworks: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wormholy</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Netfox</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dotzu</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flex</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©bogueur poney</a> </li></ul></li></ol><br><p>  Il s'agit de la premi√®re partie de l'article dans laquelle nous consid√©rerons l'utilisation de procurations et les comparerons selon diff√©rents crit√®res.  Dans la deuxi√®me partie de l'article, nous allons parcourir en d√©tail les cadres de d√©bogage. </p><br><h2 id="mitmproxy">  Mitmproxy </h2><br><p><img src="https://habrastorage.org/webt/6s/x4/yx/6sx4yxmpa89qi5k_dizxgwkwda8.png"></p><br><p>  Mitmproxy est un proxy HTTP (S) gratuit et open source (~ 12 000 √©toiles sur github), qui se compose de Mitmproxy lui-m√™me, un utilitaire de console pour le trafic proxy, mitmdump, un utilitaire de console suppl√©mentaire qui pr√©sente des fonctionnalit√©s similaires √† tcpdump, mais pour HTTP (S) trafic, ainsi que mitmweb, l'interface Web de Mitmproxy. </p><br><p>  Vous pouvez installer Mitmproxy en utilisant Homebrew: </p><br><p><code>brew install mitmproxy</code> </p> <br><p>  Ou t√©l√©chargez la version souhait√©e sur la page de sortie du site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">officiel</a> . </p><br><p>  Apr√®s une installation r√©ussie, pour analyser le trafic HTTP √† partir d'un simulateur ou d'un appareil, vous devez sp√©cifier un proxy dans les param√®tres r√©seau. </p><br><p>  Pour le simulateur, vous devez activer les proxys HTTP et HTTPS dans les param√®tres r√©seau de Mac OS (Pr√©f√©rences syst√®me -&gt; R√©seau -&gt; Avanc√© -&gt; Proxys): </p><br><p><img src="https://habrastorage.org/webt/z5/1r/qb/z51rqb8cffwbfj6md_rq_0dvzbo.png"></p><br><p>  Un petit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">script bash</a> pour une activation / d√©sactivation rapide d'un proxy dans les param√®tres r√©seau du Wi-Fi sur Mac.  (Une fois que nous avons enregistr√© l'IP et le port proxy dans les param√®tres, puis utilisez la commande <code>proxy on</code> ou <code>proxy off</code> depuis la console). </p><br><p>  Pour intercepter le trafic provenant d'un appareil r√©el, vous devez sp√©cifier le proxy dans les param√®tres du r√©seau iOS, tandis que l'adresse IP de l'ordinateur ex√©cutant Mitmproxy est d√©finie comme adresse IP proxy et le port 8080. (L'adresse IP de l'ordinateur peut √™tre affich√©e dans Param√®tres&gt; R√©seau) </p><br><p><img src="https://habrastorage.org/webt/hp/pq/7m/hppq7mqcuffu47f67lqkqmhl04w.png"></p><br><p>  √Ä ce stade, nous pouvons d√©j√† intercepter le trafic HTTP, mais pour intercepter le trafic HTTPS, vous devez installer des certificats Mitmproxy sur le simulateur / p√©riph√©rique. <br>  Pour ce faire, sur le simulateur, proc√©dez comme suit (pour un appareil r√©el, les √©tapes sont similaires): </p><br><ul><li>  Assurez-vous que Mitmproxy est en cours d'ex√©cution et que le proxy est activ√© et enregistr√© dans les param√®tres r√©seau (pour le simulateur - param√®tres macOS, pour l'appareil - param√®tres iOS), comme d√©crit ci-dessus.  Maintenant, allez dans le navigateur √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mitm.it</a> et cliquez sur l'ic√¥ne Apple pour t√©l√©charger le certificat Mitmproxy.  Une alerte appara√Ætra avec un message indiquant que ce site Web tente d'ouvrir les param√®tres iOS: cliquez sur Autoriser. </li></ul><br><p><img src="https://habrastorage.org/webt/np/uc/xq/npucxqnvc-k-wporeihhr7gvwvu.png"></p><br><ul><li>  Installez ensuite le certificat Mitmproxy. </li></ul><br><p><img src="https://habrastorage.org/webt/ll/m5/x9/llm5x9dipaezxkmadswh-d-fz1m.png"></p><br><ul><li>  Et la derni√®re touche - pour iOS version 10.3 et sup√©rieure, vous devez activer l'acc√®s complet au certificat racine Mitmproxy.  Pour ce faire, acc√©dez √† Param√®tres&gt; G√©n√©ral&gt; √Ä propos&gt; Param√®tres d'approbation de certificat et activez l'acc√®s complet pour le certificat Mitmproxy. </li></ul><br><p><img src="https://habrastorage.org/webt/t4/bx/pw/t4bxpwt1b4uqhplj8nlaygmv4hi.png"></p><br><p>  Nous pouvons maintenant analyser le trafic HTTPS √† partir du simulateur.  Il reste √† ajouter une petite pr√©cision: le certificat est install√© pour un simulateur sp√©cifique, c'est-√†-dire que si nous ne l'avons fait que pour le simulateur iPhone X, alors sur le simulateur iPhone 8, nous devons faire de m√™me pour que le proxy intercepte le trafic HTTPS.  Pour intercepter le trafic HTTPS d'un appareil r√©el, toutes les √©tapes sont similaires, l'essentiel est qu'il est connect√© au m√™me r√©seau local qu'un ordinateur avec Mitmproxy. </p><br><p>  Apr√®s cela, vous pouvez ex√©cuter mitmproxy √† partir de la console <del>  et se sentir comme un pirate </del>  ou client Web mitmweb. </p><br><p>  Le client de la console nous rencontre avec une interface de tube (pour les amateurs de GUI il y a m√™me le support de la souris), o√π toutes les requ√™tes intercept√©es sont affich√©es. </p><br><p><img src="https://habrastorage.org/webt/ev/9w/al/ev9walbksj5rs9-xyfgro7c-irw.png"></p><br><p>  Vous pouvez afficher des informations d√©taill√©es pour chaque demande (param√®tres de demande, en-t√™tes, r√©ponse, etc.) </p><br><p><img src="https://habrastorage.org/webt/4g/xe/nd/4gxendtfo1pmlrbyesmjwkkck5a.png"></p><br><p>  Mitmproxy dispose d'un puissant syst√®me de filtrage des requ√™tes avec prise en charge des expressions r√©guli√®res.  Vous pouvez filtrer les demandes par code, corps de demande / r√©ponse, en-t√™tes, domaine, etc.  Appelez l'aide sur les raccourcis disponibles et les expressions de filtre en cliquant sur <code>?</code>  .  Par exemple, pour effacer la liste des requ√™tes pour la session en cours, vous pouvez simplement appuyer sur <code>z</code> , et pour filtrer la liste des requ√™tes par URL dans laquelle se trouve le mot "pomme", vous devez appuyer sur <code>f</code> et √©crire une expression de filtrage par URL <code>~u apple</code> , qui prend une expression r√©guli√®re. </p><br><p><img src="https://habrastorage.org/webt/rx/ta/xl/rxtaxlzj7_0g8ulpleurl9jdgma.png"></p><br><p>  Les fans de Vim seront √©galement ravis du support hjkl.  Nous avons presque oubli√© un raccourci tr√®s important <code>q</code> - il fonctionne comme un bouton "retour" lors du d√©placement entre les √©crans, et sur l'√©cran principal avec une liste de requ√™tes lorsque vous cliquez sur ce raccourci, Mitmproxy vous proposera de quitter le programme. <br>  Malgr√© l'interface de la console, l'utilisation de Mitmproxy est un plaisir gr√¢ce √† des raccourcis pratiques et √† des commandes intuitives simples.  Voici un petit tableau avec les raccourcis principaux. </p><br><table><thead><tr><th>  Raccourci </th><th>  La description </th></tr></thead><tbody><tr><td>  ? </td><td>  Aide </td></tr><tr><td>  z </td><td>  Effacer la liste des sessions en cours </td></tr><tr><td>  f </td><td>  Filtrage de session </td></tr><tr><td>  q </td><td>  Retour (quitter sur l'√©cran principal) </td></tr><tr><td>  d </td><td>  Supprimer la demande de la liste des sessions </td></tr><tr><td>  r </td><td>  R√©p√©ter la demande </td></tr><tr><td>  e </td><td>  Enregistrer la demande dans un fichier </td></tr><tr><td>  g </td><td>  Liste des meilleures sessions </td></tr><tr><td>  G </td><td>  √Ä la fin de la liste des sessions </td></tr></tbody></table><br><p>  Si vous √™tes toujours un ardent adversaire de la console et que vous ne reconnaissez que les applications GUI, alors mitmweb est press√© de nous aider, nous le lancerons pour le moment √©galement √† partir de la console, plus tard, nous pourrons cr√©er un raccourci vers le bureau. </p><br><p><img src="https://habrastorage.org/webt/ez/wd/s1/ezwds15jyp-by5b3ic_d-hbo_3g.png"></p><br><p>  Le client Web est toujours en test b√™ta et il ne contient que la fonctionnalit√© de base mitmproxy (suffisante pour 95% des t√¢ches), qui est progressivement compl√©t√©e par de nouvelles fonctionnalit√©s √† chaque nouvelle version, mais malgr√© cela, elle peut maintenant √™tre utilis√©e et c'est tr√®s pratique.  Certains raccourcis de la version console fonctionnent √©galement ici, par exemple, pour effacer la liste des demandes pour la session en cours, appuyez simplement sur <code>z</code> .  Vous pouvez √©galement filtrer les requ√™tes intercept√©es via le champ "Rechercher", comme nous l'avons fait dans l'application console lorsque nous avons appliqu√© le filtre <code>~u apple</code> . </p><br><p><img src="https://habrastorage.org/webt/sr/4z/nt/sr4zntpy7kccnhr_-thxh4-t_uy.png"></p><br><p>  Mitmproxy revendique la prise en charge de la norme Websocket, mais malheureusement l'affichage des cadres Websocket dans l'interface utilisateur n'a pas encore √©t√© impl√©ment√© et, selon les d√©veloppeurs, la fonctionnalit√© Websocket n'est disponible que pour l'utilitaire mitmdump. </p><br><h2 id="charles">  Charles </h2><br><p><img src="https://habrastorage.org/webt/w0/hu/hq/w0huhqhik2xqsosv682wnqzdski.png"></p><br><p>  Charles est peut-√™tre le proxy HTTP (S) le plus populaire pour MacOS, son seul inconv√©nient est qu'il est pay√©, au moment de la r√©daction, la licence co√ªte 50 $.  Cependant, il existe une version d'essai - elle fonctionne pendant 30 minutes, puis l'application doit √™tre red√©marr√©e et l'historique complet des requ√™tes est perdu.  Il existe √©galement des retards de d√©marrage de cinq secondes. </p><br><p>  Apr√®s l'installation et le premier d√©marrage, Charles vous demandera d'autoriser la configuration automatique du proxy syst√®me, de s√©lectionner ¬´Accorder des privil√®ges priv√©s¬ª ou de modifier les param√®tres du proxy syst√®me √† chaque fois manuellement.  Ainsi, Charles modifiera et activera lui-m√™me les param√®tres de proxy du syst√®me lorsqu'il est en cours d'ex√©cution - cela est pratique lors du d√©bogage sur le simulateur, mais sur un appareil r√©el, vous devrez d√©finir manuellement les param√®tres du serveur proxy pour le r√©seau, car le serveur proxy sp√©cifie l'adresse IP de l'ordinateur ex√©cutant Charles, comme port - 8888. </p><br><p>  √Ä ce stade, nous ne pouvons afficher que le trafic HTTP, pour analyser le trafic HTTPS √† partir d'un simulateur ou d'un appareil r√©el, nous devons y installer un certificat Charles, la proc√©dure est similaire √† l'installation d'un certificat Mitmproxy.  Assurez-vous que le proxy est en cours d'ex√©cution et activ√© dans les param√®tres r√©seau iOS (pour un appareil r√©el) ou dans les param√®tres r√©seau macOS (pour un simulateur).  Ensuite, nous irons au simulateur / appareil dans le navigateur √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chls.pro/ssl</a> , une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">alerte</a> appara√Ætra avec un message indiquant que ce site Web tente d'ouvrir les param√®tres iOS: s√©lectionnez Autoriser.  Ensuite, s√©lectionnez Installer pour installer le certificat.  Apr√®s avoir install√© le certificat pour iOS version 10.3 et sup√©rieure, vous devez activer l'acc√®s complet au certificat racine Charles.  Pour ce faire, acc√©dez √† Param√®tres&gt; G√©n√©ral&gt; √Ä propos&gt; Param√®tres d'approbation de certificat et activez l'acc√®s complet pour le certificat Charles. </p><br><p><img src="https://habrastorage.org/webt/ue/vs/kw/uevskwgkqccit0f8xylhu5c9di8.png"></p><br><p>  Enfin, vous devez configurer le proxy SSL dans Charles, par d√©faut, il ne d√©chiffre pas le trafic HTTPS, m√™me si vous avez install√© tous les certificats n√©cessaires.  Pour activer le proxy SSL, acc√©dez √† Proxy&gt; Param√®tres de proxy SSL et activez le proxy SSL, s'il est d√©sactiv√©, nous avons deux options: activer le proxy SSL pour tous les domaines ou uniquement pour certains.  Pour activer le proxy SSL pour tous les domaines, vous devez ajouter un emplacement g√©n√©rique: cliquez sur le bouton Ajouter et sp√©cifiez <code>*</code> dans tous les champs, de sorte que les param√®tres SSL doivent ressembler √† ceci. </p><br><p><img src="https://habrastorage.org/webt/oz/pm/0-/ozpm0-3wqfnzy7pdrntt0_zud7g.png"></p><br><p>  Pour activer le proxy SSl uniquement pour des domaines sp√©cifiques, vous devez les ajouter √† la liste et vous assurer que l'emplacement g√©n√©rique est d√©sactiv√©.  Dans ce cas, Charles interceptera toujours tout le trafic, mais les demandes HTTPS pour les domaines qui ne figurent pas dans la liste ne seront pas d√©chiffr√©es. </p><br><p>  Lorsque vous utilisez Charles, il est pratique d'utiliser des filtres d'interception du trafic, qui peuvent √™tre configur√©s dans le menu Proxy&gt; Param√®tres d'enregistrement: vous pouvez sp√©cifier le protocole, l'URL et le port. </p><br><p><img src="https://habrastorage.org/webt/tn/0g/u1/tn0gu1oxzekxkhhiu1dvjryfsb0.png"></p><br><p>  Nous avons maintenant la possibilit√© de visualiser le trafic HTTPS. </p><br><p><img src="https://habrastorage.org/webt/id/4e/7m/id4e7mvkrp3jhioecejc4fpeb0w.png"></p><br><p>  Charles prend √©galement en charge le protocole Websocket et affiche des messages dans le style d'iMessage, cela semble pratique. </p><br><p><img src="https://habrastorage.org/webt/na/zj/2d/nazj2depjv-5syvqdksal4o-w70.png"></p><br><p>  Le premier du genre proxy Charles pour iOS m√©rite une mention sp√©ciale - la version mobile de Charles, l'√©tiquette de prix dans l'App Store au moment de la r√©daction est de 9 $.  L'application contient les fonctionnalit√©s de base de la version de bureau: proxy du trafic HTTP (S), affichage du contenu des demandes / r√©ponses et param√©trage automatique pratique des param√®tres proxy pour un r√©seau Wi-Fi. </p><br><p><img src="https://habrastorage.org/webt/f5/fj/pf/f5fjpfgfyd7egnkrxaft3q1bfbg.png"></p><br><h2 id="burp-suite-community-edition">  Burp Suite (Community Edition) </h2><br><p><img src="https://habrastorage.org/webt/oc/5v/ee/oc5veeejxf4avf8cqxx76rduzxc.jpeg"></p><br><p>  Burp Suite est un couteau suisse de pentesters et de pirates, contenant une quantit√© ind√©cente d'outils et de fonctionnalit√©s.  L'un des modules de Burp Suite est un proxy, que nous utiliserons pour analyser le trafic HTTP (S).  Il existe deux versions de l'application: Professional et Community Edition.  La version communautaire est gratuite, elle n'a pas de scanner de vuln√©rabilit√©s et le nombre de requ√™tes par unit√© de temps est limit√©, mais malgr√© cela, la version gratuite de l'application est un outil de test √† part enti√®re. </p><br><p>  Apr√®s avoir d√©marr√© l'application, vous devez ajouter et activer le proxy en acc√©dant √† Proxy&gt; Options. </p><br><p><img src="https://habrastorage.org/webt/4b/du/pa/4bdupa1_viddbv4whpishs0tbdy.png"></p><br><p>  Ensuite, vous devez vous assurer que l'intercepteur de demande d'interception est d√©sactiv√©, sinon il interceptera les demandes et les maintiendra jusqu'√† ce que vous lui disiez quoi faire avec cette demande - annulez ou transf√©rez-la au serveur.  Par cons√©quent, d√©sactivez-le, nous n'en avons plus besoin. </p><br><p><img src="https://habrastorage.org/webt/p9/5w/i5/p95wi5sujsos-mmqxniwkliohsq.png"></p><br><p>  Ensuite, vous devez installer le certificat Burp Suite sur le simulateur / appareil, cette proc√©dure devrait d√©j√† nous √™tre douloureusement famili√®re apr√®s l'installation des certificats Mitmproxy et Charles.  Nous lan√ßons Burp Suite, et n'oubliez pas d'activer le proxy dans les param√®tres r√©seau MacOS pour le simulateur ou dans iOS pour le vrai appareil (voir la section Mitmproxy pour savoir comment faire), sp√©cifiez l'adresse IP de l'ordinateur ex√©cutant Burp Suite comme serveur proxy, comme le port - 8080. Ensuite, nous allons dans le navigateur sur le simulateur et entrez l'adresse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http: // burp</a> .  Ensuite, cliquez sur le bouton du site "Certificat CA" et t√©l√©chargez le certificat. </p><br><p><img src="https://habrastorage.org/webt/ks/28/fc/ks28fcpuxf8iig_uaqfzg0ojboe.png"></p><br><p>  Installez ensuite le certificat.  Apr√®s avoir install√© le certificat pour iOS version 10.3 et sup√©rieure, vous devez activer l'acc√®s complet au certificat racine Burp Suite.  Pour ce faire, acc√©dez √† Param√®tres&gt; G√©n√©ral&gt; √Ä propos&gt; Param√®tres d'approbation de certificat et activez l'acc√®s complet pour le certificat Burp Suite. </p><br><p><img src="https://habrastorage.org/webt/v6/on/pc/v6onpcizqsfe13g508btt_dofhm.png"></p><br><p>  En acc√©dant √† l'onglet Proxy -&gt; Historique HTTP, vous pouvez afficher le trafic HTTP (S) √† partir d'une application mobile.  Il convient de noter que l'inconv√©nient ici est le manque de formatage JSON dans le corps de la demande / r√©ponse. </p><br><p><img src="https://habrastorage.org/webt/-s/dw/qa/-sdwqaag2hg3vl18quhyj5t_rks.png"></p><br><p>  Le probl√®me avec le formatage JSON peut √™tre r√©solu en installant le plugin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSON Beautifier</a> .  Pour l'installer, allez dans l'onglet Extender&gt; BApp Store, recherchez le JSON Beautifier dans la liste des plugins et cliquez sur installer. </p><br><p><img src="https://habrastorage.org/webt/yy/qy/j9/yyqyj9k2xw5lw_iicucpmkl5mkq.png"></p><br><p>  Il y a maintenant un onglet JSON Beautifier suppl√©mentaire avec un beau JSON. </p><br><p><img src="https://habrastorage.org/webt/ov/ef/-d/ovef-dcb03s1alol8ftnuxk8gio.png"></p><br><p>  Burp Suite prend en charge le protocole Websocket.  Les messages Websocket se trouvent dans l'onglet sp√©cial Proxy&gt; Historique WebSockets. </p><br><p><img src="https://habrastorage.org/webt/f3/dd/f6/f3ddf6qoeyyrvhl4africgba3dq.png"></p><br><h2 id="owasp-zap">  OWASP ZAP </h2><br><p><img src="https://habrastorage.org/webt/qk/er/of/qkerofsyh6pdb3tvzo7i5kvnz0m.jpeg"></p><br><p>  Owasp ZAP est une id√©e originale de la communaut√© de cybers√©curit√© de renomm√©e mondiale Owasp, en plus, le proxy est open source.  Owasp ZAP est souvent compar√© √† Burp Suite, mais cette derni√®re est de popularit√© inf√©rieure.  Owasp ZAP est enti√®rement gratuit, il n'y a pas de versions PRO par rapport √† Burp Suite. </p><br><p>  Apr√®s avoir d√©marr√© l'application, vous devez v√©rifier les param√®tres de proxy Pr√©f√©rences&gt; Proxy locaux, les param√®tres par d√©faut devraient ressembler √† ceci. </p><br><p><img src="https://habrastorage.org/webt/zf/fw/2m/zffw2mzk8ut9ewbx97lowp4rzky.png"></p><br><p>  Ensuite, allez dans Pr√©f√©rences&gt; Certificats SSL dynamiques pour exporter le certificat SSL.  Cliquez sur le bouton Enregistrer et enregistrez le certificat, par exemple, sur le bureau. </p><br><p><img src="https://habrastorage.org/webt/fu/jx/xj/fujxxj5oamjqkvitcmsykkxy8oy.png"></p><br><p>  Ensuite, faites simplement glisser le fichier de certificat dans le simulateur et une fen√™tre s'ouvre vous proposant d'installer le certificat, nous acceptons et installons.  Apr√®s avoir install√© le certificat pour iOS version 10.3 et sup√©rieure, vous devez activer un acc√®s complet au certificat racine OWASP ZAP.  Pour ce faire, acc√©dez √† Param√®tres&gt; G√©n√©ral&gt; √Ä propos&gt; Param√®tres d'approbation de certificat et activez l'acc√®s complet pour le certificat OWASP ZAP. </p><br><p><img src="https://habrastorage.org/webt/4v/zv/eh/4vzveheku3uhmvagodbkewduifg.png"></p><br><p>  Nous avons maintenant la possibilit√© de visualiser le trafic HTTPS.  JSON, malheureusement, n'a pas un beau formatage ici et jusqu'√† pr√©sent, nous n'avons pas pu r√©soudre cette situation, dans des cas extr√™mes, vous pouvez utiliser un formateur JSON tiers, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">celui-ci</a> . </p><br><p><img src="https://habrastorage.org/webt/4g/ux/jd/4guxjdtpkb3xuo-tibk7u6hr5-8.png"></p><br><p>  OWASP ZAP prend en charge le protocole Websocket.  Les messages Websocket peuvent √™tre trouv√©s dans un onglet sp√©cial WebSockets, il est √©galement pratique de s√©lectionner le "canal" pour le filtrage par domaine. </p><br><p><img src="https://habrastorage.org/webt/tu/uq/9n/tuuq9ntpdwaoykwrktzfjelij08.png"></p><br><h2 id="ssl-pinning">  √âpinglage SSL </h2><br><p>  Si l'√©pinglage SSL est impl√©ment√© dans votre application, vous ne verrez pas le trafic d'application proxy, car le proxy utilise son propre certificat pour SSL, dans ce cas, il existe 4 options: </p><br><ol><li>  D√©sactivez temporairement l'√©pinglage SSL lors du d√©bogage des demandes r√©seau √† l'aide d'un proxy. </li><li>  Ajoutez un certificat / cl√© publique proxy aux certificats / cl√©s d√©bogu√©s pour les versions de d√©bogage. </li><li>  Utilisez votre certificat de serveur pour le proxy au lieu de son propre certificat g√©n√©r√© par celui-ci. </li><li>  Au lieu d'utiliser un proxy externe, utilisez un framework de d√©bogage (la liste des frameworks est indiqu√©e au tout d√©but de l'article), qui interceptera et affichera les requ√™tes et r√©ponses directement dans l'application elle-m√™me, mais cela n√©cessite une int√©gration dans le code source de l'application existante, plus d'informations sur ces outils dans l'article suivant. </li></ol><br><h2 id="itogi">  R√©sum√© </h2><br><p>  Commen√ßons par Charles.  Peut-√™tre le meilleur proxy pour ceux qui veulent que tout fonctionne hors de la bo√Æte et soit aussi convivial que possible, bien que Charles puisse surprendre l'utilisateur √† certains moments, la fonctionnalit√© de proxy est tr√®s √©tendue, elle a √©galement l'interface la plus belle et native pour macOS d√©crite dans l'article proxy.  Si cela ne vous d√©range pas de mettre 50 $ pour un tel instrument, alors c'est votre choix. </p><br><p>  Passons √† Burp Suite.  L'outil le plus puissant, selon une certaine fonctionnalit√© et m√™me une facilit√© d'utilisation, donne dans certains cas facilement des cotes √† Charles, en plus il existe un syst√®me d'extension des fonctionnalit√©s sous forme de plug-ins.  Burp Suite s'est depuis longtemps impos√© comme un outil tr√®s fiable et pr√©cis entre de bonnes mains.  Si vous ne disposez pas des fonctionnalit√©s de votre proxy actuel, je vous conseille de faire attention √† cette instance. </p><br><p>  C'est maintenant le tour de Mitmproxy - un proxy jeune et prometteur, qui gagne activement en popularit√©, d√©velopp√© par la communaut√© Open Source.  Le plus controvers√© des procurations que nous avons vues, mais en m√™me temps pas moins int√©ressant.  Mitmproxy se d√©marque de ses concurrents par son interface utilisateur de console incroyablement pratique, simple et fonctionnelle.  Il est √©galement possible d'utiliser l'interface Web Mitmweb, mais elle est maintenant en test b√™ta, c'est pourquoi elle est rare, mais des bugs apparaissent, il n'y a aucune partie de la fonctionnalit√© avanc√©e Mitmproxy (elle est progressivement compl√©t√©e), et elle est √©galement l√©g√®rement inf√©rieure en termes de commodit√© √† des concurrents plus natifs.  La prise en charge du protocole Websocket √©tait √©galement d√©cevante, pour ainsi dire, mais il n'y a pas d'affichage dans l'interface utilisateur ou nous n'avons tout simplement pas appris √† le pr√©parer, car nous n'avons pas pu obtenir Mitmproxy pour afficher les messages Websocket, bien que nous n'ayons pas eu de tels probl√®mes avec d'autres proxys. </p><br><p>  Et le dernier sur la liste, mais non moins int√©ressant √©tait Owasp ZAP.  Parmi les avantages, il existe un syst√®me de plug-in extensible (subjectivement, leur nombre est inf√©rieur √† celui de Burp Suite), mais malheureusement nous n'avons pas pu configurer un bel affichage JSON dans le corps de la demande / r√©ponse, ce qui est un crit√®re plut√¥t critique lors du choix d'un proxy pour le d√©veloppement mobile.  Cependant, Owasp ZAP a un syst√®me avanc√© pour tester le trafic Websocket, ainsi que le grand nom des d√©veloppeurs de la communaut√© Owasp derri√®re moi, donc je ne l'escompterais pas et pensais aux cas rares et complexes. </p><br><p>  Vous trouverez ci-dessous un tableau r√©capitulatif subjectif des procurations que nous avons analys√©es. </p><br><table><thead><tr><th>  crit√®re / proxy </th><th>  Mitmproxy </th><th>  Charles </th><th>  Burpsuite (CE) </th><th>  Owasp zap </th></tr></thead><tbody><tr><td>  Formatage JSON </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td></tr><tr><td>  Modification et r√©p√©tition de requ√™tes </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  Prise en charge de Websocket </td><td>  - </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  Logiciel gratuit </td><td>  + </td><td>  - </td><td>  + </td><td>  + </td></tr></tbody></table><br><p>  Nous terminerons ici, nous esp√©rons que l'article vous sera utile, nous serons √©galement heureux de commenter et si vous partagez votre exp√©rience dans le domaine des tests et du suivi du trafic des applications mobiles. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr421493/">https://habr.com/ru/post/fr421493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr421481/index.html">Microphones, captures d'√©cran et vid√©o locale: comment le Voximplant Web SDK contr√¥le les m√©dias dans un navigateur</a></li>
<li><a href="../fr421485/index.html">Avis important pour les utilisateurs de Gitlab Pages</a></li>
<li><a href="../fr421487/index.html">Comment renforcer le support technique - 6 fa√ßons secr√®tes</a></li>
<li><a href="../fr421489/index.html">Grogner mais donner</a></li>
<li><a href="../fr421491/index.html">Comment √©crire un jeu pour un ordinateur dans lequel il n'y a pas de p√©riph√©riques d'entr√©e et de sortie</a></li>
<li><a href="../fr421495/index.html">Bienvenue dans l'√®re du nihilisme de la vie priv√©e</a></li>
<li><a href="../fr421497/index.html">Lorsque vous n'avez pas besoin d'utiliser des algorithmes de STL</a></li>
<li><a href="../fr421499/index.html">√âtude de la probabilit√© statistique d'une valeur de bit dans un bitcoin nonco</a></li>
<li><a href="../fr421501/index.html">Hacker a trouv√© un moyen de suivre les visiteurs des sites concurrents</a></li>
<li><a href="../fr421503/index.html">Comment r√©diger des instructions pour √™tre compris</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>