<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèπ ü•ö üíá RESS - Neue Architektur f√ºr mobile Anwendungen üèóÔ∏è üÜñ üé´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im Gegensatz zum provokanten Titel ist dies keine neue Architektur, sondern ein Versuch, einfache und bew√§hrte Praktiken in Newspeak zu √ºbersetzen, da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RESS - Neue Architektur f√ºr mobile Anwendungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424081/"><img src="https://habrastorage.org/webt/l5/ii/jr/l5iijromy0mesbjmvf1wqqn9bvc.png"><br><br><blockquote>  Im Gegensatz zum provokanten Titel ist dies keine neue Architektur, sondern ein Versuch, einfache und bew√§hrte Praktiken in Newspeak zu √ºbersetzen, das von der modernen Android-Community gesprochen wird </blockquote><h2>  Einf√ºhrung </h2><br>  In letzter Zeit ist es schmerzhaft geworden zu sehen, was in der Welt der Entwicklung f√ºr mobile Plattformen passiert.  Die architektonische Astronautik boomt, jeder Hipster sieht es als seine Pflicht an, eine neue Architektur zu entwickeln und anstelle von zwei Zeilen eine einfache Aufgabe zu l√∂sen und mehrere modische Frameworks einzuf√ºgen. <br><br>  Diese Websites enthalten Tutorials zu trendigen Frameworks und anspruchsvollen Architekturen, aber es gibt nicht einmal eine bew√§hrte Methode f√ºr Android REST-Clients.  Dies ist zwar einer der h√§ufigsten Anwendungsf√§lle.  Ich m√∂chte, dass die normale Herangehensweise an die Entwicklung auch an die Massen geht.  Deshalb schreibe ich diesen Artikel <br><a name="habracut"></a><br><h2>  Warum sind bestehende L√∂sungen schlecht? </h2><br>  Im Gro√üen und Ganzen ist das Problem von neuem MVP, VIPER und dergleichen genau dasselbe, ihre Autoren wissen nicht, wie sie entwerfen sollen.  Und ihre Anh√§nger - umso mehr.  Und deshalb verstehen sie wichtige und offensichtliche Dinge nicht.  Und sie besch√§ftigen sich mit konventioneller <b>√úberentwicklung</b> . <br><br><h4>  1. Die Architektur sollte einfach sein </h4><br>  Je einfacher desto besser.  Dies macht es verst√§ndlicher, zuverl√§ssiger und flexibler.  Jeder Dummkopf kann sich neu komplizieren und eine Reihe von Abstraktionen machen, aber um es einfach zu machen, m√ºssen Sie sorgf√§ltig √ºberlegen. <br><br><h4>  2. √úberentwicklung ist schlecht </h4><br>  Sie m√ºssen nur dann eine neue Abstraktionsebene hinzuf√ºgen, wenn die alte keine Probleme l√∂st.  Nach dem Hinzuf√ºgen einer neuen Ebene sollte das System verst√§ndlicher und <i>weniger</i> Code sein.  Wenn Sie danach beispielsweise drei Dateien anstelle einer Datei hatten und das System komplizierter wurde, haben Sie einen Fehler gemacht und auf einfache Weise <i>M√ºll geschrieben</i> . <br><br>  Fans von MVP schreiben beispielsweise in ihren Artikeln selbst im Klartext, dass MVP dumm zu einer erheblichen <i>Komplikation des</i> Systems f√ºhrt.  Und sie rechtfertigen es damit, dass es so <i>flexibel</i> und <i>leichter zu warten ist</i> .  Wie wir jedoch aus Absatz 1 wissen, schlie√üen sich diese Dinge gegenseitig aus. <br><br>  Schauen Sie sich zum Beispiel VIPER zum Beispiel das Diagramm in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem</a> Artikel an. <br><br><div class="spoiler">  <b class="spoiler_title">Schema</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hq/zy/cf/hqzycfexvow0y3tvihtwgqllz-u.jpeg" alt="Bild"><br></div></div><br>  Und das ist f√ºr jeden Bildschirm!  Es tut meinen Augen weh.  Ich sympathisiere besonders mit denen, die bei der Arbeit gegen ihren Willen damit umgehen m√ºssen.  Denjenigen, die es selbst vorgestellt haben, sympathisiere ich mit <i>etwas anderen</i> Gr√ºnden. <br><br><h2>  Neuer Ansatz </h2><br>  <i>Hey, ich m√∂chte auch einen modischen Namen</i> .  Daher wird die vorgeschlagene Architektur als <b>RESS</b> - <b>R</b> equest, <b>E</b> vent, <b>S</b> creen, <b>S</b> torage bezeichnet.  Die Buchstaben und Namen sind so dumm detailliert, um ein lesbares Wort zu erhalten.  Nun, um keine Verwechslung mit den bereits verwendeten Namen zu schaffen.  Nun, mit REST im Einklang. <br><br>  Machen Sie sofort eine Reservierung, diese Architektur ist f√ºr REST-Clients.  F√ºr andere Arten von Anwendungen wird es wahrscheinlich nicht funktionieren. <br><br><img src="https://habrastorage.org/webt/ub/vd/jz/ubvdjz6pzobholewp2ecloxgski.png"><br><br><h3>  1. Lagerung </h3><br>  Data Warehouse (mit anderen Worten Modell, Repository).  Diese Klasse speichert Daten und verarbeitet sie (speichert, l√§dt, f√ºgt sie der Datenbank hinzu usw.), sowie alle Daten vom REST-Service werden zuerst hier abgerufen, analysiert und hier gespeichert. <br><br><h3>  2. Bildschirm </h3><br>  Der Anwendungsbildschirm, im Fall von Android, ist dies Ihre Aktivit√§t.  Mit anderen Worten, es ist ein normaler ViewController wie Apples MVC. <br><br><h3>  3. Anfrage </h3><br>  Die Klasse, die f√ºr das Senden von Anforderungen an den REST-Service sowie f√ºr das Empfangen von Antworten und das Benachrichtigen √ºber die Antwort anderer Systemkomponenten verantwortlich ist. <br><br><h3>  4. Ereignis </h3><br>  Die Verbindung zwischen den anderen Komponenten.  Beispielsweise sendet Request ein Ereignis √ºber die Antwort des Servers an diejenigen, die ihn abonnieren.  Und Storage sendet ein Ereignis √ºber Daten√§nderungen. <br><br>  Das Folgende ist ein Beispiel f√ºr eine vereinfachte Implementierung.  Der Code wurde mit Annahmen geschrieben und nicht √ºberpr√ºft, sodass m√∂glicherweise Syntaxfehler und Tippfehler auftreten <br><br><div class="spoiler">  <b class="spoiler_title">Anfrage</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Request</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RequestListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApiMethod1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Json answer)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApiMethod2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Json answer)</span></span></span><span class="hljs-function"> </span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RequestTask</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncTask</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RequestTask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String methodName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.methodName = methodName; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String methodName; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Void ... params)</span></span></span><span class="hljs-function"> </span></span>{ URL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(Request.serverUrl + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + methodName); HttpURLConnection httpConnection = (HttpURLConnection)url.openConnection(); <span class="hljs-comment"><span class="hljs-comment">// ... //      // ... return result; } @Override protected void onPostExecute(String result) { // ... //  JSON  result // ... Requestr.onHandleAnswer(methodName, json); } } private static String serverUrl = "myserver.com"; private static List&lt;OnCompleteListener&gt; listeners = new ArrayList&lt;&gt;(); private static void onHandleAnswer(String methodName, Json json) { for(RequestListener listener : listeners) { if(methodName.equals("api/method1")) listener.onApiMethod1(json); else if(methodName.equals("api/method2")) listener.onApiMethod2(json); } } private static void makeRequest(String methodName) { new RequestTask(methodName).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); } public static void registerListener(RequestListener listener) { listeners.add(listener); } public static void unregisterListener(RequestListener listener) { listeners.remove(listener); } public static void apiMethod1() { makeRequest("api/method1"); } public static void onApiMethod2() { makeRequest("api/method2"); } }</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Lagerung</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataStorage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onData1Changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onData2Changed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> MyObject1 myObject1 = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;MyObject2&gt; myObjects2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataListener listener)</span></span></span><span class="hljs-function"> </span></span>{ listeners.add(listener); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unregisterListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DataListener listener)</span></span></span><span class="hljs-function"> </span></span>{ listeners.remove(listener); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMyObject1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myObject1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;MyObject2&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMyObjects2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> myObjects2; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Request.RequestListener listener = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request.RequestListener() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T fromJson&lt;T&gt;(Json answer) { <span class="hljs-comment"><span class="hljs-comment">// ... //    JSON // ... return objectT; } @Override public void onApiMethod1(Json answer) { myObject1 = fromJson(answer); for(RequestListener listener : listeners) listener.data1Changed(); } @Override public void onApiMethod2(Json answer) { myObject2 = fromJson(myObjects2); for(RequestListener listener : listeners) listener.data2Changed(); } }; }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Bildschirm</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataStorage</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button button1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Button button2; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); button1.setOnClickListener((View) -&gt; { Request.apiMethod1(); }); button2.setOnClickListener((View) -&gt; { Request.apiMethod2(); }); updateViews(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPause</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onPause(); DataStorage.unregisterListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onResume(); DataStorage.registerListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); updateViews(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ updateView1(); updateView2(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateView1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Object1 data = DataStorage.getObject1(); <span class="hljs-comment"><span class="hljs-comment">// ... //     // ... } private void updateView2() { List&lt;Object2&gt; data = DataStorage.getObjects2(); // ... //     // ... } @Override public void onData1Changed() { updateView1(); } @Override public void onData2Changed() { updateView2(); } }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Die App</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(); Request.registerListener(DataStorage.listener); } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Dieselbe Shemka, aber in Bezug auf RESS, zum Verst√§ndnis</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/4o/g-/rz/4og-rzew3vn1ggqdykmdxgzsnx0.png"><br></div></div><br>  Das funktioniert folgenderma√üen: Wenn Sie auf die Schaltfl√§che klicken, zuckt die gew√ºnschte Methode f√ºr die Anforderung. Die Anforderung sendet eine Anforderung an den Server, verarbeitet die Antwort und benachrichtigt zuerst DataStorage.  DataStorage analysiert die Antwort und speichert die Daten zu Hause zwischen.  Die Anforderung benachrichtigt dann den aktuell aktiven Bildschirm. Der Bildschirm nimmt Daten aus dem DataStorage und aktualisiert die Benutzeroberfl√§che. <br><br>  Bildschirmzeichen und Abmeldungen von Mittelm√§√üigkeit in onResume bzw. onPause.  Zus√§tzlich zu onResume wird auch die Benutzeroberfl√§che aktualisiert.  Was gibt es?  Benachrichtigungen kommen nur in der aktuell aktiven Aktivit√§t, keine Probleme bei der Verarbeitung der Anforderung im Hintergrund oder beim Drehen der Aktivit√§t.  Die Aktivit√§ten werden immer auf dem neuesten Stand sein.  Die Benachrichtigung erreicht die Hintergrundaktivit√§t nicht und wenn Sie in den aktiven Zustand zur√ºckkehren, werden die Daten aus dem DataStorage √ºbernommen.  Daher gibt es keine Probleme, wenn Sie den Bildschirm drehen und die Aktivit√§t neu erstellen. <br><br>  Und daf√ºr reicht die Standard-API aus dem Android SDK. <br><br><h2>  Fragen und Antworten f√ºr zuk√ºnftige Kritik </h2><br><h4>  1. Was ist der Gewinn? </h4><br>  Echte Einfachheit, Flexibilit√§t, Wartbarkeit, Skalierbarkeit und ein Minimum an Abh√§ngigkeiten.  Sie k√∂nnen jederzeit einen bestimmten Teil des Systems komplizieren, wenn Sie dies ben√∂tigen.  Zu viele Daten?  Teilen Sie den DataStorage vorsichtig in mehrere Teile auf.  Riesenservice-REST-API?  Machen Sie ein paar Anfragen.  Ist Listering zu einfach, umst√§ndlich und unmodern?  Nimm den EventBus.  Siehst du einen Friseursalon auf der HttpConnection schief an?  Nehmen Sie Retrofit.  Mutige Aktivit√§t mit ein paar Fragmenten?  Stellen Sie sich einfach vor, dass jedes Fragment Screen ist, oder teilen Sie es in Unterklassen auf. <br><br><h4>  2. AsyncTask ist ein schlechter Mann, nimm mindestens Retrofit! </h4><br>  Huh?  Und welche Probleme verursacht es in diesem Code?  Speicherlecks?  Nein, hier speichert AsyncTask keine Links zu Aktivierungen, sondern nur einen Link zu einer statischen Methode.  Die Antwort ist verloren?  Nein, die Antwort kommt immer zum statischen DataStorage, bis die Anwendung beendet wird.  Versuchen Sie, die Aktivit√§t in der Pause zu aktualisieren?  Nein, Benachrichtigungen werden nur in der aktiven Aktivit√§t angezeigt. <br><br>  Und wie kann Retrofit hier helfen?  Schau einfach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  Der Autor nahm RxJava, Retrofit und formt immer noch Kr√ºcken, um ein Problem zu l√∂sen, das RESS einfach nicht hat. <br><br><h4>  3. Bildschirm ist der gleiche ViewController!  Logik und Pr√§sentation m√ºssen getrennt werden, arrr! </h4><br>  Lass dieses Mantra schon fallen.  Ein typischer Client f√ºr einen REST-Service ist eine gro√üe Ansicht f√ºr die Serverseite.  Ihre gesamte Gesch√§ftslogik besteht darin, den richtigen Status f√ºr eine Schaltfl√§che oder ein Textfeld festzulegen.  Was wirst du dort teilen?  Sagen wir, es wird einfacher zu warten sein?  3 Dateien mit 3 Tonnen Code pflegen, statt 1 Datei mit 1 Tonne einfacher?  Ok  Und wenn wir Aktivit√§t mit 5 Fragmenten haben?  Dies sind bereits 3 x (5 + 1) = 18 Dateien. <br><br>  Die Trennung in Controller und View erzeugt in solchen F√§llen einfach eine Menge bedeutungslosen Codes. Es ist Zeit, dies zuzugeben.  Das Hinzuf√ºgen von Funktionen zu einem Projekt mit MVP macht besonders viel Spa√ü: M√∂chten Sie einen Button-Handler hinzuf√ºgen?  Ok, korrigieren Sie Presenter, Activity und View-Interface.  In RESS werde ich dazu ein paar Codezeilen in eine einzige Datei schreiben. <br><br>  Aber in gro√üen Projekten w√§chst ViewController furchtbar?  Sie haben also keine gro√üen Projekte gesehen.  Ihr REST-Client f√ºr die n√§chste Site mit 5.000 Zeilen ist ein kleines Projekt, und 5.000 Zeilen dort nur, weil auf jedem Bildschirm 5 Klassen vorhanden sind.  Wirklich gro√üe Projekte auf RESS mit √ºber 100 Bildschirmen und mehreren Teams von 10 Personen f√ºhlen sich gro√üartig an.  Machen Sie einfach ein paar Anfragen und Speicher.  Und Bildschirm f√ºr fett gedruckte Bildschirme enthalten zus√§tzlichen Bildschirm f√ºr gro√üe Benutzeroberfl√§chenelemente, z. B. dieselben Fragmente.  Ein Projekt auf einem MVP der gleichen Gr√∂√üenordnung wird einfach in einer Reihe von Pr√§sentatoren, Schnittstellen, Aktivierungen, Fragmenten und nicht offensichtlichen Verbindungen ertrinken.  Und der √úbergang zu VIPER wird in der Regel dazu f√ºhren, dass das gesamte Team eines Tages ausscheidet. <br><br><h2>  Fazit </h2><br>  Ich hoffe, dieser Artikel wird viele Entwickler ermutigen, ihre Ansichten zur Architektur zu √ºberdenken, keine Abstraktionen zu erstellen und einfachere und bew√§hrte L√∂sungen zu betrachten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424081/">https://habr.com/ru/post/de424081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424065/index.html">Firefox installiert Erweiterungen auf Ihren Ger√§ten, um Daten ohne Ihr Wissen zu erfassen ... erneut</a></li>
<li><a href="../de424069/index.html">iFixit: iPhone XS und XS Max - fast exakte Kopien des iPhone X mit Wartbarkeit 6 von 10</a></li>
<li><a href="../de424071/index.html">Theorie des Gl√ºcks. Thermodynamik der Klassenungleichheit</a></li>
<li><a href="../de424073/index.html">Remotecodeausf√ºhrung in Microsoft JET Database Engine</a></li>
<li><a href="../de424077/index.html">Frankreich fordert, das ‚ÄûRecht auf Vergessen‚Äú global zu machen - was es beeinflussen kann</a></li>
<li><a href="../de424083/index.html">Einem Handelsdienst an der Robinhood-B√∂rse wurde vorgeworfen, Daten zu Benutzeranwendungen an Hochfrequenzh√§ndler verkauft zu haben</a></li>
<li><a href="../de424085/index.html">Wir entwickeln das NIOS II-Prozessormodul f√ºr IDA Pro</a></li>
<li><a href="../de424087/index.html">Arduino-gesteuertes Bluetooth-gesteuertes Android-Ger√§t - vollst√§ndiger Zyklus (Teil 1)</a></li>
<li><a href="../de424089/index.html">Konferenzen sind b√∂se. Oder gut?</a></li>
<li><a href="../de424091/index.html">WiX.Py: Wir sammeln das MSI-Paket "in drei Zeilen"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>