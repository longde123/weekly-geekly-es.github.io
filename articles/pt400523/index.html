<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçû üò≠ üñï Por que os f√≠sicos ainda usam o Fortran üì¢ ü¶ì üéΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="N√£o sei como ser√° a linguagem de programa√ß√£o em 2000, mas sei que ela ser√° chamada FORTRAN. 
 - Charles Anthony Richard Hoar, aprox. 1982
 Na ind√∫stri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Por que os f√≠sicos ainda usam o Fortran</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400523/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o sei como ser√° a linguagem de programa√ß√£o em 2000, mas sei que ela ser√° chamada FORTRAN. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Charles Anthony Richard Hoar, aprox. </font><font style="vertical-align: inherit;">1982</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na ind√∫stria, o Fortran raramente √© usado hoje em dia - em uma das listas de idiomas populares, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estava em 28¬∫ lugar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mas o Fortran ainda √© o idioma principal para simula√ß√µes em larga escala de sistemas f√≠sicos - ou seja, para modelagem astrof√≠sica de estrelas e gal√°xias (por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), din√¢mica molecular em larga escala, c√≥digos eletr√¥nicos de contagem de estruturas ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIESTA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), modelos clim√°ticos etc. No campo da computa√ß√£o de alto desempenho, um subconjunto dos quais s√£o simula√ß√µes num√©ricas em larga escala, hoje apenas duas linguagens s√£o usadas - C / C ++ e ‚ÄúFortran moderno‚Äù (Fortran 90/95/03/08). Bibliotecas </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">MPI abertas</font></a><font style="vertical-align: inherit;"> populares</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ferramentas de paraleliza√ß√£o de c√≥digo foram desenvolvidas para esses dois idiomas. Em geral, se voc√™ precisar de c√≥digo r√°pido que seja executado em v√°rios processadores, voc√™ ter√° apenas duas op√ß√µes. No Fortran moderno, existe um recurso como " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coarray</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", que permite trabalhar diretamente com a linguagem na programa√ß√£o paralela. Coarray apareceu na extens√£o Fortran 95 e mais tarde foi incorporado ao Fortran 2008. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O uso ativo do Fortran por f√≠sicos muitas vezes confunde cientistas da computa√ß√£o e outras pessoas n√£o relacionadas a essa √°rea que acham que Fortran √© um anacronismo hist√≥rico.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gostaria de explicar por que o Fortran ainda √© √∫til. N√£o incentivo os estudantes de f√≠sica a ensinar Fortran - como a maioria deles pesquisa, √© melhor estudar C / C ++ (ou parar no Matlab / Octave / Python). Gostaria de explicar por que o Fortran ainda √© usado e provar que isso n√£o √© apenas porque os f√≠sicos est√£o ‚Äúatrasados‚Äù (embora √†s vezes seja assim - no ano passado, vi um estudante de f√≠sica trabalhando com c√≥digo Fortran 77, enquanto nem ele nem seu gerente ouviram falar sobre Fortran 90). Os cientistas da computa√ß√£o devem ver o dom√≠nio de Fortran na computa√ß√£o num√©rica como um desafio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de me aprofundar no assunto, quero discutir a hist√≥ria, porque quando as pessoas ouvem a palavra "Fortran", imediatamente imaginam cart√µes perfurados e c√≥digos com linhas numeradas. A primeira especifica√ß√£o Fortran foi escrita em 1954. O Fortran inicial (ent√£o seu nome foi escrito em letras mai√∫sculas, FORTRAN) era, para os padr√µes modernos, uma linguagem infernal, mas foi um incr√≠vel passo √† frente em rela√ß√£o √† programa√ß√£o anterior de montadores. O FORTRAN costumava ser programado com cart√µes perfurados, como lembra a professora Miriam Forman, da Stony Brook University, sem prazer. O Fortran tinha muitas vers√µes, das quais as mais famosas s√£o as normas 66, 77, 90, 95, 03 e 08. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Costuma-se dizer que o Fortran ainda √© usado devido √† sua velocidade. Mas ele √© o mais r√°pido? Em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benchmarksgame.alioth.debian.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h√° uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compara√ß√£o de C e Fortran</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em v√°rios testes entre v√°rios idiomas. </font><font style="vertical-align: inherit;">Na maioria dos casos, o Fortran e o C / C ++ s√£o os mais r√°pidos. </font><font style="vertical-align: inherit;">Programadores Python favoritos geralmente ficam para tr√°s em velocidade 100 vezes, mas isso est√° na ordem das coisas para o c√≥digo interpretado. </font><font style="vertical-align: inherit;">Python n√£o √© adequado para c√°lculos num√©ricos complexos, mas √© adequado para outro. </font><font style="vertical-align: inherit;">Curiosamente, o C / C ++ supera o Fortran em todos os testes, exceto em dois, embora em geral eles diferem pouco nos resultados. </font><font style="vertical-align: inherit;">Os testes nos quais o Fortran vence, os mais "f√≠sicos" s√£o a simula√ß√£o de um sistema de n corpos e o c√°lculo do espectro. </font><font style="vertical-align: inherit;">Os resultados dependem do n√∫mero de n√∫cleos do processador, por exemplo, o Fortran fica atr√°s do C / C ++ no quad core. </font><font style="vertical-align: inherit;">Os testes, nos quais o Fortran fica muito atr√°s do C / C ++, l√™ e grava dados na maioria das vezes, e nesse aspecto a lentid√£o do Fortran √© conhecida.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o C / C ++ √© t√£o r√°pido quanto o Fortran e, √†s vezes, um pouco mais r√°pido. </font><font style="vertical-align: inherit;">Estamos interessados ‚Äã‚Äãem "por que os professores de f√≠sica continuam aconselhando seus alunos a usar Fortran em vez de C / C ++?"</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortran tem c√≥digo legado</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas √† longa hist√≥ria de Fortran, n√£o √© surpreendente que montanhas de c√≥digo de f√≠sica estejam escritas nele. </font><font style="vertical-align: inherit;">Os f√≠sicos est√£o tentando minimizar o tempo de programa√ß√£o; portanto, se encontrarem c√≥digos anteriores, eles os usar√£o. </font><font style="vertical-align: inherit;">Mesmo que o c√≥digo antigo seja ileg√≠vel, mal documentado e n√£o seja o mais eficiente, √© mais prov√°vel que voc√™ use o c√≥digo antigo e comprovado do que escrever um novo. </font><font style="vertical-align: inherit;">A tarefa dos f√≠sicos n√£o √© escrever c√≥digo, eles est√£o tentando entender a natureza da realidade. </font><font style="vertical-align: inherit;">Os professores sempre t√™m o c√≥digo herdado em m√£os (muitas vezes escreveram esse c√≥digo d√©cadas atr√°s) e o repassam para seus alunos. </font><font style="vertical-align: inherit;">Isso economiza tempo e remove incertezas do processo de corre√ß√£o de erros.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estudantes de f√≠sica aprendem Fortran mais f√°cil que C / C ++</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu acho que o Fortran √© mais f√°cil de aprender do que o C / C ++. Fortran 90 e C s√£o muito semelhantes, mas Fortran √© mais f√°cil de escrever. C √© uma linguagem relativamente primitiva; portanto, os f√≠sicos que escolhem C / C ++ est√£o envolvidos na programa√ß√£o orientada a objetos. OOP pode ser √∫til, especialmente em grandes projetos de software, mas estude-o por muito mais tempo. Voc√™ precisa estudar abstra√ß√µes como classes e heran√ßa. O paradigma de POO √© muito diferente do procedimento utilizado pelo Fortran. O Fortran √© baseado em um paradigma processual simples, mais pr√≥ximo do que acontece sob o cap√¥ de um computador. Quando voc√™ otimiza / vetoriza o c√≥digo para aumentar a velocidade, √© mais f√°cil trabalhar com o paradigma processual. Os f√≠sicos geralmente entendem como os computadores funcionam e pensam em termos de processos f√≠sicos, por exemplo, transferir dados do disco para a RAM e da RAM para o cache do processador.Eles diferem dos matem√°ticos que preferem pensar em termos de fun√ß√µes abstratas e l√≥gica. Al√©m disso, esse pensamento √© diferente do orientado a objetos. A otimiza√ß√£o do c√≥digo OOP √© mais complicada do meu ponto de vista do que processual. Objetos s√£o estruturas muito volumosas em compara√ß√£o com as estruturas de dados preferidas pelos f√≠sicos: matrizes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leveza Um: Trabalho em Matriz Fortran</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Matrizes, ou, como os f√≠sicos os chamam, matrizes, est√£o no centro de toda a computa√ß√£o f√≠sica. </font><font style="vertical-align: inherit;">No Fortran 90+, voc√™ pode encontrar muitas oportunidades de trabalhar com eles, semelhantes ao </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e ao Matlab / Octave. </font><font style="vertical-align: inherit;">As matrizes podem ser copiadas, multiplicadas por um escalar, multiplicadas entre si de uma maneira muito intuitiva:</font></font><br>
 <br>
<pre><code class="hljs lisp">A = B<font></font>
A = <span class="hljs-number"><span class="hljs-number">3.24</span></span>*B<font></font>
C = A*B<font></font>
B = exp(<span class="hljs-name"><span class="hljs-name">A</span></span>)<font></font>
norm = sqrt(<span class="hljs-name"><span class="hljs-name">sum</span></span>(<span class="hljs-name"><span class="hljs-name">A**2</span></span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, A, B, C s√£o matrizes de alguma dimens√£o (digamos, 10x10x10). C = A * B nos fornece a multiplica√ß√£o elementar de matrizes se A e B s√£o do mesmo tamanho. Para multiplica√ß√£o de matrizes, C = matmul (A, B) √© usado. Quase todas as fun√ß√µes internas do Fortran (Sin (), Exp (), Abs (), Piso () etc.) recebem matrizes como argumentos, o que leva a um c√≥digo simples e limpo. Simplesmente n√£o h√° c√≥digo semelhante no C / C ++. Em uma implementa√ß√£o b√°sica de C / C ++, basta copiar uma matriz para executar loops em todos os elementos ou chamar uma fun√ß√£o de biblioteca. Se voc√™ alimentar uma matriz da fun√ß√£o de biblioteca incorreta em C, ocorrer√° um erro. A necessidade de usar bibliotecas em vez de fun√ß√µes internas significa que o c√≥digo resultante n√£o ser√° limpo, port√°til ou f√°cil de aprender.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Fortran, o acesso aos elementos de uma matriz funciona atrav√©s da sintaxe simples A [x, y, z], quando em C / C ++ voc√™ precisa escrever A [x] [y] [z]. </font><font style="vertical-align: inherit;">Os elementos das matrizes come√ßam com 1, o que corresponde ao entendimento das matrizes pelos f√≠sicos e, nas matrizes C / C ++, a numera√ß√£o come√ßa do zero. </font><font style="vertical-align: inherit;">Aqui est√£o mais alguns recursos para trabalhar com matrizes no Fortran.</font></font><br>
 <br>
<pre><code class="hljs lisp">A = (<span class="hljs-name"><span class="hljs-name">/</span></span> i , i = <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span> /)<font></font>
B = A(<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">100</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>)<font></font>
C(<span class="hljs-number"><span class="hljs-number">10</span></span>:) = B</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, o vetor A √© criado atrav√©s de um loop do impl√≠cito, tamb√©m conhecido como construtor de matriz. </font><font style="vertical-align: inherit;">Em seguida, um vetor B √© criado, consistindo em cada d√©cimo elemento de A, usando uma etapa de 10. E, finalmente, a matriz B √© copiada para a matriz C, iniciando no d√©cimo elemento. </font><font style="vertical-align: inherit;">O Fortran suporta a declara√ß√£o de matrizes com zero ou √≠ndices negativos:</font></font><br>
 <br>
<pre><code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">double</span></span> <span class="hljs-type"><span class="hljs-type">precision</span></span>, dimension(<span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>) :: myArray</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um √≠ndice negativo a princ√≠pio parece tolo, mas ouvi falar da utilidade deles - por exemplo, imagine que essa √© uma √°rea adicional para postar esclarecimentos. </font><font style="vertical-align: inherit;">O Fortran tamb√©m suporta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√≠ndices vetoriais</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por exemplo, voc√™ pode transferir os elementos 1,5 e 7 de uma matriz A da dimens√£o N x 1 para uma matriz B da dimens√£o 3 x 1:</font></font><br>
 <br>
<pre><code class="hljs lisp">subscripts = (<span class="hljs-name"><span class="hljs-name">/</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span> /)<font></font>
B = A(<span class="hljs-name"><span class="hljs-name">subscripts</span></span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Fortran suporta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√°scaras de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> matriz em todas as fun√ß√µes internas. </font><font style="vertical-align: inherit;">Por exemplo, se precisarmos calcular o logaritmo de todos os elementos da matriz maiores que zero, usamos:</font></font><br>
 <br>
<pre><code class="hljs lisp">log_of_A = log(<span class="hljs-name"><span class="hljs-name">A</span></span>, mask= A .gt. <span class="hljs-number"><span class="hljs-number">0</span></span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou podemos anular todos os elementos negativos da matriz em uma linha:</font></font><br>
 <br>
<pre><code class="hljs lisp">where(<span class="hljs-name"><span class="hljs-name">my_array</span></span> .lt. <span class="hljs-number"><span class="hljs-number">0.0</span></span>) my_array = <span class="hljs-number"><span class="hljs-number">0.0</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Fortran facilita a aloca√ß√£o din√¢mica e a libera√ß√£o de matrizes. </font><font style="vertical-align: inherit;">Por exemplo, para colocar uma matriz bidimensional:</font></font><br>
 <br>
<pre><code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">real</span></span>, dimension(:,:), allocatable :: name_of_array<font></font>
allocate(name_of_array(xdim, ydim))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No C / C ++, isso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requer a seguinte entrada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> **<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>;
<span class="hljs-built_in"><span class="hljs-built_in">array</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(nrows * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">double</span></span> *));<font></font>
 <font></font>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &amp;lt; nrows; i++){
     <span class="hljs-built_in"><span class="hljs-built_in">array</span></span>[i] = <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(ncolumns * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para liberar uma matriz no Fortran</font></font><br>
 <br>
<pre><code class="hljs lisp">deallocate(<span class="hljs-name"><span class="hljs-name">name_of_array</span></span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em C / C ++ para isso</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &amp;lt; nrows; i++){
    <span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>[i]);<font></font>
}<font></font>
<span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>);</code></pre><br>
<h2> :        </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em linguagens como C / C ++, todas as vari√°veis ‚Äã‚Äãs√£o passadas por valor, com exce√ß√£o das matrizes que s√£o passadas por refer√™ncia. Mas, em muitos casos, passar uma matriz por valor faz mais sentido. Por exemplo, deixe os dados consistirem em posi√ß√µes de 100 mol√©culas em diferentes per√≠odos de tempo. Precisamos analisar o movimento de uma mol√©cula. Pegamos uma fatia da matriz (sub-matriz) correspondente √†s coordenadas dos √°tomos nessa mol√©cula e a passamos para a fun√ß√£o. Nele, trataremos de uma an√°lise complexa do subarray transmitido. Se pass√°ssemos por refer√™ncia, os dados transferidos n√£o seriam localizados na mem√≥ria em uma linha. Devido √† natureza do acesso √† mem√≥ria, o trabalho com essa matriz seria lento. Se passarmos por valor, criaremos na mem√≥ria uma nova matriz organizada em uma linha. Para o deleite dos f√≠sicos, o compilador assume todo o trabalho sujo de otimizar a mem√≥ria.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Fortran, as vari√°veis ‚Äã‚Äãgeralmente s√£o passadas por refer√™ncia, n√£o por valor. </font><font style="vertical-align: inherit;">Sob o cap√¥, o compilador Fortran otimiza automaticamente sua transmiss√£o para aumentar a efici√™ncia. </font><font style="vertical-align: inherit;">Do ponto de vista do professor no campo da otimiza√ß√£o do uso da mem√≥ria, o compilador deve ter mais confian√ßa do que o aluno! </font><font style="vertical-align: inherit;">Como resultado, os f√≠sicos raramente usam ponteiros, embora Fortran-90 + </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eles t√™m</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais alguns exemplos das diferen√ßas entre Fortran e C</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Fortran possui v√°rias op√ß√µes para gerenciar o compilador ao solucionar problemas e otimizar. </font><font style="vertical-align: inherit;">Erros no c√≥digo podem ser detectados no est√°gio de compila√ß√£o e n√£o durante a execu√ß√£o. </font><font style="vertical-align: inherit;">Por exemplo, qualquer vari√°vel pode ser declarada como um par√¢metro, ou seja, uma constante.</font></font><br>
<br>
<pre><code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">double</span></span> <span class="hljs-type"><span class="hljs-type">precision</span></span>, parameter :: hbar = <span class="hljs-number"><span class="hljs-number">6.63e-34</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o par√¢metro no c√≥digo for alterado, o compilador retornar√° um erro. </font><font style="vertical-align: inherit;">Em C, isso √© chamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></a><br>
<br>
<pre><code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hbar = <span class="hljs-number"><span class="hljs-number">6.63e-34</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema √© que const real √© diferente do real simples. Se uma fun√ß√£o que aceita real se torna real, ela retornar√° um erro. √â f√°cil imaginar como isso pode levar a problemas de interoperabilidade no c√≥digo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Fortran tamb√©m possui uma especifica√ß√£o de inten√ß√£o que informa ao compilador se o argumento passado para a fun√ß√£o √© uma entrada, sa√≠da ou ambos, um par√¢metro de entrada e uma sa√≠da. Isso ajuda o compilador a otimizar o c√≥digo e aumenta sua legibilidade e confiabilidade.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Fortran possui outros recursos que s√£o usados ‚Äã‚Äãem diferentes frequ√™ncias. </font><font style="vertical-align: inherit;">Por exemplo, o Fortran 95 tem a capacidade de declarar fun√ß√µes com o modificador puro. </font><font style="vertical-align: inherit;">Essa fun√ß√£o n√£o tem efeitos colaterais - apenas altera seus argumentos e n√£o altera vari√°veis ‚Äã‚Äãglobais. </font><font style="vertical-align: inherit;">Um caso especial dessa fun√ß√£o √© a fun√ß√£o elementar, que aceita e retorna escalares. </font><font style="vertical-align: inherit;">√â usado para processar elementos da matriz. </font><font style="vertical-align: inherit;">As informa√ß√µes de que a fun√ß√£o √© pura ou elementar permitem que o compilador execute otimiza√ß√£o adicional, especialmente ao paralelizar c√≥digo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que esperar no futuro?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos c√°lculos cient√≠ficos, o Fortran continua sendo o idioma principal e n√£o desaparecer√° no futuro pr√≥ximo. </font><font style="vertical-align: inherit;">Na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pesquisa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entre os visitantes da confer√™ncia da Conven√ß√£o de Supercomputa√ß√£o de 2014 que usam esse idioma, 100% deles disseram que o usariam nos pr√≥ximos 5 anos. Tamb√©m resulta da pesquisa que 90% usaram uma mistura de Fortran e C. Antecipando um aumento na mistura dessas linguagens, os criadores da especifica√ß√£o Fortran 2015 incluem mais recursos para interoperabilidade de c√≥digo. O c√≥digo Fortran est√° sendo chamado cada vez mais a partir do c√≥digo Python. Os cientistas da computa√ß√£o que criticam o uso do Fortran n√£o entendem que esse idioma permanece adaptado exclusivamente para o que recebeu o nome - FOrmula TRANslation, tradu√ß√£o de f√≥rmulas, ou seja, a convers√£o de f√≥rmulas f√≠sicas em c√≥digo. Muitos deles n√£o sabem que o idioma est√° evoluindo e inclui constantemente novos recursos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chamar o Fortran moderno com mais de 90 anos √© como chamar o C ++ antigo porque o C foi desenvolvido em 1973. Por outro lado, at√© o mais novo padr√£o do Fortran 2008 tem compatibilidade com o Fortran 77 e a maior parte do Fortran 66. Portanto, o desenvolvimento da linguagem est√° associado a certas dificuldades. </font><font style="vertical-align: inherit;">Recentemente, os pesquisadores do MIT decidiram superar essas dificuldades desenvolvendo do zero uma linguagem para HPC chamada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Julia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lan√ßada pela primeira vez em 2012. </font><font style="vertical-align: inherit;">Ainda n√£o se sabe se Julia substituir√° Fortran. </font><font style="vertical-align: inherit;">De qualquer forma, suspeito que isso demore muito tempo.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt400523/">https://habr.com/ru/post/pt400523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt400511/index.html">Sobre o m√©todo moderno de armazenamento de combust√≠vel nuclear usado</a></li>
<li><a href="../pt400513/index.html">Teorema da incompletude de G√∂del em 20 minutos</a></li>
<li><a href="../pt400515/index.html">Blockchainer: benef√≠cios da blockchain para aqueles que n√£o s√£o adequados para criptomoedas</a></li>
<li><a href="../pt400519/index.html">Impressora 3D modular 3D-Start como fonte de interesse para um gato 3D</a></li>
<li><a href="../pt400521/index.html">A Apple corrigiu o erro e acusa o Consumer Reports de metodologia incorreta</a></li>
<li><a href="../pt400525/index.html">Desenvolvimento de um sistema de memoriza√ß√£o mnem√¥nica de n√∫meros</a></li>
<li><a href="../pt400527/index.html">Reamostragem II. Compara√ß√£o da opera√ß√£o de filtros digitais e anal√≥gicos de alta ordem no caminho sonoro e respostas a perguntas</a></li>
<li><a href="../pt400529/index.html">Equipamento da sala cir√∫rgica para corre√ß√£o da vis√£o</a></li>
<li><a href="../pt400531/index.html">O Comit√™ da Duma do Estado aprovou um projeto de lei sobre a regulamenta√ß√£o dos servi√ßos audiovisuais</a></li>
<li><a href="../pt400533/index.html">O principal paradoxo da consci√™ncia. Por que copiar o c√©rebro ou a personalidade n√£o faz sentido</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>