<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈚️ 🏴󠁧󠁢󠁳󠁣󠁴󠁿 🍸 Java tidak hanya berdarah perusahaan, tetapi juga aplikasi yang sensitif terhadap latensi cepat 🤮 👄 🤷🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya melakukan perdagangan algoritmik di Raiffeisenbank. Ini adalah area yang agak spesifik dari sektor perbankan. Kami membuat platform perdagangan y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java tidak hanya berdarah perusahaan, tetapi juga aplikasi yang sensitif terhadap latensi cepat</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/453688/">  Saya melakukan perdagangan algoritmik di Raiffeisenbank.  Ini adalah area yang agak spesifik dari sektor perbankan.  Kami membuat platform perdagangan yang berfungsi dengan penundaan yang rendah dan dapat diprediksi.  Keberhasilan aplikasi tergantung, antara lain, pada kecepatan aplikasi, jadi kita harus berurusan dengan seluruh tumpukan yang terlibat dalam perdagangan: saluran jaringan pribadi, perangkat keras khusus, pengaturan OS dan JVM khusus, dan, tentu saja, aplikasi itu sendiri.  Kami tidak dapat berhenti mengoptimalkan aplikasi itu sendiri secara eksklusif - pengaturan OS atau jaringan tidak kalah penting.  Ini membutuhkan keahlian teknis dan pengetahuan untuk memahami bagaimana data mengalir melalui seluruh tumpukan, dan di mana mungkin ada penundaan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/ff/7v/b8ff7vpvqcp4qpvadbihv_uztq0.jpeg"></div><a name="habracut"></a><br>  Tidak semua organisasi / bank mampu mengembangkan perangkat lunak kelas ini.  Tetapi saya beruntung bahwa proyek seperti itu diluncurkan di dalam dinding Raiffeisenbank, dan saya memiliki spesialisasi yang sesuai - Saya berspesialisasi dalam kinerja kode di Intel Moscow Compiler Laboratory.  Kami membuat kompiler untuk C, C ++ dan Fortran.  Di Raiffeisenbank, saya pindah ke Jawa.  Jika sebelumnya saya membuat semacam alat yang digunakan banyak orang saat itu, sekarang saya telah pindah ke sisi lain dari barikade dan saya terlibat dalam analisis terapan kinerja tidak hanya kode, tetapi seluruh tumpukan aplikasi.  Secara teratur, cara untuk meneliti masalah kinerja terletak jauh di luar kode, misalnya, di pengaturan kernel atau jaringan. <br><br><h3>  <b>Java bukan untuk beban tinggi?</b> </h3><br>  Dipercaya secara luas bahwa Java tidak terlalu cocok untuk pengembangan sistem yang sangat dimuat. <br>  Ini hanya sebagian yang bisa disepakati.  Jawa indah dalam banyak aspek.  Jika kita membandingkannya dengan bahasa seperti C ++, maka potensi overhead-nya mungkin lebih tinggi, tetapi kadang-kadang solusi yang serupa secara fungsional di C ++ dapat bekerja lebih lambat.  Ada optimisasi yang secara otomatis berfungsi di Java, tetapi tidak berfungsi di C ++, dan sebaliknya.  Melihat kualitas kode yang muncul setelah kompiler Java JIT, saya ingin percaya bahwa kinerja akan lebih rendah daripada apa yang dapat saya capai di puncak, tidak lebih dari beberapa kali.  Tetapi pada saat yang sama saya mendapatkan pengembangan yang sangat cepat, peralatan yang sangat baik, dan berbagai pilihan komponen yang tersedia. <br><br>  Mari kita hadapi itu: di dunia C ++, lingkungan pengembangan (IDE) secara signifikan di belakang IntelliJ dan Eclipse.  Jika pengembang menggunakan salah satu dari lingkungan ini, maka kecepatan debug, menemukan bug dan menulis logika kompleks adalah urutan besarnya lebih tinggi.  Sebagai hasilnya, ternyata lebih mudah untuk mengarsipkan Java di tempat yang tepat sehingga bekerja cukup cepat daripada melakukan semuanya dari awal dan untuk waktu yang sangat lama di C ++.  Yang paling lucu adalah ketika menulis kode kompetitif, pendekatan sinkronisasi di Jawa dan C ++ sangat mirip: mereka adalah primitif level OS (misalnya, <i>disinkronkan / std :: mutex</i> ) atau primitif besi ( <i>Atom * / std :: atomic &lt;*&gt;</i> ) .  Dan sangat penting untuk melihat kesamaan ini. <br><br>  Secara umum, kami sedang mengembangkan aplikasi non-beban tinggi)) <br><br><h3>  <b>Apa perbedaan antara aplikasi latensi tinggi dan rendah?</b> <br></h3><br>  Istilah highload tidak sepenuhnya mencerminkan spesifikasi pekerjaan kami - kami terlibat dalam <i>sistem latensi-sentitif</i> .  Apa bedanya?  Untuk sistem yang sarat muatan, penting untuk bekerja rata-rata dengan cukup cepat, memanfaatkan sumber daya perangkat keras sepenuhnya.  Dalam praktiknya, ini berarti bahwa setiap juta permintaan ke sistem ke seratus / keseribu / ribu dapat berpotensi bekerja sangat lambat, karena kami fokus pada nilai rata-rata dan tidak selalu memperhitungkan bahwa pengguna kami menderita rem yang signifikan. <br><br>  Kami terlibat dalam sistem yang tingkat keterlambatannya sangat penting.  Tugas kami adalah memastikan bahwa sistem selalu memiliki respons yang dapat diprediksi.  <i>Sistem yang</i> berpotensi <i>sensitif terhadap latensi</i> mungkin tidak dimuat secara penuh jika peristiwa jarang terjadi, tetapi waktu respons yang dijamin diperlukan.  Dan itu tidak membuat perkembangan mereka lebih mudah.  Justru sebaliknya!  Bahaya menunggu di mana-mana.  Sebagian besar komponen perangkat keras dan lunak modern berorientasi pada kerja yang baik "rata-rata", yaitu.  untuk <i>throughput</i> . <br><br>  Ambil setidaknya struktur data.  Kami menggunakan tabel hash, dan jika re-hash dari seluruh struktur data terjadi pada jalur kritis, ini dapat menyebabkan rem yang nyata untuk pengguna tertentu berdasarkan satu permintaan.  Atau JIT compiler - mengoptimalkan pola kode yang paling sering dieksekusi, pesimisasi pola kode yang jarang dieksekusi.  Tetapi kecepatan kasus langka ini bisa sangat penting bagi kami! <br><br>  Mungkin kode ini memproses jenis pesanan yang langka?  Atau situasi pasar yang tidak biasa yang membutuhkan respons cepat?  Kami berusaha memastikan bahwa reaksi sistem kami terhadap peristiwa yang berpotensi langka ini memerlukan waktu yang dapat diprediksi dan, terutama, sangat singkat. <br><br><h3>  <b>Bagaimana cara mencapai waktu reaksi yang dapat diprediksi?</b> </h3><br>  Pertanyaan ini tidak dapat dijawab dalam dua frasa.  Dalam perkiraan pertama, penting untuk memahami apakah ada jenis sinkronisasi - <i>disinkronkan, reentrantlock</i> atau sesuatu dari <i>java.util.concurrent</i> .  Seringkali Anda harus menggunakan sinkronisasi pada busy-spin'ah.  Menggunakan sinkronisasi primitif apa pun selalu merupakan kompromi.  Dan penting untuk memahami bagaimana sinkronisasi primitif ini bekerja dan pertukaran apa yang mereka lakukan.  Penting juga untuk mengevaluasi berapa banyak sampah yang dihasilkan oleh sepotong kode tertentu.  Cara terbaik untuk memerangi pemulung adalah dengan tidak memicunya.  Semakin sedikit kita akan menghasilkan sampah, semakin sedikit kita akan menjalankan pengumpul sampah, dan semakin lama sistem akan bekerja tanpa intervensi. <br><br>  Kami juga menggunakan berbagai alat yang berbeda yang memungkinkan kami untuk menganalisis tidak hanya indikator rata-rata.  Kita harus hati-hati menganalisis seberapa lambat sistem bekerja setiap kali keseratus, setiap kali keseribu.  Jelas, indikator-indikator ini akan lebih buruk daripada median atau rata-rata.  Tetapi sangat penting bagi kita untuk mengetahui berapa banyak.  Dan alat-alat seperti <i>Grafana</i> , <i>Prometheus</i> , <i>histogram HDR,</i> dan <i>JMH</i> membantu menunjukkan hal ini. <br><br><h3>  <b>Bisakah saya menghapus Tidak Aman?</b> <b><br></b> </h3><br>  Seringkali Anda harus menggunakan apa yang oleh apologis disebut sebagai API tidak berdokumen.  Saya sedang berbicara tentang Unsafe yang terkenal.  Saya percaya tidak aman telah menjadi bagian de facto dari API publik mesin Java.  Tidak masuk akal untuk menyangkalnya.  Unsafe menggunakan banyak proyek yang kita semua gunakan secara aktif.  Dan jika kita menolaknya, lalu apa yang akan terjadi pada proyek-proyek ini?  Entah mereka akan hidup di Jawa versi lama, atau mereka lagi harus menghabiskan banyak energi untuk menulis ulang semua ini.  Apakah masyarakat siap untuk ini?  Apakah siap untuk berpotensi kehilangan puluhan persen produktivitas?  Dan yang paling penting, dengan imbalan apa? <br><br>  Secara tidak langsung, pendapat saya mengkonfirmasi <i>penghapusan</i> metode yang <i>sangat rapi</i> dari Unsafe - di Java11 metode yang paling tidak berguna dari Unsafe dihapus.  Saya pikir bahwa sampai setidaknya setengah dari semua proyek yang menggunakan Unsafe pindah ke yang lain, Unsafe akan tersedia dalam satu atau lain bentuk. <br><br><h3>  <b>Ada pendapat: Bank + Java = perusahaan keras yang berdarah?</b> <br></h3><br>  Tim kami tidak memiliki kengerian seperti itu.  Di Spring, kami mungkin menulis sepuluh baris, dan oleh saya)) Kami mencoba untuk tidak menggunakan teknologi besar.  Kami lebih suka melakukan hal-hal kecil, rapi, dan cepat, sehingga kami dapat menyadarinya, mengendalikannya, dan, jika perlu, memodifikasinya.  Yang terakhir ini sangat penting untuk sistem (seperti kita), yang tunduk pada persyaratan non-standar, yang mungkin berbeda dari persyaratan 90% dari pengguna kerangka kerja.  Dan dalam hal menggunakan kerangka kerja yang besar, kita tidak akan dapat menyampaikan kebutuhan kita kepada masyarakat atau untuk memperbaiki perilaku secara mandiri. <br><br>  Menurut pendapat saya, pengembang harus selalu dapat menggunakan semua alat yang tersedia.  Saya datang ke dunia Java dari C ++ dan saya sangat terkesan oleh pembagian komunitas menjadi mereka yang mengembangkan <i>runtime dari</i> mesin virtual / kompiler atau mesin virtual itu sendiri dan menjadi pengembang aplikasi.  Ini jelas terlihat dalam kode kelas JDK standar.  Seringkali penulis JDK menggunakan API yang berbeda.  Secara potensial, ini berarti bahwa kita tidak dapat mencapai kinerja puncak.  Secara umum, saya percaya bahwa menggunakan API yang sama untuk menulis pustaka standar dan kode aplikasi adalah indikator yang sangat baik untuk kematangan platform. <br><br><h3>  <b>Satu hal lagi</b> </h3><br>  Saya pikir sangat penting bagi semua pengembang untuk mengetahui bagaimana, jika bukan seluruh tumpukan, maka setidaknya setengahnya berfungsi: kode Java, kode byte, internal runtime dan assembler mesin virtual, perangkat keras, OS, jaringan.  Ini memungkinkan Anda melihat masalah secara lebih luas. <br>  Kinerja juga layak disebut.  Sangat penting untuk tidak fokus pada rata-rata dan selalu melihat pada median dan persentil tinggi (pengukuran terburuk 10/100/1000 / ...). <br><br>  Saya akan membicarakan semua ini di <b>pertemuan Java User Group pada 30 Mei</b> di St. Petersburg.  Bertemu dengan Sergei Melnikov, itu hanya saya)) Anda dapat mendaftar di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  <b>Apa yang akan kita bicarakan?</b> <br><br><ol><li>  Tentang membuat profil dan menggunakan Linux standar dan profil perf: cara hidup bersama mereka, apa yang mereka ukur dan bagaimana menginterpretasikan hasil mereka.  Ini akan menjadi pengantar profil umum, dengan tips, peretasan kehidupan, cara memeras segala kemungkinan dari profiler sehingga profil mereka dengan akurasi dan frekuensi maksimum. </li><li>  Tentang fitur peralatan untuk mendapatkan profil yang lebih rinci dan melihat profil peristiwa langka.  Misalnya, ketika kode Anda berjalan 10 kali lebih lambat setiap kali keseratus.  Tidak ada profiler yang akan menceritakan hal ini.  Kami akan menulis profiler kecil kami menggunakan mekanisme kernel Linux standar dan mencoba melihat profil beberapa peristiwa langka. </li></ol><br>  Datang ke pertemuan, itu akan menjadi malam yang menyenangkan, akan ada banyak cerita menarik tentang platform kami dan tentang bahasa favorit kami. <br><br>  Sampai jumpa;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id453688/">https://habr.com/ru/post/id453688/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id453672/index.html">CardInfo - API untuk menentukan logo, warna bank dan hal-hal lain dengan nomor kartu</a></li>
<li><a href="../id453676/index.html">Menghubungkan ke Windows melalui SSH seperti di Linux</a></li>
<li><a href="../id453678/index.html">Cara melihat gema atau transmisi video dengan suara melalui air - 2</a></li>
<li><a href="../id453682/index.html">Pengembangan "firmware" paling sederhana untuk FPGA yang dipasang di Redd. Bagian 2. Kode program</a></li>
<li><a href="../id453686/index.html">Pekan Keamanan 22: statistik ancaman, trojan perbankan, dan eksploitasi populer</a></li>
<li><a href="../id453692/index.html">Game 3D Shaders for Beginners: Effects</a></li>
<li><a href="../id453694/index.html">Terhubung ke Windows melalui SSH seperti di Linux</a></li>
<li><a href="../id453696/index.html">Ikatan dua arah sudut, sedikit lebih pengertian</a></li>
<li><a href="../id453698/index.html">Informasi kuantum dalam kesadaran kuantum</a></li>
<li><a href="../id453700/index.html">Pelajaran tentang SDL 2: Pelajaran 1 - Halo, SDL 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>