<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â¬†ï¸ ğŸˆ¶ ğŸ¥˜ Sistem cadangan ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¾ ğŸ¦ˆ ğŸ‘¨ğŸ¼â€âš•ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini adalah bagian dari seri tentang membangun NAS , dan ditulis untuk jenis sistem tertentu. 


 Cadangan adalah tugas utama kedua yang ingin ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sistem cadangan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421251/"><p><img src="https://habrastorage.org/webt/in/pk/uh/inpkuhyjnf8c-efshdvkj_edp7m.jpeg"></p><br><p>  Artikel ini adalah bagian dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seri tentang membangun NAS</a> , dan ditulis untuk jenis sistem tertentu. </p><br><p>  Cadangan adalah tugas utama kedua yang ingin saya selesaikan menggunakan NAS, setelah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sistem manajemen repositori</a> . </p><br><p>  Keputusannya berlarut-larut ... </p><br><p>  Banyak artikel dan bahkan beberapa buku telah ditulis tentang topik ini, dan banyak salinan telah dipecah dalam perselisihan tentang ini. </p><br><p>  Di bawah ini adalah upaya untuk mengetahui tumpukan material ini, menaruhnya di kepala Anda dan membangun sistem kecil yang relatif kompeten. </p><a name="habracut"></a><br><p>  Sistem Cadangan (SRK) ditentukan oleh: </p><br><ul><li>  Kebijakan cadangan.  Kebijakan menetapkan tujuan dan sasaran utama cadangan, persyaratan untuknya, berdasarkan daftar ancaman untuk setiap sistem cadangan, dan juga membenarkan kebutuhannya. </li><li>  Peraturan cadangan berbasis kebijakan.  Peraturan ini menjelaskan algoritma pencadangan dan pemulihan yang bertanggung jawab untuk pencadangan, kondisi penyimpanan untuk pencadangan, dll. </li><li>  Implementasi instrumental.  Sebenarnya, perangkat lunak dan perangkat keras. </li></ul><br><p>  Proses pencadangan reguler dibagi menjadi beberapa bagian utama berikut: </p><br><ul><li>  Mulai menyalin secara berkala. </li><li>  Mulai pemulihan sesuai permintaan. </li><li>  Menguji proses penyalinan. </li></ul><br><p>  Titik antarmuka sistem dengan platform NAS: </p><br><ul><li> <code>tank0/apps/backup</code> - penyimpanan <code>tank0/apps/backup</code> . </li><li>  <code>tank1/apps/backup</code> - penyimpanan <code>tank1/apps/backup</code> . </li><li>  <code>https://backup.NAS.cloudns.cc</code> - Antarmuka sistem berbasis web. </li></ul><br><p>  Repositori cadangan adalah <strong>sistem file yang terpisah</strong> . <br>  Ini perlu karena opsi mereka bisa sangat berbeda, baik dari sistem file normal, dan di antara mereka sendiri. </p><br><p>  Misalnya, jika perlu, deduplikasi melalui FS dapat diaktifkan dan kompresi dapat dinonaktifkan. </p><br><h2 id="principy-rezervnogo-kopirovaniya">  Prinsip Pencadangan </h2><br><p><img src="https://habrastorage.org/webt/t-/pe/i4/t-pei4njc4jilp-l0unqmcpanho.jpeg"></p><br><p>  Penting untuk dipahami bahwa meskipun saya menggambarkan di sini kasus khusus cadangan yang disesuaikan dengan kebutuhan jaringan kecil, prinsip-prinsip, pengamatan dan pola di mana-mana umum terjadi. <br>  Dalam kasus-kasus sederhana, beberapa dari mereka dapat diabaikan, tetapi diinginkan untuk mengetahuinya. </p><br><p>  Prinsip-prinsip ini didasarkan pada kebijakan dan peraturan. </p><br><p>  Berikut ini beberapa yang mendasar: </p><br><ul><li>  <strong>3-2-1</strong> .  Buat setidaknya tiga cadangan, dalam dua format penyimpanan, yang setidaknya satu harus disimpan di tempat yang terpisah secara fisik.  Prinsipnya diinginkan untuk diperhatikan.  Dalam kasus saya, prinsip ini sebagian diterapkan.  Pertama, ada tiga mesin yang berbeda di mana data digandakan sebagian: NAS, kerja dan laptop.  Kedua, replikasi ke cloud direncanakan. </li><li>  <strong>Periksa apa yang sudah disalin</strong> .  Jika tidak, dapat terjadi bahwa pada saat yang genting, data tidak dapat dipulihkan.  Periksa lebih baik melalui proses pemulihan. </li><li>  <strong>Gunakan alat yang tepat untuk tugas itu</strong> .  Sangat mungkin bahwa dengan menyalin armada mesin virtual, sistem untuk menyalin file dengan agen pada mesin akan melakukan hal yang buruk.  Perangkat lunak khusus akan menyalin lebih cepat dan lebih murah pada sumber daya mesin.  Penting bahwa alat ini andal dan sederhana.  IBS bukanlah sesuatu yang biasanya ingin Anda gali. </li><li>  <strong>Lebih baik menyalin semuanya, dengan pengecualian yang jelas</strong> .  Atau "lebih baik menyalip daripada tidak menyelesaikannya."  Dimungkinkan untuk membuang kelebihan, tetapi jika kebijakan sebaliknya digunakan, mungkin tidak mungkin untuk mengembalikan file berharga yang Anda lupa tentukan secara eksplisit. </li><li>  <strong>Seharusnya dimungkinkan untuk memilih dan mengembalikan data dengan cepat</strong> .  Dianjurkan, "satu klik", dan tidak menunggu satu jam.  Secara formal, Anda harus memiliki RTO yang cukup rendah, dan RPO yang cukup.  Sangat nyaman jika IBS memungkinkan Anda untuk memulihkan dihapus secara tidak sengaja, dan memilih dari beberapa versi, dan bukan hanya yang terbaru (misalnya, jika rusak, karena kesalahan logis tidak dikecualikan). </li></ul><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Di akhir artikel</a> ada tautan ke sumber-sumber yang dapat Anda pelajari untuk lebih membiasakan diri dengan poin-poin ini, serta membaca tentang orang lain. </p><br><h2 id="politika-rezervnogo-kopirovaniya">  Kebijakan cadangan </h2><br><p>  Jelas, tujuan dari cadangan apa pun adalah untuk mengurangi biaya penghancuran data yang tidak direncanakan dalam situasi darurat. </p><br><p>  Ini dicapai dengan menduplikasi data berharga dari mesin yang bekerja ke penyimpanan pihak ketiga. </p><br><h3 id="zadachi-rezervnogo-kopirovaniya">  Tugas cadangan </h3><br><p>  Tugas-tugas berikut ini didefinisikan untuk tujuan cadangan: </p><br><ul><li>  Sorot data target. </li><li>  Menyimpan data yang ditentukan untuk pemulihan selanjutnya. </li><li>  Pemulihan data yang disimpan. </li><li>  Memastikan stabilitas data yang disimpan berubah dan rusak. </li><li>  Diferensiasi akses ke data yang disimpan. </li><li>  Menyediakan kontrol sistem dan proses pencadangan. </li></ul><br><h3 id="trebovaniya-k-sisteme">  Persyaratan sistem </h3><br><p>  Lebih jauh dalam daftar, persyaratan fungsional dan non-fungsional dicampur: </p><br><ul><li>  Pencadangan harus dilakukan: <br><ul><li>  Sesuai jadwal. </li><li>  Atas permintaan. </li><li>  Jika Anda melewatkan yang sebelumnya. </li></ul></li><li>  Cadangan data harus disediakan setidaknya 1 kali per hari hingga kedalaman 1 bulan.  Praktek mengambil foto, serta menggunakan versi sistem sebelumnya pada mesin yang berfungsi, menunjukkan bahwa ini sudah cukup bagi saya. </li><li>  Waktu pemulihan data tidak boleh lebih dari 2 menit per 1 GB (batas bandwidth jaringan adalah 81 detik. Per 1 GB).  Mempertimbangkan bandwidth LAN dan kecepatan disk, sebagai faktor pembatas. </li><li>  Semua saluran harus dienkripsi.  Data sensitif, seperti data otorisasi dalam layanan online, dapat disimpan. </li><li>  Seharusnya dimungkinkan untuk mengenkripsi cadangan pengguna dengan kunci rahasia di mesin pengguna, tanpa kemungkinan dekripsi di server.  Ini penting karena pengguna tidak perlu mempercayai server sama sekali. </li><li>  Penyalinan yang tidak lengkap seharusnya tidak memakan banyak waktu, misalnya, lebih dari 30 menit.  Internet digunakan untuk menyalin data dari laptop. </li><li>  Seharusnya ada potensi untuk menyalin salinan ke cloud (kemampuan untuk secara fleksibel mengkonfigurasi replikasi untuk penyimpanan cloud tertentu) dengan enkripsi cadangan.  Ini juga salah satu konsekuensi dari "prinsip 3-2-1." </li><li>  Seharusnya ada manajemen terpusat sederhana dengan integrasi ke dalam antarmuka web. </li><li>  Minimal penyempurnaan dan pengaturan yang rumit di server. </li></ul><br><h3 id="sostav-rezerviruemyh-resursov">  Komposisi Sumber Daya Cadangan </h3><br><p>  Dalam kasus saya, ini sangat khas: </p><br><ul><li>  Mesin kerja utama.  Komputer desktop. </li><li>  Mesin kerja bergerak.  Laptop itu. </li><li>  Router LAN.  Ini menyimpan pengaturan jaringan, yang dapat berisi login dan kata sandi untuk koneksi Internet dan beberapa layanan. </li><li>  NAS  Ya, konfigurasi NAS juga berlebihan.  Terlepas dari kenyataan bahwa sebagian besar FS memiliki snapshot. </li></ul><br><h3 id="sostav-ugroz">  Komposisi Ancaman </h3><br><p>  Di sinilah, apa dan apa yang harus dilindungi dan dengan cara apa. </p><br><div class="spoiler">  <b class="spoiler_title">Untuk melakukan ini, saya menyusun tabel kecil ancaman.</b> <div class="spoiler_text"><div class="scrollable-table"><table><thead><tr><th>  Sumberdaya </th><th>  Ancaman </th><th>  Solusi </th></tr></thead><tbody><tr><td>  Mesin kerja utama </td><td>  Korupsi data fisik </td><td>  Cadangan data dan pengaturan kunci </td></tr><tr><td>  Mesin kerja utama </td><td>  Korupsi data langsung parsial dan tak terlihat </td><td>  Menyimpan cadangan yang lebih lama untuk beberapa waktu </td></tr><tr><td>  Mesin kerja utama </td><td>  Kehilangan akses data </td><td>  Penyimpanan gambar penuh mesin, atau <strong>pengaturan, untuk perputaran cepat pada komputer lain</strong> , atau duplikasi fungsi pada PC seluler </td></tr><tr><td>  Mesin kerja utama </td><td>  Akses fisik yang tidak sah ke data </td><td>  Enkripsi data dan cadangan, transfer salinan terenkripsi </td></tr><tr><td>  Mesin kerja utama </td><td>  Akses tidak sah melalui pelanggaran perangkat lunak </td><td>  Reservasi checksum perangkat lunak dan rekonsiliasi berkala, sistem kontrol (belum diterapkan) </td></tr><tr><td>  Mesin kerja bergerak </td><td>  Kehilangan mobil beserta data </td><td>  Enkripsi data, cadangan penuh, atau cadangan pengaturan kunci dan data </td></tr><tr><td>  Router LAN </td><td>  Penghancuran konfigurasi atau perangkat </td><td>  Redundansi konfigurasi, redundansi perangkat mungkin </td></tr><tr><td>  Router LAN </td><td>  Kehilangan kendali karena peretasan </td><td>  Reservasi Konfigurasi </td></tr><tr><td>  Router LAN </td><td>  Sebagian, korupsi data yang tidak terlihat </td><td>  Penyimpanan checksum perangkat lunak dan rekonsiliasi berkala </td></tr><tr><td>  NAS </td><td>  Pengaturan layanan yang rusak </td><td>  Reservasi reservasi lokal </td></tr><tr><td>  NAS </td><td>  Korupsi data fisik </td><td>  Replikasi cloud </td></tr><tr><td>  NAS </td><td>  Kehilangan akses ke sistem dan cadangan </td><td>  Replikasi cloud </td></tr><tr><td>  NAS </td><td>  Akses tidak sah ke data pihak ketiga </td><td>  Penyimpanan dan replikasi data dalam bentuk terenkripsi, pertukaran data dalam bentuk terenkripsi </td></tr><tr><td>  NAS </td><td>  Administrator akses tidak sah ke data </td><td>  Enkripsi cadangan pada kunci lokal dari mesin yang berlebihan </td></tr></tbody></table></div></div></div><br><p>  Semua ancaman utama pada komputer seluler mengulangi ancaman itu menjadi yang diam. <br>  Komputer tablet praktis tidak berbeda dengan ponsel, dari sudut pandang ini. </p><br><h3 id="dopolnitelnye-usloviya-politiki">  Ketentuan Kebijakan Tambahan </h3><br><p>  Dianjurkan untuk memperhitungkannya: </p><br><ul><li>  Pengujian pemulihan rutin harus dilakukan. </li><li>  Prosedur pemulihan yang gagal harus didokumentasikan. </li><li>  Tindakan harus diatur jika terjadi kegagalan sekunder: apa yang harus dilakukan jika, setelah pemulihan, sistem tidak beroperasi, atau data tidak dapat dipulihkan. </li><li>  Penting untuk menguji apakah proses pemulihan tergantung pada peralatan tertentu <br>  (yang mungkin gagal pada saat pemulihan).  Saya, dalam kasus saya, tidak akan memeriksa ini, terbatas hanya pada pemeriksaan sistem dasar. </li><li>  Jika Anda memiliki cadangan sistem lengkap, Anda harus segera mencadangkan setelah peningkatan yang substansial. </li><li>  Jika volume kumulatif cadangan inkremental melebihi volume cadangan penuh, adalah rasional untuk membuat cadangan penuh yang tidak terjadwal.  Artinya, frekuensi membuat cadangan lengkap harus ditingkatkan dalam kasus ini. </li></ul><br><p>  Saya tidak memperhitungkan poin terakhir kebijakan, karena biasanya alur kerja saya tidak berubah, dan cukup untuk memantau volume untuk sementara waktu, hanya untuk pengaturan awal. <br>  Secara empiris, ditemukan bahwa skema "bulan, minggu, hari, jam" cukup baik untuk saya. <br>  Untuk sistem yang lebih besar, Anda mungkin perlu mengubah frekuensi cadangan secara dinamis untuk setiap sistem. </p><br><h2 id="reglament-rezervnogo-kopirovaniya">  Peraturan cadangan </h2><br><p>  Setelah pengembangan kebijakan, dimungkinkan untuk melanjutkan pengembangan regulasi secara langsung. <br>  Dalam kasus umum, mungkin ada beberapa peraturan: umum, untuk administrator IBS, untuk pengguna, bagi mereka yang bertanggung jawab untuk penyimpanan, untuk administrator sistem target, dll ... <br>  Tetapi dalam kasus sistem kecil, ini biasanya satu orang, dan karena itu hanya ada satu peraturan. </p><br><h3 id="zadachi-reglamenta">  Tujuan regulasi </h3><br><ul><li>  Menentukan prosedur cadangan data. </li><li>  Menentukan prosedur pemulihan data. </li><li>  Menentukan prosedur pemeriksaan kesehatan sistem. </li><li>  Kondisi penyimpanan cadangan dan persyaratan media. </li><li>  Merampingkan pekerjaan. </li></ul><br><h3 id="primer-reglamenta">  Contoh regulasi </h3><br><p>  Di bawah spoiler, Anda dapat melihat seperti apa aturannya dalam organisasi besar, menggunakan contoh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://web.archive.org/web/20160731233007/">peraturan Rosreestr yang diambil dari sumber terbuka</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Peraturan Rosreestr.</b> <div class="spoiler_text"><h1 id="reglament-rezervnogo-kopirovaniya-dannyh-v-territorialnyh-podrazdeleniyah-rosreestra">  PERATURAN CADANGAN DATA DI DEPARTEMEN TERRITORIAL ROSRESTR </h1><br><h2 id="oglavlenie">  Daftar isi </h2><br><ol><li>  Ketentuan Umum </li><li>  Pesanan cadangan. </li><li>  Memantau hasilnya. </li><li>  Dukungan regulasi. </li><li>  Rotasi media cadangan. </li><li>  Kembalikan informasi dari cadangan. </li><li>  Lampiran 1 </li><li>  Lampiran 2 Daftar orang yang bertanggung jawab untuk pencadangan. </li></ol><br><h2 id="1--obschie-polozheniya">  <strong>1</strong> Umum </h2><br><p>  Peraturan ini menetapkan persyaratan dasar untuk organisasi cadangan (pemulihan) program dan data yang disimpan dalam database di server otoritas teritorial Rosreestr, serta untuk cadangan perangkat keras. </p><br><p>  Peraturan ini dirancang untuk: </p><br><ul><li>  penentuan kategori informasi yang tunduk pada cadangan wajib; </li><li>  menentukan prosedur untuk mencadangkan data untuk pemulihan kinerja sistem informasi selanjutnya jika terjadi kehilangan sebagian atau seluruh informasi yang disebabkan oleh kegagalan atau kegagalan fungsi perangkat keras atau perangkat lunak, kesalahan pengguna, keadaan darurat (kebakaran, bencana alam, dll.); </li><li>  menentukan prosedur untuk memulihkan informasi jika terjadi kebutuhan seperti itu; </li><li>  merampingkan pekerjaan dan menentukan tanggung jawab pejabat terkait dengan pencadangan dan pemulihan informasi. </li></ul><br><p>  Informasi pencadangan berarti pembuatan salinan lengkap dari basis data produksi Kantor untuk pemulihan cepat sistem manajemen informasi dari Daftar Perusahaan Negara yang Disatukan Perusahaan "Keadilan" AIS jika terjadi keadaan darurat yang mengakibatkan kerusakan atau kehilangan data. </p><br><p>  Semua basis data produksi dari semua departemen teritorial Kantor dapat dicadangkan. </p><br><p>  Media penyimpanan mesin yang berisi salinan cadangan diberikan cap kerahasiaan untuk cap informasi tertinggi yang terkandung di dalamnya. </p><br><p>  Cadangan disimpan di luar ruang server, akses ke cadangan terbatas.  Daftar orang yang memiliki akses ke data dibentuk berdasarkan aplikasi tertulis dari kepala unit teknologi informasi, yang disetujui oleh kepala unit keamanan informasi (SI).  Hak akses ke sarana teknis, array, dan media penyimpanan yang dilindungi diubah berdasarkan aplikasi dari kepala departemen TI, disepakati dengan kepala departemen IS.  Upaya yang terdeteksi dari akses tidak sah ke informasi yang dilindungi dan perangkat keras, serta pelanggaran IS lainnya yang terjadi selama proses pencadangan, dilaporkan ke unit IS dengan catatan layanan selama hari kerja setelah deteksi peristiwa yang ditentukan. </p><br><h2 id="2-poryadok-rezervnogo-kopirovaniya">  <strong>2</strong> Pesanan Cadangan </h2><br><p>  Pencadangan dilakukan dengan menggunakan Oracle DBMS biasa.  Pencadangan dapat dilakukan: </p><br><ul><li>  Secara manual - operator yang bertanggung jawab atas pencadangan memulai prosedur ekspor Oracle (contoh memulai prosedur pada Lampiran 1). </li><li>  Secara otomatis - file yang dapat dieksekusi yang memanggil prosedur ekspor Oracle diluncurkan secara otomatis oleh sistem operasi sesuai jadwal. </li></ul><br><p>  Pencadangan basis data dilakukan setidaknya 1 kali per hari.  Masa penyimpanan basis data cadangan minimal 1 bulan. </p><br><p>  Strategi cadangan harus menjamin pemulihan data secara sinkron yang terletak di skema basis data yang berbeda.  Misalnya, skema HED (repositori dokumen elektronik) harus disalin secara bersamaan dengan skema AIS Justice. </p><br><p>  Sarana material dan teknis dari sistem cadangan harus memberikan kinerja yang cukup untuk menyimpan informasi, tepat waktu dan pada interval yang ditentukan.  Orang-orang yang bertanggung jawab untuk mengatur cadangan harian memantau ketersediaan jumlah ruang disk yang diperlukan untuk cadangan. </p><br><h2 id="3-kontrol-rezultatov">  <strong>3</strong> Pemantauan hasil </h2><br><p>  Hasil dari semua prosedur pencadangan dipantau oleh pejabat yang bertanggung jawab yang ditunjukkan dalam Lampiran 2, hingga 10 jam pada hari kerja setelah tanggal yang ditetapkan untuk melakukan prosedur ini. </p><br><p>  Jika kesalahan terdeteksi, orang yang bertanggung jawab untuk memantau hasil melaporkannya ke layanan dukungan teknis pengembang selambat-lambatnya 11 jam dari hari kerja saat ini. </p><br><h2 id="4-normativno-pravovoe-obespechenie">  <strong>4</strong> Dukungan regulasi </h2><br><p>  Untuk mengatur proses pencadangan, Anda harus: </p><br><ul><li>  Tetapkan daftar orang yang bertanggung jawab untuk melakukan proses pencadangan dan memantau hasilnya (Lampiran 2). </li><li>  Mempersiapkan dan menyetujui jadwal cadangan. </li><li>  Mempersiapkan dan menyetujui dokumen peraturan internal tentang penunjukan mereka yang bertanggung jawab untuk membuat cadangan data. </li></ul><br><h2 id="5-rotaciya-nositeley-rezervnoy-kopii">  <strong>5</strong> Memutar media cadangan </h2><br><p>  Sistem cadangan harus menyediakan kemampuan untuk mengganti (membongkar) media pencadangan secara berkala tanpa kehilangan informasi tentangnya, dan juga memastikan pemulihan informasi terkini dari sistem otomatis jika terjadi kegagalan perangkat cadangan apa pun.  Semua prosedur untuk memuat, mengeluarkan media dari sistem cadangan, serta transfernya ke Layanan Keamanan dan sebaliknya, dilakukan oleh administrator cadangan atas permintaan dan di hadapan karyawan yang bertanggung jawab atas Layanan Keamanan Pelanggan (sesuai dengan Lampiran No. 2). </p><br><p>  Sebagai operator baru, diizinkan untuk menggunakan kembali yang masa penyimpanan informasi yang terkandung telah berakhir. </p><br><p>  Informasi rahasia dari media yang tidak lagi digunakan dalam sistem cadangan harus dihapus menggunakan perangkat lunak PGP. </p><br><h2 id="6-vosstanovlenie-informacii-iz-rezervnoy-kopii">  <strong>6</strong> Kembalikan informasi dari cadangan </h2><br><p>  Jika perlu, pemulihan data dari cadangan dilakukan oleh karyawan yang bertanggung jawab di departemen TI yang ditentukan dalam Lampiran No. 2. </p><br><p>  Pemulihan data dari cadangan terjadi jika hilang atau dilanggar karena akses tidak sah ke sistem, paparan virus, kesalahan perangkat lunak, kesalahan karyawan, dan kegagalan perangkat keras. </p><br><p>  Pemulihan perangkat lunak sistem dan perangkat lunak serba guna dilakukan dari medianya sesuai dengan instruksi pabrik. </p><br><p>  Pemulihan perangkat lunak khusus dilakukan dari media distribusi atau salinan cadangannya sesuai dengan instruksi untuk menginstal atau memulihkan perangkat lunak ini. </p><br><p>  Informasi yang tidak terkait dengan database yang terus berubah dipulihkan dari media cadangan.  Ini menggunakan salinan informasi terbaru. </p><br><p>  Dalam kasus sebagian pelanggaran atau hilangnya catatan basis data, pemulihan dilakukan dari salinan harian terakhir yang tidak terganggu.  Semua informasi dipulihkan dari salinan terakhir. </p><br><h2 id="7-prilozhenie-1">  <strong>7</strong> Lampiran 1 </h2><br><p>  Contoh memulai utilitas ekspor Oracle dari baris perintah: </p><br><p>  exp userid = JUST_USER / PASSWORD @ pemilik SERVER = (JUST_USER, HED_USER) langsung = Y konsisten = Y statistik = NONE kompres = N file = C: \ BACKUP.DMP log = C: \ BACKUP.LOG </p><br><p>  dimana: </p><br><p>  JUST_USER / PASSWORD @ SERVER <em>-</em> schema_owner_name / password @ server_name; </p><br><p>  owner = (JUST_USER, HED_USER) - daftar skema yang disalin, dalam contoh ini, skema AIS Justice dan skema HED secara bersamaan diekspor; </p><br><p>  file = C: \ BACKUP.DMP <em>-</em> path dan nama file ekspor yang dibuat; </p><br><p>  log = C: \ BACKUP.LOG <em>-</em> path dan nama file log ekspor yang dibuat. </p><br><h2 id="8-prilozhenie-2-perechen-lic-otvetstvennyh-za-rezervnoe-kopirovanie">  <strong>8</strong> Lampiran 2. Daftar orang yang bertanggung jawab untuk pencadangan </h2><br><div class="scrollable-table"><table><thead><tr><th>  <strong>Tidak. P / p</strong> </th><th>  <strong>Peran</strong> </th><th>  <strong>Nama petugas yang bertanggung jawab</strong> </th></tr></thead><tbody><tr><td>  1 </td><td>  Pengaturan sistem cadangan awal. </td><td></td></tr><tr><td>  2 </td><td>  Membuat perubahan signifikan pada pengaturan sistem cadangan. </td><td></td></tr><tr><td>  3 </td><td>  Analisis log cadangan, melacak kebutuhan untuk perubahan pengaturan cadangan, memastikan rotasi media. </td><td></td></tr><tr><td>  4 </td><td>  Rotasi media, memeriksa kebenaran cadangan, memastikan bahwa cadangan disimpan di luar kantor jika terjadi bencana. </td><td></td></tr></tbody></table></div></div></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Di sini</a> Anda akan menemukan contoh lain dengan deskripsi singkat. </p><br><h3 id="procedura-rezervirovaniya">  Prosedur reservasi </h3><br><p>  Komposisi data cadangan: </p><br><ul><li>  Mesin bekerja: <br><ul><li>  Direktori pengguna pribadi ( <code>/home/*</code> ).         . </li><li>   . </li><li>    ,   ( <code>/opt</code> ). </li><li>   ( <code>/etc</code> ). </li><li>    . </li><li>  . </li><li>   . </li><li>   . </li></ul></li><li> : <br><ul><li>  . </li></ul></li><li> NAS: <br><ul><li>    Docker . </li><li>   . </li><li>  . </li><li>    . </li><li>  . </li><li>     Docker . </li><li>   . </li><li>    . </li></ul></li><li>  : <br><ul><li>    . </li></ul></li></ul><br><p>  : </p><br><ul><li>       . </li><li>     ,    . </li><li>          <code>/etc/apt/apt.conf.d</code> ,  ,     . </li><li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> Mikrotik</a> . </li><li> NAS    . </li></ul><br><p>  : </p><br><ul><li>     1      .     . <br>  3 . </li><li>     1     . <br>  . </li><li>     1   . <br>  . </li><li>       . <br>  . </li><li>          . <br>    6 ,      . </li></ul><br><h3 id="procedura-vosstanovleniya">   </h3><br><p><img src="https://habrastorage.org/webt/qu/i3/il/qui3ilw9nczsm17-w7d1dwcalhy.jpeg"></p><br><ul><li>        ,  . </li><li>       ,    . </li></ul><br><p>        : </p><br><ul><li>   live . </li><li>        . </li><li>     ,  . </li></ul><br><p>  ,           Debian   (  Squeeze  2011 ),           Slackware  ReiserFS    . </p><br><p>       : </p><br><ul><li>    ,  . </li><li>       . </li><li>   ,    . </li><li>       . </li></ul><br><p> Mikrotik   ,    RouterOS . </p><br><h3 id="procedura-proverki-rabotosposobnosti">    </h3><br><ul><li>       . <br>   logcheck, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  </a> . </li><li>          . </li></ul><br><p>       ,    . </p><br><h3 id="usloviya-hraneniya-rezervnyh-kopiy-i-trebovaniya-k-nositelyam">         </h3><br><ul><li>      . </li><li>    1        . <br>              . </li><li>  .     . </li><li>    . </li></ul><br><h2 id="resheniya-dlya-rezervnogo-kopirovaniya">     </h2><br><p>     ,       . </p><br><h3 id="trebovaniya-k-po">    </h3><br><p>      : </p><br><ul><li>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Veeam</a>     ,   ,    .     ,    Acronis,    ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . </li><li>             . </li><li>          . </li></ul><br><h3 id="vybor-po">   </h3><br><p>          . <br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . </p><br><div class="spoiler"> <b class="spoiler_title">  .</b> <div class="spoiler_text"><h3 id="resheniya-na-baze-unix-utilit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Solusi Utilitas Unix </font></font></h3><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solusi berdasarkan rsync, tar, rdiff-backup, dll. </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak dianggap karena banyaknya pekerjaan yang perlu dilakukan dan kurangnya antarmuka WEB yang diperlukan.</font></font></p><br><h3 id="bareoshttpswwwbareosorgen"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breo</font></font></a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/kp/pa/7t/kppa7tts84fep2t5rfk52poagx4.png"></a> </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> BareOS (Backup Archiving Recovery Open Sourced) - garpu Bacula sejak 2010. </font></font></p><br><p>  Pro: </p><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sistem debugged yang stabil. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mendukung beberapa jenis agen di bawah OS yang berbeda. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ini mendukung berbagai jenis cadangan: inkremental, diferensial, penuh. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WEB-interface sangat maju dan fungsional. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konfigurasi yang fleksibel. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ada driver FUSE yang menunjukkan cadangan. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ada ikatan untuk Python yang memungkinkan Anda untuk berinteraksi dengan Direktur. </font></font></li><li>       (, ). </li><li>       . </li><li>     . </li></ul><br><p>  Cons: </p><br><ul><li>    . </li><li>   . </li><li>    . </li><li>   ,    . </li><li>   (500+ ),    ,          . </li></ul><br><h3 id="backuppchttpbackuppcsourceforgenet"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BackupPC</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/zi/dv/e4/zidve44-5zrteeqdkiosyigkvwu.png"></a> </p><br><p>    . </p><br><p>   : </p><br><ul><li>    . </li><li>    . </li><li>  Web-. </li><li>    . </li><li> .    ,       . </li><li>   . </li><li>   ,   SMB, rsync. </li><li>      Web-. </li><li>     ,      . </li><li>  ,  ,      . </li><li>   . </li></ul><br><p>  Cons: </p><br><ul><li>   Perl,   CPAN. </li><li>    ,    ,     . <br>        ,   ,   ,     .   ,         SSH   ,   ,    , ..      . </li><li>      (  ,    ). </li></ul><br><h3 id="urbackuphttpswwwurbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UrBackup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/u1/lo/ed/u1loed_wq1-njxjlq1f7ths2kso.png"></a> </p><br><p> -     . </p><br><p>   : </p><br><ul><li>  . </li><li>  Web-. </li><li>    . </li><li>      ( .. ). </li><li>   Windows, Linux, MacOS X. </li><li>    :     ,        . </li><li>     . </li><li>     . </li><li>      (,  Outlook,     ). </li><li>   .    ,       . </li><li>   (,   ..)     . </li><li>  . </li><li>    ,     . </li><li>     ,      . </li><li>   . </li><li>      Internet. </li><li>   (,  ) . </li><li>     . </li><li>     (,   USB ). </li><li>  . </li><li>  GUI     . </li></ul><br><p>  Cons: </p><br><ul><li>   Windows,    , . </li><li>      NTFS. </li><li>  LDAP,   ,  ,   AD      . </li></ul><br><h3 id="restichttpsresticnet"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Restic</a> </h3><br><p>         . </p><br><p>   : </p><br><ul><li>  . </li><li>      . </li><li> .    ,       . </li><li>   / .   .    . </li><li>       .    . </li><li>   . </li><li>  FUSE ,       host/. </li></ul><br><p>  Cons: </p><br><ul><li> Web- . </li><li>    RAM (~2.7GB  1TB). </li><li>   ACL   . </li><li>     RAM   . </li><li>      (     ). </li><li>       (        ).    . </li><li>       restic. </li></ul><br><h3 id="borgbackuphttpswwwborgbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BorgBackup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/a_/qp/rh/a_qprhceevkysy_nk_xg20os5x0.jpeg"></a> </p><br><p>     . </p><br><p>   : </p><br><ul><li>   . </li><li>        . </li><li>   (   Python,      C  ). </li><li> . </li><li> : LZ4, zlib, LZMA. </li><li>  FUSE ,   . </li><li>     : Linux, macOS, BSD, etc. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> Web-,   </a> . </li><li>    . </li></ul><br><p>  Cons: </p><br><ul><li> Web-  . </li><li>     Windows (  Linux subsystem  cygwin). </li></ul><br><h3 id="lsyncdhttpsgithubcomaxkibelsyncd"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lsyncd</a> </h3><br><p> ,      rsync. </p><br><p>   : </p><br><ul><li>  inotify  fsevents    .     rsync   . </li><li>     rsync. </li><li>   Lua,     Lua. </li><li>      . </li><li>  . </li></ul><br><p>  Cons: </p><br><ul><li>  .   Web-   . </li></ul><br><h3 id="box-backuphttpswwwboxbackuporg"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Box Backup</a> </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/4e/o-/ta/4eo-taslxisuzzofmwhmmjtjxmk.png"></a> </p><br><p>       . <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  </a> . </p><br><p>   : </p><br><ul><li>                 ,  . </li><li>  ,  TLS,   ,     SSL . </li><li>    ,   "" ,    . </li><li>      . </li><li> ,   :   ,   . </li><li>      ,    . </li><li>  . </li><li>      :     . </li><li>      RAID. </li><li>  *nix-like , Windows native, Windows cygwin. </li><li>   GUI. </li></ul><br><p>  Cons: </p><br><ul><li>     ,    UID.       ,    . </li><li>  Web-. </li></ul></div></div><br><p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UrBackup</a> . <br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  </a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . </p><br><p>           . </p><br><h3 id="nastroyka-servera-urbackup">   UrBackup </h3><br><p>        ,   : </p><br><pre> <code class="plaintext hljs"># zfs create -o com.sun:auto-snapshot=false -p tank0/apps/backup # zfs set compression=on tank0/apps/backup</code> </pre> <br><p>   ,     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  UrBackup  ZFS </a> . </p><br><p>   ,            : </p><br><pre> <code class="plaintext hljs"># zfs set dedup=on tank0/apps/backup</code> </pre> <br><p>     UrBackup  : </p><br><pre> <code class="plaintext hljs"># mkdir /tank0/docker/services/urbackup # cd /tank0/docker/services/urbackup # vim docker-compose.yml # docker-compose up -d</code> </pre> <br><p>   docker-compose  . <br>     Web-      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> . </p><br><div class="spoiler">  <b class="spoiler_title">docker-compose.yml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">version: '2' networks: docker0: external: name: docker0 services: urbackup: uroni/urbackup-server image: restart: always expose: - 55414 ports: # - 55413:55413 - 55415:55415 - 35623:35623/udp volumes: - /tank0/apps/backup/urbackup/database:/var/urbackup - /tank0/apps/backup/urbackup/backups:/backups - /tank0/apps/backup/urbackup/log:/var/log - /etc/localtime:/etc/localtime:ro networks: - docker0 environment: - VIRTUAL_HOST=backup.* - VIRTUAL_PORT=55414 - VIRTUAL_PROTO=http - CERT_NAME=NAS.cloudns.cc - TZ=Europe/Moscow</code> </pre> </div></div><br><p>  Docker  <code>uroni/urbackup-server</code>  ,      <code>tristanteu/urbackup-docker</code> . <br>       . </p><br><p> ,      : </p><br><ol><li>  .           UrBackup  LDAP . </li><li>    LDAP.  LDAP  .  "   ".  ,      . </li><li>   . </li><li>       ,  .   .     .  ,       NAS,     . </li><li>  -. </li></ol><br><p>   : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/03/xx/3d/03xx3dgvb6xtswdsfejbdakwwkg.png"></a> </p><br><p>  : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/um/0u/1h/um0u1h_i9ikrjhpgt-ppfyjubzs.png" alt="Menambahkan Admin"></a> </p><br><p> LDAP    ,     :     ,         . </p><br><p>      : </p><br><pre> <code class="bash hljs">ou=users,dc=nas,dc=nas?memberOf,objectClass?sub?(&amp;(memberOf=cn=users_backup,ou=groups,dc=nas,dc=nas)(uid={USERNAME}))</code> </pre> <br><p>   - ,    . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/az/wb/0q/azwb0qxoafmccqrzs1iyrchpi2q.png" alt="Penyiapan LDAP"></a> </p><br><p>     ,      ,       . <br>       ,     : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/xi/cx/vn/xicxvnphcifc4z8ocwwrem8hqei.png"></a> </p><br><p>  -: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/sp/vk/uc/spvkuc8fxj9-vxldm4k9qmb7c6o.png"></a> </p><br><p>  ,     ,        . </p><br><p> ,  UrBackup: </p><br><ul><li>  TCP 55415 â€”   . </li><li>  TCP 55414 â€” Web-  HTTP. </li><li>  TCP 55413 â€” Web-  FastCGI,        Web-.  Karena    NAS  HTTP/HTTPS,    . </li><li>  TCP 35621 â€”           . </li><li>  UDP 35622 â€”       .        .      . </li><li>  TCP 35623 â€”              . </li><li>  UDP 35623 â€”    . </li></ul><br><p> ,  55415    ,   35621, 35622, 35623         . </p><br><h3 id="ustanovka-agenta">   </h3><br><p>            ,      . </p><br><p>     : </p><br><ul><li>   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>  shell . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  GUI</a> ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Docker-</a> . </li></ul><br><p>   UrBackup , ..      ,            : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/-k/e3/k4/-ke3k4w2aornwpmehottv2shgxk.png" alt="Halaman Unduhan Agen"></a> </p><br><p>      . </p><br><p>     shell : </p><br><pre> <code class="bash hljs">TF=`mktemp` &amp;&amp; wget <span class="hljs-string"><span class="hljs-string">"https://NAS.system.cloudns.cc/x?a=download_client&amp;lang=ru&amp;clientid=1&amp;authkey=KEY&amp;os=linux"</span></span> -O <span class="hljs-variable"><span class="hljs-variable">$TF</span></span> &amp;&amp; sh <span class="hljs-variable"><span class="hljs-variable">$TF</span></span>; rm <span class="hljs-variable"><span class="hljs-variable">$TF</span></span></code> </pre> <br><p>         : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># urbackupclientctl status { "capability_bits": 65548, "finished_processes": [], "internet_connected": true, "internet_status": "connected", "last_backup_time": 0, "running_processes": [], "servers": [], "time_since_last_lan_connection": 152446032 }</span></span></code> </pre> <br><p>    NAS     ,   : </p><br><ul><li>  : <code>/etc;/home;/var;/root;/tank0/apps;/tank0/docker</code> . </li><li> : <code>/tank0/apps/backup;/tank1/apps/backup;/tank0/apps/cloud/nextcloud/html/data</code> . </li></ul><br><p>       ,   ,  ,    ,  ,     . </p><br><p>  ,     ,  , "  ",  ,   : </p><br><p> <a href=""><img src="https://habrastorage.org/webt/qr/np/ts/qrnptsrut7fv4rumu7rde8fwypm.png"></a> </p><br><p>       : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend status â— urbackupclientbackend.service - UrBackup Client backend Loaded: loaded (/lib/systemd/system/urbackupclientbackend.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2019-09-30 21:55:53 MSK; 37min ago Main PID: 1694 (urbackupclientb) Tasks: 14 (limit: 4915) Memory: 13.4G CGroup: /system.slice/urbackupclientbackend.service â””â”€1694 /usr/local/sbin/urbackupclientbackend --config /etc/default/urbackupclient --no-consoletime  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/   .djvu"  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/  .doc"  30 22:33:48 host urbackupclientbackend[1694]: Hashing file "/home/artiom/Docs/Books/-.fb2"</span></span></code> </pre> <br><h3 id="problemy">  Masalahnya </h3><br><p>  , UrBackup       ,   .     . <br>    â€”    -,    . </p><br><div class="spoiler"> <b class="spoiler_title">    ...</b> <div class="spoiler_text"><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend status â— urbackupclientbackend.service - UrBackup Client backend Loaded: loaded (/lib/systemd/system/urbackupclientbackend.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2019-09-30 20:36:54 MSK; 9s ago Main PID: 27034 (urbackupclientb) Tasks: 10 (limit: 4915) Memory: 6.1M CGroup: /system.slice/urbackupclientbackend.service â””â”€27034 /usr/local/sbin/urbackupclientbackend --config /etc/default/urbackupclient --no-consoletime  30 20:36:54 host urbackupclientbackend[27034]: urbackupserver: Server started up successfully!  30 20:36:54 host urbackupclientbackend[27034]: FileSrv: Server started up successfully  30 20:36:54 host urbackupclientbackend[27034]: Started UrBackupClient Backend...  30 20:36:55 host urbackupclientbackend[27034]: Looking for old Sessions... 2 sessions  30 20:36:56 host urbackupclientbackend[27034]: Trying to connect to internet server "NAS.system.cloudns.cc" at port 55415  30 20:36:56 host urbackupclientbackend[27034]: Successfully connected.  30 20:36:56 host urbackupclientbackend[27034]: ERROR: Internet server auth failed. Error: Auth failed (Authkey/password wrong)  30 20:36:56 host urbackupclientbackend[27034]: InternetClient: Had an auth error  30 20:36:56 host urbackupclientbackend[27034]: ERROR: Internet server auth failed. Error: Auth failed (Authkey/password wrong)  30 20:36:56 host urbackupclientbackend[27034]: InternetClient: Had an auth error</span></span></code> </pre> </div></div><br><p>     : </p><br><pre> <code class="bash hljs">ERROR: Internet mode not enabled. Please <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"internet_mode_enabled"</span></span> to <span class="hljs-string"><span class="hljs-string">"true"</span></span>.</code> </pre> <br><p>             . </p><br><p>        : </p><br><pre> <code class="bash hljs">~<span class="hljs-comment"><span class="hljs-comment"># service urbackupclientbackend stop ~# rm -rf /usr/local/var/urbackup/</span></span></code> </pre> <br><p>      <code>/etc/default/urbackupclient</code> ,     . </p><br><p>          ,     <code>/usr/local/var/urbackup/data/settings.cfg</code> . </p><br><p>   ,    ,     : </p><br><pre> <code class="plaintext hljs">internet_server=NAS.system.cloudns.cc internet_server_port=55415 internet_authkey=44R3MUIdB computername=zenbook internet_mode_enabled=true</code> </pre> <br><p>   ,   ,     -. <br>  ,     ,   ,      . </p><br><h3 id="zapusk-polnogo-rezervnogo-kopirovaniya-posle-obnovleniya">       </h3><br><p>  Debian,    ,       <code>/etc/apt/apt.conf.d/80full-backup</code> : </p><br><pre> <code class="python hljs">DPkg::Post-Invoke {<span class="hljs-string"><span class="hljs-string">"test -x /usr/local/bin/urbackupclientctl &amp;&amp; /usr/local/bin/urbackupclientctl start -f || true"</span></span>; };</code> </pre> <br><h3 id="rezervnaya-kopiya-routera">    </h3><br><p>    NAS,    .  ,         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mtbackup</a>  SSH,    NAS. <br>    Python    ,   ,    ,    UrBakup,   . </p><br><h3 id="proverka-vosstanovleniya">   </h3><br><p>   : </p><br><ul><li> . </li><li> . </li></ul><br><p> ,     :         .  ,    . </p><br><p>    ,   : </p><br><ul><li>    . </li><li>    ,   . </li><li>    . </li><li>  ,   ,   . </li><li>    . </li><li>   . </li><li>   ,   . </li></ul><br><p>   ,   - ,     . </p><br><h2 id="oblachnye-servisy-dlya-rezervirovaniya">     </h2><br><p><img src="https://habrastorage.org/webt/ms/no/j4/msnoj4lqhhfm-keodwyhhdoaudm.jpeg"></p><br><p>       . <br>      ,        ,          . <br>       -  ,     ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Storj</a> . </p><br><h2 id="literatura">  Sastra </h2><br><p>     ,       ,     : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">    debian-russian</a> .   ,  "  rsync?". </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">" "</a> . </li><li> " 3-2-1" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  Veeam</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   </a> . </li><li>  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  </a> ,    . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   Veeam</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://web.archive.org/web/20181201152034/">"    "</a>  ,  ,   . </li><li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">" :     "</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">    </a> ,          . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">    </a> . </li></ul><br><p> ,     : </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">W. Curtis Preston â€” "Backup &amp; Recovery" â€” 2000</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> .. â€”     </a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> . â€” Backup  "" â€” 2014</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Steven Nelson â€” Pro Data Backup and Recovery â€” 2011</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dorian Cougias â€” The Backup Book: Disaster Recovery from Desktop to Data Center, 3 edition â€” 2003</a> . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>      (2017 )  . </li></ul><br><p>      . </p><br><p>       ,          RTO, RPA, RPO. ,    ,         ,      . </p><br><p> -      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   NAS</a> , , ,   . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421251/">https://habr.com/ru/post/id421251/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421241/index.html">Bank Sentral meminta pemblokiran awal situs-situs jahat</a></li>
<li><a href="../id421243/index.html">LLTR Bagian 2: Algoritma untuk menentukan topologi jaringan dari statistik yang dikumpulkan</a></li>
<li><a href="../id421245/index.html">C #: satu kasus penggunaan untuk tugas apa pun</a></li>
<li><a href="../id421247/index.html">Bagaimana mengubah gambar menjadi suara, dan mengapa Anda membutuhkannya</a></li>
<li><a href="../id421249/index.html">Mengapa pemodal Wall Street bekerja terlalu banyak dan dapatkah diperbaiki</a></li>
<li><a href="../id421253/index.html">Mengapa kita perlu mobil berekor?</a></li>
<li><a href="../id421255/index.html">Elon Musk membatalkan rencana untuk mengubah Tesla menjadi perusahaan swasta</a></li>
<li><a href="../id421257/index.html">Bagaimana jaringan peretas internasional menghasilkan $ 100 juta dari mencuri rilis pers</a></li>
<li><a href="../id421259/index.html">Jika Anda mempertimbangkan untuk mulai menulis di Go, inilah yang harus Anda ketahui</a></li>
<li><a href="../id421261/index.html">Efek acrasia: mengapa kita tidak memenuhi rencana kita, dan apa yang harus dilakukan tentang itu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>