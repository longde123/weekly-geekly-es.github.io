<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👟 👨‍👩‍👧‍👦 🕗 Sebuah pintu yang menyapa kita dengan nama dan hanya terbuka untuk karyawan departemen 😴 🔙 👨🏻‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kami memiliki beberapa hari di antara proyek-proyek besar, dan kami memutuskan untuk mengejek pintu kepala unit. Hanya untuk bersenang-senang. Karena ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sebuah pintu yang menyapa kita dengan nama dan hanya terbuka untuk karyawan departemen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/technoserv/blog/416179/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ed/o1/ic/edo1icwv2pvgxsdtgn8g65lbrtm.png"></div><br>  Kami memiliki beberapa hari di antara proyek-proyek besar, dan kami memutuskan untuk mengejek pintu kepala unit.  Hanya untuk bersenang-senang.  Karena drone sudah mengenali kita di wajah kita - apa yang membuat pintu lebih buruk? <br><br>  Pada saat dimulainya proyek TI, kami sudah memiliki panel patch yang dicetak pada printer 3D.  Dalam dua hari, kami membuat prototipe perangkat dari besi, perpustakaan siap pakai, dan beberapa ibu, yang memperhitungkan karyawan akun atau memungkinkan kami memverifikasi bahwa seseorang melewati pintu putar melalui karyanya. <br><br>  Tidak ada uang  Kami hanya menggunakan sumber terbuka. <br><br>  Anda dapat mengulangi ini dalam 15-20 menit dengan skrip kami. <br><a name="habracut"></a><br><h3>  Gagasan dan pendekatan implementasi </h3><br>  Semuanya dimulai dengan kediaman musim panas, di mana kami beristirahat setelah selesainya satu proyek besar.  Ada saat-saat ketika sangat sulit untuk mencapai gerbang dengan kunci.  Dalam arti bahwa kami segera berpikir bahwa mengeluarkan tangan dari kantong kami di musim dingin adalah buruk, yah, kami membuat banyak aplikasi lain, hingga memeriksa kartu staf dan identitas. <br><br>  Sebenarnya, kami ingin membuat koridor dengan sinar laser, seperti dalam film Resident Evil, tetapi kami tidak punya waktu.  Secara umum, saya ingin efek interaksi dengan sistem sehingga juga merespons dengan suara. <br><br>  Karena kami menginginkan prototipe, berikut ini adalah orientasi maksimum pada fungsi dan hasil yang cepat sehingga merusak penampilan, dimensi, dan arsitektur yang indah.  Ternyata menakutkan, tetapi dengan cepat dan berhasil. <br><br>  Pertama, kami memecah kontrol pintu menjadi modul dan masing-masing mulai menulis sendiri.  Modul pengakuan pada hari pertama adalah eksternal dari layanan web mitra, masih ada mesin jaringan saraf internal lama kami dari proyek lain, ditambah ada solusi open source.  Akibatnya, ia memenangkan open source: mesin kami sendiri membutuhkan refactoring dan pembaruan (ini butuh waktu lama), sumber daya web mitra menginginkan uang dan tidak membiarkannya masuk, tetapi open source adalah open source. <br><br><h3>  Elektronik dan perumahan </h3><br>  Awalnya, mereka mempertimbangkan opsi untuk hanya membeli kunci yang dikontrol secara elektronik dan menggantinya dengan kunci pintu internal standar.  Tetapi karena kehadiran kaca dengan daun jendela di pintu, kunci internal luar biasa sempit dan tidak ada penggantian elektronik di pasaran.  Oleh karena itu, insinyur kami mencetak gembok yang dapat dilepas, menyediakan wadah untuk unit kontrol dan unit pembuka kunci di dalamnya. <br><br>  Jadi, proyek bangunan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1x/cb/d_/1xcbd_x-yxkodnnkdrskk4dyita.png"></div><br>  Kami mencetaknya dari model yang telah kami lakukan sendiri sebelum proyek (pemodelan dan pemasangan membutuhkan lebih banyak waktu daripada menulis kode): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tu/lu/71/tulu71ia70l0vpvzupe3wvdlg1m.png"></div><br>  Desain case dibuat dalam Compass-3D.  Alhasil, Dima membuat 3 versi kasing, asalkan ia bisa memilih susunan elemen dan pengencang yang optimal. <br><br>  Di dalam kotak kunci, motor MG-995 dengan kekuatan 10 kg (gaya engkol sebenarnya adalah 5-7 kg), sepasang sensor inframerah untuk mengontrol otomatisasi di pintu masuk dan keluar, mikrokontroler Esp8266 dengan modul Wi-Fi dan server web yang, untuk kesederhanaan, menerima perintah kontrol untuk membuka dan menutup pintu melalui http.  Pengontrol yang sama memutar persneling kunci. <br><br>  Bagian perangkat lunak mikrokontroler ditulis dalam C. <br><br>  Tenggelam dalam perincian pembuatan kasing dan isiannya, kami tanpa sadar memikirkan kerumitan benda yang tampaknya sederhana. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xx/ry/fu/xxryfuofqvcxbbrczhlqsbnysvy.png"></div><br>  Total: unit kontrol kunci dapat menerima perintah pembuka melalui Wi-Fi. <br><br><h3>  Bagian Pengenalan Wajah </h3><br>  Kita membutuhkan unit pengenal wajah yang akan mengirim perintah "terbuka" ke kastil jika perlu dibuka.  Karena arsitektur modular, ini dapat bekerja pada server mini di rumah pintar atau menjadi layanan web di Internet.  Kami juga membutuhkan titik Wi-Fi di jaringan lokal dengan unit kontrol kunci: itu adalah thin client atau server rumah.  Kami menyebarkan server secara langsung pada laptop lama, yaitu, kami menggabungkan server dan thin client.  Mereka menghubungkan kamera ke laptop melalui USB. <br>  Untuk pengakuan itu sendiri, kami berhenti di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengenalan wajah perpustakaan Python di</a> bawah lisensi terbuka dari Massachusetts University of Technology. <br><br>  Beberapa foto dari masing-masing peserta proyek diunggah ke model - di depan, di profil dan di alam.  Secara teori, semakin banyak foto yang Anda unggah ke model, semakin tinggi akurasinya, tetapi dalam kebanyakan kasus ada cukup avatar dari Facebook atau gambar dari database eychars. <br><br>  Kami menggunakan infrastruktur sebagai layanan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Technoserv Cloud kami</a> dan dengan cepat melakukan debug.  Menyebarkan mesin virtual baru dengan semua layanan membutuhkan waktu 20 menit.  Kemudian mereka mengunggah semua kode dengan perpustakaan ke laptop yang berfungsi untuk pekerjaan otonom. <br><br>  Sistem memilih wajah terbesar dalam bingkai dan mengenalinya 2 kali dengan frekuensi 0,5 detik. <br><br>  Kamera web keluar dari kotak hal-hal yang terlupakan dari tahun 90-an.  Apa yang sudah, tapi itu sudah cukup. <br><br>  Total waktu pengenalan adalah lebih dari tiga detik.  Ini karena laptop sudah sangat tua dan tidak memiliki kartu video.  Dengan vidyuha dan kecepatan pengenalan web-kamera yang cepat akan meningkat secara signifikan. <br><br>  Mereka segera menulis konektor untuk pengenalan suara, karena hanya wajah yang agak tidak dapat diandalkan (lebih lanjut tentang ini nanti), dua faktor diperlukan. <br><br>  Butuh 6 jam untuk prototipe yang kurang lebih debugged setelah memilih perpustakaan. <br><br>  Kami juga menghubungkan speaker bluetooth ke laptop sehingga dia bisa berbicara.  Laptop itu sendiri disembunyikan di lemari dengan surat ucapan terima kasih, seperti perangkat tertanam. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c6/qh/jz/c6qhjzieovfchmsdp70qqq0rogg.png"></div><br><h3>  Tes </h3><br>  Deskripsi perpustakaan mengatakan: “Dibangun menggunakan pengenalan wajah canggih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.google.com/url%3Fq%3Dhttps://www.google.com/url%3Fq%253D">dlib yang</a> dibangun dengan pembelajaran yang mendalam.  "Model ini memiliki akurasi 99,38% pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.google.com/url%3Fq%3Dhttps://www.google.com/url%3Fq%253D">label berlabel di</a> benchmark <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.google.com/url%3Fq%3Dhttps://www.google.com/url%3Fq%253D">Wild</a> ."  Secara alami, tidak ada 99,38%, tetapi jauh lebih sedikit.  Karena Anda perlu memuat foto normal (dan banyak lagi), atur kamera normal dan samakan lampu.  Tetapi karena, saat Anda menggali di pintu, ia berhasil membuat 4-5 bingkai, biasanya terbuka hampir seketika. <br><br>  Kesalahan: beberapa kali pintu menjadi bingung dan tidak membiarkan kami segera pergi.  Orang asing dari departemen lain tidak bisa masuk. <br><br>  Anda dapat membuat wajah di pintu, dia mengerti segalanya dan terbuka. <br><br>  Menurut foto karyawan itu, tentu saja, itu terbuka.  Kami menambahkan modul pengenalan orang secara keseluruhan di versi berikutnya (di luar beberapa hari ini), dan modul itu mulai terbuka hanya untuk bust. <br><br>  Kemudian mereka memutar tes untuk warna (perpustakaan downsamplit dan mengambil gambar hitam dan putih ke dalam pemrosesan), gerakan wajah dan berkedip - Anda perlu kamera yang lebih baik untuk melihat seseorang ketika dia masih sehat, dan semuanya akan menjadi. <br><br>  Artinya, sebagai pengganti kunci, tentu saja tidak, karena faktor kedua diperlukan - misalnya, suara.  Tetapi cocok untuk pintu tidak kritis.  Untuk memperhitungkan karyawan yang lewat di pintu juga.  Untuk memeriksa apakah seorang karyawan cocok dengan pass di pos pemeriksaan juga.  Anda juga dapat mengenali anjing yang kembali ke rumah di dekat pintu.  Jika Anda ingat sejarah pengenalan pola, maka salah satu aplikasi industri pertama adalah bahwa pengembang Amerika mendapat kucing tetangga, omong kosong di halaman.  Dia membuat pengakuan kucing di semi-squat dan menghubungkan sistem irigasi ke mini-server-nya.  Setelah beberapa hari, kucing itu menyadari bahwa lebih baik tidak omong kosong.  Tidak pernah.  Tidak ada tempat <br><br>  Kasingnya ternyata futuristik dan besar, dalam versi komersial tidak boleh ada apa-apa di pintu, kecuali untuk kamera dengan mikrofon dan layar kecil dengan asisten visual dan audio. <br><br><h3>  Ulangi di rumah </h3><br>  Tautan ke perpustakaan di atas. <br><br><div class="spoiler">  <b class="spoiler_title">Lakukan sekali</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xt/2p/go/xt2pgow5lznclmhrqzugk78flzk.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Skripnya ada di sini</a> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Lakukan dua</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#/usr/bin/env python """      : """ import os import face_recognition import cv2 import random from pygame import mixer import requests import datetime import time known_faces = [ 'Emp1' , 'Emp2' , 'Emp3' ] faces_folder = 'faces' welcome_folder = 'welcome' known_faces_encodings = [face_recognition.face_encodings(face_recognition.load_image_file(os.path.join(faces_folder, i +".jpg")))[0] for i in known_faces] def init_recognition(): pass def face_detection(face_encodings): name = "Unknown" for face_encoding in face_encodings: matches = face_recognition.compare_faces(known_faces_encodings, face_encoding) if True in matches: first_match_index = matches.index(True) name = known_faces[first_match_index] return name def unlock(): unlock_url = 'http://192.168.4.1/yes' unlock_req = requests.get(unlock_url) #return unlock_req.status_code def lock(): lock_url = 'http://192.168.4.1/no' lock_req = requests.get(lock_url) #return lock_req.status_code def welcome(type): messages = { 'hello': [os.path.join(welcome_folder, file) for file in ['hello_01.wav', 'hello_02.wav', 'hello_03.wav', 'hello_04.wav', 'hello_05.wav']], 'welcome': [os.path.join(welcome_folder, file) for file in ['welcome_01.wav', 'welcome_02.wav', 'welcome_03.wav']], 'unwelcome': [os.path.join(welcome_folder, file) for file in ['unwelcome_01.mp3', 'unwelcome_02.mp3', 'unwelcome_03.wav', 'unwelcome_04.wav', 'unwelcome_05.wav']], 'whoareyou': [os.path.join(welcome_folder, file) for file in ['whoareyou_01.wav', 'whoareyou_02.wav', 'whoareyou_03.wav', 'whoareyou_04.wav']] } mixer.init() mixer.music.load(random.choice(messages[type])) mixer.music.play() def main(): current = datetime.datetime.now() vc = cv2.VideoCapture(0) if vc.isOpened(): is_capturing = vc.read()[0] else: is_capturing = False user_counter = 0 while is_capturing: is_capturing, frame = vc.read() small_frame = cv2.resize(frame, (0, 0), fx=0.25, fy=0.25) rgb_small_frame = small_frame[:, :, ::-1] face_locations = face_recognition.face_locations(rgb_small_frame) face_encodings = face_recognition.face_encodings(rgb_small_frame, face_locations) if len(face_encodings) &gt; 0: user_counter += 1 if user_counter &gt; 6: welcome('hello') print('hello') time.sleep(2) user = face_detection(face_encodings) timing = datetime.datetime.now() - current if timing.seconds &gt; 4: if user in ['Emp3']: welcome('unwelcome') print('go home, ' + user) lock() elif user in known_faces: welcome('welcome') print('welcome, ' + user) unlock() else: welcome('whoareyou') print('who is there?') current = datetime.datetime.now() user_counter = 0 time.sleep(0.5) if __name__ == '__main__': main()</span></span></code> </pre> <br></div></div><br>  Dalam skrip itu sendiri, nama-nama karyawan (Emp1, Emp2) sesuai dengan file dengan foto mereka di direktori, Anda perlu menambahkan sendiri.  Resolusi tidak masalah, Anda setidaknya dapat 640x480.  Ada dua kategori karyawan - yang ditargetkan, siapa yang dilewati, dan mereka yang segera mengirim pulang. <br><br>  Sebagai kamera, kami menggunakan webcam logitech paling sederhana.  Alih-alih laptop, sangat mungkin untuk menggunakan mikrokontroler, tetapi Anda perlu memahami cara menempatkan python dan perpustakaan yang dipilih di atasnya. <br><br><h3>  Hasil </h3><br>  Teknologi itu dirasakan oleh penjual departemen tetangga yang bekerja bersama kami di lantai yang sama.  Kotak kunci yang dilapis terlihat sangat keren, dan dengan bunyi apa itu membuka pintu!  Jangan percaya, tapi promosi internal teknologi sama pentingnya dengan promosi eksternal. <br><br>  Kami ditanya beberapa kali mengapa kami melakukan ini setelah jam. <br><br>  Jawabannya adalah karena saya benar-benar ingin menghibur teman-teman kami sehingga mereka merasakan teknologi yang kami gunakan pada perangkat yang berfungsi.  Karena ini adalah prototipe pada perangkat keras dan perangkat lunak segera dan itu adalah sesi pelatihan kecil sebelum proyek yang lebih besar.  Tidak mungkin prototipe itu sendiri akan digunakan di suatu tempat, tetapi ia memiliki fungsi dan moralitas pendidikan. <br><br>  Kami memastikan seberapa cepat prototipe industri dapat dibuat.  Kami biasanya melakukan proyek percontohan cepat (2-3 minggu) untuk produksi.  Ngomong-ngomong, jika menarik untuk cepat menghitung sesuatu dalam hal otomatisasi dan membuat pilot - ini hanya spesialisasi tim kami.  <a href="">Email tmishin@technoserv.com</a> jika itu. <br><br>  Terasa seperti setelah hackathon yang baik. <br><br>  Dan sekarang kita punya mainan. <br><br>  Seorang rekan datang berlari kemarin dan menunjukkan video <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">drone dengan penyembur api</a> .  Kami tampaknya memiliki beberapa ide ... <br><br>  Saya juga mengatakan semua ini pada kenyataan bahwa secara harfiah 3-4 tahun yang lalu sangat mahal dan lama untuk menulis detektor industri untuk pengawasan video.  Untuk mengontrol ukuran fraksi material pada sabuk konveyor, untuk berhenti jika ada benda asing, untuk mematikan ketika bekerja di zona bahaya dan sebagainya.  Hari ini sedang dilakukan sangat, sangat cepat.  Dan jauh lebih murah.  Tidak secepat pintu, tetapi seorang pilot dalam 2 minggu adalah perkiraan yang sangat realistis. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id416179/">https://habr.com/ru/post/id416179/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id416167/index.html">Peter Norwig: Belajar Pemrograman dalam ... 10 Tahun</a></li>
<li><a href="../id416169/index.html">Kontainer Dewasa (Bagian 01): Panduan Praktis untuk Terminologi</a></li>
<li><a href="../id416171/index.html">Visual Studio Coded UI Tests: teori dan praktik aplikasi di perusahaan kami</a></li>
<li><a href="../id416175/index.html">Hasil kompetisi pengembang muda aplikasi AR Epson Moverio BT-300</a></li>
<li><a href="../id416177/index.html">Rumus Tupper dan implementasi algoritma dalam Python</a></li>
<li><a href="../id416181/index.html">Modulasi Amplitudo pada Jari</a></li>
<li><a href="../id416183/index.html">Pengujian Data: Persyaratan dan Level</a></li>
<li><a href="../id416187/index.html">Mengikuti pertemuan "PostgreSQL 11 Fitur Baru" (Bagian 2)</a></li>
<li><a href="../id416189/index.html">Perawatan Scrum "mekanis". Bagian 3. Pekerjaan SM</a></li>
<li><a href="../id416191/index.html">Implementasi tingkat rendah dari trif prefix tree di PHP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>