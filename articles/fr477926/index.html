<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßõüèº üßùüèæ üôáüèø Comment r√©duire l'utilisation de la m√©moire et acc√©l√©rer le code Python √† l'aide de g√©n√©rateurs üßùüèø ‚è´ üÜô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. Aujourd'hui, nous voulons partager une traduction utile, pr√©par√©e avant le lancement du cours "D√©veloppeur Web en Python" . L'√©criture...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment r√©duire l'utilisation de la m√©moire et acc√©l√©rer le code Python √† l'aide de g√©n√©rateurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/477926/"><p>  Bonjour √† tous.  Aujourd'hui, nous voulons partager une traduction utile, pr√©par√©e avant le lancement du cours <a href="https://otus.pw/m8hh/">"D√©veloppeur Web en Python"</a> .  L'√©criture de code efficace en temps et en m√©moire en Python est particuli√®rement importante lors de la cr√©ation d'une application Web, d'un mod√®le d'apprentissage automatique ou de tests. </p><br><p><img src="https://habrastorage.org/webt/ii/2f/-o/ii2f-oqb0scheybgzq7yavjz1ue.png"></p><a name="habracut"></a><br><p>  Quand j'ai commenc√© √† apprendre les g√©n√©rateurs en Python, je ne savais pas √† quel point ils √©taient importants.  Cependant, ils m'ont constamment aid√© √† √©crire des fonctions tout au long de mon parcours √† travers l'apprentissage automatique. </p><br><p>  Les fonctions de g√©n√©rateur vous permettent de d√©clarer une fonction qui se comportera comme un it√©rateur.  Ils permettent aux programmeurs de cr√©er des it√©rateurs rapides, simples et propres.  Un it√©rateur est un objet qui peut √™tre r√©p√©t√© (boucl√©).  Il est utilis√© pour abstraire le conteneur de donn√©es et le faire se comporter comme un objet it√©rable.  Par exemple, un exemple d'objet it√©rable peut √™tre des cha√Ænes, des listes et des dictionnaires. </p><br><p>  Le g√©n√©rateur ressemble √† une fonction, mais utilise le mot-cl√© yield au lieu de return.  Regardons un exemple pour le rendre plus clair. </p><br><pre><code class="plaintext hljs">def generate_numbers(): n = 0 while n &lt; 3: yield n n += 1</code> </pre> <br><p>  Il s'agit d'une fonction de g√©n√©rateur.  Lorsque vous l'appelez, il renvoie un objet g√©n√©rateur. </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; numbers = generate_numbers() &gt;&gt;&gt; type(numbers) &lt;class 'generator'&gt;</code> </pre> <br><p>  Il est important de faire attention √† la fa√ßon dont l'√©tat est encapsul√© dans le corps de la fonction de g√©n√©rateur.  Vous pouvez parcourir une √† la fois en utilisant la fonction int√©gr√©e next (): </p><br><pre> <code class="plaintext hljs">&gt;&gt;&gt; next_number = generate_numbers() &gt;&gt;&gt; next(next_number) 0 &gt;&gt;&gt; next(next_number) 1 &gt;&gt;&gt; next(next_number) 2</code> </pre> <br><h2 id="chto-proizoydet-esli-vy-vyzovete-next-posle-okonchaniya-vypolneniya">  Que se passe-t-il si vous appelez next () apr√®s la fin de l'ex√©cution? </h2><br><p>  StopIteration est un type d'exception int√©gr√© qui se produit automatiquement d√®s que le g√©n√©rateur cesse de renvoyer un r√©sultat.  Il s'agit d'un signal d'arr√™t pour la boucle for. </p><br><h2 id="operator-yield">  D√©claration de rendement </h2><br><p>  Sa t√¢che principale est de contr√¥ler le flux de la fonction de g√©n√©rateur afin qu'elle ressemble √† une instruction de retour.  Lorsqu'une fonction de g√©n√©rateur est appel√©e ou qu'une expression de g√©n√©rateur est utilis√©e, elle renvoie un it√©rateur sp√©cial appel√© g√©n√©rateur.  Pour utiliser un g√©n√©rateur, affectez-le √† une variable.  Lors de l'appel de m√©thodes sp√©ciales dans le g√©n√©rateur, comme next (), le code de fonction sera ex√©cut√© jusqu'√† ce que yield. </p><br><p>  Lorsqu'il entre dans l'instruction yield, le programme interrompt la fonction et renvoie la valeur √† l'objet qui a lanc√© l'ex√©cution.  (Alors que return arr√™te compl√®tement l'ex√©cution de la fonction.) Lorsque la fonction est suspendue, son √©tat est conserv√©. </p><br><p>  Maintenant que nous connaissons les g√©n√©rateurs en Python, comparons l'approche habituelle avec l'approche qui utilise des g√©n√©rateurs en termes de m√©moire et de temps consacr√© √† l'ex√©cution de code. </p><br><h2 id="postanovka-problemy">  √ânonc√© du probl√®me </h2><br><p>  Supposons que nous devons parcourir une grande liste de nombres (par exemple, 1 000 000 000) et enregistrer les carr√©s de tous les nombres qui doivent √™tre stock√©s s√©par√©ment dans une autre liste. </p><br><h2 id="obychnyy-podhod">  Approche habituelle </h2><br><pre> <code class="plaintext hljs">import memory_profiler import time def check_even(numbers): even = [] for num in numbers: if num % 2 == 0: even.append(num*num) return even if __name__ == '__main__': m1 = memory_profiler.memory_usage() t1 = time.clock() cubes = check_even(range(100000000)) t2 = time.clock() m2 = memory_profiler.memory_usage() time_diff = t2 - t1 mem_diff = m2[0] - m1[0] print(f"It took {time_diff} Secs and {mem_diff} Mb to execute this method")</code> </pre> <br><p>  Apr√®s avoir ex√©cut√© le code ci-dessus, nous obtenons ce qui suit: </p><br><pre> <code class="plaintext hljs">It took 21.876470000000005 Secs and 1929.703125 Mb to execute this method</code> </pre> <br><p>  Utilisation de g√©n√©rateurs </p><br><pre> <code class="plaintext hljs">import memory_profiler import time def check_even(numbers): for num in numbers: if num % 2 == 0: yield num * num if __name__ == '__main__': m1 = memory_profiler.memory_usage() t1 = time.clock() cubes = check_even(range(100000000)) t2 = time.clock() m2 = memory_profiler.memory_usage() time_diff = t2 - t1 mem_diff = m2[0] - m1[0] print(f"It took {time_diff} Secs and {mem_diff} Mb to execute this method")</code> </pre> <br><p>  Apr√®s avoir ex√©cut√© le code ci-dessus, nous obtenons ce qui suit: </p><br><pre> <code class="plaintext hljs">It took 2.9999999995311555e-05 Secs and 0.02656277 Mb to execute this method</code> </pre> <br><p>  Comme nous pouvons le voir, le temps d'ex√©cution et la m√©moire utilis√©s sont consid√©rablement r√©duits.  Les g√©n√©rateurs fonctionnent selon un principe connu sous le nom de ¬´calcul paresseux¬ª.  Cela signifie qu'ils peuvent √©conomiser le processeur, la m√©moire et d'autres ressources informatiques. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  J'esp√®re que dans cet article, j'ai pu montrer comment les g√©n√©rateurs en Python peuvent √™tre utilis√©s pour √©conomiser des ressources telles que la m√©moire et le temps.  Cet avantage appara√Æt du fait que les g√©n√©rateurs ne stockent pas tous les r√©sultats en m√©moire, mais les calculent √† la vol√©e, et la m√©moire n'est utilis√©e que si nous demandons le r√©sultat des calculs.  Les g√©n√©rateurs vous permettent √©galement d'abstraire une grande quantit√© de code passe-partout, ce qui est n√©cessaire pour √©crire des it√©rateurs, de sorte qu'ils aident √©galement √† r√©duire la quantit√© de code. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr477926/">https://habr.com/ru/post/fr477926/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr477910/index.html">Black Friday 2019 - VDS √† Moscou et Amsterdam, serveurs avec GPU</a></li>
<li><a href="../fr477914/index.html">Projection au plafond: impressions apr√®s une semaine d'utilisation du projecteur, mettre ¬´√† la fin¬ª</a></li>
<li><a href="../fr477916/index.html">Comment les cr√©ateurs de logiciels malveillants tentent d'√©viter sa d√©tection: nous analysons Spy.GmFUToMitm comme exemple</a></li>
<li><a href="../fr477918/index.html">Helpdesk open source comme alternative √† Zendesk et Help Scout. Architecture, conception et convivialit√©</a></li>
<li><a href="../fr477924/index.html">Tutoriel JavaFX: style CSS</a></li>
<li><a href="../fr477928/index.html">Enregistrements des rapports de QA-mitap Redmadrobot</a></li>
<li><a href="../fr477930/index.html">Meilleure architecture pour MVP: monolith, SOA, microservices ou sans serveur? .. Partie 2</a></li>
<li><a href="../fr477934/index.html">R√©ductions des h√©bergeurs sur le Black Friday 2019</a></li>
<li><a href="../fr477936/index.html">Dictionnaire informatique ou quoi? O?? O√π aller? 2e partie</a></li>
<li><a href="../fr477938/index.html">Le march√© des serveurs d'occasion en Russie: tout a commenc√© avec Habr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>