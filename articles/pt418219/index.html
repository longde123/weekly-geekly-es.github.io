<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœŠğŸ¿ ğŸ”« ğŸŒ˜ Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 6: Oportunidades, Parte 2 ğŸ›ŒğŸ½ âœ³ï¸ ğŸ¤¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula nÂº 6.858. "SeguranÃ§a de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 6: Oportunidades, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418219/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula nÂº 6.858.  "SeguranÃ§a de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security Ã© um curso sobre o desenvolvimento e implementaÃ§Ã£o de sistemas de computador seguros.  As palestras abrangem modelos de ameaÃ§as, ataques que comprometem a seguranÃ§a e tÃ©cnicas de seguranÃ§a baseadas em trabalhos cientÃ­ficos recentes.  Os tÃ³picos incluem seguranÃ§a do sistema operacional (SO), recursos, gerenciamento de fluxo de informaÃ§Ãµes, seguranÃ§a de idiomas, protocolos de rede, seguranÃ§a de hardware e seguranÃ§a de aplicativos da web. <br><br>  Palestra 1: â€œIntroduÃ§Ã£o: modelos de ameaÃ§asâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: â€œControle de ataques de hackersâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: â€œEstouros de Buffer: ExploraÃ§Ãµes e ProteÃ§Ã£oâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: â€œSeparaÃ§Ã£o de PrivilÃ©giosâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: â€œDe onde vÃªm os sistemas de seguranÃ§a?â€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: â€œOportunidadesâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  <b>PÃºblico:</b> podemos concluir que cada oportunidade tem um processo? <br><br>  <b>Professor: Eu</b> duvido.  VocÃª pode ter quantos processos quiser, pois uma possibilidade pode existir vÃ¡rios processos.  Simplificando, vocÃª nÃ£o precisa necessariamente de um processo separado para cada oportunidade.  Porque existe um processo <b>fort1</b> que pode abrir muitos arquivos e passar muitos recursos ao componente privilegiado do <b>fort</b> . <br><br><img src="https://habrastorage.org/webt/ba/x4/pr/bax4pr8nb9rufhd5_f24v9imtdi.jpeg"><br><br>  A razÃ£o pela qual vocÃª acha que precisa de um processo separado para cada oportunidade com a qual lidamos diz respeito a essa estranha interaÃ§Ã£o entre recursos e privilÃ©gios externos. <br><br>  Porque <b>fort1</b> tem um privilÃ©gio externo.  E o que estamos fazendo Ã© basicamente transformar esse privilÃ©gio externo em <b>capacidade</b> neste <b>forte</b> processo.  Portanto, se vocÃª tiver vÃ¡rios tipos diferentes de privilÃ©gios externos ou vÃ¡rios privilÃ©gios diferentes que deseja usar com cautela, provavelmente desejarÃ¡ um processo separado que tenha esse privilÃ©gio.  E sempre que desejar usar um conjunto especÃ­fico de privilÃ©gios, vocÃª solicitarÃ¡ o processo apropriado para realizar a separaÃ§Ã£o e, se isso for bem-sucedido, solicitarÃ¡ que o processo devolva o <b>recurso</b> a vocÃª. <br><br>  De fato, havia um design do sistema operacional completamente baseado em recursos e sem privilÃ©gios externos.  E isso Ã© legal, mas nÃ£o muito prÃ¡tico para uso em um sistema real.  Acontece que, na realidade, vocÃª nÃ£o deseja privilÃ©gios externos, mas oportunidades para nomear um objeto e contar a alguÃ©m sobre esse objeto sem transferir os direitos para esse objeto sem falha. <br><br>  Talvez eu nÃ£o saiba quais privilÃ©gios vocÃª pode ter em relaÃ§Ã£o a algum documento geral, mas quero informar que temos esse documento geral.  Se vocÃª pode ler, leia.  Se vocÃª escrever, tudo bem, escreva.  Mas nÃ£o quero transferir nenhum direito a ele.  Eu sÃ³ quero lhe dizer: "Ei, essa coisa, tente!"  Portanto, isso Ã© um inconveniente no mundo das oportunidades, porque realmente obriga a nunca falar sobre objetos sem transferir direitos para esse objeto. <br><br>  Portanto, Ã© importante saber sobre isso e usar esse recurso em algumas partes do sistema, mas nÃ£o confiar nisso para ser a soluÃ§Ã£o para a seguranÃ§a do sistema. <br><br><img src="https://habrastorage.org/webt/iu/v8/sg/iuv8sgqyettpxg1oaf1jcuvs-e8.jpeg"><br><br>  <b>PÃºblico:</b> suponha que o processo possua os recursos atribuÃ­dos a ele por algum outro processo, mas acontece que ele jÃ¡ possui Ã³timos recursos em relaÃ§Ã£o a algum objeto.  Um processo pode comparÃ¡-los para garantir que eles estejam tocando o mesmo objeto?  Ou ele usarÃ¡ as grandes oportunidades? <br><br>  <b>Professor:</b> o fato Ã© que o processo nÃ£o utiliza recursos de maneira implÃ­cita, portanto, essa Ã© uma propriedade muito Ãºtil dos recursos.  VocÃª deve definitivamente indicar qual das opÃ§Ãµes que estÃ¡ usando.  EntÃ£o pense nisso em termos de um descritor de arquivo.  Suponha que eu lhe forneÃ§a um descritor de arquivo aberto para algum arquivo, e ele Ã© somente leitura.  Depois, outra pessoa oferece outra oportunidade para outros arquivos, que podem incluir esse arquivo.  E um novo recurso permite que vocÃª leia e grave em arquivos. <br><br>  Nesse caso, se vocÃª tentar gravar no primeiro arquivo, sem dÃºvida terÃ¡ Ãªxito, porque um descritor de arquivo adicional serÃ¡ aberto para ele, o que permite nÃ£o apenas a leitura, mas tambÃ©m a gravaÃ§Ã£o.  Portanto, isso Ã© uma coisa interessante quando vocÃª nÃ£o precisa de privilÃ©gios externos extras.  VocÃª simplesmente tem todas essas possibilidades, porque as pessoas realmente criaram essas bibliotecas e, em princÃ­pio, elas gerenciam seus recursos para vocÃª.  Eles meio que os colecionam.  E quando tentam executar uma operaÃ§Ã£o, procuram oportunidades e encontram aquelas que a fazem funcionar. <br><br>  Isso retorna ao controle externo da <b>autoridade ambiental</b> que vocÃª estava tentando evitar.  Uma caracterÃ­stica positiva das possibilidades Ã© que Ã© um design de software que simplifica sua vida.  Isso Ã© incomum em soluÃ§Ãµes de seguranÃ§a.  Essa propriedade facilita a gravaÃ§Ã£o de um cÃ³digo que aponta para os privilÃ©gios que vocÃª deseja usar do ponto de vista da seguranÃ§a.  E isso Ã© muito fÃ¡cil de escrever cÃ³digo. <br>  No entanto, o <b>recurso</b> pode resolver outros problemas.  Portanto, problemas de gerenciamento de privilÃ©gios geralmente surgem quando vocÃª precisa executar algum cÃ³digo nÃ£o confiÃ¡vel.  Porque vocÃª realmente deseja controlar quais privilÃ©gios vocÃª concede, caso contrÃ¡rio, existe o risco de uso indevido de todos os privilÃ©gios que vocÃª concede.  E esse Ã© um ponto de vista ligeiramente diferente do qual os autores do artigo sobre <b>Capsicum</b> abordam oportunidades.  Ã‰ claro que eles estÃ£o cientes do problema da autoridade externa, mas esse Ã© um problema ligeiramente diferente que vocÃª pode ou nÃ£o pode resolver.  Mas, basicamente, eles se preocupam com o fato de terem um aplicativo privilegiado muito grande e se preocupam com a ocorrÃªncia de erros em diferentes partes do cÃ³digo-fonte desse aplicativo.  Portanto, eles gostariam de reduzir os privilÃ©gios dos vÃ¡rios componentes deste aplicativo. <br><br>  Nesse sentido, a histÃ³ria Ã© muito semelhante Ã  <b>OKWS</b> .  Portanto, vocÃª tem um aplicativo grande, divide-o em componentes e restringe os privilÃ©gios para cada componente.  Isso certamente faz sentido no <b>OKWS</b> .  Existem outras situaÃ§Ãµes em que vocÃª pode se preocupar em compartilhar privilÃ©gios?  Eu acho que no artigo deles eles descrevem exemplos que eu deveria tentar executar, por exemplo, <b>tcpdump</b> e outros aplicativos que analisam dados de rede.  Por que eles estÃ£o tÃ£o preocupados com aplicativos que analisam entradas de rede?  O que acontece no <b>tcpdump</b> ?  Qual Ã© o motivo de sua paranÃ³ia? <br><br>  <b>PÃºblico:</b> um invasor pode controlar o que Ã© enviado e o que Ã© chamado para executar, por exemplo, pacotes. <br><br>  <b>Professor:</b> sim, eles realmente se preocupam com ataques desse tipo e se o invasor pode realmente controlar os dados de entrada?  Porque Ã© bastante problemÃ¡tico se vocÃª escrever cÃ³digo <b>C</b> que deve lidar com estruturas de dados.  Obviamente, vocÃª farÃ¡ muita manipulaÃ§Ã£o de ponteiros copiando bytes para matrizes que alocam memÃ³ria.  Ao mesmo tempo, Ã© fÃ¡cil cometer um erro no gerenciamento de memÃ³ria, o que levarÃ¡ a consequÃªncias bastante desastrosas. <br><br>  Portanto, essa Ã© a razÃ£o pela qual eles decidiram fazer o trabalho de seu protocolo de rede e outras coisas na sandbox. <br><br><img src="https://habrastorage.org/webt/qe/74/kp/qe74kpxuvojns1ezini63--mv90.jpeg"><br><br>  Outro exemplo do mundo real onde o compartilhamento de privilÃ©gios Ã© necessÃ¡rio Ã© o seu navegador.  VocÃª provavelmente desejarÃ¡ isolar seu plug-in Flash, sua extensÃ£o <b>Java</b> ou qualquer outra coisa.  Porque eles representam um amplo campo para ataques que sÃ£o usados â€‹â€‹de forma bastante agressiva. <br><br>  Portanto, este parece ser um plano inteligente.  Por exemplo, se vocÃª escreve algum software, deseja verificar o comportamento de seus componentes na caixa de areia.  Geralmente, isso se refere ao que vocÃª baixou da Internet e pretende executar com menos privilÃ©gios.  O estilo de isolamento oferecido pela <b>Capsicum combina com isso</b> ?  Eu poderia baixar algum protetor de tela aleatÃ³rio ou algum jogo da Internet.  E eu quero executÃ¡-los no meu computador, mas primeiro verifique se eles nÃ£o estragam tudo o que tenho.  VocÃª usaria <b>Capsicum</b> para isso? <br><br>  <b>PÃºblico:</b> vocÃª pode escrever um programa sandbox no qual usarÃ¡ o <b>Capsicum</b> . <br><br>  <b>Professor:</b> certo.  Como vocÃª o usaria?  Bem, vocÃª entra no modo sandbox com o <b>comando cap_enter</b> e executa o programa.  VocÃª espera que isso funcione?  Eu acho que haverÃ¡ um problema.  Ele estarÃ¡ conectado ao fato de que, se o programa nÃ£o esperar que seja isolado pelo <b>Capsicum</b> , ele poderÃ¡ tentar abrir a biblioteca compartilhada, mas nÃ£o poderÃ¡ fazer isso, porque nÃ£o poderÃ¡ abrir algo como <b>/ lib / ...</b> , porque nÃ£o permitido no modo de <b>capacidade</b> . <br><br>  Portanto, esses mÃ©todos de sandbox devem ser usados â€‹â€‹para as coisas pelas quais o desenvolvedor previu que eles podem ser executados nesse modo.  Provavelmente, existem outros mÃ©todos de sandbox que podem ser usados â€‹â€‹para cÃ³digo nÃ£o modificado, mas os requisitos podem mudar um pouco.  Portanto, os criadores de <b>Capsicum</b> nÃ£o <b>estÃ£o</b> muito preocupados com a compatibilidade com versÃµes anteriores.  Se tivermos que abrir arquivos de maneira diferente, nÃ³s os abriremos de maneira diferente.  Mas se vocÃª quiser deixar o cÃ³digo existente, precisarÃ¡ de algo mais, por exemplo, uma mÃ¡quina virtual completa para poder executar o cÃ³digo nela.  Isso levanta a questÃ£o - devemos usar mÃ¡quinas virtuais para a caixa de proteÃ§Ã£o <b>Capsicum</b> ? <br><br>  <b>PÃºblico:</b> neste caso, a saturaÃ§Ã£o de memÃ³ria Ã© possÃ­vel. <br><br>  <b>Professor:</b> sim, Ã©.  Mas e se nÃ£o nos importarmos com a memÃ³ria?  Portanto, as mÃ¡quinas virtuais provavelmente sÃ£o muito boas e nÃ£o usam muita memÃ³ria.  EntÃ£o, por que outro motivo nÃ£o devemos usar <b>VM</b> no <b>Capsicum</b> ? <br><br>  <b>PÃºblico: Ã‰</b> difÃ­cil controlar a atividade da rede. <br><br>  <b>Professor:</b> Isso mesmo!  Ã‰ difÃ­cil controlar o que estÃ¡ acontecendo na rede porque vocÃª nÃ£o estÃ¡ dando acesso Ã  mÃ¡quina virtual Ã  rede ou estÃ¡ se conectando Ã  rede atravÃ©s do modo <b>NAT</b> ou usando o <b>Preview</b> ou o <b>VMWare</b> .  Mas entÃ£o sua caixa de areia pode acessar toda a Internet.  Portanto, vocÃª precisarÃ¡ gerenciar a rede com mais detalhes, talvez definindo regras de firewall para a mÃ¡quina virtual e assim por diante.  Isso nÃ£o Ã© muito bom. <br><br>  Mas e se vocÃª nÃ£o se importa com a rede?  Suponha que vocÃª tenha algum tipo de vÃ­deo, e se vocÃª processar um vÃ­deo simples ou analisar o <b>tcpdump</b> .  Nesse caso, vocÃª simplesmente inicia a mÃ¡quina virtual, ela comeÃ§a a analisar seus pacotes <b>tcpdump</b> e faz com que vocÃª retorne apÃ³s a apresentaÃ§Ã£o que o <b>tcpdump</b> deseja gravar para o usuÃ¡rio, porque nÃ£o hÃ¡ E / S de rede real.  EntÃ£o, existe algum outro motivo? <br><br><img src="https://habrastorage.org/webt/sy/iu/rs/syiurso7-blsxdvzyhhbwpfia0w.jpeg"><br><br>  <b>PÃºblico:</b> porque a sobrecarga da inicializaÃ§Ã£o ainda Ã© alta. <br><br>  <b>Professor:</b> sim, isso pode ser a sobrecarga inicial de iniciar uma mÃ¡quina virtual, o que reduz o desempenho.  EntÃ£o Ã© verdade. <br><br>  <b>PÃºblico:</b> Bem, vocÃª ainda pode querer ter direitos sobre um banco de dados e similares. <br><br>  <b>Professor:</b> sim.  Mas, de maneira geral, isso significa que vocÃª tem dados reais com os quais estÃ¡ trabalhando e Ã© realmente difÃ­cil separÃ¡-los.  Assim, as mÃ¡quinas virtuais sÃ£o realmente um mecanismo de compartilhamento muito maior, pelo qual vocÃª nÃ£o pode compartilhar coisas facilmente.  Portanto, isso Ã© bom para situaÃ§Ãµes em que vocÃª tem um programa completamente isolado que deseja executar e, ao mesmo tempo, nÃ£o deseja compartilhar arquivos, diretÃ³rios, processos e apenas deixÃ¡-los trabalhar separadamente. <br><br>  EntÃ£o isso Ã© Ã³timo.  Provavelmente, isso Ã©, de alguma forma, um isolamento mais forte do que o fornecido pelo <b>Capsicum</b> , porque hÃ¡ menos opÃ§Ãµes para que as coisas dÃªem errado.  No entanto, esse isolamento nÃ£o Ã© aplicÃ¡vel em muitas situaÃ§Ãµes quando vocÃª deseja usar o <b>Capsicum</b> .  Como no <b>Capsicum,</b> vocÃª pode trocar arquivos com grande precisÃ£o, usando os recursos da sandbox. <br><br>  EntÃ£o, vamos pegar o <b>tcpdump</b> e ver por que Ã© difÃ­cil isolÃ¡-lo usando o mecanismo <b>Unix</b> .  Se vocÃª se lembra, no <b>Capsicum, o</b> funcionamento do <b>tcpdump</b> Ã© que ele abre alguns soquetes especiais e executa a lÃ³gica de anÃ¡lise nos pacotes de rede, apÃ³s o que Ã© impresso nos terminais do usuÃ¡rio.  EntÃ£o, o que Ã© necessÃ¡rio para uma sandbox <b>tcpdump</b> baseada em <b>Unix</b> ?  Seus privilÃ©gios sÃ£o limitados?  O problema com o <b>Unix</b> Ã© que a Ãºnica maneira de realmente alterar privilÃ©gios Ã© alterar a entrada na funÃ§Ã£o de decisÃ£o, que decide se vocÃª pode realmente acessar algum objeto ou nÃ£o.  E a Ãºnica coisa que vocÃª pode realmente mudar Ã© os privilÃ©gios do processo.  Isso significa que o processo poderÃ¡ enviar o <b>UID para</b> outra pessoa. <br><br>  Ou vocÃª pode alterar as permissÃµes para vÃ¡rios objetos que estÃ£o no seu sistema.  De fato, vocÃª pode usar essas duas soluÃ§Ãµes. <br><br>  Se vocÃª deseja isolar o <b>tcpdump</b> na sandbox, provavelmente precisarÃ¡ selecionar um ID de usuÃ¡rio adicional e alternar para ele enquanto trabalha.  Mas esse nÃ£o Ã© um plano ideal, pois vocÃª nÃ£o executarÃ¡ vÃ¡rias instÃ¢ncias do <b>tcpdump</b> com o mesmo <b>ID do</b> usuÃ¡rio.  Portanto, se eu comprometer uma instÃ¢ncia do <b>tcpdump</b> , isso nÃ£o significa que desejo que um invasor use esse fator para controlar outras instÃ¢ncias do <b>tcpdump</b> em execuÃ§Ã£o na minha mÃ¡quina.  Portanto, essa Ã© potencialmente uma mÃ¡ decisÃ£o de usar o <b>uid</b> neste caso. <br><br>  Outro problema Ã© que, no <b>Unix,</b> vocÃª deve ter privilÃ©gios de root para alterar o ID do usuÃ¡rio, privilÃ©gios, processo ou outra coisa, ou alternÃ¡-los para outra coisa.  Isso tambÃ©m Ã© ruim. <br><br>  E outro problema Ã© que, independentemente do seu <b>ID</b> , podem existir arquivos de acesso aberto.  Portanto, seu sistema pode ter um grupo inteiro de arquivos legÃ­veis ou gravÃ¡veis, por exemplo, um arquivo de senha.  De fato, nÃ£o importa qual <b>ID</b> vocÃª tenha, o processo ainda poderÃ¡ ler essa senha.  Portanto, isso tambÃ©m nÃ£o Ã© muito bom. <br><br>  Assim, para organizar uma caixa de proteÃ§Ã£o no <b>Unix</b> , vocÃª provavelmente deve fazer as duas coisas: alterar o <b>UID</b> e revisar cuidadosamente as permissÃµes de todos os objetos para garantir que vocÃª nÃ£o tenha arquivos abertos nÃ£o isolados sensÃ­veis a serem substituÃ­dos ou legÃ­veis por um hacker.  Eu acho que, ao fazer isso, vocÃª obtÃ©m outro mecanismo que pode usar.  Se vocÃª enviÃ¡-lo atÃ© o final, poderÃ¡ ter dificuldade em compartilhar arquivos ou diretÃ³rios. <br><br>  Agora vamos ver como o <b>Capsicum estÃ¡</b> tentando resolver esse problema.  Aqui, assim que entrarmos no modo "sandbox", tudo estarÃ¡ disponÃ­vel apenas atravÃ©s de oportunidades.  Portanto, se vocÃª nÃ£o tiver <b>Capacidade</b> , vocÃª simplesmente nÃ£o poderÃ¡ acessar nenhum objeto. <br><br>  Esses caras no artigo fazem uma enorme aposta no espaÃ§o para nome global.  EntÃ£o, o que Ã© esse espaÃ§o de nome global e por que eles estÃ£o tÃ£o preocupados com isso? <br><br>  O prÃ³prio sistema de arquivos Ã© um tipo de exemplo brilhante de um espaÃ§o para nome global.  VocÃª pode escrever uma barra e listar qualquer arquivo que desejar por trÃ¡s dela.  Por exemplo, vÃ¡ para alguÃ©m no diretÃ³rio inicial, por exemplo, <b>/ home / nickolai / ...</b> Por que isso Ã© ruim?  Por que eles sÃ£o contra o espaÃ§o para nome global no <b>Capsicum</b> ?  O que vocÃª acha? <br><br><img src="https://habrastorage.org/webt/3h/er/dr/3herdr4fh07qkewmu2rdz02f0tq.jpeg"><br><br>  <b>PÃºblico:</b> se vocÃª tiver as permissÃµes erradas, ao usar a autoridade, poderÃ¡ ter problemas. <br><br>  <b>Professor:</b> sim.  O problema Ã© que ainda Ã© o <b>Unix</b> .  Portanto, ainda existem permissÃµes de arquivo regulares.  Portanto, talvez, se vocÃª realmente deseja isolar algum processo na caixa de areia, nÃ£o poderÃ¡ ler ou escrever nada no sistema.  Mas se vocÃª conseguir encontrar um arquivo gravÃ¡vel no diretÃ³rio inicial de algum usuÃ¡rio estÃºpido, isso serÃ¡ bastante desagradÃ¡vel para o cliente sandbox. <br><br>  De maneira mais geral, a ideia deles era listar com precisÃ£o todos os objetos que o processo possui.  Porque vocÃª pode simplesmente listar todos os recursos em uma tabela de descritores de arquivos ou em qualquer outro lugar onde os recursos estÃ£o armazenados para vocÃª.  E esta Ã© a Ãºnica coisa que o processo pode tocar. <br><br>  Mas se vocÃª tiver acesso ao espaÃ§o para nome global, isso Ã© potencialmente impossÃ­vel.  Porque, mesmo que vocÃª tenha um conjunto limitado de recursos, ainda poderÃ¡ iniciar a linha com uma barra e escrever um novo arquivo e nunca conhecerÃ¡ o conjunto de operaÃ§Ãµes ou objetos que esse processo pode acessar. <br><br>  Ã‰ por isso que eles estÃ£o tÃ£o preocupados com o espaÃ§o para nome global, porque isso contradiz o objetivo de controlar com precisÃ£o tudo o que o processo sandbox deve ter acesso.  Dessa forma, eles tentaram eliminar os namespaces globais com muitas alteraÃ§Ãµes no kernel no <b>FreeBSD</b> .  No caso deles, o kernel precisava garantir que todas as operaÃ§Ãµes passassem por alguns recursos, a saber, pelo descritor de arquivo. <br><br>  Vamos verificar se realmente precisamos de alteraÃ§Ãµes no kernel.  E se apenas fizermos isso na biblioteca?  Afinal, estamos implementando o <b>Capsicum</b> , que jÃ¡ possui uma biblioteca.  E tudo o que fazemos Ã© alterar todos esses recursos, como "abrir, ler, escrever", para usar exclusivamente os recursos de <b>capacidade</b> .  Todas as operaÃ§Ãµes passarÃ£o por alguns recursos, procurÃ¡-los na tabela de arquivos e assim por diante.  Isso vai funcionar? <br><br><img src="https://habrastorage.org/webt/ik/r9/bi/ikr9biwkqpm5t4rhxywr38rp8cg.jpeg"><br><br>  <b>PÃºblico:</b> vocÃª sempre pode fazer a chamada do sistema <b>syscall</b> . <br><br>  <b>Professor:</b> sim.  O problema Ã© que houve um conjunto de chamadas de sistema que o kernel aceita e, mesmo que vocÃª implemente uma boa biblioteca, isso nÃ£o impedirÃ¡ a possibilidade de que um processo ruim ou comprometido faÃ§a uma chamada de sistema diretamente.  Portanto, vocÃª deve de alguma forma fortalecer o nÃºcleo. <br><br>  No compilador, o modelo de ameaÃ§a nÃ£o estÃ¡ no processo comprometido do compilador e nÃ£o no cÃ³digo arbitrÃ¡rio, mas no descuido do programador.  Portanto, se o desenvolvedor do programa nÃ£o estiver enganado e fizer a coisa certa, a biblioteca provavelmente serÃ¡ suficiente. <br><br>   ,     ,             ,       .       -  ,       . <br><br>             ?  â€”   ,    <b>cap_enter</b> .   ,    <b>cap_enter</b> ?  ,       ? <br><br>    ,      ,      .  ,    ,      ,     .   <b>cap_enter</b>      ,           <b>open ()</b> ,       <b>openat</b> . <br><br>  Unix-       ,   ,   <b>open</b>    ,   <b>openat</b> ,       ,      ,    â€”    : <b>openat (dirfd,â€œname)</b> .     <b>openat</b>    <b>Â«nameÂ»</b>   ,     . <br><br><img src="https://habrastorage.org/webt/_j/yq/qc/_jyqqcpijlilsu3uerxc8xevlai.jpeg"><br><br>  ,       <b>Capability</b>   <b>open</b> ,      ,   ,        .              .    -   ?   -,    ?  ,   â€“    .        ,        ? <br><br> <b>:</b> ,       . <br><br> <b>:</b> .   ,          ,     .   ,        ,      .             ,      .       ,   ,     .       -,     . <br><br>   ,       ,   ,   ,    ,     .  ,     ,    .. ,     ,             ,          .    ? <br><br>       .     ?  ,  <b>Unix</b>         <b>PID</b> .  ,    <b>kill (25)</b>    <b>PID = 25</b> .     ,    .     <b>Capsicum</b> ?     ? <br><br> <b>:</b>    . <br><br> <b>:</b> . -,  . ,   <b>Unix</b>   ,  .  ,       <b>PID</b> ,    ,       <b>fork</b> ,   <b>pdfork</b> ,  Â«  Â».     ,            -   . <br><br>     .      ,    .   ,        -   : Â«    Â«Â»  ,      ,   ,     ,   Â».          .  ,     ,     -  . <br><br>       , ,    ,   .      ,     .      ,    ,              . <br><br><img src="https://habrastorage.org/webt/nt/rj/8q/ntrj8qi_6_4kplegcl_lao2jyig.jpeg"><br><br>    .     ,        Â«-Â»   .    ,       <b>openat</b>   ,      Â«-Â». ,               Â«-Â»,       . <br><br>     ?         ,    Â«-Â»   ? <br><br> <b>:</b>    ,       ,      .     ,      <b>Capability</b>        . <br><br> <b>:</b> ,  . <br><br> <b>:</b>   ,   ,     -    â€¦ <br><br> <b>:</b>   . <br><br> <b>:</b>      -  . <br><br> <b>:</b> ,           .     Â«-Â»    ?  ,    <b>openat</b>  -        <b>b/c/../..</b> ? <br><br>  ,    , ?      - ,       .  , ,  ,    <b>openat (d, â€œb/c/../..)</b>  <b>Â«cÂ»</b>    ,   -    . <br><br><img src="https://habrastorage.org/webt/_l/hx/r5/_lhxr55o7-crnf5egjmgkgikhao.jpeg"><br><br>   .   ,        ,            ,      .            Â«-Â»,      .  ,          ,         . ,    ,      .   ,     <b>UID</b>    - ? <br><br> <b>:</b>      ,    . <br><br> <b>:</b> ,     . ,  ,   Â«Â» <b>UID</b> ?    :    <b>cap_enter</b>    <b>UID</b>  .    ,   .        ?     ? <br><br> <b>:</b> , <b>UID</b>     ,  , , , ,   - . <br><br> <b>:</b>  ,  .      Â«Â» <b>UID</b> . ,        ,      <b>UID</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Acontece que eu tenho centenas de processos em execuÃ§Ã£o no meu computador e nÃ£o tenho ideia do que Ã©. </font><font style="vertical-align: inherit;">Portanto, destruir o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nÃ£o </font><b><font style="vertical-align: inherit;">Ã©</font></b><font style="vertical-align: inherit;"> um bom plano para fins de gerenciamento. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54:14 min </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContinuaÃ§Ã£o:</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "SeguranÃ§a de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Palestra 6: â€œOportunidadesâ€, parte 3</font></font></a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MlWK2YbZRZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A versÃ£o completa do curso estÃ¡ disponÃ­vel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Obrigado por ficar conosco.  VocÃª gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usuÃ¡rios da Habr em um anÃ¡logo exclusivo de servidores bÃ¡sicos que inventamos para vocÃª:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 nÃºcleos) 10GB DDR4 240GB SSD 1Gbps de US $ 20 ou como dividir o servidor?</a>  (as opÃ§Ãµes estÃ£o disponÃ­veis com RAID1 e RAID10, atÃ© 24 nÃºcleos e atÃ© 40GB DDR4). <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente nÃ³s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um prÃ©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418219/">https://habr.com/ru/post/pt418219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418209/index.html">Recebemos dados dos contadores Mercury 203.2T na RS-485</a></li>
<li><a href="../pt418211/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 4: â€œCompartilhando PrivilÃ©giosâ€, Parte 3</a></li>
<li><a href="../pt418213/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 5: â€œDe onde vÃªm os sistemas de seguranÃ§aâ€, parte 1</a></li>
<li><a href="../pt418215/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Aula 5: â€œDe onde vÃªm os erros do sistema de seguranÃ§aâ€, Parte 2</a></li>
<li><a href="../pt418217/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 6: â€œOportunidadesâ€, parte 1</a></li>
<li><a href="../pt418221/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 6: â€œOportunidadesâ€, parte 3</a></li>
<li><a href="../pt418223/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 1</a></li>
<li><a href="../pt418225/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 7: Sandbox do Cliente Nativo Parte 2</a></li>
<li><a href="../pt418227/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 3</a></li>
<li><a href="../pt418229/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Aula 8: Modelo de SeguranÃ§a de Rede, Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>