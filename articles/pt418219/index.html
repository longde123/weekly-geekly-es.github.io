<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊🏿 🔫 🌘 Curso MIT "Segurança de sistemas de computadores". Palestra 6: Oportunidades, Parte 2 🛌🏽 ✳️ 🤾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula nº 6.858. "Segurança de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Segurança de sistemas de computadores". Palestra 6: Oportunidades, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418219/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula nº 6.858.  "Segurança de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security é um curso sobre o desenvolvimento e implementação de sistemas de computador seguros.  As palestras abrangem modelos de ameaças, ataques que comprometem a segurança e técnicas de segurança baseadas em trabalhos científicos recentes.  Os tópicos incluem segurança do sistema operacional (SO), recursos, gerenciamento de fluxo de informações, segurança de idiomas, protocolos de rede, segurança de hardware e segurança de aplicativos da web. <br><br>  Palestra 1: “Introdução: modelos de ameaças” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: “Controle de ataques de hackers” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: “Estouros de Buffer: Explorações e Proteção” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: “Separação de Privilégios” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: “De onde vêm os sistemas de segurança?” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: “Oportunidades” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  <b>Público:</b> podemos concluir que cada oportunidade tem um processo? <br><br>  <b>Professor: Eu</b> duvido.  Você pode ter quantos processos quiser, pois uma possibilidade pode existir vários processos.  Simplificando, você não precisa necessariamente de um processo separado para cada oportunidade.  Porque existe um processo <b>fort1</b> que pode abrir muitos arquivos e passar muitos recursos ao componente privilegiado do <b>fort</b> . <br><br><img src="https://habrastorage.org/webt/ba/x4/pr/bax4pr8nb9rufhd5_f24v9imtdi.jpeg"><br><br>  A razão pela qual você acha que precisa de um processo separado para cada oportunidade com a qual lidamos diz respeito a essa estranha interação entre recursos e privilégios externos. <br><br>  Porque <b>fort1</b> tem um privilégio externo.  E o que estamos fazendo é basicamente transformar esse privilégio externo em <b>capacidade</b> neste <b>forte</b> processo.  Portanto, se você tiver vários tipos diferentes de privilégios externos ou vários privilégios diferentes que deseja usar com cautela, provavelmente desejará um processo separado que tenha esse privilégio.  E sempre que desejar usar um conjunto específico de privilégios, você solicitará o processo apropriado para realizar a separação e, se isso for bem-sucedido, solicitará que o processo devolva o <b>recurso</b> a você. <br><br>  De fato, havia um design do sistema operacional completamente baseado em recursos e sem privilégios externos.  E isso é legal, mas não muito prático para uso em um sistema real.  Acontece que, na realidade, você não deseja privilégios externos, mas oportunidades para nomear um objeto e contar a alguém sobre esse objeto sem transferir os direitos para esse objeto sem falha. <br><br>  Talvez eu não saiba quais privilégios você pode ter em relação a algum documento geral, mas quero informar que temos esse documento geral.  Se você pode ler, leia.  Se você escrever, tudo bem, escreva.  Mas não quero transferir nenhum direito a ele.  Eu só quero lhe dizer: "Ei, essa coisa, tente!"  Portanto, isso é um inconveniente no mundo das oportunidades, porque realmente obriga a nunca falar sobre objetos sem transferir direitos para esse objeto. <br><br>  Portanto, é importante saber sobre isso e usar esse recurso em algumas partes do sistema, mas não confiar nisso para ser a solução para a segurança do sistema. <br><br><img src="https://habrastorage.org/webt/iu/v8/sg/iuv8sgqyettpxg1oaf1jcuvs-e8.jpeg"><br><br>  <b>Público:</b> suponha que o processo possua os recursos atribuídos a ele por algum outro processo, mas acontece que ele já possui ótimos recursos em relação a algum objeto.  Um processo pode compará-los para garantir que eles estejam tocando o mesmo objeto?  Ou ele usará as grandes oportunidades? <br><br>  <b>Professor:</b> o fato é que o processo não utiliza recursos de maneira implícita, portanto, essa é uma propriedade muito útil dos recursos.  Você deve definitivamente indicar qual das opções que está usando.  Então pense nisso em termos de um descritor de arquivo.  Suponha que eu lhe forneça um descritor de arquivo aberto para algum arquivo, e ele é somente leitura.  Depois, outra pessoa oferece outra oportunidade para outros arquivos, que podem incluir esse arquivo.  E um novo recurso permite que você leia e grave em arquivos. <br><br>  Nesse caso, se você tentar gravar no primeiro arquivo, sem dúvida terá êxito, porque um descritor de arquivo adicional será aberto para ele, o que permite não apenas a leitura, mas também a gravação.  Portanto, isso é uma coisa interessante quando você não precisa de privilégios externos extras.  Você simplesmente tem todas essas possibilidades, porque as pessoas realmente criaram essas bibliotecas e, em princípio, elas gerenciam seus recursos para você.  Eles meio que os colecionam.  E quando tentam executar uma operação, procuram oportunidades e encontram aquelas que a fazem funcionar. <br><br>  Isso retorna ao controle externo da <b>autoridade ambiental</b> que você estava tentando evitar.  Uma característica positiva das possibilidades é que é um design de software que simplifica sua vida.  Isso é incomum em soluções de segurança.  Essa propriedade facilita a gravação de um código que aponta para os privilégios que você deseja usar do ponto de vista da segurança.  E isso é muito fácil de escrever código. <br>  No entanto, o <b>recurso</b> pode resolver outros problemas.  Portanto, problemas de gerenciamento de privilégios geralmente surgem quando você precisa executar algum código não confiável.  Porque você realmente deseja controlar quais privilégios você concede, caso contrário, existe o risco de uso indevido de todos os privilégios que você concede.  E esse é um ponto de vista ligeiramente diferente do qual os autores do artigo sobre <b>Capsicum</b> abordam oportunidades.  É claro que eles estão cientes do problema da autoridade externa, mas esse é um problema ligeiramente diferente que você pode ou não pode resolver.  Mas, basicamente, eles se preocupam com o fato de terem um aplicativo privilegiado muito grande e se preocupam com a ocorrência de erros em diferentes partes do código-fonte desse aplicativo.  Portanto, eles gostariam de reduzir os privilégios dos vários componentes deste aplicativo. <br><br>  Nesse sentido, a história é muito semelhante à <b>OKWS</b> .  Portanto, você tem um aplicativo grande, divide-o em componentes e restringe os privilégios para cada componente.  Isso certamente faz sentido no <b>OKWS</b> .  Existem outras situações em que você pode se preocupar em compartilhar privilégios?  Eu acho que no artigo deles eles descrevem exemplos que eu deveria tentar executar, por exemplo, <b>tcpdump</b> e outros aplicativos que analisam dados de rede.  Por que eles estão tão preocupados com aplicativos que analisam entradas de rede?  O que acontece no <b>tcpdump</b> ?  Qual é o motivo de sua paranóia? <br><br>  <b>Público:</b> um invasor pode controlar o que é enviado e o que é chamado para executar, por exemplo, pacotes. <br><br>  <b>Professor:</b> sim, eles realmente se preocupam com ataques desse tipo e se o invasor pode realmente controlar os dados de entrada?  Porque é bastante problemático se você escrever código <b>C</b> que deve lidar com estruturas de dados.  Obviamente, você fará muita manipulação de ponteiros copiando bytes para matrizes que alocam memória.  Ao mesmo tempo, é fácil cometer um erro no gerenciamento de memória, o que levará a consequências bastante desastrosas. <br><br>  Portanto, essa é a razão pela qual eles decidiram fazer o trabalho de seu protocolo de rede e outras coisas na sandbox. <br><br><img src="https://habrastorage.org/webt/qe/74/kp/qe74kpxuvojns1ezini63--mv90.jpeg"><br><br>  Outro exemplo do mundo real onde o compartilhamento de privilégios é necessário é o seu navegador.  Você provavelmente desejará isolar seu plug-in Flash, sua extensão <b>Java</b> ou qualquer outra coisa.  Porque eles representam um amplo campo para ataques que são usados ​​de forma bastante agressiva. <br><br>  Portanto, este parece ser um plano inteligente.  Por exemplo, se você escreve algum software, deseja verificar o comportamento de seus componentes na caixa de areia.  Geralmente, isso se refere ao que você baixou da Internet e pretende executar com menos privilégios.  O estilo de isolamento oferecido pela <b>Capsicum combina com isso</b> ?  Eu poderia baixar algum protetor de tela aleatório ou algum jogo da Internet.  E eu quero executá-los no meu computador, mas primeiro verifique se eles não estragam tudo o que tenho.  Você usaria <b>Capsicum</b> para isso? <br><br>  <b>Público:</b> você pode escrever um programa sandbox no qual usará o <b>Capsicum</b> . <br><br>  <b>Professor:</b> certo.  Como você o usaria?  Bem, você entra no modo sandbox com o <b>comando cap_enter</b> e executa o programa.  Você espera que isso funcione?  Eu acho que haverá um problema.  Ele estará conectado ao fato de que, se o programa não esperar que seja isolado pelo <b>Capsicum</b> , ele poderá tentar abrir a biblioteca compartilhada, mas não poderá fazer isso, porque não poderá abrir algo como <b>/ lib / ...</b> , porque não permitido no modo de <b>capacidade</b> . <br><br>  Portanto, esses métodos de sandbox devem ser usados ​​para as coisas pelas quais o desenvolvedor previu que eles podem ser executados nesse modo.  Provavelmente, existem outros métodos de sandbox que podem ser usados ​​para código não modificado, mas os requisitos podem mudar um pouco.  Portanto, os criadores de <b>Capsicum</b> não <b>estão</b> muito preocupados com a compatibilidade com versões anteriores.  Se tivermos que abrir arquivos de maneira diferente, nós os abriremos de maneira diferente.  Mas se você quiser deixar o código existente, precisará de algo mais, por exemplo, uma máquina virtual completa para poder executar o código nela.  Isso levanta a questão - devemos usar máquinas virtuais para a caixa de proteção <b>Capsicum</b> ? <br><br>  <b>Público:</b> neste caso, a saturação de memória é possível. <br><br>  <b>Professor:</b> sim, é.  Mas e se não nos importarmos com a memória?  Portanto, as máquinas virtuais provavelmente são muito boas e não usam muita memória.  Então, por que outro motivo não devemos usar <b>VM</b> no <b>Capsicum</b> ? <br><br>  <b>Público: É</b> difícil controlar a atividade da rede. <br><br>  <b>Professor:</b> Isso mesmo!  É difícil controlar o que está acontecendo na rede porque você não está dando acesso à máquina virtual à rede ou está se conectando à rede através do modo <b>NAT</b> ou usando o <b>Preview</b> ou o <b>VMWare</b> .  Mas então sua caixa de areia pode acessar toda a Internet.  Portanto, você precisará gerenciar a rede com mais detalhes, talvez definindo regras de firewall para a máquina virtual e assim por diante.  Isso não é muito bom. <br><br>  Mas e se você não se importa com a rede?  Suponha que você tenha algum tipo de vídeo, e se você processar um vídeo simples ou analisar o <b>tcpdump</b> .  Nesse caso, você simplesmente inicia a máquina virtual, ela começa a analisar seus pacotes <b>tcpdump</b> e faz com que você retorne após a apresentação que o <b>tcpdump</b> deseja gravar para o usuário, porque não há E / S de rede real.  Então, existe algum outro motivo? <br><br><img src="https://habrastorage.org/webt/sy/iu/rs/syiurso7-blsxdvzyhhbwpfia0w.jpeg"><br><br>  <b>Público:</b> porque a sobrecarga da inicialização ainda é alta. <br><br>  <b>Professor:</b> sim, isso pode ser a sobrecarga inicial de iniciar uma máquina virtual, o que reduz o desempenho.  Então é verdade. <br><br>  <b>Público:</b> Bem, você ainda pode querer ter direitos sobre um banco de dados e similares. <br><br>  <b>Professor:</b> sim.  Mas, de maneira geral, isso significa que você tem dados reais com os quais está trabalhando e é realmente difícil separá-los.  Assim, as máquinas virtuais são realmente um mecanismo de compartilhamento muito maior, pelo qual você não pode compartilhar coisas facilmente.  Portanto, isso é bom para situações em que você tem um programa completamente isolado que deseja executar e, ao mesmo tempo, não deseja compartilhar arquivos, diretórios, processos e apenas deixá-los trabalhar separadamente. <br><br>  Então isso é ótimo.  Provavelmente, isso é, de alguma forma, um isolamento mais forte do que o fornecido pelo <b>Capsicum</b> , porque há menos opções para que as coisas dêem errado.  No entanto, esse isolamento não é aplicável em muitas situações quando você deseja usar o <b>Capsicum</b> .  Como no <b>Capsicum,</b> você pode trocar arquivos com grande precisão, usando os recursos da sandbox. <br><br>  Então, vamos pegar o <b>tcpdump</b> e ver por que é difícil isolá-lo usando o mecanismo <b>Unix</b> .  Se você se lembra, no <b>Capsicum, o</b> funcionamento do <b>tcpdump</b> é que ele abre alguns soquetes especiais e executa a lógica de análise nos pacotes de rede, após o que é impresso nos terminais do usuário.  Então, o que é necessário para uma sandbox <b>tcpdump</b> baseada em <b>Unix</b> ?  Seus privilégios são limitados?  O problema com o <b>Unix</b> é que a única maneira de realmente alterar privilégios é alterar a entrada na função de decisão, que decide se você pode realmente acessar algum objeto ou não.  E a única coisa que você pode realmente mudar é os privilégios do processo.  Isso significa que o processo poderá enviar o <b>UID para</b> outra pessoa. <br><br>  Ou você pode alterar as permissões para vários objetos que estão no seu sistema.  De fato, você pode usar essas duas soluções. <br><br>  Se você deseja isolar o <b>tcpdump</b> na sandbox, provavelmente precisará selecionar um ID de usuário adicional e alternar para ele enquanto trabalha.  Mas esse não é um plano ideal, pois você não executará várias instâncias do <b>tcpdump</b> com o mesmo <b>ID do</b> usuário.  Portanto, se eu comprometer uma instância do <b>tcpdump</b> , isso não significa que desejo que um invasor use esse fator para controlar outras instâncias do <b>tcpdump</b> em execução na minha máquina.  Portanto, essa é potencialmente uma má decisão de usar o <b>uid</b> neste caso. <br><br>  Outro problema é que, no <b>Unix,</b> você deve ter privilégios de root para alterar o ID do usuário, privilégios, processo ou outra coisa, ou alterná-los para outra coisa.  Isso também é ruim. <br><br>  E outro problema é que, independentemente do seu <b>ID</b> , podem existir arquivos de acesso aberto.  Portanto, seu sistema pode ter um grupo inteiro de arquivos legíveis ou graváveis, por exemplo, um arquivo de senha.  De fato, não importa qual <b>ID</b> você tenha, o processo ainda poderá ler essa senha.  Portanto, isso também não é muito bom. <br><br>  Assim, para organizar uma caixa de proteção no <b>Unix</b> , você provavelmente deve fazer as duas coisas: alterar o <b>UID</b> e revisar cuidadosamente as permissões de todos os objetos para garantir que você não tenha arquivos abertos não isolados sensíveis a serem substituídos ou legíveis por um hacker.  Eu acho que, ao fazer isso, você obtém outro mecanismo que pode usar.  Se você enviá-lo até o final, poderá ter dificuldade em compartilhar arquivos ou diretórios. <br><br>  Agora vamos ver como o <b>Capsicum está</b> tentando resolver esse problema.  Aqui, assim que entrarmos no modo "sandbox", tudo estará disponível apenas através de oportunidades.  Portanto, se você não tiver <b>Capacidade</b> , você simplesmente não poderá acessar nenhum objeto. <br><br>  Esses caras no artigo fazem uma enorme aposta no espaço para nome global.  Então, o que é esse espaço de nome global e por que eles estão tão preocupados com isso? <br><br>  O próprio sistema de arquivos é um tipo de exemplo brilhante de um espaço para nome global.  Você pode escrever uma barra e listar qualquer arquivo que desejar por trás dela.  Por exemplo, vá para alguém no diretório inicial, por exemplo, <b>/ home / nickolai / ...</b> Por que isso é ruim?  Por que eles são contra o espaço para nome global no <b>Capsicum</b> ?  O que você acha? <br><br><img src="https://habrastorage.org/webt/3h/er/dr/3herdr4fh07qkewmu2rdz02f0tq.jpeg"><br><br>  <b>Público:</b> se você tiver as permissões erradas, ao usar a autoridade, poderá ter problemas. <br><br>  <b>Professor:</b> sim.  O problema é que ainda é o <b>Unix</b> .  Portanto, ainda existem permissões de arquivo regulares.  Portanto, talvez, se você realmente deseja isolar algum processo na caixa de areia, não poderá ler ou escrever nada no sistema.  Mas se você conseguir encontrar um arquivo gravável no diretório inicial de algum usuário estúpido, isso será bastante desagradável para o cliente sandbox. <br><br>  De maneira mais geral, a ideia deles era listar com precisão todos os objetos que o processo possui.  Porque você pode simplesmente listar todos os recursos em uma tabela de descritores de arquivos ou em qualquer outro lugar onde os recursos estão armazenados para você.  E esta é a única coisa que o processo pode tocar. <br><br>  Mas se você tiver acesso ao espaço para nome global, isso é potencialmente impossível.  Porque, mesmo que você tenha um conjunto limitado de recursos, ainda poderá iniciar a linha com uma barra e escrever um novo arquivo e nunca conhecerá o conjunto de operações ou objetos que esse processo pode acessar. <br><br>  É por isso que eles estão tão preocupados com o espaço para nome global, porque isso contradiz o objetivo de controlar com precisão tudo o que o processo sandbox deve ter acesso.  Dessa forma, eles tentaram eliminar os namespaces globais com muitas alterações no kernel no <b>FreeBSD</b> .  No caso deles, o kernel precisava garantir que todas as operações passassem por alguns recursos, a saber, pelo descritor de arquivo. <br><br>  Vamos verificar se realmente precisamos de alterações no kernel.  E se apenas fizermos isso na biblioteca?  Afinal, estamos implementando o <b>Capsicum</b> , que já possui uma biblioteca.  E tudo o que fazemos é alterar todos esses recursos, como "abrir, ler, escrever", para usar exclusivamente os recursos de <b>capacidade</b> .  Todas as operações passarão por alguns recursos, procurá-los na tabela de arquivos e assim por diante.  Isso vai funcionar? <br><br><img src="https://habrastorage.org/webt/ik/r9/bi/ikr9biwkqpm5t4rhxywr38rp8cg.jpeg"><br><br>  <b>Público:</b> você sempre pode fazer a chamada do sistema <b>syscall</b> . <br><br>  <b>Professor:</b> sim.  O problema é que houve um conjunto de chamadas de sistema que o kernel aceita e, mesmo que você implemente uma boa biblioteca, isso não impedirá a possibilidade de que um processo ruim ou comprometido faça uma chamada de sistema diretamente.  Portanto, você deve de alguma forma fortalecer o núcleo. <br><br>  No compilador, o modelo de ameaça não está no processo comprometido do compilador e não no código arbitrário, mas no descuido do programador.  Portanto, se o desenvolvedor do programa não estiver enganado e fizer a coisa certa, a biblioteca provavelmente será suficiente. <br><br>   ,     ,             ,       .       -  ,       . <br><br>             ?  —   ,    <b>cap_enter</b> .   ,    <b>cap_enter</b> ?  ,       ? <br><br>    ,      ,      .  ,    ,      ,     .   <b>cap_enter</b>      ,           <b>open ()</b> ,       <b>openat</b> . <br><br>  Unix-       ,   ,   <b>open</b>    ,   <b>openat</b> ,       ,      ,    —    : <b>openat (dirfd,“name)</b> .     <b>openat</b>    <b>«name»</b>   ,     . <br><br><img src="https://habrastorage.org/webt/_j/yq/qc/_jyqqcpijlilsu3uerxc8xevlai.jpeg"><br><br>  ,       <b>Capability</b>   <b>open</b> ,      ,   ,        .              .    -   ?   -,    ?  ,   –    .        ,        ? <br><br> <b>:</b> ,       . <br><br> <b>:</b> .   ,          ,     .   ,        ,      .             ,      .       ,   ,     .       -,     . <br><br>   ,       ,   ,   ,    ,     .  ,     ,    .. ,     ,             ,          .    ? <br><br>       .     ?  ,  <b>Unix</b>         <b>PID</b> .  ,    <b>kill (25)</b>    <b>PID = 25</b> .     ,    .     <b>Capsicum</b> ?     ? <br><br> <b>:</b>    . <br><br> <b>:</b> . -,  . ,   <b>Unix</b>   ,  .  ,       <b>PID</b> ,    ,       <b>fork</b> ,   <b>pdfork</b> ,  «  ».     ,            -   . <br><br>     .      ,    .   ,        -   : «    «»  ,      ,   ,     ,   ».          .  ,     ,     -  . <br><br>       , ,    ,   .      ,     .      ,    ,              . <br><br><img src="https://habrastorage.org/webt/nt/rj/8q/ntrj8qi_6_4kplegcl_lao2jyig.jpeg"><br><br>    .     ,        «-»   .    ,       <b>openat</b>   ,      «-». ,               «-»,       . <br><br>     ?         ,    «-»   ? <br><br> <b>:</b>    ,       ,      .     ,      <b>Capability</b>        . <br><br> <b>:</b> ,  . <br><br> <b>:</b>   ,   ,     -    … <br><br> <b>:</b>   . <br><br> <b>:</b>      -  . <br><br> <b>:</b> ,           .     «-»    ?  ,    <b>openat</b>  -        <b>b/c/../..</b> ? <br><br>  ,    , ?      - ,       .  , ,  ,    <b>openat (d, “b/c/../..)</b>  <b>«c»</b>    ,   -    . <br><br><img src="https://habrastorage.org/webt/_l/hx/r5/_lhxr55o7-crnf5egjmgkgikhao.jpeg"><br><br>   .   ,        ,            ,      .            «-»,      .  ,          ,         . ,    ,      .   ,     <b>UID</b>    - ? <br><br> <b>:</b>      ,    . <br><br> <b>:</b> ,     . ,  ,   «» <b>UID</b> ?    :    <b>cap_enter</b>    <b>UID</b>  .    ,   .        ?     ? <br><br> <b>:</b> , <b>UID</b>     ,  , , , ,   - . <br><br> <b>:</b>  ,  .      «» <b>UID</b> . ,        ,      <b>UID</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Acontece que eu tenho centenas de processos em execução no meu computador e não tenho ideia do que é. </font><font style="vertical-align: inherit;">Portanto, destruir o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> não </font><b><font style="vertical-align: inherit;">é</font></b><font style="vertical-align: inherit;"> um bom plano para fins de gerenciamento. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54:14 min </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuação:</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Segurança de sistemas de computadores".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Palestra 6: “Oportunidades”, parte 3</font></font></a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MlWK2YbZRZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A versão completa do curso está disponível </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Obrigado por ficar conosco.  Você gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usuários da Habr em um análogo exclusivo de servidores básicos que inventamos para você:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD 1Gbps de US $ 20 ou como dividir o servidor?</a>  (as opções estão disponíveis com RAID1 e RAID10, até 24 núcleos e até 40GB DDR4). <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente nós temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um prédio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418219/">https://habr.com/ru/post/pt418219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418209/index.html">Recebemos dados dos contadores Mercury 203.2T na RS-485</a></li>
<li><a href="../pt418211/index.html">Curso MIT "Segurança de sistemas de computadores". Palestra 4: “Compartilhando Privilégios”, Parte 3</a></li>
<li><a href="../pt418213/index.html">Curso MIT "Segurança de sistemas de computadores". Palestra 5: “De onde vêm os sistemas de segurança”, parte 1</a></li>
<li><a href="../pt418215/index.html">Curso MIT "Segurança de sistemas de computadores". Aula 5: “De onde vêm os erros do sistema de segurança”, Parte 2</a></li>
<li><a href="../pt418217/index.html">Curso MIT "Segurança de sistemas de computadores". Palestra 6: “Oportunidades”, parte 1</a></li>
<li><a href="../pt418221/index.html">Curso MIT "Segurança de sistemas de computadores". Palestra 6: “Oportunidades”, parte 3</a></li>
<li><a href="../pt418223/index.html">Curso MIT "Segurança de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 1</a></li>
<li><a href="../pt418225/index.html">Curso MIT "Segurança de sistemas de computadores". Palestra 7: Sandbox do Cliente Nativo Parte 2</a></li>
<li><a href="../pt418227/index.html">Curso MIT "Segurança de sistemas de computadores". Palestra 7: A Sandbox do Cliente Nativo, Parte 3</a></li>
<li><a href="../pt418229/index.html">Curso MIT "Segurança de sistemas de computadores". Aula 8: Modelo de Segurança de Rede, Parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>