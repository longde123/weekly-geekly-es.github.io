<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โฅ๏ธ ๐คด๐ป ุฃุณุงุณูุงุช RxVMS: RxCommand ู GetIt โ๐ฝ ๐ฉ๐ฟโ๐ ๐ฉ๐ผโ๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐุง ูู ุงูุฌุฒุก ุงูุฑุงุจุน ูู ุณูุณูุฉ ููุฏุณุฉ Flutter ุงูุฎุงุตุฉ ุจู: 


- ููุฏูุฉ 
- ุฏุงุฑุช ุชูุงุฑุงุช ุฃุณุงุณูุงุช 
- RxDart: ุงูุชุญููุงุช ุงูุณุญุฑูุฉ ููุชุฏููุงุช 
- ุฃุณุงุณูุงุช RxVMS: RxComma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฃุณุงุณูุงุช RxVMS: RxCommand ู GetIt</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449872/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุงูุฌุฒุก ุงูุฑุงุจุน ูู ุณูุณูุฉ ููุฏุณุฉ Flutter ุงูุฎุงุตุฉ ุจู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฏูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฏุงุฑุช ุชูุงุฑุงุช ุฃุณุงุณูุงุช</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">RxDart: ุงูุชุญููุงุช ุงูุณุญุฑูุฉ ููุชุฏููุงุช</a> </li><li style=";text-align:right;direction:rtl">  <strong>ุฃุณุงุณูุงุช RxVMS: RxCommand ู GetIt (ูุฐุง ุงูููุดูุฑ)</strong> </li><li style=";text-align:right;direction:rtl">  RxVMS: ุงูุฎุฏูุงุช ูุงููุฏูุฑูู </li><li style=";text-align:right;direction:rtl">  RxVMS: ุงูุญุงุฌูุงุช ุจุฐุงุชูุง </li><li style=";text-align:right;direction:rtl">  ูุตุงุฏูุฉ ุงููุณุชุฎุฏู ูุน RxVMS </li></ul><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุฃู ุงูุฃุฌุฒุงุก ุงูุณุงุจูุฉ ูู ุชูู ูุฑุชุจุทุฉ ุจุดูู ูุงุถุญ ุจููุท RxVMS ุ ุฅูุง ุฃููุง ูุงูุช ุถุฑูุฑูุฉ ูููู ูุงุถุญ ููุฐุง ุงูููุฌ.  ููุชูู ุงูุขู ุฅูู ุฃูู ุงูุญุฒู ุงูุชู ุณุชุญุชุงุฌ ุฅูููุง ูุงุณุชุฎุฏุงู RxVMS ูู ุชุทุจููู. </p><a name="habracut"></a><br><h2 id="getit-bystryy-servicelocator" style=";text-align:right;direction:rtl">  GetIt: ุฎุฏูุฉ ุณุฑูุนุฉุงููููุน </h2><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชุชุฐูุฑ ุฑุณููุง ุจูุงูููุง ููุถุญ ุนูุงุตุฑ RxVMS ุงููุฎุชููุฉ ูู ุชุทุจูู ... </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9cf/f8a/7c1/9cff8a7c191e44a7f4f269c3b0ee97cd.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl"> ... ุฑุจูุง ููุช ุชุชุณุงุกู ููู ุชุนุฑู ูุฎุชูู ุงููุฎุทุทุงุช ูุงููุฏูุฑูู ูุงูุฎุฏูุงุช ุนู ุจุนุถูู ุงูุจุนุถ.  ุงูุฃูู ูู ุฐูู ุ ูุฏ ุชุชุณุงุกู ููู ูููู ูุฃุญุฏ ุงูุนูุงุตุฑ ุงููุตูู ุฅูู ูุธุงุฆู ุนูุตุฑ ุขุฎุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูุน ุงูุนุฏูุฏ ูู ุงูุทุฑู ุงููุฎุชููุฉ (ูุซู ุงูุฃุฏูุงุช ุงููุฑุงุซูุฉ ุ ุญุงููุงุช IoC ุ DI ...) ุ ุฃูุง ุดุฎุตูุงู ุฃูุถููู ุชุญุฏูุฏ ูููุน ุงูุฎุฏูุฉ.  ูู ูุฐุง ุงูุตุฏุฏ ุ ูุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู ุฎุงุต</a> ุญูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GetIt</a> - ุชูููุฐู ููุฐุง ุงูููุฌ ุ ููููู ุณุฃุชุทุฑู ููุง ุฅูู ูุฐุง ุงูููุถูุน ููููุงู.  ุจุดูู ุนุงู ุ ุชููู ุจุชุณุฌูู ุงููุงุฆูุงุช ูู ูุฐู ุงูุฎุฏูุฉ ูุฑุฉ ูุงุญุฏุฉ ุ ููู ุซู ููููู ุงููุตูู ุฅูููุง ูู ุฎูุงู ุงูุชุทุจูู.  ุฅูู ููุน ูู ุงูููุฑุฏุฉ ... ูููู ุจูุฒูุฏ ูู ุงููุฑููุฉ. </p><br><h2 id="ispolzovanie" style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู </h2><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู GetIt ูู ูุงุถุญ ุฌุฏุง.  ูู ุจุฏุงูุฉ ุงูุชุทุจูู ุ ุชููู ุจุชุณุฌูู ุงูุฎุฏูุงุช ู / ุฃู ุงููุฏูุฑูู ุงูุฐูู ุชุฎุทุท ูุงุณุชุฎุฏุงููู ูุงุญููุง.  ูู ุงููุณุชูุจู ุ ูุง ุนููู ุณูู ุงุณุชุฏุนุงุก ุฃุณุงููุจ GetIt ูููุตูู ุฅูู ูุซููุงุช ุงููุฆุงุช ุงููุณุฌูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุฒุฉ ูุทููุฉ ูู ุฃูู ููููู ุชุณุฌูู ูุงุฌูุงุช ุฃู ูุฆุงุช ูุฌุฑุฏุฉ ุชูุงูุง ูุซู ุชุทุจููุงุช ููููุณุฉ.  ุนูุฏ ุงููุตูู ุฅูู ูุซูู ุ ูุง ุนููู ุณูู ุงุณุชุฎุฏุงู ูุงุฌูุงุช / ุชุฌุฑูุฏุงุช ุ ูุงุณุชุจุฏุงู ุงูุชุทุจููุงุช ุงูุถุฑูุฑูุฉ ุจุณูููุฉ ุฃุซูุงุก ุงูุชุณุฌูู.  ูุฐุง ูุชูุญ ูู ุงูุชุจุฏูู ุจุณูููุฉ ุงูุฎุฏูุฉ ุงูุญููููุฉ ุฅูู MockService. </p><br><h2 id="nemnogo-praktiki" style=";text-align:right;direction:rtl">  ููููุง ูู ุงูููุงุฑุณุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุนุงุฏุฉ ูุง ุฃููู ุจุชููุฆุฉ SeviceLocator ูู ููู ูุณูู service_locator.dart ูู ุฎูุงู ูุชุบูุฑ ุนูููู.  ูุจุงูุชุงูู ูุชู ุงูุญุตูู ุนูู ูุชุบูุฑ ุนูููู ูุงุญุฏ ูููุดุฑูุน ุจุฃูููู. </p><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    GetIt sl = new GetIt(); void setUpServiceLocator(ErrorReporter reporter) { //  // [registerSingleton]  -  . //   . // sl.get&lt;ErrorReporter&gt;.get()    . sl.registerSingleton&lt;ErrorReporter&gt;(reporter); // [registerLazySingleton]   ,       // sl.get&lt;ImageService&gt;.get()            . sl.registerLazySingleton&lt;ImageService&gt;(() =&gt; new ImageServiceImplementation()); sl.registerLazySingleton&lt;MapService&gt;(() =&gt; new MapServiceImplementation()); //  sl.registerSingleton&lt;UserManager&gt;(new UserManagerImplementation()); sl.registerLazySingleton&lt;EventManager&gt;(() =&gt; new EvenManagerImplementation()); sl.registerLazySingleton&lt;ImageManager&gt;(() =&gt; new ImageManagerImplementation()); sl.registerLazySingleton&lt;AppManager&gt;(() =&gt; new AppManagerImplementation());</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุง ุฃุฑุฏุช ุงููุตูู ุ ูุง ุนููู ุณูู ุงูุงุชุตุงู </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">RegistrationType object = sl.get&lt;RegistrationType&gt;(); <span class="hljs-comment"><span class="hljs-comment">//  GetIt  `callable`,   : RegistrationType object2 = sl&lt;RegistrationType&gt;();</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ููุงุญุธุฉ ูููุฉ ููุบุงูุฉ:</strong> ุนูุฏ ุงุณุชุฎุฏุงู GetIt ุ ุงุณุชุฎุฏู ุฏุงุฆููุง ุงูููุท ููุณู ุนูุฏ ุงุณุชูุฑุงุฏ ุงููููุงุช - ุฅูุง ุงูุญุฒู (ุงูููุตู ุจูุง) ุฃู ุงููุณุงุฑุงุช ุงููุณุจูุฉ ุ ูููู ููุณ ููุง ุงูููุฌูู ูู ููุช ูุงุญุฏ.  ูุฐูู ูุฃู ุฏุงุฑุช ูุชุนุงูู ูุน ูุฐู ุงููููุงุช ุนูู ุฃููุง ูุฎุชููุฉ ุ ุนูู ุงูุฑุบู ูู ูููุชูุง. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ูุฐุง ุตุนุจูุง ุนููู ุ ููุฑุฌู ุงูุงูุชูุงู ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฏููุชู</a> ููุญุตูู ุนูู ุงูุชูุงุตูู. </p><br><h2 id="rxcommand" style=";text-align:right;direction:rtl">  RxCommand </h2><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุจุนุฏ ุฃู ุงุณุชุฎุฏููุง GetIt ูููุตูู ุฅูู ูุงุฆูุงุชูุง ูู ูู ููุงู (ุจูุง ูู ุฐูู ูุงุฌูุฉ ุงููุณุชุฎุฏู) ุ ุฃุฑูุฏ ุฃู ุฃุตู ููู ูููููุง ุชูููุฐ ูุธุงุฆู ุงููุนุงูุฌ ูุฃุญุฏุงุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู.  ุฃุจุณุท ุทุฑููุฉ ูู ุฅุถุงูุฉ ูุธุงุฆู ุฅูู ุงููุฏูุฑูู ูุงุณุชุฏุนุงุฆูู ูู ุงูุชุทุจููุงุช ุงููุตุบูุฑุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookUpZip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String zip)</span></span></span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">TextField(onChanged: sl.get&lt;SearchManager&gt;().lookUpZip,)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ุณูู <code>lookUpZip</code> ุนูู ูู ุชุบููุฑ ูู <code>TextField</code> .  ููู ููู ูููู ุงููุชูุฌุฉ ุฅูููุง ูู ุงููุณุชูุจูุ  ูุธุฑูุง ูุฃููุง ูุฑูุฏ ุฃู ูููู <code>StreamController</code> ุ ูุฅููุง ูุถูู <code>StreamController</code> ุฅูู <code>StreamController</code> ูุฏููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class"> {</span></span> Stream&lt;String&gt; get nameOfCity; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookUpZip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String zip)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManagerImplementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class">{</span></span> @override Stream&lt;String&gt; get nameOfCity =&gt; cityController.stream; StreamController&lt;String&gt; cityController = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamController(); @override Future&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; lookUpZip(String zip) async { var cityName = await sl.get&lt;ZipApiService&gt;().lookUpZip(zip); cityController.add(cityName); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุงุฌูุฉ ุงููุณุชุฎุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">StreamBuilder&lt;String&gt;( initialData:<span class="hljs-string"><span class="hljs-string">'', stream: sl.get&lt;SearchManager&gt;().nameOfCity, builder: (context, snapshot) =&gt; Text(snapShot.data);</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูููุฌ ูุนูู ุ ููู ููุณ ุงูุฃูุซู.  ูุฐู ูู ุงููุดุงูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุดูุฑุฉ ุฒุงุฆุฏุฉ ุนู ุงูุญุงุฌุฉ - ูุฌุจ ุนูููุง ุฏุงุฆููุง ุฅูุดุงุก ุทุฑููุฉ ุ StreamController ุ ู getter ูุฏูููุง ุ ุฅุฐุง ูู ูุฑุบุจ ูู ุนุฑุถูุง ุจุดูู ุตุฑูุญ ูู ุงููุฌุงู ุงูุนุงู </li><li style=";text-align:right;direction:rtl">  ุงูุญุงูุฉ ุงููุฒุฏุญูุฉ - ูุงุฐุง ูู ููุง ูุฑุบุจ ูู ุนุฑุถ Spinner ุฃุซูุงุก ููุงู ุงููุธููุฉ ุจุนูููุงุ </li><li style=";text-align:right;direction:rtl">  ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก - ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุฃููุช ุงูุฏุงูุฉ ุงุณุชุซูุงุกูุ </li></ul><br><p style=";text-align:right;direction:rtl">  ุจุงูุทุจุน ุ ูููููุง ุฅุถุงูุฉ ุงููุฒูุฏ ูู StreamControllers ููุชุนุงูู ูุน ุงูุญุงูุงุช ูุงูุฃุฎุทุงุก ... ูููู ุณุฑุนุงู ูุง ุชุตุจุญ ูููุฉ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชุฃุชู</a> ุญุฒูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">rx_command</a> ูู ูุชูุงูู ุงููุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </p><br><p style=";text-align:right;direction:rtl">  <code>RxCommand</code> ูุญู ุฌููุน ุงููุดุงูู ุงููุฐููุฑุฉ ุฃุนูุงู ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ.  <code>RxCommand</code> ุจุชุบููู ูุธููุฉ (ูุชุฒุงูู ุฃู ุบูุฑ ูุชุฒุงูู) <code>RxCommand</code> ุชููุงุฆููุง ูู ุงูุฏูู. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู RxCommand ุ ูููููุง ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุฏูุฑูุง ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class"> {</span></span> RxCommand&lt;String,String&gt; lookUpZipCommand; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManagerImplementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class">{</span></span> @override RxCommand&lt;String,String&gt; lookUpZipCommand; SearchManagerImplementation() { lookUpZipCommand = RxCommand.createAsync((zip) =&gt; sl.get&lt;ZipApiService&gt;().lookUpZip(zip)); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุงุฌูุฉ ุงููุณุชุฎุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">TextField(onChanged: sl.get&lt;SearchManager&gt;().lookUpZipCommand,) ... StreamBuilder&lt;String&gt;( initialData:<span class="hljs-string"><span class="hljs-string">'', stream: sl.get&lt;SearchManager&gt;().lookUpZipCommand, builder: (context, snapshot) =&gt; Text(snapShot.data);</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุฃูุซุฑ ุฅูุฌุงุฒุง ููุฑุงุกุฉ. </p><br><h2 id="rxcommand-v-detalyah" style=";text-align:right;direction:rtl">  RxCommand ุจุงูุชูุตูู </h2><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0aa/485/a85/0aa485a85b55c760e32b482a6c00b758.png"></p><br><p style=";text-align:right;direction:rtl">  ูุญุชูู RxCommand ุนูู ูุฏุฎู ูุงุญุฏ ูุฎูุณุฉ ุนูุงุตุฑ ูุฑุงูุจุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>canExecuteInput</strong> ูู <code>Observable&lt;bool&gt;</code> ูููู <strong>ููุงุญุธุชู</strong> ุงุฎุชูุงุฑููุง ููููู ุชูุฑูุฑู ุฅูู ูุธููุฉ ุงููุตูุน ุนูุฏ ุฅูุดุงุก RxCommand.  ูุดูุฑ ุฅูู RxCommand ูุง ุฅุฐุง ูุงู ูููู ุชูููุฐู ุ ููุฐุง ูุชููู ุนูู ุงููููุฉ ุงูุฃุฎูุฑุฉ ุงูุชู ุชููุงูุง. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>isExecuting</strong> ูู <code>Observable&lt;bool&gt;</code> <strong>ููุงุญุธุชู</strong> ูุดูุฑ ุฅูู ูุง ุฅุฐุง ูุงู ุงูุฃูุฑ ูุคุฏู ูุธููุชู ุญุงูููุง.  ุนูุฏูุง ูููู ุงููุฑูู ูุดุบููุงู ุ ูุง ูููู ุฅุนุงุฏุฉ ุชุดุบููู.  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุนุฑุถ Spinner ูู ููุช ุงูุชุดุบูู ุ ูุงุณุชูุน ุฅูู <code>isExecuting</code> </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>canExecute</strong> ูู <code>Observable&lt;bool&gt;</code> <strong>ููุงุญุธุชู</strong> ูุดูุฑ ุฅูู ุงููุฏุฑุฉ ุนูู ุชูููุฐ ุฃูุฑ.  ูุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุณุงุฑุช ุงูุงููุฑ ุจุดูู ุฌูุฏ ูุน StreamBuilder ูุชุบููุฑ ูุธูุฑ ุฒุฑ ุจูู ุงูุฏููุฉ ุนูู / ูุจุงูุฉ. <br>  <em>ูุนูุงูุง ูู ููุง ููู:</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">Observable&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; canExecute = Observable.combineLatest2&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(canExecuteInput,isExecuting) =&gt; canExecuteInput &amp;&amp; !isExecuting).distinct.</code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>ููู ูุง ูุนูู</em> </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุณุชููู <code>false</code> ุฅุฐุง ูุงูุช isExecuting ุชุฑุฌุน ุฅูู <code>true</code> </li><li style=";text-align:right;direction:rtl">  ุณูุชู ุฅุฑุฌุงุน <code>true</code> ููุท ุฅุฐุง ูุงู isExecuting ุจุฅุฑุฌุงุน <code>false</code> ู canExecuteInput ูุง ููุฑุฌุน <code>false</code> . </li></ul><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>thrownExceptions</strong> ูู <code>Observable&lt;Exception&gt;</code> <strong>ููุงุญุธุชู</strong> .  ุณูุชู ุงูุชุดุงู ุฌููุน ุงูุงุณุชุซูุงุกุงุช ุงูุชู ูููู ุฃู ุชููู ุจูุง ุงููุธููุฉ ุงููุนุจุฃุฉ ูุฅุฑุณุงููุง ุฅูู ูุฐู ุงูููุงุญุธุฉ.  ูู ุงูููุงุฆู ุงูุงุณุชูุงุน ุฅููู ูุนุฑุถ ูุฑุจุน ุญูุงุฑ ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ. </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <strong>(ุงููุฑูู ููุณู)</strong> ูู ูู ุงููุงูุน ุฃูุถุง ููุญูุธ.  ุณูุชู ุฅุฑุณุงู ุงูููู ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ุจูุงุณุทุฉ ูุธููุฉ ุงูุนูู ุนูู ูุฐู ุงูููุงุฉ ุ ุจุญูุซ ููููู ุชูุฑูุฑ RxCommand ูุจุงุดุฑุฉ ุฅูู StreamBuilder ููุนููุฉ ุฏูู </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุชุญุชูู <strong>ุงููุชุงุฆุฌ</strong> ุนูู ุฌููุน ุญุงูุงุช ุงูุฃูุงูุฑ ูู <code>Observable&lt;CommandResult&gt;</code> ูุงุญุฏุฉ <code>Observable&lt;CommandResult&gt;</code> ุ ุญูุซ <code>CommandResult</code> ุชุนุฑูู <code>CommandResult</code> ุนูู ุฃูู </p><br></li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// Combined execution state of an `RxCommand` /// Will be issued for any state change of any of the fields /// During normal command execution, you will get this item's listening at the command's [.results] observable. /// 1. If the command was just newly created, you will get `null, false, false` (data, error, isExecuting) /// 2. When calling execute: `null, false, true` /// 3. When exceution finishes: `result, false, false` class CommandResult&lt;T&gt; { final T data; final Exception error; final bool isExecuting; const CommandResult(this.data, this.error, this.isExecuting); bool get hasData =&gt; data != null; bool get hasError =&gt; error != null; @override bool operator ==(Object other) =&gt; other is CommandResult&lt;T&gt; &amp;&amp; other.data == data &amp;&amp; other.error == error &amp;&amp; other.isExecuting == isExecuting; @override int get hashCode =&gt; hash3(data.hashCode, error.hashCode, isExecuting.hashCode); @override String toString() { return 'Data: $data - HasError: $hasError - IsExecuting: $isExecuting'; } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>.results</code> ูููุฏูุง ุจุดูู ุฎุงุต ุฅุฐุง ููุช ุชุฑุบุจ ูู ุชูุฑูุฑ ูุชูุฌุฉ ุฃูุฑ ูุจุงุดุฑุฉ ุฅูู StreamBuilder.  ุณูุนุฑุถ ูุฐุง ูุญุชูู ูุฎุชูููุง ุงุณุชูุงุฏูุง ุฅูู ุญุงูุฉ ุงูุฃูุฑ ุ <code>RxLoader</code> ุจุดูู ุฌูุฏ ููุบุงูุฉ ูุน <code>RxLoader</code> ูู ุญุฒูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">rx_widgets</a> .  ูููุง ููู ูุซุงู ูุนูุตุฑ ูุงุฌูุฉ ูุณุชุฎุฏู <code>.results</code> ูุณุชุฎุฏู <code>.results</code> ูููู <code>.results</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">Expanded( <span class="hljs-comment"><span class="hljs-comment">/// RxLoader      ///    Stream&lt;CommandResult&gt; child: RxLoader&lt;List&lt;WeatherEntry&gt;&gt;( spinnerKey: AppKeys.loadingSpinner, radius: 25.0, commandResults: sl.get&lt;AppManager&gt;().updateWeatherCommand.results, /// ,  .hasData == true dataBuilder: (context, data) =&gt; WeatherListView(data, key: AppKeys.weatherList), /// ,  .isExceuting == true placeHolderBuilder: (context) =&gt; Center( key: AppKeys.loaderPlaceHolder, child: Text("No Data")), /// ,  .hasError == true errorBuilder: (context, ex) =&gt; Center( key: AppKeys.loaderError, child: Text("Error: ${ex.toString()}")), ), ),</span></span></code> </pre><br><h2 id="sozdanie-rxcommands" style=";text-align:right;direction:rtl">  ุฅูุดุงุก RxCommands </h2><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ุชุณุชุฎุฏู RxCommands ูุธุงุฆู ูุชุฒุงููุฉ ูุบูุฑ ูุชุฒุงููุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุณ ูุฏููู ูุนููุฉ ููุง ููุฑุฌุนูู ูุชูุฌุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุฏููู ูุนููุฉ ููุง ุชูุฑุฌุน ูุชูุฌุฉ ุ </li><li style=";text-align:right;direction:rtl">  ููุณ ูุฏููู ูุนููุฉ ูุฅุฑุฌุงุน ูุชูุฌุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุฏููู ูุนููุฉ ูุฅุฑุฌุงุน ูุชูุฌุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูุฌููุน ุงูุฎูุงุฑุงุช ุ ุชููุฑ RxCommand ุนุฏุฉ ุทุฑู ูููุตูุน ุ ูุน ูุฑุงุนุงุฉ ุงููุนุงูุฌุงุช ุงููุชุฒุงููุฉ ูุบูุฑ ุงููุชุฒุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, TResult&gt; createSync&lt;TParam, TResult&gt;(Func1&lt;TParam, TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, TResult&gt; createSyncNoParam&lt;TResult&gt;(Func&lt;TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createSyncNoResult&lt;TParam&gt;(Action1&lt;TParam&gt; action,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createSyncNoParamNoResult(Action action,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, TResult&gt; createAsync&lt;TParam, TResult&gt;(AsyncFunc1&lt;TParam, TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, TResult&gt; createAsyncNoParam&lt;TResult&gt;(AsyncFunc&lt;TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createAsyncNoResult&lt;TParam&gt;(AsyncAction1&lt;TParam&gt; action,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createAsyncNoParamNoResult(AsyncAction action,...</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ุญุชู ุฅุฐุง ูู ุชูุฑุฌุน ุงูุฏุงูุฉ ุงููุญุฒููุฉ ูููุฉ ุ ูุณูู ุชูุฑุฌุน RxCommand ูููุฉ ูุงุฑุบุฉ ุจุนุฏ ุชูููุฐ ุงููุธููุฉ.</strong>  <strong>ูุจุงูุชุงูู ุ ููููู ุถุจุท ุงููุณุชูุน ุนูู ูุซู ูุฐุง ุงูุฃูุฑ ุจุญูุซ ูุณุชุฌูุจ ูุฅููุงู ุงููุธููุฉ.</strong> </p><br><h2 id="dostup-k-poslednemu-rezultatu" style=";text-align:right;direction:rtl">  ุงููุตูู ุฅูู ุฃุญุฏุซ ุงููุชุงุฆุฌ </h2><br><p style=";text-align:right;direction:rtl">  ูููุญู <code>RxCommand.lastResult</code> ุงููุตูู ุฅูู ุขุฎุฑ ูููุฉ ูุงุฌุญุฉ ููุชูุฌุฉ ุชูููุฐ ุงูุฃูุฑ ุ ูุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูู <code>initialData</code> ูู StreamBuilder. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุญุตูู ุนูู ุงููุชูุฌุฉ ุงูุฃุฎูุฑุฉ ุงููุถููุฉ ูู ุฃุญุฏุงุซ CommandResult ูู ููุช ุงูุชุดุบูู ุฃู ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ุ ููููู ุชูุฑูุฑ <code>emitInitialCommandResult = true</code> ุนูุฏ ุฅูุดุงุก ุงูุฃูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑูุฏ ุชุนููู ูููุฉ ุฃูููุฉ ุฅูู <code>.lastResult</code> ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุชุณุชุฎุฏููุง ูู <code>initialData</code> ูู StreamBuilder ุ ูููููู ุชูุฑูุฑูุง ุจุงุณุชุฎุฏุงู ูุนููุฉ <code>initialLastResult</code> ุนูุฏ ุฅูุดุงุก ุงูุฃูุฑ. </p><br><h2 id="primer---delaem-flutter-reaktivnym" style=";text-align:right;direction:rtl">  ูุซุงู - ุฌุนู ุฑูุฑูุฉ ุฑุฏ ุงููุนู </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุช</a> ุฅุนุงุฏุฉ ุชูุธูู ุฃุญุฏุซ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุตุฏุงุฑ ูู ุงููุซุงู</a> ูู <strong>RxVMS</strong> ุ ูุฐุง ูุฌุจ ุฃู ูุชููุฑ ูุฏูู ุงูุขู ุฎูุงุฑ ุฌูุฏ ุญูู ููููุฉ ุงุณุชุฎุฏุงูู. </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ูุฐุง ุงูุชุทุจูู ุจุณูุท ููุบุงูุฉ ุ ููุญู ุจุญุงุฌุฉ ุฅูู ูุฏูุฑ ูุงุญุฏ ููุท: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppManager</span></span></span><span class="hljs-class"> {</span></span> RxCommand&lt;String, List&lt;WeatherEntry&gt;&gt; updateWeatherCommand; RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; switchChangedCommand; RxCommand&lt;String, String&gt; textChangedCommand; AppManager() { <span class="hljs-comment"><span class="hljs-comment">//    bool         //   Observable switchChangedCommand = RxCommand.createSync&lt;bool, bool&gt;((b) =&gt; b); //    switchChangedCommand  canExecute Observable  // updateWeatherCommand updateWeatherCommand = RxCommand.createAsync&lt;String, List&lt;WeatherEntry&gt;&gt;( sl.get&lt;WeatherService&gt;().getWeatherEntriesForCity, canExecute: switchChangedCommand, ); //         textChangedCommand = RxCommand.createSync&lt;String, String&gt;((s) =&gt; s); //    ... textChangedCommand //     500ms... .debounce(new Duration(milliseconds: 500)) // ...   updateWeatherCommand .listen(updateWeatherCommand); //     updateWeatherCommand(''); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุงูุฌูุน ุจูู RxCommands ูุฎุชููุฉ ูุนูุง.  ูุงุญุธ ุฃู <code>switchedChangedCommand</code> ุงููุงูุน <strong>ูููู ููุงุญุธุชูุงุงูุชูููุฐ ููุชุญุฏูุซ</strong> <code>updateWeatherCommand</code> . </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ูุฑู ููู ูุชู ุงุณุชุฎุฏุงู ูุฏูุฑ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Scaffold( appBar: AppBar(title: Text(<span class="hljs-string"><span class="hljs-string">"WeatherDemo"</span></span>)), resizeToAvoidBottomPadding: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, body: Column( children: &lt;Widget&gt;[ Padding( padding: <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EdgeInsets.all(<span class="hljs-number"><span class="hljs-number">16.0</span></span>), child: TextField( key: AppKeys.textField, autocorrect: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, controller: _controller, decoration: InputDecoration( hintText: <span class="hljs-string"><span class="hljs-string">"Filter cities"</span></span>, ), style: TextStyle( fontSize: <span class="hljs-number"><span class="hljs-number">20.0</span></span>, ), <span class="hljs-comment"><span class="hljs-comment">//    textChangedCommand! onChanged: sl.get&lt;AppManager&gt;().textChangedCommand, ), ), Expanded( /// RxLoader   builders   ///   Stream&lt;CommandResult&gt; child: RxLoader&lt;List&lt;WeatherEntry&gt;&gt;( spinnerKey: AppKeys.loadingSpinner, radius: 25.0, commandResults: sl.get&lt;AppManager&gt;().updateWeatherCommand.results, dataBuilder: (context, data) =&gt; WeatherListView(data, key: AppKeys.weatherList), placeHolderBuilder: (context) =&gt; Center(key: AppKeys.loaderPlaceHolder, child: Text("No Data")), errorBuilder: (context, ex) =&gt; Center(key: AppKeys.loaderError, child: Text("Error: ${ex.toString()}")), ), ), Padding( padding: const EdgeInsets.all(8.0), child: Row( children: &lt;Widget&gt;[ ///  Updatebutton    updateWeatherCommand.canExecute Expanded( //        Streambuilder, //      WidgetSelector child: WidgetSelector( buildEvents: sl .get&lt;AppManager&gt;() .updateWeatherCommand .canExecute, onTrue: RaisedButton( key: AppKeys.updateButtonEnabled, child: Text("Update"), onPressed: () { _controller.clear(); sl.get&lt;AppManager&gt;().updateWeatherCommand(); }, ), onFalse: RaisedButton( key: AppKeys.updateButtonDisabled, child: Text("Please Wait"), onPressed: null, ), ), ), //    canExecuteInput StateFullSwitch( state: true, onChanged: sl.get&lt;AppManager&gt;().switchChangedCommand, ), ], ), ), ], ), );</span></span></code> </pre> <br><h2 id="tipovye-shablony-ispolzovaniya" style=";text-align:right;direction:rtl">  ุฃููุงุท ุงูุงุณุชุฎุฏุงู ุงููููุฐุฌู </h2><br><p style=";text-align:right;direction:rtl">  ููุฏ ุฑุฃููุง ุจุงููุนู ุทุฑููุฉ ูุงุญุฏุฉ ููุฑุฏ ุนูู ุญุงูุงุช ูุฎุชููุฉ ูู ุงูุฃูุงูุฑ ุจุงุณุชุฎุฏุงู <strong>CommandResults</strong> .  ูู ุงูุญุงูุงุช ุงูุชู ูุฑูุฏ ูููุง ุนุฑุถ ูุง ุฅุฐุง ูุงู ุงูุฃูุฑ ูุงุฌุญูุง (ูููู ูุง ูุชู ุนุฑุถ ุงููุชูุฌุฉ) ุ ููุงู ููุท ุดุงุฆุน ูุชูุซู ูู ุงูุงุณุชูุงุน ุฅูู ุฃูุฑ <code>initState</code> ูุธููุฉ <code>initState</code> StatefulWidget.  ููุง ูุซุงู ุนูู ูุดุฑูุน ุญูููู. </p><br><p style=";text-align:right;direction:rtl">  ุชุนุฑูู <code>createEventCommand</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> RxCommand&lt;Event, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createEventCommand;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุคุฏู ูุฐุง ุฅูู ุฅูุดุงุก ูุงุฆู <strong>ุญุฏุซ</strong> ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ููุฑุฌุน ุฃู ูููุฉ ุญููููุฉ.  ูููู ุ ููุง ุชุนูููุง ุณุงุจููุง ุ ุญุชู RxCommand ูุน ููุน ุฅุฑุฌุงุน ูู <code>void</code> ุณูุนูุฏ ุนูุตุฑ ุจูุงูุงุช ูุงุญุฏ ุนูุฏ ุงูุงูุชูุงู.  ูุจุงูุชุงูู ุ ูููููุง ุงุณุชุฎุฏุงู ูุฐุง ุงูุณููู ูุชุญุฑูู ุฅุฌุฑุงุก ูู ุทูุจูุง ุจูุฌุฑุฏ ุงูุชูุงู ุงูุฃูุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      ,        _eventCommandSubscription = _createCommand.listen((_) async { Navigator.pop(context); await showToast('Event saved'); }); //        _errorSubscription = _createEventCommand.thrownExceptions.listen((ex) async { await sl.get&lt;ErrorReporter&gt;().logException(ex); await showMessageDialog(context, 'There was a problem saving event', ex.toString()); }); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ููู</strong> : ูุง ุชูุณ ุฅููุงู ุงูุงุดุชุฑุงูุงุช ุนูุฏูุง ูุง ูุญุชุงุฌ ุฅูููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ _eventCommandSubscription?.cancel(); _errorSubscription?.cancel(); super.dispose(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฅุฐุง ููุช ุชุฑูุฏ ุงุณุชุฎุฏุงู ุนุฑุถ ุงูุนุฏุงุฏ ุงููุดุบูู ุ ูููููู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุงุณุชูุงุน ุฅูู ุฃูุงูุฑ <code>isExecuting</code> ูููู ููุงุญุธุชูุง ูู ูุธููุฉ <code>initState</code> ุ </li><li style=";text-align:right;direction:rtl">  ุฅุธูุงุฑ / ุฅุฎูุงุก ุงูุนุฏุงุฏ ูู ุงูุงุดุชุฑุงู ุ  ูุฐูู </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู ุงูุฃูุฑ ููุณู ููุตุฏุฑ ุจูุงูุงุช ูุจุฑูุงูุฌ <strong>StreamBuilder</strong> </li></ul><br><h2 id="oblegchenie-zhizni-s-rxcommandlisteners" style=";text-align:right;direction:rtl">  ุฌุนู ุงูุญูุงุฉ ุฃุณูู ูุน RxCommandListeners </h2><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑูุฏ ุงุณุชุฎุฏุงู ููุงุญุธุงุช ูุชุนุฏุฏุฉ ุ ููุฌุจ ุนููู ุฅุฏุงุฑุฉ ุงุดุชุฑุงูุงุช ูุชุนุฏุฏุฉ.  ูุฏ ูููู ุงูุชุญูู ุงููุจุงุดุฑ ูู ุงูุงุณุชูุงุน ูุฅุทูุงู ูุฌููุนุฉ ูู ุงูุงุดุชุฑุงูุงุช ุฃูุฑูุง ุตุนุจูุง ุ ููุฌุนู ุงูููุฏ ุฃูู ูุงุจููุฉ ูููุฑุงุกุฉ ููุนุฑุถู ูุฎุทุฑ ุงูุฃุฎุทุงุก (ุนูู ุณุจูู ุงููุซุงู ุ ูุณูุงู <code>cancel</code> ูู ุนูููุฉ ุงูุฅููุงู). </p><br><p style=";text-align:right;direction:rtl">  ูุถูู ุฃุญุฏุซ ุฅุตุฏุงุฑ ูู <strong>rx_command</strong> ูุฆุฉ ุงููุณุงุนุฏ <code>RxCommandListener</code> ุ ุงููุตููุฉ ูุชุจุณูุท ูุฐู ุงููุนุงูุฌุฉ.  ููุจู ุงูููุดุฆ ุงูุฃูุงูุฑ ููุนุงูุฌุงุช ุงูุชุบููุฑุงุช ุงูุญููููุฉ ุงููุฎุชููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RxCommandListener</span></span></span><span class="hljs-class">&lt;TParam, TResult&gt; {</span></span> final RxCommand&lt;TParam, TResult&gt; command; <span class="hljs-comment"><span class="hljs-comment">//       final void Function(TResult value) onValue; //    isExecuting final void Function(bool isBusy) onIsBusyChange; //       final void Function(Exception ex) onError; //    canExecute final void Function(bool state) onCanExecuteChange; //    .results Observable  final void Function(CommandResult&lt;TResult&gt; result) onResult; //     /  final void Function() onIsBusy; final void Function() onNotBusy; //     final Duration debounceDuration; RxCommandListener(this.command,{ this.onValue, this.onIsBusyChange, this.onIsBusy, this.onNotBusy, this.onError, this.onCanExecuteChange, this.onResult, this.debounceDuration,} ) void dispose();</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ุชุญุชุงุฌ ุฅูู ุชูุฑูุฑ ุฌููุน ูุธุงุฆู ุงููุนุงูุฌ.  ุฌููุนูุง ุงุฎุชูุงุฑูุฉ ุ ูุฐูู ููููู ุจุจุณุงุทุฉ ููู ุชูู ุงูุชู ุชุญุชุงุฌ ุฅูููุง.  ุชุญุชุงุฌ ููุท ุฅูู ุงุณุชุฏุนุงุก <code>dispose</code> ุฃุฌู <code>RxCommandListener</code> ูู ูุธููุฉ <code>dispose</code> ุงูุฎุงุตุฉ ุจู ุ ูุณูู ููุบู ุฌููุน ุงููุณุชุฎุฏูุฉ ุฏุงุฎู ุงูุงุดุชุฑุงู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ููุงุฑู ููุณ ุงูุฑูุฒ ูุน ูุจุฏูู <code>RxCommandListener</code> ูู ูุซุงู ุญูููู ุขุฎุฑ.  ูุชู ุงุณุชุฎุฏุงู ุงูุฃูุฑ <code>selectAndUploadImageCommand</code> ููุง ุนูู ุดุงุดุฉ ุงูุฏุฑุฏุดุฉ ุญูุซ ูููู ูููุณุชุฎุฏู ุชุญููู ุงูุตูุฑ.  ุนูุฏูุง ูุณูู ุงูุฃูุฑ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชู <strong>ุนุฑุถ</strong> ูุฑุจุน ุญูุงุฑ <strong>ImagePicker.</strong> </li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุงุฎุชูุงุฑ ูุชู ุชุญููู ุงูุตูุฑุฉ </li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุชูุงู ุงูุชูุฒูู ุ ูููู ุงูุฃูุฑ ุจุฅุฑุฌุงุน ุนููุงู ุชุฎุฒูู ุงูุตูุฑ ุจุญูุซ ููููู ุฅูุดุงุก ุฅุฏุฎุงู ุฏุฑุฏุดุฉ ุฌุฏูุฏ. </li></ul><br><p style=";text-align:right;direction:rtl">  ุจุฏูู <strong>RxCommandListener</strong> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">_selectImageCommandSubscription = sl .get&lt;ImageManager&gt;() .selectAndUploadImageCommand .listen((imageLocation) async { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (imageLocation == null) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    sl.get&lt;EventManager&gt;().createChatEntryCommand(new ChatEntry( event: widget.event, isImage: true, content: imageLocation.downloadUrl, )); }); _selectImageIsExecutingSubscription = sl .get&lt;ImageManager&gt;() .selectAndUploadImageCommand .isExecuting .listen((busy) { if (busy) { MySpinner.show(context); } else { MySpinner.hide(); } }); _selectImageErrorSubscription = sl .get&lt;ImageManager&gt;() .selectAndUploadImageCommand .thrownExceptions .listen((ex) =&gt; showMessageDialog(context, 'Upload problem', "We cannot upload your selected image at the moment. Please check your internet connection"));</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู <strong>RxCommandListener</strong> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">selectImageListener = RxCommandListener( command: sl.get&lt;ImageManager&gt;().selectAndUploadImageCommand, onValue: (imageLocation) async { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (imageLocation == null) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; sl.get&lt;EventManager&gt;().createChatEntryCommand(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChatEntry( event: widget.event, isImage: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, content: imageLocation.downloadUrl, )); }, onIsBusy: () =&gt; MySpinner.show(context), onNotBusy: MySpinner.hide, onError: (ex) =&gt; showMessageDialog(context, <span class="hljs-string"><span class="hljs-string">'Upload problem'</span></span>, <span class="hljs-string"><span class="hljs-string">"We cannot upload your selected image at the moment. Please check your internet connection"</span></span>));</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุดูู ุนุงู ุ ุฃูุฏ ุฏุงุฆููุง ุงุณุชุฎุฏุงู RxCommandListener ุฅุฐุง ูุงู ููุงู ุฃูุซุฑ ูู ููุงุญุธุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฌุฑุจ <strong>RxCommands</strong> ูุงูุธุฑ ููู ูููู ุฃู ุชุฌุนู ุญูุงุชู ุฃุณูู. <br>  <em>ุจุงูููุงุณุจุฉ ุ ูุง ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู <strong>RxVMS</strong> ููุงุณุชูุงุฏุฉ ูู <strong>RxCommands</strong> .</em> </p><br><p style=";text-align:right;direction:rtl">  ููุฒูุฏ ูู ุงููุนูููุงุช ุญูู <code>RxCommand</code> ุงูุฑุฃ ุญุฒูุฉ <code>RxCommand</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">readme</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar449872/">https://habr.com/ru/post/ar449872/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar449862/index.html">ููุฎุต ุงูููุงุฏ ุงููุซูุฑุฉ ููุงูุชูุงู ููุทูุฑ ุงููุงุชู ุงููุญููู ุฑูู 296 (ูู 22 ุฅูู 26 ุฃุจุฑูู)</a></li>
<li><a href="../ar449864/index.html">ResNet50. ุงูุชูููุฐ ุงูุฎุงุต</a></li>
<li><a href="../ar449866/index.html">ุงููุฌูุงุช ุงููุญุชููุฉ ุนูู HTTPS ูููููุฉ ุงูุฏูุงุน ุถุฏูู</a></li>
<li><a href="../ar449868/index.html">GIT ุขููุฉ ุงูุชุญูู ูู ุฅุตุฏุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฅุฏุงุฑุฉ ุชูุฑูุบ MySQL)</a></li>
<li><a href="../ar449870/index.html">ุนุงู JSONDecoder</a></li>
<li><a href="../ar449876/index.html">ุงูุงุจุชูุงุฑ SSI-2001: ูุตุฉ ูุงุญุฏุฉ ูู ุฃูุฏุฑ ุจุทุงูุงุช ุงูุตูุช ูุฌูุงุฒ ุงูููุจููุชุฑ IBM (ูุงููุณุฎุฉ ุงููุชูุงุซูุฉ)</a></li>
<li><a href="../ar449880/index.html">ุฑุดููุฉ ูุงูุช: ุฎุตูุตุง ุถุฏ ุงูุฅุฑูุงู</a></li>
<li><a href="../ar449884/index.html">8008 ูุถุงูุงุฉ ุงููุนุงูุฌ ุงูุตุบุฑู ุนูู ESP8266</a></li>
<li><a href="../ar449886/index.html">ุงููุง ูุซู ุฑููุจ ุงูุฏุฑุงุฌุฉ</a></li>
<li><a href="../ar449888/index.html">ููุฒูุงุก ุงููู: ูู ุงูุงุฑุชุจุงุท</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>