<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏾 🙅🏼 🤮 La dague 2 est élémentaire (partie 1) 🤙🏿 🎐 👈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Table des matières 



1. Présentation 
2. Qu'est-ce que l'injection de dépendance, exemple de dépendance 
3. Dague 2 - Introduction 
4. Première util...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La dague 2 est élémentaire (partie 1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466725/">  Table des matières <br><br><ol><li>  Présentation </li><li>  Qu'est-ce que l'injection de dépendance, exemple de dépendance </li><li>  Dague 2 - Introduction </li><li>  Première utilisation de Dagger 2 </li></ol><br><h4>  Présentation </h4><br>  L'article n'est pas écrit par un programmeur avancé pour les mêmes mots, ordinaires et compréhensibles. <br>  Cet article utilise l'exemple de code Kotlin.  Dague version 2.17.  Un exemple peut être téléchargé à la fin de l'article. <br><a name="habracut"></a><br><h4>  Qu'est-ce que l'injection de dépendance? </h4><br>  L'injection de dépendance (injection ou injection de dépendance) est la dépendance d'une classe par rapport à une autre.  c'est-à-dire  pour le fonctionnement complet d'une classe, l'initialisation de l'autre (leur) classe est nécessaire. <br><br>  Par exemple, la classe Car (voiture) ne peut pas fonctionner sans la classe Engine, qui à son tour ne peut pas fonctionner sans la classe Fuel.  Cela ressemble à ceci: <br><br><pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> engine: Engine) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Engine</span></span></span><span class="hljs-class"> </span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fuel: Fuel) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fuel</span></span></span></span>(){ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> fuel = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(BuildConfig.DEBUG){ “benzine” } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { “diesel” } }</code> </pre> <br>  Dans cet exemple, la classe Car dépend de la classe Engine, et cela, à son tour, dépend de la classe Fuel. <br><br><h4>  Dague 2 - Introduction </h4><br>  Dagger est une bibliothèque qui aide à implémenter l'injection de dépendances:.  Ceci est une bibliothèque google.  Une documentation détaillée est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">disponible ici</a> . <br><br>  Avantages du poignard: <br><br><ul><li>  Je dois écrire moins de code passe-partout. </li><li>  Aide à structurer les dépendances. </li><li>  Il simplifie considérablement le travail lorsqu'il y a beaucoup de dépendances </li><li>  Le code devient facile à lire. </li></ul><br>  Inconvénients de la dague: <br><br><ul><li>  Manque de documentation détaillée </li><li>  Dagger essaie de comprendre les intentions du développeur à l'aide d'annotations.  Cela se complique quand il ne vous comprend pas correctement </li><li>  poignard génère du code tout aussi difficile à repérer </li></ul><br><h4>  Première utilisation de Dagger 2 </h4><br>  Tout d'abord, vous devez ajouter un poignard à l'application.  Je connais 2 méthodes pour le faire <br>  1. Ouvrez build.gradle (App) et ajoutez une trace. <br><br>  1.1 Tout en haut de la section de déclaration du plugin <br><br><pre> <code class="xml hljs">apply plugin: 'kotlin-kapt'</code> </pre> <br>  1.2 dans la section des dépendances <br><br><pre> <code class="xml hljs">{ ... kapt "com.google.dagger:dagger-compiler:$dagger_version" implementation "com.google.dagger:dagger:$dagger_version" }</code> </pre><br>  Je spécifie la version de dagger (dagger_version) dans la section <br><br><pre> <code class="xml hljs">ext { dagger_version = '2.17' }</code> </pre> <br>  Si ce n'est pas le cas, la section doit être ajoutée au-dessus de la section Android. <br><br>  2. Ajouter un référentiel Maven via la structure du projet - Dépendances - Ajouter des dépendances de bibliothèque <br><br>  Après avoir synchronisé le projet, nous sommes prêts à implémenter les dépendances à l'aide de la dague. <br><br>  Commencez par créer les classes Voiture, Moteur et Carburant: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> engine: Engine) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Engine</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fuel: Fuel) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fuel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> fuelType = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(BuildConfig.DEBUG){ <span class="hljs-string"><span class="hljs-string">"benzine"</span></span> }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-string"><span class="hljs-string">"diesel"</span></span> } }</code> </pre><br>  Avant les constructeurs des classes Car, Engine et Fuel, nous ajoutons l'annotation Inject dagger, permettant ainsi à dagger de comprendre que ces classes doivent être implémentées si nécessaire.  Nous obtenons la trace. <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span><span class="hljs-meta"><span class="hljs-class"><span class="hljs-meta">@Inject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> engine: Engine) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Engine</span></span></span><span class="hljs-class"> </span><span class="hljs-meta"><span class="hljs-class"><span class="hljs-meta">@Inject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fuel: Fuel) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fuel</span></span></span><span class="hljs-class"> </span><span class="hljs-meta"><span class="hljs-class"><span class="hljs-meta">@Inject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> fuelType = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(BuildConfig.DEBUG){ <span class="hljs-string"><span class="hljs-string">"benzine"</span></span> }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-string"><span class="hljs-string">"diesel"</span></span> } }</code> </pre><br>  Dagger a besoin de savoir comment créer tous les objets dont il a besoin pour implémenter.  Afin de lister toutes les classes que nous implémentons (Inject), l'annotation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Component</a> est utilisée, qui est déclarée pour l'interface (DaggerComponent). <br><br>  Cela ressemble à ceci: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DaggerComponent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Car <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEngine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Engine <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFuel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Fuel }</code> </pre><br>  Lors de la déclaration de méthodes de composant, ce ne sont pas les noms de méthode qui sont importants, mais la classe qu'ils renvoient. <br><br>  À cette étape, vous devez créer un projet (Build - Rebuild project).  Après cela, le poignard générera les classes et la fabrique nécessaires pour initialiser les composants.  Le nom de la fabrique coïncidera avec le nom de l'interface dans laquelle on initialise les classes pour la dague, sauf que le préfixe "Dague" sera ajouté, ie  à la sortie, nous obtenons la classe DaggerDaggerComponent. <br><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Generated by Dagger (https://google.github.io/dagger). package com.example.dagger2; public final class DaggerDaggerComponent implements DaggerComponent { private DaggerDaggerComponent(Builder builder) {} public static Builder builder() { return new Builder(); } public static DaggerComponent create() { return new Builder().build(); } @Override public Car getCar() { return new Car(getEngine()); } @Override public Engine getEngine() { return new Engine(new Fuel()); } @Override public Fuel getFuel() { return new Fuel(); } public static final class Builder { private Builder() {} public DaggerComponent build() { return new DaggerDaggerComponent(this); } } }</span></span></code> </pre><br>  Tout est prêt.  Essayons de créer un champ de voiture de type Car dans MainActivity: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> car: Car = DaggerDaggerComponent.create().getCar()</code> </pre><br>  En lançant l'application, vous pouvez vous assurer que le champ de voiture est initialisé lorsque vous y accédez <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Code source</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr466725/">https://habr.com/ru/post/fr466725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr466711/index.html">Vulnérabilité DaOffice autorisé à supprimer tout utilisateur du réseau social</a></li>
<li><a href="../fr466713/index.html">Est-il possible en 1C de ne pas observer la technologie des composants externes? Ou Comment féliciter des collègues utilisant 1C?</a></li>
<li><a href="../fr466719/index.html">Profil de vitesse ultra-léger: théorie et pratique. partie 1</a></li>
<li><a href="../fr466721/index.html">[Ekaterinbourg, annonce] java.ural.Meetup @ 3 - annonce des troisièmes reportages vidéo Java mitap + de java.ural.Meetup @ 2</a></li>
<li><a href="../fr466723/index.html">Apple Text Broadcast - 10 septembre 2019</a></li>
<li><a href="../fr466727/index.html">Mise à niveau paresseuse: comment PostgreSQL 12 améliore les performances</a></li>
<li><a href="../fr466729/index.html">Le livre "Data mining. Récupération d'informations sur Facebook, Twitter, LinkedIn, Instagram, GitHub »</a></li>
<li><a href="../fr466731/index.html">Extravagance. Septembre se lève</a></li>
<li><a href="../fr466733/index.html">Bienvenue à DINS Java EVENING le 18 septembre</a></li>
<li><a href="../fr466735/index.html">Un moyen simple de créer une alerte vocale dans le système domotique («Smart Home»)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>