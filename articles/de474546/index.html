<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùï üåä üí™üèø Von Terraform zu CloudFormation gewechselt - und es bereut ü§Ωüèª üïí üö£üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Darstellung der Infrastruktur als Code in einem wiederholbaren Textformat ist eine einfache bew√§hrte Methode f√ºr Systeme, mit denen Sie nichts zu ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Von Terraform zu CloudFormation gewechselt - und es bereut</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/474546/"><p>  Die Darstellung der Infrastruktur als Code in einem wiederholbaren Textformat ist eine einfache bew√§hrte Methode f√ºr Systeme, mit denen Sie nichts zu tun haben.  Diese Vorgehensweise hat einen Namen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Infrastruktur als Code</a> . Bisher gibt es zwei beliebte Tools f√ºr die Implementierung, insbesondere in AWS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terraform</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CloudFormation</a> . </p><br><p><img src="https://habrastorage.org/webt/ff/f_/rw/fff_rw-n0dk_n_l6qxrxkp_-h9i.png"><br>  <em>Vergleichen Sie die Erfahrungen mit Terraform und CloudFormation</em> </p><br><p>  Bevor ich zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Twitch</a> (aka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Amazon Jr.</a> ) kam, arbeitete ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in einem Startup</a> und benutzte Terraform drei Jahre lang.  An einem neuen Ort habe ich Terraform auch mit Macht und Kraft verwendet, und dann hat das Unternehmen den √úbergang zu allem a la Amazon vorangetrieben, einschlie√ülich CloudFormation.  Ich habe hart gearbeitet, um Best Practices f√ºr beide zu entwickeln, und ich habe beide Tools in sehr komplexen Workflows im gesamten Unternehmen verwendet.  Sp√§ter, nachdem ich die Konsequenzen des Wechsels von Terraform zu CloudFormation sorgf√§ltig gepr√ºft hatte, wurde ich √ºberzeugt, dass Terraform wahrscheinlich die beste Wahl f√ºr das Unternehmen war. </p><a name="habracut"></a><br><h2 id="terraform-uzhasnyy">  Terraform schrecklich </h2><br><h3 id="beta-versiya-po">  Beta-Software </h3><br><p> Terraform hat noch nicht einmal Version 1.0 ver√∂ffentlicht, und dies ist ein guter Grund, sie nicht zu verwenden.  Seit ich es zum ersten Mal selbst getestet habe, hat es sich stark ver√§ndert, aber dann ist die <code>terraform apply</code> oft nach mehreren Updates oder nur nach ein paar Betriebsjahren unterbrochen.  Ich w√ºrde sagen, dass "jetzt alles anders ist", aber ... also scheint jeder nein zu sagen?  Es gibt √Ñnderungen, die mit fr√ºheren Versionen nicht kompatibel sind, obwohl sie angemessen sind, und sogar das Gef√ºhl ist, dass die Syntax und Abstraktionen von Ressourcenspeichern jetzt genau das sind, was Sie brauchen.  Das Tool schien besser zu sein, aber ...: -0 </p><br><p>  AWS hingegen hat gute Arbeit geleistet, um die Kompatibilit√§t mit fr√ºheren Versionen aufrechtzuerhalten.  Alle, wahrscheinlich, weil ihre Dienste innerhalb der Organisation h√§ufig gut getestet und erst dann umbenannt und ver√∂ffentlicht werden.  Also "bem√ºht" wird immer noch schwach gesagt.  Die Kompatibilit√§t mit fr√ºheren Versionen der API f√ºr ein derart multivariates und komplexes System wie AWS aufrechtzuerhalten, ist unglaublich schwierig.  Jeder, der √∂ffentlich verf√ºgbare APIs unterst√ºtzen musste, die genauso h√§ufig verwendet werden, sollte verstehen, wie schwierig dies seit so vielen Jahren ist.  Aber das Verhalten von CloudFormation in meinem Ged√§chtnis hat sich im Laufe der Jahre nie ge√§ndert. </p><br><h3 id="znakomsya-noga-eto-pulya">  Treffen Sie das Bein ... es ist eine Kugel </h3><br><p>  Soweit ich wei√ü, ist es nicht m√∂glich, eine CloudFormation-Stack-Ressource eines Drittanbieters von meinem CF-Stack zu entfernen.  √Ñhnlich ist die Situation bei Terraform.  Hiermit k√∂nnen Sie vorhandene Ressourcen in Ihren Stack importieren.  Die Funktion, k√∂nnte man sagen, ist gro√üartig, aber mit gro√üer Kraft geht gro√üe Verantwortung einher.  Sie m√ºssen nur die Ressource auf den Stapel legen, und w√§hrend Sie mit Ihrem Stapel arbeiten, k√∂nnen Sie diese Ressource nicht l√∂schen oder √§ndern.  Einmal kam es vorbei.  Irgendwie hat auf einer Twitch-Site jemand versehentlich eine AWS-Sicherheitsgruppe in seinen eigenen Terraform-Stapel importiert, ohne dass ein Fehler aufgetreten ist.  Ich habe mehrere Befehle eingegeben und ... die Sicherheitsgruppe (zusammen mit dem eingehenden Datenverkehr) ist verschwunden. </p><br><h2 id="terraform-velikiy">  Terraform Gro√üartig </h2><br><h3 id="vosstanovlenie-iz-nepolnyh-sostoyaniy">  Teilweise Wiederherstellung </h3><br><p>  Manchmal kann CloudFormation nicht vollst√§ndig von einem Status in einen anderen wechseln.  Gleichzeitig wird er versuchen, zum vorherigen zur√ºckzukehren.  Sorry, das ist nicht immer machbar.  Dann ist das Debuggen von Ereignissen be√§ngstigend - Sie wissen nie, ob CloudFormation sich dar√ºber freuen wird, dass es geknackt ist - selbst zur Reparatur.  Aber wird er Erfolg haben oder nicht in den vorherigen Zustand zur√ºckkehren, wei√ü er wirklich nicht, wie er es bestimmen soll, und standardm√§√üig h√§ngt er stundenlang auf ein Wunder. </p><br><p>  Terraform hingegen neigt dazu, sich von erfolglosen √úberg√§ngen viel eleganter zu erholen, und bietet fortschrittliche Debugging-Tools. </p><br><h3 id="bolee-yasnye-izmeneniya-v-sostoyaniya-dokumenta">  Deutlichere √Ñnderungen im Dokumentstatus </h3><br><blockquote>  "Okay, Load Balancer, Sie wechseln. Aber wie?" <br><br>  - Ein besorgter Ingenieur, der bereit ist, die Best√§tigungstaste zu dr√ºcken. </blockquote><p>  Manchmal muss ich mit dem Lastenausgleich im CloudFormation-Stapel einige √Ñnderungen vornehmen, z. B. eine Portnummer hinzuf√ºgen oder eine Sicherheitsgruppe √§ndern.  CloudFormation-√Ñnderungen werden schwach angezeigt.  Wie bei Nadeln √ºberpr√ºfe ich die Yaml-Datei zehnmal, um sicherzustellen, dass ich nichts gel√∂scht habe, was ich brauchte, und nicht zu viel hinzugef√ºgt habe. </p><br><p>  Terraform ist in dieser Hinsicht viel transparenter.  Manchmal ist es sogar zu transparent (lesen: bekommt es).  Gl√ºcklicherweise enthielt die neueste Version eine verbesserte Anzeige von √Ñnderungen - jetzt k√∂nnen Sie deutlich sehen, was sich √§ndert. </p><br><h3 id="gibkost">  Flexibilit√§t </h3><br><blockquote>  Schreiben Sie Software vom Gegenteil. </blockquote><p>  Kurz gesagt, das wichtigste Unterscheidungsmerkmal langlebiger Software ist ihre F√§higkeit, sich an Ver√§nderungen anzupassen.  Schreiben Sie eine Software vom Gegenteil.  Ich habe oft gemerkt, dass ich einen "einfachen" Dienst in Anspruch genommen habe und dann angefangen habe, alles in einen einzelnen CloudFormation- oder Terraform-Stapel zu packen.  Und nat√ºrlich stellte sich Monate sp√§ter heraus, dass ich alles falsch verstanden habe und der Service eigentlich nicht einfach ist!  Und so muss ich irgendwie einen gro√üen Stapel in kleine Komponenten aufteilen.  Wenn Sie mit CloudFormation arbeiten, ist dies nur m√∂glich, indem Sie zuerst den vorhandenen Stapel neu erstellen. Dies ist jedoch bei meinen Datenbanken nicht der Fall.  Terraform hingegen erm√∂glichte es, den Stapel zu zerlegen und in verst√§ndlichere kleinere Teile aufzuteilen. </p><br><h3 id="moduli-v-git">  Module in Git </h3><br><p>  Das Teilen von Terraform-Code √ºber mehrere Stapel hinweg ist viel einfacher als das Teilen von CloudFormation-Code.  Mit Terraform k√∂nnen Sie Code in ein Git-Repository einf√ºgen und mithilfe der semantischen Versionskontrolle darauf zugreifen.  Jeder, der Zugriff auf dieses Repository hat, kann den freigegebenen Code wiederverwenden.  Das √Ñquivalent zu CloudFormation ist S3, aber es hat nicht die gleichen Vorteile, und es gibt keinen einzigen Grund, warum wir git vollst√§ndig zugunsten von S3 aufgeben sollten. </p><br><p>  Die Organisation wuchs und die F√§higkeit, gemeinsam genutzte Stapel zu teilen, erreichte ein kritisches Niveau.  Mit Terraform ist dies alles einfach und nat√ºrlich, w√§hrend CloudFormation Sie durch die Ringe springen l√§sst, bevor Sie etwas √Ñhnliches erhalten. </p><br><h3 id="operations-as-code">  Operationen als Code </h3><br><blockquote>  "Lass uns schreiben und okay." <br><br>  - Ein Ingenieur 3 Jahre vor der Erfindung des Terraform-Fahrrads. </blockquote><p>  Bei der Softwareentwicklung ist Go oder ein Java-Programm nicht nur Code. </p><br><p><img src="https://habrastorage.org/webt/qr/pf/ec/qrpfecwuy-rwjaj48w68nzl0asq.png"><br>  <em>Code als Code</em> </p><br><p>  Immerhin gibt es noch die Infrastruktur, auf der es funktioniert. </p><br><p><img src="https://habrastorage.org/webt/nm/m8/9e/nmm89e9lu99otghnv73ta7bdqh8.png"><br>  <em>Infrastruktur als Code</em> </p><br><p>  Aber wo kommt sie her?  Wie kann man es √ºberwachen?  Wo befindet sich Ihr Code?  Ben√∂tigen Entwickler Zugriffsberechtigungen? </p><br><p><img src="https://habrastorage.org/webt/hz/es/qs/hzesqsiuved-xhcccghgjoraxsi.png"><br>  <em>Operationen als Code</em> </p><br><blockquote>  Als Softwareentwickler m√ºssen Sie nicht nur Code schreiben. </blockquote><p>  Nicht AWS One: Sie m√ºssen andere Anbieter verwenden.  SignalFx, PagerDuty oder Github.  M√∂glicherweise haben Sie einen internen Jenkins-Server f√ºr CI / CD oder ein internes Grafana-Bedienfeld zur √úberwachung.  Infra as Code wird aus verschiedenen Gr√ºnden gew√§hlt und jeder ist f√ºr alles, was mit Software zu tun hat, gleicherma√üen wichtig. </p><br><p>  Als ich bei Twitch arbeitete, haben wir die Services in den gemischten eingebetteten Systemen und AWS-Systemen von Amazon beschleunigt.  Wir haben viele Microservices abgestempelt und unterst√ºtzt, was die Betriebskosten erh√∂ht.  Die Diskussionen wurden in etwa folgender Weise gef√ºhrt: </p><br><ul><li>  <strong>Ich</strong> : Verdammt, viele Gesten, um einen Microservice zu zerstreuen.  Ich muss diesen M√ºll verwenden, um ein AWS-Konto zu erstellen (wir haben 2 Konten f√ºr <strong>Microservice aufgerufen</strong> ), dann dieses, um Warnungen einzurichten, dieses f√ºr das Code-Repository und dieses f√ºr die Liste der E-Mail-Adressen und dieses. . </li><li>  <strong>Blei</strong> : Lassen Sie uns Skript und okay. </li><li>  <strong>Me</strong> : Frets, aber das Skript selbst wird sich √§ndern.  Sie m√ºssen √ºberpr√ºfen, ob alle diese eingebauten Amazon Gizmos auf dem neuesten Stand sind. </li><li>  <strong>Blei</strong> : H√∂rt sich gut an.  Und daf√ºr schreiben wir ein Skript. </li><li>  <strong>Ich</strong> : Gro√üartig!  Und das Skript muss wahrscheinlich noch die Parameter einstellen.  Wird er sie akzeptieren? </li><li>  <strong>Blei</strong> : Ja, er wird, wohin wird er gehen! </li><li>  <strong>Ich</strong> : Der Prozess kann sich √§ndern, die Abw√§rtskompatibilit√§t geht verloren.  Es wird eine semantische Versionskontrolle erfordern. </li><li>  <strong>Blei</strong> : Tolle Idee! </li><li>  <strong>Ich</strong> : Werkzeuge k√∂nnen manuell √ºber die Benutzeroberfl√§che ge√§ndert werden.  Wir brauchen eine M√∂glichkeit, dies zu √ºberpr√ºfen und zu beheben. </li></ul><br><p>  <em>... 3 Jahre sp√§ter:</em> </p><br><ul><li>  <strong>Blei</strong> : Und wir haben Terraform. </li></ul><br><p>  Die Moral der Fabel lautet: Auch wenn Sie <strong>in ganz Amazonien Hals √ºber Kopf sind</strong> , verwenden Sie etwas, das nicht von AWS stammt, und diese Dienste haben einen Status, den die Sprache f√ºr die Konfiguration verwendet, um diesen Status zu synchronisieren. </p><br><h3 id="cloudformation-lambda-vs-git-moduli-terraform">  CloudFormation Lambda vs Git Module Terraform </h3><br><p>  Lambda ist die CloudFormation-L√∂sung f√ºr benutzerdefinierte Logikprobleme.  Mit Lambda k√∂nnen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Makros</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">benutzerdefinierte Ressourcen</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erstellen</a> .  Dieser Ansatz bietet zus√§tzliche Schwierigkeiten, die Terraform bei der semantischen Versionskontrolle von Git-Modulen nicht hat.  F√ºr mich war das dringlichste Problem die Verwaltung der Berechtigungen f√ºr all diese benutzerdefinierten Lambda (bei denen es sich um Dutzende von AWS-Konten handelt).  Ein weiteres wichtiges Problem war ein Problem wie ‚ÄûWas ist vorher passiert - ein Huhn oder ein Ei?‚Äú: Es wurde mit dem Lambda-Code in Verbindung gebracht.  Diese Funktion selbst ist Infrastruktur und Code und muss selbst √ºberwacht und aktualisiert werden.  Das letzte Highlight im Sarg war die Schwierigkeit, √Ñnderungen am Lambda-Code semantisch zu aktualisieren.  Es musste auch sichergestellt werden, dass sich die Aktionen des Stapels ohne direkten Befehl zwischen den Starts nicht √§ndern. </p><br><p>  Ich erinnere mich, dass ich irgendwie eine kanarische Bereitstellung f√ºr die Elastic Beanstalk-Umgebung mit einem klassischen Load Balancer erstellen wollte.  Am einfachsten w√§re es, eine zweite Bereitstellung f√ºr EB neben der Produktionsumgebung vorzunehmen und einen weiteren Schritt zu unternehmen: indem die automatisch skalierbare Canary-Bereitstellungsgruppe mit der Bereitstellungs-LB in der Produktionsumgebung kombiniert wird.  Und da Terraform den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ASG-Antrag als Ausgabe verwendet</a> , werden in Terraform 4 zus√§tzliche Codezeilen ben√∂tigt.  Als ich fragte, ob es eine vergleichbare L√∂sung in CloudFormation gibt, verwiesen sie mich auf ein ganzes Repository in Git mit einer Bereitstellungspipeline und mehr: all dies, um die ungl√ºcklichen 4 Zeilen Terraform-Code zu unterst√ºtzen. </p><br><h3 id="on-luchshe-obnaruzhivaet-dreyf">  Er erkennt besser Drift </h3><br><blockquote>  Stellen Sie sicher, dass die Realit√§t den Erwartungen entspricht. </blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Drifterkennung</a> ist eine sehr leistungsf√§hige Operation als Code, da sie dazu beitr√§gt, dass die Realit√§t den Erwartungen entspricht.  Es ist sowohl mit CloudFormation als auch mit Terraform verf√ºgbar.  Mit der Zunahme des Arbeitsstapels ergab die Driftsuche von CloudFormation jedoch immer mehr Fehlalarme. </p><br><p>  Mit Terraform verf√ºgen Sie √ºber wesentlich fortschrittlichere Lifecycle-Hooks zur Drifterkennung.  Beispielsweise geben Sie den Befehl <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ignore_changes</a> direkt in die Definition einer ECS-Aufgabe ein, wenn Sie √Ñnderungen in der Definition einer bestimmten Aufgabe ignorieren m√∂chten, ohne √Ñnderungen in der gesamten ECS-Bereitstellung zu ignorieren. </p><br><h2 id="cdk-i-buduschee-cloudformation">  CDK und die Zukunft von CloudFormation </h2><br><p>  CloudFormation ist im gro√üen, infrastruktur√ºbergreifenden Ma√üstab schwer zu verwalten.  Viele dieser Schwierigkeiten werden erkannt, und das Tool ben√∂tigt Dinge wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aws-cdk</a> , ein Framework zum Definieren einer Cloud-Infrastruktur im Code und zum Weiterleiten √ºber AWS CloudFormation.  Er wird gespannt sein, was aws-cdk in Zukunft haben wird, aber es wird schwierig f√ºr ihn sein, mit den anderen Vorteilen von Terraform zu konkurrieren.  Um CloudFormation zu straffen, sind globale √Ñnderungen erforderlich. </p><br><h3 id="chtoby-terraform-ne-razocharoval">  Terraform entt√§uscht also nicht </h3><br><blockquote>  Dies ist "Infrastruktur als CODE", nicht "als Text". </blockquote><p>  Mein erster Eindruck von Terraform war ziemlich schlecht.  Ich glaube, ich habe den Ansatz einfach nicht verstanden.  Fast alle Ingenieure nehmen es zun√§chst unfreiwillig als Textformat wahr, das in die gew√ºnschte Infrastruktur konvertiert werden muss.  NICHT SO. </p><br><h3 id="propisnye-istiny-horoshey-razrabotki-po-otnosyatsya-i-k-terraform">  Gemeinsame Wahrheiten einer guten Softwareentwicklung gelten f√ºr Terraform </h3><br><p>  Ich habe gesehen, wie viele Methoden zum Erstellen von gutem Code in Terraform ignoriert werden.  Sie haben jahrelang studiert, um ein guter Programmierer zu werden.  Geben Sie diese Erfahrung nicht einfach auf, weil Sie mit Terraform arbeiten.  Die allgemeinen Wahrheiten einer guten Softwareentwicklung gelten auch f√ºr Terraform. </p><br><h3 id="kak-uzh-kod-i-ne-zadokumentirovat">  Wie kann der Code nicht dokumentiert werden? </h3><br><p>  Ich stie√ü auf riesige Terraform-Stapel ohne Dokumentation.  Wie kann ich Code in Seiten schreiben - ganz ohne Dokumentation?  F√ºgen Sie eine Dokumentation hinzu, die Ihren Terraform- <strong>Code</strong> erkl√§rt (der Schwerpunkt liegt hier auf dem Wort "Code"), warum dieser Abschnitt so wichtig ist und was Sie tun. </p><br><h3 id="kak-mozhno-razvorachivat-servisy-kotorye-nekogda-byli-odnoy-bolshoy-funkciey-main">  Wie k√∂nnen Sie Dienste bereitstellen, die einst eine gro√üe main () - Funktion waren? </h3><br><p>  Ich traf sehr komplexe Terraform-Stapel, die als einzelnes Modul pr√§sentiert wurden.  Warum stellen wir keine solche Software bereit?  Warum gro√üe Funktionen in kleinere aufteilen?  Die gleichen Antworten gelten f√ºr Terraform.  Wenn Ihr Modul zu gro√ü ist, m√ºssen Sie es in kleinere Module aufteilen. </p><br><h3 id="razve-vasha-kompaniya-ne-polzuetsya-bibliotekami">  Verwendet Ihr Unternehmen keine Bibliotheken? </h3><br><p>  Ich habe gesehen, wie Ingenieure, die mit Terraform ein neues Projekt gestartet haben, dummerweise riesige Teile aus anderen Projekten in ihre eigenen kopiert haben und sie dann ausgew√§hlt haben, bis es zu funktionieren begann.  W√ºrden Sie in Ihrem Unternehmen mit dem ‚ÄûKampf‚Äú -Code arbeiten?  Wir benutzen nicht nur Bibliotheken.  Ja, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht alles sollte eine Bibliothek sein,</a> aber wo sind wir im Prinzip ohne gemeinsam genutzte Bibliotheken ?! </p><br><h3 id="razve-vy-ne-polzuetes-pep8-ili-gofmt">  Verwenden Sie nicht PEP8 oder gofmt? </h3><br><p>  Die meisten Sprachen haben ein standardm√§√üig akzeptiertes Formatierungsschema.  In Python ist dies PEP8.  In Go - gofmt.  Terraform hat seine eigene: <code>terraform fmt</code> .  Gebrauch f√ºr Gesundheit! </p><br><h3 id="vy-stanete-polzovatsya-react-ne-znaya-javascript">  Wirst du React verwenden, ohne JavaScript zu kennen? </h3><br><p>  Terraform-Module k√∂nnen einen Teil der komplexen Infrastruktur, die Sie erstellen, vereinfachen. Dies bedeutet jedoch nicht, dass Sie sie √ºberhaupt √ºberspringen k√∂nnen.  M√∂chten Sie Terraform richtig verwenden, ohne die Ressourcen zu verstehen?  Du bist zum Scheitern verurteilt: Die Zeit wird vergehen, aber du wirst Terraform nicht beherrschen. </p><br><h3 id="vy-kodite-singltonami-ili-vnedryaya-zavisimosti">  Codieren Sie Singletones oder f√ºhren Sie Abh√§ngigkeiten ein? </h3><br><p>  Die Abh√§ngigkeitsinjektion ist die anerkannte Best Practice f√ºr die Softwareentwicklung, die von Singletones bevorzugt wird.  Wie ist das in Terraform n√ºtzlich?  Ich habe Terraform-Module je nach Remote-Status getroffen.  Anstatt Module zu schreiben, die aus einem Remote-Status extrahiert werden, schreiben Sie ein Modul, das Parameter akzeptiert.  √úbergeben Sie diese Parameter dann an das Modul. </p><br><h3 id="vashi-biblioteki-delayut-desyat-veschey-horosho-ili-odnu---otlichno">  Machen Ihre Bibliotheken zehn Dinge gut oder eine Sache gro√üartig? </h3><br><p>  Bibliotheken, die sich auf eine einzelne Aufgabe konzentrieren und die am besten funktionieren.  Anstatt gro√üe Terraform-Module zu schreiben, die versuchen, alles auf einmal zu erledigen, sollten Sie Teile davon erstellen, die eine Sache gut machen.  Und kombinieren Sie sie dann nach Ihren W√ºnschen. </p><br><h3 id="kak-vy-proizvodite-izmeneniya-v-bibliotekah-bez-obratnoy-sovmestimosti">  Wie nehmen Sie √Ñnderungen an Bibliotheken ohne Abw√§rtskompatibilit√§t vor? </h3><br><p>  Das allgemeine Terraform-Modul muss wie eine regul√§re Bibliothek Benutzer irgendwie √ºber √Ñnderungen informieren, ohne abw√§rtskompatibel zu sein.  Wenn solche √Ñnderungen in Bibliotheken auftreten, ist dies √§rgerlich und ebenso √§rgerlich, wenn √Ñnderungen ohne Abw√§rtskompatibilit√§t in Terraform-Modulen vorgenommen werden.  Es wird empfohlen, Git-Tags und Semver zu verwenden, wenn Terraform-Module verwendet werden. </p><br><h3 id="proizvodstvennyy-servis-zapuschen-u-vas-na-noutbuke-ili-v-datacentre">  Wird der Produktionsdienst auf Ihrem Laptop oder in einem Rechenzentrum gestartet? </h3><br><p>  Hashicorp verf√ºgt √ºber Tools wie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terraform Cloud</a> zum Starten Ihrer Terraform.  Diese zentralisierten Dienste erleichtern die Verwaltung, Pr√ºfung und Genehmigung von Terraform-√Ñnderungen. </p><br><h3 id="razve-vy-ne-pishete-testy">  Schreibst du keine Tests? </h3><br><p>  Ingenieure geben zu, dass der Code getestet werden muss, h√§mmern jedoch h√§ufig selbst auf √úberpr√ºfungen, wenn sie mit Terraform arbeiten.  F√ºr die Infrastruktur ist dies mit schleichenden Momenten behaftet.  Ich empfehle Ihnen, Stapel mithilfe von Modulen zu "testen" oder "Beispiele zu erstellen", die zur √úberpr√ºfung w√§hrend CI / CD ordnungsgem√§√ü bereitgestellt werden k√∂nnen. </p><br><h3 id="terraform-i-mikroservisy">  Terraform und Microservices </h3><br><blockquote>  Leben und Tod von Microservice-Unternehmen h√§ngen von der Geschwindigkeit, Aktualisierung und Zerst√∂rung neuer Microservice-Arbeitsstapel ab. </blockquote><p>  Der h√§ufigste negative Punkt in Bezug auf Mikrodienstarchitekturen, der in keiner Weise beseitigt werden kann, h√§ngt mit der Arbeit und nicht mit dem Code zusammen.  Wenn Sie Terraform nur verwenden, um nur die Infrastrukturseite der Microservice-Architektur zu automatisieren, berauben Sie sich der wahren Vorteile dieses Systems.  Jetzt ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">alles wie Code</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de474546/">https://habr.com/ru/post/de474546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de474532/index.html">Radiolabor von Nischni Nowgorod und Radios mit Kristalldetektoren</a></li>
<li><a href="../de474534/index.html">Alan Turing Book und Mysterious Note - Wissenschaftsdetektiv</a></li>
<li><a href="../de474536/index.html">Die Geschichte eines kleinen Projekts von zw√∂lf Jahren L√§nge (zum ersten Mal und ehrlich aus erster Hand √ºber BIRMA.NET)</a></li>
<li><a href="../de474540/index.html">So erstellen Sie coole Chefs. Shadow Fight 3 Entwicklererfahrung</a></li>
<li><a href="../de474544/index.html">R√ºckblick auf GeForce NOW in Russland: Vor- und Nachteile sowie Perspektiven</a></li>
<li><a href="../de474548/index.html">Google BERT ist ein neuer Suchalgorithmus. Wie wird sich das Ranking √§ndern und was ist jetzt zu tun?</a></li>
<li><a href="../de474550/index.html">Wie kann ich die gr√ºne TLS-Anzeige im neuen Firefox 70 zur√ºckgeben?</a></li>
<li><a href="../de474554/index.html">Intel Tremont - Neue Mikroarchitektur f√ºr Energieeffizienz</a></li>
<li><a href="../de474556/index.html">So machen Sie PCRE2-Unterst√ºtzung f√ºr Apache 2.4</a></li>
<li><a href="../de474558/index.html">Protokollorientierte Programmierung, Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>