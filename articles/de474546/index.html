<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>❕ 🌊 💪🏿 Von Terraform zu CloudFormation gewechselt - und es bereut 🤽🏻 🕒 🚣🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Darstellung der Infrastruktur als Code in einem wiederholbaren Textformat ist eine einfache bewährte Methode für Systeme, mit denen Sie nichts zu ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Von Terraform zu CloudFormation gewechselt - und es bereut</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/474546/"><p>  Die Darstellung der Infrastruktur als Code in einem wiederholbaren Textformat ist eine einfache bewährte Methode für Systeme, mit denen Sie nichts zu tun haben.  Diese Vorgehensweise hat einen Namen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Infrastruktur als Code</a> . Bisher gibt es zwei beliebte Tools für die Implementierung, insbesondere in AWS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terraform</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CloudFormation</a> . </p><br><p><img src="https://habrastorage.org/webt/ff/f_/rw/fff_rw-n0dk_n_l6qxrxkp_-h9i.png"><br>  <em>Vergleichen Sie die Erfahrungen mit Terraform und CloudFormation</em> </p><br><p>  Bevor ich zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Twitch</a> (aka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Amazon Jr.</a> ) kam, arbeitete ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in einem Startup</a> und benutzte Terraform drei Jahre lang.  An einem neuen Ort habe ich Terraform auch mit Macht und Kraft verwendet, und dann hat das Unternehmen den Übergang zu allem a la Amazon vorangetrieben, einschließlich CloudFormation.  Ich habe hart gearbeitet, um Best Practices für beide zu entwickeln, und ich habe beide Tools in sehr komplexen Workflows im gesamten Unternehmen verwendet.  Später, nachdem ich die Konsequenzen des Wechsels von Terraform zu CloudFormation sorgfältig geprüft hatte, wurde ich überzeugt, dass Terraform wahrscheinlich die beste Wahl für das Unternehmen war. </p><a name="habracut"></a><br><h2 id="terraform-uzhasnyy">  Terraform schrecklich </h2><br><h3 id="beta-versiya-po">  Beta-Software </h3><br><p> Terraform hat noch nicht einmal Version 1.0 veröffentlicht, und dies ist ein guter Grund, sie nicht zu verwenden.  Seit ich es zum ersten Mal selbst getestet habe, hat es sich stark verändert, aber dann ist die <code>terraform apply</code> oft nach mehreren Updates oder nur nach ein paar Betriebsjahren unterbrochen.  Ich würde sagen, dass "jetzt alles anders ist", aber ... also scheint jeder nein zu sagen?  Es gibt Änderungen, die mit früheren Versionen nicht kompatibel sind, obwohl sie angemessen sind, und sogar das Gefühl ist, dass die Syntax und Abstraktionen von Ressourcenspeichern jetzt genau das sind, was Sie brauchen.  Das Tool schien besser zu sein, aber ...: -0 </p><br><p>  AWS hingegen hat gute Arbeit geleistet, um die Kompatibilität mit früheren Versionen aufrechtzuerhalten.  Alle, wahrscheinlich, weil ihre Dienste innerhalb der Organisation häufig gut getestet und erst dann umbenannt und veröffentlicht werden.  Also "bemüht" wird immer noch schwach gesagt.  Die Kompatibilität mit früheren Versionen der API für ein derart multivariates und komplexes System wie AWS aufrechtzuerhalten, ist unglaublich schwierig.  Jeder, der öffentlich verfügbare APIs unterstützen musste, die genauso häufig verwendet werden, sollte verstehen, wie schwierig dies seit so vielen Jahren ist.  Aber das Verhalten von CloudFormation in meinem Gedächtnis hat sich im Laufe der Jahre nie geändert. </p><br><h3 id="znakomsya-noga-eto-pulya">  Treffen Sie das Bein ... es ist eine Kugel </h3><br><p>  Soweit ich weiß, ist es nicht möglich, eine CloudFormation-Stack-Ressource eines Drittanbieters von meinem CF-Stack zu entfernen.  Ähnlich ist die Situation bei Terraform.  Hiermit können Sie vorhandene Ressourcen in Ihren Stack importieren.  Die Funktion, könnte man sagen, ist großartig, aber mit großer Kraft geht große Verantwortung einher.  Sie müssen nur die Ressource auf den Stapel legen, und während Sie mit Ihrem Stapel arbeiten, können Sie diese Ressource nicht löschen oder ändern.  Einmal kam es vorbei.  Irgendwie hat auf einer Twitch-Site jemand versehentlich eine AWS-Sicherheitsgruppe in seinen eigenen Terraform-Stapel importiert, ohne dass ein Fehler aufgetreten ist.  Ich habe mehrere Befehle eingegeben und ... die Sicherheitsgruppe (zusammen mit dem eingehenden Datenverkehr) ist verschwunden. </p><br><h2 id="terraform-velikiy">  Terraform Großartig </h2><br><h3 id="vosstanovlenie-iz-nepolnyh-sostoyaniy">  Teilweise Wiederherstellung </h3><br><p>  Manchmal kann CloudFormation nicht vollständig von einem Status in einen anderen wechseln.  Gleichzeitig wird er versuchen, zum vorherigen zurückzukehren.  Sorry, das ist nicht immer machbar.  Dann ist das Debuggen von Ereignissen beängstigend - Sie wissen nie, ob CloudFormation sich darüber freuen wird, dass es geknackt ist - selbst zur Reparatur.  Aber wird er Erfolg haben oder nicht in den vorherigen Zustand zurückkehren, weiß er wirklich nicht, wie er es bestimmen soll, und standardmäßig hängt er stundenlang auf ein Wunder. </p><br><p>  Terraform hingegen neigt dazu, sich von erfolglosen Übergängen viel eleganter zu erholen, und bietet fortschrittliche Debugging-Tools. </p><br><h3 id="bolee-yasnye-izmeneniya-v-sostoyaniya-dokumenta">  Deutlichere Änderungen im Dokumentstatus </h3><br><blockquote>  "Okay, Load Balancer, Sie wechseln. Aber wie?" <br><br>  - Ein besorgter Ingenieur, der bereit ist, die Bestätigungstaste zu drücken. </blockquote><p>  Manchmal muss ich mit dem Lastenausgleich im CloudFormation-Stapel einige Änderungen vornehmen, z. B. eine Portnummer hinzufügen oder eine Sicherheitsgruppe ändern.  CloudFormation-Änderungen werden schwach angezeigt.  Wie bei Nadeln überprüfe ich die Yaml-Datei zehnmal, um sicherzustellen, dass ich nichts gelöscht habe, was ich brauchte, und nicht zu viel hinzugefügt habe. </p><br><p>  Terraform ist in dieser Hinsicht viel transparenter.  Manchmal ist es sogar zu transparent (lesen: bekommt es).  Glücklicherweise enthielt die neueste Version eine verbesserte Anzeige von Änderungen - jetzt können Sie deutlich sehen, was sich ändert. </p><br><h3 id="gibkost">  Flexibilität </h3><br><blockquote>  Schreiben Sie Software vom Gegenteil. </blockquote><p>  Kurz gesagt, das wichtigste Unterscheidungsmerkmal langlebiger Software ist ihre Fähigkeit, sich an Veränderungen anzupassen.  Schreiben Sie eine Software vom Gegenteil.  Ich habe oft gemerkt, dass ich einen "einfachen" Dienst in Anspruch genommen habe und dann angefangen habe, alles in einen einzelnen CloudFormation- oder Terraform-Stapel zu packen.  Und natürlich stellte sich Monate später heraus, dass ich alles falsch verstanden habe und der Service eigentlich nicht einfach ist!  Und so muss ich irgendwie einen großen Stapel in kleine Komponenten aufteilen.  Wenn Sie mit CloudFormation arbeiten, ist dies nur möglich, indem Sie zuerst den vorhandenen Stapel neu erstellen. Dies ist jedoch bei meinen Datenbanken nicht der Fall.  Terraform hingegen ermöglichte es, den Stapel zu zerlegen und in verständlichere kleinere Teile aufzuteilen. </p><br><h3 id="moduli-v-git">  Module in Git </h3><br><p>  Das Teilen von Terraform-Code über mehrere Stapel hinweg ist viel einfacher als das Teilen von CloudFormation-Code.  Mit Terraform können Sie Code in ein Git-Repository einfügen und mithilfe der semantischen Versionskontrolle darauf zugreifen.  Jeder, der Zugriff auf dieses Repository hat, kann den freigegebenen Code wiederverwenden.  Das Äquivalent zu CloudFormation ist S3, aber es hat nicht die gleichen Vorteile, und es gibt keinen einzigen Grund, warum wir git vollständig zugunsten von S3 aufgeben sollten. </p><br><p>  Die Organisation wuchs und die Fähigkeit, gemeinsam genutzte Stapel zu teilen, erreichte ein kritisches Niveau.  Mit Terraform ist dies alles einfach und natürlich, während CloudFormation Sie durch die Ringe springen lässt, bevor Sie etwas Ähnliches erhalten. </p><br><h3 id="operations-as-code">  Operationen als Code </h3><br><blockquote>  "Lass uns schreiben und okay." <br><br>  - Ein Ingenieur 3 Jahre vor der Erfindung des Terraform-Fahrrads. </blockquote><p>  Bei der Softwareentwicklung ist Go oder ein Java-Programm nicht nur Code. </p><br><p><img src="https://habrastorage.org/webt/qr/pf/ec/qrpfecwuy-rwjaj48w68nzl0asq.png"><br>  <em>Code als Code</em> </p><br><p>  Immerhin gibt es noch die Infrastruktur, auf der es funktioniert. </p><br><p><img src="https://habrastorage.org/webt/nm/m8/9e/nmm89e9lu99otghnv73ta7bdqh8.png"><br>  <em>Infrastruktur als Code</em> </p><br><p>  Aber wo kommt sie her?  Wie kann man es überwachen?  Wo befindet sich Ihr Code?  Benötigen Entwickler Zugriffsberechtigungen? </p><br><p><img src="https://habrastorage.org/webt/hz/es/qs/hzesqsiuved-xhcccghgjoraxsi.png"><br>  <em>Operationen als Code</em> </p><br><blockquote>  Als Softwareentwickler müssen Sie nicht nur Code schreiben. </blockquote><p>  Nicht AWS One: Sie müssen andere Anbieter verwenden.  SignalFx, PagerDuty oder Github.  Möglicherweise haben Sie einen internen Jenkins-Server für CI / CD oder ein internes Grafana-Bedienfeld zur Überwachung.  Infra as Code wird aus verschiedenen Gründen gewählt und jeder ist für alles, was mit Software zu tun hat, gleichermaßen wichtig. </p><br><p>  Als ich bei Twitch arbeitete, haben wir die Services in den gemischten eingebetteten Systemen und AWS-Systemen von Amazon beschleunigt.  Wir haben viele Microservices abgestempelt und unterstützt, was die Betriebskosten erhöht.  Die Diskussionen wurden in etwa folgender Weise geführt: </p><br><ul><li>  <strong>Ich</strong> : Verdammt, viele Gesten, um einen Microservice zu zerstreuen.  Ich muss diesen Müll verwenden, um ein AWS-Konto zu erstellen (wir haben 2 Konten für <strong>Microservice aufgerufen</strong> ), dann dieses, um Warnungen einzurichten, dieses für das Code-Repository und dieses für die Liste der E-Mail-Adressen und dieses. . </li><li>  <strong>Blei</strong> : Lassen Sie uns Skript und okay. </li><li>  <strong>Me</strong> : Frets, aber das Skript selbst wird sich ändern.  Sie müssen überprüfen, ob alle diese eingebauten Amazon Gizmos auf dem neuesten Stand sind. </li><li>  <strong>Blei</strong> : Hört sich gut an.  Und dafür schreiben wir ein Skript. </li><li>  <strong>Ich</strong> : Großartig!  Und das Skript muss wahrscheinlich noch die Parameter einstellen.  Wird er sie akzeptieren? </li><li>  <strong>Blei</strong> : Ja, er wird, wohin wird er gehen! </li><li>  <strong>Ich</strong> : Der Prozess kann sich ändern, die Abwärtskompatibilität geht verloren.  Es wird eine semantische Versionskontrolle erfordern. </li><li>  <strong>Blei</strong> : Tolle Idee! </li><li>  <strong>Ich</strong> : Werkzeuge können manuell über die Benutzeroberfläche geändert werden.  Wir brauchen eine Möglichkeit, dies zu überprüfen und zu beheben. </li></ul><br><p>  <em>... 3 Jahre später:</em> </p><br><ul><li>  <strong>Blei</strong> : Und wir haben Terraform. </li></ul><br><p>  Die Moral der Fabel lautet: Auch wenn Sie <strong>in ganz Amazonien Hals über Kopf sind</strong> , verwenden Sie etwas, das nicht von AWS stammt, und diese Dienste haben einen Status, den die Sprache für die Konfiguration verwendet, um diesen Status zu synchronisieren. </p><br><h3 id="cloudformation-lambda-vs-git-moduli-terraform">  CloudFormation Lambda vs Git Module Terraform </h3><br><p>  Lambda ist die CloudFormation-Lösung für benutzerdefinierte Logikprobleme.  Mit Lambda können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Makros</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">benutzerdefinierte Ressourcen</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">erstellen</a> .  Dieser Ansatz bietet zusätzliche Schwierigkeiten, die Terraform bei der semantischen Versionskontrolle von Git-Modulen nicht hat.  Für mich war das dringlichste Problem die Verwaltung der Berechtigungen für all diese benutzerdefinierten Lambda (bei denen es sich um Dutzende von AWS-Konten handelt).  Ein weiteres wichtiges Problem war ein Problem wie „Was ist vorher passiert - ein Huhn oder ein Ei?“: Es wurde mit dem Lambda-Code in Verbindung gebracht.  Diese Funktion selbst ist Infrastruktur und Code und muss selbst überwacht und aktualisiert werden.  Das letzte Highlight im Sarg war die Schwierigkeit, Änderungen am Lambda-Code semantisch zu aktualisieren.  Es musste auch sichergestellt werden, dass sich die Aktionen des Stapels ohne direkten Befehl zwischen den Starts nicht ändern. </p><br><p>  Ich erinnere mich, dass ich irgendwie eine kanarische Bereitstellung für die Elastic Beanstalk-Umgebung mit einem klassischen Load Balancer erstellen wollte.  Am einfachsten wäre es, eine zweite Bereitstellung für EB neben der Produktionsumgebung vorzunehmen und einen weiteren Schritt zu unternehmen: indem die automatisch skalierbare Canary-Bereitstellungsgruppe mit der Bereitstellungs-LB in der Produktionsumgebung kombiniert wird.  Und da Terraform den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ASG-Antrag als Ausgabe verwendet</a> , werden in Terraform 4 zusätzliche Codezeilen benötigt.  Als ich fragte, ob es eine vergleichbare Lösung in CloudFormation gibt, verwiesen sie mich auf ein ganzes Repository in Git mit einer Bereitstellungspipeline und mehr: all dies, um die unglücklichen 4 Zeilen Terraform-Code zu unterstützen. </p><br><h3 id="on-luchshe-obnaruzhivaet-dreyf">  Er erkennt besser Drift </h3><br><blockquote>  Stellen Sie sicher, dass die Realität den Erwartungen entspricht. </blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Drifterkennung</a> ist eine sehr leistungsfähige Operation als Code, da sie dazu beiträgt, dass die Realität den Erwartungen entspricht.  Es ist sowohl mit CloudFormation als auch mit Terraform verfügbar.  Mit der Zunahme des Arbeitsstapels ergab die Driftsuche von CloudFormation jedoch immer mehr Fehlalarme. </p><br><p>  Mit Terraform verfügen Sie über wesentlich fortschrittlichere Lifecycle-Hooks zur Drifterkennung.  Beispielsweise geben Sie den Befehl <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ignore_changes</a> direkt in die Definition einer ECS-Aufgabe ein, wenn Sie Änderungen in der Definition einer bestimmten Aufgabe ignorieren möchten, ohne Änderungen in der gesamten ECS-Bereitstellung zu ignorieren. </p><br><h2 id="cdk-i-buduschee-cloudformation">  CDK und die Zukunft von CloudFormation </h2><br><p>  CloudFormation ist im großen, infrastrukturübergreifenden Maßstab schwer zu verwalten.  Viele dieser Schwierigkeiten werden erkannt, und das Tool benötigt Dinge wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aws-cdk</a> , ein Framework zum Definieren einer Cloud-Infrastruktur im Code und zum Weiterleiten über AWS CloudFormation.  Er wird gespannt sein, was aws-cdk in Zukunft haben wird, aber es wird schwierig für ihn sein, mit den anderen Vorteilen von Terraform zu konkurrieren.  Um CloudFormation zu straffen, sind globale Änderungen erforderlich. </p><br><h3 id="chtoby-terraform-ne-razocharoval">  Terraform enttäuscht also nicht </h3><br><blockquote>  Dies ist "Infrastruktur als CODE", nicht "als Text". </blockquote><p>  Mein erster Eindruck von Terraform war ziemlich schlecht.  Ich glaube, ich habe den Ansatz einfach nicht verstanden.  Fast alle Ingenieure nehmen es zunächst unfreiwillig als Textformat wahr, das in die gewünschte Infrastruktur konvertiert werden muss.  NICHT SO. </p><br><h3 id="propisnye-istiny-horoshey-razrabotki-po-otnosyatsya-i-k-terraform">  Gemeinsame Wahrheiten einer guten Softwareentwicklung gelten für Terraform </h3><br><p>  Ich habe gesehen, wie viele Methoden zum Erstellen von gutem Code in Terraform ignoriert werden.  Sie haben jahrelang studiert, um ein guter Programmierer zu werden.  Geben Sie diese Erfahrung nicht einfach auf, weil Sie mit Terraform arbeiten.  Die allgemeinen Wahrheiten einer guten Softwareentwicklung gelten auch für Terraform. </p><br><h3 id="kak-uzh-kod-i-ne-zadokumentirovat">  Wie kann der Code nicht dokumentiert werden? </h3><br><p>  Ich stieß auf riesige Terraform-Stapel ohne Dokumentation.  Wie kann ich Code in Seiten schreiben - ganz ohne Dokumentation?  Fügen Sie eine Dokumentation hinzu, die Ihren Terraform- <strong>Code</strong> erklärt (der Schwerpunkt liegt hier auf dem Wort "Code"), warum dieser Abschnitt so wichtig ist und was Sie tun. </p><br><h3 id="kak-mozhno-razvorachivat-servisy-kotorye-nekogda-byli-odnoy-bolshoy-funkciey-main">  Wie können Sie Dienste bereitstellen, die einst eine große main () - Funktion waren? </h3><br><p>  Ich traf sehr komplexe Terraform-Stapel, die als einzelnes Modul präsentiert wurden.  Warum stellen wir keine solche Software bereit?  Warum große Funktionen in kleinere aufteilen?  Die gleichen Antworten gelten für Terraform.  Wenn Ihr Modul zu groß ist, müssen Sie es in kleinere Module aufteilen. </p><br><h3 id="razve-vasha-kompaniya-ne-polzuetsya-bibliotekami">  Verwendet Ihr Unternehmen keine Bibliotheken? </h3><br><p>  Ich habe gesehen, wie Ingenieure, die mit Terraform ein neues Projekt gestartet haben, dummerweise riesige Teile aus anderen Projekten in ihre eigenen kopiert haben und sie dann ausgewählt haben, bis es zu funktionieren begann.  Würden Sie in Ihrem Unternehmen mit dem „Kampf“ -Code arbeiten?  Wir benutzen nicht nur Bibliotheken.  Ja, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht alles sollte eine Bibliothek sein,</a> aber wo sind wir im Prinzip ohne gemeinsam genutzte Bibliotheken ?! </p><br><h3 id="razve-vy-ne-polzuetes-pep8-ili-gofmt">  Verwenden Sie nicht PEP8 oder gofmt? </h3><br><p>  Die meisten Sprachen haben ein standardmäßig akzeptiertes Formatierungsschema.  In Python ist dies PEP8.  In Go - gofmt.  Terraform hat seine eigene: <code>terraform fmt</code> .  Gebrauch für Gesundheit! </p><br><h3 id="vy-stanete-polzovatsya-react-ne-znaya-javascript">  Wirst du React verwenden, ohne JavaScript zu kennen? </h3><br><p>  Terraform-Module können einen Teil der komplexen Infrastruktur, die Sie erstellen, vereinfachen. Dies bedeutet jedoch nicht, dass Sie sie überhaupt überspringen können.  Möchten Sie Terraform richtig verwenden, ohne die Ressourcen zu verstehen?  Du bist zum Scheitern verurteilt: Die Zeit wird vergehen, aber du wirst Terraform nicht beherrschen. </p><br><h3 id="vy-kodite-singltonami-ili-vnedryaya-zavisimosti">  Codieren Sie Singletones oder führen Sie Abhängigkeiten ein? </h3><br><p>  Die Abhängigkeitsinjektion ist die anerkannte Best Practice für die Softwareentwicklung, die von Singletones bevorzugt wird.  Wie ist das in Terraform nützlich?  Ich habe Terraform-Module je nach Remote-Status getroffen.  Anstatt Module zu schreiben, die aus einem Remote-Status extrahiert werden, schreiben Sie ein Modul, das Parameter akzeptiert.  Übergeben Sie diese Parameter dann an das Modul. </p><br><h3 id="vashi-biblioteki-delayut-desyat-veschey-horosho-ili-odnu---otlichno">  Machen Ihre Bibliotheken zehn Dinge gut oder eine Sache großartig? </h3><br><p>  Bibliotheken, die sich auf eine einzelne Aufgabe konzentrieren und die am besten funktionieren.  Anstatt große Terraform-Module zu schreiben, die versuchen, alles auf einmal zu erledigen, sollten Sie Teile davon erstellen, die eine Sache gut machen.  Und kombinieren Sie sie dann nach Ihren Wünschen. </p><br><h3 id="kak-vy-proizvodite-izmeneniya-v-bibliotekah-bez-obratnoy-sovmestimosti">  Wie nehmen Sie Änderungen an Bibliotheken ohne Abwärtskompatibilität vor? </h3><br><p>  Das allgemeine Terraform-Modul muss wie eine reguläre Bibliothek Benutzer irgendwie über Änderungen informieren, ohne abwärtskompatibel zu sein.  Wenn solche Änderungen in Bibliotheken auftreten, ist dies ärgerlich und ebenso ärgerlich, wenn Änderungen ohne Abwärtskompatibilität in Terraform-Modulen vorgenommen werden.  Es wird empfohlen, Git-Tags und Semver zu verwenden, wenn Terraform-Module verwendet werden. </p><br><h3 id="proizvodstvennyy-servis-zapuschen-u-vas-na-noutbuke-ili-v-datacentre">  Wird der Produktionsdienst auf Ihrem Laptop oder in einem Rechenzentrum gestartet? </h3><br><p>  Hashicorp verfügt über Tools wie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terraform Cloud</a> zum Starten Ihrer Terraform.  Diese zentralisierten Dienste erleichtern die Verwaltung, Prüfung und Genehmigung von Terraform-Änderungen. </p><br><h3 id="razve-vy-ne-pishete-testy">  Schreibst du keine Tests? </h3><br><p>  Ingenieure geben zu, dass der Code getestet werden muss, hämmern jedoch häufig selbst auf Überprüfungen, wenn sie mit Terraform arbeiten.  Für die Infrastruktur ist dies mit schleichenden Momenten behaftet.  Ich empfehle Ihnen, Stapel mithilfe von Modulen zu "testen" oder "Beispiele zu erstellen", die zur Überprüfung während CI / CD ordnungsgemäß bereitgestellt werden können. </p><br><h3 id="terraform-i-mikroservisy">  Terraform und Microservices </h3><br><blockquote>  Leben und Tod von Microservice-Unternehmen hängen von der Geschwindigkeit, Aktualisierung und Zerstörung neuer Microservice-Arbeitsstapel ab. </blockquote><p>  Der häufigste negative Punkt in Bezug auf Mikrodienstarchitekturen, der in keiner Weise beseitigt werden kann, hängt mit der Arbeit und nicht mit dem Code zusammen.  Wenn Sie Terraform nur verwenden, um nur die Infrastrukturseite der Microservice-Architektur zu automatisieren, berauben Sie sich der wahren Vorteile dieses Systems.  Jetzt ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">alles wie Code</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de474546/">https://habr.com/ru/post/de474546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de474532/index.html">Radiolabor von Nischni Nowgorod und Radios mit Kristalldetektoren</a></li>
<li><a href="../de474534/index.html">Alan Turing Book und Mysterious Note - Wissenschaftsdetektiv</a></li>
<li><a href="../de474536/index.html">Die Geschichte eines kleinen Projekts von zwölf Jahren Länge (zum ersten Mal und ehrlich aus erster Hand über BIRMA.NET)</a></li>
<li><a href="../de474540/index.html">So erstellen Sie coole Chefs. Shadow Fight 3 Entwicklererfahrung</a></li>
<li><a href="../de474544/index.html">Rückblick auf GeForce NOW in Russland: Vor- und Nachteile sowie Perspektiven</a></li>
<li><a href="../de474548/index.html">Google BERT ist ein neuer Suchalgorithmus. Wie wird sich das Ranking ändern und was ist jetzt zu tun?</a></li>
<li><a href="../de474550/index.html">Wie kann ich die grüne TLS-Anzeige im neuen Firefox 70 zurückgeben?</a></li>
<li><a href="../de474554/index.html">Intel Tremont - Neue Mikroarchitektur für Energieeffizienz</a></li>
<li><a href="../de474556/index.html">So machen Sie PCRE2-Unterstützung für Apache 2.4</a></li>
<li><a href="../de474558/index.html">Protokollorientierte Programmierung, Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>