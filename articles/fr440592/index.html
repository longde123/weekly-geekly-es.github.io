<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìì üòü ü§≤üèº Cr√©ation d'un jeu AR avec Vuforia üíÑ ü§§ ‚úçüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[Il y a des GIF 3D sous la coupe] 

 La r√©alit√© augment√©e (RA) est soudainement devenue un terme tr√®s populaire. Gr√¢ce √† Vuforia, les d√©veloppeurs peu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©ation d'un jeu AR avec Vuforia</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440592/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/iq/4p/rn/iq4prnuz3u7xpw2-dc0tmkawzh0.gif"></div><br>  <i>[Il y a des GIF 3D sous la coupe]</i> <br><br>  La r√©alit√© augment√©e (RA) est soudainement devenue un terme tr√®s populaire.  Gr√¢ce √† Vuforia, les d√©veloppeurs peuvent facilement <em>compl√©ter le</em> monde physique avec du contenu num√©rique. <br><br>  Bien que la sortie d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">ARKit</a> et d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">ARCore ait</a> contribu√© √† accro√Ætre la popularit√© de la r√©alit√© augment√©e, d'autres plateformes et SDK existaient d√©j√†.  L'un d'eux √©tait Vuforia;  et r√©cemment, Unity a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">conclu un accord de partenariat avec Vuforia</a> et int√©gr√© cette plate-forme AR dans le moteur de jeu Unity. <br><br>  Dans ce tutoriel, je vais cr√©er un jeu AR en utilisant le SDK Vuforia int√©gr√© au moteur Unity.  Dans le processus, je parlerai des composants cl√©s suivants: <br><br><ul><li>  Configurer le transfert de donn√©es √† partir d'une cam√©ra de r√©alit√© augment√©e </li><li>  Suivi d'images - ce que c'est et comment √ßa marche </li><li>  Attacher du contenu num√©rique √† un objet physique </li><li>  Cr√©ez des interactions personnalis√©es qui se d√©clenchent en fonction de ce que la cam√©ra voit </li></ul><a name="habracut"></a><br><blockquote>  <em>Remarque:</em> ce tutoriel sur Vuforia suppose que vous connaissez d√©j√† les bases du d√©veloppement dans Unity.  Si vous d√©butez avec Unity, consultez le formidable didacticiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">Mise en route dans Unity</a> . </blockquote><br><h2>  D√©veloppement de jeux AR dans Unity </h2><br>  Il existe de nombreux dispositifs AR sur le march√©, mais le principal objectif des applications AR est l'espace mobile des plates-formes telles que iOS et Android.  C'est ici que la combinaison d'Unity et de Vuforia est pratique - dans le d√©veloppement multiplateforme.  Un autre avantage est que l'application peut √™tre test√©e dans l'√©diteur.  Pour cela, il vous suffit d'une webcam! <br><br>  Avant de commencer, t√©l√©chargez la derni√®re version d'Unity et installez le <em>composant Vuforia Augmented Reality Support</em> .  Si vous utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">Unity Hub</a> , vous pouvez ajouter ce composant √† une version d√©j√† install√©e de Unity. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/77d/51e/162/77d51e162a6330e4cd363ac55761272a.png"></div><br><h2>  Se rendre au travail </h2><br>  Maintenant que vous avez Unity, Vuforia et une webcam, vous devez t√©l√©charger un exemple de projet (√† <a href="">partir d'ici</a> ). <br><br>  Apr√®s le t√©l√©chargement, extrayez les fichiers et ouvrez le projet <em>Comment cr√©er un jeu AR √† l'aide de Vuforia Starter</em> dans Unity.  Lorsque le projet se charge, ouvrez la sc√®ne <em>Starter √†</em> partir du dossier <em>Scenes</em> et regardez la fen√™tre Hi√©rarchie: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fee/279/a87/fee279a87c70ac68f7e690fec68736aa.png"></div><br>  Apr√®s avoir examin√© la composition du projet, cliquez sur le bouton <em>Jouer</em> dans l'√©diteur pour remplir la commande dans notre jeu de pizza. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89d/9a4/bdb/89d9a4bdb068ce92d2200ffc55b109eb.gif"></div><br>  Super, nous pouvons jouer avec la pizza, mais notre vrai d√©fi est de transformer cela en un jeu AR. <br><br><blockquote>  <em>Remarque: les</em> ressources de l'interface utilisateur de ce didacticiel ont √©t√© t√©l√©charg√©es depuis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">shareicon.net</a> </blockquote>  . <br><h2>  Rencontrez le chef Vuforia </h2><br>  Pour ce faire, nous devons faire appara√Ætre la pizza virtuelle sur l'image du tracker que nous d√©tenons dans le monde r√©el.  Apr√®s avoir ajout√© la garniture √† la commande, vous pouvez ¬´servir¬ª physiquement la pizza, la retirer de la visibilit√© de la cam√©ra ... <br><br>  Mais tout a son temps.  Vous devez d'abord remplacer <em>la cam√©ra principale par la cam√©ra</em> <em>AR</em> .  Retirez la <em>cam√©ra principale</em> de la sc√®ne, puis <em>cliquez</em> avec le <em>bouton droit</em> dans la <em>hi√©rarchie</em> . <br><br>  Ajoutez ensuite <em>Vuforia -&gt; AR Camera</em> .  Cela fera appara√Ætre cette fen√™tre: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e20/f6a/eda/e20f6aedaf4a2857ec12c18bfbc5693e.png"></div><br>  Cliquez sur <em>Importer</em> et attendez que le package Vuforia soit import√© dans le projet, et plusieurs fichiers seront ajout√©s. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a92/200/9ba/a922009bacca58142d3fe09febf61c54.png"></div><br>  Vous pouvez ignorer les nouveaux fichiers dans les dossiers <em>Editor</em> et <em>Streaming Assets</em> .  Ce ne sont que des mod√®les;  Les fichiers dont nous avons besoin sont inclus dans le projet. <br><br>  Le dossier <em>Vuforia</em> contient tous les pr√©fabriqu√©s et scripts utilis√©s par la plate-forme Vuforia, que nous utiliserons. <br><br>  Il convient √©galement de mentionner le fichier <em>VuforiaConfiguration</em> dans le dossier <em>Resources</em> .  Ce fichier a √©t√© ajout√© car une licence est requise pour d√©velopper l'application Vuforia.  Cependant, si vous le souhaitez, vous pouvez obtenir une licence de d√©veloppeur gratuite pour le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">portail des d√©veloppeurs Vuforia</a> . <br><br>  <em>Remarque:</em> si votre projet ne poss√®de pas de cl√© de licence d'application, elle se trouve dans le fichier README.  Copiez la ligne dans le champ d' <em>inspection du</em> fichier <em>VuforiaConfiguration</em> . <br><br>  Maintenant que nous avons une cam√©ra AR dans la sc√®ne, il ne reste plus qu'une chose √† faire - allumer la r√©alit√© augment√©e! <br><br>  Allez dans <em>Edition -&gt; Param√®tres du projet -&gt; Lecteur</em> .  Faites d√©filer les options <em>XR Settings</em> et assurez-vous que la <em>case Vuforia Augmented Reality Supported</em> est coch√©e. <br><br>  Cliquez dans l'√©diteur <em>Play</em> et dites-vous bonjour! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d5/c82/40d/4d5c8240defa8a0b9c721523c293686b.png"></div><br>  <em>Remarque:</em> si vous avez cliqu√© sur lecture et que l'√©cran ¬´√âchec de l'initialisation de Vuforia¬ª appara√Æt, essayez de red√©marrer Unity.  Il s'agit d'un bogue al√©atoire qui n'appara√Æt que sur certains syst√®mes. <br><br><h2>  Introduction √† la reconnaissance des formes </h2><br>  S'admirer est bien s√ªr g√©nial, mais n'allions-nous pas faire un jeu de pizza? <br><br>  Par d√©faut, Vuforia fonctionne avec la <em>reconnaissance d'image</em> .  La reconnaissance de formes, √©galement connue sous le nom de Tracker Recognition ou Image Tracking, est un processus dans lequel une cam√©ra reconna√Æt une image pr√©d√©finie et sait quoi en faire, par exemple, afficher du contenu par-dessus.  Cela fonctionne mieux lorsque l'image de suivi correspond en quelque sorte au contenu, par exemple, les plans d'√©tage pour le rendu du b√¢timent fonctionnent bien au-dessus de l'image avec le b√¢timent. <br><br>  <em>Comment √ßa marche:</em> il est tr√®s important de choisir une image de bonne qualit√© pour le suivi.  Lorsque vous utilisez Vuforia, vous pouvez t√©l√©charger l'image s√©lectionn√©e sur le portail du d√©veloppeur pour v√©rifier la qualit√© de son suivi, et cela doit √™tre fait <i>avant de</i> commencer le d√©veloppement.  Le portail des d√©veloppeurs attribue une note √† l'image, mais, plus important encore, affiche ses ¬´points caract√©ristiques¬ª.  Pour que le tracker soit bon, ces points caract√©ristiques (points caract√©ristiques) doivent √™tre dens√©ment r√©partis sur l'image et ne doivent pas contenir de motifs r√©p√©titifs.  Au moment de l'ex√©cution, la cam√©ra recherche ces points caract√©ristiques pour calculer sa position par rapport √† l'image. <br><br>  Pour ce didacticiel, l'image et la base de donn√©es de suivi sont d√©j√† configur√©es.  L'image de la pizza se trouve dans le dossier Mat√©riaux que vous avez t√©l√©charg√© pr√©c√©demment.  Id√©alement, imprimez-le.  Ou vous pouvez l'ouvrir sur un appareil num√©rique, puis le ¬´montrer¬ª √† l'appareil photo.  Voici √† quoi ressemble l'image dans la base de donn√©es Vuforia Tracker: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/874/bdc/1a4/874bdc1a450aa82f890dd3c3fbdf3c11.png"></div><br>  Comme vous pouvez le voir, les points caract√©ristiques sont bien r√©partis.  C‚Äôest aussi de la pizza, ce qui est pratique! <br><br><h2>  Ajout de cibles d'image √† la sc√®ne </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/554/c3b/730/554c3b7304b1d3252f8939e6a1833616.png"></div><br>  Il est temps de faire la magie!  Nous ferons appara√Ætre la pizza virtuelle au-dessus de notre pizza.  Encore une fois, utilisez le menu <em>Cr√©er</em> dans la <em>hi√©rarchie</em> et s√©lectionnez <em>Vuforia -&gt; Image</em> . <br><br>  Nous avons maintenant un <em>GameObject cible d'image</em> dans la sc√®ne.  Regardez cette cible dans l'inspecteur et vous verrez plusieurs composants.  Les plus importants sont le <em>comportement de la cible d'image</em> et le <em>gestionnaire d'√©v√©nements tra√ßables par d√©faut</em> .  Nous examinerons la seconde plus en d√©tail plus tard, mais pour l'instant, assurez-vous que les options de la liste d√©roulante <em>Comportement cible</em> de l' <em>image</em> sont configur√©es comme suit: <br><br><ul><li>  <em>La base de donn√©es est</em> d√©finie sur <em>RW_ItsaPizza</em> <br></li><li>  <em>Cible d'image</em> d√©finie sur <em>PizzaClipArt</em> </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8d7/b68/e4c/8d7b68e4c1c525760a4fd85b32ed5c3d.png"></div><br>  Vous vous souvenez des fichiers ajout√©s pr√©c√©demment au projet que j'ai demand√© d'ignorer?  Vous les avez trouv√©s!  Vuforia ajoute plusieurs bases de donn√©es d'exemples Image Target afin que nous puissions commencer √† les d√©velopper et √† les utiliser pour des exemples, tels que celui que nous utilisons, d√©j√† ajout√©s au mat√©riel. <br><br><blockquote>  <em>Remarque: le</em> tracker Pizza est la seule cible d'image dans votre base de donn√©es;  cependant, il peut y avoir des centaines d'images dans une base de donn√©es.  De plus, il peut y avoir plusieurs bases de donn√©es dans une seule application. </blockquote><br>  Maintenant que nous avons configur√© la <em>cam√©ra AR</em> et le <em>suivi d'images</em> dans la sc√®ne, nous avons tout ce dont vous avez besoin pour que la r√©alit√© augment√©e fonctionne!  Dans l'√©diteur, cliquez sur le bouton <em>Lecture</em> et placez l'image imprim√©e devant la cam√©ra. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ed/fac/48a/5edfac48a1830186b1f0826dc6e8d733.png"></div><br>  Nous avons eu une pizza! <br><br><h3>  Attacher des objets de jeu aux trackers en tant qu'objets enfants </h3><br>  La pizza est un peu petite, mais elle est fermement coll√©e √† l'image du tracker.  Vous pouvez √©galement remarquer que si vous supprimez l'image suivie, la pizza restera suspendue en l'air. <br><br>  Le fait est que m√™me si la webcam peut voir le <em>traqueur d'image</em> , Vuforia est capable de mettre √† jour la position de la <em>cam√©ra AR</em> dans la sc√®ne.  Si vous voulez voir cela en action, configurez l'√©diteur Unity de sorte que les fen√™tres de <em>jeu</em> et de <em>sc√®ne</em> soient visibles en m√™me temps, puis s√©lectionnez <em>AR Camera</em> et cliquez sur Play. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b57/b3e/a62/b57b3ea62a4854fa17bc667aeedd2fc3.gif"></div><br>  Comment faire pour que la pizza se comporte correctement lorsque la cam√©ra fonctionne?  S√©lectionnez <em>ImageTarget</em> dans la hi√©rarchie.  Vous verrez que son √©chelle sur chaque axe est de <em>10</em> .  Ceci est contr√¥l√© par le composant <em>Image Target Behavior</em> .  Dans la section avanc√©e, vous pouvez voir que le param√®tre <em>Width</em> a une valeur de <em>10</em> .  Il a √©t√© d√©fini lors du t√©l√©chargement de l'image sur le site Web du d√©veloppeur Vuforia. <br><br><blockquote>  <em>Astuce:</em> vous ne comprenez pas pourquoi Image Target a √©t√© d√©fini sur une largeur de 10 dans ce didacticiel?  Lorsque la taille n'est pas un facteur important pour l'application, le d√©finir sur 10 donne √† la cam√©ra une chance accrue de suivre, tout en conservant une bonne position pour le contenu entre les plans proche et √©loign√© de la cam√©ra AR.  Cependant, il est parfois n√©cessaire que la r√©alit√© augment√©e ait une certaine √©chelle.  Dans ce cas, vous devez d√©finir la taille de l'image-tracker afin qu'elle corresponde aux mesures physiques lors du t√©l√©chargement sur le portail du d√©veloppeur. </blockquote><br>  S√©lectionnez maintenant GameObject <em>Pizza</em> dans la <em>hi√©rarchie</em> .  Faites-le glisser vers <em>ImageTarget</em> pour en faire un enfant.  L'√©chelle passera √† <code>(X: 0.1, Y: 0.1, Z: 0.1)</code> .  Remettez-le aux valeurs <code>(X: 1, Y: 1, Z: 1)</code> et d√©placez √©galement la position jusqu'√† <code>0.01</code> long de l'axe <em>Y.</em>  Gr√¢ce √† cela, <em>Pizza</em> se conformera √† <em>ImageTarget</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f51/7d0/17c/f517d017c05aa0dcca22205f115fedc7.gif"></div><br>  Appuyez √† nouveau sur <em>Lecture</em> et vous verrez que la pizza est au-dessus de l'image et dispara√Æt √©galement lorsque l'image dispara√Æt du cadre. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea1/68b/565/ea168b5655b0857fcf96f56201d4414b.gif"></div><br><h2>  Explorer DefaultTrackableEventHandler </h2><br>  Ce comportement est extrait du <em>DefaultTrackableEventHandler</em> de l' <em>ImageTarget</em> .  Ouvrez le script et affichez-le. <br><br>  Le script est bien comment√©, mais il convient de pr√™ter attention √† certains aspects: <br><br><ul><li>  La fonction <em>D√©marrer</em> enregistre ce script en tant que gestionnaire d'√©v√©nements pour le <em>TrackableBehaviour</em> (dans ce cas, <em>ImageTargetBehaviour</em> ). </li><li>  <em>OnDestroy</em> supprime ce lien. </li><li>  <em>OnTrackableStateChanged</em> est la fonction la plus importante.  Son code indique ce qui devrait se produire lorsque l'√©tat de suivi change. </li><li>  <em>OnTrackingFound</em> et <em>OnTrackingLost</em> sont appel√©s √† partir de <em>OnTrackableStateChanged</em> .  Dans <em>DefaultTrackableEventHandler,</em> ils basculent les composants <em>Renderer</em> , <em>Collider</em> et <em>Canvas</em> de tout enfant. </li></ul><br>  Lorsque la cam√©ra d√©tecte une image, elle ne d√©place plus simplement la <em>cam√©ra AR</em> ;  elle ordonne √©galement √† GameObject <em>Pizza</em> d'activer tous ses composants de <em>rendu</em> , et lorsque l'image dispara√Æt de la cam√©ra, il ordonne √† nouveau de les d√©sactiver. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b82/21c/7de/b8221c7de8529c1a8120f54a69ec4136.png"></div><br>  Dig√©rez ces informations pour l'instant. <br><br><h2>  Cr√©ez vos propres actions de suivi </h2><br>  Il est temps de faire quelque chose avec ces informations! <br><br>  Supprimez le composant <em>DefaultTrackableEventHandler</em> d' <em>ImageTarget</em> .  Ajoutez ensuite le <em>PizzaTrackableEventHandler</em> , qui se trouve dans le dossier <em>Scripts</em> .  Ouvrez ensuite <em>PizzaTrackableEventHandler</em> .  Il s'agit d'un clone de <em>DefaultTrackableEventHandler</em> , mais le code de <em>OnTrackingFound</em> et <em>OnTrackingLost a √©t√©</em> supprim√© - <em>vous</em> devez r√©soudre ce probl√®me! <br><br>  L'activation et la d√©sactivation des composants <em>Renderer</em> sont utiles dans presque toutes les applications AR, alors r√©cup√©rons ce code.  Si vous √™tes bloqu√©, vous pouvez le copier √† partir du <em>DefaultTrackableEventHandler</em> ou le trouver sous le spoiler ci-dessous. <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTrackingFound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rendererComponents = GetComponentsInChildren&lt;Renderer&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Enable rendering: foreach (var component in rendererComponents) { component.enabled = true; } } protected virtual void OnTrackingLost() { var rendererComponents = GetComponentsInChildren&lt;Renderer&gt;(true); // Enable rendering: foreach (var component in rendererComponents) { component.enabled = false; } }</span></span></code> </pre> </div></div><br>  Nous sommes pr√™ts √† transformer ce projet en jeu en r√©alit√© augment√©e! <br><br>  Regardez l'interface utilisateur et trouvez le bouton sur lequel le joueur doit appuyer pour terminer sa pizza. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c6/e2c/691/1c6e2c691d437d380f9ec2bc3a743935.png"></div><br>  Comme vous pouvez le voir, lorsqu'un bouton est enfonc√©, Event <code>GameManager.CompleteOrder()</code> appel√©.  Au lieu de forcer le joueur √† appuyer sur le bouton, vous pouvez vous assurer qu'il a ¬´servi¬ª de la pizza pour terminer la commande (il a retir√© le tracker de la visibilit√© de la cam√©ra). <br><br>  Au d√©but de <em>PizzaTrackableEventHandler,</em> ajoutez un <em>UnityEvent</em> √† appeler lorsque Image perd le suivi. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Vuforia; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.Events; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PizzaTrackableEventHandler</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span>, <span class="hljs-title"><span class="hljs-title">ITrackableEventHandler</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> UnityEvent OnTrackingLostEvent; ...</code> </pre> <br>  <em>Appelons</em> maintenant l'√©v√©nement dans la m√©thode <em>OnTrackingLost</em> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTrackingLost</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rendererComponents = GetComponentsInChildren&lt;Renderer&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Enable rendering: foreach (var component in rendererComponents) { component.enabled = false; } //Trigger our event OnTrackingLostEvent.Invoke(); }</span></span></code> </pre> <br>  Cela rend <em>PizzaTrackableEventHandler</em> plus flexible, car nous pouvons maintenant d√©finir l'ex√©cution de toutes les actions si le suivi est perdu.  Enregistrez le <em>PizzaTrackableEventHandler</em> , revenez √† l'√©diteur Unity et attendez la fin de la compilation.  √Ä la fin, <code>GameManager.CompleteOrder()</code> lorsque le tracker de suivi des pizzas est perdu.  Enfin, d√©sactivez ou supprimez <em>CompleteOrderButton</em> dans l'interface utilisateur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d30/cf5/c73/d30cf5c73272cda70762935e43609f56.gif"></div><br>  Enregistrez la sc√®ne, cliquez sur <em>Jouer</em> et servez la pizza! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2fd/9fb/a10/2fd9fba107a348f34cc8dd71518471a3.gif"></div><br><h2>  O√π aller ensuite </h2><br>  F√©licitations, vous avez termin√© le didacticiel! <br><br>  Un exemple de projet peut √™tre t√©l√©charg√© <a href="">ici</a> . <br><br>  Pour plus d'informations sur le d√©veloppement avec Vuforia dans Unity, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">biblioth√®que des d√©veloppeurs Vuforia</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">le didacticiel Unity</a> . <br><br>  N'oubliez pas de vous cr√©er un compte d√©veloppeur sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">le portail Vuforia</a> .  Vous pouvez √©galement essayer de t√©l√©charger plusieurs trackers diff√©rents pour v√©rifier comment ils sont suivis. <br><br>  Pour plus de d√©tails, lisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener">les boutons virtuels</a> .  Le site Web de Vuforia contient des exemples de documents.  V√©rifiez si vous pouvez cr√©er ces boutons virtuels pour remplacer l'interface utilisateur dans un jeu de pizza. <br><br>  Trouvez de nouvelles id√©es pour les jeux de r√©alit√© augment√©e.  Peut-√™tre que c'est un jeu de combat de cartes dans lequel les cr√©atures sautent directement des cartes?  Qu'en est-il de la tower defense, o√π contr√¥lez-vous un h√©licopt√®re de combat √† l'aide de votre t√©l√©phone? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440592/">https://habr.com/ru/post/fr440592/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440582/index.html">Les voitures √©lectriques sont-elles tir√©es vers le bas de la soci√©t√© automobile?</a></li>
<li><a href="../fr440584/index.html">Quel est le probl√®me avec le Raspberry Pi</a></li>
<li><a href="../fr440586/index.html">Exonum Consensus: Comment √ßa marche</a></li>
<li><a href="../fr440588/index.html">Le MIT a appris √† transmettre le son avec un laser</a></li>
<li><a href="../fr440590/index.html">O√π sont les jambes du mod√®le de m√©moire Java</a></li>
<li><a href="../fr440594/index.html">1C et Yandex. Cloud Compute Cloud. De haut en bas</a></li>
<li><a href="../fr440596/index.html">Flightradar24 - comment √ßa marche?</a></li>
<li><a href="../fr440598/index.html">La sonde martienne InSight fonctionne avec succ√®s sur la plan√®te rouge</a></li>
<li><a href="../fr440600/index.html">Combien de noms de domaine .com ne sont pas utilis√©s?</a></li>
<li><a href="../fr440602/index.html">Relier avec Kruger, Socrate et les cercles de la connaissance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>