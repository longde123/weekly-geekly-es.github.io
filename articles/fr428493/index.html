<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéã üîÉ üßìüèΩ Git subrepo ‚Ñ¢Ô∏è üíö ‚ù£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le projet git-subrepo existe depuis longtemps, cependant, il y a peu de r√©f√©rences. L'auteur de git-subrepo est Ingy d√∂t Net . 



 Si vous regardez l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Git subrepo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428493/"><p>  Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b>projet git-subrepo</b></a> existe depuis longtemps, cependant, il y a peu de r√©f√©rences.  L'auteur de <b>git-subrepo</b> est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b>Ingy d√∂t Net</b></a> . <br></p><br><p>  Si vous regardez l'historique des commits de la branche master du projet, il peut sembler que le projet s'est arr√™t√© en d√©veloppement il y a 2 ans.  Cependant, le travail sur le projet est en cours et j'esp√®re que la version <a href="" rel="nofollow"><b>0.4.0</b></a> sera bient√¥t disponible. <br></p><br><p>  Une propri√©t√© importante de cet outil est qu'il n'est pas n√©cessaire pour l'utilisateur d'installer <b>git-subrepo</b> jusqu'√† ce que l'utilisateur d√©cide de faire des commits dans le r√©f√©rentiel en amont des sous-projets.  De plus, l'utilisateur re√ßoit une arborescence source enti√®rement pr√©par√©e et configur√©e au moment de la copie du r√©f√©rentiel principal √† l'aide de la commande <em><b>git-clone (1)</b></em> standard. <br></p><a name="habracut"></a><br><p> Lors du choix des moyens de prise en charge des sous-modules / sous-arbres / sous-projets du r√©f√©rentiel de conteneurs principal, le d√©veloppeur d√©termine tout d'abord la gamme de capacit√©s que tel ou tel m√©canisme fournit et r√©pond aux questions suivantes: <br></p><br><ul><li>  s'il est n√©cessaire de conserver l'historique complet du sous-projet dans le r√©f√©rentiel principal ou suffisamment de validations √©cras√©es; </li><li>  si la capacit√© √† apporter des modifications du sous-projet au r√©f√©rentiel en amont du sous-arbre est n√©cessaire; </li><li>  Est-il n√©cessaire de connecter des balises fixes du r√©f√©rentiel en amont du sous-projet ou est-il possible de connecter des branches; </li><li>  s'il faudra supprimer √† la fois les sous-projets eux-m√™mes et, ce qui est devenu inutile, une partie de l'histoire de ces sous-projets; </li><li>  si l'utilisateur devra prendre des mesures pour configurer manuellement les sous-projets apr√®s le clonage du r√©f√©rentiel du projet principal; </li><li>  combien sera laborieuse la question de l'analyse de l'historique des sous-projets de connexion et des r√©visions sp√©cifiques dont le sous-projet est issu; </li><li>  comment tel ou tel outil affectera la politique de gestion de la configuration de la source et dans quelle mesure cet outil compliquera le travail quotidien des ing√©nieurs. </li></ul><br><p>  Bien s√ªr, cette liste de questions ne peut pas refl√©ter la totalit√© des param√®tres d'entr√©e n√©cessaires pour le bon choix, mais pour un examen pr√©liminaire des outils existants, elle est tout √† fait suffisante et, en parlant du <b>projet git-subrepo</b> , nous invitons le lecteur √† consid√©rer ce projet √† partir de ces positions. <br></p><br><h2>  Installation de Git-subrepo </h2><br><p>  Le <b>paquet git-subrepo</b> , du c√¥t√© du d√©veloppeur, peut √™tre install√© √† la fois localement, dans son r√©pertoire personnel et au niveau du syst√®me. <br></p><br><p>  Dans le premier cas, il suffit de cloner le <b>r√©f√©rentiel git-subrepo</b> dans le r√©pertoire souhait√©, par exemple, <b>~ / bin</b> : <br></p><br><pre><code class="bash hljs">bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/bin bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/ingydotnet/git-subrepo.git</code> </pre> <br><p>  et configurer des variables d'environnement <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim subrepo-env.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh export GIT_SUBREPO_ROOT="/home/username/bin/git-subrepo" export PATH="/home/username/bin/git-subrepo/lib:$PATH" export MANPATH="/home/username/bin/git-subrepo/man:$MANPATH" :wq bash-4.4$ source ./subrepo-env.sh</span></span></code> </pre><br><p>  Si vous regardez les variables d√©finies dans le <b>Makefile git-subrepo</b> : <br></p><br><pre> <code class="plaintext hljs"># Install variables: PREFIX ?= /usr/local INSTALL_LIB ?= $(DESTDIR)$(shell git --exec-path) INSTALL_EXT ?= $(INSTALL_LIB)/$(NAME).d INSTALL_MAN1 ?= $(DESTDIR)$(PREFIX)/share/man/man1</code> </pre><br><p>  il est facile de d√©couvrir qu'au niveau du syst√®me, <b>git-subrepo est</b> install√© dans le r√©pertoire o√π se trouve <b>Git</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git --<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span>-path /usr/libexec/git-core bash-4.4$</code> </pre><br><p>  Ainsi, la commande d'installation de <b>git-subrepo</b> peut ressembler, par exemple, √† ce qui suit: <br></p><br><pre> <code class="bash hljs">bash-4.4$ make PREFIX=/usr install</code> </pre><br><p>  La pr√©sence de la variable <b>DESTDIR</b> permet sans efforts suppl√©mentaires (bien s√ªr, si nous ne sommes pas dans un environnement crois√©) de cr√©er un package pour n'importe quelle <b>distribution</b> Linux, ce qui peut √™tre utile pour les ing√©nieurs DevOps. <br></p><br><p>  Installez <b>git-subrepo en</b> tant que root: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> git-subrepo/ bash-4.4$ make PREFIX=/usr install install -C -d -m 0755 /usr/libexec/git-core/ install -C -m 0755 lib/git-subrepo /usr/libexec/git-core/ install -C -d -m 0755 /usr/libexec/git-core/git-subrepo.d/ install -C -m 0755 lib/git-subrepo.d/<span class="hljs-built_in"><span class="hljs-built_in">help</span></span>-functions.bash lib/git-subrepo.d/bash+.bash /usr/libexec/git-core/git-subrepo.d/ install -C -d -m 0755 /usr/share/man/man1/ install -C -m 0644 man/man1/git-subrepo.1 /usr/share/man/man1/ bash-4.4$</code> </pre><br><p>  Pour analyser les capacit√©s de <b>git-subrepo,</b> nous avons besoin d'un environnement de test simple o√π nous pouvons reproduire des sc√©narios de fonctionnement standard. <br></p><br><h3>  Environnement de test </h3><br><p>  Nous cr√©ons trois r√©pertoires <b>propri√©taire</b> , <b>distant</b> , <b>utilisateur</b> , dans lesquels nous pla√ßons des mod√®les de r√©f√©rentiels amont et local du d√©veloppeur et de l'utilisateur. <br></p><br><pre> <code class="bash hljs">bash-4.4$ vim _init.sh <span class="hljs-comment"><span class="hljs-comment">#!/bin/sh CWD=`pwd` mkdir remote owner user cd remote git init --bare build-system.git git init --bare platform.git cd ../owner git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd build-system echo -e "\n[master] build-system 1.0.0\n" &gt;README git add README git commit -m "init build-system master 1.0.0" git push cd ../platform echo -e "\n[master] platform 1.0.0\n" &gt;README git add README git commit -m "init platform master 1.0.0" git push cd ../../user git clone $CWD/remote/build-system.git git clone $CWD/remote/platform.git cd $CWD :wq bash-4.4$ bash-4.4$ ./_init.sh bash-4.4$</span></span></code> </pre><br><br><p>  Ici <br></p><br><div class="scrollable-table"><table><tbody><tr><td>  <b><nobr>propri√©taire</nobr></b> </td><td>  - </td><td>  r√©pertoire de travail de l'auteur du projet; </td></tr><tr><td>  <b><nobr>√† distance</nobr></b> </td><td>  - </td><td>  Un r√©pertoire repr√©sentant le serveur de l'auteur des projets, sur lequel <b>se trouvent</b> les r√©f√©rentiels amont du projet principal <b>platform.git</b> et du sous <b>-</b> projet <b>build-system.git</b> ; </td></tr><tr><td>  <b><nobr>utilisateur</nobr></b> </td><td>  - </td><td>  R√©pertoire de travail pour un utilisateur ou un membre d'une √©quipe de d√©veloppement </td></tr></tbody></table></div><br><p>  L'auteur du projet et les utilisateurs ont leurs propres copies des r√©f√©rentiels en amont sur leurs machines, pr√©sent√©es dans notre exemple dans les r√©pertoires <b>propri√©taire</b> et <b>utilisateur</b> , respectivement. <br></p><br><p>  La t√¢che de l'auteur est d'inclure les fonctionnalit√©s suivantes dans l'arborescence principale de la <b>plateforme en</b> incluant le <b>sous-</b> projet <b>builld-system</b> dans l'arborescence principale: <br></p><br><ul><li>  clonez le r√©f√©rentiel principal avec le sous <b>-</b> projet <b>build-system</b> inclus dans sa structure et ne vous inqui√©tez pas de la configuration des versions ou des r√©visions.  Autrement dit, chaque branche du r√©f√©rentiel de <b>plate</b> - <b>forme</b> doit correspondre √† une r√©vision sp√©cifique d'une branche particuli√®re du r√©f√©rentiel du <b>syst√®me de g√©n√©ration</b> et l'utilisateur doit recevoir une arborescence source personnalis√©e en une seule op√©ration <em><b>git-clone (1)</b></em> , sans aucune action suppl√©mentaire. </li><li>  livrer leurs modifications au r√©f√©rentiel de projet en amont, √† la fois dans le principal et dans l'auxiliaire. </li><li>  recevoir les modifications apport√©es par d'autres participants ou utilisateurs du projet, bien s√ªr, s'ils disposent des droits appropri√©s. </li></ul><br><p>  Consid√©rez les actions de l'auteur qu'il doit mettre en ≈ìuvre pour mettre en ≈ìuvre ces exigences. <br></p><br><h3>  Connexion au sous-projet </h3><br><p>  Pour connecter un nouveau sous-arbre, utilisez la commande <b>git subrepo clone</b> , qui dans son but est similaire √† la commande <em><b>git-clone (1)</b></em> .  Le param√®tre requis pour la commande est l' <b>URL du</b> r√©f√©rentiel distant.  Vous pouvez √©galement sp√©cifier le r√©pertoire dans lequel le sous-projet et la branche du r√©f√©rentiel distant seront situ√©s.  Nous travaillerons avec des branches principales, par cons√©quent, dans notre exemple, nous omettons les param√®tres de commande inutiles. <br></p><br><p>  Ainsi, l'auteur du projet, sur sa machine de travail, peut connecter le sous <b>-</b> projet <b>build-system</b> √† l'aide de la commande <b>git subrepo clone ../../remote/build-system.git/ build-system</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git/ build-system Subrepo <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master) cloned into <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>. bash-4.4$</code> </pre><br><p>  Tenez compte des changements survenus dans le r√©f√©rentiel de la <b>plateforme</b> locale: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ bash-4.4$ git subrepo status 1 subrepo: Git subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span>: Remote URL: ../../remote/build-system.git Upstream Ref: b2f5079 Tracking Branch: master Pulled Commit: b2f5079 Pull Parent: b5e76a7 bash-4.4$</code> </pre><br><p>  L'historique du sous <b>-</b> projet <b>build-system</b> n'est pas livr√© √† l'arborescence principale; nous n'avons qu'une seule validation √©cras√©e, qui est accompagn√©e d'informations g√©n√©rales.  Ces informations rel√®vent du contr√¥le de version dans le fichier <b>./build-system/.gitrepo/config</b> : <br></p><br><pre> <code class="plaintext hljs">[subrepo] remote = ../../remote/build-system.git branch = master commit = b2f507918f2821cb7dd90c33223ed5cc3c9922a2 parent = b5e76a713f895565b06ee3ccfa29f19131ba06dd method = merge cmdver = 0.4.1</code> </pre><br><p>  Des informations sur les sous-projets peuvent √™tre obtenues en utilisant la <b>commande git subrepo config</b> , par exemple, pour conna√Ætre la r√©vision du projet en amont <b>remote / build-system.git</b> , qui vient d'arriver dans le r√©f√©rentiel principal, en utilisant la commande: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><blockquote>  <em>Il convient de mentionner que le package <b>git-subrepo d'origine</b> n'enregistre pas d'informations sur les sous-projets dans le fichier <b>.gitrepo / config</b> , mais dans le fichier <b>.gitrepo</b> .</em> <br></blockquote><br><p>  Nous avons donc obtenu la derni√®re version de la branche principale du r√©f√©rentiel en amont <b>remote / build-system.git</b> et l' <b>avons</b> plac√©e dans le sous <b>-</b> r√©pertoire <b>build-system</b> du projet de <b>plate</b> - <b>forme</b> principale. <br></p><br><p>  Pour apporter ces modifications au r√©f√©rentiel en amont <b>remote / platform.git</b> , l'auteur doit ex√©cuter la commande <b>git push</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git push Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 849 bytes | 849.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; master -&gt; master bash-4.4$</code> </pre><br><p>  Plus d'informations sur les <b>commandes git subrepo</b> peuvent √™tre obtenues √† partir du fichier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ReadMe.pod</a> ou sur la ligne de commande <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">command</span></span>&gt;</code> </pre><br><p>  par exemple: <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span></code> </pre><br><p>  Consid√©rez maintenant tout ce qui se passe de la part de l'utilisateur. <br></p><br><br><h3>  Obtention de code par les utilisateurs </h3><br><p>  Pour le moment, lorsque l'utilisateur n'a pas encore re√ßu de mise √† jour du r√©f√©rentiel amont <b>platform.git</b> , sa copie contient un <b>fichier README</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> user/platform/ bash-4.4$ ls README bash-4.4$</code> </pre><br><p>  contenant une ligne: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ cat README [master] platform 1.0.0 bash-4.4$</code> </pre><br><p>  Apr√®s avoir interrompu les modifications du r√©f√©rentiel en amont <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 7, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 6 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (6/6), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/platform b5e76a7..6b831e4 master -&gt; origin/master Updating &lt;font color=<span class="hljs-string"><span class="hljs-string">"#8b0000"</span></span>&gt;b5e76a7..6b831e4&lt;/font&gt; Fast-forward build-system/.gitrepo/config | 12 ++++++++++++ build-system/README | 3 +++ 2 files changed, 15 insertions(+) create mode 100644 build-system/.gitrepo/config create mode 100644 build-system/README bash-4.4$</code> </pre><br><p>  l'utilisateur aura √† sa disposition le code du sous <b>-</b> projet <b>build-system</b> de cette r√©vision exactement, qui a √©t√© d√©termin√© par l'auteur du projet.  L'utilisateur peut mettre √† jour la r√©vision actuelle √† tout moment en utilisant la commande <b>config</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo config build-system/ commit Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> option <span class="hljs-string"><span class="hljs-string">'commit'</span></span> has value <span class="hljs-string"><span class="hljs-string">'b2f507918f2821cb7dd90c33223ed5cc3c9922a2'</span></span>. bash-4.4$</code> </pre><br><p>  Il est √† noter que l'utilisateur n'a pas besoin de faire de r√©glages suppl√©mentaires et il peut compter sur le fait que l'auteur du projet lui a donn√© exactement la r√©vision du <b>syst√®me de construction</b> n√©cessaire au fonctionnement de la version actuelle de la <b>plateforme</b> . <br></p><br><p>  C'est ce que cherchait l'auteur du projet. <br></p><br><h3>  Apporter des modifications √† un projet en amont </h3><br><p>  Supposons maintenant que notre utilisateur soit membre du projet et qu'il soit autoris√© √† apporter des modifications non seulement au r√©f√©rentiel amont <b>remote / platform.git</b> , mais √©galement au r√©f√©rentiel amont du <b>sous-projet remote / build-system.git</b> . <br></p><br><p>  Ensuite, si l'utilisateur effectue les modifications: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> build-system/ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.1 bash-4.4$ bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update BS version to 1.0.1"</span></span> [master d30b001] update BS version to 1.0.1 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d30b001286b08708f5c30c1f5346a90e4339f969 (HEAD -&gt; master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 . . . bash-4.4$</code> </pre><br><p>  il pourra les placer dans des r√©f√©rentiels amont comme suit: <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git subrepo push build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pushed to <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Il est important de noter ici que ...</b> <div class="spoiler_text"><p>  √âtant donn√© que les fichiers de configuration des sous-projets <b>.gitrepo / config</b> sont stock√©s sous contr√¥le de version, l'utilisateur doit envoyer les modifications d'√©tat du sous-projet au r√©f√©rentiel en amont du projet principal <b>remote / platform.git</b> . <br></p><br><p>  Autrement dit, l'utilisateur ne doit pas oublier de v√©rifier l'√©tat du r√©f√©rentiel local et d'ex√©cuter la commande <em><b>git-push (1)</b></em> √† temps. <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 2 commits. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ bash-4.4$ git push Enumerating objects: 14, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (14/14), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (7/7), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (9/9), 992 bytes | 992.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 9 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git d00be9f..deccb66 master -&gt; master bash-4.4$</code> </pre><br><p>  Sinon, la prochaine fois que vous apporterez des modifications au r√©f√©rentiel en amont, il recevra un conflit de fusion. <br></p><br><p>  Bien s√ªr, il n'y a rien d'inhabituel ici, cependant, apr√®s avoir ex√©cut√© la commande <b>git subrepo push ...</b> , il est facile d'oublier l'√©tat de la copie locale du r√©f√©rentiel principal. <br></p><br></div></div><br><br><h3>  Travail direct avec le r√©f√©rentiel en amont </h3><br><p>  Consid√©rez maintenant ce qui s'est pass√© dans le r√©f√©rentiel en amont <b>remote / build-system.git</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ git pull remote: Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. remote: Total 3 (delta 0), reused 0 (delta 0) Unpacking objects: 100% (3/3), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. From /home/prog/0.4.1/remote/build-system b2f5079..d229920 master -&gt; origin/master Updating b2f5079..d229920 Fast-forward README | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ bash-4.4$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> commit d229920c7de34405bc7b8d47f36d420987687908 (HEAD -&gt; master, origin/master) Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:49:32 2018 +0300 update BS version to 1.0.1 commit b2f507918f2821cb7dd90c33223ed5cc3c9922a2 Author: user &lt;___@_____&gt; Date: Tue Oct 30 10:05:30 2018 +0300 init build-system master 1.0.0 bash-4.4$</code> </pre><br><p>  Autrement dit, l'auteur du projet a re√ßu les modifications apport√©es par le participant au projet. <br></p><br><p>  Bien s√ªr, l'auteur peut apporter des modifications directement au r√©f√©rentiel amont du projet <b>build-system</b> : <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/build-system/ bash-4.4$ bash-4.4$ vim README bash-4.4$ cat README [master] build-system 1.0.2 bash-4.4$ git commit -a -m <span class="hljs-string"><span class="hljs-string">"update build-system version to 1.0.2"</span></span> [master 8255f59] update build-system version to 1.0.2 1 file changed, 1 insertion(+), 1 deletion(-) bash-4.4$ git push Enumerating objects: 5, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (5/5), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (3/3), 281 bytes | 281.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 3 (delta 0), reused 0 (delta 0) To /home/prog/0.4.1/remote/build-system.git d229920..8255f59 master -&gt; master bash-4.4$</code> </pre><br><p>  Et tous les participants, ainsi que les utilisateurs du projet principal, pourront recevoir ces modifications √† l'aide de la <b>commande git subrepo pull</b> <br></p><br><pre> <code class="bash hljs">bash-4.4$ bash-4.4$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> owner/platform/ bash-4.4$ bash-4.4$ git subrepo pull build-system/ Subrepo <span class="hljs-string"><span class="hljs-string">'build-system'</span></span> pulled from <span class="hljs-string"><span class="hljs-string">'../../remote/build-system.git'</span></span> (master). bash-4.4$ git status On branch master Your branch is ahead of <span class="hljs-string"><span class="hljs-string">'origin/master'</span></span> by 1 commit. (use <span class="hljs-string"><span class="hljs-string">"git push"</span></span> to publish your <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> commits) nothing to commit, working tree clean bash-4.4$ git push Enumerating objects: 11, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Counting objects: 100% (11/11), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Delta compression using up to 4 threads Compressing objects: 100% (4/4), <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Writing objects: 100% (6/6), 670 bytes | 670.00 KiB/s, <span class="hljs-keyword"><span class="hljs-keyword">done</span></span>. Total 6 (delta 1), reused 0 (delta 0) To /home/prog/0.4.1/remote/platform.git 6b831e4..b6f4a7b master -&gt; master bash-4.4$</code> </pre><br><h2>  Conclusions </h2><br><p>  Si le d√©veloppeur n'a pas besoin de stocker l'historique des sous-projets dans le r√©f√©rentiel principal et, lors de la livraison du code, il fonctionne avec des branches plut√¥t qu'avec des balises fixes, alors <b>git-subrepo</b> est tout √† fait appropri√© pour organiser le travail quotidien. <br></p><br><p>  Conditionnellement, l'un des inconv√©nients de <b>git-subrepo</b> est le fait que l'op√©ration de <b>clonage de git subrepo</b> n'est possible que par rapport aux branches de sous-projet.  En d'autres termes, l'utilisateur ne peut pas connecter le sous-projet en se r√©f√©rant √† sa balise fixe ou √† une r√©vision sp√©cifique, c'est-√†-dire des commandes comme <br></p><br><pre> <code class="bash hljs">bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system -t 1.0.1 bash-4.4$ git subrepo <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ../../remote/build-system.git build-system 7f5d1113eb0bc6</code> </pre><br><p>  non valide. <br></p><br><h3>  LITT√âRATURE: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Git - Fusion de sous-arborescences</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Ma√Ætriser les sous-arbres git</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Ma√Ætriser les sous-modules Git</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Git subrepo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le mod√®le de gestion des modules de branchement et git pour un grand projet</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428493/">https://habr.com/ru/post/fr428493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428481/index.html">Contrats num√©riques: un guide rapide pour PAS les avocats</a></li>
<li><a href="../fr428485/index.html">La plupart des gens ennuyeux sont la publicit√© non pertinente et l'utilisation de gadgets en public</a></li>
<li><a href="../fr428487/index.html">Pourquoi Ruby on Rails est bon et comment il acc√©l√®re le d√©veloppement</a></li>
<li><a href="../fr428489/index.html">Minceur et √©paisseur des ic√¥nes. Sketch Pro, des fonctionnalit√©s de rendu et un jeu avec une √©paisseur de ligne</a></li>
<li><a href="../fr428491/index.html">Optimisation proactive des performances de la base de donn√©es Oracle</a></li>
<li><a href="../fr428495/index.html">Comment j'ai fait un simulateur de football pendant 13 ans</a></li>
<li><a href="../fr428497/index.html">Gradateur sans fil personnalis√© Noolite SUF-1-300</a></li>
<li><a href="../fr428499/index.html">Des g√©ants bleus effrayants peuvent r√©v√©ler les secrets de l'√©volution des √©toiles</a></li>
<li><a href="../fr428501/index.html">DartUP: la premi√®re conf√©rence en langue russe sur Dart et Flutter le 1er d√©cembre √† Saint-P√©tersbourg</a></li>
<li><a href="../fr428503/index.html">Pr√©sentation de la m√©thode de vecteur de r√©f√©rence d'algorithme d'apprentissage automatique (SVM)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>