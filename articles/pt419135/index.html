<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçü§ù‚Äçüë®üèº üåá üèüÔ∏è Sexta-feira JS: jogo de JS e CSS de 0 linhas üë©üèø‚ÄçüöÄ üçò üè≥Ô∏è‚Äçüåà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Talvez muitos dos veteranos se lembrem de uma epidemia de artigos com manchetes como "% something% in 30 lines of JS". E tamb√©m o post √©pico " Jogo em...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sexta-feira JS: jogo de JS e CSS de 0 linhas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419135/">  Talvez muitos dos veteranos se lembrem de uma epidemia de artigos com manchetes como "% something% in 30 lines of JS".  E tamb√©m o post √©pico " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jogo em 0 linhas de c√≥digo em JS puro</a> " que se seguiu, ap√≥s o qual a epidemia diminuiu abruptamente.  Consciente de que nunca iria superar essa obra-prima, decidi, cinco anos depois, terminar meus cinco centavos. <br><br>  Senhoras e senhores, oferecemos o jogo "Jogo da velha" em zero linhas de JS e, ao contr√°rio do jogo mencionado acima, em zero linhas de CSS (incluindo estilos em linha).  Apenas HTML, apenas hardcore. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/41/im/hj/41imhjnqxqozjtphb0vpbtyylx0.png"></div><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link para o jogo</a> <br><br>  Parece feio, mas funcionar√° em qualquer navegador.  Abaixo, mostrarei por que o jogo sem JS estava na se√ß√£o "Friday JS", al√©m de outros detalhes sujos.  No entanto, eu n√£o vou abrir a Am√©rica para ningu√©m, se voc√™ √© um programador experiente, voc√™ n√£o pode nem se deixar levar <br><a name="habracut"></a><br>  Na verdade, tudo √© muito est√∫pido.  O jogo consiste em quase 6 mil p√°ginas de HTML est√°tico, vinculadas entre si.  Quando voc√™ cutuca uma c√©lula do campo de jogo, voc√™ acessa a p√°gina em que a mudan√ßa para essa c√©lula j√° foi feita.  Obviamente, escrever 6k p√°ginas com as m√£os √© um prazer abaixo da m√©dia.  Portanto (surpresa!) As p√°ginas s√£o geradas por scripts JS usando o NodeJS. <br><br><div class="spoiler">  <b class="spoiler_title">Digress√£o l√≠rica</b> <div class="spoiler_text">  Tendo escrito a linha anterior, de repente me perguntei se a express√£o "script JS" n√£o √© uma tautologia, como "CD-ROM" ou "VIP-person".  Por um lado, parece ser.  Por outro lado, JS ainda n√£o √© uma abrevia√ß√£o, mas uma abrevia√ß√£o de natureza ligeiramente diferente.  No entanto, o post ainda n√£o √© sobre filologia, porque a digress√£o l√≠rica termina e o ataque l√≠rico come√ßa. <br></div></div><br>  Primeiro, constru√≠mos a chamada √°rvore dos jogos - a totalidade de todos os estados e transi√ß√µes poss√≠veis entre eles.  O estado inicial do jogo no meu c√≥digo √© o seguinte: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">player</span></span>: PLAYER_X, <span class="hljs-attr"><span class="hljs-attr">field</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">9</span></span>)).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> EMPTY_CELL), <span class="hljs-attr"><span class="hljs-attr">moves</span></span>: {} }</code> </pre> <br>  Ele cont√©m informa√ß√µes sobre quem √© a vez agora e qual √© o estado do campo de jogo.  No futuro, tamb√©m conter√° informa√ß√µes sobre quais movimentos podem ser feitos e em quais estados eles levar√£o, al√©m de outras coisas agrad√°veis. <br><br>  Ent√£o come√ßamos, pe√ßo desculpas pela tautologia, a partir do estado inicial e fa√ßo o seguinte: <br><br><ol><li>  Verificamos se o estado √© terminal (vit√≥ria das cruzes, vit√≥ria das fichas, empate). </li><li>  Nesse caso, adicione informa√ß√µes sobre isso ao objeto state e finalize. </li><li>  Caso contr√°rio, passe por todas as c√©lulas no campo. </li><li>  Para cada c√©lula vazia no campo, crie um novo estado de jogo no qual o jogador atual fez uma mudan√ßa para essa c√©lula e a passagem foi passada para o pr√≥ximo jogador. </li><li>  No campo de <code>moves</code> do estado atual, adicione um registro de um poss√≠vel movimento.  A chave para esta entrada √© o √≠ndice da c√©lula e o valor √© o link para o novo estado. </li><li>  Repetimos esse algoritmo recursivamente para todos os estados rec√©m-exibidos. </li></ol><br>  De fato, meu c√≥digo √© um pouco mais complicado, por h√°bito desdobrei a recurs√£o em um loop e, em vez de refer√™ncias a outros estados nos <code>moves</code> suas chaves de string s√£o armazenadas em uma certa matriz associativa.  Mas estes s√£o todos os detalhes. <br><br>  Ent√£o, a partir de cada objeto de estado do jogo, geramos uma p√°gina HTML.  Percorrendo o objeto de <code>moves</code> , preenchemos as c√©lulas vazias do campo com links para as p√°ginas correspondentes aos movimentos feitos nessas c√©lulas.  Em seguida, transformamos a matriz unidimensional do campo em uma tabela HTML bidimensional.  Adicionamos todo tipo de coisas agrad√°veis, como instru√ß√µes que o jogador percorre e links para a p√°gina inicial - e pronto! <br><br>  Al√©m do modo, quando as cruzes e os zeros s√£o colocados por uma pessoa, no meu mega hit indie tamb√©m h√° a oportunidade de jogar contra o c√©rebro de ferro.  Isso √© alcan√ßado da seguinte maneira: <br><br><ol><li>  Primeiro, recursivamente (na verdade n√£o) para cada estado do jogo, o resultado esperado do jogo √© calculado - aquele que ser√° alcan√ßado se os dois lados jogarem perfeitamente. </li><li>  Em seguida, a √°rvore do jogo √© modificada da seguinte forma: em vez do movimento do jogador, agora fazemos dois movimentos ao mesmo tempo.  O segundo movimento √© o movimento da intelig√™ncia artificial.  Al√©m disso, a partir de todas as respostas poss√≠veis √† mudan√ßa do jogador, √© selecionada aquela com o melhor resultado esperado.  Assim, tendo cutucado uma gaiola vazia, o jogador vai imediatamente para a posi√ß√£o em que uma cruz (ou zero) apareceu nesta c√©lula e um zero (ou cruz) apareceu em alguma outra c√©lula. </li><li>  Todas as posi√ß√µes de jogo correspondentes aos movimentos que a IA n√£o realiza s√£o descartadas sem piedade. </li><li>  Em seguida, o HTML √© gerado a partir das posi√ß√µes restantes em uma pasta separada - exatamente o mesmo que no caso de dois jogadores. </li></ol><br>  Por princ√≠pios semelhantes, voc√™ pode implementar qualquer jogo com uma √°rvore n√£o muito grande.  No entanto, se eu quiser fazer xadrez dessa maneira, parece-me que o github se recusar√° a hospedar isso =) <br><br>  Falando no github: voc√™ pode ver todo o c√≥digo (o link est√° na p√°gina principal do jogo).  Sobre isso, em geral, √© tudo.  Adeus, meninas e meninos.  Vejo voc√™ de novo. <br><br>  <b>PS A</b> substitui√ß√£o de quebras de linha do estilo Windows para o estilo Unix √© muito longa quando se trata de 6 mil arquivos.  Eu me arrependi de n√£o ter resolvido isso na fase de escrever o c√≥digo, mas ainda assim suportou corajosamente o <code>git add</code> no final. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt419135/">https://habr.com/ru/post/pt419135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt419125/index.html">O retorno da esta√ß√£o sovi√©tica. An√°lise e documentos</a></li>
<li><a href="../pt419127/index.html">Tr√™s reencarna√ß√µes de uma loja online. Como drenar dinheiro, tempo e por que os modelos s√£o bons</a></li>
<li><a href="../pt419129/index.html">Sistemas multiagentes na constru√ß√£o de espa√ßos virtuais</a></li>
<li><a href="../pt419131/index.html">A data preliminar de lan√ßamento do m√≥dulo lunar SpaceIL anunciada</a></li>
<li><a href="../pt419133/index.html">Webinars de sexta-feira: aprendendo a programar gratuitamente</a></li>
<li><a href="../pt419137/index.html">Registro de atividades usando a API Web Beacon</a></li>
<li><a href="../pt419141/index.html">O phishing sexual est√° ganhando for√ßa nos EUA</a></li>
<li><a href="../pt419143/index.html">Criando uma m√°quina de arcade emulador. Parte 4</a></li>
<li><a href="../pt419145/index.html">Fintech Digest: a capitaliza√ß√£o da Apple ultrapassou US $ 1 trilh√£o, a IA ajudou o eBay a aumentar a receita em bilh√µes</a></li>
<li><a href="../pt419147/index.html">Cubo 1000-dimensional: √© poss√≠vel criar hoje um modelo computacional de mem√≥ria humana?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>