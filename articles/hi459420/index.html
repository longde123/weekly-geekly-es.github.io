<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЬМЁЯП┐ ЁЯС╢ ЁЯСйтАНЁЯФм рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдореЗрдВ рдкреНрд░рд┐рдВрдЯрдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╕рдмрд╕реЗ рдЖрдо рд░реЗрдХ ЁЯСЖЁЯП╜ ЁЯО│ ЁЯМ▒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдореЗрд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рд╕рдордп-рд╕рдордп рдкрд░ рдореБрдЭреЗ рдПрдХ рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ (UART рдпрд╛ USB рдкрд░ рдПрдХ рдПрдмреНрд╕рдЯреНрд░реИрдХреНрдЯ рдЬреЛ рдПрдХ рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдХреА рдирдХрд▓ рдХрд░рддрд╛ рд╣реИ) рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рдкреНрд░рд┐рдВрдЯрдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдореЗрдВ рдкреНрд░рд┐рдВрдЯрдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╕рдмрд╕реЗ рдЖрдо рд░реЗрдХ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459420/">  рдореЗрд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рд╕рдордп-рд╕рдордп рдкрд░ рдореБрдЭреЗ рдПрдХ рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ (UART рдпрд╛ USB рдкрд░ рдПрдХ рдПрдмреНрд╕рдЯреНрд░реИрдХреНрдЯ рдЬреЛ рдПрдХ рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдХреА рдирдХрд▓ рдХрд░рддрд╛ рд╣реИ) рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рдкреНрд░рд┐рдВрдЯрдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИред  рдФрд░, рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдЗрд╕рдХреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдмреАрдЪ рдмрд╣реБрдд рд╕рдордп рдЧреБрдЬрд░рддрд╛ рд╣реИ рдФрд░ рдореИрдВ рдЙрди рд╕рднреА рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рднреВрд▓ рдЬрд╛рдиреЗ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддрд╛ рд╣реВрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ рдпрд╣ рдПрдХ рдмрдбрд╝реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░реЗред <br><br>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВрдиреЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╢реАрд░реНрд╖ рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рд╣реИ рдЬреЛ рдХрд┐ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдореЗрдВ рдкреНрд░рд┐рдВрдЯрдл рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдЙрддреНрдкрдиреНрди рд╣реЛрддреЗ рд╣реИрдВ, рдЬреЛ рдХрд┐ рд╕рдмрд╕реЗ рд╕реНрдкрд╖реНрдЯ рд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЧреИрд░-рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмреВрддреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЫрд╛рдВрдЯреЗ рдЧрдП рд╣реИрдВред <br><a name="habracut"></a><br><h2>  рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрд░рд┐рдЪрдп </h2><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдореЗрдВ рдкреНрд░рд┐рдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ: <ul><li>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛрдб рдореЗрдВ рд╣реЗрдбрд░ рдлрд╝рд╛рдЗрд▓ рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВ; </li><li>  рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд▓рд┐рдП _write рд╕рд┐рд╕реНрдЯрдо рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВ; </li><li>  рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХреЗ рд╕реНрдЯрдмреНрд╕ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ рдХрд┐ рд▓рд┐рдВрдХрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (_fork, _wait, рдФрд░ рдЕрдиреНрдп); </li><li>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдкреНрд░рд┐рдВрдЯрдл рдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </li></ul><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕рдм рдХреБрдЫ рдЗрддрдирд╛ рд╕рд░рд▓ рдирд╣реАрдВ рд╣реИред <br><br><h2>  рд╕рднреА рд╕реНрдЯрдмреНрд╕ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ, рди рдХрд┐ рдХреЗрд╡рд▓ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдП рдЧрдПред </h2><br>  рдкрд╣рд▓реА рдмрд╛рд░ рдореЗрдВ рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╕рдордп рдЕрд╕реНрдкрд╖реНрдЯ рд▓рд┐рдВрдХ рдХреЗ рдЭреБрдВрдб рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд╣реИ, рд▓реЗрдХрд┐рди рдереЛрдбрд╝рд╛ рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдФрд░ рдХреНрдпреЛрдВред  рдореЗрд░реА рд╕рднреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдореИрдВ рдЗрд╕ <a href="">рд╕рдмрдореЙрдбрд▓ рдХреЛ</a> рдЬреЛрдбрд╝ рд░рд╣рд╛ рд╣реВрдБред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдореБрдЦреНрдп рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, рдореБрдЭреЗ рдХреЗрд╡рд▓ рдЙрди рддрд░реАрдХреЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рд╣реИ рдЬрд┐рдирдХреА рдореБрдЭреЗ рдЬрд╝рд░реВрд░рдд рд╣реИ (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдХреЗрд╡рд▓ _write), рдФрд░ рдмрд╛рдХреА рд╕рднреА рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд░рд╣рддреЗ рд╣реИрдВред <br><br>  рдпрд╣ рдзреНрдпрд╛рди рд░рдЦрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рд╕рднреА рд╕реНрдЯрдмреНрд╕ рдХреЛ рд╕реА рдлрд╝рдВрдХреНрд╢рди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдирд╣реАрдВ рд╕реА ++ (рдпрд╛ рдмрд╛рд╣рд░реА "рд╕реА" рдореЗрдВ рд▓рд┐рдкрдЯреЗ)ред  рдЕрдиреНрдпрдерд╛, рд▓реЗрдЖрдЙрдЯ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛ (рдЬреА ++ рдХреЗ рд╕рд╛рде рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рджреМрд░рд╛рди рдирд╛рдо рдкрд░рд┐рд╡рд░реНрддрди рдпрд╛рдж рд░рдЦреЗрдВ)ред <br><br><h2>  _рд▓реЗрдЦ рдореЗрдВ 1 рд╡рд░реНрдг рдЖрддрд╛ рд╣реИ </h2><br>  рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд╡рдЬреВрдж рдХрд┐ _write рдкрджреНрдзрддрд┐ рдХреЗ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдореЗрдВ рдПрдХ рддрд░реНрдХ рд╣реИ рдЬреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╕рдВрджреЗрд╢ рдХреА рд▓рдВрдмрд╛рдИ рд╕реЗ рдЧреБрдЬрд░рддрд╛ рд╣реИ, рдЗрд╕рдХрд╛ рдореВрд▓реНрдп 1 рд╣реИ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдо рдЦреБрдж рдЗрд╕реЗ рд╣рдореЗрд╢рд╛ 1 рдмрдирд╛ рджреЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдмрд╛рдж рдореЗрдВ рдЙрд╕ рдкрд░ рдЕрдзрд┐рдХ)ред <br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _write (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> file, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *data, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> len) { ... }</code> </pre> <br>  рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЖрдк рдЕрдХреНрд╕рд░ рдЗрд╕ рдкрджреНрдзрддрд┐ рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдРрд╕реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</a> рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ: <br><div class="spoiler">  <b class="spoiler_title">_Write рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рд▓рдЧрд╛рддрд╛рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uart_putc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ch)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (USART_GetFlagStatus(USART2, USART_FLAG_TC) == RESET); {} USART_SendData(USART2, (<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>) ch); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _write_r (struct _reent *r, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> file, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> * ptr, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> len) { r = r; file = file; ptr = ptr; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> 0 int index; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* For example, output string by UART */</span></span></span><span class="hljs-meta"> for(index=0; index&lt;len; index++) { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (ptr[index] == </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'\n'</span></span></span><span class="hljs-meta">) { uart_putc(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'\r'</span></span></span><span class="hljs-meta">); } uart_putc(ptr[index]); } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> return len; }</span></span></code> </pre> <br></div></div><br>  рдЗрд╕ рддрд░рд╣ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдиреБрдХрд╕рд╛рди рд╣реИрдВ: <br><ul><li>  рдХрдо рдЙрддреНрдкрд╛рджрдХрддрд╛; </li><li>  рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдЕрд╕реБрд░рдХреНрд╖рд╛; </li><li>  рдЕрдиреНрдп рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рдЕрд╕рдорд░реНрдерддрд╛; </li></ul><br><br><h3>  рдХрдо рдкреНрд░рджрд░реНрд╢рди </h3><br>  рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рдЗрдЯреНрд╕ рднреЗрдЬрдиреЗ рдХреЗ рдХрд╛рд░рдг рдзреАрдорд╛ рдкреНрд░рджрд░реНрд╢рди рд╣реЛрддрд╛ рд╣реИ: рдЖрдкрдХреЛ рдЙрд╕реА рдбреАрдПрдордП рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп рд╕реНрдерд┐рддрд┐ рд░рдЬрд┐рд╕реНрдЯрд░ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдиреА рд╣реЛрдЧреАред  рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЕрдЧреНрд░рд┐рдо рдореЗрдВ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдмрдлрд░ рддреИрдпрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рд▓рд╛рдЗрди рдХреЗ рдЕрдВрдд рдХрд╛ рдЪрд░рд┐рддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╕рдордп (рдпрд╛ рдмрдлрд░ рдХреЛ рднрд░рддреЗ рд╕рдордп) рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рдкрджреНрдзрддрд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрдлрд░ рдореЗрдореЛрд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдХреНрд╕рд░ рднреЗрдЬрдиреЗ рдХреЗ рд╕рд╛рде рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ рд╣реЛрддрд╛ рд╣реИред <br><div class="spoiler">  <b class="spoiler_title">рдПрдХ рдмрдлрд░ рдХреЗ рд╕рд╛рде _write рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"uart.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;errno.h&gt; #include &lt;sys/unistd.h&gt; extern mc::uart uart_1; extern "C" { //      uart. static const uint32_t buf_size = 254; static uint8_t tx_buf[buf_size] = {0}; static uint32_t buf_p = 0; static inline int _add_char (char data) { tx_buf[buf_p++] = data; if (buf_p &gt;= buf_size) { if (uart_1.tx(tx_buf, buf_p, 100) != mc_interfaces::res::ok) { errno = EIO; return -1; } buf_p = 0; } return 0; } // Putty  \r\n    //    . static inline int _add_endl () { if (_add_char('\r') != 0) { return -1; } if (_add_char('\n') != 0) { return -1; } uint32_t len = buf_p; buf_p = 0; if (uart_1.tx(tx_buf, len, 100) != mc_interfaces::res::ok) { errno = EIO; return -1; } return 0; } int _write (int file, char *data, int len) { len = len; //   . if ((file != STDOUT_FILENO) &amp;&amp; (file != STDERR_FILENO)) { errno = EBADF; return -1; } //     //   \n. if (*data != '\n') { if (_add_char(*data) != 0) { return -1; } } else { if (_add_endl() != 0) { return -1; } } return 1; } }</span></span></span></span></code> </pre> </div></div><br>  рдпрд╣рд╛рдБ, рдбрд╛рд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реАрдзреЗ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП uart рдСрдмреНрдЬреЗрдХреНрдЯ, uart_1 рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдлрд░ рд╕реЗ рдбреЗрдЯрд╛ рднреЗрдЬрдиреЗ рдХреЗ рд╕рдордп рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдерд░реНрдб-рдкрд╛рд░реНрдЯреА рдПрдХреНрд╕реЗрд╕ рдмреНрд▓реЙрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП FreeRTOS рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ (рдореНрдпреВрдЯреЗрдХреНрд╕ рд▓реЗ рд░рд╣рд╛ рд╣реИ рдФрд░ рд╡рд╛рдкрд╕ рдХрд░ рд░рд╣рд╛ рд╣реИ)ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдХреЛрдИ рднреА рджреВрд╕рд░реЗ рдзрд╛рдЧреЗ рд╕реЗ рднреЗрдЬрддреЗ рд╕рдордп рдЙрд░реНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред <br>  рдХреБрдЫ рд▓рд┐рдВрдХ: <br><ul><li>  рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рднрд╛рдЧ рдХреЗ рд░реВрдк рдореЗрдВ _iteite рдлрд╝рдВрдХреНрд╢рди рдХреЛрдб </li><li>  uart рдХреНрд▓рд╛рд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ <a href="">рдпрд╣рд╛рдБ рд╣реИ</a> </li><li>  <a href="">рдпрд╣рд╛рдБ</a> рдФрд░ <a href="">рдпрд╣рд╛рдБ</a> stm32f4 рдХреЗ рддрд╣рдд uart рдХреНрд▓рд╛рд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </li><li>  <a href="">рдпрд╣рд╛рдВ</a> рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрд░рдЯ рд╡рд░реНрдЧ рдХреА рддрд╛рддреНрдХрд╛рд▓рд┐рдХрддрд╛ </li></ul><br><br><h3>  рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ рдЕрд╕реБрд░рдХреНрд╖рд╛ </h3><br>  рдпрд╣ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рднреА рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдмрдирд╛ рд╣реБрдЖ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкрдбрд╝реЛрд╕реА FreeRTOS рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рдХреЛрдИ рднреА рд╡реНрдпрдХреНрддрд┐ рдкреНрд░рд┐рдВрдЯрдл рдХреЛ рдПрдХ рдФрд░ рд▓рд╛рдЗрди рднреЗрдЬрдирд╛ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдЬреЛ рдмрдлрд░ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ рдЙрд╕реЗ рдкреАрд╕ рд▓реЗрдВред )ред  рдпрджрд┐ рдРрд╕рд╛ рдХреЛрдИ рдЬреЛрдЦрд┐рдо рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рдереНрд░реЗрдб рдХреЗ рдкреНрд░рд┐рдВрдЯрдл рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдлрд┐рд░ рдПрдХ рд▓реЗрдпрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдЬреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдХреЛ рдмреНрд▓реЙрдХ рдХрд░ рджреЗрдЧрд╛ред  рдореЗрд░реЗ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХреЗрд╡рд▓ рдПрдХ рдзрд╛рдЧрд╛ рдкреНрд░рд┐рдВрдЯрдл рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рдЬрдЯрд┐рд▓рддрд╛рдПрдВ рдХреЗрд╡рд▓ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдХрдо рдХрд░ рджреЗрдВрдЧреА (рдкрд░рдд рдХреЗ рдЕрдВрджрд░ рдореНрдпреВрдЯреЗрдХреНрд╕ рдХреА рдирд┐рд░рдВрддрд░ рдХрдмреНрдЬрд╛ рдФрд░ рд░рд┐рд╣рд╛рдИ)ред <br><br><h3>  рдЕрдиреНрдп рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реАрд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рдЕрд╕рдорд░реНрдерддрд╛ </h3><br>  рдЪреВрдВрдХрд┐ рд╣рдо рдкреВрд░реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рд╣реА рднреЗрдЬрддреЗ рд╣реИрдВ (рдпрд╛ рдмрдлрд╝рд░ рдкреВрд░рд╛ рднрд░рд╛ рд╣реБрдЖ рд╣реИ), рдЗрд╕рдХреЗ рдмрдЬрд╛рдп uart рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдмрд╛рдж, рдЖрдк рдХрдиреНрд╡рд░реНрдЯрд░ рдореЗрдердб рдХреЛ рдмрд╛рдж рдХреЗ рдкреИрдХреЗрдЯ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЯреЙрдк-рд▓реЗрд╡рд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рдореЗрдВ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЯреНрд░рд╛рдВрд╕рдорд┐рд╢рди рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЧрд╛рд░рдВрдЯреА рдХреЗ рд╕рд╛рде рдбрд┐рд▓реАрд╡рд░реА рдкреИрдХреЗрдЯ рдХреЗ рд╕рдорд╛рди рд╣реИред рд▓реЗрдирджреЗрди modbus)ред  рдпрд╣ рдЖрдкрдХреЛ рдбрд┐рдмрдЧрд┐рдВрдЧ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреНрд░рдмрдВрдзрди рдХрдВрд╕реЛрд▓ рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░реИрдХреНрд╢рди (рдпрджрд┐ рдХреЛрдИ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ) рджреЛрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ uart рджреЛрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред  рдпрд╣ рдкреНрд░рд╛рдкреНрддрдХрд░реНрддрд╛ рдкрдХреНрд╖ рдкрд░ рдПрдХ рдбрд┐рдХрдореНрдкреНрд░реЗрд╕рд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрдЧрд╛ред <br><br><h2>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдлреНрд▓реЛрдЯ рдЖрдЙрдЯрдкреБрдЯ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ </h2><br>  рдпрджрд┐ рдЖрдк newlib-nano рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреНрд░рд┐рдВрдЯрдл (рд╕рд╛рде рд╣реА рдЙрдирдХреЗ рд╕рднреА рдбреЗрд░рд┐рд╡реЗрдЯрд┐рд╡ рдЬреИрд╕реЗ рд╕реНрдкреНрд░рд┐рдВрдЯ / рд╕реНрдирдкреНрд░рд┐рдВрдЯ ... рдФрд░ рдЕрдиреНрдп) рдлреНрд▓реЛрдЯ рд╡реИрд▓реНрдпреВ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрди рд▓рд┐рдВрдХрд░ рдЭрдВрдбреЗ рдЬреЛрдбрд╝рдХрд░ рдЗрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рд╣рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><pre> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">SET</span></span>(LD_FLAGS -Wl,-u,vfprintf; -Wl,-u,_printf_float; -Wl,-u,_scanf_float; <span class="hljs-string"><span class="hljs-string">"_"</span></span>)</code> </pre> <br>  рдЭрдВрдбреЗ рдХреА рдкреВрд░реА рд╕реВрдЪреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ рджреЗрдЦреЗрдВ</a> ред <br><br><h2>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╣реАрдВ рди рдХрд╣реАрдВ рдкреНрд░рд┐рдВрдЯрдл рдХреА рдЖрдВрддреЛрдВ рдореЗрдВ рдЬрдо рдЬрд╛рддрд╛ рд╣реИ </h2><br>  рдпрд╣ рд▓рд┐рдВрдХрд░ рдЭрдВрдбреЗ рдореЗрдВ рдПрдХ рдФрд░ рджреЛрд╖ рд╣реИред  рдлрд░реНрдорд╡реЗрдпрд░ рдХреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд╡рд╛рдВрдЫрд┐рдд рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкреНрд░реЛрд╕реЗрд╕рд░ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><pre> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">SET</span></span>(HARDWARE_FLAGS -mthumb; -mcpu=cortex-m4; -mfloat-abi=hard; -mfpu=fpv4-sp-d16;) <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span>(LD_FLAGS <span class="hljs-variable"><span class="hljs-variable">${HARDWARE_FLAGS}</span></span> <span class="hljs-string"><span class="hljs-string">"_"</span></span>)</code> </pre><br>  рдЭрдВрдбреЗ рдХреА рдкреВрд░реА рд╕реВрдЪреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ рджреЗрдЦреЗрдВ</a> ред <br><br><h2>  рдкреНрд░рд┐рдВрдЯрдл рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЛ рдПрдХ рдХрдард┐рди рдЧрд▓рддреА рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░рддрд╛ рд╣реИ </h2><br>  рдХрдо рд╕реЗ рдХрдо рджреЛ рдХрд╛рд░рдг рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: <br><ul><li>  рд╕реНрдЯреИрдХ рдореБрджреНрджреЛрдВ; </li><li>  _sbrk рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ; </li></ul><br><h3>  рдвреЗрд░ рдореБрджреНрджреЗ </h3><br>  рдпрд╣ рд╕рдорд╕реНрдпрд╛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ FreeRTOS рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп OS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╕реНрд╡рдпрдВ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИред  рд╕рдорд╕реНрдпрд╛ рдмрдлрд╝рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИред  рдкрд╣рд▓реЗ рдкреИрд░рд╛рдЧреНрд░рд╛рдл рдореЗрдВ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ _write рдореЗрдВ 1 рдмрд╛рдЗрдЯ рдЖрддрд╛ рд╣реИред  рдРрд╕рд╛ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрд╣рд▓реА рдмрд╛рд░ рдкреНрд░рд┐рдВрдЯрдлрд╝ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЕрдкрдиреЗ рдХреЛрдб рдореЗрдВ рдмрдлрд░рд┐рдВрдЧ рдХреЗ рдЙрдкрдпреЛрдЧ рдкрд░ рдкреНрд░рддрд┐рдмрдВрдз рд▓рдЧрд╛рдирд╛ рд╣реЛрдЧрд╛ред <br><pre> <code class="cpp hljs">setvbuf(<span class="hljs-built_in"><span class="hljs-built_in">stdin</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, _IONBF, <span class="hljs-number"><span class="hljs-number">0</span></span>); setvbuf(<span class="hljs-built_in"><span class="hljs-built_in">stdout</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, _IONBF, <span class="hljs-number"><span class="hljs-number">0</span></span>); setvbuf(<span class="hljs-built_in"><span class="hljs-built_in">stderr</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, _IONBF, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╡рд┐рд╡рд░рдг рд╕реЗ рдпрд╣ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ рдХрд┐ рдирд┐рдореНрди рдорд╛рдиреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдЙрд╕реА рддрд░реАрдХреЗ рд╕реЗ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _IOFBF 0 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* setvbuf should set fully buffered */</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _IOLBF 1 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* setvbuf should set line buffered */</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _IONBF 2 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* setvbuf should set unbuffered */</span></span></span></span></code> </pre> <br>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕рд╕реЗ рдХрд╛рд░реНрдп рд╕реНрдЯреИрдХ рдХрд╛ рдУрд╡рд░рдлрд╝реНрд▓реЛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рдпрд╛ рдпрджрд┐ рдЖрдк рдЕрдЪрд╛рдирдХ рдмрд╣реБрдд рдмреБрд░реЗ рд╡реНрдпрдХреНрддрд┐ рд╣реИрдВ рдЬреЛ рдЗрдВрдЯрд░рдкреНрдЯ рд╕реЗ рдкреНрд░рд┐рдВрдЯрдлрд╝ рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ)ред <br><br>  рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ, рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдЯреНрд░реАрдо рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рд╛рд╡рдзрд╛рдиреА рд╕реЗ рд╕реНрдЯреИрдХреНрд╕ рдХреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд▓рд┐рдП рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рдирд┐рдпреЛрдЬрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдФрд░ рдЙрди рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдкрдХрдбрд╝рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЗрд╕реЗ рд╡рд╣рди рдХрд░рддреА рд╣реИрдВред  рдПрдХ рдмрд╣реБрдд рд╕рд░рд▓ рдЙрдкрд╛рдп рдПрдХ рдмрд╛рдЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реИ, рдЗрд╕реЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдмрдлрд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдирд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЖрд╡рд╢реНрдпрдХ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдЗрд╕реЗ рдкрд╛рд░реНрд╕ рдХрд░рдирд╛ рд╣реИред <br><br><h3>  _Sbrk рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ </h3><br>  рдпрд╣ рд╕рдорд╕реНрдпрд╛ рдореЗрд░реЗ рд▓рд┐рдП рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдирд┐рд╣рд┐рдд рдереАред  рдФрд░ рдЗрд╕рд▓рд┐рдП рд╣рдо _sbrk рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдЬрд╛рдирддреЗ рд╣реИрдВ? <br><ul><li>  рдПрдХ рдФрд░ рдареВрдВрда рдЬрд┐рд╕реЗ рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЗ рдХрд╛рдлреА рд╣рд┐рд╕реНрд╕реЗ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ; </li><li>  рдвреЗрд░ рдкрд░ рд╕реНрдореГрддрд┐ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ; </li><li>  рдореЙрд▓реЙрдХ рдЬреИрд╕реЗ рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╡рд┐рдзрд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдореБрдлреНрддред </li></ul><br>  рдирд┐рдЬреА рддреМрд░ рдкрд░, 95% рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЕрдкрдиреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдореИрдВ рдирдП рддрд░реАрдХреЛрдВ рдХреЛ рдирдП рд╕рд┐рд░реЗ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд / рд╣рдЯрд╛рдиреЗ / рдореЙрд▓реЛрдХ рдХреЗ рд╕рд╛рде рдлреНрд░реАрдЖрд░рдЯреАрдУрдПрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ рдЬреЛ рдлреНрд░реАрдЖрд░рдЯреАрдУрдПрд╕ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП рдЬрдм рдореИрдВ рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░рддрд╛ рд╣реВрдВ, рддреЛ рдореБрдЭреЗ рдпрдХреАрди рд╣реИ рдХрд┐ рдЖрд╡рдВрдЯрди FreeRTOS рдвреЗрд░ рдкрд░ рд╣реИ, рдЬреЛ bss рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдореЗрдореЛрд░реА рдХреА рдкреВрд░реНрд╡ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдорд╛рддреНрд░рд╛ рд▓реЗрддрд╛ рд╣реИред  рдЖрдк <a href="">рдпрд╣рд╛рдВ</a> рдХреА рдкрд░рдд рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ <a href="">рд╣реИрдВ</a> ред  рддреЛ, рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ, рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред  рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмрд╕ рдирд╣реАрдВ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рд▓реЗрдХрд┐рди рдЪрд▓рд┐рдП рд╕реЛрдЪрддреЗ рд╣реИрдВ, рдЕрдЧрд░ рд╡рд╣ рдлреЛрди рдХрд░рддреА рд╣реИ, рддреЛ рд╡рд╣ рдЙрд╕рдХреА рдпрд╛рдж рджрд┐рд▓рд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд╣рд╛рдВ рдХрд░реЗрдЧреА? <br><br>  Microcontrollers рдХреЗ рд▓рд┐рдП "рдХреНрд▓рд╛рд╕рд┐рдХ" рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд░реИрдо рдХреЗ рд▓реЗрдЖрдЙрдЯ рдХреЛ рдпрд╛рдж рдХрд░реЗрдВ: <br><ul><li>  .data; </li><li>  .bss; </li><li>  рдЦрд╛рд▓реА рдЬрдЧрд╣ </li><li>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдЯреИрдХред </li></ul><br>  рдбреЗрдЯрд╛ рдореЗрдВ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╡реИрд╢реНрд╡рд┐рдХ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ (рдЪрд░, рд╕рдВрд░рдЪрдирд╛рдПрдВ рдФрд░ рдЕрдиреНрдп рд╡реИрд╢реНрд╡рд┐рдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдлрд╝реАрд▓реНрдб) рдХрд╛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдбреЗрдЯрд╛ рд╣реИред  рдмреАрдПрд╕рдПрд╕ рдореЗрдВ, рд╡реИрд╢реНрд╡рд┐рдХ рдХреНрд╖реЗрддреНрд░ рдЬрд┐рдирдХрд╛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╢реВрдиреНрдп рдорд╛рди рд╣реИ рдФрд░, рдзреНрдпрд╛рди рд╕реЗ, рдлреНрд░реАрдЖрд░рдЯреАрдУрдПрд╕ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ред  рдпрд╣ рд╕реНрдореГрддрд┐ рдореЗрдВ рд╕рд┐рд░реНрдл рдПрдХ рд╕рд░рдгреА рд╣реИред  рдЬрд┐рд╕рдХреЗ рд╕рд╛рде heap_x.c рдлрд╝рд╛рдЗрд▓ рд╕реЗ рд╡рд┐рдзрд┐рдпрд╛рдБ рдХрд╛рдо рдХрд░рддреА рд╣реИрдВред  рдЕрдЧрд▓рд╛ рдЦрд╛рд▓реА рдЬрдЧрд╣ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж (рдпрд╛ рдЕрдВрдд рд╕реЗ рдмрд▓реНрдХрд┐) рд╕реНрдЯреИрдХ рд╣реИред  рдХреНрдпреЛрдВрдХрд┐  FreeRTOS рдХрд╛ рдЙрдкрдпреЛрдЧ рдореЗрд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рдЗрд╕ рд╕реНрдЯреИрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╡рд▓ рддрдм рддрдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рд╢реЗрдбреНрдпреВрд▓рд░ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ред  рдФрд░, рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ, рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдмреЛрд▓рдЪрд╛рд▓ рддрдХ рд╕реАрдорд┐рдд рд╣реИ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЖрдорддреМрд░ рдкрд░ 100 рдмрд╛рдЗрдЯ рдХреА рд╕реАрдорд╛)ред <br><br>  рд▓реЗрдХрд┐рди рдлрд┐рд░, рд╕реНрдореГрддрд┐ рдХреЛ _sbrk рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЖрд╡рдВрдЯрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ?  рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ рдХрд┐ рд▓рд┐рдВрдХрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реЗ рд╡рд╣ рдХрд┐рд╕ рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *__attribute__ ((weak)) _sbrk (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> incr) { <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> __heap_start; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> __heap_end; ...</code> </pre> <br>  рдЕрдм рд╣рдо рдЙрдиреНрд╣реЗрдВ рд▓рд┐рдВрдХрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдвреВрдВрдврддреЗ рд╣реИрдВ (рдореЗрд░реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬреЛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЙрд╕рд╕реЗ рдереЛрдбрд╝реА рдЕрд▓рдЧ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рд╣рд┐рд╕реНрд╕рд╛ рдЙрд╕реА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИ: <br><pre> <code class="bash hljs">__stack = ORIGIN(SRAM) + LENGTH(SRAM); __main_stack_size = 1024; __main_stack_limit = __stack - __main_stack_size; ...  flash,    ... .bss (NOLOAD) : ALIGN(4) { ... . = ALIGN(4); __bss_end = .; } &gt;SRAM __heap_start = __bss_end; __heap_end = __main_stack_limit;</code> </pre> <br>  рдпрд╣реА рд╣реИ, рдпрд╣ рд╕реНрдЯреИрдХ рдХреЗ рдмреАрдЪ рдореЗрдореЛрд░реА (1 рдХреЗрдмреА рд╕реЗ 0x20020000 рдиреАрдЪреЗ 128 рдХреЗрдмреА рд░реИрдо рдХреЗ рд╕рд╛рде) рдФрд░ рдмреАрдПрд╕рдПрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕рдордЭ рдЧрдПред  рд▓реЗрдХрд┐рди рдЙрдирдХреЗ рдкрд╛рд╕ рдореЗрдзрд╛рд╡, рдореБрдХреНрдд рдФрд░ рдЕрдиреНрдп рддрд░реАрдХреЛрдВ рдХреЗ рдкреБрдирд░реНрдкрд░рд┐рднрд╛рд╖рд┐рдд рдереЗред  рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ рдХреЗ рдмрд╛рдж _sbrk рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ?  рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдирд┐рдХрд▓рд╛, рдПрдХ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рд╡рд┐рдзрд┐ <b>рдкреНрд░рд┐рдВрдЯрдл рдХрд╛</b> рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдмрдлрд░рд┐рдВрдЧ рдореЛрдб рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдзрд┐ - <b>рд╕реЗрдЯрд╡реЙрдл</b> (рдпрд╛ рдмрд▓реНрдХрд┐ _malloc_r, рдЬрд┐рд╕реЗ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдореЗрдВ рдПрдХ рдХрдордЬреЛрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдШреЛрд╖рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдореЙрд▓реЛрдХ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЬрд┐рд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ)ред <br><img src="https://habrastorage.org/webt/me/cf/er/mecfercw11rpbrxrfn0twjyqvva.jpeg"><br>  рдЪреВрдВрдХрд┐ рдореБрдЭреЗ рдпрдХреАрди рдерд╛ рдХрд┐ sbrk рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рд╕реНрдЯреИрдХ рдХреЗ рдХрд░реАрдм FreeRTOS (bss рд╕реЗрдХреНрд╢рди) рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рд░рдЦрд╛ (рдХреНрдпреЛрдВрдХрд┐ рдореБрдЭреЗ рдкрддрд╛ рдерд╛ рдХрд┐ рд╕реНрдЯреИрдХ рдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕реЗ 10 рдЧреБрдирд╛ рдХрдо рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛)ред <br><br>  рд╕рдорд╕реНрдпрд╛ 3 рдХреЗ рд╕рдорд╛рдзрд╛рди: <br><ul><li>  рдмреАрдПрд╕рдПрд╕ рдФрд░ рд╕реНрдЯреИрдХ рдХреЗ рдмреАрдЪ рдЗрдВрдбреЗрдВрдЯ; </li><li>  _malloc_r рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░реЗрдВ рддрд╛рдХрд┐ _sbrk рдХреЛ рди рдХрд╣рд╛ рдЬрд╛рдП (рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реЗ рдЕрд▓рдЧ рд╡рд┐рдзрд┐); </li><li>  рдореЙрд▓реЙрдХ рдФрд░ рдореБрдХреНрдд рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ред </li></ul><br>  рдореИрдВ рдкрд╣рд▓реЗ рд╡рд┐рдХрд▓реНрдк рдкрд░ рдмрд╕ рдЧрдпрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдорд╛рдирдХ _malloc_r (рдЬреЛ libg_nano.a (lib_a-nano-mallocr.o рдХреЗ рдЕрдВрджрд░ рд╣реИ) рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдмрджрд▓рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рдерд╛) (рд╡рд┐рдзрд┐ рдХреЛ __attribute__ (рдХрдордЬреЛрд░) рдХреЗ рд░реВрдк рдореЗрдВ рдШреЛрд╖рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рджреНрд╡рд┐-рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмрд╛рд╣рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред рдореИрдВ рд▓рд┐рдВрдХ рдХрд░рдиреЗ рдореЗрдВ рд╕рдлрд▓ рдирд╣реАрдВ рд╣реБрдЖ)ред  рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рдХреЙрд▓ рдХреЗ рд▓рд┐рдП sbrk рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рдерд╛ред <br><br>  рдЕрдВрддрд┐рдо рд╕рдорд╛рдзрд╛рди рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдЯреИрдХ рдФрд░ _sbrk рдХреЗ рд▓рд┐рдП RAM рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рднрд╛рдЬрди рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдирд╛ рдерд╛ред  рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕реЗрдЯрдЕрдк рдЪрд░рдг рдХреЗ рджреМрд░рд╛рди рдЕрдиреБрднрд╛рдЧ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рд╕реНрдЯреИрдХреНрдб рдирд╣реАрдВ рд╣реИрдВред  рдЕрдВрджрд░ sbrk рднреА рдЕрдиреБрднрд╛рдЧ рд╕реЗ рдмрд╛рд╣рд░ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЬрд╛рдБрдЪ рд╣реИред  рдореБрдЭреЗ рдПрдХ рдЫреЛрдЯрд╛ рд╕реБрдзрд╛рд░ рдХрд░рдирд╛ рдерд╛ рддрд╛рдХрд┐ рд╡рд┐рджреЗрд╢ рдореЗрдВ рдПрдХ рд╕рдВрдХреНрд░рдордг рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рджреМрд░рд╛рди, рдкреНрд░рд╡рд╛рд╣ рдереЛрдбрд╝реА рджреЗрд░ рдХреЗ рд▓реВрдк рдореЗрдВ рд▓рдЯрдХрд╛ рд╣реЛ (рдХреНрдпреЛрдВрдХрд┐ sbrk рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╡рд▓ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЪрд░рдг рдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЪрд░рдг рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдбреАрдмрдЧ рдХрд░рдиреЗ рдХреЗ рдЪрд░рдг рдореЗрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП)ред <br><div class="spoiler">  <b class="spoiler_title">рд╕рдВрд╢реЛрдзрд┐рдд рдореЗрдо</b> <div class="spoiler_text"><pre> <code class="bash hljs">MEMORY { FLASH (RX) : ORIGIN = 0x08000000, LENGTH = 1M CCM_SRAM (RW) : ORIGIN = 0x10000000, LENGTH = 64K SRAM (RW) : ORIGIN = 0x20000000, LENGTH = 126K SBRK_HEAP (RW) : ORIGIN = 0x2001F800, LENGTH = 1K MAIN_STACK (RW) : ORIGIN = 0x2001FC00, LENGTH = 1K }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди</b> <div class="spoiler_text"><pre> <code class="bash hljs">__stack = ORIGIN(MAIN_STACK) + LENGTH(MAIN_STACK); __heap_start = ORIGIN(SBRK_HEAP); __heap_end = ORIGIN(SBRK_HEAP) + LENGTH(SBRK_HEAP);</code> </pre> </div></div><br>  рдЖрдк рдЗрд╕ <a href="">рдХрдореЗрдЯреА</a> рдореЗрдВ рдореЗрд░реЗ рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрдВ</a> <a href="">рдореЗрдо.рд▓реНрдб</a> рдФрд░ <a href="">рд╕реЗрдХреНрд╢рди</a> рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИрдВ</a> ред <br><br>  UPD 07/12/2019: рдлреНрд▓реЛрдЯ рд╡реИрд▓реНрдпреВ рдХреЗ рд╕рд╛рде рдкреНрд░рд┐рдВрдЯрдл рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЭрдВрдбреЗ рдХреА рд╕реВрдЪреА рддрдп рдХреАред  рдореИрдВрдиреЗ рд╕рд╣реА рд╕рдВрдХрд▓рди рдФрд░ рд▓реЗрдЖрдЙрдЯ рдЭрдВрдбреЗ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣реЗ CMakeLists рдХреЗ рд▓рд┐рдВрдХ рдХреЛ рд╕рд╣реА рдХрд┐рдпрд╛ (рдЗрд╕ рддрдереНрдп рдХреЗ рд╕рд╛рде рдмрд╛рд░реАрдХрд┐рдпрд╛рдВ рдереАрдВ рдХрд┐ рдЭрдВрдбреЗ рдХреЛ рдПрдХ рдХреЗ рдмрд╛рдж рдПрдХ рдФрд░ "рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реВрдЪреАрдмрджреНрдз рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП?", рдЬрдмрдХрд┐ рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдпрд╛ рд╡рд┐рднрд┐рдиреНрди рд▓рд╛рдЗрдиреЛрдВ рдкрд░ рдпрд╣ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛)ред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi459420/">https://habr.com/ru/post/hi459420/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi459404/index.html">рдЖрдЗрдбрд┐рдпрд╛: рдмреЗрдирд╛рдореА рдкрдВрдЬреАрдХрд░рдг / рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдПрдереЗрд░рдо + рдореЗрдЯрд╛рдорд╛рд╕реНрдХ рдиреЗрдЯрд╡рд░реНрдХ, рдИрдореЗрд▓ рдХреЗ рдмрд┐рдирд╛, рдЖрджрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред</a></li>
<li><a href="../hi459408/index.html">рдХреИрд╕реЗ рдореИрдВрдиреЗ рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╛рдирдЪрд┐рддреНрд░ рдЦреЛрдЬ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред рднрд╛рдЧ 3 (рдЕрдВрддрд┐рдо)</a></li>
<li><a href="../hi459410/index.html">рдХреЛрдб рдХреИрд╕реЗ рд▓рд┐рдЦреЗрдВ рддрд╛рдХрд┐ рдЖрдкрдХреЗ рд╕рд╣рдХрд░реНрдореА рдХрд╕рдо рди рдЦрд╛рдПрдВ</a></li>
<li><a href="../hi459414/index.html">рд░рд┐рдПрдХреНрдЯ рдХрдВрдкреЛрдиреЗрдВрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдПрдкреАрдЖрдИ рд▓рд┐рдЦрдирд╛, рднрд╛рдЧ 4: рдПрдкреНрд░реЛрдкреИрдХрд▓рд┐рдкреНрд╕ рд╕реЗ рд╕рд╛рд╡рдзрд╛рди рд░рд╣реЗрдВ</a></li>
<li><a href="../hi459416/index.html">рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдШрдЯрдХреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдкреАрдЖрдИ рд▓рд┐рдЦрдирд╛, рднрд╛рдЧ 5: рдмрд╕ рдЙрдкрдпреЛрдЧ рд╕рдВрд░рдЪрдирд╛</a></li>
<li><a href="../hi459422/index.html">рд╣рдо рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдШрдЯрдХреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдкреАрдЖрдИ рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рднрд╛рдЧ 6: рд╣рдо рдШрдЯрдХреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рдмрдирд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi459426/index.html">Yandex.Avto рдХрд╛ рдбрд┐рдЬрд╝рд╛рдЗрди рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛</a></li>
<li><a href="../hi459428/index.html">рдЗрдВрдЯреЗрд▓ рдХреНрд╡рд╛рд░реНрдЯрд╕ рдкреНрд░рд╛рдЗрдо - рд╕рдм рдХреБрдЫ рдЖрдкрдХреЛ рдЗрдВрдЯреЗрд▓ рдПрдлрдкреАрдЬреАрдП рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi459430/index.html">рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдлреЙрд░реНрдо рдЬрдирд░реЗрд╢рди рд╡рд╛рд▓рд╛ рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди: рд╣рдорд╛рд░рд╛ рдорд╛рдорд▓рд╛</a></li>
<li><a href="../hi459432/index.html">RD-180: рдХреНрдпрд╛ рдЕрдореЗрд░рд┐рдХрд╛ рд░реЙрдХреЗрдЯ рдЗрдВрдЬрди рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>