<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìß üèåÔ∏è üôÖüèº Comment nous avons d√©velopp√© un appareil pour surveiller l'attention des conducteurs. D√©couvrez Yandex.Taxi üè¶ ü§¶üèº üß¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le taxi doit √™tre confortable et s√ªr. Et cela d√©pend non seulement de la qualit√© de la voiture et du service, mais aussi de la concentration de l‚Äôatte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons d√©velopp√© un appareil pour surveiller l'attention des conducteurs. D√©couvrez Yandex.Taxi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/461137/"><img src="https://habrastorage.org/webt/fu/ag/ow/fuagowhmp0mr-5j1p_xvxe4vlkw.jpeg"><br><br>  Le taxi doit √™tre confortable et s√ªr.  Et cela d√©pend non seulement de la qualit√© de la voiture et du service, mais aussi de la concentration de l‚Äôattention du conducteur, qui tombe lors d‚Äôun surmenage.  Par cons√©quent, au niveau du service, nous limitons le temps que le conducteur passe au volant. <br><br>  Mais parfois, les conducteurs sont d√©j√† fatigu√©s - par exemple, une personne √©tait occup√©e √† un autre travail toute la journ√©e, et le soir, elle a d√©cid√© de ¬´diriger¬ª.  Que faire √† ce sujet?  Comment comprendre que le conducteur intervient sans changer de sommeil?  Vous pouvez, par exemple, essayer d'√©valuer √† quel point il surveille la route et d√©terminer les signes de fatigue, par exemple, par la nature des clignotements.  Cela vous semble-t-il simple?  Tout est plus compliqu√© qu'il n'y para√Æt. <br><br>  Aujourd'hui, nous allons d'abord dire aux lecteurs de Habr comment nous avons con√ßu et d√©velopp√© un appareil photo qui peut le faire. <br><br>  Donc, c'est donn√©: la fr√©quence et la dur√©e des clignements d√©pendent du degr√© de fatigue.  Lorsque nous sommes fatigu√©s, la t√™te est moins mobile, la direction de notre regard change moins souvent, nous clignons plus souvent et laissons les yeux ferm√©s pendant de longues p√©riodes de temps - la diff√©rence peut √™tre mesur√©e en fractions de seconde ou plusieurs degr√©s de rotation, mais elle existe.  Notre t√¢che √©tait de concevoir un appareil qui nous permet d'analyser les clignements, ainsi que la direction de notre regard, les b√¢illements et les mouvements de la t√™te, afin d'√©valuer le niveau d'attention et de fatigue du conducteur. <br><br><a name="habracut"></a>  Tout d'abord, nous avons d√©cid√©: cr√©ons une application pour ordinateur portable, installons-la sur les b√©n√©voles parmi les employ√©s, et utiliserons-nous la cam√©ra int√©gr√©e pour suivre les panneaux dont nous avons besoin?  Nous allons donc imm√©diatement recueillir un grand nombre d'informations pour l'analyse et tester rapidement nos hypoth√®ses. <br><br>  Spoiler: rien ne s'est pass√©!  Assez rapidement, il est devenu clair que la plupart des gens qui travaillent sur un ordinateur regardent constamment le clavier et penchent la t√™te.  Autrement dit, les yeux ne sont pas visibles, et il n'est m√™me pas clair s'ils sont ferm√©s ou ouverts, une personne clignote ou regarde simplement de l'√©cran au clavier et vice versa. <br><br><img src="https://habrastorage.org/webt/l9/la/n6/l9lan6o4wjrpctaeelbsnuosnso.jpeg"><br><br>  Ensuite, nous avons r√©alis√© que m√™me pour fabriquer un prototype, nous avons besoin d'une sorte d'appareil.  Nous avons achet√© le premier mod√®le de cam√©ra IP disponible, qui fonctionne dans le domaine infrarouge. <br><br>  Pourquoi avons-nous besoin de l'infrarouge?  L'√©clairage peut √™tre diff√©rent, parfois l'utilisateur est √† l'ombre, parfois la lumi√®re est de derri√®re, de dessus, ou il n'y en a pas du tout.  Si nous fabriquons un appareil de mesure, il devrait fonctionner de la m√™me mani√®re dans toutes les conditions. <br><br>  Pour l'exp√©rience, un appareil photo assez populaire de Xiaomi est apparu - CHUANGMI. <br><br><img src="https://habrastorage.org/webt/tr/qt/f9/trqtf9jukb0tuzste_5rq-nsiwk.jpeg"><br><br>  Il s'est av√©r√© qu'elle tire √† une fr√©quence de 15 images par seconde, et nous en avons besoin deux fois plus: le clignotement dure de 30 √† 150 ms, √† 15 images par seconde, nous risquions de ne pas voir un clignotement inf√©rieur √† 60‚Äì70 ms.  Par cons√©quent, nous avons d√ª modifier son micrologiciel pour activer de force l'√©clairage infrarouge, obtenir un acc√®s direct au flux vid√©o et r√©cup√©rer les 30 images n√©cessaires par seconde.  Apr√®s avoir connect√© la cam√©ra √† l'ordinateur portable et configur√© pour recevoir le flux vid√©o via le protocole RTSP, nous avons commenc√© √† enregistrer les premi√®res vid√©os.  La cam√©ra a √©t√© plac√©e √† 15 cm sous la cam√©ra de l'ordinateur portable, ce qui a permis de mieux "voir" les yeux de l'utilisateur. <br><br>  Succ√®s?  Et encore une fois, non.  Apr√®s avoir collect√© plusieurs centaines de vid√©os, nous avons r√©alis√© que rien ne se passait.  Le comportement de l'utilisateur d'un ordinateur portable pendant la journ√©e est diff√©rent du comportement du conducteur: une personne peut se lever √† tout moment, se d√©placer pour manger, simplement marcher et se r√©chauffer, tandis que le conducteur passe beaucoup plus de temps en position assise.  Par cons√©quent, ces donn√©es ne nous conviennent pas. <br><br>  Il est devenu clair que la seule fa√ßon √©tait de fabriquer ou d'acheter une cam√©ra adapt√©e et de l'installer dans la voiture. <br><br>  Il semblerait que tout soit √©l√©mentaire: nous achetons un DVR, nous nous tournons vers le conducteur, nous attachons dans la voiture et une fois par semaine nous r√©cup√©rons des cartes SD avec des enregistrements vid√©o.  Mais ici, en r√©alit√©, tout s'est av√©r√© pas si simple. <br><br>  Premi√®rement, il est extr√™mement difficile de trouver un DVR avec √©clairage IR, et nous devons bien voir le visage, surtout la nuit. <br><br>  Deuxi√®mement, tous les DVR ont un objectif grand angle, de sorte que la zone avec le visage du conducteur se r√©v√®le √™tre assez petite et que vous ne pouvez rien distinguer sur l'enregistrement.  Oui, et la distorsion de l'objectif g√¢che √† peu pr√®s l'analyse de la position de la t√™te et de la direction de la vue. <br><br>  Troisi√®mement, cette entreprise n'est pas tr√®s √©volutive sur dix, cent ou plusieurs machines.  Nous devons collecter de nombreuses donn√©es de diff√©rents conducteurs afin de les analyser et de tirer des conclusions.  Changer manuellement des cartes m√©moire sur une centaine de machines chaque semaine ou chaque jour est une √©norme perte de temps.  Nous avons m√™me essay√© de trouver une cam√©ra qui t√©l√©chargerait des vid√©os sur le cloud, mais il n'y avait rien de similaire sur le march√©. <br><br>  Il y avait m√™me une id√©e pour faire "votre propre DVR" √† partir du Raspberry Pi, une cam√©ra avec √©clairage IR et supports. <br><br><img src="https://habrastorage.org/webt/zr/ba/3z/zrba3zrobipczwlnn8u0swwvdoi.jpeg"><br><br>  Le r√©sultat n'√©tait pas tout √† fait ce que nous attendions: encombrant, il est impossible d'installer la cam√©ra s√©par√©ment de l'ordinateur.  Le fait est qu'avec une longueur de c√¢ble de plus de 50 cm, des probl√®mes avec le signal ont commenc√©, et le c√¢ble CSI lui-m√™me est assez fragile, trop large et donc peu adapt√© √† une installation dans une machine. <br><br>  Nous devons aller √† Hong Kong, nous avons d√©cid√©.  Le but du voyage √©tait assez abstrait: voir ce que font les diff√©rents fabricants dans le domaine de l'analyse du comportement du conducteur, acheter des √©chantillons de produits si nous en trouvons et rechercher des solutions / composants techniques appropri√©s que nous pourrions installer dans les voitures. <br><br>  Nous sommes all√©s imm√©diatement √† deux expositions populaires d'√©lectronique et de composants.  Dans le pavillon de l'√©lectronique automobile, nous avons vu une domination sans pr√©c√©dent des enregistreurs vid√©o, des cam√©ras de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">recul</a> et des syst√®mes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ADAS</a> , mais presque personne n'√©tait engag√© dans l'analyse du comportement du conducteur.  Les prototypes de plusieurs fabricants ont d√©termin√© l'endormissement, la distraction, le tabagisme et les conversations t√©l√©phoniques, mais personne n'a m√™me pens√© √† la fatigue. <br><br>  En cons√©quence, nous avons achet√© plusieurs √©chantillons de cam√©ras et d'ordinateurs √† carte unique.  Il est devenu clair que 1) il n'y a pas de produits finis appropri√©s pour nous;  2) il est n√©cessaire de s√©parer l'ordinateur et l'appareil photo afin de ne pas obscurcir la vue du conducteur.  Par cons√©quent, nous avons pris une carte de cam√©ra avec une interface USB et, en tant qu'unit√© informatique, un ordinateur Banana Pi √† carte unique, et en m√™me temps plusieurs lecteurs Android bas√©s sur des processeurs Amlogic. <br><br><img src="https://habrastorage.org/webt/mh/yy/rq/mhyyrqsrpdv8ypl30wacadprkne.jpeg"><br><br>  "Pourquoi les joueurs?"  - demandez-vous.  En fait, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">S912 et m√™me le S905</a> sont assez puissants en termes de performances et ils peuvent facilement extraire l'enregistrement vid√©o pour nos besoins, m√™me avec une analyse d'image sur place.  Une analyse d'image sur site √©tait n√©cessaire afin de ne pas envoyer l'int√©gralit√© du flux vid√©o au serveur. <br><br>  Comptons: une minute de vid√©o bien compress√©e en r√©solution H.264 de 640 √ó 480 (30 FPS) prend au moins 5 m√©gaoctets.  Donc, dans une heure, il y aura 300 m√©gaoctets, et pour un quart de travail standard de 8 heures - environ 2-3 gigaoctets. <br><br>  Charger 3 gigaoctets de vid√©o chaque jour √† l'aide d'un modem LTE est tr√®s ¬´cher¬ª.  Par cons√©quent, nous avons d√©cid√© d'enregistrer p√©riodiquement des vid√©os de 5 minutes, d'analyser tout ce qui se passe dans la voiture juste l√† et de le t√©l√©charger sur nos serveurs sous la forme d'un flux d'√©v√©nements analys√©: un ensemble de points faciaux, une direction de la vue, un tour de t√™te, etc. <br><br>  Nous sommes rentr√©s des expositions de bonne humeur, avons apport√© un tas d'ordures n√©cessaires (et inutiles) et avons r√©alis√© comment nous continuerions √† fabriquer le prototype. <br><br>  La cam√©ra USB que nous avons trouv√©e √† Hong Kong √©tait presque parfaite pour nous: taille 38 √ó 38 mm, lentilles standard (12 mm), possibilit√© de souder des illuminateurs IR directement sur la carte. <br><br><img src="https://habrastorage.org/webt/vw/r9/fs/vwr9fs6x4vzo304bkvfw9phoqse.jpeg"><br><br>  Par cons√©quent, nous avons imm√©diatement demand√© au fabricant de nous faire un prototype avec les composants n√©cessaires.  Maintenant, nous avons compris: nous avons besoin d'une cam√©ra USB avec r√©tro-√©clairage et d'un PC √† carte unique pour le traitement vid√©o.  Nous avons d√©cid√© d'essayer tout ce qui √©tait pr√©sent√© sur le march√© et organis√© une s√©ance de shopping sur AliExpress.  Nous avons achet√© quatre douzaines d'appareils photo diff√©rents, une douzaine de PC √† carte unique, des lecteurs Android, une collection d'objectifs 12 mm et de nombreux autres appareils √©tranges. <br><br><img src="https://habrastorage.org/webt/ck/6m/tb/ck6mtbk3ytd-8iucodljfkod-gs.jpeg"><br><br>  Le probl√®me avec le mat√©riel a √©t√© r√©solu.  Et les logiciels? <br><br>  Assez rapidement, nous avons pu obtenir un prototype simple bas√© sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenCV</a> , qui √©crit une vid√©o, trouve le visage du conducteur, l‚Äôanalyse, marque 68 points cl√©s sur le visage, reconna√Æt le clignotement, le b√¢illement, la rotation de la t√™te, etc. <br><br>  La t√¢che suivante consistait √† faire fonctionner notre prototype sur un PC √† carte unique.  Raspberry PI est tomb√© imm√©diatement: peu de c≈ìurs, un processeur faible, plus de sept images par seconde ne peuvent pas en √™tre retir√©s.  Et comment √©crire simultan√©ment une vid√©o, reconna√Ætre un visage et l'analyser, cela ne faisait aucun doute.  Pour les m√™mes raisons, les d√©codeurs et ordinateurs monocarte des Allwinner (H2, H3, H5), Amlogic S905 et Rockchip RK3328 ne nous convenaient pas, bien que ce dernier soit tr√®s proche des performances souhait√©es.  En cons√©quence, nous avons encore deux SoC potentiels: Amlogic S912 et Rockchip RK3399. <br><br>  Chez Amlogic, le choix des appareils √©tait restreint: un bo√Ætier TV ou Khadas VIM2.  Tout fonctionnait de la m√™me fa√ßon sur la TV Box et Khadas, mais le refroidissement des d√©codeurs TV laissait beaucoup √† d√©sirer, et la configuration de Linux sur eux n'est souvent pas un exercice pour les √¢mes sensibles: faire fonctionner le Wi-Fi, BT, faire voir au syst√®me d'exploitation toute la m√©moire, - C'est long, difficile et impr√©visible.  En cons√©quence, nous avons choisi Khadas VIM2: il a un radiateur de refroidissement standard, et la carte est suffisamment compacte pour le cacher derri√®re le tableau de bord de la machine. <br><br><img src="https://habrastorage.org/webt/f_/_1/lt/f__1ltkkzkqy08jygtdgs-jrooi.jpeg"><br><br>  √Ä cette √©poque, le fabricant de la carte de la cam√©ra nous avait d√©j√† envoy√© un lot de test de cent pi√®ces, et nous avions h√¢te de nous battre: fabriquer un prototype, le mettre dans une voiture et collecter des donn√©es. <br><br>  Nous avions une cam√©ra, il y avait un logiciel, il y avait un PC √† carte unique, mais il n'y avait pas la moindre id√©e de comment mettre tout cela dans la voiture et le connecter √† l'alimentation de bord. <br><br>  De toute √©vidence, la cam√©ra avait besoin d'un corps et d'un support.  Nous avons achet√© deux imprimantes 3D √† la fois pour imprimer des pi√®ces, et l'entrepreneur nous a fait le premier mod√®le primitif du bo√Ætier. <br><br><img src="https://habrastorage.org/webt/ju/jt/ct/jujtct45fz8xpuv-pd_xvr18qmm.jpeg"><br><br>  Maintenant, la t√¢che difficile du choix a surgi: o√π monter la cam√©ra dans la voiture pour obtenir une bonne image, mais pas pour obscurcir la vision du conducteur.  Il y avait exactement trois options: <br><br><ol><li>  Au milieu du pare-brise. </li><li>  Sur le panier gauche. </li><li>  Sur le r√©troviseur. </li></ol><br><img src="https://habrastorage.org/webt/ou/nv/en/ounven5ffmbmk-fnzvfqqy6oyls.jpeg"><br><br>  √Ä ce moment, il nous a sembl√© pr√©f√©rable de fixer la cam√©ra directement sur le r√©troviseur: elle est toujours dirig√©e vers le visage du conducteur, de sorte que la cam√©ra filme exactement ce dont nous avons besoin.  Malheureusement, les fabricants de r√©troviseurs ne se sont pas assur√©s de pouvoir y attacher quelque chose de mani√®re pratique et fiable.  Les cam√©ras ne tenaient pas bien, sont tomb√©es et ont ferm√© l'examen. <br><br><img src="https://habrastorage.org/webt/9h/oo/gc/9hoogck8s_vhjdzabffnwni1n78.jpeg"><br><br>  N√©anmoins, nous avons √©quip√© plusieurs machines et commenc√© √† en collecter des donn√©es.  Il est devenu clair que la conception √©tait imparfaite, et les probl√®mes li√©s aux performances et au chauffage ont grimp√© tout en enregistrant et en analysant le visage. <br><br>  Ensuite, nous avons d√©cid√© de monter la cam√©ra au niveau des yeux sur le rack gauche: nous fermons moins la revue et avons un bon angle pour la cam√©ra afin que le conducteur puisse √™tre vu.  L'affaire a d√ª √™tre refaite, car les fixations avec charni√®res se sont r√©v√©l√©es extr√™mement peu fiables: elles se brisent lors des secousses, se cassent et les ventouses se d√©tachent du verre. <br><br><img src="https://habrastorage.org/webt/qj/mt/ko/qjmtkocxocrcpmzhkzw3urszdem.jpeg"><br><br>  Nous avons d√©cid√© que pour le prototype et la collecte de donn√©es, il est pr√©f√©rable de coller fermement les cam√©ras au verre afin qu'aucune secousse et aucune influence ext√©rieure ne puissent changer leur position.  Nous avons l√©g√®rement modifi√© le bo√Ætier et en m√™me temps effectu√© des tests de charge de l'installation √† l'aide d'un ruban sp√©cial double face.  Pour les tests, un √©quipement complexe et de haute pr√©cision a √©t√© utilis√©. <br><br><img src="https://habrastorage.org/webt/7r/c-/cb/7rc-cbdojhkigygkl9kbwucodek.jpeg"><br><br>  En raison de probl√®mes de performances, nous avons d√©cid√© de changer le SoC en un plus puissant, nous avons donc choisi le PC √† carte unique NanoPI M4 sur le processeur Rockchip RK3399. <br><br>  Compar√© au Khadas VIM2, il est environ un tiers plus productif, il a une compression mat√©rielle et un d√©codage vid√©o, et il se comporte beaucoup plus stable dans des conditions de temp√©rature difficiles.  Oui, nous avons essay√© de faire fonctionner des cam√©ras et des circuits imprim√©s dans le cong√©lateur, les avons chauff√©s dans le four et avons effectu√© de nombreux autres tests inhumains. <br><br><img src="https://habrastorage.org/webt/ro/ia/ty/roiatyksmkri083bp6dsk2soye4.jpeg"><br><br>  Comme nous enregistrons des vid√©os non seulement comme √ßa, mais en dynamique tout au long de la journ√©e, il √©tait important que l'heure syst√®me sur l'appareil soit pr√©cise.  Malheureusement, la plupart des ordinateurs monocarte ne sont pas √©quip√©s d'une horloge auto-aliment√©e.  Nous avons eu la chance que notre NanoPI ait un connecteur de batterie. <br><br>  J'ai d√ª concevoir un bo√Ætier pour un ordinateur qui le prot√©gerait physiquement et servirait de support pour les antennes WiFi et BT.  L√†, nous avons √©galement fourni un endroit pour monter la batterie de la montre avec un support. <br><br><img src="https://habrastorage.org/webt/cy/94/6w/cy946wwax2lf0lt9szdcx-7-qbe.jpeg"><img src="https://habrastorage.org/webt/ba/s8/xu/bas8xuo0kr2v5_ti2gczvaups_i.jpeg"><br><br>  Ensuite, nous avons pr√©vu d'√©quiper une centaine de machines de prototypes qui enregistreront la vid√©o et transmettront toutes les donn√©es t√©l√©m√©triques au cloud en ligne: y a-t-il un conducteur, √† quelle fr√©quence et pendant longtemps il clignote, b√¢ille, est distrait de la route, tourne la t√™te, etc. Tout cela ( et pas seulement) les param√®tres nous permettent de former un mod√®le qui √©value la concentration du conducteur sur la route, qu'il soit distrait ou fatigu√©.  Pour faire tout cela directement sur l'appareil dans la voiture, nous avons d√ª r√©√©crire compl√®tement le code, effectuer la compression vid√©o mat√©rielle, faire pivoter les journaux et les enregistrements vid√©o, l'envoyer r√©guli√®rement au serveur, mettre √† jour le logiciel √† distance, et bien plus encore. <br><br>  Dans le m√™me temps, il est devenu clair pour nous que nos calculs et algorithmes fonctionneraient beaucoup mieux avec une analyse faciale de base plus pr√©cise.  Dans les premiers prototypes, nous avons utilis√© le d√©tecteur de visage int√©gr√© √† OpenCV bas√© sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mod√®le de cascade de haar</a> et le mod√®le de marquage de 68 points de visage bas√© sur la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dlib</a> .  Nous avons calcul√© nous-m√™mes la position de la t√™te en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">calculant la</a> projection des points du visage sur le plan focal.  Les solutions open source pour la reconnaissance et le marquage des visages fonctionnent bien sur les cadres o√π le visage est tourn√© de face ou de profil, mais dans des conditions interm√©diaires, ils se trompent souvent. <br><br>  Par cons√©quent, nous avons d√©cid√© de conc√©der sous licence une bonne solution tierce de reconnaissance faciale et de marquage - VisionLabs SDK.  Compar√© aux algorithmes pr√©c√©dents, il est plus gourmand en ressources, mais il donne une augmentation notable de la qualit√© de la reconnaissance faciale et du marquage, ce qui conduit √† une extraction plus pr√©cise des facteurs d'apprentissage automatique.  Avec l'aide de coll√®gues de VisionLabs, nous avons pu passer rapidement √† leur SDK et obtenir les performances dont nous avions besoin: 30 images / sec.  √† une r√©solution de 640x480. <br><br>  Le SDK VisionLabs utilise des r√©seaux de neurones pour la reconnaissance faciale.  La technologie traite chaque image, trouve le visage du conducteur dessus et donne les coordonn√©es des yeux, du nez, de la bouche et d'autres points cl√©s.  Les donn√©es obtenues sont utilis√©es pour cr√©er un cadre normalis√© de taille 250x250, o√π le visage est situ√© strictement au centre.  Ce cadre peut d√©j√† √™tre utilis√© pour calculer la position de la t√™te en degr√©s le long de trois axes: lacet, tangage et roulis.  Pour suivre l'√©tat des yeux du conducteur, le syst√®me analyse l'image des yeux et d√©cide pour chaque ≈ìil s'il est ferm√© ou ouvert.  Le syst√®me est capable de d√©terminer √† l'aide de la technologie IR Liveness si une personne vivante est devant la cam√©ra ou si le conducteur a joint une photo.  Pour l'analyse, une trame normalis√©e est utilis√©e, et √† la sortie, nous obtenons le r√©sultat vivant ou non vivant. <br><br><h4>  Conclusion </h4><br>  Pendant que nous r√©√©crivions et d√©boguions des logiciels, nos imprimantes 3D imprimaient des bo√Ætiers pour cam√©ras et PC √† carte unique de jour comme de nuit.  L'impression du kit (bo√Ætier de l'appareil photo + bo√Ætier PC) a n√©cessit√© environ 3-4 heures de fonctionnement de l'imprimante, nous avons donc d√ª augmenter les capacit√©s de production: nous avons utilis√© quatre imprimantes.  Mais nous avons r√©ussi √† tout faire dans les d√©lais. <br><br><img src="https://habrastorage.org/webt/ob/rs/b5/obrsb5c3yhdnisat6cn5jvatoa4.jpeg"><br><br>  En deux semaines, nous avons enti√®rement √©quip√© les cent premi√®res voitures de plusieurs flottes de taxis - partenaires Yandex.Taxi.  Maintenant, avec leur aide, nous collectons des vid√©os, analysons le comportement du conducteur, les signes de fatigue, am√©liorons les algorithmes et formons des mod√®les qui √©valuent le niveau d'attention et de fatigue.  Et ce n'est qu'apr√®s cela (en tenant compte de toutes les donn√©es, des commentaires des conducteurs et des passagers) que nous serons pr√™ts √† passer √† l'√©tape suivante - la production de masse et la mise en ≈ìuvre. <br><br>  Malheureusement, pour s'√©tendre √† plusieurs milliers ou dizaines de milliers d'installations, la solution technique actuelle n'est pas tr√®s adapt√©e pour un certain nombre de raisons.  Tout ce dont nous avons parl√© dans cet article est une exp√©rience rapide, dont le but √©tait d'apprendre rapidement √† collecter des donn√©es directement √† partir des machines afin de former des mod√®les.  La prochaine grande √©tape pour nous est de d√©velopper et de commencer √† produire un appareil de m√™mes dimensions, mais compos√© d'une seule unit√©: la cam√©ra, les capteurs et le modem seront situ√©s dans un bo√Ætier compact, que nous installerons en masse dans des machines. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461137/">https://habr.com/ru/post/fr461137/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461125/index.html">La t√¢che de cr√©ation de codes num√©riques s√©quentiels pour la num√©rotation des messages dans le code source dans Visual Studio (ex. C #)</a></li>
<li><a href="../fr461127/index.html">Analyse des performances des machines virtuelles dans VMware vSphere. Partie 3: Stockage</a></li>
<li><a href="../fr461129/index.html">√Ä propos de Kote, de sa femme, de ses deux fils, de l'id√©e ... et pas seulement. Histoire avec suite</a></li>
<li><a href="../fr461131/index.html">Chariot √† chariots ROS, partie 2. Logiciel</a></li>
<li><a href="../fr461133/index.html">Test du code SQL Server avec tSQLt</a></li>
<li><a href="../fr461141/index.html">Mon premier jour avec Haiku: elle est √©tonnamment bonne</a></li>
<li><a href="../fr461143/index.html">Sur les probl√®mes actuels de conception de jeux et les moyens de les r√©soudre. Vue de dessous</a></li>
<li><a href="../fr461145/index.html">Que doit diriger une √©quipe: r√¥les, responsabilit√©s et comp√©tences</a></li>
<li><a href="../fr461147/index.html">Comment √©conomiser 64 heures en combinant des cl√©s dans PowerPoint</a></li>
<li><a href="../fr461149/index.html">Migration sans entrave de MongoDB vers Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>