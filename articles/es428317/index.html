<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¨ üåΩ üë©üèº‚Äçüé® Reaccionar ganchos: ¬øganar o perder? üôÉ üóùÔ∏è üßëüèæ‚Äçü§ù‚Äçüßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Con el lanzamiento del nuevo React 16.6.0, HOOKS (PROPUESTA) apareci√≥ en la documentaci√≥n. Ahora est√°n disponibles en react 17.0.0-alpha y se discuten...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reaccionar ganchos: ¬øganar o perder?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428317/"><p><img src="https://habrastorage.org/webt/qi/fs/qc/qifsqcglrtrastzefywxuzgnhfk.jpeg" alt="imagen"></p><br><p>  Con el lanzamiento del nuevo React 16.6.0, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HOOKS (PROPUESTA)</a> apareci√≥ en la documentaci√≥n.  Ahora est√°n disponibles en react 17.0.0-alpha y se discuten en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RFC</a> abierto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">: React Hooks</a> .  Veamos qu√© es y por qu√© se necesita debajo del corte. </p><a name="habracut"></a><br><p>  S√≠, es RFC y puede influir en la implementaci√≥n final discutiendo con los creadores de reaccionar por qu√© eligieron este o aquel enfoque. </p><br><p>  Echemos un vistazo a c√≥mo se ve un gancho est√°ndar: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Declare a new state variable, which we'll call "count" const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;p&gt;You clicked {count} times&lt;/p&gt; &lt;button onClick={() =&gt; setCount(count + 1)}&gt; Click me &lt;/button&gt; &lt;/div&gt; ); }</span></span></code> </pre> <br><p>  Intenta pensar en este c√≥digo, es un avance y al final del art√≠culo ya comprender√°s lo que significa.  Lo primero que debe saber es que esto no rompe la compatibilidad con versiones anteriores y tal vez se agregar√°n en 16.7 despu√©s de recopilar comentarios y sugerencias en el RFC. </p><br><p>  Como aseguran los muchachos, este no es un plan para eliminar las clases de un reactivo. </p><br><p>  Adem√°s, los ganchos no reemplazan los conceptos actuales de la reacci√≥n, todo est√° en lugar de props / state / context / refs.  Esta es solo otra forma de usar su poder. </p><br><h3 id="motivaciya">  Motivaci√≥n </h3><br><p>  Los ganchos resuelven a primera vista problemas no conectados que aparecieron con el soporte de decenas de miles de componentes durante 5 a√±os desde Facebook. </p><br><p>  Lo m√°s dif√≠cil es reutilizar la l√≥gica en componentes con estado, la reacci√≥n no tiene forma de vincular el comportamiento reutilizable al componente (por ejemplo, conectarlo al repositorio).  Si trabaj√≥ con React, conoce el concepto de HOC (componente de alto orden) o accesorios de renderizado.  Estos son patrones suficientemente buenos, pero a veces se usan en exceso, requieren la reestructuraci√≥n de los componentes para que puedan usarse, lo que generalmente hace que el c√≥digo sea m√°s engorroso.  Vale la pena mirar una aplicaci√≥n de reacci√≥n t√≠pica y quedar√° claro lo que est√° en juego. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/35f/c76/c98/35fc76c98f2288b4c2c46a45a2f4145c.gif" alt="imagen"></p><br><p>  Esto se llama <em>infierno envuelto - infierno</em> envoltorio. </p><br><p>  Una aplicaci√≥n solo de HOC es normal en las realidades actuales, conectaron el componente a la tienda / tema / localizaci√≥n / corvej√≥n personalizado, creo que todos lo saben. </p><br><p>  Queda claro que la reacci√≥n necesita otro mecanismo primitivo para separar la l√≥gica. </p><br><p>  Usando ganchos, podemos extraer el estado de un componente para que pueda ser probado y reutilizado.  Los ganchos le permiten reutilizar la l√≥gica de estado sin cambiar la jerarqu√≠a de componentes.  Esto facilita el intercambio de enlaces entre muchos componentes o todo el sistema.  Adem√°s, los componentes de la clase parecen bastante aterradores, describimos los m√©todos del ciclo de vida de <code>componentDidMount</code> / <code>shouldComponentUpdate</code> / <code>componentDidUpdate</code> , el estado del componente, crea m√©todos para trabajar con el estado / lado, enlaza m√©todos para la instancia del componente, y as√≠ puede seguir y seguir.  Por lo general, dichos componentes van m√°s all√° de las l√≠neas x, donde x es lo suficientemente dif√≠cil de entender. </p><br><p>  Los ganchos le permiten hacer lo mismo al dividir la l√≥gica entre los componentes en peque√±as funciones y usarlos dentro de los componentes. </p><br><h3 id="klassy-slozhny-dlya-lyudey-i-dlya-mashin">  Las clases son dif√≠ciles para las personas y para los autom√≥viles. </h3><br><p>  Al observar las clases de Facebook son un gran obst√°culo al aprender React.  Debe comprender c√≥mo funciona <code>this</code> , y no funciona como en otros lenguajes de programaci√≥n, tambi√©n debe recordar acerca de los controladores de eventos vinculantes.  Sin oraciones de sintaxis estable, el c√≥digo se ve muy detallado.  Las personas entienden los patrones de estado / accesorios y el llamado flujo de datos de arriba hacia abajo, pero las clases son bastante dif√≠ciles de entender. </p><br><p>  Especialmente si no se limita a las plantillas, no hace mucho tiempo, los muchachos de la reacci√≥n experimentaron con el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dise√±o de componentes</a> con Prepack y vieron resultados prometedores, pero, sin embargo, los componentes de la clase le permiten crear malos patrones no deseados que hacen que estas optimizaciones desaparezcan, las clases tampoco migran muy bien cuando Las clases de recarga en caliente hacen que no sea confiable.  En primer lugar, los chicos quer√≠an proporcionar una API que admita todas las optimizaciones y funcione bien con un reinicio en caliente. </p><br><h3 id="glyanem-na-huki">  Echa un vistazo a los ganchos </h3><br><h4 id="state-hook">  Gancho de estado </h4><br><p>  El siguiente c√≥digo representa un p√°rrafo y un bot√≥n, y si hacemos clic en el bot√≥n, el valor en el p√°rrafo se incrementar√°. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Declare a new state variable, which we'll call "count" const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;p&gt;You clicked {count} times&lt;/p&gt; &lt;button onClick={() =&gt; setCount(count + 1)}&gt; Click me &lt;/button&gt; &lt;/div&gt; ); }</span></span></code> </pre> <br><p>  De esto podemos concluir que este gancho funciona de manera similar con un concepto como <code>state</code> . <br>  Un m√©todo <code>useState</code> un poco m√°s detallado toma un argumento, este es el valor predeterminado y devuelve una tupla en la que existe el valor en s√≠ y el m√©todo para cambiarlo, a diferencia de setState, setCount no <em>fusionar√°</em> valores, sino que simplemente lo actualizar√°.  Tambi√©n podemos usar m√∫ltiples declaraciones de estado, por ejemplo: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExampleWithManyStates</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Declare multiple state variables! const [age, setAge] = useState(42); const [fruit, setFruit] = useState('banana'); const [todos, setTodos] = useState([{ text: 'Learn Hooks' }]); // ... }</span></span></code> </pre> <br><p>  Por lo tanto, creamos varios estados a la vez y no necesitamos pensar en c√≥mo descomponerlos de alguna manera.  Por lo tanto, se puede distinguir que los ganchos son funciones que le permiten "conectarse" a los chips de los componentes de la clase, as√≠ como los ganchos no funcionan dentro de las clases, es importante recordar esto. </p><br><h4 id="effect-hook">  Gancho de efecto </h4><br><p>  A menudo, en los componentes de clase, hacemos funciones de efectos secundarios, por ejemplo, suscribirse a eventos o hacer solicitudes de datos, generalmente para esto usamos los m√©todos <code>componentDidMount</code> / <code>componentDidUpdate</code> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useState, useEffect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Similar to componentDidMount and componentDidUpdate: useEffect(() =&gt; { // Update the document title using the browser API document.title = `You clicked ${count} times`; }); return ( &lt;div&gt; &lt;p&gt;You clicked {count} times&lt;/p&gt; &lt;button onClick={() =&gt; setCount(count + 1)}&gt; Click me &lt;/button&gt; &lt;/div&gt; ); }</span></span></code> </pre> <br><p>  Cuando llamamos a <code>useEffect</code> le decimos a la reacci√≥n que haga un 'efecto secundario' despu√©s de actualizar los cambios en el √°rbol DOM.  Los efectos se declaran dentro del componente, por lo tanto, tienen acceso a accesorios / estado.  Adem√°s, podemos crearlos exactamente de la misma manera tanto como desee. </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FriendStatusWithCounter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [count, setCount] = useState(<span class="hljs-number"><span class="hljs-number">0</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.title = <span class="hljs-string"><span class="hljs-string">`You clicked </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${count}</span></span></span><span class="hljs-string"> times`</span></span>; }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [isOnline, setIsOnline] = useState(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange); }; }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleStatusChange</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">status</span></span></span><span class="hljs-function">) </span></span>{ setIsOnline(status.isOnline); } <span class="hljs-comment"><span class="hljs-comment">// ...</span></span></code> </pre> <br><p>  Inmediatamente vale la pena prestar atenci√≥n al segundo efecto secundario en √©l, devolvemos la funci√≥n, hacemos esto para realizar algunas acciones despu√©s de que el componente se desmonta, en la nueva API esto se llama efectos con limpieza.  Otros efectos pueden devolver cualquier cosa. </p><br><h3 id="pravila-hukov">  Reglas de gancho </h3><br><p>  Los ganchos son solo funciones de JavaScript, pero requieren solo dos reglas: </p><br><ul><li>  Los ganchos deben realizarse en la parte superior de la jerarqu√≠a de funciones (esto significa que no debe llamar a los ganchos en condiciones y bucles, de lo contrario, la reacci√≥n no puede garantizar el orden de ejecuci√≥n de los ganchos) </li><li>  Llame a los enganches solo en React funciones o componentes funcionales o enganche los enganches desde enganches personalizados (esto se encuentra a continuaci√≥n). <br>  Para seguir estas reglas, los muchachos del equipo de reacci√≥n crearon un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">complemento de linter</a> que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">arrojar√° un</a> error si llamas ganchos en los componentes de la clase o en bucles y condiciones. </li></ul><br><h3 id="kastomnye-huki">  Ganchos personalizados </h3><br><p>  Al mismo tiempo, queremos reutilizar la l√≥gica de los componentes con estado, por lo general se utilizan patrones HOC o de accesorios de renderizado, pero crean un volumen adicional de nuestra aplicaci√≥n. <br>  Por ejemplo, describimos la siguiente funci√≥n: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useState, useEffect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">useFriendStatus</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">friendID</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [isOnline, setIsOnline] = useState(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleStatusChange</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">status</span></span></span><span class="hljs-function">) </span></span>{ setIsOnline(status.isOnline); } useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange); }; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isOnline; }</code> </pre> <br><p>  Tenga en cuenta este c√≥digo, ser√° un enlace personalizado al que podremos llamar en varios componentes.  Por ejemplo, as√≠: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FriendStatus</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isOnline = useFriendStatus(props.friend.id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isOnline === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Loading...'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isOnline ? <span class="hljs-string"><span class="hljs-string">'Online'</span></span> : <span class="hljs-string"><span class="hljs-string">'Offline'</span></span>; }</code> </pre> <br><p>  mas o menos </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FriendListItem</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isOnline = useFriendStatus(props.friend.id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">color:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">isOnline</span></span></span></span><span class="xml"><span class="hljs-tag"> ? '</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">green</span></span></span></span><span class="xml"><span class="hljs-tag">' </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> '</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">black</span></span></span></span><span class="xml"><span class="hljs-tag">' }}&gt;</span></span></span><span class="xml"> {props.friend.name} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br><p>  En cualquier caso, reutilizamos el estado del componente, cada llamada a la funci√≥n <code>useFriendStatus</code> crea un estado aislado.  Tambi√©n vale la pena se√±alar que el comienzo de esta funci√≥n comienza con el <em>uso de</em> la palabra, lo que significa que es un gancho.  Le recomendamos que siga este formato.  Puede escribir ganchos personalizados para cualquier cosa, animaciones / suscripciones / temporizadores y mucho m√°s. </p><br><p>  Hay un par de ganchos m√°s. </p><br><h4 id="usecontext">  useContext </h4><br><p>  <code>useContext</code> permite usar el valor de retorno habitual en lugar de renderProps, el contexto que queremos recuperar y nos lo devolver√°, para que podamos deshacernos de todos los HOC que pasaron el contexto a los accesorios. </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> locale = useContext(LocaleContext); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> theme = useContext(ThemeContext); <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  Y ahora podemos usar el objeto de contexto en el valor de retorno. </p><br><h4 id="usecallback">  useCallback </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> memoizedCallback = useCallback( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { doSomething(a, b); }, [a, b], );</code> </pre> <br><p>  ¬øCon qu√© frecuencia tuvo que crear un componente de una clase solo para guardar una referencia a un m√©todo?  Esto ya no necesita hacerse, podemos usar useCallback y nuestros componentes no se volver√°n a dibujar porque ha llegado un nuevo enlace a onClick. </p><br><h4 id="usememo">  useMemo </h4><br><p>  Devolvemos el valor de memoria, el valor de memoria significa que se calcula solo cuando uno de los argumentos ha cambiado, la segunda vez no se calcular√° lo mismo. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> memoizedValue = useMemo(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> computeExpensiveValue(a, b), [a, b]);</code> </pre> <br><p>  S√≠, aqu√≠ debe duplicar los valores en la matriz para que el gancho comprenda que no han cambiado. </p><br><h4 id="useref">  useRef </h4><br><p>  <code>useRef</code> devuelve un valor mutado, donde el campo <code>.current</code> se inicializar√° con el primer argumento, el objeto existir√° mientras exista el componente. <br>  El ejemplo m√°s com√∫n cuando se enfoca en la entrada </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TextInputWithFocusButton</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> inputEl = useRef(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> onButtonClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// `current` points to the mounted text input element inputEl.current.focus(); }; return ( &lt;&gt; &lt;input ref={inputEl} type="text" /&gt; &lt;button onClick={onButtonClick}&gt;Focus the input&lt;/button&gt; &lt;/&gt; ); }</span></span></code> </pre> <br><h4 id="useimperativemethods">  useImperativeMethods </h4><br><p>  <code>useImperativeMethods</code> personaliza el valor de la instancia que se pasa del padre y usa ref directamente.  Como siempre, se deben evitar los enlaces directos y se debe utilizar <code>forwardRef</code> </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FancyInput</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props, ref</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> inputRef = useRef(); useImperativeMethods(ref, () =&gt; <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ focus: (</span></span></span><span class="hljs-function">) =&gt;</span></span> { inputRef.current.focus(); } })); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{inputRef}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">; } FancyInput = forwardRef(FancyInput);</span></span></code> </pre> <br><p>  En este ejemplo, el componente que <code>FancyInput</code> puede llamar a <code>fancyInputRef.current.focus()</code> . </p><br><h4 id="usemutationeffect">  useMutationEffect </h4><br><p>  <code>useMutationEffect</code> muy similar a <code>useEffect</code> excepto que comienza sincr√≥nicamente en la etapa en que la reacci√≥n cambia los valores DOM antes de que se actualicen los componentes vecinos, este enlace debe usarse para realizar mutaciones DOM. <br>  Es mejor preferir useEffect para evitar el bloqueo de los cambios visuales. </p><br><h4 id="uselayouteffect">  useLayoutEffect </h4><br><p>  <code>useLayoutEffect</code> es similar a <code>useEffect</code> excepto que se ejecuta sincr√≥nicamente <em>despu√©s de todas las actualizaciones DOM</em> y la representaci√≥n sincr√≥nica.  Las actualizaciones planificadas en <code>useLayoutEffect</code> se aplican sincr√≥nicamente antes de que el navegador pueda dibujar elementos.  Tambi√©n debe intentar usar el efecto de uso est√°ndar para no bloquear los cambios visuales. </p><br><h4 id="usereducer">  useReducer </h4><br><p>  <code>useReducer</code> es un gancho para crear un reductor que devuelve el estado y la capacidad de enviar cambios: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [state, dispatch] = useReducer(reducer, initialState);</code> </pre> <br><p>  Si comprende c√≥mo funciona Redux, entonces comprende c√≥mo funciona <code>useReducer</code> .  El mismo ejemplo que estaba con el contador anterior solo a trav√©s de <code>useReducer</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = {<span class="hljs-attr"><span class="hljs-attr">count</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'reset'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> initialState; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'increment'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">count</span></span>: state.count + <span class="hljs-number"><span class="hljs-number">1</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'decrement'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">count</span></span>: state.count - <span class="hljs-number"><span class="hljs-number">1</span></span>}; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{initialCount}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [state, dispatch] = useReducer(reducer, initialState); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;&gt; Count: {state.count} &lt;button onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> dispatch({<span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'reset'</span></span>})}&gt; Reset &lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt; &lt;button onClick={() =&gt; dispatch({type: 'increment'})}&gt;+&lt;/</span></span>button&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> dispatch({type: 'decrement'})}&gt;-</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/&gt; ); }</span></span></code> </pre> <br><p>  UseReducer tambi√©n toma 3 argumentos, esta es la <code>action</code> que debe ejecutarse cuando se inicializa el reductor: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = {<span class="hljs-attr"><span class="hljs-attr">count</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'reset'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">count</span></span>: action.payload}; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'increment'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">count</span></span>: state.count + <span class="hljs-number"><span class="hljs-number">1</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'decrement'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">count</span></span>: state.count - <span class="hljs-number"><span class="hljs-number">1</span></span>}; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{initialCount}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [state, dispatch] = useReducer( reducer, initialState, {<span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'reset'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: initialCount}, ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;&gt; Count: {state.count} &lt;button onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> dispatch({<span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'reset'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: initialCount})}&gt; Reset &lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt; &lt;button onClick={() =&gt; dispatch({type: 'increment'})}&gt;+&lt;/</span></span>button&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{()</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> dispatch({type: 'decrement'})}&gt;-</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/&gt; ); }</span></span></code> </pre> <br><p>  Tambi√©n podemos crear un contexto en este reductor y usarlo a trav√©s del gancho <code>useContext</code> usarlo en toda la aplicaci√≥n, esto queda para la tarea. </p><br><h4 id="podvodya-itog">  Para resumir </h4><br><p>  Los ganchos son un enfoque bastante poderoso para resolver el infierno envolvente y resolver varios problemas, pero todos pueden usarse con una definici√≥n de <em>transferencia</em> de <em>enlace</em> .  Ya ahora comienzan a aparecer colecciones de ganchos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">para su uso</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta colecci√≥n</a> .  Puede obtener m√°s informaci√≥n sobre ganchos en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428317/">https://habr.com/ru/post/es428317/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428305/index.html">Estudias ingles Comics al rescate</a></li>
<li><a href="../es428307/index.html">Java Challengers # 1: sobrecarga de m√©todos en la JVM</a></li>
<li><a href="../es428311/index.html">TrustZone: sistema operativo de confianza y sus aplicaciones</a></li>
<li><a href="../es428313/index.html">Telegram en MacOS [presumiblemente] tambi√©n almacena localmente la correspondencia en una forma accesible</a></li>
<li><a href="../es428315/index.html">5 temores de desarrolladores que hemos superado</a></li>
<li><a href="../es428321/index.html">An√°lisis predictivo de datos: modelado y validaci√≥n</a></li>
<li><a href="../es428327/index.html">A qu√© mirar: Reglamento Europeo de Identificaci√≥n Electr√≥nica eIDAS</a></li>
<li><a href="../es428329/index.html">Entrenamiento de refuerzo: an√°lisis de videojuegos</a></li>
<li><a href="../es428333/index.html">Resultados RAIF Hackathon AI 2018 Hackathon</a></li>
<li><a href="../es428335/index.html">Actualizaci√≥n de acceso directo de Siri</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>