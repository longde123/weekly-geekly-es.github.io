<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•• üë©üèº‚Äçüéì ‚ö™Ô∏è Hierarchische Schl√ºsselgenerierung üí∞ üéÇ üîñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel werden wir √ºber deterministische Geldb√∂rsen, die hierarchische Schl√ºsselgenerierung und deren mathematische Funktionsweise sprechen....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hierarchische Schl√ºsselgenerierung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/distributedlab/blog/413627/">  In diesem Artikel werden wir √ºber deterministische Geldb√∂rsen, die hierarchische Schl√ºsselgenerierung und deren mathematische Funktionsweise sprechen. In welchen F√§llen ist es praktisch, sie in die Praxis umzusetzen.  Dieses Material ist f√ºr Spezialisten n√ºtzlich, deren Aktivit√§ten sich auf Zahlungsgateways, Bitcoin-Geldb√∂rsen und andere M√ºnzgesch√§fte beziehen.  Dar√ºber hinaus ist das Material f√ºr diejenigen von Interesse, die sich f√ºr die Bereitstellung von elliptischen Kryptografien und Schl√ºsseln f√ºr die elektronische Signatur interessieren. <br><a name="habracut"></a><br><h2>  <b>Deterministische Brieftasche</b> </h2><br>  Definieren wir zun√§chst, was eine deterministische Geldb√∂rse ist.  Wenn wir √ºber die Schl√ºsselgenerierung sprechen, verwenden wir h√§ufig das Wort ‚ÄûBrieftasche‚Äú, da der Besitz eines privaten Schl√ºssels im Zusammenhang mit Kryptow√§hrungen ein Beweis f√ºr den Besitz von M√ºnzen ist und in diesem Fall Brieftasche und Schl√ºssel eine √§hnliche Bedeutung haben. <br><br>  Deterministic Wallet ist eine Brieftasche, in der alle verwendeten privaten Schl√ºssel aus einem Geheimnis generiert wurden, das von allen Schl√ºsseln gemeinsam genutzt wird.  Die Besonderheit ist, dass es aus einem Geheimnis m√∂glich ist, eine beliebige Anzahl von Schl√ºsselpaaren f√ºr die elektronische Signatur zu erzeugen.  Sie k√∂nnen f√ºr jede eingehende Zahlung und √Ñnderung neue Adressen verwenden. <br><br>  Praktischerweise k√∂nnen die Schl√ºssel einer solchen Brieftasche einfach auf ein anderes Ger√§t √ºbertragen, eine Sicherungskopie erstellt und dann wiederhergestellt werden, da Sie tats√§chlich nur ein Hauptgeheimnis reservieren m√ºssen.  Au√üerdem sind nicht alle aus dem Hauptgeheimnis generierten privaten Schl√ºssel miteinander verbunden.  Es ist unm√∂glich, die Verbindung zwischen den generierten Adressen zu verfolgen (um festzustellen, ob sie alle einem Benutzer geh√∂ren), und mit dem generierten privaten Schl√ºssel k√∂nnen Sie das gemeinsame Geheimnis nicht wiederherstellen. <br><br><h3>  Grundlegende geheime Kodierung </h3><br>  Lassen Sie uns nun √ºber die Kodierung des Hauptgeheimnisses sprechen.  Es gibt einen standardisierten Ansatz, der in BIP39 definiert wurde.  Dies ist die sogenannte Check Encoding-Codierung des Hauptgeheimnisses in eine mnemonische Phrase - eine Reihe von W√∂rtern, die leicht auf Papier zu schreiben sind und bei Bedarf zu merken sind.  Bei der Eingabe ist es m√∂glich, die Pr√ºfsumme zu √ºberpr√ºfen, dh gegebenenfalls einen Fehler mit einer ziemlich hohen Wahrscheinlichkeit zu identifizieren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00e/c02/e0f/00ec02e0fe0b361673229ecc9fa59e14.png" alt="Bild"><br><br>  Wie funktioniert es  In der Tat haben Sie das Hauptgeheimnis (Entropie) - die Daten, aus denen alle pers√∂nlichen Schl√ºssel der Brieftasche erweitert werden.  Dieses Geheimnis kann unterschiedlich lang sein.  Was die Pr√ºfsumme betrifft: F√ºr jeweils 32 Bits Entropie gibt es 1 Bit der Pr√ºfsumme, dh die Pr√ºfsumme wird nach der Formel als L√§nge der Entropie in Bits geteilt durch 32 berechnet. <br><br>  Die Entropie verkettet sich mit einer Pr√ºfsumme, die als doppelter SHA-256-Hash (SHA-2 mit einer L√§nge von 256 Bit) berechnet wird. Danach wird die erforderliche Anzahl von Bits abgeschnitten.  Verkettete Daten werden auf ein anderes Zahlensystem √ºbertragen: von bin√§r auf das Zahlensystem auf der Basis von 2048 (wie Sie sehen k√∂nnen, ist 2048 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>11</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>11</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-1"> 2 ^ {11} </script>  )  Wenn Sie die L√§nge der Entropiebits und die Pr√ºfsumme addieren, erhalten Sie ein Vielfaches von 11.  Somit erhalten wir die Anzahl der W√∂rter in der ausgegebenen Mnemonik. <br><br>  Tats√§chlich werden die Daten in 11-Bit-Teile "aufgeteilt".  Es gibt ein W√∂rterbuch mit 2048 W√∂rtern ( <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>11</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>11</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-2"> 2 ^ {11} </script>  ) f√ºr die bestimmte Anforderungen gelten.  Die Standardsprache des W√∂rterbuchs ist Englisch, aber jeder kann verwendet werden.  W√∂rter sollten eine bestimmte L√§nge nicht √ºberschreiten (normalerweise maximal 7 Zeichen).  Alle von ihnen m√ºssen in UTF-8 mit einer bestimmten Normalisierung aller Zeichen codiert sein.  Obligatorisch ist die Eindeutigkeit jedes Wortes in den ersten vier Zeichen. <br><br>  Die ersten vier Zeichen identifizieren das Wort im W√∂rterbuch eindeutig, und die verbleibenden Zeichen werden verwendet, um dieses Wort in einer bequemen Form zum Lesen, Speichern usw. zu vervollst√§ndigen. Somit erh√§lt jedes aus 11 Bits bestehende Datenelement eine eindeutige √úbereinstimmung in Form eines Wortes von W√∂rterbuch.  Wenn die Entropie Ihres Geheimnisses 256 Bit betr√§gt, betragen die Daten f√ºr die Codierung 264 Bit, und Ihre mnemonische Phrase enth√§lt 24 W√∂rter.  Dies ist der Hauptansatz zum Verschl√ºsseln von Brieftaschengeheimnissen in BIP39, der in der Praxis am h√§ufigsten verwendet wird. <br><br>  Um in Zukunft eine Sicherungskopie zu erstellen und diese zu verwenden, k√∂nnen Sie diesen Satz auf ein externes Medium schreiben.  Papier, das Sie an einem sicheren Ort aufbewahren, ist am besten geeignet.  So k√∂nnen Sie den vollst√§ndigen Zugriff auf alle Ihre Schl√ºssel wiederherstellen. <br><br><h3>  Arten von deterministischen Geldb√∂rsen </h3><br>  Es gibt zwei Arten von deterministischen Geldb√∂rsen.  Betrachten Sie ihre Hauptunterschiede. <br><br>  Der erste ist der einfachste.  Das Hauptgeheimnis hier ist mit dem Index des untergeordneten Schl√ºssels verkn√ºpft, den wir erhalten m√∂chten, wonach die verketteten Daten gehasht werden.  Meistens geschieht dies mit der SHA-256-Hash-Funktion. <br><br>  Der zweite Typ umfasst hierarchisch deterministische Wallets (HD Wallets), deren Prinzipien in BIP32 definiert sind und ein sehr verbreiteter Ansatz f√ºr die hierarchische Schl√ºsselgenerierung sind. <br><br><h3>  Determininistische Generation </h3><br>  Ber√ºcksichtigen Sie die Unterschiede zwischen diesen Brieftaschentypen im Diagramm. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/271/a5a/477/271a5a47790684700751178bcee9d340.png" alt="Bild"><br><br>  Eine gew√∂hnliche deterministische Geldb√∂rse hat einen Samen, aus dem eine gro√üe Anzahl privater Schl√ºssel direkt generiert wird.  Ihre Anzahl kann nur durch die Dimension des Index begrenzt werden, der vor dem Hashing mit dem Geheimnis verkn√ºpft wird.  Normalerweise sind es 4 Bytes, das hei√üt, der Platz m√∂glicher Optionen erm√∂glicht ungef√§hr 4 Milliarden eindeutige deterministische Brieftaschenschl√ºssel.  In der Praxis sollte dies f√ºr jede Situation ausreichen. <br><br><h3>  Hierarchische deterministische Erzeugung </h3><br>  Kommen wir zu einer hierarchischen deterministischen Brieftasche, deren zentrales Bereitstellungsschema bisher in vereinfachter Form dargestellt wurde.  Es gibt Seed, aus dem ein Paar Hauptschl√ºssel direkt erhalten wird.  Wenn wir in einer gew√∂hnlichen deterministischen Brieftasche einen privaten Schl√ºssel erhalten, erhalten wir hier ein Schl√ºsselpaar.  Dar√ºber hinaus gibt es Hierarchieebenen, auf denen wir jeweils den Index berechnen, um den untergeordneten Schl√ºssel zu generieren.  Wir k√∂nnen auch Zweigstellen mit √∂ffentlichem und privatem Schl√ºssel bauen. <br><br><h3>  Hierarchieebenen </h3><br>  In Bezug auf HD-Wallets ist zu beachten, dass ein Spawning-Knoten gem√§√ü den BIP32-Regeln auf jeder Hierarchieebene drei Objekte hat: einen privaten Schl√ºssel, einen √∂ffentlichen Schl√ºssel und einen Kettencode, mit dem die n√§chste Hierarchieebene erzeugt wird. <br><br><h3>  Hierarchisches Generierungsschema </h3><br>  Betrachten wir das Schl√ºsselgenerierungsschema f√ºr BIP32 genauer. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/685/e79/e3e/685e79e3eae45b867f3033aad03f1743.png" alt="Bild"><br><br>  Alles beginnt mit Seed, es wird auch Master Seed genannt, aus dem die Nullstufe der Hierarchie berechnet wird - ein Paar Hauptschl√ºssel und Kettencode. <br><br>  Aus einem Paar von Hauptschl√ºsseln kann eine gro√üe Anzahl von Schl√ºsselpaaren mit bestimmten Indizes generiert werden.  Es wird eine neue Hierarchieebene gebildet, mit der Konten generiert werden.  Angenommen, ein Benutzer hat einen Startwert und m√∂chte mehrere Adressen erstellen, die sich voneinander unterscheiden.  Die M√ºnzen dieser Adressen werden nicht gemischt, nicht zusammen ver√∂ffentlicht, und bei abgeschlossenen Transaktionen zwischen ihnen kann keine Verbindung gefunden werden.  Diese Schl√ºssel werden vollst√§ndig getrennt voneinander verwendet.  In einem der Konten wird die Schl√ºsselgruppe f√ºr das Arbeitsbudget verwendet, in dem anderen f√ºr das pers√∂nliche Budget und in einem anderen Konto f√ºr die schwarze Buchhaltung.  M√ºnzen vermischen sich nicht miteinander. <br><br>  Die n√§chste Hierarchieebene definiert verschiedene Schl√ºsselgenerierungsketten.  Am h√§ufigsten werden Ketten mit den Indizes 0 und 1 verwendet. Eine Kette mit Index 0 generiert endg√ºltige Schl√ºssel, um eine Adresse f√ºr eingehende Zahlungen zu bilden, und eine Kette mit Index 1 generiert Brieftaschen f√ºr M√ºnzen, die der Benutzer an sich selbst sendet, d. H. √Ñndern.  Dies ist erforderlich, damit die Brieftasche auf Programmebene von au√üen gesendete Zahlungen von der √Ñnderung unterscheidet, die √Ñnderungen im Saldo jeder Transaktion berechnet und eine visuelle Liste mit dem Verlauf aller Zahlungen erstellt.  Dies vereinfacht die Entwicklung der Brieftasche und deren Verwendung f√ºr allt√§gliche Zahlungen. <br><br><h3>  Hash-basierter Nachrichtenauthentifizierungscode </h3><br>  Kommen wir nun zur mathematischen Komponente hierarchischer Schl√ºsselgenerierungsprozesse.  Betrachten Sie zun√§chst den Hash-basierten Nachrichtenauthentifizierungscode.  Dies ist eine andere Klasse zur Berechnung von Hash-Funktionen.  Es unterscheidet sich darin, dass am Eingang zwei Werte und nicht einer verwendet werden.  Der erste Wert ist der private Schl√ºssel und der zweite ist die Nachricht selbst. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>H</mi><mi>M</mi><mi>A</mi><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>K</mi><mo>,</mo><mi>m</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>H</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><msup><mi>K</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>o</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>H</mi><mo stretchy=&quot;false&quot;>(</mo><msup><mi>K</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>m</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.281ex" height="3.021ex" viewBox="0 -987.6 19065.2 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-4D" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-41" x="1940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-43" x="2690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-28" x="3451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-4B" x="3840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-2C" x="4730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-6D" x="5175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-29" x="6053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-3D" x="6720" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-48" x="7777" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-28" x="8665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-28" x="9055" y="0"></use><g transform="translate(9444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-4B" x="0" y="0"></use><g transform="translate(901,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-6F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-70" x="485" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-61" x="989" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-64" x="1518" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-29" x="11890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-7C" x="12279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-7C" x="12558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-48" x="12836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-28" x="13725" y="0"></use><g transform="translate(14114,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-4B" x="0" y="0"></use><g transform="translate(901,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-70" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-61" x="849" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-64" x="1378" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-29" x="16461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-7C" x="16850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-7C" x="17129" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-6D" x="17407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-29" x="18286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-29" x="18675" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>H</mi><mi>M</mi><mi>A</mi><mi>C</mi><mo stretchy="false">(</mo><mi>K</mi><mo>,</mo><mi>m</mi><mo stretchy="false">)</mo><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msup><mi>K</mi><mrow class="MJX-TeXAtom-ORD"><mi>o</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>H</mi><mo stretchy="false">(</mo><msup><mi>K</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>p</mi><mi>a</mi><mi>d</mi></mrow></msup><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> HMAC (K, m) = H ((K ^ {opad}) || H (K ^ {ipad}) || m)) </script></p><br><br>  K ist der Schl√ºssel <br>  m - Nachricht <br>  opad, ipad - einige konstante Werte, die zum Generieren von Schl√ºsseln erforderlich sind, die sich in verschiedenen Phasen des Hashings voneinander unterscheiden. <br>  Als Hash-Funktion wird SHA-512 verwendet. <br><br>  Die Besonderheit ist, dass Sie zur Verwendung von HMAC einen geheimen Schl√ºssel besitzen m√ºssen, um den korrekten Hashwert der Nachricht zu erhalten. <br><br>  Um den HMAC-Hashwert zu berechnen, entspricht der Wert des XOR-Schl√ºssels dem konstanten Wert des ipad. Danach wird das Ergebnis gehasht.  Eine Nachricht wird mit diesem Wert verkettet, wonach der Schl√ºssel XOR mit einem konstanten Wert berechnet, mit einem Hashwert verkettet und dann erneut gehasht wird.  Als Ergebnis erhalten wir 512 Bits des Hashwerts. <br><br><h3>  Ableitungsfunktionen </h3><br>  Schauen wir uns einige Funktionen an, die bei der Berechnung hierarchischer Schl√ºssel verwendet werden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96e/f47/b41/96ef47b4141a2060395a9933dd56c52f.png" alt="Bild"><br><br>  Zun√§chst m√∂chten wir den Master-Seed in ein Master-Schl√ºsselpaar umwandeln.  Danach m√ºssen Sie den untergeordneten privaten Schl√ºssel und den untergeordneten √∂ffentlichen Schl√ºssel vom pers√∂nlichen √ºbergeordneten Schl√ºssel abrufen.  Im zweiten Fall wird genau die gleiche Funktion wie im ersten Fall verwendet, aber die Multiplikation der Zahl mit dem Basispunkt wird addiert, daher wird sie nicht separat betrachtet.  Der n√§chste Schritt besteht darin, die untergeordnete √ñffentlichkeit vom √∂ffentlichen √ºbergeordneten Schl√ºssel abzurufen.  Es ist anzumerken, dass es nicht m√∂glich ist, ein pers√∂nliches Kind vom √∂ffentlichen Schl√ºssel des Elternteils zu erhalten.  Diese Einschr√§nkung ist auf bestimmte Eigenschaften von HD-Geldb√∂rsen zur√ºckzuf√ºhren, die wir weiter betrachten werden. <br><br>  Lassen Sie uns also jede der Generierungsfunktionen separat durchgehen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/736/372/31c/73637231c62a14b4bf5f8e7a5d498d01.png" alt="Bild"><br><br>  Um den Hauptschl√ºssel von der Haupt-Sid zu erhalten, wird die HMAC-Funktion verwendet, bei der die konstante Zeichenfolge "Bitcoin Seed" als Schl√ºssel und die wichtigsten geheimen Daten selbst als Nachricht √ºbertragen werden.  Somit wird ein Hashwert von 512 Bits erhalten, den wir als zwei Teile betrachten: links und rechts.  Die linke Seite ist der private Hauptschl√ºssel und die rechte Seite ist der Kettencode.  Dar√ºber hinaus werden diese Werte verwendet, um nachfolgende Ebenen von untergeordneten Schl√ºsseln zu generieren. <br><br>  Um den Master √∂ffentlich zu machen, multiplizieren Sie einfach den Wert des Basispunkts mit dem Wert des privaten Masterschl√ºssels.  Wie Sie sehen k√∂nnen, geschieht dies in Analogie zu gew√∂hnlichen Tasten in einer Gruppe von Punkten auf einer elliptischen Kurve. <br><br>  Nun wollen wir sehen, wie der untergeordnete private Schl√ºssel vom √ºbergeordneten privaten stammt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a6f/eeb/022/a6feeb0227ea2d2ba18ed42ce4d47d01.png" alt="Bild"><br><br>  Wir werden die HMAC-Funktion wieder verwenden.  Als Schl√ºssel √ºbergeben wir den Kettencode der aktuellen Hierarchieebene und als Nachricht die Verkettung, wobei der erste Teil der pers√∂nliche √ºbergeordnete Schl√ºssel multipliziert mit dem Basispunkt ist.  In der Tat ist dies eine Besetzung zu einem Punkt und eine Serialisierung dieses Punktes.  Die Verkettung erfolgt mit dem Index des untergeordneten Schl√ºssels, den wir empfangen m√∂chten, serialisiert mit 32 Bit, dh 4 Byte. <br><br>  Basierend auf dem Ergebnis der HMAC-Funktion erhalten wir den Wert I und betrachten ihn erneut getrennt: Der linke und der rechte Teil der Ausgabewerte sind 256 Bit.  Dann der untergeordnete private Schl√ºssel <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.011ex" height="2.419ex" viewBox="0 -780.1 865.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-69" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-4"> k_i </script>  Wir berechnen durch Addition zum linken Ausgabewert <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mi>l</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.746ex" height="2.419ex" viewBox="0 -780.1 751.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-6C" x="622" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mi>l</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> I_l </script>  Werte des √ºbergeordneten privaten Schl√ºssels.  Die Addition erfolgt modulo n, wobei n die Reihenfolge des Basispunkts der elliptischen Kurve ist, um den Maximalwert des privaten Schl√ºssels nicht zu √ºberschreiten.  So haben wir einen untergeordneten privaten Schl√ºssel erhalten. <br><br>  Dementsprechend ist der untergeordnete Kettencode gleich dem richtigen Ausgabewert der HMAC-Funktion, d.h. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mi>R</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.503ex" height="2.419ex" viewBox="0 -780.1 1077.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-52" x="622" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mi>R</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> I_R </script>  .  Wenn wir den untergeordneten √∂ffentlichen Schl√ºssel aus dem pers√∂nlichen √ºbergeordneten Schl√ºssel ermitteln m√∂chten, multiplizieren wir den Wert <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>k</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.011ex" height="2.419ex" viewBox="0 -780.1 865.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-69" x="737" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> k_i </script>  durch den Wert des Basispunkts auf der elliptischen Kurve.  So bekommen wir den √∂ffentlichen Schl√ºssel <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.773ex" height="2.419ex" viewBox="0 -780.1 1193.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMATHI-69" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-8"> K_i </script>  . <br><br>  Wie berechnen wir den √∂ffentlichen Schl√ºssel des Kindes aus dem √∂ffentlichen Elternschl√ºssel? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/39a/bbe/e55/39abbee5560b44abbe7a271a88153198.png" alt="Bild"><br><br>  Hier wird die Berechnung etwas anders sein.  Wir √ºbergeben die Kettenhierarchie der aktuellen Hierarchieebene als Schl√ºssel an die HMAC-Funktion. Anschlie√üend serialisieren wir den √ºbergeordneten √∂ffentlichen Schl√ºssel und verketten ihn mit dem gew√ºnschten Index, der auf 32 Bit serialisiert ist.  Die Eingabedaten werden genauso wie im vorherigen Fall erhalten.  Um den √∂ffentlichen Schl√ºssel zu berechnen, nehmen wir die linke Seite des Ausgabewerts der HMAC-Funktion und betrachten ihn als 256 Bit modulo in der Reihenfolge des Basispunkts, bringen ihn zu einem Punkt auf der elliptischen Kurve, dh multiplizieren mit dem Basispunkt, und addieren das Ergebnis mit dem √ºbergeordneten √∂ffentlichen Schl√ºssel .  Das Ergebnis der Hinzuf√ºgung wird ebenfalls ein Punkt sein und es wird ein √∂ffentlicher untergeordneter Schl√ºssel sein.  Der Kettencode f√ºr diesen Schl√ºssel befindet sich auf der rechten Seite des Ausgabewerts der HMAC-Funktion. <br><br><h3>  √úbereinstimmende Schl√ºssel zueinander </h3><br>  Dies kann eine logische Frage aufwerfen, wie private und √∂ffentliche Schl√ºssel, die auf unterschiedliche Weise erhalten werden, einander entsprechen.  Ist es wirklich m√∂glich, aus einem √∂ffentlichen Schl√ºssel, der auf √∂ffentliche Weise generiert wurde, genau den gleichen Wert zu erhalten, indem ein auf andere Weise erhaltener privater Schl√ºssel mit einem Basispunkt multipliziert wird?  Dies ist leicht zu √ºberpr√ºfen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e44/ac2/851/e44ac28516cc2774373bc76d94d0c244.png" alt="Bild"><br><br>  Wenn wir uns daran erinnern, wie wir den pers√∂nlichen untergeordneten Schl√ºssel berechnet haben, und ihn mit dem Basispunkt multiplizieren, dh zur Punktfunktion f√ºhren, und dann die Berechnung des untergeordneten √∂ffentlichen Schl√ºssels aufrufen und diese Berechnungen vergleichen, werden wir feststellen, dass wir den √ºbergeordneten √∂ffentlichen Schl√ºssel als Produkt des pers√∂nlichen √ºbergeordneten Schl√ºssels betrachten Schl√ºssel zum Basispunkt, dann werden wir sehen, dass die gleichen Berechnungen nur in einer anderen Reihenfolge durchgef√ºhrt wurden. <br><br>  In einem Fall haben wir die privaten Schl√ºssel hinzugef√ºgt und mit dem Basispunkt multipliziert, und im zweiten Fall haben wir zuerst die Werte mit dem Basispunkt multipliziert und sie dann hinzugef√ºgt und das Ergebnis erhalten.  Basierend auf der Tatsache, dass das Hinzuf√ºgen von Punkten auf einer elliptischen Kurve additiv ist, k√∂nnen wir sagen, dass diese beiden Werte gleich sind - wir erhalten denselben √∂ffentlichen Schl√ºssel, der auf zwei Arten berechnet wird. <br><br><h3>  Beispiel f√ºr einen √∂ffentlichen Schl√ºssel </h3><br>  Aus Gr√ºnden des Interesses k√∂nnen wir uns ein Beispiel eines √∂ffentlichen Schl√ºssels ansehen, der f√ºr Testwerte und BIP32-Berechnungen erhalten wurde.  Wenn unsere Entropie aus 128 Bit bestand, sieht sie im Hexadezimalzahlensystem wie im Bild unten aus. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/64c/ca1/01a/64cca101a12268bda803fd8f447c719e.png" alt="Bild"><br><br>  Der gleiche Wert, der in der BIP39-Mnemonik codiert ist, sieht aus wie die 12 gezeigten W√∂rter.  Wenn Sie diese Mnemonik als Master-Seed f√ºr die hierarchische Schl√ºsselgenerierung verwenden, erhalten Sie einen solchen privaten Master-Schl√ºssel mit dem entsprechenden 256-Bit-Kettencode. <br><br><h3>  Erweiterte Schl√ºssel </h3><br>  Es gibt auch Konzepte wie den erweiterten √∂ffentlichen Schl√ºssel und den erweiterten privaten Schl√ºssel.  Wie wird es verwendet?  Zum besseren Verst√§ndnis beschreiben wir die visuelle Situation. <br><br>  Angenommen, wir haben einen bestimmten Benutzer und einen Dienst.  Ein Dienst √ºbertr√§gt Zahlungen, beispielsweise in Bitcoins, mit einer bestimmten H√§ufigkeit an einen Benutzer.  Sowohl der Benutzer als auch der Dienst sind daran interessiert, f√ºr jede Zahlung eine neue Adresse zu verwenden, um es einem externen Beobachter zu erschweren, eine Tatsache festzustellen und die Geschichte der Interaktion miteinander zu verwechseln. <br><br>  Im einfachsten Fall w√ºrde es so aussehen: Der Benutzer generiert f√ºr jede eingehende Zahlung ein neues Schl√ºsselpaar, berechnet die Adresse, die er an den Dienst √ºbergibt, wonach der Dienst eine Transaktion generieren und die Zahlung ausf√ºhren kann.  Dies ist jedoch f√ºr beide Parteien unpraktisch, wenn die Intensit√§t dieser Zahlungen hoch ist. <br><br><h3>  Erweiterter √∂ffentlicher Schl√ºssel </h3><br>  In einer √§hnlichen Situation hilft der erweiterte √∂ffentliche Schl√ºssel (xPubKey), die Unannehmlichkeiten zu beseitigen.  Der Benutzer kann einem Drittanbieter-Dienst erm√∂glichen, Adressen anstelle von sich selbst zu generieren, die dem Dienst bekannt sind, aber nur der Benutzer verf√ºgt √ºber private Schl√ºssel.  Der Dienst kann ohne Wissen des Benutzers eine beliebige Anzahl von Adressen generieren und Geld an diese senden, und der Benutzer kann nach Belieben private Schl√ºssel bereitstellen und Zugriff auf eine dieser Adressen erhalten. <br><br>  Wie funktioniert es  Der Benutzer muss ein neues Konto auf der zweiten Ebene der Schl√ºsselhierarchie erstellen und f√ºr ihn den √∂ffentlichen Schl√ºssel und den Kettencode f√ºr die aktuelle Ebene berechnen.  Danach m√ºssen Sie sowohl den √∂ffentlichen Schl√ºssel als auch den Kettencode an den Dienst √ºbertragen.  Der Einfachheit halber wurde die Base58Check-Codierung eingef√ºhrt, √ºber die wir gesprochen haben (hier gibt es eine spezielle Version).  Als n√§chstes werden der √∂ffentliche Schl√ºssel, der Kettencode und die Pr√ºfsumme verkettet.  Dies alles ist im Basisnummernsystem 58 codiert und wir erhalten einen √∂ffentlichen erweiterten Schl√ºssel, der bereits nach einem bestimmten Standard codiert ist.  Es beginnt mit den Zeichen ‚Äûxpub‚Äú, die leicht zu erkennen sind.  Es sieht aus wie im Bild gezeigt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c61/aae/082/c61aae082f6a423d35712fcf63246f68.png" alt="Bild"><br><br>  Ein Dienst kann einen solchen Schl√ºssel akzeptieren und √∂ffentliche Schl√ºssel f√ºr den Benutzer √ºber BIP32 bereitstellen, Adressen von ihm empfangen und daf√ºr bezahlen.  Es kann jedoch nur der Benutzer die entsprechenden privaten Schl√ºssel berechnen. <br><br><h3>  Geh√§rtete Ableitung </h3><br>  Bei der hierarchischen Generierung von Schl√ºsseln gibt es eine geh√§rtete Ableitung.  Dies ist ein Ansatz, der die Berechnung von untergeordneten √∂ffentlichen Schl√ºsseln aus dem entsprechenden √ºbergeordneten √∂ffentlichen Schl√ºssel nicht zul√§sst.  Dies unterscheidet sich von der normalen Generierung darin, dass wir darin die Verkettung des serialisierten Punkts als √ºbergeordneten √∂ffentlichen Schl√ºssel als Nachricht an die HMAC-Funktion verwenden und bei der geh√§rteten Ableitung die Serialisierung des √ºbergeordneten privaten Schl√ºssels verwenden. <br><br>  Au√üerdem ist die Indexberechnung anders.  Der Index bei der normalen Generierung wird direkt auf 32 Bit serialisiert und bei der geh√§rteten Ableitung leicht konvertiert: Es wird ein konstanter Wert hinzugef√ºgt <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>31</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-33"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>31</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-9"> 2 ^ {31} </script>  Dadurch wird das h√∂chstwertige Bit auf 1 gesetzt (es wird leicht, zwischen Ableitungstypen zu unterscheiden).  Dementsprechend ist der Raum der Varianten m√∂glicher Schl√ºssel sowohl f√ºr die normale Erzeugung als auch f√ºr die geh√§rtete Ableitung gleich und gleich <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>31</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.039ex" height="2.419ex" viewBox="0 -935.7 1308.3 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-33"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/distributedlab/blog/413627/&amp;usg=ALkJrhg-s5h7KUqTerTrzEu6xgiDAy0qRA#MJMAIN-31" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>31</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-10"> 2 ^ {31} </script>  . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cea/160/ab3/cea160ab30c57ea702407dd53893d25e.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit einem √ºbergeordneten √∂ffentlichen Schl√ºssel und einer geh√§rteten Ableitung ist es daher nicht m√∂glich, untergeordnete √∂ffentliche Schl√ºssel zu berechnen. </font><font style="vertical-align: inherit;">Wenn der Angreifer den √ºbergeordneten √∂ffentlichen Schl√ºssel erh√§lt, kann er die untergeordneten Schl√ºssel nicht berechnen. </font><font style="vertical-align: inherit;">Daher k√∂nnen die Adressen und ihre Beziehung zum empfangenen √ºbergeordneten Schl√ºssel nicht berechnet werden. </font><font style="vertical-align: inherit;">Im Falle einer normalen Ableitung, dh im √úblichen, kann eine solche Funktion verwendet werden und die Beziehung von Adressen untereinander verfolgen.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wege der Generation </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns dar√ºber sprechen, wie Schl√ºssel generiert werden k√∂nnen. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7d/0bc/006/c7d0bc0061acf64d206c73d305de73c4.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf jeder Hierarchieebene gibt es einen spezifischen Index, der Aspekte der Schl√ºsselgenerierung definiert. Der Pfad vom Hauptschl√ºssel zum endg√ºltigen Schl√ºssel kann durch Schr√§gstriche als Indizes geschrieben werden. Wenn es sich um einen privaten Schl√ºssel handelt, beginnt die Aufnahme mit einem kleinen ‚Äûm‚Äú, und wenn wir √ºber das Generieren eines √∂ffentlichen Schl√ºssels sprechen, dann mit einem gro√üen ‚ÄûM‚Äú. Wenn der Index durch ein Apostroph angezeigt wird, sollte verstanden werden, dass es sich um eine geh√§rtete Ableitung ohne Apostroph handelt - normale Ableitung. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betrachten Sie einen der g√§ngigen Schl√ºsselgenerierungspfade in BIP32, in denen hierarchische Schl√ºssel definiert wurden.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ab/564/b7c/1ab564b7cbe935bfbe5aa2075c1fce31.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird ein Pfad verwendet, in dem der Hauptschl√ºssel die Null-Ebene der Hierarchie ist. Im Folgenden sind die Kontenindizes aufgef√ºhrt, die denselben Benutzer bestimmen, gefolgt von Ketten, in denen Adressketten au√üerhalb ver√∂ffentlicht werden k√∂nnen, um eingehende Zahlungen zu akzeptieren. Mit Index 1 werden die Ketten erstellt, an die der Benutzer Zahlungen an sich selbst sendet (h√§ufiger) das alles ist Kapitulation). Der endg√ºltige Index wird verwendet, um die Schl√ºssel zu generieren, aus denen die Adressen berechnet werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um den allerersten Schl√ºssel mit Index 0 gem√§√ü dem BIP32-Standard zu berechnen, haben wir m, 0 mit der Erzeugung von geh√§rtet, Kette - 0, Index - 0 (m / 0 '/ 0/0). So erhalten wir den Pfad f√ºr den ersten hierarchisch generierten Schl√ºssel.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt einen Vorschlag zur Verbesserung von Bitcoin, der als BIP43 bezeichnet wird. Dabei wird die Verbesserungsnummer, die einen neuen Spawn-Pfad (m / bip_number '/ *) bietet, auf die erste Ebene der Hierarchie geschrieben. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/68c/652/61f/68c65261f576ac3e75c412c2de9b50b5.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So erschien BIP44, das das Merkmal des vorherigen Satzes verwendete, dh der Index 44 wurde f√ºr die erste Hierarchieebene geschrieben und schlug die folgenden Verbesserungen vor: Notieren Sie im Index der zweiten Hierarchieebene einen bestimmten Wert, der dem M√ºnztyp entspricht, den wir f√ºr diese Brieftasche verwenden. Jetzt k√∂nnen Schl√ºssel f√ºr verschiedene W√§hrungen in einer Brieftasche bereitgestellt und verwendet werden.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/23b/739/3bd/23b7393bd44abf5568d476c03d0a8bf8.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr Bitcoin sieht der Pfad wie folgt aus: "m / 44 '/ 0' / 0 '/ 0/0", f√ºr Bitcoin testnet - "m / 44' / 1 '/ 0' / 0/0", f√ºr Litecoin - "m / 44 '/ 2' / 0 '/ 0/0 ‚Äùf√ºr Dash -‚Äú m / 44' / 5 '/ 0' / 0/0 ‚Äù. Interessanterweise verwendet Ethereum genau die gleiche elliptische Kurve f√ºr die Berechnung der Schl√ºssel und die digitale Signatur. F√ºr die Brieftasche sieht der Pfad wie folgt aus: ‚Äûm / 44 '/ 60' / 0 '/ 0/0‚Äú. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt noch eine weitere Verbesserung - BIP45. Die Verbesserung zielt darauf ab, die Regeln zum Generieren von Schl√ºsseln f√ºr den Fall ihrer Verwendung in Multisignatur-Geldb√∂rsen und die Bildung von Adressen unter Verwendung von BIP16, d. H. P2SH, zu bestimmen. Es enth√§lt den BIP43-Satz und gibt den Index 45 auf der ersten Ebene der Hierarchie an, auf der zweiten Ebene der Hierarchie muss ein Unterzeichner (Mitunterzeichner) angegeben werden.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4bc/2c8/fd1/4bc2c8fd1c785ef5c9deb48417db9c53.png" alt="Bild"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispielsweise gibt es eine 3-aus-5-Mehrfachsignaturregel. Daher gibt es 5 Unterzeichner, aber um M√ºnzen auszugeben, ben√∂tigen Sie mindestens 3 Unterschriften. Somit verf√ºgt jeder der Unterzeichner √ºber eine HD-Brieftasche mit einem eigenen Master-Seed und gibt seine Seriennummer auf seinem Weg an. Sie kann als Index berechnet werden, wenn die auf der ersten Hierarchieebene jedes Benutzers generierten Schl√ºssel sortiert werden. Angenommen, auf der ersten Ebene generiert jeder Benutzer Schl√ºssel, tauscht sie miteinander aus, sortiert und findet heraus, wer welchen Index f√ºr die zweite Ebene der Hierarchie hat. Dies ist erforderlich, um die Notwendigkeit einer solchen Interaktion weiter zu beseitigen und sofort Adressen korrekt zu generieren und Ihre Seriennummer zu kennen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Das hei√üt, Sie k√∂nnen den erweiterten √∂ffentlichen Schl√ºssel einmal austauschen, um unabh√§ngig von anderen Mitgliedern der Gruppe Multisignaturadressen zu bilden und Zahlungen f√ºr diese zu akzeptieren. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fragen </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommen wir zu h√§ufig gestellten Fragen. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wie unterscheiden sich Mastersamen in verschiedenen M√ºnzen?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Seed ist eine zuf√§llig generierte Zahl, eine Folge von Bits oder eine Mnemonikphrase, die beispielsweise gem√§√ü BIP39 generiert wird und zum Generieren von Schl√ºsseln verwendet wird. Es kann sowohl f√ºr eine M√ºnze als auch f√ºr jede andere verwendet werden - es ist nicht erforderlich, unterschiedliche Mnemonikphrasen f√ºr unterschiedliche W√§hrungen zu verwenden. Dar√ºber hinaus gibt es BIP44, das die Regeln zum Generieren von Schl√ºsseln f√ºr verschiedene W√§hrungen aus derselben Mnemonik definiert. Diese privaten Schl√ºssel √ºberschneiden sich nicht, sondern werden f√ºr verschiedene Adressen verschiedener W√§hrungen verwendet. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- W√∂rterbuch aus BIP39, in dem 2048 W√∂rter f√ºr eine mnemonische Phrase standardisiert sind? Kann ich es in allen Geldb√∂rsen und Anwendungen verwenden?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tatsache ist, dass dieser Standard f√ºr BIP39 beschrieben ist. F√ºr BIP39 gibt es W√∂rterb√ºcher: Englisch, zwei Japanisch, Chinesisch, Italienisch, Russisch, Ukrainisch usw. Wenn also eine Anwendung behauptet, BIP39 zu verwenden und das Importieren und Exportieren einer Mnemonikphrase zu erm√∂glichen, bedeutet dies, dass auch eine Reihe von W√∂rtern verwendet wird das gleiche. Es gibt jedoch Brieftaschen, die nicht BIP39 verwenden, sondern ihre eigene Modifikation. Sie m√ºssen sich die Brieftaschenbeschreibung ansehen und entweder standardisierte oder Ihre eigene Entwicklung oder die Entwicklung des Dienstes verwenden, den die Brieftasche bietet. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Werden bei B√∂rsen und zentralisierten Speichern wie Coinbase die Brieftaschenschl√ºssel f√ºr alle Benutzer aus derselben gemeinsamen Phrase f√ºr alle generiert oder nicht?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist schwer zu sagen, da sie ihre interne Struktur nicht √∂ffnen, aber die neuen Dienste, die angezeigt werden, k√∂nnen entweder separat Schl√ºssel generieren oder den BIP32-Standard verwenden oder seine modifizierte Version verwenden. Die Dienste, die vor dem Erscheinen der Standards f√ºr die hierarchische Schl√ºsselgenerierung existierten, generieren h√∂chstwahrscheinlich weiterhin nur separate private Schl√ºssel. Vielleicht sind sie so einfacher zu verwalten, wenn alle Schl√ºssel einen gro√üen Umsatz haben. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ist der Schl√ºssel ein Punkt auf der elliptischen Kurve, dh zwei sehr gro√üe Zahlen X und Y?"</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der √∂ffentliche Schl√ºssel - ja, dies ist ein Punkt auf der elliptischen Kurve, und der private Schl√ºssel ist eine nat√ºrliche Zahl, die angibt, wie oft Sie den Basispunkt mit sich selbst hinzuf√ºgen m√ºssen. Der √∂ffentliche Schl√ºssel selbst besteht aus zwei Werten - dies sind die X- und Y-Koordinaten, von denen jeder eine Gr√∂√üe von 256 Bit hat. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Was ist "Cast to Point" und Serialisierung von Punkt und Index?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduktion auf einen Punkt bedeutet, dass es eine nat√ºrliche Zahl gibt, die wir als privaten Schl√ºssel betrachten. Wir addieren den Basispunkt so oft mit uns selbst, dh in der Gruppe der Punkte auf der elliptischen Kurve wird nur die Additionsoperation definiert, dann k√∂nnen wir den Punkt mit einer nat√ºrlichen Zahl multiplizieren. Die Serialisierung eines Punktes bedeutet, auf eine bestimmte Weise zwei Koordinaten aufzuzeichnen. Dies kann ein komprimierter Datensatz sein, ist jedoch nicht erforderlich. Komprimiert in dem Sinne, dass eine der Koordinaten, n√§mlich Y, in ein Vorzeichen umgewandelt wird, werden die Daten in die Gleichung eingesetzt und es wird untersucht, wo sich der Punkt befindet: oben oder unten. Bei der Indexserialisierung m√ºssen Sie verstehen, dass eine regul√§re Zahl, die je nach Gr√∂√üe in Bytes oder Bits geschrieben werden kann. Je gr√∂√üer die Anzahl, desto mehr Daten werden ben√∂tigt. Bei den von uns untersuchten Berechnungeneine Nummer einer bestimmten L√§nge ist erforderlich. Sie m√ºssen es auf eine bestimmte L√§nge serialisieren - 4 Bytes. Infolgedessen bezieht sich dies auf das Umwandeln des Index in eine 4-Byte-Zahl. Wenn die Senior-Werte dort leer bleiben, sind sie Null.</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wer hat diese Berechnungen f√ºr die Ableitungsfunktionen von HD-Geldb√∂rsen erstellt? Warum solche Formeln, in denen es Rechtfertigungen gibt und in denen Sie mehr dar√ºber lesen k√∂nnen?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie k√∂nnen mehr in BIP32 lesen, wenn Sie an einer Mnemonik interessiert sind, dann in BIP39 usw. Sie k√∂nnen GitHub √∂ffnen und einen Benutzer unter dem Spitznamen Bitcoin finden. Er verf√ºgt √ºber ein Bitcoin-Repository, in dem der Bitcoin-Quellcode gespeichert ist, und √ºber ein BIPs-Repository (prim√§re Quelle), in dem alle Vorschl√§ge zur Verbesserung von Bitcoin aufgezeichnet sind.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie kamen auf die Idee, Berechnungen auf diese Weise durchzuf√ºhren, da sie an eine Gruppe von Punkten einer elliptischen Kurve gebunden sind. Wenn Sie eine solche Funktionalit√§t erreichen m√∂chten, mit der Sie die Zweige √∂ffentlicher und privater Schl√ºssel getrennt berechnen und gleichzeitig ihre Korrespondenz untereinander aufrechterhalten k√∂nnen, war dies die einfachste Implementierungsoption. Tats√§chlich verwendeten die Entwickler die einfachste Option, mit der Sie mithilfe der im Laufe der Zeit getesteten Kryptografie interessante Eigenschaften erzielen k√∂nnen. Die Autoren der vorgeschlagenen Verbesserungen sind viele. Die Bitcoin-Community, deren Teilnehmer Verbesserungen und mathematische Transformationen entwickeln, ist ziemlich gro√ü. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Geh√§rtete Ableitung ist immer nur auf der zweiten Ebene der Hierarchie?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es h√§ngt alles von der Situation ab. Bei der Generierung von Schl√ºsseln f√ºr die Mehrfachsignatur ist es sinnvoll, eine geh√§rtete Ableitung nur auf der ersten Hierarchieebene durchzuf√ºhren. In BIP44 wird die geh√§rtete Ableitung auf die ersten drei Ebenen angewendet: Auf der ersten Ebene ist die Nummer des BIP selbst, auf der zweiten die Kontonummer, wo sie relevant ist, auf der dritten die W√§hrungsnummer, wo sie ebenfalls sinnvoll ist. Angenommen, es wird Ihnen wahrscheinlich nicht gefallen, wenn Sie den √∂ffentlichen Schl√ºssel ver√∂ffentlichen, und die Benutzer k√∂nnen alle Ihre Adressen in Bitcoin verfolgen. Wenn Sie ein Konto verwenden, um Zahlungen von bestimmten Diensten zu erhalten, k√∂nnen Sie diesen Schl√ºssel offenlegen, und Sie ben√∂tigen hier keine geh√§rtete Ableitung. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wo kann die hierarchische Schl√ºsselgenerierung angewendet werden?</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen es anwenden, wenn Sie mit der B√∂rse arbeiten, sodass die B√∂rse Sie immer an verschiedene Adressen bezahlt. </font><font style="vertical-align: inherit;">In diesem Fall ist es jedoch besser, dies alles manuell zu organisieren. </font><font style="vertical-align: inherit;">Dies ist f√ºr allt√§gliche digitale Geldb√∂rsen am relevantesten, da es hier sehr einfach ist, eine Sicherung privater Schl√ºssel zu erstellen und eine Geldb√∂rse wiederherzustellen. </font><font style="vertical-align: inherit;">Die Schl√ºsselgenerierung f√ºr verschiedene W√§hrungen wird ebenfalls unterst√ºtzt, und der Standard selbst wird bereits in verschiedenen Implementierungen digitaler Geldb√∂rsen verwendet. </font><font style="vertical-align: inherit;">Die Schl√ºssel zwischen diesen Brieftaschen lassen sich bequem mit derselben Mnemonik √ºbertragen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieses Thema wird in einer der Vorlesungen des Online-Blockchain-Kurses ‚Äû </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hierarchical Key Generation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äú behandelt.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413627/">https://habr.com/ru/post/de413627/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413615/index.html">Der VPNFilter-Virus, der 500.000 Router infizierte, erwies sich als noch gef√§hrlicher als angenommen</a></li>
<li><a href="../de413617/index.html">30% der Leistungsbeschreibung wurden ge√§ndert und der Plan wurde zweimal √ºbertroffen: Wie VTB die Berichterstellung automatisierte</a></li>
<li><a href="../de413619/index.html">Neue Informationen zu VPNFilter: Durch einen Angriff auf Benutzerger√§te wurde die Liste der Netzwerkger√§te erweitert</a></li>
<li><a href="../de413621/index.html">Lebe es. Stirb. Auferstehen. Wiederholen</a></li>
<li><a href="../de413623/index.html">Wie man Omega 2 oder die Legende von I2S spricht</a></li>
<li><a href="../de413631/index.html">Verschl√ºsselung von Zertifikatstoken auf einem Token unter Linux am Beispiel von JaCarta, Debian und dem Evolution-Mail-Client</a></li>
<li><a href="../de413633/index.html">Wie ich Englisch beherrschte</a></li>
<li><a href="../de413635/index.html">Wir entwerfen eine Viehfarm. Und nanoCAD VK verwenden?</a></li>
<li><a href="../de413637/index.html">Google hat 7 KI-Ethikprinzipien ver√∂ffentlicht</a></li>
<li><a href="../de413639/index.html">Gesch√ºtzte Smartphones: Wer braucht sie und wie unterscheiden sie sich voneinander?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>