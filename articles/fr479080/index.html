<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïô üö¥üèº üß£ Golden Gate: comment r√©pliquer des t√©raoctets par heure, ou exp√©rience en utilisant CDC sur GoldenGate √† VTB üîå ü•ä üçá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il existe de nombreuses fa√ßons d'analyser les donn√©es en temps r√©el. Chez VTB, nous utilisons la technologie Change Data Capture (CDC) impl√©ment√©e dan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Golden Gate: comment r√©pliquer des t√©raoctets par heure, ou exp√©rience en utilisant CDC sur GoldenGate √† VTB</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/479080/">  Il existe de nombreuses fa√ßons d'analyser les donn√©es en temps r√©el.  Chez VTB, nous utilisons la technologie Change Data Capture (CDC) impl√©ment√©e dans l'outil Golden Gate Oracle: la vitesse est tr√®s importante pour nous, mais nous aimerions r√©duire la quantit√© de donn√©es transmises et r√©duire la charge sur la source.  Et bien que la port√©e principale de cet outil soit la r√©plication √† partir d'Oracle et de MS SQL, au fil des ann√©es de travail avec CDC, nous avons accumul√© plusieurs cas int√©ressants, comme la migration de donn√©es entre plates-formes ou diff√©rents types de SGBD.  Sous la coupe, nous partagerons notre exp√©rience avec Golden Gate. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c74/d6e/8df/c74d6e8df3557ba888aa1ffa4b11ca82.jpg"><br><a name="habracut"></a><br><h2>  Pourquoi avons-nous eu besoin de CDC (Change Data Capture) </h2><br>  L'utilisation quotidienne des cartes bancaires est connue depuis longtemps et les gens ne pensent g√©n√©ralement pas que chaque utilisation d'un terminal de paiement est le transfert rapide de certaines informations √† la banque.  Les volumes de donn√©es augmentent, et je voudrais les traiter le plus rapidement possible, notamment pour envoyer des offres sp√©ciales en temps r√©el, car, comme on dit, une bonne cuill√®re pour le d√Æner.  Et les outils ETL traditionnels (extraire, transformer, charger - extraire, transformer, charger) ne sont pas si bons pour traiter les donn√©es √† la vol√©e.  Voici l'un des maillons faibles: lorsque des donn√©es sont extraites des tables syst√®me source, vous devez s√©lectionner uniquement de nouvelles lignes ou des lignes avec des modifications.  Cette approche charge en outre le syst√®me source et augmente la quantit√© de donn√©es transmises. <br><br>  CDC capture les modifications des journaux de base de donn√©es en temps r√©el.  La source est donc beaucoup moins charg√©e et la quantit√© de donn√©es transmises est r√©duite.  Avec cette technologie, nous avons r√©duit le besoin de ressources informatiques pour les syst√®mes avec un grand volume de changements transactionnels: apr√®s tout, pour la capture de donn√©es m√™me pour les syst√®mes bancaires les plus charg√©s, 1-2 c≈ìurs de processeur √† la source suffisent.  Et si nous introduisions l'ETL, nous devions acheter des capacit√©s de processeur afin de lire les donn√©es en parall√®le. <br><br>  Nous utilisons la technologie Oracle GoldenGate, l‚Äôoutil CDC d‚ÄôOracle, depuis plusieurs ann√©es chez VTB.  Avec son aide, nous remplissons l'entrep√¥t de donn√©es op√©rationnelles et distribuons les fonctions des syst√®mes d'information dans des zones ¬´chaudes¬ª et ¬´chaudes¬ª.  90% des applications OGG dans le paysage informatique de la banque chargent des donn√©es depuis Oracle et MS SQL, mais, √† l'exception de la r√©plication, elles s'adaptent parfaitement aux autres t√¢ches.  Regardons quelques exemples de notre pratique. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc3/a45/a08/dc3a45a08fe9febcd205c35970c65ed3.png"><br><br><h2>  Cas 1. Rapports en ligne </h2> <br>  Nous avons rencontr√© GoldenGate en 2013.  Ensuite, dans notre complexe de traitement des cartes, les transactions ont √©t√© trait√©es simultan√©ment et les rapports pr√©par√©s.  La charge OLTP a √©t√© m√©lang√©e √† la charge DWH / DSS et de gros √©chantillons lourds ont nettoy√© le cache de la m√©moire de la base de donn√©es.  En cons√©quence, les transactions rapides devaient aller sur le disque dur, la vitesse des services essentiels aux entreprises diminuait.  Afin de d√©charger le c≈ìur de traitement, nous avons pris toutes les proc√©dures et tous les rapports que nous avons d√©velopp√©s pour une r√©plique ¬´chaude¬ª sur Oracle Exadata. <br>  Comment reproduire des donn√©es √† l'aide de GoldenGate, nous avons d√©crit en d√©tail <a href="https://habr.com/ru/company/vtb/blog/415605/">ici</a> .  En bref: pour les syst√®mes tr√®s charg√©s o√π il y a m√©lange de diff√©rents types de charges, nous les distribuons √† diff√©rents serveurs OLTP et DWH / DSS, et pour la synchronisation entre eux, nous utilisons GoldenGate.  Ce mod√®le de mise en √©vidence d'une r√©plique ¬´chaude¬ª s'est av√©r√© utile dans de nombreux autres cas.  Par exemple, nous avons utilis√© la m√™me approche dans notre syst√®me anti-fraude - nous transf√©rons tous les rapports aux syst√®mes Oracle Exadata int√©gr√©s, nous leur reproduisons les donn√©es √† l'aide de GoldenGate. <br><br>  Il n'y a pas de syst√®mes sans d√©faillances.  Par exemple, si un d√©veloppeur modifie les donn√©es sur le r√©cepteur, une erreur d'utilisation des donn√©es peut se produire et les processus GoldenGate s'arr√™teront.  Pour exclure les donn√©es de la synchronisation, nous utilisons Oracle GoldenGate Veridata comme arbitre ind√©pendant.  Cet outil ne se contente pas de v√©rifier les donn√©es entre les sources et les r√©cepteurs - l'essentiel est que Veridata √©limine les diff√©rences.  Il est important que lorsque nous traitons la r√©plication, Veridata garantit une comparaison pr√©cise des donn√©es et la d√©tection des enregistrements perdus.  Nous obtenons un rapport complet avec les r√©sultats de la comparaison, qui peut √™tre pr√©sent√© √† des coll√®gues incr√©dules. <br><br><img src="https://habrastorage.org/webt/mq/kp/ti/mqkpticidasvi4be69qvoapsxam.jpeg"><br><br><h2>  Cas 2. Reporting et staging consolid√©s dans le stockage en ligne </h2><br>  Un cas distinct est associ√© √† la construction d'un stockage op√©rationnel.  La difficult√© r√©side dans le fait qu'en plus du reporting op√©rationnel, nous pr√©parons des donn√©es pour le stockage d'entreprise (staging).  Il arrive que vous ayez besoin de g√©n√©rer des rapports op√©rationnels bas√©s sur des donn√©es collect√©es √† partir d'un certain nombre de syst√®mes diff√©rents.  Et il est plus pratique de le faire au niveau du stockage en ligne.  Pour obtenir des donn√©es √† grande vitesse et avec une charge minimale sur les ressources, nous avons √† nouveau appliqu√© GoldenGate. <br><br>  √Ä titre de comparaison, expliquons comment nous avons trouv√© le delta de changements dans certains de nos syst√®mes auparavant.  Si le syst√®me lui-m√™me ne permettait pas au delta d'√™tre mis en surbrillance ou de modifier les donn√©es r√©troactivement, le tableau de la source de 10 To a √©t√© compar√© avec le tableau de 10 To sur le r√©cepteur de la veille.  Ces 10 To ont d√ª √™tre captur√©s d'abord √† la source, et la charge est tomb√©e non seulement sur le syst√®me source, le processeur, la m√©moire, mais aussi sur le r√©seau de donn√©es, ainsi que sur le syst√®me impliqu√© dans la comparaison.  Et tout cela pour retrouver le delta des nouvelles donn√©es √† 0,01%! <br><br>  GoldenGate ne cr√©e pratiquement aucune charge sur la source: CDC lit simplement les magazines et produit un delta fini.  Cela vous permet d'√©conomiser s√©rieusement sur l'infrastructure.  Peu importe qui est le destinataire - un r√©f√©rentiel traditionnel bas√© sur Oracle, MSSQL, Teradata ou simplement des produits Hadoop. <br><br>  Notez que dans ce cas, les bases de donn√©es Oracle ont √©t√© utilis√©es comme source et r√©cepteur.  La solution a prouv√© son efficacit√©, alors maintenant nous connectons tous les nouveaux syst√®mes √† un entrep√¥t de donn√©es en ligne commun, et maintenant ce n'est plus seulement Oracle.  Un autre avantage de GoldenGate est qu‚Äôil convient au t√©l√©chargement de donn√©es √† partir de la plupart des bases de donn√©es utilis√©es dans le paysage informatique de la banque. <br><br><img src="https://habrastorage.org/webt/58/h-/_e/58h-_ehvrydefghqdgjte9ehm8m.jpeg"><br><br><h2>  Cas 3. Offres personnelles aux clients en temps r√©el. </h2><br>  Nous avons d√©j√† mentionn√© l'analyse en streaming, c'est-√†-dire l'offre en temps r√©el (RTO) aux clients en temps r√©el.  Des camarades seniors disent que le succ√®s dans le secteur bancaire d√©pend directement de la fa√ßon dont vous connaissez votre client et de la pertinence de lui faire une offre.  En d'autres termes, la probabilit√© que le client profite de l'offre de la banque est inversement proportionnelle √† la rapidit√© de la r√©ponse de la banque aux besoins du client. <br><br>  Comment √ßa marche?  Par exemple, un historique des transactions montre qu'un client ach√®te dans un magasin d'alcools tous les vendredis.  Le g√©o-positionnement le d√©tecte dans un centre commercial, o√π il y a un magasin de ce r√©seau, et gr√¢ce √† une application mobile, nous lui envoyons une offre personnelle de r√©duction √† un magasin gastronomique dans le m√™me centre commercial.  Un tel cas est le plus int√©ressant pour la banque; il vous permet de cr√©er des co-marques et des offres conjointes.  Les clients peuvent √™tre des individus et des organisations. <br><br>  Il y a des parties hors ligne et en ligne.  Dans le premier, les clients sont pr√©-segment√©s √† l'aide des donn√©es de tous les syst√®mes.  Analystes et donn√©es Les scientifiques √©tudient le comportement, les donn√©es historiques et cr√©ent des soi-disant pi√®ges.  L'essentiel est d'attraper un √©v√©nement significatif qui peut √™tre suivi par une transaction acqu√©reur, une application mobile ou d'autres sources disponibles.  Et d√©j√† cet √©v√©nement est trait√© au moyen d'analyses en streaming, et la d√©cision est prise dans l'instant en fonction des pi√®ges pr√©par√©s. <br><br>  L'objectif de CDC GoldenGate est de fournir un flux de donn√©es d'√©v√©nements en temps r√©el des syst√®mes source vers la plate-forme analytique.  La licence GoldenGate pour Big Data inclut √©galement Oracle Stream Analytics.  Avec son aide, les scientifiques des donn√©es peuvent traiter ind√©pendamment le flux de donn√©es sur Spark Streaming, d√©veloppant l'application dans un environnement visuel. <br><br><h2>  Cas 4. Lutte op√©rationnelle contre de nouveaux types de fraude </h2><br>  Les syst√®mes anti-fraude sont assez ferm√©s, et √† juste titre: moins il y a de personnes d√©di√©es aux d√©tails, plus la s√©curit√© est √©lev√©e.  Ils font un excellent travail de gestion des cas standard, mais parfois des situations surviennent qui ne correspondent pas aux scripts standard.  Par cons√©quent, il est important de compl√©ter ces mod√®les avec des sc√©narios non standard.  Nous d√©veloppons constamment de nouveaux mod√®les bas√©s sur la corr√©lation des √©v√©nements de diff√©rents syst√®mes: transactions par carte et devise, localisation, op√©rations des syst√®mes de paiement, actions dans les applications mobiles, surveillance des r√©seaux sociaux.  Pour changer de mod√®le, vous devez suivre les processus accept√©s: demande m√©tier, d√©finition des t√¢ches, passage de l'application √† toutes les √©tapes internes de mise en ≈ìuvre. <br>  L'ann√©e derni√®re, nous avons test√© le t√©l√©chargement de donn√©es √† l'aide d'Oracle GoldenGate for Big Data √† partir des syst√®mes traditionnels les plus occup√©s, o√π il y avait beaucoup de petites transactions, et de notre syst√®me antifraude au cluster principal sur Oracle Big Data Appliance.  Hadoop et GoldenGate ont fait face √† la quantit√© de donn√©es transf√©r√©es - nous avons √©t√© quelque peu surpris. <br><br><h2>  T√©raoctets par heure et autres r√©sultats </h2><br>  Au cours des deux derni√®res ann√©es, avec GoldenGate, nous avons doubl√© le volume de journaux transf√©r√©s - jusqu'√† pr√®s de 1 To par heure.  Cela ferme presque nos besoins pour le moment.  Malheureusement, il y a de la physique que nous rencontrons.  Mais pour augmenter le d√©bit, un travail actif est en cours avec l'√©quipe de d√©veloppement GoldenGate, donc c'est loin d'√™tre la limite.  Dans le m√™me temps, nous surveillons et testons des solutions CDC d'autres fournisseurs, mais nous n'avons trouv√© aucune raison de migrer d'Oracle GoldenGate.  √Ä l'heure actuelle, cette technologie s'est r√©v√©l√©e √™tre la plus mature de celles du march√©. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr479080/">https://habr.com/ru/post/fr479080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr479068/index.html">Analyse des incidents dans les syst√®mes et r√©seaux informatiques</a></li>
<li><a href="../fr479070/index.html">Comment Nadia est devenue Nadezhda Mikhailovna</a></li>
<li><a href="../fr479072/index.html">Navigateur Firefox - 15e anniversaire: mont√©e, chute et renaissance en mettant l'accent sur la confidentialit√©</a></li>
<li><a href="../fr479074/index.html">L'√®re des serveurs ARM approche-t-elle?</a></li>
<li><a href="../fr479078/index.html">Cinq raisons pour lesquelles l'IA ne pourra pas remplacer les gens et ne fera que nous am√©liorer</a></li>
<li><a href="../fr479082/index.html">R√©ponses pratiques √† des questions non triviales ou Comment impl√©menter DevSecOps dans des organisations avec un paysage informatique complexe</a></li>
<li><a href="../fr479086/index.html">Habr Weekly # 30 / Upgrade of the year, IT salaires and where they go from IT, used MacBooks, multitool for pentester</a></li>
<li><a href="../fr479088/index.html">Comment se pr√©parer √† un entretien chez YCombinator</a></li>
<li><a href="../fr479092/index.html">Un r√©seau de neurones a appris √† reconna√Ætre la parole sur les l√®vres √† l'aide d'un algorithme de reconnaissance d'enregistrement vocal</a></li>
<li><a href="../fr479094/index.html">Vous recherchez un num√©ro de profil Instagram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>