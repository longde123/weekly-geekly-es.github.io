<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüöí üëà üëâ So erstellen Sie Windows-Programme in Arduino üêå üÜó ‚öìÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einmal hatte ich die verr√ºckte Idee, 500 Laserpointer an einen Ort zu bringen. Ich habe viel Zeit verbracht und es getan. Es stellte sich als spektaku...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So erstellen Sie Windows-Programme in Arduino</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472958/"><img src="https://habrastorage.org/webt/h0/18/5r/h0185rgz8yxisaplqy5xszepqz4.jpeg"><br><br>  Einmal hatte ich die verr√ºckte Idee, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">500 Laserpointer an einen Ort</a> zu bringen.  Ich habe viel Zeit verbracht und es getan.  Es stellte sich als spektakul√§r und nutzlos heraus, aber es hat mir gefallen.  Vor sechs Monaten kam mir eine andere verr√ºckte Idee.  Diesmal √ºberhaupt nicht spektakul√§r, aber viel n√ºtzlicher.  Ich habe auch viel Zeit damit verbracht.  Und in diesem Artikel pr√§sentiere ich eine Beta-Version meiner zweiten verr√ºckten Idee. <br><a name="habracut"></a><br>  Ich habe das Projekt Nanonyam (Nanonyam) angerufen und mir sogar ein Logo daf√ºr ausgedacht (ich habe 5 Minuten lang gemalt). <br><br><img src="https://habrastorage.org/webt/yv/nl/qq/yvnlqqsmhoywclwxrllblttqlg0.png"><br><br>  F√ºr diejenigen, die in Arduino denken, k√∂nnen wir sagen, dass Nanonyam ein virtuelles Arduino-Schutzschild f√ºr die Verwaltung von Windows ist. <br><br>  Mit anderen Worten, Nanonyam ist eine virtuelle Maschine, die Firmware f√ºr den AVR-Mikrocontroller als Bytecode verwendet (ATMEGA2560 empfohlen).  In dieser virtuellen Maschine befindet sich der AVR-Kernelsimulator. Anstelle von Peripherieger√§ten, die sich an SRAM-Adressen von 0x0060 bis 0x01FF befinden, gibt es jedoch eine spezielle Schnittstelle zu virtuellen Funktionen (einschlie√ülich der Windows-API-Funktionen).  Und hier ist es sehr wichtig, sofort zu verstehen: Der Code f√ºr Nanonyam sollte keinen Zugriff auf den angegebenen Speicherbereich haben, um beispielsweise nicht versehentlich die Funktion zum L√∂schen von Dateien oder zum Formatieren der Festplatte aufzurufen.  Der Rest des SRAM-Speicherbereichs von 0x0200 bis 0xFFFF (dies ist mehr als bei einem echten Mikrocontroller) steht dem Benutzer f√ºr jeden Zweck zur Verf√ºgung.  Ich stelle sofort fest, dass es einen besonderen Schutz gegen versehentliches Starten der Firmware eines realen Mikrocontrollers (oder einer Firmware aus einer anderen Architektur) gibt: Bevor Sie die "gef√§hrlichen" Funktionen aktivieren, m√ºssen Sie eine spezielle knifflige virtuelle Funktion aufrufen.  Es gibt einige andere Sicherheitsfunktionen. <br><br>  Um Programme f√ºr Nanonyam zu erstellen, m√ºssen Sie spezielle Bibliotheken verwenden, die alle derzeit verf√ºgbaren virtuellen Funktionen implementieren.  Sie k√∂nnen die virtuelle Nanonyam-Maschine und ihre Bibliotheken <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> herunterladen.  Und hier ist die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Seite zur Beschreibung virtueller Funktionen</a> .  Und ja, meine Website ist sehr primitiv und nicht f√ºr mobile Ger√§te geeignet. <br><br>  <b>Nanonyam ist kostenlos f√ºr den privaten und gewerblichen Gebrauch.</b>  <b>Nanonyam ist "wie es ist".</b>  <b>Quellcode nicht angegeben.</b> <br><br>  Derzeit befindet sich das Programm in der Testphase.  Es wurden ungef√§hr 200 virtuelle Funktionen implementiert, mit denen Sie einfache Programme f√ºr Windows erstellen k√∂nnen. <br>  Offensichtlich funktioniert das Erstellen von etwas Kompliziertem in einer solchen virtuellen Maschine nicht, da der Speicher f√ºr den Code nur 256 kB betr√§gt.  Daten k√∂nnen in separaten Dateien gespeichert werden, ein Puffer f√ºr den Grafikteil wird extern implementiert.  Alle Funktionen sind vereinfacht und an die 8-Bit-Architektur angepasst. <br><br>  Was kann man in Nanonyam tun?  Ich habe mir mehrere Aufgaben ausgedacht. <br><br><h4>  Entwicklung von Programmbl√∂cken </h4><br>  Einmal musste ich ein komplexes Men√º f√ºr ein 128x64-Punkt-Grafikdisplay entwickeln.  Ich wollte die Firmware wirklich nicht st√§ndig in einen echten Mikrocontroller herunterladen, um zu sehen, wie die Pixel aussehen.  So wurde die Idee von Nanonyam geboren.  In der folgenden Abbildung ist das Bild von der realen OLED-Anzeige eines der Elemente in diesem Men√º dargestellt.  Jetzt kann ich es ohne ein echtes Ger√§t ausarbeiten. <br><br><img src="https://habrastorage.org/webt/e3/-d/he/e3-dhe9tty9m3qpt1ysa1d9_qxq.jpeg"><br><br>  Nanonyam (in seiner endg√ºltigen Idee) ist ein gutes Werkzeug zum Ausarbeiten von Softwarebl√∂cken f√ºr Mikrocontroller, da es Funktionen zum Arbeiten mit Grafiken (Sie k√∂nnen Anzeigen und Anzeigen simulieren), mit Dateien (Sie k√∂nnen Protokolle erstellen, Testdaten lesen) und einer Tastatur (Sie k√∂nnen bis zu lesen) gibt 10 Tasten gleichzeitig), mit COM-Anschl√ºssen (hier ist ein separates Element). <br><br><h4>  Erstellen Sie schnelle Programme </h4><br>  Beispielsweise m√ºssen Sie schnell 100.500 Textdateien verarbeiten.  Jeder muss ge√∂ffnet, nach einem einfachen Algorithmus leicht ver√§ndert, gespeichert und geschlossen werden.  Wenn Sie ein Python-Meister sind, dann gratuliere ich Ihnen, Sie haben alles.  Aber wenn Sie ein eingefleischter Arduino-Arbeiter sind (und es gibt viele von ihnen), hilft Ihnen Nanonyam bei der L√∂sung dieses Problems.  Dies ist genau mein zweites Ziel in Nanonyam: viele n√ºtzliche Funktionen wie Textverarbeitung, das Erstellen von Screenshots oder das Simulieren von Tastenanschl√§gen im System (dies ist √ºbrigens bereits vorhanden) sowie viele andere Funktionen zum L√∂sen von Routineaufgaben hinzuzuf√ºgen. <br><br><h4>  Dr√ºsen √ºber COM-Port testen </h4><br>  Nanonyam kann als Terminal fungieren, das gem√§√ü Ihrem Algorithmus arbeitet.  Sie k√∂nnen ein kleines Men√º zeichnen, um das Ger√§t zu steuern und die vom Port empfangenen Daten anzuzeigen.  Sie k√∂nnen Daten aus Dateien zur Analyse speichern und lesen.  Ein praktisches Tool zum einfachen Debuggen und Kalibrieren von Dr√ºsen sowie zum Erstellen einfacher Bedienfelder f√ºr virtuelle Instrumente.  F√ºr Studenten und junge Wissenschaftler kann dieses Projekt sehr n√ºtzlich sein. <br><br><h4>  Programmiertraining </h4><br>  Wie beim gesamten Arduino-Projekt besteht der Hauptnutzen von Nanonyam jedoch in der Vereinfachung seiner Funktionen, seiner Schnittstelle und seines Bootloaders.  Daher sollte dieses Projekt f√ºr Anf√§nger und diejenigen, die mit dem Arduino-Niveau zufrieden sind, von Interesse sein.  √úbrigens habe ich selbst Arduino noch nicht im Detail studiert, da ich immer WinAVR oder AVR Studio verwendet habe, aber ich habe mit Assembler angefangen.  Daher ist das folgende Beispielprogramm etwas falsch, funktioniert aber recht gut. <br><br><h4>  Hallo Habr! </h4><br>  Es ist Zeit, einige der Funktionen von Nanonyam kennenzulernen und ein einfaches Programm zu schreiben.  Wir werden in Arduino schreiben, aber nicht so, wie es √ºblich ist, sondern so, wie ich es jetzt kann (ich habe bereits gesagt, dass ich mit dieser Umgebung nicht sehr gut umgegangen bin).  Erstellen Sie zun√§chst eine neue Skizze und w√§hlen Sie die Mega2560-Karte aus. <br><br><img src="https://habrastorage.org/webt/p8/oo/fd/p8oofdpzzycecncztkxkxtza7ku.jpeg"><br><br>  Speichern Sie die Skizze in einer Datei und kopieren Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Nanonyam-Bibliothek in der N√§he</a> .  Es w√§re richtig, die Bibliotheksheader einzuschlie√üen, aber ich wei√ü nicht, wie man die Zusammenstellung einzelner Dateien in Arduino schreibt. Schalten Sie daher die Bibliotheken vorerst direkt (und auf einmal) ein: <br><br><pre><code class="plaintext hljs">#include &lt;stdio.h&gt; #include "Nanonyam\nN_System_lib.c" #include "Nanonyam\nN_Keyboard_lib.c" #include "Nanonyam\nN_File_lib.c" #include "Nanonyam\nN_Math_lib.c" #include "Nanonyam\nN_Text_lib.c" #include "Nanonyam\nN_Graphics_lib.c" #include "Nanonyam\nN_RS232_lib.c"</code> </pre> <br>  Noch richtiger w√§re es, ein spezielles Modul ‚ÄûNanonyam for Arduino‚Äú zu erstellen, das direkt von Arduino aus installiert werden kann.  Sobald ich damit fertig bin, werde ich es tun, aber im Moment werde ich nur die Essenz der Arbeit mit einer virtuellen Maschine zeigen.  Wir schreiben den folgenden Code: <br><br><pre> <code class="plaintext hljs">//       void setup() { sys_Nanonyam();//    g_SetScreenSize(400,200);//   400200  sys_WindowSetText("Example");//  g_ConfigExternalFont(0,60,1,0,0,0,"Arial");//  Windows    0 g_SetExternalFont(0);//   0    g_SetBackRGB(0,0,255);//   g_SetTextRGB(255,255,0);//   g_ClearAll();//  (  ) g_DrawTextCenterX(0,400,70,"Hello, Habr!");//  g_Update();//     } //    void loop() { sys_Delay(100);//    }</code> </pre> <br>  Eine Skizze mit diesem Programm <a href="">kann hier heruntergeladen werden</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Suchen Sie nach einer</a> detaillierten Beschreibung der Funktionen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf der Website</a> .  Ich hoffe, die Kommentare in diesem Code reichen aus, um den Punkt zu verstehen.  Hier spielt die Funktion <b>sys_Nanonyam ()</b> die Rolle eines ‚ÄûKennworts‚Äú f√ºr die virtuelle Maschine, wodurch Einschr√§nkungen f√ºr virtuelle Funktionen <b>aufgehoben werden</b> .  Ohne diese Funktion wird das Programm nach 3 Sekunden geschlossen. <br><br>  Klicken Sie auf die Schaltfl√§che "√úberpr√ºfen" und es sollten keine Fehler auftreten. <br><br><img src="https://habrastorage.org/webt/oe/yj/ui/oeyjui5vz5oxhuss5oanfav0_me.jpeg"><br><br>  Jetzt m√ºssen Sie die Bin√§rdatei (Firmware) erhalten.  W√§hlen Sie das Men√º " <i>Skizze &gt;&gt; Bin√§rdatei exportieren (STRG + ALT + S)</i> ". <br><br><img src="https://habrastorage.org/webt/11/ny/wi/11nywi0-b49tetx7vnwrjkd3fvu.jpeg"><br><br>  In diesem Fall werden zwei HEX-Dateien in den Ordner mit der Skizze kopiert.  <b>Wir nehmen nur die Datei ohne das Pr√§fix "with_bootloader.mega".</b> <br><br>  Es gibt verschiedene M√∂glichkeiten, eine HEX-Datei f√ºr eine virtuelle Nanonyam-Maschine anzugeben, die alle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf dieser Seite beschrieben werden</a> .  Ich schlage vor, die Datei <i>Nanonyam.path</i> neben der Datei <i>Nanonyam.exe zu</i> erstellen, in die der vollst√§ndige Pfad zu unserer HEX-Datei geschrieben werden soll.  Dann k√∂nnen Sie <i>Nanonyam.exe ausf√ºhren</i> .  Wir bekommen ein Fenster mit unserer Inschrift. <br><br><img src="https://habrastorage.org/webt/xn/6z/m5/xn6zm55x-pcyccyim_vfljxl40w.jpeg"><br><br>  Ebenso k√∂nnen Sie Programme in anderen Umgebungen erstellen, z. B. in AVR Studio oder WinAVR. <br><br>  Hier beenden wir die Bekanntschaft mit Nanonyam.  Die Grundidee sollte klar sein.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Weitere Beispiele finden Sie auf der Website</a> .  Wenn es gen√ºgend Leute gibt, die dieses Projekt verwenden m√∂chten, werde ich weitere Beispiele anf√ºhren und weiterhin die Bibliotheken virtueller Funktionen ‚Äûausf√ºllen‚Äú.  Konkrete Ideen f√ºr die Entwicklung des Projekts und Berichte √ºber Fehlfunktionen, Fehler und Irrt√ºmer werden akzeptiert.  Es ist ratsam, sie an die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf der Website aufgef√ºhrten</a> Kontakte zu senden.  Eine Diskussion ist in den Kommentaren willkommen. <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit und gute Programmierung! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472958/">https://habr.com/ru/post/de472958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472940/index.html">√úber Betr√ºger und Menschen</a></li>
<li><a href="../de472944/index.html">Data as a Service: Was ist das, technische Schwierigkeiten und wie k√∂nnen Sie diese mithilfe von residenten Proxys umgehen?</a></li>
<li><a href="../de472946/index.html">Ein guter Entwickler ist weise, nicht brillant</a></li>
<li><a href="../de472950/index.html">10 M√∂glichkeiten zum Schutz des geistigen Eigentums eines IT-Startups</a></li>
<li><a href="../de472956/index.html">Die Geschichte des Baus eines Raupenroboters</a></li>
<li><a href="../de472960/index.html">Sonys bestes Preis-Leistungs-Verh√§ltnis</a></li>
<li><a href="../de472962/index.html">Videobeitrag: Experimente als Form der wissenschaftlichen Visualisierung</a></li>
<li><a href="../de472964/index.html">Situation: Immer mehr Open Source-Unternehmen √§ndern Lizenzen - wir diskutieren Expertenmeinungen</a></li>
<li><a href="../de472966/index.html">Wie das Zip-Archiv aussieht und was wir damit machen k√∂nnen. Teil 2 - Datenbeschreibung und Komprimierung</a></li>
<li><a href="../de472970/index.html">Kritik am Telegrammprotokoll und organisatorischen Ans√§tzen. Teil 1, technisch: Die Erfahrung, einen Kunden von Grund auf neu zu schreiben - TL, MT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>