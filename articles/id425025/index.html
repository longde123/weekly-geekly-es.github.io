<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌🏿 👅 🗺️ Golang menguji di luar jangkauan kita 🚯 👨🏽‍⚖️ 🐔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tidak ada yang suka menulis tes. Tentu saja aku bercanda, semua orang suka menulisnya! Seperti yang akan disampaikan oleh pemimpin tim dan SDM, jawaba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Golang menguji di luar jangkauan kita</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425025/"><img src="https://habrastorage.org/webt/tw/qz/de/twqzdegyxjgeh3sevf4dsdrtk_s.jpeg"><br><br>  Tidak ada yang suka menulis tes.  Tentu saja aku bercanda, semua orang suka menulisnya!  Seperti yang akan disampaikan oleh pemimpin tim dan SDM, jawaban yang tepat dalam wawancara adalah bahwa saya benar-benar menyukai dan menulis ujian.  Tapi tiba-tiba Anda suka menulis tes dalam bahasa lain.  Bagaimana Anda mulai menulis kode go yang tercakup dalam tes? <br><a name="habracut"></a><br><h3>  Bagian 1. Menguji pawang </h3><br>  Di luar kotak ada dukungan untuk server http di "net / http", sehingga Anda dapat mengangkatnya tanpa usaha.  Peluang yang terbuka memungkinkan kita untuk merasa sangat kuat, dan karena itu kode kita akan mengembalikan pengguna ke-42. <br><br><pre><code class="hljs pgsql">func userHandler(w http.ResponseWriter, r *http.Request) { var <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> userId, err := strconv.Atoi(r.URL.Query().<span class="hljs-keyword"><span class="hljs-keyword">Get</span></span>("id")) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != nil { w.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>([]byte( "Error")) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> userId == <span class="hljs-number"><span class="hljs-number">42</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>{userId, "Jack", <span class="hljs-number"><span class="hljs-number">2</span></span>} } jsonData, _ := <span class="hljs-type"><span class="hljs-type">json</span></span>.Marshal(<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>) w.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>(jsonData) } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> struct { Id <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> string Rating uint }</code> </pre> <br>  Kode ini menerima parameter id pengguna sebagai input, kemudian mengemulasi keberadaan pengguna dalam database, dan kembali.  Sekarang kita perlu mengujinya ... <br><br>  Ada hal yang luar biasa “net / http / httptest”, memungkinkan Anda untuk mensimulasikan panggilan ke handler'a kami dan kemudian membandingkan jawabannya. <br><br><pre> <code class="hljs pgsql">r := httptest.NewRequest("GET", "http://127.0.0.1:80/user?id=42", nil) w := httptest.NewRecorder() userHandler(w, r) <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> := <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>{} <span class="hljs-type"><span class="hljs-type">json</span></span>.Unmarshal(w.Body.Bytes(), &amp;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.Id != <span class="hljs-number"><span class="hljs-number">42</span></span> { t.Errorf("Invalid user id %d expected %d", <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.Id, <span class="hljs-number"><span class="hljs-number">42</span></span>) }</code> </pre> <br><h3>  Bagian 2. Sayang, kami memiliki API eksternal di sini </h3><br>  Dan mengapa kita perlu mengambil napas, jika kita baru saja melakukan pemanasan?  Di dalam layanan kami, cepat atau lambat, api eksternal akan muncul.  Ini adalah binatang aneh yang sering bersembunyi yang dapat berperilaku seperti yang diinginkan.  Untuk tes, kami ingin kolega yang lebih akomodatif.  Dan httptest kami yang baru ditemukan juga akan membantu kami di sini.  Sebagai contoh, kode panggilan adalah api eksternal dengan transfer data lebih lanjut. <br><br><pre> <code class="hljs go"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApiCaller</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(user *User, url </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span> { resp, err := http.Get(url) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err } <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> resp.Body.Close() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> updateUser(user, resp.Body) }</code> </pre> <br>  Untuk mengalahkan ini, kita dapat membuat tiruan API eksternal, opsi paling sederhana adalah: <br><br><pre> <code class="hljs pgsql"> ts := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) { w.<span class="hljs-keyword"><span class="hljs-keyword">Header</span></span>().<span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>("Content-Type", "application/json; charset=utf-8") w.<span class="hljs-keyword"><span class="hljs-keyword">Header</span></span>().<span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>("Access-Control-Allow-Origin", "*") fmt.Fprintln(w, `{ "result": "ok", "data": { "user_id": <span class="hljs-number"><span class="hljs-number">1</span></span>, "rating": <span class="hljs-number"><span class="hljs-number">42</span></span> } }`) })) defer ts.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> := <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>{id: <span class="hljs-number"><span class="hljs-number">1</span></span>} err := ApiCaller(&amp;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, ts.URL)</code> </pre> <br>  <b>ts.URL</b> akan berisi string format `http: //127.0.0.1: 49799`, yang akan menjadi api tiruan yang menyebut implementasi kami <br><br><h3>  Bagian 3. Mari kita bekerja dengan pangkalan </h3><br>  Ada cara sederhana: untuk menaikkan buruh pelabuhan dengan pangkalan, roll migrasi, perlengkapan dan menjalankan layanan terbaik kami.  Tetapi mari kita coba menulis tes dengan ketergantungan minimum dengan layanan eksternal. <br><br>  Implementasi bekerja dengan base in go memungkinkan Anda untuk mengganti driver itu sendiri, dan, melewati 100 halaman kode dan refleksi, saya sarankan Anda mengambil perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/DATA-DOG/go-sqlmock</a> <br>  Anda dapat menangani sql.Db di dok.  Mari kita ambil contoh yang sedikit lebih menarik, di mana akan ada orm for - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gorm</a> . <br><br><pre> <code class="hljs pgsql">func DbListener(db *gorm.DB) { <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> := <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>{} <span class="hljs-keyword"><span class="hljs-keyword">transaction</span></span> := db.<span class="hljs-keyword"><span class="hljs-keyword">Begin</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">transaction</span></span>.First(&amp;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">transaction</span></span>.Model(&amp;<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>).<span class="hljs-keyword"><span class="hljs-keyword">Update</span></span>("counter", <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.Counter+<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">transaction</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Commit</span></span>() }</code> </pre> <br>  Saya harap contoh ini setidaknya membuat Anda berpikir bagaimana cara mengujinya.  Dalam "mock.ExpectExec" Anda bisa mengganti ekspresi reguler yang mencakup case yang Anda butuhkan.  Satu-satunya hal yang perlu diingat adalah bahwa urutan penetapan harapan harus sesuai dengan urutan dan jumlah panggilan. <br><br><pre> <code class="hljs go"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestDbListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { db, mock, _ := sqlmock.New() <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> db.Close() mock.ExpectBegin() result := []<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>{<span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">"counter"</span></span>} mock.ExpectQuery(<span class="hljs-string"><span class="hljs-string">"SELECT \\* FROM `Users`"</span></span>).WillReturnRows(sqlmock.NewRows(result).AddRow(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"Jack"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) mock.ExpectExec(<span class="hljs-string"><span class="hljs-string">"UPDATE `Users`"</span></span>).WithArgs(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).WillReturnResult(sqlmock.NewResult(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) mock.ExpectCommit() gormDB, _ := gorm.Open(<span class="hljs-string"><span class="hljs-string">"mysql"</span></span>, db) DbListener(gormDB.LogMode(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err := mock.ExpectationsWereMet(); err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { t.Errorf(<span class="hljs-string"><span class="hljs-string">"there were unfulfilled expectations: %s"</span></span>, err) } }</code> </pre> <br>  Saya menemukan banyak contoh untuk menguji pangkalan di <a href="">sini</a> . <br><br><h3>  Bagian 4. Bekerja dengan sistem file </h3><br>  Kami mencoba tangan kami di daerah yang berbeda dan berdamai bahwa semuanya baik untuk basah.  Semuanya tidak begitu jelas di sini.  Saya menyarankan dua pendekatan, basah atau gunakan sistem file. <br><br>  Opsi 1 - kita semua basah di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/spf13/afero</a> <br><br>  <b>Pro</b> : <br><ul><li>  Anda tidak perlu mengulang apa pun jika Anda sudah menggunakan perpustakaan ini.  (tapi kemudian kamu bosan membaca itu) </li><li>  Bekerja dengan sistem file virtual, yang akan sangat mempercepat tes Anda. </li></ul><br><br>  <b>Cons</b> : <br><ul><li>  Diperlukan modifikasi kode yang ada. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chmod tidak berfungsi pada</a> sistem file virtual.  Tapi itu bisa menjadi fitur sejak itu  dokumentasi menyatakan "Hindari masalah keamanan dan izin". </li></ul><br>  Dari beberapa poin ini, saya langsung melakukan 2 tes.  Dalam versi dengan sistem file, saya membuat file yang tidak dapat dibaca dan memeriksa cara kerja sistem. <br><br><pre> <code class="hljs lua">func FileRead(<span class="hljs-built_in"><span class="hljs-built_in">path</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">error</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = strings.TrimRight(<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>) + <span class="hljs-string"><span class="hljs-string">"/"</span></span> //     files, err := ioutil.ReadDir(<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"cannot read from file, %v"</span></span>, err) } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, f := range files { deleteFileName := <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> + f.Name() _, err := ioutil.ReadFile(deleteFileName) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err } err = <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.Remove(deleteFileName) //     } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Menggunakan afero.Fs membutuhkan modifikasi minimal, tetapi pada dasarnya tidak ada perubahan dalam kode <br><br><pre> <code class="hljs lua">func FileReadAlt(<span class="hljs-built_in"><span class="hljs-built_in">path</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, fs afero.Fs) <span class="hljs-built_in"><span class="hljs-built_in">error</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = strings.TrimRight(<span class="hljs-built_in"><span class="hljs-built_in">path</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>) + <span class="hljs-string"><span class="hljs-string">"/"</span></span> //     files, err := afero.ReadDir(fs, <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Errorf(<span class="hljs-string"><span class="hljs-string">"cannot read from file, %v"</span></span>, err) } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, f := range files { deleteFileName := <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> + f.Name() _, err := afero.ReadFile(fs, deleteFileName) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> err } err = fs.Remove(deleteFileName) //     } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Tapi kesenangan kita tidak akan lengkap kecuali kita mengetahui seberapa cepat afero daripada asli. <br>  Menit benchmark: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">BenchmarkIoutil</span></span> <span class="hljs-number"><span class="hljs-number">5000</span></span> <span class="hljs-number"><span class="hljs-number">242504</span></span> ns/op <span class="hljs-number"><span class="hljs-number">7548</span></span> B/op <span class="hljs-number"><span class="hljs-number">27</span></span> allocs/op BenchmarkAferoOs <span class="hljs-number"><span class="hljs-number">300000</span></span> <span class="hljs-number"><span class="hljs-number">4259</span></span> ns/op <span class="hljs-number"><span class="hljs-number">2144</span></span> B/op <span class="hljs-number"><span class="hljs-number">30</span></span> allocs/op BenchmarkAferoMem <span class="hljs-number"><span class="hljs-number">300000</span></span> <span class="hljs-number"><span class="hljs-number">4169</span></span> ns/op <span class="hljs-number"><span class="hljs-number">2144</span></span> B/op <span class="hljs-number"><span class="hljs-number">30</span></span> allocs/op</code> </pre> <br>  Jadi, pustaka adalah urutan besarnya di atas standar, tetapi menggunakan sistem file virtual atau yang asli adalah atas kebijakan Anda. <br><br>  Saya merekomendasikan: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">haisum.github.io/2017/09/11/golang-ioutil-readall</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">matthias-endler.de/2018/go-io-testing</a> <br><br><h4>  Kata penutup </h4><br>  Jujur saya sangat suka cakupan 100%, tetapi kode non-perpustakaan tidak membutuhkannya.  Dan bahkan itu tidak menjamin perlindungan terhadap kesalahan.  Fokus pada persyaratan bisnis, bukan kemampuan fungsi untuk mengembalikan 10 kesalahan yang berbeda. <br><br>  Bagi mereka yang suka menyodok kode dan menjalankan tes, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id425025/">https://habr.com/ru/post/id425025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id425011/index.html">Haiku R1 beta pertama dirilis</a></li>
<li><a href="../id425015/index.html">Jual tanpa bug: keamanan digital platform e-commerce</a></li>
<li><a href="../id425019/index.html">Voronezh, menunggu Anda (dan tidak hanya) + kompetisi</a></li>
<li><a href="../id425021/index.html">Kami mencari pustaka universal cepat untuk bekerja dengan file grafik, memahami tolok ukur Google</a></li>
<li><a href="../id425023/index.html">Kami menerjemahkan resep ke dalam bahasa multicooker</a></li>
<li><a href="../id425027/index.html">Pengembangan shader GLSL di Kotlin</a></li>
<li><a href="../id425031/index.html">Lebih banyak latihan! Mari kita ajarkan Spring Framework dan profiling tanpa konferensi</a></li>
<li><a href="../id425033/index.html">Membangun Jetpack: Laporan Tahunan JetPack Aviation 2017</a></li>
<li><a href="../id425037/index.html">Berita IT Geek Hub: bagaimana kami melakukan pencarian sepeda di Praha dan apa yang menanti Anda di pertemuan berikutnya</a></li>
<li><a href="../id425039/index.html">Minggu Keamanan 37: Facebook, Twitter, dan Bug Tiup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>