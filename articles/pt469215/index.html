<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ´ üíà üßëüèæ Trabalhando com datas no idioma R (recursos b√°sicos, bem como pacotes de lubridate e timeperiodsR) üéµ üèÖ üßëüèæ‚Äçü§ù‚Äçüßëüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Obtenha a data atual em qualquer linguagem de programa√ß√£o, uma opera√ß√£o equivalente a "Hello world!" O idioma R n√£o √© exce√ß√£o. 


 Neste artigo, enten...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trabalhando com datas no idioma R (recursos b√°sicos, bem como pacotes de lubridate e timeperiodsR)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469215/"><p>  Obtenha a data atual em qualquer linguagem de programa√ß√£o, uma opera√ß√£o equivalente a "Hello world!"  O idioma R n√£o √© exce√ß√£o. </p><br><p>  Neste artigo, entenderemos como o trabalho com datas √© organizado na sintaxe b√°sica da linguagem R e tamb√©m consideraremos v√°rios pacotes √∫teis que expandem seus recursos ao trabalhar com datas: </p><br><ul><li> <code>lubridate</code> - um pacote que permite c√°lculos aritm√©ticos entre datas; </li><li>  <code>timeperiodsR</code> - um pacote para trabalhar com intervalos de tempo e seus componentes. </li></ul><br><p><img src="https://habrastorage.org/webt/l2/mg/nl/l2mgnl_5u7eejcuu1hazlp5xocg.jpeg"></p><a name="habracut"></a><br><hr><br><h1 id="soderzhanie">  Conte√∫do </h1><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trabalhando com datas na sintaxe R b√°sica</a> <br>  1.1  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Converter texto em data</a> <br>  1.2  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Recuperando componentes de data na base R</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trabalhando com datas com o pacote de lubrificado</a> <br>  2.1  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Converter texto em data usando lubrificado</a> <br>  2.2  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Recuperando componentes de data usando pacote de lubrificado</a> <br>  2.3  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Opera√ß√µes aritm√©ticas com datas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trabalho simplificado com per√≠odos, per√≠odo de tempoR pacote</a> <br>  3.1  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Intervalos de tempo em per√≠odos de tempoR</a> <br>  3.2  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Filtrando um vetor de data com timeperiodsR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conclus√£o</a> </li></ol><br><hr><br><h1 id="rabota-s-datami-v-bazovom-sintaksise-r">  Trabalhando com datas na sintaxe R b√°sica </h1><br><h3 id="preobrazovanie-teksta-v-datu">  Converter texto em data </h3><br><p>  No R b√°sico, h√° um conjunto de fun√ß√µes para trabalhar com datas.  O ponto negativo da sintaxe b√°sica √© que o registro de nomes e argumentos de fun√ß√µes √© muito fragmentado e praticamente n√£o possui conex√£o l√≥gica.  No entanto, as fun√ß√µes b√°sicas da linguagem devem ser conhecidas, portanto, come√ßaremos com elas. </p><br><p>  Na maioria das vezes, ao carregar dados no R, de arquivos csv ou outras fontes, voc√™ obt√©m a data na forma de texto.  Para <code>as.Date()</code> esse texto no tipo de dados correto, use a fun√ß√£o <code>as.Date()</code> . </p><br><pre> <code class="plaintext hljs">#      my_dates &lt;- c("2019-09-01", "2019-09-10", "2019-09-23") #    class(my_dates)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; [1] "character"</code> </pre> <br><pre> <code class="plaintext hljs">#     my_dates &lt;- as.Date(my_dates) #    class(my_dates)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; [1] "Date"</code> </pre> <br><p>  Por padr√£o, <code>as.Date()</code> aceita uma data em dois formatos: <em>AAAA-MM-DD</em> ou <em>AAAA / MM / DD</em> . <br>  Se as datas no seu conjunto de dados estiverem em qualquer outro formato, voc√™ poder√° usar o argumento de <code>format</code> para convers√£o. </p><br><pre> <code class="plaintext hljs">as.Date("September 26, 2019", format = "%B %d, %Y")</code> </pre> <br><p>  <em>O formato</em> aceita operadores em forma de cadeia, indicando qualquer intervalo de tempo e seu formato, os valores mais frequentemente usados ‚Äã‚Äãs√£o mostrados na tabela abaixo: </p><br><div class="scrollable-table"><table><thead><tr><th>  Formatar </th><th>  Descri√ß√£o do produto </th></tr></thead><tbody><tr><td>  % d </td><td>  N√∫mero do dia no m√™s </td></tr><tr><td>  % a </td><td>  Abrevia√ß√£o para o nome do dia da semana </td></tr><tr><td>  % A </td><td>  Nome completo do dia da semana </td></tr><tr><td>  % w </td><td>  N√∫mero do dia da semana (0-6, onde 0 √© domingo) </td></tr><tr><td>  % m </td><td>  Designa√ß√£o de dois d√≠gitos para o m√™s (01-12) </td></tr><tr><td>  % b </td><td>  Abrevia√ß√£o do nome do m√™s (abril, mar√ßo, ...) </td></tr><tr><td>  % B </td><td>  Nome completo do m√™s </td></tr><tr><td>  % y </td><td>  Designa√ß√£o do ano com dois d√≠gitos </td></tr><tr><td>  % Y </td><td>  Designa√ß√£o do ano com quatro d√≠gitos </td></tr><tr><td>  % j </td><td>  N√∫mero do dia do ano (001 - 366) </td></tr><tr><td>  % U </td><td>  N√∫mero da semana do ano (00 - 53), in√≠cio da semana domingo </td></tr><tr><td>  % W </td><td>  N√∫mero da semana do ano (00 - 53), in√≠cio da semana segunda-feira </td></tr></tbody></table></div><br><p>  Assim, "26 de setembro de 2019" √© o nome completo do m√™s, dia e ano.  Voc√™ pode descrever esse formato de data com os operadores da seguinte maneira: <code>"%B %d, %Y"</code> . </p><br><p>  <strong>Onde:</strong> </p><br><ul><li>  <code>%B</code> - nome completo do m√™s </li><li>  <code>%d</code> - n√∫mero do dia no m√™s </li><li>  <code>%Y</code> - Designa√ß√£o do ano com quatro d√≠gitos </li></ul><br><p>  Ao descrever o formato da data, √© importante incluir todos os caracteres adicionais da sua sequ√™ncia, como tra√ßos, v√≠rgulas, pontos, espa√ßos e assim por diante.  No meu exemplo, "26 de setembro de 2019", uma v√≠rgula √© colocada ap√≥s a data e tamb√©m deve ser colocada na descri√ß√£o do formato: <code>"%B %d, %Y"</code> . </p><br><p>  H√° situa√ß√µes em que voc√™ obt√©m uma data que n√£o √© apenas inadequada para os formatos padr√£o <em>(AAAA-MM-DD ou AAAA / MM / DD)</em> , mas tamb√©m em um idioma que difere da configura√ß√£o padr√£o no seu sistema operacional.  Por exemplo, voc√™ baixou dados em que a data √© indicada no seguinte formul√°rio: "15 de dezembro de 2019".  Antes de converter essa sequ√™ncia em uma data, voc√™ precisa alterar o c√≥digo do idioma. </p><br><pre> <code class="plaintext hljs">#   Sys.setlocale("LC_TIME", "Russian") #     as.Date(" 15, 2019 .", format = "%B %d, %Y")</code> </pre> <br><h3 id="izvlechenie-komponentov-daty-v-bazovom-r">  Recuperando componentes de data na base R </h3><br><p>  N√£o h√° muitas fun√ß√µes no R b√°sico que permitem extrair qualquer parte de uma data de um objeto da classe <em>Date</em> . </p><br><pre> <code class="plaintext hljs">current_date &lt;- Sys.Date() #   weekdays(current_date) #     months(current_date) #      quarters(current_date) #     </code> </pre> <br><p>  Al√©m da classe principal de objetos <em>Date</em> na base R, existem mais 2 tipos de dados que armazenam o registro de data e hora: <em>POSIXlt</em> , <em>POSIXct</em> .  A principal diferen√ßa entre essas classes e <em>Data</em> √© que elas armazenam hora al√©m da data. </p><br><pre> <code class="plaintext hljs">#      current_time &lt;- Sys.time() #    current_time class(current_time)</code> </pre> <br><pre> <code class="plaintext hljs"># "POSIXct" "POSIXt"</code> </pre><br><p>  A fun√ß√£o <code>Sys.time()</code> retorna a data e hora <em>atuais</em> no formato <em>POSIXct</em> .  Esse formato tem significado semelhante ao <em>UNIXTIME</em> e armazena o n√∫mero de segundos desde o in√≠cio da era UNIX <em>(meia-noite (UTC) de 31 de dezembro de 1969 a 1 de janeiro de 1970)</em> . </p><br><p>  A classe <em>POSIXlt</em> tamb√©m armazena a hora e a data e todos os seus componentes.  Portanto, √© um objeto com uma estrutura mais complexa, mas a partir da qual √© f√°cil obter qualquer componente da data e hora desde  essencialmente <em>POSIXlt</em> √© uma <em>lista</em> . </p><br><pre> <code class="plaintext hljs">#      current_time_ct &lt;- Sys.time() #    POSIXlt current_time_lt &lt;- as.POSIXlt(current_time_ct) #      current_time_lt$sec #  current_time_lt$min #  current_time_lt$hour #  current_time_lt$mday #   current_time_lt$mon #  current_time_lt$year #  current_time_lt$wday #   current_time_lt$yday #   current_time_lt$zone #  </code> </pre> <br><p>  A convers√£o de dados num√©ricos e de texto em formatos <em>POSIX *</em> √© realizada pelas fun√ß√µes <code>as.POSIXct()</code> e <code>as.POSIXlt()</code> .  Essas fun√ß√µes t√™m um pequeno conjunto de argumentos. </p><br><ul><li>  x - O n√∫mero, sequ√™ncia ou objeto da classe <em>Date</em> a ser convertida; </li><li>  tz - Fuso hor√°rio, o padr√£o √© "GMT"; </li><li>  formato - Descri√ß√£o do formato da data em que os dados passados ‚Äã‚Äãno argumento x s√£o apresentados; </li><li>  origem - Usado apenas ao converter um n√∫mero para POSIX, voc√™ precisa passar um objeto de data para esse argumento e a hora em que os segundos s√£o contados.  Normalmente usado para tradu√ß√£o de UNIXTIME. </li></ul><br><p>  Se seus dados de data e hora forem apresentados em <em>UNIXTIME</em> , use o exemplo a seguir para convert√™-los em uma data compreens√≠vel e leg√≠vel: </p><br><pre> <code class="plaintext hljs">#  UNIXTIME    as.POSIXlt(1570084639, origin = "1970-01-01")</code> </pre> <br><p>  Na origem, voc√™ pode especificar qualquer registro de data e hora.  Por exemplo, se nos seus dados a data e a hora estiverem indicados como o n√∫mero de segundos a partir de 15 de setembro de 2019 12:15, para convert√™-los em uma data, use: </p><br><pre> <code class="plaintext hljs">#  UNIXTIME       15  2019 12:15 as.POSIXlt(1546123, origin = "2019-09-15 12:15:00")</code> </pre> <br><h1 id="rabota-s-datami-s-pomoschyu-paketa-lubridate">  Trabalhando com datas com o pacote de lubrificado </h1><br><p>  talvez o <code>lubridate</code> seja o pacote mais popular para trabalhar com datas em R. Ele fornece mais tr√™s classes adicionais. </p><br><ul><li>  dura√ß√µes - dura√ß√£o, ou seja,  n√∫mero de segundos entre dois carimbos de data e hora; </li><li>  per√≠odos - per√≠odos permitem realizar c√°lculos entre datas de intervalos leg√≠veis por humanos: dias, meses, semanas e assim por diante; </li><li>  intervalos - objetos que fornecem o ponto inicial e final no tempo. </li></ul><br><p>  A instala√ß√£o de pacotes adicionais na linguagem R √© realizada pela fun√ß√£o padr√£o <code>install.packages()</code> . </p><br><p>  Instalando o pacote de <code>lubridate</code> : </p><br><pre> <code class="plaintext hljs">install.packages("lubridate")</code> </pre> <br><h3 id="preobrazovanie-teksta-v-datu-s-pomoschyu-lubridate">  Converter texto em data usando lubrificado </h3><br><p>  As fun√ß√µes do pacote de <code>lubridate</code> simplificam bastante o processo de convers√£o de texto em data e tamb√©m permitem realizar opera√ß√µes aritm√©ticas com datas e horas. </p><br><p>  As fun√ß√µes <code>today()</code> e <code>now()</code> ajudar√£o voc√™ a obter a data atual, ou data e hora. </p><br><pre> <code class="plaintext hljs">today() #   now() #    </code> </pre> <br><p>  Para converter uma string em uma data, o <code>lubridate</code> possui uma fam√≠lia inteira de fun√ß√µes cujos nomes sempre consistem em tr√™s letras e indicam uma sequ√™ncia de componentes de data: </p><br><ul><li>  y - ano </li><li>  m - m√™s </li><li>  d - dia </li></ul><br><div class="spoiler">  <b class="spoiler_title">Lista de fun√ß√µes para converter texto em data via lubrificado</b> <div class="spoiler_text"><ul><li> <code>ymd()</code> </li> <li> <code>ydm()</code> </li> <li> <code>mdy()</code> </li> <li> <code>myd()</code> </li> <li> <code>dmy()</code> </li> <li> <code>dym()</code> </li> <li> <code>yq()</code> </li> </ul></div></div><br><p>  Alguns exemplos para converter seq√º√™ncias de caracteres em datas: </p><br><pre> <code class="plaintext hljs">ymd("2017 jan 21") mdy("March 20th, 2019") dmy("1st april of 2018")</code> </pre> <br><p>  Como voc√™ pode ver, o <code>lubridate</code> muito mais eficiente no reconhecimento de descri√ß√µes de data na forma de texto e permite converter texto em data sem usar operadores adicionais para descrever o formato. </p><br><h3 id="izvlechenie-komponentov-dat-s-pomoschyu-paketa-lubridate">  Recuperando componentes de data usando pacote de lubrificado </h3><br><p>  Tamb√©m usando <code>lubridate</code> voc√™ pode obter qualquer componente a partir de uma data: </p><br><pre> <code class="plaintext hljs">dt &lt;- ymd("2017 jan 21") year(dt) #  month(dt) #  mday(dt) #    yday(dt) #    wday(dt) #  </code> </pre> <br><h3 id="arifmeticheskie-operacii-s-datami">  Opera√ß√µes aritm√©ticas com datas </h3><br><p>  Por√©m, a funcionalidade mais importante e b√°sica do <code>lubridate</code> √© a capacidade de executar v√°rias opera√ß√µes aritm√©ticas com datas. </p><br><p>  O arredondamento de uma data √© realizado por tr√™s fun√ß√µes: </p><br><ul><li>  <code>floor_date</code> - arredondando para o hor√°rio passado mais pr√≥ximo </li><li>  <code>ceiling_date</code> - arredondando para o futuro pr√≥ximo </li><li>  <code>round_date</code> - arredondando para o hor√°rio mais pr√≥ximo </li></ul><br><p>  Cada uma dessas fun√ß√µes possui um argumento de <em>unidade</em> , que permite especificar uma unidade de arredondamento: segundo, minuto, hora, dia, semana, m√™s, bimestre, trimestre, esta√ß√£o, semestral, ano </p><br><pre> <code class="plaintext hljs">dt &lt;- ymd("2017 jan 21") round_date(dt, unit = "month") #    round_date(dt, unit = "3 month") #   3  round_date(dt, unit = "quarter") #    round_date(dt, unit = "season") #    round_date(dt, unit = "halfyear") #   </code> </pre> <br><p>  Ent√£o, vamos descobrir como obter uma data que ser√° 8 dias ap√≥s a data atual e realizar v√°rios outros c√°lculos aritm√©ticos entre duas datas. </p><br><pre> <code class="plaintext hljs">today() + days(8) #     8  today() - months(2) #    2   today() + weeks(12) #     12  today() - years(2) #    2  </code> </pre> <br><h1 id="uproschyonnaya-rabota-s-periodami-paket-timeperiodsr">  Trabalho simplificado com per√≠odos, pacote timeperiodsR. </h1><br><p>  <code>timeperiodsR</code> √© um novo pacote para trabalhar com datas publicadas no CRAN em setembro de 2019. </p><br><p>  Instalando o pacote <code>timeperiodsR</code> : </p><br><pre> <code class="plaintext hljs">install.packages("timeperiodsR")</code> </pre> <br><p>  O objetivo principal √© determinar rapidamente um determinado intervalo de tempo em rela√ß√£o a uma determinada data.  Por exemplo, usando suas fun√ß√µes, voc√™ pode facilmente: </p><br><ul><li>  Receba semana passada, m√™s, trimestre ou ano em R. </li><li>  Obtenha um determinado n√∫mero de intervalos de tempo em rela√ß√£o a uma data, como as √∫ltimas 4 semanas. </li><li>  √â f√°cil extrair seus componentes do intervalo de tempo obtido: as datas de in√≠cio e t√©rmino, o n√∫mero de dias que se enquadram no intervalo, toda a sequ√™ncia de datas que o inserem. </li></ul><br><p>  O nome de todas as fun√ß√µes do pacote <code>timeperiodsR</code> intuitivo e consiste em duas partes: <em>direction</em> _ <em>interval</em> , em que: </p><br><ul><li>  <strong>dire√ß√£o</strong> na qual √© necess√°rio mover em rela√ß√£o a uma determinada data: last_n, previous, this, next, next_n. </li><li>  <strong>intervalo de</strong> tempo para calcular o per√≠odo: dia, semana, m√™s, trimestre, ano. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Conjunto completo de recursos:</b> <div class="spoiler_text"><ul><li> <code>last_n_days()</code> </li> <li> <code>last_n_weeks()</code> </li> <li> <code>last_n_months()</code> </li> <li> <code>last_n_quarters()</code> </li> <li> <code>last_n_years()</code> </li> <li> <code>previous_week()</code> </li> <li> <code>previous_month()</code> </li> <li> <code>previous_quarter()</code> </li> <li> <code>previous_year()</code> </li> <li> <code>this_week()</code> </li> <li> <code>this_month()</code> </li> <li> <code>this_quarter()</code> </li> <li> <code>this_year()</code> </li> <li> <code>next_week()</code> </li> <li> <code>next_month()</code> </li> <li> <code>next_quarter()</code> </li> <li> <code>next_year()</code> </li> <li> <code>next_n_days()</code> </li> <li> <code>next_n_weeks()</code> </li> <li> <code>next_n_months()</code> </li> <li> <code>next_n_quarters()</code> </li> <li> <code>next_n_years()</code> </li> <li> <code>custom_period()</code> </li> </ul></div></div><br><h3 id="vremennye-intervaly-v-timeperiodsr">  Intervalos de tempo em per√≠odos de tempoR </h3><br><p>  Essas fun√ß√µes s√£o √∫teis quando voc√™ precisa criar relat√≥rios com base nos dados da √∫ltima semana ou m√™s.  Para obter o √∫ltimo m√™s, use a fun√ß√£o com o mesmo nome <code>previous_month()</code> : </p><br><pre> <code class="plaintext hljs">prmonth &lt;- previous_month()</code> </pre> <br><p>  Ap√≥s o qual voc√™ ter√° um objeto <em>prprth</em> da classe <em>tpr</em> , do qual voc√™ poder√° obter facilmente os seguintes componentes: </p><br><ul><li>  a data de in√≠cio do per√≠odo, em nosso exemplo, este √© o √∫ltimo m√™s </li><li>  data de t√©rmino do per√≠odo </li><li>  o n√∫mero de dias inclu√≠dos no per√≠odo </li><li>  sequ√™ncia de datas inclu√≠das no per√≠odo </li></ul><br><p>  Al√©m disso, voc√™ pode obter cada um dos componentes de maneiras diferentes: </p><br><pre> <code class="plaintext hljs">#    prmonth$start start(prmonth) #    prmonth$end end(prmonth) #   prmonth$sequence seq(prmonth) #      prmonth$length length(prmonth)</code> </pre> <br><p>  Voc√™ tamb√©m pode obter qualquer um dos componentes usando o argumento <em>part</em> , presente em cada uma das fun√ß√µes do pacote.  Valores poss√≠veis: in√≠cio, fim, sequ√™ncia, comprimento. </p><br><pre> <code class="plaintext hljs">previous_month(part = "start") #   previous_month(part = "end") #   previous_month(part = "sequence") #   previous_month(part = "length") #    </code> </pre> <br><p>  Ent√£o, vejamos todos os argumentos dispon√≠veis nas fun√ß√µes do pacote <code>timeperiodsR</code> : </p><br><ul><li>  <code>x</code> - a data de refer√™ncia a partir da qual o per√≠odo ser√° calculado; por padr√£o, a data atual; </li><li>  <code>n</code> - O n√∫mero de intervalos que ser√£o inclu√≠dos no per√≠odo, por exemplo, 3 semanas anteriores; </li><li>  <code>part</code> - Qual componente do objeto <code>tpr</code> voc√™ precisa obter, por padr√£o, <code>all</code> ; </li><li>  <code>week_start</code> - O argumento est√° presente apenas nas fun√ß√µes para trabalhar com semanas e permite especificar o n√∫mero do dia da semana que ser√° considerado seu in√≠cio; por padr√£o, o in√≠cio da semana √© segunda-feira, mas voc√™ pode especificar de 1 - segunda a 7 - domingo. </li></ul><br><p>  Assim, voc√™ pode calcular qualquer per√≠odo de tempo relativo √† data atual ou qualquer outra data, darei mais alguns exemplos: </p><br><hr><br><pre> <code class="plaintext hljs">#  3   #  6  2019  #   -  last_n_weeks(x = "2019-10-06", n = 3, week_start = 1)</code> </pre> <br><pre> <code class="plaintext hljs"> Time period: from 9 September of 2019, Monday to 29 September of 2019, Sunday</code> </pre> <br><p>  6 de outubro √© domingo: <br><img src="https://habrastorage.org/getpro/habr/post_images/32c/cca/606/32ccca60658416fc953de4ed8016226e.png" alt="6 de outubro de 2019"></p><br><p>  Precisamos de um per√≠odo que, em rela√ß√£o a 6 de outubro, leve tr√™s semanas anteriores.  N√£o incluindo a semana de 6 de outubro.  Portanto, este √© o per√≠odo de 9 a 29 de setembro. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/68f/749/599/68f7495999a3da01e764710b169a5a2b.png" alt="3 semanas a partir de 6 de outubro de 2019"></p><br><hr><br><pre> <code class="plaintext hljs">#     4  #  16  2019  previous_month(x = "2019-09-16", n = 4)</code> </pre> <br><pre> <code class="plaintext hljs"> Time period: from 1 May of 2019, Wednesday to 31 May of 2019, Friday</code> </pre> <br><p>  Neste exemplo, estamos interessados ‚Äã‚Äãno m√™s que foi h√° 4 meses, se prosseguirmos em 16 de setembro de 2019, portanto, era em maio de 2019. </p><br><h3 id="filtraciya-vektora-dat-s-pomoschyu-timeperiodsr">  Filtrando um vetor de data com timeperiodsR </h3><br><p>  Existem v√°rios operadores para filtrar datas nos <code>timeperiodsR</code> : </p><br><ul><li>  % left_out% - compara dois objetos da classe tpr e retorna o valor da esquerda, que n√£o est√° √† direita. </li><li>  % left_in% - compara dois objetos da classe tpr e retorna datas do objeto esquerdo que est√£o inclu√≠das no direito. </li><li>  % right_out% - compara dois objetos da classe tpr e retorna o valor da direita, que est√° ausente na esquerda. </li><li>  % right_in% - compara dois objetos da classe tpr e retorna as datas do objeto direito que est√£o presentes no esquerdo. </li></ul><br><pre> <code class="plaintext hljs">period1 &lt;- this_month("2019-11-07") period2 &lt;- previous_week("2019-11-07") period1 %left_in% period2 #    period1    period2 period1 %left_out% period2 #    period1     period2 period1 %right_in% period2 #    period2    period1 period1 %right_out% period2 #    period2     period1</code> </pre> <br><h1 id="zaklyuchenie">  Conclus√£o </h1><br><p>  Examinamos detalhadamente as classes de objetos projetados na linguagem R para trabalhar com datas.  Agora tamb√©m √© poss√≠vel executar opera√ß√µes aritm√©ticas em datas e obter rapidamente per√≠odos de tempo usando o pacote <code>timeperiodsR</code> . </p><br><p>  Se voc√™ est√° interessado na linguagem R, convido voc√™ a assinar o meu canal de telegrama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">R4marketing</a> , no qual diariamente compartilho materiais √∫teis sobre o uso da linguagem R na resolu√ß√£o de minhas tarefas di√°rias. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt469215/">https://habr.com/ru/post/pt469215/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt469203/index.html">Forte caf√© para caf√© da manh√£ e hackathons: por que √© importante para o desenvolvimento da comunidade de ci√™ncia de dados</a></li>
<li><a href="../pt469205/index.html">Museum DataArt. Descompacte "Electronics MS 0511"</a></li>
<li><a href="../pt469209/index.html">Como as l√¢mpadas LED Philips diferem das caras</a></li>
<li><a href="../pt469211/index.html">Como o ICD est√° desenvolvendo um ecossistema para clientes banc√°rios</a></li>
<li><a href="../pt469213/index.html">Explorando analisadores combinat√≥rios com Rust</a></li>
<li><a href="../pt469217/index.html">Equipe IMHO SaintLead Conf 2019</a></li>
<li><a href="../pt469219/index.html">Os 20 principais recursos de navega√ß√£o do IntelliJ IDEA. Parte 2</a></li>
<li><a href="../pt469221/index.html">Cascadeur: prevendo a pose de seis pontos de um personagem</a></li>
<li><a href="../pt469223/index.html">Retroilumina√ß√£o LED como backdoor</a></li>
<li><a href="../pt469229/index.html">O projeto dos clubes de rob√≥tica ‚ÄúGoROBO‚Äù - uma startup do acelerador da ITMO University torna</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>