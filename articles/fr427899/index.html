<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ üëàüèø üö¥ JsonWriterSax - une biblioth√®que pour cr√©er JSON üëçüèº üë®‚Äçüåæ ü¶Å</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a quelque temps, j'ai √©crit une application c ++ / Qt qui envoyait de grandes quantit√©s de donn√©es au format JSON sur le r√©seau. Le QJsonDocument...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JsonWriterSax - une biblioth√®que pour cr√©er JSON</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427899/"><p>  Il y a quelque temps, j'ai √©crit une application c ++ / Qt qui envoyait de grandes quantit√©s de donn√©es au format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSON</a> sur le r√©seau.  Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">QJsonDocument</a> standard <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">a √©t√© utilis√©</a> .  Lors de la mise en ≈ìuvre, j'ai rencontr√© de faibles performances, ainsi qu'une conception de classe peu pratique, qui ne permettait pas une d√©tection normale des erreurs pendant le fonctionnement.  Le r√©sultat a √©t√© la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JsonWriterSax</a> , qui vous permet d'√©crire des documents JSON en style SAX √† grande vitesse, que je publie sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com</a> sous la licence MIT.  Peu importe - je demande un chat. </p><a name="habracut"></a><br><h2 id="nemnogo-teorii">  Un peu de th√©orie </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSON (JavaScript Object Notation)</a> est un format de donn√©es de texte structur√© d√©velopp√© par Douglas Crockford et un sous-ensemble du langage ECMAScript (JavaScript, JScript, etc. ont √©t√© cr√©√©s sur cette base).  JSON remplace XML, √©largissant les capacit√©s d'imbrication et ajoutant des types de donn√©es.  Il est actuellement activement utilis√© sur Internet. </p><br><p>  Mais il y a des d√©fauts dans JSON.  √Ä mon avis, parmi les types standard, il n'y a clairement pas assez de type DateTime - vous devez transf√©rer la valeur sous la forme d'un nombre ou d'une cha√Æne, et lors de l'analyse, il est n√©cessaire de prendre une d√©cision en fonction du contexte.  Mais il convient de noter que dans ECMAScript, le type Date a √©t√© cr√©√© il y a longtemps, n'a pas √©t√© pens√©, et dans le monde js, les biblioth√®ques tierces sont utilis√©es pour travailler avec les dates. </p><br><p>  Il existe 2 approches principales pour analyser et cr√©er des documents structur√©s - SAX et DOM.  Ils sont apparus pour XML, mais peuvent √™tre utilis√©s comme mod√®les pour cr√©er des gestionnaires d'autres formats. </p><br><h3 id="sax-simple-api-for-xml">  SAX (API simple pour XML) </h3><br><p>  Il est utilis√© pour le traitement s√©quentiel des donn√©es et vous permet de traiter de gros documents dans un flux.  Lors de la lecture, il renvoie √† l'application des informations sur l'√©l√©ment trouv√© ou l'erreur, mais la conservation des informations et le contr√¥le d'imbrication incombent √† l'application elle-m√™me.  Lors de l'enregistrement, les √©tapes du style sont g√©n√©ralement indiqu√©es: d√©marrer un √©l√©ment, d√©marrer un sous-√©l√©ment, √©crire un nombre, √©crire une ligne, fermer un sous-√©l√©ment, fermer un √©l√©ment.  Les inconv√©nients incluent le fait que le programmeur doit √©crire le code de mani√®re plus approfondie, pour mieux comprendre la structure du document et le manque ou l'extr√™me limitation de l'√©dition d'un document existant. </p><br><h3 id="dom-document-object-model">  DOM (mod√®le d'objet de document) </h3><br><p>  Avec cette m√©thode, une arborescence de documents est construite en m√©moire qui peut √™tre s√©rialis√©e, d√©s√©rialis√©e et modifi√©e.  Le principal inconv√©nient est la consommation √©lev√©e de m√©moire et l'augmentation du temps de traitement.  Sous le capot, un gestionnaire SAX est g√©n√©ralement utilis√©. </p><br><h2 id="problemy-qjsondocument">  Probl√®mes avec QJsonDocument </h2><br><p>  Le QJsonDocument standard utilise l'approche DOM.  Lors de la cr√©ation d'un document, la vitesse est faible - vous pouvez voir les rep√®res √† la fin de l'article.  Mais le plus gros probl√®me pour moi √©tait la conception de retour d'erreur mal con√ßue. </p><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> max = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::numeric_limits&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;::max(); QJsonArray ja; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; max; ++i) { ja.append(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(ja.size() - <span class="hljs-number"><span class="hljs-number">1</span></span> != i) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre> <br><p>  Dans cet exemple, s'il n'y a pas assez de m√©moire, le message sera √©crit dans le flux d'erreur. </p><br><p> <code>QJson: Document too large to store in data structure</code> <br>  et les donn√©es ne seront plus ajout√©es.  Dans le cas d'un tableau, vous pouvez v√©rifier la condition </p><br><pre> <code class="cpp hljs">ja.size() - <span class="hljs-number"><span class="hljs-number">1</span></span> != i</code> </pre> <br><p>  Mais que faire quand on travaille avec un objet?  V√©rifier constamment qu'une nouvelle cl√© a √©t√© ajout√©e?  Analyser le journal √† la recherche d'une erreur? </p><br><h2 id="biblioteka">  La biblioth√®que </h2><br><p>  La biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JsonWriterSax vous</a> permet d'√©crire un document JSON dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">QTextStream</a> en style SAX et est disponible sur github sous la licence MIT.  Le contr√¥le de la m√©moire appartient √† l'application.  La biblioth√®que contr√¥le l'int√©grit√© de JSON - si l'√©l√©ment n'est pas ajout√© correctement, la fonction d'√©criture retournera une erreur.  Pour le contr√¥le, une grammaire KS est utilis√©e.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Des tests</a> ont √©t√© √©crits, mais peut-√™tre que certains cas n'ont pas √©t√© surveill√©s.  Si quelqu'un corrige le mauvais fonctionnement du contr√¥le et rapporte pour corriger l'erreur - je serai tr√®s reconnaissant. </p><br><p>  Je pense que la meilleure description d'une biblioth√®que pour un programmeur est un exemple de code =) </p><br><h2 id="primery">  Des exemples </h2><br><h3 id="sozdanie-massiva">  Cr√©ation de tableaux </h3><br><pre> <code class="cpp hljs">QByteArray ba; <span class="hljs-function"><span class="hljs-function">QTextStream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;ba)</span></span></span></span>; stream.setCodec(<span class="hljs-string"><span class="hljs-string">"utf-8"</span></span>); <span class="hljs-function"><span class="hljs-function">JsonWriterSax </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(stream)</span></span></span></span>; writer.writeStartArray(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++i) { writer.write(i); } writer.writeEndArray(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(writer.end()) { stream.flush(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { qWarning() &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Error json"</span></span>; }</code> </pre> <br><p>  En cons√©quence, nous obtenons </p><br><pre> <code class="hljs json">[<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>]</code> </pre> <br><h3 id="sozdanie-obekta">  Cr√©ation d'objets </h3><br><pre> <code class="cpp hljs">QByteArray ba; <span class="hljs-function"><span class="hljs-function">QTextStream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;ba)</span></span></span></span>; stream.setCodec(<span class="hljs-string"><span class="hljs-string">"utf-8"</span></span>); <span class="hljs-function"><span class="hljs-function">JsonWriterSax </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(stream)</span></span></span></span>; writer.writeStartObject(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>; ++i) { writer.write(QString::number(i), i); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = <span class="hljs-number"><span class="hljs-number">5</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++i) { writer.write(QString::number(i), QString::number(i)); } writer.writeKey(<span class="hljs-string"><span class="hljs-string">"arr"</span></span>); writer.writeStartArray(); writer.writeEndArray(); writer.writeKey(<span class="hljs-string"><span class="hljs-string">"o"</span></span>); writer.writeStartObject(); writer.writeEndObject(); writer.writeKey(<span class="hljs-string"><span class="hljs-string">"n"</span></span>); writer.writeNull(); writer.write(QString::number(<span class="hljs-number"><span class="hljs-number">11</span></span>), QVariant(<span class="hljs-number"><span class="hljs-number">11</span></span>)); writer.write(<span class="hljs-string"><span class="hljs-string">"dt"</span></span>, QVariant(QDateTime::fromMSecsSinceEpoch(<span class="hljs-number"><span class="hljs-number">10</span></span>))); writer.writeEndObject(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(writer.end()) { stream.flush(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { qWarning() &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Error json"</span></span>; }</code> </pre> <br><p>  En cons√©quence, nous obtenons </p><br><pre> <code class="hljs json">{<span class="hljs-attr"><span class="hljs-attr">"0"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-attr"><span class="hljs-attr">"1"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">"2"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-attr"><span class="hljs-attr">"3"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-attr"><span class="hljs-attr">"4"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-attr"><span class="hljs-attr">"5"</span></span>:<span class="hljs-string"><span class="hljs-string">"5"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"6"</span></span>:<span class="hljs-string"><span class="hljs-string">"6"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"7"</span></span>:<span class="hljs-string"><span class="hljs-string">"7"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"8"</span></span>:<span class="hljs-string"><span class="hljs-string">"8"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"9"</span></span>:<span class="hljs-string"><span class="hljs-string">"9"</span></span>,<span class="hljs-attr"><span class="hljs-attr">"arr"</span></span>:[],<span class="hljs-attr"><span class="hljs-attr">"o"</span></span>:{},<span class="hljs-attr"><span class="hljs-attr">"n"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"11"</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-attr"><span class="hljs-attr">"dt"</span></span>:<span class="hljs-string"><span class="hljs-string">"1970-01-01T03:00:00.010"</span></span>}</code> </pre> <br><h3 id="sozdanie-dokumenta-s-vlozhennostyu-i-raznymi-tipami">  Cr√©ation d'un document avec imbrication et diff√©rents types </h3><br><pre> <code class="cpp hljs">QByteArray ba; <span class="hljs-function"><span class="hljs-function">QTextStream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;ba)</span></span></span></span>; stream.setCodec(<span class="hljs-string"><span class="hljs-string">"utf-8"</span></span>); <span class="hljs-function"><span class="hljs-function">JsonWriterSax </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(stream)</span></span></span></span>; writer.writeStartArray(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">1000</span></span>; ++i) { writer.writeStartObject(); writer.writeKey(<span class="hljs-string"><span class="hljs-string">"key"</span></span>); writer.writeStartObject(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; <span class="hljs-number"><span class="hljs-number">1000</span></span>; ++j) { writer.write(QString::number(j), j); } writer.writeEndObject(); writer.writeEndObject(); } writer.writeEndArray(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(writer.end()) { stream.flush(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { qWarning() &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Error json"</span></span>; }</code> </pre> <br><h2 id="benchmarks">  Rep√®res </h2><br><p>  Utilis√© par QBENCHMARK lors de la g√©n√©ration de la version.  La fonctionnalit√© est impl√©ment√©e dans la classe <a href="">JsonWriterSaxTest</a> . </p><br><h3 id="elementary-os-50-juno-kernel-4150-38-generic-cpu-intelr-coretm2-quad-cpu-9550--283ghz-4g-ram-qt-5112-gcc-531">  √©l√©mentaire OS 5.0 Juno, noyau 4.15.0-38-g√©n√©rique, cpu Intel¬Æ Core (TM) 2 Quad CPU 9550 @ 2,83 GHz, RAM 4G, Qt 5.11.2 GCC 5.3.1 </h3><br><h4 id="long-number-array">  Tableau de nombres longs </h4><br><ul><li>  QJsonDocument: 42 ms par it√©ration (total: 85, it√©rations: 2) </li><li>  JsonWriterSax: 23 ms par it√©ration (total: 93, it√©rations: 4) </li></ul><br><h4 id="big-one-level-object">  Grand objet √† un niveau </h4><br><ul><li>  QJsonDocument: 1 170 ms par it√©ration (total: 1 170, it√©rations: 1) </li><li>  JsonWriterSax: 53 ms par it√©ration (total: 53, it√©rations: 1) </li></ul><br><h4 id="big-complex-document">  Grand document complexe </h4><br><ul><li>  QJsonDocument: 1 369 ms par it√©ration (total: 1 369, it√©rations: 1) </li><li>  JsonWriterSax: 463 ms par it√©ration (total: 463, it√©rations: 1) </li></ul><br><h3 id="elementary-os-50-juno-kernel-4150-38-generic-cpu-intelr-coretm-i7-7500u-cpu--270ghz-8g-ram-qt-5112-gcc-531">  √©l√©mentaire OS 5.0 Juno, noyau 4.15.0-38-g√©n√©rique, processeur Intel¬Æ Core (TM) i7-7500U √† 2,70 GHz, 8 Go de RAM, Qt 5.11.2 GCC 5.3.1 </h3><br><h4 id="long-number-array-1">  Tableau de nombres longs </h4><br><ul><li>  QJsonDocument: 29,5 ms par it√©ration (total: 118, it√©rations: 4) </li><li>  JsonWriterSax: 13 ms par it√©ration (total: 52, it√©rations: 4) </li></ul><br><h4 id="big-one-level-object-1">  Grand objet √† un niveau </h4><br><ul><li>  QJsonDocument: 485 ms par it√©ration (total: 485, it√©rations: 1) </li><li>  JsonWriterSax: 31 ms par it√©ration (total: 62, it√©rations: 2) </li></ul><br><h4 id="big-complex-document-1">  Grand document complexe </h4><br><ul><li>  QJsonDocument: 734 ms par it√©ration (total: 734, it√©rations: 1) </li><li>  JsonWriterSax: 271 ms par it√©ration (total: 271, it√©rations: 1) </li></ul><br><h3 id="ms-windows-7-sp1-cpu-intelr-coretm-i7-4770-cpu--340ghz-8g-ram-qt-5110-gcc-530">  MS Windows 7 SP1, CPU Intel¬Æ Core (TM) i7-4770 CPU @ 3.40GHz, 8G RAM, Qt 5.11.0 GCC 5.3.0 </h3><br><h4 id="long-number-array-2">  Tableau de nombres longs </h4><br><ul><li>  QJsonDocument: 669 ms par it√©ration (total: 669, it√©rations: 1) </li><li>  JsonWriterSax: 20 ms par it√©ration (total: 81, it√©rations: 4) </li></ul><br><h4 id="big-one-level-object-2">  Grand objet √† un niveau </h4><br><ul><li>  QJsonDocument: 1 568 ms par it√©ration (total: 1 568, it√©rations: 1) </li><li>  JsonWriterSax: 44 ms par it√©ration (total: 88, it√©rations: 2) </li></ul><br><h4 id="big-complex-document-2">  Grand document complexe </h4><br><ul><li>  QJsonDocument: 1 167 ms par it√©ration (total: 1 167, it√©rations: 1) </li><li>  JsonWriterSax: 375 ms par it√©ration (total: 375, it√©rations: 1) </li></ul><br><h3 id="ms-windows-7-sp1-cpu-intelr-coretm-i3-3220-cpu--330ghz-8g-ram-qt-5110-gcc-530">  MS Windows 7 SP1, CPU Intel¬Æ Core (TM) i3-3220 CPU @ 3.30GHz, 8G RAM, Qt 5.11.0 GCC 5.3.0 </h3><br><h4 id="long-number-array-3">  Tableau de nombres longs </h4><br><ul><li>  QJsonDocument: 772 ms par it√©ration (total: 772, it√©rations: 1) </li><li>  JsonWriterSax: 26 ms par it√©ration (total: 52, it√©rations: 2) </li></ul><br><h4 id="big-one-level-object-3">  Grand objet √† un niveau </h4><br><ul><li>  QJsonDocument: 2,029 ms par it√©ration (total: 2,029, it√©rations: 1) </li><li>  JsonWriterSax: 59 ms par it√©ration (total: 59, it√©rations: 1) </li></ul><br><h4 id="big-complex-document-3">  Grand document complexe </h4><br><ul><li>  QJsonDocument: 1 530 ms par it√©ration (total: 1 530, it√©rations: 1) </li><li>  JsonWriterSax: 495 ms par it√©ration (total: 495, it√©rations: 1) </li></ul><br><h2 id="perspektivy">  Perspectives </h2><br><p>  Dans les versions futures, je pr√©vois d'ajouter la possibilit√© de d√©crire le format des donn√©es utilisateur via les fonctions lambda √† l'aide de QVariant, d'ajouter la possibilit√© d'utiliser des s√©parateurs pour formater le document (joli document) et, si la communaut√© est int√©ress√©e, je peux ajouter un analyseur SAX. </p><br><p>  Par ailleurs, pour trouver une erreur de d√©bordement, ma biblioth√®que m'a aid√©, ce qui permet √† qInfo (), qDebug (), qWarning () de d√©finir le format et la sortie dans le style du module de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">journalisation</a> Python.  Je pr√©vois √©galement de publier cette biblioth√®que en open source - si quelqu'un est int√©ress√© - √©crivez dans les commentaires. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427899/">https://habr.com/ru/post/fr427899/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427889/index.html">Faux, faux, FAUX! m√©thodes d'att√©nuation des DDoS</a></li>
<li><a href="../fr427891/index.html">Des millions de personnes peuvent √™tre attaqu√©es par une vuln√©rabilit√© dans la plate-forme de conf√©rence Cisco WebEx</a></li>
<li><a href="../fr427893/index.html">Bloody Lola sur Omega 2 ou Python √©touffant √† l'Halloween</a></li>
<li><a href="../fr427895/index.html">Suppression de donn√©es d'une base de donn√©es partageable</a></li>
<li><a href="../fr427897/index.html">Analyser un imageur √† r√©sonance magn√©tique II: les m√©tamat√©riaux en IRM</a></li>
<li><a href="../fr427901/index.html">Comment ne pas utiliser l'API de flux Node.js</a></li>
<li><a href="../fr427905/index.html">Extraction de nourriture ou Carrefour √† travers les yeux d'un pirate</a></li>
<li><a href="../fr427907/index.html">Tir de drone, r√¢teau, hacks de vie, d√©veloppement personnel et carri√®re de photographe / vid√©aste: nouveau podcast GLPH</a></li>
<li><a href="../fr427909/index.html">Python: comment r√©duire de moiti√© la consommation m√©moire en ajoutant une seule ligne de code?</a></li>
<li><a href="../fr427911/index.html">Passions de bureau</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>