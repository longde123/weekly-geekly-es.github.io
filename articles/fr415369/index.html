<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¸ğŸ¾ ğŸ± ğŸ‘ŒğŸ¾ Refactoring Prix ğŸ§˜ğŸ¾ ğŸ‘¦ ğŸ†”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Subjectivement: le refactoring est une Â«maladieÂ» juvÃ©nile. Selon des observations personnelles, quelque part aprÃ¨s 26 ans commence Ã  lÃ¢cher prise. Com...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Refactoring Prix</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415369/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2g/am/9h/2gam9hcz7vw9kp-513utyr0ezum.png" height="500"></div>  Subjectivement: le refactoring est une Â«maladieÂ» juvÃ©nile.  Selon des observations personnelles, quelque part aprÃ¨s 26 ans commence Ã  lÃ¢cher prise.  Comme dans cette vieille phrase: Â«Celui qui n'Ã©tait pas rÃ©volutionnaire dans sa jeunesse - il n'a pas de cÅ“ur, celui qui ne devient pas conservateur Ã  maturitÃ© - il n'a pas d'esprit.  Par consÃ©quent, jusqu'Ã  ce que je lÃ¢che enfin prise, j'essaierai de dÃ©crire les cas d'utilisation du refactoring et les objectifs possibles qui peuvent Ãªtre atteints avec. <a name="habracut"></a><br><h2 id="vdohnoviteli">  Inspirateurs </h2><br><p> J'ai commencÃ© Ã  Ã©crire aprÃ¨s la prochaine visualisation de la demande de pull pour plus de 150 fichiers, oÃ¹ de nouvelles fonctionnalitÃ©s et une refactorisation de celles existantes Ã©taient farouchement impliquÃ©es.  Le refactoring n'Ã©tait pas seulement esthÃ©tique, mais aussi logique, ce qui causait la plus grande douleur.  Par exemple, dans Ruby, le <code>amount == 0</code> hardiment remplacÃ© par le <code>amount.zero?</code>  sans considÃ©rer que pour le cas d'un <code>amount</code> <code>nil</code> <code>amount</code> ces constructions ne sont pas Ã©quivalentes.  Tout cela a Ã©tÃ© expliquÃ© approximativement comme suit: "mais selon le code, la norme est tellement supposÃ©e!"  Ã€ la question logique "quel est le but de suivre le code Ã  la norme et en gÃ©nÃ©ral, quel est votre objectif en tant que dÃ©veloppeur?"  l'homme s'est enfermÃ© et a rÃ©pÃ©tÃ© un peu coupable "mais selon la norme du code, vous devez Ã©crire comme Ã§a ..." et ressemblait Ã  une blonde dans un magasin de vÃªtements qui ne pouvait pas faire face au dÃ©sir <del>  refactor </del>  acheter tout. </p><br><h2 id="opredelenie">  DÃ©finition </h2><br><p>  Le sujet est sensible, vous devez donc porter une attention particuliÃ¨re Ã  la question "qui est qui?"  Ainsi, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">selon le wiki</a> , la refactorisation est un processus de changement de la structure interne d'un programme qui <u>n'affecte pas son comportement externe</u> et vise Ã  faciliter la comprÃ©hension de son travail. </p><br><p>  Pour ma part, je veux rÃ©duire les limites et dÃ©finir le refactoring (au pire sens du terme) comme tout changement qui n'est pas directement liÃ© au problÃ¨me rÃ©solu et qui ne change pas le comportement externe du systÃ¨me, mais qui est effectuÃ© dans le cadre de la tÃ¢che d'origine. </p><br><p>  Autrement dit, je ne veux pas parler du changement prÃ©vu dans la base de code, pour lequel la portÃ©e du travail a Ã©tÃ© dÃ©finie et des objectifs spÃ©cifiques ont Ã©tÃ© fixÃ©s, mais des modifications spontanÃ©es qui se produisent pendant le dÃ©veloppement. </p><br><h2 id="cennost-produkta">  Valeur du produit </h2><br><p>  Je vais maintenant partir de loin.  Le code source n'est ni un objectif ni une valeur.  Bien sÃ»r, esthÃ©tiquement ou artistiquement, cela peut prÃ©senter un certain intÃ©rÃªt, mais ce sont des exceptions.  En gÃ©nÃ©ral, le code est un outil pour crÃ©er un produit logiciel que n'importe qui utilise.  Par consÃ©quent, pour commencer, il serait bon de dÃ©terminer quelles sont les valeurs du produit. </p><br><h3 id="pryamye-cennosti-produkta">  Valeurs directes des produits </h3><br><p>  Ici, tout est simple.  Ils utilisent le produit, donc les valeurs directes sont ce que l'utilisateur ressent / voit / ressent clairement.  Ã€ savoir: </p><br><ol><li>  toutes sortes de fonctionnalitÃ©s du produit; </li><li>  utilisabilitÃ© (UI / UX, performances, tolÃ©rance aux pannes, etc.). </li></ol><br><p>  Le deuxiÃ¨me point peut susciter quelques discussions.  AprÃ¨s tout, beaucoup pensent que ce n'est pas l'essentiel.  Puisque si la fonctionnalitÃ© est bonne, peu importe dans quoi elle est enveloppÃ©e.  Bons exemples de fonctionnalitÃ©s sans UI / UX <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sensÃ©es</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redmine</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SAP</a> .  Cependant, je suis en dÃ©saccord avec ce regard et de plus prÃ¨s dans l'opinion du camarade <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Alan Cooper</a> et de son Â«hÃ´pital psychiatrique entre les mains des patientsÂ». </p><br><h3 id="kosvennye-cennosti-produkta">  Valeurs indirectes des produits </h3><br><p>  Ce sont des valeurs qui en elles-mÃªmes n'affectent pas l'utilisateur.  Mais ils peuvent Â«tirerÂ» ou Â«s'accumulerÂ» et avoir un impact (de gravitÃ© variable) sur le produit ou ses fonctionnalitÃ©s. </p><br><ol><li>  Bugs.  Un cas limite de valeurs.  Ils sont secondaires parce que les valeurs elles-mÃªmes ne portent pas, mais les empruntent aux caractÃ©ristiques voisines. </li><li>  PropretÃ©.  Il s'agit de lisibilitÃ©, de modularitÃ©, de minimisation des composants entrants, de standardisation et d'unification des interfaces, etc. </li><li>  La documentation  Il s'agit de code et d'explications pour les dÃ©veloppeurs, pas de descriptions d'entreprise ou de comptes d'utilisateurs.  Elle est bien illustrÃ©e par la phrase d'un paysan gai d'une des interviews: "La logique dans la base de donnÃ©es est Ã©crite comme un livre." </li><li>  Ã‰volutivitÃ© / sÃ©curitÃ© / sÃ©curitÃ©.  L'utilisateur ne les voit que lorsque quelque chose de grave se produit. </li></ol><br><h3 id="cennosti-dlya-razrabotchika">  Valeurs du dÃ©veloppeur </h3><br><p>  Une catÃ©gorie trÃ¨s importante que beaucoup nÃ©gligent, mais qui affecte toujours le rÃ©sultat. </p><br><ol><li>  Code par norme. </li><li>  Indentation sur le feng shui. </li><li>  Autres transactions avec conscience.  AprÃ¨s tout, le code a Ã©tÃ© Ã©crit, donc il y a un rÃ©sultat pour la journÃ©e, et donc il y a un avantage. </li><li>  ConformitÃ© du code avec le monde intÃ©rieur. </li></ol><br><p>  Mais soyons honnÃªtes.  Tout cela ne concerne pas les valeurs associÃ©es au produit et Ã  l'utilisateur final.  Il s'agit de psychologie et de cafards personnels. </p><br><h2 id="vzglyad-so-storony-biznesa">  Vue du cÃ´tÃ© des affaires </h2><br><p>  Par souci d'exhaustivitÃ©, il faudrait considÃ©rer tout cela du cÃ´tÃ© de l'entreprise, et non d'un produit logiciel.  Dans ce cas, la division en valeurs directes et indirectes devient assez banale: directe - apporte Ã©videmment de l'argent et vous pouvez donner une Ã©valuation quantitative sans ambiguÃ¯tÃ©;  indirect - ils n'apportent pas d'argent et / ou il est trÃ¨s difficile Ã  quantifier;  les valeurs pour le dÃ©veloppeur n'apportent pas d'argent sous aucune forme (peut-Ãªtre mÃªme l'enlever). </p><br><p>  Par exemple. </p><br><ul><li>  Une nouvelle fonctionnalitÃ© avec le vissage OAuth a augmentÃ© le nombre d'inscriptions de 10% et nous avons obtenu + 1k $. </li><li>  Nous avons divisÃ© le module de facturation en plusieurs parties indÃ©pendantes, selon le modÃ¨le de responsabilitÃ© unique.  Il semble que cela soit devenu plus facile Ã  entretenir, mais ce n'Ã©tait pas possible de mesurer. </li><li>  Nous avons alignÃ© la base de code sur la norme de code et ... n'avons rien reÃ§u. </li></ul><br><p>  Il convient de noter qu'Ã  partir des estimations ci-dessus, les jambes se dÃ©veloppent Ã  l'accÃ©lÃ©ration commerciale bien-aimÃ©e, Ã  la hÃ¢te gÃ©nÃ©rale et Ã  la rÃ©ticence Ã  consacrer du temps Ã  autre chose que la fonctionnalitÃ© et, Ã©ventuellement, un bug.  En effet, les valeurs directes peuvent Ãªtre estimÃ©es et Â«venduesÂ», et les valeurs indirectes sont trÃ¨s difficiles, voire impossibles.  Et il s'avÃ¨re que les valeurs indirectes sont rÃ©alisÃ©es soit en vertu d'une formation d'ingÃ©nieur, soit comprises au niveau intuitif, ou rejetÃ©es comme Â«sans valeurÂ». </p><br><p>  En toute justice, nous devons ici rappeler le concept d'activateur, qui "ouvre la voie" Ã  la mise en Å“uvre de la fonctionnalitÃ© souhaitÃ©e, mais ne prÃ©sente pas de bÃ©nÃ©fice Ã©vident pour l'utilisateur.  Mais c'est une autre histoire. </p><br><h2 id="prichyom-tut-refaktoring">  Et qu'en est-il du refactoring? </h2><br><p>  Du moins malgrÃ© le fait qu'il ne peut influencer que les valeurs indirectes du produit.  Par consÃ©quent, l'utilisateur ne se sentira pas mieux de toute refactorisation. </p><br><p>  Il est Ã©galement important de se souvenir de l'entropie.  Le refactoring le minimise toujours.  Pour rÃ©duire l'entropie, idÃ©alement, vous avez besoin d'une Ã©quipe d'architectes qui minimisent l'entropie au stade de la conception.  Pour citer une piÃ¨ce du Mythical Man-Month: </p><br><blockquote>  La programmation systÃ¨me est un processus qui rÃ©duit l'entropie, et donc la mÃ©tastabilitÃ© lui est inhÃ©rente.  La maintenance de programme est un processus qui augmente l'entropie, et mÃªme sa maintenance la plus habile ne fait que retarder le systÃ¨me de tomber dans une obsolescence dÃ©sespÃ©rÃ©e. </blockquote><p>  Par consÃ©quent, si nous considÃ©rons que la refactorisation fait partie du processus de maintenance du programme, moins il y a de refactorisation, plus le code vivra sans rÃ©Ã©criture. </p><br><h2 id="kakie-celi-mogut-byt-u-refaktoringa">  Quels objectifs peut avoir la refactorisation? </h2><br><p>  Permettez-moi de vous rappeler que je parle d'un changement spontanÃ© lors de la mise en Å“uvre des fonctionnalitÃ©s, et non des changements prÃ©vus.  Dans ce cas, la dÃ©finition de l'objectif incombe entiÃ¨rement au dÃ©veloppeur.  Il doit se poser la question principale Â«pourquoi?Â», Y rÃ©pondre et ensuite se diriger vers l'objectif visÃ©. </p><br><h3 id="za-entropiyu">  Pour l'entropie! </h3><br><p>  C'est difficile de le faire soi-mÃªme.  Et passer Ã  travers l'examen est gÃ©nÃ©ralement irrÃ©aliste.  L'objectif est certainement bon: dÃ©gager la tÃªte de pont pour de nouvelles rÃ©alisations, ainsi que pour Ã©liminer les toxines et les toxines accumulÃ©es pendant la durÃ©e du support produit.  Mais pelleter quelques modules Ã  partir de zÃ©ro sans rien perdre en cours de route n'est pas une tÃ¢che facile.  Il doit Ãªtre rÃ©solu en collaboration avec des analystes commerciaux et des architectes, le cas Ã©chÃ©ant.  Si peu de gens risquent de le faire sur une base volontaire. </p><br><h3 id="za-dokumentaciyu">  Pour la documentation! </h3><br><p>  C'est dÃ©jÃ  plus simple.  Renommez les variables / fonctions selon le principe Â«ce qui est sur la boÃ®te, puis dans la boÃ®teÂ», simplifiez la conception grÃ¢ce aux capacitÃ©s du langage et des bibliothÃ¨ques, ajoutez des commentaires dans des endroits non Ã©vidents, etc.  Cela peut se faire seul et, avec la bonne approche, cela peut Ãªtre bien fait Ã  la fois pour soi-mÃªme pour l'avenir et pour les collÃ¨gues voisins. </p><br><h3 id="za-bystrodeystvie">  Pour la vitesse! </h3><br><p>  Pour Ãªtre honnÃªte, ce travail doit Ãªtre soulignÃ© comme une tÃ¢che distincte.  Ã‰tant donnÃ© que les capacitÃ©s actuelles du systÃ¨me vous suffisent et que vous n'avez rien Ã  faire, ou que vous savez exactement quoi et combien vous devez accÃ©lÃ©rer. </p><br><p>  Tout rentre dans cette catÃ©gorie: de la correction inoffensive de N + 1 Ã  de sÃ©rieuses accÃ©lÃ©rations dues aux changements d'algorithmes de fonctionnement.  Tout le problÃ¨me est que la Â«paritÃ©Â» des bogues est toujours rapide.  Voici un exemple: dans une transaction, les donnÃ©es de la base de donnÃ©es sont transmises et dans la mÃªme transaction, une tÃ¢che est dÃ©finie dans Sidekiq;  La file d'attente de Sidekiq dans Redis et la transaction ne s'y applique pas;  lorsque la vitesse de la file d'attente augmente, la tÃ¢che est parfois exÃ©cutÃ©e avant la validation des donnÃ©es;  Vous pouvez imaginer vous-mÃªme les consÃ©quences et le processus de dÃ©bogage. </p><br><h3 id="za-refaktoring">  Pour refactoring! </h3><br><p>  Imaginez que vous utilisiez le service de nettoyage d'appartement.  Ils sont venus et ont commencÃ© Ã  nettoyer, mais, en chemin, ils ont dÃ©placÃ© tous les meubles de l'appartement et ont dÃ©crit les rideaux du salon Ã  la baignoire avec l'argument Â«dans de telles conditions, la femme de mÃ©nage Ã©tait plus agrÃ©able de faire son travail.Â»  Image de "WTF?!"  vous pouvez l'imaginer vous-mÃªme. </p><br><p>  J'espÃ¨re que vous comprenez que vous devez penser non pas Ã  vous-mÃªme, mais Ã  qui vous le faites. </p><br><h2 id="smirenie-i-prinyatie">  HumilitÃ© et acceptation </h2><br><p>  En conclusion, il est nÃ©cessaire de donner un Â«manuelÂ» sur ce qu'il faut faire avant la refactorisation.  Certes, ce n'est pas une liste TODO, mais plutÃ´t une liste de faits avec lesquels vous devez vous rÃ©concilier et accepter ou ne pas agir. </p><br><ol><li>  J'augmente le nombre de bogues dans le projet et je peux obtenir un tambourin pour cela. </li><li>  Je deviens propriÃ©taire du code refactorisÃ© et toutes les questions Ã  ce sujet me seront d'abord envoyÃ©es. </li><li>  Par mes actions, je ne produis rien de valeur pour l'utilisateur final. </li></ol><br><p>  Une petite explication. </p><br><ol><li>  Toute modification du code a une chance non nulle de gÃ©nÃ©rer un bogue.  Et puisque cette action n'est pas liÃ©e Ã  la fonctionnalitÃ© ultime, vous produisez simplement des bugs sans gÃ©nÃ©rer de valeurs fondamentales.  Il est bon dâ€™Ãªtre conscient de cela et de ne pas prÃ©tendre Ãªtre des tuyaux quand ils vous posent des questions. </li><li>  Des excuses comme "anotate previous" et similaires sont trÃ¨s misÃ©rables, car dans le mÃªme github / gitlab il n'y a pas une telle fonctionnalitÃ©.  De plus, l'auteur prÃ©cÃ©dent a confirmÃ© que tout fonctionne dans sa configuration, et il n'est pas responsable de vos modifications et perd une partie de l'image de ce qui se passe.  Plus prÃ©cisÃ©ment, vous le lui enlevez avec la responsabilitÃ©. </li><li>  L'utilisateur ne se soucie vraiment pas de la refactorisation, il s'intÃ©resse Ã  la stabilitÃ© et aux fonctionnalitÃ©s, et la refactorisation ne concerne pas cela. </li></ol><br><p>  Et encore: si vous n'Ãªtes pas d'accord avec au moins un des points - ne commencez pas la refactorisation.  Mieux lire Habr, Lurk, boire du thÃ© ou, au pire, entailler la prochaine fonctionnalitÃ© du tableau de bord. </p><br><h2 id="konec">  La fin </h2><br><p>  Ne jugez pas strictement.  Si possible, critiquez de maniÃ¨re constructive.  Et pensez toujours au but de vos actions.  Je vous remercie </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr415369/">https://habr.com/ru/post/fr415369/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr415359/index.html">PHP 8: Ã  quoi s'attendre. Lettre de Zeev Surasky</a></li>
<li><a href="../fr415361/index.html">Firefox vÃ©rifiera les mots de passe compromis en utilisant la mÃ©thode d'anonymisation k</a></li>
<li><a href="../fr415363/index.html">L'Inde augmentera la production d'Ã©nergie verte de 100 GW d'ici 2022</a></li>
<li><a href="../fr415365/index.html">C'est parti! Ou un peu sur la conception d'une interface de sÃ©lection de date</a></li>
<li><a href="../fr415367/index.html">Et si les extraterrestres s'avÃ©raient Ãªtre des machines Ã  intelligence artificielle?</a></li>
<li><a href="../fr415371/index.html">ConfidentialitÃ© des crypto-monnaies</a></li>
<li><a href="../fr415373/index.html">NumPy en Python. Partie 4</a></li>
<li><a href="../fr415375/index.html">Mouton cachÃ© et archÃ©ologie typographique</a></li>
<li><a href="../fr415377/index.html">Fonctionnement de JS: classes et hÃ©ritage, transpilation dans Babel et TypeScript</a></li>
<li><a href="../fr415381/index.html">Jouer avec Kubernetes - service pour une connaissance pratique des K8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>