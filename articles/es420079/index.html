<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîΩ üò© ü§õüèø Crear hierba interactiva en Unreal Engine üíè üë®‚ÄçüöÄ üòÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hasta hace poco, la hierba en los juegos generalmente se indicaba mediante una textura en el suelo, en lugar de representar tallos individuales. Pero ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crear hierba interactiva en Unreal Engine</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420079/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/d_/sg/dgd_sg8pss1hh54majrmgysw5fi.gif"></div><br>  Hasta hace poco, la hierba en los juegos generalmente se indicaba mediante una textura en el suelo, en lugar de representar tallos individuales.  Pero con un aumento en el poder del hierro, se hizo posible producir hierba.  Se pueden ver grandes ejemplos de esta representaci√≥n en juegos como <i>Horizon Zero Dawn</i> y <i>The Legend of Zelda: Breath of the Wild</i> .  En estos juegos, el jugador puede recorrer los prados de c√©sped y, lo que es m√°s importante, el c√©sped <i>responde</i> a las acciones del jugador. <br><br>  Afortunadamente, crear un sistema as√≠ no es muy dif√≠cil.  De hecho, ¬°el art√≠culo te ense√±ar√° exactamente eso!  En este tutorial aprender√° lo siguiente: <br><br><ul><li>  Cree un campo vectorial usando un sistema de captura de escena y part√≠culas </li><li>  Doblar la hierba de un jugador bas√°ndose en un campo vectorial </li></ul><a name="habracut"></a><blockquote>  <em>Nota:</em> este tutorial asume que ya conoce los conceptos b√°sicos de trabajar con Unreal Engine.  Si eres nuevo en Unreal Engine, echa un vistazo a nuestra serie de diez partes de tutoriales de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Unreal Engine para principiantes</a> .  En particular, consulte el tutorial de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Particle Systems</a> para saber c√≥mo usar Cascade en este tutorial. </blockquote><blockquote>  <em>Nota:</em> este tutorial es parte de una serie de tres tutoriales sobre c√≥mo trabajar con objetivos de renderizado: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1: dibujar con objetivos de renderizado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2: nieve deformable</a> </li><li>  Parte 3: c√©sped interactivo </li></ul></blockquote><h2>  Llegar al trabajo </h2><br>  Comencemos descargando los materiales para este tutorial (puede descargarlos <a href="">desde aqu√≠</a> ).  Descompr√≠malos, vaya a <em>InteractiveGrassStarter</em> y abra <em>InteractiveGrass.uproject</em> .  Ver√° un peque√±o campo de hierba que ser√° el tema de este tutorial.  Tambi√©n cre√© un widget para mostrar el objetivo de renderizado de la captura de escena. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fa/004/60f/8fa00460f2e914dedb752443b566d226.gif"></div><br><br>  Antes de comenzar, debe estudiar el tutorial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sobre</a> c√≥mo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">crear huellas en la nieve</a> , ya que omitir√© parte de la informaci√≥n.  Vale la pena considerar que la captura y la proyecci√≥n tambi√©n se usan en este tutorial.  Para ahorrar tiempo, prepar√© una captura de planos, similar al plano del tutorial sobre las pistas en la nieve. <br><br>  Para comenzar, veamos otra forma de crear c√©sped interactivo.  La forma m√°s com√∫n es transferir las coordenadas del jugador al material de hierba y usar una m√°scara esf√©rica para doblar la hierba en un cierto radio del jugador. <br><br>  Aunque este enfoque es bastante bueno, no se adapta bien cuando queremos agregar m√°s actores a la hierba.  Para cada actor que agregue, deber√° agregar otro par√°metro de coordenadas y una m√°scara esf√©rica al material.  Un m√©todo m√°s escalable es usar un <em>campo vectorial</em> . <br><br><h2>  ¬øQu√© es un campo vectorial? </h2><br>  Un campo vectorial es solo una textura, cada p√≠xel corresponde a una direcci√≥n.  Si sol√≠a trabajar con mapas de flujo, entonces son similares.  Pero en lugar de mover UV, usaremos el contacto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desplazamiento de posici√≥n mundial</a> para mover los v√©rtices.  A diferencia de la soluci√≥n con una m√°scara esf√©rica, para obtener la direcci√≥n de flexi√≥n, es suficiente que los materiales muestreen el campo vectorial solo <i>una vez</i> . <br><br>  Veamos c√≥mo puedes guardar direcciones en una textura.  Mira esta cuadr√≠cula: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/553/651/6d2/5536516d26f67d5e2e5928db30b1608a.jpg"></div><br>  Digamos que el punto rojo es el objeto que queremos mover.  Si lo movemos a la esquina inferior derecha, ¬øqu√© vector denotar√° este movimiento?  Si respondi√≥ <em>(1, 1)</em> , ¬°tiene raz√≥n!  Como probablemente sepa, tambi√©n puede representar vectores como flores, y as√≠ guardarlos en textura.  Insertemos este vector en el selector de color Unreal y veamos qu√© color devuelve. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b21/5d6/59b/b215d659be2f7f813add96b32fcabae4.jpg"></div><br>  Como puede ver, la direcci√≥n <em>(1, 1)</em> vuelve amarilla.  Esto significa que si queremos doblar la hierba en la direcci√≥n de los ejes XY positivos, entonces tendremos que usar este color de textura.  Veamos ahora los colores de todos los vectores. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbf/302/8bd/fbf3028bd6456dac8ca27a9c1bf2146d.jpg"></div><br>  El cuadrado inferior derecho se ve bastante bien porque tiene gradientes en ambos ejes.  Esto significa que podemos almacenar cualquier vector en este cuadrante como un color, porque cada vector tiene un color √∫nico. <br><br>  Pero hay un problema con los otros tres cuadrantes.  Solo tenemos un gradiente a lo largo de un eje, o ning√∫n gradiente en absoluto.  Esto significa que varios vectores tendr√°n el mismo color.  Por ejemplo, no podemos distinguir entre los vectores <em>(-1, 1)</em> y <em>(0, 1)</em> . <br><br>  Estos tres cuadrantes no tienen colores √∫nicos para cada vector porque solo podemos representar colores usando valores del 0 al 1. Sin embargo, estos tres cuadrantes usan valores negativos fuera de este rango. <br><br>  La soluci√≥n es redistribuir los vectores para que todos se ajusten en el intervalo de 0 a 1. Esto se puede hacer multiplicando el vector por <em>0.5</em> y sumando <em>0.5</em> .  Aqu√≠ hay una visualizaci√≥n de lo que obtenemos: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c6/334/31a/1c633431aa88cde88b2f2af01ede9f89.gif"></div><br>  Ahora cada vector tiene un color √∫nico.  Cuando necesitamos usarlo para los c√°lculos, simplemente lo redistribuimos de nuevo al intervalo de -1 a 1. Aqu√≠ hay algunos colores y las direcciones correspondientes despu√©s de la redistribuci√≥n: <br><br><ul><li>  <em>(0, 0):</em> negativo X e Y </li><li>  <em>(0.5, 0.5):</em> sin movimiento </li><li>  <em>(0, 1):</em> X negativo e Y positivo </li><li>  <em>(1, 0):</em> X positivo e Y negativo </li></ul><br>  Ahora aprendamos c√≥mo crear un campo vectorial en Unreal. <br><br><h3>  Crear un campo vectorial </h3><br>  A diferencia de crear huellas en la nieve, no realizaremos la captura de la forma de los objetos.  En cambio, pintaremos en el objetivo de renderizado con pinceles.  Estas ser√°n solo im√°genes del campo vectorial seleccionado.  Los llamar√© <em>pinceles de direcci√≥n</em> . <br><br>  En lugar de dibujar en el objetivo de renderizado con romos, podemos usar <em>part√≠culas</em> .  Las part√≠culas mostrar√°n un pincel de direcciones y las emitir√° el jugador.  Para crear un campo vectorial, solo necesitamos usar la captura de escena y capturar solo part√≠culas.  La ventaja de este m√©todo es que crear trazas es muy simple.  Adem√°s, le permite administrar f√°cilmente propiedades como la duraci√≥n del almacenamiento de pistas y su tama√±o.  Adem√°s, las part√≠culas crean trazas temporalmente persistentes, porque existen despu√©s de abandonar el √°rea de captura y volver a ella. <br><br>  A continuaci√≥n hay algunos ejemplos de pinceles direccionales que podemos usar, as√≠ como su efecto sobre el c√©sped.  Observe que en el siguiente ejemplo, las part√≠culas son invisibles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06a/7ac/976/06a7ac9766e63da84aec88bca2338b9a.gif"></div><br>  Para comenzar, creemos un material que muestre un pincel de direcci√≥n. <br><br><h2>  Crear material para indicaciones </h2><br>  Hay dos formas de crear un pincel de direcci√≥n: <br><br><ol><li>  <em>Matem√°tica: las</em> direcciones y la forma se establecen dentro del material.  Su ventaja es que no requiere software de terceros y es conveniente para formularios simples. </li><li>  <em>Conversi√≥n de mapa normal:</em> cree un mapa normal de las direcciones y formas deseadas.  Para convertir el mapa en un campo vectorial adecuado, es suficiente que eliminemos el canal azul.  La ventaja de este m√©todo es que puedes crear formas complejas muy f√°cilmente.  A continuaci√≥n se muestra un ejemplo de un pincel que ser√° dif√≠cil de crear matem√°ticamente. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddd/e44/0e5/ddde440e52ce5e3bbc6cdece65815265.jpg"></div><br>  Para este tutorial crearemos un pincel matem√°ticamente.  Vaya a la carpeta <em>Materiales</em> y abra <em>M_Direction</em> .  Tenga en cuenta que el modelo de sombreado <em>Apagado est√°</em> seleccionado para este material.  Esto es importante porque permite la captura de una escena para capturar part√≠culas sin afectarlas. <br><br>  Para no complicarnos, crearemos un material que har√° que la hierba se aleje del centro de la part√≠cula.  Para hacer esto, cree el siguiente esquema: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/826/06f/fc1/82606ffc1df0425a75ef17c334a23470.jpg"></div><br>  Ahora necesitamos redistribuir.  Para hacer esto, agregue los nodos seleccionados y conecte todo de la siguiente manera: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02b/eb0/98a/02beb098a304fb3b9ff13a3852c664cd.jpg"></div><br>  Ahora demos al pincel una forma redonda.  Para hacer esto, agregue los nodos seleccionados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b97/4bf/702/b974bf7024f3487a8161e279ad3fb350.jpg"></div><br>  <em>RadialGradientExponential</em> controla el tama√±o y la nitidez de la circunferencia del c√≠rculo.  Multiplicarlo por <em>Color de part√≠cula le</em> permite controlar la opacidad de las part√≠culas del sistema de part√≠culas.  Discutir√© esto con m√°s detalle en la siguiente secci√≥n. <br><br>  As√≠ es como se ve el pincel: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/529/d6e/349/529d6e34937588676b1a20d03fdac107.jpg"></div><br>  Haga clic en <em>Aplicar</em> y cierre el material.  Ahora que hemos creado el material, es hora de embarcarse en un sistema de trazas de part√≠culas. <br><br><h2>  Crear un sistema de trazas de part√≠culas </h2><br>  Vaya a la carpeta <em>ParticleSystems</em> y abra <em>PS_GrassTrail</em> .  Para ahorrar tiempo, ya he creado todos los m√≥dulos necesarios. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6aa/008/5ee/6aa0085ee0867456e29f574511b43ec2.jpg"></div><br>  As√≠ es como cada m√≥dulo afecta las huellas de c√©sped: <br><br><ul><li>  <em>Engendro: la</em> frecuencia de creaci√≥n afecta la suavidad de las pistas.  Si las pistas parecen intermitentes, entonces debe aumentar la frecuencia de creaci√≥n.  En este tutorial dejaremos el valor predeterminado (20). </li><li>  <em>Vida</em> √∫til <em>:</em> la vida √∫til del sendero hasta que la hierba vuelva a su estado original. </li><li>  <em>Tama√±o inicial:</em> tama√±o de traza </li><li>  <em>Color sobre la vida:</em> dado que usamos Color de part√≠cula en el material, puede controlar la opacidad aqu√≠.  Tambi√©n puede cambiar la curva alfa para controlar la desaparici√≥n de la pista.  Por ejemplo, puede elegir desaparici√≥n lineal, entrada y / o salida.  En este tutorial, dejaremos la configuraci√≥n predeterminada, es decir, p√©rdida lineal. </li><li>  <em>Eje de bloqueo: se</em> usa para dirigir part√≠culas hacia la captura de escena </li><li>  <em>Rotaci√≥n inicial: se</em> utiliza para garantizar que las part√≠culas est√©n orientadas a lo largo de los ejes correctos (m√°s sobre esto a continuaci√≥n) </li></ul><br>  Primero necesitamos establecer el material.  Seleccione el m√≥dulo <em>Requerido</em> y establezca <em>Material</em> en <em>M_Direction</em> .  Tambi√©n establezca el <em>Modo de clasificaci√≥n</em> en <em>PSORTMODE Edad m√°s reciente primero</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb0/a43/fa3/bb0a43fa369abea85bc7a9ff6a80b06e.jpg"></div><br>  Este modo de clasificaci√≥n le permite renderizar nuevas part√≠culas sobre las antiguas.  Si esto no se hace, entonces no es nuevo, pero las part√≠culas viejas afectar√°n la hierba. <br><br>  El siguiente es la duraci√≥n de la traza.  Seleccione el m√≥dulo <em>Lifetime</em> y establezca <em>Constant</em> en <em>5</em> .  Gracias a esto, el rastro desaparecer√° en cinco segundos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/505/d9d/b73/505d9db732f69d4b68b4079bd330553c.jpg"></div><br>  Ahora pasemos al tama√±o de la traza.  Seleccione el m√≥dulo <em>Tama√±o inicial</em> y establezca la <em>Constante</em> en <em>(150, 150, 0)</em> .  Debido a esto, cada part√≠cula cubrir√° un √°rea de 150 √ó 150. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/231/dba/9c5/231dba9c5421f8bdd79aba23f8def0cd.jpg"></div><br>  Ahora tenemos que hacer que se vea en la direcci√≥n de capturar la escena.  Dado que la escena se captura desde arriba, las part√≠culas deben mirar en la direcci√≥n del eje Z positivo. Para hacer esto, seleccione el m√≥dulo <em>Bloquear eje</em> y configure <em>las Banderas de bloqueo del eje</em> en <em>Z.</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b74/b2b/69c/b74b2b69c7d38785c7ad78d8ec6f250e.jpg"></div><br>  Finalmente, necesitamos establecer la rotaci√≥n de las part√≠culas.  Actualmente, los colores del pincel no est√°n alineados con la direcci√≥n que representan.  Esto sucedi√≥ porque, por defecto, el sistema de part√≠culas se aplica con una rotaci√≥n de 90 grados.  Para solucionar esto, seleccione el m√≥dulo de <em>Rotaci√≥n inicial</em> y establezca el valor <em>Constante</em> en <em>-0.25</em> .  Esto rotar√° las part√≠culas 90 grados en sentido antihorario. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/41d/a09/000/41da09000032c1023438b15a3a74f341.jpg"></div><br>  Y eso es todo lo que necesitamos para el sistema de part√≠culas, as√≠ que cerr√©moslo. <br><br>  Luego, necesitamos unir un sistema de part√≠culas a lo que se supone que crea trazas.  En nuestro caso, necesitamos adjuntarlo al personaje del jugador. <br><br><h3>  Fijaci√≥n del sistema de part√≠culas </h3><br>  Vaya a <em>Personajes \ Maniqu√≠</em> y abra <em>BP_Maniqu√≠</em> .  A continuaci√≥n, cree el componente <em>Partice System</em> y <em>as√≠gnele el</em> nombre <em>GrassParticles</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b72/9e0/811/b729e08111d25a301682968f1d878da0.jpg"></div><br>  Luego necesitamos definir un sistema de part√≠culas.  Vaya al panel Detalles y establezca <em>Part√≠culas \ Plantilla</em> en <em>PS_GrassTrail</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/491/45d/7d3/49145d7d362eb92443a8cfe93bd8a023.jpg"></div><br>  Ser√≠a extra√±o si el jugador pudiera ver la pista en el juego, por lo que vale la pena ocultarla.  Para hacer esto, active <em>Rendering \ Owner No See</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/de5/7a8/ad4de57a8d9f0eeee254a58c0de8e8d6.jpg"></div><br>  Dado que el sistema de part√≠culas est√° conectado al jugador (propietario), el jugador no lo ver√°, pero ser√° visible para todo lo dem√°s. <br><br>  Haga clic en <em>Compilar</em> y luego en <em>Reproducir</em> .  Tenga en cuenta que las part√≠culas no aparecen para la c√°mara del jugador, sino que se muestran en el objetivo de renderizado. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c9d/4d5/4ac/c9d4d54ac998a6aa80da5887dc199b23.gif"></div><br>  Hasta ahora, la captura de escena est√° configurada para capturar <i>todo</i> .  Obviamente, esto no nos conviene, porque solo las part√≠culas afectan la hierba.  En la siguiente secci√≥n, aprenderemos c√≥mo capturar solo part√≠culas. <br><br><h2>  Captura de part√≠culas </h2><br>  Si capturamos part√≠culas ahora, realizaremos flexiones innecesarias en √°reas sin part√≠culas.  Esto se debe a que el color de fondo del objetivo de renderizado es negro.  La flexi√≥n ocurre porque el negro denota un movimiento hacia los ejes XY negativos (despu√©s de la redistribuci√≥n).  Para que las √°reas vac√≠as no contengan movimiento, debemos hacer que el objetivo de fondo se renderice <em>(0.5, 0.5, 0)</em> .  La forma m√°s f√°cil de hacer esto es crear un gran avi√≥n y adjuntarlo al jugador. <br><br>  Primero, cree material para el fondo.  Regrese al Navegador de contenido y abra <em>Materials \ M_Background</em> .  Luego, conecte la constante <em>(0.5, 0.5, 0)</em> con <em>Color emisivo</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31b/46f/306/31b46f306ba4f2a0df310d36e54a000b.jpg"></div><br><blockquote>  <em>Nota: al</em> igual que con el material de part√≠culas, cualquier material que capturemos debe tener un modelo de <em>sombreador apagado</em> . </blockquote><br>  Haga clic en <em>Aplicar</em> y cierre el material.  Regrese a <em>BP_Mannequin</em> y luego cree un nuevo componente <em>Plano</em> .  N√≥mbralo <em>Fondo</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc4/0aa/1ff/bc40aa1ffbb655e576ce999318f4342b.jpg"></div><br>  A continuaci√≥n, establezca las siguientes propiedades: <br><br><ul><li>  <em>Ubicaci√≥n:</em> (0, 0, -5000).  Colocamos el plano tan bajo que no se superpone a ninguna part√≠cula. </li><li>  <em>Escala:</em> (100, 100, 1).  Entonces escalamos a un tama√±o suficiente para cubrir toda el √°rea de captura. </li><li>  <em>Material:</em> M_Fondo </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6d/824/d3b/e6d824d3b427cff5e136a2861eb02bed.jpg"></div><br>  Al igual que con las part√≠culas, ser√≠a extra√±o si el jugador viera un enorme avi√≥n amarillo debajo.  Para ocultarlo, active <em>Renderizado \ Propietario sin ver</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cad/164/7df/cad1647dfe62bb1e29733ac8e6d6b712.jpg"></div><br>  Ahora que hemos configurado el fondo, es hora de capturar las part√≠culas.  Podemos hacer esto agregando un sistema de part√≠culas a la <em>lista</em> de <em>solo</em> captura de la escena.  Esta es una lista de componentes que capturar√°n la captura de escena. <br><br><h3>  Uso de la lista de solo visualizaci√≥n </h3><br>  Antes de que podamos agregar a la lista de solo exhibici√≥n, necesitamos una forma de obtener todos los actores que afectan la hierba.  Una forma de obtenerlos es usar <em>etiquetas</em> .  Las etiquetas son cadenas simples que pueden asignarse a actores y componentes.  Luego puede usar el nodo Obtener todos los actores con etiqueta para obtener todos los actores con la etiqueta correspondiente. <br><br>  Como el actor del jugador debe influir en la hierba, necesita una etiqueta.  Para agregar una etiqueta, haga clic en el bot√≥n <em>Valores predeterminados de clase</em> .  Luego cree una nueva etiqueta en <em>Actor \ Tags</em> y <em>as√≠gnele el</em> nombre <em>GrassAffector</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/759/df5/711/759df57115fd0a2172f9c9c4c5b0505d.jpg"></div><br>  Dado que solo los <i>componentes</i> se pueden transferir a la lista de solo presentaci√≥n, debemos agregar etiquetas a los <i>componentes</i> que afectan el c√©sped.  Seleccione el componente <em>GrassParticles</em> y agregue una nueva etiqueta ubicada en la secci√≥n <em>Etiquetas</em> .  <em>N√≥mbrelo GrassAffector</em> tambi√©n (no es <i>necesario</i> usar esta etiqueta).  Repita lo mismo para el componente de <em>fondo</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f4/3f4/05a/8f43f405a8cf96083d5df56e54d21576.jpg"></div><br>  Ahora necesitamos agregar componentes que influyan en el c√©sped a la lista de captura de escenas de solo presentaci√≥n.  Haga clic en <em>Compilar</em> y cierre <em>BP_Mannequin</em> .  Luego abra <em>Blueprints \ BP_Capture</em> .  Vaya a <em>Evento BeginPlay</em> y agregue los nodos resaltados.  Tambi√©n aseg√∫rese de que los pines marcados est√©n conectados. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d9/e82/3cf/7d9e823cffefede4f0273a81b9363ecb.jpg"></div><br>  Este circuito recorrer√° a todos los actores con la etiqueta <em>GrassAffector</em> .  Despu√©s de lo cual verificar√° si el actor tiene componentes con esta etiqueta y los agregar√° a la lista de solo exhibici√≥n. <br><br>  A continuaci√≥n, debemos decirle a la captura de escena que use solo la lista de solo presentaci√≥n.  Seleccione el componente <em>SceneCapture</em> y vaya a la secci√≥n <em>Captura de escena</em> .  Establezca el <em>Modo de renderizado primitivo</em> para <em>usar ShowOnly List</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/675/ecd/6eb/675ecd6eb2a1c867734b920bbeaeedd4.jpg"></div><br>  Haga clic en <em>Compilar</em> y cierre el plano.  Si hace clic en <em>Reproducir</em> , ver√° que el objetivo de renderizado ahora solo captura part√≠culas y el plano de fondo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee0/a1f/3d7/ee0a1f3d7bb9687f81ec2e7d0faaf61b.gif"></div><br>  En la siguiente secci√≥n, llegamos a lo que esper√°bamos.  ¬°Es hora de ense√±ar a la hierba a doblarse! <br><br><h2>  Doblar la hierba </h2><br>  Primero tenemos que proyectar el objetivo de renderizado en el c√©sped.  Vaya a la carpeta <em>Materiales</em> y abra <em>M_Grass</em> .  Luego cree los nodos que se muestran a continuaci√≥n.  Establece la textura en <em>RT_Capture</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec0/fd7/4e6/ec0fd74e6e18c21da2d9b647c878613c.jpg"></div><br>  Como redistribuimos los colores en el intervalo de 0 a 1, antes de usarlos, debemos redistribuir los colores en el intervalo de -1 a 1. Para hacer esto, agregue los nodos resaltados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25d/dc7/0be/25ddc70be17e726bd3089c21ee5be21e.jpg"></div><br>  Ahora que tenemos la direcci√≥n de flexi√≥n, necesitamos alguna forma de rotar el c√©sped en esa direcci√≥n.  Afortunadamente, hay un nodo llamado <em>RotateAboutAxis</em> para esto.  Vamos a crearlo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a92/4a0/127/a924a0127868686cf2616c8d994e9b5a.jpg"></div><br>  Comencemos con el contacto <em>NormalizedRotationAxis</em> .  Como su nombre lo indica, este es el eje alrededor del cual girar√° el v√©rtice.  Para calcular, solo necesitamos un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">producto vectorial de la</a> direcci√≥n de flexi√≥n por <em>(0, 0, -1)</em> .  Para hacer esto, necesitamos agregar los nodos seleccionados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c3/898/ece/5c3898ecee9d7a4fd9ea75e53072acd1.jpg"></div><br>  Tambi√©n debemos especificar el <em>√°ngulo de rotaci√≥n</em> , es decir, la cantidad de rotaci√≥n del v√©rtice en relaci√≥n con el punto de rotaci√≥n.  Por defecto, el valor debe estar entre 0 y 1, donde 0 es 0 grados y 1 es 360 grados.  Para obtener el √°ngulo de rotaci√≥n, podemos usar la longitud de la direcci√≥n de flexi√≥n, multiplicada por la rotaci√≥n m√°xima. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d4/171/800/6d417180067018db8df09f878251f6e8.jpg"></div><br>  Multiplicar por una rotaci√≥n m√°xima de <em>0.2</em> significar√° que el √°ngulo de rotaci√≥n m√°ximo es de <em>72</em> grados. <br><br>  Calcular <em>PivotPoint</em> es un poco m√°s dif√≠cil, porque una sola malla de hierba contiene varios tallos.  Esto significa que no podemos usar algo como el nodo <em>Posici√≥n</em> del <em>objeto</em> , porque devolver√° un solo punto para todos los tallos de hierba. <br><br>  Idealmente, debe usar un editor 3D de terceros para guardar puntos de pivote dentro de los canales UV.  Pero para este tutorial, solo aproximamos el punto de pivote.  Esto puede hacerse movi√©ndose de arriba <em>hacia abajo</em> a un cierto desplazamiento. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f47/6ac/cdf/f476accdf57bca37d5bd7994f53b6b47.jpg"></div><br>  Para hacer esto, agregue los nodos seleccionados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/05a/1bd/208/05a1bd2082b7044a1535aaf38cf33264.jpg"></div><br>  En este tutorial, el c√©sped tiene aproximadamente <em>80</em> unidades de altura, por lo que establec√≠ este valor para <em>PivotOffset</em> . <br><br>  A continuaci√≥n, debemos realizar dos m√°scaras.  La primera m√°scara asegura que la ra√≠z del tallo no se mueva.  La segunda m√°scara asegura que ning√∫n campo vectorial act√∫e sobre el c√©sped fuera del √°rea de captura. <br><br><h3>  Enmascaramiento </h3><br>  Para este tutorial, configur√© los colores de la parte superior de la hierba para que los v√©rtices inferiores sean negros y los v√©rtices superiores sean blancos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/199/0ff/45b/1990ff45be26b99bf5330a0d2817e102.jpg"></div><br>  Para enmascarar las ra√≠ces, simplemente multiplicamos el resultado de <em>RotateAboutAxis</em> por el nodo <em>Vertex Color</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/522/568/0fc/5225680fcb4fd4bedf2f7ec7a49ebb58.jpg"></div><br>  Para enmascarar el c√©sped fuera del √°rea de captura, multiplicamos el resultado anterior por el nodo seleccionado: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37b/da2/e95/37bda2e954f8e160ab3b0c80d5269acf.jpg"></div><br>  Haga clic en <em>Aplicar</em> y cierre el material.  ¬°Haz clic en <em>Jugar</em> y corre por el c√©sped para dejar huellas en √©l! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1dc/058/185/1dc058185c158d1ef243b04f5d041174.gif"></div><br><h2>  ¬øA d√≥nde ir despu√©s? </h2><br>  El proyecto terminado se puede descargar <a href="">desde aqu√≠</a> . <br><br>  Aunque el m√©todo que se muestra en el tutorial funciona muy bien para objetos simples como el c√©sped, no es suficiente cuando se usan objetos que requieren m√°s dinamismo.  Una soluci√≥n parcial al problema es usar las versiones f√≠sicas del follaje.  Consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta publicaci√≥n</a> sobre follaje interactivo para obtener m√°s informaci√≥n. <br><br>  Finalmente, quiero agradecer a Deathrey de la comunidad de Unreal Engine por la punta de este m√©todo de part√≠culas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420079/">https://habr.com/ru/post/es420079/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es420069/index.html">Richard Hamming: Cap√≠tulo 20. Modelado - III</a></li>
<li><a href="../es420071/index.html">Diferentes precios para almacenes en multi-almac√©n. Refinamiento 1C-Bitrix</a></li>
<li><a href="../es420073/index.html">The Art of Management: A Review of the Best Reports with Teamlead Conf 2018. Part 2</a></li>
<li><a href="../es420075/index.html">Este ingenioso mapa explica c√≥mo encaja todo en f√≠sica.</a></li>
<li><a href="../es420077/index.html">Nuevas oportunidades de comercio en l√≠nea</a></li>
<li><a href="../es420081/index.html">Instale Archlinux con cifrado de sistema completo y LVM en LUKS</a></li>
<li><a href="../es420083/index.html">Acci√≥n ideal para el Asistente de Google: 8 lecciones del Hackathon de Mosc√∫</a></li>
<li><a href="../es420085/index.html">Reconocimiento de objetos y emociones humanas con el Kit Firebase ML</a></li>
<li><a href="../es420087/index.html">Esta es una publicaci√≥n con informes y videos en MS SQL Server.</a></li>
<li><a href="../es420089/index.html">Robomobiles: platones y salchichas b√°varas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>