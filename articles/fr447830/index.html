<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§Ωüèº üëáüèø üßîüèΩ Le code est vivant et mort. Troisi√®me partie. Code comme texte ü§∞üèø üë° üë®üèø‚Äçü§ù‚Äçüë®üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous devez lire le code pour accompagner le programme, et plus il est facile de le faire, plus il ressemble √† un langage naturel - alors vous y entrer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le code est vivant et mort. Troisi√®me partie. Code comme texte</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447830/"><p>  Vous devez lire le code pour accompagner le programme, et plus il est facile de le faire, plus il ressemble √† un langage naturel - alors vous y entrerez plus rapidement et vous vous concentrerez sur l'essentiel. </p><br><p> Dans les deux derniers articles, j'ai montr√© que des mots soigneusement s√©lectionn√©s aident √† mieux comprendre l'essence de ce qui est √©crit, mais y penser ne suffit pas, car chaque mot existe sous deux formes: comme en soi et comme partie d'une phrase.  R√©p√©ter <code>CurrentThread</code> ne se r√©p√®te pas encore tant que nous ne l'avons pas <em>lu</em> dans le contexte de <code>Thread.CurrentThread</code> . </p><br><p>  Ainsi, guid√©s par des notes et des m√©lodies simples, nous allons maintenant voir ce qu'est la musique. </p><a name="habracut"></a><br><h2 id="oglavlenie-cikla">  Table des mati√®res du cycle </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les objets</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Actions et propri√©t√©s</a> </li><li>  Code comme texte </li></ol><br><h2 id="kod-kak-tekst">  Code comme texte </h2><br><p>  La plupart des interfaces <em>fluides</em> sont con√ßues en mettant l'accent sur l'ext√©rieur plut√¥t que sur l'int√©rieur, de sorte qu'elles sont si faciles √† lire.  Bien s√ªr, pas gratuitement: le contenu s'affaiblit dans un sens.  Donc, disons, dans le package <code>FluentAssertions</code> , <code>FluentAssertions</code> pouvez √©crire: <code>(2 + 2).Should().Be(4, because: "2 + 2 is 4!")</code> , Et, par rapport √† la lecture, <code>because</code> air √©l√©gant, mais √† l'int√©rieur du <code>Be()</code> , le param√®tre <code>error</code> ou <code>errorMessage</code> est plut√¥t <code>errorMessage</code> . </p><br><p>  √Ä mon avis, ces exemptions ne sont pas importantes.  Lorsque nous convenons que le code est un texte, ses composants cessent de s‚Äôappartenir: ils font maintenant partie d‚Äôune sorte d‚Äô <em>Ether</em> universel. </p><br><p>  Je vais montrer par des exemples comment de telles consid√©rations deviennent une exp√©rience. </p><br><h3 id="interlocked"> <code>Interlocked</code> </h3> <br><p>  Permettez-moi de vous rappeler le cas <code>Interlocked</code> , que nous sommes <code>Interlocked.CompareExchange(ref x, newX, oldX)</code> d' <code>Interlocked.CompareExchange(ref x, newX, oldX)</code> √† <code>Atomically.Change(ref x, from: oldX, to: newX)</code> , en utilisant des noms clairs de m√©thodes et de param√®tres. </p><br><h3 id="exceptwith"> <code>ExceptWith</code> </h3> <br><p>  Type <code>ISet&lt;&gt;</code> a une m√©thode appel√©e <code>ExceptWith</code> .  Si vous regardez un appel comme des √©l√©ments, <code>items.ExceptWith(other)</code> , vous ne r√©aliserez pas imm√©diatement ce qui se passe.  Mais il suffit d'√©crire: <code>items.Exclude(other)</code> , car tout se met en place. </p><br><h3 id="getvalueordefault"> <code>GetValueOrDefault</code> </h3> <br><p>  Lorsque vous travaillez avec <code>Nullable&lt;T&gt;</code> appel de <code>x.Value</code> une exception si <code>x</code> est <code>null</code> .  Si vous devez toujours obtenir <code>Value</code> , utilisez <code>x.GetValueOrDefault</code> : c'est soit <code>Value</code> soit la valeur par d√©faut.  Encombrant. </p><br><p>  L'expression <em>¬´ou x, ou la valeur par d√©faut¬ª</em> correspond au <code>x.OrDefault</code> court et √©l√©gant. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? x = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = x.GetValueOrDefault(); <span class="hljs-comment"><span class="hljs-comment">// ,  .  . var b = x.OrDefault(); //  ‚Äî  ,   . var c = x.Or(10); //     .</span></span></code> </pre> <br><p>  Avec <code>OrDefault</code> et <code>Or</code> il y a une chose √† retenir: lorsque vous travaillez avec un op√©rateur <code>.?</code>  vous ne pouvez pas √©crire quelque chose comme <code>x?.IsEnabled.Or(false)</code> , seulement <code>(x?.IsEnabled).Or(false)</code> (en d'autres termes, l'op√©rateur <code>.?</code> annule <em>tout</em> le c√¥t√© droit si <code>null</code> √† gauche). </p><br><p>  Le mod√®le peut √™tre appliqu√© lorsque vous travaillez avec <code>IEnumerable&lt;T&gt;</code> : </p><br><pre> <code class="cs hljs">IEnumerable&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; numbers = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">// . var x = numbers ?? Enumerable.Empty&lt;int&gt;(); //   . var x = numbers.OrEmpty();</span></span></code> </pre> <br><h3 id="mathmin-i-mathmax">  <code>Math.Min</code> et <code>Math.Max</code> </h3><br><p>  Une id√©e avec <code>Or</code> peut √™tre d√©velopp√©e en types num√©riques.  Supposons que vous vouliez prendre le nombre maximum de <code>a</code> et <code>b</code> .  Puis on √©crit: <code>Math.Max(a, b)</code> ou <code>a &gt; b ? a : b</code>  <code>a &gt; b ? a : b</code> .  Les deux options semblent assez famili√®res, mais ne ressemblent n√©anmoins pas √† un langage naturel. </p><br><p>  Vous pouvez le remplacer par: <code>a.Or(b).IfLess()</code> - <em>prenez</em> <code>a</code> <em>ou</em> <code>b</code> <em>si</em> <code>a</code> <em>inf√©rieur</em> .  Convient √† de telles situations: </p><br><pre> <code class="cs hljs">Creature creature = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> damage = ...; <span class="hljs-comment"><span class="hljs-comment">//   . creature.Health = Math.Max(creature.Health - damage, 0); // Fluent. creature.Health = (creature.Health - damage).Or(0).IfGreater(); //   : creature.Health = (creature.Health - damage).ButNotLess(than: 0);</span></span></code> </pre> <br><h3 id="stringjoin"> <code>string.Join</code> </h3> <br><p>  Parfois, vous devez assembler une s√©quence en cha√Æne, en s√©parant les √©l√©ments par un espace ou une virgule.  Pour ce faire, utilisez <code>string.Join</code> , par exemple, comme ceci: <code>string.Join(", ", new [] { 1, 2, 3 }); //  "1, 2, 3".</code> <code>string.Join(", ", new [] { 1, 2, 3 }); //  "1, 2, 3".</code>  . </p><br><p>  Un simple <em>"Diviser le nombre de virgules"</em> peut soudainement devenir <em>"Attacher une virgule √† chaque num√©ro de la liste"</em> - ce n'est certainement pas un code sous forme de texte. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numbers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> [] { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> }; <span class="hljs-comment"><span class="hljs-comment">// ""    ‚Äî  . var x = string.Join(", ", numbers); //    ‚Äî ! var x = numbers.Separated(with: ", ");</span></span></code> </pre> <br><h3 id="regex"> <code>Regex</code> </h3> <br><p>  Cependant, <code>string.Join</code> est assez inoffensif par rapport √† la fa√ßon dont <code>Regex</code> parfois utilis√© de mani√®re incorrecte et √† d'autres fins.  O√π vous pouvez vous d√©brouiller avec un texte simple et lisible, pour une raison quelconque, une entr√©e trop compliqu√©e est pr√©f√©rable. </p><br><p>  Commen√ßons par un simple - d√©terminer qu'une cha√Æne repr√©sente un ensemble de nombres: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">// ,  . var x = Regex.IsMatch(id, "^[0-9]*$"); // . var x = id.All(x =&gt; x.IsDigit()); // ! var x = id.IsNumer();</span></span></code> </pre> <br><p>  Un autre cas est de savoir s'il y a au moins un caract√®re dans la cha√Æne de la s√©quence: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> text = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = Regex.IsMatch(text, @"["&lt;&gt;[]'"); //   . ( .) var x = text.ContainsAnyOf('"', '&lt;', '&gt;', '[', ']', '\''); //  . var x = text.ContainsAny(charOf: @"["&lt;&gt;[]'");</span></span></code> </pre> <br><p>  Plus la t√¢che est compliqu√©e, plus la ¬´configuration¬ª de la solution est difficile: pour diviser un enregistrement de <code>"HelloWorld"</code> en quelques mots <code>"Hello World"</code> , quelqu'un au lieu d'un simple algorithme voulait un monstre: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> text = ...; <span class="hljs-comment"><span class="hljs-comment">//   -   . var x = Regex.Replace(text, "([az](?=[AZ])|[AZ](?=[AZ][az]))", "$1 "); //  . var x = text.PascalCaseWords().Separated(with: " "); //   . var x = text.AsWords(eachStartsWith: x =&gt; x.IsUpper()).Separated(with: " ");</span></span></code> </pre> <br><p>  Sans aucun doute, les expressions r√©guli√®res sont efficaces et universelles, mais je veux comprendre ce qui se passe √† premi√®re vue. </p><br><h3 id="substring-i-remove">  <code>Substring</code> - <code>Substring</code> et <code>Remove</code> </h3><br><p>  Il arrive que vous deviez supprimer une partie de la ligne depuis le d√©but ou la fin, par exemple, du <code>path</code> - l'extension <code>.txt</code> , le cas √©ch√©ant. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = ...; <span class="hljs-comment"><span class="hljs-comment">//    . var x = path.EndsWith(".txt") ? path.Remove(path.Length - "txt".Length) : path; //   . var x = path.Without(".exe").AtEnd;</span></span></code> </pre> <br><p>  Encore une fois, l' <em>action</em> et l' <em>algorithme ont</em> disparu, et une <em>ligne</em> simple <em>a √©t√© laiss√©e sans l'extension .exe √† la fin</em> . </p><br><p>  √âtant donn√© que la m√©thode <code>Without</code> doit renvoyer un certain <code>WithoutExpression</code> , ils en demandent un autre: <code>path.Without("_").AtStart</code> et <code>path.Without("Something").Anywhere</code> .  Il est √©galement int√©ressant qu'une autre expression puisse √™tre construite avec le m√™me mot: <code>name.Without(charAt: 1)</code> - supprime le caract√®re √† l'index 1 et renvoie une nouvelle ligne (utile dans le calcul des permutations).  Et aussi lisible! </p><br><h3 id="typegetmethods"> <code>Type.GetMethods</code> </h3> <br><p>  Pour obtenir des m√©thodes d'un certain type √† l'aide de la r√©flexion, utilisez: </p><br><pre> <code class="cs hljs">Type type = ...; <span class="hljs-comment"><span class="hljs-comment">//   `Get` ,   `|`.     . var x = type.GetMethods(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance); // ,  . `Or`   , . var x = type.Methods(_ =&gt; _.Instance.Public.Or.NonPublic);</span></span></code> </pre> <br><p>  (Il en va de m√™me pour <code>GetFields</code> et <code>GetProperties</code> .) </p><br><h3 id="directorycopy"> <code>Directory.Copy</code> </h3> <br><p>  Toutes les op√©rations avec des dossiers et des fichiers sont souvent g√©n√©ralis√©es √† <code>DirectoryUtils</code> , <code>FileSystemHelper</code> .  Ils impl√©mentent le contournement du syst√®me de fichiers, le nettoyage, la copie, etc.  Mais ici, vous pouvez trouver quelque chose de mieux! </p><br><p>  Affichez le texte <em>"copiez tous les fichiers de 'D: \ Source' vers 'D: \ Target'"</em> dans le code <code>"D:\\Source".AsDirectory().Copy().Files.To("D:\\Target")</code>  <code>AsDirectory()</code> - renvoie <code>DirectoryInfo</code> partir d'une <code>string</code> et <code>Copy()</code> - cr√©e une instance de <code>CopyExpression</code> qui d√©crit une API unique pour la construction d'expressions (vous ne pouvez pas appeler <code>Copy().Files.Files</code> , par exemple).  L'opportunit√© s'ouvre alors de copier non pas tous les fichiers, mais certains: <code>Copy().Files.Where(x =&gt; x.IsNotEmpty)</code> . </p><br><h3 id="getorderbyid"> <code>GetOrderById</code> </h3> <br><p>  Dans le deuxi√®me article, j'ai √©crit que <code>IUsersRepository.GetUser(int id)</code> est redondant, et mieux, <code>IUsersRepository.User(int id)</code> .  Par cons√©quent, dans un <code>IOrdersRepository</code> similaire <code>IOrdersRepository</code> nous n'avons pas <code>GetOrderById(int id)</code> , mais <code>Order(int id)</code> .  Cependant, dans un autre exemple, il a √©t√© sugg√©r√© que la variable d'un tel r√©f√©rentiel soit appel√©e non pas <code>_ordersRepository</code> , mais simplement <code>_orders</code> . </p><br><p>  Les deux modifications sont bonnes en elles-m√™mes, mais elles ne s'additionnent pas dans le contexte de lecture: l'appel de <code>_orders.Order(id)</code> semble verbeux.  Il serait possible de <code>_orders.Get(id)</code> , mais les commandes √©chouent, nous voulons seulement sp√©cifier <em>celui qui a un tel identifiant</em> .  <em>Celui qui</em> est <code>One</code> , donc: </p><br><pre> <code class="cs hljs">IOrdersRepository orders = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = orders.GetOrderById(id); //      : var x = orders.Order(id); //     ,    . var x = orders.One(id); //    : var x = orders.One(with: id);</span></span></code> </pre> <br><h3 id="getorders"> <code>GetOrders</code> </h3> <br><p>  Dans les objets tels que <code>IOrdersRepository</code> , d'autres m√©thodes sont souvent trouv√©es: <code>AddOrder</code> , <code>RemoveOrder</code> , <code>GetOrders</code> .  Les deux premi√®res r√©p√©titions disparaissent, et <code>Add</code> et <code>Remove</code> sont obtenus (avec les entr√©es correspondantes <code>_orders.Add(order)</code> et <code>_orders.Remove(order)</code> ).  Avec <code>GetOrders</code> plus difficile de renommer <code>Orders</code> peu les commandes.  Voyons voir: </p><br><pre> <code class="cs hljs">IOrdersRepository orders = ...; <span class="hljs-comment"><span class="hljs-comment">//   . var x = orders.GetOrders(); //  `Get`,  . var x = orders.Orders(); // ! var x = orders.All();</span></span></code> </pre> <br><p>  Il convient de noter qu'avec l'ancien <code>_ordersRepository</code> r√©p√©titions dans <code>GetOrders</code> ou <code>GetOrderById</code> ne sont pas si visibles, car nous travaillons avec le r√©f√©rentiel! </p><br><p>  Des noms comme <code>One</code> , <code>All</code> conviennent √† de nombreuses interfaces qui en repr√©sentent plusieurs.  Dites, dans l'impl√©mentation bien connue de l'API GitHub - <code>octokit</code> - obtenir tous les r√©f√©rentiels utilisateur ressemble √† <code>gitHub.Repository.GetAllForUser("John")</code> , bien qu'il soit plus logique - <code>gitHub.Users.One("John").Repositories.All</code> .  Dans ce cas, l'obtention d' <em>un</em> r√©f√©rentiel sera, respectivement, <code>gitHub.Repository.Get("John", "Repo")</code> au lieu de l'√©vident <code>gitHub.Users.One("John").Repositories.One("Repo")</code> .  Le deuxi√®me cas semble plus long, mais il est coh√©rent en interne et refl√®te la plate-forme.  De plus, en utilisant des m√©thodes d'extension, il peut √™tre raccourci en <code>gitHub.User("John").Repository("Repo")</code> . </p><br><h3 id="dictionarytrygetvalue"> <code>Dictionary.TryGetValue</code> </h3> <br><p>  L'obtention de valeurs √† partir du dictionnaire est divis√©e en plusieurs sc√©narios qui ne diff√®rent que par <em>ce qui</em> doit √™tre fait si la cl√© n'est pas trouv√©e: </p><br><ul><li>  lancer une erreur ( <code>dictionary[key]</code> ); </li><li>  retourner la valeur par d√©faut (non impl√©ment√©e, mais souvent √©crire <code>GetValueOrDefault</code> ou <code>TryGetValue</code> ); </li><li>  retourner quelque chose d'autre (non impl√©ment√©, mais je m'attendrais √† <code>GetValueOrOther</code> ); </li><li>  √©crire la valeur sp√©cifi√©e dans le dictionnaire et la renvoyer (non impl√©ment√©e, mais <code>GetOrAdd</code> est <code>GetOrAdd</code> ). </li></ul><br><p>  Les expressions convergent au point " <em>prenez un peu de X, ou Y si X ne l'est pas</em> ."  De plus, comme dans le cas de <code>_ordersRepository</code> , nous appellerons la variable de dictionnaire non <code>itemsDictionary</code> , mais <code>items</code> . </p><br><p>  Ensuite, pour la partie <em>"take some X"</em> , un appel des √©l√©ments du formulaire. <code>items.One(withKey: X)</code> id√©al, renvoyant une structure avec quatre <em>terminaisons</em> : </p><br><pre> <code class="cs hljs">Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, Item&gt; items = ...; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = ...; <span class="hljs-comment"><span class="hljs-comment">//  ,   : var x = items.GetValueOrDefault(id); var x = items[id]; var x = items.GetOrAdd(id, () =&gt; new Item()); //    : var x = items.One(with: id).OrDefault(); var x = items.One(with: id).Or(Item.Empty); var x = items.One(with: id).OrThrow(withMessage: $"Couldn't find item with '{id}' id."); var x = items.One(with: id).OrNew(() =&gt; new Item());</span></span></code> </pre> <br><h3 id="assemblygettypes"> <code>Assembly.GetTypes</code> </h3> <br><p>  Examinons la cr√©ation de toutes les instances existantes de type <code>T</code> dans l'assembly: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// . var x = Assembly .GetAssembly(typeof(T)) .GetTypes() .Where(...) .Select(Activator.CreateInstance); // "" . var x = TypesHelper.GetAllInstancesOf&lt;T&gt;(); // . var x = Instances.Of&lt;T&gt;();</span></span></code> </pre> <br><p>  Ainsi, parfois, le nom d'une classe statique est le <em>d√©but d'une</em> expression. </p><br><p>  Quelque chose de similaire peut √™tre trouv√© dans NUnit: <code>Assert.That(2 + 2, Is.EqualTo(4))</code> - <code>Is</code> et n'a pas √©t√© con√ßu comme un type autosuffisant. </p><br><h3 id="argumentthrowifnull"> <code>Argument.ThrowIfNull</code> </h3> <br><p>  Jetons maintenant un ≈ìil √† la v√©rification des conditions pr√©alables: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  . Argument.ThrowIfNull(x); Guard.CheckAgainstNull(x); // . x.Should().BeNotNull(); // ,  ...  ? Ensure(that: x).NotNull();</span></span></code> </pre> <br><p>  <code>Ensure.NotNull(argument)</code> - sympa, mais pas tout √† fait en anglais.  Une autre chose est l' <code>Ensure(that: x).NotNull()</code> √©crit ci-dessus.  Si seulement il pouvait ... </p><br><p>  Au fait, vous le pouvez!  Nous √©crivons <code>Contract.Ensure(that: argument).IsNotNull()</code> et importons le type de <code>Contract</code> <code>using static</code> .  On <code>Ensure(that: type).Implements&lt;T&gt;()</code> donc toutes sortes de <code>Ensure(that: type).Implements&lt;T&gt;()</code> , <code>Ensure(that: number).InRange(from: 5, to: 10)</code> , etc. </p><br><p>  L'id√©e de l'importation statique ouvre de nombreuses portes.  Un bel exemple pour: √† la place des <code>items.Remove(x)</code> √©crire <code>Remove(x, from: items)</code> .  Mais curieux est la r√©duction des <code>enum</code> et des propri√©t√©s qui renvoient des fonctions. </p><br><pre> <code class="cs hljs">IItems items = ...; <span class="hljs-comment"><span class="hljs-comment">// . var x = items.All(where: x =&gt; x.IsWeapon); //  . // `ItemsThatAre.Weapons`  `Predicate&lt;bool&gt;`. var x = items.All(ItemsThatAre.Weapons); // `using static`  !  . var x = items.All(Weapons);</span></span></code> </pre> <br><h3 id="ekzoticheskiy-find">  <code>Find</code> exotique </h3><br><p>  En C # 7.1 et sup√©rieur, vous pouvez √©crire non pas <code>Find(1, @in: items)</code> , mais <code>Find(1, in items)</code> , o√π <code>Find</code> est d√©fini comme <code>Find&lt;T&gt;(T item, in IEnumerable&lt;T&gt; items)</code> .  Cet exemple n'est pas pratique, mais montre que tous les moyens sont bons dans la lutte pour la lisibilit√©. </p><br><h2 id="itogo">  Total </h2><br><p>  Dans cette partie, j'ai examin√© plusieurs fa√ßons de travailler avec la lisibilit√© du code.  Tous peuvent √™tre g√©n√©ralis√©s pour: </p><br><ul><li>  <strong>Le param√®tre nomm√© dans le cadre de l'expression</strong> est <code>Should().Be(4, because: "")</code> , <code>Atomically.Change(ref x, from: oldX, to: newX)</code> . </li><li>  <strong>Un nom simple au lieu de d√©tails techniques</strong> est <code>Separated(with: ", ")</code> , <code>Exclude</code> . </li><li>  <strong>La m√©thode faisant partie de la variable</strong> est <code>x.OrDefault()</code> , <code>x.Or(b).IfLess()</code> , <code>orders.One(with: id)</code> , <code>orders.All</code> . </li><li>  <strong>La m√©thode faisant partie de l'expression</strong> est <code>path.Without(".exe").AtEnd</code> . </li><li>  <strong>Le type faisant partie de l'expression</strong> est <code>Instances.Of</code> , <code>Is.EqualTo</code> . </li><li>  <strong>La m√©thode faisant partie de l'expression (en <code>using static</code> )</strong> est <code>Ensure(that: x)</code> , <code>items.All(Weapons)</code> . </li></ul><br><p>  Ainsi, l'externe et le contempl√© sont mis en avant.  Au d√©but, il est pens√©, puis ses incarnations sp√©cifiques sont pens√©es, pas si significatives, tant que le code est lu comme du texte.  Il s'ensuit que le juge n'est pas tant le go√ªt que la <em>langue</em> - il d√©termine la diff√©rence entre <code>item.GetValueOrDefault</code> et <code>item.OrDefault</code> . </p><br><h2 id="epilog">  √âpilogue </h2><br><p>  Quelle est la meilleure m√©thode, claire, mais qui ne fonctionne pas ou qui fonctionne, mais incompr√©hensible?  Un ch√¢teau blanc comme neige sans meubles ni chambres ou un cabanon avec des canap√©s dans le style de Louis XIV?  Un yacht de luxe sans moteur ni barge g√©missante avec un ordinateur quantique que personne ne peut utiliser? </p><br><p>  Les r√©ponses polaires ne correspondent pas, mais <em>"quelque part au milieu"</em> aussi. </p><br><p>  √Ä mon avis, les deux concepts sont inextricables: en choisissant soigneusement la couverture d'un livre, nous examinons sans doute les erreurs dans le texte, et vice versa.  Je ne voudrais pas que les <em>Beatles</em> jouent de la musique de mauvaise qualit√©, mais ils <em>devraient</em> aussi s‚Äôappeler <em>MusicHelper</em> . </p><br><p>  Une autre chose est que travailler sur un mot dans le cadre du processus de d√©veloppement est une chose inhabituelle sous-estim√©e, et donc une sorte de jugement extr√™me est encore n√©cessaire.  Ce cycle est l'extr√™me de la forme et de l'image. </p><br><p>  Merci √† tous pour votre attention! </p><br><h2 id="ssylki">  Les r√©f√©rences </h2><br><p>  Toute personne int√©ress√©e √† voir plus d'exemples peut √™tre trouv√©e sur mon GitHub, par exemple, dans la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Pocket.Common</code></a> .  <em>(pas pour une utilisation mondiale et universelle)</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447830/">https://habr.com/ru/post/fr447830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447818/index.html">AgileDays 2019</a></li>
<li><a href="../fr447820/index.html">Importez des mod√®les 3D dans Unity et les pi√®ges</a></li>
<li><a href="../fr447822/index.html">Presque vir√©. Comment j'ai construit le d√©partement d'analyse de Yandex</a></li>
<li><a href="../fr447826/index.html">Le recruteur doit pouvoir vendre</a></li>
<li><a href="../fr447828/index.html">Comment nous faisons l'informatique pour les personnes √† Rostelecom</a></li>
<li><a href="../fr447832/index.html">Il n'y a pas si longtemps</a></li>
<li><a href="../fr447834/index.html">D√©truisez en 9 secondes. Comment un algorithme inconnu a d√©truit IPO BATS</a></li>
<li><a href="../fr447836/index.html">Essai routier nanoCAD SPDS Metalwork 1.2. Partie 1</a></li>
<li><a href="../fr447838/index.html">Comment les technologies IoT vont changer le monde au cours des 10 prochaines ann√©es</a></li>
<li><a href="../fr447842/index.html">Microbiota. Qu'est-ce que cet organe et pourquoi en avons-nous besoin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>