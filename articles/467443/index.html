<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüè≠ üë®üèº‚ÄçüöÄ ü§≤üèª Centro Multimedia "Kodi" y Proyecto Yocto üßëüèΩ‚Äçü§ù‚Äçüßëüèª üéç ‚õ∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introducci√≥n al proyecto Yocto 
 Yocto Project es un proyecto colaborativo de c√≥digo abierto para simplificar el desarrollo de distribuciones para sis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Centro Multimedia "Kodi" y Proyecto Yocto</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467443/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/q_/p2/ue/q_p2uexsi7n5tjnthirivhuwq2o.png"></div><br><h2>  Introducci√≥n al proyecto Yocto </h2><br>  Yocto Project es un proyecto colaborativo de c√≥digo abierto para simplificar el desarrollo de distribuciones para sistemas embebidos.  Yocto contiene una gran cantidad de plantillas, metadatos y herramientas de compilaci√≥n.  En Yocto Project, puede conectar una gran cantidad de capas BSP (paquete de soporte de plataforma) para todo tipo de plataformas de hardware. <br><br>  El objetivo principal del art√≠culo es un intento de mostrar el ensamblaje de un paquete de distribuci√≥n t√≠pico en el Proyecto Yocto utilizando el conocido centro multimedia Kodi, versi√≥n 17.6 para una computadora Raspberry Pi 3B de placa √∫nica como ejemplo. <br><br>  Si en alg√∫n lugar en el fondo de tu alma sientes que eres un coleccionista, pero a√∫n no has decidido qu√© te gustar√≠a coleccionar, entonces este art√≠culo es para ti.  Si ya usa el Proyecto Yocto en su trabajo diario, puede desplazarse por este art√≠culo.  Ve directamente al √∫ltimo cap√≠tulo y prep√°rate. <br><br>  El art√≠culo es puramente pr√°ctico y demuestra la posibilidad de utilizar los logros del Proyecto Yocto y OpenEmbedded para construir el centro multimedia "Kodi".  Las capas de Yocto se administran utilizando la utilidad Repo de Google.  Un art√≠culo en el documento de esta serie. <br><br>  Entonces: vamos. <br><a name="habracut"></a><br><h2>  Contenido: </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Instalar</a> Yocto Project en Ubuntu <br>  Distribuci√≥n del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">motor de</a> construcci√≥n en el Proyecto Yocto <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Usando</a> OpenEmbedded con el Proyecto Yocto <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Paquete de</a> soporte de plataforma (BSP) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gestionar</a> capas de Yocto con Repo <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Instalar</a> repositorio <br>  Distribuci√≥n Construir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">manifiesto</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Contenido</a> manifiesto <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descripci√≥n</a> manifiesta <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Estructura de</a> manifiesto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">b</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Inicializando</a> Variables Poky <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Inicializaci√≥n de</a> repos <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sincronizaci√≥n de</a> repositorios <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Crear</a> una configuraci√≥n de proyecto Yocto <br>  Archivo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">configuraci√≥n</a> build / conf / local.conf <br>  Archivo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">configuraci√≥n</a> build / conf / bblayers.conf <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Capa</a> para ensamblar un centro multimedia <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Estructura de la</a> capa <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configuraci√≥n de la</a> capa <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Composici√≥n de</a> recetas-berserk <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Composici√≥n de</a> recetas-n√∫cleo <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Composici√≥n de</a> recetas-kernel <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Composici√≥n</a> recetas-mediacentro <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Composici√≥n de</a> recetas multimedia. <br>  Kodi Build <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Recipe Supplement</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Agregar un nuevo</a> elemento al men√∫ de configuraci√≥n de Kodi <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configuraci√≥n m√°xima de</a> almacenamiento en b√∫fer para video <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mirar televisi√≥n</a> por IPTV <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mirar Youtube</a> con el complemento Kodi <br>  Extensi√≥n de configuraci√≥n de red de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">consola</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Receta de</a> construcci√≥n de distribuci√≥n <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Una breve</a> gu√≠a para crear una imagen de distribuci√≥n <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Postdata</a> <br><br><a name="install_yocto_koditv"></a><h2>  Instalar Yocto Project en Ubuntu </h2><br>  Para construir la distribuci√≥n usando el Proyecto Yocto en Ubuntu, necesita instalar los siguientes paquetes: <br><br><pre><code class="bash hljs">sudo apt-get install -y --no-install-suggests --no-install-recommends \ gawk wget git-core diffstat unzip texinfo gcc-multilib \ build-essential chrpath socat cpio python python3 python3-pip python3-pexpect \ xz-utils debianutils iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev \ xterm</code> </pre> <br>  Los paquetes se instalan utilizando el comando <strong>apt-get install</strong> y el <strong>comando sudo de</strong> escalada de privilegios.  En el sistema Ubuntu, esta es una pr√°ctica generalizada cuando el comando sudo se usa para realizar acciones administrativas (cuando se crea el usuario principal del sistema, se registra autom√°ticamente en el grupo "sudo"). <br><br>  Puede ver instrucciones de instalaci√≥n m√°s detalladas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠:</a> <br><br><a name="mechanism_build_koditv"></a><h2>  Distribuci√≥n del motor de construcci√≥n en el Proyecto Yocto </h2><br>  En el Proyecto Yocto, cada unidad de programa se describe utilizando una receta de ensamblaje.  El lenguaje de descripci√≥n de la receta se asemeja a "bash" con la capacidad de insertar fragmentos de c√≥digo en el lenguaje python.  Puede obtener informaci√≥n b√°sica de sintaxis en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el manual del proyecto Yocto</a> .  Un conjunto de recetas de ensamblaje, dependiendo del prop√≥sito, se puede combinar en capas de ensamblaje separadas. <br><br>  Las capas se dividen en dependientes del hardware: capas BSP, capas de interfaz de usuario (interfaz de usuario), capas espec√≠ficas de Yocto, as√≠ como capas que implementan cierta funcionalidad: <br>  por ejemplo, capas de OpenEmbedded =&gt; multimedia, python, perl, ruby, redes, systemd, servidor web, etc. <br><br><a name="openembedded_koditv"></a><h2>  Usando OpenEmbedded con el Proyecto Yocto </h2><br>  Y, sin embargo, si usa el Proyecto Yocto, entonces seguramente necesitar√° capas con funcionalidad adicional, es decir  Un gran conjunto de recetas para todas las ocasiones.  Y existe tal conjunto: estas son recetas de OpenEmbedded.  OpenEmbedded es una infraestructura para construir paquetes para Linux embebido. <br><br>  OpenEmbedded es totalmente compatible con el Proyecto Yocto, ya que este proyecto fue tomado como base para el Proyecto Yocto.  Quiz√°s es por eso que el Proyecto Yocto tiene una estabilidad ligeramente mejor, mejor documentaci√≥n y un soporte un poco mejor (pero b√°sicamente sigue siendo el mismo OpenEmbedded). <br><br><a name="package_bsp_koditv"></a><h2>  Paquete de soporte de plataforma (BSP) </h2><br>  El paquete de soporte de la placa es una capa (s) especializada y separada para una placa espec√≠fica que define las caracter√≠sticas de hardware de la plataforma, es decir  implementa esas cosas espec√≠ficas que distinguen una placa de otra: caracter√≠sticas del procesador, interrupciones, direccionamiento, caracter√≠sticas del cargador de arranque, caracter√≠sticas del adaptador de video (GPU), etc. <br><br>  Este art√≠culo usa la capa BSP - <strong>meta-raspberrypi</strong> <br>  El repositorio de capas se encuentra en: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">git.yoctoproject.org/git/meta-raspberrypi</a> <br><br><a name="repo_koditv"></a><h2>  Gestionar capas de Yocto con Repo </h2><br>  Yocto Project puede usar una gran cantidad de capas de diferentes proveedores, desarrolladores de equipos, y todo esto debe gestionarse de alguna manera.  Imagine que tiene una docena de placas diferentes, y cada placa viene con un repositorio git BSP separado, y esto no cuenta la infraestructura del proyecto Yocto en s√≠, m√°s la posible funcionalidad adicional de OpenEmbedded. <br><br>  En tal situaci√≥n, no comenzar√° con un script de instalaci√≥n simple por separado.  Willy-nilly, tiene que buscar herramientas que puedan hacerlo bien.  Incluso m√°s que bien.  Una de las mejores herramientas de este tipo es la utilidad de Google: Repo. <br><br>  <strong>Repo</strong> es la herramienta principal para administrar repositorios GIT al construir el sistema operativo Android con su gran c√≥digo base.  Repo le permite administrar una docena, si no un centenar de repositorios git separados en un proyecto, cuyas versiones puede especificar cuidadosamente en un archivo xml del <strong>Manifiesto</strong> <br><br>  y para la correcta sincronizaci√≥n de todas las versiones de todos los repositorios solo necesita ejecutar un comando <br><br>  <strong>sincronizaci√≥n de repositorio</strong> <br><br><a name="install_repo_koditv"></a><h3>  Instalar repositorio </h3><br>  Usando el siguiente conjunto de comandos, puede instalar Repo en su directorio de inicio <strong>~ / bin</strong> <br>  (el comando curl se puede instalar por separado: sudo apt-get install curl) <br><br><pre> <code class="bash hljs">PATH=<span class="hljs-variable"><span class="hljs-variable">${PATH}</span></span>:~/bin mkdir ~/bin curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo chmod a+x ~/bin/repo</code> </pre><br><br>  y en el futuro solo necesitas usar el comando en la consola: <strong>repo</strong> <br><br><blockquote>  mas o menos <br>  si el directorio INICIO / bin no se agrega con la ruta de inicio est√°ndar autom√°ticamente <br>  ver archivo INICIO / .profile <br><br>  $ $ <br>  $ PATH = $ {PATH}: ~ / bin <br>  $ repo <br>  $ $ <br></blockquote><br><a name="manifest_repo_koditv"></a><h3>  Distribuci√≥n Construir manifiesto </h3><br>  La distribuci√≥n recopilada en el marco del art√≠culo, necesito llamarlo algo.  Que se <strong>llame Torvin</strong> .  Denominado Torvin, contendr√° una distribuci√≥n minimalista de Linux con el ensamblaje de un solo programa.  Esto se refiere a un programa de usuario de aplicaci√≥n: Kodi, y nada m√°s (todo lo dem√°s es un nivel de sistema).  Para un centro multimedia, en mi opini√≥n, esto es suficiente. <br><br><a name="context_repo_koditv"></a><h3>  Contenido manifiesto </h3><br>  El archivo <strong>torvin-0.2.5.xml</strong> se usa para administrar capas de distribuci√≥n <strong>.</strong> <br><br><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">default</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sync-j</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://git.yoctoproject.org/git"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/openembedded"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"oe"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/berserktv"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shell.sh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/shell.sh"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/base"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/rocko"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"poky"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/poky"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"oe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"meta-openembedded"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/meta-openembedded"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"meta-raspberrypi"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/meta-raspberrypi"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"berserk"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/berserk"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><a name="desc_repo_koditv"></a><h3>  Descripci√≥n manifiesta </h3><br>  Al comienzo del manifiesto, <strong>las</strong> etiquetas <strong>remotas</strong> denotan dos repositorios GIT principales y uno auxiliar: <br><br>  <strong>https: ‚ÅÑ‚ÅÑgit.yoctoproject.org / git</strong> - repositorio de Yocto llamado <strong>yocto</strong> <br>  <strong>https: ‚ÅÑ‚ÅÑgithub.com / openembedded</strong> - Repositorio OpenEmbedded nombrado como <strong>oe</strong> <br>  https: ‚ÅÑ‚ÅÑgithub.com / berserktv - repositorio GIT auxiliar llamado <strong>bs</strong> <br><br>  En la siguiente parte del manifiesto, usando nombres abreviados, trabajamos con proyectos ubicados en estos repositorios, la etiqueta del <strong>proyecto</strong> contiene los siguientes atributos: <br><br>  <strong>remoto</strong> : el nombre del repositorio con nombre remoto <br>  <strong>revisi√≥n</strong> : el nombre de la rama o la versi√≥n hash <br>  <strong>nombre</strong> : nombre del proyecto en el repositorio especificado <br>  <strong>ruta</strong> : la ruta del proyecto local en su sistema de archivos <br><br><pre> <code class="html hljs xml">   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span>  xml      : git clone https://github.com/berserktv/bs-manifest -b master sources/bs-manifest</code> </pre><br>  En el cuerpo de la etiqueta del <strong>proyecto</strong> , indiqu√© comandos para crear enlaces simb√≥licos a la infraestructura de scripts auxiliares de inicializaci√≥n inicial y arranque regular del sistema de compilaci√≥n <strong>Poky</strong> que <strong>necesito</strong> <br><br><pre> <code class="html hljs xml">   linkfile <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shell.sh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/shell.sh"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/base"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/rocko"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span>        : ln -s src dest .. #      ln -s sources/bs-manifest/setup-environment setup-environment ln -s sources/bs-manifest/raspberry/shell.sh shell.sh #    ,  #      cd sources ln -s bs-manifest/raspberry/rocko base</code> </pre><br><a name="struct_repo_koditv"></a><h3>  Estructura de manifiesto b </h3><br><pre> ‚îú‚îÄ‚îÄ COPIA.MIT
 ‚îú‚îÄ‚îÄ frambuesa
 ‚îÇ ‚îú‚îÄ‚îÄ rocko
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ conf
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ bblayers.conf
 ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ local.conf
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ torvin-0.2.5.xml
 ‚îÇ ‚îî‚îÄ‚îÄ shell.sh
 ‚îú‚îÄ‚îÄ README.md
 ‚îî‚îÄ‚îÄ entorno de configuraci√≥n
</pre><br><br>  El proyecto <strong>bs-manifest</strong> se utiliza para una gesti√≥n de configuraci√≥n flexible, teniendo en cuenta los ensamblajes de diferentes versiones de la distribuci√≥n.  Tengo esta versi√≥n - 0.2.5 <br><br><a name="env_repo_koditv"></a><h3>  Inicializando Variables Poky </h3><br>  El <strong>entorno de configuraci√≥n del</strong> script de inicializaci√≥n se tom√≥ del proyecto Freescale Community (en el entorno yocto, esta es una soluci√≥n com√∫n).  El script es responsable de la inicializaci√≥n de las variables del sistema de compilaci√≥n Poky, el script crea una estructura de directorio en la que est√° muy bien dividido: <br><br><ul><li>  <strong>build</strong> - directorio de <strong>construcci√≥n</strong> </li><li>  <strong>fuente</strong> - c√≥digo fuente de recetas de ensamblaje </li><li>  <strong>download</strong> - directorio para descargar el c√≥digo del programa (bases de datos git, archivos tar.gz) </li></ul><br>  El contenido del script de entorno de configuraci√≥n se puede ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠:</a> <br><br><div class="spoiler">  <b class="spoiler_title">Contenido del script Shell.sh</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash MACHINE='raspberrypi3' source ./setup-environment build echo "you may try 'bitbake core-image-minimal'" bash</span></span></code> </pre><br></div></div><br>  Este script ra√≠z sirve para inicializar las variables de configuraci√≥n del entorno de compilaci√≥n y generalmente se llama al comienzo de una sesi√≥n. <br><br><a name="init_repo_koditv"></a><h3>  Inicializaci√≥n de repos </h3><br>  Para inicializar el repositorio, debe ejecutar el comando: <br><br><pre> <code class="bash hljs">mkdir torvin <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> torvin repo init -u https:‚ÅÑ‚ÅÑgithub.com/berserktv/bs-manifest -m raspberry/rocko/torvin-0.2.5.xml</code> </pre><br>  donde <strong>-u https: ‚ÅÑ‚ÅÑgithub.com / berserktv / bs-manifest</strong> le dice a GIT la ruta al proyecto de manifiesto <br><br>  nota: tambi√©n puede especificar <strong>-b tree_name</strong> <br>  (si no especifica el modificador -b, se asume la rama maestra (por defecto)) <br><br>  donde la ruta <strong>-m raspberry / rocko / torvin-0.2.5.xml</strong> al archivo de configuraci√≥n indica lo siguiente: <br><br><ol><li>  El nombre de la plataforma de hardware para la que se realiza el ensamblaje: <strong>frambuesa</strong> </li><li>  El nombre de la rama de trabajo principal de Yocto / OpenEmbedded es <strong>rocko</strong> </li><li>  El nombre en clave de la versi√≥n es <strong>torvin</strong> (todas las versiones de la serie 0.2.x) </li><li>  El n√∫mero de versi√≥n digital que se est√° ensamblando es <strong>0.2.5</strong> </li></ol><br><a name="sync_repo_koditv"></a><h3>  Sincronizaci√≥n de repositorios </h3><br>  para iniciar o posterior sincronizaci√≥n, simplemente ejecute el comando <br><br><pre> <code class="bash hljs">repo sync</code> </pre><br>  que recoger√° todas las √∫ltimas versiones de proyectos GIT especificados en el archivo de manifiesto (las ramas generalmente se indican), si tiene un hash commit o nombre de etiqueta en el atributo de revisi√≥n, entonces la versi√≥n para este repositorio git no cambiar√°.  El nombre de la etiqueta se puede especificar as√≠: revision = "refs / tags / v0.2.5" <br><br><a name="config_koditv"></a><h3>  Crear una configuraci√≥n de proyecto Yocto </h3><br>  Despu√©s de ejecutar el comando repo sync, puede comenzar a crear la configuraci√≥n principal del Proyecto Yocto: <br><br><pre> <code class="bash hljs">./shell.sh</code> </pre><br>  despu√©s de que se complete el script, se crear√° el directorio <strong>build / conf</strong> : <br>  con dos archivos principales: <br><br><ul><li>  <strong>local.conf</strong> - variables de control de ensamblaje: <br>  nombre de la plataforma, tipo de distribuci√≥n y paquetes de compilaci√≥n, etc. </li><li>  <strong>bblayers.conf</strong> - configuraci√≥n de las capas conectadas del Proyecto Yocto </li></ul><br>  de forma predeterminada, el script de entorno de configuraci√≥n busca <strong>fuentes / base / conf</strong> <br>  configuraci√≥n inicial y si los <strong>archivos</strong> <strong>local.conf</strong> y <strong>bblayers.conf</strong> <br>  existen, se copian para <strong>construir / conf</strong> <br>  (vea la variable PLANTILLAS en el entorno de configuraci√≥n) <br><br>  es decir  los archivos se toman de sources / bs-manifest / raspberry / rocko / conf <br>  ver crear un enlace simb√≥lico a la base <br><br><a name="local_conf_config_koditv"></a><h3>  Archivo de configuraci√≥n build / conf / local.conf </h3><br><div class="spoiler">  <b class="spoiler_title">Mostrar / Ocultar</b> <div class="spoiler_text"><pre> <code class="bash hljs"> MACHINE ??= <span class="hljs-string"><span class="hljs-string">'raspberrypi3'</span></span> DISTRO ?= <span class="hljs-string"><span class="hljs-string">'poky'</span></span> PACKAGE_CLASSES ?= <span class="hljs-string"><span class="hljs-string">"package_deb"</span></span> EXTRA_IMAGE_FEATURES ?= <span class="hljs-string"><span class="hljs-string">"debug-tweaks"</span></span> USER_CLASSES ?= <span class="hljs-string"><span class="hljs-string">"buildstats image-mklibs image-prelink"</span></span> PATCHRESOLVE = <span class="hljs-string"><span class="hljs-string">"noop"</span></span> BB_DISKMON_DIRS = <span class="hljs-string"><span class="hljs-string">"\ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${TMPDIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${DL_DIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${SSTATE_DIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,/tmp,100M,100K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${TMPDIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${DL_DIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${SSTATE_DIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,/tmp,10M,1K"</span></span> PACKAGECONFIG_append_pn-qemu-native = <span class="hljs-string"><span class="hljs-string">" sdl"</span></span> PACKAGECONFIG_append_pn-nativesdk-qemu = <span class="hljs-string"><span class="hljs-string">" sdl"</span></span> CONF_VERSION = <span class="hljs-string"><span class="hljs-string">"1"</span></span> DL_DIR ?= <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${BSPDIR}</span></span></span><span class="hljs-string">/downloads/"</span></span> <span class="hljs-comment"><span class="hljs-comment"># size memory GPU for Raspberry Pi GPU_MEM = "128" GPU_MEM_256 = "112" GPU_MEM_512 = "160" GPU_MEM_1024 = "320" # for libs: "mpeg2dec libmad ffmpeg x264" LICENSE_FLAGS_WHITELIST += "commercial"</span></span></code> </pre><br></div></div><br><a name="bblayers_conf_config_koditv"></a><h3>  Archivo de configuraci√≥n build / conf / bblayers.conf </h3><br><div class="spoiler">  <b class="spoiler_title">Mostrar / Ocultar</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf # changes incompatibly LCONF_VERSION = "6" POKY_BBLAYERS_CONF_VERSION = "2" BBPATH = "${TOPDIR}" BSPDIR := \ "${@os.path.abspath(os.path.dirname(d.getVar('FILE', True)) + '/../..')}" BBFILES ?= "" BBLAYERS ?= " \ ${BSPDIR}/sources/poky/meta \ ${BSPDIR}/sources/poky/meta-poky \ ${BSPDIR}/sources/poky/meta-yocto-bsp \ ${BSPDIR}/sources/meta-openembedded/meta-oe \ ${BSPDIR}/sources/meta-openembedded/meta-python \ ${BSPDIR}/sources/meta-openembedded/meta-networking \ ${BSPDIR}/sources/meta-openembedded/meta-multimedia \ ${BSPDIR}/sources/meta-openembedded/meta-filesystems \ ${BSPDIR}/sources/meta-raspberrypi \ ${BSPDIR}/sources/berserk/meta-berserk \ "</span></span></code> </pre><br></div></div><br><br>  Las principales variables del archivo local.conf, a las que debe prestar atenci√≥n: <br><br><ul><li>  M√ÅQUINA - el nombre de la plataforma bajo la cual se lleva a cabo el ensamblaje </li><li>  DISTRO - nombre de categor√≠a de distribuci√≥n </li><li>  PACKAGE_CLASSES: formato de paquete para instalar software </li><li>  LICENSE_FLAGS_WHITELIST - uso de licencias adicionales </li></ul><br>  configuraciones espec√≠ficas para la familia de placas Raspberry Pi <br><br><ul><li>  GPU_MEM = "128" - la cantidad de memoria de video para el adaptador de video GPU (asignado desde RAM) </li><li>  GPU_MEM_256 = "112" - lo mismo solo para placas con un tama√±o total de RAM = 256MB </li><li>  GPU_MEM_512 = "160" - lo mismo solo para placas con un tama√±o total de RAM = 512MB </li><li>  GPU_MEM_1024 = "320" - lo mismo es solo para placas con un tama√±o total de RAM = 1024MB </li></ul><br><blockquote>  nota: <br>  por ejemplo, si deja solo la variable GPU_MEM = "128", <br>  entonces para todas las placas RPI, RPI2, RPI3 <br>  independientemente de la cantidad de RAM real <br>  en el tablero siempre se asignar√°n para la GPU - 128Mb <br>  (y el tama√±o total de RAM disminuye en este valor) <br></blockquote><br>  si se especifican todas las variables, las directivas GPU_MEM_256, GPU_MEM_512, GPU_MEM_1024 son m√°s prioritarias. <br><br>  Para el ensamblaje del Centro Multimedia, adem√°s de las capas regulares de Yocto, vea el archivo bblayers.conf <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta-poky \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta-yocto-bsp \</code> </pre><br>  Conect√© cuatro capas con funcionalidad adicional de OpenEmbedded. <br><br>  Kodi Multimedia Center: es un programa complejo que utiliza una gran cantidad de bibliotecas externas y necesita construir cada biblioteca utilizando una receta de compilaci√≥n, por lo que, si es posible, usar√© todas las recetas de OpenEmbedded en la categor√≠a <strong>Multimedia</strong> <br><br>  Entonces, tengo una capa Multimedia conectada y las capas de las que depende <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-oe \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-python \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-networking \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-multimedia \</code> </pre><br>  entonces otra capa OpenEmbedded est√° conectada para trabajar con sistemas de archivos <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-filesystems \</code> </pre><br>  conect√≥ a√∫n m√°s la capa BSP principal para la plataforma Raspberry Pi <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-raspberrypi \</code> </pre><br>  Bueno, al final, se conecta una capa adicional, responsable de ensamblar la imagen de distribuci√≥n con la funcionalidad del "Centro Multimedia" <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/berserk/meta-berserk \</code> </pre><br><a name="layer_koditv"></a><h2>  Capa para ensamblar un centro multimedia </h2><br>  En mi opini√≥n, el Proyecto Yocto es una cosechadora industrial para crear distribuciones integradas.  Pero si alguna vez ha trabajado con el sistema de construcci√≥n Buildroot, entonces Yocto puede parecerle engorroso.  Utiliza una gran cantidad de espacio libre en el disco duro.  Para el funcionamiento normal, Yocto requiere alrededor de 80 - 100 GB de espacio libre, y esto generalmente tiene en cuenta el ensamblaje solo para una plataforma. <br><br>  Yocto hace frente a su prop√≥sito principal: soportar tantas plataformas de hardware diferentes como sea posible, y esto requiere el mecanismo m√°s flexible para cambiar los ensambles.  Y este mecanismo necesita tiempo y lugar.  Crear una distribuci√≥n en Yocto no es un proceso r√°pido. <br><br>  Entonces, toda la funcionalidad para ensamblar el "Centro Multimedia" que tengo con una capa separada: <br><br><pre> <code class="bash hljs">https://github/berserktv/berserk</code> </pre><br>  (T√≠tulo tomado de mi libro favorito, El martillo y la cruz, de Harry Harrison). <br>  (Torvin tambi√©n es un personaje en este libro). <br><br>  Para hacer la funcionalidad que necesito, usar√© los llamados complementos para recetas, que se encuentran en archivos con la extensi√≥n .bbappend <br>  en el archivo .bbappend, puede agregar sus propias llamadas de comando para el m√©todo de receta de compilaci√≥n normal, por ejemplo, al m√©todo do_configure, do_compile, do_install, etc. <br><br><a name="struct_top_layer_koditv"></a><h3>  Estructura de la capa </h3><br><pre> ‚îú‚îÄ‚îÄ COPIA.MIT
 ‚îú‚îÄ‚îÄ metaberserk
 ‚îÇ ‚îú‚îÄ‚îÄ conf
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ layer.conf
 ‚îÇ ‚îú‚îÄ‚îÄ recetas-enloquecidas
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ bs-net
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ primera carrera
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ im√°genes
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ tv
 ‚îÇ ‚îú‚îÄ‚îÄ recetas-n√∫cleo
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ init-ifupdown
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ psplash
 ‚îÇ ‚îú‚îÄ‚îÄ recetas-kernel
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ linux
 ‚îÇ ‚îú‚îÄ‚îÄ recetas-mediacentre
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ kodi
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ complementos kodi
 ‚îÇ ‚îî‚îÄ‚îÄ recetas-multimedia
 ‚îÇ ‚îî‚îÄ‚îÄ ffmpeg
 ‚îú‚îÄ‚îÄ README.md
 ‚îî‚îÄ‚îÄ changelog.txt
</pre><br><br>  Composici√≥n de la capa: <br><br><ul><li>  <strong>conf</strong> - configuraci√≥n de capa </li><li>  <strong>recetas-berserk</strong> - recetas de compilaci√≥n de distribuci√≥n, tv, red y recetas de primer lanzamiento </li><li>  <strong>recetas-n√∫cleo</strong> - recetas b√°sicas, en particular una modificaci√≥n a la receta de inicio </li><li>  <strong>recipes-kernel</strong> - recetas de compilaci√≥n del kernel de Linux </li><li>  <strong>recipes-mediacentre</strong> - recetas para construir Kodi y sus complementos </li><li>  <strong>recetas-multimedia</strong> - recetas multimedia, montaje ffmpeg </li></ul><br><a name="config_layer_koditv"></a><h3>  configuraci√≥n de capa </h3><br><div class="spoiler">  <b class="spoiler_title">incluye archivo layer.conf</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># We have a conf and classes directory, add to BBPATH BBPATH .= ":${LAYERDIR}" # We have a packages directory, add to BBFILES BBFILES += "${LAYERDIR}/recipes-*/*/*.bb \ ${LAYERDIR}/recipes-*/*/*.bbappend" BBFILE_COLLECTIONS += "bs" BBFILE_PATTERN_bs := "^${LAYERDIR}/" BBFILE_PRIORITY_bs = "5" DISTRO_FEATURES_append += " wifi x11" PREFERRED_VERSION_ffmpeg = "3.1.11" SYSVINIT_ENABLED_GETTYS = "1" PREFERRED_VERSION_linux-raspberrypi ?= "4.9%"</span></span></code> </pre><br></div></div><br>  El archivo contiene una indicaci√≥n de la versi√≥n de la biblioteca ffmpeg, el n√∫mero de versi√≥n del kernel de Linux, as√≠ como el n√∫mero de consolas virtuales (tty), e incluye las caracter√≠sticas del kit de distribuci√≥n - wifi x11 <br><blockquote>  DISTRO_FEATURES_append + = "wifi x11" <br><br>  PREFERRED_VERSION_ffmpeg = "3.1.11" <br>  SYSVINIT_ENABLED_GETTYS = "1" <br><br>  PREFERRED_VERSION_linux-raspberrypi? = "4.9%" <br></blockquote><br><a name="berserk_layer_koditv"></a><h3>  composici√≥n de recetas-berserk </h3><br><pre> ‚îú‚îÄ‚îÄ bs-net
 ‚îÇ ‚îî‚îÄ‚îÄ bs-net_0.1.3.bb
 ‚îú‚îÄ‚îÄ primera carrera
 ‚îÇ ‚îú‚îÄ‚îÄ archivos
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ first-run.sh
 ‚îÇ ‚îî‚îÄ‚îÄ first-run.bb
 ‚îú‚îÄ‚îÄ im√°genes
 ‚îÇ ‚îî‚îÄ‚îÄ berserk-image.bb
 ‚îî‚îÄ‚îÄ tv
     ‚îú‚îÄ‚îÄ archivos
     ‚îÇ ‚îî‚îÄ‚îÄ berserk.m3u8
     ‚îú‚îÄ‚îÄ tv-config.bb
     ‚îî‚îÄ‚îÄ tv-dir.inc
</pre><br><br>  donde: <br><br><ul><li>  bs-net_0.1.3.bb: receta para construir extensiones de shell para interfaces WLAN / Ethernet </li><li>  first-run.bb: receta para la primera ejecuci√≥n, partici√≥n de disco adicional </li><li>  first-run.sh: script de shell de la primera ejecuci√≥n (ejecuci√≥n en el nivel de ejecuci√≥n S) </li><li>  berserk-image.bb - receta para construir la imagen de distribuci√≥n </li><li>  tv-config.bb - receta para configurar canales de TV usando IPTV </li><li>  berserk.m3u8 - configuraci√≥n de canales de televisi√≥n p√∫blica (formato m3u8) </li></ul><br><a name="core_layer_koditv"></a><h3>  composici√≥n de recetas </h3><br><pre> ‚îú‚îÄ‚îÄ init-ifupdown
 ‚îÇ ‚îú‚îÄ‚îÄ archivos
 ‚îî‚îÄ‚îÄ ‚îÇ ‚îî‚îÄ‚îÄ interfaces
 ‚îÇ ‚îî‚îÄ‚îÄ init-ifupdown_1.0.bbappend
 ‚îî‚îÄ‚îÄ psplash
     ‚îú‚îÄ‚îÄ archivos
     ‚îÇ ‚îî‚îÄ‚îÄ psplash-berserk-img.h
     ‚îî‚îÄ‚îÄ psplash_git.bbappend
</pre><br><br>  donde: <br><br><ul><li>  interfaces: archivo con la configuraci√≥n de red actual </li><li>  init-ifupdown_1.0.bbappend - extensi√≥n para la receta de configuraci√≥n de red </li><li>  psplash-berserk-img.h: imagen del protector de pantalla de inicio <br>  archivo de encabezado obtenido con la utilidad gdk-pixbuf-csource </li><li>  psplash_git.bbappend: extensi√≥n de la receta para iniciar el protector de pantalla de inicio </li></ul><br>  La configuraci√≥n de red en el dispositivo de destino est√° en el archivo: <br><br><pre> <code class="bash hljs">/etc/network/interfaces</code> </pre><br>  Despu√©s de agregar la extensi√≥n de la receta init-ifupdown, reemplazo el archivo de configuraci√≥n normal por el m√≠o y cambio el orden (prioridad) de la ejecuci√≥n del script para los niveles de ejecuci√≥n <br><br><pre> <code class="bash hljs">INITSCRIPT_PARAMS = <span class="hljs-string"><span class="hljs-string">"start 98 2 3 4 5 . stop 10 0 6 1 ."</span></span></code> </pre><br>  Por el momento, casi todas las distribuciones modernas de Linux incluyen una pantalla de inicio.  Normalmente, el protector de pantalla de inicio muestra el estado actual de la descarga, es decir  Indicador del tiempo transcurrido desde que se inici√≥ el sistema.  En este sentido, Yocto no es una excepci√≥n y puede cambiar la imagen del protector de pantalla de inicio est√°ndar a una imagen arbitraria. <br><br>  Para hacer esto, debes: <br><br><ol><li>  FILESEXTRAPATHS_prepend - agrega directorio para recursos </li><li>  SRC_URI: agrega un archivo de encabezado con una imagen arbitraria </li><li>  SPLASH_IMAGES - cambia la variable de control del paquete </li></ol><br>  y adem√°s en la receta de la imagen "berserk-image.bb" es necesario agregar la imagen de inicio de bienvenida como las caracter√≠sticas de la imagen <br><br><pre> <code class="bash hljs">IMAGE_FEATURES += <span class="hljs-string"><span class="hljs-string">"splash"</span></span> <span class="hljs-comment"><span class="hljs-comment">#          SPLASH = "psplash-berserk"</span></span></code> </pre><br><a name="kernel_layer_koditv"></a><h2>  composici√≥n de recetas-kernel </h2><br><pre> ‚îî‚îÄ‚îÄ linux
     ‚îú‚îÄ‚îÄ archivos
     ‚îÇ ‚îú‚îÄ‚îÄ db.txt.patch
     ‚îÇ ‚îî‚îÄ‚îÄ rbpi.cfg
     ‚îî‚îÄ‚îÄ linux-raspberrypi_4.9.bbappend
</pre><br><br>  donde: <br><br><ul><li>  db.txt.patch: parche con la base de dominio regulatorio (utilizada para WiFi) </li><li>  rbpi.cfg: fragmento de configuraci√≥n del kernel de Linux </li><li>  linux-raspberrypi_4.9.bbappend - extensi√≥n de la receta de compilaci√≥n del kernel 4.9 para Raspberry Pi </li></ul><br>  Los dispositivos Wi-Fi funcionan a ciertas frecuencias y para ellos existe un dominio regulador: este es el par√°metro que indica el pa√≠s en el que se supone que este dispositivo debe funcionar. <br><br>  El kernel de Linux tiene una base de datos complementaria en la que se registran las frecuencias permitidas y la potencia permitida para cada pa√≠s. <br><br>  En el caso m√°s simple, esta base de datos se puede incluir directamente en el n√∫cleo de forma est√°tica especificando un par√°metro: <br>  <strong>CONFIG_CFG80211_INTERNAL_REGDB = y</strong> <br>  que es <strong>exactamente</strong> lo que hice al conectar un parche con esta base de datos <strong>db.txt.patch</strong> <br><br>  Y una cosa m√°s: en Yocto existen fragmentos de configuraciones de kernel.  Por lo general, un fragmento de configuraci√≥n, un archivo con la extensi√≥n cfg, contiene solo los par√°metros del n√∫cleo que claramente necesita para ciertos fines.  Y esta pieza de configuraci√≥n se agrega a los par√°metros predeterminados que ya est√°n presentes en la receta al construir el n√∫cleo. <br><br>  Adem√°s de la receta bbappend, tambi√©n puede cambiar los par√°metros que se pasan al n√∫cleo durante el inicio: <br><br>  es decir  anular variable <br>  <strong>CMDLINE</strong> ver archivo linux-raspberrypi_4.9.bbappend <br><br><div class="spoiler">  <b class="spoiler_title">contenido rbpi.cfg</b> <div class="spoiler_text"><pre> <code class="html hljs xml"> # use statically compiled regulatory rules database CONFIG_CFG80211_INTERNAL_REGDB=y #  Wifi  Asus USB-N53 chipset Ralink RT3572 CONFIG_RT2800USB=m #  wifi    Atheros D-Link DWA-126 802.11n (AR9271), # NetGear WNDA3200, NetGear WNA1100, TP-Link TL-WN722N (AR9271), # TL-WN322G v3, TL-WN422G  .. . cateee.net CONFIG_ATH9K_HW=m CONFIG_ATH9K_HTC=m #  Wifi    wpa_supplicant CONFIG_WIRELESS=y CONFIG_WEXT_CORE=y CONFIG_WEXT_PROC=y CONFIG_CRYPTO_AES=y #    IPSec,    Wifi  #   wpa_supplicant   CONFIG_CRYPTO_CCM=m CONFIG_CRYPTO_CTR=m CONFIG_CRYPTO_ARC4=m ######################### #   CONFIG_HAVE_PERF_EVENTS=y CONFIG_PERF_EVENTS=y CONFIG_HAVE_LATENCYTOP_SUPPORT=y CONFIG_LATENCYTOP=y # This option adds support for ASIX AX88xxx # based USB 2.0 10/100 Ethernet adapters. CONFIG_USB_NET_AX8817X=m</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"> linux-raspberrypi_4.9.bbappend</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#      rpbi.cfg FILESEXTRAPATHS_prepend := "${THISDIR}/files:" SRC_URI += "file://db.txt.patch;patch=1 \ file://rbpi.cfg \ " #  BSP  meta-raspberrypi     # https://github.com/agherzan/meta-raspberrypi/issues/14 #    #   do_kernel_configme   #     arch/    do_kernel_configme_append() { cat ${WORKDIR}/rbpi.cfg &gt;&gt; ${WORKDIR}/defconfig } # CMDLINE for raspberrypi # default CMDLINE = "dwc_otg.lpm_enable=0 console=serial0,115200 # root=/dev/mmcblk0p2 rootfstype=ext4 rootwait" CMDLINE = "quiet dwc_otg.lpm_enable=0 console=serial0,115200 \ root=/dev/mmcblk0p2 rootfstype=ext4 rootwait"</span></span></code> </pre><br></div></div><br><a name="mediacentre_layer_koditv"></a><h3>  recipes-mediacentre </h3><br><pre> <code class="bash hljs">‚îú‚îÄ‚îÄ kodi ‚îÇ  ‚îú‚îÄ‚îÄ kodi ‚îÇ  ‚îú‚îÄ‚îÄ kodi_17.bbappend ‚îÇ  ‚îú‚îÄ‚îÄ kodi-dir.inc ‚îÇ  ‚îú‚îÄ‚îÄ kodi-runner.bb ‚îÇ  ‚îú‚îÄ‚îÄ kodi-settings.bb ‚îÇ  ‚îî‚îÄ‚îÄ kodi-version.inc ‚îî‚îÄ‚îÄ kodi-plugins ‚îú‚îÄ‚îÄ files ‚îú‚îÄ‚îÄ kodi-language-ru_3.0.10.bb ‚îú‚îÄ‚îÄ kodi-pvr-iptvsimple.bb ‚îú‚îÄ‚îÄ plugin-video-youtube_5.5.1.bb ‚îú‚îÄ‚îÄ screensaver-kodi-universe_0.1.2.bb ‚îú‚îÄ‚îÄ script-berserk-network_0.2.5.bb ‚îî‚îÄ‚îÄ script-module-requests_2.12.4.bb</code> </pre><br>  donde: <br><br><ol><li> kodi/ <br><ul><li> kodi ‚Äî    <strong>icon,run,settings</strong> <br>           </li><li> kodi_17.bbappend ‚Äî       Kodi </li><li> kodi-dir.inc ‚Äî    Kodi    </li><li> kodi-runner.bb ‚Äî   Kodi     </li><li> kodi-settings.bb ‚Äî     Kodi </li><li> kodi-version.inc ‚Äî        Kodi </li></ul><br></li><li> kodi-plugins/ <br><br><ul><li> files ‚Äî   tar.gz      </li><li> kodi-language-ru_3.0.10.bb ‚Äî     (  Kodi) </li><li> kodi-pvr-iptvsimple.bb ‚Äî   Kodi  pvr-iptvsimple </li><li> plugin-video-youtube_5.5.1.bb ‚Äî   Kodi    ¬´Youtube¬ª </li><li> screensaver-kodi-universe_0.1.2.bb ‚Äî    screensaver-kodi-universe </li><li> script-berserk-network_0.2.5.bb ‚Äî      </li><li> script-module-requests_2.12.4.bb ‚Äî      Youtube </li></ul><br></li></ol><br><a name="multimedia_layer_koditv"></a><h3>  recipes-multimedia </h3><br><pre>‚îî‚îÄ‚îÄ ffmpeg<font></font>
    ‚îú‚îÄ‚îÄ ffmpeg<font></font>
    ‚îÇ  ‚îú‚îÄ‚îÄ 0001-ffmpeg-Call-get_format-to-fix-an-issue-with-MMAL-ren.patch<font></font>
    ‚îÇ  ‚îú‚îÄ‚îÄ h264_parser.patch<font></font>
    ‚îÇ  ‚îî‚îÄ‚îÄ pfcd_hevc_optimisations.patch<font></font>
    ‚îî‚îÄ‚îÄ ffmpeg_3.1.11.bb<font></font>
</pre><br><br>  donde: <br><br><ul><li> 0001-ffmpeg-Call-get_format-to-fix-an-issue-with-MMAL-ren.patch ‚Äî   ffmpeg </li><li> h264_parser.patch ‚Äî     h264 </li><li> pfcd_hevc_optimisations.patch ‚Äî      Raspberry Pi </li><li> ffmpeg_3.1.11.bb ‚Äî    ffmpeg (,  ) </li></ul><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : biblioteca OpenSource para codificar / decodificar una gran cantidad de formatos de video y audio. </font><font style="vertical-align: inherit;">FFmpeg admite casi 400 c√≥decs (ffmpeg -codecs) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y m√°s de 300 formatos (ffmpeg -formats).</font></font><br><br><a name="build_kodi_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kodi Build Recipe Addition </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La capa OpenEmbedded contiene una receta regular para construir Kodi, pero es bastante general, y me gustar√≠a obtener una versi√≥n un poco m√°s estable y probada para la plataforma Raspberry Pi. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los desarrolladores de software tienen un parche de puerto inverso. El software se actualiza constantemente y cada nueva versi√≥n incluye nuevas funciones y la correcci√≥n de errores conocidos. El parche de transferencia inversa le permite transferir algunos de los cambios en la nueva versi√≥n del programa a una anterior, lo que lo hace m√°s estable. Pero este es un trabajo muy duro y meticuloso, que siempre se lleva a cabo por un gran n√∫mero de desarrolladores.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el mundo de la comunidad OpenSource, hay varios proyectos conocidos que usan Kodi, el mejor de los cuales (en mi opini√≥n) es LibreElec (OpenElec). </font><font style="vertical-align: inherit;">LibreElec tiene una buena compilaci√≥n para la plataforma Raspberry Pi. </font><font style="vertical-align: inherit;">Aqu√≠ lo tienen y es mejor tomar el parche de puerto inverso para Kodi. </font><font style="vertical-align: inherit;">Por lo tanto, puede deshacerse de una gran cantidad de problemas sin siquiera saberlo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El centro multimedia Kodi se centra en reproducir el contexto de "Medios", y en mi opini√≥n, el componente m√°s cr√≠tico es la combinaci√≥n de Kodi y FFmpeg, es decir. </font><font style="vertical-align: inherit;">interacci√≥n de ciertas versiones de estos programas, se pueden dejar otras bibliotecas de las capas Yocto y OpenEmbedded. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para el ensamblaje, tom√© la versi√≥n estable de Kodi 17.6 y la versi√≥n FFmpeg 3.1.11</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">  ,       ,      systemD.         (   (  )).  ,     LibreElec       : <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash HASH_VER="934507d922fb011ce46c76566206f2f1f603360b" git clone https://github.com/LibreELEC/LibreELEC.tv.git libreelec cd libreelec git checkout ${HASH_VER}   Kodi,   : projects/RPi2/patches/kodi (. : kodi-001-backport.patch)    FFmpeg,   : packages/multimedia/ffmpeg/patches</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El archivo de descripci√≥n de versi√≥n incluido ser√° tal </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi-version.inc</font></font></strong> <br><br><pre> <code class="bash hljs">FILESEXTRAPATHS_prepend := <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${THISDIR}</span></span></span><span class="hljs-string">/kodi:"</span></span> <span class="hljs-comment"><span class="hljs-comment">#  Krypton SRCREV = "a9a7a20071bfd759e72e7053cee92e6f5cfb5e48" PV = "17.6+gitr${SRCPV}"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La rama Yocto y OpenEmbedded que estoy considerando - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rocko</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , contiene Kodi versi√≥n 17.3, y para actualizar a la versi√≥n 17.6, simplemente agregue una peque√±a adici√≥n a la receta - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi_17.bbappend</font></font></strong> <br><br><pre> <code class="bash hljs">require kodi-version.inc <span class="hljs-comment"><span class="hljs-comment">#     (   17.3) SRC_URI_remove = "file://0013-FTPParse.cpp-use-std-string.patch" #  ,   systemd   SRC_URI_remove = "file://0004-handle-SIGTERM.patch" #      RPI   libreelec SRC_URI_append += "file://kodi-krypton-rpb-backports.patch" #  error adding symbols: DSO missing from command line SRC_URI_append += "file://vchostif.patch" MENU_ICON = "addons/skin.estuary/media/icons/settings" #       ( ) SRC_URI_append += "file://bs-menu.patch file://icon/bs-network.png" do_configure_prepend() { install -m 0644 ${WORKDIR}/icon/bs-network.png ${S}/${MENU_ICON} } #    kodi plugins RRECOMMENDS_${PN}_append = "\ python-xml python-misc python-db \ python-crypt python-threading python-math python-email \ python-io python-netserver python-urllib3 python-datetime" #     Raspberry Pi #  OPENGL    --enable-gles #  kodi     docs/README.linux =&gt; libxmu libxinerama # libxtst xdpyinfo #      DISTRO_FEATURES   "x11" #   kodi  RPI1  RPI2,3    --disable-x11 BS_RPI = " --disable-gl --enable-openmax --enable-player=omxplayer \ --with-platform=raspberry-pi --disable-x11" BS_RPI3 = " --disable-gl --enable-openmax --enable-player=omxplayer \ --with-platform=raspberry-pi2 --disable-x11" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi', \ '${BS_RPI}', '', d)}" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi2', \ '${BS_RPI3}', '', d)}" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi3', \ '${BS_RPI3}', '', d)}" #       Kodi   #  ,  USB  microSDHC  ( ) EXTRA_OECONF_append = " --enable-optical-drive"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La opci√≥n de compilaci√≥n "--enable-optical-drive" le permite conectar el conveniente mecanismo de notificaci√≥n que Kodi usa al conectar un disco √≥ptico. </font><font style="vertical-align: inherit;">En este caso, el m√≥dulo MediaManager (a) (xbmc / storage / MediaManager.cpp) supervisa la conexi√≥n / desconexi√≥n de nuevas particiones de disco y muestra un mensaje emergente al respecto. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">udev ejemplo de conectar / desconectar unidades:</font></font><br><br><pre> <code class="bash hljs">ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"vfat"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mount -o iocharset=utf8,noatime /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"ntfs"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/usr/bin/ntfs-3g -o \ iocharset=utf8,noatime,windows_names /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"ext2|ext3|ext4"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mount -o noatime /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"remove"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/umount /media/%k"</span></span>, RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/rmdir /media/%k"</span></span></code> </pre><br><pre> <code class="html hljs xml">:  rmdir     ,       ( Linux    -  )       .</code> </pre><br><a name="add_menu_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Agregar un nuevo elemento al men√∫ de configuraci√≥n de Kodi </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En Kodi 17.6, los archivos de configuraci√≥n xml son responsables de mostrar los elementos del men√∫. </font><font style="vertical-align: inherit;">Para agregar un elemento m√°s en el men√∫ "Configuraci√≥n", simplemente ajuste el archivo: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi / addons / skin.estuary / xml / Settings.xml </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">donde skin.estuary es el tema de dise√±o de men√∫ predeterminado, la </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descripci√≥n </font><font style="vertical-align: inherit;">del elemento se </font><font style="vertical-align: inherit;">ve as√≠:</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;item&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;label&gt; $ LOCALIZE [13279] &lt;/label&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;onclick&gt; RunAddon (script.berserk.network, butnetwork) &lt;/onclick&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;icon&gt; icons / settings / bs-network.png &lt;/icon&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/item&gt;</font></font><font></font>
</pre><br><br>  donde: <br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etiqueta</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nombre del elemento del men√∫ </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onclick</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - manejo del evento de presionar el bot√≥n de men√∫ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(iniciar el complemento, con el primer argumento pasando la cadena "butnetwork") </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">icono</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - icono del elemento del men√∫ (ruta a la imagen png) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La funcionalidad anterior, as√≠ como la conexi√≥n de varios complementos adicionales de Kodi, se integra con utilizando el archivo bs-menu.patch</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostrar / Ocultar</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> diff -Naur a/addons/skin.estuary/xml/Settings.xml b/addons/skin.estuary/xml/Settings.xml --- a/addons/skin.estuary/xml/Settings.xml 2018-02-01 18:17:45.000000000 +0300 +++ b/addons/skin.estuary/xml/Settings.xml 2018-03-08 12:06:50.000000000 +0300 @@ -134,6 +134,11 @@ &lt;icon&gt;icons/settings/interface.png&lt;/icon&gt; &lt;/item&gt; &lt;item&gt; + &lt;label&gt;<span class="hljs-variable"><span class="hljs-variable">$LOCALIZE</span></span>[13279]&lt;/label&gt; + &lt;onclick&gt;RunAddon(script.berserk.network,butnetwork)&lt;/onclick&gt; + &lt;icon&gt;icons/settings/bs-network.png&lt;/icon&gt; + &lt;/item&gt; + &lt;item&gt; &lt;label&gt;<span class="hljs-variable"><span class="hljs-variable">$LOCALIZE</span></span>[20077]&lt;/label&gt; &lt;onclick&gt;ActivateWindow(SkinSettings)&lt;/onclick&gt; &lt;icon&gt;icons/settings/skin.png&lt;/icon&gt; diff -Naur a/system/addon-manifest.xml b/system/addon-manifest.xml --- a/system/addon-manifest.xml 2018-03-07 15:58:24.000000000 +0300 +++ b/system/addon-manifest.xml 2018-05-14 14:06:58.000000000 +0300 @@ -27,6 +27,7 @@ &lt;addon&gt;resource.uisounds.kodi&lt;/addon&gt; &lt;addon&gt;screensaver.xbmc.builtin.black&lt;/addon&gt; &lt;addon&gt;screensaver.xbmc.builtin.dim&lt;/addon&gt; + &lt;addon&gt;screensaver.kodi.universe&lt;/addon&gt; &lt;addon&gt;script.module.pil&lt;/addon&gt; &lt;addon&gt;service.xbmc.versioncheck&lt;/addon&gt; &lt;addon&gt;skin.estuary&lt;/addon&gt; @@ -43,4 +44,8 @@ &lt;addon&gt;xbmc.python&lt;/addon&gt; &lt;addon&gt;xbmc.webinterface&lt;/addon&gt; &lt;addon optional=<span class="hljs-string"><span class="hljs-string">"true"</span></span>&gt;peripheral.joystick&lt;/addon&gt; + &lt;addon&gt;script.berserk.network&lt;/addon&gt; + &lt;addon&gt;resource.language.ru_ru&lt;/addon&gt; + &lt;addon&gt;script.module.requests&lt;/addon&gt; + &lt;addon&gt;plugin.video.youtube&lt;/addon&gt; &lt;/addons&gt;</code> </pre><br></div></div><br><a name="max_set_video_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuraci√≥n m√°xima de almacenamiento en b√∫fer para video </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En el Centro multimedia Kodi, para maximizar el rendimiento, puede especificar la configuraci√≥n m√°xima de almacenamiento en b√∫fer: </font></font><br><br><pre> <code class="bash hljs">&lt;advancedsettings&gt; &lt;cache&gt; &lt;buffermode&gt;1&lt;/buffermode&gt; &lt;memorysize&gt;139460608&lt;/memorysize&gt; &lt;readfactor&gt;20&lt;/readfactor&gt; &lt;/cache&gt; &lt;/advancedsettings&gt;</code> </pre><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffermode = 1</font></font></strong> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : solicitudes de almacenamiento intermedio para todos los sistemas de archivos (incluido el </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">factor de lectura</font></font></strong> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> local) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ajusta la velocidad de descarga en funci√≥n de la tasa de bits de video promedio. </font><font style="vertical-align: inherit;">Entonces, por ejemplo, si reproduce un video con una velocidad de transferencia de datos promedio de 5 Mbit / sy establece la relaci√≥n de lectura del b√∫fer en 2.0, esto limitar√° la velocidad de descarga (y, por lo tanto, la velocidad de llenado de cach√©) a aproximadamente 10 Mbit / s, por lo tanto: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readfactor = 20 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elimina la restricci√≥n en la velocidad de descarga </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memorysize</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 139460608 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: el tama√±o del b√∫fer es 133 MB, mientras se usa 133 * 3 RAM, es decir </font><font style="vertical-align: inherit;">alrededor de 400 MB de RAM</font></font><br><br><a name="iptv_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mirar televisi√≥n por IPTV </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodi Media Center es una herramienta muy poderosa para ver contenido digital. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La funci√≥n principal para la que recopil√© "Media Center" es la funci√≥n de mirar televisi√≥n digital usando IPTV (Internet Protocol Television), es decir televisi√≥n a trav√©s del protocolo de internet. Con esta funci√≥n, puede ver televisi√≥n digital desde su proveedor de Internet. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es la opci√≥n m√°s moderna y √≥ptima tanto en t√©rminos de calidad de imagen como en t√©rminos de caracter√≠sticas adicionales, es decir Servicios prestados. Por ejemplo, se pueden proporcionar canales de televisi√≥n en el archivo, en el que la grabaci√≥n de video deseada est√° disponible por alg√∫n tiempo despu√©s de la transmisi√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para admitir IPTV en Kodi, hay varias opciones de complemento, de las cuales me decid√≠ por el complemento</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pvr.iptvsimple</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para compilar el complemento, use la receta:</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    ‚îî‚îÄ‚îÄ complementos kodi</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ‚îî‚îÄ‚îÄ kodi-pvr-iptvsimple.bb</font></font><font></font>
</pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El complemento se conecta / configura a trav√©s de: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Men√∫ principal de Kodi =&gt; ‚ÄúComplementos‚Äù =&gt; ‚ÄúMis complementos‚Äù =&gt; ‚ÄúClientes PVR‚Äù =&gt; ‚ÄúPVR IPTV Simple Client‚Äù </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para verificar el funcionamiento de la televisi√≥n IPTV como parte de Kodi, tom√© varios canales de noticias p√∫blicas y los agreg√≥ a la lista en formato m3u8, y tambi√©n activ√≥ el inicio autom√°tico del complemento "pvr.iptvsimple" al inicio del centro de medios.</font></font><br><br><a name="youtube_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mirar Youtube con el complemento Kodi </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los programadores que desarrollaron Kodi proporcionaron la flexibilidad para expandir sus funciones. </font><font style="vertical-align: inherit;">Esto se hace para que cualquier entusiasta, si lo desea, pueda agregar a Kodi lo que realmente necesita. </font><font style="vertical-align: inherit;">Y estos complementos para Kodi son oscuridad.</font></font> Bueno, entiendes el punto.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay tantos de ellos que merece una descripci√≥n en un art√≠culo separado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los complementos se instalan de manera muy simple, solo conecte Kodi a Internet y presione un par de botones en el men√∫. Puedes leer sobre esto en cualquiera de los foros dedicados a Kodi. Pero el ensamblaje, est√° el ensamblaje, e incluir√© un complemento m√°s en el kit de distribuci√≥n como ejemplo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El complemento m√°s interesante y extendido (ohm) para Kodi en mi opini√≥n es el complemento de vista de Youtube. Kodi es un centro multimedia y Youtube es el repositorio m√°s grande de este contenido muy multimedia, por lo que el complemento de Youtube para Kodi es casi obligatorio. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El complemento est√° escrito en python, y este es un mecanismo de complemento normal, no necesita compilar nada, solo copie el complemento terminado en el directorio ra√≠z con los complementos y especifique el nombre del complemento en el archivo de manifiesto xml:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"System / addon-manifest.xml" </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El complemento se toma del repositorio oficial y su c√≥digo fuente se incluye en el archivo: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recipes-mediacentre / kodi-plugins / files / plugin.video.youtube.tar.gz Consulte la </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ubicaci√≥n de la receta de ensamblaje del complemento en cap√≠tulo "composici√≥n recetas-mediacenter"</font></font><br><br><a name="bsnet_layer_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extensi√≥n de configuraci√≥n de red de consola </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dado que el kit de distribuci√≥n ensamblado en el marco de este art√≠culo es una demostraci√≥n, los requisitos para configurar "Interfaces de red" son m√≠nimos. </font><font style="vertical-align: inherit;">No quer√≠a arrastrar a ning√∫n administrador de red pesado para esto, lo cual era muy incomprensible para m√≠ y muy engorroso, y por lo tanto escrib√≠ dos scripts de shell que complementan la configuraci√≥n del mecanismo de configuraci√≥n regular:</font></font><br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">############################################################## #     /etc/network/interfaces: ############################################################## auto eth0 iface eth0 inet manual up /etc/network/eth-manual $IFACE up down /etc/network/eth-manual $IFACE down auto wlan0 iface wlan0 inet manual up /etc/network/wlan $IFACE up down /etc/network/wlan $IFACE down</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para configurar convenientemente las interfaces de red Ethernet / WLAN a trav√©s de la GUI, utilizo otro peque√±o complemento de Kodi "script.berserk.network". </font><font style="vertical-align: inherit;">Este es casi el √∫nico complemento de Kodi que descubr√≠, pero para esto tuve que escribirlo. </font><font style="vertical-align: inherit;">Es extremadamente compacto y minimalista y est√° escrito en lenguaje python. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambos componentes se recopilan mediante recetas:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recetas-berserk / bs-net / bs-net_0.1.3.bb </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recipes-mediacentre / kodi-plugins / script-berserk-network_0.2.5.bb </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En este punto, me gustar√≠a detenerme en los detalles. </font><font style="vertical-align: inherit;">Entonces, toda la flexibilidad de usar Yocto reside en diferentes conjuntos de recetas, es decir </font><font style="vertical-align: inherit;">conect√≥ un conjunto de recetas: el administrador de red m√°s simple se agreg√≥ al kit de distribuci√≥n, conect√≥ otro conjunto, agreg√≥ su administrador de red favorito usando, por ejemplo, systemD, etc. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para conectarse autom√°ticamente a un punto de acceso WiFi cuando se inicia el sistema, utilizo la regla udev: /etc/udev/rules.d/80-wifi-start.rules</font></font><br><br><pre> <code class="bash hljs">SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"net"</span></span>, ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, DRIVERS==<span class="hljs-string"><span class="hljs-string">"?*"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"wlan*"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/etc/network/wlan-runner </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$env</span></span></span><span class="hljs-string">{INTERFACE} up"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"net"</span></span>, ACTION==<span class="hljs-string"><span class="hljs-string">"remove"</span></span>, DRIVERS==<span class="hljs-string"><span class="hljs-string">"?*"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"wlan*"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/etc/network/wlan-runner </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$env</span></span></span><span class="hljs-string">{INTERFACE} down"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El script wlan-runner simplemente ejecuta los comandos: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / network / wlan $ IFACE up</font></font><br>  o <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / etc / network / wlan $ IFACE abajo </font></font><br><br><a name="distrib_recipe_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Receta de construcci√≥n de distribuci√≥n </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El Proyecto Yocto tiene un mecanismo de reutilizaci√≥n. Hay clases de las que puede heredar (directiva "heredar"), y hay recetas b√°sicas que puede conectar (directiva "incluir"). </font><strong><font style="vertical-align: inherit;">Mostrar√© la</font></strong></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herencia usando el ejemplo de clase: </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poky / meta / clasess / core-image.bbclass</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La clase es responsable de describir los grupos de paquetes que puede incluir en una receta en particular. Para hacer esto, es suficiente indicar la construcci√≥n al comienzo de la receta: </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">heredar core-image</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Incluso en el texto de esta clase puede ver las caracter√≠sticas de la imagen, cada caracter√≠stica es responsable de un grupo de funciones incluidas en la imagen, y cada grupo finalmente describe un conjunto de programas o bibliotecas instalados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las caracter√≠sticas de la imagen se indican de la siguiente manera:</font></font><br><br><pre> <code class="bash hljs">IMAGE_FEATURES += <span class="hljs-string"><span class="hljs-string">"ssh-server-dropbear splash"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n hay DISTRO_FEATURES: caracter√≠sticas de distribuci√≥n que se pueden especificar en el archivo de configuraci√≥n de capa. </font><font style="vertical-align: inherit;">Estas son funciones de nivel de distribuci√≥n, y si, por ejemplo, cambia alguna caracter√≠stica (por ejemplo, x11), el ensamblaje posterior comenzar√° a reensamblar todos los paquetes que dependen de esta opci√≥n (esto puede llevar bastante tiempo). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La receta b√°sica b√°sica que uso es: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poky / meta / recipes-core / images / core-image-minimal.bb</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">receta de construcci√≥n de imagen</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># Project: "Berserk" - build Kodi for the Raspberry Pi platform # license - The MIT License (MIT) DESCRIPTION = "Berserk - the image for the Raspberry PI" LICENSE = "MIT" MD5_SUM = "md5=0835ade698e0bcf8506ecda2f7b4f302" LIC_FILES_CHKSUM = "file://${COMMON_LICENSE_DIR}/MIT;${MD5_SUM}" IMAGE_FEATURES += "ssh-server-dropbear splash" #    rootfs    (250000kB=~250Mb) IMAGE_ROOTFS_EXTRA_SPACE_append += "+ 250000" # Base this image on core-image-minimal include recipes-core/images/core-image-minimal.bb # Set default password for 'root' user inherit extrausers ROOTUSERNAME = "root" ROOTPASSWORD = "berserk" EXTRA_USERS_PARAMS = "usermod -P ${ROOTPASSWORD} ${ROOTUSERNAME};" #  ,      SPLASH = "psplash-berserk" BS_DEBUG_TOOLS = "ldd strace ltrace" BS_GLIBC = "glibc-thread-db \ glibc-gconv-utf-16 \ glibc-gconv-utf-32 \ glibc-binary-localedata-en-us \ glibc-binary-localedata-ru-ru \ glibc-charmap-utf-8 \ " BS_BASE = "kernel-modules \ lsb \ pciutils \ parted \ tzdata \ dosfstools \ ntp \ ntpdate \ e2fsprogs-resize2fs \ ntfs-3g \ ntfsprogs \ " BS_WLAN = "kernel-module-rt2800usb \ kernel-module-rt2800lib \ kernel-module-rt2x00lib \ kernel-module-rt2x00usb \ kernel-module-cfg80211 \ kernel-module-nls-utf8 \ kernel-module-ath9k-common \ kernel-module-ath9k-hw \ kernel-module-ath9k-htc \ kernel-module-ctr \ kernel-module-ccm \ kernel-module-arc4 \ " BS_WIFI_SUPPORT = " \ iw \ dhcp-client \ wireless-tools \ wpa-supplicant \ linux-firmware \ " BS_SOFT = "mc \ kodi \ kodi-runner \ kodi-settings \ kodi-language-ru \ kodi-pvr-iptvsimple \ bs-net \ tv-config \ first-run \ script-berserk-network \ screensaver-kodi-universe \ plugin-video-youtube \ script-module-requests \ " # Include modules in rootfs IMAGE_INSTALL += " \ ${BS_BASE} \ ${BS_WLAN} \ ${BS_WIFI_SUPPORT} \ ${BS_GLIBC} \ ${BS_SOFT} \ ${BS_DEBUG_TOOLS} \ "</span></span></code> </pre><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me gustar√≠a aclarar que, por ejemplo </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> paquete </font><strong><font style="vertical-align: inherit;">kernel-modules</font></strong><font style="vertical-align: inherit;"> instalar√° </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todos los m√≥dulos kernel especificados en el archivo defconfig en la imagen de distribuci√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero si personaliza fuertemente algo, entonces, por supuesto, es posible que ni siquiera necesite todos los m√≥dulos del kernel, en cuyo caso es conveniente agregar cada m√≥dulo por nombre, como se indica en la variable </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BS_WLAN</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es como una hoja de trucos, especifique solo lo que necesita y despu√©s de verificar el paquete "Kernel-modules" eliminar, verificar, etc.</font></font><br><br><a name="instruction_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Una breve gu√≠a para crear una imagen de distribuci√≥n </font></font></h2><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Instale las dependencias del Proyecto Yocto en Ubuntu:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> sudo apt-get install -y --no-install-suggests --no-install-recommends \ gawk wget git-core diffstat unzip texinfo gcc-multilib build-essential \ chrpath socat cpio python python3 python3-pip python3-pexpect \ xz-utils debianutils iputils-ping python3-git python3-jinja2 \ libegl1-mesa libsdl1.2-dev xterm</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Descargue e instale Repo:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> mkdir ~/bin curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo chmod a+x ~/bin/repo</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) Descargue el proyecto desde github:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> PATH=<span class="hljs-variable"><span class="hljs-variable">${PATH}</span></span>:~/bin mkdir torvin <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> torvin repo init -u https://github.com/berserktv/bs-manifest \ -m raspberry/rocko/torvin-0.2.5.xml repo sync</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Construye el proyecto:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> ./shell.sh bitbake berserk-image</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) Escriba la imagen de distribuci√≥n en la tarjeta de memoria:</font></font></b> <div class="spoiler_text"><blockquote>         <br> torvin/build/tmp/deploy/images/raspberrypi3 <br><br>      <br>     : <br> berserk-image-raspberrypi3.rpi-sdimg <br><br> c       <br> c      UTC <br><br>        dd <br><br> : <br>       ¬´microSDHC¬ª <br>      . <br><br> $ sudo bash <br> $ cd torvin/build/tmp/deploy/images/raspberrypi3 <br> $ dd if=berserk-image-raspberrypi3.rpi-sdimg of=/dev/sdX bs=1M <br> $ sync <br><br>  /dev/sdX: <br> X   a,b,c  .. <br>        <br><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">:</a> <br>     Windows,    <br>  Win32 Disk Imager  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">:</a> <br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">:</a> <br></blockquote><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">             N      ,      <span class="hljs-string"><span class="hljs-string">""</span></span>          ,    git  (..         <span class="hljs-string"><span class="hljs-string">""</span></span>)   :  - Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz  - 8    -  USB-3.0 1T   - 4  05    - 1     - 274.8 M   torvin/build    (cache ,   ,   ,  ,   ,    ..) -   42    torvin/downloads -  9.1  (git    tar.gz )  rootfs   - 550     /lib/firmware - 212  /lib/modules - 53  :        firmware (   )       ,   200 </code> </pre><br></div></div><br><a name="postscriptum_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Postdata </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las capacidades de OpenSource en los √∫ltimos a√±os solo est√°n aumentando. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero estas oportunidades no son peque√±as, por ejemplo, ni siquiera tiene que ir muy lejos. Es poco probable que el mismo "Microsoft" esperara que la tecnolog√≠a OpenSource la arrojara del mercado de sistemas operativos m√≥viles. Me refiero al sistema operativo de Google: "Android", que durante la noche arroj√≥ al "Pionero" de los sistemas m√≥viles al margen. Y no est√° claro si Microsoft podr√° volver a √©l nuevamente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por supuesto, "Google", una gran corporaci√≥n con finanzas casi ilimitadas y excelentes desarrolladores, pero a√∫n as√≠, como dicen "sin Core y no aqu√≠ y all√°". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los mejores proyectos OpenSource con el tiempo se convierten en una obra de arte (por ejemplo, Kodi, Openelec / libre, etc.)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y hoy, cualquiera puede unirse a las mejores pr√°cticas en OpenSource, por as√≠ decirlo, sin salir de Github (a). </font><font style="vertical-align: inherit;">Este art√≠culo es sobre eso. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenga muchas asambleas buenas y diferentes para usted, y recuerde "el mundo de Internet de las cosas se acerca".</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/467443/">https://habr.com/ru/post/467443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467427/index.html">BudgetTracker: otra herramienta de c√≥digo abierto para la contabilidad financiera personal</a></li>
<li><a href="../467429/index.html">Habrastatistics: explorando las secciones m√°s y menos visitadas del sitio</a></li>
<li><a href="../467435/index.html">Enviamos informes del agente Veeam Linux a correo o en Telegram</a></li>
<li><a href="../467437/index.html">MVCC en PostgreSQL-1. Aislamiento</a></li>
<li><a href="../467439/index.html">¬øPor qu√© regres√≥ el vinilo y c√≥mo se relacionan los servicios de transmisi√≥n con esto?</a></li>
<li><a href="../467445/index.html">Lista evasiva de actualizaciones de Windows instaladas</a></li>
<li><a href="../467449/index.html">Detecci√≥n de vulnerabilidades y evaluaci√≥n de resistencia a ataques de piratas inform√°ticos de tarjetas inteligentes y procesadores criptogr√°ficos con protecci√≥n incorporada</a></li>
<li><a href="../467453/index.html">Resolviendo el problema del n√∫mero 42 usando una supercomputadora planetaria</a></li>
<li><a href="../467455/index.html">Plantilla QBS para programar microcontroladores en QtCreator usando el ejemplo de los controladores Milander</a></li>
<li><a href="../467457/index.html">El camino desde la cirug√≠a hasta el desarrollo de juegos o la primera experiencia de desarrollo m√≥vil en Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>