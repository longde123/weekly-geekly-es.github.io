<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕋 🙋🏿 😛 Zugriff auf einen nicht vorhandenen Array-Index 🍚 🍟 📣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es war notwendig, den Code von einer Sprache in eine andere umzuschreiben, und es wurde festgestellt, dass sich verschiedene Sprachen beim Zugriff auf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zugriff auf einen nicht vorhandenen Array-Index</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415911/"><p>  Es war notwendig, den Code von einer Sprache in eine andere umzuschreiben, und es wurde festgestellt, dass sich verschiedene Sprachen beim Zugriff auf einen nicht vorhandenen Array-Index unterschiedlich verhalten.  Details unter dem Schnitt. </p><br><img src="https://habrastorage.org/webt/mc/jp/sr/mcjpsrn5iujudldpablddza3fgy.jpeg" alt="Bild"><a name="habracut"></a><br><p>  Hier ist ein Beispielcode in Structured Text, mit dem industrielle Steuerungen programmiert werden.  Programme in dieser Sprache können verschiedene Aktionen ausführen, von der Steuerung einer Ampel bis zur Steuerung von Prozessen in einem Kernkraftwerk.  Die Besonderheiten der Sprache und Plattform werden respektiert, sodass der Code möglicherweise recht ungewöhnlich aussieht. </p><br><pre><code class="hljs pgsql">VAR i: <span class="hljs-type"><span class="hljs-type">INT</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span>: <span class="hljs-type"><span class="hljs-type">INT</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">ARRAY</span></span> [<span class="hljs-number"><span class="hljs-number">0.</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">INT</span></span>:= <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>; END_VAR <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> i:= <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DO</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> := <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>[i]; END_FOR;</code> </pre> <br><p>  Was macht dieses Programm?  Liest Daten von Eingangssignalen und schreibt Steueraktion in die OUT-Variable.  Der Wert dieser Variablen ist 15. Nun führen wir einen Fehler in das Programm ein, indem wir speziell ein Element an einem nicht vorhandenen Index im Array nehmen und das Ergebnis betrachten. </p><br><pre> <code class="hljs pgsql">VAR i: <span class="hljs-type"><span class="hljs-type">INT</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span>: <span class="hljs-type"><span class="hljs-type">INT</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">ARRAY</span></span> [<span class="hljs-number"><span class="hljs-number">0.</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">INT</span></span>:= <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>; END_VAR <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> i:= <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DO</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> := <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>[i]; END_FOR;</code> </pre> <br><blockquote>  Der Wert in der Variablen OUT = 15 </blockquote><p>  Das ist das gleiche wie vor dem Fehler.  Das Programm hat keine Ausnahme ausgelöst, sondern das nicht vorhandene Element einfach ignoriert.  Dieses Verhalten ist für uns durchaus akzeptabel, wenn wir die Ausnahme nicht versehentlich behandelt und die Notstäbe eines Kernreaktors verwaltet haben.  Die Steueraktion der OUT-Variablen ist dieselbe wie vor der fehlerhaften Indexänderung.  Wenn dies ein kurzfristiger Fehler ist, reagiert das System nicht auf den Fehler und arbeitet stabil weiter.  Stellen Sie sich nun vor, dass verschiedene Programme in anderen Programmiersprachen dieselbe Aufgabe ausführen und die Ergebnisse vergleichen. </p><br><p>  Code ohne fehlerhaften Index wird in allen Programmiersprachen identisch ausgeführt, und die Variable OUT hat immer den Wert 15. Wir betrachten nur den Code, in den sich der Fehler eingeschlichen hat, wobei der Wert des Startindex gleich -1 ist. </p><br><h4 id="javascript">  Javascript </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> IN = [ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> OUT = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">-1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">4</span></span>; i++) { OUT += IN[i]; } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'OUT = '</span></span>+ OUT);</code> </pre> <br><blockquote>  OUT = NaN </blockquote><br><h4 id="go">  Geh </h4><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { IN := [<span class="hljs-number"><span class="hljs-number">5</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> } OUT := <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">-1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">4</span></span>; i++ { OUT += IN[i] } fmt.Printf(<span class="hljs-string"><span class="hljs-string">"OUT = %d"</span></span>, OUT) }</code> </pre> <br><blockquote>  Panik: Laufzeitfehler: Index außerhalb des Bereichs </blockquote><br><h4 id="java">  Java </h4><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String args[])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] IN = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> OUT = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = -<span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">4</span></span>; i++) OUT += IN[i]; System.out.printf(<span class="hljs-string"><span class="hljs-string">"OUT = %d"</span></span>, OUT); } }</code> </pre> <br><blockquote>  Ausnahme im Thread "main" java.lang.ArrayIndexOutOfBoundsException: -1 </blockquote><br><h4 id="php">  Php </h4><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $IN = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]; $OUT = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i=<span class="hljs-number"><span class="hljs-number">-1</span></span>; $i&lt;=<span class="hljs-number"><span class="hljs-number">4</span></span>; $i++) { $OUT += $IN[$i]; } <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span>(<span class="hljs-string"><span class="hljs-string">'OUT = '</span></span>.$OUT);</code> </pre> <br><blockquote>  OUT = 15 <br>  PHP-Hinweis: Undefinierter Offset: -1 </blockquote><br><h4 id="python-3">  Python 3 </h4><br><pre> <code class="python hljs">IN = [ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> ]; OUT = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>): OUT += IN[i]; print(<span class="hljs-string"><span class="hljs-string">'OUT = {0:1d}'</span></span>.format(OUT));</code> </pre> <br><blockquote>  OUT = 20 </blockquote><p>  In Python werden negative Indizes unterstützt und die Nummerierung erfolgt ab dem Ende des Arrays. </p><br><h4 id="cc">  C / c ++ </h4><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdio.h&gt; int main() { int IN[]= {1,2,3,4,5}; int OUT=0; int i; for (i=-1; i&lt;=4; i++) { OUT += IN[i]; } printf("OUT = %i", OUT); return 0; }</span></span></span></span></code> </pre> <br><p>  Mit der C ++ - Sprache eine separate Geschichte.  Wenn Sie dieses Beispiel auf beliebten Websites überprüfen möchten, erhalten Sie die folgenden Ergebnisse: </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://codepad.org</a> </p><br><blockquote>  OUT = -143484461 </blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://ideone.com/</a> et al. </p><br><blockquote>  OUT = 15 </blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.jdoodle.com</a> </p><br><blockquote>  OUT = 14 </blockquote><p>  In diesem Artikel werde ich nicht näher darauf eingehen, welche C / C ++ - Compiler auf welchen Plattformen diese Websites verwenden.  Ich würde mich sehr freuen, wenn Sie Ihre Meinung in den Kommentaren teilen. </p><br><h4 id="c-sharp">  Cis </h4><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Program { static <span class="hljs-type"><span class="hljs-type">void</span></span> Main() { <span class="hljs-type"><span class="hljs-type">int</span></span>[] <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span>[] { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> }; <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">-1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">4</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> += <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>[i]; } Console.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("OUT of IN + y = "+ <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span>); } }</code> </pre> <br><blockquote>  Unbehandelte Ausnahme: <br>  System.IndexOutOfRangeException: Der Index lag außerhalb der Grenzen des Arrays. </blockquote><br><h2 id="vyvody">  Schlussfolgerungen </h2><br><p>  Wenn Sie Code in einer beliebigen Programmiersprache schreiben, müssen Sie die Funktionen zum Arbeiten mit Datenstrukturen in der Sprache berücksichtigen.  Berücksichtigen Sie auch alle Stellen im Code, an denen das Programm möglicherweise abstürzt.  Nach einer Ausnahme kann der Programmcode häufig nicht mehr an die Fehlerzeile zurückgegeben werden, und wichtige Aktionen können unterhalb des Codes ausgeführt werden.  Daher sind nicht alle Sprachen zur Lösung bestimmter Probleme geeignet oder erfordern zusätzliche Überprüfungen und Code-Verzweigungen.  In den Sprachen der IEC-Norm besteht Schutz vor primitiven Softwarefehlern, da häufig niemand das Steuerungsprogramm überlastet, wenn ein Fehler auftritt, und dieser Vorgang kann in einigen Situationen auch schwerwiegend sein. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415911/">https://habr.com/ru/post/de415911/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de415901/index.html">Die Kommission des Föderationsrates unterstützte die Idee, eine IMEI-Basis für alle weißen Telefone zu schaffen</a></li>
<li><a href="../de415903/index.html">Willkommen zum Sommer-DIYorDIE-Meetup am 7. Juli</a></li>
<li><a href="../de415905/index.html">Wie man ein gesundes Produkt anbaut (Juno-Beispiel)</a></li>
<li><a href="../de415907/index.html">Wie man Mitarbeiter entlässt, ohne das Image des Unternehmens zu gefährden</a></li>
<li><a href="../de415909/index.html">Browserübergreifende Web-Erweiterung für benutzerdefinierte Skripte Teil 2</a></li>
<li><a href="../de415913/index.html">Wärmen Sie sich für diejenigen auf, die in Python können</a></li>
<li><a href="../de415915/index.html">Harte Praxis: Welche Art von WLAN haben wir für Hoteliers?</a></li>
<li><a href="../de415917/index.html">"Frühlingsgesetz" trat in Kraft: Was kommt als nächstes?</a></li>
<li><a href="../de415919/index.html">Refactoring eines Programms auf Go: 23-fache Beschleunigung</a></li>
<li><a href="../de415923/index.html">Ist die Einheit langsam? Achtung LINQ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>