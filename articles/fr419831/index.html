<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜó üà≤ ‚ùå Fonctionnement de JS: √©l√©ments personnalis√©s üññ üö± üê∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[Conseiller la lecture] Les 19 autres parties du cycle  Partie 1: Pr√©sentation du moteur, des m√©canismes d'ex√©cution, de la pile d'appels 
 Partie 2: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fonctionnement de JS: √©l√©ments personnalis√©s</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/419831/"><div class="spoiler">  <b class="spoiler_title">[Conseiller la lecture] Les 19 autres parties du cycle</b> <div class="spoiler_text">  Partie 1: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©sentation du moteur, des m√©canismes d'ex√©cution, de la pile d'appels</a> <br>  Partie 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√Ä propos des internes V8 et de l'optimisation du code</a> <br>  Partie 3: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">G√©rer la m√©moire, quatre types de fuites de m√©moire et y faire face</a> <br>  Partie 4: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Boucle d'√©v√©nement, asynchrone et cinq fa√ßons d'am√©liorer votre code avec async / wait</a> <br>  Partie 5: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebSocket et HTTP / 2 + SSE.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Que choisir?</a> <br>  Partie 6: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Caract√©ristiques et port√©e de WebAssembly</a> <br>  Partie 7: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Travailleurs Web et cinq sc√©narios d'utilisation</a> <br>  Partie 8: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Travailleurs des services</a> <br>  Partie 9: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Notifications push Web</a> <br>  Partie 10: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">suivre les changements dans le DOM avec MutationObserver</a> <br>  Partie 11: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moteurs de rendu de page Web et conseils pour optimiser leurs performances</a> <br>  Partie 12: Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sous-syst√®me r√©seau des navigateurs, optimisant ses performances et sa s√©curit√©</a> <br>  Partie 12: Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sous-syst√®me r√©seau des navigateurs, optimisant ses performances et sa s√©curit√©</a> <br>  Partie 13: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Animation avec CSS et JavaScript</a> <br>  Partie 14: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement de JS: arborescences de syntaxe abstraite, analyse et optimisation</a> <br>  Partie 15: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement de JS: classes et h√©ritage, transpilation dans Babel et TypeScript</a> <br>  Partie 16: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement de JS: stockage</a> <br>  Partie 17: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement de JS: technologie Shadow DOM et composants Web</a> <br>  Partie 18: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement de JS: m√©canismes de communication WebRTC et P2P</a> <br>  Partie 19: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctionnement de JS: √©l√©ments personnalis√©s</a> </div></div><br>  Nous pr√©sentons √† votre attention une traduction de 19 articles de la s√©rie de documents <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SessionStack</a> sur les caract√©ristiques des diff√©rents m√©canismes de l'√©cosyst√®me JavaScript.  Aujourd'hui, nous allons parler de la norme des √©l√©ments personnalis√©s - les soi-disant ¬´√©l√©ments personnalis√©s¬ª.  Nous parlerons des t√¢ches qu'ils permettent de r√©soudre et comment les cr√©er et les utiliser. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/00e/188/85f/00e18885fa38229e7bc5cc7c4489147c.png" alt="image"></div><br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Revue</font> </h2><br>  Dans l'un des articles pr√©c√©dents de cette s√©rie, nous avons parl√© du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DOM fant√¥me</a> et de certaines autres technologies qui font partie d'un ph√©nom√®ne plus vaste - les composants Web.  Les composants Web sont con√ßus pour permettre aux d√©veloppeurs d'√©tendre les fonctionnalit√©s standard de HTML en cr√©ant des √©l√©ments compacts, modulaires et r√©utilisables.  Il s'agit de la norme W3C relativement nouvelle que les fabricants de tous les principaux navigateurs ont d√©j√† remarqu√©e.  On le retrouve en production, bien que, bien s√ªr, alors que son travail est assur√© par des polyphiles (on en parlera plus tard). <br><br>  Comme vous le savez peut-√™tre d√©j√†, les navigateurs nous fournissent certains outils essentiels pour d√©velopper des sites Web et des applications Web.  Il s'agit de HTML, CSS et JavaScript.  Le HTML est utilis√© pour structurer les pages Web, gr√¢ce au CSS, elles sont jolies et JavaScript est responsable des fonctionnalit√©s interactives.  Cependant, avant l'apparition des composants Web, il n'√©tait pas si facile d'associer des actions impl√©ment√©es JavaScript √† une structure HTML. <br><br>  En fait, nous examinerons ici la base des composants Web - √âl√©ments personnalis√©s.  En r√©sum√©, l'API con√ßue pour fonctionner avec eux permet au programmeur de cr√©er ses propres √©l√©ments HTML avec une logique et des styles JavaScript int√©gr√©s d√©crits par CSS.  Beaucoup confondent les √©l√©ments personnalis√©s avec la technologie Shadow DOM.  Cependant, ce sont deux choses compl√®tement diff√©rentes qui, en fait, se compl√®tent, mais ne sont pas interchangeables. <br><br>  Certains frameworks (comme Angular ou React) tentent de r√©soudre le m√™me probl√®me que les √©l√©ments personnalis√©s r√©solvent en introduisant leurs propres concepts.  Les √©l√©ments personnalis√©s peuvent √™tre compar√©s aux directives angulaires ou aux composants React.  Cependant, les √©l√©ments personnalis√©s sont une fonctionnalit√© standard du navigateur; vous n'avez pas besoin d'utiliser autre chose que JavaScript, HTML et CSS ordinaire pour les utiliser.  Bien s√ªr, cela ne nous permet pas de dire qu'ils remplacent les frameworks JS ordinaires.  Les frameworks modernes nous offrent bien plus que la possibilit√© de simuler le comportement des √©l√©ments personnalis√©s.  En cons√©quence, nous pouvons dire que les frameworks et les √©l√©ments utilisateur sont des technologies qui peuvent √™tre utilis√©es ensemble pour r√©soudre des t√¢ches de d√©veloppement Web. <br><br><h2>  <font color="#3AC1EF">API</font> </h2><br>  Avant de continuer, voyons quelles opportunit√©s l'API nous offre pour travailler avec des √©l√©ments personnalis√©s.  √Ä savoir, nous parlons d'un objet global <code>customElements</code> qui a plusieurs m√©thodes: <br><br><ul><li>  La m√©thode <code>define(tagName, constructor, options)</code> vous permet de d√©finir (cr√©er, enregistrer) un nouvel √©l√©ment utilisateur.  Il prend trois arguments - le nom de la balise pour l'√©l√©ment utilisateur, correspondant aux r√®gles de d√©nomination de ces √©l√©ments, une d√©claration de classe et un objet avec des param√®tres.  Actuellement, un seul param√®tre est pris en charge - <code>extends</code> , qui est une cha√Æne qui sp√©cifie le nom de l'√©l√©ment en ligne √† d√©velopper.  Cette fonction est utilis√©e pour cr√©er des versions sp√©ciales d'√©l√©ments standard. </li><li>  La m√©thode <code>get(tagName)</code> renvoie le constructeur de l'√©l√©ment utilisateur, √† condition que cet √©l√©ment soit d√©j√† d√©fini, sinon il renvoie <code>undefined</code> .  Il prend un argument - la balise de nom de l'√©l√©ment utilisateur. </li><li>  La <code>whenDefined(tagName)</code> renvoie la promesse qui est r√©solue apr√®s la cr√©ation de l'√©l√©ment utilisateur.  Si un √©l√©ment est d√©j√† d√©fini, cette promesse est r√©solue imm√©diatement.  Une promesse est rejet√©e si le nom de balise qui lui est transmis n'est pas un nom de balise valide pour l'√©l√©ment utilisateur.  Cette m√©thode accepte le nom de balise de l'√©l√©ment utilisateur. </li></ul><br><h2>  <font color="#3AC1EF">Cr√©er des √©l√©ments personnalis√©s</font> </h2><br>  La cr√©ation d'√©l√©ments personnalis√©s est tr√®s simple.  Pour ce faire, deux choses doivent √™tre faites: cr√©er une d√©claration de classe pour l'√©l√©ment qui doit √©tendre la classe <code>HTMLElement</code> et enregistrer cet √©l√©ment sous le nom s√©lectionn√©.  Voici √† quoi √ßa ressemble: <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ constructor() {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>();   <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ } // ‚Ä¶ } customElements.define('my-custom-element', MyCustomElement);</span></span></code> </pre> <br>  Si vous ne souhaitez pas polluer la port√©e actuelle, vous pouvez utiliser une classe anonyme: <br><br><pre> <code class="hljs scala">customElements.define(<span class="hljs-symbol"><span class="hljs-symbol">'my</span></span>-custom-element', <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ constructor() {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>();   <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ } // ‚Ä¶ });</span></span></code> </pre> <br>  Comme vous pouvez le voir dans les exemples, l'√©l√©ment utilisateur est enregistr√© √† l'aide de la <code>customElements.define(...)</code> vous connaissez d√©j√†. <br><br><h2>  <font color="#3AC1EF">Probl√®mes r√©solus par les √©l√©ments personnalis√©s</font> </h2><br>  Parlons des probl√®mes qui nous permettent de r√©soudre des √©l√©ments personnalis√©s.  L'une d'elles consiste √† am√©liorer la structure du code et √† √©liminer ce qu'on appelle une ¬´soupe √† balises div¬ª (soupe soup).  Ce ph√©nom√®ne est une structure de code tr√®s courante dans les applications Web modernes, dans lesquelles de nombreux √©l√©ments <code>div</code> sont int√©gr√©s les uns aux autres.  Voici √† quoi cela pourrait ressembler: <br><br><pre> <code class="hljs cs">&lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"top-container"</span></span>&gt; &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"middle-container"</span></span>&gt;   &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"inside-container"</span></span>&gt;     &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"inside-inside-container"</span></span>&gt;       &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"are-we-really-doing-this"</span></span>&gt;         &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"mariana-trench"</span></span>&gt;           ‚Ä¶         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;</code> </pre> <br>  Un tel code HTML est utilis√© pour des raisons justifiables - il d√©crit la mise en page de la page et garantit son affichage correct √† l'√©cran.  Cependant, cela nuit √† la lisibilit√© du code HTML et complique sa maintenance. <br><br>  Supposons que nous ayons un composant qui ressemble √† la figure suivante. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85a/949/ef6/85a949ef606dd68521cd83fd845d09ba.png"></div><br>  <i><font color="#999999">Apparence des composants</font></i> <br><br>  En utilisant l'approche traditionnelle pour d√©crire de telles choses, le code suivant correspondra √† ce composant: <br><br><pre> <code class="hljs cs">&lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"primary-toolbar toolbar"</span></span>&gt; &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar"</span></span>&gt;   &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button"</span></span>&gt;     &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-outer-box"</span></span>&gt;       &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-inner-box"</span></span>&gt;         &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon"</span></span>&gt;           &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon-undo"</span></span>&gt; &lt;/div&gt;         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   &lt;/div&gt;   &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button"</span></span>&gt;     &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-outer-box"</span></span>&gt;       &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-inner-box"</span></span>&gt;         &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon"</span></span>&gt;           &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon-redo"</span></span>&gt; &lt;/div&gt;         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   &lt;/div&gt;   &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button"</span></span>&gt;     &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-outer-box"</span></span>&gt;       &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-inner-box"</span></span>&gt;         &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon"</span></span>&gt;           &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon-print"</span></span>&gt; &lt;/div&gt;         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   &lt;/div&gt;   &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-toggle-button toolbar-button"</span></span>&gt;     &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-outer-box"</span></span>&gt;       &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"toolbar-button-inner-box"</span></span>&gt;         &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon"</span></span>&gt;           &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"icon-paint-format"</span></span>&gt; &lt;/div&gt;         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;</code> </pre> <br>  Imaginez maintenant que nous pourrions, au lieu de ce code, utiliser cette description du composant: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">primary-toolbar</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-group</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-undo"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-button</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-redo"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-button</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-print"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-button</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-toggle-button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-paint-format"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-toggle-button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toolbar-group</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">primary-toolbar</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Je suis s√ªr que tout le monde sera d'accord pour dire que le deuxi√®me fragment de code semble beaucoup mieux.  Un tel code est plus facile √† lire, plus facile √† entretenir et est compr√©hensible √† la fois pour le d√©veloppeur et le navigateur.  Tout se r√©sume au fait qu'il est plus simple que celui dans lequel il existe de nombreuses balises <code>div</code> imbriqu√©es. <br><br>  Le probl√®me suivant qui peut √™tre r√©solu avec des √©l√©ments personnalis√©s est la r√©utilisation du code.  Le code que les d√©veloppeurs √©crivent devrait non seulement fonctionner, mais √©galement √™tre pris en charge.  La r√©utilisation du code, par opposition √† l'√©criture constante des m√™mes constructions, am√©liore les capacit√©s de support de projet. <br>  Voici un exemple simple qui vous aidera √† mieux comprendre cette id√©e.  Supposons que nous ayons l'√©l√©ment suivant: <br><br><pre> <code class="hljs scala">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"my-custom-element"</span></span>&gt; &lt;input <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"text"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"email"</span></span> /&gt; &lt;button <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"submit"</span></span>&gt;&lt;/button&gt; &lt;/div&gt;</code> </pre> <br>  Si vous en avez constamment besoin, alors, avec l'approche habituelle, nous devrons √©crire le m√™me code HTML encore et encore.  Imaginez maintenant que vous devez apporter une modification √† ce code qui devrait se refl√©ter partout o√π il est utilis√©.  Cela signifie que nous devons trouver tous les endroits o√π ce fragment est utilis√©, puis effectuer les m√™mes changements partout.  Il est long, dur et sem√© d'erreurs. <br><br>  Ce serait beaucoup mieux si nous pouvions o√π cet √©l√©ment est n√©cessaire, il suffit d'√©crire ce qui suit: <br><br><pre> <code class="hljs powershell">&lt;my<span class="hljs-literal"><span class="hljs-literal">-custom</span></span><span class="hljs-literal"><span class="hljs-literal">-element</span></span>&gt;&lt;/my<span class="hljs-literal"><span class="hljs-literal">-custom</span></span><span class="hljs-literal"><span class="hljs-literal">-element</span></span>&gt;</code> </pre> <br>  Cependant, les applications Web modernes sont bien plus qu'un HTML statique.  Ils sont interactifs.  La source de leur interactivit√© est JavaScript.  Habituellement, pour fournir de telles capacit√©s, certains √©l√©ments sont cr√©√©s, puis des √©couteurs d'√©v√©nements y sont connect√©s, ce qui leur permet de r√©pondre aux influences des utilisateurs.  Par exemple, ils peuvent r√©pondre √† des clics, au ¬´survol¬ª du pointeur de la souris sur eux, √† les faire glisser sur l'√©cran, etc.  Voici comment connecter un √©couteur d'√©v√©nements √† un √©l√©ment qui se produit lorsque vous cliquez dessus avec la souris: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myDiv = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.my-custom-element'</span></span>); myDiv.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, _ =&gt; { myDiv.innerHTML = <span class="hljs-string"><span class="hljs-string">'&lt;b&gt; I have been clicked &lt;/b&gt;'</span></span>; });</code> </pre> <br>  Et voici le code HTML de cet √©l√©ment: <br><br><pre> <code class="hljs cs">&lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"my-custom-element"</span></span>&gt; I have not been clicked yet. &lt;/div&gt;</code> </pre> <br>  En utilisant l'API pour travailler avec des √©l√©ments personnalis√©s, toute cette logique peut √™tre incluse dans l'√©l√©ment lui-m√™me.  √Ä titre de comparaison, voici le code pour d√©clarer un √©l√©ment personnalis√© qui inclut un gestionnaire d'√©v√©nements: <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ constructor() {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>();   <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>;   self.addEventListener(<span class="hljs-symbol"><span class="hljs-symbol">'clic</span></span>k', _ =&gt; {     self.innerHTML = '&lt;b&gt; <span class="hljs-type"><span class="hljs-type">I</span></span> have been clicked &lt;/b&gt;';   }); } } customElements.define(<span class="hljs-symbol"><span class="hljs-symbol">'my</span></span>-custom-element', <span class="hljs-type"><span class="hljs-type">MyCustomElement</span></span>);</code> </pre> <br>  Et voici √† quoi cela ressemble dans le code HTML de la page: <br><br><pre> <code class="hljs powershell">&lt;my<span class="hljs-literal"><span class="hljs-literal">-custom</span></span><span class="hljs-literal"><span class="hljs-literal">-element</span></span>&gt; I have not been clicked yet &lt;/my<span class="hljs-literal"><span class="hljs-literal">-custom</span></span><span class="hljs-literal"><span class="hljs-literal">-element</span></span>&gt;</code> </pre> <br>  √Ä premi√®re vue, il peut sembler que davantage de lignes de code JS sont n√©cessaires pour cr√©er un √©l√©ment personnalis√©.  Cependant, dans des applications r√©elles, il arrive rarement que de tels √©l√©ments ne soient cr√©√©s que pour √™tre utilis√©s une seule fois.  Un autre ph√©nom√®ne typique des applications Web modernes est que la plupart des √©l√©ments qu'elles contiennent sont cr√©√©s dynamiquement.  Cela conduit √† la n√©cessit√© de prendre en charge deux sc√©narios diff√©rents d'utilisation des √©l√©ments: les situations o√π ils sont ajout√©s dynamiquement √† la page √† l'aide de JavaScript et les situations o√π ils sont d√©crits dans la structure HTML d'origine de la page.  Gr√¢ce √† l'utilisation d'√©l√©ments personnalis√©s, le travail dans ces deux situations est simplifi√©. <br><br>  Par cons√©quent, si nous r√©sumons les r√©sultats de cette section, nous pouvons dire que les √©l√©ments utilisateur rendent le code plus clair, simplifient sa prise en charge, aident √† le d√©composer en petits modules, qui incluent toutes les fonctionnalit√©s n√©cessaires et peuvent √™tre r√©utilis√©s. <br><br>  Maintenant que nous avons discut√© des probl√®mes g√©n√©raux li√©s √† l'utilisation d'√©l√©ments personnalis√©s, parlons de leurs fonctionnalit√©s. <br><br><h2>  <font color="#3AC1EF">Pr√©requis</font> </h2><br>  Avant de commencer √† d√©velopper vos propres √©l√©ments personnalis√©s, vous devez conna√Ætre certaines des r√®gles que vous devez suivre lors de leur cr√©ation.  Les voici: <br><br><ul><li>  Le nom du composant doit inclure un trait d'union (symbole <code>-</code> ).  Gr√¢ce √† cela, l'analyseur HTML peut distinguer les √©l√©ments int√©gr√©s et les √©l√©ments utilisateur.  De plus, cette approche garantit qu'il n'y a pas de collision de noms avec des √©l√©ments int√©gr√©s (√† la fois avec ceux qui sont maintenant et avec ceux qui appara√Ætront √† l'avenir).  Par exemple, le nom r√©el de l'√©l√©ment personnalis√© est <code>&gt;my-custom-element&lt;</code> , et les noms <code>&gt;myCustomElement&lt;</code> et <code>&lt;my_custom_element&gt;</code> ne conviennent pas. </li><li>  Il est interdit d'enregistrer la m√™me balise plus d'une fois.  Si vous tentez de le faire, le navigateur <code>DOMException</code> erreur <code>DOMException</code> .  Les √©l√©ments personnalis√©s ne peuvent pas √™tre red√©finis. </li><li>  Les balises personnalis√©es ne peuvent pas se fermer automatiquement.  L'analyseur HTML ne prend en charge qu'un ensemble limit√© de balises √† fermeture automatique standard (par exemple, <code>&lt;img&gt;</code> , <code>&lt;link&gt;</code> , <code>&lt;br&gt;</code> ). </li></ul><br><h2>  <font color="#3AC1EF">Les possibilit√©s</font> </h2><br>  Parlons de ce que vous pouvez faire avec des √©l√©ments personnalis√©s.  Si vous r√©pondez √† cette question en un mot, il s'av√®re que vous pouvez faire beaucoup de choses int√©ressantes avec eux. <br><br>  L'une des caract√©ristiques les plus notables des √©l√©ments personnalis√©s est que la d√©claration d'une classe d'√©l√©ment fait r√©f√©rence √† l'√©l√©ment DOM lui-m√™me.  Cela signifie que vous pouvez utiliser le mot cl√© this dans une annonce pour connecter des √©couteurs d'√©v√©nements, pour acc√©der aux propri√©t√©s, aux n≈ìuds enfants, etc. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... constructor() {   super();   this.addEventListener('mouseover', _ =&gt; {     console.log('I have been hovered');   }); } // ... }</span></span></code> </pre> <br>  Ceci, bien s√ªr, permet d'√©crire de nouvelles donn√©es sur les n≈ìuds enfants de l'√©l√©ment.  Cependant, cette op√©ration n'est pas recommand√©e, car cela peut entra√Æner un comportement inattendu des √©l√©ments.  Si vous imaginez que vous utilisez des √©l√©ments con√ßus par quelqu'un d'autre, vous serez probablement surpris si votre propre balisage plac√© dans l'√©l√©ment est remplac√© par autre chose. <br><br>  Il existe plusieurs m√©thodes qui vous permettent d'ex√©cuter du code √† certains moments du cycle de vie d'un √©l√©ment. <br><br><ul><li>  La m√©thode <code>constructor</code> est appel√©e une fois, lors de la cr√©ation ou de la ¬´mise √† niveau¬ª de l'√©l√©ment (nous en parlerons ci-dessous).  Le plus souvent, il est utilis√© pour initialiser l'√©tat d'un √©l√©ment, pour connecter des √©couteurs d'√©v√©nements, cr√©er un DOM fant√¥me, etc.  N'oubliez pas que vous devez toujours appeler <code>super()</code> dans le constructeur. </li><li>  La m√©thode <code>connectedCallback</code> est appel√©e chaque fois qu'un √©l√©ment est ajout√© au DOM.  Il peut √™tre utilis√© (et c'est pr√©cis√©ment la fa√ßon dont il est recommand√© de l'utiliser) afin de reporter l'ex√©cution de toute action jusqu'au moment o√π l'√©l√©ment appara√Æt sur la page (par exemple, de cette fa√ßon, vous pouvez retarder le chargement de certaines donn√©es). </li><li>  La m√©thode <code>disconnectedCallback</code> est appel√©e lorsqu'un √©l√©ment est supprim√© du DOM.  Il est g√©n√©ralement utilis√© pour lib√©rer des ressources.  Notez que cette m√©thode n'est pas appel√©e si l'utilisateur ferme l'onglet du navigateur avec la page.  Par cons√©quent, ne comptez pas sur lui lorsque cela est n√©cessaire pour effectuer certaines actions particuli√®rement importantes. </li><li>  La m√©thode <code>attributeChangedCallback</code> est appel√©e lorsqu'un <code>attributeChangedCallback</code> √©l√©ment est ajout√©, supprim√©, mis √† jour ou remplac√©.  De plus, il est appel√© lorsque l'√©l√©ment est cr√©√© par l'analyseur.  Cependant, notez que cette m√©thode s'applique uniquement aux attributs r√©pertori√©s dans la propri√©t√© <code>observedAttributes</code> . </li><li>  La m√©thode <code>adoptedCallback</code> appel√©e lorsque la m√©thode <code>document.adoptNode(...)</code> est utilis√©e, qui est utilis√©e pour d√©placer le n≈ìud vers un autre document. </li></ul><br>  Veuillez noter que toutes les m√©thodes ci-dessus sont synchrones.  Par exemple, la m√©thode <code>connectedCallback</code> est appel√©e imm√©diatement apr√®s l'ajout de l'√©l√©ment au DOM et le reste du programme attend la fin de cette m√©thode. <br><br><h2>  <font color="#3AC1EF">R√©flexion de propri√©t√©</font> </h2><br>  Les √©l√©ments HTML int√©gr√©s ont une fonctionnalit√© tr√®s pratique: la r√©flexion des propri√©t√©s.  Gr√¢ce √† ce m√©canisme, les valeurs de certaines propri√©t√©s sont directement refl√©t√©es dans le DOM en tant qu'attributs.  Disons que cela est caract√©ristique de la propri√©t√© <code>id</code> .  Par exemple, nous effectuons l'op√©ration suivante: <br><br><pre> <code class="hljs cs">myDiv.id = <span class="hljs-string"><span class="hljs-string">'new-id'</span></span>;</code> </pre> <br>  Les modifications pertinentes affecteront le DOM: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"new-id"</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Ce m√©canisme fonctionne en sens inverse.  Il est tr√®s utile car il vous permet de configurer des √©l√©ments de mani√®re d√©clarative. <br><br>  Les √©l√©ments personnalis√©s n'ont pas cette fonctionnalit√© int√©gr√©e, mais vous pouvez l'impl√©menter vous-m√™me.  Pour que certaines propri√©t√©s des √©l√©ments utilisateur se comportent de mani√®re similaire, vous pouvez configurer leurs getters et setters. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... get myProperty() {   return this.hasAttribute('my-property'); } set myProperty(newValue) {   if (newValue) {     this.setAttribute('my-property', newValue);   } else {     this.removeAttribute('my-property');   } } // ... }</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Extension d'√©l√©ments existants</font> </h2><br>  L'API des √©l√©ments personnalis√©s vous permet non seulement de cr√©er de nouveaux √©l√©ments HTML, mais √©galement d'√©tendre ceux existants.  De plus, nous parlons √† la fois d'√©l√©ments standard et d'√©l√©ments personnalis√©s.  Cela se fait en utilisant le <code>extends</code> lors de la d√©claration d'une classe: <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAwesomeButton</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyButton</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... } customElements.define('my-awesome-button', MyAwesomeButton);&lt;/cosourcede&gt;      ,  , ,    &lt;code&gt;customElements.define(...)&lt;/code&gt;,    &lt;code&gt;extends&lt;/code&gt;   ,      .     ,        ,        DOM-.   ,          ,      ,       . &lt;source&gt;class MyButton extends HTMLButtonElement { // ... } customElements.define('my-button', MyButton, {extends: 'button'});</span></span></code> </pre> <br>  Les √©l√©ments standard √©tendus sont √©galement appel√©s ¬´√©l√©ment int√©gr√© personnalis√©¬ª. <br><br>  Il est recommand√© d'en faire une r√®gle pour toujours d√©velopper les √©l√©ments existants et le faire progressivement.  Cela vous permettra d'enregistrer dans de nouveaux √©l√©ments les capacit√©s qui ont √©t√© impl√©ment√©es dans des √©l√©ments cr√©√©s pr√©c√©demment (c'est-√†-dire, propri√©t√©s, attributs, fonctions). <br><br>  Veuillez noter que les √©l√©ments int√©gr√©s personnalis√©s ne sont d√©sormais pris en charge que dans Chrome 67+.  Cela appara√Ætra dans d'autres navigateurs, cependant, il est connu que les d√©veloppeurs de Safari ont d√©cid√© de ne pas mettre en ≈ìuvre cette opportunit√©. <br><br><h2>  <font color="#3AC1EF">Mettre √† jour les √©l√©ments</font> </h2><br>  Comme d√©j√† mentionn√©, la <code>customElements.define(...)</code> est utilis√©e pour enregistrer des √©l√©ments personnalis√©s.  Cependant, l'enregistrement ne peut pas √™tre appel√© l'action qui doit √™tre effectu√©e en premier lieu.  L'enregistrement de l'√©l√©ment utilisateur peut √™tre diff√©r√© pendant un certain temps, de plus, cette fois peut arriver m√™me lorsque l'√©l√©ment est d√©j√† ajout√© au DOM.  Ce processus est appel√© mise √† niveau.  Pour savoir quand un √©l√©ment sera enregistr√©, le navigateur fournit la <code>customElements.whenDefined(...)</code> .  Il re√ßoit le nom de la balise d'√©l√©ment et renvoie la promesse qui est r√©solue apr√®s l'enregistrement de l'√©l√©ment. <br><br><pre> <code class="hljs javascript">customElements.whenDefined(<span class="hljs-string"><span class="hljs-string">'my-custom-element'</span></span>).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'My custom element is defined'</span></span>); });</code> </pre> <br>  Par exemple, vous devrez peut-√™tre retarder l'enregistrement d'un √©l√©ment jusqu'√† ce que ses enfants soient d√©clar√©s.  Une telle ligne de comportement peut √™tre extr√™mement utile si le projet a des √©l√©ments utilisateur imbriqu√©s.  Parfois, un parent peut compter sur l'impl√©mentation d'√©l√©ments enfants.  Dans ce cas, vous devez vous assurer que les enfants sont enregistr√©s avant le parent. <br><br><h2>  <font color="#3AC1EF">Ombre dom</font> </h2><br>  Comme d√©j√† mentionn√©, les √©l√©ments personnalis√©s et le Shadow DOM sont des technologies compl√©mentaires.  Le premier vous permet d'encapsuler la logique JS dans les √©l√©ments utilisateur, et le second vous permet de cr√©er des environnements isol√©s pour les fragments DOM qui ne sont pas affect√©s par ce qui est en dehors d'eux.  Si vous sentez que vous avez besoin de mieux comprendre le concept Shadow DOM, jetez un ≈ìil √† l'une de nos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publications pr√©c√©dentes</a> . <br><br>  Voici comment utiliser le DOM fant√¥me pour un √©l√©ment personnalis√©: <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... constructor() {   super();   let shadowRoot = this.attachShadow({mode: 'open'});   let elementContent = document.createElement('div');   shadowRoot.appendChild(elementContent); } // ... });</span></span></code> </pre> <br>  Comme vous pouvez le voir, appeler <code>this.attachShadow</code> joue <code>this.attachShadow</code> un r√¥le cl√©. <br><br><h2>  <font color="#3AC1EF">Patterns</font> </h2><br>  Dans l'un de nos articles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©c√©dents</a> , nous avons parl√© un peu des mod√®les, bien qu'ils soient, en fait, dignes d'un article s√©par√©.  Nous allons voir ici un exemple simple de la fa√ßon d'incorporer des mod√®les dans des √©l√©ments personnalis√©s lorsqu'ils sont cr√©√©s.  Ainsi, en utilisant la <code>&lt;template&gt;</code> , vous pouvez d√©crire le fragment DOM qui sera trait√© par l'analyseur, mais ne sera pas affich√© sur la page: <br><br><pre> <code class="hljs scala">&lt;template id=<span class="hljs-string"><span class="hljs-string">"my-custom-element-template"</span></span>&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"my-custom-element"</span></span>&gt;   &lt;input <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"text"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"email"</span></span> /&gt;   &lt;button <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"submit"</span></span>&gt;&lt;/button&gt; &lt;/div&gt; &lt;/template&gt;</code> </pre> <br>  Voici comment appliquer un mod√®le dans un √©l√©ment personnalis√©: <br><br><pre> <code class="hljs scala">let myCustomElementTemplate = document.querySelector('#my-custom-element-template'); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCustomElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... constructor() {   super();   let shadowRoot = this.attachShadow({mode: 'open'});   shadowRoot.appendChild(myCustomElementTemplate.content.cloneNode(true)); } // ... });</span></span></code> </pre> <br>  Comme vous pouvez le voir, il existe une combinaison d'un √©l√©ment personnalis√©, d'un DOM fant√¥me et de mod√®les.  Cela nous a permis de cr√©er un √©l√©ment isol√© dans son propre espace, dans lequel la structure HTML est s√©par√©e de la logique JS. <br><br><h2>  <font color="#3AC1EF">Stylisation</font> </h2><br>  Jusqu'√† pr√©sent, nous n'avons parl√© que de JavaScript et HTML, en ignorant CSS.  Par cons√©quent, nous abordons maintenant le sujet des styles.  De toute √©vidence, nous avons besoin d'un moyen de styliser des √©l√©ments personnalis√©s.  Des styles peuvent √™tre ajout√©s √† l'int√©rieur du DOM Shadow, mais la question se pose alors de savoir comment styliser ces √©l√©ments de l'ext√©rieur, par exemple - s'ils ne sont pas utilis√©s par la personne qui les a cr√©√©s.  La r√©ponse √† cette question est assez simple - les √©l√©ments personnalis√©s sont stylis√©s de la m√™me mani√®re que les √©l√©ments int√©gr√©s. <br><br><pre> <code class="hljs mel">my-custom-element { border-radius: <span class="hljs-number"><span class="hljs-number">5</span></span>px; width: <span class="hljs-number"><span class="hljs-number">30</span></span>%; height: <span class="hljs-number"><span class="hljs-number">50</span></span>%; <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br>  Notez que les styles externes ont priorit√© sur les styles d√©clar√©s √† l'int√©rieur d'un √©l√©ment, les rempla√ßant. <br><br>  Vous avez peut-√™tre vu comment, lorsqu'une page √©tait affich√©e √† l'√©cran, √† un moment donn√©, vous pouvez y observer du contenu non stylis√© (c'est ce qu'on appelle FOUC - Flash Of Unstyled Content).  Vous pouvez √©viter ce ph√©nom√®ne en d√©finissant des styles pour les composants non enregistr√©s et en utilisant certains effets visuels lors de leur enregistrement.  Pour ce faire, vous pouvez utiliser le s√©lecteur <code>:defined</code> .  Vous pouvez le faire, par exemple, comme ceci: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">my-button</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:not(</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:defined)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">50px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><h2>  <font color="#3AC1EF">√âl√©ments inconnus et √©l√©ments utilisateur non d√©finis</font> </h2><br>  La sp√©cification HTML est tr√®s flexible, elle vous permet de d√©clarer toutes les balises dont vous avez besoin pour le d√©veloppeur.  Et, si la balise n'est pas reconnue par le navigateur, elle sera trait√©e par l'analyseur en tant que <code>HTMLUnknownElement</code> : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'thisElementIsUnknown'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (element <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> HTMLUnknownElement) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'The selected element is unknown'</span></span>); }</code> </pre> <br>  Cependant, lorsque vous travaillez avec des √©l√©ments personnalis√©s, un tel sch√©ma ne s'applique pas. ,       ?     ,    ,      <code>HTMLElement</code>        . <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'this-element-is-undefined'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (element <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> HTMLElement) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'The selected element is undefined but not unknown'</span></span>); }</code> </pre> <br>   <code>HTMLElement</code>  <code>HTMLUnknownElement</code>    ,    ,  ,  ,    -   .  ,  ,     ,    .          <code>div</code> .             . <br><br><h2> <font color="#3AC1EF"> </font> </h2><br>         Chrome 36+.     API Custom Components v0,    , ,     ,    .    API,  ,  ‚Äî   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . API Custom Elements v1   Chrome 54+   Safari 10.1+ (   ).  Mozilla      v50,     ,     . ,   Microsoft Edge      API.  ,        ,   webkit. ,    ,  ,         ‚Äî   IE 11. <br><br><h2> <font color="#3AC1EF">     </font> </h2><br>  ,  ,       ,        <code>customElements</code> <br>   <code>window</code> : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> supportsCustomElements = <span class="hljs-string"><span class="hljs-string">'customElements'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (supportsCustomElements) { <span class="hljs-comment"><span class="hljs-comment">// API Custom Elements   }</span></span></code> </pre> <br>      : <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadScript</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">src</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>);   script.src = src;   script.onload = resolve;   script.onerror = reject;   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(script); }); } <span class="hljs-comment"><span class="hljs-comment">//    -    . if (supportsCustomElements) { //    ,    . } else { loadScript('path/to/custom-elements.min.js').then(_ =&gt; {   //   ,     . }); }</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>        ,     : <br><br><ul><li>     HTML- JavaScript-,   ,      CSS-. </li><li>      HTML- ( ,   ). </li><li>           . ,   ‚Äî   JavaScript, HTML, CSS, ,      ,  . </li><li>             - (Shadow DOM, , ,   ). </li><li>         ,     . </li><li>       ,     . </li></ul><br>  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  Custom Elements v1      , ,    , ,   ,      . <br><br>  <b>Chers lecteurs!</b>         ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419831/">https://habr.com/ru/post/fr419831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419817/index.html">Lancement du cluster RabbitMQ dans Kubernetes</a></li>
<li><a href="../fr419819/index.html">Biomarqueurs du vieillissement. Panel de fragilit√©. 2e partie</a></li>
<li><a href="../fr419823/index.html">Duo insolite - phrases de passe et images mn√©moniques</a></li>
<li><a href="../fr419825/index.html">Test des performances de plusieurs types de disques dans un environnement virtuel</a></li>
<li><a href="../fr419829/index.html">Le chiffrement de cl√© par d√©faut d'OpenSSH est pire que rien</a></li>
<li><a href="../fr419833/index.html">Travail √† distance, comment √ßa marche</a></li>
<li><a href="../fr419835/index.html">Comment motiver les auteurs, n√©gocier avec des experts et g√©n√©ralement r√©diger de bons articles</a></li>
<li><a href="../fr419837/index.html">Moi, RoboLoyer, ou comment rechercher des anomalies dans les documents</a></li>
<li><a href="../fr419839/index.html">Piratage ATM NCR de bas niveau</a></li>
<li><a href="../fr419843/index.html">GeekUniversity ouvre ses inscriptions √† la Facult√© d'Intelligence Artificielle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>