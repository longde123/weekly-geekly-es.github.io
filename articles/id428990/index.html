<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚜 🤟 📙 Contoh Konfigurasi UIViewControllers Menggunakan RouteComposer 📘 💃🏼 👨🏿‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel sebelumnya , saya berbicara tentang pendekatan yang kami gunakan untuk menulis dan menavigasi antara pengontrol tampilan di beberapa apl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Contoh Konfigurasi UIViewControllers Menggunakan RouteComposer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428990/"><p>  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> sebelumnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">,</a> saya berbicara tentang pendekatan yang kami gunakan untuk menulis dan menavigasi antara pengontrol tampilan di beberapa aplikasi yang saya kerjakan, yang, sebagai hasilnya, menghasilkan perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RouteComposer</a> terpisah.  Saya menerima sejumlah besar umpan balik yang menyenangkan pada artikel sebelumnya dan beberapa saran praktis, yang mendorong saya untuk menulis satu lagi yang akan menjelaskan sedikit lebih banyak cara mengkonfigurasi perpustakaan.  Di bawah potongan, saya akan mencoba membuat beberapa konfigurasi yang paling umum. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d7f/4aa/20b/d7f4aa20b4b089f9de5a0f13600f9a1f.jpg"></p><a name="habracut"></a><br><h3 id="kak-router-razbiraet-konfiguraciyu">  Bagaimana router mem-parsing konfigurasi </h3><br><p>  Untuk memulai, pertimbangkan bagaimana router mem-parsing konfigurasi yang Anda tulis.  Ambil contoh dari artikel sebelumnya: </p><br><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> productScreen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>(finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>(options: [.current, .visible]), factory: <span class="hljs-type"><span class="hljs-type">ProductViewControllerFactory</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>.pushToNavigation()) .from(<span class="hljs-type"><span class="hljs-type">SingleContainerStep</span></span>(finder: <span class="hljs-type"><span class="hljs-type">NilFinder</span></span>(), factory: <span class="hljs-type"><span class="hljs-type">NavigationControllerFactory</span></span>())) .using(<span class="hljs-type"><span class="hljs-type">GeneralAction</span></span>.presentModally()) .from(<span class="hljs-type"><span class="hljs-type">GeneralStep</span></span>.current()) .assemble()</code> </pre> <br><p>  Router akan melalui rantai langkah-langkah mulai dari yang pertama, hingga salah satu langkah (menggunakan <code>Finder</code> disediakan) "melaporkan" bahwa <code>UIViewController</code> diinginkan sudah ada pada stack.  <em>(Misalnya, <code>GeneralStep.current()</code> dijamin akan hadir dalam tumpukan pengontrol)</em> .Kemudian router akan mulai bergerak kembali di sepanjang rantai langkah-langkah menciptakan <code>UIViewController</code> diperlukan menggunakan <code>UIViewController</code> yang disediakan dan mengintegrasikannya menggunakan <code>Action</code> ditentukan s.  Berkat mengetik pemeriksaan bahkan pada tahap kompilasi, paling sering, Anda tidak akan dapat menggunakan <code>UITabBarController.addTab</code> tidak sesuai dengan <code>Fabric</code> disediakan (yaitu, Anda tidak akan dapat menggunakan <code>UITabBarController.addTab</code> di pengontrol <code>UITabBarController.addTab</code> dibuat oleh <code>NavigationControllerFactory</code> ). </p><br><p>  Jika Anda membayangkan konfigurasi yang dijelaskan di atas, maka jika Anda hanya memiliki <code>ProductViewController</code> tertentu di layar, langkah-langkah berikut akan dilakukan: </p><br><ol><li>  <code>ClassFinder</code> tidak akan menemukan <code>ProductViewController</code> dan router akan melanjutkan </li><li>  <code>NilFinder</code> tidak akan pernah menemukan apa pun dan router akan melanjutkan </li><li>  <code>GeneralStep.current</code> akan selalu mengembalikan <code>UIViewController</code> paling atas pada stack. </li><li>  Mulai <code>UIViewController</code> ditemukan, router akan kembali </li><li>  Membangun <code>UINavigationController</code> menggunakan `NavigationControllerFactory </li><li>  Akan menunjukkannya secara digital menggunakan <code>GeneralAction.presentModally</code> </li><li>  <code>ProductViewController</code> ProductViewController <code>ProductViewControllerFactory</code> </li><li>  Mengintegrasikan <code>ProductViewController</code> dibuat ke dalam <code>UINavigationController</code> sebelumnya menggunakan <code>UINavigationController.pushToNavigation</code> </li><li>  Selesaikan navigasi </li></ol><br><p>  <strong>NB:</strong> <em>Harus dipahami bahwa pada kenyataannya tidak mungkin untuk menunjukkan <code>UINavigationController</code> modal tanpa beberapa <code>UIViewController</code> di dalamnya.</em>  <em>Oleh karena itu, langkah 5-8 akan dilakukan oleh router dalam urutan yang sedikit berbeda.</em>  <em>Tetapi Anda tidak harus memikirkannya.</em>  <em>Konfigurasi dijelaskan secara berurutan.</em> </p><br><p>  Praktik yang baik saat menulis konfigurasi adalah mengasumsikan bahwa pengguna dapat ditemukan di mana saja di aplikasi Anda saat ini, dan, tiba-tiba, menerima pesan push dengan permintaan untuk membuka layar yang Anda gambarkan, dan mencoba menjawab pertanyaan - "Bagaimana seharusnya aplikasi berperilaku? ? "," Bagaimana <code>Finder</code> berperilaku dalam konfigurasi yang saya jelaskan? ".  Jika semua pertanyaan ini diperhitungkan, Anda mendapatkan konfigurasi yang dijamin untuk menunjukkan kepada pengguna layar yang diinginkan di mana pun dia berada.  Dan ini adalah persyaratan utama untuk aplikasi modern dari tim yang terlibat dalam pemasaran dan <em>menarik</em> pengguna <em>(menarik)</em> . </p><br><h3 id="stackiteratingfinder-i-ego-opcii">  <code>StackIteratingFinder</code> dan opsinya: </h3><br><p>  Anda dapat menerapkan konsep <code>Finder</code> dengan cara apa pun yang menurut Anda paling dapat diterima.  Namun, cara termudah adalah beralih melalui grafik pengontrol tampilan di layar.  Untuk menyederhanakan tujuan ini, perpustakaan menyediakan <code>StackIteratingFinder</code> dan berbagai implementasi yang akan mengambil tugas ini.  Anda hanya perlu menjawab pertanyaan - apakah ini <code>UIViewController</code> yang Anda harapkan. </p><br><p>  Untuk memengaruhi perilaku <code>StackIteratingFinder</code> dan memberitahukannya di bagian grafik mana (saya ingin pengontrolnya mencari, Anda bisa menentukan kombinasi <code>SearchOptions</code> saat membuatnya.  Dan mereka harus tinggal lebih detail: </p><br><ul><li>  <code>current</code> : Pengontrol tampilan teratas pada tumpukan.  (Yang merupakan <code>rootViewController</code> <code>UIWindow</code> atau yang ditampilkan secara moderat di atas) </li><li>  <code>visible</code> : Jika <code>UIViewController</code> adalah sebuah wadah, lihat ah yang terlihat di <code>UIViewController</code> (Sebagai contoh: <code>UINavigationController</code> selalu memiliki satu <code>UIViewController</code> terlihat, <code>UISplitController</code> mungkin memiliki satu atau dua tergantung pada bagaimana disajikan.) </li><li>  <code>contained</code> : Dalam hal <code>UIViewController</code> adalah sebuah wadah, cari di semua <code>UIViewController</code> bersarang (Misalnya: Periksa semua pengontrol tampilan <code>UINavigationController</code> termasuk yang terlihat) </li><li>  <code>presenting</code> : Cari juga di semua ah <code>UIViewController</code> bawah yang <code>UIViewController</code> (jika ada tentu saja) </li><li>  <em><code>presented</code></em> : Cari <code>UIViewController</code> untuk yang disediakan (untuk <code>StackIteratingFinder</code> opsi ini tidak masuk akal, karena selalu dimulai dari atas) </li></ul><br><p>  Gambar berikut dapat membuat penjelasan di atas lebih jelas: <br><img src="https://habrastorage.org/webt/4j/pn/p5/4jpnp5peadzdj-cbk0tlfusbwxe.png"></p><br><p>  Saya akan merekomendasikan membiasakan diri dengan konsep wadah di artikel sebelumnya. </p><br><p>  <em>Contoh</em> Jika Anda ingin <code>Finder</code> Anda mencari <code>AccountViewController</code> di seluruh tumpukan, tetapi hanya di antara <code>UIViewController</code> terlihat, maka ini harus ditulis seperti ini: </p><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AccountViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(options: [.current, .visible, .presenting])</code> </pre> <br><p>  <strong>NB</strong> <em>Jika karena alasan tertentu pengaturan yang disediakan akan sedikit - Anda selalu dapat dengan mudah menulis implementasi <code>Finder</code> a.</em>  <em>Salah satu contoh akan ada di artikel ini.</em> </p><br><p>  Mari kita beralih pada contoh. </p><br><h3 id="primery-konfiguraciy-s-poyasneniyami">  Contoh konfigurasi dengan penjelasan </h3><br><h4 id="u-menya-est-nekiy-uiviewcontroller-kotoryy-yavlyaetsya-rootviewcontrollerom-uiwindow-i-ya-hochu-chtoby-po-okonchanii-navigacii-on-zamenilsya-na-nekiy-homeviewcontroller">  Saya punya <code>UIViewController</code> tertentu, yang merupakan <code>rootViewController</code> <code>UIWindow</code> , dan saya ingin <code>HomeViewController</code> dengan <code>HomeViewController</code> tertentu di akhir navigasi: </h4><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> screen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">HomeViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), factory: <span class="hljs-type"><span class="hljs-type">XibFactory</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">GeneralAction</span></span>.replaceRoot()) .from(<span class="hljs-type"><span class="hljs-type">GeneralStep</span></span>.root()) .assemble()</code> </pre><br><p>  <em><code>XibFactory</code> memuat <code>HomeViewController</code> dari file xib <code>HomeViewController.xib</code></em> </p><br><p>  <em>Jangan lupa bahwa jika Anda menggunakan implementasi abstrak dari <code>Finder</code> dan <code>Factory</code> dalam kombinasi, Anda harus menentukan tipe <code>UIViewController</code> dan konteks untuk setidaknya satu entitas - <code>ClassFinder&lt;HomeViewController, Any?&gt;</code></em> </p><br><h4 id="chto-proizoydet-esli-v-primere-vyshe-ya-zamenyu-generalsteproot-na-generalstepcurrent">  Apa yang terjadi jika, dalam contoh di atas, saya mengganti <code>GeneralStep.root</code> dengan <code>GeneralStep.current</code> ? </h4><br><p>  Konfigurasi akan berfungsi hingga dipanggil saat ada modal <code>UIViewController</code> di layar.  Dalam hal ini, <code>GeneralAction.replaceRoot</code> tidak akan dapat mengganti pengendali root, karena ada pengendali modal di atasnya, dan router akan melaporkan kesalahan.  Jika Anda tetap ingin konfigurasi ini bekerja, maka Anda perlu menjelaskan kepada router bahwa Anda ingin <code>GeneralAction.replaceRoot</code> diterapkan secara khusus ke root <code>UIViewController</code> .  Kemudian router akan menghapus semua <code>UIViewController</code> diwakili secara <code>UIViewController</code> dan konfigurasi akan bekerja dalam situasi apa pun. </p><br><h4 id="ya-hochu-pokazat-nekiy-accountviewcontroller-v-sluchae-esli-on-esche-nu-pokazan-vnutri-lyubogo-uinavigationcontrollera-kotoryy-v-dannyy-moment-est-gde-libo-na-ekrane-dazhe-esli-etot-uinavigationcontroller-pod-nekim-modalnym-uiviewcontrollerom">  Saya ingin menunjukkan beberapa <code>AccountViewController</code> , jika masih ditampilkan dengan baik, di dalam <code>UINavigationController</code> dan yang saat ini ada di layar di suatu tempat (bahkan jika <code>UINavigationController</code> berada di bawah modal <code>UIViewController</code> ): </h4><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> screen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AccountViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), factory: <span class="hljs-type"><span class="hljs-type">XibFactory</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>.pushToNavigation()) .from(<span class="hljs-type"><span class="hljs-type">SingleStep</span></span>(<span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), <span class="hljs-type"><span class="hljs-type">NilFactory</span></span>())) .from(<span class="hljs-type"><span class="hljs-type">GeneralStep</span></span>.current()) .assemble()</code> </pre><br><p>  Apa yang dimaksud dengan <code>NilFactory</code> dalam konfigurasi ini?  Dengan ini, Anda memberi tahu router bahwa jika ia tidak dapat menemukan <code>UINavigationController</code> di layar, Anda tidak ingin dia membuatnya dan hanya tidak melakukan apa pun dalam kasus ini.  Ngomong-ngomong, karena ini adalah <code>NilFactory</code> , Anda tidak bisa menggunakan <code>Action</code> setelahnya. </p><br><h4 id="ya-hochu-pokazat-nekiy-accountviewcontroller-v-sluchae-esli-on-esche-ne-pokazan-vnutri-lyubogo-uinavigationcontrollera-kotoryy-v-dannyy-moment-est-gde-libo-na-ekrane-a-esli-takovogo-uinavigationcontrollera-ne-okazhetsya---sozdat-ego-i-pokazat-modalno">  Saya ingin menunjukkan beberapa <code>AccountViewController</code> , jika belum ditampilkan, di dalam <code>UINavigationController</code> apa pun dan yang saat ini berada di suatu tempat di layar, dan jika tidak berubah menjadi seperti itu, buat dan tunjukkan secara modular: </h4><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> screen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AccountViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), factory: <span class="hljs-type"><span class="hljs-type">XibFactory</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>.<span class="hljs-type"><span class="hljs-type">PushToNavigation</span></span>()) .from(<span class="hljs-type"><span class="hljs-type">SwitchAssembly</span></span>&lt;<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;() .addCase(expecting: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(options: .visible)) <span class="hljs-comment"><span class="hljs-comment">//   -    .assemble(default: { //      return ChainAssembly() .from(SingleContainerStep(finder: NilFinder(), factory: NavigationControllerFactory())) .using(GeneralAction.presentModally()) .from(GeneralStep.current()) .assemble() }) ).assemble()</span></span></code> </pre> <br><h4 id="ya-hochu-pokazat-uitabbarcontroller-s-tabami-soderzhaschimi-homeviewcontroller-i-accountviewcontroller-zameniv-im-tekuschiy-rut">  Saya ingin menunjukkan <code>UITabBarController</code> dengan <code>UITabBarController</code> berisi <code>HomeViewController</code> dan <code>AccountViewController</code> menggantinya dengan root saat ini: </h4><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tabScreen = <span class="hljs-type"><span class="hljs-type">SingleContainerStep</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>(), factory: <span class="hljs-type"><span class="hljs-type">CompleteFactoryAssembly</span></span>(factory: <span class="hljs-type"><span class="hljs-type">TabBarControllerFactory</span></span>()) .with(<span class="hljs-type"><span class="hljs-type">XibFactory</span></span>&lt;<span class="hljs-type"><span class="hljs-type">HomeViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), using: <span class="hljs-type"><span class="hljs-type">UITabBarController</span></span>.addTab()) .with(<span class="hljs-type"><span class="hljs-type">XibFactory</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AccountViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), using: <span class="hljs-type"><span class="hljs-type">UITabBarController</span></span>.addTab()) .assemble()) .using(<span class="hljs-type"><span class="hljs-type">GeneralAction</span></span>.replaceRoot()) .from(<span class="hljs-type"><span class="hljs-type">GeneralStep</span></span>.root()) .assemble()</code> </pre> <br><h4 id="mogu-li-ya-ispolzovat-kastomnyy-uiviewcontrollertransitioningdelegate-s-ekshenom-generalactionpresentmodally">  Dapatkah saya menggunakan <code>UIViewControllerTransitioningDelegate</code> khusus dengan tindakan <code>GeneralAction.presentModally</code> : </h4><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> transitionController = <span class="hljs-type"><span class="hljs-type">CustomViewControllerTransitioningDelegate</span></span>() <span class="hljs-comment"><span class="hljs-comment">//     .using(GeneralAction.PresentModally(transitioningDelegate: transitionController))</span></span></code> </pre> <br><h4 id="ya-hochu-pereyti-v-accountviewcontroller-gde-by-polzovatel-ne-nahodilsya-v-drugom-tabe-ili-dazhe-v-kakom-to-modalnom-okne">  Saya ingin pergi ke <code>AccountViewController</code> , di mana pun pengguna berada, di tab lain atau bahkan di beberapa jenis modal modal: </h4><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> screen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">AccountViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), factory: <span class="hljs-type"><span class="hljs-type">NilFactory</span></span>()) .from(tabScreen) .assemble()</code> </pre> <br><p>  <em>Mengapa kita menggunakan <code>NilFactory</code> ?</em>  <em>Kami tidak perlu membangun <code>AccountViewController</code> jika tidak ditemukan.</em>  <em>Ini akan dibangun di konfigurasi <code>tabScreen</code> .</em>  <em>Lihat dia di atas.</em> </p><br><h4 id="ya-hochu-pokazat-modalno-forgotpasswordviewcontroller-no-obyazatelno-posle-loginviewcontrollera-vnutri-uinavigationcontrollera">  Saya ingin menunjukkan secara modern <code>ForgotPasswordViewController</code> , tetapi, tentu saja, setelah <code>LoginViewController</code> di dalam <code>UINavigationController</code> : </h4><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> loginScreen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">LoginViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), factory: <span class="hljs-type"><span class="hljs-type">XibFactory</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>.pushToNavigation()) .from(<span class="hljs-type"><span class="hljs-type">NavigationControllerStep</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">GeneralAction</span></span>.presentModally()) .from(<span class="hljs-type"><span class="hljs-type">GeneralStep</span></span>.current()) .assemble() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> forgotPasswordScreen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ClassFinder</span></span>&lt;<span class="hljs-type"><span class="hljs-type">ForgotPasswordViewController</span></span>, <span class="hljs-type"><span class="hljs-type">Any?</span></span>&gt;(), factory: <span class="hljs-type"><span class="hljs-type">XibFactory</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>.pushToNavigation()) .from(loginScreen.expectingContainer()) .assemble()</code> </pre> <br><p>  <em>Anda dapat menggunakan konfigurasi dalam contoh untuk navigasi di <code>ForgotPasswordViewController</code> dan <code>LoginViewController</code></em> </p><br><h4 id="dlya-chego-expectingcontainer-v-primere-vyshe">  Mengapa <code>expectingContainer</code> dalam contoh di atas? </h4><br><p>  Karena tindakan <code>pushToNavigation</code> memerlukan keberadaan <code>UINavigationController</code> dan dalam konfigurasi setelahnya, metode <code>expectingContainer</code> memungkinkan kita untuk menghindari kesalahan kompilasi dengan memastikan bahwa kita berhati-hati ketika router mencapai <code>loginScreen</code> dalam <code>loginScreen</code> , <code>UINavigationController</code> akan ada di sana. </p><br><h4 id="chto-proizoydet-esli-v-konfiguracii-vyshe-ya-zamenyu-generalstepcurrent-na-generalsteproot">  Apa yang terjadi jika dalam konfigurasi di atas saya mengganti <code>GeneralStep.current</code> dengan <code>GeneralStep.root</code> ? </h4><br><p>  Ini akan berfungsi, tetapi karena Anda memberi tahu router bahwa Anda ingin mulai membangun rantai dari root <code>UIViewController</code> , jika ada modal <code>UIViewController</code> dibuka di atasnya, router akan menyembunyikannya sebelum Anda mulai membangun rantai. </p><br><h4 id="v-moem-prilozhenii-est-uitabbarcontroller-soderzhaschiy-homeviewcontroller-i-bagviewcontroller-v-kachestve-tabov-ya-hochu-chtoby-polzovatel-mog-mezhdu-nimi-pereklyuchatsya-ispolzuya-ikonki-na-tabah-kak-obychno-no-esli-ya-vyzovu-konfiguraciya-programmno-naprimer-polzovatel-nazhmet-go-to-bag-vnutri-homeviewcontroller-prilozhenie-dolzhno-ne-pereklyuchit-tab-a-pokazat-bagviewcontroller-modalno">  Aplikasi saya memiliki <code>UITabBarController</code> berisi <code>HomeViewController</code> dan <code>BagViewController</code> sebagai tab.  Saya ingin pengguna dapat beralih di antara mereka menggunakan ikon pada tab seperti biasa.  Tetapi jika saya memanggil konfigurasi secara terprogram (misalnya, pengguna mengklik "Pergi ke Tas" di dalam <code>HomeViewController</code> ), aplikasi tidak boleh beralih tab, tetapi tunjukkan <code>BagViewController</code> . </h4><br><p>  Ada 3 cara untuk mencapai ini dalam konfigurasi: </p><br><ol><li>  Setel <code>StackIteratingFinder</code> untuk mencari hanya yang terlihat menggunakan [.current, .visible] </li><li>  Gunakan <code>NilFinder</code> yang berarti bahwa router tidak akan pernah menemukan BagViewController di <code>BagViewController</code> dan akan selalu membuatnya.  Namun, pendekatan ini memiliki efek samping - jika, misalnya, pengguna yang sudah ada di <code>BagViewController</code> disajikan secara <code>BagViewController</code> , dan, misalnya, mengklik tautan universal yang harus ditunjukkan <code>BagViewController</code> kepadanya, maka router tidak akan menemukannya dan akan membuat contoh lain dan menunjukkannya di atasnya secara modal.  Ini mungkin bukan yang Anda inginkan. </li><li>  Ubah sedikit <code>ClassFinder</code> sehingga hanya menemukan <code>BagViewController</code> ditampilkan secara modern dan mengabaikan sisanya, dan sudah menggunakannya dalam konfigurasi. </li></ol><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModalBagFinder</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StackIteratingFinder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isTarget</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> viewController: BagViewController, with context: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> viewController.presentingViewController != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> screen = <span class="hljs-type"><span class="hljs-type">StepAssembly</span></span>( finder: <span class="hljs-type"><span class="hljs-type">ModalBagFinder</span></span>(), factory: <span class="hljs-type"><span class="hljs-type">XibFactory</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>.pushToNavigation()) .from(<span class="hljs-type"><span class="hljs-type">NavigationControllerStep</span></span>()) .using(<span class="hljs-type"><span class="hljs-type">GeneralAction</span></span>.presentModally()) .from(<span class="hljs-type"><span class="hljs-type">GeneralStep</span></span>.current()) .assemble()</code> </pre> <br><h3 id="vmesto-zaklyucheniya">  Alih-alih sebuah kesimpulan </h3><br><p>  Saya harap metode konfigurasi router menjadi lebih jelas.  Seperti yang saya katakan, kami menggunakan pendekatan ini dalam 3 aplikasi dan belum mengalami situasi di mana itu tidak cukup fleksibel.  Perpustakaan, serta implementasi router yang disediakan untuknya, tidak menggunakan trik objektif dengan runtime dan sepenuhnya mengikuti semua konsep Cocoa Touch, hanya membantu memecah proses komposisi menjadi langkah-langkah dan mengeksekusi mereka dalam urutan yang diberikan dan diuji dengan iOS versi 9 sampai 12. Selain itu , pendekatan ini cocok dengan semua pola arsitektur yang melibatkan bekerja dengan tumpukan <code>UIViewController</code> (MVC, MVVM, VIP, RIB, VIPER, dll.) </p><br><p>  Saya akan senang atas komentar dan saran Anda.  Terutama jika Anda berpikir bahwa beberapa aspek layak untuk ditelusuri lebih detail.  Mungkin konsep konteks perlu klarifikasi. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id428990/">https://habr.com/ru/post/id428990/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id428980/index.html">Broker JavaScript Offline</a></li>
<li><a href="../id428982/index.html">Cara menulis D pada ARM</a></li>
<li><a href="../id428984/index.html">Julia dan potret fase sistem dinamis</a></li>
<li><a href="../id428986/index.html">ThinkJava Conference # 8 di Kharkov</a></li>
<li><a href="../id428988/index.html">Tips Alam - Cloudy Night Light</a></li>
<li><a href="../id428992/index.html">Bypass kunci secara selektif pada router dengan firmware Padavan dan Keenetic OS</a></li>
<li><a href="../id428994/index.html">Jaringan di Android menggunakan Corutin dan Retrofit</a></li>
<li><a href="../id428996/index.html">Klub Santa Claus anonim 2018-2019 di Habrahabr</a></li>
<li><a href="../id428998/index.html">Cara menggunakan fitur Profiler eksperimental baru di Bereaksi</a></li>
<li><a href="../id429000/index.html">Mengapa Bill Gates menciptakan toilet sebesar $ 233 miliar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>