<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏿 🤲🏾 ⌨️ Erstellen Ihrer ersten ARCore-Anwendung 🏒 🌕 👩🏾‍🤝‍👩🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem früheren Artikel habe ich bereits erklärt, was ARCore ist und wie es Entwicklern hilft, erstaunliche Augmented-Reality-Anwendungen zu erstell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen Ihrer ersten ARCore-Anwendung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438178/"><p><img src="https://habrastorage.org/getpro/habr/post_images/cd8/f22/342/cd8f2234275cbc67a7956d0eb233e1ec.jpg" alt="Erstellen Ihrer ersten ARCore-Anwendung"></p><br><p>  In einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">früheren Artikel habe</a> ich bereits erklärt, was ARCore ist und wie es Entwicklern hilft, erstaunliche Augmented-Reality-Anwendungen zu erstellen, ohne Mathematik und OpenGL verstehen zu müssen. </p><br><p>  Wenn Sie es noch nicht gelesen haben, empfehle ich dringend, dies zu tun, bevor Sie mit diesem Artikel fortfahren und mit der Entwicklung von ARCore-Anwendungen beginnen. </p><a name="habracut"></a><br><h2 id="nachalo-raboty">  Erste Schritte </h2><br><p> Um mit der Entwicklung von ARCore-Anwendungen zu beginnen, müssen Sie Ihrem Projekt zunächst ARCore-Unterstützung hinzufügen.  Es ist sehr einfach, da wir das Android Studio und das Sceneform SDK verwenden werden.  Es gibt zwei Hauptvorgänge, die von Sceneform automatisch ausgeführt werden: </p><br><ol><li>  Suchen Sie nach ARCore. </li><li>  Fordern Sie die Erlaubnis zur Verwendung der Kamera an. </li></ol><br><p>  Sie müssen sich nicht um diese beiden Schritte kümmern, wenn Sie eine ARCore-Anwendung mit dem Sceneform SDK erstellen.  Sie müssen lediglich das Sceneform SDK zu Ihrem Projekt hinzufügen. </p><br><p>  Erstellen Sie ein neues Android Studio-Projekt mit einer leeren Aktivität. </p><br><p> Fügen Sie der Datei <code>build.gradle</code> auf Projektebene die folgende Abhängigkeit <code>build.gradle</code> : </p><br><pre> <code class="plaintext hljs">dependencies { classpath 'com.google.ar.sceneform:plugin:1.5.0' }</code> </pre> <br><p>  <code>build.gradle</code> Sie diese Abhängigkeit der Datei <code>build.gradle</code> auf Anwendungsebene hinzu: </p><br><pre> <code class="plaintext hljs">implementation "com.google.ar.sceneform.ux:sceneform-ux:1.5.0"</code> </pre> <br><p>  Synchronisieren Sie nun das Projekt mit den Gradle-Dateien und warten Sie, bis der Build abgeschlossen ist.  Daher werden das Sceneform SDK und das Sceneform-Plugin für Android Studio zum Projekt hinzugefügt.  Auf diese Weise können Sie <code>.sfb</code> , bei denen es sich um 3D-Modelle handelt, die in Ihrer Kamera gerendert werden, und Sie können 3D-Ressourcen importieren, anzeigen und erstellen. </p><br><h2 id="sozdanie-vashego-pervogo-arcore-prilozheniya">  Erstellen Ihrer ersten ARCore-Anwendung </h2><br><p>  Nachdem das Android Studio-Setup abgeschlossen und das Sceneform SDK installiert ist, können wir mit der Erstellung unserer ersten ARCore-Anwendung beginnen. </p><br><p>  Zuerst müssen wir unserem Layout ein Sceneform-Fragment hinzufügen.  Dies ist die sogenannte <strong>Szene,</strong> in der alle unsere 3D-Modelle platziert werden.  Das Fragment kümmert sich darum, die Kamera zu initialisieren und die Berechtigungen selbst zu verarbeiten. </p><br><p>  Gehen Sie zu Ihrer Hauptlayoutdatei.  In meinem Fall ist dies die Datei <code>activity_main.xml</code> .  Und fügen Sie dort das Sceneform-Fragment hinzu: </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".MainActivity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.ar.sceneform.ux.ArFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/ux_fragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ich habe die Breite und Höhe von <code>match_parent</code> so eingestellt, dass die Szene im Vollbildmodus angezeigt wird.  Sie können die Größen entsprechend Ihren Anforderungen auswählen. </p><br><h2 id="proverka-sovmestimosti">  Kompatibilitätsprüfung </h2><br><p>  Dies ist alles, was Sie in der Layoutdatei tun müssen.  Jetzt gehen wir zu Aktivität über, in meinem Fall ist es <code>MainActivity</code> .  Fügen Sie der Aktivität eine Methode hinzu: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkIsSupportedDeviceOrFinish</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Activity activity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>, Toast.LENGTH_LONG).show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } String openGlVersionString = ((ActivityManager) activity.getSystemService(Context.ACTIVITY_SERVICE)) .getDeviceConfigurationInfo() .getGlEsVersion(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Double.parseDouble(openGlVersionString) &lt; MIN_OPENGL_VERSION) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 or later"</span></span>, Toast.LENGTH_LONG) .show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> </pre> <br><p>  Diese Methode prüft, ob Ihr Gerät das Sceneform SDK unterstützt oder nicht.  Das SDK erfordert Android API Level 27 oder höher und OpenGL ES Version 3.0 oder höher.  Wenn das Gerät diese beiden Parameter nicht unterstützt, wird die Szene nicht geladen und Ihre Anwendung zeigt einen leeren Bildschirm an. </p><br><p>  Sie können jedoch weiterhin alle anderen Funktionen Ihrer Anwendung implementieren, für die das Sceneform SDK nicht erforderlich ist. </p><br><p>  Nachdem wir die Kompatibilität überprüft haben, können wir unser 3D-Modell erstellen und an die Szene anhängen. </p><br><h2 id="dobavlenie-assets">  Assets hinzufügen </h2><br><p>  Jetzt müssen Sie dem Projekt 3D-Modelle hinzufügen, die auf Ihrem Bildschirm angezeigt werden.  Sie können diese Modelle selbst erstellen, wenn Sie mit dem Erstellungsprozess vertraut sind.  Oder du kannst zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Poly</a> gehen. </p><br><p>  Dort finden Sie ein riesiges Repository mit 3D-Ressourcen zur Auswahl.  Darüber hinaus können sie kostenlos heruntergeladen werden. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/765/458/73b/76545873b1dadbde506f9747decd5952.jpg" alt="Poly"></p><br><p>  Öffnen Sie in Android Studio Ihren Anwendungsordner im linken Bereich.  Sie benötigen einen <strong>Sampledata-</strong> Ordner.  Dieser Ordner enthält alle Ihre 3D-Modelle.  Erstellen Sie in diesem Ordner einen Ordner mit dem Namen Ihres Modells. </p><br><p>  In dem Archiv, das Sie von Poly herunterladen, finden Sie höchstwahrscheinlich 3 Dateien: </p><br><ol><li>  <code>.mtl</code> Datei </li><li>  <code>.obj</code> Datei </li><li>  <code>.png</code> Datei </li></ol><br><p>  Die wichtigste dieser drei Dateien ist die <code>.obj</code> Datei.  Das ist dein Modell.  Legen Sie alle 3 Dateien in <strong>Sampledata -&gt; "Ihr Modellordner"</strong> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/25a/afc/34d/25aafc34d50054f1b42b3e80660d41e9.jpg" alt="Der Pfad zum 3D-Modell"></p><br><p>  Klicken Sie nun mit der rechten <code>.obj</code> auf die <code>.obj</code> Datei.  Die erste Option wäre " <strong>Sceneform Asset importieren"</strong> .  Klicken Sie darauf, ändern Sie die Standardeinstellungen nicht, klicken Sie im nächsten Fenster einfach auf <strong>Fertig stellen</strong> .  Synchronisieren Sie danach das Projekt mit den Gradle-Dateien. </p><br><p>  Der Import der 3D-Ressource, die in Ihrem Projekt verwendet wird, ist abgeschlossen.  Als nächstes verwenden wir das 3D-Modell in unserem Code und fügen es in die Szene ein. </p><br><h2 id="sozdanie-modeli">  Modellerstellung </h2><br><p>  Fügen Sie Ihrer Aktivität den folgenden Code hinzu, und ich werde ihn Zeile für Zeile erklären: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TAG = MainActivity.class.getSimpleName(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> MIN_OPENGL_VERSION = <span class="hljs-number"><span class="hljs-number">3.0</span></span>; ArFragment arFragment; ModelRenderable lampPostRenderable; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@SuppressWarnings</span></span>({<span class="hljs-string"><span class="hljs-string">"AndroidApiChecker"</span></span>, <span class="hljs-string"><span class="hljs-string">"FutureReturnValueIgnored"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!checkIsSupportedDeviceOrFinish(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } setContentView(R.layout.activity_main); arFragment = (ArFragment) getSupportFragmentManager().findFragmentById(R.id.ux_fragment); ModelRenderable.builder() .setSource(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Uri.parse(<span class="hljs-string"><span class="hljs-string">"LampPost.sfb"</span></span>)) .build() .thenAccept(renderable -&gt; lampPostRenderable = renderable) .exceptionally(throwable -&gt; { Toast toast = Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"Unable to load andy renderable"</span></span>, Toast.LENGTH_LONG); toast.setGravity(Gravity.CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); toast.show(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }); }</code> </pre> <br><p>  Zuerst finden wir <code>arFragment</code> , das wir zuvor zum Layout hinzugefügt haben.  Dieses Fragment ist für die Speicherung und den Betrieb der Szene verantwortlich.  Sie können es sich als Container für unsere Szene vorstellen. </p><br><p>  Als Nächstes verwenden wir die <code>ModelRenderable</code> Klasse, um unser Modell zu erstellen.  Mit der <code>setSource</code> Methode laden wir unser Modell aus der <code>.sfb</code> Datei, die beim Import der Ressourcen generiert wurde.  Die <code>thenAccept</code> Methode <code>thenAccept</code> das Modell ab, nachdem es erstellt wurde, und wir setzen das geladene Modell auf unsere Variable <code>lampPostRenderable</code> . </p><br><p>  Für die Fehlerbehandlung haben wir eine <code>exceptionally</code> , die aufgerufen wird, wenn eine Ausnahme auftritt. </p><br><p>  All dies geschieht asynchron, sodass Sie sich keine Gedanken über Multithreading machen müssen. </p><br><p>  <code>lampPostRenderable</code> das Modell in die Variable <code>lampPostRenderable</code> geladen und gespeichert wurde, fügen wir es unserer Szene hinzu. </p><br><h2 id="dobavlenie-modeli-v-scenu">  Hinzufügen eines Modells zur Szene </h2><br><p>  Unsere Szene befindet sich in <code>arFragment</code> und empfängt Benutzer-Touch-Ereignisse.  Daher müssen wir einen <code>onTap</code> Listener für unser Fragment installieren, um Berührungen zu verarbeiten und Objekte dort zu platzieren, wo sie benötigt werden.  Fügen Sie der <code>onCreate</code> Methode den folgenden Code <code>onCreate</code> : </p><br><pre> <code class="java hljs">arFragment.setOnTapArPlaneListener( (HitResult hitresult, Plane plane, MotionEvent motionevent) -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lampPostRenderable == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Anchor anchor = hitresult.createAnchor(); AnchorNode anchorNode = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AnchorNode(anchor); anchorNode.setParent(arFragment.getArSceneView().getScene()); TransformableNode lamp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TransformableNode(arFragment.getTransformationSystem()); lamp.setParent(anchorNode); lamp.setRenderable(lampPostRenderable); lamp.select(); } );</code> </pre> <br><p>  Wir setzen den <code>onTapArPlaneListener</code> Listener für unser AR-Fragment.  Die folgende Syntax wird für Lambda-Ausdrücke verwendet.  Wenn Sie damit nicht vertraut sind, lesen Sie diese kleine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anleitung</a> zu diesem Thema. </p><br><p>  Zuerst erstellen wir mit <code>hitresult.createAnchor()</code> einen <strong>Anker</strong> aus <code>HitResult</code> und speichern ihn im <code>Anchor</code> Objekt. </p><br><p>  Dann erstellen wir einen <strong>Knoten</strong> aus diesem Anker.  Es heißt <code>AnchorNode</code> und wird mit der <code>setParent</code> Methode an die Szene <code>setParent</code> . </p><br><p>  Als nächstes erstellen wir einen <code>TransformableNode</code> , der unser Modell sein wird, und binden ihn an unseren Knoten.  <code>TransformableNode</code> enthält noch keine Informationen zu dem Objekt, das angezeigt werden soll.  Wir werden dieses Objekt mit der Methode <code>setRenderable</code> , die ein Objekt vom Typ ModelRenderable als Parameter verwendet (denken Sie daran, wir haben ein solches Objekt erhalten und es <code>lampPostRenderable</code> ?).  Und schließlich rufen wir die Methode <code>lamp.select()</code> . </p><br><p>  Ooh!  Zu viel Terminologie.  Mach dir keine Sorgen, ich werde jetzt alles erklären: </p><br><ol><li><p>  <strong>Szene</strong> : Hier werden alle Ihre 3D-Objekte angezeigt.  Diese Szene befindet sich in dem AR-Fragment, das wir dem Layout hinzugefügt haben. </p><br></li><li><p>  <strong>HitResult</strong> : Dies ist eine imaginäre Linie (oder ein Strahl) aus dem Unendlichen, die den Schnittpunkt von sich selbst mit einem Objekt der realen Welt <strong>angibt</strong> . </p><br></li><li><p>  <strong>Anker</strong> : Dies ist ein fester Ort und eine feste Orientierung in der realen Welt.  Es kann als die Koordinaten (x, y, z) im dreidimensionalen Raum verstanden werden.  Pose ist die Position und Ausrichtung eines Objekts auf der Bühne.  Es wird verwendet, um den lokalen Koordinatenraum eines Objekts in einen realen Koordinatenraum umzuwandeln. </p><br></li><li><p>  <strong>Ankerknoten</strong> : Dies ist ein Knoten, der sich automatisch in der realen Welt positioniert.  Dies ist der erste Knoten, der installiert wird, wenn eine Ebene erkannt wird. </p><br></li><li><p>  <strong>TransformableNode</strong> : Dies ist der Knoten, mit dem Sie interagieren können.  Es kann verschoben, skaliert, gedreht usw. werden.  In diesem Beispiel können wir unser Objekt skalieren und drehen.  Daher der Name Transformable. </p><br></li></ol><br><p>  Es gibt keine Raketenwissenschaft.  Es ist wirklich relativ einfach.  Die gesamte Szene kann in Form eines Diagramms angezeigt werden, in dem das übergeordnete Element die Szene ist und die untergeordneten Knoten Ankerknoten sind, die dann in verschiedene andere Knoten und Objekte verzweigen, die auf dem Bildschirm angezeigt werden. </p><br><p>  Daher sollte Ihre Aktivität folgendermaßen aussehen: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.ayusch.arcorefirst; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.Activity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.ActivityManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.net.Uri; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Build; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.util.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.Gravity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.MotionEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.Toast; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.core.Anchor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.core.HitResult; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.core.Plane; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.AnchorNode; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.rendering.ModelRenderable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.ux.ArFragment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.ar.sceneform.ux.TransformableNode; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TAG = MainActivity.class.getSimpleName(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> MIN_OPENGL_VERSION = <span class="hljs-number"><span class="hljs-number">3.0</span></span>; ArFragment arFragment; ModelRenderable lampPostRenderable; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@SuppressWarnings</span></span>({<span class="hljs-string"><span class="hljs-string">"AndroidApiChecker"</span></span>, <span class="hljs-string"><span class="hljs-string">"FutureReturnValueIgnored"</span></span>}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!checkIsSupportedDeviceOrFinish(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } setContentView(R.layout.activity_main); arFragment = (ArFragment) getSupportFragmentManager().findFragmentById(R.id.ux_fragment); ModelRenderable.builder() .setSource(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Uri.parse(<span class="hljs-string"><span class="hljs-string">"LampPost.sfb"</span></span>)) .build() .thenAccept(renderable -&gt; lampPostRenderable = renderable) .exceptionally(throwable -&gt; { Toast toast = Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"Unable to load andy renderable"</span></span>, Toast.LENGTH_LONG); toast.setGravity(Gravity.CENTER, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); toast.show(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }); arFragment.setOnTapArPlaneListener( (HitResult hitresult, Plane plane, MotionEvent motionevent) -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lampPostRenderable == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Anchor anchor = hitresult.createAnchor(); AnchorNode anchorNode = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AnchorNode(anchor); anchorNode.setParent(arFragment.getArSceneView().getScene()); TransformableNode lamp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TransformableNode(arFragment.getTransformationSystem()); lamp.setParent(anchorNode); lamp.setRenderable(lampPostRenderable); lamp.select(); } ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkIsSupportedDeviceOrFinish</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Activity activity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires Android N or later"</span></span>, Toast.LENGTH_LONG).show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } String openGlVersionString = ((ActivityManager) activity.getSystemService(Context.ACTIVITY_SERVICE)) .getDeviceConfigurationInfo() .getGlEsVersion(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Double.parseDouble(openGlVersionString) &lt; MIN_OPENGL_VERSION) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 later"</span></span>); Toast.makeText(activity, <span class="hljs-string"><span class="hljs-string">"Sceneform requires OpenGL ES 3.0 or later"</span></span>, Toast.LENGTH_LONG) .show(); activity.finish(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } }</code> </pre> <br><p>  Glückwunsch!  Sie haben gerade die Erstellung Ihrer ersten ARCore-Anwendung abgeschlossen.  Fügen Sie Objekte hinzu und Sie werden sehen, wie sie in der realen Welt zum Leben erweckt werden. </p><br><p>  Dies war Ihr erster Blick darauf, wie Sie eine einfache ARCore-Anwendung in Android Studio von Grund auf neu erstellen.  In der nächsten Lektion werde ich mich eingehender mit ARCore befassen und der Anwendung weitere Funktionen hinzufügen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438178/">https://habr.com/ru/post/de438178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438168/index.html">Wie man eine teure Kamera knackt, damit deine Frau dich nicht umbringt</a></li>
<li><a href="../de438170/index.html">Preis benannt nach Ilya Segalovich. Geschichte über Informatik und Veröffentlichungen</a></li>
<li><a href="../de438172/index.html">Apple kann die Produktion seiner Geräte nicht in die USA verlagern</a></li>
<li><a href="../de438174/index.html">Gelb - Vakuum - Wolke</a></li>
<li><a href="../de438176/index.html">IPSec Übersicht bei Mikrotik</a></li>
<li><a href="../de438180/index.html">Registrieren Sie eine Immobilientransaktion online</a></li>
<li><a href="../de438182/index.html">Die Studie fand die Vorteile einer moderaten Piraterie für Produzenten und Vertreiber von Inhalten</a></li>
<li><a href="../de438184/index.html">Bericht der Bank of America: 700 Billionen Dollar aus dem All</a></li>
<li><a href="../de438186/index.html">Checkliste: Was musste getan werden, bevor Microservices für die Produktion bereitgestellt wurden?</a></li>
<li><a href="../de438192/index.html">Dell Inspiron 14 (5482): kostengünstiges 2-in-1-Gerät mit guten Upgrade-Optionen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>