<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§Æ üßò ‚ô®Ô∏è Personnaliser Jira selon vos besoins. Flux parfait et ticket parfait üë©üèº‚Äçüé® üôåüèª üè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si vous travaillez dans une entreprise informatique, vos processus sont tr√®s probablement bas√©s sur le produit Atlassian bien connu - Jira. Il existe ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Personnaliser Jira selon vos besoins. Flux parfait et ticket parfait</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/424655/"><img src="https://habrastorage.org/webt/wm/nq/on/wmnqonj46aq2yavvhzsepa06qjo.jpeg"><br><br>  Si vous travaillez dans une entreprise informatique, vos processus sont tr√®s probablement bas√©s sur le produit Atlassian bien connu - Jira.  Il existe de nombreux trackers de t√¢ches sur le march√© pour r√©soudre les m√™mes probl√®mes, y compris des solutions open source (Trac, Redmine, Bugzilla), mais Jira est peut-√™tre le plus utilis√© aujourd'hui. <br><br>  Je m'appelle Dmitry Semenikhin, je suis chef d'√©quipe chez Badoo.  Dans une courte s√©rie d'articles, je vais vous dire exactement comment nous utilisons Jira, comment nous l'avons personnalis√© pour nos processus, quelles bonnes choses ont √©t√© ¬´viss√©es¬ª au-dessus et comment nous avons transform√© le traqueur de probl√®mes en un centre de communication unique pour la t√¢che et simplifi√© notre vie.  Dans cet article, vous verrez notre flux √† l'int√©rieur, apprenez comment vous pouvez ¬´tordre¬ª votre Jira et d√©couvrez des fonctionnalit√©s suppl√©mentaires de l'outil que vous ne connaissez peut-√™tre pas. <br><br>  L'article est principalement destin√© √† ceux qui utilisent d√©j√† Jira, mais peut avoir des difficult√©s √† int√©grer ses fonctionnalit√©s standard dans les processus existants de l'entreprise.  En outre, l'article peut √™tre utile aux entreprises qui utilisent d'autres suiveurs de t√¢ches, mais ont rencontr√© certaines restrictions et envisagent un changement de d√©cision.  L'article n'est pas construit sur le principe de ¬´probl√®me - solution¬ª, dans lequel je d√©cris les outils et fonctionnalit√©s existants que nous avons construits autour de Jira, ainsi que les technologies que nous avons utilis√©es pour les impl√©menter. <br><a name="habracut"></a><br><h1>  Fonctionnalit√©s suppl√©mentaires de Jira </h1><br>  Pour rendre le texte suivant plus compr√©hensible, voyons quels outils Jira nous fournit pour la mise en ≈ìuvre de liste de souhaits non standard - ceux qui vont au-del√† de la fonctionnalit√© Jira standard. <br><br><h3>  API REST </h3><br>  En g√©n√©ral, un appel de commande API est une demande HTTP vers une URL API indiquant la m√©thode (GET, PUT, POST et DELETE), la commande et le corps de la demande.  Le corps de la demande, ainsi que la r√©ponse de l'API, sont au format JSON.  Un exemple de demande qui renvoie une repr√©sentation JSON d'un ticket: <br><br><pre><code class="json hljs">GET /rest/api/latest/issue/{ticket_number}</code> </pre> <br>  En utilisant l'API, vous pouvez, en utilisant des scripts dans n'importe quel langage de programmation: <br><br><ul><li>  cr√©er des billets; <br></li><li>  modifier toutes les propri√©t√©s des tickets (int√©gr√©es et personnalis√©es); <br></li><li>  r√©diger des commentaires; <br></li><li>  utiliser JQL (langage de requ√™te int√©gr√©) pour recevoir les listes de tickets; <br></li><li>  et bien plus. <br></li></ul><br>  La documentation d√©taill√©e de l'API est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Nous avons √©crit notre propre client API Jira de haut niveau en PHP, qui impl√©mente toutes les commandes dont nous avons besoin.  Voici un exemple de commandes pour travailler avec des commentaires: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_post(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $comment]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id, $new_text)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_put(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $new_text]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_delete(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>); }</code> </pre><br><h3>  Webhooks </h3><br>  √Ä l'aide de webhook, vous pouvez configurer l'appel d'une fonction de rappel externe sur votre h√¥te √† divers √©v√©nements dans Jira.  En m√™me temps, vous pouvez configurer autant de r√®gles que vous le souhaitez afin que diff√©rentes URL se ¬´tordent¬ª pour diff√©rents √©v√©nements et pour les tickets qui correspondent au filtre sp√©cifi√© dans le webhook.  L'interface de configuration des webhooks est disponible pour l'administrateur Jira. <br><br>  Par cons√©quent, vous pouvez cr√©er des r√®gles comme celle-ci: <br><br>  <b>Nom</b> : ¬´SRV - Nouvelle fonctionnalit√© cr√©√©e / mise √† jour¬ª <br>  <b>URL</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.myremoteapp.com/webhookreceiver</a> <br>  <b>Port√©e</b> : Project = SRV AND type in ('New Feature') <br>  <b>√âv√©nements</b> : probl√®me mis √† jour, probl√®me cr√©√© <br><br>  Dans cet exemple, l'URL sp√©cifi√©e sera appel√©e pour la cr√©ation de tickets et les √©v√©nements de modification correspondant au filtre d' <i>√©tendue</i> .  Dans le m√™me temps, le corps de la demande contiendra toutes les informations n√©cessaires sur ce qui a exactement chang√© et quel √©v√©nement s'est produit. <br><br>  Il est important de comprendre que Jira ne garantit pas que votre √©v√©nement sera livr√©.  Si l'URL externe n'a pas r√©pondu ou a r√©pondu avec une erreur, cela ne sera visible nulle part (sauf pour les journaux, peut-√™tre).  Par cons√©quent, le gestionnaire d'√©v√©nements Webhook doit √™tre aussi fiable que possible.  Par exemple, vous pouvez mettre les √©v√©nements en file d'attente et essayer de les traiter jusqu'√† ce qu'il r√©ussisse.  Cela aidera √† r√©soudre les probl√®mes li√©s aux services temporairement indisponibles, par exemple, toute base de donn√©es externe n√©cessaire au traitement correct de l'√©v√©nement. <br><br>  Une documentation d√©taill√©e sur les webhooks est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h3>  Scriptrunner </h3><br>  Il s'agit d'un plugin pour Jira, un outil tr√®s puissant qui vous permet de personnaliser beaucoup de Jira (y compris la possibilit√© de remplacer les webhooks).  L'utilisation de ce plugin n√©cessite une connaissance de Groovy.  Le principal avantage de l'outil pour nous est que vous pouvez int√©grer une logique personnalis√©e dans le flux en ligne.  Votre code de script sera ex√©cut√© imm√©diatement dans l'environnement Jira en r√©ponse √† une action sp√©cifique.  Par exemple, vous pouvez cr√©er votre propre bouton dans l'interface de ticket, en cliquant dessus, vous cr√©erez des tickets associ√©s √† la t√¢che en cours ou ex√©cuterez des tests unitaires pour cette t√¢che.  Et si soudainement quelque chose se passe mal, vous en tant qu'utilisateur le saurez imm√©diatement. <br><br>  Les personnes int√©ress√©es peuvent lire la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . <br><br><h1>  Flow: ce qui est cach√© sous le capot </h1><br>  Et maintenant sur la fa√ßon dont nous appliquons des fonctionnalit√©s suppl√©mentaires de Jira dans nos projets.  Consid√©rez cela dans le contexte du passage de notre ticket de flux typique de la cr√©ation √† la fermeture.  En m√™me temps, je vais vous parler du flux lui-m√™me. <br><br><h3>  Ouvert / backlog </h3><br>  Ainsi, tout d'abord, le ticket entre dans l'arri√©r√© de nouveaux tickets avec le statut <b>Ouvert</b> .  De plus, le chef de composant, apr√®s avoir vu un nouveau ticket sur son tableau de bord, prend une d√©cision: attribuer un ticket d√®s maintenant au d√©veloppeur ou l'envoyer au backlog des tickets connus (statut <b>Backlog</b> ) afin que vous puissiez l'attribuer plus tard lorsqu'un d√©veloppeur gratuit appara√Æt et que les tickets de priorit√© sup√©rieure seront ferm√©s.  Cela peut sembler √©trange, car il semble logique de faire le contraire: cr√©er des tickets avec le statut <i>Backlog</i> , puis les traduire en statut Open.  Mais nous avons pr√©cis√©ment pris racine dans ce sch√©ma.  Il vous permet de configurer facilement des filtres pour r√©duire le temps de d√©cision pour les nouveaux tickets.  Un exemple de filtre JQL qui affiche de nouvelles t√¢ches pour une piste: <br><br> <code>Project = SRV AND assignee is EMPTY AND status in (Open)</code> <br> <br><h3>  En cours </h3><br><div class="spoiler">  <b class="spoiler_title">Nuances techniques du travail avec Git</b> <div class="spoiler_text">  Il convient de noter que nous travaillons sur chaque t√¢che dans une branche Git distincte.  Quant √† cela, nous avons convenu que le nom de la succursale au d√©but devrait contenir le num√©ro de ticket.  Par exemple, <i>SRV-123_new_super_feature</i> .  De plus, les commentaires pour chaque commit dans la branche doivent contenir le num√©ro de ticket au format [SRV-123]: {comment}.  Nous avons besoin d'un tel format, par exemple, pour la suppression correcte d'une ¬´mauvaise¬ª t√¢che d'une build.  La proc√©dure √† suivre est d√©crite en d√©tail dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> . <br><br>  Ces exigences sont contr√¥l√©es par des crochets Git.  Par exemple, voici le contenu de prepare-commit-msg, qui pr√©pare un commentaire pour la validation, obtenant le num√©ro de ticket √† partir du nom de la branche actuelle: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash b=`git symbolic-ref HEAD| sed -e 's|^refs/heads/||' | sed -e 's|_.*||'` c=`cat $1` if [ -n "$b" ] &amp;&amp; [[ "$c" != "[$b]:"* ]] then echo "[$b]: $c" &gt; $1 fi</span></span></code> </pre><br>  Si vous essayez de pousser un commit avec un commentaire ¬´incorrect¬ª, un tel push sera rejet√©.  Une tentative de cr√©ation d'une agence sans num√©ro de ticket au d√©but sera √©galement rejet√©e. <br></div></div><br>  Lorsqu'un ticket frappe le d√©veloppeur, la premi√®re chose qu'il d√©compose.  Le r√©sultat de la d√©composition est l‚Äôid√©e du d√©veloppeur de savoir comment r√©soudre le probl√®me et combien de temps la solution prendra.  Une fois que tous les d√©tails principaux ont √©t√© clarifi√©s, le ticket est transf√©r√© au statut <b>En cours</b> et le d√©veloppeur commence √† √©crire du code. <br><br>  Il est habituel pour nous de d√©finir la date d'√©ch√©ance de la t√¢che au moment o√π elle est transf√©r√©e au statut En cours.  Si le d√©veloppeur ne l'a pas fait, il recevra un rappel dans le messager d'entreprise HipChat.  Un script sp√©cial toutes les deux heures: <br><br><ul><li>  l'utilisation de l'API Jira REST s√©lectionne les tickets en √©tat de progression avec un champ de date d'√©ch√©ance vide ( <i>projet = SRV AND status = 'In Progress' AND duedate is EMPTY</i> ); <br></li><li>  s√©lectionne les tickets incomplets dont la date d'√©ch√©ance est ant√©rieure √† la date actuelle ( <i>projet = SRV AND status = 'In Progress'</i> <i>AND duedate is not EMPTY AND duedate &lt;now ()</i> ); <br></li><li>  reconna√Æt le d√©veloppeur pour chaque ticket en lisant le champ correspondant dans le ticket, ainsi que le lead du d√©veloppeur; <br></li><li>  regroupe les tickets des d√©veloppeurs et des prospects et envoie des rappels √† HipChat √† l'aide de son API. <br></li></ul><br>  Apr√®s avoir fait tous les commits n√©cessaires, le d√©veloppeur pousse la branche dans un navet commun.  Dans ce cas, le crochet Git post-r√©ception se d√©clenche, ce qui fait beaucoup de choses int√©ressantes: <br><br><ul><li>  Le nom de la branche Git, ainsi que les commentaires sur les commits, sont v√©rifi√©s pour la conformit√© √† nos r√®gles; <br></li><li>  il est v√©rifi√© que le ticket auquel la branche est associ√©e n'est pas ferm√© (vous ne pouvez pas ins√©rer de nouveau code dans des tickets ferm√©s); <br></li><li>  La syntaxe des fichiers PHP modifi√©s est v√©rifi√©e (PHP -l <i>nom_fichier.php</i> ); <br></li><li>  le formatage est v√©rifi√©; <br></li><li>  si le ticket dans lequel la branche est pouss√©e est dans l'√©tat <i>Ouvert</i> , il sera automatiquement transf√©r√© dans l'√©tat <i>En cours</i> ; <br></li><li>  le ticket est attach√© √† la succursale, l'entr√©e correspondante est effectu√©e dans le champ personnalis√© du ticket <i>Commits</i> √† l'aide de l'API Jira.  Cela ressemble √† ceci: <br></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/yt/-u/snyt-ud30nzzbgr4seaehcccnme.png"></div><br>  ( <i>branchdiff</i> est un lien vers le diff de la branche dont la t√™te est √† l'origine de la branche actuelle dans notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">outil de</a> r√©vision de code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Codeisok</a> ); <br><br><ul><li>  un commentaire est cr√©√© dans le ticket avec tous les commits de cette push. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5p/np/28/5pnp284b9eobeeyafn3hfjgcimu.png"></div><br>  <i>(Aida est le nom conditionnel de notre complexe d'automatisation pour travailler avec Jira, Git et pas seulement. C'est √† partir de ce nom que les commentaires automatiques apparaissent dans le ticket. Nous en avons √©crit plus sur Aida dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> ).</i> <br>  Un clic sur le hachage du commit ouvre le diff avec la r√©vision pr√©c√©dente de la branche (je vais le montrer ci-dessous); <br></li><li>  il v√©rifie s'il existe des fichiers dans la branche qui peuvent n√©cessiter une traduction dans les langues prises en charge (par exemple, les mod√®les de page Web), et s'il y en a, la nouvelle valeur \ Changed est d√©finie dans le champ personnalis√© du ticket Lexems.  Cela garantit que le ticket ne sera pas mis en production sans une traduction compl√®te; <br></li><li>  le nom de l'employ√© qui pousse la branche est ajout√© √† la liste des d√©veloppeurs (un champ personnalis√© du ticket <i>D√©veloppeurs</i> ) <br></li></ul><br><h3>  En r√©vision </h3><br>  Apr√®s avoir √©crit le code et v√©rifi√© que toutes les conditions requises pour la t√¢che sont remplies et que les tests ne sont pas rompus, le d√©veloppeur attribue un ticket au r√©viseur (statut <b>En r√©vision</b> ).  En r√®gle g√©n√©rale, le d√©veloppeur d√©cide qui examinera son ticket.  Ce sera probablement un autre d√©veloppeur qui conna√Æt bien la bonne partie du code.  La r√©vision s'effectue √† l'aide de l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Codeisok</a> , qui s'ouvre imm√©diatement avec le diff souhait√© en cliquant sur le lien <i>branchdiff</i> dans le <i>champ</i> Ticket de validation ou dans le commentaire en tant que hachage de validation dans les commentaires. <br><br>  L'√©valuateur voit quelque chose comme ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ty/eg/ti/tyegti15pqhzbdgiebcw1evm8pi.png"></div><br>  Une fois la r√©vision termin√©e, le r√©viseur appuie sur le bouton <i>Terminer</i> et, entre autres, √† ce moment, les √©v√©nements suivants se produisent: <br><br><ul><li>  √† l'aide de l'API JIra, un commentaire est cr√©√© dans le ticket avec les commentaires du r√©viseur dans le contexte du code.  Cela ressemble √† ceci: <br></li></ul><br><img src="https://habrastorage.org/webt/0k/n6/ka/0kn6kaydki4umhdxzmjebixy6eu.png"><br><ul><li>  s'il y avait des commentaires sur le code et que le r√©viseur a d√©cid√© de rouvrir le ticket, le d√©veloppeur recevra une notification √† ce sujet dans HipChat (cela se fait en utilisant la r√®gle du webhook, qui fonctionne √† la r√©ouverture); <br></li><li>  Le champ de ticket <i>Reviewers</i> est rempli. <br></li></ul><br><h3>  R√©solu </h3><br>  En outre, si l'examen a r√©ussi, le ticket est envoy√© √† l'arri√©r√© des ing√©nieurs QA dans le statut <b>R√©solu</b> .  Mais en m√™me temps, en utilisant webhook pour l'√©v√©nement r√©solu, des tests automatiques sur le code de branche sont lanc√©s en arri√®re-plan.  Apr√®s quelques minutes, un nouveau commentaire appara√Ætra dans le ticket, qui vous informera des r√©sultats du test. <br><br><img src="https://habrastorage.org/webt/um/ff/cc/umffccnuyujwg3ypdz3scdcrrou.png"><br><br>  De plus, √† tout moment, vous pouvez lancer manuellement un cycle de test r√©p√©t√© en cliquant sur le bouton sp√©cial Ex√©cuter les tests unitaires dans le menu du ticket.  Apr√®s une ex√©cution r√©ussie, un nouveau commentaire appara√Ætra dans le ticket, similaire au pr√©c√©dent. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/sk/65/ttsk65fr3egs9fbjpa7v6pbdzta.png"></div><br>  En fait, ce bouton est l'un des √©tats de t√¢che suppl√©mentaires dans le flux de travail Jira, une traduction dans laquelle d√©clenche un script Groovy pour le plugin ScriptRunner.  Le script appelle une URL externe, qui lance l'ex√©cution du test, et si l'URL a r√©pondu avec succ√®s, le ticket revient √† son √©tat pr√©c√©dent (dans notre cas, <i>R√©solu</i> ). <br><br><h3>  In Shot / In Shot - OK </h3><br>  La t√¢che est d'abord test√©e dans un environnement de d√©veloppement.  Si tout va bien, un plan est cr√©√© (par exemple, en cliquant sur le lien <i>Cr√©er un plan</i> dans le champ <i>Valeurs</i> ) - le r√©pertoire sur le serveur d√©di√© vers lequel les modifications du ticket sont copi√©es qui sont adjacentes au ma√Ætre actuel.  Le serveur fonctionne avec les donn√©es de production: les bases de donn√©es et les services sont les m√™mes qui servent les vrais utilisateurs.  Ainsi, le testeur peut ouvrir un site Web ou se connecter √† la prise de vue √† l'aide d'un client mobile et "isoler" la fonctionnalit√© dans l'environnement de production.  "Isol√©" signifie qu'aucun autre code / fonctionnalit√©, √† l'exception du nouveau de la branche et du ma√Ætre actuel, n'est ex√©cut√©.  Par cons√©quent, cette √©tape de test est peut-√™tre la principale, car elle permet √† l'ing√©nieur QA de trouver le probl√®me de la mani√®re la plus fiable directement dans le probl√®me de test. <br><br>  Les ressources de prise de vue sont accessibles √† l'aide d'URL sp√©ciales g√©n√©r√©es dans le script de cr√©ation de prise de vue et plac√©es dans l'en-t√™te du ticket √† l'aide de l'API Jira.  En cons√©quence, nous voyons des liens vers le site, le panneau d'administration, les journaux et d'autres outils qui sont ex√©cut√©s dans un environnement de prise de vue: <br><br><img src="https://habrastorage.org/webt/kf/yk/e_/kfyke_qa3yjtezpyqx0-edwghfw.png"><br><br>  De plus, au moment de la g√©n√©ration de plans, un script est lanc√© qui analyse le contenu des fichiers modifi√©s et cr√©e des demandes de traduction des nouveaux jetons trouv√©s.  Une fois la traduction termin√©e, la valeur du champ <i>Lexems est</i> remplac√©e par Termin√© et le ticket peut √™tre ajout√© √† la g√©n√©ration. <br><br>  Si le test en plan a r√©ussi, le ticket est transf√©r√© au statut <b>En plan - OK.</b> <br><br><h3>  En construction / En construction - OK </h3><br>  Nous t√©l√©chargeons le code deux fois par jour - le matin et le soir.  Pour ce faire, une branche de construction sp√©ciale est cr√©√©e, qui sera finalement fusionn√©e avec le ma√Ætre et dispos√©e ¬´au combat¬ª. <br><br>  Au moment de la cr√©ation de la branche de g√©n√©ration, un script sp√©cial utilisant une requ√™te JQL re√ßoit une liste de tickets dans l'√©tat <i>In Shot - OK</i> et essaie de les figer dans la branche de construction lorsque toutes les conditions suivantes sont remplies: <br><br><ul><li>  la traduction du ticket est termin√©e ou rien n'a besoin d'√™tre traduit ( <i>Lexems dans ('Non', 'Termin√©')</i> ); <br></li><li>  le d√©veloppeur est pr√©sent sur le lieu de travail (le syst√®me de fusion automatique v√©rifie sur la base interne si le d√©veloppeur est en vacances ou en cong√© de maladie, et si c'est le cas, le ticket ne peut √™tre gel√© que manuellement par les ing√©nieurs de publication ou un autre d√©veloppeur responsable, ce qui est indiqu√© dans le champ sp√©cial <i>Vice Developer</i> ; le chef du d√©veloppeur absent dans ce cas re√ßoit une notification indiquant que le ticket ne peut pas √™tre automatiquement ajout√© √† la version); <br></li><li>  le ticket n'a pas le drapeau <i>Up in Build</i> d√©fini <i>par le d√©veloppeur</i> (il s'agit d'un champ personnalis√© sp√©cial du ticket qui permet au d√©veloppeur de d√©terminer quand le ticket ira √† la build); <br></li><li>  la branche de ticket ne d√©pend pas d'une autre branche qui n'a pas encore atteint le ma√Ætre ou la build actuelle.  Nous faisons de notre mieux pour √©viter une telle situation, mais cela se produit parfois lorsque le d√©veloppeur cr√©e sa propre branche non pas √† partir du ma√Ætre, mais √† partir d'une branche d'un autre ticket, ou lorsqu'il se fige une autre branche pour lui-m√™me.  Cela peut √©galement √™tre fait par hasard, nous avons donc d√©cid√© qu'une protection suppl√©mentaire ne nuirait pas. <br></li></ul><br>  Il convient de noter que la fusion automatique peut ne pas se produire en raison d'un conflit de fusion.  Dans ce cas, le ticket est automatiquement transf√©r√© au statut de <b>r√©ouverture</b> et attribu√© au d√©veloppeur, √† propos duquel il re√ßoit imm√©diatement une notification dans HipChat, et un message correspondant est ajout√© au commentaire du ticket.  Apr√®s avoir r√©solu le conflit, le ticket revient √† la g√©n√©ration. <br><br>  Si tout va bien et que la branche de ticket est fig√©e dans la build, le ticket est automatiquement transf√©r√© vers le statut <b>In Build</b> et le nom de la build est √©crit dans le champ personnalis√© du ticket <i>Build_Name</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/bl/cq/teblcqsgvc0tgn82svazpssgmii.png"></div><br>  De plus, en utilisant cette valeur, il est facile d'obtenir une liste des tickets qui ont √©t√© publi√©s avec chaque build.  Par exemple, pour rechercher quelqu'un √† bl√¢mer en cas de probl√®me. <br><br>  √Ä l'√©tape suivante, les ing√©nieurs QA v√©rifient en outre si le code de t√¢che fonctionne correctement en conjonction avec d'autres t√¢ches de la build.  Si tout va bien, le ticket est d√©fini manuellement sur <b>In Build - OK.</b> <br><br><h3>  En production / En production - OK / Ferm√© </h3><br>  De plus, lors de la construction, l'ensemble de nos tests est ex√©cut√© (Unit, int√©gration, Selenium-, etc.).  Si tout va bien, la construction est fig√©e dans master et le code est mis en production.  Le ticket est transf√©r√© au statut <b>En production.</b> <br><br>  De plus, le d√©veloppeur (ou le client) s'assure que la fonctionnalit√© fonctionne correctement en production et d√©finit le statut du ticket <b>En production - OK.</b> <br><br>  Apr√®s deux semaines, les tickets en statut <i>En production - OK</i> sont automatiquement transf√©r√©s en statut <b>Ferm√©</b> , si quelqu'un ne l'a pas fait manuellement auparavant. <br><br>  Il convient √©galement de mentionner des statuts suppl√©mentaires dans lesquels le ticket peut √™tre situ√©: <br><br><ul><li>  <b>Exigences</b> - lorsqu'il n'est pas possible d'obtenir rapidement du client les clarifications n√©cessaires sur la t√¢che, et sans eux, un travail suppl√©mentaire sur le ticket est impossible, le ticket est transf√©r√© √† ce statut et attribu√© √† celui qui a besoin de donner des explications; <br></li><li>  <b>Suspendu</b> - si le travail de ticket est suspendu, par exemple, si le d√©veloppeur est bloqu√© par les t√¢ches d'une √©quipe adjacente ou a √©t√© contraint de passer √† une t√¢che plus urgente; <br></li><li>  <b>Rouvert</b> - une t√¢che peut √™tre red√©couverte au d√©veloppeur apr√®s un examen, apr√®s des tests, apr√®s une tentative infructueuse de fusionner une branche avec le ma√Ætre. <br></li></ul><br>  En cons√©quence, un diagramme simplifi√© de notre flux de travail ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-m/cd/ue/-mcduen0-daw39ykqjhvp4rvdka.png"></div><br><h1>  Ticket - centre de communication pour la t√¢che </h1><br>  √Ä la suite du passage du ticket dans le flux, son en-t√™te acquiert approximativement la forme suivante: <br><br><img src="https://habrastorage.org/webt/c7/4t/qp/c74tqp2l7smg9unpuxpgzw3fhxo.png"><br><br>  Quoi d'autre est int√©ressant ici que nous avons personnalis√© pour nous et que je n'ai pas encore mentionn√©? <br><br><ul><li>  <i>Composant</i> - utilis√© pour regrouper un ticket dans un grand d√©partement.  Diff√©rents sous-groupes sont responsables de diff√©rents composants et, par cons√©quent, sur leurs tableaux de bord, ils ne voient que les t√¢ches de leurs composants.  Par exemple, je peux lister tous les bogues ouverts pour les composants de mon √©quipe avec cette requ√™te: <br><br><pre> <code class="php hljs">Project = SRV <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> type = Bug <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> status = Open <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> component in componentsLeadByUser(d.semenihin)</code> </pre> <br></li><li>  <i>R√©vision</i> - si une r√©vision du code est n√©cessaire.  La valeur par d√©faut est n√©cessaire.  Si la valeur du champ est d√©finie sur <i>Non, le</i> ticket obtiendra imm√©diatement le statut <i>R√©solu.</i> <i><br></i> <br>  QA - Le testeur doit-il √™tre v√©rifi√©?  La valeur par d√©faut est n√©cessaire.  Si la valeur du champ est d√©finie sur <i>Non, le</i> ticket passe imm√©diatement √† l'√©tat <i>In Shot - OK.</i> <i><br></i> <br>  Sprint - dans notre cas, il n'est pertinent que pour les t√¢ches avec le type Nouvelle fonctionnalit√©, un plan pour lequel nous √©tablissons √† l'avance pour une semaine. <br></li><li>  <i>Date d'√©ch√©ance</i> - le d√©veloppeur d√©termine la date √† laquelle le ticket sera en production.  Expos√© avant de commencer le travail sur la t√¢che. <br></li><li>  <i>Situation</i> - en fait, un court journal avec une br√®ve description de l'√©tat actuel de la t√¢che.  Par exemple, <i>¬´20/08 j'attends des traductions¬ª</i> , <i>¬´21/08 Une clarification est demand√©e au client sur le probl√®me X¬ª</i> .  Cela permet de voir un bref r√©sum√© de la t√¢che dans la liste des autres t√¢ches. <br></li><li>  <i>Msg4QA</i> - informations pour les ing√©nieurs QA, que le d√©veloppeur partage pour simplifier le processus de test <br></li></ul><br>  Nous essayons de mener une discussion sur les questions controvers√©es avec le directeur de t√¢che dans les commentaires du ticket, et non de ¬´salir¬ª les clarifications importantes par courrier et messagerie instantan√©e.  Si la discussion a n√©anmoins eu lieu ¬´en marge¬ª, il est hautement souhaitable de copier ce que vous avez convenu dans le ticket. <br><br>  En plus des textes ¬´humains¬ª, comme je l'ai mentionn√© plus haut, beaucoup de choses sont √©crites automatiquement dans un commentaire √† l'aide de l'API: <br><br><ul><li>  commet <br></li><li>  examiner les r√©sultats; <br></li><li>  r√©sultats des tests. <br></li></ul><br>  Parfois, les commentaires automatiques peuvent interf√©rer, par exemple, avec les chefs de produit.  Par cons√©quent, nous avons cr√©√© un script JS simple qui ajoute un bouton √† l'interface Jira et vous permet de minimiser tous les commentaires automatiques, en ne laissant que des commentaires humains.  Par cons√©quent, les commentaires automatiques minimis√©s semblent compacts. <br><br><img src="https://habrastorage.org/webt/nx/_-/jh/nx_-jh1r3hxzby1j1ue7itohe0e.png"><br><br><div class="spoiler">  <b class="spoiler_title">Code JS du script que nous avons int√©gr√© dans le mod√®le de ticket</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'load'</span></span>, () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.jQuery;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> botsAttrMatch = [       <span class="hljs-string"><span class="hljs-string">'aida'</span></span>,       <span class="hljs-string"><span class="hljs-string">'itops.api'</span></span>   ].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">bot</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">`[rel="</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bot}</span></span></span><span class="hljs-string">"]`</span></span>).join(<span class="hljs-string"><span class="hljs-string">','</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$) {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;   }   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AIDA_COLLAPSE_KEY = <span class="hljs-string"><span class="hljs-string">'aida-collapsed'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> COMMENT_SELECTOR = <span class="hljs-string"><span class="hljs-string">'.issue-data-block.activity-comment.twixi-block'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> JiraImprovements = {       init() {           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addButtons();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleAidaCollapsing();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleCommentExpansion();           <span class="hljs-comment"><span class="hljs-comment">// Handle toggle button and aida collapsing and put it on a loop           // to handle unexpected JIRA behaviour           const self = this;           setInterval(function () {               self.addButtons();               self.handleAidaCollapsing();           }, 2000);           addCss(`               #badoo-toggle-bots {                   background: #fff2c9;                   color: #594300;                   border-radius: 0 3px 0 0;                   margin-top: 3px;                   display: inline-block;               }           `);       },       addButtons() {           // Do we already have the button?           if ($('#badoo-toggle-bots').length &gt; 0) {               return;           }           // const headerOps = $('ul#opsbar-opsbar-operations');           const jiraHeader = $('#issue-tabs');           // Only add it in ticket state           if (jiraHeader.length &gt; 0) {               const li = $('&lt;a id="badoo-toggle-bots" class="aui-button aui-button-primary aui-style" href="/"&gt;Collapse Bots&lt;/a&gt;');               li.on('click', this.toggleAidaCollapsing.bind(this));               jiraHeader.append(li);           }       },       toggleAidaCollapsing(e) {           e.preventDefault();           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           localStorage.setItem(AIDA_COLLAPSE_KEY, !isCollapsed);           this.handleAidaCollapsing();       },       handleAidaCollapsing() {           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           const aidaComments = $(COMMENT_SELECTOR).has(botsAttrMatch).not('.manual-toggle');           if (isCollapsed) {               aidaComments.removeClass('expanded').addClass('collapsed');               $('#badoo-toggle-bots').text('Show Bots');           }           else {               aidaComments.removeClass('collapsed').addClass('expanded');               $('#badoo-toggle-bots').text('Collapse Bots');           }       },       handleCommentExpansion() {           $(document.body).delegate('a.collapsed-comments', 'click', function () {               const self = this; // eslint-disable-line no-invalid-this               let triesLeft = 100;               const interval = setInterval(() =&gt; {                   if (--triesLeft &lt; 0 || self.offsetHeight === 0) {                       clearInterval(interval);                   }                   // Element has been removed from DOM. ie new jira comments have been added                   if (self.offsetHeight === 0) {                       JiraImprovements.handleAidaCollapsing();                   }               }, 100);           });           $(document.body).delegate(COMMENT_SELECTOR, 'click', function () {               $(this).addClass('manual-toggle');// eslint-disable-line no-invalid-this           });       }   };   JiraImprovements.init();   function addCss(cssText) {       const style = document.createElement('style');       style.type = 'text/css';       if (style.styleSheet) {           style.styleSheet.cssText = cssText;       }       else {           style.appendChild(document.createTextNode(cssText));       }       document.head.appendChild(style);   } });</span></span></code> </pre><br></div></div><br><h1>  Quoi d'autre? </h1><br>    API  webhooks Jira    : <br><br><ul><li>    HipChat,      -   (    ); <br></li><li>    HipChat            (    ,    ); <br></li><li>              (  )    (          ;        ); <br></li><li>       ;        ,       ; <br></li><li>         In progress  ; <br></li><li>   ,   ¬´¬ª    (, On Review),      ; <br></li><li>                 ,      Jira     (, ¬´d.semenihin (Day off)¬ª).   . <br></li></ul><br><h1>  R√©sum√© </h1><br> Jira ‚Äî  ,        ,     . ,  ,      .    Jira         ,          . <br><br>            ‚Äî   .       Jira     ,          Jira. , -      . <br><br>  Merci de votre attention! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424655/">https://habr.com/ru/post/fr424655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424641/index.html">Rebranding: la vie hack comment ne pas devenir un sujet de ridicule</a></li>
<li><a href="../fr424645/index.html">Comme nous l'avons fait l'enqu√™te interne la plus massive √† la banque</a></li>
<li><a href="../fr424649/index.html">Java vs GO. Test par un grand nombre d'utilisateurs</a></li>
<li><a href="../fr424651/index.html">Qu'est-ce que ZFS? Et pourquoi les gens sont-ils fous d'elle?</a></li>
<li><a href="../fr424653/index.html">Bienvenue au Meetup Voronezh Game Dev</a></li>
<li><a href="../fr424657/index.html">[Fran√ßais] Corriger ou tuer le JavaScript install√© automatiquement?</a></li>
<li><a href="../fr424659/index.html">Avantage du bureau √† domicile - lumi√®re du jour</a></li>
<li><a href="../fr424661/index.html">Les petits satellites terrestres contiennent un potentiel pour des opportunit√©s scientifiques et commerciales incroyables</a></li>
<li><a href="../fr424663/index.html">De quelles comp√©tences les d√©veloppeurs auront-ils besoin √† l'avenir?</a></li>
<li><a href="../fr424669/index.html">Profils d'utilisateurs fant√¥mes: les annonceurs Facebook vous trouveront m√™me en utilisant un num√©ro de t√©l√©phone non public</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>