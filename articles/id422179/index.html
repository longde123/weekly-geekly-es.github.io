<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👏🏼 👸🏽 🛵 Dari awan ke bumi: cara membuat Kubernet tingkat produksi di lingkungan apa pun 🦎 🕔 🕕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baik untuk semua! Nah, waktunya telah tiba untuk kursus Devops kami berikutnya. Mungkin, ini adalah salah satu kursus yang paling stabil dan referensi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dari awan ke bumi: cara membuat Kubernet tingkat produksi di lingkungan apa pun</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/422179/">  Baik untuk semua!  Nah, waktunya telah tiba untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kursus Devops kami</a> berikutnya.  Mungkin, ini adalah salah satu kursus yang paling stabil dan referensi, tetapi pada saat yang sama paling beragam dalam hal siswa, karena tidak ada kelompok yang tampak seperti yang lain: di satu pengembang hampir sepenuhnya, kemudian di insinyur berikutnya, lalu admin, dan sebagainya.  Dan ini juga berarti bahwa waktunya telah tiba untuk materi yang menarik dan bermanfaat, serta pertemuan online. <br><br><img src="https://habrastorage.org/webt/v-/xe/oi/v-xeoia0xxkvb6vuzmclcvknrys.png" alt="gambar"><a name="habracut"></a><br><br>  Artikel ini berisi rekomendasi untuk meluncurkan klaster Kubernetes tingkat produksi di pusat data di lokasi atau lokasi periferal (lokasi tepi). <br>  Apa artinya tingkat produksi? <br><br><ul><li>  Instalasi aman </li><li>  Manajemen penyebaran dilakukan menggunakan proses berulang dan direkam; </li><li>  Pekerjaan dapat diprediksi dan konsisten; </li><li>  Aman untuk melakukan pembaruan dan penyetelan; </li><li>  Untuk mendeteksi dan mendiagnosis kesalahan dan kekurangan sumber daya ada pencatatan dan pemantauan; </li><li>  Layanan ini memiliki "ketersediaan tinggi" yang memadai dengan mempertimbangkan sumber daya yang tersedia, termasuk pembatasan uang, ruang fisik, daya, dll. </li><li>  Proses pemulihan tersedia, didokumentasikan, dan diuji untuk digunakan jika terjadi kegagalan. </li></ul><br>  Singkatnya, tingkat produksi berarti mengantisipasi kesalahan dan mempersiapkan pemulihan dengan masalah dan penundaan minimal. <br><br><img src="https://habrastorage.org/webt/ji/b8/je/jib8jeiekbsaflpgjsteescumgg.png"><br><br>  Artikel ini adalah tentang penyebaran Kubernetes di lokasi pada platform hypervisor atau bare-metal, mengingat jumlah sumber daya dukungan yang terbatas dibandingkan dengan peningkatan cloud publik utama.  Namun demikian, beberapa rekomendasi ini mungkin berguna untuk cloud publik jika anggaran membatasi sumber daya yang dipilih. <br><br>  Menerapkan logam telanjang logam tunggal-telanjang Minikube dapat menjadi proses yang sederhana dan murah, tetapi bukan tingkat produksi.  Sebaliknya, Anda tidak akan dapat mencapai tingkat Google dengan Borg di toko offline, cabang, atau lokasi periferal, meskipun kecil kemungkinan Anda membutuhkannya. <br><br>  Artikel ini menjelaskan kiat-kiat untuk mencapai penyebaran Kubernetes tingkat produksi, bahkan dalam situasi terbatas sumber daya. <br><br>  <b>Komponen penting dalam kluster Kubernetes</b> <br><br>  Sebelum mempelajari detailnya, penting untuk memahami keseluruhan arsitektur Kubernet. <br>  Cluster Kubernetes adalah sistem terdistribusi tinggi berdasarkan bidang kontrol dan arsitektur node pekerja yang terkelompok, seperti yang ditunjukkan di bawah ini: <br><br><img src="https://habrastorage.org/webt/_9/zu/xd/_9zuxdnulbsg6axshrcnxah2x_o.png"><br><br>  Biasanya, komponen dari Server API, Pengendali Manajer, dan Penjadwal terletak di beberapa contoh node tingkat kontrol (disebut Master).  Master node biasanya juga menyertakan etcd, namun ada skrip besar dan sangat mudah diakses yang membutuhkan menjalankan etcd pada host independen.  Komponen dapat dijalankan sebagai wadah dan, secara opsional, di bawah pengawasan Kubernetes, yaitu berfungsi sebagai perapian statis. <br><br>  Contoh berlebihan dari komponen ini digunakan untuk ketersediaan tinggi.  Signifikansi dan tingkat redundansi yang diperlukan dapat bervariasi. <br><table><tbody><tr><th>  <nobr>Komponen</nobr> </th><th>  Peran </th><th>  Konsekuensi dari kehilangan </th><th>  Contoh yang Direkomendasikan </th></tr><tr><td>  dll </td><td>  Mempertahankan status semua objek Kubernet </td><td>  Kehilangan penyimpanan yang besar.  Kehilangan sebagian besar = Kubernet kehilangan tingkat kontrol, API Server bergantung pada etcd, panggilan API hanya-baca yang tidak memerlukan kuorum, seperti beban kerja yang sudah dibuat, dapat terus bekerja. </td><td>  angka ganjil, 3+ </td></tr><tr><td>  Server API </td><td>  Menyediakan API untuk penggunaan eksternal dan internal </td><td>  Tidak dapat berhenti, mulai, perbarui pod baru.  Penjadwal dan Pengontrol Manajer bergantung pada API Server.  Beban berlanjut jika tidak tergantung pada panggilan API (operator, pengontrol khusus, CRD, dll.) </td><td>  2+ </td></tr><tr><td>  kube-scheduler </td><td>  Tempat pod pada node </td><td>  Pod tidak dapat ditempatkan, diprioritaskan, atau dipindahkan di antaranya. </td><td>  2+ </td></tr><tr><td>  kube-controller-manager </td><td>  Mengontrol banyak pengontrol </td><td>  Loop kontrol utama yang bertanggung jawab untuk negara berhenti bekerja.  Integrasi in-tree dari penyedia cloud terputus. </td><td>  2+ </td></tr><tr><td>  cloud-controller-manager (CCM) </td><td>  Integrasi penyedia cloud di luar pohon </td><td>  Integrasi penyedia cloud terputus </td><td>  1 </td></tr><tr><td>  Tambahan (mis. DNS) </td><td>  Berbeda </td><td>  Berbeda </td><td>  Tergantung pada add-on (mis. 2+ untuk DNS) </td></tr></tbody></table><br>  Risiko dari komponen-komponen ini termasuk kegagalan perangkat keras, bug perangkat lunak, pembaruan yang buruk, kesalahan manusia, gangguan jaringan dan kelebihan sistem yang mengakibatkan sumber daya habis.  Redundansi dapat mengurangi dampak bahaya ini.  Selain itu, berkat fitur platform hypervisor (perencanaan sumber daya, ketersediaan tinggi), Anda dapat melipatgandakan hasilnya menggunakan sistem operasi Linux, Kubernetes dan runtime kontainer. <br><br>  Server API menggunakan banyak instance penyeimbang beban untuk mencapai skalabilitas dan ketersediaan.  Load balancer adalah komponen penting untuk ketersediaan tinggi.  Beberapa catatan-A dari server DNS API dapat berfungsi sebagai alternatif jika tidak ada penyeimbang. <br><br>  kube-scheduler dan kube-controller-manager terlibat dalam proses pemilihan pemimpin alih-alih menggunakan load balancer.  Karena <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cloud-controller-manager</a> digunakan untuk beberapa jenis infrastruktur hosting, implementasinya mungkin beragam, kami tidak akan membahasnya - kami hanya mengindikasikan bahwa mereka adalah komponen dari tingkat manajemen. <br><br>  Pod yang berjalan di Kubernet dikelola oleh agen kubelet.  Setiap instance pekerja menjalankan agen kubelet dan lingkungan peluncuran wadah yang kompatibel dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CRI</a> .  Kubernetes sendiri dirancang untuk memantau dan memulihkan dari kegagalan simpul pekerja.  Tetapi untuk fungsi beban kritis, manajemen sumber daya hypervisor, dan isolasi beban, ini dapat digunakan untuk meningkatkan aksesibilitas dan meningkatkan kemampuan prediksi pekerjaan mereka. <br><br>  <b>dll</b> <br><br>  etcd adalah penyimpanan persisten untuk semua objek Kubernetes.  Ketersediaan dan pemulihan gugus etcd harus menjadi prioritas utama ketika menggunakan Kubernet tingkat produksi. <br><br>  Cluster etcd yang terdiri dari lima node adalah pilihan terbaik jika Anda mengizinkannya.  Mengapa  Karena Anda dapat melayani satu, dan pada saat yang sama menahan kegagalan.  Sekelompok tiga node adalah minimum yang dapat kami rekomendasikan untuk layanan tingkat produksi, bahkan jika hanya satu host hypervisor yang tersedia.  Lebih dari tujuh node juga tidak direkomendasikan, dengan pengecualian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">instalasi sangat besar yang</a> mencakup beberapa zona akses. <br><br>  Rekomendasi minimum untuk hosting node cluster etcd adalah RAM 2GB dan hard drive SSD 8GB.  Biasanya, 8GB RAM dan 20GB ruang hard disk sudah cukup.  Kinerja disk memengaruhi waktu pemulihan suatu simpul setelah mengalami kegagalan.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lihat</a> detailnya. <br><br>  <i>Dalam kasus khusus, pikirkan beberapa cluster etcd</i> <br><br>  Untuk kelompok Kubernet yang sangat besar, pertimbangkan untuk menggunakan cluster etcd terpisah untuk acara Kubernetes sehingga terlalu banyak peristiwa tidak memengaruhi layanan inti API Kubernetes.  Saat menggunakan jaringan Flannel, konfigurasi disimpan dalam etcd, dan persyaratan versi mungkin berbeda dari Kubernetes.  Ini dapat memperumit cadangan etcd, jadi kami sarankan untuk menggunakan cluster etcd terpisah khusus untuk kain flanel. <br><br>  <b>Penempatan Host Tunggal</b> <br><br>  Daftar risiko aksesibilitas mencakup perangkat keras, perangkat lunak, dan faktor manusia.  Jika Anda terbatas pada satu host, menggunakan penyimpanan yang berlebihan, memori yang mengoreksi kesalahan, dan catu daya ganda dapat meningkatkan perlindungan terhadap kegagalan perangkat keras.  Menjalankan hypervisor pada host fisik memungkinkan Anda untuk menggunakan komponen perangkat lunak yang berlebihan dan menambahkan manfaat operasional yang terkait dengan penggelaran, pembaruan, dan pemantauan penggunaan sumber daya.  Bahkan dalam situasi yang penuh tekanan, perilaku tetap dapat diulang dan dapat diprediksi.  Misalnya, bahkan jika Anda hanya dapat mengizinkan peluncuran singleton dari layanan master, mereka harus dilindungi dari kelebihan muatan dan penipisan sumber daya, bersaing dengan beban kerja aplikasi Anda.  Hypervisor bisa lebih efisien dan lebih mudah digunakan daripada memprioritaskan dalam penjadwal Linux, cgroups, bendera Kubernetes, dll. <br><br>  Anda dapat menggunakan tiga mesin virtual etcd jika sumber daya host mengizinkannya.  Setiap VM harus didukung oleh perangkat penyimpanan fisik yang terpisah atau menggunakan bagian penyimpanan yang terpisah menggunakan redundansi (Mirroring, RAID, dll.). <br>  Contoh ganda berlebih dari API server, penjadwal, dan manajer pengontrol adalah peningkatan berikutnya jika satu-satunya host Anda memiliki sumber daya yang cukup untuk ini. <br><br>  <i>Opsi penempatan host tunggal, dari yang paling tidak cocok untuk produksi hingga yang paling</i> <br><table><tbody><tr><th>  Jenis </th><th>  Karakteristik </th><th>  Hasil </th></tr><tr><td>  <nobr>Peralatan minimum</nobr> </td><td>  Singleton, dll, dan komponen utama. </td><td>  Laboratorium rumah, sama sekali bukan kelas produksi.  Multiple Single Point of Failure (SPOF).  Pemulihan lambat, dan ketika penyimpanan hilang, itu benar-benar tidak ada. </td></tr><tr><td>  Peningkatan Penyimpanan Redundansi </td><td>  komponen singleton dan master etcd, penyimpanan etcd berlebihan. </td><td>  Minimal, Anda dapat pulih dari kegagalan perangkat penyimpanan. </td></tr><tr><td>  Redundansi Tingkat Terkelola </td><td>  Tidak ada hypervisor, beberapa contoh komponen tingkat terkelola di pod statis. </td><td>  Perlindungan terhadap bug perangkat lunak telah muncul, tetapi OS dan lingkungan peluncuran wadah masih merupakan titik kegagalan yang sama dengan pembaruan yang menghancurkan. </td></tr><tr><td>  Menambahkan Hypervisor </td><td>  Menjalankan tiga instance tingkat dikelola yang berlebihan di VM. </td><td>  Ada perlindungan terhadap bug perangkat lunak dan kesalahan manusia dan keunggulan operasional dalam instalasi, manajemen sumber daya, pemantauan dan keamanan.  Pembaruan OS dan lingkungan peluncuran wadah tidak terlalu mengganggu.  Hypervisor adalah satu-satunya titik kegagalan. </td></tr></tbody></table><br>  <b>Penerapan Host Ganda</b> <br><br>  Dengan dua host, masalah penyimpanan etcd mirip dengan opsi host tunggal - Anda perlu redundansi.  Lebih baik menjalankan tiga instance encd.  Ini mungkin tampak tidak intuitif, tetapi lebih baik untuk memusatkan semua node etcd pada satu host.  Anda tidak akan meningkatkan keandalan dengan membaginya dengan 2 + 1 antara dua host - hilangnya node dengan instance encd terbanyak akan menyebabkan kegagalan, terlepas dari apakah itu mayoritas 2 atau 3. Jika host tidak sama, tempatkan seluruh cluster etcd pada yang lebih dapat diandalkan. <br><br>  Disarankan agar Anda menjalankan server API yang berlebihan, penjadwal-kube, dan pengelola-pengontrol-kubus.  Mereka harus dibagi di antara host untuk meminimalkan risiko kegagalan dalam lingkungan peluncuran kontainer, sistem operasi, dan perangkat keras. <br><br>  Meluncurkan lapisan hypervisor pada host fisik akan memungkinkan Anda untuk bekerja dengan komponen program yang berlebihan, menyediakan manajemen sumber daya.  Ini juga memiliki keunggulan operasional pemeliharaan terjadwal. <br><br>  <i>Opsi penyebaran untuk dua host, dari yang paling tidak cocok untuk produksi hingga yang paling</i> <br><table><tbody><tr><th>  Jenis </th><th>  Karakteristik </th><th>  Hasil </th></tr><tr><td>  <nobr>Peralatan minimum</nobr> </td><td>  Dua host, tanpa penyimpanan yang berlebihan.  Singleton, dll, dan komponen utama pada host yang sama. </td><td>  etcd - satu titik kegagalan, tidak masuk akal untuk menjalankan dua pada layanan master lainnya.  Berbagi antara dua host meningkatkan risiko kegagalan lapisan terkelola.  Manfaat potensial dari mengisolasi sumber daya dengan menjalankan lapisan terkelola pada satu host dan beban kerja aplikasi pada yang lain.  Jika penyimpanan hilang, tidak ada pemulihan. </td></tr><tr><td>  Peningkatan Penyimpanan Redundansi </td><td>  Singleton etcd dan komponen master pada host yang sama, penyimpanan etcd berlebihan. </td><td>  Minimal, Anda dapat pulih dari kegagalan perangkat penyimpanan. </td></tr><tr><td>  Redundansi Tingkat Terkelola </td><td>  Tidak ada hypervisor, beberapa contoh komponen tingkat terkelola di pod statis.  etcd cluster pada satu host, komponen tingkat terkelola lainnya dipisahkan. </td><td>  Kegagalan perangkat keras, memperbarui firmware, sistem operasi, dan lingkungan peluncuran wadah pada host tanpa etcd tidak begitu merusak. </td></tr><tr><td>  Menambahkan hypervisor ke kedua host </td><td>  Tiga komponen tingkat dikelola berlebih berjalan di mesin virtual, cluster dll pada satu host, dan komponen tingkat dikelola dipisahkan.  Beban kerja aplikasi dapat berada di kedua node VM. </td><td>  Peningkatan isolasi beban aplikasi.  Pembaruan untuk sistem operasi dan lingkungan peluncuran wadah tidak terlalu mengganggu.  Pemeliharaan terjadwal perangkat keras / firmware menjadi non-destruktif jika hypervisor mendukung migrasi VM. </td></tr></tbody></table><br>  <b>Penempatan ke tiga (atau lebih) host</b> <br><br>  Transisi ke layanan tingkat produksi tanpa kompromi.  Kami merekomendasikan pemisahan etcd antara tiga host.  Satu kegagalan perangkat keras akan mengurangi jumlah kemungkinan beban kerja aplikasi, tetapi tidak akan menghasilkan penghentian layanan yang lengkap. <br><br>  Cluster yang sangat besar akan membutuhkan lebih banyak instance. <br><br>  Meluncurkan lapisan hypervisor memberikan manfaat operasional dan peningkatan isolasi beban kerja aplikasi.  Ini di luar ruang lingkup artikel, tetapi pada level tiga atau lebih penghuni, fungsi yang lebih baik mungkin tersedia (penyimpanan bersama yang berkelompok, pengelolaan sumber daya dengan penyeimbang beban dinamis, pemantauan keadaan otomatis dengan migrasi langsung dan failover). <br><br>  <i>Opsi penempatan untuk tiga (atau lebih) host dari yang paling tidak cocok untuk produksi hingga yang paling</i> <br><table><tbody><tr><th>  Jenis </th><th>  Karakteristik </th><th>  Hasil </th></tr><tr><td>  <nobr>Minimum</nobr> </td><td>  Tiga host.  Instance etcd pada setiap node.  Komponen master pada setiap node. </td><td>  Kehilangan node mengurangi kinerja, tetapi tidak menyebabkan penurunan Kubernetes.  Kemungkinan pemulihan tetap ada. </td></tr><tr><td>  Menambahkan hypervisor ke host </td><td>  Di mesin virtual pada tiga host, dll, server API, penjadwal, dan manajer pengontrol sedang berjalan.  Beban kerja berjalan di VM di setiap host. </td><td>  Menambahkan perlindungan terhadap bug OS / wadah / lingkungan peluncuran perangkat lunak dan kesalahan manusia.  Manfaat operasional instalasi, peningkatan, pengelolaan sumber daya, pemantauan, dan keamanan. </td></tr></tbody></table><br>  <b>Konfigurasikan Kubernet</b> <br><br>  Node Master dan Pekerja harus dilindungi dari kelebihan dan penipisan sumber daya.  Fungsi hypervisor dapat digunakan untuk mengisolasi komponen penting dan cadangan sumber daya.  Ada juga pengaturan konfigurasi Kubernetes yang dapat memperlambat hal-hal seperti kecepatan panggilan API.  Beberapa kit instalasi dan distribusi komersial menangani hal ini, tetapi jika Anda menggunakan Kubernetes sendiri, pengaturan default mungkin tidak cocok, terutama untuk sumber daya kecil atau untuk kluster yang terlalu besar. <br><br>  Konsumsi sumber daya pada tingkat yang dapat dikelola berkorelasi dengan jumlah perapian dan laju keluarnya perapian.  Cluster yang sangat besar dan sangat kecil akan mendapat manfaat dari permintaan kube-apiserver yang dimodifikasi dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengaturan</a> penurunan memori. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Node</a> Allocatable harus dikonfigurasi pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">node pekerja</a> berdasarkan kepadatan beban yang didukung yang wajar untuk setiap node.  Ruang nama dapat dibuat untuk membagi sekelompok simpul kerja menjadi beberapa kelompok virtual dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kuota</a> untuk CPU dan memori. <br><br>  <b>Keamanan</b> <br><br>  Setiap cluster Kubernetes memiliki root Certificate Authority (CA).  Controller Manager, API Server, Scheduler, klien kubelet, kube-proxy dan sertifikat administrator harus dibuat dan diinstal.  Jika Anda menggunakan alat atau distribusi instalasi, Anda mungkin tidak harus menghadapinya sendiri.  Proses manual dijelaskan di <a href="">sini</a> .  Anda harus siap untuk menginstal ulang sertifikat jika Anda memperluas atau mengganti node. <br><br>  Karena Kubernetes sepenuhnya dikelola oleh API, sangat penting untuk mengontrol dan membatasi daftar mereka yang memiliki akses ke cluster.  Opsi enkripsi dan otentikasi dibahas dalam dokumentasi ini. <br><br>  Beban kerja aplikasi Kubernetes didasarkan pada gambar kontainer.  Anda membutuhkan sumber dan konten gambar-gambar ini agar dapat diandalkan.  Hampir selalu, ini berarti Anda akan meng-host gambar kontainer di repositori lokal.  Menggunakan gambar dari Internet publik dapat menyebabkan masalah keandalan dan keamanan.  Anda harus memilih repositori yang memiliki dukungan untuk menandatangani gambar, memindai keamanan, mengontrol akses untuk mengirim dan mengunduh gambar, dan aktivitas logging. <br><br>  Proses harus dikonfigurasikan untuk mendukung penggunaan host, hypervisor, OS6, Kubernetes, dan pembaruan firmware ketergantungan lainnya.  Pemantauan versi diperlukan untuk mendukung audit. <br><br>  Rekomendasi: <br><br><ul><li>  Memperkuat pengaturan keamanan default untuk komponen tingkat terkelola (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memblokir node pekerja</a> ); </li><li>  Gunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kebijakan Keselamatan Pos Gizi</a> ; </li><li>  Pikirkan tentang integrasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NetworkPolicy yang</a> tersedia untuk solusi jaringan Anda, termasuk pelacakan, pemantauan, dan pemecahan masalah; </li><li>  Gunakan RBAC untuk membuat keputusan otorisasi; </li><li>  Pikirkan tentang keamanan fisik, terutama ketika menggunakan ke lokasi-lokasi pinggiran atau terpencil yang mungkin terlewatkan.  Tambahkan enkripsi penyimpanan untuk membatasi konsekuensi dari pencurian perangkat, dan perlindungan terhadap menghubungkan perangkat jahat, seperti kunci USB; </li><li>  Lindungi kredensial teks penyedia cloud (kunci akses, token, kata sandi, dll.). </li></ul><br>  Objek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">rahasia</a> Kubernet cocok untuk menyimpan sejumlah kecil data sensitif.  Mereka disimpan di etcd.  Mereka dapat digunakan dengan aman untuk menyimpan kredensial API Kubernetes, tetapi ada kalanya beban kerja atau perluasan cluster itu sendiri membutuhkan solusi yang lebih lengkap.  Proyek HashiCorp Vault adalah solusi populer jika Anda membutuhkan lebih dari yang dapat disediakan oleh objek rahasia. <br><br>  <b>Pemulihan Bencana dan Cadangan</b> <br><br><img src="https://habrastorage.org/webt/gv/xp/kd/gvxpkd1qgpap0wosdhv-r4uu-9s.png"><br><br>  Menerapkan redundansi melalui penggunaan beberapa host dan VM membantu mengurangi jumlah jenis kegagalan tertentu.  Tetapi skenario seperti bencana alam, pembaruan yang buruk, serangan hacker, bug perangkat lunak atau kesalahan manusia masih dapat menyebabkan crash. <br><br>  Bagian penting dari penyebaran produksi adalah harapan pemulihan di masa depan. <br><br>  Perlu juga dicatat bahwa bagian dari investasi Anda dalam desain, dokumentasi, dan otomasi proses pemulihan dapat digunakan kembali jika Anda membutuhkan penyebaran replikasi skala besar di beberapa situs. <br><br>  Di antara unsur-unsur pemulihan bencana, cadangan (dan mungkin replika), penggantian, proses yang direncanakan, orang-orang yang akan melakukan proses ini, dan pelatihan reguler patut dicatat.  Latihan dan prinsip pengujian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chaos Engineering yang</a> sering dilakukan dapat digunakan untuk menguji kesiapan Anda. <br><br>  Karena persyaratan ketersediaan, Anda mungkin harus menyimpan salinan lokal OS, komponen Kubernetes, dan penampung gambar untuk memungkinkan pemulihan bahkan jika Internet macet.  Kemampuan untuk menyebarkan host dan node pengganti dalam situasi "isolasi fisik" meningkatkan keamanan dan meningkatkan kecepatan penyebaran. <br><br>  Semua objek Kubernetes disimpan di etcd.  Mencadangkan secara berkala data cluster etcd adalah elemen penting dalam memulihkan kluster Kubernet selama skenario darurat, misalnya, ketika semua node master hilang. <br><br>   etcd       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>  etcd           .      Kubernetes    .   ,     Kubernetes. <br><br>   ,    Kubernetes      etcd ,      -  .     ,         . <br><br>       etcd. ,  ,    ,   ,     /.       ,        .           : <br><br><ul><li>    : CA, API Server, Apiserver-kubelet-client,  ServiceAccount, “Front proxy”,  Front proxy; </li><li>   DNS; </li><li>    IP/; </li><li>   ; </li><li>  kubeconfig; </li><li> LDAP    ; </li><li>      . </li></ul><br> <b>   </b> <br><br> Anti-affinity           .      ,    .  ,  Kubernetes         ,          .     ,              ,    -   . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">    </a>          ,  . <br><br>   stateful-,    —   Kubernetes    (,   SQL  ). ,   ,  Kubernetes,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">roadmap feature request</a> , ,  ,    Container Storage Interface (CSI).  ,       - ,    ,      . ,      Kubernetes      ,          ,    ,    Kubernetes . <br><br>  stateful- (, Cassandra)        ,    ,    .      - Kubernetes (    -)      . <br><br> <b> </b> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> (    )    ,      ,        .     ,      , . <br><br>        ,    (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ansible</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BOSH</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chef</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Juju</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kubeadm</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Puppet</a>  .).        ,          . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> , ,          , ,          ,  ,        .       ,  Git,      . <br><br> <b></b> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> ,     ,       —   .     2   ,  —   .          —         ,    . <br><br> <b> </b> <br><br><img src="https://habrastorage.org/webt/a5/m-/gx/a5m-gxsrhmwpyxxwmcfsnfc8umm.png"><br><br>       —    .          - ,    Airbus A320 —  .   ,      .    ,   . <br><br>   ,       .   , ,    ,   . Kubernetes     ,    - ,     ,       (, FedEx, Amazon). <br><br>   production-grade  Kubernetes       .               .   , ,     ,    ,     .  ,    (,   Kubernetes   <a href="">self-hosting</a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, bukan perapian statis). </font><font style="vertical-align: inherit;">Mungkin mereka harus dibahas dalam artikel berikut, jika ada minat yang cukup. </font><font style="vertical-align: inherit;">Selain itu, karena kecepatan tinggi peningkatan Kubernetes, jika mesin pencari Anda menemukan artikel ini setelah 2019, beberapa bahannya mungkin sudah sangat usang.</font></font><br><br>  AKHIR <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti biasa menunggu pertanyaan Anda dan komentar di sini, dan Anda dapat pergi ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">open house</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexander Titov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422179/">https://habr.com/ru/post/id422179/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422169/index.html">Apa yang sebenarnya dilakukan oleh program Ada Lovelace?</a></li>
<li><a href="../id422171/index.html">Seperti yang saya lakukan UPS garis-interaktif. Bagian 3</a></li>
<li><a href="../id422173/index.html">Pembelajaran mesin semakin banyak digunakan dalam fisika partikel.</a></li>
<li><a href="../id422175/index.html">Polusi lingkungan mengurangi kemampuan kognitif manusia</a></li>
<li><a href="../id422177/index.html">Mengapa Arduino begitu lambat dan apa yang bisa dilakukan untuk itu</a></li>
<li><a href="../id422181/index.html">Cara mengumpulkan layanan perusahaan pada satu platform online: sejarah MegaFon. Bisnis</a></li>
<li><a href="../id422183/index.html">Dan apa, mungkinkah lebih murah?</a></li>
<li><a href="../id422185/index.html">Berapa data untuk pelatihan model (tidak) mirip dengan sampel uji?</a></li>
<li><a href="../id422187/index.html">Sberseason: bagaimana saya menghabiskan musim panas ini</a></li>
<li><a href="../id422189/index.html">Kebenaran Tentang Implementasi Portal Intranet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>