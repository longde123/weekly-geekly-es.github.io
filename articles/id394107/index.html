<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔛 👩🏽‍🏫 🐳 Shadowplay LED Watch di Arduino Uno Platform 🧒🏾 👇🏾 ⏯️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alih-alih bergabung
 
 
 Jadi, tim kami yang terdiri dari tiga orang memiliki tugas: untuk merakit proyek perangkat keras kecil dalam waktu yang sanga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Shadowplay LED Watch di Arduino Uno Platform</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/394107/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alih-alih bergabung</font></font></h3><br>
<img src="https://habrastorage.org/files/48b/451/4a6/48b4514a6fd144ba8e19798a1588bd87.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, tim kami yang terdiri dari tiga orang memiliki tugas: untuk merakit proyek perangkat keras kecil dalam waktu yang sangat singkat, terutama pada platform Arduino. </font><font style="vertical-align: inherit;">Perlu disebutkan bahwa sampai saat itu kita mengenal sirkuit, sebagian besar, secara teori. </font><font style="vertical-align: inherit;">Dan ini berarti - tidak ada pengalaman dengan besi solder (praktis), atau, terutama, pengalaman dengan Arduino. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tiba-tiba kami menemukan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebuah artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didedikasikan untuk proyek Shadowplay Clock. </font><font style="vertical-align: inherit;">Ini adalah jam dinding yang dirancang oleh tim desainer Wina, waktu yang dapat Anda lihat dengan menyentuh satu jari di tengahnya. </font><font style="vertical-align: inherit;">LED menyala sedemikian rupa sehingga bayangan jari di tengah menunjukkan waktu. </font><font style="vertical-align: inherit;">Diputuskan untuk membuat yang sama (atau sangat mirip), tetapi di rumah. </font><font style="vertical-align: inherit;">Artikel di atas, seperti yang Anda lihat, tidak mengandung deskripsi rinci tentang proyek. </font><font style="vertical-align: inherit;">Dari semua ini, kami harus mencari tahu cara kerja perangkat ini dan menghidupkannya. </font><font style="vertical-align: inherit;">Apa yang kami lakukan.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Material</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membuat arloji yang Anda butuhkan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> papan serat kosong</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 60 strip dioda LED</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Arduino uno</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modul Jam Waktu Nyata RTC DS1307</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tombol</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> papan tempat memotong roti</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> daftar geser 74HC595 (x2)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8-bit register-latch 74HC573N (x8)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> decoder 4-16 K155ID3 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> buka drain IN74HC05AN (x10)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unit daya </font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita mulai</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, algoritma perangkat:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika daya diterapkan, LED menyala dalam kombinasi yang telah ditentukan. </font><font style="vertical-align: inherit;">Dalam Shadowplay asli, semua LED menyala, tetapi bagi kami tampaknya akan lebih menarik untuk meluncurkan beberapa kombinasi sebagai screensaver.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika tombol ditekan (ya, kami juga menjauh dari aslinya dan memasukkan tombol kecil di tengah), waktunya dibaca dari modul RTC.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waktu baca dikonversi ke kode biner (mask) dan dimasukkan dalam register.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tergantung pada topengnya, dioda yang diperlukan dinyalakan.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perangkat keras</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kami akhirnya memutuskan ide proyek, hal pertama yang kami coba adalah membuat sketsa perkiraan versi skema untuk implementasinya. Pertanyaan utamanya adalah bagaimana cara mengatasi 60 LED. Sebenarnya, jawaban atas pertanyaan ini menentukan metode membangun hampir seluruh skema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opsi pertama yang terlintas dalam pikiran adalah penggunaan decoder. Rangkaian yang dikompilasi adalah cascade dari empat decoder 4-16 dan satu decoder 2-4, keduanya dengan dekripsi memungkinkan input. Kaskade semacam itu memungkinkan pengalamatan ke 64 output, yang lebih dari cukup untuk menghubungkan 60 LED.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, kemudian muncul pertanyaan tentang bagaimana membuat lebih dari satu pekerjaan LED (alamat) pada saat yang sama (setelah semua, kami perlu menyediakan jam dengan setidaknya menit dan jarum jam). Di sini kelemahan utama skema ini dimanifestasikan - dekoder tidak dapat, menurut definisi, mengatasi lebih dari satu output pada suatu waktu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cacat ini memaksa kami untuk meninggalkan ide dengan riam decoder. Selain itu, sekarang kami memiliki persyaratan lain untuk sirkuit masa depan - dukungan untuk operasi simultan dari sejumlah LED yang berbeda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memenuhi persyaratan ini, kami berpikir bahwa dimungkinkan untuk memungkinkan setiap LED menyimpan keadaannya. Register sangat cocok untuk tujuan ini, di mana setiap debit sesuai dengan keadaan salah satu LED. Kami memutuskan untuk menggunakan register 8-bit, karena lebih umum dan lebih praktis. Karenanya, di sirkuit kami, kami akan membutuhkan 8 register semacam itu untuk memberikan dukungan bagi 60 LED.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami berpikir tentang cara mengontrol status LED dengan Arduino melalui register. Setiap register untuk operasi normal harus menerima keseluruhan 8 bit secara keseluruhan. Arduino Uno, tentu saja, menyediakan output yang cukup untuk mengirimkan beberapa bit sekaligus, tetapi pendekatan ini tidak rasional. Selain itu, skema ini hanya berisi 8 register, yang berarti Anda perlu mengatasinya. Untuk tujuan ini, kami menambahkan decoder dan dua register geser 8-bit yang terhubung dalam cascade ke sirkuit. Satu register shift menyimpan state mask 8-bit, yang akan dimuat ke dalam salah satu dari 8 register reguler, yang jumlahnya disimpan dalam register shift kedua. Dengan demikian, dekoder terhubung ke register shift kedua. Untuk keperluan ini, dekoder 3 kali 8 sudah cukup.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghapus inversi dari jumlah output yang diperlukan, kami menggunakan dua sirkuit inverter KR1533LN1. Skema ini, tentu saja, agak rumit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas lain adalah tegangan kerja LED sama dengan 12 volt dibandingkan dengan 5 volt sirkuit logika. Solusi yang diusulkan adalah menggunakan inverter drain terbuka. Sirkuit mikro semacam itu memainkan peran kunci yang menutup (dengan logis 1) atau membuka (dengan logis 0) salah satu kontak LED dengan tanah, dengan demikian menghidupkan atau mematikan LED. Rangkaian mengasumsikan operasi dari 12 volt, sesuai dengan tegangan operasi LED, sehingga untuk mendapatkan 5 volt untuk sirkuit logika, stabilizer KR142EN5A dengan dua kapasitor ditambahkan ke sirkuit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa input dari sirkuit mikro tertentu menyiratkan nilai konstan pada input, sehingga terhubung ke ground atau sumber daya. </font><font style="vertical-align: inherit;">Dalam hal ini, ini adalah input berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Input reset MR terbalik di kedua register geser dihubungkan melalui register beban ke output stabilizer pada 5 volt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Output OE terbalik memungkinkan input di kedua register geser terhubung langsung ke ground.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decoder terbalik memungkinkan input E0 terhubung ke arde</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/files/994/7dc/3c6/9947dc3c61754b44b034f4670f846fbc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rangkaian dikontrol oleh empat input (E1, SH, ST, DS). </font><font style="vertical-align: inherit;">Tingkat tujuan dan sinyal masing-masing dibahas secara lebih rinci di bawah ini:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Input E1 dirancang untuk mengaktifkan dekoder. Dalam kasus kami, awalnya pada dekoder ada dua input kontrol E1, E0, dan keduanya terbalik. Akan ada cukup satu jalan keluar, sehingga yang kedua (E0) dapat dibawa ke tanah. Status dekoder "default" beroperasi hingga level sinyal tinggi diterapkan ke E1. Untuk melakukan yang sebaliknya, kami menghubungkan input ini ke inverter. Tanpa ini, decoder dapat memberikan sinyal kontrol yang salah kepada register, misalnya, pada saat memperbarui data dalam register geser. Seperti yang telah disebutkan, 3 oleh 8 decoder dapat digunakan dalam rangkaian, yang dapat memiliki satu input kontrol non-invers, yang akan membuatnya mudah untuk menyelesaikan semua masalah yang dijelaskan di atas tanpa kabel tambahan dan besi solder.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika level sinyal tunggal diterapkan ke E1, decoder menerjemahkan alamat register yang terletak di register shift yang sesuai, dan mengirimkan sinyal ke output yang diinginkan. Setelah itu, decoder mati lagi dengan menerapkan level sinyal rendah ke E1. Saklar seperti decoder menghasilkan sinyal pada output yang diinginkan, tepi dan pembusukan yang berfungsi sebagai pulsa clock register untuk mengambil sendiri data yang disimpan di bus.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tiga input berikutnya sudah dimaksudkan untuk mengendalikan register geser. Layak dimulai dengan hal yang paling sederhana - entri data DS. Input ini, sesuai namanya, dimaksudkan untuk transmisi data. Karena register shift di sirkuit terhubung dalam cascade, DS mewakili output yang sesuai dari salah satunya. Input dari register geser kedua terhubung ke output dari bit terakhir dari register pertama. Hasilnya adalah satu register geser untuk 16 bit, dimana hanya 12 bit yang digunakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Input SH adalah input jam. Gelombang persegi diumpankan ke input ini, yang masing-masing bertanggung jawab untuk memuat dan memindahkan data di masing-masing register, kontak rangkaian ini terhubung ke pin SHCP dari kedua register.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pin ST terakhir berfungsi sebagai kait data pada output register. Impuls diberikan pada input ini, namun hanya diberikan ketika data dalam register shift akhirnya dimuat dan diperlukan untuk memperbaikinya pada output register. Hanya setelah memberikan sinyal ini, data yang diunduh di dalam register pada baris pertama dari pemicu mendapatkan baris kedua dari pemicu dan menjadi tersedia di bus. ST adalah pin yang terhubung ke pin STcp dari kedua register. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masih menjelaskan kabel dua pin dari register geser MR dan OE. Input pertama (MR) bertanggung jawab untuk membuang data di dalam register. Dalam sirkuit ini, peluang seperti itu tidak diperlukan, oleh karena itu level sinyal tinggi disuplai ke output ini melalui beban.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Input register kedua (OE) bertanggung jawab untuk memutus baris kedua pemicu di dalam register geser dari bus, mis., Input yang diaktifkan. </font><font style="vertical-align: inherit;">Fungsi ini juga tidak diperlukan, oleh karena itu, output luka ke tanah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kontak lain yang tidak diuraikan di atas dirancang untuk menghilangkan level sinyal dari tombol di bagian tengah arloji, sirkuit tombolnya khas dan mewakili beban dan kunci, tergantung pada posisi di mana level sinyal rendah atau tinggi dikirim ke Arduino. </font><font style="vertical-align: inherit;">Bergantung pada keadaan tombol, arloji beroperasi baik dalam mode screensaver atau dalam mode tampilan waktu.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Koneksi ke Arduino tidak memiliki fitur khusus, kecuali bahwa pin SH terhubung secara ideal ke pin digital SCK. </font><font style="vertical-align: inherit;">Keluaran sirkuit lainnya dapat dihubungkan ke input digital serba guna yang tersedia. </font><font style="vertical-align: inherit;">Dalam kasus kami, koneksi memiliki bentuk berikut:</font></font><br>
<br>
<ul>
<li>Arduino pin13 (SCK) –   SH</li>
<li>Arduino pin 11 –   ST Arduino pin 8 –   DS Arduino pin 5 –   E1 Arduino pin 3 –   Arduino pin GND –   (      )<br>
       ,      .<br>
<br>
    :   36  —   ;    36  ( ) \ 26  ( ) —  .   Shadowplay    72 ,     36.     ,    60  ( + ).     .   ,   ,     ,      .<br>
<br>
<img src="https://habrastorage.org/files/c46/3ff/f0b/c463fff0b95e402eaf9b4274301f04ba.jpg"><br>
<br>
  ,     .      ,    .   ,      .      ,  «»    50 — 60,        . , 60   .  :      —   .<br>
<br>
<img src="https://habrastorage.org/files/871/643/435/87164343503642ba802ead947d81ab6a.JPG"><br>
<br>
   ,  ,    ,  .      —     . ,         ,    .  ,   —  .<br>
<br>
<div class="spoiler"><b class="spoiler_title">      .</b><div class="spoiler_text"><img src="https://habrastorage.org/files/f95/9cc/f6d/f959ccf6d1c34b58ac31411eb3477a99.jpg"><br>
</div></div><br>
-,  .<br>
<br>
     Shadowplay.  ,       ,    . ,    ,       .      , ..     .        ,  ,       100% .    ,       .       .     ,         .  ,               .<br>
<br>
 ,      (       ),     ,    —    . ,  ,   !    .   ,  - -   . ,   ,    .             ,     ,           .   ,     ,    ,   .     .,     -         .    ,      ,   , ,   ,     . <br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.youtube.com/embed/uy-cLHOz-5M%3Ffeature%3Doembed&amp;usg=ALkJrhivHzTwc60uedIcyF5W5EeFiwA_zA" frameborder="0" allowfullscreen=""></iframe><br>
<br>
 ,     .         . ..   ,     , ( ,      ,         ),      . <br>
<br>
<h4> </h4><br>
,     ().      Arduino.  ,    RTC,   —    .      DS1307,   — I2C.       2100     .          .     RTC  Arduino,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>.         RTC.<br>
<br>
<img src="https://habrastorage.org/files/c76/129/084/c761290840164f52a699e8f7d0c23a50.jpg"><br>
<br>
     ,      RTC,         .<br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"> <pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Time.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;DS1307RTC.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> REG [<span class="hljs-number"><span class="hljs-number">8</span></span>];<font></font>
tmElements_t te;<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c,reset=<span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">13</span></span>, OUTPUT); <font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">11</span></span>, OUTPUT); <font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">8</span></span>, OUTPUT);  <font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">5</span></span>, OUTPUT);  <font></font>
  pinMode(<span class="hljs-number"><span class="hljs-number">3</span></span>, INPUT);   <font></font>
  Serial.begin(<span class="hljs-number"><span class="hljs-number">57600</span></span>);<font></font>
  <font></font>
  <span class="hljs-comment"><span class="hljs-comment">//      RTC  </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//te.Hour = 18;</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//te.Minute = 50;</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//te.Second = 0;</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//te.Day = 20; //</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//te.Month = 4; // </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//te.Year = CalendarYrToTm(2016); </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//RTC.write(te);</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{ 
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>))                    <span class="hljs-comment"><span class="hljs-comment">// ,     </span></span><font></font>
  {RTC.read(te);<font></font>
   SetShadowTime(te.Hour,te.Minute,te.Second,<span class="hljs-number"><span class="hljs-number">2</span></span>);        <span class="hljs-comment"><span class="hljs-comment">//         </span></span>
   delay(<span class="hljs-number"><span class="hljs-number">900</span></span>);<font></font>
   reset=<span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>                                   <span class="hljs-comment"><span class="hljs-comment">//    ,  </span></span><font></font>
  {wait1();<font></font>
   reset=<span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
  }<font></font>
                                         <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j&lt;<span class="hljs-number"><span class="hljs-number">8</span></span> ; j++) SetUpLightByMask(j,<span class="hljs-number"><span class="hljs-number">0</span></span>); <font></font>
   <font></font>
 <font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//======================================================================= </span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetUpLightByMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RegNum, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LightMask)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//         </span></span></span><span class="hljs-function">
</span></span>{<font></font>
  <font></font>
  digitalWrite(<span class="hljs-number"><span class="hljs-number">5</span></span>, LOW);<font></font>
  digitalWrite(<span class="hljs-number"><span class="hljs-number">11</span></span>, LOW);<font></font>
  shiftOut(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, MSBFIRST, LightMask);<font></font>
  shiftOut(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, LSBFIRST, RegNum);<font></font>
  digitalWrite(<span class="hljs-number"><span class="hljs-number">11</span></span>, HIGH);<font></font>
  digitalWrite(<span class="hljs-number"><span class="hljs-number">5</span></span>, HIGH);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">digitalClockDisplay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-comment"><span class="hljs-comment">//    RTC  ,    RTC  </span></span><font></font>
  RTC.read(te);<font></font>
  Serial.print(te.Hour);<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">" : "</span></span>);<font></font>
  Serial.print(te.Minute);<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">" :"</span></span>);<font></font>
  Serial.print(te.Second);<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">" "</span></span>);<font></font>
  Serial.print(te.Day);<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">" "</span></span>);<font></font>
  Serial.print(te.Month);<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">" "</span></span>);<font></font>
  Serial.print(tmYearToCalendar(te.Year));<font></font>
  Serial.println();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     ,     , ,        :</span></span>
<span class="hljs-comment"><span class="hljs-comment">//0 -  ,1 -   , 2 -    </span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetShadowTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Hours, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Minutes, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Seconds, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> param)</span></span></span></span>{   
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> h,hshift,m,s;
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j&lt;<span class="hljs-number"><span class="hljs-number">8</span></span> ; j++) REG[j] = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Hours &gt;= <span class="hljs-number"><span class="hljs-number">12</span></span>) Hours -= <span class="hljs-number"><span class="hljs-number">12</span></span>;<font></font>
  h = Hours + <span class="hljs-number"><span class="hljs-number">6</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(h &gt;= <span class="hljs-number"><span class="hljs-number">12</span></span>) h -= <span class="hljs-number"><span class="hljs-number">12</span></span>;<font></font>
    <font></font>
  hshift = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) Minutes / <span class="hljs-number"><span class="hljs-number">12</span></span>;<font></font>
  <font></font>
  REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(((h*<span class="hljs-number"><span class="hljs-number">5</span></span>)+hshift)/<span class="hljs-number"><span class="hljs-number">8</span></span>)] = REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(((h*<span class="hljs-number"><span class="hljs-number">5</span></span>)+hshift)/<span class="hljs-number"><span class="hljs-number">8</span></span>)] | <span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;(((h*<span class="hljs-number"><span class="hljs-number">5</span></span>)+hshift)%<span class="hljs-number"><span class="hljs-number">8</span></span>);<font></font>
             <font></font>
   <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(param == <span class="hljs-number"><span class="hljs-number">1</span></span>)<font></font>
  {m = Minutes + <span class="hljs-number"><span class="hljs-number">30</span></span>;
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(m &gt;= <span class="hljs-number"><span class="hljs-number">60</span></span>) m -= <span class="hljs-number"><span class="hljs-number">60</span></span>;<font></font>
   REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(m/<span class="hljs-number"><span class="hljs-number">8</span></span>)] = REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(m/<span class="hljs-number"><span class="hljs-number">8</span></span>)] | <span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;(m%<span class="hljs-number"><span class="hljs-number">8</span></span>);<font></font>
   }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(param == <span class="hljs-number"><span class="hljs-number">2</span></span>)<font></font>
  {m = Minutes + <span class="hljs-number"><span class="hljs-number">30</span></span>;
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(m &gt;= <span class="hljs-number"><span class="hljs-number">60</span></span>) m -= <span class="hljs-number"><span class="hljs-number">60</span></span>;<font></font>
   REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(m/<span class="hljs-number"><span class="hljs-number">8</span></span>)] = REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(m/<span class="hljs-number"><span class="hljs-number">8</span></span>)] | <span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;(m%<span class="hljs-number"><span class="hljs-number">8</span></span>);<font></font>
     <font></font>
   s = Seconds + <span class="hljs-number"><span class="hljs-number">30</span></span>;
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(s &gt;= <span class="hljs-number"><span class="hljs-number">60</span></span>) s -= <span class="hljs-number"><span class="hljs-number">60</span></span>;<font></font>
   REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(s/<span class="hljs-number"><span class="hljs-number">8</span></span>)] = REG[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(s/<span class="hljs-number"><span class="hljs-number">8</span></span>)] | <span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;(s%<span class="hljs-number"><span class="hljs-number">8</span></span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j&lt;<span class="hljs-number"><span class="hljs-number">8</span></span> ; j++) SetUpLightByMask(j,REG[j]);<font></font>
  }<font></font>
  <font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//    </span></span></span><span class="hljs-function">
</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = <span class="hljs-number"><span class="hljs-number">0</span></span>; a &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; a++)<font></font>
    {c=<span class="hljs-number"><span class="hljs-number">0</span></span>;
     <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">0</span></span>; b &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; b++)<font></font>
      {c = c &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
       c = c | <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
       SetUpLightByMask(a, c);  <font></font>
       delay(<span class="hljs-number"><span class="hljs-number">10</span></span>);   <font></font>
      }<font></font>
   }<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = <span class="hljs-number"><span class="hljs-number">0</span></span>; a &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; a++)<font></font>
    {c=<span class="hljs-number"><span class="hljs-number">255</span></span>;
      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">0</span></span>; b &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; b++)<font></font>
      {c = c &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
       SetUpLightByMask(a, c);<font></font>
       delay(<span class="hljs-number"><span class="hljs-number">10</span></span>);     <font></font>
      }<font></font>
    }  <font></font>
}<font></font>
</code></pre> <br>
</div></div><br>
<h4></h4><br>
    .         .      (Arduino, RTC)     .      ,   .       ,    «- ».   —   .  :<br>
<br>
    .<br>
<br>
<div class="slideshow"><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.slideshare.net/slideshow/embed_code/61634811&amp;usg=ALkJrhjwqgKi7r1J8dhudjkhZ0os4s9d0g" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></div><br>
<br>
   ,       «»:<br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.youtube.com/embed/KbbakER89U0%3Ffeature%3Doembed&amp;usg=ALkJrhi-NTYzpgrCSq8xhOKI4f5zLxGc7Q" frameborder="0" allowfullscreen=""></iframe><br>
<br>
 , ,    :<br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.youtube.com/embed/SIPI6ug_dls%3Ffeature%3Doembed&amp;usg=ALkJrhiLtFXzzOG4WCT-ENdK4EyAhJld8A" frameborder="0" allowfullscreen=""></iframe><br>
<br>
    ,  ,   ,   . <br>
<br>
 ,  ,     .   ,    ?      .     :         ( ,     ,  ..). ,   ,  ,         .        . ,     .<br>
<br>
<h4></h4><br>
  ?<br>
<br>
<ul>
<li>,    ,   .</li>
<li>       .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kemampuan untuk dengan mudah mengubah urutan LED berkedip secara terprogram, yang memberikan beragam kombinasi tanpa batas.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak mengklaim kebenaran mutlak dari solusi sirkuit dan perangkat lunak kami. </font><font style="vertical-align: inherit;">Seperti yang telah disebutkan, pengalaman negatif juga pengalaman. </font><font style="vertical-align: inherit;">Mungkin artikel ini akan membantu seseorang menghindari kesalahan kita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih atas perhatian anda!</font></font></li>
</ul></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id394107/">https://habr.com/ru/post/id394107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id394095/index.html">Bagaimana Anak Sekolah Hackathon NASA Membalikkan Rekayasa Gelang Kebugaran untuk Mengontrol Drone</a></li>
<li><a href="../id394097/index.html">[BENCI] Nyeri. Format RusMARC</a></li>
<li><a href="../id394101/index.html">Poll: bahasa apa yang digunakan di OS Anda</a></li>
<li><a href="../id394103/index.html">Angin dan es di Mars</a></li>
<li><a href="../id394105/index.html">Usap Bluetooth cerdas memberi tahu Anda kapan waktunya untuk berubah</a></li>
<li><a href="../id394111/index.html">Berapa lama atau di mana dengan cepat menyimpan informasi pada disk</a></li>
<li><a href="../id394113/index.html">AOC dan Jide merilis all-in-one PCs di Remix OS</a></li>
<li><a href="../id394115/index.html">Berapa idemu?</a></li>
<li><a href="../id394123/index.html">Minecraft Gameband - gelang untuk para gamer</a></li>
<li><a href="../id394125/index.html">Windows 7 diinstal pada smartphone LG G Watch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>