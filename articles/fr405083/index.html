<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙇🏻 👩🏾‍🚀 👨🏽‍💼 Piratage des caméras de vidéosurveillance dans la pratique ⏯️ 👩🏼‍🤝‍👨🏽 🎺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les fans du film Ocean's Eleven Friends doivent avoir reconnu le cadre que nous avons choisi pour illustrer cet article. Le moment où les durs ont hab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Piratage des caméras de vidéosurveillance dans la pratique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/devline/blog/405083/">  Les fans du film Ocean's Eleven Friends doivent avoir reconnu le cadre que nous avons choisi pour illustrer cet article.  Le moment où les durs ont habilement remplacé le signal analogique des caméras de vidéosurveillance du casino est entré dans l'esprit de beaucoup.  Certains essaient même de le faire dans la vraie vie. <br><br><img src="https://habrastorage.org/web/121/cd6/5f9/121cd65f9c634829977ee5eb5de23af4.jpg" alt="image"><br><br>  Les technologies ont changé, maintenant les caméras IP sont préférées aux analogues, les méthodes pour les casser seront discutées en détail plus tard. <br><br><h3>  Si vous n'êtes pas paranoïaque, cela ne signifie pas que vous n'êtes pas surveillé </h3><br>  La plupart des pirates le font pour le plaisir ou pour obtenir une certaine renommée sur Internet.  Ils utilisent des «trous» bien connus dans les systèmes de support de caméra et publient, à leur avis, des vidéos amusantes sur des ressources Internet populaires.  YouTube regorge de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vidéos</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">similaires</a> . <br><br>  Nous considérerons les conséquences les plus graves de la vulnérabilité, à savoir lorsque le pirate ne se trahit pas et sa pénétration dans le système.  Une telle attaque est généralement soigneusement planifiée à l'avance, une semaine, voire un mois avant le hack. <br><br>  Comme dans notre exemple sur Ocean’s Eleven Friends, nous parlerons du remplacement d’un flux dans les systèmes de vidéosurveillance, pas seulement un signal analogique, mais un signal numérique, à savoir un flux RTSP. <br><a name="habracut"></a><br>  Étant donné que toutes les informations contenues dans cet article sont de nature informative et visent principalement à éliminer les erreurs de sécurité lors de la création d'un système de vidéosurveillance, nous ne recommandons pas d'utiliser la vulnérabilité, qui est discutée plus loin.  C'est pourquoi le piratage du réseau de vidéosurveillance lui-même ne sera envisagé que superficiellement et les méthodes décrites impliquent un accès libre au réseau de l'entreprise ou du particulier.  N'oubliez pas que l'accès non autorisé aux données peut être poursuivi. <br><br>  L'expérience de notre entreprise montre que le sujet est très pertinent, car au stade de la mise en service d'un système de vidéosurveillance, de nombreuses personnes connectent des caméras à leur système via des liaisons RTSP.  Soit pour gagner du temps, soit par ignorance, soit par conviction que cela est nécessaire, beaucoup ne pensent même pas à changer les mots de passe ou à voir quels paramètres de sécurité leur caméra prend en charge. <br><br>  Soit dit en passant, RTSP (Real Time Streaming Protocol) est un protocole qui vous permet de contrôler la vidéo en streaming en temps réel.  Tout ce que nous devons savoir, c'est qu'avec l'aide du lien RTSP, nous prendrons le flux vidéo de la caméra. <br><br>  Enfin, nous sommes arrivés à <b>pratiquer</b> , à savoir au plan selon lequel nous allons agir: <br><br>  1. Obtenir le lien RTSP pour la caméra dont nous voulons remplacer le flux. <br>  2. Préparation du fichier vidéo pour une diffusion ultérieure. <br>  3. Diffusez le fichier enregistré. <br>  4. Protection contre l'échange de flux secondaire. <br><br><h3>  Obtention du flux URI RTSP </h3><br>  Pour remplacer le signal de la caméra, vous devez d'abord trouver le flux vidéo dont nous avons besoin.  Cela nécessitera un lien vers celui-ci via le protocole RTSP.  La caméra transmet généralement plusieurs images (haute et basse résolution).  Le premier est utilisé pour l'enregistrement, et le second - pour la diffusion sur des écrans de vidéosurveillance.  La résolution minimale (le plus souvent 320 x 240 pixels) réduit la charge sur l'équipement.  Pour chaque flux RTSP, le lien se distingue souvent par un chiffre dans la clé. <br><br>  Différentes caméras peuvent avoir différents liens RTSP, mais la vue générale est approximativement la suivante: <br>  <b>rtsp: // [login: mot de passe @] adresse IP: port RTSP [/ clé]</b> . <br><br>  Le décodage est le suivant: <br><br><ul><li>  identifiant et mot de passe - ceux qui sont utilisés pour accéder à la caméra (ils peuvent ne pas l'être); </li><li>  si le lien contient le nom d'utilisateur et le mot de passe, le symbole @ est indiqué après eux pour séparer l'autorisation et l'adresse IP; </li><li>  Le port RTSP par lequel les commandes de contrôle vidéo en continu sont transmises est 554 par défaut; </li><li>  la clé est une partie unique du lien RTSP, qui peut varier en fonction du fabricant et du modèle de la caméra, par exemple: <br>  /? user = admin &amp; password = admin &amp; channel = channel_number &amp; stream = stream_number.sdp <br>  /play1.sdp - au lieu de "1", le numéro de flux est indiqué; <br>  / live / ch00_0 00 - numéro de canal, 0 - numéro de flux; <br>  / channel1 - au lieu de «1», le numéro de flux est indiqué. </li></ul><br>  <b>Comment trouver un lien RTSP sans avoir accès à la caméra?</b>  Quelques moyens simples: <br><br>  1. Recherchez le lien sur le site Web du fabricant de l’appareil photo. <br>  2. Recherchez sur Internet des sites qui fournissent des liens vers différents modèles de caméras, un exemple de ces sites <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br>  3. Téléchargez le manuel d'utilisation sur le site Web du fabricant et recherchez-y les informations nécessaires. <br><br>  Pour les cas où aucune des méthodes simples n'a aidé, il y a un peu plus compliqué.  Ici, au moins l'accès au réseau où se trouve la caméra sera nécessaire.  Étant donné que la plupart des caméras modernes prennent en charge ONVIF, nous pouvons découvrir le lien RTSP en utilisant ce protocole. <br>  Pour ce faire, envoyez plusieurs demandes sans autorisation ou avec autorisation sur la caméra proposée par défaut, par exemple, «admin: admin» ou «admin: 12345».  Soit dit en passant, dans la pratique, il y avait des caméras qui avaient un filtre d'adresse IP valide et un identifiant et un mot de passe non standard, mais en raison d'erreurs dans le firmware lors de l'accès via le protocole ONVIF, ni l'autorisation ni le filtre n'ont été vérifiés. <br><br>  <b>Comment obtenir le lien souhaité vers les deux flux de la caméra via le protocole ONVIF?</b> <br><br><div class="spoiler">  <b class="spoiler_title">1. En utilisant la commande GetProfiles, nous découvrons le nom du profil dont nous avons besoin de l'URI</b> <div class="spoiler_text"><pre> POST / onvif / media_service HTTP / 1.1
 Hôte: 192.168.1.77
 User-Agent: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Longueur du contenu: 2120
 Connexion: garder en vie
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetProfiles"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetProfiles /&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. Dans la réponse longue reçue, nous trouvons une ligne avec le nom du premier et du deuxième profil</b> <div class="spoiler_text"><pre> HTTP / 1.1 200 OK
 Serveur: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Longueur du contenu: 17405
 Connexion: fermer<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetProfilesResponse&gt;
             &lt;trt: Profiles fixed = "true" token = "profile_cam1_stream1"&gt;
                 &lt;tt: Nom&gt; profile_cam1_stream1 &lt;/ tt: Nom&gt;
                 &lt;tt: VideoSourceConfiguration token = "videosource_config_cam1"&gt;
                     &lt;tt: Name&gt; videosource_config_cam1 &lt;/ tt: Name&gt;
                     .
                     Ignorer la description du profil.
                     .
             &lt;/ trt: Profils&gt;
             &lt;trt: Profiles fixed = "true" token = "profile_cam1_stream2"&gt;
                 &lt;tt: Nom&gt; profile_cam1_stream2 &lt;/ tt: Nom&gt;
                 .
                 Nous sautons la description du deuxième profil.
                 .
             &lt;/ trt: Profils&gt;
             .
             Nous ne considérons pas le troisième profil.
             .
         &lt;/ trt: GetProfilesResponse&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;<font></font>
<font></font>
 - profile_cam1_stream1 est le nom du premier profil sur la caméra.
 - profile_cam1_stream2 est le nom du deuxième profil sur la caméra.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Vous devez maintenant demander uri rtsp pour ces profils à l'aide de la commande GetStreamUri, en spécifiant le profil souhaité dans le champ ProfileToken</b> <div class="spoiler_text"><pre> Exemple pour le premier thread:<font></font>
<font></font>
 POST / onvif / media_service HTTP / 1.1
 Hôte: 192.168.1.77
 User-Agent: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Longueur du contenu: 2479
 Connexion: garder en vie
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetStreamUri&gt;
             &lt;trt: StreamSetup xsi: type = "tt: StreamSetup"&gt;
                 &lt;tt: Stream xsi: type = "tt: StreamType"&gt; RTP-Unicast &lt;/ tt: Stream&gt;
                 &lt;tt: Transport xsi: type = "tt: Transport"&gt;
                     &lt;tt: Protocol xsi: type = "tt: TransportProtocol"&gt; UDP &lt;/ tt: Protocol&gt;
                 &lt;/ tt: Transport&gt;
             &lt;/ trt: StreamSetup&gt;
             &lt;trt: ProfileToken xsi: type = "tt: ReferenceToken"&gt; profile_cam1_stream1 &lt;/ trt: ProfileToken&gt;
         &lt;/ trt: GetStreamUri&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;<font></font>
<font></font>
 En réponse, nous obtenons le lien dont nous avons besoin:<font></font>
<font></font>
 HTTP / 1.1 200 OK
 Serveur: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Longueur du contenu: 3701
 Connexion: fermer<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetStreamUriResponse&gt;
             &lt;trt: MediaUri&gt;
                 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/1 &lt;/ tt: Uri&gt;
                 &lt;tt: InvalidAfterConnect&gt; false &lt;/ tt: InvalidAfterConnect&gt;
                 &lt;tt: InvalidAfterReboot&gt; false &lt;/ tt: InvalidAfterReboot&gt;
                 &lt;tt: Timeout&gt; PT0S &lt;/ tt: Timeout&gt;
             &lt;/ trt: MediaUri&gt;
         &lt;/ trt: GetStreamUriResponse&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;<font></font>
<font></font>
 Nous faisons de même pour le deuxième flux et obtenons le lien:
 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/2 &lt;/ tt: Uri&gt;
</pre><br></div></div><br><h3>  Écrire le flux RTSP dans un fichier </h3><br>  Lorsque nous avons obtenu les liens RTSP nécessaires, nous devons enregistrer une vidéo diffusée par eux pendant plusieurs heures.  N'oubliez pas que le double thread est utilisé dans les systèmes modernes, vous devez donc enregistrer les deux flux en même temps. <br><br>  Vous pouvez enregistrer un flux vidéo à l'aide du protocole RTSP à l'aide de divers logiciels.  Considérez les plus populaires: <b>ffmpeg, gstreamer et vlc</b> . <br><br><div class="spoiler">  <b class="spoiler_title">1. Enregistrement en continu via ffmpeg</b> <div class="spoiler_text"><pre> $ man ffmpeg
 Nous sommes intéressés par:
 - Copie vcodec - copie la vidéo dans un fichier;
 - copie acodec - copie audio dans un fichier;
 - rtsp_transport tcp - sélection d'une méthode de transmission d'un flux;
 - r 25 - réglage de la fréquence d'images par seconde;
 - copyts - copie des horodatages;
 - start_at_zero - copie les horodatages à partir de 00: 00: 00: 000<font></font>
<font></font>
 Nous substituons notre lien RTSP et par copie nous spécifions le chemin et le nom du fichier vers lequel l'enregistrement ira
 % ffmpeg -i rtsp: //192.168.1.77: 554 / snl / live / 1/1 -copyts -start_at_zero -rtsp_transport tcp -r 25 -vcodec copy -acodec copy /home/line/example/1.avi
</pre><br><img src="https://habrastorage.org/web/6a1/d19/f7f/6a1d19f7fe8b4153823d0307adccf174.png" alt="image"><br><br>  L'écriture dans un fichier a commencé. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. Enregistrement via vlc</b> <div class="spoiler_text"><pre> Vous pouvez vous familiariser avec l'ensemble des commandes que le lecteur multimédia vlc nous offre en utilisant la commande
 $ vlc –h.<font></font>
<font></font>
 Nous sommes intéressés par:
 - sout = # file {path} - pointez sur le fichier dans lequel nous voulons copier la vidéo;
 - rtsp-tcp - reçoit rtsp par tcp;
 - rtsp-frame-buffer-size = 1000 - tampon pour que la vidéo ne s'effrite pas pendant la lecture;
 - h264-fps = 25 - module complémentaire pour 25 images.<font></font>
<font></font>
 Remplacer nos données et exécuter
 $ cvlc rtsp: //192.168.1.77: 554 / snl / live / 1/1 --rtsp-tcp --rtsp-frame-buffer-size = 1000 --h264-fps = 25: sout = # file {dst = /home/line/example/1.avi}.<font></font>
<font></font>
 La fenêtre vlc s'ouvrira et l'enregistrement commencera; lorsque vous fermerez la fenêtre, l'enregistrement s'arrêtera.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Enregistrement via gstreamer</b> <div class="spoiler_text"><pre> Vous trouverez des informations sur l'utilisation de gstreamer &lt;a href="https://gstreamer.freedesktop.org/documentation/plugins.html"&gt; ici &lt;/a&gt;.
 - rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? Channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif" - spécifiez le flux RTSP comme source de données.
 - rtph264depay - dans RTSP, la vidéo va en petits morceaux (paquets rtp), via rtph264depay, nous recevrons la vidéo de ces paquets.
 - h264parse - comme son nom l'indique, analyse le flux H.264.
 - avimux - collecte le flux dans avi, vous pouvez également utiliser mp4mux ou matroskamux (mkv).
 - filesink location = 1.avi - spécifiez le fichier dans lequel la vidéo sera enregistrée.<font></font>
<font></font>
 gst-launch-1.0 -v rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif"!  rtph264depay!  h264parse!  mp4mux!  emplacement du collecteur de fichiers = 1.mp4
</pre><br><img src="https://habrastorage.org/web/032/b02/115/032b021155034149bc35e8068548d5eb.png" alt="image"><br></div></div><br><h3>  Diffuser le flux RTSP à partir d'un fichier </h3><br>  Il est temps de commencer à diffuser le fichier enregistré au format RTSP.  Pour ce faire, nous utiliserons tous les mêmes programmes discutés dans la section ci-dessus. <br><br>  1. Pour diffuser un flux vidéo depuis la caméra à l'aide de ffmpeg, vous devez utiliser ffserver.  Sa description peut être trouvée <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Afin de définir les paramètres de traduction, il est nécessaire de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">remplir le fichier</a> ffserver.conf. <br><br><div class="spoiler">  <b class="spoiler_title">ffserver</b> <div class="spoiler_text"><pre> Fichier Ffserver.conf
 RTSPPort - définissez le numéro du port rtsp par lequel la diffusion passera.
 &lt;Stream snl / live / 1/1&gt; - après Stream, nous avons défini la clé nécessaire.
 Format rtp - format de transmission.
 Fichier "/home/line/example/1.avi" - rtsp_transport tcp - spécifiez le chemin d'accès au fichier que vous souhaitez transférer et la clé à transférer via tcp.
 NoAudio - ne transmet pas de son.<font></font>
<font></font>
 Fichier Ffserver.conf<font></font>
<font></font>
 RTSPPort 554<font></font>
<font></font>
 &lt;Stream snl / live / 1/1&gt;
 Format rtp
 Fichier "/home/line/example/1.avi" -rtsp_transport tcp
 NoAudio 
 &lt;/Stream&gt;
 Ensuite, exécutez% ffserver -f ffserver.conf.
</pre><br><img src="https://habrastorage.org/web/bff/0c4/0bb/bff0c40bb4b5431fb1b564ed19d442c7.png" alt="image"><br></div></div><br>  2. Nous allons maintenant utiliser le lecteur vlc-media.  Malgré le fait que c'est le moyen le plus simple, malheureusement, vlc ne peut diffuser un flux que sur UDP. <br><br><div class="spoiler">  <b class="spoiler_title">lecteur multimédia vlc</b> <div class="spoiler_text"><pre> Commande pour démarrer le flux rtsp:
 - sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} - définit le lien par lequel la diffusion aura lieu.
 - répéter - si nécessaire, paramétrez la vidéo pour qu'elle soit répétée.
 vlc /home/line/example/1.avi --sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} - répétition
</pre><br></div></div><br>  3. Enfin, en utilisant gst-server. <br><br><div class="spoiler">  <b class="spoiler_title">gst-server</b> <div class="spoiler_text"><pre> Vous devez d'abord l'installer.
 $ sudo apt-get install gstreamer1.0
 $ wget https://gstreamer.freedesktop.org/src/gst-rtsp-server/gst-rtsp-server-1.8.3.tar.xz
 /gst-rtsp-server-1.8.3$ sudo apt install gtk-doc-tools
 /gst-rtsp-server-1.8.3$ sudo apt-get install libgstreamer-plugins-base1.0-dev
 /gst-rtsp-server-1.8.3$ make
 Maintenant, nous pouvons changer le fichier /gst-rtsp-server-1.8.3/examples/test-launch.c
 Ici, vous pouvez modifier le port RTSP par défaut
 #define DEFAULT_RTSP_PORT "8554"
 et la clé est dans le lien
 gst_rtsp_mount_points_add_factory (montages, "/ test", usine).
 Après avoir substitué nos valeurs, nous ferons.
 Exécutez maintenant le fichier de lancement de test avec les clés.
 - rtspsrc location = "/ home / line / example / 1.avi" - le chemin vers le fichier que nous allons lire.
 - Encodeur H264 - encoder en h.264.
 - rtph264pay name = pay0 pt = 96 - divisez notre flux en parties.
 $ ~ / gst-rtsp-server-1.8.3 / examples $ ./test-launch "(rtspsrc location =" / home / line / example / 1.avi "! x264enc! rtph264pay name = pay0 pt = 96)"
</pre><br></div></div><br>  Le fichier enregistré est diffusé au format RTSP, après quoi nous résolvons le problème de défaillance de la caméra.  Voici quelques options qui varient en fonction de l'objet que nous voulons attaquer.  En fait, il existe de nombreuses autres façons, ne considérez que les plus élémentaires.  La première chose dont nous avons besoin est d'entrer dans le réseau dont nous avons besoin. <br><br>  Si l'objet est grand territorialement, il est souvent possible d'approcher physiquement certaines caméras et même d'essayer de trouver l'équipement de commutation auquel la caméra est connectée. <br><br>  Si l'objet est petit, vous pouvez essayer d'entrer dans le réseau via le wi-fi et le scanner en utilisant nmap, par exemple. <br><br>  De plus, s'il existe un accès physique à la caméra, vous pouvez la pirater en plusieurs étapes à l'aide d'un ordinateur à plaque unique: <br><br>  1) activer l'enregistrement wire-shark; <br>  2) déconnectez brièvement le fil de la caméra et connectez-le à une seule carte; <br>  3) remettre le câble à sa place; <br>  4) étudier les journaux reçus. <br><br>  Ou si vous avez accès au réseau, vous pouvez utiliser la méthode de substitution classique: <br><br>  - en utilisant un support arpspoof entre la caméra et le serveur; <br>  - utiliser ip_forward pour transmettre les requêtes du serveur de surveillance à la caméra IP, et vice versa; <br>  - en utilisant iptables, redirigez toutes les demandes via le port RTSP vers le serveur de surveillance non pas depuis la caméra, mais depuis notre machine. <br><br><h3>  Piratage de caméras de sécurité </h3><br>  Afin de vous protéger contre l'usurpation de fil selon la procédure décrite ci-dessus, plusieurs méthodes peuvent être utilisées: <br><br>  <b>1. Intégration de la caméra</b> <br>  La meilleure protection est fournie par l'intégration de la caméra dans un produit logiciel.  Vérifiez si votre caméra est intégrée au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">système de surveillance de ligne</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br>  Si votre caméra ou votre fabricant ne figure pas dans la liste, vous pouvez contacter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le support technique</a> avec une demande d'intégration de votre modèle de caméra IP. <br><br>  <b>2. Mise à jour du firmware</b> <br>  Il est nécessaire de maintenir constamment le firmware de la caméra à jour, car avec l'aide de mises à jour, les développeurs corrigent diverses vulnérabilités et augmentent ainsi la stabilité des caméras. <br><br>  <b>3. Modification des identifiants et mots de passe standard</b> <br>  La première chose qu'un attaquant fait est d'essayer d'utiliser le nom d'utilisateur et le mot de passe de la caméra standard.  Ils sont indiqués dans le mode d'emploi, il n'est donc pas difficile de les trouver.  Par conséquent, utilisez toujours un nom d'utilisateur et un mot de passe uniques. <br><br>  <b>4. Activation de l'autorisation obligatoire</b> <br>  Cette fonctionnalité est présente dans de nombreux appareils photo modernes, mais, malheureusement, tous les utilisateurs ne la connaissent pas.  Si vous désactivez cette option, la caméra ne demandera pas d'autorisation lorsqu'elle y sera connectée, ce qui la rendra vulnérable au piratage.  Il convient de noter qu'il existe des caméras avec double autorisation pour l'accès http et pour l'accès via le protocole ONVIF.  De plus, dans certaines caméras, il existe un paramètre distinct pour la demande d'autorisation lors de la connexion via une liaison RTSP directe. <br><br>  <b>5. Filtre d'adresse IP</b> <br>  Si la caméra prend en charge la fonction de la soi-disant liste blanche, il est préférable de ne pas la négliger.  Avec son aide, l'adresse IP à partir de laquelle vous pouvez vous connecter à la caméra est déterminée.  Il doit s'agir de l'adresse du serveur auquel la caméra est connectée et, si nécessaire, de la deuxième adresse IP du poste de travail à partir duquel la configuration est effectuée.  Mais ce n'est pas la méthode la plus fiable, car un attaquant peut utiliser la même adresse IP lors du remplacement d'un appareil.  Par conséquent, il est préférable d'utiliser cette option avec d'autres recommandations. <br><br>  <b>6. Protection du réseau</b> <br>  Il est nécessaire de configurer correctement l'équipement de commutation.  La plupart des commutateurs prennent désormais en charge la protection contre l'usurpation d'arp - assurez-vous de l'utiliser. <br><br>  <b>7. Partage réseau</b> <br>  Vous devez porter une attention particulière à cet élément, car il joue un rôle important dans la sécurité de votre système.  La séparation du réseau d'entreprise et du réseau de surveillance vous protégera des intrus ou même de vos propres employés qui ont accès au réseau partagé et veulent vous pirater. <br><br>  <b>8. Activer le menu OSD</b> <br>  Vous devez activer le menu OSD avec l'heure et la date actuelles sur l'appareil photo afin de pouvoir toujours vérifier la pertinence de l'image.  C'est un bon moyen de se protéger contre la modification du métrage, car l'OSD est superposé à toutes les vidéos provenant d'une caméra spécifique.  Même lorsqu'un attaquant écrit le flux RTSP, l'usurpation sera perceptible grâce aux données qui resteront toujours sur les images vidéo. <br><br>  Malheureusement, de nombreux attaquants ont appris à trouver rapidement et à tirer parti des vulnérabilités des systèmes de vidéosurveillance IP.  Pour sécuriser le réseau, il est nécessaire de vous familiariser avec les méthodes de protection décrites dans cet article.  Prévoyez suffisamment de temps pour la mise en service du système, et en particulier pour configurer correctement tous ses composants.  Vous pouvez donc fournir au réseau une sécurité maximale contre le piratage. <br><br>  <b>En conclusion, nous vous suggérons de partager dans les commentaires, comment aborderiez-vous la protection de votre réseau de vidéosurveillance contre le piratage?</b>  <b>Quelles méthodes d'attaque considérez-vous comme les plus dangereuses?</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr405083/">https://habr.com/ru/post/fr405083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr405073/index.html">Centre de données pour la Coupe du monde</a></li>
<li><a href="../fr405075/index.html">Envoi et réception de SMS à l'aide de passerelles VoIP OpenVox</a></li>
<li><a href="../fr405077/index.html">Surveillance de la température budgétaire: Arduino + Zabbix</a></li>
<li><a href="../fr405079/index.html">La Californie paie les États voisins pour récupérer l'excédent d'électricité des centrales solaires</a></li>
<li><a href="../fr405081/index.html">[CASE] Comment nous avons fait une copie de l'ouvrière et de la fermière collective pour le Musée du Parlement européen</a></li>
<li><a href="../fr405085/index.html">Revue vidéo sur la caméra Clevermic UNO PTZ</a></li>
<li><a href="../fr405087/index.html">Comment connecter la vidéosurveillance à l'aide d'une amplification de signal 2G / 3G / 4G</a></li>
<li><a href="../fr405089/index.html">Comment fonctionne le service Dog Walking?</a></li>
<li><a href="../fr405091/index.html">La NASA frappera un astéroïde en octobre 2022 pour tester la défense planétaire</a></li>
<li><a href="../fr405093/index.html">Pourquoi la particule de Higgs est-elle si importante</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>