<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôáüèª üë©üèæ‚ÄçüöÄ üë®üèΩ‚Äçüíº Piratage des cam√©ras de vid√©osurveillance dans la pratique ‚èØÔ∏è üë©üèº‚Äçü§ù‚Äçüë®üèΩ üé∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les fans du film Ocean's Eleven Friends doivent avoir reconnu le cadre que nous avons choisi pour illustrer cet article. Le moment o√π les durs ont hab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Piratage des cam√©ras de vid√©osurveillance dans la pratique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/devline/blog/405083/">  Les fans du film Ocean's Eleven Friends doivent avoir reconnu le cadre que nous avons choisi pour illustrer cet article.  Le moment o√π les durs ont habilement remplac√© le signal analogique des cam√©ras de vid√©osurveillance du casino est entr√© dans l'esprit de beaucoup.  Certains essaient m√™me de le faire dans la vraie vie. <br><br><img src="https://habrastorage.org/web/121/cd6/5f9/121cd65f9c634829977ee5eb5de23af4.jpg" alt="image"><br><br>  Les technologies ont chang√©, maintenant les cam√©ras IP sont pr√©f√©r√©es aux analogues, les m√©thodes pour les casser seront discut√©es en d√©tail plus tard. <br><br><h3>  Si vous n'√™tes pas parano√Øaque, cela ne signifie pas que vous n'√™tes pas surveill√© </h3><br>  La plupart des pirates le font pour le plaisir ou pour obtenir une certaine renomm√©e sur Internet.  Ils utilisent des ¬´trous¬ª bien connus dans les syst√®mes de support de cam√©ra et publient, √† leur avis, des vid√©os amusantes sur des ressources Internet populaires.  YouTube regorge de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©os</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">similaires</a> . <br><br>  Nous consid√©rerons les cons√©quences les plus graves de la vuln√©rabilit√©, √† savoir lorsque le pirate ne se trahit pas et sa p√©n√©tration dans le syst√®me.  Une telle attaque est g√©n√©ralement soigneusement planifi√©e √† l'avance, une semaine, voire un mois avant le hack. <br><br>  Comme dans notre exemple sur Ocean‚Äôs Eleven Friends, nous parlerons du remplacement d‚Äôun flux dans les syst√®mes de vid√©osurveillance, pas seulement un signal analogique, mais un signal num√©rique, √† savoir un flux RTSP. <br><a name="habracut"></a><br>  √âtant donn√© que toutes les informations contenues dans cet article sont de nature informative et visent principalement √† √©liminer les erreurs de s√©curit√© lors de la cr√©ation d'un syst√®me de vid√©osurveillance, nous ne recommandons pas d'utiliser la vuln√©rabilit√©, qui est discut√©e plus loin.  C'est pourquoi le piratage du r√©seau de vid√©osurveillance lui-m√™me ne sera envisag√© que superficiellement et les m√©thodes d√©crites impliquent un acc√®s libre au r√©seau de l'entreprise ou du particulier.  N'oubliez pas que l'acc√®s non autoris√© aux donn√©es peut √™tre poursuivi. <br><br>  L'exp√©rience de notre entreprise montre que le sujet est tr√®s pertinent, car au stade de la mise en service d'un syst√®me de vid√©osurveillance, de nombreuses personnes connectent des cam√©ras √† leur syst√®me via des liaisons RTSP.  Soit pour gagner du temps, soit par ignorance, soit par conviction que cela est n√©cessaire, beaucoup ne pensent m√™me pas √† changer les mots de passe ou √† voir quels param√®tres de s√©curit√© leur cam√©ra prend en charge. <br><br>  Soit dit en passant, RTSP (Real Time Streaming Protocol) est un protocole qui vous permet de contr√¥ler la vid√©o en streaming en temps r√©el.  Tout ce que nous devons savoir, c'est qu'avec l'aide du lien RTSP, nous prendrons le flux vid√©o de la cam√©ra. <br><br>  Enfin, nous sommes arriv√©s √† <b>pratiquer</b> , √† savoir au plan selon lequel nous allons agir: <br><br>  1. Obtenir le lien RTSP pour la cam√©ra dont nous voulons remplacer le flux. <br>  2. Pr√©paration du fichier vid√©o pour une diffusion ult√©rieure. <br>  3. Diffusez le fichier enregistr√©. <br>  4. Protection contre l'√©change de flux secondaire. <br><br><h3>  Obtention du flux URI RTSP </h3><br>  Pour remplacer le signal de la cam√©ra, vous devez d'abord trouver le flux vid√©o dont nous avons besoin.  Cela n√©cessitera un lien vers celui-ci via le protocole RTSP.  La cam√©ra transmet g√©n√©ralement plusieurs images (haute et basse r√©solution).  Le premier est utilis√© pour l'enregistrement, et le second - pour la diffusion sur des √©crans de vid√©osurveillance.  La r√©solution minimale (le plus souvent 320 x 240 pixels) r√©duit la charge sur l'√©quipement.  Pour chaque flux RTSP, le lien se distingue souvent par un chiffre dans la cl√©. <br><br>  Diff√©rentes cam√©ras peuvent avoir diff√©rents liens RTSP, mais la vue g√©n√©rale est approximativement la suivante: <br>  <b>rtsp: // [login: mot de passe @] adresse IP: port RTSP [/ cl√©]</b> . <br><br>  Le d√©codage est le suivant: <br><br><ul><li>  identifiant et mot de passe - ceux qui sont utilis√©s pour acc√©der √† la cam√©ra (ils peuvent ne pas l'√™tre); </li><li>  si le lien contient le nom d'utilisateur et le mot de passe, le symbole @ est indiqu√© apr√®s eux pour s√©parer l'autorisation et l'adresse IP; </li><li>  Le port RTSP par lequel les commandes de contr√¥le vid√©o en continu sont transmises est 554 par d√©faut; </li><li>  la cl√© est une partie unique du lien RTSP, qui peut varier en fonction du fabricant et du mod√®le de la cam√©ra, par exemple: <br>  /? user = admin &amp; password = admin &amp; channel = channel_number &amp; stream = stream_number.sdp <br>  /play1.sdp - au lieu de "1", le num√©ro de flux est indiqu√©; <br>  / live / ch00_0 00 - num√©ro de canal, 0 - num√©ro de flux; <br>  / channel1 - au lieu de ¬´1¬ª, le num√©ro de flux est indiqu√©. </li></ul><br>  <b>Comment trouver un lien RTSP sans avoir acc√®s √† la cam√©ra?</b>  Quelques moyens simples: <br><br>  1. Recherchez le lien sur le site Web du fabricant de l‚Äôappareil photo. <br>  2. Recherchez sur Internet des sites qui fournissent des liens vers diff√©rents mod√®les de cam√©ras, un exemple de ces sites <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br>  3. T√©l√©chargez le manuel d'utilisation sur le site Web du fabricant et recherchez-y les informations n√©cessaires. <br><br>  Pour les cas o√π aucune des m√©thodes simples n'a aid√©, il y a un peu plus compliqu√©.  Ici, au moins l'acc√®s au r√©seau o√π se trouve la cam√©ra sera n√©cessaire.  √âtant donn√© que la plupart des cam√©ras modernes prennent en charge ONVIF, nous pouvons d√©couvrir le lien RTSP en utilisant ce protocole. <br>  Pour ce faire, envoyez plusieurs demandes sans autorisation ou avec autorisation sur la cam√©ra propos√©e par d√©faut, par exemple, ¬´admin: admin¬ª ou ¬´admin: 12345¬ª.  Soit dit en passant, dans la pratique, il y avait des cam√©ras qui avaient un filtre d'adresse IP valide et un identifiant et un mot de passe non standard, mais en raison d'erreurs dans le firmware lors de l'acc√®s via le protocole ONVIF, ni l'autorisation ni le filtre n'ont √©t√© v√©rifi√©s. <br><br>  <b>Comment obtenir le lien souhait√© vers les deux flux de la cam√©ra via le protocole ONVIF?</b> <br><br><div class="spoiler">  <b class="spoiler_title">1. En utilisant la commande GetProfiles, nous d√©couvrons le nom du profil dont nous avons besoin de l'URI</b> <div class="spoiler_text"><pre> POST / onvif / media_service HTTP / 1.1
 H√¥te: 192.168.1.77
 User-Agent: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Longueur du contenu: 2120
 Connexion: garder en vie
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetProfiles"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetProfiles /&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. Dans la r√©ponse longue re√ßue, nous trouvons une ligne avec le nom du premier et du deuxi√®me profil</b> <div class="spoiler_text"><pre> HTTP / 1.1 200 OK
 Serveur: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Longueur du contenu: 17405
 Connexion: fermer<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetProfilesResponse&gt;
             &lt;trt: Profiles fixed = "true" token = "profile_cam1_stream1"&gt;
                 &lt;tt: Nom&gt; profile_cam1_stream1 &lt;/ tt: Nom&gt;
                 &lt;tt: VideoSourceConfiguration token = "videosource_config_cam1"&gt;
                     &lt;tt: Name&gt; videosource_config_cam1 &lt;/ tt: Name&gt;
                     .
                     Ignorer la description du profil.
                     .
             &lt;/ trt: Profils&gt;
             &lt;trt: Profiles fixed = "true" token = "profile_cam1_stream2"&gt;
                 &lt;tt: Nom&gt; profile_cam1_stream2 &lt;/ tt: Nom&gt;
                 .
                 Nous sautons la description du deuxi√®me profil.
                 .
             &lt;/ trt: Profils&gt;
             .
             Nous ne consid√©rons pas le troisi√®me profil.
             .
         &lt;/ trt: GetProfilesResponse&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;<font></font>
<font></font>
 - profile_cam1_stream1 est le nom du premier profil sur la cam√©ra.
 - profile_cam1_stream2 est le nom du deuxi√®me profil sur la cam√©ra.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Vous devez maintenant demander uri rtsp pour ces profils √† l'aide de la commande GetStreamUri, en sp√©cifiant le profil souhait√© dans le champ ProfileToken</b> <div class="spoiler_text"><pre> Exemple pour le premier thread:<font></font>
<font></font>
 POST / onvif / media_service HTTP / 1.1
 H√¥te: 192.168.1.77
 User-Agent: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Longueur du contenu: 2479
 Connexion: garder en vie
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetStreamUri&gt;
             &lt;trt: StreamSetup xsi: type = "tt: StreamSetup"&gt;
                 &lt;tt: Stream xsi: type = "tt: StreamType"&gt; RTP-Unicast &lt;/ tt: Stream&gt;
                 &lt;tt: Transport xsi: type = "tt: Transport"&gt;
                     &lt;tt: Protocol xsi: type = "tt: TransportProtocol"&gt; UDP &lt;/ tt: Protocol&gt;
                 &lt;/ tt: Transport&gt;
             &lt;/ trt: StreamSetup&gt;
             &lt;trt: ProfileToken xsi: type = "tt: ReferenceToken"&gt; profile_cam1_stream1 &lt;/ trt: ProfileToken&gt;
         &lt;/ trt: GetStreamUri&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;<font></font>
<font></font>
 En r√©ponse, nous obtenons le lien dont nous avons besoin:<font></font>
<font></font>
 HTTP / 1.1 200 OK
 Serveur: gSOAP / 2.8
 Type de contenu: application / soap + xml;  charset = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Longueur du contenu: 3701
 Connexion: fermer<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Enveloppes xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Ignorez la description de l'espace de noms complet.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Header&gt; &lt;/ SOAP-ENV: Header&gt;
     &lt;SOAP-ENV: Corps&gt;
         &lt;trt: GetStreamUriResponse&gt;
             &lt;trt: MediaUri&gt;
                 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/1 &lt;/ tt: Uri&gt;
                 &lt;tt: InvalidAfterConnect&gt; false &lt;/ tt: InvalidAfterConnect&gt;
                 &lt;tt: InvalidAfterReboot&gt; false &lt;/ tt: InvalidAfterReboot&gt;
                 &lt;tt: Timeout&gt; PT0S &lt;/ tt: Timeout&gt;
             &lt;/ trt: MediaUri&gt;
         &lt;/ trt: GetStreamUriResponse&gt;
     &lt;/ SOAP-ENV: Corps&gt;
 &lt;/ SOAP-ENV: enveloppe&gt;<font></font>
<font></font>
 Nous faisons de m√™me pour le deuxi√®me flux et obtenons le lien:
 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/2 &lt;/ tt: Uri&gt;
</pre><br></div></div><br><h3>  √âcrire le flux RTSP dans un fichier </h3><br>  Lorsque nous avons obtenu les liens RTSP n√©cessaires, nous devons enregistrer une vid√©o diffus√©e par eux pendant plusieurs heures.  N'oubliez pas que le double thread est utilis√© dans les syst√®mes modernes, vous devez donc enregistrer les deux flux en m√™me temps. <br><br>  Vous pouvez enregistrer un flux vid√©o √† l'aide du protocole RTSP √† l'aide de divers logiciels.  Consid√©rez les plus populaires: <b>ffmpeg, gstreamer et vlc</b> . <br><br><div class="spoiler">  <b class="spoiler_title">1. Enregistrement en continu via ffmpeg</b> <div class="spoiler_text"><pre> $ man ffmpeg
 Nous sommes int√©ress√©s par:
 - Copie vcodec - copie la vid√©o dans un fichier;
 - copie acodec - copie audio dans un fichier;
 - rtsp_transport tcp - s√©lection d'une m√©thode de transmission d'un flux;
 - r 25 - r√©glage de la fr√©quence d'images par seconde;
 - copyts - copie des horodatages;
 - start_at_zero - copie les horodatages √† partir de 00: 00: 00: 000<font></font>
<font></font>
 Nous substituons notre lien RTSP et par copie nous sp√©cifions le chemin et le nom du fichier vers lequel l'enregistrement ira
 % ffmpeg -i rtsp: //192.168.1.77: 554 / snl / live / 1/1 -copyts -start_at_zero -rtsp_transport tcp -r 25 -vcodec copy -acodec copy /home/line/example/1.avi
</pre><br><img src="https://habrastorage.org/web/6a1/d19/f7f/6a1d19f7fe8b4153823d0307adccf174.png" alt="image"><br><br>  L'√©criture dans un fichier a commenc√©. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. Enregistrement via vlc</b> <div class="spoiler_text"><pre> Vous pouvez vous familiariser avec l'ensemble des commandes que le lecteur multim√©dia vlc nous offre en utilisant la commande
 $ vlc ‚Äìh.<font></font>
<font></font>
 Nous sommes int√©ress√©s par:
 - sout = # file {path} - pointez sur le fichier dans lequel nous voulons copier la vid√©o;
 - rtsp-tcp - re√ßoit rtsp par tcp;
 - rtsp-frame-buffer-size = 1000 - tampon pour que la vid√©o ne s'effrite pas pendant la lecture;
 - h264-fps = 25 - module compl√©mentaire pour 25 images.<font></font>
<font></font>
 Remplacer nos donn√©es et ex√©cuter
 $ cvlc rtsp: //192.168.1.77: 554 / snl / live / 1/1 --rtsp-tcp --rtsp-frame-buffer-size = 1000 --h264-fps = 25: sout = # file {dst = /home/line/example/1.avi}.<font></font>
<font></font>
 La fen√™tre vlc s'ouvrira et l'enregistrement commencera; lorsque vous fermerez la fen√™tre, l'enregistrement s'arr√™tera.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Enregistrement via gstreamer</b> <div class="spoiler_text"><pre> Vous trouverez des informations sur l'utilisation de gstreamer &lt;a href="https://gstreamer.freedesktop.org/documentation/plugins.html"&gt; ici &lt;/a&gt;.
 - rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? Channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif" - sp√©cifiez le flux RTSP comme source de donn√©es.
 - rtph264depay - dans RTSP, la vid√©o va en petits morceaux (paquets rtp), via rtph264depay, nous recevrons la vid√©o de ces paquets.
 - h264parse - comme son nom l'indique, analyse le flux H.264.
 - avimux - collecte le flux dans avi, vous pouvez √©galement utiliser mp4mux ou matroskamux (mkv).
 - filesink location = 1.avi - sp√©cifiez le fichier dans lequel la vid√©o sera enregistr√©e.<font></font>
<font></font>
 gst-launch-1.0 -v rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif"!  rtph264depay!  h264parse!  mp4mux!  emplacement du collecteur de fichiers = 1.mp4
</pre><br><img src="https://habrastorage.org/web/032/b02/115/032b021155034149bc35e8068548d5eb.png" alt="image"><br></div></div><br><h3>  Diffuser le flux RTSP √† partir d'un fichier </h3><br>  Il est temps de commencer √† diffuser le fichier enregistr√© au format RTSP.  Pour ce faire, nous utiliserons tous les m√™mes programmes discut√©s dans la section ci-dessus. <br><br>  1. Pour diffuser un flux vid√©o depuis la cam√©ra √† l'aide de ffmpeg, vous devez utiliser ffserver.  Sa description peut √™tre trouv√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Afin de d√©finir les param√®tres de traduction, il est n√©cessaire de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">remplir le fichier</a> ffserver.conf. <br><br><div class="spoiler">  <b class="spoiler_title">ffserver</b> <div class="spoiler_text"><pre> Fichier Ffserver.conf
 RTSPPort - d√©finissez le num√©ro du port rtsp par lequel la diffusion passera.
 &lt;Stream snl / live / 1/1&gt; - apr√®s Stream, nous avons d√©fini la cl√© n√©cessaire.
 Format rtp - format de transmission.
 Fichier "/home/line/example/1.avi" - rtsp_transport tcp - sp√©cifiez le chemin d'acc√®s au fichier que vous souhaitez transf√©rer et la cl√© √† transf√©rer via tcp.
 NoAudio - ne transmet pas de son.<font></font>
<font></font>
 Fichier Ffserver.conf<font></font>
<font></font>
 RTSPPort 554<font></font>
<font></font>
 &lt;Stream snl / live / 1/1&gt;
 Format rtp
 Fichier "/home/line/example/1.avi" -rtsp_transport tcp
 NoAudio 
 &lt;/Stream&gt;
 Ensuite, ex√©cutez% ffserver -f ffserver.conf.
</pre><br><img src="https://habrastorage.org/web/bff/0c4/0bb/bff0c40bb4b5431fb1b564ed19d442c7.png" alt="image"><br></div></div><br>  2. Nous allons maintenant utiliser le lecteur vlc-media.  Malgr√© le fait que c'est le moyen le plus simple, malheureusement, vlc ne peut diffuser un flux que sur UDP. <br><br><div class="spoiler">  <b class="spoiler_title">lecteur multim√©dia vlc</b> <div class="spoiler_text"><pre> Commande pour d√©marrer le flux rtsp:
 - sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} - d√©finit le lien par lequel la diffusion aura lieu.
 - r√©p√©ter - si n√©cessaire, param√©trez la vid√©o pour qu'elle soit r√©p√©t√©e.
 vlc /home/line/example/1.avi --sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} - r√©p√©tition
</pre><br></div></div><br>  3. Enfin, en utilisant gst-server. <br><br><div class="spoiler">  <b class="spoiler_title">gst-server</b> <div class="spoiler_text"><pre> Vous devez d'abord l'installer.
 $ sudo apt-get install gstreamer1.0
 $ wget https://gstreamer.freedesktop.org/src/gst-rtsp-server/gst-rtsp-server-1.8.3.tar.xz
 /gst-rtsp-server-1.8.3$ sudo apt install gtk-doc-tools
 /gst-rtsp-server-1.8.3$ sudo apt-get install libgstreamer-plugins-base1.0-dev
 /gst-rtsp-server-1.8.3$ make
 Maintenant, nous pouvons changer le fichier /gst-rtsp-server-1.8.3/examples/test-launch.c
 Ici, vous pouvez modifier le port RTSP par d√©faut
 #define DEFAULT_RTSP_PORT "8554"
 et la cl√© est dans le lien
 gst_rtsp_mount_points_add_factory (montages, "/ test", usine).
 Apr√®s avoir substitu√© nos valeurs, nous ferons.
 Ex√©cutez maintenant le fichier de lancement de test avec les cl√©s.
 - rtspsrc location = "/ home / line / example / 1.avi" - le chemin vers le fichier que nous allons lire.
 - Encodeur H264 - encoder en h.264.
 - rtph264pay name = pay0 pt = 96 - divisez notre flux en parties.
 $ ~ / gst-rtsp-server-1.8.3 / examples $ ./test-launch "(rtspsrc location =" / home / line / example / 1.avi "! x264enc! rtph264pay name = pay0 pt = 96)"
</pre><br></div></div><br>  Le fichier enregistr√© est diffus√© au format RTSP, apr√®s quoi nous r√©solvons le probl√®me de d√©faillance de la cam√©ra.  Voici quelques options qui varient en fonction de l'objet que nous voulons attaquer.  En fait, il existe de nombreuses autres fa√ßons, ne consid√©rez que les plus √©l√©mentaires.  La premi√®re chose dont nous avons besoin est d'entrer dans le r√©seau dont nous avons besoin. <br><br>  Si l'objet est grand territorialement, il est souvent possible d'approcher physiquement certaines cam√©ras et m√™me d'essayer de trouver l'√©quipement de commutation auquel la cam√©ra est connect√©e. <br><br>  Si l'objet est petit, vous pouvez essayer d'entrer dans le r√©seau via le wi-fi et le scanner en utilisant nmap, par exemple. <br><br>  De plus, s'il existe un acc√®s physique √† la cam√©ra, vous pouvez la pirater en plusieurs √©tapes √† l'aide d'un ordinateur √† plaque unique: <br><br>  1) activer l'enregistrement wire-shark; <br>  2) d√©connectez bri√®vement le fil de la cam√©ra et connectez-le √† une seule carte; <br>  3) remettre le c√¢ble √† sa place; <br>  4) √©tudier les journaux re√ßus. <br><br>  Ou si vous avez acc√®s au r√©seau, vous pouvez utiliser la m√©thode de substitution classique: <br><br>  - en utilisant un support arpspoof entre la cam√©ra et le serveur; <br>  - utiliser ip_forward pour transmettre les requ√™tes du serveur de surveillance √† la cam√©ra IP, et vice versa; <br>  - en utilisant iptables, redirigez toutes les demandes via le port RTSP vers le serveur de surveillance non pas depuis la cam√©ra, mais depuis notre machine. <br><br><h3>  Piratage de cam√©ras de s√©curit√© </h3><br>  Afin de vous prot√©ger contre l'usurpation de fil selon la proc√©dure d√©crite ci-dessus, plusieurs m√©thodes peuvent √™tre utilis√©es: <br><br>  <b>1. Int√©gration de la cam√©ra</b> <br>  La meilleure protection est fournie par l'int√©gration de la cam√©ra dans un produit logiciel.  V√©rifiez si votre cam√©ra est int√©gr√©e au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®me de surveillance de ligne</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br>  Si votre cam√©ra ou votre fabricant ne figure pas dans la liste, vous pouvez contacter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le support technique</a> avec une demande d'int√©gration de votre mod√®le de cam√©ra IP. <br><br>  <b>2. Mise √† jour du firmware</b> <br>  Il est n√©cessaire de maintenir constamment le firmware de la cam√©ra √† jour, car avec l'aide de mises √† jour, les d√©veloppeurs corrigent diverses vuln√©rabilit√©s et augmentent ainsi la stabilit√© des cam√©ras. <br><br>  <b>3. Modification des identifiants et mots de passe standard</b> <br>  La premi√®re chose qu'un attaquant fait est d'essayer d'utiliser le nom d'utilisateur et le mot de passe de la cam√©ra standard.  Ils sont indiqu√©s dans le mode d'emploi, il n'est donc pas difficile de les trouver.  Par cons√©quent, utilisez toujours un nom d'utilisateur et un mot de passe uniques. <br><br>  <b>4. Activation de l'autorisation obligatoire</b> <br>  Cette fonctionnalit√© est pr√©sente dans de nombreux appareils photo modernes, mais, malheureusement, tous les utilisateurs ne la connaissent pas.  Si vous d√©sactivez cette option, la cam√©ra ne demandera pas d'autorisation lorsqu'elle y sera connect√©e, ce qui la rendra vuln√©rable au piratage.  Il convient de noter qu'il existe des cam√©ras avec double autorisation pour l'acc√®s http et pour l'acc√®s via le protocole ONVIF.  De plus, dans certaines cam√©ras, il existe un param√®tre distinct pour la demande d'autorisation lors de la connexion via une liaison RTSP directe. <br><br>  <b>5. Filtre d'adresse IP</b> <br>  Si la cam√©ra prend en charge la fonction de la soi-disant liste blanche, il est pr√©f√©rable de ne pas la n√©gliger.  Avec son aide, l'adresse IP √† partir de laquelle vous pouvez vous connecter √† la cam√©ra est d√©termin√©e.  Il doit s'agir de l'adresse du serveur auquel la cam√©ra est connect√©e et, si n√©cessaire, de la deuxi√®me adresse IP du poste de travail √† partir duquel la configuration est effectu√©e.  Mais ce n'est pas la m√©thode la plus fiable, car un attaquant peut utiliser la m√™me adresse IP lors du remplacement d'un appareil.  Par cons√©quent, il est pr√©f√©rable d'utiliser cette option avec d'autres recommandations. <br><br>  <b>6. Protection du r√©seau</b> <br>  Il est n√©cessaire de configurer correctement l'√©quipement de commutation.  La plupart des commutateurs prennent d√©sormais en charge la protection contre l'usurpation d'arp - assurez-vous de l'utiliser. <br><br>  <b>7. Partage r√©seau</b> <br>  Vous devez porter une attention particuli√®re √† cet √©l√©ment, car il joue un r√¥le important dans la s√©curit√© de votre syst√®me.  La s√©paration du r√©seau d'entreprise et du r√©seau de surveillance vous prot√©gera des intrus ou m√™me de vos propres employ√©s qui ont acc√®s au r√©seau partag√© et veulent vous pirater. <br><br>  <b>8. Activer le menu OSD</b> <br>  Vous devez activer le menu OSD avec l'heure et la date actuelles sur l'appareil photo afin de pouvoir toujours v√©rifier la pertinence de l'image.  C'est un bon moyen de se prot√©ger contre la modification du m√©trage, car l'OSD est superpos√© √† toutes les vid√©os provenant d'une cam√©ra sp√©cifique.  M√™me lorsqu'un attaquant √©crit le flux RTSP, l'usurpation sera perceptible gr√¢ce aux donn√©es qui resteront toujours sur les images vid√©o. <br><br>  Malheureusement, de nombreux attaquants ont appris √† trouver rapidement et √† tirer parti des vuln√©rabilit√©s des syst√®mes de vid√©osurveillance IP.  Pour s√©curiser le r√©seau, il est n√©cessaire de vous familiariser avec les m√©thodes de protection d√©crites dans cet article.  Pr√©voyez suffisamment de temps pour la mise en service du syst√®me, et en particulier pour configurer correctement tous ses composants.  Vous pouvez donc fournir au r√©seau une s√©curit√© maximale contre le piratage. <br><br>  <b>En conclusion, nous vous sugg√©rons de partager dans les commentaires, comment aborderiez-vous la protection de votre r√©seau de vid√©osurveillance contre le piratage?</b>  <b>Quelles m√©thodes d'attaque consid√©rez-vous comme les plus dangereuses?</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr405083/">https://habr.com/ru/post/fr405083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr405073/index.html">Centre de donn√©es pour la Coupe du monde</a></li>
<li><a href="../fr405075/index.html">Envoi et r√©ception de SMS √† l'aide de passerelles VoIP OpenVox</a></li>
<li><a href="../fr405077/index.html">Surveillance de la temp√©rature budg√©taire: Arduino + Zabbix</a></li>
<li><a href="../fr405079/index.html">La Californie paie les √âtats voisins pour r√©cup√©rer l'exc√©dent d'√©lectricit√© des centrales solaires</a></li>
<li><a href="../fr405081/index.html">[CASE] Comment nous avons fait une copie de l'ouvri√®re et de la fermi√®re collective pour le Mus√©e du Parlement europ√©en</a></li>
<li><a href="../fr405085/index.html">Revue vid√©o sur la cam√©ra Clevermic UNO PTZ</a></li>
<li><a href="../fr405087/index.html">Comment connecter la vid√©osurveillance √† l'aide d'une amplification de signal 2G / 3G / 4G</a></li>
<li><a href="../fr405089/index.html">Comment fonctionne le service Dog Walking?</a></li>
<li><a href="../fr405091/index.html">La NASA frappera un ast√©ro√Øde en octobre 2022 pour tester la d√©fense plan√©taire</a></li>
<li><a href="../fr405093/index.html">Pourquoi la particule de Higgs est-elle si importante</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>